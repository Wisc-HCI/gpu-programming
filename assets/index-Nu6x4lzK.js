function QY(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var Wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function n_(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}var DG={exports:{}},EI={},NG={exports:{}},Ds={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y$=Symbol.for("react.element"),ZY=Symbol.for("react.portal"),eK=Symbol.for("react.fragment"),tK=Symbol.for("react.strict_mode"),nK=Symbol.for("react.profiler"),rK=Symbol.for("react.provider"),iK=Symbol.for("react.context"),sK=Symbol.for("react.forward_ref"),oK=Symbol.for("react.suspense"),aK=Symbol.for("react.memo"),lK=Symbol.for("react.lazy"),GF=Symbol.iterator;function uK(n){return n===null||typeof n!="object"?null:(n=GF&&n[GF]||n["@@iterator"],typeof n=="function"?n:null)}var BG={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PG=Object.assign,FG={};function yE(n,e,t){this.props=n,this.context=e,this.refs=FG,this.updater=t||BG}yE.prototype.isReactComponent={};yE.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};yE.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function UG(){}UG.prototype=yE.prototype;function SN(n,e,t){this.props=n,this.context=e,this.refs=FG,this.updater=t||BG}var EN=SN.prototype=new UG;EN.constructor=SN;PG(EN,yE.prototype);EN.isPureReactComponent=!0;var WF=Array.isArray,zG=Object.prototype.hasOwnProperty,xN={current:null},HG={key:!0,ref:!0,__self:!0,__source:!0};function GG(n,e,t){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)zG.call(e,i)&&!HG.hasOwnProperty(i)&&(s[i]=e[i]);var u=arguments.length-2;if(u===1)s.children=t;else if(1<u){for(var d=Array(u),p=0;p<u;p++)d[p]=arguments[p+2];s.children=d}if(n&&n.defaultProps)for(i in u=n.defaultProps,u)s[i]===void 0&&(s[i]=u[i]);return{$$typeof:y$,type:n,key:o,ref:l,props:s,_owner:xN.current}}function cK(n,e){return{$$typeof:y$,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function wN(n){return typeof n=="object"&&n!==null&&n.$$typeof===y$}function hK(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var VF=/\/+/g;function dk(n,e){return typeof n=="object"&&n!==null&&n.key!=null?hK(""+n.key):e.toString(36)}function HA(n,e,t,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var l=!1;if(n===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case y$:case ZY:l=!0}}if(l)return l=n,s=s(l),n=i===""?"."+dk(l,0):i,WF(s)?(t="",n!=null&&(t=n.replace(VF,"$&/")+"/"),HA(s,e,t,"",function(p){return p})):s!=null&&(wN(s)&&(s=cK(s,t+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(VF,"$&/")+"/")+n)),e.push(s)),1;if(l=0,i=i===""?".":i+":",WF(n))for(var u=0;u<n.length;u++){o=n[u];var d=i+dk(o,u);l+=HA(o,e,t,d,s)}else if(d=uK(n),typeof d=="function")for(n=d.call(n),u=0;!(o=n.next()).done;)o=o.value,d=i+dk(o,u++),l+=HA(o,e,t,d,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function W$(n,e,t){if(n==null)return n;var i=[],s=0;return HA(n,i,"","",function(o){return e.call(t,o,s++)}),i}function dK(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var df={current:null},GA={transition:null},pK={ReactCurrentDispatcher:df,ReactCurrentBatchConfig:GA,ReactCurrentOwner:xN};Ds.Children={map:W$,forEach:function(n,e,t){W$(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return W$(n,function(){e++}),e},toArray:function(n){return W$(n,function(e){return e})||[]},only:function(n){if(!wN(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ds.Component=yE;Ds.Fragment=eK;Ds.Profiler=nK;Ds.PureComponent=SN;Ds.StrictMode=tK;Ds.Suspense=oK;Ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pK;Ds.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=PG({},n.props),s=n.key,o=n.ref,l=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=xN.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var u=n.type.defaultProps;for(d in e)zG.call(e,d)&&!HG.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&u!==void 0?u[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=t;else if(1<d){u=Array(d);for(var p=0;p<d;p++)u[p]=arguments[p+2];i.children=u}return{$$typeof:y$,type:n.type,key:s,ref:o,props:i,_owner:l}};Ds.createContext=function(n){return n={$$typeof:iK,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:rK,_context:n},n.Consumer=n};Ds.createElement=GG;Ds.createFactory=function(n){var e=GG.bind(null,n);return e.type=n,e};Ds.createRef=function(){return{current:null}};Ds.forwardRef=function(n){return{$$typeof:sK,render:n}};Ds.isValidElement=wN;Ds.lazy=function(n){return{$$typeof:lK,_payload:{_status:-1,_result:n},_init:dK}};Ds.memo=function(n,e){return{$$typeof:aK,type:n,compare:e===void 0?null:e}};Ds.startTransition=function(n){var e=GA.transition;GA.transition={};try{n()}finally{GA.transition=e}};Ds.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ds.useCallback=function(n,e){return df.current.useCallback(n,e)};Ds.useContext=function(n){return df.current.useContext(n)};Ds.useDebugValue=function(){};Ds.useDeferredValue=function(n){return df.current.useDeferredValue(n)};Ds.useEffect=function(n,e){return df.current.useEffect(n,e)};Ds.useId=function(){return df.current.useId()};Ds.useImperativeHandle=function(n,e,t){return df.current.useImperativeHandle(n,e,t)};Ds.useInsertionEffect=function(n,e){return df.current.useInsertionEffect(n,e)};Ds.useLayoutEffect=function(n,e){return df.current.useLayoutEffect(n,e)};Ds.useMemo=function(n,e){return df.current.useMemo(n,e)};Ds.useReducer=function(n,e,t){return df.current.useReducer(n,e,t)};Ds.useRef=function(n){return df.current.useRef(n)};Ds.useState=function(n){return df.current.useState(n)};Ds.useSyncExternalStore=function(n,e,t){return df.current.useSyncExternalStore(n,e,t)};Ds.useTransition=function(){return df.current.useTransition()};Ds.version="18.2.0";NG.exports=Ds;var me=NG.exports;const Vr=k1(me),rL=QY({__proto__:null,default:Vr},[me]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fK=me,mK=Symbol.for("react.element"),gK=Symbol.for("react.fragment"),_K=Object.prototype.hasOwnProperty,vK=fK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yK={key:!0,ref:!0,__self:!0,__source:!0};function WG(n,e,t){var i,s={},o=null,l=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)_K.call(e,i)&&!yK.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:mK,type:n,key:o,ref:l,props:s,_owner:vK.current}}EI.Fragment=gK;EI.jsx=WG;EI.jsxs=WG;DG.exports=EI;var Ve=DG.exports,iL={},VG={exports:{}},Om={},jG={exports:{}},XG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(J,se){var ie=J.length;J.push(se);e:for(;0<ie;){var he=ie-1>>>1,Se=J[he];if(0<s(Se,se))J[he]=se,J[ie]=Se,ie=he;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var se=J[0],ie=J.pop();if(ie!==se){J[0]=ie;e:for(var he=0,Se=J.length,Fe=Se>>>1;he<Fe;){var ke=2*(he+1)-1,qe=J[ke],De=ke+1,rt=J[De];if(0>s(qe,ie))De<Se&&0>s(rt,qe)?(J[he]=rt,J[De]=ie,he=De):(J[he]=qe,J[ke]=ie,he=ke);else if(De<Se&&0>s(rt,ie))J[he]=rt,J[De]=ie,he=De;else break e}}return se}function s(J,se){var ie=J.sortIndex-se.sortIndex;return ie!==0?ie:J.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],_=1,y=null,b=3,E=!1,C=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(J){for(var se=t(p);se!==null;){if(se.callback===null)i(p);else if(se.startTime<=J)i(p),se.sortIndex=se.expirationTime,e(d,se);else break;se=t(p)}}function N(J){if(A=!1,P(J),!C)if(t(d)!==null)C=!0,Te(z);else{var se=t(p);se!==null&&Oe(N,se.startTime-J)}}function z(J,se){C=!1,A&&(A=!1,L(U),U=-1),E=!0;var ie=b;try{for(P(se),y=t(d);y!==null&&(!(y.expirationTime>se)||J&&!oe());){var he=y.callback;if(typeof he=="function"){y.callback=null,b=y.priorityLevel;var Se=he(y.expirationTime<=se);se=n.unstable_now(),typeof Se=="function"?y.callback=Se:y===t(d)&&i(d),P(se)}else i(d);y=t(d)}if(y!==null)var Fe=!0;else{var ke=t(p);ke!==null&&Oe(N,ke.startTime-se),Fe=!1}return Fe}finally{y=null,b=ie,E=!1}}var W=!1,H=null,U=-1,Q=5,ne=-1;function oe(){return!(n.unstable_now()-ne<Q)}function le(){if(H!==null){var J=n.unstable_now();ne=J;var se=!0;try{se=H(!0,J)}finally{se?ge():(W=!1,H=null)}}else W=!1}var ge;if(typeof O=="function")ge=function(){O(le)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,pe=ce.port2;ce.port1.onmessage=le,ge=function(){pe.postMessage(null)}}else ge=function(){I(le,0)};function Te(J){H=J,W||(W=!0,ge())}function Oe(J,se){U=I(function(){J(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){C||E||(C=!0,Te(z))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(J){switch(b){case 1:case 2:case 3:var se=3;break;default:se=b}var ie=b;b=se;try{return J()}finally{b=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,se){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ie=b;b=J;try{return se()}finally{b=ie}},n.unstable_scheduleCallback=function(J,se,ie){var he=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?he+ie:he):ie=he,J){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=ie+Se,J={id:_++,callback:se,priorityLevel:J,startTime:ie,expirationTime:Se,sortIndex:-1},ie>he?(J.sortIndex=ie,e(p,J),t(d)===null&&J===t(p)&&(A?(L(U),U=-1):A=!0,Oe(N,ie-he))):(J.sortIndex=Se,e(d,J),C||E||(C=!0,Te(z))),J},n.unstable_shouldYield=oe,n.unstable_wrapCallback=function(J){var se=b;return function(){var ie=b;b=se;try{return J.apply(this,arguments)}finally{b=ie}}}})(XG);jG.exports=XG;var bK=jG.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YG=me,Im=bK;function En(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var KG=new Set,Tw={};function O1(n,e){HS(n,e),HS(n+"Capture",e)}function HS(n,e){for(Tw[n]=e,n=0;n<e.length;n++)KG.add(e[n])}var tv=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sL=Object.prototype.hasOwnProperty,TK=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jF={},XF={};function SK(n){return sL.call(XF,n)?!0:sL.call(jF,n)?!1:TK.test(n)?XF[n]=!0:(jF[n]=!0,!1)}function EK(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function xK(n,e,t,i){if(e===null||typeof e>"u"||EK(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pf(n,e,t,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Zd={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Zd[n]=new pf(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Zd[e]=new pf(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Zd[n]=new pf(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Zd[n]=new pf(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Zd[n]=new pf(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Zd[n]=new pf(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Zd[n]=new pf(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Zd[n]=new pf(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Zd[n]=new pf(n,5,!1,n.toLowerCase(),null,!1,!1)});var $N=/[\-:]([a-z])/g;function CN(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace($N,CN);Zd[e]=new pf(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace($N,CN);Zd[e]=new pf(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace($N,CN);Zd[e]=new pf(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Zd[n]=new pf(n,1,!1,n.toLowerCase(),null,!1,!1)});Zd.xlinkHref=new pf("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Zd[n]=new pf(n,1,!1,n.toLowerCase(),null,!0,!0)});function AN(n,e,t,i){var s=Zd.hasOwnProperty(e)?Zd[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xK(e,t,s,i)&&(t=null),i||s===null?SK(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var ov=YG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V$=Symbol.for("react.element"),dS=Symbol.for("react.portal"),pS=Symbol.for("react.fragment"),MN=Symbol.for("react.strict_mode"),oL=Symbol.for("react.profiler"),JG=Symbol.for("react.provider"),qG=Symbol.for("react.context"),IN=Symbol.for("react.forward_ref"),aL=Symbol.for("react.suspense"),lL=Symbol.for("react.suspense_list"),RN=Symbol.for("react.memo"),qv=Symbol.for("react.lazy"),QG=Symbol.for("react.offscreen"),YF=Symbol.iterator;function tx(n){return n===null||typeof n!="object"?null:(n=YF&&n[YF]||n["@@iterator"],typeof n=="function"?n:null)}var ac=Object.assign,pk;function Gx(n){if(pk===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);pk=e&&e[1]||""}return`
`+pk+n}var fk=!1;function mk(n,e){if(!n||fk)return"";fk=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(n,[],e)}else{try{e.call()}catch(p){i=p}n.call(e.prototype)}else{try{throw Error()}catch(p){i=p}n()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,u=o.length-1;1<=l&&0<=u&&s[l]!==o[u];)u--;for(;1<=l&&0<=u;l--,u--)if(s[l]!==o[u]){if(l!==1||u!==1)do if(l--,u--,0>u||s[l]!==o[u]){var d=`
`+s[l].replace(" at new "," at ");return n.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",n.displayName)),d}while(1<=l&&0<=u);break}}}finally{fk=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Gx(n):""}function wK(n){switch(n.tag){case 5:return Gx(n.type);case 16:return Gx("Lazy");case 13:return Gx("Suspense");case 19:return Gx("SuspenseList");case 0:case 2:case 15:return n=mk(n.type,!1),n;case 11:return n=mk(n.type.render,!1),n;case 1:return n=mk(n.type,!0),n;default:return""}}function uL(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case pS:return"Fragment";case dS:return"Portal";case oL:return"Profiler";case MN:return"StrictMode";case aL:return"Suspense";case lL:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case qG:return(n.displayName||"Context")+".Consumer";case JG:return(n._context.displayName||"Context")+".Provider";case IN:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case RN:return e=n.displayName||null,e!==null?e:uL(n.type)||"Memo";case qv:e=n._payload,n=n._init;try{return uL(n(e))}catch{}}return null}function $K(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uL(e);case 8:return e===MN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vy(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ZG(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CK(n){var e=ZG(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function j$(n){n._valueTracker||(n._valueTracker=CK(n))}function e6(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=ZG(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function wM(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function cL(n,e){var t=e.checked;return ac({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function KF(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=vy(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function t6(n,e){e=e.checked,e!=null&&AN(n,"checked",e,!1)}function hL(n,e){t6(n,e);var t=vy(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?dL(n,e.type,t):e.hasOwnProperty("defaultValue")&&dL(n,e.type,vy(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function JF(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function dL(n,e,t){(e!=="number"||wM(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Wx=Array.isArray;function IS(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+vy(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function pL(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(En(91));return ac({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function qF(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(En(92));if(Wx(t)){if(1<t.length)throw Error(En(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:vy(t)}}function n6(n,e){var t=vy(e.value),i=vy(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function QF(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function r6(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fL(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?r6(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var X$,i6=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(X$=X$||document.createElement("div"),X$.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=X$.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Sw(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var tw={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AK=["Webkit","ms","Moz","O"];Object.keys(tw).forEach(function(n){AK.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),tw[e]=tw[n]})});function s6(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||tw.hasOwnProperty(n)&&tw[n]?(""+e).trim():e+"px"}function o6(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=s6(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var MK=ac({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mL(n,e){if(e){if(MK[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(En(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(En(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(En(61))}if(e.style!=null&&typeof e.style!="object")throw Error(En(62))}}function gL(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _L=null;function kN(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var vL=null,RS=null,kS=null;function ZF(n){if(n=S$(n)){if(typeof vL!="function")throw Error(En(280));var e=n.stateNode;e&&(e=AI(e),vL(n.stateNode,n.type,e))}}function a6(n){RS?kS?kS.push(n):kS=[n]:RS=n}function l6(){if(RS){var n=RS,e=kS;if(kS=RS=null,ZF(n),e)for(n=0;n<e.length;n++)ZF(e[n])}}function u6(n,e){return n(e)}function c6(){}var gk=!1;function h6(n,e,t){if(gk)return n(e,t);gk=!0;try{return u6(n,e,t)}finally{gk=!1,(RS!==null||kS!==null)&&(c6(),l6())}}function Ew(n,e){var t=n.stateNode;if(t===null)return null;var i=AI(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(En(231,e,typeof t));return t}var yL=!1;if(tv)try{var nx={};Object.defineProperty(nx,"passive",{get:function(){yL=!0}}),window.addEventListener("test",nx,nx),window.removeEventListener("test",nx,nx)}catch{yL=!1}function IK(n,e,t,i,s,o,l,u,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(t,p)}catch(_){this.onError(_)}}var nw=!1,$M=null,CM=!1,bL=null,RK={onError:function(n){nw=!0,$M=n}};function kK(n,e,t,i,s,o,l,u,d){nw=!1,$M=null,IK.apply(RK,arguments)}function OK(n,e,t,i,s,o,l,u,d){if(kK.apply(this,arguments),nw){if(nw){var p=$M;nw=!1,$M=null}else throw Error(En(198));CM||(CM=!0,bL=p)}}function L1(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function d6(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function e3(n){if(L1(n)!==n)throw Error(En(188))}function LK(n){var e=n.alternate;if(!e){if(e=L1(n),e===null)throw Error(En(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===t)return e3(s),n;if(o===i)return e3(s),e;o=o.sibling}throw Error(En(188))}if(t.return!==i.return)t=s,i=o;else{for(var l=!1,u=s.child;u;){if(u===t){l=!0,t=s,i=o;break}if(u===i){l=!0,i=s,t=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===t){l=!0,t=o,i=s;break}if(u===i){l=!0,i=o,t=s;break}u=u.sibling}if(!l)throw Error(En(189))}}if(t.alternate!==i)throw Error(En(190))}if(t.tag!==3)throw Error(En(188));return t.stateNode.current===t?n:e}function p6(n){return n=LK(n),n!==null?f6(n):null}function f6(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=f6(n);if(e!==null)return e;n=n.sibling}return null}var m6=Im.unstable_scheduleCallback,t3=Im.unstable_cancelCallback,DK=Im.unstable_shouldYield,NK=Im.unstable_requestPaint,oh=Im.unstable_now,BK=Im.unstable_getCurrentPriorityLevel,ON=Im.unstable_ImmediatePriority,g6=Im.unstable_UserBlockingPriority,AM=Im.unstable_NormalPriority,PK=Im.unstable_LowPriority,_6=Im.unstable_IdlePriority,xI=null,X0=null;function FK(n){if(X0&&typeof X0.onCommitFiberRoot=="function")try{X0.onCommitFiberRoot(xI,n,void 0,(n.current.flags&128)===128)}catch{}}var Kg=Math.clz32?Math.clz32:HK,UK=Math.log,zK=Math.LN2;function HK(n){return n>>>=0,n===0?32:31-(UK(n)/zK|0)|0}var Y$=64,K$=4194304;function Vx(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function MM(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,o=n.pingedLanes,l=t&268435455;if(l!==0){var u=l&~s;u!==0?i=Vx(u):(o&=l,o!==0&&(i=Vx(o)))}else l=t&~s,l!==0?i=Vx(l):o!==0&&(i=Vx(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Kg(e),s=1<<t,i|=n[t],e&=~s;return i}function GK(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WK(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var l=31-Kg(o),u=1<<l,d=s[l];d===-1?(!(u&t)||u&i)&&(s[l]=GK(u,e)):d<=e&&(n.expiredLanes|=u),o&=~u}}function TL(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function v6(){var n=Y$;return Y$<<=1,!(Y$&4194240)&&(Y$=64),n}function _k(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function b$(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Kg(e),n[e]=t}function VK(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-Kg(t),o=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~o}}function LN(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Kg(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var Ca=0;function y6(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var b6,DN,T6,S6,E6,SL=!1,J$=[],ay=null,ly=null,uy=null,xw=new Map,ww=new Map,ey=[],jK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n3(n,e){switch(n){case"focusin":case"focusout":ay=null;break;case"dragenter":case"dragleave":ly=null;break;case"mouseover":case"mouseout":uy=null;break;case"pointerover":case"pointerout":xw.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ww.delete(e.pointerId)}}function rx(n,e,t,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=S$(e),e!==null&&DN(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function XK(n,e,t,i,s){switch(e){case"focusin":return ay=rx(ay,n,e,t,i,s),!0;case"dragenter":return ly=rx(ly,n,e,t,i,s),!0;case"mouseover":return uy=rx(uy,n,e,t,i,s),!0;case"pointerover":var o=s.pointerId;return xw.set(o,rx(xw.get(o)||null,n,e,t,i,s)),!0;case"gotpointercapture":return o=s.pointerId,ww.set(o,rx(ww.get(o)||null,n,e,t,i,s)),!0}return!1}function x6(n){var e=jb(n.target);if(e!==null){var t=L1(e);if(t!==null){if(e=t.tag,e===13){if(e=d6(t),e!==null){n.blockedOn=e,E6(n.priority,function(){T6(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function WA(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=EL(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);_L=i,t.target.dispatchEvent(i),_L=null}else return e=S$(t),e!==null&&DN(e),n.blockedOn=t,!1;e.shift()}return!0}function r3(n,e,t){WA(n)&&t.delete(e)}function YK(){SL=!1,ay!==null&&WA(ay)&&(ay=null),ly!==null&&WA(ly)&&(ly=null),uy!==null&&WA(uy)&&(uy=null),xw.forEach(r3),ww.forEach(r3)}function ix(n,e){n.blockedOn===e&&(n.blockedOn=null,SL||(SL=!0,Im.unstable_scheduleCallback(Im.unstable_NormalPriority,YK)))}function $w(n){function e(s){return ix(s,n)}if(0<J$.length){ix(J$[0],n);for(var t=1;t<J$.length;t++){var i=J$[t];i.blockedOn===n&&(i.blockedOn=null)}}for(ay!==null&&ix(ay,n),ly!==null&&ix(ly,n),uy!==null&&ix(uy,n),xw.forEach(e),ww.forEach(e),t=0;t<ey.length;t++)i=ey[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<ey.length&&(t=ey[0],t.blockedOn===null);)x6(t),t.blockedOn===null&&ey.shift()}var OS=ov.ReactCurrentBatchConfig,IM=!0;function KK(n,e,t,i){var s=Ca,o=OS.transition;OS.transition=null;try{Ca=1,NN(n,e,t,i)}finally{Ca=s,OS.transition=o}}function JK(n,e,t,i){var s=Ca,o=OS.transition;OS.transition=null;try{Ca=4,NN(n,e,t,i)}finally{Ca=s,OS.transition=o}}function NN(n,e,t,i){if(IM){var s=EL(n,e,t,i);if(s===null)Ck(n,e,i,RM,t),n3(n,i);else if(XK(s,n,e,t,i))i.stopPropagation();else if(n3(n,i),e&4&&-1<jK.indexOf(n)){for(;s!==null;){var o=S$(s);if(o!==null&&b6(o),o=EL(n,e,t,i),o===null&&Ck(n,e,i,RM,t),o===s)break;s=o}s!==null&&i.stopPropagation()}else Ck(n,e,i,null,t)}}var RM=null;function EL(n,e,t,i){if(RM=null,n=kN(i),n=jb(n),n!==null)if(e=L1(n),e===null)n=null;else if(t=e.tag,t===13){if(n=d6(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return RM=n,null}function w6(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BK()){case ON:return 1;case g6:return 4;case AM:case PK:return 16;case _6:return 536870912;default:return 16}default:return 16}}var ny=null,BN=null,VA=null;function $6(){if(VA)return VA;var n,e=BN,t=e.length,i,s="value"in ny?ny.value:ny.textContent,o=s.length;for(n=0;n<t&&e[n]===s[n];n++);var l=t-n;for(i=1;i<=l&&e[t-i]===s[o-i];i++);return VA=s.slice(n,1<i?1-i:void 0)}function jA(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function q$(){return!0}function i3(){return!1}function Lm(n){function e(t,i,s,o,l){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var u in n)n.hasOwnProperty(u)&&(t=n[u],this[u]=t?t(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?q$:i3,this.isPropagationStopped=i3,this}return ac(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=q$)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=q$)},persist:function(){},isPersistent:q$}),e}var bE={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PN=Lm(bE),T$=ac({},bE,{view:0,detail:0}),qK=Lm(T$),vk,yk,sx,wI=ac({},T$,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:FN,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==sx&&(sx&&n.type==="mousemove"?(vk=n.screenX-sx.screenX,yk=n.screenY-sx.screenY):yk=vk=0,sx=n),vk)},movementY:function(n){return"movementY"in n?n.movementY:yk}}),s3=Lm(wI),QK=ac({},wI,{dataTransfer:0}),ZK=Lm(QK),eJ=ac({},T$,{relatedTarget:0}),bk=Lm(eJ),tJ=ac({},bE,{animationName:0,elapsedTime:0,pseudoElement:0}),nJ=Lm(tJ),rJ=ac({},bE,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),iJ=Lm(rJ),sJ=ac({},bE,{data:0}),o3=Lm(sJ),oJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uJ(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=lJ[n])?!!e[n]:!1}function FN(){return uJ}var cJ=ac({},T$,{key:function(n){if(n.key){var e=oJ[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=jA(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?aJ[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:FN,charCode:function(n){return n.type==="keypress"?jA(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?jA(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),hJ=Lm(cJ),dJ=ac({},wI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a3=Lm(dJ),pJ=ac({},T$,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:FN}),fJ=Lm(pJ),mJ=ac({},bE,{propertyName:0,elapsedTime:0,pseudoElement:0}),gJ=Lm(mJ),_J=ac({},wI,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),vJ=Lm(_J),yJ=[9,13,27,32],UN=tv&&"CompositionEvent"in window,rw=null;tv&&"documentMode"in document&&(rw=document.documentMode);var bJ=tv&&"TextEvent"in window&&!rw,C6=tv&&(!UN||rw&&8<rw&&11>=rw),l3=" ",u3=!1;function A6(n,e){switch(n){case"keyup":return yJ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function M6(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var fS=!1;function TJ(n,e){switch(n){case"compositionend":return M6(e);case"keypress":return e.which!==32?null:(u3=!0,l3);case"textInput":return n=e.data,n===l3&&u3?null:n;default:return null}}function SJ(n,e){if(fS)return n==="compositionend"||!UN&&A6(n,e)?(n=$6(),VA=BN=ny=null,fS=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return C6&&e.locale!=="ko"?null:e.data;default:return null}}var EJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c3(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!EJ[n.type]:e==="textarea"}function I6(n,e,t,i){a6(i),e=kM(e,"onChange"),0<e.length&&(t=new PN("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var iw=null,Cw=null;function xJ(n){z6(n,0)}function $I(n){var e=_S(n);if(e6(e))return n}function wJ(n,e){if(n==="change")return e}var R6=!1;if(tv){var Tk;if(tv){var Sk="oninput"in document;if(!Sk){var h3=document.createElement("div");h3.setAttribute("oninput","return;"),Sk=typeof h3.oninput=="function"}Tk=Sk}else Tk=!1;R6=Tk&&(!document.documentMode||9<document.documentMode)}function d3(){iw&&(iw.detachEvent("onpropertychange",k6),Cw=iw=null)}function k6(n){if(n.propertyName==="value"&&$I(Cw)){var e=[];I6(e,Cw,n,kN(n)),h6(xJ,e)}}function $J(n,e,t){n==="focusin"?(d3(),iw=e,Cw=t,iw.attachEvent("onpropertychange",k6)):n==="focusout"&&d3()}function CJ(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return $I(Cw)}function AJ(n,e){if(n==="click")return $I(e)}function MJ(n,e){if(n==="input"||n==="change")return $I(e)}function IJ(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Zg=typeof Object.is=="function"?Object.is:IJ;function Aw(n,e){if(Zg(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!sL.call(e,s)||!Zg(n[s],e[s]))return!1}return!0}function p3(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function f3(n,e){var t=p3(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=p3(t)}}function O6(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?O6(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function L6(){for(var n=window,e=wM();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=wM(n.document)}return e}function zN(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function RJ(n){var e=L6(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&O6(t.ownerDocument.documentElement,t)){if(i!==null&&zN(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!n.extend&&o>i&&(s=i,i=o,o=s),s=f3(t,o);var l=f3(t,i);s&&l&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==l.node||n.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var kJ=tv&&"documentMode"in document&&11>=document.documentMode,mS=null,xL=null,sw=null,wL=!1;function m3(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;wL||mS==null||mS!==wM(i)||(i=mS,"selectionStart"in i&&zN(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),sw&&Aw(sw,i)||(sw=i,i=kM(xL,"onSelect"),0<i.length&&(e=new PN("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=mS)))}function Q$(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var gS={animationend:Q$("Animation","AnimationEnd"),animationiteration:Q$("Animation","AnimationIteration"),animationstart:Q$("Animation","AnimationStart"),transitionend:Q$("Transition","TransitionEnd")},Ek={},D6={};tv&&(D6=document.createElement("div").style,"AnimationEvent"in window||(delete gS.animationend.animation,delete gS.animationiteration.animation,delete gS.animationstart.animation),"TransitionEvent"in window||delete gS.transitionend.transition);function CI(n){if(Ek[n])return Ek[n];if(!gS[n])return n;var e=gS[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in D6)return Ek[n]=e[t];return n}var N6=CI("animationend"),B6=CI("animationiteration"),P6=CI("animationstart"),F6=CI("transitionend"),U6=new Map,g3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $y(n,e){U6.set(n,e),O1(e,[n])}for(var xk=0;xk<g3.length;xk++){var wk=g3[xk],OJ=wk.toLowerCase(),LJ=wk[0].toUpperCase()+wk.slice(1);$y(OJ,"on"+LJ)}$y(N6,"onAnimationEnd");$y(B6,"onAnimationIteration");$y(P6,"onAnimationStart");$y("dblclick","onDoubleClick");$y("focusin","onFocus");$y("focusout","onBlur");$y(F6,"onTransitionEnd");HS("onMouseEnter",["mouseout","mouseover"]);HS("onMouseLeave",["mouseout","mouseover"]);HS("onPointerEnter",["pointerout","pointerover"]);HS("onPointerLeave",["pointerout","pointerover"]);O1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));O1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));O1("onBeforeInput",["compositionend","keypress","textInput","paste"]);O1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));O1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));O1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(jx));function _3(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,OK(i,e,void 0,n),n.currentTarget=null}function z6(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var u=i[l],d=u.instance,p=u.currentTarget;if(u=u.listener,d!==o&&s.isPropagationStopped())break e;_3(s,u,p),o=d}else for(l=0;l<i.length;l++){if(u=i[l],d=u.instance,p=u.currentTarget,u=u.listener,d!==o&&s.isPropagationStopped())break e;_3(s,u,p),o=d}}}if(CM)throw n=bL,CM=!1,bL=null,n}function du(n,e){var t=e[IL];t===void 0&&(t=e[IL]=new Set);var i=n+"__bubble";t.has(i)||(H6(e,n,2,!1),t.add(i))}function $k(n,e,t){var i=0;e&&(i|=4),H6(t,n,i,e)}var Z$="_reactListening"+Math.random().toString(36).slice(2);function Mw(n){if(!n[Z$]){n[Z$]=!0,KG.forEach(function(t){t!=="selectionchange"&&(DJ.has(t)||$k(t,!1,n),$k(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Z$]||(e[Z$]=!0,$k("selectionchange",!1,e))}}function H6(n,e,t,i){switch(w6(e)){case 1:var s=KK;break;case 4:s=JK;break;default:s=NN}t=s.bind(null,e,t,n),s=void 0,!yL||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function Ck(n,e,t,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var u=i.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;u!==null;){if(l=jb(u),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}u=u.parentNode}}i=i.return}h6(function(){var p=o,_=kN(t),y=[];e:{var b=U6.get(n);if(b!==void 0){var E=PN,C=n;switch(n){case"keypress":if(jA(t)===0)break e;case"keydown":case"keyup":E=hJ;break;case"focusin":C="focus",E=bk;break;case"focusout":C="blur",E=bk;break;case"beforeblur":case"afterblur":E=bk;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=s3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=ZK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=fJ;break;case N6:case B6:case P6:E=nJ;break;case F6:E=gJ;break;case"scroll":E=qK;break;case"wheel":E=vJ;break;case"copy":case"cut":case"paste":E=iJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=a3}var A=(e&4)!==0,I=!A&&n==="scroll",L=A?b!==null?b+"Capture":null:b;A=[];for(var O=p,P;O!==null;){P=O;var N=P.stateNode;if(P.tag===5&&N!==null&&(P=N,L!==null&&(N=Ew(O,L),N!=null&&A.push(Iw(O,N,P)))),I)break;O=O.return}0<A.length&&(b=new E(b,C,null,t,_),y.push({event:b,listeners:A}))}}if(!(e&7)){e:{if(b=n==="mouseover"||n==="pointerover",E=n==="mouseout"||n==="pointerout",b&&t!==_L&&(C=t.relatedTarget||t.fromElement)&&(jb(C)||C[nv]))break e;if((E||b)&&(b=_.window===_?_:(b=_.ownerDocument)?b.defaultView||b.parentWindow:window,E?(C=t.relatedTarget||t.toElement,E=p,C=C?jb(C):null,C!==null&&(I=L1(C),C!==I||C.tag!==5&&C.tag!==6)&&(C=null)):(E=null,C=p),E!==C)){if(A=s3,N="onMouseLeave",L="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(A=a3,N="onPointerLeave",L="onPointerEnter",O="pointer"),I=E==null?b:_S(E),P=C==null?b:_S(C),b=new A(N,O+"leave",E,t,_),b.target=I,b.relatedTarget=P,N=null,jb(_)===p&&(A=new A(L,O+"enter",C,t,_),A.target=P,A.relatedTarget=I,N=A),I=N,E&&C)t:{for(A=E,L=C,O=0,P=A;P;P=yT(P))O++;for(P=0,N=L;N;N=yT(N))P++;for(;0<O-P;)A=yT(A),O--;for(;0<P-O;)L=yT(L),P--;for(;O--;){if(A===L||L!==null&&A===L.alternate)break t;A=yT(A),L=yT(L)}A=null}else A=null;E!==null&&v3(y,b,E,A,!1),C!==null&&I!==null&&v3(y,I,C,A,!0)}}e:{if(b=p?_S(p):window,E=b.nodeName&&b.nodeName.toLowerCase(),E==="select"||E==="input"&&b.type==="file")var z=wJ;else if(c3(b))if(R6)z=MJ;else{z=CJ;var W=$J}else(E=b.nodeName)&&E.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(z=AJ);if(z&&(z=z(n,p))){I6(y,z,t,_);break e}W&&W(n,b,p),n==="focusout"&&(W=b._wrapperState)&&W.controlled&&b.type==="number"&&dL(b,"number",b.value)}switch(W=p?_S(p):window,n){case"focusin":(c3(W)||W.contentEditable==="true")&&(mS=W,xL=p,sw=null);break;case"focusout":sw=xL=mS=null;break;case"mousedown":wL=!0;break;case"contextmenu":case"mouseup":case"dragend":wL=!1,m3(y,t,_);break;case"selectionchange":if(kJ)break;case"keydown":case"keyup":m3(y,t,_)}var H;if(UN)e:{switch(n){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else fS?A6(n,t)&&(U="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(U="onCompositionStart");U&&(C6&&t.locale!=="ko"&&(fS||U!=="onCompositionStart"?U==="onCompositionEnd"&&fS&&(H=$6()):(ny=_,BN="value"in ny?ny.value:ny.textContent,fS=!0)),W=kM(p,U),0<W.length&&(U=new o3(U,n,null,t,_),y.push({event:U,listeners:W}),H?U.data=H:(H=M6(t),H!==null&&(U.data=H)))),(H=bJ?TJ(n,t):SJ(n,t))&&(p=kM(p,"onBeforeInput"),0<p.length&&(_=new o3("onBeforeInput","beforeinput",null,t,_),y.push({event:_,listeners:p}),_.data=H))}z6(y,e)})}function Iw(n,e,t){return{instance:n,listener:e,currentTarget:t}}function kM(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Ew(n,t),o!=null&&i.unshift(Iw(n,o,s)),o=Ew(n,e),o!=null&&i.push(Iw(n,o,s))),n=n.return}return i}function yT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function v3(n,e,t,i,s){for(var o=e._reactName,l=[];t!==null&&t!==i;){var u=t,d=u.alternate,p=u.stateNode;if(d!==null&&d===i)break;u.tag===5&&p!==null&&(u=p,s?(d=Ew(t,o),d!=null&&l.unshift(Iw(t,d,u))):s||(d=Ew(t,o),d!=null&&l.push(Iw(t,d,u)))),t=t.return}l.length!==0&&n.push({event:e,listeners:l})}var NJ=/\r\n?/g,BJ=/\u0000|\uFFFD/g;function y3(n){return(typeof n=="string"?n:""+n).replace(NJ,`
`).replace(BJ,"")}function eC(n,e,t){if(e=y3(e),y3(n)!==e&&t)throw Error(En(425))}function OM(){}var $L=null,CL=null;function AL(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ML=typeof setTimeout=="function"?setTimeout:void 0,PJ=typeof clearTimeout=="function"?clearTimeout:void 0,b3=typeof Promise=="function"?Promise:void 0,FJ=typeof queueMicrotask=="function"?queueMicrotask:typeof b3<"u"?function(n){return b3.resolve(null).then(n).catch(UJ)}:ML;function UJ(n){setTimeout(function(){throw n})}function Ak(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),$w(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);$w(e)}function cy(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function T3(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var TE=Math.random().toString(36).slice(2),G0="__reactFiber$"+TE,Rw="__reactProps$"+TE,nv="__reactContainer$"+TE,IL="__reactEvents$"+TE,zJ="__reactListeners$"+TE,HJ="__reactHandles$"+TE;function jb(n){var e=n[G0];if(e)return e;for(var t=n.parentNode;t;){if(e=t[nv]||t[G0]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=T3(n);n!==null;){if(t=n[G0])return t;n=T3(n)}return e}n=t,t=n.parentNode}return null}function S$(n){return n=n[G0]||n[nv],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function _S(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(En(33))}function AI(n){return n[Rw]||null}var RL=[],vS=-1;function Cy(n){return{current:n}}function fu(n){0>vS||(n.current=RL[vS],RL[vS]=null,vS--)}function Vl(n,e){vS++,RL[vS]=n.current,n.current=e}var yy={},Ap=Cy(yy),Ff=Cy(!1),y1=yy;function GS(n,e){var t=n.type.contextTypes;if(!t)return yy;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in t)s[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Uf(n){return n=n.childContextTypes,n!=null}function LM(){fu(Ff),fu(Ap)}function S3(n,e,t){if(Ap.current!==yy)throw Error(En(168));Vl(Ap,e),Vl(Ff,t)}function G6(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(En(108,$K(n)||"Unknown",s));return ac({},t,i)}function DM(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||yy,y1=Ap.current,Vl(Ap,n),Vl(Ff,Ff.current),!0}function E3(n,e,t){var i=n.stateNode;if(!i)throw Error(En(169));t?(n=G6(n,e,y1),i.__reactInternalMemoizedMergedChildContext=n,fu(Ff),fu(Ap),Vl(Ap,n)):fu(Ff),Vl(Ff,t)}var W_=null,MI=!1,Mk=!1;function W6(n){W_===null?W_=[n]:W_.push(n)}function GJ(n){MI=!0,W6(n)}function Ay(){if(!Mk&&W_!==null){Mk=!0;var n=0,e=Ca;try{var t=W_;for(Ca=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}W_=null,MI=!1}catch(s){throw W_!==null&&(W_=W_.slice(n+1)),m6(ON,Ay),s}finally{Ca=e,Mk=!1}}return null}var yS=[],bS=0,NM=null,BM=0,og=[],ag=0,b1=null,K_=1,J_="";function Lb(n,e){yS[bS++]=BM,yS[bS++]=NM,NM=n,BM=e}function V6(n,e,t){og[ag++]=K_,og[ag++]=J_,og[ag++]=b1,b1=n;var i=K_;n=J_;var s=32-Kg(i)-1;i&=~(1<<s),t+=1;var o=32-Kg(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,K_=1<<32-Kg(e)+s|t<<s|i,J_=o+n}else K_=1<<o|t<<s|i,J_=n}function HN(n){n.return!==null&&(Lb(n,1),V6(n,1,0))}function GN(n){for(;n===NM;)NM=yS[--bS],yS[bS]=null,BM=yS[--bS],yS[bS]=null;for(;n===b1;)b1=og[--ag],og[ag]=null,J_=og[--ag],og[ag]=null,K_=og[--ag],og[ag]=null}var wm=null,Em=null,Bu=!1,Wg=null;function j6(n,e){var t=hg(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function x3(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,wm=n,Em=cy(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,wm=n,Em=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=b1!==null?{id:K_,overflow:J_}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=hg(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,wm=n,Em=null,!0):!1;default:return!1}}function kL(n){return(n.mode&1)!==0&&(n.flags&128)===0}function OL(n){if(Bu){var e=Em;if(e){var t=e;if(!x3(n,e)){if(kL(n))throw Error(En(418));e=cy(t.nextSibling);var i=wm;e&&x3(n,e)?j6(i,t):(n.flags=n.flags&-4097|2,Bu=!1,wm=n)}}else{if(kL(n))throw Error(En(418));n.flags=n.flags&-4097|2,Bu=!1,wm=n}}}function w3(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;wm=n}function tC(n){if(n!==wm)return!1;if(!Bu)return w3(n),Bu=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!AL(n.type,n.memoizedProps)),e&&(e=Em)){if(kL(n))throw X6(),Error(En(418));for(;e;)j6(n,e),e=cy(e.nextSibling)}if(w3(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(En(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Em=cy(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Em=null}}else Em=wm?cy(n.stateNode.nextSibling):null;return!0}function X6(){for(var n=Em;n;)n=cy(n.nextSibling)}function WS(){Em=wm=null,Bu=!1}function WN(n){Wg===null?Wg=[n]:Wg.push(n)}var WJ=ov.ReactCurrentBatchConfig;function Hg(n,e){if(n&&n.defaultProps){e=ac({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var PM=Cy(null),FM=null,TS=null,VN=null;function jN(){VN=TS=FM=null}function XN(n){var e=PM.current;fu(PM),n._currentValue=e}function LL(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function LS(n,e){FM=n,VN=TS=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Bf=!0),n.firstContext=null)}function fg(n){var e=n._currentValue;if(VN!==n)if(n={context:n,memoizedValue:e,next:null},TS===null){if(FM===null)throw Error(En(308));TS=n,FM.dependencies={lanes:0,firstContext:n}}else TS=TS.next=n;return e}var Xb=null;function YN(n){Xb===null?Xb=[n]:Xb.push(n)}function Y6(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,YN(e)):(t.next=s.next,s.next=t),e.interleaved=t,rv(n,i)}function rv(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Qv=!1;function KN(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K6(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Q_(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function hy(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,So&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,rv(n,t)}return s=i.interleaved,s===null?(e.next=e,YN(i)):(e.next=s.next,s.next=e),i.interleaved=e,rv(n,t)}function XA(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,LN(n,t)}}function $3(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?s=o=l:o=o.next=l,t=t.next}while(t!==null);o===null?s=o=e:o=o.next=e}else s=o=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function UM(n,e,t,i){var s=n.updateQueue;Qv=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var d=u,p=d.next;d.next=null,l===null?o=p:l.next=p,l=d;var _=n.alternate;_!==null&&(_=_.updateQueue,u=_.lastBaseUpdate,u!==l&&(u===null?_.firstBaseUpdate=p:u.next=p,_.lastBaseUpdate=d))}if(o!==null){var y=s.baseState;l=0,_=p=d=null,u=o;do{var b=u.lane,E=u.eventTime;if((i&b)===b){_!==null&&(_=_.next={eventTime:E,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var C=n,A=u;switch(b=e,E=t,A.tag){case 1:if(C=A.payload,typeof C=="function"){y=C.call(E,y,b);break e}y=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=A.payload,b=typeof C=="function"?C.call(E,y,b):C,b==null)break e;y=ac({},y,b);break e;case 2:Qv=!0}}u.callback!==null&&u.lane!==0&&(n.flags|=64,b=s.effects,b===null?s.effects=[u]:b.push(u))}else E={eventTime:E,lane:b,tag:u.tag,payload:u.payload,callback:u.callback,next:null},_===null?(p=_=E,d=y):_=_.next=E,l|=b;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;b=u,u=b.next,b.next=null,s.lastBaseUpdate=b,s.shared.pending=null}}while(!0);if(_===null&&(d=y),s.baseState=d,s.firstBaseUpdate=p,s.lastBaseUpdate=_,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);S1|=l,n.lanes=l,n.memoizedState=y}}function C3(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(En(191,s));s.call(i)}}}var J6=new YG.Component().refs;function DL(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:ac({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var II={isMounted:function(n){return(n=n._reactInternals)?L1(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=sf(),s=py(n),o=Q_(i,s);o.payload=e,t!=null&&(o.callback=t),e=hy(n,o,s),e!==null&&(Jg(e,n,s,i),XA(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=sf(),s=py(n),o=Q_(i,s);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=hy(n,o,s),e!==null&&(Jg(e,n,s,i),XA(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=sf(),i=py(n),s=Q_(t,i);s.tag=2,e!=null&&(s.callback=e),e=hy(n,s,i),e!==null&&(Jg(e,n,i,t),XA(e,n,i))}};function A3(n,e,t,i,s,o,l){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!Aw(t,i)||!Aw(s,o):!0}function q6(n,e,t){var i=!1,s=yy,o=e.contextType;return typeof o=="object"&&o!==null?o=fg(o):(s=Uf(e)?y1:Ap.current,i=e.contextTypes,o=(i=i!=null)?GS(n,s):yy),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=II,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function M3(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&II.enqueueReplaceState(e,e.state,null)}function NL(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs=J6,KN(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=fg(o):(o=Uf(e)?y1:Ap.current,s.context=GS(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(DL(n,e,o,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&II.enqueueReplaceState(s,s.state,null),UM(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function ox(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(En(309));var i=t.stateNode}if(!i)throw Error(En(147,n));var s=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var u=s.refs;u===J6&&(u=s.refs={}),l===null?delete u[o]:u[o]=l},e._stringRef=o,e)}if(typeof n!="string")throw Error(En(284));if(!t._owner)throw Error(En(290,n))}return n}function nC(n,e){throw n=Object.prototype.toString.call(e),Error(En(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function I3(n){var e=n._init;return e(n._payload)}function Q6(n){function e(L,O){if(n){var P=L.deletions;P===null?(L.deletions=[O],L.flags|=16):P.push(O)}}function t(L,O){if(!n)return null;for(;O!==null;)e(L,O),O=O.sibling;return null}function i(L,O){for(L=new Map;O!==null;)O.key!==null?L.set(O.key,O):L.set(O.index,O),O=O.sibling;return L}function s(L,O){return L=fy(L,O),L.index=0,L.sibling=null,L}function o(L,O,P){return L.index=P,n?(P=L.alternate,P!==null?(P=P.index,P<O?(L.flags|=2,O):P):(L.flags|=2,O)):(L.flags|=1048576,O)}function l(L){return n&&L.alternate===null&&(L.flags|=2),L}function u(L,O,P,N){return O===null||O.tag!==6?(O=Nk(P,L.mode,N),O.return=L,O):(O=s(O,P),O.return=L,O)}function d(L,O,P,N){var z=P.type;return z===pS?_(L,O,P.props.children,N,P.key):O!==null&&(O.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===qv&&I3(z)===O.type)?(N=s(O,P.props),N.ref=ox(L,O,P),N.return=L,N):(N=ZA(P.type,P.key,P.props,null,L.mode,N),N.ref=ox(L,O,P),N.return=L,N)}function p(L,O,P,N){return O===null||O.tag!==4||O.stateNode.containerInfo!==P.containerInfo||O.stateNode.implementation!==P.implementation?(O=Bk(P,L.mode,N),O.return=L,O):(O=s(O,P.children||[]),O.return=L,O)}function _(L,O,P,N,z){return O===null||O.tag!==7?(O=a1(P,L.mode,N,z),O.return=L,O):(O=s(O,P),O.return=L,O)}function y(L,O,P){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Nk(""+O,L.mode,P),O.return=L,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case V$:return P=ZA(O.type,O.key,O.props,null,L.mode,P),P.ref=ox(L,null,O),P.return=L,P;case dS:return O=Bk(O,L.mode,P),O.return=L,O;case qv:var N=O._init;return y(L,N(O._payload),P)}if(Wx(O)||tx(O))return O=a1(O,L.mode,P,null),O.return=L,O;nC(L,O)}return null}function b(L,O,P,N){var z=O!==null?O.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return z!==null?null:u(L,O,""+P,N);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case V$:return P.key===z?d(L,O,P,N):null;case dS:return P.key===z?p(L,O,P,N):null;case qv:return z=P._init,b(L,O,z(P._payload),N)}if(Wx(P)||tx(P))return z!==null?null:_(L,O,P,N,null);nC(L,P)}return null}function E(L,O,P,N,z){if(typeof N=="string"&&N!==""||typeof N=="number")return L=L.get(P)||null,u(O,L,""+N,z);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case V$:return L=L.get(N.key===null?P:N.key)||null,d(O,L,N,z);case dS:return L=L.get(N.key===null?P:N.key)||null,p(O,L,N,z);case qv:var W=N._init;return E(L,O,P,W(N._payload),z)}if(Wx(N)||tx(N))return L=L.get(P)||null,_(O,L,N,z,null);nC(O,N)}return null}function C(L,O,P,N){for(var z=null,W=null,H=O,U=O=0,Q=null;H!==null&&U<P.length;U++){H.index>U?(Q=H,H=null):Q=H.sibling;var ne=b(L,H,P[U],N);if(ne===null){H===null&&(H=Q);break}n&&H&&ne.alternate===null&&e(L,H),O=o(ne,O,U),W===null?z=ne:W.sibling=ne,W=ne,H=Q}if(U===P.length)return t(L,H),Bu&&Lb(L,U),z;if(H===null){for(;U<P.length;U++)H=y(L,P[U],N),H!==null&&(O=o(H,O,U),W===null?z=H:W.sibling=H,W=H);return Bu&&Lb(L,U),z}for(H=i(L,H);U<P.length;U++)Q=E(H,L,U,P[U],N),Q!==null&&(n&&Q.alternate!==null&&H.delete(Q.key===null?U:Q.key),O=o(Q,O,U),W===null?z=Q:W.sibling=Q,W=Q);return n&&H.forEach(function(oe){return e(L,oe)}),Bu&&Lb(L,U),z}function A(L,O,P,N){var z=tx(P);if(typeof z!="function")throw Error(En(150));if(P=z.call(P),P==null)throw Error(En(151));for(var W=z=null,H=O,U=O=0,Q=null,ne=P.next();H!==null&&!ne.done;U++,ne=P.next()){H.index>U?(Q=H,H=null):Q=H.sibling;var oe=b(L,H,ne.value,N);if(oe===null){H===null&&(H=Q);break}n&&H&&oe.alternate===null&&e(L,H),O=o(oe,O,U),W===null?z=oe:W.sibling=oe,W=oe,H=Q}if(ne.done)return t(L,H),Bu&&Lb(L,U),z;if(H===null){for(;!ne.done;U++,ne=P.next())ne=y(L,ne.value,N),ne!==null&&(O=o(ne,O,U),W===null?z=ne:W.sibling=ne,W=ne);return Bu&&Lb(L,U),z}for(H=i(L,H);!ne.done;U++,ne=P.next())ne=E(H,L,U,ne.value,N),ne!==null&&(n&&ne.alternate!==null&&H.delete(ne.key===null?U:ne.key),O=o(ne,O,U),W===null?z=ne:W.sibling=ne,W=ne);return n&&H.forEach(function(le){return e(L,le)}),Bu&&Lb(L,U),z}function I(L,O,P,N){if(typeof P=="object"&&P!==null&&P.type===pS&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case V$:e:{for(var z=P.key,W=O;W!==null;){if(W.key===z){if(z=P.type,z===pS){if(W.tag===7){t(L,W.sibling),O=s(W,P.props.children),O.return=L,L=O;break e}}else if(W.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===qv&&I3(z)===W.type){t(L,W.sibling),O=s(W,P.props),O.ref=ox(L,W,P),O.return=L,L=O;break e}t(L,W);break}else e(L,W);W=W.sibling}P.type===pS?(O=a1(P.props.children,L.mode,N,P.key),O.return=L,L=O):(N=ZA(P.type,P.key,P.props,null,L.mode,N),N.ref=ox(L,O,P),N.return=L,L=N)}return l(L);case dS:e:{for(W=P.key;O!==null;){if(O.key===W)if(O.tag===4&&O.stateNode.containerInfo===P.containerInfo&&O.stateNode.implementation===P.implementation){t(L,O.sibling),O=s(O,P.children||[]),O.return=L,L=O;break e}else{t(L,O);break}else e(L,O);O=O.sibling}O=Bk(P,L.mode,N),O.return=L,L=O}return l(L);case qv:return W=P._init,I(L,O,W(P._payload),N)}if(Wx(P))return C(L,O,P,N);if(tx(P))return A(L,O,P,N);nC(L,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,O!==null&&O.tag===6?(t(L,O.sibling),O=s(O,P),O.return=L,L=O):(t(L,O),O=Nk(P,L.mode,N),O.return=L,L=O),l(L)):t(L,O)}return I}var VS=Q6(!0),Z6=Q6(!1),E$={},Y0=Cy(E$),kw=Cy(E$),Ow=Cy(E$);function Yb(n){if(n===E$)throw Error(En(174));return n}function JN(n,e){switch(Vl(Ow,e),Vl(kw,n),Vl(Y0,E$),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fL(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=fL(e,n)}fu(Y0),Vl(Y0,e)}function jS(){fu(Y0),fu(kw),fu(Ow)}function eW(n){Yb(Ow.current);var e=Yb(Y0.current),t=fL(e,n.type);e!==t&&(Vl(kw,n),Vl(Y0,t))}function qN(n){kw.current===n&&(fu(Y0),fu(kw))}var nc=Cy(0);function zM(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ik=[];function QN(){for(var n=0;n<Ik.length;n++)Ik[n]._workInProgressVersionPrimary=null;Ik.length=0}var YA=ov.ReactCurrentDispatcher,Rk=ov.ReactCurrentBatchConfig,T1=0,sc=null,nd=null,_d=null,HM=!1,ow=!1,Lw=0,VJ=0;function gp(){throw Error(En(321))}function ZN(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Zg(n[t],e[t]))return!1;return!0}function eB(n,e,t,i,s,o){if(T1=o,sc=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,YA.current=n===null||n.memoizedState===null?KJ:JJ,n=t(i,s),ow){o=0;do{if(ow=!1,Lw=0,25<=o)throw Error(En(301));o+=1,_d=nd=null,e.updateQueue=null,YA.current=qJ,n=t(i,s)}while(ow)}if(YA.current=GM,e=nd!==null&&nd.next!==null,T1=0,_d=nd=sc=null,HM=!1,e)throw Error(En(300));return n}function tB(){var n=Lw!==0;return Lw=0,n}function F0(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _d===null?sc.memoizedState=_d=n:_d=_d.next=n,_d}function mg(){if(nd===null){var n=sc.alternate;n=n!==null?n.memoizedState:null}else n=nd.next;var e=_d===null?sc.memoizedState:_d.next;if(e!==null)_d=e,nd=n;else{if(n===null)throw Error(En(310));nd=n,n={memoizedState:nd.memoizedState,baseState:nd.baseState,baseQueue:nd.baseQueue,queue:nd.queue,next:null},_d===null?sc.memoizedState=_d=n:_d=_d.next=n}return _d}function Dw(n,e){return typeof e=="function"?e(n):e}function kk(n){var e=mg(),t=e.queue;if(t===null)throw Error(En(311));t.lastRenderedReducer=n;var i=nd,s=i.baseQueue,o=t.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,t.pending=null}if(s!==null){o=s.next,i=i.baseState;var u=l=null,d=null,p=o;do{var _=p.lane;if((T1&_)===_)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:n(i,p.action);else{var y={lane:_,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(u=d=y,l=i):d=d.next=y,sc.lanes|=_,S1|=_}p=p.next}while(p!==null&&p!==o);d===null?l=i:d.next=u,Zg(i,e.memoizedState)||(Bf=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do o=s.lane,sc.lanes|=o,S1|=o,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Ok(n){var e=mg(),t=e.queue;if(t===null)throw Error(En(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,o=e.memoizedState;if(s!==null){t.pending=null;var l=s=s.next;do o=n(o,l.action),l=l.next;while(l!==s);Zg(o,e.memoizedState)||(Bf=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,i]}function tW(){}function nW(n,e){var t=sc,i=mg(),s=e(),o=!Zg(i.memoizedState,s);if(o&&(i.memoizedState=s,Bf=!0),i=i.queue,nB(sW.bind(null,t,i,n),[n]),i.getSnapshot!==e||o||_d!==null&&_d.memoizedState.tag&1){if(t.flags|=2048,Nw(9,iW.bind(null,t,i,s,e),void 0,null),vd===null)throw Error(En(349));T1&30||rW(t,e,s)}return s}function rW(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=sc.updateQueue,e===null?(e={lastEffect:null,stores:null},sc.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function iW(n,e,t,i){e.value=t,e.getSnapshot=i,oW(e)&&aW(n)}function sW(n,e,t){return t(function(){oW(e)&&aW(n)})}function oW(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Zg(n,t)}catch{return!0}}function aW(n){var e=rv(n,1);e!==null&&Jg(e,n,1,-1)}function R3(n){var e=F0();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dw,lastRenderedState:n},e.queue=n,n=n.dispatch=YJ.bind(null,sc,n),[e.memoizedState,n]}function Nw(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=sc.updateQueue,e===null?(e={lastEffect:null,stores:null},sc.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function lW(){return mg().memoizedState}function KA(n,e,t,i){var s=F0();sc.flags|=n,s.memoizedState=Nw(1|e,t,void 0,i===void 0?null:i)}function RI(n,e,t,i){var s=mg();i=i===void 0?null:i;var o=void 0;if(nd!==null){var l=nd.memoizedState;if(o=l.destroy,i!==null&&ZN(i,l.deps)){s.memoizedState=Nw(e,t,o,i);return}}sc.flags|=n,s.memoizedState=Nw(1|e,t,o,i)}function k3(n,e){return KA(8390656,8,n,e)}function nB(n,e){return RI(2048,8,n,e)}function uW(n,e){return RI(4,2,n,e)}function cW(n,e){return RI(4,4,n,e)}function hW(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function dW(n,e,t){return t=t!=null?t.concat([n]):null,RI(4,4,hW.bind(null,e,n),t)}function rB(){}function pW(n,e){var t=mg();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&ZN(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function fW(n,e){var t=mg();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&ZN(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function mW(n,e,t){return T1&21?(Zg(t,e)||(t=v6(),sc.lanes|=t,S1|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Bf=!0),n.memoizedState=t)}function jJ(n,e){var t=Ca;Ca=t!==0&&4>t?t:4,n(!0);var i=Rk.transition;Rk.transition={};try{n(!1),e()}finally{Ca=t,Rk.transition=i}}function gW(){return mg().memoizedState}function XJ(n,e,t){var i=py(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},_W(n))vW(e,t);else if(t=Y6(n,e,t,i),t!==null){var s=sf();Jg(t,n,i,s),yW(t,e,i)}}function YJ(n,e,t){var i=py(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(_W(n))vW(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,u=o(l,t);if(s.hasEagerState=!0,s.eagerState=u,Zg(u,l)){var d=e.interleaved;d===null?(s.next=s,YN(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}t=Y6(n,e,s,i),t!==null&&(s=sf(),Jg(t,n,i,s),yW(t,e,i))}}function _W(n){var e=n.alternate;return n===sc||e!==null&&e===sc}function vW(n,e){ow=HM=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function yW(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,LN(n,t)}}var GM={readContext:fg,useCallback:gp,useContext:gp,useEffect:gp,useImperativeHandle:gp,useInsertionEffect:gp,useLayoutEffect:gp,useMemo:gp,useReducer:gp,useRef:gp,useState:gp,useDebugValue:gp,useDeferredValue:gp,useTransition:gp,useMutableSource:gp,useSyncExternalStore:gp,useId:gp,unstable_isNewReconciler:!1},KJ={readContext:fg,useCallback:function(n,e){return F0().memoizedState=[n,e===void 0?null:e],n},useContext:fg,useEffect:k3,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,KA(4194308,4,hW.bind(null,e,n),t)},useLayoutEffect:function(n,e){return KA(4194308,4,n,e)},useInsertionEffect:function(n,e){return KA(4,2,n,e)},useMemo:function(n,e){var t=F0();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=F0();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=XJ.bind(null,sc,n),[i.memoizedState,n]},useRef:function(n){var e=F0();return n={current:n},e.memoizedState=n},useState:R3,useDebugValue:rB,useDeferredValue:function(n){return F0().memoizedState=n},useTransition:function(){var n=R3(!1),e=n[0];return n=jJ.bind(null,n[1]),F0().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=sc,s=F0();if(Bu){if(t===void 0)throw Error(En(407));t=t()}else{if(t=e(),vd===null)throw Error(En(349));T1&30||rW(i,e,t)}s.memoizedState=t;var o={value:t,getSnapshot:e};return s.queue=o,k3(sW.bind(null,i,o,n),[n]),i.flags|=2048,Nw(9,iW.bind(null,i,o,t,e),void 0,null),t},useId:function(){var n=F0(),e=vd.identifierPrefix;if(Bu){var t=J_,i=K_;t=(i&~(1<<32-Kg(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Lw++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=VJ++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},JJ={readContext:fg,useCallback:pW,useContext:fg,useEffect:nB,useImperativeHandle:dW,useInsertionEffect:uW,useLayoutEffect:cW,useMemo:fW,useReducer:kk,useRef:lW,useState:function(){return kk(Dw)},useDebugValue:rB,useDeferredValue:function(n){var e=mg();return mW(e,nd.memoizedState,n)},useTransition:function(){var n=kk(Dw)[0],e=mg().memoizedState;return[n,e]},useMutableSource:tW,useSyncExternalStore:nW,useId:gW,unstable_isNewReconciler:!1},qJ={readContext:fg,useCallback:pW,useContext:fg,useEffect:nB,useImperativeHandle:dW,useInsertionEffect:uW,useLayoutEffect:cW,useMemo:fW,useReducer:Ok,useRef:lW,useState:function(){return Ok(Dw)},useDebugValue:rB,useDeferredValue:function(n){var e=mg();return nd===null?e.memoizedState=n:mW(e,nd.memoizedState,n)},useTransition:function(){var n=Ok(Dw)[0],e=mg().memoizedState;return[n,e]},useMutableSource:tW,useSyncExternalStore:nW,useId:gW,unstable_isNewReconciler:!1};function XS(n,e){try{var t="",i=e;do t+=wK(i),i=i.return;while(i);var s=t}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function Lk(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function BL(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var QJ=typeof WeakMap=="function"?WeakMap:Map;function bW(n,e,t){t=Q_(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){VM||(VM=!0,XL=i),BL(n,e)},t}function TW(n,e,t){t=Q_(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){BL(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){BL(n,e),typeof i!="function"&&(dy===null?dy=new Set([this]):dy.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),t}function O3(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new QJ;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=dq.bind(null,n,e,t),e.then(n,n))}function L3(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function D3(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Q_(-1,1),e.tag=2,hy(t,e,1))),t.lanes|=1),n)}var ZJ=ov.ReactCurrentOwner,Bf=!1;function Jp(n,e,t,i){e.child=n===null?Z6(e,null,t,i):VS(e,n.child,t,i)}function N3(n,e,t,i,s){t=t.render;var o=e.ref;return LS(e,s),i=eB(n,e,t,i,o,s),t=tB(),n!==null&&!Bf?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,iv(n,e,s)):(Bu&&t&&HN(e),e.flags|=1,Jp(n,e,i,s),e.child)}function B3(n,e,t,i,s){if(n===null){var o=t.type;return typeof o=="function"&&!hB(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,SW(n,e,o,i,s)):(n=ZA(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var l=o.memoizedProps;if(t=t.compare,t=t!==null?t:Aw,t(l,i)&&n.ref===e.ref)return iv(n,e,s)}return e.flags|=1,n=fy(o,i),n.ref=e.ref,n.return=e,e.child=n}function SW(n,e,t,i,s){if(n!==null){var o=n.memoizedProps;if(Aw(o,i)&&n.ref===e.ref)if(Bf=!1,e.pendingProps=i=o,(n.lanes&s)!==0)n.flags&131072&&(Bf=!0);else return e.lanes=n.lanes,iv(n,e,s)}return PL(n,e,t,i,s)}function EW(n,e,t){var i=e.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vl(ES,ym),ym|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Vl(ES,ym),ym|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:t,Vl(ES,ym),ym|=i}else o!==null?(i=o.baseLanes|t,e.memoizedState=null):i=t,Vl(ES,ym),ym|=i;return Jp(n,e,s,t),e.child}function xW(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function PL(n,e,t,i,s){var o=Uf(t)?y1:Ap.current;return o=GS(e,o),LS(e,s),t=eB(n,e,t,i,o,s),i=tB(),n!==null&&!Bf?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,iv(n,e,s)):(Bu&&i&&HN(e),e.flags|=1,Jp(n,e,t,s),e.child)}function P3(n,e,t,i,s){if(Uf(t)){var o=!0;DM(e)}else o=!1;if(LS(e,s),e.stateNode===null)JA(n,e),q6(e,t,i),NL(e,t,i,s),i=!0;else if(n===null){var l=e.stateNode,u=e.memoizedProps;l.props=u;var d=l.context,p=t.contextType;typeof p=="object"&&p!==null?p=fg(p):(p=Uf(t)?y1:Ap.current,p=GS(e,p));var _=t.getDerivedStateFromProps,y=typeof _=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==i||d!==p)&&M3(e,l,i,p),Qv=!1;var b=e.memoizedState;l.state=b,UM(e,i,l,s),d=e.memoizedState,u!==i||b!==d||Ff.current||Qv?(typeof _=="function"&&(DL(e,t,_,i),d=e.memoizedState),(u=Qv||A3(e,t,u,i,b,d,p))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=p,i=u):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,K6(n,e),u=e.memoizedProps,p=e.type===e.elementType?u:Hg(e.type,u),l.props=p,y=e.pendingProps,b=l.context,d=t.contextType,typeof d=="object"&&d!==null?d=fg(d):(d=Uf(t)?y1:Ap.current,d=GS(e,d));var E=t.getDerivedStateFromProps;(_=typeof E=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==y||b!==d)&&M3(e,l,i,d),Qv=!1,b=e.memoizedState,l.state=b,UM(e,i,l,s);var C=e.memoizedState;u!==y||b!==C||Ff.current||Qv?(typeof E=="function"&&(DL(e,t,E,i),C=e.memoizedState),(p=Qv||A3(e,t,p,i,b,C,d)||!1)?(_||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,C,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,C,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===n.memoizedProps&&b===n.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&b===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=C),l.props=i,l.state=C,l.context=d,i=p):(typeof l.componentDidUpdate!="function"||u===n.memoizedProps&&b===n.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&b===n.memoizedState||(e.flags|=1024),i=!1)}return FL(n,e,t,i,o,s)}function FL(n,e,t,i,s,o){xW(n,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&E3(e,t,!1),iv(n,e,o);i=e.stateNode,ZJ.current=e;var u=l&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&l?(e.child=VS(e,n.child,null,o),e.child=VS(e,null,u,o)):Jp(n,e,u,o),e.memoizedState=i.state,s&&E3(e,t,!0),e.child}function wW(n){var e=n.stateNode;e.pendingContext?S3(n,e.pendingContext,e.pendingContext!==e.context):e.context&&S3(n,e.context,!1),JN(n,e.containerInfo)}function F3(n,e,t,i,s){return WS(),WN(s),e.flags|=256,Jp(n,e,t,i),e.child}var UL={dehydrated:null,treeContext:null,retryLane:0};function zL(n){return{baseLanes:n,cachePool:null,transitions:null}}function $W(n,e,t){var i=e.pendingProps,s=nc.current,o=!1,l=(e.flags&128)!==0,u;if((u=l)||(u=n!==null&&n.memoizedState===null?!1:(s&2)!==0),u?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Vl(nc,s&1),n===null)return OL(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,n=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=LI(l,i,0,null),n=a1(n,i,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=zL(t),e.memoizedState=UL,n):iB(e,l));if(s=n.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return eq(n,e,l,i,u,s,t);if(o){o=i.fallback,l=e.mode,s=n.child,u=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=fy(s,d),i.subtreeFlags=s.subtreeFlags&14680064),u!==null?o=fy(u,o):(o=a1(o,l,t,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=n.child.memoizedState,l=l===null?zL(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=n.childLanes&~t,e.memoizedState=UL,i}return o=n.child,n=o.sibling,i=fy(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function iB(n,e){return e=LI({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function rC(n,e,t,i){return i!==null&&WN(i),VS(e,n.child,null,t),n=iB(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function eq(n,e,t,i,s,o,l){if(t)return e.flags&256?(e.flags&=-257,i=Lk(Error(En(422))),rC(n,e,l,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=LI({mode:"visible",children:i.children},s,0,null),o=a1(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&VS(e,n.child,null,l),e.child.memoizedState=zL(l),e.memoizedState=UL,o);if(!(e.mode&1))return rC(n,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(En(419)),i=Lk(o,i,void 0),rC(n,e,l,i)}if(u=(l&n.childLanes)!==0,Bf||u){if(i=vd,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,rv(n,s),Jg(i,n,s,-1))}return cB(),i=Lk(Error(En(421))),rC(n,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=pq.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,Em=cy(s.nextSibling),wm=e,Bu=!0,Wg=null,n!==null&&(og[ag++]=K_,og[ag++]=J_,og[ag++]=b1,K_=n.id,J_=n.overflow,b1=e),e=iB(e,i.children),e.flags|=4096,e)}function U3(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),LL(n.return,e,t)}function Dk(n,e,t,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=t,o.tailMode=s)}function CW(n,e,t){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Jp(n,e,i.children,t),i=nc.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&U3(n,t,e);else if(n.tag===19)U3(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Vl(nc,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&zM(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),Dk(e,!1,s,t,o);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&zM(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}Dk(e,!0,t,null,o);break;case"together":Dk(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function JA(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function iv(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),S1|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(En(153));if(e.child!==null){for(n=e.child,t=fy(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=fy(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function tq(n,e,t){switch(e.tag){case 3:wW(e),WS();break;case 5:eW(e);break;case 1:Uf(e.type)&&DM(e);break;case 4:JN(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Vl(PM,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Vl(nc,nc.current&1),e.flags|=128,null):t&e.child.childLanes?$W(n,e,t):(Vl(nc,nc.current&1),n=iv(n,e,t),n!==null?n.sibling:null);Vl(nc,nc.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return CW(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Vl(nc,nc.current),i)break;return null;case 22:case 23:return e.lanes=0,EW(n,e,t)}return iv(n,e,t)}var AW,HL,MW,IW;AW=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};HL=function(){};MW=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Yb(Y0.current);var o=null;switch(t){case"input":s=cL(n,s),i=cL(n,i),o=[];break;case"select":s=ac({},s,{value:void 0}),i=ac({},i,{value:void 0}),o=[];break;case"textarea":s=pL(n,s),i=pL(n,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=OM)}mL(t,i);var l;t=null;for(p in s)if(!i.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var u=s[p];for(l in u)u.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Tw.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in i){var d=i[p];if(u=s!=null?s[p]:void 0,i.hasOwnProperty(p)&&d!==u&&(d!=null||u!=null))if(p==="style")if(u){for(l in u)!u.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in d)d.hasOwnProperty(l)&&u[l]!==d[l]&&(t||(t={}),t[l]=d[l])}else t||(o||(o=[]),o.push(p,t)),t=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Tw.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&du("scroll",n),o||u===d||(o=[])):(o=o||[]).push(p,d))}t&&(o=o||[]).push("style",t);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};IW=function(n,e,t,i){t!==i&&(e.flags|=4)};function ax(n,e){if(!Bu)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function _p(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function nq(n,e,t){var i=e.pendingProps;switch(GN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _p(e),null;case 1:return Uf(e.type)&&LM(),_p(e),null;case 3:return i=e.stateNode,jS(),fu(Ff),fu(Ap),QN(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(tC(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wg!==null&&(JL(Wg),Wg=null))),HL(n,e),_p(e),null;case 5:qN(e);var s=Yb(Ow.current);if(t=e.type,n!==null&&e.stateNode!=null)MW(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(En(166));return _p(e),null}if(n=Yb(Y0.current),tC(e)){i=e.stateNode,t=e.type;var o=e.memoizedProps;switch(i[G0]=e,i[Rw]=o,n=(e.mode&1)!==0,t){case"dialog":du("cancel",i),du("close",i);break;case"iframe":case"object":case"embed":du("load",i);break;case"video":case"audio":for(s=0;s<jx.length;s++)du(jx[s],i);break;case"source":du("error",i);break;case"img":case"image":case"link":du("error",i),du("load",i);break;case"details":du("toggle",i);break;case"input":KF(i,o),du("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},du("invalid",i);break;case"textarea":qF(i,o),du("invalid",i)}mL(t,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];l==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&eC(i.textContent,u,n),s=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&eC(i.textContent,u,n),s=["children",""+u]):Tw.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&du("scroll",i)}switch(t){case"input":j$(i),JF(i,o,!0);break;case"textarea":j$(i),QF(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=OM)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=r6(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=l.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=l.createElement(t,{is:i.is}):(n=l.createElement(t),t==="select"&&(l=n,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):n=l.createElementNS(n,t),n[G0]=e,n[Rw]=i,AW(n,e,!1,!1),e.stateNode=n;e:{switch(l=gL(t,i),t){case"dialog":du("cancel",n),du("close",n),s=i;break;case"iframe":case"object":case"embed":du("load",n),s=i;break;case"video":case"audio":for(s=0;s<jx.length;s++)du(jx[s],n);s=i;break;case"source":du("error",n),s=i;break;case"img":case"image":case"link":du("error",n),du("load",n),s=i;break;case"details":du("toggle",n),s=i;break;case"input":KF(n,i),s=cL(n,i),du("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=ac({},i,{value:void 0}),du("invalid",n);break;case"textarea":qF(n,i),s=pL(n,i),du("invalid",n);break;default:s=i}mL(t,s),u=s;for(o in u)if(u.hasOwnProperty(o)){var d=u[o];o==="style"?o6(n,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&i6(n,d)):o==="children"?typeof d=="string"?(t!=="textarea"||d!=="")&&Sw(n,d):typeof d=="number"&&Sw(n,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Tw.hasOwnProperty(o)?d!=null&&o==="onScroll"&&du("scroll",n):d!=null&&AN(n,o,d,l))}switch(t){case"input":j$(n),JF(n,i,!1);break;case"textarea":j$(n),QF(n);break;case"option":i.value!=null&&n.setAttribute("value",""+vy(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?IS(n,!!i.multiple,o,!1):i.defaultValue!=null&&IS(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=OM)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _p(e),null;case 6:if(n&&e.stateNode!=null)IW(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(En(166));if(t=Yb(Ow.current),Yb(Y0.current),tC(e)){if(i=e.stateNode,t=e.memoizedProps,i[G0]=e,(o=i.nodeValue!==t)&&(n=wm,n!==null))switch(n.tag){case 3:eC(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&eC(i.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[G0]=e,e.stateNode=i}return _p(e),null;case 13:if(fu(nc),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Bu&&Em!==null&&e.mode&1&&!(e.flags&128))X6(),WS(),e.flags|=98560,o=!1;else if(o=tC(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(En(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(En(317));o[G0]=e}else WS(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_p(e),o=!1}else Wg!==null&&(JL(Wg),Wg=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||nc.current&1?rd===0&&(rd=3):cB())),e.updateQueue!==null&&(e.flags|=4),_p(e),null);case 4:return jS(),HL(n,e),n===null&&Mw(e.stateNode.containerInfo),_p(e),null;case 10:return XN(e.type._context),_p(e),null;case 17:return Uf(e.type)&&LM(),_p(e),null;case 19:if(fu(nc),o=e.memoizedState,o===null)return _p(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)ax(o,!1);else{if(rd!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(l=zM(n),l!==null){for(e.flags|=128,ax(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)o=t,n=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,n=l.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Vl(nc,nc.current&1|2),e.child}n=n.sibling}o.tail!==null&&oh()>YS&&(e.flags|=128,i=!0,ax(o,!1),e.lanes=4194304)}else{if(!i)if(n=zM(l),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ax(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Bu)return _p(e),null}else 2*oh()-o.renderingStartTime>YS&&t!==1073741824&&(e.flags|=128,i=!0,ax(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(t=o.last,t!==null?t.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=oh(),e.sibling=null,t=nc.current,Vl(nc,i?t&1|2:t&1),e):(_p(e),null);case 22:case 23:return uB(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ym&1073741824&&(_p(e),e.subtreeFlags&6&&(e.flags|=8192)):_p(e),null;case 24:return null;case 25:return null}throw Error(En(156,e.tag))}function rq(n,e){switch(GN(e),e.tag){case 1:return Uf(e.type)&&LM(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return jS(),fu(Ff),fu(Ap),QN(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return qN(e),null;case 13:if(fu(nc),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(En(340));WS()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return fu(nc),null;case 4:return jS(),null;case 10:return XN(e.type._context),null;case 22:case 23:return uB(),null;case 24:return null;default:return null}}var iC=!1,wp=!1,iq=typeof WeakSet=="function"?WeakSet:Set,ar=null;function SS(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Ic(n,e,i)}else t.current=null}function GL(n,e,t){try{t()}catch(i){Ic(n,e,i)}}var z3=!1;function sq(n,e){if($L=IM,n=L6(),zN(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var l=0,u=-1,d=-1,p=0,_=0,y=n,b=null;t:for(;;){for(var E;y!==t||s!==0&&y.nodeType!==3||(u=l+s),y!==o||i!==0&&y.nodeType!==3||(d=l+i),y.nodeType===3&&(l+=y.nodeValue.length),(E=y.firstChild)!==null;)b=y,y=E;for(;;){if(y===n)break t;if(b===t&&++p===s&&(u=l),b===o&&++_===i&&(d=l),(E=y.nextSibling)!==null)break;y=b,b=y.parentNode}y=E}t=u===-1||d===-1?null:{start:u,end:d}}else t=null}t=t||{start:0,end:0}}else t=null;for(CL={focusedElem:n,selectionRange:t},IM=!1,ar=e;ar!==null;)if(e=ar,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ar=n;else for(;ar!==null;){e=ar;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var A=C.memoizedProps,I=C.memoizedState,L=e.stateNode,O=L.getSnapshotBeforeUpdate(e.elementType===e.type?A:Hg(e.type,A),I);L.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var P=e.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(En(163))}}catch(N){Ic(e,e.return,N)}if(n=e.sibling,n!==null){n.return=e.return,ar=n;break}ar=e.return}return C=z3,z3=!1,C}function aw(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&GL(e,t,o)}s=s.next}while(s!==i)}}function kI(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function WL(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function RW(n){var e=n.alternate;e!==null&&(n.alternate=null,RW(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[G0],delete e[Rw],delete e[IL],delete e[zJ],delete e[HJ])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function kW(n){return n.tag===5||n.tag===3||n.tag===4}function H3(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||kW(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function VL(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=OM));else if(i!==4&&(n=n.child,n!==null))for(VL(n,e,t),n=n.sibling;n!==null;)VL(n,e,t),n=n.sibling}function jL(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(jL(n,e,t),n=n.sibling;n!==null;)jL(n,e,t),n=n.sibling}var Kd=null,Gg=!1;function Mv(n,e,t){for(t=t.child;t!==null;)OW(n,e,t),t=t.sibling}function OW(n,e,t){if(X0&&typeof X0.onCommitFiberUnmount=="function")try{X0.onCommitFiberUnmount(xI,t)}catch{}switch(t.tag){case 5:wp||SS(t,e);case 6:var i=Kd,s=Gg;Kd=null,Mv(n,e,t),Kd=i,Gg=s,Kd!==null&&(Gg?(n=Kd,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Kd.removeChild(t.stateNode));break;case 18:Kd!==null&&(Gg?(n=Kd,t=t.stateNode,n.nodeType===8?Ak(n.parentNode,t):n.nodeType===1&&Ak(n,t),$w(n)):Ak(Kd,t.stateNode));break;case 4:i=Kd,s=Gg,Kd=t.stateNode.containerInfo,Gg=!0,Mv(n,e,t),Kd=i,Gg=s;break;case 0:case 11:case 14:case 15:if(!wp&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&GL(t,e,l),s=s.next}while(s!==i)}Mv(n,e,t);break;case 1:if(!wp&&(SS(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(u){Ic(t,e,u)}Mv(n,e,t);break;case 21:Mv(n,e,t);break;case 22:t.mode&1?(wp=(i=wp)||t.memoizedState!==null,Mv(n,e,t),wp=i):Mv(n,e,t);break;default:Mv(n,e,t)}}function G3(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new iq),e.forEach(function(i){var s=fq.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function Og(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var o=n,l=e,u=l;e:for(;u!==null;){switch(u.tag){case 5:Kd=u.stateNode,Gg=!1;break e;case 3:Kd=u.stateNode.containerInfo,Gg=!0;break e;case 4:Kd=u.stateNode.containerInfo,Gg=!0;break e}u=u.return}if(Kd===null)throw Error(En(160));OW(o,l,s),Kd=null,Gg=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(p){Ic(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LW(e,n),e=e.sibling}function LW(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Og(e,n),L0(n),i&4){try{aw(3,n,n.return),kI(3,n)}catch(A){Ic(n,n.return,A)}try{aw(5,n,n.return)}catch(A){Ic(n,n.return,A)}}break;case 1:Og(e,n),L0(n),i&512&&t!==null&&SS(t,t.return);break;case 5:if(Og(e,n),L0(n),i&512&&t!==null&&SS(t,t.return),n.flags&32){var s=n.stateNode;try{Sw(s,"")}catch(A){Ic(n,n.return,A)}}if(i&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,l=t!==null?t.memoizedProps:o,u=n.type,d=n.updateQueue;if(n.updateQueue=null,d!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&t6(s,o),gL(u,l);var p=gL(u,o);for(l=0;l<d.length;l+=2){var _=d[l],y=d[l+1];_==="style"?o6(s,y):_==="dangerouslySetInnerHTML"?i6(s,y):_==="children"?Sw(s,y):AN(s,_,y,p)}switch(u){case"input":hL(s,o);break;case"textarea":n6(s,o);break;case"select":var b=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?IS(s,!!o.multiple,E,!1):b!==!!o.multiple&&(o.defaultValue!=null?IS(s,!!o.multiple,o.defaultValue,!0):IS(s,!!o.multiple,o.multiple?[]:"",!1))}s[Rw]=o}catch(A){Ic(n,n.return,A)}}break;case 6:if(Og(e,n),L0(n),i&4){if(n.stateNode===null)throw Error(En(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(A){Ic(n,n.return,A)}}break;case 3:if(Og(e,n),L0(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{$w(e.containerInfo)}catch(A){Ic(n,n.return,A)}break;case 4:Og(e,n),L0(n);break;case 13:Og(e,n),L0(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(aB=oh())),i&4&&G3(n);break;case 22:if(_=t!==null&&t.memoizedState!==null,n.mode&1?(wp=(p=wp)||_,Og(e,n),wp=p):Og(e,n),L0(n),i&8192){if(p=n.memoizedState!==null,(n.stateNode.isHidden=p)&&!_&&n.mode&1)for(ar=n,_=n.child;_!==null;){for(y=ar=_;ar!==null;){switch(b=ar,E=b.child,b.tag){case 0:case 11:case 14:case 15:aw(4,b,b.return);break;case 1:SS(b,b.return);var C=b.stateNode;if(typeof C.componentWillUnmount=="function"){i=b,t=b.return;try{e=i,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(A){Ic(i,t,A)}}break;case 5:SS(b,b.return);break;case 22:if(b.memoizedState!==null){V3(y);continue}}E!==null?(E.return=b,ar=E):V3(y)}_=_.sibling}e:for(_=null,y=n;;){if(y.tag===5){if(_===null){_=y;try{s=y.stateNode,p?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=y.stateNode,d=y.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=s6("display",l))}catch(A){Ic(n,n.return,A)}}}else if(y.tag===6){if(_===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(A){Ic(n,n.return,A)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===n)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;_===y&&(_=null),y=y.return}_===y&&(_=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Og(e,n),L0(n),i&4&&G3(n);break;case 21:break;default:Og(e,n),L0(n)}}function L0(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(kW(t)){var i=t;break e}t=t.return}throw Error(En(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Sw(s,""),i.flags&=-33);var o=H3(n);jL(n,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,u=H3(n);VL(n,u,l);break;default:throw Error(En(161))}}catch(d){Ic(n,n.return,d)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function oq(n,e,t){ar=n,DW(n)}function DW(n,e,t){for(var i=(n.mode&1)!==0;ar!==null;){var s=ar,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||iC;if(!l){var u=s.alternate,d=u!==null&&u.memoizedState!==null||wp;u=iC;var p=wp;if(iC=l,(wp=d)&&!p)for(ar=s;ar!==null;)l=ar,d=l.child,l.tag===22&&l.memoizedState!==null?j3(s):d!==null?(d.return=l,ar=d):j3(s);for(;o!==null;)ar=o,DW(o),o=o.sibling;ar=s,iC=u,wp=p}W3(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ar=o):W3(n)}}function W3(n){for(;ar!==null;){var e=ar;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wp||kI(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!wp)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Hg(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&C3(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}C3(e,l,t)}break;case 5:var u=e.stateNode;if(t===null&&e.flags&4){t=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&t.focus();break;case"img":d.src&&(t.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var _=p.memoizedState;if(_!==null){var y=_.dehydrated;y!==null&&$w(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(En(163))}wp||e.flags&512&&WL(e)}catch(b){Ic(e,e.return,b)}}if(e===n){ar=null;break}if(t=e.sibling,t!==null){t.return=e.return,ar=t;break}ar=e.return}}function V3(n){for(;ar!==null;){var e=ar;if(e===n){ar=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ar=t;break}ar=e.return}}function j3(n){for(;ar!==null;){var e=ar;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{kI(4,e)}catch(d){Ic(e,t,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){Ic(e,s,d)}}var o=e.return;try{WL(e)}catch(d){Ic(e,o,d)}break;case 5:var l=e.return;try{WL(e)}catch(d){Ic(e,l,d)}}}catch(d){Ic(e,e.return,d)}if(e===n){ar=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ar=u;break}ar=e.return}}var aq=Math.ceil,WM=ov.ReactCurrentDispatcher,sB=ov.ReactCurrentOwner,pg=ov.ReactCurrentBatchConfig,So=0,vd=null,Ih=null,Qd=0,ym=0,ES=Cy(0),rd=0,Bw=null,S1=0,OI=0,oB=0,lw=null,Nf=null,aB=0,YS=1/0,G_=null,VM=!1,XL=null,dy=null,sC=!1,ry=null,jM=0,uw=0,YL=null,qA=-1,QA=0;function sf(){return So&6?oh():qA!==-1?qA:qA=oh()}function py(n){return n.mode&1?So&2&&Qd!==0?Qd&-Qd:WJ.transition!==null?(QA===0&&(QA=v6()),QA):(n=Ca,n!==0||(n=window.event,n=n===void 0?16:w6(n.type)),n):1}function Jg(n,e,t,i){if(50<uw)throw uw=0,YL=null,Error(En(185));b$(n,t,i),(!(So&2)||n!==vd)&&(n===vd&&(!(So&2)&&(OI|=t),rd===4&&ty(n,Qd)),zf(n,i),t===1&&So===0&&!(e.mode&1)&&(YS=oh()+500,MI&&Ay()))}function zf(n,e){var t=n.callbackNode;WK(n,e);var i=MM(n,n===vd?Qd:0);if(i===0)t!==null&&t3(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&t3(t),e===1)n.tag===0?GJ(X3.bind(null,n)):W6(X3.bind(null,n)),FJ(function(){!(So&6)&&Ay()}),t=null;else{switch(y6(i)){case 1:t=ON;break;case 4:t=g6;break;case 16:t=AM;break;case 536870912:t=_6;break;default:t=AM}t=GW(t,NW.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function NW(n,e){if(qA=-1,QA=0,So&6)throw Error(En(327));var t=n.callbackNode;if(DS()&&n.callbackNode!==t)return null;var i=MM(n,n===vd?Qd:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=XM(n,i);else{e=i;var s=So;So|=2;var o=PW();(vd!==n||Qd!==e)&&(G_=null,YS=oh()+500,o1(n,e));do try{cq();break}catch(u){BW(n,u)}while(!0);jN(),WM.current=o,So=s,Ih!==null?e=0:(vd=null,Qd=0,e=rd)}if(e!==0){if(e===2&&(s=TL(n),s!==0&&(i=s,e=KL(n,s))),e===1)throw t=Bw,o1(n,0),ty(n,i),zf(n,oh()),t;if(e===6)ty(n,i);else{if(s=n.current.alternate,!(i&30)&&!lq(s)&&(e=XM(n,i),e===2&&(o=TL(n),o!==0&&(i=o,e=KL(n,o))),e===1))throw t=Bw,o1(n,0),ty(n,i),zf(n,oh()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(En(345));case 2:Db(n,Nf,G_);break;case 3:if(ty(n,i),(i&130023424)===i&&(e=aB+500-oh(),10<e)){if(MM(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){sf(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=ML(Db.bind(null,n,Nf,G_),e);break}Db(n,Nf,G_);break;case 4:if(ty(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var l=31-Kg(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=oh()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*aq(i/1960))-i,10<i){n.timeoutHandle=ML(Db.bind(null,n,Nf,G_),i);break}Db(n,Nf,G_);break;case 5:Db(n,Nf,G_);break;default:throw Error(En(329))}}}return zf(n,oh()),n.callbackNode===t?NW.bind(null,n):null}function KL(n,e){var t=lw;return n.current.memoizedState.isDehydrated&&(o1(n,e).flags|=256),n=XM(n,e),n!==2&&(e=Nf,Nf=t,e!==null&&JL(e)),n}function JL(n){Nf===null?Nf=n:Nf.push.apply(Nf,n)}function lq(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],o=s.getSnapshot;s=s.value;try{if(!Zg(o(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ty(n,e){for(e&=~oB,e&=~OI,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Kg(e),i=1<<t;n[t]=-1,e&=~i}}function X3(n){if(So&6)throw Error(En(327));DS();var e=MM(n,0);if(!(e&1))return zf(n,oh()),null;var t=XM(n,e);if(n.tag!==0&&t===2){var i=TL(n);i!==0&&(e=i,t=KL(n,i))}if(t===1)throw t=Bw,o1(n,0),ty(n,e),zf(n,oh()),t;if(t===6)throw Error(En(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Db(n,Nf,G_),zf(n,oh()),null}function lB(n,e){var t=So;So|=1;try{return n(e)}finally{So=t,So===0&&(YS=oh()+500,MI&&Ay())}}function E1(n){ry!==null&&ry.tag===0&&!(So&6)&&DS();var e=So;So|=1;var t=pg.transition,i=Ca;try{if(pg.transition=null,Ca=1,n)return n()}finally{Ca=i,pg.transition=t,So=e,!(So&6)&&Ay()}}function uB(){ym=ES.current,fu(ES)}function o1(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,PJ(t)),Ih!==null)for(t=Ih.return;t!==null;){var i=t;switch(GN(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&LM();break;case 3:jS(),fu(Ff),fu(Ap),QN();break;case 5:qN(i);break;case 4:jS();break;case 13:fu(nc);break;case 19:fu(nc);break;case 10:XN(i.type._context);break;case 22:case 23:uB()}t=t.return}if(vd=n,Ih=n=fy(n.current,null),Qd=ym=e,rd=0,Bw=null,oB=OI=S1=0,Nf=lw=null,Xb!==null){for(e=0;e<Xb.length;e++)if(t=Xb[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,o=t.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}t.pending=i}Xb=null}return n}function BW(n,e){do{var t=Ih;try{if(jN(),YA.current=GM,HM){for(var i=sc.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}HM=!1}if(T1=0,_d=nd=sc=null,ow=!1,Lw=0,sB.current=null,t===null||t.return===null){rd=1,Bw=e,Ih=null;break}e:{var o=n,l=t.return,u=t,d=e;if(e=Qd,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,_=u,y=_.tag;if(!(_.mode&1)&&(y===0||y===11||y===15)){var b=_.alternate;b?(_.updateQueue=b.updateQueue,_.memoizedState=b.memoizedState,_.lanes=b.lanes):(_.updateQueue=null,_.memoizedState=null)}var E=L3(l);if(E!==null){E.flags&=-257,D3(E,l,u,o,e),E.mode&1&&O3(o,p,e),e=E,d=p;var C=e.updateQueue;if(C===null){var A=new Set;A.add(d),e.updateQueue=A}else C.add(d);break e}else{if(!(e&1)){O3(o,p,e),cB();break e}d=Error(En(426))}}else if(Bu&&u.mode&1){var I=L3(l);if(I!==null){!(I.flags&65536)&&(I.flags|=256),D3(I,l,u,o,e),WN(XS(d,u));break e}}o=d=XS(d,u),rd!==4&&(rd=2),lw===null?lw=[o]:lw.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var L=bW(o,d,e);$3(o,L);break e;case 1:u=d;var O=o.type,P=o.stateNode;if(!(o.flags&128)&&(typeof O.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(dy===null||!dy.has(P)))){o.flags|=65536,e&=-e,o.lanes|=e;var N=TW(o,u,e);$3(o,N);break e}}o=o.return}while(o!==null)}UW(t)}catch(z){e=z,Ih===t&&t!==null&&(Ih=t=t.return);continue}break}while(!0)}function PW(){var n=WM.current;return WM.current=GM,n===null?GM:n}function cB(){(rd===0||rd===3||rd===2)&&(rd=4),vd===null||!(S1&268435455)&&!(OI&268435455)||ty(vd,Qd)}function XM(n,e){var t=So;So|=2;var i=PW();(vd!==n||Qd!==e)&&(G_=null,o1(n,e));do try{uq();break}catch(s){BW(n,s)}while(!0);if(jN(),So=t,WM.current=i,Ih!==null)throw Error(En(261));return vd=null,Qd=0,rd}function uq(){for(;Ih!==null;)FW(Ih)}function cq(){for(;Ih!==null&&!DK();)FW(Ih)}function FW(n){var e=HW(n.alternate,n,ym);n.memoizedProps=n.pendingProps,e===null?UW(n):Ih=e,sB.current=null}function UW(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=rq(t,e),t!==null){t.flags&=32767,Ih=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{rd=6,Ih=null;return}}else if(t=nq(t,e,ym),t!==null){Ih=t;return}if(e=e.sibling,e!==null){Ih=e;return}Ih=e=n}while(e!==null);rd===0&&(rd=5)}function Db(n,e,t){var i=Ca,s=pg.transition;try{pg.transition=null,Ca=1,hq(n,e,t,i)}finally{pg.transition=s,Ca=i}return null}function hq(n,e,t,i){do DS();while(ry!==null);if(So&6)throw Error(En(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(En(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(VK(n,o),n===vd&&(Ih=vd=null,Qd=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||sC||(sC=!0,GW(AM,function(){return DS(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=pg.transition,pg.transition=null;var l=Ca;Ca=1;var u=So;So|=4,sB.current=null,sq(n,t),LW(t,n),RJ(CL),IM=!!$L,CL=$L=null,n.current=t,oq(t),NK(),So=u,Ca=l,pg.transition=o}else n.current=t;if(sC&&(sC=!1,ry=n,jM=s),o=n.pendingLanes,o===0&&(dy=null),FK(t.stateNode),zf(n,oh()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(VM)throw VM=!1,n=XL,XL=null,n;return jM&1&&n.tag!==0&&DS(),o=n.pendingLanes,o&1?n===YL?uw++:(uw=0,YL=n):uw=0,Ay(),null}function DS(){if(ry!==null){var n=y6(jM),e=pg.transition,t=Ca;try{if(pg.transition=null,Ca=16>n?16:n,ry===null)var i=!1;else{if(n=ry,ry=null,jM=0,So&6)throw Error(En(331));var s=So;for(So|=4,ar=n.current;ar!==null;){var o=ar,l=o.child;if(ar.flags&16){var u=o.deletions;if(u!==null){for(var d=0;d<u.length;d++){var p=u[d];for(ar=p;ar!==null;){var _=ar;switch(_.tag){case 0:case 11:case 15:aw(8,_,o)}var y=_.child;if(y!==null)y.return=_,ar=y;else for(;ar!==null;){_=ar;var b=_.sibling,E=_.return;if(RW(_),_===p){ar=null;break}if(b!==null){b.return=E,ar=b;break}ar=E}}}var C=o.alternate;if(C!==null){var A=C.child;if(A!==null){C.child=null;do{var I=A.sibling;A.sibling=null,A=I}while(A!==null)}}ar=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ar=l;else e:for(;ar!==null;){if(o=ar,o.flags&2048)switch(o.tag){case 0:case 11:case 15:aw(9,o,o.return)}var L=o.sibling;if(L!==null){L.return=o.return,ar=L;break e}ar=o.return}}var O=n.current;for(ar=O;ar!==null;){l=ar;var P=l.child;if(l.subtreeFlags&2064&&P!==null)P.return=l,ar=P;else e:for(l=O;ar!==null;){if(u=ar,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:kI(9,u)}}catch(z){Ic(u,u.return,z)}if(u===l){ar=null;break e}var N=u.sibling;if(N!==null){N.return=u.return,ar=N;break e}ar=u.return}}if(So=s,Ay(),X0&&typeof X0.onPostCommitFiberRoot=="function")try{X0.onPostCommitFiberRoot(xI,n)}catch{}i=!0}return i}finally{Ca=t,pg.transition=e}}return!1}function Y3(n,e,t){e=XS(t,e),e=bW(n,e,1),n=hy(n,e,1),e=sf(),n!==null&&(b$(n,1,e),zf(n,e))}function Ic(n,e,t){if(n.tag===3)Y3(n,n,t);else for(;e!==null;){if(e.tag===3){Y3(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(dy===null||!dy.has(i))){n=XS(t,n),n=TW(e,n,1),e=hy(e,n,1),n=sf(),e!==null&&(b$(e,1,n),zf(e,n));break}}e=e.return}}function dq(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=sf(),n.pingedLanes|=n.suspendedLanes&t,vd===n&&(Qd&t)===t&&(rd===4||rd===3&&(Qd&130023424)===Qd&&500>oh()-aB?o1(n,0):oB|=t),zf(n,e)}function zW(n,e){e===0&&(n.mode&1?(e=K$,K$<<=1,!(K$&130023424)&&(K$=4194304)):e=1);var t=sf();n=rv(n,e),n!==null&&(b$(n,e,t),zf(n,t))}function pq(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),zW(n,t)}function fq(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(En(314))}i!==null&&i.delete(e),zW(n,t)}var HW;HW=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ff.current)Bf=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Bf=!1,tq(n,e,t);Bf=!!(n.flags&131072)}else Bf=!1,Bu&&e.flags&1048576&&V6(e,BM,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;JA(n,e),n=e.pendingProps;var s=GS(e,Ap.current);LS(e,t),s=eB(null,e,i,n,s,t);var o=tB();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Uf(i)?(o=!0,DM(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,KN(e),s.updater=II,e.stateNode=s,s._reactInternals=e,NL(e,i,n,t),e=FL(null,e,i,!0,o,t)):(e.tag=0,Bu&&o&&HN(e),Jp(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(JA(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=gq(i),n=Hg(i,n),s){case 0:e=PL(null,e,i,n,t);break e;case 1:e=P3(null,e,i,n,t);break e;case 11:e=N3(null,e,i,n,t);break e;case 14:e=B3(null,e,i,Hg(i.type,n),t);break e}throw Error(En(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Hg(i,s),PL(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Hg(i,s),P3(n,e,i,s,t);case 3:e:{if(wW(e),n===null)throw Error(En(387));i=e.pendingProps,o=e.memoizedState,s=o.element,K6(n,e),UM(e,i,null,t);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=XS(Error(En(423)),e),e=F3(n,e,i,t,s);break e}else if(i!==s){s=XS(Error(En(424)),e),e=F3(n,e,i,t,s);break e}else for(Em=cy(e.stateNode.containerInfo.firstChild),wm=e,Bu=!0,Wg=null,t=Z6(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(WS(),i===s){e=iv(n,e,t);break e}Jp(n,e,i,t)}e=e.child}return e;case 5:return eW(e),n===null&&OL(e),i=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,l=s.children,AL(i,s)?l=null:o!==null&&AL(i,o)&&(e.flags|=32),xW(n,e),Jp(n,e,l,t),e.child;case 6:return n===null&&OL(e),null;case 13:return $W(n,e,t);case 4:return JN(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=VS(e,null,i,t):Jp(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Hg(i,s),N3(n,e,i,s,t);case 7:return Jp(n,e,e.pendingProps,t),e.child;case 8:return Jp(n,e,e.pendingProps.children,t),e.child;case 12:return Jp(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,Vl(PM,i._currentValue),i._currentValue=l,o!==null)if(Zg(o.value,l)){if(o.children===s.children&&!Ff.current){e=iv(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){l=o.child;for(var d=u.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Q_(-1,t&-t),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var _=p.pending;_===null?d.next=d:(d.next=_.next,_.next=d),p.pending=d}}o.lanes|=t,d=o.alternate,d!==null&&(d.lanes|=t),LL(o.return,t,e),u.lanes|=t;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(En(341));l.lanes|=t,u=l.alternate,u!==null&&(u.lanes|=t),LL(l,t,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Jp(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,LS(e,t),s=fg(s),i=i(s),e.flags|=1,Jp(n,e,i,t),e.child;case 14:return i=e.type,s=Hg(i,e.pendingProps),s=Hg(i.type,s),B3(n,e,i,s,t);case 15:return SW(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Hg(i,s),JA(n,e),e.tag=1,Uf(i)?(n=!0,DM(e)):n=!1,LS(e,t),q6(e,i,s),NL(e,i,s,t),FL(null,e,i,!0,n,t);case 19:return CW(n,e,t);case 22:return EW(n,e,t)}throw Error(En(156,e.tag))};function GW(n,e){return m6(n,e)}function mq(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hg(n,e,t,i){return new mq(n,e,t,i)}function hB(n){return n=n.prototype,!(!n||!n.isReactComponent)}function gq(n){if(typeof n=="function")return hB(n)?1:0;if(n!=null){if(n=n.$$typeof,n===IN)return 11;if(n===RN)return 14}return 2}function fy(n,e){var t=n.alternate;return t===null?(t=hg(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function ZA(n,e,t,i,s,o){var l=2;if(i=n,typeof n=="function")hB(n)&&(l=1);else if(typeof n=="string")l=5;else e:switch(n){case pS:return a1(t.children,s,o,e);case MN:l=8,s|=8;break;case oL:return n=hg(12,t,e,s|2),n.elementType=oL,n.lanes=o,n;case aL:return n=hg(13,t,e,s),n.elementType=aL,n.lanes=o,n;case lL:return n=hg(19,t,e,s),n.elementType=lL,n.lanes=o,n;case QG:return LI(t,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case JG:l=10;break e;case qG:l=9;break e;case IN:l=11;break e;case RN:l=14;break e;case qv:l=16,i=null;break e}throw Error(En(130,n==null?n:typeof n,""))}return e=hg(l,t,e,s),e.elementType=n,e.type=i,e.lanes=o,e}function a1(n,e,t,i){return n=hg(7,n,i,e),n.lanes=t,n}function LI(n,e,t,i){return n=hg(22,n,i,e),n.elementType=QG,n.lanes=t,n.stateNode={isHidden:!1},n}function Nk(n,e,t){return n=hg(6,n,null,e),n.lanes=t,n}function Bk(n,e,t){return e=hg(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function _q(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_k(0),this.expirationTimes=_k(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_k(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dB(n,e,t,i,s,o,l,u,d){return n=new _q(n,e,t,u,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=hg(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},KN(o),n}function vq(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dS,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function WW(n){if(!n)return yy;n=n._reactInternals;e:{if(L1(n)!==n||n.tag!==1)throw Error(En(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Uf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(En(171))}if(n.tag===1){var t=n.type;if(Uf(t))return G6(n,t,e)}return e}function VW(n,e,t,i,s,o,l,u,d){return n=dB(t,i,!0,n,s,o,l,u,d),n.context=WW(null),t=n.current,i=sf(),s=py(t),o=Q_(i,s),o.callback=e??null,hy(t,o,s),n.current.lanes=s,b$(n,s,i),zf(n,i),n}function DI(n,e,t,i){var s=e.current,o=sf(),l=py(s);return t=WW(t),e.context===null?e.context=t:e.pendingContext=t,e=Q_(o,l),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=hy(s,e,l),n!==null&&(Jg(n,s,l,o),XA(n,s,l)),l}function YM(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function K3(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function pB(n,e){K3(n,e),(n=n.alternate)&&K3(n,e)}function yq(){return null}var jW=typeof reportError=="function"?reportError:function(n){console.error(n)};function fB(n){this._internalRoot=n}NI.prototype.render=fB.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(En(409));DI(n,e,null,null)};NI.prototype.unmount=fB.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;E1(function(){DI(null,n,null,null)}),e[nv]=null}};function NI(n){this._internalRoot=n}NI.prototype.unstable_scheduleHydration=function(n){if(n){var e=S6();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ey.length&&e!==0&&e<ey[t].priority;t++);ey.splice(t,0,n),t===0&&x6(n)}};function mB(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function BI(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function J3(){}function bq(n,e,t,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var p=YM(l);o.call(p)}}var l=VW(e,i,n,0,null,!1,!1,"",J3);return n._reactRootContainer=l,n[nv]=l.current,Mw(n.nodeType===8?n.parentNode:n),E1(),l}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var u=i;i=function(){var p=YM(d);u.call(p)}}var d=dB(n,0,!1,null,null,!1,!1,"",J3);return n._reactRootContainer=d,n[nv]=d.current,Mw(n.nodeType===8?n.parentNode:n),E1(function(){DI(e,d,t,i)}),d}function PI(n,e,t,i,s){var o=t._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var u=s;s=function(){var d=YM(l);u.call(d)}}DI(e,l,n,s)}else l=bq(t,e,n,s,i);return YM(l)}b6=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Vx(e.pendingLanes);t!==0&&(LN(e,t|1),zf(e,oh()),!(So&6)&&(YS=oh()+500,Ay()))}break;case 13:E1(function(){var i=rv(n,1);if(i!==null){var s=sf();Jg(i,n,1,s)}}),pB(n,1)}};DN=function(n){if(n.tag===13){var e=rv(n,134217728);if(e!==null){var t=sf();Jg(e,n,134217728,t)}pB(n,134217728)}};T6=function(n){if(n.tag===13){var e=py(n),t=rv(n,e);if(t!==null){var i=sf();Jg(t,n,e,i)}pB(n,e)}};S6=function(){return Ca};E6=function(n,e){var t=Ca;try{return Ca=n,e()}finally{Ca=t}};vL=function(n,e,t){switch(e){case"input":if(hL(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=AI(i);if(!s)throw Error(En(90));e6(i),hL(i,s)}}}break;case"textarea":n6(n,t);break;case"select":e=t.value,e!=null&&IS(n,!!t.multiple,e,!1)}};u6=lB;c6=E1;var Tq={usingClientEntryPoint:!1,Events:[S$,_S,AI,a6,l6,lB]},lx={findFiberByHostInstance:jb,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Sq={bundleType:lx.bundleType,version:lx.version,rendererPackageName:lx.rendererPackageName,rendererConfig:lx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ov.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=p6(n),n===null?null:n.stateNode},findFiberByHostInstance:lx.findFiberByHostInstance||yq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oC.isDisabled&&oC.supportsFiber)try{xI=oC.inject(Sq),X0=oC}catch{}}Om.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tq;Om.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mB(e))throw Error(En(200));return vq(n,e,null,t)};Om.createRoot=function(n,e){if(!mB(n))throw Error(En(299));var t=!1,i="",s=jW;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=dB(n,1,!1,null,null,t,!1,i,s),n[nv]=e.current,Mw(n.nodeType===8?n.parentNode:n),new fB(e)};Om.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(En(188)):(n=Object.keys(n).join(","),Error(En(268,n)));return n=p6(e),n=n===null?null:n.stateNode,n};Om.flushSync=function(n){return E1(n)};Om.hydrate=function(n,e,t){if(!BI(e))throw Error(En(200));return PI(null,n,e,!0,t)};Om.hydrateRoot=function(n,e,t){if(!mB(n))throw Error(En(405));var i=t!=null&&t.hydratedSources||null,s=!1,o="",l=jW;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),e=VW(e,null,n,1,t??null,s,!1,o,l),n[nv]=e.current,Mw(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new NI(e)};Om.render=function(n,e,t){if(!BI(e))throw Error(En(200));return PI(null,n,e,!1,t)};Om.unmountComponentAtNode=function(n){if(!BI(n))throw Error(En(40));return n._reactRootContainer?(E1(function(){PI(null,null,n,!1,function(){n._reactRootContainer=null,n[nv]=null})}),!0):!1};Om.unstable_batchedUpdates=lB;Om.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!BI(t))throw Error(En(200));if(n==null||n._reactInternals===void 0)throw Error(En(38));return PI(n,e,t,!1,i)};Om.version="18.2.0-next-9e3b772b8-20220608";function XW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XW)}catch(n){console.error(n)}}XW(),VG.exports=Om;var gB=VG.exports;const aC=k1(gB);var q3=gB;iL.createRoot=q3.createRoot,iL.hydrateRoot=q3.hydrateRoot;var YW={exports:{}},Pk={exports:{}},Fk={exports:{}},Uk={exports:{}},zk={exports:{}},Q3;function _B(){return Q3||(Q3=1,function(n,e){(function(t,i){n.exports=i()})(Wl,function(){var t={},i,s,o,l,u,d,p,_,y,b,E,C,A,I,L,O,P,N,z,W,H,U,Q,ne,oe,le,ge,ce,pe,Te,Oe,J,se,ie,he,Se,Fe,ke,qe,De,rt,tt,ft,ct,Pe,Ce,je,it,ot,vt,It,yt,kt,$t,mt,xe,re,Be,dt,bt,Mt,pt,Ke,Ie,q,ee,de,Ae,Je,jt,ze,Yt,_t,Kt,Xt,Dn,ii,Lr,Si,Er,ir,te,be,He,at,Ft,rn,Rn,Le,gt,Ct,Tt,zt,On,tr,yr,Rr,Li,Dr,jr,bs,Ia,wo,jl,Zt,Cr,qa,Ra,Ns,Bs,Di,Ar,$n,$r,zr,mr,Ni,Ts,ci,fs,Qa,ka,uc,cc,Vs,Yo,Xl,mu,hh,Ko,pr,Ei,kc,dh,Oc,Sl,gu,El,xl,gr,_r,Yl,Za,el,_u,Ki,ms,tl,Td,ro,Pu,aa,vu,nr,Un,Ss,io,Fu,yu,ph,Oa,la,Uu,br,Ms,vi,xi,ua,Zr,bu,$o,Tu,nl,Bi,wi,zn,$i,Xr,od,Su,Gi,La,fh,cr,Jo,ad,tp,Lc,np,Ip,ff,Sd,Kl,Is,zu,mh,Da,ai,Sr,so,Na,Fo,Jl,ql,Oh,Hr,Ci,vr,Wi,ca,Eu,rp,ip,ld,Hu,rl,Dc,Lh,Gu,Ql,Ps,Zl,Dh,Nc,Bc,ns,Nr,wl,Ba,eu,xu,gh,Ed,hi,ve,We,Ne,Ot,en,Cn,jn,mn,Br,oo,yi,ao,il,Pi,gs,wu,Xn,ha,js,Fs,Pa,Nh,_h,hc,qo,Pc,Bh,Fa,Ph,dc,Wu,ud,Qo,lo,$l,Fh,Fi,cd,Vu,tu,Fc,xd,Cl,wd,Uh,ei,Ai,mf,Rp,Al,nu,ju,Xu,vh,sl,Zo,Ml,Uc,Il,zc,pc,$d,Ua,Gr,ol,Ji,da,Y,Es,pa,xr,dn,kp,al,Mi,li,qi,rs,Hc,fa,ma,is,Gc,ea,Cd,Ad,zh,Us,Vn,zs,Xs,Ui,ru,Uo,Sn,di,pi,Op,yh,uo,ga,xn,gn,ll,fc,gf,iu,Co,_s,ul,ss,cl,zo,Hh,za,Ii,Md,Wc,Gh,Ho,Ao,sp,$u,Rl,hd,mc,Yr,su,Yu,os,Ha,xs,ws,Vc,fi,Ga,gc,op,bh,ta,Vi,Ln,qn,kr,ti,Jr,Mo,as,Qi,ou,Ku,_c,Ju,Ys,co,dd,_a,Cu,Au,ho,po,kl,Go,qu,Qu,Th,Sh,Mr,vs,Rs,Wa,Hs,cn,jc,bn;i=function(r,a,f,S){if(!(r instanceof Bt)&&typeof r!="string"||`${r}`.trim()==="")throw Error('Invalid type "'+r+'". The type must be a non-empty string or a Blockly.registry.Type.');if(r=`${r}`.toLowerCase(),typeof a!="string"||a.trim()==="")throw Error('Invalid name "'+a+'". The name must be a non-empty string.');const k=a.toLowerCase();if(!f)throw Error("Can not register a null value");let j=mi[r],_e=au[r];if(j||(j=mi[r]=Object.create(null),_e=au[r]=Object.create(null)),s(r,f),!S&&j[k])throw Error('Name "'+k+'" with type "'+r+'" already registered.');j[k]=f,_e[k]=a},s=function(r,a){switch(r){case String(Bt.FIELD):if(typeof a.fromJson!="function")throw Error('Type "'+r+'" must have a fromJson function')}},o=function(r,a){r=`${r}`.toLowerCase(),a=a.toLowerCase();const f=mi[r];f&&f[a]?(delete mi[r][a],delete au[r][a]):console.warn("Unable to unregister ["+a+"]["+r+"] from the registry.")},l=function(r,a,f){r=`${r}`.toLowerCase(),a=a.toLowerCase();const S=mi[r];if(!S||!S[a]){if(a="Unable to find ["+a+"]["+r+"] in the registry.",f)throw Error(a+" You must require or register a "+r+" plugin.");return console.warn(a),null}return S[a]},u=function(r,a){return r=`${r}`.toLowerCase(),a=a.toLowerCase(),(r=mi[r])?!!r[a]:!1},d=function(r,a,f){return l(r,a,f)},p=function(r,a,f){return l(r,a,f)},_=function(r,a,f){r=`${r}`.toLowerCase();var S=mi[r];if(!S){if(S=`Unable to find [${r}] in the registry.`,f)throw Error(`${S} You must require or register a ${r} plugin.`);return console.warn(S),null}if(!a)return S;r=au[r],f=Object.create(null);for(const k of Object.keys(S))f[r[k]]=S[k];return f},y=function(r,a,f){return a=a.plugins[String(r)]||Ol,typeof a=="function"?a:d(r,a,f)},b=function(r){return Zu[r]||null},E=function(){const r=[];for(const a in Zu)r.push(Zu[a]);return r},C=function(r){Zu[r.id]=r},A=function(r){delete Zu[r.id]},I=function(){return Wh},L=function(r){Wh=r},O=function(){return Xc},P=function(r){Xc=r},N=function(){return si},z=function(r){si=r},W=function(r){for(;r.options.parentWorkspace;)r=r.options.parentWorkspace;const a=r.getParentSvg(),f=r.getCachedParentSvgSize();var S=a.parentElement;if(S instanceof HTMLElement){var k=S.offsetWidth;S=S.offsetHeight,f.width!==k&&(a.setAttribute("width",k+"px"),r.setCachedParentSvgSize(k,null)),f.height!==S&&(a.setAttribute("height",S+"px"),r.setCachedParentSvgSize(null,S)),r.resize()}},H=function(r,a){const f=Object.create(null),S=r.getDescendants(!0);a&&(r=r.getNextBlock())&&(r=S.indexOf(r),S.splice(r,S.length-r));for(let k=0,j;j=S[k];k++)f[j.type]?f[j.type]++:f[j.type]=1;return f},U=function(r){return function(){this.jsonInit(r)}},Q=function(r){Yc.defineBlocksWithJsonArrayInternal(r)},ne=function(r){t.defineBlocks$$module$build$src$core$common(t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(r))},t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(r){const a={};for(let f=0;f<r.length;f++){const S=r[f];if(!S){console.warn(`Block definition #${f} in JSON array is ${S}. Skipping`);continue}const k=S.type;k?a[k]={init:U(S)}:console.warn(`Block definition #${f} in JSON array is missing a type attribute. Skipping.`)}return a},t.defineBlocks$$module$build$src$core$common=function(r){for(const a of Object.keys(r)){const f=r[a];a in Wr&&console.warn(`Block definiton "${a}" overwrites previous definition.`),Wr[a]=f}},oe=function(){return"blockly-"+(vc++).toString(36)},le=function(){return Kc.genUid()},ge=function(r){Ks=r},ce=function(){return Ks},pe=function(r){Lp.fireInternal(r)},Te=function(r){if(ie()){if(!bc.length)try{requestAnimationFrame(()=>{setTimeout(Oe,0)})}catch{setTimeout(Oe,0)}bc.push(r)}},Oe=function(){var r=J(bc,!0);bc.length=0;for(let f=0,S;S=r[f];f++)if(S.workspaceId){var a=b(S.workspaceId);a&&a.fireChangeListener(S)}r=new Set(r.map(f=>f.workspaceId));for(const f of r){if(!f||(r=b(f),!r))continue;r=r.getUndoStack();let S;for(a=r.length;0<a;a--){const k=r[a-1];if(k.group==="")break;if(S===void 0)S=k.group;else if(k.group!==S)break}S&&a!=r.length-1&&(a=r.splice(a,r.length-a),a=J(a,!0),r.push(...a))}},J=function(r,a){r=r.slice(),a||r.reverse();const f=[],S=Object.create(null);for(let _e=0,Ue;Ue=r[_e];_e++)if(!Ue.isNull()){var k=[Ue.isUiEvent?yc:Ue.type,Ue.blockId,Ue.workspaceId].join(" "),j=S[k];const Wt=j?j.event:null;j?Ue.type===t.MOVE$$module$build$src$core$events$utils&&j.index===_e-1?(k=Ue,Wt.newParentId=k.newParentId,Wt.newInputName=k.newInputName,Wt.newCoordinate=k.newCoordinate,k.reason&&(Wt.reason?(k=new Set(k.reason.concat(Wt.reason)),Wt.reason=Array.from(k)):Wt.reason=k.reason),j.index=_e):Ue.type===t.CHANGE$$module$build$src$core$events$utils&&Ue.element===Wt.element&&Ue.name===Wt.name?Wt.newValue=Ue.newValue:Ue.type===ni?(j=Ue,Wt.viewTop=j.viewTop,Wt.viewLeft=j.viewLeft,Wt.scale=j.scale,Wt.oldScale=j.oldScale):(Ue.type!==tc||Wt.type!==_o)&&(S[k]={event:Ue,index:_e},f.push(Ue)):(S[k]={event:Ue,index:_e},f.push(Ue))}r=f.filter(function(_e){return!_e.isNull()}),a||r.reverse();for(let _e=1,Ue;Ue=r[_e];_e++)Ue.type===t.CHANGE$$module$build$src$core$events$utils&&Ue.element==="mutation"&&r.unshift(r.splice(_e,1)[0]);return r},se=function(){for(let r=0,a;a=bc[r];r++)a.recordUndo=!1},t.disable$$module$build$src$core$events$utils=function(){na++},t.enable$$module$build$src$core$events$utils=function(){na--},ie=function(){return na===0},t.getGroup$$module$build$src$core$events$utils=function(){return Io},t.setGroup$$module$build$src$core$events$utils=function(r){Lp.setGroupInternal(r)},he=function(r){Io=typeof r=="boolean"?r?le():"":r},Se=function(r){const a=[];r=r.getDescendants(!1);for(let f=0,S;S=r[f];f++)a[f]=S.id;return a},Fe=function(r,a){const f=ke(r.type);if(!f)throw Error("Unknown event type.");return f.fromJson(r,a)},ke=function(r){const a=d(Bt.EVENT,r);if(!a)throw Error(`Event type ${r} not found in registry.`);return a},qe=function(r){if((r.type===t.MOVE$$module$build$src$core$events$utils||r.type===t.CREATE$$module$build$src$core$events$utils)&&r.workspaceId){var a=b(r.workspaceId);if(!r.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(r=a.getBlockById(r.blockId)){const f=Ks;try{Ks=!1;const S=r.getParent();if(S&&S.isEnabled()){const k=r.getDescendants(!1);for(let j=0,_e;_e=k[j];j++)_e.setEnabled(!0)}else if((r.outputConnection||r.previousConnection)&&!a.isDragging())do r.setEnabled(!1),r=r.getNextBlock();while(r)}finally{Ks=f}}}},De=function(r,a){rt(),Qe=setTimeout(function(){a&&a.handleRightClick(r)},B)},rt=function(){Qe&&(clearTimeout(Qe),Qe=0)},tt=function(){ue=null},ft=function(r){return!r.type.startsWith("pointer")||r instanceof PointerEvent&&Pe(r)},ct=function(r){return`${r.pointerId}`},Pe=function(r){const a=ct(r);return ue?ue===a:r.type==="pointerdown"?(ue=a,!0):!1},Ce=function(r,a,f,S,k){function j(Ue){(k||ft(Ue))&&(f?S.call(f,Ue):S(Ue))}const _e=[];if(a in Me)for(let Ue=0;Ue<Me[a].length;Ue++){const Wt=Me[a][Ue];r.addEventListener(Wt,j,!1),_e.push([r,Wt,j])}else r.addEventListener(a,j,!1),_e.push([r,a,j]);return _e},je=function(r,a,f,S){function k(_e){f?S.call(f,_e):S(_e)}const j=[];if(a in Me)for(let _e=0;_e<Me[a].length;_e++){const Ue=Me[a][_e];r.addEventListener(Ue,k,!1),j.push([r,Ue,k])}else r.addEventListener(a,k,!1),j.push([r,a,k]);return j},it=function(r){const a=r[r.length-1][2];for(;r.length;){const[f,S,k]=r.pop();f.removeEventListener(S,k,!1)}return a},ot=function(r){if(r.target instanceof HTMLElement){if(r.target.isContentEditable||r.target.getAttribute("data-is-text-input")==="true")return!0;if(r.target instanceof HTMLInputElement)return r=r.target,r.type==="text"||r.type==="number"||r.type==="email"||r.type==="password"||r.type==="search"||r.type==="tel"||r.type==="url";if(r.target instanceof HTMLTextAreaElement)return!0}return!1},vt=function(r){return r.ctrlKey&&wr?!0:r.button===2},It=function(r,a,f){const S=a.createSVGPoint();return S.x=r.clientX,S.y=r.clientY,f||(f=a.getScreenCTM().inverse()),S.matrixTransform(f)},yt=function(r){switch(r.deltaMode){default:return{x:r.deltaX,y:r.deltaY};case 1:return{x:r.deltaX*xh,y:r.deltaY*xh};case 2:return{x:r.deltaX*sn,y:r.deltaY*sn}}},kt=function(r,a){return a=r.indexOf(a),a===-1?!1:(r.splice(a,1),!0)},$t=function(r){if(lp)throw Error("CSS already injected");Xh+=`
`+r},mt=function(r,a){lp||(lp=!0,r&&(r=a.replace(/[\\/]$/,""),a=Xh.replace(/<<<PATH>>>/g,r),Xh="",r=document.createElement("style"),r.id="blockly-common-style",a=document.createTextNode(a),r.appendChild(a),document.head.insertBefore(r,document.head.firstChild)))},xe=function(r,a,f,S){r=r+" was deprecated in "+a+" and will be deleted in "+f+".",S&&(r+=`
Use `+S+" instead."),o0.has(r)||(o0.add(r),console.warn(r))},re=function(r,a,f){r=document.createElementNS(zm,`${r}`);for(const S in a)r.setAttribute(S,`${a[S]}`);return f&&f.appendChild(r),r},Be=function(r,a){return a=a.split(" "),a.every(f=>r.classList.contains(f))?!1:(r.classList.add(...a),!0)},dt=function(r,a){r.classList.remove(...a.split(" "))},bt=function(r,a){return a=a.split(" "),a.every(f=>!r.classList.contains(f))?!1:(r.classList.remove(...a),!0)},Mt=function(r,a){return r.classList.contains(a)},pt=function(r){return r&&r.parentNode?r.parentNode.removeChild(r):null},Ke=function(r,a){const f=a.nextSibling;if(a=a.parentNode,!a)throw Error("Reference node has no parent.");f?a.insertBefore(r,f):a.appendChild(r)},Ie=function(r,a){return xe("Blockly.utils.dom.containsNode","version 10","version 11",'Use native "contains" DOM method'),r.contains(a)},q=function(r,a){r.style.transform=a,r.style["-webkit-transform"]=a},ee=function(){ja++,Id||(Id=Object.create(null))},de=function(){ja--,ja||(Id=null)},Ae=function(r){const a=r.textContent+`
`+r.className.baseVal;let f;if(Id&&(f=Id[a]))return f;try{f=r.getComputedTextLength()}catch{return 8*r.textContent.length}return Id&&(Id[a]=f),f},Je=function(r,a,f,S){return jt(r,a+"pt",f,S)},jt=function(r,a,f,S){const k=r.textContent;r=k+`
`+r.className.baseVal;var j;return Id&&(j=Id[r])||(Pr||(j=document.createElement("canvas"),j.className="blocklyComputeCanvas",document.body.appendChild(j),Pr=j.getContext("2d")),Pr.font=f+" "+a+" "+S,j=k?Pr.measureText(k).width:0,Id&&(Id[r]=j)),j},ze=function(r,a,f,S){const k=document.createElement("span");k.style.font=f+" "+a+" "+S,k.textContent=r,r=document.createElement("div"),r.style.width="1px",r.style.height="0",a=document.createElement("div"),a.style.display="flex",a.style.position="fixed",a.style.top="0",a.style.left="0",a.appendChild(k),a.appendChild(r),document.body.appendChild(a),f={height:0,baseline:0};try{a.style.alignItems="baseline",f.baseline=r.offsetTop-k.offsetTop,a.style.alignItems="flex-end",f.height=r.offsetTop-k.offsetTop}finally{document.body.removeChild(a)}return f},Yt=function(r){return a_.getSizeInternal(r)},_t=function(r){if(Xt(r,"display")!=="none")return Kt(r);const a=r.style,f=a.display,S=a.visibility,k=a.position;a.visibility="hidden",a.position="absolute",a.display="inline";const j=r.offsetWidth;return r=r.offsetHeight,a.display=f,a.position=k,a.visibility=S,new qs(j,r)},Kt=function(r){return new qs(r.offsetWidth,r.offsetHeight)},Xt=function(r,a){return r=window.getComputedStyle(r),r[a]||r.getPropertyValue(a)},Dn=function(r){const a=new fn(0,0);r=r.getBoundingClientRect();var f=document.documentElement;return f=new fn(window.pageXOffset||f.scrollLeft,window.pageYOffset||f.scrollTop),a.x=r.left+f.x,a.y=r.top+f.y,a},ii=function(){const r=document.body,a=document.documentElement;return new fn(r.scrollLeft||a.scrollLeft,r.scrollTop||a.scrollTop)},Lr=function(r){const a=parseFloat(Xt(r,"borderLeftWidth")),f=parseFloat(Xt(r,"borderRightWidth")),S=parseFloat(Xt(r,"borderTopWidth"));return r=parseFloat(Xt(r,"borderBottomWidth")),new Ri(S,r,a,f)},Si=function(r,a,f){r=Er(r,a,f),a.scrollLeft=r.x,a.scrollTop=r.y},Er=function(r,a,f){var S=Dn(r),k=Dn(a),j=Lr(a);const _e=S.x-k.x-j.left;return S=S.y-k.y-j.top,k=Kt(r),r=a.clientWidth-k.width,k=a.clientHeight-k.height,j=a.scrollLeft,a=a.scrollTop,f?(j+=_e-r/2,a+=S-k/2):(j+=Math.min(_e,Math.max(_e-r,0)),a+=Math.min(S,Math.max(S-k,0))),new fn(j,a)},ir=function(r){const a=new fn(0,0);var f=r.x&&r.getAttribute("x");const S=r.y&&r.getAttribute("y");return f&&(a.x=parseInt(f)),S&&(a.y=parseInt(S)),(f=(f=r.getAttribute("transform"))&&f.match(_f))&&(a.x+=Number(f[1]),f[3]&&(a.y+=Number(f[3]))),(r=r.getAttribute("style"))&&-1<r.indexOf("translate")&&(r=r.match(jf))&&(a.x+=Number(r[1]),r[3]&&(a.y+=Number(r[3]))),a},te=function(r){let a=0,f=0;for(;r;){const S=ir(r);if(a+=S.x,f+=S.y,(" "+(r.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;r=r.parentNode}return new fn(a,f)},be=function(){const r=ii();return new Ri(r.y,document.documentElement.clientHeight+r.y,r.x,document.documentElement.clientWidth+r.x)},He=function(){const r=document.documentElement,a=window;return new fn(a.pageXOffset||r.scrollLeft,a.pageYOffset||r.scrollTop)},at=function(r,a){var f=a.x;a=a.y;const S=r.getInjectionDiv().getBoundingClientRect();return f=new fn(f-S.left,a-S.top),a=r.getOriginOffsetInPixels(),fn.difference(f,a).scale(1/r.scale)},Ft=function(r,a){var f=a.scale(r.scale);a=f.x,f=f.y;const S=r.getInjectionDiv().getBoundingClientRect();return r=r.getOriginOffsetInPixels(),new fn(a+S.left+r.x,f+S.top+r.y)},rn=function(r){({document:yf=yf,DOMParser:fl=fl,XMLSerializer:uu=uu}=r),Tg=new fl,Xf=new uu},t.createElement$$module$build$src$core$utils$xml=function(r){return yf.createElementNS(Rd,r)},t.createTextNode$$module$build$src$core$utils$xml=function(r){return yf.createTextNode(r)},t.textToDom$$module$build$src$core$utils$xml=function(r){let a=Tg.parseFromString(r,"text/xml");if(a&&a.documentElement&&!a.getElementsByTagName("parsererror").length)return a.documentElement;if((a=Tg.parseFromString(r,"text/html"))&&a.body.firstChild&&a.body.firstChild.nodeName.toLowerCase()==="xml")return a.body.firstChild;throw Error(`DOMParser was unable to parse: ${r}`)},Rn=function(r){return Le(Xf.serializeToString(r))},Le=function(r){return r.replace(up,a=>`&#${a.charCodeAt(0)};`)},gt=function(r){return r?((r instanceof Element||typeof r=="string")&&(r=Dr(r),r=yr(r)),Ct(r),r):null},Ct=function(r){const a=r.kind;if(r=r.contents,a&&a!==Sg&&a!==Qc)throw Error("Invalid toolbox kind "+a+". Please supply either "+Sg+" or "+Qc);if(!r)throw Error("Toolbox must have a contents attribute.")},Tt=function(r){return r?r.contents?r.contents:Array.isArray(r)&&0<r.length&&!r[0].nodeType?r:Rr(r):[]},zt=function(r){return a0.hasCategoriesInternal(r)},On=function(r){if(!r)return!1;const a=r.kind;return a?a===Qc:!!r.contents.filter(function(f){return f.kind.toUpperCase()==="CATEGORY"}).length},tr=function(r){return r&&r.contents?!!r.contents.filter(function(a){return a.kind.toUpperCase()==="CATEGORY"}).length:!1},yr=function(r){const a={contents:Rr(r)};return r instanceof Node&&Li(r,a),a},Rr=function(r){const a=[];let f=r.childNodes;f||(f=r);for(let S=0,k;k=f[S];S++){if(!k.tagName)continue;r={};const j=k.tagName.toUpperCase();r.kind=j,j==="BLOCK"?r.blockxml=k:k.childNodes&&0<k.childNodes.length&&(r.contents=Rr(k)),Li(k,r),a.push(r)}return a},Li=function(r,a){for(let f=0;f<r.attributes.length;f++){const S=r.attributes[f];-1<S.nodeName.indexOf("css-")?(a.cssconfig=a.cssconfig||{},a.cssconfig[S.nodeName.replace("css-","")]=S.value):a[S.nodeName]=S.value}},Dr=function(r){let a=null;if(r)if(typeof r=="string"){if(a=t.textToDom$$module$build$src$core$utils$xml(r),a.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else r instanceof Element&&(a=r);return a},jr=function(r,a,f,S,k,j){const _e=j.scrollbar&&j.scrollbar.canScrollVertically();return r.horizontal===Yf.LEFT?(f=k.absoluteMetrics.left+f,_e&&j.RTL&&(f+=Sa.scrollbarThickness)):(f=k.absoluteMetrics.left+k.viewMetrics.width-a.width-f,_e&&!j.RTL&&(f-=Sa.scrollbarThickness)),r.vertical===Xa.TOP?r=k.absoluteMetrics.top+S:(r=k.absoluteMetrics.top+k.viewMetrics.height-a.height-S,j.scrollbar&&j.scrollbar.canScrollHorizontally()&&(r-=Sa.scrollbarThickness)),new Ri(r,r+a.height,f,f+a.width)},bs=function(r,a){return{horizontal:a.toolboxMetrics.position===hr.LEFT||r.horizontalLayout&&!r.RTL?Yf.RIGHT:Yf.LEFT,vertical:a.toolboxMetrics.position===hr.BOTTOM?Xa.TOP:Xa.BOTTOM}},Ia=function(r,a,f,S){const k=r.left,j=r.right-r.left,_e=r.bottom-r.top;for(let Ue=0;Ue<S.length;Ue++){const Wt=S[Ue];r.intersects(Wt)&&(r=f===Od.UP?Wt.top-_e-a:Wt.bottom+a,r=new Ri(r,r+_e,k,k+j),Ue=-1)}return r},wo=function(r,a){Zi(r,a)},jl=function(r){Zi=r},Zt=function(r,a){Ru.confirmInternal(r,a)},Cr=function(r,a){cu(r,a)},qa=function(r){cu=r},Ra=function(r,a,f){ml(r,a,f)},Ns=function(r){ml=r},Bs=function(r){return r.getVariableModel!==void 0},Di=function(r){return r.getProcedureDef!==void 0},Ar=function(r){return r.getProcedureCall!==void 0&&r.renameProcedure!==void 0},t.allUsedVarModels$$module$build$src$core$variables=function(r){r=r.getAllBlocks(!1);const a=new Set;for(let f=0;f<r.length;f++){const S=r[f].getVarModels();if(S)for(let k=0;k<S.length;k++){const j=S[k];j.getId()&&a.add(j)}}return Array.from(a.values())},t.allDeveloperVariables$$module$build$src$core$variables=function(r){r=r.getAllBlocks(!1);const a=new Set;for(let S=0,k;k=r[S];S++){var f=k.getDeveloperVariables;if(f){f=f();for(let j=0;j<f.length;j++)a.add(f[j])}}return Array.from(a.values())},$n=function(r){let a=[];const f=document.createElement("button");return f.setAttribute("text","%{BKY_NEW_VARIABLE}"),f.setAttribute("callbackKey","CREATE_VARIABLE"),r.registerButtonCallback("CREATE_VARIABLE",function(S){Ts(S.getTargetWorkspace())}),a.push(f),r=$r(r),a=a.concat(r)},$r=function(r){r=r.getVariablesOfType("");const a=[];if(0<r.length){var f=r[r.length-1];if(Wr.variables_set){var S=t.createElement$$module$build$src$core$utils$xml("block");S.setAttribute("type","variables_set"),S.setAttribute("gap",Wr.math_change?"8":"24"),S.appendChild(Vs(f)),a.push(S)}if(Wr.math_change&&(S=t.createElement$$module$build$src$core$utils$xml("block"),S.setAttribute("type","math_change"),S.setAttribute("gap",Wr.variables_get?"20":"8"),S.appendChild(Vs(f)),f=t.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),S.appendChild(f),a.push(S)),Wr.variables_get){r.sort(cp.compareByName);for(let k=0,j;j=r[k];k++)f=t.createElement$$module$build$src$core$utils$xml("block"),f.setAttribute("type","variables_get"),f.setAttribute("gap","8"),f.appendChild(Vs(j)),a.push(f)}}return a},zr=function(r){return Zc.generateUniqueNameInternal(r)},mr=function(r){return Ni(Jf.charAt(0),r.getAllVariableNames())},Ni=function(r,a){if(!a.length)return r;const f=Jf;let S="",k=f.indexOf(r);for(;;){let j=!1;for(let _e=0;_e<a.length;_e++)if(a[_e].toLowerCase()===r){j=!0;break}if(!j)break;k++,k===f.length&&(k=0,S=`${Number(S)+1}`),r=f.charAt(k)+S}return r},Ts=function(r,a,f){function S(j){ci(t.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,j,function(_e){if(_e){var Ue=Qa(_e,r);if(Ue){if(Ue.type===k)var Wt=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",Ue.name);else Wt=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,Wt=Wt.replace("%1",Ue.name).replace("%2",Ue.type);wo(Wt,function(){S(_e)})}else r.createVariable(_e,k),a&&a(_e)}else a&&a(null)})}const k=f||"";S("")},t.renameVariable$$module$build$src$core$variables=function(r,a,f){function S(k){const j=t.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",a.name);ci(j,k,function(_e){if(_e){var Ue=fs(_e,a.type,r),Wt=ka(a.name,_e,r);if(Ue||Wt){var Hn="";Ue?Hn=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",Ue.name).replace("%2",Ue.type):Wt&&(Hn=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",_e).replace("%2",Wt)),wo(Hn,function(){S(_e)})}else r.renameVariableById(a.getId(),_e),f&&f(_e)}else f&&f(null)})}S("")},ci=function(r,a,f){Ra(r,a,function(S){S&&(S=S.replace(/[\s\xa0]+/g," ").trim(),S===t.Msg$$module$build$src$core$msg.RENAME_VARIABLE||S===t.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(S=null),f(S)})},fs=function(r,a,f){f=f.getVariableMap().getAllVariables(),r=r.toLowerCase();for(let S=0,k;k=f[S];S++)if(k.name.toLowerCase()===r&&k.type!==a)return k;return null},Qa=function(r,a){a=a.getVariableMap().getAllVariables(),r=r.toLowerCase();for(let f=0,S;S=a[f];f++)if(S.name.toLowerCase()===r)return S;return null},ka=function(r,a,f){return f.getProcedureMap().getProcedures().length?uc(r,a,f):cc(r,a,f)},uc=function(r,a,f){r=r.toLowerCase(),a=a.toLowerCase(),f=f.getProcedureMap().getProcedures();for(const k of f){var S=k.getParameters().filter(Bs).map(j=>j.getVariableModel().name);if(S&&(f=S.some(j=>j.toLowerCase()===r),S=S.some(j=>j.toLowerCase()===a),f&&S))return k.getName()}return null},cc=function(r,a,f){r=r.toLowerCase(),a=a.toLowerCase(),f=f.getAllBlocks(!1);for(const k of f){if(!Di(k))continue;f=k.getProcedureDef();var S=f[1];const j=S.some(_e=>_e.toLowerCase()===r);if(S=S.some(_e=>_e.toLowerCase()===a),j&&S)return f[0]}return null},Vs=function(r){const a=t.createElement$$module$build$src$core$utils$xml("field");return a.setAttribute("name","VAR"),a.setAttribute("id",r.getId()),a.setAttribute("variabletype",r.type),r=t.createTextNode$$module$build$src$core$utils$xml(r.name),a.appendChild(r),a},t.getOrCreateVariablePackage$$module$build$src$core$variables=function(r,a,f,S){let k=t.getVariable$$module$build$src$core$variables(r,a,f,S);return k||(k=Yo(r,a,f,S)),k},t.getVariable$$module$build$src$core$variables=function(r,a,f,S){const k=r.getPotentialVariableMap();let j=null;if(a&&(j=r.getVariableById(a),!j&&k&&(j=k.getVariableById(a)),j))return j;if(f){if(S===void 0)throw Error("Tried to look up a variable by name without a type");j=r.getVariable(f,S),!j&&k&&(j=k.getVariable(f,S))}return j},Yo=function(r,a,f,S){const k=r.getPotentialVariableMap();return f||(f=zr(r.isFlyout?r.targetWorkspace:r)),k?k.createVariable(f,S,a):r.createVariable(f,S,a)},Xl=function(r,a){r=r.getAllVariables();const f=[];if(a.length!==r.length)for(let S=0;S<r.length;S++){const k=r[S];a.indexOf(k)===-1&&f.push(k)}return f},mu=function(r,a){i(Bt.PASTER,r,a)},hh=function(r){o(Bt.PASTER,r)},Ko=function(r){return dh(r),kc()?(Oc(),Promise.resolve()):(Bd||(Bd=new Promise(a=>{Wm=a,Ec=window.requestAnimationFrame(()=>{Oc(),a()})})),Bd)},pr=function(){return Bd||Promise.resolve()},Ei=function(r){r||window.cancelAnimationFrame(Ec),Oc(r),!r&&Wm&&Wm()},kc=function(){return tn},dh=function(r){xg.add(r);const a=r.getParent();a?dh(a):Tf.add(r)},Oc=function(r){const a=r?new Set([r]):new Set([...Tf].map(k=>k.workspace)),f=[...Tf].filter(gu).filter(k=>a.has(k.workspace));for(var S of f)El(S);for(const k of a)k.resizeContents();for(const k of f)S=k.getRelativeToSurfaceXY(),k.updateComponentLocations(S);for(const k of f)Sl(k);r||(Bd=null)},Sl=function(r){Tf.delete(r),xg.delete(r);for(const a of r.getChildren(!1))Sl(a)},gu=function(r){return!r.isDisposed()&&!r.getParent()},El=function(r){if(xg.has(r)){for(const a of r.getChildren(!1))El(a);r.renderEfficiently()}},xl=function(r,a){const f=t.createElement$$module$build$src$core$utils$xml("xml");var S=gr(t.allUsedVarModels$$module$build$src$core$variables(r));S.hasChildNodes()&&f.appendChild(S),S=r.getTopComments(!0);for(let k=0;k<S.length;k++)f.appendChild(S[k].toXmlWithXY(a));for(r=r.getTopBlocks(!0),S=0;S<r.length;S++)f.appendChild(_r(r[S],a));return f},gr=function(r){const a=t.createElement$$module$build$src$core$utils$xml("variables");for(let f=0;f<r.length;f++){const S=r[f],k=t.createElement$$module$build$src$core$utils$xml("variable");k.appendChild(t.createTextNode$$module$build$src$core$utils$xml(S.name)),S.type&&k.setAttribute("type",S.type),k.id=S.getId(),a.appendChild(k)}return a},_r=function(r,a){if(r.isInsertionMarker()&&(r=r.getChildren(!1)[0],!r))return new DocumentFragment;let f=0;if(r.workspace.RTL&&(f=r.workspace.getWidth()),a=el(r,a),Uu(a)){const S=r.getRelativeToSurfaceXY();a.setAttribute("x",String(Math.round(r.workspace.RTL?f-S.x:S.x))),a.setAttribute("y",String(Math.round(S.y)))}return a},Yl=function(r){if(r.isSerializable()){const a=t.createElement$$module$build$src$core$utils$xml("field");return a.setAttribute("name",r.name||""),r.toXml(a)}return null},Za=function(r,a){for(let f=0;f<r.inputList.length;f++){const S=r.inputList[f];for(let k=0;k<S.fieldRow.length;k++){const j=Yl(S.fieldRow[k]);j&&a.appendChild(j)}}},el=function(r,a){if(r.isInsertionMarker())return(a=r.getChildren(!1)[0])?el(a):new DocumentFragment;const f=t.createElement$$module$build$src$core$utils$xml(r.isShadow()?"shadow":"block");if(f.setAttribute("type",r.type),a||(f.id=r.id),r.mutationToDom){var S=r.mutationToDom();S&&(S.hasChildNodes()||S.hasAttributes())&&f.appendChild(S)}if(Za(r,f),S=r.getCommentText()){var k=r.getIcon(Vo.COMMENT),j=k.getBubbleSize();k=k.bubbleIsVisible();var _e=t.createElement$$module$build$src$core$utils$xml("comment");_e.appendChild(t.createTextNode$$module$build$src$core$utils$xml(S)),_e.setAttribute("pinned",`${k}`),_e.setAttribute("h",String(j.height)),_e.setAttribute("w",String(j.width)),f.appendChild(_e)}for(r.data&&(S=t.createElement$$module$build$src$core$utils$xml("data"),S.appendChild(t.createTextNode$$module$build$src$core$utils$xml(r.data)),f.appendChild(S)),S=0;S<r.inputList.length;S++){j=r.inputList[S];var Ue=void 0;if(k=!0,j.type!==t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&j.type!==t.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){_e=j.connection.targetBlock(),j.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE?Ue=t.createElement$$module$build$src$core$utils$xml("value"):j.type===t.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(Ue=t.createElement$$module$build$src$core$utils$xml("statement"));const Hn=j.connection.getShadowDom();!Hn||_e&&_e.isShadow()||Ue.appendChild(_u(Hn,a)),_e&&(_e=el(_e,a),_e.nodeType===Dp.ELEMENT_NODE&&(Ue.appendChild(_e),k=!1)),Ue.setAttribute("name",j.name),k||f.appendChild(Ue)}}r.inputsInline!==void 0&&r.inputsInline!==r.inputsInlineDefault&&f.setAttribute("inline",String(r.inputsInline)),r.isCollapsed()&&f.setAttribute("collapsed","true"),r.isEnabled()||f.setAttribute("disabled","true"),r.isDeletable()||r.isShadow()||f.setAttribute("deletable","false"),r.isMovable()||r.isShadow()||f.setAttribute("movable","false"),r.isEditable()||f.setAttribute("editable","false"),Ue=r.getNextBlock();let Wt;return Ue&&(S=el(Ue,a),S.nodeType===Dp.ELEMENT_NODE&&(Wt=t.createElement$$module$build$src$core$utils$xml("next"),Wt.appendChild(S),f.appendChild(Wt))),r=r.nextConnection&&r.nextConnection.getShadowDom(),!r||Ue&&Ue.isShadow()||Wt.appendChild(_u(r,a)),f},_u=function(r,a){let f=r=r.cloneNode(!0),S;for(;f;)if(a&&f.nodeName==="shadow"&&f.removeAttribute("id"),f.firstChild)f=f.firstChild;else{for(;f&&!f.nextSibling;){S=f,f=f.parentNode;let k;S.nodeType===Dp.TEXT_NODE&&S.data.trim()===""&&((k=f)==null?void 0:k.firstChild)!==S&&pt(S)}f&&(S=f,f=f.nextSibling,S.nodeType===Dp.TEXT_NODE&&S.data.trim()===""&&pt(S))}return r},Ki=function(r){return Rn(r).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},ms=function(r){r=Ki(r).split("<");let a="";for(let f=1;f<r.length;f++){const S=r[f];S[0]==="/"&&(a=a.substring(2)),r[f]=a+"<"+S,S[0]!=="/"&&S.slice(-2)!=="/>"&&(a+="  ")}return r=r.join(`
`),r=r.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),r.replace(/^\n/,"")},tl=function(r,a){return a.setResizesEnabled(!1),a.clear(),r=t.domToWorkspace$$module$build$src$core$xml(r,a),a.setResizesEnabled(!0),r},t.domToWorkspace$$module$build$src$core$xml=function(r,a){let f=0;a.RTL&&(f=a.getWidth());const S=[];ee();const k=t.getGroup$$module$build$src$core$events$utils();k||t.setGroup$$module$build$src$core$events$utils(!0),a.setResizesEnabled&&a.setResizesEnabled(!1);let j=!0;try{for(let _e=0,Ue;Ue=r.childNodes[_e];_e++){const Wt=Ue.nodeName.toLowerCase(),Hn=Ue;if(Wt==="block"||Wt==="shadow"&&!ce()){const _l=ro(Hn,a);S.push(_l.id);let Ka;const kf=parseInt((Ka=Hn.getAttribute("x"))!=null?Ka:"10",10);let _T;const vT=parseInt((_T=Hn.getAttribute("y"))!=null?_T:"10",10);isNaN(kf)||isNaN(vT)||_l.moveBy(a.RTL?f-kf:kf,vT,["create"]),j=!1}else{if(Wt==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(Wt==="comment")a.rendered?Pl.fromXmlRendered(Hn,a,f):eh.fromXml(Hn,a);else if(Wt==="variables"){if(j)Pu(Hn,a);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");j=!1}}}}finally{t.setGroup$$module$build$src$core$events$utils(k),a.setResizesEnabled&&a.setResizesEnabled(!0),a.rendered&&Ei(),de()}return pe(new(ke(ya))(a)),S},Td=function(r,a){if(!a.getBlocksBoundingBox)return t.domToWorkspace$$module$build$src$core$xml(r,a);var f=a.getBlocksBoundingBox();if(r=t.domToWorkspace$$module$build$src$core$xml(r,a),f&&f.top!==f.bottom){var S=f.bottom;f=a.RTL?f.right:f.left;var k=1/0;let j=-1/0,_e=1/0;for(let Ue=0;Ue<r.length;Ue++){const Wt=a.getBlockById(r[Ue]).getRelativeToSurfaceXY();Wt.y<_e&&(_e=Wt.y),Wt.x<k&&(k=Wt.x),Wt.x>j&&(j=Wt.x)}for(S=S-_e+10,f=a.RTL?f-j:f-k,k=0;k<r.length;k++)a.getBlockById(r[k]).moveBy(f,S,["create"])}return r},t.domToBlock$$module$build$src$core$xml=function(r,a){return r=ro(r,a),a.rendered&&Ei(),r},ro=function(r,a){t.disable$$module$build$src$core$events$utils();var f=a.getAllVariables();let S;try{if(S=ph(r,a),a.rendered){const k=S,j=S.getDescendants(!1);k.setConnectionTracking(!1);for(let _e=j.length-1;0<=_e;_e--)j[_e].initSvg();for(let _e=j.length-1;0<=_e;_e--)j[_e].queueRender();setTimeout(function(){k.disposed||k.setConnectionTracking(!0)},1),a.resizeContents()}else{const k=S.getDescendants(!1);for(let j=k.length-1;0<=j;j--)k[j].initModel()}}finally{t.enable$$module$build$src$core$events$utils()}if(ie()){for(r=Xl(a,f),a=0;a<r.length;a++)f=r[a],pe(new(ke(mo))(f));pe(new(ke(t.CREATE$$module$build$src$core$events$utils))(S))}return S},Pu=function(r,a){for(let S=0;S<r.children.length;S++){var f=r.children[S];const k=f.getAttribute("type"),j=f.getAttribute("id");if(f=f.textContent,!f)break;a.createVariable(f,k,j)}},aa=function(r){const a={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let f=0;f<r.children.length;f++){const S=r.children[f];if(S.nodeType!==Dp.TEXT_NODE)switch(S.nodeName.toLowerCase()){case"mutation":a.mutation.push(S);break;case"comment":a.comment.push(S);break;case"data":a.data.push(S);break;case"title":case"field":a.field.push(S);break;case"value":case"statement":a.input.push(S);break;case"next":a.next.push(S);break;default:console.warn("Ignoring unknown tag: "+S.nodeName)}}return a},vu=function(r,a){let f=!1;for(let S=0;S<r.length;S++){const k=r[S];a.domToMutation&&(a.domToMutation(k),a.initSvg&&(f=!0))}return f},nr=function(r,a){for(let S=0;S<r.length;S++){var f=r[S];const k=f.textContent,j=f.getAttribute("pinned")==="true";let _e;const Ue=parseInt((_e=f.getAttribute("w"))!=null?_e:"50",10);let Wt;f=parseInt((Wt=f.getAttribute("h"))!=null?Wt:"50",10),a.setCommentText(k);const Hn=a.getIcon(Vo.COMMENT);isNaN(Ue)||isNaN(f)||Hn.setBubbleSize(new qs(Ue,f)),Hn.setBubbleVisible(j),setTimeout(()=>Hn.setBubbleVisible(j),1)}},Un=function(r,a){for(let f=0;f<r.length;f++)a.data=r[f].textContent},Ss=function(r,a){for(let f=0;f<r.length;f++){const S=r[f],k=S.getAttribute("name");k?Oa(a,k,S):console.warn(`Ignoring unnamed field in block ${a.type}`)}},io=function(r){let a=null,f=null;for(let S=0;S<r.childNodes.length;S++){const k=r.childNodes[S];Uu(k)&&(k.nodeName.toLowerCase()==="block"?a=k:k.nodeName.toLowerCase()==="shadow"&&(f=k))}return{childBlockElement:a,childShadowElement:f}},Fu=function(r,a,f,S){for(let j=0;j<r.length;j++){var k=r[j];const _e=k.getAttribute("name"),Ue=_e?f.getInput(_e):null;if(!Ue){console.warn("Ignoring non-existent input "+_e+" in block "+S);break}if(k=io(k),k.childBlockElement){if(!Ue.connection)throw TypeError("Input connection does not exist.");ph(k.childBlockElement,a,Ue.connection,!1)}if(k.childShadowElement){let Wt;(Wt=Ue.connection)==null||Wt.setShadowDom(k.childShadowElement)}}},yu=function(r,a,f){for(let S=0;S<r.length;S++){const k=io(r[S]);if(k.childBlockElement){if(!f.nextConnection)throw TypeError("Next statement does not exist.");if(f.nextConnection.isConnected())throw TypeError("Next statement is already connected.");ph(k.childBlockElement,a,f.nextConnection,!0)}k.childShadowElement&&f.nextConnection&&f.nextConnection.setShadowDom(k.childShadowElement)}},ph=function(r,a,f,S){var k;const j=r.getAttribute("type");if(!j)throw TypeError("Block type unspecified: "+r.outerHTML);var _e=(k=r.getAttribute("id"))!=null?k:void 0;k=a.newBlock(j,_e),_e=aa(r);const Ue=vu(_e.mutation,k);if(nr(_e.comment,k),Un(_e.data,k),f)if(S)if(k.previousConnection)f.connect(k.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(k.outputConnection)f.connect(k.outputConnection);else if(k.previousConnection)f.connect(k.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(Ss(_e.field,k),Fu(_e.input,a,k,j),yu(_e.next,a,k),Ue&&k.initSvg(),(a=r.getAttribute("inline"))&&k.setInputsInline(a==="true"),(a=r.getAttribute("disabled"))&&k.setEnabled(a!=="true"&&a!=="disabled"),(a=r.getAttribute("deletable"))&&k.setDeletable(a==="true"),(a=r.getAttribute("movable"))&&k.setMovable(a==="true"),(a=r.getAttribute("editable"))&&k.setEditable(a==="true"),(a=r.getAttribute("collapsed"))&&k.setCollapsed(a==="true"),r.nodeName.toLowerCase()==="shadow"){for(r=k.getChildren(!1),a=0;a<r.length;a++)if(!r[a].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");k.setShadow(!0)}return k},Oa=function(r,a,f){const S=r.getField(a);S?S.fromXml(f):console.warn("Ignoring non-existent field "+a+" in block "+r.type)},la=function(r){for(let a=0;a<r.childNodes.length;a++){const f=r.childNodes[a];if(f.nodeName.toLowerCase()==="next"){r.removeChild(f);break}}},Uu=function(r){return r.nodeType===Dp.ELEMENT_NODE},br=function(r){return r.saveState!==void 0&&r.loadState!==void 0},Ms=function(r,a){i(Bt.SERIALIZER,r,a)},vi=function(r){o(Bt.SERIALIZER,r)},xi=function(r,{addCoordinates:a=!1,addInputBlocks:f=!0,addNextBlocks:S=!0,doFullSerialization:k=!0,saveIds:j=!0}={}){if(r.isInsertionMarker())return null;const _e={type:r.type,id:j?r.id:void 0};return a&&Zr(r,_e),ua(r,_e),bu(r,_e,k),$o(r,_e,k),Tu(r,_e,k),f&&nl(r,_e,k,j),S&&Bi(r,_e,k,j),_e},ua=function(r,a){r.isCollapsed()&&(a.collapsed=!0),r.isEnabled()||(a.enabled=!1),r.isOwnDeletable()||(a.deletable=!1),r.isOwnMovable()||(a.movable=!1),r.isOwnEditable()||(a.editable=!1),r.inputsInline!==void 0&&r.inputsInline!==r.inputsInlineDefault&&(a.inline=r.inputsInline),r.data&&(a.data=r.data)},Zr=function(r,a){const f=r.workspace;r=r.getRelativeToSurfaceXY(),a.x=Math.round(f.RTL?f.getWidth()-r.x:r.x),a.y=Math.round(r.y)},bu=function(r,a,f){r.saveExtraState?(r=r.saveExtraState(f),r!==null&&(a.extraState=r)):r.mutationToDom&&(r=r.mutationToDom(),r!==null&&(a.extraState=Ki(r).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},$o=function(r,a,f){const S=Object.create(null);for(const k of r.getIcons())br(k)&&(r=k.saveState(f))&&(S[k.getType().toString()]=r);Object.keys(S).length&&(a.icons=S)},Tu=function(r,a,f){const S=Object.create(null);for(let k=0;k<r.inputList.length;k++){const j=r.inputList[k];for(let _e=0;_e<j.fieldRow.length;_e++){const Ue=j.fieldRow[_e];Ue.isSerializable()&&(S[Ue.name]=Ue.saveState(f))}}Object.keys(S).length&&(a.fields=S)},nl=function(r,a,f,S){const k=Object.create(null);for(let j=0;j<r.inputList.length;j++){const _e=r.inputList[j];if(!_e.connection)continue;const Ue=wi(_e.connection,f,S);Ue&&(k[_e.name]=Ue)}Object.keys(k).length&&(a.inputs=k)},Bi=function(r,a,f,S){r.nextConnection&&(r=wi(r.nextConnection,f,S))&&(a.next=r)},wi=function(r,a,f){const S=r.getShadowState(!0);if(r=r.targetBlock(),!S&&!r)return null;const k=Object.create(null);return S&&(k.shadow=S),r&&!r.isShadow()&&(k.block=xi(r,{doFullSerialization:a,saveIds:f})),k},zn=function(r,a,{recordUndo:f=!1}={}){return r=$i(r,a,{recordUndo:f}),a.rendered&&Ei(),r},$i=function(r,a,{parentConnection:f,isShadow:S=!1,recordUndo:k=!1}={}){const j=ce();ge(k),(k=t.getGroup$$module$build$src$core$events$utils())||t.setGroup$$module$build$src$core$events$utils(!0),t.disable$$module$build$src$core$events$utils();let _e;try{_e=Xr(r,a,{parentConnection:f,isShadow:S})}finally{t.enable$$module$build$src$core$events$utils()}if(ie()&&pe(new(ke(t.CREATE$$module$build$src$core$events$utils))(_e)),t.setGroup$$module$build$src$core$events$utils(k),ge(j),a.rendered){const Ue=_e;setTimeout(()=>{Ue.disposed||Ue.setConnectionTracking(!0)},1)}return _e},Xr=function(r,a,{parentConnection:f,isShadow:S=!1}={}){if(!r.type)throw new u_(r);const k=a.newBlock(r.type,r.id);return k.setShadow(S),od(k,r),Su(k,r),Gi(k,r),La(f,k,r),fh(k,r),cr(k,r),Jo(k,r),ad(k,r),Lc(k,a.rendered),k},od=function(r,a){let f=a.x===void 0?0:a.x;a=a.y===void 0?0:a.y;const S=r.workspace;f=S.RTL?S.getWidth()-f:f,r.moveBy(f,a)},Su=function(r,a){a.collapsed&&r.setCollapsed(!0),a.deletable===!1&&r.setDeletable(!1),a.movable===!1&&r.setMovable(!1),a.editable===!1&&r.setEditable(!1),a.enabled===!1&&r.setEnabled(!1),a.inline!==void 0&&r.setInputsInline(a.inline),a.data!==void 0&&(r.data=a.data)},Gi=function(r,a){a.extraState&&(r.loadExtraState?r.loadExtraState(a.extraState):r.domToMutation&&r.domToMutation(t.textToDom$$module$build$src$core$utils$xml(a.extraState)))},La=function(r,a,f){if(r){if(r.getSourceBlock().isShadow()&&!a.isShadow())throw new hv(f);if(r.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var S=a.outputConnection;if(!S)throw new Qf("output",a,f)}else if(S=a.previousConnection,!S)throw new Qf("previous",a,f);if(!r.connect(S)){const k=a.workspace.connectionChecker;throw new u0(k.getErrorMessage(k.canConnectWithReason(S,r,!1),S,r),r.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",a,f)}}},fh=function(r,a){if(a.icons){var f=Object.keys(a.icons);for(const k of f){f=a.icons[k];var S=r.getIcon(k);if(!S){if(S=d(Bt.ICON,k,!1),!S)throw new Np(k,r,a);S=new S(r),r.addIcon(S)}br(S)&&S.loadState(f)}}},cr=function(r,a){if(a.fields){var f=Object.keys(a.fields);for(let S=0;S<f.length;S++){const k=f[S],j=a.fields[k],_e=r.getField(k);_e?_e.loadState(j):console.warn(`Ignoring non-existant field ${k} in block ${r.type}`)}}},Jo=function(r,a){if(a.inputs){var f=Object.keys(a.inputs);for(let S=0;S<f.length;S++){const k=f[S],j=r.getInput(k);if(!j||!j.connection)throw new Qf(k,r,a);tp(j.connection,a.inputs[k])}}},ad=function(r,a){if(a.next){if(!r.nextConnection)throw new Qf("next",r,a);tp(r.nextConnection,a.next)}},tp=function(r,a){a.shadow&&r.setShadowState(a.shadow),a.block&&Xr(a.block,r.getSourceBlock().workspace,{parentConnection:r})},Lc=function(r,a){if(a){r.setConnectionTracking(!1),r.initSvg(),r.queueRender();for(const f of r.getIcons())f.onLocationChange(r.getRelativeToSurfaceXY())}else r.initModel()},np=function(r){const a=r.workspace,f=t.config$$module$build$src$core$config.snapRadius,S=r.getRelativeToSurfaceXY(),k=new fn(0,0),j=a.getAllBlocks(!1).filter(_e=>_e.id!=r.id).map(_e=>_e.getRelativeToSurfaceXY());for(;Ip(fn.sum(S,k),j)||ff(r,k,f);)a.RTL?k.translate(-f,2*f):k.translate(f,2*f);r.moveTo(fn.sum(S,k))},Ip=function(r,a){return a.some(f=>1>=Math.abs(f.x-r.x)&&1>=Math.abs(f.y-r.y))},ff=function(r,a,f){return r.getConnections_(!1).some(S=>!!S.closest(f,a).connection)},Sd=function(r){return xe("Blockly.clipboard.copy","v11","v12","myCopyable.toCopyData()"),m0.copyInternal(r)},Kl=function(r){const a=r.toCopyData();ia=a;let f;return d_=(f=r.workspace)!=null?f:null,a},Is=function(r,a,f){return r&&a?zu(r,a,f):ia&&d_?zu(ia,d_):null},zu=function(r,a,f){let S;a=(S=a.getRootWorkspace())!=null?S:a;let k,j;return(j=(k=p(Bt.PASTER,r.paster,!1))==null?void 0:k.paste(r,a,f))!=null?j:null},mh=function(r){return xe("Blockly.clipboard.duplicate","v11","v12","Blockly.clipboard.paste(myCopyable.toCopyData(), myWorkspace)"),m0.duplicateInternal(r)},Da=function(r){const a=r.toCopyData();return a?Is(a,r.workspace):null},ai=function(r,a){r.setAttribute(dv,a)},Sr=function(r,a,f){Array.isArray(f)&&(f=f.join(" ")),r.setAttribute(Ny+a,`${f}`)},so=function(){return fd},Na=function(r){if(fd=r,r===null){let a;(a=document.querySelector("."+Fp))==null||a.remove()}},Fo=function(){document.querySelector("."+Fp)||(fd=document.createElement("div"),fd.className=Fp,(N()||document.body).appendChild(fd))},Jl=function(r,a,f){ql(),Yh=r,nm=f,(r=fd)&&(r.style.direction=a?"rtl":"ltr",r.style.display="block",a=I(),Up=a.getRenderer().getClassName(),wf=a.getTheme().getClassName(),Up&&Be(r,Up),wf&&Be(r,wf))},ql=function(){if(Oh()){Yh=null;var r=fd;r&&(r.style.display="none",r.style.left="",r.style.top="",nm&&nm(),nm=null,r.textContent="",Up&&(bt(r,Up),Up=""),wf&&(bt(r,wf),wf=""),I().markFocused())}},Oh=function(){return!!Yh},Hr=function(r){Yh===r&&ql()},Ci=function(r,a,f){fd.style.left=r+"px",fd.style.top=a+"px",fd.style.height=f+"px"},vr=function(r,a,f,S){const k=ca(r,a,f);r=Wi(r,a,f,S),0>k?Ci(r,0,f.height+k):Ci(r,k,f.height)},Wi=function(r,a,f,S){return S?Math.min(Math.max(a.right-f.width,r.left),r.right-f.width):Math.max(Math.min(a.left,r.right-f.width),r.left)},ca=function(r,a,f){return a.bottom+f.height>=r.bottom?a.top-f.height:a.bottom},Eu=function(r){return!(r==null||!r.repositionForWindowResize)},rp=function(){Eu(Yh)&&Yh.repositionForWindowResize()||ql()},ip=function(){return Vm},ld=function(r){Vm=r},Hu=function(r,a,f){if(Jl(pv,f,Ps),a.length){var S=rl(a,f);$g=S,Dc(S,r,f),setTimeout(function(){S.focus()},1),Vm=null}else Ql()},rl=function(r,a){const f=new wg;f.setRole(nh.MENU);for(let S=0;S<r.length;S++){const k=r[S],j=new Pp(k.text);j.setRightToLeft(a),j.setRole(nh.MENUITEM),f.addChild(j),j.setEnabled(k.enabled),k.enabled&&j.onAction(function(){Ql(),requestAnimationFrame(()=>{setTimeout(()=>{k.callback(k.scope)},0)})},{})}return f},Dc=function(r,a,f){const S=be();a=new Ri(a.clientY+S.top,a.clientY+S.top,a.clientX+S.left,a.clientX+S.left),Lh(r);const k=r.getSize();f&&(a.left+=k.width,a.right+=k.width,S.left+=k.width,S.right+=k.width),vr(S,a,k,f),r.focus()},Lh=function(r){var a=so();if(!a)throw Error("Attempting to create a context menu when widget div is null");a=r.render(a),Be(a,"blocklyContextMenu"),Ce(a,"contextmenu",null,Gu),r.focus()},Gu=function(r){r.preventDefault(),r.stopPropagation()},Ql=function(){Hr(pv),Vm=null},Ps=function(){$g&&($g.dispose(),$g=null)},t.callbackFactory$$module$build$src$core$contextmenu=function(r,a){return()=>{t.disable$$module$build$src$core$events$utils();let f;try{f=a instanceof Element?ro(a,r.workspace):$i(a,r.workspace);const S=r.getRelativeToSurfaceXY();S.x=r.RTL?S.x-t.config$$module$build$src$core$config.snapRadius:S.x+t.config$$module$build$src$core$config.snapRadius,S.y+=2*t.config$$module$build$src$core$config.snapRadius,f.moveBy(S.x,S.y)}finally{t.enable$$module$build$src$core$events$utils()}return ie()&&!f.isShadow()&&pe(new(ke(t.CREATE$$module$build$src$core$events$utils))(f)),f.select(),f}},Zl=function(r){return{text:t.Msg$$module$build$src$core$msg.REMOVE_COMMENT,enabled:!0,callback:function(){t.setGroup$$module$build$src$core$events$utils(!0),r.dispose(),t.setGroup$$module$build$src$core$events$utils(!1)}}},Dh=function(r){return{text:t.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){const a=r.toCopyData();a&&Is(a,r.workspace)}}},Nc=function(r,a){const f={enabled:!0};return f.text=t.Msg$$module$build$src$core$msg.ADD_COMMENT,f.callback=function(){const S=new Pl(r,t.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT,Pl.DEFAULT_SIZE,Pl.DEFAULT_SIZE);var k=r.getInjectionDiv().getBoundingClientRect();k=new fn(a.clientX-k.left,a.clientY-k.top);const j=r.getOriginOffsetInPixels();k=fn.difference(k,j),k.scale(1/r.scale),S.moveBy(k.x,k.y),r.rendered&&(S.initSvg(),S.render(),S.select())},f},Bc=function(r){return r*Math.PI/180},ns=function(r){return 180*r/Math.PI},Nr=function(r,a,f){if(f<r){const S=f;f=r,r=S}return Math.max(r,Math.min(a,f))},wl=function(){document.querySelector(".blocklyDropDownDiv")||(bi=document.createElement("div"),bi.className="blocklyDropDownDiv",(N()||document.body).appendChild(bi),Gp=document.createElement("div"),Gp.className="blocklyDropDownContent",bi.appendChild(Gp),sm=document.createElement("div"),sm.className="blocklyDropDownArrow",bi.appendChild(sm),bi.style.opacity="0",bi.style.transition="transform "+$f+"s, opacity "+$f+"s",bi.addEventListener("focusin",function(){Be(bi,"blocklyFocused")}),bi.addEventListener("focusout",function(){bt(bi,"blocklyFocused")}))},Ba=function(r){om=r},eu=function(){return Cf},xu=function(){return Gp},gh=function(){Gp.textContent="",Gp.style.width=""},Ed=function(r,a){bi.style.backgroundColor=r,bi.style.borderColor=a},hi=function(r,a,f,S){return Ot(We(a),r,f,S)},ve=function(r,a,f){return Ag=!0,Ot(Ne(r),r,a,f)},We=function(r){var a=r.getSvgRoot();const f=r.workspace.scale,S=r.height*f;return r=r.width*f,a=Dn(a),new Ri(a.y,a.y+S,a.x,a.x+r)},Ne=function(r){return r=r.getScaledBBox(),new Ri(r.top,r.bottom,r.left,r.right)},Ot=function(r,a,f,S){const k=r.left+(r.right-r.left)/2,j=r.bottom;r=r.top,S&&(r+=S),S=a.getSourceBlock();let _e=S.workspace;for(;_e.options.parentWorkspace;)_e=_e.options.parentWorkspace;return Ba(_e.getParentSvg().parentNode),en(a,S.RTL,k,j,k,r,f)},en=function(r,a,f,S,k,j,_e){return Cf=r,zp=_e||null,bi.style.direction=a?"rtl":"ltr",r=I(),Hp=r.getRenderer().getClassName(),im=r.getTheme().getClassName(),Hp&&Be(bi,Hp),im&&Be(bi,im),Pi(f,S,k,j)},Cn=function(r,a,f,S){return r=Br(r,f.left,f.right,S.width),{initialX:r.divX,initialY:a,finalX:r.divX,finalY:a+Xm,arrowX:r.arrowX,arrowY:-(jm/2+Cg),arrowAtTop:!0,arrowVisible:!0}},jn=function(r,a,f,S){return r=Br(r,f.left,f.right,S.width),{initialX:r.divX,initialY:a-S.height,finalX:r.divX,finalY:a-S.height-Xm,arrowX:r.arrowX,arrowY:S.height-2*Cg-jm/2,arrowAtTop:!1,arrowVisible:!0}},mn=function(r,a,f){return r=Br(r,a.left,a.right,f.width),{initialX:r.divX,initialY:0,finalX:r.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Br=function(r,a,f,S){return a=Nr(a,r-S/2,f-S),r=r-jm/2-a,f=fv,r=Nr(f,r,S-f-jm),{arrowX:r,divX:a}},oo=function(){return!!Cf},yi=function(r,a){return Cf===r?(a?il():ao(),!0):!1},ao=function(){bi.style.transform="translate(0, 0)",bi.style.opacity="0",Ym=setTimeout(function(){il()},1e3*$f),zp&&(zp(),zp=null)},il=function(){oo()&&(Ym&&clearTimeout(Ym),bi.style.transform="",bi.style.left="",bi.style.top="",bi.style.opacity="0",bi.style.display="none",bi.style.backgroundColor="",bi.style.borderColor="",zp&&(zp(),zp=null),gh(),Cf=null,Hp&&(bt(bi,Hp),Hp=""),im&&(bt(bi,im),im=""),I().markFocused())},Pi=function(r,a,f,S){r=v.getPositionMetrics(r,a,f,S),r.arrowVisible?(sm.style.display="",sm.style.transform="translate("+r.arrowX+"px,"+r.arrowY+"px) rotate(45deg)",sm.setAttribute("class",r.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):sm.style.display="none",a=Math.floor(r.initialX),f=Math.floor(r.initialY),S=Math.floor(r.finalX);const k=Math.floor(r.finalY);return bi.style.left=a+"px",bi.style.top=f+"px",bi.style.display="block",bi.style.opacity="1",bi.style.transform="translate("+(S-a)+"px,"+(k-f)+"px)",!!r.arrowAtTop},gs=function(){if(Cf){var r=Cf.getSourceBlock();r=Ag?Ne(Cf):We(r);const a=r.left+(r.right-r.left)/2;Pi(a,r.bottom,a,r.top)}else ao()},wu=function(r){if(!(100<r.getDescendants(!1).length)){var a=r.workspace,f=r.getSvgRoot();a.getAudioManager().play("delete");var S=a.getSvgXY(f);f=f.cloneNode(!0),f.setAttribute("transform","translate("+S.x+","+S.y+")"),a.getParentSvg().appendChild(f),Xn(f,{x:S.x,y:S.y,width:r.width,height:r.height},a.RTL,new Date,a.scale)}},Xn=function(r,a,f,S,k){const j=(new Date().getTime()-S.getTime())/150;1<j?pt(r):(r.setAttribute("transform","translate("+(a.x+(f?-1:1)*a.width*k/2*j)+","+(a.y+a.height*k*j)+") scale("+(1-j)*k+")"),setTimeout(Xn,10,r,a,f,S,k))},ha=function(r){var a=r.workspace;const f=a.scale;if(a.getAudioManager().play("click"),!(1>f)){var S=a.getSvgXY(r.getSvgRoot());r.outputConnection?(S.x+=(r.RTL?3:-3)*f,S.y+=13*f):r.previousConnection&&(S.x+=(r.RTL?-23:23)*f,S.y+=3*f);var k=re(Ge.CIRCLE,{cx:S.x,cy:S.y,r:0,fill:"none",stroke:"#888","stroke-width":10},a.getParentSvg());r=re(Ge.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*f},k),a=re(Ge.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},k),r.beginElement(),a.beginElement(),setTimeout(()=>void pt(k),150)}},js=function(r){if(Pa(),r.workspace.getAudioManager().play("disconnect"),!(1>r.workspace.scale)){var a=r.getHeightWidth().height;a=Math.atan(10/a)/Math.PI*180,r.RTL||(a*=-1),F=r,Fs(r,a,new Date)}},Fs=function(r,a,f){const S=(new Date().getTime()-f.getTime())/200;let k="";1>=S&&(k=`skewX(${Math.round(Math.sin(S*Math.PI*3)*(1-S)*a)})`,R=setTimeout(Fs,10,r,a,f)),r.getSvgRoot().setAttribute("transform",`${r.getTranslation()} ${k}`)},Pa=function(){F&&(R&&(clearTimeout(R),R=null),F.getSvgRoot().setAttribute("transform",F.getTranslation()),F=null)},Nh=function(r,a){return xe("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),r.startsWith(a)},_h=function(r){return r.length?r.reduce(function(a,f){return a.length<f.length?a:f}).length:0},hc=function(r,a){if(!r.length)return 0;if(r.length===1)return r[0].length;let f=0;a=a||_h(r);let S;for(S=0;S<a;S++){for(var k=r[0][S],j=1;j<r.length;j++)if(k!==r[j][S])return f;k===" "&&(f=S+1)}for(k=1;k<r.length;k++)if((j=r[k][S])&&j!==" ")return f;return a},qo=function(r,a){if(!r.length)return 0;if(r.length===1)return r[0].length;let f=0;a=a||_h(r);let S;for(S=0;S<a;S++){for(var k=r[0].substr(-S-1,1),j=1;j<r.length;j++)if(k!==r[j].substr(-S-1,1))return f;k===" "&&(f=S+1)}for(k=1;k<r.length;k++)if((j=r[k].charAt(r[k].length-S-1))&&j!==" ")return f;return a},t.wrap$$module$build$src$core$utils$string=function(r,a){r=r.split(`
`);for(let f=0;f<r.length;f++)r[f]=Pc(r[f],a);return r.join(`
`)},Pc=function(r,a){if(r.length<=a)return r;const f=r.trim().split(/\s+/);for(var S=0;S<f.length;S++)f[S].length>a&&(a=f[S].length);var k=-1/0;let j,_e=1;do{S=k,j=r,r=[],k=f.length/_e;let Ue=1;for(let Wt=0;Wt<f.length-1;Wt++)Ue<(Wt+1.5)/k?(Ue++,r[Wt]=!0):r[Wt]=!1;r=Fa(f,r,a),k=Bh(f,r,a),r=Ph(f,r),_e++}while(k>S);return j},Bh=function(r,a,f){const S=[0],k=[];for(var j=0;j<r.length;j++)S[S.length-1]+=r[j].length,a[j]===!0?(S.push(0),k.push(r[j].charAt(r[j].length-1))):a[j]===!1&&S[S.length-1]++;for(r=Math.max(...S),a=0,j=0;j<S.length;j++)a-=2*Math.pow(Math.abs(f-S[j]),1.5),a-=Math.pow(r-S[j],1.5),".?!".indexOf(k[j])!==-1?a+=f/3:",;)]}".indexOf(k[j])!==-1&&(a+=f/4);return 1<S.length&&S[S.length-1]<=S[S.length-2]&&(a+=.5),a},Fa=function(r,a,f){let S=Bh(r,a,f),k;for(let j=0;j<a.length-1;j++){if(a[j]===a[j+1])continue;const _e=[].concat(a);_e[j]=!_e[j],_e[j+1]=!_e[j+1];const Ue=Bh(r,_e,f);Ue>S&&(S=Ue,k=_e)}return k?Fa(r,k,f):a},Ph=function(r,a){const f=[];for(let S=0;S<r.length;S++)f.push(r[S]),a[S]!==void 0&&f.push(a[S]?`
`:" ");return f.join("")},t.isNumber$$module$build$src$core$utils$string=function(r){return/^\s*-?\d+(\.\d+)?\s*$/.test(r)},dc=function(r){Kn=r},Wu=function(){return Kn},ud=function(){return Zn},Qo=function(){return Ou},lo=function(r){if(r=$l(r)){for(r=r.tooltip;typeof r=="function";)r=r();if(typeof r!="string")throw Error("Tooltip function must return a string.");return r}return""},$l=function(r){for(;r&&r.tooltip;){if(typeof r.tooltip=="string"||typeof r.tooltip=="function")return r;r=r.tooltip}return null},Fh=function(){document.querySelector(".blocklyTooltipDiv")||(Ou=document.createElement("div"),Ou.className="blocklyTooltipDiv",(N()||document.body).appendChild(Ou))},Fi=function(r){r.mouseOverWrapper_=je(r,"pointerover",null,Vu),r.mouseOutWrapper_=je(r,"pointerout",null,tu),r.addEventListener("pointermove",Fc,!1)},cd=function(r){r&&(it(r.mouseOverWrapper_),it(r.mouseOutWrapper_),r.removeEventListener("pointermove",Fc))},Vu=function(r){Ro||(r=$l(r.currentTarget),Qn!==r&&(Cl(),dr=null,Qn=r),clearTimeout(ht))},tu=function(r){Ro||(ht=setTimeout(function(){dr=Qn=null,Cl()},1),clearTimeout(xt),xt=0)},Fc=function(r){if(Qn&&Qn.tooltip&&!Ro)if(Zn){const a=yn-r.pageX;r=sr-r.pageY,Math.sqrt(a*a+r*r)>cs&&Cl()}else dr!==Qn&&(clearTimeout(xt),yn=r.pageX,sr=r.pageY,xt=setTimeout(Rp,Wp))},xd=function(){dr=Qn=null,Cl()},Cl=function(){Zn&&(Zn=!1,Ou&&(Ou.style.display="none")),xt&&(clearTimeout(xt),xt=0)},wd=function(){Cl(),Ro=!0},Uh=function(){Ro=!1},ei=function(){Ou&&Qn&&(typeof Kn=="function"?Kn(Ou,Qn):Ai())},Ai=function(){var r=lo(Qn);r=t.wrap$$module$build$src$core$utils$string(r,wt),r=r.split(`
`);for(let a=0;a<r.length;a++){const f=document.createElement("div");f.appendChild(document.createTextNode(r[a])),Ou.appendChild(f)}},mf=function(r){const a=document.documentElement.clientWidth,f=document.documentElement.clientHeight;let S=yn;S=r?S-(Ir+Ou.offsetWidth):S+Ir;let k=sr+Fl;return k+Ou.offsetHeight>f+window.scrollY&&(k-=Ou.offsetHeight+2*Fl),r?S=Math.max(g0-window.scrollX,S):S+Ou.offsetWidth>a+window.scrollX-2*g0&&(S=a-Ou.offsetWidth-2*g0),{x:S,y:k}},Rp=function(){if(!Ro&&(dr=Qn,Ou)){Ou.textContent="",ei();var r=Qn.RTL;Ou.style.direction=r?"rtl":"ltr",Ou.style.display="block",Zn=!0;var{x:a,y:f}=mf(r);Ou.style.left=a+"px",Ou.style.top=f+"px"}},Al=function(r,a){for(const f in a)r[f]=a[f]!==null&&typeof a[f]=="object"?Al(r[f]||Object.create(null),a[f]):a[f];return r},nu=function(r){return r.bubbleIsVisible!==void 0&&r.setBubbleVisible!==void 0},ju=function(){return Py},Xu=function(r){Py=r},vh=function(){return rh},sl=function(r){rh=r},Zo=function(r){r=`${r}`.toLowerCase().trim();var a=V1[r];if(a||(a=r.substring(0,2)==="0x"?"#"+r.substring(2):r,a=a[0]==="#"?a:"#"+a,/^#[0-9a-f]{6}$/.test(a)))return a;if(/^#[0-9a-f]{3}$/.test(a))return["#",a[1],a[1],a[2],a[2],a[3],a[3]].join("");var f=r.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return f&&(r=Number(f[1]),a=Number(f[2]),f=Number(f[3]),0<=r&&256>r&&0<=a&&256>a&&0<=f&&256>f)?Ml(r,a,f):null},Ml=function(r,a,f){return a=r<<16|a<<8|f,16>r?"#"+(16777216|a).toString(16).substr(1):"#"+a.toString(16)},Uc=function(r){return r=Zo(r),r?(r=parseInt(r.substr(1),16),[r>>16,r>>8&255,r&255]):[0,0,0]},Il=function(r,a,f){let S=0,k=0,j=0;if(a===0)j=k=S=f;else{const _e=Math.floor(r/60),Ue=r/60-_e;r=f*(1-a);const Wt=f*(1-a*Ue);switch(a=f*(1-a*(1-Ue)),_e){case 1:S=Wt,k=f,j=r;break;case 2:S=r,k=f,j=a;break;case 3:S=r,k=Wt,j=f;break;case 4:S=a,k=r,j=f;break;case 5:S=f,k=r,j=Wt;break;case 6:case 0:S=f,k=a,j=r}}return Ml(Math.floor(S),Math.floor(k),Math.floor(j))},zc=function(r,a,f){return r=Zo(r),!r||(a=Zo(a),!a)?null:(r=Uc(r),a=Uc(a),Ml(Math.round(a[0]+f*(r[0]-a[0])),Math.round(a[1]+f*(r[1]-a[1])),Math.round(a[2]+f*(r[2]-a[2]))))},pc=function(r){return Il(r,Py,255*rh)},$d=function(r,a,f){const S=[];var k=r.split("");k.push("");var j=0;r=[];let _e=null;for(let Hn=0;Hn<k.length;Hn++){var Ue=k[Hn];if(j===0)if(Ue==="%")(j=r.join(""))&&S.push(j),r.length=0,j=1;else if(f&&Ue===`
`){const _l=r.join("");_l&&S.push(_l),r.length=0,S.push(Ue)}else r.push(Ue);else if(j===1)Ue==="%"?(r.push(Ue),j=0):a&&"0"<=Ue&&"9">=Ue?(j=2,_e=Ue,(Ue=r.join(""))&&S.push(Ue),r.length=0):Ue==="{"?j=3:(r.push("%",Ue),j=0);else if(j===2)if("0"<=Ue&&"9">=Ue)_e+=Ue;else{var Wt=void 0;S.push(parseInt((Wt=_e)!=null?Wt:"",10)),Hn--,j=0}else j===3&&(Ue===""?(r.splice(0,0,"%{"),Hn--,j=0):Ue!=="}"?r.push(Ue):(j=r.join(""),/[A-Z]\w*/i.test(j)?(Ue=j.toUpperCase(),(Ue=Ue.startsWith("BKY_")?Ue.substring(4):null)&&Ue in t.Msg$$module$build$src$core$msg?(j=t.Msg$$module$build$src$core$msg[Ue],typeof j=="string"?Array.prototype.push.apply(S,$d(j,a,f)):a?S.push(`${j}`):S.push(j)):S.push("%{"+j+"}")):S.push("%{"+j+"}"),j=r.length=0))}for((a=r.join(""))&&S.push(a),Wt=[],r.length=0,k=0;k<S.length;k++)typeof S[k]!="string"||f&&S[k]===`
`?((a=r.join(""))&&Wt.push(a),r.length=0,Wt.push(S[k])):r.push(S[k]);return(a=r.join(""))&&Wt.push(a),r.length=0,Wt},Ua=function(r){return $d(r,!0,!0)},Gr=function(r){return typeof r!="string"?r:(r=$d(r,!1,!1),r.length?String(r[0]):"")},ol=function(r){let a=!0;const f=t.Msg$$module$build$src$core$msg,S=r.match(/%{BKY_[A-Z]\w*}/gi);if(S)for(let k=0;k<S.length;k++){const j=S[k].toUpperCase();f[j.slice(6,-1)]===void 0&&(console.warn("No message string for "+S[k]+" in "+r),a=!1)}return a},Ji=function(r){const a=typeof r=="string"?Gr(r):r;var f=Number(a);if(!isNaN(f)&&0<=f&&360>=f)return{hue:f,hex:Il(f,ju(),255*vh())};if(f=Zo(a))return{hue:null,hex:f};throw f='Invalid colour: "'+a+'"',r!==a&&(f+=' (from "'+r+'")'),Error(f)},da=function(r){return r.getProcedureModel!==void 0&&r.doProcedureUpdate!==void 0&&r.isProcedureDef!==void 0},Y=function(r){return r.startPublishing!==void 0&&r.stopPublishing!==void 0},Es=function(r,a){i(Bt.FIELD,r,a)},pa=function(r){o(Bt.FIELD,r)},t.fromJson$$module$build$src$core$field_registry=function(r){return xc.fromJsonInternal(r)},xr=function(r){const a=p(Bt.FIELD,r.type);if(a){if(typeof a.fromJson!="function")throw new TypeError("returned Field was not a IRegistrableField");return a.fromJson(r)}return console.warn("Blockly could not create a field of type "+r.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},dn=function(r){let a=!1;const f=r.map(([_e,Ue])=>typeof _e=="string"?[Gr(_e),Ue]:(a=!0,[_e.alt!==null?Object.assign({},_e,{alt:Gr(_e.alt)}):Object.assign({},_e),Ue]));if(a||2>r.length)return{options:f};var S=f.map(([_e])=>_e),k=_h(S);r=hc(S,k);const j=qo(S,k);return!r&&!j||k<=r+j?{options:f}:(k=r?S[0].substring(0,r-1):void 0,S=j?S[0].substr(1-j):void 0,{options:kp(f,r,j),prefix:k,suffix:S})},kp=function(r,a,f){return r.map(([S,k])=>[S.substring(a,S.length-f),k])},al=function(r){if(!Array.isArray(r))throw TypeError("FieldDropdown options must be an array.");if(!r.length)throw TypeError("FieldDropdown options must not be an empty array.");let a=!1;for(let f=0;f<r.length;f++){const S=r[f];Array.isArray(S)?typeof S[1]!="string"?(a=!0,console.error("Invalid option["+f+"]: Each FieldDropdown option id must be a string. Found "+S[1]+" in: ",S)):S[0]&&typeof S[0]!="string"&&typeof S[0].src!="string"&&(a=!0,console.error("Invalid option["+f+"]: Each FieldDropdown option must have a string label or image description. Found"+S[0]+" in: ",S)):(a=!0,console.error("Invalid option["+f+"]: Each FieldDropdown option must be an array. Found: ",S))}if(a)throw TypeError("Found invalid FieldDropdown options.")},t.register$$module$build$src$core$extensions=function(r,a){if(typeof r!="string"||r.trim()==="")throw Error('Error: Invalid extension name "'+r+'"');if(y0[r])throw Error('Error: Extension "'+r+'" is already registered.');if(typeof a!="function")throw Error('Error: Extension "'+r+'" must be a function');y0[r]=a},t.registerMixin$$module$build$src$core$extensions=function(r,a){if(!a||typeof a!="object")throw Error('Error: Mixin "'+r+'" must be a object');t.register$$module$build$src$core$extensions(r,function(){this.mixin(a)})},t.registerMutator$$module$build$src$core$extensions=function(r,a,f,S){const k='Error when registering mutator "'+r+'": ';Gc(k,a);const j=ma(a,k);if(f&&typeof f!="function")throw Error(k+'Extension "'+r+'" is not a function');t.register$$module$build$src$core$extensions(r,function(){j&&this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(S||[],this)),this.mixin(a),f&&f.apply(this)})},Mi=function(r){li(r)?delete y0[r]:console.warn('No extension mapping for name "'+r+'" found to unregister')},li=function(r){return!!y0[r]},qi=function(r,a,f){const S=y0[r];if(typeof S!="function")throw Error('Error: Extension "'+r+'" not found.');let k;if(f?rs(r,a):k=ea(a),S.apply(a),f)Gc('Error after applying mutator "'+r+'": ',a);else if(!Cd(k,a))throw Error('Error when applying extension "'+r+'": mutation properties changed when applying a non-mutator extension.')},rs=function(r,a){if(ea(a).length)throw Error('Error: tried to apply mutation "'+r+'" to a block that already has mutator functions.  Block id: '+a.id)},Hc=function(r,a){return is(r.mutationToDom,r.domToMutation,a+" mutationToDom/domToMutation")},fa=function(r,a){return is(r.saveExtraState,r.loadExtraState,a+" saveExtraState/loadExtraState")},ma=function(r,a){return is(r.compose,r.decompose,a+" compose/decompose")},is=function(r,a,f){if(r&&a){if(typeof r!="function"||typeof a!="function")throw Error(f+" must be a function");return!0}if(!r&&!a)return!1;throw Error(f+"Must have both or neither functions")},Gc=function(r,a){const f=Hc(a,r),S=fa(a,r);if(!f&&!S)throw Error(r+"Mutations must contain either XML hooks, or JSON hooks, or both");ma(a,r)},ea=function(r){const a=[];return r.domToMutation!==void 0&&a.push(r.domToMutation),r.mutationToDom!==void 0&&a.push(r.mutationToDom),r.saveExtraState!==void 0&&a.push(r.saveExtraState),r.loadExtraState!==void 0&&a.push(r.loadExtraState),r.compose!==void 0&&a.push(r.compose),r.decompose!==void 0&&a.push(r.decompose),a},Cd=function(r,a){if(a=ea(a),a.length!==r.length)return!1;for(let f=0;f<a.length;f++)if(r[f]!==a[f])return!1;return!0},Ad=function(r){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")r();else{const a=setInterval(function(){document.readyState==="complete"&&(clearInterval(a),r())},10)}},t.buildTooltipForDropdown$$module$build$src$core$extensions=function(r,a){const f=[];return function(){f.indexOf(this.type)===-1&&(zh(this,r,a),f.push(this.type)),this.setTooltip((function(){const S=String(this.getFieldValue(r));return Gr(a[S])}).bind(this))}},zh=function(r,a,f){var S=r.getField(a);if(S instanceof wh&&!S.isOptionListDynamic()){S=S.getOptions();for(const[,k]of S)f[k]===void 0&&console.warn(`No tooltip mapping for value ${k} of field ${a} of block type ${r.type}.`)}},t.buildTooltipWithFieldText$$module$build$src$core$extensions=function(r,a){return function(){this.setTooltip((function(){const f=this.getField(a);return Gr(r).replace("%1",f?f.getText():"")}).bind(this))}},Us=function(){const r=this.tooltip;this.setTooltip((function(){const a=this.getParent();return a&&a.getInputsInline()&&a.tooltip||r}).bind(this))},Vn=function(r,a){return" "+r+","+a+" "},zs=function(r,a){return" "+r+a.join("")},Xs=function(r,a){return" M "+r+","+a+" "},Ui=function(r,a){return" m "+r+","+a+" "},ru=function(r,a){return" l "+r+","+a+" "},Uo=function(r){return" l"+r.join("")},Sn=function(r,a){return" "+r+" "+a+" "},di=function(r,a,f,S){return r+" "+f+" "+f+" "+a+S},pi=function(r,a){i(Bt.ICON,r.toString(),a)},Op=function(r){o(Bt.ICON,r)},yh=function(r){const a=r.getProcedureMap().getProcedures().filter(S=>!S.getReturnTypes()).map(S=>[S.getName(),S.getParameters().map(k=>k.getName()),!1]);r.getBlocksByType("procedures_defnoreturn",!1).forEach(S=>{!da(S)&&Di(S)&&a.push(S.getProcedureDef())});const f=r.getProcedureMap().getProcedures().filter(S=>!!S.getReturnTypes()).map(S=>[S.getName(),S.getParameters().map(k=>k.getName()),!0]);return r.getBlocksByType("procedures_defreturn",!1).forEach(S=>{!da(S)&&Di(S)&&f.push(S.getProcedureDef())}),a.sort(uo),f.sort(uo),[a,f]},uo=function(r,a){return r[0].localeCompare(a[0],void 0,{sensitivity:"base"})},t.findLegalName$$module$build$src$core$procedures=function(r,a){if(a.isInFlyout)return r;for(r=r||t.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!ga(r,a.workspace,a);){const f=r.match(/^(.*?)(\d+)$/);r=f?f[1]+(parseInt(f[2])+1):r+"2"}return r},ga=function(r,a,f){return!xn(r,a,f)},xn=function(r,a,f){for(const S of a.getAllBlocks(!1))if(S!==f&&Di(S)&&t.Names$$module$build$src$core$names.equals(S.getProcedureDef()[0],r))return!0;f=f&&da(f)?f==null?void 0:f.getProcedureModel():void 0;for(const S of a.getProcedureMap().getProcedures())if(S!==f&&t.Names$$module$build$src$core$names.equals(S.getName(),r))return!0;return!1},t.rename$$module$build$src$core$procedures=function(r){var a=this.getSourceBlock();if(!a)throw new ko;r=r.trim();const f=t.findLegalName$$module$build$src$core$procedures(r,a);da(a)&&!a.isInsertionMarker()&&a.getProcedureModel().setName(f);const S=this.getValue();if(S!==r&&S!==f)for(r=a.workspace.getAllBlocks(!1),a=0;a<r.length;a++){const k=r[a];k.renameProcedure&&k.renameProcedure(S,f)}return f},gn=function(r){function a(j,_e){for(let Wt=0;Wt<j.length;Wt++){var Ue=j[Wt][0];const Hn=j[Wt][1],_l=t.createElement$$module$build$src$core$utils$xml("block");_l.setAttribute("type",_e),_l.setAttribute("gap","16");const Ka=t.createElement$$module$build$src$core$utils$xml("mutation");for(Ka.setAttribute("name",Ue),_l.appendChild(Ka),Ue=0;Ue<Hn.length;Ue++){const kf=t.createElement$$module$build$src$core$utils$xml("arg");kf.setAttribute("name",Hn[Ue]),Ka.appendChild(kf)}f.push(_l)}}const f=[];if(Wr.procedures_defnoreturn){var S=t.createElement$$module$build$src$core$utils$xml("block");S.setAttribute("type","procedures_defnoreturn"),S.setAttribute("gap","16");var k=t.createElement$$module$build$src$core$utils$xml("field");k.setAttribute("name","NAME"),k.appendChild(t.createTextNode$$module$build$src$core$utils$xml(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),S.appendChild(k),f.push(S)}return Wr.procedures_defreturn&&(S=t.createElement$$module$build$src$core$utils$xml("block"),S.setAttribute("type","procedures_defreturn"),S.setAttribute("gap","16"),k=t.createElement$$module$build$src$core$utils$xml("field"),k.setAttribute("name","NAME"),k.appendChild(t.createTextNode$$module$build$src$core$utils$xml(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),S.appendChild(k),f.push(S)),Wr.procedures_ifreturn&&(S=t.createElement$$module$build$src$core$utils$xml("block"),S.setAttribute("type","procedures_ifreturn"),S.setAttribute("gap","16"),f.push(S)),f.length&&f[f.length-1].setAttribute("gap","24"),r=yh(r),a(r[0],"procedures_callnoreturn"),a(r[1],"procedures_callreturn"),f},ll=function(r){var a=[],f=r.getBlocksByType("procedures_mutatorarg",!1);for(let j=0,_e;_e=f[j];j++)a.push(_e.getFieldValue("NAME"));f=t.createElement$$module$build$src$core$utils$xml("xml");const S=t.createElement$$module$build$src$core$utils$xml("block");S.setAttribute("type","procedures_mutatorarg");const k=t.createElement$$module$build$src$core$utils$xml("field");k.setAttribute("name","NAME"),a=Ni(t.DEFAULT_ARG$$module$build$src$core$procedures,a),a=t.createTextNode$$module$build$src$core$utils$xml(a),k.appendChild(a),S.appendChild(k),f.appendChild(S),r.updateToolbox(f)},fc=function(r){if(r.type===_o&&r.bubbleType==="mutator"&&r.isOpen&&r.blockId){r=b(r.workspaceId).getBlockById(r.blockId);var a=r.type;(a==="procedures_defnoreturn"||a==="procedures_defreturn")&&(r=r.getIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),ll(r),r.addChangeListener(gf))}},gf=function(r){(r.type===t.CREATE$$module$build$src$core$events$utils||r.type===t.DELETE$$module$build$src$core$events$utils||r.type===t.CHANGE$$module$build$src$core$events$utils||r.type===Eh)&&(r=b(r.workspaceId),ll(r))},iu=function(r,a){return a.getAllBlocks(!1).filter(f=>Co(f,r)||Ar(f)&&t.Names$$module$build$src$core$names.equals(f.getProcedureCall(),r))},Co=function(r,a){return da(r)&&!r.isProcedureDef()&&r.getProcedureModel()&&t.Names$$module$build$src$core$names.equals(r.getProcedureModel().getName(),a)},t.mutateCallers$$module$build$src$core$procedures=function(r){const a=ce();var f=r.getProcedureDef()[0];const S=r.mutationToDom(!0);r=iu(f,r.workspace);for(let j=0,_e;_e=r[j];j++){f=(f=_e.mutationToDom())&&Rn(f),_e.domToMutation&&_e.domToMutation(S);var k=_e.mutationToDom();k=k&&Rn(k),f!==k&&(ge(!1),pe(new(ke(t.CHANGE$$module$build$src$core$events$utils))(_e,"mutation",null,f,k)),ge(a))}},t.getDefinition$$module$build$src$core$procedures=function(r,a){for(const f of a.getAllBlocks(!1))if(da(f)&&f.isProcedureDef()&&t.Names$$module$build$src$core$names.equals(f.getProcedureModel().getName(),r)||Di(f)&&t.Names$$module$build$src$core$names.equals(f.getProcedureDef()[0],r))return f;return null},_s=function(r){return r.isDynamic},ul=function(r){return r.pathDown!==void 0&&r.pathUp!==void 0},ss=function(r){return r.pathLeft!==void 0&&r.pathRight!==void 0},cl=function(r){let a=r.outputConnection;return(!a||r.previousConnection&&r.previousConnection.isConnected())&&(a=r.previousConnection),a},zo=function(r,a){if(!r||!a)throw Error("Cannot connect null connections.");r.targetConnection=a,a.targetConnection=r},Hh=function(r,a){let f=null;a=a.outputConnection;const S=a==null?void 0:a.getConnectionChecker();for(let k=0,j;j=r.inputList[k];k++){const _e=j.connection;let Ue;if(_e&&((Ue=S)!=null&&Ue.canConnect(a,_e,!1))){if(f)return null;f=_e}}return f},za=function(r,a){let f;for(;f=Hh(r,a);)if(r=f.targetBlock(),!r||r.isShadow())return f;return null},Ii=function(r,a){i(Bt.RENDERER,r,a)},Md=function(r){o(Bt.RENDERER,r)},Wc=function(r,a,f){return r=new(d(Bt.RENDERER,r))(r),r.init(a,f),r},Gh=function(r){Ts(r.getTargetWorkspace(),void 0,"String")},Ho=function(r){Ts(r.getTargetWorkspace(),void 0,"Number")},Ao=function(r){Ts(r.getTargetWorkspace(),void 0,"Colour")},sp=function(r){let a=[],f=document.createElement("button");return f.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),f.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),a.push(f),f=document.createElement("button"),f.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),f.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),a.push(f),f=document.createElement("button"),f.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),f.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),a.push(f),r.registerButtonCallback("CREATE_VARIABLE_STRING",Gh),r.registerButtonCallback("CREATE_VARIABLE_NUMBER",Ho),r.registerButtonCallback("CREATE_VARIABLE_COLOUR",Ao),r=$u(r),a=a.concat(r)},$u=function(r){r=r.getAllVariables();const a=[];if(0<r.length){if(Wr.variables_set_dynamic){var f=r[r.length-1];const S=t.createElement$$module$build$src$core$utils$xml("block");S.setAttribute("type","variables_set_dynamic"),S.setAttribute("gap","24"),S.appendChild(Vs(f)),a.push(S)}if(Wr.variables_get_dynamic){r.sort(cp.compareByName);for(let S=0,k;k=r[S];S++)f=t.createElement$$module$build$src$core$utils$xml("block"),f.setAttribute("type","variables_get_dynamic"),f.setAttribute("gap","8"),f.appendChild(Vs(k)),a.push(f)}}return a},Rl=function(r){return r.toCopyData!==void 0},hd=function(){Yi.registry.register({name:If.ESCAPE,preconditionFn(r){return!r.options.readOnly},callback(r){return r.hideChaff(),!0},keyCodes:[Fr.ESC]})},mc=function(){Yi.registry.register({name:If.DELETE,preconditionFn(r){const a=O();return!r.options.readOnly&&a!=null&&a.isDeletable()},callback(r,a){return a.preventDefault(),am.inProgress()?!1:(O().checkAndDelete(),!0)},keyCodes:[Fr.DELETE,Fr.BACKSPACE]})},Yr=function(){const r=Yi.registry.createSerializedKey(Fr.C,[Fr.CTRL]),a=Yi.registry.createSerializedKey(Fr.C,[Fr.ALT]),f=Yi.registry.createSerializedKey(Fr.C,[Fr.META]);Yi.registry.register({name:If.COPY,preconditionFn(S){const k=O();return!S.options.readOnly&&!am.inProgress()&&k!=null&&k.isDeletable()&&k.isMovable()&&Rl(k)},callback(S,k){return k.preventDefault(),S.hideChaff(),k=O(),!k||!Rl(k)?!1:($_=k.toCopyData(),wv=S,!!$_)},keyCodes:[r,a,f]})},su=function(){const r=Yi.registry.createSerializedKey(Fr.X,[Fr.CTRL]),a=Yi.registry.createSerializedKey(Fr.X,[Fr.ALT]),f=Yi.registry.createSerializedKey(Fr.X,[Fr.META]);Yi.registry.register({name:If.CUT,preconditionFn(S){const k=O();return!S.options.readOnly&&!am.inProgress()&&k!=null&&k instanceof Mf&&k.isDeletable()&&k.isMovable()&&!k.workspace.isFlyout},callback(S){const k=O();return!k||!Rl(k)?!1:($_=k.toCopyData(),wv=S,k.checkAndDelete(),!0)},keyCodes:[r,a,f]})},Yu=function(){const r=Yi.registry.createSerializedKey(Fr.V,[Fr.CTRL]),a=Yi.registry.createSerializedKey(Fr.V,[Fr.ALT]),f=Yi.registry.createSerializedKey(Fr.V,[Fr.META]);Yi.registry.register({name:If.PASTE,preconditionFn(S){return!S.options.readOnly&&!am.inProgress()},callback(){return $_&&wv?!!Is($_,wv):!1},keyCodes:[r,a,f]})},os=function(){const r=Yi.registry.createSerializedKey(Fr.Z,[Fr.CTRL]),a=Yi.registry.createSerializedKey(Fr.Z,[Fr.ALT]),f=Yi.registry.createSerializedKey(Fr.Z,[Fr.META]);Yi.registry.register({name:If.UNDO,preconditionFn(S){return!S.options.readOnly&&!am.inProgress()},callback(S){return S.hideChaff(),S.undo(!1),!0},keyCodes:[r,a,f]})},Ha=function(){const r=Yi.registry.createSerializedKey(Fr.Z,[Fr.SHIFT,Fr.CTRL]),a=Yi.registry.createSerializedKey(Fr.Z,[Fr.SHIFT,Fr.ALT]),f=Yi.registry.createSerializedKey(Fr.Z,[Fr.SHIFT,Fr.META]),S=Yi.registry.createSerializedKey(Fr.Y,[Fr.CTRL]);Yi.registry.register({name:If.REDO,preconditionFn(k){return!am.inProgress()&&!k.options.readOnly},callback(k){return k.hideChaff(),k.undo(!0),!0},keyCodes:[r,a,f,S]})},xs=function(){hd(),mc(),Yr(),su(),Yu(),os(),Ha()},ws=function(r){const a={id:r.getId(),name:r.getName(),returnTypes:r.getReturnTypes()};return r.getParameters().length&&(a.parameters=r.getParameters().map(f=>Vc(f))),a},Vc=function(r){const a={id:r.getId(),name:r.getName()};return r.getTypes().length&&(a.types=r.getTypes()),a},fi=function(r,a,f,S){if(r=new r(S,f.name,f.id).setReturnTypes(f.returnTypes),!f.parameters)return r;for(const[k,j]of f.parameters.entries())r.insertParameter(Ga(a,j,S),k);return r},Ga=function(r,a,f){return r=new r(f,a.name,a.id),a.types&&r.setTypes(a.types),r},gc=function(r){const a=Object.create(null),f=_(Bt.SERIALIZER,!0);for(const S in f){let k;const j=(k=f[S])==null?void 0:k.save(r);j&&(a[S]=j)}return a},op=function(r,a,{recordUndo:f=!1}={}){var S=_(Bt.SERIALIZER,!0);if(S){S=Object.entries(S).sort((j,_e)=>_e[1].priority-j[1].priority);var k=ce();ge(f),(f=t.getGroup$$module$build$src$core$events$utils())||t.setGroup$$module$build$src$core$events$utils(!0),ee(),a instanceof jp&&a.setResizesEnabled(!1);for(const[,j]of S.reverse()){let _e;(_e=j)==null||_e.clear(a)}for(let[j,_e]of S.reverse())if(r[j]){let Ue;(Ue=_e)==null||Ue.load(r[j],a)}a instanceof jp&&a.setResizesEnabled(!0),de(),pe(new(ke(ya))(a)),t.setGroup$$module$build$src$core$events$utils(f),ge(k)}},bh=function(r,a,f){const S=f.getBoundingRectangle(),k=S.right-S.left,j=Nr(a.top,S.top,a.top+a.height-(S.bottom-S.top))-S.top;let _e=a.left;return a=a.left+a.width-k,r.RTL?_e=Math.min(a,_e):a=Math.max(_e,a),(r=Nr(_e,S.left,a)-S.left)||j?(f.moveBy(r,j,["inbounds"]),!0):!1},ta=function(r){return a=>{var f=r.getMetricsManager();if(f.hasFixedEdges()&&!r.isDragging()){var S;if(jh.indexOf((S=a.type)!=null?S:"")!==-1){S=f.getScrollMetrics(!0);const k=Vi(r,a);k&&(f=t.getGroup$$module$build$src$core$events$utils()||!1,t.setGroup$$module$build$src$core$events$utils(a.group),bh(r,S,k)&&!a.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),t.setGroup$$module$build$src$core$events$utils(f))}else a.type===ni&&a.scale&&a.oldScale&&a.scale>a.oldScale&&Ln(r)}}},Vi=function(r,a){let f=null;switch(a.type){case t.CREATE$$module$build$src$core$events$utils:case t.MOVE$$module$build$src$core$events$utils:(f=r.getBlockById(a.blockId))&&(f=f.getRootBlock());break;case ls:case va:f=r.getCommentById(a.commentId)}return f},Ln=function(r){var a=r.getMetricsManager();if(a.hasFixedEdges()&&!r.isDragging()){a=a.getScrollMetrics(!0);var f=r.getTopBoundedElements();for(let S=0,k;k=f[S];S++)bh(r,a,k)}},qn=function(r,a){const f=[];for(const S of r.getIcons())(!nu(S)||S.bubbleIsVisible())&&(f.push({location:a,icon:S}),S.onLocationChange(a));for(const S of r.getChildren(!1))f.push(...qn(S,fn.sum(a,S.relativeCoords)));return f},kr=function(){ki.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.UNDO},preconditionFn(r){return 0<r.workspace.getUndoStack().length?"enabled":"disabled"},callback(r){r.workspace.undo(!1)},scopeType:ki.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},ti=function(){ki.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.REDO},preconditionFn(r){return 0<r.workspace.getRedoStack().length?"enabled":"disabled"},callback(r){r.workspace.undo(!0)},scopeType:ki.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Jr=function(){ki.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(r){return r.workspace.isMovable()?1<r.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(r){r.workspace.cleanUp()},scopeType:ki.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Mo=function(r,a){function f(j){k--,j.setCollapsed(r),k===0&&t.setGroup$$module$build$src$core$events$utils(!1)}let S=0,k=0;t.setGroup$$module$build$src$core$events$utils(!0);for(let j=0;j<a.length;j++){let _e=a[j];for(;_e;)k++,setTimeout(f.bind(null,_e),S),_e=_e.getNextBlock(),S+=10}},as=function(){ki.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(r){if(r.workspace.options.collapse){r=r.workspace.getTopBlocks(!1);for(let a=0;a<r.length;a++){let f=r[a];for(;f;){if(!f.isCollapsed())return"enabled";f=f.getNextBlock()}}return"disabled"}return"hidden"},callback(r){Mo(!0,r.workspace.getTopBlocks(!0))},scopeType:ki.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Qi=function(){ki.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(r){if(r.workspace.options.collapse){r=r.workspace.getTopBlocks(!1);for(let a=0;a<r.length;a++){let f=r[a];for(;f;){if(f.isCollapsed())return"enabled";f=f.getNextBlock()}}return"disabled"}return"hidden"},callback(r){Mo(!1,r.workspace.getTopBlocks(!0))},scopeType:ki.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},ou=function(r,a){if(r.isDeletable())Array.prototype.push.apply(a,r.getDescendants(!1));else{r=r.getChildren(!1);for(let f=0;f<r.length;f++)ou(r[f],a)}},Ku=function(r){const a=[];r=r.getTopBlocks(!0);for(let f=0;f<r.length;f++)ou(r[f],a);return a},_c=function(r,a){a?t.setGroup$$module$build$src$core$events$utils(a):(t.setGroup$$module$build$src$core$events$utils(!0),a=t.getGroup$$module$build$src$core$events$utils());const f=r.shift();f&&(f.isDeadOrDying()?_c(r,a):(f.dispose(!1,!0),setTimeout(_c,10,r,a))),t.setGroup$$module$build$src$core$events$utils(!1)},Ju=function(){ki.registry.register({displayText(r){return r.workspace?(r=Ku(r.workspace).length,r===1?t.Msg$$module$build$src$core$msg.DELETE_BLOCK:t.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${r}`)):""},preconditionFn(r){return r.workspace&&0<Ku(r.workspace).length?"enabled":"disabled"},callback(r){if(r.workspace){r.workspace.cancelCurrentGesture();var a=Ku(r.workspace);2>a.length?_c(a):Zt(t.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(a.length)),function(f){f&&_c(a)})}},scopeType:ki.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},Ys=function(){kr(),ti(),Jr(),as(),Qi(),Ju()},co=function(){ki.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(r){return r=r.block,!r.isInFlyout&&r.isDeletable()&&r.isMovable()?r.isDuplicatable()?"enabled":"disabled":"hidden"},callback(r){if(r.block){var a=r.block.toCopyData();a&&Is(a,r.block.workspace)}},scopeType:ki.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},dd=function(){ki.registry.register({displayText(r){return r.block.hasIcon(Jh.TYPE)?t.Msg$$module$build$src$core$msg.REMOVE_COMMENT:t.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(r){return r=r.block,!r.isInFlyout&&r.workspace.options.comments&&!r.isCollapsed()&&r.isEditable()?"enabled":"hidden"},callback(r){r=r.block,r.hasIcon(Jh.TYPE)?r.setCommentText(null):r.setCommentText("")},scopeType:ki.ScopeType.BLOCK,id:"blockComment",weight:2})},_a=function(){ki.registry.register({displayText(r){return r.block.getInputsInline()?t.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:t.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(r){if(r=r.block,!r.isInFlyout&&r.isMovable()&&!r.isCollapsed()){for(let a=1;a<r.inputList.length;a++)if(!(r.inputList[a-1]instanceof Cv||r.inputList[a]instanceof Cv))return"enabled"}return"hidden"},callback(r){r.block.setInputsInline(!r.block.getInputsInline())},scopeType:ki.ScopeType.BLOCK,id:"blockInline",weight:3})},Cu=function(){ki.registry.register({displayText(r){return r.block.isCollapsed()?t.Msg$$module$build$src$core$msg.EXPAND_BLOCK:t.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(r){return r=r.block,!r.isInFlyout&&r.isMovable()&&r.workspace.options.collapse?"enabled":"hidden"},callback(r){r.block.setCollapsed(!r.block.isCollapsed())},scopeType:ki.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Au=function(){ki.registry.register({displayText(r){return r.block.isEnabled()?t.Msg$$module$build$src$core$msg.DISABLE_BLOCK:t.Msg$$module$build$src$core$msg.ENABLE_BLOCK},preconditionFn(r){return r=r.block,!r.isInFlyout&&r.workspace.options.disable&&r.isEditable()?r.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback(r){r=r.block;const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0),r.setEnabled(!r.isEnabled()),t.setGroup$$module$build$src$core$events$utils(a)},scopeType:ki.ScopeType.BLOCK,id:"blockDisable",weight:5})},ho=function(){ki.registry.register({displayText(r){var a=r.block;return r=a.getDescendants(!1).length,(a=a.getNextBlock())&&(r-=a.getDescendants(!1).length),r===1?t.Msg$$module$build$src$core$msg.DELETE_BLOCK:t.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${r}`)},preconditionFn(r){return!r.block.isInFlyout&&r.block.isDeletable()?"enabled":"hidden"},callback(r){r.block&&r.block.checkAndDelete()},scopeType:ki.ScopeType.BLOCK,id:"blockDelete",weight:6})},po=function(){ki.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.HELP},preconditionFn(r){return r=r.block,(typeof r.helpUrl=="function"?r.helpUrl():r.helpUrl)?"enabled":"hidden"},callback(r){r.block.showHelp()},scopeType:ki.ScopeType.BLOCK,id:"blockHelp",weight:7})},kl=function(){co(),dd(),_a(),Cu(),Au(),ho(),po()},Go=function(){Ys(),kl()},qu=function(r,a){var f=null;f=typeof r=="string"?document.getElementById(r)||document.querySelector(r):r;let S;if(!document.contains(f)&&document!==((S=f)==null?void 0:S.ownerDocument))throw Error("Error: container is not in current document");r=new zi(a||{}),a=document.createElement("div"),a.className="injectionDiv",a.tabIndex=0,Sr(a,bo.LABEL,t.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),f.appendChild(a),f=Qu(a,r);const k=Th(a,f,r);return Sh(k),L(k),W(k),a.addEventListener("focusin",function(){L(k)}),k},Qu=function(r,a){r.setAttribute("dir","LTR"),mt(a.hasCss,a.pathToMedia),r=re(Ge.SVG,{xmlns:zm,"xmlns:html":Tc,"xmlns:xlink":Js,version:"1.1",class:"blocklySvg",tabindex:"0"},r);const f=re(Ge.DEFS,{},r),S=String(Math.random()).substring(2);return a.gridPattern=By.createDom(S,a.gridOptions,f),r},Th=function(r,a,f){f.parentWorkspace=null,f=new jp(f);const S=f.options;f.scale=S.zoomOptions.startScale,a.appendChild(f.createDom("blocklyMainBackground",r));var k=f.getRenderer().getClassName();return k&&Be(r,k),(k=f.getTheme().getClassName())&&Be(r,k),!S.hasCategories&&S.languageTree&&(r=f.addFlyout(Ge.SVG),Ke(r,a)),S.hasTrashcan&&f.addTrashcan(),S.zoomOptions&&S.zoomOptions.controls&&f.addZoomControls(),f.getThemeManager().subscribe(a,"workspaceBackgroundColour","background-color"),f.translate(0,0),f.addChangeListener(ta(f)),W(f),Fo(),wl(),Fh(),f},Sh=function(r){const a=r.options;var f=r.getParentSvg();if(Ce(f.parentNode,"contextmenu",null,function(S){ot(S)||S.preventDefault()}),f=Ce(window,"resize",null,function(){Cl(),r.hideComponents(!0),gs(),rp(),W(r),Ln(r)}),r.setResizeHandlerWrapper(f),vs(),a.languageTree){f=r.getToolbox();const S=r.getFlyout(!0);f?f.init():S&&(S.init(r),S.show(a.languageTree),typeof S.scrollToStart=="function"&&S.scrollToStart())}a.hasTrashcan&&r.trashcan.init(),a.zoomOptions&&a.zoomOptions.controls&&r.zoomControls_.init(),a.moveOptions&&a.moveOptions.scrollbars?(r.scrollbar=new ib(r,a.moveOptions.scrollbars===!0||!!a.moveOptions.scrollbars.horizontal,a.moveOptions.scrollbars===!0||!!a.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),r.scrollbar.resize()):r.setMetrics({x:.5,y:.5}),a.hasSounds&&Rs(a.pathToMedia,r)},Mr=function(r){const a=I();a&&!(ot(r)||a.rendered&&!a.isVisible())&&Yi.registry.onKeyDown(a,r)},vs=function(){Qs||(Ce(document,"scroll",null,function(){const r=E();for(let a=0,f;f=r[a];a++)f instanceof jp&&f.updateInverseScreenCTM()}),Ce(document,"keydown",null,Mr),je(document,"touchend",null,rt),je(document,"touchcancel",null,rt),Bn&&Ce(window,"orientationchange",document,function(){W(I())})),Qs=!0},Rs=function(r,a){function f(){for(;k.length;){const j=k.pop();j&&it(j)}S.preload()}const S=a.getAudioManager();S.load([r+"click.mp3",r+"click.wav",r+"click.ogg"],"click"),S.load([r+"disconnect.wav",r+"disconnect.mp3",r+"disconnect.ogg"],"disconnect"),S.load([r+"delete.mp3",r+"delete.ogg",r+"delete.wav"],"delete");const k=[];k.push(Ce(document,"pointermove",null,f,!0)),k.push(Ce(document,"touchstart",null,f,!0))},Wa=function(r){return r.getType!==void 0&&r.initView!==void 0&&r.dispose!==void 0&&r.getWeight!==void 0&&r.getSize!==void 0&&r.applyColour!==void 0&&r.hideForInsertionMarker!==void 0&&r.updateEditable!==void 0&&r.updateCollapsed!==void 0&&r.isShownWhenCollapsed!==void 0&&r.setOffsetInBlock!==void 0&&r.onLocationChange!==void 0&&r.onClick!==void 0},Hs=function(r){return r.paste!==void 0},cn=function(r){return r.isSelectable()},jc=function(r){I().hideChaff(r)},bn=bn||{},bn.scope={},bn.ASSUME_ES5=!1,bn.ASSUME_NO_NATIVE_MAP=!1,bn.ASSUME_NO_NATIVE_SET=!1,bn.SIMPLE_FROUND_POLYFILL=!1,bn.ISOLATE_POLYFILLS=!1,bn.FORCE_POLYFILL_PROMISE=!1,bn.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,bn.defineProperty=bn.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(r,a,f){return r==Array.prototype||r==Object.prototype||(r[a]=f.value),r},bn.getGlobal=function(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wl=="object"&&Wl];for(var a=0;a<r.length;++a){var f=r[a];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")},bn.global=bn.getGlobal(this),bn.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",bn.TRUST_ES6_POLYFILLS=!bn.ISOLATE_POLYFILLS||bn.IS_SYMBOL_NATIVE,bn.polyfills={},bn.propertyToPolyfillSymbol={},bn.POLYFILL_PREFIX="$jscp$",bn.polyfill=function(r,a,f,S){a&&(bn.ISOLATE_POLYFILLS?bn.polyfillIsolated(r,a,f,S):bn.polyfillUnisolated(r,a,f,S))},bn.polyfillUnisolated=function(r,a,f,S){for(f=bn.global,r=r.split("."),S=0;S<r.length-1;S++){var k=r[S];if(!(k in f))return;f=f[k]}r=r[r.length-1],S=f[r],a=a(S),a!=S&&a!=null&&bn.defineProperty(f,r,{configurable:!0,writable:!0,value:a})},bn.polyfillIsolated=function(r,a,f,S){var k=r.split(".");r=k.length===1,S=k[0],S=!r&&S in bn.polyfills?bn.polyfills:bn.global;for(var j=0;j<k.length-1;j++){var _e=k[j];if(!(_e in S))return;S=S[_e]}k=k[k.length-1],f=bn.IS_SYMBOL_NATIVE&&f==="es6"?S[k]:null,a=a(f),a!=null&&(r?bn.defineProperty(bn.polyfills,k,{configurable:!0,writable:!0,value:a}):a!==f&&(bn.propertyToPolyfillSymbol[k]===void 0&&(f=1e9*Math.random()>>>0,bn.propertyToPolyfillSymbol[k]=bn.IS_SYMBOL_NATIVE?bn.global.Symbol(k):bn.POLYFILL_PREFIX+f+"$"+k),bn.defineProperty(S,bn.propertyToPolyfillSymbol[k],{configurable:!0,writable:!0,value:a})))},bn.polyfill("globalThis",function(r){return r||bn.global},"es_2020","es3"),bn.arrayIteratorImpl=function(r){var a=0;return function(){return a<r.length?{done:!1,value:r[a++]}:{done:!0}}},bn.arrayIterator=function(r){return{next:bn.arrayIteratorImpl(r)}},bn.initSymbol=function(){},bn.iteratorPrototype=function(r){return r={next:r},r[Symbol.iterator]=function(){return this},r},bn.iteratorFromArray=function(r,a){r instanceof String&&(r+="");var f=0,S=!1,k={next:function(){if(!S&&f<r.length){var j=f++;return{value:a(j,r[j]),done:!1}}return S=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k},bn.polyfill("Array.prototype.values",function(r){return r||function(){return bn.iteratorFromArray(this,function(a,f){return f})}},"es8","es3"),bn.polyfill("Array.prototype.flat",function(r){return r||function(a){a=a===void 0?1:a;var f=[];return Array.prototype.forEach.call(this,function(S){Array.isArray(S)&&0<a?(S=Array.prototype.flat.call(S,a-1),f.push.apply(f,S)):f.push(S)}),f}},"es9","es5"),bn.owns=function(r,a){return Object.prototype.hasOwnProperty.call(r,a)},bn.polyfill("Object.entries",function(r){return r||function(a){var f=[],S;for(S in a)bn.owns(a,S)&&f.push([S,a[S]]);return f}},"es8","es3"),bn.polyfill("Object.values",function(r){return r||function(a){var f=[],S;for(S in a)bn.owns(a,S)&&f.push(a[S]);return f}},"es8","es3");var mi=Object.create(null),$s={typeMap:mi},au=Object.create(null),Ol="default",Bt=class{constructor(r){this.name=r}toString(){return this.name}};Bt.CONNECTION_CHECKER=new Bt("connectionChecker"),Bt.CONNECTION_PREVIEWER=new Bt("connectionPreviewer"),Bt.CURSOR=new Bt("cursor"),Bt.EVENT=new Bt("event"),Bt.FIELD=new Bt("field"),Bt.INPUT=new Bt("input"),Bt.RENDERER=new Bt("renderer"),Bt.TOOLBOX=new Bt("toolbox"),Bt.THEME=new Bt("theme"),Bt.TOOLBOX_ITEM=new Bt("toolboxItem"),Bt.FLYOUTS_VERTICAL_TOOLBOX=new Bt("flyoutsVerticalToolbox"),Bt.FLYOUTS_HORIZONTAL_TOOLBOX=new Bt("flyoutsHorizontalToolbox"),Bt.METRICS_MANAGER=new Bt("metricsManager"),Bt.BLOCK_DRAGGER=new Bt("blockDragger"),Bt.SERIALIZER=new Bt("serializer"),Bt.ICON=new Bt("icon"),Bt.PASTER=new Bt("paster");var hl={DEFAULT:Ol,TEST_ONLY:$s};hl.Type=Bt,hl.getAllItems=_,hl.getClass=d,hl.getClassFromOptions=y,hl.getObject=p,hl.hasItem=u,hl.register=i,hl.unregister=o;var Wr=Object.create(null),Zu=Object.create(null),Wh,Xc=null,si,ji=[],Yc={defineBlocksWithJsonArrayInternal:ne},fo={TEST_ONLY:Yc};fo.createBlockDefinitionsFromJsonArray=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,fo.defineBlocks=t.defineBlocks$$module$build$src$core$common,fo.defineBlocksWithJsonArray=Q,fo.draggingConnections=ji,fo.getAllWorkspaces=E,fo.getBlockTypeCounts=H,fo.getMainWorkspace=I,fo.getParentContainer=N,fo.getSelected=O,fo.getWorkspaceById=b,fo.registerWorkspace=C,fo.setMainWorkspace=L,fo.setParentContainer=z,fo.setSelected=P,fo.svgResize=W,fo.unregisterWorkpace=A;var dl="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Kc={genUid:()=>{const r=dl.length,a=[];for(let f=0;20>f;f++)a[f]=dl.charAt(Math.random()*r);return a.join("")}},vc=0,ec={TEST_ONLY:Kc};ec.genUid=le,ec.getNextUniqueId=oe;var Io,Ks,na,Eh,mo,Mu,Jc,yc,Wo,go,tc,Ll,_o,Dl,Va,lu,ni,ls,Vh,pd,va,ya,jh,bc,Lp,w;Io="",Ks=!0,na=0,t.CREATE$$module$build$src$core$events$utils="create",t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils="delete",t.DELETE$$module$build$src$core$events$utils,t.CHANGE$$module$build$src$core$events$utils="change",t.CHANGE$$module$build$src$core$events$utils,Eh="block_field_intermediate_change",t.MOVE$$module$build$src$core$events$utils="move",t.MOVE$$module$build$src$core$events$utils,mo="var_create",Mu="var_delete",Jc="var_rename",yc="ui",Wo="drag",go="selected",tc="click",Ll="marker_move",_o="bubble_open",Dl="trashcan_open",Va="toolbox_item_select",lu="theme_change",ni="viewport_change",ls="comment_create",Vh="comment_delete",pd="comment_change",va="comment_move",ya="finished_loading",jh=[t.CREATE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,ls,va],bc=[],Lp={FIRE_QUEUE:bc,fireNow:Oe,fireInternal:Te,setGroupInternal:he},w={BLOCK_CHANGE:t.CHANGE$$module$build$src$core$events$utils,BLOCK_CREATE:t.CREATE$$module$build$src$core$events$utils,BLOCK_DELETE:t.DELETE$$module$build$src$core$events$utils,BLOCK_DRAG:Wo,BLOCK_FIELD_INTERMEDIATE_CHANGE:Eh,BLOCK_MOVE:t.MOVE$$module$build$src$core$events$utils,BUBBLE_OPEN:_o,BUMP_EVENTS:jh,CHANGE:t.CHANGE$$module$build$src$core$events$utils,CLICK:tc,COMMENT_CHANGE:pd,COMMENT_CREATE:ls,COMMENT_DELETE:Vh,COMMENT_MOVE:va,CREATE:t.CREATE$$module$build$src$core$events$utils,DELETE:t.DELETE$$module$build$src$core$events$utils,FINISHED_LOADING:ya,MARKER_MOVE:Ll,MOVE:t.MOVE$$module$build$src$core$events$utils,SELECTED:go,TEST_ONLY:Lp,THEME_CHANGE:lu,TOOLBOX_ITEM_SELECT:Va,TRASHCAN_OPEN:Dl,UI:yc,VAR_CREATE:mo,VAR_DELETE:Mu,VAR_RENAME:Jc,VIEWPORT_CHANGE:ni},w.clearPendingUndo=se,w.disable=t.disable$$module$build$src$core$events$utils,w.disableOrphans=qe,w.enable=t.enable$$module$build$src$core$events$utils,w.filter=J,w.fire=pe,w.fromJson=Fe,w.get=ke,w.getDescendantIds=Se,w.getGroup=t.getGroup$$module$build$src$core$events$utils,w.getRecordUndo=ce,w.isEnabled=ie,w.setGroup=t.setGroup$$module$build$src$core$events$utils,w.setRecordUndo=ge;var h=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=t.getGroup$$module$build$src$core$events$utils(),this.recordUndo=ce()}toJson(){return{type:this.type,group:this.group}}static fromJson(r,a,f){return f.isBlank=!1,f.group=r.group||"",f.workspaceId=a.id,f}isNull(){return!1}run(r){}getEventWorkspace_(){let r;if(this.workspaceId&&(r=b(this.workspaceId)),!r)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return r}},g=class extends h{constructor(r){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof r>"u",this.workspaceId=r||""}},$=class extends g{constructor(r,a,f){a=r?r.workspace.id:a,a===null&&(a=void 0),super(a),this.type=tc,this.blockId=r?r.id:void 0,this.targetType=f}toJson(){const r=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return r.targetType=this.targetType,r.blockId=this.blockId,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new $),a.targetType=r.targetType,a.blockId=r.blockId,a}},M;(function(r){r.BLOCK="block",r.WORKSPACE="workspace",r.ZOOM_CONTROLS="zoom_controls"})(M||(M={})),i(Bt.EVENT,tc,$);var B=750,V="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),ue=null,Me={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Qe=0,Et={TOUCH_ENABLED:V,TOUCH_MAP:Me};Et.checkTouchIdentifier=Pe,Et.clearTouchIdentifier=tt,Et.getTouchIdentifierFromEvent=ct,Et.longStart=De,Et.longStop=rt,Et.shouldHandleEvent=ft;var Jt,an,_n,vn,pn,Or,St,we,Re,nt;(function(r){function a(S){return f.indexOf(S.toUpperCase())!==-1}Jt=r;const f=Jt.toUpperCase();an=a("JavaFX"),_n=a("WebKit"),vn=a("Gecko")&&!_n,pn=a("Android"),r=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Or=a("iPad")||a("Macintosh")&&0<r,St=a("iPhone")&&!Or,we=a("Macintosh"),Re=Or||pn&&!a("Mobile")||a("Silk"),nt=!Re&&(St||pn)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var Ut=Jt,tn=an,Tn=vn,An=pn,Bn=Or,ur=St,wr=we,Nl=nt,ap={ANDROID:An,GECKO:Tn,IPAD:Bn,IPHONE:ur,JavaFx:tn,MAC:wr,MOBILE:Nl,raw:Ut},xh=40,sn=125,qc={};qc.bind=je,qc.conditionalBind=Ce,qc.getScrollDeltaPixels=yt,qc.isRightButton=vt,qc.isTargetInput=ot,qc.mouseToSvg=It,qc.unbind=it;var Vf={};Vf.removeElem=kt;var ba=class{constructor(r){this.name_=r}toString(){return this.name_}};ba.POSITIONABLE=new ba("positionable"),ba.DRAG_TARGET=new ba("drag_target"),ba.DELETE_AREA=new ba("delete_area"),ba.AUTOHIDEABLE=new ba("autohideable");var pl=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(r,a){const f=r.component.id;if(!a&&this.componentData.has(f)){var S;throw Error('Plugin "'+f+'" with capabilities "'+((S=this.componentData.get(f))==null?void 0:S.capabilities)+'" already added.')}for(this.componentData.set(f,r),a=[],S=0;S<r.capabilities.length;S++){const k=String(r.capabilities[S]).toLowerCase();if(a.push(k),this.capabilityToComponentIds.has(k)){let j;(j=this.capabilityToComponentIds.get(k))==null||j.push(f)}else this.capabilityToComponentIds.set(k,[f])}this.componentData.get(f).capabilities=a}removeComponent(r){const a=this.componentData.get(r);if(a){for(let f=0;f<a.capabilities.length;f++){const S=String(a.capabilities[f]).toLowerCase();kt(this.capabilityToComponentIds.get(S),r)}this.componentData.delete(r)}}addCapability(r,a){if(!this.getComponent(r))throw Error('Cannot add capability, "'+a+'". Plugin "'+r+'" has not been added to the ComponentManager');if(this.hasCapability(r,a))console.warn('Plugin "'+r+'already has capability "'+a+'"');else{a=`${a}`.toLowerCase();var f;(f=this.componentData.get(r))==null||f.capabilities.push(a);var S;(S=this.capabilityToComponentIds.get(a))==null||S.push(r)}}removeCapability(r,a){if(!this.getComponent(r))throw Error('Cannot remove capability, "'+a+'". Plugin "'+r+'" has not been added to the ComponentManager');this.hasCapability(r,a)?(a=`${a}`.toLowerCase(),kt(this.componentData.get(r).capabilities,a),kt(this.capabilityToComponentIds.get(a),r)):console.warn('Plugin "'+r+`doesn't have capability "`+a+'" to remove')}hasCapability(r,a){return a=`${a}`.toLowerCase(),this.componentData.has(r)&&this.componentData.get(r).capabilities.indexOf(a)!==-1}getComponent(r){let a;return(a=this.componentData.get(r))==null?void 0:a.component}getComponents(r,a){if(r=`${r}`.toLowerCase(),r=this.capabilityToComponentIds.get(r),!r)return[];const f=[];if(a){const S=[];r.forEach(k=>{S.push(this.componentData.get(k))}),S.sort(function(k,j){return k.weight-j.weight}),S.forEach(function(k){f.push(k.component)})}else r.forEach(S=>{f.push(this.componentData.get(S).component)});return f}};pl.Capability=ba;var lp=!1,Xh=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyBlockDragSurface {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}
`,us={};us.inject=mt,us.register=$t;var fn=class{constructor(r,a){this.x=r,this.y=a}clone(){return new fn(this.x,this.y)}scale(r){return this.x*=r,this.y*=r,this}translate(r,a){return this.x+=r,this.y+=a,this}static equals(r,a){return r===a?!0:r&&a?r.x===a.x&&r.y===a.y:!1}static distance(r,a){const f=r.x-a.x;return r=r.y-a.y,Math.sqrt(f*f+r*r)}static magnitude(r){return Math.sqrt(r.x*r.x+r.y*r.y)}static difference(r,a){return new fn(r.x-a.x,r.y-a.y)}static sum(r,a){return new fn(r.x+a.x,r.y+a.y)}},o0=new Set,bg={};bg.warn=xe;var zm="http://www.w3.org/2000/svg",Tc="http://www.w3.org/1999/xhtml",Js="http://www.w3.org/1999/xlink",Dp;(function(r){r[r.ELEMENT_NODE=1]="ELEMENT_NODE",r[r.TEXT_NODE=3]="TEXT_NODE",r[r.COMMENT_NODE=8]="COMMENT_NODE"})(Dp||(Dp={}));var Id=null,ja=0,Pr=null,Ta={HTML_NS:Tc};Ta.NodeType=Dp,Ta.SVG_NS=zm,Ta.XLINK_NS=Js,Ta.addClass=Be,Ta.containsNode=Ie,Ta.createSvgElement=re,Ta.getFastTextWidth=Je,Ta.getFastTextWidthWithSizeString=jt,Ta.getTextWidth=Ae,Ta.hasClass=Mt,Ta.insertAfter=Ke,Ta.measureFontMetrics=ze,Ta.removeClass=bt,Ta.removeClasses=dt,Ta.removeNode=pt,Ta.setCssTransform=q,Ta.startTextWidthCache=ee,Ta.stopTextWidthCache=de;var Ge=class{constructor(r){this.tagName=r}toString(){return this.tagName}};Ge.ANIMATE=new Ge("animate"),Ge.CIRCLE=new Ge("circle"),Ge.CLIPPATH=new Ge("clipPath"),Ge.DEFS=new Ge("defs"),Ge.FECOMPOSITE=new Ge("feComposite"),Ge.FECOMPONENTTRANSFER=new Ge("feComponentTransfer"),Ge.FEFLOOD=new Ge("feFlood"),Ge.FEFUNCA=new Ge("feFuncA"),Ge.FEGAUSSIANBLUR=new Ge("feGaussianBlur"),Ge.FEPOINTLIGHT=new Ge("fePointLight"),Ge.FESPECULARLIGHTING=new Ge("feSpecularLighting"),Ge.FILTER=new Ge("filter"),Ge.FOREIGNOBJECT=new Ge("foreignObject"),Ge.G=new Ge("g"),Ge.IMAGE=new Ge("image"),Ge.LINE=new Ge("line"),Ge.PATH=new Ge("path"),Ge.PATTERN=new Ge("pattern"),Ge.POLYGON=new Ge("polygon"),Ge.RECT=new Ge("rect"),Ge.SVG=new Ge("svg"),Ge.TEXT=new Ge("text"),Ge.TSPAN=new Ge("tspan");var Ri=class{constructor(r,a,f,S){this.top=r,this.bottom=a,this.left=f,this.right=S}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(r,a){return r>=this.left&&r<=this.right&&a>=this.top&&a<=this.bottom}intersects(r){return!(this.left>r.right||this.right<r.left||this.top>r.bottom||this.bottom<r.top)}},qs=class{constructor(r,a){this.width=r,this.height=a}static equals(r,a){return r===a?!0:r&&a?r.width===a.width&&r.height===a.height:!1}},a_={getSizeInternal:_t},Sc={TEST_ONLY:a_};Sc.getBorderBox=Lr,Sc.getComputedStyle=Xt,Sc.getContainerOffsetToScrollInto=Er,Sc.getPageOffset=Dn,Sc.getSize=Yt,Sc.getViewportPageOffset=ii,Sc.scrollIntoContainerView=Si;var _f=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,jf=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,l_={XY_REGEX:_f,XY_STYLE_REGEX:jf},vf={TEST_ONLY:l_};vf.getDocumentScroll=He,vf.getInjectionDivXY=te,vf.getRelativeXY=ir,vf.getViewportBBox=be,vf.screenToWsCoordinates=at,vf.wsToScreenCoordinates=Ft;var Sa=class{constructor(r,a,f,S,k){this.workspace=r,this.horizontal=a,this.oldHostMetrics=null,this.ratio=1,this.origin=new fn(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new fn(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=f||!1,this.margin=k!==void 0?k:Sa.DEFAULT_SCROLLBAR_MARGIN,r="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),S&&(r+=" "+S),this.outerSvg=re(Ge.SVG,{class:r}),S=re(Ge.G,{},this.outerSvg),this.svgBackground=re(Ge.RECT,{class:"blocklyScrollbarBackground"},S),r=Math.floor((Sa.scrollbarThickness-5)/2),this.svgHandle=re(Ge.RECT,{class:"blocklyScrollbarHandle",rx:r,ry:r},S),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),Ke(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),a?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Ce(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=Ce(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const r=Sa.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(r)),this.outerSvg.setAttribute("height",String(r)),this.svgHandle.setAttribute("height",String(r-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(r)),this.outerSvg.setAttribute("width",String(r)),this.svgHandle.setAttribute("width",String(r-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),it(this.onMouseDownBarWrapper_),it(this.onMouseDownHandleWrapper_),pt(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(r){return r=0>=r||isNaN(r)?0:Math.min(r,this.scrollbarLength)}setHandleLength(r){this.handleLength=r,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(r){return r=0>=r||isNaN(r)?0:Math.min(r,this.scrollbarLength-this.handleLength)}setHandlePosition(r){this.handlePosition=r,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(r){this.scrollbarLength=r,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(r,a){this.position.x=r,this.position.y=a,q(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(r){!r&&(r=this.workspace.getMetrics(),!r)||this.oldHostMetrics&&Sa.metricsAreEquivalent(r,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(r):this.resizeVertical(r),this.oldHostMetrics=r,this.updateMetrics())}requiresViewResize(r){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==r.viewWidth||this.oldHostMetrics.viewHeight!==r.viewHeight||this.oldHostMetrics.absoluteLeft!==r.absoluteLeft||this.oldHostMetrics.absoluteTop!==r.absoluteTop:!0}resizeHorizontal(r){this.requiresViewResize(r)?this.resizeViewHorizontal(r):this.resizeContentHorizontal(r)}resizeViewHorizontal(r){var a=r.viewWidth-2*this.margin;this.pair&&(a-=Sa.scrollbarThickness),this.setScrollbarLength(Math.max(0,a)),a=r.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(a+=Sa.scrollbarThickness),this.setPosition(a,r.absoluteTop+r.viewHeight-Sa.scrollbarThickness-this.margin),this.resizeContentHorizontal(r)}resizeContentHorizontal(r){if(r.viewWidth>=r.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var a=this.scrollbarLength*r.viewWidth/r.scrollWidth;a=this.constrainHandleLength(a),this.setHandleLength(a),a=r.scrollWidth-r.viewWidth;var f=this.scrollbarLength-this.handleLength;r=(r.viewLeft-r.scrollLeft)/a*f,r=this.constrainHandlePosition(r),this.setHandlePosition(r),this.ratio=f/a}}resizeVertical(r){this.requiresViewResize(r)?this.resizeViewVertical(r):this.resizeContentVertical(r)}resizeViewVertical(r){let a=r.viewHeight-2*this.margin;this.pair&&(a-=Sa.scrollbarThickness),this.setScrollbarLength(Math.max(0,a)),this.setPosition(this.workspace.RTL?r.absoluteLeft+this.margin:r.absoluteLeft+r.viewWidth-Sa.scrollbarThickness-this.margin,r.absoluteTop+this.margin),this.resizeContentVertical(r)}resizeContentVertical(r){if(r.viewHeight>=r.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var a=this.scrollbarLength*r.viewHeight/r.scrollHeight;a=this.constrainHandleLength(a),this.setHandleLength(a),a=r.scrollHeight-r.viewHeight;var f=this.scrollbarLength-this.handleLength;r=(r.viewTop-r.scrollTop)/a*f,r=this.constrainHandlePosition(r),this.setHandlePosition(r),this.ratio=f/a}}isVisible(){return this.isHandleVisible}setContainerVisible(r){const a=r!==this.containerVisible;this.containerVisible=r,a&&this.updateDisplay_()}setVisible(r){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(r)}setVisibleInternal(r){const a=r!==this.isVisible();this.isHandleVisible=r,a&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(r){if(this.workspace.markFocused(),tt(),this.cleanUp(),vt(r))r.stopPropagation();else{var a=It(r,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());a=this.horizontal?a.x:a.y;var f=te(this.svgHandle);f=this.horizontal?f.x:f.y;var S=this.handlePosition,k=.95*this.handleLength;a<=f?S-=k:a>=f+this.handleLength&&(S+=k),this.setHandlePosition(this.constrainHandlePosition(S)),this.updateMetrics(),r.stopPropagation(),r.preventDefault()}}onMouseDownHandle(r){this.workspace.markFocused(),this.cleanUp(),vt(r)?r.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?r.clientX:r.clientY,this.onMouseUpWrapper_=Ce(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=Ce(document,"pointermove",this,this.onMouseMoveHandle),r.stopPropagation(),r.preventDefault())}onMouseMoveHandle(r){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?r.clientX:r.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){tt(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(it(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(it(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let r=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(r)&&(r=0),r}updateMetrics(){const r=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:r}):this.workspace.setMetrics({y:r})}set(r,a){this.setHandlePosition(this.constrainHandlePosition(r*this.ratio)),(a||a===void 0)&&this.updateMetrics()}setOrigin(r,a){this.origin=new fn(r,a)}static metricsAreEquivalent(r,a){return r.viewWidth===a.viewWidth&&r.viewHeight===a.viewHeight&&r.viewLeft===a.viewLeft&&r.viewTop===a.viewTop&&r.absoluteTop===a.absoluteTop&&r.absoluteLeft===a.absoluteLeft&&r.scrollWidth===a.scrollWidth&&r.scrollHeight===a.scrollHeight&&r.scrollLeft===a.scrollLeft&&r.scrollTop===a.scrollTop}};Sa.scrollbarThickness=V?25:15,Sa.DEFAULT_SCROLLBAR_MARGIN=.5;var Tg={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},Xf={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:yf,DOMParser:fl,XMLSerializer:uu}=globalThis;fl&&(Tg=new fl),uu&&(Xf=new uu);var Rd="https://developers.google.com/blockly/xml",up=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,kd={NAME_SPACE:Rd};kd.createElement=t.createElement$$module$build$src$core$utils$xml,kd.createTextNode=t.createTextNode$$module$build$src$core$utils$xml,kd.domToText=Rn,kd.injectDependencies=rn,kd.textToDom=t.textToDom$$module$build$src$core$utils$xml;var Qc="categoryToolbox",Sg="flyoutToolbox",hr;(function(r){r[r.TOP=0]="TOP",r[r.BOTTOM=1]="BOTTOM",r[r.LEFT=2]="LEFT",r[r.RIGHT=3]="RIGHT"})(hr||(hr={}));var a0={hasCategoriesInternal:On},vo={};vo.Position=hr,vo.TEST_ONLY=a0,vo.convertFlyoutDefToJsonArray=Tt,vo.convertToolboxDefToJson=gt,vo.hasCategories=zt,vo.isCategoryCollapsible=tr,vo.parseToolboxTree=Dr;var Xa;(function(r){r[r.TOP=0]="TOP",r[r.BOTTOM=1]="BOTTOM"})(Xa||(Xa={}));var Yf;(function(r){r[r.LEFT=0]="LEFT",r[r.RIGHT=1]="RIGHT"})(Yf||(Yf={}));var Od;(function(r){r[r.UP=0]="UP",r[r.DOWN=1]="DOWN"})(Od||(Od={}));var Kf={};Kf.bumpDirection=Od,Kf.bumpPositionRect=Ia,Kf.getCornerOppositeToolbox=bs,Kf.getStartPositionRect=jr,Kf.horizontalPosition=Yf,Kf.verticalPosition=Xa;var Iu={width:96,height:124,url:"sprites.png"},l0=class{constructor(r){this.workspace=r,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=re(Ge.G,{});const r=String(Math.random()).substring(2);return this.createZoomOutSvg(r),this.createZoomInSvg(r),this.workspace.isMovable()&&this.createZoomResetSvg(r),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[pl.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&pt(this.svgGroup);for(const r of this.boundEvents)it(r);this.boundEvents.length=0}getBoundingRectangle(){let r=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(r+=this.LARGE_SPACING+this.HEIGHT),new Ri(this.top,this.top+r,this.left,this.left+this.WIDTH)}position(r,a){if(this.initialized){var f=bs(this.workspace,r),S=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(S+=this.LARGE_SPACING+this.HEIGHT),r=jr(f,new qs(this.WIDTH,S),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,r,this.workspace),f=f.vertical,a=Ia(r,this.MARGIN_VERTICAL,f===Xa.TOP?Od.DOWN:Od.UP,a),f===Xa.TOP){var k=this.SMALL_SPACING+this.HEIGHT,j;(j=this.zoomInGroup)==null||j.setAttribute("transform","translate(0, "+k+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(k+this.LARGE_SPACING+this.HEIGHT)+")")}else{j=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let Ue;(Ue=this.zoomInGroup)==null||Ue.setAttribute("transform","translate(0, "+j+")"),j=j+this.SMALL_SPACING+this.HEIGHT,(k=this.zoomOutGroup)==null||k.setAttribute("transform","translate(0, "+j+")")}this.top=a.top,this.left=a.left;var _e;(_e=this.svgGroup)==null||_e.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(r){this.zoomOutGroup=re(Ge.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const a=re(Ge.CLIPPATH,{id:"blocklyZoomoutClipPath"+r},this.zoomOutGroup);re(Ge.RECT,{width:32,height:32},a),re(Ge.IMAGE,{width:Iu.width,height:Iu.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+r+")"},this.zoomOutGroup).setAttributeNS(Js,"xlink:href",this.workspace.options.pathToMedia+Iu.url),this.boundEvents.push(Ce(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(r){this.zoomInGroup=re(Ge.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const a=re(Ge.CLIPPATH,{id:"blocklyZoominClipPath"+r},this.zoomInGroup);re(Ge.RECT,{width:32,height:32},a),re(Ge.IMAGE,{width:Iu.width,height:Iu.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+r+")"},this.zoomInGroup).setAttributeNS(Js,"xlink:href",this.workspace.options.pathToMedia+Iu.url),this.boundEvents.push(Ce(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(r,a){this.workspace.markFocused(),this.workspace.zoomCenter(r),this.fireZoomEvent(),tt(),a.stopPropagation(),a.preventDefault()}createZoomResetSvg(r){this.zoomResetGroup=re(Ge.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const a=re(Ge.CLIPPATH,{id:"blocklyZoomresetClipPath"+r},this.zoomResetGroup);re(Ge.RECT,{width:32,height:32},a),re(Ge.IMAGE,{width:Iu.width,height:Iu.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+r+")"},this.zoomResetGroup).setAttributeNS(Js,"xlink:href",this.workspace.options.pathToMedia+Iu.url),this.boundEvents.push(Ce(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(r){this.workspace.markFocused();const a=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(a),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),tt(),r.stopPropagation(),r.preventDefault()}fireZoomEvent(){const r=new(ke(tc))(null,this.workspace.id,"zoom_controls");pe(r)}};$t(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var Vo=class{constructor(r){this.name=r}toString(){return this.name}equals(r){return this.name===r.toString()}};Vo.MUTATOR=new Vo("mutator"),Vo.WARNING=new Vo("warning"),Vo.COMMENT=new Vo("comment"),function(r){r[r.VALUE=1]="VALUE",r[r.STATEMENT=3]="STATEMENT",r[r.DUMMY=5]="DUMMY",r[r.CUSTOM=6]="CUSTOM",r[r.END_ROW=7]="END_ROW"}(t.inputTypes$$module$build$src$core$inputs$input_types||(t.inputTypes$$module$build$src$core$inputs$input_types={})),t.inputTypes$$module$build$src$core$inputs$input_types;var Zi=function(r,a){window.alert(r),a&&a()},cu=function(r,a){a(window.confirm(r))},ml=function(r,a,f){f(window.prompt(r,a))},Ru={confirmInternal:Cr},hu={TEST_ONLY:Ru};hu.alert=wo,hu.confirm=Zt,hu.prompt=Ra,hu.setAlert=jl,hu.setConfirm=qa,hu.setPrompt=Ns;var bf,Bl;t.Msg$$module$build$src$core$msg=Object.create(null),bf=function(r){Object.keys(r).forEach(function(a){t.Msg$$module$build$src$core$msg[a]=r[a]})},Bl={Msg:t.Msg$$module$build$src$core$msg,setLocale:bf};var Ld=class extends h{constructor(r){super(),this.isBlank=typeof r>"u",r&&(this.varId=r.getId(),this.workspaceId=r.workspace.id)}toJson(){const r=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return r.varId=this.varId,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new Ld),a.varId=r.varId,a}},Dd=class extends Ld{constructor(r){super(r),this.type=mo,r&&(this.varType=r.type,this.varName=r.name)}toJson(){const r=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return r.varType=this.varType,r.varName=this.varName,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new Dd),a.varType=r.varType,a.varName=r.varName,a}run(r){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");r?a.createVariable(this.varName,this.varType,this.varId):a.deleteVariableById(this.varId)}};i(Bt.EVENT,mo,Dd);var cp=class{constructor(r,a,f,S){this.workspace=r,this.name=a,this.type=f||"",this.id_=S||le()}getId(){return this.id_}static compareByName(r,a){return r.name.localeCompare(a.name,void 0,{sensitivity:"base"})}},Eg="VARIABLE",Jf="ijkmnopqrstuvwxyzabcdefgh",Zc={generateUniqueNameInternal:mr},gl={CATEGORY_NAME:Eg,TEST_ONLY:Zc,VAR_LETTER_OPTIONS:Jf};gl.allDeveloperVariables=t.allDeveloperVariables$$module$build$src$core$variables,gl.allUsedVarModels=t.allUsedVarModels$$module$build$src$core$variables,gl.createVariableButtonHandler=Ts,gl.flyoutCategory=$n,gl.flyoutCategoryBlocks=$r,gl.generateUniqueName=zr,gl.generateUniqueNameFromOptions=Ni,gl.generateVariableFieldDom=Vs,gl.getAddedVariables=Xl,gl.getOrCreateVariablePackage=t.getOrCreateVariablePackage$$module$build$src$core$variables,gl.getVariable=t.getVariable$$module$build$src$core$variables,gl.nameUsedWithAnyType=Qa,gl.nameUsedWithConflictingParam=ka,gl.promptName=ci,gl.renameVariable=t.renameVariable$$module$build$src$core$variables;var eh=class{constructor(r,a,f,S,k){this.workspace=r,this.editable=this.movable=this.deletable=!0,this.disposed_=!1,this.isComment=!0,this.id=k&&!r.getCommentById(k)?k:le(),r.addTopComment(this),this.xy_=new fn(0,0),this.height_=f,this.width_=S,this.RTL=r.RTL,this.content_=a,eh.fireCreateEvent(this)}dispose(){this.disposed_||(ie()&&pe(new(ke(Vh))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(r){this.height_=r}getWidth(){return this.width_}setWidth(r){this.width_=r}getRelativeToSurfaceXY(){return new fn(this.xy_.x,this.xy_.y)}moveBy(r,a){const f=new(ke(va))(this);this.xy_.translate(r,a),f.recordNew(),pe(f)}isDeletable(){return this.deletable&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(r){this.deletable=r}isMovable(){return this.movable&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(r){this.movable=r}isEditable(){return this.editable&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(r){this.editable=r}getContent(){return this.content_}setContent(r){this.content_!==r&&(pe(new(ke(pd))(this,this.content_,r)),this.content_=r)}toXmlWithXY(r){return r=this.toXml(r),r.setAttribute("x",String(Math.round(this.xy_.x))),r.setAttribute("y",String(Math.round(this.xy_.y))),r.setAttribute("h",String(this.height_)),r.setAttribute("w",String(this.width_)),r}toXml(r){const a=t.createElement$$module$build$src$core$utils$xml("comment");return r||(a.id=this.id),a.textContent=this.getContent(),a}static fireCreateEvent(r){if(ie()){const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0);try{pe(new(ke(ls))(r))}finally{t.setGroup$$module$build$src$core$events$utils(a)}}}static fromXml(r,a){var f=eh.parseAttributes(r);return a=new eh(a,f.content,f.h,f.w,f.id),f=r.getAttribute("x"),r=r.getAttribute("y"),f=f?parseInt(f,10):NaN,r=r?parseInt(r,10):NaN,isNaN(f)||isNaN(r)||a.moveBy(f,r),eh.fireCreateEvent(a),a}static parseAttributes(r){const a=r.getAttribute("h"),f=r.getAttribute("w"),S=r.getAttribute("x"),k=r.getAttribute("y"),j=r.getAttribute("id");if(!j)throw Error("No ID present in XML comment definition.");let _e;return{id:j,h:a?parseInt(a):100,w:f?parseInt(f):100,x:S?parseInt(S):NaN,y:k?parseInt(k):NaN,content:(_e=r.textContent)!=null?_e:""}}},Nd=class extends g{constructor(r,a,f){super(f),this.type=go,this.oldElementId=r??void 0,this.newElementId=a??void 0}toJson(){const r=super.toJson();return r.oldElementId=this.oldElementId,r.newElementId=this.newElementId,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new Nd),a.oldElementId=r.oldElementId,a.newElementId=r.newElementId,a}};i(Bt.EVENT,go,Nd);var Hm={};Hm.register=mu,Hm.unregister=hh;var Gm=class{paste(r,a,f){const S=r.commentState;if(f)S.setAttribute("x",`${f.x}`),S.setAttribute("y",`${f.y}`);else{var k;f=parseInt((k=S.getAttribute("x"))!=null?k:"0")+50;let j;k=parseInt((j=S.getAttribute("y"))!=null?j:"0")+50,S.setAttribute("x",`${f}`),S.setAttribute("y",`${k}`)}return Pl.fromXmlRendered(r.commentState,a)}};Gm.TYPE="workspace-comment",mu(Gm.TYPE,new Gm);var yo=8,qf=3,ks=2,Pl=class extends eh{constructor(r,a,f,S,k){super(r,a,f,S,k),this.onMouseMoveWrapper=this.onMouseUpWrapper=null,this.eventsInit=!1,this.deleteIconBorder=this.deleteGroup=this.resizeGroup=this.foreignObject=this.svgHandleTarget=this.svgRectTarget=this.textarea=null,this.rendered=this.autoLayout=this.focused=!1,this.svgGroup=re(Ge.G,{class:"blocklyComment"}),this.workspace=r,this.svgRect_=re(Ge.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:qf,ry:qf}),this.svgGroup.appendChild(this.svgRect_),this.render()}dispose(){this.disposed_||(O()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),ie()&&pe(new(ke(Vh))(this)),pt(this.svgGroup),t.disable$$module$build$src$core$events$utils(),super.dispose(),t.enable$$module$build$src$core$events$utils())}initSvg(r){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit||(Ce(this.svgRectTarget,"pointerdown",this,this.pathMouseDown),Ce(this.svgHandleTarget,"pointerdown",this,this.pathMouseDown)),this.eventsInit=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!r&&this.textarea&&this.textarea.select()}pathMouseDown(r){const a=this.workspace.getGesture(r);a&&a.handleBubbleStart(r,this)}showContextMenu(r){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(O()!==this){var r=null;if(O()){r=O().id,t.disable$$module$build$src$core$events$utils();try{O().unselect()}finally{t.enable$$module$build$src$core$events$utils()}}r=new(ke(go))(r,this.id,this.workspace.id),pe(r),P(this),this.addSelect()}}unselect(){if(O()===this){var r=new(ke(go))(this.id,null,this.workspace.id);pe(r),P(null),this.removeSelect(),this.blurFocus()}}addSelect(){Be(this.svgGroup,"blocklySelected"),this.setFocus()}removeSelect(){Be(this.svgGroup,"blocklySelected"),this.blurFocus()}addFocus(){Be(this.svgGroup,"blocklyFocused")}removeFocus(){bt(this.svgGroup,"blocklyFocused")}getRelativeToSurfaceXY(){const r=this.workspace.getLayerManager();if(!r)throw Error("Cannot calculate position because the workspace has not been appended");let a=0,f=0,S=this.getSvgRoot();if(S)do{const k=ir(S);a+=k.x,f+=k.y,S=S.parentNode}while(S&&!r.hasLayer(S)&&S!==null);return this.xy_=new fn(a,f)}moveBy(r,a){const f=new(ke(va))(this),S=this.getRelativeToSurfaceXY();this.translate(S.x+r,S.y+a),this.xy_=new fn(S.x+r,S.y+a),f.recordNew(),pe(f),this.workspace.resizeContents()}translate(r,a){this.xy_=new fn(r,a),this.getSvgRoot().setAttribute("transform","translate("+r+","+a+")")}moveDuringDrag(r){r=`translate(${r.x}, ${r.y})`,this.getSvgRoot().setAttribute("transform",r)}moveTo(r,a){this.translate(r,a)}clearTransformAttributes(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var r=this.getRelativeToSurfaceXY();const a=this.getHeightWidth(),f=r.y,S=r.y+a.height;let k;return this.RTL?(k=r.x-a.width,r=r.x):(k=r.x,r=r.x+a.width),new Ri(f,S,k,r)}updateMovable(){this.isMovable()?Be(this.svgGroup,"blocklyDraggable"):bt(this.svgGroup,"blocklyDraggable")}setMovable(r){super.setMovable(r),this.updateMovable()}setEditable(r){super.setEditable(r),this.textarea&&(this.textarea.readOnly=!r)}setDragging(r){r?Be(this.getSvgRoot(),"blocklyDragging"):bt(this.getSvgRoot(),"blocklyDragging")}getSvgRoot(){return this.svgGroup}getContent(){return this.textarea?this.textarea.value:this.content_}setContent(r){super.setContent(r),this.textarea&&(this.textarea.value=r)}setDeleteStyle(r){r?Be(this.svgGroup,"blocklyDraggingDelete"):bt(this.svgGroup,"blocklyDraggingDelete")}setAutoLayout(r){}toXmlWithXY(r){let a=0;this.workspace.RTL&&(a=this.workspace.getWidth()),r=this.toXml(r);const f=this.getRelativeToSurfaceXY();return r.setAttribute("x",String(Math.round(this.workspace.RTL?a-f.x:f.x))),r.setAttribute("y",String(Math.round(f.y))),r.setAttribute("h",String(this.getHeight())),r.setAttribute("w",String(this.getWidth())),r}toCopyData(){return{paster:Gm.TYPE,commentState:this.toXmlWithXY()}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered){var r=this.getHeightWidth(),a=this.createEditor();this.svgGroup.appendChild(a),this.svgHandleTarget=re(Ge.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup.appendChild(this.svgHandleTarget),this.svgRectTarget=re(Ge.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:qf,ry:qf}),this.svgGroup.appendChild(this.svgRectTarget),this.addResizeDom(),this.isDeletable()&&this.addDeleteDom(),this.setSize(r.width,r.height),this.textarea.value=this.content_,this.rendered=!0,this.resizeGroup&&Ce(this.resizeGroup,"pointerdown",this,this.resizeMouseDown),this.isDeletable()&&(Ce(this.deleteGroup,"pointerdown",this,this.deleteMouseDown),Ce(this.deleteGroup,"pointerout",this,this.deleteMouseOut),Ce(this.deleteGroup,"pointerup",this,this.deleteMouseUp))}}createEditor(){this.foreignObject=re(Ge.FOREIGNOBJECT,{x:0,y:Pl.TOP_OFFSET,class:"blocklyCommentForeignObject"});const r=document.createElementNS(Tc,"body");r.setAttribute("xmlns",Tc),r.className="blocklyMinimalBody";const a=document.createElementNS(Tc,"textarea");return a.className="blocklyCommentTextarea",a.setAttribute("dir",this.RTL?"RTL":"LTR"),a.readOnly=!this.isEditable(),r.appendChild(a),this.textarea=a,this.foreignObject.appendChild(r),Ce(a,"wheel",this,function(f){f.stopPropagation()}),Ce(a,"change",this,function(f){this.setContent(a.value)}),this.foreignObject}addResizeDom(){this.resizeGroup=re(Ge.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup),re(Ge.POLYGON,{points:`0,${yo} ${yo},${yo} ${yo},0`},this.resizeGroup),re(Ge.LINE,{class:"blocklyResizeLine",x1:yo/3,y1:yo-1,x2:yo-1,y2:yo/3},this.resizeGroup),re(Ge.LINE,{class:"blocklyResizeLine",x1:2*yo/3,y1:yo-1,x2:yo-1,y2:2*yo/3},this.resizeGroup)}addDeleteDom(){this.deleteGroup=re(Ge.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup),this.deleteIconBorder=re(Ge.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup),re(Ge.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup),re(Ge.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup)}resizeMouseDown(r){this.unbindDragEvents(),vt(r)||(this.workspace.startDrag(r,new fn(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper=Ce(document,"pointerup",this,this.resizeMouseUp),this.onMouseMoveWrapper=Ce(document,"pointermove",this,this.resizeMouseMove),this.workspace.hideChaff()),r.stopPropagation()}deleteMouseDown(r){this.deleteIconBorder&&Be(this.deleteIconBorder,"blocklyDeleteIconHighlighted"),r.stopPropagation()}deleteMouseOut(r){this.deleteIconBorder&&bt(this.deleteIconBorder,"blocklyDeleteIconHighlighted")}deleteMouseUp(r){this.dispose(),r.stopPropagation()}unbindDragEvents(){this.onMouseUpWrapper&&(it(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onMouseMoveWrapper&&(it(this.onMouseMoveWrapper),this.onMouseMoveWrapper=null)}resizeMouseUp(r){tt(),this.unbindDragEvents()}resizeMouseMove(r){this.autoLayout=!1,r=this.workspace.moveDrag(r),this.setSize(this.RTL?-r.x:r.x,r.y)}resizeComment(){const r=this.getHeightWidth(),a=Pl.TOP_OFFSET,f=2*ks;let S;(S=this.foreignObject)==null||S.setAttribute("width",String(r.width));let k;if((k=this.foreignObject)==null||k.setAttribute("height",String(r.height-a)),this.RTL){let j;(j=this.foreignObject)==null||j.setAttribute("x",String(-r.width))}this.textarea&&(this.textarea.style.width=r.width-f+"px",this.textarea.style.height=r.height-f-a+"px")}setSize(r,a){r=Math.max(r,45),a=Math.max(a,20+Pl.TOP_OFFSET),this.width_=r,this.height_=a,this.svgRect_.setAttribute("width",`${r}`),this.svgRect_.setAttribute("height",`${a}`);let f;(f=this.svgRectTarget)==null||f.setAttribute("width",`${r}`);let S;(S=this.svgRectTarget)==null||S.setAttribute("height",`${a}`);let k;(k=this.svgHandleTarget)==null||k.setAttribute("width",`${r}`);let j;if((j=this.svgHandleTarget)==null||j.setAttribute("height",String(Pl.TOP_OFFSET)),this.RTL){this.svgRect_.setAttribute("transform","scale(-1 1)");let _e;(_e=this.svgRectTarget)==null||_e.setAttribute("transform","scale(-1 1)")}if(this.resizeGroup)if(this.RTL){this.resizeGroup.setAttribute("transform","translate("+(-r+yo)+","+(a-yo)+") scale(-1 1)");let _e;(_e=this.deleteGroup)==null||_e.setAttribute("transform","translate("+(-r+yo)+","+-yo+") scale(-1 1)")}else{this.resizeGroup.setAttribute("transform","translate("+(r-yo)+","+(a-yo)+")");let _e;(_e=this.deleteGroup)==null||_e.setAttribute("transform","translate("+(r-yo)+","+-yo+")")}this.resizeComment()}setFocus(){this.focused=!0,setTimeout(()=>{this.disposed_||(this.textarea.focus(),this.addFocus(),this.svgRectTarget&&Be(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&Be(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused=!1,setTimeout(()=>{this.disposed_||(this.textarea.blur(),this.removeFocus(),this.svgRectTarget&&bt(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&bt(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered(r,a,f){t.disable$$module$build$src$core$events$utils();let S;try{const k=eh.parseAttributes(r);if(S=new Pl(a,k.content,k.h,k.w,k.id),a.rendered&&(S.initSvg(!0),S.render()),!isNaN(k.x)&&!isNaN(k.y))if(a.RTL){const j=f||a.getWidth();S.moveBy(j-k.x,k.y)}else S.moveBy(k.x,k.y)}finally{t.enable$$module$build$src$core$events$utils()}return eh.fireCreateEvent(S),S}};Pl.DEFAULT_SIZE=100,Pl.TOP_OFFSET=10,$t(`
.blocklyCommentForeignObject {
  position: relative;
  z-index: 0;
}

.blocklyCommentRect {
  fill: #E7DE8E;
  stroke: #bcA903;
  stroke-width: 1px;
}

.blocklyCommentTarget {
  fill: transparent;
  stroke: #bcA903;
}

.blocklyCommentTargetFocused {
  fill: none;
}

.blocklyCommentHandleTarget {
  fill: none;
}

.blocklyCommentHandleTargetFocused {
  fill: transparent;
}

.blocklyFocused>.blocklyCommentRect {
  fill: #B9B272;
  stroke: #B9B272;
}

.blocklySelected>.blocklyCommentTarget {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCommentDeleteIcon {
  cursor: pointer;
  fill: #000;
  display: none;
}

.blocklySelected > .blocklyCommentDeleteIcon {
  display: block;
}

.blocklyDeleteIconShape {
  fill: #000;
  stroke: #000;
  stroke-width: 1px;
}

.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
  stroke: #fc3;
}
`);var Tf=new Set,xg=new WeakSet,Bd=null,Wm=null,Ec=0,Pd={};Pd.finishQueuedRenders=pr,Pd.queueRender=Ko,Pd.triggerQueuedRenders=Ei;var ra={};ra.appendDomToWorkspace=Td,ra.blockToDom=el,ra.blockToDomWithXY=_r,ra.clearWorkspaceAndLoadFromXml=tl,ra.deleteNext=la,ra.domToBlock=t.domToBlock$$module$build$src$core$xml,ra.domToBlockInternal=ro,ra.domToPrettyText=ms,ra.domToText=Ki,ra.domToVariables=Pu,ra.domToWorkspace=t.domToWorkspace$$module$build$src$core$xml,ra.variablesToDom=gr,ra.workspaceToDom=xl;var Ea=class extends Error{},u_=class extends Ea{constructor(r){super("Expected to find a 'type' property, defining the block type"),this.state=r}},Qf=class extends Ea{constructor(r,a,f){super(`The block ${a.toDevString()} is missing a(n) ${r}
connection`),this.block=a,this.state=f}},u0=class extends Ea{constructor(r,a,f,S){super(`The block ${f.toDevString()} could not connect its
${a} to its parent, because: ${r}`),this.childBlock=f,this.childState=S}},hv=class extends Ea{constructor(r){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=r}},Np=class extends Ea{constructor(r,a,f){super(`Cannot add an icon of type '${r}' to the block ${a.toDevString()}, because there is no icon registered with type '${r}'. Make sure that all of your icons have been registered.`),this.block=a,this.state=f}},Sf={};Sf.BadConnectionCheck=u0,Sf.DeserializationError=Ea,Sf.MissingBlockType=u_,Sf.MissingConnection=Qf,Sf.RealChildOfShadow=hv,Sf.UnregisteredIcon=Np;var c0=100,Ef=75,h0=50,Zf={BLOCKS:h0,PROCEDURES:Ef,VARIABLES:c0},d0={};d0.register=Ms,d0.unregister=vi;var c_=class{constructor(){this.priority=h0}save(r){const a=[];for(const f of r.getTopBlocks(!1))(r=xi(f,{addCoordinates:!0,doFullSerialization:!1}))&&a.push(r);return a.length?{languageVersion:0,blocks:a}:null}load(r,a){r=r.blocks;for(const f of r)zn(f,a,{recordUndo:ce()})}clear(r){for(const a of r.getTopBlocks(!1))a.dispose(!1)}};Ms("blocks",new c_);var em={};em.BlockSerializer=c_,em.append=zn,em.appendInternal=$i,em.save=xi;var hp=class extends h{constructor(r){super(),this.isBlank=!r,r&&(this.blockId=r.id,this.workspaceId=r.workspace.id)}toJson(){const r=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return r.blockId=this.blockId,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new hp),a.blockId=r.blockId,a}},h_=class extends hp{constructor(r){super(r),this.type=t.CREATE$$module$build$src$core$events$utils,r&&(r.isShadow()&&(this.recordUndo=!1),this.xml=_r(r),this.ids=Se(r),this.json=xi(r,{addCoordinates:!0}))}toJson(){const r=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return r.xml=Ki(this.xml),r.ids=this.ids,r.json=this.json,this.recordUndo||(r.recordUndo=this.recordUndo),r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new h_),a.xml=t.textToDom$$module$build$src$core$utils$xml(r.xml),a.ids=r.ids,a.json=r.json,r.recordUndo!==void 0&&(a.recordUndo=r.recordUndo),a}run(r){const a=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!Dy(a,this.ids))if(r)zn(this.json,a);else for(r=0;r<this.ids.length;r++){const f=this.ids[r],S=a.getBlockById(f);S?S.dispose(!1):f===this.blockId&&console.warn("Can't uncreate non-existent block: "+f)}}},Dy=function(r,a){return a.map(f=>r.getBlockById(f)).filter(f=>f&&f.isShadow()).length===a.length};i(Bt.EVENT,t.CREATE$$module$build$src$core$events$utils,h_);var p0=class extends g{constructor(r,a){super(a),this.type=lu,this.themeName=r}toJson(){const r=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return r.themeName=this.themeName,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new p0),a.themeName=r.themeName,a}};i(Bt.EVENT,lu,p0);var f0=class extends g{constructor(r,a,f,S,k){super(S),this.type=ni,this.viewTop=r,this.viewLeft=a,this.scale=f,this.oldScale=k}toJson(){const r=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return r.viewTop=this.viewTop,r.viewLeft=this.viewLeft,r.scale=this.scale,r.oldScale=this.oldScale,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new f0),a.viewTop=r.viewTop,a.viewLeft=r.viewLeft,a.scale=r.scale,a.oldScale=r.oldScale,a}};i(Bt.EVENT,ni,f0);var Bp;Bp=28,t.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:Bp,connectingSnapRadius:Bp,currentConnectionPreference:8,bumpDelay:250},t.config$$module$build$src$core$config;var Pn;(function(r){r[r.INPUT_VALUE=1]="INPUT_VALUE",r[r.OUTPUT_VALUE=2]="OUTPUT_VALUE",r[r.NEXT_STATEMENT=3]="NEXT_STATEMENT",r[r.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(Pn||(Pn={}));var th=class{constructor(r){this.connectionChecker=r,this.connections=[]}addConnection(r,a){a=this.calculateIndexForYPos(a),this.connections.splice(a,0,r)}findIndexOfConnection(r,a){if(!this.connections.length)return-1;const f=this.calculateIndexForYPos(a);if(f>=this.connections.length)return-1;a=r.y;let S=f;for(;0<=S&&this.connections[S].y===a;){if(this.connections[S]===r)return S;S--}for(S=f;S<this.connections.length&&this.connections[S].y===a;){if(this.connections[S]===r)return S;S++}return-1}calculateIndexForYPos(r){if(!this.connections.length)return 0;let a=0,f=this.connections.length;for(;a<f;){const S=Math.floor((a+f)/2);if(this.connections[S].y<r)a=S+1;else if(this.connections[S].y>r)f=S;else{a=S;break}}return a}removeConnection(r,a){if(r=this.findIndexOfConnection(r,a),r===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(r,1)}getNeighbours(r,a){function f(Hn){const _l=k-S[Hn].x,Ka=j-S[Hn].y;return Math.sqrt(_l*_l+Ka*Ka)<=a&&Wt.push(S[Hn]),Ka<a}const S=this.connections,k=r.x,j=r.y;r=0;let _e=S.length-2,Ue=_e;for(;r<Ue;)S[Ue].y<j?r=Ue:_e=Ue,Ue=Math.floor((r+_e)/2);const Wt=[];if(_e=r=Ue,S.length){for(;0<=r&&f(r);)r--;do _e++;while(_e<S.length&&f(_e))}return Wt}isInYRange(r,a,f){return Math.abs(this.connections[r].y-a)<=f}searchForClosest(r,a,f){if(!this.connections.length)return{connection:null,radius:a};const S=r.y,k=r.x;r.x=k+f.x,r.y=S+f.y;var j=this.calculateIndexForYPos(r.y);f=null;let _e=a,Ue,Wt=j-1;for(;0<=Wt&&this.isInYRange(Wt,r.y,a);)Ue=this.connections[Wt],this.connectionChecker.canConnect(r,Ue,!0,_e)&&(f=Ue,_e=Ue.distanceFrom(r)),Wt--;for(;j<this.connections.length&&this.isInYRange(j,r.y,a);)Ue=this.connections[j],this.connectionChecker.canConnect(r,Ue,!0,_e)&&(f=Ue,_e=Ue.distanceFrom(r)),j++;return r.x=k,r.y=S,{connection:f,radius:_e}}static init(r){const a=[];return a[Pn.INPUT_VALUE]=new th(r),a[Pn.OUTPUT_VALUE]=new th(r),a[Pn.NEXT_STATEMENT]=new th(r),a[Pn.PREVIOUS_STATEMENT]=new th(r),a}},xf=class{paste(r,a,f){if(!a.isCapacityAvailable(r.typeCounts))return null;f&&(r.blockState.x=f.x,r.blockState.y=f.y),t.disable$$module$build$src$core$events$utils();let S;try{S=zn(r.blockState,a),np(S)}finally{t.enable$$module$build$src$core$events$utils()}return S&&(ie()&&!S.isShadow()&&pe(new(ke(t.CREATE$$module$build$src$core$events$utils))(S)),S.select(),S)}};xf.TYPE="block",mu(xf.TYPE,new xf);var ia=null,d_=null,m0={duplicateInternal:Da,copyInternal:Kl},tm={};tm.BlockPaster=xf,tm.TEST_ONLY=m0,tm.copy=Sd,tm.duplicate=mh,tm.paste=Is,tm.registry=Hm;var Ny="aria-",dv="role",nh;(function(r){r.GRID="grid",r.GRIDCELL="gridcell",r.GROUP="group",r.LISTBOX="listbox",r.MENU="menu",r.MENUITEM="menuitem",r.MENUITEMCHECKBOX="menuitemcheckbox",r.OPTION="option",r.PRESENTATION="presentation",r.ROW="row",r.TREE="tree",r.TREEITEM="treeitem"})(nh||(nh={}));var bo;(function(r){r.ACTIVEDESCENDANT="activedescendant",r.COLCOUNT="colcount",r.DISABLED="disabled",r.EXPANDED="expanded",r.INVALID="invalid",r.LABEL="label",r.LABELLEDBY="labelledby",r.LEVEL="level",r.ORIENTATION="orientation",r.POSINSET="posinset",r.ROWCOUNT="rowcount",r.SELECTED="selected",r.SETSIZE="setsize",r.VALUEMAX="valuemax",r.VALUEMIN="valuemin"})(bo||(bo={}));var ku={};ku.Role=nh,ku.State=bo,ku.setRole=ai,ku.setState=Sr;var wg=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(r){this.menuItems.push(r)}render(r){const a=document.createElement("div");a.className="blocklyMenu goog-menu blocklyNonSelectable",a.tabIndex=0,this.roleName&&ai(a,this.roleName),this.element=a;for(let f=0,S;S=this.menuItems[f];f++)a.appendChild(S.createDom());return this.mouseOverHandler=Ce(a,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=Ce(a,"pointerup",this,this.handleClick,!0),this.mouseEnterHandler=Ce(a,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=Ce(a,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=Ce(a,"keydown",this,this.handleKeyEvent),r.appendChild(a),a}getElement(){return this.element}focus(){const r=this.getElement();r&&(r.focus({preventScroll:!0}),Be(r,"blocklyFocused"))}blur(){const r=this.getElement();r&&(r.blur(),bt(r,"blocklyFocused"))}setRole(r){this.roleName=r}dispose(){this.mouseOverHandler&&(it(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(it(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(it(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(it(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(it(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let r=0,a;a=this.menuItems[r];r++)a.dispose();this.element=null}getMenuItem(r){const a=this.getElement();for(;r&&r!==a;){if(r.classList.contains("blocklyMenuItem")){for(let f=0,S;S=this.menuItems[f];f++)if(S.getElement()===r)return S}r=r.parentElement}return null}setHighlighted(r){var a=this.highlightedItem;a&&(a.setHighlighted(!1),this.highlightedItem=null),r&&(r.setHighlighted(!0),this.highlightedItem=r,a=this.getElement(),Si(r.getElement(),a),Sr(a,bo.ACTIVEDESCENDANT,r.getId()))}highlightNext(){const r=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(r,1)}highlightPrevious(){const r=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>r?this.menuItems.length:r,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(r,a){r+=a;let f;for(;f=this.menuItems[r];){if(f.isEnabled()){this.setHighlighted(f);break}r+=a}}handleMouseOver(r){(r=this.getMenuItem(r.target))&&(r.isEnabled()?this.highlightedItem!==r&&this.setHighlighted(r):this.setHighlighted(null))}handleClick(r){const a=this.openingCoords;if(this.openingCoords=null,a&&typeof r.clientX=="number"){const f=new fn(r.clientX,r.clientY);if(1>fn.distance(a,f))return}(r=this.getMenuItem(r.target))&&r.performAction()}handleMouseEnter(r){this.focus()}handleMouseLeave(r){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(r){if(this.menuItems.length&&!(r.shiftKey||r.ctrlKey||r.metaKey||r.altKey)){var a=this.highlightedItem;switch(r.key){case"Enter":case" ":a&&a.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}r.preventDefault(),r.stopPropagation()}}getSize(){const r=this.getElement(),a=Yt(r);return a.height=r.scrollHeight,a}},Pp=class{constructor(r,a){this.content=r,this.opt_value=a,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const r=document.createElement("div");r.id=oe(),this.element=r,r.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const a=document.createElement("div");if(a.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var f=document.createElement("div");f.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",a.appendChild(f)}return f=this.content,typeof this.content=="string"&&(f=document.createTextNode(this.content)),a.appendChild(f),r.appendChild(a),this.roleName&&ai(r,this.roleName),Sr(r,bo.SELECTED,this.checkable&&this.checked||!1),Sr(r,bo.DISABLED,!this.enabled),r}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let r;return(r=this.opt_value)!=null?r:null}setRightToLeft(r){this.rightToLeft=r}setRole(r){this.roleName=r}setCheckable(r){this.checkable=r}setChecked(r){this.checked=r}setHighlighted(r){this.highlight=r;const a=this.getElement();a&&this.isEnabled()&&(r?(Be(a,"blocklyMenuItemHighlight"),Be(a,"goog-menuitem-highlight")):(bt(a,"blocklyMenuItemHighlight"),bt(a,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(r){this.enabled=r}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(r,a){this.actionHandler=r.bind(a)}},Yh=null,nm=null,Fp="blocklyWidgetDiv",Up="",wf="",fd,dp={};dp.createDom=Fo,dp.getDiv=so,dp.hide=ql,dp.hideIfOwner=Hr,dp.isVisible=Oh,dp.positionWithAnchor=vr,dp.repositionForWindowResize=rp,dp.show=Jl,dp.testOnly_setDiv=Na;var Vm=null,pv={},$g=null,Fd={};Fd.callbackFactory=t.callbackFactory$$module$build$src$core$contextmenu,Fd.commentDeleteOption=Zl,Fd.commentDuplicateOption=Dh,Fd.dispose=Ps,Fd.getCurrentBlock=ip,Fd.hide=Ql,Fd.setCurrentBlock=ld,Fd.show=Hu,Fd.workspaceCommentOption=Nc;var ki=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(r){if(this.registry_.has(r.id))throw Error('Menu item with ID "'+r.id+'" is already registered.');this.registry_.set(r.id,r)}unregister(r){if(!this.registry_.has(r))throw Error('Menu item with ID "'+r+'" not found.');this.registry_.delete(r)}getItem(r){let a;return(a=this.registry_.get(r))!=null?a:null}getContextMenuOptions(r,a){const f=[];for(const k of this.registry_.values())if(r===k.scopeType){var S=k.preconditionFn(a);S!=="hidden"&&(S={text:typeof k.displayText=="function"?k.displayText(a):k.displayText,enabled:S==="enabled",callback:k.callback,scope:a,weight:k.weight},f.push(S))}return f.sort(function(k,j){return k.weight-j.weight}),f}};(function(r){var a=r.ScopeType||(r.ScopeType={});a.BLOCK="block",a.WORKSPACE="workspace",r.registry=new r})(ki||(ki={})),ki.ScopeType;var rm={};rm.clamp=Nr,rm.toDegrees=ns,rm.toRadians=Bc;var jm=16,Cg=1,fv=12,Xm=16,$f=.25,Ym=null,zp=null,Hp="",im="",bi,Gp,sm,om=null,Cf=null,Ag=null,v={getBoundsInfo:function(){const r=Dn(om),a=Yt(om);return{left:r.x,right:r.x+a.width,top:r.y,bottom:r.y+a.height,width:a.width,height:a.height}},getPositionMetrics:function(r,a,f,S){const k=v.getBoundsInfo(),j=Yt(bi);return a+j.height<k.bottom?Cn(r,a,k,j):S-j.height>k.top?jn(f,S,k,j):a+j.height<document.documentElement.clientHeight?Cn(r,a,k,j):S-j.height>document.documentElement.clientTop?jn(f,S,k,j):mn(r,k,j)}},T={ANIMATION_TIME:$f,ARROW_HORIZONTAL_PADDING:fv,ARROW_SIZE:jm,BORDER_SIZE:Cg,PADDING_Y:Xm,TEST_ONLY:v};T.clearContent=gh,T.createDom=wl,T.getContentDiv=xu,T.getOwner=eu,T.getPositionX=Br,T.hide=ao,T.hideIfOwner=yi,T.hideWithoutAnimation=il,T.isVisible=oo,T.repositionForWindowResize=gs,T.setBoundsElement=Ba,T.setColour=Ed,T.show=en,T.showPositionedByBlock=hi,T.showPositionedByField=ve;var R=null,F=null,X={};X.connectionUiEffect=ha,X.disconnectUiEffect=js,X.disconnectUiStop=Pa,X.disposeUiEffect=wu;var Z=50,ye=100,Xe=class{constructor(r,a){this.bubble=r,this.workspace=a,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY()}startBubbleDrag(){t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout&&this.bubble.setAutoLayout(!1);let r;(r=this.workspace.getLayerManager())==null||r.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(r,a){a=this.pixelsToWorkspaceUnits_(a),a=fn.sum(this.startXY_,a),this.bubble.moveDuringDrag(a),a=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(r),r=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),r!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==a&&(a&&a.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(r){return r&&this.workspace.getComponentManager().hasCapability(r.id,pl.Capability.DELETE_AREA)?r.wouldDelete(this.bubble,!1):!1}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(r,a){if(this.dragBubble(r,a),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?r=this.startXY_:(r=this.pixelsToWorkspaceUnits_(a),r=fn.sum(this.startXY_,r)),this.bubble.moveTo(r.x,r.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_)this.fireMoveEvent_(),this.bubble.dispose();else{if(this.bubble.setDragging){this.bubble.setDragging(!1);let f;(f=this.workspace.getLayerManager())==null||f.moveOffDragLayer(this.bubble,ye)}this.fireMoveEvent_()}this.workspace.setResizesEnabled(!0),t.setGroup$$module$build$src$core$events$utils(!1)}fireMoveEvent_(){if(this.bubble instanceof Pl){const r=new(ke(va))(this.bubble);r.setOldCoordinate(this.startXY_),r.recordNew(),pe(r)}}pixelsToWorkspaceUnits_(r){return r=new fn(r.x/this.workspace.scale,r.y/this.workspace.scale),this.workspace.isMutator&&r.scale(1/this.workspace.options.parentWorkspace.scale),r}},st=30,Lt=!0,qt=[];qt[Pn.INPUT_VALUE]=Pn.OUTPUT_VALUE,qt[Pn.OUTPUT_VALUE]=Pn.INPUT_VALUE,qt[Pn.NEXT_STATEMENT]=Pn.PREVIOUS_STATEMENT,qt[Pn.PREVIOUS_STATEMENT]=Pn.NEXT_STATEMENT;var ln="RENAME_VARIABLE_ID",nn="DELETE_VARIABLE_ID",kn={};kn.commonWordPrefix=hc,kn.commonWordSuffix=qo,kn.isNumber=t.isNumber$$module$build$src$core$utils$string,kn.shortestStringLength=_h,kn.startsWith=Nh,kn.wrap=t.wrap$$module$build$src$core$utils$string;var Kn=void 0,Zn=!1,Ro=!1,wt=50,ht=0,xt=0,yn=0,sr=0,Qn=null,dr=null,Ir=0,Fl=10,cs=10,Wp=750,g0=5,Ou=null,Ud={HOVER_MS:Wp,LIMIT:wt,MARGINS:g0,OFFSET_X:Ir,OFFSET_Y:Fl,RADIUS_OK:cs};Ud.bindMouseEvents=Fi,Ud.block=wd,Ud.createDom=Fh,Ud.dispose=xd,Ud.getCustomTooltip=Wu,Ud.getDiv=Qo,Ud.getTooltipOfObject=lo,Ud.hide=Cl,Ud.isVisible=ud,Ud.setCustomTooltip=dc,Ud.unbindMouseEvents=cd,Ud.unblock=Uh;var G1=class{constructor(r){this.workspace=r,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new fn(r.scrollX,r.scrollY)}dispose(){this.workspace=null}startDrag(){O()&&O().unselect()}endDrag(r){this.drag(r)}drag(r){if(r=fn.sum(this.startScrollXY_,r),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(r.x,r.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(r.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,r.y);else throw new TypeError("Invalid state.")}},FE=5,UE=6,am=class{constructor(r,a){this.creatorWorkspace=a,this.mouseDownXY=new fn(0,0),this.startWorkspace_=this.targetBlock=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.flyout=this.workspaceDragger=this.blockDragger=this.bubbleDragger=null,this.isMultiTouch_=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=r,this.currentDragDeltaXY=new fn(0,0),this.healStack=!Lt}dispose(){tt(),Uh(),this.creatorWorkspace.clearGesture();for(const r of this.boundEvents)it(r);this.boundEvents.length=0,this.blockDragger&&this.blockDragger.dispose(),this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(r){const a=new fn(r.clientX,r.clientY);this.updateDragDelta(a)&&(this.updateIsDragging(),rt()),this.mostRecentEvent=r}updateDragDelta(r){return this.currentDragDeltaXY=fn.difference(r,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=fn.magnitude(this.currentDragDeltaXY)>(this.flyout?t.config$$module$build$src$core$config.flyoutDragRadius:t.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let r;if(!this.targetBlock||(r=this.flyout)==null||!r.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),this.targetBlock.select(),!0):!1}updateIsDraggingBubble(){return this.startBubble?(this.startDraggingBubble(),!0):!1}updateIsDraggingBlock(){if(!this.targetBlock)return!1;if(this.flyout){if(this.updateIsDraggingFromFlyout())return this.startDraggingBlock(),!0}else if(this.targetBlock.isMovable())return this.startDraggingBlock(),!0;return!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger=new G1(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(){if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.updateIsDraggingBubble()||this.updateIsDraggingBlock()||this.updateIsDraggingWorkspace()}startDraggingBlock(){this.blockDragger=new(y(Bt.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock,this.startWorkspace_),this.blockDragger.startDrag(this.currentDragDeltaXY,this.healStack),this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY)}startDraggingBubble(){if(!this.startBubble)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger=new Xe(this.startBubble,this.startWorkspace_),this.bubbleDragger.startBubbleDrag(),this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY)}doStart(r){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,ot(r)?this.cancel():(this.gestureHasStarted=!0,Pa(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=eu(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=r,wd(),this.targetBlock&&this.targetBlock.select(),vt(r)?this.handleRightClick(r):(r.type.toLowerCase()==="pointerdown"&&r.pointerType!=="mouse"&&De(r,this),this.mouseDownXY=new fn(r.clientX,r.clientY),this.healStack=r.altKey||r.ctrlKey||r.metaKey,this.bindMouseEvents(r),this.isEnding_||this.handleTouchStart(r)))}bindMouseEvents(r){this.boundEvents.push(Ce(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(Ce(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(Ce(document,"pointerup",null,this.handleUp.bind(this),!0)),r.preventDefault(),r.stopPropagation()}handleStart(r){this.isDragging()||(this.handleTouchStart(r),this.isMultiTouch()&&rt())}handleMove(r){this.isDragging()&&ft(r)||!this.isMultiTouch()?(this.updateFromEvent(r),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.blockDragger?this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY):this.bubbleDragger&&this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY),r.preventDefault(),r.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(r),rt())}handleUp(r){if(this.isDragging()||this.handleTouchEnd(r),!this.isMultiTouch()||this.isDragging()){if(!ft(r))return;if(this.updateFromEvent(r),rt(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.bubbleDragger?this.bubbleDragger.endBubbleDrag(r,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(r,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()?this.doBubbleClick():this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(r)}r.preventDefault(),r.stopPropagation(),this.dispose()}handleTouchStart(r){var a=ct(r);this.cachedPoints.set(a,this.getTouchPoint(r));var f=Array.from(this.cachedPoints.keys());f.length===2&&(a=this.cachedPoints.get(f[0]),f=this.cachedPoints.get(f[1]),this.startDistance=fn.distance(a,f),this.isMultiTouch_=!0,r.preventDefault())}handleTouchMove(r){const a=ct(r);this.cachedPoints.set(a,this.getTouchPoint(r)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(r):this.handleMove(r)}handlePinch(r){var a=Array.from(this.cachedPoints.keys()),f=this.cachedPoints.get(a[0]);if(a=this.cachedPoints.get(a[1]),f=fn.distance(f,a)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(a=f-this.previousScale,a=0<a?a*FE:a*UE,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const S=this.startWorkspace_,k=It(r,S.getParentSvg(),S.getInverseScreenCTM());S.zoom(k.x,k.y,a)}this.previousScale=f,r.preventDefault()}handleTouchEnd(r){r=ct(r),this.cachedPoints.has(r)&&this.cachedPoints.delete(r),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(r){return this.startWorkspace_?new fn(r.pageX,r.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(rt(),this.bubbleDragger?this.bubbleDragger.endBubbleDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(r){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(r)):this.startBubble?this.startBubble.showContextMenu(r):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(r)),r.preventDefault(),r.stopPropagation(),this.dispose()}handleWsStart(r,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(a),this.mostRecentEvent=r,this.doStart(r)}fireWorkspaceClick(r){pe(new(ke(tc))(null,r.id,"workspace"))}handleFlyoutStart(r,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(a),this.handleWsStart(r,a.getWorkspace())}handleBlockStart(r,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(a),this.mostRecentEvent=r}handleBubbleStart(r,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(a),this.mostRecentEvent=r}doBubbleClick(){this.startBubble instanceof Pl&&(this.startBubble.setFocus(),this.startBubble.select())}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock.isEnabled()&&(t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.flyout.createBlock(this.targetBlock).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const r=new(ke(tc))(this.startBlock,this.startWorkspace_.id,"block");pe(r)}this.bringBlockToFront(),t.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(r){r=this.creatorWorkspace,O()&&O().unselect(),this.fireWorkspaceClick(this.startWorkspace_||r)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(r){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=r)}setStartIcon(r){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=r)}setStartBubble(r){this.startBubble||(this.startBubble=r)}setStartBlock(r){this.startBlock||this.startBubble||(this.startBlock=r,r.isInFlyout&&r!==r.getRootBlock()?this.setTargetBlock(r.getRootBlock()):this.setTargetBlock(r))}setTargetBlock(r){r.isShadow()?this.setTargetBlock(r.getParent()):this.targetBlock=r}setStartWorkspace(r){this.startWorkspace_||(this.startWorkspace_=r)}setStartFlyout(r){this.flyout||(this.flyout=r)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const r=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&r}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}isDragging(){return!!this.workspaceDragger||!!this.blockDragger||!!this.bubbleDragger}hasStarted(){return this.gestureHasStarted}getInsertionMarkers(){return this.blockDragger?this.blockDragger.getInsertionMarkers():[]}getCurrentDragger(){let r,a;return(a=(r=this.blockDragger)!=null?r:this.workspaceDragger)!=null?a:this.bubbleDragger}static inProgress(){const r=E();for(let a=0,f;f=r[a];a++)if(f.currentGesture_)return!0;return!1}},By=class{constructor(r,a){this.pattern=r,this.scale=1;let f;this.spacing=(f=a.spacing)!=null?f:0;let S;this.length=(S=a.length)!=null?S:1,this.line2=(this.line1=r.firstChild)&&this.line1.nextSibling;let k;this.snapToGrid=(k=a.snap)!=null?k:!1}setSpacing(r){this.spacing=r,this.update(this.scale)}setLength(r){this.length=r,this.update(this.scale)}setSnapToGrid(r){this.snapToGrid=r}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(r){this.scale=r;var a=this.spacing*r;this.pattern.setAttribute("width",`${a}`),this.pattern.setAttribute("height",`${a}`),a=Math.floor(this.spacing/2)+.5;let f=a-this.length/2,S=a+this.length/2;a*=r,f*=r,S*=r,this.setLineAttributes(this.line1,r,f,S,a,a),this.setLineAttributes(this.line2,r,a,a,f,S)}setLineAttributes(r,a,f,S,k,j){r&&(r.setAttribute("stroke-width",`${a}`),r.setAttribute("x1",`${f}`),r.setAttribute("y1",`${k}`),r.setAttribute("x2",`${S}`),r.setAttribute("y2",`${j}`))}moveTo(r,a){this.pattern.setAttribute("x",`${r}`),this.pattern.setAttribute("y",`${a}`)}static createDom(r,a,f){r=re(Ge.PATTERN,{id:"blocklyGridPattern"+r,patternUnits:"userSpaceOnUse"},f);let S,k;if(0<((S=a.length)!=null?S:1)&&0<((k=a.spacing)!=null?k:0)){re(Ge.LINE,{stroke:a.colour},r);let j;(j=a.length)!=null&&j&&re(Ge.LINE,{stroke:a.colour},r)}else re(Ge.LINE,{},r);return r}},xa=class{constructor(r){this.workspace=r,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(r,a){this.markers.has(r)&&this.unregisterMarker(r),a.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,a)),this.setMarkerSvg(a.getDrawer().createDom()),this.markers.set(r,a)}unregisterMarker(r){const a=this.markers.get(r);if(a)a.dispose(),this.markers.delete(r);else throw Error("Marker with ID "+r+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor_}getMarker(r){return this.markers.get(r)||null}setCursor(r){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=r)&&(r=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(r),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(r){r?(this.workspace.getBlockCanvas().appendChild(r),this.cursorSvg_=r):this.cursorSvg_=null}setMarkerSvg(r){r?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(r,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(r)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const r=Object.keys(this.markers);for(let a=0,f;f=r[a];a++)this.unregisterMarker(f);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};xa.LOCAL_MARKER="local_marker_1";var W1={};W1.deepMerge=Al;var Mg=class{constructor(r,a,f,S){this.name=r,this.startHats=!1,this.blockStyles=a||Object.create(null),this.categoryStyles=f||Object.create(null),this.componentStyles=S||Object.create(null),this.fontStyle=Object.create(null),i(Bt.THEME,r,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(r,a){this.blockStyles[r]=a}setCategoryStyle(r,a){this.categoryStyles[r]=a}getComponentStyle(r){if(r=this.componentStyles[r],!r)return null;if(typeof r=="string"){const a=this.getComponentStyle(r);if(a)return a}return`${r}`}setComponentStyle(r,a){this.componentStyles[r]=a}setFontStyle(r){this.fontStyle=r}setStartHats(r){this.startHats=r}static defineTheme(r,a){r=r.toLowerCase();const f=new Mg(r);let S=a.base;if(S){if(typeof S=="string"){let k;S=(k=p(Bt.THEME,S))!=null?k:void 0}S instanceof Mg&&(Al(f,S),f.name=r)}return Al(f.blockStyles,a.blockStyles),Al(f.categoryStyles,a.categoryStyles),Al(f.componentStyles,a.componentStyles),Al(f.fontStyle,a.fontStyle),a.startHats!==null&&(f.startHats=a.startHats),f}},zd={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},Mn={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},mv=new Mg("classic",zd,Mn),zi=class{constructor(r){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let a=null,f=!1;var S=!1,k=!1,j=!1,_e=!1,Ue=!1;const Wt=!!r.readOnly;if(!Wt){var Hn;a=gt((Hn=r.toolbox)!=null?Hn:null),f=zt(a),S=r.trashcan,S=S===void 0?f:S,k=r.collapse,k=k===void 0?f:k,j=r.comments,j=j===void 0?f:j,_e=r.disable,_e=_e===void 0?f:_e,Ue=r.sounds,Ue=Ue===void 0?!0:Ue}Hn=r.maxTrashcanContents,S?Hn===void 0&&(Hn=32):Hn=0;const _l=!!r.rtl;let Ka=r.horizontalLayout;Ka===void 0&&(Ka=!1);var kf=r.toolboxPosition!=="end";kf=Ka?kf?hr.TOP:hr.BOTTOM:kf===_l?hr.RIGHT:hr.LEFT;let _T=r.css;_T===void 0&&(_T=!0);let vT="https://blockly-demo.appspot.com/static/media/";r.media?vT=r.media.endsWith("/")?r.media:r.media+"/":"path"in r&&(xe("path","Nov 2014","Jul 2023","media"),vT=r.path+"media/");const FF=r.oneBasedIndex,JY=r.renderer||"geras",qY=r.plugins||{};let hk=r.modalInputs;hk===void 0&&(hk=!0),this.RTL=_l,this.oneBasedIndex=FF===void 0?!0:FF,this.collapse=k,this.comments=j,this.disable=_e,this.readOnly=Wt,this.maxBlocks=r.maxBlocks||1/0;let UF;this.maxInstances=(UF=r.maxInstances)!=null?UF:null,this.modalInputs=hk,this.pathToMedia=vT,this.hasCategories=f,this.moveOptions=zi.parseMoveOptions_(r,f),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=S,this.maxTrashcanContents=Hn,this.hasSounds=Ue,this.hasCss=_T,this.horizontalLayout=Ka,this.languageTree=a,this.gridOptions=zi.parseGridOptions_(r),this.zoomOptions=zi.parseZoomOptions_(r),this.toolboxPosition=kf,this.theme=zi.parseThemeOptions_(r),this.renderer=JY;let zF;this.rendererOverrides=(zF=r.rendererOverrides)!=null?zF:null;let HF;this.parentWorkspace=(HF=r.parentWorkspace)!=null?HF:null,this.plugins=qY}static parseMoveOptions_(r,a){const f=r.move||{},S={};return f.scrollbars===void 0&&r.scrollbars===void 0?S.scrollbars=a:typeof f.scrollbars=="object"?(S.scrollbars={horizontal:!!f.scrollbars.horizontal,vertical:!!f.scrollbars.vertical},S.scrollbars.horizontal&&S.scrollbars.vertical?S.scrollbars=!0:S.scrollbars.horizontal||S.scrollbars.vertical||(S.scrollbars=!1)):S.scrollbars=!!f.scrollbars||!!r.scrollbars,S.wheel=S.scrollbars&&f.wheel!==void 0?!!f.wheel:typeof S.scrollbars=="object",S.drag=S.scrollbars?f.drag===void 0?!0:!!f.drag:!1,S}static parseZoomOptions_(r){r=r.zoom||{};const a={};return a.controls=r.controls===void 0?!1:!!r.controls,a.wheel=r.wheel===void 0?!1:!!r.wheel,a.startScale=r.startScale===void 0?1:Number(r.startScale),a.maxScale=r.maxScale===void 0?3:Number(r.maxScale),a.minScale=r.minScale===void 0?.3:Number(r.minScale),a.scaleSpeed=r.scaleSpeed===void 0?1.2:Number(r.scaleSpeed),a.pinch=r.pinch===void 0?a.wheel||a.controls:!!r.pinch,a}static parseGridOptions_(r){r=r.grid||{};const a={};return a.spacing=Number(r.spacing)||0,a.colour=r.colour||"#888",a.length=r.length===void 0?1:Number(r.length),a.snap=0<a.spacing&&!!r.snap,a}static parseThemeOptions_(r){return r=r.theme||mv,typeof r=="string"?p(Bt.THEME,r):r instanceof Mg?r:Mg.defineTheme(r.name||"builtin"+oe(),r)}},Kr=class extends hp{constructor(r,a,f,S,k){super(r),this.type=t.CHANGE$$module$build$src$core$events$utils,r&&(this.element=a,this.name=f||void 0,this.oldValue=S,this.newValue=k)}toJson(){const r=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return r.element=this.element,r.name=this.name,r.oldValue=this.oldValue,r.newValue=this.newValue,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new Kr),a.element=r.element,a.name=r.name,a.oldValue=r.oldValue,a.newValue=r.newValue,a}isNull(){return this.oldValue===this.newValue}run(r){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(a=a.getBlockById(this.blockId),!a)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");var f=a.getIcon(Vo.MUTATOR);switch(f&&nu(f)&&f.bubbleIsVisible()&&f.setBubbleVisible(!1),r=r?this.newValue:this.oldValue,this.element){case"field":(a=a.getField(this.name))?a.setValue(r):console.warn("Can't set non-existent field: "+this.name);break;case"comment":a.setCommentText(r||null);break;case"collapsed":a.setCollapsed(!!r);break;case"disabled":a.setEnabled(!r);break;case"inline":a.setInputsInline(!!r);break;case"mutation":f=Kr.getExtraBlockState_(a),a.loadExtraState?a.loadExtraState(JSON.parse(r||"{}")):a.domToMutation&&a.domToMutation(t.textToDom$$module$build$src$core$utils$xml(r||"<mutation/>")),pe(new Kr(a,"mutation",null,f,r));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(r){return r.saveExtraState?(r=r.saveExtraState(!0))?JSON.stringify(r):"":r.mutationToDom&&(r=r.mutationToDom())?Ki(r):""}};i(Bt.EVENT,t.CHANGE$$module$build$src$core$events$utils,Kr);var Py=.45,rh=.65,V1={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},pp={};pp.blend=zc,pp.getHsvSaturation=ju,pp.getHsvValue=vh,pp.hexToRgb=Uc,pp.hsvToHex=Il,pp.hueToHex=pc,pp.names=V1,pp.parse=Zo,pp.rgbToHex=Ml,pp.setHsvSaturation=Xu,pp.setHsvValue=sl;var p_={};p_.checkMessageReferences=ol,p_.parseBlockColour=Ji,p_.replaceMessageReferences=Gr,p_.tokenizeInterpolation=Ua;var Hi=class{constructor(r,a,f){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new qs(0,0),r!==Hi.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(r),a&&this.setValidator(a))}configure_(r){r.tooltip&&this.setTooltip(Gr(r.tooltip))}setSourceBlock(r){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=r}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=re(Ge.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=re(Ge.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=re(Ge.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const r=this.getClickTarget_();if(!r)throw Error("A click target has not been set.");Fi(r),this.mouseDownWrapper_=Ce(r,"pointerdown",this,this.onMouseDown_)}fromXml(r){this.setValue(r.textContent)}toXml(r){return r.textContent=this.getValue(),r}saveState(r){return r=this.saveLegacyState(Hi),r!==null?r:this.getValue()}loadState(r){this.loadLegacyState(Hi,r)||this.setValue(r)}saveLegacyState(r){return r.prototype.saveState===this.saveState&&r.prototype.toXml!==this.toXml?(r=t.createElement$$module$build$src$core$utils$xml("field"),r.setAttribute("name",this.name||""),Rn(this.toXml(r)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(r,a){return r.prototype.loadState===this.loadState&&r.prototype.fromXml!==this.fromXml?(this.fromXml(t.textToDom$$module$build$src$core$utils$xml(a)),!0):!1}dispose(){yi(this),Hr(this);let r;(r=this.getSourceBlock())!=null&&r.isDeadOrDying()||pt(this.fieldGroup_),this.disposed=!0}updateEditable(){const r=this.fieldGroup_,a=this.getSourceBlock();this.EDITABLE&&r&&a&&(this.enabled_&&a.isEditable()?(Be(r,"blocklyEditableText"),bt(r,"blocklyNonEditableText"),r.style.cursor=this.CURSOR):(Be(r,"blocklyNonEditableText"),bt(r,"blocklyEditableText"),r.style.cursor=""))}setEnabled(r){this.enabled_=r,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==Hi.prototype.showEditor_}isClickableInFlyout(r){return!r}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let r=!1;return this.name&&(this.SERIALIZABLE?r=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),r=!0)),r}isVisible(){return this.visible_}setVisible(r){if(this.visible_!==r){this.visible_=r;var a=this.fieldGroup_;a&&(a.style.display=r?"block":"none")}}setValidator(r){this.validator_=r}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(r){this.isClickable()&&this.showEditor_(r)}showEditor_(r){}repositionForWindowResize(){return!1}updateSize_(r){const a=this.getConstants();r=r!==void 0?r:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let f=2*r,S=a.FIELD_TEXT_HEIGHT,k=0;this.textElement_&&(k=Je(this.textElement_,a.FIELD_TEXT_FONTSIZE,a.FIELD_TEXT_FONTWEIGHT,a.FIELD_TEXT_FONTFAMILY),f+=k),this.isFullBlockField()||(S=Math.max(S,a.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=S,this.size_.width=f,this.positionTextElement_(r,k),this.positionBorderRect_()}positionTextElement_(r,a){if(this.textElement_){var f=this.getConstants(),S=this.size_.height/2,k;this.textElement_.setAttribute("x",String((k=this.getSourceBlock())!=null&&k.RTL?this.size_.width-a-r:r)),this.textElement_.setAttribute("y",String(f.FIELD_TEXT_BASELINE_CENTER?S:S-f.FIELD_TEXT_HEIGHT/2+f.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new qs(0,0)}getScaledBBox(){let r;var a=this.getSourceBlock();if(!a)throw new ko;if(this.isFullBlockField()){var f=this.sourceBlock_.getHeightWidth();const S=a.workspace.scale;r=this.getAbsoluteXY_(),a=(f.width+1)*S,f=(f.height+1)*S,Tn?(r.x+=1.5*S,r.y+=1.5*S):(r.x-=.5*S,r.y-=.5*S)}else f=this.borderRect_.getBoundingClientRect(),r=Dn(this.borderRect_),a=f.width,f=f.height;return new Ri(r.y,r.y+f,r.x,r.x+a)}onLocationChange(r){}getDisplayText_(){let r=this.getText();return r?(r.length>this.maxDisplayLength&&(r=r.substring(0,this.maxDisplayLength-2)+""),r=r.replace(/\s/g,Hi.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(r+=""),r):Hi.NBSP}getText(){const r=this.getText_();return String(r!==null?r:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.queueRender(),this.sourceBlock_.bumpNeighbours())}setValue(r,a=!0){if(r!==null){var f=this.doClassValidation_(r);if(r=this.processValidation_(r,f),!(r instanceof Error)){var S;f=(S=this.getValidator())==null?void 0:S.call(this,r),S=this.processValidation_(r,f),S instanceof Error||(r=this.sourceBlock_,r&&r.disposed||(f=this.getValue(),f===S?this.doValueUpdate_(S):(this.doValueUpdate_(S),a&&r&&ie()&&pe(new(ke(t.CHANGE$$module$build$src$core$events$utils))(r,"field",this.name||null,f,S)),this.isDirty_&&this.forceRerender())))}}}processValidation_(r,a){return a===null?(this.doValueInvalid_(r),this.isDirty_&&this.forceRerender(),Error()):a===void 0?r:a}getValue(){return this.value_}doClassValidation_(r){return r??null}doValueUpdate_(r){this.value_=r,this.isDirty_=!0}doValueInvalid_(r){}onMouseDown_(r){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(r=this.sourceBlock_.workspace.getGesture(r))&&r.setStartField(this)}setTooltip(r){r||r===""||(r=this.sourceBlock_);const a=this.getClickTarget_();a?a.tooltip=r:this.tooltip_=r}getTooltip(){const r=this.getClickTarget_();return lo(r||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Dn(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let r=null;const a=this.getSourceBlock();if(!a)throw new ko;const f=a.inputList;for(let S=0;S<a.inputList.length;S++){const k=f[S],j=k.fieldRow;for(let _e=0;_e<j.length;_e++)if(j[_e]===this){r=k;break}}return r}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(r){return!1}setCursorSvg(r){if(r){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(r),this.cursorSvg_=r}else this.cursorSvg_=null}setMarkerSvg(r){if(r){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(r),this.markerSvg_=r}else this.markerSvg_=null}updateMarkers_(){var r=this.getSourceBlock();if(!r)throw new ko;r=r.workspace,r.keyboardAccessibilityMode&&this.cursorSvg_&&r.getCursor().draw(),r.keyboardAccessibilityMode&&this.markerSvg_&&r.getMarker(xa.LOCAL_MARKER).draw()}};Hi.NBSP="",Hi.SKIP_SETUP=Symbol("SKIP_SETUP");var ko=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}};t.Names$$module$build$src$core$names=class{constructor(r,a){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=a||"",this.reservedWords=new Set(r?r.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(r){this.variableMap=r}getNameForUserVariable(r){return this.variableMap?(r=this.variableMap.getVariableById(r))?r.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(r){r=t.allUsedVarModels$$module$build$src$core$variables(r);for(let a=0;a<r.length;a++)this.getName(r[a].getId(),t.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(r){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(r,a){let f=r;a===t.NameType$$module$build$src$core$names.VARIABLE&&(r=this.getNameForUserVariable(r))&&(f=r),r=f.toLowerCase();const S=a===t.NameType$$module$build$src$core$names.VARIABLE||a===t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(a)||this.db.set(a,new Map);const k=this.db.get(a);return k.has(r)?S+k.get(r):(a=this.getDistinctName(f,a),k.set(r,a.substr(S.length)),a)}getUserNames(r){let a;return(r=(a=this.db.get(r))==null?void 0:a.keys())?Array.from(r):[]}getDistinctName(r,a){r=this.safeName(r);let f=null,S,k;for(;this.dbReverse.has(r+((S=f)!=null?S:""))||this.reservedWords.has(r+((k=f)!=null?k:""));)f=f?f+1:2;let j;return r+=(j=f)!=null?j:"",this.dbReverse.add(r),(a===t.NameType$$module$build$src$core$names.VARIABLE||a===t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+r}safeName(r){return r?(r=encodeURI(r.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(r[0])!==-1&&(r="my_"+r)):r=t.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",r}static equals(r,a){return r.toLowerCase()===a.toLowerCase()}},function(r){r=r.NameType||(r.NameType={}),r.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",r.VARIABLE="VARIABLE",r.PROCEDURE="PROCEDURE"}(t.Names$$module$build$src$core$names||(t.Names$$module$build$src$core$names={})),t.NameType$$module$build$src$core$names=t.Names$$module$build$src$core$names.NameType,t.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,t.NameType$$module$build$src$core$names,t.Names$$module$build$src$core$names;var _0=class extends Map{constructor(){super()}set(r,a){return this.get(r)===a?this:(super.set(r,a),Y(a)&&a.startPublishing(),this)}delete(r){const a=this.get(r);return r=super.delete(r),r&&(Y(a)&&a.stopPublishing(),r)}clear(){if(this.size)for(const r of this.keys())this.delete(r)}add(r){return this.set(r.getId(),r)}getProcedures(){return[...this.values()]}},gv=class{constructor(r){this.sourceBlock=r,this.offsetInBlock=new fn(0,0),this.workspaceLocation=new fn(0,0),this.svgRoot=null,this.tooltip=r}getType(){throw Error("Icons must implement getType")}initView(r){if(!this.svgRoot){var a=this.sourceBlock;this.svgRoot=re(Ge.G,{class:"blocklyIconGroup"}),a.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),Ce(this.svgRoot,"pointerdown",this,r),this.svgRoot.tooltip=this,Fi(this.svgRoot)}}dispose(){cd(this.svgRoot),pt(this.svgRoot)}getWeight(){return-1}getSize(){return new qs(0,0)}setTooltip(r){this.tooltip=r??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",nu(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(r){this.offsetInBlock=r,this.updateSvgRootOffset()}updateSvgRootOffset(){let r;(r=this.svgRoot)==null||r.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(r){this.workspaceLocation=fn.sum(r,this.offsetInBlock)}onClick(){}isClickableInFlyout(r){return!0}setVisible(r){xe("setVisible","v10","v11","setBubbleVisible"),nu(this)&&this.setBubbleVisible(r)}},xc={fromJsonInternal:xr},v0={TEST_ONLY:xc};v0.fromJson=t.fromJson$$module$build$src$core$field_registry,v0.register=Es,v0.unregister=pa;var wh=class extends Hi{constructor(r,a,f){super(Hi.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,r!==Hi.SKIP_SETUP&&(Array.isArray(r)?(al(r),r=dn(r),this.menuGenerator_=r.options,this.prefixField=r.prefix||null,this.suffixField=r.suffix||null):this.menuGenerator_=r,this.selectedOption=this.getOptions(!1)[0],f&&this.configure_(f),this.setValue(this.selectedOption[1]),a&&this.setValidator(a))}fromXml(r){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(r.textContent)}loadState(r){this.loadLegacyState(wh,r)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(r))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=re(Ge.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&Be(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let r;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((r=this.getSourceBlock())!=null&&r.isShadow())}createTextArrow_(){this.arrow=re(Ge.TSPAN,{},this.textElement_);let r;this.arrow.appendChild(document.createTextNode((r=this.getSourceBlock())!=null&&r.RTL?wh.ARROW_CHAR+" ":" "+wh.ARROW_CHAR));let a;(a=this.getSourceBlock())!=null&&a.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=re(Ge.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(Js,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(r){var a=this.getSourceBlock();if(!a)throw new ko;this.dropdownCreate(),this.menu_.openingCoords=r&&typeof r.clientX=="number"?new fn(r.clientX,r.clientY):null,gh(),r=this.menu_.render(xu()),Be(r,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(a=a.getColour(),Ed(a,this.sourceBlock_.style.colourTertiary)),ve(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&(this.menu_.setHighlighted(this.selectedMenuItem),Si(this.selectedMenuItem.getElement(),xu(),!0)),this.applyColour()}dropdownCreate(){const r=this.getSourceBlock();if(!r)throw new ko;const a=new wg;a.setRole(nh.LISTBOX),this.menu_=a;const f=this.getOptions(!1);this.selectedMenuItem=null;for(let k=0;k<f.length;k++){const[j,_e]=f[k];if(typeof j=="object"){var S=new Image(j.width,j.height);S.src=j.src,S.alt=j.alt||""}else S=j;S=new Pp(S,_e),S.setRole(nh.OPTION),S.setRightToLeft(r.RTL),S.setCheckable(!0),a.addChild(S),S.setChecked(_e===this.value_),_e===this.value_&&(this.selectedMenuItem=S),S.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(r){yi(this,!0),this.onItemSelected_(this.menu_,r)}onItemSelected_(r,a){this.setValue(a.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(r){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:r&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),al(this.generatedOptions),this.generatedOptions)}doClassValidation_(r){return this.getOptions(!0).some(a=>a[1]===r)?r:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+r),null)}doValueUpdate_(r){super.doValueUpdate_(r),r=this.getOptions(!0);for(let a=0,f;f=r[a];a++)f[1]===this.value_&&(this.selectedOption=f)}applyColour(){const r=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",r.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",r.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=r.colourSecondary:this.arrow.style.fill=r.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const r=this.selectedOption&&this.selectedOption[0];r&&typeof r=="object"?this.renderSelectedImage(r):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(r){const a=this.getSourceBlock();if(!a)throw new ko;this.imageElement.style.display="",this.imageElement.setAttributeNS(Js,"xlink:href",r.src),this.imageElement.setAttribute("height",String(r.height)),this.imageElement.setAttribute("width",String(r.width));const f=Number(r.height);r=Number(r.width);var S=!!this.borderRect_;const k=Math.max(S?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,f+ui);S=S?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let j;j=this.svgArrow?this.positionSVGArrow(r+S,k/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Je(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=r+j+2*S,this.size_.height=k;let _e=0;a.RTL?this.imageElement.setAttribute("x",`${S+j}`):(_e=r+j,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${S}`)),this.imageElement.setAttribute("y",String(k/2-f/2)),this.positionTextElement_(_e+S,r+j)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var r=this.getTextElement();Be(r,"blocklyDropdownText"),r.setAttribute("text-anchor","start");var a=!!this.borderRect_;r=Math.max(a?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const f=Je(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);a=a?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let S=0;this.svgArrow&&(S=this.positionSVGArrow(f+a,r/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=f+S+2*a,this.size_.height=r,this.positionTextElement_(a,f)}positionSVGArrow(r,a){if(!this.svgArrow)return 0;const f=this.getSourceBlock();if(!f)throw new ko;const S=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,k=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,j=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(f.RTL?S:r+k)+","+a+")"),j+k}getText_(){if(!this.selectedOption)return null;const r=this.selectedOption[0];return typeof r=="object"?r.alt:r}static fromJson(r){if(!r.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(r.options,void 0,r)}};wh.CHECKMARK_OVERHANG=25,wh.MAX_MENU_HEIGHT_VH=.45,wh.ARROW_CHAR="";var ri=5,ui=2*ri;Es("field_dropdown",wh);var Kh,Cs=class{constructor(r,a,f){this.workspace=r,this.anchor=a,this.ownerRect=f,this.size=new qs(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.svgRoot=re(Ge.G,{},r.getBubbleCanvas()),r=re(Ge.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=re(Ge.PATH,{},r),this.background=re(Ge.RECT,{class:"blocklyDraggable",x:0,y:0,rx:Kh.BORDER_WIDTH,ry:Kh.BORDER_WIDTH},r),this.contentContainer=re(Ge.G,{},this.svgRoot),Ce(this.background,"pointerdown",this,this.onMouseDown)}dispose(){pt(this.svgRoot),this.disposed=!0}setAnchorLocation(r,a=!1){this.anchor=r,a?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(r,a){this.relativeLeft=r,this.relativeTop=a,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(r,a=!1){r.width=Math.max(r.width,Kh.MIN_SIZE),r.height=Math.max(r.height,Kh.MIN_SIZE),this.size=r,this.background.setAttribute("width",`${r.width}`),this.background.setAttribute("height",`${r.height}`),a?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(r){this.colour=r,this.tail.setAttribute("fill",r),this.background.setAttribute("fill",r)}onMouseDown(r){let a;(a=this.workspace.getGesture(r))==null||a.handleBubbleStart(r,this)}positionRelativeToAnchor(){let r=this.anchor.x;r=this.workspace.RTL?r-(this.relativeLeft+this.size.width):r+this.relativeLeft,this.moveTo(r,this.relativeTop+this.anchor.y)}moveTo(r,a){this.svgRoot.setAttribute("transform",`translate(${r}, ${a})`)}positionByRect(r=new Ri(0,0,0,0)){var a=this.workspace.getMetricsManager().getViewMetrics(!0),f=this.getOptimalRelativeLeft(a),S=this.getOptimalRelativeTop(a);const k={x:f,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},j={x:-this.size.width-30,y:S};S={x:r.getWidth(),y:S};var _e={x:f,y:r.getHeight()};f=r.getWidth()<r.getHeight()?S:_e,r=r.getWidth()<r.getHeight()?_e:S,S=this.getOverlap(k,a),_e=this.getOverlap(j,a);const Ue=this.getOverlap(f,a);a=this.getOverlap(r,a),a=Math.max(S,_e,Ue,a),S===a?(this.relativeLeft=k.x,this.relativeTop=k.y):_e===a?(this.relativeLeft=j.x,this.relativeTop=j.y):Ue===a?(this.relativeLeft=f.x,this.relativeTop=f.y):(this.relativeLeft=r.x,this.relativeTop=r.y),this.positionRelativeToAnchor()}getOverlap(r,a){var f=this.workspace.RTL?this.anchor.x-r.x-this.size.width:r.x+this.anchor.x;return r=r.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(f+this.size.width,a.left+a.width)-Math.max(f,a.left))*(Math.min(r+this.size.height,a.top+a.height)-Math.max(r,a.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(r){let a=-this.size.width/4;if(this.size.width>r.width)return a;if(r=this.getWorkspaceViewRect(r),this.workspace.RTL){var f=this.anchor.x-a;f-this.size.width<r.left?a=-(r.left-this.anchor.x+this.size.width):f>r.right&&(a=-(r.right-this.anchor.x))}else{f=a+this.anchor.x;const S=f+this.size.width;f<r.left?a=r.left-this.anchor.x:S>r.right&&(a=r.right-this.anchor.x-this.size.width)}return a}getOptimalRelativeTop(r){let a=-this.size.height/4;if(this.size.height>r.height)return a;const f=this.anchor.y+a,S=f+this.size.height;return r=this.getWorkspaceViewRect(r),f<r.top?a=r.top-this.anchor.y:S>r.bottom&&(a=r.bottom-this.anchor.y-this.size.height),a}getWorkspaceViewRect(r){const a=r.top;let f=r.top+r.height,S=r.left;return r=r.left+r.width,f-=this.getScrollbarThickness(),this.workspace.RTL?S-=this.getScrollbarThickness():r-=this.getScrollbarThickness(),new Ri(a,f,S,r)}getScrollbarThickness(){return Sa.scrollbarThickness/this.workspace.scale}renderTail(){const r=[];var a=this.size.width/2,f=this.size.height/2,S=-this.relativeLeft,k=-this.relativeTop;if(a===S&&f===k)r.push("M "+a+","+f);else{k-=f,S-=a,this.workspace.RTL&&(S*=-1);var j=Math.sqrt(k*k+S*S),_e=Math.acos(S/j);0>k&&(_e=2*Math.PI-_e);var Ue=_e+Math.PI/2;Ue>2*Math.PI&&(Ue-=2*Math.PI);var Wt=Math.sin(Ue);const _l=Math.cos(Ue);let Ka=(this.size.width+this.size.height)/Kh.TAIL_THICKNESS;Ka=Math.min(Ka,this.size.width,this.size.height)/4,Ue=1-Kh.ANCHOR_RADIUS/j,S=a+Ue*S,k=f+Ue*k,Ue=a+Ka*_l;const kf=f+Ka*Wt;a-=Ka*_l,f-=Ka*Wt,Wt=Bc(this.workspace.RTL?-Kh.TAIL_ANGLE:Kh.TAIL_ANGLE),Wt=_e+Wt,Wt>2*Math.PI&&(Wt-=2*Math.PI),_e=Math.sin(Wt)*j/Kh.TAIL_BEND,j=Math.cos(Wt)*j/Kh.TAIL_BEND,r.push("M"+Ue+","+kf),r.push("C"+(Ue+j)+","+(kf+_e)+" "+S+","+k+" "+S+","+k),r.push("C"+S+","+k+" "+(a+j)+","+(f+_e)+" "+a+","+f)}r.push("z");let Hn;(Hn=this.tail)==null||Hn.setAttribute("d",r.join(" "))}bringToFront(){let r;const a=(r=this.svgRoot)==null?void 0:r.parentNode;return this.svgRoot&&(a==null?void 0:a.lastChild)!==this.svgRoot?(a==null||a.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new fn(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(r){this.moveTo(r.x,r.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-r.x-this.size.width:r.x-this.anchor.x,this.relativeTop=r.y-this.anchor.y,this.renderTail()}setDragging(r){}setDeleteStyle(r){}isDeletable(){return!1}showContextMenu(r){}};Kh=Cs,Cs.BORDER_WIDTH=6,Cs.DOUBLE_BORDER=2*Kh.BORDER_WIDTH,Cs.MIN_SIZE=Kh.DOUBLE_BORDER,Cs.TAIL_THICKNESS=1,Cs.TAIL_ANGLE=20,Cs.TAIL_BEND=4,Cs.ANCHOR_RADIUS=8;var lm=class extends Cs{constructor(r,a,f,S){super(a,f,S),this.workspace=a,this.anchor=f,this.ownerRect=S,this.autoLayout=!0,a=new zi(r),this.validateWorkspaceOptions(a),this.svgDialog=re(Ge.SVG,{x:Cs.BORDER_WIDTH,y:Cs.BORDER_WIDTH},this.contentContainer),r.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new zi(r)),this.miniWorkspace.internalIsMutator=!0,r=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(r),a.languageTree&&(r.insertBefore(this.miniWorkspace.addFlyout(Ge.G),this.miniWorkspace.getCanvas()),r=this.miniWorkspace.getFlyout(),r==null||r.init(this.miniWorkspace),r==null||r.show(a.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let k,j;(k=this.miniWorkspace.getFlyout())==null||(j=k.getWorkspace())==null||j.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(r){this.miniWorkspace.addChangeListener(r)}validateWorkspaceOptions(r){if(r.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(r.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(r.zoomOptions.controls||r.zoomOptions.wheel||r.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(r.moveOptions.scrollbars||r.moveOptions.wheel||r.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(r.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const r of this.miniWorkspace.getTopBlocks(!1)){const a=r.getRelativeToSurfaceXY();if(20>a.y&&r.moveBy(0,20-a.y),r.RTL){let f=-20;const S=this.miniWorkspace.getFlyout();S&&(f-=S.getWidth()),a.x>f&&r.moveBy(f-a.x,0)}else 20>a.x&&r.moveBy(20-a.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var r=this.getSize(),a=this.calculateWorkspaceSize();Math.abs(r.width-a.width)<lm.MINIMUM_VIEW_CHANGE&&Math.abs(r.height-a.height)<lm.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${a.width}px`),this.svgDialog.setAttribute("height",`${a.height}px`),this.miniWorkspace.setCachedParentSvgSize(a.width,a.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${a.width}, 0)`),this.setSize(new qs(a.width+Cs.DOUBLE_BORDER,a.height+Cs.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var r=this.miniWorkspace.getCanvas().getBBox();let a=r.width+lm.MARGIN;r=r.height+lm.MARGIN;const f=this.miniWorkspace.getFlyout();if(f){const S=f.getWorkspace().getMetricsManager().getScrollMetrics();r=Math.max(r,S.height+20),a+=f.getWidth()}return new qs(a,r)}updateBlockStyles(){for(var r of this.miniWorkspace.getAllBlocks(!1))r.setStyle(r.getStyleName());let a;if(r=(a=this.miniWorkspace.getFlyout())==null?void 0:a.getWorkspace())for(const f of r.getAllBlocks(!1))f.setStyle(f.getStyleName())}moveDuringDrag(r){super.moveDuringDrag(r),this.autoLayout=!1}moveTo(r,a){super.moveTo(r,a),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(r){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};lm.MINIMUM_VIEW_CHANGE=10,lm.MARGIN=3*Cs.DOUBLE_BORDER;var _v,vv;_v=17,vv=16,t.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends gv{constructor(r,a){super(a),this.flyoutBlockTypes=r,this.sourceBlock=a,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(r){this.svgRoot||(super.initView(r),re(Ge.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),re(Ge.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),re(Ge.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),Be(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let r;(r=this.miniWorkspaceBubble)==null||r.dispose()}getWeight(){return t.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new qs(_v,_v)}applyColour(){super.applyColour();let r;(r=this.miniWorkspaceBubble)==null||r.setColour(this.sourceBlock.style.colourPrimary);let a;(a=this.miniWorkspaceBubble)==null||a.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(r){super.onLocationChange(r);let a;(a=this.miniWorkspaceBubble)==null||a.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(r){if(this.bubbleIsVisible()!==r){if(r){this.miniWorkspaceBubble=new lm(this.getMiniWorkspaceConfig(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour(),this.createRootBlock(),this.addSaveConnectionsListener();let a;(a=this.miniWorkspaceBubble)==null||a.addWorkspaceChangeListener(this.createMiniWorkspaceChangeListener())}else{let a;(a=this.miniWorkspaceBubble)==null||a.dispose(),this.miniWorkspaceBubble=null,this.saveConnectionsListener&&this.sourceBlock.workspace.removeChangeListener(this.saveConnectionsListener),this.saveConnectionsListener=null}pe(new(ke(_o))(this.sourceBlock,r,"mutator"))}}getMiniWorkspaceConfig(){let r;const a={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(r=this.sourceBlock.workspace.options.rendererOverrides)!=null?r:void 0};return this.flyoutBlockTypes.length&&(a.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(f=>({kind:"block",type:f}))}),a}getAnchorLocation(){const r=_v/2;return fn.sum(this.workspaceLocation,new fn(r,r))}getBubbleOwnerRect(){const r=this.sourceBlock.getSvgRoot().getBBox();return new Ri(r.y,r.y+r.height,r.x,r.x+r.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var r of this.rootBlock.getDescendants(!1))r.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let a,f,S,k;r=(k=(a=this.miniWorkspaceBubble)==null||(f=a.getWorkspace())==null||(S=f.getFlyout())==null?void 0:S.getWidth())!=null?k:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(r+vv):vv,vv)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return r=>{t.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(r)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(r){return r.isUiEvent||r.type===t.CREATE$$module$build$src$core$events$utils||r.type===t.CHANGE$$module$build$src$core$events$utils&&r.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var r=t.getGroup$$module$build$src$core$events$utils();r||t.setGroup$$module$build$src$core$events$utils(!0);var a=Kr.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var f=Kr.getExtraBlockState_(this.sourceBlock);a!==f&&pe(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"mutation",null,a,f)),t.setGroup$$module$build$src$core$events$utils(r)}}getWorkspace(){let r;return(r=this.miniWorkspaceBubble)==null?void 0:r.getWorkspace()}static reconnect(r,a,f){return xe("MutatorIcon.reconnect","v10","v11","connection.reconnect"),r?r.reconnect(a,f):!1}static findParentWs(r){return xe("MutatorIcon.findParentWs","v10","v11","workspace.getRootWorkspace"),r.getRootWorkspace()}},t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=Vo.MUTATOR,t.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,t.MutatorIcon$$module$build$src$core$icons$mutator_icon;var y0=Object.create(null),zE={allExtensions:y0};t.register$$module$build$src$core$extensions("parent_tooltip_when_inline",Us);var Hd={TEST_ONLY:zE};Hd.apply=qi,Hd.buildTooltipForDropdown=t.buildTooltipForDropdown$$module$build$src$core$extensions,Hd.buildTooltipWithFieldText=t.buildTooltipWithFieldText$$module$build$src$core$extensions,Hd.isRegistered=li,Hd.register=t.register$$module$build$src$core$extensions,Hd.registerMixin=t.registerMixin$$module$build$src$core$extensions,Hd.registerMutator=t.registerMutator$$module$build$src$core$extensions,Hd.runAfterPageLoad=Ad,Hd.unregister=Mi;var Fr;(function(r){r[r.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",r[r.MAC_ENTER=3]="MAC_ENTER",r[r.BACKSPACE=8]="BACKSPACE",r[r.TAB=9]="TAB",r[r.NUM_CENTER=12]="NUM_CENTER",r[r.ENTER=13]="ENTER",r[r.SHIFT=16]="SHIFT",r[r.CTRL=17]="CTRL",r[r.ALT=18]="ALT",r[r.PAUSE=19]="PAUSE",r[r.CAPS_LOCK=20]="CAPS_LOCK",r[r.ESC=27]="ESC",r[r.SPACE=32]="SPACE",r[r.PAGE_UP=33]="PAGE_UP",r[r.PAGE_DOWN=34]="PAGE_DOWN",r[r.END=35]="END",r[r.HOME=36]="HOME",r[r.LEFT=37]="LEFT",r[r.UP=38]="UP",r[r.RIGHT=39]="RIGHT",r[r.DOWN=40]="DOWN",r[r.PLUS_SIGN=43]="PLUS_SIGN",r[r.PRINT_SCREEN=44]="PRINT_SCREEN",r[r.INSERT=45]="INSERT",r[r.DELETE=46]="DELETE",r[r.ZERO=48]="ZERO",r[r.ONE=49]="ONE",r[r.TWO=50]="TWO",r[r.THREE=51]="THREE",r[r.FOUR=52]="FOUR",r[r.FIVE=53]="FIVE",r[r.SIX=54]="SIX",r[r.SEVEN=55]="SEVEN",r[r.EIGHT=56]="EIGHT",r[r.NINE=57]="NINE",r[r.FF_SEMICOLON=59]="FF_SEMICOLON",r[r.FF_EQUALS=61]="FF_EQUALS",r[r.FF_DASH=173]="FF_DASH",r[r.FF_HASH=163]="FF_HASH",r[r.QUESTION_MARK=63]="QUESTION_MARK",r[r.AT_SIGN=64]="AT_SIGN",r[r.A=65]="A",r[r.B=66]="B",r[r.C=67]="C",r[r.D=68]="D",r[r.E=69]="E",r[r.F=70]="F",r[r.G=71]="G",r[r.H=72]="H",r[r.I=73]="I",r[r.J=74]="J",r[r.K=75]="K",r[r.L=76]="L",r[r.M=77]="M",r[r.N=78]="N",r[r.O=79]="O",r[r.P=80]="P",r[r.Q=81]="Q",r[r.R=82]="R",r[r.S=83]="S",r[r.T=84]="T",r[r.U=85]="U",r[r.V=86]="V",r[r.W=87]="W",r[r.X=88]="X",r[r.Y=89]="Y",r[r.Z=90]="Z",r[r.META=91]="META",r[r.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",r[r.CONTEXT_MENU=93]="CONTEXT_MENU",r[r.NUM_ZERO=96]="NUM_ZERO",r[r.NUM_ONE=97]="NUM_ONE",r[r.NUM_TWO=98]="NUM_TWO",r[r.NUM_THREE=99]="NUM_THREE",r[r.NUM_FOUR=100]="NUM_FOUR",r[r.NUM_FIVE=101]="NUM_FIVE",r[r.NUM_SIX=102]="NUM_SIX",r[r.NUM_SEVEN=103]="NUM_SEVEN",r[r.NUM_EIGHT=104]="NUM_EIGHT",r[r.NUM_NINE=105]="NUM_NINE",r[r.NUM_MULTIPLY=106]="NUM_MULTIPLY",r[r.NUM_PLUS=107]="NUM_PLUS",r[r.NUM_MINUS=109]="NUM_MINUS",r[r.NUM_PERIOD=110]="NUM_PERIOD",r[r.NUM_DIVISION=111]="NUM_DIVISION",r[r.F1=112]="F1",r[r.F2=113]="F2",r[r.F3=114]="F3",r[r.F4=115]="F4",r[r.F5=116]="F5",r[r.F6=117]="F6",r[r.F7=118]="F7",r[r.F8=119]="F8",r[r.F9=120]="F9",r[r.F10=121]="F10",r[r.F11=122]="F11",r[r.F12=123]="F12",r[r.NUMLOCK=144]="NUMLOCK",r[r.SCROLL_LOCK=145]="SCROLL_LOCK",r[r.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",r[r.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",r[r.SEMICOLON=186]="SEMICOLON",r[r.DASH=189]="DASH",r[r.EQUALS=187]="EQUALS",r[r.COMMA=188]="COMMA",r[r.PERIOD=190]="PERIOD",r[r.SLASH=191]="SLASH",r[r.APOSTROPHE=192]="APOSTROPHE",r[r.TILDE=192]="TILDE",r[r.SINGLE_QUOTE=222]="SINGLE_QUOTE",r[r.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",r[r.BACKSLASH=220]="BACKSLASH",r[r.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",r[r.WIN_KEY=224]="WIN_KEY",r[r.MAC_FF_META=224]="MAC_FF_META",r[r.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",r[r.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",r[r.WIN_IME=229]="WIN_IME",r[r.VK_NONAME=252]="VK_NONAME",r[r.PHANTOM=255]="PHANTOM"})(Fr||(Fr={}));var Gd={};Gd.arc=di,Gd.curve=zs,Gd.line=Uo,Gd.lineOnAxis=Sn,Gd.lineTo=ru,Gd.moveBy=Ui,Gd.moveTo=Xs,Gd.point=Vn;var Ya={};Ya.Coordinate=fn,Ya.KeyCodes=Fr,Ya.Rect=Ri,Ya.Size=qs,Ya.Svg=Ge,Ya.aria=ku,Ya.array=Vf,Ya.browserEvents=qc,Ya.colour=pp,Ya.deprecation=bg,Ya.dom=Ta,Ya.extensions=Hd,Ya.idGenerator=ec,Ya.math=rm,Ya.object=W1,Ya.parsing=p_,Ya.string=kn,Ya.style=Sc,Ya.svgMath=vf,Ya.svgPaths=Gd,Ya.toolbox=vo,Ya.userAgent=ap,Ya.xml=kd;var f_={};f_.register=pi,f_.unregister=Op;var um=class extends Cs{constructor(r,a,f,S){super(a,f,S),this.text=r,this.workspace=a,this.anchor=f,this.ownerRect=S,this.paragraph=this.stringToSvg(r,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(r){this.text=r,pt(this.paragraph),this.paragraph=this.stringToSvg(r,this.contentContainer),this.updateBubbleSize()}stringToSvg(r,a){return a=this.createParagraph(a),r=this.createSpans(a,r),this.workspace.RTL&&this.rightAlignSpans(a.getBBox().width,r),a}createParagraph(r){return re(Ge.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:Cs.BORDER_WIDTH},r)}createSpans(r,a){return a.split(`
`).map(f=>{const S=re(Ge.TSPAN,{dy:"1em",x:Cs.BORDER_WIDTH},r);return f=document.createTextNode(f),S.appendChild(f),S})}rightAlignSpans(r,a){for(const f of a)f.setAttribute("text-anchor","end"),f.setAttribute("x",`${r+Cs.BORDER_WIDTH}`)}updateBubbleSize(){const r=this.paragraph.getBBox();this.setSize(new qs(r.width+2*Cs.BORDER_WIDTH,r.height+2*Cs.BORDER_WIDTH),!0)}},sa=class extends Cs{constructor(r,a,f){super(r,a,f),this.workspace=r,this.anchor=a,this.ownerRect=f,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new qs(160+Cs.DOUBLE_BORDER,80+Cs.DOUBLE_BORDER),this.MIN_SIZE=new qs(45+Cs.DOUBLE_BORDER,20+Cs.DOUBLE_BORDER),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(r){this.text=r,this.textArea.value=r,this.onTextChange()}addTextChangeListener(r){this.textChangeListeners.push(r)}addSizeChangeListener(r){this.sizeChangeListeners.push(r)}createEditor(r){r=re(Ge.FOREIGNOBJECT,{x:Cs.BORDER_WIDTH,y:Cs.BORDER_WIDTH},r);const a=document.createElementNS(Tc,"body");a.setAttribute("xmlns",Tc),a.className="blocklyMinimalBody";const f=document.createElementNS(Tc,"textarea");return f.className="blocklyCommentTextarea",f.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),a.appendChild(f),r.appendChild(a),this.bindTextAreaEvents(f),setTimeout(()=>{f.focus()},0),{inputRoot:r,textArea:f}}bindTextAreaEvents(r){Ce(r,"wheel",this,a=>{a.stopPropagation()}),Ce(r,"focus",this,this.onStartEdit,!0),Ce(r,"change",this,this.onTextChange)}createResizeHandle(r){r=re(Ge.G,{class:this.workspace.RTL?"blocklyResizeSW":"blocklyResizeSE"},r);const a=2*Cs.BORDER_WIDTH;return re(Ge.POLYGON,{points:`0,${a} ${a},${a} ${a},0`},r),re(Ge.LINE,{class:"blocklyResizeLine",x1:a/3,y1:a-1,x2:a-1,y2:a/3},r),re(Ge.LINE,{class:"blocklyResizeLine",x1:2*a/3,y1:a-1,x2:a-1,y2:2*a/3},r),Ce(r,"pointerdown",this,this.onResizePointerDown),r}setSize(r,a=!1){r.width=Math.max(r.width,this.MIN_SIZE.width),r.height=Math.max(r.height,this.MIN_SIZE.height);const f=r.width-Cs.DOUBLE_BORDER,S=r.height-Cs.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${f}`),this.inputRoot.setAttribute("height",`${S}`),this.textArea.style.width=`${f-4}px`,this.textArea.style.height=`${S-4}px`,this.workspace.RTL?this.resizeGroup.setAttribute("transform",`translate(${Cs.DOUBLE_BORDER}, ${S}) scale(-1 1)`):this.resizeGroup.setAttribute("transform",`translate(${f}, ${S})`),super.setSize(r,a),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(r){this.bringToFront(),vt(r)||(this.workspace.startDrag(r,new fn(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=Ce(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=Ce(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),r.stopPropagation()}onResizePointerUp(r){tt(),this.resizePointerUpListener&&(it(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(it(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(r){r=this.workspace.moveDrag(r),this.setSize(new qs(this.workspace.RTL?-r.x:r.x,r.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const r of this.textChangeListeners)r()}onSizeChange(){for(const r of this.sizeChangeListeners)r()}};$t(`
.blocklyCommentTextarea {
  background-color: #fef49c;
  border: 0;
  display: block;
  margin: 0;
  outline: 0;
  padding: 3px;
  resize: none;
  text-overflow: hidden;
}
`);var Wd=17,j1=160,X1=80,Jh=class extends gv{constructor(r){super(r),this.sourceBlock=r,this.textBubble=this.textInputBubble=null,this.text="",this.bubbleSize=new qs(j1,X1),this.bubbleVisiblity=!1}getType(){return Jh.TYPE}initView(r){this.svgRoot||(super.initView(r),re(Ge.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),re(Ge.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),re(Ge.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),Be(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let r;(r=this.textInputBubble)==null||r.dispose();let a;(a=this.textBubble)==null||a.dispose()}getWeight(){return Jh.WEIGHT}getSize(){return new qs(Wd,Wd)}applyColour(){super.applyColour();const r=this.sourceBlock.style.colourPrimary;let a;(a=this.textInputBubble)==null||a.setColour(r);let f;(f=this.textBubble)==null||f.setColour(r)}updateEditable(){super.updateEditable(),this.bubbleIsVisible()&&(this.setBubbleVisible(!1),this.setBubbleVisible(!0))}onLocationChange(r){super.onLocationChange(r),r=this.getAnchorLocation();let a;(a=this.textInputBubble)==null||a.setAnchorLocation(r);let f;(f=this.textBubble)==null||f.setAnchorLocation(r)}setText(r){const a=this.text;pe(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,a,r)),this.text=r;let f;(f=this.textInputBubble)==null||f.setText(this.text);let S;(S=this.textBubble)==null||S.setText(this.text)}getText(){return this.text}setBubbleSize(r){this.bubbleSize=r;let a;(a=this.textInputBubble)==null||a.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(r){let a;this.text=(a=r.text)!=null?a:"";let f,S;this.bubbleSize=new qs((f=r.width)!=null?f:j1,(S=r.height)!=null?S:X1);let k;this.bubbleVisiblity=(k=r.pinned)!=null?k:!1,setTimeout(()=>this.setBubbleVisible(this.bubbleVisiblity),1)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var r=this.textInputBubble.getText();this.text!==r&&(pe(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,this.text,r)),this.text=r)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(r){(!r||!this.textBubble&&!this.textInputBubble)&&(r||this.textBubble||this.textInputBubble)&&(this.bubbleVisiblity=r,this.sourceBlock.rendered&&!this.sourceBlock.isInFlyout&&(r?(this.sourceBlock.isEditable()?this.showEditableBubble():this.showNonEditableBubble(),this.applyColour()):this.hideBubble(),pe(new(ke(_o))(this.sourceBlock,r,"comment"))))}showEditableBubble(){this.textInputBubble=new sa(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.textInputBubble.addTextChangeListener(()=>this.onTextChange()),this.textInputBubble.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.textBubble=new um(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect())}hideBubble(){let r;(r=this.textInputBubble)==null||r.dispose(),this.textInputBubble=null;let a;(a=this.textBubble)==null||a.dispose(),this.textBubble=null}getAnchorLocation(){const r=Wd/2;return fn.sum(this.workspaceLocation,new fn(r,r))}getBubbleOwnerRect(){const r=this.sourceBlock.getSvgRoot().getBBox();return new Ri(r.y,r.y+r.height,r.x,r.x+r.width)}};Jh.TYPE=Vo.COMMENT,Jh.WEIGHT=3,pi(Jh.TYPE,Jh);var Fy=17,Vp=class extends gv{constructor(r){super(r),this.sourceBlock=r,this.textMap=new Map,this.textBubble=null}getType(){return Vp.TYPE}initView(r){this.svgRoot||(super.initView(r),re(Ge.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),re(Ge.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),re(Ge.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),Be(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let r;(r=this.textBubble)==null||r.dispose()}getWeight(){return Vp.WEIGHT}getSize(){return new qs(Fy,Fy)}applyColour(){super.applyColour();let r;(r=this.textBubble)==null||r.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(r){super.onLocationChange(r);let a;(a=this.textBubble)==null||a.setAnchorLocation(this.getAnchorLocation())}addMessage(r,a){if(this.textMap.get(a)===r)return this;r?this.textMap.set(a,r):this.textMap.delete(a);let f;return(f=this.textBubble)==null||f.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(r){if(this.bubbleIsVisible()!==r){if(r)this.textBubble=new um(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour();else{let a;(a=this.textBubble)==null||a.dispose(),this.textBubble=null}pe(new(ke(_o))(this.sourceBlock,r,"warning"))}}getAnchorLocation(){const r=Fy/2;return fn.sum(this.workspaceLocation,new fn(r,r))}getBubbleOwnerRect(){const r=this.sourceBlock.getSvgRoot().getBBox();return new Ri(r.y,r.y+r.height,r.x,r.x+r.width)}};Vp.TYPE=Vo.WARNING,Vp.WEIGHT=2;var yv=class extends Error{constructor(r){super(`Tried to append an icon of type ${r.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=r}},wc={};wc.DuplicateIconType=yv;var wn={};wn.CommentIcon=Jh,wn.Icon=gv,wn.IconType=Vo,wn.MutatorIcon=t.MutatorIcon$$module$build$src$core$icons$mutator_icon,wn.WarningIcon=Vp,wn.exceptions=wc,wn.registry=f_;var b0,Xi;b0="PROCEDURE",t.DEFAULT_ARG$$module$build$src$core$procedures="x",Xi={CATEGORY_NAME:b0,DEFAULT_ARG:t.DEFAULT_ARG$$module$build$src$core$procedures},Xi.ObservableProcedureMap=_0,Xi.allProcedures=yh,Xi.findLegalName=t.findLegalName$$module$build$src$core$procedures,Xi.flyoutCategory=gn,Xi.getCallers=iu,Xi.getDefinition=t.getDefinition$$module$build$src$core$procedures,Xi.isNameUsed=xn,Xi.isProcedureBlock=da,Xi.mutateCallers=t.mutateCallers$$module$build$src$core$procedures,Xi.mutatorOpenListener=fc,Xi.rename=t.rename$$module$build$src$core$procedures;var Uy=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(r){return Object.prototype.hasOwnProperty.call(this,r)||(this[r]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[r]}isField(r){return r.type&this.FIELD}isHat(r){return r.type&this.HAT}isIcon(r){return r.type&this.ICON}isSpacer(r){return r.type&this.SPACER}isInRowSpacer(r){return r.type&this.IN_ROW_SPACER}isInput(r){return r.type&this.INPUT}isExternalInput(r){return r.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(r){return r.type&this.INLINE_INPUT}isStatementInput(r){return r.type&this.STATEMENT_INPUT}isPreviousConnection(r){return r.type&this.PREVIOUS_CONNECTION}isNextConnection(r){return r.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(r){return r.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(r){return r.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(r){return r.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(r){return r.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(r){return r.type&this.RIGHT_SQUARE_CORNER}isCorner(r){return r.type&this.CORNER}isJaggedEdge(r){return r.type&this.JAGGED_EDGE}isRow(r){return r.type&this.ROW}isBetweenRowSpacer(r){return r.type&this.BETWEEN_ROW_SPACER}isTopRow(r){return r.type&this.TOP_ROW}isBottomRow(r){return r.type&this.BOTTOM_ROW}isTopOrBottomRow(r){return r.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(r){return r.type&this.INPUT_ROW}},lt=new Uy,er=class{constructor(r){this.centerline=this.xPos=this.height=this.width=0,this.constants_=r,this.type=lt.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},m_=class{constructor(r){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=r,this.type=lt.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let r=this.elements.length-1;0<=r;r--){const a=this.elements[r];if(lt.isInput(a))return a}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let r=0;r<this.elements.length;r++){const a=this.elements[r];if(lt.isSpacer(a))return a}return null}getLastSpacer(){for(let r=this.elements.length-1;0<=r;r--){const a=this.elements[r];if(lt.isSpacer(a))return a}return null}},g_=class extends m_{constructor(r){super(r),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=lt.BOTTOM_ROW}hasLeftSquareCorner(r){return!!r.outputConnection||!!r.getNextBlock()}hasRightSquareCorner(r){return!0}measure(){let r=0,a=0,f=0;for(let S=0;S<this.elements.length;S++){const k=this.elements[S];a+=k.width,lt.isSpacer(k)||(lt.isNextConnection(k)?f=Math.max(f,k.height):r=Math.max(r,k.height))}this.width=Math.max(this.minWidth,a),this.height=Math.max(this.minHeight,r)+f,this.descenderHeight=f,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},qh=class extends er{constructor(r,a){super(r),this.connectionModel=a,this.type|=lt.CONNECTION,this.shape=this.constants_.shapeFor(a),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=a.isHighlighted()}},Km=class extends qh{constructor(r,a){super(r,a.connection),this.input=a,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=lt.INPUT,this.align=a.align,(this.connectedBlock=a.connection&&a.connection.targetBlock()?a.connection.targetBlock():null)?(r=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=r.width,this.connectedBlockHeight=r.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},bv=class extends Km{constructor(r,a){super(r,a),this.height=0,this.type|=lt.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},T0=class extends er{constructor(r,a,f){super(r),this.field=a,this.parentInput=f,this.isEditable=a.EDITABLE,this.flipRtl=a.getFlipRtl(),this.type|=lt.FIELD,r=this.field.getSize(),this.height=r.height,this.width=r.width}},zy=class extends er{constructor(r){super(r),this.type|=lt.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},Y1=class extends er{constructor(r,a){super(r),this.icon=a,this.flipRtl=!1,this.isVisible=nu(a)&&a.bubbleIsVisible(),this.type|=lt.ICON,r=a.getSize(),this.height=r.height,this.width=r.width}},Vd=class extends er{constructor(r,a){super(r),this.type=this.type|lt.SPACER|lt.IN_ROW_SPACER,this.width=a,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},Hy=class extends Km{constructor(r,a){super(r,a),this.type|=lt.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},__=class extends Km{constructor(r,a){super(r,a),this.type|=lt.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},Gy=class extends m_{constructor(r){super(r),this.connectedBlockWidths=0,this.type|=lt.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let r=0;for(let a=0;a<this.elements.length;a++){const f=this.elements[a];this.width+=f.width,lt.isInput(f)&&f instanceof Km&&(lt.isStatementInput(f)&&f instanceof __?r+=f.connectedBlockWidth:lt.isExternalInput(f)&&f instanceof bv&&f.connectedBlockWidth!==0&&(r+=f.connectedBlockWidth-f.connectionWidth)),lt.isSpacer(f)||(this.height=Math.max(this.height,f.height))}this.connectedBlockWidths=r,this.widthWithConnectedBlocks=this.width+r}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},K1=class extends er{constructor(r){super(r),this.type|=lt.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},J1=class extends qh{constructor(r,a){super(r,a),this.type|=lt.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},q1=class extends qh{constructor(r,a){super(r,a),this.connectionOffsetX=0,this.type|=lt.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},Q1=class extends qh{constructor(r,a){super(r,a),this.type|=lt.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},cm=class extends er{constructor(r,a){super(r),this.type=(a&&a!=="left"?lt.RIGHT_ROUND_CORNER:lt.LEFT_ROUND_CORNER)|lt.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},Wy=class extends m_{constructor(r,a,f){super(r),this.height=a,this.width=f,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|lt.SPACER|lt.BETWEEN_ROW_SPACER,this.elements=[new Vd(this.constants_,f)]}measure(){}},hm=class extends er{constructor(r,a){super(r),this.type=(a&&a!=="left"?lt.RIGHT_SQUARE_CORNER:lt.LEFT_SQUARE_CORNER)|lt.CORNER,this.width=this.height=this.constants_.NO_PADDING}},Vy=class extends m_{constructor(r){super(r),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=lt.TOP_ROW}hasLeftSquareCorner(r){const a=(r.hat?r.hat==="cap":this.constants_.ADD_START_HATS)&&!r.outputConnection&&!r.previousConnection,f=r.getPreviousBlock();return!!r.outputConnection||a||(f?f.getNextBlock()===r:!1)}hasRightSquareCorner(r){return!0}measure(){let r=0,a=0,f=0;for(let S=0;S<this.elements.length;S++){const k=this.elements[S];a+=k.width,lt.isSpacer(k)||(lt.isHat(k)&&k instanceof zy?f=Math.max(f,k.ascenderHeight):r=Math.max(r,k.height))}this.width=Math.max(this.minWidth,a),this.height=Math.max(this.minHeight,r)+f,this.capline=this.ascenderHeight=f,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},v_=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=Ui(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(r){this.blockStyles=Object.create(null);const a=r.blockStyles;for(const f in a)this.blockStyles[f]=this.validatedBlockStyle_(a[f]);this.setDynamicProperties_(r)}setDynamicProperties_(r){this.setFontConstants_(r),this.setComponentConstants_(r),this.ADD_START_HATS=r.startHats!==void 0?r.startHats:this.ADD_START_HATS}setFontConstants_(r){r.fontStyle&&r.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=r.fontStyle.family),r.fontStyle&&r.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=r.fontStyle.weight),r.fontStyle&&r.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=r.fontStyle.size),r=ze("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=r.height,this.FIELD_TEXT_BASELINE=r.baseline}setComponentConstants_(r){this.CURSOR_COLOUR=r.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=r.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=r.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(r.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(r){const a="auto_"+r;return this.blockStyles[a]||(this.blockStyles[a]=this.createBlockStyle_(r)),{style:this.blockStyles[a],name:a}}getBlockStyle(r){return this.blockStyles[r||""]||(r&&r.indexOf("auto_")===0?this.getBlockStyleForColour(r.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(r){return this.validatedBlockStyle_({colourPrimary:r})}validatedBlockStyle_(r){const a={};return r&&Object.assign(a,r),r=Ji(a.colourPrimary||"#000"),a.colourPrimary=r.hex,a.colourSecondary=a.colourSecondary?Ji(a.colourSecondary).hex:this.generateSecondaryColour_(a.colourPrimary),a.colourTertiary=a.colourTertiary?Ji(a.colourTertiary).hex:this.generateTertiaryColour_(a.colourPrimary),a.hat=a.hat||"",a}generateSecondaryColour_(r){return zc("#fff",r,.6)||r}generateTertiaryColour_(r){return zc("#fff",r,.3)||r}dispose(){this.embossFilter&&pt(this.embossFilter),this.disabledPattern&&pt(this.disabledPattern),this.debugFilter&&pt(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const r=this.JAGGED_TEETH_HEIGHT,a=this.JAGGED_TEETH_WIDTH,f=Uo([Vn(a,r/4),Vn(2*-a,r/2),Vn(a,r/4)]);return{height:r,width:a,path:f}}makeStartHat(){const r=this.START_HAT_HEIGHT,a=this.START_HAT_WIDTH,f=zs("c",[Vn(30,-r),Vn(70,-r),Vn(a,0)]);return{height:r,width:a,path:f}}makePuzzleTab(){function r(j){j=j?-1:1;const _e=-j;var Ue=f/2;const Wt=Ue+2.5,Hn=Ue+.5,_l=Vn(-a,j*Ue);return Ue=Vn(a,j*Ue),zs("c",[Vn(0,j*Wt),Vn(-a,_e*Hn),_l])+zs("s",[Vn(a,2.5*_e),Ue])}const a=this.TAB_WIDTH,f=this.TAB_HEIGHT,S=r(!0),k=r(!1);return{type:this.SHAPES.PUZZLE,width:a,height:f,pathDown:k,pathUp:S}}makeNotch(){function r(_e){return Uo([Vn(_e*S,f),Vn(3*_e,0),Vn(_e*S,-f)])}const a=this.NOTCH_WIDTH,f=this.NOTCH_HEIGHT,S=(a-3)/2,k=r(1),j=r(-1);return{type:this.SHAPES.NOTCH,width:a,height:f,pathLeft:k,pathRight:j}}makeInsideCorners(){const r=this.CORNER_RADIUS,a=di("a","0 0,0",r,Vn(-r,r)),f=di("a","0 0,0",r,Vn(r,r));return{width:r,height:r,pathTop:a,pathBottom:f}}makeOutsideCorners(){const r=this.CORNER_RADIUS,a=Ui(0,r)+di("a","0 0,1",r,Vn(r,-r)),f=di("a","0 0,1",r,Vn(r,r)),S=di("a","0 0,1",r,Vn(-r,-r)),k=di("a","0 0,1",r,Vn(-r,r));return{topLeft:a,topRight:f,bottomRight:k,bottomLeft:S,rightHeight:r}}shapeFor(r){switch(r.type){case Pn.INPUT_VALUE:case Pn.OUTPUT_VALUE:return this.PUZZLE_TAB;case Pn.PREVIOUS_STATEMENT:case Pn.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(r,a,f){this.injectCSS_(a,f),this.defs=re(Ge.DEFS,{},r),r=re(Ge.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),re(Ge.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},r),a=re(Ge.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},r),re(Ge.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},a),re(Ge.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},r),re(Ge.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},r),this.embossFilterId=r.id,this.embossFilter=r,r=re(Ge.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),re(Ge.RECT,{width:10,height:10,fill:"#aaa"},r),re(Ge.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},r),this.disabledPatternId=r.id,this.disabledPattern=r,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const r=re(Ge.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),a=re(Ge.FECOMPONENTTRANSFER,{result:"outBlur"},r);re(Ge.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),re(Ge.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},r),re(Ge.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},r),this.debugFilterId=r.id,this.debugFilter=r}}injectCSS_(r,a){a=this.getCSS_(a),r="blockly-renderer-style-"+r,this.cssNode=document.getElementById(r);const f=a.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=f:(a=document.createElement("style"),a.id=r,r=document.createTextNode(f),a.appendChild(r),document.head.insertBefore(a,document.head.firstChild),this.cssNode=a)}getCSS_(r){return[`${r} .blocklyText, `,`${r} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${r} .blocklyText {`,"fill: #fff;","}",`${r} .blocklyNonEditableText>rect,`,`${r} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${r} .blocklyNonEditableText>text,`,`${r} .blocklyEditableText>text {`,"fill: #000;","}",`${r} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${r} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${r} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${r} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${r} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${r} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${r} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${r} .blocklyReplaceable .blocklyPathLight,`,`${r} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${r} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},y_=class{constructor(r,a){this.inlinePath_=this.outlinePath_="",this.block_=r,this.info_=a,this.topLeft_=r.getRelativeToSurfaceXY(),this.constants_=a.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}hideHiddenIcons_(){xe("hideHiddenIcons_","v10","v11")}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}drawOutline_(){this.drawTop_();for(let r=1;r<this.info_.rows.length-1;r++){const a=this.info_.rows[r];a.hasJaggedEdge?this.drawJaggedEdge_(a):a.hasStatement?this.drawStatementInput_(a):a.hasExternalInput?this.drawValueInput_(a):this.drawRightSideRow_(a)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const r=this.info_.topRow,a=r.elements;this.positionPreviousConnection_(),this.outlinePath_+=Ui(r.xPos,this.info_.startY);for(let f=0,S;S=a[f];f++)lt.isLeftRoundedCorner(S)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:lt.isRightRoundedCorner(S)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:lt.isPreviousConnection(S)&&S instanceof qh?this.outlinePath_+=S.shape.pathLeft:lt.isHat(S)?this.outlinePath_+=this.constants_.START_HAT.path:lt.isSpacer(S)&&(this.outlinePath_+=Sn("h",S.width));this.outlinePath_+=Sn("v",r.height)}drawJaggedEdge_(r){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+Sn("v",r.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(r){const a=r.getLastInput();this.positionExternalValueConnection_(r);const f=_s(a.shape)?a.shape.pathDown(a.height):a.shape.pathDown;this.outlinePath_+=Sn("H",a.xPos+a.width)+f+Sn("v",r.height-a.connectionHeight)}drawStatementInput_(r){var a=r.getLastInput();if(a){var f=a.xPos+a.notchOffset+a.shape.width;a=a.shape.pathRight+Sn("h",-(a.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var S=r.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=Sn("H",f)+a+Sn("v",S)+this.constants_.INSIDE_CORNERS.pathBottom+Sn("H",r.xPos+r.width),this.positionStatementInputConnection_(r)}}drawRightSideRow_(r){this.outlinePath_+=Sn("V",r.yPos+r.height)}drawBottom_(){const r=this.info_.bottomRow,a=r.elements;this.positionNextConnection_();let f=0,S="";for(let k=a.length-1,j;j=a[k];k--)lt.isNextConnection(j)&&j instanceof qh?S+=j.shape.pathRight:lt.isLeftSquareCorner(j)?S+=Sn("H",r.xPos):lt.isLeftRoundedCorner(j)?S+=this.constants_.OUTSIDE_CORNERS.bottomLeft:lt.isRightRoundedCorner(j)?(S+=this.constants_.OUTSIDE_CORNERS.bottomRight,f=this.constants_.OUTSIDE_CORNERS.rightHeight):lt.isSpacer(j)&&(S+=Sn("h",-1*j.width));this.outlinePath_+=Sn("V",r.baseline-f),this.outlinePath_+=S}drawLeft_(){var r=this.info_.outputConnection;if(this.positionOutputConnection_(),r){const a=r.connectionOffsetY+r.height;r=_s(r.shape)?r.shape.pathUp(r.height):r.shape.pathUp,this.outlinePath_+=Sn("V",a)+r}this.outlinePath_+="z"}drawInternals_(){for(let r=0,a;a=this.info_.rows[r];r++)for(let f=0,S;S=a.elements[f];f++)lt.isInlineInput(S)?this.drawInlineInput_(S):(lt.isIcon(S)||lt.isField(S))&&this.layoutField_(S)}layoutField_(r){const a=r.centerline-r.height/2;let f=r.xPos;var S="";this.info_.RTL&&(f=-(f+r.width),r.flipRtl&&(f+=r.width,S="scale(-1 1)")),lt.isIcon(r)?(S=r.icon,S.setOffsetInBlock(new fn(f,a)),this.info_.isInsertionMarker&&S.hideForInsertionMarker()):(r=r.field.getSvgRoot(),r.setAttribute("transform","translate("+f+","+a+")"+S),this.info_.isInsertionMarker&&r.setAttribute("display","none"))}drawInlineInput_(r){const a=r.width,f=r.height,S=r.connectionOffsetY,k=r.connectionHeight+S;this.inlinePath_+=Xs(r.xPos+r.connectionWidth,r.centerline-f/2)+Sn("v",S)+r.shape.pathDown+Sn("v",f-k)+Sn("h",a-r.connectionWidth)+Sn("v",-f)+"z",this.positionInlineInputConnection_(r)}positionInlineInputConnection_(r){const a=r.centerline-r.height/2;if(r.connectionModel){let f=r.xPos+r.connectionWidth+r.connectionOffsetX;this.info_.RTL&&(f*=-1),r.connectionModel.setOffsetInBlock(f,a+r.connectionOffsetY)}}positionStatementInputConnection_(r){const a=r.getLastInput();if(a!=null&&a.connectionModel){let f=r.xPos+r.statementEdge+a.notchOffset;this.info_.RTL&&(f*=-1),a.connectionModel.setOffsetInBlock(f,r.yPos)}}positionExternalValueConnection_(r){const a=r.getLastInput();if(a&&a.connectionModel){let f=r.xPos+r.width;this.info_.RTL&&(f*=-1),a.connectionModel.setOffsetInBlock(f,r.yPos)}}positionPreviousConnection_(){const r=this.info_.topRow;if(r.connection){const a=r.xPos+r.notchOffset;r.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-a:a,0)}}positionNextConnection_(){const r=this.info_.bottomRow;if(r.connection){const a=r.connection,f=a.xPos;a.connectionModel.setOffsetInBlock(this.info_.RTL?-f:f,r.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const r=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-r:r,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const r of this.info_.rows)for(const a of r.elements)if(a instanceof qh)if(a.highlighted)this.drawConnectionHighlightPath(a);else{let f,S;(S=(f=this.block_.pathObject).removeConnectionHighlight)==null||S.call(f,a.connectionModel)}}drawConnectionHighlightPath(r){const a=r.connectionModel;r=a.type===Pn.INPUT_VALUE||a.type===Pn.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(r):this.getStatementConnectionHighlightPath(r);const f=a.getSourceBlock();let S,k;(k=(S=f.pathObject).addConnectionHighlight)==null||k.call(S,a,r,a.getOffsetInBlock(),f.RTL)}getExpressionConnectionHighlightPath(r){let a="";return _s(r.shape)?a=r.shape.pathDown(r.height):ul(r.shape)&&(a=r.shape.pathDown),r=this.constants_.TAB_OFFSET_FROM_TOP,Ui(0,-r)+Sn("v",r)+a+Sn("v",r)}getStatementConnectionHighlightPath(r){if(!ss(r.shape))throw Error("Statement connections should have notch shapes");const a=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return Ui(-a,0)+Sn("h",a)+r.shape.pathLeft+Sn("h",a)}};(function(r){r[r.LEFT=-1]="LEFT",r[r.CENTRE=0]="CENTRE",r[r.RIGHT=1]="RIGHT"})(t.Align$$module$build$src$core$inputs$align||(t.Align$$module$build$src$core$inputs$align={})),t.Align$$module$build$src$core$inputs$align;var Ti=class extends Hi{constructor(r,a,f){super(Hi.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,r!==Hi.SKIP_SETUP&&(f?this.configure_(f):this.class=a||null,this.setValue(r))}configure_(r){super.configure_(r),r.class&&(this.class=r.class)}initView(){this.createTextElement_(),this.class&&Be(this.getTextElement(),this.class)}doClassValidation_(r){return r==null?null:`${r}`}setClass(r){this.textElement_&&(this.class&&bt(this.textElement_,this.class),r&&Be(this.textElement_,r)),this.class=r}static fromJson(r){return new this(Gr(r.text),void 0,r)}};Es("field_label",Ti),Ti.prototype.DEFAULT_VALUE="";var es=class{constructor(r,a){this.name=r,this.sourceBlock=a,this.fieldRow=[],this.align=t.Align$$module$build$src$core$inputs$input.LEFT,this.visible=!0,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(r,a){return this.insertFieldAt(this.fieldRow.length,r,a),this}insertFieldAt(r,a,f){if(0>r||r>this.fieldRow.length)throw Error("index "+r+" out of bounds.");return(a||a===""&&f)&&(typeof a=="string"&&(a=t.fromJson$$module$build$src$core$field_registry({type:"field_label",text:a})),a.setSourceBlock(this.sourceBlock),this.sourceBlock.rendered&&(a.init(),a.applyColour()),a.name=f,a.setVisible(this.isVisible()),a.prefixField&&(r=this.insertFieldAt(r,a.prefixField)),this.fieldRow.splice(r,0,a),r++,a.suffixField&&(r=this.insertFieldAt(r,a.suffixField)),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours())),r}removeField(r,a){for(let f=0,S;S=this.fieldRow[f];f++)if(S.name===r)return S.dispose(),this.fieldRow.splice(f,1),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours()),!0;if(a)return!1;throw Error('Field "'+r+'" not found.')}isVisible(){return this.visible}setVisible(r){let a=[];if(this.visible===r)return a;this.visible=r;for(let S=0,k;k=this.fieldRow[S];S++)k.setVisible(r);if(this.connection){var f=this.connection;r?a=f.startTrackingAll():f.stopTrackingAll(),(f=f.targetBlock())&&(f.getSvgRoot().style.display=r?"block":"none")}return a}markDirty(){for(let r=0,a;a=this.fieldRow[r];r++)a.markDirty()}setCheck(r){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(r),this}setAlign(r){return this.align=r,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(r){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(r),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let r=0;r<this.fieldRow.length;r++)this.fieldRow[r].init()}dispose(){for(let r=0,a;a=this.fieldRow[r];r++)a.dispose();this.connection&&this.connection.dispose()}makeConnection(r){return this.sourceBlock.makeConnection_(r)}},Z1;(function(r){r=r.Align||(r.Align={}),r[r.LEFT=-1]="LEFT",r[r.CENTRE=0]="CENTRE",r[r.RIGHT=1]="RIGHT"})(es||(es={})),t.Align$$module$build$src$core$inputs$input=es.Align,Z1={Align:t.Align$$module$build$src$core$inputs$input},Z1.Input=es;var Af=class extends es{constructor(r,a){super(r,a),this.name=r,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},dm=class extends es{constructor(r,a){super(r,a),this.name=r,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},Qh=class extends es{constructor(r,a){if(!r)throw Error("Statement inputs must have a non-empty name");super(r,a),this.name=r,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(Pn.NEXT_STATEMENT)}},eT;t.ValueInput$$module$build$src$core$inputs$value_input=class extends es{constructor(r,a){if(!r)throw Error("Value inputs must have a non-empty name");super(r,a),this.name=r,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(Pn.INPUT_VALUE)}},eT={},eT.ValueInput=t.ValueInput$$module$build$src$core$inputs$value_input;var S0=class{constructor(r,a){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=r,this.block_=a,this.constants_=this.renderer_.getConstants(),this.outputConnection=a.outputConnection?new q1(this.constants_,a.outputConnection):null,this.isInline=a.getInputsInline()&&!a.isCollapsed(),this.isCollapsed=a.isCollapsed(),this.isInsertionMarker=a.isInsertionMarker(),this.RTL=a.RTL,this.topRow=new Vy(this.constants_),this.bottomRow=new g_(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let r=new Gy(this.constants_);this.inputRows.push(r);var a=this.block_.getIcons();for(let f=0,S;S=a[f];f++){const k=new Y1(this.constants_,S);this.isCollapsed&&!S.isShownWhenCollapsed()||r.elements.push(k)}a=void 0;for(let f=0,S;S=this.block_.inputList[f];f++)if(S.isVisible()){this.shouldStartNewRow_(S,a)&&(this.rows.push(r),r=new Gy(this.constants_),this.inputRows.push(r));for(let k=0,j;j=S.fieldRow[k];k++)r.elements.push(new T0(this.constants_,j,S));this.addInput_(S,r),a=S}this.isCollapsed&&(r.hasJaggedEdge=!0,r.elements.push(new K1(this.constants_))),(r.elements.length||r.hasDummyInput)&&this.rows.push(r),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var r=!!this.block_.previousConnection;const a=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!r;let f=this.topRow.hasLeftSquareCorner(this.block_)?hm:cm;this.topRow.elements.push(new f(this.constants_)),a?(r=new zy(this.constants_),this.topRow.elements.push(r),this.topRow.capline=r.ascenderHeight):r&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Q1(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof Qh&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,f=this.topRow.hasRightSquareCorner(this.block_)?hm:cm,this.topRow.elements.push(new f(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Qh?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new hm(this.constants_)):this.bottomRow.elements.push(new cm(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new J1(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new hm(this.constants_,"right")):this.bottomRow.elements.push(new cm(this.constants_,"right"))}addInput_(r,a){this.isInline&&r instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new Hy(this.constants_,r)),a.hasInlineInput=!0):r instanceof Qh?(a.elements.push(new __(this.constants_,r)),a.hasStatement=!0):r instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new bv(this.constants_,r)),a.hasExternalInput=!0):(r instanceof Af||r instanceof dm)&&(a.minHeight=Math.max(a.minHeight,r.getSourceBlock()&&r.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),a.hasDummyInput=!0),a.align===null&&(a.align=r.align)}shouldStartNewRow_(r,a){return a?a instanceof dm||r instanceof Qh||a instanceof Qh?!0:r instanceof t.ValueInput$$module$build$src$core$inputs$value_input||r instanceof Af||a instanceof t.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let r=0,a;a=this.rows[r];r++){const f=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new Vd(this.constants_,this.getInRowSpacing_(null,f[0]))),f.length){for(let S=0;S<f.length-1;S++){a.elements.push(f[S]);const k=this.getInRowSpacing_(f[S],f[S+1]);a.elements.push(new Vd(this.constants_,k))}a.elements.push(f[f.length-1]),a.endsWithElemSpacer()&&a.elements.push(new Vd(this.constants_,this.getInRowSpacing_(f[f.length-1],null)))}}}getInRowSpacing_(r,a){if(!r&&a&&lt.isStatementInput(a))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(r&&lt.isInput(r)&&!a){if(lt.isExternalInput(r))return this.constants_.NO_PADDING;if(lt.isInlineInput(r))return this.constants_.LARGE_PADDING;if(lt.isStatementInput(r))return this.constants_.NO_PADDING}return r&&lt.isLeftSquareCorner(r)&&a&&(lt.isPreviousConnection(a)||lt.isNextConnection(a))?a.notchOffset:r&&lt.isLeftRoundedCorner(r)&&a&&(lt.isPreviousConnection(a)||lt.isNextConnection(a))?a.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let r=0,a=0,f=0;for(let k=0,j;j=this.rows[k];k++){if(j.measure(),a=Math.max(a,j.width),j.hasStatement){var S=j.getLastInput();let _e,Ue;S=j.width-((Ue=(_e=S)==null?void 0:_e.width)!=null?Ue:0),r=Math.max(r,S)}f=Math.max(f,j.widthWithConnectedBlocks)}this.statementEdge=r,this.width=a;for(let k=0,j;j=this.rows[k];k++)j.hasStatement&&(j.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(a,f),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let a=0,f;f=this.rows[a];a++)if(f.hasStatement)this.alignStatementRow_(f);else{var r=f.width;r=this.getDesiredRowWidth_(f)-r,0<r&&this.addAlignmentPadding_(f,r),lt.isTopOrBottomRow(f)&&(f.widthWithConnectedBlocks=f.width)}}getDesiredRowWidth_(r){return this.width-this.startX}addAlignmentPadding_(r,a){const f=r.getFirstSpacer(),S=r.getLastSpacer();if((r.hasExternalInput||r.hasStatement)&&(r.widthWithConnectedBlocks+=a),r.align===t.Align$$module$build$src$core$inputs$align.LEFT&&S)S.width+=a;else if(r.align===t.Align$$module$build$src$core$inputs$align.CENTRE&&f&&S)f.width+=a/2,S.width+=a/2;else if(r.align===t.Align$$module$build$src$core$inputs$align.RIGHT&&f)f.width+=a;else if(S)S.width+=a;else return;r.width+=a}alignStatementRow_(r){const a=r.getLastInput();if(a){var f=r.width-a.width,S=this.statementEdge;f=S-f,0<f&&this.addAlignmentPadding_(r,f),f=r.width,S=this.getDesiredRowWidth_(r),a.width+=S-f,a.height=Math.max(a.height,r.height),r.width+=S-f,r.widthWithConnectedBlocks=Math.max(r.width,this.statementEdge+r.connectedBlockWidths)}}addRowSpacing_(){const r=this.rows;this.rows=[];for(let a=0;a<r.length;a++)this.rows.push(r[a]),a!==r.length-1&&this.rows.push(this.makeSpacerRow_(r[a],r[a+1]))}makeSpacerRow_(r,a){var f=this.getSpacerRowHeight_(r,a);const S=this.getSpacerRowWidth_(r,a);return f=new Wy(this.constants_,f,S),r.hasStatement&&(f.followsStatement=!0),a.hasStatement&&(f.precedesStatement=!0),f}getSpacerRowWidth_(r,a){return this.width-this.startX}getSpacerRowHeight_(r,a){return this.constants_.MEDIUM_PADDING}getElemCenterline_(r,a){return lt.isSpacer(a)?r.yPos+a.height/2:lt.isBottomRow(r)?(r=r.yPos+r.height-r.descenderHeight,lt.isNextConnection(a)?r+a.height/2:r-a.height/2):lt.isTopRow(r)?lt.isHat(a)?r.capline-a.height/2:r.capline+a.height/2:r.yPos+r.height/2}recordElemPositions_(r){let a=r.xPos;for(let f=0,S;S=r.elements[f];f++)lt.isSpacer(S)&&(S.height=r.height),S.xPos=a,S.centerline=this.getElemCenterline_(r,S),a+=S.width}finalize_(){let r=0,a=0;for(let f=0,S;S=this.rows[f];f++)S.yPos=a,S.xPos=this.startX,a+=S.height,r=Math.max(r,S.widthWithConnectedBlocks),this.recordElemPositions_(S);if(this.outputConnection&&this.block_.nextConnection){const f=this.block_.nextConnection.targetBlock();f&&(r=Math.max(r,f.getHeightWidth().width))}this.widthWithChildren=r+this.startX,this.height=a,this.startY=this.topRow.capline,this.bottomRow.baseline=a-this.bottomRow.descenderHeight}getMeasureableForConnection(r){let a;if(((a=this.outputConnection)==null?void 0:a.connectionModel)===r)return this.outputConnection;for(const f of this.rows)for(const S of f.elements)if(S instanceof qh&&S.connectionModel===r)return S;return null}},Qt=class{constructor(r,a,f){if(this.wsCoordinate=null,!a)throw Error("Cannot create a node without a location.");this.type=r,this.isConnectionLocation=Qt.isConnectionType(r),this.location=a,this.processParams(f||null)}processParams(r){r&&r.wsCoordinate&&(this.wsCoordinate=r.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var r=this.location.getParentInput();const a=r.getSourceBlock();for(r=a.inputList.indexOf(r),r+=1;r<a.inputList.length;r++){const f=a.inputList[r],S=f.fieldRow;for(let k=0;k<S.length;k++){const j=S[k];if(j.isClickable()||Qt.NAVIGATE_ALL_FIELDS)return Qt.createFieldNode(j)}if(f.connection)return Qt.createInputNode(f)}return null}findNextForField(){var r=this.location,a=r.getParentInput();const f=r.getSourceBlock();if(!f)throw Error("The current AST location is not associated with a block");var S=f.inputList.indexOf(a);for(r=a.fieldRow.indexOf(r)+1;S<f.inputList.length;S++){a=f.inputList[S];const k=a.fieldRow;for(;r<k.length;){if(k[r].isClickable()||Qt.NAVIGATE_ALL_FIELDS)return Qt.createFieldNode(k[r]);r++}if(r=0,a.connection)return Qt.createInputNode(a)}return null}findPrevForInput(){const r=this.location.getParentInput(),a=r.getSourceBlock();for(var f=a.inputList.indexOf(r);0<=f;f--){var S=a.inputList[f];if(S.connection&&S!==r)return Qt.createInputNode(S);S=S.fieldRow;for(let k=S.length-1;0<=k;k--){const j=S[k];if(j.isClickable()||Qt.NAVIGATE_ALL_FIELDS)return Qt.createFieldNode(j)}}return null}findPrevForField(){var r=this.location;const a=r.getParentInput(),f=r.getSourceBlock();if(!f)throw Error("The current AST location is not associated with a block");var S=f.inputList.indexOf(a);for(r=a.fieldRow.indexOf(r)-1;0<=S;S--){var k=f.inputList[S];if(k.connection&&k!==a)return Qt.createInputNode(k);for(k=k.fieldRow;-1<r;){if(k[r].isClickable()||Qt.NAVIGATE_ALL_FIELDS)return Qt.createFieldNode(k[r]);r--}0<=S-1&&(r=f.inputList[S-1].fieldRow.length-1)}return null}navigateBetweenStacks(r){var a=this.getLocation();if(a.getSourceBlock){var f=a.getSourceBlock();f&&(a=f)}if(!a||a.isDeadOrDying())return null;f=a.getRootBlock(),a=f.workspace.getTopBlocks(!0);for(let S=0;S<a.length;S++)if(f.id===a[S].id)return r=S+(r?1:-1),r===-1||r===a.length?null:Qt.createStackNode(a[r]);throw Error("Couldn't find "+(r?"next":"previous")+" stack?!")}findTopASTNodeForBlock(r){const a=cl(r);return a?Qt.createConnectionNode(a):Qt.createBlockNode(r)}getOutAstNodeForBlock(r){if(!r)return null;r=r.getTopStackBlock();const a=cl(r);return a&&a.targetConnection&&a.targetConnection.getParentInput()?Qt.createInputNode(a.targetConnection.getParentInput()):Qt.createStackNode(r)}findFirstFieldOrInput(r){r=r.inputList;for(let a=0;a<r.length;a++){const f=r[a],S=f.fieldRow;for(let k=0;k<S.length;k++){const j=S[k];if(j.isClickable()||Qt.NAVIGATE_ALL_FIELDS)return Qt.createFieldNode(j)}if(f.connection)return Qt.createInputNode(f)}return null}getSourceBlock(){return this.getType()===Qt.types.BLOCK?this.getLocation():this.getType()===Qt.types.STACK?this.getLocation():this.getType()===Qt.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case Qt.types.STACK:return this.navigateBetweenStacks(!0);case Qt.types.OUTPUT:return Qt.createBlockNode(this.location.getSourceBlock());case Qt.types.FIELD:return this.findNextForField();case Qt.types.INPUT:return this.findNextForInput();case Qt.types.BLOCK:const r=this.location.nextConnection;if(!r)break;return Qt.createConnectionNode(r);case Qt.types.PREVIOUS:return Qt.createBlockNode(this.location.getSourceBlock());case Qt.types.NEXT:return Qt.createConnectionNode(this.location.targetConnection)}return null}in(){switch(this.type){case Qt.types.WORKSPACE:const r=this.location.getTopBlocks(!0);if(0<r.length)return Qt.createStackNode(r[0]);break;case Qt.types.STACK:return this.findTopASTNodeForBlock(this.location);case Qt.types.BLOCK:return this.findFirstFieldOrInput(this.location);case Qt.types.INPUT:return Qt.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case Qt.types.STACK:return this.navigateBetweenStacks(!1);case Qt.types.FIELD:return this.findPrevForField();case Qt.types.INPUT:return this.findPrevForInput();case Qt.types.BLOCK:var r=cl(this.location);if(!r)break;return Qt.createConnectionNode(r);case Qt.types.PREVIOUS:if((r=this.location.targetConnection)&&!r.getParentInput())return Qt.createConnectionNode(r);break;case Qt.types.NEXT:return Qt.createBlockNode(this.location.getSourceBlock())}return null}out(){switch(this.type){case Qt.types.STACK:var r=this.location,a=r.getRelativeToSurfaceXY();return a=new fn(a.x,a.y+Qt.DEFAULT_OFFSET_Y),Qt.createWorkspaceNode(r.workspace,a);case Qt.types.OUTPUT:return r=this.location,(a=r.targetConnection)?Qt.createConnectionNode(a):Qt.createStackNode(r.getSourceBlock());case Qt.types.FIELD:if(r=this.location.getSourceBlock(),!r)throw Error("The current AST location is not associated with a block");return Qt.createBlockNode(r);case Qt.types.INPUT:return Qt.createBlockNode(this.location.getSourceBlock());case Qt.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case Qt.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case Qt.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(r){switch(r){case Qt.types.PREVIOUS:case Qt.types.NEXT:case Qt.types.INPUT:case Qt.types.OUTPUT:return!0}return!1}static createFieldNode(r){return r?new Qt(Qt.types.FIELD,r):null}static createConnectionNode(r){if(!r)return null;const a=r.type;return a===Pn.INPUT_VALUE||a===Pn.NEXT_STATEMENT&&r.getParentInput()?Qt.createInputNode(r.getParentInput()):a===Pn.NEXT_STATEMENT?new Qt(Qt.types.NEXT,r):a===Pn.OUTPUT_VALUE?new Qt(Qt.types.OUTPUT,r):a===Pn.PREVIOUS_STATEMENT?new Qt(Qt.types.PREVIOUS,r):null}static createInputNode(r){return r&&r.connection?new Qt(Qt.types.INPUT,r.connection):null}static createBlockNode(r){return r?new Qt(Qt.types.BLOCK,r):null}static createStackNode(r){return r?new Qt(Qt.types.STACK,r):null}static createWorkspaceNode(r,a){return a&&r?new Qt(Qt.types.WORKSPACE,r,{wsCoordinate:a}):null}static createTopNode(r){const a=cl(r);return a?Qt.createConnectionNode(a):Qt.createBlockNode(r)}};Qt.NAVIGATE_ALL_FIELDS=!1,Qt.DEFAULT_OFFSET_Y=-20,function(r){r=r.types||(r.types={}),r.FIELD="field",r.BLOCK="block",r.INPUT="input",r.OUTPUT="output",r.NEXT="next",r.PREVIOUS="previous",r.STACK="stack",r.WORKSPACE="workspace"}(Qt||(Qt={}));var b_=class extends g{constructor(r,a,f,S){let k=r?r.workspace.id:void 0;S&&S.getType()===Qt.types.WORKSPACE&&(k=S.getLocation().id),super(k),this.type=Ll,this.blockId=r==null?void 0:r.id,this.oldNode=f||void 0,this.newNode=S,this.isCursor=a}toJson(){const r=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return r.isCursor=this.isCursor,r.blockId=this.blockId,r.oldNode=this.oldNode,r.newNode=this.newNode,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new b_),a.isCursor=r.isCursor,a.blockId=r.blockId,a.oldNode=r.oldNode,a.newNode=r.newNode,a}};i(Bt.EVENT,Ll,b_);var HE="blocklyCursor",GE="blocklyMarker",WE=.75,T_=class{constructor(r,a,f){this.workspace=r,this.marker=f,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=a,r=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=f.colour||r}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const r=this.isCursor()?HE:GE;return this.svgGroup_=re(Ge.G,{class:r}),this.createDomInternal_(),this.svgGroup_}setParent_(r){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),r.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),r.setMarkerSvg(this.getSvgRoot())),this.parent=r}draw(r,a){if(a){this.constants_=this.workspace.getRenderer().getConstants();var f=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||f,this.applyColour_(a),this.showAtLocation_(a),this.fireMarkerEvent(r,a),r=this.currentMarkerSvg.childNodes[0],r!==void 0&&r.beginElement&&r.beginElement()}else this.hide()}showAtLocation_(r){const a=r.getLocation().type;r.getType()===Qt.types.BLOCK?this.showWithBlock_(r):r.getType()===Qt.types.OUTPUT?this.showWithOutput_(r):a===Pn.INPUT_VALUE?this.showWithInput_(r):a===Pn.NEXT_STATEMENT?this.showWithNext_(r):r.getType()===Qt.types.PREVIOUS?this.showWithPrevious_(r):r.getType()===Qt.types.FIELD?this.showWithField_(r):r.getType()===Qt.types.WORKSPACE?this.showWithCoordinates_(r):r.getType()===Qt.types.STACK&&this.showWithStack_(r)}showWithBlockPrevOutput(r){r=r.getSourceBlock();const a=r.width;var f=r.height,S=f*WE;const k=this.constants_.CURSOR_BLOCK_PADDING;r.previousConnection?(f=this.constants_.shapeFor(r.previousConnection),this.positionPrevious_(a,k,S,f)):r.outputConnection?(S=this.constants_.shapeFor(r.outputConnection),this.positionOutput_(a,f,S)):this.positionBlock_(a,k,S),this.setParent_(r),this.showCurrent_()}showWithBlock_(r){this.showWithBlockPrevOutput(r)}showWithPrevious_(r){this.showWithBlockPrevOutput(r)}showWithOutput_(r){this.showWithBlockPrevOutput(r)}showWithCoordinates_(r){var a=r.getWsCoordinate();r=a.x,a=a.y,this.workspace.RTL&&(r-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(r,a,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(r){r=r.getLocation();const a=r.getSize().width,f=r.getSize().height;this.positionRect_(0,0,a,f),this.setParent_(r),this.showCurrent_()}showWithInput_(r){r=r.getLocation();const a=r.getSourceBlock();this.positionInput_(r),this.setParent_(a),this.showCurrent_()}showWithNext_(r){var a=r.getLocation();r=a.getSourceBlock();let f=0;a=a.getOffsetInBlock().y;const S=r.getHeightWidth().width;this.workspace.RTL&&(f=-S),this.positionLine_(f,a,S),this.setParent_(r),this.showCurrent_()}showWithStack_(r){r=r.getLocation();var a=r.getHeightWidth();const f=a.width+this.constants_.CURSOR_STACK_PADDING;a=a.height+this.constants_.CURSOR_STACK_PADDING;const S=-this.constants_.CURSOR_STACK_PADDING/2,k=-this.constants_.CURSOR_STACK_PADDING/2;let j=S;this.workspace.RTL&&(j=-(f+S)),this.positionRect_(j,k,f,a),this.setParent_(r),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(r,a,f){if(r=Ui(-a,f)+Sn("V",-a)+Sn("H",r+2*a)+Sn("V",f),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",r),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(r){const a=r.getOffsetInBlock().x,f=r.getOffsetInBlock().y;r=Xs(0,0)+this.constants_.shapeFor(r).pathDown,this.markerInput_.setAttribute("d",r),this.markerInput_.setAttribute("transform","translate("+a+","+f+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(r,a,f){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${r}`),this.markerSvgLine_.setAttribute("y",`${a}`),this.markerSvgLine_.setAttribute("width",`${f}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(r,a,f){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");r=Ui(r,0)+Sn("h",-(r-f.width))+Sn("v",this.constants_.TAB_OFFSET_FROM_TOP)+f.pathDown+Sn("V",a)+Sn("H",r),this.markerBlock_.setAttribute("d",r),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(r,a,f,S){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");r=Ui(-a,f)+Sn("V",-a)+Sn("H",this.constants_.NOTCH_OFFSET_LEFT)+S.pathLeft+Sn("H",r+2*a)+Sn("V",f),this.markerBlock_.setAttribute("d",r),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(r,a,f,S){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${r}`),this.markerSvgRect_.setAttribute("y",`${a}`),this.markerSvgRect_.setAttribute("width",`${f}`),this.markerSvgRect_.setAttribute("height",`${S}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(r){r.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(r,a){const f=a.getSourceBlock();r=new(ke(Ll))(f,this.isCursor(),r,a),pe(r)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=re(Ge.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=re(Ge.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=re(Ge.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=re(Ge.PATH,{transform:""},this.markerSvg_),this.markerBlock_=re(Ge.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const r=this.getBlinkProperties_();re(Ge.ANIMATE,r,this.markerSvgLine_),re(Ge.ANIMATE,r,this.markerInput_),re(Ge.ANIMATE,Object.assign({},r,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(r){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(r=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",r),this.markerInput_.firstElementChild.setAttribute("values",r),this.markerBlock_.firstElementChild.setAttribute("values",r))}dispose(){this.svgGroup_&&pt(this.svgGroup_)}},E0=class{constructor(r,a,f){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=f,this.style=a,this.svgRoot=r,this.svgPath=re(Ge.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(r){this.svgPath.setAttribute("d",r)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(r){r?(this.svgRoot.appendChild(r),this.cursorSvg=r):this.cursorSvg=null}setMarkerSvg(r){r?(this.cursorSvg?this.svgRoot.insertBefore(r,this.cursorSvg):this.svgRoot.appendChild(r),this.markerSvg=r):this.markerSvg=null}applyColour(r){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(r.isShadow()),this.updateDisabled_(!r.isEnabled()||r.getInheritedDisabled())}setStyle(r){this.style=r}setClass_(r,a){r&&(a?Be(this.svgRoot,r):bt(this.svgRoot,r))}updateHighlighted(r){r?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(r){r&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(r){this.setClass_("blocklyDisabled",r),r&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(r){this.setClass_("blocklySelected",r)}updateDraggingDelete(r){this.setClass_("blocklyDraggingDelete",r)}updateInsertionMarker(r){this.setClass_("blocklyInsertionMarker",r)}updateMovable(r){this.setClass_("blocklyDraggable",r)}updateReplacementFade(r){this.setClass_("blocklyReplaceable",r)}updateShapeForInputHighlight(r,a){}addConnectionHighlight(r,a,f,S){if(this.connectionHighlights.has(r)){if(this.currentHighlightMatchesNew(r,a,f))return;this.removeConnectionHighlight(r)}a=re(Ge.PATH,{class:"blocklyHighlightedConnectionPath",d:a,transform:`translate(${f.x}, ${f.y})`+(S?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(r,a)}currentHighlightMatchesNew(r,a,f){let S;const k=(S=this.connectionHighlights.get(r))==null?void 0:S.getAttribute("d");return r=this.highlightOffsets.get(r),k===a&&fn.equals(r,f)}removeConnectionHighlight(r){const a=this.connectionHighlights.get(r);a&&(pt(a),this.connectionHighlights.delete(r))}},hs=class{constructor(r,a){this.type=a,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=r}connect_(r){const a=Pn.INPUT_VALUE,f=this.getSourceBlock();var S=r.getSourceBlock();r.isConnected()&&r.disconnectInternal(!1);let k;if(this.isConnected()){const _e=this.stashShadowState(),Ue=this.targetBlock();Ue.isShadow()?Ue.dispose(!1):(this.disconnectInternal(),k=Ue),this.applyShadowState(_e)}let j;ie()&&(j=new(ke(t.MOVE$$module$build$src$core$events$utils))(S),j.setReason(["connect"])),zo(this,r),S.setParent(f),j&&(j.recordNew(),pe(j)),k&&(r=this.type===a?k.outputConnection:k.previousConnection)&&((S=hs.getConnectionForOrphanedConnection(S,r))?r.connect(S):r.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal();const r=this.targetBlock();r&&!r.isDeadOrDying()&&r.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===Pn.INPUT_VALUE||this.type===Pn.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(r){}connect(r){if(this.targetConnection===r)return!0;if(this.getConnectionChecker().canConnect(this,r,!1)){const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(r):r.connect_(this),t.setGroup$$module$build$src$core$events$utils(a)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(r=!0){const{parentConnection:a,childConnection:f}=this.getParentAndChildConnections();if(!a||!f)throw Error("Source connection not connected.");const S=t.getGroup$$module$build$src$core$events$utils();S||t.setGroup$$module$build$src$core$events$utils(!0);let k;ie()&&(k=new(ke(t.MOVE$$module$build$src$core$events$utils))(f.getSourceBlock()),k.setReason(["disconnect"]));const j=this.targetConnection;j&&(j.targetConnection=null),this.targetConnection=null,r&&f.getSourceBlock().setParent(null),k&&(k.recordNew(),pe(k)),f.getSourceBlock().isShadow()||a.respawnShadow_(),t.setGroup$$module$build$src$core$events$utils(S)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(r,a){if(this.getSourceBlock().isDeadOrDying())return!1;var f;return a=(f=r.getInput(a))==null?void 0:f.connection,f=this.targetBlock(),f&&f!==r||!a||a.targetConnection===this?!1:(a.isConnected()&&a.disconnect(),a.connect(this),!0)}targetBlock(){if(this.isConnected()){let r,a;return(a=(r=this.targetConnection)==null?void 0:r.getSourceBlock())!=null?a:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(r){return r?(Array.isArray(r)||(r=[r]),this.check=r,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(r){this.setShadowStateInternal({shadowDom:r})}getShadowDom(r){return r&&this.targetBlock().isShadow()?el(this.targetBlock()):this.shadowDom}setShadowState(r){this.setShadowStateInternal({shadowState:r})}getShadowState(r){return r&&this.targetBlock()&&this.targetBlock().isShadow()?xi(this.targetBlock()):this.shadowState}neighbours(r){return[]}getParentInput(){let r=null;const a=this.sourceBlock_.inputList;for(let f=0;f<a.length;f++)if(a[f].connection===this){r=a[f];break}return r}toString(){const r=this.sourceBlock_;if(!r)return"Orphan Connection";if(r.outputConnection===this)var a="Output Connection of ";else if(r.previousConnection===this)a="Previous Connection of ";else if(r.nextConnection===this)a="Next Connection of ";else{a=null;for(let f=0,S;S=r.inputList[f];f++)if(S.connection===this){a=S;break}if(a)a='Input "'+a.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return a+r.toDevString()}stashShadowState(){const r=this.getShadowDom(!0),a=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:r,shadowState:a}}applyShadowState({shadowDom:r,shadowState:a}){this.shadowDom=r,this.shadowState=a}setShadowStateInternal({shadowDom:r=null,shadowState:a=null}={}){this.shadowDom=r,this.shadowState=a,(r=this.targetBlock())?r.isShadow()?(r.dispose(!1),this.getSourceBlock().isDeadOrDying()||(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))):(r=this.createShadowBlock(!1),this.serializeShadow(r),r&&r.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))}createShadowBlock(r){var a=this.getSourceBlock();const f=this.getShadowState(),S=this.getShadowDom();if(a.isDeadOrDying()||!f&&!S)return null;if(f)return a=$i(f,a.workspace,{parentConnection:r?this:void 0,isShadow:!0,recordUndo:!1});if(S){if(a=ro(S,a.workspace),r)if(this.type===Pn.INPUT_VALUE){if(!a.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(a.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===Pn.NEXT_STATEMENT){if(!a.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(a.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return a}return null}serializeShadow(r){r&&(this.shadowDom=el(r),this.shadowState=xi(r))}static getConnectionForOrphanedConnection(r,a){if(a.type===Pn.OUTPUT_VALUE)return za(r,a.getSourceBlock());r=r.lastConnectionInStack(!0);const f=a.getConnectionChecker();return r&&f.canConnect(a,r,!1)?r:null}};hs.CAN_CONNECT=0,hs.REASON_SELF_CONNECTION=1,hs.REASON_WRONG_TYPE=2,hs.REASON_TARGET_NULL=3,hs.REASON_CHECKS_FAILED=4,hs.REASON_DIFFERENT_WORKSPACES=5,hs.REASON_SHADOW_PARENT=6,hs.REASON_DRAG_CHECKS_FAILED=7,hs.REASON_PREVIOUS_AND_OUTPUT=8;var Ig="_TEMP_COLLAPSED_INPUT",Tv="_TEMP_COLLAPSED_FIELD",VE={COLLAPSED_FIELD_NAME:Tv,COLLAPSED_INPUT_NAME:Ig},fp="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",mp=class{constructor(r){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,P(r),this.topBlock=r,this.workspace=r.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){t.disable$$module$build$src$core$events$utils(),this.hidePreview(),t.enable$$module$build$src$core$events$utils();var{local:r,closest:a}=this.activeCandidate;if(r.connect(a),this.topBlock.rendered){const f=r.isSuperior()?a:r,S=this.topBlock.getRootBlock();pr().then(()=>{ha(f.getSourceBlock()),setTimeout(()=>{S.bringToFront()},0)})}}}update(r,a){const f=this.getCandidate(r);((this.wouldDeleteBlock=this.shouldDelete(!!f,a))||this.shouldUpdatePreviews(f,r))&&(t.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(f),this.maybeShowPreview(f),t.enable$$module$build$src$core$events$utils())}createMarkerBlock(r){var a=r.type;t.disable$$module$build$src$core$events$utils();let f;try{if(f=this.workspace.newBlock(a),f.setInsertionMarker(!0),r.saveExtraState){var S=r.saveExtraState(!0);S&&f.loadExtraState&&f.loadExtraState(S)}else if(r.mutationToDom){const k=r.mutationToDom();k&&f.domToMutation&&f.domToMutation(k)}for(a=0;a<r.inputList.length;a++){const k=r.inputList[a];if(k.name===Ig)continue;const j=f.inputList[a];if(!j)throw Error(fp.replace("%1","an input"));for(S=0;S<k.fieldRow.length;S++){const _e=k.fieldRow[S],Ue=j.fieldRow[S];if(!Ue)throw Error(fp.replace("%1","a field"));Ue.setValue(_e.getValue())}}for(const k of f.getDescendants(!1))k.setInsertionMarker(!0);f.setCollapsed(r.isCollapsed()),f.setInputsInline(r.getInputsInline()),f.initSvg(),f.getSvgRoot().setAttribute("visibility","hidden")}finally{t.enable$$module$build$src$core$events$utils()}return f}initAvailableConnections(){const r=this.topBlock.getConnections_(!1),a=this.topBlock.lastConnectionInStack(!0);return a&&a!==this.topBlock.nextConnection&&(r.push(a),this.lastOnStack=a),r}shouldUpdatePreviews(r,a){if(!r)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:f,closest:S}=this.activeCandidate;if(S===r.closest&&f===r.local)return!1;const k=f.x+a.x-S.x;return a=f.y+a.y-S.y,r.radius<Math.sqrt(k*k+a*a)-t.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(r){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let a=this.getStartRadius(),f=null;for(let S=0;S<this.availableConnections.length;S++){const k=this.availableConnections[S],j=k.closest(a,r);j.connection&&(f={closest:j.connection,local:k,radius:j.radius},a=j.radius)}return f}getStartRadius(){return this.activeCandidate?t.config$$module$build$src$core$config.connectingSnapRadius:t.config$$module$build$src$core$config.snapRadius}shouldDelete(r,a){return a&&this.workspace.getComponentManager().hasCapability(a.id,pl.Capability.DELETE_AREA)?a.wouldDelete(this.topBlock,r):!1}maybeShowPreview(r){if(!this.wouldDeleteBlock&&r){var a=r.closest,f;a===((f=this.activeCandidate)==null?void 0:f.closest)||a.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=r,this.showPreview(this.activeCandidate))}}showPreview(r){const a=this.workspace.getRenderer();switch(a.getConnectionPreviewMethod(r.closest,r.local,this.topBlock)){case mp.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(r);break;case mp.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(r);break;case mp.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(r)}a.shouldHighlightConnection(r.closest)&&r.closest.highlight()}maybeHidePreview(r){if(!r)this.hidePreview();else if(this.activeCandidate){const a=this.activeCandidate.local!==r.local;(this.activeCandidate.closest!==r.closest||a||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let r;const a=(r=this.activeCandidate)==null?void 0:r.closest;a&&a.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(a)&&a.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(r){const{local:a,closest:f}=r;let S=(r=this.lastOnStack&&a===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!S)throw Error("Cannot show the insertion marker because there is no insertion marker block");let k;try{k=S.getMatchingConnection(a.getSourceBlock(),a)}catch{if(r&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),S=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),S=this.firstMarker=this.createMarkerBlock(this.topBlock)),!S)throw Error("Cannot show the insertion marker because there is no insertion marker block");k=S.getMatchingConnection(a.getSourceBlock(),a)}if(!k)throw Error("Cannot show the insertion marker because there is no associated connection");if(k===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");S.queueRender(),Ei(),k.connect(f);const j={x:f.x-k.x,y:f.y-k.y},_e=k.getOffsetInBlock().clone(),Ue=k;pr().then(()=>{let Wt;(Wt=S)==null||Wt.positionNearConnection(Ue,j,_e);let Hn;(Hn=S)==null||Hn.getSvgRoot().setAttribute("visibility","visible")}),this.markerConnection=k}hideInsertionMarker(){if(this.markerConnection){var r=this.markerConnection,a=r.getSourceBlock(),f=a.outputConnection,S;if((S=a.previousConnection)!=null&&S.targetConnection||f!=null&&f.targetConnection)a.unplug(!0);else{let k;(k=r.targetBlock())==null||k.unplug(!1)}if(r.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(r=a.getSvgRoot())&&r.setAttribute("visibility","hidden")}}showInsertionInputOutline(r){r=r.closest,this.highlightedBlock=r.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(r,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(r){if(this.fadedBlock=r.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const r=[];return this.firstMarker&&r.push(this.firstMarker),this.lastMarker&&r.push(this.lastMarker),r}disposeInsertionMarker(r){if(r){t.disable$$module$build$src$core$events$utils();try{r.dispose()}finally{t.enable$$module$build$src$core$events$utils()}}}};(function(r){r=r.PREVIEW_TYPE||(r.PREVIEW_TYPE={}),r[r.INSERTION_MARKER=0]="INSERTION_MARKER",r[r.INPUT_OUTLINE=1]="INPUT_OUTLINE",r[r.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(mp||(mp={})),mp.PREVIEW_TYPE;var S_=class{constructor(r){this.overrides=null,this.name=r}getClassName(){return this.name+"-renderer"}init(r,a){this.constants_=this.makeConstants_(),a&&(this.overrides=a,Object.assign(this.constants_,a)),this.constants_.setTheme(r),this.constants_.init()}createDom(r,a){this.constants_.createDom(r,this.name+"-"+a.name,"."+this.getClassName()+"."+a.getClassName())}refreshDom(r,a){const f=this.getConstants();f.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=f.randomIdentifier,this.constants_.setTheme(a),this.constants_.init(),this.createDom(r,a)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new v_}makeRenderInfo_(r){return new S0(this,r)}makeDrawer_(r,a){return new y_(r,a)}makeMarkerDrawer(r,a){return new T_(r,this.getConstants(),a)}makePathObject(r,a){return new E0(r,a,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(r){return!0}orphanCanConnectAtEnd(r,a,f){return!!hs.getConnectionForOrphanedConnection(r,f===Pn.OUTPUT_VALUE?a.outputConnection:a.previousConnection)}getConnectionPreviewMethod(r,a,f){return xe("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),a.type===Pn.OUTPUT_VALUE||a.type===Pn.PREVIOUS_STATEMENT?!r.isConnected()||this.orphanCanConnectAtEnd(f,r.targetBlock(),a.type)?mp.PREVIEW_TYPE.INSERTION_MARKER:mp.PREVIEW_TYPE.REPLACEMENT_FADE:mp.PREVIEW_TYPE.INSERTION_MARKER}render(r){const a=this.makeRenderInfo_(r);a.measure(),this.makeDrawer_(r,a).draw()}},Os={};Os.BottomRow=g_,Os.Connection=qh,Os.ConstantProvider=v_,Os.Drawer=y_,Os.ExternalValueInput=bv,Os.Field=T0,Os.Hat=zy,Os.Icon=Y1,Os.InRowSpacer=Vd,Os.InlineInput=Hy,Os.InputConnection=Km,Os.InputRow=Gy,Os.JaggedEdge=K1,Os.MarkerSvg=T_,Os.Measurable=er,Os.NextConnection=J1,Os.OutputConnection=q1,Os.PathObject=E0,Os.PreviousConnection=Q1,Os.RenderInfo=S0,Os.Renderer=S_,Os.RoundCorner=cm,Os.Row=m_,Os.SpacerRow=Wy,Os.SquareCorner=hm,Os.StatementInput=__,Os.TopRow=Vy,Os.Types=lt,Os.init=Wc,Os.register=Ii,Os.unregister=Md;var tT=class{constructor(r,a){this.workspace=r,this.theme=a,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(r){var a=this.theme;this.theme=r,(r=this.workspace.getInjectionDiv())&&(a&&(a=a.getClassName())&&bt(r,a),(a=this.theme.getClassName())&&Be(r,a));for(let f=0,S;S=this.subscribedWorkspaces_[f];f++)S.refreshTheme();for(const[f,S]of this.componentDB)for(const k of S){r=k.element,a=k.propertyName;const j=this.theme&&this.theme.getComponentStyle(f);r.style.setProperty(a,j||"")}for(const f of this.subscribedWorkspaces_)f.hideChaff()}subscribeWorkspace(r){this.subscribedWorkspaces_.push(r)}unsubscribeWorkspace(r){if(!kt(this.subscribedWorkspaces_,r))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(r,a,f){this.componentDB.has(a)||this.componentDB.set(a,[]),this.componentDB.get(a).push({element:r,propertyName:f}),a=this.theme&&this.theme.getComponentStyle(a),r.style.setProperty(f,a||"")}unsubscribe(r){if(r)for(const[a,f]of this.componentDB){for(let S=f.length-1;0<=S;S--)f[S].element===r&&f.splice(S,1);f.length||this.componentDB.delete(a)}}dispose(){this.subscribedWorkspaces_.length=0,this.componentDB.clear()}},jy="VARIABLE_DYNAMIC",pm={CATEGORY_NAME:jy};pm.flyoutCategory=sp,pm.flyoutCategoryBlocks=$u,pm.onCreateVariableButtonClick_Colour=Ao,pm.onCreateVariableButtonClick_Number=Ho,pm.onCreateVariableButtonClick_String=Gh;var Sv=class{canConnect(r,a,f,S){return this.canConnectWithReason(r,a,f,S)===hs.CAN_CONNECT}canConnectWithReason(r,a,f,S){const k=this.doSafetyChecks(r,a);return k!==hs.CAN_CONNECT?k:this.doTypeChecks(r,a)?f&&!this.doDragChecks(r,a,S||0)?hs.REASON_DRAG_CHECKS_FAILED:hs.CAN_CONNECT:hs.REASON_CHECKS_FAILED}getErrorMessage(r,a,f){switch(r){case hs.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case hs.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case hs.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case hs.REASON_TARGET_NULL:return"Target connection is null.";case hs.REASON_CHECKS_FAILED:return"Connection checks failed. "+(a+" expected "+a.getCheck()+", found "+f.getCheck());case hs.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case hs.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case hs.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(r,a){if(!r||!a)return hs.REASON_TARGET_NULL;let f,S,k;return r.isSuperior()?(f=r.getSourceBlock(),S=a.getSourceBlock(),k=a):(S=r.getSourceBlock(),f=a.getSourceBlock(),k=r,r=a),f===S?hs.REASON_SELF_CONNECTION:k.type!==qt[r.type]?hs.REASON_WRONG_TYPE:f.workspace!==S.workspace?hs.REASON_DIFFERENT_WORKSPACES:f.isShadow()&&!S.isShadow()?hs.REASON_SHADOW_PARENT:k.type===Pn.OUTPUT_VALUE&&S.previousConnection&&S.previousConnection.isConnected()||k.type===Pn.PREVIOUS_STATEMENT&&S.outputConnection&&S.outputConnection.isConnected()?hs.REASON_PREVIOUS_AND_OUTPUT:hs.CAN_CONNECT}doTypeChecks(r,a){if(r=r.getCheck(),a=a.getCheck(),!r||!a)return!0;for(let f=0;f<r.length;f++)if(a.indexOf(r[f])!==-1)return!0;return!1}doDragChecks(r,a,f){if(r.distanceFrom(a)>f||a.getSourceBlock().isInsertionMarker())return!1;switch(a.type){case Pn.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(r,a);case Pn.OUTPUT_VALUE:if(a.isConnected()&&!a.targetBlock().isInsertionMarker()||r.isConnected())return!1;break;case Pn.INPUT_VALUE:if(a.isConnected()&&!a.targetBlock().isMovable()&&!a.targetBlock().isShadow())return!1;break;case Pn.NEXT_STATEMENT:if(a.isConnected()&&!r.getSourceBlock().nextConnection&&!a.targetBlock().isShadow()&&a.targetBlock().nextConnection||a.targetBlock()&&!a.targetBlock().isMovable()&&!a.targetBlock().isShadow())return!1;break;default:return!1}return ji.indexOf(a)===-1}canConnectToPrevious_(r,a){return r.targetConnection||ji.indexOf(a)!==-1?!1:a.targetConnection?(r=a.targetBlock(),r.isInsertionMarker()?!r.getPreviousBlock():!1):!0}};i(Bt.CONNECTION_CHECKER,Ol,Sv);var Xy=class extends Ld{constructor(r){super(r),this.type=Mu,r&&(this.varType=r.type,this.varName=r.name)}toJson(){const r=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return r.varType=this.varType,r.varName=this.varName,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new Xy),a.varType=r.varType,a.varName=r.varName,a}run(r){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");r?a.deleteVariableById(this.varId):a.createVariable(this.varName,this.varType,this.varId)}};i(Bt.EVENT,Mu,Xy);var Yy=class extends Ld{constructor(r,a){super(r),this.type=Jc,r&&(this.oldName=r.name,this.newName=typeof a>"u"?"":a)}toJson(){const r=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return r.oldName=this.oldName,r.newName=this.newName,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new Yy),a.oldName=r.oldName,a.newName=r.newName,a}run(r){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");r?a.renameVariableById(this.varId,this.newName):a.renameVariableById(this.varId,this.oldName)}};i(Bt.EVENT,Jc,Yy);var Ky=class{constructor(r){this.workspace=r,this.variableMap=new Map}clear(){for(const r of this.variableMap.values())for(;0<r.length;)this.deleteVariable(r[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(r,a){if(r.name!==a){var f=this.getVariable(a,r.type),S=this.workspace.getAllBlocks(!1),k=t.getGroup$$module$build$src$core$events$utils();k||t.setGroup$$module$build$src$core$events$utils(!0);try{f&&f.getId()!==r.getId()?this.renameVariableWithConflict_(r,a,f,S):this.renameVariableAndUses_(r,a,S)}finally{t.setGroup$$module$build$src$core$events$utils(k)}}}renameVariableById(r,a){const f=this.getVariableById(r);if(!f)throw Error("Tried to rename a variable that didn't exist. ID: "+r);this.renameVariable(f,a)}renameVariableAndUses_(r,a,f){for(pe(new(ke(Jc))(r,a)),r.name=a,a=0;a<f.length;a++)f[a].updateVarName(r)}renameVariableWithConflict_(r,a,f,S){const k=r.type;for(a!==f.name&&this.renameVariableAndUses_(f,a,S),a=0;a<S.length;a++)S[a].renameVarById(r.getId(),f.getId());pe(new(ke(Mu))(r)),kt(this.variableMap.get(k),r)}createVariable(r,a,f){var S=this.getVariable(r,a);if(S){if(f&&S.getId()!==f)throw Error('Variable "'+r+'" is already in use and its id is "'+S.getId()+'" which conflicts with the passed in id, "'+f+'".');return S}if(f&&this.getVariableById(f))throw Error('Variable id, "'+f+'", is already in use.');return S=f||le(),a=a||"",S=new cp(this.workspace,r,a,S),r=this.variableMap.get(a)||[],r.push(S),this.variableMap.delete(a),this.variableMap.set(a,r),pe(new(ke(mo))(S)),S}deleteVariable(r){const a=r.getId(),f=this.variableMap.get(r.type);if(f){for(let S=0;S<f.length;S++)if(f[S].getId()===a){f.splice(S,1),pe(new(ke(Mu))(r)),f.length===0&&this.variableMap.delete(r.type);break}}}deleteVariableById(r){const a=this.getVariableById(r);if(a){var f=a.name;const S=this.getVariableUsesById(r);for(let k=0,j;j=S[k];k++)if(j.type==="procedures_defnoreturn"||j.type==="procedures_defreturn"){r=String(j.getFieldValue("NAME")),f=t.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",f).replace("%2",r),wo(f);return}1<S.length?(f=t.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(S.length)).replace("%2",f),Zt(f,k=>{k&&a&&this.deleteVariableInternal(a,S)})):this.deleteVariableInternal(a,S)}else console.warn("Can't delete non-existent variable: "+r)}deleteVariableInternal(r,a){const f=t.getGroup$$module$build$src$core$events$utils();f||t.setGroup$$module$build$src$core$events$utils(!0);try{for(let S=0;S<a.length;S++)a[S].dispose(!0);this.deleteVariable(r)}finally{t.setGroup$$module$build$src$core$events$utils(f)}}getVariable(r,a){if(a=this.variableMap.get(a||"")){for(let f=0,S;S=a[f];f++)if(t.Names$$module$build$src$core$names.equals(S.name,r))return S}return null}getVariableById(r){for(const a of this.variableMap.values())for(const f of a)if(f.getId()===r)return f;return null}getVariablesOfType(r){return(r=this.variableMap.get(r||""))?r.slice():[]}getVariableTypes(r){const a=new Set(this.variableMap.keys());if(r&&r.getPotentialVariableMap())for(const f of r.getPotentialVariableMap().variableMap.keys())a.add(f);return a.has("")||a.add(""),Array.from(a.values())}getAllVariables(){let r=[];for(const a of this.variableMap.values())r=r.concat(a);return r}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(r=>r.name)}getVariableUsesById(r){const a=[],f=this.workspace.getAllBlocks(!1);for(let S=0;S<f.length;S++){const k=f[S].getVarModels();if(k)for(let j=0;j<k.length;j++)k[j].getId()===r&&a.push(f[S])}return a}},E_=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(r){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new _0,this.potentialVariableMap=null,this.id=le(),C(this),this.options=r||new zi({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(y(Bt.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new Ky(this)}dispose(){this.listeners.length=0,this.clear(),A(this)}sortObjects_(r,a){const f=Math.sin(Bc(E_.SCAN_ANGLE))*(this.RTL?-1:1);return r=r.getRelativeToSurfaceXY(),a=a.getRelativeToSurfaceXY(),r.y+f*r.x-(a.y+f*a.x)}addTopBlock(r){this.topBlocks.push(r)}removeTopBlock(r){if(!kt(this.topBlocks,r))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(r=!1){const a=[].concat(this.topBlocks);return r&&1<a.length&&a.sort(this.sortObjects_.bind(this)),a}addTypedBlock(r){this.typedBlocksDB.has(r.type)||this.typedBlocksDB.set(r.type,[]),this.typedBlocksDB.get(r.type).push(r)}removeTypedBlock(r){kt(this.typedBlocksDB.get(r.type),r),this.typedBlocksDB.get(r.type).length||this.typedBlocksDB.delete(r.type)}getBlocksByType(r,a=!1){return this.typedBlocksDB.has(r)?(r=this.typedBlocksDB.get(r).slice(0),a&&r&&1<r.length&&r.sort(this.sortObjects_.bind(this)),r.filter(function(f){return!f.isInsertionMarker()})):[]}addTopComment(r){this.topComments.push(r),this.commentDB.has(r.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+r.id+'"'),this.commentDB.set(r.id,r)}removeTopComment(r){if(!kt(this.topComments,r))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(r.id)}getTopComments(r=!1){const a=[].concat(this.topComments);return r&&1<a.length&&a.sort(this.sortObjects_.bind(this)),a}getAllBlocks(r=!1){if(r){var a=this.getTopBlocks(!0);r=[];for(let f=0;f<a.length;f++)r.push(...a[f].getDescendants(!0))}else for(r=this.getTopBlocks(!1),a=0;a<r.length;a++)r.push(...r[a].getChildren(!1));return r.filter(function(f){return!f.isInsertionMarker()})}clear(){this.isClearing=!0;try{const r=t.getGroup$$module$build$src$core$events$utils();for(r||t.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();t.setGroup$$module$build$src$core$events$utils(r),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(r,a){this.variableMap.renameVariableById(r,a)}createVariable(r,a,f){return this.variableMap.createVariable(r,a,f)}getVariableUsesById(r){return this.variableMap.getVariableUsesById(r)}deleteVariableById(r){this.variableMap.deleteVariableById(r)}getVariable(r,a){return this.variableMap.getVariable(r,a)}getVariableById(r){return this.variableMap.getVariableById(r)}getVariablesOfType(r){return this.variableMap.getVariablesOfType(r)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(r,a){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(r){return this.options.maxInstances?(this.options.maxInstances[r]!==void 0?this.options.maxInstances[r]:1/0)-this.getBlocksByType(r,!1).length:1/0}isCapacityAvailable(r){if(!this.hasBlockLimits())return!0;let a=0;for(const f in r){if(r[f]>this.remainingCapacityOfType(f))return!1;a+=r[f]}return!(a>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(r){var a=r?this.redoStack_:this.undoStack_,f=r?this.undoStack_:this.redoStack_;const S=a.pop();if(S){for(var k=[S];a.length&&S.group&&S.group===a[a.length-1].group;){const j=a.pop();j&&k.push(j)}for(a=0;a<k.length;a++)f.push(k[a]);k=J(k,r),ge(!1);try{for(f=0;f<k.length;f++)k[f].run(r)}finally{ge(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,se()}addChangeListener(r){return this.listeners.push(r),r}removeChangeListener(r){kt(this.listeners,r)}fireChangeListener(r){if(r.recordUndo)for(this.undoStack_.push(r),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let a=0;a<this.listeners.length;a++)(0,this.listeners[a])(r)}getBlockById(r){return this.blockDB.get(r)||null}setBlockById(r,a){this.blockDB.set(r,a)}removeBlockById(r){this.blockDB.delete(r)}getCommentById(r){let a;return(a=this.commentDB.get(r))!=null?a:null}allInputsFilled(r){const a=this.getTopBlocks(!1);for(let f=0;f<a.length;f++)if(!a[f].allInputsFilled(r))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new Ky(this)}getVariableMap(){return this.variableMap}setVariableMap(r){this.variableMap=r}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let r=null;const a=this.options.parentWorkspace;return this.isFlyout?a&&a.options&&(r=a.options.parentWorkspace):a&&(r=a),r}static getById(r){return b(r)}static getAll(){return E()}};E_.SCAN_ANGLE=3;var jE=100,nT=class{constructor(r){this.parentWorkspace=r,this.sounds=new Map,this.lastSound_=null,this.muted=!1}dispose(){this.sounds.clear()}load(r,a){if(r.length){try{var f=new globalThis.Audio}catch{return}for(let k=0;k<r.length;k++){const j=r[k],_e=j.match(/\.(\w+)$/);if(_e&&f.canPlayType("audio/"+_e[1])){var S=new globalThis.Audio(j);break}}S&&this.sounds.set(a,S)}}preload(){for(const r of this.sounds.values()){r.volume=.01;const a=r.play();if(a!==void 0?a.then(r.pause).catch(function(){}):r.pause(),Bn||ur)break}}play(r,a){if(!this.muted){var f=this.sounds.get(r);f?(r=new Date,this.lastSound_!==null&&r.getTime()-this.lastSound_.getTime()<jE||(this.lastSound_=r,f=Bn||An?f:f.cloneNode(),f.volume=a===void 0?1:a,f.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(r,a)}}setMuted(r){this.muted=r}getMuted(){return this.muted}},XE=class{constructor(r){this.workspace=r,this.layers=new Map,(r=r.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(r)),r=this.createLayer(Z),Be(r,"blocklyBlockCanvas"),r=this.createLayer(ye),Be(r,"blocklyBubbleCanvas")}createDragLayer(r){const a=re(Ge.SVG,{class:"blocklyBlockDragSurface",xmlns:zm,"xmlns:html":Tc,"xmlns:xlink":Js,version:"1.1"});return r.append(a),re(Ge.G,{},a)}translateLayers(r,a){r=`translate(${r.x}, ${r.y}) scale(${a})`;let f;(f=this.dragLayer)==null||f.setAttribute("transform",r);for(const[,S]of this.layers)S.setAttribute("transform",r)}moveToDragLayer(r){let a;(a=this.dragLayer)==null||a.appendChild(r.getSvgRoot())}moveOffDragLayer(r,a){this.append(r,a)}append(r,a){this.layers.has(a)||this.createLayer(a);let f;(f=this.layers.get(a))==null||f.appendChild(r.getSvgRoot())}createLayer(r){const a=this.workspace.getSvgGroup(),f=re(Ge.G,{});let S=!1;const k=[...this.layers].sort((j,_e)=>j[0]-_e[0]);for(const[j,_e]of k)if(r<j){a.insertBefore(f,_e),S=!0;break}return S||a.appendChild(f),this.layers.set(r,f),f}hasLayer(r){return r===this.dragLayer||new Set(this.layers.values()).has(r)}getBlockLayer(){return this.layers.get(Z)}getBubbleLayer(){return this.layers.get(ye)}},YE=20,jp=class extends E_{constructor(r){super(r),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(y(Bt.METRICS_MANAGER,r,!0))(this),this.getMetrics=r.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=r.setMetrics||jp.setTopLevelWorkspaceMetrics_,this.componentManager=new pl,this.connectionDBList=th.init(this.connectionChecker),this.audioManager=new nT(r.parentWorkspace),this.grid=this.options.gridPattern?new By(this.options.gridPattern,r.gridOptions):null,this.markerManager=new xa(this),gl&&$n&&this.registerToolboxCategoryCallback(Eg,$n),pm&&sp&&this.registerToolboxCategoryCallback(jy,sp),Xi&&gn&&(this.registerToolboxCategoryCallback(b0,gn),this.addChangeListener(fc)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new tT(this,this.options.theme||mv),this.themeManager_.subscribeWorkspace(this);let a;this.renderer=Wc(this.options.renderer||"geras",this.getTheme(),(a=this.options.rendererOverrides)!=null?a:void 0),this.cachedParentSvgSize=new qs(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(r){this.metricsManager=r,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(r){this.markerManager.setCursorSvg(r)}setMarkerSvg(r){this.markerManager.setMarkerSvg(r)}getMarker(r){return this.markerManager?this.markerManager.getMarker(r):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(r){r||(r=mv),this.themeManager_.setTheme(r)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(a){return!!a.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const r=new(ke(lu))(this.getTheme().name,this.id);pe(r)}updateBlockStyles_(r){for(let a=0,f;f=r[a];a++){const S=f.getStyleName();S&&f.setStyle(S)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const r=this.getParentSvg().getScreenCTM();r&&(this.inverseScreenCTM=r.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(r){let a=0,f=0,S=1;(this.getCanvas().contains(r)||this.getBubbleCanvas().contains(r))&&(S=this.scale);do{const k=ir(r);(r===this.getCanvas()||r===this.getBubbleCanvas())&&(S=1),a+=k.x*S,f+=k.y*S,r=r.parentNode}while(r&&r!==this.getParentSvg()&&r!==this.getInjectionDiv());return new fn(a,f)}getCachedParentSvgSize(){const r=this.cachedParentSvgSize;return new qs(r.width,r.height)}getOriginOffsetInPixels(){return te(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let r=this.svgGroup_;for(;r;){if((" "+(r.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv=r;break}r=r.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(r){this.resizeHandlerWrapper=r}createDom(r,a){return this.injectionDiv||(this.injectionDiv=a??null),this.svgGroup_=re(Ge.G,{class:"blocklyWorkspace"}),r&&(this.svgBackground_=re(Ge.RECT,{height:"100%",width:"100%",class:r},this.svgGroup_),r==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new XE(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(Ce(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),Ce(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(y(Bt.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(r=y(Bt.CURSOR,this.options))&&this.markerManager.setCursor(new r),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&pt(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const r=this.getParentSvg();r&&r.parentNode&&pt(r.parentNode)}this.resizeHandlerWrapper&&(it(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=jp.newTrashcan(this);const r=this.trashcan.createDom();this.svgGroup_.insertBefore(r,this.getCanvas())}static newTrashcan(r){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new l0(this);const r=this.zoomControls_.createDom();this.svgGroup_.appendChild(r)}addFlyout(r){const a=new zi({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return a.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(y(Bt.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(a):new(y(Bt.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(a),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(r)}getFlyout(r){return this.flyout||r?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const r=this.componentManager.getComponents(pl.Capability.POSITIONABLE,!0),a=this.getMetricsManager().getUiMetrics(),f=[];for(let S=0,k;k=r[S];S++){k.position(a,f);const j=k.getBoundingRectangle();j&&f.push(j)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const r=He();fn.equals(this.lastRecordedPageScroll,r)||(this.lastRecordedPageScroll=r,this.updateScreenCalculations_())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(r,a){const f=this.getParentSvg();r!=null&&(this.cachedParentSvgSize.width=r,f.setAttribute("data-cached-width",`${r}`)),a!=null&&(this.cachedParentSvgSize.height=a,f.setAttribute("data-cached-height",`${a}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let r=this.svgGroup_;for(;r;){if(r.tagName==="svg"){this.cachedParentSvg=r;break}r=r.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(ie()){var r=this.scale,a=-this.scrollY,f=-this.scrollX;if(!(r===this.oldScale&&1>Math.abs(a-this.oldTop)&&1>Math.abs(f-this.oldLeft))){var S=new(ke(ni))(a,f,r,this.id,this.oldScale);this.oldScale=r,this.oldTop=a,this.oldLeft=f,pe(S)}}}translate(r,a){let f;(f=this.layerManager)==null||f.translateLayers(new fn(r,a),this.scale);let S;(S=this.grid)==null||S.moveTo(r,a),this.maybeFireViewportChangeEvent()}getWidth(){const r=this.getMetrics();return r?r.viewWidth/this.scale:0}setVisible(r){this.isVisible_=r,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(r),this.getFlyout()&&this.getFlyout().setContainerVisible(r),this.getParentSvg().style.display=r?"block":"none",this.toolbox_&&this.toolbox_.setVisible(r),r||this.hideChaff(!0))}render(){for(var r=this.getAllBlocks(!1),a=r.length-1;0<=a;a--)r[a].queueRender();if(this.currentGesture_)for(r=this.currentGesture_.getInsertionMarkers(),a=0;a<r.length;a++)r[a].queueRender();pr().then(()=>void this.markerManager.updateMarkers())}highlightBlock(r,a){if(a===void 0){for(let f=0,S;S=this.highlightedBlocks[f];f++)S.setHighlighted(!1);this.highlightedBlocks.length=0}(r=r?this.getBlockById(r):null)&&((a=a===void 0||a)?this.highlightedBlocks.indexOf(r)===-1&&this.highlightedBlocks.push(r):kt(this.highlightedBlocks,r),r.setHighlighted(a))}paste(r){if(xe("Blockly.WorkspaceSvg.prototype.paste","v10","v11","Blockly.clipboard.paste"),!this.rendered||!r.type&&!r.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0);let f;try{f=r.type?this.pasteBlock_(null,r):r.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_(r):this.pasteBlock_(r,null)}finally{t.setGroup$$module$build$src$core$events$utils(a)}return f}pasteBlock_(r,a){t.disable$$module$build$src$core$events$utils();let f;try{let S=0,k=0;if(r){f=ro(r,this);let j;S=parseInt((j=r.getAttribute("x"))!=null?j:"0"),this.RTL&&(S=-S);let _e;k=parseInt((_e=r.getAttribute("y"))!=null?_e:"0")}else a&&(f=zn(a,this),S=a.x||10,this.RTL&&(S=this.getWidth()-S),k=a.y||10);if(!isNaN(S)&&!isNaN(k)){let j;do{j=!1;const _e=this.getAllBlocks(!1);for(let Ue=0,Wt;Wt=_e[Ue];Ue++){const Hn=Wt.getRelativeToSurfaceXY();if(1>=Math.abs(S-Hn.x)&&1>=Math.abs(k-Hn.y)){j=!0;break}}if(!j){const Ue=f.getConnections_(!1);for(let Wt=0,Hn;Hn=Ue[Wt];Wt++)if(Hn.closest(t.config$$module$build$src$core$config.snapRadius,new fn(S,k)).connection){j=!0;break}}j&&(S=this.RTL?S-t.config$$module$build$src$core$config.snapRadius:S+t.config$$module$build$src$core$config.snapRadius,k+=2*t.config$$module$build$src$core$config.snapRadius)}while(j);f.moveTo(new fn(S,k))}}finally{t.enable$$module$build$src$core$events$utils()}return ie()&&!f.isShadow()&&pe(new(ke(t.CREATE$$module$build$src$core$events$utils))(f)),f.select(),f}pasteWorkspaceComment_(r){t.disable$$module$build$src$core$events$utils();let a;try{a=Pl.fromXmlRendered(r,this);let f,S=parseInt((f=r.getAttribute("x"))!=null?f:"0"),k,j=parseInt((k=r.getAttribute("y"))!=null?k:"0");isNaN(S)||isNaN(j)||(this.RTL&&(S=-S),a.moveBy(S+50,j+50))}finally{t.enable$$module$build$src$core$events$utils()}return ie()&&eh.fireCreateEvent(a),a.select(),a}refreshToolboxSelection(){const r=this.isFlyout?this.targetWorkspace:this;r&&!r.currentGesture_&&r.toolbox_&&r.toolbox_.getFlyout()&&r.toolbox_.refreshSelection()}renameVariableById(r,a){super.renameVariableById(r,a),this.refreshToolboxSelection()}deleteVariableById(r){super.deleteVariableById(r),this.refreshToolboxSelection()}createVariable(r,a,f){return r=super.createVariable(r,a,f),this.refreshToolboxSelection(),r}recordDragTargets(){const r=this.componentManager.getComponents(pl.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let a=0,f;f=r[a];a++){const S=f.getClientRect();S&&this.dragTargetAreas.push({component:f,clientRect:S})}}newBlock(r,a){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(r){for(let a=0,f;f=this.dragTargetAreas[a];a++)if(f.clientRect.contains(r.clientX,r.clientY))return f.component;return null}onMouseDown_(r){const a=this.getGesture(r);a&&a.handleWsStart(r,this)}startDrag(r,a){r=It(r,this.getParentSvg(),this.getInverseScreenCTM()),r.x/=this.scale,r.y/=this.scale,this.dragDeltaXY=fn.difference(a,r)}moveDrag(r){return r=It(r,this.getParentSvg(),this.getInverseScreenCTM()),r.x/=this.scale,r.y/=this.scale,fn.sum(this.dragDeltaXY,r)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const r=!!this.scrollbar;return this.isMovable()&&(!r||r&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const r=!!this.scrollbar;return this.isMovable()&&(!r||r&&this.scrollbar.canScrollVertically())}onMouseWheel_(r){if(am.inProgress())r.preventDefault(),r.stopPropagation();else{var a=this.options.zoomOptions&&this.options.zoomOptions.wheel,f=this.options.moveOptions&&this.options.moveOptions.wheel;if(a||f){var S=yt(r);if(wr)var k=r.metaKey;a&&(r.ctrlKey||k||!f)?(S=-S.y/50,a=It(r,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(a.x,a.y,S)):(a=this.scrollX-S.x,f=this.scrollY-S.y,r.shiftKey&&!S.x&&(a=this.scrollX-S.y,f=this.scrollY),this.scroll(a,f)),r.preventDefault()}}}getBlocksBoundingBox(){const r=this.getTopBoundedElements();if(!r.length)return new Ri(0,0,0,0);const a=r[0].getBoundingRectangle();for(let S=1;S<r.length;S++){var f=r[S];f.isInsertionMarker&&f.isInsertionMarker()||(f=f.getBoundingRectangle(),f.top<a.top&&(a.top=f.top),f.bottom>a.bottom&&(a.bottom=f.bottom),f.left<a.left&&(a.left=f.left),f.right>a.right&&(a.right=f.right))}return a}cleanUp(){this.setResizesEnabled(!1),t.setGroup$$module$build$src$core$events$utils(!0);const r=this.getTopBlocks(!0);let a=0;for(let f=0,S;S=r[f];f++){if(!S.isMovable())continue;const k=S.getRelativeToSurfaceXY();S.moveBy(-k.x,a-k.y,["cleanup"]),S.snapToGrid(),a=S.getRelativeToSurfaceXY().y+S.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}t.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(r){if(!this.options.readOnly&&!this.isFlyout){var a=ki.registry.getContextMenuOptions(ki.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(a,r),Hu(r,a,this.RTL)}}updateToolbox(r){if(r=gt(r)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(zt(r)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=r,this.toolbox_.render(r)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=r,this.flyout.show(r)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(L(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(r,a,f){f=Math.pow(this.options.zoomOptions.scaleSpeed,f);const S=this.scale*f;if(this.scale!==S){S>this.options.zoomOptions.maxScale?f=this.options.zoomOptions.maxScale/this.scale:S<this.options.zoomOptions.minScale&&(f=this.options.zoomOptions.minScale/this.scale);var k=this.getCanvas().getCTM(),j=this.getParentSvg().createSVGPoint();j.x=r,j.y=a,j=j.matrixTransform(k.inverse()),r=j.x,a=j.y,k=k.translate(r*(1-f),a*(1-f)).scale(f),this.scrollX=k.e,this.scrollY=k.f,this.setScale(S)}}zoomCenter(r){var a=this.getMetrics();let f;this.flyout?(f=a.svgWidth?a.svgWidth/2:0,a=a.svgHeight?a.svgHeight/2:0):(f=a.viewWidth/2+a.absoluteLeft,a=a.viewHeight/2+a.absoluteTop),this.zoom(f,a,r)}zoomToFit(){if(this.isMovable()){var r=this.getMetrics(),a=r.viewWidth;r=r.viewHeight;var f=this.getBlocksBoundingBox(),S=2*YE,k=f.right-f.left+S;if(f=f.bottom-f.top+S,k){this.flyout&&(this.horizontalLayout?(r+=this.flyout.getHeight(),f+=this.flyout.getHeight()/this.scale):(a+=this.flyout.getWidth(),k+=this.flyout.getWidth()/this.scale)),a/=k,r/=f,t.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(a,r)),this.scrollCenter()}finally{t.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){Be(this.getCanvas(),"blocklyCanvasTransitioning"),Be(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){bt(this.getCanvas(),"blocklyCanvasTransitioning"),bt(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var r=this.getMetrics(),a=(r.scrollWidth-r.viewWidth)/2,f=(r.scrollHeight-r.viewHeight)/2;a=-a-r.scrollLeft,f=-f-r.scrollTop,this.scroll(a,f)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(r,a){if(this.isMovable()){var f=r?this.getBlockById(r):null;if(f){r=f.getRelativeToSurfaceXY(),f=a?{height:f.height,width:f.width}:f.getHeightWidth();var S=this.scale;a=(r.x+(this.RTL?-1:1)*f.width/2)*S,r=(r.y+f.height/2)*S,f=this.getMetrics(),this.scroll(-(a-f.viewWidth/2),-(r-f.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(r){this.options.zoomOptions.maxScale&&r>this.options.zoomOptions.maxScale?r=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&r<this.options.zoomOptions.minScale&&(r=this.options.zoomOptions.minScale),this.scale=r,this.hideChaff(!1),(r=this.getFlyout(!1))&&r.isVisible()&&(r.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),r=this.getMetrics(),this.scrollX-=r.absoluteLeft,this.scrollY-=r.absoluteTop,r.viewLeft+=r.absoluteLeft,r.viewTop+=r.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(r):this.scrollbar.resizeContent(r))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(r,a){this.hideChaff(!0);const f=this.getMetrics();r=Math.min(r,-f.scrollLeft),a=Math.min(a,-f.scrollTop);const S=f.scrollTop+Math.max(0,f.scrollHeight-f.viewHeight);r=Math.max(r,-(f.scrollLeft+Math.max(0,f.scrollWidth-f.viewWidth))),a=Math.max(a,-S),this.scrollX=r,this.scrollY=a,this.scrollbar&&this.scrollbar.set(-(r+f.scrollLeft),-(a+f.scrollTop),!1),r+=f.absoluteLeft,a+=f.absoluteTop,this.translate(r,a)}getBlockById(r){return super.getBlockById(r)}getAllBlocks(r=!1){return super.getAllBlocks(r)}getTopBlocks(r=!1){return super.getTopBlocks(r)}addTopBlock(r){this.addTopBoundedElement(r),super.addTopBlock(r)}removeTopBlock(r){this.removeTopBoundedElement(r),super.removeTopBlock(r)}addTopComment(r){this.addTopBoundedElement(r),super.addTopComment(r)}removeTopComment(r){this.removeTopBoundedElement(r),super.removeTopComment(r)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(r){this.topBoundedElements.push(r)}removeTopBoundedElement(r){kt(this.topBoundedElements,r)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(r){const a=!this.resizesEnabled&&r;this.resizesEnabled=r,a&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(r,a){if(typeof a!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(r,a)}getButtonCallback(r){let a;return(a=this.flyoutButtonCallbacks.get(r))!=null?a:null}removeButtonCallback(r){this.flyoutButtonCallbacks.delete(r)}registerToolboxCategoryCallback(r,a){if(typeof a!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(r,a)}getToolboxCategoryCallback(r){return this.toolboxCategoryCallbacks.get(r)||null}removeToolboxCategoryCallback(r){this.toolboxCategoryCallbacks.delete(r)}getGesture(r){const a=r.type==="pointerdown",f=this.currentGesture_;return f?a&&f.hasStarted()?(console.warn("Tried to start the same gesture twice."),f.cancel(),null):f:a?this.currentGesture_=new am(r,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(r=!1){Cl(),ql(),il(),this.hideComponents(r)}hideComponents(r=!1){this.getComponentManager().getComponents(pl.Capability.AUTOHIDEABLE,!0).forEach(a=>a.autoHide(r))}static setTopLevelWorkspaceMetrics_(r){const a=this.getMetrics();typeof r.x=="number"&&(this.scrollX=-(a.scrollLeft+(a.scrollWidth-a.viewWidth)*r.x)),typeof r.y=="number"&&(this.scrollY=-(a.scrollTop+(a.scrollHeight-a.viewHeight)*r.y)),this.translate(this.scrollX+a.absoluteLeft,this.scrollY+a.absoluteTop)}},Jy=class extends g{constructor(r,a){super(a),this.type=Dl,this.isOpen=r}toJson(){const r=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return r.isOpen=this.isOpen,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new Jy),a.isOpen=r.isOpen,a}};i(Bt.EVENT,Dl,Jy);var qy=class extends hp{constructor(r){if(super(r),this.type=t.DELETE$$module$build$src$core$events$utils,r){if(r.getParent())throw Error("Connected blocks cannot be deleted.");r.isShadow()&&(this.recordUndo=!1),this.oldXml=_r(r),this.ids=Se(r),this.wasShadow=r.isShadow(),this.oldJson=xi(r,{addCoordinates:!0})}}toJson(){const r=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return r.oldXml=Ki(this.oldXml),r.ids=this.ids,r.wasShadow=this.wasShadow,r.oldJson=this.oldJson,this.recordUndo||(r.recordUndo=this.recordUndo),r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new qy),a.oldXml=t.textToDom$$module$build$src$core$utils$xml(r.oldXml),a.ids=r.ids,a.wasShadow=r.wasShadow||a.oldXml.tagName.toLowerCase()==="shadow",a.oldJson=r.oldJson,r.recordUndo!==void 0&&(a.recordUndo=r.recordUndo),a}run(r){const a=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(r)for(r=0;r<this.ids.length;r++){const f=this.ids[r],S=a.getBlockById(f);S?S.dispose(!1):f===this.blockId&&console.warn("Can't delete non-existent block: "+f)}else zn(this.oldJson,a)}};i(Bt.EVENT,t.DELETE$$module$build$src$core$events$utils,qy);var x0=class{constructor(r,a,f){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.isInsertionMarker_=this.disposing=!1,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=r,this.id=f&&!r.getBlockById(f)?f:le(),r.setBlockById(this.id,this),this.xy_=new fn(0,0),this.isInFlyout=r.isFlyout,this.isInMutator=r.isMutator,this.RTL=r.RTL,a){if(this.type=a,f=Wr[a],!f||typeof f!="object")throw TypeError("Invalid block definition for type: "+a);Object.assign(this,f)}r.addTopBlock(this),r.addTypedBlock(this),new.target===x0&&this.doInit_()}doInit_(){const r=t.getGroup$$module$build$src$core$events$utils();r||t.setGroup$$module$build$src$core$events$utils(!0);const a=ce();try{typeof this.init=="function"&&(ge(!1),this.init(),ge(a)),ie()&&pe(new(ke(t.CREATE$$module$build$src$core$events$utils))(this))}finally{t.setGroup$$module$build$src$core$events$utils(r),ge(a)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(r){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(r),ie()&&pe(new(ke(t.DELETE$$module$build$src$core$events$utils))(this)),this.workspace.removeTopBlock(this),this.disposeInternal())}disposeInternal(){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0,typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(r=>r.disposeInternal()),this.inputList.forEach(r=>r.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(r=>r.dispose()),this.disposed=!0)}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(const r of this.inputList)for(const a of r.fieldRow)a.initModel&&a.initModel()}unplug(r){this.outputConnection&&this.unplugFromRow_(r),this.previousConnection&&this.unplugFromStack_(r)}unplugFromRow_(r){let a=null,f;(f=this.outputConnection)!=null&&f.isConnected()&&(a=this.outputConnection.targetConnection,this.outputConnection.disconnect()),a&&r&&(r=this.getOnlyValueConnection_())&&r.isConnected()&&!r.targetBlock().isShadow()&&(r=r.targetConnection,r==null||r.disconnect(),this.workspace.connectionChecker.canConnect(r,a,!1)?a.connect(r):r==null||r.onFailedConnect(a))}getOnlyValueConnection_(){let r=null;for(let a=0;a<this.inputList.length;a++){const f=this.inputList[a].connection;if(f&&f.type===Pn.INPUT_VALUE&&f.targetConnection){if(r)return null;r=f}}return r}unplugFromStack_(r){let a=null;var f;if((f=this.previousConnection)!=null&&f.isConnected()&&(a=this.previousConnection.targetConnection,this.previousConnection.disconnect()),f=this.getNextBlock(),r&&f&&!f.isShadow()){let S,k;r=(k=(S=this.nextConnection)==null?void 0:S.targetConnection)!=null?k:null,r==null||r.disconnect(),a&&this.workspace.connectionChecker.canConnect(a,r,!1)&&a.connect(r)}}getConnections_(r){r=[],this.outputConnection&&r.push(this.outputConnection),this.previousConnection&&r.push(this.previousConnection),this.nextConnection&&r.push(this.nextConnection);for(let a=0,f;f=this.inputList[a];a++)f.connection&&r.push(f.connection);return r}lastConnectionInStack(r){let a=this.nextConnection;for(;a;){const f=a.targetBlock();if(!f||r&&f.isShadow())return a;a=f.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(r){for(let a=0,f;f=this.inputList[a];a++)if(f.connection&&f.connection.targetBlock()===r)return f;return null}getSurroundParent(){let r=this,a;do if(a=r,r=r.getParent(),!r)return null;while(r.getNextBlock()===a);return r}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let r,a=this;do r=a,a=r.parentBlock_;while(a);return r}getTopStackBlock(){let r=this,a;do a=r.getPreviousBlock();while(a&&a.getNextBlock()===r&&(r=a));return r}getChildren(r){if(!r)return this.childBlocks_;r=[];for(let f=0,S;S=this.inputList[f];f++)if(S.connection){var a=S.connection.targetBlock();a&&r.push(a)}return(a=this.getNextBlock())&&r.push(a),r}setParent(r){if(r!==this.parentBlock_){var a=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),f=!!a;if(f&&r&&a!==r)throw Error("Block connected to superior one that is not new parent.");if(!f&&r)throw Error("Block not connected to new parent.");if(f&&!r)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?kt(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=r)?r.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(r){const a=[this],f=this.getChildren(r);for(let S,k=0;S=f[k];k++)a.push(...S.getDescendants(r));return a}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable_}setDeletable(r){this.deletable_=r}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable_}setMovable(r){this.movable_=r}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(H(this,!0)):!0}isShadow(){return this.isShadow_}setShadow(r){this.isShadow_=r}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(r){this.isInsertionMarker_=r}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable_}setEditable(r){this.editable_=r;for(let a=0,f;f=this.inputList[a];a++)for(let S=0,k;k=f.fieldRow[S];S++)k.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const r of this.inputList)if(r.connection||1<r.fieldRow.length)return!1;return!0}getMatchingConnection(r,a){const f=this.getConnections_(!0);if(r=r.getConnections_(!0),f.length!==r.length)throw Error("Connection lists did not match in length.");for(let S=0;S<r.length;S++)if(r[S]===a)return f[S];return null}setHelpUrl(r){this.helpUrl=r}setTooltip(r){this.tooltip=r}getTooltip(){return lo(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(r){r=Ji(r),this.hue_=r.hue,this.colour_=r.hex}setStyle(r){this.styleName_=r}setOnChange(r){if(r&&typeof r!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=r,this.onchangeWrapper_=r.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(r){if(typeof r!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(r===void 0?"nothing":r+" of type "+typeof r)+" instead");for(let a=0,f;f=this.inputList[a];a++)for(let S=0,k;k=f.fieldRow[S];S++)if(k.name===r)return k;return null}getVars(){const r=[];for(let a=0,f;f=this.inputList[a];a++)for(let S=0,k;k=f.fieldRow[S];S++)k.referencesVariables()&&r.push(k.getValue());return r}getVarModels(){const r=[];for(let a=0,f;f=this.inputList[a];a++)for(let S=0,k;k=f.fieldRow[S];S++)if(k.referencesVariables()){const j=this.workspace.getVariableById(k.getValue());j&&r.push(j)}return r}updateVarName(r){for(let a=0,f;f=this.inputList[a];a++)for(let S=0,k;k=f.fieldRow[S];S++)k.referencesVariables()&&r.getId()===k.getValue()&&k.refreshVariableName()}renameVarById(r,a){for(let f=0,S;S=this.inputList[f];f++)for(let k=0,j;j=S.fieldRow[k];k++)j.referencesVariables()&&r===j.getValue()&&j.setValue(a)}getFieldValue(r){return(r=this.getField(r))?r.getValue():null}setFieldValue(r,a){const f=this.getField(a);if(!f)throw Error('Field "'+a+'" not found.');f.setValue(r)}setPreviousStatement(r,a){if(r)a===void 0&&(a=null),this.previousConnection||(this.previousConnection=this.makeConnection_(Pn.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(a);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(r,a){if(r)a===void 0&&(a=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Pn.NEXT_STATEMENT)),this.nextConnection.setCheck(a);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(r,a){if(r)a===void 0&&(a=null),this.outputConnection||(this.outputConnection=this.makeConnection_(Pn.OUTPUT_VALUE)),this.outputConnection.setCheck(a);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(r){this.inputsInline!==r&&(pe(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this,"inline",null,this.inputsInline,r)),this.inputsInline=r)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var r=1;r<this.inputList.length;r++)if(this.inputList[r-1]instanceof Af&&this.inputList[r]instanceof Af)return!1;for(r=1;r<this.inputList.length;r++)if(this.inputList[r-1]instanceof t.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[r]instanceof Af)return!0;for(r=0;r<this.inputList.length;r++)if(this.inputList[r]instanceof dm)return!0;return!1}setOutputShape(r){this.outputShape_=r}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(r){if(this.isEnabled()!==r){const a=this.disabled;this.disabled=!r,pe(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this,"disabled",null,a,!r))}}getInheritedDisabled(){let r=this.getSurroundParent();for(;r;){if(r.disabled)return!0;r=r.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(r){this.collapsed_!==r&&(pe(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this,"collapsed",null,this.collapsed_,r)),this.collapsed_=r)}toString(r,a){a=this.toTokens(a);for(let S=2;S<a.length;S++)a[S-2]==="("&&a[S]===")"&&(a[S-2]=a[S-1],a.splice(S-1,2));let f="";return a=a.reduce((S,k)=>(S=S+(f==="("||k===")"?"":" ")+k,f=k[k.length-1],S),""),a=a.trim()||"???",r&&a.length>r&&(a=a.substring(0,r-3)+"..."),a}toTokens(r="?"){const a=[];for(const S of this.inputList)if(S.name!=Ig){for(const k of S.fieldRow)a.push(k.getText());if(S.connection){const k=S.connection.targetBlock();if(k){var f=S.connection;let j=f.getCheck();!j&&f.targetConnection&&(j=f.targetConnection.getCheck()),(f=!!j&&(j.indexOf("Boolean")!==-1||j.indexOf("Number")!==-1))&&a.push("("),a.push(...k.toTokens(r)),f&&a.push(")")}else a.push(r)}}return a}appendValueInput(r){return this.appendInput(new t.ValueInput$$module$build$src$core$inputs$value_input(r,this))}appendStatementInput(r){return this.statementInputCount++,this.appendInput(new Qh(r,this))}appendDummyInput(r=""){return this.appendInput(new Af(r,this))}appendEndRowInput(r=""){return this.appendInput(new dm(r,this))}appendInput(r){return this.inputList.push(r),r}appendInputFromRegistry(r,a){return(r=d(Bt.INPUT,r,!1))?this.appendInput(new r(a,this)):null}jsonInit(r){var a=r.type?'Block "'+r.type+'": ':"";if(r.output&&r.previousStatement)throw Error(a+"Must not have both an output and a previousStatement.");for(var f=0;r["args"+f];){if(r["message"+f]===void 0)throw Error(a+`args${f} must have a corresponding message (message${f}).`);f++}if(r.style&&r.style.hat&&(this.hat=r.style.hat,r.style=null),r.style&&r.colour)throw Error(a+"Must not have both a colour and a style.");for(r.style?this.jsonInitStyle_(r,a):this.jsonInitColour_(r,a),f=0;r["message"+f]!==void 0;)this.interpolate_(r["message"+f],r["args"+f]||[],r["implicitAlign"+f]||r["lastDummyAlign"+f],a),f++;if(r.inputsInline!==void 0&&(t.disable$$module$build$src$core$events$utils(),this.setInputsInline(r.inputsInline),t.enable$$module$build$src$core$events$utils()),r.output!==void 0&&this.setOutput(!0,r.output),r.outputShape!==void 0&&this.setOutputShape(r.outputShape),r.previousStatement!==void 0&&this.setPreviousStatement(!0,r.previousStatement),r.nextStatement!==void 0&&this.setNextStatement(!0,r.nextStatement),r.tooltip!==void 0&&(f=Gr(r.tooltip),this.setTooltip(f)),r.enableContextMenu!==void 0&&(this.contextMenu=!!r.enableContextMenu),r.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!r.suppressPrefixSuffix),r.helpUrl!==void 0&&(f=Gr(r.helpUrl),this.setHelpUrl(f)),typeof r.extensions=="string"&&(console.warn(a+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+r.type+"' block."),r.extensions=[r.extensions]),r.mutator!==void 0&&qi(r.mutator,this,!0),r=r.extensions,Array.isArray(r))for(a=0;a<r.length;a++)qi(r[a],this,!1)}jsonInitColour_(r,a){if("colour"in r)if(r.colour===void 0)console.warn(a+"Undefined colour value.");else{r=r.colour;try{this.setColour(r)}catch{console.warn(a+"Illegal colour value: ",r)}}}jsonInitStyle_(r,a){r=r.style;try{this.setStyle(r)}catch{console.warn(a+"Style does not exist: ",r)}}mixin(r,a){if(a!==void 0&&typeof a!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!a){a=[];for(const f in r)this[f]!==void 0&&a.push(f);if(a.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(a))}Object.assign(this,r)}interpolate_(r,a,f,S){r=Ua(r),this.validateTokens_(r,a.length),a=this.interpolateArguments_(r,a,f),f=[];for(let k=0,j;j=a[k];k++)if(this.isInputKeyword_(j.type)){if(r=this.inputFromJson_(j,S)){for(let _e=0,Ue;Ue=f[_e];_e++)r.appendField(Ue[0],Ue[1]);f.length=0}}else(r=this.fieldFromJson_(j))&&f.push([r,j.name])}validateTokens_(r,a){const f=[];let S=0;for(let k=0;k<r.length;k++){const j=r[k];if(typeof j=="number"){if(1>j||j>a)throw Error('Block "'+this.type+'": Message index %'+j+" out of range.");if(f[j])throw Error('Block "'+this.type+'": Message index %'+j+" duplicated.");f[j]=!0,S++}}if(S!==a)throw Error('Block "'+this.type+'": Message does not reference all '+a+" arg(s).")}interpolateArguments_(r,a,f){const S=[];for(let j=0;j<r.length;j++){var k=r[j];if(typeof k=="number"&&(k=a[k-1]),typeof k=="string"){if(k===`
`)k={type:"input_end_row"},f&&(k.align=f);else if(k=this.stringToFieldJson_(k),!k)continue}S.push(k)}return(r=S.length)&&!this.isInputKeyword_(S[r-1].type)&&(r={type:"input_dummy"},f&&(r.align=f),S.push(r)),S}fieldFromJson_(r){const a=t.fromJson$$module$build$src$core$field_registry(r);return!a&&r.alt?typeof r.alt=="string"?(r=this.stringToFieldJson_(r.alt))?this.fieldFromJson_(r):null:this.fieldFromJson_(r.alt):a}inputFromJson_(r,a){var f={LEFT:t.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:t.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:t.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:t.Align$$module$build$src$core$inputs$align.CENTRE};let S;switch(r.type){case"input_value":S=this.appendValueInput(r.name);break;case"input_statement":S=this.appendStatementInput(r.name);break;case"input_dummy":S=this.appendDummyInput(r.name);break;case"input_end_row":S=this.appendEndRowInput(r.name);break;default:S=this.appendInputFromRegistry(r.type,r.name)}return S?(r.check&&S.setCheck(r.check),r.align&&(f=f[r.align.toUpperCase()],f===void 0?console.warn(a+"Illegal align value: ",r.align):S.setAlign(f)),S):null}isInputKeyword_(r){return r==="input_value"||r==="input_statement"||r==="input_dummy"||r==="input_end_row"||u(Bt.INPUT,r)}stringToFieldJson_(r){return(r=r.trim())?{type:"field_label",text:r}:null}moveInputBefore(r,a){if(r!==a){var f=-1,S=a?-1:this.inputList.length;for(let k=0,j;j=this.inputList[k];k++)if(j.name===r){if(f=k,S!==-1)break}else if(a&&j.name===a&&(S=k,f!==-1))break;if(f===-1)throw Error('Named input "'+r+'" not found.');if(S===-1)throw Error('Reference input "'+a+'" not found.');this.moveNumberedInputBefore(f,S)}}moveNumberedInputBefore(r,a){if(r===a)throw Error("Can't move input to itself.");if(r>=this.inputList.length)throw RangeError("Input index "+r+" out of bounds.");if(a>this.inputList.length)throw RangeError("Reference input "+a+" out of bounds.");const f=this.inputList[r];this.inputList.splice(r,1),r<a&&a--,this.inputList.splice(a,0,f)}removeInput(r,a){for(let f=0,S;S=this.inputList[f];f++)if(S.name===r)return S instanceof Qh&&this.statementInputCount--,S.dispose(),this.inputList.splice(f,1),!0;if(a)return!1;throw Error("Input not found: "+r)}getInput(r){for(let a=0,f;f=this.inputList[a];a++)if(f.name===r)return f;return null}getInputTargetBlock(r){return(r=this.getInput(r))&&r.connection&&r.connection.targetBlock()}getCommentText(){let r,a;return(a=(r=this.getIcon(Jh.TYPE))==null?void 0:r.getText())!=null?a:null}setCommentText(r){var a;let f;const S=(f=(a=this.getIcon(Jh.TYPE))==null?void 0:a.getText())!=null?f:null;S!==r&&(r!==null?((a=this.getIcon(Jh.TYPE))||(a=this.addIcon(new Jh(this))),t.disable$$module$build$src$core$events$utils(),a.setText(r),t.enable$$module$build$src$core$events$utils()):this.removeIcon(Jh.TYPE),pe(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this,"comment",null,S,r)))}setWarningText(r,a){}setMutator(r){}addIcon(r){if(this.hasIcon(r.getType()))throw new yv(r);return this.icons.push(r),this.icons.sort((a,f)=>a.getWeight()-f.getWeight()),r}removeIcon(r){if(!this.hasIcon(r))return!1;let a;return(a=this.getIcon(r))==null||a.dispose(),this.icons=this.icons.filter(f=>!f.getType().equals(r)),!0}hasIcon(r){return this.icons.some(a=>a.getType().equals(r))}getIcon(r){return r instanceof Vo?this.icons.find(a=>a.getType().equals(r)):this.icons.find(a=>a.getType().toString()===r)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy_}moveBy(r,a,f){if(this.parentBlock_)throw Error("Block has parent");const S=new(ke(t.MOVE$$module$build$src$core$events$utils))(this);f&&S.setReason(f),this.xy_.translate(r,a),S.recordNew(),pe(S)}makeConnection_(r){return new hs(this,r)}allInputsFilled(r){if(r===void 0&&(r=!0),!r&&this.isShadow())return!1;for(let f=0,S;S=this.inputList[f];f++)if(S.connection){var a=S.connection.targetBlock();if(!a||!a.allInputsFilled(r))return!1}return(a=this.getNextBlock())?a.allInputsFilled(r):!0}toDevString(){let r=this.type?'"'+this.type+'" block':"Block";return this.id&&(r+=' (id="'+this.id+'")'),r}};x0.COLLAPSED_INPUT_NAME=Ig,x0.COLLAPSED_FIELD_NAME=Tv;var rT=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(r){this.drawer=r}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(r){const a=this.curNode;this.curNode=r,this.drawer&&this.drawer.draw(a,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},Qy=class extends rT{constructor(){super(),this.type="cursor"}next(){var r=this.getCurNode();if(!r)return null;for(r=r.next();r&&r.next()&&(r.getType()===Qt.types.NEXT||r.getType()===Qt.types.BLOCK);)r=r.next();return r&&this.setCurNode(r),r}in(){var r=this.getCurNode();if(!r)return null;(r.getType()===Qt.types.PREVIOUS||r.getType()===Qt.types.OUTPUT)&&(r=r.next());let a,f;return(r=(f=(a=r)==null?void 0:a.in())!=null?f:null)&&this.setCurNode(r),r}prev(){var r=this.getCurNode();if(!r)return null;for(r=r.prev();r&&r.prev()&&(r.getType()===Qt.types.NEXT||r.getType()===Qt.types.BLOCK);)r=r.prev();return r&&this.setCurNode(r),r}out(){var r=this.getCurNode();return r?((r=r.out())&&r.getType()===Qt.types.BLOCK&&(r=r.prev()||r),r&&this.setCurNode(r),r):null}};i(Bt.CURSOR,Ol,Qy);var x_=class extends Qy{constructor(){super()}next(){var r=this.getCurNode();return r?((r=this.getNextNode_(r,this.validNode_))&&this.setCurNode(r),r):null}in(){return this.next()}prev(){var r=this.getCurNode();return r?((r=this.getPreviousNode_(r,this.validNode_))&&this.setCurNode(r),r):null}out(){return this.prev()}getNextNode_(r,a){if(!r)return null;const f=r.in()||r.next();return a(f)?f:f?this.getNextNode_(f,a):(r=this.findSiblingOrParent(r.out()),a(r)?r:r?this.getNextNode_(r,a):null)}getPreviousNode_(r,a){if(!r)return null;let f=r.prev();return f=f?this.getRightMostChild(f):r.out(),a(f)?f:f?this.getPreviousNode_(f,a):null}validNode_(r){let a=!1;return r=r&&r.getType(),(r===Qt.types.OUTPUT||r===Qt.types.INPUT||r===Qt.types.FIELD||r===Qt.types.NEXT||r===Qt.types.PREVIOUS||r===Qt.types.WORKSPACE)&&(a=!0),a}findSiblingOrParent(r){if(!r)return null;const a=r.next();return a||this.findSiblingOrParent(r.out())}getRightMostChild(r){if(!r.in())return r;for(r=r.in();r&&r.next();)r=r.next();return this.getRightMostChild(r)}};x_.registrationName="basicCursor",i(Bt.CURSOR,x_.registrationName,x_);var iT=class extends x_{validNode_(r){let a=!1;const f=r&&r.getType();return r&&(r=r.getLocation(),f===Qt.types.FIELD&&r&&r.isTabNavigable()&&r.isClickable()&&(a=!0)),a}},Zy=10,Zh=class extends hs{constructor(r,a){super(r,a),this.highlighted=!1,this.targetConnection=null,this.db=r.workspace.connectionDBList[a],this.dbOpposite=r.workspace.connectionDBList[qt[a]],this.offsetInBlock=new fn(0,0),this.trackedState=Zh.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===Zh.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let r,a;(a=(r=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||a.call(r,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(r){const a=this.x-r.x;return r=this.y-r.y,Math.sqrt(a*a+r*r)}bumpAwayFrom(r){if(!this.sourceBlock_.workspace.isDragging()){var a=this.sourceBlock_.getRootBlock();if(!a.isInFlyout){var f=!1;if(!a.isMovable()){if(a=r.getSourceBlock().getRootBlock(),!a.isMovable())return;r=this,f=!0}var S=O()==a;S||a.addSelect();var k=r.x+t.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Zy)-this.x,j=r.y+t.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Zy)-this.y;f&&(j=-j),a.RTL&&(k=r.x-t.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*Zy)-this.x),a.moveBy(k,j,["bump"]),S||a.removeSelect()}}}moveTo(r,a){let f=!1;return this.trackedState===Zh.TrackedState.WILL_TRACK?(this.db.addConnection(this,a),this.trackedState=Zh.TrackedState.TRACKED,f=!0):this.trackedState===Zh.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,a),f=!0),this.x=r,this.y=a,f}moveBy(r,a){return this.moveTo(this.x+r,this.y+a)}moveToOffset(r){return this.moveTo(r.x+this.offsetInBlock.x,r.y+this.offsetInBlock.y)}setOffsetInBlock(r,a){this.offsetInBlock.x=r,this.offsetInBlock.y=a}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var r=this.targetConnection;const a=this.targetBlock();r&&a&&(r=fn.difference(this.offsetInBlock,r.offsetInBlock),a.translate(r.x,r.y))}closest(r,a){return this.dbOpposite.searchForClosest(this,r,a)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(r){r&&this.trackedState===Zh.TrackedState.TRACKED||!r&&this.trackedState===Zh.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(r?(this.db.addConnection(this,this.y),this.trackedState=Zh.TrackedState.TRACKED):(this.trackedState===Zh.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=Zh.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const r=this.targetBlock().getDescendants(!1);for(let a=0;a<r.length;a++){const f=r[a],S=f.getConnections_(!0);for(let k=0;k<S.length;k++)S[k].setTracking(!1);for(const k of f.getIcons())nu(k)&&k.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let r=[];if(this.type!==Pn.INPUT_VALUE&&this.type!==Pn.NEXT_STATEMENT)return r;const a=this.targetBlock();if(a){let f;a.isCollapsed()?(f=[],a.outputConnection&&f.push(a.outputConnection),a.nextConnection&&f.push(a.nextConnection),a.previousConnection&&f.push(a.previousConnection)):f=a.getConnections_(!0);for(let S=0;S<f.length;S++)r.push(...f[S].startTrackingAll());r.length||(r=[a])}return r}onFailedConnect(r){const a=this.getSourceBlock();if(ce()){const f=t.getGroup$$module$build$src$core$events$utils();setTimeout((function(){a.isDisposed()||a.getParent()||(t.setGroup$$module$build$src$core$events$utils(f),this.bumpAwayFrom(r),t.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),t.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(r=!0){const{parentConnection:a,childConnection:f}=this.getParentAndChildConnections();if(a&&f){var S=a.getSourceBlock(),k=f.getSourceBlock();super.disconnectInternal(r),S.rendered&&S.queueRender(),k.rendered&&(k.updateDisabled(),k.queueRender(),k.getSvgRoot().style.display="block")}}respawnShadow_(){super.respawnShadow_();const r=this.targetBlock();r&&(r.initSvg(),r.queueRender())}neighbours(r){return this.dbOpposite.getNeighbours(this,r)}connect_(r){super.connect_(r);var a=this.getSourceBlock();r=r.getSourceBlock();const f=a.rendered,S=r.rendered;f&&a.updateDisabled(),S&&r.updateDisabled(),f&&S&&(this.type===Pn.NEXT_STATEMENT||this.type===Pn.PREVIOUS_STATEMENT?r.queueRender():a.queueRender()),(a=a.getInputWithBlock(r))&&(a=a.isVisible(),r.getSvgRoot().style.display=a?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}setCheck(r){return super.setCheck(r),this.sourceBlock_.rendered&&this.sourceBlock_.queueRender(),this}};(function(r){r=r.TrackedState||(r.TrackedState={}),r[r.WILL_TRACK=-1]="WILL_TRACK",r[r.UNTRACKED=0]="UNTRACKED",r[r.TRACKED=1]="TRACKED"})(Zh||(Zh={})),Zh.TrackedState;var Mf=class extends x0{constructor(r,a,f){super(r,a,f),this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.visuallyDisabled=this.rendered=!1,this.translation="",this.bumpNeighboursPid=0,this.dragging=!1,this.relativeCoords=new fn(0,0),this.workspace=r,this.svgGroup_=re(Ge.G,{}),this.style=r.getRenderer().getConstants().getBlockStyle(null),this.pathObject=r.getRenderer().makePathObject(this.svgGroup_,this.style),r=this.pathObject.svgPath,r.tooltip=this,Fi(r),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let a=0,f;f=this.inputList[a];a++)f.init();for(var r of this.getIcons())r.initView(this.createIconPointerDownListener(r)),r.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),r=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!r||Ce(r,"pointerdown",this,this.onMouseDown_),this.eventsInit_=!0,r.parentNode||this.workspace.getCanvas().appendChild(r)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(O()!==this){var r=null;if(O()){r=O().id,t.disable$$module$build$src$core$events$utils();try{O().unselect()}finally{t.enable$$module$build$src$core$events$utils()}}r=new(ke(go))(r,this.id,this.workspace.id),pe(r),P(this),this.addSelect()}}unselect(){if(O()===this){var r=new(ke(go))(this.id,null,this.workspace.id);r.workspaceId=this.workspace.id,pe(r),P(null),this.removeSelect()}}setParent(r){const a=this.parentBlock_;if(r!==a){ee(),super.setParent(r),de();var f=this.getSvgRoot();if(!this.workspace.isClearing&&f){var S=this.getRelativeToSurfaceXY();r?r.getSvgRoot().appendChild(f):a&&((r=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(f,r):this.workspace.getCanvas().appendChild(f),this.translate(S.x,S.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const r=this.workspace.getLayerManager();if(!r)throw Error("Cannot calculate position because the workspace has not been appended");let a=0,f=0,S=this.getSvgRoot();if(S)do{const k=ir(S);a+=k.x,f+=k.y,S=S.parentNode}while(S&&!r.hasLayer(S));return new fn(a,f)}moveBy(r,a,f){if(this.parentBlock_)throw Error("Block has parent");const S=ie();let k=null;S&&(k=new(ke(t.MOVE$$module$build$src$core$events$utils))(this),f&&k.setReason(f)),r=new fn(r,a),a=this.getRelativeToSurfaceXY(),r=fn.sum(a,r),this.translate(r.x,r.y),this.updateComponentLocations(r),S&&k&&(k.recordNew(),pe(k)),this.workspace.resizeContents()}translate(r,a){this.translation=`translate(${r}, ${a})`,this.relativeCoords=new fn(r,a),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(r,a){const f=this.getRelativeToSurfaceXY();this.moveBy(r.x-f.x,r.y-f.y,a)}moveDuringDrag(r){this.translate(r.x,r.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(r)}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var r=this.workspace.getGrid();if(r&&r.shouldSnap()){var a=r.getSpacing(),f=a/2,S=this.getRelativeToSurfaceXY();r=Math.round(Math.round((S.x-f)/a)*a+f-S.x),a=Math.round(Math.round((S.y-f)/a)*a+f-S.y),(r||a)&&this.moveBy(r,a,["snap"])}}}getBoundingRectangle(){const r=this.getRelativeToSurfaceXY(),a=this.getHeightWidth();let f,S;return this.RTL?(f=r.x-a.width,S=r.x):(f=r.x,S=r.x+a.width),new Ri(r.y,r.y+a.height,f,S)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let r=0,a;a=this.inputList[r];r++)a.markDirty()}setCollapsed(r){this.collapsed_!==r&&(super.setCollapsed(r),this.updateCollapsed_())}updateCollapsed_(){var r=this.isCollapsed();const a=Ig,f=Tv;for(let k=0,j;j=this.inputList[k];k++)j.name!==a&&j.setVisible(!r);for(var S of this.getIcons())S.updateCollapsed();r?(r=this.toString(st),(S=this.getField(f))?S.setValue(r):(this.getInput(a)||this.appendDummyInput(a)).appendField(new Ti(r),f)):(this.updateDisabled(),this.removeInput(a))}tab(r,a){const f=new iT;f.setCurNode(Qt.createFieldNode(r)),r=f.getCurNode(),a?f.next():f.prev(),(a=f.getCurNode())&&a!==r&&(a.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(a))}onMouseDown_(r){const a=this.workspace.getGesture(r);a&&a.handleBlockStart(r,this)}showHelp(){const r=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;r&&window.open(r)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const r=ki.registry.getContextMenuOptions(ki.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(r),r}showContextMenu(r){const a=this.generateContextMenu();a&&a.length&&(Hu(r,a,this.RTL),ld(this))}updateComponentLocations(r){if(this.rendered){this.dragging||this.updateConnectionLocations(r),this.updateIconLocations(r),this.updateFieldLocations(r);for(const a of this.getChildren(!1))a.updateComponentLocations(fn.sum(r,a.relativeCoords))}}updateConnectionLocations(r){for(const a of this.getConnections_(!1))a.moveToOffset(r)}updateIconLocations(r){for(const a of this.getIcons())a.onLocationChange(r)}updateFieldLocations(r){for(const a of this.inputList)for(const f of a.fieldRow)f.onLocationChange(r)}setDragging(r){(this.dragging=r)?(this.translation="",ji.push(...this.getConnections_(!0)),Be(this.svgGroup_,"blocklyDragging")):(ji.length=0,bt(this.svgGroup_,"blocklyDragging"));for(let a=0;a<this.childBlocks_.length;a++)this.childBlocks_[a].setDragging(r)}setMovable(r){super.setMovable(r),this.pathObject.updateMovable(r)}setEditable(r){super.setEditable(r),r=this.getIcons();for(let a=0;a<r.length;a++)r[a].updateEditable()}setShadow(r){super.setShadow(r),this.applyColour()}setInsertionMarker(r){this.isInsertionMarker_!==r&&(this.isInsertionMarker_=r)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(r,a){this.isDeadOrDying()||(xd(),Ql(),a&&this.rendered&&(this.unplug(r),wu(this)),super.dispose(!!r),pt(this.svgGroup_))}disposeInternal(){this.isDeadOrDying()||(super.disposeInternal(),this.rendered=!1,O()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(r=>clearTimeout(r)),this.warningTextDb.clear(),this.getIcons().forEach(r=>r.dispose()))}checkAndDelete(){this.workspace.isFlyout||(t.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),t.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:xf.TYPE,blockState:xi(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:H(this,!0)}}applyColour(){this.pathObject.applyColour(this);const r=this.getIcons();for(let a=0;a<r.length;a++)r[a].applyColour();for(let a=0,f;f=this.inputList[a];a++)for(let S=0,k;k=f.fieldRow[S];S++)k.applyColour()}updateDisabled(){const r=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===r){let a;(a=this.getNextBlock())==null||a.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=r;for(const a of this.getChildren(!1))a.updateDisabled()}}getCommentIcon(){xe("getCommentIcon","v10","v11","getIcon");let r;return(r=this.getIcon(Jh.TYPE))!=null?r:null}setWarningText(r,a=""){if(a)this.warningTextDb.has(a)&&(clearTimeout(this.warningTextDb.get(a)),this.warningTextDb.delete(a));else{for(var f of this.warningTextDb.values())clearTimeout(f);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(a,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(a),this.setWarningText(r,a))},100));else if(this.isInFlyout&&(r=null),f=this.getIcon(Vp.TYPE),r){let S=this.getSurroundParent(),k=null;for(;S;)S.isCollapsed()&&(k=S),S=S.getSurroundParent();k&&k.setWarningText(t.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,Mf.COLLAPSED_WARNING_ID),f?f.addMessage(r,a):this.addIcon(new Vp(this).addMessage(r,a))}else f&&(a?(f.addMessage("",a),f.getText()||this.removeIcon(Vp.TYPE)):this.removeIcon(Vp.TYPE))}setMutator(r){this.removeIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),r&&this.addIcon(r)}addIcon(r){return super.addIcon(r),r instanceof Vp&&(this.warning=r),r instanceof t.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=r),this.rendered&&(r.initView(this.createIconPointerDownListener(r)),r.applyColour(),r.updateEditable(),this.queueRender(),Ei(),this.bumpNeighbours()),r}createIconPointerDownListener(r){return a=>{this.isDeadOrDying()||(a=this.workspace.getGesture(a))&&a.setStartIcon(r)}}removeIcon(r){const a=super.removeIcon(r);return r.equals(Vp.TYPE)&&(this.warning=null),r.equals(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.rendered&&(this.queueRender(),Ei(),this.bumpNeighbours()),a}setEnabled(r){this.isEnabled()!==r&&(super.setEnabled(r),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(r){this.rendered&&this.pathObject.updateHighlighted(r)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(r){this.pathObject.updateDraggingDelete(r)}getColour(){return this.style.colourPrimary}setColour(r){super.setColour(r),r=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(r.style),this.style=r.style,this.styleName_=r.name,this.applyColour()}setStyle(r){const a=this.workspace.getRenderer().getConstants().getBlockStyle(r);if(this.styleName_=r,a)this.hat=a.hat,this.pathObject.setStyle(a),this.colour_=a.colourPrimary,this.style=a,this.applyColour();else throw Error("Invalid style name: "+r)}bringToFront(r=!1){let a=this;if(!a.isDeadOrDying())do{const f=a.getSvgRoot(),S=f.parentNode,k=S.childNodes;if(k[k.length-1]!==f&&S.appendChild(f),r)break;a=a.getParent()}while(a)}setPreviousStatement(r,a){super.setPreviousStatement(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setNextStatement(r,a){super.setNextStatement(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setOutput(r,a){super.setOutput(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setInputsInline(r){super.setInputsInline(r),this.rendered&&(this.queueRender(),this.bumpNeighbours())}removeInput(r,a){return r=super.removeInput(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours()),r}moveNumberedInputBefore(r,a){super.moveNumberedInputBefore(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}appendInput(r){return super.appendInput(r),this.rendered&&(this.queueRender(),this.bumpNeighbours()),r}setConnectionTracking(r){if(this.previousConnection&&this.previousConnection.setTracking(r),this.outputConnection&&this.outputConnection.setTracking(r),this.nextConnection){this.nextConnection.setTracking(r);var a=this.nextConnection.targetBlock();a&&a.setConnectionTracking(r)}if(!this.collapsed_)for(a=0;a<this.inputList.length;a++){var f=this.inputList[a].connection;f&&(f.setTracking(r),(f=f.targetBlock())&&f.setConnectionTracking(r))}}getConnections_(r){const a=[];if((r||this.rendered)&&(this.outputConnection&&a.push(this.outputConnection),this.previousConnection&&a.push(this.previousConnection),this.nextConnection&&a.push(this.nextConnection),r||!this.collapsed_))for(let f=0,S;S=this.inputList[f];f++)S.connection&&a.push(S.connection);return a}lastConnectionInStack(r){return super.lastConnectionInStack(r)}getMatchingConnection(r,a){return super.getMatchingConnection(r,a)}makeConnection_(r){return new Zh(this,r)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){if(!this.bumpNeighboursPid){var r=t.getGroup$$module$build$src$core$events$utils();this.bumpNeighboursPid=setTimeout(()=>{const a=t.getGroup$$module$build$src$core$events$utils();t.setGroup$$module$build$src$core$events$utils(r),this.getRootBlock().bumpNeighboursInternal(),t.setGroup$$module$build$src$core$events$utils(a),this.bumpNeighboursPid=0},t.config$$module$build$src$core$config.bumpDelay)}}bumpNeighboursInternal(){const r=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||r.isInFlyout))for(const a of this.getConnections_(!1)){if(a.isSuperior()){let f;(f=a.targetBlock())==null||f.bumpNeighboursInternal()}for(const f of a.neighbours(t.config$$module$build$src$core$config.snapRadius))f.getSourceBlock().getRootBlock()!==r&&(a.isConnected()&&f.isConnected()||(a.isSuperior()?f.bumpAwayFrom(a):a.bumpAwayFrom(f)))}}scheduleSnapAndBump(){const r=t.getGroup$$module$build$src$core$events$utils();setTimeout(()=>{t.setGroup$$module$build$src$core$events$utils(r),this.snapToGrid(),t.setGroup$$module$build$src$core$events$utils(!1)},t.config$$module$build$src$core$config.bumpDelay/2),this.bumpNeighbours()}positionNearConnection(r,a,f){if(r.type===Pn.NEXT_STATEMENT||r.type===Pn.INPUT_VALUE){let S=a.x;a=a.y,S+=f.x-r.getOffsetInBlock().x,a+=f.y-r.getOffsetInBlock().y,this.moveBy(S,a)}}getChildren(r){return super.getChildren(r)}queueRender(){return Ko(this)}render(){this.queueRender(),Ei()}renderEfficiently(){this.rendered=!0,ee(),this.isCollapsed()&&this.updateCollapsed_(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),de(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const r of this.inputList){const a=r.connection;a&&a.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(xa.LOCAL_MARKER).draw();for(const r of this.inputList)for(const a of r.fieldRow)a.updateMarkers_()}setCursorSvg(r){this.pathObject.setCursorSvg(r)}setMarkerSvg(r){this.pathObject.setMarkerSvg(r)}getHeightWidth(){let r=this.height,a=this.width;var f=this.getNextBlock();if(f){f=f.getHeightWidth();const S=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;r+=f.height-S,a=Math.max(a,f.width)}return{height:r,width:a}}fadeForReplacement(r){this.pathObject.updateReplacementFade(r)}highlightShapeForInput(r,a){this.pathObject.updateShapeForInputHighlight(r,a)}};Mf.INLINE=-1,Mf.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var sT=class{constructor(){}onDragEnter(r){}onDragOver(r){}onDragExit(r){}onDrop(r){}getClientRect(){return null}shouldPreventMove(r){return!1}},Ev=class extends sT{constructor(){super(),this.wouldDelete_=!1}wouldDelete(r,a){return r instanceof Mf?(r=!r.getParent()&&r.isDeletable(),this.updateWouldDelete_(r&&!a)):this.updateWouldDelete_(r.isDeletable()),this.wouldDelete_}updateWouldDelete_(r){this.wouldDelete_=r}},oT=class extends Ev{constructor(r){super(),this.workspace=r,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(r=new zi({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(r.toolboxPosition=this.workspace.toolboxPosition===hr.TOP?hr.BOTTOM:hr.TOP,this.flyout=new(y(Bt.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(r)):(r.toolboxPosition=this.workspace.toolboxPosition===hr.RIGHT?hr.LEFT:hr.RIGHT,this.flyout=new(y(Bt.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(r)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=re(Ge.G,{class:"blocklyTrash"});let r;const a=String(Math.random()).substring(2);r=re(Ge.CLIPPATH,{id:"blocklyTrashBodyClipPath"+a},this.svgGroup),re(Ge.RECT,{width:w0,height:xv,y:$0},r);const f=re(Ge.IMAGE,{width:Iu.width,x:-tb,height:Iu.height,y:-nb,"clip-path":"url(#blocklyTrashBodyClipPath"+a+")"},this.svgGroup);return f.setAttributeNS(Js,"xlink:href",this.workspace.options.pathToMedia+Iu.url),r=re(Ge.CLIPPATH,{id:"blocklyTrashLidClipPath"+a},this.svgGroup),re(Ge.RECT,{width:w0,height:$0},r),this.svgLid=re(Ge.IMAGE,{width:Iu.width,x:-tb,height:Iu.height,y:-nb,"clip-path":"url(#blocklyTrashLidClipPath"+a+")"},this.svgGroup),this.svgLid.setAttributeNS(Js,"xlink:href",this.workspace.options.pathToMedia+Iu.url),je(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),je(this.svgGroup,"pointerup",this,this.click),je(f,"pointerover",this,this.mouseOver),je(f,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(Ke(this.flyout.createDom(Ge.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[pl.Capability.AUTOHIDEABLE,pl.Capability.DELETE_AREA,pl.Capability.DRAG_TARGET,pl.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&pt(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var r=this.contents.map(function(f){return JSON.parse(f)}),a=this.workspace.getParentSvg().style;a.cursor="wait",setTimeout(()=>{let f;(f=this.flyout)==null||f.show(r),a.cursor="";let S;(S=this.workspace.scrollbar)==null||S.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var r;(r=this.flyout)==null||r.hide();var a;(a=this.workspace.scrollbar)==null||a.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(r){!r&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(r,a){if(this.initialized){var f=bs(this.workspace,r);r=jr(f,new qs(w0,xv+$0),eb,C0,r,this.workspace),a=Ia(r,C0,f.vertical===Xa.TOP?Od.DOWN:Od.UP,a),this.top=a.top,this.left=a.left;var S;(S=this.svgGroup)==null||S.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new Ri(this.top,this.top+xv+$0,this.left,this.left+w0)}getClientRect(){if(!this.svgGroup)return null;var r=this.svgGroup.getBoundingClientRect();const a=r.top+nb-A0;return r=r.left+tb-A0,new Ri(a,a+$0+xv+2*A0,r,r+w0+2*A0)}onDragOver(r){this.setLidOpen(this.wouldDelete_)}onDragExit(r){this.setLidOpen(!1)}onDrop(r){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(r){this.isLidOpen!==r&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=r,this.animateLid())}animateLid(){const r=JE;var a=1/(r+1);this.lidOpen+=this.isLidOpen?a:-a,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*Oo),a=aT+this.lidOpen*(qE-aT),this.svgGroup&&(this.svgGroup.style.opacity=`${a}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),w_/r))}setLidAngle(r){const a=this.workspace.toolboxPosition===hr.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let f;(f=this.svgLid)==null||f.setAttribute("transform","rotate("+(a?-r:r)+","+(a?4:w0-4)+","+($0-2)+")")}setMinOpenness(r){this.minOpenness=r,this.isLidOpen||this.setLidAngle(r*Oo)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(r){r=new(ke(Dl))(r,this.workspace.id),pe(r)}blockMouseDownWhenOpenable(r){!this.contentsIsOpen()&&this.hasContents()&&r.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(r){if(!(0>=this.workspace.options.maxTrashcanContents||r.type!==t.DELETE$$module$build$src$core$events$utils||r.type!==t.DELETE$$module$build$src$core$events$utils||r.wasShadow)){if(!r.oldJson)throw Error("Encountered a delete event without proper oldJson");if(r=JSON.stringify(this.cleanBlockJson(r.oldJson)),this.contents.indexOf(r)===-1){for(this.contents.unshift(r);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(KE)}}}cleanBlockJson(r){function a(f){if(f){if(delete f.id,delete f.x,delete f.y,delete f.enabled,f.icons&&f.icons.comment){var S=f.icons.comment;delete S.height,delete S.width,delete S.pinned}S=f.inputs;for(var k in S){var j=S[k];const _e=j.block;j=j.shadow,_e&&a(_e),j&&a(j)}f.next&&(k=f.next,f=k.block,k=k.shadow,f&&a(f),k&&a(k))}}return r=JSON.parse(JSON.stringify(r)),a(r),Object.assign({},{kind:"BLOCK"},r)}},w0=47,xv=44,$0=16,C0=20,eb=20,A0=10,tb=0,nb=32,KE=.1,w_=80,JE=4,aT=.4,qE=.8,Oo=45,Yi=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(r,a){if(this.shortcuts.get(r.name)&&!a)throw Error(`Shortcut named "${r.name}" already exists.`);if(this.shortcuts.set(r.name,r),(a=r.keyCodes)&&0<a.length)for(let f=0;f<a.length;f++)this.addKeyMapping(a[f],r.name,!!r.allowCollision)}unregister(r){return this.shortcuts.get(r)?(this.removeAllKeyMappings(r),this.shortcuts.delete(r),!0):(console.warn(`Keyboard shortcut named "${r}" not found.`),!1)}addKeyMapping(r,a,f){r=`${r}`;const S=this.keyMap.get(r);if(S&&!f)throw Error(`Shortcut named "${a}" collides with shortcuts "${S}"`);S&&f?S.unshift(a):this.keyMap.set(r,[a])}removeKeyMapping(r,a,f){const S=this.keyMap.get(r);if(!S)return f||console.warn(`No keyboard shortcut named "${a}" registered with key code "${r}"`),!1;const k=S.indexOf(a);return-1<k?(S.splice(k,1),S.length===0&&this.keyMap.delete(r),!0):(f||console.warn(`No keyboard shortcut named "${a}" registered with key code "${r}"`),!1)}removeAllKeyMappings(r){for(const a of this.keyMap.keys())this.removeKeyMapping(a,r,!0)}setKeyMap(r){this.keyMap.clear();for(const a in r)this.keyMap.set(a,r[a])}getKeyMap(){const r=Object.create(null);for(const[a,f]of this.keyMap)r[a]=f;return r}getRegistry(){const r=Object.create(null);for(const[a,f]of this.shortcuts)r[a]=f;return Al(Object.create(null),r)}onKeyDown(r,a){var f=this.serializeKeyEvent_(a);if(f=this.getShortcutNamesByKeyCode(f),!f)return!1;for(let S=0,k;k=f[S];S++){const j=this.shortcuts.get(k);let _e,Ue;if((_e=j)==null||!_e.preconditionFn||(Ue=j)!=null&&Ue.preconditionFn(r)){let Wt,Hn;if((Wt=j)!=null&&Wt.callback&&((Hn=j)!=null&&Hn.callback(r,a,j)))return!0}}return!1}getShortcutNamesByKeyCode(r){return this.keyMap.get(r)||[]}getKeyCodesByShortcutName(r){const a=[];for(const[f,S]of this.keyMap)-1<S.indexOf(r)&&a.push(f);return a}serializeKeyEvent_(r){let a="";for(const f in Yi.modifierKeys)r.getModifierState(f)&&(a!==""&&(a+="+"),a+=f);return a!==""&&r.keyCode?a=a+"+"+r.keyCode:r.keyCode&&(a=String(r.keyCode)),a}checkModifiers_(r){for(let a=0,f;f=r[a];a++)if(!(f in Yi.modifierKeys))throw Error(f+" is not a valid modifier key.")}createSerializedKey(r,a){let f="";if(a){this.checkModifiers_(a);for(const S in Yi.modifierKeys)-1<a.indexOf(Yi.modifierKeys[S])&&(f!==""&&(f+="+"),f+=S)}return f!==""&&r?f=f+"+"+r:r&&(f=`${r}`),f}};Yi.registry=new Yi,function(r){r=r.modifierKeys||(r.modifierKeys={}),r[r.Shift=16]="Shift",r[r.Control=17]="Control",r[r.Alt=18]="Alt",r[r.Meta=91]="Meta"}(Yi||(Yi={}));var If;(function(r){r.ESCAPE="escape",r.DELETE="delete",r.COPY="copy",r.CUT="cut",r.PASTE="paste",r.UNDO="undo",r.REDO="redo"})(If||(If={}));var $_=null,wv=null;xs();var Rf={};Rf.names=If,Rf.registerCopy=Yr,Rf.registerCut=su,Rf.registerDefaultShortcuts=xs,Rf.registerDelete=mc,Rf.registerEscape=hd,Rf.registerPaste=Yu,Rf.registerRedo=Ha,Rf.registerUndo=os;var C_=class{constructor(r,a){this.procedureModelClass=r,this.parameterModelClass=a,this.priority=Ef}save(r){return r=r.getProcedureMap().getProcedures().map(a=>ws(a)),r.length?r:null}load(r,a){const f=a.getProcedureMap();for(const S of r)f.add(fi(this.procedureModelClass,this.parameterModelClass,S,a))}clear(r){r.getProcedureMap().clear()}},M0={};M0.ProcedureSerializer=C_,M0.loadParameter=Ga,M0.loadProcedure=fi,M0.saveParameter=Vc,M0.saveProcedure=ws;var I0=class{constructor(){this.priority=c0}save(r){const a=[];for(const f of r.getAllVariables())r={name:f.name,id:f.getId()},f.type&&(r.type=f.type),a.push(r);return a.length?a:null}load(r,a){for(const f of r)a.createVariable(f.name,f.type,f.id)}clear(r){r.getVariableMap().clear()}};Ms("variables",new I0);var lT={};lT.VariableSerializer=I0;var rb={};rb.load=op,rb.save=gc;var QE={blocks:em,exceptions:Sf,priorities:Zf,procedures:M0,registry:d0,variables:lT,workspaces:rb},ib=class{constructor(r,a,f,S,k){this.workspace=r,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,a=a===void 0?!0:a,f=f===void 0?!0:f;const j=a&&f;a&&(this.hScroll=new Sa(r,!0,j,S,k)),f&&(this.vScroll=new Sa(r,!1,j,S,k)),j&&(this.corner_=re(Ge.RECT,{height:Sa.scrollbarThickness,width:Sa.scrollbarThickness,class:"blocklyScrollbarBackground"}),Ke(this.corner_,r.getBubbleCanvas()))}dispose(){pt(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const r=this.workspace.getMetrics();if(r){var a=!1,f=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===r.viewWidth&&this.oldHostMetrics_.viewHeight===r.viewHeight&&this.oldHostMetrics_.absoluteTop===r.absoluteTop&&this.oldHostMetrics_.absoluteLeft===r.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===r.scrollWidth&&this.oldHostMetrics_.viewLeft===r.viewLeft&&this.oldHostMetrics_.scrollLeft===r.scrollLeft||(a=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===r.scrollHeight&&this.oldHostMetrics_.viewTop===r.viewTop&&this.oldHostMetrics_.scrollTop===r.scrollTop||(f=!0)):f=a=!0,a||f){try{t.disable$$module$build$src$core$events$utils(),this.hScroll&&a&&this.hScroll.resize(r),this.vScroll&&f&&this.vScroll.resize(r)}finally{t.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==r.viewWidth||this.oldHostMetrics_.absoluteLeft!==r.absoluteLeft){let S;(S=this.corner_)==null||S.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==r.viewHeight||this.oldHostMetrics_.absoluteTop!==r.absoluteTop){let S;(S=this.corner_)==null||S.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=r}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(r,a){this.hScroll&&this.hScroll.setOrigin(r,a),this.vScroll&&this.vScroll.setOrigin(r,a)}set(r,a,f){this.hScroll&&this.hScroll.set(r,!1),this.vScroll&&this.vScroll.set(a,!1),(f||f===void 0)&&(r={},this.hScroll&&(r.x=this.hScroll.getRatio_()),this.vScroll&&(r.y=this.vScroll.getRatio_()),this.workspace.setMetrics(r))}setX(r){this.hScroll&&this.hScroll.set(r,!0)}setY(r){this.vScroll&&this.vScroll.set(r,!0)}setContainerVisible(r){this.hScroll&&this.hScroll.setContainerVisible(r),this.vScroll&&this.vScroll.setContainerVisible(r)}isVisible(){let r=!1;return this.hScroll&&(r=this.hScroll.isVisible()),this.vScroll&&(r=r||this.vScroll.isVisible()),r}setVisible(r){this.hScroll&&this.hScroll.setVisibleInternal(r),this.vScroll&&this.vScroll.setVisibleInternal(r)}resizeContent(r){this.hScroll&&this.hScroll.resizeContentHorizontal(r),this.vScroll&&this.vScroll.resizeContentVertical(r)}resizeView(r){this.hScroll&&this.hScroll.resizeViewHorizontal(r),this.vScroll&&this.vScroll.resizeViewVertical(r)}},A_=class{constructor(r){this.workspace_=r}getDimensionsPx_(r){let a=0,f=0;return r&&(a=r.getWidth(),f=r.getHeight()),new qs(a,f)}getFlyoutMetrics(r){return r=this.getDimensionsPx_(this.workspace_.getFlyout(r)),{width:r.width,height:r.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const r=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:r.width,height:r.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let r=0,a=0;const f=this.getToolboxMetrics(),S=this.getFlyoutMetrics(),k=!!this.workspace_.getToolbox();var j;const _e=!((j=this.workspace_.getFlyout())!=null&&j.autoClose);j=k?f.position:S.position;const Ue=j===hr.TOP;return j===hr.LEFT&&(k&&(r+=f.width),_e&&(r+=S.width)),Ue&&(k&&(a+=f.height),_e&&(a+=S.height)),{top:a,left:r}}getViewMetrics(r){r=r?this.workspace_.scale:1;const a=this.getSvgMetrics(),f=this.getToolboxMetrics(),S=this.getFlyoutMetrics(),k=!!this.workspace_.getToolbox();var j;const _e=!((j=this.workspace_.getFlyout())!=null&&j.autoClose);j=k?f.position:S.position;const Ue=j===hr.LEFT||j===hr.RIGHT;return(j===hr.TOP||j===hr.BOTTOM)&&(k&&(a.height-=f.height),_e&&(a.height-=S.height)),Ue&&(k&&(a.width-=f.width),_e&&(a.width-=S.width)),{height:a.height/r,width:a.width/r,top:-this.workspace_.scrollY/r,left:-this.workspace_.scrollX/r}}getContentMetrics(r){r=r?1:this.workspace_.scale;const a=this.workspace_.getBlocksBoundingBox();return{height:(a.bottom-a.top)*r,width:(a.right-a.left)*r,top:a.top*r,left:a.left*r}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(r){if(!this.hasFixedEdges())return{};const a=this.workspace_.isMovableHorizontally(),f=this.workspace_.isMovableVertically();r=r||this.getViewMetrics(!1);const S={};return f||(S.top=r.top,S.bottom=r.top+r.height),a||(S.left=r.left,S.right=r.left+r.width),S}getPaddedContent_(r,a){const f=a.top+a.height,S=a.left+a.width,k=r.width;r=r.height;const j=k/2,_e=r/2;return{top:Math.min(a.top-_e,f-r),bottom:Math.max(f+_e,a.top+r),left:Math.min(a.left-j,S-k),right:Math.max(S+j,a.left+k)}}getScrollMetrics(r,a,f){r=r?this.workspace_.scale:1,a=a||this.getViewMetrics(!1);var S=f||this.getContentMetrics();f=this.getComputedFixedEdges_(a),a=this.getPaddedContent_(a,S),S=f.top!==void 0?f.top:a.top;const k=f.left!==void 0?f.left:a.left;return{top:S/r,left:k/r,width:((f.right!==void 0?f.right:a.right)-k)/r,height:((f.bottom!==void 0?f.bottom:a.bottom)-S)/r}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const r=this.getToolboxMetrics(),a=this.getFlyoutMetrics(!0),f=this.getSvgMetrics(),S=this.getAbsoluteMetrics(),k=this.getViewMetrics(),j=this.getContentMetrics(),_e=this.getScrollMetrics(!1,k,j);return{contentHeight:j.height,contentWidth:j.width,contentTop:j.top,contentLeft:j.left,scrollHeight:_e.height,scrollWidth:_e.width,scrollTop:_e.top,scrollLeft:_e.left,viewHeight:k.height,viewWidth:k.width,viewTop:k.top,viewLeft:k.left,absoluteTop:S.top,absoluteLeft:S.left,svgHeight:f.height,svgWidth:f.width,toolboxWidth:r.width,toolboxHeight:r.height,toolboxPosition:r.position,flyoutWidth:a.width,flyoutHeight:a.height}}};i(Bt.METRICS_MANAGER,Ol,A_);var uT=class extends h{constructor(r){super(),this.isBlank=!0,this.recordUndo=!1,this.type=ya,this.isBlank=!!r,r&&(this.workspaceId=r.id)}};i(Bt.EVENT,ya,uT);var sb=class extends g{constructor(r,a,f){super(r?r.workspace.id:void 0),this.type=Wo,r&&(this.blockId=r.id,this.isStart=a,this.blocks=f)}toJson(){const r=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return r.isStart=this.isStart,r.blockId=this.blockId,r.blocks=this.blocks,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new sb),a.isStart=r.isStart,a.blockId=r.blockId,a.blocks=r.blocks,a}};i(Bt.EVENT,Wo,sb);var $v={};$v.bumpIntoBounds=bh,$v.bumpIntoBoundsHandler=ta,$v.bumpTopObjectsIntoBounds=Ln;var R0=class{constructor(r,a){this.connectionCandidate=this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.dragIconData_=[],this.draggingBlock_=r,this.workspace_=a,this.connectionPreviewer=new(y(Bt.CONNECTION_PREVIEWER,this.workspace_.options))(r),this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=qn(r,this.startXY_)}dispose(){this.dragIconData_.length=0,this.connectionPreviewer.dispose()}startDrag(r,a){t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent_(),this.draggingBlock_.bringToFront(!0),ee(),this.workspace_.setResizesEnabled(!1),Pa(),this.shouldDisconnect_(a)&&this.disconnectBlock_(a,r),this.draggingBlock_.setDragging(!0);let f;(f=this.workspace_.getLayerManager())==null||f.moveToDragLayer(this.draggingBlock_)}shouldDisconnect_(r){return!!(this.draggingBlock_.getParent()||r&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(r,a){this.draggingBlock_.unplug(r),r=this.pixelsToWorkspaceUnits_(a),r=fn.sum(this.startXY_,r),this.draggingBlock_.translate(r.x,r.y),js(this.draggingBlock_)}fireDragStartEvent_(){const r=new(ke(Wo))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));pe(r)}drag(r,a){const f=this.draggingBlock_;this.moveBlock(f,a),this.updateDragTargets(r,f),this.wouldDeleteBlock_=this.wouldDeleteBlock(r,f,a),this.updateCursorDuringBlockDrag_(),this.updateConnectionPreview(f,a)}moveBlock(r,a){a=this.pixelsToWorkspaceUnits_(a),a=fn.sum(this.startXY_,a),r.moveDuringDrag(a)}updateDragTargets(r,a){if(r=this.workspace_.getDragTarget(r),this.dragTarget_!==r){let f;(f=this.dragTarget_)==null||f.onDragExit(a),r==null||r.onDragEnter(a)}r==null||r.onDragOver(a),this.dragTarget_=r}wouldDeleteBlock(r,a,f){return(r=this.workspace_.getDragTarget(r))&&this.workspace_.getComponentManager().hasCapability(r.id,pl.Capability.DELETE_AREA)?r.wouldDelete(a,!!this.getConnectionCandidate(a,f)):!1}updateConnectionPreview(r,a){a=this.pixelsToWorkspaceUnits_(a);const f=this.connectionCandidate,S=this.getConnectionCandidate(r,a);if(S){this.connectionCandidate=a=f&&this.currCandidateIsBetter(f,a,S)?f:S;var{local:k,neighbour:j}=a;k.type!==Pn.OUTPUT_VALUE&&k.type!==Pn.PREVIOUS_STATEMENT||!j.isConnected()||j.targetBlock().isInsertionMarker()||this.orphanCanConnectAtEnd(r,j.targetBlock(),k.type)?this.connectionPreviewer.previewConnection(k,j):this.connectionPreviewer.previewReplacement(k,j,j.targetBlock())}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(r,a,f){return!!hs.getConnectionForOrphanedConnection(r,f===Pn.OUTPUT_VALUE?a.outputConnection:a.previousConnection)}currCandidateIsBetter(r,a,f){const{local:S,neighbour:k}=r;r=new fn(S.x,S.y);const j=new fn(k.x,k.y);return a=fn.distance(fn.sum(r,a),j),f.distance>a-t.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(r,a){r=this.getLocalConnections(r);let f=this.connectionCandidate?t.config$$module$build$src$core$config.connectingSnapRadius:t.config$$module$build$src$core$config.snapRadius,S=null;for(const k of r){const{connection:j,radius:_e}=k.closest(f,a);j&&(S={local:k,neighbour:j,distance:_e},f=_e)}return S}getLocalConnections(r){const a=r.getConnections_(!1),f=r.lastConnectionInStack(!0);return f&&f!==r.nextConnection&&a.push(f),a}endDrag(r,a){if(this.drag(r,a),this.fireDragEndEvent_(),de(),Pa(),this.connectionPreviewer.hidePreview(),r=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)||(r=this.getNewLocationAfterDrag_(a).delta),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),!this.maybeDeleteBlock_()){let f;(f=this.workspace_.getLayerManager())==null||f.moveOffDragLayer(this.draggingBlock_,Z),this.draggingBlock_.setDragging(!1),r?this.updateBlockAfterMove_():bh(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)}this.connectionPreviewer.dispose(),this.workspace_.setResizesEnabled(!0),t.setGroup$$module$build$src$core$events$utils(!1)}getNewLocationAfterDrag_(r){r=this.pixelsToWorkspaceUnits_(r);const a=fn.sum(this.startXY_,r);return{delta:r,newLocation:a}}maybeDeleteBlock_(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),ji.length=0,!0):!1}updateBlockAfterMove_(){this.fireMoveEvent_(),this.connectionCandidate?this.applyConnections(this.connectionCandidate):this.draggingBlock_.queueRender(),this.draggingBlock_.scheduleSnapAndBump()}applyConnections(r){const{local:a,neighbour:f}=r;if(a.connect(f),this.draggingBlock_.rendered){const S=a.isSuperior()?f:a,k=this.draggingBlock_.getRootBlock();pr().then(()=>{ha(S.getSourceBlock()),setTimeout(()=>{k.bringToFront()},0)})}}fireDragEndEvent_(){const r=new(ke(Wo))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));pe(r)}updateToolboxStyle_(r){const a=this.workspace_.getToolbox();if(a){const f=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";r&&typeof a.removeStyle=="function"?a.removeStyle(f):r||typeof a.addStyle!="function"||a.addStyle(f)}}fireMoveEvent_(){if(!this.draggingBlock_.isDeadOrDying()){var r=new(ke(t.MOVE$$module$build$src$core$events$utils))(this.draggingBlock_);r.setReason(["drag"]),r.oldCoordinate=this.startXY_,r.recordNew(),pe(r)}}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(r){return r=new fn(r.x/this.workspace_.scale,r.y/this.workspace_.scale),this.workspace_.isMutator&&r.scale(1/this.workspace_.options.parentWorkspace.scale),r}dragIcons_(){xe("Blockly.BlockDragger.prototype.dragIcons_","v10","v11")}getInsertionMarkers(){return this.workspace_.getAllBlocks().filter(r=>r.isInsertionMarker())}};i(Bt.BLOCK_DRAGGER,Ol,R0);var fm={};fm.Bubble=Cs,fm.MiniWorkspaceBubble=lm,fm.TextBubble=um,fm.TextInputBubble=sa;var ob=class extends hp{constructor(r,a,f,S){super(r),this.type=Eh,this.recordUndo=!1,r&&(this.name=a,this.oldValue=f,this.newValue=S)}toJson(){const r=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return r.name=this.name,r.oldValue=this.oldValue,r.newValue=this.newValue,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new ob),a.name=r.name,a.oldValue=r.oldValue,a.newValue=r.newValue,a}isNull(){return this.oldValue===this.newValue}run(r){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(a=a.getBlockById(this.blockId),!a)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");r=r?this.newValue:this.oldValue,(a=a.getField(this.name))?a.setValue(r):console.warn("Can't set non-existent field: "+this.name)}};i(Bt.EVENT,Eh,ob);var ab=class extends hp{constructor(r){super(r),this.type=t.MOVE$$module$build$src$core$events$utils,r&&(r.isShadow()&&(this.recordUndo=!1),r=this.currentLocation_(),this.oldParentId=r.parentId,this.oldInputName=r.inputName,this.oldCoordinate=r.coordinate)}toJson(){const r=super.toJson();return r.oldParentId=this.oldParentId,r.oldInputName=this.oldInputName,this.oldCoordinate&&(r.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),r.newParentId=this.newParentId,r.newInputName=this.newInputName,this.newCoordinate&&(r.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(r.reason=this.reason),this.recordUndo||(r.recordUndo=this.recordUndo),r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new ab),a.oldParentId=r.oldParentId,a.oldInputName=r.oldInputName,r.oldCoordinate&&(f=r.oldCoordinate.split(","),a.oldCoordinate=new fn(Number(f[0]),Number(f[1]))),a.newParentId=r.newParentId,a.newInputName=r.newInputName,r.newCoordinate&&(f=r.newCoordinate.split(","),a.newCoordinate=new fn(Number(f[0]),Number(f[1]))),r.reason!==void 0&&(a.reason=r.reason),r.recordUndo!==void 0&&(a.recordUndo=r.recordUndo),a}recordNew(){const r=this.currentLocation_();this.newParentId=r.parentId,this.newInputName=r.inputName,this.newCoordinate=r.coordinate}setReason(r){this.reason=r}currentLocation_(){var r=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var a=r.getBlockById(this.blockId);if(!a)throw Error("The block associated with the block move event could not be found");r={};const f=a.getParent();return f?(r.parentId=f.id,(a=f.getInputWithBlock(a))&&(r.inputName=a.name)):r.coordinate=a.getRelativeToSurfaceXY(),r}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&fn.equals(this.oldCoordinate,this.newCoordinate)}run(r){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var f=a.getBlockById(this.blockId);if(f){var S=r?this.newParentId:this.oldParentId,k=r?this.newInputName:this.oldInputName;if(r=r?this.newCoordinate:this.oldCoordinate,S){var j=a.getBlockById(S);if(!j){console.warn("Can't connect to non-existent block: "+S);return}}if(f.getParent()&&f.unplug(),r)k=f.getRelativeToSurfaceXY(),f.moveBy(r.x-k.x,r.y-k.y,this.reason);else{a=f.outputConnection,(!a||f.previousConnection&&f.previousConnection.isConnected())&&(a=f.previousConnection);let _e,Ue;f=(Ue=a)==null?void 0:Ue.type,k?(f=j.getInput(k))&&(_e=f.connection):f===Pn.PREVIOUS_STATEMENT&&(_e=j.nextConnection),_e&&a?a.connect(_e):console.warn("Can't connect to non-existent input: "+k)}}else console.warn("Can't move non-existent block: "+this.blockId)}};i(Bt.EVENT,t.MOVE$$module$build$src$core$events$utils,ab);var lb=class extends g{constructor(r,a,f){super(r?r.workspace.id:void 0),this.type=_o,r&&(this.blockId=r.id,this.isOpen=a,this.bubbleType=f)}toJson(){const r=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return r.isOpen=this.isOpen,r.bubbleType=this.bubbleType,r.blockId=this.blockId||"",r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new lb),a.isOpen=r.isOpen,a.bubbleType=r.bubbleType,a.blockId=r.blockId,a}},ub;(function(r){r.MUTATOR="mutator",r.COMMENT="comment",r.WARNING="warning"})(ub||(ub={})),i(Bt.EVENT,_o,lb);var Jm=class extends h{constructor(r){super(),this.isBlank=!r,r&&(this.commentId=r.id,this.workspaceId=r.workspace.id,this.group=t.getGroup$$module$build$src$core$events$utils(),this.recordUndo=ce())}toJson(){const r=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return r.commentId=this.commentId,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new Jm),a.commentId=r.commentId,a}static CommentCreateDeleteHelper(r,a){var f=r.getEventWorkspace_();if(a){if(a=t.createElement$$module$build$src$core$utils$xml("xml"),!r.xml)throw Error("Ecountered a comment event without proper xml");a.appendChild(r.xml),t.domToWorkspace$$module$build$src$core$xml(a,f)}else{if(!r.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(f=f.getCommentById(r.commentId))?f.dispose():console.warn("Can't uncreate non-existent comment: "+r.commentId)}}},cb=class extends Jm{constructor(r,a,f){super(r),this.type=pd,r&&(this.oldContents_=typeof a>"u"?"":a,this.newContents_=typeof f>"u"?"":f)}toJson(){const r=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return r.oldContents=this.oldContents_,r.newContents=this.newContents_,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new cb),a.oldContents_=r.oldContents,a.newContents_=r.newContents,a}isNull(){return this.oldContents_===this.newContents_}run(r){var a=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(a=a.getCommentById(this.commentId)){var f=r?this.newContents_:this.oldContents_;if(!f)throw Error(r?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");a.setContent(f)}else console.warn("Can't change non-existent comment: "+this.commentId)}};i(Bt.EVENT,pd,cb);var hb=class extends Jm{constructor(r){super(r),this.type=ls,r&&(this.xml=r.toXmlWithXY())}toJson(){const r=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return r.xml=Ki(this.xml),r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new hb),a.xml=t.textToDom$$module$build$src$core$utils$xml(r.xml),a}run(r){Jm.CommentCreateDeleteHelper(this,r)}};i(Bt.EVENT,ls,hb);var db=class extends Jm{constructor(r){super(r),this.type=Vh,r&&(this.xml=r.toXmlWithXY())}run(r){Jm.CommentCreateDeleteHelper(this,!r)}toJson(){const r=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return r.xml=Ki(this.xml),r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new db),a.xml=t.textToDom$$module$build$src$core$utils$xml(r.xml),a}};i(Bt.EVENT,Vh,db);var pb=class extends Jm{constructor(r){super(r),this.type=va,r&&(this.comment_=r,this.oldCoordinate_=r.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setOldCoordinate(r){this.oldCoordinate_=r}toJson(){const r=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return r.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,r.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new pb),f=r.oldCoordinate.split(","),a.oldCoordinate_=new fn(Number(f[0]),Number(f[1])),f=r.newCoordinate.split(","),a.newCoordinate_=new fn(Number(f[0]),Number(f[1])),a}isNull(){return fn.equals(this.oldCoordinate_,this.newCoordinate_)}run(r){var a=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(a=a.getCommentById(this.commentId)){if(r=r?this.newCoordinate_:this.oldCoordinate_,!r)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var f=a.getRelativeToSurfaceXY();a.moveBy(r.x-f.x,r.y-f.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};i(Bt.EVENT,va,pb);var fb=class extends g{constructor(r,a,f){super(f),this.type=Va,this.oldItem=r??void 0,this.newItem=a??void 0}toJson(){const r=super.toJson();return r.oldItem=this.oldItem,r.newItem=this.newItem,r}static fromJson(r,a,f){return a=super.fromJson(r,a,f??new fb),a.oldItem=r.oldItem,a.newItem=r.newItem,a}};i(Bt.EVENT,Va,fb),t.CHANGE$$module$build$src$core$events$utils,t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,t.CHANGE$$module$build$src$core$events$utils,t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,t.disable$$module$build$src$core$events$utils,t.enable$$module$build$src$core$events$utils,t.getGroup$$module$build$src$core$events$utils,t.setGroup$$module$build$src$core$events$utils;var Yn={};Yn.Abstract=h,Yn.BLOCK_CHANGE=t.CHANGE$$module$build$src$core$events$utils,Yn.BLOCK_CREATE=t.CREATE$$module$build$src$core$events$utils,Yn.BLOCK_DELETE=t.DELETE$$module$build$src$core$events$utils,Yn.BLOCK_DRAG=Wo,Yn.BLOCK_FIELD_INTERMEDIATE_CHANGE=Eh,Yn.BLOCK_MOVE=t.MOVE$$module$build$src$core$events$utils,Yn.BUBBLE_OPEN=_o,Yn.BUMP_EVENTS=jh,Yn.BlockBase=hp,Yn.BlockChange=Kr,Yn.BlockCreate=h_,Yn.BlockDelete=qy,Yn.BlockDrag=sb,Yn.BlockFieldIntermediateChange=ob,Yn.BlockMove=ab,Yn.BubbleOpen=lb,Yn.BubbleType=ub,Yn.CHANGE=t.CHANGE$$module$build$src$core$events$utils,Yn.CLICK=tc,Yn.COMMENT_CHANGE=pd,Yn.COMMENT_CREATE=ls,Yn.COMMENT_DELETE=Vh,Yn.COMMENT_MOVE=va,Yn.CREATE=t.CREATE$$module$build$src$core$events$utils,Yn.Click=$,Yn.ClickTarget=M,Yn.CommentBase=Jm,Yn.CommentChange=cb,Yn.CommentCreate=hb,Yn.CommentDelete=db,Yn.CommentMove=pb,Yn.DELETE=t.DELETE$$module$build$src$core$events$utils,Yn.FINISHED_LOADING=ya,Yn.FinishedLoading=uT,Yn.MARKER_MOVE=Ll,Yn.MOVE=t.MOVE$$module$build$src$core$events$utils,Yn.MarkerMove=b_,Yn.SELECTED=go,Yn.Selected=Nd,Yn.THEME_CHANGE=lu,Yn.TOOLBOX_ITEM_SELECT=Va,Yn.TRASHCAN_OPEN=Dl,Yn.ThemeChange=p0,Yn.ToolboxItemSelect=fb,Yn.TrashcanOpen=Jy,Yn.UI=yc,Yn.UiBase=g,Yn.VAR_CREATE=mo,Yn.VAR_DELETE=Mu,Yn.VAR_RENAME=Jc,Yn.VIEWPORT_CHANGE=ni,Yn.VarBase=Ld,Yn.VarCreate=Dd,Yn.VarDelete=Xy,Yn.VarRename=Yy,Yn.ViewportChange=f0,Yn.clearPendingUndo=se,Yn.disable=t.disable$$module$build$src$core$events$utils,Yn.disableOrphans=qe,Yn.enable=t.enable$$module$build$src$core$events$utils,Yn.filter=J,Yn.fire=pe,Yn.fromJson=Fe,Yn.get=ke,Yn.getDescendantIds=Se,Yn.getGroup=t.getGroup$$module$build$src$core$events$utils,Yn.getRecordUndo=ce,Yn.isEnabled=ie,Yn.setGroup=t.setGroup$$module$build$src$core$events$utils,Yn.setRecordUndo=ge;var cT=class extends v_{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(r){super.setFontConstants_(r),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(r){super.setDynamicProperties_(r),this.SELECTED_GLOW_COLOUR=r.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const a=Number(r.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=a&&!isNaN(a)?a:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=r.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(r=Number(r.getComponentStyle("replacementGlowSize")))&&!isNaN(r)?r:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&pt(this.selectedGlowFilter),this.replacementGlowFilter&&pt(this.replacementGlowFilter)}makeStartHat(){const r=this.START_HAT_HEIGHT,a=this.START_HAT_WIDTH,f=zs("c",[Vn(25,-r),Vn(71,-r),Vn(a,0)]);return{height:r,width:a,path:f}}makeHexagonal(){function r(f,S,k){var j=f/2;return j=j>a?a:j,k=k?-1:1,f=(S?-1:1)*f/2,ru(-k*j,f)+ru(k*j,f)}const a=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(f){return f/=2,f>a?a:f},height(f){return f},connectionOffsetY(f){return f/2},connectionOffsetX(f){return-f},pathDown(f){return r(f,!1,!1)},pathUp(f){return r(f,!0,!1)},pathRightDown(f){return r(f,!1,!0)},pathRightUp(f){return r(f,!1,!0)}}}makeRounded(){function r(S,k,j){const _e=S>f?S-f:0;S=(S>f?f:S)/2;const Ue=j===k?"0":"1";return di("a","0 0,"+Ue,S,Vn((j?1:-1)*S,(k?-1:1)*S))+Sn("v",(k?-1:1)*_e)+di("a","0 0,"+Ue,S,Vn((j?-1:1)*S,(k?-1:1)*S))}const a=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,f=2*a;return{type:this.SHAPES.ROUND,isDynamic:!0,width(S){return S/=2,S>a?a:S},height(S){return S},connectionOffsetY(S){return S/2},connectionOffsetX(S){return-S},pathDown(S){return r(S,!1,!1)},pathUp(S){return r(S,!0,!1)},pathRightDown(S){return r(S,!1,!0)},pathRightUp(S){return r(S,!1,!0)}}}makeSquared(){function r(f,S,k){f-=2*a;const j=k===S?"0":"1";return di("a","0 0,"+j,a,Vn((k?1:-1)*a,(S?-1:1)*a))+Sn("v",(S?-1:1)*f)+di("a","0 0,"+j,a,Vn((k?-1:1)*a,(S?-1:1)*a))}const a=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(f){return a},height(f){return f},connectionOffsetY(f){return f/2},connectionOffsetX(f){return-f},pathDown(f){return r(f,!1,!1)},pathUp(f){return r(f,!0,!1)},pathRightDown(f){return r(f,!1,!0)},pathRightUp(f){return r(f,!1,!0)}}}shapeFor(r){let a=r.getCheck();switch(!a&&r.targetConnection&&(a=r.targetConnection.getCheck()),r.type){case Pn.INPUT_VALUE:case Pn.OUTPUT_VALUE:if(r=r.getSourceBlock().getOutputShape(),r!==null)switch(r){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return a&&a.indexOf("Boolean")!==-1?this.HEXAGONAL:a&&a.indexOf("Number")!==-1?this.ROUNDED:(a&&a.indexOf("String"),this.ROUNDED);case Pn.PREVIOUS_STATEMENT:case Pn.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function r(Hn){return zs("c",[Vn(Hn*k/2,0),Vn(Hn*k*3/4,_e/2),Vn(Hn*k,_e)])+Uo([Vn(Hn*k,j)])+zs("c",[Vn(Hn*k/4,_e/2),Vn(Hn*k/2,_e),Vn(Hn*k,_e)])+Sn("h",Hn*S)+zs("c",[Vn(Hn*k/2,0),Vn(Hn*k*3/4,-(_e/2)),Vn(Hn*k,-_e)])+Uo([Vn(Hn*k,-j)])+zs("c",[Vn(Hn*k/4,-(_e/2)),Vn(Hn*k/2,-_e),Vn(Hn*k,-_e)])}const a=this.NOTCH_WIDTH,f=this.NOTCH_HEIGHT,S=a/3,k=S/3,j=f/2,_e=j/2,Ue=r(1),Wt=r(-1);return{type:this.SHAPES.NOTCH,width:a,height:f,pathLeft:Ue,pathRight:Wt}}makeInsideCorners(){const r=this.CORNER_RADIUS,a=di("a","0 0,0",r,Vn(-r,r)),f=di("a","0 0,1",r,Vn(-r,r)),S=di("a","0 0,0",r,Vn(r,r)),k=di("a","0 0,1",r,Vn(r,r));return{width:r,height:r,pathTop:a,pathBottom:S,rightWidth:r,rightHeight:r,pathTopRight:f,pathBottomRight:k}}generateSecondaryColour_(r){return zc("#000",r,.15)||r}generateTertiaryColour_(r){return zc("#000",r,.25)||r}createDom(r,a,f){super.createDom(r,a,f),r=re(Ge.DEFS,{},r),a=re(Ge.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},r),re(Ge.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},a),f=re(Ge.FECOMPONENTTRANSFER,{result:"outBlur"},a),re(Ge.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},f),re(Ge.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},a),re(Ge.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},a),this.selectedGlowFilterId=a.id,this.selectedGlowFilter=a,r=re(Ge.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},r),re(Ge.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},r),a=re(Ge.FECOMPONENTTRANSFER,{result:"outBlur"},r),re(Ge.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),re(Ge.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},r),re(Ge.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},r),re(Ge.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},r),this.replacementGlowFilterId=r.id,this.replacementGlowFilter=r}getCSS_(r){return[`${r} .blocklyText,`,`${r} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${r} .blocklyText {`,"fill: #fff;","}",`${r} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${r} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${r} .blocklyNonEditableText>text,`,`${r} .blocklyEditableText>text,`,`${r} .blocklyNonEditableText>g>text,`,`${r} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${r} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${r} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${r} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${r} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${r} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${r} .blocklyDropdownText {`,"fill: #fff !important;","}",`${r}.blocklyWidgetDiv .goog-menuitem,`,`${r}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${r}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${r} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${r} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${r} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},hT=class extends y_{constructor(r,a){super(r,a)}draw(){const r=this.block_.pathObject;r.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),r.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&r.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(r.outputShapeType=this.info_.outputConnection.shape.type),r.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(r){if(!(0>=r.height)){if(lt.isSpacer(r)){const S=r.precedesStatement;var a=r.followsStatement;if(S||a){const k=this.constants_.INSIDE_CORNERS;var f=k.rightHeight;f=r.height-(S?f:0),a=a?k.pathBottomRight:"",r=0<f?Sn("V",r.yPos+f):"",this.outlinePath_+=a+r+(S?k.pathTopRight:"");return}}this.outlinePath_+=Sn("V",r.yPos+r.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const r=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=Ui(r.xPos,this.info_.startY),this.outlinePath_+=Sn("h",r.width)}drawFlatBottom_(){const r=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=Sn("V",r.baseline),this.outlinePath_+=Sn("h",-r.width)}drawInlineInput_(r){this.positionInlineInputConnection_(r);const a=r.input.name;r.connectedBlock||this.info_.isInsertionMarker||(r=Xs(r.xPos+r.connectionWidth,r.centerline-r.height/2)+this.getInlineInputPath(r),this.block_.pathObject.setOutlinePath(a,r))}getInlineInputPath(r){const a=r.width-2*r.connectionWidth,f=r.height;return Sn("h",a)+r.shape.pathRightDown(f)+Sn("h",-a)+r.shape.pathUp(f)+"z"}drawStatementInput_(r){var a=r.getLastInput();const f=a.xPos+a.notchOffset+a.shape.width,S=this.constants_.INSIDE_CORNERS,k=a.shape.pathRight+Sn("h",-(a.notchOffset-S.width))+S.pathTop,j=r.height-2*S.height;a=S.pathBottom+Sn("h",a.notchOffset-S.width)+(a.connectedBottomNextConnection?"":a.shape.pathLeft),this.outlinePath_+=Sn("H",f)+k+Sn("v",j)+a+Sn("H",r.xPos+r.width),this.positionStatementInputConnection_(r)}drawConnectionHighlightPath(r){const a=r.connectionModel;if(a.type===Pn.NEXT_STATEMENT||a.type===Pn.PREVIOUS_STATEMENT||a.type===Pn.OUTPUT_VALUE&&!r.isDynamicShape)super.drawConnectionHighlightPath(r);else{r=a.type===Pn.INPUT_VALUE?Xs(r.connectionWidth,-r.height/2)+this.getInlineInputPath(r):Xs(r.width,-r.height/2)+r.shape.pathDown(r.height);var f=a.getSourceBlock(),S,k;(k=(S=f.pathObject).addConnectionHighlight)==null||k.call(S,a,r,a.getOffsetInBlock(),f.RTL)}}},Rg=class extends Hi{constructor(r,a,f,S,k,j,_e){if(super(Hi.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",f=Number(Gr(f)),a=Number(Gr(a)),isNaN(f)||isNaN(a))throw Error("Height and width values of an image field must cast to numbers.");if(0>=f||0>=a)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new qs(a,f+Rg.Y_PADDING),this.imageHeight=f,typeof k=="function"&&(this.clickHandler=k),r!==Hi.SKIP_SETUP&&(_e?this.configure_(_e):(this.flipRtl=!!j,this.altText=Gr(S)||""),this.setValue(Gr(r)))}configure_(r){super.configure_(r),r.flipRtl&&(this.flipRtl=r.flipRtl),r.alt&&(this.altText=Gr(r.alt))}initView(){this.imageElement=re(Ge.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(Js,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(r){return typeof r!="string"?null:r}doValueUpdate_(r){this.value_=r,this.imageElement&&this.imageElement.setAttributeNS(Js,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(r){r!==this.altText&&(this.altText=r||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(r){this.clickHandler=r}getText_(){return this.altText}static fromJson(r){if(!r.src||!r.width||!r.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(r.src,r.width,r.height,void 0,void 0,void 0,r)}};Rg.Y_PADDING=1,Es("field_image",Rg),Rg.prototype.DEFAULT_VALUE="";var M_=class extends Hi{constructor(r,a,f){super(Hi.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",r!==Hi.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(r),a&&this.setValidator(a))}configure_(r){super.configure_(r),r.spellcheck!==void 0&&(this.spellcheck_=r.spellcheck)}initView(){if(!this.getSourceBlock())throw new ko;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const r=this.getSourceBlock();if(!r)throw new ko;let a;return this.fullBlockClickTarget_=!((a=this.getConstants())==null||!a.FULL_BLOCK_FIELDS)&&r.isSimpleReporter()}doValueInvalid_(r){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,r=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&ie()&&pe(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,r,this.value_)))}doValueUpdate_(r){this.isTextValid_=this.isDirty_=!0,this.value_=r}applyColour(){const r=this.getSourceBlock();if(!r)throw new ko;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",r.style.colourTertiary)):(this.borderRect_.style.display="none",r.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let r;return(r=this.getConstants())!=null&&r.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var r=this.htmlInput_;this.isTextValid_?(bt(r,"blocklyInvalidInput"),Sr(r,bo.INVALID,!1)):(Be(r,"blocklyInvalidInput"),Sr(r,bo.INVALID,!0))}if(r=this.getSourceBlock(),!r)throw new ko;this.getConstants().FULL_BLOCK_FIELDS&&r.applyColour()}setSpellcheck(r){r!==this.spellcheck_&&(this.spellcheck_=r,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(r,a=!1){this.workspace_=this.sourceBlock_.workspace,!a&&this.workspace_.options.modalInputs&&(Nl||An||Bn)?this.showPromptEditor_():this.showInlineEditor_(a)}showPromptEditor_(){Ra(t.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),r=>{r!==null&&this.setValue(this.getValueFromEditorText_(r)),this.onFinishEditing_(this.value_)})}showInlineEditor_(r){const a=this.getSourceBlock();if(!a)throw new ko;Jl(this,a.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,r||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var r=this.getSourceBlock();if(!r)throw new ko;t.setGroup$$module$build$src$core$events$utils(!0);const a=so();var f=this.getClickTarget_();if(!f)throw Error("A click target has not been set.");Be(f,"editing"),f=document.createElement("input"),f.className="blocklyHtmlInput",f.setAttribute("spellcheck",this.spellcheck_);const S=this.workspace_.getScale();var k=this.getConstants().FIELD_TEXT_FONTSIZE*S+"pt";return a.style.fontSize=k,f.style.fontSize=k,k=M_.BORDERRADIUS*S+"px",this.isFullBlockField()&&(k=this.getScaledBBox(),k=(k.bottom-k.top)/2+"px",r=r.getParent()?r.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,f.style.border=1*S+"px solid "+r,a.style.borderRadius=k,a.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(a.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*S+"px")),f.style.borderRadius=k,a.appendChild(f),f.value=f.defaultValue=this.getEditorText_(this.value_),f.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(f),f}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&ie()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(pe(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),t.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var r=so().style;if(r.width="auto",r.height="auto",r.fontSize="",r.transition="",r.boxShadow="",this.htmlInput_=null,r=this.getClickTarget_(),!r)throw Error("A click target has not been set.");bt(r,"editing")}onFinishEditing_(r){}bindInputEvents_(r){this.onKeyDownWrapper_=Ce(r,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=Ce(r,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(it(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(it(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(r){r.key==="Enter"?(ql(),il()):r.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),ql(),il()):r.key==="Tab"&&(ql(),il(),this.sourceBlock_.tab(this,!r.shiftKey),r.preventDefault())}onHtmlInputChange_(r){r=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&ie()&&this.value_!==r&&pe(new(ke(Eh))(this.sourceBlock_,this.name||null,r,this.value_))}setEditorValue_(r,a=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(r)),this.setValue(r,a)}resizeEditor_(){var r=this.getSourceBlock();if(!r)throw new ko;const a=so(),f=this.getScaledBBox();a.style.width=f.right-f.left+"px",a.style.height=f.bottom-f.top+"px",r=new fn(r.RTL?f.right-a.offsetWidth:f.left,f.top),a.style.left=r.x+"px",a.style.top=r.y+"px"}repositionForWindowResize(){const r=this.getSourceBlock();return r instanceof Mf?(bh(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),r)||this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(r){return`${r}`}getValueFromEditorText_(r){return r}};M_.BORDERRADIUS=4;var k0=class extends M_{constructor(r,a,f){super(r,a,f)}doClassValidation_(r){return r===void 0?null:`${r}`}static fromJson(r){return new this(Gr(r.text),void 0,r)}};Es("field_input",k0),k0.prototype.DEFAULT_VALUE="";var dT=class extends g_{constructor(r){super(r)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(r){return!!r.outputConnection}hasRightSquareCorner(r){return!!r.outputConnection&&!r.statementInputCount&&!r.nextConnection}},Cv=class extends __{constructor(r,a){if(super(r,a),this.connectedBottomNextConnection=!1,this.connectedBlock){for(r=this.connectedBlock;a=r.getNextBlock();)r=a;r.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},pT=class extends er{constructor(r){super(r),this.width=this.height=0,this.type|=lt.getType("RIGHT_CONNECTION")}},fT=class extends Vy{constructor(r){super(r)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(r){const a=(r.hat?r.hat==="cap":this.constants_.ADD_START_HATS)&&!r.outputConnection&&!r.previousConnection;return!!r.outputConnection||a}hasRightSquareCorner(r){return!!r.outputConnection&&!r.statementInputCount&&!r.nextConnection}},mT=class extends S0{constructor(r,a){super(r,a),this.isInline=!0,this.renderer_=r,this.constants_=this.renderer_.getConstants(),this.topRow=new fT(this.constants_),this.bottomRow=new dT(this.constants_),this.isMultiRow=!a.getInputsInline()||a.isCollapsed(),this.hasStatementInput=0<a.statementInputCount,this.rightSide=this.outputConnection?new pT(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(r,a){return a?a instanceof dm||r instanceof Qh||a instanceof Qh?!0:r instanceof t.ValueInput$$module$build$src$core$inputs$value_input||r instanceof Af||r instanceof dm?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(r){return r.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(r)}getInRowSpacing_(r,a){return r&&a||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!r&&a&&lt.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:r&&lt.isLeftRoundedCorner(r)&&a&&(lt.isPreviousConnection(a)||lt.isNextConnection(a))?a.notchOffset-this.constants_.CORNER_RADIUS:r&&lt.isLeftSquareCorner(r)&&a&&lt.isHat(a)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(r,a){if(lt.isTopRow(r)&&lt.isBottomRow(a))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const f=lt.isInputRow(r)&&r.hasStatement,S=lt.isInputRow(a)&&a.hasStatement;return S||f?(r=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),S&&f?Math.max(r,this.constants_.DUMMY_INPUT_MIN_HEIGHT):r):lt.isTopRow(r)?r.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):lt.isBottomRow(a)?this.outputConnection?!a.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(r,a){const f=this.width-this.startX;return lt.isInputRow(r)&&r.hasStatement||lt.isInputRow(a)&&a.hasStatement?Math.max(f,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):f}getElemCenterline_(r,a){if(r.hasStatement&&!lt.isSpacer(a)&&!lt.isStatementInput(a))return r.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(lt.isInlineInput(a)&&a instanceof Km){const f=a.connectedBlock;if(f&&f.outputConnection&&f.nextConnection)return r.yPos+f.height/2}return super.getElemCenterline_(r,a)}addInput_(r,a){if((r instanceof Af||r instanceof dm)&&a.hasDummyInput&&a.align===t.Align$$module$build$src$core$inputs$align.LEFT&&r.align===t.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(a,r);else if(r instanceof Qh){a.elements.push(new Cv(this.constants_,r)),a.hasStatement=!0,a.align===null&&(a.align=r.align);return}super.addInput_(r,a)}addAlignmentPadding_(r,a){if(this.rightAlignedDummyInputs.get(r)){let f;for(let S=0;S<r.elements.length;S++){const k=r.elements[S];if(lt.isSpacer(k)&&(f=k),lt.isField(k)&&k instanceof T0&&k.parentInput===this.rightAlignedDummyInputs.get(r))break}if(f){f.width+=a,r.width+=a;return}}super.addAlignmentPadding_(r,a)}adjustXPosition_(){const r=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let a=r;for(let k=2;k<this.rows.length-1;k+=2){var f=this.rows[k-1];const j=this.rows[k];var S=this.rows[k+1];if(f=k===2?!!this.topRow.hasPreviousConnection:!!f.followsStatement,S=k+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!S.precedesStatement,lt.isInputRow(j)&&j.hasStatement){j.measure();let _e,Ue;a=j.width-((Ue=(_e=j.getLastInput())==null?void 0:_e.width)!=null?Ue:0)+r}else if(f&&(k===2||S)&&lt.isInputRow(j)&&!j.hasStatement){S=j.xPos,f=null;for(let _e=0;_e<j.elements.length;_e++){const Ue=j.elements[_e];lt.isSpacer(Ue)&&(f=Ue),f&&(lt.isField(Ue)||lt.isInput(Ue))&&S<a&&!(lt.isField(Ue)&&Ue instanceof T0&&(Ue.field instanceof Ti||Ue.field instanceof Rg))&&(f.width+=a-S),S+=Ue.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var r=this.outputConnection.shape;if("isDynamic"in r&&r.isDynamic){for(var a=0,f=0;f<this.rows.length;f++){const S=this.rows[f];S.yPos=a,a+=S.height}this.height=a,f=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,a=r.height(f),f=r.width(f),this.outputConnection.height=a,this.outputConnection.width=f,this.outputConnection.startX=f,this.outputConnection.connectionOffsetY=r.connectionOffsetY(a),this.outputConnection.connectionOffsetX=r.connectionOffsetX(f),r=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(r=f,this.rightSide.height=a,this.rightSide.width=r,this.rightSide.centerline=a/2,this.rightSide.xPos=this.width+r),this.startX=f,this.width+=f+r,this.widthWithChildren+=f+r}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var r=0,a=0;a<this.rows.length;a++){var f=this.rows[a];if(!lt.isInputRow(f))continue;r=f.elements[f.elements.length-2];let S=this.getNegativeSpacing_(f.elements[1]),k=this.getNegativeSpacing_(r);r=S+k;const j=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-r<j&&(r=this.width-j,S=r/2,k=r/2),f.elements.unshift(new Vd(this.constants_,-S)),f.elements.push(new Vd(this.constants_,-k))}if(r)for(this.width-=r,this.widthWithChildren-=r,this.rightSide.xPos-=r,a=0;a<this.rows.length;a++)f=this.rows[a],lt.isTopOrBottomRow(f)&&(f.elements[1].width-=r),f.width-=r,f.widthWithConnectedBlocks-=r}}getNegativeSpacing_(r){if(!r||!this.outputConnection)return 0;const a=this.outputConnection.width;var f=this.outputConnection.shape.type;const S=this.constants_;if(1<this.inputRows.length)switch(f){case S.SHAPES.ROUND:return f=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,f=this.height/2>f?f:this.height/2,a-f*(1-Math.sin(Math.acos((f-this.constants_.SMALL_PADDING)/f)));default:return 0}if(lt.isInlineInput(r)&&r instanceof Km){const k=r.connectedBlock;return r=k?k.pathObject.outputShapeType:r.shape.type,r==null||k&&k.outputConnection&&(k.statementInputCount||k.nextConnection)||f===S.SHAPES.HEXAGONAL&&f!==r?0:a-this.constants_.SHAPE_IN_SHAPE_PADDING[f][r]}return lt.isField(r)&&r instanceof T0?f===S.SHAPES.ROUND&&r.field instanceof k0?a-2.75*S.GRID_UNIT:a-this.constants_.SHAPE_IN_SHAPE_PADDING[f][0]:lt.isIcon(r)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let S=2;S<this.rows.length-1;S+=2){const k=this.rows[S-1],j=this.rows[S],_e=this.rows[S+1];var r=S===2,a=S+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!_e.precedesStatement;if(r?this.topRow.hasPreviousConnection:k.followsStatement){var f=j.elements[1];if(f=j.elements.length===3&&f instanceof T0&&(f.field instanceof Ti||f.field instanceof Rg),!r&&f)k.height-=this.constants_.SMALL_PADDING,_e.height-=this.constants_.SMALL_PADDING,j.height-=this.constants_.MEDIUM_PADDING;else if(!r&&!a)k.height+=this.constants_.SMALL_PADDING;else if(a){for(r=!1,a=0;a<j.elements.length;a++)if(f=j.elements[a],f instanceof Km&&lt.isInlineInput(f)&&f.connectedBlock&&!f.connectedBlock.isShadow()&&40<=f.connectedBlock.getHeightWidth().height){r=!0;break}r&&(k.height-=this.constants_.SMALL_PADDING,_e.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},c=class extends T_{constructor(r,a,f){super(r,a,f),this.markerCircle=null}showWithInputOutput(r){const a=r.getSourceBlock();r=r.getLocation().getOffsetInBlock(),this.positionCircle(r.x,r.y),this.setParent_(a),this.showCurrent_()}showWithOutput_(r){this.showWithInputOutput(r)}showWithInput_(r){this.showWithInputOutput(r)}showWithBlock_(r){r=r.getLocation();const a=r.getHeightWidth();this.positionRect_(0,0,a.width,a.height),this.setParent_(r),this.showCurrent_()}positionCircle(r,a){let f;(f=this.markerCircle)==null||f.setAttribute("cx",`${r}`);let S;(S=this.markerCircle)==null||S.setAttribute("cy",`${a}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=re(Ge.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const r=this.getBlinkProperties_();re(Ge.ANIMATE,r,this.markerCircle)}return this.markerSvg_}applyColour_(r){super.applyColour_(r);let a;(a=this.markerCircle)==null||a.setAttribute("fill",this.colour_);let f;if((f=this.markerCircle)==null||f.setAttribute("stroke",this.colour_),this.isCursor()){r=this.colour_+";transparent;transparent;";let S;(S=this.markerCircle)==null||S.firstElementChild.setAttribute("values",r)}}},m=class extends E0{constructor(r,a,f){super(r,a,f),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=f}setPath(r){super.setPath(r),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",r)}applyColour(r){super.applyColour(r);const a=r.getParent();r.isShadow()&&a&&this.svgPath.setAttribute("stroke",a.style.colourTertiary);for(const f of this.outlines.values())f.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const r of this.outlines.values())r.setAttribute("transform","scale(-1 1)")}updateSelected(r){this.setClass_("blocklySelected",r),r?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(r){this.setClass_("blocklyReplaceable",r),r?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(r,a){r=r.getParentInput().name,(r=this.getOutlinePath(r))&&(a?r.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):r.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const r of this.outlines.keys())this.remainingOutlines.add(r)}endDrawing(){if(this.remainingOutlines.size)for(const r of this.remainingOutlines)this.removeOutlinePath(r);this.remainingOutlines.clear()}setOutlinePath(r,a){r=this.getOutlinePath(r),r.setAttribute("d",a),r.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(r){return this.outlines.has(r)||this.outlines.set(r,re(Ge.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(r),this.outlines.get(r)}removeOutlinePath(r){let a,f;(a=this.outlines.get(r))==null||(f=a.parentNode)==null||f.removeChild(this.outlines.get(r)),this.outlines.delete(r)}},x=class extends S_{constructor(r){super(r)}makeConstants_(){return new cT}makeRenderInfo_(r){return new mT(this,r)}makeDrawer_(r,a){return new hT(r,a)}makeMarkerDrawer(r,a){return new c(r,this.getConstants(),a)}makePathObject(r,a){return new m(r,a,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(r,a,f){return xe("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),a.type===Pn.OUTPUT_VALUE?r.isConnected()?mp.PREVIEW_TYPE.REPLACEMENT_FADE:mp.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(r,a,f)}};Ii("zelos",x);var D={};D.BottomRow=dT,D.ConstantProvider=cT,D.Drawer=hT,D.MarkerSvg=c,D.PathObject=m,D.RenderInfo=mT,D.Renderer=x,D.RightConnectionShape=pT,D.StatementInput=Cv,D.TopRow=fT,Go();var G={};G.registerCleanup=Jr,G.registerCollapse=as,G.registerCollapseExpandBlock=Cu,G.registerComment=dd,G.registerDefaultOptions=Go,G.registerDelete=ho,G.registerDeleteAll=Ju,G.registerDisable=Au,G.registerDuplicate=co,G.registerExpand=Qi,G.registerHelp=po,G.registerInline=_a,G.registerRedo=ti,G.registerUndo=kr;var K=class extends M_{constructor(r,a,f){super(Hi.SKIP_SETUP),this.clockwise=K.CLOCKWISE,this.offset=K.OFFSET,this.wrap=K.WRAP,this.round=K.ROUND,this.boundEvents=[],this.symbol_=this.gauge=this.line=null,r!==Hi.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(r),a&&this.setValidator(a))}configure_(r){switch(super.configure_(r),r.mode){case ae.COMPASS:this.clockwise=!0,this.offset=90;break;case ae.PROTRACTOR:this.clockwise=!1,this.offset=0}r.clockwise&&(this.clockwise=r.clockwise),r.offset&&(this.offset=r.offset),r.wrap&&(this.wrap=r.wrap),r.round&&(this.round=r.round)}initView(){super.initView(),this.symbol_=re(Ge.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph()}showEditor_(r){super.showEditor_(r,Nl||An||Bn),r=this.dropdownCreate(),xu().appendChild(r),this.sourceBlock_ instanceof Mf&&Ed(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),ve(this,this.dropdownDispose.bind(this)),this.updateGraph()}dropdownCreate(){const r=re(Ge.SVG,{xmlns:zm,"xmlns:html":Tc,"xmlns:xlink":Js,version:"1.1",height:2*K.HALF+"px",width:2*K.HALF+"px"});r.style.touchAction="none";const a=re(Ge.CIRCLE,{cx:K.HALF,cy:K.HALF,r:K.RADIUS,class:"blocklyAngleCircle"},r);this.gauge=re(Ge.PATH,{class:"blocklyAngleGauge"},r),this.line=re(Ge.LINE,{x1:K.HALF,y1:K.HALF,class:"blocklyAngleLine"},r);for(let f=0;360>f;f+=15)re(Ge.LINE,{x1:K.HALF+K.RADIUS,y1:K.HALF,x2:K.HALF+K.RADIUS-(f%45===0?10:5),y2:K.HALF,class:"blocklyAngleMarks",transform:"rotate("+f+","+K.HALF+","+K.HALF+")"},r);return this.boundEvents.push(Ce(r,"click",this,this.hide)),this.boundEvents.push(Ce(a,"pointerdown",this,this.onMouseMove_,!0)),this.boundEvents.push(Ce(a,"pointermove",this,this.onMouseMove_,!0)),r}dropdownDispose(){for(const r of this.boundEvents)it(r);this.boundEvents.length=0,this.line=this.gauge=null}hide(){yi(this),ql()}onMouseMove_(r){var a=this.gauge.ownerSVGElement.getBoundingClientRect();const f=r.clientX-a.left-K.HALF;r=r.clientY-a.top-K.HALF,a=Math.atan(-r/f),isNaN(a)||(a=ns(a),0>f?a+=180:0<r&&(a+=360),a=this.clockwise?this.offset+360-a:360-(this.offset-a),this.displayMouseOrKeyboardValue(a))}displayMouseOrKeyboardValue(r){if(this.round&&(r=Math.round(r/this.round)*this.round),r=this.wrapValue(r),r!==this.value_){const a=this.value_;this.setEditorValue_(r,!1),this.sourceBlock_&&ie()&&this.value_!==a&&pe(new(ke(Eh))(this.sourceBlock_,this.name||null,a,this.value_))}}updateGraph(){if(this.gauge&&this.line){var r=Number(this.getText())+this.offset,a=Bc(r%360);r=["M ",K.HALF,",",K.HALF];var f=K.HALF,S=K.HALF;if(!isNaN(a)){const k=Number(this.clockwise),j=Bc(this.offset),_e=Math.cos(j)*K.RADIUS,Ue=Math.sin(j)*-K.RADIUS;k&&(a=2*j-a),f+=Math.cos(a)*K.RADIUS,S-=Math.sin(a)*K.RADIUS,a=Math.abs(Math.floor((a-j)/Math.PI)%2),k&&(a=1-a),r.push(" l ",_e,",",Ue," A ",K.RADIUS,",",K.RADIUS," 0 ",a," ",k," ",f,",",S," z")}this.gauge.setAttribute("d",r.join("")),this.line.setAttribute("x2",`${f}`),this.line.setAttribute("y2",`${S}`)}}onHtmlInputKeyDown_(r){super.onHtmlInputKeyDown_(r);var a=this.getSourceBlock();if(!a)throw new ko;let f=0;switch(r.key){case"ArrowLeft":f=a.RTL?1:-1;break;case"ArrowRight":f=a.RTL?-1:1;break;case"ArrowDown":f=-1;break;case"ArrowUp":f=1}f&&(a=this.getValue(),this.displayMouseOrKeyboardValue(a+f*this.round),r.preventDefault(),r.stopPropagation())}doClassValidation_(r){return r=Number(r),isNaN(r)||!isFinite(r)?null:this.wrapValue(r)}wrapValue(r){return r%=360,0>r&&(r+=360),r>this.wrap&&(r-=360),r}static fromJson(r){return new this(r.angle,void 0,r)}};K.HALF=50,K.RADIUS=K.HALF-1,K.CLOCKWISE=!1,K.OFFSET=0,K.WRAP=360,K.ROUND=15,Es("field_angle",K),K.prototype.DEFAULT_VALUE=0,$t(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: 0.8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: 0.8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`);var ae;(function(r){r.COMPASS="compass",r.PROTRACTOR="protractor"})(ae||(ae={}));var fe=class extends Hi{constructor(r,a,f){super(Hi.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=fe.CHECK_CHAR,r!==Hi.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(r),a&&this.setValidator(a))}configure_(r){super.configure_(r),r.checkCharacter&&(this.checkChar=r.checkCharacter)}saveState(){const r=this.saveLegacyState(fe);return r!==null?r:this.getValueBoolean()}initView(){super.initView();const r=this.getTextElement();Be(r,"blocklyCheckbox"),r.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(r){this.checkChar=r||fe.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(r){return r===!0||r==="TRUE"?"TRUE":r===!1||r==="FALSE"?"FALSE":null}doValueUpdate_(r){this.value_=this.convertValueToBool_(r),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(r){return typeof r=="string"?r==="TRUE":!!r}static fromJson(r){return new this(r.checked,void 0,r)}};fe.CHECK_CHAR="",Es("field_checkbox",fe),fe.prototype.DEFAULT_VALUE=!1;var Ee=class extends Hi{constructor(r,a,f){super(Hi.SKIP_SETUP),this.highlightedIndex=this.picker=null,this.boundEvents=[],this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles=this.colours=null,this.columns=0,r!==Hi.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(r),a&&this.setValidator(a))}configure_(r){super.configure_(r),r.colourOptions&&(this.colours=r.colourOptions),r.colourTitles&&(this.titles=r.colourTitles),r.columns&&(this.columns=r.columns)}initView(){this.size_=new qs(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1",this.getBorderRect().setAttribute("stroke","#fff"),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const r=this.getSourceBlock();if(!r)throw new ko;const a=this.getConstants();return r.isSimpleReporter()&&!(a==null||!a.FIELD_COLOUR_FULL_BLOCK)}applyColour(){const r=this.getSourceBlock();if(!r)throw new ko;if(this.fieldGroup_){var a=this.borderRect_;if(!a)throw Error("The border rect has not been initialized");this.isFullBlockField()?(a.style.display="none",r.pathObject.svgPath.setAttribute("fill",this.getValue()),r.pathObject.svgPath.setAttribute("stroke","#fff")):(a.style.display="block",a.style.fill=this.getValue())}}getSize(){let r;return(r=this.getConstants())!=null&&r.FIELD_COLOUR_FULL_BLOCK&&(this.render_(),this.isDirty_=!1),super.getSize()}render_(){super.render_();const r=this.getSourceBlock();if(!r)throw new ko;r.applyColour()}updateSize_(r){var a=this.getConstants();this.isFullBlockField()?(r=2*(r??0),a=a.FIELD_TEXT_HEIGHT):(r=a.FIELD_COLOUR_DEFAULT_WIDTH,a=a.FIELD_COLOUR_DEFAULT_HEIGHT),this.size_.height=a,this.size_.width=r,this.positionBorderRect_()}doClassValidation_(r){return typeof r!="string"?null:Zo(r)}getText(){let r=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(r)&&(r="#"+r[1]+r[3]+r[5]),r}setColours(r,a){return this.colours=r,a&&(this.titles=a),this}setColumns(r){return this.columns=r,this}showEditor_(){this.dropdownCreate(),xu().appendChild(this.picker),ve(this,this.dropdownDispose.bind(this)),this.picker.focus({preventScroll:!0})}onClick(r){r=(r=r.target)&&r.getAttribute("data-colour"),r!==null&&(this.setValue(r),yi(this))}onKeyDown(r){let a=!0;var f;switch(r.key){case"ArrowUp":this.moveHighlightBy(0,-1);break;case"ArrowDown":this.moveHighlightBy(0,1);break;case"ArrowLeft":this.moveHighlightBy(-1,0);break;case"ArrowRight":this.moveHighlightBy(1,0);break;case"Enter":(f=this.getHighlighted())&&(f=f.getAttribute("data-colour"),f!==null&&this.setValue(f)),il();break;default:a=!1}a&&r.stopPropagation()}moveHighlightBy(r,a){if(this.highlightedIndex){var f=this.colours||Ee.COLOURS,S=this.columns||Ee.COLUMNS,k=this.highlightedIndex%S,j=Math.floor(this.highlightedIndex/S);k+=r,j+=a,0>r?0>k&&0<j?(k=S-1,j--):0>k&&(k=0):0<r?k>S-1&&j<Math.floor(f.length/S)-1?(k=0,j++):k>S-1&&k--:0>a?0>j&&(j=0):0<a&&j>Math.floor(f.length/S)-1&&(j=Math.floor(f.length/S)-1),this.setHighlightedCell(this.picker.childNodes[j].childNodes[k],j*S+k)}}onMouseMove(r){const a=(r=r.target)&&Number(r.getAttribute("data-index"));a!==null&&a!==this.highlightedIndex&&this.setHighlightedCell(r,a)}onMouseEnter(){let r;(r=this.picker)==null||r.focus({preventScroll:!0})}onMouseLeave(){var r;(r=this.picker)==null||r.blur(),(r=this.getHighlighted())&&bt(r,"blocklyColourHighlighted")}getHighlighted(){if(!this.highlightedIndex)return null;const r=this.columns||Ee.COLUMNS,a=this.picker.childNodes[Math.floor(this.highlightedIndex/r)];return a?a.childNodes[this.highlightedIndex%r]:null}setHighlightedCell(r,a){const f=this.getHighlighted();f&&bt(f,"blocklyColourHighlighted"),Be(r,"blocklyColourHighlighted"),this.highlightedIndex=a,(r=r.getAttribute("id"))&&this.picker&&Sr(this.picker,bo.ACTIVEDESCENDANT,r)}dropdownCreate(){const r=this.columns||Ee.COLUMNS,a=this.colours||Ee.COLOURS,f=this.titles||Ee.TITLES,S=this.getValue(),k=document.createElement("table");k.className="blocklyColourTable",k.tabIndex=0,k.dir="ltr",ai(k,nh.GRID),Sr(k,bo.EXPANDED,!0),Sr(k,bo.ROWCOUNT,Math.floor(a.length/r)),Sr(k,bo.COLCOUNT,r);let j;for(let _e=0;_e<a.length;_e++){_e%r===0&&(j=document.createElement("tr"),ai(j,nh.ROW),k.appendChild(j));const Ue=document.createElement("td");j.appendChild(Ue),Ue.setAttribute("data-colour",a[_e]),Ue.title=f[_e]||a[_e],Ue.id=oe(),Ue.setAttribute("data-index",`${_e}`),ai(Ue,nh.GRIDCELL),Sr(Ue,bo.LABEL,a[_e]),Sr(Ue,bo.SELECTED,a[_e]===S),Ue.style.backgroundColor=a[_e],a[_e]===S&&(Ue.className="blocklyColourSelected",this.highlightedIndex=_e)}this.boundEvents.push(Ce(k,"pointerdown",this,this.onClick,!0)),this.boundEvents.push(Ce(k,"pointermove",this,this.onMouseMove,!0)),this.boundEvents.push(Ce(k,"pointerenter",this,this.onMouseEnter,!0)),this.boundEvents.push(Ce(k,"pointerleave",this,this.onMouseLeave,!0)),this.boundEvents.push(Ce(k,"keydown",this,this.onKeyDown,!1)),this.picker=k}dropdownDispose(){for(const r of this.boundEvents)it(r);this.boundEvents.length=0,this.highlightedIndex=this.picker=null}static fromJson(r){return new this(r.colour,void 0,r)}};Ee.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),Ee.TITLES=[],Ee.COLUMNS=7,Ee.prototype.DEFAULT_VALUE=Ee.COLOURS[0],Es("field_colour",Ee),$t(`
.blocklyColourTable {
  border-collapse: collapse;
  display: block;
  outline: none;
  padding: 1px;
}

.blocklyColourTable>tr>td {
  border: 0.5px solid #888;
  box-sizing: border-box;
  cursor: pointer;
  display: inline-block;
  height: 20px;
  padding: 0;
  width: 20px;
}

.blocklyColourTable>tr>td.blocklyColourHighlighted {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0, 0, 0, 0.3);
  position: relative;
}

.blocklyColourSelected, .blocklyColourSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}
`);var Ze=class extends Ti{constructor(r,a,f){super(String(r??""),a,f),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(r){return new this(Gr(r.text),void 0,r)}};Es("field_label_serializable",Ze);var et=class extends k0{constructor(r,a,f){super(Hi.SKIP_SETUP),this.textGroup=null,this.maxLines_=1/0,this.isOverflowedY_=!1,r!==Hi.SKIP_SETUP&&(f&&this.configure_(f),this.setValue(r),a&&this.setValidator(a))}configure_(r){super.configure_(r),r.maxLines&&this.setMaxLines(r.maxLines)}toXml(r){return r.textContent=this.getValue().replace(/\n/g,"&#10;"),r}fromXml(r){this.setValue(r.textContent.replace(/&#10;/g,`
`))}saveState(){const r=this.saveLegacyState(et);return r!==null?r:this.getValue()}loadState(r){this.loadLegacyState(Hi,r)||this.setValue(r)}initView(){this.createBorderRect_(),this.textGroup=re(Ge.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const r=this.getSourceBlock();if(!r)throw new ko;let a=this.getText();if(!a)return Hi.NBSP;const f=a.split(`
`);a="";const S=this.isOverflowedY_?this.maxLines_:f.length;for(let k=0;k<S;k++){let j=f[k];j.length>this.maxDisplayLength?j=j.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&k===S-1&&(j=j.substring(0,j.length-3)+"..."),j=j.replace(/\s/g,Hi.NBSP),a+=j,k!==S-1&&(a+=`
`)}return r.RTL&&(a+=""),a}doValueUpdate_(r){super.doValueUpdate_(r),this.value_!==null&&(this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_)}render_(){var r=this.getSourceBlock();if(!r)throw new ko;for(var a,f=this.textGroup;a=f.firstChild;)f.removeChild(a);a=this.getDisplayText_().split(`
`);let S=0;for(let k=0;k<a.length;k++){const j=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;re(Ge.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:S+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},f).appendChild(document.createTextNode(a[k])),S+=j}this.isBeingEdited_&&(f=this.htmlInput_,this.isOverflowedY_?Be(f,"blocklyHtmlTextAreaInputOverflowedY"):bt(f,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(r.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),r=this.htmlInput_,this.isTextValid_?(bt(r,"blocklyInvalidInput"),Sr(r,bo.INVALID,!1)):(Be(r,"blocklyInvalidInput"),Sr(r,bo.INVALID,!0)))}updateSize_(){var r=this.textGroup.childNodes;const a=this.getConstants().FIELD_TEXT_FONTSIZE,f=this.getConstants().FIELD_TEXT_FONTWEIGHT,S=this.getConstants().FIELD_TEXT_FONTFAMILY;let k=0,j=0;for(var _e=0;_e<r.length;_e++){var Ue=Je(r[_e],a,f,S);Ue>k&&(k=Ue),j+=this.getConstants().FIELD_TEXT_HEIGHT+(0<_e?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(r=String(this.value_).split(`
`),_e=re(Ge.TEXT,{class:"blocklyText blocklyMultilineText"}),Ue=0;Ue<r.length;Ue++){r[Ue].length>this.maxDisplayLength&&(r[Ue]=r[Ue].substring(0,this.maxDisplayLength)),_e.textContent=r[Ue];const Wt=Je(_e,a,f,S);Wt>k&&(k=Wt)}k+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(j+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,k+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",`${k}`),this.borderRect_.setAttribute("height",`${j}`)),this.size_.width=k,this.size_.height=j,this.positionBorderRect_()}showEditor_(r,a){super.showEditor_(r,a),this.forceRerender()}widgetCreate_(){const r=so(),a=this.workspace_.getScale(),f=document.createElement("textarea");f.className="blocklyHtmlInput blocklyHtmlTextAreaInput",f.setAttribute("spellcheck",String(this.spellcheck_));var S=this.getConstants().FIELD_TEXT_FONTSIZE*a+"pt";r.style.fontSize=S,f.style.fontSize=S,f.style.borderRadius=k0.BORDERRADIUS*a+"px",S=this.getConstants().FIELD_BORDER_RECT_X_PADDING*a;const k=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*a/2;return f.style.padding=k+"px "+S+"px "+k+"px "+S+"px",S=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,f.style.lineHeight=S*a+"px",r.appendChild(f),f.value=f.defaultValue=this.getEditorText_(this.value_),f.setAttribute("data-untyped-default-value",String(this.value_)),f.setAttribute("data-old-value",""),Tn?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(f),f}setMaxLines(r){typeof r=="number"&&0<r&&r!==this.maxLines_&&(this.maxLines_=r,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(r){r.key!=="Enter"&&super.onHtmlInputKeyDown_(r)}static fromJson(r){return new this(Gr(r.text),void 0,r)}};Es("field_multilinetext",et),$t(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`);var ut=class extends M_{constructor(r,a,f,S,k,j){super(Hi.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,r!==Hi.SKIP_SETUP&&(j?this.configure_(j):this.setConstraints(a,f,S),this.setValue(r),k&&this.setValidator(k))}configure_(r){super.configure_(r),this.setMinInternal(r.min),this.setMaxInternal(r.max),this.setPrecisionInternal(r.precision)}setConstraints(r,a,f){this.setMinInternal(r),this.setMaxInternal(a),this.setPrecisionInternal(f),this.setValue(this.getValue())}setMin(r){this.setMinInternal(r),this.setValue(this.getValue())}setMinInternal(r){r==null?this.min_=-1/0:(r=Number(r),isNaN(r)||(this.min_=r))}getMin(){return this.min_}setMax(r){this.setMaxInternal(r),this.setValue(this.getValue())}setMaxInternal(r){r==null?this.max_=1/0:(r=Number(r),isNaN(r)||(this.max_=r))}getMax(){return this.max_}setPrecision(r){this.setPrecisionInternal(r),this.setValue(this.getValue())}setPrecisionInternal(r){this.precision_=Number(r)||0;let a=String(this.precision_);a.indexOf("e")!==-1&&(a=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const f=a.indexOf(".");this.decimalPlaces=f===-1?r?0:null:a.length-f-1}getPrecision(){return this.precision_}doClassValidation_(r){return r===null||(r=`${r}`.replace(/O/gi,"0"),r=r.replace(/,/g,""),r=r.replace(/infinity/i,"Infinity"),r=Number(r||0),isNaN(r))?null:(r=Math.min(Math.max(r,this.min_),this.max_),this.precision_&&isFinite(r)&&(r=Math.round(r/this.precision_)*this.precision_),this.decimalPlaces!==null&&(r=Number(r.toFixed(this.decimalPlaces))),r)}widgetCreate_(){const r=super.widgetCreate_();return-1/0<this.min_&&(r.min=`${this.min_}`,Sr(r,bo.VALUEMIN,this.min_)),1/0>this.max_&&(r.max=`${this.max_}`,Sr(r,bo.VALUEMAX,this.max_)),r}static fromJson(r){return new this(r.value,void 0,void 0,void 0,void 0,r)}};Es("field_number",ut),ut.prototype.DEFAULT_VALUE=0;var Rt=class extends wh{constructor(r,a,f,S,k){super(Hi.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=Rt.dropdownCreate,this.defaultVariableName=typeof r=="string"?r:"",this.size_=new qs(0,0),r!==Hi.SKIP_SETUP&&(k?this.configure_(k):this.setTypes(f,S),a&&this.setValidator(a))}configure_(r){super.configure_(r),this.setTypes(r.variableTypes,r.defaultType)}initModel(){var r=this.getSourceBlock();if(!r)throw new ko;this.variable||(r=t.getOrCreateVariablePackage$$module$build$src$core$variables(r.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(r.getId()))}shouldAddBorderRect_(){const r=this.getSourceBlock();if(!r)throw new ko;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||r.type!=="variables_get")}fromXml(r){var a=this.getSourceBlock();if(!a)throw new ko;const f=r.getAttribute("id"),S=r.textContent,k=r.getAttribute("variabletype")||r.getAttribute("variableType")||"";if(a=t.getOrCreateVariablePackage$$module$build$src$core$variables(a.workspace,f,S,k),k!==null&&k!==a.type)throw Error("Serialized variable type with id '"+a.getId()+"' had type "+a.type+", and does not match variable field that references it: "+Ki(r)+".");this.setValue(a.getId())}toXml(r){return this.initModel(),r.id=this.variable.getId(),r.textContent=this.variable.name,this.variable.type&&r.setAttribute("variabletype",this.variable.type),r}saveState(r){var a=this.saveLegacyState(Rt);return a!==null||(this.initModel(),a={id:this.variable.getId()},r&&(a.name=this.variable.name,a.type=this.variable.type)),a}loadState(r){const a=this.getSourceBlock();if(!a)throw new ko;this.loadLegacyState(Rt,r)||(r=t.getOrCreateVariablePackage$$module$build$src$core$variables(a.workspace,r.id||null,r.name,r.type||""),this.setValue(r.getId()))}setSourceBlock(r){if(r.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(r)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(r){if(r===null)return null;var a=this.getSourceBlock();if(!a)throw new ko;return a=t.getVariable$$module$build$src$core$variables(a.workspace,r),a?(a=a.type,this.typeIsAllowed(a)?r:(console.warn("Variable type doesn't match this field!  Type was "+a),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+r),null)}doValueUpdate_(r){const a=this.getSourceBlock();if(!a)throw new ko;this.variable=t.getVariable$$module$build$src$core$variables(a.workspace,r),super.doValueUpdate_(r)}typeIsAllowed(r){const a=this.getVariableTypes();if(!a)return!0;for(let f=0;f<a.length;f++)if(r===a[f])return!0;return!1}getVariableTypes(){var r=this.variableTypes;if(r===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(r=r||[""],r.length===0)throw r=this.getText(),Error("'variableTypes' of field variable "+r+" was an empty list");return r}setTypes(r=null,a=""){if(Array.isArray(r)){let f=!1;for(let S=0;S<r.length;S++)r[S]===a&&(f=!0);if(!f)throw Error("Invalid default type '"+a+"' in the definition of a FieldVariable")}else if(r!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=a,this.variableTypes=r}refreshVariableName(){this.forceRerender()}onItemSelected_(r,a){if(r=a.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(r===ln){t.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(r===nn){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(r)}referencesVariables(){return!0}static fromJson(r){return new this(Gr(r.variable),void 0,void 0,void 0,r)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const r=this.getText();let a=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var f=this.getVariableTypes(),S=0;S<f.length;S++){const k=this.sourceBlock_.workspace.getVariablesOfType(f[S]);a=a.concat(k)}for(a.sort(cp.compareByName),f=[],S=0;S<a.length;S++)f[S]=[a[S].name,a[S].getId()];return f.push([t.Msg$$module$build$src$core$msg.RENAME_VARIABLE,ln]),t.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&f.push([t.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",r),nn]),f}};Es("field_variable",Rt);var Vt=class{constructor(r,a,f,S){this.workspace=r,this.targetWorkspace=a,this.isLabel_=S,this.onMouseUpWrapper=null,this.height=this.width=0,this.svgText=this.svgGroup=null,this.text=f.text,this.position=new fn(0,0),this.callbackKey=f.callbackKey||f.callbackkey,this.cssClass=f["web-class"]||null,this.info=f}createDom(){var r=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(r+=" "+this.cssClass),this.svgGroup=re(Ge.G,{class:r},this.workspace.getCanvas());let a;this.isLabel_||(a=re(Ge.RECT,{class:"blocklyFlyoutButtonShadow",rx:Vt.BORDER_RADIUS,ry:Vt.BORDER_RADIUS,x:1,y:1},this.svgGroup)),r=re(Ge.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:Vt.BORDER_RADIUS,ry:Vt.BORDER_RADIUS},this.svgGroup);const f=re(Ge.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var S=Gr(this.text);this.workspace.RTL&&(S+=""),f.textContent=S,this.isLabel_&&(this.svgText=f,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const k=Xt(f,"fontSize"),j=Xt(f,"fontWeight"),_e=Xt(f,"fontFamily");if(this.width=jt(f,k,j,_e),S=ze(S,k,j,_e),this.height=S.height,!this.isLabel_){this.width+=2*Vt.TEXT_MARGIN_X,this.height+=2*Vt.TEXT_MARGIN_Y;let Ue;(Ue=a)==null||Ue.setAttribute("width",String(this.width));let Wt;(Wt=a)==null||Wt.setAttribute("height",String(this.height))}return r.setAttribute("width",String(this.width)),r.setAttribute("height",String(this.height)),f.setAttribute("x",String(this.width/2)),f.setAttribute("y",String(this.height/2-S.height/2+S.baseline)),this.updateTransform(),this.onMouseUpWrapper=Ce(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(r,a){this.position.x=r,this.position.y=a,this.updateTransform()}isLabel(){return this.isLabel_}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper&&it(this.onMouseUpWrapper),this.svgGroup&&pt(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}onMouseUp(r){(r=this.targetWorkspace.getGesture(r))&&r.cancel(),this.isLabel_&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isLabel_||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isLabel_||(r=this.targetWorkspace.getButtonCallback(this.callbackKey))&&r(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};Vt.TEXT_MARGIN_X=5,Vt.TEXT_MARGIN_Y=2,Vt.BORDER_RADIUS=4,$t(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var hn=class extends A_{constructor(r,a){super(r),this.flyout_=a}getBoundingBox_(){let r;try{r=this.workspace_.getCanvas().getBBox()}catch{r={height:0,y:0,width:0,x:0}}return r}getContentMetrics(r){const a=this.getBoundingBox_();return r=r?1:this.workspace_.scale,{height:a.height*r,width:a.width*r,top:a.y*r,left:a.x*r}}getScrollMetrics(r,a,f){return a=f||this.getContentMetrics(),f=this.flyout_.MARGIN*this.workspace_.scale,r=r?this.workspace_.scale:1,{height:(a.height+2*f)/r,width:(a.width+a.left+f)/r,top:0,left:0}}},In;(function(r){r.BLOCK="block",r.BUTTON="button"})(In||(In={}));var un=class extends Ev{constructor(r){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,r.setMetrics=this.setMetrics_.bind(this),this.workspace_=new jp(r),this.workspace_.setMetricsManager(new hn(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=le(),this.RTL=!!r.RTL,this.toolboxPosition_=r.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(r){return this.svgGroup_=re(r,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=re(Ge.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(r){this.targetWorkspace=r,this.workspace_.targetWorkspace=r,this.workspace_.scrollbar=new ib(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(Ce(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(Ce(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),r.getComponentManager().addComponent({component:this,weight:1,capabilities:[pl.Capability.AUTOHIDEABLE,pl.Capability.DELETE_AREA,pl.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const r of this.boundEvents)it(r);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&pt(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(r){this.autoClose=r,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(r){!r&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}isVisible(){return this.isVisible_}setVisible(r){const a=r!==this.isVisible();this.isVisible_=r,a&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(r){const a=r!==this.containerVisible;this.containerVisible=r,a&&this.updateDisplay()}updateDisplay(){let r;r=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=r?"block":"none");let a;(a=this.workspace_.scrollbar)==null||a.setContainerVisible(r)}positionAt_(r,a,f,S){let k;(k=this.svgGroup_)==null||k.setAttribute("width",`${r}`);let j;(j=this.svgGroup_)==null||j.setAttribute("height",`${a}`),this.workspace_.setCachedParentSvgSize(r,a),this.svgGroup_&&q(this.svgGroup_,"translate("+f+"px,"+S+"px)"),(r=this.workspace_.scrollbar)&&(r.setOrigin(f,S),r.resize(),r.hScroll&&r.hScroll.setPosition(r.hScroll.position.x,r.hScroll.position.y),r.vScroll&&r.vScroll.setPosition(r.vScroll.position.x,r.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const r of this.listeners)it(r);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(r){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof r=="string"&&(r=this.getDynamicCategoryContents(r)),this.setVisible(!0),r=Tt(r),r=this.createFlyoutInfo(r),Ei(this.workspace_),this.layout_(r.contents,r.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(r){const a=[],f=[];this.permanentlyDisabled.length=0;const S=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const k of r){if("custom"in k){r=this.getDynamicCategoryContents(k.custom),r=Tt(r);const{contents:j,gaps:_e}=this.createFlyoutInfo(r);a.push(...j),f.push(..._e)}switch(k.kind.toUpperCase()){case"BLOCK":r=k;const j=this.createFlyoutBlock(r);a.push({type:In.BLOCK,block:j}),this.addBlockGap(r,f,S);break;case"SEP":this.addSeparatorGap(k,f,S);break;case"LABEL":r=this.createButton(k,!0),a.push({type:In.BUTTON,button:r}),f.push(S);break;case"BUTTON":r=this.createButton(k,!1),a.push({type:In.BUTTON,button:r}),f.push(S)}}return{contents:a,gaps:f}}getDynamicCategoryContents(r){if(r=this.workspace_.targetWorkspace.getToolboxCategoryCallback(r),typeof r!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return r(this.workspace_.targetWorkspace)}createButton(r,a){return new Vt(this.workspace_,this.targetWorkspace,r,a)}createFlyoutBlock(r){let a;return r.blockxml?(r=typeof r.blockxml=="string"?t.textToDom$$module$build$src$core$utils$xml(r.blockxml):r.blockxml,(a=this.getRecycledBlock(r.getAttribute("type")))||(a=ro(r,this.workspace_))):(a=this.getRecycledBlock(r.type),a||(r.enabled===void 0&&(r.enabled=r.disabled!=="true"&&r.disabled!==!0),a=$i(r,this.workspace_))),a.isEnabled()||this.permanentlyDisabled.push(a),a}getRecycledBlock(r){let a=-1;for(let f=0;f<this.recycledBlocks.length;f++)if(this.recycledBlocks[f].type===r){a=f;break}return a===-1?void 0:this.recycledBlocks.splice(a,1)[0]}addBlockGap(r,a,f){let S;r.gap?S=parseInt(String(r.gap)):r.blockxml&&(r=typeof r.blockxml=="string"?t.textToDom$$module$build$src$core$utils$xml(r.blockxml):r.blockxml,S=parseInt(r.getAttribute("gap"))),a.push(!S||isNaN(S)?f:S)}addSeparatorGap(r,a,f){r=parseInt(String(r.gap)),!isNaN(r)&&0<a.length?a[a.length-1]=r:a.push(f)}clearOldBlocks(){var r=this.workspace_.getTopBlocks(!1);for(let f=0,S;S=r[f];f++)this.blockIsRecyclable_(S)?this.recycleBlock(S):S.dispose(!1,!1);for(r=0;r<this.mats.length;r++){const f=this.mats[r];f&&(cd(f),pt(f))}this.mats.length=0;for(let f=0,S;S=this.buttons_[f];f++)S.dispose();this.buttons_.length=0;let a;(a=this.workspace_.getPotentialVariableMap())==null||a.clear()}emptyRecycledBlocks(){for(let r=0;r<this.recycledBlocks.length;r++)this.recycledBlocks[r].dispose();this.recycledBlocks=[]}blockIsRecyclable_(r){return!1}recycleBlock(r){const a=r.getRelativeToSurfaceXY();r.moveBy(-a.x,-a.y),this.recycledBlocks.push(r)}addBlockListeners_(r,a,f){this.listeners.push(Ce(r,"pointerdown",null,this.blockMouseDown(a))),this.listeners.push(Ce(f,"pointerdown",null,this.blockMouseDown(a))),this.listeners.push(je(r,"pointerenter",a,()=>{this.targetWorkspace.isDragging()||a.addSelect()})),this.listeners.push(je(r,"pointerleave",a,()=>{this.targetWorkspace.isDragging()||a.removeSelect()})),this.listeners.push(je(f,"pointerenter",a,()=>{this.targetWorkspace.isDragging()||a.addSelect()})),this.listeners.push(je(f,"pointerleave",a,()=>{this.targetWorkspace.isDragging()||a.removeSelect()}))}blockMouseDown(r){return a=>{const f=this.targetWorkspace.getGesture(a);f&&(f.setStartBlock(r),f.handleFlyoutStart(a,this))}}onMouseDown(r){const a=this.targetWorkspace.getGesture(r);a&&a.handleFlyoutStart(r,this)}isBlockCreatable(r){return r.isEnabled()}createBlock(r){let a=null;t.disable$$module$build$src$core$events$utils();var f=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{a=this.placeNewBlock(r)}finally{t.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),r=Xl(this.targetWorkspace,f),ie()){for(t.setGroup$$module$build$src$core$events$utils(!0),f=0;f<r.length;f++){const S=r[f];pe(new(ke(mo))(S))}pe(new(ke(t.CREATE$$module$build$src$core$events$utils))(a))}return this.autoClose?this.hide():this.filterForCapacity(),a}initFlyoutButton_(r,a,f){const S=r.createDom();r.moveTo(a,f),r.show(),this.listeners.push(Ce(S,"pointerdown",this,this.onMouseDown)),this.buttons_.push(r)}createRect_(r,a,f,S,k){return a=re(Ge.RECT,{"fill-opacity":0,x:a,y:f,height:S.height,width:S.width}),a.tooltip=r,Fi(a),this.workspace_.getCanvas().insertBefore(a,r.getSvgRoot()),this.rectMap_.set(r,a),this.mats[k]=a}moveRectToBlock_(r,a){const f=a.getHeightWidth();r.setAttribute("width",String(f.width)),r.setAttribute("height",String(f.height)),a=a.getRelativeToSurfaceXY(),r.setAttribute("y",String(a.y)),r.setAttribute("x",String(this.RTL?a.x-f.width:a.x))}filterForCapacity(){const r=this.workspace_.getTopBlocks(!1);for(let a=0,f;f=r[a];a++)if(this.permanentlyDisabled.indexOf(f)===-1){const S=this.targetWorkspace.isCapacityAvailable(H(f));for(;f;)f.setEnabled(S),f=f.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(r){var a=this.targetWorkspace;if(!r.getSvgRoot())throw Error("oldBlock is not rendered");const f=xi(r);return a.setResizesEnabled(!1),a=zn(f,a),this.positionNewBlock(r,a),a}positionNewBlock(r,a){const f=this.targetWorkspace;var S=f.getOriginOffsetInPixels(),k=this.workspace_.getOriginOffsetInPixels();r=r.getRelativeToSurfaceXY(),r.scale(this.workspace_.scale),k=fn.sum(k,r),S=fn.difference(k,S),S.scale(1/f.scale),a.moveTo(new fn(S.x,S.y))}};un.FlyoutItemType=In;var Gn=class extends un{constructor(r){super(r),this.horizontalLayout=!0}setMetrics_(r){if(this.isVisible()){var a=this.workspace_.getMetricsManager(),f=a.getScrollMetrics(),S=a.getViewMetrics();a=a.getAbsoluteMetrics(),typeof r.x=="number"&&(this.workspace_.scrollX=-(f.left+(f.width-S.width)*r.x)),this.workspace_.translate(this.workspace_.scrollX+a.left,this.workspace_.scrollY+a.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var r=this.targetWorkspace.getMetricsManager();const a=r.getAbsoluteMetrics(),f=r.getViewMetrics();r=r.getToolboxMetrics();const S=this.toolboxPosition_===hr.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?S?r.height:f.height-this.height_:S?0:f.height:S?0:f.height+a.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var r=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=r.width,this.setBackgroundPath(r.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),r=this.getX();var a=this.getY();this.positionAt_(this.width_,this.height_,r,a)}}setBackgroundPath(r,a){const f=this.toolboxPosition_===hr.TOP,S=["M 0,"+(f?0:this.CORNER_RADIUS)];f?(S.push("h",r+2*this.CORNER_RADIUS),S.push("v",a),S.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),S.push("h",-r),S.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(S.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),S.push("h",r),S.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),S.push("v",a),S.push("h",-r-2*this.CORNER_RADIUS)),S.push("z"),this.svgBackground_.setAttribute("d",S.join(" "))}scrollToStart(){let r;(r=this.workspace_.scrollbar)==null||r.setX(this.RTL?1/0:0)}wheel_(r){var a=yt(r);if(a=a.x||a.y){const f=this.workspace_.getMetricsManager(),S=f.getScrollMetrics();a=f.getViewMetrics().left-S.left+a;let k;(k=this.workspace_.scrollbar)==null||k.setX(a),ql(),il()}r.preventDefault(),r.stopPropagation()}layout_(r,a){this.workspace_.scale=this.targetWorkspace.scale;const f=this.MARGIN;let S=f+this.tabWidth_;this.RTL&&(r=r.reverse());for(let Ue=0,Wt;Wt=r[Ue];Ue++)if(Wt.type==="block"){var k=Wt.block,j=k.getDescendants(!1);for(let _l=0,Ka;Ka=j[_l];_l++)Ka.isInFlyout=!0;j=k.getSvgRoot();const Hn=k.getHeightWidth();var _e=k.outputConnection?this.tabWidth_:0;_e=this.RTL?S+Hn.width:S-_e,k.moveBy(_e,f),_e=this.createRect_(k,_e,f,Hn,Ue),S+=Hn.width+a[Ue],this.addBlockListeners_(j,k,_e)}else Wt.type==="button"&&(k=Wt.button,this.initFlyoutButton_(k,S,f),S+=k.width+a[Ue])}isDragTowardWorkspace(r){r=Math.atan2(r.y,r.x)/Math.PI*180;const a=this.dragAngleRange_;return r<90+a&&r>90-a||r>-90-a&&r<-90+a}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const r=this.svgGroup_.getBoundingClientRect(),a=r.top;return this.toolboxPosition_===hr.TOP?new Ri(-1e9,a+r.height,-1e9,1e9):new Ri(a,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let r=0;const a=this.workspace_.getTopBlocks(!1);for(let S=0,k;k=a[S];S++)r=Math.max(r,k.getHeightWidth().height);const f=this.buttons_;for(let S=0,k;k=f[S];S++)r=Math.max(r,k.height);if(r+=1.5*this.MARGIN,r*=this.workspace_.scale,r+=Sa.scrollbarThickness,this.height_!==r){for(let S=0,k;k=a[S];S++)this.rectMap_.has(k)&&this.moveRectToBlock_(this.rectMap_.get(k),k);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==hr.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+r),this.height_=r,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};i(Bt.FLYOUTS_HORIZONTAL_TOOLBOX,Ol,Gn);var Jn=class extends un{constructor(r){super(r)}setMetrics_(r){if(this.isVisible()){var a=this.workspace_.getMetricsManager(),f=a.getScrollMetrics(),S=a.getViewMetrics();a=a.getAbsoluteMetrics(),typeof r.y=="number"&&(this.workspace_.scrollY=-(f.top+(f.height-S.height)*r.y)),this.workspace_.translate(this.workspace_.scrollX+a.left,this.workspace_.scrollY+a.top)}}getX(){if(!this.isVisible())return 0;var r=this.targetWorkspace.getMetricsManager();const a=r.getAbsoluteMetrics(),f=r.getViewMetrics();return r=r.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===hr.LEFT?r.width:f.width-this.width_:this.toolboxPosition_===hr.LEFT?0:f.width:this.toolboxPosition_===hr.LEFT?0:f.width+a.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var r=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=r.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,r.height-2*this.CORNER_RADIUS),r=this.getX();var a=this.getY();this.positionAt_(this.width_,this.height_,r,a)}}setBackgroundPath(r,a){const f=this.toolboxPosition_===hr.RIGHT;var S=r+this.CORNER_RADIUS;S=["M "+(f?S:0)+",0"],S.push("h",f?-r:r),S.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,f?0:1,f?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),S.push("v",Math.max(0,a)),S.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,f?0:1,f?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),S.push("h",f?r:-r),S.push("z"),this.svgBackground_.setAttribute("d",S.join(" "))}scrollToStart(){let r;(r=this.workspace_.scrollbar)==null||r.setY(0)}wheel_(r){var a=yt(r);if(a.y){const f=this.workspace_.getMetricsManager(),S=f.getScrollMetrics();a=f.getViewMetrics().top-S.top+a.y;let k;(k=this.workspace_.scrollbar)==null||k.setY(a),ql(),il()}r.preventDefault(),r.stopPropagation()}layout_(r,a){this.workspace_.scale=this.targetWorkspace.scale;var f=this.MARGIN;const S=this.RTL?f:f+this.tabWidth_;for(let Ue=0,Wt;Wt=r[Ue];Ue++)if(Wt.type==="block"){var k=Wt.block,j=k.getDescendants(!1);for(let _l=0,Ka;Ka=j[_l];_l++)Ka.isInFlyout=!0;j=k.getSvgRoot();const Hn=k.getHeightWidth();var _e=k.outputConnection?S-this.tabWidth_:S;k.moveBy(_e,f),_e=this.createRect_(k,this.RTL?_e-Hn.width:_e,f,Hn,Ue),this.addBlockListeners_(j,k,_e),f+=Hn.height+a[Ue]}else Wt.type==="button"&&(k=Wt.button,this.initFlyoutButton_(k,S,f),f+=k.height+a[Ue])}isDragTowardWorkspace(r){r=Math.atan2(r.y,r.x)/Math.PI*180;const a=this.dragAngleRange_;return r<a&&r>-a||r<-180+a||r>180-a}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const r=this.svgGroup_.getBoundingClientRect(),a=r.left;return this.toolboxPosition_===hr.LEFT?new Ri(-1e9,1e9,-1e9,a+r.width):new Ri(-1e9,1e9,a,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let r=0;var a=this.workspace_.getTopBlocks(!1);for(let S=0,k;k=a[S];S++){var f=k.getHeightWidth().width;k.outputConnection&&(f-=this.tabWidth_),r=Math.max(r,f)}for(let S=0,k;k=this.buttons_[S];S++)r=Math.max(r,k.width);if(r+=1.5*this.MARGIN+this.tabWidth_,r*=this.workspace_.scale,r+=Sa.scrollbarThickness,this.width_!==r){for(let S=0,k;k=a[S];S++){if(this.RTL){f=k.getRelativeToSurfaceXY().x;let j=r/this.workspace_.scale-this.MARGIN;k.outputConnection||(j-=this.tabWidth_),k.moveBy(j-f,0)}this.rectMap_.has(k)&&this.moveRectToBlock_(this.rectMap_.get(k),k)}if(this.RTL)for(let S=0,k;k=this.buttons_[S];S++)a=k.getPosition().y,k.moveTo(r/this.workspace_.scale-k.width-this.MARGIN-this.tabWidth_,a);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==hr.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+r,this.targetWorkspace.scrollY),this.width_=r,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};Jn.registryName="verticalFlyout",i(Bt.FLYOUTS_VERTICAL_TOOLBOX,Ol,Jn);var oa;t.CodeGenerator$$module$build$src$core$generator=class{constructor(r){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=r,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(r){r||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),r=I());var a=[];this.init(r),r=r.getTopBlocks(!0);for(let f=0,S;S=r[f];f++){let k=this.blockToCode(S);Array.isArray(k)&&(k=k[0]),k&&(S.outputConnection&&(k=this.scrubNakedValue(k),this.STATEMENT_PREFIX&&!S.suppressPrefixSuffix&&(k=this.injectId(this.STATEMENT_PREFIX,S)+k),this.STATEMENT_SUFFIX&&!S.suppressPrefixSuffix&&(k+=this.injectId(this.STATEMENT_SUFFIX,S))),a.push(k))}return a=a.join(`
`),a=this.finish(a),a=a.replace(/^\s+\n/,""),a=a.replace(/\n\s+$/,`
`),a=a.replace(/[ \t]+\n/g,`
`)}prefixLines(r,a){return a+r.replace(/(?!\n$)\n/g,`
`+a)}allNestedComments(r){const a=[];r=r.getDescendants(!0);for(let f=0;f<r.length;f++){const S=r[f].getCommentText();S&&a.push(S)}return a.length&&a.push(""),a.join(`
`)}blockToCode(r,a){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!r)return"";if(!r.isEnabled())return a?"":this.blockToCode(r.getNextBlock());if(r.isInsertionMarker())return a?"":this.blockToCode(r.getChildren(!1)[0]);var f=this.forBlock[r.type];if(!f&&this[r.type]&&(xe("block generator functions on CodeGenerator objects","10.0","11.0","the .forBlock[blockType] dictionary"),f=this[r.type]),typeof f!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${r.type}".`);if(f=f.call(r,r,this),Array.isArray(f)){if(!r.outputConnection)throw TypeError("Expecting string from statement block: "+r.type);return[this.scrub_(r,f[0],a),f[1]]}if(typeof f=="string")return this.STATEMENT_PREFIX&&!r.suppressPrefixSuffix&&(f=this.injectId(this.STATEMENT_PREFIX,r)+f),this.STATEMENT_SUFFIX&&!r.suppressPrefixSuffix&&(f+=this.injectId(this.STATEMENT_SUFFIX,r)),this.scrub_(r,f,a);if(f===null)return"";throw SyntaxError("Invalid code generated: "+f)}valueToCode(r,a,f){if(isNaN(f))throw TypeError("Expecting valid order from block: "+r.type);var S=r.getInputTargetBlock(a);if(!S||(a=this.blockToCode(S),a===""))return"";if(!Array.isArray(a))throw TypeError(`Expecting tuple from value block: ${S.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(r=a[0],a=a[1],isNaN(a))throw TypeError("Expecting valid order from value block: "+S.type);if(!r)return"";S=!1;var k=Math.floor(f);const j=Math.floor(a);if(k<=j&&(k!==j||k!==0&&k!==99)){for(S=!0,k=0;k<this.ORDER_OVERRIDES.length;k++)if(this.ORDER_OVERRIDES[k][0]===f&&this.ORDER_OVERRIDES[k][1]===a){S=!1;break}}return S&&(r="("+r+")"),r}statementToCode(r,a){if(r=r.getInputTargetBlock(a),a=this.blockToCode(r),typeof a!="string")throw TypeError("Expecting code from statement block: "+(r&&r.type));return a&&(a=this.prefixLines(a,this.INDENT)),a}addLoopTrap(r,a){return this.INFINITE_LOOP_TRAP&&(r=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,a),this.INDENT)+r),this.STATEMENT_SUFFIX&&!a.suppressPrefixSuffix&&(r=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,a),this.INDENT)+r),this.STATEMENT_PREFIX&&!a.suppressPrefixSuffix&&(r+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,a),this.INDENT)),r}injectId(r,a){return a=a.id.replace(/\$/g,"$$$$"),r.replace(/%1/g,"'"+a+"'")}addReservedWords(r){this.RESERVED_WORDS_+=r+","}provideFunction_(r,a){if(!this.definitions_[r]){const f=this.nameDB_.getDistinctName(r,t.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[r]=f,Array.isArray(a)&&(a=a.join(`
`)),a=a.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,f);let S;for(;S!==a;)S=a,a=a.replace(/^(( {2})*) {2}/gm,"$1\0");a=a.replace(/\0/g,this.INDENT),this.definitions_[r]=a}return this.functionNames_[r]}getVariableName(r){return this.getName(r,t.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(r){return this.getName(r,t.NameType$$module$build$src$core$names.PROCEDURE)}getName(r,a){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(r,a)}init(r){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(r,a,f){return a}finish(r){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),r}scrubNakedValue(r){return r}},oa={},oa.CodeGenerator=t.CodeGenerator$$module$build$src$core$generator;var Qs=!1,Ls={};Ls.Align=t.Align$$module$build$src$core$inputs$align,Ls.DummyInput=Af,Ls.EndRowInput=dm,Ls.Input=es,Ls.StatementInput=Qh,Ls.ValueInput=t.ValueInput$$module$build$src$core$inputs$value_input,Ls.inputTypes=t.inputTypes$$module$build$src$core$inputs$input_types;var gi="The insertion marker previewer tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Ul=class{constructor(r){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=r.workspace}previewReplacement(r,a,f){t.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=f,f.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(a)&&(a.highlight(),this.staticConn=a)}finally{t.enable$$module$build$src$core$events$utils()}}previewConnection(r,a){if(r!==this.draggedConn||a!==this.staticConn){t.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(r,a)&&(this.markerConn=this.previewMarker(r,a)),this.workspace.getRenderer().shouldHighlightConnection(a)&&a.highlight(),this.draggedConn=r,this.staticConn=a}finally{t.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(r,a){return a.type===Pn.PREVIOUS_STATEMENT||a.type===Pn.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof x)}previewMarker(r,a){const f=r.getSourceBlock(),S=this.createInsertionMarker(f),k=this.getMatchingConnection(f,S,r);if(!k)throw Error("Could not create insertion marker to preview connection");S.queueRender(),Ei(),k.connect(a);const j={x:a.x-k.x,y:a.y-k.y},_e=k.getOffsetInBlock().clone();return pr().then(()=>{S==null||S.positionNearConnection(k,j,_e),S==null||S.getSvgRoot().setAttribute("visibility","visible")}),k}createInsertionMarker(r){const a=this.workspace.newBlock(r.type);if(a.setInsertionMarker(!0),r.saveExtraState){var f=r.saveExtraState(!0);f&&a.loadExtraState&&a.loadExtraState(f)}else r.mutationToDom&&(f=r.mutationToDom())&&a.domToMutation&&a.domToMutation(f);for(f=0;f<r.inputList.length;f++){const S=r.inputList[f];if(S.name===Ig)continue;const k=a.inputList[f];if(!k)throw Error(gi.replace("%1","an input"));for(let j=0;j<S.fieldRow.length;j++){const _e=S.fieldRow[j],Ue=k.fieldRow[j];if(!Ue)throw Error(gi.replace("%1","a field"));Ue.setValue(_e.getValue())}}for(const S of a.getDescendants(!1))S.setInsertionMarker(!0);return a.setCollapsed(r.isCollapsed()),a.setInputsInline(r.getInputsInline()),a.initSvg(),a.getSvgRoot().setAttribute("visibility","hidden"),a}getMatchingConnection(r,a,f){if(r=r.getConnections_(!0),a=a.getConnections_(!0),r.length!==a.length)return null;for(let S=0;S<r.length;S++)if(r[S]===f)return a[S];return null}hidePreview(){t.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{t.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(r){const a=r.getSourceBlock(),f=a.outputConnection;let S;if((S=a.previousConnection)!=null&&S.targetConnection||f!=null&&f.targetConnection)a.unplug(!0);else{let k;(k=r.targetBlock())==null||k.unplug(!1)}a.dispose()}dispose(){this.hidePreview()}};i(Bt.CONNECTION_PREVIEWER,Ol,Ul);var $c=class extends v_{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(r){return super.getCSS_(r).concat([`${r} .blocklyInsertionMarker>.blocklyPathLight,`,`${r} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},Av=class{constructor(r){this.inlineSteps_=this.steps_="",this.info_=r,this.RTL_=this.info_.RTL,r=r.getRenderer(),this.constants_=r.getConstants(),this.highlightConstants_=r.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(r){this.steps_+=Ui(r.xPos,this.info_.startY);for(let a=0,f;f=r.elements[a];a++)lt.isLeftSquareCorner(f)?this.steps_+=this.highlightConstants_.START_POINT:lt.isLeftRoundedCorner(f)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):lt.isPreviousConnection(f)?this.steps_+=this.notchPaths_.pathLeft:lt.isHat(f)?this.steps_+=this.startPaths_.path(this.RTL_):lt.isSpacer(f)&&f.width!==0&&(this.steps_+=Sn("H",f.xPos+f.width-this.highlightOffset));this.steps_+=Sn("H",r.xPos+r.width-this.highlightOffset)}drawJaggedEdge_(r){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+Sn("v",r.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(r){const a=r.getLastInput();if(this.RTL_){const f=r.height-a.connectionHeight;this.steps_+=Xs(a.xPos+a.width-this.highlightOffset,r.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+Sn("v",f)}else this.steps_+=Xs(a.xPos+a.width,r.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(r){const a=r.getLastInput();if(a)if(this.RTL_){const f=r.height-2*this.insideCornerPaths_.height;this.steps_+=Xs(a.xPos,r.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+Sn("v",f)+this.insideCornerPaths_.pathBottom(this.RTL_)+ru(r.width-a.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Xs(a.xPos,r.yPos+r.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+ru(r.width-a.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(r){const a=r.xPos+r.width-this.highlightOffset;r instanceof Wy&&r.followsStatement&&(this.steps_+=Sn("H",a)),this.RTL_&&(this.steps_+=Sn("H",a),r.height>this.highlightOffset&&(this.steps_+=Sn("V",r.yPos+r.height-this.highlightOffset)))}drawBottomRow(r){if(this.RTL_)this.steps_+=Sn("V",r.baseline-this.highlightOffset);else{const a=this.info_.bottomRow.elements[0];lt.isLeftSquareCorner(a)?this.steps_+=Xs(r.xPos+this.highlightOffset,r.baseline-this.highlightOffset):lt.isLeftRoundedCorner(a)&&(this.steps_+=Xs(r.xPos,r.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var r=this.info_.outputConnection;r&&(r=r.connectionOffsetY+r.height,this.RTL_?this.steps_+=Xs(this.info_.startX,r):(this.steps_+=Xs(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=Sn("V",r)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(r=this.info_.topRow,lt.isLeftRoundedCorner(r.elements[0])?this.steps_+=Sn("V",this.outsideCornerPaths_.height):this.steps_+=Sn("V",r.capline+this.highlightOffset))}drawInlineInput(r){const a=this.highlightOffset,f=r.xPos+r.connectionWidth;var S=r.centerline-r.height/2;const k=r.width-r.connectionWidth,j=S+a;this.RTL_?(S=r.connectionOffsetY-a,r=r.height-(r.connectionOffsetY+r.connectionHeight)+a,this.inlineSteps_+=Xs(f-a,j)+Sn("v",S)+this.puzzleTabPaths_.pathDown(this.RTL_)+Sn("v",r)+Sn("h",k)):this.inlineSteps_+=Xs(r.xPos+r.width+a,j)+Sn("v",r.height)+Sn("h",-k)+Xs(f,S+r.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},wF=class extends y_{constructor(r,a){super(r,a),this.highlighter_=new Av(a)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const r=this.block_.pathObject;r.setPath(this.outlinePath_+`
`+this.inlinePath_),r.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&r.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(r){this.highlighter_.drawJaggedEdge_(r),super.drawJaggedEdge_(r)}drawValueInput_(r){this.highlighter_.drawValueInput(r),super.drawValueInput_(r)}drawStatementInput_(r){this.highlighter_.drawStatementInput(r),super.drawStatementInput_(r)}drawRightSideRow_(r){this.highlighter_.drawRightSideRow(r),this.outlinePath_+=Sn("H",r.xPos+r.width)+Sn("V",r.yPos+r.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(r){this.highlighter_.drawInlineInput(r),super.drawInlineInput_(r)}positionInlineInputConnection_(r){const a=r.centerline-r.height/2;if(r.connectionModel){let f=r.xPos+r.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(f*=-1),r.connectionModel.setOffsetInBlock(f,a+r.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(r){const a=r.getLastInput();if(a!=null&&a.connectionModel){let f=r.xPos+r.statementEdge+a.notchOffset;f=this.info_.RTL?-1*f:f+this.constants_.DARK_PATH_OFFSET,a.connectionModel.setOffsetInBlock(f,r.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(r){const a=r.getLastInput();if(a&&a.connectionModel){let f=r.xPos+r.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(f*=-1),a.connectionModel.setOffsetInBlock(f,r.yPos)}}positionNextConnection_(){const r=this.info_.bottomRow;if(r.connection){const a=r.connection,f=a.xPos;a.connectionModel.setOffsetInBlock((this.info_.RTL?-f:f)+this.constants_.DARK_PATH_OFFSET/2,r.baseline+this.constants_.DARK_PATH_OFFSET)}}},$F=class{constructor(r){this.OFFSET=.5,this.constantProvider=r,this.START_POINT=Ui(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const r=this.constantProvider.CORNER_RADIUS,a=this.OFFSET,f=(1-Math.SQRT1_2)*(r+a)-a,S=Ui(f,f)+di("a","0 0,0",r,Vn(-f-a,r-f)),k=di("a","0 0,0",r+a,Vn(r+a,r+a)),j=Ui(f,-f)+di("a","0 0,0",r+a,Vn(r-f,f+a));return{width:r+a,height:r,pathTop(_e){return _e?S:""},pathBottom(_e){return _e?k:j}}}makeOutsideCorner(){const r=this.constantProvider.CORNER_RADIUS,a=this.OFFSET,f=(1-Math.SQRT1_2)*(r-a)+a,S=Ui(f,f)+di("a","0 0,1",r-a,Vn(r-f,-f+a)),k=Ui(a,r)+di("a","0 0,1",r-a,Vn(r,-r+a)),j=-f,_e=Ui(f,j)+di("a","0 0,1",r-a,Vn(-f+a,-j-r));return{height:r,topLeft(Ue){return Ue?S:k},bottomLeft(){return _e}}}makePuzzleTab(){const r=this.constantProvider.TAB_WIDTH,a=this.constantProvider.TAB_HEIGHT,f=Ui(-2,-a+3.4)+ru(-.45*r,-2.1),S=Sn("v",2.5)+Ui(.97*-r,2.5)+zs("q",[Vn(.05*-r,10),Vn(.3*r,9.5)])+Ui(.67*r,-1.9)+Sn("v",2.5),k=Sn("v",-1.5)+Ui(-.92*r,-.5)+zs("q",[Vn(-.19*r,-5.5),Vn(0,-11)])+Ui(.92*r,1),j=Ui(-5,a-.7)+ru(.46*r,-2.1);return{width:r,height:a,pathUp(_e){return _e?f:k},pathDown(_e){return _e?S:j}}}makeNotch(){return{pathLeft:Sn("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:ru(5.1,2.6)+Ui(-10.2,6.8)+ru(5.1,2.6),height:12,width:10.2}}makeStartHat(){const r=this.constantProvider.START_HAT.height,a=Ui(25,-8.7)+zs("c",[Vn(29.7,-6.2),Vn(57.2,-.5),Vn(75,8.7)]),f=zs("c",[Vn(17.8,-9.2),Vn(45.3,-14.9),Vn(75,-8.7)])+Xs(100.5,r+.5);return{path(S){return S?a:f}}}},CF=class extends Hy{constructor(r,a){super(r,a),this.constants_=r,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},AF=class extends __{constructor(r,a){super(r,a),this.constants_=r,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},MF=class extends S0{constructor(r,a){super(r,a),this.renderer_=r}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Qh||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(r,a){this.isInline&&r instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new CF(this.constants_,r)),a.hasInlineInput=!0):r instanceof Qh?(a.elements.push(new AF(this.constants_,r)),a.hasStatement=!0):r instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new bv(this.constants_,r)),a.hasExternalInput=!0):(r instanceof Af||r instanceof dm)&&(a.minHeight=Math.max(a.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),a.hasDummyInput=!0),this.isInline||a.align!==null||(a.align=r.align)}addElemSpacing_(){let r=!1;for(let f=0,S;S=this.rows[f];f++)S.hasExternalInput&&(r=!0);for(let f=0,S;S=this.rows[f];f++){var a=S.elements;if(S.elements=[],S.startsWithElemSpacer()&&S.elements.push(new Vd(this.constants_,this.getInRowSpacing_(null,a[0]))),a.length){for(let k=0;k<a.length-1;k++){S.elements.push(a[k]);const j=this.getInRowSpacing_(a[k],a[k+1]);S.elements.push(new Vd(this.constants_,j))}S.elements.push(a[a.length-1]),S.endsWithElemSpacer()&&(a=this.getInRowSpacing_(a[a.length-1],null),r&&S.hasDummyInput&&(a+=this.constants_.TAB_WIDTH),S.elements.push(new Vd(this.constants_,a)))}}}getInRowSpacing_(r,a){if(!r)return a&&lt.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:a&&lt.isInlineInput(a)?this.constants_.MEDIUM_LARGE_PADDING:a&&lt.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!lt.isInput(r)&&(!a||lt.isStatementInput(a)))return lt.isField(r)&&r.isEditable?this.constants_.MEDIUM_PADDING:lt.isIcon(r)?2*this.constants_.LARGE_PADDING+1:lt.isHat(r)?this.constants_.NO_PADDING:lt.isPreviousOrNextConnection(r)?this.constants_.LARGE_PADDING:lt.isLeftRoundedCorner(r)?this.constants_.MIN_BLOCK_WIDTH:lt.isJaggedEdge(r)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(lt.isInput(r)&&!a){if(lt.isExternalInput(r))return this.constants_.NO_PADDING;if(lt.isInlineInput(r))return this.constants_.LARGE_PADDING;if(lt.isStatementInput(r))return this.constants_.NO_PADDING}if(!lt.isInput(r)&&a&&lt.isInput(a)){if(lt.isField(r)&&r.isEditable){if(lt.isInlineInput(a)||lt.isExternalInput(a))return this.constants_.SMALL_PADDING}else{if(lt.isInlineInput(a)||lt.isExternalInput(a))return this.constants_.MEDIUM_LARGE_PADDING;if(lt.isStatementInput(a))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(lt.isIcon(r)&&a&&!lt.isInput(a))return this.constants_.LARGE_PADDING;if(lt.isInlineInput(r)&&a&&lt.isField(a))return a.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(lt.isLeftSquareCorner(r)&&a){if(lt.isHat(a))return this.constants_.NO_PADDING;if(lt.isPreviousConnection(a))return a.notchOffset;if(lt.isNextConnection(a))return a.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(lt.isLeftRoundedCorner(r)&&a){if(lt.isPreviousConnection(a))return a.notchOffset-this.constants_.CORNER_RADIUS;if(lt.isNextConnection(a))return a.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return lt.isField(r)&&a&&lt.isField(a)&&r.isEditable===a.isEditable||a&&lt.isJaggedEdge(a)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(r,a){return lt.isTopRow(r)&&lt.isBottomRow(a)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:lt.isTopRow(r)||lt.isBottomRow(a)?this.constants_.NO_PADDING:r.hasExternalInput&&a.hasExternalInput?this.constants_.LARGE_PADDING:!r.hasStatement&&a.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:r.hasStatement&&a.hasStatement||!r.hasStatement&&a.hasDummyInput||r.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(r,a){if(lt.isSpacer(a))return r.yPos+a.height/2;if(lt.isBottomRow(r))return r=r.yPos+r.height-r.descenderHeight,lt.isNextConnection(a)?r+a.height/2:r-a.height/2;if(lt.isTopRow(r))return lt.isHat(a)?r.capline-a.height/2:r.capline+a.height/2;let f=r.yPos;return lt.isField(a)||lt.isIcon(a)?(f+=a.height/2,(r.hasInlineInput||r.hasStatement)&&a.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=r.height&&(f+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):f=lt.isInlineInput(a)?f+a.height/2:f+r.height/2,f}alignRowElements_(){if(this.isInline){var r=0,a=new WeakMap,f=null;for(let S=this.rows.length-1,k;k=this.rows[S];S--)a.set(k,r),lt.isInputRow(k)&&(k.hasStatement&&this.alignStatementRow_(k),f&&f.hasStatement&&k.width<f.width?a.set(k,f.width):r=k.hasStatement?k.width:Math.max(r,k.width),f=k);r=0;for(let S=0,k;k=this.rows[S];S++)k.hasStatement?r=this.getDesiredRowWidth_(k):lt.isSpacer(k)?k.width=Math.max(r,a.get(k)):(f=k.width,r=Math.max(r,a.get(k))-f,0<r&&this.addAlignmentPadding_(k,r),r=k.width)}else super.alignRowElements_()}getDesiredRowWidth_(r){return this.isInline&&r.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(r)}finalize_(){let r=0,a=0;for(let S=0,k;k=this.rows[S];S++){k.yPos=a,k.xPos=this.startX,a+=k.height,r=Math.max(r,k.widthWithConnectedBlocks);var f=a-this.topRow.ascenderHeight;k===this.bottomRow&&f<this.constants_.MIN_BLOCK_HEIGHT&&(f=this.constants_.MIN_BLOCK_HEIGHT-f,this.bottomRow.height+=f,a+=f),this.recordElemPositions_(k)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(f=this.block_.nextConnection.targetBlock())&&(r=Math.max(r,f.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=a-this.bottomRow.descenderHeight,this.widthWithChildren=r+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=a+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},IF=class extends E0{constructor(r,a,f){super(r,a,f),this.constants=f,this.colourDark="#000000",this.svgPathDark=re(Ge.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=re(Ge.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(r){this.svgPath.setAttribute("d",r),this.svgPathDark.setAttribute("d",r)}setHighlightPath(r){this.svgPathLight.setAttribute("d",r)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(r){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(r),this.svgPath.setAttribute("stroke","none")}setStyle(r){this.style=r,this.colourDark=zc("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(r){r?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(r){if(r){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(r){super.updateDisabled_(r),r&&this.svgPath.setAttribute("stroke","none")}},RF=class extends S_{constructor(r){super(r),this.highlightConstants=null}init(r,a){super.init(r,a),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(r,a){super.refreshDom(r,a),this.getHighlightConstants().init()}makeConstants_(){return new $c}makeRenderInfo_(r){return new MF(this,r)}makeDrawer_(r,a){return new wF(r,a)}makePathObject(r,a){return new IF(r,a,this.getConstants())}makeHighlightConstants_(){return new $F(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};Ii("geras",RF);var O0={};O0.ConstantProvider=$c,O0.Drawer=wF,O0.HighlightConstantProvider=$F,O0.Highlighter=Av,O0.InlineInput=CF,O0.PathObject=IF,O0.RenderInfo=MF,O0.Renderer=RF,O0.StatementInput=AF;var kF=class extends v_{constructor(){super(),xe("Blockly.minimalist.ConstantProvider","v10","v11","Blockly.blockRendering.ConstantProvider")}},OF=class extends y_{constructor(r,a){super(r,a),xe("Blockly.minimalist.Drawer","v10","v11","Blockly.blockRendering.Drawer")}},LF=class extends S0{constructor(r,a){super(r,a),xe("Blockly.minimalist.RenderInfo","v10","v11","Blockly.blockRendering.RenderInfo")}getRenderer(){return this.renderer_}},DF=class extends S_{constructor(r){super(r),xe("Blockly.minimalist.Renderer","v10","v11","Blockly.blockRendering.Renderer")}makeConstants_(){return new kF}makeRenderInfo_(r){return new LF(this,r)}makeDrawer_(r,a){return new OF(r,a)}};Ii("minimalist",DF);var ZE={};ZE.ConstantProvider=kF,ZE.Drawer=OF,ZE.RenderInfo=LF,ZE.Renderer=DF;var NF=class extends S0{constructor(r,a){super(r,a)}getRenderer(){return this.renderer_}addElemSpacing_(){let r=!1;for(var a=0;a<this.rows.length;a++)if(this.rows[a].hasExternalInput){r=!0;break}for(a=0;a<this.rows.length;a++){const S=this.rows[a];var f=S.elements;if(S.elements=[],S.startsWithElemSpacer()&&S.elements.push(new Vd(this.constants_,this.getInRowSpacing_(null,f[0]))),f.length){for(let k=0;k<f.length-1;k++){S.elements.push(f[k]);const j=this.getInRowSpacing_(f[k],f[k+1]);S.elements.push(new Vd(this.constants_,j))}S.elements.push(f[f.length-1]),S.endsWithElemSpacer()&&(f=this.getInRowSpacing_(f[f.length-1],null),r&&S.hasDummyInput&&(f+=this.constants_.TAB_WIDTH),S.elements.push(new Vd(this.constants_,f)))}}}getInRowSpacing_(r,a){if(!r)return a&&lt.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:a&&lt.isInlineInput(a)?this.constants_.MEDIUM_LARGE_PADDING:a&&lt.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!lt.isInput(r)&&!a)return lt.isField(r)&&r.isEditable?this.constants_.MEDIUM_PADDING:lt.isIcon(r)?2*this.constants_.LARGE_PADDING+1:lt.isHat(r)?this.constants_.NO_PADDING:lt.isPreviousOrNextConnection(r)?this.constants_.LARGE_PADDING:lt.isLeftRoundedCorner(r)?this.constants_.MIN_BLOCK_WIDTH:lt.isJaggedEdge(r)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(lt.isInput(r)&&!a){if(lt.isExternalInput(r))return this.constants_.NO_PADDING;if(lt.isInlineInput(r))return this.constants_.LARGE_PADDING;if(lt.isStatementInput(r))return this.constants_.NO_PADDING}if(!lt.isInput(r)&&a&&lt.isInput(a)){if(lt.isField(r)&&r.isEditable){if(lt.isInlineInput(a)||lt.isExternalInput(a))return this.constants_.SMALL_PADDING}else{if(lt.isInlineInput(a)||lt.isExternalInput(a))return this.constants_.MEDIUM_LARGE_PADDING;if(lt.isStatementInput(a))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(lt.isIcon(r)&&a&&!lt.isInput(a))return this.constants_.LARGE_PADDING;if(lt.isInlineInput(r)&&a&&lt.isField(a))return a.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(lt.isLeftSquareCorner(r)&&a){if(lt.isHat(a))return this.constants_.NO_PADDING;if(lt.isPreviousConnection(a)||lt.isNextConnection(a))return a.notchOffset}return lt.isLeftRoundedCorner(r)&&a?a.notchOffset-this.constants_.CORNER_RADIUS:lt.isField(r)&&a&&lt.isField(a)&&r.isEditable===a.isEditable||a&&lt.isJaggedEdge(a)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(r,a){return lt.isTopRow(r)&&lt.isBottomRow(a)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:lt.isTopRow(r)||lt.isBottomRow(a)?this.constants_.NO_PADDING:r.hasExternalInput&&a.hasExternalInput?this.constants_.LARGE_PADDING:!r.hasStatement&&a.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:r.hasStatement&&a.hasStatement||r.hasDummyInput||a.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(r,a){if(lt.isSpacer(a))return r.yPos+a.height/2;if(lt.isBottomRow(r))return r=r.yPos+r.height-r.descenderHeight,lt.isNextConnection(a)?r+a.height/2:r-a.height/2;if(lt.isTopRow(r))return lt.isHat(a)?r.capline-a.height/2:r.capline+a.height/2;let f=r.yPos;return f=lt.isField(a)&&r.hasStatement?f+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+a.height/2):f+r.height/2}finalize_(){let r=0,a=0;for(var f=0;f<this.rows.length;f++){const k=this.rows[f];k.yPos=a,k.xPos=this.startX,a+=k.height,r=Math.max(r,k.widthWithConnectedBlocks);var S=a-this.topRow.ascenderHeight;k===this.bottomRow&&S<this.constants_.MIN_BLOCK_HEIGHT&&(S=this.constants_.MIN_BLOCK_HEIGHT-S,this.bottomRow.height+=S,a+=S),this.recordElemPositions_(k)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(f=this.block_.nextConnection.targetBlock())&&(r=Math.max(r,f.getHeightWidth().width)),this.bottomRow.baseline=a-this.bottomRow.descenderHeight,this.widthWithChildren=r+this.startX,this.height=a,this.startY=this.topRow.capline}},BF=class extends S_{constructor(r){super(r)}makeRenderInfo_(r){return new NF(this,r)}};Ii("thrasos",BF);var uk={};uk.RenderInfo=NF,uk.Renderer=BF;var kY={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},OY={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},LY=new Mg("zelos",kY,OY),DY={Classic:mv,Zelos:LY},ck=class{constructor(r,a,f){this.id_=r.toolboxitemid||oe(),this.level_=(this.parent_=f||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=r,this.parentToolbox_=a,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(r){}},kg=class extends ck{constructor(r,a,f){super(r,a,f),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(r){if("custom"in r)this.flyoutItems_=r.custom;else if(r=r.contents)for(let a=0;a<r.length;a++){const f=r[a];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(f)}}parseCategoryDef_(r){this.name_="name"in r?Gr(r.name):"",this.colour_=this.getColour_(r),Object.assign(this.cssConfig_,r.cssconfig||r.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),ai(this.htmlDiv_,nh.TREEITEM),Sr(this.htmlDiv_,bo.SELECTED,!1),Sr(this.htmlDiv_,bo.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),ai(this.iconDom_,nh.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const r=this.labelDom_.getAttribute("id");return r&&Sr(this.htmlDiv_,bo.LABELLEDBY,r),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const r=document.createElement("div"),a=this.cssConfig_.container;return a&&Be(r,a),r}createRowContainer_(){const r=document.createElement("div");var a=this.cssConfig_.row;return a&&Be(r,a),a=`${kg.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?r.style.paddingRight=a:r.style.paddingLeft=a,r}createRowContentsContainer_(){const r=document.createElement("div"),a=this.cssConfig_.rowcontentcontainer;return a&&Be(r,a),r}createIconDom_(){const r=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const a=this.cssConfig_.icon;a&&Be(r,a)}return r.style.display="inline-block",r}createLabelDom_(r){const a=document.createElement("span");return a.setAttribute("id",this.getId()+".label"),a.textContent=r,(r=this.cssConfig_.label)&&Be(a,r),a}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(r){r&&(r=kg.borderWidth+"px solid "+(r||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=r:this.rowDiv_.style.borderLeft=r)}getColour_(r){const a=r.categorystyle||r.categoryStyle;if((r=r.colour)&&a)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(a)return this.getColourfromStyle_(a);if(r)return this.parseColour_(r)}return""}getColourfromStyle_(r){var a=this.workspace_.getTheme();if(r&&a){if((a=a.categoryStyles[r])&&a.colour)return this.parseColour_(a.colour);console.warn('Style "'+r+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(r){if(r=Gr(r),r==null||r==="")return"";var a=Number(r);return isNaN(a)?(a=Zo(r))?a:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+r),""):pc(a)}openIcon_(r){if(r){var a=this.cssConfig_.closedicon;a&&dt(r,a),(a=this.cssConfig_.openicon)&&Be(r,a)}}closeIcon_(r){if(r){var a=this.cssConfig_.openicon;a&&dt(r,a),(a=this.cssConfig_.closedicon)&&Be(r,a)}}setVisible_(r){this.htmlDiv_.style.display=r?"block":"none",this.isHidden_=!r,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let r=this;for(;r.getParent();)if(r=r.getParent(),!r.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(r){}setSelected(r){if(this.rowDiv_){var a=this.cssConfig_.selected;if(r){const f=this.parseColour_(kg.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||f,a&&Be(this.rowDiv_,a)}else this.rowDiv_.style.backgroundColor="",a&&bt(this.rowDiv_,a);Sr(this.htmlDiv_,bo.SELECTED,r)}}setDisabled(r){this.isDisabled_=r,this.getDiv().setAttribute("disabled",`${r}`),r?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(r){this.flyoutItems_=[],this.toolboxItemDef_=typeof r=="string"?{kind:this.toolboxItemDef_.kind,custom:r,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Tt(r),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){pt(this.htmlDiv_)}};kg.registrationName="category",kg.nestedPadding=19,kg.borderWidth=8,kg.defaultBackgroundColour="#57e",$t(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),i(Bt.TOOLBOX_ITEM,kg.registrationName,kg);var ex=class extends ck{constructor(r,a){super(r,a),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,r.cssconfig||r.cssConfig)}init(){this.createDom_()}createDom_(){const r=document.createElement("div"),a=this.cssConfig_.container;return a&&Be(r,a),this.htmlDiv_=r}getDiv(){return this.htmlDiv_}dispose(){pt(this.htmlDiv_)}};ex.registrationName="sep",$t(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),i(Bt.TOOLBOX_ITEM,ex.registrationName,ex);var gT=class extends kg{constructor(r,a,f){super(r,a,f),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const r=super.makeDefaultCssConfig_();return r.contents="blocklyToolboxContents",r}parseContents_(r){if("custom"in r)this.flyoutItems_=r.custom;else{const a=r.contents;if(a){this.flyoutItems_=[],r=!0;for(let f=0;f<a.length;f++){const S=a[f];!u(Bt.TOOLBOX_ITEM,S.kind)||S.kind.toLowerCase()===ex.registrationName&&r?(this.flyoutItems_.push(S),r=!0):(this.createToolboxItem_(S),r=!1)}}}}createToolboxItem_(r){let a=r.kind;a.toUpperCase()==="CATEGORY"&&tr(r)&&(a=gT.registrationName),r=new(d(Bt.TOOLBOX_ITEM,a))(r,this.parentToolbox_,this),this.toolboxItems_.push(r)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const r=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(r),ai(this.subcategoriesDiv_,nh.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),Sr(this.htmlDiv_,bo.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const r=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const a=this.cssConfig_.icon;a&&Be(r,a),r.style.visibility="visible"}return r.style.display="inline-block",r}createSubCategoriesDom_(r){const a=document.createElement("div");a.style.display="none";var f=this.cssConfig_.contents;for(f&&Be(a,f),f=0;f<r.length;f++){const S=r[f];S.init();const k=S.getDiv();if(a.appendChild(k),S.getClickTarget){let j;(j=S.getClickTarget())==null||j.setAttribute("id",S.getId())}}return a}setExpanded(r){if(this.expanded_!==r){if(this.expanded_=r)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let a;(a=this.parentToolbox_.getFlyout())==null||a.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}Sr(this.htmlDiv_,bo.EXPANDED,r),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(r){this.htmlDiv_.style.display=r?"block":"none";const a=this.getChildToolboxItems();for(let f=0;f<a.length;f++)a[f].setVisible_(r);this.isHidden_=!r,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(r){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};gT.registrationName="collapsibleCategory",i(Bt.TOOLBOX_ITEM,gT.registrationName,gT);var PF=class extends Ev{constructor(r){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=r,this.toolboxDef_=r.options.languageTree||{contents:[]},this.horizontalLayout_=r.options.horizontalLayout,this.RTL=r.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=r.options.toolboxPosition}onShortcut(r){return!1}init(){var r=this.workspace_;const a=r.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),Ke(this.flyout_.createDom("svg"),a),this.setVisible(!0),this.flyout_.init(r),this.render(this.toolboxDef_),r=r.getThemeManager(),r.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),r.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[pl.Capability.AUTOHIDEABLE,pl.Capability.DELETE_AREA,pl.Capability.DRAG_TARGET]})}createDom_(r){r=r.getParentSvg();const a=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,ai(this.contentsDiv_,nh.TREE),a.appendChild(this.contentsDiv_),r.parentNode.insertBefore(a,r),this.attachEvents_(a,this.contentsDiv_),a}createContainer_(){const r=document.createElement("div");return r.setAttribute("layout",this.isHorizontal()?"h":"v"),Be(r,"blocklyToolboxDiv"),Be(r,"blocklyNonSelectable"),r.setAttribute("dir",this.RTL?"RTL":"LTR"),r}createContentsContainer_(){const r=document.createElement("div");return Be(r,"blocklyToolboxContents"),this.isHorizontal()&&(r.style.flexDirection="row"),r}attachEvents_(r,a){r=Ce(r,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(r),a=Ce(a,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(a)}onClick_(r){if(vt(r)||r.target===this.HtmlDiv)I().hideChaff(!1);else{var a=r.target.getAttribute("id");a&&(a=this.getToolboxItemById(a),a.isSelectable()&&(this.setSelectedItem(a),a.onClick(r))),I().hideChaff(!0)}tt()}onKeyDown_(r){let a=!1;switch(r.key){case"ArrowDown":a=this.selectNext_();break;case"ArrowUp":a=this.selectPrevious_();break;case"ArrowLeft":a=this.selectParent_();break;case"ArrowRight":a=this.selectChild_();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),a=!0);break;default:a=!1}!a&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(a=this.selectedItem_.onKeyDown(r)),a&&r.preventDefault()}createFlyout_(){const r=this.workspace_,a=new zi({parentWorkspace:r,rtl:r.RTL,oneBasedIndex:r.options.oneBasedIndex,horizontalLayout:r.horizontalLayout,renderer:r.options.renderer,rendererOverrides:r.options.rendererOverrides,move:{scrollbars:!0}});return a.toolboxPosition=r.options.toolboxPosition,new(r.horizontalLayout?y(Bt.FLYOUTS_HORIZONTAL_TOOLBOX,r.options,!0):y(Bt.FLYOUTS_VERTICAL_TOOLBOX,r.options,!0))(a)}render(r){this.toolboxDef_=r;for(let a=0;a<this.contents_.length;a++){const f=this.contents_[a];f&&f.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(r.contents),this.position(),this.handleToolboxItemResize()}renderContents_(r){const a=document.createDocumentFragment();for(let f=0;f<r.length;f++)this.createToolboxItem_(r[f],a);this.contentsDiv_.appendChild(a)}createToolboxItem_(r,a){var f=r.kind;f.toUpperCase()==="CATEGORY"&&tr(r)&&(f=gT.registrationName),(f=d(Bt.TOOLBOX_ITEM,f.toLowerCase()))&&(r=new f(r,this),r.init(),this.addToolboxItem_(r),(f=r.getDiv())&&a.appendChild(f),r.getClickTarget()&&r.getClickTarget().setAttribute("id",r.getId()))}addToolboxItem_(r){if(this.contents_.push(r),this.contentMap_[r.getId()]=r,r.isCollapsible()){r=r.getChildToolboxItems();for(let a=0;a<r.length;a++)this.addToolboxItem_(r[a])}}getToolboxItems(){return this.contents_}addStyle(r){r&&this.HtmlDiv&&Be(this.HtmlDiv,r)}removeStyle(r){r&&this.HtmlDiv&&bt(this.HtmlDiv,r)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var r=this.HtmlDiv.getBoundingClientRect();const a=r.top,f=a+r.height,S=r.left;return r=S+r.width,this.toolboxPosition===hr.TOP?new Ri(-1e7,f,-1e7,1e7):this.toolboxPosition===hr.BOTTOM?new Ri(a,1e7,-1e7,1e7):this.toolboxPosition===hr.LEFT?new Ri(-1e7,1e7,-1e7,r):new Ri(-1e7,1e7,S,1e7)}wouldDelete(r,a){return r instanceof Mf?this.updateWouldDelete_(!r.getParent()&&r.isDeletable()):this.updateWouldDelete_(r.isDeletable()),this.wouldDelete_}onDragEnter(r){this.updateCursorDeleteStyle_(!0)}onDragExit(r){this.updateCursorDeleteStyle_(!1)}onDrop(r){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(r){r!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=r,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(r){const a=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";r?this.addStyle(a):this.removeStyle(a)}getToolboxItemById(r){return this.contentMap_[r]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const r=this.workspace_.getMetrics(),a=this.HtmlDiv;a&&(this.horizontalLayout_?(a.style.left="0",a.style.height="auto",a.style.width="100%",this.height_=a.offsetHeight,this.width_=r.viewWidth,this.toolboxPosition===hr.TOP?a.style.top="0":a.style.bottom="0"):(this.toolboxPosition===hr.RIGHT?a.style.right="0":a.style.left="0",a.style.height="100%",this.width_=a.offsetWidth,this.height_=r.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const r=this.workspace_,a=this.HtmlDiv.getBoundingClientRect();r.translate(this.toolboxPosition===hr.LEFT?r.scrollX+a.width:r.scrollX,this.toolboxPosition===hr.TOP?r.scrollY+a.height:r.scrollY),W(r)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let r=0;r<this.contents_.length;r++){const a=this.contents_[r];a.refreshTheme&&a.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(r){this.isVisible_!==r&&(this.HtmlDiv.style.display=r?"block":"none",this.isVisible_=r,this.workspace_.recordDragTargets())}autoHide(r){!r&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(r){const a=this.selectedItem_;!r&&!a||r&&!cn(r)||(this.shouldDeselectItem_(a,r)&&a!==null&&this.deselectItem_(a),this.shouldSelectItem_(a,r)&&r!==null&&this.selectItem_(a,r),this.updateFlyout_(a,r),this.fireSelectEvent_(a,r))}shouldDeselectItem_(r,a){return r!==null&&(!r.isCollapsible()||r!==a)}shouldSelectItem_(r,a){return a!==null&&a!==r}deselectItem_(r){this.selectedItem_=null,this.previouslySelectedItem_=r,r.setSelected(!1),Sr(this.contentsDiv_,bo.ACTIVEDESCENDANT,"")}selectItem_(r,a){this.selectedItem_=a,this.previouslySelectedItem_=r,a.setSelected(!0),Sr(this.contentsDiv_,bo.ACTIVEDESCENDANT,a.getId())}selectItemByPosition(r){-1<r&&r<this.contents_.length&&(r=this.contents_[r],r.isSelectable()&&this.setSelectedItem(r))}updateFlyout_(r,a){a&&(r!==a||a.isCollapsible())&&a.getContents().length?(this.flyout_.show(a.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(r,a){const f=r&&r.getName();let S=a&&a.getName();r===a&&(S=null),r=new(ke(Va))(f,S,this.workspace_.id),pe(r)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const r=this.selectedItem_;return r.isExpanded()?this.selectNext_():r.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let r=this.contents_.indexOf(this.selectedItem_)+1;if(-1<r&&r<this.contents_.length){let a=this.contents_[r];for(;a&&!a.isSelectable();)a=this.contents_[++r];if(a&&a.isSelectable())return this.setSelectedItem(a),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let r=this.contents_.indexOf(this.selectedItem_)-1;if(-1<r&&r<this.contents_.length){let a=this.contents_[r];for(;a&&!a.isSelectable();)a=this.contents_[--r];if(a&&a.isSelectable())return this.setSelectedItem(a),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var r=0;r<this.contents_.length;r++)this.contents_[r].dispose();for(r=0;r<this.boundEvents_.length;r++)it(this.boundEvents_[r]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),pt(this.HtmlDiv))}};$t(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),i(Bt.TOOLBOX,Ol,PF);var NY="10.4.3",BY=t.Align$$module$build$src$core$inputs$align.LEFT,PY=t.Align$$module$build$src$core$inputs$align.CENTRE,FY=t.Align$$module$build$src$core$inputs$align.RIGHT,UY=Pn.INPUT_VALUE,zY=Pn.OUTPUT_VALUE,HY=Pn.NEXT_STATEMENT,GY=Pn.PREVIOUS_STATEMENT,WY=t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY,VY=hr.TOP,jY=hr.BOTTOM,XY=hr.LEFT,YY=hr.RIGHT;E_.prototype.newBlock=function(r,a){return new x0(this,r,a)},jp.prototype.newBlock=function(r,a){return new Mf(this,r,a)},jp.newTrashcan=function(r){return new oT(r)},Pl.prototype.showContextMenu=function(r){if(!this.workspace.options.readOnly){var a=[];this.isDeletable()&&this.isMovable()&&(a.push(Dh(this)),a.push(Zl(this))),Hu(r,a,this.RTL)}},lm.prototype.newWorkspaceSvg=function(r){return new jp(r)},t.Names$$module$build$src$core$names.prototype.populateProcedures=function(r){r=yh(r),r=r[0].concat(r[1]);for(let a=0;a<r.length;a++)this.getName(r[a][0],t.Names$$module$build$src$core$names.NameType.PROCEDURE)};var KY=Pn,Nt={ALIGN_CENTRE:PY,ALIGN_LEFT:BY,ALIGN_RIGHT:FY};return Nt.ASTNode=Qt,Nt.BasicCursor=x_,Nt.Block=x0,Nt.BlockDragger=R0,Nt.BlockSvg=Mf,Nt.Blocks=Wr,Nt.Bubble=Cs,Nt.BubbleDragger=Xe,Nt.COLLAPSED_FIELD_NAME=Tv,Nt.COLLAPSED_INPUT_NAME=Ig,Nt.COLLAPSE_CHARS=st,Nt.CodeGenerator=t.CodeGenerator$$module$build$src$core$generator,Nt.CollapsibleToolboxCategory=gT,Nt.ComponentManager=pl,Nt.Connection=hs,Nt.ConnectionChecker=Sv,Nt.ConnectionDB=th,Nt.ConnectionType=Pn,Nt.ContextMenu=Fd,Nt.ContextMenuItems=G,Nt.ContextMenuRegistry=ki,Nt.Css=us,Nt.Cursor=Qy,Nt.DELETE_VARIABLE_ID=nn,Nt.DRAG_STACK=Lt,Nt.DUMMY_INPUT=WY,Nt.DeleteArea=Ev,Nt.DragTarget=sT,Nt.DropDownDiv=T,Nt.Events=Yn,Nt.Extensions=Hd,Nt.Field=Hi,Nt.FieldAngle=K,Nt.FieldCheckbox=fe,Nt.FieldColour=Ee,Nt.FieldDropdown=wh,Nt.FieldImage=Rg,Nt.FieldLabel=Ti,Nt.FieldLabelSerializable=Ze,Nt.FieldMultilineInput=et,Nt.FieldNumber=ut,Nt.FieldTextInput=k0,Nt.FieldVariable=Rt,Nt.Flyout=un,Nt.FlyoutButton=Vt,Nt.FlyoutMetricsManager=hn,Nt.Generator=t.CodeGenerator$$module$build$src$core$generator,Nt.Gesture=am,Nt.Grid=By,Nt.HorizontalFlyout=Gn,Nt.INPUT_VALUE=UY,Nt.Input=es,Nt.InsertionMarkerManager=mp,Nt.InsertionMarkerPreviewer=Ul,Nt.Marker=rT,Nt.MarkerManager=xa,Nt.Menu=wg,Nt.MenuItem=Pp,Nt.MetricsManager=A_,Nt.Msg=t.Msg$$module$build$src$core$msg,Nt.NEXT_STATEMENT=HY,Nt.Names=t.Names$$module$build$src$core$names,Nt.OPPOSITE_TYPE=qt,Nt.OUTPUT_VALUE=zY,Nt.Options=zi,Nt.PREVIOUS_STATEMENT=GY,Nt.PROCEDURE_CATEGORY_NAME=b0,Nt.Procedures=Xi,Nt.RENAME_VARIABLE_ID=ln,Nt.RenderedConnection=Zh,Nt.Scrollbar=Sa,Nt.ScrollbarPair=ib,Nt.ShortcutItems=Rf,Nt.ShortcutRegistry=Yi,Nt.TOOLBOX_AT_BOTTOM=jY,Nt.TOOLBOX_AT_LEFT=XY,Nt.TOOLBOX_AT_RIGHT=YY,Nt.TOOLBOX_AT_TOP=VY,Nt.TabNavigateCursor=iT,Nt.Theme=Mg,Nt.ThemeManager=tT,Nt.Themes=DY,Nt.Toolbox=PF,Nt.ToolboxCategory=kg,Nt.ToolboxItem=ck,Nt.ToolboxSeparator=ex,Nt.Tooltip=Ud,Nt.Touch=Et,Nt.Trashcan=oT,Nt.UnattachedFieldError=ko,Nt.VARIABLE_CATEGORY_NAME=Eg,Nt.VARIABLE_DYNAMIC_CATEGORY_NAME=jy,Nt.VERSION=NY,Nt.VariableMap=Ky,Nt.VariableModel=cp,Nt.Variables=gl,Nt.VariablesDynamic=pm,Nt.VerticalFlyout=Jn,Nt.WidgetDiv=dp,Nt.Workspace=E_,Nt.WorkspaceAudio=nT,Nt.WorkspaceComment=eh,Nt.WorkspaceCommentSvg=Pl,Nt.WorkspaceDragger=G1,Nt.WorkspaceSvg=jp,Nt.Xml=ra,Nt.ZoomControls=l0,Nt.blockAnimations=X,Nt.blockRendering=Os,Nt.browserEvents=qc,Nt.bubbles=fm,Nt.bumpObjects=$v,Nt.clipboard=tm,Nt.common=fo,Nt.config=t.config$$module$build$src$core$config,Nt.connectionTypes=KY,Nt.constants=VE,Nt.defineBlocksWithJsonArray=Q,Nt.dialog=hu,Nt.fieldRegistry=v0,Nt.geras=O0,Nt.getMainWorkspace=I,Nt.getSelected=O,Nt.hasBubble=nu,Nt.hideChaff=jc,Nt.icons=wn,Nt.inject=qu,Nt.inputTypes=t.inputTypes$$module$build$src$core$inputs$input_types,Nt.inputs=Ls,Nt.isCopyable=Rl,Nt.isIcon=Wa,Nt.isObservable=Y,Nt.isPaster=Hs,Nt.isSerializable=br,Nt.isVariableBackedParameterModel=Bs,Nt.minimalist=ZE,Nt.procedures=Xi,Nt.registry=hl,Nt.renderManagement=Pd,Nt.serialization=QE,Nt.setLocale=bf,Nt.setParentContainer=z,Nt.svgResize=W,Nt.thrasos=uk,Nt.uiPosition=Kf,Nt.utils=Ya,Nt.zelos=D,Object.defineProperties(Nt,{HSV_SATURATION:{get:function(){return xe("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.getHsvSaturation()"),ju()},set:function(r){xe("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.setHsvSaturation()"),Xu(r)}},HSV_VALUE:{get:function(){return xe("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.getHsvValue()"),vh()},set:function(r){xe("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.setHsvValue()"),sl(r)}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:Bl}),Nt.__namespace__=t,Nt})}(zk)),zk.exports}var Z3;function Eq(){return Z3||(Z3=1,function(n,e){(function(t,i){n.exports=i(_B())})(Wl,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})}(Uk)),Uk.exports}var eU;function vB(){return eU||(eU=1,function(n,e){(function(t,i){n.exports=i(Eq())})(Wl,function(t){return t})}(Fk)),Fk.exports}var Hk={exports:{}},tU;function xq(){return tU||(tU=1,function(n,e){(function(t,i){n.exports=i()})(Wl,function(){var t=t||{Msg:Object.create(null)};return t.Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DIALOG_CANCEL="Cancel",t.Msg.DIALOG_OK="OK",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1  %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg})}(Hk)),Hk.exports}var Gk={exports:{}},Wk={exports:{}},nU;function wq(){return nU||(nU=1,function(n,e){(function(t,i){n.exports=i(_B())})(Wl,function(t){var i=t.__namespace__,s=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),o={customContextMenu:function(q){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(de={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:l(this)},Ae=this.getField("VAR").getText(),Ae={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",Ae),enabled:!0,callback:u(this)},q.unshift(de),q.unshift(Ae));else{if(this.type==="variables_get_dynamic")var ee="variables_set_dynamic",de=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else ee="variables_get_dynamic",de=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var Ae=this.getField("VAR");ee={type:ee,fields:{VAR:Ae.saveState(!0)}},q.push({enabled:0<this.workspace.remainingCapacity(),text:de.replace("%1",Ae.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,ee)})}},onchange:function(q){q=this.getFieldValue("VAR"),q=i.getVariable$$module$build$src$core$variables(this.workspace,q),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(q.type):this.getInput("VALUE").connection.setCheck(q.type)}},l=function(q){return function(){const ee=q.workspace,de=q.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(ee,de)}},u=function(q){return function(){const ee=q.workspace,de=q.getField("VAR").getVariable();ee.deleteVariableById(de.getId()),ee.refreshToolboxSelection()}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",o),i.defineBlocks$$module$build$src$core$common(s);var d={blocks:s},p=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),_={customContextMenu:function(q){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(de={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:y(this)},Ae=this.getField("VAR").getText(),Ae={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",Ae),enabled:!0,callback:b(this)},q.unshift(de),q.unshift(Ae));else{if(this.type==="variables_get")var ee="variables_set",de=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else ee="variables_get",de=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var Ae=this.getField("VAR");ee={type:ee,fields:{VAR:Ae.saveState(!0)}},q.push({enabled:0<this.workspace.remainingCapacity(),text:de.replace("%1",Ae.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,ee)})}}},y=function(q){return function(){const ee=q.workspace,de=q.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(ee,de)}},b=function(q){return function(){const ee=q.workspace,de=q.getField("VAR").getVariable();ee.deleteVariableById(de.getId()),ee.refreshToolboxSelection()}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",_),i.defineBlocks$$module$build$src$core$common(p);var E={blocks:p},C=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:""},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),A={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const q=i.createElement$$module$build$src$core$utils$xml("mutation");var ee=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return q.setAttribute("at1",`${ee}`),ee=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,q.setAttribute("at2",`${ee}`),q},domToMutation:function(q){const ee=q.getAttribute("at1")==="true";q=q.getAttribute("at2")==="true",this.updateAt_(1,ee),this.updateAt_(2,q)},updateAt_:function(q,ee){this.removeInput("AT"+q),this.removeInput("ORDINAL"+q,!0),ee?(this.appendValueInput("AT"+q).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+q).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+q),q===2&&i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL));const de=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+q]});de.setValidator(function(Ae){const Je=Ae==="FROM_START"||Ae==="FROM_END";if(Je!==ee){const jt=this.getSourceBlock();return jt.updateAt_(q,Je),jt.setFieldValue(Ae,"WHERE"+q),null}}),this.getInput("AT"+q).appendField(de,"WHERE"+q),q===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}};C.text_getSubstring=A,C.text_changeCase={init:function(){const q=[[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:q}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},C.text_trim={init:function(){const q=[[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:q}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},C.text_print={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var I={updateType_:function(q){this.outputConnection.setCheck(q==="NUMBER"?"Number":"String")},mutationToDom:function(){const q=i.createElement$$module$build$src$core$utils$xml("mutation");return q.setAttribute("type",this.getFieldValue("TYPE")),q},domToMutation:function(q){this.updateType_(q.getAttribute("type"))}};C.text_prompt_ext=Object.assign({},I,{init:function(){var q=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),q=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:q}),q.setValidator(ee=>{this.updateType_(ee)}),this.appendValueInput("TEXT").appendField(q,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});var L=Object.assign({},I,{init:function(){this.mixin(O);var q=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),q=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:q}),q.setValidator(ee=>{this.updateType_(ee)}),this.appendDummyInput().appendField(q,"TYPE").appendField(this.newQuote_(!0)).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});C.text_prompt=L,C.text_count={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},C.text_replace={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},C.text_reverse={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var O={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(q){for(let ee=0,de;de=this.inputList[ee];ee++)for(let Ae=0,Je;Je=de.fieldRow[Ae];Ae++)if(q===Je.name){de.insertFieldAt(Ae,this.newQuote_(!0)),de.insertFieldAt(Ae+2,this.newQuote_(!1));return}console.warn('field named "'+q+'" not found in '+this.toDevString())},newQuote_:function(q){return q=this.RTL?!q:q,i.fromJson$$module$build$src$core$field_registry({type:"field_image",src:q?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:q?"":""})}},P=function(){this.mixin(O),this.quoteField_("TEXT")},N={itemCount_:0,mutationToDom:function(){const q=i.createElement$$module$build$src$core$utils$xml("mutation");return q.setAttribute("items",`${this.itemCount_}`),q},domToMutation:function(q){this.itemCount_=parseInt(q.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(q){this.itemCount_=q.itemCount,this.updateShape_()},decompose:function(q){const ee=q.newBlock("text_create_join_container");ee.initSvg();let de=ee.getInput("STACK").connection;for(let Ae=0;Ae<this.itemCount_;Ae++){const Je=q.newBlock("text_create_join_item");Je.initSvg(),de.connect(Je.previousConnection),de=Je.nextConnection}return ee},compose:function(q){var ee=q.getInputTargetBlock("STACK");for(q=[];ee;)ee.isInsertionMarker()||q.push(ee.valueConnection_),ee=ee.getNextBlock();for(ee=0;ee<this.itemCount_;ee++){const de=this.getInput("ADD"+ee).connection.targetConnection;de&&q.indexOf(de)===-1&&de.disconnect()}for(this.itemCount_=q.length,this.updateShape_(),ee=0;ee<this.itemCount_;ee++){let de;(de=q[ee])==null||de.reconnect(this,"ADD"+ee)}},saveConnections:function(q){q=q.getInputTargetBlock("STACK");let ee=0;for(;q;){if(q.isInsertionMarker()){q=q.getNextBlock();continue}const de=this.getInput("ADD"+ee);q.valueConnection_=de&&de.connection.targetConnection,q=q.getNextBlock(),ee++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var q=0;q<this.itemCount_;q++)if(!this.getInput("ADD"+q)){const ee=this.appendValueInput("ADD"+q).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);q===0&&ee.appendField(i.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(q=this.itemCount_;this.getInput("ADD"+q);q++)this.removeInput("ADD"+q)}},z=function(){this.mixin(O),this.itemCount_=2,this.updateShape_(),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};i.register$$module$build$src$core$extensions("text_append_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var W=function(){this.setTooltip(()=>i.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},H={isAt_:!1,mutationToDom:function(){const q=i.createElement$$module$build$src$core$utils$xml("mutation");return q.setAttribute("at",`${this.isAt_}`),q},domToMutation:function(q){q=q.getAttribute("at")!=="false",this.updateAt_(q)},updateAt_:function(q){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),q&&(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=q}},U=function(){this.getField("WHERE").setValidator(function(q){q=q==="FROM_START"||q==="FROM_END";const ee=this.getSourceBlock();q!==ee.isAt_&&ee.updateAt_(q)}),this.updateAt_(!0),this.setTooltip(()=>{var q=this.getFieldValue("WHERE");let ee=i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(q==="FROM_START"||q==="FROM_END")&&(q=q==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(ee+="  "+q.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),ee})};i.register$$module$build$src$core$extensions("text_indexOf_tooltip",W),i.register$$module$build$src$core$extensions("text_quotes",P),i.registerMixin$$module$build$src$core$extensions("quote_image_mixin",O),i.registerMutator$$module$build$src$core$extensions("text_join_mutator",N,z),i.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",H,U),i.defineBlocks$$module$build$src$core$common(C);var Q={blocks:C},ne={},oe={setStatements_:function(q){this.hasStatements_!==q&&(q?(this.appendStatementInput("STACK").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=q)},updateParams_:function(){let q="";this.arguments_.length&&(q=i.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),i.disable$$module$build$src$core$events$utils();try{this.setFieldValue(q,"PARAMS")}finally{i.enable$$module$build$src$core$events$utils()}},mutationToDom:function(q){const ee=i.createElement$$module$build$src$core$utils$xml("mutation");q&&ee.setAttribute("name",this.getFieldValue("NAME"));for(let de=0;de<this.argumentVarModels_.length;de++){const Ae=i.createElement$$module$build$src$core$utils$xml("arg"),Je=this.argumentVarModels_[de];Ae.setAttribute("name",Je.name),Ae.setAttribute("varid",Je.getId()),q&&this.paramIds_&&Ae.setAttribute("paramId",this.paramIds_[de]),ee.appendChild(Ae)}return this.hasStatements_||ee.setAttribute("statements","false"),ee},domToMutation:function(q){this.arguments_=[],this.argumentVarModels_=[];for(let de=0,Ae;Ae=q.childNodes[de];de++)if(Ae.nodeName.toLowerCase()==="arg"){var ee=Ae;const Je=ee.getAttribute("name");ee=ee.getAttribute("varid")||ee.getAttribute("varId"),this.arguments_.push(Je),ee=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,ee,Je,""),ee!==null?this.argumentVarModels_.push(ee):console.log(`Failed to create a variable named "${Je}", ignoring.`)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(q.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const q=Object.create(null);if(this.argumentVarModels_.length){q.params=[];for(let ee=0;ee<this.argumentVarModels_.length;ee++)q.params.push({name:this.argumentVarModels_[ee].name,id:this.argumentVarModels_[ee].getId()})}return this.hasStatements_||(q.hasStatements=!1),q},loadExtraState:function(q){if(this.arguments_=[],this.argumentVarModels_=[],q.params)for(let de=0;de<q.params.length;de++){var ee=q.params[de];ee=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,ee.id,ee.name,""),this.arguments_.push(ee.name),this.argumentVarModels_.push(ee)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(q.hasStatements!==!1)},decompose:function(q){const ee=i.createElement$$module$build$src$core$utils$xml("block");ee.setAttribute("type","procedures_mutatorcontainer");var de=i.createElement$$module$build$src$core$utils$xml("statement");de.setAttribute("name","STACK"),ee.appendChild(de);for(let Je=0;Je<this.arguments_.length;Je++){const jt=i.createElement$$module$build$src$core$utils$xml("block");jt.setAttribute("type","procedures_mutatorarg");var Ae=i.createElement$$module$build$src$core$utils$xml("field");Ae.setAttribute("name","NAME");const ze=i.createTextNode$$module$build$src$core$utils$xml(this.arguments_[Je]);Ae.appendChild(ze),jt.appendChild(Ae),Ae=i.createElement$$module$build$src$core$utils$xml("next"),jt.appendChild(Ae),de.appendChild(jt),de=Ae}return q=i.domToBlock$$module$build$src$core$xml(ee,q),this.type==="procedures_defreturn"?q.setFieldValue(this.hasStatements_,"STATEMENTS"):q.removeInput("STATEMENT_INPUT"),i.mutateCallers$$module$build$src$core$procedures(this),q},compose:function(q){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let ee=q.getInputTargetBlock("STACK");for(;ee&&!ee.isInsertionMarker();){var de=ee.getFieldValue("NAME");this.arguments_.push(de),de=this.workspace.getVariable(de,""),this.argumentVarModels_.push(de),this.paramIds_.push(ee.id),ee=ee.nextConnection&&ee.nextConnection.targetBlock()}if(this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),q=q.getFieldValue("STATEMENTS"),q!==null&&(q=q==="TRUE",this.hasStatements_!==q))if(q){this.setStatements_(!0);var Ae;(Ae=this.statementConnection_)==null||Ae.reconnect(this,"STACK"),this.statementConnection_=null}else Ae=this.getInput("STACK").connection,(this.statementConnection_=Ae.targetConnection)&&(Ae=Ae.targetBlock(),Ae.unplug(),Ae.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(q,ee){var de=this.workspace.getVariableById(q);if(de.type===""){de=de.name,ee=this.workspace.getVariableById(ee);var Ae=!1;for(let Je=0;Je<this.argumentVarModels_.length;Je++)this.argumentVarModels_[Je].getId()===q&&(this.arguments_[Je]=ee.name,this.argumentVarModels_[Je]=ee,Ae=!0);Ae&&(this.displayRenamedVar_(de,ee.name),i.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(q){const ee=q.name;let de=!1,Ae;for(let Je=0;Je<this.argumentVarModels_.length;Je++)this.argumentVarModels_[Je].getId()===q.getId()&&(Ae=this.arguments_[Je],this.arguments_[Je]=ee,de=!0);de&&(this.displayRenamedVar_(Ae,ee),i.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(q,ee){this.updateParams_();var de=this.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(de&&de.bubbleIsVisible()){de=de.getWorkspace().getAllBlocks(!1);for(let Ae=0,Je;Je=de[Ae];Ae++)Je.type==="procedures_mutatorarg"&&i.Names$$module$build$src$core$names.equals(q,Je.getFieldValue("NAME"))&&Je.setFieldValue(ee,"NAME")}},customContextMenu:function(q){if(!this.isInFlyout){var ee=this.getFieldValue("NAME"),de={type:this.callType_,extraState:{name:ee,params:this.arguments_}};if(q.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",ee),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,de)}),!this.isCollapsed())for(ee=0;ee<this.argumentVarModels_.length;ee++){de=this.argumentVarModels_[ee];const Ae={type:"variables_get",fields:{VAR:{name:de.name,id:de.getId(),type:de.type}}};q.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",de.name),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,Ae)})}}}};ne.procedures_defnoreturn=Object.assign({},oe,{init:function(){var q=i.findLegalName$$module$build$src$core$procedures("",this);q=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:q}),q.setValidator(i.rename$$module$build$src$core$procedures),q.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(q,"NAME").appendField("","PARAMS"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),ne.procedures_defreturn=Object.assign({},oe,{init:function(){var q=i.findLegalName$$module$build$src$core$procedures("",this);q=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:q}),q.setValidator(i.rename$$module$build$src$core$procedures),q.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(q,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(i.Align$$module$build$src$core$inputs$input.RIGHT).appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var le={init:function(){this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};ne.procedures_mutatorcontainer=le;var ge={init:function(){const q=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:i.DEFAULT_ARG$$module$build$src$core$procedures});q.setValidator(this.validator_),q.oldShowEditorFn_=q.showEditor_,q.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(q,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,q.onFinishEditing_=this.deleteIntermediateVars_,q.createdVariables_=[],q.onFinishEditing_("x")},validator_:function(q){var ee=this.getSourceBlock();const de=ee.workspace.getRootWorkspace();if(q=q.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!q)return null;const Ae=(ee.workspace.targetWorkspace||ee.workspace).getAllBlocks(!1),Je=q.toLowerCase();for(let jt=0;jt<Ae.length;jt++){if(Ae[jt].id===this.getSourceBlock().id)continue;const ze=Ae[jt].getFieldValue("NAME");if(ze&&ze.toLowerCase()===Je)return null}return ee.isInFlyout||((ee=de.getVariable(q,""))&&ee.name!==q&&de.renameVariableById(ee.getId(),q),ee||(ee=de.createVariable(q,""))&&this.createdVariables_&&this.createdVariables_.push(ee)),q},deleteIntermediateVars_:function(q){const ee=this.getSourceBlock().workspace.getRootWorkspace();if(ee)for(let de=0;de<this.createdVariables_.length;de++){const Ae=this.createdVariables_[de];Ae.name!==q&&ee.deleteVariableById(Ae.getId())}}};ne.procedures_mutatorarg=ge;var ce={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(q,ee){i.Names$$module$build$src$core$names.equals(q,this.getProcedureCall())&&(this.setFieldValue(ee,"NAME"),this.setTooltip((this.outputConnection?i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",ee)))},setProcedureParameters_:function(q,ee){var de=i.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((de=(de=de&&de.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&de.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),q.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=ee;else{if(ee.length!==q.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let Je=0;Je<this.arguments_.length;Je++){var Ae=this.getInput("ARG"+Je);Ae&&(Ae=Ae.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Je]]=Ae,de&&Ae&&ee.indexOf(this.quarkIds_[Je])===-1&&(Ae.disconnect(),Ae.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(q),this.argumentVarModels_=[],q=0;q<this.arguments_.length;q++)de=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[q],""),this.argumentVarModels_.push(de);if(this.updateShape_(),this.quarkIds_=ee){for(ee=0;ee<this.arguments_.length;ee++)if(q=this.quarkIds_[ee],q in this.quarkConnections_){let Je;(Je=this.quarkConnections_[q])!=null&&Je.reconnect(this,"ARG"+ee)||delete this.quarkConnections_[q]}}}},updateShape_:function(){for(var q=0;q<this.arguments_.length;q++){var ee=this.getField("ARGNAME"+q);if(ee){i.disable$$module$build$src$core$events$utils();try{ee.setValue(this.arguments_[q])}finally{i.enable$$module$build$src$core$events$utils()}}else ee=i.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[q]}),this.appendValueInput("ARG"+q).setAlign(i.Align$$module$build$src$core$inputs$input.RIGHT).appendField(ee,"ARGNAME"+q).init()}for(q=this.arguments_.length;this.getInput("ARG"+q);q++)this.removeInput("ARG"+q);(q=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(q.appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),q.init()):this.getField("WITH")&&q.removeField("WITH"))},mutationToDom:function(){const q=i.createElement$$module$build$src$core$utils$xml("mutation");q.setAttribute("name",this.getProcedureCall());for(let ee=0;ee<this.arguments_.length;ee++){const de=i.createElement$$module$build$src$core$utils$xml("arg");de.setAttribute("name",this.arguments_[ee]),q.appendChild(de)}return q},domToMutation:function(q){var ee=q.getAttribute("name");this.renameProcedure(this.getProcedureCall(),ee),ee=[];const de=[];for(let Ae=0,Je;Je=q.childNodes[Ae];Ae++)Je.nodeName.toLowerCase()==="arg"&&(ee.push(Je.getAttribute("name")),de.push(Je.getAttribute("paramId")));this.setProcedureParameters_(ee,de)},saveExtraState:function(){const q=Object.create(null);return q.name=this.getProcedureCall(),this.arguments_.length&&(q.params=this.arguments_),q},loadExtraState:function(q){if(this.renameProcedure(this.getProcedureCall(),q.name),q=q.params){const ee=[];ee.length=q.length,ee.fill(null),this.setProcedureParameters_(q,ee)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(q){if(this.workspace&&!this.workspace.isFlyout&&q.recordUndo)if(q.type===i.CREATE$$module$build$src$core$events$utils&&q.ids.indexOf(this.id)!==-1){var ee=this.getProcedureCall();if(ee=i.getDefinition$$module$build$src$core$procedures(ee,this.workspace),!ee||ee.type===this.defType_&&JSON.stringify(ee.getVars())===JSON.stringify(this.arguments_)||(ee=null),!ee){i.setGroup$$module$build$src$core$events$utils(q.group),q=i.createElement$$module$build$src$core$utils$xml("xml"),ee=i.createElement$$module$build$src$core$utils$xml("block"),ee.setAttribute("type",this.defType_);var de=this.getRelativeToSurfaceXY(),Ae=de.y+2*i.config$$module$build$src$core$config.snapRadius;ee.setAttribute("x",`${de.x+i.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),ee.setAttribute("y",`${Ae}`),de=this.mutationToDom(),ee.appendChild(de),de=i.createElement$$module$build$src$core$utils$xml("field"),de.setAttribute("name","NAME"),Ae=this.getProcedureCall();const Je=i.findLegalName$$module$build$src$core$procedures(Ae,this);Ae!==Je&&this.renameProcedure(Ae,Je),de.appendChild(i.createTextNode$$module$build$src$core$utils$xml(Ae)),ee.appendChild(de),q.appendChild(ee),i.domToWorkspace$$module$build$src$core$xml(q,this.workspace),i.setGroup$$module$build$src$core$events$utils(!1)}}else q.type===i.DELETE$$module$build$src$core$events$utils?(ee=this.getProcedureCall(),i.getDefinition$$module$build$src$core$procedures(ee,this.workspace)||(i.setGroup$$module$build$src$core$events$utils(q.group),this.dispose(!0),i.setGroup$$module$build$src$core$events$utils(!1))):q.type===i.CHANGE$$module$build$src$core$events$utils&&q.element==="disabled"&&(ee=this.getProcedureCall(),(ee=i.getDefinition$$module$build$src$core$procedures(ee,this.workspace))&&ee.id===q.blockId&&((ee=i.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),i.setGroup$$module$build$src$core$events$utils(q.group),q.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),i.setGroup$$module$build$src$core$events$utils(ee)))},customContextMenu:function(q){if(this.workspace.isMovable()){var ee=this.getProcedureCall(),de=this.workspace;q.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const Ae=i.getDefinition$$module$build$src$core$procedures(ee,de);Ae&&(de.centerOnBlock(Ae.id),Ae.select())}})}}};ne.procedures_callnoreturn=Object.assign({},ce,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),ne.procedures_callreturn=Object.assign({},ce,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"});var pe={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const q=i.createElement$$module$build$src$core$utils$xml("mutation");return q.setAttribute("value",String(Number(this.hasReturnValue_))),q},domToMutation:function(q){this.hasReturnValue_=q.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(q){if(!(this.workspace.isDragging&&this.workspace.isDragging()||q.type!==i.MOVE$$module$build$src$core$events$utils)){var ee=!1,de=this;do{if(this.FUNCTION_TYPES.indexOf(de.type)!==-1){ee=!0;break}de=de.getSurroundParent()}while(de);ee?(de.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):de.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(de=i.getGroup$$module$build$src$core$events$utils(),i.setGroup$$module$build$src$core$events$utils(q.group),this.setEnabled(ee),i.setGroup$$module$build$src$core$events$utils(de))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};ne.procedures_ifreturn=pe,i.defineBlocks$$module$build$src$core$common(ne);var Te={blocks:ne},Oe=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),J={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};i.register$$module$build$src$core$extensions("math_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",J));var se={mutationToDom:function(){const q=i.createElement$$module$build$src$core$utils$xml("mutation"),ee=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return q.setAttribute("divisor_input",String(ee)),q},domToMutation:function(q){q=q.getAttribute("divisor_input")==="true",this.updateShape_(q)},updateShape_:function(q){const ee=this.getInput("DIVISOR");q?ee||this.appendValueInput("DIVISOR").setCheck("Number"):ee&&this.removeInput("DIVISOR")}},ie=function(){this.getField("PROPERTY").setValidator(function(q){q=q==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(q)})};i.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",se,ie),i.register$$module$build$src$core$extensions("math_change_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var he={updateType_:function(q){q==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const q=i.createElement$$module$build$src$core$utils$xml("mutation");return q.setAttribute("op",this.getFieldValue("OP")),q},domToMutation:function(q){if(q=q.getAttribute("op"),q===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(q)}},Se=function(){this.getField("OP").setValidator((function(q){this.updateType_(q)}).bind(this))};i.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",he,Se),i.defineBlocks$$module$build$src$core$common(Oe);var Fe={blocks:Oe},ke=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),qe={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};i.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",qe));var De={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};i.register$$module$build$src$core$extensions("controls_flow_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",De));var rt={customContextMenu:function(q){if(!this.isInFlyout){var ee=this.getField("VAR"),de=ee.getVariable().name;this.isCollapsed()||de===null||(ee={type:"variables_get",fields:{VAR:ee.saveState(!0)}},q.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",de),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,ee)}))}}};i.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",rt),i.register$$module$build$src$core$extensions("controls_for_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),i.register$$module$build$src$core$extensions("controls_forEach_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var tt=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),ft={getSurroundLoop:function(){let q=this;do{if(tt.has(q.type))return q;q=q.getSurroundParent()}while(q);return null},onchange:function(q){var ee=this.workspace;if(ee.isDragging&&!ee.isDragging()&&q.type===i.MOVE$$module$build$src$core$events$utils&&(ee=!!this.getSurroundLoop(),this.setWarningText(ee?null:i.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout)){const de=i.getGroup$$module$build$src$core$events$utils();i.setGroup$$module$build$src$core$events$utils(q.group),this.setEnabled(ee),i.setGroup$$module$build$src$core$events$utils(de)}}};i.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",ft),i.defineBlocks$$module$build$src$core$common(ke);var ct={blocks:ke,loopTypes:tt},Pe=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),Ce={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};i.register$$module$build$src$core$extensions("logic_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Ce));var je={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const q=i.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&q.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&q.setAttribute("else","1"),q},domToMutation:function(q){this.elseifCount_=parseInt(q.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(q.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const q=Object.create(null);return this.elseifCount_&&(q.elseIfCount=this.elseifCount_),this.elseCount_&&(q.hasElse=!0),q},loadExtraState:function(q){this.elseifCount_=q.elseIfCount||0,this.elseCount_=q.hasElse?1:0,this.updateShape_()},decompose:function(q){const ee=q.newBlock("controls_if_if");ee.initSvg();let de=ee.nextConnection;for(let Ae=1;Ae<=this.elseifCount_;Ae++){const Je=q.newBlock("controls_if_elseif");Je.initSvg(),de.connect(Je.previousConnection),de=Je.nextConnection}return this.elseCount_&&(q=q.newBlock("controls_if_else"),q.initSvg(),de.connect(q.previousConnection)),ee},compose:function(q){q=q.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const ee=[null],de=[null];let Ae=null;for(;q;){if(!q.isInsertionMarker())switch(q.type){case"controls_if_elseif":this.elseifCount_++,ee.push(q.valueConnection_),de.push(q.statementConnection_);break;case"controls_if_else":this.elseCount_++,Ae=q.statementConnection_;break;default:throw TypeError("Unknown block type: "+q.type)}q=q.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(ee,de,Ae)},saveConnections:function(q){q=q.nextConnection.targetBlock();let ee=1;for(;q;){if(!q.isInsertionMarker())switch(q.type){case"controls_if_elseif":var de=this.getInput("IF"+ee);const Ae=this.getInput("DO"+ee);q.valueConnection_=de&&de.connection.targetConnection,q.statementConnection_=Ae&&Ae.connection.targetConnection,ee++;break;case"controls_if_else":de=this.getInput("ELSE"),q.statementConnection_=de&&de.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+q.type)}q=q.getNextBlock()}},rebuildShape_:function(){const q=[null],ee=[null];let de=null;this.getInput("ELSE")&&(de=this.getInput("ELSE").connection.targetConnection);for(let Ae=1;this.getInput("IF"+Ae);Ae++){const Je=this.getInput("IF"+Ae),jt=this.getInput("DO"+Ae);q.push(Je.connection.targetConnection),ee.push(jt.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(q,ee,de)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var q=1;this.getInput("IF"+q);q++)this.removeInput("IF"+q),this.removeInput("DO"+q);for(q=1;q<=this.elseifCount_;q++)this.appendValueInput("IF"+q).setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+q).appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(q,ee,de){for(let Ae=1;Ae<=this.elseifCount_;Ae++){let Je;(Je=q[Ae])==null||Je.reconnect(this,"IF"+Ae);let jt;(jt=ee[Ae])==null||jt.reconnect(this,"DO"+Ae)}de==null||de.reconnect(this,"ELSE")}};i.registerMutator$$module$build$src$core$extensions("controls_if_mutator",je,null,["controls_if_elseif","controls_if_else"]);var it=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};i.register$$module$build$src$core$extensions("controls_if_tooltip",it);var ot={onchange:function(q){this.prevBlocks_||(this.prevBlocks_=[null,null]);var ee=this.getInputTargetBlock("A");const de=this.getInputTargetBlock("B");ee&&de&&!this.workspace.connectionChecker.doTypeChecks(ee.outputConnection,de.outputConnection)&&(i.setGroup$$module$build$src$core$events$utils(q.group),q=this.prevBlocks_[0],q!==ee&&(ee.unplug(),!q||q.isDisposed()||q.isShadow()||this.getInput("A").connection.connect(q.outputConnection)),ee=this.prevBlocks_[1],ee!==de&&(de.unplug(),!ee||ee.isDisposed()||ee.isShadow()||this.getInput("B").connection.connect(ee.outputConnection)),this.bumpNeighbours(),i.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},vt=function(){this.mixin(ot)};i.register$$module$build$src$core$extensions("logic_compare",vt);var It={prevParentConnection_:null,onchange:function(q){const ee=this.getInputTargetBlock("THEN"),de=this.getInputTargetBlock("ELSE"),Ae=this.outputConnection.targetConnection;if((ee||de)&&Ae)for(let Je=0;2>Je;Je++){const jt=Je===1?ee:de;jt&&!jt.workspace.connectionChecker.doTypeChecks(jt.outputConnection,Ae)&&(i.setGroup$$module$build$src$core$events$utils(q.group),Ae===this.prevParentConnection_?(this.unplug(),Ae.getSourceBlock().bumpNeighbours()):(jt.unplug(),jt.bumpNeighbours()),i.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=Ae}};i.registerMixin$$module$build$src$core$extensions("logic_ternary",It),i.defineBlocks$$module$build$src$core$common(Pe);var yt=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),kt={init:function(){this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const q=i.createElement$$module$build$src$core$utils$xml("mutation");return q.setAttribute("items",String(this.itemCount_)),q},domToMutation:function(q){if(q=q.getAttribute("items"),!q)throw new TypeError("element did not have items");this.itemCount_=parseInt(q,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(q){this.itemCount_=q.itemCount,this.updateShape_()},decompose:function(q){const ee=q.newBlock("lists_create_with_container");ee.initSvg();let de=ee.getInput("STACK").connection;for(let Ae=0;Ae<this.itemCount_;Ae++){const Je=q.newBlock("lists_create_with_item");if(Je.initSvg(),!Je.previousConnection)throw Error("itemBlock has no previousConnection");de.connect(Je.previousConnection),de=Je.nextConnection}return ee},compose:function(q){var ee=q.getInputTargetBlock("STACK");for(q=[];ee;)ee.isInsertionMarker()||q.push(ee.valueConnection_),ee=ee.getNextBlock();for(ee=0;ee<this.itemCount_;ee++){const de=this.getInput("ADD"+ee).connection.targetConnection;de&&q.indexOf(de)===-1&&de.disconnect()}for(this.itemCount_=q.length,this.updateShape_(),ee=0;ee<this.itemCount_;ee++){let de;(de=q[ee])==null||de.reconnect(this,"ADD"+ee)}},saveConnections:function(q){q=q.getInputTargetBlock("STACK");let ee=0;for(;q;){if(q.isInsertionMarker()){q=q.getNextBlock();continue}const de=this.getInput("ADD"+ee);let Ae;q.valueConnection_=(Ae=de)==null?void 0:Ae.connection.targetConnection,q=q.getNextBlock(),ee++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var q=0;q<this.itemCount_;q++)if(!this.getInput("ADD"+q)){const ee=this.appendValueInput("ADD"+q).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);q===0&&ee.appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(q=this.itemCount_;this.getInput("ADD"+q);q++)this.removeInput("ADD"+q)}};yt.lists_create_with=kt;var $t={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};yt.lists_create_with_container=$t;var mt={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};yt.lists_create_with_item=mt;var xe={init:function(){var q=[[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),q=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:q}),!q)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(q,"END"),this.setInputsInline(!0),this.setTooltip(()=>i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};yt.lists_indexOf=xe;var re={init:function(){var q=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),q=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:q}),q.setValidator(function(ee){ee=ee==="REMOVE",this.getSourceBlock().updateStatement_(ee)}),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(q,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const ee=this.getFieldValue("MODE"),de=this.getFieldValue("WHERE");let Ae="";switch(ee+" "+de){case"GET FROM_START":case"GET FROM_END":Ae=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":Ae=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":Ae=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":Ae=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":Ae=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":Ae=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":Ae=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":Ae=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":Ae=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":Ae=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":Ae=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":Ae=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(de==="FROM_START"||de==="FROM_END")&&(Ae+="  "+(de==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),Ae})},mutationToDom:function(){const q=i.createElement$$module$build$src$core$utils$xml("mutation");q.setAttribute("statement",String(!this.outputConnection));const ee=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return q.setAttribute("at",String(ee)),q},domToMutation:function(q){const ee=q.getAttribute("statement")==="true";this.updateStatement_(ee),q=q.getAttribute("at")!=="false",this.updateAt_(q)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(q){q.isStatement?this.updateStatement_(!0):typeof q=="string"&&this.domToMutation(i.textToDom$$module$build$src$core$utils$xml(q))},updateStatement_:function(q){q!==!this.outputConnection&&(this.unplug(!0,!0),q?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(q){this.removeInput("AT"),this.removeInput("ORDINAL",!0),q?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const ee=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});ee.setValidator(function(de){const Ae=de==="FROM_START"||de==="FROM_END";if(Ae!==q){const Je=this.getSourceBlock();return Je.updateAt_(Ae),Je.setFieldValue(de,"WHERE"),null}}),this.getInput("AT").appendField(ee,"WHERE"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};yt.lists_getIndex=re;var Be={init:function(){var q=[[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),q=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:q}),this.appendDummyInput().appendField(q,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const ee=this.getFieldValue("MODE"),de=this.getFieldValue("WHERE");let Ae="";switch(ee+" "+de){case"SET FROM_START":case"SET FROM_END":Ae=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":Ae=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":Ae=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":Ae=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":Ae=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":Ae=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":Ae=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":Ae=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(de==="FROM_START"||de==="FROM_END")&&(Ae+="  "+i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),Ae})},mutationToDom:function(){const q=i.createElement$$module$build$src$core$utils$xml("mutation"),ee=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return q.setAttribute("at",String(ee)),q},domToMutation:function(q){q=q.getAttribute("at")!=="false",this.updateAt_(q)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(q){this.removeInput("AT"),this.removeInput("ORDINAL",!0),q?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const ee=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});ee.setValidator(function(de){const Ae=de==="FROM_START"||de==="FROM_END";if(Ae!==q){const Je=this.getSourceBlock();return Je.updateAt_(Ae),Je.setFieldValue(de,"WHERE"),null}}),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(ee,"WHERE")}};yt.lists_setIndex=Be;var dt={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const q=i.createElement$$module$build$src$core$utils$xml("mutation");var ee=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return q.setAttribute("at1",String(ee)),ee=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,q.setAttribute("at2",String(ee)),q},domToMutation:function(q){const ee=q.getAttribute("at1")==="true";q=q.getAttribute("at2")==="true",this.updateAt_(1,ee),this.updateAt_(2,q)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(q,ee){this.removeInput("AT"+q),this.removeInput("ORDINAL"+q,!0),ee?(this.appendValueInput("AT"+q).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+q).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+q);const de=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+q]});de.setValidator(function(Ae){const Je=Ae==="FROM_START"||Ae==="FROM_END";if(Je!==ee){const jt=this.getSourceBlock();return jt.updateAt_(q,Je),jt.setFieldValue(Ae,"WHERE"+q),null}}),this.getInput("AT"+q).appendField(de,"WHERE"+q),q===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};yt.lists_getSublist=dt,yt.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},yt.lists_split={init:function(){const q=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!q)throw Error("field_dropdown not found");q.setValidator(ee=>{this.updateType_(ee)}),this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(q,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const ee=this.getFieldValue("MODE");if(ee==="SPLIT")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(ee==="JOIN")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+ee)})},updateType_:function(q){if(this.getFieldValue("MODE")!==q){const ee=this.getInput("INPUT").connection;ee.setShadowDom(null);const de=ee.targetBlock();de&&(ee.disconnect(),de.isShadow()?de.dispose(!1):this.bumpNeighbours())}q==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const q=i.createElement$$module$build$src$core$utils$xml("mutation");return q.setAttribute("mode",this.getFieldValue("MODE")),q},domToMutation:function(q){this.updateType_(q.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},i.defineBlocks$$module$build$src$core$common(yt);var bt={blocks:yt},Mt=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]);i.defineBlocks$$module$build$src$core$common(Mt);var pt={blocks:Mt},Ke=Object.assign({},Mt,yt,Pe,ke,Oe,ne,p,s),Ie={blocks:Ke,colour:pt,lists:bt,loops:ct,math:Fe,procedures:Te,texts:Q,variables:E,variablesDynamic:d};return Ie.__namespace__=i,Ie})}(Wk)),Wk.exports}var rU;function $q(){return rU||(rU=1,function(n,e){(function(t,i){n.exports=i(wq())})(Wl,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})}(Gk)),Gk.exports}var KW={exports:{}},Vk={exports:{}},iU;function Cq(){return iU||(iU=1,function(n,e){(function(t,i){n.exports=i(_B())})(Wl,function(t){var i=t.__namespace__,s=function(te,be){return[be.quote_(te.getFieldValue("COLOUR")),Ie.ATOMIC]},o=function(te,be){return[be.provideFunction_("colourRandom",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",Ie.FUNCTION_CALL]},l=function(te,be){const He=be.valueToCode(te,"RED",Ie.NONE)||0,at=be.valueToCode(te,"GREEN",Ie.NONE)||0;return te=be.valueToCode(te,"BLUE",Ie.NONE)||0,[be.provideFunction_("colourRgb",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+He+", "+at+", "+te+")",Ie.FUNCTION_CALL]},u=function(te,be){const He=be.valueToCode(te,"COLOUR1",Ie.NONE)||"'#000000'",at=be.valueToCode(te,"COLOUR2",Ie.NONE)||"'#000000'";return te=be.valueToCode(te,"RATIO",Ie.NONE)||.5,[be.provideFunction_("colourBlend",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+He+", "+at+", "+te+")",Ie.FUNCTION_CALL]},d=function(te,be){return["[]",Ie.ATOMIC]},p=function(te,be){const He=Array(te.itemCount_);for(let at=0;at<te.itemCount_;at++)He[at]=be.valueToCode(te,"ADD"+at,Ie.NONE)||"null";return["["+He.join(", ")+"]",Ie.ATOMIC]},_=function(te,be){const He=be.provideFunction_("listsRepeat",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),at=be.valueToCode(te,"ITEM",Ie.NONE)||"null";return te=be.valueToCode(te,"NUM",Ie.NONE)||"0",[He+"("+at+", "+te+")",Ie.FUNCTION_CALL]},y=function(te,be){return[(be.valueToCode(te,"VALUE",Ie.MEMBER)||"[]")+".length",Ie.MEMBER]},b=function(te,be){return["!"+(be.valueToCode(te,"VALUE",Ie.MEMBER)||"[]")+".length",Ie.LOGICAL_NOT]},E=function(te,be){const He=te.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",at=be.valueToCode(te,"FIND",Ie.NONE)||"''";return be=(be.valueToCode(te,"VALUE",Ie.MEMBER)||"[]")+"."+He+"("+at+")",te.workspace.options.oneBasedIndex?[be+" + 1",Ie.ADDITION]:[be,Ie.FUNCTION_CALL]},C=function(te,be){const He=te.getFieldValue("MODE")||"GET",at=te.getFieldValue("WHERE")||"FROM_START";var Ft=be.valueToCode(te,"VALUE",at==="RANDOM"?Ie.NONE:Ie.MEMBER)||"[]";switch(at){case"FIRST":if(He==="GET")return[Ft+"[0]",Ie.MEMBER];if(He==="GET_REMOVE")return[Ft+".shift()",Ie.MEMBER];if(He==="REMOVE")return Ft+`.shift();
`;break;case"LAST":if(He==="GET")return[Ft+".slice(-1)[0]",Ie.MEMBER];if(He==="GET_REMOVE")return[Ft+".pop()",Ie.MEMBER];if(He==="REMOVE")return Ft+`.pop();
`;break;case"FROM_START":if(te=be.getAdjusted(te,"AT"),He==="GET")return[Ft+"["+te+"]",Ie.MEMBER];if(He==="GET_REMOVE")return[Ft+".splice("+te+", 1)[0]",Ie.FUNCTION_CALL];if(He==="REMOVE")return Ft+".splice("+te+`, 1);
`;break;case"FROM_END":if(te=be.getAdjusted(te,"AT",1,!0),He==="GET")return[Ft+".slice("+te+")[0]",Ie.FUNCTION_CALL];if(He==="GET_REMOVE")return[Ft+".splice("+te+", 1)[0]",Ie.FUNCTION_CALL];if(He==="REMOVE")return Ft+".splice("+te+", 1);";break;case"RANDOM":if(Ft=be.provideFunction_("listsGetRandomItem",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+Ft+", "+(He!=="GET")+")",He==="GET"||He==="GET_REMOVE")return[Ft,Ie.FUNCTION_CALL];if(He==="REMOVE")return Ft+`;
`}throw Error("Unhandled combination (lists_getIndex).")},A=function(te,be){function He(){if(at.match(/^\w+$/))return"";const Le=be.nameDB_.getDistinctName("tmpList",i.NameType$$module$build$src$core$names.VARIABLE),gt="var "+Le+" = "+at+`;
`;return at=Le,gt}let at=be.valueToCode(te,"LIST",Ie.MEMBER)||"[]";const Ft=te.getFieldValue("MODE")||"GET";var rn=te.getFieldValue("WHERE")||"FROM_START";const Rn=be.valueToCode(te,"TO",Ie.ASSIGNMENT)||"null";switch(rn){case"FIRST":if(Ft==="SET")return at+"[0] = "+Rn+`;
`;if(Ft==="INSERT")return at+".unshift("+Rn+`);
`;break;case"LAST":if(Ft==="SET")return He()+(at+"["+at+".length - 1] = "+Rn+`;
`);if(Ft==="INSERT")return at+".push("+Rn+`);
`;break;case"FROM_START":if(te=be.getAdjusted(te,"AT"),Ft==="SET")return at+"["+te+"] = "+Rn+`;
`;if(Ft==="INSERT")return at+".splice("+te+", 0, "+Rn+`);
`;break;case"FROM_END":if(te=be.getAdjusted(te,"AT",1,!1,Ie.SUBTRACTION),rn=He(),Ft==="SET")return rn+(at+"["+at+".length - "+te+"] = "+Rn+`;
`);if(Ft==="INSERT")return rn+(at+".splice("+at+".length - "+te+", 0, "+Rn+`);
`);break;case"RANDOM":if(te=He(),rn=be.nameDB_.getDistinctName("tmpX",i.NameType$$module$build$src$core$names.VARIABLE),te+="var "+rn+" = Math.floor(Math.random() * "+at+`.length);
`,Ft==="SET")return te+(at+"["+rn+"] = "+Rn+`;
`);if(Ft==="INSERT")return te+(at+".splice("+rn+", 0, "+Rn+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},I=function(te,be){var He={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},at=be.valueToCode(te,"LIST",Ie.MEMBER)||"[]";const Ft=te.getFieldValue("WHERE1"),rn=te.getFieldValue("WHERE2");if(Ft==="FIRST"&&rn==="LAST")at+=".slice(0)";else if(at.match(/^\w+$/)||Ft!=="FROM_END"&&rn==="FROM_START"){switch(Ft){case"FROM_START":He=be.getAdjusted(te,"AT1");break;case"FROM_END":He=be.getAdjusted(te,"AT1",1,!1,Ie.SUBTRACTION),He=at+".length - "+He;break;case"FIRST":He="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(rn){case"FROM_START":be=be.getAdjusted(te,"AT2",1);break;case"FROM_END":be=be.getAdjusted(te,"AT2",0,!1,Ie.SUBTRACTION),be=at+".length - "+be;break;case"LAST":be=at+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}at=at+".slice("+He+", "+be+")"}else{const Rn=be.getAdjusted(te,"AT1");te=be.getAdjusted(te,"AT2"),at=be.provideFunction_("subsequence"+He[Ft]+He[rn],`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(sequence${Ft==="FROM_END"||Ft==="FROM_START"?", at1":""}${rn==="FROM_END"||rn==="FROM_START"?", at2":""}) {
  var start = ${de("sequence",Ft,"at1")};
  var end = ${de("sequence",rn,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+at+(Ft==="FROM_END"||Ft==="FROM_START"?", "+Rn:"")+(rn==="FROM_END"||rn==="FROM_START"?", "+te:"")+")"}return[at,Ie.FUNCTION_CALL]},L=function(te,be){const He=be.valueToCode(te,"LIST",Ie.FUNCTION_CALL)||"[]",at=te.getFieldValue("DIRECTION")==="1"?1:-1;return te=te.getFieldValue("TYPE"),be=be.provideFunction_("listsGetSortCompare",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[He+".slice().sort("+be+'("'+te+'", '+at+"))",Ie.FUNCTION_CALL]},O=function(te,be){let He=be.valueToCode(te,"INPUT",Ie.MEMBER);if(be=be.valueToCode(te,"DELIM",Ie.NONE)||"''",te=te.getFieldValue("MODE"),te==="SPLIT")He||(He="''"),te="split";else if(te==="JOIN")He||(He="[]"),te="join";else throw Error("Unknown mode: "+te);return[He+"."+te+"("+be+")",Ie.FUNCTION_CALL]},P=function(te,be){return[(be.valueToCode(te,"LIST",Ie.FUNCTION_CALL)||"[]")+".slice().reverse()",Ie.FUNCTION_CALL]},N=function(te,be){var He=0;let at="";be.STATEMENT_PREFIX&&(at+=be.injectId(be.STATEMENT_PREFIX,te));do{const Ft=be.valueToCode(te,"IF"+He,Ie.NONE)||"false";let rn=be.statementToCode(te,"DO"+He);be.STATEMENT_SUFFIX&&(rn=be.prefixLines(be.injectId(be.STATEMENT_SUFFIX,te),be.INDENT)+rn),at+=(0<He?" else ":"")+"if ("+Ft+`) {
`+rn+"}",He++}while(te.getInput("IF"+He));return(te.getInput("ELSE")||be.STATEMENT_SUFFIX)&&(He=be.statementToCode(te,"ELSE"),be.STATEMENT_SUFFIX&&(He=be.prefixLines(be.injectId(be.STATEMENT_SUFFIX,te),be.INDENT)+He),at+=` else {
`+He+"}"),at+`
`},z=function(te,be){const He={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[te.getFieldValue("OP")],at=He==="=="||He==="!="?Ie.EQUALITY:Ie.RELATIONAL,Ft=be.valueToCode(te,"A",at)||"0";return te=be.valueToCode(te,"B",at)||"0",[Ft+" "+He+" "+te,at]},W=function(te,be){const He=te.getFieldValue("OP")==="AND"?"&&":"||",at=He==="&&"?Ie.LOGICAL_AND:Ie.LOGICAL_OR;let Ft=be.valueToCode(te,"A",at);return te=be.valueToCode(te,"B",at),Ft||te?(be=He==="&&"?"true":"false",Ft||(Ft=be),te||(te=be)):te=Ft="false",[Ft+" "+He+" "+te,at]},H=function(te,be){const He=Ie.LOGICAL_NOT;return["!"+(be.valueToCode(te,"BOOL",He)||"true"),He]},U=function(te,be){return[te.getFieldValue("BOOL")==="TRUE"?"true":"false",Ie.ATOMIC]},Q=function(te,be){return["null",Ie.ATOMIC]},ne=function(te,be){const He=be.valueToCode(te,"IF",Ie.CONDITIONAL)||"false",at=be.valueToCode(te,"THEN",Ie.CONDITIONAL)||"null";return te=be.valueToCode(te,"ELSE",Ie.CONDITIONAL)||"null",[He+" ? "+at+" : "+te,Ie.CONDITIONAL]},oe=function(te,be){let He;He=te.getField("TIMES")?String(Number(te.getFieldValue("TIMES"))):be.valueToCode(te,"TIMES",Ie.ASSIGNMENT)||"0";let at=be.statementToCode(te,"DO");at=be.addLoopTrap(at,te),te="";const Ft=be.nameDB_.getDistinctName("count",i.NameType$$module$build$src$core$names.VARIABLE);let rn=He;return He.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(He)||(rn=be.nameDB_.getDistinctName("repeat_end",i.NameType$$module$build$src$core$names.VARIABLE),te+="var "+rn+" = "+He+`;
`),te+("for (var "+Ft+" = 0; "+Ft+" < "+rn+"; "+Ft+`++) {
`+at+`}
`)},le=function(te,be){const He=te.getFieldValue("MODE")==="UNTIL";let at=be.valueToCode(te,"BOOL",He?Ie.LOGICAL_NOT:Ie.NONE)||"false",Ft=be.statementToCode(te,"DO");return Ft=be.addLoopTrap(Ft,te),He&&(at="!"+at),"while ("+at+`) {
`+Ft+`}
`},ge=function(te,be){var He=be.getVariableName(te.getFieldValue("VAR")),at=be.valueToCode(te,"FROM",Ie.ASSIGNMENT)||"0",Ft=be.valueToCode(te,"TO",Ie.ASSIGNMENT)||"0";const rn=be.valueToCode(te,"BY",Ie.ASSIGNMENT)||"1";let Rn=be.statementToCode(te,"DO");if(Rn=be.addLoopTrap(Rn,te),i.isNumber$$module$build$src$core$utils$string(at)&&i.isNumber$$module$build$src$core$utils$string(Ft)&&i.isNumber$$module$build$src$core$utils$string(rn))be=Number(at)<=Number(Ft),te="for ("+He+" = "+at+"; "+He+(be?" <= ":" >= ")+Ft+"; "+He,He=Math.abs(Number(rn)),te=He===1?te+(be?"++":"--"):te+((be?" += ":" -= ")+He),te+=`) {
`+Rn+`}
`;else{te="";let Le=at;at.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(at)||(Le=be.nameDB_.getDistinctName(He+"_start",i.NameType$$module$build$src$core$names.VARIABLE),te+="var "+Le+" = "+at+`;
`),at=Ft,Ft.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(Ft)||(at=be.nameDB_.getDistinctName(He+"_end",i.NameType$$module$build$src$core$names.VARIABLE),te+="var "+at+" = "+Ft+`;
`),Ft=be.nameDB_.getDistinctName(He+"_inc",i.NameType$$module$build$src$core$names.VARIABLE),te+="var "+Ft+" = ",te=i.isNumber$$module$build$src$core$utils$string(rn)?te+(Math.abs(Number(rn))+`;
`):te+("Math.abs("+rn+`);
`),te+="if ("+Le+" > "+at+`) {
`,te+=be.INDENT+Ft+" = -"+Ft+`;
`,te=te+`}
for (`+(He+" = "+Le+"; "+Ft+" >= 0 ? "+He+" <= "+at+" : "+He+" >= "+at+"; "+He+" += "+Ft+`) {
`+Rn+`}
`)}return te},ce=function(te,be){const He=be.getVariableName(te.getFieldValue("VAR"));var at=be.valueToCode(te,"LIST",Ie.ASSIGNMENT)||"[]";let Ft=be.statementToCode(te,"DO");Ft=be.addLoopTrap(Ft,te),te="";let rn=at;return at.match(/^\w+$/)||(rn=be.nameDB_.getDistinctName(He+"_list",i.NameType$$module$build$src$core$names.VARIABLE),te+="var "+rn+" = "+at+`;
`),at=be.nameDB_.getDistinctName(He+"_index",i.NameType$$module$build$src$core$names.VARIABLE),Ft=be.INDENT+He+" = "+rn+"["+at+`];
`+Ft,te+("for (var "+at+" in "+rn+`) {
`+Ft+`}
`)},pe=function(te,be){let He="";if(be.STATEMENT_PREFIX&&(He+=be.injectId(be.STATEMENT_PREFIX,te)),be.STATEMENT_SUFFIX&&(He+=be.injectId(be.STATEMENT_SUFFIX,te)),be.STATEMENT_PREFIX){const at=te.getSurroundLoop();at&&!at.suppressPrefixSuffix&&(He+=be.injectId(be.STATEMENT_PREFIX,at))}switch(te.getFieldValue("FLOW")){case"BREAK":return He+`break;
`;case"CONTINUE":return He+`continue;
`}throw Error("Unknown flow statement.")},Te=function(te,be){return te=Number(te.getFieldValue("NUM")),[String(te),0<=te?Ie.ATOMIC:Ie.UNARY_NEGATION]},Oe=function(te,be){var He={ADD:[" + ",Ie.ADDITION],MINUS:[" - ",Ie.SUBTRACTION],MULTIPLY:[" * ",Ie.MULTIPLICATION],DIVIDE:[" / ",Ie.DIVISION],POWER:[null,Ie.NONE]}[te.getFieldValue("OP")];const at=He[0];He=He[1];const Ft=be.valueToCode(te,"A",He)||"0";return te=be.valueToCode(te,"B",He)||"0",at?[Ft+at+te,He]:["Math.pow("+Ft+", "+te+")",Ie.FUNCTION_CALL]},J=function(te,be){const He=te.getFieldValue("OP");let at;if(He==="NEG")return te=be.valueToCode(te,"NUM",Ie.UNARY_NEGATION)||"0",te[0]==="-"&&(te=" "+te),["-"+te,Ie.UNARY_NEGATION];switch(te=He==="SIN"||He==="COS"||He==="TAN"?be.valueToCode(te,"NUM",Ie.DIVISION)||"0":be.valueToCode(te,"NUM",Ie.NONE)||"0",He){case"ABS":at="Math.abs("+te+")";break;case"ROOT":at="Math.sqrt("+te+")";break;case"LN":at="Math.log("+te+")";break;case"EXP":at="Math.exp("+te+")";break;case"POW10":at="Math.pow(10,"+te+")";break;case"ROUND":at="Math.round("+te+")";break;case"ROUNDUP":at="Math.ceil("+te+")";break;case"ROUNDDOWN":at="Math.floor("+te+")";break;case"SIN":at="Math.sin("+te+" / 180 * Math.PI)";break;case"COS":at="Math.cos("+te+" / 180 * Math.PI)";break;case"TAN":at="Math.tan("+te+" / 180 * Math.PI)"}if(at)return[at,Ie.FUNCTION_CALL];switch(He){case"LOG10":at="Math.log("+te+") / Math.log(10)";break;case"ASIN":at="Math.asin("+te+") / Math.PI * 180";break;case"ACOS":at="Math.acos("+te+") / Math.PI * 180";break;case"ATAN":at="Math.atan("+te+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+He)}return[at,Ie.DIVISION]},se=function(te,be){return{PI:["Math.PI",Ie.MEMBER],E:["Math.E",Ie.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",Ie.DIVISION],SQRT2:["Math.SQRT2",Ie.MEMBER],SQRT1_2:["Math.SQRT1_2",Ie.MEMBER],INFINITY:["Infinity",Ie.ATOMIC]}[te.getFieldValue("CONSTANT")]},ie=function(te,be){var He={EVEN:[" % 2 === 0",Ie.MODULUS,Ie.EQUALITY],ODD:[" % 2 === 1",Ie.MODULUS,Ie.EQUALITY],WHOLE:[" % 1 === 0",Ie.MODULUS,Ie.EQUALITY],POSITIVE:[" > 0",Ie.RELATIONAL,Ie.RELATIONAL],NEGATIVE:[" < 0",Ie.RELATIONAL,Ie.RELATIONAL],DIVISIBLE_BY:[null,Ie.MODULUS,Ie.EQUALITY],PRIME:[null,Ie.NONE,Ie.FUNCTION_CALL]};const at=te.getFieldValue("PROPERTY"),[Ft,rn,Rn]=He[at];return He=be.valueToCode(te,"NUMBER_TO_CHECK",rn)||"0",at==="PRIME"?te=be.provideFunction_("mathIsPrime",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+He+")":at==="DIVISIBLE_BY"?(te=be.valueToCode(te,"DIVISOR",Ie.MODULUS)||"0",te=He+" % "+te+" === 0"):te=He+Ft,[te,Rn]},he=function(te,be){const He=be.valueToCode(te,"DELTA",Ie.ADDITION)||"0";return te=be.getVariableName(te.getFieldValue("VAR")),te+" = (typeof "+te+" === 'number' ? "+te+" : 0) + "+He+`;
`},Se=function(te,be){var He=te.getFieldValue("OP");switch(He){case"SUM":te=be.valueToCode(te,"LIST",Ie.MEMBER)||"[]",te+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":te=be.valueToCode(te,"LIST",Ie.NONE)||"[]",te="Math.min.apply(null, "+te+")";break;case"MAX":te=be.valueToCode(te,"LIST",Ie.NONE)||"[]",te="Math.max.apply(null, "+te+")";break;case"AVERAGE":He=be.provideFunction_("mathMean",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),te=be.valueToCode(te,"LIST",Ie.NONE)||"[]",te=He+"("+te+")";break;case"MEDIAN":He=be.provideFunction_("mathMedian",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),te=be.valueToCode(te,"LIST",Ie.NONE)||"[]",te=He+"("+te+")";break;case"MODE":He=be.provideFunction_("mathModes",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),te=be.valueToCode(te,"LIST",Ie.NONE)||"[]",te=He+"("+te+")";break;case"STD_DEV":He=be.provideFunction_("mathStandardDeviation",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`),te=be.valueToCode(te,"LIST",Ie.NONE)||"[]",te=He+"("+te+")";break;case"RANDOM":He=be.provideFunction_("mathRandomList",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),te=be.valueToCode(te,"LIST",Ie.NONE)||"[]",te=He+"("+te+")";break;default:throw Error("Unknown operator: "+He)}return[te,Ie.FUNCTION_CALL]},Fe=function(te,be){const He=be.valueToCode(te,"DIVIDEND",Ie.MODULUS)||"0";return te=be.valueToCode(te,"DIVISOR",Ie.MODULUS)||"0",[He+" % "+te,Ie.MODULUS]},ke=function(te,be){const He=be.valueToCode(te,"VALUE",Ie.NONE)||"0",at=be.valueToCode(te,"LOW",Ie.NONE)||"0";return te=be.valueToCode(te,"HIGH",Ie.NONE)||"Infinity",["Math.min(Math.max("+He+", "+at+"), "+te+")",Ie.FUNCTION_CALL]},qe=function(te,be){const He=be.valueToCode(te,"FROM",Ie.NONE)||"0";return te=be.valueToCode(te,"TO",Ie.NONE)||"0",[be.provideFunction_("mathRandomInt",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+He+", "+te+")",Ie.FUNCTION_CALL]},De=function(te,be){return["Math.random()",Ie.FUNCTION_CALL]},rt=function(te,be){const He=be.valueToCode(te,"X",Ie.NONE)||"0";return["Math.atan2("+(be.valueToCode(te,"Y",Ie.NONE)||"0")+", "+He+") / Math.PI * 180",Ie.DIVISION]},tt=function(te,be){const He=be.getProcedureName(te.getFieldValue("NAME"));var at="";be.STATEMENT_PREFIX&&(at+=be.injectId(be.STATEMENT_PREFIX,te)),be.STATEMENT_SUFFIX&&(at+=be.injectId(be.STATEMENT_SUFFIX,te)),at&&(at=be.prefixLines(at,be.INDENT));let Ft="";be.INFINITE_LOOP_TRAP&&(Ft=be.prefixLines(be.injectId(be.INFINITE_LOOP_TRAP,te),be.INDENT));const rn=be.statementToCode(te,"STACK");let Rn=be.valueToCode(te,"RETURN",Ie.NONE)||"",Le="";rn&&Rn&&(Le=at),Rn&&(Rn=be.INDENT+"return "+Rn+`;
`);const gt=[],Ct=te.getVars();for(let Tt=0;Tt<Ct.length;Tt++)gt[Tt]=be.getVariableName(Ct[Tt]);return at="function "+He+"("+gt.join(", ")+`) {
`+at+Ft+rn+Le+Rn+"}",at=be.scrub_(te,at),be.definitions_["%"+He]=at,null},ft=function(te,be){const He=be.getProcedureName(te.getFieldValue("NAME")),at=[],Ft=te.getVars();for(let rn=0;rn<Ft.length;rn++)at[rn]=be.valueToCode(te,"ARG"+rn,Ie.NONE)||"null";return[He+"("+at.join(", ")+")",Ie.FUNCTION_CALL]},ct=function(te,be){return be.forBlock.procedures_callreturn(te,be)[0]+`;
`},Pe=function(te,be){let He="if ("+(be.valueToCode(te,"CONDITION",Ie.NONE)||"false")+`) {
`;return be.STATEMENT_SUFFIX&&(He+=be.prefixLines(be.injectId(be.STATEMENT_SUFFIX,te),be.INDENT)),te.hasReturnValue_?(te=be.valueToCode(te,"VALUE",Ie.NONE)||"null",He+=be.INDENT+"return "+te+`;
`):He+=be.INDENT+`return;
`,He+`}
`},Ce=function(te,be){return[be.quote_(te.getFieldValue("TEXT")),Ie.ATOMIC]},je=function(te,be){return te=be.multiline_quote_(te.getFieldValue("TEXT")),be=te.indexOf("+")!==-1?Ie.ADDITION:Ie.ATOMIC,[te,be]},it=function(te,be){switch(te.itemCount_){case 0:return["''",Ie.ATOMIC];case 1:return te=be.valueToCode(te,"ADD0",Ie.NONE)||"''",Kt(te);case 2:var He=be.valueToCode(te,"ADD0",Ie.NONE)||"''";return te=be.valueToCode(te,"ADD1",Ie.NONE)||"''",[Kt(He)[0]+" + "+Kt(te)[0],Ie.ADDITION];default:He=Array(te.itemCount_);for(let at=0;at<te.itemCount_;at++)He[at]=be.valueToCode(te,"ADD"+at,Ie.NONE)||"''";return["["+He.join(",")+"].join('')",Ie.FUNCTION_CALL]}},ot=function(te,be){const He=be.getVariableName(te.getFieldValue("VAR"));return te=be.valueToCode(te,"TEXT",Ie.NONE)||"''",He+" += "+Kt(te)[0]+`;
`},vt=function(te,be){return[(be.valueToCode(te,"VALUE",Ie.MEMBER)||"''")+".length",Ie.MEMBER]},It=function(te,be){return["!"+(be.valueToCode(te,"VALUE",Ie.MEMBER)||"''")+".length",Ie.LOGICAL_NOT]},yt=function(te,be){const He=te.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",at=be.valueToCode(te,"FIND",Ie.NONE)||"''";return be=(be.valueToCode(te,"VALUE",Ie.MEMBER)||"''")+"."+He+"("+at+")",te.workspace.options.oneBasedIndex?[be+" + 1",Ie.ADDITION]:[be,Ie.FUNCTION_CALL]},kt=function(te,be){const He=te.getFieldValue("WHERE")||"FROM_START",at=be.valueToCode(te,"VALUE",He==="RANDOM"?Ie.NONE:Ie.MEMBER)||"''";switch(He){case"FIRST":return[at+".charAt(0)",Ie.FUNCTION_CALL];case"LAST":return[at+".slice(-1)",Ie.FUNCTION_CALL];case"FROM_START":return te=be.getAdjusted(te,"AT"),[at+".charAt("+te+")",Ie.FUNCTION_CALL];case"FROM_END":return te=be.getAdjusted(te,"AT",1,!0),[at+".slice("+te+").charAt(0)",Ie.FUNCTION_CALL];case"RANDOM":return[be.provideFunction_("textRandomLetter",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+at+")",Ie.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},$t=function(te,be){var He={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const at=te.getFieldValue("WHERE1"),Ft=te.getFieldValue("WHERE2");var rn=at!=="FROM_END"&&at!=="LAST"&&Ft!=="FROM_END"&&Ft!=="LAST",Rn=be.valueToCode(te,"STRING",rn?Ie.MEMBER:Ie.NONE)||"''";if(at==="FIRST"&&Ft==="LAST")return[Rn,Ie.NONE];if(Rn.match(/^'?\w+'?$/)||rn){switch(at){case"FROM_START":He=be.getAdjusted(te,"AT1");break;case"FROM_END":He=be.getAdjusted(te,"AT1",1,!1,Ie.SUBTRACTION),He=Rn+".length - "+He;break;case"FIRST":He="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(Ft){case"FROM_START":be=be.getAdjusted(te,"AT2",1);break;case"FROM_END":be=be.getAdjusted(te,"AT2",0,!1,Ie.SUBTRACTION),be=Rn+".length - "+be;break;case"LAST":be=Rn+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}Rn=Rn+".slice("+He+", "+be+")"}else rn=be.getAdjusted(te,"AT1"),te=be.getAdjusted(te,"AT2"),Rn=be.provideFunction_("subsequence"+He[at]+He[Ft],`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(sequence${at==="FROM_END"||at==="FROM_START"?", at1":""}${Ft==="FROM_END"||Ft==="FROM_START"?", at2":""}) {
  var start = ${Xt("sequence",at,"at1")};
  var end = ${Xt("sequence",Ft,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+Rn+(at==="FROM_END"||at==="FROM_START"?", "+rn:"")+(Ft==="FROM_END"||Ft==="FROM_START"?", "+te:"")+")";return[Rn,Ie.FUNCTION_CALL]},mt=function(te,be){const He={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[te.getFieldValue("CASE")];return te=be.valueToCode(te,"TEXT",He?Ie.MEMBER:Ie.NONE)||"''",[He?te+He:be.provideFunction_("textToTitleCase",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+te+")",Ie.FUNCTION_CALL]},xe=function(te,be){const He={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[te.getFieldValue("MODE")];return[(be.valueToCode(te,"TEXT",Ie.MEMBER)||"''")+He,Ie.FUNCTION_CALL]},re=function(te,be){return"window.alert("+(be.valueToCode(te,"TEXT",Ie.NONE)||"''")+`);
`},Be=function(te,be){return be="window.prompt("+(te.getField("TEXT")?be.quote_(te.getFieldValue("TEXT")):be.valueToCode(te,"TEXT",Ie.NONE)||"''")+")",te.getFieldValue("TYPE")==="NUMBER"&&(be="Number("+be+")"),[be,Ie.FUNCTION_CALL]},dt=function(te,be){const He=be.valueToCode(te,"TEXT",Ie.NONE)||"''";return te=be.valueToCode(te,"SUB",Ie.NONE)||"''",[be.provideFunction_("textCount",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+He+", "+te+")",Ie.FUNCTION_CALL]},bt=function(te,be){const He=be.valueToCode(te,"TEXT",Ie.NONE)||"''",at=be.valueToCode(te,"FROM",Ie.NONE)||"''";return te=be.valueToCode(te,"TO",Ie.NONE)||"''",[be.provideFunction_("textReplace",`
function ${be.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+He+", "+at+", "+te+")",Ie.FUNCTION_CALL]},Mt=function(te,be){return[(be.valueToCode(te,"TEXT",Ie.MEMBER)||"''")+".split('').reverse().join('')",Ie.FUNCTION_CALL]},pt=function(te,be){return[be.getVariableName(te.getFieldValue("VAR")),Ie.ATOMIC]},Ke=function(te,be){const He=be.valueToCode(te,"VALUE",Ie.ASSIGNMENT)||"0";return be.getVariableName(te.getFieldValue("VAR"))+" = "+He+`;
`},Ie;(function(te){te[te.ATOMIC=0]="ATOMIC",te[te.NEW=1.1]="NEW",te[te.MEMBER=1.2]="MEMBER",te[te.FUNCTION_CALL=2]="FUNCTION_CALL",te[te.INCREMENT=3]="INCREMENT",te[te.DECREMENT=3]="DECREMENT",te[te.BITWISE_NOT=4.1]="BITWISE_NOT",te[te.UNARY_PLUS=4.2]="UNARY_PLUS",te[te.UNARY_NEGATION=4.3]="UNARY_NEGATION",te[te.LOGICAL_NOT=4.4]="LOGICAL_NOT",te[te.TYPEOF=4.5]="TYPEOF",te[te.VOID=4.6]="VOID",te[te.DELETE=4.7]="DELETE",te[te.AWAIT=4.8]="AWAIT",te[te.EXPONENTIATION=5]="EXPONENTIATION",te[te.MULTIPLICATION=5.1]="MULTIPLICATION",te[te.DIVISION=5.2]="DIVISION",te[te.MODULUS=5.3]="MODULUS",te[te.SUBTRACTION=6.1]="SUBTRACTION",te[te.ADDITION=6.2]="ADDITION",te[te.BITWISE_SHIFT=7]="BITWISE_SHIFT",te[te.RELATIONAL=8]="RELATIONAL",te[te.IN=8]="IN",te[te.INSTANCEOF=8]="INSTANCEOF",te[te.EQUALITY=9]="EQUALITY",te[te.BITWISE_AND=10]="BITWISE_AND",te[te.BITWISE_XOR=11]="BITWISE_XOR",te[te.BITWISE_OR=12]="BITWISE_OR",te[te.LOGICAL_AND=13]="LOGICAL_AND",te[te.LOGICAL_OR=14]="LOGICAL_OR",te[te.CONDITIONAL=15]="CONDITIONAL",te[te.ASSIGNMENT=16]="ASSIGNMENT",te[te.YIELD=17]="YIELD",te[te.COMMA=18]="COMMA",te[te.NONE=99]="NONE"})(Ie||(Ie={}));var q=class extends i.CodeGenerator$$module$build$src$core$generator{constructor(te="JavaScript"){super(te),this.ORDER_OVERRIDES=[[Ie.FUNCTION_CALL,Ie.MEMBER],[Ie.FUNCTION_CALL,Ie.FUNCTION_CALL],[Ie.MEMBER,Ie.MEMBER],[Ie.MEMBER,Ie.FUNCTION_CALL],[Ie.LOGICAL_NOT,Ie.LOGICAL_NOT],[Ie.MULTIPLICATION,Ie.MULTIPLICATION],[Ie.ADDITION,Ie.ADDITION],[Ie.LOGICAL_AND,Ie.LOGICAL_AND],[Ie.LOGICAL_OR,Ie.LOGICAL_OR]],this.isInitialized=!1;for(const be in Ie)te=Ie[be],typeof te!="string"&&(this["ORDER_"+be]=te);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(te){super.init(te),this.nameDB_?this.nameDB_.reset():this.nameDB_=new i.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(te.getVariableMap()),this.nameDB_.populateVariables(te),this.nameDB_.populateProcedures(te);const be=[];var He=i.allDeveloperVariables$$module$build$src$core$variables(te);for(let at=0;at<He.length;at++)be.push(this.nameDB_.getName(He[at],i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(te=i.allUsedVarModels$$module$build$src$core$variables(te),He=0;He<te.length;He++)be.push(this.nameDB_.getName(te[He].getId(),i.NameType$$module$build$src$core$names.VARIABLE));be.length&&(this.definitions_.variables="var "+be.join(", ")+";"),this.isInitialized=!0}finish(te){const be=Object.values(this.definitions_);return super.finish(te),this.isInitialized=!1,this.nameDB_.reset(),be.join(`

`)+`


`+te}scrubNakedValue(te){return te+`;
`}quote_(te){return te=te.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+te+"'"}multiline_quote_(te){return te.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(te,be,He=!1){let at="";if(!te.outputConnection||!te.outputConnection.targetConnection){var Ft=te.getCommentText();Ft&&(Ft=i.wrap$$module$build$src$core$utils$string(Ft,this.COMMENT_WRAP-3),at+=this.prefixLines(Ft+`
`,"// "));for(let rn=0;rn<te.inputList.length;rn++)te.inputList[rn].type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(Ft=te.inputList[rn].connection.targetBlock())&&(Ft=this.allNestedComments(Ft))&&(at+=this.prefixLines(Ft,"// "))}return te=te.nextConnection&&te.nextConnection.targetBlock(),He=He?"":this.blockToCode(te),at+be+He}getAdjusted(te,be,He=0,at=!1,Ft=Ie.NONE){te.workspace.options.oneBasedIndex&&He--;const rn=te.workspace.options.oneBasedIndex?"1":"0";let Rn=Ft;return 0<He?Rn=Ie.ADDITION:0>He?Rn=Ie.SUBTRACTION:at&&(Rn=Ie.UNARY_NEGATION),te=this.valueToCode(te,be,Rn)||rn,He===0&&!at?te:i.isNumber$$module$build$src$core$utils$string(te)?(te=String(Number(te)+He),at&&(te=String(-Number(te))),te):(0<He?te=`${te} + ${He}`:0>He&&(te=`${te} - ${-He}`),at&&(te=He?`-(${te})`:`-${te}`),Math.floor(Ft)>=Math.floor(Rn)&&(te=`(${te})`),te)}},ee={};ee.colour_blend=u,ee.colour_picker=s,ee.colour_random=o,ee.colour_rgb=l;var de=function(te,be,He){return be==="FIRST"?"0":be==="FROM_END"?te+".length - 1 - "+He:be==="LAST"?te+".length - 1":He},Ae={};Ae.lists_create_empty=d,Ae.lists_create_with=p,Ae.lists_getIndex=C,Ae.lists_getSublist=I,Ae.lists_indexOf=E,Ae.lists_isEmpty=b,Ae.lists_length=y,Ae.lists_repeat=_,Ae.lists_reverse=P,Ae.lists_setIndex=A,Ae.lists_sort=L,Ae.lists_split=O;var Je={};Je.controls_if=N,Je.controls_ifelse=N,Je.logic_boolean=U,Je.logic_compare=z,Je.logic_negate=H,Je.logic_null=Q,Je.logic_operation=W,Je.logic_ternary=ne;var jt={};jt.controls_flow_statements=pe,jt.controls_for=ge,jt.controls_forEach=ce,jt.controls_repeat=oe,jt.controls_repeat_ext=oe,jt.controls_whileUntil=le;var ze={};ze.math_arithmetic=Oe,ze.math_atan2=rt,ze.math_change=he,ze.math_constant=se,ze.math_constrain=ke,ze.math_modulo=Fe,ze.math_number=Te,ze.math_number_property=ie,ze.math_on_list=Se,ze.math_random_float=De,ze.math_random_int=qe,ze.math_round=J,ze.math_single=J,ze.math_trig=J;var Yt={};Yt.procedures_callnoreturn=ct,Yt.procedures_callreturn=ft,Yt.procedures_defnoreturn=tt,Yt.procedures_defreturn=tt,Yt.procedures_ifreturn=Pe;var _t=/^\s*'([^']|\\')*'\s*$/,Kt=function(te){return _t.test(te)?[te,Ie.ATOMIC]:["String("+te+")",Ie.FUNCTION_CALL]},Xt=function(te,be,He){return be==="FIRST"?"0":be==="FROM_END"?te+".length - 1 - "+He:be==="LAST"?te+".length - 1":He},Dn={};Dn.text=Ce,Dn.text_append=ot,Dn.text_changeCase=mt,Dn.text_charAt=kt,Dn.text_count=dt,Dn.text_getSubstring=$t,Dn.text_indexOf=yt,Dn.text_isEmpty=It,Dn.text_join=it,Dn.text_length=vt,Dn.text_multiline=je,Dn.text_print=re,Dn.text_prompt=Be,Dn.text_prompt_ext=Be,Dn.text_replace=bt,Dn.text_reverse=Mt,Dn.text_trim=xe;var ii={};ii.variables_get=pt,ii.variables_set=Ke;var Lr={};Lr.variables_get_dynamic=pt,Lr.variables_set_dynamic=Ke;var Si=new q,Er=Object.assign({},ee,Ae,Je,jt,ze,Yt,Dn,ii,Lr);for(const te in Er)Si.forBlock[te]=Er[te];var ir={};return ir.JavascriptGenerator=q,ir.Order=Ie,ir.javascriptGenerator=Si,ir.__namespace__=i,ir})}(Vk)),Vk.exports}(function(n,e){(function(t,i){n.exports=i(vB(),Cq())})(Wl,function(t,i){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return i})})(KW);var KS=KW.exports,sU;function Aq(){return sU||(sU=1,function(n,e){(function(t,i){n.exports=i(vB(),xq(),$q(),KS)})(Wl,function(t,i,s,o){return t.setLocale(i),t})}(Pk)),Pk.exports}(function(n,e){(function(t,i){n.exports=i(Aq())})(Wl,function(t){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})})(YW);var lg=YW.exports,At=vB();const Mq={colour:"#D92626"},Iq={colour:"#7F7F7F"},Rq={colour:"#8C564B"},kq={colour:"#212121"},Oq={colour:"#CC6633"},Lq={colour:"#25B14B"},Dq={colour:"#33CCB3"},Nq={colour:"#3366CC"},Bq={colour:"#7F33CC"},Pq={colour:"#CC3399"},Pt={logic_category:Mq,loop_category:Iq,math_category:Rq,procedure_category:kq,movement_category:Oq,light_category:Lq,speech_category:Dq,face_category:Nq,audio_category:Bq,misc_category:Pq};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lf extends At.FieldNumber{constructor(e,t,i,s,o,l,u,d){super(e,t,i,s,u,d),this.boundEvents=[],this.sliderInput=null,this.leftLabel=o,this.rightLabel=l}setLeftLabel(e){this.leftLabel=e}setRightLabel(e){this.rightLabel=e}setLabels(e,t){this.leftLabel=e,this.rightLabel=t}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,void 0,void 0,e)}showEditor_(e,t){super.showEditor_(e,!0);const i=this.dropdownCreate_();At.DropDownDiv.getContentDiv().appendChild(i);const s=this.getSourceBlock();if(s instanceof At.BlockSvg){const o=s.getColour()||"",l=s.getColourTertiary()||"";At.DropDownDiv.setColour(o,l)}At.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),t||i.firstChild.focus({preventScroll:!0})}render_(){super.render_(),this.updateSlider_()}static createLabelInContainer(e,t){const i=document.createElement("div"),s=document.createElement("span"),o=document.createElement("span");return i.classList.add("mathNumSliderLabel"),s.textContent=e,i.appendChild(s),i.appendChild(o),t.appendChild(i),o}dropdownCreate_(){const e=document.createElement("div");e.className="mathNumSliderContainer",this.leftLabel&&lf.createLabelInContainer(this.leftLabel,e);const t=document.createElement("input");return t.setAttribute("type","range"),t.setAttribute("min",`${this.min_}`),t.setAttribute("max",`${this.max_}`),t.setAttribute("step",`${this.precision_}`),t.setAttribute("value",`${this.getValue()}`),t.setAttribute("tabindex","0"),t.className="mathNumSlider",e.appendChild(t),this.rightLabel&&lf.createLabelInContainer(this.rightLabel,e),this.sliderInput=t,this.boundEvents.push(At.browserEvents.conditionalBind(t,"input",this,this.onSliderChange_)),e}dropdownDispose_(){for(const e of this.boundEvents)At.browserEvents.unbind(e);this.boundEvents.length=0,this.sliderInput=null}onSliderChange_(){var t;const e=this.value_;this.setEditorValue_((t=this.sliderInput)==null?void 0:t.value,!1),this.getSourceBlock()&&At.Events.fire(new(At.Events.get(At.Events.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_)),this.resizeEditor_()}updateSlider_(){this.sliderInput&&this.sliderInput.setAttribute("value",`${this.getValue()}`)}}At.fieldRegistry.register("math_num_slider",lf);At.Css.register(`
.mathNumSliderContainer {
  align-items: center;
  display: flex;
  height: 32px;
  justify-content: center;
  width: 150px;
}
.mathNumSliderLabel {
    color: white;
}
.mathNumSlider {
  -webkit-appearance: none;
  background: transparent; /* override white in chrome */
  margin: 4px;
  padding: 0;
  width: 100%;
}
.mathNumSlider:focus {
  outline: none;
}
/* Webkit */
.mathNumSlider::-webkit-slider-runnable-track {
  background: #ddd;
  border-radius: 5px;
  height: 10px;
}
.mathNumSlider::-webkit-slider-thumb {
  -webkit-appearance: none;
  background: #fff;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(255,255,255,.15);
  cursor: pointer;
  height: 24px;
  margin-top: -7px;
  width: 24px;
}
/* Firefox */
.mathNumSlider::-moz-range-track {
  background: #ddd;
  border-radius: 5px;
  height: 10px;
}
.mathNumSlider::-moz-range-thumb {
  background: #fff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(255,255,255,.15);
  cursor: pointer;
  height: 24px;
  width: 24px;
}
.mathNumSlider::-moz-focus-outer {
  /* override the focus border style */
  border: 0;
}
/* IE */
.mathNumSlider::-ms-track {
  /* IE wont let the thumb overflow the track, so fake it */
  background: transparent;
  border-color: transparent;
  border-width: 15px 0;
  /* remove default tick marks */
  color: transparent;
  height: 10px;
  width: 100%;
  margin: -4px 0;
}
.mathNumSlider::-ms-fill-lower  {
  background: #ddd;
  border-radius: 5px;
}
.mathNumSlider::-ms-fill-upper  {
  background: #ddd;
  border-radius: 5px;
}
.mathNumSlider::-ms-thumb {
  background: #fff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(255,255,255,.15);
  cursor: pointer;
  height: 24px;
  width: 24px;
}
`);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Gt=[];const Fq={type:"add_text",message0:"Add text %1 with color %2",args0:[{type:"input_value",name:"TEXT",check:"String"},{type:"input_value",name:"COLOR",check:"Colour"}],previousStatement:null,nextStatement:null,colour:160,tooltip:"",helpUrl:""};let JW="ChangeLED";Gt.push(JW);At.Blocks[JW]={init:function(){this.setColour(Pt.light_category.colour),this.appendValueInput("FIELD_ChangeLED").setCheck("Colour").appendField("Change the LED color to"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setOutput(!1),this.setTooltip("Changes Misty's LED to a specified color")}};let qW="TransitionLED";Gt.push(qW);At.Blocks[qW]={init:function(){this.setColour(Pt.light_category.colour),this.appendValueInput("COLOR1").setCheck("Colour").appendField("Transition LED from"),this.appendValueInput("COLOR2").setCheck("Colour").appendField("to"),this.appendDummyInput().appendField("using the").appendField(new At.FieldDropdown([["Breathe","BREATHE"],["Blink","BLINK"],["Transition Once","TRANSITION_ONCE"]]),"TRANSITION_TYPE").appendField("transition"),this.appendDummyInput().appendField("for a duration of").appendField(new At.FieldNumber(1,0,60,1),"FIELD_TransitionTime_TimeMs").appendField("secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Transition LED between two colors with the specified transition type and time.")}};let QW="DisplayImage";Gt.push(QW);At.Blocks[QW]={init:function(){this.setColour(Pt.face_category.colour),this.appendValueInput("FIELD_DisplayImage_Filename").setCheck("Face").appendField("Change face expression to: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Displays an image on Misty's screen, Alpha specifies transparency (0 is completely transparent, 1 is completely opaque) ***WARNING: MUST connect with ListFilesAvailable to select the image file to display***")}};let ZW="DisplayAnimation";Gt.push(ZW);At.Blocks[ZW]={init:function(){this.setColour(Pt.misc_category.colour),this.appendValueInput("FIELD_DisplayAnimation_Filename").setCheck("Animation").appendField("Show this animation on Misty: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Runs a specified animation on Misty")}};let eV="MoveHead";Gt.push(eV);At.Blocks[eV]={init:function(){this.setColour(Pt.movement_category.colour),this.appendDummyInput().appendField("Move head").appendField(new At.FieldDropdown([["Up","U"],["Down","D"]]),"FIELD_MoveHead_Pitch"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves Misty's head Up or Down")}};let tV="MoveArm";Gt.push(tV);At.Blocks[tV]={init:function(){this.setColour(Pt.movement_category.colour),this.appendDummyInput().appendField("Move ").appendField(new At.FieldDropdown([["Right","Right"],["Left","Left"]]),"FIELD_MoveArm_Arm").appendField("arm to position").appendField(new lf(45,-29,90,1,"Up","Down"),"FIELD_MoveArm_Position").appendField("at a speed of (0 to 100)").appendField(new lf(50,0,100,1,"Slow","Fast"),"FIELD_MoveArm_Velocity"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves one of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed (between 0 and 100)")}};let nV="MoveArm2";Gt.push(nV);At.Blocks[nV]={init:function(){this.setColour(Pt.movement_category.colour),this.appendDummyInput().appendField("Move both arms to position").appendField(new lf(45,-29,90,1,"Up","Down"),"FIELD_MoveArm2_Position").appendField("at a speed of (0 to 100)").appendField(new lf(50,0,100,1,"Slow","Fast"),"FIELD_MoveArm2_Velocity"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed (between 0 and 100)")}};let rV="BasicSlider";Gt.push(rV);At.Blocks[rV]={init:function(){this.setColour(Pt.math_category.colour),this.appendDummyInput().appendField("Slider Value: ").appendField(new lf(0,0,100,1,"Min","Max"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let iV="ArmPositionSlider";Gt.push(iV);At.Blocks[iV]={init:function(){this.setColour(Pt.math_category.colour),this.appendDummyInput().appendField(new lf(45,-29,90,1,"Up","Down"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let sV="SpeedSlider";Gt.push(sV);At.Blocks[sV]={init:function(){this.setColour(Pt.math_category.colour),this.appendDummyInput().appendField(new lf(1,1,100,1,"Slow","Fast"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let oV="TimeSlider";Gt.push(oV);At.Blocks[oV]={init:function(){this.setColour(Pt.math_category.colour),this.appendDummyInput().appendField(new lf(1,1,60,1,"Short","Long"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let FI="HeadPitchSlider";Gt.push(FI);At.Blocks[FI]={init:function(){this.setColour(Pt.math_category.colour),this.appendDummyInput().appendField(new lf(0,-40,25,1,"Up","Down"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};Gt.push(FI);At.Blocks[FI]={init:function(){this.setColour(Pt.math_category.colour),this.appendDummyInput().appendField(new lf(0,-40,40,1,"Right","Left"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let aV="HeadYawSlider";Gt.push(aV);At.Blocks[aV]={init:function(){this.setColour(Pt.math_category.colour),this.appendDummyInput().appendField(new lf(0,-81,81,1,"Right","Left"),"FIELD_slider_value"),this.setInputsInline(!1),this.setOutput(!0,null)}};let lV="MoveArms2";Gt.push(lV);At.Blocks[lV]={init:function(){var n=this.workspace.newBlock("ArmPositionSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("SpeedSlider");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection,s=this.workspace.newBlock("ArmPositionSlider");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection,l=this.workspace.newBlock("SpeedSlider");l.setShadow(!0),l.initSvg(),l.render();var u=l.outputConnection;this.setColour(Pt.movement_category.colour),this.appendValueInput("FIELD_MoveArm_LeftPosition").setCheck("Number").appendField("Left Arm Position");var d=this.getInput("FIELD_MoveArm_LeftPosition").connection;d.connect(e),this.appendValueInput("FIELD_MoveArm_LeftVelocity").setCheck("Number").appendField("Left Arm Speed");var _=this.getInput("FIELD_MoveArm_LeftVelocity").connection;_.connect(i),this.appendValueInput("FIELD_MoveArm_RightPosition").setCheck("Number").appendField("Right Arm Position");var p=this.getInput("FIELD_MoveArm_RightPosition").connection;p.connect(o),this.appendValueInput("FIELD_MoveArm_RightVelocity").setCheck("Number").appendField("Right Arm Speed");var _=this.getInput("FIELD_MoveArm_RightVelocity").connection;_.connect(u),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed")}};let uV="MoveArm3";Gt.push(uV);At.Blocks[uV]={init:function(){var n=this.workspace.newBlock("ArmPositionSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("SpeedSlider");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection;this.appendDummyInput().appendField("Move Arm: ").appendField(new At.FieldDropdown([["Right","Right"],["Left","Left"]]),"FIELD_MoveArm_Arm"),this.setColour(Pt.movement_category.colour),this.appendValueInput("FIELD_MoveArm_Position").setCheck("Number").appendField("Left Arm Position");var s=this.getInput("FIELD_MoveArm_Position").connection;s.connect(e),this.appendValueInput("FIELD_MoveArm_Velocity").setCheck("Number").appendField("Left Arm Speed");var o=this.getInput("FIELD_MoveArm_Velocity").connection;o.connect(i),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed")}};let cV="DriveTime";Gt.push(cV);At.Blocks[cV]={init:function(){this.setColour(Pt.movement_category.colour),this.appendDummyInput().appendField("Move ").appendField(new At.FieldDropdown([["Forward","F"],["Backward","B"]]),"FIELD_DriveTime_Direction").appendField("at a speed of (0 to 100)").appendField(new At.FieldNumber(25,0,100,1),"FIELD_DriveTime_Velocity").appendField("for a duration of").appendField(new At.FieldNumber(1,0,60,1),"FIELD_DriveTime_TimeMs").appendField("secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Drives Misty straight in a specified direction at a specified speed for a specified amount of time (1000ms = 1 second)")}};let hV="MoveHead3";Gt.push(hV);At.Blocks[hV]={init:function(){var n=this.workspace.newBlock("HeadPitchSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("HeadRollSlider");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection,s=this.workspace.newBlock("HeadYawSlider");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection,l=this.workspace.newBlock("TimeSlider");l.setShadow(!0),l.initSvg(),l.render();var u=l.outputConnection;this.setColour(Pt.movement_category.colour),this.appendDummyInput("FIELD_TEXT_IGNORE").appendField("Move head"),this.appendValueInput("FIELD_MoveHead_Pitch").setCheck("Number").appendField("Look Up/Down:");var d=this.getInput("FIELD_MoveHead_Pitch").connection;d.connect(e),this.appendValueInput("FIELD_MoveHead_Roll").setCheck("Number").appendField("Tilt Left/Right:");var p=this.getInput("FIELD_MoveHead_Roll").connection;p.connect(i),this.appendValueInput("FIELD_MoveHead_Yaw").setCheck("Number").appendField("Look Right/Left:");var _=this.getInput("FIELD_MoveHead_Yaw").connection;_.connect(o),this.appendValueInput("FIELD_MoveHead_Time").setCheck("Number").appendField("Time (seconds):");var y=this.getInput("FIELD_MoveHead_Time").connection;y.connect(u),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves Misty's head a specified amount of degrees with roll, pitch, and/or yaw")}};let dV="DriveTime2";Gt.push(dV);At.Blocks[dV]={init:function(){var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("math_number");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection,s=this.workspace.newBlock("math_number");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection;this.setColour(Pt.movement_category.colour),this.appendValueInput("FIELD_DriveTime_Velocity").setCheck("Number").appendField("Move at a speed of (-100 to 100)");var l=this.getInput("FIELD_DriveTime_Velocity").connection;l.connect(e),this.appendValueInput("FIELD_DriveTime_Angular").setCheck("Number").appendField("with angular velocity of (-100 CW to 100 CCW)");var u=this.getInput("FIELD_DriveTime_Angular").connection;u.connect(i),this.appendValueInput("FIELD_DriveTime_TimeMs").setCheck("Number").appendField("for a duration of secs");var d=this.getInput("FIELD_DriveTime_TimeMs").connection;d.connect(o),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Drives Misty forward (positive speed) or backward (negative speed) with possible turning using angular velocity (0 for straight) for the specified duration (1000 ms = 1 second)")}};let pV="Turn";Gt.push(pV);At.Blocks[pV]={init:function(){this.setColour(Pt.movement_category.colour),this.appendDummyInput().appendField("Turn").appendField(new At.FieldDropdown([["Left","L"],["Right","R"]]),"FIELD_Turn_Direction").appendField("for time of").appendField(new At.FieldNumber(4500),"FIELD_Turn_Duration").appendField("milliseconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turns Misty in the specified direction (1000ms = 1 second and 4500ms is approximately 90 degrees)")}};let fV="Turn2";Gt.push(fV);At.Blocks[fV]={init:function(){var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection;this.setColour(Pt.movement_category.colour),this.appendDummyInput().appendField("Turn").appendField(new At.FieldDropdown([["Left","L"],["Right","R"]]),"FIELD_Turn_Direction"),this.appendValueInput("FIELD_Turn_Duration").setCheck("Number").appendField("for time of");var t=this.getInput("FIELD_Turn_Duration").connection;t.connect(e),this.appendDummyInput().appendField("milliseconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turns Misty in the specified direction (1000ms = 1 second and 4500ms is approximately 90 degrees)")}};let mV="Speak";Gt.push(mV);At.Blocks[mV]={init:function(){this.setColour(Pt.speech_category.colour),this.appendValueInput("FIELD_Speak_Text").setCheck("String").appendField("Speak: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Speak given input text")}};let gV="SpeakDefault";Gt.push(gV);At.Blocks[gV]={init:function(){this.setColour(Pt.speech_category.colour),this.appendDummyInput().appendField("Speak: ").appendField(new At.FieldDropdown([["Hi","Hi"],["Hello","Hello"],["How are you today?","How are you today?"],["Goodbye","Goodbye"]]),"FIELD_SpeakDefault_Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Speak given selected default text")}};let _V="TurnOnFlashlight";Gt.push(_V);At.Blocks[_V]={init:function(){this.setColour(Pt.light_category.colour),this.appendDummyInput().appendField("Turn on flashlight "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turn on flashlight")}};let vV="TurnOffFlashlight";Gt.push(vV);At.Blocks[vV]={init:function(){this.setColour(Pt.light_category.colour),this.appendDummyInput().appendField("Turn off flashlight "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turn off flashlight")}};let yV="WaitForSeconds";Gt.push(yV);At.Blocks[yV]={init:function(){this.appendDummyInput().appendField("wait for"),this.appendDummyInput().setAlign(At.ALIGN_CENTRE).appendField(new At.FieldNumber(0,-1/0,1/0,.1),"NumSeconds"),this.appendDummyInput().appendField("Seconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(Pt.misc_category.colour),this.setTooltip("Delay the execution of the next block by some number of seconds")}};let bV="PlayAudio";Gt.push(bV);At.Blocks[bV]={init:function(){this.setColour(Pt.audio_category.colour),this.appendValueInput("FIELD_PlayAudio_Filename").setCheck("Audio").appendField("Play audio: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};let TV="SetVolume";Gt.push(TV);At.Blocks[TV]={init:function(){this.setColour(Pt.audio_category.colour);var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection;this.appendValueInput("FIELD_Volume").setCheck("Number").appendField("Set volume to (0-100): ");var t=this.getInput("FIELD_Volume").connection;t.connect(e),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Adjusts Misty's volume level for audio playback")}};let SV="DisplayText";Gt.push(SV);At.Blocks[SV]={init:function(){this.setColour(Pt.misc_category.colour),this.appendDummyInput().appendField("Display Text: ").appendField(new At.FieldTextInput("default"),"FIELD_DisplayText_Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};let EV="ClearText";Gt.push(EV);At.Blocks[EV]={init:function(){this.setColour(Pt.misc_category.colour),this.appendDummyInput().appendField("Clear Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};let xV="eyes_acceptance";Gt.push(xV);At.Blocks[xV]={init:function(){this.appendDummyInput().appendField("Expression: acceptance"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'acceptance'")}};let wV="eyes_admiration";Gt.push(wV);At.Blocks[wV]={init:function(){this.appendDummyInput().appendField("Expression: admiration"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'admiration'")}};let $V="eyes_amazement";Gt.push($V);At.Blocks[$V]={init:function(){this.appendDummyInput().appendField("Expression: amazement"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'amazement'")}};let CV="eyes_anger";Gt.push(CV);At.Blocks[CV]={init:function(){this.appendDummyInput().appendField("Expression: anger"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'anger'")}};let AV="eyes_annoyed";Gt.push(AV);At.Blocks[AV]={init:function(){this.appendDummyInput().appendField("Expression: annoyed"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'annoyed'")}};let MV="eyes_anticipation";Gt.push(MV);At.Blocks[MV]={init:function(){this.appendDummyInput().appendField("Expression: anticipation"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'anticipation'")}};let IV="eyes_apprehension";Gt.push(IV);At.Blocks[IV]={init:function(){this.appendDummyInput().appendField("Expression: apprehension"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'apprehension'")}};let RV="eyes_boredom";Gt.push(RV);At.Blocks[RV]={init:function(){this.appendDummyInput().appendField("Expression: boredom"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'boredom'")}};let kV="eyes_default";Gt.push(kV);At.Blocks[kV]={init:function(){this.appendDummyInput().appendField("Expression: default"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'default'")}};let OV="eyes_disgust";Gt.push(OV);At.Blocks[OV]={init:function(){this.appendDummyInput().appendField("Expression: disgust"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'disgust'")}};let LV="eyes_distraction";Gt.push(LV);At.Blocks[LV]={init:function(){this.appendDummyInput().appendField("Expression: distraction"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'distraction'")}};let DV="eyes_ecstasy_frame_1";Gt.push(DV);At.Blocks[DV]={init:function(){this.appendDummyInput().appendField("Expression: ecstasy 1"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'ecstasy 1'")}};let NV="eyes_ecstasy_frame_2";Gt.push(NV);At.Blocks[NV]={init:function(){this.appendDummyInput().appendField("Expression: ecstasy 2"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'ecstasy 2'")}};let BV="eyes_fear";Gt.push(BV);At.Blocks[BV]={init:function(){this.appendDummyInput().appendField("Expression: fear"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'fear'")}};let PV="eyes_grief";Gt.push(PV);At.Blocks[PV]={init:function(){this.appendDummyInput().appendField("Expression: grief"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'grief'")}};let FV="eyes_interest";Gt.push(FV);At.Blocks[FV]={init:function(){this.appendDummyInput().appendField("Expression: interest"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'interest'")}};let Uq="eyes_joy";Gt.push(Uq);At.Blocks.eyes_joy={init:function(){this.appendDummyInput().appendField("Expression: joy"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'joy'")}};let zq="eyes_loathing";Gt.push(zq);At.Blocks.eyes_loathing={init:function(){this.appendDummyInput().appendField("Expression: loathing"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'loathing'")}};let Hq="eyes_pensiveness";Gt.push(Hq);At.Blocks.eyes_pensiveness={init:function(){this.appendDummyInput().appendField("Expression: pensiveness"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'pensiveness'")}};let Gq="eyes_rage";Gt.push(Gq);At.Blocks.eyes_rage={init:function(){this.appendDummyInput().appendField("Expression: rage eyes"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'rage eyes'")}};let Wq="eyes_sad";Gt.push(Wq);At.Blocks.eyes_sad={init:function(){this.appendDummyInput().appendField("Expression: sad"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'sad'")}};let Vq="eyes_serenity";Gt.push(Vq);At.Blocks.eyes_serenity={init:function(){this.appendDummyInput().appendField("Expression: serenity"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'serenity'")}};let jq="eyes_surprise";Gt.push(jq);At.Blocks.eyes_surprise={init:function(){this.appendDummyInput().appendField("Expression: surprise"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'surprise'")}};let Xq="eyes_terror";Gt.push(Xq);At.Blocks.eyes_terror={init:function(){this.appendDummyInput().appendField("Expression: terror"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'terror'")}};let Yq="eyes_trust";Gt.push(Yq);At.Blocks.eyes_trust={init:function(){this.appendDummyInput().appendField("Expression: trust"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'trust'")}};let Kq="eyes_vigilance";Gt.push(Kq);At.Blocks.eyes_vigilance={init:function(){this.appendDummyInput().appendField("Expression: vigilance"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'vigilance'")}};let Jq="e_Sleeping";Gt.push(Jq);At.Blocks.e_Sleeping={init:function(){this.appendDummyInput().appendField("Expression: sleeping"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'sleeping'")}};let qq="e_SleepingZZZ";Gt.push(qq);At.Blocks.e_SleepingZZZ={init:function(){this.appendDummyInput().appendField("Expression: sleeping ZZZ"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'sleeping ZZZ'")}};let Qq="e_Contempt";Gt.push(Qq);At.Blocks.e_Contempt={init:function(){this.appendDummyInput().appendField("Expression: contempt"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'contempt'")}};let Zq="e_ContentLeft";Gt.push(Zq);At.Blocks.e_ContentLeft={init:function(){this.appendDummyInput().appendField("Expression: content (left)"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'content (left)'")}};let eQ="e_ContentRight";Gt.push(eQ);At.Blocks.e_ContentRight={init:function(){this.appendDummyInput().appendField("Expression: content (right)"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'content (right)'")}};let tQ="e_Disoriented";Gt.push(tQ);At.Blocks.e_Disoriented={init:function(){this.appendDummyInput().appendField("Expression: disoriented"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'disoriented'")}};let nQ="e_EcstacyHilarious";Gt.push(nQ);At.Blocks.e_EcstacyHilarious={init:function(){this.appendDummyInput().appendField("Expression: ecstacy hilarious"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'ecstacy hilarious'")}};let rQ="e_EcstacyStarryEyed";Gt.push(rQ);At.Blocks.e_EcstacyStarryEyed={init:function(){this.appendDummyInput().appendField("Expression: ecstacy starry eyed"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'ecstacy starry eyed'")}};let iQ="e_JoyGoofy";Gt.push(iQ);At.Blocks.e_JoyGoofy={init:function(){this.appendDummyInput().appendField("Expression: joy goofy"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'joy goofy'")}};let sQ="e_JoyGoofy2";Gt.push(sQ);At.Blocks.e_JoyGoofy2={init:function(){this.appendDummyInput().appendField("Expression: joy goofy 2"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'joy goofy 2'")}};let oQ="e_JoyGoofy3";Gt.push(oQ);At.Blocks.e_JoyGoofy3={init:function(){this.appendDummyInput().appendField("Expression: joy goofy 3"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'joy goofy 3'")}};let aQ="e_Love";Gt.push(aQ);At.Blocks.e_Love={init:function(){this.appendDummyInput().appendField("Expression: love"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'love'")}};let lQ="e_Rage";Gt.push(lQ);At.Blocks.e_Rage={init:function(){this.appendDummyInput().appendField("Expression: rage"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'rage'")}};let uQ="e_Rage2";Gt.push(uQ);At.Blocks.e_Rage2={init:function(){this.appendDummyInput().appendField("Expression: rage 2"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'rage 2'")}};let cQ="e_Rage3";Gt.push(cQ);At.Blocks.e_Rage3={init:function(){this.appendDummyInput().appendField("Expression: rage 3"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'rage 3'")}};let hQ="e_Rage4";Gt.push(hQ);At.Blocks.e_Rage4={init:function(){this.appendDummyInput().appendField("Expression: rage 4"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'rage 4'")}};let dQ="e_RemorseShame";Gt.push(dQ);At.Blocks.e_RemorseShame={init:function(){this.appendDummyInput().appendField("Expression: remorse shame"),this.setOutput(!0,"Face"),this.setColour(Pt.face_category.colour),this.setTooltip("Represents the facial expression 'remorse shame'")}};At.Blocks["animation_sleepy.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Sleeping"),this.setOutput(!0,"Animation"),this.setColour(Pt.face_category.colour),this.setTooltip("Run the animation 'sleepy'")}};At.Blocks["animation_dancing.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Dancing"),this.setOutput(!0,"Animation"),this.setColour(Pt.face_category.colour),this.setTooltip("Run the animation 'dancing'")}};At.Blocks["animation_spooked.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Spooked"),this.setOutput(!0,"Animation"),this.setColour(Pt.face_category.colour),this.setTooltip("Run the animation 'spooked'")}};let pQ="s_Acceptance";Gt.push(pQ);At.Blocks.s_Acceptance={init:function(){this.appendDummyInput().appendField("Sound: acceptance"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'acceptance'")}};let fQ="s_Amazement";Gt.push(fQ);At.Blocks.s_Amazement={init:function(){this.appendDummyInput().appendField("Sound: amazement"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'amazement'")}};let mQ="s_Amazement2";Gt.push(mQ);At.Blocks.s_Amazement2={init:function(){this.appendDummyInput().appendField("Sound: amazement 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'amazement 2'")}};let gQ="s_Anger";Gt.push(gQ);At.Blocks.s_Anger={init:function(){this.appendDummyInput().appendField("Sound: anger"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'anger'")}};let _Q="s_Anger2";Gt.push(_Q);At.Blocks.s_Anger2={init:function(){this.appendDummyInput().appendField("Sound: anger 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'anger 2'")}};let vQ="s_Anger3";Gt.push(vQ);At.Blocks.s_Anger3={init:function(){this.appendDummyInput().appendField("Sound: anger 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'anger 3'")}};let yQ="s_Anger4";Gt.push(yQ);At.Blocks.s_Anger4={init:function(){this.appendDummyInput().appendField("Sound: anger 4"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'anger 4'")}};let bQ="s_Annoyance";Gt.push(bQ);At.Blocks.s_Annoyance={init:function(){this.appendDummyInput().appendField("Sound: annoyance"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'annoyance'")}};let TQ="s_Annoyance2";Gt.push(TQ);At.Blocks.s_Annoyance2={init:function(){this.appendDummyInput().appendField("Sound: annoyance 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'annoyance 2'")}};let SQ="s_Annoyance3";Gt.push(SQ);At.Blocks.s_Annoyance3={init:function(){this.appendDummyInput().appendField("Sound: annoyance 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'annoyance 3'")}};let EQ="s_Annoyance4";Gt.push(EQ);At.Blocks.s_Annoyance4={init:function(){this.appendDummyInput().appendField("Sound: annoyance 4"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'annoyance 4'")}};let xQ="s_Awe";Gt.push(xQ);At.Blocks.s_Awe={init:function(){this.appendDummyInput().appendField("Sound: awe"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'awe'")}};let wQ="s_Awe2";Gt.push(wQ);At.Blocks.s_Awe2={init:function(){this.appendDummyInput().appendField("Sound: awe 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'awe 2'")}};let $Q="s_Awe3";Gt.push($Q);At.Blocks.s_Awe3={init:function(){this.appendDummyInput().appendField("Sound: awe 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'awe 3'")}};let CQ="s_Boredom";Gt.push(CQ);At.Blocks.s_Boredom={init:function(){this.appendDummyInput().appendField("Sound: boredom"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'boredom'")}};let AQ="s_Disapproval";Gt.push(AQ);At.Blocks.s_Disapproval={init:function(){this.appendDummyInput().appendField("Sound: disapproval"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disapproval'")}};let MQ="s_Disgust";Gt.push(MQ);At.Blocks.s_Disgust={init:function(){this.appendDummyInput().appendField("Sound: disgust"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disgust'")}};let IQ="s_Disgust2";Gt.push(IQ);At.Blocks.s_Disgust2={init:function(){this.appendDummyInput().appendField("Sound: disgust 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disgust 2'")}};let RQ="s_Disgust3";Gt.push(RQ);At.Blocks.s_Disgust3={init:function(){this.appendDummyInput().appendField("Sound: disgust 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disgust 3'")}};let kQ="s_DisorientedConfused";Gt.push(kQ);At.Blocks.s_DisorientedConfused={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused'")}};let OQ="s_DisorientedConfused2";Gt.push(OQ);At.Blocks.s_DisorientedConfused2={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 2'")}};let LQ="s_DisorientedConfused3";Gt.push(LQ);At.Blocks.s_DisorientedConfused3={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 3'")}};let DQ="s_DisorientedConfused4";Gt.push(DQ);At.Blocks.s_DisorientedConfused4={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 4"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 4'")}};let NQ="s_DisorientedConfused5";Gt.push(NQ);At.Blocks.s_DisorientedConfused5={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 5"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 5'")}};let BQ="s_DisorientedConfused6";Gt.push(BQ);At.Blocks.s_DisorientedConfused6={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 6"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 6'")}};let PQ="s_Distraction";Gt.push(PQ);At.Blocks.s_Distraction={init:function(){this.appendDummyInput().appendField("Sound: distraction"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'distraction'")}};let FQ="s_Ecstacy";Gt.push(FQ);At.Blocks.s_Ecstacy={init:function(){this.appendDummyInput().appendField("Sound: ecstacy"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'ecstacy'")}};let UQ="s_Ecstacy2";Gt.push(UQ);At.Blocks.s_Ecstacy2={init:function(){this.appendDummyInput().appendField("Sound: ecstacy 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'ecstacy 2'")}};let zQ="s_Fear";Gt.push(zQ);At.Blocks.s_Fear={init:function(){this.appendDummyInput().appendField("Sound: fear"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'fear'")}};let HQ="s_Grief";Gt.push(HQ);At.Blocks.s_Grief={init:function(){this.appendDummyInput().appendField("Sound: grief"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'grief'")}};let GQ="s_Grief2";Gt.push(GQ);At.Blocks.s_Grief2={init:function(){this.appendDummyInput().appendField("Sound: grief 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'grief 2'")}};let WQ="s_Grief3";Gt.push(WQ);At.Blocks.s_Grief3={init:function(){this.appendDummyInput().appendField("Sound: grief 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'grief 3'")}};let VQ="s_Grief4";Gt.push(VQ);At.Blocks.s_Grief4={init:function(){this.appendDummyInput().appendField("Sound: grief 4"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'grief 4'")}};let jQ="s_Joy";Gt.push(jQ);At.Blocks.s_Joy={init:function(){this.appendDummyInput().appendField("Sound: joy"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'joy'")}};let XQ="s_Joy2";Gt.push(XQ);At.Blocks.s_Joy2={init:function(){this.appendDummyInput().appendField("Sound: joy 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'joy 2'")}};let YQ="s_Joy3";Gt.push(YQ);At.Blocks.s_Joy3={init:function(){this.appendDummyInput().appendField("Sound: joy 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'joy 3'")}};let KQ="s_Joy4";Gt.push(KQ);At.Blocks.s_Joy4={init:function(){this.appendDummyInput().appendField("Sound: joy 4"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'joy 4'")}};let JQ="s_Loathing";Gt.push(JQ);At.Blocks.s_Loathing={init:function(){this.appendDummyInput().appendField("Sound: loathing"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'loathing'")}};let qQ="s_Love";Gt.push(qQ);At.Blocks.s_Love={init:function(){this.appendDummyInput().appendField("Sound: love"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'love'")}};let QQ="s_PhraseByeBye";Gt.push(QQ);At.Blocks.s_PhraseByeBye={init:function(){this.appendDummyInput().appendField("Sound: Bye Bye"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Bye Bye'")}};let ZQ="s_PhraseEvilAhHa";Gt.push(ZQ);At.Blocks.s_PhraseEvilAhHa={init:function(){this.appendDummyInput().appendField("Sound: Evil Ah Ha"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Evil Ah Ha'")}};let eZ="s_PhraseHello";Gt.push(eZ);At.Blocks.s_PhraseHello={init:function(){this.appendDummyInput().appendField("Sound: Hello"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Hello'")}};let tZ="s_PhraseNoNoNo";Gt.push(tZ);At.Blocks.s_PhraseNoNoNo={init:function(){this.appendDummyInput().appendField("Sound: No No No"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: No No No'")}};let nZ="s_PhraseOopsy";Gt.push(nZ);At.Blocks.s_PhraseOopsy={init:function(){this.appendDummyInput().appendField("Sound: Oopsy"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Oopsy'")}};let rZ="s_PhraseOwOwOw";Gt.push(rZ);At.Blocks.s_PhraseOwOwOw={init:function(){this.appendDummyInput().appendField("Sound: Ow Ow Ow"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Ow Ow Ow'")}};let iZ="s_PhraseOwwww";Gt.push(iZ);At.Blocks.s_PhraseOwwww={init:function(){this.appendDummyInput().appendField("Sound: Owwww"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Owwww'")}};let sZ="s_PhraseUhOh";Gt.push(sZ);At.Blocks.s_PhraseUhOh={init:function(){this.appendDummyInput().appendField("Sound: Uh Oh"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Uh Oh'")}};let oZ="s_Rage";Gt.push(oZ);At.Blocks.s_Rage={init:function(){this.appendDummyInput().appendField("Sound: rage"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'rage'")}};let aZ="s_Sadness";Gt.push(aZ);At.Blocks.s_Sadness={init:function(){this.appendDummyInput().appendField("Sound: sadness"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sadness'")}};let lZ="s_Sadness2";Gt.push(lZ);At.Blocks.s_Sadness2={init:function(){this.appendDummyInput().appendField("Sound: sadness 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 2'")}};let uZ="s_Sadness3";Gt.push(uZ);At.Blocks.s_Sadness3={init:function(){this.appendDummyInput().appendField("Sound: sadness 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 3'")}};let cZ="s_Sadness4";Gt.push(cZ);At.Blocks.s_Sadness4={init:function(){this.appendDummyInput().appendField("Sound: sadness 4"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 4'")}};let hZ="s_Sadness5";Gt.push(hZ);At.Blocks.s_Sadness5={init:function(){this.appendDummyInput().appendField("Sound: sadness 5"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 5'")}};let dZ="s_Sadness6";Gt.push(dZ);At.Blocks.s_Sadness6={init:function(){this.appendDummyInput().appendField("Sound: sadness 6"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 6'")}};let pZ="s_Sadness7";Gt.push(pZ);At.Blocks.s_Sadness7={init:function(){this.appendDummyInput().appendField("Sound: sadness 7"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sadness 7'")}};let fZ="s_Sleepy";Gt.push(fZ);At.Blocks.s_Sleepy={init:function(){this.appendDummyInput().appendField("Sound: sleepy"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy'")}};let mZ="s_Sleepy2";Gt.push(mZ);At.Blocks.s_Sleepy2={init:function(){this.appendDummyInput().appendField("Sound: sleepy 2"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy 2'")}};let gZ="s_Sleepy3";Gt.push(gZ);At.Blocks.s_Sleepy3={init:function(){this.appendDummyInput().appendField("Sound: sleepy 3"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy 3'")}};let _Z="s_Sleepy4";Gt.push(_Z);At.Blocks.s_Sleepy4={init:function(){this.appendDummyInput().appendField("Sound: sleepy 4"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy 4'")}};let vZ="s_SleepySnore";Gt.push(vZ);At.Blocks.s_SleepySnore={init:function(){this.appendDummyInput().appendField("Sound: sleepy snore"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'sleepy snore'")}};let yZ="s_SystemCameraShutter";Gt.push(yZ);At.Blocks.s_SystemCameraShutter={init:function(){this.appendDummyInput().appendField("Sound: system camera shutter"),this.setOutput(!0,"Audio"),this.setColour(Pt.audio_category.colour),this.setTooltip("Represents the audio 'system camera shutter'")}};const bZ=At.common.createBlockDefinitionsFromJsonArray([Fq]),TZ=Gt;/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UI=Object.create(null);UI.add_text=function(n,e){const t=e.valueToCode(n,"TEXT",KS.Order.NONE)||"''",i=e.valueToCode(n,"COLOR",KS.Order.ATOMIC)||"'#ffffff'";return`${e.provideFunction_("addText",`function ${e.FUNCTION_NAME_PLACEHOLDER_}(text, color) {

  // Add text to the output area.
  const outputDiv = document.getElementById('output');
  const textEl = document.createElement('p');
  textEl.innerText = text;
  textEl.style.color = color;
  outputDiv.appendChild(textEl);
}`)}(${t}, ${i});
`};UI.Start=function(n){return""};var SZ={BASE_URL:"/gpu-programming/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const oU=n=>{let e;const t=new Set,i=(_,y)=>{const b=typeof _=="function"?_(e):_;if(!Object.is(b,e)){const E=e;e=y??(typeof b!="object"||b===null)?b:Object.assign({},e,b),t.forEach(C=>C(e,E))}},s=()=>e,d={setState:i,getState:s,getInitialState:()=>p,subscribe:_=>(t.add(_),()=>t.delete(_)),destroy:()=>{(SZ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},p=e=n(i,s,d);return d},EZ=n=>n?oU(n):oU;var UV={exports:{}},zV={},HV={exports:{}},GV={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JS=me;function xZ(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var wZ=typeof Object.is=="function"?Object.is:xZ,$Z=JS.useState,CZ=JS.useEffect,AZ=JS.useLayoutEffect,MZ=JS.useDebugValue;function IZ(n,e){var t=e(),i=$Z({inst:{value:t,getSnapshot:e}}),s=i[0].inst,o=i[1];return AZ(function(){s.value=t,s.getSnapshot=e,jk(s)&&o({inst:s})},[n,t,e]),CZ(function(){return jk(s)&&o({inst:s}),n(function(){jk(s)&&o({inst:s})})},[n]),MZ(t),t}function jk(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!wZ(n,t)}catch{return!0}}function RZ(n,e){return e()}var kZ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?RZ:IZ;GV.useSyncExternalStore=JS.useSyncExternalStore!==void 0?JS.useSyncExternalStore:kZ;HV.exports=GV;var OZ=HV.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zI=me,LZ=OZ;function DZ(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var NZ=typeof Object.is=="function"?Object.is:DZ,BZ=LZ.useSyncExternalStore,PZ=zI.useRef,FZ=zI.useEffect,UZ=zI.useMemo,zZ=zI.useDebugValue;zV.useSyncExternalStoreWithSelector=function(n,e,t,i,s){var o=PZ(null);if(o.current===null){var l={hasValue:!1,value:null};o.current=l}else l=o.current;o=UZ(function(){function d(E){if(!p){if(p=!0,_=E,E=i(E),s!==void 0&&l.hasValue){var C=l.value;if(s(C,E))return y=C}return y=E}if(C=y,NZ(_,E))return C;var A=i(E);return s!==void 0&&s(C,A)?C:(_=E,y=A)}var p=!1,_,y,b=t===void 0?null:t;return[function(){return d(e())},b===null?void 0:function(){return d(b())}]},[e,t,i,s]);var u=BZ(n,o[0],o[1]);return FZ(function(){l.hasValue=!0,l.value=u},[u]),zZ(u),u};UV.exports=zV;var HZ=UV.exports;const GZ=k1(HZ);var WV={BASE_URL:"/gpu-programming/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:WZ}=Vr,{useSyncExternalStoreWithSelector:VZ}=GZ;let aU=!1;const jZ=n=>n;function XZ(n,e=jZ,t){(WV?"production":void 0)!=="production"&&t&&!aU&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),aU=!0);const i=VZ(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return WZ(i),i}const lU=n=>{(WV?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?EZ(n):n,t=(i,s)=>XZ(e,i,s);return Object.assign(t,e),t},YZ=n=>n?lU(n):lU;var yB={},HI={};(function(n){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",t=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",i="["+e+"]["+t+"]*",s=new RegExp("^"+i+"$"),o=function(u,d){const p=[];let _=d.exec(u);for(;_;){const y=[];y.startIndex=d.lastIndex-_[0].length;const b=_.length;for(let E=0;E<b;E++)y.push(_[E]);p.push(y),_=d.exec(u)}return p},l=function(u){const d=s.exec(u);return!(d===null||typeof d>"u")};n.isExist=function(u){return typeof u<"u"},n.isEmptyObject=function(u){return Object.keys(u).length===0},n.merge=function(u,d,p){if(d){const _=Object.keys(d),y=_.length;for(let b=0;b<y;b++)p==="strict"?u[_[b]]=[d[_[b]]]:u[_[b]]=d[_[b]]}},n.getValue=function(u){return n.isExist(u)?u:""},n.isName=l,n.getAllMatches=o,n.nameRegexp=i})(HI);const bB=HI,KZ={allowBooleanAttributes:!1,unpairedTags:[]};yB.validate=function(n,e){e=Object.assign({},KZ,e);const t=[];let i=!1,s=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let o=0;o<n.length;o++)if(n[o]==="<"&&n[o+1]==="?"){if(o+=2,o=cU(n,o),o.err)return o}else if(n[o]==="<"){let l=o;if(o++,n[o]==="!"){o=hU(n,o);continue}else{let u=!1;n[o]==="/"&&(u=!0,o++);let d="";for(;o<n.length&&n[o]!==">"&&n[o]!==" "&&n[o]!=="	"&&n[o]!==`
`&&n[o]!=="\r";o++)d+=n[o];if(d=d.trim(),d[d.length-1]==="/"&&(d=d.substring(0,d.length-1),o--),!ree(d)){let y;return d.trim().length===0?y="Invalid space after '<'.":y="Tag '"+d+"' is an invalid name.",Ah("InvalidTag",y,Lf(n,o))}const p=QZ(n,o);if(p===!1)return Ah("InvalidAttr","Attributes for '"+d+"' have open quote.",Lf(n,o));let _=p.value;if(o=p.index,_[_.length-1]==="/"){const y=o-_.length;_=_.substring(0,_.length-1);const b=dU(_,e);if(b===!0)i=!0;else return Ah(b.err.code,b.err.msg,Lf(n,y+b.err.line))}else if(u)if(p.tagClosed){if(_.trim().length>0)return Ah("InvalidTag","Closing tag '"+d+"' can't have attributes or invalid starting.",Lf(n,l));{const y=t.pop();if(d!==y.tagName){let b=Lf(n,y.tagStartPos);return Ah("InvalidTag","Expected closing tag '"+y.tagName+"' (opened in line "+b.line+", col "+b.col+") instead of closing tag '"+d+"'.",Lf(n,l))}t.length==0&&(s=!0)}}else return Ah("InvalidTag","Closing tag '"+d+"' doesn't have proper closing.",Lf(n,o));else{const y=dU(_,e);if(y!==!0)return Ah(y.err.code,y.err.msg,Lf(n,o-_.length+y.err.line));if(s===!0)return Ah("InvalidXml","Multiple possible root nodes found.",Lf(n,o));e.unpairedTags.indexOf(d)!==-1||t.push({tagName:d,tagStartPos:l}),i=!0}for(o++;o<n.length;o++)if(n[o]==="<")if(n[o+1]==="!"){o++,o=hU(n,o);continue}else if(n[o+1]==="?"){if(o=cU(n,++o),o.err)return o}else break;else if(n[o]==="&"){const y=tee(n,o);if(y==-1)return Ah("InvalidChar","char '&' is not expected.",Lf(n,o));o=y}else if(s===!0&&!uU(n[o]))return Ah("InvalidXml","Extra text at the end",Lf(n,o));n[o]==="<"&&o--}}else{if(uU(n[o]))continue;return Ah("InvalidChar","char '"+n[o]+"' is not expected.",Lf(n,o))}if(i){if(t.length==1)return Ah("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",Lf(n,t[0].tagStartPos));if(t.length>0)return Ah("InvalidXml","Invalid '"+JSON.stringify(t.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Ah("InvalidXml","Start tag expected.",1);return!0};function uU(n){return n===" "||n==="	"||n===`
`||n==="\r"}function cU(n,e){const t=e;for(;e<n.length;e++)if(n[e]=="?"||n[e]==" "){const i=n.substr(t,e-t);if(e>5&&i==="xml")return Ah("InvalidXml","XML declaration allowed only at the start of the document.",Lf(n,e));if(n[e]=="?"&&n[e+1]==">"){e++;break}else continue}return e}function hU(n,e){if(n.length>e+5&&n[e+1]==="-"&&n[e+2]==="-"){for(e+=3;e<n.length;e++)if(n[e]==="-"&&n[e+1]==="-"&&n[e+2]===">"){e+=2;break}}else if(n.length>e+8&&n[e+1]==="D"&&n[e+2]==="O"&&n[e+3]==="C"&&n[e+4]==="T"&&n[e+5]==="Y"&&n[e+6]==="P"&&n[e+7]==="E"){let t=1;for(e+=8;e<n.length;e++)if(n[e]==="<")t++;else if(n[e]===">"&&(t--,t===0))break}else if(n.length>e+9&&n[e+1]==="["&&n[e+2]==="C"&&n[e+3]==="D"&&n[e+4]==="A"&&n[e+5]==="T"&&n[e+6]==="A"&&n[e+7]==="["){for(e+=8;e<n.length;e++)if(n[e]==="]"&&n[e+1]==="]"&&n[e+2]===">"){e+=2;break}}return e}const JZ='"',qZ="'";function QZ(n,e){let t="",i="",s=!1;for(;e<n.length;e++){if(n[e]===JZ||n[e]===qZ)i===""?i=n[e]:i!==n[e]||(i="");else if(n[e]===">"&&i===""){s=!0;break}t+=n[e]}return i!==""?!1:{value:t,index:e,tagClosed:s}}const ZZ=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function dU(n,e){const t=bB.getAllMatches(n,ZZ),i={};for(let s=0;s<t.length;s++){if(t[s][1].length===0)return Ah("InvalidAttr","Attribute '"+t[s][2]+"' has no space in starting.",ux(t[s]));if(t[s][3]!==void 0&&t[s][4]===void 0)return Ah("InvalidAttr","Attribute '"+t[s][2]+"' is without value.",ux(t[s]));if(t[s][3]===void 0&&!e.allowBooleanAttributes)return Ah("InvalidAttr","boolean attribute '"+t[s][2]+"' is not allowed.",ux(t[s]));const o=t[s][2];if(!nee(o))return Ah("InvalidAttr","Attribute '"+o+"' is an invalid name.",ux(t[s]));if(!i.hasOwnProperty(o))i[o]=1;else return Ah("InvalidAttr","Attribute '"+o+"' is repeated.",ux(t[s]))}return!0}function eee(n,e){let t=/\d/;for(n[e]==="x"&&(e++,t=/[\da-fA-F]/);e<n.length;e++){if(n[e]===";")return e;if(!n[e].match(t))break}return-1}function tee(n,e){if(e++,n[e]===";")return-1;if(n[e]==="#")return e++,eee(n,e);let t=0;for(;e<n.length;e++,t++)if(!(n[e].match(/\w/)&&t<20)){if(n[e]===";")break;return-1}return e}function Ah(n,e,t){return{err:{code:n,msg:e,line:t.line||t,col:t.col}}}function nee(n){return bB.isName(n)}function ree(n){return bB.isName(n)}function Lf(n,e){const t=n.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function ux(n){return n.startIndex+n[1].length}var TB={};const VV={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(n,e,t){return n}},iee=function(n){return Object.assign({},VV,n)};TB.buildOptions=iee;TB.defaultOptions=VV;class see{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}var oee=see;const aee=HI;function lee(n,e){const t={};if(n[e+3]==="O"&&n[e+4]==="C"&&n[e+5]==="T"&&n[e+6]==="Y"&&n[e+7]==="P"&&n[e+8]==="E"){e=e+9;let i=1,s=!1,o=!1,l="";for(;e<n.length;e++)if(n[e]==="<"&&!o){if(s&&hee(n,e))e+=7,[entityName,val,e]=uee(n,e+1),val.indexOf("&")===-1&&(t[mee(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(s&&dee(n,e))e+=8;else if(s&&pee(n,e))e+=8;else if(s&&fee(n,e))e+=9;else if(cee)o=!0;else throw new Error("Invalid DOCTYPE");i++,l=""}else if(n[e]===">"){if(o?n[e-1]==="-"&&n[e-2]==="-"&&(o=!1,i--):i--,i===0)break}else n[e]==="["?s=!0:l+=n[e];if(i!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:e}}function uee(n,e){let t="";for(;e<n.length&&n[e]!=="'"&&n[e]!=='"';e++)t+=n[e];if(t=t.trim(),t.indexOf(" ")!==-1)throw new Error("External entites are not supported");const i=n[e++];let s="";for(;e<n.length&&n[e]!==i;e++)s+=n[e];return[t,s,e]}function cee(n,e){return n[e+1]==="!"&&n[e+2]==="-"&&n[e+3]==="-"}function hee(n,e){return n[e+1]==="!"&&n[e+2]==="E"&&n[e+3]==="N"&&n[e+4]==="T"&&n[e+5]==="I"&&n[e+6]==="T"&&n[e+7]==="Y"}function dee(n,e){return n[e+1]==="!"&&n[e+2]==="E"&&n[e+3]==="L"&&n[e+4]==="E"&&n[e+5]==="M"&&n[e+6]==="E"&&n[e+7]==="N"&&n[e+8]==="T"}function pee(n,e){return n[e+1]==="!"&&n[e+2]==="A"&&n[e+3]==="T"&&n[e+4]==="T"&&n[e+5]==="L"&&n[e+6]==="I"&&n[e+7]==="S"&&n[e+8]==="T"}function fee(n,e){return n[e+1]==="!"&&n[e+2]==="N"&&n[e+3]==="O"&&n[e+4]==="T"&&n[e+5]==="A"&&n[e+6]==="T"&&n[e+7]==="I"&&n[e+8]==="O"&&n[e+9]==="N"}function mee(n){if(aee.isName(n))return n;throw new Error(`Invalid entity name ${n}`)}var gee=lee;const _ee=/^[-+]?0x[a-fA-F0-9]+$/,vee=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const yee={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function bee(n,e={}){if(e=Object.assign({},yee,e),!n||typeof n!="string")return n;let t=n.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return n;if(e.hex&&_ee.test(t))return Number.parseInt(t,16);{const i=vee.exec(t);if(i){const s=i[1],o=i[2];let l=Tee(i[3]);const u=i[4]||i[6];if(!e.leadingZeros&&o.length>0&&s&&t[2]!==".")return n;if(!e.leadingZeros&&o.length>0&&!s&&t[1]!==".")return n;{const d=Number(t),p=""+d;return p.search(/[eE]/)!==-1||u?e.eNotation?d:n:t.indexOf(".")!==-1?p==="0"&&l===""||p===l||s&&p==="-"+l?d:n:o?l===p||s+l===p?d:n:t===p||t===s+p?d:n}}else return n}}function Tee(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substr(0,n.length-1))),n}var See=bee;const jV=HI,cx=oee,Eee=gee,xee=See;let wee=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,i)=>String.fromCharCode(Number.parseInt(i,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,i)=>String.fromCharCode(Number.parseInt(i,16))}},this.addExternalEntities=$ee,this.parseXml=Ree,this.parseTextData=Cee,this.resolveNameSpace=Aee,this.buildAttributesMap=Iee,this.isItStopNode=Dee,this.replaceEntitiesValue=Oee,this.readStopNodeData=Bee,this.saveTextToParentTag=Lee,this.addChild=kee}};function $ee(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:n[i]}}}function Cee(n,e,t,i,s,o,l){if(n!==void 0&&(this.options.trimValues&&!i&&(n=n.trim()),n.length>0)){l||(n=this.replaceEntitiesValue(n));const u=this.options.tagValueProcessor(e,n,t,s,o);return u==null?n:typeof u!=typeof n||u!==n?u:this.options.trimValues?QL(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?QL(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function Aee(n){if(this.options.removeNSPrefix){const e=n.split(":"),t=n.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(n=t+e[1])}return n}const Mee=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Iee(n,e,t){if(!this.options.ignoreAttributes&&typeof n=="string"){const i=jV.getAllMatches(n,Mee),s=i.length,o={};for(let l=0;l<s;l++){const u=this.resolveNameSpace(i[l][1]);let d=i[l][4],p=this.options.attributeNamePrefix+u;if(u.length)if(this.options.transformAttributeName&&(p=this.options.transformAttributeName(p)),p==="__proto__"&&(p="#__proto__"),d!==void 0){this.options.trimValues&&(d=d.trim()),d=this.replaceEntitiesValue(d);const _=this.options.attributeValueProcessor(u,d,e);_==null?o[p]=d:typeof _!=typeof d||_!==d?o[p]=_:o[p]=QL(d,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[p]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){const l={};return l[this.options.attributesGroupName]=o,l}return o}}const Ree=function(n){n=n.replace(/\r\n?/g,`
`);const e=new cx("!xml");let t=e,i="",s="";for(let o=0;o<n.length;o++)if(n[o]==="<")if(n[o+1]==="/"){const u=Kb(n,">",o,"Closing Tag is not closed.");let d=n.substring(o+2,u).trim();if(this.options.removeNSPrefix){const y=d.indexOf(":");y!==-1&&(d=d.substr(y+1))}this.options.transformTagName&&(d=this.options.transformTagName(d)),t&&(i=this.saveTextToParentTag(i,t,s));const p=s.substring(s.lastIndexOf(".")+1);if(d&&this.options.unpairedTags.indexOf(d)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${d}>`);let _=0;p&&this.options.unpairedTags.indexOf(p)!==-1?(_=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):_=s.lastIndexOf("."),s=s.substring(0,_),t=this.tagsNodeStack.pop(),i="",o=u}else if(n[o+1]==="?"){let u=qL(n,o,!1,"?>");if(!u)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,t,s),!(this.options.ignoreDeclaration&&u.tagName==="?xml"||this.options.ignorePiTags)){const d=new cx(u.tagName);d.add(this.options.textNodeName,""),u.tagName!==u.tagExp&&u.attrExpPresent&&(d[":@"]=this.buildAttributesMap(u.tagExp,s,u.tagName)),this.addChild(t,d,s)}o=u.closeIndex+1}else if(n.substr(o+1,3)==="!--"){const u=Kb(n,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){const d=n.substring(o+4,u-2);i=this.saveTextToParentTag(i,t,s),t.add(this.options.commentPropName,[{[this.options.textNodeName]:d}])}o=u}else if(n.substr(o+1,2)==="!D"){const u=Eee(n,o);this.docTypeEntities=u.entities,o=u.i}else if(n.substr(o+1,2)==="!["){const u=Kb(n,"]]>",o,"CDATA is not closed.")-2,d=n.substring(o+9,u);i=this.saveTextToParentTag(i,t,s);let p=this.parseTextData(d,t.tagname,s,!0,!1,!0,!0);p==null&&(p=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:d}]):t.add(this.options.textNodeName,p),o=u+2}else{let u=qL(n,o,this.options.removeNSPrefix),d=u.tagName;const p=u.rawTagName;let _=u.tagExp,y=u.attrExpPresent,b=u.closeIndex;this.options.transformTagName&&(d=this.options.transformTagName(d)),t&&i&&t.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,t,s,!1));const E=t;if(E&&this.options.unpairedTags.indexOf(E.tagname)!==-1&&(t=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),d!==e.tagname&&(s+=s?"."+d:d),this.isItStopNode(this.options.stopNodes,s,d)){let C="";if(_.length>0&&_.lastIndexOf("/")===_.length-1)o=u.closeIndex;else if(this.options.unpairedTags.indexOf(d)!==-1)o=u.closeIndex;else{const I=this.readStopNodeData(n,p,b+1);if(!I)throw new Error(`Unexpected end of ${p}`);o=I.i,C=I.tagContent}const A=new cx(d);d!==_&&y&&(A[":@"]=this.buildAttributesMap(_,s,d)),C&&(C=this.parseTextData(C,d,s,!0,y,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),A.add(this.options.textNodeName,C),this.addChild(t,A,s)}else{if(_.length>0&&_.lastIndexOf("/")===_.length-1){d[d.length-1]==="/"?(d=d.substr(0,d.length-1),s=s.substr(0,s.length-1),_=d):_=_.substr(0,_.length-1),this.options.transformTagName&&(d=this.options.transformTagName(d));const C=new cx(d);d!==_&&y&&(C[":@"]=this.buildAttributesMap(_,s,d)),this.addChild(t,C,s),s=s.substr(0,s.lastIndexOf("."))}else{const C=new cx(d);this.tagsNodeStack.push(t),d!==_&&y&&(C[":@"]=this.buildAttributesMap(_,s,d)),this.addChild(t,C,s),t=C}i="",o=b}}else i+=n[o];return e.child};function kee(n,e,t){const i=this.options.updateTag(e.tagname,t,e[":@"]);i===!1||(typeof i=="string"&&(e.tagname=i),n.addChild(e))}const Oee=function(n){if(this.options.processEntities){for(let e in this.docTypeEntities){const t=this.docTypeEntities[e];n=n.replace(t.regx,t.val)}for(let e in this.lastEntities){const t=this.lastEntities[e];n=n.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const t=this.htmlEntities[e];n=n.replace(t.regex,t.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function Lee(n,e,t,i){return n&&(i===void 0&&(i=Object.keys(e.child).length===0),n=this.parseTextData(n,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,i),n!==void 0&&n!==""&&e.add(this.options.textNodeName,n),n=""),n}function Dee(n,e,t){const i="*."+t;for(const s in n){const o=n[s];if(i===o||e===o)return!0}return!1}function Nee(n,e,t=">"){let i,s="";for(let o=e;o<n.length;o++){let l=n[o];if(i)l===i&&(i="");else if(l==='"'||l==="'")i=l;else if(l===t[0])if(t[1]){if(n[o+1]===t[1])return{data:s,index:o}}else return{data:s,index:o};else l==="	"&&(l=" ");s+=l}}function Kb(n,e,t,i){const s=n.indexOf(e,t);if(s===-1)throw new Error(i);return s+e.length-1}function qL(n,e,t,i=">"){const s=Nee(n,e+1,i);if(!s)return;let o=s.data;const l=s.index,u=o.search(/\s/);let d=o,p=!0;u!==-1&&(d=o.substring(0,u),o=o.substring(u+1).trimStart());const _=d;if(t){const y=d.indexOf(":");y!==-1&&(d=d.substr(y+1),p=d!==s.data.substr(y+1))}return{tagName:d,tagExp:o,closeIndex:l,attrExpPresent:p,rawTagName:_}}function Bee(n,e,t){const i=t;let s=1;for(;t<n.length;t++)if(n[t]==="<")if(n[t+1]==="/"){const o=Kb(n,">",t,`${e} is not closed`);if(n.substring(t+2,o).trim()===e&&(s--,s===0))return{tagContent:n.substring(i,t),i:o};t=o}else if(n[t+1]==="?")t=Kb(n,"?>",t+1,"StopNode is not closed.");else if(n.substr(t+1,3)==="!--")t=Kb(n,"-->",t+3,"StopNode is not closed.");else if(n.substr(t+1,2)==="![")t=Kb(n,"]]>",t,"StopNode is not closed.")-2;else{const o=qL(n,t,">");o&&((o&&o.tagName)===e&&o.tagExp[o.tagExp.length-1]!=="/"&&s++,t=o.closeIndex)}}function QL(n,e,t){if(e&&typeof n=="string"){const i=n.trim();return i==="true"?!0:i==="false"?!1:xee(n,t)}else return jV.isExist(n)?n:""}var Pee=wee,XV={};function Fee(n,e){return YV(n,e)}function YV(n,e,t){let i;const s={};for(let o=0;o<n.length;o++){const l=n[o],u=Uee(l);let d="";if(t===void 0?d=u:d=t+"."+u,u===e.textNodeName)i===void 0?i=l[u]:i+=""+l[u];else{if(u===void 0)continue;if(l[u]){let p=YV(l[u],e,d);const _=Hee(p,e);l[":@"]?zee(p,l[":@"],d,e):Object.keys(p).length===1&&p[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?p=p[e.textNodeName]:Object.keys(p).length===0&&(e.alwaysCreateTextNode?p[e.textNodeName]="":p=""),s[u]!==void 0&&s.hasOwnProperty(u)?(Array.isArray(s[u])||(s[u]=[s[u]]),s[u].push(p)):e.isArray(u,d,_)?s[u]=[p]:s[u]=p}}}return typeof i=="string"?i.length>0&&(s[e.textNodeName]=i):i!==void 0&&(s[e.textNodeName]=i),s}function Uee(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t];if(i!==":@")return i}}function zee(n,e,t,i){if(e){const s=Object.keys(e),o=s.length;for(let l=0;l<o;l++){const u=s[l];i.isArray(u,t+"."+u,!0,!0)?n[u]=[e[u]]:n[u]=e[u]}}}function Hee(n,e){const{textNodeName:t}=e,i=Object.keys(n).length;return!!(i===0||i===1&&(n[t]||typeof n[t]=="boolean"||n[t]===0))}XV.prettify=Fee;const{buildOptions:Gee}=TB,Wee=Pee,{prettify:Vee}=XV,jee=yB;let Xee=class{constructor(e){this.externalEntities={},this.options=Gee(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const o=jee.validate(e,t);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}const i=new Wee(this.options);i.addExternalEntities(this.externalEntities);const s=i.parseXml(e);return this.options.preserveOrder||s===void 0?s:Vee(s,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}};var Yee=Xee;const Kee=`
`;function Jee(n,e){let t="";return e.format&&e.indentBy.length>0&&(t=Kee),KV(n,e,"",t)}function KV(n,e,t,i){let s="",o=!1;for(let l=0;l<n.length;l++){const u=n[l],d=qee(u);if(d===void 0)continue;let p="";if(t.length===0?p=d:p=`${t}.${d}`,d===e.textNodeName){let C=u[d];Qee(p,e)||(C=e.tagValueProcessor(d,C),C=JV(C,e)),o&&(s+=i),s+=C,o=!1;continue}else if(d===e.cdataPropName){o&&(s+=i),s+=`<![CDATA[${u[d][0][e.textNodeName]}]]>`,o=!1;continue}else if(d===e.commentPropName){s+=i+`<!--${u[d][0][e.textNodeName]}-->`,o=!0;continue}else if(d[0]==="?"){const C=pU(u[":@"],e),A=d==="?xml"?"":i;let I=u[d][0][e.textNodeName];I=I.length!==0?" "+I:"",s+=A+`<${d}${I}${C}?>`,o=!0;continue}let _=i;_!==""&&(_+=e.indentBy);const y=pU(u[":@"],e),b=i+`<${d}${y}`,E=KV(u[d],e,p,_);e.unpairedTags.indexOf(d)!==-1?e.suppressUnpairedNode?s+=b+">":s+=b+"/>":(!E||E.length===0)&&e.suppressEmptyNode?s+=b+"/>":E&&E.endsWith(">")?s+=b+`>${E}${i}</${d}>`:(s+=b+">",E&&i!==""&&(E.includes("/>")||E.includes("</"))?s+=i+e.indentBy+E+i:s+=E,s+=`</${d}>`),o=!0}return s}function qee(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t];if(n.hasOwnProperty(i)&&i!==":@")return i}}function pU(n,e){let t="";if(n&&!e.ignoreAttributes)for(let i in n){if(!n.hasOwnProperty(i))continue;let s=e.attributeValueProcessor(i,n[i]);s=JV(s,e),s===!0&&e.suppressBooleanAttributes?t+=` ${i.substr(e.attributeNamePrefix.length)}`:t+=` ${i.substr(e.attributeNamePrefix.length)}="${s}"`}return t}function Qee(n,e){n=n.substr(0,n.length-e.textNodeName.length-1);let t=n.substr(n.lastIndexOf(".")+1);for(let i in e.stopNodes)if(e.stopNodes[i]===n||e.stopNodes[i]==="*."+t)return!0;return!1}function JV(n,e){if(n&&n.length>0&&e.processEntities)for(let t=0;t<e.entities.length;t++){const i=e.entities[t];n=n.replace(i.regex,i.val)}return n}var Zee=Jee;const ete=Zee,tte={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function My(n){this.options=Object.assign({},tte,n),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=ite),this.processTextOrObjNode=nte,this.options.format?(this.indentate=rte,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}My.prototype.build=function(n){return this.options.preserveOrder?ete(n,this.options):(Array.isArray(n)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(n={[this.options.arrayNodeName]:n}),this.j2x(n,0).val)};My.prototype.j2x=function(n,e){let t="",i="";for(let s in n)if(Object.prototype.hasOwnProperty.call(n,s))if(typeof n[s]>"u")this.isAttribute(s)&&(i+="");else if(n[s]===null)this.isAttribute(s)?i+="":s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(n[s]instanceof Date)i+=this.buildTextValNode(n[s],s,"",e);else if(typeof n[s]!="object"){const o=this.isAttribute(s);if(o)t+=this.buildAttrPairStr(o,""+n[s]);else if(s===this.options.textNodeName){let l=this.options.tagValueProcessor(s,""+n[s]);i+=this.replaceEntitiesValue(l)}else i+=this.buildTextValNode(n[s],s,"",e)}else if(Array.isArray(n[s])){const o=n[s].length;let l="";for(let u=0;u<o;u++){const d=n[s][u];typeof d>"u"||(d===null?s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar:typeof d=="object"?this.options.oneListGroup?l+=this.j2x(d,e+1).val:l+=this.processTextOrObjNode(d,s,e):l+=this.buildTextValNode(d,s,"",e))}this.options.oneListGroup&&(l=this.buildObjectNode(l,s,"",e)),i+=l}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const o=Object.keys(n[s]),l=o.length;for(let u=0;u<l;u++)t+=this.buildAttrPairStr(o[u],""+n[s][o[u]])}else i+=this.processTextOrObjNode(n[s],s,e);return{attrStr:t,val:i}};My.prototype.buildAttrPairStr=function(n,e){return e=this.options.attributeValueProcessor(n,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+n:" "+n+'="'+e+'"'};function nte(n,e,t){const i=this.j2x(n,t+1);return n[this.options.textNodeName]!==void 0&&Object.keys(n).length===1?this.buildTextValNode(n[this.options.textNodeName],e,i.attrStr,t):this.buildObjectNode(i.val,e,i.attrStr,t)}My.prototype.buildObjectNode=function(n,e,t,i){if(n==="")return e[0]==="?"?this.indentate(i)+"<"+e+t+"?"+this.tagEndChar:this.indentate(i)+"<"+e+t+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",s=""),(t||t==="")&&n.indexOf("<")===-1?this.indentate(i)+"<"+e+t+o+">"+n+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(i)+`<!--${n}-->`+this.newLine:this.indentate(i)+"<"+e+t+o+this.tagEndChar+n+this.indentate(i)+s}};My.prototype.closeTag=function(n){let e="";return this.options.unpairedTags.indexOf(n)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${n}`,e};My.prototype.buildTextValNode=function(n,e,t,i){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${n}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(i)+`<!--${n}-->`+this.newLine;if(e[0]==="?")return this.indentate(i)+"<"+e+t+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,n);return s=this.replaceEntitiesValue(s),s===""?this.indentate(i)+"<"+e+t+this.closeTag(e)+this.tagEndChar:this.indentate(i)+"<"+e+t+">"+s+"</"+e+this.tagEndChar}};My.prototype.replaceEntitiesValue=function(n){if(n&&n.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const t=this.options.entities[e];n=n.replace(t.regex,t.val)}return n};function rte(n){return this.options.indentBy.repeat(n)}function ite(n){return n.startsWith(this.options.attributeNamePrefix)&&n!==this.options.textNodeName?n.substr(this.attrPrefixLen):!1}var ste=My;const ote=yB,ate=Yee,lte=ste;var qV={XMLParser:ate,XMLValidator:ote,XMLBuilder:lte};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const SB="162",KM=0,ute=1,cte=2,fU=1,mU=100,gU=204,_U=205,vU=3,hte=0,yU="attached",dte="detached",QV=300,Pw=1e3,Xx=1001,ZL=1002,Fw=1003,pte=1004,fte=1005,EB=1006,mte=1007,xB=1008,ZV=1009,gte=1014,wB=1015,_te=1020,$B=1023,Xk=1026,bU=1027,vte=1028,Uw=2300,qS=2301,Yk=2302,TU=2400,SU=2401,EU=2402,yte=2500,bte=0,e8=1,eD=2,Tte=0,t8="",Jv="srgb",CB="srgb-linear",Ste="display-p3",n8="display-p3-linear",tD="linear",xU="srgb",wU="rec709",$U="p3",bT=7680,CU=519,Ete=515,nD=35044,Jb=2e3,rD=2001;class GI{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const o=s.indexOf(t);o!==-1&&s.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let o=0,l=s.length;o<l;o++)s[o].call(this,e);e.target=null}}}const vp=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let AU=1234567;const cw=Math.PI/180,zw=180/Math.PI;function qg(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(vp[n&255]+vp[n>>8&255]+vp[n>>16&255]+vp[n>>24&255]+"-"+vp[e&255]+vp[e>>8&255]+"-"+vp[e>>16&15|64]+vp[e>>24&255]+"-"+vp[t&63|128]+vp[t>>8&255]+"-"+vp[t>>16&255]+vp[t>>24&255]+vp[i&255]+vp[i>>8&255]+vp[i>>16&255]+vp[i>>24&255]).toLowerCase()}function $p(n,e,t){return Math.max(e,Math.min(t,n))}function AB(n,e){return(n%e+e)%e}function xte(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function wte(n,e,t){return n!==e?(t-n)/(e-n):0}function hw(n,e,t){return(1-t)*n+t*e}function $te(n,e,t,i){return hw(n,e,1-Math.exp(-t*i))}function Cte(n,e=1){return e-Math.abs(AB(n,e*2)-e)}function Ate(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Mte(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Ite(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Rte(n,e){return n+Math.random()*(e-n)}function kte(n){return n*(.5-Math.random())}function Ote(n){n!==void 0&&(AU=n);let e=AU+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Lte(n){return n*cw}function Dte(n){return n*zw}function Nte(n){return(n&n-1)===0&&n!==0}function Bte(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Pte(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Fte(n,e,t,i,s){const o=Math.cos,l=Math.sin,u=o(t/2),d=l(t/2),p=o((e+i)/2),_=l((e+i)/2),y=o((e-i)/2),b=l((e-i)/2),E=o((i-e)/2),C=l((i-e)/2);switch(s){case"XYX":n.set(u*_,d*y,d*b,u*p);break;case"YZY":n.set(d*b,u*_,d*y,u*p);break;case"ZXZ":n.set(d*y,d*b,u*_,u*p);break;case"XZX":n.set(u*_,d*C,d*E,u*p);break;case"YXY":n.set(d*E,u*_,d*C,u*p);break;case"ZYZ":n.set(d*C,d*E,u*_,u*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Vg(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function wa(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Ute={DEG2RAD:cw,RAD2DEG:zw,generateUUID:qg,clamp:$p,euclideanModulo:AB,mapLinear:xte,inverseLerp:wte,lerp:hw,damp:$te,pingpong:Cte,smoothstep:Ate,smootherstep:Mte,randInt:Ite,randFloat:Rte,randFloatSpread:kte,seededRandom:Ote,degToRad:Lte,radToDeg:Dte,isPowerOfTwo:Nte,ceilPowerOfTwo:Bte,floorPowerOfTwo:Pte,setQuaternionFromProperEuler:Fte,normalize:wa,denormalize:Vg};class oc{constructor(e=0,t=0){oc.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos($p(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*i-l*s+e.x,this.y=o*s+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class av{constructor(e,t,i,s,o,l,u,d,p){av.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,o,l,u,d,p)}set(e,t,i,s,o,l,u,d,p){const _=this.elements;return _[0]=e,_[1]=s,_[2]=u,_[3]=t,_[4]=o,_[5]=d,_[6]=i,_[7]=l,_[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[3],d=i[6],p=i[1],_=i[4],y=i[7],b=i[2],E=i[5],C=i[8],A=s[0],I=s[3],L=s[6],O=s[1],P=s[4],N=s[7],z=s[2],W=s[5],H=s[8];return o[0]=l*A+u*O+d*z,o[3]=l*I+u*P+d*W,o[6]=l*L+u*N+d*H,o[1]=p*A+_*O+y*z,o[4]=p*I+_*P+y*W,o[7]=p*L+_*N+y*H,o[2]=b*A+E*O+C*z,o[5]=b*I+E*P+C*W,o[8]=b*L+E*N+C*H,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],d=e[6],p=e[7],_=e[8];return t*l*_-t*u*p-i*o*_+i*u*d+s*o*p-s*l*d}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],d=e[6],p=e[7],_=e[8],y=_*l-u*p,b=u*d-_*o,E=p*o-l*d,C=t*y+i*b+s*E;if(C===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/C;return e[0]=y*A,e[1]=(s*p-_*i)*A,e[2]=(u*i-s*l)*A,e[3]=b*A,e[4]=(_*t-s*d)*A,e[5]=(s*o-u*t)*A,e[6]=E*A,e[7]=(i*d-p*t)*A,e[8]=(l*t-i*o)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,o,l,u){const d=Math.cos(o),p=Math.sin(o);return this.set(i*d,i*p,-i*(d*l+p*u)+l+e,-s*p,s*d,-s*(-p*l+d*u)+u+t,0,0,1),this}scale(e,t){return this.premultiply(Kk.makeScale(e,t)),this}rotate(e){return this.premultiply(Kk.makeRotation(-e)),this}translate(e,t){return this.premultiply(Kk.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Kk=new av;function zte(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function iD(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const MU={};function r8(n){n in MU||(MU[n]=!0,console.warn(n))}const IU=new av().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),RU=new av().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),lC={[CB]:{transfer:tD,primaries:wU,toReference:n=>n,fromReference:n=>n},[Jv]:{transfer:xU,primaries:wU,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[n8]:{transfer:tD,primaries:$U,toReference:n=>n.applyMatrix3(RU),fromReference:n=>n.applyMatrix3(IU)},[Ste]:{transfer:xU,primaries:$U,toReference:n=>n.convertSRGBToLinear().applyMatrix3(RU),fromReference:n=>n.applyMatrix3(IU).convertLinearToSRGB()}},Hte=new Set([CB,n8]),Lg={enabled:!0,_workingColorSpace:CB,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!Hte.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=lC[e].toReference,s=lC[t].fromReference;return s(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return lC[n].primaries},getTransfer:function(n){return n===t8?tD:lC[n].transfer}};function NS(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Jk(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let TT;class Gte{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{TT===void 0&&(TT=iD("canvas")),TT.width=e.width,TT.height=e.height;const i=TT.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=TT}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=iD("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),o=s.data;for(let l=0;l<o.length;l++)o[l]=NS(o[l]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(NS(t[i]/255)*255):t[i]=NS(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Wte=0;class Vte{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Wte++}),this.uuid=qg(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?o.push(qk(s[l].image)):o.push(qk(s[l]))}else o=qk(s);i.url=o}return t||(e.images[this.uuid]=i),i}}function qk(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Gte.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let jte=0;class $m extends GI{constructor(e=$m.DEFAULT_IMAGE,t=$m.DEFAULT_MAPPING,i=Xx,s=Xx,o=EB,l=xB,u=$B,d=ZV,p=$m.DEFAULT_ANISOTROPY,_=t8){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:jte++}),this.uuid=qg(),this.name="",this.source=new Vte(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=p,this.format=u,this.internalFormat=null,this.type=d,this.offset=new oc(0,0),this.repeat=new oc(1,1),this.center=new oc(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new av,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=_,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==QV)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Pw:e.x=e.x-Math.floor(e.x);break;case Xx:e.x=e.x<0?0:1;break;case ZL:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Pw:e.y=e.y-Math.floor(e.y);break;case Xx:e.y=e.y<0?0:1;break;case ZL:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}$m.DEFAULT_IMAGE=null;$m.DEFAULT_MAPPING=QV;$m.DEFAULT_ANISOTROPY=1;class ug{constructor(e=0,t=0,i=0,s=1){ug.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*s+l[12]*o,this.y=l[1]*t+l[5]*i+l[9]*s+l[13]*o,this.z=l[2]*t+l[6]*i+l[10]*s+l[14]*o,this.w=l[3]*t+l[7]*i+l[11]*s+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,o;const d=e.elements,p=d[0],_=d[4],y=d[8],b=d[1],E=d[5],C=d[9],A=d[2],I=d[6],L=d[10];if(Math.abs(_-b)<.01&&Math.abs(y-A)<.01&&Math.abs(C-I)<.01){if(Math.abs(_+b)<.1&&Math.abs(y+A)<.1&&Math.abs(C+I)<.1&&Math.abs(p+E+L-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const P=(p+1)/2,N=(E+1)/2,z=(L+1)/2,W=(_+b)/4,H=(y+A)/4,U=(C+I)/4;return P>N&&P>z?P<.01?(i=0,s=.707106781,o=.707106781):(i=Math.sqrt(P),s=W/i,o=H/i):N>z?N<.01?(i=.707106781,s=0,o=.707106781):(s=Math.sqrt(N),i=W/s,o=U/s):z<.01?(i=.707106781,s=.707106781,o=0):(o=Math.sqrt(z),i=H/o,s=U/o),this.set(i,s,o,t),this}let O=Math.sqrt((I-C)*(I-C)+(y-A)*(y-A)+(b-_)*(b-_));return Math.abs(O)<.001&&(O=1),this.x=(I-C)/O,this.y=(y-A)/O,this.z=(b-_)/O,this.w=Math.acos((p+E+L-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class yl{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,o,l,u){let d=i[s+0],p=i[s+1],_=i[s+2],y=i[s+3];const b=o[l+0],E=o[l+1],C=o[l+2],A=o[l+3];if(u===0){e[t+0]=d,e[t+1]=p,e[t+2]=_,e[t+3]=y;return}if(u===1){e[t+0]=b,e[t+1]=E,e[t+2]=C,e[t+3]=A;return}if(y!==A||d!==b||p!==E||_!==C){let I=1-u;const L=d*b+p*E+_*C+y*A,O=L>=0?1:-1,P=1-L*L;if(P>Number.EPSILON){const z=Math.sqrt(P),W=Math.atan2(z,L*O);I=Math.sin(I*W)/z,u=Math.sin(u*W)/z}const N=u*O;if(d=d*I+b*N,p=p*I+E*N,_=_*I+C*N,y=y*I+A*N,I===1-u){const z=1/Math.sqrt(d*d+p*p+_*_+y*y);d*=z,p*=z,_*=z,y*=z}}e[t]=d,e[t+1]=p,e[t+2]=_,e[t+3]=y}static multiplyQuaternionsFlat(e,t,i,s,o,l){const u=i[s],d=i[s+1],p=i[s+2],_=i[s+3],y=o[l],b=o[l+1],E=o[l+2],C=o[l+3];return e[t]=u*C+_*y+d*E-p*b,e[t+1]=d*C+_*b+p*y-u*E,e[t+2]=p*C+_*E+u*b-d*y,e[t+3]=_*C-u*y-d*b-p*E,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,o=e._z,l=e._order,u=Math.cos,d=Math.sin,p=u(i/2),_=u(s/2),y=u(o/2),b=d(i/2),E=d(s/2),C=d(o/2);switch(l){case"XYZ":this._x=b*_*y+p*E*C,this._y=p*E*y-b*_*C,this._z=p*_*C+b*E*y,this._w=p*_*y-b*E*C;break;case"YXZ":this._x=b*_*y+p*E*C,this._y=p*E*y-b*_*C,this._z=p*_*C-b*E*y,this._w=p*_*y+b*E*C;break;case"ZXY":this._x=b*_*y-p*E*C,this._y=p*E*y+b*_*C,this._z=p*_*C+b*E*y,this._w=p*_*y-b*E*C;break;case"ZYX":this._x=b*_*y-p*E*C,this._y=p*E*y+b*_*C,this._z=p*_*C-b*E*y,this._w=p*_*y+b*E*C;break;case"YZX":this._x=b*_*y+p*E*C,this._y=p*E*y+b*_*C,this._z=p*_*C-b*E*y,this._w=p*_*y-b*E*C;break;case"XZY":this._x=b*_*y-p*E*C,this._y=p*E*y-b*_*C,this._z=p*_*C+b*E*y,this._w=p*_*y+b*E*C;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],o=t[8],l=t[1],u=t[5],d=t[9],p=t[2],_=t[6],y=t[10],b=i+u+y;if(b>0){const E=.5/Math.sqrt(b+1);this._w=.25/E,this._x=(_-d)*E,this._y=(o-p)*E,this._z=(l-s)*E}else if(i>u&&i>y){const E=2*Math.sqrt(1+i-u-y);this._w=(_-d)/E,this._x=.25*E,this._y=(s+l)/E,this._z=(o+p)/E}else if(u>y){const E=2*Math.sqrt(1+u-i-y);this._w=(o-p)/E,this._x=(s+l)/E,this._y=.25*E,this._z=(d+_)/E}else{const E=2*Math.sqrt(1+y-i-u);this._w=(l-s)/E,this._x=(o+p)/E,this._y=(d+_)/E,this._z=.25*E}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs($p(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,o=e._z,l=e._w,u=t._x,d=t._y,p=t._z,_=t._w;return this._x=i*_+l*u+s*p-o*d,this._y=s*_+l*d+o*u-i*p,this._z=o*_+l*p+i*d-s*u,this._w=l*_-i*u-s*d-o*p,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,o=this._z,l=this._w;let u=l*e._w+i*e._x+s*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=i,this._y=s,this._z=o,this;const d=1-u*u;if(d<=Number.EPSILON){const E=1-t;return this._w=E*l+t*this._w,this._x=E*i+t*this._x,this._y=E*s+t*this._y,this._z=E*o+t*this._z,this.normalize(),this}const p=Math.sqrt(d),_=Math.atan2(p,u),y=Math.sin((1-t)*_)/p,b=Math.sin(t*_)/p;return this._w=l*y+this._w*b,this._x=i*y+this._x*b,this._y=s*y+this._y*b,this._z=o*y+this._z*b,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Dt{constructor(e=0,t=0,i=0){Dt.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(kU.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(kU.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*s,this.y=o[1]*t+o[4]*i+o[7]*s,this.z=o[2]*t+o[5]*i+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=e.elements,l=1/(o[3]*t+o[7]*i+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*s+o[12])*l,this.y=(o[1]*t+o[5]*i+o[9]*s+o[13])*l,this.z=(o[2]*t+o[6]*i+o[10]*s+o[14])*l,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,o=e.x,l=e.y,u=e.z,d=e.w,p=2*(l*s-u*i),_=2*(u*t-o*s),y=2*(o*i-l*t);return this.x=t+d*p+l*y-u*_,this.y=i+d*_+u*p-o*y,this.z=s+d*y+o*_-l*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s,this.y=o[1]*t+o[5]*i+o[9]*s,this.z=o[2]*t+o[6]*i+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,o=e.z,l=t.x,u=t.y,d=t.z;return this.x=s*d-o*u,this.y=o*l-i*d,this.z=i*u-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Qk.copy(this).projectOnVector(e),this.sub(Qk)}reflect(e){return this.sub(Qk.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos($p(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Qk=new Dt,kU=new yl;class lv{constructor(e=new Dt(1/0,1/0,1/0),t=new Dt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Dg.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Dg.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Dg.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const o=i.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let l=0,u=o.count;l<u;l++)e.isMesh===!0?e.getVertexPosition(l,Dg):Dg.fromBufferAttribute(o,l),Dg.applyMatrix4(e.matrixWorld),this.expandByPoint(Dg);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),uC.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),uC.copy(i.boundingBox)),uC.applyMatrix4(e.matrixWorld),this.union(uC)}const s=e.children;for(let o=0,l=s.length;o<l;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Dg),Dg.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(hx),cC.subVectors(this.max,hx),ST.subVectors(e.a,hx),ET.subVectors(e.b,hx),xT.subVectors(e.c,hx),Iv.subVectors(ET,ST),Rv.subVectors(xT,ET),mb.subVectors(ST,xT);let t=[0,-Iv.z,Iv.y,0,-Rv.z,Rv.y,0,-mb.z,mb.y,Iv.z,0,-Iv.x,Rv.z,0,-Rv.x,mb.z,0,-mb.x,-Iv.y,Iv.x,0,-Rv.y,Rv.x,0,-mb.y,mb.x,0];return!Zk(t,ST,ET,xT,cC)||(t=[1,0,0,0,1,0,0,0,1],!Zk(t,ST,ET,xT,cC))?!1:(hC.crossVectors(Iv,Rv),t=[hC.x,hC.y,hC.z],Zk(t,ST,ET,xT,cC))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Dg).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Dg).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(I_[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),I_[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),I_[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),I_[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),I_[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),I_[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),I_[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),I_[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(I_),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const I_=[new Dt,new Dt,new Dt,new Dt,new Dt,new Dt,new Dt,new Dt],Dg=new Dt,uC=new lv,ST=new Dt,ET=new Dt,xT=new Dt,Iv=new Dt,Rv=new Dt,mb=new Dt,hx=new Dt,cC=new Dt,hC=new Dt,gb=new Dt;function Zk(n,e,t,i,s){for(let o=0,l=n.length-3;o<=l;o+=3){gb.fromArray(n,o);const u=s.x*Math.abs(gb.x)+s.y*Math.abs(gb.y)+s.z*Math.abs(gb.z),d=e.dot(gb),p=t.dot(gb),_=i.dot(gb);if(Math.max(-Math.max(d,p,_),Math.min(d,p,_))>u)return!1}return!0}const Xte=new lv,dx=new Dt,e2=new Dt;class r_{constructor(e=new Dt,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Xte.setFromPoints(e).getCenter(i);let s=0;for(let o=0,l=e.length;o<l;o++)s=Math.max(s,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;dx.subVectors(e,this.center);const t=dx.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(dx,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(e2.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(dx.copy(e.center).add(e2)),this.expandByPoint(dx.copy(e.center).sub(e2))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const R_=new Dt,t2=new Dt,dC=new Dt,kv=new Dt,n2=new Dt,pC=new Dt,r2=new Dt;class WI{constructor(e=new Dt,t=new Dt(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,R_)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=R_.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(R_.copy(this.origin).addScaledVector(this.direction,t),R_.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){t2.copy(e).add(t).multiplyScalar(.5),dC.copy(t).sub(e).normalize(),kv.copy(this.origin).sub(t2);const o=e.distanceTo(t)*.5,l=-this.direction.dot(dC),u=kv.dot(this.direction),d=-kv.dot(dC),p=kv.lengthSq(),_=Math.abs(1-l*l);let y,b,E,C;if(_>0)if(y=l*d-u,b=l*u-d,C=o*_,y>=0)if(b>=-C)if(b<=C){const A=1/_;y*=A,b*=A,E=y*(y+l*b+2*u)+b*(l*y+b+2*d)+p}else b=o,y=Math.max(0,-(l*b+u)),E=-y*y+b*(b+2*d)+p;else b=-o,y=Math.max(0,-(l*b+u)),E=-y*y+b*(b+2*d)+p;else b<=-C?(y=Math.max(0,-(-l*o+u)),b=y>0?-o:Math.min(Math.max(-o,-d),o),E=-y*y+b*(b+2*d)+p):b<=C?(y=0,b=Math.min(Math.max(-o,-d),o),E=b*(b+2*d)+p):(y=Math.max(0,-(l*o+u)),b=y>0?o:Math.min(Math.max(-o,-d),o),E=-y*y+b*(b+2*d)+p);else b=l>0?-o:o,y=Math.max(0,-(l*b+u)),E=-y*y+b*(b+2*d)+p;return i&&i.copy(this.origin).addScaledVector(this.direction,y),s&&s.copy(t2).addScaledVector(dC,b),E}intersectSphere(e,t){R_.subVectors(e.center,this.origin);const i=R_.dot(this.direction),s=R_.dot(R_)-i*i,o=e.radius*e.radius;if(s>o)return null;const l=Math.sqrt(o-s),u=i-l,d=i+l;return d<0?null:u<0?this.at(d,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,o,l,u,d;const p=1/this.direction.x,_=1/this.direction.y,y=1/this.direction.z,b=this.origin;return p>=0?(i=(e.min.x-b.x)*p,s=(e.max.x-b.x)*p):(i=(e.max.x-b.x)*p,s=(e.min.x-b.x)*p),_>=0?(o=(e.min.y-b.y)*_,l=(e.max.y-b.y)*_):(o=(e.max.y-b.y)*_,l=(e.min.y-b.y)*_),i>l||o>s||((o>i||isNaN(i))&&(i=o),(l<s||isNaN(s))&&(s=l),y>=0?(u=(e.min.z-b.z)*y,d=(e.max.z-b.z)*y):(u=(e.max.z-b.z)*y,d=(e.min.z-b.z)*y),i>d||u>s)||((u>i||i!==i)&&(i=u),(d<s||s!==s)&&(s=d),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,R_)!==null}intersectTriangle(e,t,i,s,o){n2.subVectors(t,e),pC.subVectors(i,e),r2.crossVectors(n2,pC);let l=this.direction.dot(r2),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;kv.subVectors(this.origin,e);const d=u*this.direction.dot(pC.crossVectors(kv,pC));if(d<0)return null;const p=u*this.direction.dot(n2.cross(kv));if(p<0||d+p>l)return null;const _=-u*kv.dot(r2);return _<0?null:this.at(_/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ws{constructor(e,t,i,s,o,l,u,d,p,_,y,b,E,C,A,I){Ws.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,o,l,u,d,p,_,y,b,E,C,A,I)}set(e,t,i,s,o,l,u,d,p,_,y,b,E,C,A,I){const L=this.elements;return L[0]=e,L[4]=t,L[8]=i,L[12]=s,L[1]=o,L[5]=l,L[9]=u,L[13]=d,L[2]=p,L[6]=_,L[10]=y,L[14]=b,L[3]=E,L[7]=C,L[11]=A,L[15]=I,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ws().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/wT.setFromMatrixColumn(e,0).length(),o=1/wT.setFromMatrixColumn(e,1).length(),l=1/wT.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*l,t[9]=i[9]*l,t[10]=i[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,o=e.z,l=Math.cos(i),u=Math.sin(i),d=Math.cos(s),p=Math.sin(s),_=Math.cos(o),y=Math.sin(o);if(e.order==="XYZ"){const b=l*_,E=l*y,C=u*_,A=u*y;t[0]=d*_,t[4]=-d*y,t[8]=p,t[1]=E+C*p,t[5]=b-A*p,t[9]=-u*d,t[2]=A-b*p,t[6]=C+E*p,t[10]=l*d}else if(e.order==="YXZ"){const b=d*_,E=d*y,C=p*_,A=p*y;t[0]=b+A*u,t[4]=C*u-E,t[8]=l*p,t[1]=l*y,t[5]=l*_,t[9]=-u,t[2]=E*u-C,t[6]=A+b*u,t[10]=l*d}else if(e.order==="ZXY"){const b=d*_,E=d*y,C=p*_,A=p*y;t[0]=b-A*u,t[4]=-l*y,t[8]=C+E*u,t[1]=E+C*u,t[5]=l*_,t[9]=A-b*u,t[2]=-l*p,t[6]=u,t[10]=l*d}else if(e.order==="ZYX"){const b=l*_,E=l*y,C=u*_,A=u*y;t[0]=d*_,t[4]=C*p-E,t[8]=b*p+A,t[1]=d*y,t[5]=A*p+b,t[9]=E*p-C,t[2]=-p,t[6]=u*d,t[10]=l*d}else if(e.order==="YZX"){const b=l*d,E=l*p,C=u*d,A=u*p;t[0]=d*_,t[4]=A-b*y,t[8]=C*y+E,t[1]=y,t[5]=l*_,t[9]=-u*_,t[2]=-p*_,t[6]=E*y+C,t[10]=b-A*y}else if(e.order==="XZY"){const b=l*d,E=l*p,C=u*d,A=u*p;t[0]=d*_,t[4]=-y,t[8]=p*_,t[1]=b*y+A,t[5]=l*_,t[9]=E*y-C,t[2]=C*y-E,t[6]=u*_,t[10]=A*y+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Yte,e,Kte)}lookAt(e,t,i){const s=this.elements;return mm.subVectors(e,t),mm.lengthSq()===0&&(mm.z=1),mm.normalize(),Ov.crossVectors(i,mm),Ov.lengthSq()===0&&(Math.abs(i.z)===1?mm.x+=1e-4:mm.z+=1e-4,mm.normalize(),Ov.crossVectors(i,mm)),Ov.normalize(),fC.crossVectors(mm,Ov),s[0]=Ov.x,s[4]=fC.x,s[8]=mm.x,s[1]=Ov.y,s[5]=fC.y,s[9]=mm.y,s[2]=Ov.z,s[6]=fC.z,s[10]=mm.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[4],d=i[8],p=i[12],_=i[1],y=i[5],b=i[9],E=i[13],C=i[2],A=i[6],I=i[10],L=i[14],O=i[3],P=i[7],N=i[11],z=i[15],W=s[0],H=s[4],U=s[8],Q=s[12],ne=s[1],oe=s[5],le=s[9],ge=s[13],ce=s[2],pe=s[6],Te=s[10],Oe=s[14],J=s[3],se=s[7],ie=s[11],he=s[15];return o[0]=l*W+u*ne+d*ce+p*J,o[4]=l*H+u*oe+d*pe+p*se,o[8]=l*U+u*le+d*Te+p*ie,o[12]=l*Q+u*ge+d*Oe+p*he,o[1]=_*W+y*ne+b*ce+E*J,o[5]=_*H+y*oe+b*pe+E*se,o[9]=_*U+y*le+b*Te+E*ie,o[13]=_*Q+y*ge+b*Oe+E*he,o[2]=C*W+A*ne+I*ce+L*J,o[6]=C*H+A*oe+I*pe+L*se,o[10]=C*U+A*le+I*Te+L*ie,o[14]=C*Q+A*ge+I*Oe+L*he,o[3]=O*W+P*ne+N*ce+z*J,o[7]=O*H+P*oe+N*pe+z*se,o[11]=O*U+P*le+N*Te+z*ie,o[15]=O*Q+P*ge+N*Oe+z*he,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],o=e[12],l=e[1],u=e[5],d=e[9],p=e[13],_=e[2],y=e[6],b=e[10],E=e[14],C=e[3],A=e[7],I=e[11],L=e[15];return C*(+o*d*y-s*p*y-o*u*b+i*p*b+s*u*E-i*d*E)+A*(+t*d*E-t*p*b+o*l*b-s*l*E+s*p*_-o*d*_)+I*(+t*p*y-t*u*E-o*l*y+i*l*E+o*u*_-i*p*_)+L*(-s*u*_-t*d*y+t*u*b+s*l*y-i*l*b+i*d*_)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],d=e[6],p=e[7],_=e[8],y=e[9],b=e[10],E=e[11],C=e[12],A=e[13],I=e[14],L=e[15],O=y*I*p-A*b*p+A*d*E-u*I*E-y*d*L+u*b*L,P=C*b*p-_*I*p-C*d*E+l*I*E+_*d*L-l*b*L,N=_*A*p-C*y*p+C*u*E-l*A*E-_*u*L+l*y*L,z=C*y*d-_*A*d-C*u*b+l*A*b+_*u*I-l*y*I,W=t*O+i*P+s*N+o*z;if(W===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const H=1/W;return e[0]=O*H,e[1]=(A*b*o-y*I*o-A*s*E+i*I*E+y*s*L-i*b*L)*H,e[2]=(u*I*o-A*d*o+A*s*p-i*I*p-u*s*L+i*d*L)*H,e[3]=(y*d*o-u*b*o-y*s*p+i*b*p+u*s*E-i*d*E)*H,e[4]=P*H,e[5]=(_*I*o-C*b*o+C*s*E-t*I*E-_*s*L+t*b*L)*H,e[6]=(C*d*o-l*I*o-C*s*p+t*I*p+l*s*L-t*d*L)*H,e[7]=(l*b*o-_*d*o+_*s*p-t*b*p-l*s*E+t*d*E)*H,e[8]=N*H,e[9]=(C*y*o-_*A*o-C*i*E+t*A*E+_*i*L-t*y*L)*H,e[10]=(l*A*o-C*u*o+C*i*p-t*A*p-l*i*L+t*u*L)*H,e[11]=(_*u*o-l*y*o-_*i*p+t*y*p+l*i*E-t*u*E)*H,e[12]=z*H,e[13]=(_*A*s-C*y*s+C*i*b-t*A*b-_*i*I+t*y*I)*H,e[14]=(C*u*s-l*A*s-C*i*d+t*A*d+l*i*I-t*u*I)*H,e[15]=(l*y*s-_*u*s+_*i*d-t*y*d-l*i*b+t*u*b)*H,this}scale(e){const t=this.elements,i=e.x,s=e.y,o=e.z;return t[0]*=i,t[4]*=s,t[8]*=o,t[1]*=i,t[5]*=s,t[9]*=o,t[2]*=i,t[6]*=s,t[10]*=o,t[3]*=i,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),o=1-i,l=e.x,u=e.y,d=e.z,p=o*l,_=o*u;return this.set(p*l+i,p*u-s*d,p*d+s*u,0,p*u+s*d,_*u+i,_*d-s*l,0,p*d-s*u,_*d+s*l,o*d*d+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,o,l){return this.set(1,i,o,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,o=t._x,l=t._y,u=t._z,d=t._w,p=o+o,_=l+l,y=u+u,b=o*p,E=o*_,C=o*y,A=l*_,I=l*y,L=u*y,O=d*p,P=d*_,N=d*y,z=i.x,W=i.y,H=i.z;return s[0]=(1-(A+L))*z,s[1]=(E+N)*z,s[2]=(C-P)*z,s[3]=0,s[4]=(E-N)*W,s[5]=(1-(b+L))*W,s[6]=(I+O)*W,s[7]=0,s[8]=(C+P)*H,s[9]=(I-O)*H,s[10]=(1-(b+A))*H,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let o=wT.set(s[0],s[1],s[2]).length();const l=wT.set(s[4],s[5],s[6]).length(),u=wT.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],Ng.copy(this);const p=1/o,_=1/l,y=1/u;return Ng.elements[0]*=p,Ng.elements[1]*=p,Ng.elements[2]*=p,Ng.elements[4]*=_,Ng.elements[5]*=_,Ng.elements[6]*=_,Ng.elements[8]*=y,Ng.elements[9]*=y,Ng.elements[10]*=y,t.setFromRotationMatrix(Ng),i.x=o,i.y=l,i.z=u,this}makePerspective(e,t,i,s,o,l,u=Jb){const d=this.elements,p=2*o/(t-e),_=2*o/(i-s),y=(t+e)/(t-e),b=(i+s)/(i-s);let E,C;if(u===Jb)E=-(l+o)/(l-o),C=-2*l*o/(l-o);else if(u===rD)E=-l/(l-o),C=-l*o/(l-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return d[0]=p,d[4]=0,d[8]=y,d[12]=0,d[1]=0,d[5]=_,d[9]=b,d[13]=0,d[2]=0,d[6]=0,d[10]=E,d[14]=C,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(e,t,i,s,o,l,u=Jb){const d=this.elements,p=1/(t-e),_=1/(i-s),y=1/(l-o),b=(t+e)*p,E=(i+s)*_;let C,A;if(u===Jb)C=(l+o)*y,A=-2*y;else if(u===rD)C=o*y,A=-1*y;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return d[0]=2*p,d[4]=0,d[8]=0,d[12]=-b,d[1]=0,d[5]=2*_,d[9]=0,d[13]=-E,d[2]=0,d[6]=0,d[10]=A,d[14]=-C,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const wT=new Dt,Ng=new Ws,Yte=new Dt(0,0,0),Kte=new Dt(1,1,1),Ov=new Dt,fC=new Dt,mm=new Dt,OU=new Ws,LU=new yl;class D1{constructor(e=0,t=0,i=0,s=D1.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],d=s[1],p=s[5],_=s[9],y=s[2],b=s[6],E=s[10];switch(t){case"XYZ":this._y=Math.asin($p(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-_,E),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(b,p),this._z=0);break;case"YXZ":this._x=Math.asin(-$p(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(u,E),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-y,o),this._z=0);break;case"ZXY":this._x=Math.asin($p(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(-y,E),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(d,o));break;case"ZYX":this._y=Math.asin(-$p(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(b,E),this._z=Math.atan2(d,o)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin($p(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-_,p),this._y=Math.atan2(-y,o)):(this._x=0,this._y=Math.atan2(u,E));break;case"XZY":this._z=Math.asin(-$p(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(b,p),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-_,E),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return OU.makeRotationFromQuaternion(e),this.setFromRotationMatrix(OU,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return LU.setFromEuler(this),this.setFromQuaternion(LU,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}D1.DEFAULT_ORDER="XYZ";class eM{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Jte=0;const DU=new Dt,$T=new yl,k_=new Ws,mC=new Dt,px=new Dt,qte=new Dt,Qte=new yl,NU=new Dt(1,0,0),BU=new Dt(0,1,0),PU=new Dt(0,0,1),Zte={type:"added"},ene={type:"removed"},i2={type:"childadded",child:null},s2={type:"childremoved",child:null};class lh extends GI{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Jte++}),this.uuid=qg(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=lh.DEFAULT_UP.clone();const e=new Dt,t=new D1,i=new yl,s=new Dt(1,1,1);function o(){i.setFromEuler(t,!1)}function l(){t.setFromQuaternion(i,void 0,!1)}t._onChange(o),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ws},normalMatrix:{value:new av}}),this.matrix=new Ws,this.matrixWorld=new Ws,this.matrixAutoUpdate=lh.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=lh.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new eM,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return $T.setFromAxisAngle(e,t),this.quaternion.multiply($T),this}rotateOnWorldAxis(e,t){return $T.setFromAxisAngle(e,t),this.quaternion.premultiply($T),this}rotateX(e){return this.rotateOnAxis(NU,e)}rotateY(e){return this.rotateOnAxis(BU,e)}rotateZ(e){return this.rotateOnAxis(PU,e)}translateOnAxis(e,t){return DU.copy(e).applyQuaternion(this.quaternion),this.position.add(DU.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(NU,e)}translateY(e){return this.translateOnAxis(BU,e)}translateZ(e){return this.translateOnAxis(PU,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(k_.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?mC.copy(e):mC.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),px.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?k_.lookAt(px,mC,this.up):k_.lookAt(mC,px,this.up),this.quaternion.setFromRotationMatrix(k_),s&&(k_.extractRotation(s.matrixWorld),$T.setFromRotationMatrix(k_),this.quaternion.premultiply($T.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Zte),i2.child=e,this.dispatchEvent(i2),i2.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ene),s2.child=e,this.dispatchEvent(s2),s2.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),k_.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),k_.multiply(e.parent.matrixWorld)),e.applyMatrix4(k_),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const l=this.children[i].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let o=0,l=s.length;o<l;o++)s[o].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(px,e,qte),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(px,Qte,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++){const o=t[i];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let o=0,l=s.length;o<l;o++){const u=s[o];u.matrixWorldAutoUpdate===!0&&u.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(u=>({boxInitialized:u.boxInitialized,boxMin:u.box.min.toArray(),boxMax:u.box.max.toArray(),sphereInitialized:u.sphereInitialized,sphereRadius:u.sphere.radius,sphereCenter:u.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(u,d){return u[d.uuid]===void 0&&(u[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const d=u.shapes;if(Array.isArray(d))for(let p=0,_=d.length;p<_;p++){const y=d[p];o(e.shapes,y)}else o(e.shapes,d)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let d=0,p=this.material.length;d<p;d++)u.push(o(e.materials,this.material[d]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const d=this.animations[u];s.animations.push(o(e.animations,d))}}if(t){const u=l(e.geometries),d=l(e.materials),p=l(e.textures),_=l(e.images),y=l(e.shapes),b=l(e.skeletons),E=l(e.animations),C=l(e.nodes);u.length>0&&(i.geometries=u),d.length>0&&(i.materials=d),p.length>0&&(i.textures=p),_.length>0&&(i.images=_),y.length>0&&(i.shapes=y),b.length>0&&(i.skeletons=b),E.length>0&&(i.animations=E),C.length>0&&(i.nodes=C)}return i.object=s,i;function l(u){const d=[];for(const p in u){const _=u[p];delete _.metadata,d.push(_)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}lh.DEFAULT_UP=new Dt(0,1,0);lh.DEFAULT_MATRIX_AUTO_UPDATE=!0;lh.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Bg=new Dt,O_=new Dt,o2=new Dt,L_=new Dt,CT=new Dt,AT=new Dt,FU=new Dt,a2=new Dt,l2=new Dt,u2=new Dt;class W0{constructor(e=new Dt,t=new Dt,i=new Dt){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Bg.subVectors(e,t),s.cross(Bg);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,i,s,o){Bg.subVectors(s,t),O_.subVectors(i,t),o2.subVectors(e,t);const l=Bg.dot(Bg),u=Bg.dot(O_),d=Bg.dot(o2),p=O_.dot(O_),_=O_.dot(o2),y=l*p-u*u;if(y===0)return o.set(0,0,0),null;const b=1/y,E=(p*d-u*_)*b,C=(l*_-u*d)*b;return o.set(1-E-C,C,E)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,L_)===null?!1:L_.x>=0&&L_.y>=0&&L_.x+L_.y<=1}static getInterpolation(e,t,i,s,o,l,u,d){return this.getBarycoord(e,t,i,s,L_)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(o,L_.x),d.addScaledVector(l,L_.y),d.addScaledVector(u,L_.z),d)}static isFrontFacing(e,t,i,s){return Bg.subVectors(i,t),O_.subVectors(e,t),Bg.cross(O_).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Bg.subVectors(this.c,this.b),O_.subVectors(this.a,this.b),Bg.cross(O_).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return W0.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return W0.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,o){return W0.getInterpolation(e,this.a,this.b,this.c,t,i,s,o)}containsPoint(e){return W0.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return W0.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,o=this.c;let l,u;CT.subVectors(s,i),AT.subVectors(o,i),a2.subVectors(e,i);const d=CT.dot(a2),p=AT.dot(a2);if(d<=0&&p<=0)return t.copy(i);l2.subVectors(e,s);const _=CT.dot(l2),y=AT.dot(l2);if(_>=0&&y<=_)return t.copy(s);const b=d*y-_*p;if(b<=0&&d>=0&&_<=0)return l=d/(d-_),t.copy(i).addScaledVector(CT,l);u2.subVectors(e,o);const E=CT.dot(u2),C=AT.dot(u2);if(C>=0&&E<=C)return t.copy(o);const A=E*p-d*C;if(A<=0&&p>=0&&C<=0)return u=p/(p-C),t.copy(i).addScaledVector(AT,u);const I=_*C-E*y;if(I<=0&&y-_>=0&&E-C>=0)return FU.subVectors(o,s),u=(y-_)/(y-_+(E-C)),t.copy(s).addScaledVector(FU,u);const L=1/(I+A+b);return l=A*L,u=b*L,t.copy(i).addScaledVector(CT,l).addScaledVector(AT,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const i8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Lv={h:0,s:0,l:0},gC={h:0,s:0,l:0};function c2(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Rh{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Jv){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Lg.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=Lg.workingColorSpace){return this.r=e,this.g=t,this.b=i,Lg.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=Lg.workingColorSpace){if(e=AB(e,1),t=$p(t,0,1),i=$p(i,0,1),t===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,l=2*i-o;this.r=c2(l,o,e+1/3),this.g=c2(l,o,e),this.b=c2(l,o,e-1/3)}return Lg.toWorkingColorSpace(this,s),this}setStyle(e,t=Jv){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(l===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Jv){const i=i8[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=NS(e.r),this.g=NS(e.g),this.b=NS(e.b),this}copyLinearToSRGB(e){return this.r=Jk(e.r),this.g=Jk(e.g),this.b=Jk(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Jv){return Lg.fromWorkingColorSpace(yp.copy(this),e),Math.round($p(yp.r*255,0,255))*65536+Math.round($p(yp.g*255,0,255))*256+Math.round($p(yp.b*255,0,255))}getHexString(e=Jv){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Lg.workingColorSpace){Lg.fromWorkingColorSpace(yp.copy(this),t);const i=yp.r,s=yp.g,o=yp.b,l=Math.max(i,s,o),u=Math.min(i,s,o);let d,p;const _=(u+l)/2;if(u===l)d=0,p=0;else{const y=l-u;switch(p=_<=.5?y/(l+u):y/(2-l-u),l){case i:d=(s-o)/y+(s<o?6:0);break;case s:d=(o-i)/y+2;break;case o:d=(i-s)/y+4;break}d/=6}return e.h=d,e.s=p,e.l=_,e}getRGB(e,t=Lg.workingColorSpace){return Lg.fromWorkingColorSpace(yp.copy(this),t),e.r=yp.r,e.g=yp.g,e.b=yp.b,e}getStyle(e=Jv){Lg.fromWorkingColorSpace(yp.copy(this),e);const t=yp.r,i=yp.g,s=yp.b;return e!==Jv?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(Lv),this.setHSL(Lv.h+e,Lv.s+t,Lv.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Lv),e.getHSL(gC);const i=hw(Lv.h,gC.h,t),s=hw(Lv.s,gC.s,t),o=hw(Lv.l,gC.l,t);return this.setHSL(i,s,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*s,this.g=o[1]*t+o[4]*i+o[7]*s,this.b=o[2]*t+o[5]*i+o[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const yp=new Rh;Rh.NAMES=i8;let tne=0;class my extends GI{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:tne++}),this.uuid=qg(),this.name="",this.type="Material",this.blending=fU,this.side=KM,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=gU,this.blendDst=_U,this.blendEquation=mU,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Rh(0,0,0),this.blendAlpha=0,this.depthFunc=vU,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=CU,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=bT,this.stencilZFail=bT,this.stencilZPass=bT,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==fU&&(i.blending=this.blending),this.side!==KM&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==gU&&(i.blendSrc=this.blendSrc),this.blendDst!==_U&&(i.blendDst=this.blendDst),this.blendEquation!==mU&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==vU&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==CU&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==bT&&(i.stencilFail=this.stencilFail),this.stencilZFail!==bT&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==bT&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(o){const l=[];for(const u in o){const d=o[u];delete d.metadata,l.push(d)}return l}if(t){const o=s(e.textures),l=s(e.images);o.length>0&&(i.textures=o),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let o=0;o!==s;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class xS extends my{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Rh(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new D1,this.combine=hte,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const $h=new Dt,_C=new oc;class Cm{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=nD,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=wB,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return r8("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)_C.fromBufferAttribute(this,t),_C.applyMatrix3(e),this.setXY(t,_C.x,_C.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)$h.fromBufferAttribute(this,t),$h.applyMatrix3(e),this.setXYZ(t,$h.x,$h.y,$h.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)$h.fromBufferAttribute(this,t),$h.applyMatrix4(e),this.setXYZ(t,$h.x,$h.y,$h.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)$h.fromBufferAttribute(this,t),$h.applyNormalMatrix(e),this.setXYZ(t,$h.x,$h.y,$h.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)$h.fromBufferAttribute(this,t),$h.transformDirection(e),this.setXYZ(t,$h.x,$h.y,$h.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Vg(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=wa(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Vg(t,this.array)),t}setX(e,t){return this.normalized&&(t=wa(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Vg(t,this.array)),t}setY(e,t){return this.normalized&&(t=wa(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Vg(t,this.array)),t}setZ(e,t){return this.normalized&&(t=wa(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Vg(t,this.array)),t}setW(e,t){return this.normalized&&(t=wa(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=wa(t,this.array),i=wa(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=wa(t,this.array),i=wa(i,this.array),s=wa(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e*=this.itemSize,this.normalized&&(t=wa(t,this.array),i=wa(i,this.array),s=wa(s,this.array),o=wa(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==nD&&(e.usage=this.usage),e}}class nne extends Cm{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class rne extends Cm{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class MB extends Cm{constructor(e,t,i){super(new Float32Array(e),t,i)}}let ine=0;const qm=new Ws,h2=new lh,MT=new Dt,gm=new lv,fx=new lv,md=new Dt;class Iy extends GI{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ine++}),this.uuid=qg(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(zte(e)?rne:nne)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new av().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return qm.makeRotationFromQuaternion(e),this.applyMatrix4(qm),this}rotateX(e){return qm.makeRotationX(e),this.applyMatrix4(qm),this}rotateY(e){return qm.makeRotationY(e),this.applyMatrix4(qm),this}rotateZ(e){return qm.makeRotationZ(e),this.applyMatrix4(qm),this}translate(e,t,i){return qm.makeTranslation(e,t,i),this.applyMatrix4(qm),this}scale(e,t,i){return qm.makeScale(e,t,i),this.applyMatrix4(qm),this}lookAt(e){return h2.lookAt(e),h2.updateMatrix(),this.applyMatrix4(h2.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(MT).negate(),this.translate(MT.x,MT.y,MT.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new MB(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new lv);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Dt(-1/0,-1/0,-1/0),new Dt(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const o=t[i];gm.setFromBufferAttribute(o),this.morphTargetsRelative?(md.addVectors(this.boundingBox.min,gm.min),this.boundingBox.expandByPoint(md),md.addVectors(this.boundingBox.max,gm.max),this.boundingBox.expandByPoint(md)):(this.boundingBox.expandByPoint(gm.min),this.boundingBox.expandByPoint(gm.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new r_);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Dt,1/0);return}if(e){const i=this.boundingSphere.center;if(gm.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const u=t[o];fx.setFromBufferAttribute(u),this.morphTargetsRelative?(md.addVectors(gm.min,fx.min),gm.expandByPoint(md),md.addVectors(gm.max,fx.max),gm.expandByPoint(md)):(gm.expandByPoint(fx.min),gm.expandByPoint(fx.max))}gm.getCenter(i);let s=0;for(let o=0,l=e.count;o<l;o++)md.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(md));if(t)for(let o=0,l=t.length;o<l;o++){const u=t[o],d=this.morphTargetsRelative;for(let p=0,_=u.count;p<_;p++)md.fromBufferAttribute(u,p),d&&(MT.fromBufferAttribute(e,p),md.add(MT)),s=Math.max(s,i.distanceToSquared(md))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Cm(new Float32Array(4*i.count),4));const l=this.getAttribute("tangent"),u=[],d=[];for(let U=0;U<i.count;U++)u[U]=new Dt,d[U]=new Dt;const p=new Dt,_=new Dt,y=new Dt,b=new oc,E=new oc,C=new oc,A=new Dt,I=new Dt;function L(U,Q,ne){p.fromBufferAttribute(i,U),_.fromBufferAttribute(i,Q),y.fromBufferAttribute(i,ne),b.fromBufferAttribute(o,U),E.fromBufferAttribute(o,Q),C.fromBufferAttribute(o,ne),_.sub(p),y.sub(p),E.sub(b),C.sub(b);const oe=1/(E.x*C.y-C.x*E.y);isFinite(oe)&&(A.copy(_).multiplyScalar(C.y).addScaledVector(y,-E.y).multiplyScalar(oe),I.copy(y).multiplyScalar(E.x).addScaledVector(_,-C.x).multiplyScalar(oe),u[U].add(A),u[Q].add(A),u[ne].add(A),d[U].add(I),d[Q].add(I),d[ne].add(I))}let O=this.groups;O.length===0&&(O=[{start:0,count:e.count}]);for(let U=0,Q=O.length;U<Q;++U){const ne=O[U],oe=ne.start,le=ne.count;for(let ge=oe,ce=oe+le;ge<ce;ge+=3)L(e.getX(ge+0),e.getX(ge+1),e.getX(ge+2))}const P=new Dt,N=new Dt,z=new Dt,W=new Dt;function H(U){z.fromBufferAttribute(s,U),W.copy(z);const Q=u[U];P.copy(Q),P.sub(z.multiplyScalar(z.dot(Q))).normalize(),N.crossVectors(W,Q);const oe=N.dot(d[U])<0?-1:1;l.setXYZW(U,P.x,P.y,P.z,oe)}for(let U=0,Q=O.length;U<Q;++U){const ne=O[U],oe=ne.start,le=ne.count;for(let ge=oe,ce=oe+le;ge<ce;ge+=3)H(e.getX(ge+0)),H(e.getX(ge+1)),H(e.getX(ge+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Cm(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let b=0,E=i.count;b<E;b++)i.setXYZ(b,0,0,0);const s=new Dt,o=new Dt,l=new Dt,u=new Dt,d=new Dt,p=new Dt,_=new Dt,y=new Dt;if(e)for(let b=0,E=e.count;b<E;b+=3){const C=e.getX(b+0),A=e.getX(b+1),I=e.getX(b+2);s.fromBufferAttribute(t,C),o.fromBufferAttribute(t,A),l.fromBufferAttribute(t,I),_.subVectors(l,o),y.subVectors(s,o),_.cross(y),u.fromBufferAttribute(i,C),d.fromBufferAttribute(i,A),p.fromBufferAttribute(i,I),u.add(_),d.add(_),p.add(_),i.setXYZ(C,u.x,u.y,u.z),i.setXYZ(A,d.x,d.y,d.z),i.setXYZ(I,p.x,p.y,p.z)}else for(let b=0,E=t.count;b<E;b+=3)s.fromBufferAttribute(t,b+0),o.fromBufferAttribute(t,b+1),l.fromBufferAttribute(t,b+2),_.subVectors(l,o),y.subVectors(s,o),_.cross(y),i.setXYZ(b+0,_.x,_.y,_.z),i.setXYZ(b+1,_.x,_.y,_.z),i.setXYZ(b+2,_.x,_.y,_.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)md.fromBufferAttribute(e,t),md.normalize(),e.setXYZ(t,md.x,md.y,md.z)}toNonIndexed(){function e(u,d){const p=u.array,_=u.itemSize,y=u.normalized,b=new p.constructor(d.length*_);let E=0,C=0;for(let A=0,I=d.length;A<I;A++){u.isInterleavedBufferAttribute?E=d[A]*u.data.stride+u.offset:E=d[A]*_;for(let L=0;L<_;L++)b[C++]=p[E++]}return new Cm(b,_,y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Iy,i=this.index.array,s=this.attributes;for(const u in s){const d=s[u],p=e(d,i);t.setAttribute(u,p)}const o=this.morphAttributes;for(const u in o){const d=[],p=o[u];for(let _=0,y=p.length;_<y;_++){const b=p[_],E=e(b,i);d.push(E)}t.morphAttributes[u]=d}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,d=l.length;u<d;u++){const p=l[u];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(e[p]=d[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const d in i){const p=i[d];e.data.attributes[d]=p.toJSON(e.data)}const s={};let o=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],_=[];for(let y=0,b=p.length;y<b;y++){const E=p[y];_.push(E.toJSON(e.data))}_.length>0&&(s[d]=_,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const p in s){const _=s[p];this.setAttribute(p,_.clone(t))}const o=e.morphAttributes;for(const p in o){const _=[],y=o[p];for(let b=0,E=y.length;b<E;b++)_.push(y[b].clone(t));this.morphAttributes[p]=_}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let p=0,_=l.length;p<_;p++){const y=l[p];this.addGroup(y.start,y.count,y.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const UU=new Ws,_b=new WI,vC=new r_,zU=new Dt,IT=new Dt,RT=new Dt,kT=new Dt,d2=new Dt,yC=new Dt,bC=new oc,TC=new oc,SC=new oc,HU=new Dt,GU=new Dt,WU=new Dt,EC=new Dt,xC=new Dt;class VI extends lh{constructor(e=new Iy,t=new xS){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,o=i.morphAttributes.position,l=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const u=this.morphTargetInfluences;if(o&&u){yC.set(0,0,0);for(let d=0,p=o.length;d<p;d++){const _=u[d],y=o[d];_!==0&&(d2.fromBufferAttribute(y,e),l?yC.addScaledVector(d2,_):yC.addScaledVector(d2.sub(t),_))}t.add(yC)}return t}raycast(e,t){const i=this.geometry,s=this.material,o=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),vC.copy(i.boundingSphere),vC.applyMatrix4(o),_b.copy(e.ray).recast(e.near),!(vC.containsPoint(_b.origin)===!1&&(_b.intersectSphere(vC,zU)===null||_b.origin.distanceToSquared(zU)>(e.far-e.near)**2))&&(UU.copy(o).invert(),_b.copy(e.ray).applyMatrix4(UU),!(i.boundingBox!==null&&_b.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,_b)))}_computeIntersections(e,t,i){let s;const o=this.geometry,l=this.material,u=o.index,d=o.attributes.position,p=o.attributes.uv,_=o.attributes.uv1,y=o.attributes.normal,b=o.groups,E=o.drawRange;if(u!==null)if(Array.isArray(l))for(let C=0,A=b.length;C<A;C++){const I=b[C],L=l[I.materialIndex],O=Math.max(I.start,E.start),P=Math.min(u.count,Math.min(I.start+I.count,E.start+E.count));for(let N=O,z=P;N<z;N+=3){const W=u.getX(N),H=u.getX(N+1),U=u.getX(N+2);s=wC(this,L,e,i,p,_,y,W,H,U),s&&(s.faceIndex=Math.floor(N/3),s.face.materialIndex=I.materialIndex,t.push(s))}}else{const C=Math.max(0,E.start),A=Math.min(u.count,E.start+E.count);for(let I=C,L=A;I<L;I+=3){const O=u.getX(I),P=u.getX(I+1),N=u.getX(I+2);s=wC(this,l,e,i,p,_,y,O,P,N),s&&(s.faceIndex=Math.floor(I/3),t.push(s))}}else if(d!==void 0)if(Array.isArray(l))for(let C=0,A=b.length;C<A;C++){const I=b[C],L=l[I.materialIndex],O=Math.max(I.start,E.start),P=Math.min(d.count,Math.min(I.start+I.count,E.start+E.count));for(let N=O,z=P;N<z;N+=3){const W=N,H=N+1,U=N+2;s=wC(this,L,e,i,p,_,y,W,H,U),s&&(s.faceIndex=Math.floor(N/3),s.face.materialIndex=I.materialIndex,t.push(s))}}else{const C=Math.max(0,E.start),A=Math.min(d.count,E.start+E.count);for(let I=C,L=A;I<L;I+=3){const O=I,P=I+1,N=I+2;s=wC(this,l,e,i,p,_,y,O,P,N),s&&(s.faceIndex=Math.floor(I/3),t.push(s))}}}}function sne(n,e,t,i,s,o,l,u){let d;if(e.side===ute?d=i.intersectTriangle(l,o,s,!0,u):d=i.intersectTriangle(s,o,l,e.side===KM,u),d===null)return null;xC.copy(u),xC.applyMatrix4(n.matrixWorld);const p=t.ray.origin.distanceTo(xC);return p<t.near||p>t.far?null:{distance:p,point:xC.clone(),object:n}}function wC(n,e,t,i,s,o,l,u,d,p){n.getVertexPosition(u,IT),n.getVertexPosition(d,RT),n.getVertexPosition(p,kT);const _=sne(n,e,t,i,IT,RT,kT,EC);if(_){s&&(bC.fromBufferAttribute(s,u),TC.fromBufferAttribute(s,d),SC.fromBufferAttribute(s,p),_.uv=W0.getInterpolation(EC,IT,RT,kT,bC,TC,SC,new oc)),o&&(bC.fromBufferAttribute(o,u),TC.fromBufferAttribute(o,d),SC.fromBufferAttribute(o,p),_.uv1=W0.getInterpolation(EC,IT,RT,kT,bC,TC,SC,new oc)),l&&(HU.fromBufferAttribute(l,u),GU.fromBufferAttribute(l,d),WU.fromBufferAttribute(l,p),_.normal=W0.getInterpolation(EC,IT,RT,kT,HU,GU,WU,new Dt),_.normal.dot(i.direction)>0&&_.normal.multiplyScalar(-1));const y={a:u,b:d,c:p,normal:new Dt,materialIndex:0};W0.getNormal(IT,RT,kT,y.normal),_.face=y}return _}class s8 extends lh{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ws,this.projectionMatrix=new Ws,this.projectionMatrixInverse=new Ws,this.coordinateSystem=Jb}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Dv=new Dt,VU=new oc,jU=new oc;class IB extends s8{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=zw*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(cw*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return zw*2*Math.atan(Math.tan(cw*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Dv.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Dv.x,Dv.y).multiplyScalar(-e/Dv.z),Dv.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Dv.x,Dv.y).multiplyScalar(-e/Dv.z)}getViewSize(e,t){return this.getViewBounds(e,VU,jU),t.subVectors(jU,VU)}setViewOffset(e,t,i,s,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(cw*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,o=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const d=l.fullWidth,p=l.fullHeight;o+=l.offsetX*s/d,t-=l.offsetY*i/p,s*=l.width/d,i*=l.height/p}const u=this.filmOffset;u!==0&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const p2=new Dt,one=new Dt,ane=new av;class OT{constructor(e=new Dt(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=p2.subVectors(i,t).cross(one.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(p2),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||ane.getNormalMatrix(e),s=this.coplanarPoint(p2).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const vb=new r_,$C=new Dt;class lne{constructor(e=new OT,t=new OT,i=new OT,s=new OT,o=new OT,l=new OT){this.planes=[e,t,i,s,o,l]}set(e,t,i,s,o,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(i),u[3].copy(s),u[4].copy(o),u[5].copy(l),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Jb){const i=this.planes,s=e.elements,o=s[0],l=s[1],u=s[2],d=s[3],p=s[4],_=s[5],y=s[6],b=s[7],E=s[8],C=s[9],A=s[10],I=s[11],L=s[12],O=s[13],P=s[14],N=s[15];if(i[0].setComponents(d-o,b-p,I-E,N-L).normalize(),i[1].setComponents(d+o,b+p,I+E,N+L).normalize(),i[2].setComponents(d+l,b+_,I+C,N+O).normalize(),i[3].setComponents(d-l,b-_,I-C,N-O).normalize(),i[4].setComponents(d-u,b-y,I-A,N-P).normalize(),t===Jb)i[5].setComponents(d+u,b+y,I+A,N+P).normalize();else if(t===rD)i[5].setComponents(u,y,A,P).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),vb.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),vb.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(vb)}intersectsSprite(e){return vb.center.set(0,0,0),vb.radius=.7071067811865476,vb.applyMatrix4(e.matrixWorld),this.intersectsSphere(vb)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if($C.x=s.normal.x>0?e.max.x:e.min.x,$C.y=s.normal.y>0?e.max.y:e.min.y,$C.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint($C)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class o8 extends s8{constructor(e=-1,t=1,i=1,s=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=i-e,l=i+e,u=s+t,d=s-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,_=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=p*this.view.offsetX,l=o+p*this.view.width,u-=_*this.view.offsetY,d=u-_*this.view.height}this.projectionMatrix.makeOrthographic(o,l,u,d,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class une extends $m{constructor(e,t,i,s,o,l,u,d,p,_){if(_=_!==void 0?_:Xk,_!==Xk&&_!==bU)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&_===Xk&&(i=gte),i===void 0&&_===bU&&(i=_te),super(null,s,o,l,u,d,_,i,p),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:Fw,this.minFilter=d!==void 0?d:Fw,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const cne=new une(1,1);cne.compareFunction=Ete;class f2 extends lh{constructor(){super(),this.isGroup=!0,this.type="Group"}}class hne{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=nD,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=qg()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return r8("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qg()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qg()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Xp=new Dt;class RB{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Xp.fromBufferAttribute(this,t),Xp.applyMatrix4(e),this.setXYZ(t,Xp.x,Xp.y,Xp.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Xp.fromBufferAttribute(this,t),Xp.applyNormalMatrix(e),this.setXYZ(t,Xp.x,Xp.y,Xp.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Xp.fromBufferAttribute(this,t),Xp.transformDirection(e),this.setXYZ(t,Xp.x,Xp.y,Xp.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Vg(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=wa(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=wa(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=wa(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=wa(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=wa(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Vg(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Vg(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Vg(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Vg(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=wa(t,this.array),i=wa(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=wa(t,this.array),i=wa(i,this.array),s=wa(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=wa(t,this.array),i=wa(i,this.array),s=wa(s,this.array),o=wa(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return new Cm(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new RB(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const XU=new Dt,YU=new ug,KU=new ug,dne=new Dt,JU=new Ws,CC=new Dt,m2=new r_,qU=new Ws,g2=new WI;class pne extends VI{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=yU,this.bindMatrix=new Ws,this.bindMatrixInverse=new Ws,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new lv),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,CC),this.boundingBox.expandByPoint(CC)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new r_),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,CC),this.boundingSphere.expandByPoint(CC)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),m2.copy(this.boundingSphere),m2.applyMatrix4(s),e.ray.intersectsSphere(m2)!==!1&&(qU.copy(s).invert(),g2.copy(e.ray).applyMatrix4(qU),!(this.boundingBox!==null&&g2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,g2)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ug,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===yU?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===dte?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;YU.fromBufferAttribute(s.attributes.skinIndex,e),KU.fromBufferAttribute(s.attributes.skinWeight,e),XU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=KU.getComponent(o);if(l!==0){const u=YU.getComponent(o);JU.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),t.addScaledVector(dne.copy(XU).applyMatrix4(JU),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class a8 extends lh{constructor(){super(),this.isBone=!0,this.type="Bone"}}class l8 extends $m{constructor(e=null,t=1,i=1,s,o,l,u,d,p=Fw,_=Fw,y,b){super(null,l,u,d,p,_,s,o,y,b),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const QU=new Ws,fne=new Ws;class kB{constructor(e=[],t=[]){this.uuid=qg(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new Ws)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Ws;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const u=e[o]?e[o].matrixWorld:fne;QU.multiplyMatrices(u,t[o]),QU.toArray(i,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new kB(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new l8(t,e,e,$B,wB);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const o=e.bones[i];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new a8),this.bones.push(l),this.boneInverses.push(new Ws().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,o=t.length;s<o;s++){const l=t[s];e.bones.push(l.uuid);const u=i[s];e.boneInverses.push(u.toArray())}return e}}class ZU extends Cm{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const LT=new Ws,ez=new Ws,AC=[],tz=new lv,mne=new Ws,mx=new VI,gx=new r_;class gne extends VI{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ZU(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,mne)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new lv),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,LT),tz.copy(e.boundingBox).applyMatrix4(LT),this.boundingBox.union(tz)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new r_),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,LT),gx.copy(e.boundingSphere).applyMatrix4(LT),this.boundingSphere.union(gx)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,s=this.morphTexture.source.data.data,o=i.length+1,l=e*o+1;for(let u=0;u<i.length;u++)i[u]=s[l+u]}raycast(e,t){const i=this.matrixWorld,s=this.count;if(mx.geometry=this.geometry,mx.material=this.material,mx.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),gx.copy(this.boundingSphere),gx.applyMatrix4(i),e.ray.intersectsSphere(gx)!==!1))for(let o=0;o<s;o++){this.getMatrixAt(o,LT),ez.multiplyMatrices(i,LT),mx.matrixWorld=ez,mx.raycast(e,AC);for(let l=0,u=AC.length;l<u;l++){const d=AC[l];d.instanceId=o,d.object=this,t.push(d)}AC.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ZU(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new l8(new Float32Array(s*this.count),s,this.count,vte,wB));const o=this.morphTexture.source.data.data;let l=0;for(let p=0;p<i.length;p++)l+=i[p];const u=this.geometry.morphTargetsRelative?1:1-l,d=s*e;o[d]=u,o.set(i,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class u8 extends my{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Rh(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const nz=new Dt,rz=new Dt,iz=new Ws,_2=new WI,MC=new r_;class OB extends lh{constructor(e=new Iy,t=new u8){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,o=t.count;s<o;s++)nz.fromBufferAttribute(t,s-1),rz.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=nz.distanceTo(rz);e.setAttribute("lineDistance",new MB(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),MC.copy(i.boundingSphere),MC.applyMatrix4(s),MC.radius+=o,e.ray.intersectsSphere(MC)===!1)return;iz.copy(s).invert(),_2.copy(e.ray).applyMatrix4(iz);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=new Dt,_=new Dt,y=new Dt,b=new Dt,E=this.isLineSegments?2:1,C=i.index,I=i.attributes.position;if(C!==null){const L=Math.max(0,l.start),O=Math.min(C.count,l.start+l.count);for(let P=L,N=O-1;P<N;P+=E){const z=C.getX(P),W=C.getX(P+1);if(p.fromBufferAttribute(I,z),_.fromBufferAttribute(I,W),_2.distanceSqToSegment(p,_,b,y)>d)continue;b.applyMatrix4(this.matrixWorld);const U=e.ray.origin.distanceTo(b);U<e.near||U>e.far||t.push({distance:U,point:y.clone().applyMatrix4(this.matrixWorld),index:P,face:null,faceIndex:null,object:this})}}else{const L=Math.max(0,l.start),O=Math.min(I.count,l.start+l.count);for(let P=L,N=O-1;P<N;P+=E){if(p.fromBufferAttribute(I,P),_.fromBufferAttribute(I,P+1),_2.distanceSqToSegment(p,_,b,y)>d)continue;b.applyMatrix4(this.matrixWorld);const W=e.ray.origin.distanceTo(b);W<e.near||W>e.far||t.push({distance:W,point:y.clone().applyMatrix4(this.matrixWorld),index:P,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}const sz=new Dt,oz=new Dt;class _ne extends OB{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,o=t.count;s<o;s+=2)sz.fromBufferAttribute(t,s),oz.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+sz.distanceTo(oz);e.setAttribute("lineDistance",new MB(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class vne extends OB{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class c8 extends my{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Rh(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const az=new Ws,sD=new WI,IC=new r_,RC=new Dt;class yne extends lh{constructor(e=new Iy,t=new c8){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),IC.copy(i.boundingSphere),IC.applyMatrix4(s),IC.radius+=o,e.ray.intersectsSphere(IC)===!1)return;az.copy(s).invert(),sD.copy(e.ray).applyMatrix4(az);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=i.index,y=i.attributes.position;if(p!==null){const b=Math.max(0,l.start),E=Math.min(p.count,l.start+l.count);for(let C=b,A=E;C<A;C++){const I=p.getX(C);RC.fromBufferAttribute(y,I),lz(RC,I,d,s,e,t,this)}}else{const b=Math.max(0,l.start),E=Math.min(y.count,l.start+l.count);for(let C=b,A=E;C<A;C++)RC.fromBufferAttribute(y,C),lz(RC,C,d,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}function lz(n,e,t,i,s,o,l){const u=sD.distanceSqToPoint(n);if(u<t){const d=new Dt;sD.closestPointToPoint(n,d),d.applyMatrix4(i);const p=s.ray.origin.distanceTo(d);if(p<s.near||p>s.far)return;o.push({distance:p,distanceToRay:Math.sqrt(u),point:d,index:e,face:null,object:l})}}class LB extends my{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Rh(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rh(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tte,this.normalScale=new oc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new D1,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ry extends LB{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new oc(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return $p(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Rh(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Rh(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Rh(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function kC(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function bne(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Tne(n){function e(s,o){return n[s]-n[o]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function uz(n,e,t){const i=n.length,s=new n.constructor(i);for(let o=0,l=0;l!==i;++o){const u=t[o]*e;for(let d=0;d!==e;++d)s[l++]=n[u+d]}return s}function h8(n,e,t,i){let s=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[s++];if(o===void 0)return;let l=o[i];if(l!==void 0)if(Array.isArray(l))do l=o[i],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=n[s++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[i],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=n[s++];while(o!==void 0);else do l=o[i],l!==void 0&&(e.push(o.time),t.push(l)),o=n[s++];while(o!==void 0)}class x${constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],o=t[i-1];e:{t:{let l;n:{r:if(!(e<s)){for(let u=i+2;;){if(s===void 0){if(e<o)break r;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(o=s,s=t[++i],e<s)break t}l=t.length;break n}if(!(e>=o)){const u=t[1];e<u&&(i=2,o=u);for(let d=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===d)break;if(s=o,o=t[--i-1],e>=o)break t}l=i,i=0;break n}break e}for(;i<l;){const u=i+l>>>1;e<t[u]?l=u:i=u+1}if(s=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,s)}return this.interpolate_(i,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s;for(let l=0;l!==s;++l)t[l]=i[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Sne extends x${constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:TU,endingEnd:TU}}intervalChanged_(e,t,i){const s=this.parameterPositions;let o=e-2,l=e+1,u=s[o],d=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case SU:o=e,u=2*t-i;break;case EU:o=s.length-2,u=t+s[o]-s[o+1];break;default:o=e,u=i}if(d===void 0)switch(this.getSettings_().endingEnd){case SU:l=e,d=2*i-t;break;case EU:l=1,d=i+s[1]-s[0];break;default:l=e-1,d=t}const p=(i-t)*.5,_=this.valueSize;this._weightPrev=p/(t-u),this._weightNext=p/(d-i),this._offsetPrev=o*_,this._offsetNext=l*_}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=e*u,p=d-u,_=this._offsetPrev,y=this._offsetNext,b=this._weightPrev,E=this._weightNext,C=(i-t)/(s-t),A=C*C,I=A*C,L=-b*I+2*b*A-b*C,O=(1+b)*I+(-1.5-2*b)*A+(-.5+b)*C+1,P=(-1-E)*I+(1.5+E)*A+.5*C,N=E*I-E*A;for(let z=0;z!==u;++z)o[z]=L*l[_+z]+O*l[p+z]+P*l[d+z]+N*l[y+z];return o}}class Ene extends x${constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=e*u,p=d-u,_=(i-t)/(s-t),y=1-_;for(let b=0;b!==u;++b)o[b]=l[p+b]*y+l[d+b]*_;return o}}class xne extends x${constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class i_{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=kC(t,this.TimeBufferType),this.values=kC(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:kC(e.times,Array),values:kC(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new xne(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Ene(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Sne(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Uw:t=this.InterpolantFactoryMethodDiscrete;break;case qS:t=this.InterpolantFactoryMethodLinear;break;case Yk:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Uw;case this.InterpolantFactoryMethodLinear:return qS;case this.InterpolantFactoryMethodSmooth:return Yk}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let o=0,l=s-1;for(;o!==s&&i[o]<e;)++o;for(;l!==-1&&i[l]>t;)--l;if(++l,o!==0||l!==s){o>=l&&(l=Math.max(l,1),o=l-1);const u=this.getValueSize();this.times=i.slice(o,l),this.values=this.values.slice(o*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==o;u++){const d=i[u];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,d),e=!1;break}if(l!==null&&l>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,d,l),e=!1;break}l=d}if(s!==void 0&&bne(s))for(let u=0,d=s.length;u!==d;++u){const p=s[u];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===Yk,o=e.length-1;let l=1;for(let u=1;u<o;++u){let d=!1;const p=e[u],_=e[u+1];if(p!==_&&(u!==1||p!==e[0]))if(s)d=!0;else{const y=u*i,b=y-i,E=y+i;for(let C=0;C!==i;++C){const A=t[y+C];if(A!==t[b+C]||A!==t[E+C]){d=!0;break}}}if(d){if(u!==l){e[l]=e[u];const y=u*i,b=l*i;for(let E=0;E!==i;++E)t[b+E]=t[y+E]}++l}}if(o>0){e[l]=e[o];for(let u=o*i,d=l*i,p=0;p!==i;++p)t[d+p]=t[u+p];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}i_.prototype.TimeBufferType=Float32Array;i_.prototype.ValueBufferType=Float32Array;i_.prototype.DefaultInterpolation=qS;class SE extends i_{}SE.prototype.ValueTypeName="bool";SE.prototype.ValueBufferType=Array;SE.prototype.DefaultInterpolation=Uw;SE.prototype.InterpolantFactoryMethodLinear=void 0;SE.prototype.InterpolantFactoryMethodSmooth=void 0;class d8 extends i_{}d8.prototype.ValueTypeName="color";class Hw extends i_{}Hw.prototype.ValueTypeName="number";class wne extends x${constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=(i-t)/(s-t);let p=e*u;for(let _=p+u;p!==_;p+=4)yl.slerpFlat(o,0,l,p-u,l,p,d);return o}}class x1 extends i_{InterpolantFactoryMethodLinear(e){return new wne(this.times,this.values,this.getValueSize(),e)}}x1.prototype.ValueTypeName="quaternion";x1.prototype.DefaultInterpolation=qS;x1.prototype.InterpolantFactoryMethodSmooth=void 0;class EE extends i_{}EE.prototype.ValueTypeName="string";EE.prototype.ValueBufferType=Array;EE.prototype.DefaultInterpolation=Uw;EE.prototype.InterpolantFactoryMethodLinear=void 0;EE.prototype.InterpolantFactoryMethodSmooth=void 0;class Gw extends i_{}Gw.prototype.ValueTypeName="vector";class $ne{constructor(e,t=-1,i,s=yte){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=qg(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let l=0,u=i.length;l!==u;++l)t.push(Ane(i[l]).scale(s));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=i.length;o!==l;++o)t.push(i_.toJSON(i[o]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const o=t.length,l=[];for(let u=0;u<o;u++){let d=[],p=[];d.push((u+o-1)%o,u,(u+1)%o),p.push(0,1,0);const _=Tne(d);d=uz(d,1,_),p=uz(p,1,_),!s&&d[0]===0&&(d.push(o),p.push(p[0])),l.push(new Hw(".morphTargetInfluences["+t[u].name+"]",d,p).scale(1/i))}return new this(e,-1,l)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},o=/^([\w-]*?)([\d]+)$/;for(let u=0,d=e.length;u<d;u++){const p=e[u],_=p.name.match(o);if(_&&_.length>1){const y=_[1];let b=s[y];b||(s[y]=b=[]),b.push(p)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],t,i));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(y,b,E,C,A){if(E.length!==0){const I=[],L=[];h8(E,I,L,C),I.length!==0&&A.push(new y(b,I,L))}},s=[],o=e.name||"default",l=e.fps||30,u=e.blendMode;let d=e.length||-1;const p=e.hierarchy||[];for(let y=0;y<p.length;y++){const b=p[y].keys;if(!(!b||b.length===0))if(b[0].morphTargets){const E={};let C;for(C=0;C<b.length;C++)if(b[C].morphTargets)for(let A=0;A<b[C].morphTargets.length;A++)E[b[C].morphTargets[A]]=-1;for(const A in E){const I=[],L=[];for(let O=0;O!==b[C].morphTargets.length;++O){const P=b[C];I.push(P.time),L.push(P.morphTarget===A?1:0)}s.push(new Hw(".morphTargetInfluence["+A+"]",I,L))}d=E.length*l}else{const E=".bones["+t[y].name+"]";i(Gw,E+".position",b,"pos",s),i(x1,E+".quaternion",b,"rot",s),i(Gw,E+".scale",b,"scl",s)}}return s.length===0?null:new this(o,d,s,u)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Cne(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Hw;case"vector":case"vector2":case"vector3":case"vector4":return Gw;case"color":return d8;case"quaternion":return x1;case"bool":case"boolean":return SE;case"string":return EE}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Ane(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Cne(n.type);if(n.times===void 0){const t=[],i=[];h8(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const iy={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Mne{constructor(e,t,i){const s=this;let o=!1,l=0,u=0,d;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(_){u++,o===!1&&s.onStart!==void 0&&s.onStart(_,l,u),o=!0},this.itemEnd=function(_){l++,s.onProgress!==void 0&&s.onProgress(_,l,u),l===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(_){s.onError!==void 0&&s.onError(_)},this.resolveURL=function(_){return d?d(_):_},this.setURLModifier=function(_){return d=_,this},this.addHandler=function(_,y){return p.push(_,y),this},this.removeHandler=function(_){const y=p.indexOf(_);return y!==-1&&p.splice(y,2),this},this.getHandler=function(_){for(let y=0,b=p.length;y<b;y+=2){const E=p[y],C=p[y+1];if(E.global&&(E.lastIndex=0),E.test(_))return C}return null}}}const Ine=new Mne;class N1{constructor(e){this.manager=e!==void 0?e:Ine,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,o){i.load(e,s,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}N1.DEFAULT_MATERIAL_NAME="__DEFAULT";const D_={};class Rne extends Error{constructor(e,t){super(e),this.response=t}}class JM extends N1{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=iy.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(D_[e]!==void 0){D_[e].push({onLoad:t,onProgress:i,onError:s});return}D_[e]=[],D_[e].push({onLoad:t,onProgress:i,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,d=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const _=D_[e],y=p.body.getReader(),b=p.headers.get("Content-Length")||p.headers.get("X-File-Size"),E=b?parseInt(b):0,C=E!==0;let A=0;const I=new ReadableStream({start(L){O();function O(){y.read().then(({done:P,value:N})=>{if(P)L.close();else{A+=N.byteLength;const z=new ProgressEvent("progress",{lengthComputable:C,loaded:A,total:E});for(let W=0,H=_.length;W<H;W++){const U=_[W];U.onProgress&&U.onProgress(z)}L.enqueue(N),O()}})}}});return new Response(I)}else throw new Rne(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(_=>new DOMParser().parseFromString(_,u));case"json":return p.json();default:if(u===void 0)return p.text();{const y=/charset="?([^;"\s]*)"?/i.exec(u),b=y&&y[1]?y[1].toLowerCase():void 0,E=new TextDecoder(b);return p.arrayBuffer().then(C=>E.decode(C))}}}).then(p=>{iy.add(e,p);const _=D_[e];delete D_[e];for(let y=0,b=_.length;y<b;y++){const E=_[y];E.onLoad&&E.onLoad(p)}}).catch(p=>{const _=D_[e];if(_===void 0)throw this.manager.itemError(e),p;delete D_[e];for(let y=0,b=_.length;y<b;y++){const E=_[y];E.onError&&E.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class kne extends N1{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=iy.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u=iD("img");function d(){_(),iy.add(e,this),t&&t(this),o.manager.itemEnd(e)}function p(y){_(),s&&s(y),o.manager.itemError(e),o.manager.itemEnd(e)}function _(){u.removeEventListener("load",d,!1),u.removeEventListener("error",p,!1)}return u.addEventListener("load",d,!1),u.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(e),u.src=e,u}}class One extends N1{constructor(e){super(e)}load(e,t,i,s){const o=new $m,l=new kne(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){o.image=u,o.needsUpdate=!0,t!==void 0&&t(o)},i,s),o}}class DB extends lh{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Rh(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const v2=new Ws,cz=new Dt,hz=new Dt;class NB{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new oc(512,512),this.map=null,this.mapPass=null,this.matrix=new Ws,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new lne,this._frameExtents=new oc(1,1),this._viewportCount=1,this._viewports=[new ug(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;cz.setFromMatrixPosition(e.matrixWorld),t.position.copy(cz),hz.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(hz),t.updateMatrixWorld(),v2.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(v2),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(v2)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Lne extends NB{constructor(){super(new IB(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=zw*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||s!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=s,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Dne extends DB{constructor(e,t,i=0,s=Math.PI/3,o=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(lh.DEFAULT_UP),this.updateMatrix(),this.target=new lh,this.distance=i,this.angle=s,this.penumbra=o,this.decay=l,this.map=null,this.shadow=new Lne}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const dz=new Ws,_x=new Dt,y2=new Dt;class Nne extends NB{constructor(){super(new IB(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new oc(4,2),this._viewportCount=6,this._viewports=[new ug(2,1,1,1),new ug(0,1,1,1),new ug(3,1,1,1),new ug(1,1,1,1),new ug(3,0,1,1),new ug(1,0,1,1)],this._cubeDirections=[new Dt(1,0,0),new Dt(-1,0,0),new Dt(0,0,1),new Dt(0,0,-1),new Dt(0,1,0),new Dt(0,-1,0)],this._cubeUps=[new Dt(0,1,0),new Dt(0,1,0),new Dt(0,1,0),new Dt(0,1,0),new Dt(0,0,1),new Dt(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),_x.setFromMatrixPosition(e.matrixWorld),i.position.copy(_x),y2.copy(i.position),y2.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(y2),i.updateMatrixWorld(),s.makeTranslation(-_x.x,-_x.y,-_x.z),dz.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dz)}}class Bne extends DB{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new Nne}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Pne extends NB{constructor(){super(new o8(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Fne extends DB{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(lh.DEFAULT_UP),this.updateMatrix(),this.target=new lh,this.shadow=new Pne}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class l1{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Une extends N1{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=iy.get(e);if(l!==void 0){if(o.manager.itemStart(e),l.then){l.then(p=>{t&&t(p),o.manager.itemEnd(e)}).catch(p=>{s&&s(p)});return}return setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader;const d=fetch(e,u).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(p){return iy.add(e,p),t&&t(p),o.manager.itemEnd(e),p}).catch(function(p){s&&s(p),iy.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});iy.add(e,d),o.manager.itemStart(e)}}const BB="\\[\\]\\.:\\/",zne=new RegExp("["+BB+"]","g"),PB="[^"+BB+"]",Hne="[^"+BB.replace("\\.","")+"]",Gne=/((?:WC+[\/:])*)/.source.replace("WC",PB),Wne=/(WCOD+)?/.source.replace("WCOD",Hne),Vne=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",PB),jne=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",PB),Xne=new RegExp("^"+Gne+Wne+Vne+jne+"$"),Yne=["material","materials","bones","map"];class Kne{constructor(e,t,i){const s=i||$a.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=i.length;s!==o;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class $a{constructor(e,t,i){this.path=t,this.parsedPath=i||$a.parseTrackName(t),this.node=$a.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new $a.Composite(e,t,i):new $a(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(zne,"")}static parseTrackName(e){const t=Xne.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=i.nodeName.substring(s+1);Yne.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===t||u.uuid===t)return u;const d=i(u.children);if(d)return d}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let o=t.propertyIndex;if(e||(e=$a.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let p=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let _=0;_<e.length;_++)if(e[_].name===p){p=_;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(p!==void 0){if(e[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const l=e[s];if(l===void 0){const p=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}d=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(d=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}$a.Composite=Kne;$a.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$a.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$a.prototype.GetterByBindingType=[$a.prototype._getValue_direct,$a.prototype._getValue_array,$a.prototype._getValue_arrayElement,$a.prototype._getValue_toArray];$a.prototype.SetterByBindingTypeAndVersioning=[[$a.prototype._setValue_direct,$a.prototype._setValue_direct_setNeedsUpdate,$a.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$a.prototype._setValue_array,$a.prototype._setValue_array_setNeedsUpdate,$a.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$a.prototype._setValue_arrayElement,$a.prototype._setValue_arrayElement_setNeedsUpdate,$a.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$a.prototype._setValue_fromArray,$a.prototype._setValue_fromArray_setNeedsUpdate,$a.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:SB}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=SB);const b2=180/Math.PI,td=Math.PI,tM=.079,T2=2*Math.PI*tM*180/1.5,S2=45,p8=.3725,f8=50*td/180,Nb=1e3,D0=1e3,m8="settings",g8="prompt",Jne={sxyz:[0,0,0,0],sxyx:[0,0,1,0],sxzy:[0,1,0,0],sxzx:[0,1,1,0],syzx:[1,0,0,0],syzy:[1,0,1,0],syxz:[1,1,0,0],syxy:[1,1,1,0],szxy:[2,0,0,0],szxz:[2,0,1,0],szyx:[2,1,0,0],szyz:[2,1,1,0],rzyx:[0,0,0,1],rxyx:[0,0,1,1],ryzx:[0,1,0,1],rxzx:[0,1,1,1],rxzy:[1,0,0,1],ryzy:[1,0,1,1],rzxy:[1,1,0,1],ryxy:[1,1,1,1],ryxz:[2,0,0,1],rzxz:[2,0,1,1],rxyz:[2,1,0,1],rzyz:[2,1,1,1]},pz=[1,2,0,1];function zl(n,e){return n.length<=0?null:i=>{const s=i>n[n.length-1]?i%n[n.length-1]:i;let o=0;for(let l=0;l<n.length&&n[l]<=s;l++)o=l;return e[o]}}const _8=(n,e="szxy")=>{let[t,i,s]=[...n],[o,l,u,d]=[...Jne[e.toLowerCase()]],p=o+1,_=pz[p+l-1]+1,y=pz[p-l]+1;if(d!==0){let H=[t,s];t=H[1],s=H[0]}l!==0&&(i=-1*i),t=t/2,i=i/2,s=s/2;let b=Math.cos(t),E=Math.sin(t),C=Math.cos(i),A=Math.sin(i),I=Math.cos(s),L=Math.sin(s),O=b*I,P=b*L,N=E*I,z=E*L,W=[null,null,null,null];return u!==0?(W[0]=C*(O-z),W[p]=C*(P+N),W[_]=A*(O+z),W[y]=A*(P-N)):(W[0]=C*O+A*z,W[p]=C*N-A*P,W[_]=C*z+A*O,W[y]=C*P-A*N),l!==0&&(W[_]*=-1),W},qne=n=>({x:n.x*b2,y:n.y*b2,z:n.z*b2}),nM=n=>{let e=qne(new D1().setFromQuaternion(new yl(n.x,n.y,n.z,n.w)));return{x:e.x,y:e.y,z:e.z}},H_=(n,e,t)=>{let i=Math.cos(n*.5),s=Math.cos(e*.5),o=Math.cos(t*.5),l=Math.sin(n*.5),u=Math.sin(e*.5),d=Math.sin(t*.5),p=new yl;return p.w=o*i*s+d*l*u,p.x=o*l*s-d*i*u,p.y=o*i*u+d*l*s,p.z=d*i*s-o*l*u,p},v8=n=>n._w===.707&&n._z===.707?td/2:n._w===.707&&n._z===-.707?-td/2:n._w===-.707&&n._z===.707?3*td/4:n._w===-.707&&n._z===-.707?-3*td/4:n._z===1?td:n._z===-1?-td:nM(n).z;function DT(n){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;n=n.replace(e,function(i,s,o,l){return s+s+o+o+l+l});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return console.log(t),t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function Qne(n,e){const t={ignoreAttributes:!1,attributeNamePrefix:"@_"},o=new qV.XMLParser(t).parse(n).robot.joint,l={};return(Array.isArray(o)?o:[o]).forEach(d=>{d["@_name"];const p=d.origin,_=d.parent["@_link"],y=d.child["@_link"],b=p["@_xyz"].split(" ").map(Number),E=p["@_rpy"].split(" ").map(Number),C=_8(E,"sxyz");l[y]={frame:_,position:{x:b[0],y:b[1],z:b[2]},rotation:{w:C[0],x:C[1],y:C[2],z:C[3]},scale:{x:1,y:1,z:1}}}),l.base_link={frame:"world",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},console.log(l),l}function Zne(n){const e={ignoreAttributes:!1,attributeNamePrefix:"@_",parseAttributeValue:!0},i=new qV.XMLParser(e).parse(n),s=i.robot.link,o=i.robot.material,l={},u={};return o&&(Array.isArray(o)?o:[o]).forEach(_=>{const y=_["@_name"],b=_.color["@_rgba"].split(" ").map(Number);u[y]={r:b[0],g:b[1],b:b[2],a:b[3]}}),(Array.isArray(s)?s:[s]).forEach(p=>{var C,A;const _=p["@_name"],y=p.visual;let b=null,E=null;if((C=y==null?void 0:y.geometry)!=null&&C.mesh&&(b=y.geometry.mesh["@_filename"],E=(A=y.geometry.mesh["@_scale"])==null?void 0:A.split(" ").map(Number)),_&&y&&b){if(y.material.color){let P=y.material.color["@_rgba"].split(" ").map(Number);P[0],P[1],P[2],P[3]}else y.material["@_name"]&&u[y.material["@_name"]]&&u[y.material["@_name"]];const I=y.origin["@_xyz"].split(" ").map(Number),L=y.origin["@_rpy"].split(" ").map(Number),O=_8(L,"sxyz");l[_]={shape:b,name:_,frame:_,position:{x:I[0],y:I[1],z:I[2]},rotation:{w:O[0],x:O[1],y:O[2],z:O[3]},color:{r:.7*255,g:.7*255,b:.7*255,a:1},scale:E?{x:E[0],y:E[1],z:E[2]}:{x:1,y:1,z:1},highlight:"false"}}}),l}class ere{constructor(){this._previousTime=0,this._currentTime=0,this._delta=0,this._elapsed=0,this._timescale=1,this._useFixedDelta=!1,this._fixedDelta=16.67,this._usePageVisibilityAPI=typeof document<"u"&&document.hidden!==void 0,this._usePageVisibilityAPI===!0&&(this._pageVisibilityHandler=tre.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}reset_elapsed(){return this._elapsed=0,this}disableFixedDelta(){return this._useFixedDelta=!1,this}dispose(){return this._usePageVisibilityAPI===!0&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}enableFixedDelta(){return this._useFixedDelta=!0,this}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getFixedDelta(){return this._fixedDelta/1e3}getTimescale(){return this._timescale}reset(){return this._currentTime=this._now(),this}setFixedDelta(e){return this._fixedDelta=e*1e3,this}setTimescale(e){return this._timescale=e,this}update(){return this._useFixedDelta===!0?this._delta=this._fixedDelta:(this._previousTime=this._currentTime,this._currentTime=this._now(),this._delta=this._currentTime-this._previousTime),this._delta*=this._timescale,this._elapsed+=this._delta,this}_now(){return(typeof performance>"u"?Date:performance).now()}}function tre(){document.hidden===!1&&this.reset()}const nre={Left:"LEFT_ARM_CONNECTOR_1",Right:"RIGHT_ARM_CONNECTOR_1",Head:"HEAD_1",Neck:"NECK_GLOBE_BASE_1",Base:"base_link"},_i=n=>nre[n],E2={camera_link:{frame:"HEAD_1",position:{x:null,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},imu_sensor_link:{frame:"base_link",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},MIDDLE_LEFT_WHEEL_1:{frame:"base_link",position:{x:-.006691,y:.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},REAR_LEFT_WHEEL_1:{frame:"base_link",position:{x:-.075191,y:.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},REAR_RIGHT_WHEEL_1:{frame:"base_link",position:{x:-.075191,y:-.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},MIDDLE_RIGHT_WHEEL_1:{frame:"base_link",position:{x:-.006691,y:-.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BODY_BASE_CONNECTOR_1:{frame:"base_link",position:{x:-.263414,y:-.061691,z:.210284},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_RIGHT_COVER_1:{frame:"base_link",position:{x:.062309,y:-.045,z:.074646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_LEFT_COVER_1:{frame:"base_link",position:{x:.062309,y:.045,z:.074646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_FRONT_GRILL_1:{frame:"base_link",position:{x:.039109,y:.043,z:.078796},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},Torso_1:{frame:"BODY_BASE_CONNECTOR_1",position:{x:.214514,y:.061691,z:-.095653},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},NECK_GLOBE_BASE_1:{frame:"Torso_1",position:{x:.014661,y:.0228,z:.084122},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_VENT_RIGHT_1:{frame:"HEAD_1",position:{x:.08973-.019009,y:-.057013+.025,z:.04831+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_1:{frame:"NECK_GLOBE_BASE_1",position:{x:.034239,y:-.02,z:.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},EYE_LENS_1:{frame:"HEAD_1",position:{x:.016845-.019009,y:.061941+.025,z:.034753+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},FACE_1:{frame:"EYE_LENS_1",position:{x:.076086,y:.007237,z:-.003703},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},VISOR_GLASS_1:{frame:"HEAD_1",position:{x:.111798-.019009,y:-.024175+.025,z:-.124256+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_VENT_LEFT_1:{frame:"HEAD_1",position:{x:-.042326-.019009,y:.038377+.025,z:-.162881+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},LEFT_ARM_1:{frame:"LEFT_ARM_CONNECTOR_1",position:{x:-.013297,y:.005336,z:-.001514},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},RIGHT_ARM_1:{frame:"RIGHT_ARM_CONNECTOR_1",position:{x:-.014964,y:-.001971,z:-287e-6},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},Battery_1:{frame:"base_link",position:{x:-.321414,y:.065009,z:.175134},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},RIGHT_ARM_CONNECTOR_1:{frame:"Torso_1",position:{x:.044751,y:-.066216,z:.057987},rotation:{w:.924,x:0,y:.383,z:0},scale:{x:1,y:1,z:1}},LEFT_ARM_CONNECTOR_1:{frame:"Torso_1",position:{x:.044751,y:.066216,z:.057987},rotation:{w:.924,x:0,y:.383,z:0},scale:{x:1,y:1,z:1}},FRONT_LEFT_WHEEL_1:{frame:"base_link",position:{x:.060309,y:.060225,z:.036146},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},FRONT_RIGHT_WHEEL_1:{frame:"base_link",position:{x:.060309,y:-.060225,z:.036146},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BALANCE_WHEEL:{frame:"base_link",position:{x:-.075191,y:0,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},base_link:{frame:"world",position:{x:0,y:0,z:0},rotation:{w:.707,x:0,y:0,z:-.707},scale:{x:1,y:1,z:1}}},rre={base_link:{shape:"package://misty_description/meshes/base_link.stl",name:"base_link",frame:"base_link",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},MIDDLE_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/MIDDLE_LEFT_WHEEL_1.stl",name:"MIDDLE_LEFT_WHEEL_1",frame:"MIDDLE_LEFT_WHEEL_1",position:{x:.006691,y:-.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},REAR_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/REAR_LEFT_WHEEL_1.stl",name:"REAR_LEFT_WHEEL_1",frame:"REAR_LEFT_WHEEL_1",position:{x:.075191,y:-.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},REAR_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/REAR_RIGHT_WHEEL_1.stl",name:"REAR_RIGHT_WHEEL_1",frame:"REAR_RIGHT_WHEEL_1",position:{x:.075191,y:.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},MIDDLE_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/MIDDLE_RIGHT_WHEEL_1.stl",name:"MIDDLE_RIGHT_WHEEL_1",frame:"MIDDLE_RIGHT_WHEEL_1",position:{x:.006691,y:.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BODY_BASE_CONNECTOR_1:{shape:"package://misty_description/meshes/BODY_BASE_CONNECTOR_1.stl",name:"BODY_BASE_CONNECTOR_1",frame:"BODY_BASE_CONNECTOR_1",position:{x:.263414,y:.061691,z:-.210284},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_RIGHT_COVER_1:{shape:"package://misty_description/meshes/BASE_RIGHT_COVER_1.stl",name:"BASE_RIGHT_COVER_1",frame:"BASE_RIGHT_COVER_1",position:{x:-.062309,y:.045,z:-.074646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_LEFT_COVER_1:{shape:"package://misty_description/meshes/BASE_LEFT_COVER_1.stl",name:"BASE_LEFT_COVER_1",frame:"BASE_LEFT_COVER_1",position:{x:-.062309,y:-.045,z:-.074646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_FRONT_GRILL_1:{shape:"package://misty_description/meshes/BASE_FRONT_GRILL_1.stl",name:"BASE_FRONT_GRILL_1",frame:"BASE_FRONT_GRILL_1",position:{x:-.039109,y:-.043,z:-.078796},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Torso_1:{shape:"package://misty_description/meshes/Torso_1.stl",name:"Torso_1",frame:"Torso_1",position:{x:.0489,y:0,z:-.114631},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},NECK_GLOBE_BASE_1:{shape:"package://misty_description/meshes/NECK_GLOBE_BASE_1.stl",name:"NECK_GLOBE_BASE_1",frame:"NECK_GLOBE_BASE_1",position:{x:.034239,y:-.0228,z:-.198753},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_VENT_RIGHT_1:{shape:"package://misty_description/meshes/HEAD_VENT_RIGHT_1.stl",name:"HEAD_VENT_RIGHT_1",frame:"HEAD_VENT_RIGHT_1",position:{x:-.070814,y:.032838,z:-.485664},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_1:{shape:"package://misty_description/meshes/HEAD_1.stl",name:"HEAD_1",frame:"HEAD_1",position:{x:0,y:0,z:-.25},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},EYE_LENS_1:{shape:"package://misty_description/meshes/EYE_LENS_1.stl",name:"EYE_LENS_1",frame:"EYE_LENS_1",position:{x:.002071,y:-.086116,z:-.472107},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FACE_1:{shape:"package://misty_description/meshes/FACE_1.stl",name:"FACE_1",frame:"FACE_1",position:{x:-.074015,y:-.093353,z:-.468404},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},VISOR_GLASS_1:{shape:"package://misty_description/meshes/VISOR_GLASS_1.stl",name:"VISOR_GLASS_1",frame:"VISOR_GLASS_1",position:{x:-.092882,y:0,z:-.313098},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_VENT_LEFT_1:{shape:"package://misty_description/meshes/HEAD_VENT_LEFT_1.stl",name:"HEAD_VENT_LEFT_1",frame:"HEAD_VENT_LEFT_1",position:{x:.061242,y:-.062552,z:-.274473},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},LEFT_ARM_1:{shape:"package://misty_description/meshes/LEFT_ARM_1.stl",name:"LEFT_ARM_1",frame:"LEFT_ARM_1",position:{x:.017446,y:-.071552,z:-.171104},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},RIGHT_ARM_1:{shape:"package://misty_description/meshes/RIGHT_ARM_1.stl",name:"RIGHT_ARM_1",frame:"RIGHT_ARM_1",position:{x:.019113,y:.068187,z:-.172331},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Battery_1:{shape:"package://misty_description/meshes/Battery_1.stl",name:"Battery_1",frame:"Battery_1",position:{x:.321414,y:-.065009,z:-.175134},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},RIGHT_ARM_CONNECTOR_1:{shape:"package://misty_description/meshes/RIGHT_ARM_CONNECTOR_1.stl",name:"RIGHT_ARM_CONNECTOR_1",frame:"RIGHT_ARM_CONNECTOR_1",position:{x:.004149,y:.066216,z:-.172618},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},LEFT_ARM_CONNECTOR_1:{shape:"package://misty_description/meshes/LEFT_ARM_CONNECTOR_1.stl",name:"LEFT_ARM_CONNECTOR_1",frame:"LEFT_ARM_CONNECTOR_1",position:{x:.004149,y:-.066216,z:-.172618},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FRONT_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/FRONT_LEFT_WHEEL_1.stl",name:"FRONT_LEFT_WHEEL_1",frame:"FRONT_LEFT_WHEEL_1",position:{x:-.060309,y:-.060225,z:-.035146},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FRONT_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/FRONT_RIGHT_WHEEL_1.stl",name:"FRONT_RIGHT_WHEEL_1",frame:"FRONT_RIGHT_WHEEL_1",position:{x:-.060309,y:.060225,z:-.035146},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Reset_Button:{shape:"cube",frame:"gizmo",name:"Reset_Button",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},color:{r:255,g:0,b:0,a:1},scale:{x:1,y:1,z:1}}},ire=`You are an assistive agent that translates descriptions of robot behavior into JSON that describes goals for programming. These goals are individual steps for a user to achieve in order to program the robot to perform the corresponding behavior. A user will use these goals to help them figure out how to build a robot program using a custom interface for programming robots. 
For example, a user might say: "The robot should say "Watch me", play a sound, and then do a dance." 
One possible result is the following set of JSON goals: 
"{
  "task1": {
    "id": "task1",
    "name": "Robot Dance",
    "order": 1,
    "type": "task",
    "subtasks": ["subtask1a", "subtask1b", "subtask1c", "subtask1d", "subtask1e", "subtask1f"]
  },
  "subtask1a": {
    "id": "subtask1a",
    "type": "subtask",
    "title": "Make the robot speak",
    "subtext": "Have the robot say: 'Watch me!'",
    "hints": ["hint1a", "hint1b", "hint1c"]
  },
  "hint1a": {
    "id": "hint1a",
    "type": "hint",
    "text": "Open the 'Speech' category and add a 'Speak' block to your program. You can add it after the 'Start' block."
  },
  "hint1b": {
    "id": "hint1b",
    "type": "hint",
    "text": "Open the 'Speech' category and add a text block to the "Speak" block you added to the program."
  },
  "hint1c": {
    "id": "hint1c",
    "type": "hint",
    "text": "In the text block you added, type 'Watch me!'"
  },
  "subtask1b": {
    "id": "subtask1b",
    "type": "subtask",
    "title": "Play a sound",
    "subtext": "Have the robot start playing some music.",
    "hints": []
  },
  "subtask1c": {
    "id": "subtask1c",
    "type": "subtask",
    "title": "Make the robot move around",
    "subtext": "Drive the robot left, then right. You can vary the speed to make the dance more performative.",
    "hints": ["hint2a", "hint2b", "hint2c", "hint2d"]
  },
  "hint2a": {
    "id": "hint2a",
    "type": "hint",
    "text": "Open the 'Movement' category and add a 'Drive' block to your program. You can add it after the 'Speak' block."
  },
  "hint2b": {
    "id": "hint2b",
    "type": "hint",
    "text": "Make the robot turn left. Add an angular velocity of -100 for 2 seconds."
  },
  "hint2c": {
    "id": "hint2c",
    "type": "hint",
    "text": "Open the 'Movement' category and add another 'Drive' block to your program. You can add it after the other 'Drive' block."
  },
  "hint2d": {
    "id": "hint2d",
    "type": "hint",
    "text": "Make the robot turn right. Add an angular velocity of 100 for 4 seconds."
  },
  "subtask1d": {
    "id": "subtask1d",
    "type": "subtask",
    "title": "Move the robot's arms",
    "subtext": "Move both of the robot's arms upward quickly to show it's excited to dance!",
    "hints": []
  },
  "subtask1e": {
    "id": "subtask1e",
    "type": "subtask",
    "title": "Move the robot's head",
    "subtext": "Move the robot's head left as the music plays.",
    "hints": []
  },
  "subtask1f": {
    "id": "subtask1f",
    "type": "subtask",
    "title": "Move the robot's head",
    "subtext": "Move the robot's head right to complete the dance.",
    "hints": []
  }
}"
Every returned JSON file has the following properties:
1) Every object in the JSON has the following fields: "id" and "type". "id" is unique for each object, and "type" can only be: "hint", "subtask", or "task".
2) "task" refers to the high level goal and there should only ever be 1 of these in the JSON. "task" objects have the following fields in addition to those in 1). These are: "name", "order", and "subtasks". "name" is a 1-3 word description of the overall task goal. "order" will always be 1. "subtasks" is a list of ids of subtasks relevant to the completion of the task.
3) "subtask" refers to a single step in that task. In addition to the fields specified in 1), "subtask" also has the following fields: "title", "subtext", and "hints". "title" refers to a brief description (1-7 words) of the what needs to be done for the current step. "subtext" refers to a more elaborate description of the goal for the subtask. It should be a description of what the user needs to complete, without giving direct instructions (these direct instructions are reserved for "hint" type objects). Finally, "subtask" objects have a "hints" field that is a list of ids of "hint" objects.
4) In addition to the fields specified in 1), "hint" objects have a "text" field that offers advice for the subtask, such as describing where to find program blocks in the interface, where to connect blocks to, etc.
5) Most "subtasks" should have between 1 and 5 hints. If you can explain a subtask further, create a hint for it!

The user who is building the program has access to a custom block-based programming interface. This interface has the following categories of program blocks: "Logic", "Loops", "Math", "Movement", "Light", "Speech", "Face", "Audio", and "Misc". 
In the "Logic" category, users have access to if statements, boolean values, and negation blocks. 
In the "Loops" category, users have acces to a while loop block that allows them to specify the number of iterations to perform.
In the "Math" category, users have access to a number block that allows them to input any number they want, as well as a random number block that allows them to specify a min and max number for the random generation.
In the "Movement" category, users have access to blocks for moving different parts of the robot. This include blocks to control the movement of the robot's head, arms, as well as allow the robot to drive and turn.
In the "Light" category, users have acces to blocks for controlling the various lights on the robot. This inculdes blocks for turning the flashlight on or off, as well as changing the color of the LED on the robot's chest. This category also has blocks for selecting colors for the LED (random color selection, or RGB color picker).
In the "Speech" category, users have access to blocks for controlling what the robot says. This includes a "Speak" block that accepts a "Text" block. The "Text" block allows users to type anything they want the robot to say. There is also another "Speak" block that has a dropdown list of common things to say. This dropdown list includes: "Hi", "Hello", "How are you today?", and "Goodbye".
In the "Face" category, users have access to blocks for changing the robot's facial expression. This includes a "Change Face" block that accepts a specific face to apply to the robot. The rest of the blocks in the category are specific faces the user can apply. This list is:
  "Sleeping",
  "SleepingZZZ",
  "Contempt",
  "ContentLeft",
  "ContentRight",
  "Disoriented",
  "EcstacyHilarious",
  "EcstacyStarryEyed",
  "JoyGoofy",
  "JoyGoofy2",
  "JoyGoofy3",
  "Love",
  "Rage",
  "Rage2",
  "Rage3",
  "Rage4",
  "RemorseShame",
  "acceptance",
  "admiration",
  "amazement",
  "anger",
  "annoyed",
  "anticipation",
  "apprehension",
  "apprehension_1",
  "boredom",
  "default",
  "disgust",
  "distraction",
  "ecstasy_frame_1",
  "ecstasy_frame_2",
  "fear",
  "grief",
  "interest",
  "joy",
  "loathing",
  "pensiveness",
  "rage",
  "sad",
  "serenity",
  "surprise",
  "terror",
  "trust",
  "vigilance"
In the "Audio" category, users have access to blocks for playing audio files through the robot's speakers. This includes a "Play Audio" block that accepts a specific file to play on the robot. The rest of the blocks in the category are specific audio files the user can play. This list is:
  "Acceptance",
  "Amazement",
  "Amazement2",
  "Anger",
  "Anger2",
  "Anger3",
  "Anger4",
  "Annoyance",
  "Annoyance2",
  "Annoyance3",
  "Annoyance4",
  "Awe",
  "Awe2",
  "Awe3",
  "Boredom",
  "Disapproval",
  "Disgust",
  "Disgust2",
  "Disgust3",
  "DisorientedConfused",
  "DisorientedConfused2",
  "DisorientedConfused3",
  "DisorientedConfused4",
  "DisorientedConfused5",
  "DisorientedConfused6",
  "Distraction",
  "Ecstacy",
  "Ecstacy2",
  "Fear",
  "Grief",
  "Grief2",
  "Grief3",
  "Grief4",
  "Joy",
  "Joy2",
  "Joy3",
  "Joy4",
  "Loathing",
  "Love",
  "PhraseByeBye",
  "PhraseEvilAhHa",
  "PhraseHello",
  "PhraseNoNoNo",
  "PhraseOopsy",
  "PhraseOwOwOw",
  "PhraseOwwww",
  "PhraseUhOh",
  "Rage",
  "Sadness",
  "Sadness2",
  "Sadness3",
  "Sadness4",
  "Sadness5",
  "Sadness6",
  "Sadness7",
  "Sleepy",
  "Sleepy2",
  "Sleepy3" 
  "Sleepy4",
  "SleepySnore",
  "SystemCameraShutter"
Finally, in the "Misc" category, users have a few blocks to select from. The user can use the "Display Text" block to display text on the robot's face. This allows the user to type whatever text they want to appear. There is also a "Clear Text" block to clear all text from the robot's face. And finally there is a "Wait" block that allows the users to specify an amount of time for the robot to do nothing.

Any tasks, subtasks, and hints you create can only use these blocks and categories! ONLY respond with the JSON and be sure that the output JSON is valid according to the rules here as well as the normal JSON formatting rules. Do not explain anything.`,sre={id:"task1",name:"Find and Grab Object",order:1,type:"task",subtasks:["subtask1a","subtask1b","subtask1c","subtask1d","subtask1e","subtask1f","subtask1g","subtask1h"]},ore={id:"subtask1a",type:"subtask",title:"Move the robot",subtext:"Move the robot around, looking confused and searching for the object.",hints:["hint1a","hint1b","hint1c","hint1d"]},are={id:"hint1a",type:"hint",text:"To make the robot move around, add a 'Drive' block from the 'Movement' category to your program. You can add it after the 'Start' block."},lre={id:"hint1b",type:"hint",text:"Add an angular velocity of -100 for 2 seconds to make the robot turn left."},ure={id:"hint1c",type:"hint",text:"Add an angular velocity of 100 for 2 seconds to make the robot turn right."},cre={id:"hint1d",type:"hint",text:"Add a 'Wait' block from the 'Misc' category to your program to create pauses in the robot's movement."},hre={id:"subtask1b",type:"subtask",title:"Make the robot look confused",subtext:"Change the robot's facial expression to look confused while it searches for the object.",hints:["hint2a","hint2b"]},dre={id:"hint2a",type:"hint",text:"Add a 'Change Face' block from the 'Face' category to your program."},pre={id:"hint2b",type:"hint",text:"Select 'Disoriented' from the list of faces to make the robot look confused."},fre={id:"subtask1c",type:"subtask",title:"Find the object",subtext:"Make the robot find the object it is searching for.",hints:[]},mre={id:"subtask1d",type:"subtask",title:"Make the robot look surprised",subtext:"Change the robot's facial expression to look surprised when it finds the object.",hints:["hint3a","hint3b"]},gre={id:"hint3a",type:"hint",text:"Add a 'Change Face' block from the 'Face' category to your program."},_re={id:"hint3b",type:"hint",text:"Select 'Surprise' from the list of faces to make the robot look surprised."},vre={id:"subtask1e",type:"subtask",title:"Make the robot look happy",subtext:"Change the robot's facial expression to look happy and point to the object it found.",hints:["hint4a","hint4b","hint4c"]},yre={id:"hint4a",type:"hint",text:"Add a 'Change Face' block from the 'Face' category to your program."},bre={id:"hint4b",type:"hint",text:"Select 'Joy4' from the list of faces to make the robot look happy."},Tre={id:"hint4c",type:"hint",text:"Add a 'Drive' block from the 'Movement' category to your program and set the angular velocity to 50. Follow it up with a 'Wait' block from the 'Misc' category to create a pause, then add another 'Drive' block with an angular velocity of -50."},Sre={id:"subtask1f",type:"subtask",title:"Make the robot speak",subtext:"Make the robot say 'Aha, there you are!'",hints:["hint5a","hint5b"]},Ere={id:"hint5a",type:"hint",text:"Add a 'Speak' block from the 'Speech' category to your program."},xre={id:"hint5b",type:"hint",text:"Add a 'Text' block inside the 'Speak' block and type: 'Aha, there you are!'"},wre={id:"subtask1g",type:"subtask",title:"Move the robot to the object",subtext:"Drive the robot to the object it found.",hints:["hint6a","hint6b"]},$re={id:"hint6a",type:"hint",text:"Add a 'Drive' block from the 'Movement' category to your program."},Cre={id:"hint6b",type:"hint",text:"Choose a velocity that will get you to the object quickly but safely. Start with a linear velocity of 50 and adjust as necessary."},Are={id:"subtask1h",type:"subtask",title:"Grab the object",subtext:"Make the robot grab the object it found.",hints:["hint7a","hint7b"]},Mre={id:"hint7a",type:"hint",text:"Add a 'Grab' block from the 'Misc' category to your program."},Ire={id:"hint7b",type:"hint",text:"The 'Grab' block is a toggle. Clicking the block once will make the robot open its grip. Click it again to make the robot close its grip."},Rre={task1:sre,subtask1a:ore,hint1a:are,hint1b:lre,hint1c:ure,hint1d:cre,subtask1b:hre,hint2a:dre,hint2b:pre,subtask1c:fre,subtask1d:mre,hint3a:gre,hint3b:_re,subtask1e:vre,hint4a:yre,hint4b:bre,hint4c:Tre,subtask1f:Sre,hint5a:Ere,hint5b:xre,subtask1g:wre,hint6a:$re,hint6b:Cre,subtask1h:Are,hint7a:Mre,hint7b:Ire},kre=`You are an assistive agent that translates descriptions of robot behavior into JSON that corresponds to programming blocks that emulate said behavior. For example, a user might say: "The robot should say "Watch me", play a sound, and then do a dance." One possible result is the following,
"{data: [
  {id: "block1", type: "Speak", FIELD_Speak_Text: "block2", nextStatement: "block3"}, 
  {id: "block2", type: "text", value: "Watch me"}, 
  {id: "block3", type: "PlayAudio", FIELD_PlayAudio_Filename: "block4", nextStatement: "block6"}, 
  {id: "block4", type: "audio", value: "s_Joy"},
  {id: "block6", type: "DriveTime2", FIELD_DriveTime_Velocity: "block7", FIELD_DriveTime_Angular: "block8", FIELD_DriveTime_TimeMs: "block9", nextStatement: "block10"},
  {id: "block7", type: "math_number", value: "0"},
  {id: "block8", type: "math_number", value: "-100"},
  {id: "block9", type: "math_number", value: "2"},
  {id: "block10", type: "DriveTime2", FIELD_DriveTime_Velocity: "block11", FIELD_DriveTime_Angular: "block12", FIELD_DriveTime_TimeMs: "block13", nextStatement: "block14"},
  {id: "block11", type: "math_number", value: "0"},
  {id: "block12", type: "math_number", value: "100"},
  {id: "block13", type: "math_number", value: "4"},
  {id: "block14", type: "MoveArms2", FIELD_MoveArm_LeftPosition: "block15", FIELD_MoveArm_LeftVelocity: "block16", FIELD_MoveArm_RightPosition: "block17", FIELD_MoveArm_RightVelocity: "block18", nextStatement: "block19"},
  {id: "block15", type: "math_number", value: "-90"},
  {id: "block16", type: "math_number", value: "100"},
  {id: "block17", type: "math_number", value: "-90"},
  {id: "block18", type: "math_number", value: "100"},
  {id: "block19", type: "MoveHead3", FIELD_MoveHead_Pitch: "block20", FIELD_MoveHead_Roll: "block21", FIELD_MoveHead_Yaw: "block22", FIELD_MoveHead_Time: "block23"},
  {id: "block20", type: "math_number", value: "-10"},
  {id: "block21", type: "math_number", value: "10"},
  {id: "block22", type: "math_number", value: "-30"},
  {id: "block23", type: "math_number", value: "1"}
]}". 

Every json block has the following fields: [id, type]. id is a unique identifier. Each block must have a unique id. type defines what kind of block it is. There are a total of 14 blocks that you can use to create programs. These are: [MoveArms2, MoveHead3, DriveTime2, math_number, Speak, text, ChangeLED, Colour, DisplayImage, face, DisplayText, ClearText, PlayAudio, audio].
In addition to the "id" and "type" fields, math_number blocks have a field called "value" for a numeric value.
In addition to the "id" and "type" fields, text blocks have a field called "value" for a string value representing what is spoken or said by the robot.
In addition to the "id" and "type" fields, face blocks have a field called "value" for which face to use. The list of available faces is [
  "e_Sleeping",
  "e_SleepingZZZ",
  "e_Contempt",
  "e_ContentLeft",
  "e_ContentRight",
  "e_Disoriented",
  "e_EcstacyHilarious",
  "e_EcstacyStarryEyed",
  "e_JoyGoofy",
  "e_JoyGoofy2",
  "e_JoyGoofy3",
  "e_Love",
  "e_Rage",
  "e_Rage2",
  "e_Rage3",
  "e_Rage4",
  "e_RemorseShame",
  "eyes_acceptance",
  "eyes_admiration",
  "eyes_amazement",
  "eyes_anger",
  "eyes_annoyed",
  "eyes_anticipation",
  "eyes_apprehension",
  "eyes_apprehension_1",
  "eyes_boredom",
  "eyes_default",
  "eyes_disgust",
  "eyes_distraction",
  "eyes_ecstasy_frame_1",
  "eyes_ecstasy_frame_2",
  "eyes_fear",
  "eyes_grief",
  "eyes_interest",
  "eyes_joy",
  "eyes_loathing",
  "eyes_pensiveness",
  "eyes_rage",
  "eyes_sad",
  "eyes_serenity",
  "eyes_surprise",
  "eyes_terror",
  "eyes_trust",
  "eyes_vigilance"
]. Do not create your own! You can only use faces from this list!
In addition to the "id" and "type" fields, audio blocks have a field called "value" for which audio to play. The list of available audio is [
  "s_Acceptance",
  "s_Amazement",
  "s_Amazement2",
  "s_Anger",
  "s_Anger2",
  "s_Anger3",
  "s_Anger4",
  "s_Annoyance",
  "s_Annoyance2",
  "s_Annoyance3",
  "s_Annoyance4",
  "s_Awe",
  "s_Awe2",
  "s_Awe3",
  "s_Boredom",
  "s_Disapproval",
  "s_Disgust",
  "s_Disgust2",
  "s_Disgust3",
  "s_DisorientedConfused",
  "s_DisorientedConfused2",
  "s_DisorientedConfused3",
  "s_DisorientedConfused4",
  "s_DisorientedConfused5",
  "s_DisorientedConfused6",
  "s_Distraction",
  "s_Ecstacy",
  "s_Ecstacy2",
  "s_Fear",
  "s_Grief",
  "s_Grief2",
  "s_Grief3",
  "s_Grief4",
  "s_Joy",
  "s_Joy2",
  "s_Joy3",
  "s_Joy4",
  "s_Loathing",
  "s_Love",
  "s_PhraseByeBye",
  "s_PhraseEvilAhHa",
  "s_PhraseHello",
  "s_PhraseNoNoNo",
  "s_PhraseOopsy",
  "s_PhraseOwOwOw",
  "s_PhraseOwwww",
  "s_PhraseUhOh",
  "s_Rage",
  "s_Sadness",
  "s_Sadness2",
  "s_Sadness3",
  "s_Sadness4",
  "s_Sadness5",
  "s_Sadness6",
  "s_Sadness7",
  "s_Sleepy",
  "s_Sleepy2",
  "s_Sleepy3" 
  "s_Sleepy4",
  "s_SleepySnore",
  "s_SystemCameraShutter"
]. Do not create your own! You can only use audio from this list!
In addition to the "id" and "type" fields, Colour blocks have a field named "value" for a hexadecimal color value.
ChangeLED blocks change the color of the LED on the robot's chest. In addition to the "id" and "type" fields, ChangeLED blocks have a field named "FIELD_ChangeLED" that accepts the id of a Colour block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
Speak blocks allow the robot to say something. In addition to the "id" and "type" fields, Speak blocks have a field named "FIELD_Speak_Text" that accepts the id of a text block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
DisplayImage blocks change the face of the robot to a specified face. In addition to the "id" and "type" fields, DisplayImage blocks have a field called "FIELD_DisplayImage_Filename" that accepts the id of an face block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
PlayAudio blocks allow the robot to play predefined audio files. In addition to the "id" and "type" fields, PlayAudio blocks have a field called "FIELD_PlayAudio_Filename" that accepts the id of an audio block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
DisplayText blocks display text on the robot's screen. In addition to the "id" and "type" fields, DisplayText blocks have a field called "FIELD_DisplayText_Text" that accepts the id of an text block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
ClearText blocks clear any text that is displayed on the robot's screen. ClearText blocks only contain the "id" and "type" fields. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
MoveArms2 blocks allow the robot to move either or both its left and right arms. In addition to the "id" and "type" fields, MoveArms2 blocks have 4 other fields. These are: "FIELD_MoveArm_LeftPosition" for the id of the math_number block that determines the left arm's position (measured in degrees between -90 and 90, where -90 is straight up, and 90 is straight down), "FIELD_MoveArm_RightPosition" for the id of the math_number block for the right arm's position (measured in degrees between -90 and 90, where -90 is straight up, and 90 is straight down), "FIELD_MoveArm_LeftVelocity" for the id of the math_number block that determines the left arm's movement speed (measured between 1 and 100 where 1 is the slowest speed and 100 is the fastest), and "FIELD_MoveArm_RightVelocity" for the id of the math_number block that determines the right arm's movement speed (measured between 1 and 100 where 1 is the slowest speed and 100 is the fastest). It also can have an optional "nextStatement" field that points to the next block in the list to evaluate.
MoveHead3 blocks allow the robot to move its head. In addition to the "id" and "type" fields, MoveHead3 blocks have 4 other fields. These are: "FIELD_MoveHead_Pitch" for the id of the math_number block that determines the pitch value of the robot's head (measured in degrees between -40 and 25, where 25 is maximally looking down and -40 is maximally looking up), "FIELD_MoveHead_Roll" for the id of the math_number block that determines the roll value of the robot's head (measured in degrees between -42 and 42, where -42 tilts the robot's head furthest left and 42 tilts the robot's head furthest right), "FIELD_MoveHead_Yaw" for the id of the math_number block that determines the yaw value of the robot's head (measured in degrees between -90 and 90 where -90 is looking all the way to the left and 90 is looking all the way to the right), and "FIELD_MoveHead_Time" for the id of the math_number block that determines the time it takes to execute the motion (measured in seconds between 1 and 60). It also can have an optional "nextStatement" field that points to the next block in the list to evaluate.
DriveTime2 allow the robot to drive/move about its environment. In addition to the "id" and "type" fields, DriveTime2 blocks have 3 other fields. These are: "FIELD_DriveTime_Velocity" for the id of the math_number block that determines the velocity of the robot's linear motion (measured from -100 to 100, where -100 is maximal velocity backwards and 100 is maximal velocity forwards), "FIELD_DriveTime_Angular" for the id of the math_number block that determines the velocity of the robot's angular motion (measured from -100 to 100, where -100 is maximal velocity turning left and 100 is maximal velocity turning right), and "FIELD_DriveTime_TimeMs" for the id of the math_number block that determines the time it takes to execute the driving (measured in seconds between 1 and 60). It also can have an optional "nextStatement" field that points to the next block in the list to evaluate.

For the MoveArms2, MoveHead3, and DriveTime2 blocks, all json fields (except for "id" and "type") should contain ids to other blocks! This is very important. Do not put numeric values in these fields. Instead, create the appropriate block for that field and use its id instead.
Colour blocks can only exist if a ChangeLED block exists and uses it. face blocks can only exist if a DisplayImage block exists and uses it. audio blocks can only exist if a PlayAudio block exists and uses it. text blocks can only exist if a Speak or DisplayText block exists and uses it. math_number blocks can only exist if another block uses it (for example, such as DriveTime2, MoveArms2, or MoveHead3). Only create blocks based on the fields described above. Do not add extra fields to blocks unless its been specified to do so.
ONLY respond with the JSON and be sure that the output JSON is valid according to the rules here as well as the normal JSON formatting rules. Do not explain anything.`;var qM={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */qM.exports;(function(n,e){(function(){var t,i="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",p=500,_="__lodash_placeholder__",y=1,b=2,E=4,C=1,A=2,I=1,L=2,O=4,P=8,N=16,z=32,W=64,H=128,U=256,Q=512,ne=30,oe="...",le=800,ge=16,ce=1,pe=2,Te=3,Oe=1/0,J=9007199254740991,se=17976931348623157e292,ie=NaN,he=4294967295,Se=he-1,Fe=he>>>1,ke=[["ary",H],["bind",I],["bindKey",L],["curry",P],["curryRight",N],["flip",Q],["partial",z],["partialRight",W],["rearg",U]],qe="[object Arguments]",De="[object Array]",rt="[object AsyncFunction]",tt="[object Boolean]",ft="[object Date]",ct="[object DOMException]",Pe="[object Error]",Ce="[object Function]",je="[object GeneratorFunction]",it="[object Map]",ot="[object Number]",vt="[object Null]",It="[object Object]",yt="[object Promise]",kt="[object Proxy]",$t="[object RegExp]",mt="[object Set]",xe="[object String]",re="[object Symbol]",Be="[object Undefined]",dt="[object WeakMap]",bt="[object WeakSet]",Mt="[object ArrayBuffer]",pt="[object DataView]",Ke="[object Float32Array]",Ie="[object Float64Array]",q="[object Int8Array]",ee="[object Int16Array]",de="[object Int32Array]",Ae="[object Uint8Array]",Je="[object Uint8ClampedArray]",jt="[object Uint16Array]",ze="[object Uint32Array]",Yt=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,Kt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xt=/&(?:amp|lt|gt|quot|#39);/g,Dn=/[&<>"']/g,ii=RegExp(Xt.source),Lr=RegExp(Dn.source),Si=/<%-([\s\S]+?)%>/g,Er=/<%([\s\S]+?)%>/g,ir=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,be=/^\w*$/,He=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,at=/[\\^$.*+?()[\]{}|]/g,Ft=RegExp(at.source),rn=/^\s+/,Rn=/\s/,Le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ct=/,? & /,Tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zt=/[()=,{}\[\]\/\s]/,On=/\\(\\)?/g,tr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yr=/\w*$/,Rr=/^[-+]0x[0-9a-f]+$/i,Li=/^0b[01]+$/i,Dr=/^\[object .+?Constructor\]$/,jr=/^0o[0-7]+$/i,bs=/^(?:0|[1-9]\d*)$/,Ia=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wo=/($^)/,jl=/['\n\r\u2028\u2029\\]/g,Zt="\\ud800-\\udfff",Cr="\\u0300-\\u036f",qa="\\ufe20-\\ufe2f",Ra="\\u20d0-\\u20ff",Ns=Cr+qa+Ra,Bs="\\u2700-\\u27bf",Di="a-z\\xdf-\\xf6\\xf8-\\xff",Ar="\\xac\\xb1\\xd7\\xf7",$n="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$r="\\u2000-\\u206f",zr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mr="A-Z\\xc0-\\xd6\\xd8-\\xde",Ni="\\ufe0e\\ufe0f",Ts=Ar+$n+$r+zr,ci="[']",fs="["+Zt+"]",Qa="["+Ts+"]",ka="["+Ns+"]",uc="\\d+",cc="["+Bs+"]",Vs="["+Di+"]",Yo="[^"+Zt+Ts+uc+Bs+Di+mr+"]",Xl="\\ud83c[\\udffb-\\udfff]",mu="(?:"+ka+"|"+Xl+")",hh="[^"+Zt+"]",Ko="(?:\\ud83c[\\udde6-\\uddff]){2}",pr="[\\ud800-\\udbff][\\udc00-\\udfff]",Ei="["+mr+"]",kc="\\u200d",dh="(?:"+Vs+"|"+Yo+")",Oc="(?:"+Ei+"|"+Yo+")",Sl="(?:"+ci+"(?:d|ll|m|re|s|t|ve))?",gu="(?:"+ci+"(?:D|LL|M|RE|S|T|VE))?",El=mu+"?",xl="["+Ni+"]?",gr="(?:"+kc+"(?:"+[hh,Ko,pr].join("|")+")"+xl+El+")*",_r="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Za=xl+El+gr,el="(?:"+[cc,Ko,pr].join("|")+")"+Za,_u="(?:"+[hh+ka+"?",ka,Ko,pr,fs].join("|")+")",Ki=RegExp(ci,"g"),ms=RegExp(ka,"g"),tl=RegExp(Xl+"(?="+Xl+")|"+_u+Za,"g"),Td=RegExp([Ei+"?"+Vs+"+"+Sl+"(?="+[Qa,Ei,"$"].join("|")+")",Oc+"+"+gu+"(?="+[Qa,Ei+dh,"$"].join("|")+")",Ei+"?"+dh+"+"+Sl,Ei+"+"+gu,Yl,_r,uc,el].join("|"),"g"),ro=RegExp("["+kc+Zt+Ns+Ni+"]"),Pu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,aa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],vu=-1,nr={};nr[Ke]=nr[Ie]=nr[q]=nr[ee]=nr[de]=nr[Ae]=nr[Je]=nr[jt]=nr[ze]=!0,nr[qe]=nr[De]=nr[Mt]=nr[tt]=nr[pt]=nr[ft]=nr[Pe]=nr[Ce]=nr[it]=nr[ot]=nr[It]=nr[$t]=nr[mt]=nr[xe]=nr[dt]=!1;var Un={};Un[qe]=Un[De]=Un[Mt]=Un[pt]=Un[tt]=Un[ft]=Un[Ke]=Un[Ie]=Un[q]=Un[ee]=Un[de]=Un[it]=Un[ot]=Un[It]=Un[$t]=Un[mt]=Un[xe]=Un[re]=Un[Ae]=Un[Je]=Un[jt]=Un[ze]=!0,Un[Pe]=Un[Ce]=Un[dt]=!1;var Ss={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},io={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Fu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},yu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ph=parseFloat,Oa=parseInt,la=typeof Wl=="object"&&Wl&&Wl.Object===Object&&Wl,Uu=typeof self=="object"&&self&&self.Object===Object&&self,br=la||Uu||Function("return this")(),Ms=e&&!e.nodeType&&e,vi=Ms&&!0&&n&&!n.nodeType&&n,xi=vi&&vi.exports===Ms,ua=xi&&la.process,Zr=function(){try{var ve=vi&&vi.require&&vi.require("util").types;return ve||ua&&ua.binding&&ua.binding("util")}catch{}}(),bu=Zr&&Zr.isArrayBuffer,$o=Zr&&Zr.isDate,Tu=Zr&&Zr.isMap,nl=Zr&&Zr.isRegExp,Bi=Zr&&Zr.isSet,wi=Zr&&Zr.isTypedArray;function zn(ve,We,Ne){switch(Ne.length){case 0:return ve.call(We);case 1:return ve.call(We,Ne[0]);case 2:return ve.call(We,Ne[0],Ne[1]);case 3:return ve.call(We,Ne[0],Ne[1],Ne[2])}return ve.apply(We,Ne)}function $i(ve,We,Ne,Ot){for(var en=-1,Cn=ve==null?0:ve.length;++en<Cn;){var jn=ve[en];We(Ot,jn,Ne(jn),ve)}return Ot}function Xr(ve,We){for(var Ne=-1,Ot=ve==null?0:ve.length;++Ne<Ot&&We(ve[Ne],Ne,ve)!==!1;);return ve}function od(ve,We){for(var Ne=ve==null?0:ve.length;Ne--&&We(ve[Ne],Ne,ve)!==!1;);return ve}function Su(ve,We){for(var Ne=-1,Ot=ve==null?0:ve.length;++Ne<Ot;)if(!We(ve[Ne],Ne,ve))return!1;return!0}function Gi(ve,We){for(var Ne=-1,Ot=ve==null?0:ve.length,en=0,Cn=[];++Ne<Ot;){var jn=ve[Ne];We(jn,Ne,ve)&&(Cn[en++]=jn)}return Cn}function La(ve,We){var Ne=ve==null?0:ve.length;return!!Ne&&Is(ve,We,0)>-1}function fh(ve,We,Ne){for(var Ot=-1,en=ve==null?0:ve.length;++Ot<en;)if(Ne(We,ve[Ot]))return!0;return!1}function cr(ve,We){for(var Ne=-1,Ot=ve==null?0:ve.length,en=Array(Ot);++Ne<Ot;)en[Ne]=We(ve[Ne],Ne,ve);return en}function Jo(ve,We){for(var Ne=-1,Ot=We.length,en=ve.length;++Ne<Ot;)ve[en+Ne]=We[Ne];return ve}function ad(ve,We,Ne,Ot){var en=-1,Cn=ve==null?0:ve.length;for(Ot&&Cn&&(Ne=ve[++en]);++en<Cn;)Ne=We(Ne,ve[en],en,ve);return Ne}function tp(ve,We,Ne,Ot){var en=ve==null?0:ve.length;for(Ot&&en&&(Ne=ve[--en]);en--;)Ne=We(Ne,ve[en],en,ve);return Ne}function Lc(ve,We){for(var Ne=-1,Ot=ve==null?0:ve.length;++Ne<Ot;)if(We(ve[Ne],Ne,ve))return!0;return!1}var np=ai("length");function Ip(ve){return ve.split("")}function ff(ve){return ve.match(Tt)||[]}function Sd(ve,We,Ne){var Ot;return Ne(ve,function(en,Cn,jn){if(We(en,Cn,jn))return Ot=Cn,!1}),Ot}function Kl(ve,We,Ne,Ot){for(var en=ve.length,Cn=Ne+(Ot?1:-1);Ot?Cn--:++Cn<en;)if(We(ve[Cn],Cn,ve))return Cn;return-1}function Is(ve,We,Ne){return We===We?Nc(ve,We,Ne):Kl(ve,mh,Ne)}function zu(ve,We,Ne,Ot){for(var en=Ne-1,Cn=ve.length;++en<Cn;)if(Ot(ve[en],We))return en;return-1}function mh(ve){return ve!==ve}function Da(ve,We){var Ne=ve==null?0:ve.length;return Ne?Fo(ve,We)/Ne:ie}function ai(ve){return function(We){return We==null?t:We[ve]}}function Sr(ve){return function(We){return ve==null?t:ve[We]}}function so(ve,We,Ne,Ot,en){return en(ve,function(Cn,jn,mn){Ne=Ot?(Ot=!1,Cn):We(Ne,Cn,jn,mn)}),Ne}function Na(ve,We){var Ne=ve.length;for(ve.sort(We);Ne--;)ve[Ne]=ve[Ne].value;return ve}function Fo(ve,We){for(var Ne,Ot=-1,en=ve.length;++Ot<en;){var Cn=We(ve[Ot]);Cn!==t&&(Ne=Ne===t?Cn:Ne+Cn)}return Ne}function Jl(ve,We){for(var Ne=-1,Ot=Array(ve);++Ne<ve;)Ot[Ne]=We(Ne);return Ot}function ql(ve,We){return cr(We,function(Ne){return[Ne,ve[Ne]]})}function Oh(ve){return ve&&ve.slice(0,wl(ve)+1).replace(rn,"")}function Hr(ve){return function(We){return ve(We)}}function Ci(ve,We){return cr(We,function(Ne){return ve[Ne]})}function vr(ve,We){return ve.has(We)}function Wi(ve,We){for(var Ne=-1,Ot=ve.length;++Ne<Ot&&Is(We,ve[Ne],0)>-1;);return Ne}function ca(ve,We){for(var Ne=ve.length;Ne--&&Is(We,ve[Ne],0)>-1;);return Ne}function Eu(ve,We){for(var Ne=ve.length,Ot=0;Ne--;)ve[Ne]===We&&++Ot;return Ot}var rp=Sr(Ss),ip=Sr(io);function ld(ve){return"\\"+yu[ve]}function Hu(ve,We){return ve==null?t:ve[We]}function rl(ve){return ro.test(ve)}function Dc(ve){return Pu.test(ve)}function Lh(ve){for(var We,Ne=[];!(We=ve.next()).done;)Ne.push(We.value);return Ne}function Gu(ve){var We=-1,Ne=Array(ve.size);return ve.forEach(function(Ot,en){Ne[++We]=[en,Ot]}),Ne}function Ql(ve,We){return function(Ne){return ve(We(Ne))}}function Ps(ve,We){for(var Ne=-1,Ot=ve.length,en=0,Cn=[];++Ne<Ot;){var jn=ve[Ne];(jn===We||jn===_)&&(ve[Ne]=_,Cn[en++]=Ne)}return Cn}function Zl(ve){var We=-1,Ne=Array(ve.size);return ve.forEach(function(Ot){Ne[++We]=Ot}),Ne}function Dh(ve){var We=-1,Ne=Array(ve.size);return ve.forEach(function(Ot){Ne[++We]=[Ot,Ot]}),Ne}function Nc(ve,We,Ne){for(var Ot=Ne-1,en=ve.length;++Ot<en;)if(ve[Ot]===We)return Ot;return-1}function Bc(ve,We,Ne){for(var Ot=Ne+1;Ot--;)if(ve[Ot]===We)return Ot;return Ot}function ns(ve){return rl(ve)?eu(ve):np(ve)}function Nr(ve){return rl(ve)?xu(ve):Ip(ve)}function wl(ve){for(var We=ve.length;We--&&Rn.test(ve.charAt(We)););return We}var Ba=Sr(Fu);function eu(ve){for(var We=tl.lastIndex=0;tl.test(ve);)++We;return We}function xu(ve){return ve.match(tl)||[]}function gh(ve){return ve.match(Td)||[]}var Ed=function ve(We){We=We==null?br:hi.defaults(br.Object(),We,hi.pick(br,aa));var Ne=We.Array,Ot=We.Date,en=We.Error,Cn=We.Function,jn=We.Math,mn=We.Object,Br=We.RegExp,oo=We.String,yi=We.TypeError,ao=Ne.prototype,il=Cn.prototype,Pi=mn.prototype,gs=We["__core-js_shared__"],wu=il.toString,Xn=Pi.hasOwnProperty,ha=0,js=function(){var c=/[^.]+$/.exec(gs&&gs.keys&&gs.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Fs=Pi.toString,Pa=wu.call(mn),Nh=br._,_h=Br("^"+wu.call(Xn).replace(at,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hc=xi?We.Buffer:t,qo=We.Symbol,Pc=We.Uint8Array,Bh=hc?hc.allocUnsafe:t,Fa=Ql(mn.getPrototypeOf,mn),Ph=mn.create,dc=Pi.propertyIsEnumerable,Wu=ao.splice,ud=qo?qo.isConcatSpreadable:t,Qo=qo?qo.iterator:t,lo=qo?qo.toStringTag:t,$l=function(){try{var c=ba(mn,"defineProperty");return c({},"",{}),c}catch{}}(),Fh=We.clearTimeout!==br.clearTimeout&&We.clearTimeout,Fi=Ot&&Ot.now!==br.Date.now&&Ot.now,cd=We.setTimeout!==br.setTimeout&&We.setTimeout,Vu=jn.ceil,tu=jn.floor,Fc=mn.getOwnPropertySymbols,xd=hc?hc.isBuffer:t,Cl=We.isFinite,wd=ao.join,Uh=Ql(mn.keys,mn),ei=jn.max,Ai=jn.min,mf=Ot.now,Rp=We.parseInt,Al=jn.random,nu=ao.reverse,ju=ba(We,"DataView"),Xu=ba(We,"Map"),vh=ba(We,"Promise"),sl=ba(We,"Set"),Zo=ba(We,"WeakMap"),Ml=ba(mn,"create"),Uc=Zo&&new Zo,Il={},zc=Xa(ju),pc=Xa(Xu),$d=Xa(vh),Ua=Xa(sl),Gr=Xa(Zo),ol=qo?qo.prototype:t,Ji=ol?ol.valueOf:t,da=ol?ol.toString:t;function Y(c){if(ui(c)&&!Mn(c)&&!(c instanceof dn)){if(c instanceof xr)return c;if(Xn.call(c,"__wrapped__"))return Od(c)}return new xr(c)}var Es=function(){function c(){}return function(m){if(!ri(m))return{};if(Ph)return Ph(m);c.prototype=m;var x=new c;return c.prototype=t,x}}();function pa(){}function xr(c,m){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=t}Y.templateSettings={escape:Si,evaluate:Er,interpolate:ir,variable:"",imports:{_:Y}},Y.prototype=pa.prototype,Y.prototype.constructor=Y,xr.prototype=Es(pa.prototype),xr.prototype.constructor=xr;function dn(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=he,this.__views__=[]}function kp(){var c=new dn(this.__wrapped__);return c.__actions__=ni(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=ni(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=ni(this.__views__),c}function al(){if(this.__filtered__){var c=new dn(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Mi(){var c=this.__wrapped__.value(),m=this.__dir__,x=Mn(c),D=m<0,G=x?c.length:0,K=fn(0,G,this.__views__),ae=K.start,fe=K.end,Ee=fe-ae,Ze=D?fe:ae-1,et=this.__iteratees__,ut=et.length,Rt=0,Vt=Ai(Ee,this.__takeCount__);if(!x||!D&&G==Ee&&Vt==Ee)return Kc(c,this.__actions__);var hn=[];e:for(;Ee--&&Rt<Vt;){Ze+=m;for(var In=-1,un=c[Ze];++In<ut;){var Gn=et[In],Jn=Gn.iteratee,oa=Gn.type,Qs=Jn(un);if(oa==pe)un=Qs;else if(!Qs){if(oa==ce)continue e;break e}}hn[Rt++]=un}return hn}dn.prototype=Es(pa.prototype),dn.prototype.constructor=dn;function li(c){var m=-1,x=c==null?0:c.length;for(this.clear();++m<x;){var D=c[m];this.set(D[0],D[1])}}function qi(){this.__data__=Ml?Ml(null):{},this.size=0}function rs(c){var m=this.has(c)&&delete this.__data__[c];return this.size-=m?1:0,m}function Hc(c){var m=this.__data__;if(Ml){var x=m[c];return x===d?t:x}return Xn.call(m,c)?m[c]:t}function fa(c){var m=this.__data__;return Ml?m[c]!==t:Xn.call(m,c)}function ma(c,m){var x=this.__data__;return this.size+=this.has(c)?0:1,x[c]=Ml&&m===t?d:m,this}li.prototype.clear=qi,li.prototype.delete=rs,li.prototype.get=Hc,li.prototype.has=fa,li.prototype.set=ma;function is(c){var m=-1,x=c==null?0:c.length;for(this.clear();++m<x;){var D=c[m];this.set(D[0],D[1])}}function Gc(){this.__data__=[],this.size=0}function ea(c){var m=this.__data__,x=_s(m,c);if(x<0)return!1;var D=m.length-1;return x==D?m.pop():Wu.call(m,x,1),--this.size,!0}function Cd(c){var m=this.__data__,x=_s(m,c);return x<0?t:m[x][1]}function Ad(c){return _s(this.__data__,c)>-1}function zh(c,m){var x=this.__data__,D=_s(x,c);return D<0?(++this.size,x.push([c,m])):x[D][1]=m,this}is.prototype.clear=Gc,is.prototype.delete=ea,is.prototype.get=Cd,is.prototype.has=Ad,is.prototype.set=zh;function Us(c){var m=-1,x=c==null?0:c.length;for(this.clear();++m<x;){var D=c[m];this.set(D[0],D[1])}}function Vn(){this.size=0,this.__data__={hash:new li,map:new(Xu||is),string:new li}}function zs(c){var m=qc(this,c).delete(c);return this.size-=m?1:0,m}function Xs(c){return qc(this,c).get(c)}function Ui(c){return qc(this,c).has(c)}function ru(c,m){var x=qc(this,c),D=x.size;return x.set(c,m),this.size+=x.size==D?0:1,this}Us.prototype.clear=Vn,Us.prototype.delete=zs,Us.prototype.get=Xs,Us.prototype.has=Ui,Us.prototype.set=ru;function Uo(c){var m=-1,x=c==null?0:c.length;for(this.__data__=new Us;++m<x;)this.add(c[m])}function Sn(c){return this.__data__.set(c,d),this}function di(c){return this.__data__.has(c)}Uo.prototype.add=Uo.prototype.push=Sn,Uo.prototype.has=di;function pi(c){var m=this.__data__=new is(c);this.size=m.size}function Op(){this.__data__=new is,this.size=0}function yh(c){var m=this.__data__,x=m.delete(c);return this.size=m.size,x}function uo(c){return this.__data__.get(c)}function ga(c){return this.__data__.has(c)}function xn(c,m){var x=this.__data__;if(x instanceof is){var D=x.__data__;if(!Xu||D.length<s-1)return D.push([c,m]),this.size=++x.size,this;x=this.__data__=new Us(D)}return x.set(c,m),this.size=x.size,this}pi.prototype.clear=Op,pi.prototype.delete=yh,pi.prototype.get=uo,pi.prototype.has=ga,pi.prototype.set=xn;function gn(c,m){var x=Mn(c),D=!x&&zd(c),G=!x&&!D&&rh(c),K=!x&&!D&&!G&&Wd(c),ae=x||D||G||K,fe=ae?Jl(c.length,oo):[],Ee=fe.length;for(var Ze in c)(m||Xn.call(c,Ze))&&!(ae&&(Ze=="length"||G&&(Ze=="offset"||Ze=="parent")||K&&(Ze=="buffer"||Ze=="byteLength"||Ze=="byteOffset")||ja(Ze,Ee)))&&fe.push(Ze);return fe}function ll(c){var m=c.length;return m?c[Rs(0,m-1)]:t}function fc(c,m){return hr(ni(c),za(m,0,c.length))}function gf(c){return hr(ni(c))}function iu(c,m,x){(x!==t&&!xa(c[m],x)||x===t&&!(m in c))&&zo(c,m,x)}function Co(c,m,x){var D=c[m];(!(Xn.call(c,m)&&xa(D,x))||x===t&&!(m in c))&&zo(c,m,x)}function _s(c,m){for(var x=c.length;x--;)if(xa(c[x][0],m))return x;return-1}function ul(c,m,x,D){return Ao(c,function(G,K,ae){m(D,G,x(G),ae)}),D}function ss(c,m){return c&&ls(m,Ti(m),c)}function cl(c,m){return c&&ls(m,es(m),c)}function zo(c,m,x){m=="__proto__"&&$l?$l(c,m,{configurable:!0,enumerable:!0,value:x,writable:!0}):c[m]=x}function Hh(c,m){for(var x=-1,D=m.length,G=Ne(D),K=c==null;++x<D;)G[x]=K?t:cm(c,m[x]);return G}function za(c,m,x){return c===c&&(x!==t&&(c=c<=x?c:x),m!==t&&(c=c>=m?c:m)),c}function Ii(c,m,x,D,G,K){var ae,fe=m&y,Ee=m&b,Ze=m&E;if(x&&(ae=G?x(c,D,G,K):x(c)),ae!==t)return ae;if(!ri(c))return c;var et=Mn(c);if(et){if(ae=zm(c),!fe)return ni(c,ae)}else{var ut=us(c),Rt=ut==Ce||ut==je;if(rh(c))return Jc(c,fe);if(ut==It||ut==qe||Rt&&!G){if(ae=Ee||Rt?{}:Tc(c),!fe)return Ee?pd(c,cl(ae,c)):Vh(c,ss(ae,c))}else{if(!Un[ut])return G?c:{};ae=Js(c,ut,fe)}}K||(K=new pi);var Vt=K.get(c);if(Vt)return Vt;K.set(c,ae),f_(c)?c.forEach(function(un){ae.add(Ii(un,m,x,un,c,K))}):Kh(c)&&c.forEach(function(un,Gn){ae.set(Gn,Ii(un,m,x,Gn,c,K))});var hn=Ze?Ee?wr:ur:Ee?es:Ti,In=et?t:hn(c);return Xr(In||c,function(un,Gn){In&&(Gn=un,un=c[Gn]),Co(ae,Gn,Ii(un,m,x,Gn,c,K))}),ae}function Md(c){var m=Ti(c);return function(x){return Wc(x,c,m)}}function Wc(c,m,x){var D=x.length;if(c==null)return!D;for(c=mn(c);D--;){var G=x[D],K=m[G],ae=c[G];if(ae===t&&!(G in c)||!K(ae))return!1}return!0}function Gh(c,m,x){if(typeof c!="function")throw new yi(l);return up(function(){c.apply(t,x)},m)}function Ho(c,m,x,D){var G=-1,K=La,ae=!0,fe=c.length,Ee=[],Ze=m.length;if(!fe)return Ee;x&&(m=cr(m,Hr(x))),D?(K=fh,ae=!1):m.length>=s&&(K=vr,ae=!1,m=new Uo(m));e:for(;++G<fe;){var et=c[G],ut=x==null?et:x(et);if(et=D||et!==0?et:0,ae&&ut===ut){for(var Rt=Ze;Rt--;)if(m[Rt]===ut)continue e;Ee.push(et)}else K(m,ut,D)||Ee.push(et)}return Ee}var Ao=jh(os),sp=jh(Ha,!0);function $u(c,m){var x=!0;return Ao(c,function(D,G,K){return x=!!m(D,G,K),x}),x}function Rl(c,m,x){for(var D=-1,G=c.length;++D<G;){var K=c[D],ae=m(K);if(ae!=null&&(fe===t?ae===ae&&!sa(ae):x(ae,fe)))var fe=ae,Ee=K}return Ee}function hd(c,m,x,D){var G=c.length;for(x=wn(x),x<0&&(x=-x>G?0:G+x),D=D===t||D>G?G:wn(D),D<0&&(D+=G),D=x>D?0:b0(D);x<D;)c[x++]=m;return c}function mc(c,m){var x=[];return Ao(c,function(D,G,K){m(D,G,K)&&x.push(D)}),x}function Yr(c,m,x,D,G){var K=-1,ae=c.length;for(x||(x=Id),G||(G=[]);++K<ae;){var fe=c[K];m>0&&x(fe)?m>1?Yr(fe,m-1,x,D,G):Jo(G,fe):D||(G[G.length]=fe)}return G}var su=bc(),Yu=bc(!0);function os(c,m){return c&&su(c,m,Ti)}function Ha(c,m){return c&&Yu(c,m,Ti)}function xs(c,m){return Gi(m,function(x){return xc(c[x])})}function ws(c,m){m=na(m,c);for(var x=0,D=m.length;c!=null&&x<D;)c=c[vo(m[x++])];return x&&x==D?c:t}function Vc(c,m,x){var D=m(c);return Mn(c)?D:Jo(D,x(c))}function fi(c){return c==null?c===t?Be:vt:lo&&lo in mn(c)?pl(c):Tg(c)}function Ga(c,m){return c>m}function gc(c,m){return c!=null&&Xn.call(c,m)}function op(c,m){return c!=null&&m in mn(c)}function bh(c,m,x){return c>=Ai(m,x)&&c<ei(m,x)}function ta(c,m,x){for(var D=x?fh:La,G=c[0].length,K=c.length,ae=K,fe=Ne(K),Ee=1/0,Ze=[];ae--;){var et=c[ae];ae&&m&&(et=cr(et,Hr(m))),Ee=Ai(et.length,Ee),fe[ae]=!x&&(m||G>=120&&et.length>=120)?new Uo(ae&&et):t}et=c[0];var ut=-1,Rt=fe[0];e:for(;++ut<G&&Ze.length<Ee;){var Vt=et[ut],hn=m?m(Vt):Vt;if(Vt=x||Vt!==0?Vt:0,!(Rt?vr(Rt,hn):D(Ze,hn,x))){for(ae=K;--ae;){var In=fe[ae];if(!(In?vr(In,hn):D(c[ae],hn,x)))continue e}Rt&&Rt.push(hn),Ze.push(Vt)}}return Ze}function Vi(c,m,x,D){return os(c,function(G,K,ae){m(D,x(G),K,ae)}),D}function Ln(c,m,x){m=na(m,c),c=yf(c,m);var D=c==null?c:c[vo(ks(m))];return D==null?t:zn(D,c,x)}function qn(c){return ui(c)&&fi(c)==qe}function kr(c){return ui(c)&&fi(c)==Mt}function ti(c){return ui(c)&&fi(c)==ft}function Jr(c,m,x,D,G){return c===m?!0:c==null||m==null||!ui(c)&&!ui(m)?c!==c&&m!==m:Mo(c,m,x,D,Jr,G)}function Mo(c,m,x,D,G,K){var ae=Mn(c),fe=Mn(m),Ee=ae?De:us(c),Ze=fe?De:us(m);Ee=Ee==qe?It:Ee,Ze=Ze==qe?It:Ze;var et=Ee==It,ut=Ze==It,Rt=Ee==Ze;if(Rt&&rh(c)){if(!rh(m))return!1;ae=!0,et=!1}if(Rt&&!et)return K||(K=new pi),ae||Wd(c)?tn(c,m,x,D,G,K):Tn(c,m,Ee,x,D,G,K);if(!(x&C)){var Vt=et&&Xn.call(c,"__wrapped__"),hn=ut&&Xn.call(m,"__wrapped__");if(Vt||hn){var In=Vt?c.value():c,un=hn?m.value():m;return K||(K=new pi),G(In,un,x,D,K)}}return Rt?(K||(K=new pi),An(c,m,x,D,G,K)):!1}function as(c){return ui(c)&&us(c)==it}function Qi(c,m,x,D){var G=x.length,K=G,ae=!D;if(c==null)return!K;for(c=mn(c);G--;){var fe=x[G];if(ae&&fe[2]?fe[1]!==c[fe[0]]:!(fe[0]in c))return!1}for(;++G<K;){fe=x[G];var Ee=fe[0],Ze=c[Ee],et=fe[1];if(ae&&fe[2]){if(Ze===t&&!(Ee in c))return!1}else{var ut=new pi;if(D)var Rt=D(Ze,et,Ee,c,m,ut);if(!(Rt===t?Jr(et,Ze,C|A,D,ut):Rt))return!1}}return!0}function ou(c){if(!ri(c)||qs(c))return!1;var m=xc(c)?_h:Dr;return m.test(Xa(c))}function Ku(c){return ui(c)&&fi(c)==$t}function _c(c){return ui(c)&&us(c)==mt}function Ju(c){return ui(c)&&wh(c.length)&&!!nr[fi(c)]}function Ys(c){return typeof c=="function"?c:c==null?Oo:typeof c=="object"?Mn(c)?ho(c[0],c[1]):Au(c):A_(c)}function co(c){if(!Sc(c))return Uh(c);var m=[];for(var x in mn(c))Xn.call(c,x)&&x!="constructor"&&m.push(x);return m}function dd(c){if(!ri(c))return Sa(c);var m=Sc(c),x=[];for(var D in c)D=="constructor"&&(m||!Xn.call(c,D))||x.push(D);return x}function _a(c,m){return c<m}function Cu(c,m){var x=-1,D=zi(c)?Ne(c.length):[];return Ao(c,function(G,K,ae){D[++x]=m(G,K,ae)}),D}function Au(c){var m=Vf(c);return m.length==1&&m[0][2]?jf(m[0][0],m[0][1]):function(x){return x===c||Qi(x,c,m)}}function ho(c,m){return Ta(c)&&_f(m)?jf(vo(c),m):function(x){var D=cm(x,c);return D===t&&D===m?hm(x,c):Jr(m,D,C|A)}}function po(c,m,x,D,G){c!==m&&su(m,function(K,ae){if(G||(G=new pi),ri(K))kl(c,m,ae,x,po,D,G);else{var fe=D?D(uu(c,ae),K,ae+"",c,m,G):t;fe===t&&(fe=K),iu(c,ae,fe)}},es)}function kl(c,m,x,D,G,K,ae){var fe=uu(c,x),Ee=uu(m,x),Ze=ae.get(Ee);if(Ze){iu(c,x,Ze);return}var et=K?K(fe,Ee,x+"",c,m,ae):t,ut=et===t;if(ut){var Rt=Mn(Ee),Vt=!Rt&&rh(Ee),hn=!Rt&&!Vt&&Wd(Ee);et=Ee,Rt||Vt||hn?Mn(fe)?et=fe:Kr(fe)?et=ni(fe):Vt?(ut=!1,et=Jc(Ee,!0)):hn?(ut=!1,et=Ll(Ee,!0)):et=[]:Fr(Ee)||zd(Ee)?(et=fe,zd(fe)?et=Uy(fe):(!ri(fe)||xc(fe))&&(et=Tc(Ee))):ut=!1}ut&&(ae.set(Ee,et),G(et,Ee,D,K,ae),ae.delete(Ee)),iu(c,x,et)}function Go(c,m){var x=c.length;if(x)return m+=m<0?x:0,ja(m,x)?c[m]:t}function qu(c,m,x){m.length?m=cr(m,function(K){return Mn(K)?function(ae){return ws(ae,K.length===1?K[0]:K)}:K}):m=[Oo];var D=-1;m=cr(m,Hr(sn()));var G=Cu(c,function(K,ae,fe){var Ee=cr(m,function(Ze){return Ze(K)});return{criteria:Ee,index:++D,value:K}});return Na(G,function(K,ae){return Dl(K,ae,x)})}function Qu(c,m){return Th(c,m,function(x,D){return hm(c,D)})}function Th(c,m,x){for(var D=-1,G=m.length,K={};++D<G;){var ae=m[D],fe=ws(c,ae);x(fe,ae)&&mi(K,na(ae,c),fe)}return K}function Sh(c){return function(m){return ws(m,c)}}function Mr(c,m,x,D){var G=D?zu:Is,K=-1,ae=m.length,fe=c;for(c===m&&(m=ni(m)),x&&(fe=cr(c,Hr(x)));++K<ae;)for(var Ee=0,Ze=m[K],et=x?x(Ze):Ze;(Ee=G(fe,et,Ee,D))>-1;)fe!==c&&Wu.call(fe,Ee,1),Wu.call(c,Ee,1);return c}function vs(c,m){for(var x=c?m.length:0,D=x-1;x--;){var G=m[x];if(x==D||G!==K){var K=G;ja(G)?Wu.call(c,G,1):Yc(c,G)}}return c}function Rs(c,m){return c+tu(Al()*(m-c+1))}function Wa(c,m,x,D){for(var G=-1,K=ei(Vu((m-c)/(x||1)),0),ae=Ne(K);K--;)ae[D?K:++G]=c,c+=x;return ae}function Hs(c,m){var x="";if(!c||m<1||m>J)return x;do m%2&&(x+=c),m=tu(m/2),m&&(c+=c);while(m);return x}function cn(c,m){return kd(Xf(c,m,Oo),c+"")}function jc(c){return ll(fp(c))}function bn(c,m){var x=fp(c);return hr(x,za(m,0,x.length))}function mi(c,m,x,D){if(!ri(c))return c;m=na(m,c);for(var G=-1,K=m.length,ae=K-1,fe=c;fe!=null&&++G<K;){var Ee=vo(m[G]),Ze=x;if(Ee==="__proto__"||Ee==="constructor"||Ee==="prototype")return c;if(G!=ae){var et=fe[Ee];Ze=D?D(et,Ee,fe):t,Ze===t&&(Ze=ri(et)?et:ja(m[G+1])?[]:{})}Co(fe,Ee,Ze),fe=fe[Ee]}return c}var $s=Uc?function(c,m){return Uc.set(c,m),c}:Oo,au=$l?function(c,m){return $l(c,"toString",{configurable:!0,enumerable:!1,value:w_(m),writable:!0})}:Oo;function Ol(c){return hr(fp(c))}function Bt(c,m,x){var D=-1,G=c.length;m<0&&(m=-m>G?0:G+m),x=x>G?G:x,x<0&&(x+=G),G=m>x?0:x-m>>>0,m>>>=0;for(var K=Ne(G);++D<G;)K[D]=c[D+m];return K}function hl(c,m){var x;return Ao(c,function(D,G,K){return x=m(D,G,K),!x}),!!x}function Wr(c,m,x){var D=0,G=c==null?D:c.length;if(typeof m=="number"&&m===m&&G<=Fe){for(;D<G;){var K=D+G>>>1,ae=c[K];ae!==null&&!sa(ae)&&(x?ae<=m:ae<m)?D=K+1:G=K}return G}return Zu(c,m,Oo,x)}function Zu(c,m,x,D){var G=0,K=c==null?0:c.length;if(K===0)return 0;m=x(m);for(var ae=m!==m,fe=m===null,Ee=sa(m),Ze=m===t;G<K;){var et=tu((G+K)/2),ut=x(c[et]),Rt=ut!==t,Vt=ut===null,hn=ut===ut,In=sa(ut);if(ae)var un=D||hn;else Ze?un=hn&&(D||Rt):fe?un=hn&&Rt&&(D||!Vt):Ee?un=hn&&Rt&&!Vt&&(D||!In):Vt||In?un=!1:un=D?ut<=m:ut<m;un?G=et+1:K=et}return Ai(K,Se)}function Wh(c,m){for(var x=-1,D=c.length,G=0,K=[];++x<D;){var ae=c[x],fe=m?m(ae):ae;if(!x||!xa(fe,Ee)){var Ee=fe;K[G++]=ae===0?0:ae}}return K}function Xc(c){return typeof c=="number"?c:sa(c)?ie:+c}function si(c){if(typeof c=="string")return c;if(Mn(c))return cr(c,si)+"";if(sa(c))return da?da.call(c):"";var m=c+"";return m=="0"&&1/c==-Oe?"-0":m}function ji(c,m,x){var D=-1,G=La,K=c.length,ae=!0,fe=[],Ee=fe;if(x)ae=!1,G=fh;else if(K>=s){var Ze=m?null:Or(c);if(Ze)return Zl(Ze);ae=!1,G=vr,Ee=new Uo}else Ee=m?[]:fe;e:for(;++D<K;){var et=c[D],ut=m?m(et):et;if(et=x||et!==0?et:0,ae&&ut===ut){for(var Rt=Ee.length;Rt--;)if(Ee[Rt]===ut)continue e;m&&Ee.push(ut),fe.push(et)}else G(Ee,ut,x)||(Ee!==fe&&Ee.push(ut),fe.push(et))}return fe}function Yc(c,m){return m=na(m,c),c=yf(c,m),c==null||delete c[vo(ks(m))]}function fo(c,m,x,D){return mi(c,m,x(ws(c,m)),D)}function dl(c,m,x,D){for(var G=c.length,K=D?G:-1;(D?K--:++K<G)&&m(c[K],K,c););return x?Bt(c,D?0:K,D?K+1:G):Bt(c,D?K+1:0,D?G:K)}function Kc(c,m){var x=c;return x instanceof dn&&(x=x.value()),ad(m,function(D,G){return G.func.apply(G.thisArg,Jo([D],G.args))},x)}function vc(c,m,x){var D=c.length;if(D<2)return D?ji(c[0]):[];for(var G=-1,K=Ne(D);++G<D;)for(var ae=c[G],fe=-1;++fe<D;)fe!=G&&(K[G]=Ho(K[G]||ae,c[fe],m,x));return ji(Yr(K,1),m,x)}function ec(c,m,x){for(var D=-1,G=c.length,K=m.length,ae={};++D<G;){var fe=D<K?m[D]:t;x(ae,c[D],fe)}return ae}function Io(c){return Kr(c)?c:[]}function Ks(c){return typeof c=="function"?c:Oo}function na(c,m){return Mn(c)?c:Ta(c,m)?[c]:a0(er(c))}var Eh=cn;function mo(c,m,x){var D=c.length;return x=x===t?D:x,!m&&x>=D?c:Bt(c,m,x)}var Mu=Fh||function(c){return br.clearTimeout(c)};function Jc(c,m){if(m)return c.slice();var x=c.length,D=Bh?Bh(x):new c.constructor(x);return c.copy(D),D}function yc(c){var m=new c.constructor(c.byteLength);return new Pc(m).set(new Pc(c)),m}function Wo(c,m){var x=m?yc(c.buffer):c.buffer;return new c.constructor(x,c.byteOffset,c.byteLength)}function go(c){var m=new c.constructor(c.source,yr.exec(c));return m.lastIndex=c.lastIndex,m}function tc(c){return Ji?mn(Ji.call(c)):{}}function Ll(c,m){var x=m?yc(c.buffer):c.buffer;return new c.constructor(x,c.byteOffset,c.length)}function _o(c,m){if(c!==m){var x=c!==t,D=c===null,G=c===c,K=sa(c),ae=m!==t,fe=m===null,Ee=m===m,Ze=sa(m);if(!fe&&!Ze&&!K&&c>m||K&&ae&&Ee&&!fe&&!Ze||D&&ae&&Ee||!x&&Ee||!G)return 1;if(!D&&!K&&!Ze&&c<m||Ze&&x&&G&&!D&&!K||fe&&x&&G||!ae&&G||!Ee)return-1}return 0}function Dl(c,m,x){for(var D=-1,G=c.criteria,K=m.criteria,ae=G.length,fe=x.length;++D<ae;){var Ee=_o(G[D],K[D]);if(Ee){if(D>=fe)return Ee;var Ze=x[D];return Ee*(Ze=="desc"?-1:1)}}return c.index-m.index}function Va(c,m,x,D){for(var G=-1,K=c.length,ae=x.length,fe=-1,Ee=m.length,Ze=ei(K-ae,0),et=Ne(Ee+Ze),ut=!D;++fe<Ee;)et[fe]=m[fe];for(;++G<ae;)(ut||G<K)&&(et[x[G]]=c[G]);for(;Ze--;)et[fe++]=c[G++];return et}function lu(c,m,x,D){for(var G=-1,K=c.length,ae=-1,fe=x.length,Ee=-1,Ze=m.length,et=ei(K-fe,0),ut=Ne(et+Ze),Rt=!D;++G<et;)ut[G]=c[G];for(var Vt=G;++Ee<Ze;)ut[Vt+Ee]=m[Ee];for(;++ae<fe;)(Rt||G<K)&&(ut[Vt+x[ae]]=c[G++]);return ut}function ni(c,m){var x=-1,D=c.length;for(m||(m=Ne(D));++x<D;)m[x]=c[x];return m}function ls(c,m,x,D){var G=!x;x||(x={});for(var K=-1,ae=m.length;++K<ae;){var fe=m[K],Ee=D?D(x[fe],c[fe],fe,x,c):t;Ee===t&&(Ee=c[fe]),G?zo(x,fe,Ee):Co(x,fe,Ee)}return x}function Vh(c,m){return ls(c,lp(c),m)}function pd(c,m){return ls(c,Xh(c),m)}function va(c,m){return function(x,D){var G=Mn(x)?$i:ul,K=m?m():{};return G(x,c,sn(D,2),K)}}function ya(c){return cn(function(m,x){var D=-1,G=x.length,K=G>1?x[G-1]:t,ae=G>2?x[2]:t;for(K=c.length>3&&typeof K=="function"?(G--,K):t,ae&&Pr(x[0],x[1],ae)&&(K=G<3?t:K,G=1),m=mn(m);++D<G;){var fe=x[D];fe&&c(m,fe,D,K)}return m})}function jh(c,m){return function(x,D){if(x==null)return x;if(!zi(x))return c(x,D);for(var G=x.length,K=m?G:-1,ae=mn(x);(m?K--:++K<G)&&D(ae[K],K,ae)!==!1;);return x}}function bc(c){return function(m,x,D){for(var G=-1,K=mn(m),ae=D(m),fe=ae.length;fe--;){var Ee=ae[c?fe:++G];if(x(K[Ee],Ee,K)===!1)break}return m}}function Lp(c,m,x){var D=m&I,G=g(c);function K(){var ae=this&&this!==br&&this instanceof K?G:c;return ae.apply(D?x:this,arguments)}return K}function w(c){return function(m){m=er(m);var x=rl(m)?Nr(m):t,D=x?x[0]:m.charAt(0),G=x?mo(x,1).join(""):m.slice(1);return D[c]()+G}}function h(c){return function(m){return ad(eb(Sv(m).replace(Ki,"")),c,"")}}function g(c){return function(){var m=arguments;switch(m.length){case 0:return new c;case 1:return new c(m[0]);case 2:return new c(m[0],m[1]);case 3:return new c(m[0],m[1],m[2]);case 4:return new c(m[0],m[1],m[2],m[3]);case 5:return new c(m[0],m[1],m[2],m[3],m[4]);case 6:return new c(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new c(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var x=Es(c.prototype),D=c.apply(x,m);return ri(D)?D:x}}function $(c,m,x){var D=g(c);function G(){for(var K=arguments.length,ae=Ne(K),fe=K,Ee=xh(G);fe--;)ae[fe]=arguments[fe];var Ze=K<3&&ae[0]!==Ee&&ae[K-1]!==Ee?[]:Ps(ae,Ee);if(K-=Ze.length,K<x)return vn(c,m,V,G.placeholder,t,ae,Ze,t,t,x-K);var et=this&&this!==br&&this instanceof G?D:c;return zn(et,this,ae)}return G}function M(c){return function(m,x,D){var G=mn(m);if(!zi(m)){var K=sn(x,3);m=Ti(m),x=function(fe){return K(G[fe],fe,G)}}var ae=c(m,x,D);return ae>-1?G[K?m[ae]:ae]:t}}function B(c){return Bn(function(m){var x=m.length,D=x,G=xr.prototype.thru;for(c&&m.reverse();D--;){var K=m[D];if(typeof K!="function")throw new yi(l);if(G&&!ae&&ap(K)=="wrapper")var ae=new xr([],!0)}for(D=ae?D:x;++D<x;){K=m[D];var fe=ap(K),Ee=fe=="wrapper"?Nl(K):t;Ee&&Ri(Ee[0])&&Ee[1]==(H|P|z|U)&&!Ee[4].length&&Ee[9]==1?ae=ae[ap(Ee[0])].apply(ae,Ee[3]):ae=K.length==1&&Ri(K)?ae[fe]():ae.thru(K)}return function(){var Ze=arguments,et=Ze[0];if(ae&&Ze.length==1&&Mn(et))return ae.plant(et).value();for(var ut=0,Rt=x?m[ut].apply(this,Ze):et;++ut<x;)Rt=m[ut].call(this,Rt);return Rt}})}function V(c,m,x,D,G,K,ae,fe,Ee,Ze){var et=m&H,ut=m&I,Rt=m&L,Vt=m&(P|N),hn=m&Q,In=Rt?t:g(c);function un(){for(var Gn=arguments.length,Jn=Ne(Gn),oa=Gn;oa--;)Jn[oa]=arguments[oa];if(Vt)var Qs=xh(un),Ls=Eu(Jn,Qs);if(D&&(Jn=Va(Jn,D,G,Vt)),K&&(Jn=lu(Jn,K,ae,Vt)),Gn-=Ls,Vt&&Gn<Ze){var gi=Ps(Jn,Qs);return vn(c,m,V,un.placeholder,x,Jn,gi,fe,Ee,Ze-Gn)}var Ul=ut?x:this,$c=Rt?Ul[c]:c;return Gn=Jn.length,fe?Jn=fl(Jn,fe):hn&&Gn>1&&Jn.reverse(),et&&Ee<Gn&&(Jn.length=Ee),this&&this!==br&&this instanceof un&&($c=In||g($c)),$c.apply(Ul,Jn)}return un}function ue(c,m){return function(x,D){return Vi(x,c,m(D),{})}}function Me(c,m){return function(x,D){var G;if(x===t&&D===t)return m;if(x!==t&&(G=x),D!==t){if(G===t)return D;typeof x=="string"||typeof D=="string"?(x=si(x),D=si(D)):(x=Xc(x),D=Xc(D)),G=c(x,D)}return G}}function Qe(c){return Bn(function(m){return m=cr(m,Hr(sn())),cn(function(x){var D=this;return c(m,function(G){return zn(G,D,x)})})})}function Et(c,m){m=m===t?" ":si(m);var x=m.length;if(x<2)return x?Hs(m,c):m;var D=Hs(m,Vu(c/ns(m)));return rl(m)?mo(Nr(D),0,c).join(""):D.slice(0,c)}function Jt(c,m,x,D){var G=m&I,K=g(c);function ae(){for(var fe=-1,Ee=arguments.length,Ze=-1,et=D.length,ut=Ne(et+Ee),Rt=this&&this!==br&&this instanceof ae?K:c;++Ze<et;)ut[Ze]=D[Ze];for(;Ee--;)ut[Ze++]=arguments[++fe];return zn(Rt,G?x:this,ut)}return ae}function an(c){return function(m,x,D){return D&&typeof D!="number"&&Pr(m,x,D)&&(x=D=t),m=wc(m),x===t?(x=m,m=0):x=wc(x),D=D===t?m<x?1:-1:wc(D),Wa(m,x,D,c)}}function _n(c){return function(m,x){return typeof m=="string"&&typeof x=="string"||(m=Xi(m),x=Xi(x)),c(m,x)}}function vn(c,m,x,D,G,K,ae,fe,Ee,Ze){var et=m&P,ut=et?ae:t,Rt=et?t:ae,Vt=et?K:t,hn=et?t:K;m|=et?z:W,m&=~(et?W:z),m&O||(m&=~(I|L));var In=[c,m,G,Vt,ut,hn,Rt,fe,Ee,Ze],un=x.apply(t,In);return Ri(c)&&Rd(un,In),un.placeholder=D,Qc(un,c,m)}function pn(c){var m=jn[c];return function(x,D){if(x=Xi(x),D=D==null?0:Ai(wn(D),292),D&&Cl(x)){var G=(er(x)+"e").split("e"),K=m(G[0]+"e"+(+G[1]+D));return G=(er(K)+"e").split("e"),+(G[0]+"e"+(+G[1]-D))}return m(x)}}var Or=sl&&1/Zl(new sl([,-0]))[1]==Oe?function(c){return new sl(c)}:I0;function St(c){return function(m){var x=us(m);return x==it?Gu(m):x==mt?Dh(m):ql(m,c(m))}}function we(c,m,x,D,G,K,ae,fe){var Ee=m&L;if(!Ee&&typeof c!="function")throw new yi(l);var Ze=D?D.length:0;if(Ze||(m&=~(z|W),D=G=t),ae=ae===t?ae:ei(wn(ae),0),fe=fe===t?fe:wn(fe),Ze-=G?G.length:0,m&W){var et=D,ut=G;D=G=t}var Rt=Ee?t:Nl(c),Vt=[c,m,x,D,G,et,ut,K,ae,fe];if(Rt&&vf(Vt,Rt),c=Vt[0],m=Vt[1],x=Vt[2],D=Vt[3],G=Vt[4],fe=Vt[9]=Vt[9]===t?Ee?0:c.length:ei(Vt[9]-Ze,0),!fe&&m&(P|N)&&(m&=~(P|N)),!m||m==I)var hn=Lp(c,m,x);else m==P||m==N?hn=$(c,m,fe):(m==z||m==(I|z))&&!G.length?hn=Jt(c,m,x,D):hn=V.apply(t,Vt);var In=Rt?$s:Rd;return Qc(In(hn,Vt),c,m)}function Re(c,m,x,D){return c===t||xa(c,Pi[x])&&!Xn.call(D,x)?m:c}function nt(c,m,x,D,G,K){return ri(c)&&ri(m)&&(K.set(m,c),po(c,m,t,nt,K),K.delete(m)),c}function Ut(c){return Fr(c)?t:c}function tn(c,m,x,D,G,K){var ae=x&C,fe=c.length,Ee=m.length;if(fe!=Ee&&!(ae&&Ee>fe))return!1;var Ze=K.get(c),et=K.get(m);if(Ze&&et)return Ze==m&&et==c;var ut=-1,Rt=!0,Vt=x&A?new Uo:t;for(K.set(c,m),K.set(m,c);++ut<fe;){var hn=c[ut],In=m[ut];if(D)var un=ae?D(In,hn,ut,m,c,K):D(hn,In,ut,c,m,K);if(un!==t){if(un)continue;Rt=!1;break}if(Vt){if(!Lc(m,function(Gn,Jn){if(!vr(Vt,Jn)&&(hn===Gn||G(hn,Gn,x,D,K)))return Vt.push(Jn)})){Rt=!1;break}}else if(!(hn===In||G(hn,In,x,D,K))){Rt=!1;break}}return K.delete(c),K.delete(m),Rt}function Tn(c,m,x,D,G,K,ae){switch(x){case pt:if(c.byteLength!=m.byteLength||c.byteOffset!=m.byteOffset)return!1;c=c.buffer,m=m.buffer;case Mt:return!(c.byteLength!=m.byteLength||!K(new Pc(c),new Pc(m)));case tt:case ft:case ot:return xa(+c,+m);case Pe:return c.name==m.name&&c.message==m.message;case $t:case xe:return c==m+"";case it:var fe=Gu;case mt:var Ee=D&C;if(fe||(fe=Zl),c.size!=m.size&&!Ee)return!1;var Ze=ae.get(c);if(Ze)return Ze==m;D|=A,ae.set(c,m);var et=tn(fe(c),fe(m),D,G,K,ae);return ae.delete(c),et;case re:if(Ji)return Ji.call(c)==Ji.call(m)}return!1}function An(c,m,x,D,G,K){var ae=x&C,fe=ur(c),Ee=fe.length,Ze=ur(m),et=Ze.length;if(Ee!=et&&!ae)return!1;for(var ut=Ee;ut--;){var Rt=fe[ut];if(!(ae?Rt in m:Xn.call(m,Rt)))return!1}var Vt=K.get(c),hn=K.get(m);if(Vt&&hn)return Vt==m&&hn==c;var In=!0;K.set(c,m),K.set(m,c);for(var un=ae;++ut<Ee;){Rt=fe[ut];var Gn=c[Rt],Jn=m[Rt];if(D)var oa=ae?D(Jn,Gn,Rt,m,c,K):D(Gn,Jn,Rt,c,m,K);if(!(oa===t?Gn===Jn||G(Gn,Jn,x,D,K):oa)){In=!1;break}un||(un=Rt=="constructor")}if(In&&!un){var Qs=c.constructor,Ls=m.constructor;Qs!=Ls&&"constructor"in c&&"constructor"in m&&!(typeof Qs=="function"&&Qs instanceof Qs&&typeof Ls=="function"&&Ls instanceof Ls)&&(In=!1)}return K.delete(c),K.delete(m),In}function Bn(c){return kd(Xf(c,t,cp),c+"")}function ur(c){return Vc(c,Ti,lp)}function wr(c){return Vc(c,es,Xh)}var Nl=Uc?function(c){return Uc.get(c)}:I0;function ap(c){for(var m=c.name+"",x=Il[m],D=Xn.call(Il,m)?x.length:0;D--;){var G=x[D],K=G.func;if(K==null||K==c)return G.name}return m}function xh(c){var m=Xn.call(Y,"placeholder")?Y:c;return m.placeholder}function sn(){var c=Y.iteratee||Yi;return c=c===Yi?Ys:c,arguments.length?c(arguments[0],arguments[1]):c}function qc(c,m){var x=c.__data__;return Ge(m)?x[typeof m=="string"?"string":"hash"]:x.map}function Vf(c){for(var m=Ti(c),x=m.length;x--;){var D=m[x],G=c[D];m[x]=[D,G,_f(G)]}return m}function ba(c,m){var x=Hu(c,m);return ou(x)?x:t}function pl(c){var m=Xn.call(c,lo),x=c[lo];try{c[lo]=t;var D=!0}catch{}var G=Fs.call(c);return D&&(m?c[lo]=x:delete c[lo]),G}var lp=Fc?function(c){return c==null?[]:(c=mn(c),Gi(Fc(c),function(m){return dc.call(c,m)}))}:R0,Xh=Fc?function(c){for(var m=[];c;)Jo(m,lp(c)),c=Fa(c);return m}:R0,us=fi;(ju&&us(new ju(new ArrayBuffer(1)))!=pt||Xu&&us(new Xu)!=it||vh&&us(vh.resolve())!=yt||sl&&us(new sl)!=mt||Zo&&us(new Zo)!=dt)&&(us=function(c){var m=fi(c),x=m==It?c.constructor:t,D=x?Xa(x):"";if(D)switch(D){case zc:return pt;case pc:return it;case $d:return yt;case Ua:return mt;case Gr:return dt}return m});function fn(c,m,x){for(var D=-1,G=x.length;++D<G;){var K=x[D],ae=K.size;switch(K.type){case"drop":c+=ae;break;case"dropRight":m-=ae;break;case"take":m=Ai(m,c+ae);break;case"takeRight":c=ei(c,m-ae);break}}return{start:c,end:m}}function o0(c){var m=c.match(gt);return m?m[1].split(Ct):[]}function bg(c,m,x){m=na(m,c);for(var D=-1,G=m.length,K=!1;++D<G;){var ae=vo(m[D]);if(!(K=c!=null&&x(c,ae)))break;c=c[ae]}return K||++D!=G?K:(G=c==null?0:c.length,!!G&&wh(G)&&ja(ae,G)&&(Mn(c)||zd(c)))}function zm(c){var m=c.length,x=new c.constructor(m);return m&&typeof c[0]=="string"&&Xn.call(c,"index")&&(x.index=c.index,x.input=c.input),x}function Tc(c){return typeof c.constructor=="function"&&!Sc(c)?Es(Fa(c)):{}}function Js(c,m,x){var D=c.constructor;switch(m){case Mt:return yc(c);case tt:case ft:return new D(+c);case pt:return Wo(c,x);case Ke:case Ie:case q:case ee:case de:case Ae:case Je:case jt:case ze:return Ll(c,x);case it:return new D;case ot:case xe:return new D(c);case $t:return go(c);case mt:return new D;case re:return tc(c)}}function Dp(c,m){var x=m.length;if(!x)return c;var D=x-1;return m[D]=(x>1?"& ":"")+m[D],m=m.join(x>2?", ":" "),c.replace(Le,`{
/* [wrapped with `+m+`] */
`)}function Id(c){return Mn(c)||zd(c)||!!(ud&&c&&c[ud])}function ja(c,m){var x=typeof c;return m=m??J,!!m&&(x=="number"||x!="symbol"&&bs.test(c))&&c>-1&&c%1==0&&c<m}function Pr(c,m,x){if(!ri(x))return!1;var D=typeof m;return(D=="number"?zi(x)&&ja(m,x.length):D=="string"&&m in x)?xa(x[m],c):!1}function Ta(c,m){if(Mn(c))return!1;var x=typeof c;return x=="number"||x=="symbol"||x=="boolean"||c==null||sa(c)?!0:be.test(c)||!te.test(c)||m!=null&&c in mn(m)}function Ge(c){var m=typeof c;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?c!=="__proto__":c===null}function Ri(c){var m=ap(c),x=Y[m];if(typeof x!="function"||!(m in dn.prototype))return!1;if(c===x)return!0;var D=Nl(x);return!!D&&c===D[0]}function qs(c){return!!js&&js in c}var a_=gs?xc:fm;function Sc(c){var m=c&&c.constructor,x=typeof m=="function"&&m.prototype||Pi;return c===x}function _f(c){return c===c&&!ri(c)}function jf(c,m){return function(x){return x==null?!1:x[c]===m&&(m!==t||c in mn(x))}}function l_(c){var m=ht(c,function(D){return x.size===p&&x.clear(),D}),x=m.cache;return m}function vf(c,m){var x=c[1],D=m[1],G=x|D,K=G<(I|L|H),ae=D==H&&x==P||D==H&&x==U&&c[7].length<=m[8]||D==(H|U)&&m[7].length<=m[8]&&x==P;if(!(K||ae))return c;D&I&&(c[2]=m[2],G|=x&I?0:O);var fe=m[3];if(fe){var Ee=c[3];c[3]=Ee?Va(Ee,fe,m[4]):fe,c[4]=Ee?Ps(c[3],_):m[4]}return fe=m[5],fe&&(Ee=c[5],c[5]=Ee?lu(Ee,fe,m[6]):fe,c[6]=Ee?Ps(c[5],_):m[6]),fe=m[7],fe&&(c[7]=fe),D&H&&(c[8]=c[8]==null?m[8]:Ai(c[8],m[8])),c[9]==null&&(c[9]=m[9]),c[0]=m[0],c[1]=G,c}function Sa(c){var m=[];if(c!=null)for(var x in mn(c))m.push(x);return m}function Tg(c){return Fs.call(c)}function Xf(c,m,x){return m=ei(m===t?c.length-1:m,0),function(){for(var D=arguments,G=-1,K=ei(D.length-m,0),ae=Ne(K);++G<K;)ae[G]=D[m+G];G=-1;for(var fe=Ne(m+1);++G<m;)fe[G]=D[G];return fe[m]=x(ae),zn(c,this,fe)}}function yf(c,m){return m.length<2?c:ws(c,Bt(m,0,-1))}function fl(c,m){for(var x=c.length,D=Ai(m.length,x),G=ni(c);D--;){var K=m[D];c[D]=ja(K,x)?G[K]:t}return c}function uu(c,m){if(!(m==="constructor"&&typeof c[m]=="function")&&m!="__proto__")return c[m]}var Rd=Sg($s),up=cd||function(c,m){return br.setTimeout(c,m)},kd=Sg(au);function Qc(c,m,x){var D=m+"";return kd(c,Dp(D,Yf(o0(D),x)))}function Sg(c){var m=0,x=0;return function(){var D=mf(),G=ge-(D-x);if(x=D,G>0){if(++m>=le)return arguments[0]}else m=0;return c.apply(t,arguments)}}function hr(c,m){var x=-1,D=c.length,G=D-1;for(m=m===t?D:m;++x<m;){var K=Rs(x,G),ae=c[K];c[K]=c[x],c[x]=ae}return c.length=m,c}var a0=l_(function(c){var m=[];return c.charCodeAt(0)===46&&m.push(""),c.replace(He,function(x,D,G,K){m.push(G?K.replace(On,"$1"):D||x)}),m});function vo(c){if(typeof c=="string"||sa(c))return c;var m=c+"";return m=="0"&&1/c==-Oe?"-0":m}function Xa(c){if(c!=null){try{return wu.call(c)}catch{}try{return c+""}catch{}}return""}function Yf(c,m){return Xr(ke,function(x){var D="_."+x[0];m&x[1]&&!La(c,D)&&c.push(D)}),c.sort()}function Od(c){if(c instanceof dn)return c.clone();var m=new xr(c.__wrapped__,c.__chain__);return m.__actions__=ni(c.__actions__),m.__index__=c.__index__,m.__values__=c.__values__,m}function Kf(c,m,x){(x?Pr(c,m,x):m===t)?m=1:m=ei(wn(m),0);var D=c==null?0:c.length;if(!D||m<1)return[];for(var G=0,K=0,ae=Ne(Vu(D/m));G<D;)ae[K++]=Bt(c,G,G+=m);return ae}function Iu(c){for(var m=-1,x=c==null?0:c.length,D=0,G=[];++m<x;){var K=c[m];K&&(G[D++]=K)}return G}function l0(){var c=arguments.length;if(!c)return[];for(var m=Ne(c-1),x=arguments[0],D=c;D--;)m[D-1]=arguments[D];return Jo(Mn(x)?ni(x):[x],Yr(m,1))}var Vo=cn(function(c,m){return Kr(c)?Ho(c,Yr(m,1,Kr,!0)):[]}),Zi=cn(function(c,m){var x=ks(m);return Kr(x)&&(x=t),Kr(c)?Ho(c,Yr(m,1,Kr,!0),sn(x,2)):[]}),cu=cn(function(c,m){var x=ks(m);return Kr(x)&&(x=t),Kr(c)?Ho(c,Yr(m,1,Kr,!0),t,x):[]});function ml(c,m,x){var D=c==null?0:c.length;return D?(m=x||m===t?1:wn(m),Bt(c,m<0?0:m,D)):[]}function Ru(c,m,x){var D=c==null?0:c.length;return D?(m=x||m===t?1:wn(m),m=D-m,Bt(c,0,m<0?0:m)):[]}function hu(c,m){return c&&c.length?dl(c,sn(m,3),!0,!0):[]}function bf(c,m){return c&&c.length?dl(c,sn(m,3),!0):[]}function Bl(c,m,x,D){var G=c==null?0:c.length;return G?(x&&typeof x!="number"&&Pr(c,m,x)&&(x=0,D=G),hd(c,m,x,D)):[]}function Ld(c,m,x){var D=c==null?0:c.length;if(!D)return-1;var G=x==null?0:wn(x);return G<0&&(G=ei(D+G,0)),Kl(c,sn(m,3),G)}function Dd(c,m,x){var D=c==null?0:c.length;if(!D)return-1;var G=D-1;return x!==t&&(G=wn(x),G=x<0?ei(D+G,0):Ai(G,D-1)),Kl(c,sn(m,3),G,!0)}function cp(c){var m=c==null?0:c.length;return m?Yr(c,1):[]}function Eg(c){var m=c==null?0:c.length;return m?Yr(c,Oe):[]}function Jf(c,m){var x=c==null?0:c.length;return x?(m=m===t?1:wn(m),Yr(c,m)):[]}function Zc(c){for(var m=-1,x=c==null?0:c.length,D={};++m<x;){var G=c[m];D[G[0]]=G[1]}return D}function gl(c){return c&&c.length?c[0]:t}function eh(c,m,x){var D=c==null?0:c.length;if(!D)return-1;var G=x==null?0:wn(x);return G<0&&(G=ei(D+G,0)),Is(c,m,G)}function Nd(c){var m=c==null?0:c.length;return m?Bt(c,0,-1):[]}var Hm=cn(function(c){var m=cr(c,Io);return m.length&&m[0]===c[0]?ta(m):[]}),Gm=cn(function(c){var m=ks(c),x=cr(c,Io);return m===ks(x)?m=t:x.pop(),x.length&&x[0]===c[0]?ta(x,sn(m,2)):[]}),yo=cn(function(c){var m=ks(c),x=cr(c,Io);return m=typeof m=="function"?m:t,m&&x.pop(),x.length&&x[0]===c[0]?ta(x,t,m):[]});function qf(c,m){return c==null?"":wd.call(c,m)}function ks(c){var m=c==null?0:c.length;return m?c[m-1]:t}function Pl(c,m,x){var D=c==null?0:c.length;if(!D)return-1;var G=D;return x!==t&&(G=wn(x),G=G<0?ei(D+G,0):Ai(G,D-1)),m===m?Bc(c,m,G):Kl(c,mh,G,!0)}function Tf(c,m){return c&&c.length?Go(c,wn(m)):t}var xg=cn(Bd);function Bd(c,m){return c&&c.length&&m&&m.length?Mr(c,m):c}function Wm(c,m,x){return c&&c.length&&m&&m.length?Mr(c,m,sn(x,2)):c}function Ec(c,m,x){return c&&c.length&&m&&m.length?Mr(c,m,t,x):c}var Pd=Bn(function(c,m){var x=c==null?0:c.length,D=Hh(c,m);return vs(c,cr(m,function(G){return ja(G,x)?+G:G}).sort(_o)),D});function ra(c,m){var x=[];if(!(c&&c.length))return x;var D=-1,G=[],K=c.length;for(m=sn(m,3);++D<K;){var ae=c[D];m(ae,D,c)&&(x.push(ae),G.push(D))}return vs(c,G),x}function Ea(c){return c==null?c:nu.call(c)}function u_(c,m,x){var D=c==null?0:c.length;return D?(x&&typeof x!="number"&&Pr(c,m,x)?(m=0,x=D):(m=m==null?0:wn(m),x=x===t?D:wn(x)),Bt(c,m,x)):[]}function Qf(c,m){return Wr(c,m)}function u0(c,m,x){return Zu(c,m,sn(x,2))}function hv(c,m){var x=c==null?0:c.length;if(x){var D=Wr(c,m);if(D<x&&xa(c[D],m))return D}return-1}function Np(c,m){return Wr(c,m,!0)}function Sf(c,m,x){return Zu(c,m,sn(x,2),!0)}function c0(c,m){var x=c==null?0:c.length;if(x){var D=Wr(c,m,!0)-1;if(xa(c[D],m))return D}return-1}function Ef(c){return c&&c.length?Wh(c):[]}function h0(c,m){return c&&c.length?Wh(c,sn(m,2)):[]}function Zf(c){var m=c==null?0:c.length;return m?Bt(c,1,m):[]}function d0(c,m,x){return c&&c.length?(m=x||m===t?1:wn(m),Bt(c,0,m<0?0:m)):[]}function c_(c,m,x){var D=c==null?0:c.length;return D?(m=x||m===t?1:wn(m),m=D-m,Bt(c,m<0?0:m,D)):[]}function em(c,m){return c&&c.length?dl(c,sn(m,3),!1,!0):[]}function hp(c,m){return c&&c.length?dl(c,sn(m,3)):[]}var h_=cn(function(c){return ji(Yr(c,1,Kr,!0))}),Dy=cn(function(c){var m=ks(c);return Kr(m)&&(m=t),ji(Yr(c,1,Kr,!0),sn(m,2))}),p0=cn(function(c){var m=ks(c);return m=typeof m=="function"?m:t,ji(Yr(c,1,Kr,!0),t,m)});function f0(c){return c&&c.length?ji(c):[]}function Bp(c,m){return c&&c.length?ji(c,sn(m,2)):[]}function Pn(c,m){return m=typeof m=="function"?m:t,c&&c.length?ji(c,t,m):[]}function th(c){if(!(c&&c.length))return[];var m=0;return c=Gi(c,function(x){if(Kr(x))return m=ei(x.length,m),!0}),Jl(m,function(x){return cr(c,ai(x))})}function xf(c,m){if(!(c&&c.length))return[];var x=th(c);return m==null?x:cr(x,function(D){return zn(m,t,D)})}var ia=cn(function(c,m){return Kr(c)?Ho(c,m):[]}),d_=cn(function(c){return vc(Gi(c,Kr))}),m0=cn(function(c){var m=ks(c);return Kr(m)&&(m=t),vc(Gi(c,Kr),sn(m,2))}),tm=cn(function(c){var m=ks(c);return m=typeof m=="function"?m:t,vc(Gi(c,Kr),t,m)}),Ny=cn(th);function dv(c,m){return ec(c||[],m||[],Co)}function nh(c,m){return ec(c||[],m||[],mi)}var bo=cn(function(c){var m=c.length,x=m>1?c[m-1]:t;return x=typeof x=="function"?(c.pop(),x):t,xf(c,x)});function ku(c){var m=Y(c);return m.__chain__=!0,m}function wg(c,m){return m(c),c}function Pp(c,m){return m(c)}var Yh=Bn(function(c){var m=c.length,x=m?c[0]:0,D=this.__wrapped__,G=function(K){return Hh(K,c)};return m>1||this.__actions__.length||!(D instanceof dn)||!ja(x)?this.thru(G):(D=D.slice(x,+x+(m?1:0)),D.__actions__.push({func:Pp,args:[G],thisArg:t}),new xr(D,this.__chain__).thru(function(K){return m&&!K.length&&K.push(t),K}))});function nm(){return ku(this)}function Fp(){return new xr(this.value(),this.__chain__)}function Up(){this.__values__===t&&(this.__values__=yv(this.value()));var c=this.__index__>=this.__values__.length,m=c?t:this.__values__[this.__index__++];return{done:c,value:m}}function wf(){return this}function fd(c){for(var m,x=this;x instanceof pa;){var D=Od(x);D.__index__=0,D.__values__=t,m?G.__wrapped__=D:m=D;var G=D;x=x.__wrapped__}return G.__wrapped__=c,m}function dp(){var c=this.__wrapped__;if(c instanceof dn){var m=c;return this.__actions__.length&&(m=new dn(this)),m=m.reverse(),m.__actions__.push({func:Pp,args:[Ea],thisArg:t}),new xr(m,this.__chain__)}return this.thru(Ea)}function Vm(){return Kc(this.__wrapped__,this.__actions__)}var pv=va(function(c,m,x){Xn.call(c,x)?++c[x]:zo(c,x,1)});function $g(c,m,x){var D=Mn(c)?Su:$u;return x&&Pr(c,m,x)&&(m=t),D(c,sn(m,3))}function Fd(c,m){var x=Mn(c)?Gi:mc;return x(c,sn(m,3))}var ki=M(Ld),rm=M(Dd);function jm(c,m){return Yr(bi(c,m),1)}function Cg(c,m){return Yr(bi(c,m),Oe)}function fv(c,m,x){return x=x===t?1:wn(x),Yr(bi(c,m),x)}function Xm(c,m){var x=Mn(c)?Xr:Ao;return x(c,sn(m,3))}function $f(c,m){var x=Mn(c)?od:sp;return x(c,sn(m,3))}var Ym=va(function(c,m,x){Xn.call(c,x)?c[x].push(m):zo(c,x,[m])});function zp(c,m,x,D){c=zi(c)?c:fp(c),x=x&&!D?wn(x):0;var G=c.length;return x<0&&(x=ei(G+x,0)),um(c)?x<=G&&c.indexOf(m,x)>-1:!!G&&Is(c,m,x)>-1}var Hp=cn(function(c,m,x){var D=-1,G=typeof m=="function",K=zi(c)?Ne(c.length):[];return Ao(c,function(ae){K[++D]=G?zn(m,ae,x):Ln(ae,m,x)}),K}),im=va(function(c,m,x){zo(c,x,m)});function bi(c,m){var x=Mn(c)?cr:Cu;return x(c,sn(m,3))}function Gp(c,m,x,D){return c==null?[]:(Mn(m)||(m=m==null?[]:[m]),x=D?t:x,Mn(x)||(x=x==null?[]:[x]),qu(c,m,x))}var sm=va(function(c,m,x){c[x?0:1].push(m)},function(){return[[],[]]});function om(c,m,x){var D=Mn(c)?ad:so,G=arguments.length<3;return D(c,sn(m,4),x,G,Ao)}function Cf(c,m,x){var D=Mn(c)?tp:so,G=arguments.length<3;return D(c,sn(m,4),x,G,sp)}function Ag(c,m){var x=Mn(c)?Gi:mc;return x(c,xt(sn(m,3)))}function v(c){var m=Mn(c)?ll:jc;return m(c)}function T(c,m,x){(x?Pr(c,m,x):m===t)?m=1:m=wn(m);var D=Mn(c)?fc:bn;return D(c,m)}function R(c){var m=Mn(c)?gf:Ol;return m(c)}function F(c){if(c==null)return 0;if(zi(c))return um(c)?ns(c):c.length;var m=us(c);return m==it||m==mt?c.size:co(c).length}function X(c,m,x){var D=Mn(c)?Lc:hl;return x&&Pr(c,m,x)&&(m=t),D(c,sn(m,3))}var Z=cn(function(c,m){if(c==null)return[];var x=m.length;return x>1&&Pr(c,m[0],m[1])?m=[]:x>2&&Pr(m[0],m[1],m[2])&&(m=[m[0]]),qu(c,Yr(m,1),[])}),ye=Fi||function(){return br.Date.now()};function Xe(c,m){if(typeof m!="function")throw new yi(l);return c=wn(c),function(){if(--c<1)return m.apply(this,arguments)}}function st(c,m,x){return m=x?t:m,m=c&&m==null?c.length:m,we(c,H,t,t,t,t,m)}function Lt(c,m){var x;if(typeof m!="function")throw new yi(l);return c=wn(c),function(){return--c>0&&(x=m.apply(this,arguments)),c<=1&&(m=t),x}}var qt=cn(function(c,m,x){var D=I;if(x.length){var G=Ps(x,xh(qt));D|=z}return we(c,D,m,x,G)}),ln=cn(function(c,m,x){var D=I|L;if(x.length){var G=Ps(x,xh(ln));D|=z}return we(m,D,c,x,G)});function nn(c,m,x){m=x?t:m;var D=we(c,P,t,t,t,t,t,m);return D.placeholder=nn.placeholder,D}function kn(c,m,x){m=x?t:m;var D=we(c,N,t,t,t,t,t,m);return D.placeholder=kn.placeholder,D}function Kn(c,m,x){var D,G,K,ae,fe,Ee,Ze=0,et=!1,ut=!1,Rt=!0;if(typeof c!="function")throw new yi(l);m=Xi(m)||0,ri(x)&&(et=!!x.leading,ut="maxWait"in x,K=ut?ei(Xi(x.maxWait)||0,m):K,Rt="trailing"in x?!!x.trailing:Rt);function Vt(gi){var Ul=D,$c=G;return D=G=t,Ze=gi,ae=c.apply($c,Ul),ae}function hn(gi){return Ze=gi,fe=up(Gn,m),et?Vt(gi):ae}function In(gi){var Ul=gi-Ee,$c=gi-Ze,Av=m-Ul;return ut?Ai(Av,K-$c):Av}function un(gi){var Ul=gi-Ee,$c=gi-Ze;return Ee===t||Ul>=m||Ul<0||ut&&$c>=K}function Gn(){var gi=ye();if(un(gi))return Jn(gi);fe=up(Gn,In(gi))}function Jn(gi){return fe=t,Rt&&D?Vt(gi):(D=G=t,ae)}function oa(){fe!==t&&Mu(fe),Ze=0,D=Ee=G=fe=t}function Qs(){return fe===t?ae:Jn(ye())}function Ls(){var gi=ye(),Ul=un(gi);if(D=arguments,G=this,Ee=gi,Ul){if(fe===t)return hn(Ee);if(ut)return Mu(fe),fe=up(Gn,m),Vt(Ee)}return fe===t&&(fe=up(Gn,m)),ae}return Ls.cancel=oa,Ls.flush=Qs,Ls}var Zn=cn(function(c,m){return Gh(c,1,m)}),Ro=cn(function(c,m,x){return Gh(c,Xi(m)||0,x)});function wt(c){return we(c,Q)}function ht(c,m){if(typeof c!="function"||m!=null&&typeof m!="function")throw new yi(l);var x=function(){var D=arguments,G=m?m.apply(this,D):D[0],K=x.cache;if(K.has(G))return K.get(G);var ae=c.apply(this,D);return x.cache=K.set(G,ae)||K,ae};return x.cache=new(ht.Cache||Us),x}ht.Cache=Us;function xt(c){if(typeof c!="function")throw new yi(l);return function(){var m=arguments;switch(m.length){case 0:return!c.call(this);case 1:return!c.call(this,m[0]);case 2:return!c.call(this,m[0],m[1]);case 3:return!c.call(this,m[0],m[1],m[2])}return!c.apply(this,m)}}function yn(c){return Lt(2,c)}var sr=Eh(function(c,m){m=m.length==1&&Mn(m[0])?cr(m[0],Hr(sn())):cr(Yr(m,1),Hr(sn()));var x=m.length;return cn(function(D){for(var G=-1,K=Ai(D.length,x);++G<K;)D[G]=m[G].call(this,D[G]);return zn(c,this,D)})}),Qn=cn(function(c,m){var x=Ps(m,xh(Qn));return we(c,z,t,m,x)}),dr=cn(function(c,m){var x=Ps(m,xh(dr));return we(c,W,t,m,x)}),Ir=Bn(function(c,m){return we(c,U,t,t,t,m)});function Fl(c,m){if(typeof c!="function")throw new yi(l);return m=m===t?m:wn(m),cn(c,m)}function cs(c,m){if(typeof c!="function")throw new yi(l);return m=m==null?0:ei(wn(m),0),cn(function(x){var D=x[m],G=mo(x,0,m);return D&&Jo(G,D),zn(c,this,G)})}function Wp(c,m,x){var D=!0,G=!0;if(typeof c!="function")throw new yi(l);return ri(x)&&(D="leading"in x?!!x.leading:D,G="trailing"in x?!!x.trailing:G),Kn(c,m,{leading:D,maxWait:m,trailing:G})}function g0(c){return st(c,1)}function Ou(c,m){return Qn(Ks(m),c)}function Ud(){if(!arguments.length)return[];var c=arguments[0];return Mn(c)?c:[c]}function G1(c){return Ii(c,E)}function FE(c,m){return m=typeof m=="function"?m:t,Ii(c,E,m)}function UE(c){return Ii(c,y|E)}function am(c,m){return m=typeof m=="function"?m:t,Ii(c,y|E,m)}function By(c,m){return m==null||Wc(c,m,Ti(m))}function xa(c,m){return c===m||c!==c&&m!==m}var W1=_n(Ga),Mg=_n(function(c,m){return c>=m}),zd=qn(function(){return arguments}())?qn:function(c){return ui(c)&&Xn.call(c,"callee")&&!dc.call(c,"callee")},Mn=Ne.isArray,mv=bu?Hr(bu):kr;function zi(c){return c!=null&&wh(c.length)&&!xc(c)}function Kr(c){return ui(c)&&zi(c)}function Py(c){return c===!0||c===!1||ui(c)&&fi(c)==tt}var rh=xd||fm,V1=$o?Hr($o):ti;function pp(c){return ui(c)&&c.nodeType===1&&!Fr(c)}function p_(c){if(c==null)return!0;if(zi(c)&&(Mn(c)||typeof c=="string"||typeof c.splice=="function"||rh(c)||Wd(c)||zd(c)))return!c.length;var m=us(c);if(m==it||m==mt)return!c.size;if(Sc(c))return!co(c).length;for(var x in c)if(Xn.call(c,x))return!1;return!0}function Hi(c,m){return Jr(c,m)}function ko(c,m,x){x=typeof x=="function"?x:t;var D=x?x(c,m):t;return D===t?Jr(c,m,t,x):!!D}function _0(c){if(!ui(c))return!1;var m=fi(c);return m==Pe||m==ct||typeof c.message=="string"&&typeof c.name=="string"&&!Fr(c)}function gv(c){return typeof c=="number"&&Cl(c)}function xc(c){if(!ri(c))return!1;var m=fi(c);return m==Ce||m==je||m==rt||m==kt}function v0(c){return typeof c=="number"&&c==wn(c)}function wh(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=J}function ri(c){var m=typeof c;return c!=null&&(m=="object"||m=="function")}function ui(c){return c!=null&&typeof c=="object"}var Kh=Tu?Hr(Tu):as;function Cs(c,m){return c===m||Qi(c,m,Vf(m))}function lm(c,m,x){return x=typeof x=="function"?x:t,Qi(c,m,Vf(m),x)}function _v(c){return Hd(c)&&c!=+c}function vv(c){if(a_(c))throw new en(o);return ou(c)}function y0(c){return c===null}function zE(c){return c==null}function Hd(c){return typeof c=="number"||ui(c)&&fi(c)==ot}function Fr(c){if(!ui(c)||fi(c)!=It)return!1;var m=Fa(c);if(m===null)return!0;var x=Xn.call(m,"constructor")&&m.constructor;return typeof x=="function"&&x instanceof x&&wu.call(x)==Pa}var Gd=nl?Hr(nl):Ku;function Ya(c){return v0(c)&&c>=-J&&c<=J}var f_=Bi?Hr(Bi):_c;function um(c){return typeof c=="string"||!Mn(c)&&ui(c)&&fi(c)==xe}function sa(c){return typeof c=="symbol"||ui(c)&&fi(c)==re}var Wd=wi?Hr(wi):Ju;function j1(c){return c===t}function X1(c){return ui(c)&&us(c)==dt}function Jh(c){return ui(c)&&fi(c)==bt}var Fy=_n(_a),Vp=_n(function(c,m){return c<=m});function yv(c){if(!c)return[];if(zi(c))return um(c)?Nr(c):ni(c);if(Qo&&c[Qo])return Lh(c[Qo]());var m=us(c),x=m==it?Gu:m==mt?Zl:fp;return x(c)}function wc(c){if(!c)return c===0?c:0;if(c=Xi(c),c===Oe||c===-Oe){var m=c<0?-1:1;return m*se}return c===c?c:0}function wn(c){var m=wc(c),x=m%1;return m===m?x?m-x:m:0}function b0(c){return c?za(wn(c),0,he):0}function Xi(c){if(typeof c=="number")return c;if(sa(c))return ie;if(ri(c)){var m=typeof c.valueOf=="function"?c.valueOf():c;c=ri(m)?m+"":m}if(typeof c!="string")return c===0?c:+c;c=Oh(c);var x=Li.test(c);return x||jr.test(c)?Oa(c.slice(2),x?2:8):Rr.test(c)?ie:+c}function Uy(c){return ls(c,es(c))}function lt(c){return c?za(wn(c),-J,J):c===0?c:0}function er(c){return c==null?"":si(c)}var m_=ya(function(c,m){if(Sc(m)||zi(m)){ls(m,Ti(m),c);return}for(var x in m)Xn.call(m,x)&&Co(c,x,m[x])}),g_=ya(function(c,m){ls(m,es(m),c)}),qh=ya(function(c,m,x,D){ls(m,es(m),c,D)}),Km=ya(function(c,m,x,D){ls(m,Ti(m),c,D)}),bv=Bn(Hh);function T0(c,m){var x=Es(c);return m==null?x:ss(x,m)}var zy=cn(function(c,m){c=mn(c);var x=-1,D=m.length,G=D>2?m[2]:t;for(G&&Pr(m[0],m[1],G)&&(D=1);++x<D;)for(var K=m[x],ae=es(K),fe=-1,Ee=ae.length;++fe<Ee;){var Ze=ae[fe],et=c[Ze];(et===t||xa(et,Pi[Ze])&&!Xn.call(c,Ze))&&(c[Ze]=K[Ze])}return c}),Y1=cn(function(c){return c.push(t,nt),zn(Qh,t,c)});function Vd(c,m){return Sd(c,sn(m,3),os)}function Hy(c,m){return Sd(c,sn(m,3),Ha)}function __(c,m){return c==null?c:su(c,sn(m,3),es)}function Gy(c,m){return c==null?c:Yu(c,sn(m,3),es)}function K1(c,m){return c&&os(c,sn(m,3))}function J1(c,m){return c&&Ha(c,sn(m,3))}function q1(c){return c==null?[]:xs(c,Ti(c))}function Q1(c){return c==null?[]:xs(c,es(c))}function cm(c,m,x){var D=c==null?t:ws(c,m);return D===t?x:D}function Wy(c,m){return c!=null&&bg(c,m,gc)}function hm(c,m){return c!=null&&bg(c,m,op)}var Vy=ue(function(c,m,x){m!=null&&typeof m.toString!="function"&&(m=Fs.call(m)),c[m]=x},w_(Oo)),v_=ue(function(c,m,x){m!=null&&typeof m.toString!="function"&&(m=Fs.call(m)),Xn.call(c,m)?c[m].push(x):c[m]=[x]},sn),y_=cn(Ln);function Ti(c){return zi(c)?gn(c):co(c)}function es(c){return zi(c)?gn(c,!0):dd(c)}function Z1(c,m){var x={};return m=sn(m,3),os(c,function(D,G,K){zo(x,m(D,G,K),D)}),x}function Af(c,m){var x={};return m=sn(m,3),os(c,function(D,G,K){zo(x,G,m(D,G,K))}),x}var dm=ya(function(c,m,x){po(c,m,x)}),Qh=ya(function(c,m,x,D){po(c,m,x,D)}),eT=Bn(function(c,m){var x={};if(c==null)return x;var D=!1;m=cr(m,function(K){return K=na(K,c),D||(D=K.length>1),K}),ls(c,wr(c),x),D&&(x=Ii(x,y|b|E,Ut));for(var G=m.length;G--;)Yc(x,m[G]);return x});function S0(c,m){return b_(c,xt(sn(m)))}var Qt=Bn(function(c,m){return c==null?{}:Qu(c,m)});function b_(c,m){if(c==null)return{};var x=cr(wr(c),function(D){return[D]});return m=sn(m),Th(c,x,function(D,G){return m(D,G[0])})}function HE(c,m,x){m=na(m,c);var D=-1,G=m.length;for(G||(G=1,c=t);++D<G;){var K=c==null?t:c[vo(m[D])];K===t&&(D=G,K=x),c=xc(K)?K.call(c):K}return c}function GE(c,m,x){return c==null?c:mi(c,m,x)}function WE(c,m,x,D){return D=typeof D=="function"?D:t,c==null?c:mi(c,m,x,D)}var T_=St(Ti),E0=St(es);function hs(c,m,x){var D=Mn(c),G=D||rh(c)||Wd(c);if(m=sn(m,4),x==null){var K=c&&c.constructor;G?x=D?new K:[]:ri(c)?x=xc(K)?Es(Fa(c)):{}:x={}}return(G?Xr:os)(c,function(ae,fe,Ee){return m(x,ae,fe,Ee)}),x}function Ig(c,m){return c==null?!0:Yc(c,m)}function Tv(c,m,x){return c==null?c:fo(c,m,Ks(x))}function VE(c,m,x,D){return D=typeof D=="function"?D:t,c==null?c:fo(c,m,Ks(x),D)}function fp(c){return c==null?[]:Ci(c,Ti(c))}function mp(c){return c==null?[]:Ci(c,es(c))}function S_(c,m,x){return x===t&&(x=m,m=t),x!==t&&(x=Xi(x),x=x===x?x:0),m!==t&&(m=Xi(m),m=m===m?m:0),za(Xi(c),m,x)}function Os(c,m,x){return m=wc(m),x===t?(x=m,m=0):x=wc(x),c=Xi(c),bh(c,m,x)}function tT(c,m,x){if(x&&typeof x!="boolean"&&Pr(c,m,x)&&(m=x=t),x===t&&(typeof m=="boolean"?(x=m,m=t):typeof c=="boolean"&&(x=c,c=t)),c===t&&m===t?(c=0,m=1):(c=wc(c),m===t?(m=c,c=0):m=wc(m)),c>m){var D=c;c=m,m=D}if(x||c%1||m%1){var G=Al();return Ai(c+G*(m-c+ph("1e-"+((G+"").length-1))),m)}return Rs(c,m)}var jy=h(function(c,m,x){return m=m.toLowerCase(),c+(x?pm(m):m)});function pm(c){return C0(er(c).toLowerCase())}function Sv(c){return c=er(c),c&&c.replace(Ia,rp).replace(ms,"")}function Xy(c,m,x){c=er(c),m=si(m);var D=c.length;x=x===t?D:za(wn(x),0,D);var G=x;return x-=m.length,x>=0&&c.slice(x,G)==m}function Yy(c){return c=er(c),c&&Lr.test(c)?c.replace(Dn,ip):c}function Ky(c){return c=er(c),c&&Ft.test(c)?c.replace(at,"\\$&"):c}var E_=h(function(c,m,x){return c+(x?"-":"")+m.toLowerCase()}),jE=h(function(c,m,x){return c+(x?" ":"")+m.toLowerCase()}),nT=w("toLowerCase");function XE(c,m,x){c=er(c),m=wn(m);var D=m?ns(c):0;if(!m||D>=m)return c;var G=(m-D)/2;return Et(tu(G),x)+c+Et(Vu(G),x)}function YE(c,m,x){c=er(c),m=wn(m);var D=m?ns(c):0;return m&&D<m?c+Et(m-D,x):c}function jp(c,m,x){c=er(c),m=wn(m);var D=m?ns(c):0;return m&&D<m?Et(m-D,x)+c:c}function Jy(c,m,x){return x||m==null?m=0:m&&(m=+m),Rp(er(c).replace(rn,""),m||0)}function qy(c,m,x){return(x?Pr(c,m,x):m===t)?m=1:m=wn(m),Hs(er(c),m)}function x0(){var c=arguments,m=er(c[0]);return c.length<3?m:m.replace(c[1],c[2])}var rT=h(function(c,m,x){return c+(x?"_":"")+m.toLowerCase()});function Qy(c,m,x){return x&&typeof x!="number"&&Pr(c,m,x)&&(m=x=t),x=x===t?he:x>>>0,x?(c=er(c),c&&(typeof m=="string"||m!=null&&!Gd(m))&&(m=si(m),!m&&rl(c))?mo(Nr(c),0,x):c.split(m,x)):[]}var x_=h(function(c,m,x){return c+(x?" ":"")+C0(m)});function iT(c,m,x){return c=er(c),x=x==null?0:za(wn(x),0,c.length),m=si(m),c.slice(x,x+m.length)==m}function Zy(c,m,x){var D=Y.templateSettings;x&&Pr(c,m,x)&&(m=t),c=er(c),m=qh({},m,D,Re);var G=qh({},m.imports,D.imports,Re),K=Ti(G),ae=Ci(G,K),fe,Ee,Ze=0,et=m.interpolate||wo,ut="__p += '",Rt=Br((m.escape||wo).source+"|"+et.source+"|"+(et===ir?tr:wo).source+"|"+(m.evaluate||wo).source+"|$","g"),Vt="//# sourceURL="+(Xn.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++vu+"]")+`
`;c.replace(Rt,function(un,Gn,Jn,oa,Qs,Ls){return Jn||(Jn=oa),ut+=c.slice(Ze,Ls).replace(jl,ld),Gn&&(fe=!0,ut+=`' +
__e(`+Gn+`) +
'`),Qs&&(Ee=!0,ut+=`';
`+Qs+`;
__p += '`),Jn&&(ut+=`' +
((__t = (`+Jn+`)) == null ? '' : __t) +
'`),Ze=Ls+un.length,un}),ut+=`';
`;var hn=Xn.call(m,"variable")&&m.variable;if(!hn)ut=`with (obj) {
`+ut+`
}
`;else if(zt.test(hn))throw new en(u);ut=(Ee?ut.replace(Yt,""):ut).replace(_t,"$1").replace(Kt,"$1;"),ut="function("+(hn||"obj")+`) {
`+(hn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(fe?", __e = _.escape":"")+(Ee?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ut+`return __p
}`;var In=A0(function(){return Cn(K,Vt+"return "+ut).apply(t,ae)});if(In.source=ut,_0(In))throw In;return In}function Zh(c){return er(c).toLowerCase()}function Mf(c){return er(c).toUpperCase()}function sT(c,m,x){if(c=er(c),c&&(x||m===t))return Oh(c);if(!c||!(m=si(m)))return c;var D=Nr(c),G=Nr(m),K=Wi(D,G),ae=ca(D,G)+1;return mo(D,K,ae).join("")}function Ev(c,m,x){if(c=er(c),c&&(x||m===t))return c.slice(0,wl(c)+1);if(!c||!(m=si(m)))return c;var D=Nr(c),G=ca(D,Nr(m))+1;return mo(D,0,G).join("")}function oT(c,m,x){if(c=er(c),c&&(x||m===t))return c.replace(rn,"");if(!c||!(m=si(m)))return c;var D=Nr(c),G=Wi(D,Nr(m));return mo(D,G).join("")}function w0(c,m){var x=ne,D=oe;if(ri(m)){var G="separator"in m?m.separator:G;x="length"in m?wn(m.length):x,D="omission"in m?si(m.omission):D}c=er(c);var K=c.length;if(rl(c)){var ae=Nr(c);K=ae.length}if(x>=K)return c;var fe=x-ns(D);if(fe<1)return D;var Ee=ae?mo(ae,0,fe).join(""):c.slice(0,fe);if(G===t)return Ee+D;if(ae&&(fe+=Ee.length-fe),Gd(G)){if(c.slice(fe).search(G)){var Ze,et=Ee;for(G.global||(G=Br(G.source,er(yr.exec(G))+"g")),G.lastIndex=0;Ze=G.exec(et);)var ut=Ze.index;Ee=Ee.slice(0,ut===t?fe:ut)}}else if(c.indexOf(si(G),fe)!=fe){var Rt=Ee.lastIndexOf(G);Rt>-1&&(Ee=Ee.slice(0,Rt))}return Ee+D}function xv(c){return c=er(c),c&&ii.test(c)?c.replace(Xt,Ba):c}var $0=h(function(c,m,x){return c+(x?" ":"")+m.toUpperCase()}),C0=w("toUpperCase");function eb(c,m,x){return c=er(c),m=x?t:m,m===t?Dc(c)?gh(c):ff(c):c.match(m)||[]}var A0=cn(function(c,m){try{return zn(c,t,m)}catch(x){return _0(x)?x:new en(x)}}),tb=Bn(function(c,m){return Xr(m,function(x){x=vo(x),zo(c,x,qt(c[x],c))}),c});function nb(c){var m=c==null?0:c.length,x=sn();return c=m?cr(c,function(D){if(typeof D[1]!="function")throw new yi(l);return[x(D[0]),D[1]]}):[],cn(function(D){for(var G=-1;++G<m;){var K=c[G];if(zn(K[0],this,D))return zn(K[1],this,D)}})}function KE(c){return Md(Ii(c,y))}function w_(c){return function(){return c}}function JE(c,m){return c==null||c!==c?m:c}var aT=B(),qE=B(!0);function Oo(c){return c}function Yi(c){return Ys(typeof c=="function"?c:Ii(c,y))}function If(c){return Au(Ii(c,y))}function $_(c,m){return ho(c,Ii(m,y))}var wv=cn(function(c,m){return function(x){return Ln(x,c,m)}}),Rf=cn(function(c,m){return function(x){return Ln(c,x,m)}});function C_(c,m,x){var D=Ti(m),G=xs(m,D);x==null&&!(ri(m)&&(G.length||!D.length))&&(x=m,m=c,c=this,G=xs(m,Ti(m)));var K=!(ri(x)&&"chain"in x)||!!x.chain,ae=xc(c);return Xr(G,function(fe){var Ee=m[fe];c[fe]=Ee,ae&&(c.prototype[fe]=function(){var Ze=this.__chain__;if(K||Ze){var et=c(this.__wrapped__),ut=et.__actions__=ni(this.__actions__);return ut.push({func:Ee,args:arguments,thisArg:c}),et.__chain__=Ze,et}return Ee.apply(c,Jo([this.value()],arguments))})}),c}function M0(){return br._===this&&(br._=Nh),this}function I0(){}function lT(c){return c=wn(c),cn(function(m){return Go(m,c)})}var rb=Qe(cr),QE=Qe(Su),ib=Qe(Lc);function A_(c){return Ta(c)?ai(vo(c)):Sh(c)}function uT(c){return function(m){return c==null?t:ws(c,m)}}var sb=an(),$v=an(!0);function R0(){return[]}function fm(){return!1}function ob(){return{}}function ab(){return""}function lb(){return!0}function ub(c,m){if(c=wn(c),c<1||c>J)return[];var x=he,D=Ai(c,he);m=sn(m),c-=he;for(var G=Jl(D,m);++x<c;)m(x);return G}function Jm(c){return Mn(c)?cr(c,vo):sa(c)?[c]:ni(a0(er(c)))}function cb(c){var m=++ha;return er(c)+m}var hb=Me(function(c,m){return c+m},0),db=pn("ceil"),pb=Me(function(c,m){return c/m},1),fb=pn("floor");function Yn(c){return c&&c.length?Rl(c,Oo,Ga):t}function cT(c,m){return c&&c.length?Rl(c,sn(m,2),Ga):t}function hT(c){return Da(c,Oo)}function Rg(c,m){return Da(c,sn(m,2))}function M_(c){return c&&c.length?Rl(c,Oo,_a):t}function k0(c,m){return c&&c.length?Rl(c,sn(m,2),_a):t}var dT=Me(function(c,m){return c*m},1),Cv=pn("round"),pT=Me(function(c,m){return c-m},0);function fT(c){return c&&c.length?Fo(c,Oo):0}function mT(c,m){return c&&c.length?Fo(c,sn(m,2)):0}return Y.after=Xe,Y.ary=st,Y.assign=m_,Y.assignIn=g_,Y.assignInWith=qh,Y.assignWith=Km,Y.at=bv,Y.before=Lt,Y.bind=qt,Y.bindAll=tb,Y.bindKey=ln,Y.castArray=Ud,Y.chain=ku,Y.chunk=Kf,Y.compact=Iu,Y.concat=l0,Y.cond=nb,Y.conforms=KE,Y.constant=w_,Y.countBy=pv,Y.create=T0,Y.curry=nn,Y.curryRight=kn,Y.debounce=Kn,Y.defaults=zy,Y.defaultsDeep=Y1,Y.defer=Zn,Y.delay=Ro,Y.difference=Vo,Y.differenceBy=Zi,Y.differenceWith=cu,Y.drop=ml,Y.dropRight=Ru,Y.dropRightWhile=hu,Y.dropWhile=bf,Y.fill=Bl,Y.filter=Fd,Y.flatMap=jm,Y.flatMapDeep=Cg,Y.flatMapDepth=fv,Y.flatten=cp,Y.flattenDeep=Eg,Y.flattenDepth=Jf,Y.flip=wt,Y.flow=aT,Y.flowRight=qE,Y.fromPairs=Zc,Y.functions=q1,Y.functionsIn=Q1,Y.groupBy=Ym,Y.initial=Nd,Y.intersection=Hm,Y.intersectionBy=Gm,Y.intersectionWith=yo,Y.invert=Vy,Y.invertBy=v_,Y.invokeMap=Hp,Y.iteratee=Yi,Y.keyBy=im,Y.keys=Ti,Y.keysIn=es,Y.map=bi,Y.mapKeys=Z1,Y.mapValues=Af,Y.matches=If,Y.matchesProperty=$_,Y.memoize=ht,Y.merge=dm,Y.mergeWith=Qh,Y.method=wv,Y.methodOf=Rf,Y.mixin=C_,Y.negate=xt,Y.nthArg=lT,Y.omit=eT,Y.omitBy=S0,Y.once=yn,Y.orderBy=Gp,Y.over=rb,Y.overArgs=sr,Y.overEvery=QE,Y.overSome=ib,Y.partial=Qn,Y.partialRight=dr,Y.partition=sm,Y.pick=Qt,Y.pickBy=b_,Y.property=A_,Y.propertyOf=uT,Y.pull=xg,Y.pullAll=Bd,Y.pullAllBy=Wm,Y.pullAllWith=Ec,Y.pullAt=Pd,Y.range=sb,Y.rangeRight=$v,Y.rearg=Ir,Y.reject=Ag,Y.remove=ra,Y.rest=Fl,Y.reverse=Ea,Y.sampleSize=T,Y.set=GE,Y.setWith=WE,Y.shuffle=R,Y.slice=u_,Y.sortBy=Z,Y.sortedUniq=Ef,Y.sortedUniqBy=h0,Y.split=Qy,Y.spread=cs,Y.tail=Zf,Y.take=d0,Y.takeRight=c_,Y.takeRightWhile=em,Y.takeWhile=hp,Y.tap=wg,Y.throttle=Wp,Y.thru=Pp,Y.toArray=yv,Y.toPairs=T_,Y.toPairsIn=E0,Y.toPath=Jm,Y.toPlainObject=Uy,Y.transform=hs,Y.unary=g0,Y.union=h_,Y.unionBy=Dy,Y.unionWith=p0,Y.uniq=f0,Y.uniqBy=Bp,Y.uniqWith=Pn,Y.unset=Ig,Y.unzip=th,Y.unzipWith=xf,Y.update=Tv,Y.updateWith=VE,Y.values=fp,Y.valuesIn=mp,Y.without=ia,Y.words=eb,Y.wrap=Ou,Y.xor=d_,Y.xorBy=m0,Y.xorWith=tm,Y.zip=Ny,Y.zipObject=dv,Y.zipObjectDeep=nh,Y.zipWith=bo,Y.entries=T_,Y.entriesIn=E0,Y.extend=g_,Y.extendWith=qh,C_(Y,Y),Y.add=hb,Y.attempt=A0,Y.camelCase=jy,Y.capitalize=pm,Y.ceil=db,Y.clamp=S_,Y.clone=G1,Y.cloneDeep=UE,Y.cloneDeepWith=am,Y.cloneWith=FE,Y.conformsTo=By,Y.deburr=Sv,Y.defaultTo=JE,Y.divide=pb,Y.endsWith=Xy,Y.eq=xa,Y.escape=Yy,Y.escapeRegExp=Ky,Y.every=$g,Y.find=ki,Y.findIndex=Ld,Y.findKey=Vd,Y.findLast=rm,Y.findLastIndex=Dd,Y.findLastKey=Hy,Y.floor=fb,Y.forEach=Xm,Y.forEachRight=$f,Y.forIn=__,Y.forInRight=Gy,Y.forOwn=K1,Y.forOwnRight=J1,Y.get=cm,Y.gt=W1,Y.gte=Mg,Y.has=Wy,Y.hasIn=hm,Y.head=gl,Y.identity=Oo,Y.includes=zp,Y.indexOf=eh,Y.inRange=Os,Y.invoke=y_,Y.isArguments=zd,Y.isArray=Mn,Y.isArrayBuffer=mv,Y.isArrayLike=zi,Y.isArrayLikeObject=Kr,Y.isBoolean=Py,Y.isBuffer=rh,Y.isDate=V1,Y.isElement=pp,Y.isEmpty=p_,Y.isEqual=Hi,Y.isEqualWith=ko,Y.isError=_0,Y.isFinite=gv,Y.isFunction=xc,Y.isInteger=v0,Y.isLength=wh,Y.isMap=Kh,Y.isMatch=Cs,Y.isMatchWith=lm,Y.isNaN=_v,Y.isNative=vv,Y.isNil=zE,Y.isNull=y0,Y.isNumber=Hd,Y.isObject=ri,Y.isObjectLike=ui,Y.isPlainObject=Fr,Y.isRegExp=Gd,Y.isSafeInteger=Ya,Y.isSet=f_,Y.isString=um,Y.isSymbol=sa,Y.isTypedArray=Wd,Y.isUndefined=j1,Y.isWeakMap=X1,Y.isWeakSet=Jh,Y.join=qf,Y.kebabCase=E_,Y.last=ks,Y.lastIndexOf=Pl,Y.lowerCase=jE,Y.lowerFirst=nT,Y.lt=Fy,Y.lte=Vp,Y.max=Yn,Y.maxBy=cT,Y.mean=hT,Y.meanBy=Rg,Y.min=M_,Y.minBy=k0,Y.stubArray=R0,Y.stubFalse=fm,Y.stubObject=ob,Y.stubString=ab,Y.stubTrue=lb,Y.multiply=dT,Y.nth=Tf,Y.noConflict=M0,Y.noop=I0,Y.now=ye,Y.pad=XE,Y.padEnd=YE,Y.padStart=jp,Y.parseInt=Jy,Y.random=tT,Y.reduce=om,Y.reduceRight=Cf,Y.repeat=qy,Y.replace=x0,Y.result=HE,Y.round=Cv,Y.runInContext=ve,Y.sample=v,Y.size=F,Y.snakeCase=rT,Y.some=X,Y.sortedIndex=Qf,Y.sortedIndexBy=u0,Y.sortedIndexOf=hv,Y.sortedLastIndex=Np,Y.sortedLastIndexBy=Sf,Y.sortedLastIndexOf=c0,Y.startCase=x_,Y.startsWith=iT,Y.subtract=pT,Y.sum=fT,Y.sumBy=mT,Y.template=Zy,Y.times=ub,Y.toFinite=wc,Y.toInteger=wn,Y.toLength=b0,Y.toLower=Zh,Y.toNumber=Xi,Y.toSafeInteger=lt,Y.toString=er,Y.toUpper=Mf,Y.trim=sT,Y.trimEnd=Ev,Y.trimStart=oT,Y.truncate=w0,Y.unescape=xv,Y.uniqueId=cb,Y.upperCase=$0,Y.upperFirst=C0,Y.each=Xm,Y.eachRight=$f,Y.first=gl,C_(Y,function(){var c={};return os(Y,function(m,x){Xn.call(Y.prototype,x)||(c[x]=m)}),c}(),{chain:!1}),Y.VERSION=i,Xr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){Y[c].placeholder=Y}),Xr(["drop","take"],function(c,m){dn.prototype[c]=function(x){x=x===t?1:ei(wn(x),0);var D=this.__filtered__&&!m?new dn(this):this.clone();return D.__filtered__?D.__takeCount__=Ai(x,D.__takeCount__):D.__views__.push({size:Ai(x,he),type:c+(D.__dir__<0?"Right":"")}),D},dn.prototype[c+"Right"]=function(x){return this.reverse()[c](x).reverse()}}),Xr(["filter","map","takeWhile"],function(c,m){var x=m+1,D=x==ce||x==Te;dn.prototype[c]=function(G){var K=this.clone();return K.__iteratees__.push({iteratee:sn(G,3),type:x}),K.__filtered__=K.__filtered__||D,K}}),Xr(["head","last"],function(c,m){var x="take"+(m?"Right":"");dn.prototype[c]=function(){return this[x](1).value()[0]}}),Xr(["initial","tail"],function(c,m){var x="drop"+(m?"":"Right");dn.prototype[c]=function(){return this.__filtered__?new dn(this):this[x](1)}}),dn.prototype.compact=function(){return this.filter(Oo)},dn.prototype.find=function(c){return this.filter(c).head()},dn.prototype.findLast=function(c){return this.reverse().find(c)},dn.prototype.invokeMap=cn(function(c,m){return typeof c=="function"?new dn(this):this.map(function(x){return Ln(x,c,m)})}),dn.prototype.reject=function(c){return this.filter(xt(sn(c)))},dn.prototype.slice=function(c,m){c=wn(c);var x=this;return x.__filtered__&&(c>0||m<0)?new dn(x):(c<0?x=x.takeRight(-c):c&&(x=x.drop(c)),m!==t&&(m=wn(m),x=m<0?x.dropRight(-m):x.take(m-c)),x)},dn.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},dn.prototype.toArray=function(){return this.take(he)},os(dn.prototype,function(c,m){var x=/^(?:filter|find|map|reject)|While$/.test(m),D=/^(?:head|last)$/.test(m),G=Y[D?"take"+(m=="last"?"Right":""):m],K=D||/^find/.test(m);G&&(Y.prototype[m]=function(){var ae=this.__wrapped__,fe=D?[1]:arguments,Ee=ae instanceof dn,Ze=fe[0],et=Ee||Mn(ae),ut=function(Gn){var Jn=G.apply(Y,Jo([Gn],fe));return D&&Rt?Jn[0]:Jn};et&&x&&typeof Ze=="function"&&Ze.length!=1&&(Ee=et=!1);var Rt=this.__chain__,Vt=!!this.__actions__.length,hn=K&&!Rt,In=Ee&&!Vt;if(!K&&et){ae=In?ae:new dn(this);var un=c.apply(ae,fe);return un.__actions__.push({func:Pp,args:[ut],thisArg:t}),new xr(un,Rt)}return hn&&In?c.apply(this,fe):(un=this.thru(ut),hn?D?un.value()[0]:un.value():un)})}),Xr(["pop","push","shift","sort","splice","unshift"],function(c){var m=ao[c],x=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",D=/^(?:pop|shift)$/.test(c);Y.prototype[c]=function(){var G=arguments;if(D&&!this.__chain__){var K=this.value();return m.apply(Mn(K)?K:[],G)}return this[x](function(ae){return m.apply(Mn(ae)?ae:[],G)})}}),os(dn.prototype,function(c,m){var x=Y[m];if(x){var D=x.name+"";Xn.call(Il,D)||(Il[D]=[]),Il[D].push({name:m,func:x})}}),Il[V(t,L).name]=[{name:"wrapper",func:t}],dn.prototype.clone=kp,dn.prototype.reverse=al,dn.prototype.value=Mi,Y.prototype.at=Yh,Y.prototype.chain=nm,Y.prototype.commit=Fp,Y.prototype.next=Up,Y.prototype.plant=fd,Y.prototype.reverse=dp,Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=Vm,Y.prototype.first=Y.prototype.head,Qo&&(Y.prototype[Qo]=wf),Y},hi=Ed();vi?((vi.exports=hi)._=hi,Ms._=hi):br._=hi}).call(Wl)})(qM,qM.exports);var Ore=qM.exports;const fr=YZ((n,e)=>({ip:"",blocks:{},Start:{},lines:{},hulls:{},texts:{},points:{},widgets:{},counter:0,blocklyWorkspaceXML:{},lightMode:!0,simOnly:!1,isConnected:!1,workerThread:null,blocklyWorkspace:null,llmEndpoint:"",llmAPIKey:"",llmDeployment:"",userPrompt:"",programGoals:{...Rre},llmProcessing:!1,llmMode:!1,displayLLMBlockPrompt:!1,mistyAudioList:[],mistyImageList:[],headerHeight:0,headerWidth:0,clock:new ere,tfs:{...E2},startingTfs:JSON.parse(JSON.stringify(E2)),endingTfs:JSON.parse(JSON.stringify(E2)),items:{...rre},activeModal:null,setActiveModal:t=>n(i=>({activeModal:t})),closeModal:()=>n(t=>({activeModal:null})),toggleLLMMode:t=>n({llmMode:t}),toggleLLMBlockPrompt:t=>n({displayLLMBlockPrompt:t}),toggleTheme:t=>n({lightMode:t}),getAllTasks:()=>e().programGoals,getMainTasks:()=>{let t=e().programGoals;return Object.keys(t).filter(i=>t[i].type==="task").sort((i,s)=>t[i].order-t[s].order).reduce((i,s)=>(i[s]=t[s],i),{})},setWorkerThread:t=>n({workerThread:t}),setBlocklyWorkspace:t=>n({blocklyWorkspace:t}),setAPIKey:t=>n({llmAPIKey:t}),setEndpoint:t=>n({llmEndpoint:t}),setDeployment:t=>n({llmDeployment:t}),setImageList:t=>n({mistyImageList:t}),setAudioList:t=>n({mistyAudioList:t}),setUserPrompt:t=>n({userPrompt:t}),setHeaderDimensions:(t,i)=>n({headerHeight:t,headerWidth:i}),generateProgramOutline:()=>{n({llmProcessing:!0});let t=e(),i=t.userPrompt,s=t.llmEndpoint,o=t.llmDeployment,l=t.llmAPIKey;fetch(s+"/openai/deployments/"+o+"/chat/completions?api-version=2024-02-01",{method:"POST",headers:{"Content-Type":"application/json","api-key":l},body:JSON.stringify({messages:[{role:"system",content:ire},{role:"user",content:'Give me the output for the following user prompt: "'+i+'"'}]})}).then(u=>{if(!u.ok)throw new Error(`LLM Request failed with status ${u.status}`);return u.json()}).then(u=>{console.log(u);let d=u.choices[0].message.content;d=d.length>0?d.slice(1,d.length-1):{},n({programGoals:JSON.parse(d),llmProcessing:!1,activeModal:null})}).catch(u=>{n({llmProcessing:!1}),alert(`Failed to connect to ChatGPT: ${u.message}`)})},generateProgram:()=>{n({llmProcessing:!0});let t=e(),i=t.userPrompt,s=t.llmEndpoint,o=t.llmDeployment,l=t.llmAPIKey;fetch(s+"/openai/deployments/"+o+"/chat/completions?api-version=2024-02-01",{method:"POST",headers:{"Content-Type":"application/json","api-key":l},body:JSON.stringify({messages:[{role:"system",content:kre},{role:"user",content:'Give me the output for the following user prompt: "'+i+'"'}]})}).then(u=>{if(!u.ok)throw new Error(`LLM Request failed with status ${u.status}`);return u.json()}).then(u=>{console.log(u);let d=u.choices[0].message.content;console.log(d),n({llmProcessing:!1,activeModal:null}),e().loadBlocks(JSON.parse(d),e().blocklyWorkspace)}).catch(u=>{n({llmProcessing:!1}),alert(`Failed to connect to ChatGPT: ${u.message}`)})},clearProgram:()=>n({blocks:{}}),clearProgramExceptStart:()=>n({blocks:Ore.pickBy(e().blocks,t=>t.type==="Start")}),loadBlocks:(t,i)=>{var y,b;let s=i.getBlocksByType("Start");s.length>0?e().clearProgramExceptStart():e().clearProgram();let o=s.length>0?s[0]:null,l=[],u=[],d=[t.data[0].id],p=[];for(let E=0;E<t.data.length;E++){let C=t.data[E].type;if(["face","audio"].includes(C)&&(C=t.data[E].value),!["math_number","colour_picker","text"].includes(C)&&!TZ.includes(C)){p.push(t.data[E].id);continue}let A=lg.serialization.blocks.append({type:C},i);A.type==="Start"&&(o=A),C==="math_number"&&A.getField("NUM").setValue(t.data[E].value),C==="colour_picker"&&A.getField("COLOUR").setValue(t.data[E].value),C==="text"&&A.getField("TEXT").setValue(t.data[E].value),["BasicSlider","ArmPositionSlider","SpeedSlider","TimeSlider","HeadPitchSlider","HeadRollSlider","HeadYawSlider"].includes(C)&&A.getField("FIELD_slider_value").setValue(t.data[E].value),l.push(t.data[E].id),u.push(A.id),(y=t.data[E])!=null&&y.nextStatement&&d.push((b=t.data[E])==null?void 0:b.nextStatement)}for(let E=0;E<t.data.length;E++){if(p.includes(t.data[E].id))continue;let C=i.getBlockById(u[l.indexOf(t.data[E].id)]);C&&Object.keys(t.data[E]).forEach(A=>{if(!(A=="id"||A=="value"||A=="type"||A=="nextStatement")){const I=i.getBlockById(u[l.indexOf(t.data[E][A])]);I&&C.getInput(A).connection.connect(I.outputConnection)}})}for(let E=1;E<d.length;E++){if(p.includes(d[E]))continue;let C=i.getBlockById(u[l.indexOf(d[E])]),A=i.getBlockById(u[l.indexOf(d[E-1])]);C&&(A==null||A.nextConnection.connect(C.previousConnection))}let _=i.getBlockById(u[l.indexOf(d[0])]);o.nextConnection.connect(_.previousConnection)},setIsConnected:t=>n({isConnected:t}),loadFromURDF:t=>n({tfs:{...Qne(t)},items:{...Zne(t)}}),setIp:t=>n({ip:t}),disconnect:()=>n({ip:"",isConnected:!1,mistyAudioList:[],mistyImageList:[]}),addBlock:(t,i)=>n(s=>({blocks:{...s.blocks,[t]:i}})),removeBlock:t=>n(i=>({blocks:Object.keys(i.blocks).reduce((o,l)=>(t.includes(l)||(o[l]=i.blocks[l]),o),{})})),updateBlock:(t,i)=>n(s=>({blocks:{...s.blocks,[t]:i}})),getBlock:t=>e().blocks[t],getBlocks:()=>e().blocks,addBlocktoStart:(t,i)=>n(s=>({Start:{...s.Start,[t]:i}})),removeBlockfromStart:t=>n(i=>({Start:Object.keys(i.Start).reduce((o,l)=>(l!==t&&(o[l]=i.Start[l]),o),{})})),getBlocksByType:t=>{const i=e().blocks;return Object.values(i).filter(s=>s.type===t)[0]},getBlockType:t=>{var s;return((s=e().blocks[t])==null?void 0:s.type)||"Unknown block type"},setWorkspaceXml:t=>n({blocklyWorkspaceXML:t}),getWorkspaceXml:()=>e().blocklyWorkspaceXML,onPointerMissed:()=>console.log("Missed Click"),onPointerOver:()=>{},onPointerOut:()=>{},resetSim:()=>{const t=JSON.parse(JSON.stringify(e().startingTfs));n({tfs:{...t},endingTfs:{...t}})},toggleSimOnly:t=>{n({simOnly:t})},setAnimationFrames:(t,i)=>{n({tfs:{...t},endingTfs:{...i}})},animateDrive:(t,i,s,o)=>{const l=JSON.parse(JSON.stringify(e().endingTfs));let u=JSON.parse(JSON.stringify(l[_i("Base")])),d=JSON.parse(JSON.stringify(l[_i("Base")]));const p=i/100*f8*o/1e3,_=t/100*p8*o/1e3,y=p!==0?_/p:_;let b=new yl(d.rotation.x,d.rotation.y,d.rotation.z,d.rotation.w);const E=v8(b);if(console.log(E),p!==0){let le={x:0,y:0,z:p};b=H_(le.x,le.y,le.z),b.multiply(new yl(d.rotation.x,d.rotation.y,d.rotation.z,d.rotation.w))}let C=[0],A=[d.position.x],I=[d.position.y],L=[d.position.z],O=[d.rotation.w],P=[d.rotation.x],N=[d.rotation.y],z=[d.rotation.z];const W=Nb;let H=d.position.x,U=d.position.y;p>0?H=y:p<0&&(H-=y),console.log(p);let Q=null;for(let le=10;le<=W;le=10){C.push(o/1e3*le);let ge=p*le/W,ce=_*le/W;p!==0?Q=new Dt(H(Math.cos(E)*ce/ge*Math.cos(ce)),U(Math.sin(E)*ce/ge*Math.sin(ce)),L[0]):Q=new Dt(H(Math.cos(E)*ce),U(Math.sin(E)*ce),L[0]),A.push(Q.x),I.push(Q.y),L.push(Q.z);let pe=new yl(P[0],N[0],z[0],O[0]);pe.slerp(b,le/W),O.push(pe._w),P.push(pe._x),N.push(pe._y),z.push(pe._z)}C.push(1/0),A.push(Q.x),I.push(Q.y),L.push(Q.z),O.push(b._w),P.push(b._x),N.push(b._y),z.push(b._z),u.position.x=Q.x,u.position.y=Q.y,u.position.z=Q.z,u.rotation.w=b._w,u.rotation.x=b._x,u.rotation.y=b._y,u.rotation.z=b._z,d.position.x=zl(C,A),d.position.y=zl(C,I),d.position.z=zl(C,L),d.rotation.w=zl(C,O),d.rotation.x=zl(C,P),d.rotation.y=zl(C,N),d.rotation.z=zl(C,z);let ne={};ne[_i("Base")]={...d};let oe={};oe[_i("Base")]={...u},n({tfs:{...l,...ne},endingTfs:{...l,...oe}})}}));let fz="";const sh=n=>{const t=new Date().toLocaleString();fz=fz.concat(`
`,`[${t}] ${n}`)};function Lre(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[i,s]of n)if(!Object.is(s,e.get(i)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const i of n)if(!e.has(i))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(const i of t)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(n[i],e[i]))return!1;return!0}const{useRef:Dre}=Vr;function Zs(n){const e=Dre();return t=>{const i=n(t);return Lre(e.current,i)?e.current:e.current=i}}const Nre={black:"#000",white:"#fff"},Ww=Nre,Bre={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},NT=Bre,Pre={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},BT=Pre,Fre={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},PT=Fre,Ure={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},FT=Ure,zre={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},UT=zre,Hre={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},vx=Hre,Gre={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Wre=Gre;function w1(n){let e="https://mui.com/production-error/?code="+n;for(let t=1;t<arguments.length;t+=1)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+n+"; visit "+e+" for the full message."}const Vre=Object.freeze(Object.defineProperty({__proto__:null,default:w1},Symbol.toStringTag,{value:"Module"})),w$="$$material";function Ye(){return Ye=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ye.apply(this,arguments)}const jre=Object.freeze(Object.defineProperty({__proto__:null,default:Ye},Symbol.toStringTag,{value:"Module"}));function Tr(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function y8(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var Xre=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Yre=y8(function(n){return Xre.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91});function Kre(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function Jre(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var qre=function(){function n(t){var i=this;this._insertTag=function(s){var o;i.tags.length===0?i.insertionPoint?o=i.insertionPoint.nextSibling:i.prepend?o=i.container.firstChild:o=i.before:o=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(s,o),i.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Jre(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var o=Kre(s);try{o.insertRule(i,o.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},n}(),Tp="-ms-",QM="-moz-",jo="-webkit-",b8="comm",FB="rule",UB="decl",Qre="@import",T8="@keyframes",Zre="@layer",eie=Math.abs,jI=String.fromCharCode,tie=Object.assign;function nie(n,e){return qd(n,0)^45?(((e<<2^qd(n,0))<<2^qd(n,1))<<2^qd(n,2))<<2^qd(n,3):0}function S8(n){return n.trim()}function rie(n,e){return(n=e.exec(n))?n[0]:n}function Xo(n,e,t){return n.replace(e,t)}function oD(n,e){return n.indexOf(e)}function qd(n,e){return n.charCodeAt(e)|0}function Vw(n,e,t){return n.slice(e,t)}function z0(n){return n.length}function zB(n){return n.length}function OC(n,e){return e.push(n),n}function iie(n,e){return n.map(e).join("")}var XI=1,QS=1,E8=0,Gf=0,Mh=0,xE="";function YI(n,e,t,i,s,o,l){return{value:n,root:e,parent:t,type:i,props:s,children:o,line:XI,column:QS,length:l,return:""}}function yx(n,e){return tie(YI("",null,null,"",null,null,0),n,{length:-n.length},e)}function sie(){return Mh}function oie(){return Mh=Gf>0?qd(xE,--Gf):0,QS--,Mh===10&&(QS=1,XI--),Mh}function Am(){return Mh=Gf<E8?qd(xE,Gf++):0,QS++,Mh===10&&(QS=1,XI++),Mh}function K0(){return qd(xE,Gf)}function rM(){return Gf}function $$(n,e){return Vw(xE,n,e)}function jw(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function x8(n){return XI=QS=1,E8=z0(xE=n),Gf=0,[]}function w8(n){return xE="",n}function iM(n){return S8($$(Gf-1,aD(n===91?n+2:n===40?n+1:n)))}function aie(n){for(;(Mh=K0())&&Mh<33;)Am();return jw(n)>2||jw(Mh)>3?"":" "}function lie(n,e){for(;--e&&Am()&&!(Mh<48||Mh>102||Mh>57&&Mh<65||Mh>70&&Mh<97););return $$(n,rM()+(e<6&&K0()==32&&Am()==32))}function aD(n){for(;Am();)switch(Mh){case n:return Gf;case 34:case 39:n!==34&&n!==39&&aD(Mh);break;case 40:n===41&&aD(n);break;case 92:Am();break}return Gf}function uie(n,e){for(;Am()&&n+Mh!==57;)if(n+Mh===84&&K0()===47)break;return"/*"+$$(e,Gf-1)+"*"+jI(n===47?n:Am())}function cie(n){for(;!jw(K0());)Am();return $$(n,Gf)}function hie(n){return w8(sM("",null,null,null,[""],n=x8(n),0,[0],n))}function sM(n,e,t,i,s,o,l,u,d){for(var p=0,_=0,y=l,b=0,E=0,C=0,A=1,I=1,L=1,O=0,P="",N=s,z=o,W=i,H=P;I;)switch(C=O,O=Am()){case 40:if(C!=108&&qd(H,y-1)==58){oD(H+=Xo(iM(O),"&","&\f"),"&\f")!=-1&&(L=-1);break}case 34:case 39:case 91:H+=iM(O);break;case 9:case 10:case 13:case 32:H+=aie(C);break;case 92:H+=lie(rM()-1,7);continue;case 47:switch(K0()){case 42:case 47:OC(die(uie(Am(),rM()),e,t),d);break;default:H+="/"}break;case 123*A:u[p++]=z0(H)*L;case 125*A:case 59:case 0:switch(O){case 0:case 125:I=0;case 59+_:L==-1&&(H=Xo(H,/\f/g,"")),E>0&&z0(H)-y&&OC(E>32?gz(H+";",i,t,y-1):gz(Xo(H," ","")+";",i,t,y-2),d);break;case 59:H+=";";default:if(OC(W=mz(H,e,t,p,_,s,u,P,N=[],z=[],y),o),O===123)if(_===0)sM(H,e,W,W,N,o,y,u,z);else switch(b===99&&qd(H,3)===110?100:b){case 100:case 108:case 109:case 115:sM(n,W,W,i&&OC(mz(n,W,W,0,0,s,u,P,s,N=[],y),z),s,z,y,u,i?N:z);break;default:sM(H,W,W,W,[""],z,0,u,z)}}p=_=E=0,A=L=1,P=H="",y=l;break;case 58:y=1+z0(H),E=C;default:if(A<1){if(O==123)--A;else if(O==125&&A++==0&&oie()==125)continue}switch(H+=jI(O),O*A){case 38:L=_>0?1:(H+="\f",-1);break;case 44:u[p++]=(z0(H)-1)*L,L=1;break;case 64:K0()===45&&(H+=iM(Am())),b=K0(),_=y=z0(P=H+=cie(rM())),O++;break;case 45:C===45&&z0(H)==2&&(A=0)}}return o}function mz(n,e,t,i,s,o,l,u,d,p,_){for(var y=s-1,b=s===0?o:[""],E=zB(b),C=0,A=0,I=0;C<i;++C)for(var L=0,O=Vw(n,y+1,y=eie(A=l[C])),P=n;L<E;++L)(P=S8(A>0?b[L]+" "+O:Xo(O,/&\f/g,b[L])))&&(d[I++]=P);return YI(n,e,t,s===0?FB:u,d,p,_)}function die(n,e,t){return YI(n,e,t,b8,jI(sie()),Vw(n,2,-2),0)}function gz(n,e,t,i){return YI(n,e,t,UB,Vw(n,0,i),Vw(n,i+1,-1),i)}function BS(n,e){for(var t="",i=zB(n),s=0;s<i;s++)t+=e(n[s],s,n,e)||"";return t}function pie(n,e,t,i){switch(n.type){case Zre:if(n.children.length)break;case Qre:case UB:return n.return=n.return||n.value;case b8:return"";case T8:return n.return=n.value+"{"+BS(n.children,i)+"}";case FB:n.value=n.props.join(",")}return z0(t=BS(n.children,i))?n.return=n.value+"{"+t+"}":""}function fie(n){var e=zB(n);return function(t,i,s,o){for(var l="",u=0;u<e;u++)l+=n[u](t,i,s,o)||"";return l}}function mie(n){return function(e){e.root||(e=e.return)&&n(e)}}var gie=function(e,t,i){for(var s=0,o=0;s=o,o=K0(),s===38&&o===12&&(t[i]=1),!jw(o);)Am();return $$(e,Gf)},_ie=function(e,t){var i=-1,s=44;do switch(jw(s)){case 0:s===38&&K0()===12&&(t[i]=1),e[i]+=gie(Gf-1,t,i);break;case 2:e[i]+=iM(s);break;case 4:if(s===44){e[++i]=K0()===58?"&\f":"",t[i]=e[i].length;break}default:e[i]+=jI(s)}while(s=Am());return e},vie=function(e,t){return w8(_ie(x8(e),t))},_z=new WeakMap,yie=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,i=e.parent,s=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!_z.get(i))&&!s){_z.set(e,!0);for(var o=[],l=vie(t,o),u=i.props,d=0,p=0;d<l.length;d++)for(var _=0;_<u.length;_++,p++)e.props[p]=o[d]?l[d].replace(/&\f/g,u[_]):u[_]+" "+l[d]}}},bie=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function $8(n,e){switch(nie(n,e)){case 5103:return jo+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return jo+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return jo+n+QM+n+Tp+n+n;case 6828:case 4268:return jo+n+Tp+n+n;case 6165:return jo+n+Tp+"flex-"+n+n;case 5187:return jo+n+Xo(n,/(\w+).+(:[^]+)/,jo+"box-$1$2"+Tp+"flex-$1$2")+n;case 5443:return jo+n+Tp+"flex-item-"+Xo(n,/flex-|-self/,"")+n;case 4675:return jo+n+Tp+"flex-line-pack"+Xo(n,/align-content|flex-|-self/,"")+n;case 5548:return jo+n+Tp+Xo(n,"shrink","negative")+n;case 5292:return jo+n+Tp+Xo(n,"basis","preferred-size")+n;case 6060:return jo+"box-"+Xo(n,"-grow","")+jo+n+Tp+Xo(n,"grow","positive")+n;case 4554:return jo+Xo(n,/([^-])(transform)/g,"$1"+jo+"$2")+n;case 6187:return Xo(Xo(Xo(n,/(zoom-|grab)/,jo+"$1"),/(image-set)/,jo+"$1"),n,"")+n;case 5495:case 3959:return Xo(n,/(image-set\([^]*)/,jo+"$1$`$1");case 4968:return Xo(Xo(n,/(.+:)(flex-)?(.*)/,jo+"box-pack:$3"+Tp+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+jo+n+n;case 4095:case 3583:case 4068:case 2532:return Xo(n,/(.+)-inline(.+)/,jo+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(z0(n)-1-e>6)switch(qd(n,e+1)){case 109:if(qd(n,e+4)!==45)break;case 102:return Xo(n,/(.+:)(.+)-([^]+)/,"$1"+jo+"$2-$3$1"+QM+(qd(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~oD(n,"stretch")?$8(Xo(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(qd(n,e+1)!==115)break;case 6444:switch(qd(n,z0(n)-3-(~oD(n,"!important")&&10))){case 107:return Xo(n,":",":"+jo)+n;case 101:return Xo(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+jo+(qd(n,14)===45?"inline-":"")+"box$3$1"+jo+"$2$3$1"+Tp+"$2box$3")+n}break;case 5936:switch(qd(n,e+11)){case 114:return jo+n+Tp+Xo(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return jo+n+Tp+Xo(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return jo+n+Tp+Xo(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return jo+n+Tp+n+n}return n}var Tie=function(e,t,i,s){if(e.length>-1&&!e.return)switch(e.type){case UB:e.return=$8(e.value,e.length);break;case T8:return BS([yx(e,{value:Xo(e.value,"@","@"+jo)})],s);case FB:if(e.length)return iie(e.props,function(o){switch(rie(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return BS([yx(e,{props:[Xo(o,/:(read-\w+)/,":"+QM+"$1")]})],s);case"::placeholder":return BS([yx(e,{props:[Xo(o,/:(plac\w+)/,":"+jo+"input-$1")]}),yx(e,{props:[Xo(o,/:(plac\w+)/,":"+QM+"$1")]}),yx(e,{props:[Xo(o,/:(plac\w+)/,Tp+"input-$1")]})],s)}return""})}},Sie=[Tie],C8=function(e){var t=e.key;if(t==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(A){var I=A.getAttribute("data-emotion");I.indexOf(" ")!==-1&&(document.head.appendChild(A),A.setAttribute("data-s",""))})}var s=e.stylisPlugins||Sie,o={},l,u=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(A){for(var I=A.getAttribute("data-emotion").split(" "),L=1;L<I.length;L++)o[I[L]]=!0;u.push(A)});var d,p=[yie,bie];{var _,y=[pie,mie(function(A){_.insert(A)})],b=fie(p.concat(s,y)),E=function(I){return BS(hie(I),b)};d=function(I,L,O,P){_=O,E(I?I+"{"+L.styles+"}":L.styles),P&&(C.inserted[L.name]=!0)}}var C={key:t,sheet:new qre({key:t,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:d};return C.sheet.hydrate(u),C},A8={exports:{}},Aa={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bd=typeof Symbol=="function"&&Symbol.for,HB=bd?Symbol.for("react.element"):60103,GB=bd?Symbol.for("react.portal"):60106,KI=bd?Symbol.for("react.fragment"):60107,JI=bd?Symbol.for("react.strict_mode"):60108,qI=bd?Symbol.for("react.profiler"):60114,QI=bd?Symbol.for("react.provider"):60109,ZI=bd?Symbol.for("react.context"):60110,WB=bd?Symbol.for("react.async_mode"):60111,eR=bd?Symbol.for("react.concurrent_mode"):60111,tR=bd?Symbol.for("react.forward_ref"):60112,nR=bd?Symbol.for("react.suspense"):60113,Eie=bd?Symbol.for("react.suspense_list"):60120,rR=bd?Symbol.for("react.memo"):60115,iR=bd?Symbol.for("react.lazy"):60116,xie=bd?Symbol.for("react.block"):60121,wie=bd?Symbol.for("react.fundamental"):60117,$ie=bd?Symbol.for("react.responder"):60118,Cie=bd?Symbol.for("react.scope"):60119;function Dm(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case HB:switch(n=n.type,n){case WB:case eR:case KI:case qI:case JI:case nR:return n;default:switch(n=n&&n.$$typeof,n){case ZI:case tR:case iR:case rR:case QI:return n;default:return e}}case GB:return e}}}function M8(n){return Dm(n)===eR}Aa.AsyncMode=WB;Aa.ConcurrentMode=eR;Aa.ContextConsumer=ZI;Aa.ContextProvider=QI;Aa.Element=HB;Aa.ForwardRef=tR;Aa.Fragment=KI;Aa.Lazy=iR;Aa.Memo=rR;Aa.Portal=GB;Aa.Profiler=qI;Aa.StrictMode=JI;Aa.Suspense=nR;Aa.isAsyncMode=function(n){return M8(n)||Dm(n)===WB};Aa.isConcurrentMode=M8;Aa.isContextConsumer=function(n){return Dm(n)===ZI};Aa.isContextProvider=function(n){return Dm(n)===QI};Aa.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===HB};Aa.isForwardRef=function(n){return Dm(n)===tR};Aa.isFragment=function(n){return Dm(n)===KI};Aa.isLazy=function(n){return Dm(n)===iR};Aa.isMemo=function(n){return Dm(n)===rR};Aa.isPortal=function(n){return Dm(n)===GB};Aa.isProfiler=function(n){return Dm(n)===qI};Aa.isStrictMode=function(n){return Dm(n)===JI};Aa.isSuspense=function(n){return Dm(n)===nR};Aa.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===KI||n===eR||n===qI||n===JI||n===nR||n===Eie||typeof n=="object"&&n!==null&&(n.$$typeof===iR||n.$$typeof===rR||n.$$typeof===QI||n.$$typeof===ZI||n.$$typeof===tR||n.$$typeof===wie||n.$$typeof===$ie||n.$$typeof===Cie||n.$$typeof===xie)};Aa.typeOf=Dm;A8.exports=Aa;var Aie=A8.exports,I8=Aie,Mie={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Iie={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},R8={};R8[I8.ForwardRef]=Mie;R8[I8.Memo]=Iie;var Rie=!0;function kie(n,e,t){var i="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):i+=s+" "}),i}var k8=function(e,t,i){var s=e.key+"-"+t.name;(i===!1||Rie===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},O8=function(e,t,i){k8(e,t,i);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var o=t;do e.insert(t===o?"."+s:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function Oie(n){for(var e=0,t,i=0,s=n.length;s>=4;++i,s-=4)t=n.charCodeAt(i)&255|(n.charCodeAt(++i)&255)<<8|(n.charCodeAt(++i)&255)<<16|(n.charCodeAt(++i)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(i+2)&255)<<16;case 2:e^=(n.charCodeAt(i+1)&255)<<8;case 1:e^=n.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Lie={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Die=/[A-Z]|^ms/g,Nie=/_EMO_([^_]+?)_([^]*?)_EMO_/g,L8=function(e){return e.charCodeAt(1)===45},vz=function(e){return e!=null&&typeof e!="boolean"},x2=y8(function(n){return L8(n)?n:n.replace(Die,"-$&").toLowerCase()}),yz=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Nie,function(i,s,o){return H0={name:s,styles:o,next:H0},s})}return Lie[e]!==1&&!L8(e)&&typeof t=="number"&&t!==0?t+"px":t};function Xw(n,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return H0={name:t.name,styles:t.styles,next:H0},t.name;if(t.styles!==void 0){var i=t.next;if(i!==void 0)for(;i!==void 0;)H0={name:i.name,styles:i.styles,next:H0},i=i.next;var s=t.styles+";";return s}return Bie(n,e,t)}case"function":{if(n!==void 0){var o=H0,l=t(n);return H0=o,Xw(n,e,l)}break}}if(e==null)return t;var u=e[t];return u!==void 0?u:t}function Bie(n,e,t){var i="";if(Array.isArray(t))for(var s=0;s<t.length;s++)i+=Xw(n,e,t[s])+";";else for(var o in t){var l=t[o];if(typeof l!="object")e!=null&&e[l]!==void 0?i+=o+"{"+e[l]+"}":vz(l)&&(i+=x2(o)+":"+yz(o,l)+";");else if(Array.isArray(l)&&typeof l[0]=="string"&&(e==null||e[l[0]]===void 0))for(var u=0;u<l.length;u++)vz(l[u])&&(i+=x2(o)+":"+yz(o,l[u])+";");else{var d=Xw(n,e,l);switch(o){case"animation":case"animationName":{i+=x2(o)+":"+d+";";break}default:i+=o+"{"+d+"}"}}}return i}var bz=/label:\s*([^\s;\n{]+)\s*(;|$)/g,H0,VB=function(e,t,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,o="";H0=void 0;var l=e[0];l==null||l.raw===void 0?(s=!1,o+=Xw(i,t,l)):o+=l[0];for(var u=1;u<e.length;u++)o+=Xw(i,t,e[u]),s&&(o+=l[u]);bz.lastIndex=0;for(var d="",p;(p=bz.exec(o))!==null;)d+="-"+p[1];var _=Oie(o)+d;return{name:_,styles:o,next:H0}},Pie=function(e){return e()},D8=rL.useInsertionEffect?rL.useInsertionEffect:!1,Fie=D8||Pie,Tz=D8||me.useLayoutEffect,N8=me.createContext(typeof HTMLElement<"u"?C8({key:"css"}):null),Uie=N8.Provider,B8=function(e){return me.forwardRef(function(t,i){var s=me.useContext(N8);return e(t,s,i)})},sR=me.createContext({}),zie=B8(function(n,e){var t=n.styles,i=VB([t],void 0,me.useContext(sR)),s=me.useRef();return Tz(function(){var o=e.key+"-global",l=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),u=!1,d=document.querySelector('style[data-emotion="'+o+" "+i.name+'"]');return e.sheet.tags.length&&(l.before=e.sheet.tags[0]),d!==null&&(u=!0,d.setAttribute("data-emotion",o),l.hydrate([d])),s.current=[l,u],function(){l.flush()}},[e]),Tz(function(){var o=s.current,l=o[0],u=o[1];if(u){o[1]=!1;return}if(i.next!==void 0&&O8(e,i.next,!0),l.tags.length){var d=l.tags[l.tags.length-1].nextElementSibling;l.before=d,l.flush()}e.insert("",i,l,!1)},[e,i.name]),null});function oR(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return VB(e)}var wE=function(){var e=oR.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Hie=Yre,Gie=function(e){return e!=="theme"},Sz=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Hie:Gie},Ez=function(e,t,i){var s;if(t){var o=t.shouldForwardProp;s=e.__emotion_forwardProp&&o?function(l){return e.__emotion_forwardProp(l)&&o(l)}:o}return typeof s!="function"&&i&&(s=e.__emotion_forwardProp),s},Wie=function(e){var t=e.cache,i=e.serialized,s=e.isStringTag;return k8(t,i,s),Fie(function(){return O8(t,i,s)}),null},Vie=function n(e,t){var i=e.__emotion_real===e,s=i&&e.__emotion_base||e,o,l;t!==void 0&&(o=t.label,l=t.target);var u=Ez(e,t,i),d=u||Sz(s),p=!d("as");return function(){var _=arguments,y=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&y.push("label:"+o+";"),_[0]==null||_[0].raw===void 0)y.push.apply(y,_);else{y.push(_[0][0]);for(var b=_.length,E=1;E<b;E++)y.push(_[E],_[0][E])}var C=B8(function(A,I,L){var O=p&&A.as||s,P="",N=[],z=A;if(A.theme==null){z={};for(var W in A)z[W]=A[W];z.theme=me.useContext(sR)}typeof A.className=="string"?P=kie(I.registered,N,A.className):A.className!=null&&(P=A.className+" ");var H=VB(y.concat(N),I.registered,z);P+=I.key+"-"+H.name,l!==void 0&&(P+=" "+l);var U=p&&u===void 0?Sz(O):d,Q={};for(var ne in A)p&&ne==="as"||U(ne)&&(Q[ne]=A[ne]);return Q.className=P,Q.ref=L,me.createElement(me.Fragment,null,me.createElement(Wie,{cache:I,serialized:H,isStringTag:typeof O=="string"}),me.createElement(O,Q))});return C.displayName=o!==void 0?o:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",C.defaultProps=e.defaultProps,C.__emotion_real=C,C.__emotion_base=s,C.__emotion_styles=y,C.__emotion_forwardProp=u,Object.defineProperty(C,"toString",{value:function(){return"."+l}}),C.withComponent=function(A,I){return n(A,Ye({},t,I,{shouldForwardProp:Ez(C,I,!0)})).apply(void 0,y)},C}},jie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],lD=Vie.bind();jie.forEach(function(n){lD[n]=lD(n)});var P8={exports:{}},Xie="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Yie=Xie,Kie=Yie;function F8(){}function U8(){}U8.resetWarningCache=F8;var Jie=function(){function n(i,s,o,l,u,d){if(d!==Kie){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:U8,resetWarningCache:F8};return t.PropTypes=t,t};P8.exports=Jie();var qie=P8.exports;const ts=k1(qie);let uD;typeof document=="object"&&(uD=C8({key:"css",prepend:!0}));function Qie(n){const{injectFirst:e,children:t}=n;return e&&uD?Ve.jsx(Uie,{value:uD,children:t}):t}function Zie(n){return n==null||Object.keys(n).length===0}function z8(n){const{styles:e,defaultTheme:t={}}=n,i=typeof e=="function"?s=>e(Zie(s)?t:s):e;return Ve.jsx(zie,{styles:i})}function jB(n,e){return lD(n,e)}const H8=(n,e)=>{Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))},ese=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:z8,StyledEngineProvider:Qie,ThemeContext:sR,css:oR,default:jB,internal_processStyles:H8,keyframes:wE},Symbol.toStringTag,{value:"Module"}));function j_(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function G8(n){if(!j_(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=G8(n[t])}),e}function of(n,e,t={clone:!0}){const i=t.clone?Ye({},n):n;return j_(n)&&j_(e)&&Object.keys(e).forEach(s=>{s!=="__proto__"&&(j_(e[s])&&s in n&&j_(n[s])?i[s]=of(n[s],e[s],t):t.clone?i[s]=j_(e[s])?G8(e[s]):e[s]:i[s]=e[s])}),i}const tse=Object.freeze(Object.defineProperty({__proto__:null,default:of,isPlainObject:j_},Symbol.toStringTag,{value:"Module"})),nse=["values","unit","step"],rse=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,i)=>t.val-i.val),e.reduce((t,i)=>Ye({},t,{[i.key]:i.val}),{})};function W8(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:i=5}=n,s=Tr(n,nse),o=rse(e),l=Object.keys(o);function u(b){return`@media (min-width:${typeof e[b]=="number"?e[b]:b}${t})`}function d(b){return`@media (max-width:${(typeof e[b]=="number"?e[b]:b)-i/100}${t})`}function p(b,E){const C=l.indexOf(E);return`@media (min-width:${typeof e[b]=="number"?e[b]:b}${t}) and (max-width:${(C!==-1&&typeof e[l[C]]=="number"?e[l[C]]:E)-i/100}${t})`}function _(b){return l.indexOf(b)+1<l.length?p(b,l[l.indexOf(b)+1]):u(b)}function y(b){const E=l.indexOf(b);return E===0?u(l[1]):E===l.length-1?d(l[E]):p(b,l[l.indexOf(b)+1]).replace("@media","@media not all and")}return Ye({keys:l,values:o,up:u,down:d,between:p,only:_,not:y,unit:t},s)}const ise={borderRadius:4},sse=ise;function dw(n,e){return e?of(n,e,{clone:!1}):n}const XB={xs:0,sm:600,md:900,lg:1200,xl:1536},xz={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${XB[n]}px)`};function Wf(n,e,t){const i=n.theme||{};if(Array.isArray(e)){const o=i.breakpoints||xz;return e.reduce((l,u,d)=>(l[o.up(o.keys[d])]=t(e[d]),l),{})}if(typeof e=="object"){const o=i.breakpoints||xz;return Object.keys(e).reduce((l,u)=>{if(Object.keys(o.values||XB).indexOf(u)!==-1){const d=o.up(u);l[d]=t(e[u],u)}else{const d=u;l[d]=e[d]}return l},{})}return t(e)}function V8(n={}){var e;return((e=n.keys)==null?void 0:e.reduce((i,s)=>{const o=n.up(s);return i[o]={},i},{}))||{}}function j8(n,e){return n.reduce((t,i)=>{const s=t[i];return(!s||Object.keys(s).length===0)&&delete t[i],t},e)}function ose(n,...e){const t=V8(n),i=[t,...e].reduce((s,o)=>of(s,o),{});return j8(Object.keys(t),i)}function ase(n,e){if(typeof n!="object")return{};const t={},i=Object.keys(e);return Array.isArray(n)?i.forEach((s,o)=>{o<n.length&&(t[s]=!0)}):i.forEach(s=>{n[s]!=null&&(t[s]=!0)}),t}function u1({values:n,breakpoints:e,base:t}){const i=t||ase(n,e),s=Object.keys(i);if(s.length===0)return n;let o;return s.reduce((l,u,d)=>(Array.isArray(n)?(l[u]=n[d]!=null?n[d]:n[o],o=d):typeof n=="object"?(l[u]=n[u]!=null?n[u]:n[o],o=u):l[u]=n,l),{})}function lr(n){if(typeof n!="string")throw new Error(w1(7));return n.charAt(0).toUpperCase()+n.slice(1)}const lse=Object.freeze(Object.defineProperty({__proto__:null,default:lr},Symbol.toStringTag,{value:"Module"}));function aR(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const i=`vars.${e}`.split(".").reduce((s,o)=>s&&s[o]?s[o]:null,n);if(i!=null)return i}return e.split(".").reduce((i,s)=>i&&i[s]!=null?i[s]:null,n)}function ZM(n,e,t,i=t){let s;return typeof n=="function"?s=n(t):Array.isArray(n)?s=n[t]||i:s=aR(n,t)||i,e&&(s=e(s,i,n)),s}function uh(n){const{prop:e,cssProperty:t=n.prop,themeKey:i,transform:s}=n,o=l=>{if(l[e]==null)return null;const u=l[e],d=l.theme,p=aR(d,i)||{};return Wf(l,u,y=>{let b=ZM(p,s,y);return y===b&&typeof y=="string"&&(b=ZM(p,s,`${e}${y==="default"?"":lr(y)}`,y)),t===!1?b:{[t]:b}})};return o.propTypes={},o.filterProps=[e],o}function use(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const cse={m:"margin",p:"padding"},hse={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},wz={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},dse=use(n=>{if(n.length>2)if(wz[n])n=wz[n];else return[n];const[e,t]=n.split(""),i=cse[e],s=hse[t]||"";return Array.isArray(s)?s.map(o=>i+o):[i+s]}),YB=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],KB=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...YB,...KB];function C$(n,e,t,i){var s;const o=(s=aR(n,e,!1))!=null?s:t;return typeof o=="number"?l=>typeof l=="string"?l:o*l:Array.isArray(o)?l=>typeof l=="string"?l:o[l]:typeof o=="function"?o:()=>{}}function JB(n){return C$(n,"spacing",8)}function $1(n,e){if(typeof e=="string"||e==null)return e;const t=Math.abs(e),i=n(t);return e>=0?i:typeof i=="number"?-i:`-${i}`}function pse(n,e){return t=>n.reduce((i,s)=>(i[s]=$1(e,t),i),{})}function fse(n,e,t,i){if(e.indexOf(t)===-1)return null;const s=dse(t),o=pse(s,i),l=n[t];return Wf(n,l,o)}function X8(n,e){const t=JB(n.theme);return Object.keys(n).map(i=>fse(n,e,i,t)).reduce(dw,{})}function Ac(n){return X8(n,YB)}Ac.propTypes={};Ac.filterProps=YB;function Mc(n){return X8(n,KB)}Mc.propTypes={};Mc.filterProps=KB;function mse(n=8){if(n.mui)return n;const e=JB({spacing:n}),t=(...i)=>(i.length===0?[1]:i).map(o=>{const l=e(o);return typeof l=="number"?`${l}px`:l}).join(" ");return t.mui=!0,t}function lR(...n){const e=n.reduce((i,s)=>(s.filterProps.forEach(o=>{i[o]=s}),i),{}),t=i=>Object.keys(i).reduce((s,o)=>e[o]?dw(s,e[o](i)):s,{});return t.propTypes={},t.filterProps=n.reduce((i,s)=>i.concat(s.filterProps),[]),t}function cg(n){return typeof n!="number"?n:`${n}px solid`}function vg(n,e){return uh({prop:n,themeKey:"borders",transform:e})}const gse=vg("border",cg),_se=vg("borderTop",cg),vse=vg("borderRight",cg),yse=vg("borderBottom",cg),bse=vg("borderLeft",cg),Tse=vg("borderColor"),Sse=vg("borderTopColor"),Ese=vg("borderRightColor"),xse=vg("borderBottomColor"),wse=vg("borderLeftColor"),$se=vg("outline",cg),Cse=vg("outlineColor"),uR=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=C$(n.theme,"shape.borderRadius",4),t=i=>({borderRadius:$1(e,i)});return Wf(n,n.borderRadius,t)}return null};uR.propTypes={};uR.filterProps=["borderRadius"];lR(gse,_se,vse,yse,bse,Tse,Sse,Ese,xse,wse,uR,$se,Cse);const cR=n=>{if(n.gap!==void 0&&n.gap!==null){const e=C$(n.theme,"spacing",8),t=i=>({gap:$1(e,i)});return Wf(n,n.gap,t)}return null};cR.propTypes={};cR.filterProps=["gap"];const hR=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=C$(n.theme,"spacing",8),t=i=>({columnGap:$1(e,i)});return Wf(n,n.columnGap,t)}return null};hR.propTypes={};hR.filterProps=["columnGap"];const dR=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=C$(n.theme,"spacing",8),t=i=>({rowGap:$1(e,i)});return Wf(n,n.rowGap,t)}return null};dR.propTypes={};dR.filterProps=["rowGap"];const Ase=uh({prop:"gridColumn"}),Mse=uh({prop:"gridRow"}),Ise=uh({prop:"gridAutoFlow"}),Rse=uh({prop:"gridAutoColumns"}),kse=uh({prop:"gridAutoRows"}),Ose=uh({prop:"gridTemplateColumns"}),Lse=uh({prop:"gridTemplateRows"}),Dse=uh({prop:"gridTemplateAreas"}),Nse=uh({prop:"gridArea"});lR(cR,hR,dR,Ase,Mse,Ise,Rse,kse,Ose,Lse,Dse,Nse);function PS(n,e){return e==="grey"?e:n}const Bse=uh({prop:"color",themeKey:"palette",transform:PS}),Pse=uh({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:PS}),Fse=uh({prop:"backgroundColor",themeKey:"palette",transform:PS});lR(Bse,Pse,Fse);function Tm(n){return n<=1&&n!==0?`${n*100}%`:n}const Use=uh({prop:"width",transform:Tm}),qB=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var i,s;const o=((i=n.theme)==null||(i=i.breakpoints)==null||(i=i.values)==null?void 0:i[t])||XB[t];return o?((s=n.theme)==null||(s=s.breakpoints)==null?void 0:s.unit)!=="px"?{maxWidth:`${o}${n.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:Tm(t)}};return Wf(n,n.maxWidth,e)}return null};qB.filterProps=["maxWidth"];const zse=uh({prop:"minWidth",transform:Tm}),Hse=uh({prop:"height",transform:Tm}),Gse=uh({prop:"maxHeight",transform:Tm}),Wse=uh({prop:"minHeight",transform:Tm});uh({prop:"size",cssProperty:"width",transform:Tm});uh({prop:"size",cssProperty:"height",transform:Tm});const Vse=uh({prop:"boxSizing"});lR(Use,qB,zse,Hse,Gse,Wse,Vse);const jse={border:{themeKey:"borders",transform:cg},borderTop:{themeKey:"borders",transform:cg},borderRight:{themeKey:"borders",transform:cg},borderBottom:{themeKey:"borders",transform:cg},borderLeft:{themeKey:"borders",transform:cg},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:cg},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:uR},color:{themeKey:"palette",transform:PS},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:PS},backgroundColor:{themeKey:"palette",transform:PS},p:{style:Mc},pt:{style:Mc},pr:{style:Mc},pb:{style:Mc},pl:{style:Mc},px:{style:Mc},py:{style:Mc},padding:{style:Mc},paddingTop:{style:Mc},paddingRight:{style:Mc},paddingBottom:{style:Mc},paddingLeft:{style:Mc},paddingX:{style:Mc},paddingY:{style:Mc},paddingInline:{style:Mc},paddingInlineStart:{style:Mc},paddingInlineEnd:{style:Mc},paddingBlock:{style:Mc},paddingBlockStart:{style:Mc},paddingBlockEnd:{style:Mc},m:{style:Ac},mt:{style:Ac},mr:{style:Ac},mb:{style:Ac},ml:{style:Ac},mx:{style:Ac},my:{style:Ac},margin:{style:Ac},marginTop:{style:Ac},marginRight:{style:Ac},marginBottom:{style:Ac},marginLeft:{style:Ac},marginX:{style:Ac},marginY:{style:Ac},marginInline:{style:Ac},marginInlineStart:{style:Ac},marginInlineEnd:{style:Ac},marginBlock:{style:Ac},marginBlockStart:{style:Ac},marginBlockEnd:{style:Ac},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:cR},rowGap:{style:dR},columnGap:{style:hR},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Tm},maxWidth:{style:qB},minWidth:{transform:Tm},height:{transform:Tm},maxHeight:{transform:Tm},minHeight:{transform:Tm},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},A$=jse;function Xse(...n){const e=n.reduce((i,s)=>i.concat(Object.keys(s)),[]),t=new Set(e);return n.every(i=>t.size===Object.keys(i).length)}function Yse(n,e){return typeof n=="function"?n(e):n}function Y8(){function n(t,i,s,o){const l={[t]:i,theme:s},u=o[t];if(!u)return{[t]:i};const{cssProperty:d=t,themeKey:p,transform:_,style:y}=u;if(i==null)return null;if(p==="typography"&&i==="inherit")return{[t]:i};const b=aR(s,p)||{};return y?y(l):Wf(l,i,C=>{let A=ZM(b,_,C);return C===A&&typeof C=="string"&&(A=ZM(b,_,`${t}${C==="default"?"":lr(C)}`,C)),d===!1?A:{[d]:A}})}function e(t){var i;const{sx:s,theme:o={}}=t||{};if(!s)return null;const l=(i=o.unstable_sxConfig)!=null?i:A$;function u(d){let p=d;if(typeof d=="function")p=d(o);else if(typeof d!="object")return d;if(!p)return null;const _=V8(o.breakpoints),y=Object.keys(_);let b=_;return Object.keys(p).forEach(E=>{const C=Yse(p[E],o);if(C!=null)if(typeof C=="object")if(l[E])b=dw(b,n(E,C,o,l));else{const A=Wf({theme:o},C,I=>({[E]:I}));Xse(A,C)?b[E]=e({sx:C,theme:o}):b=dw(b,A)}else b=dw(b,n(E,C,o,l))}),j8(y,b)}return Array.isArray(s)?s.map(u):u(s)}return e}const K8=Y8();K8.filterProps=["sx"];const M$=K8;function J8(n,e){const t=this;return t.vars&&typeof t.getColorSchemeSelector=="function"?{[t.getColorSchemeSelector(n).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:t.palette.mode===n?e:{}}const Kse=["breakpoints","palette","spacing","shape"];function $E(n={},...e){const{breakpoints:t={},palette:i={},spacing:s,shape:o={}}=n,l=Tr(n,Kse),u=W8(t),d=mse(s);let p=of({breakpoints:u,direction:"ltr",components:{},palette:Ye({mode:"light"},i),spacing:d,shape:Ye({},sse,o)},l);return p.applyStyles=J8,p=e.reduce((_,y)=>of(_,y),p),p.unstable_sxConfig=Ye({},A$,l==null?void 0:l.unstable_sxConfig),p.unstable_sx=function(y){return M$({sx:y,theme:this})},p}const Jse=Object.freeze(Object.defineProperty({__proto__:null,default:$E,private_createBreakpoints:W8,unstable_applyStyles:J8},Symbol.toStringTag,{value:"Module"}));function qse(n){return Object.keys(n).length===0}function Qse(n=null){const e=me.useContext(sR);return!e||qse(e)?n:e}const Zse=$E();function pR(n=Zse){return Qse(n)}function eoe({styles:n,themeId:e,defaultTheme:t={}}){const i=pR(t),s=typeof n=="function"?n(e&&i[e]||i):n;return Ve.jsx(z8,{styles:s})}const toe=["sx"],noe=n=>{var e,t;const i={systemProps:{},otherProps:{}},s=(e=n==null||(t=n.theme)==null?void 0:t.unstable_sxConfig)!=null?e:A$;return Object.keys(n).forEach(o=>{s[o]?i.systemProps[o]=n[o]:i.otherProps[o]=n[o]}),i};function I$(n){const{sx:e}=n,t=Tr(n,toe),{systemProps:i,otherProps:s}=noe(t);let o;return Array.isArray(e)?o=[i,...e]:typeof e=="function"?o=(...l)=>{const u=e(...l);return j_(u)?Ye({},i,u):i}:o=Ye({},i,e),Ye({},s,{sx:o})}const roe=Object.freeze(Object.defineProperty({__proto__:null,default:M$,extendSxProp:I$,unstable_createStyleFunctionSx:Y8,unstable_defaultSxConfig:A$},Symbol.toStringTag,{value:"Module"})),$z=n=>n,ioe=()=>{let n=$z;return{configure(e){n=e},generate(e){return n(e)},reset(){n=$z}}},soe=ioe(),QB=soe;function q8(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=q8(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function qr(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=q8(n))&&(i&&(i+=" "),i+=e);return i}const ooe=["className","component"];function aoe(n={}){const{themeId:e,defaultTheme:t,defaultClassName:i="MuiBox-root",generateClassName:s}=n,o=jB("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(M$);return me.forwardRef(function(d,p){const _=pR(t),y=I$(d),{className:b,component:E="div"}=y,C=Tr(y,ooe);return Ve.jsx(o,Ye({as:E,ref:p,className:qr(b,s?s(i):i),theme:e&&_[e]||_},C))})}const loe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function no(n,e,t="Mui"){const i=loe[e];return i?`${t}-${i}`:`${QB.generate(n)}-${e}`}function Eo(n,e,t="Mui"){const i={};return e.forEach(s=>{i[s]=no(n,s,t)}),i}var Q8={exports:{}},Ma={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZB=Symbol.for("react.element"),eP=Symbol.for("react.portal"),fR=Symbol.for("react.fragment"),mR=Symbol.for("react.strict_mode"),gR=Symbol.for("react.profiler"),_R=Symbol.for("react.provider"),vR=Symbol.for("react.context"),uoe=Symbol.for("react.server_context"),yR=Symbol.for("react.forward_ref"),bR=Symbol.for("react.suspense"),TR=Symbol.for("react.suspense_list"),SR=Symbol.for("react.memo"),ER=Symbol.for("react.lazy"),coe=Symbol.for("react.offscreen"),Z8;Z8=Symbol.for("react.module.reference");function yg(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case ZB:switch(n=n.type,n){case fR:case gR:case mR:case bR:case TR:return n;default:switch(n=n&&n.$$typeof,n){case uoe:case vR:case yR:case ER:case SR:case _R:return n;default:return e}}case eP:return e}}}Ma.ContextConsumer=vR;Ma.ContextProvider=_R;Ma.Element=ZB;Ma.ForwardRef=yR;Ma.Fragment=fR;Ma.Lazy=ER;Ma.Memo=SR;Ma.Portal=eP;Ma.Profiler=gR;Ma.StrictMode=mR;Ma.Suspense=bR;Ma.SuspenseList=TR;Ma.isAsyncMode=function(){return!1};Ma.isConcurrentMode=function(){return!1};Ma.isContextConsumer=function(n){return yg(n)===vR};Ma.isContextProvider=function(n){return yg(n)===_R};Ma.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===ZB};Ma.isForwardRef=function(n){return yg(n)===yR};Ma.isFragment=function(n){return yg(n)===fR};Ma.isLazy=function(n){return yg(n)===ER};Ma.isMemo=function(n){return yg(n)===SR};Ma.isPortal=function(n){return yg(n)===eP};Ma.isProfiler=function(n){return yg(n)===gR};Ma.isStrictMode=function(n){return yg(n)===mR};Ma.isSuspense=function(n){return yg(n)===bR};Ma.isSuspenseList=function(n){return yg(n)===TR};Ma.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===fR||n===gR||n===mR||n===bR||n===TR||n===coe||typeof n=="object"&&n!==null&&(n.$$typeof===ER||n.$$typeof===SR||n.$$typeof===_R||n.$$typeof===vR||n.$$typeof===yR||n.$$typeof===Z8||n.getModuleId!==void 0)};Ma.typeOf=yg;Q8.exports=Ma;var Cz=Q8.exports;const hoe=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function e9(n){const e=`${n}`.match(hoe);return e&&e[1]||""}function t9(n,e=""){return n.displayName||n.name||e9(n)||e}function Az(n,e,t){const i=t9(e);return n.displayName||(i!==""?`${t}(${i})`:t)}function doe(n){if(n!=null){if(typeof n=="string")return n;if(typeof n=="function")return t9(n,"Component");if(typeof n=="object")switch(n.$$typeof){case Cz.ForwardRef:return Az(n,n.render,"ForwardRef");case Cz.Memo:return Az(n,n.type,"memo");default:return}}}const poe=Object.freeze(Object.defineProperty({__proto__:null,default:doe,getFunctionName:e9},Symbol.toStringTag,{value:"Module"})),foe=["ownerState"],moe=["variants"],goe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function _oe(n){return Object.keys(n).length===0}function voe(n){return typeof n=="string"&&n.charCodeAt(0)>96}function w2(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const yoe=$E(),boe=n=>n&&n.charAt(0).toLowerCase()+n.slice(1);function LC({defaultTheme:n,theme:e,themeId:t}){return _oe(e)?n:e[t]||e}function Toe(n){return n?(e,t)=>t[n]:null}function oM(n,e){let{ownerState:t}=e,i=Tr(e,foe);const s=typeof n=="function"?n(Ye({ownerState:t},i)):n;if(Array.isArray(s))return s.flatMap(o=>oM(o,Ye({ownerState:t},i)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:o=[]}=s;let u=Tr(s,moe);return o.forEach(d=>{let p=!0;typeof d.props=="function"?p=d.props(Ye({ownerState:t},i,t)):Object.keys(d.props).forEach(_=>{(t==null?void 0:t[_])!==d.props[_]&&i[_]!==d.props[_]&&(p=!1)}),p&&(Array.isArray(u)||(u=[u]),u.push(typeof d.style=="function"?d.style(Ye({ownerState:t},i,t)):d.style))}),u}return s}function Soe(n={}){const{themeId:e,defaultTheme:t=yoe,rootShouldForwardProp:i=w2,slotShouldForwardProp:s=w2}=n,o=l=>M$(Ye({},l,{theme:LC(Ye({},l,{defaultTheme:t,themeId:e}))}));return o.__mui_systemSx=!0,(l,u={})=>{H8(l,z=>z.filter(W=>!(W!=null&&W.__mui_systemSx)));const{name:d,slot:p,skipVariantsResolver:_,skipSx:y,overridesResolver:b=Toe(boe(p))}=u,E=Tr(u,goe),C=_!==void 0?_:p&&p!=="Root"&&p!=="root"||!1,A=y||!1;let I,L=w2;p==="Root"||p==="root"?L=i:p?L=s:voe(l)&&(L=void 0);const O=jB(l,Ye({shouldForwardProp:L,label:I},E)),P=z=>typeof z=="function"&&z.__emotion_real!==z||j_(z)?W=>oM(z,Ye({},W,{theme:LC({theme:W.theme,defaultTheme:t,themeId:e})})):z,N=(z,...W)=>{let H=P(z);const U=W?W.map(P):[];d&&b&&U.push(oe=>{const le=LC(Ye({},oe,{defaultTheme:t,themeId:e}));if(!le.components||!le.components[d]||!le.components[d].styleOverrides)return null;const ge=le.components[d].styleOverrides,ce={};return Object.entries(ge).forEach(([pe,Te])=>{ce[pe]=oM(Te,Ye({},oe,{theme:le}))}),b(oe,ce)}),d&&!C&&U.push(oe=>{var le;const ge=LC(Ye({},oe,{defaultTheme:t,themeId:e})),ce=ge==null||(le=ge.components)==null||(le=le[d])==null?void 0:le.variants;return oM({variants:ce},Ye({},oe,{theme:ge}))}),A||U.push(o);const Q=U.length-W.length;if(Array.isArray(z)&&Q>0){const oe=new Array(Q).fill("");H=[...z,...oe],H.raw=[...z.raw,...oe]}const ne=O(H,...U);return l.muiName&&(ne.muiName=l.muiName),ne};return O.withConfig&&(N.withConfig=O.withConfig),N}}const n9=Soe();function tP(n,e){const t=Ye({},e);return Object.keys(n).forEach(i=>{if(i.toString().match(/^(components|slots)$/))t[i]=Ye({},n[i],t[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const s=n[i]||{},o=e[i];t[i]={},!o||!Object.keys(o)?t[i]=s:!s||!Object.keys(s)?t[i]=o:(t[i]=Ye({},o),Object.keys(s).forEach(l=>{t[i][l]=tP(s[l],o[l])}))}else t[i]===void 0&&(t[i]=n[i])}),t}function Eoe(n){const{theme:e,name:t,props:i}=n;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?i:tP(e.components[t].defaultProps,i)}function nP({props:n,name:e,defaultTheme:t,themeId:i}){let s=pR(t);return i&&(s=s[i]||s),Eoe({theme:s,name:e,props:n})}const xoe=typeof window<"u"?me.useLayoutEffect:me.useEffect,by=xoe;function woe(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}const $oe=Object.freeze(Object.defineProperty({__proto__:null,default:woe},Symbol.toStringTag,{value:"Module"}));function cD(...n){return n.reduce((e,t)=>t==null?e:function(...s){e.apply(this,s),t.apply(this,s)},()=>{})}function rP(n,e=166){let t;function i(...s){const o=()=>{n.apply(this,s)};clearTimeout(t),t=setTimeout(o,e)}return i.clear=()=>{clearTimeout(t)},i}function Coe(n,e){return()=>null}function aM(n,e){var t,i;return me.isValidElement(n)&&e.indexOf((t=n.type.muiName)!=null?t:(i=n.type)==null||(i=i._payload)==null||(i=i.value)==null?void 0:i.muiName)!==-1}function Hf(n){return n&&n.ownerDocument||document}function Ty(n){return Hf(n).defaultView||window}function Aoe(n,e){return()=>null}function eI(n,e){typeof n=="function"?n(e):n&&(n.current=e)}let Mz=0;function Moe(n){const[e,t]=me.useState(n),i=n||e;return me.useEffect(()=>{e==null&&(Mz+=1,t(`mui-${Mz}`))},[e]),i}const Iz=rL.useId;function xR(n){if(Iz!==void 0){const e=Iz();return n??e}return Moe(n)}function Ioe(n,e,t,i,s){return null}function tI({controlled:n,default:e,name:t,state:i="value"}){const{current:s}=me.useRef(n!==void 0),[o,l]=me.useState(e),u=s?n:o,d=me.useCallback(p=>{s||l(p)},[]);return[u,d]}function qb(n){const e=me.useRef(n);return by(()=>{e.current=n}),me.useRef((...t)=>(0,e.current)(...t)).current}function uf(...n){return me.useMemo(()=>n.every(e=>e==null)?null:e=>{n.forEach(t=>{eI(t,e)})},n)}const Rz={};function Roe(n,e){const t=me.useRef(Rz);return t.current===Rz&&(t.current=n(e)),t}const koe=[];function Ooe(n){me.useEffect(n,koe)}class wR{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new wR}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function r9(){const n=Roe(wR.create).current;return Ooe(n.disposeEffect),n}let $R=!0,hD=!1;const Loe=new wR,Doe={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Noe(n){const{type:e,tagName:t}=n;return!!(t==="INPUT"&&Doe[e]&&!n.readOnly||t==="TEXTAREA"&&!n.readOnly||n.isContentEditable)}function Boe(n){n.metaKey||n.altKey||n.ctrlKey||($R=!0)}function $2(){$R=!1}function Poe(){this.visibilityState==="hidden"&&hD&&($R=!0)}function Foe(n){n.addEventListener("keydown",Boe,!0),n.addEventListener("mousedown",$2,!0),n.addEventListener("pointerdown",$2,!0),n.addEventListener("touchstart",$2,!0),n.addEventListener("visibilitychange",Poe,!0)}function Uoe(n){const{target:e}=n;try{return e.matches(":focus-visible")}catch{}return $R||Noe(e)}function i9(){const n=me.useCallback(s=>{s!=null&&Foe(s.ownerDocument)},[]),e=me.useRef(!1);function t(){return e.current?(hD=!0,Loe.start(100,()=>{hD=!1}),e.current=!1,!0):!1}function i(s){return Uoe(s)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:i,onBlur:t,ref:n}}function s9(n){const e=n.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function xo(n,e,t=void 0){const i={};return Object.keys(n).forEach(s=>{i[s]=n[s].reduce((o,l)=>{if(l){const u=e(l);u!==""&&o.push(u),t&&t[l]&&o.push(t[l])}return o},[]).join(" ")}),i}const zoe=me.createContext(),Hoe=()=>{const n=me.useContext(zoe);return n??!1};function Yw(n){"@babel/helpers - typeof";return Yw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yw(n)}function Goe(n,e){if(Yw(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(Yw(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Woe(n){var e=Goe(n,"string");return Yw(e)=="symbol"?e:e+""}const Voe=["className","component","disableGutters","fixed","maxWidth","classes"],joe=$E(),Xoe=n9("div",{name:"MuiContainer",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`maxWidth${lr(String(t.maxWidth))}`],t.fixed&&e.fixed,t.disableGutters&&e.disableGutters]}}),Yoe=n=>nP({props:n,name:"MuiContainer",defaultTheme:joe}),Koe=(n,e)=>{const t=d=>no(e,d),{classes:i,fixed:s,disableGutters:o,maxWidth:l}=n,u={root:["root",l&&`maxWidth${lr(String(l))}`,s&&"fixed",o&&"disableGutters"]};return xo(u,t,i)};function Joe(n={}){const{createStyledComponent:e=Xoe,useThemeProps:t=Yoe,componentName:i="MuiContainer"}=n,s=e(({theme:l,ownerState:u})=>Ye({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!u.disableGutters&&{paddingLeft:l.spacing(2),paddingRight:l.spacing(2),[l.breakpoints.up("sm")]:{paddingLeft:l.spacing(3),paddingRight:l.spacing(3)}}),({theme:l,ownerState:u})=>u.fixed&&Object.keys(l.breakpoints.values).reduce((d,p)=>{const _=p,y=l.breakpoints.values[_];return y!==0&&(d[l.breakpoints.up(_)]={maxWidth:`${y}${l.breakpoints.unit}`}),d},{}),({theme:l,ownerState:u})=>Ye({},u.maxWidth==="xs"&&{[l.breakpoints.up("xs")]:{maxWidth:Math.max(l.breakpoints.values.xs,444)}},u.maxWidth&&u.maxWidth!=="xs"&&{[l.breakpoints.up(u.maxWidth)]:{maxWidth:`${l.breakpoints.values[u.maxWidth]}${l.breakpoints.unit}`}}));return me.forwardRef(function(u,d){const p=t(u),{className:_,component:y="div",disableGutters:b=!1,fixed:E=!1,maxWidth:C="lg"}=p,A=Tr(p,Voe),I=Ye({},p,{component:y,disableGutters:b,fixed:E,maxWidth:C}),L=Koe(I,i);return Ve.jsx(s,Ye({as:y,ownerState:I,className:qr(L.root,_),ref:d},A))})}const qoe=["component","direction","spacing","divider","children","className","useFlexGap"],Qoe=$E(),Zoe=n9("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root});function eae(n){return nP({props:n,name:"MuiStack",defaultTheme:Qoe})}function tae(n,e){const t=me.Children.toArray(n).filter(Boolean);return t.reduce((i,s,o)=>(i.push(s),o<t.length-1&&i.push(me.cloneElement(e,{key:`separator-${o}`})),i),[])}const nae=n=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[n],rae=({ownerState:n,theme:e})=>{let t=Ye({display:"flex",flexDirection:"column"},Wf({theme:e},u1({values:n.direction,breakpoints:e.breakpoints.values}),i=>({flexDirection:i})));if(n.spacing){const i=JB(e),s=Object.keys(e.breakpoints.values).reduce((d,p)=>((typeof n.spacing=="object"&&n.spacing[p]!=null||typeof n.direction=="object"&&n.direction[p]!=null)&&(d[p]=!0),d),{}),o=u1({values:n.direction,base:s}),l=u1({values:n.spacing,base:s});typeof o=="object"&&Object.keys(o).forEach((d,p,_)=>{if(!o[d]){const b=p>0?o[_[p-1]]:"column";o[d]=b}}),t=of(t,Wf({theme:e},l,(d,p)=>n.useFlexGap?{gap:$1(i,d)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${nae(p?o[p]:n.direction)}`]:$1(i,d)}}))}return t=ose(e.breakpoints,t),t};function iae(n={}){const{createStyledComponent:e=Zoe,useThemeProps:t=eae,componentName:i="MuiStack"}=n,s=()=>xo({root:["root"]},d=>no(i,d),{}),o=e(rae);return me.forwardRef(function(d,p){const _=t(d),y=I$(_),{component:b="div",direction:E="column",spacing:C=0,divider:A,children:I,className:L,useFlexGap:O=!1}=y,P=Tr(y,qoe),N={direction:E,spacing:C,useFlexGap:O},z=s();return Ve.jsx(o,Ye({as:b,ownerState:N,ref:p,className:qr(z.root,L)},P,{children:A?tae(I,A):I}))})}function sae(n,e){return Ye({toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}}},e)}var ch={},o9={exports:{}};(function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(o9);var CE=o9.exports;const oae=n_(Vre),aae=n_($oe);var a9=CE;Object.defineProperty(ch,"__esModule",{value:!0});var dg=ch.alpha=p9;ch.blend=vae;ch.colorChannel=void 0;var l9=ch.darken=sP;ch.decomposeColor=gg;ch.emphasize=f9;var lae=ch.getContrastRatio=pae;ch.getLuminance=nI;ch.hexToRgb=c9;ch.hslToRgb=d9;var u9=ch.lighten=oP;ch.private_safeAlpha=fae;ch.private_safeColorChannel=void 0;ch.private_safeDarken=mae;ch.private_safeEmphasize=_ae;ch.private_safeLighten=gae;ch.recomposeColor=AE;ch.rgbToHex=dae;var kz=a9(oae),uae=a9(aae);function iP(n,e=0,t=1){return(0,uae.default)(n,e,t)}function c9(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(i=>i+i)),t?`rgb${t.length===4?"a":""}(${t.map((i,s)=>s<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function cae(n){const e=n.toString(16);return e.length===1?`0${e}`:e}function gg(n){if(n.type)return n;if(n.charAt(0)==="#")return gg(c9(n));const e=n.indexOf("("),t=n.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(t)===-1)throw new Error((0,kz.default)(9,n));let i=n.substring(e+1,n.length-1),s;if(t==="color"){if(i=i.split(" "),s=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s)===-1)throw new Error((0,kz.default)(10,s))}else i=i.split(",");return i=i.map(o=>parseFloat(o)),{type:t,values:i,colorSpace:s}}const h9=n=>{const e=gg(n);return e.values.slice(0,3).map((t,i)=>e.type.indexOf("hsl")!==-1&&i!==0?`${t}%`:t).join(" ")};ch.colorChannel=h9;const hae=(n,e)=>{try{return h9(n)}catch{return n}};ch.private_safeColorChannel=hae;function AE(n){const{type:e,colorSpace:t}=n;let{values:i}=n;return e.indexOf("rgb")!==-1?i=i.map((s,o)=>o<3?parseInt(s,10):s):e.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),e.indexOf("color")!==-1?i=`${t} ${i.join(" ")}`:i=`${i.join(", ")}`,`${e}(${i})`}function dae(n){if(n.indexOf("#")===0)return n;const{values:e}=gg(n);return`#${e.map((t,i)=>cae(i===3?Math.round(255*t):t)).join("")}`}function d9(n){n=gg(n);const{values:e}=n,t=e[0],i=e[1]/100,s=e[2]/100,o=i*Math.min(s,1-s),l=(p,_=(p+t/30)%12)=>s-o*Math.max(Math.min(_-3,9-_,1),-1);let u="rgb";const d=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return n.type==="hsla"&&(u+="a",d.push(e[3])),AE({type:u,values:d})}function nI(n){n=gg(n);let e=n.type==="hsl"||n.type==="hsla"?gg(d9(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function pae(n,e){const t=nI(n),i=nI(e);return(Math.max(t,i)+.05)/(Math.min(t,i)+.05)}function p9(n,e){return n=gg(n),e=iP(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,AE(n)}function fae(n,e,t){try{return p9(n,e)}catch{return n}}function sP(n,e){if(n=gg(n),e=iP(e),n.type.indexOf("hsl")!==-1)n.values[2]*=1-e;else if(n.type.indexOf("rgb")!==-1||n.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)n.values[t]*=1-e;return AE(n)}function mae(n,e,t){try{return sP(n,e)}catch{return n}}function oP(n,e){if(n=gg(n),e=iP(e),n.type.indexOf("hsl")!==-1)n.values[2]+=(100-n.values[2])*e;else if(n.type.indexOf("rgb")!==-1)for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return AE(n)}function gae(n,e,t){try{return oP(n,e)}catch{return n}}function f9(n,e=.15){return nI(n)>.5?sP(n,e):oP(n,e)}function _ae(n,e,t){try{return f9(n,e)}catch{return n}}function vae(n,e,t,i=1){const s=(d,p)=>Math.round((d**(1/i)*(1-t)+p**(1/i)*t)**i),o=gg(n),l=gg(e),u=[s(o.values[0],l.values[0]),s(o.values[1],l.values[1]),s(o.values[2],l.values[2])];return AE({type:"rgb",values:u})}const yae=["mode","contrastThreshold","tonalOffset"],Oz={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ww.white,default:Ww.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},C2={text:{primary:Ww.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Ww.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Lz(n,e,t,i){const s=i.light||i,o=i.dark||i*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=u9(n.main,s):e==="dark"&&(n.dark=l9(n.main,o)))}function bae(n="light"){return n==="dark"?{main:PT[200],light:PT[50],dark:PT[400]}:{main:PT[700],light:PT[400],dark:PT[800]}}function Tae(n="light"){return n==="dark"?{main:BT[200],light:BT[50],dark:BT[400]}:{main:BT[500],light:BT[300],dark:BT[700]}}function Sae(n="light"){return n==="dark"?{main:NT[500],light:NT[300],dark:NT[700]}:{main:NT[700],light:NT[400],dark:NT[800]}}function Eae(n="light"){return n==="dark"?{main:FT[400],light:FT[300],dark:FT[700]}:{main:FT[700],light:FT[500],dark:FT[900]}}function xae(n="light"){return n==="dark"?{main:UT[400],light:UT[300],dark:UT[700]}:{main:UT[800],light:UT[500],dark:UT[900]}}function wae(n="light"){return n==="dark"?{main:vx[400],light:vx[300],dark:vx[700]}:{main:"#ed6c02",light:vx[500],dark:vx[900]}}function $ae(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:i=.2}=n,s=Tr(n,yae),o=n.primary||bae(e),l=n.secondary||Tae(e),u=n.error||Sae(e),d=n.info||Eae(e),p=n.success||xae(e),_=n.warning||wae(e);function y(A){return lae(A,C2.text.primary)>=t?C2.text.primary:Oz.text.primary}const b=({color:A,name:I,mainShade:L=500,lightShade:O=300,darkShade:P=700})=>{if(A=Ye({},A),!A.main&&A[L]&&(A.main=A[L]),!A.hasOwnProperty("main"))throw new Error(w1(11,I?` (${I})`:"",L));if(typeof A.main!="string")throw new Error(w1(12,I?` (${I})`:"",JSON.stringify(A.main)));return Lz(A,"light",O,i),Lz(A,"dark",P,i),A.contrastText||(A.contrastText=y(A.main)),A},E={dark:C2,light:Oz};return of(Ye({common:Ye({},Ww),mode:e,primary:b({color:o,name:"primary"}),secondary:b({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:b({color:u,name:"error"}),warning:b({color:_,name:"warning"}),info:b({color:d,name:"info"}),success:b({color:p,name:"success"}),grey:Wre,contrastThreshold:t,getContrastText:y,augmentColor:b,tonalOffset:i},E[e]),s)}const Cae=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Aae(n){return Math.round(n*1e5)/1e5}const Dz={textTransform:"uppercase"},Nz='"Roboto", "Helvetica", "Arial", sans-serif';function Mae(n,e){const t=typeof e=="function"?e(n):e,{fontFamily:i=Nz,fontSize:s=14,fontWeightLight:o=300,fontWeightRegular:l=400,fontWeightMedium:u=500,fontWeightBold:d=700,htmlFontSize:p=16,allVariants:_,pxToRem:y}=t,b=Tr(t,Cae),E=s/14,C=y||(L=>`${L/p*E}rem`),A=(L,O,P,N,z)=>Ye({fontFamily:i,fontWeight:L,fontSize:C(O),lineHeight:P},i===Nz?{letterSpacing:`${Aae(N/O)}em`}:{},z,_),I={h1:A(o,96,1.167,-1.5),h2:A(o,60,1.2,-.5),h3:A(l,48,1.167,0),h4:A(l,34,1.235,.25),h5:A(l,24,1.334,0),h6:A(u,20,1.6,.15),subtitle1:A(l,16,1.75,.15),subtitle2:A(u,14,1.57,.1),body1:A(l,16,1.5,.15),body2:A(l,14,1.43,.15),button:A(u,14,1.75,.4,Dz),caption:A(l,12,1.66,.4),overline:A(l,12,2.66,1,Dz),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return of(Ye({htmlFontSize:p,pxToRem:C,fontFamily:i,fontSize:s,fontWeightLight:o,fontWeightRegular:l,fontWeightMedium:u,fontWeightBold:d},I),b,{clone:!1})}const Iae=.2,Rae=.14,kae=.12;function Lu(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${Iae})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${Rae})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${kae})`].join(",")}const Oae=["none",Lu(0,2,1,-1,0,1,1,0,0,1,3,0),Lu(0,3,1,-2,0,2,2,0,0,1,5,0),Lu(0,3,3,-2,0,3,4,0,0,1,8,0),Lu(0,2,4,-1,0,4,5,0,0,1,10,0),Lu(0,3,5,-1,0,5,8,0,0,1,14,0),Lu(0,3,5,-1,0,6,10,0,0,1,18,0),Lu(0,4,5,-2,0,7,10,1,0,2,16,1),Lu(0,5,5,-3,0,8,10,1,0,3,14,2),Lu(0,5,6,-3,0,9,12,1,0,3,16,2),Lu(0,6,6,-3,0,10,14,1,0,4,18,3),Lu(0,6,7,-4,0,11,15,1,0,4,20,3),Lu(0,7,8,-4,0,12,17,2,0,5,22,4),Lu(0,7,8,-4,0,13,19,2,0,5,24,4),Lu(0,7,9,-4,0,14,21,2,0,5,26,4),Lu(0,8,9,-5,0,15,22,2,0,6,28,5),Lu(0,8,10,-5,0,16,24,2,0,6,30,5),Lu(0,8,11,-5,0,17,26,2,0,6,32,5),Lu(0,9,11,-5,0,18,28,2,0,7,34,6),Lu(0,9,12,-6,0,19,29,2,0,7,36,6),Lu(0,10,13,-6,0,20,31,3,0,8,38,7),Lu(0,10,13,-6,0,21,33,3,0,8,40,7),Lu(0,10,14,-6,0,22,35,3,0,8,42,7),Lu(0,11,14,-7,0,23,36,3,0,9,44,8),Lu(0,11,15,-7,0,24,38,3,0,9,46,8)],Lae=["duration","easing","delay"],Dae={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Nae={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Bz(n){return`${Math.round(n)}ms`}function Bae(n){if(!n)return 0;const e=n/36;return Math.round((4+15*e**.25+e/5)*10)}function Pae(n){const e=Ye({},Dae,n.easing),t=Ye({},Nae,n.duration);return Ye({getAutoHeightDuration:Bae,create:(s=["all"],o={})=>{const{duration:l=t.standard,easing:u=e.easeInOut,delay:d=0}=o;return Tr(o,Lae),(Array.isArray(s)?s:[s]).map(p=>`${p} ${typeof l=="string"?l:Bz(l)} ${u} ${typeof d=="string"?d:Bz(d)}`).join(",")}},n,{easing:e,duration:t})}const Fae={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Uae=Fae,zae=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function m9(n={},...e){const{mixins:t={},palette:i={},transitions:s={},typography:o={}}=n,l=Tr(n,zae);if(n.vars)throw new Error(w1(18));const u=$ae(i),d=$E(n);let p=of(d,{mixins:sae(d.breakpoints,t),palette:u,shadows:Oae.slice(),typography:Mae(u,o),transitions:Pae(s),zIndex:Ye({},Uae)});return p=of(p,l),p=e.reduce((_,y)=>of(_,y),p),p.unstable_sxConfig=Ye({},A$,l==null?void 0:l.unstable_sxConfig),p.unstable_sx=function(y){return M$({sx:y,theme:this})},p}const Hae=m9(),CR=Hae;function AR(){const n=pR(CR);return n[w$]||n}function Po({props:n,name:e}){return nP({props:n,name:e,defaultTheme:CR,themeId:w$})}var R$={};const Gae=n_(jre);var A2={exports:{}},Pz;function Wae(){return Pz||(Pz=1,function(n){function e(t,i){if(t==null)return{};var s={},o=Object.keys(t),l,u;for(u=0;u<o.length;u++)l=o[u],!(i.indexOf(l)>=0)&&(s[l]=t[l]);return s}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(A2)),A2.exports}const Vae=n_(ese),jae=n_(tse),Xae=n_(lse),Yae=n_(poe),Kae=n_(Jse),Jae=n_(roe);var ME=CE;Object.defineProperty(R$,"__esModule",{value:!0});var qae=R$.default=cle;R$.shouldForwardProp=lM;R$.systemDefaultTheme=void 0;var ng=ME(Gae),dD=ME(Wae()),Fz=ile(Vae),Qae=jae;ME(Xae);ME(Yae);var Zae=ME(Kae),ele=ME(Jae);const tle=["ownerState"],nle=["variants"],rle=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function g9(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(g9=function(i){return i?t:e})(n)}function ile(n,e){if(!e&&n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=g9(e);if(t&&t.has(n))return t.get(n);var i={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in n)if(o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)){var l=s?Object.getOwnPropertyDescriptor(n,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=n[o]}return i.default=n,t&&t.set(n,i),i}function sle(n){return Object.keys(n).length===0}function ole(n){return typeof n=="string"&&n.charCodeAt(0)>96}function lM(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const ale=R$.systemDefaultTheme=(0,Zae.default)(),lle=n=>n&&n.charAt(0).toLowerCase()+n.slice(1);function DC({defaultTheme:n,theme:e,themeId:t}){return sle(e)?n:e[t]||e}function ule(n){return n?(e,t)=>t[n]:null}function uM(n,e){let{ownerState:t}=e,i=(0,dD.default)(e,tle);const s=typeof n=="function"?n((0,ng.default)({ownerState:t},i)):n;if(Array.isArray(s))return s.flatMap(o=>uM(o,(0,ng.default)({ownerState:t},i)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:o=[]}=s;let u=(0,dD.default)(s,nle);return o.forEach(d=>{let p=!0;typeof d.props=="function"?p=d.props((0,ng.default)({ownerState:t},i,t)):Object.keys(d.props).forEach(_=>{(t==null?void 0:t[_])!==d.props[_]&&i[_]!==d.props[_]&&(p=!1)}),p&&(Array.isArray(u)||(u=[u]),u.push(typeof d.style=="function"?d.style((0,ng.default)({ownerState:t},i,t)):d.style))}),u}return s}function cle(n={}){const{themeId:e,defaultTheme:t=ale,rootShouldForwardProp:i=lM,slotShouldForwardProp:s=lM}=n,o=l=>(0,ele.default)((0,ng.default)({},l,{theme:DC((0,ng.default)({},l,{defaultTheme:t,themeId:e}))}));return o.__mui_systemSx=!0,(l,u={})=>{(0,Fz.internal_processStyles)(l,z=>z.filter(W=>!(W!=null&&W.__mui_systemSx)));const{name:d,slot:p,skipVariantsResolver:_,skipSx:y,overridesResolver:b=ule(lle(p))}=u,E=(0,dD.default)(u,rle),C=_!==void 0?_:p&&p!=="Root"&&p!=="root"||!1,A=y||!1;let I,L=lM;p==="Root"||p==="root"?L=i:p?L=s:ole(l)&&(L=void 0);const O=(0,Fz.default)(l,(0,ng.default)({shouldForwardProp:L,label:I},E)),P=z=>typeof z=="function"&&z.__emotion_real!==z||(0,Qae.isPlainObject)(z)?W=>uM(z,(0,ng.default)({},W,{theme:DC({theme:W.theme,defaultTheme:t,themeId:e})})):z,N=(z,...W)=>{let H=P(z);const U=W?W.map(P):[];d&&b&&U.push(oe=>{const le=DC((0,ng.default)({},oe,{defaultTheme:t,themeId:e}));if(!le.components||!le.components[d]||!le.components[d].styleOverrides)return null;const ge=le.components[d].styleOverrides,ce={};return Object.entries(ge).forEach(([pe,Te])=>{ce[pe]=uM(Te,(0,ng.default)({},oe,{theme:le}))}),b(oe,ce)}),d&&!C&&U.push(oe=>{var le;const ge=DC((0,ng.default)({},oe,{defaultTheme:t,themeId:e})),ce=ge==null||(le=ge.components)==null||(le=le[d])==null?void 0:le.variants;return uM({variants:ce},(0,ng.default)({},oe,{theme:ge}))}),A||U.push(o);const Q=U.length-W.length;if(Array.isArray(z)&&Q>0){const oe=new Array(Q).fill("");H=[...z,...oe],H.raw=[...z.raw,...oe]}const ne=O(H,...U);return l.muiName&&(ne.muiName=l.muiName),ne};return O.withConfig&&(N.withConfig=O.withConfig),N}}function _9(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const hle=n=>_9(n)&&n!=="classes",Nm=hle,or=qae({themeId:w$,defaultTheme:CR,rootShouldForwardProp:Nm}),Uz=n=>{let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,(e/100).toFixed(2)};function dle(n){return no("MuiSvgIcon",n)}Eo("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const ple=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],fle=n=>{const{color:e,fontSize:t,classes:i}=n,s={root:["root",e!=="inherit"&&`color${lr(e)}`,`fontSize${lr(t)}`]};return xo(s,dle,i)},mle=or("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${lr(t.color)}`],e[`fontSize${lr(t.fontSize)}`]]}})(({theme:n,ownerState:e})=>{var t,i,s,o,l,u,d,p,_,y,b,E,C;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(t=n.transitions)==null||(i=t.create)==null?void 0:i.call(t,"fill",{duration:(s=n.transitions)==null||(s=s.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((o=n.typography)==null||(l=o.pxToRem)==null?void 0:l.call(o,20))||"1.25rem",medium:((u=n.typography)==null||(d=u.pxToRem)==null?void 0:d.call(u,24))||"1.5rem",large:((p=n.typography)==null||(_=p.pxToRem)==null?void 0:_.call(p,35))||"2.1875rem"}[e.fontSize],color:(y=(b=(n.vars||n).palette)==null||(b=b[e.color])==null?void 0:b.main)!=null?y:{action:(E=(n.vars||n).palette)==null||(E=E.action)==null?void 0:E.active,disabled:(C=(n.vars||n).palette)==null||(C=C.action)==null?void 0:C.disabled,inherit:void 0}[e.color]}}),pD=me.forwardRef(function(e,t){const i=Po({props:e,name:"MuiSvgIcon"}),{children:s,className:o,color:l="inherit",component:u="svg",fontSize:d="medium",htmlColor:p,inheritViewBox:_=!1,titleAccess:y,viewBox:b="0 0 24 24"}=i,E=Tr(i,ple),C=me.isValidElement(s)&&s.type==="svg",A=Ye({},i,{color:l,component:u,fontSize:d,instanceFontSize:e.fontSize,inheritViewBox:_,viewBox:b,hasSvgAsChild:C}),I={};_||(I.viewBox=b);const L=fle(A);return Ve.jsxs(mle,Ye({as:u,className:qr(L.root,o),focusable:"false",color:p,"aria-hidden":y?void 0:!0,role:y?"img":void 0,ref:t},I,E,C&&s.props,{ownerState:A,children:[C?s.props.children:s,y?Ve.jsx("title",{children:y}):null]}))});pD.muiName="SvgIcon";function IE(n,e){function t(i,s){return Ve.jsx(pD,Ye({"data-testid":`${e}Icon`,ref:s},i,{children:n}))}return t.muiName=pD.muiName,me.memo(me.forwardRef(t))}const gle={configure:n=>{QB.configure(n)}},_le=Object.freeze(Object.defineProperty({__proto__:null,capitalize:lr,createChainedFunction:cD,createSvgIcon:IE,debounce:rP,deprecatedPropType:Coe,isMuiElement:aM,ownerDocument:Hf,ownerWindow:Ty,requirePropFactory:Aoe,setRef:eI,unstable_ClassNameGenerator:gle,unstable_useEnhancedEffect:by,unstable_useId:xR,unsupportedProp:Ioe,useControlled:tI,useEventCallback:qb,useForkRef:uf,useIsFocusVisible:i9},Symbol.toStringTag,{value:"Module"}));function vle(n){return Po}function fD(n,e){return fD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},fD(n,e)}function aP(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,fD(n,e)}const zz={disabled:!1},rI=Vr.createContext(null);var yle=function(e){return e.scrollTop},Yx="unmounted",Bb="exited",Pb="entering",lS="entered",mD="exiting",uv=function(n){aP(e,n);function e(i,s){var o;o=n.call(this,i,s)||this;var l=s,u=l&&!l.isMounting?i.enter:i.appear,d;return o.appearStatus=null,i.in?u?(d=Bb,o.appearStatus=Pb):d=lS:i.unmountOnExit||i.mountOnEnter?d=Yx:d=Bb,o.state={status:d},o.nextCallback=null,o}e.getDerivedStateFromProps=function(s,o){var l=s.in;return l&&o.status===Yx?{status:Bb}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var o=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==Pb&&l!==lS&&(o=Pb):(l===Pb||l===lS)&&(o=mD)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,o,l,u;return o=l=u=s,s!=null&&typeof s!="number"&&(o=s.exit,l=s.enter,u=s.appear!==void 0?s.appear:l),{exit:o,enter:l,appear:u}},t.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===Pb){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:aC.findDOMNode(this);l&&yle(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Bb&&this.setState({status:Yx})},t.performEnter=function(s){var o=this,l=this.props.enter,u=this.context?this.context.isMounting:s,d=this.props.nodeRef?[u]:[aC.findDOMNode(this),u],p=d[0],_=d[1],y=this.getTimeouts(),b=u?y.appear:y.enter;if(!s&&!l||zz.disabled){this.safeSetState({status:lS},function(){o.props.onEntered(p)});return}this.props.onEnter(p,_),this.safeSetState({status:Pb},function(){o.props.onEntering(p,_),o.onTransitionEnd(b,function(){o.safeSetState({status:lS},function(){o.props.onEntered(p,_)})})})},t.performExit=function(){var s=this,o=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:aC.findDOMNode(this);if(!o||zz.disabled){this.safeSetState({status:Bb},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:mD},function(){s.props.onExiting(u),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:Bb},function(){s.props.onExited(u)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},t.setNextCallback=function(s){var o=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,o.nextCallback=null,s(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},t.onTransitionEnd=function(s,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:aC.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],p=d[0],_=d[1];this.props.addEndListener(p,_)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===Yx)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var u=Tr(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Vr.createElement(rI.Provider,{value:null},typeof l=="function"?l(s,u):Vr.cloneElement(Vr.Children.only(l),u))},e}(Vr.Component);uv.contextType=rI;uv.propTypes={};function zT(){}uv.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:zT,onEntering:zT,onEntered:zT,onExit:zT,onExiting:zT,onExited:zT};uv.UNMOUNTED=Yx;uv.EXITED=Bb;uv.ENTERING=Pb;uv.ENTERED=lS;uv.EXITING=mD;const v9=uv;function ble(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function lP(n,e){var t=function(o){return e&&me.isValidElement(o)?e(o):o},i=Object.create(null);return n&&me.Children.map(n,function(s){return s}).forEach(function(s){i[s.key]=t(s)}),i}function Tle(n,e){n=n||{},e=e||{};function t(_){return _ in e?e[_]:n[_]}var i=Object.create(null),s=[];for(var o in n)o in e?s.length&&(i[o]=s,s=[]):s.push(o);var l,u={};for(var d in e){if(i[d])for(l=0;l<i[d].length;l++){var p=i[d][l];u[i[d][l]]=t(p)}u[d]=t(d)}for(l=0;l<s.length;l++)u[s[l]]=t(s[l]);return u}function Qb(n,e,t){return t[e]!=null?t[e]:n.props[e]}function Sle(n,e){return lP(n.children,function(t){return me.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:Qb(t,"appear",n),enter:Qb(t,"enter",n),exit:Qb(t,"exit",n)})})}function Ele(n,e,t){var i=lP(n.children),s=Tle(e,i);return Object.keys(s).forEach(function(o){var l=s[o];if(me.isValidElement(l)){var u=o in e,d=o in i,p=e[o],_=me.isValidElement(p)&&!p.props.in;d&&(!u||_)?s[o]=me.cloneElement(l,{onExited:t.bind(null,l),in:!0,exit:Qb(l,"exit",n),enter:Qb(l,"enter",n)}):!d&&u&&!_?s[o]=me.cloneElement(l,{in:!1}):d&&u&&me.isValidElement(p)&&(s[o]=me.cloneElement(l,{onExited:t.bind(null,l),in:p.props.in,exit:Qb(l,"exit",n),enter:Qb(l,"enter",n)}))}}),s}var xle=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},wle={component:"div",childFactory:function(e){return e}},uP=function(n){aP(e,n);function e(i,s){var o;o=n.call(this,i,s)||this;var l=o.handleExited.bind(ble(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,o){var l=o.children,u=o.handleExited,d=o.firstRender;return{children:d?Sle(s,u):Ele(s,l,u),firstRender:!1}},t.handleExited=function(s,o){var l=lP(this.props.children);s.key in l||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(u){var d=Ye({},u.children);return delete d[s.key],{children:d}}))},t.render=function(){var s=this.props,o=s.component,l=s.childFactory,u=Tr(s,["component","childFactory"]),d=this.state.contextValue,p=xle(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,o===null?Vr.createElement(rI.Provider,{value:d},p):Vr.createElement(rI.Provider,{value:d},Vr.createElement(o,u,p))},e}(Vr.Component);uP.propTypes={};uP.defaultProps=wle;const $le=uP,y9=n=>n.scrollTop;function iI(n,e){var t,i;const{timeout:s,easing:o,style:l={}}=n;return{duration:(t=l.transitionDuration)!=null?t:typeof s=="number"?s:s[e.mode]||0,easing:(i=l.transitionTimingFunction)!=null?i:typeof o=="object"?o[e.mode]:o,delay:l.transitionDelay}}function Cle(n){return no("MuiPaper",n)}Eo("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Ale=["className","component","elevation","square","variant"],Mle=n=>{const{square:e,elevation:t,variant:i,classes:s}=n,o={root:["root",i,!e&&"rounded",i==="elevation"&&`elevation${t}`]};return xo(o,Cle,s)},Ile=or("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(({theme:n,ownerState:e})=>{var t;return Ye({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!e.square&&{borderRadius:n.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(n.vars||n).palette.divider}`},e.variant==="elevation"&&Ye({boxShadow:(n.vars||n).shadows[e.elevation]},!n.vars&&n.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${dg("#fff",Uz(e.elevation))}, ${dg("#fff",Uz(e.elevation))})`},n.vars&&{backgroundImage:(t=n.vars.overlays)==null?void 0:t[e.elevation]}))}),Rle=me.forwardRef(function(e,t){const i=Po({props:e,name:"MuiPaper"}),{className:s,component:o="div",elevation:l=1,square:u=!1,variant:d="elevation"}=i,p=Tr(i,Ale),_=Ye({},i,{component:o,elevation:l,square:u,variant:d}),y=Mle(_);return Ve.jsx(Ile,Ye({as:o,ownerState:_,className:qr(y.root,s),ref:t},p))}),cP=Rle;function sI(n){return typeof n=="string"}function kle(n,e,t){return n===void 0||sI(n)?e:Ye({},e,{ownerState:Ye({},e.ownerState,t)})}function b9(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(i=>i.match(/^on[A-Z]/)&&typeof n[i]=="function"&&!e.includes(i)).forEach(i=>{t[i]=n[i]}),t}function Ole(n,e,t){return typeof n=="function"?n(e,t):n}function Hz(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function Lle(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:i,externalForwardedProps:s,className:o}=n;if(!e){const E=qr(t==null?void 0:t.className,o,s==null?void 0:s.className,i==null?void 0:i.className),C=Ye({},t==null?void 0:t.style,s==null?void 0:s.style,i==null?void 0:i.style),A=Ye({},t,s,i);return E.length>0&&(A.className=E),Object.keys(C).length>0&&(A.style=C),{props:A,internalRef:void 0}}const l=b9(Ye({},s,i)),u=Hz(i),d=Hz(s),p=e(l),_=qr(p==null?void 0:p.className,t==null?void 0:t.className,o,s==null?void 0:s.className,i==null?void 0:i.className),y=Ye({},p==null?void 0:p.style,t==null?void 0:t.style,s==null?void 0:s.style,i==null?void 0:i.style),b=Ye({},p,t,d,u);return _.length>0&&(b.className=_),Object.keys(y).length>0&&(b.style=y),{props:b,internalRef:p.ref}}const Dle=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function ZS(n){var e;const{elementType:t,externalSlotProps:i,ownerState:s,skipResolvingSlotProps:o=!1}=n,l=Tr(n,Dle),u=o?{}:Ole(i,s),{props:d,internalRef:p}=Lle(Ye({},l,{externalSlotProps:u})),_=uf(p,u==null?void 0:u.ref,(e=n.additionalProps)==null?void 0:e.ref);return kle(t,Ye({},d,{ref:_}),s)}function Nle(n){const{className:e,classes:t,pulsate:i=!1,rippleX:s,rippleY:o,rippleSize:l,in:u,onExited:d,timeout:p}=n,[_,y]=me.useState(!1),b=qr(e,t.ripple,t.rippleVisible,i&&t.ripplePulsate),E={width:l,height:l,top:-(l/2)+o,left:-(l/2)+s},C=qr(t.child,_&&t.childLeaving,i&&t.childPulsate);return!u&&!_&&y(!0),me.useEffect(()=>{if(!u&&d!=null){const A=setTimeout(d,p);return()=>{clearTimeout(A)}}},[d,u,p]),Ve.jsx("span",{className:b,style:E,children:Ve.jsx("span",{className:C})})}const ig=Eo("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Ble=["center","classes","className"];let MR=n=>n,Gz,Wz,Vz,jz;const gD=550,Ple=80,Fle=wE(Gz||(Gz=MR`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Ule=wE(Wz||(Wz=MR`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),zle=wE(Vz||(Vz=MR`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Hle=or("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Gle=or(Nle,{name:"MuiTouchRipple",slot:"Ripple"})(jz||(jz=MR`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),ig.rippleVisible,Fle,gD,({theme:n})=>n.transitions.easing.easeInOut,ig.ripplePulsate,({theme:n})=>n.transitions.duration.shorter,ig.child,ig.childLeaving,Ule,gD,({theme:n})=>n.transitions.easing.easeInOut,ig.childPulsate,zle,({theme:n})=>n.transitions.easing.easeInOut),Wle=me.forwardRef(function(e,t){const i=Po({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:o={},className:l}=i,u=Tr(i,Ble),[d,p]=me.useState([]),_=me.useRef(0),y=me.useRef(null);me.useEffect(()=>{y.current&&(y.current(),y.current=null)},[d]);const b=me.useRef(!1),E=r9(),C=me.useRef(null),A=me.useRef(null),I=me.useCallback(N=>{const{pulsate:z,rippleX:W,rippleY:H,rippleSize:U,cb:Q}=N;p(ne=>[...ne,Ve.jsx(Gle,{classes:{ripple:qr(o.ripple,ig.ripple),rippleVisible:qr(o.rippleVisible,ig.rippleVisible),ripplePulsate:qr(o.ripplePulsate,ig.ripplePulsate),child:qr(o.child,ig.child),childLeaving:qr(o.childLeaving,ig.childLeaving),childPulsate:qr(o.childPulsate,ig.childPulsate)},timeout:gD,pulsate:z,rippleX:W,rippleY:H,rippleSize:U},_.current)]),_.current+=1,y.current=Q},[o]),L=me.useCallback((N={},z={},W=()=>{})=>{const{pulsate:H=!1,center:U=s||z.pulsate,fakeElement:Q=!1}=z;if((N==null?void 0:N.type)==="mousedown"&&b.current){b.current=!1;return}(N==null?void 0:N.type)==="touchstart"&&(b.current=!0);const ne=Q?null:A.current,oe=ne?ne.getBoundingClientRect():{width:0,height:0,left:0,top:0};let le,ge,ce;if(U||N===void 0||N.clientX===0&&N.clientY===0||!N.clientX&&!N.touches)le=Math.round(oe.width/2),ge=Math.round(oe.height/2);else{const{clientX:pe,clientY:Te}=N.touches&&N.touches.length>0?N.touches[0]:N;le=Math.round(pe-oe.left),ge=Math.round(Te-oe.top)}if(U)ce=Math.sqrt((2*oe.width**2+oe.height**2)/3),ce%2===0&&(ce+=1);else{const pe=Math.max(Math.abs((ne?ne.clientWidth:0)-le),le)*2+2,Te=Math.max(Math.abs((ne?ne.clientHeight:0)-ge),ge)*2+2;ce=Math.sqrt(pe**2+Te**2)}N!=null&&N.touches?C.current===null&&(C.current=()=>{I({pulsate:H,rippleX:le,rippleY:ge,rippleSize:ce,cb:W})},E.start(Ple,()=>{C.current&&(C.current(),C.current=null)})):I({pulsate:H,rippleX:le,rippleY:ge,rippleSize:ce,cb:W})},[s,I,E]),O=me.useCallback(()=>{L({},{pulsate:!0})},[L]),P=me.useCallback((N,z)=>{if(E.clear(),(N==null?void 0:N.type)==="touchend"&&C.current){C.current(),C.current=null,E.start(0,()=>{P(N,z)});return}C.current=null,p(W=>W.length>0?W.slice(1):W),y.current=z},[E]);return me.useImperativeHandle(t,()=>({pulsate:O,start:L,stop:P}),[O,L,P]),Ve.jsx(Hle,Ye({className:qr(ig.root,o.root,l),ref:A},u,{children:Ve.jsx($le,{component:null,exit:!0,children:d})}))}),Vle=Wle;function jle(n){return no("MuiButtonBase",n)}const Xle=Eo("MuiButtonBase",["root","disabled","focusVisible"]),Yle=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Kle=n=>{const{disabled:e,focusVisible:t,focusVisibleClassName:i,classes:s}=n,l=xo({root:["root",e&&"disabled",t&&"focusVisible"]},jle,s);return t&&i&&(l.root+=` ${i}`),l},Jle=or("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Xle.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),qle=me.forwardRef(function(e,t){const i=Po({props:e,name:"MuiButtonBase"}),{action:s,centerRipple:o=!1,children:l,className:u,component:d="button",disabled:p=!1,disableRipple:_=!1,disableTouchRipple:y=!1,focusRipple:b=!1,LinkComponent:E="a",onBlur:C,onClick:A,onContextMenu:I,onDragLeave:L,onFocus:O,onFocusVisible:P,onKeyDown:N,onKeyUp:z,onMouseDown:W,onMouseLeave:H,onMouseUp:U,onTouchEnd:Q,onTouchMove:ne,onTouchStart:oe,tabIndex:le=0,TouchRippleProps:ge,touchRippleRef:ce,type:pe}=i,Te=Tr(i,Yle),Oe=me.useRef(null),J=me.useRef(null),se=uf(J,ce),{isFocusVisibleRef:ie,onFocus:he,onBlur:Se,ref:Fe}=i9(),[ke,qe]=me.useState(!1);p&&ke&&qe(!1),me.useImperativeHandle(s,()=>({focusVisible:()=>{qe(!0),Oe.current.focus()}}),[]);const[De,rt]=me.useState(!1);me.useEffect(()=>{rt(!0)},[]);const tt=De&&!_&&!p;me.useEffect(()=>{ke&&b&&!_&&De&&J.current.pulsate()},[_,b,ke,De]);function ft(Ke,Ie,q=y){return qb(ee=>(Ie&&Ie(ee),!q&&J.current&&J.current[Ke](ee),!0))}const ct=ft("start",W),Pe=ft("stop",I),Ce=ft("stop",L),je=ft("stop",U),it=ft("stop",Ke=>{ke&&Ke.preventDefault(),H&&H(Ke)}),ot=ft("start",oe),vt=ft("stop",Q),It=ft("stop",ne),yt=ft("stop",Ke=>{Se(Ke),ie.current===!1&&qe(!1),C&&C(Ke)},!1),kt=qb(Ke=>{Oe.current||(Oe.current=Ke.currentTarget),he(Ke),ie.current===!0&&(qe(!0),P&&P(Ke)),O&&O(Ke)}),$t=()=>{const Ke=Oe.current;return d&&d!=="button"&&!(Ke.tagName==="A"&&Ke.href)},mt=me.useRef(!1),xe=qb(Ke=>{b&&!mt.current&&ke&&J.current&&Ke.key===" "&&(mt.current=!0,J.current.stop(Ke,()=>{J.current.start(Ke)})),Ke.target===Ke.currentTarget&&$t()&&Ke.key===" "&&Ke.preventDefault(),N&&N(Ke),Ke.target===Ke.currentTarget&&$t()&&Ke.key==="Enter"&&!p&&(Ke.preventDefault(),A&&A(Ke))}),re=qb(Ke=>{b&&Ke.key===" "&&J.current&&ke&&!Ke.defaultPrevented&&(mt.current=!1,J.current.stop(Ke,()=>{J.current.pulsate(Ke)})),z&&z(Ke),A&&Ke.target===Ke.currentTarget&&$t()&&Ke.key===" "&&!Ke.defaultPrevented&&A(Ke)});let Be=d;Be==="button"&&(Te.href||Te.to)&&(Be=E);const dt={};Be==="button"?(dt.type=pe===void 0?"button":pe,dt.disabled=p):(!Te.href&&!Te.to&&(dt.role="button"),p&&(dt["aria-disabled"]=p));const bt=uf(t,Fe,Oe),Mt=Ye({},i,{centerRipple:o,component:d,disabled:p,disableRipple:_,disableTouchRipple:y,focusRipple:b,tabIndex:le,focusVisible:ke}),pt=Kle(Mt);return Ve.jsxs(Jle,Ye({as:Be,className:qr(pt.root,u),ownerState:Mt,onBlur:yt,onClick:A,onContextMenu:Pe,onFocus:kt,onKeyDown:xe,onKeyUp:re,onMouseDown:ct,onMouseLeave:it,onMouseUp:je,onDragLeave:Ce,onTouchEnd:vt,onTouchMove:It,onTouchStart:ot,ref:bt,tabIndex:p?-1:le,type:pe},dt,Te,{children:[l,tt?Ve.jsx(Vle,Ye({ref:se,center:o},ge)):null]}))}),hP=qle;function Qle(n){return no("MuiIconButton",n)}const Zle=Eo("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),eue=["edge","children","className","color","disabled","disableFocusRipple","size"],tue=n=>{const{classes:e,disabled:t,color:i,edge:s,size:o}=n,l={root:["root",t&&"disabled",i!=="default"&&`color${lr(i)}`,s&&`edge${lr(s)}`,`size${lr(o)}`]};return xo(l,Qle,e)},nue=or(hP,{name:"MuiIconButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="default"&&e[`color${lr(t.color)}`],t.edge&&e[`edge${lr(t.edge)}`],e[`size${lr(t.size)}`]]}})(({theme:n,ownerState:e})=>Ye({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:dg(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:n,ownerState:e})=>{var t;const i=(t=(n.vars||n).palette)==null?void 0:t[e.color];return Ye({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&Ye({color:i==null?void 0:i.main},!e.disableRipple&&{"&:hover":Ye({},i&&{backgroundColor:n.vars?`rgba(${i.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:dg(i.main,n.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:n.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:n.typography.pxToRem(28)},{[`&.${Zle.disabled}`]:{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}})}),rue=me.forwardRef(function(e,t){const i=Po({props:e,name:"MuiIconButton"}),{edge:s=!1,children:o,className:l,color:u="default",disabled:d=!1,disableFocusRipple:p=!1,size:_="medium"}=i,y=Tr(i,eue),b=Ye({},i,{edge:s,color:u,disabled:d,disableFocusRipple:p,size:_}),E=tue(b);return Ve.jsx(nue,Ye({className:qr(E.root,l),centerRipple:!0,focusRipple:!p,disabled:d,ref:t},y,{ownerState:b,children:o}))}),cM=rue;function iue(n){return no("MuiTypography",n)}Eo("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const sue=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],oue=n=>{const{align:e,gutterBottom:t,noWrap:i,paragraph:s,variant:o,classes:l}=n,u={root:["root",o,n.align!=="inherit"&&`align${lr(e)}`,t&&"gutterBottom",i&&"noWrap",s&&"paragraph"]};return xo(u,iue,l)},aue=or("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${lr(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(({theme:n,ownerState:e})=>Ye({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&n.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),Xz={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},lue={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},uue=n=>lue[n]||n,cue=me.forwardRef(function(e,t){const i=Po({props:e,name:"MuiTypography"}),s=uue(i.color),o=I$(Ye({},i,{color:s})),{align:l="inherit",className:u,component:d,gutterBottom:p=!1,noWrap:_=!1,paragraph:y=!1,variant:b="body1",variantMapping:E=Xz}=o,C=Tr(o,sue),A=Ye({},o,{align:l,color:s,className:u,component:d,gutterBottom:p,noWrap:_,paragraph:y,variant:b,variantMapping:E}),I=d||(y?"p":E[b]||Xz[b])||"span",L=oue(A);return Ve.jsx(aue,Ye({as:I,ref:t,ownerState:A,className:qr(L.root,u)},C))}),eE=cue,hue=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function due(n){const e=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(e)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:e}function pue(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const e=i=>n.ownerDocument.querySelector(`input[type="radio"]${i}`);let t=e(`[name="${n.name}"]:checked`);return t||(t=e(`[name="${n.name}"]`)),t!==n}function fue(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||pue(n))}function mue(n){const e=[],t=[];return Array.from(n.querySelectorAll(hue)).forEach((i,s)=>{const o=due(i);o===-1||!fue(i)||(o===0?e.push(i):t.push({documentOrder:s,tabIndex:o,node:i}))}),t.sort((i,s)=>i.tabIndex===s.tabIndex?i.documentOrder-s.documentOrder:i.tabIndex-s.tabIndex).map(i=>i.node).concat(e)}function gue(){return!0}function _ue(n){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:i=!1,disableRestoreFocus:s=!1,getTabbable:o=mue,isEnabled:l=gue,open:u}=n,d=me.useRef(!1),p=me.useRef(null),_=me.useRef(null),y=me.useRef(null),b=me.useRef(null),E=me.useRef(!1),C=me.useRef(null),A=uf(e.ref,C),I=me.useRef(null);me.useEffect(()=>{!u||!C.current||(E.current=!t)},[t,u]),me.useEffect(()=>{if(!u||!C.current)return;const P=Hf(C.current);return C.current.contains(P.activeElement)||(C.current.hasAttribute("tabIndex")||C.current.setAttribute("tabIndex","-1"),E.current&&C.current.focus()),()=>{s||(y.current&&y.current.focus&&(d.current=!0,y.current.focus()),y.current=null)}},[u]),me.useEffect(()=>{if(!u||!C.current)return;const P=Hf(C.current),N=H=>{I.current=H,!(i||!l()||H.key!=="Tab")&&P.activeElement===C.current&&H.shiftKey&&(d.current=!0,_.current&&_.current.focus())},z=()=>{const H=C.current;if(H===null)return;if(!P.hasFocus()||!l()||d.current){d.current=!1;return}if(H.contains(P.activeElement)||i&&P.activeElement!==p.current&&P.activeElement!==_.current)return;if(P.activeElement!==b.current)b.current=null;else if(b.current!==null)return;if(!E.current)return;let U=[];if((P.activeElement===p.current||P.activeElement===_.current)&&(U=o(C.current)),U.length>0){var Q,ne;const oe=!!((Q=I.current)!=null&&Q.shiftKey&&((ne=I.current)==null?void 0:ne.key)==="Tab"),le=U[0],ge=U[U.length-1];typeof le!="string"&&typeof ge!="string"&&(oe?ge.focus():le.focus())}else H.focus()};P.addEventListener("focusin",z),P.addEventListener("keydown",N,!0);const W=setInterval(()=>{P.activeElement&&P.activeElement.tagName==="BODY"&&z()},50);return()=>{clearInterval(W),P.removeEventListener("focusin",z),P.removeEventListener("keydown",N,!0)}},[t,i,s,l,u,o]);const L=P=>{y.current===null&&(y.current=P.relatedTarget),E.current=!0,b.current=P.target;const N=e.props.onFocus;N&&N(P)},O=P=>{y.current===null&&(y.current=P.relatedTarget),E.current=!0};return Ve.jsxs(me.Fragment,{children:[Ve.jsx("div",{tabIndex:u?0:-1,onFocus:O,ref:p,"data-testid":"sentinelStart"}),me.cloneElement(e,{ref:A,onFocus:L}),Ve.jsx("div",{tabIndex:u?0:-1,onFocus:O,ref:_,"data-testid":"sentinelEnd"})]})}function vue(n){return typeof n=="function"?n():n}const yue=me.forwardRef(function(e,t){const{children:i,container:s,disablePortal:o=!1}=e,[l,u]=me.useState(null),d=uf(me.isValidElement(i)?i.ref:null,t);if(by(()=>{o||u(vue(s)||document.body)},[s,o]),by(()=>{if(l&&!o)return eI(t,l),()=>{eI(t,null)}},[t,l,o]),o){if(me.isValidElement(i)){const p={ref:d};return me.cloneElement(i,p)}return Ve.jsx(me.Fragment,{children:i})}return Ve.jsx(me.Fragment,{children:l&&gB.createPortal(i,l)})});function bue(n){const e=Hf(n);return e.body===n?Ty(n).innerWidth>e.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function pw(n,e){e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function Yz(n){return parseInt(Ty(n).getComputedStyle(n).paddingRight,10)||0}function Tue(n){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(n.tagName)!==-1,i=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return t||i}function Kz(n,e,t,i,s){const o=[e,t,...i];[].forEach.call(n.children,l=>{const u=o.indexOf(l)===-1,d=!Tue(l);u&&d&&pw(l,s)})}function M2(n,e){let t=-1;return n.some((i,s)=>e(i)?(t=s,!0):!1),t}function Sue(n,e){const t=[],i=n.container;if(!e.disableScrollLock){if(bue(i)){const l=s9(Hf(i));t.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${Yz(i)+l}px`;const u=Hf(i).querySelectorAll(".mui-fixed");[].forEach.call(u,d=>{t.push({value:d.style.paddingRight,property:"padding-right",el:d}),d.style.paddingRight=`${Yz(d)+l}px`})}let o;if(i.parentNode instanceof DocumentFragment)o=Hf(i).body;else{const l=i.parentElement,u=Ty(i);o=(l==null?void 0:l.nodeName)==="HTML"&&u.getComputedStyle(l).overflowY==="scroll"?l:i}t.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{t.forEach(({value:o,el:l,property:u})=>{o?l.style.setProperty(u,o):l.style.removeProperty(u)})}}function Eue(n){const e=[];return[].forEach.call(n.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class xue{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let i=this.modals.indexOf(e);if(i!==-1)return i;i=this.modals.length,this.modals.push(e),e.modalRef&&pw(e.modalRef,!1);const s=Eue(t);Kz(t,e.mount,e.modalRef,s,!0);const o=M2(this.containers,l=>l.container===t);return o!==-1?(this.containers[o].modals.push(e),i):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:s}),i)}mount(e,t){const i=M2(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[i];s.restore||(s.restore=Sue(s,t))}remove(e,t=!0){const i=this.modals.indexOf(e);if(i===-1)return i;const s=M2(this.containers,l=>l.modals.indexOf(e)!==-1),o=this.containers[s];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(i,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&pw(e.modalRef,t),Kz(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(s,1);else{const l=o.modals[o.modals.length-1];l.modalRef&&pw(l.modalRef,!1)}return i}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function wue(n){return typeof n=="function"?n():n}function $ue(n){return n?n.props.hasOwnProperty("in"):!1}const Cue=new xue;function Aue(n){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:i=!1,manager:s=Cue,closeAfterTransition:o=!1,onTransitionEnter:l,onTransitionExited:u,children:d,onClose:p,open:_,rootRef:y}=n,b=me.useRef({}),E=me.useRef(null),C=me.useRef(null),A=uf(C,y),[I,L]=me.useState(!_),O=$ue(d);let P=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(P=!1);const N=()=>Hf(E.current),z=()=>(b.current.modalRef=C.current,b.current.mount=E.current,b.current),W=()=>{s.mount(z(),{disableScrollLock:i}),C.current&&(C.current.scrollTop=0)},H=qb(()=>{const Te=wue(e)||N().body;s.add(z(),Te),C.current&&W()}),U=me.useCallback(()=>s.isTopModal(z()),[s]),Q=qb(Te=>{E.current=Te,Te&&(_&&U()?W():C.current&&pw(C.current,P))}),ne=me.useCallback(()=>{s.remove(z(),P)},[P,s]);me.useEffect(()=>()=>{ne()},[ne]),me.useEffect(()=>{_?H():(!O||!o)&&ne()},[_,ne,O,o,H]);const oe=Te=>Oe=>{var J;(J=Te.onKeyDown)==null||J.call(Te,Oe),!(Oe.key!=="Escape"||Oe.which===229||!U())&&(t||(Oe.stopPropagation(),p&&p(Oe,"escapeKeyDown")))},le=Te=>Oe=>{var J;(J=Te.onClick)==null||J.call(Te,Oe),Oe.target===Oe.currentTarget&&p&&p(Oe,"backdropClick")};return{getRootProps:(Te={})=>{const Oe=b9(n);delete Oe.onTransitionEnter,delete Oe.onTransitionExited;const J=Ye({},Oe,Te);return Ye({role:"presentation"},J,{onKeyDown:oe(J),ref:A})},getBackdropProps:(Te={})=>{const Oe=Te;return Ye({"aria-hidden":!0},Oe,{onClick:le(Oe),open:_})},getTransitionProps:()=>{const Te=()=>{L(!1),l&&l()},Oe=()=>{L(!0),u&&u(),o&&ne()};return{onEnter:cD(Te,d==null?void 0:d.props.onEnter),onExited:cD(Oe,d==null?void 0:d.props.onExited)}},rootRef:A,portalRef:Q,isTopModal:U,exited:I,hasTransition:O}}const Mue=["onChange","maxRows","minRows","style","value"];function NC(n){return parseInt(n,10)||0}const Iue={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Rue(n){return n==null||Object.keys(n).length===0||n.outerHeightStyle===0&&!n.overflowing}const kue=me.forwardRef(function(e,t){const{onChange:i,maxRows:s,minRows:o=1,style:l,value:u}=e,d=Tr(e,Mue),{current:p}=me.useRef(u!=null),_=me.useRef(null),y=uf(t,_),b=me.useRef(null),E=me.useCallback(()=>{const I=_.current,O=Ty(I).getComputedStyle(I);if(O.width==="0px")return{outerHeightStyle:0,overflowing:!1};const P=b.current;P.style.width=O.width,P.value=I.value||e.placeholder||"x",P.value.slice(-1)===`
`&&(P.value+=" ");const N=O.boxSizing,z=NC(O.paddingBottom)+NC(O.paddingTop),W=NC(O.borderBottomWidth)+NC(O.borderTopWidth),H=P.scrollHeight;P.value="x";const U=P.scrollHeight;let Q=H;o&&(Q=Math.max(Number(o)*U,Q)),s&&(Q=Math.min(Number(s)*U,Q)),Q=Math.max(Q,U);const ne=Q+(N==="border-box"?z+W:0),oe=Math.abs(Q-H)<=1;return{outerHeightStyle:ne,overflowing:oe}},[s,o,e.placeholder]),C=me.useCallback(()=>{const I=E();if(Rue(I))return;const L=_.current;L.style.height=`${I.outerHeightStyle}px`,L.style.overflow=I.overflowing?"hidden":""},[E]);by(()=>{const I=()=>{C()};let L;const O=rP(I),P=_.current,N=Ty(P);N.addEventListener("resize",O);let z;return typeof ResizeObserver<"u"&&(z=new ResizeObserver(I),z.observe(P)),()=>{O.clear(),cancelAnimationFrame(L),N.removeEventListener("resize",O),z&&z.disconnect()}},[E,C]),by(()=>{C()});const A=I=>{p||C(),i&&i(I)};return Ve.jsxs(me.Fragment,{children:[Ve.jsx("textarea",Ye({value:u,onChange:A,ref:y,rows:o,style:l},d)),Ve.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:b,tabIndex:-1,style:Ye({},Iue.shadow,l,{paddingTop:0,paddingBottom:0})})]})});function ky({props:n,states:e,muiFormControl:t}){return e.reduce((i,s)=>(i[s]=n[s],t&&typeof n[s]>"u"&&(i[s]=t[s]),i),{})}const Oue=me.createContext(void 0),dP=Oue;function cv(){return me.useContext(dP)}function Lue(n){return Ve.jsx(eoe,Ye({},n,{defaultTheme:CR,themeId:w$}))}function Jz(n){return n!=null&&!(Array.isArray(n)&&n.length===0)}function oI(n,e=!1){return n&&(Jz(n.value)&&n.value!==""||e&&Jz(n.defaultValue)&&n.defaultValue!=="")}function Due(n){return n.startAdornment}function Nue(n){return no("MuiInputBase",n)}const Bue=Eo("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),tE=Bue,Pue=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],IR=(n,e)=>{const{ownerState:t}=n;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${lr(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},RR=(n,e)=>{const{ownerState:t}=n;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},Fue=n=>{const{classes:e,color:t,disabled:i,error:s,endAdornment:o,focused:l,formControl:u,fullWidth:d,hiddenLabel:p,multiline:_,readOnly:y,size:b,startAdornment:E,type:C}=n,A={root:["root",`color${lr(t)}`,i&&"disabled",s&&"error",d&&"fullWidth",l&&"focused",u&&"formControl",b&&b!=="medium"&&`size${lr(b)}`,_&&"multiline",E&&"adornedStart",o&&"adornedEnd",p&&"hiddenLabel",y&&"readOnly"],input:["input",i&&"disabled",C==="search"&&"inputTypeSearch",_&&"inputMultiline",b==="small"&&"inputSizeSmall",p&&"inputHiddenLabel",E&&"inputAdornedStart",o&&"inputAdornedEnd",y&&"readOnly"]};return xo(A,Nue,e)},kR=or("div",{name:"MuiInputBase",slot:"Root",overridesResolver:IR})(({theme:n,ownerState:e})=>Ye({},n.typography.body1,{color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${tE.disabled}`]:{color:(n.vars||n).palette.text.disabled,cursor:"default"}},e.multiline&&Ye({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),OR=or("input",{name:"MuiInputBase",slot:"Input",overridesResolver:RR})(({theme:n,ownerState:e})=>{const t=n.palette.mode==="light",i=Ye({color:"currentColor"},n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},{transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})}),s={opacity:"0 !important"},o=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return Ye({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${tE.formControl} &`]:{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${tE.disabled}`]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),Uue=Ve.jsx(Lue,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),zue=me.forwardRef(function(e,t){var i;const s=Po({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:l,autoFocus:u,className:d,components:p={},componentsProps:_={},defaultValue:y,disabled:b,disableInjectingGlobalStyles:E,endAdornment:C,fullWidth:A=!1,id:I,inputComponent:L="input",inputProps:O={},inputRef:P,maxRows:N,minRows:z,multiline:W=!1,name:H,onBlur:U,onChange:Q,onClick:ne,onFocus:oe,onKeyDown:le,onKeyUp:ge,placeholder:ce,readOnly:pe,renderSuffix:Te,rows:Oe,slotProps:J={},slots:se={},startAdornment:ie,type:he="text",value:Se}=s,Fe=Tr(s,Pue),ke=O.value!=null?O.value:Se,{current:qe}=me.useRef(ke!=null),De=me.useRef(),rt=me.useCallback(pt=>{},[]),tt=uf(De,P,O.ref,rt),[ft,ct]=me.useState(!1),Pe=cv(),Ce=ky({props:s,muiFormControl:Pe,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Ce.focused=Pe?Pe.focused:ft,me.useEffect(()=>{!Pe&&b&&ft&&(ct(!1),U&&U())},[Pe,b,ft,U]);const je=Pe&&Pe.onFilled,it=Pe&&Pe.onEmpty,ot=me.useCallback(pt=>{oI(pt)?je&&je():it&&it()},[je,it]);by(()=>{qe&&ot({value:ke})},[ke,ot,qe]);const vt=pt=>{if(Ce.disabled){pt.stopPropagation();return}oe&&oe(pt),O.onFocus&&O.onFocus(pt),Pe&&Pe.onFocus?Pe.onFocus(pt):ct(!0)},It=pt=>{U&&U(pt),O.onBlur&&O.onBlur(pt),Pe&&Pe.onBlur?Pe.onBlur(pt):ct(!1)},yt=(pt,...Ke)=>{if(!qe){const Ie=pt.target||De.current;if(Ie==null)throw new Error(w1(1));ot({value:Ie.value})}O.onChange&&O.onChange(pt,...Ke),Q&&Q(pt,...Ke)};me.useEffect(()=>{ot(De.current)},[]);const kt=pt=>{De.current&&pt.currentTarget===pt.target&&De.current.focus(),ne&&ne(pt)};let $t=L,mt=O;W&&$t==="input"&&(Oe?mt=Ye({type:void 0,minRows:Oe,maxRows:Oe},mt):mt=Ye({type:void 0,maxRows:N,minRows:z},mt),$t=kue);const xe=pt=>{ot(pt.animationName==="mui-auto-fill-cancel"?De.current:{value:"x"})};me.useEffect(()=>{Pe&&Pe.setAdornedStart(!!ie)},[Pe,ie]);const re=Ye({},s,{color:Ce.color||"primary",disabled:Ce.disabled,endAdornment:C,error:Ce.error,focused:Ce.focused,formControl:Pe,fullWidth:A,hiddenLabel:Ce.hiddenLabel,multiline:W,size:Ce.size,startAdornment:ie,type:he}),Be=Fue(re),dt=se.root||p.Root||kR,bt=J.root||_.root||{},Mt=se.input||p.Input||OR;return mt=Ye({},mt,(i=J.input)!=null?i:_.input),Ve.jsxs(me.Fragment,{children:[!E&&Uue,Ve.jsxs(dt,Ye({},bt,!sI(dt)&&{ownerState:Ye({},re,bt.ownerState)},{ref:t,onClick:kt},Fe,{className:qr(Be.root,bt.className,d,pe&&"MuiInputBase-readOnly"),children:[ie,Ve.jsx(dP.Provider,{value:null,children:Ve.jsx(Mt,Ye({ownerState:re,"aria-invalid":Ce.error,"aria-describedby":o,autoComplete:l,autoFocus:u,defaultValue:y,disabled:Ce.disabled,id:I,onAnimationStart:xe,name:H,placeholder:ce,readOnly:pe,required:Ce.required,rows:Oe,value:ke,onKeyDown:le,onKeyUp:ge,type:he},mt,!sI(Mt)&&{as:$t,ownerState:Ye({},re,mt.ownerState)},{ref:tt,className:qr(Be.input,mt.className,pe&&"MuiInputBase-readOnly"),onBlur:It,onChange:yt,onFocus:vt}))}),C,Te?Te(Ye({},Ce,{startAdornment:ie})):null]}))]})}),pP=zue;function Hue(n){return no("MuiInput",n)}const Gue=Ye({},tE,Eo("MuiInput",["root","underline","input"])),bx=Gue;function Wue(n){return no("MuiOutlinedInput",n)}const Vue=Ye({},tE,Eo("MuiOutlinedInput",["root","notchedOutline","input"])),Nv=Vue;function jue(n){return no("MuiFilledInput",n)}const Xue=Ye({},tE,Eo("MuiFilledInput",["root","underline","input"])),yb=Xue,Yue=IE(Ve.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Kue=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Jue={entering:{opacity:1},entered:{opacity:1}},que=me.forwardRef(function(e,t){const i=AR(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:o,appear:l=!0,children:u,easing:d,in:p,onEnter:_,onEntered:y,onEntering:b,onExit:E,onExited:C,onExiting:A,style:I,timeout:L=s,TransitionComponent:O=v9}=e,P=Tr(e,Kue),N=me.useRef(null),z=uf(N,u.ref,t),W=ce=>pe=>{if(ce){const Te=N.current;pe===void 0?ce(Te):ce(Te,pe)}},H=W(b),U=W((ce,pe)=>{y9(ce);const Te=iI({style:I,timeout:L,easing:d},{mode:"enter"});ce.style.webkitTransition=i.transitions.create("opacity",Te),ce.style.transition=i.transitions.create("opacity",Te),_&&_(ce,pe)}),Q=W(y),ne=W(A),oe=W(ce=>{const pe=iI({style:I,timeout:L,easing:d},{mode:"exit"});ce.style.webkitTransition=i.transitions.create("opacity",pe),ce.style.transition=i.transitions.create("opacity",pe),E&&E(ce)}),le=W(C),ge=ce=>{o&&o(N.current,ce)};return Ve.jsx(O,Ye({appear:l,in:p,nodeRef:N,onEnter:U,onEntered:Q,onEntering:H,onExit:oe,onExited:le,onExiting:ne,addEndListener:ge,timeout:L},P,{children:(ce,pe)=>me.cloneElement(u,Ye({style:Ye({opacity:0,visibility:ce==="exited"&&!p?"hidden":void 0},Jue[ce],I,u.props.style),ref:z},pe))}))}),T9=que;function Que(n){return no("MuiBackdrop",n)}Eo("MuiBackdrop",["root","invisible"]);const Zue=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],ece=n=>{const{classes:e,invisible:t}=n;return xo({root:["root",t&&"invisible"]},Que,e)},tce=or("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.invisible&&e.invisible]}})(({ownerState:n})=>Ye({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},n.invisible&&{backgroundColor:"transparent"})),nce=me.forwardRef(function(e,t){var i,s,o;const l=Po({props:e,name:"MuiBackdrop"}),{children:u,className:d,component:p="div",components:_={},componentsProps:y={},invisible:b=!1,open:E,slotProps:C={},slots:A={},TransitionComponent:I=T9,transitionDuration:L}=l,O=Tr(l,Zue),P=Ye({},l,{component:p,invisible:b}),N=ece(P),z=(i=C.root)!=null?i:y.root;return Ve.jsx(I,Ye({in:E,timeout:L},O,{children:Ve.jsx(tce,Ye({"aria-hidden":!0},z,{as:(s=(o=A.root)!=null?o:_.Root)!=null?s:p,className:qr(N.root,d,z==null?void 0:z.className),ownerState:Ye({},P,z==null?void 0:z.ownerState),classes:N,ref:t,children:u}))}))}),LR=nce,rce=Eo("MuiBox",["root"]),ice=rce,sce=m9(),oce=aoe({themeId:w$,defaultTheme:sce,defaultClassName:ice.root,generateClassName:QB.generate}),sy=oce;function ace(n){return no("MuiButton",n)}const lce=Eo("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),BC=lce,uce=me.createContext({}),cce=uce,hce=me.createContext(void 0),dce=hce,pce=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],fce=n=>{const{color:e,disableElevation:t,fullWidth:i,size:s,variant:o,classes:l}=n,u={root:["root",o,`${o}${lr(e)}`,`size${lr(s)}`,`${o}Size${lr(s)}`,`color${lr(e)}`,t&&"disableElevation",i&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${lr(s)}`],endIcon:["icon","endIcon",`iconSize${lr(s)}`]},d=xo(u,ace,l);return Ye({},l,d)},S9=n=>Ye({},n.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},n.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},n.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),mce=or(hP,{shouldForwardProp:n=>Nm(n)||n==="classes",name:"MuiButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`${t.variant}${lr(t.color)}`],e[`size${lr(t.size)}`],e[`${t.variant}Size${lr(t.size)}`],t.color==="inherit"&&e.colorInherit,t.disableElevation&&e.disableElevation,t.fullWidth&&e.fullWidth]}})(({theme:n,ownerState:e})=>{var t,i;const s=n.palette.mode==="light"?n.palette.grey[300]:n.palette.grey[800],o=n.palette.mode==="light"?n.palette.grey.A100:n.palette.grey[700];return Ye({},n.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":Ye({textDecoration:"none",backgroundColor:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / ${n.vars.palette.action.hoverOpacity})`:dg(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:n.vars?`rgba(${n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:dg(n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(n.vars||n).palette[e.color].main}`,backgroundColor:n.vars?`rgba(${n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:dg(n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:n.vars?n.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(n.vars||n).shadows[4],"@media (hover: none)":{boxShadow:(n.vars||n).shadows[2],backgroundColor:(n.vars||n).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(n.vars||n).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(n.vars||n).palette[e.color].main}}),"&:active":Ye({},e.variant==="contained"&&{boxShadow:(n.vars||n).shadows[8]}),[`&.${BC.focusVisible}`]:Ye({},e.variant==="contained"&&{boxShadow:(n.vars||n).shadows[6]}),[`&.${BC.disabled}`]:Ye({color:(n.vars||n).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(n.vars||n).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(n.vars||n).palette.action.disabled,boxShadow:(n.vars||n).shadows[0],backgroundColor:(n.vars||n).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].main,border:n.vars?`1px solid rgba(${n.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${dg(n.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:n.vars?n.vars.palette.text.primary:(t=(i=n.palette).getContrastText)==null?void 0:t.call(i,n.palette.grey[300]),backgroundColor:n.vars?n.vars.palette.Button.inheritContainedBg:s,boxShadow:(n.vars||n).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].contrastText,backgroundColor:(n.vars||n).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:n.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:n.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:n.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:n})=>n.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${BC.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${BC.disabled}`]:{boxShadow:"none"}}),gce=or("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.startIcon,e[`iconSize${lr(t.size)}`]]}})(({ownerState:n})=>Ye({display:"inherit",marginRight:8,marginLeft:-4},n.size==="small"&&{marginLeft:-2},S9(n))),_ce=or("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.endIcon,e[`iconSize${lr(t.size)}`]]}})(({ownerState:n})=>Ye({display:"inherit",marginRight:-4,marginLeft:8},n.size==="small"&&{marginRight:-2},S9(n))),vce=me.forwardRef(function(e,t){const i=me.useContext(cce),s=me.useContext(dce),o=tP(i,e),l=Po({props:o,name:"MuiButton"}),{children:u,color:d="primary",component:p="button",className:_,disabled:y=!1,disableElevation:b=!1,disableFocusRipple:E=!1,endIcon:C,focusVisibleClassName:A,fullWidth:I=!1,size:L="medium",startIcon:O,type:P,variant:N="text"}=l,z=Tr(l,pce),W=Ye({},l,{color:d,component:p,disabled:y,disableElevation:b,disableFocusRipple:E,fullWidth:I,size:L,type:P,variant:N}),H=fce(W),U=O&&Ve.jsx(gce,{className:H.startIcon,ownerState:W,children:O}),Q=C&&Ve.jsx(_ce,{className:H.endIcon,ownerState:W,children:C}),ne=s||"";return Ve.jsxs(mce,Ye({ownerState:W,className:qr(i.className,H.root,_,ne),component:p,disabled:y,focusRipple:!E,focusVisibleClassName:qr(H.focusVisible,A),ref:t,type:P},z,{classes:H,children:[U,u,Q]}))}),yce=vce;function bce(n){return no("PrivateSwitchBase",n)}Eo("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Tce=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Sce=n=>{const{classes:e,checked:t,disabled:i,edge:s}=n,o={root:["root",t&&"checked",i&&"disabled",s&&`edge${lr(s)}`],input:["input"]};return xo(o,bce,e)},Ece=or(hP)(({ownerState:n})=>Ye({padding:9,borderRadius:"50%"},n.edge==="start"&&{marginLeft:n.size==="small"?-3:-12},n.edge==="end"&&{marginRight:n.size==="small"?-3:-12})),xce=or("input",{shouldForwardProp:Nm})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),wce=me.forwardRef(function(e,t){const{autoFocus:i,checked:s,checkedIcon:o,className:l,defaultChecked:u,disabled:d,disableFocusRipple:p=!1,edge:_=!1,icon:y,id:b,inputProps:E,inputRef:C,name:A,onBlur:I,onChange:L,onFocus:O,readOnly:P,required:N=!1,tabIndex:z,type:W,value:H}=e,U=Tr(e,Tce),[Q,ne]=tI({controlled:s,default:!!u,name:"SwitchBase",state:"checked"}),oe=cv(),le=se=>{O&&O(se),oe&&oe.onFocus&&oe.onFocus(se)},ge=se=>{I&&I(se),oe&&oe.onBlur&&oe.onBlur(se)},ce=se=>{if(se.nativeEvent.defaultPrevented)return;const ie=se.target.checked;ne(ie),L&&L(se,ie)};let pe=d;oe&&typeof pe>"u"&&(pe=oe.disabled);const Te=W==="checkbox"||W==="radio",Oe=Ye({},e,{checked:Q,disabled:pe,disableFocusRipple:p,edge:_}),J=Sce(Oe);return Ve.jsxs(Ece,Ye({component:"span",className:qr(J.root,l),centerRipple:!0,focusRipple:!p,disabled:pe,tabIndex:null,role:void 0,onFocus:le,onBlur:ge,ownerState:Oe,ref:t},U,{children:[Ve.jsx(xce,Ye({autoFocus:i,checked:s,defaultChecked:u,className:J.input,disabled:pe,id:Te?b:void 0,name:A,onChange:ce,readOnly:P,ref:C,required:N,ownerState:Oe,tabIndex:z,type:W},W==="checkbox"&&H===void 0?{}:{value:H},E)),Q?o:y]}))}),E9=wce,$ce=IE(Ve.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Cce=IE(Ve.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Ace=IE(Ve.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Mce(n){return no("MuiCheckbox",n)}const Ice=Eo("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),I2=Ice,Rce=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],kce=n=>{const{classes:e,indeterminate:t,color:i,size:s}=n,o={root:["root",t&&"indeterminate",`color${lr(i)}`,`size${lr(s)}`]},l=xo(o,Mce,e);return Ye({},e,l)},Oce=or(E9,{shouldForwardProp:n=>Nm(n)||n==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.indeterminate&&e.indeterminate,e[`size${lr(t.size)}`],t.color!=="default"&&e[`color${lr(t.color)}`]]}})(({theme:n,ownerState:e})=>Ye({color:(n.vars||n).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:n.vars?`rgba(${e.color==="default"?n.vars.palette.action.activeChannel:n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:dg(e.color==="default"?n.palette.action.active:n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${I2.checked}, &.${I2.indeterminate}`]:{color:(n.vars||n).palette[e.color].main},[`&.${I2.disabled}`]:{color:(n.vars||n).palette.action.disabled}})),Lce=Ve.jsx(Cce,{}),Dce=Ve.jsx($ce,{}),Nce=Ve.jsx(Ace,{}),Bce=me.forwardRef(function(e,t){var i,s;const o=Po({props:e,name:"MuiCheckbox"}),{checkedIcon:l=Lce,color:u="primary",icon:d=Dce,indeterminate:p=!1,indeterminateIcon:_=Nce,inputProps:y,size:b="medium",className:E}=o,C=Tr(o,Rce),A=p?_:d,I=p?_:l,L=Ye({},o,{color:u,indeterminate:p,size:b}),O=kce(L);return Ve.jsx(Oce,Ye({type:"checkbox",inputProps:Ye({"data-indeterminate":p},y),icon:me.cloneElement(A,{fontSize:(i=A.props.fontSize)!=null?i:b}),checkedIcon:me.cloneElement(I,{fontSize:(s=I.props.fontSize)!=null?s:b}),ownerState:L,ref:t,className:qr(O.root,E)},C,{classes:O}))}),Pce=Bce;function Fce(n){return no("MuiCircularProgress",n)}Eo("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Uce=["className","color","disableShrink","size","style","thickness","value","variant"];let DR=n=>n,qz,Qz,Zz,e4;const Bv=44,zce=wE(qz||(qz=DR`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Hce=wE(Qz||(Qz=DR`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Gce=n=>{const{classes:e,variant:t,color:i,disableShrink:s}=n,o={root:["root",t,`color${lr(i)}`],svg:["svg"],circle:["circle",`circle${lr(t)}`,s&&"circleDisableShrink"]};return xo(o,Fce,e)},Wce=or("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`color${lr(t.color)}`]]}})(({ownerState:n,theme:e})=>Ye({display:"inline-block"},n.variant==="determinate"&&{transition:e.transitions.create("transform")},n.color!=="inherit"&&{color:(e.vars||e).palette[n.color].main}),({ownerState:n})=>n.variant==="indeterminate"&&oR(Zz||(Zz=DR`
      animation: ${0} 1.4s linear infinite;
    `),zce)),Vce=or("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(n,e)=>e.svg})({display:"block"}),jce=or("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.circle,e[`circle${lr(t.variant)}`],t.disableShrink&&e.circleDisableShrink]}})(({ownerState:n,theme:e})=>Ye({stroke:"currentColor"},n.variant==="determinate"&&{transition:e.transitions.create("stroke-dashoffset")},n.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:n})=>n.variant==="indeterminate"&&!n.disableShrink&&oR(e4||(e4=DR`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Hce)),Xce=me.forwardRef(function(e,t){const i=Po({props:e,name:"MuiCircularProgress"}),{className:s,color:o="primary",disableShrink:l=!1,size:u=40,style:d,thickness:p=3.6,value:_=0,variant:y="indeterminate"}=i,b=Tr(i,Uce),E=Ye({},i,{color:o,disableShrink:l,size:u,thickness:p,value:_,variant:y}),C=Gce(E),A={},I={},L={};if(y==="determinate"){const O=2*Math.PI*((Bv-p)/2);A.strokeDasharray=O.toFixed(3),L["aria-valuenow"]=Math.round(_),A.strokeDashoffset=`${((100-_)/100*O).toFixed(3)}px`,I.transform="rotate(-90deg)"}return Ve.jsx(Wce,Ye({className:qr(C.root,s),style:Ye({width:u,height:u},I,d),ownerState:E,ref:t,role:"progressbar"},L,b,{children:Ve.jsx(Vce,{className:C.svg,ownerState:E,viewBox:`${Bv/2} ${Bv/2} ${Bv} ${Bv}`,children:Ve.jsx(jce,{className:C.circle,style:A,ownerState:E,cx:Bv,cy:Bv,r:(Bv-p)/2,fill:"none",strokeWidth:p})})}))}),x9=Xce,Yce=Joe({createStyledComponent:or("div",{name:"MuiContainer",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`maxWidth${lr(String(t.maxWidth))}`],t.fixed&&e.fixed,t.disableGutters&&e.disableGutters]}}),useThemeProps:n=>Po({props:n,name:"MuiContainer"})}),t4=Yce;function Kce(n){return no("MuiModal",n)}Eo("MuiModal",["root","hidden","backdrop"]);const Jce=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],qce=n=>{const{open:e,exited:t,classes:i}=n;return xo({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},Kce,i)},Qce=or("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.open&&t.exited&&e.hidden]}})(({theme:n,ownerState:e})=>Ye({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),Zce=or(LR,{name:"MuiModal",slot:"Backdrop",overridesResolver:(n,e)=>e.backdrop})({zIndex:-1}),ehe=me.forwardRef(function(e,t){var i,s,o,l,u,d;const p=Po({name:"MuiModal",props:e}),{BackdropComponent:_=Zce,BackdropProps:y,className:b,closeAfterTransition:E=!1,children:C,container:A,component:I,components:L={},componentsProps:O={},disableAutoFocus:P=!1,disableEnforceFocus:N=!1,disableEscapeKeyDown:z=!1,disablePortal:W=!1,disableRestoreFocus:H=!1,disableScrollLock:U=!1,hideBackdrop:Q=!1,keepMounted:ne=!1,onBackdropClick:oe,open:le,slotProps:ge,slots:ce}=p,pe=Tr(p,Jce),Te=Ye({},p,{closeAfterTransition:E,disableAutoFocus:P,disableEnforceFocus:N,disableEscapeKeyDown:z,disablePortal:W,disableRestoreFocus:H,disableScrollLock:U,hideBackdrop:Q,keepMounted:ne}),{getRootProps:Oe,getBackdropProps:J,getTransitionProps:se,portalRef:ie,isTopModal:he,exited:Se,hasTransition:Fe}=Aue(Ye({},Te,{rootRef:t})),ke=Ye({},Te,{exited:Se}),qe=qce(ke),De={};if(C.props.tabIndex===void 0&&(De.tabIndex="-1"),Fe){const{onEnter:je,onExited:it}=se();De.onEnter=je,De.onExited=it}const rt=(i=(s=ce==null?void 0:ce.root)!=null?s:L.Root)!=null?i:Qce,tt=(o=(l=ce==null?void 0:ce.backdrop)!=null?l:L.Backdrop)!=null?o:_,ft=(u=ge==null?void 0:ge.root)!=null?u:O.root,ct=(d=ge==null?void 0:ge.backdrop)!=null?d:O.backdrop,Pe=ZS({elementType:rt,externalSlotProps:ft,externalForwardedProps:pe,getSlotProps:Oe,additionalProps:{ref:t,as:I},ownerState:ke,className:qr(b,ft==null?void 0:ft.className,qe==null?void 0:qe.root,!ke.open&&ke.exited&&(qe==null?void 0:qe.hidden))}),Ce=ZS({elementType:tt,externalSlotProps:ct,additionalProps:y,getSlotProps:je=>J(Ye({},je,{onClick:it=>{oe&&oe(it),je!=null&&je.onClick&&je.onClick(it)}})),className:qr(ct==null?void 0:ct.className,y==null?void 0:y.className,qe==null?void 0:qe.backdrop),ownerState:ke});return!ne&&!le&&(!Fe||Se)?null:Ve.jsx(yue,{ref:ie,container:A,disablePortal:W,children:Ve.jsxs(rt,Ye({},Pe,{children:[!Q&&_?Ve.jsx(tt,Ye({},Ce)):null,Ve.jsx(_ue,{disableEnforceFocus:N,disableAutoFocus:P,disableRestoreFocus:H,isEnabled:he,open:le,children:me.cloneElement(C,De)})]}))})}),w9=ehe;function the(n){return no("MuiDialog",n)}const nhe=Eo("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),R2=nhe,rhe=me.createContext({}),ihe=rhe,she=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],ohe=or(LR,{name:"MuiDialog",slot:"Backdrop",overrides:(n,e)=>e.backdrop})({zIndex:-1}),ahe=n=>{const{classes:e,scroll:t,maxWidth:i,fullWidth:s,fullScreen:o}=n,l={root:["root"],container:["container",`scroll${lr(t)}`],paper:["paper",`paperScroll${lr(t)}`,`paperWidth${lr(String(i))}`,s&&"paperFullWidth",o&&"paperFullScreen"]};return xo(l,the,e)},lhe=or(w9,{name:"MuiDialog",slot:"Root",overridesResolver:(n,e)=>e.root})({"@media print":{position:"absolute !important"}}),uhe=or("div",{name:"MuiDialog",slot:"Container",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.container,e[`scroll${lr(t.scroll)}`]]}})(({ownerState:n})=>Ye({height:"100%","@media print":{height:"auto"},outline:0},n.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},n.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),che=or(cP,{name:"MuiDialog",slot:"Paper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.paper,e[`scrollPaper${lr(t.scroll)}`],e[`paperWidth${lr(String(t.maxWidth))}`],t.fullWidth&&e.paperFullWidth,t.fullScreen&&e.paperFullScreen]}})(({theme:n,ownerState:e})=>Ye({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:n.breakpoints.unit==="px"?Math.max(n.breakpoints.values.xs,444):`max(${n.breakpoints.values.xs}${n.breakpoints.unit}, 444px)`,[`&.${R2.paperScrollBody}`]:{[n.breakpoints.down(Math.max(n.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${n.breakpoints.values[e.maxWidth]}${n.breakpoints.unit}`,[`&.${R2.paperScrollBody}`]:{[n.breakpoints.down(n.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${R2.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),hhe=me.forwardRef(function(e,t){const i=Po({props:e,name:"MuiDialog"}),s=AR(),o={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":u,BackdropComponent:d,BackdropProps:p,children:_,className:y,disableEscapeKeyDown:b=!1,fullScreen:E=!1,fullWidth:C=!1,maxWidth:A="sm",onBackdropClick:I,onClose:L,open:O,PaperComponent:P=cP,PaperProps:N={},scroll:z="paper",TransitionComponent:W=T9,transitionDuration:H=o,TransitionProps:U}=i,Q=Tr(i,she),ne=Ye({},i,{disableEscapeKeyDown:b,fullScreen:E,fullWidth:C,maxWidth:A,scroll:z}),oe=ahe(ne),le=me.useRef(),ge=Oe=>{le.current=Oe.target===Oe.currentTarget},ce=Oe=>{le.current&&(le.current=null,I&&I(Oe),L&&L(Oe,"backdropClick"))},pe=xR(u),Te=me.useMemo(()=>({titleId:pe}),[pe]);return Ve.jsx(lhe,Ye({className:qr(oe.root,y),closeAfterTransition:!0,components:{Backdrop:ohe},componentsProps:{backdrop:Ye({transitionDuration:H,as:d},p)},disableEscapeKeyDown:b,onClose:L,open:O,ref:t,onClick:ce,ownerState:ne},Q,{children:Ve.jsx(W,Ye({appear:!0,in:O,timeout:H,role:"presentation"},U,{children:Ve.jsx(uhe,{className:qr(oe.container),onMouseDown:ge,ownerState:ne,children:Ve.jsx(che,Ye({as:P,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":pe},N,{className:qr(oe.paper,N.className),ownerState:ne,children:Ve.jsx(ihe.Provider,{value:Te,children:_})}))})}))}))}),$9=hhe;function dhe(n){return no("MuiDivider",n)}Eo("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const phe=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],fhe=n=>{const{absolute:e,children:t,classes:i,flexItem:s,light:o,orientation:l,textAlign:u,variant:d}=n;return xo({root:["root",e&&"absolute",d,o&&"light",l==="vertical"&&"vertical",s&&"flexItem",t&&"withChildren",t&&l==="vertical"&&"withChildrenVertical",u==="right"&&l!=="vertical"&&"textAlignRight",u==="left"&&l!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",l==="vertical"&&"wrapperVertical"]},dhe,i)},mhe=or("div",{name:"MuiDivider",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.absolute&&e.absolute,e[t.variant],t.light&&e.light,t.orientation==="vertical"&&e.vertical,t.flexItem&&e.flexItem,t.children&&e.withChildren,t.children&&t.orientation==="vertical"&&e.withChildrenVertical,t.textAlign==="right"&&t.orientation!=="vertical"&&e.textAlignRight,t.textAlign==="left"&&t.orientation!=="vertical"&&e.textAlignLeft]}})(({theme:n,ownerState:e})=>Ye({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(n.vars||n).palette.divider,borderBottomWidth:"thin"},e.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},e.light&&{borderColor:n.vars?`rgba(${n.vars.palette.dividerChannel} / 0.08)`:dg(n.palette.divider,.08)},e.variant==="inset"&&{marginLeft:72},e.variant==="middle"&&e.orientation==="horizontal"&&{marginLeft:n.spacing(2),marginRight:n.spacing(2)},e.variant==="middle"&&e.orientation==="vertical"&&{marginTop:n.spacing(1),marginBottom:n.spacing(1)},e.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},e.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:n})=>Ye({},n.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:n,ownerState:e})=>Ye({},e.children&&e.orientation!=="vertical"&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(n.vars||n).palette.divider}`}}),({theme:n,ownerState:e})=>Ye({},e.children&&e.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(n.vars||n).palette.divider}`}}),({ownerState:n})=>Ye({},n.textAlign==="right"&&n.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},n.textAlign==="left"&&n.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),ghe=or("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.wrapper,t.orientation==="vertical"&&e.wrapperVertical]}})(({theme:n,ownerState:e})=>Ye({display:"inline-block",paddingLeft:`calc(${n.spacing(1)} * 1.2)`,paddingRight:`calc(${n.spacing(1)} * 1.2)`},e.orientation==="vertical"&&{paddingTop:`calc(${n.spacing(1)} * 1.2)`,paddingBottom:`calc(${n.spacing(1)} * 1.2)`})),C9=me.forwardRef(function(e,t){const i=Po({props:e,name:"MuiDivider"}),{absolute:s=!1,children:o,className:l,component:u=o?"div":"hr",flexItem:d=!1,light:p=!1,orientation:_="horizontal",role:y=u!=="hr"?"separator":void 0,textAlign:b="center",variant:E="fullWidth"}=i,C=Tr(i,phe),A=Ye({},i,{absolute:s,component:u,flexItem:d,light:p,orientation:_,role:y,textAlign:b,variant:E}),I=fhe(A);return Ve.jsx(mhe,Ye({as:u,className:qr(I.root,l),role:y,ref:t,ownerState:A},C,{children:o?Ve.jsx(ghe,{className:I.wrapper,ownerState:A,children:o}):null}))});C9.muiSkipListHighlight=!0;const _he=C9,vhe=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],yhe=n=>{const{classes:e,disableUnderline:t}=n,s=xo({root:["root",!t&&"underline"],input:["input"]},jue,e);return Ye({},e,s)},bhe=or(kR,{shouldForwardProp:n=>Nm(n)||n==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...IR(n,e),!t.disableUnderline&&e.underline]}})(({theme:n,ownerState:e})=>{var t;const i=n.palette.mode==="light",s=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",u=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return Ye({position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o}},[`&.${yb.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o},[`&.${yb.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:u}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t=(n.vars||n).palette[e.color||"primary"])==null?void 0:t.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${yb.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${yb.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:s}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${yb.disabled}, .${yb.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${yb.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&Ye({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),The=or(OR,{name:"MuiFilledInput",slot:"Input",overridesResolver:RR})(({theme:n,ownerState:e})=>Ye({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),A9=me.forwardRef(function(e,t){var i,s,o,l;const u=Po({props:e,name:"MuiFilledInput"}),{components:d={},componentsProps:p,fullWidth:_=!1,inputComponent:y="input",multiline:b=!1,slotProps:E,slots:C={},type:A="text"}=u,I=Tr(u,vhe),L=Ye({},u,{fullWidth:_,inputComponent:y,multiline:b,type:A}),O=yhe(u),P={root:{ownerState:L},input:{ownerState:L}},N=E??p?of(P,E??p):P,z=(i=(s=C.root)!=null?s:d.Root)!=null?i:bhe,W=(o=(l=C.input)!=null?l:d.Input)!=null?o:The;return Ve.jsx(pP,Ye({slots:{root:z,input:W},componentsProps:N,fullWidth:_,inputComponent:y,multiline:b,ref:t,type:A},I,{classes:O}))});A9.muiName="Input";const M9=A9;function She(n){return no("MuiFormControl",n)}Eo("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Ehe=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],xhe=n=>{const{classes:e,margin:t,fullWidth:i}=n,s={root:["root",t!=="none"&&`margin${lr(t)}`,i&&"fullWidth"]};return xo(s,She,e)},whe=or("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:n},e)=>Ye({},e.root,e[`margin${lr(n.margin)}`],n.fullWidth&&e.fullWidth)})(({ownerState:n})=>Ye({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},n.margin==="normal"&&{marginTop:16,marginBottom:8},n.margin==="dense"&&{marginTop:8,marginBottom:4},n.fullWidth&&{width:"100%"})),$he=me.forwardRef(function(e,t){const i=Po({props:e,name:"MuiFormControl"}),{children:s,className:o,color:l="primary",component:u="div",disabled:d=!1,error:p=!1,focused:_,fullWidth:y=!1,hiddenLabel:b=!1,margin:E="none",required:C=!1,size:A="medium",variant:I="outlined"}=i,L=Tr(i,Ehe),O=Ye({},i,{color:l,component:u,disabled:d,error:p,fullWidth:y,hiddenLabel:b,margin:E,required:C,size:A,variant:I}),P=xhe(O),[N,z]=me.useState(()=>{let ge=!1;return s&&me.Children.forEach(s,ce=>{if(!aM(ce,["Input","Select"]))return;const pe=aM(ce,["Select"])?ce.props.input:ce;pe&&Due(pe.props)&&(ge=!0)}),ge}),[W,H]=me.useState(()=>{let ge=!1;return s&&me.Children.forEach(s,ce=>{aM(ce,["Input","Select"])&&(oI(ce.props,!0)||oI(ce.props.inputProps,!0))&&(ge=!0)}),ge}),[U,Q]=me.useState(!1);d&&U&&Q(!1);const ne=_!==void 0&&!d?_:U;let oe;const le=me.useMemo(()=>({adornedStart:N,setAdornedStart:z,color:l,disabled:d,error:p,filled:W,focused:ne,fullWidth:y,hiddenLabel:b,size:A,onBlur:()=>{Q(!1)},onEmpty:()=>{H(!1)},onFilled:()=>{H(!0)},onFocus:()=>{Q(!0)},registerEffect:oe,required:C,variant:I}),[N,l,d,p,W,ne,y,b,oe,C,A,I]);return Ve.jsx(dP.Provider,{value:le,children:Ve.jsx(whe,Ye({as:u,ownerState:O,className:qr(P.root,o),ref:t},L,{children:s}))})}),Che=$he,Ahe=iae({createStyledComponent:or("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root}),useThemeProps:n=>Po({props:n,name:"MuiStack"})}),Kw=Ahe;function Mhe(n){return no("MuiFormControlLabel",n)}const Ihe=Eo("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Kx=Ihe,Rhe=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],khe=n=>{const{classes:e,disabled:t,labelPlacement:i,error:s,required:o}=n,l={root:["root",t&&"disabled",`labelPlacement${lr(i)}`,s&&"error",o&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",s&&"error"]};return xo(l,Mhe,e)},Ohe=or("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${Kx.label}`]:e.label},e.root,e[`labelPlacement${lr(t.labelPlacement)}`]]}})(({theme:n,ownerState:e})=>Ye({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Kx.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Kx.label}`]:{[`&.${Kx.disabled}`]:{color:(n.vars||n).palette.text.disabled}}})),Lhe=or("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(({theme:n})=>({[`&.${Kx.error}`]:{color:(n.vars||n).palette.error.main}})),Dhe=me.forwardRef(function(e,t){var i,s;const o=Po({props:e,name:"MuiFormControlLabel"}),{className:l,componentsProps:u={},control:d,disabled:p,disableTypography:_,label:y,labelPlacement:b="end",required:E,slotProps:C={}}=o,A=Tr(o,Rhe),I=cv(),L=(i=p??d.props.disabled)!=null?i:I==null?void 0:I.disabled,O=E??d.props.required,P={disabled:L,required:O};["checked","name","onChange","value","inputRef"].forEach(Q=>{typeof d.props[Q]>"u"&&typeof o[Q]<"u"&&(P[Q]=o[Q])});const N=ky({props:o,muiFormControl:I,states:["error"]}),z=Ye({},o,{disabled:L,labelPlacement:b,required:O,error:N.error}),W=khe(z),H=(s=C.typography)!=null?s:u.typography;let U=y;return U!=null&&U.type!==eE&&!_&&(U=Ve.jsx(eE,Ye({component:"span"},H,{className:qr(W.label,H==null?void 0:H.className),children:U}))),Ve.jsxs(Ohe,Ye({className:qr(W.root,l),ownerState:z,ref:t},A,{children:[me.cloneElement(d,P),O?Ve.jsxs(Kw,{display:"block",children:[U,Ve.jsxs(Lhe,{ownerState:z,"aria-hidden":!0,className:W.asterisk,children:["","*"]})]}):U]}))}),I9=Dhe;function Nhe(n){return no("MuiFormGroup",n)}Eo("MuiFormGroup",["root","row","error"]);const Bhe=["className","row"],Phe=n=>{const{classes:e,row:t,error:i}=n;return xo({root:["root",t&&"row",i&&"error"]},Nhe,e)},Fhe=or("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.row&&e.row]}})(({ownerState:n})=>Ye({display:"flex",flexDirection:"column",flexWrap:"wrap"},n.row&&{flexDirection:"row"})),Uhe=me.forwardRef(function(e,t){const i=Po({props:e,name:"MuiFormGroup"}),{className:s,row:o=!1}=i,l=Tr(i,Bhe),u=cv(),d=ky({props:i,muiFormControl:u,states:["error"]}),p=Ye({},i,{row:o,error:d.error}),_=Phe(p);return Ve.jsx(Fhe,Ye({className:qr(_.root,s),ownerState:p,ref:t},l))}),R9=Uhe;function zhe(n){return no("MuiFormHelperText",n)}const Hhe=Eo("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),n4=Hhe;var r4;const Ghe=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Whe=n=>{const{classes:e,contained:t,size:i,disabled:s,error:o,filled:l,focused:u,required:d}=n,p={root:["root",s&&"disabled",o&&"error",i&&`size${lr(i)}`,t&&"contained",u&&"focused",l&&"filled",d&&"required"]};return xo(p,zhe,e)},Vhe=or("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.size&&e[`size${lr(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(({theme:n,ownerState:e})=>Ye({color:(n.vars||n).palette.text.secondary},n.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${n4.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${n4.error}`]:{color:(n.vars||n).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),jhe=me.forwardRef(function(e,t){const i=Po({props:e,name:"MuiFormHelperText"}),{children:s,className:o,component:l="p"}=i,u=Tr(i,Ghe),d=cv(),p=ky({props:i,muiFormControl:d,states:["variant","size","disabled","error","filled","focused","required"]}),_=Ye({},i,{component:l,contained:p.variant==="filled"||p.variant==="outlined",variant:p.variant,size:p.size,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required}),y=Whe(_);return Ve.jsx(Vhe,Ye({as:l,ownerState:_,className:qr(y.root,o),ref:t},u,{children:s===" "?r4||(r4=Ve.jsx("span",{className:"notranslate",children:""})):s}))}),Xhe=jhe;function Yhe(n){return no("MuiFormLabel",n)}const Khe=Eo("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),fw=Khe,Jhe=["children","className","color","component","disabled","error","filled","focused","required"],qhe=n=>{const{classes:e,color:t,focused:i,disabled:s,error:o,filled:l,required:u}=n,d={root:["root",`color${lr(t)}`,s&&"disabled",o&&"error",l&&"filled",i&&"focused",u&&"required"],asterisk:["asterisk",o&&"error"]};return xo(d,Yhe,e)},Qhe=or("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:n},e)=>Ye({},e.root,n.color==="secondary"&&e.colorSecondary,n.filled&&e.filled)})(({theme:n,ownerState:e})=>Ye({color:(n.vars||n).palette.text.secondary},n.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${fw.focused}`]:{color:(n.vars||n).palette[e.color].main},[`&.${fw.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${fw.error}`]:{color:(n.vars||n).palette.error.main}})),Zhe=or("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(({theme:n})=>({[`&.${fw.error}`]:{color:(n.vars||n).palette.error.main}})),ede=me.forwardRef(function(e,t){const i=Po({props:e,name:"MuiFormLabel"}),{children:s,className:o,component:l="label"}=i,u=Tr(i,Jhe),d=cv(),p=ky({props:i,muiFormControl:d,states:["color","required","focused","disabled","error","filled"]}),_=Ye({},i,{color:p.color||"primary",component:l,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required}),y=qhe(_);return Ve.jsxs(Qhe,Ye({as:l,ownerState:_,className:qr(y.root,o),ref:t},u,{children:[s,p.required&&Ve.jsxs(Zhe,{ownerState:_,"aria-hidden":!0,className:y.asterisk,children:["","*"]})]}))}),tde=ede,nde=me.createContext(),i4=nde;function rde(n){return no("MuiGrid",n)}const ide=[0,1,2,3,4,5,6,7,8,9,10],sde=["column-reverse","column","row-reverse","row"],ode=["nowrap","wrap-reverse","wrap"],Tx=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],Jw=Eo("MuiGrid",["root","container","item","zeroMinWidth",...ide.map(n=>`spacing-xs-${n}`),...sde.map(n=>`direction-xs-${n}`),...ode.map(n=>`wrap-xs-${n}`),...Tx.map(n=>`grid-xs-${n}`),...Tx.map(n=>`grid-sm-${n}`),...Tx.map(n=>`grid-md-${n}`),...Tx.map(n=>`grid-lg-${n}`),...Tx.map(n=>`grid-xl-${n}`)]),ade=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function FS(n){const e=parseFloat(n);return`${e}${String(n).replace(String(e),"")||"px"}`}function lde({theme:n,ownerState:e}){let t;return n.breakpoints.keys.reduce((i,s)=>{let o={};if(e[s]&&(t=e[s]),!t)return i;if(t===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(t==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const l=u1({values:e.columns,breakpoints:n.breakpoints.values}),u=typeof l=="object"?l[s]:l;if(u==null)return i;const d=`${Math.round(t/u*1e8)/1e6}%`;let p={};if(e.container&&e.item&&e.columnSpacing!==0){const _=n.spacing(e.columnSpacing);if(_!=="0px"){const y=`calc(${d} + ${FS(_)})`;p={flexBasis:y,maxWidth:y}}}o=Ye({flexBasis:d,flexGrow:0,maxWidth:d},p)}return n.breakpoints.values[s]===0?Object.assign(i,o):i[n.breakpoints.up(s)]=o,i},{})}function ude({theme:n,ownerState:e}){const t=u1({values:e.direction,breakpoints:n.breakpoints.values});return Wf({theme:n},t,i=>{const s={flexDirection:i};return i.indexOf("column")===0&&(s[`& > .${Jw.item}`]={maxWidth:"none"}),s})}function k9({breakpoints:n,values:e}){let t="";Object.keys(e).forEach(s=>{t===""&&e[s]!==0&&(t=s)});const i=Object.keys(n).sort((s,o)=>n[s]-n[o]);return i.slice(0,i.indexOf(t))}function cde({theme:n,ownerState:e}){const{container:t,rowSpacing:i}=e;let s={};if(t&&i!==0){const o=u1({values:i,breakpoints:n.breakpoints.values});let l;typeof o=="object"&&(l=k9({breakpoints:n.breakpoints.values,values:o})),s=Wf({theme:n},o,(u,d)=>{var p;const _=n.spacing(u);return _!=="0px"?{marginTop:`-${FS(_)}`,[`& > .${Jw.item}`]:{paddingTop:FS(_)}}:(p=l)!=null&&p.includes(d)?{}:{marginTop:0,[`& > .${Jw.item}`]:{paddingTop:0}}})}return s}function hde({theme:n,ownerState:e}){const{container:t,columnSpacing:i}=e;let s={};if(t&&i!==0){const o=u1({values:i,breakpoints:n.breakpoints.values});let l;typeof o=="object"&&(l=k9({breakpoints:n.breakpoints.values,values:o})),s=Wf({theme:n},o,(u,d)=>{var p;const _=n.spacing(u);return _!=="0px"?{width:`calc(100% + ${FS(_)})`,marginLeft:`-${FS(_)}`,[`& > .${Jw.item}`]:{paddingLeft:FS(_)}}:(p=l)!=null&&p.includes(d)?{}:{width:"100%",marginLeft:0,[`& > .${Jw.item}`]:{paddingLeft:0}}})}return s}function dde(n,e,t={}){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[t[`spacing-xs-${String(n)}`]];const i=[];return e.forEach(s=>{const o=n[s];Number(o)>0&&i.push(t[`spacing-${s}-${String(o)}`])}),i}const pde=or("div",{name:"MuiGrid",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n,{container:i,direction:s,item:o,spacing:l,wrap:u,zeroMinWidth:d,breakpoints:p}=t;let _=[];i&&(_=dde(l,p,e));const y=[];return p.forEach(b=>{const E=t[b];E&&y.push(e[`grid-${b}-${String(E)}`])}),[e.root,i&&e.container,o&&e.item,d&&e.zeroMinWidth,..._,s!=="row"&&e[`direction-xs-${String(s)}`],u!=="wrap"&&e[`wrap-xs-${String(u)}`],...y]}})(({ownerState:n})=>Ye({boxSizing:"border-box"},n.container&&{display:"flex",flexWrap:"wrap",width:"100%"},n.item&&{margin:0},n.zeroMinWidth&&{minWidth:0},n.wrap!=="wrap"&&{flexWrap:n.wrap}),ude,cde,hde,lde);function fde(n,e){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[`spacing-xs-${String(n)}`];const t=[];return e.forEach(i=>{const s=n[i];if(Number(s)>0){const o=`spacing-${i}-${String(s)}`;t.push(o)}}),t}const mde=n=>{const{classes:e,container:t,direction:i,item:s,spacing:o,wrap:l,zeroMinWidth:u,breakpoints:d}=n;let p=[];t&&(p=fde(o,d));const _=[];d.forEach(b=>{const E=n[b];E&&_.push(`grid-${b}-${String(E)}`)});const y={root:["root",t&&"container",s&&"item",u&&"zeroMinWidth",...p,i!=="row"&&`direction-xs-${String(i)}`,l!=="wrap"&&`wrap-xs-${String(l)}`,..._]};return xo(y,rde,e)},gde=me.forwardRef(function(e,t){const i=Po({props:e,name:"MuiGrid"}),{breakpoints:s}=AR(),o=I$(i),{className:l,columns:u,columnSpacing:d,component:p="div",container:_=!1,direction:y="row",item:b=!1,rowSpacing:E,spacing:C=0,wrap:A="wrap",zeroMinWidth:I=!1}=o,L=Tr(o,ade),O=E||C,P=d||C,N=me.useContext(i4),z=_?u||12:N,W={},H=Ye({},L);s.keys.forEach(ne=>{L[ne]!=null&&(W[ne]=L[ne],delete H[ne])});const U=Ye({},o,{columns:z,container:_,direction:y,item:b,rowSpacing:O,columnSpacing:P,wrap:A,zeroMinWidth:I,spacing:C},W,{breakpoints:s.keys}),Q=mde(U);return Ve.jsx(i4.Provider,{value:z,children:Ve.jsx(pde,Ye({ownerState:U,className:qr(Q.root,l),as:p,ref:t},H))})}),Qp=gde,_de=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function _D(n){return`scale(${n}, ${n**2})`}const vde={entering:{opacity:1,transform:_D(1)},entered:{opacity:1,transform:"none"}},k2=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),O9=me.forwardRef(function(e,t){const{addEndListener:i,appear:s=!0,children:o,easing:l,in:u,onEnter:d,onEntered:p,onEntering:_,onExit:y,onExited:b,onExiting:E,style:C,timeout:A="auto",TransitionComponent:I=v9}=e,L=Tr(e,_de),O=r9(),P=me.useRef(),N=AR(),z=me.useRef(null),W=uf(z,o.ref,t),H=pe=>Te=>{if(pe){const Oe=z.current;Te===void 0?pe(Oe):pe(Oe,Te)}},U=H(_),Q=H((pe,Te)=>{y9(pe);const{duration:Oe,delay:J,easing:se}=iI({style:C,timeout:A,easing:l},{mode:"enter"});let ie;A==="auto"?(ie=N.transitions.getAutoHeightDuration(pe.clientHeight),P.current=ie):ie=Oe,pe.style.transition=[N.transitions.create("opacity",{duration:ie,delay:J}),N.transitions.create("transform",{duration:k2?ie:ie*.666,delay:J,easing:se})].join(","),d&&d(pe,Te)}),ne=H(p),oe=H(E),le=H(pe=>{const{duration:Te,delay:Oe,easing:J}=iI({style:C,timeout:A,easing:l},{mode:"exit"});let se;A==="auto"?(se=N.transitions.getAutoHeightDuration(pe.clientHeight),P.current=se):se=Te,pe.style.transition=[N.transitions.create("opacity",{duration:se,delay:Oe}),N.transitions.create("transform",{duration:k2?se:se*.666,delay:k2?Oe:Oe||se*.333,easing:J})].join(","),pe.style.opacity=0,pe.style.transform=_D(.75),y&&y(pe)}),ge=H(b),ce=pe=>{A==="auto"&&O.start(P.current||0,pe),i&&i(z.current,pe)};return Ve.jsx(I,Ye({appear:s,in:u,nodeRef:z,onEnter:Q,onEntered:ne,onEntering:U,onExit:le,onExited:ge,onExiting:oe,addEndListener:ce,timeout:A==="auto"?null:A},L,{children:(pe,Te)=>me.cloneElement(o,Ye({style:Ye({opacity:0,transform:_D(.75),visibility:pe==="exited"&&!u?"hidden":void 0},vde[pe],C,o.props.style),ref:W},Te))}))});O9.muiSupportAuto=!0;const yde=O9,bde=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Tde=n=>{const{classes:e,disableUnderline:t}=n,s=xo({root:["root",!t&&"underline"],input:["input"]},Hue,e);return Ye({},e,s)},Sde=or(kR,{shouldForwardProp:n=>Nm(n)||n==="classes",name:"MuiInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...IR(n,e),!t.disableUnderline&&e.underline]}})(({theme:n,ownerState:e})=>{let i=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(i=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),Ye({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${bx.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${bx.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${bx.disabled}, .${bx.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${i}`}},[`&.${bx.disabled}:before`]:{borderBottomStyle:"dotted"}})}),Ede=or(OR,{name:"MuiInput",slot:"Input",overridesResolver:RR})({}),L9=me.forwardRef(function(e,t){var i,s,o,l;const u=Po({props:e,name:"MuiInput"}),{disableUnderline:d,components:p={},componentsProps:_,fullWidth:y=!1,inputComponent:b="input",multiline:E=!1,slotProps:C,slots:A={},type:I="text"}=u,L=Tr(u,bde),O=Tde(u),N={root:{ownerState:{disableUnderline:d}}},z=C??_?of(C??_,N):N,W=(i=(s=A.root)!=null?s:p.Root)!=null?i:Sde,H=(o=(l=A.input)!=null?l:p.Input)!=null?o:Ede;return Ve.jsx(pP,Ye({slots:{root:W,input:H},slotProps:z,fullWidth:y,inputComponent:b,multiline:E,ref:t,type:I},L,{classes:O}))});L9.muiName="Input";const fP=L9;function xde(n){return no("MuiInputLabel",n)}Eo("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const wde=["disableAnimation","margin","shrink","variant","className"],$de=n=>{const{classes:e,formControl:t,size:i,shrink:s,disableAnimation:o,variant:l,required:u}=n,d={root:["root",t&&"formControl",!o&&"animated",s&&"shrink",i&&i!=="normal"&&`size${lr(i)}`,l],asterisk:[u&&"asterisk"]},p=xo(d,xde,e);return Ye({},e,p)},Cde=or(tde,{shouldForwardProp:n=>Nm(n)||n==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${fw.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(({theme:n,ownerState:e})=>Ye({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:n.transitions.create(["color","transform","max-width"],{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut})},e.variant==="filled"&&Ye({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&Ye({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&Ye({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),Ade=me.forwardRef(function(e,t){const i=Po({name:"MuiInputLabel",props:e}),{disableAnimation:s=!1,shrink:o,className:l}=i,u=Tr(i,wde),d=cv();let p=o;typeof p>"u"&&d&&(p=d.filled||d.focused||d.adornedStart);const _=ky({props:i,muiFormControl:d,states:["size","variant","required","focused"]}),y=Ye({},i,{disableAnimation:s,formControl:d,shrink:p,size:_.size,variant:_.variant,required:_.required,focused:_.focused}),b=$de(y);return Ve.jsx(Cde,Ye({"data-shrink":p,ownerState:y,ref:t,className:qr(b.root,l)},u,{classes:b}))}),Mde=Ade,Ide=me.createContext({}),Rde=Ide;function kde(n){return no("MuiList",n)}Eo("MuiList",["root","padding","dense","subheader"]);const Ode=["children","className","component","dense","disablePadding","subheader"],Lde=n=>{const{classes:e,disablePadding:t,dense:i,subheader:s}=n;return xo({root:["root",!t&&"padding",i&&"dense",s&&"subheader"]},kde,e)},Dde=or("ul",{name:"MuiList",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})(({ownerState:n})=>Ye({listStyle:"none",margin:0,padding:0,position:"relative"},!n.disablePadding&&{paddingTop:8,paddingBottom:8},n.subheader&&{paddingTop:0})),Nde=me.forwardRef(function(e,t){const i=Po({props:e,name:"MuiList"}),{children:s,className:o,component:l="ul",dense:u=!1,disablePadding:d=!1,subheader:p}=i,_=Tr(i,Ode),y=me.useMemo(()=>({dense:u}),[u]),b=Ye({},i,{component:l,dense:u,disablePadding:d}),E=Lde(b);return Ve.jsx(Rde.Provider,{value:y,children:Ve.jsxs(Dde,Ye({as:l,className:qr(E.root,o),ref:t,ownerState:b},_,{children:[p,s]}))})}),Bde=Nde,Pde=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function O2(n,e,t){return n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:n.firstChild}function s4(n,e,t){return n===e?t?n.firstChild:n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:n.lastChild}function D9(n,e){if(e===void 0)return!0;let t=n.innerText;return t===void 0&&(t=n.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.indexOf(e.keys.join(""))===0}function Sx(n,e,t,i,s,o){let l=!1,u=s(n,e,e?t:!1);for(;u;){if(u===n.firstChild){if(l)return!1;l=!0}const d=i?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!D9(u,o)||d)u=s(n,u,t);else return u.focus(),!0}return!1}const Fde=me.forwardRef(function(e,t){const{actions:i,autoFocus:s=!1,autoFocusItem:o=!1,children:l,className:u,disabledItemsFocusable:d=!1,disableListWrap:p=!1,onKeyDown:_,variant:y="selectedMenu"}=e,b=Tr(e,Pde),E=me.useRef(null),C=me.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});by(()=>{s&&E.current.focus()},[s]),me.useImperativeHandle(i,()=>({adjustStyleForScrollbar:(P,{direction:N})=>{const z=!E.current.style.width;if(P.clientHeight<E.current.clientHeight&&z){const W=`${s9(Hf(P))}px`;E.current.style[N==="rtl"?"paddingLeft":"paddingRight"]=W,E.current.style.width=`calc(100% + ${W})`}return E.current}}),[]);const A=P=>{const N=E.current,z=P.key,W=Hf(N).activeElement;if(z==="ArrowDown")P.preventDefault(),Sx(N,W,p,d,O2);else if(z==="ArrowUp")P.preventDefault(),Sx(N,W,p,d,s4);else if(z==="Home")P.preventDefault(),Sx(N,null,p,d,O2);else if(z==="End")P.preventDefault(),Sx(N,null,p,d,s4);else if(z.length===1){const H=C.current,U=z.toLowerCase(),Q=performance.now();H.keys.length>0&&(Q-H.lastTime>500?(H.keys=[],H.repeating=!0,H.previousKeyMatched=!0):H.repeating&&U!==H.keys[0]&&(H.repeating=!1)),H.lastTime=Q,H.keys.push(U);const ne=W&&!H.repeating&&D9(W,H);H.previousKeyMatched&&(ne||Sx(N,W,!1,d,O2,H))?P.preventDefault():H.previousKeyMatched=!1}_&&_(P)},I=uf(E,t);let L=-1;me.Children.forEach(l,(P,N)=>{if(!me.isValidElement(P)){L===N&&(L+=1,L>=l.length&&(L=-1));return}P.props.disabled||(y==="selectedMenu"&&P.props.selected||L===-1)&&(L=N),L===N&&(P.props.disabled||P.props.muiSkipListHighlight||P.type.muiSkipListHighlight)&&(L+=1,L>=l.length&&(L=-1))});const O=me.Children.map(l,(P,N)=>{if(N===L){const z={};return o&&(z.autoFocus=!0),P.props.tabIndex===void 0&&y==="selectedMenu"&&(z.tabIndex=0),me.cloneElement(P,z)}return P});return Ve.jsx(Bde,Ye({role:"menu",ref:I,className:u,onKeyDown:A,tabIndex:s?0:-1},b,{children:O}))}),Ude=Fde;function zde(n){return no("MuiPopover",n)}Eo("MuiPopover",["root","paper"]);const Hde=["onEntering"],Gde=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Wde=["slotProps"];function o4(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.height/2:e==="bottom"&&(t=n.height),t}function a4(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.width/2:e==="right"&&(t=n.width),t}function l4(n){return[n.horizontal,n.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function L2(n){return typeof n=="function"?n():n}const Vde=n=>{const{classes:e}=n;return xo({root:["root"],paper:["paper"]},zde,e)},jde=or(w9,{name:"MuiPopover",slot:"Root",overridesResolver:(n,e)=>e.root})({}),N9=or(cP,{name:"MuiPopover",slot:"Paper",overridesResolver:(n,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Xde=me.forwardRef(function(e,t){var i,s,o;const l=Po({props:e,name:"MuiPopover"}),{action:u,anchorEl:d,anchorOrigin:p={vertical:"top",horizontal:"left"},anchorPosition:_,anchorReference:y="anchorEl",children:b,className:E,container:C,elevation:A=8,marginThreshold:I=16,open:L,PaperProps:O={},slots:P,slotProps:N,transformOrigin:z={vertical:"top",horizontal:"left"},TransitionComponent:W=yde,transitionDuration:H="auto",TransitionProps:{onEntering:U}={},disableScrollLock:Q=!1}=l,ne=Tr(l.TransitionProps,Hde),oe=Tr(l,Gde),le=(i=N==null?void 0:N.paper)!=null?i:O,ge=me.useRef(),ce=uf(ge,le.ref),pe=Ye({},l,{anchorOrigin:p,anchorReference:y,elevation:A,marginThreshold:I,externalPaperSlotProps:le,transformOrigin:z,TransitionComponent:W,transitionDuration:H,TransitionProps:ne}),Te=Vde(pe),Oe=me.useCallback(()=>{if(y==="anchorPosition")return _;const je=L2(d),ot=(je&&je.nodeType===1?je:Hf(ge.current).body).getBoundingClientRect();return{top:ot.top+o4(ot,p.vertical),left:ot.left+a4(ot,p.horizontal)}},[d,p.horizontal,p.vertical,_,y]),J=me.useCallback(je=>({vertical:o4(je,z.vertical),horizontal:a4(je,z.horizontal)}),[z.horizontal,z.vertical]),se=me.useCallback(je=>{const it={width:je.offsetWidth,height:je.offsetHeight},ot=J(it);if(y==="none")return{top:null,left:null,transformOrigin:l4(ot)};const vt=Oe();let It=vt.top-ot.vertical,yt=vt.left-ot.horizontal;const kt=It+it.height,$t=yt+it.width,mt=Ty(L2(d)),xe=mt.innerHeight-I,re=mt.innerWidth-I;if(I!==null&&It<I){const Be=It-I;It-=Be,ot.vertical+=Be}else if(I!==null&&kt>xe){const Be=kt-xe;It-=Be,ot.vertical+=Be}if(I!==null&&yt<I){const Be=yt-I;yt-=Be,ot.horizontal+=Be}else if($t>re){const Be=$t-re;yt-=Be,ot.horizontal+=Be}return{top:`${Math.round(It)}px`,left:`${Math.round(yt)}px`,transformOrigin:l4(ot)}},[d,y,Oe,J,I]),[ie,he]=me.useState(L),Se=me.useCallback(()=>{const je=ge.current;if(!je)return;const it=se(je);it.top!==null&&(je.style.top=it.top),it.left!==null&&(je.style.left=it.left),je.style.transformOrigin=it.transformOrigin,he(!0)},[se]);me.useEffect(()=>(Q&&window.addEventListener("scroll",Se),()=>window.removeEventListener("scroll",Se)),[d,Q,Se]);const Fe=(je,it)=>{U&&U(je,it),Se()},ke=()=>{he(!1)};me.useEffect(()=>{L&&Se()}),me.useImperativeHandle(u,()=>L?{updatePosition:()=>{Se()}}:null,[L,Se]),me.useEffect(()=>{if(!L)return;const je=rP(()=>{Se()}),it=Ty(d);return it.addEventListener("resize",je),()=>{je.clear(),it.removeEventListener("resize",je)}},[d,L,Se]);let qe=H;H==="auto"&&!W.muiSupportAuto&&(qe=void 0);const De=C||(d?Hf(L2(d)).body:void 0),rt=(s=P==null?void 0:P.root)!=null?s:jde,tt=(o=P==null?void 0:P.paper)!=null?o:N9,ft=ZS({elementType:tt,externalSlotProps:Ye({},le,{style:ie?le.style:Ye({},le.style,{opacity:0})}),additionalProps:{elevation:A,ref:ce},ownerState:pe,className:qr(Te.paper,le==null?void 0:le.className)}),ct=ZS({elementType:rt,externalSlotProps:(N==null?void 0:N.root)||{},externalForwardedProps:oe,additionalProps:{ref:t,slotProps:{backdrop:{invisible:!0}},container:De,open:L},ownerState:pe,className:qr(Te.root,E)}),{slotProps:Pe}=ct,Ce=Tr(ct,Wde);return Ve.jsx(rt,Ye({},Ce,!sI(rt)&&{slotProps:Pe,disableScrollLock:Q},{children:Ve.jsx(W,Ye({appear:!0,in:L,onEntering:Fe,onExited:ke,timeout:qe},ne,{children:Ve.jsx(tt,Ye({},ft,{children:b}))}))}))}),Yde=Xde;function Kde(n){return no("MuiMenu",n)}Eo("MuiMenu",["root","paper","list"]);const Jde=["onEntering"],qde=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],Qde={vertical:"top",horizontal:"right"},Zde={vertical:"top",horizontal:"left"},epe=n=>{const{classes:e}=n;return xo({root:["root"],paper:["paper"],list:["list"]},Kde,e)},tpe=or(Yde,{shouldForwardProp:n=>Nm(n)||n==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(n,e)=>e.root})({}),npe=or(N9,{name:"MuiMenu",slot:"Paper",overridesResolver:(n,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),rpe=or(Ude,{name:"MuiMenu",slot:"List",overridesResolver:(n,e)=>e.list})({outline:0}),ipe=me.forwardRef(function(e,t){var i,s;const o=Po({props:e,name:"MuiMenu"}),{autoFocus:l=!0,children:u,className:d,disableAutoFocusItem:p=!1,MenuListProps:_={},onClose:y,open:b,PaperProps:E={},PopoverClasses:C,transitionDuration:A="auto",TransitionProps:{onEntering:I}={},variant:L="selectedMenu",slots:O={},slotProps:P={}}=o,N=Tr(o.TransitionProps,Jde),z=Tr(o,qde),W=Hoe(),H=Ye({},o,{autoFocus:l,disableAutoFocusItem:p,MenuListProps:_,onEntering:I,PaperProps:E,transitionDuration:A,TransitionProps:N,variant:L}),U=epe(H),Q=l&&!p&&b,ne=me.useRef(null),oe=(J,se)=>{ne.current&&ne.current.adjustStyleForScrollbar(J,{direction:W?"rtl":"ltr"}),I&&I(J,se)},le=J=>{J.key==="Tab"&&(J.preventDefault(),y&&y(J,"tabKeyDown"))};let ge=-1;me.Children.map(u,(J,se)=>{me.isValidElement(J)&&(J.props.disabled||(L==="selectedMenu"&&J.props.selected||ge===-1)&&(ge=se))});const ce=(i=O.paper)!=null?i:npe,pe=(s=P.paper)!=null?s:E,Te=ZS({elementType:O.root,externalSlotProps:P.root,ownerState:H,className:[U.root,d]}),Oe=ZS({elementType:ce,externalSlotProps:pe,ownerState:H,className:U.paper});return Ve.jsx(tpe,Ye({onClose:y,anchorOrigin:{vertical:"bottom",horizontal:W?"right":"left"},transformOrigin:W?Qde:Zde,slots:{paper:ce,root:O.root},slotProps:{root:Te,paper:Oe},open:b,ref:t,transitionDuration:A,TransitionProps:Ye({onEntering:oe},N),ownerState:H},z,{classes:C,children:Ve.jsx(rpe,Ye({onKeyDown:le,actions:ne,autoFocus:l&&(ge===-1||p),autoFocusItem:Q,variant:L},_,{className:qr(U.list,_.className),children:u}))}))}),spe=ipe;function ope(n){return no("MuiNativeSelect",n)}const ape=Eo("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),mP=ape,lpe=["className","disabled","error","IconComponent","inputRef","variant"],upe=n=>{const{classes:e,variant:t,disabled:i,multiple:s,open:o,error:l}=n,u={select:["select",t,i&&"disabled",s&&"multiple",l&&"error"],icon:["icon",`icon${lr(t)}`,o&&"iconOpen",i&&"disabled"]};return xo(u,ope,e)},B9=({ownerState:n,theme:e})=>Ye({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":Ye({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${mP.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},n.variant==="filled"&&{"&&&":{paddingRight:32}},n.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),cpe=or("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Nm,overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.select,e[t.variant],t.error&&e.error,{[`&.${mP.multiple}`]:e.multiple}]}})(B9),P9=({ownerState:n,theme:e})=>Ye({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${mP.disabled}`]:{color:(e.vars||e).palette.action.disabled}},n.open&&{transform:"rotate(180deg)"},n.variant==="filled"&&{right:7},n.variant==="outlined"&&{right:7}),hpe=or("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${lr(t.variant)}`],t.open&&e.iconOpen]}})(P9),dpe=me.forwardRef(function(e,t){const{className:i,disabled:s,error:o,IconComponent:l,inputRef:u,variant:d="standard"}=e,p=Tr(e,lpe),_=Ye({},e,{disabled:s,variant:d,error:o}),y=upe(_);return Ve.jsxs(me.Fragment,{children:[Ve.jsx(cpe,Ye({ownerState:_,className:qr(y.select,i),disabled:s,ref:u||t},p)),e.multiple?null:Ve.jsx(hpe,{as:l,ownerState:_,className:y.icon})]})}),ppe=dpe;var u4;const fpe=["children","classes","className","label","notched"],mpe=or("fieldset",{shouldForwardProp:Nm})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),gpe=or("legend",{shouldForwardProp:Nm})(({ownerState:n,theme:e})=>Ye({float:"unset",width:"auto",overflow:"hidden"},!n.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},n.withLabel&&Ye({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},n.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function _pe(n){const{className:e,label:t,notched:i}=n,s=Tr(n,fpe),o=t!=null&&t!=="",l=Ye({},n,{notched:i,withLabel:o});return Ve.jsx(mpe,Ye({"aria-hidden":!0,className:e,ownerState:l},s,{children:Ve.jsx(gpe,{ownerState:l,children:o?Ve.jsx("span",{children:t}):u4||(u4=Ve.jsx("span",{className:"notranslate",children:""}))})}))}const vpe=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],ype=n=>{const{classes:e}=n,i=xo({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Wue,e);return Ye({},e,i)},bpe=or(kR,{shouldForwardProp:n=>Nm(n)||n==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:IR})(({theme:n,ownerState:e})=>{const t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return Ye({position:"relative",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${Nv.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${Nv.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${Nv.focused} .${Nv.notchedOutline}`]:{borderColor:(n.vars||n).palette[e.color].main,borderWidth:2},[`&.${Nv.error} .${Nv.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},[`&.${Nv.disabled} .${Nv.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&Ye({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),Tpe=or(_pe,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(n,e)=>e.notchedOutline})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),Spe=or(OR,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:RR})(({theme:n,ownerState:e})=>Ye({padding:"16.5px 14px"},!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),F9=me.forwardRef(function(e,t){var i,s,o,l,u;const d=Po({props:e,name:"MuiOutlinedInput"}),{components:p={},fullWidth:_=!1,inputComponent:y="input",label:b,multiline:E=!1,notched:C,slots:A={},type:I="text"}=d,L=Tr(d,vpe),O=ype(d),P=cv(),N=ky({props:d,muiFormControl:P,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),z=Ye({},d,{color:N.color||"primary",disabled:N.disabled,error:N.error,focused:N.focused,formControl:P,fullWidth:_,hiddenLabel:N.hiddenLabel,multiline:E,size:N.size,type:I}),W=(i=(s=A.root)!=null?s:p.Root)!=null?i:bpe,H=(o=(l=A.input)!=null?l:p.Input)!=null?o:Spe;return Ve.jsx(pP,Ye({slots:{root:W,input:H},renderSuffix:U=>Ve.jsx(Tpe,{ownerState:z,className:O.notchedOutline,label:b!=null&&b!==""&&N.required?u||(u=Ve.jsxs(me.Fragment,{children:[b,"","*"]})):b,notched:typeof C<"u"?C:!!(U.startAdornment||U.filled||U.focused)}),fullWidth:_,inputComponent:y,multiline:E,ref:t,type:I},L,{classes:Ye({},O,{notchedOutline:null})}))});F9.muiName="Input";const U9=F9;function Epe(n){return no("MuiSelect",n)}const Ex=Eo("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var c4;const xpe=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],wpe=or("div",{name:"MuiSelect",slot:"Select",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`&.${Ex.select}`]:e.select},{[`&.${Ex.select}`]:e[t.variant]},{[`&.${Ex.error}`]:e.error},{[`&.${Ex.multiple}`]:e.multiple}]}})(B9,{[`&.${Ex.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),$pe=or("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${lr(t.variant)}`],t.open&&e.iconOpen]}})(P9),Cpe=or("input",{shouldForwardProp:n=>_9(n)&&n!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(n,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function h4(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}function Ape(n){return n==null||typeof n=="string"&&!n.trim()}const Mpe=n=>{const{classes:e,variant:t,disabled:i,multiple:s,open:o,error:l}=n,u={select:["select",t,i&&"disabled",s&&"multiple",l&&"error"],icon:["icon",`icon${lr(t)}`,o&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return xo(u,Epe,e)},Ipe=me.forwardRef(function(e,t){var i;const{"aria-describedby":s,"aria-label":o,autoFocus:l,autoWidth:u,children:d,className:p,defaultOpen:_,defaultValue:y,disabled:b,displayEmpty:E,error:C=!1,IconComponent:A,inputRef:I,labelId:L,MenuProps:O={},multiple:P,name:N,onBlur:z,onChange:W,onClose:H,onFocus:U,onOpen:Q,open:ne,readOnly:oe,renderValue:le,SelectDisplayProps:ge={},tabIndex:ce,value:pe,variant:Te="standard"}=e,Oe=Tr(e,xpe),[J,se]=tI({controlled:pe,default:y,name:"Select"}),[ie,he]=tI({controlled:ne,default:_,name:"Select"}),Se=me.useRef(null),Fe=me.useRef(null),[ke,qe]=me.useState(null),{current:De}=me.useRef(ne!=null),[rt,tt]=me.useState(),ft=uf(t,I),ct=me.useCallback(de=>{Fe.current=de,de&&qe(de)},[]),Pe=ke==null?void 0:ke.parentNode;me.useImperativeHandle(ft,()=>({focus:()=>{Fe.current.focus()},node:Se.current,value:J}),[J]),me.useEffect(()=>{_&&ie&&ke&&!De&&(tt(u?null:Pe.clientWidth),Fe.current.focus())},[ke,u]),me.useEffect(()=>{l&&Fe.current.focus()},[l]),me.useEffect(()=>{if(!L)return;const de=Hf(Fe.current).getElementById(L);if(de){const Ae=()=>{getSelection().isCollapsed&&Fe.current.focus()};return de.addEventListener("click",Ae),()=>{de.removeEventListener("click",Ae)}}},[L]);const Ce=(de,Ae)=>{de?Q&&Q(Ae):H&&H(Ae),De||(tt(u?null:Pe.clientWidth),he(de))},je=de=>{de.button===0&&(de.preventDefault(),Fe.current.focus(),Ce(!0,de))},it=de=>{Ce(!1,de)},ot=me.Children.toArray(d),vt=de=>{const Ae=ot.find(Je=>Je.props.value===de.target.value);Ae!==void 0&&(se(Ae.props.value),W&&W(de,Ae))},It=de=>Ae=>{let Je;if(Ae.currentTarget.hasAttribute("tabindex")){if(P){Je=Array.isArray(J)?J.slice():[];const jt=J.indexOf(de.props.value);jt===-1?Je.push(de.props.value):Je.splice(jt,1)}else Je=de.props.value;if(de.props.onClick&&de.props.onClick(Ae),J!==Je&&(se(Je),W)){const jt=Ae.nativeEvent||Ae,ze=new jt.constructor(jt.type,jt);Object.defineProperty(ze,"target",{writable:!0,value:{value:Je,name:N}}),W(ze,de)}P||Ce(!1,Ae)}},yt=de=>{oe||[" ","ArrowUp","ArrowDown","Enter"].indexOf(de.key)!==-1&&(de.preventDefault(),Ce(!0,de))},kt=ke!==null&&ie,$t=de=>{!kt&&z&&(Object.defineProperty(de,"target",{writable:!0,value:{value:J,name:N}}),z(de))};delete Oe["aria-invalid"];let mt,xe;const re=[];let Be=!1;(oI({value:J})||E)&&(le?mt=le(J):Be=!0);const dt=ot.map(de=>{if(!me.isValidElement(de))return null;let Ae;if(P){if(!Array.isArray(J))throw new Error(w1(2));Ae=J.some(Je=>h4(Je,de.props.value)),Ae&&Be&&re.push(de.props.children)}else Ae=h4(J,de.props.value),Ae&&Be&&(xe=de.props.children);return me.cloneElement(de,{"aria-selected":Ae?"true":"false",onClick:It(de),onKeyUp:Je=>{Je.key===" "&&Je.preventDefault(),de.props.onKeyUp&&de.props.onKeyUp(Je)},role:"option",selected:Ae,value:void 0,"data-value":de.props.value})});Be&&(P?re.length===0?mt=null:mt=re.reduce((de,Ae,Je)=>(de.push(Ae),Je<re.length-1&&de.push(", "),de),[]):mt=xe);let bt=rt;!u&&De&&ke&&(bt=Pe.clientWidth);let Mt;typeof ce<"u"?Mt=ce:Mt=b?null:0;const pt=ge.id||(N?`mui-component-select-${N}`:void 0),Ke=Ye({},e,{variant:Te,value:J,open:kt,error:C}),Ie=Mpe(Ke),q=Ye({},O.PaperProps,(i=O.slotProps)==null?void 0:i.paper),ee=xR();return Ve.jsxs(me.Fragment,{children:[Ve.jsx(wpe,Ye({ref:ct,tabIndex:Mt,role:"combobox","aria-controls":ee,"aria-disabled":b?"true":void 0,"aria-expanded":kt?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[L,pt].filter(Boolean).join(" ")||void 0,"aria-describedby":s,onKeyDown:yt,onMouseDown:b||oe?null:je,onBlur:$t,onFocus:U},ge,{ownerState:Ke,className:qr(ge.className,Ie.select,p),id:pt,children:Ape(mt)?c4||(c4=Ve.jsx("span",{className:"notranslate",children:""})):mt})),Ve.jsx(Cpe,Ye({"aria-invalid":C,value:Array.isArray(J)?J.join(","):J,name:N,ref:Se,"aria-hidden":!0,onChange:vt,tabIndex:-1,disabled:b,className:Ie.nativeInput,autoFocus:l,ownerState:Ke},Oe)),Ve.jsx($pe,{as:A,className:Ie.icon,ownerState:Ke}),Ve.jsx(spe,Ye({id:`menu-${N||""}`,anchorEl:Pe,open:kt,onClose:it,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},O,{MenuListProps:Ye({"aria-labelledby":L,role:"listbox","aria-multiselectable":P?"true":void 0,disableListWrap:!0,id:ee},O.MenuListProps),slotProps:Ye({},O.slotProps,{paper:Ye({},q,{style:Ye({minWidth:bt},q!=null?q.style:null)})}),children:dt}))]})}),Rpe=Ipe,kpe=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Ope=["root"],Lpe=n=>{const{classes:e}=n;return e},gP={name:"MuiSelect",overridesResolver:(n,e)=>e.root,shouldForwardProp:n=>Nm(n)&&n!=="variant",slot:"Root"},Dpe=or(fP,gP)(""),Npe=or(U9,gP)(""),Bpe=or(M9,gP)(""),z9=me.forwardRef(function(e,t){const i=Po({name:"MuiSelect",props:e}),{autoWidth:s=!1,children:o,classes:l={},className:u,defaultOpen:d=!1,displayEmpty:p=!1,IconComponent:_=Yue,id:y,input:b,inputProps:E,label:C,labelId:A,MenuProps:I,multiple:L=!1,native:O=!1,onClose:P,onOpen:N,open:z,renderValue:W,SelectDisplayProps:H,variant:U="outlined"}=i,Q=Tr(i,kpe),ne=O?ppe:Rpe,oe=cv(),le=ky({props:i,muiFormControl:oe,states:["variant","error"]}),ge=le.variant||U,ce=Ye({},i,{variant:ge,classes:l}),pe=Lpe(ce),Te=Tr(pe,Ope),Oe=b||{standard:Ve.jsx(Dpe,{ownerState:ce}),outlined:Ve.jsx(Npe,{label:C,ownerState:ce}),filled:Ve.jsx(Bpe,{ownerState:ce})}[ge],J=uf(t,Oe.ref);return Ve.jsx(me.Fragment,{children:me.cloneElement(Oe,Ye({inputComponent:ne,inputProps:Ye({children:o,error:le.error,IconComponent:_,variant:ge,type:void 0,multiple:L},O?{id:y}:{autoWidth:s,defaultOpen:d,displayEmpty:p,labelId:A,MenuProps:I,onClose:P,onOpen:N,open:z,renderValue:W,SelectDisplayProps:Ye({id:y},H)},E,{classes:E?of(Te,E.classes):Te},b?b.props.inputProps:{})},(L&&O||p)&&ge==="outlined"?{notched:!0}:{},{ref:J,className:qr(Oe.props.className,u,pe.root)},!b&&{variant:ge},Q))})});z9.muiName="Select";const Ppe=z9;function Fpe(n){return no("MuiSwitch",n)}const Kp=Eo("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Upe=["className","color","edge","size","sx"],zpe=vle(),Hpe=n=>{const{classes:e,edge:t,size:i,color:s,checked:o,disabled:l}=n,u={root:["root",t&&`edge${lr(t)}`,`size${lr(i)}`],switchBase:["switchBase",`color${lr(s)}`,o&&"checked",l&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},d=xo(u,Fpe,e);return Ye({},e,d)},Gpe=or("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.edge&&e[`edge${lr(t.edge)}`],e[`size${lr(t.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${Kp.thumb}`]:{width:16,height:16},[`& .${Kp.switchBase}`]:{padding:4,[`&.${Kp.checked}`]:{transform:"translateX(16px)"}}}}]}),Wpe=or(E9,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.switchBase,{[`& .${Kp.input}`]:e.input},t.color!=="default"&&e[`color${lr(t.color)}`]]}})(({theme:n})=>({position:"absolute",top:0,left:0,zIndex:1,color:n.vars?n.vars.palette.Switch.defaultColor:`${n.palette.mode==="light"?n.palette.common.white:n.palette.grey[300]}`,transition:n.transitions.create(["left","transform"],{duration:n.transitions.duration.shortest}),[`&.${Kp.checked}`]:{transform:"translateX(20px)"},[`&.${Kp.disabled}`]:{color:n.vars?n.vars.palette.Switch.defaultDisabledColor:`${n.palette.mode==="light"?n.palette.grey[100]:n.palette.grey[600]}`},[`&.${Kp.checked} + .${Kp.track}`]:{opacity:.5},[`&.${Kp.disabled} + .${Kp.track}`]:{opacity:n.vars?n.vars.opacity.switchTrackDisabled:`${n.palette.mode==="light"?.12:.2}`},[`& .${Kp.input}`]:{left:"-100%",width:"300%"}}),({theme:n})=>({"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:dg(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(n.palette).filter(([,e])=>e.main&&e.light).map(([e])=>({props:{color:e},style:{[`&.${Kp.checked}`]:{color:(n.vars||n).palette[e].main,"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette[e].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:dg(n.palette[e].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Kp.disabled}`]:{color:n.vars?n.vars.palette.Switch[`${e}DisabledColor`]:`${n.palette.mode==="light"?u9(n.palette[e].main,.62):l9(n.palette[e].main,.55)}`}},[`&.${Kp.checked} + .${Kp.track}`]:{backgroundColor:(n.vars||n).palette[e].main}}}))]})),Vpe=or("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(n,e)=>e.track})(({theme:n})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:n.transitions.create(["opacity","background-color"],{duration:n.transitions.duration.shortest}),backgroundColor:n.vars?n.vars.palette.common.onBackground:`${n.palette.mode==="light"?n.palette.common.black:n.palette.common.white}`,opacity:n.vars?n.vars.opacity.switchTrack:`${n.palette.mode==="light"?.38:.3}`})),jpe=or("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(n,e)=>e.thumb})(({theme:n})=>({boxShadow:(n.vars||n).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),Xpe=me.forwardRef(function(e,t){const i=zpe({props:e,name:"MuiSwitch"}),{className:s,color:o="primary",edge:l=!1,size:u="medium",sx:d}=i,p=Tr(i,Upe),_=Ye({},i,{color:o,edge:l,size:u}),y=Hpe(_),b=Ve.jsx(jpe,{className:y.thumb,ownerState:_});return Ve.jsxs(Gpe,{className:qr(y.root,s),sx:d,ownerState:_,children:[Ve.jsx(Wpe,Ye({type:"checkbox",icon:b,checkedIcon:b,ref:t,ownerState:_},p,{classes:Ye({},y,{root:y.switchBase})})),Ve.jsx(Vpe,{className:y.track,ownerState:_})]})}),Ype=Xpe;function Kpe(n){return no("MuiTextField",n)}Eo("MuiTextField",["root"]);const Jpe=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],qpe={standard:fP,filled:M9,outlined:U9},Qpe=n=>{const{classes:e}=n;return xo({root:["root"]},Kpe,e)},Zpe=or(Che,{name:"MuiTextField",slot:"Root",overridesResolver:(n,e)=>e.root})({}),efe=me.forwardRef(function(e,t){const i=Po({props:e,name:"MuiTextField"}),{autoComplete:s,autoFocus:o=!1,children:l,className:u,color:d="primary",defaultValue:p,disabled:_=!1,error:y=!1,FormHelperTextProps:b,fullWidth:E=!1,helperText:C,id:A,InputLabelProps:I,inputProps:L,InputProps:O,inputRef:P,label:N,maxRows:z,minRows:W,multiline:H=!1,name:U,onBlur:Q,onChange:ne,onFocus:oe,placeholder:le,required:ge=!1,rows:ce,select:pe=!1,SelectProps:Te,type:Oe,value:J,variant:se="outlined"}=i,ie=Tr(i,Jpe),he=Ye({},i,{autoFocus:o,color:d,disabled:_,error:y,fullWidth:E,multiline:H,required:ge,select:pe,variant:se}),Se=Qpe(he),Fe={};se==="outlined"&&(I&&typeof I.shrink<"u"&&(Fe.notched=I.shrink),Fe.label=N),pe&&((!Te||!Te.native)&&(Fe.id=void 0),Fe["aria-describedby"]=void 0);const ke=xR(A),qe=C&&ke?`${ke}-helper-text`:void 0,De=N&&ke?`${ke}-label`:void 0,rt=qpe[se],tt=Ve.jsx(rt,Ye({"aria-describedby":qe,autoComplete:s,autoFocus:o,defaultValue:p,fullWidth:E,multiline:H,name:U,rows:ce,maxRows:z,minRows:W,type:Oe,value:J,id:ke,inputRef:P,onBlur:Q,onChange:ne,onFocus:oe,placeholder:le,inputProps:L},Fe,O));return Ve.jsxs(Zpe,Ye({className:qr(Se.root,u),disabled:_,error:y,fullWidth:E,ref:t,required:ge,color:d,variant:se,ownerState:he},ie,{children:[N!=null&&N!==""&&Ve.jsx(Mde,Ye({htmlFor:ke,id:De},I,{children:N})),pe?Ve.jsx(Ppe,Ye({"aria-describedby":qe,id:ke,labelId:De,value:J,input:tt},Te,{children:l})):tt,C&&Ve.jsx(Xhe,Ye({id:qe},b,{children:C}))]}))}),_P=efe,tfe="/gpu-programming/assets/misty-Q0vWeXcA.svg",nfe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20400%20400'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-54.8776,-69.2073)'%3e%3cg%20transform='matrix(1.02822,0,0,1.03479,-55.9535,52.2937)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,286.809,459.697)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'/%3e%3c/g%3e%3cg%20transform='matrix(0.440957,0.440957,-0.704461,0.704461,267.224,-50.5009)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.249775,0.249775,-0.614768,-0.614768,655.131,143.162)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20451.634,248.57%20429.001,248.57L121.05,248.57C98.417,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2098.417,215.247%20121.05,215.247L429.001,215.247C451.634,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(1.02822,0,0,1.03479,44.3939,-48.6949)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,171.204,575.302)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,453.376,402.183)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.249775,0.249775,-0.614768,-0.614768,274.402,521.42)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20451.634,248.57%20429.001,248.57L121.05,248.57C98.417,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2098.417,215.247%20121.05,215.247L429.001,215.247C451.634,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.440957,-0.440957,0.704461,-0.704461,241.43,564.525)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,395.716,343.809)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",rfe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20401%20400'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-53.2986,-56.7857)'%3e%3cg%20transform='matrix(0.992184,0,0,0.998302,0.416603,0.0964004)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,286.809,459.697)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'/%3e%3c/g%3e%3cg%20transform='matrix(0.440957,0.440957,-0.704461,0.704461,267.224,-50.5009)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.237219,0.237219,-0.614768,-0.614768,613.767,184.608)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20450.661,248.57%20426.831,248.57L123.22,248.57C99.39,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2099.39,215.247%20123.22,215.247L426.831,215.247C450.661,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(0.992184,0,0,0.998302,0.416603,0.0964004)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,171.204,575.302)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,453.376,402.183)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.237219,0.237219,-0.614768,-0.614768,311.603,484.301)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20450.661,248.57%20426.831,248.57L123.22,248.57C99.39,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2099.39,215.247%20123.22,215.247L426.831,215.247C450.661,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.440957,-0.440957,0.704461,-0.704461,241.43,564.525)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,395.716,343.809)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function c1({icon:n,text:e,clickFunction:t,disabled:i,style:s}){return Ve.jsx(yce,{onClick:t,startIcon:n,disabled:i,classes:{disabled:"disabledDropShadowButton"},style:{margin:"5px",color:"black",backgroundColor:"#FAFAFA",borderRadius:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",...s},children:e})}var vP={},D2={};const ife=n_(_le);var d4;function NR(){return d4||(d4=1,function(n){"use client";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=ife}(D2)),D2}var sfe=CE;Object.defineProperty(vP,"__esModule",{value:!0});var H9=vP.default=void 0,ofe=sfe(NR()),afe=Ve;H9=vP.default=(0,ofe.default)((0,afe.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");const lfe=IE(Ve.jsx("path",{d:"M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.3 5.3V21h2.12l5.3-5.3z"}),"EditNote");function ufe(n){const[e,t]=me.useState(""),i=fr(Zs(C=>C.setIp)),s=fr(Zs(C=>C.setImageList)),o=fr(Zs(C=>C.setAudioList)),l=fr(Zs(C=>C.setIsConnected)),u=fr(Zs(C=>C.isConnected)),d=fr(Zs(C=>C.disconnect)),p=fr(C=>C.setActiveModal);fr(C=>C.toggleLLMMode);const _=fr(Zs(C=>C.llmMode)),y=fr(C=>C.setHeaderDimensions);me.useEffect(()=>{const C=document.getElementById("website-header");new ResizeObserver(I=>{for(let L of I)y(C.offsetHeight,C.offsetWidth)}).observe(C)},[]);const b=()=>{i(e),fetch(`http://${e}/api/battery`,{method:"GET"}).then(C=>{if(!C.ok)throw new Error(`Request failed with status ${C.status}`);return C.json()}).then(C=>(console.log(`Successfully sent a GET request, the response is: ${C}`),l(!0),fetch(`http://${e}/api/audio/list`))).then(C=>{if(!C.ok)throw new Error(`Request failed with status ${C.status}`);return C.json()}).then(C=>(o(C.result),fetch(`http://${e}/api/images/list`))).then(C=>{if(!C.ok)throw new Error(`Request failed with status ${C.status}`);return C.json()}).then(C=>{s(C.result)}).catch(C=>{console.error("Error during fetch operation:",C.message),alert(`Error fetching data: ${C.message}`)}),sh("Hit Confirm IP Address Button")},E={backgroundColor:"#585D92",color:"#FFFFFF",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",zIndex:101,position:"relative",paddingLeft:"20px",paddingTop:"5px",paddingBottom:"5px"};return Ve.jsxs(Qp,{id:"website-header",container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",style:E,children:[Ve.jsx(Qp,{item:!0,xs:12,sm:3,md:2,lg:3,xl:3,children:Ve.jsxs(Kw,{direction:"row",alignItems:"center",children:[Ve.jsx("img",{style:{maxHeight:"35px",paddingRight:"5px"},src:tfe}),Ve.jsx(eE,{display:"inline",variant:"h5",children:"Robo-Blocks"})]})}),Ve.jsx(Qp,{item:!0,xs:12,sm:9,md:10,lg:9,xl:9,children:Ve.jsxs(Qp,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[Ve.jsx(Qp,{item:!0,xs:12,sm:12,md:4,lg:4,xl:3,style:{justifyContent:"right",display:"flex"},children:Ve.jsx(c1,{icon:Ve.jsx(lfe,{}),text:_?"Program Manually":"Program with ChatGPT",clickFunction:()=>p(g8)})}),Ve.jsx(Qp,{item:!0,xs:12,sm:12,md:8,lg:5,xl:4,style:{justifyContent:"right",display:"flex"},children:Ve.jsxs(Kw,{direction:"row",alignItems:"center",children:[!u&&Ve.jsx("div",{style:{backgroundColor:"#FF7E7E",width:"45px",height:"45px",borderRadius:"25px",marginRight:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},children:Ve.jsx("img",{style:{height:"34px",position:"absolute",top:"5px",left:"5px"},src:rfe})}),u&&Ve.jsx("div",{style:{backgroundColor:"#A0FF7E",width:"45px",height:"45px",borderRadius:"25px",marginRight:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},children:Ve.jsx("img",{style:{height:"34px",position:"absolute",top:"5px",left:"5px"},src:nfe})}),Ve.jsx(_P,{id:"robotIpAddress",disabled:u,label:"IP",variant:"filled",style:{backgroundColor:"#FFFFFF50",borderRadius:"5px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",marginRight:"5px"},defaultValue:"",onChange:C=>t(C.target.value)}),!u&&Ve.jsx(c1,{text:"Connect",clickFunction:b}),u&&Ve.jsx(c1,{text:"Disconnect",clickFunction:d}),Ve.jsx(cM,{style:{margin:"5px",marginRight:"10px",color:"black",backgroundColor:"#FAFAFA",borderRadius:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},onClick:()=>{p(m8)},children:Ve.jsx(H9,{})})]})})]})})]})}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cfe={kind:"categoryToolbox",contents:[{kind:"category",name:"Logic",categorystyle:"logic_category",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"logic_null"},{kind:"block",type:"logic_ternary"}]},{kind:"category",name:"Loops",categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{shadow:{type:"math_number",fields:{NUM:10}}}}}]},{kind:"category",name:"Math",categorystyle:"math_category",contents:[{kind:"block",type:"math_number",fields:{NUM:123}},{kind:"block",type:"BasicSlider"},{kind:"block",type:"math_number_property",inputs:{NUMBER_TO_CHECK:{shadow:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"math_random_int",inputs:{FROM:{shadow:{type:"math_number",fields:{NUM:1}}},TO:{shadow:{type:"math_number",fields:{NUM:100}}}}}]},{kind:"category",name:"Functions",categorystyle:"procedure_category",custom:"PROCEDURE"},{kind:"sep",gap:"8"},{kind:"category",name:"Movement",categorystyle:"movement_category",contents:[{kind:"block",type:"DriveTime"},{kind:"block",type:"DriveTime2"},{kind:"block",type:"Turn"},{kind:"block",type:"Turn2"},{kind:"block",type:"MoveHead"},{kind:"block",type:"MoveHead3"},{kind:"block",type:"MoveArm"},{kind:"block",type:"MoveArm2"},{kind:"block",type:"MoveArms2"},{kind:"block",type:"MoveArm3"}]},{kind:"category",name:"Light",categorystyle:"light_category",contents:[{kind:"block",type:"ChangeLED"},{kind:"block",type:"TransitionLED"},{kind:"block",type:"colour_picker"},{kind:"block",type:"colour_random"},{kind:"block",type:"colour_rgb",inputs:{RED:{shadow:{type:"math_number",fields:{NUM:100}}},GREEN:{shadow:{type:"math_number",fields:{NUM:50}}},BLUE:{shadow:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"colour_blend",inputs:{COLOUR1:{shadow:{type:"colour_picker",fields:{COLOUR:"#ff0000"}}},COLOUR2:{shadow:{type:"colour_picker",fields:{COLOUR:"#3333ff"}}},RATIO:{shadow:{type:"math_number",fields:{NUM:.5}}}}},{kind:"block",type:"TurnOnFlashlight"},{kind:"block",type:"TurnOffFlashlight"}]},{kind:"category",name:"Speech",categorystyle:"speech_category",contents:[{kind:"block",type:"Speak"},{kind:"block",type:"SpeakDefault"},{kind:"block",type:"text"}]},{kind:"category",name:"Face",categorystyle:"face_category",contents:[{kind:"block",type:"DisplayImage"},{kind:"block",type:"eyes_acceptance"},{kind:"block",type:"eyes_admiration"},{kind:"block",type:"eyes_amazement"},{kind:"block",type:"eyes_anger"},{kind:"block",type:"eyes_annoyed"},{kind:"block",type:"eyes_anticipation"},{kind:"block",type:"eyes_apprehension"},{kind:"block",type:"eyes_boredom"},{kind:"block",type:"eyes_default"},{kind:"block",type:"eyes_disgust"},{kind:"block",type:"eyes_distraction"},{kind:"block",type:"eyes_ecstasy_frame_1"},{kind:"block",type:"eyes_ecstasy_frame_2"},{kind:"block",type:"eyes_fear"},{kind:"block",type:"eyes_grief"},{kind:"block",type:"eyes_interest"},{kind:"block",type:"eyes_joy"},{kind:"block",type:"eyes_loathing"},{kind:"block",type:"eyes_pensiveness"},{kind:"block",type:"eyes_rage"},{kind:"block",type:"eyes_sad"},{kind:"block",type:"eyes_serenity"},{kind:"block",type:"eyes_surprise"},{kind:"block",type:"eyes_terror"},{kind:"block",type:"eyes_trust"},{kind:"block",type:"eyes_vigilance"},{kind:"block",type:"e_Sleeping"},{kind:"block",type:"e_SleepingZZZ"},{kind:"block",type:"e_Contempt"},{kind:"block",type:"e_ContentLeft"},{kind:"block",type:"e_ContentRight"},{kind:"block",type:"e_Disoriented"},{kind:"block",type:"e_EcstacyHilarious"},{kind:"block",type:"e_EcstacyStarryEyed"},{kind:"block",type:"e_JoyGoofy"},{kind:"block",type:"e_JoyGoofy2"},{kind:"block",type:"e_JoyGoofy3"},{kind:"block",type:"e_Love"},{kind:"block",type:"e_Rage"},{kind:"block",type:"e_Rage2"},{kind:"block",type:"e_Rage3"},{kind:"block",type:"e_Rage4"},{kind:"block",type:"e_RemorseShame"}]},{kind:"category",name:"Audio",categorystyle:"audio_category",contents:[{kind:"block",type:"SetVolume"},{kind:"block",type:"PlayAudio"},{kind:"block",type:"s_Acceptance"},{kind:"block",type:"s_Amazement"},{kind:"block",type:"s_Amazement2"},{kind:"block",type:"s_Anger"},{kind:"block",type:"s_Anger2"},{kind:"block",type:"s_Anger3"},{kind:"block",type:"s_Anger4"},{kind:"block",type:"s_Annoyance"},{kind:"block",type:"s_Annoyance2"},{kind:"block",type:"s_Annoyance3"},{kind:"block",type:"s_Annoyance4"},{kind:"block",type:"s_Awe"},{kind:"block",type:"s_Awe2"},{kind:"block",type:"s_Awe3"},{kind:"block",type:"s_Boredom"},{kind:"block",type:"s_Disapproval"},{kind:"block",type:"s_Disgust"},{kind:"block",type:"s_Disgust2"},{kind:"block",type:"s_Disgust3"},{kind:"block",type:"s_DisorientedConfused"},{kind:"block",type:"s_DisorientedConfused2"},{kind:"block",type:"s_DisorientedConfused3"},{kind:"block",type:"s_DisorientedConfused4"},{kind:"block",type:"s_DisorientedConfused5"},{kind:"block",type:"s_DisorientedConfused6"},{kind:"block",type:"s_Distraction"},{kind:"block",type:"s_Ecstacy"},{kind:"block",type:"s_Ecstacy2"},{kind:"block",type:"s_Fear"},{kind:"block",type:"s_Grief"},{kind:"block",type:"s_Grief2"},{kind:"block",type:"s_Grief3"},{kind:"block",type:"s_Grief4"},{kind:"block",type:"s_Joy"},{kind:"block",type:"s_Joy2"},{kind:"block",type:"s_Joy3"},{kind:"block",type:"s_Joy4"},{kind:"block",type:"s_Loathing"},{kind:"block",type:"s_Love"},{kind:"block",type:"s_PhraseByeBye"},{kind:"block",type:"s_PhraseEvilAhHa"},{kind:"block",type:"s_PhraseHello"},{kind:"block",type:"s_PhraseNoNoNo"},{kind:"block",type:"s_PhraseOopsy"},{kind:"block",type:"s_PhraseOwOwOw"},{kind:"block",type:"s_PhraseOwwww"},{kind:"block",type:"s_PhraseUhOh"},{kind:"block",type:"s_Rage"},{kind:"block",type:"s_Sadness"},{kind:"block",type:"s_Sadness2"},{kind:"block",type:"s_Sadness3"},{kind:"block",type:"s_Sadness4"},{kind:"block",type:"s_Sadness5"},{kind:"block",type:"s_Sadness6"},{kind:"block",type:"s_Sadness7"},{kind:"block",type:"s_Sleepy"},{kind:"block",type:"s_Sleepy2"},{kind:"block",type:"s_Sleepy3"},{kind:"block",type:"s_Sleepy4"},{kind:"block",type:"s_SleepySnore"},{kind:"block",type:"s_SystemCameraShutter"}]},{kind:"category",name:"Misc",categorystyle:"misc_category",contents:[{kind:"block",type:"DisplayAnimation"},{kind:"block",type:"DisplayText"},{kind:"block",type:"ClearText"},{kind:"block",type:"WaitForSeconds"}]}]},hfe="/gpu-programming/assets/uw-crest-color-web-digital-CjofXveo.svg",dfe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20194%20209'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-67.3413,-198.983)'%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,37.529,47.7569)'%3e%3cpath%20d='M-4.263,-4.263C-1.908,-4.263%200.001,-2.353%200.001,0.002C0.001,2.356%20-1.908,4.263%20-4.263,4.263C-6.617,4.263%20-8.527,2.356%20-8.527,0.002C-8.527,-2.353%20-6.617,-4.263%20-4.263,-4.263'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,59.9955,60.1716)'%3e%3cpath%20d='M-2.673,-2.671C-1.196,-2.671%20-0.001,-1.477%20-0.001,0.001C-0.001,1.477%20-1.196,2.673%20-2.673,2.673C-4.148,2.673%20-5.342,1.477%20-5.342,0.001C-5.342,-1.477%20-4.148,-2.671%20-2.673,-2.671'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,18.8329,65.7474)'%3e%3cpath%20d='M-2.671,-2.671C-1.196,-2.671%200.001,-1.476%200.001,0C0.001,1.475%20-1.196,2.671%20-2.671,2.671C-4.146,2.671%20-5.343,1.475%20-5.343,0C-5.343,-1.476%20-4.146,-2.671%20-2.671,-2.671'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,34.0834,92.4773)'%3e%3cpath%20d='M-2.672,-2.672C-1.197,-2.672%200,-1.477%200,-0.001C0,1.475%20-1.197,2.672%20-2.672,2.672C-4.149,2.672%20-5.344,1.475%20-5.344,-0.001C-5.344,-1.477%20-4.149,-2.672%20-2.672,-2.672'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,47.2036,90.0173)'%3e%3cpath%20d='M-2.673,-2.671C-1.198,-2.671%20-0.001,-1.477%20-0.001,0C-0.001,1.476%20-1.198,2.673%20-2.673,2.673C-4.148,2.673%20-5.342,1.476%20-5.342,0C-5.342,-1.477%20-4.148,-2.671%20-2.673,-2.671'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(1,0,0,1,31.4239,88.2618)'%3e%3cpath%20d='M0,-31.486L-7.343,-31.486L-7.343,-24.621L-2.62,-27.134C-2.62,-27.134%20-1.885,-30.033%200,-31.486M-2.667,-21.8L-7.343,-19.427L-7.343,0L0.218,0C0.652,-4.687%201.012,-14.334%200.385,-17.054C-1.978,-18.859%20-2.667,-21.8%20-2.667,-21.8M16.67,-22.279C16.05,-19.824%2014.854,-18.168%2013.521,-16.972C16.087,-15.06%2018.567,-11.369%2018.567,-7.484L18.567,0L23.979,0L23.979,-22.367C22.277,-21.923%2019.538,-21.203%2016.67,-22.279M8.317,-13.886C7.15,-14.439%205.715,-14.459%205.715,-14.459L5.715,0L13.318,0L13.318,-6.519C13.318,-11.601%209.419,-13.365%208.317,-13.886M13.92,-31.486C15.038,-30.308%2015.911,-29.021%2016.417,-27.457C18.939,-25.75%2022.22,-26.601%2023.979,-26.855L23.979,-31.486L13.92,-31.486Z'%20style='fill:rgb(205,20,66);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function pfe(n){return Ve.jsxs(Qp,{container:!0,style:{position:"absolute",left:"20px",bottom:"20px",zIndex:"101",width:"70px"},children:[Ve.jsx(Qp,{item:!0,xs:6,sm:6,md:12,lg:12,xl:12,alignContent:"center",children:Ve.jsx("img",{src:dfe})}),Ve.jsx(Qp,{item:!0,xs:6,sm:6,md:12,lg:12,xl:12,children:Ve.jsx("img",{src:hfe})})]})}function p4(){const{innerWidth:n,innerHeight:e}=window;return{width:n,height:e}}function G9(){const[n,e]=me.useState(p4());return me.useEffect(()=>{function t(){e(p4())}return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n}lg.Blocks.Start={init:function(){this.setStyle("hat_blocks"),this.appendDummyInput().appendField("Program starts here"),this.setColour(Pt.procedure_category.colour),this.setTooltip("This is the starting block"),this.setNextStatement(!0,null),this.setHelpUrl(""),this.setDeletable(!1)}};function f4(n){const e=fr(C=>C.addBlock),t=fr(C=>C.blocks),i=fr(C=>C.removeBlock),s=fr(C=>C.getBlock),o=fr(C=>C.updateBlock),l=fr(C=>C.getBlockType),u=fr(C=>C.setBlocklyWorkspace),d=fr(C=>C.loadBlocks),p=fr(C=>C.blocklyWorkspace);fr(C=>C.ip);const{height:_,_:y}=G9(),b=(C,A)=>{C.push(A);let I=s(A);for(;I.next;)I=I.next,C.push(I)},E=(C,A)=>{sh(A?C?`switch toolbox category from ${A} to ${C}`:`unselect toolbox category: ${A}`:`select toolbox category: ${C}`)};return lg.common.defineBlocks(t),Object.assign(KS.javascriptGenerator.forBlock,UI),me.useEffect(()=>{var C,A,I;if(!document.querySelector(".blocklySvg")){const L=document.getElementById("pageContainer"),O=document.getElementById("blocklyDiv");let P=null;if(P=lg.inject(O,{toolbox:cfe,grid:{spacing:20,length:3,colour:"#ccc",snap:!0},theme:lg.Theme.defineTheme("gpuTheme",{componentStyles:{toolboxBackgroundColour:"#E4E5F1",flyoutBackgroundColour:"#d2d3db"},categoryStyles:{...Pt},blockStyles:{logic_blocks:{colourPrimary:Pt.logic_category.colour},loop_blocks:{colourPrimary:Pt.loop_category.colour},math_blocks:{colourPrimary:Pt.math_category.colour},procedure_blocks:{colourPrimary:Pt.procedure_category.colour},text_blocks:{colourPrimary:Pt.speech_category.colour},colour_blocks:{colourPrimary:Pt.light_category.colour},hat_blocks:{hat:"cap"}}})}),!p&&P.getAllBlocks().filter(W=>W.type==="Start").length===0){const W=P.newBlock("Start");W.setDeletable(!1),W.moveBy(50,50),W.initSvg(),W.render()}if(p){let z={data:[]},W=Object.keys(t),H=W.length;for(let U=0;U<H;U++){let Q={id:t[W[U]].id,type:t[W[U]].type};t[W[U]].next&&t[W[U]].next!==""&&(Q.nextStatement=t[W[U]].next);let ne=(C=t[W[U]])!=null&&C.inputs?Object.keys((A=t[W[U]])==null?void 0:A.inputs):[];for(let oe=0;oe<ne.length;oe++)Q[ne[oe]]=(I=t[W[U]].inputs[ne[oe]])!=null&&I.shadow?t[W[U]].inputs[ne[oe]].shadow.id:t[W[U]].inputs[ne[oe]];Q.type==="math_number"&&(Q.value=t[W[U]].fields.NUM),Q.type==="colour_picker"&&(Q.value=t[W[U]].fields.COLOUR),Q.type==="text"&&(Q.value=t[W[U]].fields.TEXT),["BasicSlider","ArmPositionSlider","SpeedSlider","TimeSlider","HeadPitchSlider","HeadRollSlider","HeadYawSlider"].includes(Q.type)&&(Q.value=t[W[U]].fields.FIELD_slider_value),z.data.push({...Q})}d(z,P)}u(P),KS.javascriptGenerator.addReservedWords("code"),new ResizeObserver(z=>{for(let W of z){let H=L,U=0,Q=0;do U+=H.offsetLeft,Q+=H.offsetTop,H=H.offsetParent;while(H);O.style.left=U+"px",O.style.top=Q+"px",O.style.width=L.offsetWidth+"px",O.style.height=L.offsetHeight+"px",lg.svgResize(P)}}).observe(L),P.render(),P.addChangeListener(z=>{if(z.isUiEvent){if(z.type==="toolbox_item_select")E(z.newItem,z.oldItem);else if(z.type==="click"){if(z.targetType==="block"){const W=l(z.blockId);sh(`click on ${W} block`)}z.targetType==="workspace"&&sh("click on workspace")}else if(z.type==="selected"){if(z.oldElementId){const W=l(z.oldElementId);sh(`unselect and un-highlight ${W} `)}if(z.newElementId){const W=l(z.newElementId);sh(`select and highlight ${W} `)}}else if(z.type==="drag"){const W=l(z.blockId);z.isStart?sh(`drag block ${W} start `):sh(`drag block ${W} end `)}return}if(z.type===lg.Events.BLOCK_DELETE){let W=z.blockId,H=[W],U=s(W).inputs;if(U)for(let[oe,le]of Object.entries(U))typeof le!="string"?H.push(le.id):b(H,le);let Q=s(z.blockId).next;Q&&b(H,Q);const ne=H.map(oe=>l(oe));i(H),sh(`block ${W} is deleted, total delete blocks: ${ne}`)}if(z.type===lg.Events.BLOCK_CHANGE){const W=l(z.blockId);let H=z.blockId,U=s(H);U.fields[z.name]=z.newValue,o(H,U),sh(`field ${z.name} of ${W} change from ${z.oldValue} to ${z.newValue} `)}if(z.type==="create"){let W={id:z.json.id,type:z.json.type,prev:"",next:"",isShadow:!1};if(z.json.type==="Start"&&(z.json.id,W={id:z.json.id,type:z.json.type,next:""}),z.json.fields&&(W.fields=z.json.fields),z.json.inputs){W.inputs=z.json.inputs;for(let[H,U]of Object.entries(z.json.inputs))if(U.shadow){let Q={id:U.shadow.id,type:U.shadow.type,fields:U.shadow.fields,isShadow:!0,initialParent:z.ids[0],initialInput:H};"shadows"in W||(W.shadows={}),W.shadows[H]=U.shadow.id,e(U.shadow.id,Q),sh(`create a instance of type ${Q.type}`)}}e(z.json.id,W),sh(`create a instance of type ${W.type}`)}if(z.type==="move"){const W=l(z.blockId),H=z.reason;if(H&&(typeof H!="string"&&H[1]==="drag"||H[0]==="drag")&&z.newCoordinate&&sh(`drag ${W} from coordinate: {x: ${z.oldCoordinate.x}, y: ${z.oldCoordinate.y}} to {x: ${z.newCoordinate.x},y: ${z.newCoordinate.y}}`),z.reason&&z.reason.includes("connect")){let U=z.newParentId,Q=s(z.newParentId);const ne=Q.type,oe=s(z.blockId);z.newInputName?("inputs"in Q||(Q.inputs={}),Q.inputs[z.newInputName]=z.blockId,o(U,Q),sh(`connect ${oe.type}  as input of ${ne}`)):(Q.next=z.blockId,o(U,Q),oe.prev=U,o(z.blockId,oe),sh(`Placed ${oe.type} after ${ne}`))}if(z.reason&&z.reason.includes("disconnect")){let U=z.oldParentId,Q=s(z.oldParentId);const ne=Q.type,oe=s(z.blockId);if(!z.oldInputName)Q.next="",o(U,Q),oe.prev="",o(z.blockId,oe),sh(`disconnect ${ne} from ${Q.type}`);else{if(Q.inputs[z.oldInputName]="",Q.shadows&&Q.shadows[z.oldInputName]){let le=Q.shadows[z.oldInputName];Q.inputs[z.oldInputName]=le}o(U,Q),sh(`remove ${ne} from input of ${Q.type}`)}}}})}},[]),Ve.jsxs("div",{style:{width:"100%",height:"100%"},children:[_>=460&&Ve.jsx(pfe,{}),Ve.jsxs("div",{id:"pageContainer",style:{width:"100%",height:"100%"},children:[Ve.jsx("div",{id:"blocklyDiv",style:{width:"100%",height:"100%"}}),Ve.jsx("xml",{id:"toolbox",style:{display:"none"}})]})]})}const ffe=n=>{const[e,t]=me.useState(null),i=()=>{t(null)},s=o=>{t(e===o?null:o)};return Ve.jsx("div",{children:Ve.jsxs("div",{className:"subtask-card",children:[Ve.jsx("h3",{className:"subtask-title",children:n.title}),Ve.jsx("p",{className:"subtask-subtext",children:n.subtext}),Ve.jsx("div",{className:"hints-container",children:n.hints&&n.hints.map((o,l)=>Ve.jsxs("button",{className:`hint-button ${e===o?"selected":""}`,onClick:()=>s(o),children:["Hint ",l+1]},o.title))}),e&&Ve.jsxs("div",{className:"hint-expansion",children:[Ve.jsx("p",{children:e.text}),Ve.jsx("div",{className:"close-button-container",children:Ve.jsx("button",{className:"close-button",onClick:i,children:"Close"})})]})]})})},mfe=n=>Ve.jsxs("div",{className:"task-tab-container",children:[(n==null?void 0:n.subtasks)&&(n==null?void 0:n.subtasks.map(e=>Ve.jsx(ffe,{title:e.title,subtext:e.subtext,hints:e.hints.map(t=>n.allTasks[t])},e.title))),n.hasNextTask&&Ve.jsxs("div",{className:"completion-card",children:[Ve.jsx("p",{children:"All steps are complete."}),Ve.jsx("button",{className:"next-task-button",onClick:n.onNextTask,children:"Go To Next Task"})]})]}),gfe=()=>{var p,_;const[n,e]=me.useState(0),t=fr(Zs(y=>y.getAllTasks)),i=fr(Zs(y=>y.getMainTasks)),s=t(),o=i(),l=y=>{e(y)},u=()=>{n<Object.keys(o).length-1&&e(n+1),window.scrollTo({top:0,behavior:"smooth"})};let d=Object.keys(o);return Ve.jsxs("div",{children:[Ve.jsx("div",{className:"tabs-container",children:d.map((y,b)=>Ve.jsx("div",{className:`tab ${b===n?"active":""}`,onClick:()=>l(b),children:o[y].name},y))}),Ve.jsx("div",{className:"task-tab-container",children:Ve.jsx(mfe,{subtasks:(_=(p=o[d[n]])==null?void 0:p.subtasks)==null?void 0:_.map(y=>s[y]),allTasks:s,onNextTask:u,hasNextTask:n+1<d.length},d[n])})]})};function rc(n,e,t){return e=Woe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Z_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&i.push.apply(i,Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.forEach(function(s){rc(n,s,t[s])})}return n}class Lo{static isBrowser(){return typeof window<"u"}static isOpera(){return Lo.isBrowser()&&(!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0)}static isFirefox(){return Lo.isBrowser()&&typeof InstallTrigger<"u"}static isSafari(){return Lo.isBrowser()?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}static isIE(){return Lo.isBrowser()&&!!document.documentMode}static isEdge(){return Lo.isBrowser()&&!Lo.isIE()&&!!window.StyleMedia}static isChrome(){return Lo.isBrowser()&&!!window.chrome&&!!window.chrome.webstore}static isBlink(){return Lo.isBrowser()&&(Lo.isChrome()||Lo.isOpera())&&!!window.CSS}static getUserAgent(){return typeof navigator>"u"?"":navigator.userAgent}static isAndroid(){return Lo.isBrowser()&&Lo.getUserAgent().match(/Android/i)}static isBlackBerry(){return Lo.isBrowser()&&Lo.getUserAgent().match(/BlackBerry/i)}static isIOS(){return Lo.isBrowser()&&Lo.getUserAgent().match(/iPhone|iPad|iPod/i)}static isOpera(){return Lo.isBrowser()&&Lo.getUserAgent().match(/Opera Mini/i)}static isWindows(){return Lo.isBrowser()&&Lo.isWindowsDesktop()||Lo.isWindowsMobile()}static isWindowsMobile(){return Lo.isBrowser()&&Lo.getUserAgent().match(/IEMobile/i)}static isWindowsDesktop(){return Lo.isBrowser()&&Lo.getUserAgent().match(/WPDesktop/i)}static isMobile(){return Lo.isBrowser()&&(Lo.isWindowsMobile()||Lo.isBlackBerry()||Lo.isAndroid()||Lo.isIOS())}}const BR=n=>Object.keys(n).reduce((e,t)=>t.substr(0,5)==="data-"?Z_({},e,{[t]:n[t]}):e,{});class bm extends Vr.Component{static isA(e){return e?e.type===Vr.createElement(bm,null).type:!1}constructor(e){super(e),rc(this,"ref",Vr.createRef()),rc(this,"onMouseMove",t=>{if(this.state.active){const i=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:i,event:t}),this.props.onResize&&this.props.onResize({component:this,domElement:i}),t.stopPropagation(),t.preventDefault()}}),rc(this,"onMouseDown",t=>{this.setState({active:!0}),!(this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this}))&&this.props.events.emit("startResize",{index:this.props.index,event:t})}),rc(this,"onMouseUp",t=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:t}))}),this.state={active:!1},this.document=e.document}componentDidMount(){this.document&&(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){this.document&&(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const e=[Lo.isMobile()?"reflex-thin":"",...this.props.className.split(" "),this.state.active?"active":"","reflex-splitter"].join(" ").trim();return Vr.createElement("div",Ye({},BR(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:e,id:this.props.id,ref:this.ref}),this.props.children)}}rc(bm,"propTypes",{children:ts.oneOfType([ts.arrayOf(ts.node),ts.node]),onStartResize:ts.func,onStopResize:ts.func,className:ts.string,propagate:ts.bool,onResize:ts.func,style:ts.object});rc(bm,"defaultProps",{document:typeof document<"u"?document:null,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});class _fe{constructor(){this._events={}}on(e,t){return e.split(" ").forEach(i=>{this._events[i]=this._events[i]||[],this._events[i].push(t)}),this}off(e,t){if(e==null){this._events={};return}return e.split(" ").forEach(i=>{i in this._events&&(t?this._events[i].splice(this._events[i].indexOf(t),1):this._events[i]=[])}),this}emit(e){if(this._events[e]!==void 0)for(var t=this._events[e].slice(),i=0;i<t.length;++i){var s=t[i].apply(this,Array.prototype.slice.call(arguments,1));if(s!==void 0)return s}}}Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(n,e){if(this==null)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if(i===0)return!1;var s=e|0,o=Math.max(s>=0?s:i-Math.abs(s),0);function l(u,d){return u===d||typeof u=="number"&&typeof d=="number"&&isNaN(u)&&isNaN(d)}for(;o<i;){if(l(t[o],n))return!0;o++}return!1}});Math.sign||(Math.sign=function(n){return(n>0)-(n<0)||+n});class aI extends Vr.Component{constructor(e){super(e),rc(this,"onWindowResize",()=>{this.setState({flexData:this.computeFlexData()})}),rc(this,"onStartResize",t=>{const i=t.event.changedTouches?t.event.changedTouches[0]:t.event;switch(this.props.orientation){case"horizontal":document.body.classList.add("reflex-row-resize"),this.previousPos=i.clientY;break;case"vertical":default:document.body.classList.add("reflex-col-resize"),this.previousPos=i.clientX;break}this.elements=[this.children[t.index-1],this.children[t.index+1]],this.emitElementsEvent(this.elements,"onStartResize")}),rc(this,"onResize",t=>{const i=t.event.changedTouches?t.event.changedTouches[0]:t.event,s=this.getOffset(i,t.domElement);switch(this.props.orientation){case"horizontal":this.previousPos=i.clientY;break;case"vertical":default:this.previousPos=i.clientX;break}if(s){const o=this.computeAvailableOffset(t.index,s);o&&(this.elements=this.dispatchOffset(t.index,o),this.adjustFlex(this.elements),this.setState({resizing:!0},()=>{this.emitElementsEvent(this.elements,"onResize")}))}}),rc(this,"onStopResize",t=>{document.body.classList.remove("reflex-row-resize"),document.body.classList.remove("reflex-col-resize");const i=this.elements?this.elements.map(o=>o.ref):[],s=this.children.filter(o=>!bm.isA(o)&&i.includes(o.ref));this.emitElementsEvent(s,"onStopResize"),this.setState({resizing:!1})}),rc(this,"onElementSize",t=>new Promise(i=>{try{const s=t.index,o=this.getSize(this.children[s]),l=t.size-o,u=t.direction,d=s+u,p=this.computeAvailableOffset(d,u*l);this.elements=null,p&&(this.elements=this.dispatchOffset(d,p),this.adjustFlex(this.elements)),this.setState(this.state,()=>{this.emitElementsEvent(this.elements,"onResize"),i()})}catch(s){console.log(s)}})),this.events=new _fe,this.children=[],this.state={flexData:[]},this.ref=Vr.createRef()}componentDidMount(){const e=this.computeFlexData(),{windowResizeAware:t}=this.props;t&&window.addEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:t,flexData:e}),this.events.on("element.size",this.onElementSize),this.events.on("startResize",this.onStartResize),this.events.on("stopResize",this.onStopResize),this.events.on("resize",this.onResize)}componentWillUnmount(){this.events.off(),window.removeEventListener("resize",this.onWindowResize)}getValidChildren(e=this.props){return this.toArray(e.children).filter(t=>!!t)}componentDidUpdate(e,t){const i=this.getValidChildren(this.props);if(i.length!==this.state.flexData.length||e.orientation!==this.props.orientation||this.flexHasChanged(e)){const s=this.computeFlexData(i,this.props);this.setState({flexData:s})}this.props.windowResizeAware!==this.state.windowResizeAware&&(this.props.windowResizeAware?window.addEventListener("resize",this.onWindowResize):window.removeEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:this.props.windowResizeAware}))}flexHasChanged(e){const t=this.getValidChildren(e).map(s=>s.props.flex||0);return!this.getValidChildren().map(s=>s.props.flex||0).every((s,o)=>s===t[o])}getSize(e){var t,i,s;const o=e==null||(t=e.ref)===null||t===void 0?void 0:t.current;switch(this.props.orientation){case"horizontal":return(i=o==null?void 0:o.offsetHeight)!==null&&i!==void 0?i:0;case"vertical":default:return(s=o==null?void 0:o.offsetWidth)!==null&&s!==void 0?s:0}}getOffset(e,t){const{top:i,bottom:s,left:o,right:l}=t.getBoundingClientRect();switch(this.props.orientation){case"horizontal":{const u=e.clientY-this.previousPos;if(u>0){if(e.clientY>=i)return u}else if(e.clientY<=s)return u;break}case"vertical":default:{const u=e.clientX-this.previousPos;if(u>0){if(e.clientX>o)return u}else if(e.clientX<l)return u}break}return 0}adjustFlex(e){const t=e.reduce((i,s)=>{const o=s.props.index,l=s.props.flex,u=this.state.flexData[o].flex;return i+(l-u)/e.length},0);e.forEach(i=>{this.state.flexData[i.props.index].flex+=t})}computeAvailableOffset(e,t){const i=this.computeAvailableStretch(e,t),s=this.computeAvailableShrink(e,t);return Math.min(i,s)*Math.sign(t)}checkPropagate(e,t){if(t>0){if(e<this.children.length-2){const i=this.children[e+2];return bm.isA(i)&&i.props.propagate}}else if(e>2){const i=this.children[e-2];return bm.isA(i)&&i.props.propagate}return!1}computeAvailableStretch(e,t){var i;const s=t<0?e+1:e-1,o=this.children[s],l=this.getSize(o),d=((i=o==null?void 0:o.props.maxSize)!==null&&i!==void 0?i:0)-l;if(d<Math.abs(t)&&this.checkPropagate(e,-1*t)){const p=Math.sign(t)*(Math.abs(t)-d);return d+this.computeAvailableStretch(t<0?e+2:e-2,p)}return Math.min(d,Math.abs(t))}computeAvailableShrink(e,t){var i;const s=t>0?e+1:e-1,o=this.children[s],l=this.getSize(o),u=Math.max((i=o==null?void 0:o.props.minSize)!==null&&i!==void 0?i:0,0),d=l-u;if(d<Math.abs(t)&&this.checkPropagate(e,t)){const p=Math.sign(t)*(Math.abs(t)-d);return d+this.computeAvailableShrink(t>0?e+2:e-2,p)}return Math.min(d,Math.abs(t))}computePixelFlex(e=this.props.orientation){if(!this.ref.current)return console.warn("Unable to locate ReflexContainer dom node"),0;switch(e){case"horizontal":return this.ref.current.offsetHeight===0?(console.warn("Found ReflexContainer with height=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetHeight;case"vertical":default:return this.ref.current.offsetWidth===0?(console.warn("Found ReflexContainer with width=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetWidth}}addOffset(e,t){const i=this.getSize(e),s=e.props.index,o=Math.max(i+t,0),l=this.state.flexData[s].flex,u=l>0?l*o/i:this.computePixelFlex()*o;this.state.flexData[s].flex=!isFinite(u)||isNaN(u)?0:u}dispatchStretch(e,t){const i=t<0?e+1:e-1;if(i<0||i>this.children.length-1)return[];const s=this.children[i],o=this.getSize(s),u=Math.min(s.props.maxSize,o+Math.abs(t))-o;if(this.addOffset(s,u),u<Math.abs(t)){const d=e-Math.sign(t)*2,p=Math.sign(t)*(Math.abs(t)-u);return[s,...this.dispatchStretch(d,p)]}return[s]}dispatchShrink(e,t){const i=t>0?e+1:e-1;if(i<0||i>this.children.length-1)return[];const s=this.children[i],o=this.getSize(s),u=Math.max(s.props.minSize,o-Math.abs(t))-o;if(this.addOffset(s,u),Math.abs(u)<Math.abs(t)){const d=e+Math.sign(t)*2,p=Math.sign(t)*(Math.abs(t)+u);return[s,...this.dispatchShrink(d,p)]}return[s]}dispatchOffset(e,t){return[...this.dispatchStretch(e,t),...this.dispatchShrink(e,t)]}emitElementsEvent(e,t){this.toArray(e).forEach(i=>{i.props[t]&&i.props[t]({domElement:i.ref.current,component:i})})}computeFlexData(e=this.getValidChildren(),t=this.props){const i=this.computePixelFlex(t.orientation),s=p=>p.reduce((_,y)=>!bm.isA(y)&&y.constrained?_-y.flex:_,1),o=p=>p.reduce((_,y)=>!bm.isA(y)&&!y.constrained?_+1:_,0),l=e.map(p=>{const _=p.props;return{maxFlex:(_.maxSize||Number.MAX_VALUE)*i,sizeFlex:(_.size||Number.MAX_VALUE)*i,minFlex:(_.minSize||1)*i,constrained:_.flex!==void 0,flex:_.flex||0,type:p.type}}),u=(p,_=0)=>{let y=!1;const b=o(p),E=s(p),C=p.map(A=>{if(bm.isA(A))return A;const I=A.constrained?A.flex:E/b,L=Math.min(A.sizeFlex,Math.min(A.maxFlex,Math.max(A.minFlex,I))),O=A.constrained||L!==I;return y=y||O,Z_({},A,{flex:L,constrained:O})});return y&&_<this.props.maxRecDepth?u(C,_+1):C};return u(l).map(p=>({flex:bm.isA(p)?0:p.flex,ref:Vr.createRef()}))}toArray(e){return e?Array.isArray(e)?e:[e]:[]}render(){const e=[this.state.resizing?"reflex-resizing":"",...this.props.className.split(" "),this.props.orientation,"reflex-container"].join(" ").trim();return this.children=Vr.Children.map(this.getValidChildren(),(t,i)=>{if(i>this.state.flexData.length-1)return Vr.createElement("div",null);const s=this.state.flexData[i],o=Z_({},t.props,{maxSize:t.props.maxSize||Number.MAX_VALUE,orientation:this.props.orientation,minSize:t.props.minSize||1,events:this.events,flex:s.flex,ref:s.ref,index:i});return Vr.cloneElement(t,o)}),Vr.createElement("div",Ye({},BR(this.props),{style:this.props.style,className:e,ref:this.ref}),this.children)}}rc(aI,"propTypes",{windowResizeAware:ts.bool,orientation:ts.oneOf(["horizontal","vertical"]),maxRecDepth:ts.number,className:ts.string,style:ts.object});rc(aI,"defaultProps",{orientation:"horizontal",windowResizeAware:!1,maxRecDepth:100,className:"",style:{}});class RE extends Vr.Component{static isA(e){return e?e.type===RE:!1}constructor(e){super(e),rc(this,"ref",Vr.createRef()),rc(this,"onMouseMove",t=>{if(this.state.active){const i=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:i,event:t}),this.props.onResize&&this.props.onResize({component:this,domElement:i}),t.stopPropagation(),t.preventDefault()}}),rc(this,"onMouseDown",t=>{this.setState({active:!0}),!(this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this}))&&this.props.events.emit("startResize",{index:this.props.index,event:t})}),rc(this,"onMouseUp",t=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:t}))}),this.state={active:!1},this.document=e.document}componentDidMount(){this.document&&(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){this.document&&(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const e=[...this.props.className.split(" "),this.state.active?"active":"","reflex-handle"].join(" ").trim();return Vr.createElement("div",Ye({},BR(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:e,id:this.props.id,ref:this.ref}),this.props.children)}}rc(RE,"propTypes",{children:ts.oneOfType([ts.arrayOf(ts.node),ts.node]),onStartResize:ts.func,onStopResize:ts.func,className:ts.string,propagate:ts.bool,onResize:ts.func,style:ts.object});rc(RE,"defaultProps",{document:typeof document>"u"?null:document,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});var W9="Expected a function",m4=NaN,vfe="[object Symbol]",yfe=/^\s+|\s+$/g,bfe=/^[-+]0x[0-9a-f]+$/i,Tfe=/^0b[01]+$/i,Sfe=/^0o[0-7]+$/i,Efe=parseInt,xfe=typeof Wl=="object"&&Wl&&Wl.Object===Object&&Wl,wfe=typeof self=="object"&&self&&self.Object===Object&&self,$fe=xfe||wfe||Function("return this")(),Cfe=Object.prototype,Afe=Cfe.toString,Mfe=Math.max,Ife=Math.min,N2=function(){return $fe.Date.now()};function Rfe(n,e,t){var i,s,o,l,u,d,p=0,_=!1,y=!1,b=!0;if(typeof n!="function")throw new TypeError(W9);e=g4(e)||0,lI(t)&&(_=!!t.leading,y="maxWait"in t,o=y?Mfe(g4(t.maxWait)||0,e):o,b="trailing"in t?!!t.trailing:b);function E(W){var H=i,U=s;return i=s=void 0,p=W,l=n.apply(U,H),l}function C(W){return p=W,u=setTimeout(L,e),_?E(W):l}function A(W){var H=W-d,U=W-p,Q=e-H;return y?Ife(Q,o-U):Q}function I(W){var H=W-d,U=W-p;return d===void 0||H>=e||H<0||y&&U>=o}function L(){var W=N2();if(I(W))return O(W);u=setTimeout(L,A(W))}function O(W){return u=void 0,b&&i?E(W):(i=s=void 0,l)}function P(){u!==void 0&&clearTimeout(u),p=0,i=d=s=u=void 0}function N(){return u===void 0?l:O(N2())}function z(){var W=N2(),H=I(W);if(i=arguments,s=this,d=W,H){if(u===void 0)return C(d);if(y)return u=setTimeout(L,e),E(d)}return u===void 0&&(u=setTimeout(L,e)),l}return z.cancel=P,z.flush=N,z}function kfe(n,e,t){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(W9);return lI(t)&&(i="leading"in t?!!t.leading:i,s="trailing"in t?!!t.trailing:s),Rfe(n,e,{leading:i,maxWait:e,trailing:s})}function lI(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function Ofe(n){return!!n&&typeof n=="object"}function Lfe(n){return typeof n=="symbol"||Ofe(n)&&Afe.call(n)==vfe}function g4(n){if(typeof n=="number")return n;if(Lfe(n))return m4;if(lI(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=lI(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(yfe,"");var t=Tfe.test(n);return t||Sfe.test(n)?Efe(n.slice(2),t?2:8):bfe.test(n)?m4:+n}var Dfe=kfe;const Nfe=k1(Dfe);var V9=function(){if(typeof Map<"u")return Map;function n(e,t){var i=-1;return e.some(function(s,o){return s[0]===t?(i=o,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var i=n(this.__entries__,t),s=this.__entries__[i];return s&&s[1]},e.prototype.set=function(t,i){var s=n(this.__entries__,t);~s?this.__entries__[s][1]=i:this.__entries__.push([t,i])},e.prototype.delete=function(t){var i=this.__entries__,s=n(i,t);~s&&i.splice(s,1)},e.prototype.has=function(t){return!!~n(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,i){i===void 0&&(i=null);for(var s=0,o=this.__entries__;s<o.length;s++){var l=o[s];t.call(i,l[1],l[0])}},e}()}(),vD=typeof window<"u"&&typeof document<"u"&&window.document===document,uI=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Bfe=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(uI):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),Pfe=2;function Ffe(n,e){var t=!1,i=!1,s=0;function o(){t&&(t=!1,n()),i&&u()}function l(){Bfe(o)}function u(){var d=Date.now();if(t){if(d-s<Pfe)return;i=!0}else t=!0,i=!1,setTimeout(l,e);s=d}return u}var Ufe=20,zfe=["top","right","bottom","left","width","height","size","weight"],Hfe=typeof MutationObserver<"u",Gfe=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Ffe(this.refresh.bind(this),Ufe)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var t=this.observers_,i=t.indexOf(e);~i&&t.splice(i,1),!t.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!vD||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Hfe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!vD||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var t=e.propertyName,i=t===void 0?"":t,s=zfe.some(function(o){return!!~i.indexOf(o)});s&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),j9=function(n,e){for(var t=0,i=Object.keys(e);t<i.length;t++){var s=i[t];Object.defineProperty(n,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return n},nE=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||uI},X9=PR(0,0,0,0);function cI(n){return parseFloat(n)||0}function _4(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(i,s){var o=n["border-"+s+"-width"];return i+cI(o)},0)}function Wfe(n){for(var e=["top","right","bottom","left"],t={},i=0,s=e;i<s.length;i++){var o=s[i],l=n["padding-"+o];t[o]=cI(l)}return t}function Vfe(n){var e=n.getBBox();return PR(0,0,e.width,e.height)}function jfe(n){var e=n.clientWidth,t=n.clientHeight;if(!e&&!t)return X9;var i=nE(n).getComputedStyle(n),s=Wfe(i),o=s.left+s.right,l=s.top+s.bottom,u=cI(i.width),d=cI(i.height);if(i.boxSizing==="border-box"&&(Math.round(u+o)!==e&&(u-=_4(i,"left","right")+o),Math.round(d+l)!==t&&(d-=_4(i,"top","bottom")+l)),!Yfe(n)){var p=Math.round(u+o)-e,_=Math.round(d+l)-t;Math.abs(p)!==1&&(u-=p),Math.abs(_)!==1&&(d-=_)}return PR(s.left,s.top,u,d)}var Xfe=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof nE(n).SVGGraphicsElement}:function(n){return n instanceof nE(n).SVGElement&&typeof n.getBBox=="function"}}();function Yfe(n){return n===nE(n).document.documentElement}function Kfe(n){return vD?Xfe(n)?Vfe(n):jfe(n):X9}function Jfe(n){var e=n.x,t=n.y,i=n.width,s=n.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return j9(l,{x:e,y:t,width:i,height:s,top:t,right:e+i,bottom:s+t,left:e}),l}function PR(n,e,t,i){return{x:n,y:e,width:t,height:i}}var qfe=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=PR(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=Kfe(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),Qfe=function(){function n(e,t){var i=Jfe(t);j9(this,{target:e,contentRect:i})}return n}(),Zfe=function(){function n(e,t,i){if(this.activeObservations_=[],this.observations_=new V9,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof nE(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new qfe(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof nE(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(i){return new Qfe(i.target,i.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),Y9=typeof WeakMap<"u"?new WeakMap:new V9,K9=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=Gfe.getInstance(),i=new Zfe(e,t,this);Y9.set(this,i)}return n}();["observe","unobserve","disconnect"].forEach(function(n){K9.prototype[n]=function(){var e;return(e=Y9.get(this))[n].apply(e,arguments)}});var eme=function(){return typeof uI.ResizeObserver<"u"?uI.ResizeObserver:K9}(),tme=["client","offset","scroll","bounds","margin"];function v4(n){var e=[];return tme.forEach(function(t){n[t]&&e.push(t)}),e}function y4(n,e){var t={};if(e.indexOf("client")>-1&&(t.client={top:n.clientTop,left:n.clientLeft,width:n.clientWidth,height:n.clientHeight}),e.indexOf("offset")>-1&&(t.offset={top:n.offsetTop,left:n.offsetLeft,width:n.offsetWidth,height:n.offsetHeight}),e.indexOf("scroll")>-1&&(t.scroll={top:n.scrollTop,left:n.scrollLeft,width:n.scrollWidth,height:n.scrollHeight}),e.indexOf("bounds")>-1){var i=n.getBoundingClientRect();t.bounds={top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height}}if(e.indexOf("margin")>-1){var s=getComputedStyle(n);t.margin={top:s?parseInt(s.marginTop):0,right:s?parseInt(s.marginRight):0,bottom:s?parseInt(s.marginBottom):0,left:s?parseInt(s.marginLeft):0}}return t}function nme(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||window}function rme(n){return function(e){var t,i;return i=t=function(s){aP(o,s);function o(){for(var u,d=arguments.length,p=new Array(d),_=0;_<d;_++)p[_]=arguments[_];return u=s.call.apply(s,[this].concat(p))||this,u.state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},u._animationFrameID=null,u._resizeObserver=null,u._node=null,u._window=null,u.measure=function(y){var b=y4(u._node,n||v4(u.props));y&&(b.entry=y[0].contentRect),u._animationFrameID=u._window.requestAnimationFrame(function(){u._resizeObserver!==null&&(u.setState({contentRect:b}),typeof u.props.onResize=="function"&&u.props.onResize(b))})},u._handleRef=function(y){u._resizeObserver!==null&&u._node!==null&&u._resizeObserver.unobserve(u._node),u._node=y,u._window=nme(u._node);var b=u.props.innerRef;b&&(typeof b=="function"?b(u._node):b.current=u._node),u._resizeObserver!==null&&u._node!==null&&u._resizeObserver.observe(u._node)},u}var l=o.prototype;return l.componentDidMount=function(){this._resizeObserver=this._window!==null&&this._window.ResizeObserver?new this._window.ResizeObserver(this.measure):new eme(this.measure),this._node!==null&&(this._resizeObserver.observe(this._node),typeof this.props.onResize=="function"&&this.props.onResize(y4(this._node,n||v4(this.props))))},l.componentWillUnmount=function(){this._window!==null&&this._window.cancelAnimationFrame(this._animationFrameID),this._resizeObserver!==null&&(this._resizeObserver.disconnect(),this._resizeObserver=null)},l.render=function(){var d=this.props;d.innerRef,d.onResize;var p=Tr(d,["innerRef","onResize"]);return me.createElement(e,Ye({},p,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},o}(me.Component),t.propTypes={client:ts.bool,offset:ts.bool,scroll:ts.bool,bounds:ts.bool,margin:ts.bool,innerRef:ts.oneOfType([ts.object,ts.func]),onResize:ts.func},i}}var yP=rme()(function(n){var e=n.measure,t=n.measureRef,i=n.contentRect,s=n.children;return s({measure:e,measureRef:t,contentRect:i})});yP.displayName="Measure";yP.propTypes.children=ts.func;const yD=n=>n?Array.isArray(n)?n:[n]:[];class ime extends Vr.Component{constructor(e){super(e),rc(this,"onResize",t=>{const{resizeHeight:i,resizeWidth:s}=this.props,{height:o,width:l}=t.bounds;this.setDimensions(Z_({},i&&{height:o},s&&{width:l}))}),this.setDimensions=Nfe(t=>{this.setState(t)},this.props.propagateDimensionsRate/1e3),this.state={height:"100%",width:"100%"}}renderChildren(){const{propagateDimensions:e}=this.props,t=yD(this.props.children).filter(i=>!!i);return Vr.Children.map(t,i=>this.props.withHandle||RE.isA(i)?Vr.cloneElement(i,Z_({dimensions:e&&this.state},i.props,{index:this.props.index-1,events:this.props.events})):e?Vr.cloneElement(i,Z_({},i.props,{dimensions:this.state})):i)}render(){return Vr.createElement(yP,{bounds:!0,onResize:this.onResize},({measureRef:e})=>Vr.createElement("div",{ref:e,className:"reflex-size-aware"},Vr.createElement("div",{style:this.state},this.renderChildren())))}}class bP extends Vr.Component{constructor(e){super(e),this.state={size:e.size}}static getDerivedStateFromProps(e,t){return e.size!==t.size?Z_({},t,{size:e.size}):null}async componentDidUpdate(e,t,i){if(t.size!==this.state.size){const s=yD(this.props.direction);for(let o of s)await this.props.events.emit("element.size",{index:this.props.index,size:this.props.size,direction:o})}}renderChildren(){const e=yD(this.props.children).filter(t=>!!t);return Vr.Children.map(e,t=>this.props.withHandle||RE.isA(t)?Vr.cloneElement(t,Z_({},t.props,{index:this.props.index-1,events:this.props.events})):t)}render(){const e=[...this.props.className.split(" "),this.props.orientation,"reflex-element"].join(" ").trim(),t=Z_({},this.props.style,{flexGrow:this.props.flex,flexShrink:1,flexBasis:"0%"});return Vr.createElement("div",Ye({},BR(this.props),{ref:this.props.innerRef,className:e,style:t}),this.props.propagateDimensions?Vr.createElement(ime,this.props):this.renderChildren())}}rc(bP,"propTypes",{propagateDimensions:ts.bool,resizeHeight:ts.bool,resizeWidth:ts.bool,className:ts.string,size:ts.number});rc(bP,"defaultProps",{propagateDimensionsRate:100,propagateDimensions:!1,resizeHeight:!0,resizeWidth:!0,direction:[1],className:""});const PC=Vr.forwardRef((n,e)=>Vr.createElement(bP,Ye({innerRef:e},n))),J9="/gpu-programming/assets/BASE_FRONT_GRILL_1-b5goAhwv.glb";var q9={exports:{}},B1={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */B1.ConcurrentRoot=1;B1.ContinuousEventPriority=4;B1.DefaultEventPriority=16;B1.DiscreteEventPriority=1;B1.IdleEventPriority=536870912;B1.LegacyRoot=0;q9.exports=B1;var Jx=q9.exports,Q9={exports:{}},B2={exports:{}},P2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b4;function sme(){return b4||(b4=1,function(n){function e(J,se){var ie=J.length;J.push(se);e:for(;0<ie;){var he=ie-1>>>1,Se=J[he];if(0<s(Se,se))J[he]=se,J[ie]=Se,ie=he;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var se=J[0],ie=J.pop();if(ie!==se){J[0]=ie;e:for(var he=0,Se=J.length,Fe=Se>>>1;he<Fe;){var ke=2*(he+1)-1,qe=J[ke],De=ke+1,rt=J[De];if(0>s(qe,ie))De<Se&&0>s(rt,qe)?(J[he]=rt,J[De]=ie,he=De):(J[he]=qe,J[ke]=ie,he=ke);else if(De<Se&&0>s(rt,ie))J[he]=rt,J[De]=ie,he=De;else break e}}return se}function s(J,se){var ie=J.sortIndex-se.sortIndex;return ie!==0?ie:J.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],_=1,y=null,b=3,E=!1,C=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(J){for(var se=t(p);se!==null;){if(se.callback===null)i(p);else if(se.startTime<=J)i(p),se.sortIndex=se.expirationTime,e(d,se);else break;se=t(p)}}function N(J){if(A=!1,P(J),!C)if(t(d)!==null)C=!0,Te(z);else{var se=t(p);se!==null&&Oe(N,se.startTime-J)}}function z(J,se){C=!1,A&&(A=!1,L(U),U=-1),E=!0;var ie=b;try{for(P(se),y=t(d);y!==null&&(!(y.expirationTime>se)||J&&!oe());){var he=y.callback;if(typeof he=="function"){y.callback=null,b=y.priorityLevel;var Se=he(y.expirationTime<=se);se=n.unstable_now(),typeof Se=="function"?y.callback=Se:y===t(d)&&i(d),P(se)}else i(d);y=t(d)}if(y!==null)var Fe=!0;else{var ke=t(p);ke!==null&&Oe(N,ke.startTime-se),Fe=!1}return Fe}finally{y=null,b=ie,E=!1}}var W=!1,H=null,U=-1,Q=5,ne=-1;function oe(){return!(n.unstable_now()-ne<Q)}function le(){if(H!==null){var J=n.unstable_now();ne=J;var se=!0;try{se=H(!0,J)}finally{se?ge():(W=!1,H=null)}}else W=!1}var ge;if(typeof O=="function")ge=function(){O(le)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,pe=ce.port2;ce.port1.onmessage=le,ge=function(){pe.postMessage(null)}}else ge=function(){I(le,0)};function Te(J){H=J,W||(W=!0,ge())}function Oe(J,se){U=I(function(){J(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){C||E||(C=!0,Te(z))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(J){switch(b){case 1:case 2:case 3:var se=3;break;default:se=b}var ie=b;b=se;try{return J()}finally{b=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,se){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ie=b;b=J;try{return se()}finally{b=ie}},n.unstable_scheduleCallback=function(J,se,ie){var he=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?he+ie:he):ie=he,J){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=ie+Se,J={id:_++,callback:se,priorityLevel:J,startTime:ie,expirationTime:Se,sortIndex:-1},ie>he?(J.sortIndex=ie,e(p,J),t(d)===null&&J===t(p)&&(A?(L(U),U=-1):A=!0,Oe(N,ie-he))):(J.sortIndex=Se,e(d,J),C||E||(C=!0,Te(z))),J},n.unstable_shouldYield=oe,n.unstable_wrapCallback=function(J){var se=b;return function(){var ie=b;b=se;try{return J.apply(this,arguments)}finally{b=ie}}}}(P2)),P2}var T4;function ome(){return T4||(T4=1,B2.exports=sme()),B2.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ame=function(e){var t={},i=me,s=ome(),o=Object.assign;function l(h){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+h,$=1;$<arguments.length;$++)g+="&args[]="+encodeURIComponent(arguments[$]);return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d=Symbol.for("react.element"),p=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),N=Symbol.for("react.offscreen"),z=Symbol.iterator;function W(h){return h===null||typeof h!="object"?null:(h=z&&h[z]||h["@@iterator"],typeof h=="function"?h:null)}function H(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case _:return"Fragment";case p:return"Portal";case b:return"Profiler";case y:return"StrictMode";case I:return"Suspense";case L:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case C:return(h.displayName||"Context")+".Consumer";case E:return(h._context.displayName||"Context")+".Provider";case A:var g=h.render;return h=h.displayName,h||(h=g.displayName||g.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case O:return g=h.displayName||null,g!==null?g:H(h.type)||"Memo";case P:g=h._payload,h=h._init;try{return H(h(g))}catch{}}return null}function U(h){var g=h.type;switch(h.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=g.render,h=h.displayName||h.name||"",g.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(g);case 8:return g===y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function Q(h){var g=h,$=h;if(h.alternate)for(;g.return;)g=g.return;else{h=g;do g=h,g.flags&4098&&($=g.return),h=g.return;while(h)}return g.tag===3?$:null}function ne(h){if(Q(h)!==h)throw Error(l(188))}function oe(h){var g=h.alternate;if(!g){if(g=Q(h),g===null)throw Error(l(188));return g!==h?null:h}for(var $=h,M=g;;){var B=$.return;if(B===null)break;var V=B.alternate;if(V===null){if(M=B.return,M!==null){$=M;continue}break}if(B.child===V.child){for(V=B.child;V;){if(V===$)return ne(B),h;if(V===M)return ne(B),g;V=V.sibling}throw Error(l(188))}if($.return!==M.return)$=B,M=V;else{for(var ue=!1,Me=B.child;Me;){if(Me===$){ue=!0,$=B,M=V;break}if(Me===M){ue=!0,M=B,$=V;break}Me=Me.sibling}if(!ue){for(Me=V.child;Me;){if(Me===$){ue=!0,$=V,M=B;break}if(Me===M){ue=!0,M=V,$=B;break}Me=Me.sibling}if(!ue)throw Error(l(189))}}if($.alternate!==M)throw Error(l(190))}if($.tag!==3)throw Error(l(188));return $.stateNode.current===$?h:g}function le(h){return h=oe(h),h!==null?ge(h):null}function ge(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var g=ge(h);if(g!==null)return g;h=h.sibling}return null}function ce(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var g=ce(h);if(g!==null)return g}h=h.sibling}return null}var pe=Array.isArray,Te=e.getPublicInstance,Oe=e.getRootHostContext,J=e.getChildHostContext,se=e.prepareForCommit,ie=e.resetAfterCommit,he=e.createInstance,Se=e.appendInitialChild,Fe=e.finalizeInitialChildren,ke=e.prepareUpdate,qe=e.shouldSetTextContent,De=e.createTextInstance,rt=e.scheduleTimeout,tt=e.cancelTimeout,ft=e.noTimeout,ct=e.isPrimaryRenderer,Pe=e.supportsMutation,Ce=e.supportsPersistence,je=e.supportsHydration,it=e.getInstanceFromNode,ot=e.preparePortalMount,vt=e.getCurrentEventPriority,It=e.detachDeletedInstance,yt=e.supportsMicrotasks,kt=e.scheduleMicrotask,$t=e.supportsTestSelectors,mt=e.findFiberRoot,xe=e.getBoundingRect,re=e.getTextContent,Be=e.isHiddenSubtree,dt=e.matchAccessibilityRole,bt=e.setFocusIfFocusable,Mt=e.setupIntersectionObserver,pt=e.appendChild,Ke=e.appendChildToContainer,Ie=e.commitTextUpdate,q=e.commitMount,ee=e.commitUpdate,de=e.insertBefore,Ae=e.insertInContainerBefore,Je=e.removeChild,jt=e.removeChildFromContainer,ze=e.resetTextContent,Yt=e.hideInstance,_t=e.hideTextInstance,Kt=e.unhideInstance,Xt=e.unhideTextInstance,Dn=e.clearContainer,ii=e.cloneInstance,Lr=e.createContainerChildSet,Si=e.appendChildToContainerChildSet,Er=e.finalizeContainerChildren,ir=e.replaceContainerChildren,te=e.cloneHiddenInstance,be=e.cloneHiddenTextInstance,He=e.canHydrateInstance,at=e.canHydrateTextInstance,Ft=e.canHydrateSuspenseInstance,rn=e.isSuspenseInstancePending,Rn=e.isSuspenseInstanceFallback,Le=e.registerSuspenseInstanceRetry,gt=e.getNextHydratableSibling,Ct=e.getFirstHydratableChild,Tt=e.getFirstHydratableChildWithinContainer,zt=e.getFirstHydratableChildWithinSuspenseInstance,On=e.hydrateInstance,tr=e.hydrateTextInstance,yr=e.hydrateSuspenseInstance,Rr=e.getNextHydratableInstanceAfterSuspenseInstance,Li=e.commitHydratedContainer,Dr=e.commitHydratedSuspenseInstance,jr=e.clearSuspenseBoundary,bs=e.clearSuspenseBoundaryFromContainer,Ia=e.shouldDeleteUnhydratedTailInstances,wo=e.didNotMatchHydratedContainerTextInstance,jl=e.didNotMatchHydratedTextInstance,Zt;function Cr(h){if(Zt===void 0)try{throw Error()}catch($){var g=$.stack.trim().match(/\n( *(at )?)/);Zt=g&&g[1]||""}return`
`+Zt+h}var qa=!1;function Ra(h,g){if(!h||qa)return"";qa=!0;var $=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(Et){var M=Et}Reflect.construct(h,[],g)}else{try{g.call()}catch(Et){M=Et}h.call(g.prototype)}else{try{throw Error()}catch(Et){M=Et}h()}}catch(Et){if(Et&&M&&typeof Et.stack=="string"){for(var B=Et.stack.split(`
`),V=M.stack.split(`
`),ue=B.length-1,Me=V.length-1;1<=ue&&0<=Me&&B[ue]!==V[Me];)Me--;for(;1<=ue&&0<=Me;ue--,Me--)if(B[ue]!==V[Me]){if(ue!==1||Me!==1)do if(ue--,Me--,0>Me||B[ue]!==V[Me]){var Qe=`
`+B[ue].replace(" at new "," at ");return h.displayName&&Qe.includes("<anonymous>")&&(Qe=Qe.replace("<anonymous>",h.displayName)),Qe}while(1<=ue&&0<=Me);break}}}finally{qa=!1,Error.prepareStackTrace=$}return(h=h?h.displayName||h.name:"")?Cr(h):""}var Ns=Object.prototype.hasOwnProperty,Bs=[],Di=-1;function Ar(h){return{current:h}}function $n(h){0>Di||(h.current=Bs[Di],Bs[Di]=null,Di--)}function $r(h,g){Di++,Bs[Di]=h.current,h.current=g}var zr={},mr=Ar(zr),Ni=Ar(!1),Ts=zr;function ci(h,g){var $=h.type.contextTypes;if(!$)return zr;var M=h.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===g)return M.__reactInternalMemoizedMaskedChildContext;var B={},V;for(V in $)B[V]=g[V];return M&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=g,h.__reactInternalMemoizedMaskedChildContext=B),B}function fs(h){return h=h.childContextTypes,h!=null}function Qa(){$n(Ni),$n(mr)}function ka(h,g,$){if(mr.current!==zr)throw Error(l(168));$r(mr,g),$r(Ni,$)}function uc(h,g,$){var M=h.stateNode;if(g=g.childContextTypes,typeof M.getChildContext!="function")return $;M=M.getChildContext();for(var B in M)if(!(B in g))throw Error(l(108,U(h)||"Unknown",B));return o({},$,M)}function cc(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||zr,Ts=mr.current,$r(mr,h),$r(Ni,Ni.current),!0}function Vs(h,g,$){var M=h.stateNode;if(!M)throw Error(l(169));$?(h=uc(h,g,Ts),M.__reactInternalMemoizedMergedChildContext=h,$n(Ni),$n(mr),$r(mr,h)):$n(Ni),$r(Ni,$)}var Yo=Math.clz32?Math.clz32:hh,Xl=Math.log,mu=Math.LN2;function hh(h){return h>>>=0,h===0?32:31-(Xl(h)/mu|0)|0}var Ko=64,pr=4194304;function Ei(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function kc(h,g){var $=h.pendingLanes;if($===0)return 0;var M=0,B=h.suspendedLanes,V=h.pingedLanes,ue=$&268435455;if(ue!==0){var Me=ue&~B;Me!==0?M=Ei(Me):(V&=ue,V!==0&&(M=Ei(V)))}else ue=$&~B,ue!==0?M=Ei(ue):V!==0&&(M=Ei(V));if(M===0)return 0;if(g!==0&&g!==M&&!(g&B)&&(B=M&-M,V=g&-g,B>=V||B===16&&(V&4194240)!==0))return g;if(M&4&&(M|=$&16),g=h.entangledLanes,g!==0)for(h=h.entanglements,g&=M;0<g;)$=31-Yo(g),B=1<<$,M|=h[$],g&=~B;return M}function dh(h,g){switch(h){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oc(h,g){for(var $=h.suspendedLanes,M=h.pingedLanes,B=h.expirationTimes,V=h.pendingLanes;0<V;){var ue=31-Yo(V),Me=1<<ue,Qe=B[ue];Qe===-1?(!(Me&$)||Me&M)&&(B[ue]=dh(Me,g)):Qe<=g&&(h.expiredLanes|=Me),V&=~Me}}function Sl(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function gu(h){for(var g=[],$=0;31>$;$++)g.push(h);return g}function El(h,g,$){h.pendingLanes|=g,g!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,g=31-Yo(g),h[g]=$}function xl(h,g){var $=h.pendingLanes&~g;h.pendingLanes=g,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=g,h.mutableReadLanes&=g,h.entangledLanes&=g,g=h.entanglements;var M=h.eventTimes;for(h=h.expirationTimes;0<$;){var B=31-Yo($),V=1<<B;g[B]=0,M[B]=-1,h[B]=-1,$&=~V}}function gr(h,g){var $=h.entangledLanes|=g;for(h=h.entanglements;$;){var M=31-Yo($),B=1<<M;B&g|h[M]&g&&(h[M]|=g),$&=~B}}var _r=0;function Yl(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var Za=s.unstable_scheduleCallback,el=s.unstable_cancelCallback,_u=s.unstable_shouldYield,Ki=s.unstable_requestPaint,ms=s.unstable_now,tl=s.unstable_ImmediatePriority,Td=s.unstable_UserBlockingPriority,ro=s.unstable_NormalPriority,Pu=s.unstable_IdlePriority,aa=null,vu=null;function nr(h){if(vu&&typeof vu.onCommitFiberRoot=="function")try{vu.onCommitFiberRoot(aa,h,void 0,(h.current.flags&128)===128)}catch{}}function Un(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var Ss=typeof Object.is=="function"?Object.is:Un,io=null,Fu=!1,yu=!1;function ph(h){io===null?io=[h]:io.push(h)}function Oa(h){Fu=!0,ph(h)}function la(){if(!yu&&io!==null){yu=!0;var h=0,g=_r;try{var $=io;for(_r=1;h<$.length;h++){var M=$[h];do M=M(!0);while(M!==null)}io=null,Fu=!1}catch(B){throw io!==null&&(io=io.slice(h+1)),Za(tl,la),B}finally{_r=g,yu=!1}}return null}var Uu=u.ReactCurrentBatchConfig;function br(h,g){if(Ss(h,g))return!0;if(typeof h!="object"||h===null||typeof g!="object"||g===null)return!1;var $=Object.keys(h),M=Object.keys(g);if($.length!==M.length)return!1;for(M=0;M<$.length;M++){var B=$[M];if(!Ns.call(g,B)||!Ss(h[B],g[B]))return!1}return!0}function Ms(h){switch(h.tag){case 5:return Cr(h.type);case 16:return Cr("Lazy");case 13:return Cr("Suspense");case 19:return Cr("SuspenseList");case 0:case 2:case 15:return h=Ra(h.type,!1),h;case 11:return h=Ra(h.type.render,!1),h;case 1:return h=Ra(h.type,!0),h;default:return""}}function vi(h,g){if(h&&h.defaultProps){g=o({},g),h=h.defaultProps;for(var $ in h)g[$]===void 0&&(g[$]=h[$]);return g}return g}var xi=Ar(null),ua=null,Zr=null,bu=null;function $o(){bu=Zr=ua=null}function Tu(h,g,$){ct?($r(xi,g._currentValue),g._currentValue=$):($r(xi,g._currentValue2),g._currentValue2=$)}function nl(h){var g=xi.current;$n(xi),ct?h._currentValue=g:h._currentValue2=g}function Bi(h,g,$){for(;h!==null;){var M=h.alternate;if((h.childLanes&g)!==g?(h.childLanes|=g,M!==null&&(M.childLanes|=g)):M!==null&&(M.childLanes&g)!==g&&(M.childLanes|=g),h===$)break;h=h.return}}function wi(h,g){ua=h,bu=Zr=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&g&&(Mi=!0),h.firstContext=null)}function zn(h){var g=ct?h._currentValue:h._currentValue2;if(bu!==h)if(h={context:h,memoizedValue:g,next:null},Zr===null){if(ua===null)throw Error(l(308));Zr=h,ua.dependencies={lanes:0,firstContext:h}}else Zr=Zr.next=h;return g}var $i=null,Xr=!1;function od(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Su(h,g){h=h.updateQueue,g.updateQueue===h&&(g.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Gi(h,g){return{eventTime:h,lane:g,tag:0,payload:null,callback:null,next:null}}function La(h,g){var $=h.updateQueue;$!==null&&($=$.shared,kr!==null&&h.mode&1&&!(qn&2)?(h=$.interleaved,h===null?(g.next=g,$i===null?$i=[$]:$i.push($)):(g.next=h.next,h.next=g),$.interleaved=g):(h=$.pending,h===null?g.next=g:(g.next=h.next,h.next=g),$.pending=g))}function fh(h,g,$){if(g=g.updateQueue,g!==null&&(g=g.shared,($&4194240)!==0)){var M=g.lanes;M&=h.pendingLanes,$|=M,g.lanes=$,gr(h,$)}}function cr(h,g){var $=h.updateQueue,M=h.alternate;if(M!==null&&(M=M.updateQueue,$===M)){var B=null,V=null;if($=$.firstBaseUpdate,$!==null){do{var ue={eventTime:$.eventTime,lane:$.lane,tag:$.tag,payload:$.payload,callback:$.callback,next:null};V===null?B=V=ue:V=V.next=ue,$=$.next}while($!==null);V===null?B=V=g:V=V.next=g}else B=V=g;$={baseState:M.baseState,firstBaseUpdate:B,lastBaseUpdate:V,shared:M.shared,effects:M.effects},h.updateQueue=$;return}h=$.lastBaseUpdate,h===null?$.firstBaseUpdate=g:h.next=g,$.lastBaseUpdate=g}function Jo(h,g,$,M){var B=h.updateQueue;Xr=!1;var V=B.firstBaseUpdate,ue=B.lastBaseUpdate,Me=B.shared.pending;if(Me!==null){B.shared.pending=null;var Qe=Me,Et=Qe.next;Qe.next=null,ue===null?V=Et:ue.next=Et,ue=Qe;var Jt=h.alternate;Jt!==null&&(Jt=Jt.updateQueue,Me=Jt.lastBaseUpdate,Me!==ue&&(Me===null?Jt.firstBaseUpdate=Et:Me.next=Et,Jt.lastBaseUpdate=Qe))}if(V!==null){var an=B.baseState;ue=0,Jt=Et=Qe=null,Me=V;do{var _n=Me.lane,vn=Me.eventTime;if((M&_n)===_n){Jt!==null&&(Jt=Jt.next={eventTime:vn,lane:0,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null});e:{var pn=h,Or=Me;switch(_n=g,vn=$,Or.tag){case 1:if(pn=Or.payload,typeof pn=="function"){an=pn.call(vn,an,_n);break e}an=pn;break e;case 3:pn.flags=pn.flags&-65537|128;case 0:if(pn=Or.payload,_n=typeof pn=="function"?pn.call(vn,an,_n):pn,_n==null)break e;an=o({},an,_n);break e;case 2:Xr=!0}}Me.callback!==null&&Me.lane!==0&&(h.flags|=64,_n=B.effects,_n===null?B.effects=[Me]:_n.push(Me))}else vn={eventTime:vn,lane:_n,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null},Jt===null?(Et=Jt=vn,Qe=an):Jt=Jt.next=vn,ue|=_n;if(Me=Me.next,Me===null){if(Me=B.shared.pending,Me===null)break;_n=Me,Me=_n.next,_n.next=null,B.lastBaseUpdate=_n,B.shared.pending=null}}while(!0);if(Jt===null&&(Qe=an),B.baseState=Qe,B.firstBaseUpdate=Et,B.lastBaseUpdate=Jt,g=B.shared.interleaved,g!==null){B=g;do ue|=B.lane,B=B.next;while(B!==g)}else V===null&&(B.shared.lanes=0);Ku|=ue,h.lanes=ue,h.memoizedState=an}}function ad(h,g,$){if(h=g.effects,g.effects=null,h!==null)for(g=0;g<h.length;g++){var M=h[g],B=M.callback;if(B!==null){if(M.callback=null,M=$,typeof B!="function")throw Error(l(191,B));B.call(M)}}}var tp=new i.Component().refs;function Lc(h,g,$,M){g=h.memoizedState,$=$(M,g),$=$==null?g:o({},g,$),h.memoizedState=$,h.lanes===0&&(h.updateQueue.baseState=$)}var np={isMounted:function(h){return(h=h._reactInternals)?Q(h)===h:!1},enqueueSetState:function(h,g,$){h=h._reactInternals;var M=vs(),B=Rs(h),V=Gi(M,B);V.payload=g,$!=null&&(V.callback=$),La(h,V),g=Wa(h,B,M),g!==null&&fh(g,h,B)},enqueueReplaceState:function(h,g,$){h=h._reactInternals;var M=vs(),B=Rs(h),V=Gi(M,B);V.tag=1,V.payload=g,$!=null&&(V.callback=$),La(h,V),g=Wa(h,B,M),g!==null&&fh(g,h,B)},enqueueForceUpdate:function(h,g){h=h._reactInternals;var $=vs(),M=Rs(h),B=Gi($,M);B.tag=2,g!=null&&(B.callback=g),La(h,B),g=Wa(h,M,$),g!==null&&fh(g,h,M)}};function Ip(h,g,$,M,B,V,ue){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(M,V,ue):g.prototype&&g.prototype.isPureReactComponent?!br($,M)||!br(B,V):!0}function ff(h,g,$){var M=!1,B=zr,V=g.contextType;return typeof V=="object"&&V!==null?V=zn(V):(B=fs(g)?Ts:mr.current,M=g.contextTypes,V=(M=M!=null)?ci(h,B):zr),g=new g($,V),h.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=np,h.stateNode=g,g._reactInternals=h,M&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=B,h.__reactInternalMemoizedMaskedChildContext=V),g}function Sd(h,g,$,M){h=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps($,M),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps($,M),g.state!==h&&np.enqueueReplaceState(g,g.state,null)}function Kl(h,g,$,M){var B=h.stateNode;B.props=$,B.state=h.memoizedState,B.refs=tp,od(h);var V=g.contextType;typeof V=="object"&&V!==null?B.context=zn(V):(V=fs(g)?Ts:mr.current,B.context=ci(h,V)),B.state=h.memoizedState,V=g.getDerivedStateFromProps,typeof V=="function"&&(Lc(h,g,V,$),B.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(g=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),g!==B.state&&np.enqueueReplaceState(B,B.state,null),Jo(h,$,B,M),B.state=h.memoizedState),typeof B.componentDidMount=="function"&&(h.flags|=4194308)}var Is=[],zu=0,mh=null,Da=0,ai=[],Sr=0,so=null,Na=1,Fo="";function Jl(h,g){Is[zu++]=Da,Is[zu++]=mh,mh=h,Da=g}function ql(h,g,$){ai[Sr++]=Na,ai[Sr++]=Fo,ai[Sr++]=so,so=h;var M=Na;h=Fo;var B=32-Yo(M)-1;M&=~(1<<B),$+=1;var V=32-Yo(g)+B;if(30<V){var ue=B-B%5;V=(M&(1<<ue)-1).toString(32),M>>=ue,B-=ue,Na=1<<32-Yo(g)+B|$<<B|M,Fo=V+h}else Na=1<<V|$<<B|M,Fo=h}function Oh(h){h.return!==null&&(Jl(h,1),ql(h,1,0))}function Hr(h){for(;h===mh;)mh=Is[--zu],Is[zu]=null,Da=Is[--zu],Is[zu]=null;for(;h===so;)so=ai[--Sr],ai[Sr]=null,Fo=ai[--Sr],ai[Sr]=null,Na=ai[--Sr],ai[Sr]=null}var Ci=null,vr=null,Wi=!1,ca=!1,Eu=null;function rp(h,g){var $=go(5,null,null,0);$.elementType="DELETED",$.stateNode=g,$.return=h,g=h.deletions,g===null?(h.deletions=[$],h.flags|=16):g.push($)}function ip(h,g){switch(h.tag){case 5:return g=He(g,h.type,h.pendingProps),g!==null?(h.stateNode=g,Ci=h,vr=Ct(g),!0):!1;case 6:return g=at(g,h.pendingProps),g!==null?(h.stateNode=g,Ci=h,vr=null,!0):!1;case 13:if(g=Ft(g),g!==null){var $=so!==null?{id:Na,overflow:Fo}:null;return h.memoizedState={dehydrated:g,treeContext:$,retryLane:1073741824},$=go(18,null,null,0),$.stateNode=g,$.return=h,h.child=$,Ci=h,vr=null,!0}return!1;default:return!1}}function ld(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Hu(h){if(Wi){var g=vr;if(g){var $=g;if(!ip(h,g)){if(ld(h))throw Error(l(418));g=gt($);var M=Ci;g&&ip(h,g)?rp(M,$):(h.flags=h.flags&-4097|2,Wi=!1,Ci=h)}}else{if(ld(h))throw Error(l(418));h.flags=h.flags&-4097|2,Wi=!1,Ci=h}}}function rl(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Ci=h}function Dc(h){if(!je||h!==Ci)return!1;if(!Wi)return rl(h),Wi=!0,!1;if(h.tag!==3&&(h.tag!==5||Ia(h.type)&&!qe(h.type,h.memoizedProps))){var g=vr;if(g){if(ld(h)){for(h=vr;h;)h=gt(h);throw Error(l(418))}for(;g;)rp(h,g),g=gt(g)}}if(rl(h),h.tag===13){if(!je)throw Error(l(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(l(317));vr=Rr(h)}else vr=Ci?gt(h.stateNode):null;return!0}function Lh(){je&&(vr=Ci=null,ca=Wi=!1)}function Gu(h){Eu===null?Eu=[h]:Eu.push(h)}function Ql(h,g,$){if(h=$.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if($._owner){if($=$._owner,$){if($.tag!==1)throw Error(l(309));var M=$.stateNode}if(!M)throw Error(l(147,h));var B=M,V=""+h;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===V?g.ref:(g=function(ue){var Me=B.refs;Me===tp&&(Me=B.refs={}),ue===null?delete Me[V]:Me[V]=ue},g._stringRef=V,g)}if(typeof h!="string")throw Error(l(284));if(!$._owner)throw Error(l(290,h))}return h}function Ps(h,g){throw h=Object.prototype.toString.call(g),Error(l(31,h==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":h))}function Zl(h){var g=h._init;return g(h._payload)}function Dh(h){function g(we,Re){if(h){var nt=we.deletions;nt===null?(we.deletions=[Re],we.flags|=16):nt.push(Re)}}function $(we,Re){if(!h)return null;for(;Re!==null;)g(we,Re),Re=Re.sibling;return null}function M(we,Re){for(we=new Map;Re!==null;)Re.key!==null?we.set(Re.key,Re):we.set(Re.index,Re),Re=Re.sibling;return we}function B(we,Re){return we=_o(we,Re),we.index=0,we.sibling=null,we}function V(we,Re,nt){return we.index=nt,h?(nt=we.alternate,nt!==null?(nt=nt.index,nt<Re?(we.flags|=2,Re):nt):(we.flags|=2,Re)):(we.flags|=1048576,Re)}function ue(we){return h&&we.alternate===null&&(we.flags|=2),we}function Me(we,Re,nt,Ut){return Re===null||Re.tag!==6?(Re=ni(nt,we.mode,Ut),Re.return=we,Re):(Re=B(Re,nt),Re.return=we,Re)}function Qe(we,Re,nt,Ut){var tn=nt.type;return tn===_?Jt(we,Re,nt.props.children,Ut,nt.key):Re!==null&&(Re.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===P&&Zl(tn)===Re.type)?(Ut=B(Re,nt.props),Ut.ref=Ql(we,Re,nt),Ut.return=we,Ut):(Ut=Dl(nt.type,nt.key,nt.props,null,we.mode,Ut),Ut.ref=Ql(we,Re,nt),Ut.return=we,Ut)}function Et(we,Re,nt,Ut){return Re===null||Re.tag!==4||Re.stateNode.containerInfo!==nt.containerInfo||Re.stateNode.implementation!==nt.implementation?(Re=ls(nt,we.mode,Ut),Re.return=we,Re):(Re=B(Re,nt.children||[]),Re.return=we,Re)}function Jt(we,Re,nt,Ut,tn){return Re===null||Re.tag!==7?(Re=Va(nt,we.mode,Ut,tn),Re.return=we,Re):(Re=B(Re,nt),Re.return=we,Re)}function an(we,Re,nt){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return Re=ni(""+Re,we.mode,nt),Re.return=we,Re;if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case d:return nt=Dl(Re.type,Re.key,Re.props,null,we.mode,nt),nt.ref=Ql(we,null,Re),nt.return=we,nt;case p:return Re=ls(Re,we.mode,nt),Re.return=we,Re;case P:var Ut=Re._init;return an(we,Ut(Re._payload),nt)}if(pe(Re)||W(Re))return Re=Va(Re,we.mode,nt,null),Re.return=we,Re;Ps(we,Re)}return null}function _n(we,Re,nt,Ut){var tn=Re!==null?Re.key:null;if(typeof nt=="string"&&nt!==""||typeof nt=="number")return tn!==null?null:Me(we,Re,""+nt,Ut);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case d:return nt.key===tn?Qe(we,Re,nt,Ut):null;case p:return nt.key===tn?Et(we,Re,nt,Ut):null;case P:return tn=nt._init,_n(we,Re,tn(nt._payload),Ut)}if(pe(nt)||W(nt))return tn!==null?null:Jt(we,Re,nt,Ut,null);Ps(we,nt)}return null}function vn(we,Re,nt,Ut,tn){if(typeof Ut=="string"&&Ut!==""||typeof Ut=="number")return we=we.get(nt)||null,Me(Re,we,""+Ut,tn);if(typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case d:return we=we.get(Ut.key===null?nt:Ut.key)||null,Qe(Re,we,Ut,tn);case p:return we=we.get(Ut.key===null?nt:Ut.key)||null,Et(Re,we,Ut,tn);case P:var Tn=Ut._init;return vn(we,Re,nt,Tn(Ut._payload),tn)}if(pe(Ut)||W(Ut))return we=we.get(nt)||null,Jt(Re,we,Ut,tn,null);Ps(Re,Ut)}return null}function pn(we,Re,nt,Ut){for(var tn=null,Tn=null,An=Re,Bn=Re=0,ur=null;An!==null&&Bn<nt.length;Bn++){An.index>Bn?(ur=An,An=null):ur=An.sibling;var wr=_n(we,An,nt[Bn],Ut);if(wr===null){An===null&&(An=ur);break}h&&An&&wr.alternate===null&&g(we,An),Re=V(wr,Re,Bn),Tn===null?tn=wr:Tn.sibling=wr,Tn=wr,An=ur}if(Bn===nt.length)return $(we,An),Wi&&Jl(we,Bn),tn;if(An===null){for(;Bn<nt.length;Bn++)An=an(we,nt[Bn],Ut),An!==null&&(Re=V(An,Re,Bn),Tn===null?tn=An:Tn.sibling=An,Tn=An);return Wi&&Jl(we,Bn),tn}for(An=M(we,An);Bn<nt.length;Bn++)ur=vn(An,we,Bn,nt[Bn],Ut),ur!==null&&(h&&ur.alternate!==null&&An.delete(ur.key===null?Bn:ur.key),Re=V(ur,Re,Bn),Tn===null?tn=ur:Tn.sibling=ur,Tn=ur);return h&&An.forEach(function(Nl){return g(we,Nl)}),Wi&&Jl(we,Bn),tn}function Or(we,Re,nt,Ut){var tn=W(nt);if(typeof tn!="function")throw Error(l(150));if(nt=tn.call(nt),nt==null)throw Error(l(151));for(var Tn=tn=null,An=Re,Bn=Re=0,ur=null,wr=nt.next();An!==null&&!wr.done;Bn++,wr=nt.next()){An.index>Bn?(ur=An,An=null):ur=An.sibling;var Nl=_n(we,An,wr.value,Ut);if(Nl===null){An===null&&(An=ur);break}h&&An&&Nl.alternate===null&&g(we,An),Re=V(Nl,Re,Bn),Tn===null?tn=Nl:Tn.sibling=Nl,Tn=Nl,An=ur}if(wr.done)return $(we,An),Wi&&Jl(we,Bn),tn;if(An===null){for(;!wr.done;Bn++,wr=nt.next())wr=an(we,wr.value,Ut),wr!==null&&(Re=V(wr,Re,Bn),Tn===null?tn=wr:Tn.sibling=wr,Tn=wr);return Wi&&Jl(we,Bn),tn}for(An=M(we,An);!wr.done;Bn++,wr=nt.next())wr=vn(An,we,Bn,wr.value,Ut),wr!==null&&(h&&wr.alternate!==null&&An.delete(wr.key===null?Bn:wr.key),Re=V(wr,Re,Bn),Tn===null?tn=wr:Tn.sibling=wr,Tn=wr);return h&&An.forEach(function(ap){return g(we,ap)}),Wi&&Jl(we,Bn),tn}function St(we,Re,nt,Ut){if(typeof nt=="object"&&nt!==null&&nt.type===_&&nt.key===null&&(nt=nt.props.children),typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case d:e:{for(var tn=nt.key,Tn=Re;Tn!==null;){if(Tn.key===tn){if(tn=nt.type,tn===_){if(Tn.tag===7){$(we,Tn.sibling),Re=B(Tn,nt.props.children),Re.return=we,we=Re;break e}}else if(Tn.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===P&&Zl(tn)===Tn.type){$(we,Tn.sibling),Re=B(Tn,nt.props),Re.ref=Ql(we,Tn,nt),Re.return=we,we=Re;break e}$(we,Tn);break}else g(we,Tn);Tn=Tn.sibling}nt.type===_?(Re=Va(nt.props.children,we.mode,Ut,nt.key),Re.return=we,we=Re):(Ut=Dl(nt.type,nt.key,nt.props,null,we.mode,Ut),Ut.ref=Ql(we,Re,nt),Ut.return=we,we=Ut)}return ue(we);case p:e:{for(Tn=nt.key;Re!==null;){if(Re.key===Tn)if(Re.tag===4&&Re.stateNode.containerInfo===nt.containerInfo&&Re.stateNode.implementation===nt.implementation){$(we,Re.sibling),Re=B(Re,nt.children||[]),Re.return=we,we=Re;break e}else{$(we,Re);break}else g(we,Re);Re=Re.sibling}Re=ls(nt,we.mode,Ut),Re.return=we,we=Re}return ue(we);case P:return Tn=nt._init,St(we,Re,Tn(nt._payload),Ut)}if(pe(nt))return pn(we,Re,nt,Ut);if(W(nt))return Or(we,Re,nt,Ut);Ps(we,nt)}return typeof nt=="string"&&nt!==""||typeof nt=="number"?(nt=""+nt,Re!==null&&Re.tag===6?($(we,Re.sibling),Re=B(Re,nt),Re.return=we,we=Re):($(we,Re),Re=ni(nt,we.mode,Ut),Re.return=we,we=Re),ue(we)):$(we,Re)}return St}var Nc=Dh(!0),Bc=Dh(!1),ns={},Nr=Ar(ns),wl=Ar(ns),Ba=Ar(ns);function eu(h){if(h===ns)throw Error(l(174));return h}function xu(h,g){$r(Ba,g),$r(wl,h),$r(Nr,ns),h=Oe(g),$n(Nr),$r(Nr,h)}function gh(){$n(Nr),$n(wl),$n(Ba)}function Ed(h){var g=eu(Ba.current),$=eu(Nr.current);g=J($,h.type,g),$!==g&&($r(wl,h),$r(Nr,g))}function hi(h){wl.current===h&&($n(Nr),$n(wl))}var ve=Ar(0);function We(h){for(var g=h;g!==null;){if(g.tag===13){var $=g.memoizedState;if($!==null&&($=$.dehydrated,$===null||rn($)||Rn($)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Ne=[];function Ot(){for(var h=0;h<Ne.length;h++){var g=Ne[h];ct?g._workInProgressVersionPrimary=null:g._workInProgressVersionSecondary=null}Ne.length=0}var en=u.ReactCurrentDispatcher,Cn=u.ReactCurrentBatchConfig,jn=0,mn=null,Br=null,oo=null,yi=!1,ao=!1,il=0,Pi=0;function gs(){throw Error(l(321))}function wu(h,g){if(g===null)return!1;for(var $=0;$<g.length&&$<h.length;$++)if(!Ss(h[$],g[$]))return!1;return!0}function Xn(h,g,$,M,B,V){if(jn=V,mn=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,en.current=h===null||h.memoizedState===null?Xu:vh,h=$(M,B),ao){V=0;do{if(ao=!1,il=0,25<=V)throw Error(l(301));V+=1,oo=Br=null,g.updateQueue=null,en.current=sl,h=$(M,B)}while(ao)}if(en.current=ju,g=Br!==null&&Br.next!==null,jn=0,oo=Br=mn=null,yi=!1,g)throw Error(l(300));return h}function ha(){var h=il!==0;return il=0,h}function js(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oo===null?mn.memoizedState=oo=h:oo=oo.next=h,oo}function Fs(){if(Br===null){var h=mn.alternate;h=h!==null?h.memoizedState:null}else h=Br.next;var g=oo===null?mn.memoizedState:oo.next;if(g!==null)oo=g,Br=h;else{if(h===null)throw Error(l(310));Br=h,h={memoizedState:Br.memoizedState,baseState:Br.baseState,baseQueue:Br.baseQueue,queue:Br.queue,next:null},oo===null?mn.memoizedState=oo=h:oo=oo.next=h}return oo}function Pa(h,g){return typeof g=="function"?g(h):g}function Nh(h){var g=Fs(),$=g.queue;if($===null)throw Error(l(311));$.lastRenderedReducer=h;var M=Br,B=M.baseQueue,V=$.pending;if(V!==null){if(B!==null){var ue=B.next;B.next=V.next,V.next=ue}M.baseQueue=B=V,$.pending=null}if(B!==null){V=B.next,M=M.baseState;var Me=ue=null,Qe=null,Et=V;do{var Jt=Et.lane;if((jn&Jt)===Jt)Qe!==null&&(Qe=Qe.next={lane:0,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null}),M=Et.hasEagerState?Et.eagerState:h(M,Et.action);else{var an={lane:Jt,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null};Qe===null?(Me=Qe=an,ue=M):Qe=Qe.next=an,mn.lanes|=Jt,Ku|=Jt}Et=Et.next}while(Et!==null&&Et!==V);Qe===null?ue=M:Qe.next=Me,Ss(M,g.memoizedState)||(Mi=!0),g.memoizedState=M,g.baseState=ue,g.baseQueue=Qe,$.lastRenderedState=M}if(h=$.interleaved,h!==null){B=h;do V=B.lane,mn.lanes|=V,Ku|=V,B=B.next;while(B!==h)}else B===null&&($.lanes=0);return[g.memoizedState,$.dispatch]}function _h(h){var g=Fs(),$=g.queue;if($===null)throw Error(l(311));$.lastRenderedReducer=h;var M=$.dispatch,B=$.pending,V=g.memoizedState;if(B!==null){$.pending=null;var ue=B=B.next;do V=h(V,ue.action),ue=ue.next;while(ue!==B);Ss(V,g.memoizedState)||(Mi=!0),g.memoizedState=V,g.baseQueue===null&&(g.baseState=V),$.lastRenderedState=V}return[V,M]}function hc(){}function qo(h,g){var $=mn,M=Fs(),B=g(),V=!Ss(M.memoizedState,B);if(V&&(M.memoizedState=B,Mi=!0),M=M.queue,Fh(Fa.bind(null,$,M,h),[h]),M.getSnapshot!==g||V||oo!==null&&oo.memoizedState.tag&1){if($.flags|=2048,Wu(9,Bh.bind(null,$,M,B,g),void 0,null),kr===null)throw Error(l(349));jn&30||Pc($,g,B)}return B}function Pc(h,g,$){h.flags|=16384,h={getSnapshot:g,value:$},g=mn.updateQueue,g===null?(g={lastEffect:null,stores:null},mn.updateQueue=g,g.stores=[h]):($=g.stores,$===null?g.stores=[h]:$.push(h))}function Bh(h,g,$,M){g.value=$,g.getSnapshot=M,Ph(g)&&Wa(h,1,-1)}function Fa(h,g,$){return $(function(){Ph(g)&&Wa(h,1,-1)})}function Ph(h){var g=h.getSnapshot;h=h.value;try{var $=g();return!Ss(h,$)}catch{return!0}}function dc(h){var g=js();return typeof h=="function"&&(h=h()),g.memoizedState=g.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:h},g.queue=h,h=h.dispatch=Ai.bind(null,mn,h),[g.memoizedState,h]}function Wu(h,g,$,M){return h={tag:h,create:g,destroy:$,deps:M,next:null},g=mn.updateQueue,g===null?(g={lastEffect:null,stores:null},mn.updateQueue=g,g.lastEffect=h.next=h):($=g.lastEffect,$===null?g.lastEffect=h.next=h:(M=$.next,$.next=h,h.next=M,g.lastEffect=h)),h}function ud(){return Fs().memoizedState}function Qo(h,g,$,M){var B=js();mn.flags|=h,B.memoizedState=Wu(1|g,$,void 0,M===void 0?null:M)}function lo(h,g,$,M){var B=Fs();M=M===void 0?null:M;var V=void 0;if(Br!==null){var ue=Br.memoizedState;if(V=ue.destroy,M!==null&&wu(M,ue.deps)){B.memoizedState=Wu(g,$,V,M);return}}mn.flags|=h,B.memoizedState=Wu(1|g,$,V,M)}function $l(h,g){return Qo(8390656,8,h,g)}function Fh(h,g){return lo(2048,8,h,g)}function Fi(h,g){return lo(4,2,h,g)}function cd(h,g){return lo(4,4,h,g)}function Vu(h,g){if(typeof g=="function")return h=h(),g(h),function(){g(null)};if(g!=null)return h=h(),g.current=h,function(){g.current=null}}function tu(h,g,$){return $=$!=null?$.concat([h]):null,lo(4,4,Vu.bind(null,g,h),$)}function Fc(){}function xd(h,g){var $=Fs();g=g===void 0?null:g;var M=$.memoizedState;return M!==null&&g!==null&&wu(g,M[1])?M[0]:($.memoizedState=[h,g],h)}function Cl(h,g){var $=Fs();g=g===void 0?null:g;var M=$.memoizedState;return M!==null&&g!==null&&wu(g,M[1])?M[0]:(h=h(),$.memoizedState=[h,g],h)}function wd(h,g){var $=_r;_r=$!==0&&4>$?$:4,h(!0);var M=Cn.transition;Cn.transition={};try{h(!1),g()}finally{_r=$,Cn.transition=M}}function Uh(){return Fs().memoizedState}function ei(h,g,$){var M=Rs(h);$={lane:M,action:$,hasEagerState:!1,eagerState:null,next:null},mf(h)?Rp(g,$):(Al(h,g,$),$=vs(),h=Wa(h,M,$),h!==null&&nu(h,g,M))}function Ai(h,g,$){var M=Rs(h),B={lane:M,action:$,hasEagerState:!1,eagerState:null,next:null};if(mf(h))Rp(g,B);else{Al(h,g,B);var V=h.alternate;if(h.lanes===0&&(V===null||V.lanes===0)&&(V=g.lastRenderedReducer,V!==null))try{var ue=g.lastRenderedState,Me=V(ue,$);if(B.hasEagerState=!0,B.eagerState=Me,Ss(Me,ue))return}catch{}finally{}$=vs(),h=Wa(h,M,$),h!==null&&nu(h,g,M)}}function mf(h){var g=h.alternate;return h===mn||g!==null&&g===mn}function Rp(h,g){ao=yi=!0;var $=h.pending;$===null?g.next=g:(g.next=$.next,$.next=g),h.pending=g}function Al(h,g,$){kr!==null&&h.mode&1&&!(qn&2)?(h=g.interleaved,h===null?($.next=$,$i===null?$i=[g]:$i.push(g)):($.next=h.next,h.next=$),g.interleaved=$):(h=g.pending,h===null?$.next=$:($.next=h.next,h.next=$),g.pending=$)}function nu(h,g,$){if($&4194240){var M=g.lanes;M&=h.pendingLanes,$|=M,g.lanes=$,gr(h,$)}}var ju={readContext:zn,useCallback:gs,useContext:gs,useEffect:gs,useImperativeHandle:gs,useInsertionEffect:gs,useLayoutEffect:gs,useMemo:gs,useReducer:gs,useRef:gs,useState:gs,useDebugValue:gs,useDeferredValue:gs,useTransition:gs,useMutableSource:gs,useSyncExternalStore:gs,useId:gs,unstable_isNewReconciler:!1},Xu={readContext:zn,useCallback:function(h,g){return js().memoizedState=[h,g===void 0?null:g],h},useContext:zn,useEffect:$l,useImperativeHandle:function(h,g,$){return $=$!=null?$.concat([h]):null,Qo(4194308,4,Vu.bind(null,g,h),$)},useLayoutEffect:function(h,g){return Qo(4194308,4,h,g)},useInsertionEffect:function(h,g){return Qo(4,2,h,g)},useMemo:function(h,g){var $=js();return g=g===void 0?null:g,h=h(),$.memoizedState=[h,g],h},useReducer:function(h,g,$){var M=js();return g=$!==void 0?$(g):g,M.memoizedState=M.baseState=g,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:g},M.queue=h,h=h.dispatch=ei.bind(null,mn,h),[M.memoizedState,h]},useRef:function(h){var g=js();return h={current:h},g.memoizedState=h},useState:dc,useDebugValue:Fc,useDeferredValue:function(h){var g=dc(h),$=g[0],M=g[1];return $l(function(){var B=Cn.transition;Cn.transition={};try{M(h)}finally{Cn.transition=B}},[h]),$},useTransition:function(){var h=dc(!1),g=h[0];return h=wd.bind(null,h[1]),js().memoizedState=h,[g,h]},useMutableSource:function(){},useSyncExternalStore:function(h,g,$){var M=mn,B=js();if(Wi){if($===void 0)throw Error(l(407));$=$()}else{if($=g(),kr===null)throw Error(l(349));jn&30||Pc(M,g,$)}B.memoizedState=$;var V={value:$,getSnapshot:g};return B.queue=V,$l(Fa.bind(null,M,V,h),[h]),M.flags|=2048,Wu(9,Bh.bind(null,M,V,$,g),void 0,null),$},useId:function(){var h=js(),g=kr.identifierPrefix;if(Wi){var $=Fo,M=Na;$=(M&~(1<<32-Yo(M)-1)).toString(32)+$,g=":"+g+"R"+$,$=il++,0<$&&(g+="H"+$.toString(32)),g+=":"}else $=Pi++,g=":"+g+"r"+$.toString(32)+":";return h.memoizedState=g},unstable_isNewReconciler:!1},vh={readContext:zn,useCallback:xd,useContext:zn,useEffect:Fh,useImperativeHandle:tu,useInsertionEffect:Fi,useLayoutEffect:cd,useMemo:Cl,useReducer:Nh,useRef:ud,useState:function(){return Nh(Pa)},useDebugValue:Fc,useDeferredValue:function(h){var g=Nh(Pa),$=g[0],M=g[1];return Fh(function(){var B=Cn.transition;Cn.transition={};try{M(h)}finally{Cn.transition=B}},[h]),$},useTransition:function(){var h=Nh(Pa)[0],g=Fs().memoizedState;return[h,g]},useMutableSource:hc,useSyncExternalStore:qo,useId:Uh,unstable_isNewReconciler:!1},sl={readContext:zn,useCallback:xd,useContext:zn,useEffect:Fh,useImperativeHandle:tu,useInsertionEffect:Fi,useLayoutEffect:cd,useMemo:Cl,useReducer:_h,useRef:ud,useState:function(){return _h(Pa)},useDebugValue:Fc,useDeferredValue:function(h){var g=_h(Pa),$=g[0],M=g[1];return Fh(function(){var B=Cn.transition;Cn.transition={};try{M(h)}finally{Cn.transition=B}},[h]),$},useTransition:function(){var h=_h(Pa)[0],g=Fs().memoizedState;return[h,g]},useMutableSource:hc,useSyncExternalStore:qo,useId:Uh,unstable_isNewReconciler:!1};function Zo(h,g){try{var $="",M=g;do $+=Ms(M),M=M.return;while(M);var B=$}catch(V){B=`
Error generating stack: `+V.message+`
`+V.stack}return{value:h,source:g,stack:B}}function Ml(h,g){try{console.error(g.value)}catch($){setTimeout(function(){throw $})}}var Uc=typeof WeakMap=="function"?WeakMap:Map;function Il(h,g,$){$=Gi(-1,$),$.tag=3,$.payload={element:null};var M=g.value;return $.callback=function(){Au||(Au=!0,ho=M),Ml(h,g)},$}function zc(h,g,$){$=Gi(-1,$),$.tag=3;var M=h.type.getDerivedStateFromError;if(typeof M=="function"){var B=g.value;$.payload=function(){return M(B)},$.callback=function(){Ml(h,g)}}var V=h.stateNode;return V!==null&&typeof V.componentDidCatch=="function"&&($.callback=function(){Ml(h,g),typeof M!="function"&&(po===null?po=new Set([this]):po.add(this));var ue=g.stack;this.componentDidCatch(g.value,{componentStack:ue!==null?ue:""})}),$}function pc(h,g,$){var M=h.pingCache;if(M===null){M=h.pingCache=new Uc;var B=new Set;M.set(g,B)}else B=M.get(g),B===void 0&&(B=new Set,M.set(g,B));B.has($)||(B.add($),h=na.bind(null,h,g,$),g.then(h,h))}function $d(h){do{var g;if((g=h.tag===13)&&(g=h.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return h;h=h.return}while(h!==null);return null}function Ua(h,g,$,M,B){return h.mode&1?(h.flags|=65536,h.lanes=B,h):(h===g?h.flags|=65536:(h.flags|=128,$.flags|=131072,$.flags&=-52805,$.tag===1&&($.alternate===null?$.tag=17:(g=Gi(-1,1),g.tag=2,La($,g))),$.lanes|=1),h)}function Gr(h){h.flags|=4}function ol(h,g){if(h!==null&&h.child===g.child)return!0;if(g.flags&16)return!1;for(h=g.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var Ji,da,Y,Es;if(Pe)Ji=function(h,g){for(var $=g.child;$!==null;){if($.tag===5||$.tag===6)Se(h,$.stateNode);else if($.tag!==4&&$.child!==null){$.child.return=$,$=$.child;continue}if($===g)break;for(;$.sibling===null;){if($.return===null||$.return===g)return;$=$.return}$.sibling.return=$.return,$=$.sibling}},da=function(){},Y=function(h,g,$,M,B){if(h=h.memoizedProps,h!==M){var V=g.stateNode,ue=eu(Nr.current);$=ke(V,$,h,M,B,ue),(g.updateQueue=$)&&Gr(g)}},Es=function(h,g,$,M){$!==M&&Gr(g)};else if(Ce){Ji=function(h,g,$,M){for(var B=g.child;B!==null;){if(B.tag===5){var V=B.stateNode;$&&M&&(V=te(V,B.type,B.memoizedProps,B)),Se(h,V)}else if(B.tag===6)V=B.stateNode,$&&M&&(V=be(V,B.memoizedProps,B)),Se(h,V);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)V=B.child,V!==null&&(V.return=B),Ji(h,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===g)break;for(;B.sibling===null;){if(B.return===null||B.return===g)return;B=B.return}B.sibling.return=B.return,B=B.sibling}};var pa=function(h,g,$,M){for(var B=g.child;B!==null;){if(B.tag===5){var V=B.stateNode;$&&M&&(V=te(V,B.type,B.memoizedProps,B)),Si(h,V)}else if(B.tag===6)V=B.stateNode,$&&M&&(V=be(V,B.memoizedProps,B)),Si(h,V);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)V=B.child,V!==null&&(V.return=B),pa(h,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===g)break;for(;B.sibling===null;){if(B.return===null||B.return===g)return;B=B.return}B.sibling.return=B.return,B=B.sibling}};da=function(h,g){var $=g.stateNode;if(!ol(h,g)){h=$.containerInfo;var M=Lr(h);pa(M,g,!1,!1),$.pendingChildren=M,Gr(g),Er(h,M)}},Y=function(h,g,$,M,B){var V=h.stateNode,ue=h.memoizedProps;if((h=ol(h,g))&&ue===M)g.stateNode=V;else{var Me=g.stateNode,Qe=eu(Nr.current),Et=null;ue!==M&&(Et=ke(Me,$,ue,M,B,Qe)),h&&Et===null?g.stateNode=V:(V=ii(V,Et,$,ue,M,g,h,Me),Fe(V,$,M,B,Qe)&&Gr(g),g.stateNode=V,h?Gr(g):Ji(V,g,!1,!1))}},Es=function(h,g,$,M){$!==M?(h=eu(Ba.current),$=eu(Nr.current),g.stateNode=De(M,h,$,g),Gr(g)):g.stateNode=h.stateNode}}else da=function(){},Y=function(){},Es=function(){};function xr(h,g){if(!Wi)switch(h.tailMode){case"hidden":g=h.tail;for(var $=null;g!==null;)g.alternate!==null&&($=g),g=g.sibling;$===null?h.tail=null:$.sibling=null;break;case"collapsed":$=h.tail;for(var M=null;$!==null;)$.alternate!==null&&(M=$),$=$.sibling;M===null?g||h.tail===null?h.tail=null:h.tail.sibling=null:M.sibling=null}}function dn(h){var g=h.alternate!==null&&h.alternate.child===h.child,$=0,M=0;if(g)for(var B=h.child;B!==null;)$|=B.lanes|B.childLanes,M|=B.subtreeFlags&14680064,M|=B.flags&14680064,B.return=h,B=B.sibling;else for(B=h.child;B!==null;)$|=B.lanes|B.childLanes,M|=B.subtreeFlags,M|=B.flags,B.return=h,B=B.sibling;return h.subtreeFlags|=M,h.childLanes=$,g}function kp(h,g,$){var M=g.pendingProps;switch(Hr(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(g),null;case 1:return fs(g.type)&&Qa(),dn(g),null;case 3:return M=g.stateNode,gh(),$n(Ni),$n(mr),Ot(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(h===null||h.child===null)&&(Dc(g)?Gr(g):h===null||h.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,Eu!==null&&(mi(Eu),Eu=null))),da(h,g),dn(g),null;case 5:hi(g),$=eu(Ba.current);var B=g.type;if(h!==null&&g.stateNode!=null)Y(h,g,B,M,$),h.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!M){if(g.stateNode===null)throw Error(l(166));return dn(g),null}if(h=eu(Nr.current),Dc(g)){if(!je)throw Error(l(175));h=On(g.stateNode,g.type,g.memoizedProps,$,h,g,!ca),g.updateQueue=h,h!==null&&Gr(g)}else{var V=he(B,M,$,h,g);Ji(V,g,!1,!1),g.stateNode=V,Fe(V,B,M,$,h)&&Gr(g)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return dn(g),null;case 6:if(h&&g.stateNode!=null)Es(h,g,h.memoizedProps,M);else{if(typeof M!="string"&&g.stateNode===null)throw Error(l(166));if(h=eu(Ba.current),$=eu(Nr.current),Dc(g)){if(!je)throw Error(l(176));if(h=g.stateNode,M=g.memoizedProps,($=tr(h,M,g,!ca))&&(B=Ci,B!==null))switch(V=(B.mode&1)!==0,B.tag){case 3:wo(B.stateNode.containerInfo,h,M,V);break;case 5:jl(B.type,B.memoizedProps,B.stateNode,h,M,V)}$&&Gr(g)}else g.stateNode=De(M,h,$,g)}return dn(g),null;case 13:if($n(ve),M=g.memoizedState,Wi&&vr!==null&&g.mode&1&&!(g.flags&128)){for(h=vr;h;)h=gt(h);return Lh(),g.flags|=98560,g}if(M!==null&&M.dehydrated!==null){if(M=Dc(g),h===null){if(!M)throw Error(l(318));if(!je)throw Error(l(344));if(h=g.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(l(317));yr(h,g)}else Lh(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;return dn(g),null}return Eu!==null&&(mi(Eu),Eu=null),g.flags&128?(g.lanes=$,g):(M=M!==null,$=!1,h===null?Dc(g):$=h.memoizedState!==null,M&&!$&&(g.child.flags|=8192,g.mode&1&&(h===null||ve.current&1?Qi===0&&(Qi=3):Xc())),g.updateQueue!==null&&(g.flags|=4),dn(g),null);case 4:return gh(),da(h,g),h===null&&ot(g.stateNode.containerInfo),dn(g),null;case 10:return nl(g.type._context),dn(g),null;case 17:return fs(g.type)&&Qa(),dn(g),null;case 19:if($n(ve),B=g.memoizedState,B===null)return dn(g),null;if(M=(g.flags&128)!==0,V=B.rendering,V===null)if(M)xr(B,!1);else{if(Qi!==0||h!==null&&h.flags&128)for(h=g.child;h!==null;){if(V=We(h),V!==null){for(g.flags|=128,xr(B,!1),h=V.updateQueue,h!==null&&(g.updateQueue=h,g.flags|=4),g.subtreeFlags=0,h=$,M=g.child;M!==null;)$=M,B=h,$.flags&=14680066,V=$.alternate,V===null?($.childLanes=0,$.lanes=B,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=V.childLanes,$.lanes=V.lanes,$.child=V.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=V.memoizedProps,$.memoizedState=V.memoizedState,$.updateQueue=V.updateQueue,$.type=V.type,B=V.dependencies,$.dependencies=B===null?null:{lanes:B.lanes,firstContext:B.firstContext}),M=M.sibling;return $r(ve,ve.current&1|2),g.child}h=h.sibling}B.tail!==null&&ms()>_a&&(g.flags|=128,M=!0,xr(B,!1),g.lanes=4194304)}else{if(!M)if(h=We(V),h!==null){if(g.flags|=128,M=!0,h=h.updateQueue,h!==null&&(g.updateQueue=h,g.flags|=4),xr(B,!0),B.tail===null&&B.tailMode==="hidden"&&!V.alternate&&!Wi)return dn(g),null}else 2*ms()-B.renderingStartTime>_a&&$!==1073741824&&(g.flags|=128,M=!0,xr(B,!1),g.lanes=4194304);B.isBackwards?(V.sibling=g.child,g.child=V):(h=B.last,h!==null?h.sibling=V:g.child=V,B.last=V)}return B.tail!==null?(g=B.tail,B.rendering=g,B.tail=g.sibling,B.renderingStartTime=ms(),g.sibling=null,h=ve.current,$r(ve,M?h&1|2:h&1),g):(dn(g),null);case 22:case 23:return hl(),M=g.memoizedState!==null,h!==null&&h.memoizedState!==null!==M&&(g.flags|=8192),M&&g.mode&1?Mo&1073741824&&(dn(g),Pe&&g.subtreeFlags&6&&(g.flags|=8192)):dn(g),null;case 24:return null;case 25:return null}throw Error(l(156,g.tag))}var al=u.ReactCurrentOwner,Mi=!1;function li(h,g,$,M){g.child=h===null?Bc(g,null,$,M):Nc(g,h.child,$,M)}function qi(h,g,$,M,B){$=$.render;var V=g.ref;return wi(g,B),M=Xn(h,g,$,M,V,B),$=ha(),h!==null&&!Mi?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~B,pi(h,g,B)):(Wi&&$&&Oh(g),g.flags|=1,li(h,g,M,B),g.child)}function rs(h,g,$,M,B){if(h===null){var V=$.type;return typeof V=="function"&&!tc(V)&&V.defaultProps===void 0&&$.compare===null&&$.defaultProps===void 0?(g.tag=15,g.type=V,Hc(h,g,V,M,B)):(h=Dl($.type,null,M,g,g.mode,B),h.ref=g.ref,h.return=g,g.child=h)}if(V=h.child,!(h.lanes&B)){var ue=V.memoizedProps;if($=$.compare,$=$!==null?$:br,$(ue,M)&&h.ref===g.ref)return pi(h,g,B)}return g.flags|=1,h=_o(V,M),h.ref=g.ref,h.return=g,g.child=h}function Hc(h,g,$,M,B){if(h!==null&&br(h.memoizedProps,M)&&h.ref===g.ref)if(Mi=!1,(h.lanes&B)!==0)h.flags&131072&&(Mi=!0);else return g.lanes=h.lanes,pi(h,g,B);return is(h,g,$,M,B)}function fa(h,g,$){var M=g.pendingProps,B=M.children,V=h!==null?h.memoizedState:null;if(M.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null},$r(as,Mo),Mo|=$;else if($&1073741824)g.memoizedState={baseLanes:0,cachePool:null},M=V!==null?V.baseLanes:$,$r(as,Mo),Mo|=M;else return h=V!==null?V.baseLanes|$:$,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:h,cachePool:null},g.updateQueue=null,$r(as,Mo),Mo|=h,null;else V!==null?(M=V.baseLanes|$,g.memoizedState=null):M=$,$r(as,Mo),Mo|=M;return li(h,g,B,$),g.child}function ma(h,g){var $=g.ref;(h===null&&$!==null||h!==null&&h.ref!==$)&&(g.flags|=512,g.flags|=2097152)}function is(h,g,$,M,B){var V=fs($)?Ts:mr.current;return V=ci(g,V),wi(g,B),$=Xn(h,g,$,M,V,B),M=ha(),h!==null&&!Mi?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~B,pi(h,g,B)):(Wi&&M&&Oh(g),g.flags|=1,li(h,g,$,B),g.child)}function Gc(h,g,$,M,B){if(fs($)){var V=!0;cc(g)}else V=!1;if(wi(g,B),g.stateNode===null)h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2),ff(g,$,M),Kl(g,$,M,B),M=!0;else if(h===null){var ue=g.stateNode,Me=g.memoizedProps;ue.props=Me;var Qe=ue.context,Et=$.contextType;typeof Et=="object"&&Et!==null?Et=zn(Et):(Et=fs($)?Ts:mr.current,Et=ci(g,Et));var Jt=$.getDerivedStateFromProps,an=typeof Jt=="function"||typeof ue.getSnapshotBeforeUpdate=="function";an||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(Me!==M||Qe!==Et)&&Sd(g,ue,M,Et),Xr=!1;var _n=g.memoizedState;ue.state=_n,Jo(g,M,ue,B),Qe=g.memoizedState,Me!==M||_n!==Qe||Ni.current||Xr?(typeof Jt=="function"&&(Lc(g,$,Jt,M),Qe=g.memoizedState),(Me=Xr||Ip(g,$,Me,M,_n,Qe,Et))?(an||typeof ue.UNSAFE_componentWillMount!="function"&&typeof ue.componentWillMount!="function"||(typeof ue.componentWillMount=="function"&&ue.componentWillMount(),typeof ue.UNSAFE_componentWillMount=="function"&&ue.UNSAFE_componentWillMount()),typeof ue.componentDidMount=="function"&&(g.flags|=4194308)):(typeof ue.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=M,g.memoizedState=Qe),ue.props=M,ue.state=Qe,ue.context=Et,M=Me):(typeof ue.componentDidMount=="function"&&(g.flags|=4194308),M=!1)}else{ue=g.stateNode,Su(h,g),Me=g.memoizedProps,Et=g.type===g.elementType?Me:vi(g.type,Me),ue.props=Et,an=g.pendingProps,_n=ue.context,Qe=$.contextType,typeof Qe=="object"&&Qe!==null?Qe=zn(Qe):(Qe=fs($)?Ts:mr.current,Qe=ci(g,Qe));var vn=$.getDerivedStateFromProps;(Jt=typeof vn=="function"||typeof ue.getSnapshotBeforeUpdate=="function")||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(Me!==an||_n!==Qe)&&Sd(g,ue,M,Qe),Xr=!1,_n=g.memoizedState,ue.state=_n,Jo(g,M,ue,B);var pn=g.memoizedState;Me!==an||_n!==pn||Ni.current||Xr?(typeof vn=="function"&&(Lc(g,$,vn,M),pn=g.memoizedState),(Et=Xr||Ip(g,$,Et,M,_n,pn,Qe)||!1)?(Jt||typeof ue.UNSAFE_componentWillUpdate!="function"&&typeof ue.componentWillUpdate!="function"||(typeof ue.componentWillUpdate=="function"&&ue.componentWillUpdate(M,pn,Qe),typeof ue.UNSAFE_componentWillUpdate=="function"&&ue.UNSAFE_componentWillUpdate(M,pn,Qe)),typeof ue.componentDidUpdate=="function"&&(g.flags|=4),typeof ue.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof ue.componentDidUpdate!="function"||Me===h.memoizedProps&&_n===h.memoizedState||(g.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||Me===h.memoizedProps&&_n===h.memoizedState||(g.flags|=1024),g.memoizedProps=M,g.memoizedState=pn),ue.props=M,ue.state=pn,ue.context=Qe,M=Et):(typeof ue.componentDidUpdate!="function"||Me===h.memoizedProps&&_n===h.memoizedState||(g.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||Me===h.memoizedProps&&_n===h.memoizedState||(g.flags|=1024),M=!1)}return ea(h,g,$,M,V,B)}function ea(h,g,$,M,B,V){ma(h,g);var ue=(g.flags&128)!==0;if(!M&&!ue)return B&&Vs(g,$,!1),pi(h,g,V);M=g.stateNode,al.current=g;var Me=ue&&typeof $.getDerivedStateFromError!="function"?null:M.render();return g.flags|=1,h!==null&&ue?(g.child=Nc(g,h.child,null,V),g.child=Nc(g,null,Me,V)):li(h,g,Me,V),g.memoizedState=M.state,B&&Vs(g,$,!0),g.child}function Cd(h){var g=h.stateNode;g.pendingContext?ka(h,g.pendingContext,g.pendingContext!==g.context):g.context&&ka(h,g.context,!1),xu(h,g.containerInfo)}function Ad(h,g,$,M,B){return Lh(),Gu(B),g.flags|=256,li(h,g,$,M),g.child}var zh={dehydrated:null,treeContext:null,retryLane:0};function Us(h){return{baseLanes:h,cachePool:null}}function Vn(h,g,$){var M=g.pendingProps,B=ve.current,V=!1,ue=(g.flags&128)!==0,Me;if((Me=ue)||(Me=h!==null&&h.memoizedState===null?!1:(B&2)!==0),Me?(V=!0,g.flags&=-129):(h===null||h.memoizedState!==null)&&(B|=1),$r(ve,B&1),h===null)return Hu(g),h=g.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(g.mode&1?Rn(h)?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(B=M.children,h=M.fallback,V?(M=g.mode,V=g.child,B={mode:"hidden",children:B},!(M&1)&&V!==null?(V.childLanes=0,V.pendingProps=B):V=lu(B,M,0,null),h=Va(h,M,$,null),V.return=g,h.return=g,V.sibling=h,g.child=V,g.child.memoizedState=Us($),g.memoizedState=zh,h):zs(g,B));if(B=h.memoizedState,B!==null){if(Me=B.dehydrated,Me!==null){if(ue)return g.flags&256?(g.flags&=-257,ru(h,g,$,Error(l(422)))):g.memoizedState!==null?(g.child=h.child,g.flags|=128,null):(V=M.fallback,B=g.mode,M=lu({mode:"visible",children:M.children},B,0,null),V=Va(V,B,$,null),V.flags|=2,M.return=g,V.return=g,M.sibling=V,g.child=M,g.mode&1&&Nc(g,h.child,null,$),g.child.memoizedState=Us($),g.memoizedState=zh,V);if(!(g.mode&1))g=ru(h,g,$,null);else if(Rn(Me))g=ru(h,g,$,Error(l(419)));else if(M=($&h.childLanes)!==0,Mi||M){if(M=kr,M!==null){switch($&-$){case 4:V=2;break;case 16:V=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:V=32;break;case 536870912:V=268435456;break;default:V=0}M=V&(M.suspendedLanes|$)?0:V,M!==0&&M!==B.retryLane&&(B.retryLane=M,Wa(h,M,-1))}Xc(),g=ru(h,g,$,Error(l(421)))}else rn(Me)?(g.flags|=128,g.child=h.child,g=mo.bind(null,h),Le(Me,g),g=null):($=B.treeContext,je&&(vr=zt(Me),Ci=g,Wi=!0,Eu=null,ca=!1,$!==null&&(ai[Sr++]=Na,ai[Sr++]=Fo,ai[Sr++]=so,Na=$.id,Fo=$.overflow,so=g)),g=zs(g,g.pendingProps.children),g.flags|=4096);return g}return V?(M=Ui(h,g,M.children,M.fallback,$),V=g.child,B=h.child.memoizedState,V.memoizedState=B===null?Us($):{baseLanes:B.baseLanes|$,cachePool:null},V.childLanes=h.childLanes&~$,g.memoizedState=zh,M):($=Xs(h,g,M.children,$),g.memoizedState=null,$)}return V?(M=Ui(h,g,M.children,M.fallback,$),V=g.child,B=h.child.memoizedState,V.memoizedState=B===null?Us($):{baseLanes:B.baseLanes|$,cachePool:null},V.childLanes=h.childLanes&~$,g.memoizedState=zh,M):($=Xs(h,g,M.children,$),g.memoizedState=null,$)}function zs(h,g){return g=lu({mode:"visible",children:g},h.mode,0,null),g.return=h,h.child=g}function Xs(h,g,$,M){var B=h.child;return h=B.sibling,$=_o(B,{mode:"visible",children:$}),!(g.mode&1)&&($.lanes=M),$.return=g,$.sibling=null,h!==null&&(M=g.deletions,M===null?(g.deletions=[h],g.flags|=16):M.push(h)),g.child=$}function Ui(h,g,$,M,B){var V=g.mode;h=h.child;var ue=h.sibling,Me={mode:"hidden",children:$};return!(V&1)&&g.child!==h?($=g.child,$.childLanes=0,$.pendingProps=Me,g.deletions=null):($=_o(h,Me),$.subtreeFlags=h.subtreeFlags&14680064),ue!==null?M=_o(ue,M):(M=Va(M,V,B,null),M.flags|=2),M.return=g,$.return=g,$.sibling=M,g.child=$,M}function ru(h,g,$,M){return M!==null&&Gu(M),Nc(g,h.child,null,$),h=zs(g,g.pendingProps.children),h.flags|=2,g.memoizedState=null,h}function Uo(h,g,$){h.lanes|=g;var M=h.alternate;M!==null&&(M.lanes|=g),Bi(h.return,g,$)}function Sn(h,g,$,M,B){var V=h.memoizedState;V===null?h.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:M,tail:$,tailMode:B}:(V.isBackwards=g,V.rendering=null,V.renderingStartTime=0,V.last=M,V.tail=$,V.tailMode=B)}function di(h,g,$){var M=g.pendingProps,B=M.revealOrder,V=M.tail;if(li(h,g,M.children,$),M=ve.current,M&2)M=M&1|2,g.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=g.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Uo(h,$,g);else if(h.tag===19)Uo(h,$,g);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===g)break e;for(;h.sibling===null;){if(h.return===null||h.return===g)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}M&=1}if($r(ve,M),!(g.mode&1))g.memoizedState=null;else switch(B){case"forwards":for($=g.child,B=null;$!==null;)h=$.alternate,h!==null&&We(h)===null&&(B=$),$=$.sibling;$=B,$===null?(B=g.child,g.child=null):(B=$.sibling,$.sibling=null),Sn(g,!1,B,$,V);break;case"backwards":for($=null,B=g.child,g.child=null;B!==null;){if(h=B.alternate,h!==null&&We(h)===null){g.child=B;break}h=B.sibling,B.sibling=$,$=B,B=h}Sn(g,!0,$,null,V);break;case"together":Sn(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function pi(h,g,$){if(h!==null&&(g.dependencies=h.dependencies),Ku|=g.lanes,!($&g.childLanes))return null;if(h!==null&&g.child!==h.child)throw Error(l(153));if(g.child!==null){for(h=g.child,$=_o(h,h.pendingProps),g.child=$,$.return=g;h.sibling!==null;)h=h.sibling,$=$.sibling=_o(h,h.pendingProps),$.return=g;$.sibling=null}return g.child}function Op(h,g,$){switch(g.tag){case 3:Cd(g),Lh();break;case 5:Ed(g);break;case 1:fs(g.type)&&cc(g);break;case 4:xu(g,g.stateNode.containerInfo);break;case 10:Tu(g,g.type._context,g.memoizedProps.value);break;case 13:var M=g.memoizedState;if(M!==null)return M.dehydrated!==null?($r(ve,ve.current&1),g.flags|=128,null):$&g.child.childLanes?Vn(h,g,$):($r(ve,ve.current&1),h=pi(h,g,$),h!==null?h.sibling:null);$r(ve,ve.current&1);break;case 19:if(M=($&g.childLanes)!==0,h.flags&128){if(M)return di(h,g,$);g.flags|=128}var B=g.memoizedState;if(B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),$r(ve,ve.current),M)break;return null;case 22:case 23:return g.lanes=0,fa(h,g,$)}return pi(h,g,$)}function yh(h,g){switch(Hr(g),g.tag){case 1:return fs(g.type)&&Qa(),h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 3:return gh(),$n(Ni),$n(mr),Ot(),h=g.flags,h&65536&&!(h&128)?(g.flags=h&-65537|128,g):null;case 5:return hi(g),null;case 13:if($n(ve),h=g.memoizedState,h!==null&&h.dehydrated!==null){if(g.alternate===null)throw Error(l(340));Lh()}return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 19:return $n(ve),null;case 4:return gh(),null;case 10:return nl(g.type._context),null;case 22:case 23:return hl(),null;case 24:return null;default:return null}}var uo=!1,ga=!1,xn=typeof WeakSet=="function"?WeakSet:Set,gn=null;function ll(h,g){var $=h.ref;if($!==null)if(typeof $=="function")try{$(null)}catch(M){Ks(h,g,M)}else $.current=null}function fc(h,g,$){try{$()}catch(M){Ks(h,g,M)}}var gf=!1;function iu(h,g){for(se(h.containerInfo),gn=g;gn!==null;)if(h=gn,g=h.child,(h.subtreeFlags&1028)!==0&&g!==null)g.return=h,gn=g;else for(;gn!==null;){h=gn;try{var $=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if($!==null){var M=$.memoizedProps,B=$.memoizedState,V=h.stateNode,ue=V.getSnapshotBeforeUpdate(h.elementType===h.type?M:vi(h.type,M),B);V.__reactInternalSnapshotBeforeUpdate=ue}break;case 3:Pe&&Dn(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(Me){Ks(h,h.return,Me)}if(g=h.sibling,g!==null){g.return=h.return,gn=g;break}gn=h.return}return $=gf,gf=!1,$}function Co(h,g,$){var M=g.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var B=M=M.next;do{if((B.tag&h)===h){var V=B.destroy;B.destroy=void 0,V!==void 0&&fc(g,$,V)}B=B.next}while(B!==M)}}function _s(h,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var $=g=g.next;do{if(($.tag&h)===h){var M=$.create;$.destroy=M()}$=$.next}while($!==g)}}function ul(h){var g=h.ref;if(g!==null){var $=h.stateNode;switch(h.tag){case 5:h=Te($);break;default:h=$}typeof g=="function"?g(h):g.current=h}}function ss(h,g,$){if(vu&&typeof vu.onCommitFiberUnmount=="function")try{vu.onCommitFiberUnmount(aa,g)}catch{}switch(g.tag){case 0:case 11:case 14:case 15:if(h=g.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var M=h=h.next;do{var B=M,V=B.destroy;B=B.tag,V!==void 0&&(B&2||B&4)&&fc(g,$,V),M=M.next}while(M!==h)}break;case 1:if(ll(g,$),h=g.stateNode,typeof h.componentWillUnmount=="function")try{h.props=g.memoizedProps,h.state=g.memoizedState,h.componentWillUnmount()}catch(ue){Ks(g,$,ue)}break;case 5:ll(g,$);break;case 4:Pe?Gh(h,g,$):Ce&&Ce&&(g=g.stateNode.containerInfo,$=Lr(g),ir(g,$))}}function cl(h,g,$){for(var M=g;;)if(ss(h,M,$),M.child===null||Pe&&M.tag===4){if(M===g)break;for(;M.sibling===null;){if(M.return===null||M.return===g)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function zo(h){var g=h.alternate;g!==null&&(h.alternate=null,zo(g)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(g=h.stateNode,g!==null&&It(g)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Hh(h){return h.tag===5||h.tag===3||h.tag===4}function za(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||Hh(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Ii(h){if(Pe){e:{for(var g=h.return;g!==null;){if(Hh(g))break e;g=g.return}throw Error(l(160))}var $=g;switch($.tag){case 5:g=$.stateNode,$.flags&32&&(ze(g),$.flags&=-33),$=za(h),Wc(h,$,g);break;case 3:case 4:g=$.stateNode.containerInfo,$=za(h),Md(h,$,g);break;default:throw Error(l(161))}}}function Md(h,g,$){var M=h.tag;if(M===5||M===6)h=h.stateNode,g?Ae($,h,g):Ke($,h);else if(M!==4&&(h=h.child,h!==null))for(Md(h,g,$),h=h.sibling;h!==null;)Md(h,g,$),h=h.sibling}function Wc(h,g,$){var M=h.tag;if(M===5||M===6)h=h.stateNode,g?de($,h,g):pt($,h);else if(M!==4&&(h=h.child,h!==null))for(Wc(h,g,$),h=h.sibling;h!==null;)Wc(h,g,$),h=h.sibling}function Gh(h,g,$){for(var M=g,B=!1,V,ue;;){if(!B){B=M.return;e:for(;;){if(B===null)throw Error(l(160));switch(V=B.stateNode,B.tag){case 5:ue=!1;break e;case 3:V=V.containerInfo,ue=!0;break e;case 4:V=V.containerInfo,ue=!0;break e}B=B.return}B=!0}if(M.tag===5||M.tag===6)cl(h,M,$),ue?jt(V,M.stateNode):Je(V,M.stateNode);else if(M.tag===18)ue?bs(V,M.stateNode):jr(V,M.stateNode);else if(M.tag===4){if(M.child!==null){V=M.stateNode.containerInfo,ue=!0,M.child.return=M,M=M.child;continue}}else if(ss(h,M,$),M.child!==null){M.child.return=M,M=M.child;continue}if(M===g)break;for(;M.sibling===null;){if(M.return===null||M.return===g)return;M=M.return,M.tag===4&&(B=!1)}M.sibling.return=M.return,M=M.sibling}}function Ho(h,g){if(Pe){switch(g.tag){case 0:case 11:case 14:case 15:Co(3,g,g.return),_s(3,g),Co(5,g,g.return);return;case 1:return;case 5:var $=g.stateNode;if($!=null){var M=g.memoizedProps;h=h!==null?h.memoizedProps:M;var B=g.type,V=g.updateQueue;g.updateQueue=null,V!==null&&ee($,V,B,h,M,g)}return;case 6:if(g.stateNode===null)throw Error(l(162));$=g.memoizedProps,Ie(g.stateNode,h!==null?h.memoizedProps:$,$);return;case 3:je&&h!==null&&h.memoizedState.isDehydrated&&Li(g.stateNode.containerInfo);return;case 12:return;case 13:Ao(g);return;case 19:Ao(g);return;case 17:return}throw Error(l(163))}switch(g.tag){case 0:case 11:case 14:case 15:Co(3,g,g.return),_s(3,g),Co(5,g,g.return);return;case 12:return;case 13:Ao(g);return;case 19:Ao(g);return;case 3:je&&h!==null&&h.memoizedState.isDehydrated&&Li(g.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ce){switch(g.tag){case 1:case 5:case 6:break e;case 3:case 4:g=g.stateNode,ir(g.containerInfo,g.pendingChildren);break e}throw Error(l(163))}}function Ao(h){var g=h.updateQueue;if(g!==null){h.updateQueue=null;var $=h.stateNode;$===null&&($=h.stateNode=new xn),g.forEach(function(M){var B=Mu.bind(null,h,M);$.has(M)||($.add(M),M.then(B,B))})}}function sp(h,g){for(gn=g;gn!==null;){g=gn;var $=g.deletions;if($!==null)for(var M=0;M<$.length;M++){var B=$[M];try{var V=h;Pe?Gh(V,B,g):cl(V,B,g);var ue=B.alternate;ue!==null&&(ue.return=null),B.return=null}catch(tn){Ks(B,g,tn)}}if($=g.child,g.subtreeFlags&12854&&$!==null)$.return=g,gn=$;else for(;gn!==null;){g=gn;try{var Me=g.flags;if(Me&32&&Pe&&ze(g.stateNode),Me&512){var Qe=g.alternate;if(Qe!==null){var Et=Qe.ref;Et!==null&&(typeof Et=="function"?Et(null):Et.current=null)}}if(Me&8192)switch(g.tag){case 13:if(g.memoizedState!==null){var Jt=g.alternate;(Jt===null||Jt.memoizedState===null)&&(dd=ms())}break;case 22:var an=g.memoizedState!==null,_n=g.alternate,vn=_n!==null&&_n.memoizedState!==null;if($=g,Pe){e:if(M=$,B=an,V=null,Pe)for(var pn=M;;){if(pn.tag===5){if(V===null){V=pn;var Or=pn.stateNode;B?Yt(Or):Kt(pn.stateNode,pn.memoizedProps)}}else if(pn.tag===6){if(V===null){var St=pn.stateNode;B?_t(St):Xt(St,pn.memoizedProps)}}else if((pn.tag!==22&&pn.tag!==23||pn.memoizedState===null||pn===M)&&pn.child!==null){pn.child.return=pn,pn=pn.child;continue}if(pn===M)break;for(;pn.sibling===null;){if(pn.return===null||pn.return===M)break e;V===pn&&(V=null),pn=pn.return}V===pn&&(V=null),pn.sibling.return=pn.return,pn=pn.sibling}}if(an&&!vn&&$.mode&1){gn=$;for(var we=$.child;we!==null;){for($=gn=we;gn!==null;){M=gn;var Re=M.child;switch(M.tag){case 0:case 11:case 14:case 15:Co(4,M,M.return);break;case 1:ll(M,M.return);var nt=M.stateNode;if(typeof nt.componentWillUnmount=="function"){var Ut=M.return;try{nt.props=M.memoizedProps,nt.state=M.memoizedState,nt.componentWillUnmount()}catch(tn){Ks(M,Ut,tn)}}break;case 5:ll(M,M.return);break;case 22:if(M.memoizedState!==null){mc($);continue}}Re!==null?(Re.return=M,gn=Re):mc($)}we=we.sibling}}}switch(Me&4102){case 2:Ii(g),g.flags&=-3;break;case 6:Ii(g),g.flags&=-3,Ho(g.alternate,g);break;case 4096:g.flags&=-4097;break;case 4100:g.flags&=-4097,Ho(g.alternate,g);break;case 4:Ho(g.alternate,g)}}catch(tn){Ks(g,g.return,tn)}if($=g.sibling,$!==null){$.return=g.return,gn=$;break}gn=g.return}}}function $u(h,g,$){gn=h,Rl(h)}function Rl(h,g,$){for(var M=(h.mode&1)!==0;gn!==null;){var B=gn,V=B.child;if(B.tag===22&&M){var ue=B.memoizedState!==null||uo;if(!ue){var Me=B.alternate,Qe=Me!==null&&Me.memoizedState!==null||ga;Me=uo;var Et=ga;if(uo=ue,(ga=Qe)&&!Et)for(gn=B;gn!==null;)ue=gn,Qe=ue.child,ue.tag===22&&ue.memoizedState!==null?Yr(B):Qe!==null?(Qe.return=ue,gn=Qe):Yr(B);for(;V!==null;)gn=V,Rl(V),V=V.sibling;gn=B,uo=Me,ga=Et}hd(h)}else B.subtreeFlags&8772&&V!==null?(V.return=B,gn=V):hd(h)}}function hd(h){for(;gn!==null;){var g=gn;if(g.flags&8772){var $=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:ga||_s(5,g);break;case 1:var M=g.stateNode;if(g.flags&4&&!ga)if($===null)M.componentDidMount();else{var B=g.elementType===g.type?$.memoizedProps:vi(g.type,$.memoizedProps);M.componentDidUpdate(B,$.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var V=g.updateQueue;V!==null&&ad(g,V,M);break;case 3:var ue=g.updateQueue;if(ue!==null){if($=null,g.child!==null)switch(g.child.tag){case 5:$=Te(g.child.stateNode);break;case 1:$=g.child.stateNode}ad(g,ue,$)}break;case 5:var Me=g.stateNode;$===null&&g.flags&4&&q(Me,g.type,g.memoizedProps,g);break;case 6:break;case 4:break;case 12:break;case 13:if(je&&g.memoizedState===null){var Qe=g.alternate;if(Qe!==null){var Et=Qe.memoizedState;if(Et!==null){var Jt=Et.dehydrated;Jt!==null&&Dr(Jt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(l(163))}ga||g.flags&512&&ul(g)}catch(an){Ks(g,g.return,an)}}if(g===h){gn=null;break}if($=g.sibling,$!==null){$.return=g.return,gn=$;break}gn=g.return}}function mc(h){for(;gn!==null;){var g=gn;if(g===h){gn=null;break}var $=g.sibling;if($!==null){$.return=g.return,gn=$;break}gn=g.return}}function Yr(h){for(;gn!==null;){var g=gn;try{switch(g.tag){case 0:case 11:case 15:var $=g.return;try{_s(4,g)}catch(Qe){Ks(g,$,Qe)}break;case 1:var M=g.stateNode;if(typeof M.componentDidMount=="function"){var B=g.return;try{M.componentDidMount()}catch(Qe){Ks(g,B,Qe)}}var V=g.return;try{ul(g)}catch(Qe){Ks(g,V,Qe)}break;case 5:var ue=g.return;try{ul(g)}catch(Qe){Ks(g,ue,Qe)}}}catch(Qe){Ks(g,g.return,Qe)}if(g===h){gn=null;break}var Me=g.sibling;if(Me!==null){Me.return=g.return,gn=Me;break}gn=g.return}}var su=0,Yu=1,os=2,Ha=3,xs=4;if(typeof Symbol=="function"&&Symbol.for){var ws=Symbol.for;su=ws("selector.component"),Yu=ws("selector.has_pseudo_class"),os=ws("selector.role"),Ha=ws("selector.test_id"),xs=ws("selector.text")}function Vc(h){var g=it(h);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(l(364));return g}if(h=mt(h),h===null)throw Error(l(362));return h.stateNode.current}function fi(h,g){switch(g.$$typeof){case su:if(h.type===g.value)return!0;break;case Yu:e:{g=g.value,h=[h,0];for(var $=0;$<h.length;){var M=h[$++],B=h[$++],V=g[B];if(M.tag!==5||!Be(M)){for(;V!=null&&fi(M,V);)B++,V=g[B];if(B===g.length){g=!0;break e}else for(M=M.child;M!==null;)h.push(M,B),M=M.sibling}}g=!1}return g;case os:if(h.tag===5&&dt(h.stateNode,g.value))return!0;break;case xs:if((h.tag===5||h.tag===6)&&(h=re(h),h!==null&&0<=h.indexOf(g.value)))return!0;break;case Ha:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(l(365))}return!1}function Ga(h){switch(h.$$typeof){case su:return"<"+(H(h.value)||"Unknown")+">";case Yu:return":has("+(Ga(h)||"")+")";case os:return'[role="'+h.value+'"]';case xs:return'"'+h.value+'"';case Ha:return'[data-testname="'+h.value+'"]';default:throw Error(l(365))}}function gc(h,g){var $=[];h=[h,0];for(var M=0;M<h.length;){var B=h[M++],V=h[M++],ue=g[V];if(B.tag!==5||!Be(B)){for(;ue!=null&&fi(B,ue);)V++,ue=g[V];if(V===g.length)$.push(B);else for(B=B.child;B!==null;)h.push(B,V),B=B.sibling}}return $}function op(h,g){if(!$t)throw Error(l(363));h=Vc(h),h=gc(h,g),g=[],h=Array.from(h);for(var $=0;$<h.length;){var M=h[$++];if(M.tag===5)Be(M)||g.push(M.stateNode);else for(M=M.child;M!==null;)h.push(M),M=M.sibling}return g}var bh=Math.ceil,ta=u.ReactCurrentDispatcher,Vi=u.ReactCurrentOwner,Ln=u.ReactCurrentBatchConfig,qn=0,kr=null,ti=null,Jr=0,Mo=0,as=Ar(0),Qi=0,ou=null,Ku=0,_c=0,Ju=0,Ys=null,co=null,dd=0,_a=1/0;function Cu(){_a=ms()+500}var Au=!1,ho=null,po=null,kl=!1,Go=null,qu=0,Qu=0,Th=null,Sh=-1,Mr=0;function vs(){return qn&6?ms():Sh!==-1?Sh:Sh=ms()}function Rs(h){return h.mode&1?qn&2&&Jr!==0?Jr&-Jr:Uu.transition!==null?(Mr===0&&(h=Ko,Ko<<=1,!(Ko&4194240)&&(Ko=64),Mr=h),Mr):(h=_r,h!==0?h:vt()):1}function Wa(h,g,$){if(50<Qu)throw Qu=0,Th=null,Error(l(185));var M=Hs(h,g);return M===null?null:(El(M,g,$),(!(qn&2)||M!==kr)&&(M===kr&&(!(qn&2)&&(_c|=g),Qi===4&&au(M,Jr)),cn(M,$),g===1&&qn===0&&!(h.mode&1)&&(Cu(),Fu&&la())),M)}function Hs(h,g){h.lanes|=g;var $=h.alternate;for($!==null&&($.lanes|=g),$=h,h=h.return;h!==null;)h.childLanes|=g,$=h.alternate,$!==null&&($.childLanes|=g),$=h,h=h.return;return $.tag===3?$.stateNode:null}function cn(h,g){var $=h.callbackNode;Oc(h,g);var M=kc(h,h===kr?Jr:0);if(M===0)$!==null&&el($),h.callbackNode=null,h.callbackPriority=0;else if(g=M&-M,h.callbackPriority!==g){if($!=null&&el($),g===1)h.tag===0?Oa(Ol.bind(null,h)):ph(Ol.bind(null,h)),yt?kt(function(){qn===0&&la()}):Za(tl,la),$=null;else{switch(Yl(M)){case 1:$=tl;break;case 4:$=Td;break;case 16:$=ro;break;case 536870912:$=Pu;break;default:$=ro}$=yc($,jc.bind(null,h))}h.callbackPriority=g,h.callbackNode=$}}function jc(h,g){if(Sh=-1,Mr=0,qn&6)throw Error(l(327));var $=h.callbackNode;if(ec()&&h.callbackNode!==$)return null;var M=kc(h,h===kr?Jr:0);if(M===0)return null;if(M&30||M&h.expiredLanes||g)g=si(h,M);else{g=M;var B=qn;qn|=2;var V=Wh();(kr!==h||Jr!==g)&&(Cu(),Wr(h,g));do try{Yc();break}catch(Me){Zu(h,Me)}while(!0);$o(),ta.current=V,qn=B,ti!==null?g=0:(kr=null,Jr=0,g=Qi)}if(g!==0){if(g===2&&(B=Sl(h),B!==0&&(M=B,g=bn(h,B))),g===1)throw $=ou,Wr(h,0),au(h,M),cn(h,ms()),$;if(g===6)au(h,M);else{if(B=h.current.alternate,!(M&30)&&!$s(B)&&(g=si(h,M),g===2&&(V=Sl(h),V!==0&&(M=V,g=bn(h,V))),g===1))throw $=ou,Wr(h,0),au(h,M),cn(h,ms()),$;switch(h.finishedWork=B,h.finishedLanes=M,g){case 0:case 1:throw Error(l(345));case 2:Kc(h,co);break;case 3:if(au(h,M),(M&130023424)===M&&(g=dd+500-ms(),10<g)){if(kc(h,0)!==0)break;if(B=h.suspendedLanes,(B&M)!==M){vs(),h.pingedLanes|=h.suspendedLanes&B;break}h.timeoutHandle=rt(Kc.bind(null,h,co),g);break}Kc(h,co);break;case 4:if(au(h,M),(M&4194240)===M)break;for(g=h.eventTimes,B=-1;0<M;){var ue=31-Yo(M);V=1<<ue,ue=g[ue],ue>B&&(B=ue),M&=~V}if(M=B,M=ms()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*bh(M/1960))-M,10<M){h.timeoutHandle=rt(Kc.bind(null,h,co),M);break}Kc(h,co);break;case 5:Kc(h,co);break;default:throw Error(l(329))}}}return cn(h,ms()),h.callbackNode===$?jc.bind(null,h):null}function bn(h,g){var $=Ys;return h.current.memoizedState.isDehydrated&&(Wr(h,g).flags|=256),h=si(h,g),h!==2&&(g=co,co=$,g!==null&&mi(g)),h}function mi(h){co===null?co=h:co.push.apply(co,h)}function $s(h){for(var g=h;;){if(g.flags&16384){var $=g.updateQueue;if($!==null&&($=$.stores,$!==null))for(var M=0;M<$.length;M++){var B=$[M],V=B.getSnapshot;B=B.value;try{if(!Ss(V(),B))return!1}catch{return!1}}}if($=g.child,g.subtreeFlags&16384&&$!==null)$.return=g,g=$;else{if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function au(h,g){for(g&=~Ju,g&=~_c,h.suspendedLanes|=g,h.pingedLanes&=~g,h=h.expirationTimes;0<g;){var $=31-Yo(g),M=1<<$;h[$]=-1,g&=~M}}function Ol(h){if(qn&6)throw Error(l(327));ec();var g=kc(h,0);if(!(g&1))return cn(h,ms()),null;var $=si(h,g);if(h.tag!==0&&$===2){var M=Sl(h);M!==0&&(g=M,$=bn(h,M))}if($===1)throw $=ou,Wr(h,0),au(h,g),cn(h,ms()),$;if($===6)throw Error(l(345));return h.finishedWork=h.current.alternate,h.finishedLanes=g,Kc(h,co),cn(h,ms()),null}function Bt(h){Go!==null&&Go.tag===0&&!(qn&6)&&ec();var g=qn;qn|=1;var $=Ln.transition,M=_r;try{if(Ln.transition=null,_r=1,h)return h()}finally{_r=M,Ln.transition=$,qn=g,!(qn&6)&&la()}}function hl(){Mo=as.current,$n(as)}function Wr(h,g){h.finishedWork=null,h.finishedLanes=0;var $=h.timeoutHandle;if($!==ft&&(h.timeoutHandle=ft,tt($)),ti!==null)for($=ti.return;$!==null;){var M=$;switch(Hr(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Qa();break;case 3:gh(),$n(Ni),$n(mr),Ot();break;case 5:hi(M);break;case 4:gh();break;case 13:$n(ve);break;case 19:$n(ve);break;case 10:nl(M.type._context);break;case 22:case 23:hl()}$=$.return}if(kr=h,ti=h=_o(h.current,null),Jr=Mo=g,Qi=0,ou=null,Ju=_c=Ku=0,co=Ys=null,$i!==null){for(g=0;g<$i.length;g++)if($=$i[g],M=$.interleaved,M!==null){$.interleaved=null;var B=M.next,V=$.pending;if(V!==null){var ue=V.next;V.next=B,M.next=ue}$.pending=M}$i=null}return h}function Zu(h,g){do{var $=ti;try{if($o(),en.current=ju,yi){for(var M=mn.memoizedState;M!==null;){var B=M.queue;B!==null&&(B.pending=null),M=M.next}yi=!1}if(jn=0,oo=Br=mn=null,ao=!1,il=0,Vi.current=null,$===null||$.return===null){Qi=1,ou=g,ti=null;break}e:{var V=h,ue=$.return,Me=$,Qe=g;if(g=Jr,Me.flags|=32768,Qe!==null&&typeof Qe=="object"&&typeof Qe.then=="function"){var Et=Qe,Jt=Me,an=Jt.tag;if(!(Jt.mode&1)&&(an===0||an===11||an===15)){var _n=Jt.alternate;_n?(Jt.updateQueue=_n.updateQueue,Jt.memoizedState=_n.memoizedState,Jt.lanes=_n.lanes):(Jt.updateQueue=null,Jt.memoizedState=null)}var vn=$d(ue);if(vn!==null){vn.flags&=-257,Ua(vn,ue,Me,V,g),vn.mode&1&&pc(V,Et,g),g=vn,Qe=Et;var pn=g.updateQueue;if(pn===null){var Or=new Set;Or.add(Qe),g.updateQueue=Or}else pn.add(Qe);break e}else{if(!(g&1)){pc(V,Et,g),Xc();break e}Qe=Error(l(426))}}else if(Wi&&Me.mode&1){var St=$d(ue);if(St!==null){!(St.flags&65536)&&(St.flags|=256),Ua(St,ue,Me,V,g),Gu(Qe);break e}}V=Qe,Qi!==4&&(Qi=2),Ys===null?Ys=[V]:Ys.push(V),Qe=Zo(Qe,Me),Me=ue;do{switch(Me.tag){case 3:Me.flags|=65536,g&=-g,Me.lanes|=g;var we=Il(Me,Qe,g);cr(Me,we);break e;case 1:V=Qe;var Re=Me.type,nt=Me.stateNode;if(!(Me.flags&128)&&(typeof Re.getDerivedStateFromError=="function"||nt!==null&&typeof nt.componentDidCatch=="function"&&(po===null||!po.has(nt)))){Me.flags|=65536,g&=-g,Me.lanes|=g;var Ut=zc(Me,V,g);cr(Me,Ut);break e}}Me=Me.return}while(Me!==null)}dl($)}catch(tn){g=tn,ti===$&&$!==null&&(ti=$=$.return);continue}break}while(!0)}function Wh(){var h=ta.current;return ta.current=ju,h===null?ju:h}function Xc(){(Qi===0||Qi===3||Qi===2)&&(Qi=4),kr===null||!(Ku&268435455)&&!(_c&268435455)||au(kr,Jr)}function si(h,g){var $=qn;qn|=2;var M=Wh();kr===h&&Jr===g||Wr(h,g);do try{ji();break}catch(B){Zu(h,B)}while(!0);if($o(),qn=$,ta.current=M,ti!==null)throw Error(l(261));return kr=null,Jr=0,Qi}function ji(){for(;ti!==null;)fo(ti)}function Yc(){for(;ti!==null&&!_u();)fo(ti)}function fo(h){var g=Jc(h.alternate,h,Mo);h.memoizedProps=h.pendingProps,g===null?dl(h):ti=g,Vi.current=null}function dl(h){var g=h;do{var $=g.alternate;if(h=g.return,g.flags&32768){if($=yh($,g),$!==null){$.flags&=32767,ti=$;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Qi=6,ti=null;return}}else if($=kp($,g,Mo),$!==null){ti=$;return}if(g=g.sibling,g!==null){ti=g;return}ti=g=h}while(g!==null);Qi===0&&(Qi=5)}function Kc(h,g){var $=_r,M=Ln.transition;try{Ln.transition=null,_r=1,vc(h,g,$)}finally{Ln.transition=M,_r=$}return null}function vc(h,g,$){do ec();while(Go!==null);if(qn&6)throw Error(l(327));var M=h.finishedWork,B=h.finishedLanes;if(M===null)return null;if(h.finishedWork=null,h.finishedLanes=0,M===h.current)throw Error(l(177));h.callbackNode=null,h.callbackPriority=0;var V=M.lanes|M.childLanes;if(xl(h,V),h===kr&&(ti=kr=null,Jr=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||kl||(kl=!0,yc(ro,function(){return ec(),null})),V=(M.flags&15990)!==0,M.subtreeFlags&15990||V){V=Ln.transition,Ln.transition=null;var ue=_r;_r=1;var Me=qn;qn|=4,Vi.current=null,iu(h,M),sp(h,M),ie(h.containerInfo),h.current=M,$u(M),Ki(),qn=Me,_r=ue,Ln.transition=V}else h.current=M;if(kl&&(kl=!1,Go=h,qu=B),V=h.pendingLanes,V===0&&(po=null),nr(M.stateNode),cn(h,ms()),g!==null)for($=h.onRecoverableError,M=0;M<g.length;M++)$(g[M]);if(Au)throw Au=!1,h=ho,ho=null,h;return qu&1&&h.tag!==0&&ec(),V=h.pendingLanes,V&1?h===Th?Qu++:(Qu=0,Th=h):Qu=0,la(),null}function ec(){if(Go!==null){var h=Yl(qu),g=Ln.transition,$=_r;try{if(Ln.transition=null,_r=16>h?16:h,Go===null)var M=!1;else{if(h=Go,Go=null,qu=0,qn&6)throw Error(l(331));var B=qn;for(qn|=4,gn=h.current;gn!==null;){var V=gn,ue=V.child;if(gn.flags&16){var Me=V.deletions;if(Me!==null){for(var Qe=0;Qe<Me.length;Qe++){var Et=Me[Qe];for(gn=Et;gn!==null;){var Jt=gn;switch(Jt.tag){case 0:case 11:case 15:Co(8,Jt,V)}var an=Jt.child;if(an!==null)an.return=Jt,gn=an;else for(;gn!==null;){Jt=gn;var _n=Jt.sibling,vn=Jt.return;if(zo(Jt),Jt===Et){gn=null;break}if(_n!==null){_n.return=vn,gn=_n;break}gn=vn}}}var pn=V.alternate;if(pn!==null){var Or=pn.child;if(Or!==null){pn.child=null;do{var St=Or.sibling;Or.sibling=null,Or=St}while(Or!==null)}}gn=V}}if(V.subtreeFlags&2064&&ue!==null)ue.return=V,gn=ue;else e:for(;gn!==null;){if(V=gn,V.flags&2048)switch(V.tag){case 0:case 11:case 15:Co(9,V,V.return)}var we=V.sibling;if(we!==null){we.return=V.return,gn=we;break e}gn=V.return}}var Re=h.current;for(gn=Re;gn!==null;){ue=gn;var nt=ue.child;if(ue.subtreeFlags&2064&&nt!==null)nt.return=ue,gn=nt;else e:for(ue=Re;gn!==null;){if(Me=gn,Me.flags&2048)try{switch(Me.tag){case 0:case 11:case 15:_s(9,Me)}}catch(tn){Ks(Me,Me.return,tn)}if(Me===ue){gn=null;break e}var Ut=Me.sibling;if(Ut!==null){Ut.return=Me.return,gn=Ut;break e}gn=Me.return}}if(qn=B,la(),vu&&typeof vu.onPostCommitFiberRoot=="function")try{vu.onPostCommitFiberRoot(aa,h)}catch{}M=!0}return M}finally{_r=$,Ln.transition=g}}return!1}function Io(h,g,$){g=Zo($,g),g=Il(h,g,1),La(h,g),g=vs(),h=Hs(h,1),h!==null&&(El(h,1,g),cn(h,g))}function Ks(h,g,$){if(h.tag===3)Io(h,h,$);else for(;g!==null;){if(g.tag===3){Io(g,h,$);break}else if(g.tag===1){var M=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(po===null||!po.has(M))){h=Zo($,h),h=zc(g,h,1),La(g,h),h=vs(),g=Hs(g,1),g!==null&&(El(g,1,h),cn(g,h));break}}g=g.return}}function na(h,g,$){var M=h.pingCache;M!==null&&M.delete(g),g=vs(),h.pingedLanes|=h.suspendedLanes&$,kr===h&&(Jr&$)===$&&(Qi===4||Qi===3&&(Jr&130023424)===Jr&&500>ms()-dd?Wr(h,0):Ju|=$),cn(h,g)}function Eh(h,g){g===0&&(h.mode&1?(g=pr,pr<<=1,!(pr&130023424)&&(pr=4194304)):g=1);var $=vs();h=Hs(h,g),h!==null&&(El(h,g,$),cn(h,$))}function mo(h){var g=h.memoizedState,$=0;g!==null&&($=g.retryLane),Eh(h,$)}function Mu(h,g){var $=0;switch(h.tag){case 13:var M=h.stateNode,B=h.memoizedState;B!==null&&($=B.retryLane);break;case 19:M=h.stateNode;break;default:throw Error(l(314))}M!==null&&M.delete(g),Eh(h,$)}var Jc;Jc=function(h,g,$){if(h!==null)if(h.memoizedProps!==g.pendingProps||Ni.current)Mi=!0;else{if(!(h.lanes&$)&&!(g.flags&128))return Mi=!1,Op(h,g,$);Mi=!!(h.flags&131072)}else Mi=!1,Wi&&g.flags&1048576&&ql(g,Da,g.index);switch(g.lanes=0,g.tag){case 2:var M=g.type;h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2),h=g.pendingProps;var B=ci(g,mr.current);wi(g,$),B=Xn(null,g,M,h,B,$);var V=ha();return g.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,fs(M)?(V=!0,cc(g)):V=!1,g.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,od(g),B.updater=np,g.stateNode=B,B._reactInternals=g,Kl(g,M,h,$),g=ea(null,g,M,!0,V,$)):(g.tag=0,Wi&&V&&Oh(g),li(null,g,B,$),g=g.child),g;case 16:M=g.elementType;e:{switch(h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2),h=g.pendingProps,B=M._init,M=B(M._payload),g.type=M,B=g.tag=Ll(M),h=vi(M,h),B){case 0:g=is(null,g,M,h,$);break e;case 1:g=Gc(null,g,M,h,$);break e;case 11:g=qi(null,g,M,h,$);break e;case 14:g=rs(null,g,M,vi(M.type,h),$);break e}throw Error(l(306,M,""))}return g;case 0:return M=g.type,B=g.pendingProps,B=g.elementType===M?B:vi(M,B),is(h,g,M,B,$);case 1:return M=g.type,B=g.pendingProps,B=g.elementType===M?B:vi(M,B),Gc(h,g,M,B,$);case 3:e:{if(Cd(g),h===null)throw Error(l(387));M=g.pendingProps,V=g.memoizedState,B=V.element,Su(h,g),Jo(g,M,null,$);var ue=g.memoizedState;if(M=ue.element,je&&V.isDehydrated)if(V={element:M,isDehydrated:!1,cache:ue.cache,transitions:ue.transitions},g.updateQueue.baseState=V,g.memoizedState=V,g.flags&256){B=Error(l(423)),g=Ad(h,g,M,$,B);break e}else if(M!==B){B=Error(l(424)),g=Ad(h,g,M,$,B);break e}else for(je&&(vr=Tt(g.stateNode.containerInfo),Ci=g,Wi=!0,Eu=null,ca=!1),$=Bc(g,null,M,$),g.child=$;$;)$.flags=$.flags&-3|4096,$=$.sibling;else{if(Lh(),M===B){g=pi(h,g,$);break e}li(h,g,M,$)}g=g.child}return g;case 5:return Ed(g),h===null&&Hu(g),M=g.type,B=g.pendingProps,V=h!==null?h.memoizedProps:null,ue=B.children,qe(M,B)?ue=null:V!==null&&qe(M,V)&&(g.flags|=32),ma(h,g),li(h,g,ue,$),g.child;case 6:return h===null&&Hu(g),null;case 13:return Vn(h,g,$);case 4:return xu(g,g.stateNode.containerInfo),M=g.pendingProps,h===null?g.child=Nc(g,null,M,$):li(h,g,M,$),g.child;case 11:return M=g.type,B=g.pendingProps,B=g.elementType===M?B:vi(M,B),qi(h,g,M,B,$);case 7:return li(h,g,g.pendingProps,$),g.child;case 8:return li(h,g,g.pendingProps.children,$),g.child;case 12:return li(h,g,g.pendingProps.children,$),g.child;case 10:e:{if(M=g.type._context,B=g.pendingProps,V=g.memoizedProps,ue=B.value,Tu(g,M,ue),V!==null)if(Ss(V.value,ue)){if(V.children===B.children&&!Ni.current){g=pi(h,g,$);break e}}else for(V=g.child,V!==null&&(V.return=g);V!==null;){var Me=V.dependencies;if(Me!==null){ue=V.child;for(var Qe=Me.firstContext;Qe!==null;){if(Qe.context===M){if(V.tag===1){Qe=Gi(-1,$&-$),Qe.tag=2;var Et=V.updateQueue;if(Et!==null){Et=Et.shared;var Jt=Et.pending;Jt===null?Qe.next=Qe:(Qe.next=Jt.next,Jt.next=Qe),Et.pending=Qe}}V.lanes|=$,Qe=V.alternate,Qe!==null&&(Qe.lanes|=$),Bi(V.return,$,g),Me.lanes|=$;break}Qe=Qe.next}}else if(V.tag===10)ue=V.type===g.type?null:V.child;else if(V.tag===18){if(ue=V.return,ue===null)throw Error(l(341));ue.lanes|=$,Me=ue.alternate,Me!==null&&(Me.lanes|=$),Bi(ue,$,g),ue=V.sibling}else ue=V.child;if(ue!==null)ue.return=V;else for(ue=V;ue!==null;){if(ue===g){ue=null;break}if(V=ue.sibling,V!==null){V.return=ue.return,ue=V;break}ue=ue.return}V=ue}li(h,g,B.children,$),g=g.child}return g;case 9:return B=g.type,M=g.pendingProps.children,wi(g,$),B=zn(B),M=M(B),g.flags|=1,li(h,g,M,$),g.child;case 14:return M=g.type,B=vi(M,g.pendingProps),B=vi(M.type,B),rs(h,g,M,B,$);case 15:return Hc(h,g,g.type,g.pendingProps,$);case 17:return M=g.type,B=g.pendingProps,B=g.elementType===M?B:vi(M,B),h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2),g.tag=1,fs(M)?(h=!0,cc(g)):h=!1,wi(g,$),ff(g,M,B),Kl(g,M,B,$),ea(null,g,M,!0,h,$);case 19:return di(h,g,$);case 22:return fa(h,g,$)}throw Error(l(156,g.tag))};function yc(h,g){return Za(h,g)}function Wo(h,g,$,M){this.tag=h,this.key=$,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function go(h,g,$,M){return new Wo(h,g,$,M)}function tc(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Ll(h){if(typeof h=="function")return tc(h)?1:0;if(h!=null){if(h=h.$$typeof,h===A)return 11;if(h===O)return 14}return 2}function _o(h,g){var $=h.alternate;return $===null?($=go(h.tag,g,h.key,h.mode),$.elementType=h.elementType,$.type=h.type,$.stateNode=h.stateNode,$.alternate=h,h.alternate=$):($.pendingProps=g,$.type=h.type,$.flags=0,$.subtreeFlags=0,$.deletions=null),$.flags=h.flags&14680064,$.childLanes=h.childLanes,$.lanes=h.lanes,$.child=h.child,$.memoizedProps=h.memoizedProps,$.memoizedState=h.memoizedState,$.updateQueue=h.updateQueue,g=h.dependencies,$.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},$.sibling=h.sibling,$.index=h.index,$.ref=h.ref,$}function Dl(h,g,$,M,B,V){var ue=2;if(M=h,typeof h=="function")tc(h)&&(ue=1);else if(typeof h=="string")ue=5;else e:switch(h){case _:return Va($.children,B,V,g);case y:ue=8,B|=8;break;case b:return h=go(12,$,g,B|2),h.elementType=b,h.lanes=V,h;case I:return h=go(13,$,g,B),h.elementType=I,h.lanes=V,h;case L:return h=go(19,$,g,B),h.elementType=L,h.lanes=V,h;case N:return lu($,B,V,g);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case E:ue=10;break e;case C:ue=9;break e;case A:ue=11;break e;case O:ue=14;break e;case P:ue=16,M=null;break e}throw Error(l(130,h==null?h:typeof h,""))}return g=go(ue,$,g,B),g.elementType=h,g.type=M,g.lanes=V,g}function Va(h,g,$,M){return h=go(7,h,M,g),h.lanes=$,h}function lu(h,g,$,M){return h=go(22,h,M,g),h.elementType=N,h.lanes=$,h.stateNode={},h}function ni(h,g,$){return h=go(6,h,null,g),h.lanes=$,h}function ls(h,g,$){return g=go(4,h.children!==null?h.children:[],h.key,g),g.lanes=$,g.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},g}function Vh(h,g,$,M,B){this.tag=g,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ft,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gu(0),this.expirationTimes=gu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gu(0),this.identifierPrefix=M,this.onRecoverableError=B,je&&(this.mutableSourceEagerHydrationData=null)}function pd(h,g,$,M,B,V,ue,Me,Qe){return h=new Vh(h,g,$,Me,Qe),g===1?(g=1,V===!0&&(g|=8)):g=0,V=go(3,null,null,g),h.current=V,V.stateNode=h,V.memoizedState={element:M,isDehydrated:$,cache:null,transitions:null},od(V),h}function va(h){if(!h)return zr;h=h._reactInternals;e:{if(Q(h)!==h||h.tag!==1)throw Error(l(170));var g=h;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(fs(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(l(171))}if(h.tag===1){var $=h.type;if(fs($))return uc(h,$,g)}return g}function ya(h){var g=h._reactInternals;if(g===void 0)throw typeof h.render=="function"?Error(l(188)):(h=Object.keys(h).join(","),Error(l(268,h)));return h=le(g),h===null?null:h.stateNode}function jh(h,g){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var $=h.retryLane;h.retryLane=$!==0&&$<g?$:g}}function bc(h,g){jh(h,g),(h=h.alternate)&&jh(h,g)}function Lp(h){return h=le(h),h===null?null:h.stateNode}function w(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var g=vs();Wa(h,134217728,g),bc(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var g=vs(),$=Rs(h);Wa(h,$,g),bc(h,$)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var g=h.stateNode;if(g.current.memoizedState.isDehydrated){var $=Ei(g.pendingLanes);$!==0&&(gr(g,$|1),cn(g,ms()),!(qn&6)&&(Cu(),la()))}break;case 13:var M=vs();Bt(function(){return Wa(h,1,M)}),bc(h,1)}},t.batchedUpdates=function(h,g){var $=qn;qn|=1;try{return h(g)}finally{qn=$,qn===0&&(Cu(),Fu&&la())}},t.createComponentSelector=function(h){return{$$typeof:su,value:h}},t.createContainer=function(h,g,$,M,B,V,ue){return pd(h,g,!1,null,$,M,B,V,ue)},t.createHasPseudoClassSelector=function(h){return{$$typeof:Yu,value:h}},t.createHydrationContainer=function(h,g,$,M,B,V,ue,Me,Qe){return h=pd($,M,!0,h,B,V,ue,Me,Qe),h.context=va(null),$=h.current,M=vs(),B=Rs($),V=Gi(M,B),V.callback=g??null,La($,V),h.current.lanes=B,El(h,B,M),cn(h,M),h},t.createPortal=function(h,g,$){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:M==null?null:""+M,children:h,containerInfo:g,implementation:$}},t.createRoleSelector=function(h){return{$$typeof:os,value:h}},t.createTestNameSelector=function(h){return{$$typeof:Ha,value:h}},t.createTextSelector=function(h){return{$$typeof:xs,value:h}},t.deferredUpdates=function(h){var g=_r,$=Ln.transition;try{return Ln.transition=null,_r=16,h()}finally{_r=g,Ln.transition=$}},t.discreteUpdates=function(h,g,$,M,B){var V=_r,ue=Ln.transition;try{return Ln.transition=null,_r=1,h(g,$,M,B)}finally{_r=V,Ln.transition=ue,qn===0&&Cu()}},t.findAllNodes=op,t.findBoundingRects=function(h,g){if(!$t)throw Error(l(363));g=op(h,g),h=[];for(var $=0;$<g.length;$++)h.push(xe(g[$]));for(g=h.length-1;0<g;g--){$=h[g];for(var M=$.x,B=M+$.width,V=$.y,ue=V+$.height,Me=g-1;0<=Me;Me--)if(g!==Me){var Qe=h[Me],Et=Qe.x,Jt=Et+Qe.width,an=Qe.y,_n=an+Qe.height;if(M>=Et&&V>=an&&B<=Jt&&ue<=_n){h.splice(g,1);break}else if(M!==Et||$.width!==Qe.width||_n<V||an>ue){if(!(V!==an||$.height!==Qe.height||Jt<M||Et>B)){Et>M&&(Qe.width+=Et-M,Qe.x=M),Jt<B&&(Qe.width=B-Et),h.splice(g,1);break}}else{an>V&&(Qe.height+=an-V,Qe.y=V),_n<ue&&(Qe.height=ue-an),h.splice(g,1);break}}}return h},t.findHostInstance=ya,t.findHostInstanceWithNoPortals=function(h){return h=oe(h),h=h!==null?ce(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return ya(h)},t.flushControlled=function(h){var g=qn;qn|=1;var $=Ln.transition,M=_r;try{Ln.transition=null,_r=1,h()}finally{_r=M,Ln.transition=$,qn=g,qn===0&&(Cu(),la())}},t.flushPassiveEffects=ec,t.flushSync=Bt,t.focusWithin=function(h,g){if(!$t)throw Error(l(363));for(h=Vc(h),g=gc(h,g),g=Array.from(g),h=0;h<g.length;){var $=g[h++];if(!Be($)){if($.tag===5&&bt($.stateNode))return!0;for($=$.child;$!==null;)g.push($),$=$.sibling}}return!1},t.getCurrentUpdatePriority=function(){return _r},t.getFindAllNodesFailureDescription=function(h,g){if(!$t)throw Error(l(363));var $=0,M=[];h=[Vc(h),0];for(var B=0;B<h.length;){var V=h[B++],ue=h[B++],Me=g[ue];if((V.tag!==5||!Be(V))&&(fi(V,Me)&&(M.push(Ga(Me)),ue++,ue>$&&($=ue)),ue<g.length))for(V=V.child;V!==null;)h.push(V,ue),V=V.sibling}if($<g.length){for(h=[];$<g.length;$++)h.push(Ga(g[$]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return Te(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:Lp,findFiberByHostInstance:h.findFiberByHostInstance||w,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)h=!0;else{try{aa=g.inject(h),vu=g}catch{}h=!!g.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,g,$,M){if(!$t)throw Error(l(363));h=op(h,g);var B=Mt(h,$,M).disconnect;return{disconnect:function(){B()}}},t.registerMutableSourceForHydration=function(h,g){var $=g._getVersion;$=$(g._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[g,$]:h.mutableSourceEagerHydrationData.push(g,$)},t.runWithPriority=function(h,g){var $=_r;try{return _r=h,g()}finally{_r=$}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,g,$,M){var B=g.current,V=vs(),ue=Rs(B);return $=va($),g.context===null?g.context=$:g.pendingContext=$,g=Gi(V,ue),g.payload={element:h},M=M===void 0?null:M,M!==null&&(g.callback=M),La(B,g),h=Wa(B,ue,V),h!==null&&fh(h,B,ue),ue},t};Q9.exports=ame;var lme=Q9.exports;const ume=k1(lme);var Z9={exports:{}},e7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(J,se){var ie=J.length;J.push(se);e:for(;0<ie;){var he=ie-1>>>1,Se=J[he];if(0<s(Se,se))J[he]=se,J[ie]=Se,ie=he;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var se=J[0],ie=J.pop();if(ie!==se){J[0]=ie;e:for(var he=0,Se=J.length,Fe=Se>>>1;he<Fe;){var ke=2*(he+1)-1,qe=J[ke],De=ke+1,rt=J[De];if(0>s(qe,ie))De<Se&&0>s(rt,qe)?(J[he]=rt,J[De]=ie,he=De):(J[he]=qe,J[ke]=ie,he=ke);else if(De<Se&&0>s(rt,ie))J[he]=rt,J[De]=ie,he=De;else break e}}return se}function s(J,se){var ie=J.sortIndex-se.sortIndex;return ie!==0?ie:J.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],_=1,y=null,b=3,E=!1,C=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(J){for(var se=t(p);se!==null;){if(se.callback===null)i(p);else if(se.startTime<=J)i(p),se.sortIndex=se.expirationTime,e(d,se);else break;se=t(p)}}function N(J){if(A=!1,P(J),!C)if(t(d)!==null)C=!0,Te(z);else{var se=t(p);se!==null&&Oe(N,se.startTime-J)}}function z(J,se){C=!1,A&&(A=!1,L(U),U=-1),E=!0;var ie=b;try{for(P(se),y=t(d);y!==null&&(!(y.expirationTime>se)||J&&!oe());){var he=y.callback;if(typeof he=="function"){y.callback=null,b=y.priorityLevel;var Se=he(y.expirationTime<=se);se=n.unstable_now(),typeof Se=="function"?y.callback=Se:y===t(d)&&i(d),P(se)}else i(d);y=t(d)}if(y!==null)var Fe=!0;else{var ke=t(p);ke!==null&&Oe(N,ke.startTime-se),Fe=!1}return Fe}finally{y=null,b=ie,E=!1}}var W=!1,H=null,U=-1,Q=5,ne=-1;function oe(){return!(n.unstable_now()-ne<Q)}function le(){if(H!==null){var J=n.unstable_now();ne=J;var se=!0;try{se=H(!0,J)}finally{se?ge():(W=!1,H=null)}}else W=!1}var ge;if(typeof O=="function")ge=function(){O(le)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,pe=ce.port2;ce.port1.onmessage=le,ge=function(){pe.postMessage(null)}}else ge=function(){I(le,0)};function Te(J){H=J,W||(W=!0,ge())}function Oe(J,se){U=I(function(){J(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){C||E||(C=!0,Te(z))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(J){switch(b){case 1:case 2:case 3:var se=3;break;default:se=b}var ie=b;b=se;try{return J()}finally{b=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,se){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ie=b;b=J;try{return se()}finally{b=ie}},n.unstable_scheduleCallback=function(J,se,ie){var he=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?he+ie:he):ie=he,J){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=ie+Se,J={id:_++,callback:se,priorityLevel:J,startTime:ie,expirationTime:Se,sortIndex:-1},ie>he?(J.sortIndex=ie,e(p,J),t(d)===null&&J===t(p)&&(A?(L(U),U=-1):A=!0,Oe(N,ie-he))):(J.sortIndex=Se,e(d,J),C||E||(C=!0,Te(z))),J},n.unstable_shouldYield=oe,n.unstable_wrapCallback=function(J){var se=b;return function(){var ie=b;b=se;try{return J.apply(this,arguments)}finally{b=ie}}}})(e7);Z9.exports=e7;var S4=Z9.exports;const cme=n=>typeof n=="object"&&typeof n.then=="function",Zb=[];function t7(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let s=0;s<i;s++)if(!t(n[s],e[s]))return!1;return!0}function n7(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const o of Zb)if(t7(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return i.lifespan&&i.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,i.lifespan)),o.response;if(!t)throw o.promise}const s={keys:e,equal:i.equal,remove:()=>{const o=Zb.indexOf(s);o!==-1&&Zb.splice(o,1)},promise:(cme(n)?n:n(...e)).then(o=>{s.response=o,i.lifespan&&i.lifespan>0&&(s.timeout=setTimeout(s.remove,i.lifespan))}).catch(o=>s.error=o)};if(Zb.push(s),!t)throw s.promise}const hme=(n,e,t)=>n7(n,e,!1,t),dme=(n,e,t)=>void n7(n,e,!0,t),pme=n=>{if(n===void 0||n.length===0)Zb.splice(0,Zb.length);else{const e=Zb.find(t=>t7(n,t.keys,t.equal));e&&e.remove()}},r7={};function fme(n,e){function t(_,{args:y=[],attach:b,...E},C){let A=`${_[0].toUpperCase()}${_.slice(1)}`,I;if(_==="primitive"){if(E.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const L=E.object;I=xx(L,{type:_,root:C,attach:b,primitive:!0})}else{const L=r7[A];if(!L)throw new Error(`R3F: ${A} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(y))throw new Error("R3F: The args prop must be an array!");I=xx(new L(...y),{type:_,root:C,attach:b,memoizedProps:{args:y}})}return I.__r3f.attach===void 0&&(I instanceof Iy?I.__r3f.attach="geometry":I instanceof my&&(I.__r3f.attach="material")),A!=="inject"&&z2(I,E),I}function i(_,y){let b=!1;if(y){var E,C;(E=y.__r3f)!=null&&E.attach?U2(_,y,y.__r3f.attach):y.isObject3D&&_.isObject3D&&(_.add(y),b=!0),b||(C=_.__r3f)==null||C.objects.push(y),y.__r3f||xx(y,{}),y.__r3f.parent=_,TD(y),uS(y)}}function s(_,y,b){let E=!1;if(y){var C,A;if((C=y.__r3f)!=null&&C.attach)U2(_,y,y.__r3f.attach);else if(y.isObject3D&&_.isObject3D){y.parent=_,y.dispatchEvent({type:"added"}),_.dispatchEvent({type:"childadded",child:y});const I=_.children.filter(O=>O!==y),L=I.indexOf(b);_.children=[...I.slice(0,L),y,...I.slice(L)],E=!0}E||(A=_.__r3f)==null||A.objects.push(y),y.__r3f||xx(y,{}),y.__r3f.parent=_,TD(y),uS(y)}}function o(_,y,b=!1){_&&[..._].forEach(E=>l(y,E,b))}function l(_,y,b){if(y){var E,C,A;if(y.__r3f&&(y.__r3f.parent=null),(E=_.__r3f)!=null&&E.objects&&(_.__r3f.objects=_.__r3f.objects.filter(N=>N!==y)),(C=y.__r3f)!=null&&C.attach)C4(_,y,y.__r3f.attach);else if(y.isObject3D&&_.isObject3D){var I;_.remove(y),(I=y.__r3f)!=null&&I.root&&Sme(hM(y),y)}const O=(A=y.__r3f)==null?void 0:A.primitive,P=!O&&(b===void 0?y.dispose!==null:b);if(!O){var L;o((L=y.__r3f)==null?void 0:L.objects,y,P),o(y.children,y,P)}if(delete y.__r3f,P&&y.dispose&&y.type!=="Scene"){const N=()=>{try{y.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?S4.unstable_scheduleCallback(S4.unstable_IdlePriority,N):N()}uS(_)}}function u(_,y,b,E){var C;const A=(C=_.__r3f)==null?void 0:C.parent;if(!A)return;const I=t(y,b,_.__r3f.root);if(_.children){for(const L of _.children)L.__r3f&&i(I,L);_.children=_.children.filter(L=>!L.__r3f)}_.__r3f.objects.forEach(L=>i(I,L)),_.__r3f.objects=[],_.__r3f.autoRemovedBeforeAppend||l(A,_),I.parent&&(I.__r3f.autoRemovedBeforeAppend=!0),i(A,I),I.raycast&&I.__r3f.eventCount&&hM(I).getState().internal.interaction.push(I),[E,E.alternate].forEach(L=>{L!==null&&(L.stateNode=I,L.ref&&(typeof L.ref=="function"?L.ref(I):L.ref.current=I))})}const d=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:ume({createInstance:t,removeChild:l,appendChild:i,appendInitialChild:i,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(_,y)=>{if(!y)return;const b=_.getState().scene;b.__r3f&&(b.__r3f.root=_,i(b,y))},removeChildFromContainer:(_,y)=>{y&&l(_.getState().scene,y)},insertInContainerBefore:(_,y,b)=>{if(!y||!b)return;const E=_.getState().scene;E.__r3f&&s(E,y,b)},getRootHostContext:()=>null,getChildHostContext:_=>_,finalizeInitialChildren(_){var y;return!!((y=_==null?void 0:_.__r3f)!=null?y:{}).handlers},prepareUpdate(_,y,b,E){var C;if(((C=_==null?void 0:_.__r3f)!=null?C:{}).primitive&&E.object&&E.object!==_)return[!0];{const{args:I=[],children:L,...O}=E,{args:P=[],children:N,...z}=b;if(!Array.isArray(I))throw new Error("R3F: the args prop must be an array!");if(I.some((H,U)=>H!==P[U]))return[!0];const W=s7(_,O,z,!0);return W.changes.length?[!1,W]:null}},commitUpdate(_,[y,b],E,C,A,I){y?u(_,E,A,I):z2(_,b)},commitMount(_,y,b,E){var C;const A=(C=_.__r3f)!=null?C:{};_.raycast&&A.handlers&&A.eventCount&&hM(_).getState().internal.interaction.push(_)},getPublicInstance:_=>_,prepareForCommit:()=>null,preparePortalMount:_=>xx(_.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(_){var y;const{attach:b,parent:E}=(y=_.__r3f)!=null?y:{};b&&E&&C4(E,_,b),_.isObject3D&&(_.visible=!1),uS(_)},unhideInstance(_,y){var b;const{attach:E,parent:C}=(b=_.__r3f)!=null?b:{};E&&C&&U2(C,_,E),(_.isObject3D&&y.visible==null||y.visible)&&(_.visible=!0),uS(_)},createTextInstance:d,hideTextInstance:d,unhideTextInstance:d,getCurrentEventPriority:()=>e?e():Jx.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&qp.fun(performance.now)?performance.now:qp.fun(Date.now)?Date.now:()=>0,scheduleTimeout:qp.fun(setTimeout)?setTimeout:void 0,cancelTimeout:qp.fun(clearTimeout)?clearTimeout:void 0}),applyProps:z2}}var E4,x4;const F2=n=>"colorSpace"in n||"outputColorSpace"in n,mme=()=>{var n;return(n=r7.ColorManagement)!=null?n:null};typeof window<"u"&&((E4=window.document)!=null&&E4.createElement||((x4=window.navigator)==null?void 0:x4.product)==="ReactNative")?me.useLayoutEffect:me.useEffect;class gme extends me.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}gme.getDerivedStateFromError=()=>({error:!0});const i7="__default",w4=new Map,_me=n=>n&&!!n.memoized&&!!n.changes;function hM(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const qp={obj:n=>n===Object(n)&&!qp.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(qp.str(n)||qp.num(n))return n===e;const o=qp.obj(n);if(o&&i==="reference")return n===e;const l=qp.arr(n);if(l&&t==="reference")return n===e;if((l||o)&&n===e)return!0;let u;for(u in n)if(!(u in e))return!1;if(o&&t==="shallow"&&i==="shallow"){for(u in s?e:n)if(!qp.equ(n[u],e[u],{strict:s,objects:"reference"}))return!1}else for(u in s?e:n)if(n[u]!==e[u])return!1;if(qp.und(u)){if(l&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function vme(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function xx(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function bD(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),s=i.pop();return t=i.reduce((o,l)=>o[l],n),{target:t,key:s}}else return{target:t,key:e}}const $4=/-\d+$/;function U2(n,e,t){if(qp.str(t)){if($4.test(t)){const o=t.replace($4,""),{target:l,key:u}=bD(n,o);Array.isArray(l[u])||(l[u]=[])}const{target:i,key:s}=bD(n,t);e.__r3f.previousAttach=i[s],i[s]=e}else e.__r3f.previousAttach=t(n,e)}function C4(n,e,t){var i,s;if(qp.str(t)){const{target:o,key:l}=bD(n,t),u=e.__r3f.previousAttach;u===void 0?delete o[l]:o[l]=u}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(s=e.__r3f)==null||delete s.previousAttach}function s7(n,{children:e,key:t,ref:i,...s},{children:o,key:l,ref:u,...d}={},p=!1){var _;const y=(_=n==null?void 0:n.__r3f)!=null?_:{},b=Object.entries(s),E=[];if(p){const A=Object.keys(d);for(let I=0;I<A.length;I++)s.hasOwnProperty(A[I])||b.unshift([A[I],i7+"remove"])}b.forEach(([A,I])=>{var L;if((L=n.__r3f)!=null&&L.primitive&&A==="object"||qp.equ(I,d[A]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(A))return E.push([A,I,!0,[]]);let O=[];A.includes("-")&&(O=A.split("-")),E.push([A,I,!1,O]);for(const P in s){const N=s[P];P.startsWith(`${A}-`)&&E.push([P,N,!1,P.split("-")])}});const C={...s};return y.memoizedProps&&y.memoizedProps.args&&(C.args=y.memoizedProps.args),y.memoizedProps&&y.memoizedProps.attach&&(C.attach=y.memoizedProps.attach),{memoized:C,changes:E}}const yme=typeof process<"u"&&!1;function z2(n,e){var t,i,s;const o=(t=n.__r3f)!=null?t:{},l=o.root,u=(i=l==null||l.getState==null?void 0:l.getState())!=null?i:{},{memoized:d,changes:p}=_me(e)?e:s7(n,e),_=o.eventCount;n.__r3f&&(n.__r3f.memoizedProps=d);for(let b=0;b<p.length;b++){let[E,C,A,I]=p[b];if(F2(n)){const N="srgb",z="srgb-linear";E==="encoding"?(E="colorSpace",C=C===3001?N:z):E==="outputEncoding"&&(E="outputColorSpace",C=C===3001?N:z)}let L=n,O=L[E];if(I.length&&(O=I.reduce((P,N)=>P[N],n),!(O&&O.set))){const[P,...N]=I.reverse();L=N.reverse().reduce((z,W)=>z[W],n),E=P}if(C===i7+"remove")if(L.constructor){let P=w4.get(L.constructor);P||(P=new L.constructor,w4.set(L.constructor,P)),C=P[E]}else C=0;if(A)C?o.handlers[E]=C:delete o.handlers[E],o.eventCount=Object.keys(o.handlers).length;else if(O&&O.set&&(O.copy||O instanceof eM)){if(Array.isArray(C))O.fromArray?O.fromArray(C):O.set(...C);else if(O.copy&&C&&C.constructor&&(yme?O.constructor.name===C.constructor.name:O.constructor===C.constructor))O.copy(C);else if(C!==void 0){const P=O instanceof Rh;!P&&O.setScalar?O.setScalar(C):O instanceof eM&&C instanceof eM?O.mask=C.mask:O.set(C),!mme()&&!u.linear&&P&&O.convertSRGBToLinear()}}else if(L[E]=C,L[E]instanceof $m&&L[E].format===$B&&L[E].type===ZV){const P=L[E];F2(P)&&F2(u.gl)?P.colorSpace=u.gl.outputColorSpace:P.encoding=u.gl.outputEncoding}uS(n)}if(o.parent&&n.raycast&&_!==o.eventCount){const b=hM(n).getState().internal,E=b.interaction.indexOf(n);E>-1&&b.interaction.splice(E,1),o.eventCount&&b.interaction.push(n)}return!(p.length===1&&p[0][0]==="onUpdate")&&p.length&&(s=n.__r3f)!=null&&s.parent&&TD(n),n}function uS(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function TD(n){n.onUpdate==null||n.onUpdate(n)}function bme(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Jx.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Jx.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Jx.ContinuousEventPriority;default:return Jx.DefaultEventPriority}}function Tme(n,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(i),s.target.releasePointerCapture(i)))}function Sme(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{Tme(t.capturedMap,e,i,s)})}const A4=new WeakMap;function o7(n,e){return function(t,...i){let s=A4.get(t);return s||(s=new t,A4.set(t,s)),n&&n(s),Promise.all(i.map(o=>new Promise((l,u)=>s.load(o,d=>{d.scene&&Object.assign(d,vme(d.scene)),l(d)},e,d=>u(new Error(`Could not load ${o}: ${d==null?void 0:d.message}`)))))).finally(()=>s.dispose==null?void 0:s.dispose())}}function k$(n,e,t,i){const s=Array.isArray(e)?e:[e],o=hme(o7(t,i),[n,...s],{equal:qp.equ});return Array.isArray(e)?o:o[0]}k$.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return dme(o7(t),[n,...i])};k$.clear=function(n,e){const t=Array.isArray(e)?e:[e];return pme([n,...t])};const Eme=new Map,{reconciler:xme,applyProps:TAe}=fme(Eme,bme);xme.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:me.version});function M4(n,e){if(e===bte)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===eD||e===e8){let t=n.getIndex();if(t===null){const l=[],u=n.getAttribute("position");if(u!==void 0){for(let d=0;d<u.count;d++)l.push(d);n.setIndex(l),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,s=[];if(t)if(e===eD)for(let l=1;l<=i;l++)s.push(t.getX(0)),s.push(t.getX(l)),s.push(t.getX(l+1));else for(let l=0;l<i;l++)l%2===0?(s.push(t.getX(l)),s.push(t.getX(l+1)),s.push(t.getX(l+2))):(s.push(t.getX(l+2)),s.push(t.getX(l+1)),s.push(t.getX(l)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=n.clone();return o.setIndex(s),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const wme=parseInt(SB.replace(/\D+/g,""));class TP extends N1{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Ime(t)}),this.register(function(t){return new Pme(t)}),this.register(function(t){return new Fme(t)}),this.register(function(t){return new Ume(t)}),this.register(function(t){return new kme(t)}),this.register(function(t){return new Ome(t)}),this.register(function(t){return new Lme(t)}),this.register(function(t){return new Dme(t)}),this.register(function(t){return new Mme(t)}),this.register(function(t){return new Nme(t)}),this.register(function(t){return new Rme(t)}),this.register(function(t){return new Bme(t)}),this.register(function(t){return new Cme(t)}),this.register(function(t){return new zme(t)}),this.register(function(t){return new Hme(t)})}load(e,t,i,s){const o=this;let l;this.resourcePath!==""?l=this.resourcePath:this.path!==""?l=this.path:l=l1.extractUrlBase(e),this.manager.itemStart(e);const u=function(p){s?s(p):console.error(p),o.manager.itemError(e),o.manager.itemEnd(e)},d=new JM(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(e,function(p){try{o.parse(p,l,function(_){t(_),o.manager.itemEnd(e)},u)}catch(_){u(_)}},i,u)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let o;const l={},u={};if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l1.decodeText(new Uint8Array(e.slice(0,4)))===a7){try{l[Gs.KHR_BINARY_GLTF]=new Gme(e)}catch(_){s&&s(_);return}o=JSON.parse(l[Gs.KHR_BINARY_GLTF].content)}else o=JSON.parse(l1.decodeText(new Uint8Array(e)));else o=e;if(o.asset===void 0||o.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const d=new nge(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const _=this.pluginCallbacks[p](d);u[_.name]=_,l[_.name]=!0}if(o.extensionsUsed)for(let p=0;p<o.extensionsUsed.length;++p){const _=o.extensionsUsed[p],y=o.extensionsRequired||[];switch(_){case Gs.KHR_MATERIALS_UNLIT:l[_]=new Ame;break;case Gs.KHR_DRACO_MESH_COMPRESSION:l[_]=new Wme(o,this.dracoLoader);break;case Gs.KHR_TEXTURE_TRANSFORM:l[_]=new Vme;break;case Gs.KHR_MESH_QUANTIZATION:l[_]=new jme;break;default:y.indexOf(_)>=0&&u[_]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+_+'".')}}d.setExtensions(l),d.setPlugins(u),d.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,o){i.parse(e,t,s,o)})}}function $me(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Gs={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Cme{constructor(e){this.parser=e,this.name=Gs.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const o=t.json,d=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let p;const _=new Rh(16777215);d.color!==void 0&&_.fromArray(d.color);const y=d.range!==void 0?d.range:0;switch(d.type){case"directional":p=new Fne(_),p.target.position.set(0,0,-1),p.add(p.target);break;case"point":p=new Bne(_),p.distance=y;break;case"spot":p=new Dne(_),p.distance=y,d.spot=d.spot||{},d.spot.innerConeAngle=d.spot.innerConeAngle!==void 0?d.spot.innerConeAngle:0,d.spot.outerConeAngle=d.spot.outerConeAngle!==void 0?d.spot.outerConeAngle:Math.PI/4,p.angle=d.spot.outerConeAngle,p.penumbra=1-d.spot.innerConeAngle/d.spot.outerConeAngle,p.target.position.set(0,0,-1),p.add(p.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+d.type)}return p.position.set(0,0,0),p.decay=2,Zv(p,d),d.intensity!==void 0&&(p.intensity=d.intensity),p.name=t.createUniqueName(d.name||"light_"+e),s=Promise.resolve(p),t.cache.add(i,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,o=i.json.nodes[e],u=(o.extensions&&o.extensions[this.name]||{}).light;return u===void 0?null:this._loadLight(u).then(function(d){return i._getNodeRef(t.cache,u,d)})}}class Ame{constructor(){this.name=Gs.KHR_MATERIALS_UNLIT}getMaterialType(){return xS}extendParams(e,t,i){const s=[];e.color=new Rh(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const l=o.baseColorFactor;e.color.fromArray(l),e.opacity=l[3]}o.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",o.baseColorTexture,3001))}return Promise.all(s)}}class Mme{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}}class Ime{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ry}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];if(l.clearcoatFactor!==void 0&&(t.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){const u=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new oc(u,u)}return Promise.all(o)}}class Rme{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ry}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.iridescenceFactor!==void 0&&(t.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(t.iridescenceIOR=l.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(o)}}class kme{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ry}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new Rh(0,0,0),t.sheenRoughness=0,t.sheen=1;const l=s.extensions[this.name];return l.sheenColorFactor!==void 0&&t.sheenColor.fromArray(l.sheenColorFactor),l.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&o.push(i.assignTexture(t,"sheenColorMap",l.sheenColorTexture,3001)),l.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(o)}}class Ome{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ry}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.transmissionFactor!==void 0&&(t.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&o.push(i.assignTexture(t,"transmissionMap",l.transmissionTexture)),Promise.all(o)}}class Lme{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ry}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];t.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&o.push(i.assignTexture(t,"thicknessMap",l.thicknessTexture)),t.attenuationDistance=l.attenuationDistance||1/0;const u=l.attenuationColor||[1,1,1];return t.attenuationColor=new Rh(u[0],u[1],u[2]),Promise.all(o)}}class Dme{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ry}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class Nme{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ry}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];t.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&o.push(i.assignTexture(t,"specularIntensityMap",l.specularTexture));const u=l.specularColorFactor||[1,1,1];return t.specularColor=new Rh(u[0],u[1],u[2]),l.specularColorTexture!==void 0&&o.push(i.assignTexture(t,"specularColorMap",l.specularColorTexture,3001)),Promise.all(o)}}class Bme{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ry}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.anisotropyStrength!==void 0&&(t.anisotropy=l.anisotropyStrength),l.anisotropyRotation!==void 0&&(t.anisotropyRotation=l.anisotropyRotation),l.anisotropyTexture!==void 0&&o.push(i.assignTexture(t,"anisotropyMap",l.anisotropyTexture)),Promise.all(o)}}class Pme{constructor(e){this.parser=e,this.name=Gs.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const o=s.extensions[this.name],l=t.options.ktx2Loader;if(!l){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,l)}}class Fme{constructor(e){this.parser=e,this.name=Gs.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,o=s.textures[e];if(!o.extensions||!o.extensions[t])return null;const l=o.extensions[t],u=s.images[l.source];let d=i.textureLoader;if(u.uri){const p=i.options.manager.getHandler(u.uri);p!==null&&(d=p)}return this.detectSupport().then(function(p){if(p)return i.loadTextureImage(e,l.source,d);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Ume{constructor(e){this.parser=e,this.name=Gs.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,o=s.textures[e];if(!o.extensions||!o.extensions[t])return null;const l=o.extensions[t],u=s.images[l.source];let d=i.textureLoader;if(u.uri){const p=i.options.manager.getHandler(u.uri);p!==null&&(d=p)}return this.detectSupport().then(function(p){if(p)return i.loadTextureImage(e,l.source,d);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class zme{constructor(e){this.name=Gs.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],o=this.parser.getDependency("buffer",s.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(u){const d=s.byteOffset||0,p=s.byteLength||0,_=s.count,y=s.byteStride,b=new Uint8Array(u,d,p);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(_,y,b,s.mode,s.filter).then(function(E){return E.buffer}):l.ready.then(function(){const E=new ArrayBuffer(_*y);return l.decodeGltfBuffer(new Uint8Array(E),_,y,b,s.mode,s.filter),E})})}else return null}}class Hme{constructor(e){this.name=Gs.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=t.meshes[i.mesh];for(const p of s.primitives)if(p.mode!==tg.TRIANGLES&&p.mode!==tg.TRIANGLE_STRIP&&p.mode!==tg.TRIANGLE_FAN&&p.mode!==void 0)return null;const l=i.extensions[this.name].attributes,u=[],d={};for(const p in l)u.push(this.parser.getDependency("accessor",l[p]).then(_=>(d[p]=_,d[p])));return u.length<1?null:(u.push(this.parser.createNodeMesh(e)),Promise.all(u).then(p=>{const _=p.pop(),y=_.isGroup?_.children:[_],b=p[0].count,E=[];for(const C of y){const A=new Ws,I=new Dt,L=new yl,O=new Dt(1,1,1),P=new gne(C.geometry,C.material,b);for(let N=0;N<b;N++)d.TRANSLATION&&I.fromBufferAttribute(d.TRANSLATION,N),d.ROTATION&&L.fromBufferAttribute(d.ROTATION,N),d.SCALE&&O.fromBufferAttribute(d.SCALE,N),P.setMatrixAt(N,A.compose(I,L,O));for(const N in d)N!=="TRANSLATION"&&N!=="ROTATION"&&N!=="SCALE"&&C.geometry.setAttribute(N,d[N]);lh.prototype.copy.call(P,C),this.parser.assignFinalMaterial(P),E.push(P)}return _.isGroup?(_.clear(),_.add(...E),_):E[0]}))}}const a7="glTF",wx=12,I4={JSON:1313821514,BIN:5130562};class Gme{constructor(e){this.name=Gs.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,wx);if(this.header={magic:l1.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==a7)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-wx,s=new DataView(e,wx);let o=0;for(;o<i;){const l=s.getUint32(o,!0);o+=4;const u=s.getUint32(o,!0);if(o+=4,u===I4.JSON){const d=new Uint8Array(e,wx+o,l);this.content=l1.decodeText(d)}else if(u===I4.BIN){const d=wx+o;this.body=e.slice(d,d+l)}o+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Wme{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Gs.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,o=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,u={},d={},p={};for(const _ in l){const y=SD[_]||_.toLowerCase();u[y]=l[_]}for(const _ in e.attributes){const y=SD[_]||_.toLowerCase();if(l[_]!==void 0){const b=i.accessors[e.attributes[_]],E=US[b.componentType];p[y]=E.name,d[y]=b.normalized===!0}}return t.getDependency("bufferView",o).then(function(_){return new Promise(function(y){s.decodeDracoFile(_,function(b){for(const E in b.attributes){const C=b.attributes[E],A=d[E];A!==void 0&&(C.normalized=A)}y(b)},u,p)})})}}class Vme{constructor(){this.name=Gs.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class jme{constructor(){this.name=Gs.KHR_MESH_QUANTIZATION}}class l7 extends x${constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s*3+s;for(let l=0;l!==s;l++)t[l]=i[o+l];return t}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=u*2,p=u*3,_=s-t,y=(i-t)/_,b=y*y,E=b*y,C=e*p,A=C-p,I=-2*E+3*b,L=E-b,O=1-I,P=L-b+y;for(let N=0;N!==u;N++){const z=l[A+N+u],W=l[A+N+d]*_,H=l[C+N+u],U=l[C+N]*_;o[N]=O*z+P*W+I*H+L*U}return o}}const Xme=new yl;class Yme extends l7{interpolate_(e,t,i,s){const o=super.interpolate_(e,t,i,s);return Xme.fromArray(o).normalize().toArray(o),o}}const tg={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},US={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},R4={9728:Fw,9729:EB,9984:pte,9985:mte,9986:fte,9987:xB},k4={33071:Xx,33648:ZL,10497:Pw},H2={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},SD={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...wme>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Pv={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Kme={CUBICSPLINE:void 0,LINEAR:qS,STEP:Uw},G2={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Jme(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new LB({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:KM})),n.DefaultMaterial}function bb(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Zv(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function qme(n,e,t){let i=!1,s=!1,o=!1;for(let p=0,_=e.length;p<_;p++){const y=e[p];if(y.POSITION!==void 0&&(i=!0),y.NORMAL!==void 0&&(s=!0),y.COLOR_0!==void 0&&(o=!0),i&&s&&o)break}if(!i&&!s&&!o)return Promise.resolve(n);const l=[],u=[],d=[];for(let p=0,_=e.length;p<_;p++){const y=e[p];if(i){const b=y.POSITION!==void 0?t.getDependency("accessor",y.POSITION):n.attributes.position;l.push(b)}if(s){const b=y.NORMAL!==void 0?t.getDependency("accessor",y.NORMAL):n.attributes.normal;u.push(b)}if(o){const b=y.COLOR_0!==void 0?t.getDependency("accessor",y.COLOR_0):n.attributes.color;d.push(b)}}return Promise.all([Promise.all(l),Promise.all(u),Promise.all(d)]).then(function(p){const _=p[0],y=p[1],b=p[2];return i&&(n.morphAttributes.position=_),s&&(n.morphAttributes.normal=y),o&&(n.morphAttributes.color=b),n.morphTargetsRelative=!0,n})}function Qme(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Zme(n){let e;const t=n.extensions&&n.extensions[Gs.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+W2(t.attributes):e=n.indices+":"+W2(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,s=n.targets.length;i<s;i++)e+=":"+W2(n.targets[i]);return e}function W2(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function ED(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function ege(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const tge=new Ws;class nge{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new $me,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,o=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||s&&o<98?this.textureLoader=new One(this.options.manager):this.textureLoader=new Une(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new JM(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(l){const u={scene:l[0][s.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:s.asset,parser:i,userData:{}};bb(o,u,s),Zv(u,s),Promise.all(i._invokeAll(function(d){return d.afterRoot&&d.afterRoot(u)})).then(function(){e(u)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,o=t.length;s<o;s++){const l=t[s].joints;for(let u=0,d=l.length;u<d;u++)e[l[u]].isBone=!0}for(let s=0,o=e.length;s<o;s++){const l=e[s];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(i[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),o=(l,u)=>{const d=this.associations.get(l);d!=null&&this.associations.set(u,d);for(const[p,_]of l.children.entries())o(_,u.children[p])};return o(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const o=e(t[s]);o&&i.push(o)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":s=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(o,l){return i.getDependency(e,l)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Gs.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(o,l){i.load(l1.resolveURL(t.uri,s.path),o,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,o=t.byteOffset||0;return i.slice(o,o+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const l=H2[s.type],u=US[s.componentType],d=s.normalized===!0,p=new u(s.count*l);return Promise.resolve(new Cm(p,l,d))}const o=[];return s.bufferView!==void 0?o.push(this.getDependency("bufferView",s.bufferView)):o.push(null),s.sparse!==void 0&&(o.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(o).then(function(l){const u=l[0],d=H2[s.type],p=US[s.componentType],_=p.BYTES_PER_ELEMENT,y=_*d,b=s.byteOffset||0,E=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,C=s.normalized===!0;let A,I;if(E&&E!==y){const L=Math.floor(b/E),O="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+L+":"+s.count;let P=t.cache.get(O);P||(A=new p(u,L*E,s.count*E/_),P=new hne(A,E/_),t.cache.add(O,P)),I=new RB(P,d,b%E/_,C)}else u===null?A=new p(s.count*d):A=new p(u,b,s.count*d),I=new Cm(A,d,C);if(s.sparse!==void 0){const L=H2.SCALAR,O=US[s.sparse.indices.componentType],P=s.sparse.indices.byteOffset||0,N=s.sparse.values.byteOffset||0,z=new O(l[1],P,s.sparse.count*L),W=new p(l[2],N,s.sparse.count*d);u!==null&&(I=new Cm(I.array.slice(),I.itemSize,I.normalized));for(let H=0,U=z.length;H<U;H++){const Q=z[H];if(I.setX(Q,W[H*d]),d>=2&&I.setY(Q,W[H*d+1]),d>=3&&I.setZ(Q,W[H*d+2]),d>=4&&I.setW(Q,W[H*d+3]),d>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return I})}loadTexture(e){const t=this.json,i=this.options,o=t.textures[e].source,l=t.images[o];let u=this.textureLoader;if(l.uri){const d=i.manager.getHandler(l.uri);d!==null&&(u=d)}return this.loadTextureImage(e,o,u)}loadTextureImage(e,t,i){const s=this,o=this.json,l=o.textures[e],u=o.images[t],d=(u.uri||u.bufferView)+":"+l.sampler;if(this.textureCache[d])return this.textureCache[d];const p=this.loadImageSource(t,i).then(function(_){_.flipY=!1,_.name=l.name||u.name||"",_.name===""&&typeof u.uri=="string"&&u.uri.startsWith("data:image/")===!1&&(_.name=u.uri);const b=(o.samplers||{})[l.sampler]||{};return _.magFilter=R4[b.magFilter]||EB,_.minFilter=R4[b.minFilter]||xB,_.wrapS=k4[b.wrapS]||Pw,_.wrapT=k4[b.wrapT]||Pw,s.associations.set(_,{textures:e}),_}).catch(function(){return null});return this.textureCache[d]=p,p}loadImageSource(e,t){const i=this,s=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(y=>y.clone());const l=s.images[e],u=self.URL||self.webkitURL;let d=l.uri||"",p=!1;if(l.bufferView!==void 0)d=i.getDependency("bufferView",l.bufferView).then(function(y){p=!0;const b=new Blob([y],{type:l.mimeType});return d=u.createObjectURL(b),d});else if(l.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const _=Promise.resolve(d).then(function(y){return new Promise(function(b,E){let C=b;t.isImageBitmapLoader===!0&&(C=function(A){const I=new $m(A);I.needsUpdate=!0,b(I)}),t.load(l1.resolveURL(y,o.path),C,void 0,E)})}).then(function(y){return p===!0&&u.revokeObjectURL(d),y.userData.mimeType=l.mimeType||ege(l.uri),y}).catch(function(y){throw console.error("THREE.GLTFLoader: Couldn't load texture",d),y});return this.sourceCache[e]=_,_}assignTexture(e,t,i,s){const o=this;return this.getDependency("texture",i.index).then(function(l){if(!l)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(l=l.clone(),l.channel=i.texCoord),o.extensions[Gs.KHR_TEXTURE_TRANSFORM]){const u=i.extensions!==void 0?i.extensions[Gs.KHR_TEXTURE_TRANSFORM]:void 0;if(u){const d=o.associations.get(l);l=o.extensions[Gs.KHR_TEXTURE_TRANSFORM].extendTexture(l,u),o.associations.set(l,d)}}return s!==void 0&&("colorSpace"in l?l.colorSpace=s===3001?"srgb":"srgb-linear":l.encoding=s),e[t]=l,l})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,l=t.attributes.normal===void 0;if(e.isPoints){const u="PointsMaterial:"+i.uuid;let d=this.cache.get(u);d||(d=new c8,my.prototype.copy.call(d,i),d.color.copy(i.color),d.map=i.map,d.sizeAttenuation=!1,this.cache.add(u,d)),i=d}else if(e.isLine){const u="LineBasicMaterial:"+i.uuid;let d=this.cache.get(u);d||(d=new u8,my.prototype.copy.call(d,i),d.color.copy(i.color),d.map=i.map,this.cache.add(u,d)),i=d}if(s||o||l){let u="ClonedMaterial:"+i.uuid+":";s&&(u+="derivative-tangents:"),o&&(u+="vertex-colors:"),l&&(u+="flat-shading:");let d=this.cache.get(u);d||(d=i.clone(),o&&(d.vertexColors=!0),l&&(d.flatShading=!0),s&&(d.normalScale&&(d.normalScale.y*=-1),d.clearcoatNormalScale&&(d.clearcoatNormalScale.y*=-1)),this.cache.add(u,d),this.associations.set(d,this.associations.get(i))),i=d}e.material=i}getMaterialType(){return LB}loadMaterial(e){const t=this,i=this.json,s=this.extensions,o=i.materials[e];let l;const u={},d=o.extensions||{},p=[];if(d[Gs.KHR_MATERIALS_UNLIT]){const y=s[Gs.KHR_MATERIALS_UNLIT];l=y.getMaterialType(),p.push(y.extendParams(u,o,t))}else{const y=o.pbrMetallicRoughness||{};if(u.color=new Rh(1,1,1),u.opacity=1,Array.isArray(y.baseColorFactor)){const b=y.baseColorFactor;u.color.fromArray(b),u.opacity=b[3]}y.baseColorTexture!==void 0&&p.push(t.assignTexture(u,"map",y.baseColorTexture,3001)),u.metalness=y.metallicFactor!==void 0?y.metallicFactor:1,u.roughness=y.roughnessFactor!==void 0?y.roughnessFactor:1,y.metallicRoughnessTexture!==void 0&&(p.push(t.assignTexture(u,"metalnessMap",y.metallicRoughnessTexture)),p.push(t.assignTexture(u,"roughnessMap",y.metallicRoughnessTexture))),l=this._invokeOne(function(b){return b.getMaterialType&&b.getMaterialType(e)}),p.push(Promise.all(this._invokeAll(function(b){return b.extendMaterialParams&&b.extendMaterialParams(e,u)})))}o.doubleSided===!0&&(u.side=cte);const _=o.alphaMode||G2.OPAQUE;if(_===G2.BLEND?(u.transparent=!0,u.depthWrite=!1):(u.transparent=!1,_===G2.MASK&&(u.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&l!==xS&&(p.push(t.assignTexture(u,"normalMap",o.normalTexture)),u.normalScale=new oc(1,1),o.normalTexture.scale!==void 0)){const y=o.normalTexture.scale;u.normalScale.set(y,y)}return o.occlusionTexture!==void 0&&l!==xS&&(p.push(t.assignTexture(u,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(u.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&l!==xS&&(u.emissive=new Rh().fromArray(o.emissiveFactor)),o.emissiveTexture!==void 0&&l!==xS&&p.push(t.assignTexture(u,"emissiveMap",o.emissiveTexture,3001)),Promise.all(p).then(function(){const y=new l(u);return o.name&&(y.name=o.name),Zv(y,o),t.associations.set(y,{materials:e}),o.extensions&&bb(s,y,o),y})}createUniqueName(e){const t=$a.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function o(u){return i[Gs.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(u,t).then(function(d){return O4(d,u,t)})}const l=[];for(let u=0,d=e.length;u<d;u++){const p=e[u],_=Zme(p),y=s[_];if(y)l.push(y.promise);else{let b;p.extensions&&p.extensions[Gs.KHR_DRACO_MESH_COMPRESSION]?b=o(p):b=O4(new Iy,p,t),s[_]={primitive:p,promise:b},l.push(b)}}return Promise.all(l)}loadMesh(e){const t=this,i=this.json,s=this.extensions,o=i.meshes[e],l=o.primitives,u=[];for(let d=0,p=l.length;d<p;d++){const _=l[d].material===void 0?Jme(this.cache):this.getDependency("material",l[d].material);u.push(_)}return u.push(t.loadGeometries(l)),Promise.all(u).then(function(d){const p=d.slice(0,d.length-1),_=d[d.length-1],y=[];for(let E=0,C=_.length;E<C;E++){const A=_[E],I=l[E];let L;const O=p[E];if(I.mode===tg.TRIANGLES||I.mode===tg.TRIANGLE_STRIP||I.mode===tg.TRIANGLE_FAN||I.mode===void 0)L=o.isSkinnedMesh===!0?new pne(A,O):new VI(A,O),L.isSkinnedMesh===!0&&L.normalizeSkinWeights(),I.mode===tg.TRIANGLE_STRIP?L.geometry=M4(L.geometry,e8):I.mode===tg.TRIANGLE_FAN&&(L.geometry=M4(L.geometry,eD));else if(I.mode===tg.LINES)L=new _ne(A,O);else if(I.mode===tg.LINE_STRIP)L=new OB(A,O);else if(I.mode===tg.LINE_LOOP)L=new vne(A,O);else if(I.mode===tg.POINTS)L=new yne(A,O);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+I.mode);Object.keys(L.geometry.morphAttributes).length>0&&Qme(L,o),L.name=t.createUniqueName(o.name||"mesh_"+e),Zv(L,o),I.extensions&&bb(s,L,I),t.assignFinalMaterial(L),y.push(L)}for(let E=0,C=y.length;E<C;E++)t.associations.set(y[E],{meshes:e,primitives:E});if(y.length===1)return o.extensions&&bb(s,y[0],o),y[0];const b=new f2;o.extensions&&bb(s,b,o),t.associations.set(b,{meshes:e});for(let E=0,C=y.length;E<C;E++)b.add(y[E]);return b})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new IB(Ute.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new o8(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Zv(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,o=t.joints.length;s<o;s++)i.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const o=s.pop(),l=s,u=[],d=[];for(let p=0,_=l.length;p<_;p++){const y=l[p];if(y){u.push(y);const b=new Ws;o!==null&&b.fromArray(o.array,p*16),d.push(b)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[p])}return new kB(u,d)})}loadAnimation(e){const i=this.json.animations[e],s=i.name?i.name:"animation_"+e,o=[],l=[],u=[],d=[],p=[];for(let _=0,y=i.channels.length;_<y;_++){const b=i.channels[_],E=i.samplers[b.sampler],C=b.target,A=C.node,I=i.parameters!==void 0?i.parameters[E.input]:E.input,L=i.parameters!==void 0?i.parameters[E.output]:E.output;C.node!==void 0&&(o.push(this.getDependency("node",A)),l.push(this.getDependency("accessor",I)),u.push(this.getDependency("accessor",L)),d.push(E),p.push(C))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u),Promise.all(d),Promise.all(p)]).then(function(_){const y=_[0],b=_[1],E=_[2],C=_[3],A=_[4],I=[];for(let L=0,O=y.length;L<O;L++){const P=y[L],N=b[L],z=E[L],W=C[L],H=A[L];if(P===void 0)continue;P.updateMatrix();let U;switch(Pv[H.path]){case Pv.weights:U=Hw;break;case Pv.rotation:U=x1;break;case Pv.position:case Pv.scale:default:U=Gw;break}const Q=P.name?P.name:P.uuid,ne=W.interpolation!==void 0?Kme[W.interpolation]:qS,oe=[];Pv[H.path]===Pv.weights?P.traverse(function(ge){ge.morphTargetInfluences&&oe.push(ge.name?ge.name:ge.uuid)}):oe.push(Q);let le=z.array;if(z.normalized){const ge=ED(le.constructor),ce=new Float32Array(le.length);for(let pe=0,Te=le.length;pe<Te;pe++)ce[pe]=le[pe]*ge;le=ce}for(let ge=0,ce=oe.length;ge<ce;ge++){const pe=new U(oe[ge]+"."+Pv[H.path],N.array,le,ne);W.interpolation==="CUBICSPLINE"&&(pe.createInterpolant=function(Oe){const J=this instanceof x1?Yme:l7;return new J(this.times,this.values,this.getValueSize()/3,Oe)},pe.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),I.push(pe)}}return new $ne(s,void 0,I)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(o){const l=i._getNodeRef(i.meshCache,s.mesh,o);return s.weights!==void 0&&l.traverse(function(u){if(u.isMesh)for(let d=0,p=s.weights.length;d<p;d++)u.morphTargetInfluences[d]=s.weights[d]}),l})}loadNode(e){const t=this.json,i=this,s=t.nodes[e],o=i._loadNodeShallow(e),l=[],u=s.children||[];for(let p=0,_=u.length;p<_;p++)l.push(i.getDependency("node",u[p]));const d=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([o,Promise.all(l),d]).then(function(p){const _=p[0],y=p[1],b=p[2];b!==null&&_.traverse(function(E){E.isSkinnedMesh&&E.bind(b,tge)});for(let E=0,C=y.length;E<C;E++)_.add(y[E]);return _})}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const o=t.nodes[e],l=o.name?s.createUniqueName(o.name):"",u=[],d=s._invokeOne(function(p){return p.createNodeMesh&&p.createNodeMesh(e)});return d&&u.push(d),o.camera!==void 0&&u.push(s.getDependency("camera",o.camera).then(function(p){return s._getNodeRef(s.cameraCache,o.camera,p)})),s._invokeAll(function(p){return p.createNodeAttachment&&p.createNodeAttachment(e)}).forEach(function(p){u.push(p)}),this.nodeCache[e]=Promise.all(u).then(function(p){let _;if(o.isBone===!0?_=new a8:p.length>1?_=new f2:p.length===1?_=p[0]:_=new lh,_!==p[0])for(let y=0,b=p.length;y<b;y++)_.add(p[y]);if(o.name&&(_.userData.name=o.name,_.name=l),Zv(_,o),o.extensions&&bb(i,_,o),o.matrix!==void 0){const y=new Ws;y.fromArray(o.matrix),_.applyMatrix4(y)}else o.translation!==void 0&&_.position.fromArray(o.translation),o.rotation!==void 0&&_.quaternion.fromArray(o.rotation),o.scale!==void 0&&_.scale.fromArray(o.scale);return s.associations.has(_)||s.associations.set(_,{}),s.associations.get(_).nodes=e,_}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,o=new f2;i.name&&(o.name=s.createUniqueName(i.name)),Zv(o,i),i.extensions&&bb(t,o,i);const l=i.nodes||[],u=[];for(let d=0,p=l.length;d<p;d++)u.push(s.getDependency("node",l[d]));return Promise.all(u).then(function(d){for(let _=0,y=d.length;_<y;_++)o.add(d[_]);const p=_=>{const y=new Map;for(const[b,E]of s.associations)(b instanceof my||b instanceof $m)&&y.set(b,E);return _.traverse(b=>{const E=s.associations.get(b);E!=null&&y.set(b,E)}),y};return s.associations=p(o),o})}}function rge(n,e,t){const i=e.attributes,s=new lv;if(i.POSITION!==void 0){const u=t.json.accessors[i.POSITION],d=u.min,p=u.max;if(d!==void 0&&p!==void 0){if(s.set(new Dt(d[0],d[1],d[2]),new Dt(p[0],p[1],p[2])),u.normalized){const _=ED(US[u.componentType]);s.min.multiplyScalar(_),s.max.multiplyScalar(_)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=e.targets;if(o!==void 0){const u=new Dt,d=new Dt;for(let p=0,_=o.length;p<_;p++){const y=o[p];if(y.POSITION!==void 0){const b=t.json.accessors[y.POSITION],E=b.min,C=b.max;if(E!==void 0&&C!==void 0){if(d.setX(Math.max(Math.abs(E[0]),Math.abs(C[0]))),d.setY(Math.max(Math.abs(E[1]),Math.abs(C[1]))),d.setZ(Math.max(Math.abs(E[2]),Math.abs(C[2]))),b.normalized){const A=ED(US[b.componentType]);d.multiplyScalar(A)}u.max(d)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(u)}n.boundingBox=s;const l=new r_;s.getCenter(l.center),l.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=l}function O4(n,e,t){const i=e.attributes,s=[];function o(l,u){return t.getDependency("accessor",l).then(function(d){n.setAttribute(u,d)})}for(const l in i){const u=SD[l]||l.toLowerCase();u in n.attributes||s.push(o(i[l],u))}if(e.indices!==void 0&&!n.index){const l=t.getDependency("accessor",e.indices).then(function(u){n.setIndex(u)});s.push(l)}return Zv(n,e),rge(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?qme(n,e.targets,t):n})}const V2=new WeakMap;class ige extends N1{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,s){const o=new JM(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,l=>{const u={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(l,u).then(t).catch(s)},i,s)}decodeDracoFile(e,t,i,s){const o={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,o).then(t)}decodeGeometry(e,t){for(const d in t.attributeTypes){const p=t.attributeTypes[d];p.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[d]=p.name)}const i=JSON.stringify(t);if(V2.has(e)){const d=V2.get(e);if(d.key===i)return d.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const o=this.workerNextTaskID++,l=e.byteLength,u=this._getWorker(o,l).then(d=>(s=d,new Promise((p,_)=>{s._callbacks[o]={resolve:p,reject:_},s.postMessage({type:"decode",id:o,taskConfig:t,buffer:e},[e])}))).then(d=>this._createGeometry(d.geometry));return u.catch(()=>!0).then(()=>{s&&o&&this._releaseTask(s,o)}),V2.set(e,{key:i,promise:u}),u}_createGeometry(e){const t=new Iy;e.index&&t.setIndex(new Cm(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const s=e.attributes[i],o=s.name,l=s.array,u=s.itemSize;t.setAttribute(o,new Cm(l,u))}return t}_loadLibrary(e,t){const i=new JM(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((s,o)=>{i.load(e,s,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const s=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const o=sge.toString(),l=["/* draco decoder */",s,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(o){const l=o.data;switch(l.type){case"decode":s._callbacks[l.id].resolve(l);break;case"error":s._callbacks[l.id].reject(l);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+l.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,o){return s._taskLoad>o._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function sge(){let n,e;onmessage=function(l){const u=l.data;switch(u.type){case"init":n=u.decoderConfig,e=new Promise(function(_){n.onModuleLoaded=function(y){_({draco:y})},DracoDecoderModule(n)});break;case"decode":const d=u.buffer,p=u.taskConfig;e.then(_=>{const y=_.draco,b=new y.Decoder,E=new y.DecoderBuffer;E.Init(new Int8Array(d),d.byteLength);try{const C=t(y,b,E,p),A=C.attributes.map(I=>I.array.buffer);C.index&&A.push(C.index.array.buffer),self.postMessage({type:"decode",id:u.id,geometry:C},A)}catch(C){console.error(C),self.postMessage({type:"error",id:u.id,error:C.message})}finally{y.destroy(E),y.destroy(b)}});break}};function t(l,u,d,p){const _=p.attributeIDs,y=p.attributeTypes;let b,E;const C=u.GetEncodedGeometryType(d);if(C===l.TRIANGULAR_MESH)b=new l.Mesh,E=u.DecodeBufferToMesh(d,b);else if(C===l.POINT_CLOUD)b=new l.PointCloud,E=u.DecodeBufferToPointCloud(d,b);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!E.ok()||b.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+E.error_msg());const A={index:null,attributes:[]};for(const I in _){const L=self[y[I]];let O,P;if(p.useUniqueIDs)P=_[I],O=u.GetAttributeByUniqueId(b,P);else{if(P=u.GetAttributeId(b,l[_[I]]),P===-1)continue;O=u.GetAttribute(b,P)}A.attributes.push(s(l,u,b,I,L,O))}return C===l.TRIANGULAR_MESH&&(A.index=i(l,u,b)),l.destroy(b),A}function i(l,u,d){const _=d.num_faces()*3,y=_*4,b=l._malloc(y);u.GetTrianglesUInt32Array(d,y,b);const E=new Uint32Array(l.HEAPF32.buffer,b,_).slice();return l._free(b),{array:E,itemSize:1}}function s(l,u,d,p,_,y){const b=y.num_components(),C=d.num_points()*b,A=C*_.BYTES_PER_ELEMENT,I=o(l,_),L=l._malloc(A);u.GetAttributeDataArrayForAllPoints(d,y,I,A,L);const O=new _(l.HEAPF32.buffer,L,C).slice();return l._free(L),{name:p,array:O,itemSize:b}}function o(l,u){switch(u){case Float32Array:return l.DT_FLOAT32;case Int8Array:return l.DT_INT8;case Int16Array:return l.DT_INT16;case Int32Array:return l.DT_INT32;case Uint8Array:return l.DT_UINT8;case Uint16Array:return l.DT_UINT16;case Uint32Array:return l.DT_UINT32}}}let FC;const j2=()=>{if(FC)return FC;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=n;WebAssembly.validate(t)&&(s=e);let o;const l=WebAssembly.instantiate(u(s),{}).then(y=>{o=y.instance,o.exports.__wasm_call_ctors()});function u(y){const b=new Uint8Array(y.length);for(let C=0;C<y.length;++C){const A=y.charCodeAt(C);b[C]=A>96?A-71:A>64?A-65:A>47?A+4:A>46?63:62}let E=0;for(let C=0;C<y.length;++C)b[E++]=b[C]<60?i[b[C]]:(b[C]-60)*64+b[++C];return b.buffer.slice(0,E)}function d(y,b,E,C,A,I){const L=o.exports.sbrk,O=E+3&-4,P=L(O*C),N=L(A.length),z=new Uint8Array(o.exports.memory.buffer);z.set(A,N);const W=y(P,E,C,N,A.length);if(W===0&&I&&I(P,O,C),b.set(z.subarray(P,P+E*C)),L(P-L(0)),W!==0)throw new Error(`Malformed buffer data: ${W}`)}const p={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},_={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return FC={ready:l,supported:!0,decodeVertexBuffer(y,b,E,C,A){d(o.exports.meshopt_decodeVertexBuffer,y,b,E,C,o.exports[p[A]])},decodeIndexBuffer(y,b,E,C){d(o.exports.meshopt_decodeIndexBuffer,y,b,E,C)},decodeIndexSequence(y,b,E,C){d(o.exports.meshopt_decodeIndexSequence,y,b,E,C)},decodeGltfBuffer(y,b,E,C,A,I){d(o.exports[_[A]],y,b,E,C,o.exports[p[I]])}},FC};let UC=null,u7="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function c7(n,e,t){return i=>{t&&t(i),n&&(UC||(UC=new ige),UC.setDecoderPath(typeof n=="string"?n:u7),i.setDRACOLoader(UC)),e&&i.setMeshoptDecoder(typeof j2=="function"?j2():j2)}}function Ur(n,e=!0,t=!0,i){return k$(TP,n,c7(e,t,i))}Ur.preload=(n,e=!0,t=!0,i)=>k$.preload(TP,n,c7(e,t,i));Ur.clear=n=>k$.clear(TP,n);Ur.setDecoderPath=n=>{u7=n};function oge(n){const{nodes:e}=Ur(J9);return[{type:"raw",geometry:e.BASE_FRONT_GRILL_1.geometry,material:e.BASE_FRONT_GRILL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(J9);const h7="/gpu-programming/assets/BASE_LEFT_COVER_1-DGxtL-mQ.glb";function age(n){const{nodes:e}=Ur(h7);return[{type:"raw",geometry:e.BASE_LEFT_COVER_1.geometry,material:e.BASE_LEFT_COVER_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(h7);const d7="/gpu-programming/assets/base_link-CxNG3VaF.glb";function lge(n){const{nodes:e}=Ur(d7);return[{type:"raw",geometry:e.base_link.geometry,material:e.base_link.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(d7);const p7="/gpu-programming/assets/BASE_RIGHT_COVER_1-hc0og1we.glb";function uge(n){const{nodes:e}=Ur(p7);return[{type:"raw",geometry:e.BASE_RIGHT_COVER_1.geometry,material:e.BASE_RIGHT_COVER_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(p7);const f7="/gpu-programming/assets/Battery_1-CK31T6T2.glb";function cge(n){const{nodes:e}=Ur(f7);return[{type:"raw",geometry:e.Battery_1.geometry,material:e.Battery_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(f7);const m7="/gpu-programming/assets/BODY_BASE_CONNECTOR_1-BGiepl-q.glb";function hge(n){const{nodes:e}=Ur(m7);return[{type:"raw",geometry:e.BODY_BASE_CONNECTOR_1.geometry,material:e.BODY_BASE_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(m7);const dge="/gpu-programming/assets/DRIVE_TRACK_LEFT_1-BU9fqrup.glb";Ur.preload(dge);const pge="/gpu-programming/assets/DRIVE_TRACK_RIGHT_1-inJUmdan.glb";Ur.preload(pge);const g7="/gpu-programming/assets/EYE_LENS_1-dEqRsnM7.glb";function fge(n){const{nodes:e}=Ur(g7);return[{type:"raw",geometry:e.EYE_LENS_1.geometry,material:e.EYE_LENS_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(g7);const _7="/gpu-programming/assets/FACE_1-m_5yRlpQ.glb";function mge(n){const{nodes:e}=Ur(_7);return[{type:"raw",geometry:e.FACE_1.geometry,material:e.FACE_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(_7);const v7="/gpu-programming/assets/FRONT_LEFT_WHEEL_1-CbTd7ucE.glb";function gge(n){const{nodes:e}=Ur(v7);return[{type:"raw",geometry:e.FRONT_LEFT_WHEEL_1.geometry,material:e.FRONT_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(v7);const y7="/gpu-programming/assets/FRONT_RIGHT_WHEEL_1-DndcS7IV.glb";function _ge(n){const{nodes:e}=Ur(y7);return[{type:"raw",geometry:e.FRONT_RIGHT_WHEEL_1.geometry,material:e.FRONT_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(y7);const b7="/gpu-programming/assets/HEAD_1-BuuEOSCL.glb";function vge(n){const{nodes:e}=Ur(b7);return[{type:"raw",geometry:e.HEAD_1.geometry,material:e.HEAD_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(b7);const T7="/gpu-programming/assets/HEAD_VENT_LEFT_1-DjAZtO3_.glb";function yge(n){const{nodes:e}=Ur(T7);return[{type:"raw",geometry:e.HEAD_VENT_LEFT_1.geometry,material:e.HEAD_VENT_LEFT_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(T7);const S7="/gpu-programming/assets/HEAD_VENT_RIGHT_1-BfOCx_V8.glb";function bge(n){const{nodes:e}=Ur(S7);return[{type:"raw",geometry:e.HEAD_VENT_RIGHT_1.geometry,material:e.HEAD_VENT_RIGHT_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(S7);const E7="/gpu-programming/assets/LEFT_ARM_1-B8yh6mwG.glb";function Tge(n){const{nodes:e}=Ur(E7);return[{type:"raw",geometry:e.LEFT_ARM_1.geometry,material:e.LEFT_ARM_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(E7);const x7="/gpu-programming/assets/LEFT_ARM_CONNECTOR_1-CXrHlUi5.glb";function Sge(n){const{nodes:e}=Ur(x7);return[{type:"raw",geometry:e.LEFT_ARM_CONNECTOR_1.geometry,material:e.LEFT_ARM_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(x7);const w7="/gpu-programming/assets/MIDDLE_LEFT_WHEEL_1-BAVTGYOT.glb";function Ege(n){const{nodes:e}=Ur(w7);return[{type:"raw",geometry:e.MIDDLE_LEFT_WHEEL_1.geometry,material:e.MIDDLE_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(w7);const $7="/gpu-programming/assets/MIDDLE_RIGHT_WHEEL_1-GMj8YSda.glb";function xge(n){const{nodes:e}=Ur($7);return[{type:"raw",geometry:e.MIDDLE_RIGHT_WHEEL_1.geometry,material:e.MIDDLE_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload($7);const C7="/gpu-programming/assets/NECK_GLOBE_BASE_1-CpAA3cya.glb";function wge(n){const{nodes:e}=Ur(C7);return[{type:"raw",geometry:e.NECK_GLOBE_BASE_1.geometry,material:e.NECK_GLOBE_BASE_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(C7);const A7="/gpu-programming/assets/REAR_LEFT_WHEEL_1-Ca-hbPaC.glb";function $ge(n){const{nodes:e}=Ur(A7);return[{type:"raw",geometry:e.REAR_LEFT_WHEEL_1.geometry,material:e.REAR_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(A7);const M7="/gpu-programming/assets/REAR_RIGHT_WHEEL_1-DLUpOsjA.glb";function Cge(n){const{nodes:e}=Ur(M7);return[{type:"raw",geometry:e.REAR_RIGHT_WHEEL_1.geometry,material:e.REAR_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(M7);const I7="/gpu-programming/assets/RIGHT_ARM_1-CsUyYnQa.glb";function Age(n){const{nodes:e}=Ur(I7);return[{type:"raw",geometry:e.RIGHT_ARM_1.geometry,material:e.RIGHT_ARM_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(I7);const R7="/gpu-programming/assets/RIGHT_ARM_CONNECTOR_1-Og6IFGgn.glb";function Mge(n){const{nodes:e}=Ur(R7);return[{type:"raw",geometry:e.RIGHT_ARM_CONNECTOR_1.geometry,material:e.RIGHT_ARM_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(R7);const k7="/gpu-programming/assets/Torso_1-Dsttb7Xv.glb";function Ige(n){const{nodes:e}=Ur(k7);return[{type:"raw",geometry:e.Torso_1.geometry,material:e.Torso_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(k7);const O7="/gpu-programming/assets/VISOR_GLASS_1-DUgs1YBX.glb";function Rge(n){const{nodes:e}=Ur(O7);return[{type:"raw",geometry:e.VISOR_GLASS_1.geometry,material:e.VISOR_GLASS_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Ur.preload(O7);const kge={"package://misty_description/meshes/BASE_FRONT_GRILL_1.stl":oge,"package://misty_description/meshes/BASE_LEFT_COVER_1.stl":age,"package://misty_description/meshes/base_link.stl":lge,"package://misty_description/meshes/BASE_RIGHT_COVER_1.stl":uge,"package://misty_description/meshes/Battery_1.stl":cge,"package://misty_description/meshes/BODY_BASE_CONNECTOR_1.stl":hge,"package://misty_description/meshes/EYE_LENS_1.stl":fge,"package://misty_description/meshes/FACE_1.stl":mge,"package://misty_description/meshes/FRONT_LEFT_WHEEL_1.stl":gge,"package://misty_description/meshes/FRONT_RIGHT_WHEEL_1.stl":_ge,"package://misty_description/meshes/HEAD_1.stl":vge,"package://misty_description/meshes/HEAD_VENT_LEFT_1.stl":yge,"package://misty_description/meshes/HEAD_VENT_RIGHT_1.stl":bge,"package://misty_description/meshes/LEFT_ARM_1.stl":Tge,"package://misty_description/meshes/LEFT_ARM_CONNECTOR_1.stl":Sge,"package://misty_description/meshes/MIDDLE_LEFT_WHEEL_1.stl":Ege,"package://misty_description/meshes/MIDDLE_RIGHT_WHEEL_1.stl":xge,"package://misty_description/meshes/NECK_GLOBE_BASE_1.stl":wge,"package://misty_description/meshes/REAR_LEFT_WHEEL_1.stl":$ge,"package://misty_description/meshes/REAR_RIGHT_WHEEL_1.stl":Cge,"package://misty_description/meshes/RIGHT_ARM_1.stl":Age,"package://misty_description/meshes/RIGHT_ARM_CONNECTOR_1.stl":Mge,"package://misty_description/meshes/Torso_1.stl":Ige,"package://misty_description/meshes/VISOR_GLASS_1.stl":Rge};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const kE="143",Fb={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ub={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},L7=0,xD=1,D7=2,Oge=3,N7=0,FR=1,mw=2,e1=3,e_=0,id=1,tf=2,B7=1,Lge=2,af=0,ev=1,hI=2,wD=3,$D=4,P7=5,Wb=100,F7=101,SP=102,CD=103,AD=104,U7=200,z7=201,H7=202,G7=203,UR=204,zR=205,W7=206,V7=207,j7=208,X7=209,Y7=210,K7=0,J7=1,q7=2,dI=3,Q7=4,Z7=5,ej=6,tj=7,O$=0,nj=1,rj=2,Qg=0,ij=1,sj=2,oj=3,EP=4,aj=5,HR=300,Sy=301,Ey=302,qw=303,Qw=304,OE=306,rE=1e3,ef=1001,Zw=1002,Gl=1003,pI=1004,Dge=1004,fI=1005,Nge=1005,Tl=1006,xP=1007,Bge=1007,P1=1008,Pge=1008,ep=1009,lj=1010,uj=1011,wP=1012,cj=1013,q_=1014,j0=1015,C1=1016,hj=1017,dj=1018,gy=1020,pj=1021,fj=1022,Pf=1023,mj=1024,gj=1025,_y=1026,xy=1027,_j=1028,vj=1029,yj=1030,bj=1031,Tj=1033,dM=33776,pM=33777,fM=33778,mM=33779,MD=35840,ID=35841,RD=35842,kD=35843,Sj=36196,OD=37492,LD=37496,DD=37808,ND=37809,BD=37810,PD=37811,FD=37812,UD=37813,zD=37814,HD=37815,GD=37816,WD=37817,VD=37818,jD=37819,XD=37820,YD=37821,KD=36492,Ej=2200,xj=2201,wj=2202,e$=2300,t$=2301,gM=2302,t1=2400,n1=2401,n$=2402,GR=2500,$P=2501,Fge=0,Uge=1,zge=2,_g=3e3,ps=3001,Oy=3200,iE=3201,F1=0,$j=1,Hge="",U0="srgb",oy="srgb-linear",Gge=0,_M=7680,Wge=7681,Vge=7682,jge=7683,Xge=34055,Yge=34056,Kge=5386,Jge=512,qge=513,Qge=514,Zge=515,e0e=516,t0e=517,n0e=518,Cj=519,r$=35044,h1=35048,r0e=35040,i0e=35045,s0e=35049,o0e=35041,a0e=35046,l0e=35050,u0e=35042,c0e="100",JD="300 es",mI=1035;class Bm{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const i=t.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const bp=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let L4=1234567;const d1=Math.PI/180,i$=180/Math.PI;function Mm(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(bp[n&255]+bp[n>>8&255]+bp[n>>16&255]+bp[n>>24&255]+"-"+bp[e&255]+bp[e>>8&255]+"-"+bp[e>>16&15|64]+bp[e>>24&255]+"-"+bp[t&63|128]+bp[t>>8&255]+"-"+bp[t>>16&255]+bp[t>>24&255]+bp[i&255]+bp[i>>8&255]+bp[i>>16&255]+bp[i>>24&255]).toLowerCase()}function ah(n,e,t){return Math.max(e,Math.min(t,n))}function CP(n,e){return(n%e+e)%e}function h0e(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function d0e(n,e,t){return n!==e?(t-n)/(e-n):0}function gw(n,e,t){return(1-t)*n+t*e}function p0e(n,e,t,i){return gw(n,e,1-Math.exp(-t*i))}function f0e(n,e=1){return e-Math.abs(CP(n,e*2)-e)}function m0e(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function g0e(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function _0e(n,e){return n+Math.floor(Math.random()*(e-n+1))}function v0e(n,e){return n+Math.random()*(e-n)}function y0e(n){return n*(.5-Math.random())}function b0e(n){n!==void 0&&(L4=n);let e=L4+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function T0e(n){return n*d1}function S0e(n){return n*i$}function qD(n){return(n&n-1)===0&&n!==0}function Aj(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function gI(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function E0e(n,e,t,i,s){const o=Math.cos,l=Math.sin,u=o(t/2),d=l(t/2),p=o((e+i)/2),_=l((e+i)/2),y=o((e-i)/2),b=l((e-i)/2),E=o((i-e)/2),C=l((i-e)/2);switch(s){case"XYX":n.set(u*_,d*y,d*b,u*p);break;case"YZY":n.set(d*b,u*_,d*y,u*p);break;case"ZXZ":n.set(d*y,d*b,u*_,u*p);break;case"XZX":n.set(u*_,d*C,d*E,u*p);break;case"YXY":n.set(d*E,u*_,d*C,u*p);break;case"ZYZ":n.set(d*C,d*E,u*_,u*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function x0e(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function w0e(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Mj=Object.freeze({__proto__:null,DEG2RAD:d1,RAD2DEG:i$,generateUUID:Mm,clamp:ah,euclideanModulo:CP,mapLinear:h0e,inverseLerp:d0e,lerp:gw,damp:p0e,pingpong:f0e,smoothstep:m0e,smootherstep:g0e,randInt:_0e,randFloat:v0e,randFloatSpread:y0e,seededRandom:b0e,degToRad:T0e,radToDeg:S0e,isPowerOfTwo:qD,ceilPowerOfTwo:Aj,floorPowerOfTwo:gI,setQuaternionFromProperEuler:E0e,normalize:w0e,denormalize:x0e});class Ht{constructor(e=0,t=0){Ht.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*i-l*s+e.x,this.y=o*s+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class nf{constructor(){nf.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,s,o,l,u,d,p){const _=this.elements;return _[0]=e,_[1]=s,_[2]=u,_[3]=t,_[4]=o,_[5]=d,_[6]=i,_[7]=l,_[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[3],d=i[6],p=i[1],_=i[4],y=i[7],b=i[2],E=i[5],C=i[8],A=s[0],I=s[3],L=s[6],O=s[1],P=s[4],N=s[7],z=s[2],W=s[5],H=s[8];return o[0]=l*A+u*O+d*z,o[3]=l*I+u*P+d*W,o[6]=l*L+u*N+d*H,o[1]=p*A+_*O+y*z,o[4]=p*I+_*P+y*W,o[7]=p*L+_*N+y*H,o[2]=b*A+E*O+C*z,o[5]=b*I+E*P+C*W,o[8]=b*L+E*N+C*H,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],d=e[6],p=e[7],_=e[8];return t*l*_-t*u*p-i*o*_+i*u*d+s*o*p-s*l*d}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],d=e[6],p=e[7],_=e[8],y=_*l-u*p,b=u*d-_*o,E=p*o-l*d,C=t*y+i*b+s*E;if(C===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/C;return e[0]=y*A,e[1]=(s*p-_*i)*A,e[2]=(u*i-s*l)*A,e[3]=b*A,e[4]=(_*t-s*d)*A,e[5]=(s*o-u*t)*A,e[6]=E*A,e[7]=(i*d-p*t)*A,e[8]=(l*t-i*o)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,o,l,u){const d=Math.cos(o),p=Math.sin(o);return this.set(i*d,i*p,-i*(d*l+p*u)+l+e,-s*p,s*d,-s*(-p*l+d*u)+u+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),s=this.elements,o=s[0],l=s[3],u=s[6],d=s[1],p=s[4],_=s[7];return s[0]=t*o+i*d,s[3]=t*l+i*p,s[6]=t*u+i*_,s[1]=-i*o+t*d,s[4]=-i*l+t*p,s[7]=-i*u+t*_,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function Ij(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}const $0e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function wS(n,e){return new $0e[n](e)}function s$(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function p1(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function vM(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const X2={[U0]:{[oy]:p1},[oy]:{[U0]:vM}},eg={legacyMode:!0,get workingColorSpace(){return oy},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(X2[e]&&X2[e][t]!==void 0){const i=X2[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},Rj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ed={r:0,g:0,b:0},Pg={h:0,s:0,l:0},zC={h:0,s:0,l:0};function Y2(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function HC(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class Nn{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=U0){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,eg.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=oy){return this.r=e,this.g=t,this.b=i,eg.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=oy){if(e=CP(e,1),t=ah(t,0,1),i=ah(i,0,1),t===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,l=2*i-o;this.r=Y2(l,o,e+1/3),this.g=Y2(l,o,e),this.b=Y2(l,o,e-1/3)}return eg.toWorkingColorSpace(this,s),this}setStyle(e,t=U0){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,eg.toWorkingColorSpace(this,t),i(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,eg.toWorkingColorSpace(this,t),i(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u)){const d=parseFloat(o[1])/360,p=parseInt(o[2],10)/100,_=parseInt(o[3],10)/100;return i(o[4]),this.setHSL(d,p,_,t)}break}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(l===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,eg.toWorkingColorSpace(this,t),this;if(l===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,eg.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=U0){const i=Rj[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=p1(e.r),this.g=p1(e.g),this.b=p1(e.b),this}copyLinearToSRGB(e){return this.r=vM(e.r),this.g=vM(e.g),this.b=vM(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=U0){return eg.fromWorkingColorSpace(HC(this,ed),e),ah(ed.r*255,0,255)<<16^ah(ed.g*255,0,255)<<8^ah(ed.b*255,0,255)<<0}getHexString(e=U0){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=oy){eg.fromWorkingColorSpace(HC(this,ed),t);const i=ed.r,s=ed.g,o=ed.b,l=Math.max(i,s,o),u=Math.min(i,s,o);let d,p;const _=(u+l)/2;if(u===l)d=0,p=0;else{const y=l-u;switch(p=_<=.5?y/(l+u):y/(2-l-u),l){case i:d=(s-o)/y+(s<o?6:0);break;case s:d=(o-i)/y+2;break;case o:d=(i-s)/y+4;break}d/=6}return e.h=d,e.s=p,e.l=_,e}getRGB(e,t=oy){return eg.fromWorkingColorSpace(HC(this,ed),t),e.r=ed.r,e.g=ed.g,e.b=ed.b,e}getStyle(e=U0){return eg.fromWorkingColorSpace(HC(this,ed),e),e!==U0?`color(${e} ${ed.r} ${ed.g} ${ed.b})`:`rgb(${ed.r*255|0},${ed.g*255|0},${ed.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(Pg),Pg.h+=e,Pg.s+=t,Pg.l+=i,this.setHSL(Pg.h,Pg.s,Pg.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Pg),e.getHSL(zC);const i=gw(Pg.h,zC.h,t),s=gw(Pg.s,zC.s,t),o=gw(Pg.l,zC.l,t);return this.setHSL(i,s,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Nn.NAMES=Rj;let HT;class AP{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{HT===void 0&&(HT=s$("canvas")),HT.width=e.width,HT.height=e.height;const i=HT.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=HT}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=s$("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),o=s.data;for(let l=0;l<o.length;l++)o[l]=p1(o[l]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(p1(t[i]/255)*255):t[i]=p1(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class r1{constructor(e=null){this.isSource=!0,this.uuid=Mm(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?o.push(K2(s[l].image)):o.push(K2(s[l]))}else o=K2(s);i.url=o}return t||(e.images[this.uuid]=i),i}}function K2(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?AP.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let C0e=0;class lc extends Bm{constructor(e=lc.DEFAULT_IMAGE,t=lc.DEFAULT_MAPPING,i=ef,s=ef,o=Tl,l=P1,u=Pf,d=ep,p=1,_=_g){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:C0e++}),this.uuid=Mm(),this.name="",this.source=new r1(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=p,this.format=u,this.internalFormat=null,this.type=d,this.offset=new Ht(0,0),this.repeat=new Ht(1,1),this.center=new Ht(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new nf,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=_,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==HR)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case rE:e.x=e.x-Math.floor(e.x);break;case ef:e.x=e.x<0?0:1;break;case Zw:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case rE:e.y=e.y-Math.floor(e.y);break;case ef:e.y=e.y<0?0:1;break;case Zw:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}lc.DEFAULT_IMAGE=null;lc.DEFAULT_MAPPING=HR;class ys{constructor(e=0,t=0,i=0,s=1){ys.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*s+l[12]*o,this.y=l[1]*t+l[5]*i+l[9]*s+l[13]*o,this.z=l[2]*t+l[6]*i+l[10]*s+l[14]*o,this.w=l[3]*t+l[7]*i+l[11]*s+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,o;const l=e.elements,u=l[0],d=l[4],p=l[8],_=l[1],y=l[5],b=l[9],E=l[2],C=l[6],A=l[10];if(Math.abs(d-_)<.01&&Math.abs(p-E)<.01&&Math.abs(b-C)<.01){if(Math.abs(d+_)<.1&&Math.abs(p+E)<.1&&Math.abs(b+C)<.1&&Math.abs(u+y+A-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const L=(u+1)/2,O=(y+1)/2,P=(A+1)/2,N=(d+_)/4,z=(p+E)/4,W=(b+C)/4;return L>O&&L>P?L<.01?(i=0,s=.707106781,o=.707106781):(i=Math.sqrt(L),s=N/i,o=z/i):O>P?O<.01?(i=.707106781,s=0,o=.707106781):(s=Math.sqrt(O),i=N/s,o=W/s):P<.01?(i=.707106781,s=.707106781,o=0):(o=Math.sqrt(P),i=z/o,s=W/o),this.set(i,s,o,t),this}let I=Math.sqrt((C-b)*(C-b)+(p-E)*(p-E)+(_-d)*(_-d));return Math.abs(I)<.001&&(I=1),this.x=(C-b)/I,this.y=(p-E)/I,this.z=(_-d)/I,this.w=Math.acos((u+y+A-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Rc extends Bm{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ys(0,0,e,t),this.scissorTest=!1,this.viewport=new ys(0,0,e,t);const s={width:e,height:t,depth:1};this.texture=new lc(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Tl,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new r1(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class L$ extends lc{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=Gl,this.minFilter=Gl,this.wrapR=ef,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class A0e extends Rc{constructor(e,t,i){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new L$(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class WR extends lc{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=Gl,this.minFilter=Gl,this.wrapR=ef,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class M0e extends Rc{constructor(e,t,i){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new WR(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class I0e extends Rc{constructor(e,t,i,s={}){super(e,t,s),this.isWebGLMultipleRenderTargets=!0;const o=this.texture;this.texture=[];for(let l=0;l<i;l++)this.texture[l]=o.clone(),this.texture[l].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,o=this.texture.length;s<o;s++)this.texture[s].image.width=e,this.texture[s].image.height=t,this.texture[s].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class bl{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,o,l,u){let d=i[s+0],p=i[s+1],_=i[s+2],y=i[s+3];const b=o[l+0],E=o[l+1],C=o[l+2],A=o[l+3];if(u===0){e[t+0]=d,e[t+1]=p,e[t+2]=_,e[t+3]=y;return}if(u===1){e[t+0]=b,e[t+1]=E,e[t+2]=C,e[t+3]=A;return}if(y!==A||d!==b||p!==E||_!==C){let I=1-u;const L=d*b+p*E+_*C+y*A,O=L>=0?1:-1,P=1-L*L;if(P>Number.EPSILON){const z=Math.sqrt(P),W=Math.atan2(z,L*O);I=Math.sin(I*W)/z,u=Math.sin(u*W)/z}const N=u*O;if(d=d*I+b*N,p=p*I+E*N,_=_*I+C*N,y=y*I+A*N,I===1-u){const z=1/Math.sqrt(d*d+p*p+_*_+y*y);d*=z,p*=z,_*=z,y*=z}}e[t]=d,e[t+1]=p,e[t+2]=_,e[t+3]=y}static multiplyQuaternionsFlat(e,t,i,s,o,l){const u=i[s],d=i[s+1],p=i[s+2],_=i[s+3],y=o[l],b=o[l+1],E=o[l+2],C=o[l+3];return e[t]=u*C+_*y+d*E-p*b,e[t+1]=d*C+_*b+p*y-u*E,e[t+2]=p*C+_*E+u*b-d*y,e[t+3]=_*C-u*y-d*b-p*E,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,s=e._y,o=e._z,l=e._order,u=Math.cos,d=Math.sin,p=u(i/2),_=u(s/2),y=u(o/2),b=d(i/2),E=d(s/2),C=d(o/2);switch(l){case"XYZ":this._x=b*_*y+p*E*C,this._y=p*E*y-b*_*C,this._z=p*_*C+b*E*y,this._w=p*_*y-b*E*C;break;case"YXZ":this._x=b*_*y+p*E*C,this._y=p*E*y-b*_*C,this._z=p*_*C-b*E*y,this._w=p*_*y+b*E*C;break;case"ZXY":this._x=b*_*y-p*E*C,this._y=p*E*y+b*_*C,this._z=p*_*C+b*E*y,this._w=p*_*y-b*E*C;break;case"ZYX":this._x=b*_*y-p*E*C,this._y=p*E*y+b*_*C,this._z=p*_*C-b*E*y,this._w=p*_*y+b*E*C;break;case"YZX":this._x=b*_*y+p*E*C,this._y=p*E*y+b*_*C,this._z=p*_*C-b*E*y,this._w=p*_*y-b*E*C;break;case"XZY":this._x=b*_*y-p*E*C,this._y=p*E*y-b*_*C,this._z=p*_*C+b*E*y,this._w=p*_*y+b*E*C;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],o=t[8],l=t[1],u=t[5],d=t[9],p=t[2],_=t[6],y=t[10],b=i+u+y;if(b>0){const E=.5/Math.sqrt(b+1);this._w=.25/E,this._x=(_-d)*E,this._y=(o-p)*E,this._z=(l-s)*E}else if(i>u&&i>y){const E=2*Math.sqrt(1+i-u-y);this._w=(_-d)/E,this._x=.25*E,this._y=(s+l)/E,this._z=(o+p)/E}else if(u>y){const E=2*Math.sqrt(1+u-i-y);this._w=(o-p)/E,this._x=(s+l)/E,this._y=.25*E,this._z=(d+_)/E}else{const E=2*Math.sqrt(1+y-i-u);this._w=(l-s)/E,this._x=(o+p)/E,this._y=(d+_)/E,this._z=.25*E}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ah(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,o=e._z,l=e._w,u=t._x,d=t._y,p=t._z,_=t._w;return this._x=i*_+l*u+s*p-o*d,this._y=s*_+l*d+o*u-i*p,this._z=o*_+l*p+i*d-s*u,this._w=l*_-i*u-s*d-o*p,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,o=this._z,l=this._w;let u=l*e._w+i*e._x+s*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=i,this._y=s,this._z=o,this;const d=1-u*u;if(d<=Number.EPSILON){const E=1-t;return this._w=E*l+t*this._w,this._x=E*i+t*this._x,this._y=E*s+t*this._y,this._z=E*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const p=Math.sqrt(d),_=Math.atan2(p,u),y=Math.sin((1-t)*_)/p,b=Math.sin(t*_)/p;return this._w=l*y+this._w*b,this._x=i*y+this._x*b,this._y=s*y+this._y*b,this._z=o*y+this._z*b,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),s=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(s),i*Math.sin(o),i*Math.cos(o),t*Math.sin(s))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class $e{constructor(e=0,t=0,i=0){$e.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(D4.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(D4.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*s,this.y=o[1]*t+o[4]*i+o[7]*s,this.z=o[2]*t+o[5]*i+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=e.elements,l=1/(o[3]*t+o[7]*i+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*s+o[12])*l,this.y=(o[1]*t+o[5]*i+o[9]*s+o[13])*l,this.z=(o[2]*t+o[6]*i+o[10]*s+o[14])*l,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,o=e.x,l=e.y,u=e.z,d=e.w,p=d*t+l*s-u*i,_=d*i+u*t-o*s,y=d*s+o*i-l*t,b=-o*t-l*i-u*s;return this.x=p*d+b*-o+_*-u-y*-l,this.y=_*d+b*-l+y*-o-p*-u,this.z=y*d+b*-u+p*-l-_*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s,this.y=o[1]*t+o[5]*i+o[9]*s,this.z=o[2]*t+o[6]*i+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,o=e.z,l=t.x,u=t.y,d=t.z;return this.x=s*d-o*u,this.y=o*l-i*d,this.z=i*u-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return J2.copy(this).projectOnVector(e),this.sub(J2)}reflect(e){return this.sub(J2.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(ah(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const J2=new $e,D4=new bl;class n0{constructor(e=new $e(1/0,1/0,1/0),t=new $e(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,s=1/0,o=-1/0,l=-1/0,u=-1/0;for(let d=0,p=e.length;d<p;d+=3){const _=e[d],y=e[d+1],b=e[d+2];_<t&&(t=_),y<i&&(i=y),b<s&&(s=b),_>o&&(o=_),y>l&&(l=y),b>u&&(u=b)}return this.min.set(t,i,s),this.max.set(o,l,u),this}setFromBufferAttribute(e){let t=1/0,i=1/0,s=1/0,o=-1/0,l=-1/0,u=-1/0;for(let d=0,p=e.count;d<p;d++){const _=e.getX(d),y=e.getY(d),b=e.getZ(d);_<t&&(t=_),y<i&&(i=y),b<s&&(s=b),_>o&&(o=_),y>l&&(l=y),b>u&&(u=b)}return this.min.set(t,i,s),this.max.set(o,l,u),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Tb.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const o=i.attributes.position;for(let l=0,u=o.count;l<u;l++)Tb.fromBufferAttribute(o,l).applyMatrix4(e.matrixWorld),this.expandByPoint(Tb)}else i.boundingBox===null&&i.computeBoundingBox(),q2.copy(i.boundingBox),q2.applyMatrix4(e.matrixWorld),this.union(q2);const s=e.children;for(let o=0,l=s.length;o<l;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Tb),Tb.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter($x),GC.subVectors(this.max,$x),GT.subVectors(e.a,$x),WT.subVectors(e.b,$x),VT.subVectors(e.c,$x),Fv.subVectors(WT,GT),Uv.subVectors(VT,WT),Sb.subVectors(GT,VT);let t=[0,-Fv.z,Fv.y,0,-Uv.z,Uv.y,0,-Sb.z,Sb.y,Fv.z,0,-Fv.x,Uv.z,0,-Uv.x,Sb.z,0,-Sb.x,-Fv.y,Fv.x,0,-Uv.y,Uv.x,0,-Sb.y,Sb.x,0];return!Q2(t,GT,WT,VT,GC)||(t=[1,0,0,0,1,0,0,0,1],!Q2(t,GT,WT,VT,GC))?!1:(WC.crossVectors(Fv,Uv),t=[WC.x,WC.y,WC.z],Q2(t,GT,WT,VT,GC))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Tb.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Tb).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(N_[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),N_[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),N_[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),N_[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),N_[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),N_[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),N_[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),N_[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(N_),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const N_=[new $e,new $e,new $e,new $e,new $e,new $e,new $e,new $e],Tb=new $e,q2=new n0,GT=new $e,WT=new $e,VT=new $e,Fv=new $e,Uv=new $e,Sb=new $e,$x=new $e,GC=new $e,WC=new $e,Eb=new $e;function Q2(n,e,t,i,s){for(let o=0,l=n.length-3;o<=l;o+=3){Eb.fromArray(n,o);const u=s.x*Math.abs(Eb.x)+s.y*Math.abs(Eb.y)+s.z*Math.abs(Eb.z),d=e.dot(Eb),p=t.dot(Eb),_=i.dot(Eb);if(Math.max(-Math.max(d,p,_),Math.min(d,p,_))>u)return!1}return!0}const R0e=new n0,N4=new $e,VC=new $e,Z2=new $e;class s_{constructor(e=new $e,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):R0e.setFromPoints(e).getCenter(i);let s=0;for(let o=0,l=e.length;o<l;o++)s=Math.max(s,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Z2.subVectors(e,this.center);const t=Z2.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.add(Z2.multiplyScalar(s/i)),this.radius+=s}return this}union(e){return this.center.equals(e.center)===!0?VC.set(0,0,1).multiplyScalar(e.radius):VC.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(N4.copy(e.center).add(VC)),this.expandByPoint(N4.copy(e.center).sub(VC)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const B_=new $e,eO=new $e,jC=new $e,zv=new $e,tO=new $e,XC=new $e,nO=new $e;class D${constructor(e=new $e,t=new $e(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,B_)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=B_.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(B_.copy(this.direction).multiplyScalar(t).add(this.origin),B_.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){eO.copy(e).add(t).multiplyScalar(.5),jC.copy(t).sub(e).normalize(),zv.copy(this.origin).sub(eO);const o=e.distanceTo(t)*.5,l=-this.direction.dot(jC),u=zv.dot(this.direction),d=-zv.dot(jC),p=zv.lengthSq(),_=Math.abs(1-l*l);let y,b,E,C;if(_>0)if(y=l*d-u,b=l*u-d,C=o*_,y>=0)if(b>=-C)if(b<=C){const A=1/_;y*=A,b*=A,E=y*(y+l*b+2*u)+b*(l*y+b+2*d)+p}else b=o,y=Math.max(0,-(l*b+u)),E=-y*y+b*(b+2*d)+p;else b=-o,y=Math.max(0,-(l*b+u)),E=-y*y+b*(b+2*d)+p;else b<=-C?(y=Math.max(0,-(-l*o+u)),b=y>0?-o:Math.min(Math.max(-o,-d),o),E=-y*y+b*(b+2*d)+p):b<=C?(y=0,b=Math.min(Math.max(-o,-d),o),E=b*(b+2*d)+p):(y=Math.max(0,-(l*o+u)),b=y>0?o:Math.min(Math.max(-o,-d),o),E=-y*y+b*(b+2*d)+p);else b=l>0?-o:o,y=Math.max(0,-(l*b+u)),E=-y*y+b*(b+2*d)+p;return i&&i.copy(this.direction).multiplyScalar(y).add(this.origin),s&&s.copy(jC).multiplyScalar(b).add(eO),E}intersectSphere(e,t){B_.subVectors(e.center,this.origin);const i=B_.dot(this.direction),s=B_.dot(B_)-i*i,o=e.radius*e.radius;if(s>o)return null;const l=Math.sqrt(o-s),u=i-l,d=i+l;return u<0&&d<0?null:u<0?this.at(d,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,o,l,u,d;const p=1/this.direction.x,_=1/this.direction.y,y=1/this.direction.z,b=this.origin;return p>=0?(i=(e.min.x-b.x)*p,s=(e.max.x-b.x)*p):(i=(e.max.x-b.x)*p,s=(e.min.x-b.x)*p),_>=0?(o=(e.min.y-b.y)*_,l=(e.max.y-b.y)*_):(o=(e.max.y-b.y)*_,l=(e.min.y-b.y)*_),i>l||o>s||((o>i||i!==i)&&(i=o),(l<s||s!==s)&&(s=l),y>=0?(u=(e.min.z-b.z)*y,d=(e.max.z-b.z)*y):(u=(e.max.z-b.z)*y,d=(e.min.z-b.z)*y),i>d||u>s)||((u>i||i!==i)&&(i=u),(d<s||s!==s)&&(s=d),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,B_)!==null}intersectTriangle(e,t,i,s,o){tO.subVectors(t,e),XC.subVectors(i,e),nO.crossVectors(tO,XC);let l=this.direction.dot(nO),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;zv.subVectors(this.origin,e);const d=u*this.direction.dot(XC.crossVectors(zv,XC));if(d<0)return null;const p=u*this.direction.dot(tO.cross(zv));if(p<0||d+p>l)return null;const _=-u*zv.dot(nO);return _<0?null:this.at(_/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Qr{constructor(){Qr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,s,o,l,u,d,p,_,y,b,E,C,A,I){const L=this.elements;return L[0]=e,L[4]=t,L[8]=i,L[12]=s,L[1]=o,L[5]=l,L[9]=u,L[13]=d,L[2]=p,L[6]=_,L[10]=y,L[14]=b,L[3]=E,L[7]=C,L[11]=A,L[15]=I,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Qr().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/jT.setFromMatrixColumn(e,0).length(),o=1/jT.setFromMatrixColumn(e,1).length(),l=1/jT.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*l,t[9]=i[9]*l,t[10]=i[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,o=e.z,l=Math.cos(i),u=Math.sin(i),d=Math.cos(s),p=Math.sin(s),_=Math.cos(o),y=Math.sin(o);if(e.order==="XYZ"){const b=l*_,E=l*y,C=u*_,A=u*y;t[0]=d*_,t[4]=-d*y,t[8]=p,t[1]=E+C*p,t[5]=b-A*p,t[9]=-u*d,t[2]=A-b*p,t[6]=C+E*p,t[10]=l*d}else if(e.order==="YXZ"){const b=d*_,E=d*y,C=p*_,A=p*y;t[0]=b+A*u,t[4]=C*u-E,t[8]=l*p,t[1]=l*y,t[5]=l*_,t[9]=-u,t[2]=E*u-C,t[6]=A+b*u,t[10]=l*d}else if(e.order==="ZXY"){const b=d*_,E=d*y,C=p*_,A=p*y;t[0]=b-A*u,t[4]=-l*y,t[8]=C+E*u,t[1]=E+C*u,t[5]=l*_,t[9]=A-b*u,t[2]=-l*p,t[6]=u,t[10]=l*d}else if(e.order==="ZYX"){const b=l*_,E=l*y,C=u*_,A=u*y;t[0]=d*_,t[4]=C*p-E,t[8]=b*p+A,t[1]=d*y,t[5]=A*p+b,t[9]=E*p-C,t[2]=-p,t[6]=u*d,t[10]=l*d}else if(e.order==="YZX"){const b=l*d,E=l*p,C=u*d,A=u*p;t[0]=d*_,t[4]=A-b*y,t[8]=C*y+E,t[1]=y,t[5]=l*_,t[9]=-u*_,t[2]=-p*_,t[6]=E*y+C,t[10]=b-A*y}else if(e.order==="XZY"){const b=l*d,E=l*p,C=u*d,A=u*p;t[0]=d*_,t[4]=-y,t[8]=p*_,t[1]=b*y+A,t[5]=l*_,t[9]=E*y-C,t[2]=C*y-E,t[6]=u*_,t[10]=A*y+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(k0e,e,O0e)}lookAt(e,t,i){const s=this.elements;return _m.subVectors(e,t),_m.lengthSq()===0&&(_m.z=1),_m.normalize(),Hv.crossVectors(i,_m),Hv.lengthSq()===0&&(Math.abs(i.z)===1?_m.x+=1e-4:_m.z+=1e-4,_m.normalize(),Hv.crossVectors(i,_m)),Hv.normalize(),YC.crossVectors(_m,Hv),s[0]=Hv.x,s[4]=YC.x,s[8]=_m.x,s[1]=Hv.y,s[5]=YC.y,s[9]=_m.y,s[2]=Hv.z,s[6]=YC.z,s[10]=_m.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[4],d=i[8],p=i[12],_=i[1],y=i[5],b=i[9],E=i[13],C=i[2],A=i[6],I=i[10],L=i[14],O=i[3],P=i[7],N=i[11],z=i[15],W=s[0],H=s[4],U=s[8],Q=s[12],ne=s[1],oe=s[5],le=s[9],ge=s[13],ce=s[2],pe=s[6],Te=s[10],Oe=s[14],J=s[3],se=s[7],ie=s[11],he=s[15];return o[0]=l*W+u*ne+d*ce+p*J,o[4]=l*H+u*oe+d*pe+p*se,o[8]=l*U+u*le+d*Te+p*ie,o[12]=l*Q+u*ge+d*Oe+p*he,o[1]=_*W+y*ne+b*ce+E*J,o[5]=_*H+y*oe+b*pe+E*se,o[9]=_*U+y*le+b*Te+E*ie,o[13]=_*Q+y*ge+b*Oe+E*he,o[2]=C*W+A*ne+I*ce+L*J,o[6]=C*H+A*oe+I*pe+L*se,o[10]=C*U+A*le+I*Te+L*ie,o[14]=C*Q+A*ge+I*Oe+L*he,o[3]=O*W+P*ne+N*ce+z*J,o[7]=O*H+P*oe+N*pe+z*se,o[11]=O*U+P*le+N*Te+z*ie,o[15]=O*Q+P*ge+N*Oe+z*he,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],o=e[12],l=e[1],u=e[5],d=e[9],p=e[13],_=e[2],y=e[6],b=e[10],E=e[14],C=e[3],A=e[7],I=e[11],L=e[15];return C*(+o*d*y-s*p*y-o*u*b+i*p*b+s*u*E-i*d*E)+A*(+t*d*E-t*p*b+o*l*b-s*l*E+s*p*_-o*d*_)+I*(+t*p*y-t*u*E-o*l*y+i*l*E+o*u*_-i*p*_)+L*(-s*u*_-t*d*y+t*u*b+s*l*y-i*l*b+i*d*_)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],d=e[6],p=e[7],_=e[8],y=e[9],b=e[10],E=e[11],C=e[12],A=e[13],I=e[14],L=e[15],O=y*I*p-A*b*p+A*d*E-u*I*E-y*d*L+u*b*L,P=C*b*p-_*I*p-C*d*E+l*I*E+_*d*L-l*b*L,N=_*A*p-C*y*p+C*u*E-l*A*E-_*u*L+l*y*L,z=C*y*d-_*A*d-C*u*b+l*A*b+_*u*I-l*y*I,W=t*O+i*P+s*N+o*z;if(W===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const H=1/W;return e[0]=O*H,e[1]=(A*b*o-y*I*o-A*s*E+i*I*E+y*s*L-i*b*L)*H,e[2]=(u*I*o-A*d*o+A*s*p-i*I*p-u*s*L+i*d*L)*H,e[3]=(y*d*o-u*b*o-y*s*p+i*b*p+u*s*E-i*d*E)*H,e[4]=P*H,e[5]=(_*I*o-C*b*o+C*s*E-t*I*E-_*s*L+t*b*L)*H,e[6]=(C*d*o-l*I*o-C*s*p+t*I*p+l*s*L-t*d*L)*H,e[7]=(l*b*o-_*d*o+_*s*p-t*b*p-l*s*E+t*d*E)*H,e[8]=N*H,e[9]=(C*y*o-_*A*o-C*i*E+t*A*E+_*i*L-t*y*L)*H,e[10]=(l*A*o-C*u*o+C*i*p-t*A*p-l*i*L+t*u*L)*H,e[11]=(_*u*o-l*y*o-_*i*p+t*y*p+l*i*E-t*u*E)*H,e[12]=z*H,e[13]=(_*A*s-C*y*s+C*i*b-t*A*b-_*i*I+t*y*I)*H,e[14]=(C*u*s-l*A*s-C*i*d+t*A*d+l*i*I-t*u*I)*H,e[15]=(l*y*s-_*u*s+_*i*d-t*y*d-l*i*b+t*u*b)*H,this}scale(e){const t=this.elements,i=e.x,s=e.y,o=e.z;return t[0]*=i,t[4]*=s,t[8]*=o,t[1]*=i,t[5]*=s,t[9]*=o,t[2]*=i,t[6]*=s,t[10]*=o,t[3]*=i,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),o=1-i,l=e.x,u=e.y,d=e.z,p=o*l,_=o*u;return this.set(p*l+i,p*u-s*d,p*d+s*u,0,p*u+s*d,_*u+i,_*d-s*l,0,p*d-s*u,_*d+s*l,o*d*d+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,o,l){return this.set(1,i,o,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,o=t._x,l=t._y,u=t._z,d=t._w,p=o+o,_=l+l,y=u+u,b=o*p,E=o*_,C=o*y,A=l*_,I=l*y,L=u*y,O=d*p,P=d*_,N=d*y,z=i.x,W=i.y,H=i.z;return s[0]=(1-(A+L))*z,s[1]=(E+N)*z,s[2]=(C-P)*z,s[3]=0,s[4]=(E-N)*W,s[5]=(1-(b+L))*W,s[6]=(I+O)*W,s[7]=0,s[8]=(C+P)*H,s[9]=(I-O)*H,s[10]=(1-(b+A))*H,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let o=jT.set(s[0],s[1],s[2]).length();const l=jT.set(s[4],s[5],s[6]).length(),u=jT.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],Fg.copy(this);const d=1/o,p=1/l,_=1/u;return Fg.elements[0]*=d,Fg.elements[1]*=d,Fg.elements[2]*=d,Fg.elements[4]*=p,Fg.elements[5]*=p,Fg.elements[6]*=p,Fg.elements[8]*=_,Fg.elements[9]*=_,Fg.elements[10]*=_,t.setFromRotationMatrix(Fg),i.x=o,i.y=l,i.z=u,this}makePerspective(e,t,i,s,o,l){const u=this.elements,d=2*o/(t-e),p=2*o/(i-s),_=(t+e)/(t-e),y=(i+s)/(i-s),b=-(l+o)/(l-o),E=-2*l*o/(l-o);return u[0]=d,u[4]=0,u[8]=_,u[12]=0,u[1]=0,u[5]=p,u[9]=y,u[13]=0,u[2]=0,u[6]=0,u[10]=b,u[14]=E,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,i,s,o,l){const u=this.elements,d=1/(t-e),p=1/(i-s),_=1/(l-o),y=(t+e)*d,b=(i+s)*p,E=(l+o)*_;return u[0]=2*d,u[4]=0,u[8]=0,u[12]=-y,u[1]=0,u[5]=2*p,u[9]=0,u[13]=-b,u[2]=0,u[6]=0,u[10]=-2*_,u[14]=-E,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const jT=new $e,Fg=new Qr,k0e=new $e(0,0,0),O0e=new $e(1,1,1),Hv=new $e,YC=new $e,_m=new $e,B4=new Qr,P4=new bl;class U1{constructor(e=0,t=0,i=0,s=U1.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],d=s[1],p=s[5],_=s[9],y=s[2],b=s[6],E=s[10];switch(t){case"XYZ":this._y=Math.asin(ah(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-_,E),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(b,p),this._z=0);break;case"YXZ":this._x=Math.asin(-ah(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(u,E),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-y,o),this._z=0);break;case"ZXY":this._x=Math.asin(ah(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(-y,E),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(d,o));break;case"ZYX":this._y=Math.asin(-ah(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(b,E),this._z=Math.atan2(d,o)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin(ah(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-_,p),this._y=Math.atan2(-y,o)):(this._x=0,this._y=Math.atan2(u,E));break;case"XZY":this._z=Math.asin(-ah(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(b,p),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-_,E),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return B4.makeRotationFromQuaternion(e),this.setFromRotationMatrix(B4,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return P4.setFromEuler(this),this.setFromQuaternion(P4,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}U1.DefaultOrder="XYZ";U1.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class f1{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let L0e=0;const F4=new $e,XT=new bl,P_=new Qr,KC=new $e,Cx=new $e,D0e=new $e,N0e=new bl,U4=new $e(1,0,0),z4=new $e(0,1,0),H4=new $e(0,0,1),B0e={type:"added"},G4={type:"removed"};class to extends Bm{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:L0e++}),this.uuid=Mm(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=to.DefaultUp.clone();const e=new $e,t=new U1,i=new bl,s=new $e(1,1,1);function o(){i.setFromEuler(t,!1)}function l(){t.setFromQuaternion(i,void 0,!1)}t._onChange(o),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Qr},normalMatrix:{value:new nf}}),this.matrix=new Qr,this.matrixWorld=new Qr,this.matrixAutoUpdate=to.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new f1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return XT.setFromAxisAngle(e,t),this.quaternion.multiply(XT),this}rotateOnWorldAxis(e,t){return XT.setFromAxisAngle(e,t),this.quaternion.premultiply(XT),this}rotateX(e){return this.rotateOnAxis(U4,e)}rotateY(e){return this.rotateOnAxis(z4,e)}rotateZ(e){return this.rotateOnAxis(H4,e)}translateOnAxis(e,t){return F4.copy(e).applyQuaternion(this.quaternion),this.position.add(F4.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(U4,e)}translateY(e){return this.translateOnAxis(z4,e)}translateZ(e){return this.translateOnAxis(H4,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(P_.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?KC.copy(e):KC.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),Cx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?P_.lookAt(Cx,KC,this.up):P_.lookAt(KC,Cx,this.up),this.quaternion.setFromRotationMatrix(P_),s&&(P_.extractRotation(s.matrixWorld),XT.setFromRotationMatrix(P_),this.quaternion.premultiply(XT.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(B0e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(G4)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(G4)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),P_.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),P_.multiply(e.parent.matrixWorld)),e.applyMatrix4(P_),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cx,e,D0e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cx,N0e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let o=0,l=s.length;o<l;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON()));function o(u,d){return u[d.uuid]===void 0&&(u[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const d=u.shapes;if(Array.isArray(d))for(let p=0,_=d.length;p<_;p++){const y=d[p];o(e.shapes,y)}else o(e.shapes,d)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let d=0,p=this.material.length;d<p;d++)u.push(o(e.materials,this.material[d]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const d=this.animations[u];s.animations.push(o(e.animations,d))}}if(t){const u=l(e.geometries),d=l(e.materials),p=l(e.textures),_=l(e.images),y=l(e.shapes),b=l(e.skeletons),E=l(e.animations),C=l(e.nodes);u.length>0&&(i.geometries=u),d.length>0&&(i.materials=d),p.length>0&&(i.textures=p),_.length>0&&(i.images=_),y.length>0&&(i.shapes=y),b.length>0&&(i.skeletons=b),E.length>0&&(i.animations=E),C.length>0&&(i.nodes=C)}return i.object=s,i;function l(u){const d=[];for(const p in u){const _=u[p];delete _.metadata,d.push(_)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}to.DefaultUp=new $e(0,1,0);to.DefaultMatrixAutoUpdate=!0;const Ug=new $e,F_=new $e,rO=new $e,U_=new $e,YT=new $e,KT=new $e,W4=new $e,iO=new $e,sO=new $e,oO=new $e;class Sm{constructor(e=new $e,t=new $e,i=new $e){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Ug.subVectors(e,t),s.cross(Ug);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,i,s,o){Ug.subVectors(s,t),F_.subVectors(i,t),rO.subVectors(e,t);const l=Ug.dot(Ug),u=Ug.dot(F_),d=Ug.dot(rO),p=F_.dot(F_),_=F_.dot(rO),y=l*p-u*u;if(y===0)return o.set(-2,-1,-1);const b=1/y,E=(p*d-u*_)*b,C=(l*_-u*d)*b;return o.set(1-E-C,C,E)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,U_),U_.x>=0&&U_.y>=0&&U_.x+U_.y<=1}static getUV(e,t,i,s,o,l,u,d){return this.getBarycoord(e,t,i,s,U_),d.set(0,0),d.addScaledVector(o,U_.x),d.addScaledVector(l,U_.y),d.addScaledVector(u,U_.z),d}static isFrontFacing(e,t,i,s){return Ug.subVectors(i,t),F_.subVectors(e,t),Ug.cross(F_).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ug.subVectors(this.c,this.b),F_.subVectors(this.a,this.b),Ug.cross(F_).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Sm.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Sm.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,s,o){return Sm.getUV(e,this.a,this.b,this.c,t,i,s,o)}containsPoint(e){return Sm.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Sm.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,o=this.c;let l,u;YT.subVectors(s,i),KT.subVectors(o,i),iO.subVectors(e,i);const d=YT.dot(iO),p=KT.dot(iO);if(d<=0&&p<=0)return t.copy(i);sO.subVectors(e,s);const _=YT.dot(sO),y=KT.dot(sO);if(_>=0&&y<=_)return t.copy(s);const b=d*y-_*p;if(b<=0&&d>=0&&_<=0)return l=d/(d-_),t.copy(i).addScaledVector(YT,l);oO.subVectors(e,o);const E=YT.dot(oO),C=KT.dot(oO);if(C>=0&&E<=C)return t.copy(o);const A=E*p-d*C;if(A<=0&&p>=0&&C<=0)return u=p/(p-C),t.copy(i).addScaledVector(KT,u);const I=_*C-E*y;if(I<=0&&y-_>=0&&E-C>=0)return W4.subVectors(o,s),u=(y-_)/(y-_+(E-C)),t.copy(s).addScaledVector(W4,u);const L=1/(I+A+b);return l=A*L,u=b*L,t.copy(i).addScaledVector(YT,l).addScaledVector(KT,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let P0e=0;class sd extends Bm{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:P0e++}),this.uuid=Mm(),this.name="",this.type="Material",this.blending=ev,this.side=e_,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=UR,this.blendDst=zR,this.blendEquation=Wb,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=dI,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Cj,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=_M,this.stencilZFail=_M,this.stencilZPass=_M,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===B7;continue}const s=this[t];if(s===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ev&&(i.blending=this.blending),this.side!==e_&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function s(o){const l=[];for(const u in o){const d=o[u];delete d.metadata,l.push(d)}return l}if(t){const o=s(e.textures),l=s(e.images);o.length>0&&(i.textures=o),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let o=0;o!==s;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class r0 extends sd{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Nn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=O$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ch=new $e,JC=new Ht;class Bo{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=r$,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),l=new Nn),t[i++]=l.r,t[i++]=l.g,t[i++]=l.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),l=new Ht),t[i++]=l.x,t[i++]=l.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),l=new $e),t[i++]=l.x,t[i++]=l.y,t[i++]=l.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),l=new ys),t[i++]=l.x,t[i++]=l.y,t[i++]=l.z,t[i++]=l.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)JC.fromBufferAttribute(this,t),JC.applyMatrix3(e),this.setXY(t,JC.x,JC.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ch.fromBufferAttribute(this,t),Ch.applyMatrix3(e),this.setXYZ(t,Ch.x,Ch.y,Ch.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ch.fromBufferAttribute(this,t),Ch.applyMatrix4(e),this.setXYZ(t,Ch.x,Ch.y,Ch.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ch.fromBufferAttribute(this,t),Ch.applyNormalMatrix(e),this.setXYZ(t,Ch.x,Ch.y,Ch.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ch.fromBufferAttribute(this,t),Ch.transformDirection(e),this.setXYZ(t,Ch.x,Ch.y,Ch.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==r$&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class F0e extends Bo{constructor(e,t,i){super(new Int8Array(e),t,i)}}class U0e extends Bo{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class z0e extends Bo{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class H0e extends Bo{constructor(e,t,i){super(new Int16Array(e),t,i)}}class MP extends Bo{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class G0e extends Bo{constructor(e,t,i){super(new Int32Array(e),t,i)}}class IP extends Bo{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class W0e extends Bo{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}}class rr extends Bo{constructor(e,t,i){super(new Float32Array(e),t,i)}}class V0e extends Bo{constructor(e,t,i){super(new Float64Array(e),t,i)}}let j0e=0;const Qm=new Qr,aO=new to,JT=new $e,vm=new n0,Ax=new n0,gd=new $e;class oi extends Bm{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:j0e++}),this.uuid=Mm(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Ij(e)?IP:MP)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new nf().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Qm.makeRotationFromQuaternion(e),this.applyMatrix4(Qm),this}rotateX(e){return Qm.makeRotationX(e),this.applyMatrix4(Qm),this}rotateY(e){return Qm.makeRotationY(e),this.applyMatrix4(Qm),this}rotateZ(e){return Qm.makeRotationZ(e),this.applyMatrix4(Qm),this}translate(e,t,i){return Qm.makeTranslation(e,t,i),this.applyMatrix4(Qm),this}scale(e,t,i){return Qm.makeScale(e,t,i),this.applyMatrix4(Qm),this}lookAt(e){return aO.lookAt(e),aO.updateMatrix(),this.applyMatrix4(aO.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(JT).negate(),this.translate(JT.x,JT.y,JT.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new rr(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new n0);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new $e(-1/0,-1/0,-1/0),new $e(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const o=t[i];vm.setFromBufferAttribute(o),this.morphTargetsRelative?(gd.addVectors(this.boundingBox.min,vm.min),this.boundingBox.expandByPoint(gd),gd.addVectors(this.boundingBox.max,vm.max),this.boundingBox.expandByPoint(gd)):(this.boundingBox.expandByPoint(vm.min),this.boundingBox.expandByPoint(vm.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new s_);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new $e,1/0);return}if(e){const i=this.boundingSphere.center;if(vm.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const u=t[o];Ax.setFromBufferAttribute(u),this.morphTargetsRelative?(gd.addVectors(vm.min,Ax.min),vm.expandByPoint(gd),gd.addVectors(vm.max,Ax.max),vm.expandByPoint(gd)):(vm.expandByPoint(Ax.min),vm.expandByPoint(Ax.max))}vm.getCenter(i);let s=0;for(let o=0,l=e.count;o<l;o++)gd.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(gd));if(t)for(let o=0,l=t.length;o<l;o++){const u=t[o],d=this.morphTargetsRelative;for(let p=0,_=u.count;p<_;p++)gd.fromBufferAttribute(u,p),d&&(JT.fromBufferAttribute(e,p),gd.add(JT)),s=Math.max(s,i.distanceToSquared(gd))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,s=t.position.array,o=t.normal.array,l=t.uv.array,u=s.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Bo(new Float32Array(4*u),4));const d=this.getAttribute("tangent").array,p=[],_=[];for(let ne=0;ne<u;ne++)p[ne]=new $e,_[ne]=new $e;const y=new $e,b=new $e,E=new $e,C=new Ht,A=new Ht,I=new Ht,L=new $e,O=new $e;function P(ne,oe,le){y.fromArray(s,ne*3),b.fromArray(s,oe*3),E.fromArray(s,le*3),C.fromArray(l,ne*2),A.fromArray(l,oe*2),I.fromArray(l,le*2),b.sub(y),E.sub(y),A.sub(C),I.sub(C);const ge=1/(A.x*I.y-I.x*A.y);!isFinite(ge)||(L.copy(b).multiplyScalar(I.y).addScaledVector(E,-A.y).multiplyScalar(ge),O.copy(E).multiplyScalar(A.x).addScaledVector(b,-I.x).multiplyScalar(ge),p[ne].add(L),p[oe].add(L),p[le].add(L),_[ne].add(O),_[oe].add(O),_[le].add(O))}let N=this.groups;N.length===0&&(N=[{start:0,count:i.length}]);for(let ne=0,oe=N.length;ne<oe;++ne){const le=N[ne],ge=le.start,ce=le.count;for(let pe=ge,Te=ge+ce;pe<Te;pe+=3)P(i[pe+0],i[pe+1],i[pe+2])}const z=new $e,W=new $e,H=new $e,U=new $e;function Q(ne){H.fromArray(o,ne*3),U.copy(H);const oe=p[ne];z.copy(oe),z.sub(H.multiplyScalar(H.dot(oe))).normalize(),W.crossVectors(U,oe);const le=W.dot(_[ne])<0?-1:1;d[ne*4]=z.x,d[ne*4+1]=z.y,d[ne*4+2]=z.z,d[ne*4+3]=le}for(let ne=0,oe=N.length;ne<oe;++ne){const le=N[ne],ge=le.start,ce=le.count;for(let pe=ge,Te=ge+ce;pe<Te;pe+=3)Q(i[pe+0]),Q(i[pe+1]),Q(i[pe+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Bo(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let b=0,E=i.count;b<E;b++)i.setXYZ(b,0,0,0);const s=new $e,o=new $e,l=new $e,u=new $e,d=new $e,p=new $e,_=new $e,y=new $e;if(e)for(let b=0,E=e.count;b<E;b+=3){const C=e.getX(b+0),A=e.getX(b+1),I=e.getX(b+2);s.fromBufferAttribute(t,C),o.fromBufferAttribute(t,A),l.fromBufferAttribute(t,I),_.subVectors(l,o),y.subVectors(s,o),_.cross(y),u.fromBufferAttribute(i,C),d.fromBufferAttribute(i,A),p.fromBufferAttribute(i,I),u.add(_),d.add(_),p.add(_),i.setXYZ(C,u.x,u.y,u.z),i.setXYZ(A,d.x,d.y,d.z),i.setXYZ(I,p.x,p.y,p.z)}else for(let b=0,E=t.count;b<E;b+=3)s.fromBufferAttribute(t,b+0),o.fromBufferAttribute(t,b+1),l.fromBufferAttribute(t,b+2),_.subVectors(l,o),y.subVectors(s,o),_.cross(y),i.setXYZ(b+0,_.x,_.y,_.z),i.setXYZ(b+1,_.x,_.y,_.z),i.setXYZ(b+2,_.x,_.y,_.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const s in i){if(e.attributes[s]===void 0)continue;const o=i[s].array,l=e.attributes[s],u=l.array,d=l.itemSize*t,p=Math.min(u.length,o.length-d);for(let _=0,y=d;_<p;_++,y++)o[y]=u[_]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)gd.fromBufferAttribute(e,t),gd.normalize(),e.setXYZ(t,gd.x,gd.y,gd.z)}toNonIndexed(){function e(u,d){const p=u.array,_=u.itemSize,y=u.normalized,b=new p.constructor(d.length*_);let E=0,C=0;for(let A=0,I=d.length;A<I;A++){u.isInterleavedBufferAttribute?E=d[A]*u.data.stride+u.offset:E=d[A]*_;for(let L=0;L<_;L++)b[C++]=p[E++]}return new Bo(b,_,y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new oi,i=this.index.array,s=this.attributes;for(const u in s){const d=s[u],p=e(d,i);t.setAttribute(u,p)}const o=this.morphAttributes;for(const u in o){const d=[],p=o[u];for(let _=0,y=p.length;_<y;_++){const b=p[_],E=e(b,i);d.push(E)}t.morphAttributes[u]=d}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,d=l.length;u<d;u++){const p=l[u];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(e[p]=d[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const d in i){const p=i[d];e.data.attributes[d]=p.toJSON(e.data)}const s={};let o=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],_=[];for(let y=0,b=p.length;y<b;y++){const E=p[y];_.push(E.toJSON(e.data))}_.length>0&&(s[d]=_,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const p in s){const _=s[p];this.setAttribute(p,_.clone(t))}const o=e.morphAttributes;for(const p in o){const _=[],y=o[p];for(let b=0,E=y.length;b<E;b++)_.push(y[b].clone(t));this.morphAttributes[p]=_}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let p=0,_=l.length;p<_;p++){const y=l[p];this.addGroup(y.start,y.count,y.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const V4=new Qr,qT=new D$,lO=new s_,Gv=new $e,Wv=new $e,Vv=new $e,uO=new $e,cO=new $e,hO=new $e,qC=new $e,QC=new $e,ZC=new $e,eA=new Ht,tA=new Ht,nA=new Ht,dO=new $e,rA=new $e;class Fn extends to{constructor(e=new oi,t=new r0){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}raycast(e,t){const i=this.geometry,s=this.material,o=this.matrixWorld;if(s===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),lO.copy(i.boundingSphere),lO.applyMatrix4(o),e.ray.intersectsSphere(lO)===!1)||(V4.copy(o).invert(),qT.copy(e.ray).applyMatrix4(V4),i.boundingBox!==null&&qT.intersectsBox(i.boundingBox)===!1))return;let l;const u=i.index,d=i.attributes.position,p=i.morphAttributes.position,_=i.morphTargetsRelative,y=i.attributes.uv,b=i.attributes.uv2,E=i.groups,C=i.drawRange;if(u!==null)if(Array.isArray(s))for(let A=0,I=E.length;A<I;A++){const L=E[A],O=s[L.materialIndex],P=Math.max(L.start,C.start),N=Math.min(u.count,Math.min(L.start+L.count,C.start+C.count));for(let z=P,W=N;z<W;z+=3){const H=u.getX(z),U=u.getX(z+1),Q=u.getX(z+2);l=iA(this,O,e,qT,d,p,_,y,b,H,U,Q),l&&(l.faceIndex=Math.floor(z/3),l.face.materialIndex=L.materialIndex,t.push(l))}}else{const A=Math.max(0,C.start),I=Math.min(u.count,C.start+C.count);for(let L=A,O=I;L<O;L+=3){const P=u.getX(L),N=u.getX(L+1),z=u.getX(L+2);l=iA(this,s,e,qT,d,p,_,y,b,P,N,z),l&&(l.faceIndex=Math.floor(L/3),t.push(l))}}else if(d!==void 0)if(Array.isArray(s))for(let A=0,I=E.length;A<I;A++){const L=E[A],O=s[L.materialIndex],P=Math.max(L.start,C.start),N=Math.min(d.count,Math.min(L.start+L.count,C.start+C.count));for(let z=P,W=N;z<W;z+=3){const H=z,U=z+1,Q=z+2;l=iA(this,O,e,qT,d,p,_,y,b,H,U,Q),l&&(l.faceIndex=Math.floor(z/3),l.face.materialIndex=L.materialIndex,t.push(l))}}else{const A=Math.max(0,C.start),I=Math.min(d.count,C.start+C.count);for(let L=A,O=I;L<O;L+=3){const P=L,N=L+1,z=L+2;l=iA(this,s,e,qT,d,p,_,y,b,P,N,z),l&&(l.faceIndex=Math.floor(L/3),t.push(l))}}}}function X0e(n,e,t,i,s,o,l,u){let d;if(e.side===id?d=i.intersectTriangle(l,o,s,!0,u):d=i.intersectTriangle(s,o,l,e.side!==tf,u),d===null)return null;rA.copy(u),rA.applyMatrix4(n.matrixWorld);const p=t.ray.origin.distanceTo(rA);return p<t.near||p>t.far?null:{distance:p,point:rA.clone(),object:n}}function iA(n,e,t,i,s,o,l,u,d,p,_,y){Gv.fromBufferAttribute(s,p),Wv.fromBufferAttribute(s,_),Vv.fromBufferAttribute(s,y);const b=n.morphTargetInfluences;if(o&&b){qC.set(0,0,0),QC.set(0,0,0),ZC.set(0,0,0);for(let C=0,A=o.length;C<A;C++){const I=b[C],L=o[C];I!==0&&(uO.fromBufferAttribute(L,p),cO.fromBufferAttribute(L,_),hO.fromBufferAttribute(L,y),l?(qC.addScaledVector(uO,I),QC.addScaledVector(cO,I),ZC.addScaledVector(hO,I)):(qC.addScaledVector(uO.sub(Gv),I),QC.addScaledVector(cO.sub(Wv),I),ZC.addScaledVector(hO.sub(Vv),I)))}Gv.add(qC),Wv.add(QC),Vv.add(ZC)}n.isSkinnedMesh&&(n.boneTransform(p,Gv),n.boneTransform(_,Wv),n.boneTransform(y,Vv));const E=X0e(n,e,t,i,Gv,Wv,Vv,dO);if(E){u&&(eA.fromBufferAttribute(u,p),tA.fromBufferAttribute(u,_),nA.fromBufferAttribute(u,y),E.uv=Sm.getUV(dO,Gv,Wv,Vv,eA,tA,nA,new Ht)),d&&(eA.fromBufferAttribute(d,p),tA.fromBufferAttribute(d,_),nA.fromBufferAttribute(d,y),E.uv2=Sm.getUV(dO,Gv,Wv,Vv,eA,tA,nA,new Ht));const C={a:p,b:_,c:y,normal:new $e,materialIndex:0};Sm.getNormal(Gv,Wv,Vv,C.normal),E.face=C}return E}class pu extends oi{constructor(e=1,t=1,i=1,s=1,o=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:o,depthSegments:l};const u=this;s=Math.floor(s),o=Math.floor(o),l=Math.floor(l);const d=[],p=[],_=[],y=[];let b=0,E=0;C("z","y","x",-1,-1,i,t,e,l,o,0),C("z","y","x",1,-1,i,t,-e,l,o,1),C("x","z","y",1,1,e,i,t,s,l,2),C("x","z","y",1,-1,e,i,-t,s,l,3),C("x","y","z",1,-1,e,t,i,s,o,4),C("x","y","z",-1,-1,e,t,-i,s,o,5),this.setIndex(d),this.setAttribute("position",new rr(p,3)),this.setAttribute("normal",new rr(_,3)),this.setAttribute("uv",new rr(y,2));function C(A,I,L,O,P,N,z,W,H,U,Q){const ne=N/H,oe=z/U,le=N/2,ge=z/2,ce=W/2,pe=H+1,Te=U+1;let Oe=0,J=0;const se=new $e;for(let ie=0;ie<Te;ie++){const he=ie*oe-ge;for(let Se=0;Se<pe;Se++){const Fe=Se*ne-le;se[A]=Fe*O,se[I]=he*P,se[L]=ce,p.push(se.x,se.y,se.z),se[A]=0,se[I]=0,se[L]=W>0?1:-1,_.push(se.x,se.y,se.z),y.push(Se/H),y.push(1-ie/U),Oe+=1}}for(let ie=0;ie<U;ie++)for(let he=0;he<H;he++){const Se=b+he+pe*ie,Fe=b+he+pe*(ie+1),ke=b+(he+1)+pe*(ie+1),qe=b+(he+1)+pe*ie;d.push(Se,Fe,qe),d.push(Fe,ke,qe),J+=6}u.addGroup(E,J,Q),E+=J,b+=Oe}}static fromJSON(e){return new pu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function sE(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function Sp(n){const e={};for(let t=0;t<n.length;t++){const i=sE(n[t]);for(const s in i)e[s]=i[s]}return e}function Y0e(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const N$={clone:sE,merge:Sp};var K0e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,J0e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class yd extends sd{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=K0e,this.fragmentShader=J0e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=sE(e.uniforms),this.uniformsGroups=Y0e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class LE extends to{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Qr,this.projectionMatrix=new Qr,this.projectionMatrixInverse=new Qr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ja extends LE{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=i$*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(d1*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return i$*2*Math.atan(Math.tan(d1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,s,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(d1*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,o=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const d=l.fullWidth,p=l.fullHeight;o+=l.offsetX*s/d,t-=l.offsetY*i/p,s*=l.width/d,i*=l.height/p}const u=this.filmOffset;u!==0&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const QT=90,ZT=1;class kj extends to{constructor(e,t,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const s=new Ja(QT,ZT,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new $e(1,0,0)),this.add(s);const o=new Ja(QT,ZT,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new $e(-1,0,0)),this.add(o);const l=new Ja(QT,ZT,e,t);l.layers=this.layers,l.up.set(0,0,1),l.lookAt(new $e(0,1,0)),this.add(l);const u=new Ja(QT,ZT,e,t);u.layers=this.layers,u.up.set(0,0,-1),u.lookAt(new $e(0,-1,0)),this.add(u);const d=new Ja(QT,ZT,e,t);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new $e(0,0,1)),this.add(d);const p=new Ja(QT,ZT,e,t);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new $e(0,0,-1)),this.add(p)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[s,o,l,u,d,p]=this.children,_=e.getRenderTarget(),y=e.toneMapping,b=e.xr.enabled;e.toneMapping=Qg,e.xr.enabled=!1;const E=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,s),e.setRenderTarget(i,1),e.render(t,o),e.setRenderTarget(i,2),e.render(t,l),e.setRenderTarget(i,3),e.render(t,u),e.setRenderTarget(i,4),e.render(t,d),i.texture.generateMipmaps=E,e.setRenderTarget(i,5),e.render(t,p),e.setRenderTarget(_),e.toneMapping=y,e.xr.enabled=b,i.texture.needsPMREMUpdate=!0}}class B$ extends lc{constructor(e,t,i,s,o,l,u,d,p,_){e=e!==void 0?e:[],t=t!==void 0?t:Sy,super(e,t,i,s,o,l,u,d,p,_),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Oj extends Rc{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new B$(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Tl}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new pu(5,5,5),o=new yd({name:"CubemapFromEquirect",uniforms:sE(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:id,blending:af});o.uniforms.tEquirect.value=t;const l=new Fn(s,o),u=t.minFilter;return t.minFilter===P1&&(t.minFilter=Tl),new kj(1,10,this).update(e,l),t.minFilter=u,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,i,s){const o=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,i,s);e.setRenderTarget(o)}}const pO=new $e,q0e=new $e,Q0e=new nf;class V_{constructor(e=new $e(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=pO.subVectors(i,t).cross(q0e.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(pO),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(i).multiplyScalar(o).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Q0e.getNormalMatrix(e),s=this.coplanarPoint(pO).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const eS=new s_,sA=new $e;class VR{constructor(e=new V_,t=new V_,i=new V_,s=new V_,o=new V_,l=new V_){this.planes=[e,t,i,s,o,l]}set(e,t,i,s,o,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(i),u[3].copy(s),u[4].copy(o),u[5].copy(l),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,s=i[0],o=i[1],l=i[2],u=i[3],d=i[4],p=i[5],_=i[6],y=i[7],b=i[8],E=i[9],C=i[10],A=i[11],I=i[12],L=i[13],O=i[14],P=i[15];return t[0].setComponents(u-s,y-d,A-b,P-I).normalize(),t[1].setComponents(u+s,y+d,A+b,P+I).normalize(),t[2].setComponents(u+o,y+p,A+E,P+L).normalize(),t[3].setComponents(u-o,y-p,A-E,P-L).normalize(),t[4].setComponents(u-l,y-_,A-C,P-O).normalize(),t[5].setComponents(u+l,y+_,A+C,P+O).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),eS.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(eS)}intersectsSprite(e){return eS.center.set(0,0,0),eS.radius=.7071067811865476,eS.applyMatrix4(e.matrixWorld),this.intersectsSphere(eS)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(sA.x=s.normal.x>0?e.max.x:e.min.x,sA.y=s.normal.y>0?e.max.y:e.min.y,sA.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(sA)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Lj(){let n=null,e=!1,t=null,i=null;function s(o,l){t(o,l),i=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function Z0e(n,e){const t=e.isWebGL2,i=new WeakMap;function s(p,_){const y=p.array,b=p.usage,E=n.createBuffer();n.bindBuffer(_,E),n.bufferData(_,y,b),p.onUploadCallback();let C;if(y instanceof Float32Array)C=5126;else if(y instanceof Uint16Array)if(p.isFloat16BufferAttribute)if(t)C=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else C=5123;else if(y instanceof Int16Array)C=5122;else if(y instanceof Uint32Array)C=5125;else if(y instanceof Int32Array)C=5124;else if(y instanceof Int8Array)C=5120;else if(y instanceof Uint8Array)C=5121;else if(y instanceof Uint8ClampedArray)C=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+y);return{buffer:E,type:C,bytesPerElement:y.BYTES_PER_ELEMENT,version:p.version}}function o(p,_,y){const b=_.array,E=_.updateRange;n.bindBuffer(y,p),E.count===-1?n.bufferSubData(y,0,b):(t?n.bufferSubData(y,E.offset*b.BYTES_PER_ELEMENT,b,E.offset,E.count):n.bufferSubData(y,E.offset*b.BYTES_PER_ELEMENT,b.subarray(E.offset,E.offset+E.count)),E.count=-1)}function l(p){return p.isInterleavedBufferAttribute&&(p=p.data),i.get(p)}function u(p){p.isInterleavedBufferAttribute&&(p=p.data);const _=i.get(p);_&&(n.deleteBuffer(_.buffer),i.delete(p))}function d(p,_){if(p.isGLBufferAttribute){const b=i.get(p);(!b||b.version<p.version)&&i.set(p,{buffer:p.buffer,type:p.type,bytesPerElement:p.elementSize,version:p.version});return}p.isInterleavedBufferAttribute&&(p=p.data);const y=i.get(p);y===void 0?i.set(p,s(p,_)):y.version<p.version&&(o(y.buffer,p,_),y.version=p.version)}return{get:l,remove:u,update:d}}class e0 extends oi{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const o=e/2,l=t/2,u=Math.floor(i),d=Math.floor(s),p=u+1,_=d+1,y=e/u,b=t/d,E=[],C=[],A=[],I=[];for(let L=0;L<_;L++){const O=L*b-l;for(let P=0;P<p;P++){const N=P*y-o;C.push(N,-O,0),A.push(0,0,1),I.push(P/u),I.push(1-L/d)}}for(let L=0;L<d;L++)for(let O=0;O<u;O++){const P=O+p*L,N=O+p*(L+1),z=O+1+p*(L+1),W=O+1+p*L;E.push(P,N,W),E.push(N,z,W)}this.setIndex(E),this.setAttribute("position",new rr(C,3)),this.setAttribute("normal",new rr(A,3)),this.setAttribute("uv",new rr(I,2))}static fromJSON(e){return new e0(e.width,e.height,e.widthSegments,e.heightSegments)}}var e_e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,t_e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,n_e=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,r_e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,i_e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,s_e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,o_e="vec3 transformed = vec3( position );",a_e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,l_e=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,u_e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,c_e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,h_e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,d_e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,p_e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,f_e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,m_e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,g_e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,__e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,v_e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,y_e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,b_e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,T_e=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,S_e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,E_e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,x_e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,w_e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,$_e="gl_FragColor = linearToOutputTexel( gl_FragColor );",C_e=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,A_e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,M_e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,I_e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,R_e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,k_e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,O_e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,L_e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,D_e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,N_e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,B_e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,P_e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,F_e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,U_e=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,z_e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,H_e=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,G_e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,W_e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,V_e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,j_e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,X_e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Y_e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,K_e=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,J_e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,q_e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Q_e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Z_e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,eve=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,tve=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,nve=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,rve=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,ive=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,sve=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ove=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ave=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,lve=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,uve=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,cve=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,hve=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,dve=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,pve=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,fve=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,mve=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,gve=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,_ve=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,vve=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,yve=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,bve=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Tve=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Sve=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Eve=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,xve=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,wve=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,$ve=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Cve=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Ave=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Mve=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Ive=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Rve=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,kve=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,Ove=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Lve=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Dve=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Nve=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Bve=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Pve=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Fve=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Uve=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,zve=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Hve=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,Gve=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Wve=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Vve=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,jve=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Xve=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Yve=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Kve=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Jve=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const qve=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Qve=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Zve=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,eye=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,tye=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,nye=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,rye=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,iye=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,sye=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,oye=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,aye=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,lye=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,uye=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,cye=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hye=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dye=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pye=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fye=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mye=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,gye=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,_ye=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vye=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yye=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,bye=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tye=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Sye=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Eye=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,xye=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,wye=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$ye=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Cye=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Aye=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ds={alphamap_fragment:e_e,alphamap_pars_fragment:t_e,alphatest_fragment:n_e,alphatest_pars_fragment:r_e,aomap_fragment:i_e,aomap_pars_fragment:s_e,begin_vertex:o_e,beginnormal_vertex:a_e,bsdfs:l_e,iridescence_fragment:u_e,bumpmap_pars_fragment:c_e,clipping_planes_fragment:h_e,clipping_planes_pars_fragment:d_e,clipping_planes_pars_vertex:p_e,clipping_planes_vertex:f_e,color_fragment:m_e,color_pars_fragment:g_e,color_pars_vertex:__e,color_vertex:v_e,common:y_e,cube_uv_reflection_fragment:b_e,defaultnormal_vertex:T_e,displacementmap_pars_vertex:S_e,displacementmap_vertex:E_e,emissivemap_fragment:x_e,emissivemap_pars_fragment:w_e,encodings_fragment:$_e,encodings_pars_fragment:C_e,envmap_fragment:A_e,envmap_common_pars_fragment:M_e,envmap_pars_fragment:I_e,envmap_pars_vertex:R_e,envmap_physical_pars_fragment:H_e,envmap_vertex:k_e,fog_vertex:O_e,fog_pars_vertex:L_e,fog_fragment:D_e,fog_pars_fragment:N_e,gradientmap_pars_fragment:B_e,lightmap_fragment:P_e,lightmap_pars_fragment:F_e,lights_lambert_vertex:U_e,lights_pars_begin:z_e,lights_toon_fragment:G_e,lights_toon_pars_fragment:W_e,lights_phong_fragment:V_e,lights_phong_pars_fragment:j_e,lights_physical_fragment:X_e,lights_physical_pars_fragment:Y_e,lights_fragment_begin:K_e,lights_fragment_maps:J_e,lights_fragment_end:q_e,logdepthbuf_fragment:Q_e,logdepthbuf_pars_fragment:Z_e,logdepthbuf_pars_vertex:eve,logdepthbuf_vertex:tve,map_fragment:nve,map_pars_fragment:rve,map_particle_fragment:ive,map_particle_pars_fragment:sve,metalnessmap_fragment:ove,metalnessmap_pars_fragment:ave,morphcolor_vertex:lve,morphnormal_vertex:uve,morphtarget_pars_vertex:cve,morphtarget_vertex:hve,normal_fragment_begin:dve,normal_fragment_maps:pve,normal_pars_fragment:fve,normal_pars_vertex:mve,normal_vertex:gve,normalmap_pars_fragment:_ve,clearcoat_normal_fragment_begin:vve,clearcoat_normal_fragment_maps:yve,clearcoat_pars_fragment:bve,iridescence_pars_fragment:Tve,output_fragment:Sve,packing:Eve,premultiplied_alpha_fragment:xve,project_vertex:wve,dithering_fragment:$ve,dithering_pars_fragment:Cve,roughnessmap_fragment:Ave,roughnessmap_pars_fragment:Mve,shadowmap_pars_fragment:Ive,shadowmap_pars_vertex:Rve,shadowmap_vertex:kve,shadowmask_pars_fragment:Ove,skinbase_vertex:Lve,skinning_pars_vertex:Dve,skinning_vertex:Nve,skinnormal_vertex:Bve,specularmap_fragment:Pve,specularmap_pars_fragment:Fve,tonemapping_fragment:Uve,tonemapping_pars_fragment:zve,transmission_fragment:Hve,transmission_pars_fragment:Gve,uv_pars_fragment:Wve,uv_pars_vertex:Vve,uv_vertex:jve,uv2_pars_fragment:Xve,uv2_pars_vertex:Yve,uv2_vertex:Kve,worldpos_vertex:Jve,background_vert:qve,background_frag:Qve,cube_vert:Zve,cube_frag:eye,depth_vert:tye,depth_frag:nye,distanceRGBA_vert:rye,distanceRGBA_frag:iye,equirect_vert:sye,equirect_frag:oye,linedashed_vert:aye,linedashed_frag:lye,meshbasic_vert:uye,meshbasic_frag:cye,meshlambert_vert:hye,meshlambert_frag:dye,meshmatcap_vert:pye,meshmatcap_frag:fye,meshnormal_vert:mye,meshnormal_frag:gye,meshphong_vert:_ye,meshphong_frag:vye,meshphysical_vert:yye,meshphysical_frag:bye,meshtoon_vert:Tye,meshtoon_frag:Sye,points_vert:Eye,points_frag:xye,shadow_vert:wye,shadow_frag:$ye,sprite_vert:Cye,sprite_frag:Aye},Wn={common:{diffuse:{value:new Nn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new nf},uv2Transform:{value:new nf},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ht(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Nn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Nn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new nf}},sprite:{diffuse:{value:new Nn(16777215)},opacity:{value:1},center:{value:new Ht(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new nf}}},Zp={basic:{uniforms:Sp([Wn.common,Wn.specularmap,Wn.envmap,Wn.aomap,Wn.lightmap,Wn.fog]),vertexShader:ds.meshbasic_vert,fragmentShader:ds.meshbasic_frag},lambert:{uniforms:Sp([Wn.common,Wn.specularmap,Wn.envmap,Wn.aomap,Wn.lightmap,Wn.emissivemap,Wn.fog,Wn.lights,{emissive:{value:new Nn(0)}}]),vertexShader:ds.meshlambert_vert,fragmentShader:ds.meshlambert_frag},phong:{uniforms:Sp([Wn.common,Wn.specularmap,Wn.envmap,Wn.aomap,Wn.lightmap,Wn.emissivemap,Wn.bumpmap,Wn.normalmap,Wn.displacementmap,Wn.fog,Wn.lights,{emissive:{value:new Nn(0)},specular:{value:new Nn(1118481)},shininess:{value:30}}]),vertexShader:ds.meshphong_vert,fragmentShader:ds.meshphong_frag},standard:{uniforms:Sp([Wn.common,Wn.envmap,Wn.aomap,Wn.lightmap,Wn.emissivemap,Wn.bumpmap,Wn.normalmap,Wn.displacementmap,Wn.roughnessmap,Wn.metalnessmap,Wn.fog,Wn.lights,{emissive:{value:new Nn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ds.meshphysical_vert,fragmentShader:ds.meshphysical_frag},toon:{uniforms:Sp([Wn.common,Wn.aomap,Wn.lightmap,Wn.emissivemap,Wn.bumpmap,Wn.normalmap,Wn.displacementmap,Wn.gradientmap,Wn.fog,Wn.lights,{emissive:{value:new Nn(0)}}]),vertexShader:ds.meshtoon_vert,fragmentShader:ds.meshtoon_frag},matcap:{uniforms:Sp([Wn.common,Wn.bumpmap,Wn.normalmap,Wn.displacementmap,Wn.fog,{matcap:{value:null}}]),vertexShader:ds.meshmatcap_vert,fragmentShader:ds.meshmatcap_frag},points:{uniforms:Sp([Wn.points,Wn.fog]),vertexShader:ds.points_vert,fragmentShader:ds.points_frag},dashed:{uniforms:Sp([Wn.common,Wn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ds.linedashed_vert,fragmentShader:ds.linedashed_frag},depth:{uniforms:Sp([Wn.common,Wn.displacementmap]),vertexShader:ds.depth_vert,fragmentShader:ds.depth_frag},normal:{uniforms:Sp([Wn.common,Wn.bumpmap,Wn.normalmap,Wn.displacementmap,{opacity:{value:1}}]),vertexShader:ds.meshnormal_vert,fragmentShader:ds.meshnormal_frag},sprite:{uniforms:Sp([Wn.sprite,Wn.fog]),vertexShader:ds.sprite_vert,fragmentShader:ds.sprite_frag},background:{uniforms:{uvTransform:{value:new nf},t2D:{value:null}},vertexShader:ds.background_vert,fragmentShader:ds.background_frag},cube:{uniforms:Sp([Wn.envmap,{opacity:{value:1}}]),vertexShader:ds.cube_vert,fragmentShader:ds.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ds.equirect_vert,fragmentShader:ds.equirect_frag},distanceRGBA:{uniforms:Sp([Wn.common,Wn.displacementmap,{referencePosition:{value:new $e},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ds.distanceRGBA_vert,fragmentShader:ds.distanceRGBA_frag},shadow:{uniforms:Sp([Wn.lights,Wn.fog,{color:{value:new Nn(0)},opacity:{value:1}}]),vertexShader:ds.shadow_vert,fragmentShader:ds.shadow_frag}};Zp.physical={uniforms:Sp([Zp.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ht(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Nn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ht},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Nn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Nn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ds.meshphysical_vert,fragmentShader:ds.meshphysical_frag};function Mye(n,e,t,i,s,o){const l=new Nn(0);let u=s===!0?0:1,d,p,_=null,y=0,b=null;function E(A,I){let L=!1,O=I.isScene===!0?I.background:null;O&&O.isTexture&&(O=e.get(O));const P=n.xr,N=P.getSession&&P.getSession();N&&N.environmentBlendMode==="additive"&&(O=null),O===null?C(l,u):O&&O.isColor&&(C(O,1),L=!0),(n.autoClear||L)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),O&&(O.isCubeTexture||O.mapping===OE)?(p===void 0&&(p=new Fn(new pu(1,1,1),new yd({name:"BackgroundCubeMaterial",uniforms:sE(Zp.cube.uniforms),vertexShader:Zp.cube.vertexShader,fragmentShader:Zp.cube.fragmentShader,side:id,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(z,W,H){this.matrixWorld.copyPosition(H.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(p)),p.material.uniforms.envMap.value=O,p.material.uniforms.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,(_!==O||y!==O.version||b!==n.toneMapping)&&(p.material.needsUpdate=!0,_=O,y=O.version,b=n.toneMapping),p.layers.enableAll(),A.unshift(p,p.geometry,p.material,0,0,null)):O&&O.isTexture&&(d===void 0&&(d=new Fn(new e0(2,2),new yd({name:"BackgroundMaterial",uniforms:sE(Zp.background.uniforms),vertexShader:Zp.background.vertexShader,fragmentShader:Zp.background.fragmentShader,side:e_,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(d)),d.material.uniforms.t2D.value=O,O.matrixAutoUpdate===!0&&O.updateMatrix(),d.material.uniforms.uvTransform.value.copy(O.matrix),(_!==O||y!==O.version||b!==n.toneMapping)&&(d.material.needsUpdate=!0,_=O,y=O.version,b=n.toneMapping),d.layers.enableAll(),A.unshift(d,d.geometry,d.material,0,0,null))}function C(A,I){t.buffers.color.setClear(A.r,A.g,A.b,I,o)}return{getClearColor:function(){return l},setClearColor:function(A,I=1){l.set(A),u=I,C(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(A){u=A,C(l,u)},render:E}}function Iye(n,e,t,i){const s=n.getParameter(34921),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),l=i.isWebGL2||o!==null,u={},d=I(null);let p=d,_=!1;function y(ce,pe,Te,Oe,J){let se=!1;if(l){const ie=A(Oe,Te,pe);p!==ie&&(p=ie,E(p.object)),se=L(ce,Oe,Te,J),se&&O(ce,Oe,Te,J)}else{const ie=pe.wireframe===!0;(p.geometry!==Oe.id||p.program!==Te.id||p.wireframe!==ie)&&(p.geometry=Oe.id,p.program=Te.id,p.wireframe=ie,se=!0)}J!==null&&t.update(J,34963),(se||_)&&(_=!1,U(ce,pe,Te,Oe),J!==null&&n.bindBuffer(34963,t.get(J).buffer))}function b(){return i.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}function E(ce){return i.isWebGL2?n.bindVertexArray(ce):o.bindVertexArrayOES(ce)}function C(ce){return i.isWebGL2?n.deleteVertexArray(ce):o.deleteVertexArrayOES(ce)}function A(ce,pe,Te){const Oe=Te.wireframe===!0;let J=u[ce.id];J===void 0&&(J={},u[ce.id]=J);let se=J[pe.id];se===void 0&&(se={},J[pe.id]=se);let ie=se[Oe];return ie===void 0&&(ie=I(b()),se[Oe]=ie),ie}function I(ce){const pe=[],Te=[],Oe=[];for(let J=0;J<s;J++)pe[J]=0,Te[J]=0,Oe[J]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:pe,enabledAttributes:Te,attributeDivisors:Oe,object:ce,attributes:{},index:null}}function L(ce,pe,Te,Oe){const J=p.attributes,se=pe.attributes;let ie=0;const he=Te.getAttributes();for(const Se in he)if(he[Se].location>=0){const Fe=J[Se];let ke=se[Se];if(ke===void 0&&(Se==="instanceMatrix"&&ce.instanceMatrix&&(ke=ce.instanceMatrix),Se==="instanceColor"&&ce.instanceColor&&(ke=ce.instanceColor)),Fe===void 0||Fe.attribute!==ke||ke&&Fe.data!==ke.data)return!0;ie++}return p.attributesNum!==ie||p.index!==Oe}function O(ce,pe,Te,Oe){const J={},se=pe.attributes;let ie=0;const he=Te.getAttributes();for(const Se in he)if(he[Se].location>=0){let Fe=se[Se];Fe===void 0&&(Se==="instanceMatrix"&&ce.instanceMatrix&&(Fe=ce.instanceMatrix),Se==="instanceColor"&&ce.instanceColor&&(Fe=ce.instanceColor));const ke={};ke.attribute=Fe,Fe&&Fe.data&&(ke.data=Fe.data),J[Se]=ke,ie++}p.attributes=J,p.attributesNum=ie,p.index=Oe}function P(){const ce=p.newAttributes;for(let pe=0,Te=ce.length;pe<Te;pe++)ce[pe]=0}function N(ce){z(ce,0)}function z(ce,pe){const Te=p.newAttributes,Oe=p.enabledAttributes,J=p.attributeDivisors;Te[ce]=1,Oe[ce]===0&&(n.enableVertexAttribArray(ce),Oe[ce]=1),J[ce]!==pe&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ce,pe),J[ce]=pe)}function W(){const ce=p.newAttributes,pe=p.enabledAttributes;for(let Te=0,Oe=pe.length;Te<Oe;Te++)pe[Te]!==ce[Te]&&(n.disableVertexAttribArray(Te),pe[Te]=0)}function H(ce,pe,Te,Oe,J,se){i.isWebGL2===!0&&(Te===5124||Te===5125)?n.vertexAttribIPointer(ce,pe,Te,J,se):n.vertexAttribPointer(ce,pe,Te,Oe,J,se)}function U(ce,pe,Te,Oe){if(i.isWebGL2===!1&&(ce.isInstancedMesh||Oe.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;P();const J=Oe.attributes,se=Te.getAttributes(),ie=pe.defaultAttributeValues;for(const he in se){const Se=se[he];if(Se.location>=0){let Fe=J[he];if(Fe===void 0&&(he==="instanceMatrix"&&ce.instanceMatrix&&(Fe=ce.instanceMatrix),he==="instanceColor"&&ce.instanceColor&&(Fe=ce.instanceColor)),Fe!==void 0){const ke=Fe.normalized,qe=Fe.itemSize,De=t.get(Fe);if(De===void 0)continue;const rt=De.buffer,tt=De.type,ft=De.bytesPerElement;if(Fe.isInterleavedBufferAttribute){const ct=Fe.data,Pe=ct.stride,Ce=Fe.offset;if(ct.isInstancedInterleavedBuffer){for(let je=0;je<Se.locationSize;je++)z(Se.location+je,ct.meshPerAttribute);ce.isInstancedMesh!==!0&&Oe._maxInstanceCount===void 0&&(Oe._maxInstanceCount=ct.meshPerAttribute*ct.count)}else for(let je=0;je<Se.locationSize;je++)N(Se.location+je);n.bindBuffer(34962,rt);for(let je=0;je<Se.locationSize;je++)H(Se.location+je,qe/Se.locationSize,tt,ke,Pe*ft,(Ce+qe/Se.locationSize*je)*ft)}else{if(Fe.isInstancedBufferAttribute){for(let ct=0;ct<Se.locationSize;ct++)z(Se.location+ct,Fe.meshPerAttribute);ce.isInstancedMesh!==!0&&Oe._maxInstanceCount===void 0&&(Oe._maxInstanceCount=Fe.meshPerAttribute*Fe.count)}else for(let ct=0;ct<Se.locationSize;ct++)N(Se.location+ct);n.bindBuffer(34962,rt);for(let ct=0;ct<Se.locationSize;ct++)H(Se.location+ct,qe/Se.locationSize,tt,ke,qe*ft,qe/Se.locationSize*ct*ft)}}else if(ie!==void 0){const ke=ie[he];if(ke!==void 0)switch(ke.length){case 2:n.vertexAttrib2fv(Se.location,ke);break;case 3:n.vertexAttrib3fv(Se.location,ke);break;case 4:n.vertexAttrib4fv(Se.location,ke);break;default:n.vertexAttrib1fv(Se.location,ke)}}}}W()}function Q(){le();for(const ce in u){const pe=u[ce];for(const Te in pe){const Oe=pe[Te];for(const J in Oe)C(Oe[J].object),delete Oe[J];delete pe[Te]}delete u[ce]}}function ne(ce){if(u[ce.id]===void 0)return;const pe=u[ce.id];for(const Te in pe){const Oe=pe[Te];for(const J in Oe)C(Oe[J].object),delete Oe[J];delete pe[Te]}delete u[ce.id]}function oe(ce){for(const pe in u){const Te=u[pe];if(Te[ce.id]===void 0)continue;const Oe=Te[ce.id];for(const J in Oe)C(Oe[J].object),delete Oe[J];delete Te[ce.id]}}function le(){ge(),_=!0,p!==d&&(p=d,E(p.object))}function ge(){d.geometry=null,d.program=null,d.wireframe=!1}return{setup:y,reset:le,resetDefaultState:ge,dispose:Q,releaseStatesOfGeometry:ne,releaseStatesOfProgram:oe,initAttributes:P,enableAttribute:N,disableUnusedAttributes:W}}function Rye(n,e,t,i){const s=i.isWebGL2;let o;function l(p){o=p}function u(p,_){n.drawArrays(o,p,_),t.update(_,o,1)}function d(p,_,y){if(y===0)return;let b,E;if(s)b=n,E="drawArraysInstanced";else if(b=e.get("ANGLE_instanced_arrays"),E="drawArraysInstancedANGLE",b===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}b[E](o,p,_,y),t.update(_,o,y)}this.setMode=l,this.render=u,this.renderInstances=d}function kye(n,e,t){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const H=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(H.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(H){if(H==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";H="mediump"}return H==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const l=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let u=t.precision!==void 0?t.precision:"highp";const d=o(u);d!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",d,"instead."),u=d);const p=l||e.has("WEBGL_draw_buffers"),_=t.logarithmicDepthBuffer===!0,y=n.getParameter(34930),b=n.getParameter(35660),E=n.getParameter(3379),C=n.getParameter(34076),A=n.getParameter(34921),I=n.getParameter(36347),L=n.getParameter(36348),O=n.getParameter(36349),P=b>0,N=l||e.has("OES_texture_float"),z=P&&N,W=l?n.getParameter(36183):0;return{isWebGL2:l,drawBuffers:p,getMaxAnisotropy:s,getMaxPrecision:o,precision:u,logarithmicDepthBuffer:_,maxTextures:y,maxVertexTextures:b,maxTextureSize:E,maxCubemapSize:C,maxAttributes:A,maxVertexUniforms:I,maxVaryings:L,maxFragmentUniforms:O,vertexTextures:P,floatFragmentTextures:N,floatVertexTextures:z,maxSamples:W}}function Oye(n){const e=this;let t=null,i=0,s=!1,o=!1;const l=new V_,u=new nf,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(y,b,E){const C=y.length!==0||b||i!==0||s;return s=b,t=_(y,E,0),i=y.length,C},this.beginShadows=function(){o=!0,_(null)},this.endShadows=function(){o=!1,p()},this.setState=function(y,b,E){const C=y.clippingPlanes,A=y.clipIntersection,I=y.clipShadows,L=n.get(y);if(!s||C===null||C.length===0||o&&!I)o?_(null):p();else{const O=o?0:i,P=O*4;let N=L.clippingState||null;d.value=N,N=_(C,b,P,E);for(let z=0;z!==P;++z)N[z]=t[z];L.clippingState=N,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=O}};function p(){d.value!==t&&(d.value=t,d.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function _(y,b,E,C){const A=y!==null?y.length:0;let I=null;if(A!==0){if(I=d.value,C!==!0||I===null){const L=E+A*4,O=b.matrixWorldInverse;u.getNormalMatrix(O),(I===null||I.length<L)&&(I=new Float32Array(L));for(let P=0,N=E;P!==A;++P,N+=4)l.copy(y[P]).applyMatrix4(O,u),l.normal.toArray(I,N),I[N+3]=l.constant}d.value=I,d.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,I}}function Lye(n){let e=new WeakMap;function t(l,u){return u===qw?l.mapping=Sy:u===Qw&&(l.mapping=Ey),l}function i(l){if(l&&l.isTexture&&l.isRenderTargetTexture===!1){const u=l.mapping;if(u===qw||u===Qw)if(e.has(l)){const d=e.get(l).texture;return t(d,l.mapping)}else{const d=l.image;if(d&&d.height>0){const p=new Oj(d.height/2);return p.fromEquirectangularTexture(n,l),e.set(l,p),l.addEventListener("dispose",s),t(p.texture,l.mapping)}else return null}}return l}function s(l){const u=l.target;u.removeEventListener("dispose",s);const d=e.get(u);d!==void 0&&(e.delete(u),d.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}class J0 extends LE{constructor(e=-1,t=1,i=1,s=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=i-e,l=i+e,u=s+t,d=s-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,_=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=p*this.view.offsetX,l=o+p*this.view.width,u-=_*this.view.offsetY,d=u-_*this.view.height}this.projectionMatrix.makeOrthographic(o,l,u,d,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const $S=4,j4=[.125,.215,.35,.446,.526,.582],Vb=20,fO=new J0,X4=new Nn;let mO=null;const zb=(1+Math.sqrt(5))/2,tS=1/zb,Y4=[new $e(1,1,1),new $e(-1,1,1),new $e(1,1,-1),new $e(-1,1,-1),new $e(0,zb,tS),new $e(0,zb,-tS),new $e(tS,0,zb),new $e(-tS,0,zb),new $e(zb,tS,0),new $e(-zb,tS,0)];class QD{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){mO=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,i,s,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=q4(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=J4(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(mO),e.scissorTest=!1,oA(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Sy||e.mapping===Ey?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),mO=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Tl,minFilter:Tl,generateMipmaps:!1,type:C1,format:Pf,encoding:_g,depthBuffer:!1},s=K4(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=K4(e,t,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Dye(o)),this._blurMaterial=Nye(o,e,t)}return s}_compileMaterial(e){const t=new Fn(this._lodPlanes[0],e);this._renderer.compile(t,fO)}_sceneToCubeUV(e,t,i,s){const o=new Ja(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,p=d.autoClear,_=d.toneMapping;d.getClearColor(X4),d.toneMapping=Qg,d.autoClear=!1;const y=new r0({name:"PMREM.Background",side:id,depthWrite:!1,depthTest:!1}),b=new Fn(new pu,y);let E=!1;const C=e.background;C?C.isColor&&(y.color.copy(C),e.background=null,E=!0):(y.color.copy(X4),E=!0);for(let A=0;A<6;A++){const I=A%3;I===0?(o.up.set(0,l[A],0),o.lookAt(u[A],0,0)):I===1?(o.up.set(0,0,l[A]),o.lookAt(0,u[A],0)):(o.up.set(0,l[A],0),o.lookAt(0,0,u[A]));const L=this._cubeSize;oA(s,I*L,A>2?L:0,L,L),d.setRenderTarget(s),E&&d.render(b,o),d.render(e,o)}b.geometry.dispose(),b.material.dispose(),d.toneMapping=_,d.autoClear=p,e.background=C}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===Sy||e.mapping===Ey;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=q4()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=J4());const o=s?this._cubemapMaterial:this._equirectMaterial,l=new Fn(this._lodPlanes[0],o),u=o.uniforms;u.envMap.value=e;const d=this._cubeSize;oA(t,0,0,3*d,2*d),i.setRenderTarget(t),i.render(l,fO)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=Y4[(s-1)%Y4.length];this._blur(e,s-1,s,o,l)}t.autoClear=i}_blur(e,t,i,s,o){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,i,s,"latitudinal",o),this._halfBlur(l,e,i,i,s,"longitudinal",o)}_halfBlur(e,t,i,s,o,l,u){const d=this._renderer,p=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const _=3,y=new Fn(this._lodPlanes[s],p),b=p.uniforms,E=this._sizeLods[i]-1,C=isFinite(o)?Math.PI/(2*E):2*Math.PI/(2*Vb-1),A=o/C,I=isFinite(o)?1+Math.floor(_*A):Vb;I>Vb&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${I} samples when the maximum is set to ${Vb}`);const L=[];let O=0;for(let H=0;H<Vb;++H){const U=H/A,Q=Math.exp(-U*U/2);L.push(Q),H===0?O+=Q:H<I&&(O+=2*Q)}for(let H=0;H<L.length;H++)L[H]=L[H]/O;b.envMap.value=e.texture,b.samples.value=I,b.weights.value=L,b.latitudinal.value=l==="latitudinal",u&&(b.poleAxis.value=u);const{_lodMax:P}=this;b.dTheta.value=C,b.mipInt.value=P-i;const N=this._sizeLods[s],z=3*N*(s>P-$S?s-P+$S:0),W=4*(this._cubeSize-N);oA(t,z,W,3*N,2*N),d.setRenderTarget(t),d.render(y,fO)}}function Dye(n){const e=[],t=[],i=[];let s=n;const o=n-$S+1+j4.length;for(let l=0;l<o;l++){const u=Math.pow(2,s);t.push(u);let d=1/u;l>n-$S?d=j4[l-n+$S-1]:l===0&&(d=0),i.push(d);const p=1/(u-2),_=-p,y=1+p,b=[_,_,y,_,y,y,_,_,y,y,_,y],E=6,C=6,A=3,I=2,L=1,O=new Float32Array(A*C*E),P=new Float32Array(I*C*E),N=new Float32Array(L*C*E);for(let W=0;W<E;W++){const H=W%3*2/3-1,U=W>2?0:-1,Q=[H,U,0,H+2/3,U,0,H+2/3,U+1,0,H,U,0,H+2/3,U+1,0,H,U+1,0];O.set(Q,A*C*W),P.set(b,I*C*W);const ne=[W,W,W,W,W,W];N.set(ne,L*C*W)}const z=new oi;z.setAttribute("position",new Bo(O,A)),z.setAttribute("uv",new Bo(P,I)),z.setAttribute("faceIndex",new Bo(N,L)),e.push(z),s>$S&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function K4(n,e,t){const i=new Rc(n,e,t);return i.texture.mapping=OE,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function oA(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function Nye(n,e,t){const i=new Float32Array(Vb),s=new $e(0,1,0);return new yd({name:"SphericalGaussianBlur",defines:{n:Vb,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:RP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:af,depthTest:!1,depthWrite:!1})}function J4(){return new yd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:RP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:af,depthTest:!1,depthWrite:!1})}function q4(){return new yd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:RP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:af,depthTest:!1,depthWrite:!1})}function RP(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Bye(n){let e=new WeakMap,t=null;function i(u){if(u&&u.isTexture){const d=u.mapping,p=d===qw||d===Qw,_=d===Sy||d===Ey;if(p||_)if(u.isRenderTargetTexture&&u.needsPMREMUpdate===!0){u.needsPMREMUpdate=!1;let y=e.get(u);return t===null&&(t=new QD(n)),y=p?t.fromEquirectangular(u,y):t.fromCubemap(u,y),e.set(u,y),y.texture}else{if(e.has(u))return e.get(u).texture;{const y=u.image;if(p&&y&&y.height>0||_&&y&&s(y)){t===null&&(t=new QD(n));const b=p?t.fromEquirectangular(u):t.fromCubemap(u);return e.set(u,b),u.addEventListener("dispose",o),b.texture}else return null}}}return u}function s(u){let d=0;const p=6;for(let _=0;_<p;_++)u[_]!==void 0&&d++;return d===p}function o(u){const d=u.target;d.removeEventListener("dispose",o);const p=e.get(d);p!==void 0&&(e.delete(d),p.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:l}}function Pye(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const s=t(i);return s===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function Fye(n,e,t,i){const s={},o=new WeakMap;function l(y){const b=y.target;b.index!==null&&e.remove(b.index);for(const C in b.attributes)e.remove(b.attributes[C]);b.removeEventListener("dispose",l),delete s[b.id];const E=o.get(b);E&&(e.remove(E),o.delete(b)),i.releaseStatesOfGeometry(b),b.isInstancedBufferGeometry===!0&&delete b._maxInstanceCount,t.memory.geometries--}function u(y,b){return s[b.id]===!0||(b.addEventListener("dispose",l),s[b.id]=!0,t.memory.geometries++),b}function d(y){const b=y.attributes;for(const C in b)e.update(b[C],34962);const E=y.morphAttributes;for(const C in E){const A=E[C];for(let I=0,L=A.length;I<L;I++)e.update(A[I],34962)}}function p(y){const b=[],E=y.index,C=y.attributes.position;let A=0;if(E!==null){const O=E.array;A=E.version;for(let P=0,N=O.length;P<N;P+=3){const z=O[P+0],W=O[P+1],H=O[P+2];b.push(z,W,W,H,H,z)}}else{const O=C.array;A=C.version;for(let P=0,N=O.length/3-1;P<N;P+=3){const z=P+0,W=P+1,H=P+2;b.push(z,W,W,H,H,z)}}const I=new(Ij(b)?IP:MP)(b,1);I.version=A;const L=o.get(y);L&&e.remove(L),o.set(y,I)}function _(y){const b=o.get(y);if(b){const E=y.index;E!==null&&b.version<E.version&&p(y)}else p(y);return o.get(y)}return{get:u,update:d,getWireframeAttribute:_}}function Uye(n,e,t,i){const s=i.isWebGL2;let o;function l(b){o=b}let u,d;function p(b){u=b.type,d=b.bytesPerElement}function _(b,E){n.drawElements(o,E,u,b*d),t.update(E,o,1)}function y(b,E,C){if(C===0)return;let A,I;if(s)A=n,I="drawElementsInstanced";else if(A=e.get("ANGLE_instanced_arrays"),I="drawElementsInstancedANGLE",A===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}A[I](o,E,u,b*d,C),t.update(E,o,C)}this.setMode=l,this.setIndex=p,this.render=_,this.renderInstances=y}function zye(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,l,u){switch(t.calls++,l){case 4:t.triangles+=u*(o/3);break;case 1:t.lines+=u*(o/2);break;case 3:t.lines+=u*(o-1);break;case 2:t.lines+=u*o;break;case 0:t.points+=u*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function s(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function Hye(n,e){return n[0]-e[0]}function Gye(n,e){return Math.abs(e[1])-Math.abs(n[1])}function gO(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Uint8Array?t=255:i instanceof Uint16Array?t=65535:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function Wye(n,e,t){const i={},s=new Float32Array(8),o=new WeakMap,l=new ys,u=[];for(let p=0;p<8;p++)u[p]=[p,0];function d(p,_,y,b){const E=p.morphTargetInfluences;if(e.isWebGL2===!0){const C=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,A=C!==void 0?C.length:0;let I=o.get(_);if(I===void 0||I.count!==A){let P=function(){ce.dispose(),o.delete(_),_.removeEventListener("dispose",P)};I!==void 0&&I.texture.dispose();const N=_.morphAttributes.position!==void 0,z=_.morphAttributes.normal!==void 0,W=_.morphAttributes.color!==void 0,H=_.morphAttributes.position||[],U=_.morphAttributes.normal||[],Q=_.morphAttributes.color||[];let ne=0;N===!0&&(ne=1),z===!0&&(ne=2),W===!0&&(ne=3);let oe=_.attributes.position.count*ne,le=1;oe>e.maxTextureSize&&(le=Math.ceil(oe/e.maxTextureSize),oe=e.maxTextureSize);const ge=new Float32Array(oe*le*4*A),ce=new L$(ge,oe,le,A);ce.type=j0,ce.needsUpdate=!0;const pe=ne*4;for(let Te=0;Te<A;Te++){const Oe=H[Te],J=U[Te],se=Q[Te],ie=oe*le*4*Te;for(let he=0;he<Oe.count;he++){const Se=he*pe;N===!0&&(l.fromBufferAttribute(Oe,he),Oe.normalized===!0&&gO(l,Oe),ge[ie+Se+0]=l.x,ge[ie+Se+1]=l.y,ge[ie+Se+2]=l.z,ge[ie+Se+3]=0),z===!0&&(l.fromBufferAttribute(J,he),J.normalized===!0&&gO(l,J),ge[ie+Se+4]=l.x,ge[ie+Se+5]=l.y,ge[ie+Se+6]=l.z,ge[ie+Se+7]=0),W===!0&&(l.fromBufferAttribute(se,he),se.normalized===!0&&gO(l,se),ge[ie+Se+8]=l.x,ge[ie+Se+9]=l.y,ge[ie+Se+10]=l.z,ge[ie+Se+11]=se.itemSize===4?l.w:1)}}I={count:A,texture:ce,size:new Ht(oe,le)},o.set(_,I),_.addEventListener("dispose",P)}let L=0;for(let P=0;P<E.length;P++)L+=E[P];const O=_.morphTargetsRelative?1:1-L;b.getUniforms().setValue(n,"morphTargetBaseInfluence",O),b.getUniforms().setValue(n,"morphTargetInfluences",E),b.getUniforms().setValue(n,"morphTargetsTexture",I.texture,t),b.getUniforms().setValue(n,"morphTargetsTextureSize",I.size)}else{const C=E===void 0?0:E.length;let A=i[_.id];if(A===void 0||A.length!==C){A=[];for(let N=0;N<C;N++)A[N]=[N,0];i[_.id]=A}for(let N=0;N<C;N++){const z=A[N];z[0]=N,z[1]=E[N]}A.sort(Gye);for(let N=0;N<8;N++)N<C&&A[N][1]?(u[N][0]=A[N][0],u[N][1]=A[N][1]):(u[N][0]=Number.MAX_SAFE_INTEGER,u[N][1]=0);u.sort(Hye);const I=_.morphAttributes.position,L=_.morphAttributes.normal;let O=0;for(let N=0;N<8;N++){const z=u[N],W=z[0],H=z[1];W!==Number.MAX_SAFE_INTEGER&&H?(I&&_.getAttribute("morphTarget"+N)!==I[W]&&_.setAttribute("morphTarget"+N,I[W]),L&&_.getAttribute("morphNormal"+N)!==L[W]&&_.setAttribute("morphNormal"+N,L[W]),s[N]=H,O+=H):(I&&_.hasAttribute("morphTarget"+N)===!0&&_.deleteAttribute("morphTarget"+N),L&&_.hasAttribute("morphNormal"+N)===!0&&_.deleteAttribute("morphNormal"+N),s[N]=0)}const P=_.morphTargetsRelative?1:1-O;b.getUniforms().setValue(n,"morphTargetBaseInfluence",P),b.getUniforms().setValue(n,"morphTargetInfluences",s)}}return{update:d}}function Vye(n,e,t,i){let s=new WeakMap;function o(d){const p=i.render.frame,_=d.geometry,y=e.get(d,_);return s.get(y)!==p&&(e.update(y),s.set(y,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",u)===!1&&d.addEventListener("dispose",u),t.update(d.instanceMatrix,34962),d.instanceColor!==null&&t.update(d.instanceColor,34962)),y}function l(){s=new WeakMap}function u(d){const p=d.target;p.removeEventListener("dispose",u),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:o,dispose:l}}const Dj=new lc,Nj=new L$,Bj=new WR,Pj=new B$,Q4=[],Z4=[],eH=new Float32Array(16),tH=new Float32Array(9),nH=new Float32Array(4);function DE(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let o=Q4[s];if(o===void 0&&(o=new Float32Array(s),Q4[s]=o),e!==0){i.toArray(o,0);for(let l=1,u=0;l!==e;++l)u+=t,n[l].toArray(o,u)}return o}function cf(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function hf(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function jR(n,e){let t=Z4[e];t===void 0&&(t=new Int32Array(e),Z4[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function jye(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Xye(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(cf(t,e))return;n.uniform2fv(this.addr,e),hf(t,e)}}function Yye(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(cf(t,e))return;n.uniform3fv(this.addr,e),hf(t,e)}}function Kye(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(cf(t,e))return;n.uniform4fv(this.addr,e),hf(t,e)}}function Jye(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(cf(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),hf(t,e)}else{if(cf(t,i))return;nH.set(i),n.uniformMatrix2fv(this.addr,!1,nH),hf(t,i)}}function qye(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(cf(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),hf(t,e)}else{if(cf(t,i))return;tH.set(i),n.uniformMatrix3fv(this.addr,!1,tH),hf(t,i)}}function Qye(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(cf(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),hf(t,e)}else{if(cf(t,i))return;eH.set(i),n.uniformMatrix4fv(this.addr,!1,eH),hf(t,i)}}function Zye(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function ebe(n,e){const t=this.cache;cf(t,e)||(n.uniform2iv(this.addr,e),hf(t,e))}function tbe(n,e){const t=this.cache;cf(t,e)||(n.uniform3iv(this.addr,e),hf(t,e))}function nbe(n,e){const t=this.cache;cf(t,e)||(n.uniform4iv(this.addr,e),hf(t,e))}function rbe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function ibe(n,e){const t=this.cache;cf(t,e)||(n.uniform2uiv(this.addr,e),hf(t,e))}function sbe(n,e){const t=this.cache;cf(t,e)||(n.uniform3uiv(this.addr,e),hf(t,e))}function obe(n,e){const t=this.cache;cf(t,e)||(n.uniform4uiv(this.addr,e),hf(t,e))}function abe(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2D(e||Dj,s)}function lbe(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||Bj,s)}function ube(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||Pj,s)}function cbe(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||Nj,s)}function hbe(n){switch(n){case 5126:return jye;case 35664:return Xye;case 35665:return Yye;case 35666:return Kye;case 35674:return Jye;case 35675:return qye;case 35676:return Qye;case 5124:case 35670:return Zye;case 35667:case 35671:return ebe;case 35668:case 35672:return tbe;case 35669:case 35673:return nbe;case 5125:return rbe;case 36294:return ibe;case 36295:return sbe;case 36296:return obe;case 35678:case 36198:case 36298:case 36306:case 35682:return abe;case 35679:case 36299:case 36307:return lbe;case 35680:case 36300:case 36308:case 36293:return ube;case 36289:case 36303:case 36311:case 36292:return cbe}}function dbe(n,e){n.uniform1fv(this.addr,e)}function pbe(n,e){const t=DE(e,this.size,2);n.uniform2fv(this.addr,t)}function fbe(n,e){const t=DE(e,this.size,3);n.uniform3fv(this.addr,t)}function mbe(n,e){const t=DE(e,this.size,4);n.uniform4fv(this.addr,t)}function gbe(n,e){const t=DE(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function _be(n,e){const t=DE(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function vbe(n,e){const t=DE(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function ybe(n,e){n.uniform1iv(this.addr,e)}function bbe(n,e){n.uniform2iv(this.addr,e)}function Tbe(n,e){n.uniform3iv(this.addr,e)}function Sbe(n,e){n.uniform4iv(this.addr,e)}function Ebe(n,e){n.uniform1uiv(this.addr,e)}function xbe(n,e){n.uniform2uiv(this.addr,e)}function wbe(n,e){n.uniform3uiv(this.addr,e)}function $be(n,e){n.uniform4uiv(this.addr,e)}function Cbe(n,e,t){const i=e.length,s=jR(t,i);n.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTexture2D(e[o]||Dj,s[o])}function Abe(n,e,t){const i=e.length,s=jR(t,i);n.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTexture3D(e[o]||Bj,s[o])}function Mbe(n,e,t){const i=e.length,s=jR(t,i);n.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTextureCube(e[o]||Pj,s[o])}function Ibe(n,e,t){const i=e.length,s=jR(t,i);n.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||Nj,s[o])}function Rbe(n){switch(n){case 5126:return dbe;case 35664:return pbe;case 35665:return fbe;case 35666:return mbe;case 35674:return gbe;case 35675:return _be;case 35676:return vbe;case 5124:case 35670:return ybe;case 35667:case 35671:return bbe;case 35668:case 35672:return Tbe;case 35669:case 35673:return Sbe;case 5125:return Ebe;case 36294:return xbe;case 36295:return wbe;case 36296:return $be;case 35678:case 36198:case 36298:case 36306:case 35682:return Cbe;case 35679:case 36299:case 36307:return Abe;case 35680:case 36300:case 36308:case 36293:return Mbe;case 36289:case 36303:case 36311:case 36292:return Ibe}}class kbe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=hbe(t.type)}}class Obe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=Rbe(t.type)}}class Lbe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let o=0,l=s.length;o!==l;++o){const u=s[o];u.setValue(e,t[u.id],i)}}}const _O=/(\w+)(\])?(\[|\.)?/g;function rH(n,e){n.seq.push(e),n.map[e.id]=e}function Dbe(n,e,t){const i=n.name,s=i.length;for(_O.lastIndex=0;;){const o=_O.exec(i),l=_O.lastIndex;let u=o[1];const d=o[2]==="]",p=o[3];if(d&&(u=u|0),p===void 0||p==="["&&l+2===s){rH(t,p===void 0?new kbe(u,n,e):new Obe(u,n,e));break}else{let _=t.map[u];_===void 0&&(_=new Lbe(u),rH(t,_)),t=_}}}class yM{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let s=0;s<i;++s){const o=e.getActiveUniform(t,s),l=e.getUniformLocation(t,o.name);Dbe(o,l,this)}}setValue(e,t,i,s){const o=this.map[t];o!==void 0&&o.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let o=0,l=t.length;o!==l;++o){const u=t[o],d=i[u.id];d.needsUpdate!==!1&&u.setValue(e,d.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,o=e.length;s!==o;++s){const l=e[s];l.id in t&&i.push(l)}return i}}function iH(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let Nbe=0;function Bbe(n,e){const t=n.split(`
`),i=[],s=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let l=s;l<o;l++){const u=l+1;i.push(`${u===e?">":" "} ${u}: ${t[l]}`)}return i.join(`
`)}function Pbe(n){switch(n){case _g:return["Linear","( value )"];case ps:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function sH(n,e,t){const i=n.getShaderParameter(e,35713),s=n.getShaderInfoLog(e).trim();if(i&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const l=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+Bbe(n.getShaderSource(e),l)}else return s}function Fbe(n,e){const t=Pbe(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Ube(n,e){let t;switch(e){case ij:t="Linear";break;case sj:t="Reinhard";break;case oj:t="OptimizedCineon";break;case EP:t="ACESFilmic";break;case aj:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function zbe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(qx).join(`
`)}function Hbe(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Gbe(n,e){const t={},i=n.getProgramParameter(e,35721);for(let s=0;s<i;s++){const o=n.getActiveAttrib(e,s),l=o.name;let u=1;o.type===35674&&(u=2),o.type===35675&&(u=3),o.type===35676&&(u=4),t[l]={type:o.type,location:n.getAttribLocation(e,l),locationSize:u}}return t}function qx(n){return n!==""}function oH(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function aH(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Wbe=/^[ \t]*#include +<([\w\d./]+)>/gm;function ZD(n){return n.replace(Wbe,Vbe)}function Vbe(n,e){const t=ds[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return ZD(t)}const jbe=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Xbe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function lH(n){return n.replace(Xbe,Fj).replace(jbe,Ybe)}function Ybe(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Fj(n,e,t,i)}function Fj(n,e,t,i){let s="";for(let o=parseInt(e);o<parseInt(t);o++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return s}function uH(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Kbe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===FR?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===mw?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===e1&&(e="SHADOWMAP_TYPE_VSM"),e}function Jbe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Sy:case Ey:e="ENVMAP_TYPE_CUBE";break;case OE:e="ENVMAP_TYPE_CUBE_UV";break}return e}function qbe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Ey:e="ENVMAP_MODE_REFRACTION";break}return e}function Qbe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case O$:e="ENVMAP_BLENDING_MULTIPLY";break;case nj:e="ENVMAP_BLENDING_MIX";break;case rj:e="ENVMAP_BLENDING_ADD";break}return e}function Zbe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function e1e(n,e,t,i){const s=n.getContext(),o=t.defines;let l=t.vertexShader,u=t.fragmentShader;const d=Kbe(t),p=Jbe(t),_=qbe(t),y=Qbe(t),b=Zbe(t),E=t.isWebGL2?"":zbe(t),C=Hbe(o),A=s.createProgram();let I,L,O=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(I=[C].filter(qx).join(`
`),I.length>0&&(I+=`
`),L=[E,C].filter(qx).join(`
`),L.length>0&&(L+=`
`)):(I=[uH(t),"#define SHADER_NAME "+t.shaderName,C,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+_:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(qx).join(`
`),L=[E,uH(t),"#define SHADER_NAME "+t.shaderName,C,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+_:"",t.envMap?"#define "+y:"",b?"#define CUBEUV_TEXEL_WIDTH "+b.texelWidth:"",b?"#define CUBEUV_TEXEL_HEIGHT "+b.texelHeight:"",b?"#define CUBEUV_MAX_MIP "+b.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Qg?"#define TONE_MAPPING":"",t.toneMapping!==Qg?ds.tonemapping_pars_fragment:"",t.toneMapping!==Qg?Ube("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ds.encodings_pars_fragment,Fbe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(qx).join(`
`)),l=ZD(l),l=oH(l,t),l=aH(l,t),u=ZD(u),u=oH(u,t),u=aH(u,t),l=lH(l),u=lH(u),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(O=`#version 300 es
`,I=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+I,L=["#define varying in",t.glslVersion===JD?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===JD?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+L);const P=O+I+l,N=O+L+u,z=iH(s,35633,P),W=iH(s,35632,N);if(s.attachShader(A,z),s.attachShader(A,W),t.index0AttributeName!==void 0?s.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(A,0,"position"),s.linkProgram(A),n.debug.checkShaderErrors){const Q=s.getProgramInfoLog(A).trim(),ne=s.getShaderInfoLog(z).trim(),oe=s.getShaderInfoLog(W).trim();let le=!0,ge=!0;if(s.getProgramParameter(A,35714)===!1){le=!1;const ce=sH(s,z,"vertex"),pe=sH(s,W,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(A,35715)+`

Program Info Log: `+Q+`
`+ce+`
`+pe)}else Q!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Q):(ne===""||oe==="")&&(ge=!1);ge&&(this.diagnostics={runnable:le,programLog:Q,vertexShader:{log:ne,prefix:I},fragmentShader:{log:oe,prefix:L}})}s.deleteShader(z),s.deleteShader(W);let H;this.getUniforms=function(){return H===void 0&&(H=new yM(s,A)),H};let U;return this.getAttributes=function(){return U===void 0&&(U=Gbe(s,A)),U},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(A),this.program=void 0},this.name=t.shaderName,this.id=Nbe++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=z,this.fragmentShader=W,this}let t1e=0;class n1e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),o=this._getShaderStage(i),l=this._getShaderCacheForMaterial(e);return l.has(s)===!1&&(l.add(s),s.usedTimes++),l.has(o)===!1&&(l.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const i=new r1e(e);t.set(e,i)}return t.get(e)}}class r1e{constructor(e){this.id=t1e++,this.code=e,this.usedTimes=0}}function i1e(n,e,t,i,s,o,l){const u=new f1,d=new n1e,p=[],_=s.isWebGL2,y=s.logarithmicDepthBuffer,b=s.vertexTextures;let E=s.precision;const C={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(U,Q,ne,oe,le){const ge=oe.fog,ce=le.geometry,pe=U.isMeshStandardMaterial?oe.environment:null,Te=(U.isMeshStandardMaterial?t:e).get(U.envMap||pe),Oe=Te&&Te.mapping===OE?Te.image.height:null,J=C[U.type];U.precision!==null&&(E=s.getMaxPrecision(U.precision),E!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",E,"instead."));const se=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,ie=se!==void 0?se.length:0;let he=0;ce.morphAttributes.position!==void 0&&(he=1),ce.morphAttributes.normal!==void 0&&(he=2),ce.morphAttributes.color!==void 0&&(he=3);let Se,Fe,ke,qe;if(J){const ct=Zp[J];Se=ct.vertexShader,Fe=ct.fragmentShader}else Se=U.vertexShader,Fe=U.fragmentShader,d.update(U),ke=d.getVertexShaderID(U),qe=d.getFragmentShaderID(U);const De=n.getRenderTarget(),rt=U.alphaTest>0,tt=U.clearcoat>0,ft=U.iridescence>0;return{isWebGL2:_,shaderID:J,shaderName:U.type,vertexShader:Se,fragmentShader:Fe,defines:U.defines,customVertexShaderID:ke,customFragmentShaderID:qe,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:E,instancing:le.isInstancedMesh===!0,instancingColor:le.isInstancedMesh===!0&&le.instanceColor!==null,supportsVertexTextures:b,outputEncoding:De===null?n.outputEncoding:De.isXRRenderTarget===!0?De.texture.encoding:_g,map:!!U.map,matcap:!!U.matcap,envMap:!!Te,envMapMode:Te&&Te.mapping,envMapCubeUVHeight:Oe,lightMap:!!U.lightMap,aoMap:!!U.aoMap,emissiveMap:!!U.emissiveMap,bumpMap:!!U.bumpMap,normalMap:!!U.normalMap,objectSpaceNormalMap:U.normalMapType===$j,tangentSpaceNormalMap:U.normalMapType===F1,decodeVideoTexture:!!U.map&&U.map.isVideoTexture===!0&&U.map.encoding===ps,clearcoat:tt,clearcoatMap:tt&&!!U.clearcoatMap,clearcoatRoughnessMap:tt&&!!U.clearcoatRoughnessMap,clearcoatNormalMap:tt&&!!U.clearcoatNormalMap,iridescence:ft,iridescenceMap:ft&&!!U.iridescenceMap,iridescenceThicknessMap:ft&&!!U.iridescenceThicknessMap,displacementMap:!!U.displacementMap,roughnessMap:!!U.roughnessMap,metalnessMap:!!U.metalnessMap,specularMap:!!U.specularMap,specularIntensityMap:!!U.specularIntensityMap,specularColorMap:!!U.specularColorMap,opaque:U.transparent===!1&&U.blending===ev,alphaMap:!!U.alphaMap,alphaTest:rt,gradientMap:!!U.gradientMap,sheen:U.sheen>0,sheenColorMap:!!U.sheenColorMap,sheenRoughnessMap:!!U.sheenRoughnessMap,transmission:U.transmission>0,transmissionMap:!!U.transmissionMap,thicknessMap:!!U.thicknessMap,combine:U.combine,vertexTangents:!!U.normalMap&&!!ce.attributes.tangent,vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,vertexUvs:!!U.map||!!U.bumpMap||!!U.normalMap||!!U.specularMap||!!U.alphaMap||!!U.emissiveMap||!!U.roughnessMap||!!U.metalnessMap||!!U.clearcoatMap||!!U.clearcoatRoughnessMap||!!U.clearcoatNormalMap||!!U.iridescenceMap||!!U.iridescenceThicknessMap||!!U.displacementMap||!!U.transmissionMap||!!U.thicknessMap||!!U.specularIntensityMap||!!U.specularColorMap||!!U.sheenColorMap||!!U.sheenRoughnessMap,uvsVertexOnly:!(U.map||U.bumpMap||U.normalMap||U.specularMap||U.alphaMap||U.emissiveMap||U.roughnessMap||U.metalnessMap||U.clearcoatNormalMap||U.iridescenceMap||U.iridescenceThicknessMap||U.transmission>0||U.transmissionMap||U.thicknessMap||U.specularIntensityMap||U.specularColorMap||U.sheen>0||U.sheenColorMap||U.sheenRoughnessMap)&&!!U.displacementMap,fog:!!ge,useFog:U.fog===!0,fogExp2:ge&&ge.isFogExp2,flatShading:!!U.flatShading,sizeAttenuation:U.sizeAttenuation,logarithmicDepthBuffer:y,skinning:le.isSkinnedMesh===!0,morphTargets:ce.morphAttributes.position!==void 0,morphNormals:ce.morphAttributes.normal!==void 0,morphColors:ce.morphAttributes.color!==void 0,morphTargetsCount:ie,morphTextureStride:he,numDirLights:Q.directional.length,numPointLights:Q.point.length,numSpotLights:Q.spot.length,numRectAreaLights:Q.rectArea.length,numHemiLights:Q.hemi.length,numDirLightShadows:Q.directionalShadowMap.length,numPointLightShadows:Q.pointShadowMap.length,numSpotLightShadows:Q.spotShadowMap.length,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:U.dithering,shadowMapEnabled:n.shadowMap.enabled&&ne.length>0,shadowMapType:n.shadowMap.type,toneMapping:U.toneMapped?n.toneMapping:Qg,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===tf,flipSided:U.side===id,useDepthPacking:!!U.depthPacking,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionDerivatives:U.extensions&&U.extensions.derivatives,extensionFragDepth:U.extensions&&U.extensions.fragDepth,extensionDrawBuffers:U.extensions&&U.extensions.drawBuffers,extensionShaderTextureLOD:U.extensions&&U.extensions.shaderTextureLOD,rendererExtensionFragDepth:_||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:_||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:_||i.has("EXT_shader_texture_lod"),customProgramCacheKey:U.customProgramCacheKey()}}function I(U){const Q=[];if(U.shaderID?Q.push(U.shaderID):(Q.push(U.customVertexShaderID),Q.push(U.customFragmentShaderID)),U.defines!==void 0)for(const ne in U.defines)Q.push(ne),Q.push(U.defines[ne]);return U.isRawShaderMaterial===!1&&(L(Q,U),O(Q,U),Q.push(n.outputEncoding)),Q.push(U.customProgramCacheKey),Q.join()}function L(U,Q){U.push(Q.precision),U.push(Q.outputEncoding),U.push(Q.envMapMode),U.push(Q.envMapCubeUVHeight),U.push(Q.combine),U.push(Q.vertexUvs),U.push(Q.fogExp2),U.push(Q.sizeAttenuation),U.push(Q.morphTargetsCount),U.push(Q.morphAttributeCount),U.push(Q.numDirLights),U.push(Q.numPointLights),U.push(Q.numSpotLights),U.push(Q.numHemiLights),U.push(Q.numRectAreaLights),U.push(Q.numDirLightShadows),U.push(Q.numPointLightShadows),U.push(Q.numSpotLightShadows),U.push(Q.shadowMapType),U.push(Q.toneMapping),U.push(Q.numClippingPlanes),U.push(Q.numClipIntersection),U.push(Q.depthPacking)}function O(U,Q){u.disableAll(),Q.isWebGL2&&u.enable(0),Q.supportsVertexTextures&&u.enable(1),Q.instancing&&u.enable(2),Q.instancingColor&&u.enable(3),Q.map&&u.enable(4),Q.matcap&&u.enable(5),Q.envMap&&u.enable(6),Q.lightMap&&u.enable(7),Q.aoMap&&u.enable(8),Q.emissiveMap&&u.enable(9),Q.bumpMap&&u.enable(10),Q.normalMap&&u.enable(11),Q.objectSpaceNormalMap&&u.enable(12),Q.tangentSpaceNormalMap&&u.enable(13),Q.clearcoat&&u.enable(14),Q.clearcoatMap&&u.enable(15),Q.clearcoatRoughnessMap&&u.enable(16),Q.clearcoatNormalMap&&u.enable(17),Q.iridescence&&u.enable(18),Q.iridescenceMap&&u.enable(19),Q.iridescenceThicknessMap&&u.enable(20),Q.displacementMap&&u.enable(21),Q.specularMap&&u.enable(22),Q.roughnessMap&&u.enable(23),Q.metalnessMap&&u.enable(24),Q.gradientMap&&u.enable(25),Q.alphaMap&&u.enable(26),Q.alphaTest&&u.enable(27),Q.vertexColors&&u.enable(28),Q.vertexAlphas&&u.enable(29),Q.vertexUvs&&u.enable(30),Q.vertexTangents&&u.enable(31),Q.uvsVertexOnly&&u.enable(32),Q.fog&&u.enable(33),U.push(u.mask),u.disableAll(),Q.useFog&&u.enable(0),Q.flatShading&&u.enable(1),Q.logarithmicDepthBuffer&&u.enable(2),Q.skinning&&u.enable(3),Q.morphTargets&&u.enable(4),Q.morphNormals&&u.enable(5),Q.morphColors&&u.enable(6),Q.premultipliedAlpha&&u.enable(7),Q.shadowMapEnabled&&u.enable(8),Q.physicallyCorrectLights&&u.enable(9),Q.doubleSided&&u.enable(10),Q.flipSided&&u.enable(11),Q.useDepthPacking&&u.enable(12),Q.dithering&&u.enable(13),Q.specularIntensityMap&&u.enable(14),Q.specularColorMap&&u.enable(15),Q.transmission&&u.enable(16),Q.transmissionMap&&u.enable(17),Q.thicknessMap&&u.enable(18),Q.sheen&&u.enable(19),Q.sheenColorMap&&u.enable(20),Q.sheenRoughnessMap&&u.enable(21),Q.decodeVideoTexture&&u.enable(22),Q.opaque&&u.enable(23),U.push(u.mask)}function P(U){const Q=C[U.type];let ne;if(Q){const oe=Zp[Q];ne=N$.clone(oe.uniforms)}else ne=U.uniforms;return ne}function N(U,Q){let ne;for(let oe=0,le=p.length;oe<le;oe++){const ge=p[oe];if(ge.cacheKey===Q){ne=ge,++ne.usedTimes;break}}return ne===void 0&&(ne=new e1e(n,Q,U,o),p.push(ne)),ne}function z(U){if(--U.usedTimes===0){const Q=p.indexOf(U);p[Q]=p[p.length-1],p.pop(),U.destroy()}}function W(U){d.remove(U)}function H(){d.dispose()}return{getParameters:A,getProgramCacheKey:I,getUniforms:P,acquireProgram:N,releaseProgram:z,releaseShaderCache:W,programs:p,dispose:H}}function s1e(){let n=new WeakMap;function e(o){let l=n.get(o);return l===void 0&&(l={},n.set(o,l)),l}function t(o){n.delete(o)}function i(o,l,u){n.get(o)[l]=u}function s(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:s}}function o1e(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function cH(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function hH(){const n=[];let e=0;const t=[],i=[],s=[];function o(){e=0,t.length=0,i.length=0,s.length=0}function l(y,b,E,C,A,I){let L=n[e];return L===void 0?(L={id:y.id,object:y,geometry:b,material:E,groupOrder:C,renderOrder:y.renderOrder,z:A,group:I},n[e]=L):(L.id=y.id,L.object=y,L.geometry=b,L.material=E,L.groupOrder=C,L.renderOrder=y.renderOrder,L.z=A,L.group=I),e++,L}function u(y,b,E,C,A,I){const L=l(y,b,E,C,A,I);E.transmission>0?i.push(L):E.transparent===!0?s.push(L):t.push(L)}function d(y,b,E,C,A,I){const L=l(y,b,E,C,A,I);E.transmission>0?i.unshift(L):E.transparent===!0?s.unshift(L):t.unshift(L)}function p(y,b){t.length>1&&t.sort(y||o1e),i.length>1&&i.sort(b||cH),s.length>1&&s.sort(b||cH)}function _(){for(let y=e,b=n.length;y<b;y++){const E=n[y];if(E.id===null)break;E.id=null,E.object=null,E.geometry=null,E.material=null,E.group=null}}return{opaque:t,transmissive:i,transparent:s,init:o,push:u,unshift:d,finish:_,sort:p}}function a1e(){let n=new WeakMap;function e(i,s){let o;return n.has(i)===!1?(o=new hH,n.set(i,[o])):s>=n.get(i).length?(o=new hH,n.get(i).push(o)):o=n.get(i)[s],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function l1e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new $e,color:new Nn};break;case"SpotLight":t={position:new $e,direction:new $e,color:new Nn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new $e,color:new Nn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new $e,skyColor:new Nn,groundColor:new Nn};break;case"RectAreaLight":t={color:new Nn,position:new $e,halfWidth:new $e,halfHeight:new $e};break}return n[e.id]=t,t}}}function u1e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ht};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ht};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ht,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let c1e=0;function h1e(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function d1e(n,e){const t=new l1e,i=u1e(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let _=0;_<9;_++)s.probe.push(new $e);const o=new $e,l=new Qr,u=new Qr;function d(_,y){let b=0,E=0,C=0;for(let Q=0;Q<9;Q++)s.probe[Q].set(0,0,0);let A=0,I=0,L=0,O=0,P=0,N=0,z=0,W=0;_.sort(h1e);const H=y!==!0?Math.PI:1;for(let Q=0,ne=_.length;Q<ne;Q++){const oe=_[Q],le=oe.color,ge=oe.intensity,ce=oe.distance,pe=oe.shadow&&oe.shadow.map?oe.shadow.map.texture:null;if(oe.isAmbientLight)b+=le.r*ge*H,E+=le.g*ge*H,C+=le.b*ge*H;else if(oe.isLightProbe)for(let Te=0;Te<9;Te++)s.probe[Te].addScaledVector(oe.sh.coefficients[Te],ge);else if(oe.isDirectionalLight){const Te=t.get(oe);if(Te.color.copy(oe.color).multiplyScalar(oe.intensity*H),oe.castShadow){const Oe=oe.shadow,J=i.get(oe);J.shadowBias=Oe.bias,J.shadowNormalBias=Oe.normalBias,J.shadowRadius=Oe.radius,J.shadowMapSize=Oe.mapSize,s.directionalShadow[A]=J,s.directionalShadowMap[A]=pe,s.directionalShadowMatrix[A]=oe.shadow.matrix,N++}s.directional[A]=Te,A++}else if(oe.isSpotLight){const Te=t.get(oe);if(Te.position.setFromMatrixPosition(oe.matrixWorld),Te.color.copy(le).multiplyScalar(ge*H),Te.distance=ce,Te.coneCos=Math.cos(oe.angle),Te.penumbraCos=Math.cos(oe.angle*(1-oe.penumbra)),Te.decay=oe.decay,oe.castShadow){const Oe=oe.shadow,J=i.get(oe);J.shadowBias=Oe.bias,J.shadowNormalBias=Oe.normalBias,J.shadowRadius=Oe.radius,J.shadowMapSize=Oe.mapSize,s.spotShadow[L]=J,s.spotShadowMap[L]=pe,s.spotShadowMatrix[L]=oe.shadow.matrix,W++}s.spot[L]=Te,L++}else if(oe.isRectAreaLight){const Te=t.get(oe);Te.color.copy(le).multiplyScalar(ge),Te.halfWidth.set(oe.width*.5,0,0),Te.halfHeight.set(0,oe.height*.5,0),s.rectArea[O]=Te,O++}else if(oe.isPointLight){const Te=t.get(oe);if(Te.color.copy(oe.color).multiplyScalar(oe.intensity*H),Te.distance=oe.distance,Te.decay=oe.decay,oe.castShadow){const Oe=oe.shadow,J=i.get(oe);J.shadowBias=Oe.bias,J.shadowNormalBias=Oe.normalBias,J.shadowRadius=Oe.radius,J.shadowMapSize=Oe.mapSize,J.shadowCameraNear=Oe.camera.near,J.shadowCameraFar=Oe.camera.far,s.pointShadow[I]=J,s.pointShadowMap[I]=pe,s.pointShadowMatrix[I]=oe.shadow.matrix,z++}s.point[I]=Te,I++}else if(oe.isHemisphereLight){const Te=t.get(oe);Te.skyColor.copy(oe.color).multiplyScalar(ge*H),Te.groundColor.copy(oe.groundColor).multiplyScalar(ge*H),s.hemi[P]=Te,P++}}O>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=Wn.LTC_FLOAT_1,s.rectAreaLTC2=Wn.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(s.rectAreaLTC1=Wn.LTC_HALF_1,s.rectAreaLTC2=Wn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=b,s.ambient[1]=E,s.ambient[2]=C;const U=s.hash;(U.directionalLength!==A||U.pointLength!==I||U.spotLength!==L||U.rectAreaLength!==O||U.hemiLength!==P||U.numDirectionalShadows!==N||U.numPointShadows!==z||U.numSpotShadows!==W)&&(s.directional.length=A,s.spot.length=L,s.rectArea.length=O,s.point.length=I,s.hemi.length=P,s.directionalShadow.length=N,s.directionalShadowMap.length=N,s.pointShadow.length=z,s.pointShadowMap.length=z,s.spotShadow.length=W,s.spotShadowMap.length=W,s.directionalShadowMatrix.length=N,s.pointShadowMatrix.length=z,s.spotShadowMatrix.length=W,U.directionalLength=A,U.pointLength=I,U.spotLength=L,U.rectAreaLength=O,U.hemiLength=P,U.numDirectionalShadows=N,U.numPointShadows=z,U.numSpotShadows=W,s.version=c1e++)}function p(_,y){let b=0,E=0,C=0,A=0,I=0;const L=y.matrixWorldInverse;for(let O=0,P=_.length;O<P;O++){const N=_[O];if(N.isDirectionalLight){const z=s.directional[b];z.direction.setFromMatrixPosition(N.matrixWorld),o.setFromMatrixPosition(N.target.matrixWorld),z.direction.sub(o),z.direction.transformDirection(L),b++}else if(N.isSpotLight){const z=s.spot[C];z.position.setFromMatrixPosition(N.matrixWorld),z.position.applyMatrix4(L),z.direction.setFromMatrixPosition(N.matrixWorld),o.setFromMatrixPosition(N.target.matrixWorld),z.direction.sub(o),z.direction.transformDirection(L),C++}else if(N.isRectAreaLight){const z=s.rectArea[A];z.position.setFromMatrixPosition(N.matrixWorld),z.position.applyMatrix4(L),u.identity(),l.copy(N.matrixWorld),l.premultiply(L),u.extractRotation(l),z.halfWidth.set(N.width*.5,0,0),z.halfHeight.set(0,N.height*.5,0),z.halfWidth.applyMatrix4(u),z.halfHeight.applyMatrix4(u),A++}else if(N.isPointLight){const z=s.point[E];z.position.setFromMatrixPosition(N.matrixWorld),z.position.applyMatrix4(L),E++}else if(N.isHemisphereLight){const z=s.hemi[I];z.direction.setFromMatrixPosition(N.matrixWorld),z.direction.transformDirection(L),I++}}}return{setup:d,setupView:p,state:s}}function dH(n,e){const t=new d1e(n,e),i=[],s=[];function o(){i.length=0,s.length=0}function l(_){i.push(_)}function u(_){s.push(_)}function d(_){t.setup(i,_)}function p(_){t.setupView(i,_)}return{init:o,state:{lightsArray:i,shadowsArray:s,lights:t},setupLights:d,setupLightsView:p,pushLight:l,pushShadow:u}}function p1e(n,e){let t=new WeakMap;function i(o,l=0){let u;return t.has(o)===!1?(u=new dH(n,e),t.set(o,[u])):l>=t.get(o).length?(u=new dH(n,e),t.get(o).push(u)):u=t.get(o)[l],u}function s(){t=new WeakMap}return{get:i,dispose:s}}class P$ extends sd{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Oy,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class XR extends sd{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new $e,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const f1e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,m1e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function g1e(n,e,t){let i=new VR;const s=new Ht,o=new Ht,l=new ys,u=new P$({depthPacking:iE}),d=new XR,p={},_=t.maxTextureSize,y={0:id,1:e_,2:tf},b=new yd({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ht},radius:{value:4}},vertexShader:f1e,fragmentShader:m1e}),E=b.clone();E.defines.HORIZONTAL_PASS=1;const C=new oi;C.setAttribute("position",new Bo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new Fn(C,b),I=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=FR,this.render=function(N,z,W){if(I.enabled===!1||I.autoUpdate===!1&&I.needsUpdate===!1||N.length===0)return;const H=n.getRenderTarget(),U=n.getActiveCubeFace(),Q=n.getActiveMipmapLevel(),ne=n.state;ne.setBlending(af),ne.buffers.color.setClear(1,1,1,1),ne.buffers.depth.setTest(!0),ne.setScissorTest(!1);for(let oe=0,le=N.length;oe<le;oe++){const ge=N[oe],ce=ge.shadow;if(ce===void 0){console.warn("THREE.WebGLShadowMap:",ge,"has no shadow.");continue}if(ce.autoUpdate===!1&&ce.needsUpdate===!1)continue;s.copy(ce.mapSize);const pe=ce.getFrameExtents();if(s.multiply(pe),o.copy(ce.mapSize),(s.x>_||s.y>_)&&(s.x>_&&(o.x=Math.floor(_/pe.x),s.x=o.x*pe.x,ce.mapSize.x=o.x),s.y>_&&(o.y=Math.floor(_/pe.y),s.y=o.y*pe.y,ce.mapSize.y=o.y)),ce.map===null){const Oe=this.type!==e1?{minFilter:Gl,magFilter:Gl}:{};ce.map=new Rc(s.x,s.y,Oe),ce.map.texture.name=ge.name+".shadowMap",ce.camera.updateProjectionMatrix()}n.setRenderTarget(ce.map),n.clear();const Te=ce.getViewportCount();for(let Oe=0;Oe<Te;Oe++){const J=ce.getViewport(Oe);l.set(o.x*J.x,o.y*J.y,o.x*J.z,o.y*J.w),ne.viewport(l),ce.updateMatrices(ge,Oe),i=ce.getFrustum(),P(z,W,ce.camera,ge,this.type)}ce.isPointLightShadow!==!0&&this.type===e1&&L(ce,W),ce.needsUpdate=!1}I.needsUpdate=!1,n.setRenderTarget(H,U,Q)};function L(N,z){const W=e.update(A);b.defines.VSM_SAMPLES!==N.blurSamples&&(b.defines.VSM_SAMPLES=N.blurSamples,E.defines.VSM_SAMPLES=N.blurSamples,b.needsUpdate=!0,E.needsUpdate=!0),N.mapPass===null&&(N.mapPass=new Rc(s.x,s.y)),b.uniforms.shadow_pass.value=N.map.texture,b.uniforms.resolution.value=N.mapSize,b.uniforms.radius.value=N.radius,n.setRenderTarget(N.mapPass),n.clear(),n.renderBufferDirect(z,null,W,b,A,null),E.uniforms.shadow_pass.value=N.mapPass.texture,E.uniforms.resolution.value=N.mapSize,E.uniforms.radius.value=N.radius,n.setRenderTarget(N.map),n.clear(),n.renderBufferDirect(z,null,W,E,A,null)}function O(N,z,W,H,U,Q){let ne=null;const oe=W.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(oe!==void 0?ne=oe:ne=W.isPointLight===!0?d:u,n.localClippingEnabled&&z.clipShadows===!0&&Array.isArray(z.clippingPlanes)&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0){const le=ne.uuid,ge=z.uuid;let ce=p[le];ce===void 0&&(ce={},p[le]=ce);let pe=ce[ge];pe===void 0&&(pe=ne.clone(),ce[ge]=pe),ne=pe}return ne.visible=z.visible,ne.wireframe=z.wireframe,Q===e1?ne.side=z.shadowSide!==null?z.shadowSide:z.side:ne.side=z.shadowSide!==null?z.shadowSide:y[z.side],ne.alphaMap=z.alphaMap,ne.alphaTest=z.alphaTest,ne.clipShadows=z.clipShadows,ne.clippingPlanes=z.clippingPlanes,ne.clipIntersection=z.clipIntersection,ne.displacementMap=z.displacementMap,ne.displacementScale=z.displacementScale,ne.displacementBias=z.displacementBias,ne.wireframeLinewidth=z.wireframeLinewidth,ne.linewidth=z.linewidth,W.isPointLight===!0&&ne.isMeshDistanceMaterial===!0&&(ne.referencePosition.setFromMatrixPosition(W.matrixWorld),ne.nearDistance=H,ne.farDistance=U),ne}function P(N,z,W,H,U){if(N.visible===!1)return;if(N.layers.test(z.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&U===e1)&&(!N.frustumCulled||i.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(W.matrixWorldInverse,N.matrixWorld);const ne=e.update(N),oe=N.material;if(Array.isArray(oe)){const le=ne.groups;for(let ge=0,ce=le.length;ge<ce;ge++){const pe=le[ge],Te=oe[pe.materialIndex];if(Te&&Te.visible){const Oe=O(N,Te,H,W.near,W.far,U);n.renderBufferDirect(W,null,ne,Oe,N,pe)}}}else if(oe.visible){const le=O(N,oe,H,W.near,W.far,U);n.renderBufferDirect(W,null,ne,le,N,null)}}const Q=N.children;for(let ne=0,oe=Q.length;ne<oe;ne++)P(Q[ne],z,W,H,U)}}function _1e(n,e,t){const i=t.isWebGL2;function s(){let ze=!1;const Yt=new ys;let _t=null;const Kt=new ys(0,0,0,0);return{setMask:function(Xt){_t!==Xt&&!ze&&(n.colorMask(Xt,Xt,Xt,Xt),_t=Xt)},setLocked:function(Xt){ze=Xt},setClear:function(Xt,Dn,ii,Lr,Si){Si===!0&&(Xt*=Lr,Dn*=Lr,ii*=Lr),Yt.set(Xt,Dn,ii,Lr),Kt.equals(Yt)===!1&&(n.clearColor(Xt,Dn,ii,Lr),Kt.copy(Yt))},reset:function(){ze=!1,_t=null,Kt.set(-1,0,0,0)}}}function o(){let ze=!1,Yt=null,_t=null,Kt=null;return{setTest:function(Xt){Xt?rt(2929):tt(2929)},setMask:function(Xt){Yt!==Xt&&!ze&&(n.depthMask(Xt),Yt=Xt)},setFunc:function(Xt){if(_t!==Xt){if(Xt)switch(Xt){case K7:n.depthFunc(512);break;case J7:n.depthFunc(519);break;case q7:n.depthFunc(513);break;case dI:n.depthFunc(515);break;case Q7:n.depthFunc(514);break;case Z7:n.depthFunc(518);break;case ej:n.depthFunc(516);break;case tj:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);_t=Xt}},setLocked:function(Xt){ze=Xt},setClear:function(Xt){Kt!==Xt&&(n.clearDepth(Xt),Kt=Xt)},reset:function(){ze=!1,Yt=null,_t=null,Kt=null}}}function l(){let ze=!1,Yt=null,_t=null,Kt=null,Xt=null,Dn=null,ii=null,Lr=null,Si=null;return{setTest:function(Er){ze||(Er?rt(2960):tt(2960))},setMask:function(Er){Yt!==Er&&!ze&&(n.stencilMask(Er),Yt=Er)},setFunc:function(Er,ir,te){(_t!==Er||Kt!==ir||Xt!==te)&&(n.stencilFunc(Er,ir,te),_t=Er,Kt=ir,Xt=te)},setOp:function(Er,ir,te){(Dn!==Er||ii!==ir||Lr!==te)&&(n.stencilOp(Er,ir,te),Dn=Er,ii=ir,Lr=te)},setLocked:function(Er){ze=Er},setClear:function(Er){Si!==Er&&(n.clearStencil(Er),Si=Er)},reset:function(){ze=!1,Yt=null,_t=null,Kt=null,Xt=null,Dn=null,ii=null,Lr=null,Si=null}}}const u=new s,d=new o,p=new l,_=new WeakMap,y=new WeakMap;let b={},E={},C=new WeakMap,A=[],I=null,L=!1,O=null,P=null,N=null,z=null,W=null,H=null,U=null,Q=!1,ne=null,oe=null,le=null,ge=null,ce=null;const pe=n.getParameter(35661);let Te=!1,Oe=0;const J=n.getParameter(7938);J.indexOf("WebGL")!==-1?(Oe=parseFloat(/^WebGL (\d)/.exec(J)[1]),Te=Oe>=1):J.indexOf("OpenGL ES")!==-1&&(Oe=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),Te=Oe>=2);let se=null,ie={};const he=n.getParameter(3088),Se=n.getParameter(2978),Fe=new ys().fromArray(he),ke=new ys().fromArray(Se);function qe(ze,Yt,_t){const Kt=new Uint8Array(4),Xt=n.createTexture();n.bindTexture(ze,Xt),n.texParameteri(ze,10241,9728),n.texParameteri(ze,10240,9728);for(let Dn=0;Dn<_t;Dn++)n.texImage2D(Yt+Dn,0,6408,1,1,0,6408,5121,Kt);return Xt}const De={};De[3553]=qe(3553,3553,1),De[34067]=qe(34067,34069,6),u.setClear(0,0,0,1),d.setClear(1),p.setClear(0),rt(2929),d.setFunc(dI),vt(!1),It(xD),rt(2884),it(af);function rt(ze){b[ze]!==!0&&(n.enable(ze),b[ze]=!0)}function tt(ze){b[ze]!==!1&&(n.disable(ze),b[ze]=!1)}function ft(ze,Yt){return E[ze]!==Yt?(n.bindFramebuffer(ze,Yt),E[ze]=Yt,i&&(ze===36009&&(E[36160]=Yt),ze===36160&&(E[36009]=Yt)),!0):!1}function ct(ze,Yt){let _t=A,Kt=!1;if(ze)if(_t=C.get(Yt),_t===void 0&&(_t=[],C.set(Yt,_t)),ze.isWebGLMultipleRenderTargets){const Xt=ze.texture;if(_t.length!==Xt.length||_t[0]!==36064){for(let Dn=0,ii=Xt.length;Dn<ii;Dn++)_t[Dn]=36064+Dn;_t.length=Xt.length,Kt=!0}}else _t[0]!==36064&&(_t[0]=36064,Kt=!0);else _t[0]!==1029&&(_t[0]=1029,Kt=!0);Kt&&(t.isWebGL2?n.drawBuffers(_t):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(_t))}function Pe(ze){return I!==ze?(n.useProgram(ze),I=ze,!0):!1}const Ce={[Wb]:32774,[F7]:32778,[SP]:32779};if(i)Ce[CD]=32775,Ce[AD]=32776;else{const ze=e.get("EXT_blend_minmax");ze!==null&&(Ce[CD]=ze.MIN_EXT,Ce[AD]=ze.MAX_EXT)}const je={[U7]:0,[z7]:1,[H7]:768,[UR]:770,[Y7]:776,[j7]:774,[W7]:772,[G7]:769,[zR]:771,[X7]:775,[V7]:773};function it(ze,Yt,_t,Kt,Xt,Dn,ii,Lr){if(ze===af){L===!0&&(tt(3042),L=!1);return}if(L===!1&&(rt(3042),L=!0),ze!==P7){if(ze!==O||Lr!==Q){if((P!==Wb||W!==Wb)&&(n.blendEquation(32774),P=Wb,W=Wb),Lr)switch(ze){case ev:n.blendFuncSeparate(1,771,1,771);break;case hI:n.blendFunc(1,1);break;case wD:n.blendFuncSeparate(0,769,0,1);break;case $D:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ze);break}else switch(ze){case ev:n.blendFuncSeparate(770,771,1,771);break;case hI:n.blendFunc(770,1);break;case wD:n.blendFuncSeparate(0,769,0,1);break;case $D:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ze);break}N=null,z=null,H=null,U=null,O=ze,Q=Lr}return}Xt=Xt||Yt,Dn=Dn||_t,ii=ii||Kt,(Yt!==P||Xt!==W)&&(n.blendEquationSeparate(Ce[Yt],Ce[Xt]),P=Yt,W=Xt),(_t!==N||Kt!==z||Dn!==H||ii!==U)&&(n.blendFuncSeparate(je[_t],je[Kt],je[Dn],je[ii]),N=_t,z=Kt,H=Dn,U=ii),O=ze,Q=null}function ot(ze,Yt){ze.side===tf?tt(2884):rt(2884);let _t=ze.side===id;Yt&&(_t=!_t),vt(_t),ze.blending===ev&&ze.transparent===!1?it(af):it(ze.blending,ze.blendEquation,ze.blendSrc,ze.blendDst,ze.blendEquationAlpha,ze.blendSrcAlpha,ze.blendDstAlpha,ze.premultipliedAlpha),d.setFunc(ze.depthFunc),d.setTest(ze.depthTest),d.setMask(ze.depthWrite),u.setMask(ze.colorWrite);const Kt=ze.stencilWrite;p.setTest(Kt),Kt&&(p.setMask(ze.stencilWriteMask),p.setFunc(ze.stencilFunc,ze.stencilRef,ze.stencilFuncMask),p.setOp(ze.stencilFail,ze.stencilZFail,ze.stencilZPass)),kt(ze.polygonOffset,ze.polygonOffsetFactor,ze.polygonOffsetUnits),ze.alphaToCoverage===!0?rt(32926):tt(32926)}function vt(ze){ne!==ze&&(ze?n.frontFace(2304):n.frontFace(2305),ne=ze)}function It(ze){ze!==L7?(rt(2884),ze!==oe&&(ze===xD?n.cullFace(1029):ze===D7?n.cullFace(1028):n.cullFace(1032))):tt(2884),oe=ze}function yt(ze){ze!==le&&(Te&&n.lineWidth(ze),le=ze)}function kt(ze,Yt,_t){ze?(rt(32823),(ge!==Yt||ce!==_t)&&(n.polygonOffset(Yt,_t),ge=Yt,ce=_t)):tt(32823)}function $t(ze){ze?rt(3089):tt(3089)}function mt(ze){ze===void 0&&(ze=33984+pe-1),se!==ze&&(n.activeTexture(ze),se=ze)}function xe(ze,Yt){se===null&&mt();let _t=ie[se];_t===void 0&&(_t={type:void 0,texture:void 0},ie[se]=_t),(_t.type!==ze||_t.texture!==Yt)&&(n.bindTexture(ze,Yt||De[ze]),_t.type=ze,_t.texture=Yt)}function re(){const ze=ie[se];ze!==void 0&&ze.type!==void 0&&(n.bindTexture(ze.type,null),ze.type=void 0,ze.texture=void 0)}function Be(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function dt(){try{n.texSubImage2D.apply(n,arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function bt(){try{n.texSubImage3D.apply(n,arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function Mt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function pt(){try{n.texStorage2D.apply(n,arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function Ke(){try{n.texStorage3D.apply(n,arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function Ie(){try{n.texImage2D.apply(n,arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function q(){try{n.texImage3D.apply(n,arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function ee(ze){Fe.equals(ze)===!1&&(n.scissor(ze.x,ze.y,ze.z,ze.w),Fe.copy(ze))}function de(ze){ke.equals(ze)===!1&&(n.viewport(ze.x,ze.y,ze.z,ze.w),ke.copy(ze))}function Ae(ze,Yt){let _t=y.get(Yt);_t===void 0&&(_t=new WeakMap,y.set(Yt,_t));let Kt=_t.get(ze);Kt===void 0&&(Kt=n.getUniformBlockIndex(Yt,ze.name),_t.set(ze,Kt))}function Je(ze,Yt){const _t=y.get(Yt).get(ze);_.get(ze)!==_t&&(n.uniformBlockBinding(Yt,_t,ze.__bindingPointIndex),_.set(ze,_t))}function jt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),b={},se=null,ie={},E={},C=new WeakMap,A=[],I=null,L=!1,O=null,P=null,N=null,z=null,W=null,H=null,U=null,Q=!1,ne=null,oe=null,le=null,ge=null,ce=null,Fe.set(0,0,n.canvas.width,n.canvas.height),ke.set(0,0,n.canvas.width,n.canvas.height),u.reset(),d.reset(),p.reset()}return{buffers:{color:u,depth:d,stencil:p},enable:rt,disable:tt,bindFramebuffer:ft,drawBuffers:ct,useProgram:Pe,setBlending:it,setMaterial:ot,setFlipSided:vt,setCullFace:It,setLineWidth:yt,setPolygonOffset:kt,setScissorTest:$t,activeTexture:mt,bindTexture:xe,unbindTexture:re,compressedTexImage2D:Be,texImage2D:Ie,texImage3D:q,updateUBOMapping:Ae,uniformBlockBinding:Je,texStorage2D:pt,texStorage3D:Ke,texSubImage2D:dt,texSubImage3D:bt,compressedTexSubImage2D:Mt,scissor:ee,viewport:de,reset:jt}}function v1e(n,e,t,i,s,o,l){const u=s.isWebGL2,d=s.maxTextures,p=s.maxCubemapSize,_=s.maxTextureSize,y=s.maxSamples,b=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,E=/OculusBrowser/g.test(navigator.userAgent),C=new WeakMap;let A;const I=new WeakMap;let L=!1;try{L=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function O(xe,re){return L?new OffscreenCanvas(xe,re):s$("canvas")}function P(xe,re,Be,dt){let bt=1;if((xe.width>dt||xe.height>dt)&&(bt=dt/Math.max(xe.width,xe.height)),bt<1||re===!0)if(typeof HTMLImageElement<"u"&&xe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&xe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&xe instanceof ImageBitmap){const Mt=re?gI:Math.floor,pt=Mt(bt*xe.width),Ke=Mt(bt*xe.height);A===void 0&&(A=O(pt,Ke));const Ie=Be?O(pt,Ke):A;return Ie.width=pt,Ie.height=Ke,Ie.getContext("2d").drawImage(xe,0,0,pt,Ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+xe.width+"x"+xe.height+") to ("+pt+"x"+Ke+")."),Ie}else return"data"in xe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+xe.width+"x"+xe.height+")."),xe;return xe}function N(xe){return qD(xe.width)&&qD(xe.height)}function z(xe){return u?!1:xe.wrapS!==ef||xe.wrapT!==ef||xe.minFilter!==Gl&&xe.minFilter!==Tl}function W(xe,re){return xe.generateMipmaps&&re&&xe.minFilter!==Gl&&xe.minFilter!==Tl}function H(xe){n.generateMipmap(xe)}function U(xe,re,Be,dt,bt=!1){if(u===!1)return re;if(xe!==null){if(n[xe]!==void 0)return n[xe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+xe+"'")}let Mt=re;return re===6403&&(Be===5126&&(Mt=33326),Be===5131&&(Mt=33325),Be===5121&&(Mt=33321)),re===33319&&(Be===5126&&(Mt=33328),Be===5131&&(Mt=33327),Be===5121&&(Mt=33323)),re===6408&&(Be===5126&&(Mt=34836),Be===5131&&(Mt=34842),Be===5121&&(Mt=dt===ps&&bt===!1?35907:32856),Be===32819&&(Mt=32854),Be===32820&&(Mt=32855)),(Mt===33325||Mt===33326||Mt===33327||Mt===33328||Mt===34842||Mt===34836)&&e.get("EXT_color_buffer_float"),Mt}function Q(xe,re,Be){return W(xe,Be)===!0||xe.isFramebufferTexture&&xe.minFilter!==Gl&&xe.minFilter!==Tl?Math.log2(Math.max(re.width,re.height))+1:xe.mipmaps!==void 0&&xe.mipmaps.length>0?xe.mipmaps.length:xe.isCompressedTexture&&Array.isArray(xe.image)?re.mipmaps.length:1}function ne(xe){return xe===Gl||xe===pI||xe===fI?9728:9729}function oe(xe){const re=xe.target;re.removeEventListener("dispose",oe),ge(re),re.isVideoTexture&&C.delete(re)}function le(xe){const re=xe.target;re.removeEventListener("dispose",le),pe(re)}function ge(xe){const re=i.get(xe);if(re.__webglInit===void 0)return;const Be=xe.source,dt=I.get(Be);if(dt){const bt=dt[re.__cacheKey];bt.usedTimes--,bt.usedTimes===0&&ce(xe),Object.keys(dt).length===0&&I.delete(Be)}i.remove(xe)}function ce(xe){const re=i.get(xe);n.deleteTexture(re.__webglTexture);const Be=xe.source,dt=I.get(Be);delete dt[re.__cacheKey],l.memory.textures--}function pe(xe){const re=xe.texture,Be=i.get(xe),dt=i.get(re);if(dt.__webglTexture!==void 0&&(n.deleteTexture(dt.__webglTexture),l.memory.textures--),xe.depthTexture&&xe.depthTexture.dispose(),xe.isWebGLCubeRenderTarget)for(let bt=0;bt<6;bt++)n.deleteFramebuffer(Be.__webglFramebuffer[bt]),Be.__webglDepthbuffer&&n.deleteRenderbuffer(Be.__webglDepthbuffer[bt]);else{if(n.deleteFramebuffer(Be.__webglFramebuffer),Be.__webglDepthbuffer&&n.deleteRenderbuffer(Be.__webglDepthbuffer),Be.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Be.__webglMultisampledFramebuffer),Be.__webglColorRenderbuffer)for(let bt=0;bt<Be.__webglColorRenderbuffer.length;bt++)Be.__webglColorRenderbuffer[bt]&&n.deleteRenderbuffer(Be.__webglColorRenderbuffer[bt]);Be.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Be.__webglDepthRenderbuffer)}if(xe.isWebGLMultipleRenderTargets)for(let bt=0,Mt=re.length;bt<Mt;bt++){const pt=i.get(re[bt]);pt.__webglTexture&&(n.deleteTexture(pt.__webglTexture),l.memory.textures--),i.remove(re[bt])}i.remove(re),i.remove(xe)}let Te=0;function Oe(){Te=0}function J(){const xe=Te;return xe>=d&&console.warn("THREE.WebGLTextures: Trying to use "+xe+" texture units while this GPU supports only "+d),Te+=1,xe}function se(xe){const re=[];return re.push(xe.wrapS),re.push(xe.wrapT),re.push(xe.magFilter),re.push(xe.minFilter),re.push(xe.anisotropy),re.push(xe.internalFormat),re.push(xe.format),re.push(xe.type),re.push(xe.generateMipmaps),re.push(xe.premultiplyAlpha),re.push(xe.flipY),re.push(xe.unpackAlignment),re.push(xe.encoding),re.join()}function ie(xe,re){const Be=i.get(xe);if(xe.isVideoTexture&&$t(xe),xe.isRenderTargetTexture===!1&&xe.version>0&&Be.__version!==xe.version){const dt=xe.image;if(dt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(dt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{tt(Be,xe,re);return}}t.activeTexture(33984+re),t.bindTexture(3553,Be.__webglTexture)}function he(xe,re){const Be=i.get(xe);if(xe.version>0&&Be.__version!==xe.version){tt(Be,xe,re);return}t.activeTexture(33984+re),t.bindTexture(35866,Be.__webglTexture)}function Se(xe,re){const Be=i.get(xe);if(xe.version>0&&Be.__version!==xe.version){tt(Be,xe,re);return}t.activeTexture(33984+re),t.bindTexture(32879,Be.__webglTexture)}function Fe(xe,re){const Be=i.get(xe);if(xe.version>0&&Be.__version!==xe.version){ft(Be,xe,re);return}t.activeTexture(33984+re),t.bindTexture(34067,Be.__webglTexture)}const ke={[rE]:10497,[ef]:33071,[Zw]:33648},qe={[Gl]:9728,[pI]:9984,[fI]:9986,[Tl]:9729,[xP]:9985,[P1]:9987};function De(xe,re,Be){if(Be?(n.texParameteri(xe,10242,ke[re.wrapS]),n.texParameteri(xe,10243,ke[re.wrapT]),(xe===32879||xe===35866)&&n.texParameteri(xe,32882,ke[re.wrapR]),n.texParameteri(xe,10240,qe[re.magFilter]),n.texParameteri(xe,10241,qe[re.minFilter])):(n.texParameteri(xe,10242,33071),n.texParameteri(xe,10243,33071),(xe===32879||xe===35866)&&n.texParameteri(xe,32882,33071),(re.wrapS!==ef||re.wrapT!==ef)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(xe,10240,ne(re.magFilter)),n.texParameteri(xe,10241,ne(re.minFilter)),re.minFilter!==Gl&&re.minFilter!==Tl&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const dt=e.get("EXT_texture_filter_anisotropic");if(re.type===j0&&e.has("OES_texture_float_linear")===!1||u===!1&&re.type===C1&&e.has("OES_texture_half_float_linear")===!1)return;(re.anisotropy>1||i.get(re).__currentAnisotropy)&&(n.texParameterf(xe,dt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(re.anisotropy,s.getMaxAnisotropy())),i.get(re).__currentAnisotropy=re.anisotropy)}}function rt(xe,re){let Be=!1;xe.__webglInit===void 0&&(xe.__webglInit=!0,re.addEventListener("dispose",oe));const dt=re.source;let bt=I.get(dt);bt===void 0&&(bt={},I.set(dt,bt));const Mt=se(re);if(Mt!==xe.__cacheKey){bt[Mt]===void 0&&(bt[Mt]={texture:n.createTexture(),usedTimes:0},l.memory.textures++,Be=!0),bt[Mt].usedTimes++;const pt=bt[xe.__cacheKey];pt!==void 0&&(bt[xe.__cacheKey].usedTimes--,pt.usedTimes===0&&ce(re)),xe.__cacheKey=Mt,xe.__webglTexture=bt[Mt].texture}return Be}function tt(xe,re,Be){let dt=3553;re.isDataArrayTexture&&(dt=35866),re.isData3DTexture&&(dt=32879);const bt=rt(xe,re),Mt=re.source;if(t.activeTexture(33984+Be),t.bindTexture(dt,xe.__webglTexture),Mt.version!==Mt.__currentVersion||bt===!0){n.pixelStorei(37440,re.flipY),n.pixelStorei(37441,re.premultiplyAlpha),n.pixelStorei(3317,re.unpackAlignment),n.pixelStorei(37443,0);const pt=z(re)&&N(re.image)===!1;let Ke=P(re.image,pt,!1,_);Ke=mt(re,Ke);const Ie=N(Ke)||u,q=o.convert(re.format,re.encoding);let ee=o.convert(re.type),de=U(re.internalFormat,q,ee,re.encoding,re.isVideoTexture);De(dt,re,Ie);let Ae;const Je=re.mipmaps,jt=u&&re.isVideoTexture!==!0,ze=Mt.__currentVersion===void 0||bt===!0,Yt=Q(re,Ke,Ie);if(re.isDepthTexture)de=6402,u?re.type===j0?de=36012:re.type===q_?de=33190:re.type===gy?de=35056:de=33189:re.type===j0&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),re.format===_y&&de===6402&&re.type!==wP&&re.type!==q_&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),re.type=q_,ee=o.convert(re.type)),re.format===xy&&de===6402&&(de=34041,re.type!==gy&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),re.type=gy,ee=o.convert(re.type))),ze&&(jt?t.texStorage2D(3553,1,de,Ke.width,Ke.height):t.texImage2D(3553,0,de,Ke.width,Ke.height,0,q,ee,null));else if(re.isDataTexture)if(Je.length>0&&Ie){jt&&ze&&t.texStorage2D(3553,Yt,de,Je[0].width,Je[0].height);for(let _t=0,Kt=Je.length;_t<Kt;_t++)Ae=Je[_t],jt?t.texSubImage2D(3553,_t,0,0,Ae.width,Ae.height,q,ee,Ae.data):t.texImage2D(3553,_t,de,Ae.width,Ae.height,0,q,ee,Ae.data);re.generateMipmaps=!1}else jt?(ze&&t.texStorage2D(3553,Yt,de,Ke.width,Ke.height),t.texSubImage2D(3553,0,0,0,Ke.width,Ke.height,q,ee,Ke.data)):t.texImage2D(3553,0,de,Ke.width,Ke.height,0,q,ee,Ke.data);else if(re.isCompressedTexture){jt&&ze&&t.texStorage2D(3553,Yt,de,Je[0].width,Je[0].height);for(let _t=0,Kt=Je.length;_t<Kt;_t++)Ae=Je[_t],re.format!==Pf?q!==null?jt?t.compressedTexSubImage2D(3553,_t,0,0,Ae.width,Ae.height,q,Ae.data):t.compressedTexImage2D(3553,_t,de,Ae.width,Ae.height,0,Ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):jt?t.texSubImage2D(3553,_t,0,0,Ae.width,Ae.height,q,ee,Ae.data):t.texImage2D(3553,_t,de,Ae.width,Ae.height,0,q,ee,Ae.data)}else if(re.isDataArrayTexture)jt?(ze&&t.texStorage3D(35866,Yt,de,Ke.width,Ke.height,Ke.depth),t.texSubImage3D(35866,0,0,0,0,Ke.width,Ke.height,Ke.depth,q,ee,Ke.data)):t.texImage3D(35866,0,de,Ke.width,Ke.height,Ke.depth,0,q,ee,Ke.data);else if(re.isData3DTexture)jt?(ze&&t.texStorage3D(32879,Yt,de,Ke.width,Ke.height,Ke.depth),t.texSubImage3D(32879,0,0,0,0,Ke.width,Ke.height,Ke.depth,q,ee,Ke.data)):t.texImage3D(32879,0,de,Ke.width,Ke.height,Ke.depth,0,q,ee,Ke.data);else if(re.isFramebufferTexture){if(ze)if(jt)t.texStorage2D(3553,Yt,de,Ke.width,Ke.height);else{let _t=Ke.width,Kt=Ke.height;for(let Xt=0;Xt<Yt;Xt++)t.texImage2D(3553,Xt,de,_t,Kt,0,q,ee,null),_t>>=1,Kt>>=1}}else if(Je.length>0&&Ie){jt&&ze&&t.texStorage2D(3553,Yt,de,Je[0].width,Je[0].height);for(let _t=0,Kt=Je.length;_t<Kt;_t++)Ae=Je[_t],jt?t.texSubImage2D(3553,_t,0,0,q,ee,Ae):t.texImage2D(3553,_t,de,q,ee,Ae);re.generateMipmaps=!1}else jt?(ze&&t.texStorage2D(3553,Yt,de,Ke.width,Ke.height),t.texSubImage2D(3553,0,0,0,q,ee,Ke)):t.texImage2D(3553,0,de,q,ee,Ke);W(re,Ie)&&H(dt),Mt.__currentVersion=Mt.version,re.onUpdate&&re.onUpdate(re)}xe.__version=re.version}function ft(xe,re,Be){if(re.image.length!==6)return;const dt=rt(xe,re),bt=re.source;if(t.activeTexture(33984+Be),t.bindTexture(34067,xe.__webglTexture),bt.version!==bt.__currentVersion||dt===!0){n.pixelStorei(37440,re.flipY),n.pixelStorei(37441,re.premultiplyAlpha),n.pixelStorei(3317,re.unpackAlignment),n.pixelStorei(37443,0);const Mt=re.isCompressedTexture||re.image[0].isCompressedTexture,pt=re.image[0]&&re.image[0].isDataTexture,Ke=[];for(let _t=0;_t<6;_t++)!Mt&&!pt?Ke[_t]=P(re.image[_t],!1,!0,p):Ke[_t]=pt?re.image[_t].image:re.image[_t],Ke[_t]=mt(re,Ke[_t]);const Ie=Ke[0],q=N(Ie)||u,ee=o.convert(re.format,re.encoding),de=o.convert(re.type),Ae=U(re.internalFormat,ee,de,re.encoding),Je=u&&re.isVideoTexture!==!0,jt=bt.__currentVersion===void 0||dt===!0;let ze=Q(re,Ie,q);De(34067,re,q);let Yt;if(Mt){Je&&jt&&t.texStorage2D(34067,ze,Ae,Ie.width,Ie.height);for(let _t=0;_t<6;_t++){Yt=Ke[_t].mipmaps;for(let Kt=0;Kt<Yt.length;Kt++){const Xt=Yt[Kt];re.format!==Pf?ee!==null?Je?t.compressedTexSubImage2D(34069+_t,Kt,0,0,Xt.width,Xt.height,ee,Xt.data):t.compressedTexImage2D(34069+_t,Kt,Ae,Xt.width,Xt.height,0,Xt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Je?t.texSubImage2D(34069+_t,Kt,0,0,Xt.width,Xt.height,ee,de,Xt.data):t.texImage2D(34069+_t,Kt,Ae,Xt.width,Xt.height,0,ee,de,Xt.data)}}}else{Yt=re.mipmaps,Je&&jt&&(Yt.length>0&&ze++,t.texStorage2D(34067,ze,Ae,Ke[0].width,Ke[0].height));for(let _t=0;_t<6;_t++)if(pt){Je?t.texSubImage2D(34069+_t,0,0,0,Ke[_t].width,Ke[_t].height,ee,de,Ke[_t].data):t.texImage2D(34069+_t,0,Ae,Ke[_t].width,Ke[_t].height,0,ee,de,Ke[_t].data);for(let Kt=0;Kt<Yt.length;Kt++){const Xt=Yt[Kt].image[_t].image;Je?t.texSubImage2D(34069+_t,Kt+1,0,0,Xt.width,Xt.height,ee,de,Xt.data):t.texImage2D(34069+_t,Kt+1,Ae,Xt.width,Xt.height,0,ee,de,Xt.data)}}else{Je?t.texSubImage2D(34069+_t,0,0,0,ee,de,Ke[_t]):t.texImage2D(34069+_t,0,Ae,ee,de,Ke[_t]);for(let Kt=0;Kt<Yt.length;Kt++){const Xt=Yt[Kt];Je?t.texSubImage2D(34069+_t,Kt+1,0,0,ee,de,Xt.image[_t]):t.texImage2D(34069+_t,Kt+1,Ae,ee,de,Xt.image[_t])}}}W(re,q)&&H(34067),bt.__currentVersion=bt.version,re.onUpdate&&re.onUpdate(re)}xe.__version=re.version}function ct(xe,re,Be,dt,bt){const Mt=o.convert(Be.format,Be.encoding),pt=o.convert(Be.type),Ke=U(Be.internalFormat,Mt,pt,Be.encoding);i.get(re).__hasExternalTextures||(bt===32879||bt===35866?t.texImage3D(bt,0,Ke,re.width,re.height,re.depth,0,Mt,pt,null):t.texImage2D(bt,0,Ke,re.width,re.height,0,Mt,pt,null)),t.bindFramebuffer(36160,xe),kt(re)?b.framebufferTexture2DMultisampleEXT(36160,dt,bt,i.get(Be).__webglTexture,0,yt(re)):n.framebufferTexture2D(36160,dt,bt,i.get(Be).__webglTexture,0),t.bindFramebuffer(36160,null)}function Pe(xe,re,Be){if(n.bindRenderbuffer(36161,xe),re.depthBuffer&&!re.stencilBuffer){let dt=33189;if(Be||kt(re)){const bt=re.depthTexture;bt&&bt.isDepthTexture&&(bt.type===j0?dt=36012:bt.type===q_&&(dt=33190));const Mt=yt(re);kt(re)?b.renderbufferStorageMultisampleEXT(36161,Mt,dt,re.width,re.height):n.renderbufferStorageMultisample(36161,Mt,dt,re.width,re.height)}else n.renderbufferStorage(36161,dt,re.width,re.height);n.framebufferRenderbuffer(36160,36096,36161,xe)}else if(re.depthBuffer&&re.stencilBuffer){const dt=yt(re);Be&&kt(re)===!1?n.renderbufferStorageMultisample(36161,dt,35056,re.width,re.height):kt(re)?b.renderbufferStorageMultisampleEXT(36161,dt,35056,re.width,re.height):n.renderbufferStorage(36161,34041,re.width,re.height),n.framebufferRenderbuffer(36160,33306,36161,xe)}else{const dt=re.isWebGLMultipleRenderTargets===!0?re.texture:[re.texture];for(let bt=0;bt<dt.length;bt++){const Mt=dt[bt],pt=o.convert(Mt.format,Mt.encoding),Ke=o.convert(Mt.type),Ie=U(Mt.internalFormat,pt,Ke,Mt.encoding),q=yt(re);Be&&kt(re)===!1?n.renderbufferStorageMultisample(36161,q,Ie,re.width,re.height):kt(re)?b.renderbufferStorageMultisampleEXT(36161,q,Ie,re.width,re.height):n.renderbufferStorage(36161,Ie,re.width,re.height)}}n.bindRenderbuffer(36161,null)}function Ce(xe,re){if(re&&re.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,xe),!(re.depthTexture&&re.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(re.depthTexture).__webglTexture||re.depthTexture.image.width!==re.width||re.depthTexture.image.height!==re.height)&&(re.depthTexture.image.width=re.width,re.depthTexture.image.height=re.height,re.depthTexture.needsUpdate=!0),ie(re.depthTexture,0);const Be=i.get(re.depthTexture).__webglTexture,dt=yt(re);if(re.depthTexture.format===_y)kt(re)?b.framebufferTexture2DMultisampleEXT(36160,36096,3553,Be,0,dt):n.framebufferTexture2D(36160,36096,3553,Be,0);else if(re.depthTexture.format===xy)kt(re)?b.framebufferTexture2DMultisampleEXT(36160,33306,3553,Be,0,dt):n.framebufferTexture2D(36160,33306,3553,Be,0);else throw new Error("Unknown depthTexture format")}function je(xe){const re=i.get(xe),Be=xe.isWebGLCubeRenderTarget===!0;if(xe.depthTexture&&!re.__autoAllocateDepthBuffer){if(Be)throw new Error("target.depthTexture not supported in Cube render targets");Ce(re.__webglFramebuffer,xe)}else if(Be){re.__webglDepthbuffer=[];for(let dt=0;dt<6;dt++)t.bindFramebuffer(36160,re.__webglFramebuffer[dt]),re.__webglDepthbuffer[dt]=n.createRenderbuffer(),Pe(re.__webglDepthbuffer[dt],xe,!1)}else t.bindFramebuffer(36160,re.__webglFramebuffer),re.__webglDepthbuffer=n.createRenderbuffer(),Pe(re.__webglDepthbuffer,xe,!1);t.bindFramebuffer(36160,null)}function it(xe,re,Be){const dt=i.get(xe);re!==void 0&&ct(dt.__webglFramebuffer,xe,xe.texture,36064,3553),Be!==void 0&&je(xe)}function ot(xe){const re=xe.texture,Be=i.get(xe),dt=i.get(re);xe.addEventListener("dispose",le),xe.isWebGLMultipleRenderTargets!==!0&&(dt.__webglTexture===void 0&&(dt.__webglTexture=n.createTexture()),dt.__version=re.version,l.memory.textures++);const bt=xe.isWebGLCubeRenderTarget===!0,Mt=xe.isWebGLMultipleRenderTargets===!0,pt=N(xe)||u;if(bt){Be.__webglFramebuffer=[];for(let Ke=0;Ke<6;Ke++)Be.__webglFramebuffer[Ke]=n.createFramebuffer()}else{if(Be.__webglFramebuffer=n.createFramebuffer(),Mt)if(s.drawBuffers){const Ke=xe.texture;for(let Ie=0,q=Ke.length;Ie<q;Ie++){const ee=i.get(Ke[Ie]);ee.__webglTexture===void 0&&(ee.__webglTexture=n.createTexture(),l.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&xe.samples>0&&kt(xe)===!1){const Ke=Mt?re:[re];Be.__webglMultisampledFramebuffer=n.createFramebuffer(),Be.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,Be.__webglMultisampledFramebuffer);for(let Ie=0;Ie<Ke.length;Ie++){const q=Ke[Ie];Be.__webglColorRenderbuffer[Ie]=n.createRenderbuffer(),n.bindRenderbuffer(36161,Be.__webglColorRenderbuffer[Ie]);const ee=o.convert(q.format,q.encoding),de=o.convert(q.type),Ae=U(q.internalFormat,ee,de,q.encoding),Je=yt(xe);n.renderbufferStorageMultisample(36161,Je,Ae,xe.width,xe.height),n.framebufferRenderbuffer(36160,36064+Ie,36161,Be.__webglColorRenderbuffer[Ie])}n.bindRenderbuffer(36161,null),xe.depthBuffer&&(Be.__webglDepthRenderbuffer=n.createRenderbuffer(),Pe(Be.__webglDepthRenderbuffer,xe,!0)),t.bindFramebuffer(36160,null)}}if(bt){t.bindTexture(34067,dt.__webglTexture),De(34067,re,pt);for(let Ke=0;Ke<6;Ke++)ct(Be.__webglFramebuffer[Ke],xe,re,36064,34069+Ke);W(re,pt)&&H(34067),t.unbindTexture()}else if(Mt){const Ke=xe.texture;for(let Ie=0,q=Ke.length;Ie<q;Ie++){const ee=Ke[Ie],de=i.get(ee);t.bindTexture(3553,de.__webglTexture),De(3553,ee,pt),ct(Be.__webglFramebuffer,xe,ee,36064+Ie,3553),W(ee,pt)&&H(3553)}t.unbindTexture()}else{let Ke=3553;(xe.isWebGL3DRenderTarget||xe.isWebGLArrayRenderTarget)&&(u?Ke=xe.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ke,dt.__webglTexture),De(Ke,re,pt),ct(Be.__webglFramebuffer,xe,re,36064,Ke),W(re,pt)&&H(Ke),t.unbindTexture()}xe.depthBuffer&&je(xe)}function vt(xe){const re=N(xe)||u,Be=xe.isWebGLMultipleRenderTargets===!0?xe.texture:[xe.texture];for(let dt=0,bt=Be.length;dt<bt;dt++){const Mt=Be[dt];if(W(Mt,re)){const pt=xe.isWebGLCubeRenderTarget?34067:3553,Ke=i.get(Mt).__webglTexture;t.bindTexture(pt,Ke),H(pt),t.unbindTexture()}}}function It(xe){if(u&&xe.samples>0&&kt(xe)===!1){const re=xe.isWebGLMultipleRenderTargets?xe.texture:[xe.texture],Be=xe.width,dt=xe.height;let bt=16384;const Mt=[],pt=xe.stencilBuffer?33306:36096,Ke=i.get(xe),Ie=xe.isWebGLMultipleRenderTargets===!0;if(Ie)for(let q=0;q<re.length;q++)t.bindFramebuffer(36160,Ke.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+q,36161,null),t.bindFramebuffer(36160,Ke.__webglFramebuffer),n.framebufferTexture2D(36009,36064+q,3553,null,0);t.bindFramebuffer(36008,Ke.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ke.__webglFramebuffer);for(let q=0;q<re.length;q++){Mt.push(36064+q),xe.depthBuffer&&Mt.push(pt);const ee=Ke.__ignoreDepthValues!==void 0?Ke.__ignoreDepthValues:!1;if(ee===!1&&(xe.depthBuffer&&(bt|=256),xe.stencilBuffer&&(bt|=1024)),Ie&&n.framebufferRenderbuffer(36008,36064,36161,Ke.__webglColorRenderbuffer[q]),ee===!0&&(n.invalidateFramebuffer(36008,[pt]),n.invalidateFramebuffer(36009,[pt])),Ie){const de=i.get(re[q]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,de,0)}n.blitFramebuffer(0,0,Be,dt,0,0,Be,dt,bt,9728),E&&n.invalidateFramebuffer(36008,Mt)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Ie)for(let q=0;q<re.length;q++){t.bindFramebuffer(36160,Ke.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+q,36161,Ke.__webglColorRenderbuffer[q]);const ee=i.get(re[q]).__webglTexture;t.bindFramebuffer(36160,Ke.__webglFramebuffer),n.framebufferTexture2D(36009,36064+q,3553,ee,0)}t.bindFramebuffer(36009,Ke.__webglMultisampledFramebuffer)}}function yt(xe){return Math.min(y,xe.samples)}function kt(xe){const re=i.get(xe);return u&&xe.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&re.__useRenderToTexture!==!1}function $t(xe){const re=l.render.frame;C.get(xe)!==re&&(C.set(xe,re),xe.update())}function mt(xe,re){const Be=xe.encoding,dt=xe.format,bt=xe.type;return xe.isCompressedTexture===!0||xe.isVideoTexture===!0||xe.format===mI||Be!==_g&&(Be===ps?u===!1?e.has("EXT_sRGB")===!0&&dt===Pf?(xe.format=mI,xe.minFilter=Tl,xe.generateMipmaps=!1):re=AP.sRGBToLinear(re):(dt!==Pf||bt!==ep)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Be)),re}this.allocateTextureUnit=J,this.resetTextureUnits=Oe,this.setTexture2D=ie,this.setTexture2DArray=he,this.setTexture3D=Se,this.setTextureCube=Fe,this.rebindTextures=it,this.setupRenderTarget=ot,this.updateRenderTargetMipmap=vt,this.updateMultisampleRenderTarget=It,this.setupDepthRenderbuffer=je,this.setupFrameBufferTexture=ct,this.useMultisampledRTT=kt}function Uj(n,e,t){const i=t.isWebGL2;function s(o,l=null){let u;if(o===ep)return 5121;if(o===hj)return 32819;if(o===dj)return 32820;if(o===lj)return 5120;if(o===uj)return 5122;if(o===wP)return 5123;if(o===cj)return 5124;if(o===q_)return 5125;if(o===j0)return 5126;if(o===C1)return i?5131:(u=e.get("OES_texture_half_float"),u!==null?u.HALF_FLOAT_OES:null);if(o===pj)return 6406;if(o===Pf)return 6408;if(o===mj)return 6409;if(o===gj)return 6410;if(o===_y)return 6402;if(o===xy)return 34041;if(o===_j)return 6403;if(o===fj)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(o===mI)return u=e.get("EXT_sRGB"),u!==null?u.SRGB_ALPHA_EXT:null;if(o===vj)return 36244;if(o===yj)return 33319;if(o===bj)return 33320;if(o===Tj)return 36249;if(o===dM||o===pM||o===fM||o===mM)if(l===ps)if(u=e.get("WEBGL_compressed_texture_s3tc_srgb"),u!==null){if(o===dM)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===pM)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===fM)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===mM)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(u=e.get("WEBGL_compressed_texture_s3tc"),u!==null){if(o===dM)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===pM)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===fM)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===mM)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===MD||o===ID||o===RD||o===kD)if(u=e.get("WEBGL_compressed_texture_pvrtc"),u!==null){if(o===MD)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===ID)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===RD)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===kD)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===Sj)return u=e.get("WEBGL_compressed_texture_etc1"),u!==null?u.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===OD||o===LD)if(u=e.get("WEBGL_compressed_texture_etc"),u!==null){if(o===OD)return l===ps?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(o===LD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===DD||o===ND||o===BD||o===PD||o===FD||o===UD||o===zD||o===HD||o===GD||o===WD||o===VD||o===jD||o===XD||o===YD)if(u=e.get("WEBGL_compressed_texture_astc"),u!==null){if(o===DD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===ND)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===BD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===PD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===FD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===UD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===zD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===HD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===GD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===WD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===VD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===jD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===XD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===YD)return l===ps?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===KD)if(u=e.get("EXT_texture_compression_bptc"),u!==null){if(o===KD)return l===ps?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return o===gy?i?34042:(u=e.get("WEBGL_depth_texture"),u!==null?u.UNSIGNED_INT_24_8_WEBGL:null):n[o]!==void 0?n[o]:null}return{convert:s}}class zj extends Ja{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class CS extends to{constructor(){super(),this.isGroup=!0,this.type="Group"}}const y1e={type:"move"};class vO{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new CS,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new CS,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $e,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $e),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new CS,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $e,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $e),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,o=null,l=null;const u=this._targetRay,d=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){l=!0;for(const A of e.hand.values()){const I=t.getJointPose(A,i);if(p.joints[A.jointName]===void 0){const O=new CS;O.matrixAutoUpdate=!1,O.visible=!1,p.joints[A.jointName]=O,p.add(O)}const L=p.joints[A.jointName];I!==null&&(L.matrix.fromArray(I.transform.matrix),L.matrix.decompose(L.position,L.rotation,L.scale),L.jointRadius=I.radius),L.visible=I!==null}const _=p.joints["index-finger-tip"],y=p.joints["thumb-tip"],b=_.position.distanceTo(y.position),E=.02,C=.005;p.inputState.pinching&&b>E+C?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&b<=E-C&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),o!==null&&(d.matrix.fromArray(o.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),o.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(o.linearVelocity)):d.hasLinearVelocity=!1,o.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(o.angularVelocity)):d.hasAngularVelocity=!1));u!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&o!==null&&(s=o),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(y1e)))}return u!==null&&(u.visible=s!==null),d!==null&&(d.visible=o!==null),p!==null&&(p.visible=l!==null),this}}class kP extends lc{constructor(e,t,i,s,o,l,u,d,p,_){if(_=_!==void 0?_:_y,_!==_y&&_!==xy)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&_===_y&&(i=q_),i===void 0&&_===xy&&(i=gy),super(null,s,o,l,u,d,_,i,p),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:Gl,this.minFilter=d!==void 0?d:Gl,this.flipY=!1,this.generateMipmaps=!1}}class b1e extends Bm{constructor(e,t){super();const i=this;let s=null,o=1,l=null,u="local-floor",d=null,p=null,_=null,y=null,b=null,E=null;const C=t.getContextAttributes();let A=null,I=null;const L=[],O=[],P=new Ja;P.layers.enable(1),P.viewport=new ys;const N=new Ja;N.layers.enable(2),N.viewport=new ys;const z=[P,N],W=new zj;W.layers.enable(1),W.layers.enable(2);let H=null,U=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(se){let ie=L[se];return ie===void 0&&(ie=new vO,L[se]=ie),ie.getTargetRaySpace()},this.getControllerGrip=function(se){let ie=L[se];return ie===void 0&&(ie=new vO,L[se]=ie),ie.getGripSpace()},this.getHand=function(se){let ie=L[se];return ie===void 0&&(ie=new vO,L[se]=ie),ie.getHandSpace()};function Q(se){const ie=O.indexOf(se.inputSource);if(ie===-1)return;const he=L[ie];he!==void 0&&he.dispatchEvent({type:se.type,data:se.inputSource})}function ne(){s.removeEventListener("select",Q),s.removeEventListener("selectstart",Q),s.removeEventListener("selectend",Q),s.removeEventListener("squeeze",Q),s.removeEventListener("squeezestart",Q),s.removeEventListener("squeezeend",Q),s.removeEventListener("end",ne),s.removeEventListener("inputsourceschange",oe);for(let se=0;se<L.length;se++){const ie=O[se];ie!==null&&(O[se]=null,L[se].disconnect(ie))}H=null,U=null,e.setRenderTarget(A),b=null,y=null,_=null,s=null,I=null,J.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(se){o=se,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(se){u=se,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||l},this.setReferenceSpace=function(se){d=se},this.getBaseLayer=function(){return y!==null?y:b},this.getBinding=function(){return _},this.getFrame=function(){return E},this.getSession=function(){return s},this.setSession=async function(se){if(s=se,s!==null){if(A=e.getRenderTarget(),s.addEventListener("select",Q),s.addEventListener("selectstart",Q),s.addEventListener("selectend",Q),s.addEventListener("squeeze",Q),s.addEventListener("squeezestart",Q),s.addEventListener("squeezeend",Q),s.addEventListener("end",ne),s.addEventListener("inputsourceschange",oe),C.xrCompatible!==!0&&await t.makeXRCompatible(),s.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ie={antialias:s.renderState.layers===void 0?C.antialias:!0,alpha:C.alpha,depth:C.depth,stencil:C.stencil,framebufferScaleFactor:o};b=new XRWebGLLayer(s,t,ie),s.updateRenderState({baseLayer:b}),I=new Rc(b.framebufferWidth,b.framebufferHeight,{format:Pf,type:ep,encoding:e.outputEncoding})}else{let ie=null,he=null,Se=null;C.depth&&(Se=C.stencil?35056:33190,ie=C.stencil?xy:_y,he=C.stencil?gy:q_);const Fe={colorFormat:32856,depthFormat:Se,scaleFactor:o};_=new XRWebGLBinding(s,t),y=_.createProjectionLayer(Fe),s.updateRenderState({layers:[y]}),I=new Rc(y.textureWidth,y.textureHeight,{format:Pf,type:ep,depthTexture:new kP(y.textureWidth,y.textureHeight,he,void 0,void 0,void 0,void 0,void 0,void 0,ie),stencilBuffer:C.stencil,encoding:e.outputEncoding,samples:C.antialias?4:0});const ke=e.properties.get(I);ke.__ignoreDepthValues=y.ignoreDepthValues}I.isXRRenderTarget=!0,this.setFoveation(1),d=null,l=await s.requestReferenceSpace(u),J.setContext(s),J.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function oe(se){for(let ie=0;ie<se.removed.length;ie++){const he=se.removed[ie],Se=O.indexOf(he);Se>=0&&(O[Se]=null,L[Se].dispatchEvent({type:"disconnected",data:he}))}for(let ie=0;ie<se.added.length;ie++){const he=se.added[ie];let Se=O.indexOf(he);if(Se===-1){for(let ke=0;ke<L.length;ke++)if(ke>=O.length){O.push(he),Se=ke;break}else if(O[ke]===null){O[ke]=he,Se=ke;break}if(Se===-1)break}const Fe=L[Se];Fe&&Fe.dispatchEvent({type:"connected",data:he})}}const le=new $e,ge=new $e;function ce(se,ie,he){le.setFromMatrixPosition(ie.matrixWorld),ge.setFromMatrixPosition(he.matrixWorld);const Se=le.distanceTo(ge),Fe=ie.projectionMatrix.elements,ke=he.projectionMatrix.elements,qe=Fe[14]/(Fe[10]-1),De=Fe[14]/(Fe[10]+1),rt=(Fe[9]+1)/Fe[5],tt=(Fe[9]-1)/Fe[5],ft=(Fe[8]-1)/Fe[0],ct=(ke[8]+1)/ke[0],Pe=qe*ft,Ce=qe*ct,je=Se/(-ft+ct),it=je*-ft;ie.matrixWorld.decompose(se.position,se.quaternion,se.scale),se.translateX(it),se.translateZ(je),se.matrixWorld.compose(se.position,se.quaternion,se.scale),se.matrixWorldInverse.copy(se.matrixWorld).invert();const ot=qe+je,vt=De+je,It=Pe-it,yt=Ce+(Se-it),kt=rt*De/vt*ot,$t=tt*De/vt*ot;se.projectionMatrix.makePerspective(It,yt,kt,$t,ot,vt)}function pe(se,ie){ie===null?se.matrixWorld.copy(se.matrix):se.matrixWorld.multiplyMatrices(ie.matrixWorld,se.matrix),se.matrixWorldInverse.copy(se.matrixWorld).invert()}this.updateCamera=function(se){if(s===null)return;W.near=N.near=P.near=se.near,W.far=N.far=P.far=se.far,(H!==W.near||U!==W.far)&&(s.updateRenderState({depthNear:W.near,depthFar:W.far}),H=W.near,U=W.far);const ie=se.parent,he=W.cameras;pe(W,ie);for(let Fe=0;Fe<he.length;Fe++)pe(he[Fe],ie);W.matrixWorld.decompose(W.position,W.quaternion,W.scale),se.position.copy(W.position),se.quaternion.copy(W.quaternion),se.scale.copy(W.scale),se.matrix.copy(W.matrix),se.matrixWorld.copy(W.matrixWorld);const Se=se.children;for(let Fe=0,ke=Se.length;Fe<ke;Fe++)Se[Fe].updateMatrixWorld(!0);he.length===2?ce(W,P,N):W.projectionMatrix.copy(P.projectionMatrix)},this.getCamera=function(){return W},this.getFoveation=function(){if(y!==null)return y.fixedFoveation;if(b!==null)return b.fixedFoveation},this.setFoveation=function(se){y!==null&&(y.fixedFoveation=se),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=se)};let Te=null;function Oe(se,ie){if(p=ie.getViewerPose(d||l),E=ie,p!==null){const he=p.views;b!==null&&(e.setRenderTargetFramebuffer(I,b.framebuffer),e.setRenderTarget(I));let Se=!1;he.length!==W.cameras.length&&(W.cameras.length=0,Se=!0);for(let Fe=0;Fe<he.length;Fe++){const ke=he[Fe];let qe=null;if(b!==null)qe=b.getViewport(ke);else{const rt=_.getViewSubImage(y,ke);qe=rt.viewport,Fe===0&&(e.setRenderTargetTextures(I,rt.colorTexture,y.ignoreDepthValues?void 0:rt.depthStencilTexture),e.setRenderTarget(I))}let De=z[Fe];De===void 0&&(De=new Ja,De.layers.enable(Fe),De.viewport=new ys,z[Fe]=De),De.matrix.fromArray(ke.transform.matrix),De.projectionMatrix.fromArray(ke.projectionMatrix),De.viewport.set(qe.x,qe.y,qe.width,qe.height),Fe===0&&W.matrix.copy(De.matrix),Se===!0&&W.cameras.push(De)}}for(let he=0;he<L.length;he++){const Se=O[he],Fe=L[he];Se!==null&&Fe!==void 0&&Fe.update(Se,ie,d||l)}Te&&Te(se,ie),E=null}const J=new Lj;J.setAnimationLoop(Oe),this.setAnimationLoop=function(se){Te=se},this.dispose=function(){}}}function T1e(n,e){function t(A,I){A.fogColor.value.copy(I.color),I.isFog?(A.fogNear.value=I.near,A.fogFar.value=I.far):I.isFogExp2&&(A.fogDensity.value=I.density)}function i(A,I,L,O,P){I.isMeshBasicMaterial||I.isMeshLambertMaterial?s(A,I):I.isMeshToonMaterial?(s(A,I),_(A,I)):I.isMeshPhongMaterial?(s(A,I),p(A,I)):I.isMeshStandardMaterial?(s(A,I),y(A,I),I.isMeshPhysicalMaterial&&b(A,I,P)):I.isMeshMatcapMaterial?(s(A,I),E(A,I)):I.isMeshDepthMaterial?s(A,I):I.isMeshDistanceMaterial?(s(A,I),C(A,I)):I.isMeshNormalMaterial?s(A,I):I.isLineBasicMaterial?(o(A,I),I.isLineDashedMaterial&&l(A,I)):I.isPointsMaterial?u(A,I,L,O):I.isSpriteMaterial?d(A,I):I.isShadowMaterial?(A.color.value.copy(I.color),A.opacity.value=I.opacity):I.isShaderMaterial&&(I.uniformsNeedUpdate=!1)}function s(A,I){A.opacity.value=I.opacity,I.color&&A.diffuse.value.copy(I.color),I.emissive&&A.emissive.value.copy(I.emissive).multiplyScalar(I.emissiveIntensity),I.map&&(A.map.value=I.map),I.alphaMap&&(A.alphaMap.value=I.alphaMap),I.bumpMap&&(A.bumpMap.value=I.bumpMap,A.bumpScale.value=I.bumpScale,I.side===id&&(A.bumpScale.value*=-1)),I.displacementMap&&(A.displacementMap.value=I.displacementMap,A.displacementScale.value=I.displacementScale,A.displacementBias.value=I.displacementBias),I.emissiveMap&&(A.emissiveMap.value=I.emissiveMap),I.normalMap&&(A.normalMap.value=I.normalMap,A.normalScale.value.copy(I.normalScale),I.side===id&&A.normalScale.value.negate()),I.specularMap&&(A.specularMap.value=I.specularMap),I.alphaTest>0&&(A.alphaTest.value=I.alphaTest);const L=e.get(I).envMap;if(L&&(A.envMap.value=L,A.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,A.reflectivity.value=I.reflectivity,A.ior.value=I.ior,A.refractionRatio.value=I.refractionRatio),I.lightMap){A.lightMap.value=I.lightMap;const N=n.physicallyCorrectLights!==!0?Math.PI:1;A.lightMapIntensity.value=I.lightMapIntensity*N}I.aoMap&&(A.aoMap.value=I.aoMap,A.aoMapIntensity.value=I.aoMapIntensity);let O;I.map?O=I.map:I.specularMap?O=I.specularMap:I.displacementMap?O=I.displacementMap:I.normalMap?O=I.normalMap:I.bumpMap?O=I.bumpMap:I.roughnessMap?O=I.roughnessMap:I.metalnessMap?O=I.metalnessMap:I.alphaMap?O=I.alphaMap:I.emissiveMap?O=I.emissiveMap:I.clearcoatMap?O=I.clearcoatMap:I.clearcoatNormalMap?O=I.clearcoatNormalMap:I.clearcoatRoughnessMap?O=I.clearcoatRoughnessMap:I.iridescenceMap?O=I.iridescenceMap:I.iridescenceThicknessMap?O=I.iridescenceThicknessMap:I.specularIntensityMap?O=I.specularIntensityMap:I.specularColorMap?O=I.specularColorMap:I.transmissionMap?O=I.transmissionMap:I.thicknessMap?O=I.thicknessMap:I.sheenColorMap?O=I.sheenColorMap:I.sheenRoughnessMap&&(O=I.sheenRoughnessMap),O!==void 0&&(O.isWebGLRenderTarget&&(O=O.texture),O.matrixAutoUpdate===!0&&O.updateMatrix(),A.uvTransform.value.copy(O.matrix));let P;I.aoMap?P=I.aoMap:I.lightMap&&(P=I.lightMap),P!==void 0&&(P.isWebGLRenderTarget&&(P=P.texture),P.matrixAutoUpdate===!0&&P.updateMatrix(),A.uv2Transform.value.copy(P.matrix))}function o(A,I){A.diffuse.value.copy(I.color),A.opacity.value=I.opacity}function l(A,I){A.dashSize.value=I.dashSize,A.totalSize.value=I.dashSize+I.gapSize,A.scale.value=I.scale}function u(A,I,L,O){A.diffuse.value.copy(I.color),A.opacity.value=I.opacity,A.size.value=I.size*L,A.scale.value=O*.5,I.map&&(A.map.value=I.map),I.alphaMap&&(A.alphaMap.value=I.alphaMap),I.alphaTest>0&&(A.alphaTest.value=I.alphaTest);let P;I.map?P=I.map:I.alphaMap&&(P=I.alphaMap),P!==void 0&&(P.matrixAutoUpdate===!0&&P.updateMatrix(),A.uvTransform.value.copy(P.matrix))}function d(A,I){A.diffuse.value.copy(I.color),A.opacity.value=I.opacity,A.rotation.value=I.rotation,I.map&&(A.map.value=I.map),I.alphaMap&&(A.alphaMap.value=I.alphaMap),I.alphaTest>0&&(A.alphaTest.value=I.alphaTest);let L;I.map?L=I.map:I.alphaMap&&(L=I.alphaMap),L!==void 0&&(L.matrixAutoUpdate===!0&&L.updateMatrix(),A.uvTransform.value.copy(L.matrix))}function p(A,I){A.specular.value.copy(I.specular),A.shininess.value=Math.max(I.shininess,1e-4)}function _(A,I){I.gradientMap&&(A.gradientMap.value=I.gradientMap)}function y(A,I){A.roughness.value=I.roughness,A.metalness.value=I.metalness,I.roughnessMap&&(A.roughnessMap.value=I.roughnessMap),I.metalnessMap&&(A.metalnessMap.value=I.metalnessMap),e.get(I).envMap&&(A.envMapIntensity.value=I.envMapIntensity)}function b(A,I,L){A.ior.value=I.ior,I.sheen>0&&(A.sheenColor.value.copy(I.sheenColor).multiplyScalar(I.sheen),A.sheenRoughness.value=I.sheenRoughness,I.sheenColorMap&&(A.sheenColorMap.value=I.sheenColorMap),I.sheenRoughnessMap&&(A.sheenRoughnessMap.value=I.sheenRoughnessMap)),I.clearcoat>0&&(A.clearcoat.value=I.clearcoat,A.clearcoatRoughness.value=I.clearcoatRoughness,I.clearcoatMap&&(A.clearcoatMap.value=I.clearcoatMap),I.clearcoatRoughnessMap&&(A.clearcoatRoughnessMap.value=I.clearcoatRoughnessMap),I.clearcoatNormalMap&&(A.clearcoatNormalScale.value.copy(I.clearcoatNormalScale),A.clearcoatNormalMap.value=I.clearcoatNormalMap,I.side===id&&A.clearcoatNormalScale.value.negate())),I.iridescence>0&&(A.iridescence.value=I.iridescence,A.iridescenceIOR.value=I.iridescenceIOR,A.iridescenceThicknessMinimum.value=I.iridescenceThicknessRange[0],A.iridescenceThicknessMaximum.value=I.iridescenceThicknessRange[1],I.iridescenceMap&&(A.iridescenceMap.value=I.iridescenceMap),I.iridescenceThicknessMap&&(A.iridescenceThicknessMap.value=I.iridescenceThicknessMap)),I.transmission>0&&(A.transmission.value=I.transmission,A.transmissionSamplerMap.value=L.texture,A.transmissionSamplerSize.value.set(L.width,L.height),I.transmissionMap&&(A.transmissionMap.value=I.transmissionMap),A.thickness.value=I.thickness,I.thicknessMap&&(A.thicknessMap.value=I.thicknessMap),A.attenuationDistance.value=I.attenuationDistance,A.attenuationColor.value.copy(I.attenuationColor)),A.specularIntensity.value=I.specularIntensity,A.specularColor.value.copy(I.specularColor),I.specularIntensityMap&&(A.specularIntensityMap.value=I.specularIntensityMap),I.specularColorMap&&(A.specularColorMap.value=I.specularColorMap)}function E(A,I){I.matcap&&(A.matcap.value=I.matcap)}function C(A,I){A.referencePosition.value.copy(I.referencePosition),A.nearDistance.value=I.nearDistance,A.farDistance.value=I.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function S1e(n,e,t,i){let s={},o={},l=[];const u=t.isWebGL2?n.getParameter(35375):0;function d(O,P){const N=P.program;i.uniformBlockBinding(O,N)}function p(O,P){let N=s[O.id];N===void 0&&(C(O),N=_(O),s[O.id]=N,O.addEventListener("dispose",I));const z=P.program;i.updateUBOMapping(O,z);const W=e.render.frame;o[O.id]!==W&&(b(O),o[O.id]=W)}function _(O){const P=y();O.__bindingPointIndex=P;const N=n.createBuffer(),z=O.__size,W=O.usage;return n.bindBuffer(35345,N),n.bufferData(35345,z,W),n.bindBuffer(35345,null),n.bindBufferBase(35345,P,N),N}function y(){for(let O=0;O<u;O++)if(l.indexOf(O)===-1)return l.push(O),O;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function b(O){const P=s[O.id],N=O.uniforms,z=O.__cache;n.bindBuffer(35345,P);for(let W=0,H=N.length;W<H;W++){const U=N[W];if(E(U,W,z)===!0){const Q=U.value,ne=U.__offset;typeof Q=="number"?(U.__data[0]=Q,n.bufferSubData(35345,ne,U.__data)):(U.value.isMatrix3?(U.__data[0]=U.value.elements[0],U.__data[1]=U.value.elements[1],U.__data[2]=U.value.elements[2],U.__data[3]=U.value.elements[0],U.__data[4]=U.value.elements[3],U.__data[5]=U.value.elements[4],U.__data[6]=U.value.elements[5],U.__data[7]=U.value.elements[0],U.__data[8]=U.value.elements[6],U.__data[9]=U.value.elements[7],U.__data[10]=U.value.elements[8],U.__data[11]=U.value.elements[0]):Q.toArray(U.__data),n.bufferSubData(35345,ne,U.__data))}}n.bindBuffer(35345,null)}function E(O,P,N){const z=O.value;if(N[P]===void 0)return typeof z=="number"?N[P]=z:N[P]=z.clone(),!0;if(typeof z=="number"){if(N[P]!==z)return N[P]=z,!0}else{const W=N[P];if(W.equals(z)===!1)return W.copy(z),!0}return!1}function C(O){const P=O.uniforms;let N=0;const z=16;let W=0;for(let H=0,U=P.length;H<U;H++){const Q=P[H],ne=A(Q);if(Q.__data=new Float32Array(ne.storage/Float32Array.BYTES_PER_ELEMENT),Q.__offset=N,H>0){W=N%z;const oe=z-W;W!==0&&oe-ne.boundary<0&&(N+=z-W,Q.__offset=N)}N+=ne.storage}return W=N%z,W>0&&(N+=z-W),O.__size=N,O.__cache={},this}function A(O){const P=O.value,N={boundary:0,storage:0};return typeof P=="number"?(N.boundary=4,N.storage=4):P.isVector2?(N.boundary=8,N.storage=8):P.isVector3||P.isColor?(N.boundary=16,N.storage=12):P.isVector4?(N.boundary=16,N.storage=16):P.isMatrix3?(N.boundary=48,N.storage=48):P.isMatrix4?(N.boundary=64,N.storage=64):P.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",P),N}function I(O){const P=O.target;P.removeEventListener("dispose",I);const N=l.indexOf(P.__bindingPointIndex);l.splice(N,1),n.deleteBuffer(s[P.id]),delete s[P.id],delete o[P.id]}function L(){for(const O in s)n.deleteBuffer(s[O]);l=[],s={},o={}}return{bind:d,update:p,dispose:L}}function E1e(){const n=s$("canvas");return n.style.display="block",n}function OP(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:E1e(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,s=n.stencil!==void 0?n.stencil:!0,o=n.antialias!==void 0?n.antialias:!1,l=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,u=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,d=n.powerPreference!==void 0?n.powerPreference:"default",p=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let _;t!==null?_=t.getContextAttributes().alpha:_=n.alpha!==void 0?n.alpha:!1;let y=null,b=null;const E=[],C=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=_g,this.physicallyCorrectLights=!1,this.toneMapping=Qg,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const A=this;let I=!1,L=0,O=0,P=null,N=-1,z=null;const W=new ys,H=new ys;let U=null,Q=e.width,ne=e.height,oe=1,le=null,ge=null;const ce=new ys(0,0,Q,ne),pe=new ys(0,0,Q,ne);let Te=!1;const Oe=new VR;let J=!1,se=!1,ie=null;const he=new Qr,Se=new Ht,Fe=new $e,ke={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function qe(){return P===null?oe:1}let De=t;function rt(Le,gt){for(let Ct=0;Ct<Le.length;Ct++){const Tt=Le[Ct],zt=e.getContext(Tt,gt);if(zt!==null)return zt}return null}try{const Le={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:p};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${kE}`),e.addEventListener("webglcontextlost",Ae,!1),e.addEventListener("webglcontextrestored",Je,!1),e.addEventListener("webglcontextcreationerror",jt,!1),De===null){const gt=["webgl2","webgl","experimental-webgl"];if(A.isWebGL1Renderer===!0&&gt.shift(),De=rt(gt,Le),De===null)throw rt(gt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}De.getShaderPrecisionFormat===void 0&&(De.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Le){throw console.error("THREE.WebGLRenderer: "+Le.message),Le}let tt,ft,ct,Pe,Ce,je,it,ot,vt,It,yt,kt,$t,mt,xe,re,Be,dt,bt,Mt,pt,Ke,Ie,q;function ee(){tt=new Pye(De),ft=new kye(De,tt,n),tt.init(ft),Ke=new Uj(De,tt,ft),ct=new _1e(De,tt,ft),Pe=new zye,Ce=new s1e,je=new v1e(De,tt,ct,Ce,ft,Ke,Pe),it=new Lye(A),ot=new Bye(A),vt=new Z0e(De,ft),Ie=new Iye(De,tt,vt,ft),It=new Fye(De,vt,Pe,Ie),yt=new Vye(De,It,vt,Pe),bt=new Wye(De,ft,je),re=new Oye(Ce),kt=new i1e(A,it,ot,tt,ft,Ie,re),$t=new T1e(A,Ce),mt=new a1e,xe=new p1e(tt,ft),dt=new Mye(A,it,ct,yt,_,l),Be=new g1e(A,yt,ft),q=new S1e(De,Pe,ft,ct),Mt=new Rye(De,tt,Pe,ft),pt=new Uye(De,tt,Pe,ft),Pe.programs=kt.programs,A.capabilities=ft,A.extensions=tt,A.properties=Ce,A.renderLists=mt,A.shadowMap=Be,A.state=ct,A.info=Pe}ee();const de=new b1e(A,De);this.xr=de,this.getContext=function(){return De},this.getContextAttributes=function(){return De.getContextAttributes()},this.forceContextLoss=function(){const Le=tt.get("WEBGL_lose_context");Le&&Le.loseContext()},this.forceContextRestore=function(){const Le=tt.get("WEBGL_lose_context");Le&&Le.restoreContext()},this.getPixelRatio=function(){return oe},this.setPixelRatio=function(Le){Le!==void 0&&(oe=Le,this.setSize(Q,ne,!1))},this.getSize=function(Le){return Le.set(Q,ne)},this.setSize=function(Le,gt,Ct){if(de.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Q=Le,ne=gt,e.width=Math.floor(Le*oe),e.height=Math.floor(gt*oe),Ct!==!1&&(e.style.width=Le+"px",e.style.height=gt+"px"),this.setViewport(0,0,Le,gt)},this.getDrawingBufferSize=function(Le){return Le.set(Q*oe,ne*oe).floor()},this.setDrawingBufferSize=function(Le,gt,Ct){Q=Le,ne=gt,oe=Ct,e.width=Math.floor(Le*Ct),e.height=Math.floor(gt*Ct),this.setViewport(0,0,Le,gt)},this.getCurrentViewport=function(Le){return Le.copy(W)},this.getViewport=function(Le){return Le.copy(ce)},this.setViewport=function(Le,gt,Ct,Tt){Le.isVector4?ce.set(Le.x,Le.y,Le.z,Le.w):ce.set(Le,gt,Ct,Tt),ct.viewport(W.copy(ce).multiplyScalar(oe).floor())},this.getScissor=function(Le){return Le.copy(pe)},this.setScissor=function(Le,gt,Ct,Tt){Le.isVector4?pe.set(Le.x,Le.y,Le.z,Le.w):pe.set(Le,gt,Ct,Tt),ct.scissor(H.copy(pe).multiplyScalar(oe).floor())},this.getScissorTest=function(){return Te},this.setScissorTest=function(Le){ct.setScissorTest(Te=Le)},this.setOpaqueSort=function(Le){le=Le},this.setTransparentSort=function(Le){ge=Le},this.getClearColor=function(Le){return Le.copy(dt.getClearColor())},this.setClearColor=function(){dt.setClearColor.apply(dt,arguments)},this.getClearAlpha=function(){return dt.getClearAlpha()},this.setClearAlpha=function(){dt.setClearAlpha.apply(dt,arguments)},this.clear=function(Le=!0,gt=!0,Ct=!0){let Tt=0;Le&&(Tt|=16384),gt&&(Tt|=256),Ct&&(Tt|=1024),De.clear(Tt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ae,!1),e.removeEventListener("webglcontextrestored",Je,!1),e.removeEventListener("webglcontextcreationerror",jt,!1),mt.dispose(),xe.dispose(),Ce.dispose(),it.dispose(),ot.dispose(),yt.dispose(),Ie.dispose(),q.dispose(),kt.dispose(),de.dispose(),de.removeEventListener("sessionstart",Dn),de.removeEventListener("sessionend",ii),ie&&(ie.dispose(),ie=null),Lr.stop()};function Ae(Le){Le.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function Je(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1;const Le=Pe.autoReset,gt=Be.enabled,Ct=Be.autoUpdate,Tt=Be.needsUpdate,zt=Be.type;ee(),Pe.autoReset=Le,Be.enabled=gt,Be.autoUpdate=Ct,Be.needsUpdate=Tt,Be.type=zt}function jt(Le){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Le.statusMessage)}function ze(Le){const gt=Le.target;gt.removeEventListener("dispose",ze),Yt(gt)}function Yt(Le){_t(Le),Ce.remove(Le)}function _t(Le){const gt=Ce.get(Le).programs;gt!==void 0&&(gt.forEach(function(Ct){kt.releaseProgram(Ct)}),Le.isShaderMaterial&&kt.releaseShaderCache(Le))}this.renderBufferDirect=function(Le,gt,Ct,Tt,zt,On){gt===null&&(gt=ke);const tr=zt.isMesh&&zt.matrixWorld.determinant()<0,yr=Ft(Le,gt,Ct,Tt,zt);ct.setMaterial(Tt,tr);let Rr=Ct.index;const Li=Ct.attributes.position;if(Rr===null){if(Li===void 0||Li.count===0)return}else if(Rr.count===0)return;let Dr=1;Tt.wireframe===!0&&(Rr=It.getWireframeAttribute(Ct),Dr=2),Ie.setup(zt,Tt,yr,Ct,Rr);let jr,bs=Mt;Rr!==null&&(jr=vt.get(Rr),bs=pt,bs.setIndex(jr));const Ia=Rr!==null?Rr.count:Li.count,wo=Ct.drawRange.start*Dr,jl=Ct.drawRange.count*Dr,Zt=On!==null?On.start*Dr:0,Cr=On!==null?On.count*Dr:1/0,qa=Math.max(wo,Zt),Ra=Math.min(Ia,wo+jl,Zt+Cr)-1,Ns=Math.max(0,Ra-qa+1);if(Ns!==0){if(zt.isMesh)Tt.wireframe===!0?(ct.setLineWidth(Tt.wireframeLinewidth*qe()),bs.setMode(1)):bs.setMode(4);else if(zt.isLine){let Bs=Tt.linewidth;Bs===void 0&&(Bs=1),ct.setLineWidth(Bs*qe()),zt.isLineSegments?bs.setMode(1):zt.isLineLoop?bs.setMode(2):bs.setMode(3)}else zt.isPoints?bs.setMode(0):zt.isSprite&&bs.setMode(4);if(zt.isInstancedMesh)bs.renderInstances(qa,Ns,zt.count);else if(Ct.isInstancedBufferGeometry){const Bs=Math.min(Ct.instanceCount,Ct._maxInstanceCount);bs.renderInstances(qa,Ns,Bs)}else bs.render(qa,Ns)}},this.compile=function(Le,gt){b=xe.get(Le),b.init(),C.push(b),Le.traverseVisible(function(Ct){Ct.isLight&&Ct.layers.test(gt.layers)&&(b.pushLight(Ct),Ct.castShadow&&b.pushShadow(Ct))}),b.setupLights(A.physicallyCorrectLights),Le.traverse(function(Ct){const Tt=Ct.material;if(Tt)if(Array.isArray(Tt))for(let zt=0;zt<Tt.length;zt++){const On=Tt[zt];He(On,Le,Ct)}else He(Tt,Le,Ct)}),C.pop(),b=null};let Kt=null;function Xt(Le){Kt&&Kt(Le)}function Dn(){Lr.stop()}function ii(){Lr.start()}const Lr=new Lj;Lr.setAnimationLoop(Xt),typeof self<"u"&&Lr.setContext(self),this.setAnimationLoop=function(Le){Kt=Le,de.setAnimationLoop(Le),Le===null?Lr.stop():Lr.start()},de.addEventListener("sessionstart",Dn),de.addEventListener("sessionend",ii),this.render=function(Le,gt){if(gt!==void 0&&gt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(I===!0)return;Le.autoUpdate===!0&&Le.updateMatrixWorld(),gt.parent===null&&gt.updateMatrixWorld(),de.enabled===!0&&de.isPresenting===!0&&(de.cameraAutoUpdate===!0&&de.updateCamera(gt),gt=de.getCamera()),Le.isScene===!0&&Le.onBeforeRender(A,Le,gt,P),b=xe.get(Le,C.length),b.init(),C.push(b),he.multiplyMatrices(gt.projectionMatrix,gt.matrixWorldInverse),Oe.setFromProjectionMatrix(he),se=this.localClippingEnabled,J=re.init(this.clippingPlanes,se,gt),y=mt.get(Le,E.length),y.init(),E.push(y),Si(Le,gt,0,A.sortObjects),y.finish(),A.sortObjects===!0&&y.sort(le,ge),J===!0&&re.beginShadows();const Ct=b.state.shadowsArray;if(Be.render(Ct,Le,gt),J===!0&&re.endShadows(),this.info.autoReset===!0&&this.info.reset(),dt.render(y,Le),b.setupLights(A.physicallyCorrectLights),gt.isArrayCamera){const Tt=gt.cameras;for(let zt=0,On=Tt.length;zt<On;zt++){const tr=Tt[zt];Er(y,Le,tr,tr.viewport)}}else Er(y,Le,gt);P!==null&&(je.updateMultisampleRenderTarget(P),je.updateRenderTargetMipmap(P)),Le.isScene===!0&&Le.onAfterRender(A,Le,gt),Ie.resetDefaultState(),N=-1,z=null,C.pop(),C.length>0?b=C[C.length-1]:b=null,E.pop(),E.length>0?y=E[E.length-1]:y=null};function Si(Le,gt,Ct,Tt){if(Le.visible===!1)return;if(Le.layers.test(gt.layers)){if(Le.isGroup)Ct=Le.renderOrder;else if(Le.isLOD)Le.autoUpdate===!0&&Le.update(gt);else if(Le.isLight)b.pushLight(Le),Le.castShadow&&b.pushShadow(Le);else if(Le.isSprite){if(!Le.frustumCulled||Oe.intersectsSprite(Le)){Tt&&Fe.setFromMatrixPosition(Le.matrixWorld).applyMatrix4(he);const On=yt.update(Le),tr=Le.material;tr.visible&&y.push(Le,On,tr,Ct,Fe.z,null)}}else if((Le.isMesh||Le.isLine||Le.isPoints)&&(Le.isSkinnedMesh&&Le.skeleton.frame!==Pe.render.frame&&(Le.skeleton.update(),Le.skeleton.frame=Pe.render.frame),!Le.frustumCulled||Oe.intersectsObject(Le))){Tt&&Fe.setFromMatrixPosition(Le.matrixWorld).applyMatrix4(he);const On=yt.update(Le),tr=Le.material;if(Array.isArray(tr)){const yr=On.groups;for(let Rr=0,Li=yr.length;Rr<Li;Rr++){const Dr=yr[Rr],jr=tr[Dr.materialIndex];jr&&jr.visible&&y.push(Le,On,jr,Ct,Fe.z,Dr)}}else tr.visible&&y.push(Le,On,tr,Ct,Fe.z,null)}}const zt=Le.children;for(let On=0,tr=zt.length;On<tr;On++)Si(zt[On],gt,Ct,Tt)}function Er(Le,gt,Ct,Tt){const zt=Le.opaque,On=Le.transmissive,tr=Le.transparent;b.setupLightsView(Ct),On.length>0&&ir(zt,gt,Ct),Tt&&ct.viewport(W.copy(Tt)),zt.length>0&&te(zt,gt,Ct),On.length>0&&te(On,gt,Ct),tr.length>0&&te(tr,gt,Ct),ct.buffers.depth.setTest(!0),ct.buffers.depth.setMask(!0),ct.buffers.color.setMask(!0),ct.setPolygonOffset(!1)}function ir(Le,gt,Ct){const Tt=ft.isWebGL2;ie===null&&(ie=new Rc(1,1,{generateMipmaps:!0,type:tt.has("EXT_color_buffer_half_float")?C1:ep,minFilter:P1,samples:Tt&&o===!0?4:0})),A.getDrawingBufferSize(Se),Tt?ie.setSize(Se.x,Se.y):ie.setSize(gI(Se.x),gI(Se.y));const zt=A.getRenderTarget();A.setRenderTarget(ie),A.clear();const On=A.toneMapping;A.toneMapping=Qg,te(Le,gt,Ct),A.toneMapping=On,je.updateMultisampleRenderTarget(ie),je.updateRenderTargetMipmap(ie),A.setRenderTarget(zt)}function te(Le,gt,Ct){const Tt=gt.isScene===!0?gt.overrideMaterial:null;for(let zt=0,On=Le.length;zt<On;zt++){const tr=Le[zt],yr=tr.object,Rr=tr.geometry,Li=Tt===null?tr.material:Tt,Dr=tr.group;yr.layers.test(Ct.layers)&&be(yr,gt,Ct,Rr,Li,Dr)}}function be(Le,gt,Ct,Tt,zt,On){Le.onBeforeRender(A,gt,Ct,Tt,zt,On),Le.modelViewMatrix.multiplyMatrices(Ct.matrixWorldInverse,Le.matrixWorld),Le.normalMatrix.getNormalMatrix(Le.modelViewMatrix),zt.onBeforeRender(A,gt,Ct,Tt,Le,On),zt.transparent===!0&&zt.side===tf?(zt.side=id,zt.needsUpdate=!0,A.renderBufferDirect(Ct,gt,Tt,zt,Le,On),zt.side=e_,zt.needsUpdate=!0,A.renderBufferDirect(Ct,gt,Tt,zt,Le,On),zt.side=tf):A.renderBufferDirect(Ct,gt,Tt,zt,Le,On),Le.onAfterRender(A,gt,Ct,Tt,zt,On)}function He(Le,gt,Ct){gt.isScene!==!0&&(gt=ke);const Tt=Ce.get(Le),zt=b.state.lights,On=b.state.shadowsArray,tr=zt.state.version,yr=kt.getParameters(Le,zt.state,On,gt,Ct),Rr=kt.getProgramCacheKey(yr);let Li=Tt.programs;Tt.environment=Le.isMeshStandardMaterial?gt.environment:null,Tt.fog=gt.fog,Tt.envMap=(Le.isMeshStandardMaterial?ot:it).get(Le.envMap||Tt.environment),Li===void 0&&(Le.addEventListener("dispose",ze),Li=new Map,Tt.programs=Li);let Dr=Li.get(Rr);if(Dr!==void 0){if(Tt.currentProgram===Dr&&Tt.lightsStateVersion===tr)return at(Le,yr),Dr}else yr.uniforms=kt.getUniforms(Le),Le.onBuild(Ct,yr,A),Le.onBeforeCompile(yr,A),Dr=kt.acquireProgram(yr,Rr),Li.set(Rr,Dr),Tt.uniforms=yr.uniforms;const jr=Tt.uniforms;(!Le.isShaderMaterial&&!Le.isRawShaderMaterial||Le.clipping===!0)&&(jr.clippingPlanes=re.uniform),at(Le,yr),Tt.needsLights=Rn(Le),Tt.lightsStateVersion=tr,Tt.needsLights&&(jr.ambientLightColor.value=zt.state.ambient,jr.lightProbe.value=zt.state.probe,jr.directionalLights.value=zt.state.directional,jr.directionalLightShadows.value=zt.state.directionalShadow,jr.spotLights.value=zt.state.spot,jr.spotLightShadows.value=zt.state.spotShadow,jr.rectAreaLights.value=zt.state.rectArea,jr.ltc_1.value=zt.state.rectAreaLTC1,jr.ltc_2.value=zt.state.rectAreaLTC2,jr.pointLights.value=zt.state.point,jr.pointLightShadows.value=zt.state.pointShadow,jr.hemisphereLights.value=zt.state.hemi,jr.directionalShadowMap.value=zt.state.directionalShadowMap,jr.directionalShadowMatrix.value=zt.state.directionalShadowMatrix,jr.spotShadowMap.value=zt.state.spotShadowMap,jr.spotShadowMatrix.value=zt.state.spotShadowMatrix,jr.pointShadowMap.value=zt.state.pointShadowMap,jr.pointShadowMatrix.value=zt.state.pointShadowMatrix);const bs=Dr.getUniforms(),Ia=yM.seqWithValue(bs.seq,jr);return Tt.currentProgram=Dr,Tt.uniformsList=Ia,Dr}function at(Le,gt){const Ct=Ce.get(Le);Ct.outputEncoding=gt.outputEncoding,Ct.instancing=gt.instancing,Ct.skinning=gt.skinning,Ct.morphTargets=gt.morphTargets,Ct.morphNormals=gt.morphNormals,Ct.morphColors=gt.morphColors,Ct.morphTargetsCount=gt.morphTargetsCount,Ct.numClippingPlanes=gt.numClippingPlanes,Ct.numIntersection=gt.numClipIntersection,Ct.vertexAlphas=gt.vertexAlphas,Ct.vertexTangents=gt.vertexTangents,Ct.toneMapping=gt.toneMapping}function Ft(Le,gt,Ct,Tt,zt){gt.isScene!==!0&&(gt=ke),je.resetTextureUnits();const On=gt.fog,tr=Tt.isMeshStandardMaterial?gt.environment:null,yr=P===null?A.outputEncoding:P.isXRRenderTarget===!0?P.texture.encoding:_g,Rr=(Tt.isMeshStandardMaterial?ot:it).get(Tt.envMap||tr),Li=Tt.vertexColors===!0&&!!Ct.attributes.color&&Ct.attributes.color.itemSize===4,Dr=!!Tt.normalMap&&!!Ct.attributes.tangent,jr=!!Ct.morphAttributes.position,bs=!!Ct.morphAttributes.normal,Ia=!!Ct.morphAttributes.color,wo=Tt.toneMapped?A.toneMapping:Qg,jl=Ct.morphAttributes.position||Ct.morphAttributes.normal||Ct.morphAttributes.color,Zt=jl!==void 0?jl.length:0,Cr=Ce.get(Tt),qa=b.state.lights;if(J===!0&&(se===!0||Le!==z)){const mr=Le===z&&Tt.id===N;re.setState(Tt,Le,mr)}let Ra=!1;Tt.version===Cr.__version?(Cr.needsLights&&Cr.lightsStateVersion!==qa.state.version||Cr.outputEncoding!==yr||zt.isInstancedMesh&&Cr.instancing===!1||!zt.isInstancedMesh&&Cr.instancing===!0||zt.isSkinnedMesh&&Cr.skinning===!1||!zt.isSkinnedMesh&&Cr.skinning===!0||Cr.envMap!==Rr||Tt.fog===!0&&Cr.fog!==On||Cr.numClippingPlanes!==void 0&&(Cr.numClippingPlanes!==re.numPlanes||Cr.numIntersection!==re.numIntersection)||Cr.vertexAlphas!==Li||Cr.vertexTangents!==Dr||Cr.morphTargets!==jr||Cr.morphNormals!==bs||Cr.morphColors!==Ia||Cr.toneMapping!==wo||ft.isWebGL2===!0&&Cr.morphTargetsCount!==Zt)&&(Ra=!0):(Ra=!0,Cr.__version=Tt.version);let Ns=Cr.currentProgram;Ra===!0&&(Ns=He(Tt,gt,zt));let Bs=!1,Di=!1,Ar=!1;const $n=Ns.getUniforms(),$r=Cr.uniforms;if(ct.useProgram(Ns.program)&&(Bs=!0,Di=!0,Ar=!0),Tt.id!==N&&(N=Tt.id,Di=!0),Bs||z!==Le){if($n.setValue(De,"projectionMatrix",Le.projectionMatrix),ft.logarithmicDepthBuffer&&$n.setValue(De,"logDepthBufFC",2/(Math.log(Le.far+1)/Math.LN2)),z!==Le&&(z=Le,Di=!0,Ar=!0),Tt.isShaderMaterial||Tt.isMeshPhongMaterial||Tt.isMeshToonMaterial||Tt.isMeshStandardMaterial||Tt.envMap){const mr=$n.map.cameraPosition;mr!==void 0&&mr.setValue(De,Fe.setFromMatrixPosition(Le.matrixWorld))}(Tt.isMeshPhongMaterial||Tt.isMeshToonMaterial||Tt.isMeshLambertMaterial||Tt.isMeshBasicMaterial||Tt.isMeshStandardMaterial||Tt.isShaderMaterial)&&$n.setValue(De,"isOrthographic",Le.isOrthographicCamera===!0),(Tt.isMeshPhongMaterial||Tt.isMeshToonMaterial||Tt.isMeshLambertMaterial||Tt.isMeshBasicMaterial||Tt.isMeshStandardMaterial||Tt.isShaderMaterial||Tt.isShadowMaterial||zt.isSkinnedMesh)&&$n.setValue(De,"viewMatrix",Le.matrixWorldInverse)}if(zt.isSkinnedMesh){$n.setOptional(De,zt,"bindMatrix"),$n.setOptional(De,zt,"bindMatrixInverse");const mr=zt.skeleton;mr&&(ft.floatVertexTextures?(mr.boneTexture===null&&mr.computeBoneTexture(),$n.setValue(De,"boneTexture",mr.boneTexture,je),$n.setValue(De,"boneTextureSize",mr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const zr=Ct.morphAttributes;if((zr.position!==void 0||zr.normal!==void 0||zr.color!==void 0&&ft.isWebGL2===!0)&&bt.update(zt,Ct,Tt,Ns),(Di||Cr.receiveShadow!==zt.receiveShadow)&&(Cr.receiveShadow=zt.receiveShadow,$n.setValue(De,"receiveShadow",zt.receiveShadow)),Di&&($n.setValue(De,"toneMappingExposure",A.toneMappingExposure),Cr.needsLights&&rn($r,Ar),On&&Tt.fog===!0&&$t.refreshFogUniforms($r,On),$t.refreshMaterialUniforms($r,Tt,oe,ne,ie),yM.upload(De,Cr.uniformsList,$r,je)),Tt.isShaderMaterial&&Tt.uniformsNeedUpdate===!0&&(yM.upload(De,Cr.uniformsList,$r,je),Tt.uniformsNeedUpdate=!1),Tt.isSpriteMaterial&&$n.setValue(De,"center",zt.center),$n.setValue(De,"modelViewMatrix",zt.modelViewMatrix),$n.setValue(De,"normalMatrix",zt.normalMatrix),$n.setValue(De,"modelMatrix",zt.matrixWorld),Tt.isShaderMaterial||Tt.isRawShaderMaterial){const mr=Tt.uniformsGroups;for(let Ni=0,Ts=mr.length;Ni<Ts;Ni++)if(ft.isWebGL2){const ci=mr[Ni];q.update(ci,Ns),q.bind(ci,Ns)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ns}function rn(Le,gt){Le.ambientLightColor.needsUpdate=gt,Le.lightProbe.needsUpdate=gt,Le.directionalLights.needsUpdate=gt,Le.directionalLightShadows.needsUpdate=gt,Le.pointLights.needsUpdate=gt,Le.pointLightShadows.needsUpdate=gt,Le.spotLights.needsUpdate=gt,Le.spotLightShadows.needsUpdate=gt,Le.rectAreaLights.needsUpdate=gt,Le.hemisphereLights.needsUpdate=gt}function Rn(Le){return Le.isMeshLambertMaterial||Le.isMeshToonMaterial||Le.isMeshPhongMaterial||Le.isMeshStandardMaterial||Le.isShadowMaterial||Le.isShaderMaterial&&Le.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(Le,gt,Ct){Ce.get(Le.texture).__webglTexture=gt,Ce.get(Le.depthTexture).__webglTexture=Ct;const Tt=Ce.get(Le);Tt.__hasExternalTextures=!0,Tt.__hasExternalTextures&&(Tt.__autoAllocateDepthBuffer=Ct===void 0,Tt.__autoAllocateDepthBuffer||tt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Tt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Le,gt){const Ct=Ce.get(Le);Ct.__webglFramebuffer=gt,Ct.__useDefaultFramebuffer=gt===void 0},this.setRenderTarget=function(Le,gt=0,Ct=0){P=Le,L=gt,O=Ct;let Tt=!0;if(Le){const yr=Ce.get(Le);yr.__useDefaultFramebuffer!==void 0?(ct.bindFramebuffer(36160,null),Tt=!1):yr.__webglFramebuffer===void 0?je.setupRenderTarget(Le):yr.__hasExternalTextures&&je.rebindTextures(Le,Ce.get(Le.texture).__webglTexture,Ce.get(Le.depthTexture).__webglTexture)}let zt=null,On=!1,tr=!1;if(Le){const yr=Le.texture;(yr.isData3DTexture||yr.isDataArrayTexture)&&(tr=!0);const Rr=Ce.get(Le).__webglFramebuffer;Le.isWebGLCubeRenderTarget?(zt=Rr[gt],On=!0):ft.isWebGL2&&Le.samples>0&&je.useMultisampledRTT(Le)===!1?zt=Ce.get(Le).__webglMultisampledFramebuffer:zt=Rr,W.copy(Le.viewport),H.copy(Le.scissor),U=Le.scissorTest}else W.copy(ce).multiplyScalar(oe).floor(),H.copy(pe).multiplyScalar(oe).floor(),U=Te;if(ct.bindFramebuffer(36160,zt)&&ft.drawBuffers&&Tt&&ct.drawBuffers(Le,zt),ct.viewport(W),ct.scissor(H),ct.setScissorTest(U),On){const yr=Ce.get(Le.texture);De.framebufferTexture2D(36160,36064,34069+gt,yr.__webglTexture,Ct)}else if(tr){const yr=Ce.get(Le.texture),Rr=gt||0;De.framebufferTextureLayer(36160,36064,yr.__webglTexture,Ct||0,Rr)}N=-1},this.readRenderTargetPixels=function(Le,gt,Ct,Tt,zt,On,tr){if(!(Le&&Le.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let yr=Ce.get(Le).__webglFramebuffer;if(Le.isWebGLCubeRenderTarget&&tr!==void 0&&(yr=yr[tr]),yr){ct.bindFramebuffer(36160,yr);try{const Rr=Le.texture,Li=Rr.format,Dr=Rr.type;if(Li!==Pf&&Ke.convert(Li)!==De.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const jr=Dr===C1&&(tt.has("EXT_color_buffer_half_float")||ft.isWebGL2&&tt.has("EXT_color_buffer_float"));if(Dr!==ep&&Ke.convert(Dr)!==De.getParameter(35738)&&!(Dr===j0&&(ft.isWebGL2||tt.has("OES_texture_float")||tt.has("WEBGL_color_buffer_float")))&&!jr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}gt>=0&&gt<=Le.width-Tt&&Ct>=0&&Ct<=Le.height-zt&&De.readPixels(gt,Ct,Tt,zt,Ke.convert(Li),Ke.convert(Dr),On)}finally{const Rr=P!==null?Ce.get(P).__webglFramebuffer:null;ct.bindFramebuffer(36160,Rr)}}},this.copyFramebufferToTexture=function(Le,gt,Ct=0){const Tt=Math.pow(2,-Ct),zt=Math.floor(gt.image.width*Tt),On=Math.floor(gt.image.height*Tt);je.setTexture2D(gt,0),De.copyTexSubImage2D(3553,Ct,0,0,Le.x,Le.y,zt,On),ct.unbindTexture()},this.copyTextureToTexture=function(Le,gt,Ct,Tt=0){const zt=gt.image.width,On=gt.image.height,tr=Ke.convert(Ct.format),yr=Ke.convert(Ct.type);je.setTexture2D(Ct,0),De.pixelStorei(37440,Ct.flipY),De.pixelStorei(37441,Ct.premultiplyAlpha),De.pixelStorei(3317,Ct.unpackAlignment),gt.isDataTexture?De.texSubImage2D(3553,Tt,Le.x,Le.y,zt,On,tr,yr,gt.image.data):gt.isCompressedTexture?De.compressedTexSubImage2D(3553,Tt,Le.x,Le.y,gt.mipmaps[0].width,gt.mipmaps[0].height,tr,gt.mipmaps[0].data):De.texSubImage2D(3553,Tt,Le.x,Le.y,tr,yr,gt.image),Tt===0&&Ct.generateMipmaps&&De.generateMipmap(3553),ct.unbindTexture()},this.copyTextureToTexture3D=function(Le,gt,Ct,Tt,zt=0){if(A.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const On=Le.max.x-Le.min.x+1,tr=Le.max.y-Le.min.y+1,yr=Le.max.z-Le.min.z+1,Rr=Ke.convert(Tt.format),Li=Ke.convert(Tt.type);let Dr;if(Tt.isData3DTexture)je.setTexture3D(Tt,0),Dr=32879;else if(Tt.isDataArrayTexture)je.setTexture2DArray(Tt,0),Dr=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}De.pixelStorei(37440,Tt.flipY),De.pixelStorei(37441,Tt.premultiplyAlpha),De.pixelStorei(3317,Tt.unpackAlignment);const jr=De.getParameter(3314),bs=De.getParameter(32878),Ia=De.getParameter(3316),wo=De.getParameter(3315),jl=De.getParameter(32877),Zt=Ct.isCompressedTexture?Ct.mipmaps[0]:Ct.image;De.pixelStorei(3314,Zt.width),De.pixelStorei(32878,Zt.height),De.pixelStorei(3316,Le.min.x),De.pixelStorei(3315,Le.min.y),De.pixelStorei(32877,Le.min.z),Ct.isDataTexture||Ct.isData3DTexture?De.texSubImage3D(Dr,zt,gt.x,gt.y,gt.z,On,tr,yr,Rr,Li,Zt.data):Ct.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),De.compressedTexSubImage3D(Dr,zt,gt.x,gt.y,gt.z,On,tr,yr,Rr,Zt.data)):De.texSubImage3D(Dr,zt,gt.x,gt.y,gt.z,On,tr,yr,Rr,Li,Zt),De.pixelStorei(3314,jr),De.pixelStorei(32878,bs),De.pixelStorei(3316,Ia),De.pixelStorei(3315,wo),De.pixelStorei(32877,jl),zt===0&&Tt.generateMipmaps&&De.generateMipmap(Dr),ct.unbindTexture()},this.initTexture=function(Le){Le.isCubeTexture?je.setTextureCube(Le,0):Le.isData3DTexture?je.setTexture3D(Le,0):Le.isDataArrayTexture?je.setTexture2DArray(Le,0):je.setTexture2D(Le,0),ct.unbindTexture()},this.resetState=function(){L=0,O=0,P=null,ct.reset(),Ie.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class Hj extends OP{}Hj.prototype.isWebGL1Renderer=!0;class YR{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Nn(e),this.density=t}clone(){return new YR(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class KR{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Nn(e),this.near=t,this.far=i}clone(){return new KR(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class o$ extends to{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}class JR{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=r$,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Mm()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mm()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mm()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Yp=new $e;class xm{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Yp.fromBufferAttribute(this,t),Yp.applyMatrix4(e),this.setXYZ(t,Yp.x,Yp.y,Yp.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Yp.fromBufferAttribute(this,t),Yp.applyNormalMatrix(e),this.setXYZ(t,Yp.x,Yp.y,Yp.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Yp.fromBufferAttribute(this,t),Yp.transformDirection(e),this.setXYZ(t,Yp.x,Yp.y,Yp.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return new Bo(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new xm(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class LP extends sd{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Nn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let nS;const Mx=new $e,rS=new $e,iS=new $e,sS=new Ht,Ix=new Ht,Gj=new Qr,aA=new $e,Rx=new $e,lA=new $e,pH=new Ht,yO=new Ht,fH=new Ht;class Wj extends to{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",nS===void 0){nS=new oi;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new JR(t,5);nS.setIndex([0,1,2,0,2,3]),nS.setAttribute("position",new xm(i,3,0,!1)),nS.setAttribute("uv",new xm(i,2,3,!1))}this.geometry=nS,this.material=e!==void 0?e:new LP,this.center=new Ht(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),rS.setFromMatrixScale(this.matrixWorld),Gj.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),iS.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&rS.multiplyScalar(-iS.z);const i=this.material.rotation;let s,o;i!==0&&(o=Math.cos(i),s=Math.sin(i));const l=this.center;uA(aA.set(-.5,-.5,0),iS,l,rS,s,o),uA(Rx.set(.5,-.5,0),iS,l,rS,s,o),uA(lA.set(.5,.5,0),iS,l,rS,s,o),pH.set(0,0),yO.set(1,0),fH.set(1,1);let u=e.ray.intersectTriangle(aA,Rx,lA,!1,Mx);if(u===null&&(uA(Rx.set(-.5,.5,0),iS,l,rS,s,o),yO.set(0,1),u=e.ray.intersectTriangle(aA,lA,Rx,!1,Mx),u===null))return;const d=e.ray.origin.distanceTo(Mx);d<e.near||d>e.far||t.push({distance:d,point:Mx.clone(),uv:Sm.getUV(Mx,aA,Rx,lA,pH,yO,fH,new Ht),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function uA(n,e,t,i,s,o){sS.subVectors(n,t).addScalar(.5).multiply(i),s!==void 0?(Ix.x=o*sS.x-s*sS.y,Ix.y=s*sS.x+o*sS.y):Ix.copy(sS),n.copy(e),n.x+=Ix.x,n.y+=Ix.y,n.applyMatrix4(Gj)}const cA=new $e,mH=new $e;class Vj extends to{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,s=t.length;i<s;i++){const o=t[i];this.addLevel(o.object.clone(),o.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,s;for(i=1,s=t.length;i<s&&!(e<t[i].distance);i++);return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){cA.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(cA);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){cA.setFromMatrixPosition(e.matrixWorld),mH.setFromMatrixPosition(this.matrixWorld);const i=cA.distanceTo(mH)/e.zoom;t[0].object.visible=!0;let s,o;for(s=1,o=t.length;s<o&&i>=t[s].distance;s++)t[s-1].object.visible=!1,t[s].object.visible=!0;for(this._currentLevel=s-1;s<o;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let s=0,o=i.length;s<o;s++){const l=i[s];t.object.levels.push({object:l.object.uuid,distance:l.distance})}return t}}const gH=new $e,_H=new ys,vH=new ys,x1e=new $e,yH=new Qr;class jj extends Fn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Qr,this.bindMatrixInverse=new Qr}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ys,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,s=this.geometry;_H.fromBufferAttribute(s.attributes.skinIndex,e),vH.fromBufferAttribute(s.attributes.skinWeight,e),gH.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=vH.getComponent(o);if(l!==0){const u=_H.getComponent(o);yH.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),t.addScaledVector(x1e.copy(gH).applyMatrix4(yH),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class DP extends to{constructor(){super(),this.isBone=!0,this.type="Bone"}}class zS extends lc{constructor(e=null,t=1,i=1,s,o,l,u,d,p=Gl,_=Gl,y,b){super(null,l,u,d,p,_,s,o,y,b),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const bH=new Qr,w1e=new Qr;class qR{constructor(e=[],t=[]){this.uuid=Mm(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new Qr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Qr;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const u=e[o]?e[o].matrixWorld:w1e;bH.multiplyMatrices(u,t[o]),bH.toArray(i,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new qR(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Aj(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new zS(t,e,e,Pf,j0);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const o=e.bones[i];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new DP),this.bones.push(l),this.boneInverses.push(new Qr().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,o=t.length;s<o;s++){const l=t[s];e.bones.push(l.uuid);const u=i[s];e.boneInverses.push(u.toArray())}return e}}class A1 extends Bo{constructor(e,t,i,s=1){typeof i=="number"&&(s=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const TH=new Qr,SH=new Qr,hA=[],kx=new Fn;class Xj extends Fn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new A1(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,s=this.count;if(kx.geometry=this.geometry,kx.material=this.material,kx.material!==void 0)for(let o=0;o<s;o++){this.getMatrixAt(o,TH),SH.multiplyMatrices(i,TH),kx.matrixWorld=SH,kx.raycast(e,hA);for(let l=0,u=hA.length;l<u;l++){const d=hA[l];d.instanceId=o,d.object=this,t.push(d)}hA.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new A1(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Mp extends sd{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Nn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const EH=new $e,xH=new $e,wH=new Qr,bO=new D$,dA=new s_;class xp extends to{constructor(e=new oi,t=new Mp){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,o=t.count;s<o;s++)EH.fromBufferAttribute(t,s-1),xH.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=EH.distanceTo(xH);e.setAttribute("lineDistance",new rr(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),dA.copy(i.boundingSphere),dA.applyMatrix4(s),dA.radius+=o,e.ray.intersectsSphere(dA)===!1)return;wH.copy(s).invert(),bO.copy(e.ray).applyMatrix4(wH);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=new $e,_=new $e,y=new $e,b=new $e,E=this.isLineSegments?2:1,C=i.index,A=i.attributes.position;if(C!==null){const I=Math.max(0,l.start),L=Math.min(C.count,l.start+l.count);for(let O=I,P=L-1;O<P;O+=E){const N=C.getX(O),z=C.getX(O+1);if(p.fromBufferAttribute(A,N),_.fromBufferAttribute(A,z),bO.distanceSqToSegment(p,_,b,y)>d)continue;b.applyMatrix4(this.matrixWorld);const W=e.ray.origin.distanceTo(b);W<e.near||W>e.far||t.push({distance:W,point:y.clone().applyMatrix4(this.matrixWorld),index:O,face:null,faceIndex:null,object:this})}}else{const I=Math.max(0,l.start),L=Math.min(A.count,l.start+l.count);for(let O=I,P=L-1;O<P;O+=E){if(p.fromBufferAttribute(A,O),_.fromBufferAttribute(A,O+1),bO.distanceSqToSegment(p,_,b,y)>d)continue;b.applyMatrix4(this.matrixWorld);const N=e.ray.origin.distanceTo(b);N<e.near||N>e.far||t.push({distance:N,point:y.clone().applyMatrix4(this.matrixWorld),index:O,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const $H=new $e,CH=new $e;class o_ extends xp{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,o=t.count;s<o;s+=2)$H.fromBufferAttribute(t,s),CH.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+$H.distanceTo(CH);e.setAttribute("lineDistance",new rr(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Yj extends xp{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class QR extends sd{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Nn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const AH=new Qr,eN=new D$,pA=new s_,fA=new $e;class Kj extends to{constructor(e=new oi,t=new QR){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),pA.copy(i.boundingSphere),pA.applyMatrix4(s),pA.radius+=o,e.ray.intersectsSphere(pA)===!1)return;AH.copy(s).invert(),eN.copy(e.ray).applyMatrix4(AH);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=i.index,_=i.attributes.position;if(p!==null){const y=Math.max(0,l.start),b=Math.min(p.count,l.start+l.count);for(let E=y,C=b;E<C;E++){const A=p.getX(E);fA.fromBufferAttribute(_,A),MH(fA,A,d,s,e,t,this)}}else{const y=Math.max(0,l.start),b=Math.min(_.count,l.start+l.count);for(let E=y,C=b;E<C;E++)fA.fromBufferAttribute(_,E),MH(fA,E,d,s,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function MH(n,e,t,i,s,o,l){const u=eN.distanceSqToPoint(n);if(u<t){const d=new $e;eN.closestPointToPoint(n,d),d.applyMatrix4(i);const p=s.ray.origin.distanceTo(d);if(p<s.near||p>s.far)return;o.push({distance:p,distanceToRay:Math.sqrt(u),point:d,index:e,face:null,object:l})}}class $1e extends lc{constructor(e,t,i,s,o,l,u,d,p){super(e,t,i,s,o,l,u,d,p),this.isVideoTexture=!0,this.minFilter=l!==void 0?l:Tl,this.magFilter=o!==void 0?o:Tl,this.generateMipmaps=!1;const _=this;function y(){_.needsUpdate=!0,e.requestVideoFrameCallback(y)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(y)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class C1e extends lc{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=Gl,this.minFilter=Gl,this.generateMipmaps=!1,this.needsUpdate=!0}}class Jj extends lc{constructor(e,t,i,s,o,l,u,d,p,_,y,b){super(null,l,u,d,p,_,s,o,y,b),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class A1e extends lc{constructor(e,t,i,s,o,l,u,d,p){super(e,t,i,s,o,l,u,d,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class i0{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,s=this.getPoint(0),o=0;t.push(0);for(let l=1;l<=e;l++)i=this.getPoint(l/e),o+=i.distanceTo(s),t.push(o),s=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let s=0;const o=i.length;let l;t?l=t:l=e*i[o-1];let u=0,d=o-1,p;for(;u<=d;)if(s=Math.floor(u+(d-u)/2),p=i[s]-l,p<0)u=s+1;else if(p>0)d=s-1;else{d=s;break}if(s=d,i[s]===l)return s/(o-1);const _=i[s],y=i[s+1]-_,b=(l-_)/y;return(s+b)/(o-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),l=this.getPoint(s),u=t||(o.isVector2?new Ht:new $e);return u.copy(l).sub(o).normalize(),u}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new $e,s=[],o=[],l=[],u=new $e,d=new Qr;for(let E=0;E<=e;E++){const C=E/e;s[E]=this.getTangentAt(C,new $e)}o[0]=new $e,l[0]=new $e;let p=Number.MAX_VALUE;const _=Math.abs(s[0].x),y=Math.abs(s[0].y),b=Math.abs(s[0].z);_<=p&&(p=_,i.set(1,0,0)),y<=p&&(p=y,i.set(0,1,0)),b<=p&&i.set(0,0,1),u.crossVectors(s[0],i).normalize(),o[0].crossVectors(s[0],u),l[0].crossVectors(s[0],o[0]);for(let E=1;E<=e;E++){if(o[E]=o[E-1].clone(),l[E]=l[E-1].clone(),u.crossVectors(s[E-1],s[E]),u.length()>Number.EPSILON){u.normalize();const C=Math.acos(ah(s[E-1].dot(s[E]),-1,1));o[E].applyMatrix4(d.makeRotationAxis(u,C))}l[E].crossVectors(s[E],o[E])}if(t===!0){let E=Math.acos(ah(o[0].dot(o[e]),-1,1));E/=e,s[0].dot(u.crossVectors(o[0],o[e]))>0&&(E=-E);for(let C=1;C<=e;C++)o[C].applyMatrix4(d.makeRotationAxis(s[C],E*C)),l[C].crossVectors(s[C],o[C])}return{tangents:s,normals:o,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class ZR extends i0{constructor(e=0,t=0,i=1,s=1,o=0,l=Math.PI*2,u=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=s,this.aStartAngle=o,this.aEndAngle=l,this.aClockwise=u,this.aRotation=d}getPoint(e,t){const i=t||new Ht,s=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const l=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=s;for(;o>s;)o-=s;o<Number.EPSILON&&(l?o=0:o=s),this.aClockwise===!0&&!l&&(o===s?o=-s:o=o-s);const u=this.aStartAngle+e*o;let d=this.aX+this.xRadius*Math.cos(u),p=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const _=Math.cos(this.aRotation),y=Math.sin(this.aRotation),b=d-this.aX,E=p-this.aY;d=b*_-E*y+this.aX,p=b*y+E*_+this.aY}return i.set(d,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class qj extends ZR{constructor(e,t,i,s,o,l){super(e,t,i,i,s,o,l),this.isArcCurve=!0,this.type="ArcCurve"}}function NP(){let n=0,e=0,t=0,i=0;function s(o,l,u,d){n=o,e=u,t=-3*o+3*l-2*u-d,i=2*o-2*l+u+d}return{initCatmullRom:function(o,l,u,d,p){s(l,u,p*(u-o),p*(d-l))},initNonuniformCatmullRom:function(o,l,u,d,p,_,y){let b=(l-o)/p-(u-o)/(p+_)+(u-l)/_,E=(u-l)/_-(d-l)/(_+y)+(d-u)/y;b*=_,E*=_,s(l,u,b,E)},calc:function(o){const l=o*o,u=l*o;return n+e*o+t*l+i*u}}}const mA=new $e,TO=new NP,SO=new NP,EO=new NP;class Qj extends i0{constructor(e=[],t=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=s}getPoint(e,t=new $e){const i=t,s=this.points,o=s.length,l=(o-(this.closed?0:1))*e;let u=Math.floor(l),d=l-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:d===0&&u===o-1&&(u=o-2,d=1);let p,_;this.closed||u>0?p=s[(u-1)%o]:(mA.subVectors(s[0],s[1]).add(s[0]),p=mA);const y=s[u%o],b=s[(u+1)%o];if(this.closed||u+2<o?_=s[(u+2)%o]:(mA.subVectors(s[o-1],s[o-2]).add(s[o-1]),_=mA),this.curveType==="centripetal"||this.curveType==="chordal"){const E=this.curveType==="chordal"?.5:.25;let C=Math.pow(p.distanceToSquared(y),E),A=Math.pow(y.distanceToSquared(b),E),I=Math.pow(b.distanceToSquared(_),E);A<1e-4&&(A=1),C<1e-4&&(C=A),I<1e-4&&(I=A),TO.initNonuniformCatmullRom(p.x,y.x,b.x,_.x,C,A,I),SO.initNonuniformCatmullRom(p.y,y.y,b.y,_.y,C,A,I),EO.initNonuniformCatmullRom(p.z,y.z,b.z,_.z,C,A,I)}else this.curveType==="catmullrom"&&(TO.initCatmullRom(p.x,y.x,b.x,_.x,this.tension),SO.initCatmullRom(p.y,y.y,b.y,_.y,this.tension),EO.initCatmullRom(p.z,y.z,b.z,_.z,this.tension));return i.set(TO.calc(d),SO.calc(d),EO.calc(d)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new $e().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function IH(n,e,t,i,s){const o=(i-e)*.5,l=(s-t)*.5,u=n*n,d=n*u;return(2*t-2*i+o+l)*d+(-3*t+3*i-2*o-l)*u+o*n+t}function M1e(n,e){const t=1-n;return t*t*e}function I1e(n,e){return 2*(1-n)*n*e}function R1e(n,e){return n*n*e}function _w(n,e,t,i){return M1e(n,e)+I1e(n,t)+R1e(n,i)}function k1e(n,e){const t=1-n;return t*t*t*e}function O1e(n,e){const t=1-n;return 3*t*t*n*e}function L1e(n,e){return 3*(1-n)*n*n*e}function D1e(n,e){return n*n*n*e}function vw(n,e,t,i,s){return k1e(n,e)+O1e(n,t)+L1e(n,i)+D1e(n,s)}class BP extends i0{constructor(e=new Ht,t=new Ht,i=new Ht,s=new Ht){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new Ht){const i=t,s=this.v0,o=this.v1,l=this.v2,u=this.v3;return i.set(vw(e,s.x,o.x,l.x,u.x),vw(e,s.y,o.y,l.y,u.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Zj extends i0{constructor(e=new $e,t=new $e,i=new $e,s=new $e){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new $e){const i=t,s=this.v0,o=this.v1,l=this.v2,u=this.v3;return i.set(vw(e,s.x,o.x,l.x,u.x),vw(e,s.y,o.y,l.y,u.y),vw(e,s.z,o.z,l.z,u.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ek extends i0{constructor(e=new Ht,t=new Ht){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ht){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new Ht;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class eX extends i0{constructor(e=new $e,t=new $e){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new $e){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PP extends i0{constructor(e=new Ht,t=new Ht,i=new Ht){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ht){const i=t,s=this.v0,o=this.v1,l=this.v2;return i.set(_w(e,s.x,o.x,l.x),_w(e,s.y,o.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class FP extends i0{constructor(e=new $e,t=new $e,i=new $e){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new $e){const i=t,s=this.v0,o=this.v1,l=this.v2;return i.set(_w(e,s.x,o.x,l.x),_w(e,s.y,o.y,l.y),_w(e,s.z,o.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class UP extends i0{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ht){const i=t,s=this.points,o=(s.length-1)*e,l=Math.floor(o),u=o-l,d=s[l===0?l:l-1],p=s[l],_=s[l>s.length-2?s.length-1:l+1],y=s[l>s.length-3?s.length-1:l+2];return i.set(IH(u,d.x,p.x,_.x,y.x),IH(u,d.y,p.y,_.y,y.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new Ht().fromArray(s))}return this}}var zP=Object.freeze({__proto__:null,ArcCurve:qj,CatmullRomCurve3:Qj,CubicBezierCurve:BP,CubicBezierCurve3:Zj,EllipseCurve:ZR,LineCurve:ek,LineCurve3:eX,QuadraticBezierCurve:PP,QuadraticBezierCurve3:FP,SplineCurve:UP});class tX extends i0{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ek(t,e))}getPoint(e,t){const i=e*this.getLength(),s=this.getCurveLengths();let o=0;for(;o<s.length;){if(s[o]>=i){const l=s[o]-i,u=this.curves[o],d=u.getLength(),p=d===0?0:1-l/d;return u.getPointAt(p,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,s=this.curves.length;i<s;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let s=0,o=this.curves;s<o.length;s++){const l=o[s],u=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,d=l.getPoints(u);for(let p=0;p<d.length;p++){const _=d[p];i&&i.equals(_)||(t.push(_),i=_)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(new zP[s.type]().fromJSON(s))}return this}}class a$ extends tX{constructor(e){super(),this.type="Path",this.currentPoint=new Ht,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new ek(this.currentPoint.clone(),new Ht(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,s){const o=new PP(this.currentPoint.clone(),new Ht(e,t),new Ht(i,s));return this.curves.push(o),this.currentPoint.set(i,s),this}bezierCurveTo(e,t,i,s,o,l){const u=new BP(this.currentPoint.clone(),new Ht(e,t),new Ht(i,s),new Ht(o,l));return this.curves.push(u),this.currentPoint.set(o,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new UP(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,s,o,l){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+u,t+d,i,s,o,l),this}absarc(e,t,i,s,o,l){return this.absellipse(e,t,i,i,s,o,l),this}ellipse(e,t,i,s,o,l,u,d){const p=this.currentPoint.x,_=this.currentPoint.y;return this.absellipse(e+p,t+_,i,s,o,l,u,d),this}absellipse(e,t,i,s,o,l,u,d){const p=new ZR(e,t,i,s,o,l,u,d);if(this.curves.length>0){const y=p.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(p);const _=p.getPoint(1);return this.currentPoint.copy(_),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class M1 extends oi{constructor(e=[new Ht(0,-.5),new Ht(.5,0),new Ht(0,.5)],t=12,i=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:s},t=Math.floor(t),s=ah(s,0,Math.PI*2);const o=[],l=[],u=[],d=[],p=[],_=1/t,y=new $e,b=new Ht,E=new $e,C=new $e,A=new $e;let I=0,L=0;for(let O=0;O<=e.length-1;O++)switch(O){case 0:I=e[O+1].x-e[O].x,L=e[O+1].y-e[O].y,E.x=L*1,E.y=-I,E.z=L*0,A.copy(E),E.normalize(),d.push(E.x,E.y,E.z);break;case e.length-1:d.push(A.x,A.y,A.z);break;default:I=e[O+1].x-e[O].x,L=e[O+1].y-e[O].y,E.x=L*1,E.y=-I,E.z=L*0,C.copy(E),E.x+=A.x,E.y+=A.y,E.z+=A.z,E.normalize(),d.push(E.x,E.y,E.z),A.copy(C)}for(let O=0;O<=t;O++){const P=i+O*_*s,N=Math.sin(P),z=Math.cos(P);for(let W=0;W<=e.length-1;W++){y.x=e[W].x*N,y.y=e[W].y,y.z=e[W].x*z,l.push(y.x,y.y,y.z),b.x=O/t,b.y=W/(e.length-1),u.push(b.x,b.y);const H=d[3*W+0]*N,U=d[3*W+1],Q=d[3*W+0]*z;p.push(H,U,Q)}}for(let O=0;O<t;O++)for(let P=0;P<e.length-1;P++){const N=P+O*e.length,z=N,W=N+e.length,H=N+e.length+1,U=N+1;o.push(z,W,U),o.push(H,U,W)}this.setIndex(o),this.setAttribute("position",new rr(l,3)),this.setAttribute("uv",new rr(u,2)),this.setAttribute("normal",new rr(p,3))}static fromJSON(e){return new M1(e.points,e.segments,e.phiStart,e.phiLength)}}class oE extends M1{constructor(e=1,t=1,i=4,s=8){const o=new a$;o.absarc(0,-t/2,e,Math.PI*1.5,0),o.absarc(0,t/2,e,0,Math.PI*.5),super(o.getPoints(i),s),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:s}}static fromJSON(e){return new oE(e.radius,e.length,e.capSegments,e.radialSegments)}}class aE extends oi{constructor(e=1,t=8,i=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:s},t=Math.max(3,t);const o=[],l=[],u=[],d=[],p=new $e,_=new Ht;l.push(0,0,0),u.push(0,0,1),d.push(.5,.5);for(let y=0,b=3;y<=t;y++,b+=3){const E=i+y/t*s;p.x=e*Math.cos(E),p.y=e*Math.sin(E),l.push(p.x,p.y,p.z),u.push(0,0,1),_.x=(l[b]/e+1)/2,_.y=(l[b+1]/e+1)/2,d.push(_.x,_.y)}for(let y=1;y<=t;y++)o.push(y,y+1,0);this.setIndex(o),this.setAttribute("position",new rr(l,3)),this.setAttribute("normal",new rr(u,3)),this.setAttribute("uv",new rr(d,2))}static fromJSON(e){return new aE(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Hl extends oi{constructor(e=1,t=1,i=1,s=8,o=1,l=!1,u=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:s,heightSegments:o,openEnded:l,thetaStart:u,thetaLength:d};const p=this;s=Math.floor(s),o=Math.floor(o);const _=[],y=[],b=[],E=[];let C=0;const A=[],I=i/2;let L=0;O(),l===!1&&(e>0&&P(!0),t>0&&P(!1)),this.setIndex(_),this.setAttribute("position",new rr(y,3)),this.setAttribute("normal",new rr(b,3)),this.setAttribute("uv",new rr(E,2));function O(){const N=new $e,z=new $e;let W=0;const H=(t-e)/i;for(let U=0;U<=o;U++){const Q=[],ne=U/o,oe=ne*(t-e)+e;for(let le=0;le<=s;le++){const ge=le/s,ce=ge*d+u,pe=Math.sin(ce),Te=Math.cos(ce);z.x=oe*pe,z.y=-ne*i+I,z.z=oe*Te,y.push(z.x,z.y,z.z),N.set(pe,H,Te).normalize(),b.push(N.x,N.y,N.z),E.push(ge,1-ne),Q.push(C++)}A.push(Q)}for(let U=0;U<s;U++)for(let Q=0;Q<o;Q++){const ne=A[Q][U],oe=A[Q+1][U],le=A[Q+1][U+1],ge=A[Q][U+1];_.push(ne,oe,ge),_.push(oe,le,ge),W+=6}p.addGroup(L,W,0),L+=W}function P(N){const z=C,W=new Ht,H=new $e;let U=0;const Q=N===!0?e:t,ne=N===!0?1:-1;for(let le=1;le<=s;le++)y.push(0,I*ne,0),b.push(0,ne,0),E.push(.5,.5),C++;const oe=C;for(let le=0;le<=s;le++){const ge=le/s*d+u,ce=Math.cos(ge),pe=Math.sin(ge);H.x=Q*pe,H.y=I*ne,H.z=Q*ce,y.push(H.x,H.y,H.z),b.push(0,ne,0),W.x=ce*.5+.5,W.y=pe*.5*ne+.5,E.push(W.x,W.y),C++}for(let le=0;le<s;le++){const ge=z+le,ce=oe+le;N===!0?_.push(ce,ce+1,ge):_.push(ce+1,ce,ge),U+=3}p.addGroup(L,U,N===!0?1:2),L+=U}}static fromJSON(e){return new Hl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class lE extends Hl{constructor(e=1,t=1,i=8,s=1,o=!1,l=0,u=Math.PI*2){super(0,e,t,i,s,o,l,u),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:u}}static fromJSON(e){return new lE(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class t_ extends oi{constructor(e=[],t=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:s};const o=[],l=[];u(s),p(i),_(),this.setAttribute("position",new rr(o,3)),this.setAttribute("normal",new rr(o.slice(),3)),this.setAttribute("uv",new rr(l,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function u(O){const P=new $e,N=new $e,z=new $e;for(let W=0;W<t.length;W+=3)E(t[W+0],P),E(t[W+1],N),E(t[W+2],z),d(P,N,z,O)}function d(O,P,N,z){const W=z+1,H=[];for(let U=0;U<=W;U++){H[U]=[];const Q=O.clone().lerp(N,U/W),ne=P.clone().lerp(N,U/W),oe=W-U;for(let le=0;le<=oe;le++)le===0&&U===W?H[U][le]=Q:H[U][le]=Q.clone().lerp(ne,le/oe)}for(let U=0;U<W;U++)for(let Q=0;Q<2*(W-U)-1;Q++){const ne=Math.floor(Q/2);Q%2===0?(b(H[U][ne+1]),b(H[U+1][ne]),b(H[U][ne])):(b(H[U][ne+1]),b(H[U+1][ne+1]),b(H[U+1][ne]))}}function p(O){const P=new $e;for(let N=0;N<o.length;N+=3)P.x=o[N+0],P.y=o[N+1],P.z=o[N+2],P.normalize().multiplyScalar(O),o[N+0]=P.x,o[N+1]=P.y,o[N+2]=P.z}function _(){const O=new $e;for(let P=0;P<o.length;P+=3){O.x=o[P+0],O.y=o[P+1],O.z=o[P+2];const N=I(O)/2/Math.PI+.5,z=L(O)/Math.PI+.5;l.push(N,1-z)}C(),y()}function y(){for(let O=0;O<l.length;O+=6){const P=l[O+0],N=l[O+2],z=l[O+4],W=Math.max(P,N,z),H=Math.min(P,N,z);W>.9&&H<.1&&(P<.2&&(l[O+0]+=1),N<.2&&(l[O+2]+=1),z<.2&&(l[O+4]+=1))}}function b(O){o.push(O.x,O.y,O.z)}function E(O,P){const N=O*3;P.x=e[N+0],P.y=e[N+1],P.z=e[N+2]}function C(){const O=new $e,P=new $e,N=new $e,z=new $e,W=new Ht,H=new Ht,U=new Ht;for(let Q=0,ne=0;Q<o.length;Q+=9,ne+=6){O.set(o[Q+0],o[Q+1],o[Q+2]),P.set(o[Q+3],o[Q+4],o[Q+5]),N.set(o[Q+6],o[Q+7],o[Q+8]),W.set(l[ne+0],l[ne+1]),H.set(l[ne+2],l[ne+3]),U.set(l[ne+4],l[ne+5]),z.copy(O).add(P).add(N).divideScalar(3);const oe=I(z);A(W,ne+0,O,oe),A(H,ne+2,P,oe),A(U,ne+4,N,oe)}}function A(O,P,N,z){z<0&&O.x===1&&(l[P]=O.x-1),N.x===0&&N.z===0&&(l[P]=z/2/Math.PI+.5)}function I(O){return Math.atan2(O.z,-O.x)}function L(O){return Math.atan2(-O.y,Math.sqrt(O.x*O.x+O.z*O.z))}}static fromJSON(e){return new t_(e.vertices,e.indices,e.radius,e.details)}}class uE extends t_{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=1/i,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uE(e.radius,e.detail)}}const gA=new $e,_A=new $e,xO=new $e,vA=new Sm;class nX extends oi{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(d1*t),o=e.getIndex(),l=e.getAttribute("position"),u=o?o.count:l.count,d=[0,0,0],p=["a","b","c"],_=new Array(3),y={},b=[];for(let E=0;E<u;E+=3){o?(d[0]=o.getX(E),d[1]=o.getX(E+1),d[2]=o.getX(E+2)):(d[0]=E,d[1]=E+1,d[2]=E+2);const{a:C,b:A,c:I}=vA;if(C.fromBufferAttribute(l,d[0]),A.fromBufferAttribute(l,d[1]),I.fromBufferAttribute(l,d[2]),vA.getNormal(xO),_[0]=`${Math.round(C.x*i)},${Math.round(C.y*i)},${Math.round(C.z*i)}`,_[1]=`${Math.round(A.x*i)},${Math.round(A.y*i)},${Math.round(A.z*i)}`,_[2]=`${Math.round(I.x*i)},${Math.round(I.y*i)},${Math.round(I.z*i)}`,!(_[0]===_[1]||_[1]===_[2]||_[2]===_[0]))for(let L=0;L<3;L++){const O=(L+1)%3,P=_[L],N=_[O],z=vA[p[L]],W=vA[p[O]],H=`${P}_${N}`,U=`${N}_${P}`;U in y&&y[U]?(xO.dot(y[U].normal)<=s&&(b.push(z.x,z.y,z.z),b.push(W.x,W.y,W.z)),y[U]=null):H in y||(y[H]={index0:d[L],index1:d[O],normal:xO.clone()})}}for(const E in y)if(y[E]){const{index0:C,index1:A}=y[E];gA.fromBufferAttribute(l,C),_A.fromBufferAttribute(l,A),b.push(gA.x,gA.y,gA.z),b.push(_A.x,_A.y,_A.z)}this.setAttribute("position",new rr(b,3))}}}class m1 extends a${constructor(e){super(e),this.uuid=Mm(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,s=this.holes.length;i<s;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(new a$().fromJSON(s))}return this}}const N1e={triangulate:function(n,e,t=2){const i=e&&e.length,s=i?e[0]*t:n.length;let o=rX(n,0,s,t,!0);const l=[];if(!o||o.next===o.prev)return l;let u,d,p,_,y,b,E;if(i&&(o=z1e(n,e,o,t)),n.length>80*t){u=p=n[0],d=_=n[1];for(let C=t;C<s;C+=t)y=n[C],b=n[C+1],y<u&&(u=y),b<d&&(d=b),y>p&&(p=y),b>_&&(_=b);E=Math.max(p-u,_-d),E=E!==0?1/E:0}return l$(o,l,t,u,d,E),l}};function rX(n,e,t,i,s){let o,l;if(s===Q1e(n,e,t,i)>0)for(o=e;o<t;o+=i)l=RH(o,n[o],n[o+1],l);else for(o=t-i;o>=e;o-=i)l=RH(o,n[o],n[o+1],l);return l&&tk(l,l.next)&&(c$(l),l=l.next),l}function wy(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(tk(t,t.next)||ic(t.prev,t,t.next)===0)){if(c$(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function l$(n,e,t,i,s,o,l){if(!n)return;!l&&o&&j1e(n,i,s,o);let u=n,d,p;for(;n.prev!==n.next;){if(d=n.prev,p=n.next,o?P1e(n,i,s,o):B1e(n)){e.push(d.i/t),e.push(n.i/t),e.push(p.i/t),c$(n),n=p.next,u=p.next;continue}if(n=p,n===u){l?l===1?(n=F1e(wy(n),e,t),l$(n,e,t,i,s,o,2)):l===2&&U1e(n,e,t,i,s,o):l$(wy(n),e,t,i,s,o,1);break}}}function B1e(n){const e=n.prev,t=n,i=n.next;if(ic(e,t,i)>=0)return!1;let s=n.next.next;for(;s!==n.prev;){if(AS(e.x,e.y,t.x,t.y,i.x,i.y,s.x,s.y)&&ic(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function P1e(n,e,t,i){const s=n.prev,o=n,l=n.next;if(ic(s,o,l)>=0)return!1;const u=s.x<o.x?s.x<l.x?s.x:l.x:o.x<l.x?o.x:l.x,d=s.y<o.y?s.y<l.y?s.y:l.y:o.y<l.y?o.y:l.y,p=s.x>o.x?s.x>l.x?s.x:l.x:o.x>l.x?o.x:l.x,_=s.y>o.y?s.y>l.y?s.y:l.y:o.y>l.y?o.y:l.y,y=tN(u,d,e,t,i),b=tN(p,_,e,t,i);let E=n.prevZ,C=n.nextZ;for(;E&&E.z>=y&&C&&C.z<=b;){if(E!==n.prev&&E!==n.next&&AS(s.x,s.y,o.x,o.y,l.x,l.y,E.x,E.y)&&ic(E.prev,E,E.next)>=0||(E=E.prevZ,C!==n.prev&&C!==n.next&&AS(s.x,s.y,o.x,o.y,l.x,l.y,C.x,C.y)&&ic(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;E&&E.z>=y;){if(E!==n.prev&&E!==n.next&&AS(s.x,s.y,o.x,o.y,l.x,l.y,E.x,E.y)&&ic(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;C&&C.z<=b;){if(C!==n.prev&&C!==n.next&&AS(s.x,s.y,o.x,o.y,l.x,l.y,C.x,C.y)&&ic(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function F1e(n,e,t){let i=n;do{const s=i.prev,o=i.next.next;!tk(s,o)&&iX(s,i,i.next,o)&&u$(s,o)&&u$(o,s)&&(e.push(s.i/t),e.push(i.i/t),e.push(o.i/t),c$(i),c$(i.next),i=n=o),i=i.next}while(i!==n);return wy(i)}function U1e(n,e,t,i,s,o){let l=n;do{let u=l.next.next;for(;u!==l.prev;){if(l.i!==u.i&&K1e(l,u)){let d=sX(l,u);l=wy(l,l.next),d=wy(d,d.next),l$(l,e,t,i,s,o),l$(d,e,t,i,s,o);return}u=u.next}l=l.next}while(l!==n)}function z1e(n,e,t,i){const s=[];let o,l,u,d,p;for(o=0,l=e.length;o<l;o++)u=e[o]*i,d=o<l-1?e[o+1]*i:n.length,p=rX(n,u,d,i,!1),p===p.next&&(p.steiner=!0),s.push(Y1e(p));for(s.sort(H1e),o=0;o<s.length;o++)G1e(s[o],t),t=wy(t,t.next);return t}function H1e(n,e){return n.x-e.x}function G1e(n,e){if(e=W1e(n,e),e){const t=sX(e,n);wy(e,e.next),wy(t,t.next)}}function W1e(n,e){let t=e;const i=n.x,s=n.y;let o=-1/0,l;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const b=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(b<=i&&b>o){if(o=b,b===i){if(s===t.y)return t;if(s===t.next.y)return t.next}l=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!l)return null;if(i===o)return l;const u=l,d=l.x,p=l.y;let _=1/0,y;t=l;do i>=t.x&&t.x>=d&&i!==t.x&&AS(s<p?i:o,s,d,p,s<p?o:i,s,t.x,t.y)&&(y=Math.abs(s-t.y)/(i-t.x),u$(t,n)&&(y<_||y===_&&(t.x>l.x||t.x===l.x&&V1e(l,t)))&&(l=t,_=y)),t=t.next;while(t!==u);return l}function V1e(n,e){return ic(n.prev,n,e.prev)<0&&ic(e.next,n,n.next)<0}function j1e(n,e,t,i){let s=n;do s.z===null&&(s.z=tN(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,X1e(s)}function X1e(n){let e,t,i,s,o,l,u,d,p=1;do{for(t=n,n=null,o=null,l=0;t;){for(l++,i=t,u=0,e=0;e<p&&(u++,i=i.nextZ,!!i);e++);for(d=p;u>0||d>0&&i;)u!==0&&(d===0||!i||t.z<=i.z)?(s=t,t=t.nextZ,u--):(s=i,i=i.nextZ,d--),o?o.nextZ=s:n=s,s.prevZ=o,o=s;t=i}o.nextZ=null,p*=2}while(l>1);return n}function tN(n,e,t,i,s){return n=32767*(n-t)*s,e=32767*(e-i)*s,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Y1e(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function AS(n,e,t,i,s,o,l,u){return(s-l)*(e-u)-(n-l)*(o-u)>=0&&(n-l)*(i-u)-(t-l)*(e-u)>=0&&(t-l)*(o-u)-(s-l)*(i-u)>=0}function K1e(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!J1e(n,e)&&(u$(n,e)&&u$(e,n)&&q1e(n,e)&&(ic(n.prev,n,e.prev)||ic(n,e.prev,e))||tk(n,e)&&ic(n.prev,n,n.next)>0&&ic(e.prev,e,e.next)>0)}function ic(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function tk(n,e){return n.x===e.x&&n.y===e.y}function iX(n,e,t,i){const s=bA(ic(n,e,t)),o=bA(ic(n,e,i)),l=bA(ic(t,i,n)),u=bA(ic(t,i,e));return!!(s!==o&&l!==u||s===0&&yA(n,t,e)||o===0&&yA(n,i,e)||l===0&&yA(t,n,i)||u===0&&yA(t,e,i))}function yA(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function bA(n){return n>0?1:n<0?-1:0}function J1e(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&iX(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function u$(n,e){return ic(n.prev,n,n.next)<0?ic(n,e,n.next)>=0&&ic(n,n.prev,e)>=0:ic(n,e,n.prev)<0||ic(n,n.next,e)<0}function q1e(n,e){let t=n,i=!1;const s=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&s<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function sX(n,e){const t=new nN(n.i,n.x,n.y),i=new nN(e.i,e.x,e.y),s=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,i.next=t,t.prev=i,o.next=i,i.prev=o,i}function RH(n,e,t,i){const s=new nN(n,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function c$(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function nN(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Q1e(n,e,t,i){let s=0;for(let o=e,l=t-i;o<t;o+=i)s+=(n[l]-n[o])*(n[o+1]+n[l+1]),l=o;return s}class q0{static area(e){const t=e.length;let i=0;for(let s=t-1,o=0;o<t;s=o++)i+=e[s].x*e[o].y-e[o].x*e[s].y;return i*.5}static isClockWise(e){return q0.area(e)<0}static triangulateShape(e,t){const i=[],s=[],o=[];kH(e),OH(i,e);let l=e.length;t.forEach(kH);for(let d=0;d<t.length;d++)s.push(l),l+=t[d].length,OH(i,t[d]);const u=N1e.triangulate(i,s);for(let d=0;d<u.length;d+=3)o.push(u.slice(d,d+3));return o}}function kH(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function OH(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class cE extends oi{constructor(e=new m1([new Ht(.5,.5),new Ht(-.5,.5),new Ht(-.5,-.5),new Ht(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,s=[],o=[];for(let u=0,d=e.length;u<d;u++){const p=e[u];l(p)}this.setAttribute("position",new rr(s,3)),this.setAttribute("uv",new rr(o,2)),this.computeVertexNormals();function l(u){const d=[],p=t.curveSegments!==void 0?t.curveSegments:12,_=t.steps!==void 0?t.steps:1,y=t.depth!==void 0?t.depth:1;let b=t.bevelEnabled!==void 0?t.bevelEnabled:!0,E=t.bevelThickness!==void 0?t.bevelThickness:.2,C=t.bevelSize!==void 0?t.bevelSize:E-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,I=t.bevelSegments!==void 0?t.bevelSegments:3;const L=t.extrudePath,O=t.UVGenerator!==void 0?t.UVGenerator:Z1e;let P,N=!1,z,W,H,U;L&&(P=L.getSpacedPoints(_),N=!0,b=!1,z=L.computeFrenetFrames(_,!1),W=new $e,H=new $e,U=new $e),b||(I=0,E=0,C=0,A=0);const Q=u.extractPoints(p);let ne=Q.shape;const oe=Q.holes;if(!q0.isClockWise(ne)){ne=ne.reverse();for(let Pe=0,Ce=oe.length;Pe<Ce;Pe++){const je=oe[Pe];q0.isClockWise(je)&&(oe[Pe]=je.reverse())}}const le=q0.triangulateShape(ne,oe),ge=ne;for(let Pe=0,Ce=oe.length;Pe<Ce;Pe++){const je=oe[Pe];ne=ne.concat(je)}function ce(Pe,Ce,je){return Ce||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ce.clone().multiplyScalar(je).add(Pe)}const pe=ne.length,Te=le.length;function Oe(Pe,Ce,je){let it,ot,vt;const It=Pe.x-Ce.x,yt=Pe.y-Ce.y,kt=je.x-Pe.x,$t=je.y-Pe.y,mt=It*It+yt*yt,xe=It*$t-yt*kt;if(Math.abs(xe)>Number.EPSILON){const re=Math.sqrt(mt),Be=Math.sqrt(kt*kt+$t*$t),dt=Ce.x-yt/re,bt=Ce.y+It/re,Mt=je.x-$t/Be,pt=je.y+kt/Be,Ke=((Mt-dt)*$t-(pt-bt)*kt)/(It*$t-yt*kt);it=dt+It*Ke-Pe.x,ot=bt+yt*Ke-Pe.y;const Ie=it*it+ot*ot;if(Ie<=2)return new Ht(it,ot);vt=Math.sqrt(Ie/2)}else{let re=!1;It>Number.EPSILON?kt>Number.EPSILON&&(re=!0):It<-Number.EPSILON?kt<-Number.EPSILON&&(re=!0):Math.sign(yt)===Math.sign($t)&&(re=!0),re?(it=-yt,ot=It,vt=Math.sqrt(mt)):(it=It,ot=yt,vt=Math.sqrt(mt/2))}return new Ht(it/vt,ot/vt)}const J=[];for(let Pe=0,Ce=ge.length,je=Ce-1,it=Pe+1;Pe<Ce;Pe++,je++,it++)je===Ce&&(je=0),it===Ce&&(it=0),J[Pe]=Oe(ge[Pe],ge[je],ge[it]);const se=[];let ie,he=J.concat();for(let Pe=0,Ce=oe.length;Pe<Ce;Pe++){const je=oe[Pe];ie=[];for(let it=0,ot=je.length,vt=ot-1,It=it+1;it<ot;it++,vt++,It++)vt===ot&&(vt=0),It===ot&&(It=0),ie[it]=Oe(je[it],je[vt],je[It]);se.push(ie),he=he.concat(ie)}for(let Pe=0;Pe<I;Pe++){const Ce=Pe/I,je=E*Math.cos(Ce*Math.PI/2),it=C*Math.sin(Ce*Math.PI/2)+A;for(let ot=0,vt=ge.length;ot<vt;ot++){const It=ce(ge[ot],J[ot],it);De(It.x,It.y,-je)}for(let ot=0,vt=oe.length;ot<vt;ot++){const It=oe[ot];ie=se[ot];for(let yt=0,kt=It.length;yt<kt;yt++){const $t=ce(It[yt],ie[yt],it);De($t.x,$t.y,-je)}}}const Se=C+A;for(let Pe=0;Pe<pe;Pe++){const Ce=b?ce(ne[Pe],he[Pe],Se):ne[Pe];N?(H.copy(z.normals[0]).multiplyScalar(Ce.x),W.copy(z.binormals[0]).multiplyScalar(Ce.y),U.copy(P[0]).add(H).add(W),De(U.x,U.y,U.z)):De(Ce.x,Ce.y,0)}for(let Pe=1;Pe<=_;Pe++)for(let Ce=0;Ce<pe;Ce++){const je=b?ce(ne[Ce],he[Ce],Se):ne[Ce];N?(H.copy(z.normals[Pe]).multiplyScalar(je.x),W.copy(z.binormals[Pe]).multiplyScalar(je.y),U.copy(P[Pe]).add(H).add(W),De(U.x,U.y,U.z)):De(je.x,je.y,y/_*Pe)}for(let Pe=I-1;Pe>=0;Pe--){const Ce=Pe/I,je=E*Math.cos(Ce*Math.PI/2),it=C*Math.sin(Ce*Math.PI/2)+A;for(let ot=0,vt=ge.length;ot<vt;ot++){const It=ce(ge[ot],J[ot],it);De(It.x,It.y,y+je)}for(let ot=0,vt=oe.length;ot<vt;ot++){const It=oe[ot];ie=se[ot];for(let yt=0,kt=It.length;yt<kt;yt++){const $t=ce(It[yt],ie[yt],it);N?De($t.x,$t.y+P[_-1].y,P[_-1].x+je):De($t.x,$t.y,y+je)}}}Fe(),ke();function Fe(){const Pe=s.length/3;if(b){let Ce=0,je=pe*Ce;for(let it=0;it<Te;it++){const ot=le[it];rt(ot[2]+je,ot[1]+je,ot[0]+je)}Ce=_+I*2,je=pe*Ce;for(let it=0;it<Te;it++){const ot=le[it];rt(ot[0]+je,ot[1]+je,ot[2]+je)}}else{for(let Ce=0;Ce<Te;Ce++){const je=le[Ce];rt(je[2],je[1],je[0])}for(let Ce=0;Ce<Te;Ce++){const je=le[Ce];rt(je[0]+pe*_,je[1]+pe*_,je[2]+pe*_)}}i.addGroup(Pe,s.length/3-Pe,0)}function ke(){const Pe=s.length/3;let Ce=0;qe(ge,Ce),Ce+=ge.length;for(let je=0,it=oe.length;je<it;je++){const ot=oe[je];qe(ot,Ce),Ce+=ot.length}i.addGroup(Pe,s.length/3-Pe,1)}function qe(Pe,Ce){let je=Pe.length;for(;--je>=0;){const it=je;let ot=je-1;ot<0&&(ot=Pe.length-1);for(let vt=0,It=_+I*2;vt<It;vt++){const yt=pe*vt,kt=pe*(vt+1),$t=Ce+it+yt,mt=Ce+ot+yt,xe=Ce+ot+kt,re=Ce+it+kt;tt($t,mt,xe,re)}}}function De(Pe,Ce,je){d.push(Pe),d.push(Ce),d.push(je)}function rt(Pe,Ce,je){ft(Pe),ft(Ce),ft(je);const it=s.length/3,ot=O.generateTopUV(i,s,it-3,it-2,it-1);ct(ot[0]),ct(ot[1]),ct(ot[2])}function tt(Pe,Ce,je,it){ft(Pe),ft(Ce),ft(it),ft(Ce),ft(je),ft(it);const ot=s.length/3,vt=O.generateSideWallUV(i,s,ot-6,ot-3,ot-2,ot-1);ct(vt[0]),ct(vt[1]),ct(vt[3]),ct(vt[1]),ct(vt[2]),ct(vt[3])}function ft(Pe){s.push(d[Pe*3+0]),s.push(d[Pe*3+1]),s.push(d[Pe*3+2])}function ct(Pe){o.push(Pe.x),o.push(Pe.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return eTe(t,i,e)}static fromJSON(e,t){const i=[];for(let o=0,l=e.shapes.length;o<l;o++){const u=t[e.shapes[o]];i.push(u)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new zP[s.type]().fromJSON(s)),new cE(i,e.options)}}const Z1e={generateTopUV:function(n,e,t,i,s){const o=e[t*3],l=e[t*3+1],u=e[i*3],d=e[i*3+1],p=e[s*3],_=e[s*3+1];return[new Ht(o,l),new Ht(u,d),new Ht(p,_)]},generateSideWallUV:function(n,e,t,i,s,o){const l=e[t*3],u=e[t*3+1],d=e[t*3+2],p=e[i*3],_=e[i*3+1],y=e[i*3+2],b=e[s*3],E=e[s*3+1],C=e[s*3+2],A=e[o*3],I=e[o*3+1],L=e[o*3+2];return Math.abs(u-_)<Math.abs(l-p)?[new Ht(l,1-d),new Ht(p,1-y),new Ht(b,1-C),new Ht(A,1-L)]:[new Ht(u,1-d),new Ht(_,1-y),new Ht(E,1-C),new Ht(I,1-L)]}};function eTe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,s=n.length;i<s;i++){const o=n[i];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class hE extends t_{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hE(e.radius,e.detail)}}class Yg extends t_{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Yg(e.radius,e.detail)}}class dE extends oi{constructor(e=.5,t=1,i=8,s=1,o=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:s,thetaStart:o,thetaLength:l},i=Math.max(3,i),s=Math.max(1,s);const u=[],d=[],p=[],_=[];let y=e;const b=(t-e)/s,E=new $e,C=new Ht;for(let A=0;A<=s;A++){for(let I=0;I<=i;I++){const L=o+I/i*l;E.x=y*Math.cos(L),E.y=y*Math.sin(L),d.push(E.x,E.y,E.z),p.push(0,0,1),C.x=(E.x/t+1)/2,C.y=(E.y/t+1)/2,_.push(C.x,C.y)}y+=b}for(let A=0;A<s;A++){const I=A*(i+1);for(let L=0;L<i;L++){const O=L+I,P=O,N=O+i+1,z=O+i+2,W=O+1;u.push(P,N,W),u.push(N,z,W)}}this.setIndex(u),this.setAttribute("position",new rr(d,3)),this.setAttribute("normal",new rr(p,3)),this.setAttribute("uv",new rr(_,2))}static fromJSON(e){return new dE(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class pE extends oi{constructor(e=new m1([new Ht(0,.5),new Ht(-.5,-.5),new Ht(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],s=[],o=[],l=[];let u=0,d=0;if(Array.isArray(e)===!1)p(e);else for(let _=0;_<e.length;_++)p(e[_]),this.addGroup(u,d,_),u+=d,d=0;this.setIndex(i),this.setAttribute("position",new rr(s,3)),this.setAttribute("normal",new rr(o,3)),this.setAttribute("uv",new rr(l,2));function p(_){const y=s.length/3,b=_.extractPoints(t);let E=b.shape;const C=b.holes;q0.isClockWise(E)===!1&&(E=E.reverse());for(let I=0,L=C.length;I<L;I++){const O=C[I];q0.isClockWise(O)===!0&&(C[I]=O.reverse())}const A=q0.triangulateShape(E,C);for(let I=0,L=C.length;I<L;I++){const O=C[I];E=E.concat(O)}for(let I=0,L=E.length;I<L;I++){const O=E[I];s.push(O.x,O.y,0),o.push(0,0,1),l.push(O.x,O.y)}for(let I=0,L=A.length;I<L;I++){const O=A[I],P=O[0]+y,N=O[1]+y,z=O[2]+y;i.push(P,N,z),d+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return tTe(t,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];i.push(l)}return new pE(i,e.curveSegments)}}function tTe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const s=n[t];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return e}class t0 extends oi{constructor(e=1,t=32,i=16,s=0,o=Math.PI*2,l=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:s,phiLength:o,thetaStart:l,thetaLength:u},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const d=Math.min(l+u,Math.PI);let p=0;const _=[],y=new $e,b=new $e,E=[],C=[],A=[],I=[];for(let L=0;L<=i;L++){const O=[],P=L/i;let N=0;L==0&&l==0?N=.5/t:L==i&&d==Math.PI&&(N=-.5/t);for(let z=0;z<=t;z++){const W=z/t;y.x=-e*Math.cos(s+W*o)*Math.sin(l+P*u),y.y=e*Math.cos(l+P*u),y.z=e*Math.sin(s+W*o)*Math.sin(l+P*u),C.push(y.x,y.y,y.z),b.copy(y).normalize(),A.push(b.x,b.y,b.z),I.push(W+N,1-P),O.push(p++)}_.push(O)}for(let L=0;L<i;L++)for(let O=0;O<t;O++){const P=_[L][O+1],N=_[L][O],z=_[L+1][O],W=_[L+1][O+1];(L!==0||l>0)&&E.push(P,N,W),(L!==i-1||d<Math.PI)&&E.push(N,z,W)}this.setIndex(E),this.setAttribute("position",new rr(C,3)),this.setAttribute("normal",new rr(A,3)),this.setAttribute("uv",new rr(I,2))}static fromJSON(e){return new t0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class fE extends t_{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new fE(e.radius,e.detail)}}class jg extends oi{constructor(e=1,t=.4,i=8,s=6,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:s,arc:o},i=Math.floor(i),s=Math.floor(s);const l=[],u=[],d=[],p=[],_=new $e,y=new $e,b=new $e;for(let E=0;E<=i;E++)for(let C=0;C<=s;C++){const A=C/s*o,I=E/i*Math.PI*2;y.x=(e+t*Math.cos(I))*Math.cos(A),y.y=(e+t*Math.cos(I))*Math.sin(A),y.z=t*Math.sin(I),u.push(y.x,y.y,y.z),_.x=e*Math.cos(A),_.y=e*Math.sin(A),b.subVectors(y,_).normalize(),d.push(b.x,b.y,b.z),p.push(C/s),p.push(E/i)}for(let E=1;E<=i;E++)for(let C=1;C<=s;C++){const A=(s+1)*E+C-1,I=(s+1)*(E-1)+C-1,L=(s+1)*(E-1)+C,O=(s+1)*E+C;l.push(A,I,O),l.push(I,L,O)}this.setIndex(l),this.setAttribute("position",new rr(u,3)),this.setAttribute("normal",new rr(d,3)),this.setAttribute("uv",new rr(p,2))}static fromJSON(e){return new jg(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class mE extends oi{constructor(e=1,t=.4,i=64,s=8,o=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:s,p:o,q:l},i=Math.floor(i),s=Math.floor(s);const u=[],d=[],p=[],_=[],y=new $e,b=new $e,E=new $e,C=new $e,A=new $e,I=new $e,L=new $e;for(let P=0;P<=i;++P){const N=P/i*o*Math.PI*2;O(N,o,l,e,E),O(N+.01,o,l,e,C),I.subVectors(C,E),L.addVectors(C,E),A.crossVectors(I,L),L.crossVectors(A,I),A.normalize(),L.normalize();for(let z=0;z<=s;++z){const W=z/s*Math.PI*2,H=-t*Math.cos(W),U=t*Math.sin(W);y.x=E.x+(H*L.x+U*A.x),y.y=E.y+(H*L.y+U*A.y),y.z=E.z+(H*L.z+U*A.z),d.push(y.x,y.y,y.z),b.subVectors(y,E).normalize(),p.push(b.x,b.y,b.z),_.push(P/i),_.push(z/s)}}for(let P=1;P<=i;P++)for(let N=1;N<=s;N++){const z=(s+1)*(P-1)+(N-1),W=(s+1)*P+(N-1),H=(s+1)*P+N,U=(s+1)*(P-1)+N;u.push(z,W,U),u.push(W,H,U)}this.setIndex(u),this.setAttribute("position",new rr(d,3)),this.setAttribute("normal",new rr(p,3)),this.setAttribute("uv",new rr(_,2));function O(P,N,z,W,H){const U=Math.cos(P),Q=Math.sin(P),ne=z/N*P,oe=Math.cos(ne);H.x=W*(2+oe)*.5*U,H.y=W*(2+oe)*Q*.5,H.z=W*Math.sin(ne)*.5}}static fromJSON(e){return new mE(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class gE extends oi{constructor(e=new FP(new $e(-1,-1,0),new $e(-1,1,0),new $e(1,1,0)),t=64,i=1,s=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:s,closed:o};const l=e.computeFrenetFrames(t,o);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const u=new $e,d=new $e,p=new Ht;let _=new $e;const y=[],b=[],E=[],C=[];A(),this.setIndex(C),this.setAttribute("position",new rr(y,3)),this.setAttribute("normal",new rr(b,3)),this.setAttribute("uv",new rr(E,2));function A(){for(let P=0;P<t;P++)I(P);I(o===!1?t:0),O(),L()}function I(P){_=e.getPointAt(P/t,_);const N=l.normals[P],z=l.binormals[P];for(let W=0;W<=s;W++){const H=W/s*Math.PI*2,U=Math.sin(H),Q=-Math.cos(H);d.x=Q*N.x+U*z.x,d.y=Q*N.y+U*z.y,d.z=Q*N.z+U*z.z,d.normalize(),b.push(d.x,d.y,d.z),u.x=_.x+i*d.x,u.y=_.y+i*d.y,u.z=_.z+i*d.z,y.push(u.x,u.y,u.z)}}function L(){for(let P=1;P<=t;P++)for(let N=1;N<=s;N++){const z=(s+1)*(P-1)+(N-1),W=(s+1)*P+(N-1),H=(s+1)*P+N,U=(s+1)*(P-1)+N;C.push(z,W,U),C.push(W,H,U)}}function O(){for(let P=0;P<=t;P++)for(let N=0;N<=s;N++)p.x=P/t,p.y=N/s,E.push(p.x,p.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new gE(new zP[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class HP extends oi{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,s=new $e,o=new $e;if(e.index!==null){const l=e.attributes.position,u=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:u.count,materialIndex:0}]);for(let p=0,_=d.length;p<_;++p){const y=d[p],b=y.start,E=y.count;for(let C=b,A=b+E;C<A;C+=3)for(let I=0;I<3;I++){const L=u.getX(C+I),O=u.getX(C+(I+1)%3);s.fromBufferAttribute(l,L),o.fromBufferAttribute(l,O),LH(s,o,i)===!0&&(t.push(s.x,s.y,s.z),t.push(o.x,o.y,o.z))}}}else{const l=e.attributes.position;for(let u=0,d=l.count/3;u<d;u++)for(let p=0;p<3;p++){const _=3*u+p,y=3*u+(p+1)%3;s.fromBufferAttribute(l,_),o.fromBufferAttribute(l,y),LH(s,o,i)===!0&&(t.push(s.x,s.y,s.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new rr(t,3))}}}function LH(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(s)===!0?!1:(t.add(i),t.add(s),!0)}var DH=Object.freeze({__proto__:null,BoxGeometry:pu,BoxBufferGeometry:pu,CapsuleGeometry:oE,CapsuleBufferGeometry:oE,CircleGeometry:aE,CircleBufferGeometry:aE,ConeGeometry:lE,ConeBufferGeometry:lE,CylinderGeometry:Hl,CylinderBufferGeometry:Hl,DodecahedronGeometry:uE,DodecahedronBufferGeometry:uE,EdgesGeometry:nX,ExtrudeGeometry:cE,ExtrudeBufferGeometry:cE,IcosahedronGeometry:hE,IcosahedronBufferGeometry:hE,LatheGeometry:M1,LatheBufferGeometry:M1,OctahedronGeometry:Yg,OctahedronBufferGeometry:Yg,PlaneGeometry:e0,PlaneBufferGeometry:e0,PolyhedronGeometry:t_,PolyhedronBufferGeometry:t_,RingGeometry:dE,RingBufferGeometry:dE,ShapeGeometry:pE,ShapeBufferGeometry:pE,SphereGeometry:t0,SphereBufferGeometry:t0,TetrahedronGeometry:fE,TetrahedronBufferGeometry:fE,TorusGeometry:jg,TorusBufferGeometry:jg,TorusKnotGeometry:mE,TorusKnotBufferGeometry:mE,TubeGeometry:gE,TubeBufferGeometry:gE,WireframeGeometry:HP});class oX extends sd{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Nn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class aX extends yd{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class h$ extends sd{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Nn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=F1,this.normalScale=new Ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lX extends h${constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ht(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ah(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Nn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Nn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Nn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class uX extends sd{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Nn(16777215),this.specular=new Nn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=F1,this.normalScale=new Ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=O$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cX extends sd{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Nn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=F1,this.normalScale=new Ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class GP extends sd{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=F1,this.normalScale=new Ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class hX extends sd{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Nn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=O$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class dX extends sd{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Nn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=F1,this.normalScale=new Ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pX extends Mp{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function rg(n,e,t){return WP(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function i1(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function WP(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function fX(n){function e(s,o){return n[s]-n[o]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function rN(n,e,t){const i=n.length,s=new n.constructor(i);for(let o=0,l=0;l!==i;++o){const u=t[o]*e;for(let d=0;d!==e;++d)s[l++]=n[u+d]}return s}function VP(n,e,t,i){let s=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[s++];if(o===void 0)return;let l=o[i];if(l!==void 0)if(Array.isArray(l))do l=o[i],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=n[s++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[i],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=n[s++];while(o!==void 0);else do l=o[i],l!==void 0&&(e.push(o.time),t.push(l)),o=n[s++];while(o!==void 0)}function nTe(n,e,t,i,s=30){const o=n.clone();o.name=e;const l=[];for(let d=0;d<o.tracks.length;++d){const p=o.tracks[d],_=p.getValueSize(),y=[],b=[];for(let E=0;E<p.times.length;++E){const C=p.times[E]*s;if(!(C<t||C>=i)){y.push(p.times[E]);for(let A=0;A<_;++A)b.push(p.values[E*_+A])}}y.length!==0&&(p.times=i1(y,p.times.constructor),p.values=i1(b,p.values.constructor),l.push(p))}o.tracks=l;let u=1/0;for(let d=0;d<o.tracks.length;++d)u>o.tracks[d].times[0]&&(u=o.tracks[d].times[0]);for(let d=0;d<o.tracks.length;++d)o.tracks[d].shift(-1*u);return o.resetDuration(),o}function rTe(n,e=0,t=n,i=30){i<=0&&(i=30);const s=t.tracks.length,o=e/i;for(let l=0;l<s;++l){const u=t.tracks[l],d=u.ValueTypeName;if(d==="bool"||d==="string")continue;const p=n.tracks.find(function(L){return L.name===u.name&&L.ValueTypeName===d});if(p===void 0)continue;let _=0;const y=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=y/3);let b=0;const E=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=E/3);const C=u.times.length-1;let A;if(o<=u.times[0]){const L=_,O=y-_;A=rg(u.values,L,O)}else if(o>=u.times[C]){const L=C*y+_,O=L+y-_;A=rg(u.values,L,O)}else{const L=u.createInterpolant(),O=_,P=y-_;L.evaluate(o),A=rg(L.resultBuffer,O,P)}d==="quaternion"&&new bl().fromArray(A).normalize().conjugate().toArray(A);const I=p.times.length;for(let L=0;L<I;++L){const O=L*E+b;if(d==="quaternion")bl.multiplyQuaternionsFlat(p.values,O,A,0,p.values,O);else{const P=E-b*2;for(let N=0;N<P;++N)p.values[O+N]-=A[N]}}}return n.blendMode=$P,n}var iTe=Object.freeze({__proto__:null,arraySlice:rg,convertArray:i1,isTypedArray:WP,getKeyframeOrder:fX,sortedArray:rN,flattenJSON:VP,subclip:nTe,makeClipAdditive:rTe});class F${constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],o=t[i-1];e:{t:{let l;n:{r:if(!(e<s)){for(let u=i+2;;){if(s===void 0){if(e<o)break r;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(o=s,s=t[++i],e<s)break t}l=t.length;break n}if(!(e>=o)){const u=t[1];e<u&&(i=2,o=u);for(let d=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===d)break;if(s=o,o=t[--i-1],e>=o)break t}l=i,i=0;break n}break e}for(;i<l;){const u=i+l>>>1;e<t[u]?l=u:i=u+1}if(s=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,s)}return this.interpolate_(i,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s;for(let l=0;l!==s;++l)t[l]=i[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class mX extends F${constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:t1,endingEnd:t1}}intervalChanged_(e,t,i){const s=this.parameterPositions;let o=e-2,l=e+1,u=s[o],d=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case n1:o=e,u=2*t-i;break;case n$:o=s.length-2,u=t+s[o]-s[o+1];break;default:o=e,u=i}if(d===void 0)switch(this.getSettings_().endingEnd){case n1:l=e,d=2*i-t;break;case n$:l=1,d=i+s[1]-s[0];break;default:l=e-1,d=t}const p=(i-t)*.5,_=this.valueSize;this._weightPrev=p/(t-u),this._weightNext=p/(d-i),this._offsetPrev=o*_,this._offsetNext=l*_}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=e*u,p=d-u,_=this._offsetPrev,y=this._offsetNext,b=this._weightPrev,E=this._weightNext,C=(i-t)/(s-t),A=C*C,I=A*C,L=-b*I+2*b*A-b*C,O=(1+b)*I+(-1.5-2*b)*A+(-.5+b)*C+1,P=(-1-E)*I+(1.5+E)*A+.5*C,N=E*I-E*A;for(let z=0;z!==u;++z)o[z]=L*l[_+z]+O*l[p+z]+P*l[d+z]+N*l[y+z];return o}}class jP extends F${constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=e*u,p=d-u,_=(i-t)/(s-t),y=1-_;for(let b=0;b!==u;++b)o[b]=l[p+b]*y+l[d+b]*_;return o}}class gX extends F${constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class s0{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=i1(t,this.TimeBufferType),this.values=i1(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:i1(e.times,Array),values:i1(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new gX(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new jP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new mX(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case e$:t=this.InterpolantFactoryMethodDiscrete;break;case t$:t=this.InterpolantFactoryMethodLinear;break;case gM:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return e$;case this.InterpolantFactoryMethodLinear:return t$;case this.InterpolantFactoryMethodSmooth:return gM}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let o=0,l=s-1;for(;o!==s&&i[o]<e;)++o;for(;l!==-1&&i[l]>t;)--l;if(++l,o!==0||l!==s){o>=l&&(l=Math.max(l,1),o=l-1);const u=this.getValueSize();this.times=rg(i,o,l),this.values=rg(this.values,o*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==o;u++){const d=i[u];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,d),e=!1;break}if(l!==null&&l>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,d,l),e=!1;break}l=d}if(s!==void 0&&WP(s))for(let u=0,d=s.length;u!==d;++u){const p=s[u];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,p),e=!1;break}}return e}optimize(){const e=rg(this.times),t=rg(this.values),i=this.getValueSize(),s=this.getInterpolation()===gM,o=e.length-1;let l=1;for(let u=1;u<o;++u){let d=!1;const p=e[u],_=e[u+1];if(p!==_&&(u!==1||p!==e[0]))if(s)d=!0;else{const y=u*i,b=y-i,E=y+i;for(let C=0;C!==i;++C){const A=t[y+C];if(A!==t[b+C]||A!==t[E+C]){d=!0;break}}}if(d){if(u!==l){e[l]=e[u];const y=u*i,b=l*i;for(let E=0;E!==i;++E)t[b+E]=t[y+E]}++l}}if(o>0){e[l]=e[o];for(let u=o*i,d=l*i,p=0;p!==i;++p)t[d+p]=t[u+p];++l}return l!==e.length?(this.times=rg(e,0,l),this.values=rg(t,0,l*i)):(this.times=e,this.values=t),this}clone(){const e=rg(this.times,0),t=rg(this.values,0),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}s0.prototype.TimeBufferType=Float32Array;s0.prototype.ValueBufferType=Float32Array;s0.prototype.DefaultInterpolation=t$;class z1 extends s0{}z1.prototype.ValueTypeName="bool";z1.prototype.ValueBufferType=Array;z1.prototype.DefaultInterpolation=e$;z1.prototype.InterpolantFactoryMethodLinear=void 0;z1.prototype.InterpolantFactoryMethodSmooth=void 0;class XP extends s0{}XP.prototype.ValueTypeName="color";class d$ extends s0{}d$.prototype.ValueTypeName="number";class _X extends F${constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=(i-t)/(s-t);let p=e*u;for(let _=p+u;p!==_;p+=4)bl.slerpFlat(o,0,l,p-u,l,p,d);return o}}class NE extends s0{InterpolantFactoryMethodLinear(e){return new _X(this.times,this.values,this.getValueSize(),e)}}NE.prototype.ValueTypeName="quaternion";NE.prototype.DefaultInterpolation=t$;NE.prototype.InterpolantFactoryMethodSmooth=void 0;class H1 extends s0{}H1.prototype.ValueTypeName="string";H1.prototype.ValueBufferType=Array;H1.prototype.DefaultInterpolation=e$;H1.prototype.InterpolantFactoryMethodLinear=void 0;H1.prototype.InterpolantFactoryMethodSmooth=void 0;class p$ extends s0{}p$.prototype.ValueTypeName="vector";class f${constructor(e,t=-1,i,s=GR){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=Mm(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let l=0,u=i.length;l!==u;++l)t.push(oTe(i[l]).scale(s));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=i.length;o!==l;++o)t.push(s0.toJSON(i[o]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const o=t.length,l=[];for(let u=0;u<o;u++){let d=[],p=[];d.push((u+o-1)%o,u,(u+1)%o),p.push(0,1,0);const _=fX(d);d=rN(d,1,_),p=rN(p,1,_),!s&&d[0]===0&&(d.push(o),p.push(p[0])),l.push(new d$(".morphTargetInfluences["+t[u].name+"]",d,p).scale(1/i))}return new this(e,-1,l)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},o=/^([\w-]*?)([\d]+)$/;for(let u=0,d=e.length;u<d;u++){const p=e[u],_=p.name.match(o);if(_&&_.length>1){const y=_[1];let b=s[y];b||(s[y]=b=[]),b.push(p)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],t,i));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(_,y,b,E,C){if(b.length!==0){const A=[],I=[];VP(b,A,I,E),A.length!==0&&C.push(new _(y,A,I))}},s=[],o=e.name||"default",l=e.fps||30,u=e.blendMode;let d=e.length||-1;const p=e.hierarchy||[];for(let _=0;_<p.length;_++){const y=p[_].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const b={};let E;for(E=0;E<y.length;E++)if(y[E].morphTargets)for(let C=0;C<y[E].morphTargets.length;C++)b[y[E].morphTargets[C]]=-1;for(const C in b){const A=[],I=[];for(let L=0;L!==y[E].morphTargets.length;++L){const O=y[E];A.push(O.time),I.push(O.morphTarget===C?1:0)}s.push(new d$(".morphTargetInfluence["+C+"]",A,I))}d=b.length*l}else{const b=".bones["+t[_].name+"]";i(p$,b+".position",y,"pos",s),i(NE,b+".quaternion",y,"rot",s),i(p$,b+".scale",y,"scl",s)}}return s.length===0?null:new this(o,d,s,u)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function sTe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return d$;case"vector":case"vector2":case"vector3":case"vector4":return p$;case"color":return XP;case"quaternion":return NE;case"bool":case"boolean":return z1;case"string":return H1}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function oTe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=sTe(n.type);if(n.times===void 0){const t=[],i=[];VP(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const I1={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class YP{constructor(e,t,i){const s=this;let o=!1,l=0,u=0,d;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(_){u++,o===!1&&s.onStart!==void 0&&s.onStart(_,l,u),o=!0},this.itemEnd=function(_){l++,s.onProgress!==void 0&&s.onProgress(_,l,u),l===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(_){s.onError!==void 0&&s.onError(_)},this.resolveURL=function(_){return d?d(_):_},this.setURLModifier=function(_){return d=_,this},this.addHandler=function(_,y){return p.push(_,y),this},this.removeHandler=function(_){const y=p.indexOf(_);return y!==-1&&p.splice(y,2),this},this.getHandler=function(_){for(let y=0,b=p.length;y<b;y+=2){const E=p[y],C=p[y+1];if(E.global&&(E.lastIndex=0),E.test(_))return C}return null}}}const vX=new YP;class Pm{constructor(e){this.manager=e!==void 0?e:vX,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,o){i.load(e,s,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const z_={};class aTe extends Error{constructor(e,t){super(e),this.response=t}}class sv extends Pm{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=I1.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(z_[e]!==void 0){z_[e].push({onLoad:t,onProgress:i,onError:s});return}z_[e]=[],z_[e].push({onLoad:t,onProgress:i,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,d=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const _=z_[e],y=p.body.getReader(),b=p.headers.get("Content-Length"),E=b?parseInt(b):0,C=E!==0;let A=0;const I=new ReadableStream({start(L){O();function O(){y.read().then(({done:P,value:N})=>{if(P)L.close();else{A+=N.byteLength;const z=new ProgressEvent("progress",{lengthComputable:C,loaded:A,total:E});for(let W=0,H=_.length;W<H;W++){const U=_[W];U.onProgress&&U.onProgress(z)}L.enqueue(N),O()}})}}});return new Response(I)}else throw new aTe(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(_=>new DOMParser().parseFromString(_,u));case"json":return p.json();default:if(u===void 0)return p.text();{const _=/charset="?([^;"\s]*)"?/i.exec(u),y=_&&_[1]?_[1].toLowerCase():void 0,b=new TextDecoder(y);return p.arrayBuffer().then(E=>b.decode(E))}}}).then(p=>{I1.add(e,p);const _=z_[e];delete z_[e];for(let y=0,b=_.length;y<b;y++){const E=_[y];E.onLoad&&E.onLoad(p)}}).catch(p=>{const _=z_[e];if(_===void 0)throw this.manager.itemError(e),p;delete z_[e];for(let y=0,b=_.length;y<b;y++){const E=_[y];E.onError&&E.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class lTe extends Pm{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new sv(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(d){s?s(d):console.error(d),o.manager.itemError(e)}},i,s)}parse(e){const t=[];for(let i=0;i<e.length;i++){const s=f$.parse(e[i]);t.push(s)}return t}}class uTe extends Pm{constructor(e){super(e)}load(e,t,i,s){const o=this,l=[],u=new Jj,d=new sv(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(o.withCredentials);let p=0;function _(y){d.load(e[y],function(b){const E=o.parse(b,!0);l[y]={width:E.width,height:E.height,format:E.format,mipmaps:E.mipmaps},p+=1,p===6&&(E.mipmapCount===1&&(u.minFilter=Tl),u.image=l,u.format=E.format,u.needsUpdate=!0,t&&t(u))},i,s)}if(Array.isArray(e))for(let y=0,b=e.length;y<b;++y)_(y);else d.load(e,function(y){const b=o.parse(y,!0);if(b.isCubemap){const E=b.mipmaps.length/b.mipmapCount;for(let C=0;C<E;C++){l[C]={mipmaps:[]};for(let A=0;A<b.mipmapCount;A++)l[C].mipmaps.push(b.mipmaps[C*b.mipmapCount+A]),l[C].format=b.format,l[C].width=b.width,l[C].height=b.height}u.image=l}else u.image.width=b.width,u.image.height=b.height,u.mipmaps=b.mipmaps;b.mipmapCount===1&&(u.minFilter=Tl),u.format=b.format,u.needsUpdate=!0,t&&t(u)},i,s);return u}}class m$ extends Pm{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=I1.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u=s$("img");function d(){_(),I1.add(e,this),t&&t(this),o.manager.itemEnd(e)}function p(y){_(),s&&s(y),o.manager.itemError(e),o.manager.itemEnd(e)}function _(){u.removeEventListener("load",d,!1),u.removeEventListener("error",p,!1)}return u.addEventListener("load",d,!1),u.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(e),u.src=e,u}}class cTe extends Pm{constructor(e){super(e)}load(e,t,i,s){const o=new B$,l=new m$(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let u=0;function d(p){l.load(e[p],function(_){o.images[p]=_,u++,u===6&&(o.needsUpdate=!0,t&&t(o))},void 0,s)}for(let p=0;p<e.length;++p)d(p);return o}}class hTe extends Pm{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new zS,u=new sv(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(o.withCredentials),u.load(e,function(d){const p=o.parse(d);!p||(p.image!==void 0?l.image=p.image:p.data!==void 0&&(l.image.width=p.width,l.image.height=p.height,l.image.data=p.data),l.wrapS=p.wrapS!==void 0?p.wrapS:ef,l.wrapT=p.wrapT!==void 0?p.wrapT:ef,l.magFilter=p.magFilter!==void 0?p.magFilter:Tl,l.minFilter=p.minFilter!==void 0?p.minFilter:Tl,l.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.encoding!==void 0&&(l.encoding=p.encoding),p.flipY!==void 0&&(l.flipY=p.flipY),p.format!==void 0&&(l.format=p.format),p.type!==void 0&&(l.type=p.type),p.mipmaps!==void 0&&(l.mipmaps=p.mipmaps,l.minFilter=P1),p.mipmapCount===1&&(l.minFilter=Tl),p.generateMipmaps!==void 0&&(l.generateMipmaps=p.generateMipmaps),l.needsUpdate=!0,t&&t(l,p))},i,s),l}}class dTe extends Pm{constructor(e){super(e)}load(e,t,i,s){const o=new lc,l=new m$(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){o.image=u,o.needsUpdate=!0,t!==void 0&&t(o)},i,s),o}}class Ly extends to{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Nn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class yX extends Ly{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(to.DefaultUp),this.updateMatrix(),this.groundColor=new Nn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const NH=new Qr,BH=new $e,PH=new $e;class KP{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ht(512,512),this.map=null,this.mapPass=null,this.matrix=new Qr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new VR,this._frameExtents=new Ht(1,1),this._viewportCount=1,this._viewports=[new ys(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;BH.setFromMatrixPosition(e.matrixWorld),t.position.copy(BH),PH.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(PH),t.updateMatrixWorld(),NH.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(NH),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class pTe extends KP{constructor(){super(new Ja(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=i$*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||s!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=s,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class bX extends Ly{constructor(e,t,i=0,s=Math.PI/3,o=0,l=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(to.DefaultUp),this.updateMatrix(),this.target=new to,this.distance=i,this.angle=s,this.penumbra=o,this.decay=l,this.shadow=new pTe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const FH=new Qr,Ox=new $e,wO=new $e;class fTe extends KP{constructor(){super(new Ja(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ht(4,2),this._viewportCount=6,this._viewports=[new ys(2,1,1,1),new ys(0,1,1,1),new ys(3,1,1,1),new ys(1,1,1,1),new ys(3,0,1,1),new ys(1,0,1,1)],this._cubeDirections=[new $e(1,0,0),new $e(-1,0,0),new $e(0,0,1),new $e(0,0,-1),new $e(0,1,0),new $e(0,-1,0)],this._cubeUps=[new $e(0,1,0),new $e(0,1,0),new $e(0,1,0),new $e(0,1,0),new $e(0,0,1),new $e(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),Ox.setFromMatrixPosition(e.matrixWorld),i.position.copy(Ox),wO.copy(i.position),wO.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(wO),i.updateMatrixWorld(),s.makeTranslation(-Ox.x,-Ox.y,-Ox.z),FH.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(FH)}}class TX extends Ly{constructor(e,t,i=0,s=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new fTe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class mTe extends KP{constructor(){super(new J0(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class SX extends Ly{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(to.DefaultUp),this.updateMatrix(),this.target=new to,this.shadow=new mTe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class EX extends Ly{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class xX extends Ly{constructor(e,t,i=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class wX{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new $e)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,s=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*s),t.addScaledVector(l[2],.488603*o),t.addScaledVector(l[3],.488603*i),t.addScaledVector(l[4],1.092548*(i*s)),t.addScaledVector(l[5],1.092548*(s*o)),t.addScaledVector(l[6],.315392*(3*o*o-1)),t.addScaledVector(l[7],1.092548*(i*o)),t.addScaledVector(l[8],.546274*(i*i-s*s)),t}getIrradianceAt(e,t){const i=e.x,s=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*s),t.addScaledVector(l[2],2*.511664*o),t.addScaledVector(l[3],2*.511664*i),t.addScaledVector(l[4],2*.429043*i*s),t.addScaledVector(l[5],2*.429043*s*o),t.addScaledVector(l[6],.743125*o*o-.247708),t.addScaledVector(l[7],2*.429043*i*o),t.addScaledVector(l[8],.429043*(i*i-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const i=e.x,s=e.y,o=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*o,t[3]=.488603*i,t[4]=1.092548*i*s,t[5]=1.092548*s*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*i*o,t[8]=.546274*(i*i-s*s)}}class nk extends Ly{constructor(e=new wX,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class rk extends Pm{constructor(e){super(e),this.textures={}}load(e,t,i,s){const o=this,l=new sv(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(d){s?s(d):console.error(d),o.manager.itemError(e)}},i,s)}parse(e){const t=this.textures;function i(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}const s=rk.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new Nn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==1&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const l=e.uniforms[o];switch(s.uniforms[o]={},l.type){case"t":s.uniforms[o].value=i(l.value);break;case"c":s.uniforms[o].value=new Nn().setHex(l.value);break;case"v2":s.uniforms[o].value=new Ht().fromArray(l.value);break;case"v3":s.uniforms[o].value=new $e().fromArray(l.value);break;case"v4":s.uniforms[o].value=new ys().fromArray(l.value);break;case"m3":s.uniforms[o].value=new nf().fromArray(l.value);break;case"m4":s.uniforms[o].value=new Qr().fromArray(l.value);break;default:s.uniforms[o].value=l.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const o in e.extensions)s.extensions[o]=e.extensions[o];if(e.shading!==void 0&&(s.flatShading=e.shading===1),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=i(e.map)),e.matcap!==void 0&&(s.matcap=i(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),s.normalScale=new Ht().fromArray(o)}return e.displacementMap!==void 0&&(s.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Ht().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=i(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:oX,SpriteMaterial:LP,RawShaderMaterial:aX,ShaderMaterial:yd,PointsMaterial:QR,MeshPhysicalMaterial:lX,MeshStandardMaterial:h$,MeshPhongMaterial:uX,MeshToonMaterial:cX,MeshNormalMaterial:GP,MeshLambertMaterial:hX,MeshDepthMaterial:P$,MeshDistanceMaterial:XR,MeshBasicMaterial:r0,MeshMatcapMaterial:dX,LineDashedMaterial:pX,LineBasicMaterial:Mp,Material:sd};return new t[e]}}class iN{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ik extends oi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class $X extends Pm{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new sv(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(d){s?s(d):console.error(d),o.manager.itemError(e)}},i,s)}parse(e){const t={},i={};function s(b,E){if(t[E]!==void 0)return t[E];const C=b.interleavedBuffers[E],A=o(b,C.buffer),I=wS(C.type,A),L=new JR(I,C.stride);return L.uuid=C.uuid,t[E]=L,L}function o(b,E){if(i[E]!==void 0)return i[E];const C=b.arrayBuffers[E],A=new Uint32Array(C).buffer;return i[E]=A,A}const l=e.isInstancedBufferGeometry?new ik:new oi,u=e.data.index;if(u!==void 0){const b=wS(u.type,u.array);l.setIndex(new Bo(b,1))}const d=e.data.attributes;for(const b in d){const E=d[b];let C;if(E.isInterleavedBufferAttribute){const A=s(e.data,E.data);C=new xm(A,E.itemSize,E.offset,E.normalized)}else{const A=wS(E.type,E.array),I=E.isInstancedBufferAttribute?A1:Bo;C=new I(A,E.itemSize,E.normalized)}E.name!==void 0&&(C.name=E.name),E.usage!==void 0&&C.setUsage(E.usage),E.updateRange!==void 0&&(C.updateRange.offset=E.updateRange.offset,C.updateRange.count=E.updateRange.count),l.setAttribute(b,C)}const p=e.data.morphAttributes;if(p)for(const b in p){const E=p[b],C=[];for(let A=0,I=E.length;A<I;A++){const L=E[A];let O;if(L.isInterleavedBufferAttribute){const P=s(e.data,L.data);O=new xm(P,L.itemSize,L.offset,L.normalized)}else{const P=wS(L.type,L.array);O=new Bo(P,L.itemSize,L.normalized)}L.name!==void 0&&(O.name=L.name),C.push(O)}l.morphAttributes[b]=C}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const _=e.data.groups||e.data.drawcalls||e.data.offsets;if(_!==void 0)for(let b=0,E=_.length;b!==E;++b){const C=_[b];l.addGroup(C.start,C.count,C.materialIndex)}const y=e.data.boundingSphere;if(y!==void 0){const b=new $e;y.center!==void 0&&b.fromArray(y.center),l.boundingSphere=new s_(b,y.radius)}return e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class gTe extends Pm{constructor(e){super(e)}load(e,t,i,s){const o=this,l=this.path===""?iN.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const u=new sv(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(d){let p=null;try{p=JSON.parse(d)}catch(y){s!==void 0&&s(y),console.error("THREE:ObjectLoader: Can't parse "+e+".",y.message);return}const _=p.metadata;if(_===void 0||_.type===void 0||_.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(p,t)},i,s)}async loadAsync(e,t){const i=this,s=this.path===""?iN.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new sv(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const l=await o.loadAsync(e,t),u=JSON.parse(l),d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(u)}parse(e,t){const i=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,s),l=this.parseImages(e.images,function(){t!==void 0&&t(p)}),u=this.parseTextures(e.textures,l),d=this.parseMaterials(e.materials,u),p=this.parseObject(e.object,o,d,u,i),_=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,_),t!==void 0){let y=!1;for(const b in l)if(l[b].data instanceof HTMLImageElement){y=!0;break}y===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,s,u,l,t),p=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,p),d}parseShapes(e){const t={};if(e!==void 0)for(let i=0,s=e.length;i<s;i++){const o=new m1().fromJSON(e[i]);t[o.uuid]=o}return t}parseSkeletons(e,t){const i={},s={};if(t.traverse(function(o){o.isBone&&(s[o.uuid]=o)}),e!==void 0)for(let o=0,l=e.length;o<l;o++){const u=new qR().fromJSON(e[o],s);i[u.uuid]=u}return i}parseGeometries(e,t){const i={};if(e!==void 0){const s=new $X;for(let o=0,l=e.length;o<l;o++){let u;const d=e[o];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":u=s.parse(d);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:d.type in DH?u=DH[d.type].fromJSON(d,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}u.uuid=d.uuid,d.name!==void 0&&(u.name=d.name),u.isBufferGeometry===!0&&d.userData!==void 0&&(u.userData=d.userData),i[d.uuid]=u}}return i}parseMaterials(e,t){const i={},s={};if(e!==void 0){const o=new rk;o.setTextures(t);for(let l=0,u=e.length;l<u;l++){const d=e[l];if(d.type==="MultiMaterial"){const p=[];for(let _=0;_<d.materials.length;_++){const y=d.materials[_];i[y.uuid]===void 0&&(i[y.uuid]=o.parse(y)),p.push(i[y.uuid])}s[d.uuid]=p}else i[d.uuid]===void 0&&(i[d.uuid]=o.parse(d)),s[d.uuid]=i[d.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const s=e[i],o=f$.parse(s);t[o.uuid]=o}return t}parseImages(e,t){const i=this,s={};let o;function l(d){return i.manager.itemStart(d),o.load(d,function(){i.manager.itemEnd(d)},void 0,function(){i.manager.itemError(d),i.manager.itemEnd(d)})}function u(d){if(typeof d=="string"){const p=d,_=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.resourcePath+p;return l(_)}else return d.data?{data:wS(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new YP(t);o=new m$(d),o.setCrossOrigin(this.crossOrigin);for(let p=0,_=e.length;p<_;p++){const y=e[p],b=y.url;if(Array.isArray(b)){const E=[];for(let C=0,A=b.length;C<A;C++){const I=b[C],L=u(I);L!==null&&(L instanceof HTMLImageElement?E.push(L):E.push(new zS(L.data,L.width,L.height)))}s[y.uuid]=new r1(E)}else{const E=u(y.url);s[y.uuid]=new r1(E)}}}return s}async parseImagesAsync(e){const t=this,i={};let s;async function o(l){if(typeof l=="string"){const u=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:t.resourcePath+u;return await s.loadAsync(d)}else return l.data?{data:wS(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){s=new m$(this.manager),s.setCrossOrigin(this.crossOrigin);for(let l=0,u=e.length;l<u;l++){const d=e[l],p=d.url;if(Array.isArray(p)){const _=[];for(let y=0,b=p.length;y<b;y++){const E=p[y],C=await o(E);C!==null&&(C instanceof HTMLImageElement?_.push(C):_.push(new zS(C.data,C.width,C.height)))}i[d.uuid]=new r1(_)}else{const _=await o(d.url);i[d.uuid]=new r1(_)}}}return i}parseTextures(e,t){function i(o,l){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),l[o])}const s={};if(e!==void 0)for(let o=0,l=e.length;o<l;o++){const u=e[o];u.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),t[u.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",u.image);const d=t[u.image],p=d.data;let _;Array.isArray(p)?(_=new B$,p.length===6&&(_.needsUpdate=!0)):(p&&p.data?_=new zS:_=new lc,p&&(_.needsUpdate=!0)),_.source=d,_.uuid=u.uuid,u.name!==void 0&&(_.name=u.name),u.mapping!==void 0&&(_.mapping=i(u.mapping,_Te)),u.offset!==void 0&&_.offset.fromArray(u.offset),u.repeat!==void 0&&_.repeat.fromArray(u.repeat),u.center!==void 0&&_.center.fromArray(u.center),u.rotation!==void 0&&(_.rotation=u.rotation),u.wrap!==void 0&&(_.wrapS=i(u.wrap[0],UH),_.wrapT=i(u.wrap[1],UH)),u.format!==void 0&&(_.format=u.format),u.type!==void 0&&(_.type=u.type),u.encoding!==void 0&&(_.encoding=u.encoding),u.minFilter!==void 0&&(_.minFilter=i(u.minFilter,zH)),u.magFilter!==void 0&&(_.magFilter=i(u.magFilter,zH)),u.anisotropy!==void 0&&(_.anisotropy=u.anisotropy),u.flipY!==void 0&&(_.flipY=u.flipY),u.premultiplyAlpha!==void 0&&(_.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(_.unpackAlignment=u.unpackAlignment),u.userData!==void 0&&(_.userData=u.userData),s[u.uuid]=_}return s}parseObject(e,t,i,s,o){let l;function u(b){return t[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",b),t[b]}function d(b){if(b!==void 0){if(Array.isArray(b)){const E=[];for(let C=0,A=b.length;C<A;C++){const I=b[C];i[I]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",I),E.push(i[I])}return E}return i[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),i[b]}}function p(b){return s[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",b),s[b]}let _,y;switch(e.type){case"Scene":l=new o$,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new Nn(e.background):l.background=p(e.background)),e.environment!==void 0&&(l.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new KR(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new YR(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":l=new Ja(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new J0(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new EX(e.color,e.intensity);break;case"DirectionalLight":l=new SX(e.color,e.intensity);break;case"PointLight":l=new TX(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new xX(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new bX(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":l=new yX(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new nk().fromJSON(e);break;case"SkinnedMesh":_=u(e.geometry),y=d(e.material),l=new jj(_,y),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":_=u(e.geometry),y=d(e.material),l=new Fn(_,y);break;case"InstancedMesh":_=u(e.geometry),y=d(e.material);const b=e.count,E=e.instanceMatrix,C=e.instanceColor;l=new Xj(_,y,b),l.instanceMatrix=new A1(new Float32Array(E.array),16),C!==void 0&&(l.instanceColor=new A1(new Float32Array(C.array),C.itemSize));break;case"LOD":l=new Vj;break;case"Line":l=new xp(u(e.geometry),d(e.material));break;case"LineLoop":l=new Yj(u(e.geometry),d(e.material));break;case"LineSegments":l=new o_(u(e.geometry),d(e.material));break;case"PointCloud":case"Points":l=new Kj(u(e.geometry),d(e.material));break;case"Sprite":l=new Wj(d(e.material));break;case"Group":l=new CS;break;case"Bone":l=new DP;break;default:l=new to}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const b=e.children;for(let E=0;E<b.length;E++)l.add(this.parseObject(b[E],t,i,s,o))}if(e.animations!==void 0){const b=e.animations;for(let E=0;E<b.length;E++){const C=b[E];l.animations.push(o[C])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const b=e.levels;for(let E=0;E<b.length;E++){const C=b[E],A=l.getObjectByProperty("uuid",C.object);A!==void 0&&l.addLevel(A,C.distance)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const s=t[i.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(s,i.bindMatrix)}})}}const _Te={UVMapping:HR,CubeReflectionMapping:Sy,CubeRefractionMapping:Ey,EquirectangularReflectionMapping:qw,EquirectangularRefractionMapping:Qw,CubeUVReflectionMapping:OE},UH={RepeatWrapping:rE,ClampToEdgeWrapping:ef,MirroredRepeatWrapping:Zw},zH={NearestFilter:Gl,NearestMipmapNearestFilter:pI,NearestMipmapLinearFilter:fI,LinearFilter:Tl,LinearMipmapNearestFilter:xP,LinearMipmapLinearFilter:P1};class vTe extends Pm{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=I1.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader,fetch(e,u).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(d){I1.add(e,d),t&&t(d),o.manager.itemEnd(e)}).catch(function(d){s&&s(d),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}let TA;const JP={getContext:function(){return TA===void 0&&(TA=new(window.AudioContext||window.webkitAudioContext)),TA},setContext:function(n){TA=n}};class yTe extends Pm{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new sv(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{const d=u.slice(0);JP.getContext().decodeAudioData(d,function(p){t(p)})}catch(d){s?s(d):console.error(d),o.manager.itemError(e)}},i,s)}}class bTe extends nk{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const s=new Nn().set(e),o=new Nn().set(t),l=new $e(s.r,s.g,s.b),u=new $e(o.r,o.g,o.b),d=Math.sqrt(Math.PI),p=d*Math.sqrt(.75);this.sh.coefficients[0].copy(l).add(u).multiplyScalar(d),this.sh.coefficients[1].copy(l).sub(u).multiplyScalar(p)}}class TTe extends nk{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new Nn().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const HH=new Qr,GH=new Qr,xb=new Qr;class STe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ja,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ja,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,xb.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(d1*t.fov*.5)/t.zoom;let l,u;GH.elements[12]=-i,HH.elements[12]=i,l=-o*t.aspect+s,u=o*t.aspect+s,xb.elements[0]=2*t.near/(u-l),xb.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(xb),l=-o*t.aspect-s,u=o*t.aspect-s,xb.elements[0]=2*t.near/(u-l),xb.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(xb)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(GH),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(HH)}}class qP{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=WH(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=WH();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function WH(){return(typeof performance>"u"?Date:performance).now()}const wb=new $e,VH=new bl,ETe=new $e,$b=new $e;class xTe extends to{constructor(){super(),this.type="AudioListener",this.context=JP.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new qP}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(wb,VH,ETe),$b.set(0,0,-1).applyQuaternion(VH),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(wb.x,s),t.positionY.linearRampToValueAtTime(wb.y,s),t.positionZ.linearRampToValueAtTime(wb.z,s),t.forwardX.linearRampToValueAtTime($b.x,s),t.forwardY.linearRampToValueAtTime($b.y,s),t.forwardZ.linearRampToValueAtTime($b.z,s),t.upX.linearRampToValueAtTime(i.x,s),t.upY.linearRampToValueAtTime(i.y,s),t.upZ.linearRampToValueAtTime(i.z,s)}else t.setPosition(wb.x,wb.y,wb.z),t.setOrientation($b.x,$b.y,$b.z,i.x,i.y,i.z)}}class CX extends to{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Cb=new $e,jH=new bl,wTe=new $e,Ab=new $e;class $Te extends CX{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Cb,jH,wTe),Ab.set(0,0,1).applyQuaternion(jH);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Cb.x,i),t.positionY.linearRampToValueAtTime(Cb.y,i),t.positionZ.linearRampToValueAtTime(Cb.z,i),t.orientationX.linearRampToValueAtTime(Ab.x,i),t.orientationY.linearRampToValueAtTime(Ab.y,i),t.orientationZ.linearRampToValueAtTime(Ab.z,i)}else t.setPosition(Cb.x,Cb.y,Cb.z),t.setOrientation(Ab.x,Ab.y,Ab.z)}}class CTe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class AX{constructor(e,t,i){this.binding=e,this.valueSize=i;let s,o,l;switch(t){case"quaternion":s=this._slerp,o=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":s=this._select,o=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:s=this._lerp,o=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=o,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,s=this.valueSize,o=e*s+s;let l=this.cumulativeWeight;if(l===0){for(let u=0;u!==s;++u)i[o+u]=i[u];l=t}else{l+=t;const u=t/l;this._mixBufferRegion(i,o,0,u,s)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,s=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,s=e*t+t,o=this.cumulativeWeight,l=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const d=t*this._origIndex;this._mixBufferRegion(i,s,d,1-o,t)}l>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*t,1,t);for(let d=t,p=t+t;d!==p;++d)if(i[d]!==i[d+t]){u.setValue(i,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,s=i*this._origIndex;e.getValue(t,s);for(let o=i,l=s;o!==l;++o)t[o]=t[s+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,s,o){if(s>=.5)for(let l=0;l!==o;++l)e[t+l]=e[i+l]}_slerp(e,t,i,s){bl.slerpFlat(e,t,e,t,e,i,s)}_slerpAdditive(e,t,i,s,o){const l=this._workIndex*o;bl.multiplyQuaternionsFlat(e,l,e,t,e,i),bl.slerpFlat(e,t,e,t,e,l,s)}_lerp(e,t,i,s,o){const l=1-s;for(let u=0;u!==o;++u){const d=t+u;e[d]=e[d]*l+e[i+u]*s}}_lerpAdditive(e,t,i,s,o){for(let l=0;l!==o;++l){const u=t+l;e[u]=e[u]+e[i+l]*s}}}const QP="\\[\\]\\.:\\/",ATe=new RegExp("["+QP+"]","g"),ZP="[^"+QP+"]",MTe="[^"+QP.replace("\\.","")+"]",ITe=/((?:WC+[\/:])*)/.source.replace("WC",ZP),RTe=/(WCOD+)?/.source.replace("WCOD",MTe),kTe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ZP),OTe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ZP),LTe=new RegExp("^"+ITe+RTe+kTe+OTe+"$"),DTe=["material","materials","bones"];class NTe{constructor(e,t,i){const s=i||To.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=i.length;s!==o;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class To{constructor(e,t,i){this.path=t,this.parsedPath=i||To.parseTrackName(t),this.node=To.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new To.Composite(e,t,i):new To(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(ATe,"")}static parseTrackName(e){const t=LTe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=i.nodeName.substring(s+1);DTe.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===t||u.uuid===t)return u;const d=i(u.children);if(d)return d}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let o=t.propertyIndex;if(e||(e=To.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let p=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let _=0;_<e.length;_++)if(e[_].name===p){p=_;break}break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(p!==void 0){if(e[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const l=e[s];if(l===void 0){const p=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}d=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(d=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}To.Composite=NTe;To.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};To.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};To.prototype.GetterByBindingType=[To.prototype._getValue_direct,To.prototype._getValue_array,To.prototype._getValue_arrayElement,To.prototype._getValue_toArray];To.prototype.SetterByBindingTypeAndVersioning=[[To.prototype._setValue_direct,To.prototype._setValue_direct_setNeedsUpdate,To.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[To.prototype._setValue_array,To.prototype._setValue_array_setNeedsUpdate,To.prototype._setValue_array_setMatrixWorldNeedsUpdate],[To.prototype._setValue_arrayElement,To.prototype._setValue_arrayElement_setNeedsUpdate,To.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[To.prototype._setValue_fromArray,To.prototype._setValue_fromArray_setNeedsUpdate,To.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class BTe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Mm(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,s=arguments.length;i!==s;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length;let u,d=e.length,p=this.nCachedObjects_;for(let _=0,y=arguments.length;_!==y;++_){const b=arguments[_],E=b.uuid;let C=t[E];if(C===void 0){C=d++,t[E]=C,e.push(b);for(let A=0,I=l;A!==I;++A)o[A].push(new To(b,i[A],s[A]))}else if(C<p){u=e[C];const A=--p,I=e[A];t[I.uuid]=C,e[C]=I,t[E]=A,e[A]=b;for(let L=0,O=l;L!==O;++L){const P=o[L],N=P[A];let z=P[C];P[C]=N,z===void 0&&(z=new To(b,i[L],s[L])),P[A]=z}}else e[C]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let o=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const d=arguments[l],p=d.uuid,_=t[p];if(_!==void 0&&_>=o){const y=o++,b=e[y];t[b.uuid]=_,e[_]=b,t[p]=y,e[y]=d;for(let E=0,C=s;E!==C;++E){const A=i[E],I=A[y],L=A[_];A[_]=I,A[y]=L}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let o=this.nCachedObjects_,l=e.length;for(let u=0,d=arguments.length;u!==d;++u){const p=arguments[u],_=p.uuid,y=t[_];if(y!==void 0)if(delete t[_],y<o){const b=--o,E=e[b],C=--l,A=e[C];t[E.uuid]=y,e[y]=E,t[A.uuid]=b,e[b]=A,e.pop();for(let I=0,L=s;I!==L;++I){const O=i[I],P=O[b],N=O[C];O[y]=P,O[b]=N,O.pop()}}else{const b=--l,E=e[b];b>0&&(t[E.uuid]=y),e[y]=E,e.pop();for(let C=0,A=s;C!==A;++C){const I=i[C];I[y]=I[b],I.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const i=this._bindingsIndicesByPath;let s=i[e];const o=this._bindings;if(s!==void 0)return o[s];const l=this._paths,u=this._parsedPaths,d=this._objects,p=d.length,_=this.nCachedObjects_,y=new Array(p);s=o.length,i[e]=s,l.push(e),u.push(t),o.push(y);for(let b=_,E=d.length;b!==E;++b){const C=d[b];y[b]=new To(C,e,t)}return y}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const s=this._paths,o=this._parsedPaths,l=this._bindings,u=l.length-1,d=l[u],p=e[u];t[p]=i,l[i]=d,l.pop(),o[i]=o[u],o.pop(),s[i]=s[u],s.pop()}}}class PTe{constructor(e,t,i=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=s;const o=t.tracks,l=o.length,u=new Array(l),d={endingStart:t1,endingEnd:t1};for(let p=0;p!==l;++p){const _=o[p].createInterpolant(null);u[p]=_,_.settings=d}this._interpolantSettings=d,this._interpolants=u,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=xj,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const s=this._clip.duration,o=e._clip.duration,l=o/s,u=s/o;e.warp(1,l,t),this.warp(u,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const s=this._mixer,o=s.time,l=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=s._lendControlInterpolant(),this._timeScaleInterpolant=u);const d=u.parameterPositions,p=u.sampleValues;return d[0]=o,d[1]=o+i,p[0]=e/l,p[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,s){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const d=(e-o)*i;if(d<0||i===0)return;this._startTime=null,t=i*d}t*=this._updateTimeScale(e);const l=this._updateTime(t),u=this._updateWeight(e);if(u>0){const d=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case $P:for(let _=0,y=d.length;_!==y;++_)d[_].evaluate(l),p[_].accumulateAdditive(u);break;case GR:default:for(let _=0,y=d.length;_!==y;++_)d[_].evaluate(l),p[_].accumulate(s,u)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;i!==null&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let s=this.time+e,o=this._loopCount;const l=i===wj;if(e===0)return o===-1?s:l&&(o&1)===1?t-s:s;if(i===Ej){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),s>=t||s<0){const u=Math.floor(s/t);s-=t*u,o+=Math.abs(u);const d=this.repetitions-o;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const p=e<0;this._setEndings(p,!p,l)}else this._setEndings(!1,!1,l);this._loopCount=o,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=s;if(l&&(o&1)===1)return t-s}return s}_setEndings(e,t,i){const s=this._interpolantSettings;i?(s.endingStart=n1,s.endingEnd=n1):(e?s.endingStart=this.zeroSlopeAtStart?n1:t1:s.endingStart=n$,t?s.endingEnd=this.zeroSlopeAtEnd?n1:t1:s.endingEnd=n$)}_scheduleFading(e,t,i){const s=this._mixer,o=s.time;let l=this._weightInterpolant;l===null&&(l=s._lendControlInterpolant(),this._weightInterpolant=l);const u=l.parameterPositions,d=l.sampleValues;return u[0]=o,d[0]=t,u[1]=o+e,d[1]=i,this}}const FTe=new Float32Array(1);class UTe extends Bm{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,s=e._clip.tracks,o=s.length,l=e._propertyBindings,u=e._interpolants,d=i.uuid,p=this._bindingsByRootAndName;let _=p[d];_===void 0&&(_={},p[d]=_);for(let y=0;y!==o;++y){const b=s[y],E=b.name;let C=_[E];if(C!==void 0)++C.referenceCount,l[y]=C;else{if(C=l[y],C!==void 0){C._cacheIndex===null&&(++C.referenceCount,this._addInactiveBinding(C,d,E));continue}const A=t&&t._propertyBindings[y].binding.parsedPath;C=new AX(To.create(i,E,A),b.ValueTypeName,b.getValueSize()),++C.referenceCount,this._addInactiveBinding(C,d,E),l[y]=C}u[y].resultBuffer=C.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,s=e._clip.uuid,o=this._actionsByClip[s];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,s,i)}const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const s=this._actions,o=this._actionsByClip;let l=o[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=l;else{const u=l.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=s.length,s.push(e),l.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],s=e._cacheIndex;i._cacheIndex=s,t[s]=i,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,l=this._actionsByClip,u=l[o],d=u.knownActions,p=d[d.length-1],_=e._byClipCacheIndex;p._byClipCacheIndex=_,d[_]=p,d.pop(),e._byClipCacheIndex=null;const y=u.actionByRoot,b=(e._localRoot||this._root).uuid;delete y[b],d.length===0&&delete l[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,s=this._nActiveActions++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,s=--this._nActiveActions,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_addInactiveBinding(e,t,i){const s=this._bindingsByRootAndName,o=this._bindings;let l=s[t];l===void 0&&(l={},s[t]=l),l[i]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,s=i.rootNode.uuid,o=i.path,l=this._bindingsByRootAndName,u=l[s],d=t[t.length-1],p=e._cacheIndex;d._cacheIndex=p,t[p]=d,t.pop(),delete u[o],Object.keys(u).length===0&&delete l[s]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,s=this._nActiveBindings++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,s=--this._nActiveBindings,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new jP(new Float32Array(2),new Float32Array(2),1,FTe),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,s=--this._nActiveControlInterpolants,o=t[s];e.__cacheIndex=s,t[s]=e,o.__cacheIndex=i,t[i]=o}clipAction(e,t,i){const s=t||this._root,o=s.uuid;let l=typeof e=="string"?f$.findByName(s,e):e;const u=l!==null?l.uuid:e,d=this._actionsByClip[u];let p=null;if(i===void 0&&(l!==null?i=l.blendMode:i=GR),d!==void 0){const y=d.actionByRoot[o];if(y!==void 0&&y.blendMode===i)return y;p=d.knownActions[0],l===null&&(l=p._clip)}if(l===null)return null;const _=new PTe(this,l,t,i);return this._bindAction(_,p),this._addInactiveAction(_,u,o),_}existingAction(e,t){const i=t||this._root,s=i.uuid,o=typeof e=="string"?f$.findByName(i,e):e,l=o?o.uuid:e,u=this._actionsByClip[l];return u!==void 0&&u.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,s=this.time+=e,o=Math.sign(e),l=this._accuIndex^=1;for(let p=0;p!==i;++p)t[p]._update(s,e,o,l);const u=this._bindings,d=this._nActiveBindings;for(let p=0;p!==d;++p)u[p].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,s=this._actionsByClip,o=s[i];if(o!==void 0){const l=o.knownActions;for(let u=0,d=l.length;u!==d;++u){const p=l[u];this._deactivateAction(p);const _=p._cacheIndex,y=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,y._cacheIndex=_,t[_]=y,t.pop(),this._removeInactiveBindingsForAction(p)}delete s[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const l in i){const u=i[l].actionByRoot,d=u[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const s=this._bindingsByRootAndName,o=s[t];if(o!==void 0)for(const l in o){const u=o[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class eo{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new eo(this.value.clone===void 0?this.value:this.value.clone())}}let zTe=0;class HTe extends Bm{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:zTe++}),this.name="",this.usage=r$,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,s=t.length;i<s;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class _I extends JR{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class GTe{constructor(e,t,i,s,o){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=s,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class eF{constructor(e,t,i=0,s=1/0){this.ray=new D$(e,t),this.near=i,this.far=s,this.camera=null,this.layers=new f1,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return sN(e,this,i,t),i.sort(XH),i}intersectObjects(e,t=!0,i=[]){for(let s=0,o=e.length;s<o;s++)sN(e[s],this,i,t);return i.sort(XH),i}}function XH(n,e){return n.distance-e.distance}function sN(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const s=n.children;for(let o=0,l=s.length;o<l;o++)sN(s[o],e,t,!0)}}class oN{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(ah(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class WTe{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const YH=new Ht;class VTe{constructor(e=new Ht(1/0,1/0),t=new Ht(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=YH.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return YH.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const KH=new $e,SA=new $e;class tF{constructor(e=new $e,t=new $e){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){KH.subVectors(e,this.start),SA.subVectors(this.end,this.start);const i=SA.dot(SA);let s=SA.dot(KH)/i;return t&&(s=ah(s,0,1)),s}closestPointToPoint(e,t,i){const s=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const JH=new $e;class jTe extends to{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const i=new oi,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,u=1,d=32;l<d;l++,u++){const p=l/d*Math.PI*2,_=u/d*Math.PI*2;s.push(Math.cos(p),Math.sin(p),1,Math.cos(_),Math.sin(_),1)}i.setAttribute("position",new rr(s,3));const o=new Mp({fog:!1,toneMapped:!1});this.cone=new o_(i,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),JH.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(JH),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const jv=new $e,EA=new Qr,$O=new Qr;class XTe extends o_{constructor(e){const t=MX(e),i=new oi,s=[],o=[],l=new Nn(0,0,1),u=new Nn(0,1,0);for(let p=0;p<t.length;p++){const _=t[p];_.parent&&_.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),o.push(l.r,l.g,l.b),o.push(u.r,u.g,u.b))}i.setAttribute("position",new rr(s,3)),i.setAttribute("color",new rr(o,3));const d=new Mp({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,d),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,s=i.getAttribute("position");$O.copy(this.root.matrixWorld).invert();for(let o=0,l=0;o<t.length;o++){const u=t[o];u.parent&&u.parent.isBone&&(EA.multiplyMatrices($O,u.matrixWorld),jv.setFromMatrixPosition(EA),s.setXYZ(l,jv.x,jv.y,jv.z),EA.multiplyMatrices($O,u.parent.matrixWorld),jv.setFromMatrixPosition(EA),s.setXYZ(l+1,jv.x,jv.y,jv.z),l+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function MX(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,MX(n.children[t]));return e}class YTe extends Fn{constructor(e,t,i){const s=new t0(t,4,2),o=new r0({wireframe:!0,fog:!1,toneMapped:!1});super(s,o),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const KTe=new $e,qH=new Nn,QH=new Nn;class JTe extends to{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const s=new Yg(t);s.rotateY(Math.PI*.5),this.material=new r0({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=s.getAttribute("position"),l=new Float32Array(o.count*3);s.setAttribute("color",new Bo(l,3)),this.add(new Fn(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");qH.copy(this.light.color),QH.copy(this.light.groundColor);for(let i=0,s=t.count;i<s;i++){const o=i<s/2?qH:QH;t.setXYZ(i,o.r,o.g,o.b)}t.needsUpdate=!0}e.lookAt(KTe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class qTe extends o_{constructor(e=10,t=10,i=4473924,s=8947848){i=new Nn(i),s=new Nn(s);const o=t/2,l=e/t,u=e/2,d=[],p=[];for(let b=0,E=0,C=-u;b<=t;b++,C+=l){d.push(-u,0,C,u,0,C),d.push(C,0,-u,C,0,u);const A=b===o?i:s;A.toArray(p,E),E+=3,A.toArray(p,E),E+=3,A.toArray(p,E),E+=3,A.toArray(p,E),E+=3}const _=new oi;_.setAttribute("position",new rr(d,3)),_.setAttribute("color",new rr(p,3));const y=new Mp({vertexColors:!0,toneMapped:!1});super(_,y),this.type="GridHelper"}}class QTe extends o_{constructor(e=10,t=16,i=8,s=64,o=4473924,l=8947848){o=new Nn(o),l=new Nn(l);const u=[],d=[];for(let y=0;y<=t;y++){const b=y/t*(Math.PI*2),E=Math.sin(b)*e,C=Math.cos(b)*e;u.push(0,0,0),u.push(E,0,C);const A=y&1?o:l;d.push(A.r,A.g,A.b),d.push(A.r,A.g,A.b)}for(let y=0;y<=i;y++){const b=y&1?o:l,E=e-e/i*y;for(let C=0;C<s;C++){let A=C/s*(Math.PI*2),I=Math.sin(A)*E,L=Math.cos(A)*E;u.push(I,0,L),d.push(b.r,b.g,b.b),A=(C+1)/s*(Math.PI*2),I=Math.sin(A)*E,L=Math.cos(A)*E,u.push(I,0,L),d.push(b.r,b.g,b.b)}}const p=new oi;p.setAttribute("position",new rr(u,3)),p.setAttribute("color",new rr(d,3));const _=new Mp({vertexColors:!0,toneMapped:!1});super(p,_),this.type="PolarGridHelper"}}const ZH=new $e,xA=new $e,e5=new $e;class ZTe extends to{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,t===void 0&&(t=1);let s=new oi;s.setAttribute("position",new rr([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new Mp({fog:!1,toneMapped:!1});this.lightPlane=new xp(s,o),this.add(this.lightPlane),s=new oi,s.setAttribute("position",new rr([0,0,0,0,0,1],3)),this.targetLine=new xp(s,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){ZH.setFromMatrixPosition(this.light.matrixWorld),xA.setFromMatrixPosition(this.light.target.matrixWorld),e5.subVectors(xA,ZH),this.lightPlane.lookAt(xA),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(xA),this.targetLine.scale.z=e5.length()}}const wA=new $e,Cc=new LE;class eSe extends o_{constructor(e){const t=new oi,i=new Mp({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],o=[],l={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(C,A){d(C),d(A)}function d(C){s.push(0,0,0),o.push(0,0,0),l[C]===void 0&&(l[C]=[]),l[C].push(s.length/3-1)}t.setAttribute("position",new rr(s,3)),t.setAttribute("color",new rr(o,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const p=new Nn(16755200),_=new Nn(16711680),y=new Nn(43775),b=new Nn(16777215),E=new Nn(3355443);this.setColors(p,_,y,b,E)}setColors(e,t,i,s,o){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,s.r,s.g,s.b),l.setXYZ(39,s.r,s.g,s.b),l.setXYZ(40,o.r,o.g,o.b),l.setXYZ(41,o.r,o.g,o.b),l.setXYZ(42,o.r,o.g,o.b),l.setXYZ(43,o.r,o.g,o.b),l.setXYZ(44,o.r,o.g,o.b),l.setXYZ(45,o.r,o.g,o.b),l.setXYZ(46,o.r,o.g,o.b),l.setXYZ(47,o.r,o.g,o.b),l.setXYZ(48,o.r,o.g,o.b),l.setXYZ(49,o.r,o.g,o.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,s=1;Cc.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ih("c",t,e,Cc,0,0,-1),ih("t",t,e,Cc,0,0,1),ih("n1",t,e,Cc,-i,-s,-1),ih("n2",t,e,Cc,i,-s,-1),ih("n3",t,e,Cc,-i,s,-1),ih("n4",t,e,Cc,i,s,-1),ih("f1",t,e,Cc,-i,-s,1),ih("f2",t,e,Cc,i,-s,1),ih("f3",t,e,Cc,-i,s,1),ih("f4",t,e,Cc,i,s,1),ih("u1",t,e,Cc,i*.7,s*1.1,-1),ih("u2",t,e,Cc,-i*.7,s*1.1,-1),ih("u3",t,e,Cc,0,s*2,-1),ih("cf1",t,e,Cc,-i,0,1),ih("cf2",t,e,Cc,i,0,1),ih("cf3",t,e,Cc,0,-s,1),ih("cf4",t,e,Cc,0,s,1),ih("cn1",t,e,Cc,-i,0,-1),ih("cn2",t,e,Cc,i,0,-1),ih("cn3",t,e,Cc,0,-s,-1),ih("cn4",t,e,Cc,0,s,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ih(n,e,t,i,s,o,l){wA.set(s,o,l).unproject(i);const u=e[n];if(u!==void 0){const d=t.getAttribute("position");for(let p=0,_=u.length;p<_;p++)d.setXYZ(u[p],wA.x,wA.y,wA.z)}}const $A=new n0;class tSe extends o_{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),o=new oi;o.setIndex(new Bo(i,1)),o.setAttribute("position",new Bo(s,3)),super(o,new Mp({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&$A.setFromObject(this.object),$A.isEmpty())return;const t=$A.min,i=$A.max,s=this.geometry.attributes.position,o=s.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=t.x,o[4]=i.y,o[5]=i.z,o[6]=t.x,o[7]=t.y,o[8]=i.z,o[9]=i.x,o[10]=t.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=t.z,o[15]=t.x,o[16]=i.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=i.x,o[22]=t.y,o[23]=t.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}}class nSe extends o_{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new oi;o.setIndex(new Bo(i,1)),o.setAttribute("position",new rr(s,3)),super(o,new Mp({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class rSe extends xp{constructor(e,t=1,i=16776960){const s=i,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new oi;l.setAttribute("position",new rr(o,3)),l.computeBoundingSphere(),super(l,new Mp({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new oi;d.setAttribute("position",new rr(u,3)),d.computeBoundingSphere(),this.add(new Fn(d,new r0({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}}const t5=new $e;let CA,CO;class iSe extends to{constructor(e=new $e(0,0,1),t=new $e(0,0,0),i=1,s=16776960,o=i*.2,l=o*.2){super(),this.type="ArrowHelper",CA===void 0&&(CA=new oi,CA.setAttribute("position",new rr([0,0,0,0,1,0],3)),CO=new Hl(0,.5,1,5,1),CO.translate(0,-.5,0)),this.position.copy(t),this.line=new xp(CA,new Mp({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Fn(CO,new r0({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,o,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{t5.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(t5,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class sSe extends o_{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new oi;s.setAttribute("position",new rr(t,3)),s.setAttribute("color",new rr(i,3));const o=new Mp({vertexColors:!0,toneMapped:!1});super(s,o),this.type="AxesHelper"}setColors(e,t,i){const s=new Nn,o=this.geometry.attributes.color.array;return s.set(e),s.toArray(o,0),s.toArray(o,3),s.set(t),s.toArray(o,6),s.toArray(o,9),s.set(i),s.toArray(o,12),s.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class oSe{constructor(){this.type="ShapePath",this.color=new Nn,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new a$,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,s){return this.currentPath.quadraticCurveTo(e,t,i,s),this}bezierCurveTo(e,t,i,s,o,l){return this.currentPath.bezierCurveTo(e,t,i,s,o,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function i(O){const P=[];for(let N=0,z=O.length;N<z;N++){const W=O[N],H=new m1;H.curves=W.curves,P.push(H)}return P}function s(O,P){const N=P.length;let z=!1;for(let W=N-1,H=0;H<N;W=H++){let U=P[W],Q=P[H],ne=Q.x-U.x,oe=Q.y-U.y;if(Math.abs(oe)>Number.EPSILON){if(oe<0&&(U=P[H],ne=-ne,Q=P[W],oe=-oe),O.y<U.y||O.y>Q.y)continue;if(O.y===U.y){if(O.x===U.x)return!0}else{const le=oe*(O.x-U.x)-ne*(O.y-U.y);if(le===0)return!0;if(le<0)continue;z=!z}}else{if(O.y!==U.y)continue;if(Q.x<=O.x&&O.x<=U.x||U.x<=O.x&&O.x<=Q.x)return!0}}return z}const o=q0.isClockWise,l=this.subPaths;if(l.length===0)return[];if(t===!0)return i(l);let u,d,p;const _=[];if(l.length===1)return d=l[0],p=new m1,p.curves=d.curves,_.push(p),_;let y=!o(l[0].getPoints());y=e?!y:y;const b=[],E=[];let C=[],A=0,I;E[A]=void 0,C[A]=[];for(let O=0,P=l.length;O<P;O++)d=l[O],I=d.getPoints(),u=o(I),u=e?!u:u,u?(!y&&E[A]&&A++,E[A]={s:new m1,p:I},E[A].s.curves=d.curves,y&&A++,C[A]=[]):C[A].push({h:d,p:I[0]});if(!E[0])return i(l);if(E.length>1){let O=!1,P=0;for(let N=0,z=E.length;N<z;N++)b[N]=[];for(let N=0,z=E.length;N<z;N++){const W=C[N];for(let H=0;H<W.length;H++){const U=W[H];let Q=!0;for(let ne=0;ne<E.length;ne++)s(U.p,E[ne].p)&&(N!==ne&&P++,Q?(Q=!1,b[ne].push(U)):O=!0);Q&&b[N].push(U)}}P>0&&O===!1&&(C=b)}let L;for(let O=0,P=E.length;O<P;O++){p=E[O].s,_.push(p),L=C[O];for(let N=0,z=L.length;N<z;N++)p.holes.push(L[N].h)}return _}}const X_=aSe();function aSe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),s=new Uint32Array(512);for(let d=0;d<256;++d){const p=d-127;p<-27?(i[d]=0,i[d|256]=32768,s[d]=24,s[d|256]=24):p<-14?(i[d]=1024>>-p-14,i[d|256]=1024>>-p-14|32768,s[d]=-p-1,s[d|256]=-p-1):p<=15?(i[d]=p+15<<10,i[d|256]=p+15<<10|32768,s[d]=13,s[d|256]=13):p<128?(i[d]=31744,i[d|256]=64512,s[d]=24,s[d|256]=24):(i[d]=31744,i[d|256]=64512,s[d]=13,s[d|256]=13)}const o=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64);for(let d=1;d<1024;++d){let p=d<<13,_=0;for(;!(p&8388608);)p<<=1,_-=8388608;p&=-8388609,_+=947912704,o[d]=p|_}for(let d=1024;d<2048;++d)o[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)l[d]=d<<23;l[31]=1199570944,l[32]=2147483648;for(let d=33;d<63;++d)l[d]=2147483648+(d-32<<23);l[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(u[d]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:s,mantissaTable:o,exponentTable:l,offsetTable:u}}function lSe(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=ah(n,-65504,65504),X_.floatView[0]=n;const e=X_.uint32View[0],t=e>>23&511;return X_.baseTable[t]+((e&8388607)>>X_.shiftTable[t])}function uSe(n){const e=n>>10;return X_.uint32View[0]=X_.mantissaTable[X_.offsetTable[e]+(n&1023)]+X_.exponentTable[e],X_.floatView[0]}var cSe=Object.freeze({__proto__:null,toHalfFloat:lSe,fromHalfFloat:uSe});class hSe extends oi{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),super()}}class dSe extends oi{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),super()}}function pSe(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function fSe(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function mSe(){console.error("THREE.ImmediateRenderObject has been removed.")}class gSe extends Rc{constructor(e,t,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,i),this.samples=4}}class _Se extends L${constructor(e,t,i,s){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,i,s)}}class vSe extends WR{constructor(e,t,i,s){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:kE}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=kE);const ySe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:EP,AddEquation:Wb,AddOperation:rj,AdditiveAnimationBlendMode:$P,AdditiveBlending:hI,AlphaFormat:pj,AlwaysDepth:J7,AlwaysStencilFunc:Cj,AmbientLight:EX,AmbientLightProbe:TTe,AnimationClip:f$,AnimationLoader:lTe,AnimationMixer:UTe,AnimationObjectGroup:BTe,AnimationUtils:iTe,ArcCurve:qj,ArrayCamera:zj,ArrowHelper:iSe,Audio:CX,AudioAnalyser:CTe,AudioContext:JP,AudioListener:xTe,AudioLoader:yTe,AxesHelper:sSe,BackSide:id,BasicDepthPacking:Oy,BasicShadowMap:N7,Bone:DP,BooleanKeyframeTrack:z1,Box2:VTe,Box3:n0,Box3Helper:nSe,BoxBufferGeometry:pu,BoxGeometry:pu,BoxHelper:tSe,BufferAttribute:Bo,BufferGeometry:oi,BufferGeometryLoader:$X,ByteType:lj,Cache:I1,Camera:LE,CameraHelper:eSe,CanvasTexture:A1e,CapsuleBufferGeometry:oE,CapsuleGeometry:oE,CatmullRomCurve3:Qj,CineonToneMapping:oj,CircleBufferGeometry:aE,CircleGeometry:aE,ClampToEdgeWrapping:ef,Clock:qP,Color:Nn,ColorKeyframeTrack:XP,ColorManagement:eg,CompressedTexture:Jj,CompressedTextureLoader:uTe,ConeBufferGeometry:lE,ConeGeometry:lE,CubeCamera:kj,CubeReflectionMapping:Sy,CubeRefractionMapping:Ey,CubeTexture:B$,CubeTextureLoader:cTe,CubeUVReflectionMapping:OE,CubicBezierCurve:BP,CubicBezierCurve3:Zj,CubicInterpolant:mX,CullFaceBack:xD,CullFaceFront:D7,CullFaceFrontBack:Oge,CullFaceNone:L7,Curve:i0,CurvePath:tX,CustomBlending:P7,CustomToneMapping:aj,CylinderBufferGeometry:Hl,CylinderGeometry:Hl,Cylindrical:WTe,Data3DTexture:WR,DataArrayTexture:L$,DataTexture:zS,DataTexture2DArray:_Se,DataTexture3D:vSe,DataTextureLoader:hTe,DataUtils:cSe,DecrementStencilOp:jge,DecrementWrapStencilOp:Yge,DefaultLoadingManager:vX,DepthFormat:_y,DepthStencilFormat:xy,DepthTexture:kP,DirectionalLight:SX,DirectionalLightHelper:ZTe,DiscreteInterpolant:gX,DodecahedronBufferGeometry:uE,DodecahedronGeometry:uE,DoubleSide:tf,DstAlphaFactor:W7,DstColorFactor:j7,DynamicCopyUsage:l0e,DynamicDrawUsage:h1,DynamicReadUsage:s0e,EdgesGeometry:nX,EllipseCurve:ZR,EqualDepth:Q7,EqualStencilFunc:Qge,EquirectangularReflectionMapping:qw,EquirectangularRefractionMapping:Qw,Euler:U1,EventDispatcher:Bm,ExtrudeBufferGeometry:cE,ExtrudeGeometry:cE,FileLoader:sv,FlatShading:B7,Float16BufferAttribute:W0e,Float32BufferAttribute:rr,Float64BufferAttribute:V0e,FloatType:j0,Fog:KR,FogExp2:YR,Font:fSe,FontLoader:pSe,FramebufferTexture:C1e,FrontSide:e_,Frustum:VR,GLBufferAttribute:GTe,GLSL1:c0e,GLSL3:JD,GreaterDepth:ej,GreaterEqualDepth:Z7,GreaterEqualStencilFunc:n0e,GreaterStencilFunc:e0e,GridHelper:qTe,Group:CS,HalfFloatType:C1,HemisphereLight:yX,HemisphereLightHelper:JTe,HemisphereLightProbe:bTe,IcosahedronBufferGeometry:hE,IcosahedronGeometry:hE,ImageBitmapLoader:vTe,ImageLoader:m$,ImageUtils:AP,ImmediateRenderObject:mSe,IncrementStencilOp:Vge,IncrementWrapStencilOp:Xge,InstancedBufferAttribute:A1,InstancedBufferGeometry:ik,InstancedInterleavedBuffer:_I,InstancedMesh:Xj,Int16BufferAttribute:H0e,Int32BufferAttribute:G0e,Int8BufferAttribute:F0e,IntType:cj,InterleavedBuffer:JR,InterleavedBufferAttribute:xm,Interpolant:F$,InterpolateDiscrete:e$,InterpolateLinear:t$,InterpolateSmooth:gM,InvertStencilOp:Kge,KeepStencilOp:_M,KeyframeTrack:s0,LOD:Vj,LatheBufferGeometry:M1,LatheGeometry:M1,Layers:f1,LessDepth:q7,LessEqualDepth:dI,LessEqualStencilFunc:Zge,LessStencilFunc:qge,Light:Ly,LightProbe:nk,Line:xp,Line3:tF,LineBasicMaterial:Mp,LineCurve:ek,LineCurve3:eX,LineDashedMaterial:pX,LineLoop:Yj,LineSegments:o_,LinearEncoding:_g,LinearFilter:Tl,LinearInterpolant:jP,LinearMipMapLinearFilter:Pge,LinearMipMapNearestFilter:Bge,LinearMipmapLinearFilter:P1,LinearMipmapNearestFilter:xP,LinearSRGBColorSpace:oy,LinearToneMapping:ij,Loader:Pm,LoaderUtils:iN,LoadingManager:YP,LoopOnce:Ej,LoopPingPong:wj,LoopRepeat:xj,LuminanceAlphaFormat:gj,LuminanceFormat:mj,MOUSE:Fb,Material:sd,MaterialLoader:rk,MathUtils:Mj,Matrix3:nf,Matrix4:Qr,MaxEquation:AD,Mesh:Fn,MeshBasicMaterial:r0,MeshDepthMaterial:P$,MeshDistanceMaterial:XR,MeshLambertMaterial:hX,MeshMatcapMaterial:dX,MeshNormalMaterial:GP,MeshPhongMaterial:uX,MeshPhysicalMaterial:lX,MeshStandardMaterial:h$,MeshToonMaterial:cX,MinEquation:CD,MirroredRepeatWrapping:Zw,MixOperation:nj,MultiplyBlending:$D,MultiplyOperation:O$,NearestFilter:Gl,NearestMipMapLinearFilter:Nge,NearestMipMapNearestFilter:Dge,NearestMipmapLinearFilter:fI,NearestMipmapNearestFilter:pI,NeverDepth:K7,NeverStencilFunc:Jge,NoBlending:af,NoColorSpace:Hge,NoToneMapping:Qg,NormalAnimationBlendMode:GR,NormalBlending:ev,NotEqualDepth:tj,NotEqualStencilFunc:t0e,NumberKeyframeTrack:d$,Object3D:to,ObjectLoader:gTe,ObjectSpaceNormalMap:$j,OctahedronBufferGeometry:Yg,OctahedronGeometry:Yg,OneFactor:z7,OneMinusDstAlphaFactor:V7,OneMinusDstColorFactor:X7,OneMinusSrcAlphaFactor:zR,OneMinusSrcColorFactor:G7,OrthographicCamera:J0,PCFShadowMap:FR,PCFSoftShadowMap:mw,PMREMGenerator:QD,ParametricGeometry:hSe,Path:a$,PerspectiveCamera:Ja,Plane:V_,PlaneBufferGeometry:e0,PlaneGeometry:e0,PlaneHelper:rSe,PointLight:TX,PointLightHelper:YTe,Points:Kj,PointsMaterial:QR,PolarGridHelper:QTe,PolyhedronBufferGeometry:t_,PolyhedronGeometry:t_,PositionalAudio:$Te,PropertyBinding:To,PropertyMixer:AX,QuadraticBezierCurve:PP,QuadraticBezierCurve3:FP,Quaternion:bl,QuaternionKeyframeTrack:NE,QuaternionLinearInterpolant:_X,REVISION:kE,RGBADepthPacking:iE,RGBAFormat:Pf,RGBAIntegerFormat:Tj,RGBA_ASTC_10x10_Format:jD,RGBA_ASTC_10x5_Format:GD,RGBA_ASTC_10x6_Format:WD,RGBA_ASTC_10x8_Format:VD,RGBA_ASTC_12x10_Format:XD,RGBA_ASTC_12x12_Format:YD,RGBA_ASTC_4x4_Format:DD,RGBA_ASTC_5x4_Format:ND,RGBA_ASTC_5x5_Format:BD,RGBA_ASTC_6x5_Format:PD,RGBA_ASTC_6x6_Format:FD,RGBA_ASTC_8x5_Format:UD,RGBA_ASTC_8x6_Format:zD,RGBA_ASTC_8x8_Format:HD,RGBA_BPTC_Format:KD,RGBA_ETC2_EAC_Format:LD,RGBA_PVRTC_2BPPV1_Format:kD,RGBA_PVRTC_4BPPV1_Format:RD,RGBA_S3TC_DXT1_Format:pM,RGBA_S3TC_DXT3_Format:fM,RGBA_S3TC_DXT5_Format:mM,RGBFormat:fj,RGB_ETC1_Format:Sj,RGB_ETC2_Format:OD,RGB_PVRTC_2BPPV1_Format:ID,RGB_PVRTC_4BPPV1_Format:MD,RGB_S3TC_DXT1_Format:dM,RGFormat:yj,RGIntegerFormat:bj,RawShaderMaterial:aX,Ray:D$,Raycaster:eF,RectAreaLight:xX,RedFormat:_j,RedIntegerFormat:vj,ReinhardToneMapping:sj,RepeatWrapping:rE,ReplaceStencilOp:Wge,ReverseSubtractEquation:SP,RingBufferGeometry:dE,RingGeometry:dE,SRGBColorSpace:U0,Scene:o$,ShaderChunk:ds,ShaderLib:Zp,ShaderMaterial:yd,ShadowMaterial:oX,Shape:m1,ShapeBufferGeometry:pE,ShapeGeometry:pE,ShapePath:oSe,ShapeUtils:q0,ShortType:uj,Skeleton:qR,SkeletonHelper:XTe,SkinnedMesh:jj,SmoothShading:Lge,Source:r1,Sphere:s_,SphereBufferGeometry:t0,SphereGeometry:t0,Spherical:oN,SphericalHarmonics3:wX,SplineCurve:UP,SpotLight:bX,SpotLightHelper:jTe,Sprite:Wj,SpriteMaterial:LP,SrcAlphaFactor:UR,SrcAlphaSaturateFactor:Y7,SrcColorFactor:H7,StaticCopyUsage:a0e,StaticDrawUsage:r$,StaticReadUsage:i0e,StereoCamera:STe,StreamCopyUsage:u0e,StreamDrawUsage:r0e,StreamReadUsage:o0e,StringKeyframeTrack:H1,SubtractEquation:F7,SubtractiveBlending:wD,TOUCH:Ub,TangentSpaceNormalMap:F1,TetrahedronBufferGeometry:fE,TetrahedronGeometry:fE,TextGeometry:dSe,Texture:lc,TextureLoader:dTe,TorusBufferGeometry:jg,TorusGeometry:jg,TorusKnotBufferGeometry:mE,TorusKnotGeometry:mE,Triangle:Sm,TriangleFanDrawMode:zge,TriangleStripDrawMode:Uge,TrianglesDrawMode:Fge,TubeBufferGeometry:gE,TubeGeometry:gE,UVMapping:HR,Uint16BufferAttribute:MP,Uint32BufferAttribute:IP,Uint8BufferAttribute:U0e,Uint8ClampedBufferAttribute:z0e,Uniform:eo,UniformsGroup:HTe,UniformsLib:Wn,UniformsUtils:N$,UnsignedByteType:ep,UnsignedInt248Type:gy,UnsignedIntType:q_,UnsignedShort4444Type:hj,UnsignedShort5551Type:dj,UnsignedShortType:wP,VSMShadowMap:e1,Vector2:Ht,Vector3:$e,Vector4:ys,VectorKeyframeTrack:p$,VideoTexture:$1e,WebGL1Renderer:Hj,WebGL3DRenderTarget:M0e,WebGLArrayRenderTarget:A0e,WebGLCubeRenderTarget:Oj,WebGLMultipleRenderTargets:I0e,WebGLMultisampleRenderTarget:gSe,WebGLRenderTarget:Rc,WebGLRenderer:OP,WebGLUtils:Uj,WireframeGeometry:HP,WrapAroundEnding:n$,ZeroCurvatureEnding:t1,ZeroFactor:U7,ZeroSlopeEnding:n1,ZeroStencilOp:Gge,_SRGBAFormat:mI,sRGBEncoding:ps},Symbol.toStringTag,{value:"Module"}));var Y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function IX(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var s1={exports:{}},Mb={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n5;function bSe(){return n5||(n5=1,Mb.ConcurrentRoot=1,Mb.ContinuousEventPriority=4,Mb.DefaultEventPriority=16,Mb.DiscreteEventPriority=1,Mb.IdleEventPriority=536870912,Mb.LegacyRoot=0),Mb}(function(n){n.exports=bSe()})(s1);function TSe(n){let e;const t=new Set,i=(u,d)=>{const p=typeof u=="function"?u(e):u;if(p!==e){const _=e;e=d?p:Object.assign({},e,p),t.forEach(y=>y(e,_))}},s=()=>e,o=(u,d=s,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let _=d(e);function y(){const b=d(e);if(!p(_,b)){const E=_;u(_=b,E)}}return t.add(y),()=>t.delete(y)},l={setState:i,getState:s,subscribe:(u,d,p)=>d||p?o(u,d,p):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,s,l),l}const SSe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),r5=SSe?me.useEffect:me.useLayoutEffect;function ESe(n){const e=typeof n=="function"?TSe(n):n,t=(i=e.getState,s=Object.is)=>{const[,o]=me.useReducer(I=>I+1,0),l=e.getState(),u=me.useRef(l),d=me.useRef(i),p=me.useRef(s),_=me.useRef(!1),y=me.useRef();y.current===void 0&&(y.current=i(l));let b,E=!1;(u.current!==l||d.current!==i||p.current!==s||_.current)&&(b=i(l),E=!s(y.current,b)),r5(()=>{E&&(y.current=b),u.current=l,d.current=i,p.current=s,_.current=!1});const C=me.useRef(l);r5(()=>{const I=()=>{try{const O=e.getState(),P=d.current(O);p.current(y.current,P)||(u.current=O,y.current=P,o())}catch{_.current=!0,o()}},L=e.subscribe(I);return e.getState()!==C.current&&I(),L},[]);const A=E?b:y.current;return me.useDebugValue(A),A};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const s=i.length<=0;return{value:i.shift(),done:s}}}},t}var RX={exports:{}},vI={exports:{}},i5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s5;function xSe(){return s5||(s5=1,function(n){function e(J,se){var ie=J.length;J.push(se);e:for(;0<ie;){var he=ie-1>>>1,Se=J[he];if(0<s(Se,se))J[he]=se,J[ie]=Se,ie=he;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var se=J[0],ie=J.pop();if(ie!==se){J[0]=ie;e:for(var he=0,Se=J.length,Fe=Se>>>1;he<Fe;){var ke=2*(he+1)-1,qe=J[ke],De=ke+1,rt=J[De];if(0>s(qe,ie))De<Se&&0>s(rt,qe)?(J[he]=rt,J[De]=ie,he=De):(J[he]=qe,J[ke]=ie,he=ke);else if(De<Se&&0>s(rt,ie))J[he]=rt,J[De]=ie,he=De;else break e}}return se}function s(J,se){var ie=J.sortIndex-se.sortIndex;return ie!==0?ie:J.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],_=1,y=null,b=3,E=!1,C=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(J){for(var se=t(p);se!==null;){if(se.callback===null)i(p);else if(se.startTime<=J)i(p),se.sortIndex=se.expirationTime,e(d,se);else break;se=t(p)}}function N(J){if(A=!1,P(J),!C)if(t(d)!==null)C=!0,Te(z);else{var se=t(p);se!==null&&Oe(N,se.startTime-J)}}function z(J,se){C=!1,A&&(A=!1,L(U),U=-1),E=!0;var ie=b;try{for(P(se),y=t(d);y!==null&&(!(y.expirationTime>se)||J&&!oe());){var he=y.callback;if(typeof he=="function"){y.callback=null,b=y.priorityLevel;var Se=he(y.expirationTime<=se);se=n.unstable_now(),typeof Se=="function"?y.callback=Se:y===t(d)&&i(d),P(se)}else i(d);y=t(d)}if(y!==null)var Fe=!0;else{var ke=t(p);ke!==null&&Oe(N,ke.startTime-se),Fe=!1}return Fe}finally{y=null,b=ie,E=!1}}var W=!1,H=null,U=-1,Q=5,ne=-1;function oe(){return!(n.unstable_now()-ne<Q)}function le(){if(H!==null){var J=n.unstable_now();ne=J;var se=!0;try{se=H(!0,J)}finally{se?ge():(W=!1,H=null)}}else W=!1}var ge;if(typeof O=="function")ge=function(){O(le)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,pe=ce.port2;ce.port1.onmessage=le,ge=function(){pe.postMessage(null)}}else ge=function(){I(le,0)};function Te(J){H=J,W||(W=!0,ge())}function Oe(J,se){U=I(function(){J(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){C||E||(C=!0,Te(z))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(J){switch(b){case 1:case 2:case 3:var se=3;break;default:se=b}var ie=b;b=se;try{return J()}finally{b=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,se){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ie=b;b=J;try{return se()}finally{b=ie}},n.unstable_scheduleCallback=function(J,se,ie){var he=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?he+ie:he):ie=he,J){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=ie+Se,J={id:_++,callback:se,priorityLevel:J,startTime:ie,expirationTime:Se,sortIndex:-1},ie>he?(J.sortIndex=ie,e(p,J),t(d)===null&&J===t(p)&&(A?(L(U),U=-1):A=!0,Oe(N,ie-he))):(J.sortIndex=Se,e(d,J),C||E||(C=!0,Te(z))),J},n.unstable_shouldYield=oe,n.unstable_wrapCallback=function(J){var se=b;return function(){var ie=b;b=se;try{return J.apply(this,arguments)}finally{b=ie}}}}(i5)),i5}(function(n){n.exports=xSe()})(vI);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o5,a5;function wSe(){return a5||(a5=1,o5=function(n){var e={},t=Vr,i=vI.exports,s=Object.assign;function o(w){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+w,g=1;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+w+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),d=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),N=Symbol.iterator;function z(w){return w===null||typeof w!="object"?null:(w=N&&w[N]||w["@@iterator"],typeof w=="function"?w:null)}function W(w){if(w==null)return null;if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w;switch(w){case p:return"Fragment";case d:return"Portal";case y:return"Profiler";case _:return"StrictMode";case A:return"Suspense";case I:return"SuspenseList"}if(typeof w=="object")switch(w.$$typeof){case E:return(w.displayName||"Context")+".Consumer";case b:return(w._context.displayName||"Context")+".Provider";case C:var h=w.render;return w=w.displayName,w||(w=h.displayName||h.name||"",w=w!==""?"ForwardRef("+w+")":"ForwardRef"),w;case L:return h=w.displayName||null,h!==null?h:W(w.type)||"Memo";case O:h=w._payload,w=w._init;try{return W(w(h))}catch{}}return null}function H(w){var h=w.type;switch(w.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return w=h.render,w=w.displayName||w.name||"",h.displayName||(w!==""?"ForwardRef("+w+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(h);case 8:return h===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function U(w){var h=w,g=w;if(w.alternate)for(;h.return;)h=h.return;else{w=h;do h=w,h.flags&4098&&(g=h.return),w=h.return;while(w)}return h.tag===3?g:null}function Q(w){if(U(w)!==w)throw Error(o(188))}function ne(w){var h=w.alternate;if(!h){if(h=U(w),h===null)throw Error(o(188));return h!==w?null:w}for(var g=w,$=h;;){var M=g.return;if(M===null)break;var B=M.alternate;if(B===null){if($=M.return,$!==null){g=$;continue}break}if(M.child===B.child){for(B=M.child;B;){if(B===g)return Q(M),w;if(B===$)return Q(M),h;B=B.sibling}throw Error(o(188))}if(g.return!==$.return)g=M,$=B;else{for(var V=!1,ue=M.child;ue;){if(ue===g){V=!0,g=M,$=B;break}if(ue===$){V=!0,$=M,g=B;break}ue=ue.sibling}if(!V){for(ue=B.child;ue;){if(ue===g){V=!0,g=B,$=M;break}if(ue===$){V=!0,$=B,g=M;break}ue=ue.sibling}if(!V)throw Error(o(189))}}if(g.alternate!==$)throw Error(o(190))}if(g.tag!==3)throw Error(o(188));return g.stateNode.current===g?w:h}function oe(w){return w=ne(w),w!==null?le(w):null}function le(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){var h=le(w);if(h!==null)return h;w=w.sibling}return null}function ge(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){if(w.tag!==4){var h=ge(w);if(h!==null)return h}w=w.sibling}return null}var ce=Array.isArray,pe=n.getPublicInstance,Te=n.getRootHostContext,Oe=n.getChildHostContext,J=n.prepareForCommit,se=n.resetAfterCommit,ie=n.createInstance,he=n.appendInitialChild,Se=n.finalizeInitialChildren,Fe=n.prepareUpdate,ke=n.shouldSetTextContent,qe=n.createTextInstance,De=n.scheduleTimeout,rt=n.cancelTimeout,tt=n.noTimeout,ft=n.isPrimaryRenderer,ct=n.supportsMutation,Pe=n.supportsPersistence,Ce=n.supportsHydration,je=n.getInstanceFromNode,it=n.preparePortalMount,ot=n.getCurrentEventPriority,vt=n.detachDeletedInstance,It=n.supportsMicrotasks,yt=n.scheduleMicrotask,kt=n.supportsTestSelectors,$t=n.findFiberRoot,mt=n.getBoundingRect,xe=n.getTextContent,re=n.isHiddenSubtree,Be=n.matchAccessibilityRole,dt=n.setFocusIfFocusable,bt=n.setupIntersectionObserver,Mt=n.appendChild,pt=n.appendChildToContainer,Ke=n.commitTextUpdate,Ie=n.commitMount,q=n.commitUpdate,ee=n.insertBefore,de=n.insertInContainerBefore,Ae=n.removeChild,Je=n.removeChildFromContainer,jt=n.resetTextContent,ze=n.hideInstance,Yt=n.hideTextInstance,_t=n.unhideInstance,Kt=n.unhideTextInstance,Xt=n.clearContainer,Dn=n.cloneInstance,ii=n.createContainerChildSet,Lr=n.appendChildToContainerChildSet,Si=n.finalizeContainerChildren,Er=n.replaceContainerChildren,ir=n.cloneHiddenInstance,te=n.cloneHiddenTextInstance,be=n.canHydrateInstance,He=n.canHydrateTextInstance,at=n.canHydrateSuspenseInstance,Ft=n.isSuspenseInstancePending,rn=n.isSuspenseInstanceFallback,Rn=n.registerSuspenseInstanceRetry,Le=n.getNextHydratableSibling,gt=n.getFirstHydratableChild,Ct=n.getFirstHydratableChildWithinContainer,Tt=n.getFirstHydratableChildWithinSuspenseInstance,zt=n.hydrateInstance,On=n.hydrateTextInstance,tr=n.hydrateSuspenseInstance,yr=n.getNextHydratableInstanceAfterSuspenseInstance,Rr=n.commitHydratedContainer,Li=n.commitHydratedSuspenseInstance,Dr=n.clearSuspenseBoundary,jr=n.clearSuspenseBoundaryFromContainer,bs=n.shouldDeleteUnhydratedTailInstances,Ia=n.didNotMatchHydratedContainerTextInstance,wo=n.didNotMatchHydratedTextInstance,jl;function Zt(w){if(jl===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);jl=h&&h[1]||""}return`
`+jl+w}var Cr=!1;function qa(w,h){if(!w||Cr)return"";Cr=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Qe){var $=Qe}Reflect.construct(w,[],h)}else{try{h.call()}catch(Qe){$=Qe}w.call(h.prototype)}else{try{throw Error()}catch(Qe){$=Qe}w()}}catch(Qe){if(Qe&&$&&typeof Qe.stack=="string"){for(var M=Qe.stack.split(`
`),B=$.stack.split(`
`),V=M.length-1,ue=B.length-1;1<=V&&0<=ue&&M[V]!==B[ue];)ue--;for(;1<=V&&0<=ue;V--,ue--)if(M[V]!==B[ue]){if(V!==1||ue!==1)do if(V--,ue--,0>ue||M[V]!==B[ue]){var Me=`
`+M[V].replace(" at new "," at ");return w.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",w.displayName)),Me}while(1<=V&&0<=ue);break}}}finally{Cr=!1,Error.prepareStackTrace=g}return(w=w?w.displayName||w.name:"")?Zt(w):""}var Ra=Object.prototype.hasOwnProperty,Ns=[],Bs=-1;function Di(w){return{current:w}}function Ar(w){0>Bs||(w.current=Ns[Bs],Ns[Bs]=null,Bs--)}function $n(w,h){Bs++,Ns[Bs]=w.current,w.current=h}var $r={},zr=Di($r),mr=Di(!1),Ni=$r;function Ts(w,h){var g=w.type.contextTypes;if(!g)return $r;var $=w.stateNode;if($&&$.__reactInternalMemoizedUnmaskedChildContext===h)return $.__reactInternalMemoizedMaskedChildContext;var M={},B;for(B in g)M[B]=h[B];return $&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=h,w.__reactInternalMemoizedMaskedChildContext=M),M}function ci(w){return w=w.childContextTypes,w!=null}function fs(){Ar(mr),Ar(zr)}function Qa(w,h,g){if(zr.current!==$r)throw Error(o(168));$n(zr,h),$n(mr,g)}function ka(w,h,g){var $=w.stateNode;if(h=h.childContextTypes,typeof $.getChildContext!="function")return g;$=$.getChildContext();for(var M in $)if(!(M in h))throw Error(o(108,H(w)||"Unknown",M));return s({},g,$)}function uc(w){return w=(w=w.stateNode)&&w.__reactInternalMemoizedMergedChildContext||$r,Ni=zr.current,$n(zr,w),$n(mr,mr.current),!0}function cc(w,h,g){var $=w.stateNode;if(!$)throw Error(o(169));g?(w=ka(w,h,Ni),$.__reactInternalMemoizedMergedChildContext=w,Ar(mr),Ar(zr),$n(zr,w)):Ar(mr),$n(mr,g)}var Vs=Math.clz32?Math.clz32:mu,Yo=Math.log,Xl=Math.LN2;function mu(w){return w>>>=0,w===0?32:31-(Yo(w)/Xl|0)|0}var hh=64,Ko=4194304;function pr(w){switch(w&-w){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return w&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return w}}function Ei(w,h){var g=w.pendingLanes;if(g===0)return 0;var $=0,M=w.suspendedLanes,B=w.pingedLanes,V=g&268435455;if(V!==0){var ue=V&~M;ue!==0?$=pr(ue):(B&=V,B!==0&&($=pr(B)))}else V=g&~M,V!==0?$=pr(V):B!==0&&($=pr(B));if($===0)return 0;if(h!==0&&h!==$&&!(h&M)&&(M=$&-$,B=h&-h,M>=B||M===16&&(B&4194240)!==0))return h;if($&4&&($|=g&16),h=w.entangledLanes,h!==0)for(w=w.entanglements,h&=$;0<h;)g=31-Vs(h),M=1<<g,$|=w[g],h&=~M;return $}function kc(w,h){switch(w){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dh(w,h){for(var g=w.suspendedLanes,$=w.pingedLanes,M=w.expirationTimes,B=w.pendingLanes;0<B;){var V=31-Vs(B),ue=1<<V,Me=M[V];Me===-1?(!(ue&g)||ue&$)&&(M[V]=kc(ue,h)):Me<=h&&(w.expiredLanes|=ue),B&=~ue}}function Oc(w){return w=w.pendingLanes&-1073741825,w!==0?w:w&1073741824?1073741824:0}function Sl(w){for(var h=[],g=0;31>g;g++)h.push(w);return h}function gu(w,h,g){w.pendingLanes|=h,h!==536870912&&(w.suspendedLanes=0,w.pingedLanes=0),w=w.eventTimes,h=31-Vs(h),w[h]=g}function El(w,h){var g=w.pendingLanes&~h;w.pendingLanes=h,w.suspendedLanes=0,w.pingedLanes=0,w.expiredLanes&=h,w.mutableReadLanes&=h,w.entangledLanes&=h,h=w.entanglements;var $=w.eventTimes;for(w=w.expirationTimes;0<g;){var M=31-Vs(g),B=1<<M;h[M]=0,$[M]=-1,w[M]=-1,g&=~B}}function xl(w,h){var g=w.entangledLanes|=h;for(w=w.entanglements;g;){var $=31-Vs(g),M=1<<$;M&h|w[$]&h&&(w[$]|=h),g&=~M}}var gr=0;function _r(w){return w&=-w,1<w?4<w?w&268435455?16:536870912:4:1}var Yl=i.unstable_scheduleCallback,Za=i.unstable_cancelCallback,el=i.unstable_shouldYield,_u=i.unstable_requestPaint,Ki=i.unstable_now,ms=i.unstable_ImmediatePriority,tl=i.unstable_UserBlockingPriority,Td=i.unstable_NormalPriority,ro=i.unstable_IdlePriority,Pu=null,aa=null;function vu(w){if(aa&&typeof aa.onCommitFiberRoot=="function")try{aa.onCommitFiberRoot(Pu,w,void 0,(w.current.flags&128)===128)}catch{}}function nr(w,h){return w===h&&(w!==0||1/w===1/h)||w!==w&&h!==h}var Un=typeof Object.is=="function"?Object.is:nr,Ss=null,io=!1,Fu=!1;function yu(w){Ss===null?Ss=[w]:Ss.push(w)}function ph(w){io=!0,yu(w)}function Oa(){if(!Fu&&Ss!==null){Fu=!0;var w=0,h=gr;try{var g=Ss;for(gr=1;w<g.length;w++){var $=g[w];do $=$(!0);while($!==null)}Ss=null,io=!1}catch(M){throw Ss!==null&&(Ss=Ss.slice(w+1)),Yl(ms,Oa),M}finally{gr=h,Fu=!1}}return null}var la=l.ReactCurrentBatchConfig;function Uu(w,h){if(Un(w,h))return!0;if(typeof w!="object"||w===null||typeof h!="object"||h===null)return!1;var g=Object.keys(w),$=Object.keys(h);if(g.length!==$.length)return!1;for($=0;$<g.length;$++){var M=g[$];if(!Ra.call(h,M)||!Un(w[M],h[M]))return!1}return!0}function br(w){switch(w.tag){case 5:return Zt(w.type);case 16:return Zt("Lazy");case 13:return Zt("Suspense");case 19:return Zt("SuspenseList");case 0:case 2:case 15:return w=qa(w.type,!1),w;case 11:return w=qa(w.type.render,!1),w;case 1:return w=qa(w.type,!0),w;default:return""}}function Ms(w,h){if(w&&w.defaultProps){h=s({},h),w=w.defaultProps;for(var g in w)h[g]===void 0&&(h[g]=w[g]);return h}return h}var vi=Di(null),xi=null,ua=null,Zr=null;function bu(){Zr=ua=xi=null}function $o(w,h,g){ft?($n(vi,h._currentValue),h._currentValue=g):($n(vi,h._currentValue2),h._currentValue2=g)}function Tu(w){var h=vi.current;Ar(vi),ft?w._currentValue=h:w._currentValue2=h}function nl(w,h,g){for(;w!==null;){var $=w.alternate;if((w.childLanes&h)!==h?(w.childLanes|=h,$!==null&&($.childLanes|=h)):$!==null&&($.childLanes&h)!==h&&($.childLanes|=h),w===g)break;w=w.return}}function Bi(w,h){xi=w,Zr=ua=null,w=w.dependencies,w!==null&&w.firstContext!==null&&(w.lanes&h&&(al=!0),w.firstContext=null)}function wi(w){var h=ft?w._currentValue:w._currentValue2;if(Zr!==w)if(w={context:w,memoizedValue:h,next:null},ua===null){if(xi===null)throw Error(o(308));ua=w,xi.dependencies={lanes:0,firstContext:w}}else ua=ua.next=w;return h}var zn=null,$i=!1;function Xr(w){w.updateQueue={baseState:w.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function od(w,h){w=w.updateQueue,h.updateQueue===w&&(h.updateQueue={baseState:w.baseState,firstBaseUpdate:w.firstBaseUpdate,lastBaseUpdate:w.lastBaseUpdate,shared:w.shared,effects:w.effects})}function Su(w,h){return{eventTime:w,lane:h,tag:0,payload:null,callback:null,next:null}}function Gi(w,h){var g=w.updateQueue;g!==null&&(g=g.shared,qn!==null&&w.mode&1&&!(Ln&2)?(w=g.interleaved,w===null?(h.next=h,zn===null?zn=[g]:zn.push(g)):(h.next=w.next,w.next=h),g.interleaved=h):(w=g.pending,w===null?h.next=h:(h.next=w.next,w.next=h),g.pending=h))}function La(w,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194240)!==0)){var $=h.lanes;$&=w.pendingLanes,g|=$,h.lanes=g,xl(w,g)}}function fh(w,h){var g=w.updateQueue,$=w.alternate;if($!==null&&($=$.updateQueue,g===$)){var M=null,B=null;if(g=g.firstBaseUpdate,g!==null){do{var V={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};B===null?M=B=V:B=B.next=V,g=g.next}while(g!==null);B===null?M=B=h:B=B.next=h}else M=B=h;g={baseState:$.baseState,firstBaseUpdate:M,lastBaseUpdate:B,shared:$.shared,effects:$.effects},w.updateQueue=g;return}w=g.lastBaseUpdate,w===null?g.firstBaseUpdate=h:w.next=h,g.lastBaseUpdate=h}function cr(w,h,g,$){var M=w.updateQueue;$i=!1;var B=M.firstBaseUpdate,V=M.lastBaseUpdate,ue=M.shared.pending;if(ue!==null){M.shared.pending=null;var Me=ue,Qe=Me.next;Me.next=null,V===null?B=Qe:V.next=Qe,V=Me;var Et=w.alternate;Et!==null&&(Et=Et.updateQueue,ue=Et.lastBaseUpdate,ue!==V&&(ue===null?Et.firstBaseUpdate=Qe:ue.next=Qe,Et.lastBaseUpdate=Me))}if(B!==null){var Jt=M.baseState;V=0,Et=Qe=Me=null,ue=B;do{var an=ue.lane,_n=ue.eventTime;if(($&an)===an){Et!==null&&(Et=Et.next={eventTime:_n,lane:0,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null});e:{var vn=w,pn=ue;switch(an=h,_n=g,pn.tag){case 1:if(vn=pn.payload,typeof vn=="function"){Jt=vn.call(_n,Jt,an);break e}Jt=vn;break e;case 3:vn.flags=vn.flags&-65537|128;case 0:if(vn=pn.payload,an=typeof vn=="function"?vn.call(_n,Jt,an):vn,an==null)break e;Jt=s({},Jt,an);break e;case 2:$i=!0}}ue.callback!==null&&ue.lane!==0&&(w.flags|=64,an=M.effects,an===null?M.effects=[ue]:an.push(ue))}else _n={eventTime:_n,lane:an,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},Et===null?(Qe=Et=_n,Me=Jt):Et=Et.next=_n,V|=an;if(ue=ue.next,ue===null){if(ue=M.shared.pending,ue===null)break;an=ue,ue=an.next,an.next=null,M.lastBaseUpdate=an,M.shared.pending=null}}while(!0);if(Et===null&&(Me=Jt),M.baseState=Me,M.firstBaseUpdate=Qe,M.lastBaseUpdate=Et,h=M.shared.interleaved,h!==null){M=h;do V|=M.lane,M=M.next;while(M!==h)}else B===null&&(M.shared.lanes=0);ou|=V,w.lanes=V,w.memoizedState=Jt}}function Jo(w,h,g){if(w=h.effects,h.effects=null,w!==null)for(h=0;h<w.length;h++){var $=w[h],M=$.callback;if(M!==null){if($.callback=null,$=g,typeof M!="function")throw Error(o(191,M));M.call($)}}}var ad=new t.Component().refs;function tp(w,h,g,$){h=w.memoizedState,g=g($,h),g=g==null?h:s({},h,g),w.memoizedState=g,w.lanes===0&&(w.updateQueue.baseState=g)}var Lc={isMounted:function(w){return(w=w._reactInternals)?U(w)===w:!1},enqueueSetState:function(w,h,g){w=w._reactInternals;var $=Mr(),M=vs(w),B=Su($,M);B.payload=h,g!=null&&(B.callback=g),Gi(w,B),h=Rs(w,M,$),h!==null&&La(h,w,M)},enqueueReplaceState:function(w,h,g){w=w._reactInternals;var $=Mr(),M=vs(w),B=Su($,M);B.tag=1,B.payload=h,g!=null&&(B.callback=g),Gi(w,B),h=Rs(w,M,$),h!==null&&La(h,w,M)},enqueueForceUpdate:function(w,h){w=w._reactInternals;var g=Mr(),$=vs(w),M=Su(g,$);M.tag=2,h!=null&&(M.callback=h),Gi(w,M),h=Rs(w,$,g),h!==null&&La(h,w,$)}};function np(w,h,g,$,M,B,V){return w=w.stateNode,typeof w.shouldComponentUpdate=="function"?w.shouldComponentUpdate($,B,V):h.prototype&&h.prototype.isPureReactComponent?!Uu(g,$)||!Uu(M,B):!0}function Ip(w,h,g){var $=!1,M=$r,B=h.contextType;return typeof B=="object"&&B!==null?B=wi(B):(M=ci(h)?Ni:zr.current,$=h.contextTypes,B=($=$!=null)?Ts(w,M):$r),h=new h(g,B),w.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Lc,w.stateNode=h,h._reactInternals=w,$&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=M,w.__reactInternalMemoizedMaskedChildContext=B),h}function ff(w,h,g,$){w=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,$),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,$),h.state!==w&&Lc.enqueueReplaceState(h,h.state,null)}function Sd(w,h,g,$){var M=w.stateNode;M.props=g,M.state=w.memoizedState,M.refs=ad,Xr(w);var B=h.contextType;typeof B=="object"&&B!==null?M.context=wi(B):(B=ci(h)?Ni:zr.current,M.context=Ts(w,B)),M.state=w.memoizedState,B=h.getDerivedStateFromProps,typeof B=="function"&&(tp(w,h,B,g),M.state=w.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(h=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),h!==M.state&&Lc.enqueueReplaceState(M,M.state,null),cr(w,g,M,$),M.state=w.memoizedState),typeof M.componentDidMount=="function"&&(w.flags|=4194308)}var Kl=[],Is=0,zu=null,mh=0,Da=[],ai=0,Sr=null,so=1,Na="";function Fo(w,h){Kl[Is++]=mh,Kl[Is++]=zu,zu=w,mh=h}function Jl(w,h,g){Da[ai++]=so,Da[ai++]=Na,Da[ai++]=Sr,Sr=w;var $=so;w=Na;var M=32-Vs($)-1;$&=~(1<<M),g+=1;var B=32-Vs(h)+M;if(30<B){var V=M-M%5;B=($&(1<<V)-1).toString(32),$>>=V,M-=V,so=1<<32-Vs(h)+M|g<<M|$,Na=B+w}else so=1<<B|g<<M|$,Na=w}function ql(w){w.return!==null&&(Fo(w,1),Jl(w,1,0))}function Oh(w){for(;w===zu;)zu=Kl[--Is],Kl[Is]=null,mh=Kl[--Is],Kl[Is]=null;for(;w===Sr;)Sr=Da[--ai],Da[ai]=null,Na=Da[--ai],Da[ai]=null,so=Da[--ai],Da[ai]=null}var Hr=null,Ci=null,vr=!1,Wi=!1,ca=null;function Eu(w,h){var g=Wo(5,null,null,0);g.elementType="DELETED",g.stateNode=h,g.return=w,h=w.deletions,h===null?(w.deletions=[g],w.flags|=16):h.push(g)}function rp(w,h){switch(w.tag){case 5:return h=be(h,w.type,w.pendingProps),h!==null?(w.stateNode=h,Hr=w,Ci=gt(h),!0):!1;case 6:return h=He(h,w.pendingProps),h!==null?(w.stateNode=h,Hr=w,Ci=null,!0):!1;case 13:if(h=at(h),h!==null){var g=Sr!==null?{id:so,overflow:Na}:null;return w.memoizedState={dehydrated:h,treeContext:g,retryLane:1073741824},g=Wo(18,null,null,0),g.stateNode=h,g.return=w,w.child=g,Hr=w,Ci=null,!0}return!1;default:return!1}}function ip(w){return(w.mode&1)!==0&&(w.flags&128)===0}function ld(w){if(vr){var h=Ci;if(h){var g=h;if(!rp(w,h)){if(ip(w))throw Error(o(418));h=Le(g);var $=Hr;h&&rp(w,h)?Eu($,g):(w.flags=w.flags&-4097|2,vr=!1,Hr=w)}}else{if(ip(w))throw Error(o(418));w.flags=w.flags&-4097|2,vr=!1,Hr=w}}}function Hu(w){for(w=w.return;w!==null&&w.tag!==5&&w.tag!==3&&w.tag!==13;)w=w.return;Hr=w}function rl(w){if(!Ce||w!==Hr)return!1;if(!vr)return Hu(w),vr=!0,!1;if(w.tag!==3&&(w.tag!==5||bs(w.type)&&!ke(w.type,w.memoizedProps))){var h=Ci;if(h){if(ip(w)){for(w=Ci;w;)w=Le(w);throw Error(o(418))}for(;h;)Eu(w,h),h=Le(h)}}if(Hu(w),w.tag===13){if(!Ce)throw Error(o(316));if(w=w.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(o(317));Ci=yr(w)}else Ci=Hr?Le(w.stateNode):null;return!0}function Dc(){Ce&&(Ci=Hr=null,Wi=vr=!1)}function Lh(w){ca===null?ca=[w]:ca.push(w)}function Gu(w,h,g){if(w=g.ref,w!==null&&typeof w!="function"&&typeof w!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(o(309));var $=g.stateNode}if(!$)throw Error(o(147,w));var M=$,B=""+w;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===B?h.ref:(h=function(V){var ue=M.refs;ue===ad&&(ue=M.refs={}),V===null?delete ue[B]:ue[B]=V},h._stringRef=B,h)}if(typeof w!="string")throw Error(o(284));if(!g._owner)throw Error(o(290,w))}return w}function Ql(w,h){throw w=Object.prototype.toString.call(h),Error(o(31,w==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":w))}function Ps(w){var h=w._init;return h(w._payload)}function Zl(w){function h(St,we){if(w){var Re=St.deletions;Re===null?(St.deletions=[we],St.flags|=16):Re.push(we)}}function g(St,we){if(!w)return null;for(;we!==null;)h(St,we),we=we.sibling;return null}function $(St,we){for(St=new Map;we!==null;)we.key!==null?St.set(we.key,we):St.set(we.index,we),we=we.sibling;return St}function M(St,we){return St=Ll(St,we),St.index=0,St.sibling=null,St}function B(St,we,Re){return St.index=Re,w?(Re=St.alternate,Re!==null?(Re=Re.index,Re<we?(St.flags|=2,we):Re):(St.flags|=2,we)):(St.flags|=1048576,we)}function V(St){return w&&St.alternate===null&&(St.flags|=2),St}function ue(St,we,Re,nt){return we===null||we.tag!==6?(we=lu(Re,St.mode,nt),we.return=St,we):(we=M(we,Re),we.return=St,we)}function Me(St,we,Re,nt){var Ut=Re.type;return Ut===p?Et(St,we,Re.props.children,nt,Re.key):we!==null&&(we.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===O&&Ps(Ut)===we.type)?(nt=M(we,Re.props),nt.ref=Gu(St,we,Re),nt.return=St,nt):(nt=_o(Re.type,Re.key,Re.props,null,St.mode,nt),nt.ref=Gu(St,we,Re),nt.return=St,nt)}function Qe(St,we,Re,nt){return we===null||we.tag!==4||we.stateNode.containerInfo!==Re.containerInfo||we.stateNode.implementation!==Re.implementation?(we=ni(Re,St.mode,nt),we.return=St,we):(we=M(we,Re.children||[]),we.return=St,we)}function Et(St,we,Re,nt,Ut){return we===null||we.tag!==7?(we=Dl(Re,St.mode,nt,Ut),we.return=St,we):(we=M(we,Re),we.return=St,we)}function Jt(St,we,Re){if(typeof we=="string"&&we!==""||typeof we=="number")return we=lu(""+we,St.mode,Re),we.return=St,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case u:return Re=_o(we.type,we.key,we.props,null,St.mode,Re),Re.ref=Gu(St,null,we),Re.return=St,Re;case d:return we=ni(we,St.mode,Re),we.return=St,we;case O:var nt=we._init;return Jt(St,nt(we._payload),Re)}if(ce(we)||z(we))return we=Dl(we,St.mode,Re,null),we.return=St,we;Ql(St,we)}return null}function an(St,we,Re,nt){var Ut=we!==null?we.key:null;if(typeof Re=="string"&&Re!==""||typeof Re=="number")return Ut!==null?null:ue(St,we,""+Re,nt);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case u:return Re.key===Ut?Me(St,we,Re,nt):null;case d:return Re.key===Ut?Qe(St,we,Re,nt):null;case O:return Ut=Re._init,an(St,we,Ut(Re._payload),nt)}if(ce(Re)||z(Re))return Ut!==null?null:Et(St,we,Re,nt,null);Ql(St,Re)}return null}function _n(St,we,Re,nt,Ut){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return St=St.get(Re)||null,ue(we,St,""+nt,Ut);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case u:return St=St.get(nt.key===null?Re:nt.key)||null,Me(we,St,nt,Ut);case d:return St=St.get(nt.key===null?Re:nt.key)||null,Qe(we,St,nt,Ut);case O:var tn=nt._init;return _n(St,we,Re,tn(nt._payload),Ut)}if(ce(nt)||z(nt))return St=St.get(Re)||null,Et(we,St,nt,Ut,null);Ql(we,nt)}return null}function vn(St,we,Re,nt){for(var Ut=null,tn=null,Tn=we,An=we=0,Bn=null;Tn!==null&&An<Re.length;An++){Tn.index>An?(Bn=Tn,Tn=null):Bn=Tn.sibling;var ur=an(St,Tn,Re[An],nt);if(ur===null){Tn===null&&(Tn=Bn);break}w&&Tn&&ur.alternate===null&&h(St,Tn),we=B(ur,we,An),tn===null?Ut=ur:tn.sibling=ur,tn=ur,Tn=Bn}if(An===Re.length)return g(St,Tn),vr&&Fo(St,An),Ut;if(Tn===null){for(;An<Re.length;An++)Tn=Jt(St,Re[An],nt),Tn!==null&&(we=B(Tn,we,An),tn===null?Ut=Tn:tn.sibling=Tn,tn=Tn);return vr&&Fo(St,An),Ut}for(Tn=$(St,Tn);An<Re.length;An++)Bn=_n(Tn,St,An,Re[An],nt),Bn!==null&&(w&&Bn.alternate!==null&&Tn.delete(Bn.key===null?An:Bn.key),we=B(Bn,we,An),tn===null?Ut=Bn:tn.sibling=Bn,tn=Bn);return w&&Tn.forEach(function(wr){return h(St,wr)}),vr&&Fo(St,An),Ut}function pn(St,we,Re,nt){var Ut=z(Re);if(typeof Ut!="function")throw Error(o(150));if(Re=Ut.call(Re),Re==null)throw Error(o(151));for(var tn=Ut=null,Tn=we,An=we=0,Bn=null,ur=Re.next();Tn!==null&&!ur.done;An++,ur=Re.next()){Tn.index>An?(Bn=Tn,Tn=null):Bn=Tn.sibling;var wr=an(St,Tn,ur.value,nt);if(wr===null){Tn===null&&(Tn=Bn);break}w&&Tn&&wr.alternate===null&&h(St,Tn),we=B(wr,we,An),tn===null?Ut=wr:tn.sibling=wr,tn=wr,Tn=Bn}if(ur.done)return g(St,Tn),vr&&Fo(St,An),Ut;if(Tn===null){for(;!ur.done;An++,ur=Re.next())ur=Jt(St,ur.value,nt),ur!==null&&(we=B(ur,we,An),tn===null?Ut=ur:tn.sibling=ur,tn=ur);return vr&&Fo(St,An),Ut}for(Tn=$(St,Tn);!ur.done;An++,ur=Re.next())ur=_n(Tn,St,An,ur.value,nt),ur!==null&&(w&&ur.alternate!==null&&Tn.delete(ur.key===null?An:ur.key),we=B(ur,we,An),tn===null?Ut=ur:tn.sibling=ur,tn=ur);return w&&Tn.forEach(function(Nl){return h(St,Nl)}),vr&&Fo(St,An),Ut}function Or(St,we,Re,nt){if(typeof Re=="object"&&Re!==null&&Re.type===p&&Re.key===null&&(Re=Re.props.children),typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case u:e:{for(var Ut=Re.key,tn=we;tn!==null;){if(tn.key===Ut){if(Ut=Re.type,Ut===p){if(tn.tag===7){g(St,tn.sibling),we=M(tn,Re.props.children),we.return=St,St=we;break e}}else if(tn.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===O&&Ps(Ut)===tn.type){g(St,tn.sibling),we=M(tn,Re.props),we.ref=Gu(St,tn,Re),we.return=St,St=we;break e}g(St,tn);break}else h(St,tn);tn=tn.sibling}Re.type===p?(we=Dl(Re.props.children,St.mode,nt,Re.key),we.return=St,St=we):(nt=_o(Re.type,Re.key,Re.props,null,St.mode,nt),nt.ref=Gu(St,we,Re),nt.return=St,St=nt)}return V(St);case d:e:{for(tn=Re.key;we!==null;){if(we.key===tn)if(we.tag===4&&we.stateNode.containerInfo===Re.containerInfo&&we.stateNode.implementation===Re.implementation){g(St,we.sibling),we=M(we,Re.children||[]),we.return=St,St=we;break e}else{g(St,we);break}else h(St,we);we=we.sibling}we=ni(Re,St.mode,nt),we.return=St,St=we}return V(St);case O:return tn=Re._init,Or(St,we,tn(Re._payload),nt)}if(ce(Re))return vn(St,we,Re,nt);if(z(Re))return pn(St,we,Re,nt);Ql(St,Re)}return typeof Re=="string"&&Re!==""||typeof Re=="number"?(Re=""+Re,we!==null&&we.tag===6?(g(St,we.sibling),we=M(we,Re),we.return=St,St=we):(g(St,we),we=lu(Re,St.mode,nt),we.return=St,St=we),V(St)):g(St,we)}return Or}var Dh=Zl(!0),Nc=Zl(!1),Bc={},ns=Di(Bc),Nr=Di(Bc),wl=Di(Bc);function Ba(w){if(w===Bc)throw Error(o(174));return w}function eu(w,h){$n(wl,h),$n(Nr,w),$n(ns,Bc),w=Te(h),Ar(ns),$n(ns,w)}function xu(){Ar(ns),Ar(Nr),Ar(wl)}function gh(w){var h=Ba(wl.current),g=Ba(ns.current);h=Oe(g,w.type,h),g!==h&&($n(Nr,w),$n(ns,h))}function Ed(w){Nr.current===w&&(Ar(ns),Ar(Nr))}var hi=Di(0);function ve(w){for(var h=w;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||Ft(g)||rn(g)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===w)break;for(;h.sibling===null;){if(h.return===null||h.return===w)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var We=[];function Ne(){for(var w=0;w<We.length;w++){var h=We[w];ft?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}We.length=0}var Ot=l.ReactCurrentDispatcher,en=l.ReactCurrentBatchConfig,Cn=0,jn=null,mn=null,Br=null,oo=!1,yi=!1,ao=0,il=0;function Pi(){throw Error(o(321))}function gs(w,h){if(h===null)return!1;for(var g=0;g<h.length&&g<w.length;g++)if(!Un(w[g],h[g]))return!1;return!0}function wu(w,h,g,$,M,B){if(Cn=B,jn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Ot.current=w===null||w.memoizedState===null?ju:Xu,w=g($,M),yi){B=0;do{if(yi=!1,ao=0,25<=B)throw Error(o(301));B+=1,Br=mn=null,h.updateQueue=null,Ot.current=vh,w=g($,M)}while(yi)}if(Ot.current=nu,h=mn!==null&&mn.next!==null,Cn=0,Br=mn=jn=null,oo=!1,h)throw Error(o(300));return w}function Xn(){var w=ao!==0;return ao=0,w}function ha(){var w={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Br===null?jn.memoizedState=Br=w:Br=Br.next=w,Br}function js(){if(mn===null){var w=jn.alternate;w=w!==null?w.memoizedState:null}else w=mn.next;var h=Br===null?jn.memoizedState:Br.next;if(h!==null)Br=h,mn=w;else{if(w===null)throw Error(o(310));mn=w,w={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},Br===null?jn.memoizedState=Br=w:Br=Br.next=w}return Br}function Fs(w,h){return typeof h=="function"?h(w):h}function Pa(w){var h=js(),g=h.queue;if(g===null)throw Error(o(311));g.lastRenderedReducer=w;var $=mn,M=$.baseQueue,B=g.pending;if(B!==null){if(M!==null){var V=M.next;M.next=B.next,B.next=V}$.baseQueue=M=B,g.pending=null}if(M!==null){B=M.next,$=$.baseState;var ue=V=null,Me=null,Qe=B;do{var Et=Qe.lane;if((Cn&Et)===Et)Me!==null&&(Me=Me.next={lane:0,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null}),$=Qe.hasEagerState?Qe.eagerState:w($,Qe.action);else{var Jt={lane:Et,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null};Me===null?(ue=Me=Jt,V=$):Me=Me.next=Jt,jn.lanes|=Et,ou|=Et}Qe=Qe.next}while(Qe!==null&&Qe!==B);Me===null?V=$:Me.next=ue,Un($,h.memoizedState)||(al=!0),h.memoizedState=$,h.baseState=V,h.baseQueue=Me,g.lastRenderedState=$}if(w=g.interleaved,w!==null){M=w;do B=M.lane,jn.lanes|=B,ou|=B,M=M.next;while(M!==w)}else M===null&&(g.lanes=0);return[h.memoizedState,g.dispatch]}function Nh(w){var h=js(),g=h.queue;if(g===null)throw Error(o(311));g.lastRenderedReducer=w;var $=g.dispatch,M=g.pending,B=h.memoizedState;if(M!==null){g.pending=null;var V=M=M.next;do B=w(B,V.action),V=V.next;while(V!==M);Un(B,h.memoizedState)||(al=!0),h.memoizedState=B,h.baseQueue===null&&(h.baseState=B),g.lastRenderedState=B}return[B,$]}function _h(){}function hc(w,h){var g=jn,$=js(),M=h(),B=!Un($.memoizedState,M);if(B&&($.memoizedState=M,al=!0),$=$.queue,$l(Bh.bind(null,g,$,w),[w]),$.getSnapshot!==h||B||Br!==null&&Br.memoizedState.tag&1){if(g.flags|=2048,dc(9,Pc.bind(null,g,$,M,h),void 0,null),qn===null)throw Error(o(349));Cn&30||qo(g,h,M)}return M}function qo(w,h,g){w.flags|=16384,w={getSnapshot:h,value:g},h=jn.updateQueue,h===null?(h={lastEffect:null,stores:null},jn.updateQueue=h,h.stores=[w]):(g=h.stores,g===null?h.stores=[w]:g.push(w))}function Pc(w,h,g,$){h.value=g,h.getSnapshot=$,Fa(h)&&Rs(w,1,-1)}function Bh(w,h,g){return g(function(){Fa(h)&&Rs(w,1,-1)})}function Fa(w){var h=w.getSnapshot;w=w.value;try{var g=h();return!Un(w,g)}catch{return!0}}function Ph(w){var h=ha();return typeof w=="function"&&(w=w()),h.memoizedState=h.baseState=w,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:w},h.queue=w,w=w.dispatch=ei.bind(null,jn,w),[h.memoizedState,w]}function dc(w,h,g,$){return w={tag:w,create:h,destroy:g,deps:$,next:null},h=jn.updateQueue,h===null?(h={lastEffect:null,stores:null},jn.updateQueue=h,h.lastEffect=w.next=w):(g=h.lastEffect,g===null?h.lastEffect=w.next=w:($=g.next,g.next=w,w.next=$,h.lastEffect=w)),w}function Wu(){return js().memoizedState}function ud(w,h,g,$){var M=ha();jn.flags|=w,M.memoizedState=dc(1|h,g,void 0,$===void 0?null:$)}function Qo(w,h,g,$){var M=js();$=$===void 0?null:$;var B=void 0;if(mn!==null){var V=mn.memoizedState;if(B=V.destroy,$!==null&&gs($,V.deps)){M.memoizedState=dc(h,g,B,$);return}}jn.flags|=w,M.memoizedState=dc(1|h,g,B,$)}function lo(w,h){return ud(8390656,8,w,h)}function $l(w,h){return Qo(2048,8,w,h)}function Fh(w,h){return Qo(4,2,w,h)}function Fi(w,h){return Qo(4,4,w,h)}function cd(w,h){if(typeof h=="function")return w=w(),h(w),function(){h(null)};if(h!=null)return w=w(),h.current=w,function(){h.current=null}}function Vu(w,h,g){return g=g!=null?g.concat([w]):null,Qo(4,4,cd.bind(null,h,w),g)}function tu(){}function Fc(w,h){var g=js();h=h===void 0?null:h;var $=g.memoizedState;return $!==null&&h!==null&&gs(h,$[1])?$[0]:(g.memoizedState=[w,h],w)}function xd(w,h){var g=js();h=h===void 0?null:h;var $=g.memoizedState;return $!==null&&h!==null&&gs(h,$[1])?$[0]:(w=w(),g.memoizedState=[w,h],w)}function Cl(w,h){var g=gr;gr=g!==0&&4>g?g:4,w(!0);var $=en.transition;en.transition={};try{w(!1),h()}finally{gr=g,en.transition=$}}function wd(){return js().memoizedState}function Uh(w,h,g){var $=vs(w);g={lane:$,action:g,hasEagerState:!1,eagerState:null,next:null},Ai(w)?mf(h,g):(Rp(w,h,g),g=Mr(),w=Rs(w,$,g),w!==null&&Al(w,h,$))}function ei(w,h,g){var $=vs(w),M={lane:$,action:g,hasEagerState:!1,eagerState:null,next:null};if(Ai(w))mf(h,M);else{Rp(w,h,M);var B=w.alternate;if(w.lanes===0&&(B===null||B.lanes===0)&&(B=h.lastRenderedReducer,B!==null))try{var V=h.lastRenderedState,ue=B(V,g);if(M.hasEagerState=!0,M.eagerState=ue,Un(ue,V))return}catch{}finally{}g=Mr(),w=Rs(w,$,g),w!==null&&Al(w,h,$)}}function Ai(w){var h=w.alternate;return w===jn||h!==null&&h===jn}function mf(w,h){yi=oo=!0;var g=w.pending;g===null?h.next=h:(h.next=g.next,g.next=h),w.pending=h}function Rp(w,h,g){qn!==null&&w.mode&1&&!(Ln&2)?(w=h.interleaved,w===null?(g.next=g,zn===null?zn=[h]:zn.push(h)):(g.next=w.next,w.next=g),h.interleaved=g):(w=h.pending,w===null?g.next=g:(g.next=w.next,w.next=g),h.pending=g)}function Al(w,h,g){if(g&4194240){var $=h.lanes;$&=w.pendingLanes,g|=$,h.lanes=g,xl(w,g)}}var nu={readContext:wi,useCallback:Pi,useContext:Pi,useEffect:Pi,useImperativeHandle:Pi,useInsertionEffect:Pi,useLayoutEffect:Pi,useMemo:Pi,useReducer:Pi,useRef:Pi,useState:Pi,useDebugValue:Pi,useDeferredValue:Pi,useTransition:Pi,useMutableSource:Pi,useSyncExternalStore:Pi,useId:Pi,unstable_isNewReconciler:!1},ju={readContext:wi,useCallback:function(w,h){return ha().memoizedState=[w,h===void 0?null:h],w},useContext:wi,useEffect:lo,useImperativeHandle:function(w,h,g){return g=g!=null?g.concat([w]):null,ud(4194308,4,cd.bind(null,h,w),g)},useLayoutEffect:function(w,h){return ud(4194308,4,w,h)},useInsertionEffect:function(w,h){return ud(4,2,w,h)},useMemo:function(w,h){var g=ha();return h=h===void 0?null:h,w=w(),g.memoizedState=[w,h],w},useReducer:function(w,h,g){var $=ha();return h=g!==void 0?g(h):h,$.memoizedState=$.baseState=h,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:h},$.queue=w,w=w.dispatch=Uh.bind(null,jn,w),[$.memoizedState,w]},useRef:function(w){var h=ha();return w={current:w},h.memoizedState=w},useState:Ph,useDebugValue:tu,useDeferredValue:function(w){var h=Ph(w),g=h[0],$=h[1];return lo(function(){var M=en.transition;en.transition={};try{$(w)}finally{en.transition=M}},[w]),g},useTransition:function(){var w=Ph(!1),h=w[0];return w=Cl.bind(null,w[1]),ha().memoizedState=w,[h,w]},useMutableSource:function(){},useSyncExternalStore:function(w,h,g){var $=jn,M=ha();if(vr){if(g===void 0)throw Error(o(407));g=g()}else{if(g=h(),qn===null)throw Error(o(349));Cn&30||qo($,h,g)}M.memoizedState=g;var B={value:g,getSnapshot:h};return M.queue=B,lo(Bh.bind(null,$,B,w),[w]),$.flags|=2048,dc(9,Pc.bind(null,$,B,g,h),void 0,null),g},useId:function(){var w=ha(),h=qn.identifierPrefix;if(vr){var g=Na,$=so;g=($&~(1<<32-Vs($)-1)).toString(32)+g,h=":"+h+"R"+g,g=ao++,0<g&&(h+="H"+g.toString(32)),h+=":"}else g=il++,h=":"+h+"r"+g.toString(32)+":";return w.memoizedState=h},unstable_isNewReconciler:!1},Xu={readContext:wi,useCallback:Fc,useContext:wi,useEffect:$l,useImperativeHandle:Vu,useInsertionEffect:Fh,useLayoutEffect:Fi,useMemo:xd,useReducer:Pa,useRef:Wu,useState:function(){return Pa(Fs)},useDebugValue:tu,useDeferredValue:function(w){var h=Pa(Fs),g=h[0],$=h[1];return $l(function(){var M=en.transition;en.transition={};try{$(w)}finally{en.transition=M}},[w]),g},useTransition:function(){var w=Pa(Fs)[0],h=js().memoizedState;return[w,h]},useMutableSource:_h,useSyncExternalStore:hc,useId:wd,unstable_isNewReconciler:!1},vh={readContext:wi,useCallback:Fc,useContext:wi,useEffect:$l,useImperativeHandle:Vu,useInsertionEffect:Fh,useLayoutEffect:Fi,useMemo:xd,useReducer:Nh,useRef:Wu,useState:function(){return Nh(Fs)},useDebugValue:tu,useDeferredValue:function(w){var h=Nh(Fs),g=h[0],$=h[1];return $l(function(){var M=en.transition;en.transition={};try{$(w)}finally{en.transition=M}},[w]),g},useTransition:function(){var w=Nh(Fs)[0],h=js().memoizedState;return[w,h]},useMutableSource:_h,useSyncExternalStore:hc,useId:wd,unstable_isNewReconciler:!1};function sl(w,h){try{var g="",$=h;do g+=br($),$=$.return;while($);var M=g}catch(B){M=`
Error generating stack: `+B.message+`
`+B.stack}return{value:w,source:h,stack:M}}function Zo(w,h){try{console.error(h.value)}catch(g){setTimeout(function(){throw g})}}var Ml=typeof WeakMap=="function"?WeakMap:Map;function Uc(w,h,g){g=Su(-1,g),g.tag=3,g.payload={element:null};var $=h.value;return g.callback=function(){Cu||(Cu=!0,Au=$),Zo(w,h)},g}function Il(w,h,g){g=Su(-1,g),g.tag=3;var $=w.type.getDerivedStateFromError;if(typeof $=="function"){var M=h.value;g.payload=function(){return $(M)},g.callback=function(){Zo(w,h)}}var B=w.stateNode;return B!==null&&typeof B.componentDidCatch=="function"&&(g.callback=function(){Zo(w,h),typeof $!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var V=h.stack;this.componentDidCatch(h.value,{componentStack:V!==null?V:""})}),g}function zc(w,h,g){var $=w.pingCache;if($===null){$=w.pingCache=new Ml;var M=new Set;$.set(h,M)}else M=$.get(h),M===void 0&&(M=new Set,$.set(h,M));M.has(g)||(M.add(g),w=Ks.bind(null,w,h,g),h.then(w,w))}function pc(w){do{var h;if((h=w.tag===13)&&(h=w.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return w;w=w.return}while(w!==null);return null}function $d(w,h,g,$,M){return w.mode&1?(w.flags|=65536,w.lanes=M,w):(w===h?w.flags|=65536:(w.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(h=Su(-1,1),h.tag=2,Gi(g,h))),g.lanes|=1),w)}function Ua(w){w.flags|=4}function Gr(w,h){if(w!==null&&w.child===h.child)return!0;if(h.flags&16)return!1;for(w=h.child;w!==null;){if(w.flags&12854||w.subtreeFlags&12854)return!1;w=w.sibling}return!0}var ol,Ji,da,Y;if(ct)ol=function(w,h){for(var g=h.child;g!==null;){if(g.tag===5||g.tag===6)he(w,g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Ji=function(){},da=function(w,h,g,$,M){if(w=w.memoizedProps,w!==$){var B=h.stateNode,V=Ba(ns.current);g=Fe(B,g,w,$,M,V),(h.updateQueue=g)&&Ua(h)}},Y=function(w,h,g,$){g!==$&&Ua(h)};else if(Pe){ol=function(w,h,g,$){for(var M=h.child;M!==null;){if(M.tag===5){var B=M.stateNode;g&&$&&(B=ir(B,M.type,M.memoizedProps,M)),he(w,B)}else if(M.tag===6)B=M.stateNode,g&&$&&(B=te(B,M.memoizedProps,M)),he(w,B);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)B=M.child,B!==null&&(B.return=M),ol(w,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===h)break;for(;M.sibling===null;){if(M.return===null||M.return===h)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};var Es=function(w,h,g,$){for(var M=h.child;M!==null;){if(M.tag===5){var B=M.stateNode;g&&$&&(B=ir(B,M.type,M.memoizedProps,M)),Lr(w,B)}else if(M.tag===6)B=M.stateNode,g&&$&&(B=te(B,M.memoizedProps,M)),Lr(w,B);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)B=M.child,B!==null&&(B.return=M),Es(w,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===h)break;for(;M.sibling===null;){if(M.return===null||M.return===h)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};Ji=function(w,h){var g=h.stateNode;if(!Gr(w,h)){w=g.containerInfo;var $=ii(w);Es($,h,!1,!1),g.pendingChildren=$,Ua(h),Si(w,$)}},da=function(w,h,g,$,M){var B=w.stateNode,V=w.memoizedProps;if((w=Gr(w,h))&&V===$)h.stateNode=B;else{var ue=h.stateNode,Me=Ba(ns.current),Qe=null;V!==$&&(Qe=Fe(ue,g,V,$,M,Me)),w&&Qe===null?h.stateNode=B:(B=Dn(B,Qe,g,V,$,h,w,ue),Se(B,g,$,M,Me)&&Ua(h),h.stateNode=B,w?Ua(h):ol(B,h,!1,!1))}},Y=function(w,h,g,$){g!==$?(w=Ba(wl.current),g=Ba(ns.current),h.stateNode=qe($,w,g,h),Ua(h)):h.stateNode=w.stateNode}}else Ji=function(){},da=function(){},Y=function(){};function pa(w,h){if(!vr)switch(w.tailMode){case"hidden":h=w.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?w.tail=null:g.sibling=null;break;case"collapsed":g=w.tail;for(var $=null;g!==null;)g.alternate!==null&&($=g),g=g.sibling;$===null?h||w.tail===null?w.tail=null:w.tail.sibling=null:$.sibling=null}}function xr(w){var h=w.alternate!==null&&w.alternate.child===w.child,g=0,$=0;if(h)for(var M=w.child;M!==null;)g|=M.lanes|M.childLanes,$|=M.subtreeFlags&14680064,$|=M.flags&14680064,M.return=w,M=M.sibling;else for(M=w.child;M!==null;)g|=M.lanes|M.childLanes,$|=M.subtreeFlags,$|=M.flags,M.return=w,M=M.sibling;return w.subtreeFlags|=$,w.childLanes=g,h}function dn(w,h,g){var $=h.pendingProps;switch(Oh(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xr(h),null;case 1:return ci(h.type)&&fs(),xr(h),null;case 3:return $=h.stateNode,xu(),Ar(mr),Ar(zr),Ne(),$.pendingContext&&($.context=$.pendingContext,$.pendingContext=null),(w===null||w.child===null)&&(rl(h)?Ua(h):w===null||w.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,ca!==null&&(bn(ca),ca=null))),Ji(w,h),xr(h),null;case 5:Ed(h),g=Ba(wl.current);var M=h.type;if(w!==null&&h.stateNode!=null)da(w,h,M,$,g),w.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!$){if(h.stateNode===null)throw Error(o(166));return xr(h),null}if(w=Ba(ns.current),rl(h)){if(!Ce)throw Error(o(175));w=zt(h.stateNode,h.type,h.memoizedProps,g,w,h,!Wi),h.updateQueue=w,w!==null&&Ua(h)}else{var B=ie(M,$,g,w,h);ol(B,h,!1,!1),h.stateNode=B,Se(B,M,$,g,w)&&Ua(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return xr(h),null;case 6:if(w&&h.stateNode!=null)Y(w,h,w.memoizedProps,$);else{if(typeof $!="string"&&h.stateNode===null)throw Error(o(166));if(w=Ba(wl.current),g=Ba(ns.current),rl(h)){if(!Ce)throw Error(o(176));if(w=h.stateNode,$=h.memoizedProps,(g=On(w,$,h,!Wi))&&(M=Hr,M!==null))switch(B=(M.mode&1)!==0,M.tag){case 3:Ia(M.stateNode.containerInfo,w,$,B);break;case 5:wo(M.type,M.memoizedProps,M.stateNode,w,$,B)}g&&Ua(h)}else h.stateNode=qe($,w,g,h)}return xr(h),null;case 13:if(Ar(hi),$=h.memoizedState,vr&&Ci!==null&&(h.mode&1)!==0&&(h.flags&128)===0){for(w=Ci;w;)w=Le(w);return Dc(),h.flags|=98560,h}if($!==null&&$.dehydrated!==null){if($=rl(h),w===null){if(!$)throw Error(o(318));if(!Ce)throw Error(o(344));if(w=h.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(o(317));tr(w,h)}else Dc(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return xr(h),null}return ca!==null&&(bn(ca),ca=null),h.flags&128?(h.lanes=g,h):($=$!==null,g=!1,w===null?rl(h):g=w.memoizedState!==null,$&&!g&&(h.child.flags|=8192,h.mode&1&&(w===null||hi.current&1?as===0&&(as=3):Wh())),h.updateQueue!==null&&(h.flags|=4),xr(h),null);case 4:return xu(),Ji(w,h),w===null&&it(h.stateNode.containerInfo),xr(h),null;case 10:return Tu(h.type._context),xr(h),null;case 17:return ci(h.type)&&fs(),xr(h),null;case 19:if(Ar(hi),M=h.memoizedState,M===null)return xr(h),null;if($=(h.flags&128)!==0,B=M.rendering,B===null)if($)pa(M,!1);else{if(as!==0||w!==null&&w.flags&128)for(w=h.child;w!==null;){if(B=ve(w),B!==null){for(h.flags|=128,pa(M,!1),w=B.updateQueue,w!==null&&(h.updateQueue=w,h.flags|=4),h.subtreeFlags=0,w=g,$=h.child;$!==null;)g=$,M=w,g.flags&=14680066,B=g.alternate,B===null?(g.childLanes=0,g.lanes=M,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=B.childLanes,g.lanes=B.lanes,g.child=B.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=B.memoizedProps,g.memoizedState=B.memoizedState,g.updateQueue=B.updateQueue,g.type=B.type,M=B.dependencies,g.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext}),$=$.sibling;return $n(hi,hi.current&1|2),h.child}w=w.sibling}M.tail!==null&&Ki()>dd&&(h.flags|=128,$=!0,pa(M,!1),h.lanes=4194304)}else{if(!$)if(w=ve(B),w!==null){if(h.flags|=128,$=!0,w=w.updateQueue,w!==null&&(h.updateQueue=w,h.flags|=4),pa(M,!0),M.tail===null&&M.tailMode==="hidden"&&!B.alternate&&!vr)return xr(h),null}else 2*Ki()-M.renderingStartTime>dd&&g!==1073741824&&(h.flags|=128,$=!0,pa(M,!1),h.lanes=4194304);M.isBackwards?(B.sibling=h.child,h.child=B):(w=M.last,w!==null?w.sibling=B:h.child=B,M.last=B)}return M.tail!==null?(h=M.tail,M.rendering=h,M.tail=h.sibling,M.renderingStartTime=Ki(),h.sibling=null,w=hi.current,$n(hi,$?w&1|2:w&1),h):(xr(h),null);case 22:case 23:return Bt(),$=h.memoizedState!==null,w!==null&&w.memoizedState!==null!==$&&(h.flags|=8192),$&&h.mode&1?Jr&1073741824&&(xr(h),ct&&h.subtreeFlags&6&&(h.flags|=8192)):xr(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var kp=l.ReactCurrentOwner,al=!1;function Mi(w,h,g,$){h.child=w===null?Nc(h,null,g,$):Dh(h,w.child,g,$)}function li(w,h,g,$,M){g=g.render;var B=h.ref;return Bi(h,M),$=wu(w,h,g,$,B,M),g=Xn(),w!==null&&!al?(h.updateQueue=w.updateQueue,h.flags&=-2053,w.lanes&=~M,di(w,h,M)):(vr&&g&&ql(h),h.flags|=1,Mi(w,h,$,M),h.child)}function qi(w,h,g,$,M){if(w===null){var B=g.type;return typeof B=="function"&&!go(B)&&B.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(h.tag=15,h.type=B,rs(w,h,B,$,M)):(w=_o(g.type,null,$,h,h.mode,M),w.ref=h.ref,w.return=h,h.child=w)}if(B=w.child,(w.lanes&M)===0){var V=B.memoizedProps;if(g=g.compare,g=g!==null?g:Uu,g(V,$)&&w.ref===h.ref)return di(w,h,M)}return h.flags|=1,w=Ll(B,$),w.ref=h.ref,w.return=h,h.child=w}function rs(w,h,g,$,M){if(w!==null&&Uu(w.memoizedProps,$)&&w.ref===h.ref)if(al=!1,(w.lanes&M)!==0)w.flags&131072&&(al=!0);else return h.lanes=w.lanes,di(w,h,M);return ma(w,h,g,$,M)}function Hc(w,h,g){var $=h.pendingProps,M=$.children,B=w!==null?w.memoizedState:null;if($.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},$n(Mo,Jr),Jr|=g;else if(g&1073741824)h.memoizedState={baseLanes:0,cachePool:null},$=B!==null?B.baseLanes:g,$n(Mo,Jr),Jr|=$;else return w=B!==null?B.baseLanes|g:g,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:w,cachePool:null},h.updateQueue=null,$n(Mo,Jr),Jr|=w,null;else B!==null?($=B.baseLanes|g,h.memoizedState=null):$=g,$n(Mo,Jr),Jr|=$;return Mi(w,h,M,g),h.child}function fa(w,h){var g=h.ref;(w===null&&g!==null||w!==null&&w.ref!==g)&&(h.flags|=512,h.flags|=2097152)}function ma(w,h,g,$,M){var B=ci(g)?Ni:zr.current;return B=Ts(h,B),Bi(h,M),g=wu(w,h,g,$,B,M),$=Xn(),w!==null&&!al?(h.updateQueue=w.updateQueue,h.flags&=-2053,w.lanes&=~M,di(w,h,M)):(vr&&$&&ql(h),h.flags|=1,Mi(w,h,g,M),h.child)}function is(w,h,g,$,M){if(ci(g)){var B=!0;uc(h)}else B=!1;if(Bi(h,M),h.stateNode===null)w!==null&&(w.alternate=null,h.alternate=null,h.flags|=2),Ip(h,g,$),Sd(h,g,$,M),$=!0;else if(w===null){var V=h.stateNode,ue=h.memoizedProps;V.props=ue;var Me=V.context,Qe=g.contextType;typeof Qe=="object"&&Qe!==null?Qe=wi(Qe):(Qe=ci(g)?Ni:zr.current,Qe=Ts(h,Qe));var Et=g.getDerivedStateFromProps,Jt=typeof Et=="function"||typeof V.getSnapshotBeforeUpdate=="function";Jt||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(ue!==$||Me!==Qe)&&ff(h,V,$,Qe),$i=!1;var an=h.memoizedState;V.state=an,cr(h,$,V,M),Me=h.memoizedState,ue!==$||an!==Me||mr.current||$i?(typeof Et=="function"&&(tp(h,g,Et,$),Me=h.memoizedState),(ue=$i||np(h,g,ue,$,an,Me,Qe))?(Jt||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(h.flags|=4194308)):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=$,h.memoizedState=Me),V.props=$,V.state=Me,V.context=Qe,$=ue):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),$=!1)}else{V=h.stateNode,od(w,h),ue=h.memoizedProps,Qe=h.type===h.elementType?ue:Ms(h.type,ue),V.props=Qe,Jt=h.pendingProps,an=V.context,Me=g.contextType,typeof Me=="object"&&Me!==null?Me=wi(Me):(Me=ci(g)?Ni:zr.current,Me=Ts(h,Me));var _n=g.getDerivedStateFromProps;(Et=typeof _n=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(ue!==Jt||an!==Me)&&ff(h,V,$,Me),$i=!1,an=h.memoizedState,V.state=an,cr(h,$,V,M);var vn=h.memoizedState;ue!==Jt||an!==vn||mr.current||$i?(typeof _n=="function"&&(tp(h,g,_n,$),vn=h.memoizedState),(Qe=$i||np(h,g,Qe,$,an,vn,Me)||!1)?(Et||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate($,vn,Me),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate($,vn,Me)),typeof V.componentDidUpdate=="function"&&(h.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof V.componentDidUpdate!="function"||ue===w.memoizedProps&&an===w.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||ue===w.memoizedProps&&an===w.memoizedState||(h.flags|=1024),h.memoizedProps=$,h.memoizedState=vn),V.props=$,V.state=vn,V.context=Me,$=Qe):(typeof V.componentDidUpdate!="function"||ue===w.memoizedProps&&an===w.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||ue===w.memoizedProps&&an===w.memoizedState||(h.flags|=1024),$=!1)}return Gc(w,h,g,$,B,M)}function Gc(w,h,g,$,M,B){fa(w,h);var V=(h.flags&128)!==0;if(!$&&!V)return M&&cc(h,g,!1),di(w,h,B);$=h.stateNode,kp.current=h;var ue=V&&typeof g.getDerivedStateFromError!="function"?null:$.render();return h.flags|=1,w!==null&&V?(h.child=Dh(h,w.child,null,B),h.child=Dh(h,null,ue,B)):Mi(w,h,ue,B),h.memoizedState=$.state,M&&cc(h,g,!0),h.child}function ea(w){var h=w.stateNode;h.pendingContext?Qa(w,h.pendingContext,h.pendingContext!==h.context):h.context&&Qa(w,h.context,!1),eu(w,h.containerInfo)}function Cd(w,h,g,$,M){return Dc(),Lh(M),h.flags|=256,Mi(w,h,g,$),h.child}var Ad={dehydrated:null,treeContext:null,retryLane:0};function zh(w){return{baseLanes:w,cachePool:null}}function Us(w,h,g){var $=h.pendingProps,M=hi.current,B=!1,V=(h.flags&128)!==0,ue;if((ue=V)||(ue=w!==null&&w.memoizedState===null?!1:(M&2)!==0),ue?(B=!0,h.flags&=-129):(w===null||w.memoizedState!==null)&&(M|=1),$n(hi,M&1),w===null)return ld(h),w=h.memoizedState,w!==null&&(w=w.dehydrated,w!==null)?(h.mode&1?rn(w)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(M=$.children,w=$.fallback,B?($=h.mode,B=h.child,M={mode:"hidden",children:M},!($&1)&&B!==null?(B.childLanes=0,B.pendingProps=M):B=Va(M,$,0,null),w=Dl(w,$,g,null),B.return=h,w.return=h,B.sibling=w,h.child=B,h.child.memoizedState=zh(g),h.memoizedState=Ad,w):Vn(h,M));if(M=w.memoizedState,M!==null){if(ue=M.dehydrated,ue!==null){if(V)return h.flags&256?(h.flags&=-257,Ui(w,h,g,Error(o(422)))):h.memoizedState!==null?(h.child=w.child,h.flags|=128,null):(B=$.fallback,M=h.mode,$=Va({mode:"visible",children:$.children},M,0,null),B=Dl(B,M,g,null),B.flags|=2,$.return=h,B.return=h,$.sibling=B,h.child=$,h.mode&1&&Dh(h,w.child,null,g),h.child.memoizedState=zh(g),h.memoizedState=Ad,B);if(!(h.mode&1))h=Ui(w,h,g,null);else if(rn(ue))h=Ui(w,h,g,Error(o(419)));else if($=(g&w.childLanes)!==0,al||$){if($=qn,$!==null){switch(g&-g){case 4:B=2;break;case 16:B=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:B=32;break;case 536870912:B=268435456;break;default:B=0}$=B&($.suspendedLanes|g)?0:B,$!==0&&$!==M.retryLane&&(M.retryLane=$,Rs(w,$,-1))}Wh(),h=Ui(w,h,g,Error(o(421)))}else Ft(ue)?(h.flags|=128,h.child=w.child,h=Eh.bind(null,w),Rn(ue,h),h=null):(g=M.treeContext,Ce&&(Ci=Tt(ue),Hr=h,vr=!0,ca=null,Wi=!1,g!==null&&(Da[ai++]=so,Da[ai++]=Na,Da[ai++]=Sr,so=g.id,Na=g.overflow,Sr=h)),h=Vn(h,h.pendingProps.children),h.flags|=4096);return h}return B?($=Xs(w,h,$.children,$.fallback,g),B=h.child,M=w.child.memoizedState,B.memoizedState=M===null?zh(g):{baseLanes:M.baseLanes|g,cachePool:null},B.childLanes=w.childLanes&~g,h.memoizedState=Ad,$):(g=zs(w,h,$.children,g),h.memoizedState=null,g)}return B?($=Xs(w,h,$.children,$.fallback,g),B=h.child,M=w.child.memoizedState,B.memoizedState=M===null?zh(g):{baseLanes:M.baseLanes|g,cachePool:null},B.childLanes=w.childLanes&~g,h.memoizedState=Ad,$):(g=zs(w,h,$.children,g),h.memoizedState=null,g)}function Vn(w,h){return h=Va({mode:"visible",children:h},w.mode,0,null),h.return=w,w.child=h}function zs(w,h,g,$){var M=w.child;return w=M.sibling,g=Ll(M,{mode:"visible",children:g}),!(h.mode&1)&&(g.lanes=$),g.return=h,g.sibling=null,w!==null&&($=h.deletions,$===null?(h.deletions=[w],h.flags|=16):$.push(w)),h.child=g}function Xs(w,h,g,$,M){var B=h.mode;w=w.child;var V=w.sibling,ue={mode:"hidden",children:g};return!(B&1)&&h.child!==w?(g=h.child,g.childLanes=0,g.pendingProps=ue,h.deletions=null):(g=Ll(w,ue),g.subtreeFlags=w.subtreeFlags&14680064),V!==null?$=Ll(V,$):($=Dl($,B,M,null),$.flags|=2),$.return=h,g.return=h,g.sibling=$,h.child=g,$}function Ui(w,h,g,$){return $!==null&&Lh($),Dh(h,w.child,null,g),w=Vn(h,h.pendingProps.children),w.flags|=2,h.memoizedState=null,w}function ru(w,h,g){w.lanes|=h;var $=w.alternate;$!==null&&($.lanes|=h),nl(w.return,h,g)}function Uo(w,h,g,$,M){var B=w.memoizedState;B===null?w.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:$,tail:g,tailMode:M}:(B.isBackwards=h,B.rendering=null,B.renderingStartTime=0,B.last=$,B.tail=g,B.tailMode=M)}function Sn(w,h,g){var $=h.pendingProps,M=$.revealOrder,B=$.tail;if(Mi(w,h,$.children,g),$=hi.current,($&2)!==0)$=$&1|2,h.flags|=128;else{if(w!==null&&w.flags&128)e:for(w=h.child;w!==null;){if(w.tag===13)w.memoizedState!==null&&ru(w,g,h);else if(w.tag===19)ru(w,g,h);else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===h)break e;for(;w.sibling===null;){if(w.return===null||w.return===h)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}$&=1}if($n(hi,$),(h.mode&1)===0)h.memoizedState=null;else switch(M){case"forwards":for(g=h.child,M=null;g!==null;)w=g.alternate,w!==null&&ve(w)===null&&(M=g),g=g.sibling;g=M,g===null?(M=h.child,h.child=null):(M=g.sibling,g.sibling=null),Uo(h,!1,M,g,B);break;case"backwards":for(g=null,M=h.child,h.child=null;M!==null;){if(w=M.alternate,w!==null&&ve(w)===null){h.child=M;break}w=M.sibling,M.sibling=g,g=M,M=w}Uo(h,!0,g,null,B);break;case"together":Uo(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function di(w,h,g){if(w!==null&&(h.dependencies=w.dependencies),ou|=h.lanes,(g&h.childLanes)===0)return null;if(w!==null&&h.child!==w.child)throw Error(o(153));if(h.child!==null){for(w=h.child,g=Ll(w,w.pendingProps),h.child=g,g.return=h;w.sibling!==null;)w=w.sibling,g=g.sibling=Ll(w,w.pendingProps),g.return=h;g.sibling=null}return h.child}function pi(w,h,g){switch(h.tag){case 3:ea(h),Dc();break;case 5:gh(h);break;case 1:ci(h.type)&&uc(h);break;case 4:eu(h,h.stateNode.containerInfo);break;case 10:$o(h,h.type._context,h.memoizedProps.value);break;case 13:var $=h.memoizedState;if($!==null)return $.dehydrated!==null?($n(hi,hi.current&1),h.flags|=128,null):g&h.child.childLanes?Us(w,h,g):($n(hi,hi.current&1),w=di(w,h,g),w!==null?w.sibling:null);$n(hi,hi.current&1);break;case 19:if($=(g&h.childLanes)!==0,(w.flags&128)!==0){if($)return Sn(w,h,g);h.flags|=128}var M=h.memoizedState;if(M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),$n(hi,hi.current),$)break;return null;case 22:case 23:return h.lanes=0,Hc(w,h,g)}return di(w,h,g)}function Op(w,h){switch(Oh(h),h.tag){case 1:return ci(h.type)&&fs(),w=h.flags,w&65536?(h.flags=w&-65537|128,h):null;case 3:return xu(),Ar(mr),Ar(zr),Ne(),w=h.flags,w&65536&&!(w&128)?(h.flags=w&-65537|128,h):null;case 5:return Ed(h),null;case 13:if(Ar(hi),w=h.memoizedState,w!==null&&w.dehydrated!==null){if(h.alternate===null)throw Error(o(340));Dc()}return w=h.flags,w&65536?(h.flags=w&-65537|128,h):null;case 19:return Ar(hi),null;case 4:return xu(),null;case 10:return Tu(h.type._context),null;case 22:case 23:return Bt(),null;case 24:return null;default:return null}}var yh=!1,uo=!1,ga=typeof WeakSet=="function"?WeakSet:Set,xn=null;function gn(w,h){var g=w.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch($){Io(w,h,$)}else g.current=null}function ll(w,h,g){try{g()}catch($){Io(w,h,$)}}var fc=!1;function gf(w,h){for(J(w.containerInfo),xn=h;xn!==null;)if(w=xn,h=w.child,(w.subtreeFlags&1028)!==0&&h!==null)h.return=w,xn=h;else for(;xn!==null;){w=xn;try{var g=w.alternate;if(w.flags&1024)switch(w.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var $=g.memoizedProps,M=g.memoizedState,B=w.stateNode,V=B.getSnapshotBeforeUpdate(w.elementType===w.type?$:Ms(w.type,$),M);B.__reactInternalSnapshotBeforeUpdate=V}break;case 3:ct&&Xt(w.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ue){Io(w,w.return,ue)}if(h=w.sibling,h!==null){h.return=w.return,xn=h;break}xn=w.return}return g=fc,fc=!1,g}function iu(w,h,g){var $=h.updateQueue;if($=$!==null?$.lastEffect:null,$!==null){var M=$=$.next;do{if((M.tag&w)===w){var B=M.destroy;M.destroy=void 0,B!==void 0&&ll(h,g,B)}M=M.next}while(M!==$)}}function Co(w,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&w)===w){var $=g.create;g.destroy=$()}g=g.next}while(g!==h)}}function _s(w){var h=w.ref;if(h!==null){var g=w.stateNode;switch(w.tag){case 5:w=pe(g);break;default:w=g}typeof h=="function"?h(w):h.current=w}}function ul(w,h,g){if(aa&&typeof aa.onCommitFiberUnmount=="function")try{aa.onCommitFiberUnmount(Pu,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(w=h.updateQueue,w!==null&&(w=w.lastEffect,w!==null)){var $=w=w.next;do{var M=$,B=M.destroy;M=M.tag,B!==void 0&&(M&2||M&4)&&ll(h,g,B),$=$.next}while($!==w)}break;case 1:if(gn(h,g),w=h.stateNode,typeof w.componentWillUnmount=="function")try{w.props=h.memoizedProps,w.state=h.memoizedState,w.componentWillUnmount()}catch(V){Io(h,g,V)}break;case 5:gn(h,g);break;case 4:ct?Wc(w,h,g):Pe&&Pe&&(h=h.stateNode.containerInfo,g=ii(h),Er(h,g))}}function ss(w,h,g){for(var $=h;;)if(ul(w,$,g),$.child===null||ct&&$.tag===4){if($===h)break;for(;$.sibling===null;){if($.return===null||$.return===h)return;$=$.return}$.sibling.return=$.return,$=$.sibling}else $.child.return=$,$=$.child}function cl(w){var h=w.alternate;h!==null&&(w.alternate=null,cl(h)),w.child=null,w.deletions=null,w.sibling=null,w.tag===5&&(h=w.stateNode,h!==null&&vt(h)),w.stateNode=null,w.return=null,w.dependencies=null,w.memoizedProps=null,w.memoizedState=null,w.pendingProps=null,w.stateNode=null,w.updateQueue=null}function zo(w){return w.tag===5||w.tag===3||w.tag===4}function Hh(w){e:for(;;){for(;w.sibling===null;){if(w.return===null||zo(w.return))return null;w=w.return}for(w.sibling.return=w.return,w=w.sibling;w.tag!==5&&w.tag!==6&&w.tag!==18;){if(w.flags&2||w.child===null||w.tag===4)continue e;w.child.return=w,w=w.child}if(!(w.flags&2))return w.stateNode}}function za(w){if(ct){e:{for(var h=w.return;h!==null;){if(zo(h))break e;h=h.return}throw Error(o(160))}var g=h;switch(g.tag){case 5:h=g.stateNode,g.flags&32&&(jt(h),g.flags&=-33),g=Hh(w),Md(w,g,h);break;case 3:case 4:h=g.stateNode.containerInfo,g=Hh(w),Ii(w,g,h);break;default:throw Error(o(161))}}}function Ii(w,h,g){var $=w.tag;if($===5||$===6)w=w.stateNode,h?de(g,w,h):pt(g,w);else if($!==4&&(w=w.child,w!==null))for(Ii(w,h,g),w=w.sibling;w!==null;)Ii(w,h,g),w=w.sibling}function Md(w,h,g){var $=w.tag;if($===5||$===6)w=w.stateNode,h?ee(g,w,h):Mt(g,w);else if($!==4&&(w=w.child,w!==null))for(Md(w,h,g),w=w.sibling;w!==null;)Md(w,h,g),w=w.sibling}function Wc(w,h,g){for(var $=h,M=!1,B,V;;){if(!M){M=$.return;e:for(;;){if(M===null)throw Error(o(160));switch(B=M.stateNode,M.tag){case 5:V=!1;break e;case 3:B=B.containerInfo,V=!0;break e;case 4:B=B.containerInfo,V=!0;break e}M=M.return}M=!0}if($.tag===5||$.tag===6)ss(w,$,g),V?Je(B,$.stateNode):Ae(B,$.stateNode);else if($.tag===18)V?jr(B,$.stateNode):Dr(B,$.stateNode);else if($.tag===4){if($.child!==null){B=$.stateNode.containerInfo,V=!0,$.child.return=$,$=$.child;continue}}else if(ul(w,$,g),$.child!==null){$.child.return=$,$=$.child;continue}if($===h)break;for(;$.sibling===null;){if($.return===null||$.return===h)return;$=$.return,$.tag===4&&(M=!1)}$.sibling.return=$.return,$=$.sibling}}function Gh(w,h){if(ct){switch(h.tag){case 0:case 11:case 14:case 15:iu(3,h,h.return),Co(3,h),iu(5,h,h.return);return;case 1:return;case 5:var g=h.stateNode;if(g!=null){var $=h.memoizedProps;w=w!==null?w.memoizedProps:$;var M=h.type,B=h.updateQueue;h.updateQueue=null,B!==null&&q(g,B,M,w,$,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));g=h.memoizedProps,Ke(h.stateNode,w!==null?w.memoizedProps:g,g);return;case 3:Ce&&w!==null&&w.memoizedState.isDehydrated&&Rr(h.stateNode.containerInfo);return;case 12:return;case 13:Ho(h);return;case 19:Ho(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:iu(3,h,h.return),Co(3,h),iu(5,h,h.return);return;case 12:return;case 13:Ho(h);return;case 19:Ho(h);return;case 3:Ce&&w!==null&&w.memoizedState.isDehydrated&&Rr(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(Pe){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,Er(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function Ho(w){var h=w.updateQueue;if(h!==null){w.updateQueue=null;var g=w.stateNode;g===null&&(g=w.stateNode=new ga),h.forEach(function($){var M=mo.bind(null,w,$);g.has($)||(g.add($),$.then(M,M))})}}function Ao(w,h){for(xn=h;xn!==null;){h=xn;var g=h.deletions;if(g!==null)for(var $=0;$<g.length;$++){var M=g[$];try{var B=w;ct?Wc(B,M,h):ss(B,M,h);var V=M.alternate;V!==null&&(V.return=null),M.return=null}catch(Ut){Io(M,h,Ut)}}if(g=h.child,(h.subtreeFlags&12854)!==0&&g!==null)g.return=h,xn=g;else for(;xn!==null;){h=xn;try{var ue=h.flags;if(ue&32&&ct&&jt(h.stateNode),ue&512){var Me=h.alternate;if(Me!==null){var Qe=Me.ref;Qe!==null&&(typeof Qe=="function"?Qe(null):Qe.current=null)}}if(ue&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var Et=h.alternate;(Et===null||Et.memoizedState===null)&&(co=Ki())}break;case 22:var Jt=h.memoizedState!==null,an=h.alternate,_n=an!==null&&an.memoizedState!==null;if(g=h,ct){e:if($=g,M=Jt,B=null,ct)for(var vn=$;;){if(vn.tag===5){if(B===null){B=vn;var pn=vn.stateNode;M?ze(pn):_t(vn.stateNode,vn.memoizedProps)}}else if(vn.tag===6){if(B===null){var Or=vn.stateNode;M?Yt(Or):Kt(Or,vn.memoizedProps)}}else if((vn.tag!==22&&vn.tag!==23||vn.memoizedState===null||vn===$)&&vn.child!==null){vn.child.return=vn,vn=vn.child;continue}if(vn===$)break;for(;vn.sibling===null;){if(vn.return===null||vn.return===$)break e;B===vn&&(B=null),vn=vn.return}B===vn&&(B=null),vn.sibling.return=vn.return,vn=vn.sibling}}if(Jt&&!_n&&g.mode&1){xn=g;for(var St=g.child;St!==null;){for(g=xn=St;xn!==null;){$=xn;var we=$.child;switch($.tag){case 0:case 11:case 14:case 15:iu(4,$,$.return);break;case 1:gn($,$.return);var Re=$.stateNode;if(typeof Re.componentWillUnmount=="function"){var nt=$.return;try{Re.props=$.memoizedProps,Re.state=$.memoizedState,Re.componentWillUnmount()}catch(Ut){Io($,nt,Ut)}}break;case 5:gn($,$.return);break;case 22:if($.memoizedState!==null){hd(g);continue}}we!==null?(we.return=$,xn=we):hd(g)}St=St.sibling}}}switch(ue&4102){case 2:za(h),h.flags&=-3;break;case 6:za(h),h.flags&=-3,Gh(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,Gh(h.alternate,h);break;case 4:Gh(h.alternate,h)}}catch(Ut){Io(h,h.return,Ut)}if(g=h.sibling,g!==null){g.return=h.return,xn=g;break}xn=h.return}}}function sp(w,h,g){xn=w,$u(w)}function $u(w,h,g){for(var $=(w.mode&1)!==0;xn!==null;){var M=xn,B=M.child;if(M.tag===22&&$){var V=M.memoizedState!==null||yh;if(!V){var ue=M.alternate,Me=ue!==null&&ue.memoizedState!==null||uo;ue=yh;var Qe=uo;if(yh=V,(uo=Me)&&!Qe)for(xn=M;xn!==null;)V=xn,Me=V.child,V.tag===22&&V.memoizedState!==null?mc(M):Me!==null?(Me.return=V,xn=Me):mc(M);for(;B!==null;)xn=B,$u(B),B=B.sibling;xn=M,yh=ue,uo=Qe}Rl(w)}else M.subtreeFlags&8772&&B!==null?(B.return=M,xn=B):Rl(w)}}function Rl(w){for(;xn!==null;){var h=xn;if(h.flags&8772){var g=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:uo||Co(5,h);break;case 1:var $=h.stateNode;if(h.flags&4&&!uo)if(g===null)$.componentDidMount();else{var M=h.elementType===h.type?g.memoizedProps:Ms(h.type,g.memoizedProps);$.componentDidUpdate(M,g.memoizedState,$.__reactInternalSnapshotBeforeUpdate)}var B=h.updateQueue;B!==null&&Jo(h,B,$);break;case 3:var V=h.updateQueue;if(V!==null){if(g=null,h.child!==null)switch(h.child.tag){case 5:g=pe(h.child.stateNode);break;case 1:g=h.child.stateNode}Jo(h,V,g)}break;case 5:var ue=h.stateNode;g===null&&h.flags&4&&Ie(ue,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(Ce&&h.memoizedState===null){var Me=h.alternate;if(Me!==null){var Qe=Me.memoizedState;if(Qe!==null){var Et=Qe.dehydrated;Et!==null&&Li(Et)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}uo||h.flags&512&&_s(h)}catch(Jt){Io(h,h.return,Jt)}}if(h===w){xn=null;break}if(g=h.sibling,g!==null){g.return=h.return,xn=g;break}xn=h.return}}function hd(w){for(;xn!==null;){var h=xn;if(h===w){xn=null;break}var g=h.sibling;if(g!==null){g.return=h.return,xn=g;break}xn=h.return}}function mc(w){for(;xn!==null;){var h=xn;try{switch(h.tag){case 0:case 11:case 15:var g=h.return;try{Co(4,h)}catch(Me){Io(h,g,Me)}break;case 1:var $=h.stateNode;if(typeof $.componentDidMount=="function"){var M=h.return;try{$.componentDidMount()}catch(Me){Io(h,M,Me)}}var B=h.return;try{_s(h)}catch(Me){Io(h,B,Me)}break;case 5:var V=h.return;try{_s(h)}catch(Me){Io(h,V,Me)}}}catch(Me){Io(h,h.return,Me)}if(h===w){xn=null;break}var ue=h.sibling;if(ue!==null){ue.return=h.return,xn=ue;break}xn=h.return}}var Yr=0,su=1,Yu=2,os=3,Ha=4;if(typeof Symbol=="function"&&Symbol.for){var xs=Symbol.for;Yr=xs("selector.component"),su=xs("selector.has_pseudo_class"),Yu=xs("selector.role"),os=xs("selector.test_id"),Ha=xs("selector.text")}function ws(w){var h=je(w);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(w=$t(w),w===null)throw Error(o(362));return w.stateNode.current}function Vc(w,h){switch(h.$$typeof){case Yr:if(w.type===h.value)return!0;break;case su:e:{h=h.value,w=[w,0];for(var g=0;g<w.length;){var $=w[g++],M=w[g++],B=h[M];if($.tag!==5||!re($)){for(;B!=null&&Vc($,B);)M++,B=h[M];if(M===h.length){h=!0;break e}else for($=$.child;$!==null;)w.push($,M),$=$.sibling}}h=!1}return h;case Yu:if(w.tag===5&&Be(w.stateNode,h.value))return!0;break;case Ha:if((w.tag===5||w.tag===6)&&(w=xe(w),w!==null&&0<=w.indexOf(h.value)))return!0;break;case os:if(w.tag===5&&(w=w.memoizedProps["data-testname"],typeof w=="string"&&w.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function fi(w){switch(w.$$typeof){case Yr:return"<"+(W(w.value)||"Unknown")+">";case su:return":has("+(fi(w)||"")+")";case Yu:return'[role="'+w.value+'"]';case Ha:return'"'+w.value+'"';case os:return'[data-testname="'+w.value+'"]';default:throw Error(o(365))}}function Ga(w,h){var g=[];w=[w,0];for(var $=0;$<w.length;){var M=w[$++],B=w[$++],V=h[B];if(M.tag!==5||!re(M)){for(;V!=null&&Vc(M,V);)B++,V=h[B];if(B===h.length)g.push(M);else for(M=M.child;M!==null;)w.push(M,B),M=M.sibling}}return g}function gc(w,h){if(!kt)throw Error(o(363));w=ws(w),w=Ga(w,h),h=[],w=Array.from(w);for(var g=0;g<w.length;){var $=w[g++];if($.tag===5)re($)||h.push($.stateNode);else for($=$.child;$!==null;)w.push($),$=$.sibling}return h}var op=Math.ceil,bh=l.ReactCurrentDispatcher,ta=l.ReactCurrentOwner,Vi=l.ReactCurrentBatchConfig,Ln=0,qn=null,kr=null,ti=0,Jr=0,Mo=Di(0),as=0,Qi=null,ou=0,Ku=0,_c=0,Ju=null,Ys=null,co=0,dd=1/0;function _a(){dd=Ki()+500}var Cu=!1,Au=null,ho=null,po=!1,kl=null,Go=0,qu=0,Qu=null,Th=-1,Sh=0;function Mr(){return Ln&6?Ki():Th!==-1?Th:Th=Ki()}function vs(w){return w.mode&1?Ln&2&&ti!==0?ti&-ti:la.transition!==null?(Sh===0&&(w=hh,hh<<=1,!(hh&4194240)&&(hh=64),Sh=w),Sh):(w=gr,w!==0?w:ot()):1}function Rs(w,h,g){if(50<qu)throw qu=0,Qu=null,Error(o(185));var $=Wa(w,h);return $===null?null:(gu($,h,g),(!(Ln&2)||$!==qn)&&($===qn&&(!(Ln&2)&&(Ku|=h),as===4&&$s($,ti)),Hs($,g),h===1&&Ln===0&&!(w.mode&1)&&(_a(),io&&Oa())),$)}function Wa(w,h){w.lanes|=h;var g=w.alternate;for(g!==null&&(g.lanes|=h),g=w,w=w.return;w!==null;)w.childLanes|=h,g=w.alternate,g!==null&&(g.childLanes|=h),g=w,w=w.return;return g.tag===3?g.stateNode:null}function Hs(w,h){var g=w.callbackNode;dh(w,h);var $=Ei(w,w===qn?ti:0);if($===0)g!==null&&Za(g),w.callbackNode=null,w.callbackPriority=0;else if(h=$&-$,w.callbackPriority!==h){if(g!=null&&Za(g),h===1)w.tag===0?ph(au.bind(null,w)):yu(au.bind(null,w)),It?yt(function(){Ln===0&&Oa()}):Yl(ms,Oa),g=null;else{switch(_r($)){case 1:g=ms;break;case 4:g=tl;break;case 16:g=Td;break;case 536870912:g=ro;break;default:g=Td}g=Jc(g,cn.bind(null,w))}w.callbackPriority=h,w.callbackNode=g}}function cn(w,h){if(Th=-1,Sh=0,(Ln&6)!==0)throw Error(o(327));var g=w.callbackNode;if(vc()&&w.callbackNode!==g)return null;var $=Ei(w,w===qn?ti:0);if($===0)return null;if($&30||$&w.expiredLanes||h)h=Xc(w,$);else{h=$;var M=Ln;Ln|=2;var B=Zu();(qn!==w||ti!==h)&&(_a(),hl(w,h));do try{ji();break}catch(ue){Wr(w,ue)}while(!0);bu(),bh.current=B,Ln=M,kr!==null?h=0:(qn=null,ti=0,h=as)}if(h!==0){if(h===2&&(M=Oc(w),M!==0&&($=M,h=jc(w,M))),h===1)throw g=Qi,hl(w,0),$s(w,$),Hs(w,Ki()),g;if(h===6)$s(w,$);else{if(M=w.current.alternate,($&30)===0&&!mi(M)&&(h=Xc(w,$),h===2&&(B=Oc(w),B!==0&&($=B,h=jc(w,B))),h===1))throw g=Qi,hl(w,0),$s(w,$),Hs(w,Ki()),g;switch(w.finishedWork=M,w.finishedLanes=$,h){case 0:case 1:throw Error(o(345));case 2:dl(w,Ys);break;case 3:if($s(w,$),($&130023424)===$&&(h=co+500-Ki(),10<h)){if(Ei(w,0)!==0)break;if(M=w.suspendedLanes,(M&$)!==$){Mr(),w.pingedLanes|=w.suspendedLanes&M;break}w.timeoutHandle=De(dl.bind(null,w,Ys),h);break}dl(w,Ys);break;case 4:if($s(w,$),($&4194240)===$)break;for(h=w.eventTimes,M=-1;0<$;){var V=31-Vs($);B=1<<V,V=h[V],V>M&&(M=V),$&=~B}if($=M,$=Ki()-$,$=(120>$?120:480>$?480:1080>$?1080:1920>$?1920:3e3>$?3e3:4320>$?4320:1960*op($/1960))-$,10<$){w.timeoutHandle=De(dl.bind(null,w,Ys),$);break}dl(w,Ys);break;case 5:dl(w,Ys);break;default:throw Error(o(329))}}}return Hs(w,Ki()),w.callbackNode===g?cn.bind(null,w):null}function jc(w,h){var g=Ju;return w.current.memoizedState.isDehydrated&&(hl(w,h).flags|=256),w=Xc(w,h),w!==2&&(h=Ys,Ys=g,h!==null&&bn(h)),w}function bn(w){Ys===null?Ys=w:Ys.push.apply(Ys,w)}function mi(w){for(var h=w;;){if(h.flags&16384){var g=h.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var $=0;$<g.length;$++){var M=g[$],B=M.getSnapshot;M=M.value;try{if(!Un(B(),M))return!1}catch{return!1}}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===w)break;for(;h.sibling===null;){if(h.return===null||h.return===w)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function $s(w,h){for(h&=~_c,h&=~Ku,w.suspendedLanes|=h,w.pingedLanes&=~h,w=w.expirationTimes;0<h;){var g=31-Vs(h),$=1<<g;w[g]=-1,h&=~$}}function au(w){if(Ln&6)throw Error(o(327));vc();var h=Ei(w,0);if(!(h&1))return Hs(w,Ki()),null;var g=Xc(w,h);if(w.tag!==0&&g===2){var $=Oc(w);$!==0&&(h=$,g=jc(w,$))}if(g===1)throw g=Qi,hl(w,0),$s(w,h),Hs(w,Ki()),g;if(g===6)throw Error(o(345));return w.finishedWork=w.current.alternate,w.finishedLanes=h,dl(w,Ys),Hs(w,Ki()),null}function Ol(w){kl!==null&&kl.tag===0&&!(Ln&6)&&vc();var h=Ln;Ln|=1;var g=Vi.transition,$=gr;try{if(Vi.transition=null,gr=1,w)return w()}finally{gr=$,Vi.transition=g,Ln=h,!(Ln&6)&&Oa()}}function Bt(){Jr=Mo.current,Ar(Mo)}function hl(w,h){w.finishedWork=null,w.finishedLanes=0;var g=w.timeoutHandle;if(g!==tt&&(w.timeoutHandle=tt,rt(g)),kr!==null)for(g=kr.return;g!==null;){var $=g;switch(Oh($),$.tag){case 1:$=$.type.childContextTypes,$!=null&&fs();break;case 3:xu(),Ar(mr),Ar(zr),Ne();break;case 5:Ed($);break;case 4:xu();break;case 13:Ar(hi);break;case 19:Ar(hi);break;case 10:Tu($.type._context);break;case 22:case 23:Bt()}g=g.return}if(qn=w,kr=w=Ll(w.current,null),ti=Jr=h,as=0,Qi=null,_c=Ku=ou=0,Ys=Ju=null,zn!==null){for(h=0;h<zn.length;h++)if(g=zn[h],$=g.interleaved,$!==null){g.interleaved=null;var M=$.next,B=g.pending;if(B!==null){var V=B.next;B.next=M,$.next=V}g.pending=$}zn=null}return w}function Wr(w,h){do{var g=kr;try{if(bu(),Ot.current=nu,oo){for(var $=jn.memoizedState;$!==null;){var M=$.queue;M!==null&&(M.pending=null),$=$.next}oo=!1}if(Cn=0,Br=mn=jn=null,yi=!1,ao=0,ta.current=null,g===null||g.return===null){as=1,Qi=h,kr=null;break}e:{var B=w,V=g.return,ue=g,Me=h;if(h=ti,ue.flags|=32768,Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var Qe=Me,Et=ue,Jt=Et.tag;if(!(Et.mode&1)&&(Jt===0||Jt===11||Jt===15)){var an=Et.alternate;an?(Et.updateQueue=an.updateQueue,Et.memoizedState=an.memoizedState,Et.lanes=an.lanes):(Et.updateQueue=null,Et.memoizedState=null)}var _n=pc(V);if(_n!==null){_n.flags&=-257,$d(_n,V,ue,B,h),_n.mode&1&&zc(B,Qe,h),h=_n,Me=Qe;var vn=h.updateQueue;if(vn===null){var pn=new Set;pn.add(Me),h.updateQueue=pn}else vn.add(Me);break e}else{if(!(h&1)){zc(B,Qe,h),Wh();break e}Me=Error(o(426))}}else if(vr&&ue.mode&1){var Or=pc(V);if(Or!==null){!(Or.flags&65536)&&(Or.flags|=256),$d(Or,V,ue,B,h),Lh(Me);break e}}B=Me,as!==4&&(as=2),Ju===null?Ju=[B]:Ju.push(B),Me=sl(Me,ue),ue=V;do{switch(ue.tag){case 3:ue.flags|=65536,h&=-h,ue.lanes|=h;var St=Uc(ue,Me,h);fh(ue,St);break e;case 1:B=Me;var we=ue.type,Re=ue.stateNode;if(!(ue.flags&128)&&(typeof we.getDerivedStateFromError=="function"||Re!==null&&typeof Re.componentDidCatch=="function"&&(ho===null||!ho.has(Re)))){ue.flags|=65536,h&=-h,ue.lanes|=h;var nt=Il(ue,B,h);fh(ue,nt);break e}}ue=ue.return}while(ue!==null)}fo(g)}catch(Ut){h=Ut,kr===g&&g!==null&&(kr=g=g.return);continue}break}while(!0)}function Zu(){var w=bh.current;return bh.current=nu,w===null?nu:w}function Wh(){(as===0||as===3||as===2)&&(as=4),qn===null||!(ou&268435455)&&!(Ku&268435455)||$s(qn,ti)}function Xc(w,h){var g=Ln;Ln|=2;var $=Zu();qn===w&&ti===h||hl(w,h);do try{si();break}catch(M){Wr(w,M)}while(!0);if(bu(),Ln=g,bh.current=$,kr!==null)throw Error(o(261));return qn=null,ti=0,as}function si(){for(;kr!==null;)Yc(kr)}function ji(){for(;kr!==null&&!el();)Yc(kr)}function Yc(w){var h=Mu(w.alternate,w,Jr);w.memoizedProps=w.pendingProps,h===null?fo(w):kr=h,ta.current=null}function fo(w){var h=w;do{var g=h.alternate;if(w=h.return,(h.flags&32768)===0){if(g=dn(g,h,Jr),g!==null){kr=g;return}}else{if(g=Op(g,h),g!==null){g.flags&=32767,kr=g;return}if(w!==null)w.flags|=32768,w.subtreeFlags=0,w.deletions=null;else{as=6,kr=null;return}}if(h=h.sibling,h!==null){kr=h;return}kr=h=w}while(h!==null);as===0&&(as=5)}function dl(w,h){var g=gr,$=Vi.transition;try{Vi.transition=null,gr=1,Kc(w,h,g)}finally{Vi.transition=$,gr=g}return null}function Kc(w,h,g){do vc();while(kl!==null);if(Ln&6)throw Error(o(327));var $=w.finishedWork,M=w.finishedLanes;if($===null)return null;if(w.finishedWork=null,w.finishedLanes=0,$===w.current)throw Error(o(177));w.callbackNode=null,w.callbackPriority=0;var B=$.lanes|$.childLanes;if(El(w,B),w===qn&&(kr=qn=null,ti=0),!($.subtreeFlags&2064)&&!($.flags&2064)||po||(po=!0,Jc(Td,function(){return vc(),null})),B=($.flags&15990)!==0,($.subtreeFlags&15990)!==0||B){B=Vi.transition,Vi.transition=null;var V=gr;gr=1;var ue=Ln;Ln|=4,ta.current=null,gf(w,$),Ao(w,$),se(w.containerInfo),w.current=$,sp($),_u(),Ln=ue,gr=V,Vi.transition=B}else w.current=$;if(po&&(po=!1,kl=w,Go=M),B=w.pendingLanes,B===0&&(ho=null),vu($.stateNode),Hs(w,Ki()),h!==null)for(g=w.onRecoverableError,$=0;$<h.length;$++)g(h[$]);if(Cu)throw Cu=!1,w=Au,Au=null,w;return Go&1&&w.tag!==0&&vc(),B=w.pendingLanes,B&1?w===Qu?qu++:(qu=0,Qu=w):qu=0,Oa(),null}function vc(){if(kl!==null){var w=_r(Go),h=Vi.transition,g=gr;try{if(Vi.transition=null,gr=16>w?16:w,kl===null)var $=!1;else{if(w=kl,kl=null,Go=0,(Ln&6)!==0)throw Error(o(331));var M=Ln;for(Ln|=4,xn=w.current;xn!==null;){var B=xn,V=B.child;if(xn.flags&16){var ue=B.deletions;if(ue!==null){for(var Me=0;Me<ue.length;Me++){var Qe=ue[Me];for(xn=Qe;xn!==null;){var Et=xn;switch(Et.tag){case 0:case 11:case 15:iu(8,Et,B)}var Jt=Et.child;if(Jt!==null)Jt.return=Et,xn=Jt;else for(;xn!==null;){Et=xn;var an=Et.sibling,_n=Et.return;if(cl(Et),Et===Qe){xn=null;break}if(an!==null){an.return=_n,xn=an;break}xn=_n}}}var vn=B.alternate;if(vn!==null){var pn=vn.child;if(pn!==null){vn.child=null;do{var Or=pn.sibling;pn.sibling=null,pn=Or}while(pn!==null)}}xn=B}}if(B.subtreeFlags&2064&&V!==null)V.return=B,xn=V;else e:for(;xn!==null;){if(B=xn,(B.flags&2048)!==0)switch(B.tag){case 0:case 11:case 15:iu(9,B,B.return)}var St=B.sibling;if(St!==null){St.return=B.return,xn=St;break e}xn=B.return}}var we=w.current;for(xn=we;xn!==null;){V=xn;var Re=V.child;if(V.subtreeFlags&2064&&Re!==null)Re.return=V,xn=Re;else e:for(V=we;xn!==null;){if(ue=xn,(ue.flags&2048)!==0)try{switch(ue.tag){case 0:case 11:case 15:Co(9,ue)}}catch(Ut){Io(ue,ue.return,Ut)}if(ue===V){xn=null;break e}var nt=ue.sibling;if(nt!==null){nt.return=ue.return,xn=nt;break e}xn=ue.return}}if(Ln=M,Oa(),aa&&typeof aa.onPostCommitFiberRoot=="function")try{aa.onPostCommitFiberRoot(Pu,w)}catch{}$=!0}return $}finally{gr=g,Vi.transition=h}}return!1}function ec(w,h,g){h=sl(g,h),h=Uc(w,h,1),Gi(w,h),h=Mr(),w=Wa(w,1),w!==null&&(gu(w,1,h),Hs(w,h))}function Io(w,h,g){if(w.tag===3)ec(w,w,g);else for(;h!==null;){if(h.tag===3){ec(h,w,g);break}else if(h.tag===1){var $=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof $.componentDidCatch=="function"&&(ho===null||!ho.has($))){w=sl(g,w),w=Il(h,w,1),Gi(h,w),w=Mr(),h=Wa(h,1),h!==null&&(gu(h,1,w),Hs(h,w));break}}h=h.return}}function Ks(w,h,g){var $=w.pingCache;$!==null&&$.delete(h),h=Mr(),w.pingedLanes|=w.suspendedLanes&g,qn===w&&(ti&g)===g&&(as===4||as===3&&(ti&130023424)===ti&&500>Ki()-co?hl(w,0):_c|=g),Hs(w,h)}function na(w,h){h===0&&(w.mode&1?(h=Ko,Ko<<=1,!(Ko&130023424)&&(Ko=4194304)):h=1);var g=Mr();w=Wa(w,h),w!==null&&(gu(w,h,g),Hs(w,g))}function Eh(w){var h=w.memoizedState,g=0;h!==null&&(g=h.retryLane),na(w,g)}function mo(w,h){var g=0;switch(w.tag){case 13:var $=w.stateNode,M=w.memoizedState;M!==null&&(g=M.retryLane);break;case 19:$=w.stateNode;break;default:throw Error(o(314))}$!==null&&$.delete(h),na(w,g)}var Mu;Mu=function(w,h,g){if(w!==null)if(w.memoizedProps!==h.pendingProps||mr.current)al=!0;else{if(!(w.lanes&g)&&!(h.flags&128))return al=!1,pi(w,h,g);al=(w.flags&131072)!==0}else al=!1,vr&&h.flags&1048576&&Jl(h,mh,h.index);switch(h.lanes=0,h.tag){case 2:var $=h.type;w!==null&&(w.alternate=null,h.alternate=null,h.flags|=2),w=h.pendingProps;var M=Ts(h,zr.current);Bi(h,g),M=wu(null,h,$,w,M,g);var B=Xn();return h.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,ci($)?(B=!0,uc(h)):B=!1,h.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,Xr(h),M.updater=Lc,h.stateNode=M,M._reactInternals=h,Sd(h,$,w,g),h=Gc(null,h,$,!0,B,g)):(h.tag=0,vr&&B&&ql(h),Mi(null,h,M,g),h=h.child),h;case 16:$=h.elementType;e:{switch(w!==null&&(w.alternate=null,h.alternate=null,h.flags|=2),w=h.pendingProps,M=$._init,$=M($._payload),h.type=$,M=h.tag=tc($),w=Ms($,w),M){case 0:h=ma(null,h,$,w,g);break e;case 1:h=is(null,h,$,w,g);break e;case 11:h=li(null,h,$,w,g);break e;case 14:h=qi(null,h,$,Ms($.type,w),g);break e}throw Error(o(306,$,""))}return h;case 0:return $=h.type,M=h.pendingProps,M=h.elementType===$?M:Ms($,M),ma(w,h,$,M,g);case 1:return $=h.type,M=h.pendingProps,M=h.elementType===$?M:Ms($,M),is(w,h,$,M,g);case 3:e:{if(ea(h),w===null)throw Error(o(387));$=h.pendingProps,B=h.memoizedState,M=B.element,od(w,h),cr(h,$,null,g);var V=h.memoizedState;if($=V.element,Ce&&B.isDehydrated)if(B={element:$,isDehydrated:!1,cache:V.cache,transitions:V.transitions},h.updateQueue.baseState=B,h.memoizedState=B,h.flags&256){M=Error(o(423)),h=Cd(w,h,$,g,M);break e}else if($!==M){M=Error(o(424)),h=Cd(w,h,$,g,M);break e}else for(Ce&&(Ci=Ct(h.stateNode.containerInfo),Hr=h,vr=!0,ca=null,Wi=!1),g=Nc(h,null,$,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Dc(),$===M){h=di(w,h,g);break e}Mi(w,h,$,g)}h=h.child}return h;case 5:return gh(h),w===null&&ld(h),$=h.type,M=h.pendingProps,B=w!==null?w.memoizedProps:null,V=M.children,ke($,M)?V=null:B!==null&&ke($,B)&&(h.flags|=32),fa(w,h),Mi(w,h,V,g),h.child;case 6:return w===null&&ld(h),null;case 13:return Us(w,h,g);case 4:return eu(h,h.stateNode.containerInfo),$=h.pendingProps,w===null?h.child=Dh(h,null,$,g):Mi(w,h,$,g),h.child;case 11:return $=h.type,M=h.pendingProps,M=h.elementType===$?M:Ms($,M),li(w,h,$,M,g);case 7:return Mi(w,h,h.pendingProps,g),h.child;case 8:return Mi(w,h,h.pendingProps.children,g),h.child;case 12:return Mi(w,h,h.pendingProps.children,g),h.child;case 10:e:{if($=h.type._context,M=h.pendingProps,B=h.memoizedProps,V=M.value,$o(h,$,V),B!==null)if(Un(B.value,V)){if(B.children===M.children&&!mr.current){h=di(w,h,g);break e}}else for(B=h.child,B!==null&&(B.return=h);B!==null;){var ue=B.dependencies;if(ue!==null){V=B.child;for(var Me=ue.firstContext;Me!==null;){if(Me.context===$){if(B.tag===1){Me=Su(-1,g&-g),Me.tag=2;var Qe=B.updateQueue;if(Qe!==null){Qe=Qe.shared;var Et=Qe.pending;Et===null?Me.next=Me:(Me.next=Et.next,Et.next=Me),Qe.pending=Me}}B.lanes|=g,Me=B.alternate,Me!==null&&(Me.lanes|=g),nl(B.return,g,h),ue.lanes|=g;break}Me=Me.next}}else if(B.tag===10)V=B.type===h.type?null:B.child;else if(B.tag===18){if(V=B.return,V===null)throw Error(o(341));V.lanes|=g,ue=V.alternate,ue!==null&&(ue.lanes|=g),nl(V,g,h),V=B.sibling}else V=B.child;if(V!==null)V.return=B;else for(V=B;V!==null;){if(V===h){V=null;break}if(B=V.sibling,B!==null){B.return=V.return,V=B;break}V=V.return}B=V}Mi(w,h,M.children,g),h=h.child}return h;case 9:return M=h.type,$=h.pendingProps.children,Bi(h,g),M=wi(M),$=$(M),h.flags|=1,Mi(w,h,$,g),h.child;case 14:return $=h.type,M=Ms($,h.pendingProps),M=Ms($.type,M),qi(w,h,$,M,g);case 15:return rs(w,h,h.type,h.pendingProps,g);case 17:return $=h.type,M=h.pendingProps,M=h.elementType===$?M:Ms($,M),w!==null&&(w.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,ci($)?(w=!0,uc(h)):w=!1,Bi(h,g),Ip(h,$,M),Sd(h,$,M,g),Gc(null,h,$,!0,w,g);case 19:return Sn(w,h,g);case 22:return Hc(w,h,g)}throw Error(o(156,h.tag))};function Jc(w,h){return Yl(w,h)}function yc(w,h,g,$){this.tag=w,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=$,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wo(w,h,g,$){return new yc(w,h,g,$)}function go(w){return w=w.prototype,!(!w||!w.isReactComponent)}function tc(w){if(typeof w=="function")return go(w)?1:0;if(w!=null){if(w=w.$$typeof,w===C)return 11;if(w===L)return 14}return 2}function Ll(w,h){var g=w.alternate;return g===null?(g=Wo(w.tag,h,w.key,w.mode),g.elementType=w.elementType,g.type=w.type,g.stateNode=w.stateNode,g.alternate=w,w.alternate=g):(g.pendingProps=h,g.type=w.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=w.flags&14680064,g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,h=w.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=w.sibling,g.index=w.index,g.ref=w.ref,g}function _o(w,h,g,$,M,B){var V=2;if($=w,typeof w=="function")go(w)&&(V=1);else if(typeof w=="string")V=5;else e:switch(w){case p:return Dl(g.children,M,B,h);case _:V=8,M|=8;break;case y:return w=Wo(12,g,h,M|2),w.elementType=y,w.lanes=B,w;case A:return w=Wo(13,g,h,M),w.elementType=A,w.lanes=B,w;case I:return w=Wo(19,g,h,M),w.elementType=I,w.lanes=B,w;case P:return Va(g,M,B,h);default:if(typeof w=="object"&&w!==null)switch(w.$$typeof){case b:V=10;break e;case E:V=9;break e;case C:V=11;break e;case L:V=14;break e;case O:V=16,$=null;break e}throw Error(o(130,w==null?w:typeof w,""))}return h=Wo(V,g,h,M),h.elementType=w,h.type=$,h.lanes=B,h}function Dl(w,h,g,$){return w=Wo(7,w,$,h),w.lanes=g,w}function Va(w,h,g,$){return w=Wo(22,w,$,h),w.elementType=P,w.lanes=g,w.stateNode={},w}function lu(w,h,g){return w=Wo(6,w,null,h),w.lanes=g,w}function ni(w,h,g){return h=Wo(4,w.children!==null?w.children:[],w.key,h),h.lanes=g,h.stateNode={containerInfo:w.containerInfo,pendingChildren:null,implementation:w.implementation},h}function ls(w,h,g,$,M){this.tag=h,this.containerInfo=w,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=tt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sl(0),this.expirationTimes=Sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sl(0),this.identifierPrefix=$,this.onRecoverableError=M,Ce&&(this.mutableSourceEagerHydrationData=null)}function Vh(w,h,g,$,M,B,V,ue,Me){return w=new ls(w,h,g,ue,Me),h===1?(h=1,B===!0&&(h|=8)):h=0,B=Wo(3,null,null,h),w.current=B,B.stateNode=w,B.memoizedState={element:$,isDehydrated:g,cache:null,transitions:null},Xr(B),w}function pd(w){if(!w)return $r;w=w._reactInternals;e:{if(U(w)!==w||w.tag!==1)throw Error(o(170));var h=w;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(ci(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(w.tag===1){var g=w.type;if(ci(g))return ka(w,g,h)}return h}function va(w){var h=w._reactInternals;if(h===void 0)throw typeof w.render=="function"?Error(o(188)):(w=Object.keys(w).join(","),Error(o(268,w)));return w=oe(h),w===null?null:w.stateNode}function ya(w,h){if(w=w.memoizedState,w!==null&&w.dehydrated!==null){var g=w.retryLane;w.retryLane=g!==0&&g<h?g:h}}function jh(w,h){ya(w,h),(w=w.alternate)&&ya(w,h)}function bc(w){return w=oe(w),w===null?null:w.stateNode}function Lp(){return null}return e.attemptContinuousHydration=function(w){if(w.tag===13){var h=Mr();Rs(w,134217728,h),jh(w,134217728)}},e.attemptHydrationAtCurrentPriority=function(w){if(w.tag===13){var h=Mr(),g=vs(w);Rs(w,g,h),jh(w,g)}},e.attemptSynchronousHydration=function(w){switch(w.tag){case 3:var h=w.stateNode;if(h.current.memoizedState.isDehydrated){var g=pr(h.pendingLanes);g!==0&&(xl(h,g|1),Hs(h,Ki()),!(Ln&6)&&(_a(),Oa()))}break;case 13:var $=Mr();Ol(function(){return Rs(w,1,$)}),jh(w,1)}},e.batchedUpdates=function(w,h){var g=Ln;Ln|=1;try{return w(h)}finally{Ln=g,Ln===0&&(_a(),io&&Oa())}},e.createComponentSelector=function(w){return{$$typeof:Yr,value:w}},e.createContainer=function(w,h,g,$,M,B,V){return Vh(w,h,!1,null,g,$,M,B,V)},e.createHasPseudoClassSelector=function(w){return{$$typeof:su,value:w}},e.createHydrationContainer=function(w,h,g,$,M,B,V,ue,Me){return w=Vh(g,$,!0,w,M,B,V,ue,Me),w.context=pd(null),g=w.current,$=Mr(),M=vs(g),B=Su($,M),B.callback=h??null,Gi(g,B),w.current.lanes=M,gu(w,M,$),Hs(w,$),w},e.createPortal=function(w,h,g){var $=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:$==null?null:""+$,children:w,containerInfo:h,implementation:g}},e.createRoleSelector=function(w){return{$$typeof:Yu,value:w}},e.createTestNameSelector=function(w){return{$$typeof:os,value:w}},e.createTextSelector=function(w){return{$$typeof:Ha,value:w}},e.deferredUpdates=function(w){var h=gr,g=Vi.transition;try{return Vi.transition=null,gr=16,w()}finally{gr=h,Vi.transition=g}},e.discreteUpdates=function(w,h,g,$,M){var B=gr,V=Vi.transition;try{return Vi.transition=null,gr=1,w(h,g,$,M)}finally{gr=B,Vi.transition=V,Ln===0&&_a()}},e.findAllNodes=gc,e.findBoundingRects=function(w,h){if(!kt)throw Error(o(363));h=gc(w,h),w=[];for(var g=0;g<h.length;g++)w.push(mt(h[g]));for(h=w.length-1;0<h;h--){g=w[h];for(var $=g.x,M=$+g.width,B=g.y,V=B+g.height,ue=h-1;0<=ue;ue--)if(h!==ue){var Me=w[ue],Qe=Me.x,Et=Qe+Me.width,Jt=Me.y,an=Jt+Me.height;if($>=Qe&&B>=Jt&&M<=Et&&V<=an){w.splice(h,1);break}else if($!==Qe||g.width!==Me.width||an<B||Jt>V){if(!(B!==Jt||g.height!==Me.height||Et<$||Qe>M)){Qe>$&&(Me.width+=Qe-$,Me.x=$),Et<M&&(Me.width=M-Qe),w.splice(h,1);break}}else{Jt>B&&(Me.height+=Jt-B,Me.y=B),an<V&&(Me.height=V-Jt),w.splice(h,1);break}}}return w},e.findHostInstance=va,e.findHostInstanceWithNoPortals=function(w){return w=ne(w),w=w!==null?ge(w):null,w===null?null:w.stateNode},e.findHostInstanceWithWarning=function(w){return va(w)},e.flushControlled=function(w){var h=Ln;Ln|=1;var g=Vi.transition,$=gr;try{Vi.transition=null,gr=1,w()}finally{gr=$,Vi.transition=g,Ln=h,Ln===0&&(_a(),Oa())}},e.flushPassiveEffects=vc,e.flushSync=Ol,e.focusWithin=function(w,h){if(!kt)throw Error(o(363));for(w=ws(w),h=Ga(w,h),h=Array.from(h),w=0;w<h.length;){var g=h[w++];if(!re(g)){if(g.tag===5&&dt(g.stateNode))return!0;for(g=g.child;g!==null;)h.push(g),g=g.sibling}}return!1},e.getCurrentUpdatePriority=function(){return gr},e.getFindAllNodesFailureDescription=function(w,h){if(!kt)throw Error(o(363));var g=0,$=[];w=[ws(w),0];for(var M=0;M<w.length;){var B=w[M++],V=w[M++],ue=h[V];if((B.tag!==5||!re(B))&&(Vc(B,ue)&&($.push(fi(ue)),V++,V>g&&(g=V)),V<h.length))for(B=B.child;B!==null;)w.push(B,V),B=B.sibling}if(g<h.length){for(w=[];g<h.length;g++)w.push(fi(h[g]));return`findAllNodes was able to match part of the selector:
  `+($.join(" > ")+`

No matching component was found for:
  `)+w.join(" > ")}return null},e.getPublicRootInstance=function(w){if(w=w.current,!w.child)return null;switch(w.child.tag){case 5:return pe(w.child.stateNode);default:return w.child.stateNode}},e.injectIntoDevTools=function(w){if(w={bundleType:w.bundleType,version:w.version,rendererPackageName:w.rendererPackageName,rendererConfig:w.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:bc,findFiberByHostInstance:w.findFiberByHostInstance||Lp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")w=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)w=!0;else{try{Pu=h.inject(w),aa=h}catch{}w=!!h.checkDCE}}return w},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(w,h,g,$){if(!kt)throw Error(o(363));w=gc(w,h);var M=bt(w,g,$).disconnect;return{disconnect:function(){M()}}},e.registerMutableSourceForHydration=function(w,h){var g=h._getVersion;g=g(h._source),w.mutableSourceEagerHydrationData==null?w.mutableSourceEagerHydrationData=[h,g]:w.mutableSourceEagerHydrationData.push(h,g)},e.runWithPriority=function(w,h){var g=gr;try{return gr=w,h()}finally{gr=g}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(w,h,g,$){var M=h.current,B=Mr(),V=vs(M);return g=pd(g),h.context===null?h.context=g:h.pendingContext=g,h=Su(B,V),h.payload={element:w},$=$===void 0?null:$,$!==null&&(h.callback=$),Gi(M,h),w=Rs(M,V,B),w!==null&&La(w,M,V),V},e}),o5}(function(n){n.exports=wSe()})(RX);const $Se=IX(RX.exports);function CSe(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let s=0;s<i;s++)if(!t(n[s],e[s]))return!1;return!0}const AA=[];function ASe(n,e,t=!1,i={}){for(const o of AA)if(CSe(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return o.response;if(!t)throw o.promise}const s={keys:e,equal:i.equal,promise:n(...e).then(o=>s.response=o).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const o=AA.indexOf(s);o!==-1&&AA.splice(o,1)},i.lifespan)}).catch(o=>s.error=o)};if(AA.push(s),!t)throw s.promise}const MSe=(n,e,t)=>ASe(n,e,!1,t);var sk={exports:{}},Lx={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l5;function ISe(){if(l5)return Lx;l5=1;var n=Vr,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,p){var _,y={},b=null,E=null;p!==void 0&&(b=""+p),d.key!==void 0&&(b=""+d.key),d.ref!==void 0&&(E=d.ref);for(_ in d)i.call(d,_)&&!o.hasOwnProperty(_)&&(y[_]=d[_]);if(u&&u.defaultProps)for(_ in d=u.defaultProps,d)y[_]===void 0&&(y[_]=d[_]);return{$$typeof:e,type:u,key:b,ref:E,props:y,_owner:s.current}}return Lx.Fragment=t,Lx.jsx=l,Lx.jsxs=l,Lx}(function(n){n.exports=ISe()})(sk);const U$=sk.exports.Fragment,on=sk.exports.jsx,kh=sk.exports.jsxs,nF={},RSe=n=>void Object.assign(nF,n);function kSe(n,e){function t(p,{args:_=[],attach:y,...b},E){let C=`${p[0].toUpperCase()}${p.slice(1)}`,A;if(p==="primitive"){if(b.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const I=b.object;A=cS(I,{type:p,root:E,attach:y,primitive:!0})}else{const I=nF[C];if(!I)throw new Error(`R3F: ${C} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(_))throw new Error("R3F: The args prop must be an array!");A=cS(new I(..._),{type:p,root:E,attach:y,memoizedProps:{args:_}})}return A.__r3f.attach===void 0&&(A instanceof oi?A.__r3f.attach="geometry":A instanceof sd&&(A.__r3f.attach="material")),C!=="inject"&&MO(A,b),A}function i(p,_){let y=!1;if(_){var b,E;(b=_.__r3f)!=null&&b.attach?AO(p,_,_.__r3f.attach):_.isObject3D&&p.isObject3D&&(p.add(_),y=!0),y||(E=p.__r3f)==null||E.objects.push(_),_.__r3f||cS(_,{}),_.__r3f.parent=p,lN(_),hS(_)}}function s(p,_,y){let b=!1;if(_){var E,C;if((E=_.__r3f)!=null&&E.attach)AO(p,_,_.__r3f.attach);else if(_.isObject3D&&p.isObject3D){_.parent=p,_.dispatchEvent({type:"added"});const A=p.children.filter(L=>L!==_),I=A.indexOf(y);p.children=[...A.slice(0,I),_,...A.slice(I)],b=!0}b||(C=p.__r3f)==null||C.objects.push(_),_.__r3f||cS(_,{}),_.__r3f.parent=p,lN(_),hS(_)}}function o(p,_,y=!1){p&&[...p].forEach(b=>l(_,b,y))}function l(p,_,y){if(_){var b,E,C;if(_.__r3f&&(_.__r3f.parent=null),(b=p.__r3f)!=null&&b.objects&&(p.__r3f.objects=p.__r3f.objects.filter(P=>P!==_)),(E=_.__r3f)!=null&&E.attach)p5(p,_,_.__r3f.attach);else if(_.isObject3D&&p.isObject3D){var A;p.remove(_),(A=_.__r3f)!=null&&A.root&&FSe(_.__r3f.root,_)}const L=(C=_.__r3f)==null?void 0:C.primitive,O=y===void 0?_.dispose!==null&&!L:y;if(!L){var I;o((I=_.__r3f)==null?void 0:I.objects,_,O),o(_.children,_,O)}_.__r3f&&(delete _.__r3f.root,delete _.__r3f.objects,delete _.__r3f.handlers,delete _.__r3f.memoizedProps,L||delete _.__r3f),O&&_.dispose&&_.type!=="Scene"&&vI.exports.unstable_scheduleCallback(vI.exports.unstable_IdlePriority,()=>{try{_.dispose()}catch{}}),hS(p)}}function u(p,_,y,b){var E;const C=(E=p.__r3f)==null?void 0:E.parent;if(!C)return;const A=t(_,y,p.__r3f.root);if(p.children){for(const I of p.children)I.__r3f&&i(A,I);p.children=p.children.filter(I=>!I.__r3f)}p.__r3f.objects.forEach(I=>i(A,I)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||l(C,p),A.parent&&(A.__r3f.autoRemovedBeforeAppend=!0),i(C,A),A.raycast&&A.__r3f.eventCount&&A.__r3f.root.getState().internal.interaction.push(A),[b,b.alternate].forEach(I=>{I!==null&&(I.stateNode=A,I.ref&&(typeof I.ref=="function"?I.ref(A):I.ref.current=A))})}const d=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:$Se({createInstance:t,removeChild:l,appendChild:i,appendInitialChild:i,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,_)=>{if(!_)return;const y=p.getState().scene;!y.__r3f||(y.__r3f.root=p,i(y,_))},removeChildFromContainer:(p,_)=>{!_||l(p.getState().scene,_)},insertInContainerBefore:(p,_,y)=>{if(!_||!y)return;const b=p.getState().scene;!b.__r3f||s(b,_,y)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var _;return!!((_=p==null?void 0:p.__r3f)!=null?_:{}).handlers},prepareUpdate(p,_,y,b){if(p.__r3f.primitive&&b.object&&b.object!==p)return[!0];{const{args:E=[],children:C,...A}=b,{args:I=[],children:L,...O}=y;if(!Array.isArray(E))throw new Error("R3F: the args prop must be an array!");if(E.some((N,z)=>N!==I[z]))return[!0];const P=PX(p,A,O,!0);return P.changes.length?[!1,P]:null}},commitUpdate(p,[_,y],b,E,C,A){_?u(p,b,C,A):MO(p,y)},commitMount(p,_,y,b){var E;const C=(E=p.__r3f)!=null?E:{};p.raycast&&C.handlers&&C.eventCount&&p.__r3f.root.getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>cS(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var _;const{attach:y,parent:b}=(_=p.__r3f)!=null?_:{};y&&b&&p5(b,p,y),p.isObject3D&&(p.visible=!1),hS(p)},unhideInstance(p,_){var y;const{attach:b,parent:E}=(y=p.__r3f)!=null?y:{};b&&E&&AO(E,p,b),(p.isObject3D&&_.visible==null||_.visible)&&(p.visible=!0),hS(p)},createTextInstance:d,hideTextInstance:d,unhideTextInstance:d,getCurrentEventPriority:()=>e?e():s1.exports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Nu.fun(performance.now)?performance.now:Nu.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Nu.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Nu.fun(clearTimeout)?clearTimeout:void 0}),applyProps:MO}}var u5,c5;const kX=()=>{var n;return(n=nF.ColorManagement)!=null?n:null},OX=n=>n&&n.isOrthographicCamera,OSe=n=>n&&n.hasOwnProperty("current"),z$=typeof window<"u"&&((u5=window.document)!=null&&u5.createElement||((c5=window.navigator)==null?void 0:c5.product)==="ReactNative")?me.useLayoutEffect:me.useEffect;function LX(n){const e=me.useRef(n);return z$(()=>void(e.current=n),[n]),e}function LSe({set:n}){return z$(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class DX extends me.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}DX.getDerivedStateFromError=()=>({error:!0});const NX="__default",h5=new Map,DSe=n=>n&&!!n.memoized&&!!n.changes;function BX(n){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}const Dx=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Nu={obj:n=>n===Object(n)&&!Nu.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Nu.str(n)||Nu.num(n))return n===e;const o=Nu.obj(n);if(o&&i==="reference")return n===e;const l=Nu.arr(n);if(l&&t==="reference")return n===e;if((l||o)&&n===e)return!0;let u;for(u in n)if(!(u in e))return!1;if(o&&t==="shallow"&&i==="shallow"){for(u in s?e:n)if(!Nu.equ(n[u],e[u],{strict:s,objects:"reference"}))return!1}else for(u in s?e:n)if(n[u]!==e[u])return!1;if(Nu.und(u)){if(l&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function NSe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function cS(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function aN(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),s=i.pop();return t=i.reduce((o,l)=>o[l],n),{target:t,key:s}}else return{target:t,key:e}}const d5=/-\d+$/;function AO(n,e,t){if(Nu.str(t)){if(d5.test(t)){const o=t.replace(d5,""),{target:l,key:u}=aN(n,o);Array.isArray(l[u])||(l[u]=[])}const{target:i,key:s}=aN(n,t);e.__r3f.previousAttach=i[s],i[s]=e}else e.__r3f.previousAttach=t(n,e)}function p5(n,e,t){var i,s;if(Nu.str(t)){const{target:o,key:l}=aN(n,t),u=e.__r3f.previousAttach;u===void 0?delete o[l]:o[l]=u}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(s=e.__r3f)==null||delete s.previousAttach}function PX(n,{children:e,key:t,ref:i,...s},{children:o,key:l,ref:u,...d}={},p=!1){var _;const y=(_=n==null?void 0:n.__r3f)!=null?_:{},b=Object.entries(s),E=[];if(p){const A=Object.keys(d);for(let I=0;I<A.length;I++)s.hasOwnProperty(A[I])||b.unshift([A[I],NX+"remove"])}b.forEach(([A,I])=>{var L;if((L=n.__r3f)!=null&&L.primitive&&A==="object"||Nu.equ(I,d[A]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(A))return E.push([A,I,!0,[]]);let O=[];A.includes("-")&&(O=A.split("-")),E.push([A,I,!1,O]);for(const P in s){const N=s[P];P.startsWith(`${A}-`)&&E.push([P,N,!1,P.split("-")])}});const C={...s};return y.memoizedProps&&y.memoizedProps.args&&(C.args=y.memoizedProps.args),y.memoizedProps&&y.memoizedProps.attach&&(C.attach=y.memoizedProps.attach),{memoized:C,changes:E}}function MO(n,e){var t,i,s;const o=(t=n.__r3f)!=null?t:{},l=o.root,u=(i=l==null||l.getState==null?void 0:l.getState())!=null?i:{},{memoized:d,changes:p}=DSe(e)?e:PX(n,e),_=o.eventCount;n.__r3f&&(n.__r3f.memoizedProps=d);for(let y=0;y<p.length;y++){let[b,E,C,A]=p[y],I=n,L=I[b];if(A.length&&(L=A.reduce((O,P)=>O[P],n),!(L&&L.set))){const[O,...P]=A.reverse();I=P.reverse().reduce((N,z)=>N[z],n),b=O}if(E===NX+"remove")if(I.constructor){let O=h5.get(I.constructor);O||(O=new I.constructor,h5.set(I.constructor,O)),E=O[b]}else E=0;if(C)E?o.handlers[b]=E:delete o.handlers[b],o.eventCount=Object.keys(o.handlers).length;else if(L&&L.set&&(L.copy||L instanceof f1)){if(Array.isArray(E))L.fromArray?L.fromArray(E):L.set(...E);else if(L.copy&&E&&E.constructor&&L.constructor===E.constructor)L.copy(E);else if(E!==void 0){const O=L instanceof Nn;!O&&L.setScalar?L.setScalar(E):L instanceof f1&&E instanceof f1?L.mask=E.mask:L.set(E),!kX()&&!u.linear&&O&&L.convertSRGBToLinear()}}else I[b]=E,!u.linear&&I[b]instanceof lc&&I[b].format===Pf&&I[b].type===ep&&(I[b].encoding=ps);hS(n)}if(o.parent&&u.internal&&n.raycast&&_!==o.eventCount){const y=u.internal.interaction.indexOf(n);y>-1&&u.internal.interaction.splice(y,1),o.eventCount&&u.internal.interaction.push(n)}return!(p.length===1&&p[0][0]==="onUpdate")&&p.length&&(s=n.__r3f)!=null&&s.parent&&lN(n),n}function hS(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function lN(n){n.onUpdate==null||n.onUpdate(n)}function BSe(n,e){n.manual||(OX(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function MA(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function PSe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return s1.exports.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return s1.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return s1.exports.ContinuousEventPriority;default:return s1.exports.DefaultEventPriority}}function FX(n,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(i),s.target.releasePointerCapture(i)))}function FSe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{FX(t.capturedMap,e,i,s)})}function USe(n){function e(d){const{internal:p}=n.getState(),_=d.offsetX-p.initialClick[0],y=d.offsetY-p.initialClick[1];return Math.round(Math.sqrt(_*_+y*y))}function t(d){return d.filter(p=>["Move","Over","Enter","Out","Leave"].some(_=>{var y;return(y=p.__r3f)==null?void 0:y.handlers["onPointer"+_]}))}function i(d,p){const _=n.getState(),y=new Set,b=[],E=p?p(_.internal.interaction):_.internal.interaction;for(let L=0;L<E.length;L++){const O=Dx(E[L]);O&&(O.raycaster.camera=void 0)}_.previousRoot||_.events.compute==null||_.events.compute(d,_);function C(L){const O=Dx(L);if(!O||!O.events.enabled||O.raycaster.camera===null)return[];if(O.raycaster.camera===void 0){var P;O.events.compute==null||O.events.compute(d,O,(P=O.previousRoot)==null?void 0:P.getState()),O.raycaster.camera===void 0&&(O.raycaster.camera=null)}return O.raycaster.camera?O.raycaster.intersectObject(L,!0):[]}let A=E.flatMap(C).sort((L,O)=>{const P=Dx(L.object),N=Dx(O.object);return!P||!N?L.distance-O.distance:N.events.priority-P.events.priority||L.distance-O.distance}).filter(L=>{const O=MA(L);return y.has(O)?!1:(y.add(O),!0)});_.events.filter&&(A=_.events.filter(A,_));for(const L of A){let O=L.object;for(;O;){var I;(I=O.__r3f)!=null&&I.eventCount&&b.push({...L,eventObject:O}),O=O.parent}}if("pointerId"in d&&_.internal.capturedMap.has(d.pointerId))for(let L of _.internal.capturedMap.get(d.pointerId).values())y.has(MA(L.intersection))||b.push(L.intersection);return b}function s(d,p,_,y){const b=n.getState();if(d.length){const E={stopped:!1};for(const C of d){const A=Dx(C.object)||b,{raycaster:I,pointer:L,camera:O,internal:P}=A,N=new $e(L.x,L.y,0).unproject(O),z=ne=>{var oe,le;return(oe=(le=P.capturedMap.get(ne))==null?void 0:le.has(C.eventObject))!=null?oe:!1},W=ne=>{const oe={intersection:C,target:p.target};P.capturedMap.has(ne)?P.capturedMap.get(ne).set(C.eventObject,oe):P.capturedMap.set(ne,new Map([[C.eventObject,oe]])),p.target.setPointerCapture(ne)},H=ne=>{const oe=P.capturedMap.get(ne);oe&&FX(P.capturedMap,C.eventObject,oe,ne)};let U={};for(let ne in p){let oe=p[ne];typeof oe!="function"&&(U[ne]=oe)}let Q={...C,...U,pointer:L,intersections:d,stopped:E.stopped,delta:_,unprojectedPoint:N,ray:I.ray,camera:O,stopPropagation(){const ne="pointerId"in p&&P.capturedMap.get(p.pointerId);if((!ne||ne.has(C.eventObject))&&(Q.stopped=E.stopped=!0,P.hovered.size&&Array.from(P.hovered.values()).find(oe=>oe.eventObject===C.eventObject))){const oe=d.slice(0,d.indexOf(C));o([...oe,C])}},target:{hasPointerCapture:z,setPointerCapture:W,releasePointerCapture:H},currentTarget:{hasPointerCapture:z,setPointerCapture:W,releasePointerCapture:H},nativeEvent:p};if(y(Q),E.stopped===!0)break}}return d}function o(d){const{internal:p}=n.getState();for(const _ of p.hovered.values())if(!d.length||!d.find(y=>y.object===_.object&&y.index===_.index&&y.instanceId===_.instanceId)){const y=_.eventObject.__r3f,b=y==null?void 0:y.handlers;if(p.hovered.delete(MA(_)),y!=null&&y.eventCount){const E={..._,intersections:d};b.onPointerOut==null||b.onPointerOut(E),b.onPointerLeave==null||b.onPointerLeave(E)}}}function l(d,p){for(let _=0;_<p.length;_++){const y=p[_].__r3f;y==null||y.handlers.onPointerMissed==null||y.handlers.onPointerMissed(d)}}function u(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return p=>{const{internal:_}=n.getState();"pointerId"in p&&_.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{_.capturedMap.has(p.pointerId)&&(_.capturedMap.delete(p.pointerId),o([]))})}}return function(p){const{onPointerMissed:_,internal:y}=n.getState();y.lastEvent.current=p;const b=d==="onPointerMove",E=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",C=i(p,b?t:void 0),A=E?e(p):0;d==="onPointerDown"&&(y.initialClick=[p.offsetX,p.offsetY],y.initialHits=C.map(L=>L.eventObject)),E&&!C.length&&A<=2&&(l(p,y.interaction),_&&_(p)),b&&o(C);function I(L){const O=L.eventObject,P=O.__r3f,N=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(b){if(N.onPointerOver||N.onPointerEnter||N.onPointerOut||N.onPointerLeave){const z=MA(L),W=y.hovered.get(z);W?W.stopped&&L.stopPropagation():(y.hovered.set(z,L),N.onPointerOver==null||N.onPointerOver(L),N.onPointerEnter==null||N.onPointerEnter(L))}N.onPointerMove==null||N.onPointerMove(L)}else{const z=N[d];z?(!E||y.initialHits.includes(O))&&(l(p,y.interaction.filter(W=>!y.initialHits.includes(W))),z(L)):E&&y.initialHits.includes(O)&&l(p,y.interaction.filter(W=>!y.initialHits.includes(W)))}}s(C,p,A,I)}}return{handlePointer:u}}const UX=n=>!!(n!=null&&n.render),zX=me.createContext(null),zSe=(n,e)=>{const t=ESe((u,d)=>{const p=new $e,_=new $e,y=new $e;function b(I=d().camera,L=_,O=d().size){const{width:P,height:N,top:z,left:W}=O,H=P/N;L instanceof $e?y.copy(L):y.set(...L);const U=I.getWorldPosition(p).distanceTo(y);if(OX(I))return{width:P/I.zoom,height:N/I.zoom,top:z,left:W,factor:1,distance:U,aspect:H};{const Q=I.fov*Math.PI/180,ne=2*Math.tan(Q/2)*U,oe=ne*(P/N);return{width:oe,height:ne,top:z,left:W,factor:P/oe,distance:U,aspect:H}}}let E;const C=I=>u(L=>({performance:{...L.performance,current:I}})),A=new Ht;return{set:u,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(I=1)=>n(d(),I),advance:(I,L)=>e(I,L,d()),legacy:!1,linear:!1,flat:!1,scene:cS(new o$),controls:null,clock:new qP,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const I=d();E&&clearTimeout(E),I.performance.current!==I.performance.min&&C(I.performance.min),E=setTimeout(()=>C(d().performance.max),I.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:b},setEvents:I=>u(L=>({...L,events:{...L.events,...I}})),setSize:(I,L,O,P,N)=>{const z=d().camera,W={width:I,height:L,top:P||0,left:N||0,updateStyle:O};u(H=>({size:W,viewport:{...H.viewport,...b(z,_,W)}}))},setDpr:I=>u(L=>{const O=BX(I);return{viewport:{...L.viewport,dpr:O,initialDpr:L.viewport.initialDpr||O}}}),setFrameloop:(I="always")=>{const L=d().clock;L.stop(),L.elapsedTime=0,I!=="never"&&(L.start(),L.elapsedTime=0),u(()=>({frameloop:I}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:me.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(I,L,O)=>{const P=d().internal;return P.priority=P.priority+(L>0?1:0),P.subscribers.push({ref:I,priority:L,store:O}),P.subscribers=P.subscribers.sort((N,z)=>N.priority-z.priority),()=>{const N=d().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(L>0?1:0),N.subscribers=N.subscribers.filter(z=>z.ref!==I))}}}}}),i=t.getState();let s=i.size,o=i.viewport.dpr,l=i.camera;return t.subscribe(()=>{const{camera:u,size:d,viewport:p,gl:_,set:y}=t.getState();if(d!==s||p.dpr!==o){var b;s=d,o=p.dpr,BSe(u,d),_.setPixelRatio(p.dpr);const E=(b=d.updateStyle)!=null?b:typeof HTMLCanvasElement<"u"&&_.domElement instanceof HTMLCanvasElement;_.setSize(d.width,d.height,E)}u!==l&&(l=u,y(E=>({viewport:{...E.viewport,...E.viewport.getCurrentViewport(u)}})))}),t.subscribe(u=>n(u)),t};let IA,HSe=new Set,GSe=new Set,WSe=new Set;function IO(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Nx(n,e){switch(n){case"before":return IO(HSe,e);case"after":return IO(GSe,e);case"tail":return IO(WSe,e)}}let RO,kO;function OO(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),RO=e.internal.subscribers,IA=0;IA<RO.length;IA++)kO=RO[IA],kO.ref.current(kO.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function VSe(n){let e=!1,t,i,s;function o(d){i=requestAnimationFrame(o),e=!0,t=0,Nx("before",d);for(const _ of n.values()){var p;s=_.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((p=s.gl.xr)!=null&&p.isPresenting)&&(t+=OO(d,s))}if(Nx("after",d),t===0)return Nx("tail",d),e=!1,cancelAnimationFrame(i)}function l(d,p=1){var _;if(!d)return n.forEach(y=>l(y.store.getState()),p);(_=d.gl.xr)!=null&&_.isPresenting||!d.internal.active||d.frameloop==="never"||(d.internal.frames=Math.min(60,d.internal.frames+p),e||(e=!0,requestAnimationFrame(o)))}function u(d,p=!0,_,y){if(p&&Nx("before",d),_)OO(d,_,y);else for(const b of n.values())OO(d,b.store.getState());p&&Nx("after",d)}return{loop:o,invalidate:l,advance:u}}function HX(){const n=me.useContext(zX);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Jd(n=t=>t,e){return HX()(n,e)}function Fm(n,e=0){const t=HX(),i=t.getState().internal.subscribe,s=LX(n);return z$(()=>i(s,e,t),[e,i,t]),null}const _E=new Map,{invalidate:f5,advance:m5}=VSe(_E),{reconciler:yI,applyProps:RA}=kSe(_E,PSe),oS={objects:"shallow",strict:!1},jSe=(n,e)=>{const t=typeof n=="function"?n(e):n;return UX(t)?t:new OP({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function XSe(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:s,left:o}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function YSe(n){const e=_E.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,o=i||zSe(f5,m5),l=t||yI.createContainer(o,s1.exports.ConcurrentRoot,null,!1,null,"",s,null);e||_E.set(n,{fiber:l,store:o});let u,d=!1,p;return{configure(_={}){let{gl:y,size:b,events:E,onCreated:C,shadows:A=!1,linear:I=!1,flat:L=!1,legacy:O=!1,orthographic:P=!1,frameloop:N="always",dpr:z=[1,2],performance:W,raycaster:H,camera:U,onPointerMissed:Q}=_,ne=o.getState(),oe=ne.gl;ne.gl||ne.set({gl:oe=jSe(y,n)});let le=ne.raycaster;le||ne.set({raycaster:le=new eF});const{params:ge,...ce}=H||{};if(Nu.equ(ce,le,oS)||RA(le,{...ce}),Nu.equ(ge,le.params,oS)||RA(le,{params:{...le.params,...ge}}),!ne.camera||ne.camera===p&&!Nu.equ(p,U,oS)){p=U;const ie=U instanceof LE,he=ie?U:P?new J0(0,0,0,0,.1,1e3):new Ja(75,0,.1,1e3);ie||(he.position.z=5,U&&RA(he,U),!ne.camera&&!(U!=null&&U.rotation)&&he.lookAt(0,0,0)),ne.set({camera:he})}if(!ne.xr){const ie=(Fe,ke)=>{const qe=o.getState();qe.frameloop!=="never"&&m5(Fe,!0,qe,ke)},he=()=>{const Fe=o.getState();Fe.gl.xr.enabled=Fe.gl.xr.isPresenting,Fe.gl.xr.setAnimationLoop(Fe.gl.xr.isPresenting?ie:null),Fe.gl.xr.isPresenting||f5(Fe)},Se={connect(){const Fe=o.getState().gl;Fe.xr.addEventListener("sessionstart",he),Fe.xr.addEventListener("sessionend",he)},disconnect(){const Fe=o.getState().gl;Fe.xr.removeEventListener("sessionstart",he),Fe.xr.removeEventListener("sessionend",he)}};oe.xr&&Se.connect(),ne.set({xr:Se})}if(oe.shadowMap){const ie=oe.shadowMap.enabled,he=oe.shadowMap.type;if(oe.shadowMap.enabled=!!A,Nu.boo(A))oe.shadowMap.type=mw;else if(Nu.str(A)){var pe;const Se={basic:N7,percentage:FR,soft:mw,variance:e1};oe.shadowMap.type=(pe=Se[A])!=null?pe:mw}else Nu.obj(A)&&Object.assign(oe.shadowMap,A);(ie!==oe.shadowMap.enabled||he!==oe.shadowMap.type)&&(oe.shadowMap.needsUpdate=!0)}const Te=kX();Te&&("enabled"in Te?Te.enabled=!O:"legacyMode"in Te&&(Te.legacyMode=O));const Oe=I?_g:ps,J=L?Qg:EP;oe.outputEncoding!==Oe&&(oe.outputEncoding=Oe),oe.toneMapping!==J&&(oe.toneMapping=J),ne.legacy!==O&&ne.set(()=>({legacy:O})),ne.linear!==I&&ne.set(()=>({linear:I})),ne.flat!==L&&ne.set(()=>({flat:L})),y&&!Nu.fun(y)&&!UX(y)&&!Nu.equ(y,oe,oS)&&RA(oe,y),E&&!ne.events.handlers&&ne.set({events:E(o)});const se=XSe(n,b);return Nu.equ(se,ne.size,oS)||ne.setSize(se.width,se.height,se.updateStyle,se.top,se.left),z&&ne.viewport.dpr!==BX(z)&&ne.setDpr(z),ne.frameloop!==N&&ne.setFrameloop(N),ne.onPointerMissed||ne.set({onPointerMissed:Q}),W&&!Nu.equ(W,ne.performance,oS)&&ne.set(ie=>({performance:{...ie.performance,...W}})),u=C,d=!0,this},render(_){return d||this.configure(),yI.updateContainer(on(KSe,{store:o,children:_,onCreated:u,rootElement:n}),l,null,()=>{}),o},unmount(){GX(n)}}}function KSe({store:n,children:e,onCreated:t,rootElement:i}){return z$(()=>{const s=n.getState();s.set(o=>({internal:{...o.internal,active:!0}})),t&&t(s),n.getState().events.connected||s.events.connect==null||s.events.connect(i)},[]),me.createElement(zX.Provider,{value:n},e)}function GX(n,e){const t=_E.get(n),i=t==null?void 0:t.fiber;if(i){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),yI.updateContainer(null,i,null,()=>{s&&setTimeout(()=>{try{var o,l,u,d;s.events.disconnect==null||s.events.disconnect(),(o=s.gl)==null||(l=o.renderLists)==null||l.dispose==null||l.dispose(),(u=s.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(d=s.gl)!=null&&d.xr&&s.xr.disconnect(),NSe(s),_E.delete(n),e&&e(n)}catch{}},500)})}}yI.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:me.version});function uN(){return uN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},uN.apply(this,arguments)}function cN(n,e,t){var i,s,o,l,u;e==null&&(e=100);function d(){var _=Date.now()-l;_<e&&_>=0?i=setTimeout(d,e-_):(i=null,t||(u=n.apply(o,s),o=s=null))}var p=function(){o=this,s=arguments,l=Date.now();var _=t&&!i;return i||(i=setTimeout(d,e)),_&&(u=n.apply(o,s),o=s=null),u};return p.clear=function(){i&&(clearTimeout(i),i=null)},p.flush=function(){i&&(u=n.apply(o,s),o=s=null,clearTimeout(i),i=null)},p}cN.debounce=cN;var g5=cN;function JSe(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:s}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const o=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[l,u]=me.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),d=me.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l}),p=e?typeof e=="number"?e:e.scroll:null,_=e?typeof e=="number"?e:e.resize:null,y=me.useRef(!1);me.useEffect(()=>(y.current=!0,()=>void(y.current=!1)));const[b,E,C]=me.useMemo(()=>{const O=()=>{if(!d.current.element)return;const{left:P,top:N,width:z,height:W,bottom:H,right:U,x:Q,y:ne}=d.current.element.getBoundingClientRect(),oe={left:P,top:N,width:z,height:W,bottom:H,right:U,x:Q,y:ne};d.current.element instanceof HTMLElement&&s&&(oe.height=d.current.element.offsetHeight,oe.width=d.current.element.offsetWidth),Object.freeze(oe),y.current&&!eEe(d.current.lastBounds,oe)&&u(d.current.lastBounds=oe)};return[O,_?g5(O,_):O,p?g5(O,p):O]},[u,s,p,_]);function A(){d.current.scrollContainers&&(d.current.scrollContainers.forEach(O=>O.removeEventListener("scroll",C,!0)),d.current.scrollContainers=null),d.current.resizeObserver&&(d.current.resizeObserver.disconnect(),d.current.resizeObserver=null)}function I(){!d.current.element||(d.current.resizeObserver=new o(C),d.current.resizeObserver.observe(d.current.element),t&&d.current.scrollContainers&&d.current.scrollContainers.forEach(O=>O.addEventListener("scroll",C,{capture:!0,passive:!0})))}const L=O=>{!O||O===d.current.element||(A(),d.current.element=O,d.current.scrollContainers=WX(O),I())};return QSe(C,!!t),qSe(E),me.useEffect(()=>{A(),I()},[t,C,E]),me.useEffect(()=>A,[]),[L,l,b]}function qSe(n){me.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function QSe(n,e){me.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function WX(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:s}=window.getComputedStyle(n);return[t,i,s].some(o=>o==="auto"||o==="scroll")&&e.push(n),[...e,...WX(n.parentElement)]}const ZSe=["x","y","top","bottom","left","right","width","height"],eEe=(n,e)=>ZSe.every(t=>n[t]===e[t]);var tEe=Object.defineProperty,nEe=Object.defineProperties,rEe=Object.getOwnPropertyDescriptors,_5=Object.getOwnPropertySymbols,iEe=Object.prototype.hasOwnProperty,sEe=Object.prototype.propertyIsEnumerable,v5=(n,e,t)=>e in n?tEe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,y5=(n,e)=>{for(var t in e||(e={}))iEe.call(e,t)&&v5(n,t,e[t]);if(_5)for(var t of _5(e))sEe.call(e,t)&&v5(n,t,e[t]);return n},oEe=(n,e)=>nEe(n,rEe(e)),b5;function VX(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const s=VX(i,e,t);if(s)return s;i=e?null:i.sibling}}function jX(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const rF=jX(me.createContext(null));class XX extends me.Component{render(){return on(rF.Provider,{value:this._reactInternals,children:this.props.children})}}const{ReactCurrentOwner:T5,ReactCurrentDispatcher:S5}=(b5=me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)!=null?b5:{};function aEe(){const n=me.useContext(rF),e=me.useId();return me.useMemo(()=>{var t;return(t=T5==null?void 0:T5.current)!=null?t:VX(n,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[n,e])}function lEe(){var n,e;const t=aEe(),[i]=me.useState(()=>new Map);i.clear();let s=t;for(;s;){const o=(n=s.type)==null?void 0:n._context;o&&o!==rF&&!i.has(o)&&i.set(o,(e=S5==null?void 0:S5.current)==null?void 0:e.readContext(jX(o))),s=s.return}return me.useMemo(()=>Array.from(i.keys()).reduce((o,l)=>u=>me.createElement(o,null,me.createElement(l.Provider,oEe(y5({},u),{value:i.get(l)}))),o=>on(XX,{...y5({},o)})),[i])}const LO={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function uEe(n){const{handlePointer:e}=USe(n);return{priority:1,enabled:!0,compute(t,i,s){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(LO).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:s}=n.getState();(t=s.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{var i;const{set:s,events:o}=n.getState();o.disconnect==null||o.disconnect(),s(l=>({events:{...l.events,connected:t}})),Object.entries((i=o.handlers)!=null?i:[]).forEach(([l,u])=>{const[d,p]=LO[l];t.addEventListener(d,u,{passive:p})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var s;Object.entries((s=i.handlers)!=null?s:[]).forEach(([o,l])=>{if(i&&i.connected instanceof HTMLElement){const[u]=LO[o];i.connected.removeEventListener(u,l)}}),t(o=>({events:{...o.events,connected:void 0}}))}}}}const cEe=me.forwardRef(function({children:n,fallback:e,resize:t,style:i,gl:s,events:o=uEe,eventSource:l,eventPrefix:u,shadows:d,linear:p,flat:_,legacy:y,orthographic:b,frameloop:E,dpr:C,performance:A,raycaster:I,camera:L,onPointerMissed:O,onCreated:P,...N},z){me.useMemo(()=>RSe(ySe),[]);const W=lEe(),[H,U]=JSe({scroll:!0,debounce:{scroll:50,resize:0},...t}),Q=me.useRef(null),ne=me.useRef(null);me.useImperativeHandle(z,()=>Q.current);const oe=LX(O),[le,ge]=me.useState(!1),[ce,pe]=me.useState(!1);if(le)throw le;if(ce)throw ce;const Te=me.useRef(null);return z$(()=>{const Oe=Q.current;U.width>0&&U.height>0&&Oe&&(Te.current||(Te.current=YSe(Oe)),Te.current.configure({gl:s,events:o,shadows:d,linear:p,flat:_,legacy:y,orthographic:b,frameloop:E,dpr:C,performance:A,raycaster:I,camera:L,size:U,onPointerMissed:(...J)=>oe.current==null?void 0:oe.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(l?OSe(l)?l.current:l:ne.current),u&&J.setEvents({compute:(se,ie)=>{const he=se[u+"X"],Se=se[u+"Y"];ie.pointer.set(he/ie.size.width*2-1,-(Se/ie.size.height)*2+1),ie.raycaster.setFromCamera(ie.pointer,ie.camera)}}),P==null||P(J)}}),Te.current.render(on(W,{children:on(DX,{set:pe,children:on(me.Suspense,{fallback:on(LSe,{set:ge}),children:n})})})))}),me.useEffect(()=>{const Oe=Q.current;if(Oe)return()=>GX(Oe)},[]),on("div",{ref:ne,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:l?"none":"auto",...i},...N,children:on("div",{ref:H,style:{width:"100%",height:"100%"},children:on("canvas",{ref:Q,style:{display:"block"},children:e})})})}),hEe=me.forwardRef(function(n,e){return on(XX,{children:on(cEe,{...n,ref:e})})});var YX={exports:{}},Of={},E5={exports:{}},x5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w5;function dEe(){return w5||(w5=1,function(n){function e(J,se){var ie=J.length;J.push(se);e:for(;0<ie;){var he=ie-1>>>1,Se=J[he];if(0<s(Se,se))J[he]=se,J[ie]=Se,ie=he;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var se=J[0],ie=J.pop();if(ie!==se){J[0]=ie;e:for(var he=0,Se=J.length,Fe=Se>>>1;he<Fe;){var ke=2*(he+1)-1,qe=J[ke],De=ke+1,rt=J[De];if(0>s(qe,ie))De<Se&&0>s(rt,qe)?(J[he]=rt,J[De]=ie,he=De):(J[he]=qe,J[ke]=ie,he=ke);else if(De<Se&&0>s(rt,ie))J[he]=rt,J[De]=ie,he=De;else break e}}return se}function s(J,se){var ie=J.sortIndex-se.sortIndex;return ie!==0?ie:J.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],p=[],_=1,y=null,b=3,E=!1,C=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(J){for(var se=t(p);se!==null;){if(se.callback===null)i(p);else if(se.startTime<=J)i(p),se.sortIndex=se.expirationTime,e(d,se);else break;se=t(p)}}function N(J){if(A=!1,P(J),!C)if(t(d)!==null)C=!0,Te(z);else{var se=t(p);se!==null&&Oe(N,se.startTime-J)}}function z(J,se){C=!1,A&&(A=!1,L(U),U=-1),E=!0;var ie=b;try{for(P(se),y=t(d);y!==null&&(!(y.expirationTime>se)||J&&!oe());){var he=y.callback;if(typeof he=="function"){y.callback=null,b=y.priorityLevel;var Se=he(y.expirationTime<=se);se=n.unstable_now(),typeof Se=="function"?y.callback=Se:y===t(d)&&i(d),P(se)}else i(d);y=t(d)}if(y!==null)var Fe=!0;else{var ke=t(p);ke!==null&&Oe(N,ke.startTime-se),Fe=!1}return Fe}finally{y=null,b=ie,E=!1}}var W=!1,H=null,U=-1,Q=5,ne=-1;function oe(){return!(n.unstable_now()-ne<Q)}function le(){if(H!==null){var J=n.unstable_now();ne=J;var se=!0;try{se=H(!0,J)}finally{se?ge():(W=!1,H=null)}}else W=!1}var ge;if(typeof O=="function")ge=function(){O(le)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,pe=ce.port2;ce.port1.onmessage=le,ge=function(){pe.postMessage(null)}}else ge=function(){I(le,0)};function Te(J){H=J,W||(W=!0,ge())}function Oe(J,se){U=I(function(){J(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){C||E||(C=!0,Te(z))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(J){switch(b){case 1:case 2:case 3:var se=3;break;default:se=b}var ie=b;b=se;try{return J()}finally{b=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,se){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ie=b;b=J;try{return se()}finally{b=ie}},n.unstable_scheduleCallback=function(J,se,ie){var he=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?he+ie:he):ie=he,J){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=ie+Se,J={id:_++,callback:se,priorityLevel:J,startTime:ie,expirationTime:Se,sortIndex:-1},ie>he?(J.sortIndex=ie,e(p,J),t(d)===null&&J===t(p)&&(A?(L(U),U=-1):A=!0,Oe(N,ie-he))):(J.sortIndex=Se,e(d,J),C||E||(C=!0,Te(z))),J},n.unstable_shouldYield=oe,n.unstable_wrapCallback=function(J){var se=b;return function(){var ie=b;b=se;try{return J.apply(this,arguments)}finally{b=ie}}}}(x5)),x5}var $5;function pEe(){return $5||($5=1,function(n){n.exports=dEe()}(E5)),E5.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C5;function fEe(){if(C5)return Of;C5=1;var n=Vr,e=pEe();function t(v){for(var T="https://reactjs.org/docs/error-decoder.html?invariant="+v,R=1;R<arguments.length;R++)T+="&args[]="+encodeURIComponent(arguments[R]);return"Minified React error #"+v+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function o(v,T){l(v,T),l(v+"Capture",T)}function l(v,T){for(s[v]=T,v=0;v<T.length;v++)i.add(T[v])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},y={};function b(v){return d.call(y,v)?!0:d.call(_,v)?!1:p.test(v)?y[v]=!0:(_[v]=!0,!1)}function E(v,T,R,F){if(R!==null&&R.type===0)return!1;switch(typeof T){case"function":case"symbol":return!0;case"boolean":return F?!1:R!==null?!R.acceptsBooleans:(v=v.toLowerCase().slice(0,5),v!=="data-"&&v!=="aria-");default:return!1}}function C(v,T,R,F){if(T===null||typeof T>"u"||E(v,T,R,F))return!0;if(F)return!1;if(R!==null)switch(R.type){case 3:return!T;case 4:return T===!1;case 5:return isNaN(T);case 6:return isNaN(T)||1>T}return!1}function A(v,T,R,F,X,Z,ye){this.acceptsBooleans=T===2||T===3||T===4,this.attributeName=F,this.attributeNamespace=X,this.mustUseProperty=R,this.propertyName=v,this.type=T,this.sanitizeURL=Z,this.removeEmptyString=ye}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(v){I[v]=new A(v,0,!1,v,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(v){var T=v[0];I[T]=new A(T,1,!1,v[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(v){I[v]=new A(v,2,!1,v.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(v){I[v]=new A(v,2,!1,v,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(v){I[v]=new A(v,3,!1,v.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(v){I[v]=new A(v,3,!0,v,null,!1,!1)}),["capture","download"].forEach(function(v){I[v]=new A(v,4,!1,v,null,!1,!1)}),["cols","rows","size","span"].forEach(function(v){I[v]=new A(v,6,!1,v,null,!1,!1)}),["rowSpan","start"].forEach(function(v){I[v]=new A(v,5,!1,v.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function O(v){return v[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(v){var T=v.replace(L,O);I[T]=new A(T,1,!1,v,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(v){var T=v.replace(L,O);I[T]=new A(T,1,!1,v,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(v){var T=v.replace(L,O);I[T]=new A(T,1,!1,v,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(v){I[v]=new A(v,1,!1,v.toLowerCase(),null,!1,!1)}),I.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(v){I[v]=new A(v,1,!1,v.toLowerCase(),null,!0,!0)});function P(v,T,R,F){var X=I.hasOwnProperty(T)?I[T]:null;(X!==null?X.type!==0:F||!(2<T.length)||T[0]!=="o"&&T[0]!=="O"||T[1]!=="n"&&T[1]!=="N")&&(C(T,R,X,F)&&(R=null),F||X===null?b(T)&&(R===null?v.removeAttribute(T):v.setAttribute(T,""+R)):X.mustUseProperty?v[X.propertyName]=R===null?X.type===3?!1:"":R:(T=X.attributeName,F=X.attributeNamespace,R===null?v.removeAttribute(T):(X=X.type,R=X===3||X===4&&R===!0?"":""+R,F?v.setAttributeNS(F,T,R):v.setAttribute(T,R))))}var N=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),W=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),oe=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),Oe=Symbol.for("react.offscreen"),J=Symbol.iterator;function se(v){return v===null||typeof v!="object"?null:(v=J&&v[J]||v["@@iterator"],typeof v=="function"?v:null)}var ie=Object.assign,he;function Se(v){if(he===void 0)try{throw Error()}catch(R){var T=R.stack.trim().match(/\n( *(at )?)/);he=T&&T[1]||""}return`
`+he+v}var Fe=!1;function ke(v,T){if(!v||Fe)return"";Fe=!0;var R=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(T)if(T=function(){throw Error()},Object.defineProperty(T.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(T,[])}catch(Lt){var F=Lt}Reflect.construct(v,[],T)}else{try{T.call()}catch(Lt){F=Lt}v.call(T.prototype)}else{try{throw Error()}catch(Lt){F=Lt}v()}}catch(Lt){if(Lt&&F&&typeof Lt.stack=="string"){for(var X=Lt.stack.split(`
`),Z=F.stack.split(`
`),ye=X.length-1,Xe=Z.length-1;1<=ye&&0<=Xe&&X[ye]!==Z[Xe];)Xe--;for(;1<=ye&&0<=Xe;ye--,Xe--)if(X[ye]!==Z[Xe]){if(ye!==1||Xe!==1)do if(ye--,Xe--,0>Xe||X[ye]!==Z[Xe]){var st=`
`+X[ye].replace(" at new "," at ");return v.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",v.displayName)),st}while(1<=ye&&0<=Xe);break}}}finally{Fe=!1,Error.prepareStackTrace=R}return(v=v?v.displayName||v.name:"")?Se(v):""}function qe(v){switch(v.tag){case 5:return Se(v.type);case 16:return Se("Lazy");case 13:return Se("Suspense");case 19:return Se("SuspenseList");case 0:case 2:case 15:return v=ke(v.type,!1),v;case 11:return v=ke(v.type.render,!1),v;case 1:return v=ke(v.type,!0),v;default:return""}}function De(v){if(v==null)return null;if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v;switch(v){case H:return"Fragment";case W:return"Portal";case Q:return"Profiler";case U:return"StrictMode";case ge:return"Suspense";case ce:return"SuspenseList"}if(typeof v=="object")switch(v.$$typeof){case oe:return(v.displayName||"Context")+".Consumer";case ne:return(v._context.displayName||"Context")+".Provider";case le:var T=v.render;return v=v.displayName,v||(v=T.displayName||T.name||"",v=v!==""?"ForwardRef("+v+")":"ForwardRef"),v;case pe:return T=v.displayName||null,T!==null?T:De(v.type)||"Memo";case Te:T=v._payload,v=v._init;try{return De(v(T))}catch{}}return null}function rt(v){var T=v.type;switch(v.tag){case 24:return"Cache";case 9:return(T.displayName||"Context")+".Consumer";case 10:return(T._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return v=T.render,v=v.displayName||v.name||"",T.displayName||(v!==""?"ForwardRef("+v+")":"ForwardRef");case 7:return"Fragment";case 5:return T;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(T);case 8:return T===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof T=="function")return T.displayName||T.name||null;if(typeof T=="string")return T}return null}function tt(v){switch(typeof v){case"boolean":case"number":case"string":case"undefined":return v;case"object":return v;default:return""}}function ft(v){var T=v.type;return(v=v.nodeName)&&v.toLowerCase()==="input"&&(T==="checkbox"||T==="radio")}function ct(v){var T=ft(v)?"checked":"value",R=Object.getOwnPropertyDescriptor(v.constructor.prototype,T),F=""+v[T];if(!v.hasOwnProperty(T)&&typeof R<"u"&&typeof R.get=="function"&&typeof R.set=="function"){var X=R.get,Z=R.set;return Object.defineProperty(v,T,{configurable:!0,get:function(){return X.call(this)},set:function(ye){F=""+ye,Z.call(this,ye)}}),Object.defineProperty(v,T,{enumerable:R.enumerable}),{getValue:function(){return F},setValue:function(ye){F=""+ye},stopTracking:function(){v._valueTracker=null,delete v[T]}}}}function Pe(v){v._valueTracker||(v._valueTracker=ct(v))}function Ce(v){if(!v)return!1;var T=v._valueTracker;if(!T)return!0;var R=T.getValue(),F="";return v&&(F=ft(v)?v.checked?"true":"false":v.value),v=F,v!==R?(T.setValue(v),!0):!1}function je(v){if(v=v||(typeof document<"u"?document:void 0),typeof v>"u")return null;try{return v.activeElement||v.body}catch{return v.body}}function it(v,T){var R=T.checked;return ie({},T,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:R??v._wrapperState.initialChecked})}function ot(v,T){var R=T.defaultValue==null?"":T.defaultValue,F=T.checked!=null?T.checked:T.defaultChecked;R=tt(T.value!=null?T.value:R),v._wrapperState={initialChecked:F,initialValue:R,controlled:T.type==="checkbox"||T.type==="radio"?T.checked!=null:T.value!=null}}function vt(v,T){T=T.checked,T!=null&&P(v,"checked",T,!1)}function It(v,T){vt(v,T);var R=tt(T.value),F=T.type;if(R!=null)F==="number"?(R===0&&v.value===""||v.value!=R)&&(v.value=""+R):v.value!==""+R&&(v.value=""+R);else if(F==="submit"||F==="reset"){v.removeAttribute("value");return}T.hasOwnProperty("value")?kt(v,T.type,R):T.hasOwnProperty("defaultValue")&&kt(v,T.type,tt(T.defaultValue)),T.checked==null&&T.defaultChecked!=null&&(v.defaultChecked=!!T.defaultChecked)}function yt(v,T,R){if(T.hasOwnProperty("value")||T.hasOwnProperty("defaultValue")){var F=T.type;if(!(F!=="submit"&&F!=="reset"||T.value!==void 0&&T.value!==null))return;T=""+v._wrapperState.initialValue,R||T===v.value||(v.value=T),v.defaultValue=T}R=v.name,R!==""&&(v.name=""),v.defaultChecked=!!v._wrapperState.initialChecked,R!==""&&(v.name=R)}function kt(v,T,R){(T!=="number"||je(v.ownerDocument)!==v)&&(R==null?v.defaultValue=""+v._wrapperState.initialValue:v.defaultValue!==""+R&&(v.defaultValue=""+R))}var $t=Array.isArray;function mt(v,T,R,F){if(v=v.options,T){T={};for(var X=0;X<R.length;X++)T["$"+R[X]]=!0;for(R=0;R<v.length;R++)X=T.hasOwnProperty("$"+v[R].value),v[R].selected!==X&&(v[R].selected=X),X&&F&&(v[R].defaultSelected=!0)}else{for(R=""+tt(R),T=null,X=0;X<v.length;X++){if(v[X].value===R){v[X].selected=!0,F&&(v[X].defaultSelected=!0);return}T!==null||v[X].disabled||(T=v[X])}T!==null&&(T.selected=!0)}}function xe(v,T){if(T.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},T,{value:void 0,defaultValue:void 0,children:""+v._wrapperState.initialValue})}function re(v,T){var R=T.value;if(R==null){if(R=T.children,T=T.defaultValue,R!=null){if(T!=null)throw Error(t(92));if($t(R)){if(1<R.length)throw Error(t(93));R=R[0]}T=R}T==null&&(T=""),R=T}v._wrapperState={initialValue:tt(R)}}function Be(v,T){var R=tt(T.value),F=tt(T.defaultValue);R!=null&&(R=""+R,R!==v.value&&(v.value=R),T.defaultValue==null&&v.defaultValue!==R&&(v.defaultValue=R)),F!=null&&(v.defaultValue=""+F)}function dt(v){var T=v.textContent;T===v._wrapperState.initialValue&&T!==""&&T!==null&&(v.value=T)}function bt(v){switch(v){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mt(v,T){return v==null||v==="http://www.w3.org/1999/xhtml"?bt(T):v==="http://www.w3.org/2000/svg"&&T==="foreignObject"?"http://www.w3.org/1999/xhtml":v}var pt,Ke=function(v){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(T,R,F,X){MSApp.execUnsafeLocalFunction(function(){return v(T,R,F,X)})}:v}(function(v,T){if(v.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in v)v.innerHTML=T;else{for(pt=pt||document.createElement("div"),pt.innerHTML="<svg>"+T.valueOf().toString()+"</svg>",T=pt.firstChild;v.firstChild;)v.removeChild(v.firstChild);for(;T.firstChild;)v.appendChild(T.firstChild)}});function Ie(v,T){if(T){var R=v.firstChild;if(R&&R===v.lastChild&&R.nodeType===3){R.nodeValue=T;return}}v.textContent=T}var q={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ee=["Webkit","ms","Moz","O"];Object.keys(q).forEach(function(v){ee.forEach(function(T){T=T+v.charAt(0).toUpperCase()+v.substring(1),q[T]=q[v]})});function de(v,T,R){return T==null||typeof T=="boolean"||T===""?"":R||typeof T!="number"||T===0||q.hasOwnProperty(v)&&q[v]?(""+T).trim():T+"px"}function Ae(v,T){v=v.style;for(var R in T)if(T.hasOwnProperty(R)){var F=R.indexOf("--")===0,X=de(R,T[R],F);R==="float"&&(R="cssFloat"),F?v.setProperty(R,X):v[R]=X}}var Je=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jt(v,T){if(T){if(Je[v]&&(T.children!=null||T.dangerouslySetInnerHTML!=null))throw Error(t(137,v));if(T.dangerouslySetInnerHTML!=null){if(T.children!=null)throw Error(t(60));if(typeof T.dangerouslySetInnerHTML!="object"||!("__html"in T.dangerouslySetInnerHTML))throw Error(t(61))}if(T.style!=null&&typeof T.style!="object")throw Error(t(62))}}function ze(v,T){if(v.indexOf("-")===-1)return typeof T.is=="string";switch(v){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yt=null;function _t(v){return v=v.target||v.srcElement||window,v.correspondingUseElement&&(v=v.correspondingUseElement),v.nodeType===3?v.parentNode:v}var Kt=null,Xt=null,Dn=null;function ii(v){if(v=xr(v)){if(typeof Kt!="function")throw Error(t(280));var T=v.stateNode;T&&(T=kp(T),Kt(v.stateNode,v.type,T))}}function Lr(v){Xt?Dn?Dn.push(v):Dn=[v]:Xt=v}function Si(){if(Xt){var v=Xt,T=Dn;if(Dn=Xt=null,ii(v),T)for(v=0;v<T.length;v++)ii(T[v])}}function Er(v,T){return v(T)}function ir(){}var te=!1;function be(v,T,R){if(te)return v(T,R);te=!0;try{return Er(v,T,R)}finally{te=!1,(Xt!==null||Dn!==null)&&(ir(),Si())}}function He(v,T){var R=v.stateNode;if(R===null)return null;var F=kp(R);if(F===null)return null;R=F[T];e:switch(T){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(v=v.type,F=!(v==="button"||v==="input"||v==="select"||v==="textarea")),v=!F;break e;default:v=!1}if(v)return null;if(R&&typeof R!="function")throw Error(t(231,T,typeof R));return R}var at=!1;if(u)try{var Ft={};Object.defineProperty(Ft,"passive",{get:function(){at=!0}}),window.addEventListener("test",Ft,Ft),window.removeEventListener("test",Ft,Ft)}catch{at=!1}function rn(v,T,R,F,X,Z,ye,Xe,st){var Lt=Array.prototype.slice.call(arguments,3);try{T.apply(R,Lt)}catch(qt){this.onError(qt)}}var Rn=!1,Le=null,gt=!1,Ct=null,Tt={onError:function(v){Rn=!0,Le=v}};function zt(v,T,R,F,X,Z,ye,Xe,st){Rn=!1,Le=null,rn.apply(Tt,arguments)}function On(v,T,R,F,X,Z,ye,Xe,st){if(zt.apply(this,arguments),Rn){if(Rn){var Lt=Le;Rn=!1,Le=null}else throw Error(t(198));gt||(gt=!0,Ct=Lt)}}function tr(v){var T=v,R=v;if(v.alternate)for(;T.return;)T=T.return;else{v=T;do T=v,T.flags&4098&&(R=T.return),v=T.return;while(v)}return T.tag===3?R:null}function yr(v){if(v.tag===13){var T=v.memoizedState;if(T===null&&(v=v.alternate,v!==null&&(T=v.memoizedState)),T!==null)return T.dehydrated}return null}function Rr(v){if(tr(v)!==v)throw Error(t(188))}function Li(v){var T=v.alternate;if(!T){if(T=tr(v),T===null)throw Error(t(188));return T!==v?null:v}for(var R=v,F=T;;){var X=R.return;if(X===null)break;var Z=X.alternate;if(Z===null){if(F=X.return,F!==null){R=F;continue}break}if(X.child===Z.child){for(Z=X.child;Z;){if(Z===R)return Rr(X),v;if(Z===F)return Rr(X),T;Z=Z.sibling}throw Error(t(188))}if(R.return!==F.return)R=X,F=Z;else{for(var ye=!1,Xe=X.child;Xe;){if(Xe===R){ye=!0,R=X,F=Z;break}if(Xe===F){ye=!0,F=X,R=Z;break}Xe=Xe.sibling}if(!ye){for(Xe=Z.child;Xe;){if(Xe===R){ye=!0,R=Z,F=X;break}if(Xe===F){ye=!0,F=Z,R=X;break}Xe=Xe.sibling}if(!ye)throw Error(t(189))}}if(R.alternate!==F)throw Error(t(190))}if(R.tag!==3)throw Error(t(188));return R.stateNode.current===R?v:T}function Dr(v){return v=Li(v),v!==null?jr(v):null}function jr(v){if(v.tag===5||v.tag===6)return v;for(v=v.child;v!==null;){var T=jr(v);if(T!==null)return T;v=v.sibling}return null}var bs=e.unstable_scheduleCallback,Ia=e.unstable_cancelCallback,wo=e.unstable_shouldYield,jl=e.unstable_requestPaint,Zt=e.unstable_now,Cr=e.unstable_getCurrentPriorityLevel,qa=e.unstable_ImmediatePriority,Ra=e.unstable_UserBlockingPriority,Ns=e.unstable_NormalPriority,Bs=e.unstable_LowPriority,Di=e.unstable_IdlePriority,Ar=null,$n=null;function $r(v){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(Ar,v,void 0,(v.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:Ts,mr=Math.log,Ni=Math.LN2;function Ts(v){return v>>>=0,v===0?32:31-(mr(v)/Ni|0)|0}var ci=64,fs=4194304;function Qa(v){switch(v&-v){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return v&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return v}}function ka(v,T){var R=v.pendingLanes;if(R===0)return 0;var F=0,X=v.suspendedLanes,Z=v.pingedLanes,ye=R&268435455;if(ye!==0){var Xe=ye&~X;Xe!==0?F=Qa(Xe):(Z&=ye,Z!==0&&(F=Qa(Z)))}else ye=R&~X,ye!==0?F=Qa(ye):Z!==0&&(F=Qa(Z));if(F===0)return 0;if(T!==0&&T!==F&&!(T&X)&&(X=F&-F,Z=T&-T,X>=Z||X===16&&(Z&4194240)!==0))return T;if(F&4&&(F|=R&16),T=v.entangledLanes,T!==0)for(v=v.entanglements,T&=F;0<T;)R=31-zr(T),X=1<<R,F|=v[R],T&=~X;return F}function uc(v,T){switch(v){case 1:case 2:case 4:return T+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return T+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cc(v,T){for(var R=v.suspendedLanes,F=v.pingedLanes,X=v.expirationTimes,Z=v.pendingLanes;0<Z;){var ye=31-zr(Z),Xe=1<<ye,st=X[ye];st===-1?(!(Xe&R)||Xe&F)&&(X[ye]=uc(Xe,T)):st<=T&&(v.expiredLanes|=Xe),Z&=~Xe}}function Vs(v){return v=v.pendingLanes&-1073741825,v!==0?v:v&1073741824?1073741824:0}function Yo(){var v=ci;return ci<<=1,!(ci&4194240)&&(ci=64),v}function Xl(v){for(var T=[],R=0;31>R;R++)T.push(v);return T}function mu(v,T,R){v.pendingLanes|=T,T!==536870912&&(v.suspendedLanes=0,v.pingedLanes=0),v=v.eventTimes,T=31-zr(T),v[T]=R}function hh(v,T){var R=v.pendingLanes&~T;v.pendingLanes=T,v.suspendedLanes=0,v.pingedLanes=0,v.expiredLanes&=T,v.mutableReadLanes&=T,v.entangledLanes&=T,T=v.entanglements;var F=v.eventTimes;for(v=v.expirationTimes;0<R;){var X=31-zr(R),Z=1<<X;T[X]=0,F[X]=-1,v[X]=-1,R&=~Z}}function Ko(v,T){var R=v.entangledLanes|=T;for(v=v.entanglements;R;){var F=31-zr(R),X=1<<F;X&T|v[F]&T&&(v[F]|=T),R&=~X}}var pr=0;function Ei(v){return v&=-v,1<v?4<v?v&268435455?16:536870912:4:1}var kc,dh,Oc,Sl,gu,El=!1,xl=[],gr=null,_r=null,Yl=null,Za=new Map,el=new Map,_u=[],Ki="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ms(v,T){switch(v){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":Yl=null;break;case"pointerover":case"pointerout":Za.delete(T.pointerId);break;case"gotpointercapture":case"lostpointercapture":el.delete(T.pointerId)}}function tl(v,T,R,F,X,Z){return v===null||v.nativeEvent!==Z?(v={blockedOn:T,domEventName:R,eventSystemFlags:F,nativeEvent:Z,targetContainers:[X]},T!==null&&(T=xr(T),T!==null&&dh(T)),v):(v.eventSystemFlags|=F,T=v.targetContainers,X!==null&&T.indexOf(X)===-1&&T.push(X),v)}function Td(v,T,R,F,X){switch(T){case"focusin":return gr=tl(gr,v,T,R,F,X),!0;case"dragenter":return _r=tl(_r,v,T,R,F,X),!0;case"mouseover":return Yl=tl(Yl,v,T,R,F,X),!0;case"pointerover":var Z=X.pointerId;return Za.set(Z,tl(Za.get(Z)||null,v,T,R,F,X)),!0;case"gotpointercapture":return Z=X.pointerId,el.set(Z,tl(el.get(Z)||null,v,T,R,F,X)),!0}return!1}function ro(v){var T=pa(v.target);if(T!==null){var R=tr(T);if(R!==null){if(T=R.tag,T===13){if(T=yr(R),T!==null){v.blockedOn=T,gu(v.priority,function(){Oc(R)});return}}else if(T===3&&R.stateNode.current.memoizedState.isDehydrated){v.blockedOn=R.tag===3?R.stateNode.containerInfo:null;return}}}v.blockedOn=null}function Pu(v){if(v.blockedOn!==null)return!1;for(var T=v.targetContainers;0<T.length;){var R=la(v.domEventName,v.eventSystemFlags,T[0],v.nativeEvent);if(R===null){R=v.nativeEvent;var F=new R.constructor(R.type,R);Yt=F,R.target.dispatchEvent(F),Yt=null}else return T=xr(R),T!==null&&dh(T),v.blockedOn=R,!1;T.shift()}return!0}function aa(v,T,R){Pu(v)&&R.delete(T)}function vu(){El=!1,gr!==null&&Pu(gr)&&(gr=null),_r!==null&&Pu(_r)&&(_r=null),Yl!==null&&Pu(Yl)&&(Yl=null),Za.forEach(aa),el.forEach(aa)}function nr(v,T){v.blockedOn===T&&(v.blockedOn=null,El||(El=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vu)))}function Un(v){function T(X){return nr(X,v)}if(0<xl.length){nr(xl[0],v);for(var R=1;R<xl.length;R++){var F=xl[R];F.blockedOn===v&&(F.blockedOn=null)}}for(gr!==null&&nr(gr,v),_r!==null&&nr(_r,v),Yl!==null&&nr(Yl,v),Za.forEach(T),el.forEach(T),R=0;R<_u.length;R++)F=_u[R],F.blockedOn===v&&(F.blockedOn=null);for(;0<_u.length&&(R=_u[0],R.blockedOn===null);)ro(R),R.blockedOn===null&&_u.shift()}var Ss=N.ReactCurrentBatchConfig,io=!0;function Fu(v,T,R,F){var X=pr,Z=Ss.transition;Ss.transition=null;try{pr=1,ph(v,T,R,F)}finally{pr=X,Ss.transition=Z}}function yu(v,T,R,F){var X=pr,Z=Ss.transition;Ss.transition=null;try{pr=4,ph(v,T,R,F)}finally{pr=X,Ss.transition=Z}}function ph(v,T,R,F){if(io){var X=la(v,T,R,F);if(X===null)xd(v,T,F,Oa,R),ms(v,F);else if(Td(X,v,T,R,F))F.stopPropagation();else if(ms(v,F),T&4&&-1<Ki.indexOf(v)){for(;X!==null;){var Z=xr(X);if(Z!==null&&kc(Z),Z=la(v,T,R,F),Z===null&&xd(v,T,F,Oa,R),Z===X)break;X=Z}X!==null&&F.stopPropagation()}else xd(v,T,F,null,R)}}var Oa=null;function la(v,T,R,F){if(Oa=null,v=_t(F),v=pa(v),v!==null)if(T=tr(v),T===null)v=null;else if(R=T.tag,R===13){if(v=yr(T),v!==null)return v;v=null}else if(R===3){if(T.stateNode.current.memoizedState.isDehydrated)return T.tag===3?T.stateNode.containerInfo:null;v=null}else T!==v&&(v=null);return Oa=v,null}function Uu(v){switch(v){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cr()){case qa:return 1;case Ra:return 4;case Ns:case Bs:return 16;case Di:return 536870912;default:return 16}default:return 16}}var br=null,Ms=null,vi=null;function xi(){if(vi)return vi;var v,T=Ms,R=T.length,F,X="value"in br?br.value:br.textContent,Z=X.length;for(v=0;v<R&&T[v]===X[v];v++);var ye=R-v;for(F=1;F<=ye&&T[R-F]===X[Z-F];F++);return vi=X.slice(v,1<F?1-F:void 0)}function ua(v){var T=v.keyCode;return"charCode"in v?(v=v.charCode,v===0&&T===13&&(v=13)):v=T,v===10&&(v=13),32<=v||v===13?v:0}function Zr(){return!0}function bu(){return!1}function $o(v){function T(R,F,X,Z,ye){this._reactName=R,this._targetInst=X,this.type=F,this.nativeEvent=Z,this.target=ye,this.currentTarget=null;for(var Xe in v)v.hasOwnProperty(Xe)&&(R=v[Xe],this[Xe]=R?R(Z):Z[Xe]);return this.isDefaultPrevented=(Z.defaultPrevented!=null?Z.defaultPrevented:Z.returnValue===!1)?Zr:bu,this.isPropagationStopped=bu,this}return ie(T.prototype,{preventDefault:function(){this.defaultPrevented=!0;var R=this.nativeEvent;R&&(R.preventDefault?R.preventDefault():typeof R.returnValue!="unknown"&&(R.returnValue=!1),this.isDefaultPrevented=Zr)},stopPropagation:function(){var R=this.nativeEvent;R&&(R.stopPropagation?R.stopPropagation():typeof R.cancelBubble!="unknown"&&(R.cancelBubble=!0),this.isPropagationStopped=Zr)},persist:function(){},isPersistent:Zr}),T}var Tu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(v){return v.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nl=$o(Tu),Bi=ie({},Tu,{view:0,detail:0}),wi=$o(Bi),zn,$i,Xr,od=ie({},Bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zu,button:0,buttons:0,relatedTarget:function(v){return v.relatedTarget===void 0?v.fromElement===v.srcElement?v.toElement:v.fromElement:v.relatedTarget},movementX:function(v){return"movementX"in v?v.movementX:(v!==Xr&&(Xr&&v.type==="mousemove"?(zn=v.screenX-Xr.screenX,$i=v.screenY-Xr.screenY):$i=zn=0,Xr=v),zn)},movementY:function(v){return"movementY"in v?v.movementY:$i}}),Su=$o(od),Gi=ie({},od,{dataTransfer:0}),La=$o(Gi),fh=ie({},Bi,{relatedTarget:0}),cr=$o(fh),Jo=ie({},Tu,{animationName:0,elapsedTime:0,pseudoElement:0}),ad=$o(Jo),tp=ie({},Tu,{clipboardData:function(v){return"clipboardData"in v?v.clipboardData:window.clipboardData}}),Lc=$o(tp),np=ie({},Tu,{data:0}),Ip=$o(np),ff={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Is(v){var T=this.nativeEvent;return T.getModifierState?T.getModifierState(v):(v=Kl[v])?!!T[v]:!1}function zu(){return Is}var mh=ie({},Bi,{key:function(v){if(v.key){var T=ff[v.key]||v.key;if(T!=="Unidentified")return T}return v.type==="keypress"?(v=ua(v),v===13?"Enter":String.fromCharCode(v)):v.type==="keydown"||v.type==="keyup"?Sd[v.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zu,charCode:function(v){return v.type==="keypress"?ua(v):0},keyCode:function(v){return v.type==="keydown"||v.type==="keyup"?v.keyCode:0},which:function(v){return v.type==="keypress"?ua(v):v.type==="keydown"||v.type==="keyup"?v.keyCode:0}}),Da=$o(mh),ai=ie({},od,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sr=$o(ai),so=ie({},Bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zu}),Na=$o(so),Fo=ie({},Tu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jl=$o(Fo),ql=ie({},od,{deltaX:function(v){return"deltaX"in v?v.deltaX:"wheelDeltaX"in v?-v.wheelDeltaX:0},deltaY:function(v){return"deltaY"in v?v.deltaY:"wheelDeltaY"in v?-v.wheelDeltaY:"wheelDelta"in v?-v.wheelDelta:0},deltaZ:0,deltaMode:0}),Oh=$o(ql),Hr=[9,13,27,32],Ci=u&&"CompositionEvent"in window,vr=null;u&&"documentMode"in document&&(vr=document.documentMode);var Wi=u&&"TextEvent"in window&&!vr,ca=u&&(!Ci||vr&&8<vr&&11>=vr),Eu=" ",rp=!1;function ip(v,T){switch(v){case"keyup":return Hr.indexOf(T.keyCode)!==-1;case"keydown":return T.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ld(v){return v=v.detail,typeof v=="object"&&"data"in v?v.data:null}var Hu=!1;function rl(v,T){switch(v){case"compositionend":return ld(T);case"keypress":return T.which!==32?null:(rp=!0,Eu);case"textInput":return v=T.data,v===Eu&&rp?null:v;default:return null}}function Dc(v,T){if(Hu)return v==="compositionend"||!Ci&&ip(v,T)?(v=xi(),vi=Ms=br=null,Hu=!1,v):null;switch(v){case"paste":return null;case"keypress":if(!(T.ctrlKey||T.altKey||T.metaKey)||T.ctrlKey&&T.altKey){if(T.char&&1<T.char.length)return T.char;if(T.which)return String.fromCharCode(T.which)}return null;case"compositionend":return ca&&T.locale!=="ko"?null:T.data;default:return null}}var Lh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gu(v){var T=v&&v.nodeName&&v.nodeName.toLowerCase();return T==="input"?!!Lh[v.type]:T==="textarea"}function Ql(v,T,R,F){Lr(F),T=wd(T,"onChange"),0<T.length&&(R=new nl("onChange","change",null,R,F),v.push({event:R,listeners:T}))}var Ps=null,Zl=null;function Dh(v){Fh(v,0)}function Nc(v){var T=dn(v);if(Ce(T))return v}function Bc(v,T){if(v==="change")return T}var ns=!1;if(u){var Nr;if(u){var wl="oninput"in document;if(!wl){var Ba=document.createElement("div");Ba.setAttribute("oninput","return;"),wl=typeof Ba.oninput=="function"}Nr=wl}else Nr=!1;ns=Nr&&(!document.documentMode||9<document.documentMode)}function eu(){Ps&&(Ps.detachEvent("onpropertychange",xu),Zl=Ps=null)}function xu(v){if(v.propertyName==="value"&&Nc(Zl)){var T=[];Ql(T,Zl,v,_t(v)),be(Dh,T)}}function gh(v,T,R){v==="focusin"?(eu(),Ps=T,Zl=R,Ps.attachEvent("onpropertychange",xu)):v==="focusout"&&eu()}function Ed(v){if(v==="selectionchange"||v==="keyup"||v==="keydown")return Nc(Zl)}function hi(v,T){if(v==="click")return Nc(T)}function ve(v,T){if(v==="input"||v==="change")return Nc(T)}function We(v,T){return v===T&&(v!==0||1/v===1/T)||v!==v&&T!==T}var Ne=typeof Object.is=="function"?Object.is:We;function Ot(v,T){if(Ne(v,T))return!0;if(typeof v!="object"||v===null||typeof T!="object"||T===null)return!1;var R=Object.keys(v),F=Object.keys(T);if(R.length!==F.length)return!1;for(F=0;F<R.length;F++){var X=R[F];if(!d.call(T,X)||!Ne(v[X],T[X]))return!1}return!0}function en(v){for(;v&&v.firstChild;)v=v.firstChild;return v}function Cn(v,T){var R=en(v);v=0;for(var F;R;){if(R.nodeType===3){if(F=v+R.textContent.length,v<=T&&F>=T)return{node:R,offset:T-v};v=F}e:{for(;R;){if(R.nextSibling){R=R.nextSibling;break e}R=R.parentNode}R=void 0}R=en(R)}}function jn(v,T){return v&&T?v===T?!0:v&&v.nodeType===3?!1:T&&T.nodeType===3?jn(v,T.parentNode):"contains"in v?v.contains(T):v.compareDocumentPosition?!!(v.compareDocumentPosition(T)&16):!1:!1}function mn(){for(var v=window,T=je();T instanceof v.HTMLIFrameElement;){try{var R=typeof T.contentWindow.location.href=="string"}catch{R=!1}if(R)v=T.contentWindow;else break;T=je(v.document)}return T}function Br(v){var T=v&&v.nodeName&&v.nodeName.toLowerCase();return T&&(T==="input"&&(v.type==="text"||v.type==="search"||v.type==="tel"||v.type==="url"||v.type==="password")||T==="textarea"||v.contentEditable==="true")}function oo(v){var T=mn(),R=v.focusedElem,F=v.selectionRange;if(T!==R&&R&&R.ownerDocument&&jn(R.ownerDocument.documentElement,R)){if(F!==null&&Br(R)){if(T=F.start,v=F.end,v===void 0&&(v=T),"selectionStart"in R)R.selectionStart=T,R.selectionEnd=Math.min(v,R.value.length);else if(v=(T=R.ownerDocument||document)&&T.defaultView||window,v.getSelection){v=v.getSelection();var X=R.textContent.length,Z=Math.min(F.start,X);F=F.end===void 0?Z:Math.min(F.end,X),!v.extend&&Z>F&&(X=F,F=Z,Z=X),X=Cn(R,Z);var ye=Cn(R,F);X&&ye&&(v.rangeCount!==1||v.anchorNode!==X.node||v.anchorOffset!==X.offset||v.focusNode!==ye.node||v.focusOffset!==ye.offset)&&(T=T.createRange(),T.setStart(X.node,X.offset),v.removeAllRanges(),Z>F?(v.addRange(T),v.extend(ye.node,ye.offset)):(T.setEnd(ye.node,ye.offset),v.addRange(T)))}}for(T=[],v=R;v=v.parentNode;)v.nodeType===1&&T.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<T.length;R++)v=T[R],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}var yi=u&&"documentMode"in document&&11>=document.documentMode,ao=null,il=null,Pi=null,gs=!1;function wu(v,T,R){var F=R.window===R?R.document:R.nodeType===9?R:R.ownerDocument;gs||ao==null||ao!==je(F)||(F=ao,"selectionStart"in F&&Br(F)?F={start:F.selectionStart,end:F.selectionEnd}:(F=(F.ownerDocument&&F.ownerDocument.defaultView||window).getSelection(),F={anchorNode:F.anchorNode,anchorOffset:F.anchorOffset,focusNode:F.focusNode,focusOffset:F.focusOffset}),Pi&&Ot(Pi,F)||(Pi=F,F=wd(il,"onSelect"),0<F.length&&(T=new nl("onSelect","select",null,T,R),v.push({event:T,listeners:F}),T.target=ao)))}function Xn(v,T){var R={};return R[v.toLowerCase()]=T.toLowerCase(),R["Webkit"+v]="webkit"+T,R["Moz"+v]="moz"+T,R}var ha={animationend:Xn("Animation","AnimationEnd"),animationiteration:Xn("Animation","AnimationIteration"),animationstart:Xn("Animation","AnimationStart"),transitionend:Xn("Transition","TransitionEnd")},js={},Fs={};u&&(Fs=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function Pa(v){if(js[v])return js[v];if(!ha[v])return v;var T=ha[v],R;for(R in T)if(T.hasOwnProperty(R)&&R in Fs)return js[v]=T[R];return v}var Nh=Pa("animationend"),_h=Pa("animationiteration"),hc=Pa("animationstart"),qo=Pa("transitionend"),Pc=new Map,Bh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fa(v,T){Pc.set(v,T),o(T,[v])}for(var Ph=0;Ph<Bh.length;Ph++){var dc=Bh[Ph],Wu=dc.toLowerCase(),ud=dc[0].toUpperCase()+dc.slice(1);Fa(Wu,"on"+ud)}Fa(Nh,"onAnimationEnd"),Fa(_h,"onAnimationIteration"),Fa(hc,"onAnimationStart"),Fa("dblclick","onDoubleClick"),Fa("focusin","onFocus"),Fa("focusout","onBlur"),Fa(qo,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lo=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qo));function $l(v,T,R){var F=v.type||"unknown-event";v.currentTarget=R,On(F,T,void 0,v),v.currentTarget=null}function Fh(v,T){T=(T&4)!==0;for(var R=0;R<v.length;R++){var F=v[R],X=F.event;F=F.listeners;e:{var Z=void 0;if(T)for(var ye=F.length-1;0<=ye;ye--){var Xe=F[ye],st=Xe.instance,Lt=Xe.currentTarget;if(Xe=Xe.listener,st!==Z&&X.isPropagationStopped())break e;$l(X,Xe,Lt),Z=st}else for(ye=0;ye<F.length;ye++){if(Xe=F[ye],st=Xe.instance,Lt=Xe.currentTarget,Xe=Xe.listener,st!==Z&&X.isPropagationStopped())break e;$l(X,Xe,Lt),Z=st}}}if(gt)throw v=Ct,gt=!1,Ct=null,v}function Fi(v,T){var R=T[da];R===void 0&&(R=T[da]=new Set);var F=v+"__bubble";R.has(F)||(Fc(T,v,2,!1),R.add(F))}function cd(v,T,R){var F=0;T&&(F|=4),Fc(R,v,F,T)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function tu(v){if(!v[Vu]){v[Vu]=!0,i.forEach(function(R){R!=="selectionchange"&&(lo.has(R)||cd(R,!1,v),cd(R,!0,v))});var T=v.nodeType===9?v:v.ownerDocument;T===null||T[Vu]||(T[Vu]=!0,cd("selectionchange",!1,T))}}function Fc(v,T,R,F){switch(Uu(T)){case 1:var X=Fu;break;case 4:X=yu;break;default:X=ph}R=X.bind(null,T,R,v),X=void 0,!at||T!=="touchstart"&&T!=="touchmove"&&T!=="wheel"||(X=!0),F?X!==void 0?v.addEventListener(T,R,{capture:!0,passive:X}):v.addEventListener(T,R,!0):X!==void 0?v.addEventListener(T,R,{passive:X}):v.addEventListener(T,R,!1)}function xd(v,T,R,F,X){var Z=F;if(!(T&1)&&!(T&2)&&F!==null)e:for(;;){if(F===null)return;var ye=F.tag;if(ye===3||ye===4){var Xe=F.stateNode.containerInfo;if(Xe===X||Xe.nodeType===8&&Xe.parentNode===X)break;if(ye===4)for(ye=F.return;ye!==null;){var st=ye.tag;if((st===3||st===4)&&(st=ye.stateNode.containerInfo,st===X||st.nodeType===8&&st.parentNode===X))return;ye=ye.return}for(;Xe!==null;){if(ye=pa(Xe),ye===null)return;if(st=ye.tag,st===5||st===6){F=Z=ye;continue e}Xe=Xe.parentNode}}F=F.return}be(function(){var Lt=Z,qt=_t(R),ln=[];e:{var nn=Pc.get(v);if(nn!==void 0){var kn=nl,Kn=v;switch(v){case"keypress":if(ua(R)===0)break e;case"keydown":case"keyup":kn=Da;break;case"focusin":Kn="focus",kn=cr;break;case"focusout":Kn="blur",kn=cr;break;case"beforeblur":case"afterblur":kn=cr;break;case"click":if(R.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":kn=Su;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":kn=La;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":kn=Na;break;case Nh:case _h:case hc:kn=ad;break;case qo:kn=Jl;break;case"scroll":kn=wi;break;case"wheel":kn=Oh;break;case"copy":case"cut":case"paste":kn=Lc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":kn=Sr}var Zn=(T&4)!==0,Ro=!Zn&&v==="scroll",wt=Zn?nn!==null?nn+"Capture":null:nn;Zn=[];for(var ht=Lt,xt;ht!==null;){xt=ht;var yn=xt.stateNode;if(xt.tag===5&&yn!==null&&(xt=yn,wt!==null&&(yn=He(ht,wt),yn!=null&&Zn.push(Cl(ht,yn,xt)))),Ro)break;ht=ht.return}0<Zn.length&&(nn=new kn(nn,Kn,null,R,qt),ln.push({event:nn,listeners:Zn}))}}if(!(T&7)){e:{if(nn=v==="mouseover"||v==="pointerover",kn=v==="mouseout"||v==="pointerout",nn&&R!==Yt&&(Kn=R.relatedTarget||R.fromElement)&&(pa(Kn)||Kn[Ji]))break e;if((kn||nn)&&(nn=qt.window===qt?qt:(nn=qt.ownerDocument)?nn.defaultView||nn.parentWindow:window,kn?(Kn=R.relatedTarget||R.toElement,kn=Lt,Kn=Kn?pa(Kn):null,Kn!==null&&(Ro=tr(Kn),Kn!==Ro||Kn.tag!==5&&Kn.tag!==6)&&(Kn=null)):(kn=null,Kn=Lt),kn!==Kn)){if(Zn=Su,yn="onMouseLeave",wt="onMouseEnter",ht="mouse",(v==="pointerout"||v==="pointerover")&&(Zn=Sr,yn="onPointerLeave",wt="onPointerEnter",ht="pointer"),Ro=kn==null?nn:dn(kn),xt=Kn==null?nn:dn(Kn),nn=new Zn(yn,ht+"leave",kn,R,qt),nn.target=Ro,nn.relatedTarget=xt,yn=null,pa(qt)===Lt&&(Zn=new Zn(wt,ht+"enter",Kn,R,qt),Zn.target=xt,Zn.relatedTarget=Ro,yn=Zn),Ro=yn,kn&&Kn)t:{for(Zn=kn,wt=Kn,ht=0,xt=Zn;xt;xt=Uh(xt))ht++;for(xt=0,yn=wt;yn;yn=Uh(yn))xt++;for(;0<ht-xt;)Zn=Uh(Zn),ht--;for(;0<xt-ht;)wt=Uh(wt),xt--;for(;ht--;){if(Zn===wt||wt!==null&&Zn===wt.alternate)break t;Zn=Uh(Zn),wt=Uh(wt)}Zn=null}else Zn=null;kn!==null&&ei(ln,nn,kn,Zn,!1),Kn!==null&&Ro!==null&&ei(ln,Ro,Kn,Zn,!0)}}e:{if(nn=Lt?dn(Lt):window,kn=nn.nodeName&&nn.nodeName.toLowerCase(),kn==="select"||kn==="input"&&nn.type==="file")var sr=Bc;else if(Gu(nn))if(ns)sr=ve;else{sr=Ed;var Qn=gh}else(kn=nn.nodeName)&&kn.toLowerCase()==="input"&&(nn.type==="checkbox"||nn.type==="radio")&&(sr=hi);if(sr&&(sr=sr(v,Lt))){Ql(ln,sr,R,qt);break e}Qn&&Qn(v,nn,Lt),v==="focusout"&&(Qn=nn._wrapperState)&&Qn.controlled&&nn.type==="number"&&kt(nn,"number",nn.value)}switch(Qn=Lt?dn(Lt):window,v){case"focusin":(Gu(Qn)||Qn.contentEditable==="true")&&(ao=Qn,il=Lt,Pi=null);break;case"focusout":Pi=il=ao=null;break;case"mousedown":gs=!0;break;case"contextmenu":case"mouseup":case"dragend":gs=!1,wu(ln,R,qt);break;case"selectionchange":if(yi)break;case"keydown":case"keyup":wu(ln,R,qt)}var dr;if(Ci)e:{switch(v){case"compositionstart":var Ir="onCompositionStart";break e;case"compositionend":Ir="onCompositionEnd";break e;case"compositionupdate":Ir="onCompositionUpdate";break e}Ir=void 0}else Hu?ip(v,R)&&(Ir="onCompositionEnd"):v==="keydown"&&R.keyCode===229&&(Ir="onCompositionStart");Ir&&(ca&&R.locale!=="ko"&&(Hu||Ir!=="onCompositionStart"?Ir==="onCompositionEnd"&&Hu&&(dr=xi()):(br=qt,Ms="value"in br?br.value:br.textContent,Hu=!0)),Qn=wd(Lt,Ir),0<Qn.length&&(Ir=new Ip(Ir,v,null,R,qt),ln.push({event:Ir,listeners:Qn}),dr?Ir.data=dr:(dr=ld(R),dr!==null&&(Ir.data=dr)))),(dr=Wi?rl(v,R):Dc(v,R))&&(Lt=wd(Lt,"onBeforeInput"),0<Lt.length&&(qt=new Ip("onBeforeInput","beforeinput",null,R,qt),ln.push({event:qt,listeners:Lt}),qt.data=dr))}Fh(ln,T)})}function Cl(v,T,R){return{instance:v,listener:T,currentTarget:R}}function wd(v,T){for(var R=T+"Capture",F=[];v!==null;){var X=v,Z=X.stateNode;X.tag===5&&Z!==null&&(X=Z,Z=He(v,R),Z!=null&&F.unshift(Cl(v,Z,X)),Z=He(v,T),Z!=null&&F.push(Cl(v,Z,X))),v=v.return}return F}function Uh(v){if(v===null)return null;do v=v.return;while(v&&v.tag!==5);return v||null}function ei(v,T,R,F,X){for(var Z=T._reactName,ye=[];R!==null&&R!==F;){var Xe=R,st=Xe.alternate,Lt=Xe.stateNode;if(st!==null&&st===F)break;Xe.tag===5&&Lt!==null&&(Xe=Lt,X?(st=He(R,Z),st!=null&&ye.unshift(Cl(R,st,Xe))):X||(st=He(R,Z),st!=null&&ye.push(Cl(R,st,Xe)))),R=R.return}ye.length!==0&&v.push({event:T,listeners:ye})}var Ai=/\r\n?/g,mf=/\u0000|\uFFFD/g;function Rp(v){return(typeof v=="string"?v:""+v).replace(Ai,`
`).replace(mf,"")}function Al(v,T,R){if(T=Rp(T),Rp(v)!==T&&R)throw Error(t(425))}function nu(){}var ju=null,Xu=null;function vh(v,T){return v==="textarea"||v==="noscript"||typeof T.children=="string"||typeof T.children=="number"||typeof T.dangerouslySetInnerHTML=="object"&&T.dangerouslySetInnerHTML!==null&&T.dangerouslySetInnerHTML.__html!=null}var sl=typeof setTimeout=="function"?setTimeout:void 0,Zo=typeof clearTimeout=="function"?clearTimeout:void 0,Ml=typeof Promise=="function"?Promise:void 0,Uc=typeof queueMicrotask=="function"?queueMicrotask:typeof Ml<"u"?function(v){return Ml.resolve(null).then(v).catch(Il)}:sl;function Il(v){setTimeout(function(){throw v})}function zc(v,T){var R=T,F=0;do{var X=R.nextSibling;if(v.removeChild(R),X&&X.nodeType===8)if(R=X.data,R==="/$"){if(F===0){v.removeChild(X),Un(T);return}F--}else R!=="$"&&R!=="$?"&&R!=="$!"||F++;R=X}while(R);Un(T)}function pc(v){for(;v!=null;v=v.nextSibling){var T=v.nodeType;if(T===1||T===3)break;if(T===8){if(T=v.data,T==="$"||T==="$!"||T==="$?")break;if(T==="/$")return null}}return v}function $d(v){v=v.previousSibling;for(var T=0;v;){if(v.nodeType===8){var R=v.data;if(R==="$"||R==="$!"||R==="$?"){if(T===0)return v;T--}else R==="/$"&&T++}v=v.previousSibling}return null}var Ua=Math.random().toString(36).slice(2),Gr="__reactFiber$"+Ua,ol="__reactProps$"+Ua,Ji="__reactContainer$"+Ua,da="__reactEvents$"+Ua,Y="__reactListeners$"+Ua,Es="__reactHandles$"+Ua;function pa(v){var T=v[Gr];if(T)return T;for(var R=v.parentNode;R;){if(T=R[Ji]||R[Gr]){if(R=T.alternate,T.child!==null||R!==null&&R.child!==null)for(v=$d(v);v!==null;){if(R=v[Gr])return R;v=$d(v)}return T}v=R,R=v.parentNode}return null}function xr(v){return v=v[Gr]||v[Ji],!v||v.tag!==5&&v.tag!==6&&v.tag!==13&&v.tag!==3?null:v}function dn(v){if(v.tag===5||v.tag===6)return v.stateNode;throw Error(t(33))}function kp(v){return v[ol]||null}var al=[],Mi=-1;function li(v){return{current:v}}function qi(v){0>Mi||(v.current=al[Mi],al[Mi]=null,Mi--)}function rs(v,T){Mi++,al[Mi]=v.current,v.current=T}var Hc={},fa=li(Hc),ma=li(!1),is=Hc;function Gc(v,T){var R=v.type.contextTypes;if(!R)return Hc;var F=v.stateNode;if(F&&F.__reactInternalMemoizedUnmaskedChildContext===T)return F.__reactInternalMemoizedMaskedChildContext;var X={},Z;for(Z in R)X[Z]=T[Z];return F&&(v=v.stateNode,v.__reactInternalMemoizedUnmaskedChildContext=T,v.__reactInternalMemoizedMaskedChildContext=X),X}function ea(v){return v=v.childContextTypes,v!=null}function Cd(){qi(ma),qi(fa)}function Ad(v,T,R){if(fa.current!==Hc)throw Error(t(168));rs(fa,T),rs(ma,R)}function zh(v,T,R){var F=v.stateNode;if(T=T.childContextTypes,typeof F.getChildContext!="function")return R;F=F.getChildContext();for(var X in F)if(!(X in T))throw Error(t(108,rt(v)||"Unknown",X));return ie({},R,F)}function Us(v){return v=(v=v.stateNode)&&v.__reactInternalMemoizedMergedChildContext||Hc,is=fa.current,rs(fa,v),rs(ma,ma.current),!0}function Vn(v,T,R){var F=v.stateNode;if(!F)throw Error(t(169));R?(v=zh(v,T,is),F.__reactInternalMemoizedMergedChildContext=v,qi(ma),qi(fa),rs(fa,v)):qi(ma),rs(ma,R)}var zs=null,Xs=!1,Ui=!1;function ru(v){zs===null?zs=[v]:zs.push(v)}function Uo(v){Xs=!0,ru(v)}function Sn(){if(!Ui&&zs!==null){Ui=!0;var v=0,T=pr;try{var R=zs;for(pr=1;v<R.length;v++){var F=R[v];do F=F(!0);while(F!==null)}zs=null,Xs=!1}catch(X){throw zs!==null&&(zs=zs.slice(v+1)),bs(qa,Sn),X}finally{pr=T,Ui=!1}}return null}var di=[],pi=0,Op=null,yh=0,uo=[],ga=0,xn=null,gn=1,ll="";function fc(v,T){di[pi++]=yh,di[pi++]=Op,Op=v,yh=T}function gf(v,T,R){uo[ga++]=gn,uo[ga++]=ll,uo[ga++]=xn,xn=v;var F=gn;v=ll;var X=32-zr(F)-1;F&=~(1<<X),R+=1;var Z=32-zr(T)+X;if(30<Z){var ye=X-X%5;Z=(F&(1<<ye)-1).toString(32),F>>=ye,X-=ye,gn=1<<32-zr(T)+X|R<<X|F,ll=Z+v}else gn=1<<Z|R<<X|F,ll=v}function iu(v){v.return!==null&&(fc(v,1),gf(v,1,0))}function Co(v){for(;v===Op;)Op=di[--pi],di[pi]=null,yh=di[--pi],di[pi]=null;for(;v===xn;)xn=uo[--ga],uo[ga]=null,ll=uo[--ga],uo[ga]=null,gn=uo[--ga],uo[ga]=null}var _s=null,ul=null,ss=!1,cl=null;function zo(v,T){var R=ku(5,null,null,0);R.elementType="DELETED",R.stateNode=T,R.return=v,T=v.deletions,T===null?(v.deletions=[R],v.flags|=16):T.push(R)}function Hh(v,T){switch(v.tag){case 5:var R=v.type;return T=T.nodeType!==1||R.toLowerCase()!==T.nodeName.toLowerCase()?null:T,T!==null?(v.stateNode=T,_s=v,ul=pc(T.firstChild),!0):!1;case 6:return T=v.pendingProps===""||T.nodeType!==3?null:T,T!==null?(v.stateNode=T,_s=v,ul=null,!0):!1;case 13:return T=T.nodeType!==8?null:T,T!==null?(R=xn!==null?{id:gn,overflow:ll}:null,v.memoizedState={dehydrated:T,treeContext:R,retryLane:1073741824},R=ku(18,null,null,0),R.stateNode=T,R.return=v,v.child=R,_s=v,ul=null,!0):!1;default:return!1}}function za(v){return(v.mode&1)!==0&&(v.flags&128)===0}function Ii(v){if(ss){var T=ul;if(T){var R=T;if(!Hh(v,T)){if(za(v))throw Error(t(418));T=pc(R.nextSibling);var F=_s;T&&Hh(v,T)?zo(F,R):(v.flags=v.flags&-4097|2,ss=!1,_s=v)}}else{if(za(v))throw Error(t(418));v.flags=v.flags&-4097|2,ss=!1,_s=v}}}function Md(v){for(v=v.return;v!==null&&v.tag!==5&&v.tag!==3&&v.tag!==13;)v=v.return;_s=v}function Wc(v){if(v!==_s)return!1;if(!ss)return Md(v),ss=!0,!1;var T;if((T=v.tag!==3)&&!(T=v.tag!==5)&&(T=v.type,T=T!=="head"&&T!=="body"&&!vh(v.type,v.memoizedProps)),T&&(T=ul)){if(za(v))throw Gh(),Error(t(418));for(;T;)zo(v,T),T=pc(T.nextSibling)}if(Md(v),v.tag===13){if(v=v.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));e:{for(v=v.nextSibling,T=0;v;){if(v.nodeType===8){var R=v.data;if(R==="/$"){if(T===0){ul=pc(v.nextSibling);break e}T--}else R!=="$"&&R!=="$!"&&R!=="$?"||T++}v=v.nextSibling}ul=null}}else ul=_s?pc(v.stateNode.nextSibling):null;return!0}function Gh(){for(var v=ul;v;)v=pc(v.nextSibling)}function Ho(){ul=_s=null,ss=!1}function Ao(v){cl===null?cl=[v]:cl.push(v)}var sp=N.ReactCurrentBatchConfig;function $u(v,T){if(v&&v.defaultProps){T=ie({},T),v=v.defaultProps;for(var R in v)T[R]===void 0&&(T[R]=v[R]);return T}return T}var Rl=li(null),hd=null,mc=null,Yr=null;function su(){Yr=mc=hd=null}function Yu(v){var T=Rl.current;qi(Rl),v._currentValue=T}function os(v,T,R){for(;v!==null;){var F=v.alternate;if((v.childLanes&T)!==T?(v.childLanes|=T,F!==null&&(F.childLanes|=T)):F!==null&&(F.childLanes&T)!==T&&(F.childLanes|=T),v===R)break;v=v.return}}function Ha(v,T){hd=v,Yr=mc=null,v=v.dependencies,v!==null&&v.firstContext!==null&&(v.lanes&T&&(pn=!0),v.firstContext=null)}function xs(v){var T=v._currentValue;if(Yr!==v)if(v={context:v,memoizedValue:T,next:null},mc===null){if(hd===null)throw Error(t(308));mc=v,hd.dependencies={lanes:0,firstContext:v}}else mc=mc.next=v;return T}var ws=null;function Vc(v){ws===null?ws=[v]:ws.push(v)}function fi(v,T,R,F){var X=T.interleaved;return X===null?(R.next=R,Vc(T)):(R.next=X.next,X.next=R),T.interleaved=R,Ga(v,F)}function Ga(v,T){v.lanes|=T;var R=v.alternate;for(R!==null&&(R.lanes|=T),R=v,v=v.return;v!==null;)v.childLanes|=T,R=v.alternate,R!==null&&(R.childLanes|=T),R=v,v=v.return;return R.tag===3?R.stateNode:null}var gc=!1;function op(v){v.updateQueue={baseState:v.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(v,T){v=v.updateQueue,T.updateQueue===v&&(T.updateQueue={baseState:v.baseState,firstBaseUpdate:v.firstBaseUpdate,lastBaseUpdate:v.lastBaseUpdate,shared:v.shared,effects:v.effects})}function ta(v,T){return{eventTime:v,lane:T,tag:0,payload:null,callback:null,next:null}}function Vi(v,T,R){var F=v.updateQueue;if(F===null)return null;if(F=F.shared,(Zi&2)!==0){var X=F.pending;return X===null?T.next=T:(T.next=X.next,X.next=T),F.pending=T,Ga(v,R)}return X=F.interleaved,X===null?(T.next=T,Vc(F)):(T.next=X.next,X.next=T),F.interleaved=T,Ga(v,R)}function Ln(v,T,R){if(T=T.updateQueue,T!==null&&(T=T.shared,(R&4194240)!==0)){var F=T.lanes;F&=v.pendingLanes,R|=F,T.lanes=R,Ko(v,R)}}function qn(v,T){var R=v.updateQueue,F=v.alternate;if(F!==null&&(F=F.updateQueue,R===F)){var X=null,Z=null;if(R=R.firstBaseUpdate,R!==null){do{var ye={eventTime:R.eventTime,lane:R.lane,tag:R.tag,payload:R.payload,callback:R.callback,next:null};Z===null?X=Z=ye:Z=Z.next=ye,R=R.next}while(R!==null);Z===null?X=Z=T:Z=Z.next=T}else X=Z=T;R={baseState:F.baseState,firstBaseUpdate:X,lastBaseUpdate:Z,shared:F.shared,effects:F.effects},v.updateQueue=R;return}v=R.lastBaseUpdate,v===null?R.firstBaseUpdate=T:v.next=T,R.lastBaseUpdate=T}function kr(v,T,R,F){var X=v.updateQueue;gc=!1;var Z=X.firstBaseUpdate,ye=X.lastBaseUpdate,Xe=X.shared.pending;if(Xe!==null){X.shared.pending=null;var st=Xe,Lt=st.next;st.next=null,ye===null?Z=Lt:ye.next=Lt,ye=st;var qt=v.alternate;qt!==null&&(qt=qt.updateQueue,Xe=qt.lastBaseUpdate,Xe!==ye&&(Xe===null?qt.firstBaseUpdate=Lt:Xe.next=Lt,qt.lastBaseUpdate=st))}if(Z!==null){var ln=X.baseState;ye=0,qt=Lt=st=null,Xe=Z;do{var nn=Xe.lane,kn=Xe.eventTime;if((F&nn)===nn){qt!==null&&(qt=qt.next={eventTime:kn,lane:0,tag:Xe.tag,payload:Xe.payload,callback:Xe.callback,next:null});e:{var Kn=v,Zn=Xe;switch(nn=T,kn=R,Zn.tag){case 1:if(Kn=Zn.payload,typeof Kn=="function"){ln=Kn.call(kn,ln,nn);break e}ln=Kn;break e;case 3:Kn.flags=Kn.flags&-65537|128;case 0:if(Kn=Zn.payload,nn=typeof Kn=="function"?Kn.call(kn,ln,nn):Kn,nn==null)break e;ln=ie({},ln,nn);break e;case 2:gc=!0}}Xe.callback!==null&&Xe.lane!==0&&(v.flags|=64,nn=X.effects,nn===null?X.effects=[Xe]:nn.push(Xe))}else kn={eventTime:kn,lane:nn,tag:Xe.tag,payload:Xe.payload,callback:Xe.callback,next:null},qt===null?(Lt=qt=kn,st=ln):qt=qt.next=kn,ye|=nn;if(Xe=Xe.next,Xe===null){if(Xe=X.shared.pending,Xe===null)break;nn=Xe,Xe=nn.next,nn.next=null,X.lastBaseUpdate=nn,X.shared.pending=null}}while(!0);if(qt===null&&(st=ln),X.baseState=st,X.firstBaseUpdate=Lt,X.lastBaseUpdate=qt,T=X.shared.interleaved,T!==null){X=T;do ye|=X.lane,X=X.next;while(X!==T)}else Z===null&&(X.shared.lanes=0);Dd|=ye,v.lanes=ye,v.memoizedState=ln}}function ti(v,T,R){if(v=T.effects,T.effects=null,v!==null)for(T=0;T<v.length;T++){var F=v[T],X=F.callback;if(X!==null){if(F.callback=null,F=R,typeof X!="function")throw Error(t(191,X));X.call(F)}}}var Jr=new n.Component().refs;function Mo(v,T,R,F){T=v.memoizedState,R=R(F,T),R=R==null?T:ie({},T,R),v.memoizedState=R,v.lanes===0&&(v.updateQueue.baseState=R)}var as={isMounted:function(v){return(v=v._reactInternals)?tr(v)===v:!1},enqueueSetState:function(v,T,R){v=v._reactInternals;var F=Ec(),X=Pd(v),Z=ta(F,X);Z.payload=T,R!=null&&(Z.callback=R),T=Vi(v,Z,X),T!==null&&(ra(T,v,X,F),Ln(T,v,X))},enqueueReplaceState:function(v,T,R){v=v._reactInternals;var F=Ec(),X=Pd(v),Z=ta(F,X);Z.tag=1,Z.payload=T,R!=null&&(Z.callback=R),T=Vi(v,Z,X),T!==null&&(ra(T,v,X,F),Ln(T,v,X))},enqueueForceUpdate:function(v,T){v=v._reactInternals;var R=Ec(),F=Pd(v),X=ta(R,F);X.tag=2,T!=null&&(X.callback=T),T=Vi(v,X,F),T!==null&&(ra(T,v,F,R),Ln(T,v,F))}};function Qi(v,T,R,F,X,Z,ye){return v=v.stateNode,typeof v.shouldComponentUpdate=="function"?v.shouldComponentUpdate(F,Z,ye):T.prototype&&T.prototype.isPureReactComponent?!Ot(R,F)||!Ot(X,Z):!0}function ou(v,T,R){var F=!1,X=Hc,Z=T.contextType;return typeof Z=="object"&&Z!==null?Z=xs(Z):(X=ea(T)?is:fa.current,F=T.contextTypes,Z=(F=F!=null)?Gc(v,X):Hc),T=new T(R,Z),v.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=as,v.stateNode=T,T._reactInternals=v,F&&(v=v.stateNode,v.__reactInternalMemoizedUnmaskedChildContext=X,v.__reactInternalMemoizedMaskedChildContext=Z),T}function Ku(v,T,R,F){v=T.state,typeof T.componentWillReceiveProps=="function"&&T.componentWillReceiveProps(R,F),typeof T.UNSAFE_componentWillReceiveProps=="function"&&T.UNSAFE_componentWillReceiveProps(R,F),T.state!==v&&as.enqueueReplaceState(T,T.state,null)}function _c(v,T,R,F){var X=v.stateNode;X.props=R,X.state=v.memoizedState,X.refs=Jr,op(v);var Z=T.contextType;typeof Z=="object"&&Z!==null?X.context=xs(Z):(Z=ea(T)?is:fa.current,X.context=Gc(v,Z)),X.state=v.memoizedState,Z=T.getDerivedStateFromProps,typeof Z=="function"&&(Mo(v,T,Z,R),X.state=v.memoizedState),typeof T.getDerivedStateFromProps=="function"||typeof X.getSnapshotBeforeUpdate=="function"||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(T=X.state,typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount(),T!==X.state&&as.enqueueReplaceState(X,X.state,null),kr(v,R,X,F),X.state=v.memoizedState),typeof X.componentDidMount=="function"&&(v.flags|=4194308)}function Ju(v,T,R){if(v=R.ref,v!==null&&typeof v!="function"&&typeof v!="object"){if(R._owner){if(R=R._owner,R){if(R.tag!==1)throw Error(t(309));var F=R.stateNode}if(!F)throw Error(t(147,v));var X=F,Z=""+v;return T!==null&&T.ref!==null&&typeof T.ref=="function"&&T.ref._stringRef===Z?T.ref:(T=function(ye){var Xe=X.refs;Xe===Jr&&(Xe=X.refs={}),ye===null?delete Xe[Z]:Xe[Z]=ye},T._stringRef=Z,T)}if(typeof v!="string")throw Error(t(284));if(!R._owner)throw Error(t(290,v))}return v}function Ys(v,T){throw v=Object.prototype.toString.call(T),Error(t(31,v==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":v))}function co(v){var T=v._init;return T(v._payload)}function dd(v){function T(wt,ht){if(v){var xt=wt.deletions;xt===null?(wt.deletions=[ht],wt.flags|=16):xt.push(ht)}}function R(wt,ht){if(!v)return null;for(;ht!==null;)T(wt,ht),ht=ht.sibling;return null}function F(wt,ht){for(wt=new Map;ht!==null;)ht.key!==null?wt.set(ht.key,ht):wt.set(ht.index,ht),ht=ht.sibling;return wt}function X(wt,ht){return wt=Yh(wt,ht),wt.index=0,wt.sibling=null,wt}function Z(wt,ht,xt){return wt.index=xt,v?(xt=wt.alternate,xt!==null?(xt=xt.index,xt<ht?(wt.flags|=2,ht):xt):(wt.flags|=2,ht)):(wt.flags|=1048576,ht)}function ye(wt){return v&&wt.alternate===null&&(wt.flags|=2),wt}function Xe(wt,ht,xt,yn){return ht===null||ht.tag!==6?(ht=wf(xt,wt.mode,yn),ht.return=wt,ht):(ht=X(ht,xt),ht.return=wt,ht)}function st(wt,ht,xt,yn){var sr=xt.type;return sr===H?qt(wt,ht,xt.props.children,yn,xt.key):ht!==null&&(ht.elementType===sr||typeof sr=="object"&&sr!==null&&sr.$$typeof===Te&&co(sr)===ht.type)?(yn=X(ht,xt.props),yn.ref=Ju(wt,ht,xt),yn.return=wt,yn):(yn=nm(xt.type,xt.key,xt.props,null,wt.mode,yn),yn.ref=Ju(wt,ht,xt),yn.return=wt,yn)}function Lt(wt,ht,xt,yn){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==xt.containerInfo||ht.stateNode.implementation!==xt.implementation?(ht=fd(xt,wt.mode,yn),ht.return=wt,ht):(ht=X(ht,xt.children||[]),ht.return=wt,ht)}function qt(wt,ht,xt,yn,sr){return ht===null||ht.tag!==7?(ht=Fp(xt,wt.mode,yn,sr),ht.return=wt,ht):(ht=X(ht,xt),ht.return=wt,ht)}function ln(wt,ht,xt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return ht=wf(""+ht,wt.mode,xt),ht.return=wt,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case z:return xt=nm(ht.type,ht.key,ht.props,null,wt.mode,xt),xt.ref=Ju(wt,null,ht),xt.return=wt,xt;case W:return ht=fd(ht,wt.mode,xt),ht.return=wt,ht;case Te:var yn=ht._init;return ln(wt,yn(ht._payload),xt)}if($t(ht)||se(ht))return ht=Fp(ht,wt.mode,xt,null),ht.return=wt,ht;Ys(wt,ht)}return null}function nn(wt,ht,xt,yn){var sr=ht!==null?ht.key:null;if(typeof xt=="string"&&xt!==""||typeof xt=="number")return sr!==null?null:Xe(wt,ht,""+xt,yn);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case z:return xt.key===sr?st(wt,ht,xt,yn):null;case W:return xt.key===sr?Lt(wt,ht,xt,yn):null;case Te:return sr=xt._init,nn(wt,ht,sr(xt._payload),yn)}if($t(xt)||se(xt))return sr!==null?null:qt(wt,ht,xt,yn,null);Ys(wt,xt)}return null}function kn(wt,ht,xt,yn,sr){if(typeof yn=="string"&&yn!==""||typeof yn=="number")return wt=wt.get(xt)||null,Xe(ht,wt,""+yn,sr);if(typeof yn=="object"&&yn!==null){switch(yn.$$typeof){case z:return wt=wt.get(yn.key===null?xt:yn.key)||null,st(ht,wt,yn,sr);case W:return wt=wt.get(yn.key===null?xt:yn.key)||null,Lt(ht,wt,yn,sr);case Te:var Qn=yn._init;return kn(wt,ht,xt,Qn(yn._payload),sr)}if($t(yn)||se(yn))return wt=wt.get(xt)||null,qt(ht,wt,yn,sr,null);Ys(ht,yn)}return null}function Kn(wt,ht,xt,yn){for(var sr=null,Qn=null,dr=ht,Ir=ht=0,Fl=null;dr!==null&&Ir<xt.length;Ir++){dr.index>Ir?(Fl=dr,dr=null):Fl=dr.sibling;var cs=nn(wt,dr,xt[Ir],yn);if(cs===null){dr===null&&(dr=Fl);break}v&&dr&&cs.alternate===null&&T(wt,dr),ht=Z(cs,ht,Ir),Qn===null?sr=cs:Qn.sibling=cs,Qn=cs,dr=Fl}if(Ir===xt.length)return R(wt,dr),ss&&fc(wt,Ir),sr;if(dr===null){for(;Ir<xt.length;Ir++)dr=ln(wt,xt[Ir],yn),dr!==null&&(ht=Z(dr,ht,Ir),Qn===null?sr=dr:Qn.sibling=dr,Qn=dr);return ss&&fc(wt,Ir),sr}for(dr=F(wt,dr);Ir<xt.length;Ir++)Fl=kn(dr,wt,Ir,xt[Ir],yn),Fl!==null&&(v&&Fl.alternate!==null&&dr.delete(Fl.key===null?Ir:Fl.key),ht=Z(Fl,ht,Ir),Qn===null?sr=Fl:Qn.sibling=Fl,Qn=Fl);return v&&dr.forEach(function(Wp){return T(wt,Wp)}),ss&&fc(wt,Ir),sr}function Zn(wt,ht,xt,yn){var sr=se(xt);if(typeof sr!="function")throw Error(t(150));if(xt=sr.call(xt),xt==null)throw Error(t(151));for(var Qn=sr=null,dr=ht,Ir=ht=0,Fl=null,cs=xt.next();dr!==null&&!cs.done;Ir++,cs=xt.next()){dr.index>Ir?(Fl=dr,dr=null):Fl=dr.sibling;var Wp=nn(wt,dr,cs.value,yn);if(Wp===null){dr===null&&(dr=Fl);break}v&&dr&&Wp.alternate===null&&T(wt,dr),ht=Z(Wp,ht,Ir),Qn===null?sr=Wp:Qn.sibling=Wp,Qn=Wp,dr=Fl}if(cs.done)return R(wt,dr),ss&&fc(wt,Ir),sr;if(dr===null){for(;!cs.done;Ir++,cs=xt.next())cs=ln(wt,cs.value,yn),cs!==null&&(ht=Z(cs,ht,Ir),Qn===null?sr=cs:Qn.sibling=cs,Qn=cs);return ss&&fc(wt,Ir),sr}for(dr=F(wt,dr);!cs.done;Ir++,cs=xt.next())cs=kn(dr,wt,Ir,cs.value,yn),cs!==null&&(v&&cs.alternate!==null&&dr.delete(cs.key===null?Ir:cs.key),ht=Z(cs,ht,Ir),Qn===null?sr=cs:Qn.sibling=cs,Qn=cs);return v&&dr.forEach(function(g0){return T(wt,g0)}),ss&&fc(wt,Ir),sr}function Ro(wt,ht,xt,yn){if(typeof xt=="object"&&xt!==null&&xt.type===H&&xt.key===null&&(xt=xt.props.children),typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case z:e:{for(var sr=xt.key,Qn=ht;Qn!==null;){if(Qn.key===sr){if(sr=xt.type,sr===H){if(Qn.tag===7){R(wt,Qn.sibling),ht=X(Qn,xt.props.children),ht.return=wt,wt=ht;break e}}else if(Qn.elementType===sr||typeof sr=="object"&&sr!==null&&sr.$$typeof===Te&&co(sr)===Qn.type){R(wt,Qn.sibling),ht=X(Qn,xt.props),ht.ref=Ju(wt,Qn,xt),ht.return=wt,wt=ht;break e}R(wt,Qn);break}else T(wt,Qn);Qn=Qn.sibling}xt.type===H?(ht=Fp(xt.props.children,wt.mode,yn,xt.key),ht.return=wt,wt=ht):(yn=nm(xt.type,xt.key,xt.props,null,wt.mode,yn),yn.ref=Ju(wt,ht,xt),yn.return=wt,wt=yn)}return ye(wt);case W:e:{for(Qn=xt.key;ht!==null;){if(ht.key===Qn)if(ht.tag===4&&ht.stateNode.containerInfo===xt.containerInfo&&ht.stateNode.implementation===xt.implementation){R(wt,ht.sibling),ht=X(ht,xt.children||[]),ht.return=wt,wt=ht;break e}else{R(wt,ht);break}else T(wt,ht);ht=ht.sibling}ht=fd(xt,wt.mode,yn),ht.return=wt,wt=ht}return ye(wt);case Te:return Qn=xt._init,Ro(wt,ht,Qn(xt._payload),yn)}if($t(xt))return Kn(wt,ht,xt,yn);if(se(xt))return Zn(wt,ht,xt,yn);Ys(wt,xt)}return typeof xt=="string"&&xt!==""||typeof xt=="number"?(xt=""+xt,ht!==null&&ht.tag===6?(R(wt,ht.sibling),ht=X(ht,xt),ht.return=wt,wt=ht):(R(wt,ht),ht=wf(xt,wt.mode,yn),ht.return=wt,wt=ht),ye(wt)):R(wt,ht)}return Ro}var _a=dd(!0),Cu=dd(!1),Au={},ho=li(Au),po=li(Au),kl=li(Au);function Go(v){if(v===Au)throw Error(t(174));return v}function qu(v,T){switch(rs(kl,T),rs(po,v),rs(ho,Au),v=T.nodeType,v){case 9:case 11:T=(T=T.documentElement)?T.namespaceURI:Mt(null,"");break;default:v=v===8?T.parentNode:T,T=v.namespaceURI||null,v=v.tagName,T=Mt(T,v)}qi(ho),rs(ho,T)}function Qu(){qi(ho),qi(po),qi(kl)}function Th(v){Go(kl.current);var T=Go(ho.current),R=Mt(T,v.type);T!==R&&(rs(po,v),rs(ho,R))}function Sh(v){po.current===v&&(qi(ho),qi(po))}var Mr=li(0);function vs(v){for(var T=v;T!==null;){if(T.tag===13){var R=T.memoizedState;if(R!==null&&(R=R.dehydrated,R===null||R.data==="$?"||R.data==="$!"))return T}else if(T.tag===19&&T.memoizedProps.revealOrder!==void 0){if(T.flags&128)return T}else if(T.child!==null){T.child.return=T,T=T.child;continue}if(T===v)break;for(;T.sibling===null;){if(T.return===null||T.return===v)return null;T=T.return}T.sibling.return=T.return,T=T.sibling}return null}var Rs=[];function Wa(){for(var v=0;v<Rs.length;v++)Rs[v]._workInProgressVersionPrimary=null;Rs.length=0}var Hs=N.ReactCurrentDispatcher,cn=N.ReactCurrentBatchConfig,jc=0,bn=null,mi=null,$s=null,au=!1,Ol=!1,Bt=0,hl=0;function Wr(){throw Error(t(321))}function Zu(v,T){if(T===null)return!1;for(var R=0;R<T.length&&R<v.length;R++)if(!Ne(v[R],T[R]))return!1;return!0}function Wh(v,T,R,F,X,Z){if(jc=Z,bn=T,T.memoizedState=null,T.updateQueue=null,T.lanes=0,Hs.current=v===null||v.memoizedState===null?g:$,v=R(F,X),Ol){Z=0;do{if(Ol=!1,Bt=0,25<=Z)throw Error(t(301));Z+=1,$s=mi=null,T.updateQueue=null,Hs.current=M,v=R(F,X)}while(Ol)}if(Hs.current=h,T=mi!==null&&mi.next!==null,jc=0,$s=mi=bn=null,au=!1,T)throw Error(t(300));return v}function Xc(){var v=Bt!==0;return Bt=0,v}function si(){var v={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $s===null?bn.memoizedState=$s=v:$s=$s.next=v,$s}function ji(){if(mi===null){var v=bn.alternate;v=v!==null?v.memoizedState:null}else v=mi.next;var T=$s===null?bn.memoizedState:$s.next;if(T!==null)$s=T,mi=v;else{if(v===null)throw Error(t(310));mi=v,v={memoizedState:mi.memoizedState,baseState:mi.baseState,baseQueue:mi.baseQueue,queue:mi.queue,next:null},$s===null?bn.memoizedState=$s=v:$s=$s.next=v}return $s}function Yc(v,T){return typeof T=="function"?T(v):T}function fo(v){var T=ji(),R=T.queue;if(R===null)throw Error(t(311));R.lastRenderedReducer=v;var F=mi,X=F.baseQueue,Z=R.pending;if(Z!==null){if(X!==null){var ye=X.next;X.next=Z.next,Z.next=ye}F.baseQueue=X=Z,R.pending=null}if(X!==null){Z=X.next,F=F.baseState;var Xe=ye=null,st=null,Lt=Z;do{var qt=Lt.lane;if((jc&qt)===qt)st!==null&&(st=st.next={lane:0,action:Lt.action,hasEagerState:Lt.hasEagerState,eagerState:Lt.eagerState,next:null}),F=Lt.hasEagerState?Lt.eagerState:v(F,Lt.action);else{var ln={lane:qt,action:Lt.action,hasEagerState:Lt.hasEagerState,eagerState:Lt.eagerState,next:null};st===null?(Xe=st=ln,ye=F):st=st.next=ln,bn.lanes|=qt,Dd|=qt}Lt=Lt.next}while(Lt!==null&&Lt!==Z);st===null?ye=F:st.next=Xe,Ne(F,T.memoizedState)||(pn=!0),T.memoizedState=F,T.baseState=ye,T.baseQueue=st,R.lastRenderedState=F}if(v=R.interleaved,v!==null){X=v;do Z=X.lane,bn.lanes|=Z,Dd|=Z,X=X.next;while(X!==v)}else X===null&&(R.lanes=0);return[T.memoizedState,R.dispatch]}function dl(v){var T=ji(),R=T.queue;if(R===null)throw Error(t(311));R.lastRenderedReducer=v;var F=R.dispatch,X=R.pending,Z=T.memoizedState;if(X!==null){R.pending=null;var ye=X=X.next;do Z=v(Z,ye.action),ye=ye.next;while(ye!==X);Ne(Z,T.memoizedState)||(pn=!0),T.memoizedState=Z,T.baseQueue===null&&(T.baseState=Z),R.lastRenderedState=Z}return[Z,F]}function Kc(){}function vc(v,T){var R=bn,F=ji(),X=T(),Z=!Ne(F.memoizedState,X);if(Z&&(F.memoizedState=X,pn=!0),F=F.queue,tc(Ks.bind(null,R,F,v),[v]),F.getSnapshot!==T||Z||$s!==null&&$s.memoizedState.tag&1){if(R.flags|=2048,Mu(9,Io.bind(null,R,F,X,T),void 0,null),cu===null)throw Error(t(349));jc&30||ec(R,T,X)}return X}function ec(v,T,R){v.flags|=16384,v={getSnapshot:T,value:R},T=bn.updateQueue,T===null?(T={lastEffect:null,stores:null},bn.updateQueue=T,T.stores=[v]):(R=T.stores,R===null?T.stores=[v]:R.push(v))}function Io(v,T,R,F){T.value=R,T.getSnapshot=F,na(T)&&Eh(v)}function Ks(v,T,R){return R(function(){na(T)&&Eh(v)})}function na(v){var T=v.getSnapshot;v=v.value;try{var R=T();return!Ne(v,R)}catch{return!0}}function Eh(v){var T=Ga(v,1);T!==null&&ra(T,v,1,-1)}function mo(v){var T=si();return typeof v=="function"&&(v=v()),T.memoizedState=T.baseState=v,v={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yc,lastRenderedState:v},T.queue=v,v=v.dispatch=jh.bind(null,bn,v),[T.memoizedState,v]}function Mu(v,T,R,F){return v={tag:v,create:T,destroy:R,deps:F,next:null},T=bn.updateQueue,T===null?(T={lastEffect:null,stores:null},bn.updateQueue=T,T.lastEffect=v.next=v):(R=T.lastEffect,R===null?T.lastEffect=v.next=v:(F=R.next,R.next=v,v.next=F,T.lastEffect=v)),v}function Jc(){return ji().memoizedState}function yc(v,T,R,F){var X=si();bn.flags|=v,X.memoizedState=Mu(1|T,R,void 0,F===void 0?null:F)}function Wo(v,T,R,F){var X=ji();F=F===void 0?null:F;var Z=void 0;if(mi!==null){var ye=mi.memoizedState;if(Z=ye.destroy,F!==null&&Zu(F,ye.deps)){X.memoizedState=Mu(T,R,Z,F);return}}bn.flags|=v,X.memoizedState=Mu(1|T,R,Z,F)}function go(v,T){return yc(8390656,8,v,T)}function tc(v,T){return Wo(2048,8,v,T)}function Ll(v,T){return Wo(4,2,v,T)}function _o(v,T){return Wo(4,4,v,T)}function Dl(v,T){if(typeof T=="function")return v=v(),T(v),function(){T(null)};if(T!=null)return v=v(),T.current=v,function(){T.current=null}}function Va(v,T,R){return R=R!=null?R.concat([v]):null,Wo(4,4,Dl.bind(null,T,v),R)}function lu(){}function ni(v,T){var R=ji();T=T===void 0?null:T;var F=R.memoizedState;return F!==null&&T!==null&&Zu(T,F[1])?F[0]:(R.memoizedState=[v,T],v)}function ls(v,T){var R=ji();T=T===void 0?null:T;var F=R.memoizedState;return F!==null&&T!==null&&Zu(T,F[1])?F[0]:(v=v(),R.memoizedState=[v,T],v)}function Vh(v,T,R){return jc&21?(Ne(R,T)||(R=Yo(),bn.lanes|=R,Dd|=R,v.baseState=!0),T):(v.baseState&&(v.baseState=!1,pn=!0),v.memoizedState=R)}function pd(v,T){var R=pr;pr=R!==0&&4>R?R:4,v(!0);var F=cn.transition;cn.transition={};try{v(!1),T()}finally{pr=R,cn.transition=F}}function va(){return ji().memoizedState}function ya(v,T,R){var F=Pd(v);if(R={lane:F,action:R,hasEagerState:!1,eagerState:null,next:null},bc(v))Lp(T,R);else if(R=fi(v,T,R,F),R!==null){var X=Ec();ra(R,v,F,X),w(R,T,F)}}function jh(v,T,R){var F=Pd(v),X={lane:F,action:R,hasEagerState:!1,eagerState:null,next:null};if(bc(v))Lp(T,X);else{var Z=v.alternate;if(v.lanes===0&&(Z===null||Z.lanes===0)&&(Z=T.lastRenderedReducer,Z!==null))try{var ye=T.lastRenderedState,Xe=Z(ye,R);if(X.hasEagerState=!0,X.eagerState=Xe,Ne(Xe,ye)){var st=T.interleaved;st===null?(X.next=X,Vc(T)):(X.next=st.next,st.next=X),T.interleaved=X;return}}catch{}finally{}R=fi(v,T,X,F),R!==null&&(X=Ec(),ra(R,v,F,X),w(R,T,F))}}function bc(v){var T=v.alternate;return v===bn||T!==null&&T===bn}function Lp(v,T){Ol=au=!0;var R=v.pending;R===null?T.next=T:(T.next=R.next,R.next=T),v.pending=T}function w(v,T,R){if(R&4194240){var F=T.lanes;F&=v.pendingLanes,R|=F,T.lanes=R,Ko(v,R)}}var h={readContext:xs,useCallback:Wr,useContext:Wr,useEffect:Wr,useImperativeHandle:Wr,useInsertionEffect:Wr,useLayoutEffect:Wr,useMemo:Wr,useReducer:Wr,useRef:Wr,useState:Wr,useDebugValue:Wr,useDeferredValue:Wr,useTransition:Wr,useMutableSource:Wr,useSyncExternalStore:Wr,useId:Wr,unstable_isNewReconciler:!1},g={readContext:xs,useCallback:function(v,T){return si().memoizedState=[v,T===void 0?null:T],v},useContext:xs,useEffect:go,useImperativeHandle:function(v,T,R){return R=R!=null?R.concat([v]):null,yc(4194308,4,Dl.bind(null,T,v),R)},useLayoutEffect:function(v,T){return yc(4194308,4,v,T)},useInsertionEffect:function(v,T){return yc(4,2,v,T)},useMemo:function(v,T){var R=si();return T=T===void 0?null:T,v=v(),R.memoizedState=[v,T],v},useReducer:function(v,T,R){var F=si();return T=R!==void 0?R(T):T,F.memoizedState=F.baseState=T,v={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:v,lastRenderedState:T},F.queue=v,v=v.dispatch=ya.bind(null,bn,v),[F.memoizedState,v]},useRef:function(v){var T=si();return v={current:v},T.memoizedState=v},useState:mo,useDebugValue:lu,useDeferredValue:function(v){return si().memoizedState=v},useTransition:function(){var v=mo(!1),T=v[0];return v=pd.bind(null,v[1]),si().memoizedState=v,[T,v]},useMutableSource:function(){},useSyncExternalStore:function(v,T,R){var F=bn,X=si();if(ss){if(R===void 0)throw Error(t(407));R=R()}else{if(R=T(),cu===null)throw Error(t(349));jc&30||ec(F,T,R)}X.memoizedState=R;var Z={value:R,getSnapshot:T};return X.queue=Z,go(Ks.bind(null,F,Z,v),[v]),F.flags|=2048,Mu(9,Io.bind(null,F,Z,R,T),void 0,null),R},useId:function(){var v=si(),T=cu.identifierPrefix;if(ss){var R=ll,F=gn;R=(F&~(1<<32-zr(F)-1)).toString(32)+R,T=":"+T+"R"+R,R=Bt++,0<R&&(T+="H"+R.toString(32)),T+=":"}else R=hl++,T=":"+T+"r"+R.toString(32)+":";return v.memoizedState=T},unstable_isNewReconciler:!1},$={readContext:xs,useCallback:ni,useContext:xs,useEffect:tc,useImperativeHandle:Va,useInsertionEffect:Ll,useLayoutEffect:_o,useMemo:ls,useReducer:fo,useRef:Jc,useState:function(){return fo(Yc)},useDebugValue:lu,useDeferredValue:function(v){var T=ji();return Vh(T,mi.memoizedState,v)},useTransition:function(){var v=fo(Yc)[0],T=ji().memoizedState;return[v,T]},useMutableSource:Kc,useSyncExternalStore:vc,useId:va,unstable_isNewReconciler:!1},M={readContext:xs,useCallback:ni,useContext:xs,useEffect:tc,useImperativeHandle:Va,useInsertionEffect:Ll,useLayoutEffect:_o,useMemo:ls,useReducer:dl,useRef:Jc,useState:function(){return dl(Yc)},useDebugValue:lu,useDeferredValue:function(v){var T=ji();return mi===null?T.memoizedState=v:Vh(T,mi.memoizedState,v)},useTransition:function(){var v=dl(Yc)[0],T=ji().memoizedState;return[v,T]},useMutableSource:Kc,useSyncExternalStore:vc,useId:va,unstable_isNewReconciler:!1};function B(v,T){try{var R="",F=T;do R+=qe(F),F=F.return;while(F);var X=R}catch(Z){X=`
Error generating stack: `+Z.message+`
`+Z.stack}return{value:v,source:T,stack:X,digest:null}}function V(v,T,R){return{value:v,source:null,stack:R??null,digest:T??null}}function ue(v,T){try{console.error(T.value)}catch(R){setTimeout(function(){throw R})}}var Me=typeof WeakMap=="function"?WeakMap:Map;function Qe(v,T,R){R=ta(-1,R),R.tag=3,R.payload={element:null};var F=T.value;return R.callback=function(){Hm||(Hm=!0,Gm=F),ue(v,T)},R}function Et(v,T,R){R=ta(-1,R),R.tag=3;var F=v.type.getDerivedStateFromError;if(typeof F=="function"){var X=T.value;R.payload=function(){return F(X)},R.callback=function(){ue(v,T)}}var Z=v.stateNode;return Z!==null&&typeof Z.componentDidCatch=="function"&&(R.callback=function(){ue(v,T),typeof F!="function"&&(yo===null?yo=new Set([this]):yo.add(this));var ye=T.stack;this.componentDidCatch(T.value,{componentStack:ye!==null?ye:""})}),R}function Jt(v,T,R){var F=v.pingCache;if(F===null){F=v.pingCache=new Me;var X=new Set;F.set(T,X)}else X=F.get(T),X===void 0&&(X=new Set,F.set(T,X));X.has(R)||(X.add(R),v=d_.bind(null,v,T,R),T.then(v,v))}function an(v){do{var T;if((T=v.tag===13)&&(T=v.memoizedState,T=T!==null?T.dehydrated!==null:!0),T)return v;v=v.return}while(v!==null);return null}function _n(v,T,R,F,X){return v.mode&1?(v.flags|=65536,v.lanes=X,v):(v===T?v.flags|=65536:(v.flags|=128,R.flags|=131072,R.flags&=-52805,R.tag===1&&(R.alternate===null?R.tag=17:(T=ta(-1,1),T.tag=2,Vi(R,T,1))),R.lanes|=1),v)}var vn=N.ReactCurrentOwner,pn=!1;function Or(v,T,R,F){T.child=v===null?Cu(T,null,R,F):_a(T,v.child,R,F)}function St(v,T,R,F,X){R=R.render;var Z=T.ref;return Ha(T,X),F=Wh(v,T,R,F,Z,X),R=Xc(),v!==null&&!pn?(T.updateQueue=v.updateQueue,T.flags&=-2053,v.lanes&=~X,Xh(v,T,X)):(ss&&R&&iu(T),T.flags|=1,Or(v,T,F,X),T.child)}function we(v,T,R,F,X){if(v===null){var Z=R.type;return typeof Z=="function"&&!wg(Z)&&Z.defaultProps===void 0&&R.compare===null&&R.defaultProps===void 0?(T.tag=15,T.type=Z,Re(v,T,Z,F,X)):(v=nm(R.type,null,F,T,T.mode,X),v.ref=T.ref,v.return=T,T.child=v)}if(Z=v.child,(v.lanes&X)===0){var ye=Z.memoizedProps;if(R=R.compare,R=R!==null?R:Ot,R(ye,F)&&v.ref===T.ref)return Xh(v,T,X)}return T.flags|=1,v=Yh(Z,F),v.ref=T.ref,v.return=T,T.child=v}function Re(v,T,R,F,X){if(v!==null){var Z=v.memoizedProps;if(Ot(Z,F)&&v.ref===T.ref)if(pn=!1,T.pendingProps=F=Z,(v.lanes&X)!==0)v.flags&131072&&(pn=!0);else return T.lanes=v.lanes,Xh(v,T,X)}return tn(v,T,R,F,X)}function nt(v,T,R){var F=T.pendingProps,X=F.children,Z=v!==null?v.memoizedState:null;if(F.mode==="hidden")if(!(T.mode&1))T.memoizedState={baseLanes:0,cachePool:null,transitions:null},rs(bf,hu),hu|=R;else{if(!(R&1073741824))return v=Z!==null?Z.baseLanes|R:R,T.lanes=T.childLanes=1073741824,T.memoizedState={baseLanes:v,cachePool:null,transitions:null},T.updateQueue=null,rs(bf,hu),hu|=v,null;T.memoizedState={baseLanes:0,cachePool:null,transitions:null},F=Z!==null?Z.baseLanes:R,rs(bf,hu),hu|=F}else Z!==null?(F=Z.baseLanes|R,T.memoizedState=null):F=R,rs(bf,hu),hu|=F;return Or(v,T,X,R),T.child}function Ut(v,T){var R=T.ref;(v===null&&R!==null||v!==null&&v.ref!==R)&&(T.flags|=512,T.flags|=2097152)}function tn(v,T,R,F,X){var Z=ea(R)?is:fa.current;return Z=Gc(T,Z),Ha(T,X),R=Wh(v,T,R,F,Z,X),F=Xc(),v!==null&&!pn?(T.updateQueue=v.updateQueue,T.flags&=-2053,v.lanes&=~X,Xh(v,T,X)):(ss&&F&&iu(T),T.flags|=1,Or(v,T,R,X),T.child)}function Tn(v,T,R,F,X){if(ea(R)){var Z=!0;Us(T)}else Z=!1;if(Ha(T,X),T.stateNode===null)lp(v,T),ou(T,R,F),_c(T,R,F,X),F=!0;else if(v===null){var ye=T.stateNode,Xe=T.memoizedProps;ye.props=Xe;var st=ye.context,Lt=R.contextType;typeof Lt=="object"&&Lt!==null?Lt=xs(Lt):(Lt=ea(R)?is:fa.current,Lt=Gc(T,Lt));var qt=R.getDerivedStateFromProps,ln=typeof qt=="function"||typeof ye.getSnapshotBeforeUpdate=="function";ln||typeof ye.UNSAFE_componentWillReceiveProps!="function"&&typeof ye.componentWillReceiveProps!="function"||(Xe!==F||st!==Lt)&&Ku(T,ye,F,Lt),gc=!1;var nn=T.memoizedState;ye.state=nn,kr(T,F,ye,X),st=T.memoizedState,Xe!==F||nn!==st||ma.current||gc?(typeof qt=="function"&&(Mo(T,R,qt,F),st=T.memoizedState),(Xe=gc||Qi(T,R,Xe,F,nn,st,Lt))?(ln||typeof ye.UNSAFE_componentWillMount!="function"&&typeof ye.componentWillMount!="function"||(typeof ye.componentWillMount=="function"&&ye.componentWillMount(),typeof ye.UNSAFE_componentWillMount=="function"&&ye.UNSAFE_componentWillMount()),typeof ye.componentDidMount=="function"&&(T.flags|=4194308)):(typeof ye.componentDidMount=="function"&&(T.flags|=4194308),T.memoizedProps=F,T.memoizedState=st),ye.props=F,ye.state=st,ye.context=Lt,F=Xe):(typeof ye.componentDidMount=="function"&&(T.flags|=4194308),F=!1)}else{ye=T.stateNode,bh(v,T),Xe=T.memoizedProps,Lt=T.type===T.elementType?Xe:$u(T.type,Xe),ye.props=Lt,ln=T.pendingProps,nn=ye.context,st=R.contextType,typeof st=="object"&&st!==null?st=xs(st):(st=ea(R)?is:fa.current,st=Gc(T,st));var kn=R.getDerivedStateFromProps;(qt=typeof kn=="function"||typeof ye.getSnapshotBeforeUpdate=="function")||typeof ye.UNSAFE_componentWillReceiveProps!="function"&&typeof ye.componentWillReceiveProps!="function"||(Xe!==ln||nn!==st)&&Ku(T,ye,F,st),gc=!1,nn=T.memoizedState,ye.state=nn,kr(T,F,ye,X);var Kn=T.memoizedState;Xe!==ln||nn!==Kn||ma.current||gc?(typeof kn=="function"&&(Mo(T,R,kn,F),Kn=T.memoizedState),(Lt=gc||Qi(T,R,Lt,F,nn,Kn,st)||!1)?(qt||typeof ye.UNSAFE_componentWillUpdate!="function"&&typeof ye.componentWillUpdate!="function"||(typeof ye.componentWillUpdate=="function"&&ye.componentWillUpdate(F,Kn,st),typeof ye.UNSAFE_componentWillUpdate=="function"&&ye.UNSAFE_componentWillUpdate(F,Kn,st)),typeof ye.componentDidUpdate=="function"&&(T.flags|=4),typeof ye.getSnapshotBeforeUpdate=="function"&&(T.flags|=1024)):(typeof ye.componentDidUpdate!="function"||Xe===v.memoizedProps&&nn===v.memoizedState||(T.flags|=4),typeof ye.getSnapshotBeforeUpdate!="function"||Xe===v.memoizedProps&&nn===v.memoizedState||(T.flags|=1024),T.memoizedProps=F,T.memoizedState=Kn),ye.props=F,ye.state=Kn,ye.context=st,F=Lt):(typeof ye.componentDidUpdate!="function"||Xe===v.memoizedProps&&nn===v.memoizedState||(T.flags|=4),typeof ye.getSnapshotBeforeUpdate!="function"||Xe===v.memoizedProps&&nn===v.memoizedState||(T.flags|=1024),F=!1)}return An(v,T,R,F,Z,X)}function An(v,T,R,F,X,Z){Ut(v,T);var ye=(T.flags&128)!==0;if(!F&&!ye)return X&&Vn(T,R,!1),Xh(v,T,Z);F=T.stateNode,vn.current=T;var Xe=ye&&typeof R.getDerivedStateFromError!="function"?null:F.render();return T.flags|=1,v!==null&&ye?(T.child=_a(T,v.child,null,Z),T.child=_a(T,null,Xe,Z)):Or(v,T,Xe,Z),T.memoizedState=F.state,X&&Vn(T,R,!0),T.child}function Bn(v){var T=v.stateNode;T.pendingContext?Ad(v,T.pendingContext,T.pendingContext!==T.context):T.context&&Ad(v,T.context,!1),qu(v,T.containerInfo)}function ur(v,T,R,F,X){return Ho(),Ao(X),T.flags|=256,Or(v,T,R,F),T.child}var wr={dehydrated:null,treeContext:null,retryLane:0};function Nl(v){return{baseLanes:v,cachePool:null,transitions:null}}function ap(v,T,R){var F=T.pendingProps,X=Mr.current,Z=!1,ye=(T.flags&128)!==0,Xe;if((Xe=ye)||(Xe=v!==null&&v.memoizedState===null?!1:(X&2)!==0),Xe?(Z=!0,T.flags&=-129):(v===null||v.memoizedState!==null)&&(X|=1),rs(Mr,X&1),v===null)return Ii(T),v=T.memoizedState,v!==null&&(v=v.dehydrated,v!==null)?(T.mode&1?v.data==="$!"?T.lanes=8:T.lanes=1073741824:T.lanes=1,null):(ye=F.children,v=F.fallback,Z?(F=T.mode,Z=T.child,ye={mode:"hidden",children:ye},!(F&1)&&Z!==null?(Z.childLanes=0,Z.pendingProps=ye):Z=Up(ye,F,0,null),v=Fp(v,F,R,null),Z.return=T,v.return=T,Z.sibling=v,T.child=Z,T.child.memoizedState=Nl(R),T.memoizedState=wr,v):xh(T,ye));if(X=v.memoizedState,X!==null&&(Xe=X.dehydrated,Xe!==null))return qc(v,T,ye,F,Xe,X,R);if(Z){Z=F.fallback,ye=T.mode,X=v.child,Xe=X.sibling;var st={mode:"hidden",children:F.children};return!(ye&1)&&T.child!==X?(F=T.child,F.childLanes=0,F.pendingProps=st,T.deletions=null):(F=Yh(X,st),F.subtreeFlags=X.subtreeFlags&14680064),Xe!==null?Z=Yh(Xe,Z):(Z=Fp(Z,ye,R,null),Z.flags|=2),Z.return=T,F.return=T,F.sibling=Z,T.child=F,F=Z,Z=T.child,ye=v.child.memoizedState,ye=ye===null?Nl(R):{baseLanes:ye.baseLanes|R,cachePool:null,transitions:ye.transitions},Z.memoizedState=ye,Z.childLanes=v.childLanes&~R,T.memoizedState=wr,F}return Z=v.child,v=Z.sibling,F=Yh(Z,{mode:"visible",children:F.children}),!(T.mode&1)&&(F.lanes=R),F.return=T,F.sibling=null,v!==null&&(R=T.deletions,R===null?(T.deletions=[v],T.flags|=16):R.push(v)),T.child=F,T.memoizedState=null,F}function xh(v,T){return T=Up({mode:"visible",children:T},v.mode,0,null),T.return=v,v.child=T}function sn(v,T,R,F){return F!==null&&Ao(F),_a(T,v.child,null,R),v=xh(T,T.pendingProps.children),v.flags|=2,T.memoizedState=null,v}function qc(v,T,R,F,X,Z,ye){if(R)return T.flags&256?(T.flags&=-257,F=V(Error(t(422))),sn(v,T,ye,F)):T.memoizedState!==null?(T.child=v.child,T.flags|=128,null):(Z=F.fallback,X=T.mode,F=Up({mode:"visible",children:F.children},X,0,null),Z=Fp(Z,X,ye,null),Z.flags|=2,F.return=T,Z.return=T,F.sibling=Z,T.child=F,T.mode&1&&_a(T,v.child,null,ye),T.child.memoizedState=Nl(ye),T.memoizedState=wr,Z);if(!(T.mode&1))return sn(v,T,ye,null);if(X.data==="$!"){if(F=X.nextSibling&&X.nextSibling.dataset,F)var Xe=F.dgst;return F=Xe,Z=Error(t(419)),F=V(Z,F,void 0),sn(v,T,ye,F)}if(Xe=(ye&v.childLanes)!==0,pn||Xe){if(F=cu,F!==null){switch(ye&-ye){case 4:X=2;break;case 16:X=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:X=32;break;case 536870912:X=268435456;break;default:X=0}X=X&(F.suspendedLanes|ye)?0:X,X!==0&&X!==Z.retryLane&&(Z.retryLane=X,Ga(v,X),ra(F,v,X,-1))}return em(),F=V(Error(t(421))),sn(v,T,ye,F)}return X.data==="$?"?(T.flags|=128,T.child=v.child,T=tm.bind(null,v),X._reactRetry=T,null):(v=Z.treeContext,ul=pc(X.nextSibling),_s=T,ss=!0,cl=null,v!==null&&(uo[ga++]=gn,uo[ga++]=ll,uo[ga++]=xn,gn=v.id,ll=v.overflow,xn=T),T=xh(T,F.children),T.flags|=4096,T)}function Vf(v,T,R){v.lanes|=T;var F=v.alternate;F!==null&&(F.lanes|=T),os(v.return,T,R)}function ba(v,T,R,F,X){var Z=v.memoizedState;Z===null?v.memoizedState={isBackwards:T,rendering:null,renderingStartTime:0,last:F,tail:R,tailMode:X}:(Z.isBackwards=T,Z.rendering=null,Z.renderingStartTime=0,Z.last=F,Z.tail=R,Z.tailMode=X)}function pl(v,T,R){var F=T.pendingProps,X=F.revealOrder,Z=F.tail;if(Or(v,T,F.children,R),F=Mr.current,(F&2)!==0)F=F&1|2,T.flags|=128;else{if(v!==null&&v.flags&128)e:for(v=T.child;v!==null;){if(v.tag===13)v.memoizedState!==null&&Vf(v,R,T);else if(v.tag===19)Vf(v,R,T);else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===T)break e;for(;v.sibling===null;){if(v.return===null||v.return===T)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}F&=1}if(rs(Mr,F),(T.mode&1)===0)T.memoizedState=null;else switch(X){case"forwards":for(R=T.child,X=null;R!==null;)v=R.alternate,v!==null&&vs(v)===null&&(X=R),R=R.sibling;R=X,R===null?(X=T.child,T.child=null):(X=R.sibling,R.sibling=null),ba(T,!1,X,R,Z);break;case"backwards":for(R=null,X=T.child,T.child=null;X!==null;){if(v=X.alternate,v!==null&&vs(v)===null){T.child=X;break}v=X.sibling,X.sibling=R,R=X,X=v}ba(T,!0,R,null,Z);break;case"together":ba(T,!1,null,null,void 0);break;default:T.memoizedState=null}return T.child}function lp(v,T){!(T.mode&1)&&v!==null&&(v.alternate=null,T.alternate=null,T.flags|=2)}function Xh(v,T,R){if(v!==null&&(T.dependencies=v.dependencies),Dd|=T.lanes,(R&T.childLanes)===0)return null;if(v!==null&&T.child!==v.child)throw Error(t(153));if(T.child!==null){for(v=T.child,R=Yh(v,v.pendingProps),T.child=R,R.return=T;v.sibling!==null;)v=v.sibling,R=R.sibling=Yh(v,v.pendingProps),R.return=T;R.sibling=null}return T.child}function us(v,T,R){switch(T.tag){case 3:Bn(T),Ho();break;case 5:Th(T);break;case 1:ea(T.type)&&Us(T);break;case 4:qu(T,T.stateNode.containerInfo);break;case 10:var F=T.type._context,X=T.memoizedProps.value;rs(Rl,F._currentValue),F._currentValue=X;break;case 13:if(F=T.memoizedState,F!==null)return F.dehydrated!==null?(rs(Mr,Mr.current&1),T.flags|=128,null):R&T.child.childLanes?ap(v,T,R):(rs(Mr,Mr.current&1),v=Xh(v,T,R),v!==null?v.sibling:null);rs(Mr,Mr.current&1);break;case 19:if(F=(R&T.childLanes)!==0,(v.flags&128)!==0){if(F)return pl(v,T,R);T.flags|=128}if(X=T.memoizedState,X!==null&&(X.rendering=null,X.tail=null,X.lastEffect=null),rs(Mr,Mr.current),F)break;return null;case 22:case 23:return T.lanes=0,nt(v,T,R)}return Xh(v,T,R)}var fn,o0,bg,zm;fn=function(v,T){for(var R=T.child;R!==null;){if(R.tag===5||R.tag===6)v.appendChild(R.stateNode);else if(R.tag!==4&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===T)break;for(;R.sibling===null;){if(R.return===null||R.return===T)return;R=R.return}R.sibling.return=R.return,R=R.sibling}},o0=function(){},bg=function(v,T,R,F){var X=v.memoizedProps;if(X!==F){v=T.stateNode,Go(ho.current);var Z=null;switch(R){case"input":X=it(v,X),F=it(v,F),Z=[];break;case"select":X=ie({},X,{value:void 0}),F=ie({},F,{value:void 0}),Z=[];break;case"textarea":X=xe(v,X),F=xe(v,F),Z=[];break;default:typeof X.onClick!="function"&&typeof F.onClick=="function"&&(v.onclick=nu)}jt(R,F);var ye;R=null;for(Lt in X)if(!F.hasOwnProperty(Lt)&&X.hasOwnProperty(Lt)&&X[Lt]!=null)if(Lt==="style"){var Xe=X[Lt];for(ye in Xe)Xe.hasOwnProperty(ye)&&(R||(R={}),R[ye]="")}else Lt!=="dangerouslySetInnerHTML"&&Lt!=="children"&&Lt!=="suppressContentEditableWarning"&&Lt!=="suppressHydrationWarning"&&Lt!=="autoFocus"&&(s.hasOwnProperty(Lt)?Z||(Z=[]):(Z=Z||[]).push(Lt,null));for(Lt in F){var st=F[Lt];if(Xe=X!=null?X[Lt]:void 0,F.hasOwnProperty(Lt)&&st!==Xe&&(st!=null||Xe!=null))if(Lt==="style")if(Xe){for(ye in Xe)!Xe.hasOwnProperty(ye)||st&&st.hasOwnProperty(ye)||(R||(R={}),R[ye]="");for(ye in st)st.hasOwnProperty(ye)&&Xe[ye]!==st[ye]&&(R||(R={}),R[ye]=st[ye])}else R||(Z||(Z=[]),Z.push(Lt,R)),R=st;else Lt==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,Xe=Xe?Xe.__html:void 0,st!=null&&Xe!==st&&(Z=Z||[]).push(Lt,st)):Lt==="children"?typeof st!="string"&&typeof st!="number"||(Z=Z||[]).push(Lt,""+st):Lt!=="suppressContentEditableWarning"&&Lt!=="suppressHydrationWarning"&&(s.hasOwnProperty(Lt)?(st!=null&&Lt==="onScroll"&&Fi("scroll",v),Z||Xe===st||(Z=[])):(Z=Z||[]).push(Lt,st))}R&&(Z=Z||[]).push("style",R);var Lt=Z;(T.updateQueue=Lt)&&(T.flags|=4)}},zm=function(v,T,R,F){R!==F&&(T.flags|=4)};function Tc(v,T){if(!ss)switch(v.tailMode){case"hidden":T=v.tail;for(var R=null;T!==null;)T.alternate!==null&&(R=T),T=T.sibling;R===null?v.tail=null:R.sibling=null;break;case"collapsed":R=v.tail;for(var F=null;R!==null;)R.alternate!==null&&(F=R),R=R.sibling;F===null?T||v.tail===null?v.tail=null:v.tail.sibling=null:F.sibling=null}}function Js(v){var T=v.alternate!==null&&v.alternate.child===v.child,R=0,F=0;if(T)for(var X=v.child;X!==null;)R|=X.lanes|X.childLanes,F|=X.subtreeFlags&14680064,F|=X.flags&14680064,X.return=v,X=X.sibling;else for(X=v.child;X!==null;)R|=X.lanes|X.childLanes,F|=X.subtreeFlags,F|=X.flags,X.return=v,X=X.sibling;return v.subtreeFlags|=F,v.childLanes=R,T}function Dp(v,T,R){var F=T.pendingProps;switch(Co(T),T.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Js(T),null;case 1:return ea(T.type)&&Cd(),Js(T),null;case 3:return F=T.stateNode,Qu(),qi(ma),qi(fa),Wa(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(v===null||v.child===null)&&(Wc(T)?T.flags|=4:v===null||v.memoizedState.isDehydrated&&!(T.flags&256)||(T.flags|=1024,cl!==null&&(u0(cl),cl=null))),o0(v,T),Js(T),null;case 5:Sh(T);var X=Go(kl.current);if(R=T.type,v!==null&&T.stateNode!=null)bg(v,T,R,F,X),v.ref!==T.ref&&(T.flags|=512,T.flags|=2097152);else{if(!F){if(T.stateNode===null)throw Error(t(166));return Js(T),null}if(v=Go(ho.current),Wc(T)){F=T.stateNode,R=T.type;var Z=T.memoizedProps;switch(F[Gr]=T,F[ol]=Z,v=(T.mode&1)!==0,R){case"dialog":Fi("cancel",F),Fi("close",F);break;case"iframe":case"object":case"embed":Fi("load",F);break;case"video":case"audio":for(X=0;X<Qo.length;X++)Fi(Qo[X],F);break;case"source":Fi("error",F);break;case"img":case"image":case"link":Fi("error",F),Fi("load",F);break;case"details":Fi("toggle",F);break;case"input":ot(F,Z),Fi("invalid",F);break;case"select":F._wrapperState={wasMultiple:!!Z.multiple},Fi("invalid",F);break;case"textarea":re(F,Z),Fi("invalid",F)}jt(R,Z),X=null;for(var ye in Z)if(Z.hasOwnProperty(ye)){var Xe=Z[ye];ye==="children"?typeof Xe=="string"?F.textContent!==Xe&&(Z.suppressHydrationWarning!==!0&&Al(F.textContent,Xe,v),X=["children",Xe]):typeof Xe=="number"&&F.textContent!==""+Xe&&(Z.suppressHydrationWarning!==!0&&Al(F.textContent,Xe,v),X=["children",""+Xe]):s.hasOwnProperty(ye)&&Xe!=null&&ye==="onScroll"&&Fi("scroll",F)}switch(R){case"input":Pe(F),yt(F,Z,!0);break;case"textarea":Pe(F),dt(F);break;case"select":case"option":break;default:typeof Z.onClick=="function"&&(F.onclick=nu)}F=X,T.updateQueue=F,F!==null&&(T.flags|=4)}else{ye=X.nodeType===9?X:X.ownerDocument,v==="http://www.w3.org/1999/xhtml"&&(v=bt(R)),v==="http://www.w3.org/1999/xhtml"?R==="script"?(v=ye.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild)):typeof F.is=="string"?v=ye.createElement(R,{is:F.is}):(v=ye.createElement(R),R==="select"&&(ye=v,F.multiple?ye.multiple=!0:F.size&&(ye.size=F.size))):v=ye.createElementNS(v,R),v[Gr]=T,v[ol]=F,fn(v,T,!1,!1),T.stateNode=v;e:{switch(ye=ze(R,F),R){case"dialog":Fi("cancel",v),Fi("close",v),X=F;break;case"iframe":case"object":case"embed":Fi("load",v),X=F;break;case"video":case"audio":for(X=0;X<Qo.length;X++)Fi(Qo[X],v);X=F;break;case"source":Fi("error",v),X=F;break;case"img":case"image":case"link":Fi("error",v),Fi("load",v),X=F;break;case"details":Fi("toggle",v),X=F;break;case"input":ot(v,F),X=it(v,F),Fi("invalid",v);break;case"option":X=F;break;case"select":v._wrapperState={wasMultiple:!!F.multiple},X=ie({},F,{value:void 0}),Fi("invalid",v);break;case"textarea":re(v,F),X=xe(v,F),Fi("invalid",v);break;default:X=F}jt(R,X),Xe=X;for(Z in Xe)if(Xe.hasOwnProperty(Z)){var st=Xe[Z];Z==="style"?Ae(v,st):Z==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,st!=null&&Ke(v,st)):Z==="children"?typeof st=="string"?(R!=="textarea"||st!=="")&&Ie(v,st):typeof st=="number"&&Ie(v,""+st):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(s.hasOwnProperty(Z)?st!=null&&Z==="onScroll"&&Fi("scroll",v):st!=null&&P(v,Z,st,ye))}switch(R){case"input":Pe(v),yt(v,F,!1);break;case"textarea":Pe(v),dt(v);break;case"option":F.value!=null&&v.setAttribute("value",""+tt(F.value));break;case"select":v.multiple=!!F.multiple,Z=F.value,Z!=null?mt(v,!!F.multiple,Z,!1):F.defaultValue!=null&&mt(v,!!F.multiple,F.defaultValue,!0);break;default:typeof X.onClick=="function"&&(v.onclick=nu)}switch(R){case"button":case"input":case"select":case"textarea":F=!!F.autoFocus;break e;case"img":F=!0;break e;default:F=!1}}F&&(T.flags|=4)}T.ref!==null&&(T.flags|=512,T.flags|=2097152)}return Js(T),null;case 6:if(v&&T.stateNode!=null)zm(v,T,v.memoizedProps,F);else{if(typeof F!="string"&&T.stateNode===null)throw Error(t(166));if(R=Go(kl.current),Go(ho.current),Wc(T)){if(F=T.stateNode,R=T.memoizedProps,F[Gr]=T,(Z=F.nodeValue!==R)&&(v=_s,v!==null))switch(v.tag){case 3:Al(F.nodeValue,R,(v.mode&1)!==0);break;case 5:v.memoizedProps.suppressHydrationWarning!==!0&&Al(F.nodeValue,R,(v.mode&1)!==0)}Z&&(T.flags|=4)}else F=(R.nodeType===9?R:R.ownerDocument).createTextNode(F),F[Gr]=T,T.stateNode=F}return Js(T),null;case 13:if(qi(Mr),F=T.memoizedState,v===null||v.memoizedState!==null&&v.memoizedState.dehydrated!==null){if(ss&&ul!==null&&T.mode&1&&!(T.flags&128))Gh(),Ho(),T.flags|=98560,Z=!1;else if(Z=Wc(T),F!==null&&F.dehydrated!==null){if(v===null){if(!Z)throw Error(t(318));if(Z=T.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(t(317));Z[Gr]=T}else Ho(),!(T.flags&128)&&(T.memoizedState=null),T.flags|=4;Js(T),Z=!1}else cl!==null&&(u0(cl),cl=null),Z=!0;if(!Z)return T.flags&65536?T:null}return T.flags&128?(T.lanes=R,T):(F=F!==null,F!==(v!==null&&v.memoizedState!==null)&&F&&(T.child.flags|=8192,T.mode&1&&(v===null||Mr.current&1?Bl===0&&(Bl=3):em())),T.updateQueue!==null&&(T.flags|=4),Js(T),null);case 4:return Qu(),o0(v,T),v===null&&tu(T.stateNode.containerInfo),Js(T),null;case 10:return Yu(T.type._context),Js(T),null;case 17:return ea(T.type)&&Cd(),Js(T),null;case 19:if(qi(Mr),Z=T.memoizedState,Z===null)return Js(T),null;if(F=(T.flags&128)!==0,ye=Z.rendering,ye===null)if(F)Tc(Z,!1);else{if(Bl!==0||v!==null&&v.flags&128)for(v=T.child;v!==null;){if(ye=vs(v),ye!==null){for(T.flags|=128,Tc(Z,!1),F=ye.updateQueue,F!==null&&(T.updateQueue=F,T.flags|=4),T.subtreeFlags=0,F=R,R=T.child;R!==null;)Z=R,v=F,Z.flags&=14680066,ye=Z.alternate,ye===null?(Z.childLanes=0,Z.lanes=v,Z.child=null,Z.subtreeFlags=0,Z.memoizedProps=null,Z.memoizedState=null,Z.updateQueue=null,Z.dependencies=null,Z.stateNode=null):(Z.childLanes=ye.childLanes,Z.lanes=ye.lanes,Z.child=ye.child,Z.subtreeFlags=0,Z.deletions=null,Z.memoizedProps=ye.memoizedProps,Z.memoizedState=ye.memoizedState,Z.updateQueue=ye.updateQueue,Z.type=ye.type,v=ye.dependencies,Z.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),R=R.sibling;return rs(Mr,Mr.current&1|2),T.child}v=v.sibling}Z.tail!==null&&Zt()>eh&&(T.flags|=128,F=!0,Tc(Z,!1),T.lanes=4194304)}else{if(!F)if(v=vs(ye),v!==null){if(T.flags|=128,F=!0,R=v.updateQueue,R!==null&&(T.updateQueue=R,T.flags|=4),Tc(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!ye.alternate&&!ss)return Js(T),null}else 2*Zt()-Z.renderingStartTime>eh&&R!==1073741824&&(T.flags|=128,F=!0,Tc(Z,!1),T.lanes=4194304);Z.isBackwards?(ye.sibling=T.child,T.child=ye):(R=Z.last,R!==null?R.sibling=ye:T.child=ye,Z.last=ye)}return Z.tail!==null?(T=Z.tail,Z.rendering=T,Z.tail=T.sibling,Z.renderingStartTime=Zt(),T.sibling=null,R=Mr.current,rs(Mr,F?R&1|2:R&1),T):(Js(T),null);case 22:case 23:return h0(),F=T.memoizedState!==null,v!==null&&v.memoizedState!==null!==F&&(T.flags|=8192),F&&T.mode&1?hu&1073741824&&(Js(T),T.subtreeFlags&6&&(T.flags|=8192)):Js(T),null;case 24:return null;case 25:return null}throw Error(t(156,T.tag))}function Id(v,T){switch(Co(T),T.tag){case 1:return ea(T.type)&&Cd(),v=T.flags,v&65536?(T.flags=v&-65537|128,T):null;case 3:return Qu(),qi(ma),qi(fa),Wa(),v=T.flags,v&65536&&!(v&128)?(T.flags=v&-65537|128,T):null;case 5:return Sh(T),null;case 13:if(qi(Mr),v=T.memoizedState,v!==null&&v.dehydrated!==null){if(T.alternate===null)throw Error(t(340));Ho()}return v=T.flags,v&65536?(T.flags=v&-65537|128,T):null;case 19:return qi(Mr),null;case 4:return Qu(),null;case 10:return Yu(T.type._context),null;case 22:case 23:return h0(),null;case 24:return null;default:return null}}var ja=!1,Pr=!1,Ta=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function Ri(v,T){var R=v.ref;if(R!==null)if(typeof R=="function")try{R(null)}catch(F){ia(v,T,F)}else R.current=null}function qs(v,T,R){try{R()}catch(F){ia(v,T,F)}}var a_=!1;function Sc(v,T){if(ju=io,v=mn(),Br(v)){if("selectionStart"in v)var R={start:v.selectionStart,end:v.selectionEnd};else e:{R=(R=v.ownerDocument)&&R.defaultView||window;var F=R.getSelection&&R.getSelection();if(F&&F.rangeCount!==0){R=F.anchorNode;var X=F.anchorOffset,Z=F.focusNode;F=F.focusOffset;try{R.nodeType,Z.nodeType}catch{R=null;break e}var ye=0,Xe=-1,st=-1,Lt=0,qt=0,ln=v,nn=null;t:for(;;){for(var kn;ln!==R||X!==0&&ln.nodeType!==3||(Xe=ye+X),ln!==Z||F!==0&&ln.nodeType!==3||(st=ye+F),ln.nodeType===3&&(ye+=ln.nodeValue.length),(kn=ln.firstChild)!==null;)nn=ln,ln=kn;for(;;){if(ln===v)break t;if(nn===R&&++Lt===X&&(Xe=ye),nn===Z&&++qt===F&&(st=ye),(kn=ln.nextSibling)!==null)break;ln=nn,nn=ln.parentNode}ln=kn}R=Xe===-1||st===-1?null:{start:Xe,end:st}}else R=null}R=R||{start:0,end:0}}else R=null;for(Xu={focusedElem:v,selectionRange:R},io=!1,Ge=T;Ge!==null;)if(T=Ge,v=T.child,(T.subtreeFlags&1028)!==0&&v!==null)v.return=T,Ge=v;else for(;Ge!==null;){T=Ge;try{var Kn=T.alternate;if(T.flags&1024)switch(T.tag){case 0:case 11:case 15:break;case 1:if(Kn!==null){var Zn=Kn.memoizedProps,Ro=Kn.memoizedState,wt=T.stateNode,ht=wt.getSnapshotBeforeUpdate(T.elementType===T.type?Zn:$u(T.type,Zn),Ro);wt.__reactInternalSnapshotBeforeUpdate=ht}break;case 3:var xt=T.stateNode.containerInfo;xt.nodeType===1?xt.textContent="":xt.nodeType===9&&xt.documentElement&&xt.removeChild(xt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(yn){ia(T,T.return,yn)}if(v=T.sibling,v!==null){v.return=T.return,Ge=v;break}Ge=T.return}return Kn=a_,a_=!1,Kn}function _f(v,T,R){var F=T.updateQueue;if(F=F!==null?F.lastEffect:null,F!==null){var X=F=F.next;do{if((X.tag&v)===v){var Z=X.destroy;X.destroy=void 0,Z!==void 0&&qs(T,R,Z)}X=X.next}while(X!==F)}}function jf(v,T){if(T=T.updateQueue,T=T!==null?T.lastEffect:null,T!==null){var R=T=T.next;do{if((R.tag&v)===v){var F=R.create;R.destroy=F()}R=R.next}while(R!==T)}}function l_(v){var T=v.ref;if(T!==null){var R=v.stateNode;switch(v.tag){case 5:v=R;break;default:v=R}typeof T=="function"?T(v):T.current=v}}function vf(v){var T=v.alternate;T!==null&&(v.alternate=null,vf(T)),v.child=null,v.deletions=null,v.sibling=null,v.tag===5&&(T=v.stateNode,T!==null&&(delete T[Gr],delete T[ol],delete T[da],delete T[Y],delete T[Es])),v.stateNode=null,v.return=null,v.dependencies=null,v.memoizedProps=null,v.memoizedState=null,v.pendingProps=null,v.stateNode=null,v.updateQueue=null}function Sa(v){return v.tag===5||v.tag===3||v.tag===4}function Tg(v){e:for(;;){for(;v.sibling===null;){if(v.return===null||Sa(v.return))return null;v=v.return}for(v.sibling.return=v.return,v=v.sibling;v.tag!==5&&v.tag!==6&&v.tag!==18;){if(v.flags&2||v.child===null||v.tag===4)continue e;v.child.return=v,v=v.child}if(!(v.flags&2))return v.stateNode}}function Xf(v,T,R){var F=v.tag;if(F===5||F===6)v=v.stateNode,T?R.nodeType===8?R.parentNode.insertBefore(v,T):R.insertBefore(v,T):(R.nodeType===8?(T=R.parentNode,T.insertBefore(v,R)):(T=R,T.appendChild(v)),R=R._reactRootContainer,R!=null||T.onclick!==null||(T.onclick=nu));else if(F!==4&&(v=v.child,v!==null))for(Xf(v,T,R),v=v.sibling;v!==null;)Xf(v,T,R),v=v.sibling}function yf(v,T,R){var F=v.tag;if(F===5||F===6)v=v.stateNode,T?R.insertBefore(v,T):R.appendChild(v);else if(F!==4&&(v=v.child,v!==null))for(yf(v,T,R),v=v.sibling;v!==null;)yf(v,T,R),v=v.sibling}var fl=null,uu=!1;function Rd(v,T,R){for(R=R.child;R!==null;)up(v,T,R),R=R.sibling}function up(v,T,R){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(Ar,R)}catch{}switch(R.tag){case 5:Pr||Ri(R,T);case 6:var F=fl,X=uu;fl=null,Rd(v,T,R),fl=F,uu=X,fl!==null&&(uu?(v=fl,R=R.stateNode,v.nodeType===8?v.parentNode.removeChild(R):v.removeChild(R)):fl.removeChild(R.stateNode));break;case 18:fl!==null&&(uu?(v=fl,R=R.stateNode,v.nodeType===8?zc(v.parentNode,R):v.nodeType===1&&zc(v,R),Un(v)):zc(fl,R.stateNode));break;case 4:F=fl,X=uu,fl=R.stateNode.containerInfo,uu=!0,Rd(v,T,R),fl=F,uu=X;break;case 0:case 11:case 14:case 15:if(!Pr&&(F=R.updateQueue,F!==null&&(F=F.lastEffect,F!==null))){X=F=F.next;do{var Z=X,ye=Z.destroy;Z=Z.tag,ye!==void 0&&(Z&2||Z&4)&&qs(R,T,ye),X=X.next}while(X!==F)}Rd(v,T,R);break;case 1:if(!Pr&&(Ri(R,T),F=R.stateNode,typeof F.componentWillUnmount=="function"))try{F.props=R.memoizedProps,F.state=R.memoizedState,F.componentWillUnmount()}catch(Xe){ia(R,T,Xe)}Rd(v,T,R);break;case 21:Rd(v,T,R);break;case 22:R.mode&1?(Pr=(F=Pr)||R.memoizedState!==null,Rd(v,T,R),Pr=F):Rd(v,T,R);break;default:Rd(v,T,R)}}function kd(v){var T=v.updateQueue;if(T!==null){v.updateQueue=null;var R=v.stateNode;R===null&&(R=v.stateNode=new Ta),T.forEach(function(F){var X=Ny.bind(null,v,F);R.has(F)||(R.add(F),F.then(X,X))})}}function Qc(v,T){var R=T.deletions;if(R!==null)for(var F=0;F<R.length;F++){var X=R[F];try{var Z=v,ye=T,Xe=ye;e:for(;Xe!==null;){switch(Xe.tag){case 5:fl=Xe.stateNode,uu=!1;break e;case 3:fl=Xe.stateNode.containerInfo,uu=!0;break e;case 4:fl=Xe.stateNode.containerInfo,uu=!0;break e}Xe=Xe.return}if(fl===null)throw Error(t(160));up(Z,ye,X),fl=null,uu=!1;var st=X.alternate;st!==null&&(st.return=null),X.return=null}catch(Lt){ia(X,T,Lt)}}if(T.subtreeFlags&12854)for(T=T.child;T!==null;)Sg(T,v),T=T.sibling}function Sg(v,T){var R=v.alternate,F=v.flags;switch(v.tag){case 0:case 11:case 14:case 15:if(Qc(T,v),hr(v),F&4){try{_f(3,v,v.return),jf(3,v)}catch(Zn){ia(v,v.return,Zn)}try{_f(5,v,v.return)}catch(Zn){ia(v,v.return,Zn)}}break;case 1:Qc(T,v),hr(v),F&512&&R!==null&&Ri(R,R.return);break;case 5:if(Qc(T,v),hr(v),F&512&&R!==null&&Ri(R,R.return),v.flags&32){var X=v.stateNode;try{Ie(X,"")}catch(Zn){ia(v,v.return,Zn)}}if(F&4&&(X=v.stateNode,X!=null)){var Z=v.memoizedProps,ye=R!==null?R.memoizedProps:Z,Xe=v.type,st=v.updateQueue;if(v.updateQueue=null,st!==null)try{Xe==="input"&&Z.type==="radio"&&Z.name!=null&&vt(X,Z),ze(Xe,ye);var Lt=ze(Xe,Z);for(ye=0;ye<st.length;ye+=2){var qt=st[ye],ln=st[ye+1];qt==="style"?Ae(X,ln):qt==="dangerouslySetInnerHTML"?Ke(X,ln):qt==="children"?Ie(X,ln):P(X,qt,ln,Lt)}switch(Xe){case"input":It(X,Z);break;case"textarea":Be(X,Z);break;case"select":var nn=X._wrapperState.wasMultiple;X._wrapperState.wasMultiple=!!Z.multiple;var kn=Z.value;kn!=null?mt(X,!!Z.multiple,kn,!1):nn!==!!Z.multiple&&(Z.defaultValue!=null?mt(X,!!Z.multiple,Z.defaultValue,!0):mt(X,!!Z.multiple,Z.multiple?[]:"",!1))}X[ol]=Z}catch(Zn){ia(v,v.return,Zn)}}break;case 6:if(Qc(T,v),hr(v),F&4){if(v.stateNode===null)throw Error(t(162));X=v.stateNode,Z=v.memoizedProps;try{X.nodeValue=Z}catch(Zn){ia(v,v.return,Zn)}}break;case 3:if(Qc(T,v),hr(v),F&4&&R!==null&&R.memoizedState.isDehydrated)try{Un(T.containerInfo)}catch(Zn){ia(v,v.return,Zn)}break;case 4:Qc(T,v),hr(v);break;case 13:Qc(T,v),hr(v),X=v.child,X.flags&8192&&(Z=X.memoizedState!==null,X.stateNode.isHidden=Z,!Z||X.alternate!==null&&X.alternate.memoizedState!==null||(gl=Zt())),F&4&&kd(v);break;case 22:if(qt=R!==null&&R.memoizedState!==null,v.mode&1?(Pr=(Lt=Pr)||qt,Qc(T,v),Pr=Lt):Qc(T,v),hr(v),F&8192){if(Lt=v.memoizedState!==null,(v.stateNode.isHidden=Lt)&&!qt&&(v.mode&1)!==0)for(Ge=v,qt=v.child;qt!==null;){for(ln=Ge=qt;Ge!==null;){switch(nn=Ge,kn=nn.child,nn.tag){case 0:case 11:case 14:case 15:_f(4,nn,nn.return);break;case 1:Ri(nn,nn.return);var Kn=nn.stateNode;if(typeof Kn.componentWillUnmount=="function"){F=nn,R=nn.return;try{T=F,Kn.props=T.memoizedProps,Kn.state=T.memoizedState,Kn.componentWillUnmount()}catch(Zn){ia(F,R,Zn)}}break;case 5:Ri(nn,nn.return);break;case 22:if(nn.memoizedState!==null){Yf(ln);continue}}kn!==null?(kn.return=nn,Ge=kn):Yf(ln)}qt=qt.sibling}e:for(qt=null,ln=v;;){if(ln.tag===5){if(qt===null){qt=ln;try{X=ln.stateNode,Lt?(Z=X.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none"):(Xe=ln.stateNode,st=ln.memoizedProps.style,ye=st!=null&&st.hasOwnProperty("display")?st.display:null,Xe.style.display=de("display",ye))}catch(Zn){ia(v,v.return,Zn)}}}else if(ln.tag===6){if(qt===null)try{ln.stateNode.nodeValue=Lt?"":ln.memoizedProps}catch(Zn){ia(v,v.return,Zn)}}else if((ln.tag!==22&&ln.tag!==23||ln.memoizedState===null||ln===v)&&ln.child!==null){ln.child.return=ln,ln=ln.child;continue}if(ln===v)break e;for(;ln.sibling===null;){if(ln.return===null||ln.return===v)break e;qt===ln&&(qt=null),ln=ln.return}qt===ln&&(qt=null),ln.sibling.return=ln.return,ln=ln.sibling}}break;case 19:Qc(T,v),hr(v),F&4&&kd(v);break;case 21:break;default:Qc(T,v),hr(v)}}function hr(v){var T=v.flags;if(T&2){try{e:{for(var R=v.return;R!==null;){if(Sa(R)){var F=R;break e}R=R.return}throw Error(t(160))}switch(F.tag){case 5:var X=F.stateNode;F.flags&32&&(Ie(X,""),F.flags&=-33);var Z=Tg(v);yf(v,Z,X);break;case 3:case 4:var ye=F.stateNode.containerInfo,Xe=Tg(v);Xf(v,Xe,ye);break;default:throw Error(t(161))}}catch(st){ia(v,v.return,st)}v.flags&=-3}T&4096&&(v.flags&=-4097)}function a0(v,T,R){Ge=v,vo(v)}function vo(v,T,R){for(var F=(v.mode&1)!==0;Ge!==null;){var X=Ge,Z=X.child;if(X.tag===22&&F){var ye=X.memoizedState!==null||ja;if(!ye){var Xe=X.alternate,st=Xe!==null&&Xe.memoizedState!==null||Pr;Xe=ja;var Lt=Pr;if(ja=ye,(Pr=st)&&!Lt)for(Ge=X;Ge!==null;)ye=Ge,st=ye.child,ye.tag===22&&ye.memoizedState!==null?Od(X):st!==null?(st.return=ye,Ge=st):Od(X);for(;Z!==null;)Ge=Z,vo(Z),Z=Z.sibling;Ge=X,ja=Xe,Pr=Lt}Xa(v)}else X.subtreeFlags&8772&&Z!==null?(Z.return=X,Ge=Z):Xa(v)}}function Xa(v){for(;Ge!==null;){var T=Ge;if(T.flags&8772){var R=T.alternate;try{if(T.flags&8772)switch(T.tag){case 0:case 11:case 15:Pr||jf(5,T);break;case 1:var F=T.stateNode;if(T.flags&4&&!Pr)if(R===null)F.componentDidMount();else{var X=T.elementType===T.type?R.memoizedProps:$u(T.type,R.memoizedProps);F.componentDidUpdate(X,R.memoizedState,F.__reactInternalSnapshotBeforeUpdate)}var Z=T.updateQueue;Z!==null&&ti(T,Z,F);break;case 3:var ye=T.updateQueue;if(ye!==null){if(R=null,T.child!==null)switch(T.child.tag){case 5:R=T.child.stateNode;break;case 1:R=T.child.stateNode}ti(T,ye,R)}break;case 5:var Xe=T.stateNode;if(R===null&&T.flags&4){R=Xe;var st=T.memoizedProps;switch(T.type){case"button":case"input":case"select":case"textarea":st.autoFocus&&R.focus();break;case"img":st.src&&(R.src=st.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(T.memoizedState===null){var Lt=T.alternate;if(Lt!==null){var qt=Lt.memoizedState;if(qt!==null){var ln=qt.dehydrated;ln!==null&&Un(ln)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Pr||T.flags&512&&l_(T)}catch(nn){ia(T,T.return,nn)}}if(T===v){Ge=null;break}if(R=T.sibling,R!==null){R.return=T.return,Ge=R;break}Ge=T.return}}function Yf(v){for(;Ge!==null;){var T=Ge;if(T===v){Ge=null;break}var R=T.sibling;if(R!==null){R.return=T.return,Ge=R;break}Ge=T.return}}function Od(v){for(;Ge!==null;){var T=Ge;try{switch(T.tag){case 0:case 11:case 15:var R=T.return;try{jf(4,T)}catch(st){ia(T,R,st)}break;case 1:var F=T.stateNode;if(typeof F.componentDidMount=="function"){var X=T.return;try{F.componentDidMount()}catch(st){ia(T,X,st)}}var Z=T.return;try{l_(T)}catch(st){ia(T,Z,st)}break;case 5:var ye=T.return;try{l_(T)}catch(st){ia(T,ye,st)}}}catch(st){ia(T,T.return,st)}if(T===v){Ge=null;break}var Xe=T.sibling;if(Xe!==null){Xe.return=T.return,Ge=Xe;break}Ge=T.return}}var Kf=Math.ceil,Iu=N.ReactCurrentDispatcher,l0=N.ReactCurrentOwner,Vo=N.ReactCurrentBatchConfig,Zi=0,cu=null,ml=null,Ru=0,hu=0,bf=li(0),Bl=0,Ld=null,Dd=0,cp=0,Eg=0,Jf=null,Zc=null,gl=0,eh=1/0,Nd=null,Hm=!1,Gm=null,yo=null,qf=!1,ks=null,Pl=0,Tf=0,xg=null,Bd=-1,Wm=0;function Ec(){return Zi&6?Zt():Bd!==-1?Bd:Bd=Zt()}function Pd(v){return v.mode&1?Zi&2&&Ru!==0?Ru&-Ru:sp.transition!==null?(Wm===0&&(Wm=Yo()),Wm):(v=pr,v!==0||(v=window.event,v=v===void 0?16:Uu(v.type)),v):1}function ra(v,T,R,F){if(50<Tf)throw Tf=0,xg=null,Error(t(185));mu(v,R,F),(!(Zi&2)||v!==cu)&&(v===cu&&(!(Zi&2)&&(cp|=R),Bl===4&&Np(v,Ru)),Ea(v,F),R===1&&Zi===0&&!(T.mode&1)&&(eh=Zt()+500,Xs&&Sn()))}function Ea(v,T){var R=v.callbackNode;cc(v,T);var F=ka(v,v===cu?Ru:0);if(F===0)R!==null&&Ia(R),v.callbackNode=null,v.callbackPriority=0;else if(T=F&-F,v.callbackPriority!==T){if(R!=null&&Ia(R),T===1)v.tag===0?Uo(Sf.bind(null,v)):ru(Sf.bind(null,v)),Uc(function(){!(Zi&6)&&Sn()}),R=null;else{switch(Ei(F)){case 1:R=qa;break;case 4:R=Ra;break;case 16:R=Ns;break;case 536870912:R=Di;break;default:R=Ns}R=nh(R,u_.bind(null,v))}v.callbackPriority=T,v.callbackNode=R}}function u_(v,T){if(Bd=-1,Wm=0,(Zi&6)!==0)throw Error(t(327));var R=v.callbackNode;if(th()&&v.callbackNode!==R)return null;var F=ka(v,v===cu?Ru:0);if(F===0)return null;if(F&30||F&v.expiredLanes||T)T=hp(v,F);else{T=F;var X=Zi;Zi|=2;var Z=c_();(cu!==v||Ru!==T)&&(Nd=null,eh=Zt()+500,Zf(v,T));do try{Dy();break}catch(Xe){d0(v,Xe)}while(!0);su(),Iu.current=Z,Zi=X,ml!==null?T=0:(cu=null,Ru=0,T=Bl)}if(T!==0){if(T===2&&(X=Vs(v),X!==0&&(F=X,T=Qf(v,X))),T===1)throw R=Ld,Zf(v,0),Np(v,F),Ea(v,Zt()),R;if(T===6)Np(v,F);else{if(X=v.current.alternate,(F&30)===0&&!hv(X)&&(T=hp(v,F),T===2&&(Z=Vs(v),Z!==0&&(F=Z,T=Qf(v,Z))),T===1))throw R=Ld,Zf(v,0),Np(v,F),Ea(v,Zt()),R;switch(v.finishedWork=X,v.finishedLanes=F,T){case 0:case 1:throw Error(t(345));case 2:Bp(v,Zc,Nd);break;case 3:if(Np(v,F),(F&130023424)===F&&(T=gl+500-Zt(),10<T)){if(ka(v,0)!==0)break;if(X=v.suspendedLanes,(X&F)!==F){Ec(),v.pingedLanes|=v.suspendedLanes&X;break}v.timeoutHandle=sl(Bp.bind(null,v,Zc,Nd),T);break}Bp(v,Zc,Nd);break;case 4:if(Np(v,F),(F&4194240)===F)break;for(T=v.eventTimes,X=-1;0<F;){var ye=31-zr(F);Z=1<<ye,ye=T[ye],ye>X&&(X=ye),F&=~Z}if(F=X,F=Zt()-F,F=(120>F?120:480>F?480:1080>F?1080:1920>F?1920:3e3>F?3e3:4320>F?4320:1960*Kf(F/1960))-F,10<F){v.timeoutHandle=sl(Bp.bind(null,v,Zc,Nd),F);break}Bp(v,Zc,Nd);break;case 5:Bp(v,Zc,Nd);break;default:throw Error(t(329))}}}return Ea(v,Zt()),v.callbackNode===R?u_.bind(null,v):null}function Qf(v,T){var R=Jf;return v.current.memoizedState.isDehydrated&&(Zf(v,T).flags|=256),v=hp(v,T),v!==2&&(T=Zc,Zc=R,T!==null&&u0(T)),v}function u0(v){Zc===null?Zc=v:Zc.push.apply(Zc,v)}function hv(v){for(var T=v;;){if(T.flags&16384){var R=T.updateQueue;if(R!==null&&(R=R.stores,R!==null))for(var F=0;F<R.length;F++){var X=R[F],Z=X.getSnapshot;X=X.value;try{if(!Ne(Z(),X))return!1}catch{return!1}}}if(R=T.child,T.subtreeFlags&16384&&R!==null)R.return=T,T=R;else{if(T===v)break;for(;T.sibling===null;){if(T.return===null||T.return===v)return!0;T=T.return}T.sibling.return=T.return,T=T.sibling}}return!0}function Np(v,T){for(T&=~Eg,T&=~cp,v.suspendedLanes|=T,v.pingedLanes&=~T,v=v.expirationTimes;0<T;){var R=31-zr(T),F=1<<R;v[R]=-1,T&=~F}}function Sf(v){if(Zi&6)throw Error(t(327));th();var T=ka(v,0);if(!(T&1))return Ea(v,Zt()),null;var R=hp(v,T);if(v.tag!==0&&R===2){var F=Vs(v);F!==0&&(T=F,R=Qf(v,F))}if(R===1)throw R=Ld,Zf(v,0),Np(v,T),Ea(v,Zt()),R;if(R===6)throw Error(t(345));return v.finishedWork=v.current.alternate,v.finishedLanes=T,Bp(v,Zc,Nd),Ea(v,Zt()),null}function c0(v,T){var R=Zi;Zi|=1;try{return v(T)}finally{Zi=R,Zi===0&&(eh=Zt()+500,Xs&&Sn())}}function Ef(v){ks!==null&&ks.tag===0&&!(Zi&6)&&th();var T=Zi;Zi|=1;var R=Vo.transition,F=pr;try{if(Vo.transition=null,pr=1,v)return v()}finally{pr=F,Vo.transition=R,Zi=T,!(Zi&6)&&Sn()}}function h0(){hu=bf.current,qi(bf)}function Zf(v,T){v.finishedWork=null,v.finishedLanes=0;var R=v.timeoutHandle;if(R!==-1&&(v.timeoutHandle=-1,Zo(R)),ml!==null)for(R=ml.return;R!==null;){var F=R;switch(Co(F),F.tag){case 1:F=F.type.childContextTypes,F!=null&&Cd();break;case 3:Qu(),qi(ma),qi(fa),Wa();break;case 5:Sh(F);break;case 4:Qu();break;case 13:qi(Mr);break;case 19:qi(Mr);break;case 10:Yu(F.type._context);break;case 22:case 23:h0()}R=R.return}if(cu=v,ml=v=Yh(v.current,null),Ru=hu=T,Bl=0,Ld=null,Eg=cp=Dd=0,Zc=Jf=null,ws!==null){for(T=0;T<ws.length;T++)if(R=ws[T],F=R.interleaved,F!==null){R.interleaved=null;var X=F.next,Z=R.pending;if(Z!==null){var ye=Z.next;Z.next=X,F.next=ye}R.pending=F}ws=null}return v}function d0(v,T){do{var R=ml;try{if(su(),Hs.current=h,au){for(var F=bn.memoizedState;F!==null;){var X=F.queue;X!==null&&(X.pending=null),F=F.next}au=!1}if(jc=0,$s=mi=bn=null,Ol=!1,Bt=0,l0.current=null,R===null||R.return===null){Bl=1,Ld=T,ml=null;break}e:{var Z=v,ye=R.return,Xe=R,st=T;if(T=Ru,Xe.flags|=32768,st!==null&&typeof st=="object"&&typeof st.then=="function"){var Lt=st,qt=Xe,ln=qt.tag;if(!(qt.mode&1)&&(ln===0||ln===11||ln===15)){var nn=qt.alternate;nn?(qt.updateQueue=nn.updateQueue,qt.memoizedState=nn.memoizedState,qt.lanes=nn.lanes):(qt.updateQueue=null,qt.memoizedState=null)}var kn=an(ye);if(kn!==null){kn.flags&=-257,_n(kn,ye,Xe,Z,T),kn.mode&1&&Jt(Z,Lt,T),T=kn,st=Lt;var Kn=T.updateQueue;if(Kn===null){var Zn=new Set;Zn.add(st),T.updateQueue=Zn}else Kn.add(st);break e}else{if(!(T&1)){Jt(Z,Lt,T),em();break e}st=Error(t(426))}}else if(ss&&Xe.mode&1){var Ro=an(ye);if(Ro!==null){!(Ro.flags&65536)&&(Ro.flags|=256),_n(Ro,ye,Xe,Z,T),Ao(B(st,Xe));break e}}Z=st=B(st,Xe),Bl!==4&&(Bl=2),Jf===null?Jf=[Z]:Jf.push(Z),Z=ye;do{switch(Z.tag){case 3:Z.flags|=65536,T&=-T,Z.lanes|=T;var wt=Qe(Z,st,T);qn(Z,wt);break e;case 1:Xe=st;var ht=Z.type,xt=Z.stateNode;if(!(Z.flags&128)&&(typeof ht.getDerivedStateFromError=="function"||xt!==null&&typeof xt.componentDidCatch=="function"&&(yo===null||!yo.has(xt)))){Z.flags|=65536,T&=-T,Z.lanes|=T;var yn=Et(Z,Xe,T);qn(Z,yn);break e}}Z=Z.return}while(Z!==null)}f0(R)}catch(sr){T=sr,ml===R&&R!==null&&(ml=R=R.return);continue}break}while(!0)}function c_(){var v=Iu.current;return Iu.current=h,v===null?h:v}function em(){(Bl===0||Bl===3||Bl===2)&&(Bl=4),cu===null||!(Dd&268435455)&&!(cp&268435455)||Np(cu,Ru)}function hp(v,T){var R=Zi;Zi|=2;var F=c_();(cu!==v||Ru!==T)&&(Nd=null,Zf(v,T));do try{h_();break}catch(X){d0(v,X)}while(!0);if(su(),Zi=R,Iu.current=F,ml!==null)throw Error(t(261));return cu=null,Ru=0,Bl}function h_(){for(;ml!==null;)p0(ml)}function Dy(){for(;ml!==null&&!wo();)p0(ml)}function p0(v){var T=dv(v.alternate,v,hu);v.memoizedProps=v.pendingProps,T===null?f0(v):ml=T,l0.current=null}function f0(v){var T=v;do{var R=T.alternate;if(v=T.return,(T.flags&32768)===0){if(R=Dp(R,T,hu),R!==null){ml=R;return}}else{if(R=Id(R,T),R!==null){R.flags&=32767,ml=R;return}if(v!==null)v.flags|=32768,v.subtreeFlags=0,v.deletions=null;else{Bl=6,ml=null;return}}if(T=T.sibling,T!==null){ml=T;return}ml=T=v}while(T!==null);Bl===0&&(Bl=5)}function Bp(v,T,R){var F=pr,X=Vo.transition;try{Vo.transition=null,pr=1,Pn(v,T,R,F)}finally{Vo.transition=X,pr=F}return null}function Pn(v,T,R,F){do th();while(ks!==null);if(Zi&6)throw Error(t(327));R=v.finishedWork;var X=v.finishedLanes;if(R===null)return null;if(v.finishedWork=null,v.finishedLanes=0,R===v.current)throw Error(t(177));v.callbackNode=null,v.callbackPriority=0;var Z=R.lanes|R.childLanes;if(hh(v,Z),v===cu&&(ml=cu=null,Ru=0),!(R.subtreeFlags&2064)&&!(R.flags&2064)||qf||(qf=!0,nh(Ns,function(){return th(),null})),Z=(R.flags&15990)!==0,(R.subtreeFlags&15990)!==0||Z){Z=Vo.transition,Vo.transition=null;var ye=pr;pr=1;var Xe=Zi;Zi|=4,l0.current=null,Sc(v,R),Sg(R,v),oo(Xu),io=!!ju,Xu=ju=null,v.current=R,a0(R),jl(),Zi=Xe,pr=ye,Vo.transition=Z}else v.current=R;if(qf&&(qf=!1,ks=v,Pl=X),Z=v.pendingLanes,Z===0&&(yo=null),$r(R.stateNode),Ea(v,Zt()),T!==null)for(F=v.onRecoverableError,R=0;R<T.length;R++)X=T[R],F(X.value,{componentStack:X.stack,digest:X.digest});if(Hm)throw Hm=!1,v=Gm,Gm=null,v;return Pl&1&&v.tag!==0&&th(),Z=v.pendingLanes,Z&1?v===xg?Tf++:(Tf=0,xg=v):Tf=0,Sn(),null}function th(){if(ks!==null){var v=Ei(Pl),T=Vo.transition,R=pr;try{if(Vo.transition=null,pr=16>v?16:v,ks===null)var F=!1;else{if(v=ks,ks=null,Pl=0,(Zi&6)!==0)throw Error(t(331));var X=Zi;for(Zi|=4,Ge=v.current;Ge!==null;){var Z=Ge,ye=Z.child;if(Ge.flags&16){var Xe=Z.deletions;if(Xe!==null){for(var st=0;st<Xe.length;st++){var Lt=Xe[st];for(Ge=Lt;Ge!==null;){var qt=Ge;switch(qt.tag){case 0:case 11:case 15:_f(8,qt,Z)}var ln=qt.child;if(ln!==null)ln.return=qt,Ge=ln;else for(;Ge!==null;){qt=Ge;var nn=qt.sibling,kn=qt.return;if(vf(qt),qt===Lt){Ge=null;break}if(nn!==null){nn.return=kn,Ge=nn;break}Ge=kn}}}var Kn=Z.alternate;if(Kn!==null){var Zn=Kn.child;if(Zn!==null){Kn.child=null;do{var Ro=Zn.sibling;Zn.sibling=null,Zn=Ro}while(Zn!==null)}}Ge=Z}}if(Z.subtreeFlags&2064&&ye!==null)ye.return=Z,Ge=ye;else e:for(;Ge!==null;){if(Z=Ge,(Z.flags&2048)!==0)switch(Z.tag){case 0:case 11:case 15:_f(9,Z,Z.return)}var wt=Z.sibling;if(wt!==null){wt.return=Z.return,Ge=wt;break e}Ge=Z.return}}var ht=v.current;for(Ge=ht;Ge!==null;){ye=Ge;var xt=ye.child;if(ye.subtreeFlags&2064&&xt!==null)xt.return=ye,Ge=xt;else e:for(ye=ht;Ge!==null;){if(Xe=Ge,(Xe.flags&2048)!==0)try{switch(Xe.tag){case 0:case 11:case 15:jf(9,Xe)}}catch(sr){ia(Xe,Xe.return,sr)}if(Xe===ye){Ge=null;break e}var yn=Xe.sibling;if(yn!==null){yn.return=Xe.return,Ge=yn;break e}Ge=Xe.return}}if(Zi=X,Sn(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(Ar,v)}catch{}F=!0}return F}finally{pr=R,Vo.transition=T}}return!1}function xf(v,T,R){T=B(R,T),T=Qe(v,T,1),v=Vi(v,T,1),T=Ec(),v!==null&&(mu(v,1,T),Ea(v,T))}function ia(v,T,R){if(v.tag===3)xf(v,v,R);else for(;T!==null;){if(T.tag===3){xf(T,v,R);break}else if(T.tag===1){var F=T.stateNode;if(typeof T.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(yo===null||!yo.has(F))){v=B(R,v),v=Et(T,v,1),T=Vi(T,v,1),v=Ec(),T!==null&&(mu(T,1,v),Ea(T,v));break}}T=T.return}}function d_(v,T,R){var F=v.pingCache;F!==null&&F.delete(T),T=Ec(),v.pingedLanes|=v.suspendedLanes&R,cu===v&&(Ru&R)===R&&(Bl===4||Bl===3&&(Ru&130023424)===Ru&&500>Zt()-gl?Zf(v,0):Eg|=R),Ea(v,T)}function m0(v,T){T===0&&(v.mode&1?(T=fs,fs<<=1,!(fs&130023424)&&(fs=4194304)):T=1);var R=Ec();v=Ga(v,T),v!==null&&(mu(v,T,R),Ea(v,R))}function tm(v){var T=v.memoizedState,R=0;T!==null&&(R=T.retryLane),m0(v,R)}function Ny(v,T){var R=0;switch(v.tag){case 13:var F=v.stateNode,X=v.memoizedState;X!==null&&(R=X.retryLane);break;case 19:F=v.stateNode;break;default:throw Error(t(314))}F!==null&&F.delete(T),m0(v,R)}var dv;dv=function(v,T,R){if(v!==null)if(v.memoizedProps!==T.pendingProps||ma.current)pn=!0;else{if(!(v.lanes&R)&&!(T.flags&128))return pn=!1,us(v,T,R);pn=(v.flags&131072)!==0}else pn=!1,ss&&T.flags&1048576&&gf(T,yh,T.index);switch(T.lanes=0,T.tag){case 2:var F=T.type;lp(v,T),v=T.pendingProps;var X=Gc(T,fa.current);Ha(T,R),X=Wh(null,T,F,v,X,R);var Z=Xc();return T.flags|=1,typeof X=="object"&&X!==null&&typeof X.render=="function"&&X.$$typeof===void 0?(T.tag=1,T.memoizedState=null,T.updateQueue=null,ea(F)?(Z=!0,Us(T)):Z=!1,T.memoizedState=X.state!==null&&X.state!==void 0?X.state:null,op(T),X.updater=as,T.stateNode=X,X._reactInternals=T,_c(T,F,v,R),T=An(null,T,F,!0,Z,R)):(T.tag=0,ss&&Z&&iu(T),Or(null,T,X,R),T=T.child),T;case 16:F=T.elementType;e:{switch(lp(v,T),v=T.pendingProps,X=F._init,F=X(F._payload),T.type=F,X=T.tag=Pp(F),v=$u(F,v),X){case 0:T=tn(null,T,F,v,R);break e;case 1:T=Tn(null,T,F,v,R);break e;case 11:T=St(null,T,F,v,R);break e;case 14:T=we(null,T,F,$u(F.type,v),R);break e}throw Error(t(306,F,""))}return T;case 0:return F=T.type,X=T.pendingProps,X=T.elementType===F?X:$u(F,X),tn(v,T,F,X,R);case 1:return F=T.type,X=T.pendingProps,X=T.elementType===F?X:$u(F,X),Tn(v,T,F,X,R);case 3:e:{if(Bn(T),v===null)throw Error(t(387));F=T.pendingProps,Z=T.memoizedState,X=Z.element,bh(v,T),kr(T,F,null,R);var ye=T.memoizedState;if(F=ye.element,Z.isDehydrated)if(Z={element:F,isDehydrated:!1,cache:ye.cache,pendingSuspenseBoundaries:ye.pendingSuspenseBoundaries,transitions:ye.transitions},T.updateQueue.baseState=Z,T.memoizedState=Z,T.flags&256){X=B(Error(t(423)),T),T=ur(v,T,F,R,X);break e}else if(F!==X){X=B(Error(t(424)),T),T=ur(v,T,F,R,X);break e}else for(ul=pc(T.stateNode.containerInfo.firstChild),_s=T,ss=!0,cl=null,R=Cu(T,null,F,R),T.child=R;R;)R.flags=R.flags&-3|4096,R=R.sibling;else{if(Ho(),F===X){T=Xh(v,T,R);break e}Or(v,T,F,R)}T=T.child}return T;case 5:return Th(T),v===null&&Ii(T),F=T.type,X=T.pendingProps,Z=v!==null?v.memoizedProps:null,ye=X.children,vh(F,X)?ye=null:Z!==null&&vh(F,Z)&&(T.flags|=32),Ut(v,T),Or(v,T,ye,R),T.child;case 6:return v===null&&Ii(T),null;case 13:return ap(v,T,R);case 4:return qu(T,T.stateNode.containerInfo),F=T.pendingProps,v===null?T.child=_a(T,null,F,R):Or(v,T,F,R),T.child;case 11:return F=T.type,X=T.pendingProps,X=T.elementType===F?X:$u(F,X),St(v,T,F,X,R);case 7:return Or(v,T,T.pendingProps,R),T.child;case 8:return Or(v,T,T.pendingProps.children,R),T.child;case 12:return Or(v,T,T.pendingProps.children,R),T.child;case 10:e:{if(F=T.type._context,X=T.pendingProps,Z=T.memoizedProps,ye=X.value,rs(Rl,F._currentValue),F._currentValue=ye,Z!==null)if(Ne(Z.value,ye)){if(Z.children===X.children&&!ma.current){T=Xh(v,T,R);break e}}else for(Z=T.child,Z!==null&&(Z.return=T);Z!==null;){var Xe=Z.dependencies;if(Xe!==null){ye=Z.child;for(var st=Xe.firstContext;st!==null;){if(st.context===F){if(Z.tag===1){st=ta(-1,R&-R),st.tag=2;var Lt=Z.updateQueue;if(Lt!==null){Lt=Lt.shared;var qt=Lt.pending;qt===null?st.next=st:(st.next=qt.next,qt.next=st),Lt.pending=st}}Z.lanes|=R,st=Z.alternate,st!==null&&(st.lanes|=R),os(Z.return,R,T),Xe.lanes|=R;break}st=st.next}}else if(Z.tag===10)ye=Z.type===T.type?null:Z.child;else if(Z.tag===18){if(ye=Z.return,ye===null)throw Error(t(341));ye.lanes|=R,Xe=ye.alternate,Xe!==null&&(Xe.lanes|=R),os(ye,R,T),ye=Z.sibling}else ye=Z.child;if(ye!==null)ye.return=Z;else for(ye=Z;ye!==null;){if(ye===T){ye=null;break}if(Z=ye.sibling,Z!==null){Z.return=ye.return,ye=Z;break}ye=ye.return}Z=ye}Or(v,T,X.children,R),T=T.child}return T;case 9:return X=T.type,F=T.pendingProps.children,Ha(T,R),X=xs(X),F=F(X),T.flags|=1,Or(v,T,F,R),T.child;case 14:return F=T.type,X=$u(F,T.pendingProps),X=$u(F.type,X),we(v,T,F,X,R);case 15:return Re(v,T,T.type,T.pendingProps,R);case 17:return F=T.type,X=T.pendingProps,X=T.elementType===F?X:$u(F,X),lp(v,T),T.tag=1,ea(F)?(v=!0,Us(T)):v=!1,Ha(T,R),ou(T,F,X),_c(T,F,X,R),An(null,T,F,!0,v,R);case 19:return pl(v,T,R);case 22:return nt(v,T,R)}throw Error(t(156,T.tag))};function nh(v,T){return bs(v,T)}function bo(v,T,R,F){this.tag=v,this.key=R,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=T,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ku(v,T,R,F){return new bo(v,T,R,F)}function wg(v){return v=v.prototype,!(!v||!v.isReactComponent)}function Pp(v){if(typeof v=="function")return wg(v)?1:0;if(v!=null){if(v=v.$$typeof,v===le)return 11;if(v===pe)return 14}return 2}function Yh(v,T){var R=v.alternate;return R===null?(R=ku(v.tag,T,v.key,v.mode),R.elementType=v.elementType,R.type=v.type,R.stateNode=v.stateNode,R.alternate=v,v.alternate=R):(R.pendingProps=T,R.type=v.type,R.flags=0,R.subtreeFlags=0,R.deletions=null),R.flags=v.flags&14680064,R.childLanes=v.childLanes,R.lanes=v.lanes,R.child=v.child,R.memoizedProps=v.memoizedProps,R.memoizedState=v.memoizedState,R.updateQueue=v.updateQueue,T=v.dependencies,R.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext},R.sibling=v.sibling,R.index=v.index,R.ref=v.ref,R}function nm(v,T,R,F,X,Z){var ye=2;if(F=v,typeof v=="function")wg(v)&&(ye=1);else if(typeof v=="string")ye=5;else e:switch(v){case H:return Fp(R.children,X,Z,T);case U:ye=8,X|=8;break;case Q:return v=ku(12,R,T,X|2),v.elementType=Q,v.lanes=Z,v;case ge:return v=ku(13,R,T,X),v.elementType=ge,v.lanes=Z,v;case ce:return v=ku(19,R,T,X),v.elementType=ce,v.lanes=Z,v;case Oe:return Up(R,X,Z,T);default:if(typeof v=="object"&&v!==null)switch(v.$$typeof){case ne:ye=10;break e;case oe:ye=9;break e;case le:ye=11;break e;case pe:ye=14;break e;case Te:ye=16,F=null;break e}throw Error(t(130,v==null?v:typeof v,""))}return T=ku(ye,R,T,X),T.elementType=v,T.type=F,T.lanes=Z,T}function Fp(v,T,R,F){return v=ku(7,v,F,T),v.lanes=R,v}function Up(v,T,R,F){return v=ku(22,v,F,T),v.elementType=Oe,v.lanes=R,v.stateNode={isHidden:!1},v}function wf(v,T,R){return v=ku(6,v,null,T),v.lanes=R,v}function fd(v,T,R){return T=ku(4,v.children!==null?v.children:[],v.key,T),T.lanes=R,T.stateNode={containerInfo:v.containerInfo,pendingChildren:null,implementation:v.implementation},T}function dp(v,T,R,F,X){this.tag=T,this.containerInfo=v,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xl(0),this.expirationTimes=Xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xl(0),this.identifierPrefix=F,this.onRecoverableError=X,this.mutableSourceEagerHydrationData=null}function Vm(v,T,R,F,X,Z,ye,Xe,st){return v=new dp(v,T,R,Xe,st),T===1?(T=1,Z===!0&&(T|=8)):T=0,Z=ku(3,null,null,T),v.current=Z,Z.stateNode=v,Z.memoizedState={element:F,isDehydrated:R,cache:null,transitions:null,pendingSuspenseBoundaries:null},op(Z),v}function pv(v,T,R){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:F==null?null:""+F,children:v,containerInfo:T,implementation:R}}function $g(v){if(!v)return Hc;v=v._reactInternals;e:{if(tr(v)!==v||v.tag!==1)throw Error(t(170));var T=v;do{switch(T.tag){case 3:T=T.stateNode.context;break e;case 1:if(ea(T.type)){T=T.stateNode.__reactInternalMemoizedMergedChildContext;break e}}T=T.return}while(T!==null);throw Error(t(171))}if(v.tag===1){var R=v.type;if(ea(R))return zh(v,R,T)}return T}function Fd(v,T,R,F,X,Z,ye,Xe,st){return v=Vm(R,F,!0,v,X,Z,ye,Xe,st),v.context=$g(null),R=v.current,F=Ec(),X=Pd(R),Z=ta(F,X),Z.callback=T??null,Vi(R,Z,X),v.current.lanes=X,mu(v,X,F),Ea(v,F),v}function ki(v,T,R,F){var X=T.current,Z=Ec(),ye=Pd(X);return R=$g(R),T.context===null?T.context=R:T.pendingContext=R,T=ta(Z,ye),T.payload={element:v},F=F===void 0?null:F,F!==null&&(T.callback=F),v=Vi(X,T,ye),v!==null&&(ra(v,X,ye,Z),Ln(v,X,ye)),ye}function rm(v){if(v=v.current,!v.child)return null;switch(v.child.tag){case 5:return v.child.stateNode;default:return v.child.stateNode}}function jm(v,T){if(v=v.memoizedState,v!==null&&v.dehydrated!==null){var R=v.retryLane;v.retryLane=R!==0&&R<T?R:T}}function Cg(v,T){jm(v,T),(v=v.alternate)&&jm(v,T)}function fv(){return null}var Xm=typeof reportError=="function"?reportError:function(v){console.error(v)};function $f(v){this._internalRoot=v}Ym.prototype.render=$f.prototype.render=function(v){var T=this._internalRoot;if(T===null)throw Error(t(409));ki(v,T,null,null)},Ym.prototype.unmount=$f.prototype.unmount=function(){var v=this._internalRoot;if(v!==null){this._internalRoot=null;var T=v.containerInfo;Ef(function(){ki(null,v,null,null)}),T[Ji]=null}};function Ym(v){this._internalRoot=v}Ym.prototype.unstable_scheduleHydration=function(v){if(v){var T=Sl();v={blockedOn:null,target:v,priority:T};for(var R=0;R<_u.length&&T!==0&&T<_u[R].priority;R++);_u.splice(R,0,v),R===0&&ro(v)}};function zp(v){return!(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)}function Hp(v){return!(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11&&(v.nodeType!==8||v.nodeValue!==" react-mount-point-unstable "))}function im(){}function bi(v,T,R,F,X){if(X){if(typeof F=="function"){var Z=F;F=function(){var Lt=rm(ye);Z.call(Lt)}}var ye=Fd(T,F,v,0,null,!1,!1,"",im);return v._reactRootContainer=ye,v[Ji]=ye.current,tu(v.nodeType===8?v.parentNode:v),Ef(),ye}for(;X=v.lastChild;)v.removeChild(X);if(typeof F=="function"){var Xe=F;F=function(){var Lt=rm(st);Xe.call(Lt)}}var st=Vm(v,0,!1,null,null,!1,!1,"",im);return v._reactRootContainer=st,v[Ji]=st.current,tu(v.nodeType===8?v.parentNode:v),Ef(function(){ki(T,st,R,F)}),st}function Gp(v,T,R,F,X){var Z=R._reactRootContainer;if(Z){var ye=Z;if(typeof X=="function"){var Xe=X;X=function(){var st=rm(ye);Xe.call(st)}}ki(T,ye,v,X)}else ye=bi(R,T,v,X,F);return rm(ye)}kc=function(v){switch(v.tag){case 3:var T=v.stateNode;if(T.current.memoizedState.isDehydrated){var R=Qa(T.pendingLanes);R!==0&&(Ko(T,R|1),Ea(T,Zt()),!(Zi&6)&&(eh=Zt()+500,Sn()))}break;case 13:Ef(function(){var F=Ga(v,1);if(F!==null){var X=Ec();ra(F,v,1,X)}}),Cg(v,1)}},dh=function(v){if(v.tag===13){var T=Ga(v,134217728);if(T!==null){var R=Ec();ra(T,v,134217728,R)}Cg(v,134217728)}},Oc=function(v){if(v.tag===13){var T=Pd(v),R=Ga(v,T);if(R!==null){var F=Ec();ra(R,v,T,F)}Cg(v,T)}},Sl=function(){return pr},gu=function(v,T){var R=pr;try{return pr=v,T()}finally{pr=R}},Kt=function(v,T,R){switch(T){case"input":if(It(v,R),T=R.name,R.type==="radio"&&T!=null){for(R=v;R.parentNode;)R=R.parentNode;for(R=R.querySelectorAll("input[name="+JSON.stringify(""+T)+'][type="radio"]'),T=0;T<R.length;T++){var F=R[T];if(F!==v&&F.form===v.form){var X=kp(F);if(!X)throw Error(t(90));Ce(F),It(F,X)}}}break;case"textarea":Be(v,R);break;case"select":T=R.value,T!=null&&mt(v,!!R.multiple,T,!1)}},Er=c0,ir=Ef;var sm={usingClientEntryPoint:!1,Events:[xr,dn,kp,Lr,Si,c0]},om={findFiberByHostInstance:pa,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Cf={bundleType:om.bundleType,version:om.version,rendererPackageName:om.rendererPackageName,rendererConfig:om.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(v){return v=Dr(v),v===null?null:v.stateNode},findFiberByHostInstance:om.findFiberByHostInstance||fv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ag=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ag.isDisabled&&Ag.supportsFiber)try{Ar=Ag.inject(Cf),$n=Ag}catch{}}return Of.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sm,Of.createPortal=function(v,T){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zp(T))throw Error(t(200));return pv(v,T,null,R)},Of.createRoot=function(v,T){if(!zp(v))throw Error(t(299));var R=!1,F="",X=Xm;return T!=null&&(T.unstable_strictMode===!0&&(R=!0),T.identifierPrefix!==void 0&&(F=T.identifierPrefix),T.onRecoverableError!==void 0&&(X=T.onRecoverableError)),T=Vm(v,1,!1,null,null,R,!1,F,X),v[Ji]=T.current,tu(v.nodeType===8?v.parentNode:v),new $f(T)},Of.findDOMNode=function(v){if(v==null)return null;if(v.nodeType===1)return v;var T=v._reactInternals;if(T===void 0)throw typeof v.render=="function"?Error(t(188)):(v=Object.keys(v).join(","),Error(t(268,v)));return v=Dr(T),v=v===null?null:v.stateNode,v},Of.flushSync=function(v){return Ef(v)},Of.hydrate=function(v,T,R){if(!Hp(T))throw Error(t(200));return Gp(null,v,T,!0,R)},Of.hydrateRoot=function(v,T,R){if(!zp(v))throw Error(t(405));var F=R!=null&&R.hydratedSources||null,X=!1,Z="",ye=Xm;if(R!=null&&(R.unstable_strictMode===!0&&(X=!0),R.identifierPrefix!==void 0&&(Z=R.identifierPrefix),R.onRecoverableError!==void 0&&(ye=R.onRecoverableError)),T=Fd(T,null,v,1,R??null,X,!1,Z,ye),v[Ji]=T.current,tu(v),F)for(v=0;v<F.length;v++)R=F[v],X=R._getVersion,X=X(R._source),T.mutableSourceEagerHydrationData==null?T.mutableSourceEagerHydrationData=[R,X]:T.mutableSourceEagerHydrationData.push(R,X);return new Ym(T)},Of.render=function(v,T,R){if(!Hp(T))throw Error(t(200));return Gp(null,v,T,!1,R)},Of.unmountComponentAtNode=function(v){if(!Hp(v))throw Error(t(40));return v._reactRootContainer?(Ef(function(){Gp(null,null,v,!1,function(){v._reactRootContainer=null,v[Ji]=null})}),!0):!1},Of.unstable_batchedUpdates=c0,Of.unstable_renderSubtreeIntoContainer=function(v,T,R,F){if(!Hp(R))throw Error(t(200));if(v==null||v._reactInternals===void 0)throw Error(t(38));return Gp(v,T,R,!1,F)},Of.version="18.2.0-next-9e3b772b8-20220608",Of}(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=fEe()})(YX);var KX,A5=YX.exports;KX=A5.createRoot,A5.hydrateRoot;const H$=new $e,iF=new $e,mEe=new $e;function gEe(n,e,t){const i=H$.setFromMatrixPosition(n.matrixWorld);i.project(e);const s=t.width/2,o=t.height/2;return[i.x*s+s,-(i.y*o)+o]}function _Ee(n,e){const t=H$.setFromMatrixPosition(n.matrixWorld),i=iF.setFromMatrixPosition(e.matrixWorld),s=t.sub(i),o=e.getWorldDirection(mEe);return s.angleTo(o)>Math.PI/2}function vEe(n,e,t,i){const s=H$.setFromMatrixPosition(n.matrixWorld),o=s.clone();o.project(e),t.setFromCamera(o,e);const l=t.intersectObjects(i,!0);if(l.length){const u=l[0].distance;return s.distanceTo(t.ray.origin)<u}return!0}function yEe(n,e){if(e instanceof J0)return e.zoom;if(e instanceof Ja){const t=H$.setFromMatrixPosition(n.matrixWorld),i=iF.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,o=t.distanceTo(i);return 1/(2*Math.tan(s/2)*o)}else return 1}function bEe(n,e,t){if(e instanceof Ja||e instanceof J0){const i=H$.setFromMatrixPosition(n.matrixWorld),s=iF.setFromMatrixPosition(e.matrixWorld),o=i.distanceTo(s),l=(t[1]-t[0])/(e.far-e.near),u=t[1]-l*e.far;return Math.round(l*o+u)}}const hN=n=>Math.abs(n)<1e-10?0:n;function JX(n,e,t=""){let i="matrix3d(";for(let s=0;s!==16;s++)i+=hN(e[s]*n.elements[s])+(s!==15?",":")");return t+i}const TEe=(n=>e=>JX(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),SEe=(n=>(e,t)=>JX(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function EEe(n){return n&&typeof n=="object"&&"current"in n}const qX=me.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:s,center:o,fullscreen:l,portal:u,distanceFactor:d,sprite:p=!1,transform:_=!1,occlude:y,onOcclude:b,castShadow:E,receiveShadow:C,material:A,geometry:I,zIndexRange:L=[16777271,0],calculatePosition:O=gEe,as:P="div",wrapperClass:N,pointerEvents:z="auto",...W},H)=>{const{gl:U,camera:Q,scene:ne,size:oe,raycaster:le,events:ge,viewport:ce}=Jd(),[pe]=me.useState(()=>document.createElement(P)),Te=me.useRef(),Oe=me.useRef(null),J=me.useRef(0),se=me.useRef([0,0]),ie=me.useRef(null),he=me.useRef(null),Se=(u==null?void 0:u.current)||ge.connected||U.domElement.parentNode,Fe=me.useRef(null),ke=me.useRef(!1),qe=me.useMemo(()=>y&&y!=="blending"||Array.isArray(y)&&y.length&&EEe(y[0]),[y]);me.useLayoutEffect(()=>{const ct=U.domElement;y&&y==="blending"?(ct.style.zIndex=`${Math.floor(L[0]/2)}`,ct.style.position="absolute",ct.style.pointerEvents="none"):(ct.style.zIndex=null,ct.style.position=null,ct.style.pointerEvents=null)},[y]),me.useLayoutEffect(()=>{if(Oe.current){const ct=Te.current=KX(pe);if(ne.updateMatrixWorld(),_)pe.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Pe=O(Oe.current,Q,oe);pe.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Pe[0]}px,${Pe[1]}px,0);transform-origin:0 0;`}return Se&&(s?Se.prepend(pe):Se.appendChild(pe)),()=>{Se&&Se.removeChild(pe),ct.unmount()}}},[Se,_]),me.useLayoutEffect(()=>{N&&(pe.className=N)},[N]);const De=me.useMemo(()=>_?{position:"absolute",top:0,left:0,width:oe.width,height:oe.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...l&&{top:-oe.height/2,left:-oe.width/2,width:oe.width,height:oe.height},...t},[t,o,l,oe,_]),rt=me.useMemo(()=>({position:"absolute",pointerEvents:z}),[z]);me.useLayoutEffect(()=>{if(ke.current=!1,_){var ct;(ct=Te.current)==null||ct.render(on("div",{ref:ie,style:De,children:on("div",{ref:he,style:rt,children:on("div",{ref:H,className:i,style:t,children:n})})}))}else{var Pe;(Pe=Te.current)==null||Pe.render(on("div",{ref:H,style:De,className:i,children:n}))}});const tt=me.useRef(!0);Fm(ct=>{if(Oe.current){Q.updateMatrixWorld(),Oe.current.updateWorldMatrix(!0,!1);const Pe=_?se.current:O(Oe.current,Q,oe);if(_||Math.abs(J.current-Q.zoom)>e||Math.abs(se.current[0]-Pe[0])>e||Math.abs(se.current[1]-Pe[1])>e){const Ce=_Ee(Oe.current,Q);let je=!1;qe&&(y!=="blending"?je=[ne]:Array.isArray(y)&&(je=y.map(It=>It.current)));const it=tt.current;if(je){const It=vEe(Oe.current,Q,le,je);tt.current=It&&!Ce}else tt.current=!Ce;it!==tt.current&&(b?b(!tt.current):pe.style.display=tt.current?"block":"none");const ot=Math.floor(L[0]/2),vt=y?qe?[L[0],ot]:[ot-1,0]:L;if(pe.style.zIndex=`${bEe(Oe.current,Q,vt)}`,_){const[It,yt]=[oe.width/2,oe.height/2],kt=Q.projectionMatrix.elements[5]*yt,{isOrthographicCamera:$t,top:mt,left:xe,bottom:re,right:Be}=Q,dt=TEe(Q.matrixWorldInverse),bt=$t?`scale(${kt})translate(${hN(-(Be+xe)/2)}px,${hN((mt+re)/2)}px)`:`translateZ(${kt}px)`;let Mt=Oe.current.matrixWorld;p&&(Mt=Q.matrixWorldInverse.clone().transpose().copyPosition(Mt).scale(Oe.current.scale),Mt.elements[3]=Mt.elements[7]=Mt.elements[11]=0,Mt.elements[15]=1),pe.style.width=oe.width+"px",pe.style.height=oe.height+"px",pe.style.perspective=$t?"":`${kt}px`,ie.current&&he.current&&(ie.current.style.transform=`${bt}${dt}translate(${It}px,${yt}px)`,he.current.style.transform=SEe(Mt,1/((d||10)/400)))}else{const It=d===void 0?1:yEe(Oe.current,Q)*d;pe.style.transform=`translate3d(${Pe[0]}px,${Pe[1]}px,0) scale(${It})`}se.current=Pe,J.current=Q.zoom}}if(!qe&&Fe.current&&!ke.current)if(_){if(ie.current){const Pe=ie.current.children[0];if(Pe!=null&&Pe.clientWidth&&Pe!=null&&Pe.clientHeight){const{isOrthographicCamera:Ce}=Q;if(Ce||I)W.scale&&(Array.isArray(W.scale)?W.scale instanceof $e?Fe.current.scale.copy(W.scale.clone().divideScalar(1)):Fe.current.scale.set(1/W.scale[0],1/W.scale[1],1/W.scale[2]):Fe.current.scale.setScalar(1/W.scale));else{const je=(d||10)/400,it=Pe.clientWidth*je,ot=Pe.clientHeight*je;Fe.current.scale.set(it,ot,1)}ke.current=!0}}}else{const Pe=pe.children[0];if(Pe!=null&&Pe.clientWidth&&Pe!=null&&Pe.clientHeight){const Ce=1/ce.factor,je=Pe.clientWidth*Ce,it=Pe.clientHeight*Ce;Fe.current.scale.set(je,it,1),ke.current=!0}Fe.current.lookAt(ct.camera.position)}});const ft=me.useMemo(()=>({vertexShader:_?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[_]);return on("group",{...W,ref:Oe,children:y&&!qe&&kh("mesh",{castShadow:E,receiveShadow:C,ref:Fe,children:[I||on("planeGeometry",{}),A||on("shaderMaterial",{side:tf,vertexShader:ft.vertexShader,fragmentShader:ft.fragmentShader})]})})});function sF(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}const bM=0,xEe=1,wEe=new $e,M5=new tF,DO=new V_,I5=new $e,kA=new Sm;class R5{constructor(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new k5,this.unassigned=new k5,this.vertices=[]}setFromPoints(e){if(e.length>=4){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.vertices.push(new $Ee(e[t]));this.compute()}return this}setFromObject(e){const t=[];return e.updateMatrixWorld(!0),e.traverse(function(i){const s=i.geometry;if(s!==void 0){if(s.isGeometry){console.error("THREE.ConvexHull no longer supports Geometry. Use THREE.BufferGeometry instead.");return}else if(s.isBufferGeometry){const o=s.attributes.position;if(o!==void 0)for(let l=0,u=o.count;l<u;l++){const d=new $e;d.fromBufferAttribute(o,l).applyMatrix4(i.matrixWorld),t.push(d)}}}}),this.setFromPoints(t)}containsPoint(e){const t=this.faces;for(let i=0,s=t.length;i<s;i++)if(t[i].distanceToPoint(e)>this.tolerance)return!1;return!0}intersectRay(e,t){const i=this.faces;let s=-1/0,o=1/0;for(let l=0,u=i.length;l<u;l++){const d=i[l],p=d.distanceToPoint(e.origin),_=d.normal.dot(e.direction);if(p>0&&_>=0)return null;const y=_!==0?-p/_:0;if(!(y<=0)&&(_>0?o=Math.min(y,o):s=Math.max(y,s),s>o))return null}return s!==-1/0?e.at(s,t):e.at(o,t),t}intersectsRay(e){return this.intersectRay(e,wEe)!==null}makeEmpty(){return this.faces=[],this.vertices=[],this}addVertexToFace(e,t){return e.face=t,t.outside===null?this.assigned.append(e):this.assigned.insertBefore(t.outside,e),t.outside=e,this}removeVertexFromFace(e,t){return e===t.outside&&(e.next!==null&&e.next.face===t?t.outside=e.next:t.outside=null),this.assigned.remove(e),this}removeAllVerticesFromFace(e){if(e.outside!==null){const t=e.outside;let i=e.outside;for(;i.next!==null&&i.next.face===e;)i=i.next;return this.assigned.removeSubList(t,i),t.prev=i.next=null,e.outside=null,t}}deleteFaceVertices(e,t){const i=this.removeAllVerticesFromFace(e);if(i!==void 0)if(t===void 0)this.unassigned.appendChain(i);else{let s=i;do{const o=s.next;t.distanceToPoint(s.point)>this.tolerance?this.addVertexToFace(s,t):this.unassigned.append(s),s=o}while(s!==null)}return this}resolveUnassignedPoints(e){if(this.unassigned.isEmpty()===!1){let t=this.unassigned.first();do{const i=t.next;let s=this.tolerance,o=null;for(let l=0;l<e.length;l++){const u=e[l];if(u.mark===bM){const d=u.distanceToPoint(t.point);if(d>s&&(s=d,o=u),s>1e3*this.tolerance)break}}o!==null&&this.addVertexToFace(t,o),t=i}while(t!==null)}return this}computeExtremes(){const e=new $e,t=new $e,i=[],s=[];for(let o=0;o<3;o++)i[o]=s[o]=this.vertices[0];e.copy(this.vertices[0].point),t.copy(this.vertices[0].point);for(let o=0,l=this.vertices.length;o<l;o++){const u=this.vertices[o],d=u.point;for(let p=0;p<3;p++)d.getComponent(p)<e.getComponent(p)&&(e.setComponent(p,d.getComponent(p)),i[p]=u);for(let p=0;p<3;p++)d.getComponent(p)>t.getComponent(p)&&(t.setComponent(p,d.getComponent(p)),s[p]=u)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(e.x),Math.abs(t.x))+Math.max(Math.abs(e.y),Math.abs(t.y))+Math.max(Math.abs(e.z),Math.abs(t.z))),{min:i,max:s}}computeInitialHull(){const e=this.vertices,t=this.computeExtremes(),i=t.min,s=t.max;let o=0,l=0;for(let b=0;b<3;b++){const E=s[b].point.getComponent(b)-i[b].point.getComponent(b);E>o&&(o=E,l=b)}const u=i[l],d=s[l];let p,_;o=0,M5.set(u.point,d.point);for(let b=0,E=this.vertices.length;b<E;b++){const C=e[b];if(C!==u&&C!==d){M5.closestPointToPoint(C.point,!0,I5);const A=I5.distanceToSquared(C.point);A>o&&(o=A,p=C)}}o=-1,DO.setFromCoplanarPoints(u.point,d.point,p.point);for(let b=0,E=this.vertices.length;b<E;b++){const C=e[b];if(C!==u&&C!==d&&C!==p){const A=Math.abs(DO.distanceToPoint(C.point));A>o&&(o=A,_=C)}}const y=[];if(DO.distanceToPoint(_.point)<0){y.push(zg.create(u,d,p),zg.create(_,d,u),zg.create(_,p,d),zg.create(_,u,p));for(let b=0;b<3;b++){const E=(b+1)%3;y[b+1].getEdge(2).setTwin(y[0].getEdge(E)),y[b+1].getEdge(1).setTwin(y[E+1].getEdge(0))}}else{y.push(zg.create(u,p,d),zg.create(_,u,d),zg.create(_,d,p),zg.create(_,p,u));for(let b=0;b<3;b++){const E=(b+1)%3;y[b+1].getEdge(2).setTwin(y[0].getEdge((3-b)%3)),y[b+1].getEdge(0).setTwin(y[E+1].getEdge(1))}}for(let b=0;b<4;b++)this.faces.push(y[b]);for(let b=0,E=e.length;b<E;b++){const C=e[b];if(C!==u&&C!==d&&C!==p&&C!==_){o=this.tolerance;let A=null;for(let I=0;I<4;I++){const L=this.faces[I].distanceToPoint(C.point);L>o&&(o=L,A=this.faces[I])}A!==null&&this.addVertexToFace(C,A)}}return this}reindexFaces(){const e=[];for(let t=0;t<this.faces.length;t++){const i=this.faces[t];i.mark===bM&&e.push(i)}return this.faces=e,this}nextVertexToAdd(){if(this.assigned.isEmpty()===!1){let e,t=0;const i=this.assigned.first().face;let s=i.outside;do{const o=i.distanceToPoint(s.point);o>t&&(t=o,e=s),s=s.next}while(s!==null&&s.face===i);return e}}computeHorizon(e,t,i,s){this.deleteFaceVertices(i),i.mark=xEe;let o;t===null?o=t=i.getEdge(0):o=t.next;do{const l=o.twin,u=l.face;u.mark===bM&&(u.distanceToPoint(e)>this.tolerance?this.computeHorizon(e,l,u,s):s.push(o)),o=o.next}while(o!==t);return this}addAdjoiningFace(e,t){const i=zg.create(e,t.tail(),t.head());return this.faces.push(i),i.getEdge(-1).setTwin(t.twin),i.getEdge(0)}addNewFaces(e,t){this.newFaces=[];let i=null,s=null;for(let o=0;o<t.length;o++){const l=t[o],u=this.addAdjoiningFace(e,l);i===null?i=u:u.next.setTwin(s),this.newFaces.push(u.face),s=u}return i.next.setTwin(s),this}addVertexToHull(e){const t=[];return this.unassigned.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,t),this.addNewFaces(e,t),this.resolveUnassignedPoints(this.newFaces),this}cleanup(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}compute(){let e;for(this.computeInitialHull();(e=this.nextVertexToAdd())!==void 0;)this.addVertexToHull(e);return this.reindexFaces(),this.cleanup(),this}}class zg{constructor(){this.normal=new $e,this.midpoint=new $e,this.area=0,this.constant=0,this.outside=null,this.mark=bM,this.edge=null}static create(e,t,i){const s=new zg,o=new NO(e,s),l=new NO(t,s),u=new NO(i,s);return o.next=u.prev=l,l.next=o.prev=u,u.next=l.prev=o,s.edge=o,s.compute()}getEdge(e){let t=this.edge;for(;e>0;)t=t.next,e--;for(;e<0;)t=t.prev,e++;return t}compute(){const e=this.edge.tail(),t=this.edge.head(),i=this.edge.next.head();return kA.set(e.point,t.point,i.point),kA.getNormal(this.normal),kA.getMidpoint(this.midpoint),this.area=kA.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(e){return this.normal.dot(e)-this.constant}}class NO{constructor(e,t){this.vertex=e,this.prev=null,this.next=null,this.twin=null,this.face=t}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const e=this.head(),t=this.tail();return t!==null?t.point.distanceTo(e.point):-1}lengthSquared(){const e=this.head(),t=this.tail();return t!==null?t.point.distanceToSquared(e.point):-1}setTwin(e){return this.twin=e,e.twin=this,this}}class $Ee{constructor(e){this.point=e,this.prev=null,this.next=null,this.face=null}}class k5{constructor(){this.head=null,this.tail=null}first(){return this.head}last(){return this.tail}clear(){return this.head=this.tail=null,this}insertBefore(e,t){return t.prev=e.prev,t.next=e,t.prev===null?this.head=t:t.prev.next=t,e.prev=t,this}insertAfter(e,t){return t.prev=e,t.next=e.next,t.next===null?this.tail=t:t.next.prev=t,e.next=t,this}append(e){return this.head===null?this.head=e:this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e,this}appendChain(e){for(this.head===null?this.head=e:this.tail.next=e,e.prev=this.tail;e.next!==null;)e=e.next;return this.tail=e,this}remove(e){return e.prev===null?this.head=e.next:e.prev.next=e.next,e.next===null?this.tail=e.prev:e.next.prev=e.prev,this}removeSubList(e,t){return e.prev===null?this.head=t.next:e.prev.next=t.next,t.next===null?this.tail=e.prev:t.next.prev=e.prev,this}isEmpty(){return this.head===null}}class O5 extends oi{constructor(e=[]){super();const t=[],i=[];R5===void 0&&console.error("THREE.ConvexGeometry: ConvexGeometry relies on ConvexHull");const s=new R5().setFromPoints(e).faces;for(let o=0;o<s.length;o++){const l=s[o];let u=l.edge;do{const d=u.head().point;t.push(d.x,d.y,d.z),i.push(l.normal.x,l.normal.y,l.normal.z),u=u.next}while(u!==l.edge)}this.setAttribute("position",new rr(t,3)),this.setAttribute("normal",new rr(i,3))}}function Oi(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const QX=(n,e)=>{const t=n[0].index!==null,i=new Set(Object.keys(n[0].attributes)),s=new Set(Object.keys(n[0].morphAttributes)),o={},l={},u=n[0].morphTargetsRelative,d=new oi;let p=0;if(n.forEach((_,y)=>{let b=0;if(t!==(_.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let E in _.attributes){if(!i.has(E))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+'. All geometries must have compatible attributes; make sure "'+E+'" attribute exists among all geometries, or in none of them.'),null;o[E]===void 0&&(o[E]=[]),o[E].push(_.attributes[E]),b++}if(b!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+". Make sure all geometries have the same number of attributes."),null;if(u!==_.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let E in _.morphAttributes){if(!s.has(E))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+".  .morphAttributes must be consistent throughout all geometries."),null;l[E]===void 0&&(l[E]=[]),l[E].push(_.morphAttributes[E])}if(d.userData.mergedUserData=d.userData.mergedUserData||[],d.userData.mergedUserData.push(_.userData),e){let E;if(_.index)E=_.index.count;else if(_.attributes.position!==void 0)E=_.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+". The geometry must have either an index or a position attribute"),null;d.addGroup(p,E,y),p+=E}}),t){let _=0;const y=[];n.forEach(b=>{const E=b.index;for(let C=0;C<E.count;++C)y.push(E.getX(C)+_);_+=b.attributes.position.count}),d.setIndex(y)}for(let _ in o){const y=L5(o[_]);if(!y)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+_+" attribute."),null;d.setAttribute(_,y)}for(let _ in l){const y=l[_][0].length;if(y===0)break;d.morphAttributes=d.morphAttributes||{},d.morphAttributes[_]=[];for(let b=0;b<y;++b){const E=[];for(let A=0;A<l[_].length;++A)E.push(l[_][A][b]);const C=L5(E);if(!C)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+_+" morphAttribute."),null;d.morphAttributes[_].push(C)}}return d},L5=n=>{let e,t,i,s=0;if(n.forEach(o=>{if(e===void 0&&(e=o.array.constructor),e!==o.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=o.itemSize),t!==o.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=o.normalized),i!==o.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;s+=o.array.length}),e&&t){const o=new e(s);let l=0;return n.forEach(u=>{o.set(u.array,l),l+=u.array.length}),new Bo(o,t,i)}},D5=(n,e)=>(n%e+e)%e;class CEe extends Bm{constructor(e,t){super(),Oi(this,"object",void 0),Oi(this,"domElement",void 0),Oi(this,"enabled",!0),Oi(this,"target",new $e),Oi(this,"minDistance",0),Oi(this,"maxDistance",1/0),Oi(this,"minZoom",0),Oi(this,"maxZoom",1/0),Oi(this,"minPolarAngle",0),Oi(this,"maxPolarAngle",Math.PI),Oi(this,"minAzimuthAngle",-1/0),Oi(this,"maxAzimuthAngle",1/0),Oi(this,"enableDamping",!1),Oi(this,"dampingFactor",.05),Oi(this,"enableZoom",!0),Oi(this,"zoomSpeed",1),Oi(this,"enableRotate",!0),Oi(this,"rotateSpeed",1),Oi(this,"enablePan",!0),Oi(this,"panSpeed",1),Oi(this,"screenSpacePanning",!0),Oi(this,"keyPanSpeed",7),Oi(this,"autoRotate",!1),Oi(this,"autoRotateSpeed",2),Oi(this,"reverseOrbit",!1),Oi(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Oi(this,"mouseButtons",{LEFT:Fb.ROTATE,MIDDLE:Fb.DOLLY,RIGHT:Fb.PAN}),Oi(this,"touches",{ONE:Ub.ROTATE,TWO:Ub.DOLLY_PAN}),Oi(this,"target0",void 0),Oi(this,"position0",void 0),Oi(this,"zoom0",void 0),Oi(this,"_domElementKeyEvents",null),Oi(this,"getPolarAngle",void 0),Oi(this,"getAzimuthalAngle",void 0),Oi(this,"setPolarAngle",void 0),Oi(this,"setAzimuthalAngle",void 0),Oi(this,"getDistance",void 0),Oi(this,"listenToKeyEvents",void 0),Oi(this,"saveState",void 0),Oi(this,"reset",void 0),Oi(this,"update",void 0),Oi(this,"connect",void 0),Oi(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof Ja?this.object.zoom:1,this.getPolarAngle=()=>_.phi,this.getAzimuthalAngle=()=>_.theta,this.setPolarAngle=ee=>{let de=D5(ee,2*Math.PI),Ae=_.phi;Ae<0&&(Ae+=2*Math.PI),de<0&&(de+=2*Math.PI);let Je=Math.abs(de-Ae);2*Math.PI-Je<Je&&(de<Ae?de+=2*Math.PI:Ae+=2*Math.PI),y.phi=de-Ae,i.update()},this.setAzimuthalAngle=ee=>{let de=D5(ee,2*Math.PI),Ae=_.theta;Ae<0&&(Ae+=2*Math.PI),de<0&&(de+=2*Math.PI);let Je=Math.abs(de-Ae);2*Math.PI-Je<Je&&(de<Ae?de+=2*Math.PI:Ae+=2*Math.PI),y.theta=de-Ae,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=ee=>{ee.addEventListener("keydown",Be),this._domElementKeyEvents=ee},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object instanceof Ja?i.object.zoom:1},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object instanceof Ja&&(i.object.zoom=i.zoom0,i.object.updateProjectionMatrix()),i.dispatchEvent(s),i.update(),d=u.NONE},this.update=(()=>{const ee=new $e,de=new bl().setFromUnitVectors(e.up,new $e(0,1,0)),Ae=de.clone().invert(),Je=new $e,jt=new bl,ze=2*Math.PI;return function(){const Yt=i.object.position;ee.copy(Yt).sub(i.target),ee.applyQuaternion(de),_.setFromVector3(ee),i.autoRotate&&d===u.NONE&&le(ne()),i.enableDamping?(_.theta+=y.theta*i.dampingFactor,_.phi+=y.phi*i.dampingFactor):(_.theta+=y.theta,_.phi+=y.phi);let _t=i.minAzimuthAngle,Kt=i.maxAzimuthAngle;return isFinite(_t)&&isFinite(Kt)&&(_t<-Math.PI?_t+=ze:_t>Math.PI&&(_t-=ze),Kt<-Math.PI?Kt+=ze:Kt>Math.PI&&(Kt-=ze),_t<=Kt?_.theta=Math.max(_t,Math.min(Kt,_.theta)):_.theta=_.theta>(_t+Kt)/2?Math.max(_t,_.theta):Math.min(Kt,_.theta)),_.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,_.phi)),_.makeSafe(),_.radius*=b,_.radius=Math.max(i.minDistance,Math.min(i.maxDistance,_.radius)),i.enableDamping===!0?i.target.addScaledVector(E,i.dampingFactor):i.target.add(E),ee.setFromSpherical(_),ee.applyQuaternion(Ae),Yt.copy(i.target).add(ee),i.object.lookAt(i.target),i.enableDamping===!0?(y.theta*=1-i.dampingFactor,y.phi*=1-i.dampingFactor,E.multiplyScalar(1-i.dampingFactor)):(y.set(0,0,0),E.set(0,0,0)),b=1,C||Je.distanceToSquared(i.object.position)>p||8*(1-jt.dot(i.object.quaternion))>p?(i.dispatchEvent(s),Je.copy(i.object.position),jt.copy(i.object.quaternion),C=!1,!0):!1}})(),this.connect=ee=>{ee===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=ee,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Mt),i.domElement.addEventListener("pointerdown",It),i.domElement.addEventListener("pointercancel",$t),i.domElement.addEventListener("wheel",re)},this.dispose=()=>{var ee,de,Ae,Je,jt,ze;(ee=i.domElement)===null||ee===void 0||ee.removeEventListener("contextmenu",Mt),(de=i.domElement)===null||de===void 0||de.removeEventListener("pointerdown",It),(Ae=i.domElement)===null||Ae===void 0||Ae.removeEventListener("pointercancel",$t),(Je=i.domElement)===null||Je===void 0||Je.removeEventListener("wheel",re),(jt=i.domElement)===null||jt===void 0||jt.ownerDocument.removeEventListener("pointermove",yt),(ze=i.domElement)===null||ze===void 0||ze.ownerDocument.removeEventListener("pointerup",kt),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Be)};const i=this,s={type:"change"},o={type:"start"},l={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=u.NONE;const p=1e-6,_=new oN,y=new oN;let b=1;const E=new $e;let C=!1;const A=new Ht,I=new Ht,L=new Ht,O=new Ht,P=new Ht,N=new Ht,z=new Ht,W=new Ht,H=new Ht,U=[],Q={};function ne(){return 2*Math.PI/60/60*i.autoRotateSpeed}function oe(){return Math.pow(.95,i.zoomSpeed)}function le(ee){i.reverseOrbit?y.theta+=ee:y.theta-=ee}function ge(ee){i.reverseOrbit?y.phi+=ee:y.phi-=ee}const ce=(()=>{const ee=new $e;return function(de,Ae){ee.setFromMatrixColumn(Ae,0),ee.multiplyScalar(-de),E.add(ee)}})(),pe=(()=>{const ee=new $e;return function(de,Ae){i.screenSpacePanning===!0?ee.setFromMatrixColumn(Ae,1):(ee.setFromMatrixColumn(Ae,0),ee.crossVectors(i.object.up,ee)),ee.multiplyScalar(de),E.add(ee)}})(),Te=(()=>{const ee=new $e;return function(de,Ae){const Je=i.domElement;if(Je&&i.object instanceof Ja&&i.object.isPerspectiveCamera){const jt=i.object.position;ee.copy(jt).sub(i.target);let ze=ee.length();ze*=Math.tan(i.object.fov/2*Math.PI/180),ce(2*de*ze/Je.clientHeight,i.object.matrix),pe(2*Ae*ze/Je.clientHeight,i.object.matrix)}else Je&&i.object instanceof J0&&i.object.isOrthographicCamera?(ce(de*(i.object.right-i.object.left)/i.object.zoom/Je.clientWidth,i.object.matrix),pe(Ae*(i.object.top-i.object.bottom)/i.object.zoom/Je.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function Oe(ee){i.object instanceof Ja&&i.object.isPerspectiveCamera?b/=ee:i.object instanceof J0&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*ee)),i.object.updateProjectionMatrix(),C=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function J(ee){i.object instanceof Ja&&i.object.isPerspectiveCamera?b*=ee:i.object instanceof J0&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/ee)),i.object.updateProjectionMatrix(),C=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function se(ee){A.set(ee.clientX,ee.clientY)}function ie(ee){z.set(ee.clientX,ee.clientY)}function he(ee){O.set(ee.clientX,ee.clientY)}function Se(ee){I.set(ee.clientX,ee.clientY),L.subVectors(I,A).multiplyScalar(i.rotateSpeed);const de=i.domElement;de&&(le(2*Math.PI*L.x/de.clientHeight),ge(2*Math.PI*L.y/de.clientHeight)),A.copy(I),i.update()}function Fe(ee){W.set(ee.clientX,ee.clientY),H.subVectors(W,z),H.y>0?Oe(oe()):H.y<0&&J(oe()),z.copy(W),i.update()}function ke(ee){P.set(ee.clientX,ee.clientY),N.subVectors(P,O).multiplyScalar(i.panSpeed),Te(N.x,N.y),O.copy(P),i.update()}function qe(ee){ee.deltaY<0?J(oe()):ee.deltaY>0&&Oe(oe()),i.update()}function De(ee){let de=!1;switch(ee.code){case i.keys.UP:Te(0,i.keyPanSpeed),de=!0;break;case i.keys.BOTTOM:Te(0,-i.keyPanSpeed),de=!0;break;case i.keys.LEFT:Te(i.keyPanSpeed,0),de=!0;break;case i.keys.RIGHT:Te(-i.keyPanSpeed,0),de=!0;break}de&&(ee.preventDefault(),i.update())}function rt(){if(U.length==1)A.set(U[0].pageX,U[0].pageY);else{const ee=.5*(U[0].pageX+U[1].pageX),de=.5*(U[0].pageY+U[1].pageY);A.set(ee,de)}}function tt(){if(U.length==1)O.set(U[0].pageX,U[0].pageY);else{const ee=.5*(U[0].pageX+U[1].pageX),de=.5*(U[0].pageY+U[1].pageY);O.set(ee,de)}}function ft(){const ee=U[0].pageX-U[1].pageX,de=U[0].pageY-U[1].pageY,Ae=Math.sqrt(ee*ee+de*de);z.set(0,Ae)}function ct(){i.enableZoom&&ft(),i.enablePan&&tt()}function Pe(){i.enableZoom&&ft(),i.enableRotate&&rt()}function Ce(ee){if(U.length==1)I.set(ee.pageX,ee.pageY);else{const Ae=q(ee),Je=.5*(ee.pageX+Ae.x),jt=.5*(ee.pageY+Ae.y);I.set(Je,jt)}L.subVectors(I,A).multiplyScalar(i.rotateSpeed);const de=i.domElement;de&&(le(2*Math.PI*L.x/de.clientHeight),ge(2*Math.PI*L.y/de.clientHeight)),A.copy(I)}function je(ee){if(U.length==1)P.set(ee.pageX,ee.pageY);else{const de=q(ee),Ae=.5*(ee.pageX+de.x),Je=.5*(ee.pageY+de.y);P.set(Ae,Je)}N.subVectors(P,O).multiplyScalar(i.panSpeed),Te(N.x,N.y),O.copy(P)}function it(ee){const de=q(ee),Ae=ee.pageX-de.x,Je=ee.pageY-de.y,jt=Math.sqrt(Ae*Ae+Je*Je);W.set(0,jt),H.set(0,Math.pow(W.y/z.y,i.zoomSpeed)),Oe(H.y),z.copy(W)}function ot(ee){i.enableZoom&&it(ee),i.enablePan&&je(ee)}function vt(ee){i.enableZoom&&it(ee),i.enableRotate&&Ce(ee)}function It(ee){if(i.enabled!==!1){if(U.length===0){var de,Ae;(de=i.domElement)===null||de===void 0||de.ownerDocument.addEventListener("pointermove",yt),(Ae=i.domElement)===null||Ae===void 0||Ae.ownerDocument.addEventListener("pointerup",kt)}pt(ee),ee.pointerType==="touch"?dt(ee):mt(ee)}}function yt(ee){i.enabled!==!1&&(ee.pointerType==="touch"?bt(ee):xe(ee))}function kt(ee){if(Ke(ee),U.length===0){var de,Ae,Je;(de=i.domElement)===null||de===void 0||de.releasePointerCapture(ee.pointerId),(Ae=i.domElement)===null||Ae===void 0||Ae.ownerDocument.removeEventListener("pointermove",yt),(Je=i.domElement)===null||Je===void 0||Je.ownerDocument.removeEventListener("pointerup",kt)}i.dispatchEvent(l),d=u.NONE}function $t(ee){Ke(ee)}function mt(ee){let de;switch(ee.button){case 0:de=i.mouseButtons.LEFT;break;case 1:de=i.mouseButtons.MIDDLE;break;case 2:de=i.mouseButtons.RIGHT;break;default:de=-1}switch(de){case Fb.DOLLY:if(i.enableZoom===!1)return;ie(ee),d=u.DOLLY;break;case Fb.ROTATE:if(ee.ctrlKey||ee.metaKey||ee.shiftKey){if(i.enablePan===!1)return;he(ee),d=u.PAN}else{if(i.enableRotate===!1)return;se(ee),d=u.ROTATE}break;case Fb.PAN:if(ee.ctrlKey||ee.metaKey||ee.shiftKey){if(i.enableRotate===!1)return;se(ee),d=u.ROTATE}else{if(i.enablePan===!1)return;he(ee),d=u.PAN}break;default:d=u.NONE}d!==u.NONE&&i.dispatchEvent(o)}function xe(ee){if(i.enabled!==!1)switch(d){case u.ROTATE:if(i.enableRotate===!1)return;Se(ee);break;case u.DOLLY:if(i.enableZoom===!1)return;Fe(ee);break;case u.PAN:if(i.enablePan===!1)return;ke(ee);break}}function re(ee){i.enabled===!1||i.enableZoom===!1||d!==u.NONE&&d!==u.ROTATE||(ee.preventDefault(),i.dispatchEvent(o),qe(ee),i.dispatchEvent(l))}function Be(ee){i.enabled===!1||i.enablePan===!1||De(ee)}function dt(ee){switch(Ie(ee),U.length){case 1:switch(i.touches.ONE){case Ub.ROTATE:if(i.enableRotate===!1)return;rt(),d=u.TOUCH_ROTATE;break;case Ub.PAN:if(i.enablePan===!1)return;tt(),d=u.TOUCH_PAN;break;default:d=u.NONE}break;case 2:switch(i.touches.TWO){case Ub.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ct(),d=u.TOUCH_DOLLY_PAN;break;case Ub.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Pe(),d=u.TOUCH_DOLLY_ROTATE;break;default:d=u.NONE}break;default:d=u.NONE}d!==u.NONE&&i.dispatchEvent(o)}function bt(ee){switch(Ie(ee),d){case u.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ce(ee),i.update();break;case u.TOUCH_PAN:if(i.enablePan===!1)return;je(ee),i.update();break;case u.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ot(ee),i.update();break;case u.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;vt(ee),i.update();break;default:d=u.NONE}}function Mt(ee){i.enabled!==!1&&ee.preventDefault()}function pt(ee){U.push(ee)}function Ke(ee){delete Q[ee.pointerId];for(let de=0;de<U.length;de++)if(U[de].pointerId==ee.pointerId){U.splice(de,1);return}}function Ie(ee){let de=Q[ee.pointerId];de===void 0&&(de=new Ht,Q[ee.pointerId]=de),de.set(ee.pageX,ee.pageY)}function q(ee){const de=ee.pointerId===U[0].pointerId?U[1]:U[0];return Q[de.pointerId]}t!==void 0&&this.connect(t),this.update()}}const Bx=new $e;function Zm(n,e,t,i,s,o){const l=2*Math.PI*s/4,u=Math.max(o-2*s,0),d=Math.PI/4;Bx.copy(e),Bx[i]=0,Bx.normalize();const p=.5*l/(l+u),_=1-Bx.angleTo(n)/d;return Math.sign(Bx[t])===1?_*p:u/(l+u)+p+p*(1-_)}class AEe extends pu{constructor(e=1,t=1,i=1,s=2,o=.1){if(s=s*2+1,o=Math.min(e/2,t/2,i/2,o),super(1,1,1,s,s,s),s===1)return;const l=this.toNonIndexed();this.index=null,this.attributes.position=l.attributes.position,this.attributes.normal=l.attributes.normal,this.attributes.uv=l.attributes.uv;const u=new $e,d=new $e,p=new $e(e,t,i).divideScalar(2).subScalar(o),_=this.attributes.position.array,y=this.attributes.normal.array,b=this.attributes.uv.array,E=_.length/6,C=new $e,A=.5/s;for(let I=0,L=0;I<_.length;I+=3,L+=2)switch(u.fromArray(_,I),d.copy(u),d.x-=Math.sign(d.x)*A,d.y-=Math.sign(d.y)*A,d.z-=Math.sign(d.z)*A,d.normalize(),_[I+0]=p.x*Math.sign(u.x)+d.x*o,_[I+1]=p.y*Math.sign(u.y)+d.y*o,_[I+2]=p.z*Math.sign(u.z)+d.z*o,y[I+0]=d.x,y[I+1]=d.y,y[I+2]=d.z,Math.floor(I/E)){case 0:C.set(1,0,0),b[L+0]=Zm(C,d,"z","y",o,i),b[L+1]=1-Zm(C,d,"y","z",o,t);break;case 1:C.set(-1,0,0),b[L+0]=1-Zm(C,d,"z","y",o,i),b[L+1]=1-Zm(C,d,"y","z",o,t);break;case 2:C.set(0,1,0),b[L+0]=1-Zm(C,d,"x","z",o,e),b[L+1]=Zm(C,d,"z","x",o,i);break;case 3:C.set(0,-1,0),b[L+0]=1-Zm(C,d,"x","z",o,e),b[L+1]=1-Zm(C,d,"z","x",o,i);break;case 4:C.set(0,0,1),b[L+0]=1-Zm(C,d,"x","y",o,e),b[L+1]=1-Zm(C,d,"y","x",o,t);break;case 5:C.set(0,0,-1),b[L+0]=Zm(C,d,"x","y",o,e),b[L+1]=1-Zm(C,d,"y","x",o,t);break}}}const N5=new n0,OA=new $e;class oF extends ik{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new rr(e,3)),this.setAttribute("uv",new rr(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new _I(t,6,1);return this.setAttribute("instanceStart",new xm(i,3,0)),this.setAttribute("instanceEnd",new xm(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new _I(t,6,1);return this.setAttribute("instanceColorStart",new xm(i,3,0)),this.setAttribute("instanceColorEnd",new xm(i,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new HP(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new n0);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),N5.setFromBufferAttribute(t),this.boundingBox.union(N5))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new s_),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let s=0;for(let o=0,l=e.count;o<l;o++)OA.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(OA)),OA.fromBufferAttribute(t,o),s=Math.max(s,i.distanceToSquared(OA));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class ZX extends oF{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let s=0;s<t;s+=3)i[2*s]=e[s],i[2*s+1]=e[s+1],i[2*s+2]=e[s+2],i[2*s+3]=e[s+3],i[2*s+4]=e[s+4],i[2*s+5]=e[s+5];return super.setPositions(i),this}setColors(e){const t=e.length-3,i=new Float32Array(2*t);for(let s=0;s<t;s+=3)i[2*s]=e[s],i[2*s+1]=e[s+1],i[2*s+2]=e[s+2],i[2*s+3]=e[s+3],i[2*s+4]=e[s+4],i[2*s+5]=e[s+5];return super.setColors(i),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}Wn.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ht(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};Zp.line={uniforms:N$.merge([Wn.common,Wn.fog,Wn.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class aF extends yd{constructor(e){super({type:"LineMaterial",uniforms:N$.clone(Zp.line.uniforms),vertexShader:Zp.line.vertexShader,fragmentShader:Zp.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const B5=new $e,P5=new $e,jd=new ys,Xd=new ys,N0=new ys,BO=new $e,PO=new Qr,Ep=new tF,F5=new $e,LA=new n0,DA=new s_,B0=new ys;let V0,dN,eY,g1;function U5(n,e,t){return B0.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),B0.multiplyScalar(1/B0.w),B0.x=g1/t.width,B0.y=g1/t.height,B0.applyMatrix4(n.projectionMatrixInverse),B0.multiplyScalar(1/B0.w),Math.abs(Math.max(B0.x,B0.y))}function MEe(n,e){for(let t=0,i=dN.count;t<i;t++){Ep.start.fromBufferAttribute(dN,t),Ep.end.fromBufferAttribute(eY,t);const s=new $e,o=new $e;V0.distanceSqToSegment(Ep.start,Ep.end,o,s),o.distanceTo(s)<g1*.5&&e.push({point:o,pointOnLine:s,distance:V0.origin.distanceTo(o),object:n,face:null,faceIndex:t,uv:null,uv2:null})}}function IEe(n,e,t){const i=e.projectionMatrix,s=n.material.resolution,o=n.matrixWorld,l=n.geometry,u=l.attributes.instanceStart,d=l.attributes.instanceEnd,p=-e.near;V0.at(1,N0),N0.w=1,N0.applyMatrix4(e.matrixWorldInverse),N0.applyMatrix4(i),N0.multiplyScalar(1/N0.w),N0.x*=s.x/2,N0.y*=s.y/2,N0.z=0,BO.copy(N0),PO.multiplyMatrices(e.matrixWorldInverse,o);for(let _=0,y=u.count;_<y;_++){if(jd.fromBufferAttribute(u,_),Xd.fromBufferAttribute(d,_),jd.w=1,Xd.w=1,jd.applyMatrix4(PO),Xd.applyMatrix4(PO),jd.z>p&&Xd.z>p)continue;if(jd.z>p){const I=jd.z-Xd.z,L=(jd.z-p)/I;jd.lerp(Xd,L)}else if(Xd.z>p){const I=Xd.z-jd.z,L=(Xd.z-p)/I;Xd.lerp(jd,L)}jd.applyMatrix4(i),Xd.applyMatrix4(i),jd.multiplyScalar(1/jd.w),Xd.multiplyScalar(1/Xd.w),jd.x*=s.x/2,jd.y*=s.y/2,Xd.x*=s.x/2,Xd.y*=s.y/2,Ep.start.copy(jd),Ep.start.z=0,Ep.end.copy(Xd),Ep.end.z=0;const b=Ep.closestPointToPointParameter(BO,!0);Ep.at(b,F5);const E=Mj.lerp(jd.z,Xd.z,b),C=E>=-1&&E<=1,A=BO.distanceTo(F5)<g1*.5;if(C&&A){Ep.start.fromBufferAttribute(u,_),Ep.end.fromBufferAttribute(d,_),Ep.start.applyMatrix4(o),Ep.end.applyMatrix4(o);const I=new $e,L=new $e;V0.distanceSqToSegment(Ep.start,Ep.end,L,I),t.push({point:L,pointOnLine:I,distance:V0.origin.distanceTo(L),object:n,face:null,faceIndex:_,uv:null,uv2:null})}}}class tY extends Fn{constructor(e=new oF,t=new aF({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,s=new Float32Array(2*t.count);for(let l=0,u=0,d=t.count;l<d;l++,u+=2)B5.fromBufferAttribute(t,l),P5.fromBufferAttribute(i,l),s[u]=u===0?0:s[u-1],s[u+1]=s[u]+B5.distanceTo(P5);const o=new _I(s,2,1);return e.setAttribute("instanceDistanceStart",new xm(o,1,0)),e.setAttribute("instanceDistanceEnd",new xm(o,1,1)),this}raycast(e,t){const i=this.material.worldUnits,s=e.camera;s===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const o=e.params.Line2!==void 0&&e.params.Line2.threshold||0;V0=e.ray;const l=this.matrixWorld,u=this.geometry,d=this.material;g1=d.linewidth+o,dN=u.attributes.instanceStart,eY=u.attributes.instanceEnd,u.boundingSphere===null&&u.computeBoundingSphere(),DA.copy(u.boundingSphere).applyMatrix4(l);let p;if(i)p=g1*.5;else{const y=Math.max(s.near,DA.distanceToPoint(V0.origin));p=U5(s,y,d.resolution)}if(DA.radius+=p,V0.intersectsSphere(DA)===!1)return;u.boundingBox===null&&u.computeBoundingBox(),LA.copy(u.boundingBox).applyMatrix4(l);let _;if(i)_=g1*.5;else{const y=Math.max(s.near,LA.distanceToPoint(V0.origin));_=U5(s,y,d.resolution)}LA.expandByScalar(_),V0.intersectsBox(LA)!==!1&&(i?MEe(this,t):IEe(this,s,t))}}class REe extends tY{constructor(e=new ZX,t=new aF({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const kEe=me.forwardRef(function({follow:n=!0,lockX:e=!1,lockY:t=!1,lockZ:i=!1,...s},o){const l=me.useRef();return Fm(({camera:u})=>{if(!n||!l.current)return;const d=l.current.rotation.clone();u.getWorldQuaternion(l.current.quaternion),e&&(l.current.rotation.x=d.x),t&&(l.current.rotation.y=d.y),i&&(l.current.rotation.z=d.z)}),on("group",{ref:sF([l,o]),...s})}),OEe=me.forwardRef(function({points:n,color:e="black",vertexColors:t,linewidth:i,lineWidth:s,segments:o,dashed:l,...u},d){const p=Jd(E=>E.size),_=me.useMemo(()=>o?new tY:new REe,[o]),[y]=me.useState(()=>new aF),b=me.useMemo(()=>{const E=o?new oF:new ZX,C=n.map(A=>{const I=Array.isArray(A);return A instanceof $e?[A.x,A.y,A.z]:A instanceof Ht?[A.x,A.y,0]:I&&A.length===3?[A[0],A[1],A[2]]:I&&A.length===2?[A[0],A[1],0]:A});if(E.setPositions(C.flat()),t){const A=t.map(I=>I instanceof Nn?I.toArray():I);E.setColors(A.flat())}return E},[n,o,t]);return me.useLayoutEffect(()=>{_.computeLineDistances()},[n,_]),me.useLayoutEffect(()=>{l?y.defines.USE_DASH="":delete y.defines.USE_DASH,y.needsUpdate=!0},[l,y]),me.useEffect(()=>()=>b.dispose(),[b]),kh("primitive",{object:_,ref:d,...u,children:[on("primitive",{object:b,attach:"geometry"}),on("primitive",{object:y,attach:"material",color:e,vertexColors:!!t,resolution:[p.width,p.height],linewidth:i??s,dashed:l,...u})]})});function LEe(){var n=Object.create(null);function e(s,o){var l=s.id,u=s.name,d=s.dependencies;d===void 0&&(d=[]);var p=s.init;p===void 0&&(p=function(){});var _=s.getTransferables;if(_===void 0&&(_=null),!n[l])try{d=d.map(function(b){return b&&b.isWorkerModule&&(e(b,function(E){if(E instanceof Error)throw E}),b=n[b.id].value),b}),p=i("<"+u+">.init",p),_&&(_=i("<"+u+">.getTransferables",_));var y=null;typeof p=="function"?y=p.apply(void 0,d):console.error("worker module init function failed to rehydrate"),n[l]={id:l,value:y,getTransferables:_},o(y)}catch(b){b&&b.noLog||console.error(b),o(b)}}function t(s,o){var l,u=s.id,d=s.args;(!n[u]||typeof n[u].value!="function")&&o(new Error("Worker module "+u+": not found or its 'init' did not return a function"));try{var p=(l=n[u]).value.apply(l,d);p&&typeof p.then=="function"?p.then(_,function(y){return o(y instanceof Error?y:new Error(""+y))}):_(p)}catch(y){o(y)}function _(y){try{var b=n[u].getTransferables&&n[u].getTransferables(y);(!b||!Array.isArray(b)||!b.length)&&(b=void 0),o(y,b)}catch(E){console.error(E),o(E)}}}function i(s,o){var l=void 0;self.troikaDefine=function(d){return l=d};var u=URL.createObjectURL(new Blob(["/** "+s.replace(/\*/g,"")+` **/

troikaDefine(
`+o+`
)`],{type:"application/javascript"}));try{importScripts(u)}catch(d){console.error(d)}return URL.revokeObjectURL(u),delete self.troikaDefine,l}self.addEventListener("message",function(s){var o=s.data,l=o.messageId,u=o.action,d=o.data;try{u==="registerModule"&&e(d,function(p){p instanceof Error?postMessage({messageId:l,success:!1,error:p.message}):postMessage({messageId:l,success:!0,result:{isCallable:typeof p=="function"}})}),u==="callModule"&&t(d,function(p,_){p instanceof Error?postMessage({messageId:l,success:!1,error:p.message}):postMessage({messageId:l,success:!0,result:p},_||void 0)})}catch(p){postMessage({messageId:l,success:!1,error:p.stack})}})}function DEe(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(s){if(typeof s=="function")return s.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(o){return o&&o._getInitResult?o._getInitResult():o}):[];var s=Promise.all(t).then(function(o){return i.apply(null,o)});return e._getInitResult=function(){return s},s},e}var nY=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u"&&!1||console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return nY=function(){return n},n},NEe=0,BEe=0,FO=!1,yw=Object.create(null),bw=Object.create(null),pN=Object.create(null);function G$(n){if((!n||typeof n.init!="function")&&!FO)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,s=n.workerId;if(!nY())return DEe(n);s==null&&(s="#default");var o="workerModule"+ ++NEe,l=n.name||o,u=null;e=e&&e.map(function(p){return typeof p=="function"&&!p.workerModuleData&&(FO=!0,p=G$({workerId:s,name:"<"+l+"> function dependency: "+p.name,init:`function(){return (
`+TM(p)+`
)}`}),FO=!1),p&&p.workerModuleData&&(p=p.workerModuleData),p});function d(){for(var p=[],_=arguments.length;_--;)p[_]=arguments[_];if(!u){u=z5(s,"registerModule",d.workerModuleData);var y=function(){u=null,bw[s].delete(y)};(bw[s]||(bw[s]=new Set)).add(y)}return u.then(function(b){var E=b.isCallable;if(E)return z5(s,"callModule",{id:o,args:p});throw new Error("Worker module function was called but `init` did not return a callable function")})}return d.workerModuleData={isWorkerModule:!0,id:o,name:l,dependencies:e,init:TM(t),getTransferables:i&&TM(i)},d}function PEe(n){bw[n]&&bw[n].forEach(function(e){e()}),yw[n]&&(yw[n].terminate(),delete yw[n])}function TM(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function FEe(n){var e=yw[n];if(!e){var t=TM(LEe);e=yw[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var s=i.data,o=s.messageId,l=pN[o];if(!l)throw new Error("WorkerModule response with empty or unknown messageId");delete pN[o],l(s)}}return e}function z5(n,e,t){return new Promise(function(i,s){var o=++BEe;pN[o]=function(l){l.success?i(l.result):s(new Error("Error in worker "+e+" call: "+l.error))},FEe(n).postMessage({messageId:o,action:e,data:t})})}function rY(){var n=function(e){function t(se,ie,he,Se,Fe,ke,qe,De){var rt=1-qe;De.x=rt*rt*se+2*rt*qe*he+qe*qe*Fe,De.y=rt*rt*ie+2*rt*qe*Se+qe*qe*ke}function i(se,ie,he,Se,Fe,ke,qe,De,rt,tt){var ft=1-rt;tt.x=ft*ft*ft*se+3*ft*ft*rt*he+3*ft*rt*rt*Fe+rt*rt*rt*qe,tt.y=ft*ft*ft*ie+3*ft*ft*rt*Se+3*ft*rt*rt*ke+rt*rt*rt*De}function s(se,ie){for(var he=/([MLQCZ])([^MLQCZ]*)/g,Se,Fe,ke,qe,De;Se=he.exec(se);){var rt=Se[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(tt){return parseFloat(tt)});switch(Se[1]){case"M":qe=Fe=rt[0],De=ke=rt[1];break;case"L":(rt[0]!==qe||rt[1]!==De)&&ie("L",qe,De,qe=rt[0],De=rt[1]);break;case"Q":{ie("Q",qe,De,qe=rt[2],De=rt[3],rt[0],rt[1]);break}case"C":{ie("C",qe,De,qe=rt[4],De=rt[5],rt[0],rt[1],rt[2],rt[3]);break}case"Z":(qe!==Fe||De!==ke)&&ie("L",qe,De,Fe,ke);break}}}function o(se,ie,he){he===void 0&&(he=16);var Se={x:0,y:0};s(se,function(Fe,ke,qe,De,rt,tt,ft,ct,Pe){switch(Fe){case"L":ie(ke,qe,De,rt);break;case"Q":{for(var Ce=ke,je=qe,it=1;it<he;it++)t(ke,qe,tt,ft,De,rt,it/(he-1),Se),ie(Ce,je,Se.x,Se.y),Ce=Se.x,je=Se.y;break}case"C":{for(var ot=ke,vt=qe,It=1;It<he;It++)i(ke,qe,tt,ft,ct,Pe,De,rt,It/(he-1),Se),ie(ot,vt,Se.x,Se.y),ot=Se.x,vt=Se.y;break}}})}var l="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",u="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",d=new WeakMap,p={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function _(se,ie){var he=se.getContext?se.getContext("webgl",p):se,Se=d.get(he);if(!Se){let ft=function(ot){var vt=ke[ot];if(!vt&&(vt=ke[ot]=he.getExtension(ot),!vt))throw new Error(ot+" not supported");return vt},ct=function(ot,vt){var It=he.createShader(vt);return he.shaderSource(It,ot),he.compileShader(It),It},Pe=function(ot,vt,It,yt){if(!qe[ot]){var kt={},$t={},mt=he.createProgram();he.attachShader(mt,ct(vt,he.VERTEX_SHADER)),he.attachShader(mt,ct(It,he.FRAGMENT_SHADER)),he.linkProgram(mt),qe[ot]={program:mt,transaction:function(xe){he.useProgram(mt),xe({setUniform:function(re,Be){for(var dt=[],bt=arguments.length-2;bt-- >0;)dt[bt]=arguments[bt+2];var Mt=$t[Be]||($t[Be]=he.getUniformLocation(mt,Be));he["uniform"+re].apply(he,[Mt].concat(dt))},setAttribute:function(re,Be,dt,bt,Mt){var pt=kt[re];pt||(pt=kt[re]={buf:he.createBuffer(),loc:he.getAttribLocation(mt,re),data:null}),he.bindBuffer(he.ARRAY_BUFFER,pt.buf),he.vertexAttribPointer(pt.loc,Be,he.FLOAT,!1,0,0),he.enableVertexAttribArray(pt.loc),Fe?he.vertexAttribDivisor(pt.loc,bt):ft("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(pt.loc,bt),Mt!==pt.data&&(he.bufferData(he.ARRAY_BUFFER,Mt,dt),pt.data=Mt)}})}}}qe[ot].transaction(yt)},Ce=function(ot,vt){rt++;try{he.activeTexture(he.TEXTURE0+rt);var It=De[ot];It||(It=De[ot]=he.createTexture(),he.bindTexture(he.TEXTURE_2D,It),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MIN_FILTER,he.NEAREST),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MAG_FILTER,he.NEAREST)),he.bindTexture(he.TEXTURE_2D,It),vt(It,rt)}finally{rt--}},je=function(ot,vt,It){var yt=he.createFramebuffer();tt.push(yt),he.bindFramebuffer(he.FRAMEBUFFER,yt),he.activeTexture(he.TEXTURE0+vt),he.bindTexture(he.TEXTURE_2D,ot),he.framebufferTexture2D(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_2D,ot,0);try{It(yt)}finally{he.deleteFramebuffer(yt),he.bindFramebuffer(he.FRAMEBUFFER,tt[--tt.length-1]||null)}},it=function(){ke={},qe={},De={},rt=-1,tt.length=0};var Fe=typeof WebGL2RenderingContext<"u"&&he instanceof WebGL2RenderingContext,ke={},qe={},De={},rt=-1,tt=[];he.canvas.addEventListener("webglcontextlost",function(ot){it(),ot.preventDefault()},!1),d.set(he,Se={gl:he,isWebGL2:Fe,getExtension:ft,withProgram:Pe,withTexture:Ce,withTextureFramebuffer:je,handleContextLoss:it})}ie(Se)}function y(se,ie,he,Se,Fe,ke,qe,De){qe===void 0&&(qe=15),De===void 0&&(De=null),_(se,function(rt){var tt=rt.gl,ft=rt.withProgram,ct=rt.withTexture;ct("copy",function(Pe,Ce){tt.texImage2D(tt.TEXTURE_2D,0,tt.RGBA,Fe,ke,0,tt.RGBA,tt.UNSIGNED_BYTE,ie),ft("copy",l,u,function(je){var it=je.setUniform,ot=je.setAttribute;ot("aUV",2,tt.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),it("1i","image",Ce),tt.bindFramebuffer(tt.FRAMEBUFFER,De||null),tt.disable(tt.BLEND),tt.colorMask(qe&8,qe&4,qe&2,qe&1),tt.viewport(he,Se,Fe,ke),tt.scissor(he,Se,Fe,ke),tt.drawArrays(tt.TRIANGLES,0,3)})})})}function b(se,ie,he){var Se=se.width,Fe=se.height;_(se,function(ke){var qe=ke.gl,De=new Uint8Array(Se*Fe*4);qe.readPixels(0,0,Se,Fe,qe.RGBA,qe.UNSIGNED_BYTE,De),se.width=ie,se.height=he,y(qe,De,0,0,Se,Fe)})}var E=Object.freeze({__proto__:null,withWebGLContext:_,renderImageData:y,resizeWebGLCanvasWithoutClearing:b});function C(se,ie,he,Se,Fe,ke){ke===void 0&&(ke=1);var qe=new Uint8Array(se*ie),De=Se[2]-Se[0],rt=Se[3]-Se[1],tt=[];o(he,function(ot,vt,It,yt){tt.push({x1:ot,y1:vt,x2:It,y2:yt,minX:Math.min(ot,It),minY:Math.min(vt,yt),maxX:Math.max(ot,It),maxY:Math.max(vt,yt)})}),tt.sort(function(ot,vt){return ot.maxX-vt.maxX});for(var ft=0;ft<se;ft++)for(var ct=0;ct<ie;ct++){var Pe=je(Se[0]+De*(ft+.5)/se,Se[1]+rt*(ct+.5)/ie),Ce=Math.pow(1-Math.abs(Pe)/Fe,ke)/2;Pe<0&&(Ce=1-Ce),Ce=Math.max(0,Math.min(255,Math.round(Ce*255))),qe[ct*se+ft]=Ce}return qe;function je(ot,vt){for(var It=1/0,yt=1/0,kt=tt.length;kt--;){var $t=tt[kt];if($t.maxX+yt<=ot)break;if(ot+yt>$t.minX&&vt-yt<$t.maxY&&vt+yt>$t.minY){var mt=L(ot,vt,$t.x1,$t.y1,$t.x2,$t.y2);mt<It&&(It=mt,yt=Math.sqrt(It))}}return it(ot,vt)&&(yt=-yt),yt}function it(ot,vt){for(var It=0,yt=tt.length;yt--;){var kt=tt[yt];if(kt.maxX<=ot)break;var $t=kt.y1>vt!=kt.y2>vt&&ot<(kt.x2-kt.x1)*(vt-kt.y1)/(kt.y2-kt.y1)+kt.x1;$t&&(It+=kt.y1<kt.y2?1:-1)}return It!==0}}function A(se,ie,he,Se,Fe,ke,qe,De,rt,tt){ke===void 0&&(ke=1),De===void 0&&(De=0),rt===void 0&&(rt=0),tt===void 0&&(tt=0),I(se,ie,he,Se,Fe,ke,qe,null,De,rt,tt)}function I(se,ie,he,Se,Fe,ke,qe,De,rt,tt,ft){ke===void 0&&(ke=1),rt===void 0&&(rt=0),tt===void 0&&(tt=0),ft===void 0&&(ft=0);for(var ct=C(se,ie,he,Se,Fe,ke),Pe=new Uint8Array(ct.length*4),Ce=0;Ce<ct.length;Ce++)Pe[Ce*4+ft]=ct[Ce];y(qe,Pe,rt,tt,se,ie,1<<3-ft,De)}function L(se,ie,he,Se,Fe,ke){var qe=Fe-he,De=ke-Se,rt=qe*qe+De*De,tt=rt?Math.max(0,Math.min(1,((se-he)*qe+(ie-Se)*De)/rt)):0,ft=se-(he+tt*qe),ct=ie-(Se+tt*De);return ft*ft+ct*ct}var O=Object.freeze({__proto__:null,generate:C,generateIntoCanvas:A,generateIntoFramebuffer:I}),P="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",N="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",z="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",W=new Float32Array([0,0,2,0,0,2]),H=null,U=!1,Q={},ne=new WeakMap;function oe(se){if(!U&&!pe(se))throw new Error("WebGL generation not supported")}function le(se,ie,he,Se,Fe,ke,qe){if(ke===void 0&&(ke=1),qe===void 0&&(qe=null),!qe&&(qe=H,!qe)){var De=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!De)throw new Error("OffscreenCanvas or DOM canvas not supported");qe=H=De.getContext("webgl",{depth:!1})}oe(qe);var rt=new Uint8Array(se*ie*4);_(qe,function(Pe){var Ce=Pe.gl,je=Pe.withTexture,it=Pe.withTextureFramebuffer;je("readable",function(ot,vt){Ce.texImage2D(Ce.TEXTURE_2D,0,Ce.RGBA,se,ie,0,Ce.RGBA,Ce.UNSIGNED_BYTE,null),it(ot,vt,function(It){ce(se,ie,he,Se,Fe,ke,Ce,It,0,0,0),Ce.readPixels(0,0,se,ie,Ce.RGBA,Ce.UNSIGNED_BYTE,rt)})})});for(var tt=new Uint8Array(se*ie),ft=0,ct=0;ft<rt.length;ft+=4)tt[ct++]=rt[ft];return tt}function ge(se,ie,he,Se,Fe,ke,qe,De,rt,tt){ke===void 0&&(ke=1),De===void 0&&(De=0),rt===void 0&&(rt=0),tt===void 0&&(tt=0),ce(se,ie,he,Se,Fe,ke,qe,null,De,rt,tt)}function ce(se,ie,he,Se,Fe,ke,qe,De,rt,tt,ft){ke===void 0&&(ke=1),rt===void 0&&(rt=0),tt===void 0&&(tt=0),ft===void 0&&(ft=0),oe(qe);var ct=[];o(he,function(Pe,Ce,je,it){ct.push(Pe,Ce,je,it)}),ct=new Float32Array(ct),_(qe,function(Pe){var Ce=Pe.gl,je=Pe.isWebGL2,it=Pe.getExtension,ot=Pe.withProgram,vt=Pe.withTexture,It=Pe.withTextureFramebuffer,yt=Pe.handleContextLoss;if(vt("rawDistances",function(kt,$t){(se!==kt._lastWidth||ie!==kt._lastHeight)&&Ce.texImage2D(Ce.TEXTURE_2D,0,Ce.RGBA,kt._lastWidth=se,kt._lastHeight=ie,0,Ce.RGBA,Ce.UNSIGNED_BYTE,null),ot("main",P,N,function(mt){var xe=mt.setAttribute,re=mt.setUniform,Be=!je&&it("ANGLE_instanced_arrays"),dt=!je&&it("EXT_blend_minmax");xe("aUV",2,Ce.STATIC_DRAW,0,W),xe("aLineSegment",4,Ce.DYNAMIC_DRAW,1,ct),re.apply(void 0,["4f","uGlyphBounds"].concat(Se)),re("1f","uMaxDistance",Fe),re("1f","uExponent",ke),It(kt,$t,function(bt){Ce.enable(Ce.BLEND),Ce.colorMask(!0,!0,!0,!0),Ce.viewport(0,0,se,ie),Ce.scissor(0,0,se,ie),Ce.blendFunc(Ce.ONE,Ce.ONE),Ce.blendEquationSeparate(Ce.FUNC_ADD,je?Ce.MAX:dt.MAX_EXT),Ce.clear(Ce.COLOR_BUFFER_BIT),je?Ce.drawArraysInstanced(Ce.TRIANGLES,0,3,ct.length/4):Be.drawArraysInstancedANGLE(Ce.TRIANGLES,0,3,ct.length/4)})}),ot("post",l,z,function(mt){mt.setAttribute("aUV",2,Ce.STATIC_DRAW,0,W),mt.setUniform("1i","tex",$t),Ce.bindFramebuffer(Ce.FRAMEBUFFER,De),Ce.disable(Ce.BLEND),Ce.colorMask(ft===0,ft===1,ft===2,ft===3),Ce.viewport(rt,tt,se,ie),Ce.scissor(rt,tt,se,ie),Ce.drawArrays(Ce.TRIANGLES,0,3)})}),Ce.isContextLost())throw yt(),new Error("webgl context lost")})}function pe(se){var ie=!se||se===H?Q:se.canvas||se,he=ne.get(ie);if(he===void 0){U=!0;var Se=null;try{var Fe=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ke=le(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,se);he=ke&&Fe.length===ke.length&&ke.every(function(qe,De){return qe===Fe[De]}),he||(Se="bad trial run results",console.info(Fe,ke))}catch(qe){he=!1,Se=qe.message}Se&&console.warn("WebGL SDF generation not supported:",Se),U=!1,ne.set(ie,he)}return he}var Te=Object.freeze({__proto__:null,generate:le,generateIntoCanvas:ge,generateIntoFramebuffer:ce,isSupported:pe});function Oe(se,ie,he,Se,Fe,ke){Fe===void 0&&(Fe=Math.max(Se[2]-Se[0],Se[3]-Se[1])/2),ke===void 0&&(ke=1);try{return le.apply(Te,arguments)}catch(qe){return console.info("WebGL SDF generation failed, falling back to JS",qe),C.apply(O,arguments)}}function J(se,ie,he,Se,Fe,ke,qe,De,rt,tt){Fe===void 0&&(Fe=Math.max(Se[2]-Se[0],Se[3]-Se[1])/2),ke===void 0&&(ke=1),De===void 0&&(De=0),rt===void 0&&(rt=0),tt===void 0&&(tt=0);try{return ge.apply(Te,arguments)}catch(ft){return console.info("WebGL SDF generation failed, falling back to JS",ft),A.apply(O,arguments)}}return e.forEachPathCommand=s,e.generate=Oe,e.generateIntoCanvas=J,e.javascript=O,e.pathToLineSegments=o,e.webgl=Te,e.webglUtils=E,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function UEe(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},s={};i.L=1,s[1]="L",Object.keys(t).forEach(function(yt,kt){i[yt]=1<<kt+1,s[i[yt]]=yt}),Object.freeze(i);var o=i.LRI|i.RLI|i.FSI,l=i.L|i.R|i.AL,u=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,d=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,p=i.S|i.WS|i.B|o|i.PDI|d,_=null;function y(){if(!_){_=new Map;var yt=function($t){if(t.hasOwnProperty($t)){var mt=0;t[$t].split(",").forEach(function(xe){var re=xe.split("+"),Be=re[0],dt=re[1];Be=parseInt(Be,36),dt=dt?parseInt(dt,36):0,_.set(mt+=Be,i[$t]);for(var bt=0;bt<dt;bt++)_.set(++mt,i[$t])})}};for(var kt in t)yt(kt)}}function b(yt){return y(),_.get(yt.codePointAt(0))||i.L}function E(yt){return s[b(yt)]}var C={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function A(yt,kt){var $t=36,mt=0,xe=new Map,re=kt&&new Map,Be;return yt.split(",").forEach(function dt(bt){if(bt.indexOf("+")!==-1)for(var Mt=+bt;Mt--;)dt(Be);else{Be=bt;var pt=bt.split(">"),Ke=pt[0],Ie=pt[1];Ke=String.fromCodePoint(mt+=parseInt(Ke,$t)),Ie=String.fromCodePoint(mt+=parseInt(Ie,$t)),xe.set(Ke,Ie),kt&&re.set(Ie,Ke)}}),{map:xe,reverseMap:re}}var I,L,O;function P(){if(!I){var yt=A(C.pairs,!0),kt=yt.map,$t=yt.reverseMap;I=kt,L=$t,O=A(C.canonical,!1).map}}function N(yt){return P(),I.get(yt)||null}function z(yt){return P(),L.get(yt)||null}function W(yt){return P(),O.get(yt)||null}var H=i.L,U=i.R,Q=i.EN,ne=i.ES,oe=i.ET,le=i.AN,ge=i.CS,ce=i.B,pe=i.S,Te=i.ON,Oe=i.BN,J=i.NSM,se=i.AL,ie=i.LRO,he=i.RLO,Se=i.LRE,Fe=i.RLE,ke=i.PDF,qe=i.LRI,De=i.RLI,rt=i.FSI,tt=i.PDI;function ft(yt,kt){for(var $t=125,mt=new Uint32Array(yt.length),xe=0;xe<yt.length;xe++)mt[xe]=b(yt[xe]);var re=new Map;function Be(Bi,wi){var zn=mt[Bi];mt[Bi]=wi,re.set(zn,re.get(zn)-1),zn&u&&re.set(u,re.get(u)-1),re.set(wi,(re.get(wi)||0)+1),wi&u&&re.set(u,(re.get(u)||0)+1)}for(var dt=new Uint8Array(yt.length),bt=new Map,Mt=[],pt=null,Ke=0;Ke<yt.length;Ke++)pt||Mt.push(pt={start:Ke,end:yt.length-1,level:kt==="rtl"?1:kt==="ltr"?0:$o(Ke,!1)}),mt[Ke]&ce&&(pt.end=Ke,pt=null);for(var Ie=Fe|Se|he|ie|o|tt|ke|ce,q=function(Bi){return Bi+(Bi&1?1:2)},ee=function(Bi){return Bi+(Bi&1?2:1)},de=0;de<Mt.length;de++){pt=Mt[de];var Ae=[{_level:pt.level,_override:0,_isolate:0}],Je=void 0,jt=0,ze=0,Yt=0;re.clear();for(var _t=pt.start;_t<=pt.end;_t++){var Kt=mt[_t];if(Je=Ae[Ae.length-1],re.set(Kt,(re.get(Kt)||0)+1),Kt&u&&re.set(u,(re.get(u)||0)+1),Kt&Ie)if(Kt&(Fe|Se)){dt[_t]=Je._level;var Xt=(Kt===Fe?ee:q)(Je._level);Xt<=$t&&!jt&&!ze?Ae.push({_level:Xt,_override:0,_isolate:0}):jt||ze++}else if(Kt&(he|ie)){dt[_t]=Je._level;var Dn=(Kt===he?ee:q)(Je._level);Dn<=$t&&!jt&&!ze?Ae.push({_level:Dn,_override:Kt&he?U:H,_isolate:0}):jt||ze++}else if(Kt&o){Kt&rt&&(Kt=$o(_t+1,!0)===1?De:qe),dt[_t]=Je._level,Je._override&&Be(_t,Je._override);var ii=(Kt===De?ee:q)(Je._level);ii<=$t&&jt===0&&ze===0?(Yt++,Ae.push({_level:ii,_override:0,_isolate:1,_isolInitIndex:_t})):jt++}else if(Kt&tt){if(jt>0)jt--;else if(Yt>0){for(ze=0;!Ae[Ae.length-1]._isolate;)Ae.pop();var Lr=Ae[Ae.length-1]._isolInitIndex;Lr!=null&&(bt.set(Lr,_t),bt.set(_t,Lr)),Ae.pop(),Yt--}Je=Ae[Ae.length-1],dt[_t]=Je._level,Je._override&&Be(_t,Je._override)}else Kt&ke?(jt===0&&(ze>0?ze--:!Je._isolate&&Ae.length>1&&(Ae.pop(),Je=Ae[Ae.length-1])),dt[_t]=Je._level):Kt&ce&&(dt[_t]=pt.level);else dt[_t]=Je._level,Je._override&&Kt!==Oe&&Be(_t,Je._override)}for(var Si=[],Er=null,ir=pt.start;ir<=pt.end;ir++){var te=mt[ir];if(!(te&d)){var be=dt[ir],He=te&o,at=te===tt;Er&&be===Er._level?(Er._end=ir,Er._endsWithIsolInit=He):Si.push(Er={_start:ir,_end:ir,_level:be,_startsWithPDI:at,_endsWithIsolInit:He})}}for(var Ft=[],rn=0;rn<Si.length;rn++){var Rn=Si[rn];if(!Rn._startsWithPDI||Rn._startsWithPDI&&!bt.has(Rn._start)){for(var Le=[Er=Rn],gt=void 0;Er&&Er._endsWithIsolInit&&(gt=bt.get(Er._end))!=null;)for(var Ct=rn+1;Ct<Si.length;Ct++)if(Si[Ct]._start===gt){Le.push(Er=Si[Ct]);break}for(var Tt=[],zt=0;zt<Le.length;zt++)for(var On=Le[zt],tr=On._start;tr<=On._end;tr++)Tt.push(tr);for(var yr=dt[Tt[0]],Rr=pt.level,Li=Tt[0]-1;Li>=0;Li--)if(!(mt[Li]&d)){Rr=dt[Li];break}var Dr=Tt[Tt.length-1],jr=dt[Dr],bs=pt.level;if(!(mt[Dr]&o)){for(var Ia=Dr+1;Ia<=pt.end;Ia++)if(!(mt[Ia]&d)){bs=dt[Ia];break}}Ft.push({_seqIndices:Tt,_sosType:Math.max(Rr,yr)%2?U:H,_eosType:Math.max(bs,jr)%2?U:H})}}for(var wo=0;wo<Ft.length;wo++){var jl=Ft[wo],Zt=jl._seqIndices,Cr=jl._sosType,qa=jl._eosType;if(re.get(J))for(var Ra=0;Ra<Zt.length;Ra++){var Ns=Zt[Ra];if(mt[Ns]&J){for(var Bs=Cr,Di=Ra-1;Di>=0;Di--)if(!(mt[Zt[Di]]&d)){Bs=mt[Zt[Di]];break}Be(Ns,Bs&(o|tt)?Te:Bs)}}if(re.get(Q))for(var Ar=0;Ar<Zt.length;Ar++){var $n=Zt[Ar];if(mt[$n]&Q)for(var $r=Ar-1;$r>=-1;$r--){var zr=$r===-1?Cr:mt[Zt[$r]];if(zr&l){zr===se&&Be($n,le);break}}}if(re.get(se))for(var mr=0;mr<Zt.length;mr++){var Ni=Zt[mr];mt[Ni]&se&&Be(Ni,U)}if(re.get(ne)||re.get(ge))for(var Ts=1;Ts<Zt.length-1;Ts++){var ci=Zt[Ts];if(mt[ci]&(ne|ge)){for(var fs=0,Qa=0,ka=Ts-1;ka>=0&&(fs=mt[Zt[ka]],!!(fs&d));ka--);for(var uc=Ts+1;uc<Zt.length&&(Qa=mt[Zt[uc]],!!(Qa&d));uc++);fs===Qa&&(mt[ci]===ne?fs===Q:fs&(Q|le))&&Be(ci,fs)}}if(re.get(Q))for(var cc=0;cc<Zt.length;cc++){var Vs=Zt[cc];if(mt[Vs]&Q){for(var Yo=cc-1;Yo>=0&&mt[Zt[Yo]]&(oe|d);Yo--)Be(Zt[Yo],Q);for(var Xl=cc+1;Xl<Zt.length&&mt[Zt[Xl]]&(oe|d);Xl++)Be(Zt[Xl],Q)}}if(re.get(oe)||re.get(ne)||re.get(ge))for(var mu=0;mu<Zt.length;mu++){var hh=Zt[mu];if(mt[hh]&(oe|ne|ge)){Be(hh,Te);for(var Ko=mu-1;Ko>=0&&mt[Zt[Ko]]&d;Ko--)Be(Zt[Ko],Te);for(var pr=mu+1;pr<Zt.length&&mt[Zt[pr]]&d;pr++)Be(Zt[pr],Te)}}if(re.get(Q))for(var Ei=0,kc=Cr;Ei<Zt.length;Ei++){var dh=Zt[Ei],Oc=mt[dh];Oc&Q?kc===H&&Be(dh,H):Oc&l&&(kc=Oc)}if(re.get(u)){var Sl=U|Q|le,gu=Sl|H,El=[];{for(var xl=[],gr=0;gr<Zt.length;gr++)if(mt[Zt[gr]]&u){var _r=yt[Zt[gr]],Yl=void 0;if(N(_r)!==null)if(xl.length<63)xl.push({char:_r,seqIndex:gr});else break;else if((Yl=z(_r))!==null)for(var Za=xl.length-1;Za>=0;Za--){var el=xl[Za].char;if(el===Yl||el===z(W(_r))||N(W(el))===_r){El.push([xl[Za].seqIndex,gr]),xl.length=Za;break}}}El.sort(function(Bi,wi){return Bi[0]-wi[0]})}for(var _u=0;_u<El.length;_u++){for(var Ki=El[_u],ms=Ki[0],tl=Ki[1],Td=!1,ro=0,Pu=ms+1;Pu<tl;Pu++){var aa=Zt[Pu];if(mt[aa]&gu){Td=!0;var vu=mt[aa]&Sl?U:H;if(vu===nl(aa)){ro=vu;break}}}if(Td&&!ro){ro=Cr;for(var nr=ms-1;nr>=0;nr--){var Un=Zt[nr];if(mt[Un]&gu){var Ss=mt[Un]&Sl?U:H;Ss!==nl(Un)?ro=Ss:ro=nl(Un);break}}}if(ro){if(mt[Zt[ms]]=mt[Zt[tl]]=ro,ro!==nl(Zt[ms])){for(var io=ms+1;io<Zt.length;io++)if(!(mt[Zt[io]]&d)){b(yt[Zt[io]])&J&&(mt[Zt[io]]=ro);break}}if(ro!==nl(Zt[tl])){for(var Fu=tl+1;Fu<Zt.length;Fu++)if(!(mt[Zt[Fu]]&d)){b(yt[Zt[Fu]])&J&&(mt[Zt[Fu]]=ro);break}}}}for(var yu=0;yu<Zt.length;yu++)if(mt[Zt[yu]]&u){for(var ph=yu,Oa=yu,la=Cr,Uu=yu-1;Uu>=0;Uu--)if(mt[Zt[Uu]]&d)ph=Uu;else{la=mt[Zt[Uu]]&Sl?U:H;break}for(var br=qa,Ms=yu+1;Ms<Zt.length;Ms++)if(mt[Zt[Ms]]&(u|d))Oa=Ms;else{br=mt[Zt[Ms]]&Sl?U:H;break}for(var vi=ph;vi<=Oa;vi++)mt[Zt[vi]]=la===br?la:nl(Zt[vi]);yu=Oa}}}for(var xi=pt.start;xi<=pt.end;xi++){var ua=dt[xi],Zr=mt[xi];if(ua&1?Zr&(H|Q|le)&&dt[xi]++:Zr&U?dt[xi]++:Zr&(le|Q)&&(dt[xi]+=2),Zr&d&&(dt[xi]=xi===0?pt.level:dt[xi-1]),xi===pt.end||b(yt[xi])&(pe|ce))for(var bu=xi;bu>=0&&b(yt[bu])&p;bu--)dt[bu]=pt.level}}return{levels:dt,paragraphs:Mt};function $o(Bi,wi){for(var zn=Bi;zn<yt.length;zn++){var $i=mt[zn];if($i&(U|se))return 1;if($i&(ce|H)||wi&&$i===tt)return 0;if($i&o){var Xr=Tu(zn);zn=Xr===-1?yt.length:Xr}}return 0}function Tu(Bi){for(var wi=1,zn=Bi+1;zn<yt.length;zn++){var $i=mt[zn];if($i&ce)break;if($i&tt){if(--wi===0)return zn}else $i&o&&wi++}return-1}function nl(Bi){return dt[Bi]&1?U:H}}var ct="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Pe;function Ce(){if(!Pe){var yt=A(ct,!0),kt=yt.map,$t=yt.reverseMap;$t.forEach(function(mt,xe){kt.set(xe,mt)}),Pe=kt}}function je(yt){return Ce(),Pe.get(yt)||null}function it(yt,kt,$t,mt){var xe=yt.length;$t=Math.max(0,$t==null?0:+$t),mt=Math.min(xe-1,mt==null?xe-1:+mt);for(var re=new Map,Be=$t;Be<=mt;Be++)if(kt[Be]&1){var dt=je(yt[Be]);dt!==null&&re.set(Be,dt)}return re}function ot(yt,kt,$t,mt){var xe=yt.length;$t=Math.max(0,$t==null?0:+$t),mt=Math.min(xe-1,mt==null?xe-1:+mt);var re=[];return kt.paragraphs.forEach(function(Be){var dt=Math.max($t,Be.start),bt=Math.min(mt,Be.end);if(dt<bt){for(var Mt=kt.levels.slice(dt,bt+1),pt=bt;pt>=dt&&b(yt[pt])&p;pt--)Mt[pt]=Be.level;for(var Ke=Be.level,Ie=1/0,q=0;q<Mt.length;q++){var ee=Mt[q];ee>Ke&&(Ke=ee),ee<Ie&&(Ie=ee|1)}for(var de=Ke;de>=Ie;de--)for(var Ae=0;Ae<Mt.length;Ae++)if(Mt[Ae]>=de){for(var Je=Ae;Ae+1<Mt.length&&Mt[Ae+1]>=de;)Ae++;Ae>Je&&re.push([Je+$t,Ae+$t])}}}),re}function vt(yt,kt,$t,mt){var xe=It(yt,kt,$t,mt),re=[].concat(yt);return xe.forEach(function(Be,dt){re[dt]=(kt.levels[Be]&1?je(yt[Be]):null)||yt[Be]}),re.join("")}function It(yt,kt,$t,mt){for(var xe=ot(yt,kt,$t,mt),re=[],Be=0;Be<yt.length;Be++)re[Be]=Be;return xe.forEach(function(dt){for(var bt=dt[0],Mt=dt[1],pt=re.slice(bt,Mt+1),Ke=pt.length;Ke--;)re[Mt-Ke]=pt[Ke]}),re}return e.closingToOpeningBracket=z,e.getBidiCharType=b,e.getBidiCharTypeName=E,e.getCanonicalBracket=W,e.getEmbeddingLevels=ft,e.getMirroredCharacter=je,e.getMirroredCharactersMap=it,e.getReorderSegments=ot,e.getReorderedIndices=It,e.getReorderedString=vt,e.openingToClosingBracket=N,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const iY=/\bvoid\s+main\s*\(\s*\)\s*{/g;function fN(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,s){let o=ds[s];return o?fN(o):i}return n.replace(e,t)}const Yd=[];for(let n=0;n<256;n++)Yd[n]=(n<16?"0":"")+n.toString(16);function zEe(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Yd[n&255]+Yd[n>>8&255]+Yd[n>>16&255]+Yd[n>>24&255]+"-"+Yd[e&255]+Yd[e>>8&255]+"-"+Yd[e>>16&15|64]+Yd[e>>24&255]+"-"+Yd[t&63|128]+Yd[t>>8&255]+"-"+Yd[t>>16&255]+Yd[t>>24&255]+Yd[i&255]+Yd[i>>8&255]+Yd[i>>16&255]+Yd[i>>24&255]).toUpperCase()}const Ib=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let s in i)i.hasOwnProperty(s)&&(n[s]=i[s])}return n},HEe=Date.now(),H5=new WeakMap,G5=new Map;let GEe=1e10;function mN(n,e){const t=XEe(e);let i=H5.get(n);if(i||H5.set(n,i=Object.create(null)),i[t])return new i[t];const s=`_onBeforeCompile${t}`,o=function(p){n.onBeforeCompile.call(this,p);const _=this.customProgramCacheKey()+"|"+p.vertexShader+"|"+p.fragmentShader;let y=G5[_];if(!y){const b=WEe(p,e,t);y=G5[_]=b}p.vertexShader=y.vertexShader,p.fragmentShader=y.fragmentShader,Ib(p.uniforms,this.uniforms),e.timeUniform&&(p.uniforms[e.timeUniform]={get value(){return Date.now()-HEe}}),this[s]&&this[s](p)},l=function(){return u(e.chained?n:n.clone())},u=function(p){const _=Object.create(p,d);return Object.defineProperty(_,"baseMaterial",{value:n}),Object.defineProperty(_,"id",{value:GEe++}),_.uuid=zEe(),_.uniforms=Ib({},p.uniforms,e.uniforms),_.defines=Ib({},p.defines,e.defines),_.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",_.extensions=Ib({},p.extensions,e.extensions),_._listeners=void 0,_},d={constructor:{value:l},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return o},set(p){this[s]=p}},copy:{writable:!0,configurable:!0,value:function(p){return n.copy.call(this,p),!n.isShaderMaterial&&!n.isDerivedMaterial&&(Ib(this.extensions,p.extensions),Ib(this.defines,p.defines),Ib(this.uniforms,N$.clone(p.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const p=new n.constructor;return u(p).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let p=this._depthMaterial;return p||(p=this._depthMaterial=mN(n.isDerivedMaterial?n.getDepthMaterial():new P$({depthPacking:iE}),e),p.defines.IS_DEPTH_MATERIAL="",p.uniforms=this.uniforms),p}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let p=this._distanceMaterial;return p||(p=this._distanceMaterial=mN(n.isDerivedMaterial?n.getDistanceMaterial():new XR,e),p.defines.IS_DISTANCE_MATERIAL="",p.uniforms=this.uniforms),p}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:p,_distanceMaterial:_}=this;p&&p.dispose(),_&&_.dispose(),n.dispose.call(this)}}};return i[t]=l,new l}function WEe({vertexShader:n,fragmentShader:e},t,i){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:l,vertexTransform:u,fragmentDefs:d,fragmentMainIntro:p,fragmentMainOutro:_,fragmentColorTransform:y,customRewriter:b,timeUniform:E}=t;if(s=s||"",o=o||"",l=l||"",d=d||"",p=p||"",_=_||"",(u||b)&&(n=fN(n)),(y||b)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=fN(e)),b){let C=b({vertexShader:n,fragmentShader:e});n=C.vertexShader,e=C.fragmentShader}if(y){let C=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,A=>(C.push(A),"")),_=`${y}
${C.join(`
`)}
${_}`}if(E){const C=`
uniform float ${E};
`;s=C+s,d=C+d}return u&&(n=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${n}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${u}
}
`,o=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${o}
`,n=n.replace(/\b(position|normal|uv)\b/g,(C,A,I,L)=>/\battribute\s+vec[23]\s+$/.test(L.substr(0,I))?A:`troika_${A}_${i}`)),n=W5(n,i,s,o,l),e=W5(e,i,d,p,_),{vertexShader:n,fragmentShader:e}}function W5(n,e,t,i,s){return(i||s||t)&&(n=n.replace(iY,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${s}
}`),n}function VEe(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let jEe=0;const V5=new Map;function XEe(n){const e=JSON.stringify(n,VEe);let t=V5.get(e);return t==null&&V5.set(e,t=++jEe),t}function YEe(n,e,t){const{defaultFontURL:i}=t,s=Object.create(null),o=1/0,l=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,u="[^\\S\\u00A0]",d=new RegExp(`${u}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function p(O,P){function N(){const z=W=>{console.error(`Failure loading font ${O}${O===i?"":"; trying fallback"}`,W),O!==i&&(O=i,N())};try{const W=new XMLHttpRequest;W.open("get",O,!0),W.responseType="arraybuffer",W.onload=function(){if(W.status>=400)z(new Error(W.statusText));else if(W.status>0)try{const H=n(W.response);P(H)}catch(H){z(H)}},W.onerror=z,W.send()}catch(W){z(W)}}N()}function _(O,P){O||(O=i);let N=s[O];N?N.pending?N.pending.push(P):P(N):(s[O]={pending:[P]},p(O,z=>{let W=s[O].pending;s[O]=z,W.forEach(H=>H(z))}))}function y({text:O="",font:P=i,sdfGlyphSize:N=64,fontSize:z=1,letterSpacing:W=0,lineHeight:H="normal",maxWidth:U=o,direction:Q,textAlign:ne="left",textIndent:oe=0,whiteSpace:le="normal",overflowWrap:ge="normal",anchorX:ce=0,anchorY:pe=0,includeCaretPositions:Te=!1,chunkedBoundsSize:Oe=8192,colorRanges:J=null},se,ie=!1){const he=A(),Se={fontLoad:0,typesetting:0};O.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),O=O.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),z=+z,W=+W,U=+U,H=H||"normal",oe=+oe,_(P,Fe=>{const ke=isFinite(U);let qe=null,De=null,rt=null,tt=null,ft=null,ct=null,Pe=null,Ce=0,je=0,it=le!=="nowrap";const{ascender:ot,descender:vt,unitsPerEm:It,lineGap:yt,capHeight:kt,xHeight:$t}=Fe;Se.fontLoad=A()-he;const mt=A(),xe=z/It;H==="normal"&&(H=(ot-vt+yt)/It),H=H*z;const re=(H-(ot-vt)*xe)/2,Be=-(ot*xe+re),dt=Math.min(H,(ot-vt)*xe),bt=(ot+vt)/2*xe-dt/2;let Mt=oe,pt=new I;const Ke=[pt];Fe.forEachGlyph(O,z,W,(ee,de,Ae)=>{const Je=O.charAt(Ae),jt=ee.advanceWidth*xe,ze=pt.count;let Yt;if("isEmpty"in ee||(ee.isWhitespace=!!Je&&new RegExp(u).test(Je),ee.canBreakAfter=!!Je&&d.test(Je),ee.isEmpty=ee.xMin===ee.xMax||ee.yMin===ee.yMax||l.test(Je)),!ee.isWhitespace&&!ee.isEmpty&&je++,it&&ke&&!ee.isWhitespace&&de+jt+Mt>U&&ze){if(pt.glyphAt(ze-1).glyphObj.canBreakAfter)Yt=new I,Mt=-de;else for(let Kt=ze;Kt--;)if(Kt===0&&ge==="break-word"){Yt=new I,Mt=-de;break}else if(pt.glyphAt(Kt).glyphObj.canBreakAfter){Yt=pt.splitAt(Kt+1);const Xt=Yt.glyphAt(0).x;Mt-=Xt;for(let Dn=Yt.count;Dn--;)Yt.glyphAt(Dn).x-=Xt;break}Yt&&(pt.isSoftWrapped=!0,pt=Yt,Ke.push(pt),Ce=U)}let _t=pt.glyphAt(pt.count);_t.glyphObj=ee,_t.x=de+Mt,_t.width=jt,_t.charIndex=Ae,Je===`
`&&(pt=new I,Ke.push(pt),Mt=-(de+jt+W*z)+oe)}),Ke.forEach(ee=>{for(let de=ee.count;de--;){let{glyphObj:Ae,x:Je,width:jt}=ee.glyphAt(de);if(!Ae.isWhitespace){ee.width=Je+jt,ee.width>Ce&&(Ce=ee.width);return}}});let Ie=0,q=0;if(ce&&(typeof ce=="number"?Ie=-ce:typeof ce=="string"&&(Ie=-Ce*(ce==="left"?0:ce==="center"?.5:ce==="right"?1:E(ce)))),pe){if(typeof pe=="number")q=-pe;else if(typeof pe=="string"){let ee=Ke.length*H;q=pe==="top"?0:pe==="top-baseline"?-Be:pe==="top-cap"?-Be-kt*xe:pe==="top-ex"?-Be-$t*xe:pe==="middle"?ee/2:pe==="bottom"?ee:pe==="bottom-baseline"?ee-re+vt*xe:E(pe)*ee}}if(!ie){const ee=e.getEmbeddingLevels(O,Q);qe=new Uint16Array(je),De=new Float32Array(je*2),rt={},ct=[o,o,-o,-o],Pe=[];let de=Be;Te&&(ft=new Float32Array(O.length*3)),J&&(tt=new Uint8Array(je*3));let Ae=0,Je=-1,jt=-1,ze,Yt;if(Ke.forEach((_t,Kt)=>{let{count:Xt,width:Dn}=_t;if(Xt>0){let ii=0;for(let be=Xt;be--&&_t.glyphAt(be).glyphObj.isWhitespace;)ii++;let Lr=0,Si=0;if(ne==="center")Lr=(Ce-Dn)/2;else if(ne==="right")Lr=Ce-Dn;else if(ne==="justify"&&_t.isSoftWrapped){let be=0;for(let He=Xt-ii;He--;)_t.glyphAt(He).glyphObj.isWhitespace&&be++;Si=(Ce-Dn)/be}if(Si||Lr){let be=0;for(let He=0;He<Xt;He++){let at=_t.glyphAt(He);const Ft=at.glyphObj;at.x+=Lr+be,Si!==0&&Ft.isWhitespace&&He<Xt-ii&&(be+=Si,at.width+=Si)}}const Er=e.getReorderSegments(O,ee,_t.glyphAt(0).charIndex,_t.glyphAt(_t.count-1).charIndex);for(let be=0;be<Er.length;be++){const[He,at]=Er[be];let Ft=1/0,rn=-1/0;for(let Rn=0;Rn<Xt;Rn++)if(_t.glyphAt(Rn).charIndex>=He){let Le=Rn,gt=Rn;for(;gt<Xt;gt++){let Ct=_t.glyphAt(gt);if(Ct.charIndex>at)break;gt<Xt-ii&&(Ft=Math.min(Ft,Ct.x),rn=Math.max(rn,Ct.x+Ct.width))}for(let Ct=Le;Ct<gt;Ct++){const Tt=_t.glyphAt(Ct);Tt.x=rn-(Tt.x+Tt.width-Ft)}break}}let ir;const te=be=>ir=be;for(let be=0;be<Xt;be++){let He=_t.glyphAt(be);ir=He.glyphObj;const at=ir.index,Ft=ee.levels[He.charIndex]&1;if(Ft){const rn=e.getMirroredCharacter(O[He.charIndex]);rn&&Fe.forEachGlyph(rn,0,0,te)}if(Te){const{charIndex:rn}=He,Rn=He.x+Ie,Le=He.x+He.width+Ie;ft[rn*3]=Ft?Le:Rn,ft[rn*3+1]=Ft?Rn:Le,ft[rn*3+2]=de+bt+q;const gt=rn-Je;gt>1&&C(ft,Je,gt),Je=rn}if(J){const{charIndex:rn}=He;for(;rn>jt;)jt++,J.hasOwnProperty(jt)&&(Yt=J[jt])}if(!ir.isWhitespace&&!ir.isEmpty){const rn=Ae++;rt[at]||(rt[at]={path:ir.path,pathBounds:[ir.xMin,ir.yMin,ir.xMax,ir.yMax]});const Rn=He.x+Ie,Le=de+q;De[rn*2]=Rn,De[rn*2+1]=Le;const gt=Rn+ir.xMin*xe,Ct=Le+ir.yMin*xe,Tt=Rn+ir.xMax*xe,zt=Le+ir.yMax*xe;gt<ct[0]&&(ct[0]=gt),Ct<ct[1]&&(ct[1]=Ct),Tt>ct[2]&&(ct[2]=Tt),zt>ct[3]&&(ct[3]=zt),rn%Oe===0&&(ze={start:rn,end:rn,rect:[o,o,-o,-o]},Pe.push(ze)),ze.end++;const On=ze.rect;if(gt<On[0]&&(On[0]=gt),Ct<On[1]&&(On[1]=Ct),Tt>On[2]&&(On[2]=Tt),zt>On[3]&&(On[3]=zt),qe[rn]=at,J){const tr=rn*3;tt[tr]=Yt>>16&255,tt[tr+1]=Yt>>8&255,tt[tr+2]=Yt&255}}}}de-=H}),ft){const _t=O.length-Je;_t>1&&C(ft,Je,_t)}}Se.typesetting=A()-mt,se({glyphIds:qe,glyphPositions:De,glyphData:rt,caretPositions:ft,caretHeight:dt,glyphColors:tt,chunkedBounds:Pe,fontSize:z,unitsPerEm:It,ascender:ot*xe,descender:vt*xe,capHeight:kt*xe,xHeight:$t*xe,lineHeight:H,topBaseline:Be,blockBounds:[Ie,q-Ke.length*H,Ie+Ce,q],visibleBounds:ct,timings:Se})})}function b(O,P){y(O,N=>{const[z,W,H,U]=N.blockBounds;P({width:H-z,height:U-W})},{metricsOnly:!0})}function E(O){let P=O.match(/^([\d.]+)%$/),N=P?parseFloat(P[1]):NaN;return isNaN(N)?0:N/100}function C(O,P,N){const z=O[P*3],W=O[P*3+1],H=O[P*3+2],U=(W-z)/N;for(let Q=0;Q<N;Q++){const ne=(P+Q)*3;O[ne]=z+U*Q,O[ne+1]=z+U*(Q+1),O[ne+2]=H}}function A(){return(self.performance||Date).now()}function I(){this.data=[]}const L=["glyphObj","x","width","charIndex"];return I.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/L.length)},glyphAt(O){let P=I.flyweight;return P.data=this.data,P.index=O,P},splitAt(O){let P=new I;return P.data=this.data.splice(O*L.length),P}},I.flyweight=L.reduce((O,P,N,z)=>(Object.defineProperty(O,P,{get(){return this.data[this.index*L.length+N]},set(W){this.data[this.index*L.length+N]=W}}),O),{data:null,index:0}),{typeset:y,measure:b,loadFont:_}}const _1=()=>(self.performance||Date).now(),ok=rY();let j5;function KEe(n,e,t,i,s,o,l,u,d,p,_=!0){return _?qEe(n,e,t,i,s,o,l,u,d,p).then(null,y=>(j5||(console.warn("WebGL SDF generation failed, falling back to JS",y),j5=!0),Y5(n,e,t,i,s,o,l,u,d,p))):Y5(n,e,t,i,s,o,l,u,d,p)}const SM=[],JEe=5;let gN=0;function sY(){const n=_1();for(;SM.length&&_1()-n<JEe;)SM.shift()();gN=SM.length?setTimeout(sY,0):0}const qEe=(...n)=>new Promise((e,t)=>{SM.push(()=>{const i=_1();try{ok.webgl.generateIntoCanvas(...n),e({timing:_1()-i})}catch(s){t(s)}}),gN||(gN=setTimeout(sY,0))}),QEe=4,ZEe=2e3,X5={};let exe=0;function Y5(n,e,t,i,s,o,l,u,d,p){const _="TroikaTextSDFGenerator_JS_"+exe++%QEe;let y=X5[_];return y||(y=X5[_]={workerModule:G$({name:_,workerId:_,dependencies:[rY,_1],init(b,E){const C=b().javascript.generate;return function(...A){const I=E();return{textureData:C(...A),timing:E()-I}}},getTransferables(b){return[b.textureData.buffer]}}),requests:0,idleTimer:null}),y.requests++,clearTimeout(y.idleTimer),y.workerModule(n,e,t,i,s,o).then(({textureData:b,timing:E})=>{const C=_1(),A=new Uint8Array(b.length*4);for(let I=0;I<b.length;I++)A[I*4+p]=b[I];return ok.webglUtils.renderImageData(l,A,u,d,n,e,1<<3-p),E+=_1()-C,--y.requests===0&&(y.idleTimer=setTimeout(()=>{PEe(_)},ZEe)),{timing:E}})}function txe(n){n._warm||(ok.webgl.isSupported(n),n._warm=!0)}const nxe=ok.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function rxe(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(s){var o=e._bin,l=new Uint8Array(s);if(o.readASCII(l,0,4)=="ttcf"){var u=4;o.readUshort(l,u),u+=2,o.readUshort(l,u),u+=2;var d=o.readUint(l,u);u+=4;for(var p=[],_=0;_<d;_++){var y=o.readUint(l,u);u+=4,p.push(e._readFont(l,y))}return p}return[e._readFont(l,0)]},_readFont:function(s,o){var l=e._bin,u=o;l.readFixed(s,o),o+=4;var d=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2;for(var p=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],_={_data:s,_offset:u},y={},b=0;b<d;b++){var E=l.readASCII(s,o,4);o+=4,l.readUint(s,o),o+=4;var C=l.readUint(s,o);o+=4;var A=l.readUint(s,o);o+=4,y[E]={offset:C,length:A}}for(b=0;b<p.length;b++){var I=p[b];y[I]&&(_[I.trim()]=e[I.trim()].parse(s,y[I].offset,y[I].length,_))}return _},_tabOffset:function(s,o,l){for(var u=e._bin,d=u.readUshort(s,l+4),p=l+12,_=0;_<d;_++){var y=u.readASCII(s,p,4);p+=4,u.readUint(s,p),p+=4;var b=u.readUint(s,p);if(p+=4,u.readUint(s,p),p+=4,y==o)return b}return 0}};e._bin={readFixed:function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<8|s[o+3])/65540},readF2dot14:function(s,o){return e._bin.readShort(s,o)/16384},readInt:function(s,o){return e._bin._view(s).getInt32(o)},readInt8:function(s,o){return e._bin._view(s).getInt8(o)},readShort:function(s,o){return e._bin._view(s).getInt16(o)},readUshort:function(s,o){return e._bin._view(s).getUint16(o)},readUshorts:function(s,o,l){for(var u=[],d=0;d<l;d++)u.push(e._bin.readUshort(s,o+2*d));return u},readUint:function(s,o){return e._bin._view(s).getUint32(o)},readUint64:function(s,o){return 4294967296*e._bin.readUint(s,o)+e._bin.readUint(s,o+4)},readASCII:function(s,o,l){for(var u="",d=0;d<l;d++)u+=String.fromCharCode(s[o+d]);return u},readUnicode:function(s,o,l){for(var u="",d=0;d<l;d++){var p=s[o++]<<8|s[o++];u+=String.fromCharCode(p)}return u},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(s,o,l){var u=e._bin._tdec;return u&&o==0&&l==s.length?u.decode(s):e._bin.readASCII(s,o,l)},readBytes:function(s,o,l){for(var u=[],d=0;d<l;d++)u.push(s[o+d]);return u},readASCIIArray:function(s,o,l){for(var u=[],d=0;d<l;d++)u.push(String.fromCharCode(s[o+d]));return u},_view:function(s){return s._dataView||(s._dataView=s.buffer?new DataView(s.buffer,s.byteOffset,s.byteLength):new DataView(new Uint8Array(s).buffer))}},e._lctf={},e._lctf.parse=function(s,o,l,u,d){var p=e._bin,_={},y=o;p.readFixed(s,o),o+=4;var b=p.readUshort(s,o);o+=2;var E=p.readUshort(s,o);o+=2;var C=p.readUshort(s,o);return o+=2,_.scriptList=e._lctf.readScriptList(s,y+b),_.featureList=e._lctf.readFeatureList(s,y+E),_.lookupList=e._lctf.readLookupList(s,y+C,d),_},e._lctf.readLookupList=function(s,o,l){var u=e._bin,d=o,p=[],_=u.readUshort(s,o);o+=2;for(var y=0;y<_;y++){var b=u.readUshort(s,o);o+=2;var E=e._lctf.readLookupTable(s,d+b,l);p.push(E)}return p},e._lctf.readLookupTable=function(s,o,l){var u=e._bin,d=o,p={tabs:[]};p.ltype=u.readUshort(s,o),o+=2,p.flag=u.readUshort(s,o),o+=2;var _=u.readUshort(s,o);o+=2;for(var y=p.ltype,b=0;b<_;b++){var E=u.readUshort(s,o);o+=2;var C=l(s,y,d+E,p);p.tabs.push(C)}return p},e._lctf.numOfOnes=function(s){for(var o=0,l=0;l<32;l++)s>>>l&1&&o++;return o},e._lctf.readClassDef=function(s,o){var l=e._bin,u=[],d=l.readUshort(s,o);if(o+=2,d==1){var p=l.readUshort(s,o);o+=2;var _=l.readUshort(s,o);o+=2;for(var y=0;y<_;y++)u.push(p+y),u.push(p+y),u.push(l.readUshort(s,o)),o+=2}if(d==2){var b=l.readUshort(s,o);for(o+=2,y=0;y<b;y++)u.push(l.readUshort(s,o)),o+=2,u.push(l.readUshort(s,o)),o+=2,u.push(l.readUshort(s,o)),o+=2}return u},e._lctf.getInterval=function(s,o){for(var l=0;l<s.length;l+=3){var u=s[l],d=s[l+1];if(s[l+2],u<=o&&o<=d)return l}return-1},e._lctf.readCoverage=function(s,o){var l=e._bin,u={};u.fmt=l.readUshort(s,o),o+=2;var d=l.readUshort(s,o);return o+=2,u.fmt==1&&(u.tab=l.readUshorts(s,o,d)),u.fmt==2&&(u.tab=l.readUshorts(s,o,3*d)),u},e._lctf.coverageIndex=function(s,o){var l=s.tab;if(s.fmt==1)return l.indexOf(o);if(s.fmt==2){var u=e._lctf.getInterval(l,o);if(u!=-1)return l[u+2]+(o-l[u])}return-1},e._lctf.readFeatureList=function(s,o){var l=e._bin,u=o,d=[],p=l.readUshort(s,o);o+=2;for(var _=0;_<p;_++){var y=l.readASCII(s,o,4);o+=4;var b=l.readUshort(s,o);o+=2;var E=e._lctf.readFeatureTable(s,u+b);E.tag=y.trim(),d.push(E)}return d},e._lctf.readFeatureTable=function(s,o){var l=e._bin,u=o,d={},p=l.readUshort(s,o);o+=2,p>0&&(d.featureParams=u+p);var _=l.readUshort(s,o);o+=2,d.tab=[];for(var y=0;y<_;y++)d.tab.push(l.readUshort(s,o+2*y));return d},e._lctf.readScriptList=function(s,o){var l=e._bin,u=o,d={},p=l.readUshort(s,o);o+=2;for(var _=0;_<p;_++){var y=l.readASCII(s,o,4);o+=4;var b=l.readUshort(s,o);o+=2,d[y.trim()]=e._lctf.readScriptTable(s,u+b)}return d},e._lctf.readScriptTable=function(s,o){var l=e._bin,u=o,d={},p=l.readUshort(s,o);o+=2,d.default=e._lctf.readLangSysTable(s,u+p);var _=l.readUshort(s,o);o+=2;for(var y=0;y<_;y++){var b=l.readASCII(s,o,4);o+=4;var E=l.readUshort(s,o);o+=2,d[b.trim()]=e._lctf.readLangSysTable(s,u+E)}return d},e._lctf.readLangSysTable=function(s,o){var l=e._bin,u={};l.readUshort(s,o),o+=2,u.reqFeature=l.readUshort(s,o),o+=2;var d=l.readUshort(s,o);return o+=2,u.features=l.readUshorts(s,o,d),u},e.CFF={},e.CFF.parse=function(s,o,l){var u=e._bin;(s=new Uint8Array(s.buffer,o,l))[o=0],s[++o],s[++o],s[++o],o++;var d=[];o=e.CFF.readIndex(s,o,d);for(var p=[],_=0;_<d.length-1;_++)p.push(u.readASCII(s,o+d[_],d[_+1]-d[_]));o+=d[d.length-1];var y=[];o=e.CFF.readIndex(s,o,y);var b=[];for(_=0;_<y.length-1;_++)b.push(e.CFF.readDict(s,o+y[_],o+y[_+1]));o+=y[y.length-1];var E=b[0],C=[];o=e.CFF.readIndex(s,o,C);var A=[];for(_=0;_<C.length-1;_++)A.push(u.readASCII(s,o+C[_],C[_+1]-C[_]));if(o+=C[C.length-1],e.CFF.readSubrs(s,o,E),E.CharStrings){o=E.CharStrings,C=[],o=e.CFF.readIndex(s,o,C);var I=[];for(_=0;_<C.length-1;_++)I.push(u.readBytes(s,o+C[_],C[_+1]-C[_]));E.CharStrings=I}if(E.ROS){o=E.FDArray;var L=[];for(o=e.CFF.readIndex(s,o,L),E.FDArray=[],_=0;_<L.length-1;_++){var O=e.CFF.readDict(s,o+L[_],o+L[_+1]);e.CFF._readFDict(s,O,A),E.FDArray.push(O)}o+=L[L.length-1],o=E.FDSelect,E.FDSelect=[];var P=s[o];if(o++,P!=3)throw P;var N=u.readUshort(s,o);for(o+=2,_=0;_<N+1;_++)E.FDSelect.push(u.readUshort(s,o),s[o+2]),o+=3}return E.Encoding&&(E.Encoding=e.CFF.readEncoding(s,E.Encoding,E.CharStrings.length)),E.charset&&(E.charset=e.CFF.readCharset(s,E.charset,E.CharStrings.length)),e.CFF._readFDict(s,E,A),E},e.CFF._readFDict=function(s,o,l){var u;for(var d in o.Private&&(u=o.Private[1],o.Private=e.CFF.readDict(s,u,u+o.Private[0]),o.Private.Subrs&&e.CFF.readSubrs(s,u+o.Private.Subrs,o.Private)),o)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(d)!=-1&&(o[d]=l[o[d]-426+35])},e.CFF.readSubrs=function(s,o,l){var u=e._bin,d=[];o=e.CFF.readIndex(s,o,d);var p,_=d.length;p=_<1240?107:_<33900?1131:32768,l.Bias=p,l.Subrs=[];for(var y=0;y<d.length-1;y++)l.Subrs.push(u.readBytes(s,o+d[y],d[y+1]-d[y]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(s,o){for(var l=0;l<s.charset.length;l++)if(s.charset[l]==o)return l;return-1},e.CFF.glyphBySE=function(s,o){return o<0||o>255?-1:e.CFF.glyphByUnicode(s,e.CFF.tableSE[o])},e.CFF.readEncoding=function(s,o,l){e._bin;var u=[".notdef"],d=s[o];if(o++,d!=0)throw"error: unknown encoding format: "+d;var p=s[o];o++;for(var _=0;_<p;_++)u.push(s[o+_]);return u},e.CFF.readCharset=function(s,o,l){var u=e._bin,d=[".notdef"],p=s[o];if(o++,p==0)for(var _=0;_<l;_++){var y=u.readUshort(s,o);o+=2,d.push(y)}else{if(p!=1&&p!=2)throw"error: format: "+p;for(;d.length<l;){y=u.readUshort(s,o),o+=2;var b=0;for(p==1?(b=s[o],o++):(b=u.readUshort(s,o),o+=2),_=0;_<=b;_++)d.push(y),y++}}return d},e.CFF.readIndex=function(s,o,l){var u=e._bin,d=u.readUshort(s,o)+1,p=s[o+=2];if(o++,p==1)for(var _=0;_<d;_++)l.push(s[o+_]);else if(p==2)for(_=0;_<d;_++)l.push(u.readUshort(s,o+2*_));else if(p==3)for(_=0;_<d;_++)l.push(16777215&u.readUint(s,o+3*_-1));else if(d!=1)throw"unsupported offset size: "+p+", count: "+d;return(o+=d*p)-1},e.CFF.getCharString=function(s,o,l){var u=e._bin,d=s[o],p=s[o+1];s[o+2],s[o+3],s[o+4];var _=1,y=null,b=null;d<=20&&(y=d,_=1),d==12&&(y=100*d+p,_=2),21<=d&&d<=27&&(y=d,_=1),d==28&&(b=u.readShort(s,o+1),_=3),29<=d&&d<=31&&(y=d,_=1),32<=d&&d<=246&&(b=d-139,_=1),247<=d&&d<=250&&(b=256*(d-247)+p+108,_=2),251<=d&&d<=254&&(b=256*-(d-251)-p-108,_=2),d==255&&(b=u.readInt(s,o+1)/65535,_=5),l.val=b??"o"+y,l.size=_},e.CFF.readCharString=function(s,o,l){for(var u=o+l,d=e._bin,p=[];o<u;){var _=s[o],y=s[o+1];s[o+2],s[o+3],s[o+4];var b=1,E=null,C=null;_<=20&&(E=_,b=1),_==12&&(E=100*_+y,b=2),_!=19&&_!=20||(E=_,b=2),21<=_&&_<=27&&(E=_,b=1),_==28&&(C=d.readShort(s,o+1),b=3),29<=_&&_<=31&&(E=_,b=1),32<=_&&_<=246&&(C=_-139,b=1),247<=_&&_<=250&&(C=256*(_-247)+y+108,b=2),251<=_&&_<=254&&(C=256*-(_-251)-y-108,b=2),_==255&&(C=d.readInt(s,o+1)/65535,b=5),p.push(C??"o"+E),o+=b}return p},e.CFF.readDict=function(s,o,l){for(var u=e._bin,d={},p=[];o<l;){var _=s[o],y=s[o+1];s[o+2],s[o+3],s[o+4];var b=1,E=null,C=null;if(_==28&&(C=u.readShort(s,o+1),b=3),_==29&&(C=u.readInt(s,o+1),b=5),32<=_&&_<=246&&(C=_-139,b=1),247<=_&&_<=250&&(C=256*(_-247)+y+108,b=2),251<=_&&_<=254&&(C=256*-(_-251)-y-108,b=2),_==255)throw C=u.readInt(s,o+1)/65535,b=5,"unknown number";if(_==30){var A=[];for(b=1;;){var I=s[o+b];b++;var L=I>>4,O=15&I;if(L!=15&&A.push(L),O!=15&&A.push(O),O==15)break}for(var P="",N=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],z=0;z<A.length;z++)P+=N[A[z]];C=parseFloat(P)}_<=21&&(E=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][_],b=1,_==12&&(E=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][y],b=2)),E!=null?(d[E]=p.length==1?p[0]:p,p=[]):p.push(C),o+=b}return d},e.cmap={},e.cmap.parse=function(s,o,l){s=new Uint8Array(s.buffer,o,l),o=0;var u=e._bin,d={};u.readUshort(s,o),o+=2;var p=u.readUshort(s,o);o+=2;var _=[];d.tables=[];for(var y=0;y<p;y++){var b=u.readUshort(s,o);o+=2;var E=u.readUshort(s,o);o+=2;var C=u.readUint(s,o);o+=4;var A="p"+b+"e"+E,I=_.indexOf(C);if(I==-1){var L;I=d.tables.length,_.push(C);var O=u.readUshort(s,C);O==0?L=e.cmap.parse0(s,C):O==4?L=e.cmap.parse4(s,C):O==6?L=e.cmap.parse6(s,C):O==12?L=e.cmap.parse12(s,C):console.debug("unknown format: "+O,b,E,C),d.tables.push(L)}if(d[A]!=null)throw"multiple tables for one platform+encoding";d[A]=I}return d},e.cmap.parse0=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2;var d=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2,u.map=[];for(var p=0;p<d-6;p++)u.map.push(s[o+p]);return u},e.cmap.parse4=function(s,o){var l=e._bin,u=o,d={};d.format=l.readUshort(s,o),o+=2;var p=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2;var _=l.readUshort(s,o);o+=2;var y=_/2;d.searchRange=l.readUshort(s,o),o+=2,d.entrySelector=l.readUshort(s,o),o+=2,d.rangeShift=l.readUshort(s,o),o+=2,d.endCount=l.readUshorts(s,o,y),o+=2*y,o+=2,d.startCount=l.readUshorts(s,o,y),o+=2*y,d.idDelta=[];for(var b=0;b<y;b++)d.idDelta.push(l.readShort(s,o)),o+=2;for(d.idRangeOffset=l.readUshorts(s,o,y),o+=2*y,d.glyphIdArray=[];o<u+p;)d.glyphIdArray.push(l.readUshort(s,o)),o+=2;return d},e.cmap.parse6=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,u.firstCode=l.readUshort(s,o),o+=2;var d=l.readUshort(s,o);o+=2,u.glyphIdArray=[];for(var p=0;p<d;p++)u.glyphIdArray.push(l.readUshort(s,o)),o+=2;return u},e.cmap.parse12=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2,o+=2,l.readUint(s,o),o+=4,l.readUint(s,o),o+=4;var d=l.readUint(s,o);o+=4,u.groups=[];for(var p=0;p<d;p++){var _=o+12*p,y=l.readUint(s,_+0),b=l.readUint(s,_+4),E=l.readUint(s,_+8);u.groups.push([y,b,E])}return u},e.glyf={},e.glyf.parse=function(s,o,l,u){for(var d=[],p=0;p<u.maxp.numGlyphs;p++)d.push(null);return d},e.glyf._parseGlyf=function(s,o){var l=e._bin,u=s._data,d=e._tabOffset(u,"glyf",s._offset)+s.loca[o];if(s.loca[o]==s.loca[o+1])return null;var p={};if(p.noc=l.readShort(u,d),d+=2,p.xMin=l.readShort(u,d),d+=2,p.yMin=l.readShort(u,d),d+=2,p.xMax=l.readShort(u,d),d+=2,p.yMax=l.readShort(u,d),d+=2,p.xMin>=p.xMax||p.yMin>=p.yMax)return null;if(p.noc>0){p.endPts=[];for(var _=0;_<p.noc;_++)p.endPts.push(l.readUshort(u,d)),d+=2;var y=l.readUshort(u,d);if(d+=2,u.length-d<y)return null;p.instructions=l.readBytes(u,d,y),d+=y;var b=p.endPts[p.noc-1]+1;for(p.flags=[],_=0;_<b;_++){var E=u[d];if(d++,p.flags.push(E),(8&E)!=0){var C=u[d];d++;for(var A=0;A<C;A++)p.flags.push(E),_++}}for(p.xs=[],_=0;_<b;_++){var I=(2&p.flags[_])!=0,L=(16&p.flags[_])!=0;I?(p.xs.push(L?u[d]:-u[d]),d++):L?p.xs.push(0):(p.xs.push(l.readShort(u,d)),d+=2)}for(p.ys=[],_=0;_<b;_++)I=(4&p.flags[_])!=0,L=(32&p.flags[_])!=0,I?(p.ys.push(L?u[d]:-u[d]),d++):L?p.ys.push(0):(p.ys.push(l.readShort(u,d)),d+=2);var O=0,P=0;for(_=0;_<b;_++)O+=p.xs[_],P+=p.ys[_],p.xs[_]=O,p.ys[_]=P}else{var N;p.parts=[];do{N=l.readUshort(u,d),d+=2;var z={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(p.parts.push(z),z.glyphIndex=l.readUshort(u,d),d+=2,1&N){var W=l.readShort(u,d);d+=2;var H=l.readShort(u,d);d+=2}else W=l.readInt8(u,d),d++,H=l.readInt8(u,d),d++;2&N?(z.m.tx=W,z.m.ty=H):(z.p1=W,z.p2=H),8&N?(z.m.a=z.m.d=l.readF2dot14(u,d),d+=2):64&N?(z.m.a=l.readF2dot14(u,d),d+=2,z.m.d=l.readF2dot14(u,d),d+=2):128&N&&(z.m.a=l.readF2dot14(u,d),d+=2,z.m.b=l.readF2dot14(u,d),d+=2,z.m.c=l.readF2dot14(u,d),d+=2,z.m.d=l.readF2dot14(u,d),d+=2)}while(32&N);if(256&N){var U=l.readUshort(u,d);for(d+=2,p.instr=[],_=0;_<U;_++)p.instr.push(u[d]),d++}}return p},e.GPOS={},e.GPOS.parse=function(s,o,l,u){return e._lctf.parse(s,o,l,u,e.GPOS.subt)},e.GPOS.subt=function(s,o,l,u){var d=e._bin,p=l,_={};if(_.fmt=d.readUshort(s,l),l+=2,o==1||o==2||o==3||o==7||o==8&&_.fmt<=2){var y=d.readUshort(s,l);l+=2,_.coverage=e._lctf.readCoverage(s,y+p)}if(o==1&&_.fmt==1){var b=d.readUshort(s,l);l+=2;var E=e._lctf.numOfOnes(b);b!=0&&(_.pos=e.GPOS.readValueRecord(s,l,b))}else if(o==2&&_.fmt>=1&&_.fmt<=2){b=d.readUshort(s,l),l+=2;var C=d.readUshort(s,l);l+=2,E=e._lctf.numOfOnes(b);var A=e._lctf.numOfOnes(C);if(_.fmt==1){_.pairsets=[];var I=d.readUshort(s,l);l+=2;for(var L=0;L<I;L++){var O=p+d.readUshort(s,l);l+=2;var P=d.readUshort(s,O);O+=2;for(var N=[],z=0;z<P;z++){var W=d.readUshort(s,O);O+=2,b!=0&&(le=e.GPOS.readValueRecord(s,O,b),O+=2*E),C!=0&&(ge=e.GPOS.readValueRecord(s,O,C),O+=2*A),N.push({gid2:W,val1:le,val2:ge})}_.pairsets.push(N)}}if(_.fmt==2){var H=d.readUshort(s,l);l+=2;var U=d.readUshort(s,l);l+=2;var Q=d.readUshort(s,l);l+=2;var ne=d.readUshort(s,l);for(l+=2,_.classDef1=e._lctf.readClassDef(s,p+H),_.classDef2=e._lctf.readClassDef(s,p+U),_.matrix=[],L=0;L<Q;L++){var oe=[];for(z=0;z<ne;z++){var le=null,ge=null;b!=0&&(le=e.GPOS.readValueRecord(s,l,b),l+=2*E),C!=0&&(ge=e.GPOS.readValueRecord(s,l,C),l+=2*A),oe.push({val1:le,val2:ge})}_.matrix.push(oe)}}}else{if(o==9&&_.fmt==1){var ce=d.readUshort(s,l);l+=2;var pe=d.readUint(s,l);if(l+=4,u.ltype==9)u.ltype=ce;else if(u.ltype!=ce)throw"invalid extension substitution";return e.GPOS.subt(s,u.ltype,p+pe)}console.debug("unsupported GPOS table LookupType",o,"format",_.fmt)}return _},e.GPOS.readValueRecord=function(s,o,l){var u=e._bin,d=[];return d.push(1&l?u.readShort(s,o):0),o+=1&l?2:0,d.push(2&l?u.readShort(s,o):0),o+=2&l?2:0,d.push(4&l?u.readShort(s,o):0),o+=4&l?2:0,d.push(8&l?u.readShort(s,o):0),o+=8&l?2:0,d},e.GSUB={},e.GSUB.parse=function(s,o,l,u){return e._lctf.parse(s,o,l,u,e.GSUB.subt)},e.GSUB.subt=function(s,o,l,u){var d=e._bin,p=l,_={};if(_.fmt=d.readUshort(s,l),l+=2,o!=1&&o!=4&&o!=5&&o!=6)return null;if(o==1||o==4||o==5&&_.fmt<=2||o==6&&_.fmt<=2){var y=d.readUshort(s,l);l+=2,_.coverage=e._lctf.readCoverage(s,p+y)}if(o==1&&_.fmt>=1&&_.fmt<=2){if(_.fmt==1)_.delta=d.readShort(s,l),l+=2;else if(_.fmt==2){var b=d.readUshort(s,l);l+=2,_.newg=d.readUshorts(s,l,b),l+=2*_.newg.length}}else if(o==4){_.vals=[],b=d.readUshort(s,l),l+=2;for(var E=0;E<b;E++){var C=d.readUshort(s,l);l+=2,_.vals.push(e.GSUB.readLigatureSet(s,p+C))}}else if(o==5&&_.fmt==2){if(_.fmt==2){var A=d.readUshort(s,l);l+=2,_.cDef=e._lctf.readClassDef(s,p+A),_.scset=[];var I=d.readUshort(s,l);for(l+=2,E=0;E<I;E++){var L=d.readUshort(s,l);l+=2,_.scset.push(L==0?null:e.GSUB.readSubClassSet(s,p+L))}}}else if(o==6&&_.fmt==3){if(_.fmt==3){for(E=0;E<3;E++){b=d.readUshort(s,l),l+=2;for(var O=[],P=0;P<b;P++)O.push(e._lctf.readCoverage(s,p+d.readUshort(s,l+2*P)));l+=2*b,E==0&&(_.backCvg=O),E==1&&(_.inptCvg=O),E==2&&(_.ahedCvg=O)}b=d.readUshort(s,l),l+=2,_.lookupRec=e.GSUB.readSubstLookupRecords(s,l,b)}}else{if(o==7&&_.fmt==1){var N=d.readUshort(s,l);l+=2;var z=d.readUint(s,l);if(l+=4,u.ltype==9)u.ltype=N;else if(u.ltype!=N)throw"invalid extension substitution";return e.GSUB.subt(s,u.ltype,p+z)}console.debug("unsupported GSUB table LookupType",o,"format",_.fmt)}return _},e.GSUB.readSubClassSet=function(s,o){var l=e._bin.readUshort,u=o,d=[],p=l(s,o);o+=2;for(var _=0;_<p;_++){var y=l(s,o);o+=2,d.push(e.GSUB.readSubClassRule(s,u+y))}return d},e.GSUB.readSubClassRule=function(s,o){var l=e._bin.readUshort,u={},d=l(s,o),p=l(s,o+=2);o+=2,u.input=[];for(var _=0;_<d-1;_++)u.input.push(l(s,o)),o+=2;return u.substLookupRecords=e.GSUB.readSubstLookupRecords(s,o,p),u},e.GSUB.readSubstLookupRecords=function(s,o,l){for(var u=e._bin.readUshort,d=[],p=0;p<l;p++)d.push(u(s,o),u(s,o+2)),o+=4;return d},e.GSUB.readChainSubClassSet=function(s,o){var l=e._bin,u=o,d=[],p=l.readUshort(s,o);o+=2;for(var _=0;_<p;_++){var y=l.readUshort(s,o);o+=2,d.push(e.GSUB.readChainSubClassRule(s,u+y))}return d},e.GSUB.readChainSubClassRule=function(s,o){for(var l=e._bin,u={},d=["backtrack","input","lookahead"],p=0;p<d.length;p++){var _=l.readUshort(s,o);o+=2,p==1&&_--,u[d[p]]=l.readUshorts(s,o,_),o+=2*u[d[p]].length}return _=l.readUshort(s,o),o+=2,u.subst=l.readUshorts(s,o,2*_),o+=2*u.subst.length,u},e.GSUB.readLigatureSet=function(s,o){var l=e._bin,u=o,d=[],p=l.readUshort(s,o);o+=2;for(var _=0;_<p;_++){var y=l.readUshort(s,o);o+=2,d.push(e.GSUB.readLigature(s,u+y))}return d},e.GSUB.readLigature=function(s,o){var l=e._bin,u={chain:[]};u.nglyph=l.readUshort(s,o),o+=2;var d=l.readUshort(s,o);o+=2;for(var p=0;p<d-1;p++)u.chain.push(l.readUshort(s,o)),o+=2;return u},e.head={},e.head.parse=function(s,o,l){var u=e._bin,d={};return u.readFixed(s,o),o+=4,d.fontRevision=u.readFixed(s,o),o+=4,u.readUint(s,o),o+=4,u.readUint(s,o),o+=4,d.flags=u.readUshort(s,o),o+=2,d.unitsPerEm=u.readUshort(s,o),o+=2,d.created=u.readUint64(s,o),o+=8,d.modified=u.readUint64(s,o),o+=8,d.xMin=u.readShort(s,o),o+=2,d.yMin=u.readShort(s,o),o+=2,d.xMax=u.readShort(s,o),o+=2,d.yMax=u.readShort(s,o),o+=2,d.macStyle=u.readUshort(s,o),o+=2,d.lowestRecPPEM=u.readUshort(s,o),o+=2,d.fontDirectionHint=u.readShort(s,o),o+=2,d.indexToLocFormat=u.readShort(s,o),o+=2,d.glyphDataFormat=u.readShort(s,o),o+=2,d},e.hhea={},e.hhea.parse=function(s,o,l){var u=e._bin,d={};return u.readFixed(s,o),o+=4,d.ascender=u.readShort(s,o),o+=2,d.descender=u.readShort(s,o),o+=2,d.lineGap=u.readShort(s,o),o+=2,d.advanceWidthMax=u.readUshort(s,o),o+=2,d.minLeftSideBearing=u.readShort(s,o),o+=2,d.minRightSideBearing=u.readShort(s,o),o+=2,d.xMaxExtent=u.readShort(s,o),o+=2,d.caretSlopeRise=u.readShort(s,o),o+=2,d.caretSlopeRun=u.readShort(s,o),o+=2,d.caretOffset=u.readShort(s,o),o+=2,o+=8,d.metricDataFormat=u.readShort(s,o),o+=2,d.numberOfHMetrics=u.readUshort(s,o),o+=2,d},e.hmtx={},e.hmtx.parse=function(s,o,l,u){for(var d=e._bin,p={aWidth:[],lsBearing:[]},_=0,y=0,b=0;b<u.maxp.numGlyphs;b++)b<u.hhea.numberOfHMetrics&&(_=d.readUshort(s,o),o+=2,y=d.readShort(s,o),o+=2),p.aWidth.push(_),p.lsBearing.push(y);return p},e.kern={},e.kern.parse=function(s,o,l,u){var d=e._bin,p=d.readUshort(s,o);if(o+=2,p==1)return e.kern.parseV1(s,o-2,l,u);var _=d.readUshort(s,o);o+=2;for(var y={glyph1:[],rval:[]},b=0;b<_;b++){o+=2,l=d.readUshort(s,o),o+=2;var E=d.readUshort(s,o);o+=2;var C=E>>>8;if((C&=15)!=0)throw"unknown kern table format: "+C;o=e.kern.readFormat0(s,o,y)}return y},e.kern.parseV1=function(s,o,l,u){var d=e._bin;d.readFixed(s,o),o+=4;var p=d.readUint(s,o);o+=4;for(var _={glyph1:[],rval:[]},y=0;y<p;y++){d.readUint(s,o),o+=4;var b=d.readUshort(s,o);o+=2,d.readUshort(s,o),o+=2;var E=b>>>8;if((E&=15)!=0)throw"unknown kern table format: "+E;o=e.kern.readFormat0(s,o,_)}return _},e.kern.readFormat0=function(s,o,l){var u=e._bin,d=-1,p=u.readUshort(s,o);o+=2,u.readUshort(s,o),o+=2,u.readUshort(s,o),o+=2,u.readUshort(s,o),o+=2;for(var _=0;_<p;_++){var y=u.readUshort(s,o);o+=2;var b=u.readUshort(s,o);o+=2;var E=u.readShort(s,o);o+=2,y!=d&&(l.glyph1.push(y),l.rval.push({glyph2:[],vals:[]}));var C=l.rval[l.rval.length-1];C.glyph2.push(b),C.vals.push(E),d=y}return o},e.loca={},e.loca.parse=function(s,o,l,u){var d=e._bin,p=[],_=u.head.indexToLocFormat,y=u.maxp.numGlyphs+1;if(_==0)for(var b=0;b<y;b++)p.push(d.readUshort(s,o+(b<<1))<<1);if(_==1)for(b=0;b<y;b++)p.push(d.readUint(s,o+(b<<2)));return p},e.maxp={},e.maxp.parse=function(s,o,l){var u=e._bin,d={},p=u.readUint(s,o);return o+=4,d.numGlyphs=u.readUshort(s,o),o+=2,p==65536&&(d.maxPoints=u.readUshort(s,o),o+=2,d.maxContours=u.readUshort(s,o),o+=2,d.maxCompositePoints=u.readUshort(s,o),o+=2,d.maxCompositeContours=u.readUshort(s,o),o+=2,d.maxZones=u.readUshort(s,o),o+=2,d.maxTwilightPoints=u.readUshort(s,o),o+=2,d.maxStorage=u.readUshort(s,o),o+=2,d.maxFunctionDefs=u.readUshort(s,o),o+=2,d.maxInstructionDefs=u.readUshort(s,o),o+=2,d.maxStackElements=u.readUshort(s,o),o+=2,d.maxSizeOfInstructions=u.readUshort(s,o),o+=2,d.maxComponentElements=u.readUshort(s,o),o+=2,d.maxComponentDepth=u.readUshort(s,o),o+=2),d},e.name={},e.name.parse=function(s,o,l){var u=e._bin,d={};u.readUshort(s,o),o+=2;var p=u.readUshort(s,o);o+=2,u.readUshort(s,o);for(var _,y=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],b=o+=2,E=0;E<p;E++){var C=u.readUshort(s,o);o+=2;var A=u.readUshort(s,o);o+=2;var I=u.readUshort(s,o);o+=2;var L=u.readUshort(s,o);o+=2;var O=u.readUshort(s,o);o+=2;var P=u.readUshort(s,o);o+=2;var N,z=y[L],W=b+12*p+P;if(C==0)N=u.readUnicode(s,W,O/2);else if(C==3&&A==0)N=u.readUnicode(s,W,O/2);else if(A==0)N=u.readASCII(s,W,O);else if(A==1)N=u.readUnicode(s,W,O/2);else if(A==3)N=u.readUnicode(s,W,O/2);else{if(C!=1)throw"unknown encoding "+A+", platformID: "+C;N=u.readASCII(s,W,O),console.debug("reading unknown MAC encoding "+A+" as ASCII")}var H="p"+C+","+I.toString(16);d[H]==null&&(d[H]={}),d[H][z!==void 0?z:L]=N,d[H]._lang=I}for(var U in d)if(d[U].postScriptName!=null&&d[U]._lang==1033)return d[U];for(var U in d)if(d[U].postScriptName!=null&&d[U]._lang==0)return d[U];for(var U in d)if(d[U].postScriptName!=null&&d[U]._lang==3084)return d[U];for(var U in d)if(d[U].postScriptName!=null)return d[U];for(var U in d){_=U;break}return console.debug("returning name table with languageID "+d[_]._lang),d[_]},e["OS/2"]={},e["OS/2"].parse=function(s,o,l){var u=e._bin.readUshort(s,o);o+=2;var d={};if(u==0)e["OS/2"].version0(s,o,d);else if(u==1)e["OS/2"].version1(s,o,d);else if(u==2||u==3||u==4)e["OS/2"].version2(s,o,d);else{if(u!=5)throw"unknown OS/2 table version: "+u;e["OS/2"].version5(s,o,d)}return d},e["OS/2"].version0=function(s,o,l){var u=e._bin;return l.xAvgCharWidth=u.readShort(s,o),o+=2,l.usWeightClass=u.readUshort(s,o),o+=2,l.usWidthClass=u.readUshort(s,o),o+=2,l.fsType=u.readUshort(s,o),o+=2,l.ySubscriptXSize=u.readShort(s,o),o+=2,l.ySubscriptYSize=u.readShort(s,o),o+=2,l.ySubscriptXOffset=u.readShort(s,o),o+=2,l.ySubscriptYOffset=u.readShort(s,o),o+=2,l.ySuperscriptXSize=u.readShort(s,o),o+=2,l.ySuperscriptYSize=u.readShort(s,o),o+=2,l.ySuperscriptXOffset=u.readShort(s,o),o+=2,l.ySuperscriptYOffset=u.readShort(s,o),o+=2,l.yStrikeoutSize=u.readShort(s,o),o+=2,l.yStrikeoutPosition=u.readShort(s,o),o+=2,l.sFamilyClass=u.readShort(s,o),o+=2,l.panose=u.readBytes(s,o,10),o+=10,l.ulUnicodeRange1=u.readUint(s,o),o+=4,l.ulUnicodeRange2=u.readUint(s,o),o+=4,l.ulUnicodeRange3=u.readUint(s,o),o+=4,l.ulUnicodeRange4=u.readUint(s,o),o+=4,l.achVendID=[u.readInt8(s,o),u.readInt8(s,o+1),u.readInt8(s,o+2),u.readInt8(s,o+3)],o+=4,l.fsSelection=u.readUshort(s,o),o+=2,l.usFirstCharIndex=u.readUshort(s,o),o+=2,l.usLastCharIndex=u.readUshort(s,o),o+=2,l.sTypoAscender=u.readShort(s,o),o+=2,l.sTypoDescender=u.readShort(s,o),o+=2,l.sTypoLineGap=u.readShort(s,o),o+=2,l.usWinAscent=u.readUshort(s,o),o+=2,l.usWinDescent=u.readUshort(s,o),o+=2},e["OS/2"].version1=function(s,o,l){var u=e._bin;return o=e["OS/2"].version0(s,o,l),l.ulCodePageRange1=u.readUint(s,o),o+=4,l.ulCodePageRange2=u.readUint(s,o),o+=4},e["OS/2"].version2=function(s,o,l){var u=e._bin;return o=e["OS/2"].version1(s,o,l),l.sxHeight=u.readShort(s,o),o+=2,l.sCapHeight=u.readShort(s,o),o+=2,l.usDefault=u.readUshort(s,o),o+=2,l.usBreak=u.readUshort(s,o),o+=2,l.usMaxContext=u.readUshort(s,o),o+=2},e["OS/2"].version5=function(s,o,l){var u=e._bin;return o=e["OS/2"].version2(s,o,l),l.usLowerOpticalPointSize=u.readUshort(s,o),o+=2,l.usUpperOpticalPointSize=u.readUshort(s,o),o+=2},e.post={},e.post.parse=function(s,o,l){var u=e._bin,d={};return d.version=u.readFixed(s,o),o+=4,d.italicAngle=u.readFixed(s,o),o+=4,d.underlinePosition=u.readShort(s,o),o+=2,d.underlineThickness=u.readShort(s,o),o+=2,d},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(s,o){var l=s.cmap,u=-1;if(l.p0e4!=null?u=l.p0e4:l.p3e1!=null?u=l.p3e1:l.p1e0!=null?u=l.p1e0:l.p0e3!=null&&(u=l.p0e3),u==-1)throw"no familiar platform and encoding!";var d=l.tables[u];if(d.format==0)return o>=d.map.length?0:d.map[o];if(d.format==4){for(var p=-1,_=0;_<d.endCount.length;_++)if(o<=d.endCount[_]){p=_;break}return p==-1||d.startCount[p]>o?0:65535&(d.idRangeOffset[p]!=0?d.glyphIdArray[o-d.startCount[p]+(d.idRangeOffset[p]>>1)-(d.idRangeOffset.length-p)]:o+d.idDelta[p])}if(d.format==12){if(o>d.groups[d.groups.length-1][1])return 0;for(_=0;_<d.groups.length;_++){var y=d.groups[_];if(y[0]<=o&&o<=y[1])return y[2]+(o-y[0])}return 0}throw"unknown cmap table format "+d.format},e.U.glyphToPath=function(s,o){var l={cmds:[],crds:[]};if(s.SVG&&s.SVG.entries[o]){var u=s.SVG.entries[o];return u==null?l:(typeof u=="string"&&(u=e.SVG.toPath(u),s.SVG.entries[o]=u),u)}if(s.CFF){var d={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:s.CFF.Private?s.CFF.Private.defaultWidthX:0,open:!1},p=s.CFF,_=s.CFF.Private;if(p.ROS){for(var y=0;p.FDSelect[y+2]<=o;)y+=2;_=p.FDArray[p.FDSelect[y+1]].Private}e.U._drawCFF(s.CFF.CharStrings[o],d,p,_,l)}else s.glyf&&e.U._drawGlyf(o,s,l);return l},e.U._drawGlyf=function(s,o,l){var u=o.glyf[s];u==null&&(u=o.glyf[s]=e.glyf._parseGlyf(o,s)),u!=null&&(u.noc>-1?e.U._simpleGlyph(u,l):e.U._compoGlyph(u,o,l))},e.U._simpleGlyph=function(s,o){for(var l=0;l<s.noc;l++){for(var u=l==0?0:s.endPts[l-1]+1,d=s.endPts[l],p=u;p<=d;p++){var _=p==u?d:p-1,y=p==d?u:p+1,b=1&s.flags[p],E=1&s.flags[_],C=1&s.flags[y],A=s.xs[p],I=s.ys[p];if(p==u)if(b){if(!E){e.U.P.moveTo(o,A,I);continue}e.U.P.moveTo(o,s.xs[_],s.ys[_])}else E?e.U.P.moveTo(o,s.xs[_],s.ys[_]):e.U.P.moveTo(o,(s.xs[_]+A)/2,(s.ys[_]+I)/2);b?E&&e.U.P.lineTo(o,A,I):C?e.U.P.qcurveTo(o,A,I,s.xs[y],s.ys[y]):e.U.P.qcurveTo(o,A,I,(A+s.xs[y])/2,(I+s.ys[y])/2)}e.U.P.closePath(o)}},e.U._compoGlyph=function(s,o,l){for(var u=0;u<s.parts.length;u++){var d={cmds:[],crds:[]},p=s.parts[u];e.U._drawGlyf(p.glyphIndex,o,d);for(var _=p.m,y=0;y<d.crds.length;y+=2){var b=d.crds[y],E=d.crds[y+1];l.crds.push(b*_.a+E*_.b+_.tx),l.crds.push(b*_.c+E*_.d+_.ty)}for(y=0;y<d.cmds.length;y++)l.cmds.push(d.cmds[y])}},e.U._getGlyphClass=function(s,o){var l=e._lctf.getInterval(o,s);return l==-1?0:o[l+2]},e.U.getPairAdjustment=function(s,o,l){var u=!1;if(s.GPOS)for(var d=s.GPOS,p=d.lookupList,_=d.featureList,y=[],b=0;b<_.length;b++){var E=_[b];if(E.tag=="kern"){u=!0;for(var C=0;C<E.tab.length;C++)if(!y[E.tab[C]]){y[E.tab[C]]=!0;for(var A=p[E.tab[C]],I=0;I<A.tabs.length;I++)if(A.tabs[I]!=null){var L,O=A.tabs[I];if((!O.coverage||(L=e._lctf.coverageIndex(O.coverage,o))!=-1)&&A.ltype!=1&&A.ltype==2){var P=null;if(O.fmt==1){var N=O.pairsets[L];for(b=0;b<N.length;b++)N[b].gid2==l&&(P=N[b])}else if(O.fmt==2){var z=e.U._getGlyphClass(o,O.classDef1),W=e.U._getGlyphClass(l,O.classDef2);P=O.matrix[z][W]}if(P){var H=0;return P.val1&&P.val1[2]&&(H+=P.val1[2]),P.val2&&P.val2[0]&&(H+=P.val2[0]),H}}}}}}if(s.kern&&!u){var U=s.kern.glyph1.indexOf(o);if(U!=-1){var Q=s.kern.rval[U].glyph2.indexOf(l);if(Q!=-1)return s.kern.rval[U].vals[Q]}}return 0},e.U._applySubs=function(s,o,l,u){for(var d=s.length-o-1,p=0;p<l.tabs.length;p++)if(l.tabs[p]!=null){var _,y=l.tabs[p];if(!y.coverage||(_=e._lctf.coverageIndex(y.coverage,s[o]))!=-1){if(l.ltype==1)s[o],y.fmt==1?s[o]=s[o]+y.delta:s[o]=y.newg[_];else if(l.ltype==4)for(var b=y.vals[_],E=0;E<b.length;E++){var C=b[E],A=C.chain.length;if(!(A>d)){for(var I=!0,L=0,O=0;O<A;O++){for(;s[o+L+(1+O)]==-1;)L++;C.chain[O]!=s[o+L+(1+O)]&&(I=!1)}if(I){for(s[o]=C.nglyph,O=0;O<A+L;O++)s[o+O+1]=-1;break}}}else if(l.ltype==5&&y.fmt==2)for(var P=e._lctf.getInterval(y.cDef,s[o]),N=y.cDef[P+2],z=y.scset[N],W=0;W<z.length;W++){var H=z[W],U=H.input;if(!(U.length>d)){for(I=!0,O=0;O<U.length;O++){var Q=e._lctf.getInterval(y.cDef,s[o+1+O]);if(P==-1&&y.cDef[Q+2]!=U[O]){I=!1;break}}if(I){var ne=H.substLookupRecords;for(E=0;E<ne.length;E+=2)ne[E],ne[E+1]}}}else if(l.ltype==6&&y.fmt==3){if(!e.U._glsCovered(s,y.backCvg,o-y.backCvg.length)||!e.U._glsCovered(s,y.inptCvg,o)||!e.U._glsCovered(s,y.ahedCvg,o+y.inptCvg.length))continue;var oe=y.lookupRec;for(W=0;W<oe.length;W+=2){P=oe[W];var le=u[oe[W+1]];e.U._applySubs(s,o+P,le,u)}}}}},e.U._glsCovered=function(s,o,l){for(var u=0;u<o.length;u++)if(e._lctf.coverageIndex(o[u],s[l+u])==-1)return!1;return!0},e.U.glyphsToPath=function(s,o,l){for(var u={cmds:[],crds:[]},d=0,p=0;p<o.length;p++){var _=o[p];if(_!=-1){for(var y=p<o.length-1&&o[p+1]!=-1?o[p+1]:0,b=e.U.glyphToPath(s,_),E=0;E<b.crds.length;E+=2)u.crds.push(b.crds[E]+d),u.crds.push(b.crds[E+1]);for(l&&u.cmds.push(l),E=0;E<b.cmds.length;E++)u.cmds.push(b.cmds[E]);l&&u.cmds.push("X"),d+=s.hmtx.aWidth[_],p<o.length-1&&(d+=e.U.getPairAdjustment(s,_,y))}}return u},e.U.P={},e.U.P.moveTo=function(s,o,l){s.cmds.push("M"),s.crds.push(o,l)},e.U.P.lineTo=function(s,o,l){s.cmds.push("L"),s.crds.push(o,l)},e.U.P.curveTo=function(s,o,l,u,d,p,_){s.cmds.push("C"),s.crds.push(o,l,u,d,p,_)},e.U.P.qcurveTo=function(s,o,l,u,d){s.cmds.push("Q"),s.crds.push(o,l,u,d)},e.U.P.closePath=function(s){s.cmds.push("Z")},e.U._drawCFF=function(s,o,l,u,d){for(var p=o.stack,_=o.nStems,y=o.haveWidth,b=o.width,E=o.open,C=0,A=o.x,I=o.y,L=0,O=0,P=0,N=0,z=0,W=0,H=0,U=0,Q=0,ne=0,oe={val:0,size:0};C<s.length;){e.CFF.getCharString(s,C,oe);var le=oe.val;if(C+=oe.size,le=="o1"||le=="o18")p.length%2!=0&&!y&&(b=p.shift()+u.nominalWidthX),_+=p.length>>1,p.length=0,y=!0;else if(le=="o3"||le=="o23")p.length%2!=0&&!y&&(b=p.shift()+u.nominalWidthX),_+=p.length>>1,p.length=0,y=!0;else if(le=="o4")p.length>1&&!y&&(b=p.shift()+u.nominalWidthX,y=!0),E&&e.U.P.closePath(d),I+=p.pop(),e.U.P.moveTo(d,A,I),E=!0;else if(le=="o5")for(;p.length>0;)A+=p.shift(),I+=p.shift(),e.U.P.lineTo(d,A,I);else if(le=="o6"||le=="o7")for(var ge=p.length,ce=le=="o6",pe=0;pe<ge;pe++){var Te=p.shift();ce?A+=Te:I+=Te,ce=!ce,e.U.P.lineTo(d,A,I)}else if(le=="o8"||le=="o24"){ge=p.length;for(var Oe=0;Oe+6<=ge;)L=A+p.shift(),O=I+p.shift(),P=L+p.shift(),N=O+p.shift(),A=P+p.shift(),I=N+p.shift(),e.U.P.curveTo(d,L,O,P,N,A,I),Oe+=6;le=="o24"&&(A+=p.shift(),I+=p.shift(),e.U.P.lineTo(d,A,I))}else{if(le=="o11")break;if(le=="o1234"||le=="o1235"||le=="o1236"||le=="o1237")le=="o1234"&&(O=I,P=(L=A+p.shift())+p.shift(),ne=N=O+p.shift(),W=N,U=I,A=(H=(z=(Q=P+p.shift())+p.shift())+p.shift())+p.shift(),e.U.P.curveTo(d,L,O,P,N,Q,ne),e.U.P.curveTo(d,z,W,H,U,A,I)),le=="o1235"&&(L=A+p.shift(),O=I+p.shift(),P=L+p.shift(),N=O+p.shift(),Q=P+p.shift(),ne=N+p.shift(),z=Q+p.shift(),W=ne+p.shift(),H=z+p.shift(),U=W+p.shift(),A=H+p.shift(),I=U+p.shift(),p.shift(),e.U.P.curveTo(d,L,O,P,N,Q,ne),e.U.P.curveTo(d,z,W,H,U,A,I)),le=="o1236"&&(L=A+p.shift(),O=I+p.shift(),P=L+p.shift(),ne=N=O+p.shift(),W=N,H=(z=(Q=P+p.shift())+p.shift())+p.shift(),U=W+p.shift(),A=H+p.shift(),e.U.P.curveTo(d,L,O,P,N,Q,ne),e.U.P.curveTo(d,z,W,H,U,A,I)),le=="o1237"&&(L=A+p.shift(),O=I+p.shift(),P=L+p.shift(),N=O+p.shift(),Q=P+p.shift(),ne=N+p.shift(),z=Q+p.shift(),W=ne+p.shift(),H=z+p.shift(),U=W+p.shift(),Math.abs(H-A)>Math.abs(U-I)?A=H+p.shift():I=U+p.shift(),e.U.P.curveTo(d,L,O,P,N,Q,ne),e.U.P.curveTo(d,z,W,H,U,A,I));else if(le=="o14"){if(p.length>0&&!y&&(b=p.shift()+l.nominalWidthX,y=!0),p.length==4){var J=p.shift(),se=p.shift(),ie=p.shift(),he=p.shift(),Se=e.CFF.glyphBySE(l,ie),Fe=e.CFF.glyphBySE(l,he);e.U._drawCFF(l.CharStrings[Se],o,l,u,d),o.x=J,o.y=se,e.U._drawCFF(l.CharStrings[Fe],o,l,u,d)}E&&(e.U.P.closePath(d),E=!1)}else if(le=="o19"||le=="o20")p.length%2!=0&&!y&&(b=p.shift()+u.nominalWidthX),_+=p.length>>1,p.length=0,y=!0,C+=_+7>>3;else if(le=="o21")p.length>2&&!y&&(b=p.shift()+u.nominalWidthX,y=!0),I+=p.pop(),A+=p.pop(),E&&e.U.P.closePath(d),e.U.P.moveTo(d,A,I),E=!0;else if(le=="o22")p.length>1&&!y&&(b=p.shift()+u.nominalWidthX,y=!0),A+=p.pop(),E&&e.U.P.closePath(d),e.U.P.moveTo(d,A,I),E=!0;else if(le=="o25"){for(;p.length>6;)A+=p.shift(),I+=p.shift(),e.U.P.lineTo(d,A,I);L=A+p.shift(),O=I+p.shift(),P=L+p.shift(),N=O+p.shift(),A=P+p.shift(),I=N+p.shift(),e.U.P.curveTo(d,L,O,P,N,A,I)}else if(le=="o26")for(p.length%2&&(A+=p.shift());p.length>0;)L=A,O=I+p.shift(),A=P=L+p.shift(),I=(N=O+p.shift())+p.shift(),e.U.P.curveTo(d,L,O,P,N,A,I);else if(le=="o27")for(p.length%2&&(I+=p.shift());p.length>0;)O=I,P=(L=A+p.shift())+p.shift(),N=O+p.shift(),A=P+p.shift(),I=N,e.U.P.curveTo(d,L,O,P,N,A,I);else if(le=="o10"||le=="o29"){var ke=le=="o10"?u:l;if(p.length==0)console.debug("error: empty stack");else{var qe=p.pop(),De=ke.Subrs[qe+ke.Bias];o.x=A,o.y=I,o.nStems=_,o.haveWidth=y,o.width=b,o.open=E,e.U._drawCFF(De,o,l,u,d),A=o.x,I=o.y,_=o.nStems,y=o.haveWidth,b=o.width,E=o.open}}else if(le=="o30"||le=="o31"){var rt=p.length,tt=(Oe=0,le=="o31");for(Oe+=rt-(ge=-3&rt);Oe<ge;)tt?(O=I,P=(L=A+p.shift())+p.shift(),I=(N=O+p.shift())+p.shift(),ge-Oe==5?(A=P+p.shift(),Oe++):A=P,tt=!1):(L=A,O=I+p.shift(),P=L+p.shift(),N=O+p.shift(),A=P+p.shift(),ge-Oe==5?(I=N+p.shift(),Oe++):I=N,tt=!0),e.U.P.curveTo(d,L,O,P,N,A,I),Oe+=4}else{if((le+"").charAt(0)=="o")throw console.debug("Unknown operation: "+le,s),le;p.push(le)}}}o.x=A,o.y=I,o.nStems=_,o.haveWidth=y,o.width=b,o.open=E};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function ixe(){return function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,s=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(le,ge){for(var ce=new t(31),pe=0;pe<31;++pe)ce[pe]=ge+=1<<le[pe-1];var Te=new i(ce[30]);for(pe=1;pe<30;++pe)for(var Oe=ce[pe];Oe<ce[pe+1];++Oe)Te[Oe]=Oe-ce[pe]<<5|pe;return[ce,Te]},d=u(s,2),p=d[0],_=d[1];p[28]=258,_[258]=28;for(var y=u(o,0)[0],b=new t(32768),E=0;E<32768;++E){var C=(43690&E)>>>1|(21845&E)<<1;C=(61680&(C=(52428&C)>>>2|(13107&C)<<2))>>>4|(3855&C)<<4,b[E]=((65280&C)>>>8|(255&C)<<8)>>>1}var A=function(le,ge,ce){for(var pe=le.length,Te=0,Oe=new t(ge);Te<pe;++Te)++Oe[le[Te]-1];var J,se=new t(ge);for(Te=0;Te<ge;++Te)se[Te]=se[Te-1]+Oe[Te-1]<<1;if(ce){J=new t(1<<ge);var ie=15-ge;for(Te=0;Te<pe;++Te)if(le[Te])for(var he=Te<<4|le[Te],Se=ge-le[Te],Fe=se[le[Te]-1]++<<Se,ke=Fe|(1<<Se)-1;Fe<=ke;++Fe)J[b[Fe]>>>ie]=he}else for(J=new t(pe),Te=0;Te<pe;++Te)le[Te]&&(J[Te]=b[se[le[Te]-1]++]>>>15-le[Te]);return J},I=new e(288);for(E=0;E<144;++E)I[E]=8;for(E=144;E<256;++E)I[E]=9;for(E=256;E<280;++E)I[E]=7;for(E=280;E<288;++E)I[E]=8;var L=new e(32);for(E=0;E<32;++E)L[E]=5;var O=A(I,9,1),P=A(L,5,1),N=function(le){for(var ge=le[0],ce=1;ce<le.length;++ce)le[ce]>ge&&(ge=le[ce]);return ge},z=function(le,ge,ce){var pe=ge/8|0;return(le[pe]|le[pe+1]<<8)>>(7&ge)&ce},W=function(le,ge){var ce=ge/8|0;return(le[ce]|le[ce+1]<<8|le[ce+2]<<16)>>(7&ge)},H=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],U=function(le,ge,ce){var pe=new Error(ge||H[le]);if(pe.code=le,Error.captureStackTrace&&Error.captureStackTrace(pe,U),!ce)throw pe;return pe},Q=function(le,ge,ce){var pe=le.length;if(!pe||ce&&!ce.l&&pe<5)return ge||new e(0);var Te=!ge||ce,Oe=!ce||ce.i;ce||(ce={}),ge||(ge=new e(3*pe));var J,se=function(Je){var jt=ge.length;if(Je>jt){var ze=new e(Math.max(2*jt,Je));ze.set(ge),ge=ze}},ie=ce.f||0,he=ce.p||0,Se=ce.b||0,Fe=ce.l,ke=ce.d,qe=ce.m,De=ce.n,rt=8*pe;do{if(!Fe){ce.f=ie=z(le,he,1);var tt=z(le,he+1,3);if(he+=3,!tt){var ft=le[($t=((J=he)/8|0)+(7&J&&1)+4)-4]|le[$t-3]<<8,ct=$t+ft;if(ct>pe){Oe&&U(0);break}Te&&se(Se+ft),ge.set(le.subarray($t,ct),Se),ce.b=Se+=ft,ce.p=he=8*ct;continue}if(tt==1)Fe=O,ke=P,qe=9,De=5;else if(tt==2){var Pe=z(le,he,31)+257,Ce=z(le,he+10,15)+4,je=Pe+z(le,he+5,31)+1;he+=14;for(var it=new e(je),ot=new e(19),vt=0;vt<Ce;++vt)ot[l[vt]]=z(le,he+3*vt,7);he+=3*Ce;var It=N(ot),yt=(1<<It)-1,kt=A(ot,It,1);for(vt=0;vt<je;){var $t,mt=kt[z(le,he,yt)];if(he+=15&mt,($t=mt>>>4)<16)it[vt++]=$t;else{var xe=0,re=0;for($t==16?(re=3+z(le,he,3),he+=2,xe=it[vt-1]):$t==17?(re=3+z(le,he,7),he+=3):$t==18&&(re=11+z(le,he,127),he+=7);re--;)it[vt++]=xe}}var Be=it.subarray(0,Pe),dt=it.subarray(Pe);qe=N(Be),De=N(dt),Fe=A(Be,qe,1),ke=A(dt,De,1)}else U(1);if(he>rt){Oe&&U(0);break}}Te&&se(Se+131072);for(var bt=(1<<qe)-1,Mt=(1<<De)-1,pt=he;;pt=he){var Ke=(xe=Fe[W(le,he)&bt])>>>4;if((he+=15&xe)>rt){Oe&&U(0);break}if(xe||U(2),Ke<256)ge[Se++]=Ke;else{if(Ke==256){pt=he,Fe=null;break}var Ie=Ke-254;if(Ke>264){var q=s[vt=Ke-257];Ie=z(le,he,(1<<q)-1)+p[vt],he+=q}var ee=ke[W(le,he)&Mt],de=ee>>>4;if(ee||U(3),he+=15&ee,dt=y[de],de>3&&(q=o[de],dt+=W(le,he)&(1<<q)-1,he+=q),he>rt){Oe&&U(0);break}Te&&se(Se+131072);for(var Ae=Se+Ie;Se<Ae;Se+=4)ge[Se]=ge[Se-dt],ge[Se+1]=ge[Se+1-dt],ge[Se+2]=ge[Se+2-dt],ge[Se+3]=ge[Se+3-dt];Se=Ae}}ce.l=Fe,ce.p=pt,ce.b=Se,Fe&&(ie=1,ce.m=qe,ce.d=ke,ce.n=De)}while(!ie);return Se==ge.length?ge:function(Je,jt,ze){(jt==null||jt<0)&&(jt=0),(ze==null||ze>Je.length)&&(ze=Je.length);var Yt=new(Je instanceof t?t:Je instanceof i?i:e)(ze-jt);return Yt.set(Je.subarray(jt,ze)),Yt}(ge,0,Se)},ne=new e(0),oe=typeof TextDecoder<"u"&&new TextDecoder;try{oe.decode(ne,{stream:!0})}catch{}return n.convert_streams=function(le){var ge=new DataView(le),ce=0;function pe(){var Pe=ge.getUint16(ce);return ce+=2,Pe}function Te(){var Pe=ge.getUint32(ce);return ce+=4,Pe}function Oe(Pe){ft.setUint16(ct,Pe),ct+=2}function J(Pe){ft.setUint32(ct,Pe),ct+=4}for(var se={signature:Te(),flavor:Te(),length:Te(),numTables:pe(),reserved:pe(),totalSfntSize:Te(),majorVersion:pe(),minorVersion:pe(),metaOffset:Te(),metaLength:Te(),metaOrigLength:Te(),privOffset:Te(),privLength:Te()},ie=0;Math.pow(2,ie)<=se.numTables;)ie++;ie--;for(var he=16*Math.pow(2,ie),Se=16*se.numTables-he,Fe=12,ke=[],qe=0;qe<se.numTables;qe++)ke.push({tag:Te(),offset:Te(),compLength:Te(),origLength:Te(),origChecksum:Te()}),Fe+=16;var De,rt=new Uint8Array(12+16*ke.length+ke.reduce(function(Pe,Ce){return Pe+Ce.origLength+4},0)),tt=rt.buffer,ft=new DataView(tt),ct=0;return J(se.flavor),Oe(se.numTables),Oe(he),Oe(ie),Oe(Se),ke.forEach(function(Pe){J(Pe.tag),J(Pe.origChecksum),J(Fe),J(Pe.origLength),Pe.outOffset=Fe,(Fe+=Pe.origLength)%4!=0&&(Fe+=4-Fe%4)}),ke.forEach(function(Pe){var Ce,je=le.slice(Pe.offset,Pe.offset+Pe.compLength);if(Pe.compLength!=Pe.origLength){var it=new Uint8Array(Pe.origLength);Ce=new Uint8Array(je,2),Q(Ce,it)}else it=new Uint8Array(je);rt.set(it,Pe.outOffset);var ot=0;(Fe=Pe.outOffset+Pe.origLength)%4!=0&&(ot=4-Fe%4),rt.set(new Uint8Array(ot).buffer,Pe.outOffset+Pe.origLength),De=Fe+ot}),tt.slice(0,De)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function sxe(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},s=1,o=2,l=4,u=8,d=16,p=32;let _;function y(z){if(!_){const W={R:o,L:s,D:l,C:d,U:p,T:u};_=new Map;for(let H in i){let U=0;i[H].split(",").forEach(Q=>{let[ne,oe]=Q.split("+");ne=parseInt(ne,36),oe=oe?parseInt(oe,36):0,_.set(U+=ne,W[H]);for(let le=oe;le--;)_.set(++U,W[H])})}}return _.get(z)||p}const b=1,E=2,C=3,A=4,I=[null,"isol","init","fina","medi"];function L(z){const W=new Uint8Array(z.length);let H=p,U=b,Q=-1;for(let ne=0;ne<z.length;ne++){const oe=z.codePointAt(ne);let le=y(oe)|0,ge=b;le&u||(H&(s|l|d)?le&(o|l|d)?(ge=C,(U===b||U===C)&&W[Q]++):le&(s|p)&&(U===E||U===A)&&W[Q]--:H&(o|p)&&(U===E||U===A)&&W[Q]--,U=W[ne]=ge,H=le,Q=ne,oe>65535&&ne++)}return W}function O(z,W){const H=[];for(let Q=0;Q<W.length;Q++){const ne=W.codePointAt(Q);ne>65535&&Q++,H.push(n.U.codeToGlyph(z,ne))}const U=z.GSUB;if(U){const{lookupList:Q,featureList:ne}=U;let oe;const le=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,ge=[];ne.forEach(ce=>{if(le.test(ce.tag))for(let pe=0;pe<ce.tab.length;pe++){if(ge[ce.tab[pe]])continue;ge[ce.tab[pe]]=!0;const Te=Q[ce.tab[pe]],Oe=/^(isol|init|fina|medi)$/.test(ce.tag);Oe&&!oe&&(oe=L(W));for(let J=0;J<H.length;J++)(!oe||!Oe||I[oe[J]]===ce.tag)&&n.U._applySubs(H,J,Te,Q)}})}return H}function P(...z){for(let W=0;W<z.length;W++)if(typeof z[W]=="number")return z[W]}function N(z){const W=Object.create(null),H=z["OS/2"],U=z.hhea,Q=z.head.unitsPerEm,ne=P(H&&H.sTypoAscender,U&&U.ascender,Q),oe={unitsPerEm:Q,ascender:ne,descender:P(H&&H.sTypoDescender,U&&U.descender,0),capHeight:P(H&&H.sCapHeight,ne),xHeight:P(H&&H.sxHeight,ne),lineGap:P(H&&H.sTypoLineGap,U&&U.lineGap),forEachGlyph(le,ge,ce,pe){let Te=0;const Oe=1/oe.unitsPerEm*ge,J=O(z,le);let se=0,ie=-1;return J.forEach((he,Se)=>{if(he!==-1){let Fe=W[he];if(!Fe){const{cmds:ke,crds:qe}=n.U.glyphToPath(z,he);let De="",rt=0;for(let Ce=0,je=ke.length;Ce<je;Ce++){const it=t[ke[Ce]];De+=ke[Ce];for(let ot=1;ot<=it;ot++)De+=(ot>1?",":"")+qe[rt++]}let tt,ft,ct,Pe;if(qe.length){tt=ft=1/0,ct=Pe=-1/0;for(let Ce=0,je=qe.length;Ce<je;Ce+=2){let it=qe[Ce],ot=qe[Ce+1];it<tt&&(tt=it),ot<ft&&(ft=ot),it>ct&&(ct=it),ot>Pe&&(Pe=ot)}}else tt=ct=ft=Pe=0;Fe=W[he]={index:he,advanceWidth:z.hmtx.aWidth[he],xMin:tt,yMin:ft,xMax:ct,yMax:Pe,path:De,pathCommandCount:ke.length}}ie!==-1&&(Te+=n.U.getPairAdjustment(z,ie,he)*Oe),pe.call(null,Fe,Te,se),Fe.advanceWidth&&(Te+=Fe.advanceWidth*Oe),ce&&(Te+=ce*ge),ie=he}se+=le.codePointAt(se)>65535?2:1}),Te}};return oe}return function(z){const W=new Uint8Array(z,0,4),H=n._bin.readASCII(W,0,4);if(H==="wOFF")z=e(z);else if(H==="wOF2")throw new Error("woff2 fonts not supported");return N(n.parse(z)[0])}}const oxe=G$({name:"Typr Font Parser",dependencies:[rxe,ixe,sxe],init(n,e,t){const i=n(),s=e();return t(i,s)}}),MS={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},axe=new Nn;function aS(){return(self.performance||Date).now()}const K5=Object.create(null);function oY(n,e){n=cxe({},n);const t=aS();if(n.font=hxe(n.font||MS.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||MS.sdfGlyphSize,n.colorRanges!=null){let y={};for(let b in n.colorRanges)if(n.colorRanges.hasOwnProperty(b)){let E=n.colorRanges[b];typeof E!="number"&&(E=axe.set(E).getHex()),y[b]=E}n.colorRanges=y}Object.freeze(n);const{textureWidth:i,sdfExponent:s}=MS,{sdfGlyphSize:o}=n,l=i/o*4;let u=K5[o];if(!u){const y=document.createElement("canvas");y.width=i,y.height=o*256/l,u=K5[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:y,sdfTexture:new lc(y,void 0,void 0,void 0,Tl,Tl),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,lxe(u)}const{sdfTexture:d,sdfCanvas:p}=u;let _=u.glyphsByFont.get(n.font);_||u.glyphsByFont.set(n.font,_=new Map),pxe(n).then(y=>{const{glyphIds:b,glyphPositions:E,fontSize:C,unitsPerEm:A,timings:I}=y,L=[],O=new Float32Array(b.length*4),P=C/A;let N=0,z=0;const W=aS();b.forEach((oe,le)=>{let ge=_.get(oe);if(!ge){const{path:Oe,pathBounds:J}=y.glyphData[oe],se=Math.max(J[2]-J[0],J[3]-J[1])/o*(MS.sdfMargin*o+.5),ie=u.glyphCount++,he=[J[0]-se,J[1]-se,J[2]+se,J[3]+se];_.set(oe,ge={path:Oe,atlasIndex:ie,sdfViewBox:he}),L.push(ge)}const{sdfViewBox:ce}=ge,pe=E[z++],Te=E[z++];O[N++]=pe+ce[0]*P,O[N++]=Te+ce[1]*P,O[N++]=pe+ce[2]*P,O[N++]=Te+ce[3]*P,b[le]=ge.atlasIndex}),I.quads=(I.quads||0)+(aS()-W);const H=aS();I.sdf={};const U=p.height,Q=Math.ceil(u.glyphCount/l),ne=Math.pow(2,Math.ceil(Math.log2(Q*o)));ne>U&&(console.info(`Increasing SDF texture size ${U}->${ne}`),nxe(p,i,ne),d.dispose()),Promise.all(L.map(oe=>aY(oe,u,n.gpuAccelerateSDF).then(({timing:le})=>{I.sdf[oe.atlasIndex]=le}))).then(()=>{L.length&&!u.contextLost&&(lY(u),d.needsUpdate=!0),I.sdfTotal=aS()-H,I.total=aS()-t,e(Object.freeze({parameters:n,sdfTexture:d,sdfGlyphSize:o,sdfExponent:s,glyphBounds:O,glyphAtlasIndices:b,glyphColors:y.glyphColors,caretPositions:y.caretPositions,caretHeight:y.caretHeight,chunkedBounds:y.chunkedBounds,ascender:y.ascender,descender:y.descender,lineHeight:y.lineHeight,capHeight:y.capHeight,xHeight:y.xHeight,topBaseline:y.topBaseline,blockBounds:y.blockBounds,visibleBounds:y.visibleBounds,timings:y.timings}))})}),Promise.resolve().then(()=>{u.contextLost||txe(p)})}function aY({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:s,contextLost:o},l){if(o)return Promise.resolve({timing:-1});const{textureWidth:u,sdfExponent:d}=MS,p=Math.max(t[2]-t[0],t[3]-t[1]),_=Math.floor(e/4),y=_%(u/i)*i,b=Math.floor(_/(u/i))*i,E=e%4;return KEe(i,i,n,t,p,d,s,y,b,E,l)}function lxe(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(s=>{s.forEach(o=>{i.push(aY(o,n,!0))})}),Promise.all(i).then(()=>{lY(n),n.sdfTexture.needsUpdate=!0})})}function uxe({font:n,characters:e,sdfGlyphSize:t},i){let s=Array.isArray(e)?e.join(`
`):""+e;oY({font:n,sdfGlyphSize:t,text:s},i)}function cxe(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let NA;function hxe(n){return NA||(NA=typeof document>"u"?{}:document.createElement("a")),NA.href=n,NA.href}function lY(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:s}=e,o=n.sdfCanvas.getContext("webgl");let l=t.image.data;(!l||l.length!==i*s*4)&&(l=new Uint8Array(i*s*4),t.image={width:i,height:s,data:l},t.flipY=!1,t.isDataTexture=!0),o.readPixels(0,0,i,s,o.RGBA,o.UNSIGNED_BYTE,l)}}const dxe=G$({name:"Typesetter",dependencies:[MS,oxe,YEe,UEe],init(n,e,t,i){const{defaultFontURL:s}=n;return t(e,i(),{defaultFontURL:s})}}),pxe=G$({name:"Typesetter",dependencies:[dxe],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),n.glyphColors&&e.push(n.glyphColors.buffer),e}}),J5={};function fxe(n){let e=J5[n];if(!e){const t=new e0(1,1,n,n),i=t.clone(),s=t.attributes,o=i.attributes,l=new oi,u=s.uv.count;for(let d=0;d<u;d++)o.position.array[d*3]*=-1,o.normal.array[d*3+2]*=-1;["position","normal","uv"].forEach(d=>{l.setAttribute(d,new rr([...s[d].array,...o[d].array],s[d].itemSize))}),l.setIndex([...t.index.array,...i.index.array.map(d=>d+u)]),l.translate(.5,.5,0),e=J5[n]=l}return e}const mxe="aTroikaGlyphBounds",q5="aTroikaGlyphIndex",gxe="aTroikaGlyphColor";class _xe extends ik{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new s_,this.boundingBox=new n0}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===id?t/2:0,e===tf?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=fxe(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,s,o){UO(this,mxe,e,4),UO(this,q5,t,1),UO(this,gxe,o,3),this._blockBounds=i,this._chunkedBounds=s,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:s,floor:o,min:l,max:u,sin:d,cos:p}=Math,_=s/2,y=s*2,b=Math.abs(t),E=e[0]/b,C=e[2]/b,A=o((E+_)/y)!==o((C+_)/y)?-b:l(d(E)*b,d(C)*b),I=o((E-_)/y)!==o((C-_)/y)?b:u(d(E)*b,d(C)*b),L=o((E+s)/y)!==o((C+s)/y)?b*2:u(b-p(E)*b,b-p(C)*b);i.min.set(A,e[1],t<0?-L:0),i.max.set(I,e[3],t<0?0:L)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(q5).count,i=this._chunkedBounds;if(i)for(let s=i.length;s--;){t=i[s].end;let o=i[s].rect;if(o[1]<e.w&&o[3]>e.y&&o[0]<e.z&&o[2]>e.x)break}this.instanceCount=t}}function UO(n,e,t,i){const s=n.getAttribute(e);t?s&&s.array.length===t.length?(s.array.set(t),s.needsUpdate=!0):(n.setAttribute(e,new A1(t,i)),delete n._maxInstanceCount,n.dispose()):s&&n.deleteAttribute(e)}const vxe=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,yxe=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,bxe=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,Txe=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function Sxe(n){const e=mN(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ht},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new ys(0,0,0,0)},uTroikaClipRect:{value:new ys(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ht},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Nn},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new nf},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:vxe,vertexTransform:yxe,fragmentDefs:bxe,fragmentColorTransform:Txe,customRewriter({vertexShader:t,fragmentShader:i}){let s=/\buniform\s+vec3\s+diffuse\b/;return s.test(i)&&(i=i.replace(s,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),s.test(t)||(t=t.replace(iY,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const lF=new r0({color:16777215,side:tf,transparent:!0}),Q5=8421504,Z5=new Qr,BA=new $e,zO=new $e,Px=[],Exe=new $e,HO="+x+y";function eG(n){return Array.isArray(n)?n[0]:n}let uY=()=>{const n=new Fn(new e0(1,1),lF);return uY=()=>n,n},cY=()=>{const n=new Fn(new e0(1,1,32,1),lF);return cY=()=>n,n};const xxe={type:"syncstart"},wxe={type:"synccomplete"},hY=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],$xe=hY.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class dY extends Fn{constructor(){const e=new _xe;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Q5,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=HO,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(xxe),oY({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(s=>s&&s())})),this.dispatchEvent(wxe),e&&e()})))}onBeforeRender(e,t,i,s,o,l){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o),o._hadOwnSide=o.hasOwnProperty("side"),this.geometry.setSide(o._actualSide=o.side),o.side=e_}onAfterRender(e,t,i,s,o,l){o._hadOwnSide?o.side=o._actualSide:delete o.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=lF.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=Sxe(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function s(){e.removeEventListener("dispose",s),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return eG(this.material).getDepthMaterial()}get customDistanceMaterial(){return eG(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,s=this.textRenderInfo;if(s){const{sdfTexture:u,blockBounds:d}=s;i.uTroikaSDFTexture.value=u,i.uTroikaSDFTextureSize.value.set(u.image.width,u.image.height),i.uTroikaSDFGlyphSize.value=s.sdfGlyphSize,i.uTroikaSDFExponent.value=s.sdfExponent,i.uTroikaTotalBounds.value.fromArray(d),i.uTroikaUseGlyphColors.value=!t&&!!s.glyphColors;let p=0,_=0,y=0,b,E,C,A=0,I=0;if(t){let{outlineWidth:O,outlineOffsetX:P,outlineOffsetY:N,outlineBlur:z,outlineOpacity:W}=this;p=this._parsePercent(O)||0,_=Math.max(0,this._parsePercent(z)||0),b=W,A=this._parsePercent(P)||0,I=this._parsePercent(N)||0}else y=Math.max(0,this._parsePercent(this.strokeWidth)||0),y&&(C=this.strokeColor,i.uTroikaStrokeColor.value.set(C??Q5),E=this.strokeOpacity,E==null&&(E=1)),b=this.fillOpacity;i.uTroikaDistanceOffset.value=p,i.uTroikaPositionOffset.value.set(A,I),i.uTroikaBlurRadius.value=_,i.uTroikaStrokeWidth.value=y,i.uTroikaStrokeOpacity.value=E,i.uTroikaFillOpacity.value=b??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let L=this.clipRect;if(L&&Array.isArray(L)&&L.length===4)i.uTroikaClipRect.value.fromArray(L);else{const O=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(d[0]-O,d[1]-O,d[2]+O,d[3]+O)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const o=t?this.outlineColor||0:this.color;if(o==null)delete e.color;else{const u=e.hasOwnProperty("color")?e.color:e.color=new Nn;(o!==u._input||typeof o=="object")&&u.set(u._input=o)}let l=this.orientation||HO;if(l!==e._orientation){let u=i.uTroikaOrient.value;l=l.replace(/[^-+xyz]/g,"");let d=l!==HO&&l.match(/^([-+])([xyz])([-+])([xyz])$/);if(d){let[,p,_,y,b]=d;BA.set(0,0,0)[_]=p==="-"?1:-1,zO.set(0,0,0)[b]=y==="-"?-1:1,Z5.lookAt(Exe,BA.cross(zO),zO),u.setFromMatrix4(Z5)}else u.identity();e._orientation=l}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Ht){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new Ht){return BA.copy(e),this.localPositionToTextCoords(this.worldToLocal(BA),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:s}=this;if(i){const o=i.blockBounds,l=s?cY():uY(),u=l.geometry,{position:d,uv:p}=u.attributes;for(let _=0;_<p.count;_++){let y=o[0]+p.getX(_)*(o[2]-o[0]);const b=o[1]+p.getY(_)*(o[3]-o[1]);let E=0;s&&(E=s-Math.cos(y/s)*s,y=Math.sin(y/s)*s),d.setXYZ(_,y,b,E)}u.boundingSphere=this.geometry.boundingSphere,u.boundingBox=this.geometry.boundingBox,l.matrixWorld=this.matrixWorld,l.material.side=this.material.side,Px.length=0,l.raycast(e,Px);for(let _=0;_<Px.length;_++)Px[_].object=this,t.push(Px[_])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,$xe.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}}hY.forEach(n=>{const e="_private_"+n;Object.defineProperty(dY.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const Cxe=me.forwardRef(({anchorX:n="center",anchorY:e="middle",font:t,fontSize:i=1,children:s,characters:o,onSync:l,...u},d)=>{const p=Jd(({invalidate:E})=>E),[_]=me.useState(()=>new dY),[y,b]=me.useMemo(()=>{const E=[];let C="";return me.Children.forEach(s,A=>{typeof A=="string"||typeof A=="number"?C+=A:E.push(A)}),[E,C]},[s]);return MSe(()=>new Promise(E=>uxe({font:t,characters:o},E)),["troika-text",t,o]),me.useLayoutEffect(()=>void _.sync(()=>{p(),l&&l(_)})),me.useEffect(()=>()=>_.dispose(),[_]),on("primitive",{object:_,ref:d,font:t,text:b,anchorX:n,anchorY:e,fontSize:i,...u,children:y})});var Axe=1/0,Mxe=9007199254740991,Ixe="[object Arguments]",Rxe="[object Function]",kxe="[object GeneratorFunction]",Oxe="[object Symbol]",Lxe=typeof Y_=="object"&&Y_&&Y_.Object===Object&&Y_,Dxe=typeof self=="object"&&self&&self.Object===Object&&self,Nxe=Lxe||Dxe||Function("return this")();function Bxe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function Pxe(n,e){for(var t=-1,i=n?n.length:0,s=Array(i);++t<i;)s[t]=e(n[t],t,n);return s}function Fxe(n,e){for(var t=-1,i=e.length,s=n.length;++t<i;)n[s+t]=e[t];return n}var uF=Object.prototype,Uxe=uF.hasOwnProperty,cF=uF.toString,tG=Nxe.Symbol,zxe=uF.propertyIsEnumerable,nG=tG?tG.isConcatSpreadable:void 0,rG=Math.max;function pY(n,e,t,i,s){var o=-1,l=n.length;for(t||(t=Vxe),s||(s=[]);++o<l;){var u=n[o];e>0&&t(u)?e>1?pY(u,e-1,t,i,s):Fxe(s,u):i||(s[s.length]=u)}return s}function Hxe(n,e){return n=Object(n),Gxe(n,e,function(t,i){return i in n})}function Gxe(n,e,t){for(var i=-1,s=e.length,o={};++i<s;){var l=e[i],u=n[l];t(u,l)&&(o[l]=u)}return o}function Wxe(n,e){return e=rG(e===void 0?n.length-1:e,0),function(){for(var t=arguments,i=-1,s=rG(t.length-e,0),o=Array(s);++i<s;)o[i]=t[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=t[i];return l[e]=o,Bxe(n,this,l)}}function Vxe(n){return Yxe(n)||Xxe(n)||!!(nG&&n&&n[nG])}function jxe(n){if(typeof n=="string"||ewe(n))return n;var e=n+"";return e=="0"&&1/n==-Axe?"-0":e}function Xxe(n){return Jxe(n)&&Uxe.call(n,"callee")&&(!zxe.call(n,"callee")||cF.call(n)==Ixe)}var Yxe=Array.isArray;function Kxe(n){return n!=null&&Qxe(n.length)&&!qxe(n)}function Jxe(n){return fY(n)&&Kxe(n)}function qxe(n){var e=Zxe(n)?cF.call(n):"";return e==Rxe||e==kxe}function Qxe(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Mxe}function Zxe(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function fY(n){return!!n&&typeof n=="object"}function ewe(n){return typeof n=="symbol"||fY(n)&&cF.call(n)==Oxe}var twe=Wxe(function(n,e){return n==null?{}:Hxe(n,Pxe(pY(e,1),jxe))}),GO=twe;const nwe=me.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:s=!0,onChange:o,onStart:l,onEnd:u,...d},p)=>{const _=Jd(z=>z.invalidate),y=Jd(z=>z.camera),b=Jd(z=>z.gl),E=Jd(z=>z.events),C=Jd(z=>z.setEvents),A=Jd(z=>z.set),I=Jd(z=>z.get),L=Jd(z=>z.performance),O=e||y,P=i||E.connected||b.domElement,N=me.useMemo(()=>new CEe(O),[O]);return Fm(()=>{N.enabled&&N.update()},-1),me.useEffect(()=>(N.connect(P),()=>void N.dispose()),[P,t,N,_]),me.useEffect(()=>{const z=U=>{_(),t&&L.regress(),o&&o(U)},W=U=>{l&&l(U)},H=U=>{u&&u(U)};return N.addEventListener("change",z),N.addEventListener("start",W),N.addEventListener("end",H),()=>{N.removeEventListener("start",W),N.removeEventListener("end",H),N.removeEventListener("change",z)}},[o,l,u,N,_,C]),me.useEffect(()=>{if(n){const z=I().controls;return A({controls:N}),()=>A({controls:z})}},[n,N]),on("primitive",{ref:p,object:N,enableDamping:s,...d})});class rwe extends QR{constructor(e){super(e),this.onBeforeCompile=(t,i)=>{const{isWebGL2:s}=i.capabilities;t.fragmentShader=t.fragmentShader.replace("#include <output_fragment>",`
        ${s?"#include <output_fragment>":`#extension GL_OES_standard_derivatives : enable
#include <output_fragment>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <encodings_fragment>
      `)}}}const iwe=me.forwardRef((n,e)=>{const[t]=me.useState(()=>new rwe(null));return on("primitive",{...n,object:t,ref:e,attach:"material"})});function swe(n){const e=n+"Geometry";return me.forwardRef(({args:t,children:i,...s},o)=>kh("mesh",{ref:o,...s,children:[on(e,{attach:"geometry",args:t}),i]}))}const owe=swe("circle");let Rb,Fx;const awe=me.createContext(null),iG=new Qr,sG=new $e,lwe=me.forwardRef(({children:n,range:e,limit:t=1e3,...i},s)=>{const o=me.useRef(null),[l,u]=me.useState([]),[[d,p,_]]=me.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);me.useEffect(()=>{o.current.geometry.attributes.position.needsUpdate=!0}),Fm(()=>{for(o.current.updateMatrix(),o.current.updateMatrixWorld(),iG.copy(o.current.matrixWorld).invert(),o.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,l.length),Rb=0;Rb<l.length;Rb++)Fx=l[Rb].current,Fx.getWorldPosition(sG).applyMatrix4(iG),sG.toArray(d,Rb*3),o.current.geometry.attributes.position.needsUpdate=!0,Fx.matrixWorldNeedsUpdate=!0,Fx.color.toArray(p,Rb*3),o.current.geometry.attributes.color.needsUpdate=!0,_.set([Fx.size],Rb),o.current.geometry.attributes.size.needsUpdate=!0});const y=me.useMemo(()=>({getParent:()=>o,subscribe:b=>(u(E=>[...E,b]),()=>u(E=>E.filter(C=>C.current!==b.current)))}),[]);return me.createElement("points",uN({userData:{instances:l},matrixAutoUpdate:!1,ref:sF([s,o]),raycast:()=>null},i),kh("bufferGeometry",{children:[on("bufferAttribute",{attach:"attributes-position",count:d.length/3,array:d,itemSize:3,usage:h1}),on("bufferAttribute",{attach:"attributes-color",count:p.length/3,array:p,itemSize:3,usage:h1}),on("bufferAttribute",{attach:"attributes-size",count:_.length,array:_,itemSize:1,usage:h1})]}),me.createElement(awe.Provider,{value:y},n))}),uwe=me.forwardRef(({children:n,positions:e,colors:t,sizes:i,stride:s=3,...o},l)=>{const u=me.useRef(null);return Fm(()=>{const d=u.current.geometry.attributes;d.position.needsUpdate=!0,t&&(d.color.needsUpdate=!0),i&&(d.size.needsUpdate=!0)}),kh("points",{ref:sF([l,u]),...o,children:[kh("bufferGeometry",{children:[on("bufferAttribute",{attach:"attributes-position",count:e.length/s,array:e,itemSize:s,usage:h1}),t&&on("bufferAttribute",{attach:"attributes-color",count:t.length/s,array:t,itemSize:3,usage:h1}),i&&on("bufferAttribute",{attach:"attributes-size",count:i.length/s,array:i,itemSize:1,usage:h1})]}),n]})}),cwe=me.forwardRef((n,e)=>n.positions instanceof Float32Array?on(uwe,{...n,ref:e}):on(lwe,{...n,ref:e})),oG=n=>{let e;const t=new Set,i=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const p=e;e=u??typeof d!="object"?d:Object.assign({},e,d),t.forEach(_=>_(e,p))}},s=()=>e,o={setState:i,getState:s,subscribe:l=>(t.add(l),()=>t.delete(l)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}};return e=n(i,s,o),o},hwe=n=>n?oG(n):oG;var mY={exports:{}},WO={},aG={exports:{}},VO={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lG;function dwe(){if(lG)return VO;lG=1;var n=Vr;function e(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(y,b){var E=b(),C=i({inst:{value:E,getSnapshot:b}}),A=C[0].inst,I=C[1];return o(function(){A.value=E,A.getSnapshot=b,d(A)&&I({inst:A})},[y,E,b]),s(function(){return d(A)&&I({inst:A}),y(function(){d(A)&&I({inst:A})})},[y]),l(E),E}function d(y){var b=y.getSnapshot;y=y.value;try{var E=b();return!t(y,E)}catch{return!0}}function p(y,b){return b()}var _=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return VO.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:_,VO}var uG;function pwe(){return uG||(uG=1,function(n){n.exports=dwe()}(aG)),aG.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cG;function fwe(){if(cG)return WO;cG=1;var n=Vr,e=pwe();function t(p,_){return p===_&&(p!==0||1/p===1/_)||p!==p&&_!==_}var i=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=n.useRef,l=n.useEffect,u=n.useMemo,d=n.useDebugValue;return WO.useSyncExternalStoreWithSelector=function(p,_,y,b,E){var C=o(null);if(C.current===null){var A={hasValue:!1,value:null};C.current=A}else A=C.current;C=u(function(){function L(W){if(!O){if(O=!0,P=W,W=b(W),E!==void 0&&A.hasValue){var H=A.value;if(E(H,W))return N=H}return N=W}if(H=N,i(P,W))return H;var U=b(W);return E!==void 0&&E(H,U)?H:(P=W,N=U)}var O=!1,P,N,z=y===void 0?null:y;return[function(){return L(_())},z===null?void 0:function(){return L(z())}]},[_,y,b,E]);var I=s(p,C[0],C[1]);return l(function(){A.hasValue=!0,A.value=I},[I]),d(I),I},WO}(function(n){n.exports=fwe()})(mY);const mwe=IX(mY.exports),{useSyncExternalStoreWithSelector:gwe}=mwe;function gY(n,e=n.getState,t){const i=gwe(n.subscribe,n.getState,n.getServerState||n.getState,e,t);return me.useDebugValue(i),i}const hG=n=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?hwe(n):n,t=(i,s)=>gY(e,i,s);return Object.assign(t,e),t},_we=n=>n?hG(n):hG,vwe=n=>(e,t,i)=>{const s=i.subscribe;return i.subscribe=(o,l,u)=>{let d=o;if(l){const p=(u==null?void 0:u.equalityFn)||Object.is;let _=o(i.getState());d=y=>{const b=o(y);if(!p(_,b)){const E=_;l(_=b,E)}},u!=null&&u.fireImmediately&&l(_,_)}return s(d)},n(e,t,i)},ywe=vwe;function Xg(n){for(var e=arguments.length,t=Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+n+(t.length?" "+t.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function vE(n){return!!n&&!!n[Rm]}function R1(n){return!!n&&(function(e){if(!e||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;var i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Cwe}(n)||Array.isArray(n)||!!n[yG]||!!n.constructor[yG]||hF(n)||dF(n))}function g$(n,e,t){t===void 0&&(t=!1),BE(n)===0?(t?Object.keys:_F)(n).forEach(function(i){t&&typeof i=="symbol"||e(i,n[i],n)}):n.forEach(function(i,s){return e(s,i,n)})}function BE(n){var e=n[Rm];return e?e.i>3?e.i-4:e.i:Array.isArray(n)?1:hF(n)?2:dF(n)?3:0}function _N(n,e){return BE(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function bwe(n,e){return BE(n)===2?n.get(e):n[e]}function _Y(n,e,t){var i=BE(n);i===2?n.set(e,t):i===3?(n.delete(e),n.add(t)):n[e]=t}function Twe(n,e){return n===e?n!==0||1/n==1/e:n!=n&&e!=e}function hF(n){return wwe&&n instanceof Map}function dF(n){return $we&&n instanceof Set}function Hb(n){return n.o||n.t}function pF(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var e=Awe(n);delete e[Rm];for(var t=_F(e),i=0;i<t.length;i++){var s=t[i],o=e[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[s]})}return Object.create(Object.getPrototypeOf(n),e)}function fF(n,e){return e===void 0&&(e=!1),mF(n)||vE(n)||!R1(n)||(BE(n)>1&&(n.set=n.add=n.clear=n.delete=Swe),Object.freeze(n),e&&g$(n,function(t,i){return fF(i,!0)},!0)),n}function Swe(){Xg(2)}function mF(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function Q0(n){var e=Mwe[n];return e||Xg(18,n),e}function dG(){return _$}function jO(n,e){e&&(Q0("Patches"),n.u=[],n.s=[],n.v=e)}function bI(n){vN(n),n.p.forEach(Ewe),n.p=null}function vN(n){n===_$&&(_$=n.l)}function pG(n){return _$={p:[],l:_$,h:n,m:!0,_:0}}function Ewe(n){var e=n[Rm];e.i===0||e.i===1?e.j():e.O=!0}function XO(n,e){e._=e.p.length;var t=e.p[0],i=n!==void 0&&n!==t;return e.h.g||Q0("ES5").S(e,n,i),i?(t[Rm].P&&(bI(e),Xg(4)),R1(n)&&(n=TI(e,n),e.l||SI(e,n)),e.u&&Q0("Patches").M(t[Rm].t,n,e.u,e.s)):n=TI(e,t,[]),bI(e),e.u&&e.v(e.u,e.s),n!==vY?n:void 0}function TI(n,e,t){if(mF(e))return e;var i=e[Rm];if(!i)return g$(e,function(o,l){return fG(n,i,e,o,l,t)},!0),e;if(i.A!==n)return e;if(!i.P)return SI(n,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var s=i.i===4||i.i===5?i.o=pF(i.k):i.o;g$(i.i===3?new Set(s):s,function(o,l){return fG(n,i,s,o,l,t)}),SI(n,s,!1),t&&n.u&&Q0("Patches").R(i,t,n.u,n.s)}return i.o}function fG(n,e,t,i,s,o){if(vE(s)){var l=TI(n,s,o&&e&&e.i!==3&&!_N(e.D,i)?o.concat(i):void 0);if(_Y(t,i,l),!vE(l))return;n.m=!1}if(R1(s)&&!mF(s)){if(!n.h.F&&n._<1)return;TI(n,s),e&&e.A.l||SI(n,s)}}function SI(n,e,t){t===void 0&&(t=!1),n.h.F&&n.m&&fF(e,t)}function YO(n,e){var t=n[Rm];return(t?Hb(t):n)[e]}function mG(n,e){if(e in n)for(var t=Object.getPrototypeOf(n);t;){var i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Object.getPrototypeOf(t)}}function yN(n){n.P||(n.P=!0,n.l&&yN(n.l))}function KO(n){n.o||(n.o=pF(n.t))}function bN(n,e,t){var i=hF(e)?Q0("MapSet").N(e,t):dF(e)?Q0("MapSet").T(e,t):n.g?function(s,o){var l=Array.isArray(s),u={i:l?1:0,A:o?o.A:dG(),P:!1,I:!1,D:{},l:o,t:s,k:null,o:null,j:null,C:!1},d=u,p=TN;l&&(d=[u],p=Qx);var _=Proxy.revocable(d,p),y=_.revoke,b=_.proxy;return u.k=b,u.j=y,b}(e,t):Q0("ES5").J(e,t);return(t?t.A:dG()).p.push(i),i}function xwe(n){return vE(n)||Xg(22,n),function e(t){if(!R1(t))return t;var i,s=t[Rm],o=BE(t);if(s){if(!s.P&&(s.i<4||!Q0("ES5").K(s)))return s.t;s.I=!0,i=gG(t,o),s.I=!1}else i=gG(t,o);return g$(i,function(l,u){s&&bwe(s.t,l)===u||_Y(i,l,e(u))}),o===3?new Set(i):i}(n)}function gG(n,e){switch(e){case 2:return new Map(n);case 3:return Array.from(n)}return pF(n)}var _G,_$,gF=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",wwe=typeof Map<"u",$we=typeof Set<"u",vG=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",vY=gF?Symbol.for("immer-nothing"):((_G={})["immer-nothing"]=!0,_G),yG=gF?Symbol.for("immer-draftable"):"__$immer_draftable",Rm=gF?Symbol.for("immer-state"):"__$immer_state",Cwe=""+Object.prototype.constructor,_F=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,Awe=Object.getOwnPropertyDescriptors||function(n){var e={};return _F(n).forEach(function(t){e[t]=Object.getOwnPropertyDescriptor(n,t)}),e},Mwe={},TN={get:function(n,e){if(e===Rm)return n;var t=Hb(n);if(!_N(t,e))return function(s,o,l){var u,d=mG(o,l);return d?"value"in d?d.value:(u=d.get)===null||u===void 0?void 0:u.call(s.k):void 0}(n,t,e);var i=t[e];return n.I||!R1(i)?i:i===YO(n.t,e)?(KO(n),n.o[e]=bN(n.A.h,i,n)):i},has:function(n,e){return e in Hb(n)},ownKeys:function(n){return Reflect.ownKeys(Hb(n))},set:function(n,e,t){var i=mG(Hb(n),e);if(i!=null&&i.set)return i.set.call(n.k,t),!0;if(!n.P){var s=YO(Hb(n),e),o=s==null?void 0:s[Rm];if(o&&o.t===t)return n.o[e]=t,n.D[e]=!1,!0;if(Twe(t,s)&&(t!==void 0||_N(n.t,e)))return!0;KO(n),yN(n)}return n.o[e]===t&&typeof t!="number"&&(t!==void 0||e in n.o)||(n.o[e]=t,n.D[e]=!0,!0)},deleteProperty:function(n,e){return YO(n.t,e)!==void 0||e in n.t?(n.D[e]=!1,KO(n),yN(n)):delete n.D[e],n.o&&delete n.o[e],!0},getOwnPropertyDescriptor:function(n,e){var t=Hb(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.i!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty:function(){Xg(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){Xg(12)}},Qx={};g$(TN,function(n,e){Qx[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Qx.deleteProperty=function(n,e){return Qx.set.call(this,n,e,void 0)},Qx.set=function(n,e,t){return TN.set.call(this,n[0],e,t,n[0])};var Iwe=function(){function n(t){var i=this;this.g=vG,this.F=!0,this.produce=function(s,o,l){if(typeof s=="function"&&typeof o!="function"){var u=o;o=s;var d=i;return function(A){var I=this;A===void 0&&(A=u);for(var L=arguments.length,O=Array(L>1?L-1:0),P=1;P<L;P++)O[P-1]=arguments[P];return d.produce(A,function(N){var z;return(z=o).call.apply(z,[I,N].concat(O))})}}var p;if(typeof o!="function"&&Xg(6),l!==void 0&&typeof l!="function"&&Xg(7),R1(s)){var _=pG(i),y=bN(i,s,void 0),b=!0;try{p=o(y),b=!1}finally{b?bI(_):vN(_)}return typeof Promise<"u"&&p instanceof Promise?p.then(function(A){return jO(_,l),XO(A,_)},function(A){throw bI(_),A}):(jO(_,l),XO(p,_))}if(!s||typeof s!="object"){if((p=o(s))===void 0&&(p=s),p===vY&&(p=void 0),i.F&&fF(p,!0),l){var E=[],C=[];Q0("Patches").M(s,p,E,C),l(E,C)}return p}Xg(21,s)},this.produceWithPatches=function(s,o){if(typeof s=="function")return function(p){for(var _=arguments.length,y=Array(_>1?_-1:0),b=1;b<_;b++)y[b-1]=arguments[b];return i.produceWithPatches(p,function(E){return s.apply(void 0,[E].concat(y))})};var l,u,d=i.produce(s,o,function(p,_){l=p,u=_});return typeof Promise<"u"&&d instanceof Promise?d.then(function(p){return[p,l,u]}):[d,l,u]},typeof(t==null?void 0:t.useProxies)=="boolean"&&this.setUseProxies(t.useProxies),typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var e=n.prototype;return e.createDraft=function(t){R1(t)||Xg(8),vE(t)&&(t=xwe(t));var i=pG(this),s=bN(this,t,void 0);return s[Rm].C=!0,vN(i),s},e.finishDraft=function(t,i){var s=t&&t[Rm],o=s.A;return jO(o,i),XO(void 0,o)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!vG&&Xg(20),this.g=t},e.applyPatches=function(t,i){var s;for(s=i.length-1;s>=0;s--){var o=i[s];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}s>-1&&(i=i.slice(s+1));var l=Q0("Patches").$;return vE(t)?l(t,i):this.produce(t,function(u){return l(u,i)})},n}(),km=new Iwe,Rwe=km.produce;km.produceWithPatches.bind(km);km.setAutoFreeze.bind(km);km.setUseProxies.bind(km);km.applyPatches.bind(km);km.createDraft.bind(km);km.finishDraft.bind(km);const kwe=n=>(e,t,i)=>(i.setState=(s,o,...l)=>{const u=typeof s=="function"?Rwe(s):s;return e(u,o,...l)},n(i.setState,t,i)),Owe=kwe;class Lwe{constructor(){this._previousTime=0,this._currentTime=0,this._delta=0,this._elapsed=0,this._timescale=1,this._useFixedDelta=!1,this._fixedDelta=16.67,this._usePageVisibilityAPI=typeof document<"u"&&document.hidden!==void 0,this._usePageVisibilityAPI===!0&&(this._pageVisibilityHandler=Dwe.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disableFixedDelta(){return this._useFixedDelta=!1,this}dispose(){return this._usePageVisibilityAPI===!0&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}enableFixedDelta(){return this._useFixedDelta=!0,this}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getFixedDelta(){return this._fixedDelta/1e3}getTimescale(){return this._timescale}reset(){return this._currentTime=this._now(),this}setFixedDelta(e){return this._fixedDelta=e*1e3,this}setTimescale(e){return this._timescale=e,this}update(){return this._useFixedDelta===!0?this._delta=this._fixedDelta:(this._previousTime=this._currentTime,this._currentTime=this._now(),this._delta=this._currentTime-this._previousTime),this._delta*=this._timescale,this._elapsed+=this._delta,this}_now(){return(typeof performance>"u"?Date:performance).now()}}function Dwe(){document.hidden===!1&&this.reset()}var sg={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,i="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",p=500,_="__lodash_placeholder__",y=1,b=2,E=4,C=1,A=2,I=1,L=2,O=4,P=8,N=16,z=32,W=64,H=128,U=256,Q=512,ne=30,oe="...",le=800,ge=16,ce=1,pe=2,Te=3,Oe=1/0,J=9007199254740991,se=17976931348623157e292,ie=NaN,he=4294967295,Se=he-1,Fe=he>>>1,ke=[["ary",H],["bind",I],["bindKey",L],["curry",P],["curryRight",N],["flip",Q],["partial",z],["partialRight",W],["rearg",U]],qe="[object Arguments]",De="[object Array]",rt="[object AsyncFunction]",tt="[object Boolean]",ft="[object Date]",ct="[object DOMException]",Pe="[object Error]",Ce="[object Function]",je="[object GeneratorFunction]",it="[object Map]",ot="[object Number]",vt="[object Null]",It="[object Object]",yt="[object Promise]",kt="[object Proxy]",$t="[object RegExp]",mt="[object Set]",xe="[object String]",re="[object Symbol]",Be="[object Undefined]",dt="[object WeakMap]",bt="[object WeakSet]",Mt="[object ArrayBuffer]",pt="[object DataView]",Ke="[object Float32Array]",Ie="[object Float64Array]",q="[object Int8Array]",ee="[object Int16Array]",de="[object Int32Array]",Ae="[object Uint8Array]",Je="[object Uint8ClampedArray]",jt="[object Uint16Array]",ze="[object Uint32Array]",Yt=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,Kt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xt=/&(?:amp|lt|gt|quot|#39);/g,Dn=/[&<>"']/g,ii=RegExp(Xt.source),Lr=RegExp(Dn.source),Si=/<%-([\s\S]+?)%>/g,Er=/<%([\s\S]+?)%>/g,ir=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,be=/^\w*$/,He=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,at=/[\\^$.*+?()[\]{}|]/g,Ft=RegExp(at.source),rn=/^\s+/,Rn=/\s/,Le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ct=/,? & /,Tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zt=/[()=,{}\[\]\/\s]/,On=/\\(\\)?/g,tr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yr=/\w*$/,Rr=/^[-+]0x[0-9a-f]+$/i,Li=/^0b[01]+$/i,Dr=/^\[object .+?Constructor\]$/,jr=/^0o[0-7]+$/i,bs=/^(?:0|[1-9]\d*)$/,Ia=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wo=/($^)/,jl=/['\n\r\u2028\u2029\\]/g,Zt="\\ud800-\\udfff",Cr="\\u0300-\\u036f",qa="\\ufe20-\\ufe2f",Ra="\\u20d0-\\u20ff",Ns=Cr+qa+Ra,Bs="\\u2700-\\u27bf",Di="a-z\\xdf-\\xf6\\xf8-\\xff",Ar="\\xac\\xb1\\xd7\\xf7",$n="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$r="\\u2000-\\u206f",zr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mr="A-Z\\xc0-\\xd6\\xd8-\\xde",Ni="\\ufe0e\\ufe0f",Ts=Ar+$n+$r+zr,ci="[']",fs="["+Zt+"]",Qa="["+Ts+"]",ka="["+Ns+"]",uc="\\d+",cc="["+Bs+"]",Vs="["+Di+"]",Yo="[^"+Zt+Ts+uc+Bs+Di+mr+"]",Xl="\\ud83c[\\udffb-\\udfff]",mu="(?:"+ka+"|"+Xl+")",hh="[^"+Zt+"]",Ko="(?:\\ud83c[\\udde6-\\uddff]){2}",pr="[\\ud800-\\udbff][\\udc00-\\udfff]",Ei="["+mr+"]",kc="\\u200d",dh="(?:"+Vs+"|"+Yo+")",Oc="(?:"+Ei+"|"+Yo+")",Sl="(?:"+ci+"(?:d|ll|m|re|s|t|ve))?",gu="(?:"+ci+"(?:D|LL|M|RE|S|T|VE))?",El=mu+"?",xl="["+Ni+"]?",gr="(?:"+kc+"(?:"+[hh,Ko,pr].join("|")+")"+xl+El+")*",_r="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Za=xl+El+gr,el="(?:"+[cc,Ko,pr].join("|")+")"+Za,_u="(?:"+[hh+ka+"?",ka,Ko,pr,fs].join("|")+")",Ki=RegExp(ci,"g"),ms=RegExp(ka,"g"),tl=RegExp(Xl+"(?="+Xl+")|"+_u+Za,"g"),Td=RegExp([Ei+"?"+Vs+"+"+Sl+"(?="+[Qa,Ei,"$"].join("|")+")",Oc+"+"+gu+"(?="+[Qa,Ei+dh,"$"].join("|")+")",Ei+"?"+dh+"+"+Sl,Ei+"+"+gu,Yl,_r,uc,el].join("|"),"g"),ro=RegExp("["+kc+Zt+Ns+Ni+"]"),Pu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,aa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],vu=-1,nr={};nr[Ke]=nr[Ie]=nr[q]=nr[ee]=nr[de]=nr[Ae]=nr[Je]=nr[jt]=nr[ze]=!0,nr[qe]=nr[De]=nr[Mt]=nr[tt]=nr[pt]=nr[ft]=nr[Pe]=nr[Ce]=nr[it]=nr[ot]=nr[It]=nr[$t]=nr[mt]=nr[xe]=nr[dt]=!1;var Un={};Un[qe]=Un[De]=Un[Mt]=Un[pt]=Un[tt]=Un[ft]=Un[Ke]=Un[Ie]=Un[q]=Un[ee]=Un[de]=Un[it]=Un[ot]=Un[It]=Un[$t]=Un[mt]=Un[xe]=Un[re]=Un[Ae]=Un[Je]=Un[jt]=Un[ze]=!0,Un[Pe]=Un[Ce]=Un[dt]=!1;var Ss={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},io={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Fu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},yu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ph=parseFloat,Oa=parseInt,la=typeof Y_=="object"&&Y_&&Y_.Object===Object&&Y_,Uu=typeof self=="object"&&self&&self.Object===Object&&self,br=la||Uu||Function("return this")(),Ms=e&&!e.nodeType&&e,vi=Ms&&!0&&n&&!n.nodeType&&n,xi=vi&&vi.exports===Ms,ua=xi&&la.process,Zr=function(){try{var ve=vi&&vi.require&&vi.require("util").types;return ve||ua&&ua.binding&&ua.binding("util")}catch{}}(),bu=Zr&&Zr.isArrayBuffer,$o=Zr&&Zr.isDate,Tu=Zr&&Zr.isMap,nl=Zr&&Zr.isRegExp,Bi=Zr&&Zr.isSet,wi=Zr&&Zr.isTypedArray;function zn(ve,We,Ne){switch(Ne.length){case 0:return ve.call(We);case 1:return ve.call(We,Ne[0]);case 2:return ve.call(We,Ne[0],Ne[1]);case 3:return ve.call(We,Ne[0],Ne[1],Ne[2])}return ve.apply(We,Ne)}function $i(ve,We,Ne,Ot){for(var en=-1,Cn=ve==null?0:ve.length;++en<Cn;){var jn=ve[en];We(Ot,jn,Ne(jn),ve)}return Ot}function Xr(ve,We){for(var Ne=-1,Ot=ve==null?0:ve.length;++Ne<Ot&&We(ve[Ne],Ne,ve)!==!1;);return ve}function od(ve,We){for(var Ne=ve==null?0:ve.length;Ne--&&We(ve[Ne],Ne,ve)!==!1;);return ve}function Su(ve,We){for(var Ne=-1,Ot=ve==null?0:ve.length;++Ne<Ot;)if(!We(ve[Ne],Ne,ve))return!1;return!0}function Gi(ve,We){for(var Ne=-1,Ot=ve==null?0:ve.length,en=0,Cn=[];++Ne<Ot;){var jn=ve[Ne];We(jn,Ne,ve)&&(Cn[en++]=jn)}return Cn}function La(ve,We){var Ne=ve==null?0:ve.length;return!!Ne&&Is(ve,We,0)>-1}function fh(ve,We,Ne){for(var Ot=-1,en=ve==null?0:ve.length;++Ot<en;)if(Ne(We,ve[Ot]))return!0;return!1}function cr(ve,We){for(var Ne=-1,Ot=ve==null?0:ve.length,en=Array(Ot);++Ne<Ot;)en[Ne]=We(ve[Ne],Ne,ve);return en}function Jo(ve,We){for(var Ne=-1,Ot=We.length,en=ve.length;++Ne<Ot;)ve[en+Ne]=We[Ne];return ve}function ad(ve,We,Ne,Ot){var en=-1,Cn=ve==null?0:ve.length;for(Ot&&Cn&&(Ne=ve[++en]);++en<Cn;)Ne=We(Ne,ve[en],en,ve);return Ne}function tp(ve,We,Ne,Ot){var en=ve==null?0:ve.length;for(Ot&&en&&(Ne=ve[--en]);en--;)Ne=We(Ne,ve[en],en,ve);return Ne}function Lc(ve,We){for(var Ne=-1,Ot=ve==null?0:ve.length;++Ne<Ot;)if(We(ve[Ne],Ne,ve))return!0;return!1}var np=ai("length");function Ip(ve){return ve.split("")}function ff(ve){return ve.match(Tt)||[]}function Sd(ve,We,Ne){var Ot;return Ne(ve,function(en,Cn,jn){if(We(en,Cn,jn))return Ot=Cn,!1}),Ot}function Kl(ve,We,Ne,Ot){for(var en=ve.length,Cn=Ne+(Ot?1:-1);Ot?Cn--:++Cn<en;)if(We(ve[Cn],Cn,ve))return Cn;return-1}function Is(ve,We,Ne){return We===We?Nc(ve,We,Ne):Kl(ve,mh,Ne)}function zu(ve,We,Ne,Ot){for(var en=Ne-1,Cn=ve.length;++en<Cn;)if(Ot(ve[en],We))return en;return-1}function mh(ve){return ve!==ve}function Da(ve,We){var Ne=ve==null?0:ve.length;return Ne?Fo(ve,We)/Ne:ie}function ai(ve){return function(We){return We==null?t:We[ve]}}function Sr(ve){return function(We){return ve==null?t:ve[We]}}function so(ve,We,Ne,Ot,en){return en(ve,function(Cn,jn,mn){Ne=Ot?(Ot=!1,Cn):We(Ne,Cn,jn,mn)}),Ne}function Na(ve,We){var Ne=ve.length;for(ve.sort(We);Ne--;)ve[Ne]=ve[Ne].value;return ve}function Fo(ve,We){for(var Ne,Ot=-1,en=ve.length;++Ot<en;){var Cn=We(ve[Ot]);Cn!==t&&(Ne=Ne===t?Cn:Ne+Cn)}return Ne}function Jl(ve,We){for(var Ne=-1,Ot=Array(ve);++Ne<ve;)Ot[Ne]=We(Ne);return Ot}function ql(ve,We){return cr(We,function(Ne){return[Ne,ve[Ne]]})}function Oh(ve){return ve&&ve.slice(0,wl(ve)+1).replace(rn,"")}function Hr(ve){return function(We){return ve(We)}}function Ci(ve,We){return cr(We,function(Ne){return ve[Ne]})}function vr(ve,We){return ve.has(We)}function Wi(ve,We){for(var Ne=-1,Ot=ve.length;++Ne<Ot&&Is(We,ve[Ne],0)>-1;);return Ne}function ca(ve,We){for(var Ne=ve.length;Ne--&&Is(We,ve[Ne],0)>-1;);return Ne}function Eu(ve,We){for(var Ne=ve.length,Ot=0;Ne--;)ve[Ne]===We&&++Ot;return Ot}var rp=Sr(Ss),ip=Sr(io);function ld(ve){return"\\"+yu[ve]}function Hu(ve,We){return ve==null?t:ve[We]}function rl(ve){return ro.test(ve)}function Dc(ve){return Pu.test(ve)}function Lh(ve){for(var We,Ne=[];!(We=ve.next()).done;)Ne.push(We.value);return Ne}function Gu(ve){var We=-1,Ne=Array(ve.size);return ve.forEach(function(Ot,en){Ne[++We]=[en,Ot]}),Ne}function Ql(ve,We){return function(Ne){return ve(We(Ne))}}function Ps(ve,We){for(var Ne=-1,Ot=ve.length,en=0,Cn=[];++Ne<Ot;){var jn=ve[Ne];(jn===We||jn===_)&&(ve[Ne]=_,Cn[en++]=Ne)}return Cn}function Zl(ve){var We=-1,Ne=Array(ve.size);return ve.forEach(function(Ot){Ne[++We]=Ot}),Ne}function Dh(ve){var We=-1,Ne=Array(ve.size);return ve.forEach(function(Ot){Ne[++We]=[Ot,Ot]}),Ne}function Nc(ve,We,Ne){for(var Ot=Ne-1,en=ve.length;++Ot<en;)if(ve[Ot]===We)return Ot;return-1}function Bc(ve,We,Ne){for(var Ot=Ne+1;Ot--;)if(ve[Ot]===We)return Ot;return Ot}function ns(ve){return rl(ve)?eu(ve):np(ve)}function Nr(ve){return rl(ve)?xu(ve):Ip(ve)}function wl(ve){for(var We=ve.length;We--&&Rn.test(ve.charAt(We)););return We}var Ba=Sr(Fu);function eu(ve){for(var We=tl.lastIndex=0;tl.test(ve);)++We;return We}function xu(ve){return ve.match(tl)||[]}function gh(ve){return ve.match(Td)||[]}var Ed=function ve(We){We=We==null?br:hi.defaults(br.Object(),We,hi.pick(br,aa));var Ne=We.Array,Ot=We.Date,en=We.Error,Cn=We.Function,jn=We.Math,mn=We.Object,Br=We.RegExp,oo=We.String,yi=We.TypeError,ao=Ne.prototype,il=Cn.prototype,Pi=mn.prototype,gs=We["__core-js_shared__"],wu=il.toString,Xn=Pi.hasOwnProperty,ha=0,js=function(){var c=/[^.]+$/.exec(gs&&gs.keys&&gs.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Fs=Pi.toString,Pa=wu.call(mn),Nh=br._,_h=Br("^"+wu.call(Xn).replace(at,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hc=xi?We.Buffer:t,qo=We.Symbol,Pc=We.Uint8Array,Bh=hc?hc.allocUnsafe:t,Fa=Ql(mn.getPrototypeOf,mn),Ph=mn.create,dc=Pi.propertyIsEnumerable,Wu=ao.splice,ud=qo?qo.isConcatSpreadable:t,Qo=qo?qo.iterator:t,lo=qo?qo.toStringTag:t,$l=function(){try{var c=ba(mn,"defineProperty");return c({},"",{}),c}catch{}}(),Fh=We.clearTimeout!==br.clearTimeout&&We.clearTimeout,Fi=Ot&&Ot.now!==br.Date.now&&Ot.now,cd=We.setTimeout!==br.setTimeout&&We.setTimeout,Vu=jn.ceil,tu=jn.floor,Fc=mn.getOwnPropertySymbols,xd=hc?hc.isBuffer:t,Cl=We.isFinite,wd=ao.join,Uh=Ql(mn.keys,mn),ei=jn.max,Ai=jn.min,mf=Ot.now,Rp=We.parseInt,Al=jn.random,nu=ao.reverse,ju=ba(We,"DataView"),Xu=ba(We,"Map"),vh=ba(We,"Promise"),sl=ba(We,"Set"),Zo=ba(We,"WeakMap"),Ml=ba(mn,"create"),Uc=Zo&&new Zo,Il={},zc=Xa(ju),pc=Xa(Xu),$d=Xa(vh),Ua=Xa(sl),Gr=Xa(Zo),ol=qo?qo.prototype:t,Ji=ol?ol.valueOf:t,da=ol?ol.toString:t;function Y(c){if(ui(c)&&!Mn(c)&&!(c instanceof dn)){if(c instanceof xr)return c;if(Xn.call(c,"__wrapped__"))return Od(c)}return new xr(c)}var Es=function(){function c(){}return function(m){if(!ri(m))return{};if(Ph)return Ph(m);c.prototype=m;var x=new c;return c.prototype=t,x}}();function pa(){}function xr(c,m){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=t}Y.templateSettings={escape:Si,evaluate:Er,interpolate:ir,variable:"",imports:{_:Y}},Y.prototype=pa.prototype,Y.prototype.constructor=Y,xr.prototype=Es(pa.prototype),xr.prototype.constructor=xr;function dn(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=he,this.__views__=[]}function kp(){var c=new dn(this.__wrapped__);return c.__actions__=ni(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=ni(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=ni(this.__views__),c}function al(){if(this.__filtered__){var c=new dn(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Mi(){var c=this.__wrapped__.value(),m=this.__dir__,x=Mn(c),D=m<0,G=x?c.length:0,K=fn(0,G,this.__views__),ae=K.start,fe=K.end,Ee=fe-ae,Ze=D?fe:ae-1,et=this.__iteratees__,ut=et.length,Rt=0,Vt=Ai(Ee,this.__takeCount__);if(!x||!D&&G==Ee&&Vt==Ee)return Kc(c,this.__actions__);var hn=[];e:for(;Ee--&&Rt<Vt;){Ze+=m;for(var In=-1,un=c[Ze];++In<ut;){var Gn=et[In],Jn=Gn.iteratee,oa=Gn.type,Qs=Jn(un);if(oa==pe)un=Qs;else if(!Qs){if(oa==ce)continue e;break e}}hn[Rt++]=un}return hn}dn.prototype=Es(pa.prototype),dn.prototype.constructor=dn;function li(c){var m=-1,x=c==null?0:c.length;for(this.clear();++m<x;){var D=c[m];this.set(D[0],D[1])}}function qi(){this.__data__=Ml?Ml(null):{},this.size=0}function rs(c){var m=this.has(c)&&delete this.__data__[c];return this.size-=m?1:0,m}function Hc(c){var m=this.__data__;if(Ml){var x=m[c];return x===d?t:x}return Xn.call(m,c)?m[c]:t}function fa(c){var m=this.__data__;return Ml?m[c]!==t:Xn.call(m,c)}function ma(c,m){var x=this.__data__;return this.size+=this.has(c)?0:1,x[c]=Ml&&m===t?d:m,this}li.prototype.clear=qi,li.prototype.delete=rs,li.prototype.get=Hc,li.prototype.has=fa,li.prototype.set=ma;function is(c){var m=-1,x=c==null?0:c.length;for(this.clear();++m<x;){var D=c[m];this.set(D[0],D[1])}}function Gc(){this.__data__=[],this.size=0}function ea(c){var m=this.__data__,x=_s(m,c);if(x<0)return!1;var D=m.length-1;return x==D?m.pop():Wu.call(m,x,1),--this.size,!0}function Cd(c){var m=this.__data__,x=_s(m,c);return x<0?t:m[x][1]}function Ad(c){return _s(this.__data__,c)>-1}function zh(c,m){var x=this.__data__,D=_s(x,c);return D<0?(++this.size,x.push([c,m])):x[D][1]=m,this}is.prototype.clear=Gc,is.prototype.delete=ea,is.prototype.get=Cd,is.prototype.has=Ad,is.prototype.set=zh;function Us(c){var m=-1,x=c==null?0:c.length;for(this.clear();++m<x;){var D=c[m];this.set(D[0],D[1])}}function Vn(){this.size=0,this.__data__={hash:new li,map:new(Xu||is),string:new li}}function zs(c){var m=qc(this,c).delete(c);return this.size-=m?1:0,m}function Xs(c){return qc(this,c).get(c)}function Ui(c){return qc(this,c).has(c)}function ru(c,m){var x=qc(this,c),D=x.size;return x.set(c,m),this.size+=x.size==D?0:1,this}Us.prototype.clear=Vn,Us.prototype.delete=zs,Us.prototype.get=Xs,Us.prototype.has=Ui,Us.prototype.set=ru;function Uo(c){var m=-1,x=c==null?0:c.length;for(this.__data__=new Us;++m<x;)this.add(c[m])}function Sn(c){return this.__data__.set(c,d),this}function di(c){return this.__data__.has(c)}Uo.prototype.add=Uo.prototype.push=Sn,Uo.prototype.has=di;function pi(c){var m=this.__data__=new is(c);this.size=m.size}function Op(){this.__data__=new is,this.size=0}function yh(c){var m=this.__data__,x=m.delete(c);return this.size=m.size,x}function uo(c){return this.__data__.get(c)}function ga(c){return this.__data__.has(c)}function xn(c,m){var x=this.__data__;if(x instanceof is){var D=x.__data__;if(!Xu||D.length<s-1)return D.push([c,m]),this.size=++x.size,this;x=this.__data__=new Us(D)}return x.set(c,m),this.size=x.size,this}pi.prototype.clear=Op,pi.prototype.delete=yh,pi.prototype.get=uo,pi.prototype.has=ga,pi.prototype.set=xn;function gn(c,m){var x=Mn(c),D=!x&&zd(c),G=!x&&!D&&rh(c),K=!x&&!D&&!G&&Wd(c),ae=x||D||G||K,fe=ae?Jl(c.length,oo):[],Ee=fe.length;for(var Ze in c)(m||Xn.call(c,Ze))&&!(ae&&(Ze=="length"||G&&(Ze=="offset"||Ze=="parent")||K&&(Ze=="buffer"||Ze=="byteLength"||Ze=="byteOffset")||ja(Ze,Ee)))&&fe.push(Ze);return fe}function ll(c){var m=c.length;return m?c[Rs(0,m-1)]:t}function fc(c,m){return hr(ni(c),za(m,0,c.length))}function gf(c){return hr(ni(c))}function iu(c,m,x){(x!==t&&!xa(c[m],x)||x===t&&!(m in c))&&zo(c,m,x)}function Co(c,m,x){var D=c[m];(!(Xn.call(c,m)&&xa(D,x))||x===t&&!(m in c))&&zo(c,m,x)}function _s(c,m){for(var x=c.length;x--;)if(xa(c[x][0],m))return x;return-1}function ul(c,m,x,D){return Ao(c,function(G,K,ae){m(D,G,x(G),ae)}),D}function ss(c,m){return c&&ls(m,Ti(m),c)}function cl(c,m){return c&&ls(m,es(m),c)}function zo(c,m,x){m=="__proto__"&&$l?$l(c,m,{configurable:!0,enumerable:!0,value:x,writable:!0}):c[m]=x}function Hh(c,m){for(var x=-1,D=m.length,G=Ne(D),K=c==null;++x<D;)G[x]=K?t:cm(c,m[x]);return G}function za(c,m,x){return c===c&&(x!==t&&(c=c<=x?c:x),m!==t&&(c=c>=m?c:m)),c}function Ii(c,m,x,D,G,K){var ae,fe=m&y,Ee=m&b,Ze=m&E;if(x&&(ae=G?x(c,D,G,K):x(c)),ae!==t)return ae;if(!ri(c))return c;var et=Mn(c);if(et){if(ae=zm(c),!fe)return ni(c,ae)}else{var ut=us(c),Rt=ut==Ce||ut==je;if(rh(c))return Jc(c,fe);if(ut==It||ut==qe||Rt&&!G){if(ae=Ee||Rt?{}:Tc(c),!fe)return Ee?pd(c,cl(ae,c)):Vh(c,ss(ae,c))}else{if(!Un[ut])return G?c:{};ae=Js(c,ut,fe)}}K||(K=new pi);var Vt=K.get(c);if(Vt)return Vt;K.set(c,ae),f_(c)?c.forEach(function(un){ae.add(Ii(un,m,x,un,c,K))}):Kh(c)&&c.forEach(function(un,Gn){ae.set(Gn,Ii(un,m,x,Gn,c,K))});var hn=Ze?Ee?wr:ur:Ee?es:Ti,In=et?t:hn(c);return Xr(In||c,function(un,Gn){In&&(Gn=un,un=c[Gn]),Co(ae,Gn,Ii(un,m,x,Gn,c,K))}),ae}function Md(c){var m=Ti(c);return function(x){return Wc(x,c,m)}}function Wc(c,m,x){var D=x.length;if(c==null)return!D;for(c=mn(c);D--;){var G=x[D],K=m[G],ae=c[G];if(ae===t&&!(G in c)||!K(ae))return!1}return!0}function Gh(c,m,x){if(typeof c!="function")throw new yi(l);return up(function(){c.apply(t,x)},m)}function Ho(c,m,x,D){var G=-1,K=La,ae=!0,fe=c.length,Ee=[],Ze=m.length;if(!fe)return Ee;x&&(m=cr(m,Hr(x))),D?(K=fh,ae=!1):m.length>=s&&(K=vr,ae=!1,m=new Uo(m));e:for(;++G<fe;){var et=c[G],ut=x==null?et:x(et);if(et=D||et!==0?et:0,ae&&ut===ut){for(var Rt=Ze;Rt--;)if(m[Rt]===ut)continue e;Ee.push(et)}else K(m,ut,D)||Ee.push(et)}return Ee}var Ao=jh(os),sp=jh(Ha,!0);function $u(c,m){var x=!0;return Ao(c,function(D,G,K){return x=!!m(D,G,K),x}),x}function Rl(c,m,x){for(var D=-1,G=c.length;++D<G;){var K=c[D],ae=m(K);if(ae!=null&&(fe===t?ae===ae&&!sa(ae):x(ae,fe)))var fe=ae,Ee=K}return Ee}function hd(c,m,x,D){var G=c.length;for(x=wn(x),x<0&&(x=-x>G?0:G+x),D=D===t||D>G?G:wn(D),D<0&&(D+=G),D=x>D?0:b0(D);x<D;)c[x++]=m;return c}function mc(c,m){var x=[];return Ao(c,function(D,G,K){m(D,G,K)&&x.push(D)}),x}function Yr(c,m,x,D,G){var K=-1,ae=c.length;for(x||(x=Id),G||(G=[]);++K<ae;){var fe=c[K];m>0&&x(fe)?m>1?Yr(fe,m-1,x,D,G):Jo(G,fe):D||(G[G.length]=fe)}return G}var su=bc(),Yu=bc(!0);function os(c,m){return c&&su(c,m,Ti)}function Ha(c,m){return c&&Yu(c,m,Ti)}function xs(c,m){return Gi(m,function(x){return xc(c[x])})}function ws(c,m){m=na(m,c);for(var x=0,D=m.length;c!=null&&x<D;)c=c[vo(m[x++])];return x&&x==D?c:t}function Vc(c,m,x){var D=m(c);return Mn(c)?D:Jo(D,x(c))}function fi(c){return c==null?c===t?Be:vt:lo&&lo in mn(c)?pl(c):Tg(c)}function Ga(c,m){return c>m}function gc(c,m){return c!=null&&Xn.call(c,m)}function op(c,m){return c!=null&&m in mn(c)}function bh(c,m,x){return c>=Ai(m,x)&&c<ei(m,x)}function ta(c,m,x){for(var D=x?fh:La,G=c[0].length,K=c.length,ae=K,fe=Ne(K),Ee=1/0,Ze=[];ae--;){var et=c[ae];ae&&m&&(et=cr(et,Hr(m))),Ee=Ai(et.length,Ee),fe[ae]=!x&&(m||G>=120&&et.length>=120)?new Uo(ae&&et):t}et=c[0];var ut=-1,Rt=fe[0];e:for(;++ut<G&&Ze.length<Ee;){var Vt=et[ut],hn=m?m(Vt):Vt;if(Vt=x||Vt!==0?Vt:0,!(Rt?vr(Rt,hn):D(Ze,hn,x))){for(ae=K;--ae;){var In=fe[ae];if(!(In?vr(In,hn):D(c[ae],hn,x)))continue e}Rt&&Rt.push(hn),Ze.push(Vt)}}return Ze}function Vi(c,m,x,D){return os(c,function(G,K,ae){m(D,x(G),K,ae)}),D}function Ln(c,m,x){m=na(m,c),c=yf(c,m);var D=c==null?c:c[vo(ks(m))];return D==null?t:zn(D,c,x)}function qn(c){return ui(c)&&fi(c)==qe}function kr(c){return ui(c)&&fi(c)==Mt}function ti(c){return ui(c)&&fi(c)==ft}function Jr(c,m,x,D,G){return c===m?!0:c==null||m==null||!ui(c)&&!ui(m)?c!==c&&m!==m:Mo(c,m,x,D,Jr,G)}function Mo(c,m,x,D,G,K){var ae=Mn(c),fe=Mn(m),Ee=ae?De:us(c),Ze=fe?De:us(m);Ee=Ee==qe?It:Ee,Ze=Ze==qe?It:Ze;var et=Ee==It,ut=Ze==It,Rt=Ee==Ze;if(Rt&&rh(c)){if(!rh(m))return!1;ae=!0,et=!1}if(Rt&&!et)return K||(K=new pi),ae||Wd(c)?tn(c,m,x,D,G,K):Tn(c,m,Ee,x,D,G,K);if(!(x&C)){var Vt=et&&Xn.call(c,"__wrapped__"),hn=ut&&Xn.call(m,"__wrapped__");if(Vt||hn){var In=Vt?c.value():c,un=hn?m.value():m;return K||(K=new pi),G(In,un,x,D,K)}}return Rt?(K||(K=new pi),An(c,m,x,D,G,K)):!1}function as(c){return ui(c)&&us(c)==it}function Qi(c,m,x,D){var G=x.length,K=G,ae=!D;if(c==null)return!K;for(c=mn(c);G--;){var fe=x[G];if(ae&&fe[2]?fe[1]!==c[fe[0]]:!(fe[0]in c))return!1}for(;++G<K;){fe=x[G];var Ee=fe[0],Ze=c[Ee],et=fe[1];if(ae&&fe[2]){if(Ze===t&&!(Ee in c))return!1}else{var ut=new pi;if(D)var Rt=D(Ze,et,Ee,c,m,ut);if(!(Rt===t?Jr(et,Ze,C|A,D,ut):Rt))return!1}}return!0}function ou(c){if(!ri(c)||qs(c))return!1;var m=xc(c)?_h:Dr;return m.test(Xa(c))}function Ku(c){return ui(c)&&fi(c)==$t}function _c(c){return ui(c)&&us(c)==mt}function Ju(c){return ui(c)&&wh(c.length)&&!!nr[fi(c)]}function Ys(c){return typeof c=="function"?c:c==null?Oo:typeof c=="object"?Mn(c)?ho(c[0],c[1]):Au(c):A_(c)}function co(c){if(!Sc(c))return Uh(c);var m=[];for(var x in mn(c))Xn.call(c,x)&&x!="constructor"&&m.push(x);return m}function dd(c){if(!ri(c))return Sa(c);var m=Sc(c),x=[];for(var D in c)D=="constructor"&&(m||!Xn.call(c,D))||x.push(D);return x}function _a(c,m){return c<m}function Cu(c,m){var x=-1,D=zi(c)?Ne(c.length):[];return Ao(c,function(G,K,ae){D[++x]=m(G,K,ae)}),D}function Au(c){var m=Vf(c);return m.length==1&&m[0][2]?jf(m[0][0],m[0][1]):function(x){return x===c||Qi(x,c,m)}}function ho(c,m){return Ta(c)&&_f(m)?jf(vo(c),m):function(x){var D=cm(x,c);return D===t&&D===m?hm(x,c):Jr(m,D,C|A)}}function po(c,m,x,D,G){c!==m&&su(m,function(K,ae){if(G||(G=new pi),ri(K))kl(c,m,ae,x,po,D,G);else{var fe=D?D(uu(c,ae),K,ae+"",c,m,G):t;fe===t&&(fe=K),iu(c,ae,fe)}},es)}function kl(c,m,x,D,G,K,ae){var fe=uu(c,x),Ee=uu(m,x),Ze=ae.get(Ee);if(Ze){iu(c,x,Ze);return}var et=K?K(fe,Ee,x+"",c,m,ae):t,ut=et===t;if(ut){var Rt=Mn(Ee),Vt=!Rt&&rh(Ee),hn=!Rt&&!Vt&&Wd(Ee);et=Ee,Rt||Vt||hn?Mn(fe)?et=fe:Kr(fe)?et=ni(fe):Vt?(ut=!1,et=Jc(Ee,!0)):hn?(ut=!1,et=Ll(Ee,!0)):et=[]:Fr(Ee)||zd(Ee)?(et=fe,zd(fe)?et=Uy(fe):(!ri(fe)||xc(fe))&&(et=Tc(Ee))):ut=!1}ut&&(ae.set(Ee,et),G(et,Ee,D,K,ae),ae.delete(Ee)),iu(c,x,et)}function Go(c,m){var x=c.length;if(x)return m+=m<0?x:0,ja(m,x)?c[m]:t}function qu(c,m,x){m.length?m=cr(m,function(K){return Mn(K)?function(ae){return ws(ae,K.length===1?K[0]:K)}:K}):m=[Oo];var D=-1;m=cr(m,Hr(sn()));var G=Cu(c,function(K,ae,fe){var Ee=cr(m,function(Ze){return Ze(K)});return{criteria:Ee,index:++D,value:K}});return Na(G,function(K,ae){return Dl(K,ae,x)})}function Qu(c,m){return Th(c,m,function(x,D){return hm(c,D)})}function Th(c,m,x){for(var D=-1,G=m.length,K={};++D<G;){var ae=m[D],fe=ws(c,ae);x(fe,ae)&&mi(K,na(ae,c),fe)}return K}function Sh(c){return function(m){return ws(m,c)}}function Mr(c,m,x,D){var G=D?zu:Is,K=-1,ae=m.length,fe=c;for(c===m&&(m=ni(m)),x&&(fe=cr(c,Hr(x)));++K<ae;)for(var Ee=0,Ze=m[K],et=x?x(Ze):Ze;(Ee=G(fe,et,Ee,D))>-1;)fe!==c&&Wu.call(fe,Ee,1),Wu.call(c,Ee,1);return c}function vs(c,m){for(var x=c?m.length:0,D=x-1;x--;){var G=m[x];if(x==D||G!==K){var K=G;ja(G)?Wu.call(c,G,1):Yc(c,G)}}return c}function Rs(c,m){return c+tu(Al()*(m-c+1))}function Wa(c,m,x,D){for(var G=-1,K=ei(Vu((m-c)/(x||1)),0),ae=Ne(K);K--;)ae[D?K:++G]=c,c+=x;return ae}function Hs(c,m){var x="";if(!c||m<1||m>J)return x;do m%2&&(x+=c),m=tu(m/2),m&&(c+=c);while(m);return x}function cn(c,m){return kd(Xf(c,m,Oo),c+"")}function jc(c){return ll(fp(c))}function bn(c,m){var x=fp(c);return hr(x,za(m,0,x.length))}function mi(c,m,x,D){if(!ri(c))return c;m=na(m,c);for(var G=-1,K=m.length,ae=K-1,fe=c;fe!=null&&++G<K;){var Ee=vo(m[G]),Ze=x;if(Ee==="__proto__"||Ee==="constructor"||Ee==="prototype")return c;if(G!=ae){var et=fe[Ee];Ze=D?D(et,Ee,fe):t,Ze===t&&(Ze=ri(et)?et:ja(m[G+1])?[]:{})}Co(fe,Ee,Ze),fe=fe[Ee]}return c}var $s=Uc?function(c,m){return Uc.set(c,m),c}:Oo,au=$l?function(c,m){return $l(c,"toString",{configurable:!0,enumerable:!1,value:w_(m),writable:!0})}:Oo;function Ol(c){return hr(fp(c))}function Bt(c,m,x){var D=-1,G=c.length;m<0&&(m=-m>G?0:G+m),x=x>G?G:x,x<0&&(x+=G),G=m>x?0:x-m>>>0,m>>>=0;for(var K=Ne(G);++D<G;)K[D]=c[D+m];return K}function hl(c,m){var x;return Ao(c,function(D,G,K){return x=m(D,G,K),!x}),!!x}function Wr(c,m,x){var D=0,G=c==null?D:c.length;if(typeof m=="number"&&m===m&&G<=Fe){for(;D<G;){var K=D+G>>>1,ae=c[K];ae!==null&&!sa(ae)&&(x?ae<=m:ae<m)?D=K+1:G=K}return G}return Zu(c,m,Oo,x)}function Zu(c,m,x,D){var G=0,K=c==null?0:c.length;if(K===0)return 0;m=x(m);for(var ae=m!==m,fe=m===null,Ee=sa(m),Ze=m===t;G<K;){var et=tu((G+K)/2),ut=x(c[et]),Rt=ut!==t,Vt=ut===null,hn=ut===ut,In=sa(ut);if(ae)var un=D||hn;else Ze?un=hn&&(D||Rt):fe?un=hn&&Rt&&(D||!Vt):Ee?un=hn&&Rt&&!Vt&&(D||!In):Vt||In?un=!1:un=D?ut<=m:ut<m;un?G=et+1:K=et}return Ai(K,Se)}function Wh(c,m){for(var x=-1,D=c.length,G=0,K=[];++x<D;){var ae=c[x],fe=m?m(ae):ae;if(!x||!xa(fe,Ee)){var Ee=fe;K[G++]=ae===0?0:ae}}return K}function Xc(c){return typeof c=="number"?c:sa(c)?ie:+c}function si(c){if(typeof c=="string")return c;if(Mn(c))return cr(c,si)+"";if(sa(c))return da?da.call(c):"";var m=c+"";return m=="0"&&1/c==-Oe?"-0":m}function ji(c,m,x){var D=-1,G=La,K=c.length,ae=!0,fe=[],Ee=fe;if(x)ae=!1,G=fh;else if(K>=s){var Ze=m?null:Or(c);if(Ze)return Zl(Ze);ae=!1,G=vr,Ee=new Uo}else Ee=m?[]:fe;e:for(;++D<K;){var et=c[D],ut=m?m(et):et;if(et=x||et!==0?et:0,ae&&ut===ut){for(var Rt=Ee.length;Rt--;)if(Ee[Rt]===ut)continue e;m&&Ee.push(ut),fe.push(et)}else G(Ee,ut,x)||(Ee!==fe&&Ee.push(ut),fe.push(et))}return fe}function Yc(c,m){return m=na(m,c),c=yf(c,m),c==null||delete c[vo(ks(m))]}function fo(c,m,x,D){return mi(c,m,x(ws(c,m)),D)}function dl(c,m,x,D){for(var G=c.length,K=D?G:-1;(D?K--:++K<G)&&m(c[K],K,c););return x?Bt(c,D?0:K,D?K+1:G):Bt(c,D?K+1:0,D?G:K)}function Kc(c,m){var x=c;return x instanceof dn&&(x=x.value()),ad(m,function(D,G){return G.func.apply(G.thisArg,Jo([D],G.args))},x)}function vc(c,m,x){var D=c.length;if(D<2)return D?ji(c[0]):[];for(var G=-1,K=Ne(D);++G<D;)for(var ae=c[G],fe=-1;++fe<D;)fe!=G&&(K[G]=Ho(K[G]||ae,c[fe],m,x));return ji(Yr(K,1),m,x)}function ec(c,m,x){for(var D=-1,G=c.length,K=m.length,ae={};++D<G;){var fe=D<K?m[D]:t;x(ae,c[D],fe)}return ae}function Io(c){return Kr(c)?c:[]}function Ks(c){return typeof c=="function"?c:Oo}function na(c,m){return Mn(c)?c:Ta(c,m)?[c]:a0(er(c))}var Eh=cn;function mo(c,m,x){var D=c.length;return x=x===t?D:x,!m&&x>=D?c:Bt(c,m,x)}var Mu=Fh||function(c){return br.clearTimeout(c)};function Jc(c,m){if(m)return c.slice();var x=c.length,D=Bh?Bh(x):new c.constructor(x);return c.copy(D),D}function yc(c){var m=new c.constructor(c.byteLength);return new Pc(m).set(new Pc(c)),m}function Wo(c,m){var x=m?yc(c.buffer):c.buffer;return new c.constructor(x,c.byteOffset,c.byteLength)}function go(c){var m=new c.constructor(c.source,yr.exec(c));return m.lastIndex=c.lastIndex,m}function tc(c){return Ji?mn(Ji.call(c)):{}}function Ll(c,m){var x=m?yc(c.buffer):c.buffer;return new c.constructor(x,c.byteOffset,c.length)}function _o(c,m){if(c!==m){var x=c!==t,D=c===null,G=c===c,K=sa(c),ae=m!==t,fe=m===null,Ee=m===m,Ze=sa(m);if(!fe&&!Ze&&!K&&c>m||K&&ae&&Ee&&!fe&&!Ze||D&&ae&&Ee||!x&&Ee||!G)return 1;if(!D&&!K&&!Ze&&c<m||Ze&&x&&G&&!D&&!K||fe&&x&&G||!ae&&G||!Ee)return-1}return 0}function Dl(c,m,x){for(var D=-1,G=c.criteria,K=m.criteria,ae=G.length,fe=x.length;++D<ae;){var Ee=_o(G[D],K[D]);if(Ee){if(D>=fe)return Ee;var Ze=x[D];return Ee*(Ze=="desc"?-1:1)}}return c.index-m.index}function Va(c,m,x,D){for(var G=-1,K=c.length,ae=x.length,fe=-1,Ee=m.length,Ze=ei(K-ae,0),et=Ne(Ee+Ze),ut=!D;++fe<Ee;)et[fe]=m[fe];for(;++G<ae;)(ut||G<K)&&(et[x[G]]=c[G]);for(;Ze--;)et[fe++]=c[G++];return et}function lu(c,m,x,D){for(var G=-1,K=c.length,ae=-1,fe=x.length,Ee=-1,Ze=m.length,et=ei(K-fe,0),ut=Ne(et+Ze),Rt=!D;++G<et;)ut[G]=c[G];for(var Vt=G;++Ee<Ze;)ut[Vt+Ee]=m[Ee];for(;++ae<fe;)(Rt||G<K)&&(ut[Vt+x[ae]]=c[G++]);return ut}function ni(c,m){var x=-1,D=c.length;for(m||(m=Ne(D));++x<D;)m[x]=c[x];return m}function ls(c,m,x,D){var G=!x;x||(x={});for(var K=-1,ae=m.length;++K<ae;){var fe=m[K],Ee=D?D(x[fe],c[fe],fe,x,c):t;Ee===t&&(Ee=c[fe]),G?zo(x,fe,Ee):Co(x,fe,Ee)}return x}function Vh(c,m){return ls(c,lp(c),m)}function pd(c,m){return ls(c,Xh(c),m)}function va(c,m){return function(x,D){var G=Mn(x)?$i:ul,K=m?m():{};return G(x,c,sn(D,2),K)}}function ya(c){return cn(function(m,x){var D=-1,G=x.length,K=G>1?x[G-1]:t,ae=G>2?x[2]:t;for(K=c.length>3&&typeof K=="function"?(G--,K):t,ae&&Pr(x[0],x[1],ae)&&(K=G<3?t:K,G=1),m=mn(m);++D<G;){var fe=x[D];fe&&c(m,fe,D,K)}return m})}function jh(c,m){return function(x,D){if(x==null)return x;if(!zi(x))return c(x,D);for(var G=x.length,K=m?G:-1,ae=mn(x);(m?K--:++K<G)&&D(ae[K],K,ae)!==!1;);return x}}function bc(c){return function(m,x,D){for(var G=-1,K=mn(m),ae=D(m),fe=ae.length;fe--;){var Ee=ae[c?fe:++G];if(x(K[Ee],Ee,K)===!1)break}return m}}function Lp(c,m,x){var D=m&I,G=g(c);function K(){var ae=this&&this!==br&&this instanceof K?G:c;return ae.apply(D?x:this,arguments)}return K}function w(c){return function(m){m=er(m);var x=rl(m)?Nr(m):t,D=x?x[0]:m.charAt(0),G=x?mo(x,1).join(""):m.slice(1);return D[c]()+G}}function h(c){return function(m){return ad(eb(Sv(m).replace(Ki,"")),c,"")}}function g(c){return function(){var m=arguments;switch(m.length){case 0:return new c;case 1:return new c(m[0]);case 2:return new c(m[0],m[1]);case 3:return new c(m[0],m[1],m[2]);case 4:return new c(m[0],m[1],m[2],m[3]);case 5:return new c(m[0],m[1],m[2],m[3],m[4]);case 6:return new c(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new c(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var x=Es(c.prototype),D=c.apply(x,m);return ri(D)?D:x}}function $(c,m,x){var D=g(c);function G(){for(var K=arguments.length,ae=Ne(K),fe=K,Ee=xh(G);fe--;)ae[fe]=arguments[fe];var Ze=K<3&&ae[0]!==Ee&&ae[K-1]!==Ee?[]:Ps(ae,Ee);if(K-=Ze.length,K<x)return vn(c,m,V,G.placeholder,t,ae,Ze,t,t,x-K);var et=this&&this!==br&&this instanceof G?D:c;return zn(et,this,ae)}return G}function M(c){return function(m,x,D){var G=mn(m);if(!zi(m)){var K=sn(x,3);m=Ti(m),x=function(fe){return K(G[fe],fe,G)}}var ae=c(m,x,D);return ae>-1?G[K?m[ae]:ae]:t}}function B(c){return Bn(function(m){var x=m.length,D=x,G=xr.prototype.thru;for(c&&m.reverse();D--;){var K=m[D];if(typeof K!="function")throw new yi(l);if(G&&!ae&&ap(K)=="wrapper")var ae=new xr([],!0)}for(D=ae?D:x;++D<x;){K=m[D];var fe=ap(K),Ee=fe=="wrapper"?Nl(K):t;Ee&&Ri(Ee[0])&&Ee[1]==(H|P|z|U)&&!Ee[4].length&&Ee[9]==1?ae=ae[ap(Ee[0])].apply(ae,Ee[3]):ae=K.length==1&&Ri(K)?ae[fe]():ae.thru(K)}return function(){var Ze=arguments,et=Ze[0];if(ae&&Ze.length==1&&Mn(et))return ae.plant(et).value();for(var ut=0,Rt=x?m[ut].apply(this,Ze):et;++ut<x;)Rt=m[ut].call(this,Rt);return Rt}})}function V(c,m,x,D,G,K,ae,fe,Ee,Ze){var et=m&H,ut=m&I,Rt=m&L,Vt=m&(P|N),hn=m&Q,In=Rt?t:g(c);function un(){for(var Gn=arguments.length,Jn=Ne(Gn),oa=Gn;oa--;)Jn[oa]=arguments[oa];if(Vt)var Qs=xh(un),Ls=Eu(Jn,Qs);if(D&&(Jn=Va(Jn,D,G,Vt)),K&&(Jn=lu(Jn,K,ae,Vt)),Gn-=Ls,Vt&&Gn<Ze){var gi=Ps(Jn,Qs);return vn(c,m,V,un.placeholder,x,Jn,gi,fe,Ee,Ze-Gn)}var Ul=ut?x:this,$c=Rt?Ul[c]:c;return Gn=Jn.length,fe?Jn=fl(Jn,fe):hn&&Gn>1&&Jn.reverse(),et&&Ee<Gn&&(Jn.length=Ee),this&&this!==br&&this instanceof un&&($c=In||g($c)),$c.apply(Ul,Jn)}return un}function ue(c,m){return function(x,D){return Vi(x,c,m(D),{})}}function Me(c,m){return function(x,D){var G;if(x===t&&D===t)return m;if(x!==t&&(G=x),D!==t){if(G===t)return D;typeof x=="string"||typeof D=="string"?(x=si(x),D=si(D)):(x=Xc(x),D=Xc(D)),G=c(x,D)}return G}}function Qe(c){return Bn(function(m){return m=cr(m,Hr(sn())),cn(function(x){var D=this;return c(m,function(G){return zn(G,D,x)})})})}function Et(c,m){m=m===t?" ":si(m);var x=m.length;if(x<2)return x?Hs(m,c):m;var D=Hs(m,Vu(c/ns(m)));return rl(m)?mo(Nr(D),0,c).join(""):D.slice(0,c)}function Jt(c,m,x,D){var G=m&I,K=g(c);function ae(){for(var fe=-1,Ee=arguments.length,Ze=-1,et=D.length,ut=Ne(et+Ee),Rt=this&&this!==br&&this instanceof ae?K:c;++Ze<et;)ut[Ze]=D[Ze];for(;Ee--;)ut[Ze++]=arguments[++fe];return zn(Rt,G?x:this,ut)}return ae}function an(c){return function(m,x,D){return D&&typeof D!="number"&&Pr(m,x,D)&&(x=D=t),m=wc(m),x===t?(x=m,m=0):x=wc(x),D=D===t?m<x?1:-1:wc(D),Wa(m,x,D,c)}}function _n(c){return function(m,x){return typeof m=="string"&&typeof x=="string"||(m=Xi(m),x=Xi(x)),c(m,x)}}function vn(c,m,x,D,G,K,ae,fe,Ee,Ze){var et=m&P,ut=et?ae:t,Rt=et?t:ae,Vt=et?K:t,hn=et?t:K;m|=et?z:W,m&=~(et?W:z),m&O||(m&=~(I|L));var In=[c,m,G,Vt,ut,hn,Rt,fe,Ee,Ze],un=x.apply(t,In);return Ri(c)&&Rd(un,In),un.placeholder=D,Qc(un,c,m)}function pn(c){var m=jn[c];return function(x,D){if(x=Xi(x),D=D==null?0:Ai(wn(D),292),D&&Cl(x)){var G=(er(x)+"e").split("e"),K=m(G[0]+"e"+(+G[1]+D));return G=(er(K)+"e").split("e"),+(G[0]+"e"+(+G[1]-D))}return m(x)}}var Or=sl&&1/Zl(new sl([,-0]))[1]==Oe?function(c){return new sl(c)}:I0;function St(c){return function(m){var x=us(m);return x==it?Gu(m):x==mt?Dh(m):ql(m,c(m))}}function we(c,m,x,D,G,K,ae,fe){var Ee=m&L;if(!Ee&&typeof c!="function")throw new yi(l);var Ze=D?D.length:0;if(Ze||(m&=~(z|W),D=G=t),ae=ae===t?ae:ei(wn(ae),0),fe=fe===t?fe:wn(fe),Ze-=G?G.length:0,m&W){var et=D,ut=G;D=G=t}var Rt=Ee?t:Nl(c),Vt=[c,m,x,D,G,et,ut,K,ae,fe];if(Rt&&vf(Vt,Rt),c=Vt[0],m=Vt[1],x=Vt[2],D=Vt[3],G=Vt[4],fe=Vt[9]=Vt[9]===t?Ee?0:c.length:ei(Vt[9]-Ze,0),!fe&&m&(P|N)&&(m&=~(P|N)),!m||m==I)var hn=Lp(c,m,x);else m==P||m==N?hn=$(c,m,fe):(m==z||m==(I|z))&&!G.length?hn=Jt(c,m,x,D):hn=V.apply(t,Vt);var In=Rt?$s:Rd;return Qc(In(hn,Vt),c,m)}function Re(c,m,x,D){return c===t||xa(c,Pi[x])&&!Xn.call(D,x)?m:c}function nt(c,m,x,D,G,K){return ri(c)&&ri(m)&&(K.set(m,c),po(c,m,t,nt,K),K.delete(m)),c}function Ut(c){return Fr(c)?t:c}function tn(c,m,x,D,G,K){var ae=x&C,fe=c.length,Ee=m.length;if(fe!=Ee&&!(ae&&Ee>fe))return!1;var Ze=K.get(c),et=K.get(m);if(Ze&&et)return Ze==m&&et==c;var ut=-1,Rt=!0,Vt=x&A?new Uo:t;for(K.set(c,m),K.set(m,c);++ut<fe;){var hn=c[ut],In=m[ut];if(D)var un=ae?D(In,hn,ut,m,c,K):D(hn,In,ut,c,m,K);if(un!==t){if(un)continue;Rt=!1;break}if(Vt){if(!Lc(m,function(Gn,Jn){if(!vr(Vt,Jn)&&(hn===Gn||G(hn,Gn,x,D,K)))return Vt.push(Jn)})){Rt=!1;break}}else if(!(hn===In||G(hn,In,x,D,K))){Rt=!1;break}}return K.delete(c),K.delete(m),Rt}function Tn(c,m,x,D,G,K,ae){switch(x){case pt:if(c.byteLength!=m.byteLength||c.byteOffset!=m.byteOffset)return!1;c=c.buffer,m=m.buffer;case Mt:return!(c.byteLength!=m.byteLength||!K(new Pc(c),new Pc(m)));case tt:case ft:case ot:return xa(+c,+m);case Pe:return c.name==m.name&&c.message==m.message;case $t:case xe:return c==m+"";case it:var fe=Gu;case mt:var Ee=D&C;if(fe||(fe=Zl),c.size!=m.size&&!Ee)return!1;var Ze=ae.get(c);if(Ze)return Ze==m;D|=A,ae.set(c,m);var et=tn(fe(c),fe(m),D,G,K,ae);return ae.delete(c),et;case re:if(Ji)return Ji.call(c)==Ji.call(m)}return!1}function An(c,m,x,D,G,K){var ae=x&C,fe=ur(c),Ee=fe.length,Ze=ur(m),et=Ze.length;if(Ee!=et&&!ae)return!1;for(var ut=Ee;ut--;){var Rt=fe[ut];if(!(ae?Rt in m:Xn.call(m,Rt)))return!1}var Vt=K.get(c),hn=K.get(m);if(Vt&&hn)return Vt==m&&hn==c;var In=!0;K.set(c,m),K.set(m,c);for(var un=ae;++ut<Ee;){Rt=fe[ut];var Gn=c[Rt],Jn=m[Rt];if(D)var oa=ae?D(Jn,Gn,Rt,m,c,K):D(Gn,Jn,Rt,c,m,K);if(!(oa===t?Gn===Jn||G(Gn,Jn,x,D,K):oa)){In=!1;break}un||(un=Rt=="constructor")}if(In&&!un){var Qs=c.constructor,Ls=m.constructor;Qs!=Ls&&"constructor"in c&&"constructor"in m&&!(typeof Qs=="function"&&Qs instanceof Qs&&typeof Ls=="function"&&Ls instanceof Ls)&&(In=!1)}return K.delete(c),K.delete(m),In}function Bn(c){return kd(Xf(c,t,cp),c+"")}function ur(c){return Vc(c,Ti,lp)}function wr(c){return Vc(c,es,Xh)}var Nl=Uc?function(c){return Uc.get(c)}:I0;function ap(c){for(var m=c.name+"",x=Il[m],D=Xn.call(Il,m)?x.length:0;D--;){var G=x[D],K=G.func;if(K==null||K==c)return G.name}return m}function xh(c){var m=Xn.call(Y,"placeholder")?Y:c;return m.placeholder}function sn(){var c=Y.iteratee||Yi;return c=c===Yi?Ys:c,arguments.length?c(arguments[0],arguments[1]):c}function qc(c,m){var x=c.__data__;return Ge(m)?x[typeof m=="string"?"string":"hash"]:x.map}function Vf(c){for(var m=Ti(c),x=m.length;x--;){var D=m[x],G=c[D];m[x]=[D,G,_f(G)]}return m}function ba(c,m){var x=Hu(c,m);return ou(x)?x:t}function pl(c){var m=Xn.call(c,lo),x=c[lo];try{c[lo]=t;var D=!0}catch{}var G=Fs.call(c);return D&&(m?c[lo]=x:delete c[lo]),G}var lp=Fc?function(c){return c==null?[]:(c=mn(c),Gi(Fc(c),function(m){return dc.call(c,m)}))}:R0,Xh=Fc?function(c){for(var m=[];c;)Jo(m,lp(c)),c=Fa(c);return m}:R0,us=fi;(ju&&us(new ju(new ArrayBuffer(1)))!=pt||Xu&&us(new Xu)!=it||vh&&us(vh.resolve())!=yt||sl&&us(new sl)!=mt||Zo&&us(new Zo)!=dt)&&(us=function(c){var m=fi(c),x=m==It?c.constructor:t,D=x?Xa(x):"";if(D)switch(D){case zc:return pt;case pc:return it;case $d:return yt;case Ua:return mt;case Gr:return dt}return m});function fn(c,m,x){for(var D=-1,G=x.length;++D<G;){var K=x[D],ae=K.size;switch(K.type){case"drop":c+=ae;break;case"dropRight":m-=ae;break;case"take":m=Ai(m,c+ae);break;case"takeRight":c=ei(c,m-ae);break}}return{start:c,end:m}}function o0(c){var m=c.match(gt);return m?m[1].split(Ct):[]}function bg(c,m,x){m=na(m,c);for(var D=-1,G=m.length,K=!1;++D<G;){var ae=vo(m[D]);if(!(K=c!=null&&x(c,ae)))break;c=c[ae]}return K||++D!=G?K:(G=c==null?0:c.length,!!G&&wh(G)&&ja(ae,G)&&(Mn(c)||zd(c)))}function zm(c){var m=c.length,x=new c.constructor(m);return m&&typeof c[0]=="string"&&Xn.call(c,"index")&&(x.index=c.index,x.input=c.input),x}function Tc(c){return typeof c.constructor=="function"&&!Sc(c)?Es(Fa(c)):{}}function Js(c,m,x){var D=c.constructor;switch(m){case Mt:return yc(c);case tt:case ft:return new D(+c);case pt:return Wo(c,x);case Ke:case Ie:case q:case ee:case de:case Ae:case Je:case jt:case ze:return Ll(c,x);case it:return new D;case ot:case xe:return new D(c);case $t:return go(c);case mt:return new D;case re:return tc(c)}}function Dp(c,m){var x=m.length;if(!x)return c;var D=x-1;return m[D]=(x>1?"& ":"")+m[D],m=m.join(x>2?", ":" "),c.replace(Le,`{
/* [wrapped with `+m+`] */
`)}function Id(c){return Mn(c)||zd(c)||!!(ud&&c&&c[ud])}function ja(c,m){var x=typeof c;return m=m??J,!!m&&(x=="number"||x!="symbol"&&bs.test(c))&&c>-1&&c%1==0&&c<m}function Pr(c,m,x){if(!ri(x))return!1;var D=typeof m;return(D=="number"?zi(x)&&ja(m,x.length):D=="string"&&m in x)?xa(x[m],c):!1}function Ta(c,m){if(Mn(c))return!1;var x=typeof c;return x=="number"||x=="symbol"||x=="boolean"||c==null||sa(c)?!0:be.test(c)||!te.test(c)||m!=null&&c in mn(m)}function Ge(c){var m=typeof c;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?c!=="__proto__":c===null}function Ri(c){var m=ap(c),x=Y[m];if(typeof x!="function"||!(m in dn.prototype))return!1;if(c===x)return!0;var D=Nl(x);return!!D&&c===D[0]}function qs(c){return!!js&&js in c}var a_=gs?xc:fm;function Sc(c){var m=c&&c.constructor,x=typeof m=="function"&&m.prototype||Pi;return c===x}function _f(c){return c===c&&!ri(c)}function jf(c,m){return function(x){return x==null?!1:x[c]===m&&(m!==t||c in mn(x))}}function l_(c){var m=ht(c,function(D){return x.size===p&&x.clear(),D}),x=m.cache;return m}function vf(c,m){var x=c[1],D=m[1],G=x|D,K=G<(I|L|H),ae=D==H&&x==P||D==H&&x==U&&c[7].length<=m[8]||D==(H|U)&&m[7].length<=m[8]&&x==P;if(!(K||ae))return c;D&I&&(c[2]=m[2],G|=x&I?0:O);var fe=m[3];if(fe){var Ee=c[3];c[3]=Ee?Va(Ee,fe,m[4]):fe,c[4]=Ee?Ps(c[3],_):m[4]}return fe=m[5],fe&&(Ee=c[5],c[5]=Ee?lu(Ee,fe,m[6]):fe,c[6]=Ee?Ps(c[5],_):m[6]),fe=m[7],fe&&(c[7]=fe),D&H&&(c[8]=c[8]==null?m[8]:Ai(c[8],m[8])),c[9]==null&&(c[9]=m[9]),c[0]=m[0],c[1]=G,c}function Sa(c){var m=[];if(c!=null)for(var x in mn(c))m.push(x);return m}function Tg(c){return Fs.call(c)}function Xf(c,m,x){return m=ei(m===t?c.length-1:m,0),function(){for(var D=arguments,G=-1,K=ei(D.length-m,0),ae=Ne(K);++G<K;)ae[G]=D[m+G];G=-1;for(var fe=Ne(m+1);++G<m;)fe[G]=D[G];return fe[m]=x(ae),zn(c,this,fe)}}function yf(c,m){return m.length<2?c:ws(c,Bt(m,0,-1))}function fl(c,m){for(var x=c.length,D=Ai(m.length,x),G=ni(c);D--;){var K=m[D];c[D]=ja(K,x)?G[K]:t}return c}function uu(c,m){if(!(m==="constructor"&&typeof c[m]=="function")&&m!="__proto__")return c[m]}var Rd=Sg($s),up=cd||function(c,m){return br.setTimeout(c,m)},kd=Sg(au);function Qc(c,m,x){var D=m+"";return kd(c,Dp(D,Yf(o0(D),x)))}function Sg(c){var m=0,x=0;return function(){var D=mf(),G=ge-(D-x);if(x=D,G>0){if(++m>=le)return arguments[0]}else m=0;return c.apply(t,arguments)}}function hr(c,m){var x=-1,D=c.length,G=D-1;for(m=m===t?D:m;++x<m;){var K=Rs(x,G),ae=c[K];c[K]=c[x],c[x]=ae}return c.length=m,c}var a0=l_(function(c){var m=[];return c.charCodeAt(0)===46&&m.push(""),c.replace(He,function(x,D,G,K){m.push(G?K.replace(On,"$1"):D||x)}),m});function vo(c){if(typeof c=="string"||sa(c))return c;var m=c+"";return m=="0"&&1/c==-Oe?"-0":m}function Xa(c){if(c!=null){try{return wu.call(c)}catch{}try{return c+""}catch{}}return""}function Yf(c,m){return Xr(ke,function(x){var D="_."+x[0];m&x[1]&&!La(c,D)&&c.push(D)}),c.sort()}function Od(c){if(c instanceof dn)return c.clone();var m=new xr(c.__wrapped__,c.__chain__);return m.__actions__=ni(c.__actions__),m.__index__=c.__index__,m.__values__=c.__values__,m}function Kf(c,m,x){(x?Pr(c,m,x):m===t)?m=1:m=ei(wn(m),0);var D=c==null?0:c.length;if(!D||m<1)return[];for(var G=0,K=0,ae=Ne(Vu(D/m));G<D;)ae[K++]=Bt(c,G,G+=m);return ae}function Iu(c){for(var m=-1,x=c==null?0:c.length,D=0,G=[];++m<x;){var K=c[m];K&&(G[D++]=K)}return G}function l0(){var c=arguments.length;if(!c)return[];for(var m=Ne(c-1),x=arguments[0],D=c;D--;)m[D-1]=arguments[D];return Jo(Mn(x)?ni(x):[x],Yr(m,1))}var Vo=cn(function(c,m){return Kr(c)?Ho(c,Yr(m,1,Kr,!0)):[]}),Zi=cn(function(c,m){var x=ks(m);return Kr(x)&&(x=t),Kr(c)?Ho(c,Yr(m,1,Kr,!0),sn(x,2)):[]}),cu=cn(function(c,m){var x=ks(m);return Kr(x)&&(x=t),Kr(c)?Ho(c,Yr(m,1,Kr,!0),t,x):[]});function ml(c,m,x){var D=c==null?0:c.length;return D?(m=x||m===t?1:wn(m),Bt(c,m<0?0:m,D)):[]}function Ru(c,m,x){var D=c==null?0:c.length;return D?(m=x||m===t?1:wn(m),m=D-m,Bt(c,0,m<0?0:m)):[]}function hu(c,m){return c&&c.length?dl(c,sn(m,3),!0,!0):[]}function bf(c,m){return c&&c.length?dl(c,sn(m,3),!0):[]}function Bl(c,m,x,D){var G=c==null?0:c.length;return G?(x&&typeof x!="number"&&Pr(c,m,x)&&(x=0,D=G),hd(c,m,x,D)):[]}function Ld(c,m,x){var D=c==null?0:c.length;if(!D)return-1;var G=x==null?0:wn(x);return G<0&&(G=ei(D+G,0)),Kl(c,sn(m,3),G)}function Dd(c,m,x){var D=c==null?0:c.length;if(!D)return-1;var G=D-1;return x!==t&&(G=wn(x),G=x<0?ei(D+G,0):Ai(G,D-1)),Kl(c,sn(m,3),G,!0)}function cp(c){var m=c==null?0:c.length;return m?Yr(c,1):[]}function Eg(c){var m=c==null?0:c.length;return m?Yr(c,Oe):[]}function Jf(c,m){var x=c==null?0:c.length;return x?(m=m===t?1:wn(m),Yr(c,m)):[]}function Zc(c){for(var m=-1,x=c==null?0:c.length,D={};++m<x;){var G=c[m];D[G[0]]=G[1]}return D}function gl(c){return c&&c.length?c[0]:t}function eh(c,m,x){var D=c==null?0:c.length;if(!D)return-1;var G=x==null?0:wn(x);return G<0&&(G=ei(D+G,0)),Is(c,m,G)}function Nd(c){var m=c==null?0:c.length;return m?Bt(c,0,-1):[]}var Hm=cn(function(c){var m=cr(c,Io);return m.length&&m[0]===c[0]?ta(m):[]}),Gm=cn(function(c){var m=ks(c),x=cr(c,Io);return m===ks(x)?m=t:x.pop(),x.length&&x[0]===c[0]?ta(x,sn(m,2)):[]}),yo=cn(function(c){var m=ks(c),x=cr(c,Io);return m=typeof m=="function"?m:t,m&&x.pop(),x.length&&x[0]===c[0]?ta(x,t,m):[]});function qf(c,m){return c==null?"":wd.call(c,m)}function ks(c){var m=c==null?0:c.length;return m?c[m-1]:t}function Pl(c,m,x){var D=c==null?0:c.length;if(!D)return-1;var G=D;return x!==t&&(G=wn(x),G=G<0?ei(D+G,0):Ai(G,D-1)),m===m?Bc(c,m,G):Kl(c,mh,G,!0)}function Tf(c,m){return c&&c.length?Go(c,wn(m)):t}var xg=cn(Bd);function Bd(c,m){return c&&c.length&&m&&m.length?Mr(c,m):c}function Wm(c,m,x){return c&&c.length&&m&&m.length?Mr(c,m,sn(x,2)):c}function Ec(c,m,x){return c&&c.length&&m&&m.length?Mr(c,m,t,x):c}var Pd=Bn(function(c,m){var x=c==null?0:c.length,D=Hh(c,m);return vs(c,cr(m,function(G){return ja(G,x)?+G:G}).sort(_o)),D});function ra(c,m){var x=[];if(!(c&&c.length))return x;var D=-1,G=[],K=c.length;for(m=sn(m,3);++D<K;){var ae=c[D];m(ae,D,c)&&(x.push(ae),G.push(D))}return vs(c,G),x}function Ea(c){return c==null?c:nu.call(c)}function u_(c,m,x){var D=c==null?0:c.length;return D?(x&&typeof x!="number"&&Pr(c,m,x)?(m=0,x=D):(m=m==null?0:wn(m),x=x===t?D:wn(x)),Bt(c,m,x)):[]}function Qf(c,m){return Wr(c,m)}function u0(c,m,x){return Zu(c,m,sn(x,2))}function hv(c,m){var x=c==null?0:c.length;if(x){var D=Wr(c,m);if(D<x&&xa(c[D],m))return D}return-1}function Np(c,m){return Wr(c,m,!0)}function Sf(c,m,x){return Zu(c,m,sn(x,2),!0)}function c0(c,m){var x=c==null?0:c.length;if(x){var D=Wr(c,m,!0)-1;if(xa(c[D],m))return D}return-1}function Ef(c){return c&&c.length?Wh(c):[]}function h0(c,m){return c&&c.length?Wh(c,sn(m,2)):[]}function Zf(c){var m=c==null?0:c.length;return m?Bt(c,1,m):[]}function d0(c,m,x){return c&&c.length?(m=x||m===t?1:wn(m),Bt(c,0,m<0?0:m)):[]}function c_(c,m,x){var D=c==null?0:c.length;return D?(m=x||m===t?1:wn(m),m=D-m,Bt(c,m<0?0:m,D)):[]}function em(c,m){return c&&c.length?dl(c,sn(m,3),!1,!0):[]}function hp(c,m){return c&&c.length?dl(c,sn(m,3)):[]}var h_=cn(function(c){return ji(Yr(c,1,Kr,!0))}),Dy=cn(function(c){var m=ks(c);return Kr(m)&&(m=t),ji(Yr(c,1,Kr,!0),sn(m,2))}),p0=cn(function(c){var m=ks(c);return m=typeof m=="function"?m:t,ji(Yr(c,1,Kr,!0),t,m)});function f0(c){return c&&c.length?ji(c):[]}function Bp(c,m){return c&&c.length?ji(c,sn(m,2)):[]}function Pn(c,m){return m=typeof m=="function"?m:t,c&&c.length?ji(c,t,m):[]}function th(c){if(!(c&&c.length))return[];var m=0;return c=Gi(c,function(x){if(Kr(x))return m=ei(x.length,m),!0}),Jl(m,function(x){return cr(c,ai(x))})}function xf(c,m){if(!(c&&c.length))return[];var x=th(c);return m==null?x:cr(x,function(D){return zn(m,t,D)})}var ia=cn(function(c,m){return Kr(c)?Ho(c,m):[]}),d_=cn(function(c){return vc(Gi(c,Kr))}),m0=cn(function(c){var m=ks(c);return Kr(m)&&(m=t),vc(Gi(c,Kr),sn(m,2))}),tm=cn(function(c){var m=ks(c);return m=typeof m=="function"?m:t,vc(Gi(c,Kr),t,m)}),Ny=cn(th);function dv(c,m){return ec(c||[],m||[],Co)}function nh(c,m){return ec(c||[],m||[],mi)}var bo=cn(function(c){var m=c.length,x=m>1?c[m-1]:t;return x=typeof x=="function"?(c.pop(),x):t,xf(c,x)});function ku(c){var m=Y(c);return m.__chain__=!0,m}function wg(c,m){return m(c),c}function Pp(c,m){return m(c)}var Yh=Bn(function(c){var m=c.length,x=m?c[0]:0,D=this.__wrapped__,G=function(K){return Hh(K,c)};return m>1||this.__actions__.length||!(D instanceof dn)||!ja(x)?this.thru(G):(D=D.slice(x,+x+(m?1:0)),D.__actions__.push({func:Pp,args:[G],thisArg:t}),new xr(D,this.__chain__).thru(function(K){return m&&!K.length&&K.push(t),K}))});function nm(){return ku(this)}function Fp(){return new xr(this.value(),this.__chain__)}function Up(){this.__values__===t&&(this.__values__=yv(this.value()));var c=this.__index__>=this.__values__.length,m=c?t:this.__values__[this.__index__++];return{done:c,value:m}}function wf(){return this}function fd(c){for(var m,x=this;x instanceof pa;){var D=Od(x);D.__index__=0,D.__values__=t,m?G.__wrapped__=D:m=D;var G=D;x=x.__wrapped__}return G.__wrapped__=c,m}function dp(){var c=this.__wrapped__;if(c instanceof dn){var m=c;return this.__actions__.length&&(m=new dn(this)),m=m.reverse(),m.__actions__.push({func:Pp,args:[Ea],thisArg:t}),new xr(m,this.__chain__)}return this.thru(Ea)}function Vm(){return Kc(this.__wrapped__,this.__actions__)}var pv=va(function(c,m,x){Xn.call(c,x)?++c[x]:zo(c,x,1)});function $g(c,m,x){var D=Mn(c)?Su:$u;return x&&Pr(c,m,x)&&(m=t),D(c,sn(m,3))}function Fd(c,m){var x=Mn(c)?Gi:mc;return x(c,sn(m,3))}var ki=M(Ld),rm=M(Dd);function jm(c,m){return Yr(bi(c,m),1)}function Cg(c,m){return Yr(bi(c,m),Oe)}function fv(c,m,x){return x=x===t?1:wn(x),Yr(bi(c,m),x)}function Xm(c,m){var x=Mn(c)?Xr:Ao;return x(c,sn(m,3))}function $f(c,m){var x=Mn(c)?od:sp;return x(c,sn(m,3))}var Ym=va(function(c,m,x){Xn.call(c,x)?c[x].push(m):zo(c,x,[m])});function zp(c,m,x,D){c=zi(c)?c:fp(c),x=x&&!D?wn(x):0;var G=c.length;return x<0&&(x=ei(G+x,0)),um(c)?x<=G&&c.indexOf(m,x)>-1:!!G&&Is(c,m,x)>-1}var Hp=cn(function(c,m,x){var D=-1,G=typeof m=="function",K=zi(c)?Ne(c.length):[];return Ao(c,function(ae){K[++D]=G?zn(m,ae,x):Ln(ae,m,x)}),K}),im=va(function(c,m,x){zo(c,x,m)});function bi(c,m){var x=Mn(c)?cr:Cu;return x(c,sn(m,3))}function Gp(c,m,x,D){return c==null?[]:(Mn(m)||(m=m==null?[]:[m]),x=D?t:x,Mn(x)||(x=x==null?[]:[x]),qu(c,m,x))}var sm=va(function(c,m,x){c[x?0:1].push(m)},function(){return[[],[]]});function om(c,m,x){var D=Mn(c)?ad:so,G=arguments.length<3;return D(c,sn(m,4),x,G,Ao)}function Cf(c,m,x){var D=Mn(c)?tp:so,G=arguments.length<3;return D(c,sn(m,4),x,G,sp)}function Ag(c,m){var x=Mn(c)?Gi:mc;return x(c,xt(sn(m,3)))}function v(c){var m=Mn(c)?ll:jc;return m(c)}function T(c,m,x){(x?Pr(c,m,x):m===t)?m=1:m=wn(m);var D=Mn(c)?fc:bn;return D(c,m)}function R(c){var m=Mn(c)?gf:Ol;return m(c)}function F(c){if(c==null)return 0;if(zi(c))return um(c)?ns(c):c.length;var m=us(c);return m==it||m==mt?c.size:co(c).length}function X(c,m,x){var D=Mn(c)?Lc:hl;return x&&Pr(c,m,x)&&(m=t),D(c,sn(m,3))}var Z=cn(function(c,m){if(c==null)return[];var x=m.length;return x>1&&Pr(c,m[0],m[1])?m=[]:x>2&&Pr(m[0],m[1],m[2])&&(m=[m[0]]),qu(c,Yr(m,1),[])}),ye=Fi||function(){return br.Date.now()};function Xe(c,m){if(typeof m!="function")throw new yi(l);return c=wn(c),function(){if(--c<1)return m.apply(this,arguments)}}function st(c,m,x){return m=x?t:m,m=c&&m==null?c.length:m,we(c,H,t,t,t,t,m)}function Lt(c,m){var x;if(typeof m!="function")throw new yi(l);return c=wn(c),function(){return--c>0&&(x=m.apply(this,arguments)),c<=1&&(m=t),x}}var qt=cn(function(c,m,x){var D=I;if(x.length){var G=Ps(x,xh(qt));D|=z}return we(c,D,m,x,G)}),ln=cn(function(c,m,x){var D=I|L;if(x.length){var G=Ps(x,xh(ln));D|=z}return we(m,D,c,x,G)});function nn(c,m,x){m=x?t:m;var D=we(c,P,t,t,t,t,t,m);return D.placeholder=nn.placeholder,D}function kn(c,m,x){m=x?t:m;var D=we(c,N,t,t,t,t,t,m);return D.placeholder=kn.placeholder,D}function Kn(c,m,x){var D,G,K,ae,fe,Ee,Ze=0,et=!1,ut=!1,Rt=!0;if(typeof c!="function")throw new yi(l);m=Xi(m)||0,ri(x)&&(et=!!x.leading,ut="maxWait"in x,K=ut?ei(Xi(x.maxWait)||0,m):K,Rt="trailing"in x?!!x.trailing:Rt);function Vt(gi){var Ul=D,$c=G;return D=G=t,Ze=gi,ae=c.apply($c,Ul),ae}function hn(gi){return Ze=gi,fe=up(Gn,m),et?Vt(gi):ae}function In(gi){var Ul=gi-Ee,$c=gi-Ze,Av=m-Ul;return ut?Ai(Av,K-$c):Av}function un(gi){var Ul=gi-Ee,$c=gi-Ze;return Ee===t||Ul>=m||Ul<0||ut&&$c>=K}function Gn(){var gi=ye();if(un(gi))return Jn(gi);fe=up(Gn,In(gi))}function Jn(gi){return fe=t,Rt&&D?Vt(gi):(D=G=t,ae)}function oa(){fe!==t&&Mu(fe),Ze=0,D=Ee=G=fe=t}function Qs(){return fe===t?ae:Jn(ye())}function Ls(){var gi=ye(),Ul=un(gi);if(D=arguments,G=this,Ee=gi,Ul){if(fe===t)return hn(Ee);if(ut)return Mu(fe),fe=up(Gn,m),Vt(Ee)}return fe===t&&(fe=up(Gn,m)),ae}return Ls.cancel=oa,Ls.flush=Qs,Ls}var Zn=cn(function(c,m){return Gh(c,1,m)}),Ro=cn(function(c,m,x){return Gh(c,Xi(m)||0,x)});function wt(c){return we(c,Q)}function ht(c,m){if(typeof c!="function"||m!=null&&typeof m!="function")throw new yi(l);var x=function(){var D=arguments,G=m?m.apply(this,D):D[0],K=x.cache;if(K.has(G))return K.get(G);var ae=c.apply(this,D);return x.cache=K.set(G,ae)||K,ae};return x.cache=new(ht.Cache||Us),x}ht.Cache=Us;function xt(c){if(typeof c!="function")throw new yi(l);return function(){var m=arguments;switch(m.length){case 0:return!c.call(this);case 1:return!c.call(this,m[0]);case 2:return!c.call(this,m[0],m[1]);case 3:return!c.call(this,m[0],m[1],m[2])}return!c.apply(this,m)}}function yn(c){return Lt(2,c)}var sr=Eh(function(c,m){m=m.length==1&&Mn(m[0])?cr(m[0],Hr(sn())):cr(Yr(m,1),Hr(sn()));var x=m.length;return cn(function(D){for(var G=-1,K=Ai(D.length,x);++G<K;)D[G]=m[G].call(this,D[G]);return zn(c,this,D)})}),Qn=cn(function(c,m){var x=Ps(m,xh(Qn));return we(c,z,t,m,x)}),dr=cn(function(c,m){var x=Ps(m,xh(dr));return we(c,W,t,m,x)}),Ir=Bn(function(c,m){return we(c,U,t,t,t,m)});function Fl(c,m){if(typeof c!="function")throw new yi(l);return m=m===t?m:wn(m),cn(c,m)}function cs(c,m){if(typeof c!="function")throw new yi(l);return m=m==null?0:ei(wn(m),0),cn(function(x){var D=x[m],G=mo(x,0,m);return D&&Jo(G,D),zn(c,this,G)})}function Wp(c,m,x){var D=!0,G=!0;if(typeof c!="function")throw new yi(l);return ri(x)&&(D="leading"in x?!!x.leading:D,G="trailing"in x?!!x.trailing:G),Kn(c,m,{leading:D,maxWait:m,trailing:G})}function g0(c){return st(c,1)}function Ou(c,m){return Qn(Ks(m),c)}function Ud(){if(!arguments.length)return[];var c=arguments[0];return Mn(c)?c:[c]}function G1(c){return Ii(c,E)}function FE(c,m){return m=typeof m=="function"?m:t,Ii(c,E,m)}function UE(c){return Ii(c,y|E)}function am(c,m){return m=typeof m=="function"?m:t,Ii(c,y|E,m)}function By(c,m){return m==null||Wc(c,m,Ti(m))}function xa(c,m){return c===m||c!==c&&m!==m}var W1=_n(Ga),Mg=_n(function(c,m){return c>=m}),zd=qn(function(){return arguments}())?qn:function(c){return ui(c)&&Xn.call(c,"callee")&&!dc.call(c,"callee")},Mn=Ne.isArray,mv=bu?Hr(bu):kr;function zi(c){return c!=null&&wh(c.length)&&!xc(c)}function Kr(c){return ui(c)&&zi(c)}function Py(c){return c===!0||c===!1||ui(c)&&fi(c)==tt}var rh=xd||fm,V1=$o?Hr($o):ti;function pp(c){return ui(c)&&c.nodeType===1&&!Fr(c)}function p_(c){if(c==null)return!0;if(zi(c)&&(Mn(c)||typeof c=="string"||typeof c.splice=="function"||rh(c)||Wd(c)||zd(c)))return!c.length;var m=us(c);if(m==it||m==mt)return!c.size;if(Sc(c))return!co(c).length;for(var x in c)if(Xn.call(c,x))return!1;return!0}function Hi(c,m){return Jr(c,m)}function ko(c,m,x){x=typeof x=="function"?x:t;var D=x?x(c,m):t;return D===t?Jr(c,m,t,x):!!D}function _0(c){if(!ui(c))return!1;var m=fi(c);return m==Pe||m==ct||typeof c.message=="string"&&typeof c.name=="string"&&!Fr(c)}function gv(c){return typeof c=="number"&&Cl(c)}function xc(c){if(!ri(c))return!1;var m=fi(c);return m==Ce||m==je||m==rt||m==kt}function v0(c){return typeof c=="number"&&c==wn(c)}function wh(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=J}function ri(c){var m=typeof c;return c!=null&&(m=="object"||m=="function")}function ui(c){return c!=null&&typeof c=="object"}var Kh=Tu?Hr(Tu):as;function Cs(c,m){return c===m||Qi(c,m,Vf(m))}function lm(c,m,x){return x=typeof x=="function"?x:t,Qi(c,m,Vf(m),x)}function _v(c){return Hd(c)&&c!=+c}function vv(c){if(a_(c))throw new en(o);return ou(c)}function y0(c){return c===null}function zE(c){return c==null}function Hd(c){return typeof c=="number"||ui(c)&&fi(c)==ot}function Fr(c){if(!ui(c)||fi(c)!=It)return!1;var m=Fa(c);if(m===null)return!0;var x=Xn.call(m,"constructor")&&m.constructor;return typeof x=="function"&&x instanceof x&&wu.call(x)==Pa}var Gd=nl?Hr(nl):Ku;function Ya(c){return v0(c)&&c>=-J&&c<=J}var f_=Bi?Hr(Bi):_c;function um(c){return typeof c=="string"||!Mn(c)&&ui(c)&&fi(c)==xe}function sa(c){return typeof c=="symbol"||ui(c)&&fi(c)==re}var Wd=wi?Hr(wi):Ju;function j1(c){return c===t}function X1(c){return ui(c)&&us(c)==dt}function Jh(c){return ui(c)&&fi(c)==bt}var Fy=_n(_a),Vp=_n(function(c,m){return c<=m});function yv(c){if(!c)return[];if(zi(c))return um(c)?Nr(c):ni(c);if(Qo&&c[Qo])return Lh(c[Qo]());var m=us(c),x=m==it?Gu:m==mt?Zl:fp;return x(c)}function wc(c){if(!c)return c===0?c:0;if(c=Xi(c),c===Oe||c===-Oe){var m=c<0?-1:1;return m*se}return c===c?c:0}function wn(c){var m=wc(c),x=m%1;return m===m?x?m-x:m:0}function b0(c){return c?za(wn(c),0,he):0}function Xi(c){if(typeof c=="number")return c;if(sa(c))return ie;if(ri(c)){var m=typeof c.valueOf=="function"?c.valueOf():c;c=ri(m)?m+"":m}if(typeof c!="string")return c===0?c:+c;c=Oh(c);var x=Li.test(c);return x||jr.test(c)?Oa(c.slice(2),x?2:8):Rr.test(c)?ie:+c}function Uy(c){return ls(c,es(c))}function lt(c){return c?za(wn(c),-J,J):c===0?c:0}function er(c){return c==null?"":si(c)}var m_=ya(function(c,m){if(Sc(m)||zi(m)){ls(m,Ti(m),c);return}for(var x in m)Xn.call(m,x)&&Co(c,x,m[x])}),g_=ya(function(c,m){ls(m,es(m),c)}),qh=ya(function(c,m,x,D){ls(m,es(m),c,D)}),Km=ya(function(c,m,x,D){ls(m,Ti(m),c,D)}),bv=Bn(Hh);function T0(c,m){var x=Es(c);return m==null?x:ss(x,m)}var zy=cn(function(c,m){c=mn(c);var x=-1,D=m.length,G=D>2?m[2]:t;for(G&&Pr(m[0],m[1],G)&&(D=1);++x<D;)for(var K=m[x],ae=es(K),fe=-1,Ee=ae.length;++fe<Ee;){var Ze=ae[fe],et=c[Ze];(et===t||xa(et,Pi[Ze])&&!Xn.call(c,Ze))&&(c[Ze]=K[Ze])}return c}),Y1=cn(function(c){return c.push(t,nt),zn(Qh,t,c)});function Vd(c,m){return Sd(c,sn(m,3),os)}function Hy(c,m){return Sd(c,sn(m,3),Ha)}function __(c,m){return c==null?c:su(c,sn(m,3),es)}function Gy(c,m){return c==null?c:Yu(c,sn(m,3),es)}function K1(c,m){return c&&os(c,sn(m,3))}function J1(c,m){return c&&Ha(c,sn(m,3))}function q1(c){return c==null?[]:xs(c,Ti(c))}function Q1(c){return c==null?[]:xs(c,es(c))}function cm(c,m,x){var D=c==null?t:ws(c,m);return D===t?x:D}function Wy(c,m){return c!=null&&bg(c,m,gc)}function hm(c,m){return c!=null&&bg(c,m,op)}var Vy=ue(function(c,m,x){m!=null&&typeof m.toString!="function"&&(m=Fs.call(m)),c[m]=x},w_(Oo)),v_=ue(function(c,m,x){m!=null&&typeof m.toString!="function"&&(m=Fs.call(m)),Xn.call(c,m)?c[m].push(x):c[m]=[x]},sn),y_=cn(Ln);function Ti(c){return zi(c)?gn(c):co(c)}function es(c){return zi(c)?gn(c,!0):dd(c)}function Z1(c,m){var x={};return m=sn(m,3),os(c,function(D,G,K){zo(x,m(D,G,K),D)}),x}function Af(c,m){var x={};return m=sn(m,3),os(c,function(D,G,K){zo(x,G,m(D,G,K))}),x}var dm=ya(function(c,m,x){po(c,m,x)}),Qh=ya(function(c,m,x,D){po(c,m,x,D)}),eT=Bn(function(c,m){var x={};if(c==null)return x;var D=!1;m=cr(m,function(K){return K=na(K,c),D||(D=K.length>1),K}),ls(c,wr(c),x),D&&(x=Ii(x,y|b|E,Ut));for(var G=m.length;G--;)Yc(x,m[G]);return x});function S0(c,m){return b_(c,xt(sn(m)))}var Qt=Bn(function(c,m){return c==null?{}:Qu(c,m)});function b_(c,m){if(c==null)return{};var x=cr(wr(c),function(D){return[D]});return m=sn(m),Th(c,x,function(D,G){return m(D,G[0])})}function HE(c,m,x){m=na(m,c);var D=-1,G=m.length;for(G||(G=1,c=t);++D<G;){var K=c==null?t:c[vo(m[D])];K===t&&(D=G,K=x),c=xc(K)?K.call(c):K}return c}function GE(c,m,x){return c==null?c:mi(c,m,x)}function WE(c,m,x,D){return D=typeof D=="function"?D:t,c==null?c:mi(c,m,x,D)}var T_=St(Ti),E0=St(es);function hs(c,m,x){var D=Mn(c),G=D||rh(c)||Wd(c);if(m=sn(m,4),x==null){var K=c&&c.constructor;G?x=D?new K:[]:ri(c)?x=xc(K)?Es(Fa(c)):{}:x={}}return(G?Xr:os)(c,function(ae,fe,Ee){return m(x,ae,fe,Ee)}),x}function Ig(c,m){return c==null?!0:Yc(c,m)}function Tv(c,m,x){return c==null?c:fo(c,m,Ks(x))}function VE(c,m,x,D){return D=typeof D=="function"?D:t,c==null?c:fo(c,m,Ks(x),D)}function fp(c){return c==null?[]:Ci(c,Ti(c))}function mp(c){return c==null?[]:Ci(c,es(c))}function S_(c,m,x){return x===t&&(x=m,m=t),x!==t&&(x=Xi(x),x=x===x?x:0),m!==t&&(m=Xi(m),m=m===m?m:0),za(Xi(c),m,x)}function Os(c,m,x){return m=wc(m),x===t?(x=m,m=0):x=wc(x),c=Xi(c),bh(c,m,x)}function tT(c,m,x){if(x&&typeof x!="boolean"&&Pr(c,m,x)&&(m=x=t),x===t&&(typeof m=="boolean"?(x=m,m=t):typeof c=="boolean"&&(x=c,c=t)),c===t&&m===t?(c=0,m=1):(c=wc(c),m===t?(m=c,c=0):m=wc(m)),c>m){var D=c;c=m,m=D}if(x||c%1||m%1){var G=Al();return Ai(c+G*(m-c+ph("1e-"+((G+"").length-1))),m)}return Rs(c,m)}var jy=h(function(c,m,x){return m=m.toLowerCase(),c+(x?pm(m):m)});function pm(c){return C0(er(c).toLowerCase())}function Sv(c){return c=er(c),c&&c.replace(Ia,rp).replace(ms,"")}function Xy(c,m,x){c=er(c),m=si(m);var D=c.length;x=x===t?D:za(wn(x),0,D);var G=x;return x-=m.length,x>=0&&c.slice(x,G)==m}function Yy(c){return c=er(c),c&&Lr.test(c)?c.replace(Dn,ip):c}function Ky(c){return c=er(c),c&&Ft.test(c)?c.replace(at,"\\$&"):c}var E_=h(function(c,m,x){return c+(x?"-":"")+m.toLowerCase()}),jE=h(function(c,m,x){return c+(x?" ":"")+m.toLowerCase()}),nT=w("toLowerCase");function XE(c,m,x){c=er(c),m=wn(m);var D=m?ns(c):0;if(!m||D>=m)return c;var G=(m-D)/2;return Et(tu(G),x)+c+Et(Vu(G),x)}function YE(c,m,x){c=er(c),m=wn(m);var D=m?ns(c):0;return m&&D<m?c+Et(m-D,x):c}function jp(c,m,x){c=er(c),m=wn(m);var D=m?ns(c):0;return m&&D<m?Et(m-D,x)+c:c}function Jy(c,m,x){return x||m==null?m=0:m&&(m=+m),Rp(er(c).replace(rn,""),m||0)}function qy(c,m,x){return(x?Pr(c,m,x):m===t)?m=1:m=wn(m),Hs(er(c),m)}function x0(){var c=arguments,m=er(c[0]);return c.length<3?m:m.replace(c[1],c[2])}var rT=h(function(c,m,x){return c+(x?"_":"")+m.toLowerCase()});function Qy(c,m,x){return x&&typeof x!="number"&&Pr(c,m,x)&&(m=x=t),x=x===t?he:x>>>0,x?(c=er(c),c&&(typeof m=="string"||m!=null&&!Gd(m))&&(m=si(m),!m&&rl(c))?mo(Nr(c),0,x):c.split(m,x)):[]}var x_=h(function(c,m,x){return c+(x?" ":"")+C0(m)});function iT(c,m,x){return c=er(c),x=x==null?0:za(wn(x),0,c.length),m=si(m),c.slice(x,x+m.length)==m}function Zy(c,m,x){var D=Y.templateSettings;x&&Pr(c,m,x)&&(m=t),c=er(c),m=qh({},m,D,Re);var G=qh({},m.imports,D.imports,Re),K=Ti(G),ae=Ci(G,K),fe,Ee,Ze=0,et=m.interpolate||wo,ut="__p += '",Rt=Br((m.escape||wo).source+"|"+et.source+"|"+(et===ir?tr:wo).source+"|"+(m.evaluate||wo).source+"|$","g"),Vt="//# sourceURL="+(Xn.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++vu+"]")+`
`;c.replace(Rt,function(un,Gn,Jn,oa,Qs,Ls){return Jn||(Jn=oa),ut+=c.slice(Ze,Ls).replace(jl,ld),Gn&&(fe=!0,ut+=`' +
__e(`+Gn+`) +
'`),Qs&&(Ee=!0,ut+=`';
`+Qs+`;
__p += '`),Jn&&(ut+=`' +
((__t = (`+Jn+`)) == null ? '' : __t) +
'`),Ze=Ls+un.length,un}),ut+=`';
`;var hn=Xn.call(m,"variable")&&m.variable;if(!hn)ut=`with (obj) {
`+ut+`
}
`;else if(zt.test(hn))throw new en(u);ut=(Ee?ut.replace(Yt,""):ut).replace(_t,"$1").replace(Kt,"$1;"),ut="function("+(hn||"obj")+`) {
`+(hn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(fe?", __e = _.escape":"")+(Ee?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ut+`return __p
}`;var In=A0(function(){return Cn(K,Vt+"return "+ut).apply(t,ae)});if(In.source=ut,_0(In))throw In;return In}function Zh(c){return er(c).toLowerCase()}function Mf(c){return er(c).toUpperCase()}function sT(c,m,x){if(c=er(c),c&&(x||m===t))return Oh(c);if(!c||!(m=si(m)))return c;var D=Nr(c),G=Nr(m),K=Wi(D,G),ae=ca(D,G)+1;return mo(D,K,ae).join("")}function Ev(c,m,x){if(c=er(c),c&&(x||m===t))return c.slice(0,wl(c)+1);if(!c||!(m=si(m)))return c;var D=Nr(c),G=ca(D,Nr(m))+1;return mo(D,0,G).join("")}function oT(c,m,x){if(c=er(c),c&&(x||m===t))return c.replace(rn,"");if(!c||!(m=si(m)))return c;var D=Nr(c),G=Wi(D,Nr(m));return mo(D,G).join("")}function w0(c,m){var x=ne,D=oe;if(ri(m)){var G="separator"in m?m.separator:G;x="length"in m?wn(m.length):x,D="omission"in m?si(m.omission):D}c=er(c);var K=c.length;if(rl(c)){var ae=Nr(c);K=ae.length}if(x>=K)return c;var fe=x-ns(D);if(fe<1)return D;var Ee=ae?mo(ae,0,fe).join(""):c.slice(0,fe);if(G===t)return Ee+D;if(ae&&(fe+=Ee.length-fe),Gd(G)){if(c.slice(fe).search(G)){var Ze,et=Ee;for(G.global||(G=Br(G.source,er(yr.exec(G))+"g")),G.lastIndex=0;Ze=G.exec(et);)var ut=Ze.index;Ee=Ee.slice(0,ut===t?fe:ut)}}else if(c.indexOf(si(G),fe)!=fe){var Rt=Ee.lastIndexOf(G);Rt>-1&&(Ee=Ee.slice(0,Rt))}return Ee+D}function xv(c){return c=er(c),c&&ii.test(c)?c.replace(Xt,Ba):c}var $0=h(function(c,m,x){return c+(x?" ":"")+m.toUpperCase()}),C0=w("toUpperCase");function eb(c,m,x){return c=er(c),m=x?t:m,m===t?Dc(c)?gh(c):ff(c):c.match(m)||[]}var A0=cn(function(c,m){try{return zn(c,t,m)}catch(x){return _0(x)?x:new en(x)}}),tb=Bn(function(c,m){return Xr(m,function(x){x=vo(x),zo(c,x,qt(c[x],c))}),c});function nb(c){var m=c==null?0:c.length,x=sn();return c=m?cr(c,function(D){if(typeof D[1]!="function")throw new yi(l);return[x(D[0]),D[1]]}):[],cn(function(D){for(var G=-1;++G<m;){var K=c[G];if(zn(K[0],this,D))return zn(K[1],this,D)}})}function KE(c){return Md(Ii(c,y))}function w_(c){return function(){return c}}function JE(c,m){return c==null||c!==c?m:c}var aT=B(),qE=B(!0);function Oo(c){return c}function Yi(c){return Ys(typeof c=="function"?c:Ii(c,y))}function If(c){return Au(Ii(c,y))}function $_(c,m){return ho(c,Ii(m,y))}var wv=cn(function(c,m){return function(x){return Ln(x,c,m)}}),Rf=cn(function(c,m){return function(x){return Ln(c,x,m)}});function C_(c,m,x){var D=Ti(m),G=xs(m,D);x==null&&!(ri(m)&&(G.length||!D.length))&&(x=m,m=c,c=this,G=xs(m,Ti(m)));var K=!(ri(x)&&"chain"in x)||!!x.chain,ae=xc(c);return Xr(G,function(fe){var Ee=m[fe];c[fe]=Ee,ae&&(c.prototype[fe]=function(){var Ze=this.__chain__;if(K||Ze){var et=c(this.__wrapped__),ut=et.__actions__=ni(this.__actions__);return ut.push({func:Ee,args:arguments,thisArg:c}),et.__chain__=Ze,et}return Ee.apply(c,Jo([this.value()],arguments))})}),c}function M0(){return br._===this&&(br._=Nh),this}function I0(){}function lT(c){return c=wn(c),cn(function(m){return Go(m,c)})}var rb=Qe(cr),QE=Qe(Su),ib=Qe(Lc);function A_(c){return Ta(c)?ai(vo(c)):Sh(c)}function uT(c){return function(m){return c==null?t:ws(c,m)}}var sb=an(),$v=an(!0);function R0(){return[]}function fm(){return!1}function ob(){return{}}function ab(){return""}function lb(){return!0}function ub(c,m){if(c=wn(c),c<1||c>J)return[];var x=he,D=Ai(c,he);m=sn(m),c-=he;for(var G=Jl(D,m);++x<c;)m(x);return G}function Jm(c){return Mn(c)?cr(c,vo):sa(c)?[c]:ni(a0(er(c)))}function cb(c){var m=++ha;return er(c)+m}var hb=Me(function(c,m){return c+m},0),db=pn("ceil"),pb=Me(function(c,m){return c/m},1),fb=pn("floor");function Yn(c){return c&&c.length?Rl(c,Oo,Ga):t}function cT(c,m){return c&&c.length?Rl(c,sn(m,2),Ga):t}function hT(c){return Da(c,Oo)}function Rg(c,m){return Da(c,sn(m,2))}function M_(c){return c&&c.length?Rl(c,Oo,_a):t}function k0(c,m){return c&&c.length?Rl(c,sn(m,2),_a):t}var dT=Me(function(c,m){return c*m},1),Cv=pn("round"),pT=Me(function(c,m){return c-m},0);function fT(c){return c&&c.length?Fo(c,Oo):0}function mT(c,m){return c&&c.length?Fo(c,sn(m,2)):0}return Y.after=Xe,Y.ary=st,Y.assign=m_,Y.assignIn=g_,Y.assignInWith=qh,Y.assignWith=Km,Y.at=bv,Y.before=Lt,Y.bind=qt,Y.bindAll=tb,Y.bindKey=ln,Y.castArray=Ud,Y.chain=ku,Y.chunk=Kf,Y.compact=Iu,Y.concat=l0,Y.cond=nb,Y.conforms=KE,Y.constant=w_,Y.countBy=pv,Y.create=T0,Y.curry=nn,Y.curryRight=kn,Y.debounce=Kn,Y.defaults=zy,Y.defaultsDeep=Y1,Y.defer=Zn,Y.delay=Ro,Y.difference=Vo,Y.differenceBy=Zi,Y.differenceWith=cu,Y.drop=ml,Y.dropRight=Ru,Y.dropRightWhile=hu,Y.dropWhile=bf,Y.fill=Bl,Y.filter=Fd,Y.flatMap=jm,Y.flatMapDeep=Cg,Y.flatMapDepth=fv,Y.flatten=cp,Y.flattenDeep=Eg,Y.flattenDepth=Jf,Y.flip=wt,Y.flow=aT,Y.flowRight=qE,Y.fromPairs=Zc,Y.functions=q1,Y.functionsIn=Q1,Y.groupBy=Ym,Y.initial=Nd,Y.intersection=Hm,Y.intersectionBy=Gm,Y.intersectionWith=yo,Y.invert=Vy,Y.invertBy=v_,Y.invokeMap=Hp,Y.iteratee=Yi,Y.keyBy=im,Y.keys=Ti,Y.keysIn=es,Y.map=bi,Y.mapKeys=Z1,Y.mapValues=Af,Y.matches=If,Y.matchesProperty=$_,Y.memoize=ht,Y.merge=dm,Y.mergeWith=Qh,Y.method=wv,Y.methodOf=Rf,Y.mixin=C_,Y.negate=xt,Y.nthArg=lT,Y.omit=eT,Y.omitBy=S0,Y.once=yn,Y.orderBy=Gp,Y.over=rb,Y.overArgs=sr,Y.overEvery=QE,Y.overSome=ib,Y.partial=Qn,Y.partialRight=dr,Y.partition=sm,Y.pick=Qt,Y.pickBy=b_,Y.property=A_,Y.propertyOf=uT,Y.pull=xg,Y.pullAll=Bd,Y.pullAllBy=Wm,Y.pullAllWith=Ec,Y.pullAt=Pd,Y.range=sb,Y.rangeRight=$v,Y.rearg=Ir,Y.reject=Ag,Y.remove=ra,Y.rest=Fl,Y.reverse=Ea,Y.sampleSize=T,Y.set=GE,Y.setWith=WE,Y.shuffle=R,Y.slice=u_,Y.sortBy=Z,Y.sortedUniq=Ef,Y.sortedUniqBy=h0,Y.split=Qy,Y.spread=cs,Y.tail=Zf,Y.take=d0,Y.takeRight=c_,Y.takeRightWhile=em,Y.takeWhile=hp,Y.tap=wg,Y.throttle=Wp,Y.thru=Pp,Y.toArray=yv,Y.toPairs=T_,Y.toPairsIn=E0,Y.toPath=Jm,Y.toPlainObject=Uy,Y.transform=hs,Y.unary=g0,Y.union=h_,Y.unionBy=Dy,Y.unionWith=p0,Y.uniq=f0,Y.uniqBy=Bp,Y.uniqWith=Pn,Y.unset=Ig,Y.unzip=th,Y.unzipWith=xf,Y.update=Tv,Y.updateWith=VE,Y.values=fp,Y.valuesIn=mp,Y.without=ia,Y.words=eb,Y.wrap=Ou,Y.xor=d_,Y.xorBy=m0,Y.xorWith=tm,Y.zip=Ny,Y.zipObject=dv,Y.zipObjectDeep=nh,Y.zipWith=bo,Y.entries=T_,Y.entriesIn=E0,Y.extend=g_,Y.extendWith=qh,C_(Y,Y),Y.add=hb,Y.attempt=A0,Y.camelCase=jy,Y.capitalize=pm,Y.ceil=db,Y.clamp=S_,Y.clone=G1,Y.cloneDeep=UE,Y.cloneDeepWith=am,Y.cloneWith=FE,Y.conformsTo=By,Y.deburr=Sv,Y.defaultTo=JE,Y.divide=pb,Y.endsWith=Xy,Y.eq=xa,Y.escape=Yy,Y.escapeRegExp=Ky,Y.every=$g,Y.find=ki,Y.findIndex=Ld,Y.findKey=Vd,Y.findLast=rm,Y.findLastIndex=Dd,Y.findLastKey=Hy,Y.floor=fb,Y.forEach=Xm,Y.forEachRight=$f,Y.forIn=__,Y.forInRight=Gy,Y.forOwn=K1,Y.forOwnRight=J1,Y.get=cm,Y.gt=W1,Y.gte=Mg,Y.has=Wy,Y.hasIn=hm,Y.head=gl,Y.identity=Oo,Y.includes=zp,Y.indexOf=eh,Y.inRange=Os,Y.invoke=y_,Y.isArguments=zd,Y.isArray=Mn,Y.isArrayBuffer=mv,Y.isArrayLike=zi,Y.isArrayLikeObject=Kr,Y.isBoolean=Py,Y.isBuffer=rh,Y.isDate=V1,Y.isElement=pp,Y.isEmpty=p_,Y.isEqual=Hi,Y.isEqualWith=ko,Y.isError=_0,Y.isFinite=gv,Y.isFunction=xc,Y.isInteger=v0,Y.isLength=wh,Y.isMap=Kh,Y.isMatch=Cs,Y.isMatchWith=lm,Y.isNaN=_v,Y.isNative=vv,Y.isNil=zE,Y.isNull=y0,Y.isNumber=Hd,Y.isObject=ri,Y.isObjectLike=ui,Y.isPlainObject=Fr,Y.isRegExp=Gd,Y.isSafeInteger=Ya,Y.isSet=f_,Y.isString=um,Y.isSymbol=sa,Y.isTypedArray=Wd,Y.isUndefined=j1,Y.isWeakMap=X1,Y.isWeakSet=Jh,Y.join=qf,Y.kebabCase=E_,Y.last=ks,Y.lastIndexOf=Pl,Y.lowerCase=jE,Y.lowerFirst=nT,Y.lt=Fy,Y.lte=Vp,Y.max=Yn,Y.maxBy=cT,Y.mean=hT,Y.meanBy=Rg,Y.min=M_,Y.minBy=k0,Y.stubArray=R0,Y.stubFalse=fm,Y.stubObject=ob,Y.stubString=ab,Y.stubTrue=lb,Y.multiply=dT,Y.nth=Tf,Y.noConflict=M0,Y.noop=I0,Y.now=ye,Y.pad=XE,Y.padEnd=YE,Y.padStart=jp,Y.parseInt=Jy,Y.random=tT,Y.reduce=om,Y.reduceRight=Cf,Y.repeat=qy,Y.replace=x0,Y.result=HE,Y.round=Cv,Y.runInContext=ve,Y.sample=v,Y.size=F,Y.snakeCase=rT,Y.some=X,Y.sortedIndex=Qf,Y.sortedIndexBy=u0,Y.sortedIndexOf=hv,Y.sortedLastIndex=Np,Y.sortedLastIndexBy=Sf,Y.sortedLastIndexOf=c0,Y.startCase=x_,Y.startsWith=iT,Y.subtract=pT,Y.sum=fT,Y.sumBy=mT,Y.template=Zy,Y.times=ub,Y.toFinite=wc,Y.toInteger=wn,Y.toLength=b0,Y.toLower=Zh,Y.toNumber=Xi,Y.toSafeInteger=lt,Y.toString=er,Y.toUpper=Mf,Y.trim=sT,Y.trimEnd=Ev,Y.trimStart=oT,Y.truncate=w0,Y.unescape=xv,Y.uniqueId=cb,Y.upperCase=$0,Y.upperFirst=C0,Y.each=Xm,Y.eachRight=$f,Y.first=gl,C_(Y,function(){var c={};return os(Y,function(m,x){Xn.call(Y.prototype,x)||(c[x]=m)}),c}(),{chain:!1}),Y.VERSION=i,Xr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){Y[c].placeholder=Y}),Xr(["drop","take"],function(c,m){dn.prototype[c]=function(x){x=x===t?1:ei(wn(x),0);var D=this.__filtered__&&!m?new dn(this):this.clone();return D.__filtered__?D.__takeCount__=Ai(x,D.__takeCount__):D.__views__.push({size:Ai(x,he),type:c+(D.__dir__<0?"Right":"")}),D},dn.prototype[c+"Right"]=function(x){return this.reverse()[c](x).reverse()}}),Xr(["filter","map","takeWhile"],function(c,m){var x=m+1,D=x==ce||x==Te;dn.prototype[c]=function(G){var K=this.clone();return K.__iteratees__.push({iteratee:sn(G,3),type:x}),K.__filtered__=K.__filtered__||D,K}}),Xr(["head","last"],function(c,m){var x="take"+(m?"Right":"");dn.prototype[c]=function(){return this[x](1).value()[0]}}),Xr(["initial","tail"],function(c,m){var x="drop"+(m?"":"Right");dn.prototype[c]=function(){return this.__filtered__?new dn(this):this[x](1)}}),dn.prototype.compact=function(){return this.filter(Oo)},dn.prototype.find=function(c){return this.filter(c).head()},dn.prototype.findLast=function(c){return this.reverse().find(c)},dn.prototype.invokeMap=cn(function(c,m){return typeof c=="function"?new dn(this):this.map(function(x){return Ln(x,c,m)})}),dn.prototype.reject=function(c){return this.filter(xt(sn(c)))},dn.prototype.slice=function(c,m){c=wn(c);var x=this;return x.__filtered__&&(c>0||m<0)?new dn(x):(c<0?x=x.takeRight(-c):c&&(x=x.drop(c)),m!==t&&(m=wn(m),x=m<0?x.dropRight(-m):x.take(m-c)),x)},dn.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},dn.prototype.toArray=function(){return this.take(he)},os(dn.prototype,function(c,m){var x=/^(?:filter|find|map|reject)|While$/.test(m),D=/^(?:head|last)$/.test(m),G=Y[D?"take"+(m=="last"?"Right":""):m],K=D||/^find/.test(m);!G||(Y.prototype[m]=function(){var ae=this.__wrapped__,fe=D?[1]:arguments,Ee=ae instanceof dn,Ze=fe[0],et=Ee||Mn(ae),ut=function(Gn){var Jn=G.apply(Y,Jo([Gn],fe));return D&&Rt?Jn[0]:Jn};et&&x&&typeof Ze=="function"&&Ze.length!=1&&(Ee=et=!1);var Rt=this.__chain__,Vt=!!this.__actions__.length,hn=K&&!Rt,In=Ee&&!Vt;if(!K&&et){ae=In?ae:new dn(this);var un=c.apply(ae,fe);return un.__actions__.push({func:Pp,args:[ut],thisArg:t}),new xr(un,Rt)}return hn&&In?c.apply(this,fe):(un=this.thru(ut),hn?D?un.value()[0]:un.value():un)})}),Xr(["pop","push","shift","sort","splice","unshift"],function(c){var m=ao[c],x=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",D=/^(?:pop|shift)$/.test(c);Y.prototype[c]=function(){var G=arguments;if(D&&!this.__chain__){var K=this.value();return m.apply(Mn(K)?K:[],G)}return this[x](function(ae){return m.apply(Mn(ae)?ae:[],G)})}}),os(dn.prototype,function(c,m){var x=Y[m];if(x){var D=x.name+"";Xn.call(Il,D)||(Il[D]=[]),Il[D].push({name:m,func:x})}}),Il[V(t,L).name]=[{name:"wrapper",func:t}],dn.prototype.clone=kp,dn.prototype.reverse=al,dn.prototype.value=Mi,Y.prototype.at=Yh,Y.prototype.chain=nm,Y.prototype.commit=Fp,Y.prototype.next=Up,Y.prototype.plant=fd,Y.prototype.reverse=dp,Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=Vm,Y.prototype.first=Y.prototype.head,Qo&&(Y.prototype[Qo]=wf),Y},hi=Ed();vi?((vi.exports=hi)._=hi,Ms._=hi):br._=hi}).call(Y_)})(sg,sg.exports);const Nwe=sg.exports,Bwe=(n,e)=>({clock:new Lwe,items:{},tfs:{},hulls:{},lines:{},texts:{},points:{},widgets:{},onMove:(t,i,s,o)=>n(l=>{console.log(o),l[i][t].position={...o.position},l[i][t].rotation=o.quaternion,l[i][t].rotation.x=o.quaternion.x,l[i][t].rotation.y=o.quaternion.y,l[i][t].rotation.z=o.quaternion.z,l[i][t].rotation.w=o.quaternion.w,l[i][t].scale={...o.scale}}),onClick:(t,i,s,o)=>{i||console.log(`id: ${t} clicked!`,s),e().items[t]&&!i&&o.stopPropagation()},onPointerOver:(t,i,s)=>{},onPointerOut:(t,i,s)=>{},pause:()=>n(t=>{t.clock.setTimescale(0)}),play:t=>n(i=>{i.clock.setTimescale(t||1)}),reset:t=>n(i=>{console.log(`setting time to ${t}`),i.clock._elapsed=t?t*1e3:0}),clearItems:()=>n(t=>({items:{}})),clearLines:()=>n(t=>({lines:{}})),clearTfs:()=>n(t=>({tfs:{}})),clearHulls:()=>n(t=>({hulls:{}})),clearTexts:()=>n(t=>({texts:{}})),clearPoints:()=>n(t=>({points:{}})),setItems:t=>n(i=>({items:t})),setLines:t=>n(i=>({lines:t})),setTfs:t=>n(i=>({tfs:t})),setHulls:t=>n(i=>({hulls:t})),setTexts:t=>n(i=>({texts:t})),setPoints:t=>n(i=>({points:t})),removeItem:t=>n(i=>{delete i.items[t]}),removeLine:t=>n(i=>{delete i.lines[t]}),removeTf:t=>n(i=>{delete i.tfs[t]}),removeHull:t=>n(i=>{delete i.hulls[t]}),removeText:t=>n(i=>{delete i.texts[t]}),removePoint:t=>n(i=>{delete i.points[t]}),setItem:(t,i)=>n(s=>{s.items[t]=i}),setLine:(t,i)=>n(s=>{s.lines[t]=i}),setTf:(t,i)=>n(s=>{s.tfs[t]=i}),setHull:(t,i)=>n(s=>{s.hulls[t]=i}),setText:(t,i)=>n(s=>{s.texts[t]=i}),setPoint:(t,i)=>n(s=>{s.points[t]=i}),setProperty:(t,i)=>n(s=>{Nwe.set(s,t,i)})}),Pwe=Owe(ywe(Bwe)),Fwe=_we(Pwe),yY=me.createContext(),No=(n,e)=>{const t=me.useContext(yY);return gY(t,n,e)},Uwe=({store:n,children:e,debug:t=!1})=>(t&&console.log("SceneProvider regenerated"),on(yY.Provider,{value:n||Fwe,children:e})),zwe=Vr.forwardRef((n,e)=>on("ambientLight",{ref:e,...n}));Vr.forwardRef((n,e)=>on("pointLight",{ref:e,...n}));const Hwe=Vr.forwardRef((n,e)=>on("directionalLight",{ref:e,...n})),Z0=(n,e,t,i)=>{var s=new Nn;return s.setRGB(n/255,e/255,t/255),i<=.99?new h$({color:s.getHex(),opacity:i+.1,transparent:!0,depthWrite:!0,blendSrc:UR,blendDst:zR,blendEquation:SP,blending:ev}):new h$({color:s.getHex(),opacity:i,blending:ev})},EM=sg.exports.memoize(n=>{var e=new Nn(n),t=`
		varying vec3	vVertexWorldPosition;
		varying vec3	vVertexNormal;

		// varying vec4	vFragColor;

		void main(){
			vVertexNormal	= normalize(normalMatrix * normal);

			vVertexWorldPosition	= (modelMatrix * vec4(position, 1.0)).xyz;

			// set gl_Position
			gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1.0);
		}`,i=`
		uniform vec3	glowColor;
		uniform float	coeficient;
		uniform float	power;

		varying vec3	vVertexNormal;
		varying vec3	vVertexWorldPosition;

		// varying vec4	vFragColor;

		void main(){
			vec3 worldCameraToVertex= vVertexWorldPosition - cameraPosition;
			vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;
			viewCameraToVertex	= normalize(viewCameraToVertex);
			float intensity		= pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);
			gl_FragColor		= vec4(glowColor, intensity);
		}`,s=new yd({uniforms:{coeficient:{type:"f",value:1.2},power:{type:"f",value:4},glowColor:{type:"c",value:e}},vertexShader:t,fragmentShader:i,blending:hI,transparent:!0,depthWrite:!1,depthTest:!1});return s});function Gwe(n){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;n=n.replace(e,function(i,s,o,l){return s+s+o+o+l+l});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}const kb=new eF,Df=new $e,Xv=new $e,Du=new bl,bG={X:new $e(1,0,0),Y:new $e(0,1,0),Z:new $e(0,0,1)},JO={type:"change"},TG={type:"mouseDown"},SG={type:"mouseUp",mode:null},EG={type:"objectChange"};class Wwe extends to{constructor(e,t){super(),t===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const i=new Jwe;this._gizmo=i,this.add(i);const s=new qwe;this._plane=s,this.add(s);const o=this;function l(O,P){let N=P;Object.defineProperty(o,O,{get:function(){return N!==void 0?N:P},set:function(z){N!==z&&(N=z,s[O]=z,i[O]=z,o.dispatchEvent({type:O+"-changed",value:z}),o.dispatchEvent(JO))}}),o[O]=P,s[O]=P,i[O]=P}l("camera",e),l("object",void 0),l("enabled",!0),l("axis",null),l("mode","translate"),l("translationSnap",null),l("rotationSnap",null),l("scaleSnap",null),l("space","world"),l("size",1),l("dragging",!1),l("showX",!0),l("showY",!0),l("showZ",!0);const u=new $e,d=new $e,p=new bl,_=new bl,y=new $e,b=new bl,E=new $e,C=new $e,A=new $e,I=0,L=new $e;l("worldPosition",u),l("worldPositionStart",d),l("worldQuaternion",p),l("worldQuaternionStart",_),l("cameraPosition",y),l("cameraQuaternion",b),l("pointStart",E),l("pointEnd",C),l("rotationAxis",A),l("rotationAngle",I),l("eye",L),this._offset=new $e,this._startNorm=new $e,this._endNorm=new $e,this._cameraScale=new $e,this._parentPosition=new $e,this._parentQuaternion=new bl,this._parentQuaternionInv=new bl,this._parentScale=new $e,this._worldScaleStart=new $e,this._worldQuaternionInv=new bl,this._worldScale=new $e,this._positionStart=new $e,this._quaternionStart=new bl,this._scaleStart=new $e,this._getPointer=Vwe.bind(this),this._onPointerDown=Xwe.bind(this),this._onPointerHover=jwe.bind(this),this._onPointerMove=Ywe.bind(this),this._onPointerUp=Kwe.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye):this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;kb.setFromCamera(e,this.camera);const t=qO(this._gizmo.picker[this.mode],kb);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e.button!==0)&&this.axis!==null){kb.setFromCamera(e,this.camera);const t=qO(this._plane,kb,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,TG.mode=this.mode,this.dispatchEvent(TG)}}pointerMove(e){const t=this.axis,i=this.mode,s=this.object;let o=this.space;if(i==="scale"?o="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(o="world"),s===void 0||t===null||this.dragging===!1||e.button!==-1)return;kb.setFromCamera(e,this.camera);const l=qO(this._plane,kb,!0);if(l){if(this.pointEnd.copy(l.point).sub(this.worldPositionStart),i==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),o==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),o==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),s.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(o==="local"&&(s.position.applyQuaternion(Du.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.position.applyQuaternion(this._quaternionStart)),o==="world"&&(s.parent&&s.position.add(Df.setFromMatrixPosition(s.parent.matrixWorld)),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.parent&&s.position.sub(Df.setFromMatrixPosition(s.parent.matrixWorld))));else if(i==="scale"){if(t.search("XYZ")!==-1){let u=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(u*=-1),Xv.set(u,u,u)}else Df.copy(this.pointStart),Xv.copy(this.pointEnd),Df.applyQuaternion(this._worldQuaternionInv),Xv.applyQuaternion(this._worldQuaternionInv),Xv.divide(Df),t.search("X")===-1&&(Xv.x=1),t.search("Y")===-1&&(Xv.y=1),t.search("Z")===-1&&(Xv.z=1);s.scale.copy(this._scaleStart).multiply(Xv),this.scaleSnap&&(t.search("X")!==-1&&(s.scale.x=Math.round(s.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(s.scale.y=Math.round(s.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(s.scale.z=Math.round(s.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(i==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const u=20/this.worldPosition.distanceTo(Df.setFromMatrixPosition(this.camera.matrixWorld));t==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Df.copy(this.rotationAxis).cross(this.eye))*u):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(bG[t]),Df.copy(bG[t]),o==="local"&&Df.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(Df.cross(this.eye).normalize())*u),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),o==="local"&&t!=="E"&&t!=="XYZE"?(s.quaternion.copy(this._quaternionStart),s.quaternion.multiply(Du.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),s.quaternion.copy(Du.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),s.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(JO),this.dispatchEvent(EG)}}pointerUp(e){e.button===0&&(this.dragging&&this.axis!==null&&(SG.mode=this.mode,this.dispatchEvent(SG)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){!this.enabled||this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(JO),this.dispatchEvent(EG),this.pointStart.copy(this.pointEnd))}getRaycaster(){return kb}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function Vwe(n){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:n.button};{const e=this.domElement.getBoundingClientRect();return{x:(n.clientX-e.left)/e.width*2-1,y:-(n.clientY-e.top)/e.height*2+1,button:n.button}}}function jwe(n){if(this.enabled)switch(n.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(n));break}}function Xwe(n){!this.enabled||(document.pointerLockElement||this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(n)),this.pointerDown(this._getPointer(n)))}function Ywe(n){!this.enabled||this.pointerMove(this._getPointer(n))}function Kwe(n){!this.enabled||(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(n)))}function qO(n,e,t){const i=e.intersectObject(n,!0);for(let s=0;s<i.length;s++)if(i[s].object.visible||t)return i[s];return!1}const PA=new U1,vl=new $e(0,1,0),xG=new $e(0,0,0),wG=new Qr,FA=new bl,xM=new bl,P0=new $e,$G=new Qr,Zx=new $e(1,0,0),Gb=new $e(0,1,0),ew=new $e(0,0,1),UA=new $e,Ux=new $e,zx=new $e;class Jwe extends to{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new r0({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new Mp({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=e.clone();i.opacity=.15;const s=t.clone();s.opacity=.5;const o=e.clone();o.color.setHex(16711680);const l=e.clone();l.color.setHex(65280);const u=e.clone();u.color.setHex(255);const d=e.clone();d.color.setHex(16711680),d.opacity=.5;const p=e.clone();p.color.setHex(65280),p.opacity=.5;const _=e.clone();_.color.setHex(255),_.opacity=.5;const y=e.clone();y.opacity=.25;const b=e.clone();b.color.setHex(16776960),b.opacity=.25,e.clone().color.setHex(16776960);const E=e.clone();E.color.setHex(7895160);const C=new Hl(0,.04,.1,12);C.translate(0,.05,0);const A=new pu(.08,.08,.08);A.translate(0,.04,0);const I=new oi;I.setAttribute("position",new rr([0,0,0,1,0,0],3));const L=new Hl(.0075,.0075,.5,3);L.translate(0,.25,0);function O(ce,pe){const Te=new jg(ce,.0075,3,64,pe*Math.PI*2);return Te.rotateY(Math.PI/2),Te.rotateX(Math.PI/2),Te}function P(){const ce=new oi;return ce.setAttribute("position",new rr([0,0,0,1,1,1],3)),ce}const N={X:[[new Fn(C,o),[.5,0,0],[0,0,-Math.PI/2]],[new Fn(C,o),[-.5,0,0],[0,0,Math.PI/2]],[new Fn(L,o),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new Fn(C,l),[0,.5,0]],[new Fn(C,l),[0,-.5,0],[Math.PI,0,0]],[new Fn(L,l)]],Z:[[new Fn(C,u),[0,0,.5],[Math.PI/2,0,0]],[new Fn(C,u),[0,0,-.5],[-Math.PI/2,0,0]],[new Fn(L,u),null,[Math.PI/2,0,0]]],XYZ:[[new Fn(new Yg(.1,0),y.clone()),[0,0,0]]],XY:[[new Fn(new pu(.15,.15,.01),_.clone()),[.15,.15,0]]],YZ:[[new Fn(new pu(.15,.15,.01),d.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Fn(new pu(.15,.15,.01),p.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},z={X:[[new Fn(new Hl(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new Fn(new Hl(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Fn(new Hl(.2,0,.6,4),i),[0,.3,0]],[new Fn(new Hl(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Fn(new Hl(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new Fn(new Hl(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new Fn(new Yg(.2,0),i)]],XY:[[new Fn(new pu(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new Fn(new pu(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Fn(new pu(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},W={START:[[new Fn(new Yg(.01,2),s),null,null,null,"helper"]],END:[[new Fn(new Yg(.01,2),s),null,null,null,"helper"]],DELTA:[[new xp(P(),s),null,null,null,"helper"]],X:[[new xp(I,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new xp(I,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new xp(I,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},H={XYZE:[[new Fn(O(.5,1),E),null,[0,Math.PI/2,0]]],X:[[new Fn(O(.5,.5),o)]],Y:[[new Fn(O(.5,.5),l),null,[0,0,-Math.PI/2]]],Z:[[new Fn(O(.5,.5),u),null,[0,Math.PI/2,0]]],E:[[new Fn(O(.75,1),b),null,[0,Math.PI/2,0]]]},U={AXIS:[[new xp(I,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},Q={XYZE:[[new Fn(new t0(.25,10,8),i)]],X:[[new Fn(new jg(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Fn(new jg(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Fn(new jg(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Fn(new jg(.75,.1,2,24),i)]]},ne={X:[[new Fn(A,o),[.5,0,0],[0,0,-Math.PI/2]],[new Fn(L,o),[0,0,0],[0,0,-Math.PI/2]],[new Fn(A,o),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new Fn(A,l),[0,.5,0]],[new Fn(L,l)],[new Fn(A,l),[0,-.5,0],[0,0,Math.PI]]],Z:[[new Fn(A,u),[0,0,.5],[Math.PI/2,0,0]],[new Fn(L,u),[0,0,0],[Math.PI/2,0,0]],[new Fn(A,u),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new Fn(new pu(.15,.15,.01),_),[.15,.15,0]]],YZ:[[new Fn(new pu(.15,.15,.01),d),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Fn(new pu(.15,.15,.01),p),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Fn(new pu(.1,.1,.1),y.clone())]]},oe={X:[[new Fn(new Hl(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new Fn(new Hl(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Fn(new Hl(.2,0,.6,4),i),[0,.3,0]],[new Fn(new Hl(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Fn(new Hl(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new Fn(new Hl(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new Fn(new pu(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new Fn(new pu(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Fn(new pu(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Fn(new pu(.2,.2,.2),i),[0,0,0]]]},le={X:[[new xp(I,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new xp(I,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new xp(I,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function ge(ce){const pe=new to;for(const Te in ce)for(let Oe=ce[Te].length;Oe--;){const J=ce[Te][Oe][0].clone(),se=ce[Te][Oe][1],ie=ce[Te][Oe][2],he=ce[Te][Oe][3],Se=ce[Te][Oe][4];J.name=Te,J.tag=Se,se&&J.position.set(se[0],se[1],se[2]),ie&&J.rotation.set(ie[0],ie[1],ie[2]),he&&J.scale.set(he[0],he[1],he[2]),J.updateMatrix();const Fe=J.geometry.clone();Fe.applyMatrix4(J.matrix),J.geometry=Fe,J.renderOrder=1/0,J.position.set(0,0,0),J.rotation.set(0,0,0),J.scale.set(1,1,1),pe.add(J)}return pe}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=ge(N)),this.add(this.gizmo.rotate=ge(H)),this.add(this.gizmo.scale=ge(ne)),this.add(this.picker.translate=ge(z)),this.add(this.picker.rotate=ge(Q)),this.add(this.picker.scale=ge(oe)),this.add(this.helper.translate=ge(W)),this.add(this.helper.rotate=ge(U)),this.add(this.helper.scale=ge(le)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:xM;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let i=[];i=i.concat(this.picker[this.mode].children),i=i.concat(this.gizmo[this.mode].children),i=i.concat(this.helper[this.mode].children);for(let s=0;s<i.length;s++){const o=i[s];o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition);let l;if(this.camera.isOrthographicCamera?l=(this.camera.top-this.camera.bottom)/this.camera.zoom:l=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),o.scale.set(1,1,1).multiplyScalar(l*this.size/4),o.tag==="helper"){o.visible=!1,o.name==="AXIS"?(o.position.copy(this.worldPositionStart),o.visible=!!this.axis,this.axis==="X"&&(Du.setFromEuler(PA.set(0,0,0)),o.quaternion.copy(t).multiply(Du),Math.abs(vl.copy(Zx).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Y"&&(Du.setFromEuler(PA.set(0,0,Math.PI/2)),o.quaternion.copy(t).multiply(Du),Math.abs(vl.copy(Gb).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Z"&&(Du.setFromEuler(PA.set(0,Math.PI/2,0)),o.quaternion.copy(t).multiply(Du),Math.abs(vl.copy(ew).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="XYZE"&&(Du.setFromEuler(PA.set(0,Math.PI/2,0)),vl.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(wG.lookAt(xG,vl,Gb)),o.quaternion.multiply(Du),o.visible=this.dragging),this.axis==="E"&&(o.visible=!1)):o.name==="START"?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):o.name==="END"?(o.position.copy(this.worldPosition),o.visible=this.dragging):o.name==="DELTA"?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),Df.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Df.applyQuaternion(this.worldQuaternionStart.clone().invert()),o.scale.copy(Df),o.visible=this.dragging):(o.quaternion.copy(t),this.dragging?o.position.copy(this.worldPositionStart):o.position.copy(this.worldPosition),this.axis&&(o.visible=this.axis.search(o.name)!==-1));continue}o.quaternion.copy(t),this.mode==="translate"||this.mode==="scale"?(o.name==="X"&&Math.abs(vl.copy(Zx).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Y"&&Math.abs(vl.copy(Gb).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Z"&&Math.abs(vl.copy(ew).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XY"&&Math.abs(vl.copy(ew).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="YZ"&&Math.abs(vl.copy(Zx).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XZ"&&Math.abs(vl.copy(Gb).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1)):this.mode==="rotate"&&(FA.copy(t),vl.copy(this.eye).applyQuaternion(Du.copy(t).invert()),o.name.search("E")!==-1&&o.quaternion.setFromRotationMatrix(wG.lookAt(this.eye,xG,Gb)),o.name==="X"&&(Du.setFromAxisAngle(Zx,Math.atan2(-vl.y,vl.z)),Du.multiplyQuaternions(FA,Du),o.quaternion.copy(Du)),o.name==="Y"&&(Du.setFromAxisAngle(Gb,Math.atan2(vl.x,vl.z)),Du.multiplyQuaternions(FA,Du),o.quaternion.copy(Du)),o.name==="Z"&&(Du.setFromAxisAngle(ew,Math.atan2(vl.y,vl.x)),Du.multiplyQuaternions(FA,Du),o.quaternion.copy(Du))),o.visible=o.visible&&(o.name.indexOf("X")===-1||this.showX),o.visible=o.visible&&(o.name.indexOf("Y")===-1||this.showY),o.visible=o.visible&&(o.name.indexOf("Z")===-1||this.showZ),o.visible=o.visible&&(o.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),o.material._color=o.material._color||o.material.color.clone(),o.material._opacity=o.material._opacity||o.material.opacity,o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled&&this.axis&&(o.name===this.axis||this.axis.split("").some(function(u){return o.name===u}))&&(o.material.color.setHex(16776960),o.material.opacity=1)}super.updateMatrixWorld(e)}}class qwe extends Fn{constructor(){super(new e0(1e5,1e5,2,2),new r0({visible:!1,wireframe:!0,side:tf,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),UA.copy(Zx).applyQuaternion(t==="local"?this.worldQuaternion:xM),Ux.copy(Gb).applyQuaternion(t==="local"?this.worldQuaternion:xM),zx.copy(ew).applyQuaternion(t==="local"?this.worldQuaternion:xM),vl.copy(Ux),this.mode){case"translate":case"scale":switch(this.axis){case"X":vl.copy(this.eye).cross(UA),P0.copy(UA).cross(vl);break;case"Y":vl.copy(this.eye).cross(Ux),P0.copy(Ux).cross(vl);break;case"Z":vl.copy(this.eye).cross(zx),P0.copy(zx).cross(vl);break;case"XY":P0.copy(zx);break;case"YZ":P0.copy(UA);break;case"XZ":vl.copy(zx),P0.copy(Ux);break;case"XYZ":case"E":P0.set(0,0,0);break}break;case"rotate":default:P0.set(0,0,0)}P0.length()===0?this.quaternion.copy(this.cameraQuaternion):($G.lookAt(Df.set(0,0,0),P0,vl),this.quaternion.setFromRotationMatrix($G)),super.updateMatrixWorld(e)}}const QO=1,Qwe=n=>{let{x:e,y:t,z:i}=n===void 0?{}:n;return e=e===void 0?QO:e,t=t===void 0?QO:t,i=i===void 0?QO:i,new AEe(e,t,i,2,.05)},Zwe=.5,e$e=n=>{let{radius:e}=n===void 0?{}:n;return e=e===void 0?Zwe:e,new t0(e,32,32)},bY=.5,TY=1,t$e=n=>{let{radius:e,height:t}=n===void 0?{}:n;return e=e===void 0?bY:e,t=t===void 0?TY:t,new Hl(e,e,t,32,1,!1)},n$e=.4,r$e=.05,i$e=.2,s$e=.6,ak=n=>{let{length:e,radius:t}=n===void 0?{}:n;e=e===void 0?1:e,t=t===void 0?1:t;const i=n$e*e,s=i$e*.5*t,o=new Hl(0,s,i,32,1),l=s$e*e,u=r$e*.5*t,d=new Hl(u,u,l,32,1);var p=new Qr;return p.setPosition(new $e(0,l*.5,0)),d.applyMatrix4(p),p.setPosition(new $e(0,l+i*.5,0)),o.applyMatrix4(p),QX([o,d])},o$e=n=>{let{radius:e,height:t}=n===void 0?{}:n;e=e===void 0?bY:e,t=t===void 0?TY:t;const i=new Hl(e,e,t,32,1,!0),s=new t0(e,32,32,Math.PI,Math.PI),o=new t0(e,32,32,Math.PI,Math.PI);var l=new Qr;l.makeRotationX(Math.PI/2),l.setPosition(0,t/2,0);var u=new Qr;return u.makeRotationX(-Math.PI/2),u.setPosition(0,-t/2,0),s.applyMatrix4(l),o.applyMatrix4(u),QX([i,s,o])},v$=(n,e,t)=>{if(n.current&&e){const i=typeof e.r=="function"?e.r(t)/255:e.r/255,s=typeof e.g=="function"?e.g(t)/255:e.g/255,o=typeof e.b=="function"?e.b(t)/255:e.b/255,l=typeof e.a=="function"?e.a(t):e.a;n.current.material.color.setRGB(i,s,o),n.current.material.opacity=l,n.current.material.transparent=l!==1}},a$e=n=>{let e=null;if(n.shape)n.shape==="cube"?e=Qwe(n.shapeParams):n.shape==="cylinder"?e=t$e(n.shapeParams):n.shape==="sphere"?e=e$e(n.shapeParams):n.shape==="capsule"?e=o$e(n.shapeParams):n.shape==="arrow"&&(e=ak(n.shapeParams));else return[];return[{geometry:e,type:"part"}]};function PE(...n){const e=me.useRef();return me.useEffect(()=>{n.forEach(t=>{!t||(typeof t=="function"?t(e.current):t.current=e.current)})},[n]),e}function Cp(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[i,s]of n)if(!Object.is(s,e.get(i)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const i of n)if(!e.has(i))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}const l$e=me.forwardRef(({objectKey:n,displayTfs:e,position:t,rotation:i,scale:s,ghost:o,highlightColor:l,children:u},d)=>{const p=me.useRef(null),_=PE(d,p),y=No(me.useCallback(C=>C.tfs[n],[n]),Cp),b=No(C=>C.clock);Fm(me.useCallback(()=>{const C=b.getElapsed()*1e3;_.current&&(_.current.position.set(t?t.x:typeof y.position.x=="function"?y.position.x(C):y.position.x,t?t.y:typeof y.position.y=="function"?y.position.y(C):y.position.y,t?t.z:typeof y.position.z=="function"?y.position.z(C):y.position.z),_.current.quaternion.set(i?i.x:typeof y.rotation.x=="function"?y.rotation.x(C):y.rotation.x,i?i.y:typeof y.rotation.y=="function"?y.rotation.y(C):y.rotation.y,i?i.z:typeof y.rotation.z=="function"?y.rotation.z(C):y.rotation.z,i?i.w:typeof y.rotation.w=="function"?y.rotation.w(C):y.rotation.w),_.current.scale.set(s?s.x:y.scale?typeof y.scale.x=="function"?y.scale.x(C):y.scale.x:0,s?s.y:y.scale?typeof y.scale.y=="function"?y.scale.y(C):y.scale.y:0,s?s.z:y.scale?typeof y.scale.z=="function"?y.scale.z(C):y.scale.z:0))},[y,t,i,s,_,b]));const E=ak();return kh("group",{ref:_,dispose:null,up:[0,0,1],children:[e&&kh(U$,{children:[on("axesHelper",{size:1}),on("mesh",{geometry:E,material:o?EM(l):Z0(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},`${n}ArrowX`),on("mesh",{geometry:E,material:o?EM(l):Z0(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},`${n}ArrowY`),on("mesh",{geometry:E,material:o?EM(l):Z0(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},`${n}ArrowZ`)]}),u]})});function u$e({displayTfs:n,children:e}){const t=ak();return kh("group",{dispose:null,up:[0,0,1],children:[n&&kh(U$,{children:[on("axesHelper",{size:1}),on("mesh",{geometry:t,material:Z0(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},"$WorldArrowX"),on("mesh",{geometry:t,material:Z0(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},"$WorldArrowY"),on("mesh",{geometry:t,material:Z0(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},"$WorldArrowZ")]}),e]})}function c$e({displayTfs:n,children:e}){const t=ak();return kh("group",{dispose:null,up:[0,0,1],children:[n&&kh(U$,{children:[on("axesHelper",{size:1}),on("mesh",{geometry:t,material:Z0(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},"$WorldArrowX"),on("mesh",{geometry:t,material:Z0(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},"$WorldArrowY"),on("mesh",{geometry:t,material:Z0(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},"$WorldArrowZ")]}),e]})}/**
 * postprocessing v6.30.1 build Fri Feb 24 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rschen
 * @license Zlib
 */var h$e="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}";function CG(n,e){let t="texel";if(n!==null){const i=Number.parseInt(kE);if(!(e&&i>=133&&i!==135&&n.format===Pf&&n.type===ep&&n.encoding===ps))switch(n.encoding){case ps:t="sRGBToLinear(texel)";break;case _g:t="texel";break;default:throw new Error(`Unsupported encoding: ${n.encoding}`)}}return t}var As={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},v1={NONE:0,DEPTH:1,CONVOLUTION:2},Do={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},vF={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},d$e=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,p$e="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",f$e=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],m$e=class extends yd{constructor(n=new ys){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new eo(null),texelSize:new eo(new ys),scale:new eo(1),kernel:new eo(0)},blending:af,depthWrite:!1,depthTest:!1,fragmentShader:d$e,vertexShader:p$e}),this.toneMapped=!1,this.setTexelSize(n.x,n.y),this.kernelSize=vF.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return f$e[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},g$e=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
#include <dithering_fragment>
}`,SY=class extends yd{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new eo(null),opacity:new eo(1)},blending:af,depthWrite:!1,depthTest:!1,fragmentShader:g$e,vertexShader:h$e}),this.toneMapped=!1}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},_$e=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,v$e=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,y$e=class extends yd{constructor(n=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new eo(null),cameraNear:new eo(.3),cameraFar:new eo(1e3)},blending:af,depthWrite:!1,depthTest:!1,fragmentShader:_$e,vertexShader:v$e}),this.toneMapped=!1,this.depthBuffer=n,this.depthPacking=iE,this.copyCameraSettings(e)}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=iE){this.depthBuffer=n,this.depthPacking=e}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Ja?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},b$e=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);
#else
vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));
#endif
gl_FragColor=vec4(n[index],d[index]);}`,T$e="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",S$e=class extends yd{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new eo(null),normalBuffer:new eo(null),texelSize:new eo(new Ht)},blending:af,depthWrite:!1,depthTest:!1,fragmentShader:b$e,vertexShader:T$e}),this.toneMapped=!1}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Oy){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},E$e=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,x$e="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",w$e=class extends yd{constructor(n,e,t,i,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:kE.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new eo(null),depthBuffer:new eo(null),resolution:new eo(new Ht),texelSize:new eo(new Ht),cameraNear:new eo(.3),cameraFar:new eo(1e3),aspect:new eo(1),time:new eo(0)},blending:af,depthWrite:!1,depthTest:!1,dithering:s}),this.toneMapped=!1,n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Oy){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){var e,t,i,s,o;return this.fragmentShader=E$e.replace(Do.FRAGMENT_HEAD,(e=n.get(Do.FRAGMENT_HEAD))!=null?e:"").replace(Do.FRAGMENT_MAIN_UV,(t=n.get(Do.FRAGMENT_MAIN_UV))!=null?t:"").replace(Do.FRAGMENT_MAIN_IMAGE,(i=n.get(Do.FRAGMENT_MAIN_IMAGE))!=null?i:""),this.vertexShader=x$e.replace(Do.VERTEX_HEAD,(s=n.get(Do.VERTEX_HEAD))!=null?s:"").replace(Do.VERTEX_MAIN_SUPPORT,(o=n.get(Do.VERTEX_MAIN_SUPPORT))!=null?o:""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Ja?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return Do}},$$e="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",C$e="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",A$e=class extends yd{constructor(n=new Ht){super({name:"OutlineMaterial",uniforms:{inputBuffer:new eo(null),texelSize:new eo(new Ht)},blending:af,depthWrite:!1,depthTest:!1,fragmentShader:$$e,vertexShader:C$e}),this.toneMapped=!1,this.uniforms.texelSize.value.set(n.x,n.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},M$e=new LE,Yv=null;function I$e(){if(Yv===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Yv=new oi,Yv.setAttribute!==void 0?(Yv.setAttribute("position",new Bo(n,3)),Yv.setAttribute("uv",new Bo(e,2))):(Yv.addAttribute("position",new Bo(n,3)),Yv.addAttribute("uv",new Bo(e,2)))}return Yv}var Um=class{constructor(n="Pass",e=new o$,t=M$e){this.name=n,this.renderer=null,this.scene=e,this.camera=t,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(n){if(this.rtt===n){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!n}}set mainScene(n){}set mainCamera(n){}setRenderer(n){this.renderer=n}isEnabled(){return this.enabled}setEnabled(n){this.enabled=n}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(n){let e=this.screen;e!==null?e.material=n:(e=new Fn(I$e(),n),e.frustumCulled=!1,this.scene===null&&(this.scene=new o$),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(n){this.fullscreenMaterial=n}getDepthTexture(){return null}setDepthTexture(n,e=Oy){}render(n,e,t,i,s){throw new Error("Render method not implemented!")}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Rc||e instanceof sd||e instanceof lc||e instanceof Um)&&this[n].dispose()}}},R$e=class extends Um{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new SY,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new Rc(1,1,{minFilter:Tl,magFilter:Tl,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,s){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==ep?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n.outputEncoding===ps&&(this.renderTarget.texture.encoding=ps))}},k$e=class extends Um{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,s){const o=n.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},AG=new Nn,yF=class extends Um{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,s){const o=this.overrideClearColor,l=this.overrideClearAlpha,u=n.getClearAlpha(),d=o!==null,p=l>=0;d?(n.getClearColor(AG),n.setClearColor(o,p?l:u)):p&&n.setClearAlpha(l),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),d?n.setClearColor(AG,u):p&&n.setClearAlpha(u)}},Kv=-1,rf=class extends Bm{constructor(n,e=Kv,t=Kv,i=1){super(),this.resizable=n,this.baseSize=new Ht(1,1),this.preferredSize=new Ht(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new Ht,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==Kv?t.width=e.width:e.height!==Kv?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*i),e.height!==Kv?t.height=e.height:e.width!==Kv?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(Kv),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Kv}},ZO=!1,MG=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case tf:t=this.materialsFlatShadedDoubleSide;break;case id:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case tf:t=this.materialsDoubleSide;break;case id:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[n.clone(),n.clone(),n.clone()];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=e_;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.side=id,i}),this.materialsDoubleSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.side=tf,i}),this.materialsFlatShaded=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=id,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=tf,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,ZO){const s=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const o of s)o[0].material=o[1];this.meshCount!==s.size&&s.clear()}else{const s=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=s}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return ZO}static set workaroundEnabled(n){ZO=n}},lk=class extends Um{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new yF,this.overrideMaterialManager=t===null?null:new MG(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new MG(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,s){const o=this.scene,l=this.camera,u=this.selection,d=l.layers.mask,p=o.background,_=n.shadowMap.autoUpdate,y=this.renderToScreen?null:e;u!==null&&l.layers.set(u.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(y),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,o,l):n.render(o,l),l.layers.mask=d,o.background=p,n.shadowMap.autoUpdate=_}},O$e=class extends Um{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:s=rf.AUTO_SIZE,height:o=rf.AUTO_SIZE,resolutionX:l=s,resolutionY:u=o}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new lk(n,e,new P$({depthPacking:iE}));const d=this.renderPass;d.skipShadowMapUpdate=!0,d.ignoreBackground=!0;const p=d.getClearPass();p.overrideClearColor=new Nn(16777215),p.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Rc(1,1,{minFilter:Gl,magFilter:Gl}),this.renderTarget.texture.name="DepthPass.Target");const _=this.resolution=new rf(this,l,u,i);_.addEventListener("change",y=>this.setSize(_.baseWidth,_.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,s){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},L$e=class extends Um{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=rf.AUTO_SIZE,height:i=rf.AUTO_SIZE,resolutionX:s=t,resolutionY:o=i}={}){super("DepthDownsamplingPass");const l=new S$e;l.normalBuffer=n,this.fullscreenMaterial=l,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Rc(1,1,{minFilter:Gl,magFilter:Gl,depthBuffer:!1,type:j0}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const u=this.resolution=new rf(this,s,o,e);u.addEventListener("change",d=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=Oy){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,i,s){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const i=n.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function IG(n,e,t){for(const i of e){const s="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),o=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const l of t.entries())l[1]!==null&&t.set(l[0],l[1].replace(o,s))}}function D$e(n,e,t){var i,s,o,l,u;let d=e.getFragmentShader(),p=e.getVertexShader();const _=d!==void 0&&/mainImage/.test(d),y=d!==void 0&&/mainUv/.test(d);if(t.attributes|=e.getAttributes(),d===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(y&&t.attributes&v1.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!_&&!y)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const b=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,E=t.shaderParts;let C=(i=E.get(Do.FRAGMENT_HEAD))!=null?i:"",A=(s=E.get(Do.FRAGMENT_MAIN_UV))!=null?s:"",I=(o=E.get(Do.FRAGMENT_MAIN_IMAGE))!=null?o:"",L=(l=E.get(Do.VERTEX_HEAD))!=null?l:"",O=(u=E.get(Do.VERTEX_MAIN_SUPPORT))!=null?u:"";const P=new Set,N=new Set;if(y&&(A+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),p!==null&&/mainSupport/.test(p)){const H=/mainSupport *\([\w\s]*?uv\s*?\)/.test(p);O+=`	${n}MainSupport(`,O+=H?`vUv);
`:`);
`;for(const U of p.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const Q of U[1].split(/\s*,\s*/))t.varyings.add(Q),P.add(Q),N.add(Q);for(const U of p.matchAll(b))N.add(U[1])}for(const H of d.matchAll(b))N.add(H[1]);for(const H of e.defines.keys())N.add(H.replace(/\([\w\s,]*\)/g,""));for(const H of e.uniforms.keys())N.add(H);N.delete("while"),N.delete("for"),N.delete("if"),e.uniforms.forEach((H,U)=>t.uniforms.set(n+U.charAt(0).toUpperCase()+U.slice(1),H)),e.defines.forEach((H,U)=>t.defines.set(n+U.charAt(0).toUpperCase()+U.slice(1),H));const z=new Map([["fragment",d],["vertex",p]]);IG(n,N,t.defines),IG(n,N,z),d=z.get("fragment"),p=z.get("vertex");const W=e.blendMode;if(t.blendModes.set(W.blendFunction,W),_){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(I+=e.inputColorSpace===ps?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==null?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const H=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;I+=`${n}MainImage(color0, UV, `,t.attributes&v1.DEPTH&&H.test(d)&&(I+="depth, ",t.readDepth=!0),I+=`color1);
	`;const U=n+"BlendOpacity";t.uniforms.set(U,W.opacity),I+=`color0 = blend${W.blendFunction}(color0, color1, ${U});

	`,C+=`uniform float ${U};

`}if(C+=d+`
`,p!==null&&(L+=p+`
`),E.set(Do.FRAGMENT_HEAD,C),E.set(Do.FRAGMENT_MAIN_UV,A),E.set(Do.FRAGMENT_MAIN_IMAGE,I),E.set(Do.VERTEX_HEAD,L),E.set(Do.VERTEX_MAIN_SUPPORT,O),e.extensions!==null)for(const H of e.extensions)t.extensions.add(H)}}var N$e=class extends Um{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new w$e(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new W$e;let e=0;for(const l of this.effects)if(l.blendMode.blendFunction===As.DST)n.attributes|=l.getAttributes()&v1.DEPTH;else{if(n.attributes&l.getAttributes()&v1.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${l.name})`);D$e("e"+e++,l,n)}let t=n.shaderParts.get(Do.FRAGMENT_HEAD),i=n.shaderParts.get(Do.FRAGMENT_MAIN_IMAGE),s=n.shaderParts.get(Do.FRAGMENT_MAIN_UV);const o=/\bblend\b/g;for(const l of n.blendModes.values())t+=l.getShaderCode().replace(o,`blend${l.blendFunction}`)+`
`;n.attributes&v1.DEPTH?(n.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===ps&&(i+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(Do.FRAGMENT_HEAD,t),n.shaderParts.set(Do.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(Do.FRAGMENT_MAIN_UV,s),n.shaderParts.forEach((l,u,d)=>d.set(u,l==null?void 0:l.trim().replace(/^#/,`
#`))),this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=Oy){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,s){for(const o of this.effects)o.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const o=this.fullscreenMaterial;o.inputBuffer=e.texture,o.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==ep&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},B$e=class extends Um{constructor({kernelSize:n=vF.MEDIUM,resolutionScale:e=.5,width:t=rf.AUTO_SIZE,height:i=rf.AUTO_SIZE,resolutionX:s=t,resolutionY:o=i}={}){super("KawaseBlurPass"),this.renderTargetA=new Rc(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const l=this.resolution=new rf(this,s,o,e);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight)),this._blurMaterial=new m$e,this._blurMaterial.kernelSize=n,this.copyMaterial=new SY}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,s){const o=this.scene,l=this.camera,u=this.renderTargetA,d=this.renderTargetB,p=this.blurMaterial,_=p.kernelSequence;let y=e;this.fullscreenMaterial=p;for(let b=0,E=_.length;b<E;++b){const C=b&1?d:u;p.kernel=_[b],p.inputBuffer=y.texture,n.setRenderTarget(C),n.render(o,l),y=C}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=y.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(o,l)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,s=t.height;this.renderTargetA.setSize(i,s),this.renderTargetB.setSize(i,s),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==ep?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n.outputEncoding===ps&&(this.renderTargetA.texture.encoding=ps,this.renderTargetB.texture.encoding=ps))}static get AUTO_SIZE(){return rf.AUTO_SIZE}},P$e=class extends Um{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new yF(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,s){const o=n.getContext(),l=n.state.buffers,u=this.scene,d=this.camera,p=this.clearPass,_=this.inverted?0:1,y=1-_;l.color.setMask(!1),l.depth.setMask(!1),l.color.setLocked(!0),l.depth.setLocked(!0),l.stencil.setTest(!0),l.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),l.stencil.setFunc(o.ALWAYS,_,4294967295),l.stencil.setClear(y),l.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?p.render(n,null):(p.render(n,e),p.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(u,d)):(n.setRenderTarget(e),n.render(u,d),n.setRenderTarget(t),n.render(u,d)),l.color.setLocked(!1),l.depth.setLocked(!1),l.stencil.setLocked(!1),l.stencil.setFunc(o.EQUAL,1,4294967295),l.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),l.stencil.setLocked(!0)}},F$e=class extends Um{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:s=rf.AUTO_SIZE,height:o=rf.AUTO_SIZE,resolutionX:l=s,resolutionY:u=o}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new lk(n,e,new GP);const d=this.renderPass;d.ignoreBackground=!0,d.skipShadowMapUpdate=!0;const p=d.getClearPass();p.overrideClearColor=new Nn(7829503),p.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Rc(1,1,{minFilter:Gl,magFilter:Gl}),this.renderTarget.texture.name="NormalPass.Target");const _=this.resolution=new rf(this,l,u,i);_.addEventListener("change",y=>this.setSize(_.baseWidth,_.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,s){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,o,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},U$e=class extends Um{constructor(n,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=n,this.input=e}setInput(n){this.input=n}render(n,e,t,i,s){const o=this.fullscreenMaterial.uniforms;e!==null&&o!==void 0&&o[this.input]!==void 0&&(o[this.input].value=e.texture),n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}initialize(n,e,t){t!==void 0&&t!==ep&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},eL=1/1e3,z$e=1e3,H$e=class{constructor(){this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*eL}get fixedDelta(){return this._fixedDelta*eL}set fixedDelta(n){this._fixedDelta=n*z$e}get elapsed(){return this._elapsed*eL}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=n!==void 0?n:performance.now(),this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()}handleEvent(n){document.hidden||(this.currentTime=performance.now())}dispose(){this.autoReset=!1}},G$e=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new R$e,this.depthTexture=null,this.passes=[],this.timer=new H$e,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const e=n.getSize(new Ht),t=n.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===ep&&n.outputEncoding===ps&&(this.inputBuffer.texture.encoding=ps,this.outputBuffer.texture.encoding=ps,this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(e.width,e.height);for(const s of this.passes)s.initialize(n,t,i)}}replaceRenderer(n,e=!0){const t=this.renderer,i=t.domElement.parentNode;return this.setRenderer(n),e&&i!==null&&(i.removeChild(t.domElement),i.appendChild(n.domElement)),t}createDepthTexture(){const n=this.depthTexture=new kP;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=xy,n.type=gy):n.type=q_,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,i){const s=this.renderer,o=s===null?new Ht:s.getDrawingBufferSize(new Ht),l={minFilter:Tl,magFilter:Tl,stencilBuffer:e,depthBuffer:n,type:t},u=new Rc(o.width,o.height,l);return i>0&&(u.ignoreDepthForMultisampleCopy=!1,u.samples=i),t===ep&&s!==null&&s.outputEncoding===ps&&(u.texture.encoding=ps),u.texture.name="EffectComposer.Buffer",u.texture.generateMipmaps=!1,u}setMainScene(n){for(const e of this.passes)e.mainScene=n}setMainCamera(n){for(const e of this.passes)e.mainCamera=n}addPass(n,e){const t=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new Ht),o=i.getContext().getContextAttributes().alpha,l=this.inputBuffer.texture.type;if(n.setRenderer(i),n.setSize(s.width,s.height),n.initialize(i,o,l),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const u=this.createDepthTexture();for(n of t)n.setDepthTexture(u)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const i=(s,o)=>s||o.needsDepthTexture;e.reduce(i,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,o=!1,l,u,d;n===void 0&&(this.timer.update(),n=this.timer.delta);for(const p of this.passes)p.enabled&&(p.render(e,i,s,n,o),p.needsSwap&&(o&&(t.renderToScreen=p.renderToScreen,l=e.getContext(),u=e.state.buffers.stencil,u.setFunc(l.NOTEQUAL,1,4294967295),t.render(e,i,s,n,o),u.setFunc(l.EQUAL,1,4294967295)),d=i,i=s,s=d),p instanceof P$e?o=!0:p instanceof k$e&&(o=!1))}setSize(n,e,t){const i=this.renderer,s=i.getSize(new Ht);(n===void 0||e===void 0)&&(n=s.width,e=s.height),(s.width!==n||s.height!==e)&&i.setSize(n,e,t);const o=i.getDrawingBufferSize(new Ht);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const l of this.passes)l.setSize(o.width,o.height)}reset(){const n=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=n}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},W$e=class{constructor(){this.shaderParts=new Map([[Do.FRAGMENT_HEAD,null],[Do.FRAGMENT_MAIN_UV,null],[Do.FRAGMENT_MAIN_IMAGE,null],[Do.VERTEX_HEAD,null],[Do.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=v1.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=_g}},V$e=class extends Set{constructor(n,e=10){super(),this.l=e,this.exclusive=!1,n!==void 0&&this.set(n)}get layer(){return this.l}set layer(n){const e=this.l;for(const t of this)t.layers.disable(e),t.layers.enable(n);this.l=n}getLayer(){return this.layer}setLayer(n){this.layer=n}isExclusive(){return this.exclusive}setExclusive(n){this.exclusive=n}clear(){const n=this.layer;for(const e of this)e.layers.disable(n);return super.clear()}set(n){this.clear();for(const e of n)this.add(e);return this}indexOf(n){return this.has(n)?0:-1}add(n){return this.exclusive?n.layers.set(this.layer):n.layers.enable(this.layer),super.add(n)}delete(n){return this.has(n)&&n.layers.disable(this.layer),super.delete(n)}toggle(n){let e;return this.has(n)?(this.delete(n),e=!1):(this.add(n),e=!0),e}setVisible(n){for(const e of this)n?e.layers.enable(0):e.layers.disable(0);return this}},j$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",X$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",Y$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",K$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",J$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",q$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",Q$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Z$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",eCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",tCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",nCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",rCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",iCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",sCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",oCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",aCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",lCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",uCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",cCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",hCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",dCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",pCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",fCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",mCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",gCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",_Ce="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",vCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",yCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",bCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",TCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",SCe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",ECe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",xCe=new Map([[As.ADD,j$e],[As.ALPHA,X$e],[As.AVERAGE,Y$e],[As.COLOR,K$e],[As.COLOR_BURN,J$e],[As.COLOR_DODGE,q$e],[As.DARKEN,Q$e],[As.DIFFERENCE,Z$e],[As.DIVIDE,eCe],[As.DST,null],[As.EXCLUSION,tCe],[As.HARD_LIGHT,nCe],[As.HARD_MIX,rCe],[As.HUE,iCe],[As.INVERT,sCe],[As.INVERT_RGB,oCe],[As.LIGHTEN,aCe],[As.LINEAR_BURN,lCe],[As.LINEAR_DODGE,uCe],[As.LINEAR_LIGHT,cCe],[As.LUMINOSITY,hCe],[As.MULTIPLY,dCe],[As.NEGATION,pCe],[As.NORMAL,fCe],[As.OVERLAY,mCe],[As.PIN_LIGHT,gCe],[As.REFLECT,_Ce],[As.SATURATION,vCe],[As.SCREEN,yCe],[As.SOFT_LIGHT,bCe],[As.SRC,TCe],[As.SUBTRACT,SCe],[As.VIVID_LIGHT,ECe]]),wCe=class extends Bm{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new eo(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return xCe.get(this.blendFunction)}},$Ce=class extends Bm{constructor(n,e,{attributes:t=v1.NONE,blendFunction:i=As.NORMAL,defines:s=new Map,uniforms:o=new Map,extensions:l=null,vertexShader:u=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=u,this.defines=s,this.uniforms=o,this.extensions=l,this.blendMode=new wCe(i),this.blendMode.addEventListener("change",d=>this.setChanged()),this._inputColorSpace=_g,this._outputColorSpace=null}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=Oy){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Rc||e instanceof sd||e instanceof lc||e instanceof Um)&&this[n].dispose()}}};new $e;new Qr;new Nn;var CCe=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texelToLinear(texture2D(patternTexture,vUvPattern));
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,ACe="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",MCe=class extends $Ce{constructor(n,e,{blendFunction:t=As.SCREEN,patternTexture:i=null,patternScale:s=1,edgeStrength:o=1,pulseSpeed:l=0,visibleEdgeColor:u=16777215,hiddenEdgeColor:d=2230538,kernelSize:p=vF.VERY_SMALL,blur:_=!1,xRay:y=!0,multisampling:b=0,resolutionScale:E=.5,width:C=rf.AUTO_SIZE,height:A=rf.AUTO_SIZE,resolutionX:I=C,resolutionY:L=A}={}){super("OutlineEffect",CCe,{uniforms:new Map([["maskTexture",new eo(null)],["edgeTexture",new eo(null)],["edgeStrength",new eo(o)],["visibleEdgeColor",new eo(new Nn(u))],["hiddenEdgeColor",new eo(new Nn(d))],["pulse",new eo(1)],["patternScale",new eo(s)],["patternTexture",new eo(null)]])}),this.blendMode.addEventListener("change",z=>{this.blendMode.getBlendFunction()===As.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.setBlendFunction(t),this.patternTexture=i,this.xRay=y,this.scene=n,this.camera=e,this.renderTargetMask=new Rc(1,1),this.renderTargetMask.samples=b,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new Rc(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new yF,this.clearPass.overrideClearColor=new Nn(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new O$e(n,e),this.maskPass=new lk(n,e,new y$e(this.depthPass.texture,e));const O=this.maskPass.clearPass;O.overrideClearColor=new Nn(16777215),O.overrideClearAlpha=1,this.blurPass=new B$e({resolutionScale:E,resolutionX:I,resolutionY:L,kernelSize:p}),this.blurPass.enabled=_;const P=this.blurPass.resolution;P.addEventListener("change",z=>this.setSize(P.baseWidth,P.baseHeight)),this.outlinePass=new U$e(new A$e);const N=this.outlinePass.fullscreenMaterial;N.inputBuffer=this.renderTargetMask.texture,this.time=0,this.active=!1,this.selection=new V$e,this.selection.layer=10,this.pulseSpeed=l}set mainScene(n){this.scene=n,this.depthPass.mainScene=n,this.maskPass.mainScene=n}set mainCamera(n){this.camera=n,this.depthPass.mainCamera=n,this.maskPass.mainCamera=n,this.maskPass.overrideMaterial.copyCameraSettings(n)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(n){this.renderTargetMask.samples=n,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(n){this.uniforms.get("patternScale").value=n}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(n){this.uniforms.get("edgeStrength").value=n}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(n){this.uniforms.get("visibleEdgeColor").value=n}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(n){this.uniforms.get("hiddenEdgeColor").value=n}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(n){this.pulseSpeed=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get selectionLayer(){return this.selection.layer}set selectionLayer(n){this.selection.layer=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get blur(){return this.blurPass.enabled}set blur(n){this.blurPass.enabled=n}get xRay(){return this.defines.has("X_RAY")}set xRay(n){this.xRay!==n&&(n?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(n){this.xRay=n}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(n){if(n!==null?(n.wrapS=n.wrapT=rE,this.defines.set("USE_PATTERN","1"),this.setVertexShader(ACe)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.renderer!==null){const e=CG(n,this.renderer.capabilities.isWebGL2);this.defines.set("texelToLinear(texel)",e)}this.uniforms.get("patternTexture").value=n,this.setChanged()}setPatternTexture(n){this.patternTexture=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}setSelection(n){return this.selection.set(n),this}clearSelection(){return this.selection.clear(),this}selectObject(n){return this.selection.add(n),this}deselectObject(n){return this.selection.delete(n),this}update(n,e,t){const i=this.scene,s=this.camera,o=this.selection,l=this.uniforms.get("pulse"),u=i.background,d=s.layers.mask;o.size>0?(i.background=null,l.value=1,this.pulseSpeed>0&&(l.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.active=!0,this.time+=t,o.setVisible(!1),this.depthPass.render(n),o.setVisible(!0),s.layers.set(o.layer),this.maskPass.render(n,this.renderTargetMask),s.layers.mask=d,i.background=u,this.outlinePass.render(n,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(n,this.renderTargetOutline,this.renderTargetOutline)):this.active&&(this.clearPass.render(n,this.renderTargetOutline),this.active=!1)}setSize(n,e){this.blurPass.setSize(n,e),this.renderTargetMask.setSize(n,e);const t=this.resolution;t.setBaseSize(n,e);const i=t.width,s=t.height;this.depthPass.setSize(i,s),this.renderTargetOutline.setSize(i,s),this.outlinePass.fullscreenMaterial.setSize(i,s)}initialize(n,e,t){const i=this.patternTexture,s=CG(i,n.capabilities.isWebGL2);this.defines.set("texelToLinear(texel)",s),this.blurPass.initialize(n,e,ep),t!==void 0&&(this.depthPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.outlinePass.initialize(n,e,t))}};new $e;new $e;let Hx;function ICe(){if(Hx!==void 0)return Hx;try{var n;let e;const t=document.createElement("canvas");return Hx=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))===null||n===void 0||n.loseContext()),Hx}catch{return Hx=!1}}const RCe=n=>!!n.current,RG=n=>RCe(n)?n.current:n,EY=me.createContext(null),kCe=Vr.memo(me.forwardRef((n,e)=>{let{children:t,camera:i,scene:s,resolutionScale:o,enabled:l=!0,renderPriority:u=1,autoClear:d=!0,depthBuffer:p,disableNormalPass:_,stencilBuffer:y,multisampling:b=8,frameBufferType:E=C1}=n;const{gl:C,scene:A,camera:I,size:L}=Jd();s=s||A,i=i||I;const[O,P,N]=me.useMemo(()=>{const H=ICe(),U=new G$e(C,{depthBuffer:p,stencilBuffer:y,multisampling:b>0&&H?b:0,frameBufferType:E});U.addPass(new lk(s,i));let Q=null,ne=null;return _||(ne=new F$e(s,i),ne.enabled=!1,U.addPass(ne),o!==void 0&&H&&(Q=new L$e({normalBuffer:ne.texture,resolutionScale:o}),Q.enabled=!1,U.addPass(Q))),[U,ne,Q]},[i,C,p,y,b,E,s,_,o]);me.useEffect(()=>O==null?void 0:O.setSize(L.width,L.height),[O,L]),Fm((H,U)=>{l&&(C.autoClear=d,O.render(U))},l?u:0);const z=me.useRef(null);me.useLayoutEffect(()=>{let H;return z.current&&z.current.__r3f&&O&&(H=new N$e(i,...z.current.__r3f.objects),H.renderToScreen=!0,O.addPass(H),P&&(P.enabled=!0),N&&(N.enabled=!0)),()=>{H&&(O==null||O.removePass(H)),P&&(P.enabled=!1),N&&(N.enabled=!1)}},[O,t,i,P,N]);const W=me.useMemo(()=>({composer:O,normalPass:P,downSamplingPass:N,resolutionScale:o,camera:i,scene:s}),[O,P,N,o,i,s]);return me.useImperativeHandle(e,()=>O,[O]),on(EY.Provider,{value:W,children:on("group",{ref:z,children:t})})})),bF=me.createContext(null);function OCe(n){let{children:e,enabled:t=!0}=n;const[i,s]=me.useState([]),o=me.useMemo(()=>({selected:i,select:s,enabled:t}),[i,s,t]);return Vr.createElement(bF.Provider,{value:o},e)}function xY(n){let{enabled:e=!1,children:t,...i}=n;const s=me.useRef(null),o=me.useContext(bF);return me.useEffect(()=>{if(o&&e){let l=!1;const u=[];if(s.current.traverse(d=>{d.type==="Mesh"&&u.push(d),o.selected.indexOf(d)===-1&&(l=!0)}),l)return o.select(d=>[...d,...u]),()=>{o.select(d=>d.filter(p=>!u.includes(p)))}}},[e,t]),on("group",{ref:s,...i,children:t})}const LCe=me.forwardRef(function(n,e){let{selection:t=[],selectionLayer:i=10,blendFunction:s,patternTexture:o,edgeStrength:l,pulseSpeed:u,visibleEdgeColor:d,hiddenEdgeColor:p,width:_,height:y,kernelSize:b,blur:E,xRay:C,...A}=n;const I=Jd(z=>z.invalidate),{scene:L,camera:O}=me.useContext(EY),P=me.useMemo(()=>new MCe(L,O,{blendFunction:s,patternTexture:o,edgeStrength:l,pulseSpeed:u,visibleEdgeColor:d,hiddenEdgeColor:p,width:_,height:y,kernelSize:b,blur:E,xRay:C,...A}),[s,E,O,l,y,p,b,o,u,L,d,_,C]),N=me.useContext(bF);return me.useEffect(()=>{if(!N&&t)return P.selection.set(Array.isArray(t)?t.map(RG):[RG(t)]),I(),()=>{P.selection.clear(),I()}},[P,t,N]),me.useEffect(()=>{P.selectionLayer=i,I()},[P,i]),me.useRef(),me.useEffect(()=>{if(N&&N.enabled){var z;if((z=N.selected)!=null&&z.length)return P.selection.set(N.selected),I(),()=>{P.selection.clear(),I()}}},[N]),on("primitive",{ref:e,object:P})}),DCe=["cube","cylinder","sphere","capsule","arrow"],wY=me.createContext(),NCe=n=>{const e=me.useContext(wY)[n.shape];return DCe.includes(n.shape)?a$e(n):e&&typeof e=="function"?e():(console.warn(`Shape not loaded: ${n.shape} (reading property 'shape' of item)`,n),[])},BCe=({meshes:n,children:e})=>on(wY.Provider,{value:n,children:e}),PCe=me.memo(me.forwardRef(({objectKey:n,highlightColor:e,position:t,rotation:i,scale:s,ghost:o},l)=>{const u=me.useRef(null),d=PE(l,u),p=No(A=>A.onClick,Cp),_=No(A=>A.onPointerOver,Cp),y=No(A=>A.onPointerOut,Cp),b=No(A=>A.clock),E=No(me.useCallback(A=>A.items[n],[n]),Cp),C=NCe(E);return Fm(me.useCallback(()=>{const A=b.getElapsed()*1e3;d.current&&(d.current.position.set(t?t.x:typeof E.position.x=="function"?E.position.x(A):E.position.x,t?t.y:typeof E.position.y=="function"?E.position.y(A):E.position.y,t?t.z:typeof E.position.z=="function"?E.position.z(A):E.position.z),d.current.quaternion.set(i?i.x:typeof E.rotation.x=="function"?E.rotation.x(A):E.rotation.x,i?i.y:typeof E.rotation.y=="function"?E.rotation.y(A):E.rotation.y,i?i.z:typeof E.rotation.z=="function"?E.rotation.z(A):E.rotation.z,i?i.w:typeof E.rotation.w=="function"?E.rotation.w(A):E.rotation.w),d.current.scale.set(s?s.x:typeof E.scale.x=="function"?E.scale.x(A):E.scale.x,s?s.y:typeof E.scale.y=="function"?E.scale.y(A):E.scale.y,s?s.z:typeof E.scale.z=="function"?E.scale.z(A):E.scale.z),d.current.visible=typeof E.hidden=="function"?!E.hidden(A):!E.hidden)},[E,t,i,s,d,b])),on(xY,{enabled:E.highlighted,children:kh("group",{ref:d,up:[0,0,1],children:[on("group",{up:[0,0,1],rotation:[Math.PI/2,0,0],onPointerDown:A=>{p(n,!d.current.visible,{local:{position:d.current.position,rotation:d.current.quaternion},world:{position:d.current.getWorldPosition(new $e),rotation:d.current.getWorldQuaternion(new bl)}},A)},onPointerOver:A=>{_(n,!d.current.visible,A)},onPointerOut:A=>{y(n,!d.current.visible,A)},children:C.map((A,I)=>on($Y,{idx:I,groupOrPart:A,objectKey:n,ghost:o,highlightColor:e},I))}),E.showName&&on(qX,{distanceFactor:3,position:[0,0,.2],children:on("div",{style:{opacity:.75,borderRadius:2,backgroundColor:"lightgrey",padding:5,userSelect:"none"},children:E.name})})]})})})),FCe=me.memo(({part:n,objectKey:e,ghost:t,highlightColor:i})=>{const s=No(me.useCallback(_=>_.items[e].wireframe,[e])),o=No(me.useCallback(_=>_.items[e].color,[e])),l=o!==void 0,u=me.useRef(),d=me.useRef(),p=No(_=>_.clock);return Fm(me.useCallback(()=>{const _=p.getElapsed()*1e3;t||(v$(d,o,_),v$(u,o,_))},[t,u,d,p,o])),t?on("mesh",{ref:d,geometry:n.geometry,material:EM(i),scale:n.scale,castShadow:!1,receiveShadow:!1},"B"):l?kh("group",{up:[0,0,1],children:[on("mesh",{ref:d,geometry:n.geometry,scale:n.scale,castShadow:!1,receiveShadow:!1,children:on("meshLambertMaterial",{transparent:!0,wireframe:s,attach:"material",opacity:1,side:id})},"B"),on("mesh",{ref:u,geometry:n.geometry,scale:n.scale,castShadow:!1,receiveShadow:!1,children:on("meshLambertMaterial",{transparent:!0,attach:"material",wireframe:s,opacity:1,side:e_})},"F")]}):on(U$,{children:on("mesh",{ref:u,geometry:n.geometry,material:n.material,scale:n.scale,castShadow:!0,receiveShadow:!0,wireframe:s},"I")})}),$Y=me.memo(({idx:n,groupOrPart:e,ghost:t,objectKey:i,highlightColor:s})=>e.type==="group"?on("group",{up:[0,0,1],position:e.position,rotation:e.rotation,scale:e.scale,children:e.children.map((o,l)=>on($Y,{idx:l,groupOrPart:o,objectKey:i,ghost:t,highlightColor:s},l))},n):on(FCe,{part:e,objectKey:i,highlightColor:s,ghost:t},n)),UCe=me.forwardRef(({objectKey:n},e)=>{const t=me.useRef(null),i=PE(e,t),{vertices:s,width:o,hidden:l}=No(me.useCallback(u=>({vertices:u.lines[n].vertices,width:u.lines[n].width,hidden:u.lines[n].hidden}),[n]),Cp);return s.length<=1?null:on(OEe,{ref:i,visible:!l,points:s.map(u=>[u.position.x,u.position.y,u.position.z]),color:"white",vertexColors:s.map(u=>[u.color.r/255,u.color.g/255,u.color.b/255]),lineWidth:o})}),zCe=me.forwardRef(({objectKey:n},e)=>{const t=me.useRef(null),i=PE(e,t),s=No(C=>C.onClick,Cp),o=No(C=>C.onPointerOver,Cp),l=No(C=>C.onPointerOut,Cp),u=No(me.useCallback(C=>C.hulls[n],[n]),Cp),d=No(me.useCallback(C=>C.hulls[n].vertices,[n]),Cp),p=No(C=>C.clock),_=me.useRef(),y=me.useRef(),b=typeof d=="function"?d(0):d,E=new O5(b.map(C=>new $e(C.x,C.y,C.z)));return Fm(me.useCallback(()=>{const C=p.getElapsed()*1e3;v$(y,u.color,C),v$(_,u.color,C);const A=typeof d=="function"?d(C):d;if(A!==b){const L=new O5(A.map(O=>new $e(O.x,O.y,O.z)));_.current.geometry=L,y.current.geometry=L}const I=typeof u.hidden=="function"?!u.hidden(C):!u.hidden;_.current.visible=I,y.current.visible=I},[_,y,b,u,p,d])),on(xY,{enabled:u.highlighted,children:kh("group",{ref:i,up:[0,0,1],children:[kh("group",{up:[0,0,1],onPointerDown:C=>{s(n,_.current.visible,C)},onPointerOver:C=>{o(n,_.current.visible,C)},onPointerOut:C=>{l(n,_.current.visible,C)},children:[on("mesh",{ref:y,geometry:E,castShadow:!1,receiveShadow:!1,children:on("meshLambertMaterial",{transparent:!0,wireframe:u.wireframe,attach:"material",side:id})},`${n}B`),on("mesh",{ref:_,geometry:E,castShadow:!1,receiveShadow:!1,children:on("meshLambertMaterial",{transparent:!0,attach:"material",wireframe:u.wireframe,side:e_})},`${n}F`)]}),u.showName&&on(qX,{distanceFactor:2,position:[0,0,.5],children:on("div",{style:{opacity:.75,borderRadius:2,backgroundColor:"lightgrey"},className:"disable-text-selection",children:u.name})})]})})}),HCe=me.forwardRef(({objectKey:n},e)=>{const t=me.useRef(null),i=PE(e,t),s=me.useRef(),o=No(u=>u.clock),l=No(me.useCallback(u=>u.texts[n],[n]));return Fm(me.useCallback(()=>{const u=o.getElapsed()*1e3;i.current&&(i.current.position.set(typeof l.position.x=="function"?l.position.x(u):l.position.x,typeof l.position.y=="function"?l.position.y(u):l.position.y,typeof l.position.z=="function"?l.position.z(u):l.position.z),i.current.visible=typeof l.hidden=="function"?!l.hidden(u):!l.hidden),s.current&&v$(s,l.color,u)},[l,i,o])),on("group",{ref:i,children:on(kEe,{follow:!0,children:on(Cxe,{ref:s,depthOffset:2,scale:[.2,.2,.2],children:l.value})})})}),GCe=me.forwardRef(({objectKey:n},e)=>{const t=me.useRef(null),i=PE(e,t),s=No(_=>_.clock),{points:o,scale:l,hidden:u}=No(me.useCallback(_=>({points:_.points[n].points,scale:_.points[n].scale,hidden:_.points[n].hidden}),[n]),Cp),[{positions:d,colors:p}]=me.useState(()=>({positions:new Float32Array(o.length*3),colors:new Float32Array(o.length*3)}));return Fm(()=>{const _=s.getElapsed()*1e3;if(i.current)for(let y=0;y<o.length;y++){let b=y*3;d[b]=typeof o[y].position.x=="function"?o[y].position.x(_):o[y].position.x,d[b+1]=typeof o[y].position.y=="function"?o[y].position.y(_):o[y].position.y,d[b+2]=typeof o[y].position.z=="function"?o[y].position.z(_):o[y].position.z,p[b]=typeof o[y].color.r=="function"?o[y].color.r(_)/255:o[y].color.r/255,p[b+1]=typeof o[y].color.g=="function"?o[y].color.g(_)/255:o[y].color.g/255,p[b+2]=typeof o[y].color.b=="function"?o[y].color.b(_)/255:o[y].color.b/255}}),o.length<=1?null:on(cwe,{ref:i,hidden:u,positions:d,colors:p,children:on(iwe,{transparent:!0,vertexColors:!0,sizeAttenuation:!0,depthWrite:!0,size:l*.1})})}),TF=me.memo(({activeTf:n,displayTfs:e,allTfs:t,allItems:i,allLines:s,allHulls:o,allTexts:l,allPoints:u,highlightColor:d,ghosts:p,targetRef:_,targetId:y,targetSource:b,filterActive:E,tfFilter:C,customProps:A})=>{const I=n==="world"?u$e:n==="gizmo"?c$e:l$e,L=n===y?A:{},O=E?t.filter(N=>C.includes(N.key)):t,P=E&&n!==_;return kh(I,{objectKey:n,displayTfs:e,ref:y===n?_:null,...L,ghost:p,highlightColor:d,children:[O.filter(N=>N.frame===n||n==="world"&&!N.frame).map(N=>on(TF,{activeTf:N.key,displayTfs:e,allTfs:t,allItems:i,allLines:s,allHulls:o,allTexts:l,allPoints:u,highlightColor:d,ghosts:p,targetRef:_,targetSource:b,targetId:y,filterActive:P,tfFilter:C,customProps:A},N.key)),i.filter(N=>N.frame===n||n==="world"&&!N.frame).map(N=>{const z=N.key===y&&b==="items"?A:{};return!E||N.key===y||n===y?on(PCe,{objectKey:N.key,highlightColor:d,ghost:p,ref:N.key===y?_:null,...z},N.key):null}),s.filter(N=>N.frame===n||n==="world"&&!N.frame).map(N=>{const z=N.key===y&&b==="lines"?A:{};return!E||N.key===y||n===y?on(UCe,{objectKey:N.key,ref:N.lineKey===y?_:null,...z},N.key):null}),o.filter(N=>N.frame===n||n==="world"&&!N.frame).map(N=>{const z=N.key===y&&b==="hulls"?A:{};return!E||N.key===y||n===y?on(zCe,{objectKey:N.key,highlightColor:d,ghost:p,ref:N.key===y?_:null,...z},N.key):null}),l.filter(N=>N.frame===n||n==="world"&&!N.frame).map(N=>{const z=N.key===y&&b==="texts"?A:{};return!E||N.key===y||n===y?on(HCe,{objectKey:N.key,highlightColor:d,ref:N.key===y?_:null,...z},N.key):null}),u.filter(N=>N.frame===n||n==="world"&&!N.frame).map(N=>{const z=N.key===y&&b==="points"?A:{};return!E||N.key===y||n===y?on(GCe,{objectKey:N.key,highlightColor:d,ref:N.key===y?_:null,...z},N.key):null})]})}),WCe=["enabled","axis","translationSnap","rotationSnap","scaleSnap","space","size"],VCe=["displayTfs","allTfs","allItems","allLines","allHulls","allTexts","allPoints","highlightColor"],jCe=me.memo(({camera:n,objectInfo:e,highlightColor:t,translateSnap:i,rotateSnap:s,scaleSnap:o,onDragStart:l,onDragEnd:u,mode:d,...p})=>{const _=GO(p,WCe),y=GO(p,VCe),b=No(me.useCallback(le=>{let ge=[];e.source==="tfs"&&ge.push(e.key);let ce=le[e.source][e.key].frame;for(;ce&&ce!=="world"&&ce!=="gizmo";){let pe=le.tfs[ce];ge.push(ce),ce=pe.frame}return ge},[e]),Cp),E=me.useRef(),C=me.useRef(),A=No(le=>GO(le[e.source][e.key],["position","rotation","scale"]),Cp),I=Jd(({gl:le})=>le),L=Jd(({camera:le})=>le),O=Jd(({invalidate:le})=>le),P=n||L,[N]=me.useState(()=>new Wwe(P,I.domElement));N.translationSnap=i,N.rotationSnap=s,N.scaleSnap=o,d!=null&&d.includes("translate")?N.mode="translate":d!=null&&d.includes("rotate")?N.mode="rotate":d!=null&&d.includes("scale")&&(N.mode="scale"),d!=null&&d.includes("-x")?(N.showY=!1,N.showZ=!1):d!=null&&d.includes("-y")?(N.showX=!1,N.showZ=!1):d!=null&&d.includes("-z")&&(N.showX=!1,N.showY=!1);const[z,W]=me.useState(!1),[H,U]=me.useState(A),[Q,ne]=me.useState(!1);me.useEffect(()=>{console.log("refreshing transform"),U(A)},[A,Q]);const oe=No(le=>le.onMove,Cp);return me.useEffect(()=>{const le=ge=>{var ce,pe,Te;const Oe=(ce=C==null?void 0:C.current)==null?void 0:ce.position,J=(pe=C==null?void 0:C.current)==null?void 0:pe.quaternion,se=(Te=C==null?void 0:C.current)==null?void 0:Te.scale;ge.value&&!z?(console.log("starting transform"),W(!0),U({position:Oe,rotation:J,scale:se}),l&&l()):!ge.value&&z&&(console.log("stopping transform"),W(!1),u&&u(),oe(e.key,e.source,{position:N.worldPosition,quaternion:N.worldQuaternion,scale:N._worldScale},{position:Oe?{x:Oe.x,y:Oe.y,z:Oe.z}:null,quaternion:J?{x:J.x,y:J.y,z:J.z,w:J.w}:null,scale:se?{x:se.x,y:se.y,z:se.z}:null}),ne(!Q))};return N&&N.addEventListener("dragging-changed",le),()=>{N.removeEventListener("dragging-changed",le)}},[A,z,e]),me.useEffect(()=>void(N==null?void 0:N.attach(C.current)),[C,N]),me.useEffect(()=>(N&&N.addEventListener("change",O),()=>{var le;return(le=N==null?void 0:N.removeEventListener)==null?void 0:le.call(N,"change",O)}),[N,O]),N?kh(U$,{children:[on("primitive",{ref:E,object:N,..._}),on(TF,{...y,activeTf:"world",tfFilter:b,ghosts:!0,targetRef:C,targetSource:e.source,targetId:e.key,filterActive:!0,customProps:{...H}})]}):null}),Ob=(n,e)=>n.length!==e.length?!1:!n.some((t,i)=>!sg.exports.isEqual(e[i],t));function XCe({displayTfs:n=!1,displayGrid:e=!0,isPolar:t=!1,backgroundColor:i="#d0d0d0",planeColor:s="#a8a8a8",highlightColor:o="#00ffff",plane:l=0,translateSnap:u=0,rotateSnap:d=0,scaleSnap:p=0,debug:_=!1}){_&&console.log("content rerender");const y=Jd(oe=>oe.camera),b=No(oe=>oe.clock,Cp);Fm(()=>{b.update()});const E=No(oe=>sg.exports.sortBy(Object.entries(oe.tfs).map(([le,ge])=>({key:le,frame:ge.frame,transformMode:ge.transformMode,source:"tfs"})),le=>le.key),Ob),C=No(oe=>sg.exports.sortBy(Object.entries(oe.items).map(([le,ge])=>({key:le,frame:ge.frame,transformMode:ge.transformMode,source:"items"})),le=>le.key),Ob),A=No(oe=>sg.exports.sortBy(Object.entries(oe.lines).map(([le,ge])=>({key:le,frame:ge.frame,source:"lines"})),le=>le.key),Ob),I=No(oe=>sg.exports.sortBy(Object.entries(oe.hulls).map(([le,ge])=>({key:le,frame:ge.frame,source:"hulls"})),le=>le.key),Ob),L=No(oe=>sg.exports.sortBy(Object.entries(oe.texts).map(([le,ge])=>({key:le,frame:ge.frame,source:"texts"})),le=>le.key),Ob),O=No(oe=>sg.exports.sortBy(Object.entries(oe.points).map(([le,ge])=>({key:le,frame:ge.frame,source:"points"})),le=>le.key),Ob),P=No(oe=>sg.exports.sortBy(Object.entries(oe.widgets).map(([le,ge])=>({key:le,frame:ge.frame,source:"widgets"})),le=>le.key),Ob),N=[...C,...E].filter(oe=>["translate","rotate","scale","translate-x","translate-y","translate-z","rotate-x","rotate-y","rotate-z","scale-x","scale-y","scale-z"].includes(oe.transformMode)),z=me.useRef(),W=me.useRef(),H=me.useRef(),U=me.useRef(),Q=Gwe(s),ne=[Q.r,Q.g,Q.b,.5];return kh(Vr.Fragment,{children:[on(nwe,{ref:U,makeDefault:!0,camera:y}),on("pointLight",{ref:W,intensity:.5,position:[-1,-3,3],color:"#FFFAEE"}),on(zwe,{ref:z,intensity:.7,color:"white"}),on(Hwe,{ref:H,castShadow:!0,position:[5,15,15],intensity:.6,color:"#FFFAEE"}),on("spotLight",{penumbra:1,position:[-1,-1,4],intensity:.3,castShadow:!0,color:"#FFFAEE"}),on("color",{attach:"background",args:[i]}),on("fogExp2",{attach:"fog",args:[i,.01]}),on(owe,{receiveShadow:!0,scale:1e3,position:[0,0,l-.01],material:Z0(...ne)}),kh(OCe,{children:[on(kCe,{autoClear:!1,children:on(LCe,{visibleEdgeColor:o,hiddenEdgeColor:o,blur:!0,kernelSize:1,edgeStrength:50,pulseSpeed:.25,xRay:!0})}),on(TF,{activeTf:"world",displayTfs:n,allTfs:E,allItems:C,allLines:A,allHulls:I,allTexts:L,allPoints:O,allWidgets:P,highlightColor:o})]}),on("group",{position:[0,0,l],rotation:[Math.PI/2,0,0],up:[0,0,1],children:e&&(t?on("polarGridHelper",{args:[10,16,8,64,"white","gray"]}):on("gridHelper",{args:[20,20,"white","gray"]}))}),N.map(oe=>on(jCe,{objectInfo:oe,mode:oe.transformMode,displayTfs:n,allTfs:E,allItems:C,allLines:A,allHulls:I,allTexts:L,allPoints:O,allWidgets:P,translateSnap:u,rotateSnap:d,scaleSnap:p,highlightColor:o,onDragEnd:()=>{U.current&&(U.current.enabled=!0)},onDragStart:()=>{U.current&&(U.current.enabled=!1)}},`movableObjectTransform-${oe.key}`))]})}to.DefaultUp.set(0,0,1);function YCe({backgroundColor:n="#d0d0d0",store:e,fov:t=60,onPointerMissed:i=()=>{},meshLookup:s={},debug:o=!1,...l}){return o&&console.log("Scene rerender"),on(hEe,{camera:{up:[0,0,1],fov:t,position:[0,-3,3]},shadows:!0,style:{background:n||"#d0d0d0"},onPointerMissed:i||(()=>{}),children:on(Uwe,{store:e,debug:o,children:on(BCe,{meshes:s,children:on(me.Suspense,{children:on(XCe,{...l,backgroundColor:n,debug:o})})})})})}var SF={},KCe=CE;Object.defineProperty(SF,"__esModule",{value:!0});var CY=SF.default=void 0,JCe=KCe(NR()),qCe=Ve;CY=SF.default=(0,JCe.default)((0,qCe.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt");var EF={},QCe=CE;Object.defineProperty(EF,"__esModule",{value:!0});var AY=EF.default=void 0,ZCe=QCe(NR()),eAe=Ve;AY=EF.default=(0,ZCe.default)((0,eAe.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");var xF={},tAe=CE;Object.defineProperty(xF,"__esModule",{value:!0});var MY=xF.default=void 0,nAe=tAe(NR()),rAe=Ve;MY=xF.default=(0,nAe.default)((0,rAe.jsx)("path",{d:"M6 6h12v12H6z"}),"Stop");const iAe="/gpu-programming/assets/compile-worker-DvE19UY0.js",sAe={s_Acceptance:"s_Acceptance.wav",s_Amazement:"s_Amazement.wav",s_Amazement2:"s_Amazement2.wav",s_Anger:"s_Anger.wav",s_Anger2:"s_Anger2.wav",s_Anger3:"s_Anger3.wav",s_Anger4:"s_Anger4.wav",s_Annoyance:"s_Annoyance.wav",s_Annoyance2:"s_Annoyance2.wav",s_Annoyance3:"s_Annoyance3.wav",s_Annoyance4:"s_Annoyance4.wav",s_Awe:"s_Awe.wav",s_Awe2:"s_Awe2.wav",s_Awe3:"s_Awe3.wav",s_Boredom:"s_Boredom.wav",s_Disapproval:"s_Disapproval.wav",s_Disgust:"s_Disgust.wav",s_Disgust2:"s_Disgust2.wav",s_Disgust3:"s_Disgust3.wav",s_DisorientedConfused:"s_DisorientedConfused.wav",s_DisorientedConfused2:"s_DisorientedConfused2.wav",s_DisorientedConfused3:"s_DisorientedConfused3.wav",s_DisorientedConfused4:"s_DisorientedConfused4.wav",s_DisorientedConfused5:"s_DisorientedConfused5.wav",s_DisorientedConfused6:"s_DisorientedConfused6.wav",s_Distraction:"s_Distraction.wav",s_Ecstacy:"s_Ecstacy.wav",s_Ecstacy2:"s_Ecstacy2.wav",s_Fear:"s_Fear.wav",s_Grief:"s_Grief.wav",s_Grief2:"s_Grief2.wav",s_Grief3:"s_Grief3.wav",s_Grief4:"s_Grief4.wav",s_Joy:"s_Joy.wav",s_Joy2:"s_Joy2.wav",s_Joy3:"s_Joy3.wav",s_Joy4:"s_Joy4.wav",s_Loathing:"s_Loathing.wav",s_Love:"s_Love.wav",s_PhraseByeBye:"s_PhraseByeBye.wav",s_PhraseEvilAhHa:"s_PhraseEvilAhHa.wav",s_PhraseHello:"s_PhraseHello.wav",s_PhraseNoNoNo:"s_PhraseNoNoNo.wav",s_PhraseOopsy:"s_PhraseOopsy.wav",s_PhraseOwOwOw:"s_PhraseOwOwOw.wav",s_PhraseOwwww:"s_PhraseOwwww.wav",s_PhraseUhOh:"s_PhraseUhOh.wav",s_Rage:"s_Rage.wav",s_Sadness:"s_Sadness.wav",s_Sadness2:"s_Sadness2.wav",s_Sadness3:"s_Sadness3.wav",s_Sadness4:"s_Sadness4.wav",s_Sadness5:"s_Sadness5.wav",s_Sadness6:"s_Sadness6.wav",s_Sadness7:"s_Sadness7.wav",s_Sleepy:"s_Sleepy.wav",s_Sleepy2:"s_Sleepy2.wav",s_Sleepy3:"s_Sleepy3.wav",s_Sleepy4:"s_Sleepy4.wav",s_SleepySnore:"s_SleepySnore.wav",s_SystemCameraShutter:"s_SystemCameraShutter.wav"},kG=n=>sAe[n],oAe={e_Sleeping:"e_Sleeping.jpg",e_SleepingZZZ:"e_SleepingZZZ.jpg",e_Contempt:"e_Contempt.jpg",e_ContentLeft:"e_ContentLeft.jpg",e_ContentRight:"e_ContentRight.jpg",e_Disoriented:"e_Disoriented.jpg",e_EcstacyHilarious:"e_EcstacyHilarious.jpg",e_EcstacyStarryEyed:"e_EcstacyStarryEyed.jpg",e_JoyGoofy:"e_JoyGoofy.jpg",e_JoyGoofy2:"e_JoyGoofy2.jpg",e_JoyGoofy3:"e_JoyGoofy3.jpg",e_Love:"e_Love.jpg",e_Rage:"e_Rage.jpg",e_Rage2:"e_Rage2.jpg",e_Rage3:"e_Rage3.jpg",e_Rage4:"e_Rage4.jpg",e_RemorseShame:"e_RemorseShame.jpg",eyes_acceptance:"eyes_acceptance.jpg",eyes_admiration:"eyes_admiration.jpg",eyes_amazement:"eyes_amazement.jpg",eyes_anger:"eyes_anger.jpg",eyes_annoyed:"eyes_annoyed.jpg",eyes_anticipation:"eyes_anticipation.png",eyes_apprehension:"eyes_apprehension.jpg",eyes_apprehension_1:"eyes_apprehension_1.jpg",eyes_boredom:"eyes_boredom.jpg",eyes_default:"eyes_default.jpg",eyes_disgust:"eyes_disgust.jpg",eyes_distraction:"eyes_distraction.gif",eyes_ecstasy_frame_1:"eyes_ecstasy_frame_1.jpg",eyes_ecstasy_frame_2:"eyes_ecstasy_frame_2.jpg",eyes_fear:"eyes_fear.jpg",eyes_grief:"eyes_grief.jpg",eyes_interest:"eyes_interest.jpg",eyes_joy:"eyes_joy.jpg",eyes_loathing:"eyes_loathing.jpg",eyes_pensiveness:"eyes_pensiveness.jpg",eyes_rage:"eyes_rage.jpg",eyes_sad:"eyes_sad.jpg",eyes_serenity:"eyes_serenity.jpg",eyes_surprise:"eyes_surprise.png",eyes_terror:"eyes_terror.jpg",eyes_trust:"eyes_trust.jpg",eyes_vigilance:"eyes_vigilance.jpg"},aAe=n=>oAe[n],lAe=({blocks:n,tfs:e})=>{var t=e[_i("Left")],i=e[_i("Right")],s=e[_i("Head")],o=e[_i("Base")];let l={Left:{x:[t.rotation.x],y:[t.rotation.y],z:[t.rotation.z],w:[t.rotation.w]},Right:{x:[i.rotation.x],y:[i.rotation.y],z:[i.rotation.z],w:[i.rotation.w]},Head:{x:[s.rotation.x],y:[s.rotation.y],z:[s.rotation.z],w:[s.rotation.w]},Base:{position:{x:[o.position.x],y:[o.position.y],z:[o.position.z]},rotation:{x:[o.rotation.x],y:[o.rotation.y],z:[o.rotation.z],w:[o.rotation.w]}},Time:[0]};const u=(H,U,Q)=>{if(H==="both")d(U,Q,U,Q);else if(Q>0){var ne=H,oe=H==="Left"?"Right":"Left",le={rotation:{x:l[ne].x[l[ne].x.length-1],y:l[ne].y[l[ne].y.length-1],z:l[ne].z[l[ne].z.length-1],w:l[ne].w[l[ne].w.length-1]}},ge=nM(le.rotation),ce=2*td*tM*Math.abs(ge.y-U),pe=ce/(Q/100*T2),Te={x:0,y:U-S2,z:0},Oe=1;if(Te.y<0&&ge.y>0||Te.y>0&&ge.y<0){let ie=(Te.y-ge.y)/2,he=Te.y-ie;var J=H_(0,he*td/180,0);l[ne].w.push(J._w),l[ne].x.push(J._x),l[ne].y.push(J._y),l[ne].z.push(J._z),l.Time.push(pe/2),Oe+=1}var se=H_(Te.x,Te.y*td/180,Te.z);l[ne].w.push(se._w),l[ne].x.push(se._x),l[ne].y.push(se._y),l[ne].z.push(se._z);for(let ie=0;ie<Oe;ie++)l[oe].w.push(l[oe].w[l[oe].w.length-1]),l[oe].x.push(l[oe].x[l[oe].x.length-1]),l[oe].y.push(l[oe].y[l[oe].y.length-1]),l[oe].z.push(l[oe].z[l[oe].z.length-1]),l.Head.x.push(l.Head.x[l.Head.x.length-1]),l.Head.y.push(l.Head.y[l.Head.y.length-1]),l.Head.z.push(l.Head.z[l.Head.z.length-1]),l.Head.w.push(l.Head.w[l.Head.w.length-1]),l.Base.position.x.push(l.Base.position.x[l.Base.position.x.length-1]),l.Base.position.y.push(l.Base.position.y[l.Base.position.y.length-1]),l.Base.position.z.push(l.Base.position.z[l.Base.position.z.length-1]),l.Base.rotation.w.push(l.Base.rotation.w[l.Base.rotation.w.length-1]),l.Base.rotation.x.push(l.Base.rotation.x[l.Base.rotation.x.length-1]),l.Base.rotation.y.push(l.Base.rotation.y[l.Base.rotation.y.length-1]),l.Base.rotation.z.push(l.Base.rotation.z[l.Base.rotation.z.length-1]);Oe>1?l.Time.push(pe/2):l.Time.push(pe)}},d=(H,U,Q,ne)=>{if(U>0||ne>0){var oe={rotation:{x:l.Left.x[l.Left.x.length-1],y:l.Left.y[l.Left.y.length-1],z:l.Left.z[l.Left.z.length-1],w:l.Left.w[l.Left.w.length-1]}},le={rotation:{x:l.Right.x[l.Right.x.length-1],y:l.Right.y[l.Right.y.length-1],z:l.Right.z[l.Right.z.length-1],w:l.Right.w[l.Right.w.length-1]}},ge=nM(oe.rotation),ce=2*td*tM*Math.abs(ge.y-H),pe=ce/(U/100*T2),Te=nM(le.rotation),Oe=2*td*tM*Math.abs(Te.y-Q),J=Oe/(ne/100*T2),se=U===0?J:ne===0?pe:Math.max(pe,J),ie={x:0,y:H-S2,z:0},he=H_(ie.x,ie.y*td/180,ie.z),Se={x:0,y:Q-S2,z:0},Fe=H_(Se.x,Se.y*td/180,Se.z);let De=1;if(ie.y<0&&ge.y>0||ie.y>0&&ge.y<0||Se.y<0&&Te.y>0||Se.y>0&&Te.y<0){let rt=(ie.y-ge.y)/2,tt=(ie.y-ge.y)/2,ft=ie.y-rt,ct=Se.y-tt;var ke=H_(0,ft*td/180,0),qe=H_(0,ct*td/180,0);U>0?(l.Left.w.push(ke._w),l.Left.x.push(ke._x),l.Left.y.push(ke._y),l.Left.z.push(ke._z)):(l.Left.w.push(l.Left.w[l.Left.w.length-1]),l.Left.x.push(l.Left.x[l.Left.x.length-1]),l.Left.y.push(l.Left.y[l.Left.y.length-1]),l.Left.z.push(l.Left.z[l.Left.z.length-1])),ne>0?(l.Right.w.push(qe._w),l.Right.x.push(qe._x),l.Right.y.push(qe._y),l.Right.z.push(qe._z)):(l.Right.w.push(l.Right.w[l.Right.w.length-1]),l.Right.x.push(l.Right.x[l.Right.x.length-1]),l.Right.y.push(l.Right.y[l.Right.y.length-1]),l.Right.z.push(l.Right.z[l.Right.z.length-1])),l.Time.push(se/2),De+=1}U>0?(l.Left.w.push(he._w),l.Left.x.push(he._x),l.Left.y.push(he._y),l.Left.z.push(he._z)):(l.Left.w.push(l.Left.w[l.Left.w.length-1]),l.Left.x.push(l.Left.x[l.Left.x.length-1]),l.Left.y.push(l.Left.y[l.Left.y.length-1]),l.Left.z.push(l.Left.z[l.Left.z.length-1])),ne>0?(l.Right.w.push(Fe._w),l.Right.x.push(Fe._x),l.Right.y.push(Fe._y),l.Right.z.push(Fe._z)):(l.Right.w.push(l.Right.w[l.Right.w.length-1]),l.Right.x.push(l.Right.x[l.Right.x.length-1]),l.Right.y.push(l.Right.y[l.Right.y.length-1]),l.Right.z.push(l.Right.z[l.Right.z.length-1]));for(let rt=0;rt<De;rt++)l.Head.x.push(l.Head.x[l.Head.x.length-1]),l.Head.y.push(l.Head.y[l.Head.y.length-1]),l.Head.z.push(l.Head.z[l.Head.z.length-1]),l.Head.w.push(l.Head.w[l.Head.w.length-1]),l.Base.position.x.push(l.Base.position.x[l.Base.position.x.length-1]),l.Base.position.y.push(l.Base.position.y[l.Base.position.y.length-1]),l.Base.position.z.push(l.Base.position.z[l.Base.position.z.length-1]),l.Base.rotation.w.push(l.Base.rotation.w[l.Base.rotation.w.length-1]),l.Base.rotation.x.push(l.Base.rotation.x[l.Base.rotation.x.length-1]),l.Base.rotation.y.push(l.Base.rotation.y[l.Base.rotation.y.length-1]),l.Base.rotation.z.push(l.Base.rotation.z[l.Base.rotation.z.length-1]);De>1?l.Time.push(se/2):l.Time.push(se)}},p=(H,U,Q,ne)=>{if(ne>0){var oe=H_(U*td/180,H*td/180,Q*td/180);l.Head.w.push(oe._w),l.Head.x.push(oe._x),l.Head.y.push(oe._y),l.Head.z.push(oe._z),l.Left.w.push(l.Left.w[l.Left.w.length-1]),l.Left.x.push(l.Left.x[l.Left.x.length-1]),l.Left.y.push(l.Left.y[l.Left.y.length-1]),l.Left.z.push(l.Left.z[l.Left.z.length-1]),l.Right.w.push(l.Right.w[l.Right.w.length-1]),l.Right.x.push(l.Right.x[l.Right.x.length-1]),l.Right.y.push(l.Right.y[l.Right.y.length-1]),l.Right.z.push(l.Right.z[l.Right.z.length-1]),l.Base.position.x.push(l.Base.position.x[l.Base.position.x.length-1]),l.Base.position.y.push(l.Base.position.y[l.Base.position.y.length-1]),l.Base.position.z.push(l.Base.position.z[l.Base.position.z.length-1]),l.Base.rotation.w.push(l.Base.rotation.w[l.Base.rotation.w.length-1]),l.Base.rotation.x.push(l.Base.rotation.x[l.Base.rotation.x.length-1]),l.Base.rotation.y.push(l.Base.rotation.y[l.Base.rotation.y.length-1]),l.Base.rotation.z.push(l.Base.rotation.z[l.Base.rotation.z.length-1]),l.Time.push(ne)}},_=(H,U,Q)=>{if(Q>0){var ne={position:{x:l.Base.position.x[l.Base.position.x.length-1],y:l.Base.position.y[l.Base.position.y.length-1],z:l.Base.position.z[l.Base.position.z.length-1]},rotation:{x:l.Base.rotation.x[l.Base.rotation.x.length-1],y:l.Base.rotation.y[l.Base.rotation.y.length-1],z:l.Base.rotation.z[l.Base.rotation.z.length-1],w:l.Base.rotation.w[l.Base.rotation.w.length-1]}},oe=U/100*f8*Q/D0,le=H/100*p8*Q/D0,ge=new yl(ne.rotation.x,ne.rotation.y,ne.rotation.z,ne.rotation.w),ce=v8(ge);if(oe!==0){var pe={x:0,y:0,z:oe};ge=H_(pe.x,pe.y,pe.z),ge.multiply(new yl(ne.rotation.x,ne.rotation.y,ne.rotation.z,ne.rotation.w))}let Te=ne.position.x,Oe=ne.position.y,J=null;oe!==0?J=new Dt(Te+Math.cos(ce)*le/oe*Math.cos(le),Oe+Math.sin(ce)*le/oe*Math.sin(le),ne.position.z):J=new Dt(Te+Math.cos(ce)*le,Oe+Math.sin(ce)*le,ne.position.z),l.Base.position.x.push(J.x),l.Base.position.y.push(J.y),l.Base.position.z.push(J.z),l.Base.rotation.w.push(ge._w),l.Base.rotation.x.push(ge._x),l.Base.rotation.y.push(ge._y),l.Base.rotation.z.push(ge._z),l.Head.x.push(l.Head.x[l.Head.x.length-1]),l.Head.y.push(l.Head.y[l.Head.y.length-1]),l.Head.z.push(l.Head.z[l.Head.z.length-1]),l.Head.w.push(l.Head.w[l.Head.w.length-1]),l.Left.w.push(l.Left.w[l.Left.w.length-1]),l.Left.x.push(l.Left.x[l.Left.x.length-1]),l.Left.y.push(l.Left.y[l.Left.y.length-1]),l.Left.z.push(l.Left.z[l.Left.z.length-1]),l.Right.w.push(l.Right.w[l.Right.w.length-1]),l.Right.x.push(l.Right.x[l.Right.x.length-1]),l.Right.y.push(l.Right.y[l.Right.y.length-1]),l.Right.z.push(l.Right.z[l.Right.z.length-1]),l.Time.push(Q)}},y=H=>{let U=l.Head.x.length-1;l.Base.position.x.push(l.Base.position.x[U]),l.Base.position.y.push(l.Base.position.y[U]),l.Base.position.z.push(l.Base.position.z[U]),l.Base.rotation.w.push(l.Base.rotation.w[U]),l.Base.rotation.x.push(l.Base.rotation.x[U]),l.Base.rotation.y.push(l.Base.rotation.y[U]),l.Base.rotation.z.push(l.Base.rotation.z[U]),l.Head.x.push(l.Head.x[U]),l.Head.y.push(l.Head.y[U]),l.Head.z.push(l.Head.z[U]),l.Head.w.push(l.Head.w[U]),l.Left.w.push(l.Left.w[U]),l.Left.x.push(l.Left.x[U]),l.Left.y.push(l.Left.y[U]),l.Left.z.push(l.Left.z[U]),l.Right.w.push(l.Right.w[U]),l.Right.x.push(l.Right.x[U]),l.Right.y.push(l.Right.y[U]),l.Right.z.push(l.Right.z[U]),l.Time.push(H)},b=()=>{let H=JSON.parse(JSON.stringify(e)),U=JSON.parse(JSON.stringify(e)),Q=l.Time.length,ne=0,oe=[],le=[],ge=[],ce=[],pe=[],Te=[],Oe=[],J=[],se=[],ie=[],he=[],Se=[],Fe=[],ke=[],qe=[],De=[],rt=[],tt=[],ft=[],ct=[];for(let vt=1;vt<Q;vt++){let It=l.Time[vt],yt=new yl(l.Left.x[vt],l.Left.y[vt],l.Left.z[vt],l.Left.w[vt]),kt=new yl(l.Right.x[vt],l.Right.y[vt],l.Right.z[vt],l.Right.w[vt]),$t=new yl(l.Head.x[vt],l.Head.y[vt],l.Head.z[vt],l.Head.w[vt]),mt=new yl(l.Base.rotation.x[vt],l.Base.rotation.y[vt],l.Base.rotation.z[vt],l.Base.rotation.w[vt]),xe=new Dt(l.Base.position.x[vt],l.Base.position.y[vt],l.Base.position.z[vt]);for(let re=10;re<Nb;re+=10){oe.push(It/D0*re+ne);let Be=new yl(l.Left.x[vt-1],l.Left.y[vt-1],l.Left.z[vt-1],l.Left.w[vt-1]),dt=new yl(l.Right.x[vt-1],l.Right.y[vt-1],l.Right.z[vt-1],l.Right.w[vt-1]),bt=new yl(l.Head.x[vt-1],l.Head.y[vt-1],l.Head.z[vt-1],l.Head.w[vt-1]),Mt=new yl(l.Base.rotation.x[vt-1],l.Base.rotation.y[vt-1],l.Base.rotation.z[vt-1],l.Base.rotation.w[vt-1]),pt=new Dt(l.Base.position.x[vt-1],l.Base.position.y[vt-1],l.Base.position.z[vt-1]);Be.slerp(yt,re/Nb),dt.slerp(kt,re/Nb),bt.slerp($t,re/Nb),Mt.slerp(mt,re/Nb),pt.lerp(xe,re/Nb),le.push(Be._w),ge.push(Be._x),ce.push(Be._y),pe.push(Be._z),Te.push(dt._w),Oe.push(dt._x),J.push(dt._y),se.push(dt._z),ie.push(bt._w),he.push(bt._x),Se.push(bt._y),Fe.push(bt._z),ke.push(pt.x),qe.push(pt.y),De.push(pt.z),rt.push(Mt._w),tt.push(Mt._x),ft.push(Mt._y),ct.push(Mt._z)}ne+=It}let Pe=new yl(l.Left.x[Q-1],l.Left.y[Q-1],l.Left.z[Q-1],l.Left.w[Q-1]),Ce=new yl(l.Right.x[Q-1],l.Right.y[Q-1],l.Right.z[Q-1],l.Right.w[Q-1]),je=new yl(l.Head.x[Q-1],l.Head.y[Q-1],l.Head.z[Q-1],l.Head.w[Q-1]),it=new yl(l.Base.rotation.x[Q-1],l.Base.rotation.y[Q-1],l.Base.rotation.z[Q-1],l.Base.rotation.w[Q-1]),ot=new Dt(l.Base.position.x[Q-1],l.Base.position.y[Q-1],l.Base.position.z[Q-1]);return oe.push(1/0),le.push(Pe._w),ge.push(Pe._x),ce.push(Pe._y),pe.push(Pe._z),Te.push(Ce._w),Oe.push(Ce._x),J.push(Ce._y),se.push(Ce._z),ie.push(je._w),he.push(je._x),Se.push(je._y),Fe.push(je._z),ke.push(ot.x),qe.push(ot.y),De.push(ot.z),rt.push(it._w),tt.push(it._x),ft.push(it._y),ct.push(it._z),H[_i("Left")].rotation.w=zl(oe,le),H[_i("Left")].rotation.x=zl(oe,ge),H[_i("Left")].rotation.y=zl(oe,ce),H[_i("Left")].rotation.z=zl(oe,pe),U[_i("Left")].rotation.w=Pe._w,U[_i("Left")].rotation.x=Pe._x,U[_i("Left")].rotation.y=Pe._y,U[_i("Left")].rotation.z=Pe._z,H[_i("Right")].rotation.w=zl(oe,Te),H[_i("Right")].rotation.x=zl(oe,Oe),H[_i("Right")].rotation.y=zl(oe,J),H[_i("Right")].rotation.z=zl(oe,se),U[_i("Right")].rotation.w=Ce._w,U[_i("Right")].rotation.x=Ce._x,U[_i("Right")].rotation.y=Ce._y,U[_i("Right")].rotation.z=Ce._z,H[_i("Head")].rotation.w=zl(oe,ie),H[_i("Head")].rotation.x=zl(oe,he),H[_i("Head")].rotation.y=zl(oe,Se),H[_i("Head")].rotation.z=zl(oe,Fe),U[_i("Head")].rotation.w=je._w,U[_i("Head")].rotation.x=je._x,U[_i("Head")].rotation.y=je._y,U[_i("Head")].rotation.z=je._z,H[_i("Base")].rotation.w=zl(oe,rt),H[_i("Base")].rotation.x=zl(oe,tt),H[_i("Base")].rotation.y=zl(oe,ft),H[_i("Base")].rotation.z=zl(oe,ct),H[_i("Base")].position.x=zl(oe,ke),H[_i("Base")].position.y=zl(oe,qe),H[_i("Base")].position.z=zl(oe,De),U[_i("Base")].rotation.w=it._w,U[_i("Base")].rotation.x=it._x,U[_i("Base")].rotation.y=it._y,U[_i("Base")].rotation.z=it._z,U[_i("Base")].position.x=ot.x,U[_i("Base")].position.y=ot.y,U[_i("Base")].position.z=ot.z,{newTfs:H,newEndingTfs:U}},E=H=>Object.values(n).filter(U=>U.type===H)[0],C=H=>n[H],A=(H,U)=>{const Q=C(H);let ne=C(U);if(N(Q,Q.type))for(N(ne,ne.type);ne.next;)ne=C(ne.next),N(ne,ne.type)},I=H=>H==="TRUE";function L(H,U){return H=Math.ceil(H),U=Math.floor(U),Math.floor(Math.random()*(U-H+1))+H}function O(H){if(H===2||H===3)return!0;if(H<=1||H%2===0||H%3===0)return!1;for(let U=5;U*U<=H;U+=6)if(H%U===0||H%(U+2)===0)return!1;return!0}function P(H){var U;if(typeof H!="string"&&typeof H!="object")return H.shadow.fields.NUM;{let Q=(U=H==null?void 0:H.shadow)!=null&&U.id?C(H.shadow.id):C(H);return N(Q,Q.type)}}const N=(H,U)=>{var it,ot,vt;switch(!0){case U==="controls_if":if(!H.inputs||!H.inputs.IF0||!H.inputs.DO0)throw new Error("err: controls_if not complete!");A(H.inputs.IF0,H.inputs.DO0);break;case U==="logic_boolean":return I(H.fields.BOOL);case U==="logic_compare":if(!H.inputs||!H.inputs.A||!H.inputs.B)throw new Error("err: logic_compare is not complete!");const It=H.fields.OP,yt=H.inputs.A,kt=H.inputs.B,$t=C(yt),mt=C(kt);if(It==="EQ")return N($t,$t.type)==N(mt,mt.type);if(It==="NEQ")return N($t,$t.type)!==N(mt,mt.type);if(It==="LT")return N($t,$t.type)<N(mt,mt.type);if(It==="LTE")return N($t,$t.type)<=N(mt,mt.type);if(It==="GT")return N($t,$t.type)>N(mt,mt.type);if(It==="GTE")return N($t,$t.type)>=N(mt,mt.type);case U==="logic_operation":if(!H.inputs||!H.inputs.A||!H.inputs.B)throw new Error("err: logic_operation is not complete!");const xe=H.fields.OP,re=H.inputs.A,Be=H.inputs.B,dt=C(re),bt=C(Be);return xe==="OR"?N(dt,dt.type)||N(bt,bt.type):N(dt,dt.type)&&N(bt,bt.type);case U==="logic_negate":if(!H.inputs)throw new Error("err: logic_negate is not complete!");const Mt=C(H.inputs.BOOL);return!N(Mt,Mt.type);case U==="logic_boolean":return!H.fields.BOOL!=="FALSE";case U==="logic_null":return null;case U==="logic_ternary":if(!H.inputs||!H.inputs.IF||!H.inputs.THEN||!H.inputs.ELSE)throw new Error("err: logic_ternary is not complete!");const pt=H.inputs.IF,Ke=H.inputs.THEN,Ie=H.inputs.ELSE,q=C(pt),ee=C(Ke),de=C(Ie);return N(q,q.type)?N(ee,ee.type):N(de,de.type);case U==="controls_repeat_ext":const Je=P(H.inputs.TIMES);if(!H.inputs.DO)throw new Error("err: controls_repeat_ext is not complete!");let jt=C(H.inputs.DO);for(let zt=0;zt<Je;zt++){N(jt,jt.type);let On=jt;for(;On.next;)On=C(On.next),N(On,On.type)}return;case U==="math_number":return H.fields.NUM;case U=="BasicSlider":case U=="ArmPositionSlider":case U=="SpeedSlider":case U=="TimeSlider":case U=="HeadPitchSlider":case U=="HeadRollSlider":case U=="HeadYawSlider":return H.fields.FIELD_slider_value;case U==="math_number_property":const ze=H.fields.PROPERTY,Yt=P(H.inputs.NUMBER_TO_CHECK);if(ze==="EVEN")return Yt%2===0;if(ze==="ODD")return Yt%2===1;if(ze==="PRIME")return O(Yt);if(ze==="WHOLE")return Yt%1===0;if(ze==="POSITIVE")return Yt>0;if(ze==="NEGATIVE")return Yt<0;if(ze==="DIVISIBLE_BY"){if(!H.inputs||!H.inputs.DIVISOR)throw new Error("err: DIVISOR is not filled!");if(H.inputs.DIVISOR===0)throw new Error("Note that divisor cannot be 0!");return Yt%H.inputs.DIVISOR===0}return;case U==="math_random_int":const _t=P(H.inputs.FROM),Kt=P(H.inputs.TO);return L(_t,Kt);case U==="colour_picker":return DT(H.fields.COLOUR);case U==="colour_random":let Xt=L(0,255),Dn=L(0,255),ii=L(0,255);return{r:Xt,g:Dn,b:ii};case U==="colour_rgb":const Lr=P(H.inputs.RED),Si=P(H.inputs.GREEN),Er=P(H.inputs.BLUE);return{r:Lr,g:Si,b:Er};case U==="colour_blend":const ir=P(H.inputs.RATIO),te=DT(H.inputs.COLOUR1.shadow.fields.COLOUR),be=DT(H.inputs.COLOUR2.shadow.fields.COLOUR),He=te.r*ir,at=te.g*ir,Ft=te.b*ir,rn=be.r,Rn=be.g,Le=be.b,gt=(rn+He)/(ir+1),Ct=(Rn+at)/(ir+1),Tt=(Le+Ft)/(ir+1);return{r:gt,g:Ct,b:Tt};case U==="ChangeLED":if(!H.inputs||!H.inputs.FIELD_ChangeLED)throw new Error("err: ChangeLED is not complete!");var Q=C(H.inputs.FIELD_ChangeLED),ne=null;(it=Q==null?void 0:Q.fields)!=null&&it.COLOUR?ne=DT(Q.fields.COLOUR):ne=N(Q,Q.type);var J={Red:ne.r,Green:ne.g,Blue:ne.b};return;case U==="TransitionLED":if(!H.inputs||!H.inputs.COLOR1||!H.inputs.COLOR2)throw new Error("err: TransitionLED is not complete!");var oe=C(H.inputs.COLOR1),le=C(H.inputs.COLOR2),ge=null;(ot=oe==null?void 0:oe.fields)!=null&&ot.COLOUR?ge=DT(oe.fields.COLOUR):ge=N(oe,oe.type);var ce=null;(vt=le==null?void 0:le.fields)!=null&&vt.COLOUR?ce=DT(le.fields.COLOUR):ce=N(le,le.type);var Pe=H.fields.FIELD_TransitionTime_TimeMs*D0,pe=H.fields.TRANSITION_TYPE,J={Red:ge.r,Green:ge.g,Blue:ge.b,Red2:ce.r,Green2:ce.g,Blue2:ce.b,TransitionType:pe,TimeMS:Pe};return;case U==="DisplayImage":if(!H.inputs||!H.inputs.FIELD_DisplayImage_Filename)throw new Error("err: DisplayImage is not complete!");var Te=C(H.inputs.FIELD_DisplayImage_Filename),Oe=aAe(Te.type);return;case U==="PlayAudio":if(!H.inputs||!H.inputs.FIELD_PlayAudio_Filename)throw new Error("err: PlayAudio is not complete!");var Te=C(H.inputs.FIELD_PlayAudio_Filename),Oe=kG(Te.type);return;case U==="DisplayAnimation":if(!H.inputs||!H.inputs.FIELD_DisplayAnimation_Filename)throw new Error("err: DisplayAnimation is not complete!");var Te=C(H.inputs.FIELD_DisplayAnimation_Filename),Oe=kG(Te.type),J={FileName:Oe};readFile(J);return;case U==="DisplayText":H.fields.FIELD_DisplayText_Text;return;case U==="TurnOnFlashlight":return;case U==="TurnOffFlashlight":return;case U==="WaitForSeconds":var Pe=parseFloat(H.fields.NumSeconds)*D0;y(Pe);return;case U==="MoveArm":var se=H.fields.FIELD_MoveArm_Arm==="Right"?"Right":"Left",ie=P(H.fields.FIELD_MoveArm_Position),tt=P(H.fields.FIELD_MoveArm_Velocity);u(se,ie,tt);return;case U==="MoveArm2":var ie=P(H.fields.FIELD_MoveArm2_Position),tt=P(H.fields.FIELD_MoveArm2_Velocity),se="both";u(se,ie,tt);return;case U==="MoveArm3":var se=H.fields.FIELD_MoveArm_Arm==="Right"?"Right":"Left",ie=P(H.fields.FIELD_MoveArm_Position),tt=P(H.fields.FIELD_MoveArm_Velocity);u(se,ie,tt);return;case U==="MoveArms2":var he=P(H.inputs.FIELD_MoveArm_LeftPosition),Se=P(H.inputs.FIELD_MoveArm_LeftVelocity),Fe=P(H.inputs.FIELD_MoveArm_RightPosition),ke=P(H.inputs.FIELD_MoveArm_RightVelocity);d(he,Se,Fe,ke);return;case U==="MoveHead":var qe=H.fields.FIELD_MoveHead_Pitch==="D"?25:-40,Pe=2e3;p(qe,0,0,Pe);return;case U==="MoveHead3":var qe,De,rt;qe=P(H.inputs.FIELD_MoveHead_Pitch),De=P(H.inputs.FIELD_MoveHead_Roll),rt=P(H.inputs.FIELD_MoveHead_Yaw),Pe=P(H.inputs.FIELD_MoveHead_Time)*D0,p(qe,De,rt,Pe);return;case U==="DriveTime":var ct=H.fields.FIELD_DriveTime_Direction,tt=parseInt(H.fields.FIELD_DriveTime_Velocity),Pe=parseInt(H.fields.FIELD_DriveTime_TimeMs)*D0,ft=ct==="F"?tt:-tt;_(ft,0,Pe);return;case U==="DriveTime2":var ft=P(H.inputs.FIELD_DriveTime_Velocity),Ce=P(H.inputs.FIELD_DriveTime_Angular),Pe=P(H.inputs.FIELD_DriveTime_TimeMs)*D0;_(ft,Ce,Pe);return;case U==="Turn":var ct=H.fields.FIELD_Turn_Direction,Pe=parseInt(H.fields.FIELD_Turn_Duration)*D0,Ce=ct==="L"?100:-100;_(0,Ce,Pe);return;case U==="Turn2":var ct=H.fields.FIELD_Turn_Direction,Pe=parseInt(P(H.inputs.FIELD_Turn_Duration))*D0,Ce=ct==="L"?100:-100;_(0,Ce,Pe);return;case U=="Speak":var je=C(H.inputs.FIELD_Speak_Text);je.fields.TEXT;return;case U=="SpeakDefault":H.fields.FIELD_SpeakDefault_Text;return;default:return}};let W=E("Start");for(;W&&W.next;)W=C(W.next),N(W,W.type);return b()};function uAe(n){const e=fr(Zs(N=>N.resetSim)),t=fr(Zs(N=>N.toggleSimOnly)),i=fr(Zs(N=>N.isConnected)),s=fr(Zs(N=>N.ip)),o=fr(Zs(N=>N.getBlocks)),l=fr(Zs(N=>N.clock)),u=fr(Zs(N=>N.mistyImageList)),d=fr(Zs(N=>N.mistyAudioList)),p=fr(Zs(N=>N.simOnly)),_=fr(Zs(N=>N.endingTfs)),y=fr(Zs(N=>N.setAnimationFrames)),b=fr(Zs(N=>N.workerThread)),E=fr(Zs(N=>N.setWorkerThread)),C=fr(Zs(N=>N.llmMode));function A(N,z){s&&!p&&i&&fetch(`http://${s}/api/${N}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})}const I=async()=>{l.reset_elapsed(),b&&(b.terminate(),E(null));const N=`import ${JSON.stringify(new URL(iAe,import.meta.url))}`,z=new Blob([N],{type:"application/javascript"}),W=URL.createObjectURL(z);let H=new Worker(W,{type:"module"});H.onmessage=function(ne){console.log("Message received from worker "+ne.data),E(null)},H.onerror=function(ne){console.log(ne),URL.revokeObjectURL(W)},H.postMessage({blocks:o(),mistyAudioList:d,mistyImageList:u,tfs:_,ip:s,runOnRobot:!p}),E(H);let{newTfs:U,newEndingTfs:Q}=lAe({blocks:o(),tfs:_});y(U,Q),sh("Click Run Code button")},L=()=>{b&&(b.terminate(),E(null),A("halt",{})),sh("Click Stop Code button")},O=()=>{A("arms/set",{LeftArmPosition:90,RightArmPosition:90,LeftArmVelocity:100,RightArmVelocity:100,Units:"Degrees"}),A("head",{Pitch:0,Yaw:0,Roll:0,Duration:1,Units:"Degrees"}),A("images/display",{FileName:"e_DefaultContent.jpg",Alpha:1}),A("text/display",{Text:""}),A("led",{Red:100,Green:70,Blue:160}),e()};let P=C?{top:"10px"}:{bottom:"0px"};return Ve.jsxs(Kw,{style:{position:"absolute",padding:"0px",left:"10px",...P},children:[Ve.jsxs(t4,{style:{paddingLeft:"0px",paddingRight:"0px"},children:[!b&&Ve.jsx(cM,{variant:"contained","aria-label":"play",style:{backgroundColor:"#FAFAFA",marginBottom:"5px"},onClick:I,id:"runButton",children:Ve.jsx(AY,{})}),b&&Ve.jsx(cM,{variant:"contained","aria-label":"play",style:{backgroundColor:"#FAFAFA",marginBottom:"5px"},onClick:L,id:"stopButton",children:Ve.jsx(MY,{})}),Ve.jsx(cM,{variant:"contained","aria-label":"restart",style:{backgroundColor:"#FAFAFA",marginLeft:"5px",marginBottom:"5px"},onClick:O,children:Ve.jsx(CY,{})})]}),i&&Ve.jsx(t4,{style:{backgroundColor:"#FAFAFA",borderRadius:"5px",marginBottom:"5px",paddingLeft:"10px",paddingRight:"0px"},children:Ve.jsx(R9,{children:Ve.jsx(I9,{control:Ve.jsx(Pce,{onChange:N=>t(N.target.checked)}),label:"Sim only"})})})]})}function OG(n){const e={displayTfs:!1,displayGrid:!0,isPolar:!1,backgroundColor:"#3a3a3a",planeColor:"#3a3a3a",highlightColor:"#ffffff",plane:0,fov:60,ar:!1,vr:!1};return Ve.jsxs(sy,{height:"100%",children:[Ve.jsx(YCe,{style:{overflow:"hidden"},store:fr,meshLookup:kge,...e}),Ve.jsx(uAe,{})]})}var IY={exports:{}};(function(n,e){(function(t,i){i()})(Wl,function(){function t(p,_){return typeof _>"u"?_={autoBom:!1}:typeof _!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),_={autoBom:!_}),_.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(p.type)?new Blob(["\uFEFF",p],{type:p.type}):p}function i(p,_,y){var b=new XMLHttpRequest;b.open("GET",p),b.responseType="blob",b.onload=function(){d(b.response,_,y)},b.onerror=function(){console.error("could not download file")},b.send()}function s(p){var _=new XMLHttpRequest;_.open("HEAD",p,!1);try{_.send()}catch{}return 200<=_.status&&299>=_.status}function o(p){try{p.dispatchEvent(new MouseEvent("click"))}catch{var _=document.createEvent("MouseEvents");_.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),p.dispatchEvent(_)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Wl=="object"&&Wl.global===Wl?Wl:void 0,u=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(p,_,y){var b=l.URL||l.webkitURL,E=document.createElement("a");_=_||p.name||"download",E.download=_,E.rel="noopener",typeof p=="string"?(E.href=p,E.origin===location.origin?o(E):s(E.href)?i(p,_,y):o(E,E.target="_blank")):(E.href=b.createObjectURL(p),setTimeout(function(){b.revokeObjectURL(E.href)},4e4),setTimeout(function(){o(E)},0))}:"msSaveOrOpenBlob"in navigator?function(p,_,y){if(_=_||p.name||"download",typeof p!="string")navigator.msSaveOrOpenBlob(t(p,y),_);else if(s(p))i(p,_,y);else{var b=document.createElement("a");b.href=p,b.target="_blank",setTimeout(function(){o(b)})}}:function(p,_,y,b){if(b=b||open("","_blank"),b&&(b.document.title=b.document.body.innerText="downloading..."),typeof p=="string")return i(p,_,y);var E=p.type==="application/octet-stream",C=/constructor/i.test(l.HTMLElement)||l.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent);if((A||E&&C||u)&&typeof FileReader<"u"){var I=new FileReader;I.onloadend=function(){var P=I.result;P=A?P:P.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=P:location=P,b=null},I.readAsDataURL(p)}else{var L=l.URL||l.webkitURL,O=L.createObjectURL(p);b?b.location=O:location.href=O,b=null,setTimeout(function(){L.revokeObjectURL(O)},4e4)}});l.saveAs=d.saveAs=d,n.exports=d})})(IY);var cAe=IY.exports;const hAe=k1(cAe);function zA({title:n,children:e,style:t}){return Ve.jsx(sy,{style:{padding:"5px",paddingTop:"20px",...t},children:Ve.jsxs(sy,{style:{backgroundColor:"#E4E5F1",border:"3px #9394A5 solid",padding:"5px",borderRadius:"6px"},children:[Ve.jsx(sy,{style:{position:"relative",display:"float",top:"-18px",left:"10px"},children:Ve.jsx(sy,{children:Ve.jsx(eE,{display:"inline",style:{filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",backgroundColor:"#E4E5F1",padding:"3px",border:"3px #9394A5 solid",borderRadius:"6px"},children:n})})}),Ve.jsx(Kw,{children:me.Children.map(e,i=>Ve.jsx("div",{style:{padding:"3px",margin:"3px"},children:i}))})]})})}function LG({label:n,buttonText:e,clickFunction:t,style:i}){return Ve.jsxs(Qp,{container:!0,direction:"row",alignItems:"center",style:{...i},children:[Ve.jsx(eE,{display:"inline",style:{paddingRight:"10px",flex:"1"},children:n}),Ve.jsx(c1,{text:e,clickFunction:t})]})}function tL({label:n,onChangeFunction:e,fieldType:t,textFieldInput:i,style:s}){return Ve.jsxs(Qp,{container:!0,direction:"row",alignItems:"center",style:{...s},children:[Ve.jsx(eE,{display:"inline",style:{paddingRight:"10px",flex:"1"},children:n}),Ve.jsx(_P,{value:i,type:t,onChange:e})]})}const dAe=()=>{const n=fr(E=>E.closeModal),e=fr(E=>E.setEndpoint),t=fr(E=>E.setAPIKey),i=fr(E=>E.setDeployment),s=fr(Zs(E=>E.llmDeployment)),o=fr(Zs(E=>E.llmAPIKey)),l=fr(Zs(E=>E.llmEndpoint)),u=fr(E=>E.blocklyWorkspace),d=fr(E=>E.toggleLLMBlockPrompt),p=fr(Zs(E=>E.displayLLMBlockPrompt)),_=()=>{var E=new Blob([activityLog],{type:"text/plain;charset=utf-8"});hAe.saveAs(E,"activity log.txt")},y=()=>{const E=lg.Xml.domToPrettyText(lg.Xml.workspaceToDom(u)),C=new Blob([E],{type:"text/xml"}),A=URL.createObjectURL(C),I=document.createElement("a");I.href=A,I.download="myBlocks.xml",I.click()},b=E=>{const C=new FileReader;C.onload=function(){const A=C.result;if(u)try{const L=new DOMParser().parseFromString(A,"text/xml");lg.Xml.domToWorkspace(L.firstChild,u)}catch(I){console.error("Error parsing XML:",I)}else console.error("Blockly workspace not initialized")},C.readAsText(E.target.files[0])};return Ve.jsxs(sy,{sx:{backgroundColor:"#585D92",padding:"5px",margin:"0",borderRadius:"10px",maxHeight:"70vh",overflowY:"scroll"},children:[Ve.jsxs(zA,{title:"LLM Settings",children:[Ve.jsx(tL,{onChangeFunction:E=>e(E.target.value),label:"Server Endpoint",fieldType:"password",textFieldInput:l}),Ve.jsx(tL,{onChangeFunction:E=>t(E.target.value),label:"API Key",fieldType:"password",textFieldInput:o}),Ve.jsx(tL,{onChangeFunction:E=>i(E.target.value),label:"Deployment Model",fieldType:"password",textFieldInput:s})]}),Ve.jsxs(zA,{title:"Downloads",children:[Ve.jsx(LG,{clickFunction:_,label:"Download Activity Log",buttonText:"Download"}),Ve.jsx(LG,{clickFunction:y,label:"Download Workspace XML",buttonText:"Download"})]}),Ve.jsx(zA,{title:"Upload",children:Ve.jsx(fP,{type:"file",onChange:b,accept:".xml"})}),Ve.jsx(zA,{title:"Toggles",children:Ve.jsx(R9,{style:{justifyContent:"left"},children:Ve.jsx(I9,{style:{justifyContent:"left"},control:Ve.jsx(Ype,{defaultChecked:p,onChange:E=>d(E.target.checked)}),label:"Enable LLM Block Prompt",labelPlacement:"start"})})}),Ve.jsx(c1,{clickFunction:n,text:"Close",style:{float:"right"}})]})},pAe=()=>{const n=fr(t=>t.setActiveModal),e=fr(t=>t.activeModal);return Ve.jsx($9,{open:e===m8,onClose:(t,i)=>{i==="backdropClick"&&n("")},children:e&&Ve.jsx(dAe,{})})};function fAe({leftChildren:n,rightChildren:e}){return Ve.jsxs(Qp,{container:!0,direction:"row",justifyContent:"center",spacing:2,style:{padding:"20px",height:"100%",width:"100%"},children:[Ve.jsx(Qp,{item:!0,xs:6,children:n}),Ve.jsx(Qp,{item:!0,xs:1,children:Ve.jsx(_he,{orientation:"vertical",style:{height:"100%",width:"1px"}})}),Ve.jsx(Qp,{item:!0,xs:5,children:e})]})}function RY({style:n,maxVH:e=0}){const t=fr(Zs(E=>E.userPrompt)),i=fr(E=>E.setUserPrompt),s=fr(E=>E.generateProgramOutline),o=fr(E=>E.generateProgram),l=fr(Zs(E=>E.llmProcessing)),u=fr(Zs(E=>E.displayLLMBlockPrompt)),{height:d,_:p}=G9();function _(E){var C=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return E*C/100}let y=e>0?_(e)/23:(d-190)/23;const b=E=>{i(E.target.value)};return Ve.jsxs("div",{style:{...n},children:[Ve.jsx(_P,{label:"What do you want the robot to do?",multiline:!0,disabled:l,fullWidth:!0,minRows:y,maxRows:y,onChange:b,value:t}),Ve.jsx(c1,{text:"Generate Program Goals",clickFunction:s,disabled:l,style:{float:"right"}}),u&&Ve.jsx(c1,{text:"Generate Block Program",clickFunction:o,disabled:l,style:{float:"right"}})]})}function mAe(n){const e=fr(Zs(t=>t.llmProcessing));return Ve.jsxs("div",{children:[Ve.jsx(LR,{style:{color:"#fff",zIndex:103},open:e,children:Ve.jsx(x9,{color:"inherit"})}),Ve.jsx(fAe,{leftChildren:Ve.jsx(RY,{}),rightChildren:Ve.jsx("p",{children:"Test2"})})]})}const gAe=()=>Ve.jsx(sy,{sx:{backgroundColor:"#585D92",padding:"15px",margin:"0",borderRadius:"10px",maxHeight:"70vh",overflowY:"scroll"},children:Ve.jsx(RY,{style:{backgroundColor:"#FAFAFA",borderRadius:"5px"},maxVH:50})}),_Ae=()=>{const n=fr(t=>t.setActiveModal),e=fr(t=>t.activeModal);return Ve.jsx($9,{open:e===g8,onClose:(t,i)=>{i==="backdropClick"&&n("")},children:e&&Ve.jsx(gAe,{})})},nL=or("div")(({theme:n})=>({textAlign:"center",height:"100%"}));lg.common.defineBlocks(bZ);Object.assign(KS.javascriptGenerator.forBlock,UI);function vAe(){const n=fr(Zs(i=>i.llmMode)),e=fr(Zs(i=>i.llmProcessing)),t=fr(Zs(i=>i.headerHeight));return Ve.jsxs(sy,{width:"100vw",height:`calc(100vh - ${t}px)`,padding:0,children:[Ve.jsx(ufe,{}),Ve.jsxs(aI,{orientation:"vertical",style:{height:"100%",width:"100vw"},children:[Ve.jsx(PC,{flex:.55,children:Ve.jsxs(nL,{style:{width:"100%",height:"100%"},children:[!n&&Ve.jsx(f4,{}),n&&Ve.jsx(mAe,{})]})}),Ve.jsx(bm,{propagate:!0}),Ve.jsx(PC,{flex:.45,children:Ve.jsxs(aI,{orientation:"horizontal",children:[Ve.jsx(PC,{children:Ve.jsxs(nL,{children:[!n&&Ve.jsx(OG,{}),n&&Ve.jsx(f4,{})]})}),Ve.jsx(bm,{propagate:!0}),Ve.jsx(PC,{children:Ve.jsxs(nL,{children:[!n&&Ve.jsx(gfe,{}),n&&Ve.jsx(OG,{})]})})]})})]}),Ve.jsx(LR,{style:{color:"#fff",zIndex:1500},open:e,children:Ve.jsx(x9,{color:"inherit"})}),Ve.jsx(pAe,{}),Ve.jsx(_Ae,{})]})}iL.createRoot(document.getElementById("root")).render(Ve.jsx(Vr.StrictMode,{children:Ve.jsx(vAe,{})}));
