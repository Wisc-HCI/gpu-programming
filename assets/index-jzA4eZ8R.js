function q7(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in r)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var Ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function U1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function qg(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),t}var HG={exports:{}},OA={},GG={exports:{}},Hi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw=Symbol.for("react.element"),Z7=Symbol.for("react.portal"),eX=Symbol.for("react.fragment"),tX=Symbol.for("react.strict_mode"),nX=Symbol.for("react.profiler"),rX=Symbol.for("react.provider"),iX=Symbol.for("react.context"),sX=Symbol.for("react.forward_ref"),oX=Symbol.for("react.suspense"),aX=Symbol.for("react.memo"),lX=Symbol.for("react.lazy"),sF=Symbol.iterator;function uX(r){return r===null||typeof r!="object"?null:(r=sF&&r[sF]||r["@@iterator"],typeof r=="function"?r:null)}var WG={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VG=Object.assign,jG={};function z1(r,e,t){this.props=r,this.context=e,this.refs=jG,this.updater=t||WG}z1.prototype.isReactComponent={};z1.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};z1.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function XG(){}XG.prototype=z1.prototype;function H2(r,e,t){this.props=r,this.context=e,this.refs=jG,this.updater=t||WG}var G2=H2.prototype=new XG;G2.constructor=H2;VG(G2,z1.prototype);G2.isPureReactComponent=!0;var oF=Array.isArray,YG=Object.prototype.hasOwnProperty,W2={current:null},KG={key:!0,ref:!0,__self:!0,__source:!0};function JG(r,e,t){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)YG.call(e,i)&&!KG.hasOwnProperty(i)&&(s[i]=e[i]);var u=arguments.length-2;if(u===1)s.children=t;else if(1<u){for(var h=Array(u),p=0;p<u;p++)h[p]=arguments[p+2];s.children=h}if(r&&r.defaultProps)for(i in u=r.defaultProps,u)s[i]===void 0&&(s[i]=u[i]);return{$$typeof:iw,type:r,key:o,ref:l,props:s,_owner:W2.current}}function cX(r,e){return{$$typeof:iw,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function V2(r){return typeof r=="object"&&r!==null&&r.$$typeof===iw}function hX(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var aF=/\/+/g;function IR(r,e){return typeof r=="object"&&r!==null&&r.key!=null?hX(""+r.key):e.toString(36)}function nM(r,e,t,i,s){var o=typeof r;(o==="undefined"||o==="boolean")&&(r=null);var l=!1;if(r===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(r.$$typeof){case iw:case Z7:l=!0}}if(l)return l=r,s=s(l),r=i===""?"."+IR(l,0):i,oF(s)?(t="",r!=null&&(t=r.replace(aF,"$&/")+"/"),nM(s,e,t,"",function(p){return p})):s!=null&&(V2(s)&&(s=cX(s,t+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(aF,"$&/")+"/")+r)),e.push(s)),1;if(l=0,i=i===""?".":i+":",oF(r))for(var u=0;u<r.length;u++){o=r[u];var h=i+IR(o,u);l+=nM(o,e,t,h,s)}else if(h=uX(r),typeof h=="function")for(r=h.call(r),u=0;!(o=r.next()).done;)o=o.value,h=i+IR(o,u++),l+=nM(o,e,t,h,s);else if(o==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function sx(r,e,t){if(r==null)return r;var i=[],s=0;return nM(r,i,"","",function(o){return e.call(t,o,s++)}),i}function dX(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var rp={current:null},rM={transition:null},pX={ReactCurrentDispatcher:rp,ReactCurrentBatchConfig:rM,ReactCurrentOwner:W2};Hi.Children={map:sx,forEach:function(r,e,t){sx(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return sx(r,function(){e++}),e},toArray:function(r){return sx(r,function(e){return e})||[]},only:function(r){if(!V2(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};Hi.Component=z1;Hi.Fragment=eX;Hi.Profiler=nX;Hi.PureComponent=H2;Hi.StrictMode=tX;Hi.Suspense=oX;Hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pX;Hi.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var i=VG({},r.props),s=r.key,o=r.ref,l=r._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=W2.current),e.key!==void 0&&(s=""+e.key),r.type&&r.type.defaultProps)var u=r.type.defaultProps;for(h in e)YG.call(e,h)&&!KG.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=t;else if(1<h){u=Array(h);for(var p=0;p<h;p++)u[p]=arguments[p+2];i.children=u}return{$$typeof:iw,type:r.type,key:s,ref:o,props:i,_owner:l}};Hi.createContext=function(r){return r={$$typeof:iX,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:rX,_context:r},r.Consumer=r};Hi.createElement=JG;Hi.createFactory=function(r){var e=JG.bind(null,r);return e.type=r,e};Hi.createRef=function(){return{current:null}};Hi.forwardRef=function(r){return{$$typeof:sX,render:r}};Hi.isValidElement=V2;Hi.lazy=function(r){return{$$typeof:lX,_payload:{_status:-1,_result:r},_init:dX}};Hi.memo=function(r,e){return{$$typeof:aX,type:r,compare:e===void 0?null:e}};Hi.startTransition=function(r){var e=rM.transition;rM.transition={};try{r()}finally{rM.transition=e}};Hi.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Hi.useCallback=function(r,e){return rp.current.useCallback(r,e)};Hi.useContext=function(r){return rp.current.useContext(r)};Hi.useDebugValue=function(){};Hi.useDeferredValue=function(r){return rp.current.useDeferredValue(r)};Hi.useEffect=function(r,e){return rp.current.useEffect(r,e)};Hi.useId=function(){return rp.current.useId()};Hi.useImperativeHandle=function(r,e,t){return rp.current.useImperativeHandle(r,e,t)};Hi.useInsertionEffect=function(r,e){return rp.current.useInsertionEffect(r,e)};Hi.useLayoutEffect=function(r,e){return rp.current.useLayoutEffect(r,e)};Hi.useMemo=function(r,e){return rp.current.useMemo(r,e)};Hi.useReducer=function(r,e,t){return rp.current.useReducer(r,e,t)};Hi.useRef=function(r){return rp.current.useRef(r)};Hi.useState=function(r){return rp.current.useState(r)};Hi.useSyncExternalStore=function(r,e,t){return rp.current.useSyncExternalStore(r,e,t)};Hi.useTransition=function(){return rp.current.useTransition()};Hi.version="18.2.0";GG.exports=Hi;var de=GG.exports;const vr=U1(de),TL=q7({__proto__:null,default:vr},[de]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fX=de,mX=Symbol.for("react.element"),gX=Symbol.for("react.fragment"),_X=Object.prototype.hasOwnProperty,vX=fX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yX={key:!0,ref:!0,__self:!0,__source:!0};function QG(r,e,t){var i,s={},o=null,l=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)_X.call(e,i)&&!yX.hasOwnProperty(i)&&(s[i]=e[i]);if(r&&r.defaultProps)for(i in e=r.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:mX,type:r,key:o,ref:l,props:s,_owner:vX.current}}OA.Fragment=gX;OA.jsx=QG;OA.jsxs=QG;HG.exports=OA;var Ft=HG.exports,EL={},qG={exports:{}},Sf={},ZG={exports:{}},e5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(j,te){var q=j.length;j.push(te);e:for(;0<q;){var le=q-1>>>1,_e=j[le];if(0<s(_e,te))j[le]=te,j[q]=_e,q=le;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var te=j[0],q=j.pop();if(q!==te){j[0]=q;e:for(var le=0,_e=j.length,Le=_e>>>1;le<Le;){var xe=2*(le+1)-1,Ve=j[xe],Re=xe+1,Ze=j[Re];if(0>s(Ve,q))Re<_e&&0>s(Ze,Ve)?(j[le]=Ze,j[Re]=q,le=Re):(j[le]=Ve,j[xe]=q,le=xe);else if(Re<_e&&0>s(Ze,q))j[le]=Ze,j[Re]=q,le=Re;else break e}}return te}function s(j,te){var q=j.sortIndex-te.sortIndex;return q!==0?q:j.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();r.unstable_now=function(){return l.now()-u}}var h=[],p=[],m=1,_=null,v=3,E=!1,w=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(j){for(var te=t(p);te!==null;){if(te.callback===null)i(p);else if(te.startTime<=j)i(p),te.sortIndex=te.expirationTime,e(h,te);else break;te=t(p)}}function N(j){if(x=!1,D(j),!w)if(t(h)!==null)w=!0,ge(F);else{var te=t(p);te!==null&&Ie(N,te.startTime-j)}}function F(j,te){w=!1,x&&(x=!1,O(U),U=-1),E=!0;var q=v;try{for(D(te),_=t(h);_!==null&&(!(_.expirationTime>te)||j&&!ie());){var le=_.callback;if(typeof le=="function"){_.callback=null,v=_.priorityLevel;var _e=le(_.expirationTime<=te);te=r.unstable_now(),typeof _e=="function"?_.callback=_e:_===t(h)&&i(h),D(te)}else i(h);_=t(h)}if(_!==null)var Le=!0;else{var xe=t(p);xe!==null&&Ie(N,xe.startTime-te),Le=!1}return Le}finally{_=null,v=q,E=!1}}var z=!1,V=null,U=-1,ee=5,ne=-1;function ie(){return!(r.unstable_now()-ne<ee)}function se(){if(V!==null){var j=r.unstable_now();ne=j;var te=!0;try{te=V(!0,j)}finally{te?fe():(z=!1,V=null)}}else z=!1}var fe;if(typeof k=="function")fe=function(){k(se)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,he=ae.port2;ae.port1.onmessage=se,fe=function(){he.postMessage(null)}}else fe=function(){A(se,0)};function ge(j){V=j,z||(z=!0,fe())}function Ie(j,te){U=A(function(){j(r.unstable_now())},te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(j){j.callback=null},r.unstable_continueExecution=function(){w||E||(w=!0,ge(F))},r.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<j?Math.floor(1e3/j):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(j){switch(v){case 1:case 2:case 3:var te=3;break;default:te=v}var q=v;v=te;try{return j()}finally{v=q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(j,te){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var q=v;v=j;try{return te()}finally{v=q}},r.unstable_scheduleCallback=function(j,te,q){var le=r.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?le+q:le):q=le,j){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=q+_e,j={id:m++,callback:te,priorityLevel:j,startTime:q,expirationTime:_e,sortIndex:-1},q>le?(j.sortIndex=q,e(p,j),t(h)===null&&j===t(p)&&(x?(O(U),U=-1):x=!0,Ie(N,q-le))):(j.sortIndex=_e,e(h,j),w||E||(w=!0,ge(F))),j},r.unstable_shouldYield=ie,r.unstable_wrapCallback=function(j){var te=v;return function(){var q=v;v=te;try{return j.apply(this,arguments)}finally{v=q}}}})(e5);ZG.exports=e5;var bX=ZG.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t5=de,Tf=bX;function un(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n5=new Set,lS={};function ob(r,e){c1(r,e),c1(r+"Capture",e)}function c1(r,e){for(lS[r]=e,r=0;r<e.length;r++)n5.add(e[r])}var W_=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$L=Object.prototype.hasOwnProperty,TX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lF={},uF={};function EX(r){return $L.call(uF,r)?!0:$L.call(lF,r)?!1:TX.test(r)?uF[r]=!0:(lF[r]=!0,!1)}function $X(r,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function SX(r,e,t,i){if(e===null||typeof e>"u"||$X(r,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ip(r,e,t,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Ph={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Ph[r]=new ip(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];Ph[e]=new ip(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Ph[r]=new ip(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Ph[r]=new ip(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Ph[r]=new ip(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Ph[r]=new ip(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Ph[r]=new ip(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Ph[r]=new ip(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Ph[r]=new ip(r,5,!1,r.toLowerCase(),null,!1,!1)});var j2=/[\-:]([a-z])/g;function X2(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(j2,X2);Ph[e]=new ip(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(j2,X2);Ph[e]=new ip(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(j2,X2);Ph[e]=new ip(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Ph[r]=new ip(r,1,!1,r.toLowerCase(),null,!1,!1)});Ph.xlinkHref=new ip("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Ph[r]=new ip(r,1,!1,r.toLowerCase(),null,!0,!0)});function Y2(r,e,t,i){var s=Ph.hasOwnProperty(e)?Ph[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SX(e,t,s,i)&&(t=null),i||s===null?EX(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):s.mustUseProperty?r[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?r.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?r.setAttributeNS(i,e,t):r.setAttribute(e,t))))}var J_=t5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ox=Symbol.for("react.element"),NT=Symbol.for("react.portal"),DT=Symbol.for("react.fragment"),K2=Symbol.for("react.strict_mode"),SL=Symbol.for("react.profiler"),r5=Symbol.for("react.provider"),i5=Symbol.for("react.context"),J2=Symbol.for("react.forward_ref"),wL=Symbol.for("react.suspense"),xL=Symbol.for("react.suspense_list"),Q2=Symbol.for("react.memo"),H0=Symbol.for("react.lazy"),s5=Symbol.for("react.offscreen"),cF=Symbol.iterator;function WE(r){return r===null||typeof r!="object"?null:(r=cF&&r[cF]||r["@@iterator"],typeof r=="function"?r:null)}var Il=Object.assign,RR;function R$(r){if(RR===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);RR=e&&e[1]||""}return`
`+RR+r}var kR=!1;function OR(r,e){if(!r||kR)return"";kR=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(r,[],e)}else{try{e.call()}catch(p){i=p}r.call(e.prototype)}else{try{throw Error()}catch(p){i=p}r()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,u=o.length-1;1<=l&&0<=u&&s[l]!==o[u];)u--;for(;1<=l&&0<=u;l--,u--)if(s[l]!==o[u]){if(l!==1||u!==1)do if(l--,u--,0>u||s[l]!==o[u]){var h=`
`+s[l].replace(" at new "," at ");return r.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",r.displayName)),h}while(1<=l&&0<=u);break}}}finally{kR=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?R$(r):""}function wX(r){switch(r.tag){case 5:return R$(r.type);case 16:return R$("Lazy");case 13:return R$("Suspense");case 19:return R$("SuspenseList");case 0:case 2:case 15:return r=OR(r.type,!1),r;case 11:return r=OR(r.type.render,!1),r;case 1:return r=OR(r.type,!0),r;default:return""}}function CL(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case DT:return"Fragment";case NT:return"Portal";case SL:return"Profiler";case K2:return"StrictMode";case wL:return"Suspense";case xL:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case i5:return(r.displayName||"Context")+".Consumer";case r5:return(r._context.displayName||"Context")+".Provider";case J2:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Q2:return e=r.displayName||null,e!==null?e:CL(r.type)||"Memo";case H0:e=r._payload,r=r._init;try{return CL(r(e))}catch{}}return null}function xX(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return CL(e);case 8:return e===K2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function uv(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function o5(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CX(r){var e=o5(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),i=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,o=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function ax(r){r._valueTracker||(r._valueTracker=CX(r))}function a5(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return r&&(i=o5(r)?r.checked?"true":"false":r.value),r=i,r!==t?(e.setValue(r),!0):!1}function BM(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function ML(r,e){var t=e.checked;return Il({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??r._wrapperState.initialChecked})}function hF(r,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=uv(e.value!=null?e.value:t),r._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function l5(r,e){e=e.checked,e!=null&&Y2(r,"checked",e,!1)}function AL(r,e){l5(r,e);var t=uv(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(i==="submit"||i==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?IL(r,e.type,t):e.hasOwnProperty("defaultValue")&&IL(r,e.type,uv(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function dF(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function IL(r,e,t){(e!=="number"||BM(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var k$=Array.isArray;function ZT(r,e,t,i){if(r=r.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<r.length;t++)s=e.hasOwnProperty("$"+r[t].value),r[t].selected!==s&&(r[t].selected=s),s&&i&&(r[t].defaultSelected=!0)}else{for(t=""+uv(t),e=null,s=0;s<r.length;s++){if(r[s].value===t){r[s].selected=!0,i&&(r[s].defaultSelected=!0);return}e!==null||r[s].disabled||(e=r[s])}e!==null&&(e.selected=!0)}}function RL(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(un(91));return Il({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function pF(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(un(92));if(k$(t)){if(1<t.length)throw Error(un(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:uv(t)}}function u5(r,e){var t=uv(e.value),i=uv(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),i!=null&&(r.defaultValue=""+i)}function fF(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function c5(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kL(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?c5(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var lx,h5=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return r(e,t,i,s)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(lx=lx||document.createElement("div"),lx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lx.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function uS(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var H$={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MX=["Webkit","ms","Moz","O"];Object.keys(H$).forEach(function(r){MX.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),H$[e]=H$[r]})});function d5(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||H$.hasOwnProperty(r)&&H$[r]?(""+e).trim():e+"px"}function p5(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=d5(t,e[t],i);t==="float"&&(t="cssFloat"),i?r.setProperty(t,s):r[t]=s}}var AX=Il({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function OL(r,e){if(e){if(AX[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(un(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(un(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(un(61))}if(e.style!=null&&typeof e.style!="object")throw Error(un(62))}}function LL(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var NL=null;function q2(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var DL=null,e1=null,t1=null;function mF(r){if(r=aw(r)){if(typeof DL!="function")throw Error(un(280));var e=r.stateNode;e&&(e=PA(e),DL(r.stateNode,r.type,e))}}function f5(r){e1?t1?t1.push(r):t1=[r]:e1=r}function m5(){if(e1){var r=e1,e=t1;if(t1=e1=null,mF(r),e)for(r=0;r<e.length;r++)mF(e[r])}}function g5(r,e){return r(e)}function _5(){}var LR=!1;function v5(r,e,t){if(LR)return r(e,t);LR=!0;try{return g5(r,e,t)}finally{LR=!1,(e1!==null||t1!==null)&&(_5(),m5())}}function cS(r,e){var t=r.stateNode;if(t===null)return null;var i=PA(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(r=r.type,i=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!i;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(un(231,e,typeof t));return t}var BL=!1;if(W_)try{var VE={};Object.defineProperty(VE,"passive",{get:function(){BL=!0}}),window.addEventListener("test",VE,VE),window.removeEventListener("test",VE,VE)}catch{BL=!1}function IX(r,e,t,i,s,o,l,u,h){var p=Array.prototype.slice.call(arguments,3);try{e.apply(t,p)}catch(m){this.onError(m)}}var G$=!1,PM=null,FM=!1,PL=null,RX={onError:function(r){G$=!0,PM=r}};function kX(r,e,t,i,s,o,l,u,h){G$=!1,PM=null,IX.apply(RX,arguments)}function OX(r,e,t,i,s,o,l,u,h){if(kX.apply(this,arguments),G$){if(G$){var p=PM;G$=!1,PM=null}else throw Error(un(198));FM||(FM=!0,PL=p)}}function ab(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function y5(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function gF(r){if(ab(r)!==r)throw Error(un(188))}function LX(r){var e=r.alternate;if(!e){if(e=ab(r),e===null)throw Error(un(188));return e!==r?null:r}for(var t=r,i=e;;){var s=t.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===t)return gF(s),r;if(o===i)return gF(s),e;o=o.sibling}throw Error(un(188))}if(t.return!==i.return)t=s,i=o;else{for(var l=!1,u=s.child;u;){if(u===t){l=!0,t=s,i=o;break}if(u===i){l=!0,i=s,t=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===t){l=!0,t=o,i=s;break}if(u===i){l=!0,i=o,t=s;break}u=u.sibling}if(!l)throw Error(un(189))}}if(t.alternate!==i)throw Error(un(190))}if(t.tag!==3)throw Error(un(188));return t.stateNode.current===t?r:e}function b5(r){return r=LX(r),r!==null?T5(r):null}function T5(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=T5(r);if(e!==null)return e;r=r.sibling}return null}var E5=Tf.unstable_scheduleCallback,_F=Tf.unstable_cancelCallback,NX=Tf.unstable_shouldYield,DX=Tf.unstable_requestPaint,Nu=Tf.unstable_now,BX=Tf.unstable_getCurrentPriorityLevel,Z2=Tf.unstable_ImmediatePriority,$5=Tf.unstable_UserBlockingPriority,UM=Tf.unstable_NormalPriority,PX=Tf.unstable_LowPriority,S5=Tf.unstable_IdlePriority,LA=null,Gg=null;function FX(r){if(Gg&&typeof Gg.onCommitFiberRoot=="function")try{Gg.onCommitFiberRoot(LA,r,void 0,(r.current.flags&128)===128)}catch{}}var rg=Math.clz32?Math.clz32:HX,UX=Math.log,zX=Math.LN2;function HX(r){return r>>>=0,r===0?32:31-(UX(r)/zX|0)|0}var ux=64,cx=4194304;function O$(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function zM(r,e){var t=r.pendingLanes;if(t===0)return 0;var i=0,s=r.suspendedLanes,o=r.pingedLanes,l=t&268435455;if(l!==0){var u=l&~s;u!==0?i=O$(u):(o&=l,o!==0&&(i=O$(o)))}else l=t&~s,l!==0?i=O$(l):o!==0&&(i=O$(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=i;0<e;)t=31-rg(e),s=1<<t,i|=r[t],e&=~s;return i}function GX(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WX(r,e){for(var t=r.suspendedLanes,i=r.pingedLanes,s=r.expirationTimes,o=r.pendingLanes;0<o;){var l=31-rg(o),u=1<<l,h=s[l];h===-1?(!(u&t)||u&i)&&(s[l]=GX(u,e)):h<=e&&(r.expiredLanes|=u),o&=~u}}function FL(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function w5(){var r=ux;return ux<<=1,!(ux&4194240)&&(ux=64),r}function NR(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function sw(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-rg(e),r[e]=t}function VX(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var i=r.eventTimes;for(r=r.expirationTimes;0<t;){var s=31-rg(t),o=1<<s;e[s]=0,i[s]=-1,r[s]=-1,t&=~o}}function eD(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var i=31-rg(t),s=1<<i;s&e|r[i]&e&&(r[i]|=e),t&=~s}}var uo=0;function x5(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var C5,tD,M5,A5,I5,UL=!1,hx=[],q0=null,Z0=null,ev=null,hS=new Map,dS=new Map,V0=[],jX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vF(r,e){switch(r){case"focusin":case"focusout":q0=null;break;case"dragenter":case"dragleave":Z0=null;break;case"mouseover":case"mouseout":ev=null;break;case"pointerover":case"pointerout":hS.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":dS.delete(e.pointerId)}}function jE(r,e,t,i,s,o){return r===null||r.nativeEvent!==o?(r={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=aw(e),e!==null&&tD(e)),r):(r.eventSystemFlags|=i,e=r.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),r)}function XX(r,e,t,i,s){switch(e){case"focusin":return q0=jE(q0,r,e,t,i,s),!0;case"dragenter":return Z0=jE(Z0,r,e,t,i,s),!0;case"mouseover":return ev=jE(ev,r,e,t,i,s),!0;case"pointerover":var o=s.pointerId;return hS.set(o,jE(hS.get(o)||null,r,e,t,i,s)),!0;case"gotpointercapture":return o=s.pointerId,dS.set(o,jE(dS.get(o)||null,r,e,t,i,s)),!0}return!1}function R5(r){var e=$y(r.target);if(e!==null){var t=ab(e);if(t!==null){if(e=t.tag,e===13){if(e=y5(t),e!==null){r.blockedOn=e,I5(r.priority,function(){M5(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function iM(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=zL(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var i=new t.constructor(t.type,t);NL=i,t.target.dispatchEvent(i),NL=null}else return e=aw(t),e!==null&&tD(e),r.blockedOn=t,!1;e.shift()}return!0}function yF(r,e,t){iM(r)&&t.delete(e)}function YX(){UL=!1,q0!==null&&iM(q0)&&(q0=null),Z0!==null&&iM(Z0)&&(Z0=null),ev!==null&&iM(ev)&&(ev=null),hS.forEach(yF),dS.forEach(yF)}function XE(r,e){r.blockedOn===e&&(r.blockedOn=null,UL||(UL=!0,Tf.unstable_scheduleCallback(Tf.unstable_NormalPriority,YX)))}function pS(r){function e(s){return XE(s,r)}if(0<hx.length){XE(hx[0],r);for(var t=1;t<hx.length;t++){var i=hx[t];i.blockedOn===r&&(i.blockedOn=null)}}for(q0!==null&&XE(q0,r),Z0!==null&&XE(Z0,r),ev!==null&&XE(ev,r),hS.forEach(e),dS.forEach(e),t=0;t<V0.length;t++)i=V0[t],i.blockedOn===r&&(i.blockedOn=null);for(;0<V0.length&&(t=V0[0],t.blockedOn===null);)R5(t),t.blockedOn===null&&V0.shift()}var n1=J_.ReactCurrentBatchConfig,HM=!0;function KX(r,e,t,i){var s=uo,o=n1.transition;n1.transition=null;try{uo=1,nD(r,e,t,i)}finally{uo=s,n1.transition=o}}function JX(r,e,t,i){var s=uo,o=n1.transition;n1.transition=null;try{uo=4,nD(r,e,t,i)}finally{uo=s,n1.transition=o}}function nD(r,e,t,i){if(HM){var s=zL(r,e,t,i);if(s===null)VR(r,e,i,GM,t),vF(r,i);else if(XX(s,r,e,t,i))i.stopPropagation();else if(vF(r,i),e&4&&-1<jX.indexOf(r)){for(;s!==null;){var o=aw(s);if(o!==null&&C5(o),o=zL(r,e,t,i),o===null&&VR(r,e,i,GM,t),o===s)break;s=o}s!==null&&i.stopPropagation()}else VR(r,e,i,null,t)}}var GM=null;function zL(r,e,t,i){if(GM=null,r=q2(i),r=$y(r),r!==null)if(e=ab(r),e===null)r=null;else if(t=e.tag,t===13){if(r=y5(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return GM=r,null}function k5(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BX()){case Z2:return 1;case $5:return 4;case UM:case PX:return 16;case S5:return 536870912;default:return 16}default:return 16}}var X0=null,rD=null,sM=null;function O5(){if(sM)return sM;var r,e=rD,t=e.length,i,s="value"in X0?X0.value:X0.textContent,o=s.length;for(r=0;r<t&&e[r]===s[r];r++);var l=t-r;for(i=1;i<=l&&e[t-i]===s[o-i];i++);return sM=s.slice(r,1<i?1-i:void 0)}function oM(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function dx(){return!0}function bF(){return!1}function wf(r){function e(t,i,s,o,l){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var u in r)r.hasOwnProperty(u)&&(t=r[u],this[u]=t?t(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?dx:bF,this.isPropagationStopped=bF,this}return Il(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=dx)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=dx)},persist:function(){},isPersistent:dx}),e}var H1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iD=wf(H1),ow=Il({},H1,{view:0,detail:0}),QX=wf(ow),DR,BR,YE,NA=Il({},ow,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sD,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==YE&&(YE&&r.type==="mousemove"?(DR=r.screenX-YE.screenX,BR=r.screenY-YE.screenY):BR=DR=0,YE=r),DR)},movementY:function(r){return"movementY"in r?r.movementY:BR}}),TF=wf(NA),qX=Il({},NA,{dataTransfer:0}),ZX=wf(qX),eY=Il({},ow,{relatedTarget:0}),PR=wf(eY),tY=Il({},H1,{animationName:0,elapsedTime:0,pseudoElement:0}),nY=wf(tY),rY=Il({},H1,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),iY=wf(rY),sY=Il({},H1,{data:0}),EF=wf(sY),oY={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aY={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lY={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uY(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=lY[r])?!!e[r]:!1}function sD(){return uY}var cY=Il({},ow,{key:function(r){if(r.key){var e=oY[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=oM(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?aY[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sD,charCode:function(r){return r.type==="keypress"?oM(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?oM(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),hY=wf(cY),dY=Il({},NA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$F=wf(dY),pY=Il({},ow,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sD}),fY=wf(pY),mY=Il({},H1,{propertyName:0,elapsedTime:0,pseudoElement:0}),gY=wf(mY),_Y=Il({},NA,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),vY=wf(_Y),yY=[9,13,27,32],oD=W_&&"CompositionEvent"in window,W$=null;W_&&"documentMode"in document&&(W$=document.documentMode);var bY=W_&&"TextEvent"in window&&!W$,L5=W_&&(!oD||W$&&8<W$&&11>=W$),SF=" ",wF=!1;function N5(r,e){switch(r){case"keyup":return yY.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function D5(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var BT=!1;function TY(r,e){switch(r){case"compositionend":return D5(e);case"keypress":return e.which!==32?null:(wF=!0,SF);case"textInput":return r=e.data,r===SF&&wF?null:r;default:return null}}function EY(r,e){if(BT)return r==="compositionend"||!oD&&N5(r,e)?(r=O5(),sM=rD=X0=null,BT=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return L5&&e.locale!=="ko"?null:e.data;default:return null}}var $Y={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xF(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!$Y[r.type]:e==="textarea"}function B5(r,e,t,i){f5(i),e=WM(e,"onChange"),0<e.length&&(t=new iD("onChange","change",null,t,i),r.push({event:t,listeners:e}))}var V$=null,fS=null;function SY(r){Y5(r,0)}function DA(r){var e=UT(r);if(a5(e))return r}function wY(r,e){if(r==="change")return e}var P5=!1;if(W_){var FR;if(W_){var UR="oninput"in document;if(!UR){var CF=document.createElement("div");CF.setAttribute("oninput","return;"),UR=typeof CF.oninput=="function"}FR=UR}else FR=!1;P5=FR&&(!document.documentMode||9<document.documentMode)}function MF(){V$&&(V$.detachEvent("onpropertychange",F5),fS=V$=null)}function F5(r){if(r.propertyName==="value"&&DA(fS)){var e=[];B5(e,fS,r,q2(r)),v5(SY,e)}}function xY(r,e,t){r==="focusin"?(MF(),V$=e,fS=t,V$.attachEvent("onpropertychange",F5)):r==="focusout"&&MF()}function CY(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return DA(fS)}function MY(r,e){if(r==="click")return DA(e)}function AY(r,e){if(r==="input"||r==="change")return DA(e)}function IY(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var ag=typeof Object.is=="function"?Object.is:IY;function mS(r,e){if(ag(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!$L.call(e,s)||!ag(r[s],e[s]))return!1}return!0}function AF(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function IF(r,e){var t=AF(r);r=0;for(var i;t;){if(t.nodeType===3){if(i=r+t.textContent.length,r<=e&&i>=e)return{node:t,offset:e-r};r=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=AF(t)}}function U5(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?U5(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function z5(){for(var r=window,e=BM();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=BM(r.document)}return e}function aD(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function RY(r){var e=z5(),t=r.focusedElem,i=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&U5(t.ownerDocument.documentElement,t)){if(i!==null&&aD(t)){if(e=i.start,r=i.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var s=t.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!r.extend&&o>i&&(s=i,i=o,o=s),s=IF(t,o);var l=IF(t,i);s&&l&&(r.rangeCount!==1||r.anchorNode!==s.node||r.anchorOffset!==s.offset||r.focusNode!==l.node||r.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),r.removeAllRanges(),o>i?(r.addRange(e),r.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var kY=W_&&"documentMode"in document&&11>=document.documentMode,PT=null,HL=null,j$=null,GL=!1;function RF(r,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;GL||PT==null||PT!==BM(i)||(i=PT,"selectionStart"in i&&aD(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),j$&&mS(j$,i)||(j$=i,i=WM(HL,"onSelect"),0<i.length&&(e=new iD("onSelect","select",null,e,t),r.push({event:e,listeners:i}),e.target=PT)))}function px(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var FT={animationend:px("Animation","AnimationEnd"),animationiteration:px("Animation","AnimationIteration"),animationstart:px("Animation","AnimationStart"),transitionend:px("Transition","TransitionEnd")},zR={},H5={};W_&&(H5=document.createElement("div").style,"AnimationEvent"in window||(delete FT.animationend.animation,delete FT.animationiteration.animation,delete FT.animationstart.animation),"TransitionEvent"in window||delete FT.transitionend.transition);function BA(r){if(zR[r])return zR[r];if(!FT[r])return r;var e=FT[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in H5)return zR[r]=e[t];return r}var G5=BA("animationend"),W5=BA("animationiteration"),V5=BA("animationstart"),j5=BA("transitionend"),X5=new Map,kF="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _v(r,e){X5.set(r,e),ob(e,[r])}for(var HR=0;HR<kF.length;HR++){var GR=kF[HR],OY=GR.toLowerCase(),LY=GR[0].toUpperCase()+GR.slice(1);_v(OY,"on"+LY)}_v(G5,"onAnimationEnd");_v(W5,"onAnimationIteration");_v(V5,"onAnimationStart");_v("dblclick","onDoubleClick");_v("focusin","onFocus");_v("focusout","onBlur");_v(j5,"onTransitionEnd");c1("onMouseEnter",["mouseout","mouseover"]);c1("onMouseLeave",["mouseout","mouseover"]);c1("onPointerEnter",["pointerout","pointerover"]);c1("onPointerLeave",["pointerout","pointerover"]);ob("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ob("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ob("onBeforeInput",["compositionend","keypress","textInput","paste"]);ob("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ob("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ob("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var L$="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NY=new Set("cancel close invalid load scroll toggle".split(" ").concat(L$));function OF(r,e,t){var i=r.type||"unknown-event";r.currentTarget=t,OX(i,e,void 0,r),r.currentTarget=null}function Y5(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var i=r[t],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var u=i[l],h=u.instance,p=u.currentTarget;if(u=u.listener,h!==o&&s.isPropagationStopped())break e;OF(s,u,p),o=h}else for(l=0;l<i.length;l++){if(u=i[l],h=u.instance,p=u.currentTarget,u=u.listener,h!==o&&s.isPropagationStopped())break e;OF(s,u,p),o=h}}}if(FM)throw r=PL,FM=!1,PL=null,r}function Ca(r,e){var t=e[YL];t===void 0&&(t=e[YL]=new Set);var i=r+"__bubble";t.has(i)||(K5(e,r,2,!1),t.add(i))}function WR(r,e,t){var i=0;e&&(i|=4),K5(t,r,i,e)}var fx="_reactListening"+Math.random().toString(36).slice(2);function gS(r){if(!r[fx]){r[fx]=!0,n5.forEach(function(t){t!=="selectionchange"&&(NY.has(t)||WR(t,!1,r),WR(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[fx]||(e[fx]=!0,WR("selectionchange",!1,e))}}function K5(r,e,t,i){switch(k5(e)){case 1:var s=KX;break;case 4:s=JX;break;default:s=nD}t=s.bind(null,e,t,r),s=void 0,!BL||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?r.addEventListener(e,t,{capture:!0,passive:s}):r.addEventListener(e,t,!0):s!==void 0?r.addEventListener(e,t,{passive:s}):r.addEventListener(e,t,!1)}function VR(r,e,t,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var u=i.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var h=l.tag;if((h===3||h===4)&&(h=l.stateNode.containerInfo,h===s||h.nodeType===8&&h.parentNode===s))return;l=l.return}for(;u!==null;){if(l=$y(u),l===null)return;if(h=l.tag,h===5||h===6){i=o=l;continue e}u=u.parentNode}}i=i.return}v5(function(){var p=o,m=q2(t),_=[];e:{var v=X5.get(r);if(v!==void 0){var E=iD,w=r;switch(r){case"keypress":if(oM(t)===0)break e;case"keydown":case"keyup":E=hY;break;case"focusin":w="focus",E=PR;break;case"focusout":w="blur",E=PR;break;case"beforeblur":case"afterblur":E=PR;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=TF;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=ZX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=fY;break;case G5:case W5:case V5:E=nY;break;case j5:E=gY;break;case"scroll":E=QX;break;case"wheel":E=vY;break;case"copy":case"cut":case"paste":E=iY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=$F}var x=(e&4)!==0,A=!x&&r==="scroll",O=x?v!==null?v+"Capture":null:v;x=[];for(var k=p,D;k!==null;){D=k;var N=D.stateNode;if(D.tag===5&&N!==null&&(D=N,O!==null&&(N=cS(k,O),N!=null&&x.push(_S(k,N,D)))),A)break;k=k.return}0<x.length&&(v=new E(v,w,null,t,m),_.push({event:v,listeners:x}))}}if(!(e&7)){e:{if(v=r==="mouseover"||r==="pointerover",E=r==="mouseout"||r==="pointerout",v&&t!==NL&&(w=t.relatedTarget||t.fromElement)&&($y(w)||w[V_]))break e;if((E||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,E?(w=t.relatedTarget||t.toElement,E=p,w=w?$y(w):null,w!==null&&(A=ab(w),w!==A||w.tag!==5&&w.tag!==6)&&(w=null)):(E=null,w=p),E!==w)){if(x=TF,N="onMouseLeave",O="onMouseEnter",k="mouse",(r==="pointerout"||r==="pointerover")&&(x=$F,N="onPointerLeave",O="onPointerEnter",k="pointer"),A=E==null?v:UT(E),D=w==null?v:UT(w),v=new x(N,k+"leave",E,t,m),v.target=A,v.relatedTarget=D,N=null,$y(m)===p&&(x=new x(O,k+"enter",w,t,m),x.target=D,x.relatedTarget=A,N=x),A=N,E&&w)t:{for(x=E,O=w,k=0,D=x;D;D=Gb(D))k++;for(D=0,N=O;N;N=Gb(N))D++;for(;0<k-D;)x=Gb(x),k--;for(;0<D-k;)O=Gb(O),D--;for(;k--;){if(x===O||O!==null&&x===O.alternate)break t;x=Gb(x),O=Gb(O)}x=null}else x=null;E!==null&&LF(_,v,E,x,!1),w!==null&&A!==null&&LF(_,A,w,x,!0)}}e:{if(v=p?UT(p):window,E=v.nodeName&&v.nodeName.toLowerCase(),E==="select"||E==="input"&&v.type==="file")var F=wY;else if(xF(v))if(P5)F=AY;else{F=CY;var z=xY}else(E=v.nodeName)&&E.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(F=MY);if(F&&(F=F(r,p))){B5(_,F,t,m);break e}z&&z(r,v,p),r==="focusout"&&(z=v._wrapperState)&&z.controlled&&v.type==="number"&&IL(v,"number",v.value)}switch(z=p?UT(p):window,r){case"focusin":(xF(z)||z.contentEditable==="true")&&(PT=z,HL=p,j$=null);break;case"focusout":j$=HL=PT=null;break;case"mousedown":GL=!0;break;case"contextmenu":case"mouseup":case"dragend":GL=!1,RF(_,t,m);break;case"selectionchange":if(kY)break;case"keydown":case"keyup":RF(_,t,m)}var V;if(oD)e:{switch(r){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else BT?N5(r,t)&&(U="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(U="onCompositionStart");U&&(L5&&t.locale!=="ko"&&(BT||U!=="onCompositionStart"?U==="onCompositionEnd"&&BT&&(V=O5()):(X0=m,rD="value"in X0?X0.value:X0.textContent,BT=!0)),z=WM(p,U),0<z.length&&(U=new EF(U,r,null,t,m),_.push({event:U,listeners:z}),V?U.data=V:(V=D5(t),V!==null&&(U.data=V)))),(V=bY?TY(r,t):EY(r,t))&&(p=WM(p,"onBeforeInput"),0<p.length&&(m=new EF("onBeforeInput","beforeinput",null,t,m),_.push({event:m,listeners:p}),m.data=V))}Y5(_,e)})}function _S(r,e,t){return{instance:r,listener:e,currentTarget:t}}function WM(r,e){for(var t=e+"Capture",i=[];r!==null;){var s=r,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=cS(r,t),o!=null&&i.unshift(_S(r,o,s)),o=cS(r,e),o!=null&&i.push(_S(r,o,s))),r=r.return}return i}function Gb(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function LF(r,e,t,i,s){for(var o=e._reactName,l=[];t!==null&&t!==i;){var u=t,h=u.alternate,p=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&p!==null&&(u=p,s?(h=cS(t,o),h!=null&&l.unshift(_S(t,h,u))):s||(h=cS(t,o),h!=null&&l.push(_S(t,h,u)))),t=t.return}l.length!==0&&r.push({event:e,listeners:l})}var DY=/\r\n?/g,BY=/\u0000|\uFFFD/g;function NF(r){return(typeof r=="string"?r:""+r).replace(DY,`
`).replace(BY,"")}function mx(r,e,t){if(e=NF(e),NF(r)!==e&&t)throw Error(un(425))}function VM(){}var WL=null,VL=null;function jL(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var XL=typeof setTimeout=="function"?setTimeout:void 0,PY=typeof clearTimeout=="function"?clearTimeout:void 0,DF=typeof Promise=="function"?Promise:void 0,FY=typeof queueMicrotask=="function"?queueMicrotask:typeof DF<"u"?function(r){return DF.resolve(null).then(r).catch(UY)}:XL;function UY(r){setTimeout(function(){throw r})}function jR(r,e){var t=e,i=0;do{var s=t.nextSibling;if(r.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){r.removeChild(s),pS(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);pS(e)}function tv(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function BF(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var G1=Math.random().toString(36).slice(2),Fg="__reactFiber$"+G1,vS="__reactProps$"+G1,V_="__reactContainer$"+G1,YL="__reactEvents$"+G1,zY="__reactListeners$"+G1,HY="__reactHandles$"+G1;function $y(r){var e=r[Fg];if(e)return e;for(var t=r.parentNode;t;){if(e=t[V_]||t[Fg]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=BF(r);r!==null;){if(t=r[Fg])return t;r=BF(r)}return e}r=t,t=r.parentNode}return null}function aw(r){return r=r[Fg]||r[V_],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function UT(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(un(33))}function PA(r){return r[vS]||null}var KL=[],zT=-1;function vv(r){return{current:r}}function Aa(r){0>zT||(r.current=KL[zT],KL[zT]=null,zT--)}function sa(r,e){zT++,KL[zT]=r.current,r.current=e}var cv={},$d=vv(cv),kp=vv(!1),Yy=cv;function h1(r,e){var t=r.type.contextTypes;if(!t)return cv;var i=r.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in t)s[o]=e[o];return i&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=s),s}function Op(r){return r=r.childContextTypes,r!=null}function jM(){Aa(kp),Aa($d)}function PF(r,e,t){if($d.current!==cv)throw Error(un(168));sa($d,e),sa(kp,t)}function J5(r,e,t){var i=r.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(un(108,xX(r)||"Unknown",s));return Il({},t,i)}function XM(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||cv,Yy=$d.current,sa($d,r),sa(kp,kp.current),!0}function FF(r,e,t){var i=r.stateNode;if(!i)throw Error(un(169));t?(r=J5(r,e,Yy),i.__reactInternalMemoizedMergedChildContext=r,Aa(kp),Aa($d),sa($d,r)):Aa(kp),sa(kp,t)}var O_=null,FA=!1,XR=!1;function Q5(r){O_===null?O_=[r]:O_.push(r)}function GY(r){FA=!0,Q5(r)}function yv(){if(!XR&&O_!==null){XR=!0;var r=0,e=uo;try{var t=O_;for(uo=1;r<t.length;r++){var i=t[r];do i=i(!0);while(i!==null)}O_=null,FA=!1}catch(s){throw O_!==null&&(O_=O_.slice(r+1)),E5(Z2,yv),s}finally{uo=e,XR=!1}}return null}var HT=[],GT=0,YM=null,KM=0,om=[],am=0,Ky=null,P_=1,F_="";function hy(r,e){HT[GT++]=KM,HT[GT++]=YM,YM=r,KM=e}function q5(r,e,t){om[am++]=P_,om[am++]=F_,om[am++]=Ky,Ky=r;var i=P_;r=F_;var s=32-rg(i)-1;i&=~(1<<s),t+=1;var o=32-rg(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,P_=1<<32-rg(e)+s|t<<s|i,F_=o+r}else P_=1<<o|t<<s|i,F_=r}function lD(r){r.return!==null&&(hy(r,1),q5(r,1,0))}function uD(r){for(;r===YM;)YM=HT[--GT],HT[GT]=null,KM=HT[--GT],HT[GT]=null;for(;r===Ky;)Ky=om[--am],om[am]=null,F_=om[--am],om[am]=null,P_=om[--am],om[am]=null}var mf=null,pf=null,Za=!1,Qm=null;function Z5(r,e){var t=cm(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function UF(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,mf=r,pf=tv(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,mf=r,pf=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ky!==null?{id:P_,overflow:F_}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=cm(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,mf=r,pf=null,!0):!1;default:return!1}}function JL(r){return(r.mode&1)!==0&&(r.flags&128)===0}function QL(r){if(Za){var e=pf;if(e){var t=e;if(!UF(r,e)){if(JL(r))throw Error(un(418));e=tv(t.nextSibling);var i=mf;e&&UF(r,e)?Z5(i,t):(r.flags=r.flags&-4097|2,Za=!1,mf=r)}}else{if(JL(r))throw Error(un(418));r.flags=r.flags&-4097|2,Za=!1,mf=r}}}function zF(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;mf=r}function gx(r){if(r!==mf)return!1;if(!Za)return zF(r),Za=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!jL(r.type,r.memoizedProps)),e&&(e=pf)){if(JL(r))throw e6(),Error(un(418));for(;e;)Z5(r,e),e=tv(e.nextSibling)}if(zF(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(un(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){pf=tv(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}pf=null}}else pf=mf?tv(r.stateNode.nextSibling):null;return!0}function e6(){for(var r=pf;r;)r=tv(r.nextSibling)}function d1(){pf=mf=null,Za=!1}function cD(r){Qm===null?Qm=[r]:Qm.push(r)}var WY=J_.ReactCurrentBatchConfig;function Km(r,e){if(r&&r.defaultProps){e=Il({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}var JM=vv(null),QM=null,WT=null,hD=null;function dD(){hD=WT=QM=null}function pD(r){var e=JM.current;Aa(JM),r._currentValue=e}function qL(r,e,t){for(;r!==null;){var i=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),r===t)break;r=r.return}}function r1(r,e){QM=r,hD=WT=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(Ap=!0),r.firstContext=null)}function dm(r){var e=r._currentValue;if(hD!==r)if(r={context:r,memoizedValue:e,next:null},WT===null){if(QM===null)throw Error(un(308));WT=r,QM.dependencies={lanes:0,firstContext:r}}else WT=WT.next=r;return e}var Sy=null;function fD(r){Sy===null?Sy=[r]:Sy.push(r)}function t6(r,e,t,i){var s=e.interleaved;return s===null?(t.next=t,fD(e)):(t.next=s.next,s.next=t),e.interleaved=t,j_(r,i)}function j_(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var G0=!1;function mD(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function n6(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function z_(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function nv(r,e,t){var i=r.updateQueue;if(i===null)return null;if(i=i.shared,cs&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,j_(r,t)}return s=i.interleaved,s===null?(e.next=e,fD(i)):(e.next=s.next,s.next=e),i.interleaved=e,j_(r,t)}function aM(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=r.pendingLanes,t|=i,e.lanes=t,eD(r,t)}}function HF(r,e){var t=r.updateQueue,i=r.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?s=o=l:o=o.next=l,t=t.next}while(t!==null);o===null?s=o=e:o=o.next=e}else s=o=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function qM(r,e,t,i){var s=r.updateQueue;G0=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var h=u,p=h.next;h.next=null,l===null?o=p:l.next=p,l=h;var m=r.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==l&&(u===null?m.firstBaseUpdate=p:u.next=p,m.lastBaseUpdate=h))}if(o!==null){var _=s.baseState;l=0,m=p=h=null,u=o;do{var v=u.lane,E=u.eventTime;if((i&v)===v){m!==null&&(m=m.next={eventTime:E,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var w=r,x=u;switch(v=e,E=t,x.tag){case 1:if(w=x.payload,typeof w=="function"){_=w.call(E,_,v);break e}_=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,v=typeof w=="function"?w.call(E,_,v):w,v==null)break e;_=Il({},_,v);break e;case 2:G0=!0}}u.callback!==null&&u.lane!==0&&(r.flags|=64,v=s.effects,v===null?s.effects=[u]:v.push(u))}else E={eventTime:E,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(p=m=E,h=_):m=m.next=E,l|=v;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;v=u,u=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(m===null&&(h=_),s.baseState=h,s.firstBaseUpdate=p,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Qy|=l,r.lanes=l,r.memoizedState=_}}function GF(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var i=r[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(un(191,s));s.call(i)}}}var r6=new t5.Component().refs;function ZL(r,e,t,i){e=r.memoizedState,t=t(i,e),t=t==null?e:Il({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var UA={isMounted:function(r){return(r=r._reactInternals)?ab(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var i=qd(),s=iv(r),o=z_(i,s);o.payload=e,t!=null&&(o.callback=t),e=nv(r,o,s),e!==null&&(ig(e,r,s,i),aM(e,r,s))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var i=qd(),s=iv(r),o=z_(i,s);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=nv(r,o,s),e!==null&&(ig(e,r,s,i),aM(e,r,s))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=qd(),i=iv(r),s=z_(t,i);s.tag=2,e!=null&&(s.callback=e),e=nv(r,s,i),e!==null&&(ig(e,r,i,t),aM(e,r,i))}};function WF(r,e,t,i,s,o,l){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!mS(t,i)||!mS(s,o):!0}function i6(r,e,t){var i=!1,s=cv,o=e.contextType;return typeof o=="object"&&o!==null?o=dm(o):(s=Op(e)?Yy:$d.current,i=e.contextTypes,o=(i=i!=null)?h1(r,s):cv),e=new e(t,o),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=UA,r.stateNode=e,e._reactInternals=r,i&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=o),e}function VF(r,e,t,i){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==r&&UA.enqueueReplaceState(e,e.state,null)}function eN(r,e,t,i){var s=r.stateNode;s.props=t,s.state=r.memoizedState,s.refs=r6,mD(r);var o=e.contextType;typeof o=="object"&&o!==null?s.context=dm(o):(o=Op(e)?Yy:$d.current,s.context=h1(r,o)),s.state=r.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(ZL(r,e,o,t),s.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&UA.enqueueReplaceState(s,s.state,null),qM(r,t,s,i),s.state=r.memoizedState),typeof s.componentDidMount=="function"&&(r.flags|=4194308)}function KE(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(un(309));var i=t.stateNode}if(!i)throw Error(un(147,r));var s=i,o=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var u=s.refs;u===r6&&(u=s.refs={}),l===null?delete u[o]:u[o]=l},e._stringRef=o,e)}if(typeof r!="string")throw Error(un(284));if(!t._owner)throw Error(un(290,r))}return r}function _x(r,e){throw r=Object.prototype.toString.call(e),Error(un(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function jF(r){var e=r._init;return e(r._payload)}function s6(r){function e(O,k){if(r){var D=O.deletions;D===null?(O.deletions=[k],O.flags|=16):D.push(k)}}function t(O,k){if(!r)return null;for(;k!==null;)e(O,k),k=k.sibling;return null}function i(O,k){for(O=new Map;k!==null;)k.key!==null?O.set(k.key,k):O.set(k.index,k),k=k.sibling;return O}function s(O,k){return O=sv(O,k),O.index=0,O.sibling=null,O}function o(O,k,D){return O.index=D,r?(D=O.alternate,D!==null?(D=D.index,D<k?(O.flags|=2,k):D):(O.flags|=2,k)):(O.flags|=1048576,k)}function l(O){return r&&O.alternate===null&&(O.flags|=2),O}function u(O,k,D,N){return k===null||k.tag!==6?(k=ek(D,O.mode,N),k.return=O,k):(k=s(k,D),k.return=O,k)}function h(O,k,D,N){var F=D.type;return F===DT?m(O,k,D.props.children,N,D.key):k!==null&&(k.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===H0&&jF(F)===k.type)?(N=s(k,D.props),N.ref=KE(O,k,D),N.return=O,N):(N=pM(D.type,D.key,D.props,null,O.mode,N),N.ref=KE(O,k,D),N.return=O,N)}function p(O,k,D,N){return k===null||k.tag!==4||k.stateNode.containerInfo!==D.containerInfo||k.stateNode.implementation!==D.implementation?(k=tk(D,O.mode,N),k.return=O,k):(k=s(k,D.children||[]),k.return=O,k)}function m(O,k,D,N,F){return k===null||k.tag!==7?(k=Py(D,O.mode,N,F),k.return=O,k):(k=s(k,D),k.return=O,k)}function _(O,k,D){if(typeof k=="string"&&k!==""||typeof k=="number")return k=ek(""+k,O.mode,D),k.return=O,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ox:return D=pM(k.type,k.key,k.props,null,O.mode,D),D.ref=KE(O,null,k),D.return=O,D;case NT:return k=tk(k,O.mode,D),k.return=O,k;case H0:var N=k._init;return _(O,N(k._payload),D)}if(k$(k)||WE(k))return k=Py(k,O.mode,D,null),k.return=O,k;_x(O,k)}return null}function v(O,k,D,N){var F=k!==null?k.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return F!==null?null:u(O,k,""+D,N);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ox:return D.key===F?h(O,k,D,N):null;case NT:return D.key===F?p(O,k,D,N):null;case H0:return F=D._init,v(O,k,F(D._payload),N)}if(k$(D)||WE(D))return F!==null?null:m(O,k,D,N,null);_x(O,D)}return null}function E(O,k,D,N,F){if(typeof N=="string"&&N!==""||typeof N=="number")return O=O.get(D)||null,u(k,O,""+N,F);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ox:return O=O.get(N.key===null?D:N.key)||null,h(k,O,N,F);case NT:return O=O.get(N.key===null?D:N.key)||null,p(k,O,N,F);case H0:var z=N._init;return E(O,k,D,z(N._payload),F)}if(k$(N)||WE(N))return O=O.get(D)||null,m(k,O,N,F,null);_x(k,N)}return null}function w(O,k,D,N){for(var F=null,z=null,V=k,U=k=0,ee=null;V!==null&&U<D.length;U++){V.index>U?(ee=V,V=null):ee=V.sibling;var ne=v(O,V,D[U],N);if(ne===null){V===null&&(V=ee);break}r&&V&&ne.alternate===null&&e(O,V),k=o(ne,k,U),z===null?F=ne:z.sibling=ne,z=ne,V=ee}if(U===D.length)return t(O,V),Za&&hy(O,U),F;if(V===null){for(;U<D.length;U++)V=_(O,D[U],N),V!==null&&(k=o(V,k,U),z===null?F=V:z.sibling=V,z=V);return Za&&hy(O,U),F}for(V=i(O,V);U<D.length;U++)ee=E(V,O,U,D[U],N),ee!==null&&(r&&ee.alternate!==null&&V.delete(ee.key===null?U:ee.key),k=o(ee,k,U),z===null?F=ee:z.sibling=ee,z=ee);return r&&V.forEach(function(ie){return e(O,ie)}),Za&&hy(O,U),F}function x(O,k,D,N){var F=WE(D);if(typeof F!="function")throw Error(un(150));if(D=F.call(D),D==null)throw Error(un(151));for(var z=F=null,V=k,U=k=0,ee=null,ne=D.next();V!==null&&!ne.done;U++,ne=D.next()){V.index>U?(ee=V,V=null):ee=V.sibling;var ie=v(O,V,ne.value,N);if(ie===null){V===null&&(V=ee);break}r&&V&&ie.alternate===null&&e(O,V),k=o(ie,k,U),z===null?F=ie:z.sibling=ie,z=ie,V=ee}if(ne.done)return t(O,V),Za&&hy(O,U),F;if(V===null){for(;!ne.done;U++,ne=D.next())ne=_(O,ne.value,N),ne!==null&&(k=o(ne,k,U),z===null?F=ne:z.sibling=ne,z=ne);return Za&&hy(O,U),F}for(V=i(O,V);!ne.done;U++,ne=D.next())ne=E(V,O,U,ne.value,N),ne!==null&&(r&&ne.alternate!==null&&V.delete(ne.key===null?U:ne.key),k=o(ne,k,U),z===null?F=ne:z.sibling=ne,z=ne);return r&&V.forEach(function(se){return e(O,se)}),Za&&hy(O,U),F}function A(O,k,D,N){if(typeof D=="object"&&D!==null&&D.type===DT&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case ox:e:{for(var F=D.key,z=k;z!==null;){if(z.key===F){if(F=D.type,F===DT){if(z.tag===7){t(O,z.sibling),k=s(z,D.props.children),k.return=O,O=k;break e}}else if(z.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===H0&&jF(F)===z.type){t(O,z.sibling),k=s(z,D.props),k.ref=KE(O,z,D),k.return=O,O=k;break e}t(O,z);break}else e(O,z);z=z.sibling}D.type===DT?(k=Py(D.props.children,O.mode,N,D.key),k.return=O,O=k):(N=pM(D.type,D.key,D.props,null,O.mode,N),N.ref=KE(O,k,D),N.return=O,O=N)}return l(O);case NT:e:{for(z=D.key;k!==null;){if(k.key===z)if(k.tag===4&&k.stateNode.containerInfo===D.containerInfo&&k.stateNode.implementation===D.implementation){t(O,k.sibling),k=s(k,D.children||[]),k.return=O,O=k;break e}else{t(O,k);break}else e(O,k);k=k.sibling}k=tk(D,O.mode,N),k.return=O,O=k}return l(O);case H0:return z=D._init,A(O,k,z(D._payload),N)}if(k$(D))return w(O,k,D,N);if(WE(D))return x(O,k,D,N);_x(O,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,k!==null&&k.tag===6?(t(O,k.sibling),k=s(k,D),k.return=O,O=k):(t(O,k),k=ek(D,O.mode,N),k.return=O,O=k),l(O)):t(O,k)}return A}var p1=s6(!0),o6=s6(!1),lw={},Wg=vv(lw),yS=vv(lw),bS=vv(lw);function wy(r){if(r===lw)throw Error(un(174));return r}function gD(r,e){switch(sa(bS,e),sa(yS,r),sa(Wg,lw),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kL(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=kL(e,r)}Aa(Wg),sa(Wg,e)}function f1(){Aa(Wg),Aa(yS),Aa(bS)}function a6(r){wy(bS.current);var e=wy(Wg.current),t=kL(e,r.type);e!==t&&(sa(yS,r),sa(Wg,t))}function _D(r){yS.current===r&&(Aa(Wg),Aa(yS))}var wl=vv(0);function ZM(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var YR=[];function vD(){for(var r=0;r<YR.length;r++)YR[r]._workInProgressVersionPrimary=null;YR.length=0}var lM=J_.ReactCurrentDispatcher,KR=J_.ReactCurrentBatchConfig,Jy=0,Ml=null,kc=null,sh=null,eA=!1,X$=!1,TS=0,VY=0;function cd(){throw Error(un(321))}function yD(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!ag(r[t],e[t]))return!1;return!0}function bD(r,e,t,i,s,o){if(Jy=o,Ml=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lM.current=r===null||r.memoizedState===null?KY:JY,r=t(i,s),X$){o=0;do{if(X$=!1,TS=0,25<=o)throw Error(un(301));o+=1,sh=kc=null,e.updateQueue=null,lM.current=QY,r=t(i,s)}while(X$)}if(lM.current=tA,e=kc!==null&&kc.next!==null,Jy=0,sh=kc=Ml=null,eA=!1,e)throw Error(un(300));return r}function TD(){var r=TS!==0;return TS=0,r}function Ng(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sh===null?Ml.memoizedState=sh=r:sh=sh.next=r,sh}function pm(){if(kc===null){var r=Ml.alternate;r=r!==null?r.memoizedState:null}else r=kc.next;var e=sh===null?Ml.memoizedState:sh.next;if(e!==null)sh=e,kc=r;else{if(r===null)throw Error(un(310));kc=r,r={memoizedState:kc.memoizedState,baseState:kc.baseState,baseQueue:kc.baseQueue,queue:kc.queue,next:null},sh===null?Ml.memoizedState=sh=r:sh=sh.next=r}return sh}function ES(r,e){return typeof e=="function"?e(r):e}function JR(r){var e=pm(),t=e.queue;if(t===null)throw Error(un(311));t.lastRenderedReducer=r;var i=kc,s=i.baseQueue,o=t.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,t.pending=null}if(s!==null){o=s.next,i=i.baseState;var u=l=null,h=null,p=o;do{var m=p.lane;if((Jy&m)===m)h!==null&&(h=h.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:r(i,p.action);else{var _={lane:m,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};h===null?(u=h=_,l=i):h=h.next=_,Ml.lanes|=m,Qy|=m}p=p.next}while(p!==null&&p!==o);h===null?l=i:h.next=u,ag(i,e.memoizedState)||(Ap=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=h,t.lastRenderedState=i}if(r=t.interleaved,r!==null){s=r;do o=s.lane,Ml.lanes|=o,Qy|=o,s=s.next;while(s!==r)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function QR(r){var e=pm(),t=e.queue;if(t===null)throw Error(un(311));t.lastRenderedReducer=r;var i=t.dispatch,s=t.pending,o=e.memoizedState;if(s!==null){t.pending=null;var l=s=s.next;do o=r(o,l.action),l=l.next;while(l!==s);ag(o,e.memoizedState)||(Ap=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,i]}function l6(){}function u6(r,e){var t=Ml,i=pm(),s=e(),o=!ag(i.memoizedState,s);if(o&&(i.memoizedState=s,Ap=!0),i=i.queue,ED(d6.bind(null,t,i,r),[r]),i.getSnapshot!==e||o||sh!==null&&sh.memoizedState.tag&1){if(t.flags|=2048,$S(9,h6.bind(null,t,i,s,e),void 0,null),oh===null)throw Error(un(349));Jy&30||c6(t,e,s)}return s}function c6(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=Ml.updateQueue,e===null?(e={lastEffect:null,stores:null},Ml.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function h6(r,e,t,i){e.value=t,e.getSnapshot=i,p6(e)&&f6(r)}function d6(r,e,t){return t(function(){p6(e)&&f6(r)})}function p6(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!ag(r,t)}catch{return!0}}function f6(r){var e=j_(r,1);e!==null&&ig(e,r,1,-1)}function XF(r){var e=Ng();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ES,lastRenderedState:r},e.queue=r,r=r.dispatch=YY.bind(null,Ml,r),[e.memoizedState,r]}function $S(r,e,t,i){return r={tag:r,create:e,destroy:t,deps:i,next:null},e=Ml.updateQueue,e===null?(e={lastEffect:null,stores:null},Ml.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(i=t.next,t.next=r,r.next=i,e.lastEffect=r)),r}function m6(){return pm().memoizedState}function uM(r,e,t,i){var s=Ng();Ml.flags|=r,s.memoizedState=$S(1|e,t,void 0,i===void 0?null:i)}function zA(r,e,t,i){var s=pm();i=i===void 0?null:i;var o=void 0;if(kc!==null){var l=kc.memoizedState;if(o=l.destroy,i!==null&&yD(i,l.deps)){s.memoizedState=$S(e,t,o,i);return}}Ml.flags|=r,s.memoizedState=$S(1|e,t,o,i)}function YF(r,e){return uM(8390656,8,r,e)}function ED(r,e){return zA(2048,8,r,e)}function g6(r,e){return zA(4,2,r,e)}function _6(r,e){return zA(4,4,r,e)}function v6(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function y6(r,e,t){return t=t!=null?t.concat([r]):null,zA(4,4,v6.bind(null,e,r),t)}function $D(){}function b6(r,e){var t=pm();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&yD(e,i[1])?i[0]:(t.memoizedState=[r,e],r)}function T6(r,e){var t=pm();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&yD(e,i[1])?i[0]:(r=r(),t.memoizedState=[r,e],r)}function E6(r,e,t){return Jy&21?(ag(t,e)||(t=w5(),Ml.lanes|=t,Qy|=t,r.baseState=!0),e):(r.baseState&&(r.baseState=!1,Ap=!0),r.memoizedState=t)}function jY(r,e){var t=uo;uo=t!==0&&4>t?t:4,r(!0);var i=KR.transition;KR.transition={};try{r(!1),e()}finally{uo=t,KR.transition=i}}function $6(){return pm().memoizedState}function XY(r,e,t){var i=iv(r);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},S6(r))w6(e,t);else if(t=t6(r,e,t,i),t!==null){var s=qd();ig(t,r,i,s),x6(t,e,i)}}function YY(r,e,t){var i=iv(r),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(S6(r))w6(e,s);else{var o=r.alternate;if(r.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,u=o(l,t);if(s.hasEagerState=!0,s.eagerState=u,ag(u,l)){var h=e.interleaved;h===null?(s.next=s,fD(e)):(s.next=h.next,h.next=s),e.interleaved=s;return}}catch{}finally{}t=t6(r,e,s,i),t!==null&&(s=qd(),ig(t,r,i,s),x6(t,e,i))}}function S6(r){var e=r.alternate;return r===Ml||e!==null&&e===Ml}function w6(r,e){X$=eA=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function x6(r,e,t){if(t&4194240){var i=e.lanes;i&=r.pendingLanes,t|=i,e.lanes=t,eD(r,t)}}var tA={readContext:dm,useCallback:cd,useContext:cd,useEffect:cd,useImperativeHandle:cd,useInsertionEffect:cd,useLayoutEffect:cd,useMemo:cd,useReducer:cd,useRef:cd,useState:cd,useDebugValue:cd,useDeferredValue:cd,useTransition:cd,useMutableSource:cd,useSyncExternalStore:cd,useId:cd,unstable_isNewReconciler:!1},KY={readContext:dm,useCallback:function(r,e){return Ng().memoizedState=[r,e===void 0?null:e],r},useContext:dm,useEffect:YF,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,uM(4194308,4,v6.bind(null,e,r),t)},useLayoutEffect:function(r,e){return uM(4194308,4,r,e)},useInsertionEffect:function(r,e){return uM(4,2,r,e)},useMemo:function(r,e){var t=Ng();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var i=Ng();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},i.queue=r,r=r.dispatch=XY.bind(null,Ml,r),[i.memoizedState,r]},useRef:function(r){var e=Ng();return r={current:r},e.memoizedState=r},useState:XF,useDebugValue:$D,useDeferredValue:function(r){return Ng().memoizedState=r},useTransition:function(){var r=XF(!1),e=r[0];return r=jY.bind(null,r[1]),Ng().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var i=Ml,s=Ng();if(Za){if(t===void 0)throw Error(un(407));t=t()}else{if(t=e(),oh===null)throw Error(un(349));Jy&30||c6(i,e,t)}s.memoizedState=t;var o={value:t,getSnapshot:e};return s.queue=o,YF(d6.bind(null,i,o,r),[r]),i.flags|=2048,$S(9,h6.bind(null,i,o,t,e),void 0,null),t},useId:function(){var r=Ng(),e=oh.identifierPrefix;if(Za){var t=F_,i=P_;t=(i&~(1<<32-rg(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=TS++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=VY++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},JY={readContext:dm,useCallback:b6,useContext:dm,useEffect:ED,useImperativeHandle:y6,useInsertionEffect:g6,useLayoutEffect:_6,useMemo:T6,useReducer:JR,useRef:m6,useState:function(){return JR(ES)},useDebugValue:$D,useDeferredValue:function(r){var e=pm();return E6(e,kc.memoizedState,r)},useTransition:function(){var r=JR(ES)[0],e=pm().memoizedState;return[r,e]},useMutableSource:l6,useSyncExternalStore:u6,useId:$6,unstable_isNewReconciler:!1},QY={readContext:dm,useCallback:b6,useContext:dm,useEffect:ED,useImperativeHandle:y6,useInsertionEffect:g6,useLayoutEffect:_6,useMemo:T6,useReducer:QR,useRef:m6,useState:function(){return QR(ES)},useDebugValue:$D,useDeferredValue:function(r){var e=pm();return kc===null?e.memoizedState=r:E6(e,kc.memoizedState,r)},useTransition:function(){var r=QR(ES)[0],e=pm().memoizedState;return[r,e]},useMutableSource:l6,useSyncExternalStore:u6,useId:$6,unstable_isNewReconciler:!1};function m1(r,e){try{var t="",i=e;do t+=wX(i),i=i.return;while(i);var s=t}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:r,source:e,stack:s,digest:null}}function qR(r,e,t){return{value:r,source:null,stack:t??null,digest:e??null}}function tN(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var qY=typeof WeakMap=="function"?WeakMap:Map;function C6(r,e,t){t=z_(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){rA||(rA=!0,hN=i),tN(r,e)},t}function M6(r,e,t){t=z_(-1,t),t.tag=3;var i=r.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){tN(r,e)}}var o=r.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){tN(r,e),typeof i!="function"&&(rv===null?rv=new Set([this]):rv.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),t}function KF(r,e,t){var i=r.pingCache;if(i===null){i=r.pingCache=new qY;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),r=dK.bind(null,r,e,t),e.then(r,r))}function JF(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function QF(r,e,t,i,s){return r.mode&1?(r.flags|=65536,r.lanes=s,r):(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=z_(-1,1),e.tag=2,nv(t,e,1))),t.lanes|=1),r)}var ZY=J_.ReactCurrentOwner,Ap=!1;function Vd(r,e,t,i){e.child=r===null?o6(e,null,t,i):p1(e,r.child,t,i)}function qF(r,e,t,i,s){t=t.render;var o=e.ref;return r1(e,s),i=bD(r,e,t,i,o,s),t=TD(),r!==null&&!Ap?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~s,X_(r,e,s)):(Za&&t&&lD(e),e.flags|=1,Vd(r,e,i,s),e.child)}function ZF(r,e,t,i,s){if(r===null){var o=t.type;return typeof o=="function"&&!RD(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,A6(r,e,o,i,s)):(r=pM(t.type,null,i,e,e.mode,s),r.ref=e.ref,r.return=e,e.child=r)}if(o=r.child,!(r.lanes&s)){var l=o.memoizedProps;if(t=t.compare,t=t!==null?t:mS,t(l,i)&&r.ref===e.ref)return X_(r,e,s)}return e.flags|=1,r=sv(o,i),r.ref=e.ref,r.return=e,e.child=r}function A6(r,e,t,i,s){if(r!==null){var o=r.memoizedProps;if(mS(o,i)&&r.ref===e.ref)if(Ap=!1,e.pendingProps=i=o,(r.lanes&s)!==0)r.flags&131072&&(Ap=!0);else return e.lanes=r.lanes,X_(r,e,s)}return nN(r,e,t,i,s)}function I6(r,e,t){var i=e.pendingProps,s=i.children,o=r!==null?r.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},sa(jT,uf),uf|=t;else{if(!(t&1073741824))return r=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,sa(jT,uf),uf|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:t,sa(jT,uf),uf|=i}else o!==null?(i=o.baseLanes|t,e.memoizedState=null):i=t,sa(jT,uf),uf|=i;return Vd(r,e,s,t),e.child}function R6(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function nN(r,e,t,i,s){var o=Op(t)?Yy:$d.current;return o=h1(e,o),r1(e,s),t=bD(r,e,t,i,o,s),i=TD(),r!==null&&!Ap?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~s,X_(r,e,s)):(Za&&i&&lD(e),e.flags|=1,Vd(r,e,t,s),e.child)}function e3(r,e,t,i,s){if(Op(t)){var o=!0;XM(e)}else o=!1;if(r1(e,s),e.stateNode===null)cM(r,e),i6(e,t,i),eN(e,t,i,s),i=!0;else if(r===null){var l=e.stateNode,u=e.memoizedProps;l.props=u;var h=l.context,p=t.contextType;typeof p=="object"&&p!==null?p=dm(p):(p=Op(t)?Yy:$d.current,p=h1(e,p));var m=t.getDerivedStateFromProps,_=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";_||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==i||h!==p)&&VF(e,l,i,p),G0=!1;var v=e.memoizedState;l.state=v,qM(e,i,l,s),h=e.memoizedState,u!==i||v!==h||kp.current||G0?(typeof m=="function"&&(ZL(e,t,m,i),h=e.memoizedState),(u=G0||WF(e,t,u,i,v,h,p))?(_||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),l.props=i,l.state=h,l.context=p,i=u):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,n6(r,e),u=e.memoizedProps,p=e.type===e.elementType?u:Km(e.type,u),l.props=p,_=e.pendingProps,v=l.context,h=t.contextType,typeof h=="object"&&h!==null?h=dm(h):(h=Op(t)?Yy:$d.current,h=h1(e,h));var E=t.getDerivedStateFromProps;(m=typeof E=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==_||v!==h)&&VF(e,l,i,h),G0=!1,v=e.memoizedState,l.state=v,qM(e,i,l,s);var w=e.memoizedState;u!==_||v!==w||kp.current||G0?(typeof E=="function"&&(ZL(e,t,E,i),w=e.memoizedState),(p=G0||WF(e,t,p,i,v,w,h)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,w,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,w,h)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===r.memoizedProps&&v===r.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===r.memoizedProps&&v===r.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=w),l.props=i,l.state=w,l.context=h,i=p):(typeof l.componentDidUpdate!="function"||u===r.memoizedProps&&v===r.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===r.memoizedProps&&v===r.memoizedState||(e.flags|=1024),i=!1)}return rN(r,e,t,i,o,s)}function rN(r,e,t,i,s,o){R6(r,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&FF(e,t,!1),X_(r,e,o);i=e.stateNode,ZY.current=e;var u=l&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,r!==null&&l?(e.child=p1(e,r.child,null,o),e.child=p1(e,null,u,o)):Vd(r,e,u,o),e.memoizedState=i.state,s&&FF(e,t,!0),e.child}function k6(r){var e=r.stateNode;e.pendingContext?PF(r,e.pendingContext,e.pendingContext!==e.context):e.context&&PF(r,e.context,!1),gD(r,e.containerInfo)}function t3(r,e,t,i,s){return d1(),cD(s),e.flags|=256,Vd(r,e,t,i),e.child}var iN={dehydrated:null,treeContext:null,retryLane:0};function sN(r){return{baseLanes:r,cachePool:null,transitions:null}}function O6(r,e,t){var i=e.pendingProps,s=wl.current,o=!1,l=(e.flags&128)!==0,u;if((u=l)||(u=r!==null&&r.memoizedState===null?!1:(s&2)!==0),u?(o=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(s|=1),sa(wl,s&1),r===null)return QL(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(e.mode&1?r.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,r=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=WA(l,i,0,null),r=Py(r,i,t,null),o.return=e,r.return=e,o.sibling=r,e.child=o,e.child.memoizedState=sN(t),e.memoizedState=iN,r):SD(e,l));if(s=r.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return eK(r,e,l,i,u,s,t);if(o){o=i.fallback,l=e.mode,s=r.child,u=s.sibling;var h={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=sv(s,h),i.subtreeFlags=s.subtreeFlags&14680064),u!==null?o=sv(u,o):(o=Py(o,l,t,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=r.child.memoizedState,l=l===null?sN(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=r.childLanes&~t,e.memoizedState=iN,i}return o=r.child,r=o.sibling,i=sv(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=i,e.memoizedState=null,i}function SD(r,e){return e=WA({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function vx(r,e,t,i){return i!==null&&cD(i),p1(e,r.child,null,t),r=SD(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function eK(r,e,t,i,s,o,l){if(t)return e.flags&256?(e.flags&=-257,i=qR(Error(un(422))),vx(r,e,l,i)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=WA({mode:"visible",children:i.children},s,0,null),o=Py(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&p1(e,r.child,null,l),e.child.memoizedState=sN(l),e.memoizedState=iN,o);if(!(e.mode&1))return vx(r,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(un(419)),i=qR(o,i,void 0),vx(r,e,l,i)}if(u=(l&r.childLanes)!==0,Ap||u){if(i=oh,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,j_(r,s),ig(i,r,s,-1))}return ID(),i=qR(Error(un(421))),vx(r,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=r.child,e=pK.bind(null,r),s._reactRetry=e,null):(r=o.treeContext,pf=tv(s.nextSibling),mf=e,Za=!0,Qm=null,r!==null&&(om[am++]=P_,om[am++]=F_,om[am++]=Ky,P_=r.id,F_=r.overflow,Ky=e),e=SD(e,i.children),e.flags|=4096,e)}function n3(r,e,t){r.lanes|=e;var i=r.alternate;i!==null&&(i.lanes|=e),qL(r.return,e,t)}function ZR(r,e,t,i,s){var o=r.memoizedState;o===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=t,o.tailMode=s)}function L6(r,e,t){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Vd(r,e,i.children,t),i=wl.current,i&2)i=i&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&n3(r,t,e);else if(r.tag===19)n3(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}i&=1}if(sa(wl,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)r=t.alternate,r!==null&&ZM(r)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),ZR(e,!1,s,t,o);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(r=s.alternate,r!==null&&ZM(r)===null){e.child=s;break}r=s.sibling,s.sibling=t,t=s,s=r}ZR(e,!0,t,null,o);break;case"together":ZR(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cM(r,e){!(e.mode&1)&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function X_(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),Qy|=e.lanes,!(t&e.childLanes))return null;if(r!==null&&e.child!==r.child)throw Error(un(153));if(e.child!==null){for(r=e.child,t=sv(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=sv(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function tK(r,e,t){switch(e.tag){case 3:k6(e),d1();break;case 5:a6(e);break;case 1:Op(e.type)&&XM(e);break;case 4:gD(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;sa(JM,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(sa(wl,wl.current&1),e.flags|=128,null):t&e.child.childLanes?O6(r,e,t):(sa(wl,wl.current&1),r=X_(r,e,t),r!==null?r.sibling:null);sa(wl,wl.current&1);break;case 19:if(i=(t&e.childLanes)!==0,r.flags&128){if(i)return L6(r,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),sa(wl,wl.current),i)break;return null;case 22:case 23:return e.lanes=0,I6(r,e,t)}return X_(r,e,t)}var N6,oN,D6,B6;N6=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};oN=function(){};D6=function(r,e,t,i){var s=r.memoizedProps;if(s!==i){r=e.stateNode,wy(Wg.current);var o=null;switch(t){case"input":s=ML(r,s),i=ML(r,i),o=[];break;case"select":s=Il({},s,{value:void 0}),i=Il({},i,{value:void 0}),o=[];break;case"textarea":s=RL(r,s),i=RL(r,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(r.onclick=VM)}OL(t,i);var l;t=null;for(p in s)if(!i.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var u=s[p];for(l in u)u.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(lS.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in i){var h=i[p];if(u=s!=null?s[p]:void 0,i.hasOwnProperty(p)&&h!==u&&(h!=null||u!=null))if(p==="style")if(u){for(l in u)!u.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in h)h.hasOwnProperty(l)&&u[l]!==h[l]&&(t||(t={}),t[l]=h[l])}else t||(o||(o=[]),o.push(p,t)),t=h;else p==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(p,h)):p==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(p,""+h):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(lS.hasOwnProperty(p)?(h!=null&&p==="onScroll"&&Ca("scroll",r),o||u===h||(o=[])):(o=o||[]).push(p,h))}t&&(o=o||[]).push("style",t);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};B6=function(r,e,t,i){t!==i&&(e.flags|=4)};function JE(r,e){if(!Za)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:i.sibling=null}}function hd(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,i=0;if(e)for(var s=r.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=r,s=s.sibling;else for(s=r.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=r,s=s.sibling;return r.subtreeFlags|=i,r.childLanes=t,e}function nK(r,e,t){var i=e.pendingProps;switch(uD(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hd(e),null;case 1:return Op(e.type)&&jM(),hd(e),null;case 3:return i=e.stateNode,f1(),Aa(kp),Aa($d),vD(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(r===null||r.child===null)&&(gx(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qm!==null&&(fN(Qm),Qm=null))),oN(r,e),hd(e),null;case 5:_D(e);var s=wy(bS.current);if(t=e.type,r!==null&&e.stateNode!=null)D6(r,e,t,i,s),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(un(166));return hd(e),null}if(r=wy(Wg.current),gx(e)){i=e.stateNode,t=e.type;var o=e.memoizedProps;switch(i[Fg]=e,i[vS]=o,r=(e.mode&1)!==0,t){case"dialog":Ca("cancel",i),Ca("close",i);break;case"iframe":case"object":case"embed":Ca("load",i);break;case"video":case"audio":for(s=0;s<L$.length;s++)Ca(L$[s],i);break;case"source":Ca("error",i);break;case"img":case"image":case"link":Ca("error",i),Ca("load",i);break;case"details":Ca("toggle",i);break;case"input":hF(i,o),Ca("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ca("invalid",i);break;case"textarea":pF(i,o),Ca("invalid",i)}OL(t,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];l==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&mx(i.textContent,u,r),s=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&mx(i.textContent,u,r),s=["children",""+u]):lS.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&Ca("scroll",i)}switch(t){case"input":ax(i),dF(i,o,!0);break;case"textarea":ax(i),fF(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=VM)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=c5(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=l.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof i.is=="string"?r=l.createElement(t,{is:i.is}):(r=l.createElement(t),t==="select"&&(l=r,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):r=l.createElementNS(r,t),r[Fg]=e,r[vS]=i,N6(r,e,!1,!1),e.stateNode=r;e:{switch(l=LL(t,i),t){case"dialog":Ca("cancel",r),Ca("close",r),s=i;break;case"iframe":case"object":case"embed":Ca("load",r),s=i;break;case"video":case"audio":for(s=0;s<L$.length;s++)Ca(L$[s],r);s=i;break;case"source":Ca("error",r),s=i;break;case"img":case"image":case"link":Ca("error",r),Ca("load",r),s=i;break;case"details":Ca("toggle",r),s=i;break;case"input":hF(r,i),s=ML(r,i),Ca("invalid",r);break;case"option":s=i;break;case"select":r._wrapperState={wasMultiple:!!i.multiple},s=Il({},i,{value:void 0}),Ca("invalid",r);break;case"textarea":pF(r,i),s=RL(r,i),Ca("invalid",r);break;default:s=i}OL(t,s),u=s;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?p5(r,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&h5(r,h)):o==="children"?typeof h=="string"?(t!=="textarea"||h!=="")&&uS(r,h):typeof h=="number"&&uS(r,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(lS.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Ca("scroll",r):h!=null&&Y2(r,o,h,l))}switch(t){case"input":ax(r),dF(r,i,!1);break;case"textarea":ax(r),fF(r);break;case"option":i.value!=null&&r.setAttribute("value",""+uv(i.value));break;case"select":r.multiple=!!i.multiple,o=i.value,o!=null?ZT(r,!!i.multiple,o,!1):i.defaultValue!=null&&ZT(r,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(r.onclick=VM)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hd(e),null;case 6:if(r&&e.stateNode!=null)B6(r,e,r.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(un(166));if(t=wy(bS.current),wy(Wg.current),gx(e)){if(i=e.stateNode,t=e.memoizedProps,i[Fg]=e,(o=i.nodeValue!==t)&&(r=mf,r!==null))switch(r.tag){case 3:mx(i.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&mx(i.nodeValue,t,(r.mode&1)!==0)}o&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Fg]=e,e.stateNode=i}return hd(e),null;case 13:if(Aa(wl),i=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Za&&pf!==null&&e.mode&1&&!(e.flags&128))e6(),d1(),e.flags|=98560,o=!1;else if(o=gx(e),i!==null&&i.dehydrated!==null){if(r===null){if(!o)throw Error(un(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(un(317));o[Fg]=e}else d1(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;hd(e),o=!1}else Qm!==null&&(fN(Qm),Qm=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(r!==null&&r.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(r===null||wl.current&1?Lc===0&&(Lc=3):ID())),e.updateQueue!==null&&(e.flags|=4),hd(e),null);case 4:return f1(),oN(r,e),r===null&&gS(e.stateNode.containerInfo),hd(e),null;case 10:return pD(e.type._context),hd(e),null;case 17:return Op(e.type)&&jM(),hd(e),null;case 19:if(Aa(wl),o=e.memoizedState,o===null)return hd(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)JE(o,!1);else{if(Lc!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(l=ZM(r),l!==null){for(e.flags|=128,JE(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)o=t,r=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=r,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,r=l.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return sa(wl,wl.current&1|2),e.child}r=r.sibling}o.tail!==null&&Nu()>g1&&(e.flags|=128,i=!0,JE(o,!1),e.lanes=4194304)}else{if(!i)if(r=ZM(l),r!==null){if(e.flags|=128,i=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),JE(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Za)return hd(e),null}else 2*Nu()-o.renderingStartTime>g1&&t!==1073741824&&(e.flags|=128,i=!0,JE(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(t=o.last,t!==null?t.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Nu(),e.sibling=null,t=wl.current,sa(wl,i?t&1|2:t&1),e):(hd(e),null);case 22:case 23:return AD(),i=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?uf&1073741824&&(hd(e),e.subtreeFlags&6&&(e.flags|=8192)):hd(e),null;case 24:return null;case 25:return null}throw Error(un(156,e.tag))}function rK(r,e){switch(uD(e),e.tag){case 1:return Op(e.type)&&jM(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return f1(),Aa(kp),Aa($d),vD(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 5:return _D(e),null;case 13:if(Aa(wl),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(un(340));d1()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return Aa(wl),null;case 4:return f1(),null;case 10:return pD(e.type._context),null;case 22:case 23:return AD(),null;case 24:return null;default:return null}}var yx=!1,yd=!1,iK=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function VT(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){ru(r,e,i)}else t.current=null}function aN(r,e,t){try{t()}catch(i){ru(r,e,i)}}var r3=!1;function sK(r,e){if(WL=HM,r=z5(),aD(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var l=0,u=-1,h=-1,p=0,m=0,_=r,v=null;t:for(;;){for(var E;_!==t||s!==0&&_.nodeType!==3||(u=l+s),_!==o||i!==0&&_.nodeType!==3||(h=l+i),_.nodeType===3&&(l+=_.nodeValue.length),(E=_.firstChild)!==null;)v=_,_=E;for(;;){if(_===r)break t;if(v===t&&++p===s&&(u=l),v===o&&++m===i&&(h=l),(E=_.nextSibling)!==null)break;_=v,v=_.parentNode}_=E}t=u===-1||h===-1?null:{start:u,end:h}}else t=null}t=t||{start:0,end:0}}else t=null;for(VL={focusedElem:r,selectionRange:t},HM=!1,Fn=e;Fn!==null;)if(e=Fn,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,Fn=r;else for(;Fn!==null;){e=Fn;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,A=w.memoizedState,O=e.stateNode,k=O.getSnapshotBeforeUpdate(e.elementType===e.type?x:Km(e.type,x),A);O.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var D=e.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(un(163))}}catch(N){ru(e,e.return,N)}if(r=e.sibling,r!==null){r.return=e.return,Fn=r;break}Fn=e.return}return w=r3,r3=!1,w}function Y$(r,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&r)===r){var o=s.destroy;s.destroy=void 0,o!==void 0&&aN(e,t,o)}s=s.next}while(s!==i)}}function HA(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function lN(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function P6(r){var e=r.alternate;e!==null&&(r.alternate=null,P6(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[Fg],delete e[vS],delete e[YL],delete e[zY],delete e[HY])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function F6(r){return r.tag===5||r.tag===3||r.tag===4}function i3(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||F6(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function uN(r,e,t){var i=r.tag;if(i===5||i===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=VM));else if(i!==4&&(r=r.child,r!==null))for(uN(r,e,t),r=r.sibling;r!==null;)uN(r,e,t),r=r.sibling}function cN(r,e,t){var i=r.tag;if(i===5||i===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(i!==4&&(r=r.child,r!==null))for(cN(r,e,t),r=r.sibling;r!==null;)cN(r,e,t),r=r.sibling}var Lh=null,Jm=!1;function T0(r,e,t){for(t=t.child;t!==null;)U6(r,e,t),t=t.sibling}function U6(r,e,t){if(Gg&&typeof Gg.onCommitFiberUnmount=="function")try{Gg.onCommitFiberUnmount(LA,t)}catch{}switch(t.tag){case 5:yd||VT(t,e);case 6:var i=Lh,s=Jm;Lh=null,T0(r,e,t),Lh=i,Jm=s,Lh!==null&&(Jm?(r=Lh,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):Lh.removeChild(t.stateNode));break;case 18:Lh!==null&&(Jm?(r=Lh,t=t.stateNode,r.nodeType===8?jR(r.parentNode,t):r.nodeType===1&&jR(r,t),pS(r)):jR(Lh,t.stateNode));break;case 4:i=Lh,s=Jm,Lh=t.stateNode.containerInfo,Jm=!0,T0(r,e,t),Lh=i,Jm=s;break;case 0:case 11:case 14:case 15:if(!yd&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&aN(t,e,l),s=s.next}while(s!==i)}T0(r,e,t);break;case 1:if(!yd&&(VT(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(u){ru(t,e,u)}T0(r,e,t);break;case 21:T0(r,e,t);break;case 22:t.mode&1?(yd=(i=yd)||t.memoizedState!==null,T0(r,e,t),yd=i):T0(r,e,t);break;default:T0(r,e,t)}}function s3(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new iK),e.forEach(function(i){var s=fK.bind(null,r,i);t.has(i)||(t.add(i),i.then(s,s))})}}function Um(r,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var o=r,l=e,u=l;e:for(;u!==null;){switch(u.tag){case 5:Lh=u.stateNode,Jm=!1;break e;case 3:Lh=u.stateNode.containerInfo,Jm=!0;break e;case 4:Lh=u.stateNode.containerInfo,Jm=!0;break e}u=u.return}if(Lh===null)throw Error(un(160));U6(o,l,s),Lh=null,Jm=!1;var h=s.alternate;h!==null&&(h.return=null),s.return=null}catch(p){ru(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)z6(e,r),e=e.sibling}function z6(r,e){var t=r.alternate,i=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Um(e,r),Rg(r),i&4){try{Y$(3,r,r.return),HA(3,r)}catch(x){ru(r,r.return,x)}try{Y$(5,r,r.return)}catch(x){ru(r,r.return,x)}}break;case 1:Um(e,r),Rg(r),i&512&&t!==null&&VT(t,t.return);break;case 5:if(Um(e,r),Rg(r),i&512&&t!==null&&VT(t,t.return),r.flags&32){var s=r.stateNode;try{uS(s,"")}catch(x){ru(r,r.return,x)}}if(i&4&&(s=r.stateNode,s!=null)){var o=r.memoizedProps,l=t!==null?t.memoizedProps:o,u=r.type,h=r.updateQueue;if(r.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&l5(s,o),LL(u,l);var p=LL(u,o);for(l=0;l<h.length;l+=2){var m=h[l],_=h[l+1];m==="style"?p5(s,_):m==="dangerouslySetInnerHTML"?h5(s,_):m==="children"?uS(s,_):Y2(s,m,_,p)}switch(u){case"input":AL(s,o);break;case"textarea":u5(s,o);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?ZT(s,!!o.multiple,E,!1):v!==!!o.multiple&&(o.defaultValue!=null?ZT(s,!!o.multiple,o.defaultValue,!0):ZT(s,!!o.multiple,o.multiple?[]:"",!1))}s[vS]=o}catch(x){ru(r,r.return,x)}}break;case 6:if(Um(e,r),Rg(r),i&4){if(r.stateNode===null)throw Error(un(162));s=r.stateNode,o=r.memoizedProps;try{s.nodeValue=o}catch(x){ru(r,r.return,x)}}break;case 3:if(Um(e,r),Rg(r),i&4&&t!==null&&t.memoizedState.isDehydrated)try{pS(e.containerInfo)}catch(x){ru(r,r.return,x)}break;case 4:Um(e,r),Rg(r);break;case 13:Um(e,r),Rg(r),s=r.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(CD=Nu())),i&4&&s3(r);break;case 22:if(m=t!==null&&t.memoizedState!==null,r.mode&1?(yd=(p=yd)||m,Um(e,r),yd=p):Um(e,r),Rg(r),i&8192){if(p=r.memoizedState!==null,(r.stateNode.isHidden=p)&&!m&&r.mode&1)for(Fn=r,m=r.child;m!==null;){for(_=Fn=m;Fn!==null;){switch(v=Fn,E=v.child,v.tag){case 0:case 11:case 14:case 15:Y$(4,v,v.return);break;case 1:VT(v,v.return);var w=v.stateNode;if(typeof w.componentWillUnmount=="function"){i=v,t=v.return;try{e=i,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(x){ru(i,t,x)}}break;case 5:VT(v,v.return);break;case 22:if(v.memoizedState!==null){a3(_);continue}}E!==null?(E.return=v,Fn=E):a3(_)}m=m.sibling}e:for(m=null,_=r;;){if(_.tag===5){if(m===null){m=_;try{s=_.stateNode,p?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=_.stateNode,h=_.memoizedProps.style,l=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=d5("display",l))}catch(x){ru(r,r.return,x)}}}else if(_.tag===6){if(m===null)try{_.stateNode.nodeValue=p?"":_.memoizedProps}catch(x){ru(r,r.return,x)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===r)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;m===_&&(m=null),_=_.return}m===_&&(m=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:Um(e,r),Rg(r),i&4&&s3(r);break;case 21:break;default:Um(e,r),Rg(r)}}function Rg(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(F6(t)){var i=t;break e}t=t.return}throw Error(un(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(uS(s,""),i.flags&=-33);var o=i3(r);cN(r,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,u=i3(r);uN(r,u,l);break;default:throw Error(un(161))}}catch(h){ru(r,r.return,h)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function oK(r,e,t){Fn=r,H6(r)}function H6(r,e,t){for(var i=(r.mode&1)!==0;Fn!==null;){var s=Fn,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||yx;if(!l){var u=s.alternate,h=u!==null&&u.memoizedState!==null||yd;u=yx;var p=yd;if(yx=l,(yd=h)&&!p)for(Fn=s;Fn!==null;)l=Fn,h=l.child,l.tag===22&&l.memoizedState!==null?l3(s):h!==null?(h.return=l,Fn=h):l3(s);for(;o!==null;)Fn=o,H6(o),o=o.sibling;Fn=s,yx=u,yd=p}o3(r)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Fn=o):o3(r)}}function o3(r){for(;Fn!==null;){var e=Fn;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yd||HA(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!yd)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Km(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&GF(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}GF(e,l,t)}break;case 5:var u=e.stateNode;if(t===null&&e.flags&4){t=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&t.focus();break;case"img":h.src&&(t.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var m=p.memoizedState;if(m!==null){var _=m.dehydrated;_!==null&&pS(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(un(163))}yd||e.flags&512&&lN(e)}catch(v){ru(e,e.return,v)}}if(e===r){Fn=null;break}if(t=e.sibling,t!==null){t.return=e.return,Fn=t;break}Fn=e.return}}function a3(r){for(;Fn!==null;){var e=Fn;if(e===r){Fn=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Fn=t;break}Fn=e.return}}function l3(r){for(;Fn!==null;){var e=Fn;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{HA(4,e)}catch(h){ru(e,t,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(h){ru(e,s,h)}}var o=e.return;try{lN(e)}catch(h){ru(e,o,h)}break;case 5:var l=e.return;try{lN(e)}catch(h){ru(e,l,h)}}}catch(h){ru(e,e.return,h)}if(e===r){Fn=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Fn=u;break}Fn=e.return}}var aK=Math.ceil,nA=J_.ReactCurrentDispatcher,wD=J_.ReactCurrentOwner,hm=J_.ReactCurrentBatchConfig,cs=0,oh=null,ac=null,Bh=0,uf=0,jT=vv(0),Lc=0,SS=null,Qy=0,GA=0,xD=0,K$=null,Mp=null,CD=0,g1=1/0,k_=null,rA=!1,hN=null,rv=null,bx=!1,Y0=null,iA=0,J$=0,dN=null,hM=-1,dM=0;function qd(){return cs&6?Nu():hM!==-1?hM:hM=Nu()}function iv(r){return r.mode&1?cs&2&&Bh!==0?Bh&-Bh:WY.transition!==null?(dM===0&&(dM=w5()),dM):(r=uo,r!==0||(r=window.event,r=r===void 0?16:k5(r.type)),r):1}function ig(r,e,t,i){if(50<J$)throw J$=0,dN=null,Error(un(185));sw(r,t,i),(!(cs&2)||r!==oh)&&(r===oh&&(!(cs&2)&&(GA|=t),Lc===4&&j0(r,Bh)),Lp(r,i),t===1&&cs===0&&!(e.mode&1)&&(g1=Nu()+500,FA&&yv()))}function Lp(r,e){var t=r.callbackNode;WX(r,e);var i=zM(r,r===oh?Bh:0);if(i===0)t!==null&&_F(t),r.callbackNode=null,r.callbackPriority=0;else if(e=i&-i,r.callbackPriority!==e){if(t!=null&&_F(t),e===1)r.tag===0?GY(u3.bind(null,r)):Q5(u3.bind(null,r)),FY(function(){!(cs&6)&&yv()}),t=null;else{switch(x5(i)){case 1:t=Z2;break;case 4:t=$5;break;case 16:t=UM;break;case 536870912:t=S5;break;default:t=UM}t=J6(t,G6.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function G6(r,e){if(hM=-1,dM=0,cs&6)throw Error(un(327));var t=r.callbackNode;if(i1()&&r.callbackNode!==t)return null;var i=zM(r,r===oh?Bh:0);if(i===0)return null;if(i&30||i&r.expiredLanes||e)e=sA(r,i);else{e=i;var s=cs;cs|=2;var o=V6();(oh!==r||Bh!==e)&&(k_=null,g1=Nu()+500,By(r,e));do try{cK();break}catch(u){W6(r,u)}while(!0);dD(),nA.current=o,cs=s,ac!==null?e=0:(oh=null,Bh=0,e=Lc)}if(e!==0){if(e===2&&(s=FL(r),s!==0&&(i=s,e=pN(r,s))),e===1)throw t=SS,By(r,0),j0(r,i),Lp(r,Nu()),t;if(e===6)j0(r,i);else{if(s=r.current.alternate,!(i&30)&&!lK(s)&&(e=sA(r,i),e===2&&(o=FL(r),o!==0&&(i=o,e=pN(r,o))),e===1))throw t=SS,By(r,0),j0(r,i),Lp(r,Nu()),t;switch(r.finishedWork=s,r.finishedLanes=i,e){case 0:case 1:throw Error(un(345));case 2:dy(r,Mp,k_);break;case 3:if(j0(r,i),(i&130023424)===i&&(e=CD+500-Nu(),10<e)){if(zM(r,0)!==0)break;if(s=r.suspendedLanes,(s&i)!==i){qd(),r.pingedLanes|=r.suspendedLanes&s;break}r.timeoutHandle=XL(dy.bind(null,r,Mp,k_),e);break}dy(r,Mp,k_);break;case 4:if(j0(r,i),(i&4194240)===i)break;for(e=r.eventTimes,s=-1;0<i;){var l=31-rg(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=Nu()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*aK(i/1960))-i,10<i){r.timeoutHandle=XL(dy.bind(null,r,Mp,k_),i);break}dy(r,Mp,k_);break;case 5:dy(r,Mp,k_);break;default:throw Error(un(329))}}}return Lp(r,Nu()),r.callbackNode===t?G6.bind(null,r):null}function pN(r,e){var t=K$;return r.current.memoizedState.isDehydrated&&(By(r,e).flags|=256),r=sA(r,e),r!==2&&(e=Mp,Mp=t,e!==null&&fN(e)),r}function fN(r){Mp===null?Mp=r:Mp.push.apply(Mp,r)}function lK(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],o=s.getSnapshot;s=s.value;try{if(!ag(o(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function j0(r,e){for(e&=~xD,e&=~GA,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-rg(e),i=1<<t;r[t]=-1,e&=~i}}function u3(r){if(cs&6)throw Error(un(327));i1();var e=zM(r,0);if(!(e&1))return Lp(r,Nu()),null;var t=sA(r,e);if(r.tag!==0&&t===2){var i=FL(r);i!==0&&(e=i,t=pN(r,i))}if(t===1)throw t=SS,By(r,0),j0(r,e),Lp(r,Nu()),t;if(t===6)throw Error(un(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,dy(r,Mp,k_),Lp(r,Nu()),null}function MD(r,e){var t=cs;cs|=1;try{return r(e)}finally{cs=t,cs===0&&(g1=Nu()+500,FA&&yv())}}function qy(r){Y0!==null&&Y0.tag===0&&!(cs&6)&&i1();var e=cs;cs|=1;var t=hm.transition,i=uo;try{if(hm.transition=null,uo=1,r)return r()}finally{uo=i,hm.transition=t,cs=e,!(cs&6)&&yv()}}function AD(){uf=jT.current,Aa(jT)}function By(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,PY(t)),ac!==null)for(t=ac.return;t!==null;){var i=t;switch(uD(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&jM();break;case 3:f1(),Aa(kp),Aa($d),vD();break;case 5:_D(i);break;case 4:f1();break;case 13:Aa(wl);break;case 19:Aa(wl);break;case 10:pD(i.type._context);break;case 22:case 23:AD()}t=t.return}if(oh=r,ac=r=sv(r.current,null),Bh=uf=e,Lc=0,SS=null,xD=GA=Qy=0,Mp=K$=null,Sy!==null){for(e=0;e<Sy.length;e++)if(t=Sy[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,o=t.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}t.pending=i}Sy=null}return r}function W6(r,e){do{var t=ac;try{if(dD(),lM.current=tA,eA){for(var i=Ml.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}eA=!1}if(Jy=0,sh=kc=Ml=null,X$=!1,TS=0,wD.current=null,t===null||t.return===null){Lc=1,SS=e,ac=null;break}e:{var o=r,l=t.return,u=t,h=e;if(e=Bh,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var p=h,m=u,_=m.tag;if(!(m.mode&1)&&(_===0||_===11||_===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var E=JF(l);if(E!==null){E.flags&=-257,QF(E,l,u,o,e),E.mode&1&&KF(o,p,e),e=E,h=p;var w=e.updateQueue;if(w===null){var x=new Set;x.add(h),e.updateQueue=x}else w.add(h);break e}else{if(!(e&1)){KF(o,p,e),ID();break e}h=Error(un(426))}}else if(Za&&u.mode&1){var A=JF(l);if(A!==null){!(A.flags&65536)&&(A.flags|=256),QF(A,l,u,o,e),cD(m1(h,u));break e}}o=h=m1(h,u),Lc!==4&&(Lc=2),K$===null?K$=[o]:K$.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var O=C6(o,h,e);HF(o,O);break e;case 1:u=h;var k=o.type,D=o.stateNode;if(!(o.flags&128)&&(typeof k.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(rv===null||!rv.has(D)))){o.flags|=65536,e&=-e,o.lanes|=e;var N=M6(o,u,e);HF(o,N);break e}}o=o.return}while(o!==null)}X6(t)}catch(F){e=F,ac===t&&t!==null&&(ac=t=t.return);continue}break}while(!0)}function V6(){var r=nA.current;return nA.current=tA,r===null?tA:r}function ID(){(Lc===0||Lc===3||Lc===2)&&(Lc=4),oh===null||!(Qy&268435455)&&!(GA&268435455)||j0(oh,Bh)}function sA(r,e){var t=cs;cs|=2;var i=V6();(oh!==r||Bh!==e)&&(k_=null,By(r,e));do try{uK();break}catch(s){W6(r,s)}while(!0);if(dD(),cs=t,nA.current=i,ac!==null)throw Error(un(261));return oh=null,Bh=0,Lc}function uK(){for(;ac!==null;)j6(ac)}function cK(){for(;ac!==null&&!NX();)j6(ac)}function j6(r){var e=K6(r.alternate,r,uf);r.memoizedProps=r.pendingProps,e===null?X6(r):ac=e,wD.current=null}function X6(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&32768){if(t=rK(t,e),t!==null){t.flags&=32767,ac=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Lc=6,ac=null;return}}else if(t=nK(t,e,uf),t!==null){ac=t;return}if(e=e.sibling,e!==null){ac=e;return}ac=e=r}while(e!==null);Lc===0&&(Lc=5)}function dy(r,e,t){var i=uo,s=hm.transition;try{hm.transition=null,uo=1,hK(r,e,t,i)}finally{hm.transition=s,uo=i}return null}function hK(r,e,t,i){do i1();while(Y0!==null);if(cs&6)throw Error(un(327));t=r.finishedWork;var s=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(un(177));r.callbackNode=null,r.callbackPriority=0;var o=t.lanes|t.childLanes;if(VX(r,o),r===oh&&(ac=oh=null,Bh=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||bx||(bx=!0,J6(UM,function(){return i1(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=hm.transition,hm.transition=null;var l=uo;uo=1;var u=cs;cs|=4,wD.current=null,sK(r,t),z6(t,r),RY(VL),HM=!!WL,VL=WL=null,r.current=t,oK(t),DX(),cs=u,uo=l,hm.transition=o}else r.current=t;if(bx&&(bx=!1,Y0=r,iA=s),o=r.pendingLanes,o===0&&(rv=null),FX(t.stateNode),Lp(r,Nu()),e!==null)for(i=r.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(rA)throw rA=!1,r=hN,hN=null,r;return iA&1&&r.tag!==0&&i1(),o=r.pendingLanes,o&1?r===dN?J$++:(J$=0,dN=r):J$=0,yv(),null}function i1(){if(Y0!==null){var r=x5(iA),e=hm.transition,t=uo;try{if(hm.transition=null,uo=16>r?16:r,Y0===null)var i=!1;else{if(r=Y0,Y0=null,iA=0,cs&6)throw Error(un(331));var s=cs;for(cs|=4,Fn=r.current;Fn!==null;){var o=Fn,l=o.child;if(Fn.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var p=u[h];for(Fn=p;Fn!==null;){var m=Fn;switch(m.tag){case 0:case 11:case 15:Y$(8,m,o)}var _=m.child;if(_!==null)_.return=m,Fn=_;else for(;Fn!==null;){m=Fn;var v=m.sibling,E=m.return;if(P6(m),m===p){Fn=null;break}if(v!==null){v.return=E,Fn=v;break}Fn=E}}}var w=o.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var A=x.sibling;x.sibling=null,x=A}while(x!==null)}}Fn=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,Fn=l;else e:for(;Fn!==null;){if(o=Fn,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Y$(9,o,o.return)}var O=o.sibling;if(O!==null){O.return=o.return,Fn=O;break e}Fn=o.return}}var k=r.current;for(Fn=k;Fn!==null;){l=Fn;var D=l.child;if(l.subtreeFlags&2064&&D!==null)D.return=l,Fn=D;else e:for(l=k;Fn!==null;){if(u=Fn,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:HA(9,u)}}catch(F){ru(u,u.return,F)}if(u===l){Fn=null;break e}var N=u.sibling;if(N!==null){N.return=u.return,Fn=N;break e}Fn=u.return}}if(cs=s,yv(),Gg&&typeof Gg.onPostCommitFiberRoot=="function")try{Gg.onPostCommitFiberRoot(LA,r)}catch{}i=!0}return i}finally{uo=t,hm.transition=e}}return!1}function c3(r,e,t){e=m1(t,e),e=C6(r,e,1),r=nv(r,e,1),e=qd(),r!==null&&(sw(r,1,e),Lp(r,e))}function ru(r,e,t){if(r.tag===3)c3(r,r,t);else for(;e!==null;){if(e.tag===3){c3(e,r,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(rv===null||!rv.has(i))){r=m1(t,r),r=M6(e,r,1),e=nv(e,r,1),r=qd(),e!==null&&(sw(e,1,r),Lp(e,r));break}}e=e.return}}function dK(r,e,t){var i=r.pingCache;i!==null&&i.delete(e),e=qd(),r.pingedLanes|=r.suspendedLanes&t,oh===r&&(Bh&t)===t&&(Lc===4||Lc===3&&(Bh&130023424)===Bh&&500>Nu()-CD?By(r,0):xD|=t),Lp(r,e)}function Y6(r,e){e===0&&(r.mode&1?(e=cx,cx<<=1,!(cx&130023424)&&(cx=4194304)):e=1);var t=qd();r=j_(r,e),r!==null&&(sw(r,e,t),Lp(r,t))}function pK(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),Y6(r,t)}function fK(r,e){var t=0;switch(r.tag){case 13:var i=r.stateNode,s=r.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=r.stateNode;break;default:throw Error(un(314))}i!==null&&i.delete(e),Y6(r,t)}var K6;K6=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||kp.current)Ap=!0;else{if(!(r.lanes&t)&&!(e.flags&128))return Ap=!1,tK(r,e,t);Ap=!!(r.flags&131072)}else Ap=!1,Za&&e.flags&1048576&&q5(e,KM,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;cM(r,e),r=e.pendingProps;var s=h1(e,$d.current);r1(e,t),s=bD(null,e,i,r,s,t);var o=TD();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Op(i)?(o=!0,XM(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,mD(e),s.updater=UA,e.stateNode=s,s._reactInternals=e,eN(e,i,r,t),e=rN(null,e,i,!0,o,t)):(e.tag=0,Za&&o&&lD(e),Vd(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(cM(r,e),r=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=gK(i),r=Km(i,r),s){case 0:e=nN(null,e,i,r,t);break e;case 1:e=e3(null,e,i,r,t);break e;case 11:e=qF(null,e,i,r,t);break e;case 14:e=ZF(null,e,i,Km(i.type,r),t);break e}throw Error(un(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Km(i,s),nN(r,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Km(i,s),e3(r,e,i,s,t);case 3:e:{if(k6(e),r===null)throw Error(un(387));i=e.pendingProps,o=e.memoizedState,s=o.element,n6(r,e),qM(e,i,null,t);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=m1(Error(un(423)),e),e=t3(r,e,i,t,s);break e}else if(i!==s){s=m1(Error(un(424)),e),e=t3(r,e,i,t,s);break e}else for(pf=tv(e.stateNode.containerInfo.firstChild),mf=e,Za=!0,Qm=null,t=o6(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(d1(),i===s){e=X_(r,e,t);break e}Vd(r,e,i,t)}e=e.child}return e;case 5:return a6(e),r===null&&QL(e),i=e.type,s=e.pendingProps,o=r!==null?r.memoizedProps:null,l=s.children,jL(i,s)?l=null:o!==null&&jL(i,o)&&(e.flags|=32),R6(r,e),Vd(r,e,l,t),e.child;case 6:return r===null&&QL(e),null;case 13:return O6(r,e,t);case 4:return gD(e,e.stateNode.containerInfo),i=e.pendingProps,r===null?e.child=p1(e,null,i,t):Vd(r,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Km(i,s),qF(r,e,i,s,t);case 7:return Vd(r,e,e.pendingProps,t),e.child;case 8:return Vd(r,e,e.pendingProps.children,t),e.child;case 12:return Vd(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,sa(JM,i._currentValue),i._currentValue=l,o!==null)if(ag(o.value,l)){if(o.children===s.children&&!kp.current){e=X_(r,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){l=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=z_(-1,t&-t),h.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var m=p.pending;m===null?h.next=h:(h.next=m.next,m.next=h),p.pending=h}}o.lanes|=t,h=o.alternate,h!==null&&(h.lanes|=t),qL(o.return,t,e),u.lanes|=t;break}h=h.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(un(341));l.lanes|=t,u=l.alternate,u!==null&&(u.lanes|=t),qL(l,t,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Vd(r,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,r1(e,t),s=dm(s),i=i(s),e.flags|=1,Vd(r,e,i,t),e.child;case 14:return i=e.type,s=Km(i,e.pendingProps),s=Km(i.type,s),ZF(r,e,i,s,t);case 15:return A6(r,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Km(i,s),cM(r,e),e.tag=1,Op(i)?(r=!0,XM(e)):r=!1,r1(e,t),i6(e,i,s),eN(e,i,s,t),rN(null,e,i,!0,r,t);case 19:return L6(r,e,t);case 22:return I6(r,e,t)}throw Error(un(156,e.tag))};function J6(r,e){return E5(r,e)}function mK(r,e,t,i){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cm(r,e,t,i){return new mK(r,e,t,i)}function RD(r){return r=r.prototype,!(!r||!r.isReactComponent)}function gK(r){if(typeof r=="function")return RD(r)?1:0;if(r!=null){if(r=r.$$typeof,r===J2)return 11;if(r===Q2)return 14}return 2}function sv(r,e){var t=r.alternate;return t===null?(t=cm(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function pM(r,e,t,i,s,o){var l=2;if(i=r,typeof r=="function")RD(r)&&(l=1);else if(typeof r=="string")l=5;else e:switch(r){case DT:return Py(t.children,s,o,e);case K2:l=8,s|=8;break;case SL:return r=cm(12,t,e,s|2),r.elementType=SL,r.lanes=o,r;case wL:return r=cm(13,t,e,s),r.elementType=wL,r.lanes=o,r;case xL:return r=cm(19,t,e,s),r.elementType=xL,r.lanes=o,r;case s5:return WA(t,s,o,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case r5:l=10;break e;case i5:l=9;break e;case J2:l=11;break e;case Q2:l=14;break e;case H0:l=16,i=null;break e}throw Error(un(130,r==null?r:typeof r,""))}return e=cm(l,t,e,s),e.elementType=r,e.type=i,e.lanes=o,e}function Py(r,e,t,i){return r=cm(7,r,i,e),r.lanes=t,r}function WA(r,e,t,i){return r=cm(22,r,i,e),r.elementType=s5,r.lanes=t,r.stateNode={isHidden:!1},r}function ek(r,e,t){return r=cm(6,r,null,e),r.lanes=t,r}function tk(r,e,t){return e=cm(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function _K(r,e,t,i,s){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=NR(0),this.expirationTimes=NR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=NR(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function kD(r,e,t,i,s,o,l,u,h){return r=new _K(r,e,t,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=cm(3,null,null,e),r.current=o,o.stateNode=r,o.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},mD(o),r}function vK(r,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:NT,key:i==null?null:""+i,children:r,containerInfo:e,implementation:t}}function Q6(r){if(!r)return cv;r=r._reactInternals;e:{if(ab(r)!==r||r.tag!==1)throw Error(un(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Op(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(un(171))}if(r.tag===1){var t=r.type;if(Op(t))return J5(r,t,e)}return e}function q6(r,e,t,i,s,o,l,u,h){return r=kD(t,i,!0,r,s,o,l,u,h),r.context=Q6(null),t=r.current,i=qd(),s=iv(t),o=z_(i,s),o.callback=e??null,nv(t,o,s),r.current.lanes=s,sw(r,s,i),Lp(r,i),r}function VA(r,e,t,i){var s=e.current,o=qd(),l=iv(s);return t=Q6(t),e.context===null?e.context=t:e.pendingContext=t,e=z_(o,l),e.payload={element:r},i=i===void 0?null:i,i!==null&&(e.callback=i),r=nv(s,e,l),r!==null&&(ig(r,s,l,o),aM(r,s,l)),l}function oA(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function h3(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function OD(r,e){h3(r,e),(r=r.alternate)&&h3(r,e)}function yK(){return null}var Z6=typeof reportError=="function"?reportError:function(r){console.error(r)};function LD(r){this._internalRoot=r}jA.prototype.render=LD.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(un(409));VA(r,e,null,null)};jA.prototype.unmount=LD.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;qy(function(){VA(null,r,null,null)}),e[V_]=null}};function jA(r){this._internalRoot=r}jA.prototype.unstable_scheduleHydration=function(r){if(r){var e=A5();r={blockedOn:null,target:r,priority:e};for(var t=0;t<V0.length&&e!==0&&e<V0[t].priority;t++);V0.splice(t,0,r),t===0&&R5(r)}};function ND(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function XA(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function d3(){}function bK(r,e,t,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var p=oA(l);o.call(p)}}var l=q6(e,i,r,0,null,!1,!1,"",d3);return r._reactRootContainer=l,r[V_]=l.current,gS(r.nodeType===8?r.parentNode:r),qy(),l}for(;s=r.lastChild;)r.removeChild(s);if(typeof i=="function"){var u=i;i=function(){var p=oA(h);u.call(p)}}var h=kD(r,0,!1,null,null,!1,!1,"",d3);return r._reactRootContainer=h,r[V_]=h.current,gS(r.nodeType===8?r.parentNode:r),qy(function(){VA(e,h,t,i)}),h}function YA(r,e,t,i,s){var o=t._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var u=s;s=function(){var h=oA(l);u.call(h)}}VA(e,l,r,s)}else l=bK(t,e,r,s,i);return oA(l)}C5=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=O$(e.pendingLanes);t!==0&&(eD(e,t|1),Lp(e,Nu()),!(cs&6)&&(g1=Nu()+500,yv()))}break;case 13:qy(function(){var i=j_(r,1);if(i!==null){var s=qd();ig(i,r,1,s)}}),OD(r,1)}};tD=function(r){if(r.tag===13){var e=j_(r,134217728);if(e!==null){var t=qd();ig(e,r,134217728,t)}OD(r,134217728)}};M5=function(r){if(r.tag===13){var e=iv(r),t=j_(r,e);if(t!==null){var i=qd();ig(t,r,e,i)}OD(r,e)}};A5=function(){return uo};I5=function(r,e){var t=uo;try{return uo=r,e()}finally{uo=t}};DL=function(r,e,t){switch(e){case"input":if(AL(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==r&&i.form===r.form){var s=PA(i);if(!s)throw Error(un(90));a5(i),AL(i,s)}}}break;case"textarea":u5(r,t);break;case"select":e=t.value,e!=null&&ZT(r,!!t.multiple,e,!1)}};g5=MD;_5=qy;var TK={usingClientEntryPoint:!1,Events:[aw,UT,PA,f5,m5,MD]},QE={findFiberByHostInstance:$y,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},EK={bundleType:QE.bundleType,version:QE.version,rendererPackageName:QE.rendererPackageName,rendererConfig:QE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J_.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=b5(r),r===null?null:r.stateNode},findFiberByHostInstance:QE.findFiberByHostInstance||yK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tx.isDisabled&&Tx.supportsFiber)try{LA=Tx.inject(EK),Gg=Tx}catch{}}Sf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TK;Sf.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ND(e))throw Error(un(200));return vK(r,e,null,t)};Sf.createRoot=function(r,e){if(!ND(r))throw Error(un(299));var t=!1,i="",s=Z6;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=kD(r,1,!1,null,null,t,!1,i,s),r[V_]=e.current,gS(r.nodeType===8?r.parentNode:r),new LD(e)};Sf.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(un(188)):(r=Object.keys(r).join(","),Error(un(268,r)));return r=b5(e),r=r===null?null:r.stateNode,r};Sf.flushSync=function(r){return qy(r)};Sf.hydrate=function(r,e,t){if(!XA(e))throw Error(un(200));return YA(null,r,e,!0,t)};Sf.hydrateRoot=function(r,e,t){if(!ND(r))throw Error(un(405));var i=t!=null&&t.hydratedSources||null,s=!1,o="",l=Z6;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),e=q6(e,null,r,1,t??null,s,!1,o,l),r[V_]=e.current,gS(r),i)for(r=0;r<i.length;r++)t=i[r],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new jA(e)};Sf.render=function(r,e,t){if(!XA(e))throw Error(un(200));return YA(null,r,e,!1,t)};Sf.unmountComponentAtNode=function(r){if(!XA(r))throw Error(un(40));return r._reactRootContainer?(qy(function(){YA(null,null,r,!1,function(){r._reactRootContainer=null,r[V_]=null})}),!0):!1};Sf.unstable_batchedUpdates=MD;Sf.unstable_renderSubtreeIntoContainer=function(r,e,t,i){if(!XA(t))throw Error(un(200));if(r==null||r._reactInternals===void 0)throw Error(un(38));return YA(r,e,t,!1,i)};Sf.version="18.2.0-next-9e3b772b8-20220608";function eW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eW)}catch(r){console.error(r)}}eW(),qG.exports=Sf;var DD=qG.exports;const Ex=U1(DD);var p3=DD;EL.createRoot=p3.createRoot,EL.hydrateRoot=p3.hydrateRoot;var tW={exports:{}},nk={exports:{}},rk={exports:{}},ik={exports:{}},sk={exports:{}},f3;function BD(){return f3||(f3=1,function(r,e){(function(t,i){r.exports=i()})(Ed,function(){var t={},i,s,o,l,u,h,p,m,_,v,E,w,x,A,O,k,D,N,F,z,V,U,ee,ne,ie,se,fe,ae,he,ge,Ie,j,te,q,le,_e,Le,xe,Ve,Re,Ze,et,ct,rt,Ne,we,ze,it,nt,Mt,At,ht,Et,wt,pt,be,Z,ke,lt,mt,xt,ut,He,Ce,X,J,oe,$e,Ge,Bt,Pe,Wt,st,Ut,Pt,Tn,Mr,nr,ai,ar,Qn,Q,me,De,qe,It,qt,gn,Ae,at,bt,dt,Dt,xn,Bn,er,mr,Qr,yr,wr,Gi,Fo,wo,nl,Yt,lr,oa,Uo,hs,ds,li,ur,pn,ir,Tr,qn,ui,Ji,Gr,Di,Ia,rl,cc,Uu,Cs,xo,su,Ll,uh,zo,Zn,Bi,Bc,ch,hc,il,ou,sl,ol,Yn,Kn,al,Ra,aa,Nl,bi,Pi,ll,wd,Ms,au,Co,Dl,Wr,cr,Wi,As,lu,Bl,Pc,Ho,Go,uu,Vr,ps,Ci,qr,la,Fi,cu,qs,hu,ka,ci,Zr,Un,jr,Ti,Uh,du,fs,ul,zh,hi,pu,sp,op,hh,ap,Bp,Rf,lp,zu,Zs,fu,dh,ua,Ur,sr,Us,Wo,Mo,mu,cl,Hh,Ei,di,or,$i,Vo,Pl,up,cp,Gh,gu,Hu,dc,ph,pc,Fl,jo,Gu,fh,fc,mc,ms,Xr,hl,Xo,dl,Ul,Fc,xd,pi,je,Rt,yt,mn,Nn,Jn,tr,An,xr,Is,gs,po,ca,Vi,ss,gc,Lr,Ao,Rs,zs,Yo,mh,Uc,gh,_u,Wh,Vh,pl,jh,_c,zc,Cd,Oa,ha,vu,_h,ei,Xh,Hc,Wu,vh,Md,fl,Ad,yh,eo,Ko,kf,Pp,ml,gl,vc,bh,Yh,Vu,La,ju,Kh,yc,bc,Xu,Id,Jo,Er,zl,Qi,Qo,ve,Hs,Na,Br,zn,Fp,da,Yr,fi,Si,Mi,Tc,Io,Ro,to,Ec,fo,Rd,kd,Th,pa,Cn,os,_s,ti,_l,vl,cn,Pr,qi,Up,Gc,ks,ko,dn,rn,Da,Yu,Of,yu,qo,as,fa,Ui,ma,bu,Od,Ku,Gs,Ld,Wc,Jh,ga,yl,zp,Hl,Tu,Qh,$c,ls,Eu,Ju,mo,Ba,vs,no,Vc,Ws,Pa,Qu,hp,jc,Zo,mi,wn,On,gr,Ir,Fr,Vs,Ai,zi,Gl,$u,qu,Su,Os,ro,qh,_a,wu,xu,js,go,Fa,_o,Zu,Cu,Eh,Xc,br,ji,ys,ea,Ls,Gn,Sc,on;i=function(n,a,d,b){if(!(n instanceof Lt)&&typeof n!="string"||`${n}`.trim()==="")throw Error('Invalid type "'+n+'". The type must be a non-empty string or a Blockly.registry.Type.');if(n=`${n}`.toLowerCase(),typeof a!="string"||a.trim()==="")throw Error('Invalid name "'+a+'". The name must be a non-empty string.');const R=a.toLowerCase();if(!d)throw Error("Can not register a null value");let G=ni[n],ce=bl[n];if(G||(G=ni[n]=Object.create(null),ce=bl[n]=Object.create(null)),s(n,d),!b&&G[R])throw Error('Name "'+R+'" with type "'+n+'" already registered.');G[R]=d,ce[R]=a},s=function(n,a){switch(n){case String(Lt.FIELD):if(typeof a.fromJson!="function")throw Error('Type "'+n+'" must have a fromJson function')}},o=function(n,a){n=`${n}`.toLowerCase(),a=a.toLowerCase();const d=ni[n];d&&d[a]?(delete ni[n][a],delete bl[n][a]):console.warn("Unable to unregister ["+a+"]["+n+"] from the registry.")},l=function(n,a,d){n=`${n}`.toLowerCase(),a=a.toLowerCase();const b=ni[n];if(!b||!b[a]){if(a="Unable to find ["+a+"]["+n+"] in the registry.",d)throw Error(a+" You must require or register a "+n+" plugin.");return console.warn(a),null}return b[a]},u=function(n,a){return n=`${n}`.toLowerCase(),a=a.toLowerCase(),(n=ni[n])?!!n[a]:!1},h=function(n,a,d){return l(n,a,d)},p=function(n,a,d){return l(n,a,d)},m=function(n,a,d){n=`${n}`.toLowerCase();var b=ni[n];if(!b){if(b=`Unable to find [${n}] in the registry.`,d)throw Error(`${b} You must require or register a ${n} plugin.`);return console.warn(b),null}if(!a)return b;n=bl[n],d=Object.create(null);for(const R of Object.keys(b))d[n[R]]=b[R];return d},_=function(n,a,d){return a=a.plugins[String(n)]||Ua,typeof a=="function"?a:h(n,a,d)},v=function(n){return wc[n]||null},E=function(){const n=[];for(const a in wc)n.push(wc[a]);return n},w=function(n){wc[n.id]=n},x=function(n){delete wc[n.id]},A=function(){return Zh},O=function(n){Zh=n},k=function(){return Yc},D=function(n){Yc=n},N=function(){return es},F=function(n){es=n},z=function(n){for(;n.options.parentWorkspace;)n=n.options.parentWorkspace;const a=n.getParentSvg(),d=n.getCachedParentSvgSize();var b=a.parentElement;if(b instanceof HTMLElement){var R=b.offsetWidth;b=b.offsetHeight,d.width!==R&&(a.setAttribute("width",R+"px"),n.setCachedParentSvgSize(R,null)),d.height!==b&&(a.setAttribute("height",b+"px"),n.setCachedParentSvgSize(null,b)),n.resize()}},V=function(n,a){const d=Object.create(null),b=n.getDescendants(!0);a&&(n=n.getNextBlock())&&(n=b.indexOf(n),b.splice(n,b.length-n));for(let R=0,G;G=b[R];R++)d[G.type]?d[G.type]++:d[G.type]=1;return d},U=function(n){return function(){this.jsonInit(n)}},ee=function(n){$h.defineBlocksWithJsonArrayInternal(n)},ne=function(n){t.defineBlocks$$module$build$src$core$common(t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(n))},t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(n){const a={};for(let d=0;d<n.length;d++){const b=n[d];if(!b){console.warn(`Block definition #${d} in JSON array is ${b}. Skipping`);continue}const R=b.type;R?a[R]={init:U(b)}:console.warn(`Block definition #${d} in JSON array is missing a type attribute. Skipping.`)}return a},t.defineBlocks$$module$build$src$core$common=function(n){for(const a of Object.keys(n)){const d=n[a];a in Rr&&console.warn(`Block definiton "${a}" overwrites previous definition.`),Rr[a]=d}},ie=function(){return"blockly-"+(Jc++).toString(36)},se=function(){return Kc.genUid()},fe=function(n){Ys=n},ae=function(){return Ys},he=function(n){Hp.fireInternal(n)},ge=function(n){if(q()){if(!xc.length)try{requestAnimationFrame(()=>{setTimeout(Ie,0)})}catch{setTimeout(Ie,0)}xc.push(n)}},Ie=function(){var n=j(xc,!0);xc.length=0;for(let d=0,b;b=n[d];d++)if(b.workspaceId){var a=v(b.workspaceId);a&&a.fireChangeListener(b)}n=new Set(n.map(d=>d.workspaceId));for(const d of n){if(!d||(n=v(d),!n))continue;n=n.getUndoStack();let b;for(a=n.length;0<a;a--){const R=n[a-1];if(R.group==="")break;if(b===void 0)b=R.group;else if(R.group!==b)break}b&&a!=n.length-1&&(a=n.splice(a,n.length-a),a=j(a,!0),n.push(...a))}},j=function(n,a){n=n.slice(),a||n.reverse();const d=[],b=Object.create(null);for(let ce=0,Oe;Oe=n[ce];ce++)if(!Oe.isNull()){var R=[Oe.isUiEvent?Zc:Oe.type,Oe.blockId,Oe.workspaceId].join(" "),G=b[R];const Nt=G?G.event:null;G?Oe.type===t.MOVE$$module$build$src$core$events$utils&&G.index===ce-1?(R=Oe,Nt.newParentId=R.newParentId,Nt.newInputName=R.newInputName,Nt.newCoordinate=R.newCoordinate,R.reason&&(Nt.reason?(R=new Set(R.reason.concat(Nt.reason)),Nt.reason=Array.from(R)):Nt.reason=R.reason),G.index=ce):Oe.type===t.CHANGE$$module$build$src$core$events$utils&&Oe.element===Nt.element&&Oe.name===Nt.name?Nt.newValue=Oe.newValue:Oe.type===ts?(G=Oe,Nt.viewTop=G.viewTop,Nt.viewLeft=G.viewLeft,Nt.scale=G.scale,Nt.oldScale=G.oldScale):(Oe.type!==Iu||Nt.type!==Ks)&&(b[R]={event:Oe,index:ce},d.push(Oe)):(b[R]={event:Oe,index:ce},d.push(Oe))}n=d.filter(function(ce){return!ce.isNull()}),a||n.reverse();for(let ce=1,Oe;Oe=n[ce];ce++)Oe.type===t.CHANGE$$module$build$src$core$events$utils&&Oe.element==="mutation"&&n.unshift(n.splice(ce,1)[0]);return n},te=function(){for(let n=0,a;a=xc[n];n++)a.recordUndo=!1},t.disable$$module$build$src$core$events$utils=function(){Mu++},t.enable$$module$build$src$core$events$utils=function(){Mu--},q=function(){return Mu===0},t.getGroup$$module$build$src$core$events$utils=function(){return vo},t.setGroup$$module$build$src$core$events$utils=function(n){Hp.setGroupInternal(n)},le=function(n){vo=typeof n=="boolean"?n?se():"":n},_e=function(n){const a=[];n=n.getDescendants(!1);for(let d=0,b;b=n[d];d++)a[d]=b.id;return a},Le=function(n,a){const d=xe(n.type);if(!d)throw Error("Unknown event type.");return d.fromJson(n,a)},xe=function(n){const a=h(Lt.EVENT,n);if(!a)throw Error(`Event type ${n} not found in registry.`);return a},Ve=function(n){if((n.type===t.MOVE$$module$build$src$core$events$utils||n.type===t.CREATE$$module$build$src$core$events$utils)&&n.workspaceId){var a=v(n.workspaceId);if(!n.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(n=a.getBlockById(n.blockId)){const d=Ys;try{Ys=!1;const b=n.getParent();if(b&&b.isEnabled()){const R=n.getDescendants(!1);for(let G=0,ce;ce=R[G];G++)ce.setEnabled(!0)}else if((n.outputConnection||n.previousConnection)&&!a.isDragging())do n.setEnabled(!1),n=n.getNextBlock();while(n)}finally{Ys=d}}}},Re=function(n,a){Ze(),We=setTimeout(function(){a&&a.handleRightClick(n)},L)},Ze=function(){We&&(clearTimeout(We),We=0)},et=function(){re=null},ct=function(n){return!n.type.startsWith("pointer")||n instanceof PointerEvent&&Ne(n)},rt=function(n){return`${n.pointerId}`},Ne=function(n){const a=rt(n);return re?re===a:n.type==="pointerdown"?(re=a,!0):!1},we=function(n,a,d,b,R){function G(Oe){(R||ct(Oe))&&(d?b.call(d,Oe):b(Oe))}const ce=[];if(a in Se)for(let Oe=0;Oe<Se[a].length;Oe++){const Nt=Se[a][Oe];n.addEventListener(Nt,G,!1),ce.push([n,Nt,G])}else n.addEventListener(a,G,!1),ce.push([n,a,G]);return ce},ze=function(n,a,d,b){function R(ce){d?b.call(d,ce):b(ce)}const G=[];if(a in Se)for(let ce=0;ce<Se[a].length;ce++){const Oe=Se[a][ce];n.addEventListener(Oe,R,!1),G.push([n,Oe,R])}else n.addEventListener(a,R,!1),G.push([n,a,R]);return G},it=function(n){const a=n[n.length-1][2];for(;n.length;){const[d,b,R]=n.pop();d.removeEventListener(b,R,!1)}return a},nt=function(n){if(n.target instanceof HTMLElement){if(n.target.isContentEditable||n.target.getAttribute("data-is-text-input")==="true")return!0;if(n.target instanceof HTMLInputElement)return n=n.target,n.type==="text"||n.type==="number"||n.type==="email"||n.type==="password"||n.type==="search"||n.type==="tel"||n.type==="url";if(n.target instanceof HTMLTextAreaElement)return!0}return!1},Mt=function(n){return n.ctrlKey&&hr?!0:n.button===2},At=function(n,a,d){const b=a.createSVGPoint();return b.x=n.clientX,b.y=n.clientY,d||(d=a.getScreenCTM().inverse()),b.matrixTransform(d)},ht=function(n){switch(n.deltaMode){default:return{x:n.deltaX,y:n.deltaY};case 1:return{x:n.deltaX*Gp,y:n.deltaY*Gp};case 2:return{x:n.deltaX*jn,y:n.deltaY*jn}}},Et=function(n,a){return a=n.indexOf(a),a===-1?!1:(n.splice(a,1),!0)},wt=function(n){if(Lf)throw Error("CSS already injected");rd+=`
`+n},pt=function(n,a){Lf||(Lf=!0,n&&(n=a.replace(/[\\/]$/,""),a=rd.replace(/<<<PATH>>>/g,n),rd="",n=document.createElement("style"),n.id="blockly-common-style",a=document.createTextNode(a),n.appendChild(a),document.head.insertBefore(n,document.head.firstChild)))},be=function(n,a,d,b){n=n+" was deprecated in "+a+" and will be deleted in "+d+".",b&&(n+=`
Use `+b+" instead."),e0.has(n)||(e0.add(n),console.warn(n))},Z=function(n,a,d){n=document.createElementNS(mg,`${n}`);for(const b in a)n.setAttribute(b,`${a[b]}`);return d&&d.appendChild(n),n},ke=function(n,a){return a=a.split(" "),a.every(d=>n.classList.contains(d))?!1:(n.classList.add(...a),!0)},lt=function(n,a){n.classList.remove(...a.split(" "))},mt=function(n,a){return a=a.split(" "),a.every(d=>!n.classList.contains(d))?!1:(n.classList.remove(...a),!0)},xt=function(n,a){return n.classList.contains(a)},ut=function(n){return n&&n.parentNode?n.parentNode.removeChild(n):null},He=function(n,a){const d=a.nextSibling;if(a=a.parentNode,!a)throw Error("Reference node has no parent.");d?a.insertBefore(n,d):a.appendChild(n)},Ce=function(n,a){return be("Blockly.utils.dom.containsNode","version 10","version 11",'Use native "contains" DOM method'),n.contains(a)},X=function(n,a){n.style.transform=a,n.style["-webkit-transform"]=a},J=function(){eh++,Nd||(Nd=Object.create(null))},oe=function(){eh--,eh||(Nd=null)},$e=function(n){const a=n.textContent+`
`+n.className.baseVal;let d;if(Nd&&(d=Nd[a]))return d;try{d=n.getComputedTextLength()}catch{return 8*n.textContent.length}return Nd&&(Nd[a]=d),d},Ge=function(n,a,d,b){return Bt(n,a+"pt",d,b)},Bt=function(n,a,d,b){const R=n.textContent;n=R+`
`+n.className.baseVal;var G;return Nd&&(G=Nd[n])||(Ii||(G=document.createElement("canvas"),G.className="blocklyComputeCanvas",document.body.appendChild(G),Ii=G.getContext("2d")),Ii.font=d+" "+a+" "+b,G=R?Ii.measureText(R).width:0,Nd&&(Nd[n]=G)),G},Pe=function(n,a,d,b){const R=document.createElement("span");R.style.font=d+" "+a+" "+b,R.textContent=n,n=document.createElement("div"),n.style.width="1px",n.style.height="0",a=document.createElement("div"),a.style.display="flex",a.style.position="fixed",a.style.top="0",a.style.left="0",a.appendChild(R),a.appendChild(n),document.body.appendChild(a),d={height:0,baseline:0};try{a.style.alignItems="baseline",d.baseline=n.offsetTop-R.offsetTop,a.style.alignItems="flex-end",d.height=n.offsetTop-R.offsetTop}finally{document.body.removeChild(a)}return d},Wt=function(n){return wv.getSizeInternal(n)},st=function(n){if(Pt(n,"display")!=="none")return Ut(n);const a=n.style,d=a.display,b=a.visibility,R=a.position;a.visibility="hidden",a.position="absolute",a.display="inline";const G=n.offsetWidth;return n=n.offsetHeight,a.display=d,a.position=R,a.visibility=b,new Es(G,n)},Ut=function(n){return new Es(n.offsetWidth,n.offsetHeight)},Pt=function(n,a){return n=window.getComputedStyle(n),n[a]||n.getPropertyValue(a)},Tn=function(n){const a=new tn(0,0);n=n.getBoundingClientRect();var d=document.documentElement;return d=new tn(window.pageXOffset||d.scrollLeft,window.pageYOffset||d.scrollTop),a.x=n.left+d.x,a.y=n.top+d.y,a},Mr=function(){const n=document.body,a=document.documentElement;return new tn(n.scrollLeft||a.scrollLeft,n.scrollTop||a.scrollTop)},nr=function(n){const a=parseFloat(Pt(n,"borderLeftWidth")),d=parseFloat(Pt(n,"borderRightWidth")),b=parseFloat(Pt(n,"borderTopWidth"));return n=parseFloat(Pt(n,"borderBottomWidth")),new gi(b,n,a,d)},ai=function(n,a,d){n=ar(n,a,d),a.scrollLeft=n.x,a.scrollTop=n.y},ar=function(n,a,d){var b=Tn(n),R=Tn(a),G=nr(a);const ce=b.x-R.x-G.left;return b=b.y-R.y-G.top,R=Ut(n),n=a.clientWidth-R.width,R=a.clientHeight-R.height,G=a.scrollLeft,a=a.scrollTop,d?(G+=ce-n/2,a+=b-R/2):(G+=Math.min(ce,Math.max(ce-n,0)),a+=Math.min(b,Math.max(b-R,0))),new tn(G,a)},Qn=function(n){const a=new tn(0,0);var d=n.x&&n.getAttribute("x");const b=n.y&&n.getAttribute("y");return d&&(a.x=parseInt(d)),b&&(a.y=parseInt(b)),(d=(d=n.getAttribute("transform"))&&d.match(ym))&&(a.x+=Number(d[1]),d[3]&&(a.y+=Number(d[3]))),(n=n.getAttribute("style"))&&-1<n.indexOf("translate")&&(n=n.match(gg))&&(a.x+=Number(n[1]),n[3]&&(a.y+=Number(n[3]))),a},Q=function(n){let a=0,d=0;for(;n;){const b=Qn(n);if(a+=b.x,d+=b.y,(" "+(n.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;n=n.parentNode}return new tn(a,d)},me=function(){const n=Mr();return new gi(n.y,document.documentElement.clientHeight+n.y,n.x,document.documentElement.clientWidth+n.x)},De=function(){const n=document.documentElement,a=window;return new tn(a.pageXOffset||n.scrollLeft,a.pageYOffset||n.scrollTop)},qe=function(n,a){var d=a.x;a=a.y;const b=n.getInjectionDiv().getBoundingClientRect();return d=new tn(d-b.left,a-b.top),a=n.getOriginOffsetInPixels(),tn.difference(d,a).scale(1/n.scale)},It=function(n,a){var d=a.scale(n.scale);a=d.x,d=d.y;const b=n.getInjectionDiv().getBoundingClientRect();return n=n.getOriginOffsetInPixels(),new tn(a+b.left+n.x,d+b.top+n.y)},qt=function(n){({document:bm=bm,DOMParser:Ea=Ea,XMLSerializer:ku=ku}=n),i_=new Ea,_g=new ku},t.createElement$$module$build$src$core$utils$xml=function(n){return bm.createElementNS(dp,n)},t.createTextNode$$module$build$src$core$utils$xml=function(n){return bm.createTextNode(n)},t.textToDom$$module$build$src$core$utils$xml=function(n){let a=i_.parseFromString(n,"text/xml");if(a&&a.documentElement&&!a.getElementsByTagName("parsererror").length)return a.documentElement;if((a=i_.parseFromString(n,"text/html"))&&a.body.firstChild&&a.body.firstChild.nodeName.toLowerCase()==="xml")return a.body.firstChild;throw Error(`DOMParser was unable to parse: ${n}`)},gn=function(n){return Ae(_g.serializeToString(n))},Ae=function(n){return n.replace(vg,a=>`&#${a.charCodeAt(0)};`)},at=function(n){return n?((n instanceof Element||typeof n=="string")&&(n=yr(n),n=er(n)),bt(n),n):null},bt=function(n){const a=n.kind;if(n=n.contents,a&&a!==n0&&a!==th)throw Error("Invalid toolbox kind "+a+". Please supply either "+n0+" or "+th);if(!n)throw Error("Toolbox must have a contents attribute.")},dt=function(n){return n?n.contents?n.contents:Array.isArray(n)&&0<n.length&&!n[0].nodeType?n:mr(n):[]},Dt=function(n){return Cv.hasCategoriesInternal(n)},xn=function(n){if(!n)return!1;const a=n.kind;return a?a===th:!!n.contents.filter(function(d){return d.kind.toUpperCase()==="CATEGORY"}).length},Bn=function(n){return n&&n.contents?!!n.contents.filter(function(a){return a.kind.toUpperCase()==="CATEGORY"}).length:!1},er=function(n){const a={contents:mr(n)};return n instanceof Node&&Qr(n,a),a},mr=function(n){const a=[];let d=n.childNodes;d||(d=n);for(let b=0,R;R=d[b];b++){if(!R.tagName)continue;n={};const G=R.tagName.toUpperCase();n.kind=G,G==="BLOCK"?n.blockxml=R:R.childNodes&&0<R.childNodes.length&&(n.contents=mr(R)),Qr(R,n),a.push(n)}return a},Qr=function(n,a){for(let d=0;d<n.attributes.length;d++){const b=n.attributes[d];-1<b.nodeName.indexOf("css-")?(a.cssconfig=a.cssconfig||{},a.cssconfig[b.nodeName.replace("css-","")]=b.value):a[b.nodeName]=b.value}},yr=function(n){let a=null;if(n)if(typeof n=="string"){if(a=t.textToDom$$module$build$src$core$utils$xml(n),a.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else n instanceof Element&&(a=n);return a},wr=function(n,a,d,b,R,G){const ce=G.scrollbar&&G.scrollbar.canScrollVertically();return n.horizontal===Tm.LEFT?(d=R.absoluteMetrics.left+d,ce&&G.RTL&&(d+=Oo.scrollbarThickness)):(d=R.absoluteMetrics.left+R.viewMetrics.width-a.width-d,ce&&!G.RTL&&(d-=Oo.scrollbarThickness)),n.vertical===tc.TOP?n=R.absoluteMetrics.top+b:(n=R.absoluteMetrics.top+R.viewMetrics.height-a.height-b,G.scrollbar&&G.scrollbar.canScrollHorizontally()&&(n-=Oo.scrollbarThickness)),new gi(n,n+a.height,d,d+a.width)},Gi=function(n,a){return{horizontal:a.toolboxMetrics.position===Xn.LEFT||n.horizontalLayout&&!n.RTL?Tm.RIGHT:Tm.LEFT,vertical:a.toolboxMetrics.position===Xn.BOTTOM?tc.TOP:tc.BOTTOM}},Fo=function(n,a,d,b){const R=n.left,G=n.right-n.left,ce=n.bottom-n.top;for(let Oe=0;Oe<b.length;Oe++){const Nt=b[Oe];n.intersects(Nt)&&(n=d===pp.UP?Nt.top-ce-a:Nt.bottom+a,n=new gi(n,n+ce,R,R+G),Oe=-1)}return n},wo=function(n,a){wi(n,a)},nl=function(n){wi=n},Yt=function(n,a){Ql.confirmInternal(n,a)},lr=function(n,a){El(n,a)},oa=function(n){El=n},Uo=function(n,a,d){$a(n,a,d)},hs=function(n){$a=n},ds=function(n){return n.getVariableModel!==void 0},li=function(n){return n.getProcedureDef!==void 0},ur=function(n){return n.getProcedureCall!==void 0&&n.renameProcedure!==void 0},t.allUsedVarModels$$module$build$src$core$variables=function(n){n=n.getAllBlocks(!1);const a=new Set;for(let d=0;d<n.length;d++){const b=n[d].getVarModels();if(b)for(let R=0;R<b.length;R++){const G=b[R];G.getId()&&a.add(G)}}return Array.from(a.values())},t.allDeveloperVariables$$module$build$src$core$variables=function(n){n=n.getAllBlocks(!1);const a=new Set;for(let b=0,R;R=n[b];b++){var d=R.getDeveloperVariables;if(d){d=d();for(let G=0;G<d.length;G++)a.add(d[G])}}return Array.from(a.values())},pn=function(n){let a=[];const d=document.createElement("button");return d.setAttribute("text","%{BKY_NEW_VARIABLE}"),d.setAttribute("callbackKey","CREATE_VARIABLE"),n.registerButtonCallback("CREATE_VARIABLE",function(b){Ji(b.getTargetWorkspace())}),a.push(d),n=ir(n),a=a.concat(n)},ir=function(n){n=n.getVariablesOfType("");const a=[];if(0<n.length){var d=n[n.length-1];if(Rr.variables_set){var b=t.createElement$$module$build$src$core$utils$xml("block");b.setAttribute("type","variables_set"),b.setAttribute("gap",Rr.math_change?"8":"24"),b.appendChild(Cs(d)),a.push(b)}if(Rr.math_change&&(b=t.createElement$$module$build$src$core$utils$xml("block"),b.setAttribute("type","math_change"),b.setAttribute("gap",Rr.variables_get?"20":"8"),b.appendChild(Cs(d)),d=t.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),b.appendChild(d),a.push(b)),Rr.variables_get){n.sort(jp.compareByName);for(let R=0,G;G=n[R];R++)d=t.createElement$$module$build$src$core$utils$xml("block"),d.setAttribute("type","variables_get"),d.setAttribute("gap","8"),d.appendChild(Cs(G)),a.push(d)}}return a},Tr=function(n){return Mc.generateUniqueNameInternal(n)},qn=function(n){return ui($m.charAt(0),n.getAllVariableNames())},ui=function(n,a){if(!a.length)return n;const d=$m;let b="",R=d.indexOf(n);for(;;){let G=!1;for(let ce=0;ce<a.length;ce++)if(a[ce].toLowerCase()===n){G=!0;break}if(!G)break;R++,R===d.length&&(R=0,b=`${Number(b)+1}`),n=d.charAt(R)+b}return n},Ji=function(n,a,d){function b(G){Gr(t.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,G,function(ce){if(ce){var Oe=Ia(ce,n);if(Oe){if(Oe.type===R)var Nt=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",Oe.name);else Nt=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,Nt=Nt.replace("%1",Oe.name).replace("%2",Oe.type);wo(Nt,function(){b(ce)})}else n.createVariable(ce,R),a&&a(ce)}else a&&a(null)})}const R=d||"";b("")},t.renameVariable$$module$build$src$core$variables=function(n,a,d){function b(R){const G=t.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",a.name);Gr(G,R,function(ce){if(ce){var Oe=Di(ce,a.type,n),Nt=rl(a.name,ce,n);if(Oe||Nt){var $n="";Oe?$n=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",Oe.name).replace("%2",Oe.type):Nt&&($n=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",ce).replace("%2",Nt)),wo($n,function(){b(ce)})}else n.renameVariableById(a.getId(),ce),d&&d(ce)}else d&&d(null)})}b("")},Gr=function(n,a,d){Uo(n,a,function(b){b&&(b=b.replace(/[\s\xa0]+/g," ").trim(),b===t.Msg$$module$build$src$core$msg.RENAME_VARIABLE||b===t.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(b=null),d(b)})},Di=function(n,a,d){d=d.getVariableMap().getAllVariables(),n=n.toLowerCase();for(let b=0,R;R=d[b];b++)if(R.name.toLowerCase()===n&&R.type!==a)return R;return null},Ia=function(n,a){a=a.getVariableMap().getAllVariables(),n=n.toLowerCase();for(let d=0,b;b=a[d];d++)if(b.name.toLowerCase()===n)return b;return null},rl=function(n,a,d){return d.getProcedureMap().getProcedures().length?cc(n,a,d):Uu(n,a,d)},cc=function(n,a,d){n=n.toLowerCase(),a=a.toLowerCase(),d=d.getProcedureMap().getProcedures();for(const R of d){var b=R.getParameters().filter(ds).map(G=>G.getVariableModel().name);if(b&&(d=b.some(G=>G.toLowerCase()===n),b=b.some(G=>G.toLowerCase()===a),d&&b))return R.getName()}return null},Uu=function(n,a,d){n=n.toLowerCase(),a=a.toLowerCase(),d=d.getAllBlocks(!1);for(const R of d){if(!li(R))continue;d=R.getProcedureDef();var b=d[1];const G=b.some(ce=>ce.toLowerCase()===n);if(b=b.some(ce=>ce.toLowerCase()===a),G&&b)return d[0]}return null},Cs=function(n){const a=t.createElement$$module$build$src$core$utils$xml("field");return a.setAttribute("name","VAR"),a.setAttribute("id",n.getId()),a.setAttribute("variabletype",n.type),n=t.createTextNode$$module$build$src$core$utils$xml(n.name),a.appendChild(n),a},t.getOrCreateVariablePackage$$module$build$src$core$variables=function(n,a,d,b){let R=t.getVariable$$module$build$src$core$variables(n,a,d,b);return R||(R=xo(n,a,d,b)),R},t.getVariable$$module$build$src$core$variables=function(n,a,d,b){const R=n.getPotentialVariableMap();let G=null;if(a&&(G=n.getVariableById(a),!G&&R&&(G=R.getVariableById(a)),G))return G;if(d){if(b===void 0)throw Error("Tried to look up a variable by name without a type");G=n.getVariable(d,b),!G&&R&&(G=R.getVariable(d,b))}return G},xo=function(n,a,d,b){const R=n.getPotentialVariableMap();return d||(d=Tr(n.isFlyout?n.targetWorkspace:n)),R?R.createVariable(d,b,a):n.createVariable(d,b,a)},su=function(n,a){n=n.getAllVariables();const d=[];if(a.length!==n.length)for(let b=0;b<n.length;b++){const R=n[b];a.indexOf(R)===-1&&d.push(R)}return d},Ll=function(n,a){i(Lt.PASTER,n,a)},uh=function(n){o(Lt.PASTER,n)},zo=function(n){return ch(n),Bc()?(hc(),Promise.resolve()):(gp||(gp=new Promise(a=>{Tg=a,nc=window.requestAnimationFrame(()=>{hc(),a()})})),gp)},Zn=function(){return gp||Promise.resolve()},Bi=function(n){n||window.cancelAnimationFrame(nc),hc(n),!n&&Tg&&Tg()},Bc=function(){return Kt},ch=function(n){o_.add(n);const a=n.getParent();a?ch(a):Bf.add(n)},hc=function(n){const a=n?new Set([n]):new Set([...Bf].map(R=>R.workspace)),d=[...Bf].filter(ou).filter(R=>a.has(R.workspace));for(var b of d)sl(b);for(const R of a)R.resizeContents();for(const R of d)b=R.getRelativeToSurfaceXY(),R.updateComponentLocations(b);for(const R of d)il(R);n||(gp=null)},il=function(n){Bf.delete(n),o_.delete(n);for(const a of n.getChildren(!1))il(a)},ou=function(n){return!n.isDisposed()&&!n.getParent()},sl=function(n){if(o_.has(n)){for(const a of n.getChildren(!1))sl(a);n.renderEfficiently()}},ol=function(n,a){const d=t.createElement$$module$build$src$core$utils$xml("xml");var b=Yn(t.allUsedVarModels$$module$build$src$core$variables(n));b.hasChildNodes()&&d.appendChild(b),b=n.getTopComments(!0);for(let R=0;R<b.length;R++)d.appendChild(b[R].toXmlWithXY(a));for(n=n.getTopBlocks(!0),b=0;b<n.length;b++)d.appendChild(Kn(n[b],a));return d},Yn=function(n){const a=t.createElement$$module$build$src$core$utils$xml("variables");for(let d=0;d<n.length;d++){const b=n[d],R=t.createElement$$module$build$src$core$utils$xml("variable");R.appendChild(t.createTextNode$$module$build$src$core$utils$xml(b.name)),b.type&&R.setAttribute("type",b.type),R.id=b.getId(),a.appendChild(R)}return a},Kn=function(n,a){if(n.isInsertionMarker()&&(n=n.getChildren(!1)[0],!n))return new DocumentFragment;let d=0;if(n.workspace.RTL&&(d=n.workspace.getWidth()),a=aa(n,a),uu(a)){const b=n.getRelativeToSurfaceXY();a.setAttribute("x",String(Math.round(n.workspace.RTL?d-b.x:b.x))),a.setAttribute("y",String(Math.round(b.y)))}return a},al=function(n){if(n.isSerializable()){const a=t.createElement$$module$build$src$core$utils$xml("field");return a.setAttribute("name",n.name||""),n.toXml(a)}return null},Ra=function(n,a){for(let d=0;d<n.inputList.length;d++){const b=n.inputList[d];for(let R=0;R<b.fieldRow.length;R++){const G=al(b.fieldRow[R]);G&&a.appendChild(G)}}},aa=function(n,a){if(n.isInsertionMarker())return(a=n.getChildren(!1)[0])?aa(a):new DocumentFragment;const d=t.createElement$$module$build$src$core$utils$xml(n.isShadow()?"shadow":"block");if(d.setAttribute("type",n.type),a||(d.id=n.id),n.mutationToDom){var b=n.mutationToDom();b&&(b.hasChildNodes()||b.hasAttributes())&&d.appendChild(b)}if(Ra(n,d),b=n.getCommentText()){var R=n.getIcon(so.COMMENT),G=R.getBubbleSize();R=R.bubbleIsVisible();var ce=t.createElement$$module$build$src$core$utils$xml("comment");ce.appendChild(t.createTextNode$$module$build$src$core$utils$xml(b)),ce.setAttribute("pinned",`${R}`),ce.setAttribute("h",String(G.height)),ce.setAttribute("w",String(G.width)),d.appendChild(ce)}for(n.data&&(b=t.createElement$$module$build$src$core$utils$xml("data"),b.appendChild(t.createTextNode$$module$build$src$core$utils$xml(n.data)),d.appendChild(b)),b=0;b<n.inputList.length;b++){G=n.inputList[b];var Oe=void 0;if(R=!0,G.type!==t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&G.type!==t.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){ce=G.connection.targetBlock(),G.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE?Oe=t.createElement$$module$build$src$core$utils$xml("value"):G.type===t.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(Oe=t.createElement$$module$build$src$core$utils$xml("statement"));const $n=G.connection.getShadowDom();!$n||ce&&ce.isShadow()||Oe.appendChild(Nl($n,a)),ce&&(ce=aa(ce,a),ce.nodeType===Wp.ELEMENT_NODE&&(Oe.appendChild(ce),R=!1)),Oe.setAttribute("name",G.name),R||d.appendChild(Oe)}}n.inputsInline!==void 0&&n.inputsInline!==n.inputsInlineDefault&&d.setAttribute("inline",String(n.inputsInline)),n.isCollapsed()&&d.setAttribute("collapsed","true"),n.isEnabled()||d.setAttribute("disabled","true"),n.isDeletable()||n.isShadow()||d.setAttribute("deletable","false"),n.isMovable()||n.isShadow()||d.setAttribute("movable","false"),n.isEditable()||d.setAttribute("editable","false"),Oe=n.getNextBlock();let Nt;return Oe&&(b=aa(Oe,a),b.nodeType===Wp.ELEMENT_NODE&&(Nt=t.createElement$$module$build$src$core$utils$xml("next"),Nt.appendChild(b),d.appendChild(Nt))),n=n.nextConnection&&n.nextConnection.getShadowDom(),!n||Oe&&Oe.isShadow()||Nt.appendChild(Nl(n,a)),d},Nl=function(n,a){let d=n=n.cloneNode(!0),b;for(;d;)if(a&&d.nodeName==="shadow"&&d.removeAttribute("id"),d.firstChild)d=d.firstChild;else{for(;d&&!d.nextSibling;){b=d,d=d.parentNode;let R;b.nodeType===Wp.TEXT_NODE&&b.data.trim()===""&&((R=d)==null?void 0:R.firstChild)!==b&&ut(b)}d&&(b=d,d=d.nextSibling,b.nodeType===Wp.TEXT_NODE&&b.data.trim()===""&&ut(b))}return n},bi=function(n){return gn(n).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},Pi=function(n){n=bi(n).split("<");let a="";for(let d=1;d<n.length;d++){const b=n[d];b[0]==="/"&&(a=a.substring(2)),n[d]=a+"<"+b,b[0]!=="/"&&b.slice(-2)!=="/>"&&(a+="  ")}return n=n.join(`
`),n=n.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),n.replace(/^\n/,"")},ll=function(n,a){return a.setResizesEnabled(!1),a.clear(),n=t.domToWorkspace$$module$build$src$core$xml(n,a),a.setResizesEnabled(!0),n},t.domToWorkspace$$module$build$src$core$xml=function(n,a){let d=0;a.RTL&&(d=a.getWidth());const b=[];J();const R=t.getGroup$$module$build$src$core$events$utils();R||t.setGroup$$module$build$src$core$events$utils(!0),a.setResizesEnabled&&a.setResizesEnabled(!1);let G=!0;try{for(let ce=0,Oe;Oe=n.childNodes[ce];ce++){const Nt=Oe.nodeName.toLowerCase(),$n=Oe;if(Nt==="block"||Nt==="shadow"&&!ae()){const No=Ms($n,a);b.push(No.id);let $o;const Sp=parseInt(($o=$n.getAttribute("x"))!=null?$o:"10",10);let zb;const Hb=parseInt((zb=$n.getAttribute("y"))!=null?zb:"10",10);isNaN(Sp)||isNaN(Hb)||No.moveBy(a.RTL?d-Sp:Sp,Hb,["create"]),G=!1}else{if(Nt==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(Nt==="comment")a.rendered?ja.fromXmlRendered($n,a,d):Ac.fromXml($n,a);else if(Nt==="variables"){if(G)au($n,a);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");G=!1}}}}finally{t.setGroup$$module$build$src$core$events$utils(R),a.setResizesEnabled&&a.setResizesEnabled(!0),a.rendered&&Bi(),oe()}return he(new(xe(jl))(a)),b},wd=function(n,a){if(!a.getBlocksBoundingBox)return t.domToWorkspace$$module$build$src$core$xml(n,a);var d=a.getBlocksBoundingBox();if(n=t.domToWorkspace$$module$build$src$core$xml(n,a),d&&d.top!==d.bottom){var b=d.bottom;d=a.RTL?d.right:d.left;var R=1/0;let G=-1/0,ce=1/0;for(let Oe=0;Oe<n.length;Oe++){const Nt=a.getBlockById(n[Oe]).getRelativeToSurfaceXY();Nt.y<ce&&(ce=Nt.y),Nt.x<R&&(R=Nt.x),Nt.x>G&&(G=Nt.x)}for(b=b-ce+10,d=a.RTL?d-G:d-R,R=0;R<n.length;R++)a.getBlockById(n[R]).moveBy(d,b,["create"])}return n},t.domToBlock$$module$build$src$core$xml=function(n,a){return n=Ms(n,a),a.rendered&&Bi(),n},Ms=function(n,a){t.disable$$module$build$src$core$events$utils();var d=a.getAllVariables();let b;try{if(b=Pc(n,a),a.rendered){const R=b,G=b.getDescendants(!1);R.setConnectionTracking(!1);for(let ce=G.length-1;0<=ce;ce--)G[ce].initSvg();for(let ce=G.length-1;0<=ce;ce--)G[ce].queueRender();setTimeout(function(){R.disposed||R.setConnectionTracking(!0)},1),a.resizeContents()}else{const R=b.getDescendants(!1);for(let G=R.length-1;0<=G;G--)R[G].initModel()}}finally{t.enable$$module$build$src$core$events$utils()}if(q()){for(n=su(a,d),a=0;a<n.length;a++)d=n[a],he(new(xe(za))(d));he(new(xe(t.CREATE$$module$build$src$core$events$utils))(b))}return b},au=function(n,a){for(let b=0;b<n.children.length;b++){var d=n.children[b];const R=d.getAttribute("type"),G=d.getAttribute("id");if(d=d.textContent,!d)break;a.createVariable(d,R,G)}},Co=function(n){const a={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let d=0;d<n.children.length;d++){const b=n.children[d];if(b.nodeType!==Wp.TEXT_NODE)switch(b.nodeName.toLowerCase()){case"mutation":a.mutation.push(b);break;case"comment":a.comment.push(b);break;case"data":a.data.push(b);break;case"title":case"field":a.field.push(b);break;case"value":case"statement":a.input.push(b);break;case"next":a.next.push(b);break;default:console.warn("Ignoring unknown tag: "+b.nodeName)}}return a},Dl=function(n,a){let d=!1;for(let b=0;b<n.length;b++){const R=n[b];a.domToMutation&&(a.domToMutation(R),a.initSvg&&(d=!0))}return d},Wr=function(n,a){for(let b=0;b<n.length;b++){var d=n[b];const R=d.textContent,G=d.getAttribute("pinned")==="true";let ce;const Oe=parseInt((ce=d.getAttribute("w"))!=null?ce:"50",10);let Nt;d=parseInt((Nt=d.getAttribute("h"))!=null?Nt:"50",10),a.setCommentText(R);const $n=a.getIcon(so.COMMENT);isNaN(Oe)||isNaN(d)||$n.setBubbleSize(new Es(Oe,d)),$n.setBubbleVisible(G),setTimeout(()=>$n.setBubbleVisible(G),1)}},cr=function(n,a){for(let d=0;d<n.length;d++)a.data=n[d].textContent},Wi=function(n,a){for(let d=0;d<n.length;d++){const b=n[d],R=b.getAttribute("name");R?Ho(a,R,b):console.warn(`Ignoring unnamed field in block ${a.type}`)}},As=function(n){let a=null,d=null;for(let b=0;b<n.childNodes.length;b++){const R=n.childNodes[b];uu(R)&&(R.nodeName.toLowerCase()==="block"?a=R:R.nodeName.toLowerCase()==="shadow"&&(d=R))}return{childBlockElement:a,childShadowElement:d}},lu=function(n,a,d,b){for(let G=0;G<n.length;G++){var R=n[G];const ce=R.getAttribute("name"),Oe=ce?d.getInput(ce):null;if(!Oe){console.warn("Ignoring non-existent input "+ce+" in block "+b);break}if(R=As(R),R.childBlockElement){if(!Oe.connection)throw TypeError("Input connection does not exist.");Pc(R.childBlockElement,a,Oe.connection,!1)}if(R.childShadowElement){let Nt;(Nt=Oe.connection)==null||Nt.setShadowDom(R.childShadowElement)}}},Bl=function(n,a,d){for(let b=0;b<n.length;b++){const R=As(n[b]);if(R.childBlockElement){if(!d.nextConnection)throw TypeError("Next statement does not exist.");if(d.nextConnection.isConnected())throw TypeError("Next statement is already connected.");Pc(R.childBlockElement,a,d.nextConnection,!0)}R.childShadowElement&&d.nextConnection&&d.nextConnection.setShadowDom(R.childShadowElement)}},Pc=function(n,a,d,b){var R;const G=n.getAttribute("type");if(!G)throw TypeError("Block type unspecified: "+n.outerHTML);var ce=(R=n.getAttribute("id"))!=null?R:void 0;R=a.newBlock(G,ce),ce=Co(n);const Oe=Dl(ce.mutation,R);if(Wr(ce.comment,R),cr(ce.data,R),d)if(b)if(R.previousConnection)d.connect(R.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(R.outputConnection)d.connect(R.outputConnection);else if(R.previousConnection)d.connect(R.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(Wi(ce.field,R),lu(ce.input,a,R,G),Bl(ce.next,a,R),Oe&&R.initSvg(),(a=n.getAttribute("inline"))&&R.setInputsInline(a==="true"),(a=n.getAttribute("disabled"))&&R.setEnabled(a!=="true"&&a!=="disabled"),(a=n.getAttribute("deletable"))&&R.setDeletable(a==="true"),(a=n.getAttribute("movable"))&&R.setMovable(a==="true"),(a=n.getAttribute("editable"))&&R.setEditable(a==="true"),(a=n.getAttribute("collapsed"))&&R.setCollapsed(a==="true"),n.nodeName.toLowerCase()==="shadow"){for(n=R.getChildren(!1),a=0;a<n.length;a++)if(!n[a].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");R.setShadow(!0)}return R},Ho=function(n,a,d){const b=n.getField(a);b?b.fromXml(d):console.warn("Ignoring non-existent field "+a+" in block "+n.type)},Go=function(n){for(let a=0;a<n.childNodes.length;a++){const d=n.childNodes[a];if(d.nodeName.toLowerCase()==="next"){n.removeChild(d);break}}},uu=function(n){return n.nodeType===Wp.ELEMENT_NODE},Vr=function(n){return n.saveState!==void 0&&n.loadState!==void 0},ps=function(n,a){i(Lt.SERIALIZER,n,a)},Ci=function(n){o(Lt.SERIALIZER,n)},qr=function(n,{addCoordinates:a=!1,addInputBlocks:d=!0,addNextBlocks:b=!0,doFullSerialization:R=!0,saveIds:G=!0}={}){if(n.isInsertionMarker())return null;const ce={type:n.type,id:G?n.id:void 0};return a&&Fi(n,ce),la(n,ce),cu(n,ce,R),qs(n,ce,R),hu(n,ce,R),d&&ka(n,ce,R,G),b&&ci(n,ce,R,G),ce},la=function(n,a){n.isCollapsed()&&(a.collapsed=!0),n.isEnabled()||(a.enabled=!1),n.isOwnDeletable()||(a.deletable=!1),n.isOwnMovable()||(a.movable=!1),n.isOwnEditable()||(a.editable=!1),n.inputsInline!==void 0&&n.inputsInline!==n.inputsInlineDefault&&(a.inline=n.inputsInline),n.data&&(a.data=n.data)},Fi=function(n,a){const d=n.workspace;n=n.getRelativeToSurfaceXY(),a.x=Math.round(d.RTL?d.getWidth()-n.x:n.x),a.y=Math.round(n.y)},cu=function(n,a,d){n.saveExtraState?(n=n.saveExtraState(d),n!==null&&(a.extraState=n)):n.mutationToDom&&(n=n.mutationToDom(),n!==null&&(a.extraState=bi(n).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},qs=function(n,a,d){const b=Object.create(null);for(const R of n.getIcons())Vr(R)&&(n=R.saveState(d))&&(b[R.getType().toString()]=n);Object.keys(b).length&&(a.icons=b)},hu=function(n,a,d){const b=Object.create(null);for(let R=0;R<n.inputList.length;R++){const G=n.inputList[R];for(let ce=0;ce<G.fieldRow.length;ce++){const Oe=G.fieldRow[ce];Oe.isSerializable()&&(b[Oe.name]=Oe.saveState(d))}}Object.keys(b).length&&(a.fields=b)},ka=function(n,a,d,b){const R=Object.create(null);for(let G=0;G<n.inputList.length;G++){const ce=n.inputList[G];if(!ce.connection)continue;const Oe=Zr(ce.connection,d,b);Oe&&(R[ce.name]=Oe)}Object.keys(R).length&&(a.inputs=R)},ci=function(n,a,d,b){n.nextConnection&&(n=Zr(n.nextConnection,d,b))&&(a.next=n)},Zr=function(n,a,d){const b=n.getShadowState(!0);if(n=n.targetBlock(),!b&&!n)return null;const R=Object.create(null);return b&&(R.shadow=b),n&&!n.isShadow()&&(R.block=qr(n,{doFullSerialization:a,saveIds:d})),R},Un=function(n,a,{recordUndo:d=!1}={}){return n=jr(n,a,{recordUndo:d}),a.rendered&&Bi(),n},jr=function(n,a,{parentConnection:d,isShadow:b=!1,recordUndo:R=!1}={}){const G=ae();fe(R),(R=t.getGroup$$module$build$src$core$events$utils())||t.setGroup$$module$build$src$core$events$utils(!0),t.disable$$module$build$src$core$events$utils();let ce;try{ce=Ti(n,a,{parentConnection:d,isShadow:b})}finally{t.enable$$module$build$src$core$events$utils()}if(q()&&he(new(xe(t.CREATE$$module$build$src$core$events$utils))(ce)),t.setGroup$$module$build$src$core$events$utils(R),fe(G),a.rendered){const Oe=ce;setTimeout(()=>{Oe.disposed||Oe.setConnectionTracking(!0)},1)}return ce},Ti=function(n,a,{parentConnection:d,isShadow:b=!1}={}){if(!n.type)throw new Mv(n);const R=a.newBlock(n.type,n.id);return R.setShadow(b),Uh(R,n),du(R,n),fs(R,n),ul(d,R,n),zh(R,n),hi(R,n),pu(R,n),sp(R,n),hh(R,a.rendered),R},Uh=function(n,a){let d=a.x===void 0?0:a.x;a=a.y===void 0?0:a.y;const b=n.workspace;d=b.RTL?b.getWidth()-d:d,n.moveBy(d,a)},du=function(n,a){a.collapsed&&n.setCollapsed(!0),a.deletable===!1&&n.setDeletable(!1),a.movable===!1&&n.setMovable(!1),a.editable===!1&&n.setEditable(!1),a.enabled===!1&&n.setEnabled(!1),a.inline!==void 0&&n.setInputsInline(a.inline),a.data!==void 0&&(n.data=a.data)},fs=function(n,a){a.extraState&&(n.loadExtraState?n.loadExtraState(a.extraState):n.domToMutation&&n.domToMutation(t.textToDom$$module$build$src$core$utils$xml(a.extraState)))},ul=function(n,a,d){if(n){if(n.getSourceBlock().isShadow()&&!a.isShadow())throw new gb(d);if(n.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var b=a.outputConnection;if(!b)throw new wm("output",a,d)}else if(b=a.previousConnection,!b)throw new wm("previous",a,d);if(!n.connect(b)){const R=a.workspace.connectionChecker;throw new i0(R.getErrorMessage(R.canConnectWithReason(b,n,!1),b,n),n.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",a,d)}}},zh=function(n,a){if(a.icons){var d=Object.keys(a.icons);for(const R of d){d=a.icons[R];var b=n.getIcon(R);if(!b){if(b=h(Lt.ICON,R,!1),!b)throw new Xp(R,n,a);b=new b(n),n.addIcon(b)}Vr(b)&&b.loadState(d)}}},hi=function(n,a){if(a.fields){var d=Object.keys(a.fields);for(let b=0;b<d.length;b++){const R=d[b],G=a.fields[R],ce=n.getField(R);ce?ce.loadState(G):console.warn(`Ignoring non-existant field ${R} in block ${n.type}`)}}},pu=function(n,a){if(a.inputs){var d=Object.keys(a.inputs);for(let b=0;b<d.length;b++){const R=d[b],G=n.getInput(R);if(!G||!G.connection)throw new wm(R,n,a);op(G.connection,a.inputs[R])}}},sp=function(n,a){if(a.next){if(!n.nextConnection)throw new wm("next",n,a);op(n.nextConnection,a.next)}},op=function(n,a){a.shadow&&n.setShadowState(a.shadow),a.block&&Ti(a.block,n.getSourceBlock().workspace,{parentConnection:n})},hh=function(n,a){if(a){n.setConnectionTracking(!1),n.initSvg(),n.queueRender();for(const d of n.getIcons())d.onLocationChange(n.getRelativeToSurfaceXY())}else n.initModel()},ap=function(n){const a=n.workspace,d=t.config$$module$build$src$core$config.snapRadius,b=n.getRelativeToSurfaceXY(),R=new tn(0,0),G=a.getAllBlocks(!1).filter(ce=>ce.id!=n.id).map(ce=>ce.getRelativeToSurfaceXY());for(;Bp(tn.sum(b,R),G)||Rf(n,R,d);)a.RTL?R.translate(-d,2*d):R.translate(d,2*d);n.moveTo(tn.sum(b,R))},Bp=function(n,a){return a.some(d=>1>=Math.abs(d.x-n.x)&&1>=Math.abs(d.y-n.y))},Rf=function(n,a,d){return n.getConnections_(!1).some(b=>!!b.closest(d,a).connection)},lp=function(n){return be("Blockly.clipboard.copy","v11","v12","myCopyable.toCopyData()"),c0.copyInternal(n)},zu=function(n){const a=n.toCopyData();To=a;let d;return Rv=(d=n.workspace)!=null?d:null,a},Zs=function(n,a,d){return n&&a?fu(n,a,d):To&&Rv?fu(To,Rv):null},fu=function(n,a,d){let b;a=(b=a.getRootWorkspace())!=null?b:a;let R,G;return(G=(R=p(Lt.PASTER,n.paster,!1))==null?void 0:R.paste(n,a,d))!=null?G:null},dh=function(n){return be("Blockly.clipboard.duplicate","v11","v12","Blockly.clipboard.paste(myCopyable.toCopyData(), myWorkspace)"),c0.duplicateInternal(n)},ua=function(n){const a=n.toCopyData();return a?Zs(a,n.workspace):null},Ur=function(n,a){n.setAttribute(_b,a)},sr=function(n,a,d){Array.isArray(d)&&(d=d.join(" ")),n.setAttribute(oE+a,`${d}`)},Us=function(){return sd},Wo=function(n){if(sd=n,n===null){let a;(a=document.querySelector("."+Kp))==null||a.remove()}},Mo=function(){document.querySelector("."+Kp)||(sd=document.createElement("div"),sd.className=Kp,(N()||document.body).appendChild(sd))},mu=function(n,a,d){cl(),xh=n,Im=d,(n=sd)&&(n.style.direction=a?"rtl":"ltr",n.style.display="block",a=A(),Jp=a.getRenderer().getClassName(),Uf=a.getTheme().getClassName(),Jp&&ke(n,Jp),Uf&&ke(n,Uf))},cl=function(){if(Hh()){xh=null;var n=sd;n&&(n.style.display="none",n.style.left="",n.style.top="",Im&&Im(),Im=null,n.textContent="",Jp&&(mt(n,Jp),Jp=""),Uf&&(mt(n,Uf),Uf=""),A().markFocused())}},Hh=function(){return!!xh},Ei=function(n){xh===n&&cl()},di=function(n,a,d){sd.style.left=n+"px",sd.style.top=a+"px",sd.style.height=d+"px"},or=function(n,a,d,b){const R=Vo(n,a,d);n=$i(n,a,d,b),0>R?di(n,0,d.height+R):di(n,R,d.height)},$i=function(n,a,d,b){return b?Math.min(Math.max(a.right-d.width,n.left),n.right-d.width):Math.max(Math.min(a.left,n.right-d.width),n.left)},Vo=function(n,a,d){return a.bottom+d.height>=n.bottom?a.top-d.height:a.bottom},Pl=function(n){return!(n==null||!n.repositionForWindowResize)},up=function(){Pl(xh)&&xh.repositionForWindowResize()||cl()},cp=function(){return $g},Gh=function(n){$g=n},gu=function(n,a,d){if(mu(vb,d,jo),a.length){var b=Hu(a,d);l_=b,dc(b,n,d),setTimeout(function(){b.focus()},1),$g=null}else Fl()},Hu=function(n,a){const d=new a_;d.setRole(Ic.MENU);for(let b=0;b<n.length;b++){const R=n[b],G=new Eg(R.text);G.setRightToLeft(a),G.setRole(Ic.MENUITEM),d.addChild(G),G.setEnabled(R.enabled),R.enabled&&G.onAction(function(){Fl(),requestAnimationFrame(()=>{setTimeout(()=>{R.callback(R.scope)},0)})},{})}return d},dc=function(n,a,d){const b=me();a=new gi(a.clientY+b.top,a.clientY+b.top,a.clientX+b.left,a.clientX+b.left),ph(n);const R=n.getSize();d&&(a.left+=R.width,a.right+=R.width,b.left+=R.width,b.right+=R.width),or(b,a,R,d),n.focus()},ph=function(n){var a=Us();if(!a)throw Error("Attempting to create a context menu when widget div is null");a=n.render(a),ke(a,"blocklyContextMenu"),we(a,"contextmenu",null,pc),n.focus()},pc=function(n){n.preventDefault(),n.stopPropagation()},Fl=function(){Ei(vb),$g=null},jo=function(){l_&&(l_.dispose(),l_=null)},t.callbackFactory$$module$build$src$core$contextmenu=function(n,a){return()=>{t.disable$$module$build$src$core$events$utils();let d;try{d=a instanceof Element?Ms(a,n.workspace):jr(a,n.workspace);const b=n.getRelativeToSurfaceXY();b.x=n.RTL?b.x-t.config$$module$build$src$core$config.snapRadius:b.x+t.config$$module$build$src$core$config.snapRadius,b.y+=2*t.config$$module$build$src$core$config.snapRadius,d.moveBy(b.x,b.y)}finally{t.enable$$module$build$src$core$events$utils()}return q()&&!d.isShadow()&&he(new(xe(t.CREATE$$module$build$src$core$events$utils))(d)),d.select(),d}},Gu=function(n){return{text:t.Msg$$module$build$src$core$msg.REMOVE_COMMENT,enabled:!0,callback:function(){t.setGroup$$module$build$src$core$events$utils(!0),n.dispose(),t.setGroup$$module$build$src$core$events$utils(!1)}}},fh=function(n){return{text:t.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){const a=n.toCopyData();a&&Zs(a,n.workspace)}}},fc=function(n,a){const d={enabled:!0};return d.text=t.Msg$$module$build$src$core$msg.ADD_COMMENT,d.callback=function(){const b=new ja(n,t.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT,ja.DEFAULT_SIZE,ja.DEFAULT_SIZE);var R=n.getInjectionDiv().getBoundingClientRect();R=new tn(a.clientX-R.left,a.clientY-R.top);const G=n.getOriginOffsetInPixels();R=tn.difference(R,G),R.scale(1/n.scale),b.moveBy(R.x,R.y),n.rendered&&(b.initSvg(),b.render(),b.select())},d},mc=function(n){return n*Math.PI/180},ms=function(n){return 180*n/Math.PI},Xr=function(n,a,d){if(d<n){const b=d;d=n,n=b}return Math.max(n,Math.min(a,d))},hl=function(){document.querySelector(".blocklyDropDownDiv")||(ri=document.createElement("div"),ri.className="blocklyDropDownDiv",(N()||document.body).appendChild(ri),Zp=document.createElement("div"),Zp.className="blocklyDropDownContent",ri.appendChild(Zp),Lm=document.createElement("div"),Lm.className="blocklyDropDownArrow",ri.appendChild(Lm),ri.style.opacity="0",ri.style.transition="transform "+km+"s, opacity "+km+"s",ri.addEventListener("focusin",function(){ke(ri,"blocklyFocused")}),ri.addEventListener("focusout",function(){mt(ri,"blocklyFocused")}))},Xo=function(n){Nm=n},dl=function(){return zf},Ul=function(){return Zp},Fc=function(){Zp.textContent="",Zp.style.width=""},xd=function(n,a){ri.style.backgroundColor=n,ri.style.borderColor=a},pi=function(n,a,d,b){return mn(Rt(a),n,d,b)},je=function(n,a,d){return h_=!0,mn(yt(n),n,a,d)},Rt=function(n){var a=n.getSvgRoot();const d=n.workspace.scale,b=n.height*d;return n=n.width*d,a=Tn(a),new gi(a.y,a.y+b,a.x,a.x+n)},yt=function(n){return n=n.getScaledBBox(),new gi(n.top,n.bottom,n.left,n.right)},mn=function(n,a,d,b){const R=n.left+(n.right-n.left)/2,G=n.bottom;n=n.top,b&&(n+=b),b=a.getSourceBlock();let ce=b.workspace;for(;ce.options.parentWorkspace;)ce=ce.options.parentWorkspace;return Xo(ce.getParentSvg().parentNode),Nn(a,b.RTL,R,G,R,n,d)},Nn=function(n,a,d,b,R,G,ce){return zf=n,Qp=ce||null,ri.style.direction=a?"rtl":"ltr",n=A(),qp=n.getRenderer().getClassName(),Om=n.getTheme().getClassName(),qp&&ke(ri,qp),Om&&ke(ri,Om),Vi(d,b,R,G)},Jn=function(n,a,d,b){return n=xr(n,d.left,d.right,b.width),{initialX:n.divX,initialY:a,finalX:n.divX,finalY:a+c_,arrowX:n.arrowX,arrowY:-(Sg/2+u_),arrowAtTop:!0,arrowVisible:!0}},tr=function(n,a,d,b){return n=xr(n,d.left,d.right,b.width),{initialX:n.divX,initialY:a-b.height,finalX:n.divX,finalY:a-b.height-c_,arrowX:n.arrowX,arrowY:b.height-2*u_-Sg/2,arrowAtTop:!1,arrowVisible:!0}},An=function(n,a,d){return n=xr(n,a.left,a.right,d.width),{initialX:n.divX,initialY:0,finalX:n.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},xr=function(n,a,d,b){return a=Xr(a,n-b/2,d-b),n=n-Sg/2-a,d=yb,n=Xr(d,n,b-d-Sg),{arrowX:n,divX:a}},Is=function(){return!!zf},gs=function(n,a){return zf===n?(a?ca():po(),!0):!1},po=function(){ri.style.transform="translate(0, 0)",ri.style.opacity="0",wg=setTimeout(function(){ca()},1e3*km),Qp&&(Qp(),Qp=null)},ca=function(){Is()&&(wg&&clearTimeout(wg),ri.style.transform="",ri.style.left="",ri.style.top="",ri.style.opacity="0",ri.style.display="none",ri.style.backgroundColor="",ri.style.borderColor="",Qp&&(Qp(),Qp=null),Fc(),zf=null,qp&&(mt(ri,qp),qp=""),Om&&(mt(ri,Om),Om=""),A().markFocused())},Vi=function(n,a,d,b){n=g.getPositionMetrics(n,a,d,b),n.arrowVisible?(Lm.style.display="",Lm.style.transform="translate("+n.arrowX+"px,"+n.arrowY+"px) rotate(45deg)",Lm.setAttribute("class",n.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):Lm.style.display="none",a=Math.floor(n.initialX),d=Math.floor(n.initialY),b=Math.floor(n.finalX);const R=Math.floor(n.finalY);return ri.style.left=a+"px",ri.style.top=d+"px",ri.style.display="block",ri.style.opacity="1",ri.style.transform="translate("+(b-a)+"px,"+(R-d)+"px)",!!n.arrowAtTop},ss=function(){if(zf){var n=zf.getSourceBlock();n=h_?yt(zf):Rt(n);const a=n.left+(n.right-n.left)/2;Vi(a,n.bottom,a,n.top)}else po()},gc=function(n){if(!(100<n.getDescendants(!1).length)){var a=n.workspace,d=n.getSvgRoot();a.getAudioManager().play("delete");var b=a.getSvgXY(d);d=d.cloneNode(!0),d.setAttribute("transform","translate("+b.x+","+b.y+")"),a.getParentSvg().appendChild(d),Lr(d,{x:b.x,y:b.y,width:n.width,height:n.height},a.RTL,new Date,a.scale)}},Lr=function(n,a,d,b,R){const G=(new Date().getTime()-b.getTime())/150;1<G?ut(n):(n.setAttribute("transform","translate("+(a.x+(d?-1:1)*a.width*R/2*G)+","+(a.y+a.height*R*G)+") scale("+(1-G)*R+")"),setTimeout(Lr,10,n,a,d,b,R))},Ao=function(n){var a=n.workspace;const d=a.scale;if(a.getAudioManager().play("click"),!(1>d)){var b=a.getSvgXY(n.getSvgRoot());n.outputConnection?(b.x+=(n.RTL?3:-3)*d,b.y+=13*d):n.previousConnection&&(b.x+=(n.RTL?-23:23)*d,b.y+=3*d);var R=Z(Be.CIRCLE,{cx:b.x,cy:b.y,r:0,fill:"none",stroke:"#888","stroke-width":10},a.getParentSvg());n=Z(Be.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*d},R),a=Z(Be.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},R),n.beginElement(),a.beginElement(),setTimeout(()=>void ut(R),150)}},Rs=function(n){if(Yo(),n.workspace.getAudioManager().play("disconnect"),!(1>n.workspace.scale)){var a=n.getHeightWidth().height;a=Math.atan(10/a)/Math.PI*180,n.RTL||(a*=-1),B=n,zs(n,a,new Date)}},zs=function(n,a,d){const b=(new Date().getTime()-d.getTime())/200;let R="";1>=b&&(R=`skewX(${Math.round(Math.sin(b*Math.PI*3)*(1-b)*a)})`,I=setTimeout(zs,10,n,a,d)),n.getSvgRoot().setAttribute("transform",`${n.getTranslation()} ${R}`)},Yo=function(){B&&(I&&(clearTimeout(I),I=null),B.getSvgRoot().setAttribute("transform",B.getTranslation()),B=null)},mh=function(n,a){return be("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),n.startsWith(a)},Uc=function(n){return n.length?n.reduce(function(a,d){return a.length<d.length?a:d}).length:0},gh=function(n,a){if(!n.length)return 0;if(n.length===1)return n[0].length;let d=0;a=a||Uc(n);let b;for(b=0;b<a;b++){for(var R=n[0][b],G=1;G<n.length;G++)if(R!==n[G][b])return d;R===" "&&(d=b+1)}for(R=1;R<n.length;R++)if((G=n[R][b])&&G!==" ")return d;return a},_u=function(n,a){if(!n.length)return 0;if(n.length===1)return n[0].length;let d=0;a=a||Uc(n);let b;for(b=0;b<a;b++){for(var R=n[0].substr(-b-1,1),G=1;G<n.length;G++)if(R!==n[G].substr(-b-1,1))return d;R===" "&&(d=b+1)}for(R=1;R<n.length;R++)if((G=n[R].charAt(n[R].length-b-1))&&G!==" ")return d;return a},t.wrap$$module$build$src$core$utils$string=function(n,a){n=n.split(`
`);for(let d=0;d<n.length;d++)n[d]=Wh(n[d],a);return n.join(`
`)},Wh=function(n,a){if(n.length<=a)return n;const d=n.trim().split(/\s+/);for(var b=0;b<d.length;b++)d[b].length>a&&(a=d[b].length);var R=-1/0;let G,ce=1;do{b=R,G=n,n=[],R=d.length/ce;let Oe=1;for(let Nt=0;Nt<d.length-1;Nt++)Oe<(Nt+1.5)/R?(Oe++,n[Nt]=!0):n[Nt]=!1;n=pl(d,n,a),R=Vh(d,n,a),n=jh(d,n),ce++}while(R>b);return G},Vh=function(n,a,d){const b=[0],R=[];for(var G=0;G<n.length;G++)b[b.length-1]+=n[G].length,a[G]===!0?(b.push(0),R.push(n[G].charAt(n[G].length-1))):a[G]===!1&&b[b.length-1]++;for(n=Math.max(...b),a=0,G=0;G<b.length;G++)a-=2*Math.pow(Math.abs(d-b[G]),1.5),a-=Math.pow(n-b[G],1.5),".?!".indexOf(R[G])!==-1?a+=d/3:",;)]}".indexOf(R[G])!==-1&&(a+=d/4);return 1<b.length&&b[b.length-1]<=b[b.length-2]&&(a+=.5),a},pl=function(n,a,d){let b=Vh(n,a,d),R;for(let G=0;G<a.length-1;G++){if(a[G]===a[G+1])continue;const ce=[].concat(a);ce[G]=!ce[G],ce[G+1]=!ce[G+1];const Oe=Vh(n,ce,d);Oe>b&&(b=Oe,R=ce)}return R?pl(n,R,d):a},jh=function(n,a){const d=[];for(let b=0;b<n.length;b++)d.push(n[b]),a[b]!==void 0&&d.push(a[b]?`
`:" ");return d.join("")},t.isNumber$$module$build$src$core$utils$string=function(n){return/^\s*-?\d+(\.\d+)?\s*$/.test(n)},_c=function(n){In=n},zc=function(){return In},Cd=function(){return Ln},Oa=function(){return ql},ha=function(n){if(n=vu(n)){for(n=n.tooltip;typeof n=="function";)n=n();if(typeof n!="string")throw Error("Tooltip function must return a string.");return n}return""},vu=function(n){for(;n&&n.tooltip;){if(typeof n.tooltip=="string"||typeof n.tooltip=="function")return n;n=n.tooltip}return null},_h=function(){document.querySelector(".blocklyTooltipDiv")||(ql=document.createElement("div"),ql.className="blocklyTooltipDiv",(N()||document.body).appendChild(ql))},ei=function(n){n.mouseOverWrapper_=ze(n,"pointerover",null,Hc),n.mouseOutWrapper_=ze(n,"pointerout",null,Wu),n.addEventListener("pointermove",vh,!1)},Xh=function(n){n&&(it(n.mouseOverWrapper_),it(n.mouseOutWrapper_),n.removeEventListener("pointermove",vh))},Hc=function(n){Js||(n=vu(n.currentTarget),Dn!==n&&(fl(),Vn=null,Dn=n),clearTimeout(tt))},Wu=function(n){Js||(tt=setTimeout(function(){Vn=Dn=null,fl()},1),clearTimeout(vt),vt=0)},vh=function(n){if(Dn&&Dn.tooltip&&!Js)if(Ln){const a=sn-n.pageX;n=Hn-n.pageY,Math.sqrt(a*a+n*n)>Ri&&fl()}else Vn!==Dn&&(clearTimeout(vt),sn=n.pageX,Hn=n.pageY,vt=setTimeout(Pp,ef))},Md=function(){Vn=Dn=null,fl()},fl=function(){Ln&&(Ln=!1,ql&&(ql.style.display="none")),vt&&(clearTimeout(vt),vt=0)},Ad=function(){fl(),Js=!0},yh=function(){Js=!1},eo=function(){ql&&Dn&&(typeof In=="function"?In(ql,Dn):Ko())},Ko=function(){var n=ha(Dn);n=t.wrap$$module$build$src$core$utils$string(n,_t),n=n.split(`
`);for(let a=0;a<n.length;a++){const d=document.createElement("div");d.appendChild(document.createTextNode(n[a])),ql.appendChild(d)}},kf=function(n){const a=document.documentElement.clientWidth,d=document.documentElement.clientHeight;let b=sn;b=n?b-(dr+ql.offsetWidth):b+dr;let R=Hn+Xa;return R+ql.offsetHeight>d+window.scrollY&&(R-=ql.offsetHeight+2*Xa),n?b=Math.max(h0-window.scrollX,b):b+ql.offsetWidth>a+window.scrollX-2*h0&&(b=a-ql.offsetWidth-2*h0),{x:b,y:R}},Pp=function(){if(!Js&&(Vn=Dn,ql)){ql.textContent="",eo();var n=Dn.RTL;ql.style.direction=n?"rtl":"ltr",ql.style.display="block",Ln=!0;var{x:a,y:d}=kf(n);ql.style.left=a+"px",ql.style.top=d+"px"}},ml=function(n,a){for(const d in a)n[d]=a[d]!==null&&typeof a[d]=="object"?ml(n[d]||Object.create(null),a[d]):a[d];return n},gl=function(n){return n.bubbleIsVisible!==void 0&&n.setBubbleVisible!==void 0},vc=function(){return lE},bh=function(n){lE=n},Yh=function(){return Hf},Vu=function(n){Hf=n},La=function(n){n=`${n}`.toLowerCase().trim();var a=kw[n];if(a||(a=n.substring(0,2)==="0x"?"#"+n.substring(2):n,a=a[0]==="#"?a:"#"+a,/^#[0-9a-f]{6}$/.test(a)))return a;if(/^#[0-9a-f]{3}$/.test(a))return["#",a[1],a[1],a[2],a[2],a[3],a[3]].join("");var d=n.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return d&&(n=Number(d[1]),a=Number(d[2]),d=Number(d[3]),0<=n&&256>n&&0<=a&&256>a&&0<=d&&256>d)?ju(n,a,d):null},ju=function(n,a,d){return a=n<<16|a<<8|d,16>n?"#"+(16777216|a).toString(16).substr(1):"#"+a.toString(16)},Kh=function(n){return n=La(n),n?(n=parseInt(n.substr(1),16),[n>>16,n>>8&255,n&255]):[0,0,0]},yc=function(n,a,d){let b=0,R=0,G=0;if(a===0)G=R=b=d;else{const ce=Math.floor(n/60),Oe=n/60-ce;n=d*(1-a);const Nt=d*(1-a*Oe);switch(a=d*(1-a*(1-Oe)),ce){case 1:b=Nt,R=d,G=n;break;case 2:b=n,R=d,G=a;break;case 3:b=n,R=Nt,G=d;break;case 4:b=a,R=n,G=d;break;case 5:b=d,R=n,G=Nt;break;case 6:case 0:b=d,R=a,G=n}}return ju(Math.floor(b),Math.floor(R),Math.floor(G))},bc=function(n,a,d){return n=La(n),!n||(a=La(a),!a)?null:(n=Kh(n),a=Kh(a),ju(Math.round(a[0]+d*(n[0]-a[0])),Math.round(a[1]+d*(n[1]-a[1])),Math.round(a[2]+d*(n[2]-a[2]))))},Xu=function(n){return yc(n,lE,255*Hf)},Id=function(n,a,d){const b=[];var R=n.split("");R.push("");var G=0;n=[];let ce=null;for(let $n=0;$n<R.length;$n++){var Oe=R[$n];if(G===0)if(Oe==="%")(G=n.join(""))&&b.push(G),n.length=0,G=1;else if(d&&Oe===`
`){const No=n.join("");No&&b.push(No),n.length=0,b.push(Oe)}else n.push(Oe);else if(G===1)Oe==="%"?(n.push(Oe),G=0):a&&"0"<=Oe&&"9">=Oe?(G=2,ce=Oe,(Oe=n.join(""))&&b.push(Oe),n.length=0):Oe==="{"?G=3:(n.push("%",Oe),G=0);else if(G===2)if("0"<=Oe&&"9">=Oe)ce+=Oe;else{var Nt=void 0;b.push(parseInt((Nt=ce)!=null?Nt:"",10)),$n--,G=0}else G===3&&(Oe===""?(n.splice(0,0,"%{"),$n--,G=0):Oe!=="}"?n.push(Oe):(G=n.join(""),/[A-Z]\w*/i.test(G)?(Oe=G.toUpperCase(),(Oe=Oe.startsWith("BKY_")?Oe.substring(4):null)&&Oe in t.Msg$$module$build$src$core$msg?(G=t.Msg$$module$build$src$core$msg[Oe],typeof G=="string"?Array.prototype.push.apply(b,Id(G,a,d)):a?b.push(`${G}`):b.push(G)):b.push("%{"+G+"}")):b.push("%{"+G+"}"),G=n.length=0))}for((a=n.join(""))&&b.push(a),Nt=[],n.length=0,R=0;R<b.length;R++)typeof b[R]!="string"||d&&b[R]===`
`?((a=n.join(""))&&Nt.push(a),n.length=0,Nt.push(b[R])):n.push(b[R]);return(a=n.join(""))&&Nt.push(a),n.length=0,Nt},Jo=function(n){return Id(n,!0,!0)},Er=function(n){return typeof n!="string"?n:(n=Id(n,!1,!1),n.length?String(n[0]):"")},zl=function(n){let a=!0;const d=t.Msg$$module$build$src$core$msg,b=n.match(/%{BKY_[A-Z]\w*}/gi);if(b)for(let R=0;R<b.length;R++){const G=b[R].toUpperCase();d[G.slice(6,-1)]===void 0&&(console.warn("No message string for "+b[R]+" in "+n),a=!1)}return a},Qi=function(n){const a=typeof n=="string"?Er(n):n;var d=Number(a);if(!isNaN(d)&&0<=d&&360>=d)return{hue:d,hex:yc(d,vc(),255*Yh())};if(d=La(a))return{hue:null,hex:d};throw d='Invalid colour: "'+a+'"',n!==a&&(d+=' (from "'+n+'")'),Error(d)},Qo=function(n){return n.getProcedureModel!==void 0&&n.doProcedureUpdate!==void 0&&n.isProcedureDef!==void 0},ve=function(n){return n.startPublishing!==void 0&&n.stopPublishing!==void 0},Hs=function(n,a){i(Lt.FIELD,n,a)},Na=function(n){o(Lt.FIELD,n)},t.fromJson$$module$build$src$core$field_registry=function(n){return Gf.fromJsonInternal(n)},Br=function(n){const a=p(Lt.FIELD,n.type);if(a){if(typeof a.fromJson!="function")throw new TypeError("returned Field was not a IRegistrableField");return a.fromJson(n)}return console.warn("Blockly could not create a field of type "+n.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},zn=function(n){let a=!1;const d=n.map(([ce,Oe])=>typeof ce=="string"?[Er(ce),Oe]:(a=!0,[ce.alt!==null?Object.assign({},ce,{alt:Er(ce.alt)}):Object.assign({},ce),Oe]));if(a||2>n.length)return{options:d};var b=d.map(([ce])=>ce),R=Uc(b);n=gh(b,R);const G=_u(b,R);return!n&&!G||R<=n+G?{options:d}:(R=n?b[0].substring(0,n-1):void 0,b=G?b[0].substr(1-G):void 0,{options:Fp(d,n,G),prefix:R,suffix:b})},Fp=function(n,a,d){return n.map(([b,R])=>[b.substring(a,b.length-d),R])},da=function(n){if(!Array.isArray(n))throw TypeError("FieldDropdown options must be an array.");if(!n.length)throw TypeError("FieldDropdown options must not be an empty array.");let a=!1;for(let d=0;d<n.length;d++){const b=n[d];Array.isArray(b)?typeof b[1]!="string"?(a=!0,console.error("Invalid option["+d+"]: Each FieldDropdown option id must be a string. Found "+b[1]+" in: ",b)):b[0]&&typeof b[0]!="string"&&typeof b[0].src!="string"&&(a=!0,console.error("Invalid option["+d+"]: Each FieldDropdown option must have a string label or image description. Found"+b[0]+" in: ",b)):(a=!0,console.error("Invalid option["+d+"]: Each FieldDropdown option must be an array. Found: ",b))}if(a)throw TypeError("Found invalid FieldDropdown options.")},t.register$$module$build$src$core$extensions=function(n,a){if(typeof n!="string"||n.trim()==="")throw Error('Error: Invalid extension name "'+n+'"');if(d0[n])throw Error('Error: Extension "'+n+'" is already registered.');if(typeof a!="function")throw Error('Error: Extension "'+n+'" must be a function');d0[n]=a},t.registerMixin$$module$build$src$core$extensions=function(n,a){if(!a||typeof a!="object")throw Error('Error: Mixin "'+n+'" must be a object');t.register$$module$build$src$core$extensions(n,function(){this.mixin(a)})},t.registerMutator$$module$build$src$core$extensions=function(n,a,d,b){const R='Error when registering mutator "'+n+'": ';Ec(R,a);const G=Ro(a,R);if(d&&typeof d!="function")throw Error(R+'Extension "'+n+'" is not a function');t.register$$module$build$src$core$extensions(n,function(){G&&this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(b||[],this)),this.mixin(a),d&&d.apply(this)})},Yr=function(n){fi(n)?delete d0[n]:console.warn('No extension mapping for name "'+n+'" found to unregister')},fi=function(n){return!!d0[n]},Si=function(n,a,d){const b=d0[n];if(typeof b!="function")throw Error('Error: Extension "'+n+'" not found.');let R;if(d?Mi(n,a):R=fo(a),b.apply(a),d)Ec('Error after applying mutator "'+n+'": ',a);else if(!Rd(R,a))throw Error('Error when applying extension "'+n+'": mutation properties changed when applying a non-mutator extension.')},Mi=function(n,a){if(fo(a).length)throw Error('Error: tried to apply mutation "'+n+'" to a block that already has mutator functions.  Block id: '+a.id)},Tc=function(n,a){return to(n.mutationToDom,n.domToMutation,a+" mutationToDom/domToMutation")},Io=function(n,a){return to(n.saveExtraState,n.loadExtraState,a+" saveExtraState/loadExtraState")},Ro=function(n,a){return to(n.compose,n.decompose,a+" compose/decompose")},to=function(n,a,d){if(n&&a){if(typeof n!="function"||typeof a!="function")throw Error(d+" must be a function");return!0}if(!n&&!a)return!1;throw Error(d+"Must have both or neither functions")},Ec=function(n,a){const d=Tc(a,n),b=Io(a,n);if(!d&&!b)throw Error(n+"Mutations must contain either XML hooks, or JSON hooks, or both");Ro(a,n)},fo=function(n){const a=[];return n.domToMutation!==void 0&&a.push(n.domToMutation),n.mutationToDom!==void 0&&a.push(n.mutationToDom),n.saveExtraState!==void 0&&a.push(n.saveExtraState),n.loadExtraState!==void 0&&a.push(n.loadExtraState),n.compose!==void 0&&a.push(n.compose),n.decompose!==void 0&&a.push(n.decompose),a},Rd=function(n,a){if(a=fo(a),a.length!==n.length)return!1;for(let d=0;d<a.length;d++)if(n[d]!==a[d])return!1;return!0},kd=function(n){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")n();else{const a=setInterval(function(){document.readyState==="complete"&&(clearInterval(a),n())},10)}},t.buildTooltipForDropdown$$module$build$src$core$extensions=function(n,a){const d=[];return function(){d.indexOf(this.type)===-1&&(Th(this,n,a),d.push(this.type)),this.setTooltip((function(){const b=String(this.getFieldValue(n));return Er(a[b])}).bind(this))}},Th=function(n,a,d){var b=n.getField(a);if(b instanceof Ud&&!b.isOptionListDynamic()){b=b.getOptions();for(const[,R]of b)d[R]===void 0&&console.warn(`No tooltip mapping for value ${R} of field ${a} of block type ${n.type}.`)}},t.buildTooltipWithFieldText$$module$build$src$core$extensions=function(n,a){return function(){this.setTooltip((function(){const d=this.getField(a);return Er(n).replace("%1",d?d.getText():"")}).bind(this))}},pa=function(){const n=this.tooltip;this.setTooltip((function(){const a=this.getParent();return a&&a.getInputsInline()&&a.tooltip||n}).bind(this))},Cn=function(n,a){return" "+n+","+a+" "},os=function(n,a){return" "+n+a.join("")},_s=function(n,a){return" M "+n+","+a+" "},ti=function(n,a){return" m "+n+","+a+" "},_l=function(n,a){return" l "+n+","+a+" "},vl=function(n){return" l"+n.join("")},cn=function(n,a){return" "+n+" "+a+" "},Pr=function(n,a,d,b){return n+" "+d+" "+d+" "+a+b},qi=function(n,a){i(Lt.ICON,n.toString(),a)},Up=function(n){o(Lt.ICON,n)},Gc=function(n){const a=n.getProcedureMap().getProcedures().filter(b=>!b.getReturnTypes()).map(b=>[b.getName(),b.getParameters().map(R=>R.getName()),!1]);n.getBlocksByType("procedures_defnoreturn",!1).forEach(b=>{!Qo(b)&&li(b)&&a.push(b.getProcedureDef())});const d=n.getProcedureMap().getProcedures().filter(b=>!!b.getReturnTypes()).map(b=>[b.getName(),b.getParameters().map(R=>R.getName()),!0]);return n.getBlocksByType("procedures_defreturn",!1).forEach(b=>{!Qo(b)&&li(b)&&d.push(b.getProcedureDef())}),a.sort(ks),d.sort(ks),[a,d]},ks=function(n,a){return n[0].localeCompare(a[0],void 0,{sensitivity:"base"})},t.findLegalName$$module$build$src$core$procedures=function(n,a){if(a.isInFlyout)return n;for(n=n||t.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!ko(n,a.workspace,a);){const d=n.match(/^(.*?)(\d+)$/);n=d?d[1]+(parseInt(d[2])+1):n+"2"}return n},ko=function(n,a,d){return!dn(n,a,d)},dn=function(n,a,d){for(const b of a.getAllBlocks(!1))if(b!==d&&li(b)&&t.Names$$module$build$src$core$names.equals(b.getProcedureDef()[0],n))return!0;d=d&&Qo(d)?d==null?void 0:d.getProcedureModel():void 0;for(const b of a.getProcedureMap().getProcedures())if(b!==d&&t.Names$$module$build$src$core$names.equals(b.getName(),n))return!0;return!1},t.rename$$module$build$src$core$procedures=function(n){var a=this.getSourceBlock();if(!a)throw new Qs;n=n.trim();const d=t.findLegalName$$module$build$src$core$procedures(n,a);Qo(a)&&!a.isInsertionMarker()&&a.getProcedureModel().setName(d);const b=this.getValue();if(b!==n&&b!==d)for(n=a.workspace.getAllBlocks(!1),a=0;a<n.length;a++){const R=n[a];R.renameProcedure&&R.renameProcedure(b,d)}return d},rn=function(n){function a(G,ce){for(let Nt=0;Nt<G.length;Nt++){var Oe=G[Nt][0];const $n=G[Nt][1],No=t.createElement$$module$build$src$core$utils$xml("block");No.setAttribute("type",ce),No.setAttribute("gap","16");const $o=t.createElement$$module$build$src$core$utils$xml("mutation");for($o.setAttribute("name",Oe),No.appendChild($o),Oe=0;Oe<$n.length;Oe++){const Sp=t.createElement$$module$build$src$core$utils$xml("arg");Sp.setAttribute("name",$n[Oe]),$o.appendChild(Sp)}d.push(No)}}const d=[];if(Rr.procedures_defnoreturn){var b=t.createElement$$module$build$src$core$utils$xml("block");b.setAttribute("type","procedures_defnoreturn"),b.setAttribute("gap","16");var R=t.createElement$$module$build$src$core$utils$xml("field");R.setAttribute("name","NAME"),R.appendChild(t.createTextNode$$module$build$src$core$utils$xml(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),b.appendChild(R),d.push(b)}return Rr.procedures_defreturn&&(b=t.createElement$$module$build$src$core$utils$xml("block"),b.setAttribute("type","procedures_defreturn"),b.setAttribute("gap","16"),R=t.createElement$$module$build$src$core$utils$xml("field"),R.setAttribute("name","NAME"),R.appendChild(t.createTextNode$$module$build$src$core$utils$xml(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),b.appendChild(R),d.push(b)),Rr.procedures_ifreturn&&(b=t.createElement$$module$build$src$core$utils$xml("block"),b.setAttribute("type","procedures_ifreturn"),b.setAttribute("gap","16"),d.push(b)),d.length&&d[d.length-1].setAttribute("gap","24"),n=Gc(n),a(n[0],"procedures_callnoreturn"),a(n[1],"procedures_callreturn"),d},Da=function(n){var a=[],d=n.getBlocksByType("procedures_mutatorarg",!1);for(let G=0,ce;ce=d[G];G++)a.push(ce.getFieldValue("NAME"));d=t.createElement$$module$build$src$core$utils$xml("xml");const b=t.createElement$$module$build$src$core$utils$xml("block");b.setAttribute("type","procedures_mutatorarg");const R=t.createElement$$module$build$src$core$utils$xml("field");R.setAttribute("name","NAME"),a=ui(t.DEFAULT_ARG$$module$build$src$core$procedures,a),a=t.createTextNode$$module$build$src$core$utils$xml(a),R.appendChild(a),b.appendChild(R),d.appendChild(b),n.updateToolbox(d)},Yu=function(n){if(n.type===Ks&&n.bubbleType==="mutator"&&n.isOpen&&n.blockId){n=v(n.workspaceId).getBlockById(n.blockId);var a=n.type;(a==="procedures_defnoreturn"||a==="procedures_defreturn")&&(n=n.getIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),Da(n),n.addChangeListener(Of))}},Of=function(n){(n.type===t.CREATE$$module$build$src$core$events$utils||n.type===t.DELETE$$module$build$src$core$events$utils||n.type===t.CHANGE$$module$build$src$core$events$utils||n.type===Qc)&&(n=v(n.workspaceId),Da(n))},yu=function(n,a){return a.getAllBlocks(!1).filter(d=>qo(d,n)||ur(d)&&t.Names$$module$build$src$core$names.equals(d.getProcedureCall(),n))},qo=function(n,a){return Qo(n)&&!n.isProcedureDef()&&n.getProcedureModel()&&t.Names$$module$build$src$core$names.equals(n.getProcedureModel().getName(),a)},t.mutateCallers$$module$build$src$core$procedures=function(n){const a=ae();var d=n.getProcedureDef()[0];const b=n.mutationToDom(!0);n=yu(d,n.workspace);for(let G=0,ce;ce=n[G];G++){d=(d=ce.mutationToDom())&&gn(d),ce.domToMutation&&ce.domToMutation(b);var R=ce.mutationToDom();R=R&&gn(R),d!==R&&(fe(!1),he(new(xe(t.CHANGE$$module$build$src$core$events$utils))(ce,"mutation",null,d,R)),fe(a))}},t.getDefinition$$module$build$src$core$procedures=function(n,a){for(const d of a.getAllBlocks(!1))if(Qo(d)&&d.isProcedureDef()&&t.Names$$module$build$src$core$names.equals(d.getProcedureModel().getName(),n)||li(d)&&t.Names$$module$build$src$core$names.equals(d.getProcedureDef()[0],n))return d;return null},as=function(n){return n.isDynamic},fa=function(n){return n.pathDown!==void 0&&n.pathUp!==void 0},Ui=function(n){return n.pathLeft!==void 0&&n.pathRight!==void 0},ma=function(n){let a=n.outputConnection;return(!a||n.previousConnection&&n.previousConnection.isConnected())&&(a=n.previousConnection),a},bu=function(n,a){if(!n||!a)throw Error("Cannot connect null connections.");n.targetConnection=a,a.targetConnection=n},Od=function(n,a){let d=null;a=a.outputConnection;const b=a==null?void 0:a.getConnectionChecker();for(let R=0,G;G=n.inputList[R];R++){const ce=G.connection;let Oe;if(ce&&((Oe=b)!=null&&Oe.canConnect(a,ce,!1))){if(d)return null;d=ce}}return d},Ku=function(n,a){let d;for(;d=Od(n,a);)if(n=d.targetBlock(),!n||n.isShadow())return d;return null},Gs=function(n,a){i(Lt.RENDERER,n,a)},Ld=function(n){o(Lt.RENDERER,n)},Wc=function(n,a,d){return n=new(h(Lt.RENDERER,n))(n),n.init(a,d),n},Jh=function(n){Ji(n.getTargetWorkspace(),void 0,"String")},ga=function(n){Ji(n.getTargetWorkspace(),void 0,"Number")},yl=function(n){Ji(n.getTargetWorkspace(),void 0,"Colour")},zp=function(n){let a=[],d=document.createElement("button");return d.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),d.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),a.push(d),d=document.createElement("button"),d.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),d.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),a.push(d),d=document.createElement("button"),d.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),d.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),a.push(d),n.registerButtonCallback("CREATE_VARIABLE_STRING",Jh),n.registerButtonCallback("CREATE_VARIABLE_NUMBER",ga),n.registerButtonCallback("CREATE_VARIABLE_COLOUR",yl),n=Hl(n),a=a.concat(n)},Hl=function(n){n=n.getAllVariables();const a=[];if(0<n.length){if(Rr.variables_set_dynamic){var d=n[n.length-1];const b=t.createElement$$module$build$src$core$utils$xml("block");b.setAttribute("type","variables_set_dynamic"),b.setAttribute("gap","24"),b.appendChild(Cs(d)),a.push(b)}if(Rr.variables_get_dynamic){n.sort(jp.compareByName);for(let b=0,R;R=n[b];b++)d=t.createElement$$module$build$src$core$utils$xml("block"),d.setAttribute("type","variables_get_dynamic"),d.setAttribute("gap","8"),d.appendChild(Cs(R)),a.push(d)}}return a},Tu=function(n){return n.toCopyData!==void 0},Qh=function(){Oi.registry.register({name:Xf.ESCAPE,preconditionFn(n){return!n.options.readOnly},callback(n){return n.hideChaff(),!0},keyCodes:[kr.ESC]})},$c=function(){Oi.registry.register({name:Xf.DELETE,preconditionFn(n){const a=k();return!n.options.readOnly&&a!=null&&a.isDeletable()},callback(n,a){return a.preventDefault(),Dm.inProgress()?!1:(k().checkAndDelete(),!0)},keyCodes:[kr.DELETE,kr.BACKSPACE]})},ls=function(){const n=Oi.registry.createSerializedKey(kr.C,[kr.CTRL]),a=Oi.registry.createSerializedKey(kr.C,[kr.ALT]),d=Oi.registry.createSerializedKey(kr.C,[kr.META]);Oi.registry.register({name:Xf.COPY,preconditionFn(b){const R=k();return!b.options.readOnly&&!Dm.inProgress()&&R!=null&&R.isDeletable()&&R.isMovable()&&Tu(R)},callback(b,R){return R.preventDefault(),b.hideChaff(),R=k(),!R||!Tu(R)?!1:(Wv=R.toCopyData(),Lb=b,!!Wv)},keyCodes:[n,a,d]})},Eu=function(){const n=Oi.registry.createSerializedKey(kr.X,[kr.CTRL]),a=Oi.registry.createSerializedKey(kr.X,[kr.ALT]),d=Oi.registry.createSerializedKey(kr.X,[kr.META]);Oi.registry.register({name:Xf.CUT,preconditionFn(b){const R=k();return!b.options.readOnly&&!Dm.inProgress()&&R!=null&&R instanceof jf&&R.isDeletable()&&R.isMovable()&&!R.workspace.isFlyout},callback(b){const R=k();return!R||!Tu(R)?!1:(Wv=R.toCopyData(),Lb=b,R.checkAndDelete(),!0)},keyCodes:[n,a,d]})},Ju=function(){const n=Oi.registry.createSerializedKey(kr.V,[kr.CTRL]),a=Oi.registry.createSerializedKey(kr.V,[kr.ALT]),d=Oi.registry.createSerializedKey(kr.V,[kr.META]);Oi.registry.register({name:Xf.PASTE,preconditionFn(b){return!b.options.readOnly&&!Dm.inProgress()},callback(){return Wv&&Lb?!!Zs(Wv,Lb):!1},keyCodes:[n,a,d]})},mo=function(){const n=Oi.registry.createSerializedKey(kr.Z,[kr.CTRL]),a=Oi.registry.createSerializedKey(kr.Z,[kr.ALT]),d=Oi.registry.createSerializedKey(kr.Z,[kr.META]);Oi.registry.register({name:Xf.UNDO,preconditionFn(b){return!b.options.readOnly&&!Dm.inProgress()},callback(b){return b.hideChaff(),b.undo(!1),!0},keyCodes:[n,a,d]})},Ba=function(){const n=Oi.registry.createSerializedKey(kr.Z,[kr.SHIFT,kr.CTRL]),a=Oi.registry.createSerializedKey(kr.Z,[kr.SHIFT,kr.ALT]),d=Oi.registry.createSerializedKey(kr.Z,[kr.SHIFT,kr.META]),b=Oi.registry.createSerializedKey(kr.Y,[kr.CTRL]);Oi.registry.register({name:Xf.REDO,preconditionFn(R){return!Dm.inProgress()&&!R.options.readOnly},callback(R){return R.hideChaff(),R.undo(!0),!0},keyCodes:[n,a,d,b]})},vs=function(){Qh(),$c(),ls(),Eu(),Ju(),mo(),Ba()},no=function(n){const a={id:n.getId(),name:n.getName(),returnTypes:n.getReturnTypes()};return n.getParameters().length&&(a.parameters=n.getParameters().map(d=>Vc(d))),a},Vc=function(n){const a={id:n.getId(),name:n.getName()};return n.getTypes().length&&(a.types=n.getTypes()),a},Ws=function(n,a,d,b){if(n=new n(b,d.name,d.id).setReturnTypes(d.returnTypes),!d.parameters)return n;for(const[R,G]of d.parameters.entries())n.insertParameter(Pa(a,G,b),R);return n},Pa=function(n,a,d){return n=new n(d,a.name,a.id),a.types&&n.setTypes(a.types),n},Qu=function(n){const a=Object.create(null),d=m(Lt.SERIALIZER,!0);for(const b in d){let R;const G=(R=d[b])==null?void 0:R.save(n);G&&(a[b]=G)}return a},hp=function(n,a,{recordUndo:d=!1}={}){var b=m(Lt.SERIALIZER,!0);if(b){b=Object.entries(b).sort((G,ce)=>ce[1].priority-G[1].priority);var R=ae();fe(d),(d=t.getGroup$$module$build$src$core$events$utils())||t.setGroup$$module$build$src$core$events$utils(!0),J(),a instanceof rf&&a.setResizesEnabled(!1);for(const[,G]of b.reverse()){let ce;(ce=G)==null||ce.clear(a)}for(let[G,ce]of b.reverse())if(n[G]){let Oe;(Oe=ce)==null||Oe.load(n[G],a)}a instanceof rf&&a.setResizesEnabled(!0),oe(),he(new(xe(jl))(a)),t.setGroup$$module$build$src$core$events$utils(d),fe(R)}},jc=function(n,a,d){const b=d.getBoundingRectangle(),R=b.right-b.left,G=Xr(a.top,b.top,a.top+a.height-(b.bottom-b.top))-b.top;let ce=a.left;return a=a.left+a.width-R,n.RTL?ce=Math.min(a,ce):a=Math.max(ce,a),(n=Xr(ce,b.left,a)-b.left)||G?(d.moveBy(n,G,["inbounds"]),!0):!1},Zo=function(n){return a=>{var d=n.getMetricsManager();if(d.hasFixedEdges()&&!n.isDragging()){var b;if(td.indexOf((b=a.type)!=null?b:"")!==-1){b=d.getScrollMetrics(!0);const R=mi(n,a);R&&(d=t.getGroup$$module$build$src$core$events$utils()||!1,t.setGroup$$module$build$src$core$events$utils(a.group),jc(n,b,R)&&!a.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),t.setGroup$$module$build$src$core$events$utils(d))}else a.type===ts&&a.scale&&a.oldScale&&a.scale>a.oldScale&&wn(n)}}},mi=function(n,a){let d=null;switch(a.type){case t.CREATE$$module$build$src$core$events$utils:case t.MOVE$$module$build$src$core$events$utils:(d=n.getBlockById(a.blockId))&&(d=d.getRootBlock());break;case yo:case Ga:d=n.getCommentById(a.commentId)}return d},wn=function(n){var a=n.getMetricsManager();if(a.hasFixedEdges()&&!n.isDragging()){a=a.getScrollMetrics(!0);var d=n.getTopBoundedElements();for(let b=0,R;R=d[b];b++)jc(n,a,R)}},On=function(n,a){const d=[];for(const b of n.getIcons())(!gl(b)||b.bubbleIsVisible())&&(d.push({location:a,icon:b}),b.onLocationChange(a));for(const b of n.getChildren(!1))d.push(...On(b,tn.sum(a,b.relativeCoords)));return d},gr=function(){Kr.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.UNDO},preconditionFn(n){return 0<n.workspace.getUndoStack().length?"enabled":"disabled"},callback(n){n.workspace.undo(!1)},scopeType:Kr.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},Ir=function(){Kr.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.REDO},preconditionFn(n){return 0<n.workspace.getRedoStack().length?"enabled":"disabled"},callback(n){n.workspace.undo(!0)},scopeType:Kr.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Fr=function(){Kr.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(n){return n.workspace.isMovable()?1<n.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(n){n.workspace.cleanUp()},scopeType:Kr.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Vs=function(n,a){function d(G){R--,G.setCollapsed(n),R===0&&t.setGroup$$module$build$src$core$events$utils(!1)}let b=0,R=0;t.setGroup$$module$build$src$core$events$utils(!0);for(let G=0;G<a.length;G++){let ce=a[G];for(;ce;)R++,setTimeout(d.bind(null,ce),b),ce=ce.getNextBlock(),b+=10}},Ai=function(){Kr.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(n){if(n.workspace.options.collapse){n=n.workspace.getTopBlocks(!1);for(let a=0;a<n.length;a++){let d=n[a];for(;d;){if(!d.isCollapsed())return"enabled";d=d.getNextBlock()}}return"disabled"}return"hidden"},callback(n){Vs(!0,n.workspace.getTopBlocks(!0))},scopeType:Kr.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},zi=function(){Kr.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(n){if(n.workspace.options.collapse){n=n.workspace.getTopBlocks(!1);for(let a=0;a<n.length;a++){let d=n[a];for(;d;){if(d.isCollapsed())return"enabled";d=d.getNextBlock()}}return"disabled"}return"hidden"},callback(n){Vs(!1,n.workspace.getTopBlocks(!0))},scopeType:Kr.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Gl=function(n,a){if(n.isDeletable())Array.prototype.push.apply(a,n.getDescendants(!1));else{n=n.getChildren(!1);for(let d=0;d<n.length;d++)Gl(n[d],a)}},$u=function(n){const a=[];n=n.getTopBlocks(!0);for(let d=0;d<n.length;d++)Gl(n[d],a);return a},qu=function(n,a){a?t.setGroup$$module$build$src$core$events$utils(a):(t.setGroup$$module$build$src$core$events$utils(!0),a=t.getGroup$$module$build$src$core$events$utils());const d=n.shift();d&&(d.isDeadOrDying()?qu(n,a):(d.dispose(!1,!0),setTimeout(qu,10,n,a))),t.setGroup$$module$build$src$core$events$utils(!1)},Su=function(){Kr.registry.register({displayText(n){return n.workspace?(n=$u(n.workspace).length,n===1?t.Msg$$module$build$src$core$msg.DELETE_BLOCK:t.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${n}`)):""},preconditionFn(n){return n.workspace&&0<$u(n.workspace).length?"enabled":"disabled"},callback(n){if(n.workspace){n.workspace.cancelCurrentGesture();var a=$u(n.workspace);2>a.length?qu(a):Yt(t.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(a.length)),function(d){d&&qu(a)})}},scopeType:Kr.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},Os=function(){gr(),Ir(),Fr(),Ai(),zi(),Su()},ro=function(){Kr.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(n){return n=n.block,!n.isInFlyout&&n.isDeletable()&&n.isMovable()?n.isDuplicatable()?"enabled":"disabled":"hidden"},callback(n){if(n.block){var a=n.block.toCopyData();a&&Zs(a,n.block.workspace)}},scopeType:Kr.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},qh=function(){Kr.registry.register({displayText(n){return n.block.hasIcon(Mh.TYPE)?t.Msg$$module$build$src$core$msg.REMOVE_COMMENT:t.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(n){return n=n.block,!n.isInFlyout&&n.workspace.options.comments&&!n.isCollapsed()&&n.isEditable()?"enabled":"hidden"},callback(n){n=n.block,n.hasIcon(Mh.TYPE)?n.setCommentText(null):n.setCommentText("")},scopeType:Kr.ScopeType.BLOCK,id:"blockComment",weight:2})},_a=function(){Kr.registry.register({displayText(n){return n.block.getInputsInline()?t.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:t.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(n){if(n=n.block,!n.isInFlyout&&n.isMovable()&&!n.isCollapsed()){for(let a=1;a<n.inputList.length;a++)if(!(n.inputList[a-1]instanceof Fb||n.inputList[a]instanceof Fb))return"enabled"}return"hidden"},callback(n){n.block.setInputsInline(!n.block.getInputsInline())},scopeType:Kr.ScopeType.BLOCK,id:"blockInline",weight:3})},wu=function(){Kr.registry.register({displayText(n){return n.block.isCollapsed()?t.Msg$$module$build$src$core$msg.EXPAND_BLOCK:t.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(n){return n=n.block,!n.isInFlyout&&n.isMovable()&&n.workspace.options.collapse?"enabled":"hidden"},callback(n){n.block.setCollapsed(!n.block.isCollapsed())},scopeType:Kr.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},xu=function(){Kr.registry.register({displayText(n){return n.block.isEnabled()?t.Msg$$module$build$src$core$msg.DISABLE_BLOCK:t.Msg$$module$build$src$core$msg.ENABLE_BLOCK},preconditionFn(n){return n=n.block,!n.isInFlyout&&n.workspace.options.disable&&n.isEditable()?n.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback(n){n=n.block;const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0),n.setEnabled(!n.isEnabled()),t.setGroup$$module$build$src$core$events$utils(a)},scopeType:Kr.ScopeType.BLOCK,id:"blockDisable",weight:5})},js=function(){Kr.registry.register({displayText(n){var a=n.block;return n=a.getDescendants(!1).length,(a=a.getNextBlock())&&(n-=a.getDescendants(!1).length),n===1?t.Msg$$module$build$src$core$msg.DELETE_BLOCK:t.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${n}`)},preconditionFn(n){return!n.block.isInFlyout&&n.block.isDeletable()?"enabled":"hidden"},callback(n){n.block&&n.block.checkAndDelete()},scopeType:Kr.ScopeType.BLOCK,id:"blockDelete",weight:6})},go=function(){Kr.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.HELP},preconditionFn(n){return n=n.block,(typeof n.helpUrl=="function"?n.helpUrl():n.helpUrl)?"enabled":"hidden"},callback(n){n.block.showHelp()},scopeType:Kr.ScopeType.BLOCK,id:"blockHelp",weight:7})},Fa=function(){ro(),qh(),_a(),wu(),xu(),js(),go()},_o=function(){Os(),Fa()},Zu=function(n,a){var d=null;d=typeof n=="string"?document.getElementById(n)||document.querySelector(n):n;let b;if(!document.contains(d)&&document!==((b=d)==null?void 0:b.ownerDocument))throw Error("Error: container is not in current document");n=new Lo(a||{}),a=document.createElement("div"),a.className="injectionDiv",a.tabIndex=0,sr(a,Bs.LABEL,t.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),d.appendChild(a),d=Cu(a,n);const R=Eh(a,d,n);return Xc(R),O(R),z(R),a.addEventListener("focusin",function(){O(R)}),R},Cu=function(n,a){n.setAttribute("dir","LTR"),pt(a.hasCss,a.pathToMedia),n=Z(Be.SVG,{xmlns:mg,"xmlns:html":Cc,"xmlns:xlink":Ts,version:"1.1",class:"blocklySvg",tabindex:"0"},n);const d=Z(Be.DEFS,{},n),b=String(Math.random()).substring(2);return a.gridPattern=aE.createDom(b,a.gridOptions,d),n},Eh=function(n,a,d){d.parentWorkspace=null,d=new rf(d);const b=d.options;d.scale=b.zoomOptions.startScale,a.appendChild(d.createDom("blocklyMainBackground",n));var R=d.getRenderer().getClassName();return R&&ke(n,R),(R=d.getTheme().getClassName())&&ke(n,R),!b.hasCategories&&b.languageTree&&(n=d.addFlyout(Be.SVG),He(n,a)),b.hasTrashcan&&d.addTrashcan(),b.zoomOptions&&b.zoomOptions.controls&&d.addZoomControls(),d.getThemeManager().subscribe(a,"workspaceBackgroundColour","background-color"),d.translate(0,0),d.addChangeListener(Zo(d)),z(d),Mo(),hl(),_h(),d},Xc=function(n){const a=n.options;var d=n.getParentSvg();if(we(d.parentNode,"contextmenu",null,function(b){nt(b)||b.preventDefault()}),d=we(window,"resize",null,function(){fl(),n.hideComponents(!0),ss(),up(),z(n),wn(n)}),n.setResizeHandlerWrapper(d),ji(),a.languageTree){d=n.getToolbox();const b=n.getFlyout(!0);d?d.init():b&&(b.init(n),b.show(a.languageTree),typeof b.scrollToStart=="function"&&b.scrollToStart())}a.hasTrashcan&&n.trashcan.init(),a.zoomOptions&&a.zoomOptions.controls&&n.zoomControls_.init(),a.moveOptions&&a.moveOptions.scrollbars?(n.scrollbar=new IE(n,a.moveOptions.scrollbars===!0||!!a.moveOptions.scrollbars.horizontal,a.moveOptions.scrollbars===!0||!!a.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),n.scrollbar.resize()):n.setMetrics({x:.5,y:.5}),a.hasSounds&&ys(a.pathToMedia,n)},br=function(n){const a=A();a&&!(nt(n)||a.rendered&&!a.isVisible())&&Oi.registry.onKeyDown(a,n)},ji=function(){nh||(we(document,"scroll",null,function(){const n=E();for(let a=0,d;d=n[a];a++)d instanceof rf&&d.updateInverseScreenCTM()}),we(document,"keydown",null,br),ze(document,"touchend",null,Ze),ze(document,"touchcancel",null,Ze),kn&&we(window,"orientationchange",document,function(){z(A())})),nh=!0},ys=function(n,a){function d(){for(;R.length;){const G=R.pop();G&&it(G)}b.preload()}const b=a.getAudioManager();b.load([n+"click.mp3",n+"click.wav",n+"click.ogg"],"click"),b.load([n+"disconnect.wav",n+"disconnect.mp3",n+"disconnect.ogg"],"disconnect"),b.load([n+"delete.mp3",n+"delete.ogg",n+"delete.wav"],"delete");const R=[];R.push(we(document,"pointermove",null,d,!0)),R.push(we(document,"touchstart",null,d,!0))},ea=function(n){return n.getType!==void 0&&n.initView!==void 0&&n.dispose!==void 0&&n.getWeight!==void 0&&n.getSize!==void 0&&n.applyColour!==void 0&&n.hideForInsertionMarker!==void 0&&n.updateEditable!==void 0&&n.updateCollapsed!==void 0&&n.isShownWhenCollapsed!==void 0&&n.setOffsetInBlock!==void 0&&n.onLocationChange!==void 0&&n.onClick!==void 0},Ls=function(n){return n.paste!==void 0},Gn=function(n){return n.isSelectable()},Sc=function(n){A().hideChaff(n)},on=on||{},on.scope={},on.ASSUME_ES5=!1,on.ASSUME_NO_NATIVE_MAP=!1,on.ASSUME_NO_NATIVE_SET=!1,on.SIMPLE_FROUND_POLYFILL=!1,on.ISOLATE_POLYFILLS=!1,on.FORCE_POLYFILL_PROMISE=!1,on.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,on.defineProperty=on.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(n,a,d){return n==Array.prototype||n==Object.prototype||(n[a]=d.value),n},on.getGlobal=function(n){n=[typeof globalThis=="object"&&globalThis,n,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ed=="object"&&Ed];for(var a=0;a<n.length;++a){var d=n[a];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")},on.global=on.getGlobal(this),on.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",on.TRUST_ES6_POLYFILLS=!on.ISOLATE_POLYFILLS||on.IS_SYMBOL_NATIVE,on.polyfills={},on.propertyToPolyfillSymbol={},on.POLYFILL_PREFIX="$jscp$",on.polyfill=function(n,a,d,b){a&&(on.ISOLATE_POLYFILLS?on.polyfillIsolated(n,a,d,b):on.polyfillUnisolated(n,a,d,b))},on.polyfillUnisolated=function(n,a,d,b){for(d=on.global,n=n.split("."),b=0;b<n.length-1;b++){var R=n[b];if(!(R in d))return;d=d[R]}n=n[n.length-1],b=d[n],a=a(b),a!=b&&a!=null&&on.defineProperty(d,n,{configurable:!0,writable:!0,value:a})},on.polyfillIsolated=function(n,a,d,b){var R=n.split(".");n=R.length===1,b=R[0],b=!n&&b in on.polyfills?on.polyfills:on.global;for(var G=0;G<R.length-1;G++){var ce=R[G];if(!(ce in b))return;b=b[ce]}R=R[R.length-1],d=on.IS_SYMBOL_NATIVE&&d==="es6"?b[R]:null,a=a(d),a!=null&&(n?on.defineProperty(on.polyfills,R,{configurable:!0,writable:!0,value:a}):a!==d&&(on.propertyToPolyfillSymbol[R]===void 0&&(d=1e9*Math.random()>>>0,on.propertyToPolyfillSymbol[R]=on.IS_SYMBOL_NATIVE?on.global.Symbol(R):on.POLYFILL_PREFIX+d+"$"+R),on.defineProperty(b,on.propertyToPolyfillSymbol[R],{configurable:!0,writable:!0,value:a})))},on.polyfill("globalThis",function(n){return n||on.global},"es_2020","es3"),on.arrayIteratorImpl=function(n){var a=0;return function(){return a<n.length?{done:!1,value:n[a++]}:{done:!0}}},on.arrayIterator=function(n){return{next:on.arrayIteratorImpl(n)}},on.initSymbol=function(){},on.iteratorPrototype=function(n){return n={next:n},n[Symbol.iterator]=function(){return this},n},on.iteratorFromArray=function(n,a){n instanceof String&&(n+="");var d=0,b=!1,R={next:function(){if(!b&&d<n.length){var G=d++;return{value:a(G,n[G]),done:!1}}return b=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R},on.polyfill("Array.prototype.values",function(n){return n||function(){return on.iteratorFromArray(this,function(a,d){return d})}},"es8","es3"),on.polyfill("Array.prototype.flat",function(n){return n||function(a){a=a===void 0?1:a;var d=[];return Array.prototype.forEach.call(this,function(b){Array.isArray(b)&&0<a?(b=Array.prototype.flat.call(b,a-1),d.push.apply(d,b)):d.push(b)}),d}},"es9","es5"),on.owns=function(n,a){return Object.prototype.hasOwnProperty.call(n,a)},on.polyfill("Object.entries",function(n){return n||function(a){var d=[],b;for(b in a)on.owns(a,b)&&d.push([b,a[b]]);return d}},"es8","es3"),on.polyfill("Object.values",function(n){return n||function(a){var d=[],b;for(b in a)on.owns(a,b)&&d.push(a[b]);return d}},"es8","es3");var ni=Object.create(null),Zi={typeMap:ni},bl=Object.create(null),Ua="default",Lt=class{constructor(n){this.name=n}toString(){return this.name}};Lt.CONNECTION_CHECKER=new Lt("connectionChecker"),Lt.CONNECTION_PREVIEWER=new Lt("connectionPreviewer"),Lt.CURSOR=new Lt("cursor"),Lt.EVENT=new Lt("event"),Lt.FIELD=new Lt("field"),Lt.INPUT=new Lt("input"),Lt.RENDERER=new Lt("renderer"),Lt.TOOLBOX=new Lt("toolbox"),Lt.THEME=new Lt("theme"),Lt.TOOLBOX_ITEM=new Lt("toolboxItem"),Lt.FLYOUTS_VERTICAL_TOOLBOX=new Lt("flyoutsVerticalToolbox"),Lt.FLYOUTS_HORIZONTAL_TOOLBOX=new Lt("flyoutsHorizontalToolbox"),Lt.METRICS_MANAGER=new Lt("metricsManager"),Lt.BLOCK_DRAGGER=new Lt("blockDragger"),Lt.SERIALIZER=new Lt("serializer"),Lt.ICON=new Lt("icon"),Lt.PASTER=new Lt("paster");var va={DEFAULT:Ua,TEST_ONLY:Zi};va.Type=Lt,va.getAllItems=m,va.getClass=h,va.getClassFromOptions=_,va.getObject=p,va.hasItem=u,va.register=i,va.unregister=o;var Rr=Object.create(null),wc=Object.create(null),Zh,Yc=null,es,bs=[],$h={defineBlocksWithJsonArrayInternal:ne},Xs={TEST_ONLY:$h};Xs.createBlockDefinitionsFromJsonArray=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,Xs.defineBlocks=t.defineBlocks$$module$build$src$core$common,Xs.defineBlocksWithJsonArray=ee,Xs.draggingConnections=bs,Xs.getAllWorkspaces=E,Xs.getBlockTypeCounts=V,Xs.getMainWorkspace=A,Xs.getParentContainer=N,Xs.getSelected=k,Xs.getWorkspaceById=v,Xs.registerWorkspace=w,Xs.setMainWorkspace=O,Xs.setParentContainer=F,Xs.setSelected=D,Xs.svgResize=z,Xs.unregisterWorkpace=x;var Wl="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Kc={genUid:()=>{const n=Wl.length,a=[];for(let d=0;20>d;d++)a[d]=Wl.charAt(Math.random()*n);return a.join("")}},Jc=0,ec={TEST_ONLY:Kc};ec.genUid=se,ec.getNextUniqueId=ie;var vo,Ys,Mu,Qc,za,Au,qc,Zc,io,Ns,Iu,Tl,Ks,Ha,ya,Vl,ts,yo,Sh,ed,Ga,jl,td,xc,Hp,$;vo="",Ys=!0,Mu=0,t.CREATE$$module$build$src$core$events$utils="create",t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils="delete",t.DELETE$$module$build$src$core$events$utils,t.CHANGE$$module$build$src$core$events$utils="change",t.CHANGE$$module$build$src$core$events$utils,Qc="block_field_intermediate_change",t.MOVE$$module$build$src$core$events$utils="move",t.MOVE$$module$build$src$core$events$utils,za="var_create",Au="var_delete",qc="var_rename",Zc="ui",io="drag",Ns="selected",Iu="click",Tl="marker_move",Ks="bubble_open",Ha="trashcan_open",ya="toolbox_item_select",Vl="theme_change",ts="viewport_change",yo="comment_create",Sh="comment_delete",ed="comment_change",Ga="comment_move",jl="finished_loading",td=[t.CREATE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,yo,Ga],xc=[],Hp={FIRE_QUEUE:xc,fireNow:Ie,fireInternal:ge,setGroupInternal:le},$={BLOCK_CHANGE:t.CHANGE$$module$build$src$core$events$utils,BLOCK_CREATE:t.CREATE$$module$build$src$core$events$utils,BLOCK_DELETE:t.DELETE$$module$build$src$core$events$utils,BLOCK_DRAG:io,BLOCK_FIELD_INTERMEDIATE_CHANGE:Qc,BLOCK_MOVE:t.MOVE$$module$build$src$core$events$utils,BUBBLE_OPEN:Ks,BUMP_EVENTS:td,CHANGE:t.CHANGE$$module$build$src$core$events$utils,CLICK:Iu,COMMENT_CHANGE:ed,COMMENT_CREATE:yo,COMMENT_DELETE:Sh,COMMENT_MOVE:Ga,CREATE:t.CREATE$$module$build$src$core$events$utils,DELETE:t.DELETE$$module$build$src$core$events$utils,FINISHED_LOADING:jl,MARKER_MOVE:Tl,MOVE:t.MOVE$$module$build$src$core$events$utils,SELECTED:Ns,TEST_ONLY:Hp,THEME_CHANGE:Vl,TOOLBOX_ITEM_SELECT:ya,TRASHCAN_OPEN:Ha,UI:Zc,VAR_CREATE:za,VAR_DELETE:Au,VAR_RENAME:qc,VIEWPORT_CHANGE:ts},$.clearPendingUndo=te,$.disable=t.disable$$module$build$src$core$events$utils,$.disableOrphans=Ve,$.enable=t.enable$$module$build$src$core$events$utils,$.filter=j,$.fire=he,$.fromJson=Le,$.get=xe,$.getDescendantIds=_e,$.getGroup=t.getGroup$$module$build$src$core$events$utils,$.getRecordUndo=ae,$.isEnabled=q,$.setGroup=t.setGroup$$module$build$src$core$events$utils,$.setRecordUndo=fe;var c=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=t.getGroup$$module$build$src$core$events$utils(),this.recordUndo=ae()}toJson(){return{type:this.type,group:this.group}}static fromJson(n,a,d){return d.isBlank=!1,d.group=n.group||"",d.workspaceId=a.id,d}isNull(){return!1}run(n){}getEventWorkspace_(){let n;if(this.workspaceId&&(n=v(this.workspaceId)),!n)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return n}},f=class extends c{constructor(n){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof n>"u",this.workspaceId=n||""}},S=class extends f{constructor(n,a,d){a=n?n.workspace.id:a,a===null&&(a=void 0),super(a),this.type=Iu,this.blockId=n?n.id:void 0,this.targetType=d}toJson(){const n=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return n.targetType=this.targetType,n.blockId=this.blockId,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new S),a.targetType=n.targetType,a.blockId=n.blockId,a}},M;(function(n){n.BLOCK="block",n.WORKSPACE="workspace",n.ZOOM_CONTROLS="zoom_controls"})(M||(M={})),i(Lt.EVENT,Iu,S);var L=750,H="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),re=null,Se={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},We=0,gt={TOUCH_ENABLED:H,TOUCH_MAP:Se};gt.checkTouchIdentifier=Ne,gt.clearTouchIdentifier=et,gt.getTouchIdentifierFromEvent=rt,gt.longStart=Re,gt.longStop=Ze,gt.shouldHandleEvent=ct;var zt,Zt,hn,an,nn,_r,ft,Ee,Me,Xe;(function(n){function a(b){return d.indexOf(b.toUpperCase())!==-1}zt=n;const d=zt.toUpperCase();Zt=a("JavaFX"),hn=a("WebKit"),an=a("Gecko")&&!hn,nn=a("Android"),n=globalThis.navigator&&globalThis.navigator.maxTouchPoints,_r=a("iPad")||a("Macintosh")&&0<n,ft=a("iPhone")&&!_r,Ee=a("Macintosh"),Me=_r||nn&&!a("Mobile")||a("Silk"),Xe=!Me&&(ft||nn)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var kt=zt,Kt=Zt,ln=an,fn=nn,kn=_r,Wn=ft,hr=Ee,Xl=Xe,vm={ANDROID:fn,GECKO:ln,IPAD:kn,IPHONE:Wn,JavaFx:Kt,MAC:hr,MOBILE:Xl,raw:kt},Gp=40,jn=125,nd={};nd.bind=ze,nd.conditionalBind=we,nd.getScrollDeltaPixels=ht,nd.isRightButton=Mt,nd.isTargetInput=nt,nd.mouseToSvg=At,nd.unbind=it;var r_={};r_.removeElem=Et;var Ru=class{constructor(n){this.name_=n}toString(){return this.name_}};Ru.POSITIONABLE=new Ru("positionable"),Ru.DRAG_TARGET=new Ru("drag_target"),Ru.DELETE_AREA=new Ru("delete_area"),Ru.AUTOHIDEABLE=new Ru("autohideable");var ba=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(n,a){const d=n.component.id;if(!a&&this.componentData.has(d)){var b;throw Error('Plugin "'+d+'" with capabilities "'+((b=this.componentData.get(d))==null?void 0:b.capabilities)+'" already added.')}for(this.componentData.set(d,n),a=[],b=0;b<n.capabilities.length;b++){const R=String(n.capabilities[b]).toLowerCase();if(a.push(R),this.capabilityToComponentIds.has(R)){let G;(G=this.capabilityToComponentIds.get(R))==null||G.push(d)}else this.capabilityToComponentIds.set(R,[d])}this.componentData.get(d).capabilities=a}removeComponent(n){const a=this.componentData.get(n);if(a){for(let d=0;d<a.capabilities.length;d++){const b=String(a.capabilities[d]).toLowerCase();Et(this.capabilityToComponentIds.get(b),n)}this.componentData.delete(n)}}addCapability(n,a){if(!this.getComponent(n))throw Error('Cannot add capability, "'+a+'". Plugin "'+n+'" has not been added to the ComponentManager');if(this.hasCapability(n,a))console.warn('Plugin "'+n+'already has capability "'+a+'"');else{a=`${a}`.toLowerCase();var d;(d=this.componentData.get(n))==null||d.capabilities.push(a);var b;(b=this.capabilityToComponentIds.get(a))==null||b.push(n)}}removeCapability(n,a){if(!this.getComponent(n))throw Error('Cannot remove capability, "'+a+'". Plugin "'+n+'" has not been added to the ComponentManager');this.hasCapability(n,a)?(a=`${a}`.toLowerCase(),Et(this.componentData.get(n).capabilities,a),Et(this.capabilityToComponentIds.get(a),n)):console.warn('Plugin "'+n+`doesn't have capability "`+a+'" to remove')}hasCapability(n,a){return a=`${a}`.toLowerCase(),this.componentData.has(n)&&this.componentData.get(n).capabilities.indexOf(a)!==-1}getComponent(n){let a;return(a=this.componentData.get(n))==null?void 0:a.component}getComponents(n,a){if(n=`${n}`.toLowerCase(),n=this.capabilityToComponentIds.get(n),!n)return[];const d=[];if(a){const b=[];n.forEach(R=>{b.push(this.componentData.get(R))}),b.sort(function(R,G){return R.weight-G.weight}),b.forEach(function(R){d.push(R.component)})}else n.forEach(b=>{d.push(this.componentData.get(b).component)});return d}};ba.Capability=Ru;var Lf=!1,rd=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyBlockDragSurface {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}
`,Yl={};Yl.inject=pt,Yl.register=wt;var tn=class{constructor(n,a){this.x=n,this.y=a}clone(){return new tn(this.x,this.y)}scale(n){return this.x*=n,this.y*=n,this}translate(n,a){return this.x+=n,this.y+=a,this}static equals(n,a){return n===a?!0:n&&a?n.x===a.x&&n.y===a.y:!1}static distance(n,a){const d=n.x-a.x;return n=n.y-a.y,Math.sqrt(d*d+n*n)}static magnitude(n){return Math.sqrt(n.x*n.x+n.y*n.y)}static difference(n,a){return new tn(n.x-a.x,n.y-a.y)}static sum(n,a){return new tn(n.x+a.x,n.y+a.y)}},e0=new Set,t0={};t0.warn=be;var mg="http://www.w3.org/2000/svg",Cc="http://www.w3.org/1999/xhtml",Ts="http://www.w3.org/1999/xlink",Wp;(function(n){n[n.ELEMENT_NODE=1]="ELEMENT_NODE",n[n.TEXT_NODE=3]="TEXT_NODE",n[n.COMMENT_NODE=8]="COMMENT_NODE"})(Wp||(Wp={}));var Nd=null,eh=0,Ii=null,Ta={HTML_NS:Cc};Ta.NodeType=Wp,Ta.SVG_NS=mg,Ta.XLINK_NS=Ts,Ta.addClass=ke,Ta.containsNode=Ce,Ta.createSvgElement=Z,Ta.getFastTextWidth=Ge,Ta.getFastTextWidthWithSizeString=Bt,Ta.getTextWidth=$e,Ta.hasClass=xt,Ta.insertAfter=He,Ta.measureFontMetrics=Pe,Ta.removeClass=mt,Ta.removeClasses=lt,Ta.removeNode=ut,Ta.setCssTransform=X,Ta.startTextWidthCache=J,Ta.stopTextWidthCache=oe;var Be=class{constructor(n){this.tagName=n}toString(){return this.tagName}};Be.ANIMATE=new Be("animate"),Be.CIRCLE=new Be("circle"),Be.CLIPPATH=new Be("clipPath"),Be.DEFS=new Be("defs"),Be.FECOMPOSITE=new Be("feComposite"),Be.FECOMPONENTTRANSFER=new Be("feComponentTransfer"),Be.FEFLOOD=new Be("feFlood"),Be.FEFUNCA=new Be("feFuncA"),Be.FEGAUSSIANBLUR=new Be("feGaussianBlur"),Be.FEPOINTLIGHT=new Be("fePointLight"),Be.FESPECULARLIGHTING=new Be("feSpecularLighting"),Be.FILTER=new Be("filter"),Be.FOREIGNOBJECT=new Be("foreignObject"),Be.G=new Be("g"),Be.IMAGE=new Be("image"),Be.LINE=new Be("line"),Be.PATH=new Be("path"),Be.PATTERN=new Be("pattern"),Be.POLYGON=new Be("polygon"),Be.RECT=new Be("rect"),Be.SVG=new Be("svg"),Be.TEXT=new Be("text"),Be.TSPAN=new Be("tspan");var gi=class{constructor(n,a,d,b){this.top=n,this.bottom=a,this.left=d,this.right=b}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(n,a){return n>=this.left&&n<=this.right&&a>=this.top&&a<=this.bottom}intersects(n){return!(this.left>n.right||this.right<n.left||this.top>n.bottom||this.bottom<n.top)}},Es=class{constructor(n,a){this.width=n,this.height=a}static equals(n,a){return n===a?!0:n&&a?n.width===a.width&&n.height===a.height:!1}},wv={getSizeInternal:st},id={TEST_ONLY:wv};id.getBorderBox=nr,id.getComputedStyle=Pt,id.getContainerOffsetToScrollInto=ar,id.getPageOffset=Tn,id.getSize=Wt,id.getViewportPageOffset=Mr,id.scrollIntoContainerView=ai;var ym=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,gg=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,xv={XY_REGEX:ym,XY_STYLE_REGEX:gg},Nf={TEST_ONLY:xv};Nf.getDocumentScroll=De,Nf.getInjectionDivXY=Q,Nf.getRelativeXY=Qn,Nf.getViewportBBox=me,Nf.screenToWsCoordinates=qe,Nf.wsToScreenCoordinates=It;var Oo=class{constructor(n,a,d,b,R){this.workspace=n,this.horizontal=a,this.oldHostMetrics=null,this.ratio=1,this.origin=new tn(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new tn(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=d||!1,this.margin=R!==void 0?R:Oo.DEFAULT_SCROLLBAR_MARGIN,n="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),b&&(n+=" "+b),this.outerSvg=Z(Be.SVG,{class:n}),b=Z(Be.G,{},this.outerSvg),this.svgBackground=Z(Be.RECT,{class:"blocklyScrollbarBackground"},b),n=Math.floor((Oo.scrollbarThickness-5)/2),this.svgHandle=Z(Be.RECT,{class:"blocklyScrollbarHandle",rx:n,ry:n},b),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),He(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),a?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=we(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=we(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const n=Oo.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(n)),this.outerSvg.setAttribute("height",String(n)),this.svgHandle.setAttribute("height",String(n-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(n)),this.outerSvg.setAttribute("width",String(n)),this.svgHandle.setAttribute("width",String(n-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),it(this.onMouseDownBarWrapper_),it(this.onMouseDownHandleWrapper_),ut(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(n){return n=0>=n||isNaN(n)?0:Math.min(n,this.scrollbarLength)}setHandleLength(n){this.handleLength=n,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(n){return n=0>=n||isNaN(n)?0:Math.min(n,this.scrollbarLength-this.handleLength)}setHandlePosition(n){this.handlePosition=n,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(n){this.scrollbarLength=n,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(n,a){this.position.x=n,this.position.y=a,X(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(n){!n&&(n=this.workspace.getMetrics(),!n)||this.oldHostMetrics&&Oo.metricsAreEquivalent(n,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(n):this.resizeVertical(n),this.oldHostMetrics=n,this.updateMetrics())}requiresViewResize(n){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==n.viewWidth||this.oldHostMetrics.viewHeight!==n.viewHeight||this.oldHostMetrics.absoluteLeft!==n.absoluteLeft||this.oldHostMetrics.absoluteTop!==n.absoluteTop:!0}resizeHorizontal(n){this.requiresViewResize(n)?this.resizeViewHorizontal(n):this.resizeContentHorizontal(n)}resizeViewHorizontal(n){var a=n.viewWidth-2*this.margin;this.pair&&(a-=Oo.scrollbarThickness),this.setScrollbarLength(Math.max(0,a)),a=n.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(a+=Oo.scrollbarThickness),this.setPosition(a,n.absoluteTop+n.viewHeight-Oo.scrollbarThickness-this.margin),this.resizeContentHorizontal(n)}resizeContentHorizontal(n){if(n.viewWidth>=n.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var a=this.scrollbarLength*n.viewWidth/n.scrollWidth;a=this.constrainHandleLength(a),this.setHandleLength(a),a=n.scrollWidth-n.viewWidth;var d=this.scrollbarLength-this.handleLength;n=(n.viewLeft-n.scrollLeft)/a*d,n=this.constrainHandlePosition(n),this.setHandlePosition(n),this.ratio=d/a}}resizeVertical(n){this.requiresViewResize(n)?this.resizeViewVertical(n):this.resizeContentVertical(n)}resizeViewVertical(n){let a=n.viewHeight-2*this.margin;this.pair&&(a-=Oo.scrollbarThickness),this.setScrollbarLength(Math.max(0,a)),this.setPosition(this.workspace.RTL?n.absoluteLeft+this.margin:n.absoluteLeft+n.viewWidth-Oo.scrollbarThickness-this.margin,n.absoluteTop+this.margin),this.resizeContentVertical(n)}resizeContentVertical(n){if(n.viewHeight>=n.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var a=this.scrollbarLength*n.viewHeight/n.scrollHeight;a=this.constrainHandleLength(a),this.setHandleLength(a),a=n.scrollHeight-n.viewHeight;var d=this.scrollbarLength-this.handleLength;n=(n.viewTop-n.scrollTop)/a*d,n=this.constrainHandlePosition(n),this.setHandlePosition(n),this.ratio=d/a}}isVisible(){return this.isHandleVisible}setContainerVisible(n){const a=n!==this.containerVisible;this.containerVisible=n,a&&this.updateDisplay_()}setVisible(n){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(n)}setVisibleInternal(n){const a=n!==this.isVisible();this.isHandleVisible=n,a&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(n){if(this.workspace.markFocused(),et(),this.cleanUp(),Mt(n))n.stopPropagation();else{var a=At(n,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());a=this.horizontal?a.x:a.y;var d=Q(this.svgHandle);d=this.horizontal?d.x:d.y;var b=this.handlePosition,R=.95*this.handleLength;a<=d?b-=R:a>=d+this.handleLength&&(b+=R),this.setHandlePosition(this.constrainHandlePosition(b)),this.updateMetrics(),n.stopPropagation(),n.preventDefault()}}onMouseDownHandle(n){this.workspace.markFocused(),this.cleanUp(),Mt(n)?n.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?n.clientX:n.clientY,this.onMouseUpWrapper_=we(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=we(document,"pointermove",this,this.onMouseMoveHandle),n.stopPropagation(),n.preventDefault())}onMouseMoveHandle(n){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?n.clientX:n.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){et(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(it(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(it(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let n=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(n)&&(n=0),n}updateMetrics(){const n=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:n}):this.workspace.setMetrics({y:n})}set(n,a){this.setHandlePosition(this.constrainHandlePosition(n*this.ratio)),(a||a===void 0)&&this.updateMetrics()}setOrigin(n,a){this.origin=new tn(n,a)}static metricsAreEquivalent(n,a){return n.viewWidth===a.viewWidth&&n.viewHeight===a.viewHeight&&n.viewLeft===a.viewLeft&&n.viewTop===a.viewTop&&n.absoluteTop===a.absoluteTop&&n.absoluteLeft===a.absoluteLeft&&n.scrollWidth===a.scrollWidth&&n.scrollHeight===a.scrollHeight&&n.scrollLeft===a.scrollLeft&&n.scrollTop===a.scrollTop}};Oo.scrollbarThickness=H?25:15,Oo.DEFAULT_SCROLLBAR_MARGIN=.5;var i_={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},_g={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:bm,DOMParser:Ea,XMLSerializer:ku}=globalThis;Ea&&(i_=new Ea),ku&&(_g=new ku);var dp="https://developers.google.com/blockly/xml",vg=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,Vp={NAME_SPACE:dp};Vp.createElement=t.createElement$$module$build$src$core$utils$xml,Vp.createTextNode=t.createTextNode$$module$build$src$core$utils$xml,Vp.domToText=gn,Vp.injectDependencies=qt,Vp.textToDom=t.textToDom$$module$build$src$core$utils$xml;var th="categoryToolbox",n0="flyoutToolbox",Xn;(function(n){n[n.TOP=0]="TOP",n[n.BOTTOM=1]="BOTTOM",n[n.LEFT=2]="LEFT",n[n.RIGHT=3]="RIGHT"})(Xn||(Xn={}));var Cv={hasCategoriesInternal:xn},Kl={};Kl.Position=Xn,Kl.TEST_ONLY=Cv,Kl.convertFlyoutDefToJsonArray=dt,Kl.convertToolboxDefToJson=at,Kl.hasCategories=Dt,Kl.isCategoryCollapsible=Bn,Kl.parseToolboxTree=yr;var tc;(function(n){n[n.TOP=0]="TOP",n[n.BOTTOM=1]="BOTTOM"})(tc||(tc={}));var Tm;(function(n){n[n.LEFT=0]="LEFT",n[n.RIGHT=1]="RIGHT"})(Tm||(Tm={}));var pp;(function(n){n[n.UP=0]="UP",n[n.DOWN=1]="DOWN"})(pp||(pp={}));var Em={};Em.bumpDirection=pp,Em.bumpPositionRect=Fo,Em.getCornerOppositeToolbox=Gi,Em.getStartPositionRect=wr,Em.horizontalPosition=Tm,Em.verticalPosition=tc;var Jl={width:96,height:124,url:"sprites.png"},r0=class{constructor(n){this.workspace=n,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=Z(Be.G,{});const n=String(Math.random()).substring(2);return this.createZoomOutSvg(n),this.createZoomInSvg(n),this.workspace.isMovable()&&this.createZoomResetSvg(n),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[ba.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&ut(this.svgGroup);for(const n of this.boundEvents)it(n);this.boundEvents.length=0}getBoundingRectangle(){let n=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(n+=this.LARGE_SPACING+this.HEIGHT),new gi(this.top,this.top+n,this.left,this.left+this.WIDTH)}position(n,a){if(this.initialized){var d=Gi(this.workspace,n),b=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(b+=this.LARGE_SPACING+this.HEIGHT),n=wr(d,new Es(this.WIDTH,b),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,n,this.workspace),d=d.vertical,a=Fo(n,this.MARGIN_VERTICAL,d===tc.TOP?pp.DOWN:pp.UP,a),d===tc.TOP){var R=this.SMALL_SPACING+this.HEIGHT,G;(G=this.zoomInGroup)==null||G.setAttribute("transform","translate(0, "+R+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(R+this.LARGE_SPACING+this.HEIGHT)+")")}else{G=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let Oe;(Oe=this.zoomInGroup)==null||Oe.setAttribute("transform","translate(0, "+G+")"),G=G+this.SMALL_SPACING+this.HEIGHT,(R=this.zoomOutGroup)==null||R.setAttribute("transform","translate(0, "+G+")")}this.top=a.top,this.left=a.left;var ce;(ce=this.svgGroup)==null||ce.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(n){this.zoomOutGroup=Z(Be.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const a=Z(Be.CLIPPATH,{id:"blocklyZoomoutClipPath"+n},this.zoomOutGroup);Z(Be.RECT,{width:32,height:32},a),Z(Be.IMAGE,{width:Jl.width,height:Jl.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+n+")"},this.zoomOutGroup).setAttributeNS(Ts,"xlink:href",this.workspace.options.pathToMedia+Jl.url),this.boundEvents.push(we(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(n){this.zoomInGroup=Z(Be.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const a=Z(Be.CLIPPATH,{id:"blocklyZoominClipPath"+n},this.zoomInGroup);Z(Be.RECT,{width:32,height:32},a),Z(Be.IMAGE,{width:Jl.width,height:Jl.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+n+")"},this.zoomInGroup).setAttributeNS(Ts,"xlink:href",this.workspace.options.pathToMedia+Jl.url),this.boundEvents.push(we(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(n,a){this.workspace.markFocused(),this.workspace.zoomCenter(n),this.fireZoomEvent(),et(),a.stopPropagation(),a.preventDefault()}createZoomResetSvg(n){this.zoomResetGroup=Z(Be.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const a=Z(Be.CLIPPATH,{id:"blocklyZoomresetClipPath"+n},this.zoomResetGroup);Z(Be.RECT,{width:32,height:32},a),Z(Be.IMAGE,{width:Jl.width,height:Jl.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+n+")"},this.zoomResetGroup).setAttributeNS(Ts,"xlink:href",this.workspace.options.pathToMedia+Jl.url),this.boundEvents.push(we(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(n){this.workspace.markFocused();const a=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(a),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),et(),n.stopPropagation(),n.preventDefault()}fireZoomEvent(){const n=new(xe(Iu))(null,this.workspace.id,"zoom_controls");he(n)}};wt(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var so=class{constructor(n){this.name=n}toString(){return this.name}equals(n){return this.name===n.toString()}};so.MUTATOR=new so("mutator"),so.WARNING=new so("warning"),so.COMMENT=new so("comment"),function(n){n[n.VALUE=1]="VALUE",n[n.STATEMENT=3]="STATEMENT",n[n.DUMMY=5]="DUMMY",n[n.CUSTOM=6]="CUSTOM",n[n.END_ROW=7]="END_ROW"}(t.inputTypes$$module$build$src$core$inputs$input_types||(t.inputTypes$$module$build$src$core$inputs$input_types={})),t.inputTypes$$module$build$src$core$inputs$input_types;var wi=function(n,a){window.alert(n),a&&a()},El=function(n,a){a(window.confirm(n))},$a=function(n,a,d){d(window.prompt(n,a))},Ql={confirmInternal:lr},$l={TEST_ONLY:Ql};$l.alert=wo,$l.confirm=Yt,$l.prompt=Uo,$l.setAlert=nl,$l.setConfirm=oa,$l.setPrompt=hs;var Df,Wa;t.Msg$$module$build$src$core$msg=Object.create(null),Df=function(n){Object.keys(n).forEach(function(a){t.Msg$$module$build$src$core$msg[a]=n[a]})},Wa={Msg:t.Msg$$module$build$src$core$msg,setLocale:Df};var fp=class extends c{constructor(n){super(),this.isBlank=typeof n>"u",n&&(this.varId=n.getId(),this.workspaceId=n.workspace.id)}toJson(){const n=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return n.varId=this.varId,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new fp),a.varId=n.varId,a}},mp=class extends fp{constructor(n){super(n),this.type=za,n&&(this.varType=n.type,this.varName=n.name)}toJson(){const n=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return n.varType=this.varType,n.varName=this.varName,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new mp),a.varType=n.varType,a.varName=n.varName,a}run(n){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");n?a.createVariable(this.varName,this.varType,this.varId):a.deleteVariableById(this.varId)}};i(Lt.EVENT,za,mp);var jp=class{constructor(n,a,d,b){this.workspace=n,this.name=a,this.type=d||"",this.id_=b||se()}getId(){return this.id_}static compareByName(n,a){return n.name.localeCompare(a.name,void 0,{sensitivity:"base"})}},s_="VARIABLE",$m="ijkmnopqrstuvwxyzabcdefgh",Mc={generateUniqueNameInternal:qn},Va={CATEGORY_NAME:s_,TEST_ONLY:Mc,VAR_LETTER_OPTIONS:$m};Va.allDeveloperVariables=t.allDeveloperVariables$$module$build$src$core$variables,Va.allUsedVarModels=t.allUsedVarModels$$module$build$src$core$variables,Va.createVariableButtonHandler=Ji,Va.flyoutCategory=pn,Va.flyoutCategoryBlocks=ir,Va.generateUniqueName=Tr,Va.generateUniqueNameFromOptions=ui,Va.generateVariableFieldDom=Cs,Va.getAddedVariables=su,Va.getOrCreateVariablePackage=t.getOrCreateVariablePackage$$module$build$src$core$variables,Va.getVariable=t.getVariable$$module$build$src$core$variables,Va.nameUsedWithAnyType=Ia,Va.nameUsedWithConflictingParam=rl,Va.promptName=Gr,Va.renameVariable=t.renameVariable$$module$build$src$core$variables;var Ac=class{constructor(n,a,d,b,R){this.workspace=n,this.editable=this.movable=this.deletable=!0,this.disposed_=!1,this.isComment=!0,this.id=R&&!n.getCommentById(R)?R:se(),n.addTopComment(this),this.xy_=new tn(0,0),this.height_=d,this.width_=b,this.RTL=n.RTL,this.content_=a,Ac.fireCreateEvent(this)}dispose(){this.disposed_||(q()&&he(new(xe(Sh))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(n){this.height_=n}getWidth(){return this.width_}setWidth(n){this.width_=n}getRelativeToSurfaceXY(){return new tn(this.xy_.x,this.xy_.y)}moveBy(n,a){const d=new(xe(Ga))(this);this.xy_.translate(n,a),d.recordNew(),he(d)}isDeletable(){return this.deletable&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(n){this.deletable=n}isMovable(){return this.movable&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(n){this.movable=n}isEditable(){return this.editable&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(n){this.editable=n}getContent(){return this.content_}setContent(n){this.content_!==n&&(he(new(xe(ed))(this,this.content_,n)),this.content_=n)}toXmlWithXY(n){return n=this.toXml(n),n.setAttribute("x",String(Math.round(this.xy_.x))),n.setAttribute("y",String(Math.round(this.xy_.y))),n.setAttribute("h",String(this.height_)),n.setAttribute("w",String(this.width_)),n}toXml(n){const a=t.createElement$$module$build$src$core$utils$xml("comment");return n||(a.id=this.id),a.textContent=this.getContent(),a}static fireCreateEvent(n){if(q()){const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0);try{he(new(xe(yo))(n))}finally{t.setGroup$$module$build$src$core$events$utils(a)}}}static fromXml(n,a){var d=Ac.parseAttributes(n);return a=new Ac(a,d.content,d.h,d.w,d.id),d=n.getAttribute("x"),n=n.getAttribute("y"),d=d?parseInt(d,10):NaN,n=n?parseInt(n,10):NaN,isNaN(d)||isNaN(n)||a.moveBy(d,n),Ac.fireCreateEvent(a),a}static parseAttributes(n){const a=n.getAttribute("h"),d=n.getAttribute("w"),b=n.getAttribute("x"),R=n.getAttribute("y"),G=n.getAttribute("id");if(!G)throw Error("No ID present in XML comment definition.");let ce;return{id:G,h:a?parseInt(a):100,w:d?parseInt(d):100,x:b?parseInt(b):NaN,y:R?parseInt(R):NaN,content:(ce=n.textContent)!=null?ce:""}}},Dd=class extends f{constructor(n,a,d){super(d),this.type=Ns,this.oldElementId=n??void 0,this.newElementId=a??void 0}toJson(){const n=super.toJson();return n.oldElementId=this.oldElementId,n.newElementId=this.newElementId,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new Dd),a.oldElementId=n.oldElementId,a.newElementId=n.newElementId,a}};i(Lt.EVENT,Ns,Dd);var yg={};yg.register=Ll,yg.unregister=uh;var bg=class{paste(n,a,d){const b=n.commentState;if(d)b.setAttribute("x",`${d.x}`),b.setAttribute("y",`${d.y}`);else{var R;d=parseInt((R=b.getAttribute("x"))!=null?R:"0")+50;let G;R=parseInt((G=b.getAttribute("y"))!=null?G:"0")+50,b.setAttribute("x",`${d}`),b.setAttribute("y",`${R}`)}return ja.fromXmlRendered(n.commentState,a)}};bg.TYPE="workspace-comment",Ll(bg.TYPE,new bg);var Ds=8,Sm=3,Sl=2,ja=class extends Ac{constructor(n,a,d,b,R){super(n,a,d,b,R),this.onMouseMoveWrapper=this.onMouseUpWrapper=null,this.eventsInit=!1,this.deleteIconBorder=this.deleteGroup=this.resizeGroup=this.foreignObject=this.svgHandleTarget=this.svgRectTarget=this.textarea=null,this.rendered=this.autoLayout=this.focused=!1,this.svgGroup=Z(Be.G,{class:"blocklyComment"}),this.workspace=n,this.svgRect_=Z(Be.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:Sm,ry:Sm}),this.svgGroup.appendChild(this.svgRect_),this.render()}dispose(){this.disposed_||(k()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),q()&&he(new(xe(Sh))(this)),ut(this.svgGroup),t.disable$$module$build$src$core$events$utils(),super.dispose(),t.enable$$module$build$src$core$events$utils())}initSvg(n){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit||(we(this.svgRectTarget,"pointerdown",this,this.pathMouseDown),we(this.svgHandleTarget,"pointerdown",this,this.pathMouseDown)),this.eventsInit=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!n&&this.textarea&&this.textarea.select()}pathMouseDown(n){const a=this.workspace.getGesture(n);a&&a.handleBubbleStart(n,this)}showContextMenu(n){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(k()!==this){var n=null;if(k()){n=k().id,t.disable$$module$build$src$core$events$utils();try{k().unselect()}finally{t.enable$$module$build$src$core$events$utils()}}n=new(xe(Ns))(n,this.id,this.workspace.id),he(n),D(this),this.addSelect()}}unselect(){if(k()===this){var n=new(xe(Ns))(this.id,null,this.workspace.id);he(n),D(null),this.removeSelect(),this.blurFocus()}}addSelect(){ke(this.svgGroup,"blocklySelected"),this.setFocus()}removeSelect(){ke(this.svgGroup,"blocklySelected"),this.blurFocus()}addFocus(){ke(this.svgGroup,"blocklyFocused")}removeFocus(){mt(this.svgGroup,"blocklyFocused")}getRelativeToSurfaceXY(){const n=this.workspace.getLayerManager();if(!n)throw Error("Cannot calculate position because the workspace has not been appended");let a=0,d=0,b=this.getSvgRoot();if(b)do{const R=Qn(b);a+=R.x,d+=R.y,b=b.parentNode}while(b&&!n.hasLayer(b)&&b!==null);return this.xy_=new tn(a,d)}moveBy(n,a){const d=new(xe(Ga))(this),b=this.getRelativeToSurfaceXY();this.translate(b.x+n,b.y+a),this.xy_=new tn(b.x+n,b.y+a),d.recordNew(),he(d),this.workspace.resizeContents()}translate(n,a){this.xy_=new tn(n,a),this.getSvgRoot().setAttribute("transform","translate("+n+","+a+")")}moveDuringDrag(n){n=`translate(${n.x}, ${n.y})`,this.getSvgRoot().setAttribute("transform",n)}moveTo(n,a){this.translate(n,a)}clearTransformAttributes(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var n=this.getRelativeToSurfaceXY();const a=this.getHeightWidth(),d=n.y,b=n.y+a.height;let R;return this.RTL?(R=n.x-a.width,n=n.x):(R=n.x,n=n.x+a.width),new gi(d,b,R,n)}updateMovable(){this.isMovable()?ke(this.svgGroup,"blocklyDraggable"):mt(this.svgGroup,"blocklyDraggable")}setMovable(n){super.setMovable(n),this.updateMovable()}setEditable(n){super.setEditable(n),this.textarea&&(this.textarea.readOnly=!n)}setDragging(n){n?ke(this.getSvgRoot(),"blocklyDragging"):mt(this.getSvgRoot(),"blocklyDragging")}getSvgRoot(){return this.svgGroup}getContent(){return this.textarea?this.textarea.value:this.content_}setContent(n){super.setContent(n),this.textarea&&(this.textarea.value=n)}setDeleteStyle(n){n?ke(this.svgGroup,"blocklyDraggingDelete"):mt(this.svgGroup,"blocklyDraggingDelete")}setAutoLayout(n){}toXmlWithXY(n){let a=0;this.workspace.RTL&&(a=this.workspace.getWidth()),n=this.toXml(n);const d=this.getRelativeToSurfaceXY();return n.setAttribute("x",String(Math.round(this.workspace.RTL?a-d.x:d.x))),n.setAttribute("y",String(Math.round(d.y))),n.setAttribute("h",String(this.getHeight())),n.setAttribute("w",String(this.getWidth())),n}toCopyData(){return{paster:bg.TYPE,commentState:this.toXmlWithXY()}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered){var n=this.getHeightWidth(),a=this.createEditor();this.svgGroup.appendChild(a),this.svgHandleTarget=Z(Be.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup.appendChild(this.svgHandleTarget),this.svgRectTarget=Z(Be.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:Sm,ry:Sm}),this.svgGroup.appendChild(this.svgRectTarget),this.addResizeDom(),this.isDeletable()&&this.addDeleteDom(),this.setSize(n.width,n.height),this.textarea.value=this.content_,this.rendered=!0,this.resizeGroup&&we(this.resizeGroup,"pointerdown",this,this.resizeMouseDown),this.isDeletable()&&(we(this.deleteGroup,"pointerdown",this,this.deleteMouseDown),we(this.deleteGroup,"pointerout",this,this.deleteMouseOut),we(this.deleteGroup,"pointerup",this,this.deleteMouseUp))}}createEditor(){this.foreignObject=Z(Be.FOREIGNOBJECT,{x:0,y:ja.TOP_OFFSET,class:"blocklyCommentForeignObject"});const n=document.createElementNS(Cc,"body");n.setAttribute("xmlns",Cc),n.className="blocklyMinimalBody";const a=document.createElementNS(Cc,"textarea");return a.className="blocklyCommentTextarea",a.setAttribute("dir",this.RTL?"RTL":"LTR"),a.readOnly=!this.isEditable(),n.appendChild(a),this.textarea=a,this.foreignObject.appendChild(n),we(a,"wheel",this,function(d){d.stopPropagation()}),we(a,"change",this,function(d){this.setContent(a.value)}),this.foreignObject}addResizeDom(){this.resizeGroup=Z(Be.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup),Z(Be.POLYGON,{points:`0,${Ds} ${Ds},${Ds} ${Ds},0`},this.resizeGroup),Z(Be.LINE,{class:"blocklyResizeLine",x1:Ds/3,y1:Ds-1,x2:Ds-1,y2:Ds/3},this.resizeGroup),Z(Be.LINE,{class:"blocklyResizeLine",x1:2*Ds/3,y1:Ds-1,x2:Ds-1,y2:2*Ds/3},this.resizeGroup)}addDeleteDom(){this.deleteGroup=Z(Be.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup),this.deleteIconBorder=Z(Be.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup),Z(Be.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup),Z(Be.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup)}resizeMouseDown(n){this.unbindDragEvents(),Mt(n)||(this.workspace.startDrag(n,new tn(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper=we(document,"pointerup",this,this.resizeMouseUp),this.onMouseMoveWrapper=we(document,"pointermove",this,this.resizeMouseMove),this.workspace.hideChaff()),n.stopPropagation()}deleteMouseDown(n){this.deleteIconBorder&&ke(this.deleteIconBorder,"blocklyDeleteIconHighlighted"),n.stopPropagation()}deleteMouseOut(n){this.deleteIconBorder&&mt(this.deleteIconBorder,"blocklyDeleteIconHighlighted")}deleteMouseUp(n){this.dispose(),n.stopPropagation()}unbindDragEvents(){this.onMouseUpWrapper&&(it(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onMouseMoveWrapper&&(it(this.onMouseMoveWrapper),this.onMouseMoveWrapper=null)}resizeMouseUp(n){et(),this.unbindDragEvents()}resizeMouseMove(n){this.autoLayout=!1,n=this.workspace.moveDrag(n),this.setSize(this.RTL?-n.x:n.x,n.y)}resizeComment(){const n=this.getHeightWidth(),a=ja.TOP_OFFSET,d=2*Sl;let b;(b=this.foreignObject)==null||b.setAttribute("width",String(n.width));let R;if((R=this.foreignObject)==null||R.setAttribute("height",String(n.height-a)),this.RTL){let G;(G=this.foreignObject)==null||G.setAttribute("x",String(-n.width))}this.textarea&&(this.textarea.style.width=n.width-d+"px",this.textarea.style.height=n.height-d-a+"px")}setSize(n,a){n=Math.max(n,45),a=Math.max(a,20+ja.TOP_OFFSET),this.width_=n,this.height_=a,this.svgRect_.setAttribute("width",`${n}`),this.svgRect_.setAttribute("height",`${a}`);let d;(d=this.svgRectTarget)==null||d.setAttribute("width",`${n}`);let b;(b=this.svgRectTarget)==null||b.setAttribute("height",`${a}`);let R;(R=this.svgHandleTarget)==null||R.setAttribute("width",`${n}`);let G;if((G=this.svgHandleTarget)==null||G.setAttribute("height",String(ja.TOP_OFFSET)),this.RTL){this.svgRect_.setAttribute("transform","scale(-1 1)");let ce;(ce=this.svgRectTarget)==null||ce.setAttribute("transform","scale(-1 1)")}if(this.resizeGroup)if(this.RTL){this.resizeGroup.setAttribute("transform","translate("+(-n+Ds)+","+(a-Ds)+") scale(-1 1)");let ce;(ce=this.deleteGroup)==null||ce.setAttribute("transform","translate("+(-n+Ds)+","+-Ds+") scale(-1 1)")}else{this.resizeGroup.setAttribute("transform","translate("+(n-Ds)+","+(a-Ds)+")");let ce;(ce=this.deleteGroup)==null||ce.setAttribute("transform","translate("+(n-Ds)+","+-Ds+")")}this.resizeComment()}setFocus(){this.focused=!0,setTimeout(()=>{this.disposed_||(this.textarea.focus(),this.addFocus(),this.svgRectTarget&&ke(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&ke(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused=!1,setTimeout(()=>{this.disposed_||(this.textarea.blur(),this.removeFocus(),this.svgRectTarget&&mt(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&mt(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered(n,a,d){t.disable$$module$build$src$core$events$utils();let b;try{const R=Ac.parseAttributes(n);if(b=new ja(a,R.content,R.h,R.w,R.id),a.rendered&&(b.initSvg(!0),b.render()),!isNaN(R.x)&&!isNaN(R.y))if(a.RTL){const G=d||a.getWidth();b.moveBy(G-R.x,R.y)}else b.moveBy(R.x,R.y)}finally{t.enable$$module$build$src$core$events$utils()}return Ac.fireCreateEvent(b),b}};ja.DEFAULT_SIZE=100,ja.TOP_OFFSET=10,wt(`
.blocklyCommentForeignObject {
  position: relative;
  z-index: 0;
}

.blocklyCommentRect {
  fill: #E7DE8E;
  stroke: #bcA903;
  stroke-width: 1px;
}

.blocklyCommentTarget {
  fill: transparent;
  stroke: #bcA903;
}

.blocklyCommentTargetFocused {
  fill: none;
}

.blocklyCommentHandleTarget {
  fill: none;
}

.blocklyCommentHandleTargetFocused {
  fill: transparent;
}

.blocklyFocused>.blocklyCommentRect {
  fill: #B9B272;
  stroke: #B9B272;
}

.blocklySelected>.blocklyCommentTarget {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCommentDeleteIcon {
  cursor: pointer;
  fill: #000;
  display: none;
}

.blocklySelected > .blocklyCommentDeleteIcon {
  display: block;
}

.blocklyDeleteIconShape {
  fill: #000;
  stroke: #000;
  stroke-width: 1px;
}

.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
  stroke: #fc3;
}
`);var Bf=new Set,o_=new WeakSet,gp=null,Tg=null,nc=0,Bd={};Bd.finishQueuedRenders=Zn,Bd.queueRender=zo,Bd.triggerQueuedRenders=Bi;var bo={};bo.appendDomToWorkspace=wd,bo.blockToDom=aa,bo.blockToDomWithXY=Kn,bo.clearWorkspaceAndLoadFromXml=ll,bo.deleteNext=Go,bo.domToBlock=t.domToBlock$$module$build$src$core$xml,bo.domToBlockInternal=Ms,bo.domToPrettyText=Pi,bo.domToText=bi,bo.domToVariables=au,bo.domToWorkspace=t.domToWorkspace$$module$build$src$core$xml,bo.variablesToDom=Yn,bo.workspaceToDom=ol;var Sa=class extends Error{},Mv=class extends Sa{constructor(n){super("Expected to find a 'type' property, defining the block type"),this.state=n}},wm=class extends Sa{constructor(n,a,d){super(`The block ${a.toDevString()} is missing a(n) ${n}
connection`),this.block=a,this.state=d}},i0=class extends Sa{constructor(n,a,d,b){super(`The block ${d.toDevString()} could not connect its
${a} to its parent, because: ${n}`),this.childBlock=d,this.childState=b}},gb=class extends Sa{constructor(n){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=n}},Xp=class extends Sa{constructor(n,a,d){super(`Cannot add an icon of type '${n}' to the block ${a.toDevString()}, because there is no icon registered with type '${n}'. Make sure that all of your icons have been registered.`),this.block=a,this.state=d}},Pf={};Pf.BadConnectionCheck=i0,Pf.DeserializationError=Sa,Pf.MissingBlockType=Mv,Pf.MissingConnection=wm,Pf.RealChildOfShadow=gb,Pf.UnregisteredIcon=Xp;var s0=100,Ff=75,o0=50,xm={BLOCKS:o0,PROCEDURES:Ff,VARIABLES:s0},a0={};a0.register=ps,a0.unregister=Ci;var Av=class{constructor(){this.priority=o0}save(n){const a=[];for(const d of n.getTopBlocks(!1))(n=qr(d,{addCoordinates:!0,doFullSerialization:!1}))&&a.push(n);return a.length?{languageVersion:0,blocks:a}:null}load(n,a){n=n.blocks;for(const d of n)Un(d,a,{recordUndo:ae()})}clear(n){for(const a of n.getTopBlocks(!1))a.dispose(!1)}};ps("blocks",new Av);var Cm={};Cm.BlockSerializer=Av,Cm.append=Un,Cm.appendInternal=jr,Cm.save=qr;var _p=class extends c{constructor(n){super(),this.isBlank=!n,n&&(this.blockId=n.id,this.workspaceId=n.workspace.id)}toJson(){const n=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return n.blockId=this.blockId,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new _p),a.blockId=n.blockId,a}},Iv=class extends _p{constructor(n){super(n),this.type=t.CREATE$$module$build$src$core$events$utils,n&&(n.isShadow()&&(this.recordUndo=!1),this.xml=Kn(n),this.ids=_e(n),this.json=qr(n,{addCoordinates:!0}))}toJson(){const n=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return n.xml=bi(this.xml),n.ids=this.ids,n.json=this.json,this.recordUndo||(n.recordUndo=this.recordUndo),n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new Iv),a.xml=t.textToDom$$module$build$src$core$utils$xml(n.xml),a.ids=n.ids,a.json=n.json,n.recordUndo!==void 0&&(a.recordUndo=n.recordUndo),a}run(n){const a=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!sE(a,this.ids))if(n)Un(this.json,a);else for(n=0;n<this.ids.length;n++){const d=this.ids[n],b=a.getBlockById(d);b?b.dispose(!1):d===this.blockId&&console.warn("Can't uncreate non-existent block: "+d)}}},sE=function(n,a){return a.map(d=>n.getBlockById(d)).filter(d=>d&&d.isShadow()).length===a.length};i(Lt.EVENT,t.CREATE$$module$build$src$core$events$utils,Iv);var l0=class extends f{constructor(n,a){super(a),this.type=Vl,this.themeName=n}toJson(){const n=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return n.themeName=this.themeName,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new l0),a.themeName=n.themeName,a}};i(Lt.EVENT,Vl,l0);var u0=class extends f{constructor(n,a,d,b,R){super(b),this.type=ts,this.viewTop=n,this.viewLeft=a,this.scale=d,this.oldScale=R}toJson(){const n=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return n.viewTop=this.viewTop,n.viewLeft=this.viewLeft,n.scale=this.scale,n.oldScale=this.oldScale,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new u0),a.viewTop=n.viewTop,a.viewLeft=n.viewLeft,a.scale=n.scale,a.oldScale=n.oldScale,a}};i(Lt.EVENT,ts,u0);var Yp;Yp=28,t.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:Yp,connectingSnapRadius:Yp,currentConnectionPreference:8,bumpDelay:250},t.config$$module$build$src$core$config;var En;(function(n){n[n.INPUT_VALUE=1]="INPUT_VALUE",n[n.OUTPUT_VALUE=2]="OUTPUT_VALUE",n[n.NEXT_STATEMENT=3]="NEXT_STATEMENT",n[n.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(En||(En={}));var wh=class{constructor(n){this.connectionChecker=n,this.connections=[]}addConnection(n,a){a=this.calculateIndexForYPos(a),this.connections.splice(a,0,n)}findIndexOfConnection(n,a){if(!this.connections.length)return-1;const d=this.calculateIndexForYPos(a);if(d>=this.connections.length)return-1;a=n.y;let b=d;for(;0<=b&&this.connections[b].y===a;){if(this.connections[b]===n)return b;b--}for(b=d;b<this.connections.length&&this.connections[b].y===a;){if(this.connections[b]===n)return b;b++}return-1}calculateIndexForYPos(n){if(!this.connections.length)return 0;let a=0,d=this.connections.length;for(;a<d;){const b=Math.floor((a+d)/2);if(this.connections[b].y<n)a=b+1;else if(this.connections[b].y>n)d=b;else{a=b;break}}return a}removeConnection(n,a){if(n=this.findIndexOfConnection(n,a),n===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(n,1)}getNeighbours(n,a){function d($n){const No=R-b[$n].x,$o=G-b[$n].y;return Math.sqrt(No*No+$o*$o)<=a&&Nt.push(b[$n]),$o<a}const b=this.connections,R=n.x,G=n.y;n=0;let ce=b.length-2,Oe=ce;for(;n<Oe;)b[Oe].y<G?n=Oe:ce=Oe,Oe=Math.floor((n+ce)/2);const Nt=[];if(ce=n=Oe,b.length){for(;0<=n&&d(n);)n--;do ce++;while(ce<b.length&&d(ce))}return Nt}isInYRange(n,a,d){return Math.abs(this.connections[n].y-a)<=d}searchForClosest(n,a,d){if(!this.connections.length)return{connection:null,radius:a};const b=n.y,R=n.x;n.x=R+d.x,n.y=b+d.y;var G=this.calculateIndexForYPos(n.y);d=null;let ce=a,Oe,Nt=G-1;for(;0<=Nt&&this.isInYRange(Nt,n.y,a);)Oe=this.connections[Nt],this.connectionChecker.canConnect(n,Oe,!0,ce)&&(d=Oe,ce=Oe.distanceFrom(n)),Nt--;for(;G<this.connections.length&&this.isInYRange(G,n.y,a);)Oe=this.connections[G],this.connectionChecker.canConnect(n,Oe,!0,ce)&&(d=Oe,ce=Oe.distanceFrom(n)),G++;return n.x=R,n.y=b,{connection:d,radius:ce}}static init(n){const a=[];return a[En.INPUT_VALUE]=new wh(n),a[En.OUTPUT_VALUE]=new wh(n),a[En.NEXT_STATEMENT]=new wh(n),a[En.PREVIOUS_STATEMENT]=new wh(n),a}},Mm=class{paste(n,a,d){if(!a.isCapacityAvailable(n.typeCounts))return null;d&&(n.blockState.x=d.x,n.blockState.y=d.y),t.disable$$module$build$src$core$events$utils();let b;try{b=Un(n.blockState,a),ap(b)}finally{t.enable$$module$build$src$core$events$utils()}return b&&(q()&&!b.isShadow()&&he(new(xe(t.CREATE$$module$build$src$core$events$utils))(b)),b.select(),b)}};Mm.TYPE="block",Ll(Mm.TYPE,new Mm);var To=null,Rv=null,c0={duplicateInternal:ua,copyInternal:zu},Am={};Am.BlockPaster=Mm,Am.TEST_ONLY=c0,Am.copy=lp,Am.duplicate=dh,Am.paste=Zs,Am.registry=yg;var oE="aria-",_b="role",Ic;(function(n){n.GRID="grid",n.GRIDCELL="gridcell",n.GROUP="group",n.LISTBOX="listbox",n.MENU="menu",n.MENUITEM="menuitem",n.MENUITEMCHECKBOX="menuitemcheckbox",n.OPTION="option",n.PRESENTATION="presentation",n.ROW="row",n.TREE="tree",n.TREEITEM="treeitem"})(Ic||(Ic={}));var Bs;(function(n){n.ACTIVEDESCENDANT="activedescendant",n.COLCOUNT="colcount",n.DISABLED="disabled",n.EXPANDED="expanded",n.INVALID="invalid",n.LABEL="label",n.LABELLEDBY="labelledby",n.LEVEL="level",n.ORIENTATION="orientation",n.POSINSET="posinset",n.ROWCOUNT="rowcount",n.SELECTED="selected",n.SETSIZE="setsize",n.VALUEMAX="valuemax",n.VALUEMIN="valuemin"})(Bs||(Bs={}));var Ou={};Ou.Role=Ic,Ou.State=Bs,Ou.setRole=Ur,Ou.setState=sr;var a_=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(n){this.menuItems.push(n)}render(n){const a=document.createElement("div");a.className="blocklyMenu goog-menu blocklyNonSelectable",a.tabIndex=0,this.roleName&&Ur(a,this.roleName),this.element=a;for(let d=0,b;b=this.menuItems[d];d++)a.appendChild(b.createDom());return this.mouseOverHandler=we(a,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=we(a,"pointerup",this,this.handleClick,!0),this.mouseEnterHandler=we(a,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=we(a,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=we(a,"keydown",this,this.handleKeyEvent),n.appendChild(a),a}getElement(){return this.element}focus(){const n=this.getElement();n&&(n.focus({preventScroll:!0}),ke(n,"blocklyFocused"))}blur(){const n=this.getElement();n&&(n.blur(),mt(n,"blocklyFocused"))}setRole(n){this.roleName=n}dispose(){this.mouseOverHandler&&(it(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(it(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(it(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(it(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(it(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let n=0,a;a=this.menuItems[n];n++)a.dispose();this.element=null}getMenuItem(n){const a=this.getElement();for(;n&&n!==a;){if(n.classList.contains("blocklyMenuItem")){for(let d=0,b;b=this.menuItems[d];d++)if(b.getElement()===n)return b}n=n.parentElement}return null}setHighlighted(n){var a=this.highlightedItem;a&&(a.setHighlighted(!1),this.highlightedItem=null),n&&(n.setHighlighted(!0),this.highlightedItem=n,a=this.getElement(),ai(n.getElement(),a),sr(a,Bs.ACTIVEDESCENDANT,n.getId()))}highlightNext(){const n=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(n,1)}highlightPrevious(){const n=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>n?this.menuItems.length:n,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(n,a){n+=a;let d;for(;d=this.menuItems[n];){if(d.isEnabled()){this.setHighlighted(d);break}n+=a}}handleMouseOver(n){(n=this.getMenuItem(n.target))&&(n.isEnabled()?this.highlightedItem!==n&&this.setHighlighted(n):this.setHighlighted(null))}handleClick(n){const a=this.openingCoords;if(this.openingCoords=null,a&&typeof n.clientX=="number"){const d=new tn(n.clientX,n.clientY);if(1>tn.distance(a,d))return}(n=this.getMenuItem(n.target))&&n.performAction()}handleMouseEnter(n){this.focus()}handleMouseLeave(n){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(n){if(this.menuItems.length&&!(n.shiftKey||n.ctrlKey||n.metaKey||n.altKey)){var a=this.highlightedItem;switch(n.key){case"Enter":case" ":a&&a.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}n.preventDefault(),n.stopPropagation()}}getSize(){const n=this.getElement(),a=Wt(n);return a.height=n.scrollHeight,a}},Eg=class{constructor(n,a){this.content=n,this.opt_value=a,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const n=document.createElement("div");n.id=ie(),this.element=n,n.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const a=document.createElement("div");if(a.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var d=document.createElement("div");d.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",a.appendChild(d)}return d=this.content,typeof this.content=="string"&&(d=document.createTextNode(this.content)),a.appendChild(d),n.appendChild(a),this.roleName&&Ur(n,this.roleName),sr(n,Bs.SELECTED,this.checkable&&this.checked||!1),sr(n,Bs.DISABLED,!this.enabled),n}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let n;return(n=this.opt_value)!=null?n:null}setRightToLeft(n){this.rightToLeft=n}setRole(n){this.roleName=n}setCheckable(n){this.checkable=n}setChecked(n){this.checked=n}setHighlighted(n){this.highlight=n;const a=this.getElement();a&&this.isEnabled()&&(n?(ke(a,"blocklyMenuItemHighlight"),ke(a,"goog-menuitem-highlight")):(mt(a,"blocklyMenuItemHighlight"),mt(a,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(n){this.enabled=n}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(n,a){this.actionHandler=n.bind(a)}},xh=null,Im=null,Kp="blocklyWidgetDiv",Jp="",Uf="",sd,vp={};vp.createDom=Mo,vp.getDiv=Us,vp.hide=cl,vp.hideIfOwner=Ei,vp.isVisible=Hh,vp.positionWithAnchor=or,vp.repositionForWindowResize=up,vp.show=mu,vp.testOnly_setDiv=Wo;var $g=null,vb={},l_=null,Pd={};Pd.callbackFactory=t.callbackFactory$$module$build$src$core$contextmenu,Pd.commentDeleteOption=Gu,Pd.commentDuplicateOption=fh,Pd.dispose=jo,Pd.getCurrentBlock=cp,Pd.hide=Fl,Pd.setCurrentBlock=Gh,Pd.show=gu,Pd.workspaceCommentOption=fc;var Kr=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(n){if(this.registry_.has(n.id))throw Error('Menu item with ID "'+n.id+'" is already registered.');this.registry_.set(n.id,n)}unregister(n){if(!this.registry_.has(n))throw Error('Menu item with ID "'+n+'" not found.');this.registry_.delete(n)}getItem(n){let a;return(a=this.registry_.get(n))!=null?a:null}getContextMenuOptions(n,a){const d=[];for(const R of this.registry_.values())if(n===R.scopeType){var b=R.preconditionFn(a);b!=="hidden"&&(b={text:typeof R.displayText=="function"?R.displayText(a):R.displayText,enabled:b==="enabled",callback:R.callback,scope:a,weight:R.weight},d.push(b))}return d.sort(function(R,G){return R.weight-G.weight}),d}};(function(n){var a=n.ScopeType||(n.ScopeType={});a.BLOCK="block",a.WORKSPACE="workspace",n.registry=new n})(Kr||(Kr={})),Kr.ScopeType;var Rm={};Rm.clamp=Xr,Rm.toDegrees=ms,Rm.toRadians=mc;var Sg=16,u_=1,yb=12,c_=16,km=.25,wg=null,Qp=null,qp="",Om="",ri,Zp,Lm,Nm=null,zf=null,h_=null,g={getBoundsInfo:function(){const n=Tn(Nm),a=Wt(Nm);return{left:n.x,right:n.x+a.width,top:n.y,bottom:n.y+a.height,width:a.width,height:a.height}},getPositionMetrics:function(n,a,d,b){const R=g.getBoundsInfo(),G=Wt(ri);return a+G.height<R.bottom?Jn(n,a,R,G):b-G.height>R.top?tr(d,b,R,G):a+G.height<document.documentElement.clientHeight?Jn(n,a,R,G):b-G.height>document.documentElement.clientTop?tr(d,b,R,G):An(n,R,G)}},y={ANIMATION_TIME:km,ARROW_HORIZONTAL_PADDING:yb,ARROW_SIZE:Sg,BORDER_SIZE:u_,PADDING_Y:c_,TEST_ONLY:g};y.clearContent=Fc,y.createDom=hl,y.getContentDiv=Ul,y.getOwner=dl,y.getPositionX=xr,y.hide=po,y.hideIfOwner=gs,y.hideWithoutAnimation=ca,y.isVisible=Is,y.repositionForWindowResize=ss,y.setBoundsElement=Xo,y.setColour=xd,y.show=Nn,y.showPositionedByBlock=pi,y.showPositionedByField=je;var I=null,B=null,W={};W.connectionUiEffect=Ao,W.disconnectUiEffect=Rs,W.disconnectUiStop=Yo,W.disposeUiEffect=gc;var K=50,pe=100,Fe=class{constructor(n,a){this.bubble=n,this.workspace=a,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY()}startBubbleDrag(){t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout&&this.bubble.setAutoLayout(!1);let n;(n=this.workspace.getLayerManager())==null||n.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(n,a){a=this.pixelsToWorkspaceUnits_(a),a=tn.sum(this.startXY_,a),this.bubble.moveDuringDrag(a),a=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(n),n=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),n!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==a&&(a&&a.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(n){return n&&this.workspace.getComponentManager().hasCapability(n.id,ba.Capability.DELETE_AREA)?n.wouldDelete(this.bubble,!1):!1}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(n,a){if(this.dragBubble(n,a),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?n=this.startXY_:(n=this.pixelsToWorkspaceUnits_(a),n=tn.sum(this.startXY_,n)),this.bubble.moveTo(n.x,n.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_)this.fireMoveEvent_(),this.bubble.dispose();else{if(this.bubble.setDragging){this.bubble.setDragging(!1);let d;(d=this.workspace.getLayerManager())==null||d.moveOffDragLayer(this.bubble,pe)}this.fireMoveEvent_()}this.workspace.setResizesEnabled(!0),t.setGroup$$module$build$src$core$events$utils(!1)}fireMoveEvent_(){if(this.bubble instanceof ja){const n=new(xe(Ga))(this.bubble);n.setOldCoordinate(this.startXY_),n.recordNew(),he(n)}}pixelsToWorkspaceUnits_(n){return n=new tn(n.x/this.workspace.scale,n.y/this.workspace.scale),this.workspace.isMutator&&n.scale(1/this.workspace.options.parentWorkspace.scale),n}},Ke=30,$t=!0,jt=[];jt[En.INPUT_VALUE]=En.OUTPUT_VALUE,jt[En.OUTPUT_VALUE]=En.INPUT_VALUE,jt[En.NEXT_STATEMENT]=En.PREVIOUS_STATEMENT,jt[En.PREVIOUS_STATEMENT]=En.NEXT_STATEMENT;var en="RENAME_VARIABLE_ID",Jt="DELETE_VARIABLE_ID",vn={};vn.commonWordPrefix=gh,vn.commonWordSuffix=_u,vn.isNumber=t.isNumber$$module$build$src$core$utils$string,vn.shortestStringLength=Uc,vn.startsWith=mh,vn.wrap=t.wrap$$module$build$src$core$utils$string;var In=void 0,Ln=!1,Js=!1,_t=50,tt=0,vt=0,sn=0,Hn=0,Dn=null,Vn=null,dr=0,Xa=10,Ri=10,ef=750,h0=5,ql=null,Fd={HOVER_MS:ef,LIMIT:_t,MARGINS:h0,OFFSET_X:dr,OFFSET_Y:Xa,RADIUS_OK:Ri};Fd.bindMouseEvents=ei,Fd.block=Ad,Fd.createDom=_h,Fd.dispose=Md,Fd.getCustomTooltip=zc,Fd.getDiv=Oa,Fd.getTooltipOfObject=ha,Fd.hide=fl,Fd.isVisible=Cd,Fd.setCustomTooltip=_c,Fd.unbindMouseEvents=Xh,Fd.unblock=yh;var Iw=class{constructor(n){this.workspace=n,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new tn(n.scrollX,n.scrollY)}dispose(){this.workspace=null}startDrag(){k()&&k().unselect()}endDrag(n){this.drag(n)}drag(n){if(n=tn.sum(this.startScrollXY_,n),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(n.x,n.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(n.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,n.y);else throw new TypeError("Invalid state.")}},pR=5,fR=6,Dm=class{constructor(n,a){this.creatorWorkspace=a,this.mouseDownXY=new tn(0,0),this.startWorkspace_=this.targetBlock=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.flyout=this.workspaceDragger=this.blockDragger=this.bubbleDragger=null,this.isMultiTouch_=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=n,this.currentDragDeltaXY=new tn(0,0),this.healStack=!$t}dispose(){et(),yh(),this.creatorWorkspace.clearGesture();for(const n of this.boundEvents)it(n);this.boundEvents.length=0,this.blockDragger&&this.blockDragger.dispose(),this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(n){const a=new tn(n.clientX,n.clientY);this.updateDragDelta(a)&&(this.updateIsDragging(),Ze()),this.mostRecentEvent=n}updateDragDelta(n){return this.currentDragDeltaXY=tn.difference(n,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=tn.magnitude(this.currentDragDeltaXY)>(this.flyout?t.config$$module$build$src$core$config.flyoutDragRadius:t.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let n;if(!this.targetBlock||(n=this.flyout)==null||!n.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),this.targetBlock.select(),!0):!1}updateIsDraggingBubble(){return this.startBubble?(this.startDraggingBubble(),!0):!1}updateIsDraggingBlock(){if(!this.targetBlock)return!1;if(this.flyout){if(this.updateIsDraggingFromFlyout())return this.startDraggingBlock(),!0}else if(this.targetBlock.isMovable())return this.startDraggingBlock(),!0;return!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger=new Iw(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(){if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.updateIsDraggingBubble()||this.updateIsDraggingBlock()||this.updateIsDraggingWorkspace()}startDraggingBlock(){this.blockDragger=new(_(Lt.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock,this.startWorkspace_),this.blockDragger.startDrag(this.currentDragDeltaXY,this.healStack),this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY)}startDraggingBubble(){if(!this.startBubble)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger=new Fe(this.startBubble,this.startWorkspace_),this.bubbleDragger.startBubbleDrag(),this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY)}doStart(n){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,nt(n)?this.cancel():(this.gestureHasStarted=!0,Yo(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=dl(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=n,Ad(),this.targetBlock&&this.targetBlock.select(),Mt(n)?this.handleRightClick(n):(n.type.toLowerCase()==="pointerdown"&&n.pointerType!=="mouse"&&Re(n,this),this.mouseDownXY=new tn(n.clientX,n.clientY),this.healStack=n.altKey||n.ctrlKey||n.metaKey,this.bindMouseEvents(n),this.isEnding_||this.handleTouchStart(n)))}bindMouseEvents(n){this.boundEvents.push(we(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(we(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(we(document,"pointerup",null,this.handleUp.bind(this),!0)),n.preventDefault(),n.stopPropagation()}handleStart(n){this.isDragging()||(this.handleTouchStart(n),this.isMultiTouch()&&Ze())}handleMove(n){this.isDragging()&&ct(n)||!this.isMultiTouch()?(this.updateFromEvent(n),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.blockDragger?this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY):this.bubbleDragger&&this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY),n.preventDefault(),n.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(n),Ze())}handleUp(n){if(this.isDragging()||this.handleTouchEnd(n),!this.isMultiTouch()||this.isDragging()){if(!ct(n))return;if(this.updateFromEvent(n),Ze(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.bubbleDragger?this.bubbleDragger.endBubbleDrag(n,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(n,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()?this.doBubbleClick():this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(n)}n.preventDefault(),n.stopPropagation(),this.dispose()}handleTouchStart(n){var a=rt(n);this.cachedPoints.set(a,this.getTouchPoint(n));var d=Array.from(this.cachedPoints.keys());d.length===2&&(a=this.cachedPoints.get(d[0]),d=this.cachedPoints.get(d[1]),this.startDistance=tn.distance(a,d),this.isMultiTouch_=!0,n.preventDefault())}handleTouchMove(n){const a=rt(n);this.cachedPoints.set(a,this.getTouchPoint(n)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(n):this.handleMove(n)}handlePinch(n){var a=Array.from(this.cachedPoints.keys()),d=this.cachedPoints.get(a[0]);if(a=this.cachedPoints.get(a[1]),d=tn.distance(d,a)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(a=d-this.previousScale,a=0<a?a*pR:a*fR,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const b=this.startWorkspace_,R=At(n,b.getParentSvg(),b.getInverseScreenCTM());b.zoom(R.x,R.y,a)}this.previousScale=d,n.preventDefault()}handleTouchEnd(n){n=rt(n),this.cachedPoints.has(n)&&this.cachedPoints.delete(n),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(n){return this.startWorkspace_?new tn(n.pageX,n.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(Ze(),this.bubbleDragger?this.bubbleDragger.endBubbleDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(n){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(n)):this.startBubble?this.startBubble.showContextMenu(n):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(n)),n.preventDefault(),n.stopPropagation(),this.dispose()}handleWsStart(n,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(a),this.mostRecentEvent=n,this.doStart(n)}fireWorkspaceClick(n){he(new(xe(Iu))(null,n.id,"workspace"))}handleFlyoutStart(n,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(a),this.handleWsStart(n,a.getWorkspace())}handleBlockStart(n,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(a),this.mostRecentEvent=n}handleBubbleStart(n,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(a),this.mostRecentEvent=n}doBubbleClick(){this.startBubble instanceof ja&&(this.startBubble.setFocus(),this.startBubble.select())}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock.isEnabled()&&(t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.flyout.createBlock(this.targetBlock).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const n=new(xe(Iu))(this.startBlock,this.startWorkspace_.id,"block");he(n)}this.bringBlockToFront(),t.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(n){n=this.creatorWorkspace,k()&&k().unselect(),this.fireWorkspaceClick(this.startWorkspace_||n)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(n){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=n)}setStartIcon(n){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=n)}setStartBubble(n){this.startBubble||(this.startBubble=n)}setStartBlock(n){this.startBlock||this.startBubble||(this.startBlock=n,n.isInFlyout&&n!==n.getRootBlock()?this.setTargetBlock(n.getRootBlock()):this.setTargetBlock(n))}setTargetBlock(n){n.isShadow()?this.setTargetBlock(n.getParent()):this.targetBlock=n}setStartWorkspace(n){this.startWorkspace_||(this.startWorkspace_=n)}setStartFlyout(n){this.flyout||(this.flyout=n)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const n=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&n}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}isDragging(){return!!this.workspaceDragger||!!this.blockDragger||!!this.bubbleDragger}hasStarted(){return this.gestureHasStarted}getInsertionMarkers(){return this.blockDragger?this.blockDragger.getInsertionMarkers():[]}getCurrentDragger(){let n,a;return(a=(n=this.blockDragger)!=null?n:this.workspaceDragger)!=null?a:this.bubbleDragger}static inProgress(){const n=E();for(let a=0,d;d=n[a];a++)if(d.currentGesture_)return!0;return!1}},aE=class{constructor(n,a){this.pattern=n,this.scale=1;let d;this.spacing=(d=a.spacing)!=null?d:0;let b;this.length=(b=a.length)!=null?b:1,this.line2=(this.line1=n.firstChild)&&this.line1.nextSibling;let R;this.snapToGrid=(R=a.snap)!=null?R:!1}setSpacing(n){this.spacing=n,this.update(this.scale)}setLength(n){this.length=n,this.update(this.scale)}setSnapToGrid(n){this.snapToGrid=n}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(n){this.scale=n;var a=this.spacing*n;this.pattern.setAttribute("width",`${a}`),this.pattern.setAttribute("height",`${a}`),a=Math.floor(this.spacing/2)+.5;let d=a-this.length/2,b=a+this.length/2;a*=n,d*=n,b*=n,this.setLineAttributes(this.line1,n,d,b,a,a),this.setLineAttributes(this.line2,n,a,a,d,b)}setLineAttributes(n,a,d,b,R,G){n&&(n.setAttribute("stroke-width",`${a}`),n.setAttribute("x1",`${d}`),n.setAttribute("y1",`${R}`),n.setAttribute("x2",`${b}`),n.setAttribute("y2",`${G}`))}moveTo(n,a){this.pattern.setAttribute("x",`${n}`),this.pattern.setAttribute("y",`${a}`)}static createDom(n,a,d){n=Z(Be.PATTERN,{id:"blocklyGridPattern"+n,patternUnits:"userSpaceOnUse"},d);let b,R;if(0<((b=a.length)!=null?b:1)&&0<((R=a.spacing)!=null?R:0)){Z(Be.LINE,{stroke:a.colour},n);let G;(G=a.length)!=null&&G&&Z(Be.LINE,{stroke:a.colour},n)}else Z(Be.LINE,{},n);return n}},Ch=class{constructor(n){this.workspace=n,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(n,a){this.markers.has(n)&&this.unregisterMarker(n),a.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,a)),this.setMarkerSvg(a.getDrawer().createDom()),this.markers.set(n,a)}unregisterMarker(n){const a=this.markers.get(n);if(a)a.dispose(),this.markers.delete(n);else throw Error("Marker with ID "+n+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor_}getMarker(n){return this.markers.get(n)||null}setCursor(n){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=n)&&(n=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(n),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(n){n?(this.workspace.getBlockCanvas().appendChild(n),this.cursorSvg_=n):this.cursorSvg_=null}setMarkerSvg(n){n?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(n,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(n)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const n=Object.keys(this.markers);for(let a=0,d;d=n[a];a++)this.unregisterMarker(d);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};Ch.LOCAL_MARKER="local_marker_1";var Rw={};Rw.deepMerge=ml;var d_=class{constructor(n,a,d,b){this.name=n,this.startHats=!1,this.blockStyles=a||Object.create(null),this.categoryStyles=d||Object.create(null),this.componentStyles=b||Object.create(null),this.fontStyle=Object.create(null),i(Lt.THEME,n,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(n,a){this.blockStyles[n]=a}setCategoryStyle(n,a){this.categoryStyles[n]=a}getComponentStyle(n){if(n=this.componentStyles[n],!n)return null;if(typeof n=="string"){const a=this.getComponentStyle(n);if(a)return a}return`${n}`}setComponentStyle(n,a){this.componentStyles[n]=a}setFontStyle(n){this.fontStyle=n}setStartHats(n){this.startHats=n}static defineTheme(n,a){n=n.toLowerCase();const d=new d_(n);let b=a.base;if(b){if(typeof b=="string"){let R;b=(R=p(Lt.THEME,b))!=null?R:void 0}b instanceof d_&&(ml(d,b),d.name=n)}return ml(d.blockStyles,a.blockStyles),ml(d.categoryStyles,a.categoryStyles),ml(d.componentStyles,a.componentStyles),ml(d.fontStyle,a.fontStyle),a.startHats!==null&&(d.startHats=a.startHats),d}},p_={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},Dr={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},bb=new d_("classic",p_,Dr),Lo=class{constructor(n){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let a=null,d=!1;var b=!1,R=!1,G=!1,ce=!1,Oe=!1;const Nt=!!n.readOnly;if(!Nt){var $n;a=at(($n=n.toolbox)!=null?$n:null),d=Dt(a),b=n.trashcan,b=b===void 0?d:b,R=n.collapse,R=R===void 0?d:R,G=n.comments,G=G===void 0?d:G,ce=n.disable,ce=ce===void 0?d:ce,Oe=n.sounds,Oe=Oe===void 0?!0:Oe}$n=n.maxTrashcanContents,b?$n===void 0&&($n=32):$n=0;const No=!!n.rtl;let $o=n.horizontalLayout;$o===void 0&&($o=!1);var Sp=n.toolboxPosition!=="end";Sp=$o?Sp?Xn.TOP:Xn.BOTTOM:Sp===No?Xn.RIGHT:Xn.LEFT;let zb=n.css;zb===void 0&&(zb=!0);let Hb="https://blockly-demo.appspot.com/static/media/";n.media?Hb=n.media.endsWith("/")?n.media:n.media+"/":"path"in n&&(be("path","Nov 2014","Jul 2023","media"),Hb=n.path+"media/");const tF=n.oneBasedIndex,J7=n.renderer||"geras",Q7=n.plugins||{};let AR=n.modalInputs;AR===void 0&&(AR=!0),this.RTL=No,this.oneBasedIndex=tF===void 0?!0:tF,this.collapse=R,this.comments=G,this.disable=ce,this.readOnly=Nt,this.maxBlocks=n.maxBlocks||1/0;let nF;this.maxInstances=(nF=n.maxInstances)!=null?nF:null,this.modalInputs=AR,this.pathToMedia=Hb,this.hasCategories=d,this.moveOptions=Lo.parseMoveOptions_(n,d),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=b,this.maxTrashcanContents=$n,this.hasSounds=Oe,this.hasCss=zb,this.horizontalLayout=$o,this.languageTree=a,this.gridOptions=Lo.parseGridOptions_(n),this.zoomOptions=Lo.parseZoomOptions_(n),this.toolboxPosition=Sp,this.theme=Lo.parseThemeOptions_(n),this.renderer=J7;let rF;this.rendererOverrides=(rF=n.rendererOverrides)!=null?rF:null;let iF;this.parentWorkspace=(iF=n.parentWorkspace)!=null?iF:null,this.plugins=Q7}static parseMoveOptions_(n,a){const d=n.move||{},b={};return d.scrollbars===void 0&&n.scrollbars===void 0?b.scrollbars=a:typeof d.scrollbars=="object"?(b.scrollbars={horizontal:!!d.scrollbars.horizontal,vertical:!!d.scrollbars.vertical},b.scrollbars.horizontal&&b.scrollbars.vertical?b.scrollbars=!0:b.scrollbars.horizontal||b.scrollbars.vertical||(b.scrollbars=!1)):b.scrollbars=!!d.scrollbars||!!n.scrollbars,b.wheel=b.scrollbars&&d.wheel!==void 0?!!d.wheel:typeof b.scrollbars=="object",b.drag=b.scrollbars?d.drag===void 0?!0:!!d.drag:!1,b}static parseZoomOptions_(n){n=n.zoom||{};const a={};return a.controls=n.controls===void 0?!1:!!n.controls,a.wheel=n.wheel===void 0?!1:!!n.wheel,a.startScale=n.startScale===void 0?1:Number(n.startScale),a.maxScale=n.maxScale===void 0?3:Number(n.maxScale),a.minScale=n.minScale===void 0?.3:Number(n.minScale),a.scaleSpeed=n.scaleSpeed===void 0?1.2:Number(n.scaleSpeed),a.pinch=n.pinch===void 0?a.wheel||a.controls:!!n.pinch,a}static parseGridOptions_(n){n=n.grid||{};const a={};return a.spacing=Number(n.spacing)||0,a.colour=n.colour||"#888",a.length=n.length===void 0?1:Number(n.length),a.snap=0<a.spacing&&!!n.snap,a}static parseThemeOptions_(n){return n=n.theme||bb,typeof n=="string"?p(Lt.THEME,n):n instanceof d_?n:d_.defineTheme(n.name||"builtin"+ie(),n)}},oo=class extends _p{constructor(n,a,d,b,R){super(n),this.type=t.CHANGE$$module$build$src$core$events$utils,n&&(this.element=a,this.name=d||void 0,this.oldValue=b,this.newValue=R)}toJson(){const n=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return n.element=this.element,n.name=this.name,n.oldValue=this.oldValue,n.newValue=this.newValue,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new oo),a.element=n.element,a.name=n.name,a.oldValue=n.oldValue,a.newValue=n.newValue,a}isNull(){return this.oldValue===this.newValue}run(n){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(a=a.getBlockById(this.blockId),!a)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");var d=a.getIcon(so.MUTATOR);switch(d&&gl(d)&&d.bubbleIsVisible()&&d.setBubbleVisible(!1),n=n?this.newValue:this.oldValue,this.element){case"field":(a=a.getField(this.name))?a.setValue(n):console.warn("Can't set non-existent field: "+this.name);break;case"comment":a.setCommentText(n||null);break;case"collapsed":a.setCollapsed(!!n);break;case"disabled":a.setEnabled(!n);break;case"inline":a.setInputsInline(!!n);break;case"mutation":d=oo.getExtraBlockState_(a),a.loadExtraState?a.loadExtraState(JSON.parse(n||"{}")):a.domToMutation&&a.domToMutation(t.textToDom$$module$build$src$core$utils$xml(n||"<mutation/>")),he(new oo(a,"mutation",null,d,n));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(n){return n.saveExtraState?(n=n.saveExtraState(!0))?JSON.stringify(n):"":n.mutationToDom&&(n=n.mutationToDom())?bi(n):""}};i(Lt.EVENT,t.CHANGE$$module$build$src$core$events$utils,oo);var lE=.45,Hf=.65,kw={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},yp={};yp.blend=bc,yp.getHsvSaturation=vc,yp.getHsvValue=Yh,yp.hexToRgb=Kh,yp.hsvToHex=yc,yp.hueToHex=Xu,yp.names=kw,yp.parse=La,yp.rgbToHex=ju,yp.setHsvSaturation=bh,yp.setHsvValue=Vu;var kv={};kv.checkMessageReferences=zl,kv.parseBlockColour=Qi,kv.replaceMessageReferences=Er,kv.tokenizeInterpolation=Jo;var ii=class{constructor(n,a,d){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new Es(0,0),n!==ii.SKIP_SETUP&&(d&&this.configure_(d),this.setValue(n),a&&this.setValidator(a))}configure_(n){n.tooltip&&this.setTooltip(Er(n.tooltip))}setSourceBlock(n){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=n}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=Z(Be.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=Z(Be.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=Z(Be.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const n=this.getClickTarget_();if(!n)throw Error("A click target has not been set.");ei(n),this.mouseDownWrapper_=we(n,"pointerdown",this,this.onMouseDown_)}fromXml(n){this.setValue(n.textContent)}toXml(n){return n.textContent=this.getValue(),n}saveState(n){return n=this.saveLegacyState(ii),n!==null?n:this.getValue()}loadState(n){this.loadLegacyState(ii,n)||this.setValue(n)}saveLegacyState(n){return n.prototype.saveState===this.saveState&&n.prototype.toXml!==this.toXml?(n=t.createElement$$module$build$src$core$utils$xml("field"),n.setAttribute("name",this.name||""),gn(this.toXml(n)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(n,a){return n.prototype.loadState===this.loadState&&n.prototype.fromXml!==this.fromXml?(this.fromXml(t.textToDom$$module$build$src$core$utils$xml(a)),!0):!1}dispose(){gs(this),Ei(this);let n;(n=this.getSourceBlock())!=null&&n.isDeadOrDying()||ut(this.fieldGroup_),this.disposed=!0}updateEditable(){const n=this.fieldGroup_,a=this.getSourceBlock();this.EDITABLE&&n&&a&&(this.enabled_&&a.isEditable()?(ke(n,"blocklyEditableText"),mt(n,"blocklyNonEditableText"),n.style.cursor=this.CURSOR):(ke(n,"blocklyNonEditableText"),mt(n,"blocklyEditableText"),n.style.cursor=""))}setEnabled(n){this.enabled_=n,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==ii.prototype.showEditor_}isClickableInFlyout(n){return!n}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let n=!1;return this.name&&(this.SERIALIZABLE?n=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),n=!0)),n}isVisible(){return this.visible_}setVisible(n){if(this.visible_!==n){this.visible_=n;var a=this.fieldGroup_;a&&(a.style.display=n?"block":"none")}}setValidator(n){this.validator_=n}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(n){this.isClickable()&&this.showEditor_(n)}showEditor_(n){}repositionForWindowResize(){return!1}updateSize_(n){const a=this.getConstants();n=n!==void 0?n:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let d=2*n,b=a.FIELD_TEXT_HEIGHT,R=0;this.textElement_&&(R=Ge(this.textElement_,a.FIELD_TEXT_FONTSIZE,a.FIELD_TEXT_FONTWEIGHT,a.FIELD_TEXT_FONTFAMILY),d+=R),this.isFullBlockField()||(b=Math.max(b,a.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=b,this.size_.width=d,this.positionTextElement_(n,R),this.positionBorderRect_()}positionTextElement_(n,a){if(this.textElement_){var d=this.getConstants(),b=this.size_.height/2,R;this.textElement_.setAttribute("x",String((R=this.getSourceBlock())!=null&&R.RTL?this.size_.width-a-n:n)),this.textElement_.setAttribute("y",String(d.FIELD_TEXT_BASELINE_CENTER?b:b-d.FIELD_TEXT_HEIGHT/2+d.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Es(0,0)}getScaledBBox(){let n;var a=this.getSourceBlock();if(!a)throw new Qs;if(this.isFullBlockField()){var d=this.sourceBlock_.getHeightWidth();const b=a.workspace.scale;n=this.getAbsoluteXY_(),a=(d.width+1)*b,d=(d.height+1)*b,ln?(n.x+=1.5*b,n.y+=1.5*b):(n.x-=.5*b,n.y-=.5*b)}else d=this.borderRect_.getBoundingClientRect(),n=Tn(this.borderRect_),a=d.width,d=d.height;return new gi(n.y,n.y+d,n.x,n.x+a)}onLocationChange(n){}getDisplayText_(){let n=this.getText();return n?(n.length>this.maxDisplayLength&&(n=n.substring(0,this.maxDisplayLength-2)+"…"),n=n.replace(/\s/g,ii.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(n+="‏"),n):ii.NBSP}getText(){const n=this.getText_();return String(n!==null?n:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.queueRender(),this.sourceBlock_.bumpNeighbours())}setValue(n,a=!0){if(n!==null){var d=this.doClassValidation_(n);if(n=this.processValidation_(n,d),!(n instanceof Error)){var b;d=(b=this.getValidator())==null?void 0:b.call(this,n),b=this.processValidation_(n,d),b instanceof Error||(n=this.sourceBlock_,n&&n.disposed||(d=this.getValue(),d===b?this.doValueUpdate_(b):(this.doValueUpdate_(b),a&&n&&q()&&he(new(xe(t.CHANGE$$module$build$src$core$events$utils))(n,"field",this.name||null,d,b)),this.isDirty_&&this.forceRerender())))}}}processValidation_(n,a){return a===null?(this.doValueInvalid_(n),this.isDirty_&&this.forceRerender(),Error()):a===void 0?n:a}getValue(){return this.value_}doClassValidation_(n){return n??null}doValueUpdate_(n){this.value_=n,this.isDirty_=!0}doValueInvalid_(n){}onMouseDown_(n){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(n=this.sourceBlock_.workspace.getGesture(n))&&n.setStartField(this)}setTooltip(n){n||n===""||(n=this.sourceBlock_);const a=this.getClickTarget_();a?a.tooltip=n:this.tooltip_=n}getTooltip(){const n=this.getClickTarget_();return ha(n||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Tn(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let n=null;const a=this.getSourceBlock();if(!a)throw new Qs;const d=a.inputList;for(let b=0;b<a.inputList.length;b++){const R=d[b],G=R.fieldRow;for(let ce=0;ce<G.length;ce++)if(G[ce]===this){n=R;break}}return n}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(n){return!1}setCursorSvg(n){if(n){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(n),this.cursorSvg_=n}else this.cursorSvg_=null}setMarkerSvg(n){if(n){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(n),this.markerSvg_=n}else this.markerSvg_=null}updateMarkers_(){var n=this.getSourceBlock();if(!n)throw new Qs;n=n.workspace,n.keyboardAccessibilityMode&&this.cursorSvg_&&n.getCursor().draw(),n.keyboardAccessibilityMode&&this.markerSvg_&&n.getMarker(Ch.LOCAL_MARKER).draw()}};ii.NBSP=" ",ii.SKIP_SETUP=Symbol("SKIP_SETUP");var Qs=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}};t.Names$$module$build$src$core$names=class{constructor(n,a){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=a||"",this.reservedWords=new Set(n?n.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(n){this.variableMap=n}getNameForUserVariable(n){return this.variableMap?(n=this.variableMap.getVariableById(n))?n.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(n){n=t.allUsedVarModels$$module$build$src$core$variables(n);for(let a=0;a<n.length;a++)this.getName(n[a].getId(),t.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(n){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(n,a){let d=n;a===t.NameType$$module$build$src$core$names.VARIABLE&&(n=this.getNameForUserVariable(n))&&(d=n),n=d.toLowerCase();const b=a===t.NameType$$module$build$src$core$names.VARIABLE||a===t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(a)||this.db.set(a,new Map);const R=this.db.get(a);return R.has(n)?b+R.get(n):(a=this.getDistinctName(d,a),R.set(n,a.substr(b.length)),a)}getUserNames(n){let a;return(n=(a=this.db.get(n))==null?void 0:a.keys())?Array.from(n):[]}getDistinctName(n,a){n=this.safeName(n);let d=null,b,R;for(;this.dbReverse.has(n+((b=d)!=null?b:""))||this.reservedWords.has(n+((R=d)!=null?R:""));)d=d?d+1:2;let G;return n+=(G=d)!=null?G:"",this.dbReverse.add(n),(a===t.NameType$$module$build$src$core$names.VARIABLE||a===t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+n}safeName(n){return n?(n=encodeURI(n.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(n[0])!==-1&&(n="my_"+n)):n=t.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",n}static equals(n,a){return n.toLowerCase()===a.toLowerCase()}},function(n){n=n.NameType||(n.NameType={}),n.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",n.VARIABLE="VARIABLE",n.PROCEDURE="PROCEDURE"}(t.Names$$module$build$src$core$names||(t.Names$$module$build$src$core$names={})),t.NameType$$module$build$src$core$names=t.Names$$module$build$src$core$names.NameType,t.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,t.NameType$$module$build$src$core$names,t.Names$$module$build$src$core$names;var Tb=class extends Map{constructor(){super()}set(n,a){return this.get(n)===a?this:(super.set(n,a),ve(a)&&a.startPublishing(),this)}delete(n){const a=this.get(n);return n=super.delete(n),n&&(ve(a)&&a.stopPublishing(),n)}clear(){if(this.size)for(const n of this.keys())this.delete(n)}add(n){return this.set(n.getId(),n)}getProcedures(){return[...this.values()]}},Eb=class{constructor(n){this.sourceBlock=n,this.offsetInBlock=new tn(0,0),this.workspaceLocation=new tn(0,0),this.svgRoot=null,this.tooltip=n}getType(){throw Error("Icons must implement getType")}initView(n){if(!this.svgRoot){var a=this.sourceBlock;this.svgRoot=Z(Be.G,{class:"blocklyIconGroup"}),a.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),we(this.svgRoot,"pointerdown",this,n),this.svgRoot.tooltip=this,ei(this.svgRoot)}}dispose(){Xh(this.svgRoot),ut(this.svgRoot)}getWeight(){return-1}getSize(){return new Es(0,0)}setTooltip(n){this.tooltip=n??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",gl(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(n){this.offsetInBlock=n,this.updateSvgRootOffset()}updateSvgRootOffset(){let n;(n=this.svgRoot)==null||n.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(n){this.workspaceLocation=tn.sum(n,this.offsetInBlock)}onClick(){}isClickableInFlyout(n){return!0}setVisible(n){be("setVisible","v10","v11","setBubbleVisible"),gl(this)&&this.setBubbleVisible(n)}},Gf={fromJsonInternal:Br},Ov={TEST_ONLY:Gf};Ov.fromJson=t.fromJson$$module$build$src$core$field_registry,Ov.register=Hs,Ov.unregister=Na;var Ud=class extends ii{constructor(n,a,d){super(ii.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,n!==ii.SKIP_SETUP&&(Array.isArray(n)?(da(n),n=zn(n),this.menuGenerator_=n.options,this.prefixField=n.prefix||null,this.suffixField=n.suffix||null):this.menuGenerator_=n,this.selectedOption=this.getOptions(!1)[0],d&&this.configure_(d),this.setValue(this.selectedOption[1]),a&&this.setValidator(a))}fromXml(n){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(n.textContent)}loadState(n){this.loadLegacyState(Ud,n)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(n))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=Z(Be.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&ke(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let n;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((n=this.getSourceBlock())!=null&&n.isShadow())}createTextArrow_(){this.arrow=Z(Be.TSPAN,{},this.textElement_);let n;this.arrow.appendChild(document.createTextNode((n=this.getSourceBlock())!=null&&n.RTL?Ud.ARROW_CHAR+" ":" "+Ud.ARROW_CHAR));let a;(a=this.getSourceBlock())!=null&&a.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=Z(Be.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(Ts,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(n){var a=this.getSourceBlock();if(!a)throw new Qs;this.dropdownCreate(),this.menu_.openingCoords=n&&typeof n.clientX=="number"?new tn(n.clientX,n.clientY):null,Fc(),n=this.menu_.render(Ul()),ke(n,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(a=a.getColour(),xd(a,this.sourceBlock_.style.colourTertiary)),je(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&(this.menu_.setHighlighted(this.selectedMenuItem),ai(this.selectedMenuItem.getElement(),Ul(),!0)),this.applyColour()}dropdownCreate(){const n=this.getSourceBlock();if(!n)throw new Qs;const a=new a_;a.setRole(Ic.LISTBOX),this.menu_=a;const d=this.getOptions(!1);this.selectedMenuItem=null;for(let R=0;R<d.length;R++){const[G,ce]=d[R];if(typeof G=="object"){var b=new Image(G.width,G.height);b.src=G.src,b.alt=G.alt||""}else b=G;b=new Eg(b,ce),b.setRole(Ic.OPTION),b.setRightToLeft(n.RTL),b.setCheckable(!0),a.addChild(b),b.setChecked(ce===this.value_),ce===this.value_&&(this.selectedMenuItem=b),b.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(n){gs(this,!0),this.onItemSelected_(this.menu_,n)}onItemSelected_(n,a){this.setValue(a.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(n){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:n&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),da(this.generatedOptions),this.generatedOptions)}doClassValidation_(n){return this.getOptions(!0).some(a=>a[1]===n)?n:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+n),null)}doValueUpdate_(n){super.doValueUpdate_(n),n=this.getOptions(!0);for(let a=0,d;d=n[a];a++)d[1]===this.value_&&(this.selectedOption=d)}applyColour(){const n=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",n.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",n.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=n.colourSecondary:this.arrow.style.fill=n.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const n=this.selectedOption&&this.selectedOption[0];n&&typeof n=="object"?this.renderSelectedImage(n):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(n){const a=this.getSourceBlock();if(!a)throw new Qs;this.imageElement.style.display="",this.imageElement.setAttributeNS(Ts,"xlink:href",n.src),this.imageElement.setAttribute("height",String(n.height)),this.imageElement.setAttribute("width",String(n.width));const d=Number(n.height);n=Number(n.width);var b=!!this.borderRect_;const R=Math.max(b?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,d+Ya);b=b?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let G;G=this.svgArrow?this.positionSVGArrow(n+b,R/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Ge(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=n+G+2*b,this.size_.height=R;let ce=0;a.RTL?this.imageElement.setAttribute("x",`${b+G}`):(ce=n+G,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${b}`)),this.imageElement.setAttribute("y",String(R/2-d/2)),this.positionTextElement_(ce+b,n+G)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var n=this.getTextElement();ke(n,"blocklyDropdownText"),n.setAttribute("text-anchor","start");var a=!!this.borderRect_;n=Math.max(a?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const d=Ge(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);a=a?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let b=0;this.svgArrow&&(b=this.positionSVGArrow(d+a,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=d+b+2*a,this.size_.height=n,this.positionTextElement_(a,d)}positionSVGArrow(n,a){if(!this.svgArrow)return 0;const d=this.getSourceBlock();if(!d)throw new Qs;const b=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,R=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,G=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(d.RTL?b:n+R)+","+a+")"),G+R}getText_(){if(!this.selectedOption)return null;const n=this.selectedOption[0];return typeof n=="object"?n.alt:n}static fromJson(n){if(!n.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(n.options,void 0,n)}};Ud.CHECKMARK_OVERHANG=25,Ud.MAX_MENU_HEIGHT_VH=.45,Ud.ARROW_CHAR="▾";var wa=5,Ya=2*wa;Hs("field_dropdown",Ud);var od,Xi=class{constructor(n,a,d){this.workspace=n,this.anchor=a,this.ownerRect=d,this.size=new Es(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.svgRoot=Z(Be.G,{},n.getBubbleCanvas()),n=Z(Be.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=Z(Be.PATH,{},n),this.background=Z(Be.RECT,{class:"blocklyDraggable",x:0,y:0,rx:od.BORDER_WIDTH,ry:od.BORDER_WIDTH},n),this.contentContainer=Z(Be.G,{},this.svgRoot),we(this.background,"pointerdown",this,this.onMouseDown)}dispose(){ut(this.svgRoot),this.disposed=!0}setAnchorLocation(n,a=!1){this.anchor=n,a?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(n,a){this.relativeLeft=n,this.relativeTop=a,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(n,a=!1){n.width=Math.max(n.width,od.MIN_SIZE),n.height=Math.max(n.height,od.MIN_SIZE),this.size=n,this.background.setAttribute("width",`${n.width}`),this.background.setAttribute("height",`${n.height}`),a?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(n){this.colour=n,this.tail.setAttribute("fill",n),this.background.setAttribute("fill",n)}onMouseDown(n){let a;(a=this.workspace.getGesture(n))==null||a.handleBubbleStart(n,this)}positionRelativeToAnchor(){let n=this.anchor.x;n=this.workspace.RTL?n-(this.relativeLeft+this.size.width):n+this.relativeLeft,this.moveTo(n,this.relativeTop+this.anchor.y)}moveTo(n,a){this.svgRoot.setAttribute("transform",`translate(${n}, ${a})`)}positionByRect(n=new gi(0,0,0,0)){var a=this.workspace.getMetricsManager().getViewMetrics(!0),d=this.getOptimalRelativeLeft(a),b=this.getOptimalRelativeTop(a);const R={x:d,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},G={x:-this.size.width-30,y:b};b={x:n.getWidth(),y:b};var ce={x:d,y:n.getHeight()};d=n.getWidth()<n.getHeight()?b:ce,n=n.getWidth()<n.getHeight()?ce:b,b=this.getOverlap(R,a),ce=this.getOverlap(G,a);const Oe=this.getOverlap(d,a);a=this.getOverlap(n,a),a=Math.max(b,ce,Oe,a),b===a?(this.relativeLeft=R.x,this.relativeTop=R.y):ce===a?(this.relativeLeft=G.x,this.relativeTop=G.y):Oe===a?(this.relativeLeft=d.x,this.relativeTop=d.y):(this.relativeLeft=n.x,this.relativeTop=n.y),this.positionRelativeToAnchor()}getOverlap(n,a){var d=this.workspace.RTL?this.anchor.x-n.x-this.size.width:n.x+this.anchor.x;return n=n.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(d+this.size.width,a.left+a.width)-Math.max(d,a.left))*(Math.min(n+this.size.height,a.top+a.height)-Math.max(n,a.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(n){let a=-this.size.width/4;if(this.size.width>n.width)return a;if(n=this.getWorkspaceViewRect(n),this.workspace.RTL){var d=this.anchor.x-a;d-this.size.width<n.left?a=-(n.left-this.anchor.x+this.size.width):d>n.right&&(a=-(n.right-this.anchor.x))}else{d=a+this.anchor.x;const b=d+this.size.width;d<n.left?a=n.left-this.anchor.x:b>n.right&&(a=n.right-this.anchor.x-this.size.width)}return a}getOptimalRelativeTop(n){let a=-this.size.height/4;if(this.size.height>n.height)return a;const d=this.anchor.y+a,b=d+this.size.height;return n=this.getWorkspaceViewRect(n),d<n.top?a=n.top-this.anchor.y:b>n.bottom&&(a=n.bottom-this.anchor.y-this.size.height),a}getWorkspaceViewRect(n){const a=n.top;let d=n.top+n.height,b=n.left;return n=n.left+n.width,d-=this.getScrollbarThickness(),this.workspace.RTL?b-=this.getScrollbarThickness():n-=this.getScrollbarThickness(),new gi(a,d,b,n)}getScrollbarThickness(){return Oo.scrollbarThickness/this.workspace.scale}renderTail(){const n=[];var a=this.size.width/2,d=this.size.height/2,b=-this.relativeLeft,R=-this.relativeTop;if(a===b&&d===R)n.push("M "+a+","+d);else{R-=d,b-=a,this.workspace.RTL&&(b*=-1);var G=Math.sqrt(R*R+b*b),ce=Math.acos(b/G);0>R&&(ce=2*Math.PI-ce);var Oe=ce+Math.PI/2;Oe>2*Math.PI&&(Oe-=2*Math.PI);var Nt=Math.sin(Oe);const No=Math.cos(Oe);let $o=(this.size.width+this.size.height)/od.TAIL_THICKNESS;$o=Math.min($o,this.size.width,this.size.height)/4,Oe=1-od.ANCHOR_RADIUS/G,b=a+Oe*b,R=d+Oe*R,Oe=a+$o*No;const Sp=d+$o*Nt;a-=$o*No,d-=$o*Nt,Nt=mc(this.workspace.RTL?-od.TAIL_ANGLE:od.TAIL_ANGLE),Nt=ce+Nt,Nt>2*Math.PI&&(Nt-=2*Math.PI),ce=Math.sin(Nt)*G/od.TAIL_BEND,G=Math.cos(Nt)*G/od.TAIL_BEND,n.push("M"+Oe+","+Sp),n.push("C"+(Oe+G)+","+(Sp+ce)+" "+b+","+R+" "+b+","+R),n.push("C"+b+","+R+" "+(a+G)+","+(d+ce)+" "+a+","+d)}n.push("z");let $n;($n=this.tail)==null||$n.setAttribute("d",n.join(" "))}bringToFront(){let n;const a=(n=this.svgRoot)==null?void 0:n.parentNode;return this.svgRoot&&(a==null?void 0:a.lastChild)!==this.svgRoot?(a==null||a.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new tn(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(n){this.moveTo(n.x,n.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-n.x-this.size.width:n.x-this.anchor.x,this.relativeTop=n.y-this.anchor.y,this.renderTail()}setDragging(n){}setDeleteStyle(n){}isDeletable(){return!1}showContextMenu(n){}};od=Xi,Xi.BORDER_WIDTH=6,Xi.DOUBLE_BORDER=2*od.BORDER_WIDTH,Xi.MIN_SIZE=od.DOUBLE_BORDER,Xi.TAIL_THICKNESS=1,Xi.TAIL_ANGLE=20,Xi.TAIL_BEND=4,Xi.ANCHOR_RADIUS=8;var Bm=class extends Xi{constructor(n,a,d,b){super(a,d,b),this.workspace=a,this.anchor=d,this.ownerRect=b,this.autoLayout=!0,a=new Lo(n),this.validateWorkspaceOptions(a),this.svgDialog=Z(Be.SVG,{x:Xi.BORDER_WIDTH,y:Xi.BORDER_WIDTH},this.contentContainer),n.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new Lo(n)),this.miniWorkspace.internalIsMutator=!0,n=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(n),a.languageTree&&(n.insertBefore(this.miniWorkspace.addFlyout(Be.G),this.miniWorkspace.getCanvas()),n=this.miniWorkspace.getFlyout(),n==null||n.init(this.miniWorkspace),n==null||n.show(a.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let R,G;(R=this.miniWorkspace.getFlyout())==null||(G=R.getWorkspace())==null||G.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(n){this.miniWorkspace.addChangeListener(n)}validateWorkspaceOptions(n){if(n.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(n.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(n.zoomOptions.controls||n.zoomOptions.wheel||n.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(n.moveOptions.scrollbars||n.moveOptions.wheel||n.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(n.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const n of this.miniWorkspace.getTopBlocks(!1)){const a=n.getRelativeToSurfaceXY();if(20>a.y&&n.moveBy(0,20-a.y),n.RTL){let d=-20;const b=this.miniWorkspace.getFlyout();b&&(d-=b.getWidth()),a.x>d&&n.moveBy(d-a.x,0)}else 20>a.x&&n.moveBy(20-a.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var n=this.getSize(),a=this.calculateWorkspaceSize();Math.abs(n.width-a.width)<Bm.MINIMUM_VIEW_CHANGE&&Math.abs(n.height-a.height)<Bm.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${a.width}px`),this.svgDialog.setAttribute("height",`${a.height}px`),this.miniWorkspace.setCachedParentSvgSize(a.width,a.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${a.width}, 0)`),this.setSize(new Es(a.width+Xi.DOUBLE_BORDER,a.height+Xi.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var n=this.miniWorkspace.getCanvas().getBBox();let a=n.width+Bm.MARGIN;n=n.height+Bm.MARGIN;const d=this.miniWorkspace.getFlyout();if(d){const b=d.getWorkspace().getMetricsManager().getScrollMetrics();n=Math.max(n,b.height+20),a+=d.getWidth()}return new Es(a,n)}updateBlockStyles(){for(var n of this.miniWorkspace.getAllBlocks(!1))n.setStyle(n.getStyleName());let a;if(n=(a=this.miniWorkspace.getFlyout())==null?void 0:a.getWorkspace())for(const d of n.getAllBlocks(!1))d.setStyle(d.getStyleName())}moveDuringDrag(n){super.moveDuringDrag(n),this.autoLayout=!1}moveTo(n,a){super.moveTo(n,a),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(n){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};Bm.MINIMUM_VIEW_CHANGE=10,Bm.MARGIN=3*Xi.DOUBLE_BORDER;var $b,Sb;$b=17,Sb=16,t.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends Eb{constructor(n,a){super(a),this.flyoutBlockTypes=n,this.sourceBlock=a,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(n){this.svgRoot||(super.initView(n),Z(Be.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),Z(Be.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),Z(Be.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),ke(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let n;(n=this.miniWorkspaceBubble)==null||n.dispose()}getWeight(){return t.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new Es($b,$b)}applyColour(){super.applyColour();let n;(n=this.miniWorkspaceBubble)==null||n.setColour(this.sourceBlock.style.colourPrimary);let a;(a=this.miniWorkspaceBubble)==null||a.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(n){super.onLocationChange(n);let a;(a=this.miniWorkspaceBubble)==null||a.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(n){if(this.bubbleIsVisible()!==n){if(n){this.miniWorkspaceBubble=new Bm(this.getMiniWorkspaceConfig(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour(),this.createRootBlock(),this.addSaveConnectionsListener();let a;(a=this.miniWorkspaceBubble)==null||a.addWorkspaceChangeListener(this.createMiniWorkspaceChangeListener())}else{let a;(a=this.miniWorkspaceBubble)==null||a.dispose(),this.miniWorkspaceBubble=null,this.saveConnectionsListener&&this.sourceBlock.workspace.removeChangeListener(this.saveConnectionsListener),this.saveConnectionsListener=null}he(new(xe(Ks))(this.sourceBlock,n,"mutator"))}}getMiniWorkspaceConfig(){let n;const a={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(n=this.sourceBlock.workspace.options.rendererOverrides)!=null?n:void 0};return this.flyoutBlockTypes.length&&(a.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(d=>({kind:"block",type:d}))}),a}getAnchorLocation(){const n=$b/2;return tn.sum(this.workspaceLocation,new tn(n,n))}getBubbleOwnerRect(){const n=this.sourceBlock.getSvgRoot().getBBox();return new gi(n.y,n.y+n.height,n.x,n.x+n.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var n of this.rootBlock.getDescendants(!1))n.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let a,d,b,R;n=(R=(a=this.miniWorkspaceBubble)==null||(d=a.getWorkspace())==null||(b=d.getFlyout())==null?void 0:b.getWidth())!=null?R:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(n+Sb):Sb,Sb)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return n=>{t.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(n)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(n){return n.isUiEvent||n.type===t.CREATE$$module$build$src$core$events$utils||n.type===t.CHANGE$$module$build$src$core$events$utils&&n.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var n=t.getGroup$$module$build$src$core$events$utils();n||t.setGroup$$module$build$src$core$events$utils(!0);var a=oo.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var d=oo.getExtraBlockState_(this.sourceBlock);a!==d&&he(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"mutation",null,a,d)),t.setGroup$$module$build$src$core$events$utils(n)}}getWorkspace(){let n;return(n=this.miniWorkspaceBubble)==null?void 0:n.getWorkspace()}static reconnect(n,a,d){return be("MutatorIcon.reconnect","v10","v11","connection.reconnect"),n?n.reconnect(a,d):!1}static findParentWs(n){return be("MutatorIcon.findParentWs","v10","v11","workspace.getRootWorkspace"),n.getRootWorkspace()}},t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=so.MUTATOR,t.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,t.MutatorIcon$$module$build$src$core$icons$mutator_icon;var d0=Object.create(null),mR={allExtensions:d0};t.register$$module$build$src$core$extensions("parent_tooltip_when_inline",pa);var bp={TEST_ONLY:mR};bp.apply=Si,bp.buildTooltipForDropdown=t.buildTooltipForDropdown$$module$build$src$core$extensions,bp.buildTooltipWithFieldText=t.buildTooltipWithFieldText$$module$build$src$core$extensions,bp.isRegistered=fi,bp.register=t.register$$module$build$src$core$extensions,bp.registerMixin=t.registerMixin$$module$build$src$core$extensions,bp.registerMutator=t.registerMutator$$module$build$src$core$extensions,bp.runAfterPageLoad=kd,bp.unregister=Yr;var kr;(function(n){n[n.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",n[n.MAC_ENTER=3]="MAC_ENTER",n[n.BACKSPACE=8]="BACKSPACE",n[n.TAB=9]="TAB",n[n.NUM_CENTER=12]="NUM_CENTER",n[n.ENTER=13]="ENTER",n[n.SHIFT=16]="SHIFT",n[n.CTRL=17]="CTRL",n[n.ALT=18]="ALT",n[n.PAUSE=19]="PAUSE",n[n.CAPS_LOCK=20]="CAPS_LOCK",n[n.ESC=27]="ESC",n[n.SPACE=32]="SPACE",n[n.PAGE_UP=33]="PAGE_UP",n[n.PAGE_DOWN=34]="PAGE_DOWN",n[n.END=35]="END",n[n.HOME=36]="HOME",n[n.LEFT=37]="LEFT",n[n.UP=38]="UP",n[n.RIGHT=39]="RIGHT",n[n.DOWN=40]="DOWN",n[n.PLUS_SIGN=43]="PLUS_SIGN",n[n.PRINT_SCREEN=44]="PRINT_SCREEN",n[n.INSERT=45]="INSERT",n[n.DELETE=46]="DELETE",n[n.ZERO=48]="ZERO",n[n.ONE=49]="ONE",n[n.TWO=50]="TWO",n[n.THREE=51]="THREE",n[n.FOUR=52]="FOUR",n[n.FIVE=53]="FIVE",n[n.SIX=54]="SIX",n[n.SEVEN=55]="SEVEN",n[n.EIGHT=56]="EIGHT",n[n.NINE=57]="NINE",n[n.FF_SEMICOLON=59]="FF_SEMICOLON",n[n.FF_EQUALS=61]="FF_EQUALS",n[n.FF_DASH=173]="FF_DASH",n[n.FF_HASH=163]="FF_HASH",n[n.QUESTION_MARK=63]="QUESTION_MARK",n[n.AT_SIGN=64]="AT_SIGN",n[n.A=65]="A",n[n.B=66]="B",n[n.C=67]="C",n[n.D=68]="D",n[n.E=69]="E",n[n.F=70]="F",n[n.G=71]="G",n[n.H=72]="H",n[n.I=73]="I",n[n.J=74]="J",n[n.K=75]="K",n[n.L=76]="L",n[n.M=77]="M",n[n.N=78]="N",n[n.O=79]="O",n[n.P=80]="P",n[n.Q=81]="Q",n[n.R=82]="R",n[n.S=83]="S",n[n.T=84]="T",n[n.U=85]="U",n[n.V=86]="V",n[n.W=87]="W",n[n.X=88]="X",n[n.Y=89]="Y",n[n.Z=90]="Z",n[n.META=91]="META",n[n.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",n[n.CONTEXT_MENU=93]="CONTEXT_MENU",n[n.NUM_ZERO=96]="NUM_ZERO",n[n.NUM_ONE=97]="NUM_ONE",n[n.NUM_TWO=98]="NUM_TWO",n[n.NUM_THREE=99]="NUM_THREE",n[n.NUM_FOUR=100]="NUM_FOUR",n[n.NUM_FIVE=101]="NUM_FIVE",n[n.NUM_SIX=102]="NUM_SIX",n[n.NUM_SEVEN=103]="NUM_SEVEN",n[n.NUM_EIGHT=104]="NUM_EIGHT",n[n.NUM_NINE=105]="NUM_NINE",n[n.NUM_MULTIPLY=106]="NUM_MULTIPLY",n[n.NUM_PLUS=107]="NUM_PLUS",n[n.NUM_MINUS=109]="NUM_MINUS",n[n.NUM_PERIOD=110]="NUM_PERIOD",n[n.NUM_DIVISION=111]="NUM_DIVISION",n[n.F1=112]="F1",n[n.F2=113]="F2",n[n.F3=114]="F3",n[n.F4=115]="F4",n[n.F5=116]="F5",n[n.F6=117]="F6",n[n.F7=118]="F7",n[n.F8=119]="F8",n[n.F9=120]="F9",n[n.F10=121]="F10",n[n.F11=122]="F11",n[n.F12=123]="F12",n[n.NUMLOCK=144]="NUMLOCK",n[n.SCROLL_LOCK=145]="SCROLL_LOCK",n[n.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",n[n.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",n[n.SEMICOLON=186]="SEMICOLON",n[n.DASH=189]="DASH",n[n.EQUALS=187]="EQUALS",n[n.COMMA=188]="COMMA",n[n.PERIOD=190]="PERIOD",n[n.SLASH=191]="SLASH",n[n.APOSTROPHE=192]="APOSTROPHE",n[n.TILDE=192]="TILDE",n[n.SINGLE_QUOTE=222]="SINGLE_QUOTE",n[n.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",n[n.BACKSLASH=220]="BACKSLASH",n[n.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",n[n.WIN_KEY=224]="WIN_KEY",n[n.MAC_FF_META=224]="MAC_FF_META",n[n.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",n[n.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",n[n.WIN_IME=229]="WIN_IME",n[n.VK_NONAME=252]="VK_NONAME",n[n.PHANTOM=255]="PHANTOM"})(kr||(kr={}));var tf={};tf.arc=Pr,tf.curve=os,tf.line=vl,tf.lineOnAxis=cn,tf.lineTo=_l,tf.moveBy=ti,tf.moveTo=_s,tf.point=Cn;var ta={};ta.Coordinate=tn,ta.KeyCodes=kr,ta.Rect=gi,ta.Size=Es,ta.Svg=Be,ta.aria=Ou,ta.array=r_,ta.browserEvents=nd,ta.colour=yp,ta.deprecation=t0,ta.dom=Ta,ta.extensions=bp,ta.idGenerator=ec,ta.math=Rm,ta.object=Rw,ta.parsing=kv,ta.string=vn,ta.style=id,ta.svgMath=Nf,ta.svgPaths=tf,ta.toolbox=Kl,ta.userAgent=vm,ta.xml=Vp;var wb={};wb.register=qi,wb.unregister=Up;var p0=class extends Xi{constructor(n,a,d,b){super(a,d,b),this.text=n,this.workspace=a,this.anchor=d,this.ownerRect=b,this.paragraph=this.stringToSvg(n,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(n){this.text=n,ut(this.paragraph),this.paragraph=this.stringToSvg(n,this.contentContainer),this.updateBubbleSize()}stringToSvg(n,a){return a=this.createParagraph(a),n=this.createSpans(a,n),this.workspace.RTL&&this.rightAlignSpans(a.getBBox().width,n),a}createParagraph(n){return Z(Be.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:Xi.BORDER_WIDTH},n)}createSpans(n,a){return a.split(`
`).map(d=>{const b=Z(Be.TSPAN,{dy:"1em",x:Xi.BORDER_WIDTH},n);return d=document.createTextNode(d),b.appendChild(d),b})}rightAlignSpans(n,a){for(const d of a)d.setAttribute("text-anchor","end"),d.setAttribute("x",`${n+Xi.BORDER_WIDTH}`)}updateBubbleSize(){const n=this.paragraph.getBBox();this.setSize(new Es(n.width+2*Xi.BORDER_WIDTH,n.height+2*Xi.BORDER_WIDTH),!0)}},ad=class extends Xi{constructor(n,a,d){super(n,a,d),this.workspace=n,this.anchor=a,this.ownerRect=d,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new Es(160+Xi.DOUBLE_BORDER,80+Xi.DOUBLE_BORDER),this.MIN_SIZE=new Es(45+Xi.DOUBLE_BORDER,20+Xi.DOUBLE_BORDER),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(n){this.text=n,this.textArea.value=n,this.onTextChange()}addTextChangeListener(n){this.textChangeListeners.push(n)}addSizeChangeListener(n){this.sizeChangeListeners.push(n)}createEditor(n){n=Z(Be.FOREIGNOBJECT,{x:Xi.BORDER_WIDTH,y:Xi.BORDER_WIDTH},n);const a=document.createElementNS(Cc,"body");a.setAttribute("xmlns",Cc),a.className="blocklyMinimalBody";const d=document.createElementNS(Cc,"textarea");return d.className="blocklyCommentTextarea",d.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),a.appendChild(d),n.appendChild(a),this.bindTextAreaEvents(d),setTimeout(()=>{d.focus()},0),{inputRoot:n,textArea:d}}bindTextAreaEvents(n){we(n,"wheel",this,a=>{a.stopPropagation()}),we(n,"focus",this,this.onStartEdit,!0),we(n,"change",this,this.onTextChange)}createResizeHandle(n){n=Z(Be.G,{class:this.workspace.RTL?"blocklyResizeSW":"blocklyResizeSE"},n);const a=2*Xi.BORDER_WIDTH;return Z(Be.POLYGON,{points:`0,${a} ${a},${a} ${a},0`},n),Z(Be.LINE,{class:"blocklyResizeLine",x1:a/3,y1:a-1,x2:a-1,y2:a/3},n),Z(Be.LINE,{class:"blocklyResizeLine",x1:2*a/3,y1:a-1,x2:a-1,y2:2*a/3},n),we(n,"pointerdown",this,this.onResizePointerDown),n}setSize(n,a=!1){n.width=Math.max(n.width,this.MIN_SIZE.width),n.height=Math.max(n.height,this.MIN_SIZE.height);const d=n.width-Xi.DOUBLE_BORDER,b=n.height-Xi.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${d}`),this.inputRoot.setAttribute("height",`${b}`),this.textArea.style.width=`${d-4}px`,this.textArea.style.height=`${b-4}px`,this.workspace.RTL?this.resizeGroup.setAttribute("transform",`translate(${Xi.DOUBLE_BORDER}, ${b}) scale(-1 1)`):this.resizeGroup.setAttribute("transform",`translate(${d}, ${b})`),super.setSize(n,a),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(n){this.bringToFront(),Mt(n)||(this.workspace.startDrag(n,new tn(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=we(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=we(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),n.stopPropagation()}onResizePointerUp(n){et(),this.resizePointerUpListener&&(it(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(it(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(n){n=this.workspace.moveDrag(n),this.setSize(new Es(this.workspace.RTL?-n.x:n.x,n.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const n of this.textChangeListeners)n()}onSizeChange(){for(const n of this.sizeChangeListeners)n()}};wt(`
.blocklyCommentTextarea {
  background-color: #fef49c;
  border: 0;
  display: block;
  margin: 0;
  outline: 0;
  padding: 3px;
  resize: none;
  text-overflow: hidden;
}
`);var xg=17,Ow=160,Lw=80,Mh=class extends Eb{constructor(n){super(n),this.sourceBlock=n,this.textBubble=this.textInputBubble=null,this.text="",this.bubbleSize=new Es(Ow,Lw),this.bubbleVisiblity=!1}getType(){return Mh.TYPE}initView(n){this.svgRoot||(super.initView(n),Z(Be.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),Z(Be.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),Z(Be.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),ke(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let n;(n=this.textInputBubble)==null||n.dispose();let a;(a=this.textBubble)==null||a.dispose()}getWeight(){return Mh.WEIGHT}getSize(){return new Es(xg,xg)}applyColour(){super.applyColour();const n=this.sourceBlock.style.colourPrimary;let a;(a=this.textInputBubble)==null||a.setColour(n);let d;(d=this.textBubble)==null||d.setColour(n)}updateEditable(){super.updateEditable(),this.bubbleIsVisible()&&(this.setBubbleVisible(!1),this.setBubbleVisible(!0))}onLocationChange(n){super.onLocationChange(n),n=this.getAnchorLocation();let a;(a=this.textInputBubble)==null||a.setAnchorLocation(n);let d;(d=this.textBubble)==null||d.setAnchorLocation(n)}setText(n){const a=this.text;he(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,a,n)),this.text=n;let d;(d=this.textInputBubble)==null||d.setText(this.text);let b;(b=this.textBubble)==null||b.setText(this.text)}getText(){return this.text}setBubbleSize(n){this.bubbleSize=n;let a;(a=this.textInputBubble)==null||a.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(n){let a;this.text=(a=n.text)!=null?a:"";let d,b;this.bubbleSize=new Es((d=n.width)!=null?d:Ow,(b=n.height)!=null?b:Lw);let R;this.bubbleVisiblity=(R=n.pinned)!=null?R:!1,setTimeout(()=>this.setBubbleVisible(this.bubbleVisiblity),1)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var n=this.textInputBubble.getText();this.text!==n&&(he(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,this.text,n)),this.text=n)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(n){(!n||!this.textBubble&&!this.textInputBubble)&&(n||this.textBubble||this.textInputBubble)&&(this.bubbleVisiblity=n,this.sourceBlock.rendered&&!this.sourceBlock.isInFlyout&&(n?(this.sourceBlock.isEditable()?this.showEditableBubble():this.showNonEditableBubble(),this.applyColour()):this.hideBubble(),he(new(xe(Ks))(this.sourceBlock,n,"comment"))))}showEditableBubble(){this.textInputBubble=new ad(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.textInputBubble.addTextChangeListener(()=>this.onTextChange()),this.textInputBubble.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.textBubble=new p0(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect())}hideBubble(){let n;(n=this.textInputBubble)==null||n.dispose(),this.textInputBubble=null;let a;(a=this.textBubble)==null||a.dispose(),this.textBubble=null}getAnchorLocation(){const n=xg/2;return tn.sum(this.workspaceLocation,new tn(n,n))}getBubbleOwnerRect(){const n=this.sourceBlock.getSvgRoot().getBBox();return new gi(n.y,n.y+n.height,n.x,n.x+n.width)}};Mh.TYPE=so.COMMENT,Mh.WEIGHT=3,qi(Mh.TYPE,Mh);var uE=17,nf=class extends Eb{constructor(n){super(n),this.sourceBlock=n,this.textMap=new Map,this.textBubble=null}getType(){return nf.TYPE}initView(n){this.svgRoot||(super.initView(n),Z(Be.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),Z(Be.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),Z(Be.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),ke(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let n;(n=this.textBubble)==null||n.dispose()}getWeight(){return nf.WEIGHT}getSize(){return new Es(uE,uE)}applyColour(){super.applyColour();let n;(n=this.textBubble)==null||n.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(n){super.onLocationChange(n);let a;(a=this.textBubble)==null||a.setAnchorLocation(this.getAnchorLocation())}addMessage(n,a){if(this.textMap.get(a)===n)return this;n?this.textMap.set(a,n):this.textMap.delete(a);let d;return(d=this.textBubble)==null||d.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(n){if(this.bubbleIsVisible()!==n){if(n)this.textBubble=new p0(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour();else{let a;(a=this.textBubble)==null||a.dispose(),this.textBubble=null}he(new(xe(Ks))(this.sourceBlock,n,"warning"))}}getAnchorLocation(){const n=uE/2;return tn.sum(this.workspaceLocation,new tn(n,n))}getBubbleOwnerRect(){const n=this.sourceBlock.getSvgRoot().getBBox();return new gi(n.y,n.y+n.height,n.x,n.x+n.width)}};nf.TYPE=so.WARNING,nf.WEIGHT=2;var cE=class extends Error{constructor(n){super(`Tried to append an icon of type ${n.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=n}},Wf={};Wf.DuplicateIconType=cE;var $r={};$r.CommentIcon=Mh,$r.Icon=Eb,$r.IconType=so,$r.MutatorIcon=t.MutatorIcon$$module$build$src$core$icons$mutator_icon,$r.WarningIcon=nf,$r.exceptions=Wf,$r.registry=wb;var Lv,Eo;Lv="PROCEDURE",t.DEFAULT_ARG$$module$build$src$core$procedures="x",Eo={CATEGORY_NAME:Lv,DEFAULT_ARG:t.DEFAULT_ARG$$module$build$src$core$procedures},Eo.ObservableProcedureMap=Tb,Eo.allProcedures=Gc,Eo.findLegalName=t.findLegalName$$module$build$src$core$procedures,Eo.flyoutCategory=rn,Eo.getCallers=yu,Eo.getDefinition=t.getDefinition$$module$build$src$core$procedures,Eo.isNameUsed=dn,Eo.isProcedureBlock=Qo,Eo.mutateCallers=t.mutateCallers$$module$build$src$core$procedures,Eo.mutatorOpenListener=Yu,Eo.rename=t.rename$$module$build$src$core$procedures;var Nw=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(n){return Object.prototype.hasOwnProperty.call(this,n)||(this[n]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[n]}isField(n){return n.type&this.FIELD}isHat(n){return n.type&this.HAT}isIcon(n){return n.type&this.ICON}isSpacer(n){return n.type&this.SPACER}isInRowSpacer(n){return n.type&this.IN_ROW_SPACER}isInput(n){return n.type&this.INPUT}isExternalInput(n){return n.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(n){return n.type&this.INLINE_INPUT}isStatementInput(n){return n.type&this.STATEMENT_INPUT}isPreviousConnection(n){return n.type&this.PREVIOUS_CONNECTION}isNextConnection(n){return n.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(n){return n.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(n){return n.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(n){return n.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(n){return n.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(n){return n.type&this.RIGHT_SQUARE_CORNER}isCorner(n){return n.type&this.CORNER}isJaggedEdge(n){return n.type&this.JAGGED_EDGE}isRow(n){return n.type&this.ROW}isBetweenRowSpacer(n){return n.type&this.BETWEEN_ROW_SPACER}isTopRow(n){return n.type&this.TOP_ROW}isBottomRow(n){return n.type&this.BOTTOM_ROW}isTopOrBottomRow(n){return n.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(n){return n.type&this.INPUT_ROW}},Je=new Nw,Jr=class{constructor(n){this.centerline=this.xPos=this.height=this.width=0,this.constants_=n,this.type=Je.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},Nv=class{constructor(n){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=n,this.type=Je.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let n=this.elements.length-1;0<=n;n--){const a=this.elements[n];if(Je.isInput(a))return a}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let n=0;n<this.elements.length;n++){const a=this.elements[n];if(Je.isSpacer(a))return a}return null}getLastSpacer(){for(let n=this.elements.length-1;0<=n;n--){const a=this.elements[n];if(Je.isSpacer(a))return a}return null}},xb=class extends Nv{constructor(n){super(n),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=Je.BOTTOM_ROW}hasLeftSquareCorner(n){return!!n.outputConnection||!!n.getNextBlock()}hasRightSquareCorner(n){return!0}measure(){let n=0,a=0,d=0;for(let b=0;b<this.elements.length;b++){const R=this.elements[b];a+=R.width,Je.isSpacer(R)||(Je.isNextConnection(R)?d=Math.max(d,R.height):n=Math.max(n,R.height))}this.width=Math.max(this.minWidth,a),this.height=Math.max(this.minHeight,n)+d,this.descenderHeight=d,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Tp=class extends Jr{constructor(n,a){super(n),this.connectionModel=a,this.type|=Je.CONNECTION,this.shape=this.constants_.shapeFor(a),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=a.isHighlighted()}},Cg=class extends Tp{constructor(n,a){super(n,a.connection),this.input=a,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=Je.INPUT,this.align=a.align,(this.connectedBlock=a.connection&&a.connection.targetBlock()?a.connection.targetBlock():null)?(n=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=n.width,this.connectedBlockHeight=n.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},Cb=class extends Cg{constructor(n,a){super(n,a),this.height=0,this.type|=Je.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},f0=class extends Jr{constructor(n,a,d){super(n),this.field=a,this.parentInput=d,this.isEditable=a.EDITABLE,this.flipRtl=a.getFlipRtl(),this.type|=Je.FIELD,n=this.field.getSize(),this.height=n.height,this.width=n.width}},hE=class extends Jr{constructor(n){super(n),this.type|=Je.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},Dw=class extends Jr{constructor(n,a){super(n),this.icon=a,this.flipRtl=!1,this.isVisible=gl(a)&&a.bubbleIsVisible(),this.type|=Je.ICON,n=a.getSize(),this.height=n.height,this.width=n.width}},zd=class extends Jr{constructor(n,a){super(n),this.type=this.type|Je.SPACER|Je.IN_ROW_SPACER,this.width=a,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},dE=class extends Cg{constructor(n,a){super(n,a),this.type|=Je.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},Dv=class extends Cg{constructor(n,a){super(n,a),this.type|=Je.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},pE=class extends Nv{constructor(n){super(n),this.connectedBlockWidths=0,this.type|=Je.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let n=0;for(let a=0;a<this.elements.length;a++){const d=this.elements[a];this.width+=d.width,Je.isInput(d)&&d instanceof Cg&&(Je.isStatementInput(d)&&d instanceof Dv?n+=d.connectedBlockWidth:Je.isExternalInput(d)&&d instanceof Cb&&d.connectedBlockWidth!==0&&(n+=d.connectedBlockWidth-d.connectionWidth)),Je.isSpacer(d)||(this.height=Math.max(this.height,d.height))}this.connectedBlockWidths=n,this.widthWithConnectedBlocks=this.width+n}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},Bw=class extends Jr{constructor(n){super(n),this.type|=Je.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},Pw=class extends Tp{constructor(n,a){super(n,a),this.type|=Je.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Fw=class extends Tp{constructor(n,a){super(n,a),this.connectionOffsetX=0,this.type|=Je.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},Uw=class extends Tp{constructor(n,a){super(n,a),this.type|=Je.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},f_=class extends Jr{constructor(n,a){super(n),this.type=(a&&a!=="left"?Je.RIGHT_ROUND_CORNER:Je.LEFT_ROUND_CORNER)|Je.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},fE=class extends Nv{constructor(n,a,d){super(n),this.height=a,this.width=d,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|Je.SPACER|Je.BETWEEN_ROW_SPACER,this.elements=[new zd(this.constants_,d)]}measure(){}},m_=class extends Jr{constructor(n,a){super(n),this.type=(a&&a!=="left"?Je.RIGHT_SQUARE_CORNER:Je.LEFT_SQUARE_CORNER)|Je.CORNER,this.width=this.height=this.constants_.NO_PADDING}},mE=class extends Nv{constructor(n){super(n),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=Je.TOP_ROW}hasLeftSquareCorner(n){const a=(n.hat?n.hat==="cap":this.constants_.ADD_START_HATS)&&!n.outputConnection&&!n.previousConnection,d=n.getPreviousBlock();return!!n.outputConnection||a||(d?d.getNextBlock()===n:!1)}hasRightSquareCorner(n){return!0}measure(){let n=0,a=0,d=0;for(let b=0;b<this.elements.length;b++){const R=this.elements[b];a+=R.width,Je.isSpacer(R)||(Je.isHat(R)&&R instanceof hE?d=Math.max(d,R.ascenderHeight):n=Math.max(n,R.height))}this.width=Math.max(this.minWidth,a),this.height=Math.max(this.minHeight,n)+d,this.capline=this.ascenderHeight=d,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Bv=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=ti(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(n){this.blockStyles=Object.create(null);const a=n.blockStyles;for(const d in a)this.blockStyles[d]=this.validatedBlockStyle_(a[d]);this.setDynamicProperties_(n)}setDynamicProperties_(n){this.setFontConstants_(n),this.setComponentConstants_(n),this.ADD_START_HATS=n.startHats!==void 0?n.startHats:this.ADD_START_HATS}setFontConstants_(n){n.fontStyle&&n.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=n.fontStyle.family),n.fontStyle&&n.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=n.fontStyle.weight),n.fontStyle&&n.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=n.fontStyle.size),n=Pe("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=n.height,this.FIELD_TEXT_BASELINE=n.baseline}setComponentConstants_(n){this.CURSOR_COLOUR=n.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=n.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=n.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(n.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(n){const a="auto_"+n;return this.blockStyles[a]||(this.blockStyles[a]=this.createBlockStyle_(n)),{style:this.blockStyles[a],name:a}}getBlockStyle(n){return this.blockStyles[n||""]||(n&&n.indexOf("auto_")===0?this.getBlockStyleForColour(n.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(n){return this.validatedBlockStyle_({colourPrimary:n})}validatedBlockStyle_(n){const a={};return n&&Object.assign(a,n),n=Qi(a.colourPrimary||"#000"),a.colourPrimary=n.hex,a.colourSecondary=a.colourSecondary?Qi(a.colourSecondary).hex:this.generateSecondaryColour_(a.colourPrimary),a.colourTertiary=a.colourTertiary?Qi(a.colourTertiary).hex:this.generateTertiaryColour_(a.colourPrimary),a.hat=a.hat||"",a}generateSecondaryColour_(n){return bc("#fff",n,.6)||n}generateTertiaryColour_(n){return bc("#fff",n,.3)||n}dispose(){this.embossFilter&&ut(this.embossFilter),this.disabledPattern&&ut(this.disabledPattern),this.debugFilter&&ut(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const n=this.JAGGED_TEETH_HEIGHT,a=this.JAGGED_TEETH_WIDTH,d=vl([Cn(a,n/4),Cn(2*-a,n/2),Cn(a,n/4)]);return{height:n,width:a,path:d}}makeStartHat(){const n=this.START_HAT_HEIGHT,a=this.START_HAT_WIDTH,d=os("c",[Cn(30,-n),Cn(70,-n),Cn(a,0)]);return{height:n,width:a,path:d}}makePuzzleTab(){function n(G){G=G?-1:1;const ce=-G;var Oe=d/2;const Nt=Oe+2.5,$n=Oe+.5,No=Cn(-a,G*Oe);return Oe=Cn(a,G*Oe),os("c",[Cn(0,G*Nt),Cn(-a,ce*$n),No])+os("s",[Cn(a,2.5*ce),Oe])}const a=this.TAB_WIDTH,d=this.TAB_HEIGHT,b=n(!0),R=n(!1);return{type:this.SHAPES.PUZZLE,width:a,height:d,pathDown:R,pathUp:b}}makeNotch(){function n(ce){return vl([Cn(ce*b,d),Cn(3*ce,0),Cn(ce*b,-d)])}const a=this.NOTCH_WIDTH,d=this.NOTCH_HEIGHT,b=(a-3)/2,R=n(1),G=n(-1);return{type:this.SHAPES.NOTCH,width:a,height:d,pathLeft:R,pathRight:G}}makeInsideCorners(){const n=this.CORNER_RADIUS,a=Pr("a","0 0,0",n,Cn(-n,n)),d=Pr("a","0 0,0",n,Cn(n,n));return{width:n,height:n,pathTop:a,pathBottom:d}}makeOutsideCorners(){const n=this.CORNER_RADIUS,a=ti(0,n)+Pr("a","0 0,1",n,Cn(n,-n)),d=Pr("a","0 0,1",n,Cn(n,n)),b=Pr("a","0 0,1",n,Cn(-n,-n)),R=Pr("a","0 0,1",n,Cn(-n,n));return{topLeft:a,topRight:d,bottomRight:R,bottomLeft:b,rightHeight:n}}shapeFor(n){switch(n.type){case En.INPUT_VALUE:case En.OUTPUT_VALUE:return this.PUZZLE_TAB;case En.PREVIOUS_STATEMENT:case En.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(n,a,d){this.injectCSS_(a,d),this.defs=Z(Be.DEFS,{},n),n=Z(Be.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),Z(Be.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),a=Z(Be.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),Z(Be.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},a),Z(Be.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),Z(Be.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter=n,n=Z(Be.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),Z(Be.RECT,{width:10,height:10,fill:"#aaa"},n),Z(Be.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern=n,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const n=Z(Be.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),a=Z(Be.FECOMPONENTTRANSFER,{result:"outBlur"},n);Z(Be.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),Z(Be.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},n),Z(Be.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.debugFilterId=n.id,this.debugFilter=n}}injectCSS_(n,a){a=this.getCSS_(a),n="blockly-renderer-style-"+n,this.cssNode=document.getElementById(n);const d=a.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=d:(a=document.createElement("style"),a.id=n,n=document.createTextNode(d),a.appendChild(n),document.head.insertBefore(a,document.head.firstChild),this.cssNode=a)}getCSS_(n){return[`${n} .blocklyText, `,`${n} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${n} .blocklyText {`,"fill: #fff;","}",`${n} .blocklyNonEditableText>rect,`,`${n} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${n} .blocklyNonEditableText>text,`,`${n} .blocklyEditableText>text {`,"fill: #000;","}",`${n} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${n} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${n} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${n} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${n} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${n} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${n} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${n} .blocklyReplaceable .blocklyPathLight,`,`${n} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${n} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Pv=class{constructor(n,a){this.inlinePath_=this.outlinePath_="",this.block_=n,this.info_=a,this.topLeft_=n.getRelativeToSurfaceXY(),this.constants_=a.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}hideHiddenIcons_(){be("hideHiddenIcons_","v10","v11")}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}drawOutline_(){this.drawTop_();for(let n=1;n<this.info_.rows.length-1;n++){const a=this.info_.rows[n];a.hasJaggedEdge?this.drawJaggedEdge_(a):a.hasStatement?this.drawStatementInput_(a):a.hasExternalInput?this.drawValueInput_(a):this.drawRightSideRow_(a)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const n=this.info_.topRow,a=n.elements;this.positionPreviousConnection_(),this.outlinePath_+=ti(n.xPos,this.info_.startY);for(let d=0,b;b=a[d];d++)Je.isLeftRoundedCorner(b)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:Je.isRightRoundedCorner(b)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:Je.isPreviousConnection(b)&&b instanceof Tp?this.outlinePath_+=b.shape.pathLeft:Je.isHat(b)?this.outlinePath_+=this.constants_.START_HAT.path:Je.isSpacer(b)&&(this.outlinePath_+=cn("h",b.width));this.outlinePath_+=cn("v",n.height)}drawJaggedEdge_(n){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+cn("v",n.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(n){const a=n.getLastInput();this.positionExternalValueConnection_(n);const d=as(a.shape)?a.shape.pathDown(a.height):a.shape.pathDown;this.outlinePath_+=cn("H",a.xPos+a.width)+d+cn("v",n.height-a.connectionHeight)}drawStatementInput_(n){var a=n.getLastInput();if(a){var d=a.xPos+a.notchOffset+a.shape.width;a=a.shape.pathRight+cn("h",-(a.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var b=n.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=cn("H",d)+a+cn("v",b)+this.constants_.INSIDE_CORNERS.pathBottom+cn("H",n.xPos+n.width),this.positionStatementInputConnection_(n)}}drawRightSideRow_(n){this.outlinePath_+=cn("V",n.yPos+n.height)}drawBottom_(){const n=this.info_.bottomRow,a=n.elements;this.positionNextConnection_();let d=0,b="";for(let R=a.length-1,G;G=a[R];R--)Je.isNextConnection(G)&&G instanceof Tp?b+=G.shape.pathRight:Je.isLeftSquareCorner(G)?b+=cn("H",n.xPos):Je.isLeftRoundedCorner(G)?b+=this.constants_.OUTSIDE_CORNERS.bottomLeft:Je.isRightRoundedCorner(G)?(b+=this.constants_.OUTSIDE_CORNERS.bottomRight,d=this.constants_.OUTSIDE_CORNERS.rightHeight):Je.isSpacer(G)&&(b+=cn("h",-1*G.width));this.outlinePath_+=cn("V",n.baseline-d),this.outlinePath_+=b}drawLeft_(){var n=this.info_.outputConnection;if(this.positionOutputConnection_(),n){const a=n.connectionOffsetY+n.height;n=as(n.shape)?n.shape.pathUp(n.height):n.shape.pathUp,this.outlinePath_+=cn("V",a)+n}this.outlinePath_+="z"}drawInternals_(){for(let n=0,a;a=this.info_.rows[n];n++)for(let d=0,b;b=a.elements[d];d++)Je.isInlineInput(b)?this.drawInlineInput_(b):(Je.isIcon(b)||Je.isField(b))&&this.layoutField_(b)}layoutField_(n){const a=n.centerline-n.height/2;let d=n.xPos;var b="";this.info_.RTL&&(d=-(d+n.width),n.flipRtl&&(d+=n.width,b="scale(-1 1)")),Je.isIcon(n)?(b=n.icon,b.setOffsetInBlock(new tn(d,a)),this.info_.isInsertionMarker&&b.hideForInsertionMarker()):(n=n.field.getSvgRoot(),n.setAttribute("transform","translate("+d+","+a+")"+b),this.info_.isInsertionMarker&&n.setAttribute("display","none"))}drawInlineInput_(n){const a=n.width,d=n.height,b=n.connectionOffsetY,R=n.connectionHeight+b;this.inlinePath_+=_s(n.xPos+n.connectionWidth,n.centerline-d/2)+cn("v",b)+n.shape.pathDown+cn("v",d-R)+cn("h",a-n.connectionWidth)+cn("v",-d)+"z",this.positionInlineInputConnection_(n)}positionInlineInputConnection_(n){const a=n.centerline-n.height/2;if(n.connectionModel){let d=n.xPos+n.connectionWidth+n.connectionOffsetX;this.info_.RTL&&(d*=-1),n.connectionModel.setOffsetInBlock(d,a+n.connectionOffsetY)}}positionStatementInputConnection_(n){const a=n.getLastInput();if(a!=null&&a.connectionModel){let d=n.xPos+n.statementEdge+a.notchOffset;this.info_.RTL&&(d*=-1),a.connectionModel.setOffsetInBlock(d,n.yPos)}}positionExternalValueConnection_(n){const a=n.getLastInput();if(a&&a.connectionModel){let d=n.xPos+n.width;this.info_.RTL&&(d*=-1),a.connectionModel.setOffsetInBlock(d,n.yPos)}}positionPreviousConnection_(){const n=this.info_.topRow;if(n.connection){const a=n.xPos+n.notchOffset;n.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-a:a,0)}}positionNextConnection_(){const n=this.info_.bottomRow;if(n.connection){const a=n.connection,d=a.xPos;a.connectionModel.setOffsetInBlock(this.info_.RTL?-d:d,n.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const n=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-n:n,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const n of this.info_.rows)for(const a of n.elements)if(a instanceof Tp)if(a.highlighted)this.drawConnectionHighlightPath(a);else{let d,b;(b=(d=this.block_.pathObject).removeConnectionHighlight)==null||b.call(d,a.connectionModel)}}drawConnectionHighlightPath(n){const a=n.connectionModel;n=a.type===En.INPUT_VALUE||a.type===En.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(n):this.getStatementConnectionHighlightPath(n);const d=a.getSourceBlock();let b,R;(R=(b=d.pathObject).addConnectionHighlight)==null||R.call(b,a,n,a.getOffsetInBlock(),d.RTL)}getExpressionConnectionHighlightPath(n){let a="";return as(n.shape)?a=n.shape.pathDown(n.height):fa(n.shape)&&(a=n.shape.pathDown),n=this.constants_.TAB_OFFSET_FROM_TOP,ti(0,-n)+cn("v",n)+a+cn("v",n)}getStatementConnectionHighlightPath(n){if(!Ui(n.shape))throw Error("Statement connections should have notch shapes");const a=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return ti(-a,0)+cn("h",a)+n.shape.pathLeft+cn("h",a)}};(function(n){n[n.LEFT=-1]="LEFT",n[n.CENTRE=0]="CENTRE",n[n.RIGHT=1]="RIGHT"})(t.Align$$module$build$src$core$inputs$align||(t.Align$$module$build$src$core$inputs$align={})),t.Align$$module$build$src$core$inputs$align;var na=class extends ii{constructor(n,a,d){super(ii.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,n!==ii.SKIP_SETUP&&(d?this.configure_(d):this.class=a||null,this.setValue(n))}configure_(n){super.configure_(n),n.class&&(this.class=n.class)}initView(){this.createTextElement_(),this.class&&ke(this.getTextElement(),this.class)}doClassValidation_(n){return n==null?null:`${n}`}setClass(n){this.textElement_&&(this.class&&mt(this.textElement_,this.class),n&&ke(this.textElement_,n)),this.class=n}static fromJson(n){return new this(Er(n.text),void 0,n)}};Hs("field_label",na),na.prototype.DEFAULT_VALUE="";var xa=class{constructor(n,a){this.name=n,this.sourceBlock=a,this.fieldRow=[],this.align=t.Align$$module$build$src$core$inputs$input.LEFT,this.visible=!0,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(n,a){return this.insertFieldAt(this.fieldRow.length,n,a),this}insertFieldAt(n,a,d){if(0>n||n>this.fieldRow.length)throw Error("index "+n+" out of bounds.");return(a||a===""&&d)&&(typeof a=="string"&&(a=t.fromJson$$module$build$src$core$field_registry({type:"field_label",text:a})),a.setSourceBlock(this.sourceBlock),this.sourceBlock.rendered&&(a.init(),a.applyColour()),a.name=d,a.setVisible(this.isVisible()),a.prefixField&&(n=this.insertFieldAt(n,a.prefixField)),this.fieldRow.splice(n,0,a),n++,a.suffixField&&(n=this.insertFieldAt(n,a.suffixField)),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours())),n}removeField(n,a){for(let d=0,b;b=this.fieldRow[d];d++)if(b.name===n)return b.dispose(),this.fieldRow.splice(d,1),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours()),!0;if(a)return!1;throw Error('Field "'+n+'" not found.')}isVisible(){return this.visible}setVisible(n){let a=[];if(this.visible===n)return a;this.visible=n;for(let b=0,R;R=this.fieldRow[b];b++)R.setVisible(n);if(this.connection){var d=this.connection;n?a=d.startTrackingAll():d.stopTrackingAll(),(d=d.targetBlock())&&(d.getSvgRoot().style.display=n?"block":"none")}return a}markDirty(){for(let n=0,a;a=this.fieldRow[n];n++)a.markDirty()}setCheck(n){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(n),this}setAlign(n){return this.align=n,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(n){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(n),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let n=0;n<this.fieldRow.length;n++)this.fieldRow[n].init()}dispose(){for(let n=0,a;a=this.fieldRow[n];n++)a.dispose();this.connection&&this.connection.dispose()}makeConnection(n){return this.sourceBlock.makeConnection_(n)}},zw;(function(n){n=n.Align||(n.Align={}),n[n.LEFT=-1]="LEFT",n[n.CENTRE=0]="CENTRE",n[n.RIGHT=1]="RIGHT"})(xa||(xa={})),t.Align$$module$build$src$core$inputs$input=xa.Align,zw={Align:t.Align$$module$build$src$core$inputs$input},zw.Input=xa;var Vf=class extends xa{constructor(n,a){super(n,a),this.name=n,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},Pm=class extends xa{constructor(n,a){super(n,a),this.name=n,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},ld=class extends xa{constructor(n,a){if(!n)throw Error("Statement inputs must have a non-empty name");super(n,a),this.name=n,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(En.NEXT_STATEMENT)}},Hw;t.ValueInput$$module$build$src$core$inputs$value_input=class extends xa{constructor(n,a){if(!n)throw Error("Value inputs must have a non-empty name");super(n,a),this.name=n,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(En.INPUT_VALUE)}},Hw={},Hw.ValueInput=t.ValueInput$$module$build$src$core$inputs$value_input;var m0=class{constructor(n,a){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=n,this.block_=a,this.constants_=this.renderer_.getConstants(),this.outputConnection=a.outputConnection?new Fw(this.constants_,a.outputConnection):null,this.isInline=a.getInputsInline()&&!a.isCollapsed(),this.isCollapsed=a.isCollapsed(),this.isInsertionMarker=a.isInsertionMarker(),this.RTL=a.RTL,this.topRow=new mE(this.constants_),this.bottomRow=new xb(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let n=new pE(this.constants_);this.inputRows.push(n);var a=this.block_.getIcons();for(let d=0,b;b=a[d];d++){const R=new Dw(this.constants_,b);this.isCollapsed&&!b.isShownWhenCollapsed()||n.elements.push(R)}a=void 0;for(let d=0,b;b=this.block_.inputList[d];d++)if(b.isVisible()){this.shouldStartNewRow_(b,a)&&(this.rows.push(n),n=new pE(this.constants_),this.inputRows.push(n));for(let R=0,G;G=b.fieldRow[R];R++)n.elements.push(new f0(this.constants_,G,b));this.addInput_(b,n),a=b}this.isCollapsed&&(n.hasJaggedEdge=!0,n.elements.push(new Bw(this.constants_))),(n.elements.length||n.hasDummyInput)&&this.rows.push(n),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var n=!!this.block_.previousConnection;const a=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!n;let d=this.topRow.hasLeftSquareCorner(this.block_)?m_:f_;this.topRow.elements.push(new d(this.constants_)),a?(n=new hE(this.constants_),this.topRow.elements.push(n),this.topRow.capline=n.ascenderHeight):n&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Uw(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof ld&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,d=this.topRow.hasRightSquareCorner(this.block_)?m_:f_,this.topRow.elements.push(new d(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof ld?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new m_(this.constants_)):this.bottomRow.elements.push(new f_(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new Pw(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new m_(this.constants_,"right")):this.bottomRow.elements.push(new f_(this.constants_,"right"))}addInput_(n,a){this.isInline&&n instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new dE(this.constants_,n)),a.hasInlineInput=!0):n instanceof ld?(a.elements.push(new Dv(this.constants_,n)),a.hasStatement=!0):n instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new Cb(this.constants_,n)),a.hasExternalInput=!0):(n instanceof Vf||n instanceof Pm)&&(a.minHeight=Math.max(a.minHeight,n.getSourceBlock()&&n.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),a.hasDummyInput=!0),a.align===null&&(a.align=n.align)}shouldStartNewRow_(n,a){return a?a instanceof Pm||n instanceof ld||a instanceof ld?!0:n instanceof t.ValueInput$$module$build$src$core$inputs$value_input||n instanceof Vf||a instanceof t.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let n=0,a;a=this.rows[n];n++){const d=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new zd(this.constants_,this.getInRowSpacing_(null,d[0]))),d.length){for(let b=0;b<d.length-1;b++){a.elements.push(d[b]);const R=this.getInRowSpacing_(d[b],d[b+1]);a.elements.push(new zd(this.constants_,R))}a.elements.push(d[d.length-1]),a.endsWithElemSpacer()&&a.elements.push(new zd(this.constants_,this.getInRowSpacing_(d[d.length-1],null)))}}}getInRowSpacing_(n,a){if(!n&&a&&Je.isStatementInput(a))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(n&&Je.isInput(n)&&!a){if(Je.isExternalInput(n))return this.constants_.NO_PADDING;if(Je.isInlineInput(n))return this.constants_.LARGE_PADDING;if(Je.isStatementInput(n))return this.constants_.NO_PADDING}return n&&Je.isLeftSquareCorner(n)&&a&&(Je.isPreviousConnection(a)||Je.isNextConnection(a))?a.notchOffset:n&&Je.isLeftRoundedCorner(n)&&a&&(Je.isPreviousConnection(a)||Je.isNextConnection(a))?a.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let n=0,a=0,d=0;for(let R=0,G;G=this.rows[R];R++){if(G.measure(),a=Math.max(a,G.width),G.hasStatement){var b=G.getLastInput();let ce,Oe;b=G.width-((Oe=(ce=b)==null?void 0:ce.width)!=null?Oe:0),n=Math.max(n,b)}d=Math.max(d,G.widthWithConnectedBlocks)}this.statementEdge=n,this.width=a;for(let R=0,G;G=this.rows[R];R++)G.hasStatement&&(G.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(a,d),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let a=0,d;d=this.rows[a];a++)if(d.hasStatement)this.alignStatementRow_(d);else{var n=d.width;n=this.getDesiredRowWidth_(d)-n,0<n&&this.addAlignmentPadding_(d,n),Je.isTopOrBottomRow(d)&&(d.widthWithConnectedBlocks=d.width)}}getDesiredRowWidth_(n){return this.width-this.startX}addAlignmentPadding_(n,a){const d=n.getFirstSpacer(),b=n.getLastSpacer();if((n.hasExternalInput||n.hasStatement)&&(n.widthWithConnectedBlocks+=a),n.align===t.Align$$module$build$src$core$inputs$align.LEFT&&b)b.width+=a;else if(n.align===t.Align$$module$build$src$core$inputs$align.CENTRE&&d&&b)d.width+=a/2,b.width+=a/2;else if(n.align===t.Align$$module$build$src$core$inputs$align.RIGHT&&d)d.width+=a;else if(b)b.width+=a;else return;n.width+=a}alignStatementRow_(n){const a=n.getLastInput();if(a){var d=n.width-a.width,b=this.statementEdge;d=b-d,0<d&&this.addAlignmentPadding_(n,d),d=n.width,b=this.getDesiredRowWidth_(n),a.width+=b-d,a.height=Math.max(a.height,n.height),n.width+=b-d,n.widthWithConnectedBlocks=Math.max(n.width,this.statementEdge+n.connectedBlockWidths)}}addRowSpacing_(){const n=this.rows;this.rows=[];for(let a=0;a<n.length;a++)this.rows.push(n[a]),a!==n.length-1&&this.rows.push(this.makeSpacerRow_(n[a],n[a+1]))}makeSpacerRow_(n,a){var d=this.getSpacerRowHeight_(n,a);const b=this.getSpacerRowWidth_(n,a);return d=new fE(this.constants_,d,b),n.hasStatement&&(d.followsStatement=!0),a.hasStatement&&(d.precedesStatement=!0),d}getSpacerRowWidth_(n,a){return this.width-this.startX}getSpacerRowHeight_(n,a){return this.constants_.MEDIUM_PADDING}getElemCenterline_(n,a){return Je.isSpacer(a)?n.yPos+a.height/2:Je.isBottomRow(n)?(n=n.yPos+n.height-n.descenderHeight,Je.isNextConnection(a)?n+a.height/2:n-a.height/2):Je.isTopRow(n)?Je.isHat(a)?n.capline-a.height/2:n.capline+a.height/2:n.yPos+n.height/2}recordElemPositions_(n){let a=n.xPos;for(let d=0,b;b=n.elements[d];d++)Je.isSpacer(b)&&(b.height=n.height),b.xPos=a,b.centerline=this.getElemCenterline_(n,b),a+=b.width}finalize_(){let n=0,a=0;for(let d=0,b;b=this.rows[d];d++)b.yPos=a,b.xPos=this.startX,a+=b.height,n=Math.max(n,b.widthWithConnectedBlocks),this.recordElemPositions_(b);if(this.outputConnection&&this.block_.nextConnection){const d=this.block_.nextConnection.targetBlock();d&&(n=Math.max(n,d.getHeightWidth().width))}this.widthWithChildren=n+this.startX,this.height=a,this.startY=this.topRow.capline,this.bottomRow.baseline=a-this.bottomRow.descenderHeight}getMeasureableForConnection(n){let a;if(((a=this.outputConnection)==null?void 0:a.connectionModel)===n)return this.outputConnection;for(const d of this.rows)for(const b of d.elements)if(b instanceof Tp&&b.connectionModel===n)return b;return null}},Vt=class{constructor(n,a,d){if(this.wsCoordinate=null,!a)throw Error("Cannot create a node without a location.");this.type=n,this.isConnectionLocation=Vt.isConnectionType(n),this.location=a,this.processParams(d||null)}processParams(n){n&&n.wsCoordinate&&(this.wsCoordinate=n.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var n=this.location.getParentInput();const a=n.getSourceBlock();for(n=a.inputList.indexOf(n),n+=1;n<a.inputList.length;n++){const d=a.inputList[n],b=d.fieldRow;for(let R=0;R<b.length;R++){const G=b[R];if(G.isClickable()||Vt.NAVIGATE_ALL_FIELDS)return Vt.createFieldNode(G)}if(d.connection)return Vt.createInputNode(d)}return null}findNextForField(){var n=this.location,a=n.getParentInput();const d=n.getSourceBlock();if(!d)throw Error("The current AST location is not associated with a block");var b=d.inputList.indexOf(a);for(n=a.fieldRow.indexOf(n)+1;b<d.inputList.length;b++){a=d.inputList[b];const R=a.fieldRow;for(;n<R.length;){if(R[n].isClickable()||Vt.NAVIGATE_ALL_FIELDS)return Vt.createFieldNode(R[n]);n++}if(n=0,a.connection)return Vt.createInputNode(a)}return null}findPrevForInput(){const n=this.location.getParentInput(),a=n.getSourceBlock();for(var d=a.inputList.indexOf(n);0<=d;d--){var b=a.inputList[d];if(b.connection&&b!==n)return Vt.createInputNode(b);b=b.fieldRow;for(let R=b.length-1;0<=R;R--){const G=b[R];if(G.isClickable()||Vt.NAVIGATE_ALL_FIELDS)return Vt.createFieldNode(G)}}return null}findPrevForField(){var n=this.location;const a=n.getParentInput(),d=n.getSourceBlock();if(!d)throw Error("The current AST location is not associated with a block");var b=d.inputList.indexOf(a);for(n=a.fieldRow.indexOf(n)-1;0<=b;b--){var R=d.inputList[b];if(R.connection&&R!==a)return Vt.createInputNode(R);for(R=R.fieldRow;-1<n;){if(R[n].isClickable()||Vt.NAVIGATE_ALL_FIELDS)return Vt.createFieldNode(R[n]);n--}0<=b-1&&(n=d.inputList[b-1].fieldRow.length-1)}return null}navigateBetweenStacks(n){var a=this.getLocation();if(a.getSourceBlock){var d=a.getSourceBlock();d&&(a=d)}if(!a||a.isDeadOrDying())return null;d=a.getRootBlock(),a=d.workspace.getTopBlocks(!0);for(let b=0;b<a.length;b++)if(d.id===a[b].id)return n=b+(n?1:-1),n===-1||n===a.length?null:Vt.createStackNode(a[n]);throw Error("Couldn't find "+(n?"next":"previous")+" stack?!")}findTopASTNodeForBlock(n){const a=ma(n);return a?Vt.createConnectionNode(a):Vt.createBlockNode(n)}getOutAstNodeForBlock(n){if(!n)return null;n=n.getTopStackBlock();const a=ma(n);return a&&a.targetConnection&&a.targetConnection.getParentInput()?Vt.createInputNode(a.targetConnection.getParentInput()):Vt.createStackNode(n)}findFirstFieldOrInput(n){n=n.inputList;for(let a=0;a<n.length;a++){const d=n[a],b=d.fieldRow;for(let R=0;R<b.length;R++){const G=b[R];if(G.isClickable()||Vt.NAVIGATE_ALL_FIELDS)return Vt.createFieldNode(G)}if(d.connection)return Vt.createInputNode(d)}return null}getSourceBlock(){return this.getType()===Vt.types.BLOCK?this.getLocation():this.getType()===Vt.types.STACK?this.getLocation():this.getType()===Vt.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case Vt.types.STACK:return this.navigateBetweenStacks(!0);case Vt.types.OUTPUT:return Vt.createBlockNode(this.location.getSourceBlock());case Vt.types.FIELD:return this.findNextForField();case Vt.types.INPUT:return this.findNextForInput();case Vt.types.BLOCK:const n=this.location.nextConnection;if(!n)break;return Vt.createConnectionNode(n);case Vt.types.PREVIOUS:return Vt.createBlockNode(this.location.getSourceBlock());case Vt.types.NEXT:return Vt.createConnectionNode(this.location.targetConnection)}return null}in(){switch(this.type){case Vt.types.WORKSPACE:const n=this.location.getTopBlocks(!0);if(0<n.length)return Vt.createStackNode(n[0]);break;case Vt.types.STACK:return this.findTopASTNodeForBlock(this.location);case Vt.types.BLOCK:return this.findFirstFieldOrInput(this.location);case Vt.types.INPUT:return Vt.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case Vt.types.STACK:return this.navigateBetweenStacks(!1);case Vt.types.FIELD:return this.findPrevForField();case Vt.types.INPUT:return this.findPrevForInput();case Vt.types.BLOCK:var n=ma(this.location);if(!n)break;return Vt.createConnectionNode(n);case Vt.types.PREVIOUS:if((n=this.location.targetConnection)&&!n.getParentInput())return Vt.createConnectionNode(n);break;case Vt.types.NEXT:return Vt.createBlockNode(this.location.getSourceBlock())}return null}out(){switch(this.type){case Vt.types.STACK:var n=this.location,a=n.getRelativeToSurfaceXY();return a=new tn(a.x,a.y+Vt.DEFAULT_OFFSET_Y),Vt.createWorkspaceNode(n.workspace,a);case Vt.types.OUTPUT:return n=this.location,(a=n.targetConnection)?Vt.createConnectionNode(a):Vt.createStackNode(n.getSourceBlock());case Vt.types.FIELD:if(n=this.location.getSourceBlock(),!n)throw Error("The current AST location is not associated with a block");return Vt.createBlockNode(n);case Vt.types.INPUT:return Vt.createBlockNode(this.location.getSourceBlock());case Vt.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case Vt.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case Vt.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(n){switch(n){case Vt.types.PREVIOUS:case Vt.types.NEXT:case Vt.types.INPUT:case Vt.types.OUTPUT:return!0}return!1}static createFieldNode(n){return n?new Vt(Vt.types.FIELD,n):null}static createConnectionNode(n){if(!n)return null;const a=n.type;return a===En.INPUT_VALUE||a===En.NEXT_STATEMENT&&n.getParentInput()?Vt.createInputNode(n.getParentInput()):a===En.NEXT_STATEMENT?new Vt(Vt.types.NEXT,n):a===En.OUTPUT_VALUE?new Vt(Vt.types.OUTPUT,n):a===En.PREVIOUS_STATEMENT?new Vt(Vt.types.PREVIOUS,n):null}static createInputNode(n){return n&&n.connection?new Vt(Vt.types.INPUT,n.connection):null}static createBlockNode(n){return n?new Vt(Vt.types.BLOCK,n):null}static createStackNode(n){return n?new Vt(Vt.types.STACK,n):null}static createWorkspaceNode(n,a){return a&&n?new Vt(Vt.types.WORKSPACE,n,{wsCoordinate:a}):null}static createTopNode(n){const a=ma(n);return a?Vt.createConnectionNode(a):Vt.createBlockNode(n)}};Vt.NAVIGATE_ALL_FIELDS=!1,Vt.DEFAULT_OFFSET_Y=-20,function(n){n=n.types||(n.types={}),n.FIELD="field",n.BLOCK="block",n.INPUT="input",n.OUTPUT="output",n.NEXT="next",n.PREVIOUS="previous",n.STACK="stack",n.WORKSPACE="workspace"}(Vt||(Vt={}));var Mb=class extends f{constructor(n,a,d,b){let R=n?n.workspace.id:void 0;b&&b.getType()===Vt.types.WORKSPACE&&(R=b.getLocation().id),super(R),this.type=Tl,this.blockId=n==null?void 0:n.id,this.oldNode=d||void 0,this.newNode=b,this.isCursor=a}toJson(){const n=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return n.isCursor=this.isCursor,n.blockId=this.blockId,n.oldNode=this.oldNode,n.newNode=this.newNode,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new Mb),a.isCursor=n.isCursor,a.blockId=n.blockId,a.oldNode=n.oldNode,a.newNode=n.newNode,a}};i(Lt.EVENT,Tl,Mb);var gR="blocklyCursor",_R="blocklyMarker",vR=.75,Ab=class{constructor(n,a,d){this.workspace=n,this.marker=d,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=a,n=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=d.colour||n}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const n=this.isCursor()?gR:_R;return this.svgGroup_=Z(Be.G,{class:n}),this.createDomInternal_(),this.svgGroup_}setParent_(n){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),n.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),n.setMarkerSvg(this.getSvgRoot())),this.parent=n}draw(n,a){if(a){this.constants_=this.workspace.getRenderer().getConstants();var d=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||d,this.applyColour_(a),this.showAtLocation_(a),this.fireMarkerEvent(n,a),n=this.currentMarkerSvg.childNodes[0],n!==void 0&&n.beginElement&&n.beginElement()}else this.hide()}showAtLocation_(n){const a=n.getLocation().type;n.getType()===Vt.types.BLOCK?this.showWithBlock_(n):n.getType()===Vt.types.OUTPUT?this.showWithOutput_(n):a===En.INPUT_VALUE?this.showWithInput_(n):a===En.NEXT_STATEMENT?this.showWithNext_(n):n.getType()===Vt.types.PREVIOUS?this.showWithPrevious_(n):n.getType()===Vt.types.FIELD?this.showWithField_(n):n.getType()===Vt.types.WORKSPACE?this.showWithCoordinates_(n):n.getType()===Vt.types.STACK&&this.showWithStack_(n)}showWithBlockPrevOutput(n){n=n.getSourceBlock();const a=n.width;var d=n.height,b=d*vR;const R=this.constants_.CURSOR_BLOCK_PADDING;n.previousConnection?(d=this.constants_.shapeFor(n.previousConnection),this.positionPrevious_(a,R,b,d)):n.outputConnection?(b=this.constants_.shapeFor(n.outputConnection),this.positionOutput_(a,d,b)):this.positionBlock_(a,R,b),this.setParent_(n),this.showCurrent_()}showWithBlock_(n){this.showWithBlockPrevOutput(n)}showWithPrevious_(n){this.showWithBlockPrevOutput(n)}showWithOutput_(n){this.showWithBlockPrevOutput(n)}showWithCoordinates_(n){var a=n.getWsCoordinate();n=a.x,a=a.y,this.workspace.RTL&&(n-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(n,a,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(n){n=n.getLocation();const a=n.getSize().width,d=n.getSize().height;this.positionRect_(0,0,a,d),this.setParent_(n),this.showCurrent_()}showWithInput_(n){n=n.getLocation();const a=n.getSourceBlock();this.positionInput_(n),this.setParent_(a),this.showCurrent_()}showWithNext_(n){var a=n.getLocation();n=a.getSourceBlock();let d=0;a=a.getOffsetInBlock().y;const b=n.getHeightWidth().width;this.workspace.RTL&&(d=-b),this.positionLine_(d,a,b),this.setParent_(n),this.showCurrent_()}showWithStack_(n){n=n.getLocation();var a=n.getHeightWidth();const d=a.width+this.constants_.CURSOR_STACK_PADDING;a=a.height+this.constants_.CURSOR_STACK_PADDING;const b=-this.constants_.CURSOR_STACK_PADDING/2,R=-this.constants_.CURSOR_STACK_PADDING/2;let G=b;this.workspace.RTL&&(G=-(d+b)),this.positionRect_(G,R,d,a),this.setParent_(n),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(n,a,d){if(n=ti(-a,d)+cn("V",-a)+cn("H",n+2*a)+cn("V",d),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",n),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(n){const a=n.getOffsetInBlock().x,d=n.getOffsetInBlock().y;n=_s(0,0)+this.constants_.shapeFor(n).pathDown,this.markerInput_.setAttribute("d",n),this.markerInput_.setAttribute("transform","translate("+a+","+d+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(n,a,d){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${n}`),this.markerSvgLine_.setAttribute("y",`${a}`),this.markerSvgLine_.setAttribute("width",`${d}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(n,a,d){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");n=ti(n,0)+cn("h",-(n-d.width))+cn("v",this.constants_.TAB_OFFSET_FROM_TOP)+d.pathDown+cn("V",a)+cn("H",n),this.markerBlock_.setAttribute("d",n),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(n,a,d,b){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");n=ti(-a,d)+cn("V",-a)+cn("H",this.constants_.NOTCH_OFFSET_LEFT)+b.pathLeft+cn("H",n+2*a)+cn("V",d),this.markerBlock_.setAttribute("d",n),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(n,a,d,b){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${n}`),this.markerSvgRect_.setAttribute("y",`${a}`),this.markerSvgRect_.setAttribute("width",`${d}`),this.markerSvgRect_.setAttribute("height",`${b}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(n){n.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(n,a){const d=a.getSourceBlock();n=new(xe(Tl))(d,this.isCursor(),n,a),he(n)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=Z(Be.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=Z(Be.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=Z(Be.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=Z(Be.PATH,{transform:""},this.markerSvg_),this.markerBlock_=Z(Be.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const n=this.getBlinkProperties_();Z(Be.ANIMATE,n,this.markerSvgLine_),Z(Be.ANIMATE,n,this.markerInput_),Z(Be.ANIMATE,Object.assign({},n,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(n){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(n=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",n),this.markerInput_.firstElementChild.setAttribute("values",n),this.markerBlock_.firstElementChild.setAttribute("values",n))}dispose(){this.svgGroup_&&ut(this.svgGroup_)}},Fv=class{constructor(n,a,d){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=d,this.style=a,this.svgRoot=n,this.svgPath=Z(Be.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(n){this.svgPath.setAttribute("d",n)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(n){n?(this.svgRoot.appendChild(n),this.cursorSvg=n):this.cursorSvg=null}setMarkerSvg(n){n?(this.cursorSvg?this.svgRoot.insertBefore(n,this.cursorSvg):this.svgRoot.appendChild(n),this.markerSvg=n):this.markerSvg=null}applyColour(n){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(n.isShadow()),this.updateDisabled_(!n.isEnabled()||n.getInheritedDisabled())}setStyle(n){this.style=n}setClass_(n,a){n&&(a?ke(this.svgRoot,n):mt(this.svgRoot,n))}updateHighlighted(n){n?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(n){n&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(n){this.setClass_("blocklyDisabled",n),n&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(n){this.setClass_("blocklySelected",n)}updateDraggingDelete(n){this.setClass_("blocklyDraggingDelete",n)}updateInsertionMarker(n){this.setClass_("blocklyInsertionMarker",n)}updateMovable(n){this.setClass_("blocklyDraggable",n)}updateReplacementFade(n){this.setClass_("blocklyReplaceable",n)}updateShapeForInputHighlight(n,a){}addConnectionHighlight(n,a,d,b){if(this.connectionHighlights.has(n)){if(this.currentHighlightMatchesNew(n,a,d))return;this.removeConnectionHighlight(n)}a=Z(Be.PATH,{class:"blocklyHighlightedConnectionPath",d:a,transform:`translate(${d.x}, ${d.y})`+(b?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(n,a)}currentHighlightMatchesNew(n,a,d){let b;const R=(b=this.connectionHighlights.get(n))==null?void 0:b.getAttribute("d");return n=this.highlightOffsets.get(n),R===a&&tn.equals(n,d)}removeConnectionHighlight(n){const a=this.connectionHighlights.get(n);a&&(ut(a),this.connectionHighlights.delete(n))}},ki=class{constructor(n,a){this.type=a,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=n}connect_(n){const a=En.INPUT_VALUE,d=this.getSourceBlock();var b=n.getSourceBlock();n.isConnected()&&n.disconnectInternal(!1);let R;if(this.isConnected()){const ce=this.stashShadowState(),Oe=this.targetBlock();Oe.isShadow()?Oe.dispose(!1):(this.disconnectInternal(),R=Oe),this.applyShadowState(ce)}let G;q()&&(G=new(xe(t.MOVE$$module$build$src$core$events$utils))(b),G.setReason(["connect"])),bu(this,n),b.setParent(d),G&&(G.recordNew(),he(G)),R&&(n=this.type===a?R.outputConnection:R.previousConnection)&&((b=ki.getConnectionForOrphanedConnection(b,n))?n.connect(b):n.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal();const n=this.targetBlock();n&&!n.isDeadOrDying()&&n.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===En.INPUT_VALUE||this.type===En.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(n){}connect(n){if(this.targetConnection===n)return!0;if(this.getConnectionChecker().canConnect(this,n,!1)){const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(n):n.connect_(this),t.setGroup$$module$build$src$core$events$utils(a)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(n=!0){const{parentConnection:a,childConnection:d}=this.getParentAndChildConnections();if(!a||!d)throw Error("Source connection not connected.");const b=t.getGroup$$module$build$src$core$events$utils();b||t.setGroup$$module$build$src$core$events$utils(!0);let R;q()&&(R=new(xe(t.MOVE$$module$build$src$core$events$utils))(d.getSourceBlock()),R.setReason(["disconnect"]));const G=this.targetConnection;G&&(G.targetConnection=null),this.targetConnection=null,n&&d.getSourceBlock().setParent(null),R&&(R.recordNew(),he(R)),d.getSourceBlock().isShadow()||a.respawnShadow_(),t.setGroup$$module$build$src$core$events$utils(b)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(n,a){if(this.getSourceBlock().isDeadOrDying())return!1;var d;return a=(d=n.getInput(a))==null?void 0:d.connection,d=this.targetBlock(),d&&d!==n||!a||a.targetConnection===this?!1:(a.isConnected()&&a.disconnect(),a.connect(this),!0)}targetBlock(){if(this.isConnected()){let n,a;return(a=(n=this.targetConnection)==null?void 0:n.getSourceBlock())!=null?a:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(n){return n?(Array.isArray(n)||(n=[n]),this.check=n,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(n){this.setShadowStateInternal({shadowDom:n})}getShadowDom(n){return n&&this.targetBlock().isShadow()?aa(this.targetBlock()):this.shadowDom}setShadowState(n){this.setShadowStateInternal({shadowState:n})}getShadowState(n){return n&&this.targetBlock()&&this.targetBlock().isShadow()?qr(this.targetBlock()):this.shadowState}neighbours(n){return[]}getParentInput(){let n=null;const a=this.sourceBlock_.inputList;for(let d=0;d<a.length;d++)if(a[d].connection===this){n=a[d];break}return n}toString(){const n=this.sourceBlock_;if(!n)return"Orphan Connection";if(n.outputConnection===this)var a="Output Connection of ";else if(n.previousConnection===this)a="Previous Connection of ";else if(n.nextConnection===this)a="Next Connection of ";else{a=null;for(let d=0,b;b=n.inputList[d];d++)if(b.connection===this){a=b;break}if(a)a='Input "'+a.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return a+n.toDevString()}stashShadowState(){const n=this.getShadowDom(!0),a=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:n,shadowState:a}}applyShadowState({shadowDom:n,shadowState:a}){this.shadowDom=n,this.shadowState=a}setShadowStateInternal({shadowDom:n=null,shadowState:a=null}={}){this.shadowDom=n,this.shadowState=a,(n=this.targetBlock())?n.isShadow()?(n.dispose(!1),this.getSourceBlock().isDeadOrDying()||(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))):(n=this.createShadowBlock(!1),this.serializeShadow(n),n&&n.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))}createShadowBlock(n){var a=this.getSourceBlock();const d=this.getShadowState(),b=this.getShadowDom();if(a.isDeadOrDying()||!d&&!b)return null;if(d)return a=jr(d,a.workspace,{parentConnection:n?this:void 0,isShadow:!0,recordUndo:!1});if(b){if(a=Ms(b,a.workspace),n)if(this.type===En.INPUT_VALUE){if(!a.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(a.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===En.NEXT_STATEMENT){if(!a.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(a.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return a}return null}serializeShadow(n){n&&(this.shadowDom=aa(n),this.shadowState=qr(n))}static getConnectionForOrphanedConnection(n,a){if(a.type===En.OUTPUT_VALUE)return Ku(n,a.getSourceBlock());n=n.lastConnectionInStack(!0);const d=a.getConnectionChecker();return n&&d.canConnect(a,n,!1)?n:null}};ki.CAN_CONNECT=0,ki.REASON_SELF_CONNECTION=1,ki.REASON_WRONG_TYPE=2,ki.REASON_TARGET_NULL=3,ki.REASON_CHECKS_FAILED=4,ki.REASON_DIFFERENT_WORKSPACES=5,ki.REASON_SHADOW_PARENT=6,ki.REASON_DRAG_CHECKS_FAILED=7,ki.REASON_PREVIOUS_AND_OUTPUT=8;var g_="_TEMP_COLLAPSED_INPUT",Ib="_TEMP_COLLAPSED_FIELD",yR={COLLAPSED_FIELD_NAME:Ib,COLLAPSED_INPUT_NAME:g_},__="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Ep=class{constructor(n){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,D(n),this.topBlock=n,this.workspace=n.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){t.disable$$module$build$src$core$events$utils(),this.hidePreview(),t.enable$$module$build$src$core$events$utils();var{local:n,closest:a}=this.activeCandidate;if(n.connect(a),this.topBlock.rendered){const d=n.isSuperior()?a:n,b=this.topBlock.getRootBlock();Zn().then(()=>{Ao(d.getSourceBlock()),setTimeout(()=>{b.bringToFront()},0)})}}}update(n,a){const d=this.getCandidate(n);((this.wouldDeleteBlock=this.shouldDelete(!!d,a))||this.shouldUpdatePreviews(d,n))&&(t.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(d),this.maybeShowPreview(d),t.enable$$module$build$src$core$events$utils())}createMarkerBlock(n){var a=n.type;t.disable$$module$build$src$core$events$utils();let d;try{if(d=this.workspace.newBlock(a),d.setInsertionMarker(!0),n.saveExtraState){var b=n.saveExtraState(!0);b&&d.loadExtraState&&d.loadExtraState(b)}else if(n.mutationToDom){const R=n.mutationToDom();R&&d.domToMutation&&d.domToMutation(R)}for(a=0;a<n.inputList.length;a++){const R=n.inputList[a];if(R.name===g_)continue;const G=d.inputList[a];if(!G)throw Error(__.replace("%1","an input"));for(b=0;b<R.fieldRow.length;b++){const ce=R.fieldRow[b],Oe=G.fieldRow[b];if(!Oe)throw Error(__.replace("%1","a field"));Oe.setValue(ce.getValue())}}for(const R of d.getDescendants(!1))R.setInsertionMarker(!0);d.setCollapsed(n.isCollapsed()),d.setInputsInline(n.getInputsInline()),d.initSvg(),d.getSvgRoot().setAttribute("visibility","hidden")}finally{t.enable$$module$build$src$core$events$utils()}return d}initAvailableConnections(){const n=this.topBlock.getConnections_(!1),a=this.topBlock.lastConnectionInStack(!0);return a&&a!==this.topBlock.nextConnection&&(n.push(a),this.lastOnStack=a),n}shouldUpdatePreviews(n,a){if(!n)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:d,closest:b}=this.activeCandidate;if(b===n.closest&&d===n.local)return!1;const R=d.x+a.x-b.x;return a=d.y+a.y-b.y,n.radius<Math.sqrt(R*R+a*a)-t.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(n){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let a=this.getStartRadius(),d=null;for(let b=0;b<this.availableConnections.length;b++){const R=this.availableConnections[b],G=R.closest(a,n);G.connection&&(d={closest:G.connection,local:R,radius:G.radius},a=G.radius)}return d}getStartRadius(){return this.activeCandidate?t.config$$module$build$src$core$config.connectingSnapRadius:t.config$$module$build$src$core$config.snapRadius}shouldDelete(n,a){return a&&this.workspace.getComponentManager().hasCapability(a.id,ba.Capability.DELETE_AREA)?a.wouldDelete(this.topBlock,n):!1}maybeShowPreview(n){if(!this.wouldDeleteBlock&&n){var a=n.closest,d;a===((d=this.activeCandidate)==null?void 0:d.closest)||a.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=n,this.showPreview(this.activeCandidate))}}showPreview(n){const a=this.workspace.getRenderer();switch(a.getConnectionPreviewMethod(n.closest,n.local,this.topBlock)){case Ep.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(n);break;case Ep.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(n);break;case Ep.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(n)}a.shouldHighlightConnection(n.closest)&&n.closest.highlight()}maybeHidePreview(n){if(!n)this.hidePreview();else if(this.activeCandidate){const a=this.activeCandidate.local!==n.local;(this.activeCandidate.closest!==n.closest||a||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let n;const a=(n=this.activeCandidate)==null?void 0:n.closest;a&&a.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(a)&&a.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(n){const{local:a,closest:d}=n;let b=(n=this.lastOnStack&&a===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!b)throw Error("Cannot show the insertion marker because there is no insertion marker block");let R;try{R=b.getMatchingConnection(a.getSourceBlock(),a)}catch{if(n&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),b=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),b=this.firstMarker=this.createMarkerBlock(this.topBlock)),!b)throw Error("Cannot show the insertion marker because there is no insertion marker block");R=b.getMatchingConnection(a.getSourceBlock(),a)}if(!R)throw Error("Cannot show the insertion marker because there is no associated connection");if(R===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");b.queueRender(),Bi(),R.connect(d);const G={x:d.x-R.x,y:d.y-R.y},ce=R.getOffsetInBlock().clone(),Oe=R;Zn().then(()=>{let Nt;(Nt=b)==null||Nt.positionNearConnection(Oe,G,ce);let $n;($n=b)==null||$n.getSvgRoot().setAttribute("visibility","visible")}),this.markerConnection=R}hideInsertionMarker(){if(this.markerConnection){var n=this.markerConnection,a=n.getSourceBlock(),d=a.outputConnection,b;if((b=a.previousConnection)!=null&&b.targetConnection||d!=null&&d.targetConnection)a.unplug(!0);else{let R;(R=n.targetBlock())==null||R.unplug(!1)}if(n.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(n=a.getSvgRoot())&&n.setAttribute("visibility","hidden")}}showInsertionInputOutline(n){n=n.closest,this.highlightedBlock=n.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(n,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(n){if(this.fadedBlock=n.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const n=[];return this.firstMarker&&n.push(this.firstMarker),this.lastMarker&&n.push(this.lastMarker),n}disposeInsertionMarker(n){if(n){t.disable$$module$build$src$core$events$utils();try{n.dispose()}finally{t.enable$$module$build$src$core$events$utils()}}}};(function(n){n=n.PREVIEW_TYPE||(n.PREVIEW_TYPE={}),n[n.INSERTION_MARKER=0]="INSERTION_MARKER",n[n.INPUT_OUTLINE=1]="INPUT_OUTLINE",n[n.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(Ep||(Ep={})),Ep.PREVIEW_TYPE;var Uv=class{constructor(n){this.overrides=null,this.name=n}getClassName(){return this.name+"-renderer"}init(n,a){this.constants_=this.makeConstants_(),a&&(this.overrides=a,Object.assign(this.constants_,a)),this.constants_.setTheme(n),this.constants_.init()}createDom(n,a){this.constants_.createDom(n,this.name+"-"+a.name,"."+this.getClassName()+"."+a.getClassName())}refreshDom(n,a){const d=this.getConstants();d.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=d.randomIdentifier,this.constants_.setTheme(a),this.constants_.init(),this.createDom(n,a)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new Bv}makeRenderInfo_(n){return new m0(this,n)}makeDrawer_(n,a){return new Pv(n,a)}makeMarkerDrawer(n,a){return new Ab(n,this.getConstants(),a)}makePathObject(n,a){return new Fv(n,a,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(n){return!0}orphanCanConnectAtEnd(n,a,d){return!!ki.getConnectionForOrphanedConnection(n,d===En.OUTPUT_VALUE?a.outputConnection:a.previousConnection)}getConnectionPreviewMethod(n,a,d){return be("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),a.type===En.OUTPUT_VALUE||a.type===En.PREVIOUS_STATEMENT?!n.isConnected()||this.orphanCanConnectAtEnd(d,n.targetBlock(),a.type)?Ep.PREVIEW_TYPE.INSERTION_MARKER:Ep.PREVIEW_TYPE.REPLACEMENT_FADE:Ep.PREVIEW_TYPE.INSERTION_MARKER}render(n){const a=this.makeRenderInfo_(n);a.measure(),this.makeDrawer_(n,a).draw()}},ns={};ns.BottomRow=xb,ns.Connection=Tp,ns.ConstantProvider=Bv,ns.Drawer=Pv,ns.ExternalValueInput=Cb,ns.Field=f0,ns.Hat=hE,ns.Icon=Dw,ns.InRowSpacer=zd,ns.InlineInput=dE,ns.InputConnection=Cg,ns.InputRow=pE,ns.JaggedEdge=Bw,ns.MarkerSvg=Ab,ns.Measurable=Jr,ns.NextConnection=Pw,ns.OutputConnection=Fw,ns.PathObject=Fv,ns.PreviousConnection=Uw,ns.RenderInfo=m0,ns.Renderer=Uv,ns.RoundCorner=f_,ns.Row=Nv,ns.SpacerRow=fE,ns.SquareCorner=m_,ns.StatementInput=Dv,ns.TopRow=mE,ns.Types=Je,ns.init=Wc,ns.register=Gs,ns.unregister=Ld;var Gw=class{constructor(n,a){this.workspace=n,this.theme=a,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(n){var a=this.theme;this.theme=n,(n=this.workspace.getInjectionDiv())&&(a&&(a=a.getClassName())&&mt(n,a),(a=this.theme.getClassName())&&ke(n,a));for(let d=0,b;b=this.subscribedWorkspaces_[d];d++)b.refreshTheme();for(const[d,b]of this.componentDB)for(const R of b){n=R.element,a=R.propertyName;const G=this.theme&&this.theme.getComponentStyle(d);n.style.setProperty(a,G||"")}for(const d of this.subscribedWorkspaces_)d.hideChaff()}subscribeWorkspace(n){this.subscribedWorkspaces_.push(n)}unsubscribeWorkspace(n){if(!Et(this.subscribedWorkspaces_,n))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(n,a,d){this.componentDB.has(a)||this.componentDB.set(a,[]),this.componentDB.get(a).push({element:n,propertyName:d}),a=this.theme&&this.theme.getComponentStyle(a),n.style.setProperty(d,a||"")}unsubscribe(n){if(n)for(const[a,d]of this.componentDB){for(let b=d.length-1;0<=b;b--)d[b].element===n&&d.splice(b,1);d.length||this.componentDB.delete(a)}}dispose(){this.subscribedWorkspaces_.length=0,this.componentDB.clear()}},gE="VARIABLE_DYNAMIC",Mg={CATEGORY_NAME:gE};Mg.flyoutCategory=zp,Mg.flyoutCategoryBlocks=Hl,Mg.onCreateVariableButtonClick_Colour=yl,Mg.onCreateVariableButtonClick_Number=ga,Mg.onCreateVariableButtonClick_String=Jh;var _E=class{canConnect(n,a,d,b){return this.canConnectWithReason(n,a,d,b)===ki.CAN_CONNECT}canConnectWithReason(n,a,d,b){const R=this.doSafetyChecks(n,a);return R!==ki.CAN_CONNECT?R:this.doTypeChecks(n,a)?d&&!this.doDragChecks(n,a,b||0)?ki.REASON_DRAG_CHECKS_FAILED:ki.CAN_CONNECT:ki.REASON_CHECKS_FAILED}getErrorMessage(n,a,d){switch(n){case ki.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case ki.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case ki.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case ki.REASON_TARGET_NULL:return"Target connection is null.";case ki.REASON_CHECKS_FAILED:return"Connection checks failed. "+(a+" expected "+a.getCheck()+", found "+d.getCheck());case ki.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case ki.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case ki.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(n,a){if(!n||!a)return ki.REASON_TARGET_NULL;let d,b,R;return n.isSuperior()?(d=n.getSourceBlock(),b=a.getSourceBlock(),R=a):(b=n.getSourceBlock(),d=a.getSourceBlock(),R=n,n=a),d===b?ki.REASON_SELF_CONNECTION:R.type!==jt[n.type]?ki.REASON_WRONG_TYPE:d.workspace!==b.workspace?ki.REASON_DIFFERENT_WORKSPACES:d.isShadow()&&!b.isShadow()?ki.REASON_SHADOW_PARENT:R.type===En.OUTPUT_VALUE&&b.previousConnection&&b.previousConnection.isConnected()||R.type===En.PREVIOUS_STATEMENT&&b.outputConnection&&b.outputConnection.isConnected()?ki.REASON_PREVIOUS_AND_OUTPUT:ki.CAN_CONNECT}doTypeChecks(n,a){if(n=n.getCheck(),a=a.getCheck(),!n||!a)return!0;for(let d=0;d<n.length;d++)if(a.indexOf(n[d])!==-1)return!0;return!1}doDragChecks(n,a,d){if(n.distanceFrom(a)>d||a.getSourceBlock().isInsertionMarker())return!1;switch(a.type){case En.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(n,a);case En.OUTPUT_VALUE:if(a.isConnected()&&!a.targetBlock().isInsertionMarker()||n.isConnected())return!1;break;case En.INPUT_VALUE:if(a.isConnected()&&!a.targetBlock().isMovable()&&!a.targetBlock().isShadow())return!1;break;case En.NEXT_STATEMENT:if(a.isConnected()&&!n.getSourceBlock().nextConnection&&!a.targetBlock().isShadow()&&a.targetBlock().nextConnection||a.targetBlock()&&!a.targetBlock().isMovable()&&!a.targetBlock().isShadow())return!1;break;default:return!1}return bs.indexOf(a)===-1}canConnectToPrevious_(n,a){return n.targetConnection||bs.indexOf(a)!==-1?!1:a.targetConnection?(n=a.targetBlock(),n.isInsertionMarker()?!n.getPreviousBlock():!1):!0}};i(Lt.CONNECTION_CHECKER,Ua,_E);var vE=class extends fp{constructor(n){super(n),this.type=Au,n&&(this.varType=n.type,this.varName=n.name)}toJson(){const n=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return n.varType=this.varType,n.varName=this.varName,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new vE),a.varType=n.varType,a.varName=n.varName,a}run(n){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");n?a.deleteVariableById(this.varId):a.createVariable(this.varName,this.varType,this.varId)}};i(Lt.EVENT,Au,vE);var yE=class extends fp{constructor(n,a){super(n),this.type=qc,n&&(this.oldName=n.name,this.newName=typeof a>"u"?"":a)}toJson(){const n=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return n.oldName=this.oldName,n.newName=this.newName,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new yE),a.oldName=n.oldName,a.newName=n.newName,a}run(n){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");n?a.renameVariableById(this.varId,this.newName):a.renameVariableById(this.varId,this.oldName)}};i(Lt.EVENT,qc,yE);var bE=class{constructor(n){this.workspace=n,this.variableMap=new Map}clear(){for(const n of this.variableMap.values())for(;0<n.length;)this.deleteVariable(n[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(n,a){if(n.name!==a){var d=this.getVariable(a,n.type),b=this.workspace.getAllBlocks(!1),R=t.getGroup$$module$build$src$core$events$utils();R||t.setGroup$$module$build$src$core$events$utils(!0);try{d&&d.getId()!==n.getId()?this.renameVariableWithConflict_(n,a,d,b):this.renameVariableAndUses_(n,a,b)}finally{t.setGroup$$module$build$src$core$events$utils(R)}}}renameVariableById(n,a){const d=this.getVariableById(n);if(!d)throw Error("Tried to rename a variable that didn't exist. ID: "+n);this.renameVariable(d,a)}renameVariableAndUses_(n,a,d){for(he(new(xe(qc))(n,a)),n.name=a,a=0;a<d.length;a++)d[a].updateVarName(n)}renameVariableWithConflict_(n,a,d,b){const R=n.type;for(a!==d.name&&this.renameVariableAndUses_(d,a,b),a=0;a<b.length;a++)b[a].renameVarById(n.getId(),d.getId());he(new(xe(Au))(n)),Et(this.variableMap.get(R),n)}createVariable(n,a,d){var b=this.getVariable(n,a);if(b){if(d&&b.getId()!==d)throw Error('Variable "'+n+'" is already in use and its id is "'+b.getId()+'" which conflicts with the passed in id, "'+d+'".');return b}if(d&&this.getVariableById(d))throw Error('Variable id, "'+d+'", is already in use.');return b=d||se(),a=a||"",b=new jp(this.workspace,n,a,b),n=this.variableMap.get(a)||[],n.push(b),this.variableMap.delete(a),this.variableMap.set(a,n),he(new(xe(za))(b)),b}deleteVariable(n){const a=n.getId(),d=this.variableMap.get(n.type);if(d){for(let b=0;b<d.length;b++)if(d[b].getId()===a){d.splice(b,1),he(new(xe(Au))(n)),d.length===0&&this.variableMap.delete(n.type);break}}}deleteVariableById(n){const a=this.getVariableById(n);if(a){var d=a.name;const b=this.getVariableUsesById(n);for(let R=0,G;G=b[R];R++)if(G.type==="procedures_defnoreturn"||G.type==="procedures_defreturn"){n=String(G.getFieldValue("NAME")),d=t.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",d).replace("%2",n),wo(d);return}1<b.length?(d=t.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(b.length)).replace("%2",d),Yt(d,R=>{R&&a&&this.deleteVariableInternal(a,b)})):this.deleteVariableInternal(a,b)}else console.warn("Can't delete non-existent variable: "+n)}deleteVariableInternal(n,a){const d=t.getGroup$$module$build$src$core$events$utils();d||t.setGroup$$module$build$src$core$events$utils(!0);try{for(let b=0;b<a.length;b++)a[b].dispose(!0);this.deleteVariable(n)}finally{t.setGroup$$module$build$src$core$events$utils(d)}}getVariable(n,a){if(a=this.variableMap.get(a||"")){for(let d=0,b;b=a[d];d++)if(t.Names$$module$build$src$core$names.equals(b.name,n))return b}return null}getVariableById(n){for(const a of this.variableMap.values())for(const d of a)if(d.getId()===n)return d;return null}getVariablesOfType(n){return(n=this.variableMap.get(n||""))?n.slice():[]}getVariableTypes(n){const a=new Set(this.variableMap.keys());if(n&&n.getPotentialVariableMap())for(const d of n.getPotentialVariableMap().variableMap.keys())a.add(d);return a.has("")||a.add(""),Array.from(a.values())}getAllVariables(){let n=[];for(const a of this.variableMap.values())n=n.concat(a);return n}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(n=>n.name)}getVariableUsesById(n){const a=[],d=this.workspace.getAllBlocks(!1);for(let b=0;b<d.length;b++){const R=d[b].getVarModels();if(R)for(let G=0;G<R.length;G++)R[G].getId()===n&&a.push(d[b])}return a}},zv=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(n){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new Tb,this.potentialVariableMap=null,this.id=se(),w(this),this.options=n||new Lo({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(_(Lt.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new bE(this)}dispose(){this.listeners.length=0,this.clear(),x(this)}sortObjects_(n,a){const d=Math.sin(mc(zv.SCAN_ANGLE))*(this.RTL?-1:1);return n=n.getRelativeToSurfaceXY(),a=a.getRelativeToSurfaceXY(),n.y+d*n.x-(a.y+d*a.x)}addTopBlock(n){this.topBlocks.push(n)}removeTopBlock(n){if(!Et(this.topBlocks,n))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(n=!1){const a=[].concat(this.topBlocks);return n&&1<a.length&&a.sort(this.sortObjects_.bind(this)),a}addTypedBlock(n){this.typedBlocksDB.has(n.type)||this.typedBlocksDB.set(n.type,[]),this.typedBlocksDB.get(n.type).push(n)}removeTypedBlock(n){Et(this.typedBlocksDB.get(n.type),n),this.typedBlocksDB.get(n.type).length||this.typedBlocksDB.delete(n.type)}getBlocksByType(n,a=!1){return this.typedBlocksDB.has(n)?(n=this.typedBlocksDB.get(n).slice(0),a&&n&&1<n.length&&n.sort(this.sortObjects_.bind(this)),n.filter(function(d){return!d.isInsertionMarker()})):[]}addTopComment(n){this.topComments.push(n),this.commentDB.has(n.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+n.id+'"'),this.commentDB.set(n.id,n)}removeTopComment(n){if(!Et(this.topComments,n))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(n.id)}getTopComments(n=!1){const a=[].concat(this.topComments);return n&&1<a.length&&a.sort(this.sortObjects_.bind(this)),a}getAllBlocks(n=!1){if(n){var a=this.getTopBlocks(!0);n=[];for(let d=0;d<a.length;d++)n.push(...a[d].getDescendants(!0))}else for(n=this.getTopBlocks(!1),a=0;a<n.length;a++)n.push(...n[a].getChildren(!1));return n.filter(function(d){return!d.isInsertionMarker()})}clear(){this.isClearing=!0;try{const n=t.getGroup$$module$build$src$core$events$utils();for(n||t.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();t.setGroup$$module$build$src$core$events$utils(n),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(n,a){this.variableMap.renameVariableById(n,a)}createVariable(n,a,d){return this.variableMap.createVariable(n,a,d)}getVariableUsesById(n){return this.variableMap.getVariableUsesById(n)}deleteVariableById(n){this.variableMap.deleteVariableById(n)}getVariable(n,a){return this.variableMap.getVariable(n,a)}getVariableById(n){return this.variableMap.getVariableById(n)}getVariablesOfType(n){return this.variableMap.getVariablesOfType(n)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(n,a){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(n){return this.options.maxInstances?(this.options.maxInstances[n]!==void 0?this.options.maxInstances[n]:1/0)-this.getBlocksByType(n,!1).length:1/0}isCapacityAvailable(n){if(!this.hasBlockLimits())return!0;let a=0;for(const d in n){if(n[d]>this.remainingCapacityOfType(d))return!1;a+=n[d]}return!(a>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(n){var a=n?this.redoStack_:this.undoStack_,d=n?this.undoStack_:this.redoStack_;const b=a.pop();if(b){for(var R=[b];a.length&&b.group&&b.group===a[a.length-1].group;){const G=a.pop();G&&R.push(G)}for(a=0;a<R.length;a++)d.push(R[a]);R=j(R,n),fe(!1);try{for(d=0;d<R.length;d++)R[d].run(n)}finally{fe(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,te()}addChangeListener(n){return this.listeners.push(n),n}removeChangeListener(n){Et(this.listeners,n)}fireChangeListener(n){if(n.recordUndo)for(this.undoStack_.push(n),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let a=0;a<this.listeners.length;a++)(0,this.listeners[a])(n)}getBlockById(n){return this.blockDB.get(n)||null}setBlockById(n,a){this.blockDB.set(n,a)}removeBlockById(n){this.blockDB.delete(n)}getCommentById(n){let a;return(a=this.commentDB.get(n))!=null?a:null}allInputsFilled(n){const a=this.getTopBlocks(!1);for(let d=0;d<a.length;d++)if(!a[d].allInputsFilled(n))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new bE(this)}getVariableMap(){return this.variableMap}setVariableMap(n){this.variableMap=n}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let n=null;const a=this.options.parentWorkspace;return this.isFlyout?a&&a.options&&(n=a.options.parentWorkspace):a&&(n=a),n}static getById(n){return v(n)}static getAll(){return E()}};zv.SCAN_ANGLE=3;var bR=100,Ww=class{constructor(n){this.parentWorkspace=n,this.sounds=new Map,this.lastSound_=null,this.muted=!1}dispose(){this.sounds.clear()}load(n,a){if(n.length){try{var d=new globalThis.Audio}catch{return}for(let R=0;R<n.length;R++){const G=n[R],ce=G.match(/\.(\w+)$/);if(ce&&d.canPlayType("audio/"+ce[1])){var b=new globalThis.Audio(G);break}}b&&this.sounds.set(a,b)}}preload(){for(const n of this.sounds.values()){n.volume=.01;const a=n.play();if(a!==void 0?a.then(n.pause).catch(function(){}):n.pause(),kn||Wn)break}}play(n,a){if(!this.muted){var d=this.sounds.get(n);d?(n=new Date,this.lastSound_!==null&&n.getTime()-this.lastSound_.getTime()<bR||(this.lastSound_=n,d=kn||fn?d:d.cloneNode(),d.volume=a===void 0?1:a,d.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(n,a)}}setMuted(n){this.muted=n}getMuted(){return this.muted}},TR=class{constructor(n){this.workspace=n,this.layers=new Map,(n=n.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(n)),n=this.createLayer(K),ke(n,"blocklyBlockCanvas"),n=this.createLayer(pe),ke(n,"blocklyBubbleCanvas")}createDragLayer(n){const a=Z(Be.SVG,{class:"blocklyBlockDragSurface",xmlns:mg,"xmlns:html":Cc,"xmlns:xlink":Ts,version:"1.1"});return n.append(a),Z(Be.G,{},a)}translateLayers(n,a){n=`translate(${n.x}, ${n.y}) scale(${a})`;let d;(d=this.dragLayer)==null||d.setAttribute("transform",n);for(const[,b]of this.layers)b.setAttribute("transform",n)}moveToDragLayer(n){let a;(a=this.dragLayer)==null||a.appendChild(n.getSvgRoot())}moveOffDragLayer(n,a){this.append(n,a)}append(n,a){this.layers.has(a)||this.createLayer(a);let d;(d=this.layers.get(a))==null||d.appendChild(n.getSvgRoot())}createLayer(n){const a=this.workspace.getSvgGroup(),d=Z(Be.G,{});let b=!1;const R=[...this.layers].sort((G,ce)=>G[0]-ce[0]);for(const[G,ce]of R)if(n<G){a.insertBefore(d,ce),b=!0;break}return b||a.appendChild(d),this.layers.set(n,d),d}hasLayer(n){return n===this.dragLayer||new Set(this.layers.values()).has(n)}getBlockLayer(){return this.layers.get(K)}getBubbleLayer(){return this.layers.get(pe)}},ER=20,rf=class extends zv{constructor(n){super(n),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(_(Lt.METRICS_MANAGER,n,!0))(this),this.getMetrics=n.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=n.setMetrics||rf.setTopLevelWorkspaceMetrics_,this.componentManager=new ba,this.connectionDBList=wh.init(this.connectionChecker),this.audioManager=new Ww(n.parentWorkspace),this.grid=this.options.gridPattern?new aE(this.options.gridPattern,n.gridOptions):null,this.markerManager=new Ch(this),Va&&pn&&this.registerToolboxCategoryCallback(s_,pn),Mg&&zp&&this.registerToolboxCategoryCallback(gE,zp),Eo&&rn&&(this.registerToolboxCategoryCallback(Lv,rn),this.addChangeListener(Yu)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new Gw(this,this.options.theme||bb),this.themeManager_.subscribeWorkspace(this);let a;this.renderer=Wc(this.options.renderer||"geras",this.getTheme(),(a=this.options.rendererOverrides)!=null?a:void 0),this.cachedParentSvgSize=new Es(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(n){this.metricsManager=n,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(n){this.markerManager.setCursorSvg(n)}setMarkerSvg(n){this.markerManager.setMarkerSvg(n)}getMarker(n){return this.markerManager?this.markerManager.getMarker(n):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(n){n||(n=bb),this.themeManager_.setTheme(n)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(a){return!!a.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const n=new(xe(Vl))(this.getTheme().name,this.id);he(n)}updateBlockStyles_(n){for(let a=0,d;d=n[a];a++){const b=d.getStyleName();b&&d.setStyle(b)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const n=this.getParentSvg().getScreenCTM();n&&(this.inverseScreenCTM=n.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(n){let a=0,d=0,b=1;(this.getCanvas().contains(n)||this.getBubbleCanvas().contains(n))&&(b=this.scale);do{const R=Qn(n);(n===this.getCanvas()||n===this.getBubbleCanvas())&&(b=1),a+=R.x*b,d+=R.y*b,n=n.parentNode}while(n&&n!==this.getParentSvg()&&n!==this.getInjectionDiv());return new tn(a,d)}getCachedParentSvgSize(){const n=this.cachedParentSvgSize;return new Es(n.width,n.height)}getOriginOffsetInPixels(){return Q(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let n=this.svgGroup_;for(;n;){if((" "+(n.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv=n;break}n=n.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(n){this.resizeHandlerWrapper=n}createDom(n,a){return this.injectionDiv||(this.injectionDiv=a??null),this.svgGroup_=Z(Be.G,{class:"blocklyWorkspace"}),n&&(this.svgBackground_=Z(Be.RECT,{height:"100%",width:"100%",class:n},this.svgGroup_),n==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new TR(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(we(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),we(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(_(Lt.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(n=_(Lt.CURSOR,this.options))&&this.markerManager.setCursor(new n),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&ut(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const n=this.getParentSvg();n&&n.parentNode&&ut(n.parentNode)}this.resizeHandlerWrapper&&(it(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=rf.newTrashcan(this);const n=this.trashcan.createDom();this.svgGroup_.insertBefore(n,this.getCanvas())}static newTrashcan(n){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new r0(this);const n=this.zoomControls_.createDom();this.svgGroup_.appendChild(n)}addFlyout(n){const a=new Lo({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return a.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(_(Lt.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(a):new(_(Lt.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(a),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(n)}getFlyout(n){return this.flyout||n?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const n=this.componentManager.getComponents(ba.Capability.POSITIONABLE,!0),a=this.getMetricsManager().getUiMetrics(),d=[];for(let b=0,R;R=n[b];b++){R.position(a,d);const G=R.getBoundingRectangle();G&&d.push(G)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const n=De();tn.equals(this.lastRecordedPageScroll,n)||(this.lastRecordedPageScroll=n,this.updateScreenCalculations_())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(n,a){const d=this.getParentSvg();n!=null&&(this.cachedParentSvgSize.width=n,d.setAttribute("data-cached-width",`${n}`)),a!=null&&(this.cachedParentSvgSize.height=a,d.setAttribute("data-cached-height",`${a}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let n=this.svgGroup_;for(;n;){if(n.tagName==="svg"){this.cachedParentSvg=n;break}n=n.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(q()){var n=this.scale,a=-this.scrollY,d=-this.scrollX;if(!(n===this.oldScale&&1>Math.abs(a-this.oldTop)&&1>Math.abs(d-this.oldLeft))){var b=new(xe(ts))(a,d,n,this.id,this.oldScale);this.oldScale=n,this.oldTop=a,this.oldLeft=d,he(b)}}}translate(n,a){let d;(d=this.layerManager)==null||d.translateLayers(new tn(n,a),this.scale);let b;(b=this.grid)==null||b.moveTo(n,a),this.maybeFireViewportChangeEvent()}getWidth(){const n=this.getMetrics();return n?n.viewWidth/this.scale:0}setVisible(n){this.isVisible_=n,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(n),this.getFlyout()&&this.getFlyout().setContainerVisible(n),this.getParentSvg().style.display=n?"block":"none",this.toolbox_&&this.toolbox_.setVisible(n),n||this.hideChaff(!0))}render(){for(var n=this.getAllBlocks(!1),a=n.length-1;0<=a;a--)n[a].queueRender();if(this.currentGesture_)for(n=this.currentGesture_.getInsertionMarkers(),a=0;a<n.length;a++)n[a].queueRender();Zn().then(()=>void this.markerManager.updateMarkers())}highlightBlock(n,a){if(a===void 0){for(let d=0,b;b=this.highlightedBlocks[d];d++)b.setHighlighted(!1);this.highlightedBlocks.length=0}(n=n?this.getBlockById(n):null)&&((a=a===void 0||a)?this.highlightedBlocks.indexOf(n)===-1&&this.highlightedBlocks.push(n):Et(this.highlightedBlocks,n),n.setHighlighted(a))}paste(n){if(be("Blockly.WorkspaceSvg.prototype.paste","v10","v11","Blockly.clipboard.paste"),!this.rendered||!n.type&&!n.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0);let d;try{d=n.type?this.pasteBlock_(null,n):n.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_(n):this.pasteBlock_(n,null)}finally{t.setGroup$$module$build$src$core$events$utils(a)}return d}pasteBlock_(n,a){t.disable$$module$build$src$core$events$utils();let d;try{let b=0,R=0;if(n){d=Ms(n,this);let G;b=parseInt((G=n.getAttribute("x"))!=null?G:"0"),this.RTL&&(b=-b);let ce;R=parseInt((ce=n.getAttribute("y"))!=null?ce:"0")}else a&&(d=Un(a,this),b=a.x||10,this.RTL&&(b=this.getWidth()-b),R=a.y||10);if(!isNaN(b)&&!isNaN(R)){let G;do{G=!1;const ce=this.getAllBlocks(!1);for(let Oe=0,Nt;Nt=ce[Oe];Oe++){const $n=Nt.getRelativeToSurfaceXY();if(1>=Math.abs(b-$n.x)&&1>=Math.abs(R-$n.y)){G=!0;break}}if(!G){const Oe=d.getConnections_(!1);for(let Nt=0,$n;$n=Oe[Nt];Nt++)if($n.closest(t.config$$module$build$src$core$config.snapRadius,new tn(b,R)).connection){G=!0;break}}G&&(b=this.RTL?b-t.config$$module$build$src$core$config.snapRadius:b+t.config$$module$build$src$core$config.snapRadius,R+=2*t.config$$module$build$src$core$config.snapRadius)}while(G);d.moveTo(new tn(b,R))}}finally{t.enable$$module$build$src$core$events$utils()}return q()&&!d.isShadow()&&he(new(xe(t.CREATE$$module$build$src$core$events$utils))(d)),d.select(),d}pasteWorkspaceComment_(n){t.disable$$module$build$src$core$events$utils();let a;try{a=ja.fromXmlRendered(n,this);let d,b=parseInt((d=n.getAttribute("x"))!=null?d:"0"),R,G=parseInt((R=n.getAttribute("y"))!=null?R:"0");isNaN(b)||isNaN(G)||(this.RTL&&(b=-b),a.moveBy(b+50,G+50))}finally{t.enable$$module$build$src$core$events$utils()}return q()&&Ac.fireCreateEvent(a),a.select(),a}refreshToolboxSelection(){const n=this.isFlyout?this.targetWorkspace:this;n&&!n.currentGesture_&&n.toolbox_&&n.toolbox_.getFlyout()&&n.toolbox_.refreshSelection()}renameVariableById(n,a){super.renameVariableById(n,a),this.refreshToolboxSelection()}deleteVariableById(n){super.deleteVariableById(n),this.refreshToolboxSelection()}createVariable(n,a,d){return n=super.createVariable(n,a,d),this.refreshToolboxSelection(),n}recordDragTargets(){const n=this.componentManager.getComponents(ba.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let a=0,d;d=n[a];a++){const b=d.getClientRect();b&&this.dragTargetAreas.push({component:d,clientRect:b})}}newBlock(n,a){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(n){for(let a=0,d;d=this.dragTargetAreas[a];a++)if(d.clientRect.contains(n.clientX,n.clientY))return d.component;return null}onMouseDown_(n){const a=this.getGesture(n);a&&a.handleWsStart(n,this)}startDrag(n,a){n=At(n,this.getParentSvg(),this.getInverseScreenCTM()),n.x/=this.scale,n.y/=this.scale,this.dragDeltaXY=tn.difference(a,n)}moveDrag(n){return n=At(n,this.getParentSvg(),this.getInverseScreenCTM()),n.x/=this.scale,n.y/=this.scale,tn.sum(this.dragDeltaXY,n)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const n=!!this.scrollbar;return this.isMovable()&&(!n||n&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const n=!!this.scrollbar;return this.isMovable()&&(!n||n&&this.scrollbar.canScrollVertically())}onMouseWheel_(n){if(Dm.inProgress())n.preventDefault(),n.stopPropagation();else{var a=this.options.zoomOptions&&this.options.zoomOptions.wheel,d=this.options.moveOptions&&this.options.moveOptions.wheel;if(a||d){var b=ht(n);if(hr)var R=n.metaKey;a&&(n.ctrlKey||R||!d)?(b=-b.y/50,a=At(n,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(a.x,a.y,b)):(a=this.scrollX-b.x,d=this.scrollY-b.y,n.shiftKey&&!b.x&&(a=this.scrollX-b.y,d=this.scrollY),this.scroll(a,d)),n.preventDefault()}}}getBlocksBoundingBox(){const n=this.getTopBoundedElements();if(!n.length)return new gi(0,0,0,0);const a=n[0].getBoundingRectangle();for(let b=1;b<n.length;b++){var d=n[b];d.isInsertionMarker&&d.isInsertionMarker()||(d=d.getBoundingRectangle(),d.top<a.top&&(a.top=d.top),d.bottom>a.bottom&&(a.bottom=d.bottom),d.left<a.left&&(a.left=d.left),d.right>a.right&&(a.right=d.right))}return a}cleanUp(){this.setResizesEnabled(!1),t.setGroup$$module$build$src$core$events$utils(!0);const n=this.getTopBlocks(!0);let a=0;for(let d=0,b;b=n[d];d++){if(!b.isMovable())continue;const R=b.getRelativeToSurfaceXY();b.moveBy(-R.x,a-R.y,["cleanup"]),b.snapToGrid(),a=b.getRelativeToSurfaceXY().y+b.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}t.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(n){if(!this.options.readOnly&&!this.isFlyout){var a=Kr.registry.getContextMenuOptions(Kr.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(a,n),gu(n,a,this.RTL)}}updateToolbox(n){if(n=at(n)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Dt(n)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=n,this.toolbox_.render(n)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=n,this.flyout.show(n)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(O(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(n,a,d){d=Math.pow(this.options.zoomOptions.scaleSpeed,d);const b=this.scale*d;if(this.scale!==b){b>this.options.zoomOptions.maxScale?d=this.options.zoomOptions.maxScale/this.scale:b<this.options.zoomOptions.minScale&&(d=this.options.zoomOptions.minScale/this.scale);var R=this.getCanvas().getCTM(),G=this.getParentSvg().createSVGPoint();G.x=n,G.y=a,G=G.matrixTransform(R.inverse()),n=G.x,a=G.y,R=R.translate(n*(1-d),a*(1-d)).scale(d),this.scrollX=R.e,this.scrollY=R.f,this.setScale(b)}}zoomCenter(n){var a=this.getMetrics();let d;this.flyout?(d=a.svgWidth?a.svgWidth/2:0,a=a.svgHeight?a.svgHeight/2:0):(d=a.viewWidth/2+a.absoluteLeft,a=a.viewHeight/2+a.absoluteTop),this.zoom(d,a,n)}zoomToFit(){if(this.isMovable()){var n=this.getMetrics(),a=n.viewWidth;n=n.viewHeight;var d=this.getBlocksBoundingBox(),b=2*ER,R=d.right-d.left+b;if(d=d.bottom-d.top+b,R){this.flyout&&(this.horizontalLayout?(n+=this.flyout.getHeight(),d+=this.flyout.getHeight()/this.scale):(a+=this.flyout.getWidth(),R+=this.flyout.getWidth()/this.scale)),a/=R,n/=d,t.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(a,n)),this.scrollCenter()}finally{t.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){ke(this.getCanvas(),"blocklyCanvasTransitioning"),ke(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){mt(this.getCanvas(),"blocklyCanvasTransitioning"),mt(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var n=this.getMetrics(),a=(n.scrollWidth-n.viewWidth)/2,d=(n.scrollHeight-n.viewHeight)/2;a=-a-n.scrollLeft,d=-d-n.scrollTop,this.scroll(a,d)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(n,a){if(this.isMovable()){var d=n?this.getBlockById(n):null;if(d){n=d.getRelativeToSurfaceXY(),d=a?{height:d.height,width:d.width}:d.getHeightWidth();var b=this.scale;a=(n.x+(this.RTL?-1:1)*d.width/2)*b,n=(n.y+d.height/2)*b,d=this.getMetrics(),this.scroll(-(a-d.viewWidth/2),-(n-d.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(n){this.options.zoomOptions.maxScale&&n>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&n<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale),this.scale=n,this.hideChaff(!1),(n=this.getFlyout(!1))&&n.isVisible()&&(n.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),n=this.getMetrics(),this.scrollX-=n.absoluteLeft,this.scrollY-=n.absoluteTop,n.viewLeft+=n.absoluteLeft,n.viewTop+=n.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(n):this.scrollbar.resizeContent(n))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(n,a){this.hideChaff(!0);const d=this.getMetrics();n=Math.min(n,-d.scrollLeft),a=Math.min(a,-d.scrollTop);const b=d.scrollTop+Math.max(0,d.scrollHeight-d.viewHeight);n=Math.max(n,-(d.scrollLeft+Math.max(0,d.scrollWidth-d.viewWidth))),a=Math.max(a,-b),this.scrollX=n,this.scrollY=a,this.scrollbar&&this.scrollbar.set(-(n+d.scrollLeft),-(a+d.scrollTop),!1),n+=d.absoluteLeft,a+=d.absoluteTop,this.translate(n,a)}getBlockById(n){return super.getBlockById(n)}getAllBlocks(n=!1){return super.getAllBlocks(n)}getTopBlocks(n=!1){return super.getTopBlocks(n)}addTopBlock(n){this.addTopBoundedElement(n),super.addTopBlock(n)}removeTopBlock(n){this.removeTopBoundedElement(n),super.removeTopBlock(n)}addTopComment(n){this.addTopBoundedElement(n),super.addTopComment(n)}removeTopComment(n){this.removeTopBoundedElement(n),super.removeTopComment(n)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(n){this.topBoundedElements.push(n)}removeTopBoundedElement(n){Et(this.topBoundedElements,n)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(n){const a=!this.resizesEnabled&&n;this.resizesEnabled=n,a&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(n,a){if(typeof a!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(n,a)}getButtonCallback(n){let a;return(a=this.flyoutButtonCallbacks.get(n))!=null?a:null}removeButtonCallback(n){this.flyoutButtonCallbacks.delete(n)}registerToolboxCategoryCallback(n,a){if(typeof a!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(n,a)}getToolboxCategoryCallback(n){return this.toolboxCategoryCallbacks.get(n)||null}removeToolboxCategoryCallback(n){this.toolboxCategoryCallbacks.delete(n)}getGesture(n){const a=n.type==="pointerdown",d=this.currentGesture_;return d?a&&d.hasStarted()?(console.warn("Tried to start the same gesture twice."),d.cancel(),null):d:a?this.currentGesture_=new Dm(n,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(n=!1){fl(),cl(),ca(),this.hideComponents(n)}hideComponents(n=!1){this.getComponentManager().getComponents(ba.Capability.AUTOHIDEABLE,!0).forEach(a=>a.autoHide(n))}static setTopLevelWorkspaceMetrics_(n){const a=this.getMetrics();typeof n.x=="number"&&(this.scrollX=-(a.scrollLeft+(a.scrollWidth-a.viewWidth)*n.x)),typeof n.y=="number"&&(this.scrollY=-(a.scrollTop+(a.scrollHeight-a.viewHeight)*n.y)),this.translate(this.scrollX+a.absoluteLeft,this.scrollY+a.absoluteTop)}},TE=class extends f{constructor(n,a){super(a),this.type=Ha,this.isOpen=n}toJson(){const n=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return n.isOpen=this.isOpen,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new TE),a.isOpen=n.isOpen,a}};i(Lt.EVENT,Ha,TE);var EE=class extends _p{constructor(n){if(super(n),this.type=t.DELETE$$module$build$src$core$events$utils,n){if(n.getParent())throw Error("Connected blocks cannot be deleted.");n.isShadow()&&(this.recordUndo=!1),this.oldXml=Kn(n),this.ids=_e(n),this.wasShadow=n.isShadow(),this.oldJson=qr(n,{addCoordinates:!0})}}toJson(){const n=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return n.oldXml=bi(this.oldXml),n.ids=this.ids,n.wasShadow=this.wasShadow,n.oldJson=this.oldJson,this.recordUndo||(n.recordUndo=this.recordUndo),n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new EE),a.oldXml=t.textToDom$$module$build$src$core$utils$xml(n.oldXml),a.ids=n.ids,a.wasShadow=n.wasShadow||a.oldXml.tagName.toLowerCase()==="shadow",a.oldJson=n.oldJson,n.recordUndo!==void 0&&(a.recordUndo=n.recordUndo),a}run(n){const a=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(n)for(n=0;n<this.ids.length;n++){const d=this.ids[n],b=a.getBlockById(d);b?b.dispose(!1):d===this.blockId&&console.warn("Can't delete non-existent block: "+d)}else Un(this.oldJson,a)}};i(Lt.EVENT,t.DELETE$$module$build$src$core$events$utils,EE);var g0=class{constructor(n,a,d){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.isInsertionMarker_=this.disposing=!1,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=n,this.id=d&&!n.getBlockById(d)?d:se(),n.setBlockById(this.id,this),this.xy_=new tn(0,0),this.isInFlyout=n.isFlyout,this.isInMutator=n.isMutator,this.RTL=n.RTL,a){if(this.type=a,d=Rr[a],!d||typeof d!="object")throw TypeError("Invalid block definition for type: "+a);Object.assign(this,d)}n.addTopBlock(this),n.addTypedBlock(this),new.target===g0&&this.doInit_()}doInit_(){const n=t.getGroup$$module$build$src$core$events$utils();n||t.setGroup$$module$build$src$core$events$utils(!0);const a=ae();try{typeof this.init=="function"&&(fe(!1),this.init(),fe(a)),q()&&he(new(xe(t.CREATE$$module$build$src$core$events$utils))(this))}finally{t.setGroup$$module$build$src$core$events$utils(n),fe(a)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(n){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(n),q()&&he(new(xe(t.DELETE$$module$build$src$core$events$utils))(this)),this.workspace.removeTopBlock(this),this.disposeInternal())}disposeInternal(){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0,typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(n=>n.disposeInternal()),this.inputList.forEach(n=>n.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(n=>n.dispose()),this.disposed=!0)}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(const n of this.inputList)for(const a of n.fieldRow)a.initModel&&a.initModel()}unplug(n){this.outputConnection&&this.unplugFromRow_(n),this.previousConnection&&this.unplugFromStack_(n)}unplugFromRow_(n){let a=null,d;(d=this.outputConnection)!=null&&d.isConnected()&&(a=this.outputConnection.targetConnection,this.outputConnection.disconnect()),a&&n&&(n=this.getOnlyValueConnection_())&&n.isConnected()&&!n.targetBlock().isShadow()&&(n=n.targetConnection,n==null||n.disconnect(),this.workspace.connectionChecker.canConnect(n,a,!1)?a.connect(n):n==null||n.onFailedConnect(a))}getOnlyValueConnection_(){let n=null;for(let a=0;a<this.inputList.length;a++){const d=this.inputList[a].connection;if(d&&d.type===En.INPUT_VALUE&&d.targetConnection){if(n)return null;n=d}}return n}unplugFromStack_(n){let a=null;var d;if((d=this.previousConnection)!=null&&d.isConnected()&&(a=this.previousConnection.targetConnection,this.previousConnection.disconnect()),d=this.getNextBlock(),n&&d&&!d.isShadow()){let b,R;n=(R=(b=this.nextConnection)==null?void 0:b.targetConnection)!=null?R:null,n==null||n.disconnect(),a&&this.workspace.connectionChecker.canConnect(a,n,!1)&&a.connect(n)}}getConnections_(n){n=[],this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection);for(let a=0,d;d=this.inputList[a];a++)d.connection&&n.push(d.connection);return n}lastConnectionInStack(n){let a=this.nextConnection;for(;a;){const d=a.targetBlock();if(!d||n&&d.isShadow())return a;a=d.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(n){for(let a=0,d;d=this.inputList[a];a++)if(d.connection&&d.connection.targetBlock()===n)return d;return null}getSurroundParent(){let n=this,a;do if(a=n,n=n.getParent(),!n)return null;while(n.getNextBlock()===a);return n}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let n,a=this;do n=a,a=n.parentBlock_;while(a);return n}getTopStackBlock(){let n=this,a;do a=n.getPreviousBlock();while(a&&a.getNextBlock()===n&&(n=a));return n}getChildren(n){if(!n)return this.childBlocks_;n=[];for(let d=0,b;b=this.inputList[d];d++)if(b.connection){var a=b.connection.targetBlock();a&&n.push(a)}return(a=this.getNextBlock())&&n.push(a),n}setParent(n){if(n!==this.parentBlock_){var a=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),d=!!a;if(d&&n&&a!==n)throw Error("Block connected to superior one that is not new parent.");if(!d&&n)throw Error("Block not connected to new parent.");if(d&&!n)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?Et(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=n)?n.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(n){const a=[this],d=this.getChildren(n);for(let b,R=0;b=d[R];R++)a.push(...b.getDescendants(n));return a}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable_}setDeletable(n){this.deletable_=n}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable_}setMovable(n){this.movable_=n}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(V(this,!0)):!0}isShadow(){return this.isShadow_}setShadow(n){this.isShadow_=n}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(n){this.isInsertionMarker_=n}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable_}setEditable(n){this.editable_=n;for(let a=0,d;d=this.inputList[a];a++)for(let b=0,R;R=d.fieldRow[b];b++)R.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const n of this.inputList)if(n.connection||1<n.fieldRow.length)return!1;return!0}getMatchingConnection(n,a){const d=this.getConnections_(!0);if(n=n.getConnections_(!0),d.length!==n.length)throw Error("Connection lists did not match in length.");for(let b=0;b<n.length;b++)if(n[b]===a)return d[b];return null}setHelpUrl(n){this.helpUrl=n}setTooltip(n){this.tooltip=n}getTooltip(){return ha(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(n){n=Qi(n),this.hue_=n.hue,this.colour_=n.hex}setStyle(n){this.styleName_=n}setOnChange(n){if(n&&typeof n!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=n,this.onchangeWrapper_=n.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(n){if(typeof n!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(n===void 0?"nothing":n+" of type "+typeof n)+" instead");for(let a=0,d;d=this.inputList[a];a++)for(let b=0,R;R=d.fieldRow[b];b++)if(R.name===n)return R;return null}getVars(){const n=[];for(let a=0,d;d=this.inputList[a];a++)for(let b=0,R;R=d.fieldRow[b];b++)R.referencesVariables()&&n.push(R.getValue());return n}getVarModels(){const n=[];for(let a=0,d;d=this.inputList[a];a++)for(let b=0,R;R=d.fieldRow[b];b++)if(R.referencesVariables()){const G=this.workspace.getVariableById(R.getValue());G&&n.push(G)}return n}updateVarName(n){for(let a=0,d;d=this.inputList[a];a++)for(let b=0,R;R=d.fieldRow[b];b++)R.referencesVariables()&&n.getId()===R.getValue()&&R.refreshVariableName()}renameVarById(n,a){for(let d=0,b;b=this.inputList[d];d++)for(let R=0,G;G=b.fieldRow[R];R++)G.referencesVariables()&&n===G.getValue()&&G.setValue(a)}getFieldValue(n){return(n=this.getField(n))?n.getValue():null}setFieldValue(n,a){const d=this.getField(a);if(!d)throw Error('Field "'+a+'" not found.');d.setValue(n)}setPreviousStatement(n,a){if(n)a===void 0&&(a=null),this.previousConnection||(this.previousConnection=this.makeConnection_(En.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(a);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(n,a){if(n)a===void 0&&(a=null),this.nextConnection||(this.nextConnection=this.makeConnection_(En.NEXT_STATEMENT)),this.nextConnection.setCheck(a);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(n,a){if(n)a===void 0&&(a=null),this.outputConnection||(this.outputConnection=this.makeConnection_(En.OUTPUT_VALUE)),this.outputConnection.setCheck(a);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(n){this.inputsInline!==n&&(he(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this,"inline",null,this.inputsInline,n)),this.inputsInline=n)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var n=1;n<this.inputList.length;n++)if(this.inputList[n-1]instanceof Vf&&this.inputList[n]instanceof Vf)return!1;for(n=1;n<this.inputList.length;n++)if(this.inputList[n-1]instanceof t.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[n]instanceof Vf)return!0;for(n=0;n<this.inputList.length;n++)if(this.inputList[n]instanceof Pm)return!0;return!1}setOutputShape(n){this.outputShape_=n}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(n){if(this.isEnabled()!==n){const a=this.disabled;this.disabled=!n,he(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this,"disabled",null,a,!n))}}getInheritedDisabled(){let n=this.getSurroundParent();for(;n;){if(n.disabled)return!0;n=n.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(n){this.collapsed_!==n&&(he(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this,"collapsed",null,this.collapsed_,n)),this.collapsed_=n)}toString(n,a){a=this.toTokens(a);for(let b=2;b<a.length;b++)a[b-2]==="("&&a[b]===")"&&(a[b-2]=a[b-1],a.splice(b-1,2));let d="";return a=a.reduce((b,R)=>(b=b+(d==="("||R===")"?"":" ")+R,d=R[R.length-1],b),""),a=a.trim()||"???",n&&a.length>n&&(a=a.substring(0,n-3)+"..."),a}toTokens(n="?"){const a=[];for(const b of this.inputList)if(b.name!=g_){for(const R of b.fieldRow)a.push(R.getText());if(b.connection){const R=b.connection.targetBlock();if(R){var d=b.connection;let G=d.getCheck();!G&&d.targetConnection&&(G=d.targetConnection.getCheck()),(d=!!G&&(G.indexOf("Boolean")!==-1||G.indexOf("Number")!==-1))&&a.push("("),a.push(...R.toTokens(n)),d&&a.push(")")}else a.push(n)}}return a}appendValueInput(n){return this.appendInput(new t.ValueInput$$module$build$src$core$inputs$value_input(n,this))}appendStatementInput(n){return this.statementInputCount++,this.appendInput(new ld(n,this))}appendDummyInput(n=""){return this.appendInput(new Vf(n,this))}appendEndRowInput(n=""){return this.appendInput(new Pm(n,this))}appendInput(n){return this.inputList.push(n),n}appendInputFromRegistry(n,a){return(n=h(Lt.INPUT,n,!1))?this.appendInput(new n(a,this)):null}jsonInit(n){var a=n.type?'Block "'+n.type+'": ':"";if(n.output&&n.previousStatement)throw Error(a+"Must not have both an output and a previousStatement.");for(var d=0;n["args"+d];){if(n["message"+d]===void 0)throw Error(a+`args${d} must have a corresponding message (message${d}).`);d++}if(n.style&&n.style.hat&&(this.hat=n.style.hat,n.style=null),n.style&&n.colour)throw Error(a+"Must not have both a colour and a style.");for(n.style?this.jsonInitStyle_(n,a):this.jsonInitColour_(n,a),d=0;n["message"+d]!==void 0;)this.interpolate_(n["message"+d],n["args"+d]||[],n["implicitAlign"+d]||n["lastDummyAlign"+d],a),d++;if(n.inputsInline!==void 0&&(t.disable$$module$build$src$core$events$utils(),this.setInputsInline(n.inputsInline),t.enable$$module$build$src$core$events$utils()),n.output!==void 0&&this.setOutput(!0,n.output),n.outputShape!==void 0&&this.setOutputShape(n.outputShape),n.previousStatement!==void 0&&this.setPreviousStatement(!0,n.previousStatement),n.nextStatement!==void 0&&this.setNextStatement(!0,n.nextStatement),n.tooltip!==void 0&&(d=Er(n.tooltip),this.setTooltip(d)),n.enableContextMenu!==void 0&&(this.contextMenu=!!n.enableContextMenu),n.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!n.suppressPrefixSuffix),n.helpUrl!==void 0&&(d=Er(n.helpUrl),this.setHelpUrl(d)),typeof n.extensions=="string"&&(console.warn(a+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+n.type+"' block."),n.extensions=[n.extensions]),n.mutator!==void 0&&Si(n.mutator,this,!0),n=n.extensions,Array.isArray(n))for(a=0;a<n.length;a++)Si(n[a],this,!1)}jsonInitColour_(n,a){if("colour"in n)if(n.colour===void 0)console.warn(a+"Undefined colour value.");else{n=n.colour;try{this.setColour(n)}catch{console.warn(a+"Illegal colour value: ",n)}}}jsonInitStyle_(n,a){n=n.style;try{this.setStyle(n)}catch{console.warn(a+"Style does not exist: ",n)}}mixin(n,a){if(a!==void 0&&typeof a!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!a){a=[];for(const d in n)this[d]!==void 0&&a.push(d);if(a.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(a))}Object.assign(this,n)}interpolate_(n,a,d,b){n=Jo(n),this.validateTokens_(n,a.length),a=this.interpolateArguments_(n,a,d),d=[];for(let R=0,G;G=a[R];R++)if(this.isInputKeyword_(G.type)){if(n=this.inputFromJson_(G,b)){for(let ce=0,Oe;Oe=d[ce];ce++)n.appendField(Oe[0],Oe[1]);d.length=0}}else(n=this.fieldFromJson_(G))&&d.push([n,G.name])}validateTokens_(n,a){const d=[];let b=0;for(let R=0;R<n.length;R++){const G=n[R];if(typeof G=="number"){if(1>G||G>a)throw Error('Block "'+this.type+'": Message index %'+G+" out of range.");if(d[G])throw Error('Block "'+this.type+'": Message index %'+G+" duplicated.");d[G]=!0,b++}}if(b!==a)throw Error('Block "'+this.type+'": Message does not reference all '+a+" arg(s).")}interpolateArguments_(n,a,d){const b=[];for(let G=0;G<n.length;G++){var R=n[G];if(typeof R=="number"&&(R=a[R-1]),typeof R=="string"){if(R===`
`)R={type:"input_end_row"},d&&(R.align=d);else if(R=this.stringToFieldJson_(R),!R)continue}b.push(R)}return(n=b.length)&&!this.isInputKeyword_(b[n-1].type)&&(n={type:"input_dummy"},d&&(n.align=d),b.push(n)),b}fieldFromJson_(n){const a=t.fromJson$$module$build$src$core$field_registry(n);return!a&&n.alt?typeof n.alt=="string"?(n=this.stringToFieldJson_(n.alt))?this.fieldFromJson_(n):null:this.fieldFromJson_(n.alt):a}inputFromJson_(n,a){var d={LEFT:t.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:t.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:t.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:t.Align$$module$build$src$core$inputs$align.CENTRE};let b;switch(n.type){case"input_value":b=this.appendValueInput(n.name);break;case"input_statement":b=this.appendStatementInput(n.name);break;case"input_dummy":b=this.appendDummyInput(n.name);break;case"input_end_row":b=this.appendEndRowInput(n.name);break;default:b=this.appendInputFromRegistry(n.type,n.name)}return b?(n.check&&b.setCheck(n.check),n.align&&(d=d[n.align.toUpperCase()],d===void 0?console.warn(a+"Illegal align value: ",n.align):b.setAlign(d)),b):null}isInputKeyword_(n){return n==="input_value"||n==="input_statement"||n==="input_dummy"||n==="input_end_row"||u(Lt.INPUT,n)}stringToFieldJson_(n){return(n=n.trim())?{type:"field_label",text:n}:null}moveInputBefore(n,a){if(n!==a){var d=-1,b=a?-1:this.inputList.length;for(let R=0,G;G=this.inputList[R];R++)if(G.name===n){if(d=R,b!==-1)break}else if(a&&G.name===a&&(b=R,d!==-1))break;if(d===-1)throw Error('Named input "'+n+'" not found.');if(b===-1)throw Error('Reference input "'+a+'" not found.');this.moveNumberedInputBefore(d,b)}}moveNumberedInputBefore(n,a){if(n===a)throw Error("Can't move input to itself.");if(n>=this.inputList.length)throw RangeError("Input index "+n+" out of bounds.");if(a>this.inputList.length)throw RangeError("Reference input "+a+" out of bounds.");const d=this.inputList[n];this.inputList.splice(n,1),n<a&&a--,this.inputList.splice(a,0,d)}removeInput(n,a){for(let d=0,b;b=this.inputList[d];d++)if(b.name===n)return b instanceof ld&&this.statementInputCount--,b.dispose(),this.inputList.splice(d,1),!0;if(a)return!1;throw Error("Input not found: "+n)}getInput(n){for(let a=0,d;d=this.inputList[a];a++)if(d.name===n)return d;return null}getInputTargetBlock(n){return(n=this.getInput(n))&&n.connection&&n.connection.targetBlock()}getCommentText(){let n,a;return(a=(n=this.getIcon(Mh.TYPE))==null?void 0:n.getText())!=null?a:null}setCommentText(n){var a;let d;const b=(d=(a=this.getIcon(Mh.TYPE))==null?void 0:a.getText())!=null?d:null;b!==n&&(n!==null?((a=this.getIcon(Mh.TYPE))||(a=this.addIcon(new Mh(this))),t.disable$$module$build$src$core$events$utils(),a.setText(n),t.enable$$module$build$src$core$events$utils()):this.removeIcon(Mh.TYPE),he(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this,"comment",null,b,n)))}setWarningText(n,a){}setMutator(n){}addIcon(n){if(this.hasIcon(n.getType()))throw new cE(n);return this.icons.push(n),this.icons.sort((a,d)=>a.getWeight()-d.getWeight()),n}removeIcon(n){if(!this.hasIcon(n))return!1;let a;return(a=this.getIcon(n))==null||a.dispose(),this.icons=this.icons.filter(d=>!d.getType().equals(n)),!0}hasIcon(n){return this.icons.some(a=>a.getType().equals(n))}getIcon(n){return n instanceof so?this.icons.find(a=>a.getType().equals(n)):this.icons.find(a=>a.getType().toString()===n)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy_}moveBy(n,a,d){if(this.parentBlock_)throw Error("Block has parent");const b=new(xe(t.MOVE$$module$build$src$core$events$utils))(this);d&&b.setReason(d),this.xy_.translate(n,a),b.recordNew(),he(b)}makeConnection_(n){return new ki(this,n)}allInputsFilled(n){if(n===void 0&&(n=!0),!n&&this.isShadow())return!1;for(let d=0,b;b=this.inputList[d];d++)if(b.connection){var a=b.connection.targetBlock();if(!a||!a.allInputsFilled(n))return!1}return(a=this.getNextBlock())?a.allInputsFilled(n):!0}toDevString(){let n=this.type?'"'+this.type+'" block':"Block";return this.id&&(n+=' (id="'+this.id+'")'),n}};g0.COLLAPSED_INPUT_NAME=g_,g0.COLLAPSED_FIELD_NAME=Ib;var Vw=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(n){this.drawer=n}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(n){const a=this.curNode;this.curNode=n,this.drawer&&this.drawer.draw(a,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},$E=class extends Vw{constructor(){super(),this.type="cursor"}next(){var n=this.getCurNode();if(!n)return null;for(n=n.next();n&&n.next()&&(n.getType()===Vt.types.NEXT||n.getType()===Vt.types.BLOCK);)n=n.next();return n&&this.setCurNode(n),n}in(){var n=this.getCurNode();if(!n)return null;(n.getType()===Vt.types.PREVIOUS||n.getType()===Vt.types.OUTPUT)&&(n=n.next());let a,d;return(n=(d=(a=n)==null?void 0:a.in())!=null?d:null)&&this.setCurNode(n),n}prev(){var n=this.getCurNode();if(!n)return null;for(n=n.prev();n&&n.prev()&&(n.getType()===Vt.types.NEXT||n.getType()===Vt.types.BLOCK);)n=n.prev();return n&&this.setCurNode(n),n}out(){var n=this.getCurNode();return n?((n=n.out())&&n.getType()===Vt.types.BLOCK&&(n=n.prev()||n),n&&this.setCurNode(n),n):null}};i(Lt.CURSOR,Ua,$E);var Hv=class extends $E{constructor(){super()}next(){var n=this.getCurNode();return n?((n=this.getNextNode_(n,this.validNode_))&&this.setCurNode(n),n):null}in(){return this.next()}prev(){var n=this.getCurNode();return n?((n=this.getPreviousNode_(n,this.validNode_))&&this.setCurNode(n),n):null}out(){return this.prev()}getNextNode_(n,a){if(!n)return null;const d=n.in()||n.next();return a(d)?d:d?this.getNextNode_(d,a):(n=this.findSiblingOrParent(n.out()),a(n)?n:n?this.getNextNode_(n,a):null)}getPreviousNode_(n,a){if(!n)return null;let d=n.prev();return d=d?this.getRightMostChild(d):n.out(),a(d)?d:d?this.getPreviousNode_(d,a):null}validNode_(n){let a=!1;return n=n&&n.getType(),(n===Vt.types.OUTPUT||n===Vt.types.INPUT||n===Vt.types.FIELD||n===Vt.types.NEXT||n===Vt.types.PREVIOUS||n===Vt.types.WORKSPACE)&&(a=!0),a}findSiblingOrParent(n){if(!n)return null;const a=n.next();return a||this.findSiblingOrParent(n.out())}getRightMostChild(n){if(!n.in())return n;for(n=n.in();n&&n.next();)n=n.next();return this.getRightMostChild(n)}};Hv.registrationName="basicCursor",i(Lt.CURSOR,Hv.registrationName,Hv);var jw=class extends Hv{validNode_(n){let a=!1;const d=n&&n.getType();return n&&(n=n.getLocation(),d===Vt.types.FIELD&&n&&n.isTabNavigable()&&n.isClickable()&&(a=!0)),a}},SE=10,Ah=class extends ki{constructor(n,a){super(n,a),this.highlighted=!1,this.targetConnection=null,this.db=n.workspace.connectionDBList[a],this.dbOpposite=n.workspace.connectionDBList[jt[a]],this.offsetInBlock=new tn(0,0),this.trackedState=Ah.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===Ah.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let n,a;(a=(n=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||a.call(n,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(n){const a=this.x-n.x;return n=this.y-n.y,Math.sqrt(a*a+n*n)}bumpAwayFrom(n){if(!this.sourceBlock_.workspace.isDragging()){var a=this.sourceBlock_.getRootBlock();if(!a.isInFlyout){var d=!1;if(!a.isMovable()){if(a=n.getSourceBlock().getRootBlock(),!a.isMovable())return;n=this,d=!0}var b=k()==a;b||a.addSelect();var R=n.x+t.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*SE)-this.x,G=n.y+t.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*SE)-this.y;d&&(G=-G),a.RTL&&(R=n.x-t.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*SE)-this.x),a.moveBy(R,G,["bump"]),b||a.removeSelect()}}}moveTo(n,a){let d=!1;return this.trackedState===Ah.TrackedState.WILL_TRACK?(this.db.addConnection(this,a),this.trackedState=Ah.TrackedState.TRACKED,d=!0):this.trackedState===Ah.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,a),d=!0),this.x=n,this.y=a,d}moveBy(n,a){return this.moveTo(this.x+n,this.y+a)}moveToOffset(n){return this.moveTo(n.x+this.offsetInBlock.x,n.y+this.offsetInBlock.y)}setOffsetInBlock(n,a){this.offsetInBlock.x=n,this.offsetInBlock.y=a}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var n=this.targetConnection;const a=this.targetBlock();n&&a&&(n=tn.difference(this.offsetInBlock,n.offsetInBlock),a.translate(n.x,n.y))}closest(n,a){return this.dbOpposite.searchForClosest(this,n,a)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(n){n&&this.trackedState===Ah.TrackedState.TRACKED||!n&&this.trackedState===Ah.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(n?(this.db.addConnection(this,this.y),this.trackedState=Ah.TrackedState.TRACKED):(this.trackedState===Ah.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=Ah.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const n=this.targetBlock().getDescendants(!1);for(let a=0;a<n.length;a++){const d=n[a],b=d.getConnections_(!0);for(let R=0;R<b.length;R++)b[R].setTracking(!1);for(const R of d.getIcons())gl(R)&&R.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let n=[];if(this.type!==En.INPUT_VALUE&&this.type!==En.NEXT_STATEMENT)return n;const a=this.targetBlock();if(a){let d;a.isCollapsed()?(d=[],a.outputConnection&&d.push(a.outputConnection),a.nextConnection&&d.push(a.nextConnection),a.previousConnection&&d.push(a.previousConnection)):d=a.getConnections_(!0);for(let b=0;b<d.length;b++)n.push(...d[b].startTrackingAll());n.length||(n=[a])}return n}onFailedConnect(n){const a=this.getSourceBlock();if(ae()){const d=t.getGroup$$module$build$src$core$events$utils();setTimeout((function(){a.isDisposed()||a.getParent()||(t.setGroup$$module$build$src$core$events$utils(d),this.bumpAwayFrom(n),t.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),t.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(n=!0){const{parentConnection:a,childConnection:d}=this.getParentAndChildConnections();if(a&&d){var b=a.getSourceBlock(),R=d.getSourceBlock();super.disconnectInternal(n),b.rendered&&b.queueRender(),R.rendered&&(R.updateDisabled(),R.queueRender(),R.getSvgRoot().style.display="block")}}respawnShadow_(){super.respawnShadow_();const n=this.targetBlock();n&&(n.initSvg(),n.queueRender())}neighbours(n){return this.dbOpposite.getNeighbours(this,n)}connect_(n){super.connect_(n);var a=this.getSourceBlock();n=n.getSourceBlock();const d=a.rendered,b=n.rendered;d&&a.updateDisabled(),b&&n.updateDisabled(),d&&b&&(this.type===En.NEXT_STATEMENT||this.type===En.PREVIOUS_STATEMENT?n.queueRender():a.queueRender()),(a=a.getInputWithBlock(n))&&(a=a.isVisible(),n.getSvgRoot().style.display=a?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}setCheck(n){return super.setCheck(n),this.sourceBlock_.rendered&&this.sourceBlock_.queueRender(),this}};(function(n){n=n.TrackedState||(n.TrackedState={}),n[n.WILL_TRACK=-1]="WILL_TRACK",n[n.UNTRACKED=0]="UNTRACKED",n[n.TRACKED=1]="TRACKED"})(Ah||(Ah={})),Ah.TrackedState;var jf=class extends g0{constructor(n,a,d){super(n,a,d),this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.visuallyDisabled=this.rendered=!1,this.translation="",this.bumpNeighboursPid=0,this.dragging=!1,this.relativeCoords=new tn(0,0),this.workspace=n,this.svgGroup_=Z(Be.G,{}),this.style=n.getRenderer().getConstants().getBlockStyle(null),this.pathObject=n.getRenderer().makePathObject(this.svgGroup_,this.style),n=this.pathObject.svgPath,n.tooltip=this,ei(n),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let a=0,d;d=this.inputList[a];a++)d.init();for(var n of this.getIcons())n.initView(this.createIconPointerDownListener(n)),n.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),n=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!n||we(n,"pointerdown",this,this.onMouseDown_),this.eventsInit_=!0,n.parentNode||this.workspace.getCanvas().appendChild(n)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(k()!==this){var n=null;if(k()){n=k().id,t.disable$$module$build$src$core$events$utils();try{k().unselect()}finally{t.enable$$module$build$src$core$events$utils()}}n=new(xe(Ns))(n,this.id,this.workspace.id),he(n),D(this),this.addSelect()}}unselect(){if(k()===this){var n=new(xe(Ns))(this.id,null,this.workspace.id);n.workspaceId=this.workspace.id,he(n),D(null),this.removeSelect()}}setParent(n){const a=this.parentBlock_;if(n!==a){J(),super.setParent(n),oe();var d=this.getSvgRoot();if(!this.workspace.isClearing&&d){var b=this.getRelativeToSurfaceXY();n?n.getSvgRoot().appendChild(d):a&&((n=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(d,n):this.workspace.getCanvas().appendChild(d),this.translate(b.x,b.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const n=this.workspace.getLayerManager();if(!n)throw Error("Cannot calculate position because the workspace has not been appended");let a=0,d=0,b=this.getSvgRoot();if(b)do{const R=Qn(b);a+=R.x,d+=R.y,b=b.parentNode}while(b&&!n.hasLayer(b));return new tn(a,d)}moveBy(n,a,d){if(this.parentBlock_)throw Error("Block has parent");const b=q();let R=null;b&&(R=new(xe(t.MOVE$$module$build$src$core$events$utils))(this),d&&R.setReason(d)),n=new tn(n,a),a=this.getRelativeToSurfaceXY(),n=tn.sum(a,n),this.translate(n.x,n.y),this.updateComponentLocations(n),b&&R&&(R.recordNew(),he(R)),this.workspace.resizeContents()}translate(n,a){this.translation=`translate(${n}, ${a})`,this.relativeCoords=new tn(n,a),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(n,a){const d=this.getRelativeToSurfaceXY();this.moveBy(n.x-d.x,n.y-d.y,a)}moveDuringDrag(n){this.translate(n.x,n.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(n)}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var n=this.workspace.getGrid();if(n&&n.shouldSnap()){var a=n.getSpacing(),d=a/2,b=this.getRelativeToSurfaceXY();n=Math.round(Math.round((b.x-d)/a)*a+d-b.x),a=Math.round(Math.round((b.y-d)/a)*a+d-b.y),(n||a)&&this.moveBy(n,a,["snap"])}}}getBoundingRectangle(){const n=this.getRelativeToSurfaceXY(),a=this.getHeightWidth();let d,b;return this.RTL?(d=n.x-a.width,b=n.x):(d=n.x,b=n.x+a.width),new gi(n.y,n.y+a.height,d,b)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let n=0,a;a=this.inputList[n];n++)a.markDirty()}setCollapsed(n){this.collapsed_!==n&&(super.setCollapsed(n),this.updateCollapsed_())}updateCollapsed_(){var n=this.isCollapsed();const a=g_,d=Ib;for(let R=0,G;G=this.inputList[R];R++)G.name!==a&&G.setVisible(!n);for(var b of this.getIcons())b.updateCollapsed();n?(n=this.toString(Ke),(b=this.getField(d))?b.setValue(n):(this.getInput(a)||this.appendDummyInput(a)).appendField(new na(n),d)):(this.updateDisabled(),this.removeInput(a))}tab(n,a){const d=new jw;d.setCurNode(Vt.createFieldNode(n)),n=d.getCurNode(),a?d.next():d.prev(),(a=d.getCurNode())&&a!==n&&(a.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(a))}onMouseDown_(n){const a=this.workspace.getGesture(n);a&&a.handleBlockStart(n,this)}showHelp(){const n=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;n&&window.open(n)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const n=Kr.registry.getContextMenuOptions(Kr.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(n),n}showContextMenu(n){const a=this.generateContextMenu();a&&a.length&&(gu(n,a,this.RTL),Gh(this))}updateComponentLocations(n){if(this.rendered){this.dragging||this.updateConnectionLocations(n),this.updateIconLocations(n),this.updateFieldLocations(n);for(const a of this.getChildren(!1))a.updateComponentLocations(tn.sum(n,a.relativeCoords))}}updateConnectionLocations(n){for(const a of this.getConnections_(!1))a.moveToOffset(n)}updateIconLocations(n){for(const a of this.getIcons())a.onLocationChange(n)}updateFieldLocations(n){for(const a of this.inputList)for(const d of a.fieldRow)d.onLocationChange(n)}setDragging(n){(this.dragging=n)?(this.translation="",bs.push(...this.getConnections_(!0)),ke(this.svgGroup_,"blocklyDragging")):(bs.length=0,mt(this.svgGroup_,"blocklyDragging"));for(let a=0;a<this.childBlocks_.length;a++)this.childBlocks_[a].setDragging(n)}setMovable(n){super.setMovable(n),this.pathObject.updateMovable(n)}setEditable(n){super.setEditable(n),n=this.getIcons();for(let a=0;a<n.length;a++)n[a].updateEditable()}setShadow(n){super.setShadow(n),this.applyColour()}setInsertionMarker(n){this.isInsertionMarker_!==n&&(this.isInsertionMarker_=n)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(n,a){this.isDeadOrDying()||(Md(),Fl(),a&&this.rendered&&(this.unplug(n),gc(this)),super.dispose(!!n),ut(this.svgGroup_))}disposeInternal(){this.isDeadOrDying()||(super.disposeInternal(),this.rendered=!1,k()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(n=>clearTimeout(n)),this.warningTextDb.clear(),this.getIcons().forEach(n=>n.dispose()))}checkAndDelete(){this.workspace.isFlyout||(t.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),t.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:Mm.TYPE,blockState:qr(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:V(this,!0)}}applyColour(){this.pathObject.applyColour(this);const n=this.getIcons();for(let a=0;a<n.length;a++)n[a].applyColour();for(let a=0,d;d=this.inputList[a];a++)for(let b=0,R;R=d.fieldRow[b];b++)R.applyColour()}updateDisabled(){const n=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===n){let a;(a=this.getNextBlock())==null||a.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=n;for(const a of this.getChildren(!1))a.updateDisabled()}}getCommentIcon(){be("getCommentIcon","v10","v11","getIcon");let n;return(n=this.getIcon(Mh.TYPE))!=null?n:null}setWarningText(n,a=""){if(a)this.warningTextDb.has(a)&&(clearTimeout(this.warningTextDb.get(a)),this.warningTextDb.delete(a));else{for(var d of this.warningTextDb.values())clearTimeout(d);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(a,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(a),this.setWarningText(n,a))},100));else if(this.isInFlyout&&(n=null),d=this.getIcon(nf.TYPE),n){let b=this.getSurroundParent(),R=null;for(;b;)b.isCollapsed()&&(R=b),b=b.getSurroundParent();R&&R.setWarningText(t.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,jf.COLLAPSED_WARNING_ID),d?d.addMessage(n,a):this.addIcon(new nf(this).addMessage(n,a))}else d&&(a?(d.addMessage("",a),d.getText()||this.removeIcon(nf.TYPE)):this.removeIcon(nf.TYPE))}setMutator(n){this.removeIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),n&&this.addIcon(n)}addIcon(n){return super.addIcon(n),n instanceof nf&&(this.warning=n),n instanceof t.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=n),this.rendered&&(n.initView(this.createIconPointerDownListener(n)),n.applyColour(),n.updateEditable(),this.queueRender(),Bi(),this.bumpNeighbours()),n}createIconPointerDownListener(n){return a=>{this.isDeadOrDying()||(a=this.workspace.getGesture(a))&&a.setStartIcon(n)}}removeIcon(n){const a=super.removeIcon(n);return n.equals(nf.TYPE)&&(this.warning=null),n.equals(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.rendered&&(this.queueRender(),Bi(),this.bumpNeighbours()),a}setEnabled(n){this.isEnabled()!==n&&(super.setEnabled(n),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(n){this.rendered&&this.pathObject.updateHighlighted(n)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(n){this.pathObject.updateDraggingDelete(n)}getColour(){return this.style.colourPrimary}setColour(n){super.setColour(n),n=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(n.style),this.style=n.style,this.styleName_=n.name,this.applyColour()}setStyle(n){const a=this.workspace.getRenderer().getConstants().getBlockStyle(n);if(this.styleName_=n,a)this.hat=a.hat,this.pathObject.setStyle(a),this.colour_=a.colourPrimary,this.style=a,this.applyColour();else throw Error("Invalid style name: "+n)}bringToFront(n=!1){let a=this;if(!a.isDeadOrDying())do{const d=a.getSvgRoot(),b=d.parentNode,R=b.childNodes;if(R[R.length-1]!==d&&b.appendChild(d),n)break;a=a.getParent()}while(a)}setPreviousStatement(n,a){super.setPreviousStatement(n,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setNextStatement(n,a){super.setNextStatement(n,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setOutput(n,a){super.setOutput(n,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setInputsInline(n){super.setInputsInline(n),this.rendered&&(this.queueRender(),this.bumpNeighbours())}removeInput(n,a){return n=super.removeInput(n,a),this.rendered&&(this.queueRender(),this.bumpNeighbours()),n}moveNumberedInputBefore(n,a){super.moveNumberedInputBefore(n,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}appendInput(n){return super.appendInput(n),this.rendered&&(this.queueRender(),this.bumpNeighbours()),n}setConnectionTracking(n){if(this.previousConnection&&this.previousConnection.setTracking(n),this.outputConnection&&this.outputConnection.setTracking(n),this.nextConnection){this.nextConnection.setTracking(n);var a=this.nextConnection.targetBlock();a&&a.setConnectionTracking(n)}if(!this.collapsed_)for(a=0;a<this.inputList.length;a++){var d=this.inputList[a].connection;d&&(d.setTracking(n),(d=d.targetBlock())&&d.setConnectionTracking(n))}}getConnections_(n){const a=[];if((n||this.rendered)&&(this.outputConnection&&a.push(this.outputConnection),this.previousConnection&&a.push(this.previousConnection),this.nextConnection&&a.push(this.nextConnection),n||!this.collapsed_))for(let d=0,b;b=this.inputList[d];d++)b.connection&&a.push(b.connection);return a}lastConnectionInStack(n){return super.lastConnectionInStack(n)}getMatchingConnection(n,a){return super.getMatchingConnection(n,a)}makeConnection_(n){return new Ah(this,n)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){if(!this.bumpNeighboursPid){var n=t.getGroup$$module$build$src$core$events$utils();this.bumpNeighboursPid=setTimeout(()=>{const a=t.getGroup$$module$build$src$core$events$utils();t.setGroup$$module$build$src$core$events$utils(n),this.getRootBlock().bumpNeighboursInternal(),t.setGroup$$module$build$src$core$events$utils(a),this.bumpNeighboursPid=0},t.config$$module$build$src$core$config.bumpDelay)}}bumpNeighboursInternal(){const n=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||n.isInFlyout))for(const a of this.getConnections_(!1)){if(a.isSuperior()){let d;(d=a.targetBlock())==null||d.bumpNeighboursInternal()}for(const d of a.neighbours(t.config$$module$build$src$core$config.snapRadius))d.getSourceBlock().getRootBlock()!==n&&(a.isConnected()&&d.isConnected()||(a.isSuperior()?d.bumpAwayFrom(a):a.bumpAwayFrom(d)))}}scheduleSnapAndBump(){const n=t.getGroup$$module$build$src$core$events$utils();setTimeout(()=>{t.setGroup$$module$build$src$core$events$utils(n),this.snapToGrid(),t.setGroup$$module$build$src$core$events$utils(!1)},t.config$$module$build$src$core$config.bumpDelay/2),this.bumpNeighbours()}positionNearConnection(n,a,d){if(n.type===En.NEXT_STATEMENT||n.type===En.INPUT_VALUE){let b=a.x;a=a.y,b+=d.x-n.getOffsetInBlock().x,a+=d.y-n.getOffsetInBlock().y,this.moveBy(b,a)}}getChildren(n){return super.getChildren(n)}queueRender(){return zo(this)}render(){this.queueRender(),Bi()}renderEfficiently(){this.rendered=!0,J(),this.isCollapsed()&&this.updateCollapsed_(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),oe(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const n of this.inputList){const a=n.connection;a&&a.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Ch.LOCAL_MARKER).draw();for(const n of this.inputList)for(const a of n.fieldRow)a.updateMarkers_()}setCursorSvg(n){this.pathObject.setCursorSvg(n)}setMarkerSvg(n){this.pathObject.setMarkerSvg(n)}getHeightWidth(){let n=this.height,a=this.width;var d=this.getNextBlock();if(d){d=d.getHeightWidth();const b=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;n+=d.height-b,a=Math.max(a,d.width)}return{height:n,width:a}}fadeForReplacement(n){this.pathObject.updateReplacementFade(n)}highlightShapeForInput(n,a){this.pathObject.updateShapeForInputHighlight(n,a)}};jf.INLINE=-1,jf.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var Xw=class{constructor(){}onDragEnter(n){}onDragOver(n){}onDragExit(n){}onDrop(n){}getClientRect(){return null}shouldPreventMove(n){return!1}},Rb=class extends Xw{constructor(){super(),this.wouldDelete_=!1}wouldDelete(n,a){return n instanceof jf?(n=!n.getParent()&&n.isDeletable(),this.updateWouldDelete_(n&&!a)):this.updateWouldDelete_(n.isDeletable()),this.wouldDelete_}updateWouldDelete_(n){this.wouldDelete_=n}},Yw=class extends Rb{constructor(n){super(),this.workspace=n,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(n=new Lo({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(n.toolboxPosition=this.workspace.toolboxPosition===Xn.TOP?Xn.BOTTOM:Xn.TOP,this.flyout=new(_(Lt.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(n)):(n.toolboxPosition=this.workspace.toolboxPosition===Xn.RIGHT?Xn.LEFT:Xn.RIGHT,this.flyout=new(_(Lt.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(n)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=Z(Be.G,{class:"blocklyTrash"});let n;const a=String(Math.random()).substring(2);n=Z(Be.CLIPPATH,{id:"blocklyTrashBodyClipPath"+a},this.svgGroup),Z(Be.RECT,{width:_0,height:kb,y:v0},n);const d=Z(Be.IMAGE,{width:Jl.width,x:-wE,height:Jl.height,y:-xE,"clip-path":"url(#blocklyTrashBodyClipPath"+a+")"},this.svgGroup);return d.setAttributeNS(Ts,"xlink:href",this.workspace.options.pathToMedia+Jl.url),n=Z(Be.CLIPPATH,{id:"blocklyTrashLidClipPath"+a},this.svgGroup),Z(Be.RECT,{width:_0,height:v0},n),this.svgLid=Z(Be.IMAGE,{width:Jl.width,x:-wE,height:Jl.height,y:-xE,"clip-path":"url(#blocklyTrashLidClipPath"+a+")"},this.svgGroup),this.svgLid.setAttributeNS(Ts,"xlink:href",this.workspace.options.pathToMedia+Jl.url),ze(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),ze(this.svgGroup,"pointerup",this,this.click),ze(d,"pointerover",this,this.mouseOver),ze(d,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(He(this.flyout.createDom(Be.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[ba.Capability.AUTOHIDEABLE,ba.Capability.DELETE_AREA,ba.Capability.DRAG_TARGET,ba.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&ut(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var n=this.contents.map(function(d){return JSON.parse(d)}),a=this.workspace.getParentSvg().style;a.cursor="wait",setTimeout(()=>{let d;(d=this.flyout)==null||d.show(n),a.cursor="";let b;(b=this.workspace.scrollbar)==null||b.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var n;(n=this.flyout)==null||n.hide();var a;(a=this.workspace.scrollbar)==null||a.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(n){!n&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(n,a){if(this.initialized){var d=Gi(this.workspace,n);n=wr(d,new Es(_0,kb+v0),Kw,Ob,n,this.workspace),a=Fo(n,Ob,d.vertical===tc.TOP?pp.DOWN:pp.UP,a),this.top=a.top,this.left=a.left;var b;(b=this.svgGroup)==null||b.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new gi(this.top,this.top+kb+v0,this.left,this.left+_0)}getClientRect(){if(!this.svgGroup)return null;var n=this.svgGroup.getBoundingClientRect();const a=n.top+xE-Gv;return n=n.left+wE-Gv,new gi(a,a+v0+kb+2*Gv,n,n+_0+2*Gv)}onDragOver(n){this.setLidOpen(this.wouldDelete_)}onDragExit(n){this.setLidOpen(!1)}onDrop(n){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(n){this.isLidOpen!==n&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=n,this.animateLid())}animateLid(){const n=SR;var a=1/(n+1);this.lidOpen+=this.isLidOpen?a:-a,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*Ih),a=Jw+this.lidOpen*(wR-Jw),this.svgGroup&&(this.svgGroup.style.opacity=`${a}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),CE/n))}setLidAngle(n){const a=this.workspace.toolboxPosition===Xn.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let d;(d=this.svgLid)==null||d.setAttribute("transform","rotate("+(a?-n:n)+","+(a?4:_0-4)+","+(v0-2)+")")}setMinOpenness(n){this.minOpenness=n,this.isLidOpen||this.setLidAngle(n*Ih)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(n){n=new(xe(Ha))(n,this.workspace.id),he(n)}blockMouseDownWhenOpenable(n){!this.contentsIsOpen()&&this.hasContents()&&n.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(n){if(!(0>=this.workspace.options.maxTrashcanContents||n.type!==t.DELETE$$module$build$src$core$events$utils||n.type!==t.DELETE$$module$build$src$core$events$utils||n.wasShadow)){if(!n.oldJson)throw Error("Encountered a delete event without proper oldJson");if(n=JSON.stringify(this.cleanBlockJson(n.oldJson)),this.contents.indexOf(n)===-1){for(this.contents.unshift(n);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness($R)}}}cleanBlockJson(n){function a(d){if(d){if(delete d.id,delete d.x,delete d.y,delete d.enabled,d.icons&&d.icons.comment){var b=d.icons.comment;delete b.height,delete b.width,delete b.pinned}b=d.inputs;for(var R in b){var G=b[R];const ce=G.block;G=G.shadow,ce&&a(ce),G&&a(G)}d.next&&(R=d.next,d=R.block,R=R.shadow,d&&a(d),R&&a(R))}}return n=JSON.parse(JSON.stringify(n)),a(n),Object.assign({},{kind:"BLOCK"},n)}},_0=47,kb=44,v0=16,Ob=20,Kw=20,Gv=10,wE=0,xE=32,$R=.1,CE=80,SR=4,Jw=.4,wR=.8,Ih=45,Oi=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(n,a){if(this.shortcuts.get(n.name)&&!a)throw Error(`Shortcut named "${n.name}" already exists.`);if(this.shortcuts.set(n.name,n),(a=n.keyCodes)&&0<a.length)for(let d=0;d<a.length;d++)this.addKeyMapping(a[d],n.name,!!n.allowCollision)}unregister(n){return this.shortcuts.get(n)?(this.removeAllKeyMappings(n),this.shortcuts.delete(n),!0):(console.warn(`Keyboard shortcut named "${n}" not found.`),!1)}addKeyMapping(n,a,d){n=`${n}`;const b=this.keyMap.get(n);if(b&&!d)throw Error(`Shortcut named "${a}" collides with shortcuts "${b}"`);b&&d?b.unshift(a):this.keyMap.set(n,[a])}removeKeyMapping(n,a,d){const b=this.keyMap.get(n);if(!b)return d||console.warn(`No keyboard shortcut named "${a}" registered with key code "${n}"`),!1;const R=b.indexOf(a);return-1<R?(b.splice(R,1),b.length===0&&this.keyMap.delete(n),!0):(d||console.warn(`No keyboard shortcut named "${a}" registered with key code "${n}"`),!1)}removeAllKeyMappings(n){for(const a of this.keyMap.keys())this.removeKeyMapping(a,n,!0)}setKeyMap(n){this.keyMap.clear();for(const a in n)this.keyMap.set(a,n[a])}getKeyMap(){const n=Object.create(null);for(const[a,d]of this.keyMap)n[a]=d;return n}getRegistry(){const n=Object.create(null);for(const[a,d]of this.shortcuts)n[a]=d;return ml(Object.create(null),n)}onKeyDown(n,a){var d=this.serializeKeyEvent_(a);if(d=this.getShortcutNamesByKeyCode(d),!d)return!1;for(let b=0,R;R=d[b];b++){const G=this.shortcuts.get(R);let ce,Oe;if((ce=G)==null||!ce.preconditionFn||(Oe=G)!=null&&Oe.preconditionFn(n)){let Nt,$n;if((Nt=G)!=null&&Nt.callback&&(($n=G)!=null&&$n.callback(n,a,G)))return!0}}return!1}getShortcutNamesByKeyCode(n){return this.keyMap.get(n)||[]}getKeyCodesByShortcutName(n){const a=[];for(const[d,b]of this.keyMap)-1<b.indexOf(n)&&a.push(d);return a}serializeKeyEvent_(n){let a="";for(const d in Oi.modifierKeys)n.getModifierState(d)&&(a!==""&&(a+="+"),a+=d);return a!==""&&n.keyCode?a=a+"+"+n.keyCode:n.keyCode&&(a=String(n.keyCode)),a}checkModifiers_(n){for(let a=0,d;d=n[a];a++)if(!(d in Oi.modifierKeys))throw Error(d+" is not a valid modifier key.")}createSerializedKey(n,a){let d="";if(a){this.checkModifiers_(a);for(const b in Oi.modifierKeys)-1<a.indexOf(Oi.modifierKeys[b])&&(d!==""&&(d+="+"),d+=b)}return d!==""&&n?d=d+"+"+n:n&&(d=`${n}`),d}};Oi.registry=new Oi,function(n){n=n.modifierKeys||(n.modifierKeys={}),n[n.Shift=16]="Shift",n[n.Control=17]="Control",n[n.Alt=18]="Alt",n[n.Meta=91]="Meta"}(Oi||(Oi={}));var Xf;(function(n){n.ESCAPE="escape",n.DELETE="delete",n.COPY="copy",n.CUT="cut",n.PASTE="paste",n.UNDO="undo",n.REDO="redo"})(Xf||(Xf={}));var Wv=null,Lb=null;vs();var Yf={};Yf.names=Xf,Yf.registerCopy=ls,Yf.registerCut=Eu,Yf.registerDefaultShortcuts=vs,Yf.registerDelete=$c,Yf.registerEscape=Qh,Yf.registerPaste=Ju,Yf.registerRedo=Ba,Yf.registerUndo=mo;var ME=class{constructor(n,a){this.procedureModelClass=n,this.parameterModelClass=a,this.priority=Ff}save(n){return n=n.getProcedureMap().getProcedures().map(a=>no(a)),n.length?n:null}load(n,a){const d=a.getProcedureMap();for(const b of n)d.add(Ws(this.procedureModelClass,this.parameterModelClass,b,a))}clear(n){n.getProcedureMap().clear()}},y0={};y0.ProcedureSerializer=ME,y0.loadParameter=Pa,y0.loadProcedure=Ws,y0.saveParameter=Vc,y0.saveProcedure=no;var Nb=class{constructor(){this.priority=s0}save(n){const a=[];for(const d of n.getAllVariables())n={name:d.name,id:d.getId()},d.type&&(n.type=d.type),a.push(n);return a.length?a:null}load(n,a){for(const d of n)a.createVariable(d.name,d.type,d.id)}clear(n){n.getVariableMap().clear()}};ps("variables",new Nb);var Qw={};Qw.VariableSerializer=Nb;var AE={};AE.load=hp,AE.save=Qu;var xR={blocks:Cm,exceptions:Pf,priorities:xm,procedures:y0,registry:a0,variables:Qw,workspaces:AE},IE=class{constructor(n,a,d,b,R){this.workspace=n,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,a=a===void 0?!0:a,d=d===void 0?!0:d;const G=a&&d;a&&(this.hScroll=new Oo(n,!0,G,b,R)),d&&(this.vScroll=new Oo(n,!1,G,b,R)),G&&(this.corner_=Z(Be.RECT,{height:Oo.scrollbarThickness,width:Oo.scrollbarThickness,class:"blocklyScrollbarBackground"}),He(this.corner_,n.getBubbleCanvas()))}dispose(){ut(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const n=this.workspace.getMetrics();if(n){var a=!1,d=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===n.viewWidth&&this.oldHostMetrics_.viewHeight===n.viewHeight&&this.oldHostMetrics_.absoluteTop===n.absoluteTop&&this.oldHostMetrics_.absoluteLeft===n.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===n.scrollWidth&&this.oldHostMetrics_.viewLeft===n.viewLeft&&this.oldHostMetrics_.scrollLeft===n.scrollLeft||(a=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===n.scrollHeight&&this.oldHostMetrics_.viewTop===n.viewTop&&this.oldHostMetrics_.scrollTop===n.scrollTop||(d=!0)):d=a=!0,a||d){try{t.disable$$module$build$src$core$events$utils(),this.hScroll&&a&&this.hScroll.resize(n),this.vScroll&&d&&this.vScroll.resize(n)}finally{t.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==n.viewWidth||this.oldHostMetrics_.absoluteLeft!==n.absoluteLeft){let b;(b=this.corner_)==null||b.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==n.viewHeight||this.oldHostMetrics_.absoluteTop!==n.absoluteTop){let b;(b=this.corner_)==null||b.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=n}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(n,a){this.hScroll&&this.hScroll.setOrigin(n,a),this.vScroll&&this.vScroll.setOrigin(n,a)}set(n,a,d){this.hScroll&&this.hScroll.set(n,!1),this.vScroll&&this.vScroll.set(a,!1),(d||d===void 0)&&(n={},this.hScroll&&(n.x=this.hScroll.getRatio_()),this.vScroll&&(n.y=this.vScroll.getRatio_()),this.workspace.setMetrics(n))}setX(n){this.hScroll&&this.hScroll.set(n,!0)}setY(n){this.vScroll&&this.vScroll.set(n,!0)}setContainerVisible(n){this.hScroll&&this.hScroll.setContainerVisible(n),this.vScroll&&this.vScroll.setContainerVisible(n)}isVisible(){let n=!1;return this.hScroll&&(n=this.hScroll.isVisible()),this.vScroll&&(n=n||this.vScroll.isVisible()),n}setVisible(n){this.hScroll&&this.hScroll.setVisibleInternal(n),this.vScroll&&this.vScroll.setVisibleInternal(n)}resizeContent(n){this.hScroll&&this.hScroll.resizeContentHorizontal(n),this.vScroll&&this.vScroll.resizeContentVertical(n)}resizeView(n){this.hScroll&&this.hScroll.resizeViewHorizontal(n),this.vScroll&&this.vScroll.resizeViewVertical(n)}},Db=class{constructor(n){this.workspace_=n}getDimensionsPx_(n){let a=0,d=0;return n&&(a=n.getWidth(),d=n.getHeight()),new Es(a,d)}getFlyoutMetrics(n){return n=this.getDimensionsPx_(this.workspace_.getFlyout(n)),{width:n.width,height:n.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const n=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:n.width,height:n.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let n=0,a=0;const d=this.getToolboxMetrics(),b=this.getFlyoutMetrics(),R=!!this.workspace_.getToolbox();var G;const ce=!((G=this.workspace_.getFlyout())!=null&&G.autoClose);G=R?d.position:b.position;const Oe=G===Xn.TOP;return G===Xn.LEFT&&(R&&(n+=d.width),ce&&(n+=b.width)),Oe&&(R&&(a+=d.height),ce&&(a+=b.height)),{top:a,left:n}}getViewMetrics(n){n=n?this.workspace_.scale:1;const a=this.getSvgMetrics(),d=this.getToolboxMetrics(),b=this.getFlyoutMetrics(),R=!!this.workspace_.getToolbox();var G;const ce=!((G=this.workspace_.getFlyout())!=null&&G.autoClose);G=R?d.position:b.position;const Oe=G===Xn.LEFT||G===Xn.RIGHT;return(G===Xn.TOP||G===Xn.BOTTOM)&&(R&&(a.height-=d.height),ce&&(a.height-=b.height)),Oe&&(R&&(a.width-=d.width),ce&&(a.width-=b.width)),{height:a.height/n,width:a.width/n,top:-this.workspace_.scrollY/n,left:-this.workspace_.scrollX/n}}getContentMetrics(n){n=n?1:this.workspace_.scale;const a=this.workspace_.getBlocksBoundingBox();return{height:(a.bottom-a.top)*n,width:(a.right-a.left)*n,top:a.top*n,left:a.left*n}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(n){if(!this.hasFixedEdges())return{};const a=this.workspace_.isMovableHorizontally(),d=this.workspace_.isMovableVertically();n=n||this.getViewMetrics(!1);const b={};return d||(b.top=n.top,b.bottom=n.top+n.height),a||(b.left=n.left,b.right=n.left+n.width),b}getPaddedContent_(n,a){const d=a.top+a.height,b=a.left+a.width,R=n.width;n=n.height;const G=R/2,ce=n/2;return{top:Math.min(a.top-ce,d-n),bottom:Math.max(d+ce,a.top+n),left:Math.min(a.left-G,b-R),right:Math.max(b+G,a.left+R)}}getScrollMetrics(n,a,d){n=n?this.workspace_.scale:1,a=a||this.getViewMetrics(!1);var b=d||this.getContentMetrics();d=this.getComputedFixedEdges_(a),a=this.getPaddedContent_(a,b),b=d.top!==void 0?d.top:a.top;const R=d.left!==void 0?d.left:a.left;return{top:b/n,left:R/n,width:((d.right!==void 0?d.right:a.right)-R)/n,height:((d.bottom!==void 0?d.bottom:a.bottom)-b)/n}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const n=this.getToolboxMetrics(),a=this.getFlyoutMetrics(!0),d=this.getSvgMetrics(),b=this.getAbsoluteMetrics(),R=this.getViewMetrics(),G=this.getContentMetrics(),ce=this.getScrollMetrics(!1,R,G);return{contentHeight:G.height,contentWidth:G.width,contentTop:G.top,contentLeft:G.left,scrollHeight:ce.height,scrollWidth:ce.width,scrollTop:ce.top,scrollLeft:ce.left,viewHeight:R.height,viewWidth:R.width,viewTop:R.top,viewLeft:R.left,absoluteTop:b.top,absoluteLeft:b.left,svgHeight:d.height,svgWidth:d.width,toolboxWidth:n.width,toolboxHeight:n.height,toolboxPosition:n.position,flyoutWidth:a.width,flyoutHeight:a.height}}};i(Lt.METRICS_MANAGER,Ua,Db);var qw=class extends c{constructor(n){super(),this.isBlank=!0,this.recordUndo=!1,this.type=jl,this.isBlank=!!n,n&&(this.workspaceId=n.id)}};i(Lt.EVENT,jl,qw);var RE=class extends f{constructor(n,a,d){super(n?n.workspace.id:void 0),this.type=io,n&&(this.blockId=n.id,this.isStart=a,this.blocks=d)}toJson(){const n=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return n.isStart=this.isStart,n.blockId=this.blockId,n.blocks=this.blocks,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new RE),a.isStart=n.isStart,a.blockId=n.blockId,a.blocks=n.blocks,a}};i(Lt.EVENT,io,RE);var Bb={};Bb.bumpIntoBounds=jc,Bb.bumpIntoBoundsHandler=Zo,Bb.bumpTopObjectsIntoBounds=wn;var Pb=class{constructor(n,a){this.connectionCandidate=this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.dragIconData_=[],this.draggingBlock_=n,this.workspace_=a,this.connectionPreviewer=new(_(Lt.CONNECTION_PREVIEWER,this.workspace_.options))(n),this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=On(n,this.startXY_)}dispose(){this.dragIconData_.length=0,this.connectionPreviewer.dispose()}startDrag(n,a){t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent_(),this.draggingBlock_.bringToFront(!0),J(),this.workspace_.setResizesEnabled(!1),Yo(),this.shouldDisconnect_(a)&&this.disconnectBlock_(a,n),this.draggingBlock_.setDragging(!0);let d;(d=this.workspace_.getLayerManager())==null||d.moveToDragLayer(this.draggingBlock_)}shouldDisconnect_(n){return!!(this.draggingBlock_.getParent()||n&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(n,a){this.draggingBlock_.unplug(n),n=this.pixelsToWorkspaceUnits_(a),n=tn.sum(this.startXY_,n),this.draggingBlock_.translate(n.x,n.y),Rs(this.draggingBlock_)}fireDragStartEvent_(){const n=new(xe(io))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));he(n)}drag(n,a){const d=this.draggingBlock_;this.moveBlock(d,a),this.updateDragTargets(n,d),this.wouldDeleteBlock_=this.wouldDeleteBlock(n,d,a),this.updateCursorDuringBlockDrag_(),this.updateConnectionPreview(d,a)}moveBlock(n,a){a=this.pixelsToWorkspaceUnits_(a),a=tn.sum(this.startXY_,a),n.moveDuringDrag(a)}updateDragTargets(n,a){if(n=this.workspace_.getDragTarget(n),this.dragTarget_!==n){let d;(d=this.dragTarget_)==null||d.onDragExit(a),n==null||n.onDragEnter(a)}n==null||n.onDragOver(a),this.dragTarget_=n}wouldDeleteBlock(n,a,d){return(n=this.workspace_.getDragTarget(n))&&this.workspace_.getComponentManager().hasCapability(n.id,ba.Capability.DELETE_AREA)?n.wouldDelete(a,!!this.getConnectionCandidate(a,d)):!1}updateConnectionPreview(n,a){a=this.pixelsToWorkspaceUnits_(a);const d=this.connectionCandidate,b=this.getConnectionCandidate(n,a);if(b){this.connectionCandidate=a=d&&this.currCandidateIsBetter(d,a,b)?d:b;var{local:R,neighbour:G}=a;R.type!==En.OUTPUT_VALUE&&R.type!==En.PREVIOUS_STATEMENT||!G.isConnected()||G.targetBlock().isInsertionMarker()||this.orphanCanConnectAtEnd(n,G.targetBlock(),R.type)?this.connectionPreviewer.previewConnection(R,G):this.connectionPreviewer.previewReplacement(R,G,G.targetBlock())}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(n,a,d){return!!ki.getConnectionForOrphanedConnection(n,d===En.OUTPUT_VALUE?a.outputConnection:a.previousConnection)}currCandidateIsBetter(n,a,d){const{local:b,neighbour:R}=n;n=new tn(b.x,b.y);const G=new tn(R.x,R.y);return a=tn.distance(tn.sum(n,a),G),d.distance>a-t.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(n,a){n=this.getLocalConnections(n);let d=this.connectionCandidate?t.config$$module$build$src$core$config.connectingSnapRadius:t.config$$module$build$src$core$config.snapRadius,b=null;for(const R of n){const{connection:G,radius:ce}=R.closest(d,a);G&&(b={local:R,neighbour:G,distance:ce},d=ce)}return b}getLocalConnections(n){const a=n.getConnections_(!1),d=n.lastConnectionInStack(!0);return d&&d!==n.nextConnection&&a.push(d),a}endDrag(n,a){if(this.drag(n,a),this.fireDragEndEvent_(),oe(),Yo(),this.connectionPreviewer.hidePreview(),n=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)||(n=this.getNewLocationAfterDrag_(a).delta),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),!this.maybeDeleteBlock_()){let d;(d=this.workspace_.getLayerManager())==null||d.moveOffDragLayer(this.draggingBlock_,K),this.draggingBlock_.setDragging(!1),n?this.updateBlockAfterMove_():jc(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)}this.connectionPreviewer.dispose(),this.workspace_.setResizesEnabled(!0),t.setGroup$$module$build$src$core$events$utils(!1)}getNewLocationAfterDrag_(n){n=this.pixelsToWorkspaceUnits_(n);const a=tn.sum(this.startXY_,n);return{delta:n,newLocation:a}}maybeDeleteBlock_(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),bs.length=0,!0):!1}updateBlockAfterMove_(){this.fireMoveEvent_(),this.connectionCandidate?this.applyConnections(this.connectionCandidate):this.draggingBlock_.queueRender(),this.draggingBlock_.scheduleSnapAndBump()}applyConnections(n){const{local:a,neighbour:d}=n;if(a.connect(d),this.draggingBlock_.rendered){const b=a.isSuperior()?d:a,R=this.draggingBlock_.getRootBlock();Zn().then(()=>{Ao(b.getSourceBlock()),setTimeout(()=>{R.bringToFront()},0)})}}fireDragEndEvent_(){const n=new(xe(io))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));he(n)}updateToolboxStyle_(n){const a=this.workspace_.getToolbox();if(a){const d=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";n&&typeof a.removeStyle=="function"?a.removeStyle(d):n||typeof a.addStyle!="function"||a.addStyle(d)}}fireMoveEvent_(){if(!this.draggingBlock_.isDeadOrDying()){var n=new(xe(t.MOVE$$module$build$src$core$events$utils))(this.draggingBlock_);n.setReason(["drag"]),n.oldCoordinate=this.startXY_,n.recordNew(),he(n)}}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(n){return n=new tn(n.x/this.workspace_.scale,n.y/this.workspace_.scale),this.workspace_.isMutator&&n.scale(1/this.workspace_.options.parentWorkspace.scale),n}dragIcons_(){be("Blockly.BlockDragger.prototype.dragIcons_","v10","v11")}getInsertionMarkers(){return this.workspace_.getAllBlocks().filter(n=>n.isInsertionMarker())}};i(Lt.BLOCK_DRAGGER,Ua,Pb);var v_={};v_.Bubble=Xi,v_.MiniWorkspaceBubble=Bm,v_.TextBubble=p0,v_.TextInputBubble=ad;var kE=class extends _p{constructor(n,a,d,b){super(n),this.type=Qc,this.recordUndo=!1,n&&(this.name=a,this.oldValue=d,this.newValue=b)}toJson(){const n=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return n.name=this.name,n.oldValue=this.oldValue,n.newValue=this.newValue,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new kE),a.name=n.name,a.oldValue=n.oldValue,a.newValue=n.newValue,a}isNull(){return this.oldValue===this.newValue}run(n){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(a=a.getBlockById(this.blockId),!a)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");n=n?this.newValue:this.oldValue,(a=a.getField(this.name))?a.setValue(n):console.warn("Can't set non-existent field: "+this.name)}};i(Lt.EVENT,Qc,kE);var OE=class extends _p{constructor(n){super(n),this.type=t.MOVE$$module$build$src$core$events$utils,n&&(n.isShadow()&&(this.recordUndo=!1),n=this.currentLocation_(),this.oldParentId=n.parentId,this.oldInputName=n.inputName,this.oldCoordinate=n.coordinate)}toJson(){const n=super.toJson();return n.oldParentId=this.oldParentId,n.oldInputName=this.oldInputName,this.oldCoordinate&&(n.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),n.newParentId=this.newParentId,n.newInputName=this.newInputName,this.newCoordinate&&(n.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(n.reason=this.reason),this.recordUndo||(n.recordUndo=this.recordUndo),n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new OE),a.oldParentId=n.oldParentId,a.oldInputName=n.oldInputName,n.oldCoordinate&&(d=n.oldCoordinate.split(","),a.oldCoordinate=new tn(Number(d[0]),Number(d[1]))),a.newParentId=n.newParentId,a.newInputName=n.newInputName,n.newCoordinate&&(d=n.newCoordinate.split(","),a.newCoordinate=new tn(Number(d[0]),Number(d[1]))),n.reason!==void 0&&(a.reason=n.reason),n.recordUndo!==void 0&&(a.recordUndo=n.recordUndo),a}recordNew(){const n=this.currentLocation_();this.newParentId=n.parentId,this.newInputName=n.inputName,this.newCoordinate=n.coordinate}setReason(n){this.reason=n}currentLocation_(){var n=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var a=n.getBlockById(this.blockId);if(!a)throw Error("The block associated with the block move event could not be found");n={};const d=a.getParent();return d?(n.parentId=d.id,(a=d.getInputWithBlock(a))&&(n.inputName=a.name)):n.coordinate=a.getRelativeToSurfaceXY(),n}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&tn.equals(this.oldCoordinate,this.newCoordinate)}run(n){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var d=a.getBlockById(this.blockId);if(d){var b=n?this.newParentId:this.oldParentId,R=n?this.newInputName:this.oldInputName;if(n=n?this.newCoordinate:this.oldCoordinate,b){var G=a.getBlockById(b);if(!G){console.warn("Can't connect to non-existent block: "+b);return}}if(d.getParent()&&d.unplug(),n)R=d.getRelativeToSurfaceXY(),d.moveBy(n.x-R.x,n.y-R.y,this.reason);else{a=d.outputConnection,(!a||d.previousConnection&&d.previousConnection.isConnected())&&(a=d.previousConnection);let ce,Oe;d=(Oe=a)==null?void 0:Oe.type,R?(d=G.getInput(R))&&(ce=d.connection):d===En.PREVIOUS_STATEMENT&&(ce=G.nextConnection),ce&&a?a.connect(ce):console.warn("Can't connect to non-existent input: "+R)}}else console.warn("Can't move non-existent block: "+this.blockId)}};i(Lt.EVENT,t.MOVE$$module$build$src$core$events$utils,OE);var LE=class extends f{constructor(n,a,d){super(n?n.workspace.id:void 0),this.type=Ks,n&&(this.blockId=n.id,this.isOpen=a,this.bubbleType=d)}toJson(){const n=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return n.isOpen=this.isOpen,n.bubbleType=this.bubbleType,n.blockId=this.blockId||"",n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new LE),a.isOpen=n.isOpen,a.bubbleType=n.bubbleType,a.blockId=n.blockId,a}},NE;(function(n){n.MUTATOR="mutator",n.COMMENT="comment",n.WARNING="warning"})(NE||(NE={})),i(Lt.EVENT,Ks,LE);var Ag=class extends c{constructor(n){super(),this.isBlank=!n,n&&(this.commentId=n.id,this.workspaceId=n.workspace.id,this.group=t.getGroup$$module$build$src$core$events$utils(),this.recordUndo=ae())}toJson(){const n=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return n.commentId=this.commentId,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new Ag),a.commentId=n.commentId,a}static CommentCreateDeleteHelper(n,a){var d=n.getEventWorkspace_();if(a){if(a=t.createElement$$module$build$src$core$utils$xml("xml"),!n.xml)throw Error("Ecountered a comment event without proper xml");a.appendChild(n.xml),t.domToWorkspace$$module$build$src$core$xml(a,d)}else{if(!n.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(d=d.getCommentById(n.commentId))?d.dispose():console.warn("Can't uncreate non-existent comment: "+n.commentId)}}},DE=class extends Ag{constructor(n,a,d){super(n),this.type=ed,n&&(this.oldContents_=typeof a>"u"?"":a,this.newContents_=typeof d>"u"?"":d)}toJson(){const n=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return n.oldContents=this.oldContents_,n.newContents=this.newContents_,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new DE),a.oldContents_=n.oldContents,a.newContents_=n.newContents,a}isNull(){return this.oldContents_===this.newContents_}run(n){var a=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(a=a.getCommentById(this.commentId)){var d=n?this.newContents_:this.oldContents_;if(!d)throw Error(n?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");a.setContent(d)}else console.warn("Can't change non-existent comment: "+this.commentId)}};i(Lt.EVENT,ed,DE);var BE=class extends Ag{constructor(n){super(n),this.type=yo,n&&(this.xml=n.toXmlWithXY())}toJson(){const n=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return n.xml=bi(this.xml),n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new BE),a.xml=t.textToDom$$module$build$src$core$utils$xml(n.xml),a}run(n){Ag.CommentCreateDeleteHelper(this,n)}};i(Lt.EVENT,yo,BE);var PE=class extends Ag{constructor(n){super(n),this.type=Sh,n&&(this.xml=n.toXmlWithXY())}run(n){Ag.CommentCreateDeleteHelper(this,!n)}toJson(){const n=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return n.xml=bi(this.xml),n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new PE),a.xml=t.textToDom$$module$build$src$core$utils$xml(n.xml),a}};i(Lt.EVENT,Sh,PE);var FE=class extends Ag{constructor(n){super(n),this.type=Ga,n&&(this.comment_=n,this.oldCoordinate_=n.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setOldCoordinate(n){this.oldCoordinate_=n}toJson(){const n=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return n.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,n.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new FE),d=n.oldCoordinate.split(","),a.oldCoordinate_=new tn(Number(d[0]),Number(d[1])),d=n.newCoordinate.split(","),a.newCoordinate_=new tn(Number(d[0]),Number(d[1])),a}isNull(){return tn.equals(this.oldCoordinate_,this.newCoordinate_)}run(n){var a=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(a=a.getCommentById(this.commentId)){if(n=n?this.newCoordinate_:this.oldCoordinate_,!n)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var d=a.getRelativeToSurfaceXY();a.moveBy(n.x-d.x,n.y-d.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};i(Lt.EVENT,Ga,FE);var UE=class extends f{constructor(n,a,d){super(d),this.type=ya,this.oldItem=n??void 0,this.newItem=a??void 0}toJson(){const n=super.toJson();return n.oldItem=this.oldItem,n.newItem=this.newItem,n}static fromJson(n,a,d){return a=super.fromJson(n,a,d??new UE),a.oldItem=n.oldItem,a.newItem=n.newItem,a}};i(Lt.EVENT,ya,UE),t.CHANGE$$module$build$src$core$events$utils,t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,t.CHANGE$$module$build$src$core$events$utils,t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,t.disable$$module$build$src$core$events$utils,t.enable$$module$build$src$core$events$utils,t.getGroup$$module$build$src$core$events$utils,t.setGroup$$module$build$src$core$events$utils;var Mn={};Mn.Abstract=c,Mn.BLOCK_CHANGE=t.CHANGE$$module$build$src$core$events$utils,Mn.BLOCK_CREATE=t.CREATE$$module$build$src$core$events$utils,Mn.BLOCK_DELETE=t.DELETE$$module$build$src$core$events$utils,Mn.BLOCK_DRAG=io,Mn.BLOCK_FIELD_INTERMEDIATE_CHANGE=Qc,Mn.BLOCK_MOVE=t.MOVE$$module$build$src$core$events$utils,Mn.BUBBLE_OPEN=Ks,Mn.BUMP_EVENTS=td,Mn.BlockBase=_p,Mn.BlockChange=oo,Mn.BlockCreate=Iv,Mn.BlockDelete=EE,Mn.BlockDrag=RE,Mn.BlockFieldIntermediateChange=kE,Mn.BlockMove=OE,Mn.BubbleOpen=LE,Mn.BubbleType=NE,Mn.CHANGE=t.CHANGE$$module$build$src$core$events$utils,Mn.CLICK=Iu,Mn.COMMENT_CHANGE=ed,Mn.COMMENT_CREATE=yo,Mn.COMMENT_DELETE=Sh,Mn.COMMENT_MOVE=Ga,Mn.CREATE=t.CREATE$$module$build$src$core$events$utils,Mn.Click=S,Mn.ClickTarget=M,Mn.CommentBase=Ag,Mn.CommentChange=DE,Mn.CommentCreate=BE,Mn.CommentDelete=PE,Mn.CommentMove=FE,Mn.DELETE=t.DELETE$$module$build$src$core$events$utils,Mn.FINISHED_LOADING=jl,Mn.FinishedLoading=qw,Mn.MARKER_MOVE=Tl,Mn.MOVE=t.MOVE$$module$build$src$core$events$utils,Mn.MarkerMove=Mb,Mn.SELECTED=Ns,Mn.Selected=Dd,Mn.THEME_CHANGE=Vl,Mn.TOOLBOX_ITEM_SELECT=ya,Mn.TRASHCAN_OPEN=Ha,Mn.ThemeChange=l0,Mn.ToolboxItemSelect=UE,Mn.TrashcanOpen=TE,Mn.UI=Zc,Mn.UiBase=f,Mn.VAR_CREATE=za,Mn.VAR_DELETE=Au,Mn.VAR_RENAME=qc,Mn.VIEWPORT_CHANGE=ts,Mn.VarBase=fp,Mn.VarCreate=mp,Mn.VarDelete=vE,Mn.VarRename=yE,Mn.ViewportChange=u0,Mn.clearPendingUndo=te,Mn.disable=t.disable$$module$build$src$core$events$utils,Mn.disableOrphans=Ve,Mn.enable=t.enable$$module$build$src$core$events$utils,Mn.filter=j,Mn.fire=he,Mn.fromJson=Le,Mn.get=xe,Mn.getDescendantIds=_e,Mn.getGroup=t.getGroup$$module$build$src$core$events$utils,Mn.getRecordUndo=ae,Mn.isEnabled=q,Mn.setGroup=t.setGroup$$module$build$src$core$events$utils,Mn.setRecordUndo=fe;var Zw=class extends Bv{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(n){super.setFontConstants_(n),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(n){super.setDynamicProperties_(n),this.SELECTED_GLOW_COLOUR=n.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const a=Number(n.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=a&&!isNaN(a)?a:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=n.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(n=Number(n.getComponentStyle("replacementGlowSize")))&&!isNaN(n)?n:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&ut(this.selectedGlowFilter),this.replacementGlowFilter&&ut(this.replacementGlowFilter)}makeStartHat(){const n=this.START_HAT_HEIGHT,a=this.START_HAT_WIDTH,d=os("c",[Cn(25,-n),Cn(71,-n),Cn(a,0)]);return{height:n,width:a,path:d}}makeHexagonal(){function n(d,b,R){var G=d/2;return G=G>a?a:G,R=R?-1:1,d=(b?-1:1)*d/2,_l(-R*G,d)+_l(R*G,d)}const a=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(d){return d/=2,d>a?a:d},height(d){return d},connectionOffsetY(d){return d/2},connectionOffsetX(d){return-d},pathDown(d){return n(d,!1,!1)},pathUp(d){return n(d,!0,!1)},pathRightDown(d){return n(d,!1,!0)},pathRightUp(d){return n(d,!1,!0)}}}makeRounded(){function n(b,R,G){const ce=b>d?b-d:0;b=(b>d?d:b)/2;const Oe=G===R?"0":"1";return Pr("a","0 0,"+Oe,b,Cn((G?1:-1)*b,(R?-1:1)*b))+cn("v",(R?-1:1)*ce)+Pr("a","0 0,"+Oe,b,Cn((G?-1:1)*b,(R?-1:1)*b))}const a=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,d=2*a;return{type:this.SHAPES.ROUND,isDynamic:!0,width(b){return b/=2,b>a?a:b},height(b){return b},connectionOffsetY(b){return b/2},connectionOffsetX(b){return-b},pathDown(b){return n(b,!1,!1)},pathUp(b){return n(b,!0,!1)},pathRightDown(b){return n(b,!1,!0)},pathRightUp(b){return n(b,!1,!0)}}}makeSquared(){function n(d,b,R){d-=2*a;const G=R===b?"0":"1";return Pr("a","0 0,"+G,a,Cn((R?1:-1)*a,(b?-1:1)*a))+cn("v",(b?-1:1)*d)+Pr("a","0 0,"+G,a,Cn((R?-1:1)*a,(b?-1:1)*a))}const a=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(d){return a},height(d){return d},connectionOffsetY(d){return d/2},connectionOffsetX(d){return-d},pathDown(d){return n(d,!1,!1)},pathUp(d){return n(d,!0,!1)},pathRightDown(d){return n(d,!1,!0)},pathRightUp(d){return n(d,!1,!0)}}}shapeFor(n){let a=n.getCheck();switch(!a&&n.targetConnection&&(a=n.targetConnection.getCheck()),n.type){case En.INPUT_VALUE:case En.OUTPUT_VALUE:if(n=n.getSourceBlock().getOutputShape(),n!==null)switch(n){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return a&&a.indexOf("Boolean")!==-1?this.HEXAGONAL:a&&a.indexOf("Number")!==-1?this.ROUNDED:(a&&a.indexOf("String"),this.ROUNDED);case En.PREVIOUS_STATEMENT:case En.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function n($n){return os("c",[Cn($n*R/2,0),Cn($n*R*3/4,ce/2),Cn($n*R,ce)])+vl([Cn($n*R,G)])+os("c",[Cn($n*R/4,ce/2),Cn($n*R/2,ce),Cn($n*R,ce)])+cn("h",$n*b)+os("c",[Cn($n*R/2,0),Cn($n*R*3/4,-(ce/2)),Cn($n*R,-ce)])+vl([Cn($n*R,-G)])+os("c",[Cn($n*R/4,-(ce/2)),Cn($n*R/2,-ce),Cn($n*R,-ce)])}const a=this.NOTCH_WIDTH,d=this.NOTCH_HEIGHT,b=a/3,R=b/3,G=d/2,ce=G/2,Oe=n(1),Nt=n(-1);return{type:this.SHAPES.NOTCH,width:a,height:d,pathLeft:Oe,pathRight:Nt}}makeInsideCorners(){const n=this.CORNER_RADIUS,a=Pr("a","0 0,0",n,Cn(-n,n)),d=Pr("a","0 0,1",n,Cn(-n,n)),b=Pr("a","0 0,0",n,Cn(n,n)),R=Pr("a","0 0,1",n,Cn(n,n));return{width:n,height:n,pathTop:a,pathBottom:b,rightWidth:n,rightHeight:n,pathTopRight:d,pathBottomRight:R}}generateSecondaryColour_(n){return bc("#000",n,.15)||n}generateTertiaryColour_(n){return bc("#000",n,.25)||n}createDom(n,a,d){super.createDom(n,a,d),n=Z(Be.DEFS,{},n),a=Z(Be.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},n),Z(Be.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},a),d=Z(Be.FECOMPONENTTRANSFER,{result:"outBlur"},a),Z(Be.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},d),Z(Be.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},a),Z(Be.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},a),this.selectedGlowFilterId=a.id,this.selectedGlowFilter=a,n=Z(Be.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},n),Z(Be.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},n),a=Z(Be.FECOMPONENTTRANSFER,{result:"outBlur"},n),Z(Be.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),Z(Be.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),Z(Be.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),Z(Be.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},n),this.replacementGlowFilterId=n.id,this.replacementGlowFilter=n}getCSS_(n){return[`${n} .blocklyText,`,`${n} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${n} .blocklyText {`,"fill: #fff;","}",`${n} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${n} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${n} .blocklyNonEditableText>text,`,`${n} .blocklyEditableText>text,`,`${n} .blocklyNonEditableText>g>text,`,`${n} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${n} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${n} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${n} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${n} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${n} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${n} .blocklyDropdownText {`,"fill: #fff !important;","}",`${n}.blocklyWidgetDiv .goog-menuitem,`,`${n}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${n}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${n} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${n} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${n} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},ex=class extends Pv{constructor(n,a){super(n,a)}draw(){const n=this.block_.pathObject;n.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),n.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&n.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(n.outputShapeType=this.info_.outputConnection.shape.type),n.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(n){if(!(0>=n.height)){if(Je.isSpacer(n)){const b=n.precedesStatement;var a=n.followsStatement;if(b||a){const R=this.constants_.INSIDE_CORNERS;var d=R.rightHeight;d=n.height-(b?d:0),a=a?R.pathBottomRight:"",n=0<d?cn("V",n.yPos+d):"",this.outlinePath_+=a+n+(b?R.pathTopRight:"");return}}this.outlinePath_+=cn("V",n.yPos+n.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const n=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=ti(n.xPos,this.info_.startY),this.outlinePath_+=cn("h",n.width)}drawFlatBottom_(){const n=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=cn("V",n.baseline),this.outlinePath_+=cn("h",-n.width)}drawInlineInput_(n){this.positionInlineInputConnection_(n);const a=n.input.name;n.connectedBlock||this.info_.isInsertionMarker||(n=_s(n.xPos+n.connectionWidth,n.centerline-n.height/2)+this.getInlineInputPath(n),this.block_.pathObject.setOutlinePath(a,n))}getInlineInputPath(n){const a=n.width-2*n.connectionWidth,d=n.height;return cn("h",a)+n.shape.pathRightDown(d)+cn("h",-a)+n.shape.pathUp(d)+"z"}drawStatementInput_(n){var a=n.getLastInput();const d=a.xPos+a.notchOffset+a.shape.width,b=this.constants_.INSIDE_CORNERS,R=a.shape.pathRight+cn("h",-(a.notchOffset-b.width))+b.pathTop,G=n.height-2*b.height;a=b.pathBottom+cn("h",a.notchOffset-b.width)+(a.connectedBottomNextConnection?"":a.shape.pathLeft),this.outlinePath_+=cn("H",d)+R+cn("v",G)+a+cn("H",n.xPos+n.width),this.positionStatementInputConnection_(n)}drawConnectionHighlightPath(n){const a=n.connectionModel;if(a.type===En.NEXT_STATEMENT||a.type===En.PREVIOUS_STATEMENT||a.type===En.OUTPUT_VALUE&&!n.isDynamicShape)super.drawConnectionHighlightPath(n);else{n=a.type===En.INPUT_VALUE?_s(n.connectionWidth,-n.height/2)+this.getInlineInputPath(n):_s(n.width,-n.height/2)+n.shape.pathDown(n.height);var d=a.getSourceBlock(),b,R;(R=(b=d.pathObject).addConnectionHighlight)==null||R.call(b,a,n,a.getOffsetInBlock(),d.RTL)}}},y_=class extends ii{constructor(n,a,d,b,R,G,ce){if(super(ii.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",d=Number(Er(d)),a=Number(Er(a)),isNaN(d)||isNaN(a))throw Error("Height and width values of an image field must cast to numbers.");if(0>=d||0>=a)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Es(a,d+y_.Y_PADDING),this.imageHeight=d,typeof R=="function"&&(this.clickHandler=R),n!==ii.SKIP_SETUP&&(ce?this.configure_(ce):(this.flipRtl=!!G,this.altText=Er(b)||""),this.setValue(Er(n)))}configure_(n){super.configure_(n),n.flipRtl&&(this.flipRtl=n.flipRtl),n.alt&&(this.altText=Er(n.alt))}initView(){this.imageElement=Z(Be.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(Ts,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(n){return typeof n!="string"?null:n}doValueUpdate_(n){this.value_=n,this.imageElement&&this.imageElement.setAttributeNS(Ts,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(n){n!==this.altText&&(this.altText=n||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(n){this.clickHandler=n}getText_(){return this.altText}static fromJson(n){if(!n.src||!n.width||!n.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(n.src,n.width,n.height,void 0,void 0,void 0,n)}};y_.Y_PADDING=1,Hs("field_image",y_),y_.prototype.DEFAULT_VALUE="";var Vv=class extends ii{constructor(n,a,d){super(ii.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",n!==ii.SKIP_SETUP&&(d&&this.configure_(d),this.setValue(n),a&&this.setValidator(a))}configure_(n){super.configure_(n),n.spellcheck!==void 0&&(this.spellcheck_=n.spellcheck)}initView(){if(!this.getSourceBlock())throw new Qs;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const n=this.getSourceBlock();if(!n)throw new Qs;let a;return this.fullBlockClickTarget_=!((a=this.getConstants())==null||!a.FULL_BLOCK_FIELDS)&&n.isSimpleReporter()}doValueInvalid_(n){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,n=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&q()&&he(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,n,this.value_)))}doValueUpdate_(n){this.isTextValid_=this.isDirty_=!0,this.value_=n}applyColour(){const n=this.getSourceBlock();if(!n)throw new Qs;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",n.style.colourTertiary)):(this.borderRect_.style.display="none",n.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let n;return(n=this.getConstants())!=null&&n.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var n=this.htmlInput_;this.isTextValid_?(mt(n,"blocklyInvalidInput"),sr(n,Bs.INVALID,!1)):(ke(n,"blocklyInvalidInput"),sr(n,Bs.INVALID,!0))}if(n=this.getSourceBlock(),!n)throw new Qs;this.getConstants().FULL_BLOCK_FIELDS&&n.applyColour()}setSpellcheck(n){n!==this.spellcheck_&&(this.spellcheck_=n,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(n,a=!1){this.workspace_=this.sourceBlock_.workspace,!a&&this.workspace_.options.modalInputs&&(Xl||fn||kn)?this.showPromptEditor_():this.showInlineEditor_(a)}showPromptEditor_(){Uo(t.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),n=>{n!==null&&this.setValue(this.getValueFromEditorText_(n)),this.onFinishEditing_(this.value_)})}showInlineEditor_(n){const a=this.getSourceBlock();if(!a)throw new Qs;mu(this,a.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,n||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var n=this.getSourceBlock();if(!n)throw new Qs;t.setGroup$$module$build$src$core$events$utils(!0);const a=Us();var d=this.getClickTarget_();if(!d)throw Error("A click target has not been set.");ke(d,"editing"),d=document.createElement("input"),d.className="blocklyHtmlInput",d.setAttribute("spellcheck",this.spellcheck_);const b=this.workspace_.getScale();var R=this.getConstants().FIELD_TEXT_FONTSIZE*b+"pt";return a.style.fontSize=R,d.style.fontSize=R,R=Vv.BORDERRADIUS*b+"px",this.isFullBlockField()&&(R=this.getScaledBBox(),R=(R.bottom-R.top)/2+"px",n=n.getParent()?n.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,d.style.border=1*b+"px solid "+n,a.style.borderRadius=R,a.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(a.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*b+"px")),d.style.borderRadius=R,a.appendChild(d),d.value=d.defaultValue=this.getEditorText_(this.value_),d.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(d),d}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&q()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(he(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),t.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var n=Us().style;if(n.width="auto",n.height="auto",n.fontSize="",n.transition="",n.boxShadow="",this.htmlInput_=null,n=this.getClickTarget_(),!n)throw Error("A click target has not been set.");mt(n,"editing")}onFinishEditing_(n){}bindInputEvents_(n){this.onKeyDownWrapper_=we(n,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=we(n,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(it(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(it(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(n){n.key==="Enter"?(cl(),ca()):n.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),cl(),ca()):n.key==="Tab"&&(cl(),ca(),this.sourceBlock_.tab(this,!n.shiftKey),n.preventDefault())}onHtmlInputChange_(n){n=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&q()&&this.value_!==n&&he(new(xe(Qc))(this.sourceBlock_,this.name||null,n,this.value_))}setEditorValue_(n,a=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(n)),this.setValue(n,a)}resizeEditor_(){var n=this.getSourceBlock();if(!n)throw new Qs;const a=Us(),d=this.getScaledBBox();a.style.width=d.right-d.left+"px",a.style.height=d.bottom-d.top+"px",n=new tn(n.RTL?d.right-a.offsetWidth:d.left,d.top),a.style.left=n.x+"px",a.style.top=n.y+"px"}repositionForWindowResize(){const n=this.getSourceBlock();return n instanceof jf?(jc(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),n)||this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(n){return`${n}`}getValueFromEditorText_(n){return n}};Vv.BORDERRADIUS=4;var b0=class extends Vv{constructor(n,a,d){super(n,a,d)}doClassValidation_(n){return n===void 0?null:`${n}`}static fromJson(n){return new this(Er(n.text),void 0,n)}};Hs("field_input",b0),b0.prototype.DEFAULT_VALUE="";var tx=class extends xb{constructor(n){super(n)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(n){return!!n.outputConnection}hasRightSquareCorner(n){return!!n.outputConnection&&!n.statementInputCount&&!n.nextConnection}},Fb=class extends Dv{constructor(n,a){if(super(n,a),this.connectedBottomNextConnection=!1,this.connectedBlock){for(n=this.connectedBlock;a=n.getNextBlock();)n=a;n.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},nx=class extends Jr{constructor(n){super(n),this.width=this.height=0,this.type|=Je.getType("RIGHT_CONNECTION")}},rx=class extends mE{constructor(n){super(n)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(n){const a=(n.hat?n.hat==="cap":this.constants_.ADD_START_HATS)&&!n.outputConnection&&!n.previousConnection;return!!n.outputConnection||a}hasRightSquareCorner(n){return!!n.outputConnection&&!n.statementInputCount&&!n.nextConnection}},ix=class extends m0{constructor(n,a){super(n,a),this.isInline=!0,this.renderer_=n,this.constants_=this.renderer_.getConstants(),this.topRow=new rx(this.constants_),this.bottomRow=new tx(this.constants_),this.isMultiRow=!a.getInputsInline()||a.isCollapsed(),this.hasStatementInput=0<a.statementInputCount,this.rightSide=this.outputConnection?new nx(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(n,a){return a?a instanceof Pm||n instanceof ld||a instanceof ld?!0:n instanceof t.ValueInput$$module$build$src$core$inputs$value_input||n instanceof Vf||n instanceof Pm?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(n){return n.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(n)}getInRowSpacing_(n,a){return n&&a||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!n&&a&&Je.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:n&&Je.isLeftRoundedCorner(n)&&a&&(Je.isPreviousConnection(a)||Je.isNextConnection(a))?a.notchOffset-this.constants_.CORNER_RADIUS:n&&Je.isLeftSquareCorner(n)&&a&&Je.isHat(a)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(n,a){if(Je.isTopRow(n)&&Je.isBottomRow(a))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const d=Je.isInputRow(n)&&n.hasStatement,b=Je.isInputRow(a)&&a.hasStatement;return b||d?(n=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),b&&d?Math.max(n,this.constants_.DUMMY_INPUT_MIN_HEIGHT):n):Je.isTopRow(n)?n.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):Je.isBottomRow(a)?this.outputConnection?!a.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(n,a){const d=this.width-this.startX;return Je.isInputRow(n)&&n.hasStatement||Je.isInputRow(a)&&a.hasStatement?Math.max(d,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):d}getElemCenterline_(n,a){if(n.hasStatement&&!Je.isSpacer(a)&&!Je.isStatementInput(a))return n.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(Je.isInlineInput(a)&&a instanceof Cg){const d=a.connectedBlock;if(d&&d.outputConnection&&d.nextConnection)return n.yPos+d.height/2}return super.getElemCenterline_(n,a)}addInput_(n,a){if((n instanceof Vf||n instanceof Pm)&&a.hasDummyInput&&a.align===t.Align$$module$build$src$core$inputs$align.LEFT&&n.align===t.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(a,n);else if(n instanceof ld){a.elements.push(new Fb(this.constants_,n)),a.hasStatement=!0,a.align===null&&(a.align=n.align);return}super.addInput_(n,a)}addAlignmentPadding_(n,a){if(this.rightAlignedDummyInputs.get(n)){let d;for(let b=0;b<n.elements.length;b++){const R=n.elements[b];if(Je.isSpacer(R)&&(d=R),Je.isField(R)&&R instanceof f0&&R.parentInput===this.rightAlignedDummyInputs.get(n))break}if(d){d.width+=a,n.width+=a;return}}super.addAlignmentPadding_(n,a)}adjustXPosition_(){const n=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let a=n;for(let R=2;R<this.rows.length-1;R+=2){var d=this.rows[R-1];const G=this.rows[R];var b=this.rows[R+1];if(d=R===2?!!this.topRow.hasPreviousConnection:!!d.followsStatement,b=R+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!b.precedesStatement,Je.isInputRow(G)&&G.hasStatement){G.measure();let ce,Oe;a=G.width-((Oe=(ce=G.getLastInput())==null?void 0:ce.width)!=null?Oe:0)+n}else if(d&&(R===2||b)&&Je.isInputRow(G)&&!G.hasStatement){b=G.xPos,d=null;for(let ce=0;ce<G.elements.length;ce++){const Oe=G.elements[ce];Je.isSpacer(Oe)&&(d=Oe),d&&(Je.isField(Oe)||Je.isInput(Oe))&&b<a&&!(Je.isField(Oe)&&Oe instanceof f0&&(Oe.field instanceof na||Oe.field instanceof y_))&&(d.width+=a-b),b+=Oe.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var n=this.outputConnection.shape;if("isDynamic"in n&&n.isDynamic){for(var a=0,d=0;d<this.rows.length;d++){const b=this.rows[d];b.yPos=a,a+=b.height}this.height=a,d=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,a=n.height(d),d=n.width(d),this.outputConnection.height=a,this.outputConnection.width=d,this.outputConnection.startX=d,this.outputConnection.connectionOffsetY=n.connectionOffsetY(a),this.outputConnection.connectionOffsetX=n.connectionOffsetX(d),n=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(n=d,this.rightSide.height=a,this.rightSide.width=n,this.rightSide.centerline=a/2,this.rightSide.xPos=this.width+n),this.startX=d,this.width+=d+n,this.widthWithChildren+=d+n}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var n=0,a=0;a<this.rows.length;a++){var d=this.rows[a];if(!Je.isInputRow(d))continue;n=d.elements[d.elements.length-2];let b=this.getNegativeSpacing_(d.elements[1]),R=this.getNegativeSpacing_(n);n=b+R;const G=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-n<G&&(n=this.width-G,b=n/2,R=n/2),d.elements.unshift(new zd(this.constants_,-b)),d.elements.push(new zd(this.constants_,-R))}if(n)for(this.width-=n,this.widthWithChildren-=n,this.rightSide.xPos-=n,a=0;a<this.rows.length;a++)d=this.rows[a],Je.isTopOrBottomRow(d)&&(d.elements[1].width-=n),d.width-=n,d.widthWithConnectedBlocks-=n}}getNegativeSpacing_(n){if(!n||!this.outputConnection)return 0;const a=this.outputConnection.width;var d=this.outputConnection.shape.type;const b=this.constants_;if(1<this.inputRows.length)switch(d){case b.SHAPES.ROUND:return d=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,d=this.height/2>d?d:this.height/2,a-d*(1-Math.sin(Math.acos((d-this.constants_.SMALL_PADDING)/d)));default:return 0}if(Je.isInlineInput(n)&&n instanceof Cg){const R=n.connectedBlock;return n=R?R.pathObject.outputShapeType:n.shape.type,n==null||R&&R.outputConnection&&(R.statementInputCount||R.nextConnection)||d===b.SHAPES.HEXAGONAL&&d!==n?0:a-this.constants_.SHAPE_IN_SHAPE_PADDING[d][n]}return Je.isField(n)&&n instanceof f0?d===b.SHAPES.ROUND&&n.field instanceof b0?a-2.75*b.GRID_UNIT:a-this.constants_.SHAPE_IN_SHAPE_PADDING[d][0]:Je.isIcon(n)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let b=2;b<this.rows.length-1;b+=2){const R=this.rows[b-1],G=this.rows[b],ce=this.rows[b+1];var n=b===2,a=b+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!ce.precedesStatement;if(n?this.topRow.hasPreviousConnection:R.followsStatement){var d=G.elements[1];if(d=G.elements.length===3&&d instanceof f0&&(d.field instanceof na||d.field instanceof y_),!n&&d)R.height-=this.constants_.SMALL_PADDING,ce.height-=this.constants_.SMALL_PADDING,G.height-=this.constants_.MEDIUM_PADDING;else if(!n&&!a)R.height+=this.constants_.SMALL_PADDING;else if(a){for(n=!1,a=0;a<G.elements.length;a++)if(d=G.elements[a],d instanceof Cg&&Je.isInlineInput(d)&&d.connectedBlock&&!d.connectedBlock.isShadow()&&40<=d.connectedBlock.getHeightWidth().height){n=!0;break}n&&(R.height-=this.constants_.SMALL_PADDING,ce.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},T=class extends Ab{constructor(n,a,d){super(n,a,d),this.markerCircle=null}showWithInputOutput(n){const a=n.getSourceBlock();n=n.getLocation().getOffsetInBlock(),this.positionCircle(n.x,n.y),this.setParent_(a),this.showCurrent_()}showWithOutput_(n){this.showWithInputOutput(n)}showWithInput_(n){this.showWithInputOutput(n)}showWithBlock_(n){n=n.getLocation();const a=n.getHeightWidth();this.positionRect_(0,0,a.width,a.height),this.setParent_(n),this.showCurrent_()}positionCircle(n,a){let d;(d=this.markerCircle)==null||d.setAttribute("cx",`${n}`);let b;(b=this.markerCircle)==null||b.setAttribute("cy",`${a}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=Z(Be.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const n=this.getBlinkProperties_();Z(Be.ANIMATE,n,this.markerCircle)}return this.markerSvg_}applyColour_(n){super.applyColour_(n);let a;(a=this.markerCircle)==null||a.setAttribute("fill",this.colour_);let d;if((d=this.markerCircle)==null||d.setAttribute("stroke",this.colour_),this.isCursor()){n=this.colour_+";transparent;transparent;";let b;(b=this.markerCircle)==null||b.firstElementChild.setAttribute("values",n)}}},C=class extends Fv{constructor(n,a,d){super(n,a,d),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=d}setPath(n){super.setPath(n),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",n)}applyColour(n){super.applyColour(n);const a=n.getParent();n.isShadow()&&a&&this.svgPath.setAttribute("stroke",a.style.colourTertiary);for(const d of this.outlines.values())d.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const n of this.outlines.values())n.setAttribute("transform","scale(-1 1)")}updateSelected(n){this.setClass_("blocklySelected",n),n?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(n){this.setClass_("blocklyReplaceable",n),n?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(n,a){n=n.getParentInput().name,(n=this.getOutlinePath(n))&&(a?n.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):n.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const n of this.outlines.keys())this.remainingOutlines.add(n)}endDrawing(){if(this.remainingOutlines.size)for(const n of this.remainingOutlines)this.removeOutlinePath(n);this.remainingOutlines.clear()}setOutlinePath(n,a){n=this.getOutlinePath(n),n.setAttribute("d",a),n.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(n){return this.outlines.has(n)||this.outlines.set(n,Z(Be.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(n),this.outlines.get(n)}removeOutlinePath(n){let a,d;(a=this.outlines.get(n))==null||(d=a.parentNode)==null||d.removeChild(this.outlines.get(n)),this.outlines.delete(n)}},P=class extends Uv{constructor(n){super(n)}makeConstants_(){return new Zw}makeRenderInfo_(n){return new ix(this,n)}makeDrawer_(n,a){return new ex(n,a)}makeMarkerDrawer(n,a){return new T(n,this.getConstants(),a)}makePathObject(n,a){return new C(n,a,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(n,a,d){return be("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),a.type===En.OUTPUT_VALUE?n.isConnected()?Ep.PREVIEW_TYPE.REPLACEMENT_FADE:Ep.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(n,a,d)}};Gs("zelos",P);var Y={};Y.BottomRow=tx,Y.ConstantProvider=Zw,Y.Drawer=ex,Y.MarkerSvg=T,Y.PathObject=C,Y.RenderInfo=ix,Y.Renderer=P,Y.RightConnectionShape=nx,Y.StatementInput=Fb,Y.TopRow=rx,_o();var ue={};ue.registerCleanup=Fr,ue.registerCollapse=Ai,ue.registerCollapseExpandBlock=wu,ue.registerComment=qh,ue.registerDefaultOptions=_o,ue.registerDelete=js,ue.registerDeleteAll=Su,ue.registerDisable=xu,ue.registerDuplicate=ro,ue.registerExpand=zi,ue.registerHelp=go,ue.registerInline=_a,ue.registerRedo=Ir,ue.registerUndo=gr;var ye=class extends Vv{constructor(n,a,d){super(ii.SKIP_SETUP),this.clockwise=ye.CLOCKWISE,this.offset=ye.OFFSET,this.wrap=ye.WRAP,this.round=ye.ROUND,this.boundEvents=[],this.symbol_=this.gauge=this.line=null,n!==ii.SKIP_SETUP&&(d&&this.configure_(d),this.setValue(n),a&&this.setValidator(a))}configure_(n){switch(super.configure_(n),n.mode){case Ue.COMPASS:this.clockwise=!0,this.offset=90;break;case Ue.PROTRACTOR:this.clockwise=!1,this.offset=0}n.clockwise&&(this.clockwise=n.clockwise),n.offset&&(this.offset=n.offset),n.wrap&&(this.wrap=n.wrap),n.round&&(this.round=n.round)}initView(){super.initView(),this.symbol_=Z(Be.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("°")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph()}showEditor_(n){super.showEditor_(n,Xl||fn||kn),n=this.dropdownCreate(),Ul().appendChild(n),this.sourceBlock_ instanceof jf&&xd(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),je(this,this.dropdownDispose.bind(this)),this.updateGraph()}dropdownCreate(){const n=Z(Be.SVG,{xmlns:mg,"xmlns:html":Cc,"xmlns:xlink":Ts,version:"1.1",height:2*ye.HALF+"px",width:2*ye.HALF+"px"});n.style.touchAction="none";const a=Z(Be.CIRCLE,{cx:ye.HALF,cy:ye.HALF,r:ye.RADIUS,class:"blocklyAngleCircle"},n);this.gauge=Z(Be.PATH,{class:"blocklyAngleGauge"},n),this.line=Z(Be.LINE,{x1:ye.HALF,y1:ye.HALF,class:"blocklyAngleLine"},n);for(let d=0;360>d;d+=15)Z(Be.LINE,{x1:ye.HALF+ye.RADIUS,y1:ye.HALF,x2:ye.HALF+ye.RADIUS-(d%45===0?10:5),y2:ye.HALF,class:"blocklyAngleMarks",transform:"rotate("+d+","+ye.HALF+","+ye.HALF+")"},n);return this.boundEvents.push(we(n,"click",this,this.hide)),this.boundEvents.push(we(a,"pointerdown",this,this.onMouseMove_,!0)),this.boundEvents.push(we(a,"pointermove",this,this.onMouseMove_,!0)),n}dropdownDispose(){for(const n of this.boundEvents)it(n);this.boundEvents.length=0,this.line=this.gauge=null}hide(){gs(this),cl()}onMouseMove_(n){var a=this.gauge.ownerSVGElement.getBoundingClientRect();const d=n.clientX-a.left-ye.HALF;n=n.clientY-a.top-ye.HALF,a=Math.atan(-n/d),isNaN(a)||(a=ms(a),0>d?a+=180:0<n&&(a+=360),a=this.clockwise?this.offset+360-a:360-(this.offset-a),this.displayMouseOrKeyboardValue(a))}displayMouseOrKeyboardValue(n){if(this.round&&(n=Math.round(n/this.round)*this.round),n=this.wrapValue(n),n!==this.value_){const a=this.value_;this.setEditorValue_(n,!1),this.sourceBlock_&&q()&&this.value_!==a&&he(new(xe(Qc))(this.sourceBlock_,this.name||null,a,this.value_))}}updateGraph(){if(this.gauge&&this.line){var n=Number(this.getText())+this.offset,a=mc(n%360);n=["M ",ye.HALF,",",ye.HALF];var d=ye.HALF,b=ye.HALF;if(!isNaN(a)){const R=Number(this.clockwise),G=mc(this.offset),ce=Math.cos(G)*ye.RADIUS,Oe=Math.sin(G)*-ye.RADIUS;R&&(a=2*G-a),d+=Math.cos(a)*ye.RADIUS,b-=Math.sin(a)*ye.RADIUS,a=Math.abs(Math.floor((a-G)/Math.PI)%2),R&&(a=1-a),n.push(" l ",ce,",",Oe," A ",ye.RADIUS,",",ye.RADIUS," 0 ",a," ",R," ",d,",",b," z")}this.gauge.setAttribute("d",n.join("")),this.line.setAttribute("x2",`${d}`),this.line.setAttribute("y2",`${b}`)}}onHtmlInputKeyDown_(n){super.onHtmlInputKeyDown_(n);var a=this.getSourceBlock();if(!a)throw new Qs;let d=0;switch(n.key){case"ArrowLeft":d=a.RTL?1:-1;break;case"ArrowRight":d=a.RTL?-1:1;break;case"ArrowDown":d=-1;break;case"ArrowUp":d=1}d&&(a=this.getValue(),this.displayMouseOrKeyboardValue(a+d*this.round),n.preventDefault(),n.stopPropagation())}doClassValidation_(n){return n=Number(n),isNaN(n)||!isFinite(n)?null:this.wrapValue(n)}wrapValue(n){return n%=360,0>n&&(n+=360),n>this.wrap&&(n-=360),n}static fromJson(n){return new this(n.angle,void 0,n)}};ye.HALF=50,ye.RADIUS=ye.HALF-1,ye.CLOCKWISE=!1,ye.OFFSET=0,ye.WRAP=360,ye.ROUND=15,Hs("field_angle",ye),ye.prototype.DEFAULT_VALUE=0,wt(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: 0.8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: 0.8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`);var Ue;(function(n){n.COMPASS="compass",n.PROTRACTOR="protractor"})(Ue||(Ue={}));var Ye=class extends ii{constructor(n,a,d){super(ii.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=Ye.CHECK_CHAR,n!==ii.SKIP_SETUP&&(d&&this.configure_(d),this.setValue(n),a&&this.setValidator(a))}configure_(n){super.configure_(n),n.checkCharacter&&(this.checkChar=n.checkCharacter)}saveState(){const n=this.saveLegacyState(Ye);return n!==null?n:this.getValueBoolean()}initView(){super.initView();const n=this.getTextElement();ke(n,"blocklyCheckbox"),n.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(n){this.checkChar=n||Ye.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(n){return n===!0||n==="TRUE"?"TRUE":n===!1||n==="FALSE"?"FALSE":null}doValueUpdate_(n){this.value_=this.convertValueToBool_(n),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(n){return typeof n=="string"?n==="TRUE":!!n}static fromJson(n){return new this(n.checked,void 0,n)}};Ye.CHECK_CHAR="✓",Hs("field_checkbox",Ye),Ye.prototype.DEFAULT_VALUE=!1;var ot=class extends ii{constructor(n,a,d){super(ii.SKIP_SETUP),this.highlightedIndex=this.picker=null,this.boundEvents=[],this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles=this.colours=null,this.columns=0,n!==ii.SKIP_SETUP&&(d&&this.configure_(d),this.setValue(n),a&&this.setValidator(a))}configure_(n){super.configure_(n),n.colourOptions&&(this.colours=n.colourOptions),n.colourTitles&&(this.titles=n.colourTitles),n.columns&&(this.columns=n.columns)}initView(){this.size_=new Es(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1",this.getBorderRect().setAttribute("stroke","#fff"),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const n=this.getSourceBlock();if(!n)throw new Qs;const a=this.getConstants();return n.isSimpleReporter()&&!(a==null||!a.FIELD_COLOUR_FULL_BLOCK)}applyColour(){const n=this.getSourceBlock();if(!n)throw new Qs;if(this.fieldGroup_){var a=this.borderRect_;if(!a)throw Error("The border rect has not been initialized");this.isFullBlockField()?(a.style.display="none",n.pathObject.svgPath.setAttribute("fill",this.getValue()),n.pathObject.svgPath.setAttribute("stroke","#fff")):(a.style.display="block",a.style.fill=this.getValue())}}getSize(){let n;return(n=this.getConstants())!=null&&n.FIELD_COLOUR_FULL_BLOCK&&(this.render_(),this.isDirty_=!1),super.getSize()}render_(){super.render_();const n=this.getSourceBlock();if(!n)throw new Qs;n.applyColour()}updateSize_(n){var a=this.getConstants();this.isFullBlockField()?(n=2*(n??0),a=a.FIELD_TEXT_HEIGHT):(n=a.FIELD_COLOUR_DEFAULT_WIDTH,a=a.FIELD_COLOUR_DEFAULT_HEIGHT),this.size_.height=a,this.size_.width=n,this.positionBorderRect_()}doClassValidation_(n){return typeof n!="string"?null:La(n)}getText(){let n=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(n)&&(n="#"+n[1]+n[3]+n[5]),n}setColours(n,a){return this.colours=n,a&&(this.titles=a),this}setColumns(n){return this.columns=n,this}showEditor_(){this.dropdownCreate(),Ul().appendChild(this.picker),je(this,this.dropdownDispose.bind(this)),this.picker.focus({preventScroll:!0})}onClick(n){n=(n=n.target)&&n.getAttribute("data-colour"),n!==null&&(this.setValue(n),gs(this))}onKeyDown(n){let a=!0;var d;switch(n.key){case"ArrowUp":this.moveHighlightBy(0,-1);break;case"ArrowDown":this.moveHighlightBy(0,1);break;case"ArrowLeft":this.moveHighlightBy(-1,0);break;case"ArrowRight":this.moveHighlightBy(1,0);break;case"Enter":(d=this.getHighlighted())&&(d=d.getAttribute("data-colour"),d!==null&&this.setValue(d)),ca();break;default:a=!1}a&&n.stopPropagation()}moveHighlightBy(n,a){if(this.highlightedIndex){var d=this.colours||ot.COLOURS,b=this.columns||ot.COLUMNS,R=this.highlightedIndex%b,G=Math.floor(this.highlightedIndex/b);R+=n,G+=a,0>n?0>R&&0<G?(R=b-1,G--):0>R&&(R=0):0<n?R>b-1&&G<Math.floor(d.length/b)-1?(R=0,G++):R>b-1&&R--:0>a?0>G&&(G=0):0<a&&G>Math.floor(d.length/b)-1&&(G=Math.floor(d.length/b)-1),this.setHighlightedCell(this.picker.childNodes[G].childNodes[R],G*b+R)}}onMouseMove(n){const a=(n=n.target)&&Number(n.getAttribute("data-index"));a!==null&&a!==this.highlightedIndex&&this.setHighlightedCell(n,a)}onMouseEnter(){let n;(n=this.picker)==null||n.focus({preventScroll:!0})}onMouseLeave(){var n;(n=this.picker)==null||n.blur(),(n=this.getHighlighted())&&mt(n,"blocklyColourHighlighted")}getHighlighted(){if(!this.highlightedIndex)return null;const n=this.columns||ot.COLUMNS,a=this.picker.childNodes[Math.floor(this.highlightedIndex/n)];return a?a.childNodes[this.highlightedIndex%n]:null}setHighlightedCell(n,a){const d=this.getHighlighted();d&&mt(d,"blocklyColourHighlighted"),ke(n,"blocklyColourHighlighted"),this.highlightedIndex=a,(n=n.getAttribute("id"))&&this.picker&&sr(this.picker,Bs.ACTIVEDESCENDANT,n)}dropdownCreate(){const n=this.columns||ot.COLUMNS,a=this.colours||ot.COLOURS,d=this.titles||ot.TITLES,b=this.getValue(),R=document.createElement("table");R.className="blocklyColourTable",R.tabIndex=0,R.dir="ltr",Ur(R,Ic.GRID),sr(R,Bs.EXPANDED,!0),sr(R,Bs.ROWCOUNT,Math.floor(a.length/n)),sr(R,Bs.COLCOUNT,n);let G;for(let ce=0;ce<a.length;ce++){ce%n===0&&(G=document.createElement("tr"),Ur(G,Ic.ROW),R.appendChild(G));const Oe=document.createElement("td");G.appendChild(Oe),Oe.setAttribute("data-colour",a[ce]),Oe.title=d[ce]||a[ce],Oe.id=ie(),Oe.setAttribute("data-index",`${ce}`),Ur(Oe,Ic.GRIDCELL),sr(Oe,Bs.LABEL,a[ce]),sr(Oe,Bs.SELECTED,a[ce]===b),Oe.style.backgroundColor=a[ce],a[ce]===b&&(Oe.className="blocklyColourSelected",this.highlightedIndex=ce)}this.boundEvents.push(we(R,"pointerdown",this,this.onClick,!0)),this.boundEvents.push(we(R,"pointermove",this,this.onMouseMove,!0)),this.boundEvents.push(we(R,"pointerenter",this,this.onMouseEnter,!0)),this.boundEvents.push(we(R,"pointerleave",this,this.onMouseLeave,!0)),this.boundEvents.push(we(R,"keydown",this,this.onKeyDown,!1)),this.picker=R}dropdownDispose(){for(const n of this.boundEvents)it(n);this.boundEvents.length=0,this.highlightedIndex=this.picker=null}static fromJson(n){return new this(n.colour,void 0,n)}};ot.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),ot.TITLES=[],ot.COLUMNS=7,ot.prototype.DEFAULT_VALUE=ot.COLOURS[0],Hs("field_colour",ot),wt(`
.blocklyColourTable {
  border-collapse: collapse;
  display: block;
  outline: none;
  padding: 1px;
}

.blocklyColourTable>tr>td {
  border: 0.5px solid #888;
  box-sizing: border-box;
  cursor: pointer;
  display: inline-block;
  height: 20px;
  padding: 0;
  width: 20px;
}

.blocklyColourTable>tr>td.blocklyColourHighlighted {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0, 0, 0, 0.3);
  position: relative;
}

.blocklyColourSelected, .blocklyColourSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}
`);var Ht=class extends na{constructor(n,a,d){super(String(n??""),a,d),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(n){return new this(Er(n.text),void 0,n)}};Hs("field_label_serializable",Ht);var Gt=class extends b0{constructor(n,a,d){super(ii.SKIP_SETUP),this.textGroup=null,this.maxLines_=1/0,this.isOverflowedY_=!1,n!==ii.SKIP_SETUP&&(d&&this.configure_(d),this.setValue(n),a&&this.setValidator(a))}configure_(n){super.configure_(n),n.maxLines&&this.setMaxLines(n.maxLines)}toXml(n){return n.textContent=this.getValue().replace(/\n/g,"&#10;"),n}fromXml(n){this.setValue(n.textContent.replace(/&#10;/g,`
`))}saveState(){const n=this.saveLegacyState(Gt);return n!==null?n:this.getValue()}loadState(n){this.loadLegacyState(ii,n)||this.setValue(n)}initView(){this.createBorderRect_(),this.textGroup=Z(Be.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const n=this.getSourceBlock();if(!n)throw new Qs;let a=this.getText();if(!a)return ii.NBSP;const d=a.split(`
`);a="";const b=this.isOverflowedY_?this.maxLines_:d.length;for(let R=0;R<b;R++){let G=d[R];G.length>this.maxDisplayLength?G=G.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&R===b-1&&(G=G.substring(0,G.length-3)+"..."),G=G.replace(/\s/g,ii.NBSP),a+=G,R!==b-1&&(a+=`
`)}return n.RTL&&(a+="‏"),a}doValueUpdate_(n){super.doValueUpdate_(n),this.value_!==null&&(this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_)}render_(){var n=this.getSourceBlock();if(!n)throw new Qs;for(var a,d=this.textGroup;a=d.firstChild;)d.removeChild(a);a=this.getDisplayText_().split(`
`);let b=0;for(let R=0;R<a.length;R++){const G=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;Z(Be.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:b+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},d).appendChild(document.createTextNode(a[R])),b+=G}this.isBeingEdited_&&(d=this.htmlInput_,this.isOverflowedY_?ke(d,"blocklyHtmlTextAreaInputOverflowedY"):mt(d,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(n.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),n=this.htmlInput_,this.isTextValid_?(mt(n,"blocklyInvalidInput"),sr(n,Bs.INVALID,!1)):(ke(n,"blocklyInvalidInput"),sr(n,Bs.INVALID,!0)))}updateSize_(){var n=this.textGroup.childNodes;const a=this.getConstants().FIELD_TEXT_FONTSIZE,d=this.getConstants().FIELD_TEXT_FONTWEIGHT,b=this.getConstants().FIELD_TEXT_FONTFAMILY;let R=0,G=0;for(var ce=0;ce<n.length;ce++){var Oe=Ge(n[ce],a,d,b);Oe>R&&(R=Oe),G+=this.getConstants().FIELD_TEXT_HEIGHT+(0<ce?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(n=String(this.value_).split(`
`),ce=Z(Be.TEXT,{class:"blocklyText blocklyMultilineText"}),Oe=0;Oe<n.length;Oe++){n[Oe].length>this.maxDisplayLength&&(n[Oe]=n[Oe].substring(0,this.maxDisplayLength)),ce.textContent=n[Oe];const Nt=Ge(ce,a,d,b);Nt>R&&(R=Nt)}R+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(G+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,R+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",`${R}`),this.borderRect_.setAttribute("height",`${G}`)),this.size_.width=R,this.size_.height=G,this.positionBorderRect_()}showEditor_(n,a){super.showEditor_(n,a),this.forceRerender()}widgetCreate_(){const n=Us(),a=this.workspace_.getScale(),d=document.createElement("textarea");d.className="blocklyHtmlInput blocklyHtmlTextAreaInput",d.setAttribute("spellcheck",String(this.spellcheck_));var b=this.getConstants().FIELD_TEXT_FONTSIZE*a+"pt";n.style.fontSize=b,d.style.fontSize=b,d.style.borderRadius=b0.BORDERRADIUS*a+"px",b=this.getConstants().FIELD_BORDER_RECT_X_PADDING*a;const R=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*a/2;return d.style.padding=R+"px "+b+"px "+R+"px "+b+"px",b=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,d.style.lineHeight=b*a+"px",n.appendChild(d),d.value=d.defaultValue=this.getEditorText_(this.value_),d.setAttribute("data-untyped-default-value",String(this.value_)),d.setAttribute("data-old-value",""),ln?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(d),d}setMaxLines(n){typeof n=="number"&&0<n&&n!==this.maxLines_&&(this.maxLines_=n,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(n){n.key!=="Enter"&&super.onHtmlInputKeyDown_(n)}static fromJson(n){return new this(Er(n.text),void 0,n)}};Hs("field_multilinetext",Gt),wt(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`);var Qt=class extends Vv{constructor(n,a,d,b,R,G){super(ii.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,n!==ii.SKIP_SETUP&&(G?this.configure_(G):this.setConstraints(a,d,b),this.setValue(n),R&&this.setValidator(R))}configure_(n){super.configure_(n),this.setMinInternal(n.min),this.setMaxInternal(n.max),this.setPrecisionInternal(n.precision)}setConstraints(n,a,d){this.setMinInternal(n),this.setMaxInternal(a),this.setPrecisionInternal(d),this.setValue(this.getValue())}setMin(n){this.setMinInternal(n),this.setValue(this.getValue())}setMinInternal(n){n==null?this.min_=-1/0:(n=Number(n),isNaN(n)||(this.min_=n))}getMin(){return this.min_}setMax(n){this.setMaxInternal(n),this.setValue(this.getValue())}setMaxInternal(n){n==null?this.max_=1/0:(n=Number(n),isNaN(n)||(this.max_=n))}getMax(){return this.max_}setPrecision(n){this.setPrecisionInternal(n),this.setValue(this.getValue())}setPrecisionInternal(n){this.precision_=Number(n)||0;let a=String(this.precision_);a.indexOf("e")!==-1&&(a=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const d=a.indexOf(".");this.decimalPlaces=d===-1?n?0:null:a.length-d-1}getPrecision(){return this.precision_}doClassValidation_(n){return n===null||(n=`${n}`.replace(/O/gi,"0"),n=n.replace(/,/g,""),n=n.replace(/infinity/i,"Infinity"),n=Number(n||0),isNaN(n))?null:(n=Math.min(Math.max(n,this.min_),this.max_),this.precision_&&isFinite(n)&&(n=Math.round(n/this.precision_)*this.precision_),this.decimalPlaces!==null&&(n=Number(n.toFixed(this.decimalPlaces))),n)}widgetCreate_(){const n=super.widgetCreate_();return-1/0<this.min_&&(n.min=`${this.min_}`,sr(n,Bs.VALUEMIN,this.min_)),1/0>this.max_&&(n.max=`${this.max_}`,sr(n,Bs.VALUEMAX,this.max_)),n}static fromJson(n){return new this(n.value,void 0,void 0,void 0,void 0,n)}};Hs("field_number",Qt),Qt.prototype.DEFAULT_VALUE=0;var yn=class extends Ud{constructor(n,a,d,b,R){super(ii.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=yn.dropdownCreate,this.defaultVariableName=typeof n=="string"?n:"",this.size_=new Es(0,0),n!==ii.SKIP_SETUP&&(R?this.configure_(R):this.setTypes(d,b),a&&this.setValidator(a))}configure_(n){super.configure_(n),this.setTypes(n.variableTypes,n.defaultType)}initModel(){var n=this.getSourceBlock();if(!n)throw new Qs;this.variable||(n=t.getOrCreateVariablePackage$$module$build$src$core$variables(n.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(n.getId()))}shouldAddBorderRect_(){const n=this.getSourceBlock();if(!n)throw new Qs;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||n.type!=="variables_get")}fromXml(n){var a=this.getSourceBlock();if(!a)throw new Qs;const d=n.getAttribute("id"),b=n.textContent,R=n.getAttribute("variabletype")||n.getAttribute("variableType")||"";if(a=t.getOrCreateVariablePackage$$module$build$src$core$variables(a.workspace,d,b,R),R!==null&&R!==a.type)throw Error("Serialized variable type with id '"+a.getId()+"' had type "+a.type+", and does not match variable field that references it: "+bi(n)+".");this.setValue(a.getId())}toXml(n){return this.initModel(),n.id=this.variable.getId(),n.textContent=this.variable.name,this.variable.type&&n.setAttribute("variabletype",this.variable.type),n}saveState(n){var a=this.saveLegacyState(yn);return a!==null||(this.initModel(),a={id:this.variable.getId()},n&&(a.name=this.variable.name,a.type=this.variable.type)),a}loadState(n){const a=this.getSourceBlock();if(!a)throw new Qs;this.loadLegacyState(yn,n)||(n=t.getOrCreateVariablePackage$$module$build$src$core$variables(a.workspace,n.id||null,n.name,n.type||""),this.setValue(n.getId()))}setSourceBlock(n){if(n.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(n)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(n){if(n===null)return null;var a=this.getSourceBlock();if(!a)throw new Qs;return a=t.getVariable$$module$build$src$core$variables(a.workspace,n),a?(a=a.type,this.typeIsAllowed(a)?n:(console.warn("Variable type doesn't match this field!  Type was "+a),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+n),null)}doValueUpdate_(n){const a=this.getSourceBlock();if(!a)throw new Qs;this.variable=t.getVariable$$module$build$src$core$variables(a.workspace,n),super.doValueUpdate_(n)}typeIsAllowed(n){const a=this.getVariableTypes();if(!a)return!0;for(let d=0;d<a.length;d++)if(n===a[d])return!0;return!1}getVariableTypes(){var n=this.variableTypes;if(n===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(n=n||[""],n.length===0)throw n=this.getText(),Error("'variableTypes' of field variable "+n+" was an empty list");return n}setTypes(n=null,a=""){if(Array.isArray(n)){let d=!1;for(let b=0;b<n.length;b++)n[b]===a&&(d=!0);if(!d)throw Error("Invalid default type '"+a+"' in the definition of a FieldVariable")}else if(n!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=a,this.variableTypes=n}refreshVariableName(){this.forceRerender()}onItemSelected_(n,a){if(n=a.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(n===en){t.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(n===Jt){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(n)}referencesVariables(){return!0}static fromJson(n){return new this(Er(n.variable),void 0,void 0,void 0,n)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const n=this.getText();let a=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var d=this.getVariableTypes(),b=0;b<d.length;b++){const R=this.sourceBlock_.workspace.getVariablesOfType(d[b]);a=a.concat(R)}for(a.sort(jp.compareByName),d=[],b=0;b<a.length;b++)d[b]=[a[b].name,a[b].getId()];return d.push([t.Msg$$module$build$src$core$msg.RENAME_VARIABLE,en]),t.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&d.push([t.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",n),Jt]),d}};Hs("field_variable",yn);var Rn=class{constructor(n,a,d,b){this.workspace=n,this.targetWorkspace=a,this.isLabel_=b,this.onMouseUpWrapper=null,this.height=this.width=0,this.svgText=this.svgGroup=null,this.text=d.text,this.position=new tn(0,0),this.callbackKey=d.callbackKey||d.callbackkey,this.cssClass=d["web-class"]||null,this.info=d}createDom(){var n=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(n+=" "+this.cssClass),this.svgGroup=Z(Be.G,{class:n},this.workspace.getCanvas());let a;this.isLabel_||(a=Z(Be.RECT,{class:"blocklyFlyoutButtonShadow",rx:Rn.BORDER_RADIUS,ry:Rn.BORDER_RADIUS,x:1,y:1},this.svgGroup)),n=Z(Be.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:Rn.BORDER_RADIUS,ry:Rn.BORDER_RADIUS},this.svgGroup);const d=Z(Be.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var b=Er(this.text);this.workspace.RTL&&(b+="‏"),d.textContent=b,this.isLabel_&&(this.svgText=d,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const R=Pt(d,"fontSize"),G=Pt(d,"fontWeight"),ce=Pt(d,"fontFamily");if(this.width=Bt(d,R,G,ce),b=Pe(b,R,G,ce),this.height=b.height,!this.isLabel_){this.width+=2*Rn.TEXT_MARGIN_X,this.height+=2*Rn.TEXT_MARGIN_Y;let Oe;(Oe=a)==null||Oe.setAttribute("width",String(this.width));let Nt;(Nt=a)==null||Nt.setAttribute("height",String(this.height))}return n.setAttribute("width",String(this.width)),n.setAttribute("height",String(this.height)),d.setAttribute("x",String(this.width/2)),d.setAttribute("y",String(this.height/2-b.height/2+b.baseline)),this.updateTransform(),this.onMouseUpWrapper=we(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(n,a){this.position.x=n,this.position.y=a,this.updateTransform()}isLabel(){return this.isLabel_}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper&&it(this.onMouseUpWrapper),this.svgGroup&&ut(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}onMouseUp(n){(n=this.targetWorkspace.getGesture(n))&&n.cancel(),this.isLabel_&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isLabel_||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isLabel_||(n=this.targetWorkspace.getButtonCallback(this.callbackKey))&&n(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};Rn.TEXT_MARGIN_X=5,Rn.TEXT_MARGIN_Y=2,Rn.BORDER_RADIUS=4,wt(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var pr=class extends Db{constructor(n,a){super(n),this.flyout_=a}getBoundingBox_(){let n;try{n=this.workspace_.getCanvas().getBBox()}catch{n={height:0,y:0,width:0,x:0}}return n}getContentMetrics(n){const a=this.getBoundingBox_();return n=n?1:this.workspace_.scale,{height:a.height*n,width:a.width*n,top:a.y*n,left:a.x*n}}getScrollMetrics(n,a,d){return a=d||this.getContentMetrics(),d=this.flyout_.MARGIN*this.workspace_.scale,n=n?this.workspace_.scale:1,{height:(a.height+2*d)/n,width:(a.width+a.left+d)/n,top:0,left:0}}},Or;(function(n){n.BLOCK="block",n.BUTTON="button"})(Or||(Or={}));var rr=class extends Rb{constructor(n){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,n.setMetrics=this.setMetrics_.bind(this),this.workspace_=new rf(n),this.workspace_.setMetricsManager(new pr(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=se(),this.RTL=!!n.RTL,this.toolboxPosition_=n.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(n){return this.svgGroup_=Z(n,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=Z(Be.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(n){this.targetWorkspace=n,this.workspace_.targetWorkspace=n,this.workspace_.scrollbar=new IE(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(we(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(we(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),n.getComponentManager().addComponent({component:this,weight:1,capabilities:[ba.Capability.AUTOHIDEABLE,ba.Capability.DELETE_AREA,ba.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const n of this.boundEvents)it(n);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&ut(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(n){this.autoClose=n,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(n){!n&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}isVisible(){return this.isVisible_}setVisible(n){const a=n!==this.isVisible();this.isVisible_=n,a&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(n){const a=n!==this.containerVisible;this.containerVisible=n,a&&this.updateDisplay()}updateDisplay(){let n;n=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=n?"block":"none");let a;(a=this.workspace_.scrollbar)==null||a.setContainerVisible(n)}positionAt_(n,a,d,b){let R;(R=this.svgGroup_)==null||R.setAttribute("width",`${n}`);let G;(G=this.svgGroup_)==null||G.setAttribute("height",`${a}`),this.workspace_.setCachedParentSvgSize(n,a),this.svgGroup_&&X(this.svgGroup_,"translate("+d+"px,"+b+"px)"),(n=this.workspace_.scrollbar)&&(n.setOrigin(d,b),n.resize(),n.hScroll&&n.hScroll.setPosition(n.hScroll.position.x,n.hScroll.position.y),n.vScroll&&n.vScroll.setPosition(n.vScroll.position.x,n.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const n of this.listeners)it(n);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(n){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof n=="string"&&(n=this.getDynamicCategoryContents(n)),this.setVisible(!0),n=dt(n),n=this.createFlyoutInfo(n),Bi(this.workspace_),this.layout_(n.contents,n.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(n){const a=[],d=[];this.permanentlyDisabled.length=0;const b=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const R of n){if("custom"in R){n=this.getDynamicCategoryContents(R.custom),n=dt(n);const{contents:G,gaps:ce}=this.createFlyoutInfo(n);a.push(...G),d.push(...ce)}switch(R.kind.toUpperCase()){case"BLOCK":n=R;const G=this.createFlyoutBlock(n);a.push({type:Or.BLOCK,block:G}),this.addBlockGap(n,d,b);break;case"SEP":this.addSeparatorGap(R,d,b);break;case"LABEL":n=this.createButton(R,!0),a.push({type:Or.BUTTON,button:n}),d.push(b);break;case"BUTTON":n=this.createButton(R,!1),a.push({type:Or.BUTTON,button:n}),d.push(b)}}return{contents:a,gaps:d}}getDynamicCategoryContents(n){if(n=this.workspace_.targetWorkspace.getToolboxCategoryCallback(n),typeof n!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return n(this.workspace_.targetWorkspace)}createButton(n,a){return new Rn(this.workspace_,this.targetWorkspace,n,a)}createFlyoutBlock(n){let a;return n.blockxml?(n=typeof n.blockxml=="string"?t.textToDom$$module$build$src$core$utils$xml(n.blockxml):n.blockxml,(a=this.getRecycledBlock(n.getAttribute("type")))||(a=Ms(n,this.workspace_))):(a=this.getRecycledBlock(n.type),a||(n.enabled===void 0&&(n.enabled=n.disabled!=="true"&&n.disabled!==!0),a=jr(n,this.workspace_))),a.isEnabled()||this.permanentlyDisabled.push(a),a}getRecycledBlock(n){let a=-1;for(let d=0;d<this.recycledBlocks.length;d++)if(this.recycledBlocks[d].type===n){a=d;break}return a===-1?void 0:this.recycledBlocks.splice(a,1)[0]}addBlockGap(n,a,d){let b;n.gap?b=parseInt(String(n.gap)):n.blockxml&&(n=typeof n.blockxml=="string"?t.textToDom$$module$build$src$core$utils$xml(n.blockxml):n.blockxml,b=parseInt(n.getAttribute("gap"))),a.push(!b||isNaN(b)?d:b)}addSeparatorGap(n,a,d){n=parseInt(String(n.gap)),!isNaN(n)&&0<a.length?a[a.length-1]=n:a.push(d)}clearOldBlocks(){var n=this.workspace_.getTopBlocks(!1);for(let d=0,b;b=n[d];d++)this.blockIsRecyclable_(b)?this.recycleBlock(b):b.dispose(!1,!1);for(n=0;n<this.mats.length;n++){const d=this.mats[n];d&&(Xh(d),ut(d))}this.mats.length=0;for(let d=0,b;b=this.buttons_[d];d++)b.dispose();this.buttons_.length=0;let a;(a=this.workspace_.getPotentialVariableMap())==null||a.clear()}emptyRecycledBlocks(){for(let n=0;n<this.recycledBlocks.length;n++)this.recycledBlocks[n].dispose();this.recycledBlocks=[]}blockIsRecyclable_(n){return!1}recycleBlock(n){const a=n.getRelativeToSurfaceXY();n.moveBy(-a.x,-a.y),this.recycledBlocks.push(n)}addBlockListeners_(n,a,d){this.listeners.push(we(n,"pointerdown",null,this.blockMouseDown(a))),this.listeners.push(we(d,"pointerdown",null,this.blockMouseDown(a))),this.listeners.push(ze(n,"pointerenter",a,()=>{this.targetWorkspace.isDragging()||a.addSelect()})),this.listeners.push(ze(n,"pointerleave",a,()=>{this.targetWorkspace.isDragging()||a.removeSelect()})),this.listeners.push(ze(d,"pointerenter",a,()=>{this.targetWorkspace.isDragging()||a.addSelect()})),this.listeners.push(ze(d,"pointerleave",a,()=>{this.targetWorkspace.isDragging()||a.removeSelect()}))}blockMouseDown(n){return a=>{const d=this.targetWorkspace.getGesture(a);d&&(d.setStartBlock(n),d.handleFlyoutStart(a,this))}}onMouseDown(n){const a=this.targetWorkspace.getGesture(n);a&&a.handleFlyoutStart(n,this)}isBlockCreatable(n){return n.isEnabled()}createBlock(n){let a=null;t.disable$$module$build$src$core$events$utils();var d=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{a=this.placeNewBlock(n)}finally{t.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),n=su(this.targetWorkspace,d),q()){for(t.setGroup$$module$build$src$core$events$utils(!0),d=0;d<n.length;d++){const b=n[d];he(new(xe(za))(b))}he(new(xe(t.CREATE$$module$build$src$core$events$utils))(a))}return this.autoClose?this.hide():this.filterForCapacity(),a}initFlyoutButton_(n,a,d){const b=n.createDom();n.moveTo(a,d),n.show(),this.listeners.push(we(b,"pointerdown",this,this.onMouseDown)),this.buttons_.push(n)}createRect_(n,a,d,b,R){return a=Z(Be.RECT,{"fill-opacity":0,x:a,y:d,height:b.height,width:b.width}),a.tooltip=n,ei(a),this.workspace_.getCanvas().insertBefore(a,n.getSvgRoot()),this.rectMap_.set(n,a),this.mats[R]=a}moveRectToBlock_(n,a){const d=a.getHeightWidth();n.setAttribute("width",String(d.width)),n.setAttribute("height",String(d.height)),a=a.getRelativeToSurfaceXY(),n.setAttribute("y",String(a.y)),n.setAttribute("x",String(this.RTL?a.x-d.width:a.x))}filterForCapacity(){const n=this.workspace_.getTopBlocks(!1);for(let a=0,d;d=n[a];a++)if(this.permanentlyDisabled.indexOf(d)===-1){const b=this.targetWorkspace.isCapacityAvailable(V(d));for(;d;)d.setEnabled(b),d=d.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(n){var a=this.targetWorkspace;if(!n.getSvgRoot())throw Error("oldBlock is not rendered");const d=qr(n);return a.setResizesEnabled(!1),a=Un(d,a),this.positionNewBlock(n,a),a}positionNewBlock(n,a){const d=this.targetWorkspace;var b=d.getOriginOffsetInPixels(),R=this.workspace_.getOriginOffsetInPixels();n=n.getRelativeToSurfaceXY(),n.scale(this.workspace_.scale),R=tn.sum(R,n),b=tn.difference(R,b),b.scale(1/d.scale),a.moveTo(new tn(b.x,b.y))}};rr.FlyoutItemType=Or;var si=class extends rr{constructor(n){super(n),this.horizontalLayout=!0}setMetrics_(n){if(this.isVisible()){var a=this.workspace_.getMetricsManager(),d=a.getScrollMetrics(),b=a.getViewMetrics();a=a.getAbsoluteMetrics(),typeof n.x=="number"&&(this.workspace_.scrollX=-(d.left+(d.width-b.width)*n.x)),this.workspace_.translate(this.workspace_.scrollX+a.left,this.workspace_.scrollY+a.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var n=this.targetWorkspace.getMetricsManager();const a=n.getAbsoluteMetrics(),d=n.getViewMetrics();n=n.getToolboxMetrics();const b=this.toolboxPosition_===Xn.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?b?n.height:d.height-this.height_:b?0:d.height:b?0:d.height+a.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var n=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=n.width,this.setBackgroundPath(n.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),n=this.getX();var a=this.getY();this.positionAt_(this.width_,this.height_,n,a)}}setBackgroundPath(n,a){const d=this.toolboxPosition_===Xn.TOP,b=["M 0,"+(d?0:this.CORNER_RADIUS)];d?(b.push("h",n+2*this.CORNER_RADIUS),b.push("v",a),b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),b.push("h",-n),b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),b.push("h",n),b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),b.push("v",a),b.push("h",-n-2*this.CORNER_RADIUS)),b.push("z"),this.svgBackground_.setAttribute("d",b.join(" "))}scrollToStart(){let n;(n=this.workspace_.scrollbar)==null||n.setX(this.RTL?1/0:0)}wheel_(n){var a=ht(n);if(a=a.x||a.y){const d=this.workspace_.getMetricsManager(),b=d.getScrollMetrics();a=d.getViewMetrics().left-b.left+a;let R;(R=this.workspace_.scrollbar)==null||R.setX(a),cl(),ca()}n.preventDefault(),n.stopPropagation()}layout_(n,a){this.workspace_.scale=this.targetWorkspace.scale;const d=this.MARGIN;let b=d+this.tabWidth_;this.RTL&&(n=n.reverse());for(let Oe=0,Nt;Nt=n[Oe];Oe++)if(Nt.type==="block"){var R=Nt.block,G=R.getDescendants(!1);for(let No=0,$o;$o=G[No];No++)$o.isInFlyout=!0;G=R.getSvgRoot();const $n=R.getHeightWidth();var ce=R.outputConnection?this.tabWidth_:0;ce=this.RTL?b+$n.width:b-ce,R.moveBy(ce,d),ce=this.createRect_(R,ce,d,$n,Oe),b+=$n.width+a[Oe],this.addBlockListeners_(G,R,ce)}else Nt.type==="button"&&(R=Nt.button,this.initFlyoutButton_(R,b,d),b+=R.width+a[Oe])}isDragTowardWorkspace(n){n=Math.atan2(n.y,n.x)/Math.PI*180;const a=this.dragAngleRange_;return n<90+a&&n>90-a||n>-90-a&&n<-90+a}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const n=this.svgGroup_.getBoundingClientRect(),a=n.top;return this.toolboxPosition_===Xn.TOP?new gi(-1e9,a+n.height,-1e9,1e9):new gi(a,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let n=0;const a=this.workspace_.getTopBlocks(!1);for(let b=0,R;R=a[b];b++)n=Math.max(n,R.getHeightWidth().height);const d=this.buttons_;for(let b=0,R;R=d[b];b++)n=Math.max(n,R.height);if(n+=1.5*this.MARGIN,n*=this.workspace_.scale,n+=Oo.scrollbarThickness,this.height_!==n){for(let b=0,R;R=a[b];b++)this.rectMap_.has(R)&&this.moveRectToBlock_(this.rectMap_.get(R),R);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Xn.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+n),this.height_=n,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};i(Lt.FLYOUTS_HORIZONTAL_TOOLBOX,Ua,si);var _i=class extends rr{constructor(n){super(n)}setMetrics_(n){if(this.isVisible()){var a=this.workspace_.getMetricsManager(),d=a.getScrollMetrics(),b=a.getViewMetrics();a=a.getAbsoluteMetrics(),typeof n.y=="number"&&(this.workspace_.scrollY=-(d.top+(d.height-b.height)*n.y)),this.workspace_.translate(this.workspace_.scrollX+a.left,this.workspace_.scrollY+a.top)}}getX(){if(!this.isVisible())return 0;var n=this.targetWorkspace.getMetricsManager();const a=n.getAbsoluteMetrics(),d=n.getViewMetrics();return n=n.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Xn.LEFT?n.width:d.width-this.width_:this.toolboxPosition_===Xn.LEFT?0:d.width:this.toolboxPosition_===Xn.LEFT?0:d.width+a.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var n=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=n.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,n.height-2*this.CORNER_RADIUS),n=this.getX();var a=this.getY();this.positionAt_(this.width_,this.height_,n,a)}}setBackgroundPath(n,a){const d=this.toolboxPosition_===Xn.RIGHT;var b=n+this.CORNER_RADIUS;b=["M "+(d?b:0)+",0"],b.push("h",d?-n:n),b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,d?0:1,d?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),b.push("v",Math.max(0,a)),b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,d?0:1,d?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),b.push("h",d?n:-n),b.push("z"),this.svgBackground_.setAttribute("d",b.join(" "))}scrollToStart(){let n;(n=this.workspace_.scrollbar)==null||n.setY(0)}wheel_(n){var a=ht(n);if(a.y){const d=this.workspace_.getMetricsManager(),b=d.getScrollMetrics();a=d.getViewMetrics().top-b.top+a.y;let R;(R=this.workspace_.scrollbar)==null||R.setY(a),cl(),ca()}n.preventDefault(),n.stopPropagation()}layout_(n,a){this.workspace_.scale=this.targetWorkspace.scale;var d=this.MARGIN;const b=this.RTL?d:d+this.tabWidth_;for(let Oe=0,Nt;Nt=n[Oe];Oe++)if(Nt.type==="block"){var R=Nt.block,G=R.getDescendants(!1);for(let No=0,$o;$o=G[No];No++)$o.isInFlyout=!0;G=R.getSvgRoot();const $n=R.getHeightWidth();var ce=R.outputConnection?b-this.tabWidth_:b;R.moveBy(ce,d),ce=this.createRect_(R,this.RTL?ce-$n.width:ce,d,$n,Oe),this.addBlockListeners_(G,R,ce),d+=$n.height+a[Oe]}else Nt.type==="button"&&(R=Nt.button,this.initFlyoutButton_(R,b,d),d+=R.height+a[Oe])}isDragTowardWorkspace(n){n=Math.atan2(n.y,n.x)/Math.PI*180;const a=this.dragAngleRange_;return n<a&&n>-a||n<-180+a||n>180-a}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const n=this.svgGroup_.getBoundingClientRect(),a=n.left;return this.toolboxPosition_===Xn.LEFT?new gi(-1e9,1e9,-1e9,a+n.width):new gi(-1e9,1e9,a,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let n=0;var a=this.workspace_.getTopBlocks(!1);for(let b=0,R;R=a[b];b++){var d=R.getHeightWidth().width;R.outputConnection&&(d-=this.tabWidth_),n=Math.max(n,d)}for(let b=0,R;R=this.buttons_[b];b++)n=Math.max(n,R.width);if(n+=1.5*this.MARGIN+this.tabWidth_,n*=this.workspace_.scale,n+=Oo.scrollbarThickness,this.width_!==n){for(let b=0,R;R=a[b];b++){if(this.RTL){d=R.getRelativeToSurfaceXY().x;let G=n/this.workspace_.scale-this.MARGIN;R.outputConnection||(G-=this.tabWidth_),R.moveBy(G-d,0)}this.rectMap_.has(R)&&this.moveRectToBlock_(this.rectMap_.get(R),R)}if(this.RTL)for(let b=0,R;R=this.buttons_[b];b++)a=R.getPosition().y,R.moveTo(n/this.workspace_.scale-R.width-this.MARGIN-this.tabWidth_,a);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Xn.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+n,this.targetWorkspace.scrollY),this.width_=n,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};_i.registryName="verticalFlyout",i(Lt.FLYOUTS_VERTICAL_TOOLBOX,Ua,_i);var ud;t.CodeGenerator$$module$build$src$core$generator=class{constructor(n){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=n,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(n){n||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),n=A());var a=[];this.init(n),n=n.getTopBlocks(!0);for(let d=0,b;b=n[d];d++){let R=this.blockToCode(b);Array.isArray(R)&&(R=R[0]),R&&(b.outputConnection&&(R=this.scrubNakedValue(R),this.STATEMENT_PREFIX&&!b.suppressPrefixSuffix&&(R=this.injectId(this.STATEMENT_PREFIX,b)+R),this.STATEMENT_SUFFIX&&!b.suppressPrefixSuffix&&(R+=this.injectId(this.STATEMENT_SUFFIX,b))),a.push(R))}return a=a.join(`
`),a=this.finish(a),a=a.replace(/^\s+\n/,""),a=a.replace(/\n\s+$/,`
`),a=a.replace(/[ \t]+\n/g,`
`)}prefixLines(n,a){return a+n.replace(/(?!\n$)\n/g,`
`+a)}allNestedComments(n){const a=[];n=n.getDescendants(!0);for(let d=0;d<n.length;d++){const b=n[d].getCommentText();b&&a.push(b)}return a.length&&a.push(""),a.join(`
`)}blockToCode(n,a){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!n)return"";if(!n.isEnabled())return a?"":this.blockToCode(n.getNextBlock());if(n.isInsertionMarker())return a?"":this.blockToCode(n.getChildren(!1)[0]);var d=this.forBlock[n.type];if(!d&&this[n.type]&&(be("block generator functions on CodeGenerator objects","10.0","11.0","the .forBlock[blockType] dictionary"),d=this[n.type]),typeof d!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${n.type}".`);if(d=d.call(n,n,this),Array.isArray(d)){if(!n.outputConnection)throw TypeError("Expecting string from statement block: "+n.type);return[this.scrub_(n,d[0],a),d[1]]}if(typeof d=="string")return this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(d=this.injectId(this.STATEMENT_PREFIX,n)+d),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(d+=this.injectId(this.STATEMENT_SUFFIX,n)),this.scrub_(n,d,a);if(d===null)return"";throw SyntaxError("Invalid code generated: "+d)}valueToCode(n,a,d){if(isNaN(d))throw TypeError("Expecting valid order from block: "+n.type);var b=n.getInputTargetBlock(a);if(!b||(a=this.blockToCode(b),a===""))return"";if(!Array.isArray(a))throw TypeError(`Expecting tuple from value block: ${b.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(n=a[0],a=a[1],isNaN(a))throw TypeError("Expecting valid order from value block: "+b.type);if(!n)return"";b=!1;var R=Math.floor(d);const G=Math.floor(a);if(R<=G&&(R!==G||R!==0&&R!==99)){for(b=!0,R=0;R<this.ORDER_OVERRIDES.length;R++)if(this.ORDER_OVERRIDES[R][0]===d&&this.ORDER_OVERRIDES[R][1]===a){b=!1;break}}return b&&(n="("+n+")"),n}statementToCode(n,a){if(n=n.getInputTargetBlock(a),a=this.blockToCode(n),typeof a!="string")throw TypeError("Expecting code from statement block: "+(n&&n.type));return a&&(a=this.prefixLines(a,this.INDENT)),a}addLoopTrap(n,a){return this.INFINITE_LOOP_TRAP&&(n=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,a),this.INDENT)+n),this.STATEMENT_SUFFIX&&!a.suppressPrefixSuffix&&(n=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,a),this.INDENT)+n),this.STATEMENT_PREFIX&&!a.suppressPrefixSuffix&&(n+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,a),this.INDENT)),n}injectId(n,a){return a=a.id.replace(/\$/g,"$$$$"),n.replace(/%1/g,"'"+a+"'")}addReservedWords(n){this.RESERVED_WORDS_+=n+","}provideFunction_(n,a){if(!this.definitions_[n]){const d=this.nameDB_.getDistinctName(n,t.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[n]=d,Array.isArray(a)&&(a=a.join(`
`)),a=a.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,d);let b;for(;b!==a;)b=a,a=a.replace(/^(( {2})*) {2}/gm,"$1\0");a=a.replace(/\0/g,this.INDENT),this.definitions_[n]=a}return this.functionNames_[n]}getVariableName(n){return this.getName(n,t.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(n){return this.getName(n,t.NameType$$module$build$src$core$names.PROCEDURE)}getName(n,a){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(n,a)}init(n){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(n,a,d){return a}finish(n){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),n}scrubNakedValue(n){return n}},ud={},ud.CodeGenerator=t.CodeGenerator$$module$build$src$core$generator;var nh=!1,Zl={};Zl.Align=t.Align$$module$build$src$core$inputs$align,Zl.DummyInput=Vf,Zl.EndRowInput=Pm,Zl.Input=xa,Zl.StatementInput=ld,Zl.ValueInput=t.ValueInput$$module$build$src$core$inputs$value_input,Zl.inputTypes=t.inputTypes$$module$build$src$core$inputs$input_types;var Ka="The insertion marker previewer tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",$p=class{constructor(n){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=n.workspace}previewReplacement(n,a,d){t.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=d,d.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(a)&&(a.highlight(),this.staticConn=a)}finally{t.enable$$module$build$src$core$events$utils()}}previewConnection(n,a){if(n!==this.draggedConn||a!==this.staticConn){t.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(n,a)&&(this.markerConn=this.previewMarker(n,a)),this.workspace.getRenderer().shouldHighlightConnection(a)&&a.highlight(),this.draggedConn=n,this.staticConn=a}finally{t.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(n,a){return a.type===En.PREVIOUS_STATEMENT||a.type===En.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof P)}previewMarker(n,a){const d=n.getSourceBlock(),b=this.createInsertionMarker(d),R=this.getMatchingConnection(d,b,n);if(!R)throw Error("Could not create insertion marker to preview connection");b.queueRender(),Bi(),R.connect(a);const G={x:a.x-R.x,y:a.y-R.y},ce=R.getOffsetInBlock().clone();return Zn().then(()=>{b==null||b.positionNearConnection(R,G,ce),b==null||b.getSvgRoot().setAttribute("visibility","visible")}),R}createInsertionMarker(n){const a=this.workspace.newBlock(n.type);if(a.setInsertionMarker(!0),n.saveExtraState){var d=n.saveExtraState(!0);d&&a.loadExtraState&&a.loadExtraState(d)}else n.mutationToDom&&(d=n.mutationToDom())&&a.domToMutation&&a.domToMutation(d);for(d=0;d<n.inputList.length;d++){const b=n.inputList[d];if(b.name===g_)continue;const R=a.inputList[d];if(!R)throw Error(Ka.replace("%1","an input"));for(let G=0;G<b.fieldRow.length;G++){const ce=b.fieldRow[G],Oe=R.fieldRow[G];if(!Oe)throw Error(Ka.replace("%1","a field"));Oe.setValue(ce.getValue())}}for(const b of a.getDescendants(!1))b.setInsertionMarker(!0);return a.setCollapsed(n.isCollapsed()),a.setInputsInline(n.getInputsInline()),a.initSvg(),a.getSvgRoot().setAttribute("visibility","hidden"),a}getMatchingConnection(n,a,d){if(n=n.getConnections_(!0),a=a.getConnections_(!0),n.length!==a.length)return null;for(let b=0;b<n.length;b++)if(n[b]===d)return a[b];return null}hidePreview(){t.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{t.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(n){const a=n.getSourceBlock(),d=a.outputConnection;let b;if((b=a.previousConnection)!=null&&b.targetConnection||d!=null&&d.targetConnection)a.unplug(!0);else{let R;(R=n.targetBlock())==null||R.unplug(!1)}a.dispose()}dispose(){this.hidePreview()}};i(Lt.CONNECTION_PREVIEWER,Ua,$p);var Kf=class extends Bv{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(n){return super.getCSS_(n).concat([`${n} .blocklyInsertionMarker>.blocklyPathLight,`,`${n} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},zE=class{constructor(n){this.inlineSteps_=this.steps_="",this.info_=n,this.RTL_=this.info_.RTL,n=n.getRenderer(),this.constants_=n.getConstants(),this.highlightConstants_=n.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(n){this.steps_+=ti(n.xPos,this.info_.startY);for(let a=0,d;d=n.elements[a];a++)Je.isLeftSquareCorner(d)?this.steps_+=this.highlightConstants_.START_POINT:Je.isLeftRoundedCorner(d)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):Je.isPreviousConnection(d)?this.steps_+=this.notchPaths_.pathLeft:Je.isHat(d)?this.steps_+=this.startPaths_.path(this.RTL_):Je.isSpacer(d)&&d.width!==0&&(this.steps_+=cn("H",d.xPos+d.width-this.highlightOffset));this.steps_+=cn("H",n.xPos+n.width-this.highlightOffset)}drawJaggedEdge_(n){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+cn("v",n.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(n){const a=n.getLastInput();if(this.RTL_){const d=n.height-a.connectionHeight;this.steps_+=_s(a.xPos+a.width-this.highlightOffset,n.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+cn("v",d)}else this.steps_+=_s(a.xPos+a.width,n.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(n){const a=n.getLastInput();if(a)if(this.RTL_){const d=n.height-2*this.insideCornerPaths_.height;this.steps_+=_s(a.xPos,n.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+cn("v",d)+this.insideCornerPaths_.pathBottom(this.RTL_)+_l(n.width-a.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=_s(a.xPos,n.yPos+n.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+_l(n.width-a.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(n){const a=n.xPos+n.width-this.highlightOffset;n instanceof fE&&n.followsStatement&&(this.steps_+=cn("H",a)),this.RTL_&&(this.steps_+=cn("H",a),n.height>this.highlightOffset&&(this.steps_+=cn("V",n.yPos+n.height-this.highlightOffset)))}drawBottomRow(n){if(this.RTL_)this.steps_+=cn("V",n.baseline-this.highlightOffset);else{const a=this.info_.bottomRow.elements[0];Je.isLeftSquareCorner(a)?this.steps_+=_s(n.xPos+this.highlightOffset,n.baseline-this.highlightOffset):Je.isLeftRoundedCorner(a)&&(this.steps_+=_s(n.xPos,n.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var n=this.info_.outputConnection;n&&(n=n.connectionOffsetY+n.height,this.RTL_?this.steps_+=_s(this.info_.startX,n):(this.steps_+=_s(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=cn("V",n)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(n=this.info_.topRow,Je.isLeftRoundedCorner(n.elements[0])?this.steps_+=cn("V",this.outsideCornerPaths_.height):this.steps_+=cn("V",n.capline+this.highlightOffset))}drawInlineInput(n){const a=this.highlightOffset,d=n.xPos+n.connectionWidth;var b=n.centerline-n.height/2;const R=n.width-n.connectionWidth,G=b+a;this.RTL_?(b=n.connectionOffsetY-a,n=n.height-(n.connectionOffsetY+n.connectionHeight)+a,this.inlineSteps_+=_s(d-a,G)+cn("v",b)+this.puzzleTabPaths_.pathDown(this.RTL_)+cn("v",n)+cn("h",R)):this.inlineSteps_+=_s(n.xPos+n.width+a,G)+cn("v",n.height)+cn("h",-R)+_s(d,b+n.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},zP=class extends Pv{constructor(n,a){super(n,a),this.highlighter_=new zE(a)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const n=this.block_.pathObject;n.setPath(this.outlinePath_+`
`+this.inlinePath_),n.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&n.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(n){this.highlighter_.drawJaggedEdge_(n),super.drawJaggedEdge_(n)}drawValueInput_(n){this.highlighter_.drawValueInput(n),super.drawValueInput_(n)}drawStatementInput_(n){this.highlighter_.drawStatementInput(n),super.drawStatementInput_(n)}drawRightSideRow_(n){this.highlighter_.drawRightSideRow(n),this.outlinePath_+=cn("H",n.xPos+n.width)+cn("V",n.yPos+n.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(n){this.highlighter_.drawInlineInput(n),super.drawInlineInput_(n)}positionInlineInputConnection_(n){const a=n.centerline-n.height/2;if(n.connectionModel){let d=n.xPos+n.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(d*=-1),n.connectionModel.setOffsetInBlock(d,a+n.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(n){const a=n.getLastInput();if(a!=null&&a.connectionModel){let d=n.xPos+n.statementEdge+a.notchOffset;d=this.info_.RTL?-1*d:d+this.constants_.DARK_PATH_OFFSET,a.connectionModel.setOffsetInBlock(d,n.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(n){const a=n.getLastInput();if(a&&a.connectionModel){let d=n.xPos+n.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(d*=-1),a.connectionModel.setOffsetInBlock(d,n.yPos)}}positionNextConnection_(){const n=this.info_.bottomRow;if(n.connection){const a=n.connection,d=a.xPos;a.connectionModel.setOffsetInBlock((this.info_.RTL?-d:d)+this.constants_.DARK_PATH_OFFSET/2,n.baseline+this.constants_.DARK_PATH_OFFSET)}}},HP=class{constructor(n){this.OFFSET=.5,this.constantProvider=n,this.START_POINT=ti(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const n=this.constantProvider.CORNER_RADIUS,a=this.OFFSET,d=(1-Math.SQRT1_2)*(n+a)-a,b=ti(d,d)+Pr("a","0 0,0",n,Cn(-d-a,n-d)),R=Pr("a","0 0,0",n+a,Cn(n+a,n+a)),G=ti(d,-d)+Pr("a","0 0,0",n+a,Cn(n-d,d+a));return{width:n+a,height:n,pathTop(ce){return ce?b:""},pathBottom(ce){return ce?R:G}}}makeOutsideCorner(){const n=this.constantProvider.CORNER_RADIUS,a=this.OFFSET,d=(1-Math.SQRT1_2)*(n-a)+a,b=ti(d,d)+Pr("a","0 0,1",n-a,Cn(n-d,-d+a)),R=ti(a,n)+Pr("a","0 0,1",n-a,Cn(n,-n+a)),G=-d,ce=ti(d,G)+Pr("a","0 0,1",n-a,Cn(-d+a,-G-n));return{height:n,topLeft(Oe){return Oe?b:R},bottomLeft(){return ce}}}makePuzzleTab(){const n=this.constantProvider.TAB_WIDTH,a=this.constantProvider.TAB_HEIGHT,d=ti(-2,-a+3.4)+_l(-.45*n,-2.1),b=cn("v",2.5)+ti(.97*-n,2.5)+os("q",[Cn(.05*-n,10),Cn(.3*n,9.5)])+ti(.67*n,-1.9)+cn("v",2.5),R=cn("v",-1.5)+ti(-.92*n,-.5)+os("q",[Cn(-.19*n,-5.5),Cn(0,-11)])+ti(.92*n,1),G=ti(-5,a-.7)+_l(.46*n,-2.1);return{width:n,height:a,pathUp(ce){return ce?d:R},pathDown(ce){return ce?b:G}}}makeNotch(){return{pathLeft:cn("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:_l(5.1,2.6)+ti(-10.2,6.8)+_l(5.1,2.6),height:12,width:10.2}}makeStartHat(){const n=this.constantProvider.START_HAT.height,a=ti(25,-8.7)+os("c",[Cn(29.7,-6.2),Cn(57.2,-.5),Cn(75,8.7)]),d=os("c",[Cn(17.8,-9.2),Cn(45.3,-14.9),Cn(75,-8.7)])+_s(100.5,n+.5);return{path(b){return b?a:d}}}},GP=class extends dE{constructor(n,a){super(n,a),this.constants_=n,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},WP=class extends Dv{constructor(n,a){super(n,a),this.constants_=n,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},VP=class extends m0{constructor(n,a){super(n,a),this.renderer_=n}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof ld||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(n,a){this.isInline&&n instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new GP(this.constants_,n)),a.hasInlineInput=!0):n instanceof ld?(a.elements.push(new WP(this.constants_,n)),a.hasStatement=!0):n instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new Cb(this.constants_,n)),a.hasExternalInput=!0):(n instanceof Vf||n instanceof Pm)&&(a.minHeight=Math.max(a.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),a.hasDummyInput=!0),this.isInline||a.align!==null||(a.align=n.align)}addElemSpacing_(){let n=!1;for(let d=0,b;b=this.rows[d];d++)b.hasExternalInput&&(n=!0);for(let d=0,b;b=this.rows[d];d++){var a=b.elements;if(b.elements=[],b.startsWithElemSpacer()&&b.elements.push(new zd(this.constants_,this.getInRowSpacing_(null,a[0]))),a.length){for(let R=0;R<a.length-1;R++){b.elements.push(a[R]);const G=this.getInRowSpacing_(a[R],a[R+1]);b.elements.push(new zd(this.constants_,G))}b.elements.push(a[a.length-1]),b.endsWithElemSpacer()&&(a=this.getInRowSpacing_(a[a.length-1],null),n&&b.hasDummyInput&&(a+=this.constants_.TAB_WIDTH),b.elements.push(new zd(this.constants_,a)))}}}getInRowSpacing_(n,a){if(!n)return a&&Je.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:a&&Je.isInlineInput(a)?this.constants_.MEDIUM_LARGE_PADDING:a&&Je.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!Je.isInput(n)&&(!a||Je.isStatementInput(a)))return Je.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:Je.isIcon(n)?2*this.constants_.LARGE_PADDING+1:Je.isHat(n)?this.constants_.NO_PADDING:Je.isPreviousOrNextConnection(n)?this.constants_.LARGE_PADDING:Je.isLeftRoundedCorner(n)?this.constants_.MIN_BLOCK_WIDTH:Je.isJaggedEdge(n)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(Je.isInput(n)&&!a){if(Je.isExternalInput(n))return this.constants_.NO_PADDING;if(Je.isInlineInput(n))return this.constants_.LARGE_PADDING;if(Je.isStatementInput(n))return this.constants_.NO_PADDING}if(!Je.isInput(n)&&a&&Je.isInput(a)){if(Je.isField(n)&&n.isEditable){if(Je.isInlineInput(a)||Je.isExternalInput(a))return this.constants_.SMALL_PADDING}else{if(Je.isInlineInput(a)||Je.isExternalInput(a))return this.constants_.MEDIUM_LARGE_PADDING;if(Je.isStatementInput(a))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(Je.isIcon(n)&&a&&!Je.isInput(a))return this.constants_.LARGE_PADDING;if(Je.isInlineInput(n)&&a&&Je.isField(a))return a.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(Je.isLeftSquareCorner(n)&&a){if(Je.isHat(a))return this.constants_.NO_PADDING;if(Je.isPreviousConnection(a))return a.notchOffset;if(Je.isNextConnection(a))return a.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(Je.isLeftRoundedCorner(n)&&a){if(Je.isPreviousConnection(a))return a.notchOffset-this.constants_.CORNER_RADIUS;if(Je.isNextConnection(a))return a.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return Je.isField(n)&&a&&Je.isField(a)&&n.isEditable===a.isEditable||a&&Je.isJaggedEdge(a)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(n,a){return Je.isTopRow(n)&&Je.isBottomRow(a)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:Je.isTopRow(n)||Je.isBottomRow(a)?this.constants_.NO_PADDING:n.hasExternalInput&&a.hasExternalInput?this.constants_.LARGE_PADDING:!n.hasStatement&&a.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:n.hasStatement&&a.hasStatement||!n.hasStatement&&a.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(n,a){if(Je.isSpacer(a))return n.yPos+a.height/2;if(Je.isBottomRow(n))return n=n.yPos+n.height-n.descenderHeight,Je.isNextConnection(a)?n+a.height/2:n-a.height/2;if(Je.isTopRow(n))return Je.isHat(a)?n.capline-a.height/2:n.capline+a.height/2;let d=n.yPos;return Je.isField(a)||Je.isIcon(a)?(d+=a.height/2,(n.hasInlineInput||n.hasStatement)&&a.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=n.height&&(d+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):d=Je.isInlineInput(a)?d+a.height/2:d+n.height/2,d}alignRowElements_(){if(this.isInline){var n=0,a=new WeakMap,d=null;for(let b=this.rows.length-1,R;R=this.rows[b];b--)a.set(R,n),Je.isInputRow(R)&&(R.hasStatement&&this.alignStatementRow_(R),d&&d.hasStatement&&R.width<d.width?a.set(R,d.width):n=R.hasStatement?R.width:Math.max(n,R.width),d=R);n=0;for(let b=0,R;R=this.rows[b];b++)R.hasStatement?n=this.getDesiredRowWidth_(R):Je.isSpacer(R)?R.width=Math.max(n,a.get(R)):(d=R.width,n=Math.max(n,a.get(R))-d,0<n&&this.addAlignmentPadding_(R,n),n=R.width)}else super.alignRowElements_()}getDesiredRowWidth_(n){return this.isInline&&n.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(n)}finalize_(){let n=0,a=0;for(let b=0,R;R=this.rows[b];b++){R.yPos=a,R.xPos=this.startX,a+=R.height,n=Math.max(n,R.widthWithConnectedBlocks);var d=a-this.topRow.ascenderHeight;R===this.bottomRow&&d<this.constants_.MIN_BLOCK_HEIGHT&&(d=this.constants_.MIN_BLOCK_HEIGHT-d,this.bottomRow.height+=d,a+=d),this.recordElemPositions_(R)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(d=this.block_.nextConnection.targetBlock())&&(n=Math.max(n,d.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=a-this.bottomRow.descenderHeight,this.widthWithChildren=n+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=a+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},jP=class extends Fv{constructor(n,a,d){super(n,a,d),this.constants=d,this.colourDark="#000000",this.svgPathDark=Z(Be.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=Z(Be.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(n){this.svgPath.setAttribute("d",n),this.svgPathDark.setAttribute("d",n)}setHighlightPath(n){this.svgPathLight.setAttribute("d",n)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(n){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(n),this.svgPath.setAttribute("stroke","none")}setStyle(n){this.style=n,this.colourDark=bc("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(n){n?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(n){if(n){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(n){super.updateDisabled_(n),n&&this.svgPath.setAttribute("stroke","none")}},XP=class extends Uv{constructor(n){super(n),this.highlightConstants=null}init(n,a){super.init(n,a),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(n,a){super.refreshDom(n,a),this.getHighlightConstants().init()}makeConstants_(){return new Kf}makeRenderInfo_(n){return new VP(this,n)}makeDrawer_(n,a){return new zP(n,a)}makePathObject(n,a){return new jP(n,a,this.getConstants())}makeHighlightConstants_(){return new HP(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};Gs("geras",XP);var Ig={};Ig.ConstantProvider=Kf,Ig.Drawer=zP,Ig.HighlightConstantProvider=HP,Ig.Highlighter=zE,Ig.InlineInput=GP,Ig.PathObject=jP,Ig.RenderInfo=VP,Ig.Renderer=XP,Ig.StatementInput=WP;var YP=class extends Bv{constructor(){super(),be("Blockly.minimalist.ConstantProvider","v10","v11","Blockly.blockRendering.ConstantProvider")}},KP=class extends Pv{constructor(n,a){super(n,a),be("Blockly.minimalist.Drawer","v10","v11","Blockly.blockRendering.Drawer")}},JP=class extends m0{constructor(n,a){super(n,a),be("Blockly.minimalist.RenderInfo","v10","v11","Blockly.blockRendering.RenderInfo")}getRenderer(){return this.renderer_}},QP=class extends Uv{constructor(n){super(n),be("Blockly.minimalist.Renderer","v10","v11","Blockly.blockRendering.Renderer")}makeConstants_(){return new YP}makeRenderInfo_(n){return new JP(this,n)}makeDrawer_(n,a){return new KP(n,a)}};Gs("minimalist",QP);var HE={};HE.ConstantProvider=YP,HE.Drawer=KP,HE.RenderInfo=JP,HE.Renderer=QP;var qP=class extends m0{constructor(n,a){super(n,a)}getRenderer(){return this.renderer_}addElemSpacing_(){let n=!1;for(var a=0;a<this.rows.length;a++)if(this.rows[a].hasExternalInput){n=!0;break}for(a=0;a<this.rows.length;a++){const b=this.rows[a];var d=b.elements;if(b.elements=[],b.startsWithElemSpacer()&&b.elements.push(new zd(this.constants_,this.getInRowSpacing_(null,d[0]))),d.length){for(let R=0;R<d.length-1;R++){b.elements.push(d[R]);const G=this.getInRowSpacing_(d[R],d[R+1]);b.elements.push(new zd(this.constants_,G))}b.elements.push(d[d.length-1]),b.endsWithElemSpacer()&&(d=this.getInRowSpacing_(d[d.length-1],null),n&&b.hasDummyInput&&(d+=this.constants_.TAB_WIDTH),b.elements.push(new zd(this.constants_,d)))}}}getInRowSpacing_(n,a){if(!n)return a&&Je.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:a&&Je.isInlineInput(a)?this.constants_.MEDIUM_LARGE_PADDING:a&&Je.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!Je.isInput(n)&&!a)return Je.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:Je.isIcon(n)?2*this.constants_.LARGE_PADDING+1:Je.isHat(n)?this.constants_.NO_PADDING:Je.isPreviousOrNextConnection(n)?this.constants_.LARGE_PADDING:Je.isLeftRoundedCorner(n)?this.constants_.MIN_BLOCK_WIDTH:Je.isJaggedEdge(n)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(Je.isInput(n)&&!a){if(Je.isExternalInput(n))return this.constants_.NO_PADDING;if(Je.isInlineInput(n))return this.constants_.LARGE_PADDING;if(Je.isStatementInput(n))return this.constants_.NO_PADDING}if(!Je.isInput(n)&&a&&Je.isInput(a)){if(Je.isField(n)&&n.isEditable){if(Je.isInlineInput(a)||Je.isExternalInput(a))return this.constants_.SMALL_PADDING}else{if(Je.isInlineInput(a)||Je.isExternalInput(a))return this.constants_.MEDIUM_LARGE_PADDING;if(Je.isStatementInput(a))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(Je.isIcon(n)&&a&&!Je.isInput(a))return this.constants_.LARGE_PADDING;if(Je.isInlineInput(n)&&a&&Je.isField(a))return a.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(Je.isLeftSquareCorner(n)&&a){if(Je.isHat(a))return this.constants_.NO_PADDING;if(Je.isPreviousConnection(a)||Je.isNextConnection(a))return a.notchOffset}return Je.isLeftRoundedCorner(n)&&a?a.notchOffset-this.constants_.CORNER_RADIUS:Je.isField(n)&&a&&Je.isField(a)&&n.isEditable===a.isEditable||a&&Je.isJaggedEdge(a)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(n,a){return Je.isTopRow(n)&&Je.isBottomRow(a)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:Je.isTopRow(n)||Je.isBottomRow(a)?this.constants_.NO_PADDING:n.hasExternalInput&&a.hasExternalInput?this.constants_.LARGE_PADDING:!n.hasStatement&&a.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:n.hasStatement&&a.hasStatement||n.hasDummyInput||a.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(n,a){if(Je.isSpacer(a))return n.yPos+a.height/2;if(Je.isBottomRow(n))return n=n.yPos+n.height-n.descenderHeight,Je.isNextConnection(a)?n+a.height/2:n-a.height/2;if(Je.isTopRow(n))return Je.isHat(a)?n.capline-a.height/2:n.capline+a.height/2;let d=n.yPos;return d=Je.isField(a)&&n.hasStatement?d+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+a.height/2):d+n.height/2}finalize_(){let n=0,a=0;for(var d=0;d<this.rows.length;d++){const R=this.rows[d];R.yPos=a,R.xPos=this.startX,a+=R.height,n=Math.max(n,R.widthWithConnectedBlocks);var b=a-this.topRow.ascenderHeight;R===this.bottomRow&&b<this.constants_.MIN_BLOCK_HEIGHT&&(b=this.constants_.MIN_BLOCK_HEIGHT-b,this.bottomRow.height+=b,a+=b),this.recordElemPositions_(R)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(d=this.block_.nextConnection.targetBlock())&&(n=Math.max(n,d.getHeightWidth().width)),this.bottomRow.baseline=a-this.bottomRow.descenderHeight,this.widthWithChildren=n+this.startX,this.height=a,this.startY=this.topRow.capline}},ZP=class extends Uv{constructor(n){super(n)}makeRenderInfo_(n){return new qP(this,n)}};Gs("thrasos",ZP);var CR={};CR.RenderInfo=qP,CR.Renderer=ZP;var k7={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},O7={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},L7=new d_("zelos",k7,O7),N7={Classic:bb,Zelos:L7},MR=class{constructor(n,a,d){this.id_=n.toolboxitemid||ie(),this.level_=(this.parent_=d||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=n,this.parentToolbox_=a,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(n){}},Fm=class extends MR{constructor(n,a,d){super(n,a,d),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(n){if("custom"in n)this.flyoutItems_=n.custom;else if(n=n.contents)for(let a=0;a<n.length;a++){const d=n[a];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(d)}}parseCategoryDef_(n){this.name_="name"in n?Er(n.name):"",this.colour_=this.getColour_(n),Object.assign(this.cssConfig_,n.cssconfig||n.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Ur(this.htmlDiv_,Ic.TREEITEM),sr(this.htmlDiv_,Bs.SELECTED,!1),sr(this.htmlDiv_,Bs.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Ur(this.iconDom_,Ic.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const n=this.labelDom_.getAttribute("id");return n&&sr(this.htmlDiv_,Bs.LABELLEDBY,n),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const n=document.createElement("div"),a=this.cssConfig_.container;return a&&ke(n,a),n}createRowContainer_(){const n=document.createElement("div");var a=this.cssConfig_.row;return a&&ke(n,a),a=`${Fm.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?n.style.paddingRight=a:n.style.paddingLeft=a,n}createRowContentsContainer_(){const n=document.createElement("div"),a=this.cssConfig_.rowcontentcontainer;return a&&ke(n,a),n}createIconDom_(){const n=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const a=this.cssConfig_.icon;a&&ke(n,a)}return n.style.display="inline-block",n}createLabelDom_(n){const a=document.createElement("span");return a.setAttribute("id",this.getId()+".label"),a.textContent=n,(n=this.cssConfig_.label)&&ke(a,n),a}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(n){n&&(n=Fm.borderWidth+"px solid "+(n||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=n:this.rowDiv_.style.borderLeft=n)}getColour_(n){const a=n.categorystyle||n.categoryStyle;if((n=n.colour)&&a)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(a)return this.getColourfromStyle_(a);if(n)return this.parseColour_(n)}return""}getColourfromStyle_(n){var a=this.workspace_.getTheme();if(n&&a){if((a=a.categoryStyles[n])&&a.colour)return this.parseColour_(a.colour);console.warn('Style "'+n+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(n){if(n=Er(n),n==null||n==="")return"";var a=Number(n);return isNaN(a)?(a=La(n))?a:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+n),""):Xu(a)}openIcon_(n){if(n){var a=this.cssConfig_.closedicon;a&&lt(n,a),(a=this.cssConfig_.openicon)&&ke(n,a)}}closeIcon_(n){if(n){var a=this.cssConfig_.openicon;a&&lt(n,a),(a=this.cssConfig_.closedicon)&&ke(n,a)}}setVisible_(n){this.htmlDiv_.style.display=n?"block":"none",this.isHidden_=!n,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let n=this;for(;n.getParent();)if(n=n.getParent(),!n.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(n){}setSelected(n){if(this.rowDiv_){var a=this.cssConfig_.selected;if(n){const d=this.parseColour_(Fm.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||d,a&&ke(this.rowDiv_,a)}else this.rowDiv_.style.backgroundColor="",a&&mt(this.rowDiv_,a);sr(this.htmlDiv_,Bs.SELECTED,n)}}setDisabled(n){this.isDisabled_=n,this.getDiv().setAttribute("disabled",`${n}`),n?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(n){this.flyoutItems_=[],this.toolboxItemDef_=typeof n=="string"?{kind:this.toolboxItemDef_.kind,custom:n,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:dt(n),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){ut(this.htmlDiv_)}};Fm.registrationName="category",Fm.nestedPadding=19,Fm.borderWidth=8,Fm.defaultBackgroundColour="#57e",wt(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),i(Lt.TOOLBOX_ITEM,Fm.registrationName,Fm);var GE=class extends MR{constructor(n,a){super(n,a),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,n.cssconfig||n.cssConfig)}init(){this.createDom_()}createDom_(){const n=document.createElement("div"),a=this.cssConfig_.container;return a&&ke(n,a),this.htmlDiv_=n}getDiv(){return this.htmlDiv_}dispose(){ut(this.htmlDiv_)}};GE.registrationName="sep",wt(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),i(Lt.TOOLBOX_ITEM,GE.registrationName,GE);var Ub=class extends Fm{constructor(n,a,d){super(n,a,d),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const n=super.makeDefaultCssConfig_();return n.contents="blocklyToolboxContents",n}parseContents_(n){if("custom"in n)this.flyoutItems_=n.custom;else{const a=n.contents;if(a){this.flyoutItems_=[],n=!0;for(let d=0;d<a.length;d++){const b=a[d];!u(Lt.TOOLBOX_ITEM,b.kind)||b.kind.toLowerCase()===GE.registrationName&&n?(this.flyoutItems_.push(b),n=!0):(this.createToolboxItem_(b),n=!1)}}}}createToolboxItem_(n){let a=n.kind;a.toUpperCase()==="CATEGORY"&&Bn(n)&&(a=Ub.registrationName),n=new(h(Lt.TOOLBOX_ITEM,a))(n,this.parentToolbox_,this),this.toolboxItems_.push(n)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const n=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(n),Ur(this.subcategoriesDiv_,Ic.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),sr(this.htmlDiv_,Bs.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const n=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const a=this.cssConfig_.icon;a&&ke(n,a),n.style.visibility="visible"}return n.style.display="inline-block",n}createSubCategoriesDom_(n){const a=document.createElement("div");a.style.display="none";var d=this.cssConfig_.contents;for(d&&ke(a,d),d=0;d<n.length;d++){const b=n[d];b.init();const R=b.getDiv();if(a.appendChild(R),b.getClickTarget){let G;(G=b.getClickTarget())==null||G.setAttribute("id",b.getId())}}return a}setExpanded(n){if(this.expanded_!==n){if(this.expanded_=n)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let a;(a=this.parentToolbox_.getFlyout())==null||a.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}sr(this.htmlDiv_,Bs.EXPANDED,n),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(n){this.htmlDiv_.style.display=n?"block":"none";const a=this.getChildToolboxItems();for(let d=0;d<a.length;d++)a[d].setVisible_(n);this.isHidden_=!n,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(n){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};Ub.registrationName="collapsibleCategory",i(Lt.TOOLBOX_ITEM,Ub.registrationName,Ub);var eF=class extends Rb{constructor(n){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=n,this.toolboxDef_=n.options.languageTree||{contents:[]},this.horizontalLayout_=n.options.horizontalLayout,this.RTL=n.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=n.options.toolboxPosition}onShortcut(n){return!1}init(){var n=this.workspace_;const a=n.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),He(this.flyout_.createDom("svg"),a),this.setVisible(!0),this.flyout_.init(n),this.render(this.toolboxDef_),n=n.getThemeManager(),n.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),n.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[ba.Capability.AUTOHIDEABLE,ba.Capability.DELETE_AREA,ba.Capability.DRAG_TARGET]})}createDom_(n){n=n.getParentSvg();const a=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Ur(this.contentsDiv_,Ic.TREE),a.appendChild(this.contentsDiv_),n.parentNode.insertBefore(a,n),this.attachEvents_(a,this.contentsDiv_),a}createContainer_(){const n=document.createElement("div");return n.setAttribute("layout",this.isHorizontal()?"h":"v"),ke(n,"blocklyToolboxDiv"),ke(n,"blocklyNonSelectable"),n.setAttribute("dir",this.RTL?"RTL":"LTR"),n}createContentsContainer_(){const n=document.createElement("div");return ke(n,"blocklyToolboxContents"),this.isHorizontal()&&(n.style.flexDirection="row"),n}attachEvents_(n,a){n=we(n,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(n),a=we(a,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(a)}onClick_(n){if(Mt(n)||n.target===this.HtmlDiv)A().hideChaff(!1);else{var a=n.target.getAttribute("id");a&&(a=this.getToolboxItemById(a),a.isSelectable()&&(this.setSelectedItem(a),a.onClick(n))),A().hideChaff(!0)}et()}onKeyDown_(n){let a=!1;switch(n.key){case"ArrowDown":a=this.selectNext_();break;case"ArrowUp":a=this.selectPrevious_();break;case"ArrowLeft":a=this.selectParent_();break;case"ArrowRight":a=this.selectChild_();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),a=!0);break;default:a=!1}!a&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(a=this.selectedItem_.onKeyDown(n)),a&&n.preventDefault()}createFlyout_(){const n=this.workspace_,a=new Lo({parentWorkspace:n,rtl:n.RTL,oneBasedIndex:n.options.oneBasedIndex,horizontalLayout:n.horizontalLayout,renderer:n.options.renderer,rendererOverrides:n.options.rendererOverrides,move:{scrollbars:!0}});return a.toolboxPosition=n.options.toolboxPosition,new(n.horizontalLayout?_(Lt.FLYOUTS_HORIZONTAL_TOOLBOX,n.options,!0):_(Lt.FLYOUTS_VERTICAL_TOOLBOX,n.options,!0))(a)}render(n){this.toolboxDef_=n;for(let a=0;a<this.contents_.length;a++){const d=this.contents_[a];d&&d.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(n.contents),this.position(),this.handleToolboxItemResize()}renderContents_(n){const a=document.createDocumentFragment();for(let d=0;d<n.length;d++)this.createToolboxItem_(n[d],a);this.contentsDiv_.appendChild(a)}createToolboxItem_(n,a){var d=n.kind;d.toUpperCase()==="CATEGORY"&&Bn(n)&&(d=Ub.registrationName),(d=h(Lt.TOOLBOX_ITEM,d.toLowerCase()))&&(n=new d(n,this),n.init(),this.addToolboxItem_(n),(d=n.getDiv())&&a.appendChild(d),n.getClickTarget()&&n.getClickTarget().setAttribute("id",n.getId()))}addToolboxItem_(n){if(this.contents_.push(n),this.contentMap_[n.getId()]=n,n.isCollapsible()){n=n.getChildToolboxItems();for(let a=0;a<n.length;a++)this.addToolboxItem_(n[a])}}getToolboxItems(){return this.contents_}addStyle(n){n&&this.HtmlDiv&&ke(this.HtmlDiv,n)}removeStyle(n){n&&this.HtmlDiv&&mt(this.HtmlDiv,n)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var n=this.HtmlDiv.getBoundingClientRect();const a=n.top,d=a+n.height,b=n.left;return n=b+n.width,this.toolboxPosition===Xn.TOP?new gi(-1e7,d,-1e7,1e7):this.toolboxPosition===Xn.BOTTOM?new gi(a,1e7,-1e7,1e7):this.toolboxPosition===Xn.LEFT?new gi(-1e7,1e7,-1e7,n):new gi(-1e7,1e7,b,1e7)}wouldDelete(n,a){return n instanceof jf?this.updateWouldDelete_(!n.getParent()&&n.isDeletable()):this.updateWouldDelete_(n.isDeletable()),this.wouldDelete_}onDragEnter(n){this.updateCursorDeleteStyle_(!0)}onDragExit(n){this.updateCursorDeleteStyle_(!1)}onDrop(n){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(n){n!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=n,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(n){const a=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";n?this.addStyle(a):this.removeStyle(a)}getToolboxItemById(n){return this.contentMap_[n]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const n=this.workspace_.getMetrics(),a=this.HtmlDiv;a&&(this.horizontalLayout_?(a.style.left="0",a.style.height="auto",a.style.width="100%",this.height_=a.offsetHeight,this.width_=n.viewWidth,this.toolboxPosition===Xn.TOP?a.style.top="0":a.style.bottom="0"):(this.toolboxPosition===Xn.RIGHT?a.style.right="0":a.style.left="0",a.style.height="100%",this.width_=a.offsetWidth,this.height_=n.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const n=this.workspace_,a=this.HtmlDiv.getBoundingClientRect();n.translate(this.toolboxPosition===Xn.LEFT?n.scrollX+a.width:n.scrollX,this.toolboxPosition===Xn.TOP?n.scrollY+a.height:n.scrollY),z(n)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let n=0;n<this.contents_.length;n++){const a=this.contents_[n];a.refreshTheme&&a.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(n){this.isVisible_!==n&&(this.HtmlDiv.style.display=n?"block":"none",this.isVisible_=n,this.workspace_.recordDragTargets())}autoHide(n){!n&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(n){const a=this.selectedItem_;!n&&!a||n&&!Gn(n)||(this.shouldDeselectItem_(a,n)&&a!==null&&this.deselectItem_(a),this.shouldSelectItem_(a,n)&&n!==null&&this.selectItem_(a,n),this.updateFlyout_(a,n),this.fireSelectEvent_(a,n))}shouldDeselectItem_(n,a){return n!==null&&(!n.isCollapsible()||n!==a)}shouldSelectItem_(n,a){return a!==null&&a!==n}deselectItem_(n){this.selectedItem_=null,this.previouslySelectedItem_=n,n.setSelected(!1),sr(this.contentsDiv_,Bs.ACTIVEDESCENDANT,"")}selectItem_(n,a){this.selectedItem_=a,this.previouslySelectedItem_=n,a.setSelected(!0),sr(this.contentsDiv_,Bs.ACTIVEDESCENDANT,a.getId())}selectItemByPosition(n){-1<n&&n<this.contents_.length&&(n=this.contents_[n],n.isSelectable()&&this.setSelectedItem(n))}updateFlyout_(n,a){a&&(n!==a||a.isCollapsible())&&a.getContents().length?(this.flyout_.show(a.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(n,a){const d=n&&n.getName();let b=a&&a.getName();n===a&&(b=null),n=new(xe(ya))(d,b,this.workspace_.id),he(n)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const n=this.selectedItem_;return n.isExpanded()?this.selectNext_():n.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let n=this.contents_.indexOf(this.selectedItem_)+1;if(-1<n&&n<this.contents_.length){let a=this.contents_[n];for(;a&&!a.isSelectable();)a=this.contents_[++n];if(a&&a.isSelectable())return this.setSelectedItem(a),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let n=this.contents_.indexOf(this.selectedItem_)-1;if(-1<n&&n<this.contents_.length){let a=this.contents_[n];for(;a&&!a.isSelectable();)a=this.contents_[--n];if(a&&a.isSelectable())return this.setSelectedItem(a),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var n=0;n<this.contents_.length;n++)this.contents_[n].dispose();for(n=0;n<this.boundEvents_.length;n++)it(this.boundEvents_[n]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),ut(this.HtmlDiv))}};wt(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),i(Lt.TOOLBOX,Ua,eF);var D7="10.4.3",B7=t.Align$$module$build$src$core$inputs$align.LEFT,P7=t.Align$$module$build$src$core$inputs$align.CENTRE,F7=t.Align$$module$build$src$core$inputs$align.RIGHT,U7=En.INPUT_VALUE,z7=En.OUTPUT_VALUE,H7=En.NEXT_STATEMENT,G7=En.PREVIOUS_STATEMENT,W7=t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY,V7=Xn.TOP,j7=Xn.BOTTOM,X7=Xn.LEFT,Y7=Xn.RIGHT;zv.prototype.newBlock=function(n,a){return new g0(this,n,a)},rf.prototype.newBlock=function(n,a){return new jf(this,n,a)},rf.newTrashcan=function(n){return new Yw(n)},ja.prototype.showContextMenu=function(n){if(!this.workspace.options.readOnly){var a=[];this.isDeletable()&&this.isMovable()&&(a.push(fh(this)),a.push(Gu(this))),gu(n,a,this.RTL)}},Bm.prototype.newWorkspaceSvg=function(n){return new rf(n)},t.Names$$module$build$src$core$names.prototype.populateProcedures=function(n){n=Gc(n),n=n[0].concat(n[1]);for(let a=0;a<n.length;a++)this.getName(n[a][0],t.Names$$module$build$src$core$names.NameType.PROCEDURE)};var K7=En,St={ALIGN_CENTRE:P7,ALIGN_LEFT:B7,ALIGN_RIGHT:F7};return St.ASTNode=Vt,St.BasicCursor=Hv,St.Block=g0,St.BlockDragger=Pb,St.BlockSvg=jf,St.Blocks=Rr,St.Bubble=Xi,St.BubbleDragger=Fe,St.COLLAPSED_FIELD_NAME=Ib,St.COLLAPSED_INPUT_NAME=g_,St.COLLAPSE_CHARS=Ke,St.CodeGenerator=t.CodeGenerator$$module$build$src$core$generator,St.CollapsibleToolboxCategory=Ub,St.ComponentManager=ba,St.Connection=ki,St.ConnectionChecker=_E,St.ConnectionDB=wh,St.ConnectionType=En,St.ContextMenu=Pd,St.ContextMenuItems=ue,St.ContextMenuRegistry=Kr,St.Css=Yl,St.Cursor=$E,St.DELETE_VARIABLE_ID=Jt,St.DRAG_STACK=$t,St.DUMMY_INPUT=W7,St.DeleteArea=Rb,St.DragTarget=Xw,St.DropDownDiv=y,St.Events=Mn,St.Extensions=bp,St.Field=ii,St.FieldAngle=ye,St.FieldCheckbox=Ye,St.FieldColour=ot,St.FieldDropdown=Ud,St.FieldImage=y_,St.FieldLabel=na,St.FieldLabelSerializable=Ht,St.FieldMultilineInput=Gt,St.FieldNumber=Qt,St.FieldTextInput=b0,St.FieldVariable=yn,St.Flyout=rr,St.FlyoutButton=Rn,St.FlyoutMetricsManager=pr,St.Generator=t.CodeGenerator$$module$build$src$core$generator,St.Gesture=Dm,St.Grid=aE,St.HorizontalFlyout=si,St.INPUT_VALUE=U7,St.Input=xa,St.InsertionMarkerManager=Ep,St.InsertionMarkerPreviewer=$p,St.Marker=Vw,St.MarkerManager=Ch,St.Menu=a_,St.MenuItem=Eg,St.MetricsManager=Db,St.Msg=t.Msg$$module$build$src$core$msg,St.NEXT_STATEMENT=H7,St.Names=t.Names$$module$build$src$core$names,St.OPPOSITE_TYPE=jt,St.OUTPUT_VALUE=z7,St.Options=Lo,St.PREVIOUS_STATEMENT=G7,St.PROCEDURE_CATEGORY_NAME=Lv,St.Procedures=Eo,St.RENAME_VARIABLE_ID=en,St.RenderedConnection=Ah,St.Scrollbar=Oo,St.ScrollbarPair=IE,St.ShortcutItems=Yf,St.ShortcutRegistry=Oi,St.TOOLBOX_AT_BOTTOM=j7,St.TOOLBOX_AT_LEFT=X7,St.TOOLBOX_AT_RIGHT=Y7,St.TOOLBOX_AT_TOP=V7,St.TabNavigateCursor=jw,St.Theme=d_,St.ThemeManager=Gw,St.Themes=N7,St.Toolbox=eF,St.ToolboxCategory=Fm,St.ToolboxItem=MR,St.ToolboxSeparator=GE,St.Tooltip=Fd,St.Touch=gt,St.Trashcan=Yw,St.UnattachedFieldError=Qs,St.VARIABLE_CATEGORY_NAME=s_,St.VARIABLE_DYNAMIC_CATEGORY_NAME=gE,St.VERSION=D7,St.VariableMap=bE,St.VariableModel=jp,St.Variables=Va,St.VariablesDynamic=Mg,St.VerticalFlyout=_i,St.WidgetDiv=vp,St.Workspace=zv,St.WorkspaceAudio=Ww,St.WorkspaceComment=Ac,St.WorkspaceCommentSvg=ja,St.WorkspaceDragger=Iw,St.WorkspaceSvg=rf,St.Xml=bo,St.ZoomControls=r0,St.blockAnimations=W,St.blockRendering=ns,St.browserEvents=nd,St.bubbles=v_,St.bumpObjects=Bb,St.clipboard=Am,St.common=Xs,St.config=t.config$$module$build$src$core$config,St.connectionTypes=K7,St.constants=yR,St.defineBlocksWithJsonArray=ee,St.dialog=$l,St.fieldRegistry=Ov,St.geras=Ig,St.getMainWorkspace=A,St.getSelected=k,St.hasBubble=gl,St.hideChaff=Sc,St.icons=$r,St.inject=Zu,St.inputTypes=t.inputTypes$$module$build$src$core$inputs$input_types,St.inputs=Zl,St.isCopyable=Tu,St.isIcon=ea,St.isObservable=ve,St.isPaster=Ls,St.isSerializable=Vr,St.isVariableBackedParameterModel=ds,St.minimalist=HE,St.procedures=Eo,St.registry=va,St.renderManagement=Bd,St.serialization=xR,St.setLocale=Df,St.setParentContainer=F,St.svgResize=z,St.thrasos=CR,St.uiPosition=Em,St.utils=ta,St.zelos=Y,Object.defineProperties(St,{HSV_SATURATION:{get:function(){return be("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.getHsvSaturation()"),vc()},set:function(n){be("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.setHsvSaturation()"),bh(n)}},HSV_VALUE:{get:function(){return be("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.getHsvValue()"),Yh()},set:function(n){be("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.setHsvValue()"),Vu(n)}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:Wa}),St.__namespace__=t,St})}(sk)),sk.exports}var m3;function $K(){return m3||(m3=1,function(r,e){(function(t,i){r.exports=i(BD())})(Ed,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})}(ik)),ik.exports}var g3;function PD(){return g3||(g3=1,function(r,e){(function(t,i){r.exports=i($K())})(Ed,function(t){return t})}(rk)),rk.exports}var ok={exports:{}},_3;function SK(){return _3||(_3=1,function(r,e){(function(t,i){r.exports=i()})(Ed,function(){var t=t||{Msg:Object.create(null)};return t.Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DIALOG_CANCEL="Cancel",t.Msg.DIALOG_OK="OK",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="÷",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="×",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg})}(ok)),ok.exports}var ak={exports:{}},lk={exports:{}},v3;function wK(){return v3||(v3=1,function(r,e){(function(t,i){r.exports=i(BD())})(Ed,function(t){var i=t.__namespace__,s=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),o={customContextMenu:function(X){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(oe={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:l(this)},$e=this.getField("VAR").getText(),$e={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",$e),enabled:!0,callback:u(this)},X.unshift(oe),X.unshift($e));else{if(this.type==="variables_get_dynamic")var J="variables_set_dynamic",oe=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else J="variables_get_dynamic",oe=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var $e=this.getField("VAR");J={type:J,fields:{VAR:$e.saveState(!0)}},X.push({enabled:0<this.workspace.remainingCapacity(),text:oe.replace("%1",$e.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,J)})}},onchange:function(X){X=this.getFieldValue("VAR"),X=i.getVariable$$module$build$src$core$variables(this.workspace,X),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(X.type):this.getInput("VALUE").connection.setCheck(X.type)}},l=function(X){return function(){const J=X.workspace,oe=X.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(J,oe)}},u=function(X){return function(){const J=X.workspace,oe=X.getField("VAR").getVariable();J.deleteVariableById(oe.getId()),J.refreshToolboxSelection()}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",o),i.defineBlocks$$module$build$src$core$common(s);var h={blocks:s},p=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),m={customContextMenu:function(X){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(oe={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:_(this)},$e=this.getField("VAR").getText(),$e={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",$e),enabled:!0,callback:v(this)},X.unshift(oe),X.unshift($e));else{if(this.type==="variables_get")var J="variables_set",oe=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else J="variables_get",oe=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var $e=this.getField("VAR");J={type:J,fields:{VAR:$e.saveState(!0)}},X.push({enabled:0<this.workspace.remainingCapacity(),text:oe.replace("%1",$e.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,J)})}}},_=function(X){return function(){const J=X.workspace,oe=X.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(J,oe)}},v=function(X){return function(){const J=X.workspace,oe=X.getField("VAR").getVariable();J.deleteVariableById(oe.getId()),J.refreshToolboxSelection()}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",m),i.defineBlocks$$module$build$src$core$common(p);var E={blocks:p},w=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"¶"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),x={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");var J=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return X.setAttribute("at1",`${J}`),J=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,X.setAttribute("at2",`${J}`),X},domToMutation:function(X){const J=X.getAttribute("at1")==="true";X=X.getAttribute("at2")==="true",this.updateAt_(1,J),this.updateAt_(2,X)},updateAt_:function(X,J){this.removeInput("AT"+X),this.removeInput("ORDINAL"+X,!0),J?(this.appendValueInput("AT"+X).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+X).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+X),X===2&&i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL));const oe=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+X]});oe.setValidator(function($e){const Ge=$e==="FROM_START"||$e==="FROM_END";if(Ge!==J){const Bt=this.getSourceBlock();return Bt.updateAt_(X,Ge),Bt.setFieldValue($e,"WHERE"+X),null}}),this.getInput("AT"+X).appendField(oe,"WHERE"+X),X===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}};w.text_getSubstring=x,w.text_changeCase={init:function(){const X=[[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},w.text_trim={init:function(){const X=[[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},w.text_print={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var A={updateType_:function(X){this.outputConnection.setCheck(X==="NUMBER"?"Number":"String")},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("type",this.getFieldValue("TYPE")),X},domToMutation:function(X){this.updateType_(X.getAttribute("type"))}};w.text_prompt_ext=Object.assign({},A,{init:function(){var X=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),X.setValidator(J=>{this.updateType_(J)}),this.appendValueInput("TEXT").appendField(X,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});var O=Object.assign({},A,{init:function(){this.mixin(k);var X=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),X.setValidator(J=>{this.updateType_(J)}),this.appendDummyInput().appendField(X,"TYPE").appendField(this.newQuote_(!0)).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});w.text_prompt=O,w.text_count={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},w.text_replace={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},w.text_reverse={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var k={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(X){for(let J=0,oe;oe=this.inputList[J];J++)for(let $e=0,Ge;Ge=oe.fieldRow[$e];$e++)if(X===Ge.name){oe.insertFieldAt($e,this.newQuote_(!0)),oe.insertFieldAt($e+2,this.newQuote_(!1));return}console.warn('field named "'+X+'" not found in '+this.toDevString())},newQuote_:function(X){return X=this.RTL?!X:X,i.fromJson$$module$build$src$core$field_registry({type:"field_image",src:X?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:X?"“":"”"})}},D=function(){this.mixin(k),this.quoteField_("TEXT")},N={itemCount_:0,mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("items",`${this.itemCount_}`),X},domToMutation:function(X){this.itemCount_=parseInt(X.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(X){this.itemCount_=X.itemCount,this.updateShape_()},decompose:function(X){const J=X.newBlock("text_create_join_container");J.initSvg();let oe=J.getInput("STACK").connection;for(let $e=0;$e<this.itemCount_;$e++){const Ge=X.newBlock("text_create_join_item");Ge.initSvg(),oe.connect(Ge.previousConnection),oe=Ge.nextConnection}return J},compose:function(X){var J=X.getInputTargetBlock("STACK");for(X=[];J;)J.isInsertionMarker()||X.push(J.valueConnection_),J=J.getNextBlock();for(J=0;J<this.itemCount_;J++){const oe=this.getInput("ADD"+J).connection.targetConnection;oe&&X.indexOf(oe)===-1&&oe.disconnect()}for(this.itemCount_=X.length,this.updateShape_(),J=0;J<this.itemCount_;J++){let oe;(oe=X[J])==null||oe.reconnect(this,"ADD"+J)}},saveConnections:function(X){X=X.getInputTargetBlock("STACK");let J=0;for(;X;){if(X.isInsertionMarker()){X=X.getNextBlock();continue}const oe=this.getInput("ADD"+J);X.valueConnection_=oe&&oe.connection.targetConnection,X=X.getNextBlock(),J++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var X=0;X<this.itemCount_;X++)if(!this.getInput("ADD"+X)){const J=this.appendValueInput("ADD"+X).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);X===0&&J.appendField(i.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(X=this.itemCount_;this.getInput("ADD"+X);X++)this.removeInput("ADD"+X)}},F=function(){this.mixin(k),this.itemCount_=2,this.updateShape_(),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};i.register$$module$build$src$core$extensions("text_append_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var z=function(){this.setTooltip(()=>i.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},V={isAt_:!1,mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("at",`${this.isAt_}`),X},domToMutation:function(X){X=X.getAttribute("at")!=="false",this.updateAt_(X)},updateAt_:function(X){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),X&&(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=X}},U=function(){this.getField("WHERE").setValidator(function(X){X=X==="FROM_START"||X==="FROM_END";const J=this.getSourceBlock();X!==J.isAt_&&J.updateAt_(X)}),this.updateAt_(!0),this.setTooltip(()=>{var X=this.getFieldValue("WHERE");let J=i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(X==="FROM_START"||X==="FROM_END")&&(X=X==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(J+="  "+X.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),J})};i.register$$module$build$src$core$extensions("text_indexOf_tooltip",z),i.register$$module$build$src$core$extensions("text_quotes",D),i.registerMixin$$module$build$src$core$extensions("quote_image_mixin",k),i.registerMutator$$module$build$src$core$extensions("text_join_mutator",N,F),i.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",V,U),i.defineBlocks$$module$build$src$core$common(w);var ee={blocks:w},ne={},ie={setStatements_:function(X){this.hasStatements_!==X&&(X?(this.appendStatementInput("STACK").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=X)},updateParams_:function(){let X="";this.arguments_.length&&(X=i.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),i.disable$$module$build$src$core$events$utils();try{this.setFieldValue(X,"PARAMS")}finally{i.enable$$module$build$src$core$events$utils()}},mutationToDom:function(X){const J=i.createElement$$module$build$src$core$utils$xml("mutation");X&&J.setAttribute("name",this.getFieldValue("NAME"));for(let oe=0;oe<this.argumentVarModels_.length;oe++){const $e=i.createElement$$module$build$src$core$utils$xml("arg"),Ge=this.argumentVarModels_[oe];$e.setAttribute("name",Ge.name),$e.setAttribute("varid",Ge.getId()),X&&this.paramIds_&&$e.setAttribute("paramId",this.paramIds_[oe]),J.appendChild($e)}return this.hasStatements_||J.setAttribute("statements","false"),J},domToMutation:function(X){this.arguments_=[],this.argumentVarModels_=[];for(let oe=0,$e;$e=X.childNodes[oe];oe++)if($e.nodeName.toLowerCase()==="arg"){var J=$e;const Ge=J.getAttribute("name");J=J.getAttribute("varid")||J.getAttribute("varId"),this.arguments_.push(Ge),J=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,J,Ge,""),J!==null?this.argumentVarModels_.push(J):console.log(`Failed to create a variable named "${Ge}", ignoring.`)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(X.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const X=Object.create(null);if(this.argumentVarModels_.length){X.params=[];for(let J=0;J<this.argumentVarModels_.length;J++)X.params.push({name:this.argumentVarModels_[J].name,id:this.argumentVarModels_[J].getId()})}return this.hasStatements_||(X.hasStatements=!1),X},loadExtraState:function(X){if(this.arguments_=[],this.argumentVarModels_=[],X.params)for(let oe=0;oe<X.params.length;oe++){var J=X.params[oe];J=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,J.id,J.name,""),this.arguments_.push(J.name),this.argumentVarModels_.push(J)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(X.hasStatements!==!1)},decompose:function(X){const J=i.createElement$$module$build$src$core$utils$xml("block");J.setAttribute("type","procedures_mutatorcontainer");var oe=i.createElement$$module$build$src$core$utils$xml("statement");oe.setAttribute("name","STACK"),J.appendChild(oe);for(let Ge=0;Ge<this.arguments_.length;Ge++){const Bt=i.createElement$$module$build$src$core$utils$xml("block");Bt.setAttribute("type","procedures_mutatorarg");var $e=i.createElement$$module$build$src$core$utils$xml("field");$e.setAttribute("name","NAME");const Pe=i.createTextNode$$module$build$src$core$utils$xml(this.arguments_[Ge]);$e.appendChild(Pe),Bt.appendChild($e),$e=i.createElement$$module$build$src$core$utils$xml("next"),Bt.appendChild($e),oe.appendChild(Bt),oe=$e}return X=i.domToBlock$$module$build$src$core$xml(J,X),this.type==="procedures_defreturn"?X.setFieldValue(this.hasStatements_,"STATEMENTS"):X.removeInput("STATEMENT_INPUT"),i.mutateCallers$$module$build$src$core$procedures(this),X},compose:function(X){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let J=X.getInputTargetBlock("STACK");for(;J&&!J.isInsertionMarker();){var oe=J.getFieldValue("NAME");this.arguments_.push(oe),oe=this.workspace.getVariable(oe,""),this.argumentVarModels_.push(oe),this.paramIds_.push(J.id),J=J.nextConnection&&J.nextConnection.targetBlock()}if(this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),X=X.getFieldValue("STATEMENTS"),X!==null&&(X=X==="TRUE",this.hasStatements_!==X))if(X){this.setStatements_(!0);var $e;($e=this.statementConnection_)==null||$e.reconnect(this,"STACK"),this.statementConnection_=null}else $e=this.getInput("STACK").connection,(this.statementConnection_=$e.targetConnection)&&($e=$e.targetBlock(),$e.unplug(),$e.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(X,J){var oe=this.workspace.getVariableById(X);if(oe.type===""){oe=oe.name,J=this.workspace.getVariableById(J);var $e=!1;for(let Ge=0;Ge<this.argumentVarModels_.length;Ge++)this.argumentVarModels_[Ge].getId()===X&&(this.arguments_[Ge]=J.name,this.argumentVarModels_[Ge]=J,$e=!0);$e&&(this.displayRenamedVar_(oe,J.name),i.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(X){const J=X.name;let oe=!1,$e;for(let Ge=0;Ge<this.argumentVarModels_.length;Ge++)this.argumentVarModels_[Ge].getId()===X.getId()&&($e=this.arguments_[Ge],this.arguments_[Ge]=J,oe=!0);oe&&(this.displayRenamedVar_($e,J),i.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(X,J){this.updateParams_();var oe=this.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(oe&&oe.bubbleIsVisible()){oe=oe.getWorkspace().getAllBlocks(!1);for(let $e=0,Ge;Ge=oe[$e];$e++)Ge.type==="procedures_mutatorarg"&&i.Names$$module$build$src$core$names.equals(X,Ge.getFieldValue("NAME"))&&Ge.setFieldValue(J,"NAME")}},customContextMenu:function(X){if(!this.isInFlyout){var J=this.getFieldValue("NAME"),oe={type:this.callType_,extraState:{name:J,params:this.arguments_}};if(X.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",J),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,oe)}),!this.isCollapsed())for(J=0;J<this.argumentVarModels_.length;J++){oe=this.argumentVarModels_[J];const $e={type:"variables_get",fields:{VAR:{name:oe.name,id:oe.getId(),type:oe.type}}};X.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",oe.name),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,$e)})}}}};ne.procedures_defnoreturn=Object.assign({},ie,{init:function(){var X=i.findLegalName$$module$build$src$core$procedures("",this);X=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:X}),X.setValidator(i.rename$$module$build$src$core$procedures),X.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(X,"NAME").appendField("","PARAMS"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),ne.procedures_defreturn=Object.assign({},ie,{init:function(){var X=i.findLegalName$$module$build$src$core$procedures("",this);X=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:X}),X.setValidator(i.rename$$module$build$src$core$procedures),X.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(X,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(i.Align$$module$build$src$core$inputs$input.RIGHT).appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var se={init:function(){this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};ne.procedures_mutatorcontainer=se;var fe={init:function(){const X=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:i.DEFAULT_ARG$$module$build$src$core$procedures});X.setValidator(this.validator_),X.oldShowEditorFn_=X.showEditor_,X.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(X,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,X.onFinishEditing_=this.deleteIntermediateVars_,X.createdVariables_=[],X.onFinishEditing_("x")},validator_:function(X){var J=this.getSourceBlock();const oe=J.workspace.getRootWorkspace();if(X=X.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!X)return null;const $e=(J.workspace.targetWorkspace||J.workspace).getAllBlocks(!1),Ge=X.toLowerCase();for(let Bt=0;Bt<$e.length;Bt++){if($e[Bt].id===this.getSourceBlock().id)continue;const Pe=$e[Bt].getFieldValue("NAME");if(Pe&&Pe.toLowerCase()===Ge)return null}return J.isInFlyout||((J=oe.getVariable(X,""))&&J.name!==X&&oe.renameVariableById(J.getId(),X),J||(J=oe.createVariable(X,""))&&this.createdVariables_&&this.createdVariables_.push(J)),X},deleteIntermediateVars_:function(X){const J=this.getSourceBlock().workspace.getRootWorkspace();if(J)for(let oe=0;oe<this.createdVariables_.length;oe++){const $e=this.createdVariables_[oe];$e.name!==X&&J.deleteVariableById($e.getId())}}};ne.procedures_mutatorarg=fe;var ae={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(X,J){i.Names$$module$build$src$core$names.equals(X,this.getProcedureCall())&&(this.setFieldValue(J,"NAME"),this.setTooltip((this.outputConnection?i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",J)))},setProcedureParameters_:function(X,J){var oe=i.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((oe=(oe=oe&&oe.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&oe.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),X.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=J;else{if(J.length!==X.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let Ge=0;Ge<this.arguments_.length;Ge++){var $e=this.getInput("ARG"+Ge);$e&&($e=$e.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Ge]]=$e,oe&&$e&&J.indexOf(this.quarkIds_[Ge])===-1&&($e.disconnect(),$e.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(X),this.argumentVarModels_=[],X=0;X<this.arguments_.length;X++)oe=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[X],""),this.argumentVarModels_.push(oe);if(this.updateShape_(),this.quarkIds_=J){for(J=0;J<this.arguments_.length;J++)if(X=this.quarkIds_[J],X in this.quarkConnections_){let Ge;(Ge=this.quarkConnections_[X])!=null&&Ge.reconnect(this,"ARG"+J)||delete this.quarkConnections_[X]}}}},updateShape_:function(){for(var X=0;X<this.arguments_.length;X++){var J=this.getField("ARGNAME"+X);if(J){i.disable$$module$build$src$core$events$utils();try{J.setValue(this.arguments_[X])}finally{i.enable$$module$build$src$core$events$utils()}}else J=i.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[X]}),this.appendValueInput("ARG"+X).setAlign(i.Align$$module$build$src$core$inputs$input.RIGHT).appendField(J,"ARGNAME"+X).init()}for(X=this.arguments_.length;this.getInput("ARG"+X);X++)this.removeInput("ARG"+X);(X=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(X.appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),X.init()):this.getField("WITH")&&X.removeField("WITH"))},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");X.setAttribute("name",this.getProcedureCall());for(let J=0;J<this.arguments_.length;J++){const oe=i.createElement$$module$build$src$core$utils$xml("arg");oe.setAttribute("name",this.arguments_[J]),X.appendChild(oe)}return X},domToMutation:function(X){var J=X.getAttribute("name");this.renameProcedure(this.getProcedureCall(),J),J=[];const oe=[];for(let $e=0,Ge;Ge=X.childNodes[$e];$e++)Ge.nodeName.toLowerCase()==="arg"&&(J.push(Ge.getAttribute("name")),oe.push(Ge.getAttribute("paramId")));this.setProcedureParameters_(J,oe)},saveExtraState:function(){const X=Object.create(null);return X.name=this.getProcedureCall(),this.arguments_.length&&(X.params=this.arguments_),X},loadExtraState:function(X){if(this.renameProcedure(this.getProcedureCall(),X.name),X=X.params){const J=[];J.length=X.length,J.fill(null),this.setProcedureParameters_(X,J)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(X){if(this.workspace&&!this.workspace.isFlyout&&X.recordUndo)if(X.type===i.CREATE$$module$build$src$core$events$utils&&X.ids.indexOf(this.id)!==-1){var J=this.getProcedureCall();if(J=i.getDefinition$$module$build$src$core$procedures(J,this.workspace),!J||J.type===this.defType_&&JSON.stringify(J.getVars())===JSON.stringify(this.arguments_)||(J=null),!J){i.setGroup$$module$build$src$core$events$utils(X.group),X=i.createElement$$module$build$src$core$utils$xml("xml"),J=i.createElement$$module$build$src$core$utils$xml("block"),J.setAttribute("type",this.defType_);var oe=this.getRelativeToSurfaceXY(),$e=oe.y+2*i.config$$module$build$src$core$config.snapRadius;J.setAttribute("x",`${oe.x+i.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),J.setAttribute("y",`${$e}`),oe=this.mutationToDom(),J.appendChild(oe),oe=i.createElement$$module$build$src$core$utils$xml("field"),oe.setAttribute("name","NAME"),$e=this.getProcedureCall();const Ge=i.findLegalName$$module$build$src$core$procedures($e,this);$e!==Ge&&this.renameProcedure($e,Ge),oe.appendChild(i.createTextNode$$module$build$src$core$utils$xml($e)),J.appendChild(oe),X.appendChild(J),i.domToWorkspace$$module$build$src$core$xml(X,this.workspace),i.setGroup$$module$build$src$core$events$utils(!1)}}else X.type===i.DELETE$$module$build$src$core$events$utils?(J=this.getProcedureCall(),i.getDefinition$$module$build$src$core$procedures(J,this.workspace)||(i.setGroup$$module$build$src$core$events$utils(X.group),this.dispose(!0),i.setGroup$$module$build$src$core$events$utils(!1))):X.type===i.CHANGE$$module$build$src$core$events$utils&&X.element==="disabled"&&(J=this.getProcedureCall(),(J=i.getDefinition$$module$build$src$core$procedures(J,this.workspace))&&J.id===X.blockId&&((J=i.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),i.setGroup$$module$build$src$core$events$utils(X.group),X.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),i.setGroup$$module$build$src$core$events$utils(J)))},customContextMenu:function(X){if(this.workspace.isMovable()){var J=this.getProcedureCall(),oe=this.workspace;X.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const $e=i.getDefinition$$module$build$src$core$procedures(J,oe);$e&&(oe.centerOnBlock($e.id),$e.select())}})}}};ne.procedures_callnoreturn=Object.assign({},ae,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),ne.procedures_callreturn=Object.assign({},ae,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"});var he={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("value",String(Number(this.hasReturnValue_))),X},domToMutation:function(X){this.hasReturnValue_=X.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(X){if(!(this.workspace.isDragging&&this.workspace.isDragging()||X.type!==i.MOVE$$module$build$src$core$events$utils)){var J=!1,oe=this;do{if(this.FUNCTION_TYPES.indexOf(oe.type)!==-1){J=!0;break}oe=oe.getSurroundParent()}while(oe);J?(oe.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):oe.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(oe=i.getGroup$$module$build$src$core$events$utils(),i.setGroup$$module$build$src$core$events$utils(X.group),this.setEnabled(J),i.setGroup$$module$build$src$core$events$utils(oe))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};ne.procedures_ifreturn=he,i.defineBlocks$$module$build$src$core$common(ne);var ge={blocks:ne},Ie=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),j={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};i.register$$module$build$src$core$extensions("math_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",j));var te={mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation"),J=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return X.setAttribute("divisor_input",String(J)),X},domToMutation:function(X){X=X.getAttribute("divisor_input")==="true",this.updateShape_(X)},updateShape_:function(X){const J=this.getInput("DIVISOR");X?J||this.appendValueInput("DIVISOR").setCheck("Number"):J&&this.removeInput("DIVISOR")}},q=function(){this.getField("PROPERTY").setValidator(function(X){X=X==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(X)})};i.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",te,q),i.register$$module$build$src$core$extensions("math_change_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var le={updateType_:function(X){X==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("op",this.getFieldValue("OP")),X},domToMutation:function(X){if(X=X.getAttribute("op"),X===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(X)}},_e=function(){this.getField("OP").setValidator((function(X){this.updateType_(X)}).bind(this))};i.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",le,_e),i.defineBlocks$$module$build$src$core$common(Ie);var Le={blocks:Ie},xe=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),Ve={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};i.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",Ve));var Re={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};i.register$$module$build$src$core$extensions("controls_flow_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",Re));var Ze={customContextMenu:function(X){if(!this.isInFlyout){var J=this.getField("VAR"),oe=J.getVariable().name;this.isCollapsed()||oe===null||(J={type:"variables_get",fields:{VAR:J.saveState(!0)}},X.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",oe),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,J)}))}}};i.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",Ze),i.register$$module$build$src$core$extensions("controls_for_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),i.register$$module$build$src$core$extensions("controls_forEach_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var et=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),ct={getSurroundLoop:function(){let X=this;do{if(et.has(X.type))return X;X=X.getSurroundParent()}while(X);return null},onchange:function(X){var J=this.workspace;if(J.isDragging&&!J.isDragging()&&X.type===i.MOVE$$module$build$src$core$events$utils&&(J=!!this.getSurroundLoop(),this.setWarningText(J?null:i.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout)){const oe=i.getGroup$$module$build$src$core$events$utils();i.setGroup$$module$build$src$core$events$utils(X.group),this.setEnabled(J),i.setGroup$$module$build$src$core$events$utils(oe)}}};i.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",ct),i.defineBlocks$$module$build$src$core$common(xe);var rt={blocks:xe,loopTypes:et},Ne=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),we={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};i.register$$module$build$src$core$extensions("logic_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",we));var ze={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const X=i.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&X.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&X.setAttribute("else","1"),X},domToMutation:function(X){this.elseifCount_=parseInt(X.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(X.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const X=Object.create(null);return this.elseifCount_&&(X.elseIfCount=this.elseifCount_),this.elseCount_&&(X.hasElse=!0),X},loadExtraState:function(X){this.elseifCount_=X.elseIfCount||0,this.elseCount_=X.hasElse?1:0,this.updateShape_()},decompose:function(X){const J=X.newBlock("controls_if_if");J.initSvg();let oe=J.nextConnection;for(let $e=1;$e<=this.elseifCount_;$e++){const Ge=X.newBlock("controls_if_elseif");Ge.initSvg(),oe.connect(Ge.previousConnection),oe=Ge.nextConnection}return this.elseCount_&&(X=X.newBlock("controls_if_else"),X.initSvg(),oe.connect(X.previousConnection)),J},compose:function(X){X=X.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const J=[null],oe=[null];let $e=null;for(;X;){if(!X.isInsertionMarker())switch(X.type){case"controls_if_elseif":this.elseifCount_++,J.push(X.valueConnection_),oe.push(X.statementConnection_);break;case"controls_if_else":this.elseCount_++,$e=X.statementConnection_;break;default:throw TypeError("Unknown block type: "+X.type)}X=X.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(J,oe,$e)},saveConnections:function(X){X=X.nextConnection.targetBlock();let J=1;for(;X;){if(!X.isInsertionMarker())switch(X.type){case"controls_if_elseif":var oe=this.getInput("IF"+J);const $e=this.getInput("DO"+J);X.valueConnection_=oe&&oe.connection.targetConnection,X.statementConnection_=$e&&$e.connection.targetConnection,J++;break;case"controls_if_else":oe=this.getInput("ELSE"),X.statementConnection_=oe&&oe.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+X.type)}X=X.getNextBlock()}},rebuildShape_:function(){const X=[null],J=[null];let oe=null;this.getInput("ELSE")&&(oe=this.getInput("ELSE").connection.targetConnection);for(let $e=1;this.getInput("IF"+$e);$e++){const Ge=this.getInput("IF"+$e),Bt=this.getInput("DO"+$e);X.push(Ge.connection.targetConnection),J.push(Bt.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(X,J,oe)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var X=1;this.getInput("IF"+X);X++)this.removeInput("IF"+X),this.removeInput("DO"+X);for(X=1;X<=this.elseifCount_;X++)this.appendValueInput("IF"+X).setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+X).appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(X,J,oe){for(let $e=1;$e<=this.elseifCount_;$e++){let Ge;(Ge=X[$e])==null||Ge.reconnect(this,"IF"+$e);let Bt;(Bt=J[$e])==null||Bt.reconnect(this,"DO"+$e)}oe==null||oe.reconnect(this,"ELSE")}};i.registerMutator$$module$build$src$core$extensions("controls_if_mutator",ze,null,["controls_if_elseif","controls_if_else"]);var it=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};i.register$$module$build$src$core$extensions("controls_if_tooltip",it);var nt={onchange:function(X){this.prevBlocks_||(this.prevBlocks_=[null,null]);var J=this.getInputTargetBlock("A");const oe=this.getInputTargetBlock("B");J&&oe&&!this.workspace.connectionChecker.doTypeChecks(J.outputConnection,oe.outputConnection)&&(i.setGroup$$module$build$src$core$events$utils(X.group),X=this.prevBlocks_[0],X!==J&&(J.unplug(),!X||X.isDisposed()||X.isShadow()||this.getInput("A").connection.connect(X.outputConnection)),J=this.prevBlocks_[1],J!==oe&&(oe.unplug(),!J||J.isDisposed()||J.isShadow()||this.getInput("B").connection.connect(J.outputConnection)),this.bumpNeighbours(),i.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},Mt=function(){this.mixin(nt)};i.register$$module$build$src$core$extensions("logic_compare",Mt);var At={prevParentConnection_:null,onchange:function(X){const J=this.getInputTargetBlock("THEN"),oe=this.getInputTargetBlock("ELSE"),$e=this.outputConnection.targetConnection;if((J||oe)&&$e)for(let Ge=0;2>Ge;Ge++){const Bt=Ge===1?J:oe;Bt&&!Bt.workspace.connectionChecker.doTypeChecks(Bt.outputConnection,$e)&&(i.setGroup$$module$build$src$core$events$utils(X.group),$e===this.prevParentConnection_?(this.unplug(),$e.getSourceBlock().bumpNeighbours()):(Bt.unplug(),Bt.bumpNeighbours()),i.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=$e}};i.registerMixin$$module$build$src$core$extensions("logic_ternary",At),i.defineBlocks$$module$build$src$core$common(Ne);var ht=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Et={init:function(){this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("items",String(this.itemCount_)),X},domToMutation:function(X){if(X=X.getAttribute("items"),!X)throw new TypeError("element did not have items");this.itemCount_=parseInt(X,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(X){this.itemCount_=X.itemCount,this.updateShape_()},decompose:function(X){const J=X.newBlock("lists_create_with_container");J.initSvg();let oe=J.getInput("STACK").connection;for(let $e=0;$e<this.itemCount_;$e++){const Ge=X.newBlock("lists_create_with_item");if(Ge.initSvg(),!Ge.previousConnection)throw Error("itemBlock has no previousConnection");oe.connect(Ge.previousConnection),oe=Ge.nextConnection}return J},compose:function(X){var J=X.getInputTargetBlock("STACK");for(X=[];J;)J.isInsertionMarker()||X.push(J.valueConnection_),J=J.getNextBlock();for(J=0;J<this.itemCount_;J++){const oe=this.getInput("ADD"+J).connection.targetConnection;oe&&X.indexOf(oe)===-1&&oe.disconnect()}for(this.itemCount_=X.length,this.updateShape_(),J=0;J<this.itemCount_;J++){let oe;(oe=X[J])==null||oe.reconnect(this,"ADD"+J)}},saveConnections:function(X){X=X.getInputTargetBlock("STACK");let J=0;for(;X;){if(X.isInsertionMarker()){X=X.getNextBlock();continue}const oe=this.getInput("ADD"+J);let $e;X.valueConnection_=($e=oe)==null?void 0:$e.connection.targetConnection,X=X.getNextBlock(),J++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var X=0;X<this.itemCount_;X++)if(!this.getInput("ADD"+X)){const J=this.appendValueInput("ADD"+X).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);X===0&&J.appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(X=this.itemCount_;this.getInput("ADD"+X);X++)this.removeInput("ADD"+X)}};ht.lists_create_with=Et;var wt={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};ht.lists_create_with_container=wt;var pt={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};ht.lists_create_with_item=pt;var be={init:function(){var X=[[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),!X)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(X,"END"),this.setInputsInline(!0),this.setTooltip(()=>i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};ht.lists_indexOf=be;var Z={init:function(){var X=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),X.setValidator(function(J){J=J==="REMOVE",this.getSourceBlock().updateStatement_(J)}),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(X,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const J=this.getFieldValue("MODE"),oe=this.getFieldValue("WHERE");let $e="";switch(J+" "+oe){case"GET FROM_START":case"GET FROM_END":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(oe==="FROM_START"||oe==="FROM_END")&&($e+="  "+(oe==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),$e})},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");X.setAttribute("statement",String(!this.outputConnection));const J=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return X.setAttribute("at",String(J)),X},domToMutation:function(X){const J=X.getAttribute("statement")==="true";this.updateStatement_(J),X=X.getAttribute("at")!=="false",this.updateAt_(X)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(X){X.isStatement?this.updateStatement_(!0):typeof X=="string"&&this.domToMutation(i.textToDom$$module$build$src$core$utils$xml(X))},updateStatement_:function(X){X!==!this.outputConnection&&(this.unplug(!0,!0),X?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(X){this.removeInput("AT"),this.removeInput("ORDINAL",!0),X?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const J=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});J.setValidator(function(oe){const $e=oe==="FROM_START"||oe==="FROM_END";if($e!==X){const Ge=this.getSourceBlock();return Ge.updateAt_($e),Ge.setFieldValue(oe,"WHERE"),null}}),this.getInput("AT").appendField(J,"WHERE"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};ht.lists_getIndex=Z;var ke={init:function(){var X=[[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),this.appendDummyInput().appendField(X,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const J=this.getFieldValue("MODE"),oe=this.getFieldValue("WHERE");let $e="";switch(J+" "+oe){case"SET FROM_START":case"SET FROM_END":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(oe==="FROM_START"||oe==="FROM_END")&&($e+="  "+i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),$e})},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation"),J=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return X.setAttribute("at",String(J)),X},domToMutation:function(X){X=X.getAttribute("at")!=="false",this.updateAt_(X)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(X){this.removeInput("AT"),this.removeInput("ORDINAL",!0),X?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const J=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});J.setValidator(function(oe){const $e=oe==="FROM_START"||oe==="FROM_END";if($e!==X){const Ge=this.getSourceBlock();return Ge.updateAt_($e),Ge.setFieldValue(oe,"WHERE"),null}}),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(J,"WHERE")}};ht.lists_setIndex=ke;var lt={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");var J=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return X.setAttribute("at1",String(J)),J=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,X.setAttribute("at2",String(J)),X},domToMutation:function(X){const J=X.getAttribute("at1")==="true";X=X.getAttribute("at2")==="true",this.updateAt_(1,J),this.updateAt_(2,X)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(X,J){this.removeInput("AT"+X),this.removeInput("ORDINAL"+X,!0),J?(this.appendValueInput("AT"+X).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+X).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+X);const oe=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+X]});oe.setValidator(function($e){const Ge=$e==="FROM_START"||$e==="FROM_END";if(Ge!==J){const Bt=this.getSourceBlock();return Bt.updateAt_(X,Ge),Bt.setFieldValue($e,"WHERE"+X),null}}),this.getInput("AT"+X).appendField(oe,"WHERE"+X),X===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};ht.lists_getSublist=lt,ht.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},ht.lists_split={init:function(){const X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!X)throw Error("field_dropdown not found");X.setValidator(J=>{this.updateType_(J)}),this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(X,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const J=this.getFieldValue("MODE");if(J==="SPLIT")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(J==="JOIN")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+J)})},updateType_:function(X){if(this.getFieldValue("MODE")!==X){const J=this.getInput("INPUT").connection;J.setShadowDom(null);const oe=J.targetBlock();oe&&(J.disconnect(),oe.isShadow()?oe.dispose(!1):this.bumpNeighbours())}X==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("mode",this.getFieldValue("MODE")),X},domToMutation:function(X){this.updateType_(X.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},i.defineBlocks$$module$build$src$core$common(ht);var mt={blocks:ht},xt=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]);i.defineBlocks$$module$build$src$core$common(xt);var ut={blocks:xt},He=Object.assign({},xt,ht,Ne,xe,Ie,ne,p,s),Ce={blocks:He,colour:ut,lists:mt,loops:rt,math:Le,procedures:ge,texts:ee,variables:E,variablesDynamic:h};return Ce.__namespace__=i,Ce})}(lk)),lk.exports}var y3;function xK(){return y3||(y3=1,function(r,e){(function(t,i){r.exports=i(wK())})(Ed,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})}(ak)),ak.exports}var nW={exports:{}},uk={exports:{}},b3;function CK(){return b3||(b3=1,function(r,e){(function(t,i){r.exports=i(BD())})(Ed,function(t){var i=t.__namespace__,s=function(Q,me){return[me.quote_(Q.getFieldValue("COLOUR")),Ce.ATOMIC]},o=function(Q,me){return[me.provideFunction_("colourRandom",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",Ce.FUNCTION_CALL]},l=function(Q,me){const De=me.valueToCode(Q,"RED",Ce.NONE)||0,qe=me.valueToCode(Q,"GREEN",Ce.NONE)||0;return Q=me.valueToCode(Q,"BLUE",Ce.NONE)||0,[me.provideFunction_("colourRgb",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+De+", "+qe+", "+Q+")",Ce.FUNCTION_CALL]},u=function(Q,me){const De=me.valueToCode(Q,"COLOUR1",Ce.NONE)||"'#000000'",qe=me.valueToCode(Q,"COLOUR2",Ce.NONE)||"'#000000'";return Q=me.valueToCode(Q,"RATIO",Ce.NONE)||.5,[me.provideFunction_("colourBlend",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+De+", "+qe+", "+Q+")",Ce.FUNCTION_CALL]},h=function(Q,me){return["[]",Ce.ATOMIC]},p=function(Q,me){const De=Array(Q.itemCount_);for(let qe=0;qe<Q.itemCount_;qe++)De[qe]=me.valueToCode(Q,"ADD"+qe,Ce.NONE)||"null";return["["+De.join(", ")+"]",Ce.ATOMIC]},m=function(Q,me){const De=me.provideFunction_("listsRepeat",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),qe=me.valueToCode(Q,"ITEM",Ce.NONE)||"null";return Q=me.valueToCode(Q,"NUM",Ce.NONE)||"0",[De+"("+qe+", "+Q+")",Ce.FUNCTION_CALL]},_=function(Q,me){return[(me.valueToCode(Q,"VALUE",Ce.MEMBER)||"[]")+".length",Ce.MEMBER]},v=function(Q,me){return["!"+(me.valueToCode(Q,"VALUE",Ce.MEMBER)||"[]")+".length",Ce.LOGICAL_NOT]},E=function(Q,me){const De=Q.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",qe=me.valueToCode(Q,"FIND",Ce.NONE)||"''";return me=(me.valueToCode(Q,"VALUE",Ce.MEMBER)||"[]")+"."+De+"("+qe+")",Q.workspace.options.oneBasedIndex?[me+" + 1",Ce.ADDITION]:[me,Ce.FUNCTION_CALL]},w=function(Q,me){const De=Q.getFieldValue("MODE")||"GET",qe=Q.getFieldValue("WHERE")||"FROM_START";var It=me.valueToCode(Q,"VALUE",qe==="RANDOM"?Ce.NONE:Ce.MEMBER)||"[]";switch(qe){case"FIRST":if(De==="GET")return[It+"[0]",Ce.MEMBER];if(De==="GET_REMOVE")return[It+".shift()",Ce.MEMBER];if(De==="REMOVE")return It+`.shift();
`;break;case"LAST":if(De==="GET")return[It+".slice(-1)[0]",Ce.MEMBER];if(De==="GET_REMOVE")return[It+".pop()",Ce.MEMBER];if(De==="REMOVE")return It+`.pop();
`;break;case"FROM_START":if(Q=me.getAdjusted(Q,"AT"),De==="GET")return[It+"["+Q+"]",Ce.MEMBER];if(De==="GET_REMOVE")return[It+".splice("+Q+", 1)[0]",Ce.FUNCTION_CALL];if(De==="REMOVE")return It+".splice("+Q+`, 1);
`;break;case"FROM_END":if(Q=me.getAdjusted(Q,"AT",1,!0),De==="GET")return[It+".slice("+Q+")[0]",Ce.FUNCTION_CALL];if(De==="GET_REMOVE")return[It+".splice("+Q+", 1)[0]",Ce.FUNCTION_CALL];if(De==="REMOVE")return It+".splice("+Q+", 1);";break;case"RANDOM":if(It=me.provideFunction_("listsGetRandomItem",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+It+", "+(De!=="GET")+")",De==="GET"||De==="GET_REMOVE")return[It,Ce.FUNCTION_CALL];if(De==="REMOVE")return It+`;
`}throw Error("Unhandled combination (lists_getIndex).")},x=function(Q,me){function De(){if(qe.match(/^\w+$/))return"";const Ae=me.nameDB_.getDistinctName("tmpList",i.NameType$$module$build$src$core$names.VARIABLE),at="var "+Ae+" = "+qe+`;
`;return qe=Ae,at}let qe=me.valueToCode(Q,"LIST",Ce.MEMBER)||"[]";const It=Q.getFieldValue("MODE")||"GET";var qt=Q.getFieldValue("WHERE")||"FROM_START";const gn=me.valueToCode(Q,"TO",Ce.ASSIGNMENT)||"null";switch(qt){case"FIRST":if(It==="SET")return qe+"[0] = "+gn+`;
`;if(It==="INSERT")return qe+".unshift("+gn+`);
`;break;case"LAST":if(It==="SET")return De()+(qe+"["+qe+".length - 1] = "+gn+`;
`);if(It==="INSERT")return qe+".push("+gn+`);
`;break;case"FROM_START":if(Q=me.getAdjusted(Q,"AT"),It==="SET")return qe+"["+Q+"] = "+gn+`;
`;if(It==="INSERT")return qe+".splice("+Q+", 0, "+gn+`);
`;break;case"FROM_END":if(Q=me.getAdjusted(Q,"AT",1,!1,Ce.SUBTRACTION),qt=De(),It==="SET")return qt+(qe+"["+qe+".length - "+Q+"] = "+gn+`;
`);if(It==="INSERT")return qt+(qe+".splice("+qe+".length - "+Q+", 0, "+gn+`);
`);break;case"RANDOM":if(Q=De(),qt=me.nameDB_.getDistinctName("tmpX",i.NameType$$module$build$src$core$names.VARIABLE),Q+="var "+qt+" = Math.floor(Math.random() * "+qe+`.length);
`,It==="SET")return Q+(qe+"["+qt+"] = "+gn+`;
`);if(It==="INSERT")return Q+(qe+".splice("+qt+", 0, "+gn+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},A=function(Q,me){var De={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},qe=me.valueToCode(Q,"LIST",Ce.MEMBER)||"[]";const It=Q.getFieldValue("WHERE1"),qt=Q.getFieldValue("WHERE2");if(It==="FIRST"&&qt==="LAST")qe+=".slice(0)";else if(qe.match(/^\w+$/)||It!=="FROM_END"&&qt==="FROM_START"){switch(It){case"FROM_START":De=me.getAdjusted(Q,"AT1");break;case"FROM_END":De=me.getAdjusted(Q,"AT1",1,!1,Ce.SUBTRACTION),De=qe+".length - "+De;break;case"FIRST":De="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(qt){case"FROM_START":me=me.getAdjusted(Q,"AT2",1);break;case"FROM_END":me=me.getAdjusted(Q,"AT2",0,!1,Ce.SUBTRACTION),me=qe+".length - "+me;break;case"LAST":me=qe+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}qe=qe+".slice("+De+", "+me+")"}else{const gn=me.getAdjusted(Q,"AT1");Q=me.getAdjusted(Q,"AT2"),qe=me.provideFunction_("subsequence"+De[It]+De[qt],`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(sequence${It==="FROM_END"||It==="FROM_START"?", at1":""}${qt==="FROM_END"||qt==="FROM_START"?", at2":""}) {
  var start = ${oe("sequence",It,"at1")};
  var end = ${oe("sequence",qt,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+qe+(It==="FROM_END"||It==="FROM_START"?", "+gn:"")+(qt==="FROM_END"||qt==="FROM_START"?", "+Q:"")+")"}return[qe,Ce.FUNCTION_CALL]},O=function(Q,me){const De=me.valueToCode(Q,"LIST",Ce.FUNCTION_CALL)||"[]",qe=Q.getFieldValue("DIRECTION")==="1"?1:-1;return Q=Q.getFieldValue("TYPE"),me=me.provideFunction_("listsGetSortCompare",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[De+".slice().sort("+me+'("'+Q+'", '+qe+"))",Ce.FUNCTION_CALL]},k=function(Q,me){let De=me.valueToCode(Q,"INPUT",Ce.MEMBER);if(me=me.valueToCode(Q,"DELIM",Ce.NONE)||"''",Q=Q.getFieldValue("MODE"),Q==="SPLIT")De||(De="''"),Q="split";else if(Q==="JOIN")De||(De="[]"),Q="join";else throw Error("Unknown mode: "+Q);return[De+"."+Q+"("+me+")",Ce.FUNCTION_CALL]},D=function(Q,me){return[(me.valueToCode(Q,"LIST",Ce.FUNCTION_CALL)||"[]")+".slice().reverse()",Ce.FUNCTION_CALL]},N=function(Q,me){var De=0;let qe="";me.STATEMENT_PREFIX&&(qe+=me.injectId(me.STATEMENT_PREFIX,Q));do{const It=me.valueToCode(Q,"IF"+De,Ce.NONE)||"false";let qt=me.statementToCode(Q,"DO"+De);me.STATEMENT_SUFFIX&&(qt=me.prefixLines(me.injectId(me.STATEMENT_SUFFIX,Q),me.INDENT)+qt),qe+=(0<De?" else ":"")+"if ("+It+`) {
`+qt+"}",De++}while(Q.getInput("IF"+De));return(Q.getInput("ELSE")||me.STATEMENT_SUFFIX)&&(De=me.statementToCode(Q,"ELSE"),me.STATEMENT_SUFFIX&&(De=me.prefixLines(me.injectId(me.STATEMENT_SUFFIX,Q),me.INDENT)+De),qe+=` else {
`+De+"}"),qe+`
`},F=function(Q,me){const De={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[Q.getFieldValue("OP")],qe=De==="=="||De==="!="?Ce.EQUALITY:Ce.RELATIONAL,It=me.valueToCode(Q,"A",qe)||"0";return Q=me.valueToCode(Q,"B",qe)||"0",[It+" "+De+" "+Q,qe]},z=function(Q,me){const De=Q.getFieldValue("OP")==="AND"?"&&":"||",qe=De==="&&"?Ce.LOGICAL_AND:Ce.LOGICAL_OR;let It=me.valueToCode(Q,"A",qe);return Q=me.valueToCode(Q,"B",qe),It||Q?(me=De==="&&"?"true":"false",It||(It=me),Q||(Q=me)):Q=It="false",[It+" "+De+" "+Q,qe]},V=function(Q,me){const De=Ce.LOGICAL_NOT;return["!"+(me.valueToCode(Q,"BOOL",De)||"true"),De]},U=function(Q,me){return[Q.getFieldValue("BOOL")==="TRUE"?"true":"false",Ce.ATOMIC]},ee=function(Q,me){return["null",Ce.ATOMIC]},ne=function(Q,me){const De=me.valueToCode(Q,"IF",Ce.CONDITIONAL)||"false",qe=me.valueToCode(Q,"THEN",Ce.CONDITIONAL)||"null";return Q=me.valueToCode(Q,"ELSE",Ce.CONDITIONAL)||"null",[De+" ? "+qe+" : "+Q,Ce.CONDITIONAL]},ie=function(Q,me){let De;De=Q.getField("TIMES")?String(Number(Q.getFieldValue("TIMES"))):me.valueToCode(Q,"TIMES",Ce.ASSIGNMENT)||"0";let qe=me.statementToCode(Q,"DO");qe=me.addLoopTrap(qe,Q),Q="";const It=me.nameDB_.getDistinctName("count",i.NameType$$module$build$src$core$names.VARIABLE);let qt=De;return De.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(De)||(qt=me.nameDB_.getDistinctName("repeat_end",i.NameType$$module$build$src$core$names.VARIABLE),Q+="var "+qt+" = "+De+`;
`),Q+("for (var "+It+" = 0; "+It+" < "+qt+"; "+It+`++) {
`+qe+`}
`)},se=function(Q,me){const De=Q.getFieldValue("MODE")==="UNTIL";let qe=me.valueToCode(Q,"BOOL",De?Ce.LOGICAL_NOT:Ce.NONE)||"false",It=me.statementToCode(Q,"DO");return It=me.addLoopTrap(It,Q),De&&(qe="!"+qe),"while ("+qe+`) {
`+It+`}
`},fe=function(Q,me){var De=me.getVariableName(Q.getFieldValue("VAR")),qe=me.valueToCode(Q,"FROM",Ce.ASSIGNMENT)||"0",It=me.valueToCode(Q,"TO",Ce.ASSIGNMENT)||"0";const qt=me.valueToCode(Q,"BY",Ce.ASSIGNMENT)||"1";let gn=me.statementToCode(Q,"DO");if(gn=me.addLoopTrap(gn,Q),i.isNumber$$module$build$src$core$utils$string(qe)&&i.isNumber$$module$build$src$core$utils$string(It)&&i.isNumber$$module$build$src$core$utils$string(qt))me=Number(qe)<=Number(It),Q="for ("+De+" = "+qe+"; "+De+(me?" <= ":" >= ")+It+"; "+De,De=Math.abs(Number(qt)),Q=De===1?Q+(me?"++":"--"):Q+((me?" += ":" -= ")+De),Q+=`) {
`+gn+`}
`;else{Q="";let Ae=qe;qe.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(qe)||(Ae=me.nameDB_.getDistinctName(De+"_start",i.NameType$$module$build$src$core$names.VARIABLE),Q+="var "+Ae+" = "+qe+`;
`),qe=It,It.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(It)||(qe=me.nameDB_.getDistinctName(De+"_end",i.NameType$$module$build$src$core$names.VARIABLE),Q+="var "+qe+" = "+It+`;
`),It=me.nameDB_.getDistinctName(De+"_inc",i.NameType$$module$build$src$core$names.VARIABLE),Q+="var "+It+" = ",Q=i.isNumber$$module$build$src$core$utils$string(qt)?Q+(Math.abs(Number(qt))+`;
`):Q+("Math.abs("+qt+`);
`),Q+="if ("+Ae+" > "+qe+`) {
`,Q+=me.INDENT+It+" = -"+It+`;
`,Q=Q+`}
for (`+(De+" = "+Ae+"; "+It+" >= 0 ? "+De+" <= "+qe+" : "+De+" >= "+qe+"; "+De+" += "+It+`) {
`+gn+`}
`)}return Q},ae=function(Q,me){const De=me.getVariableName(Q.getFieldValue("VAR"));var qe=me.valueToCode(Q,"LIST",Ce.ASSIGNMENT)||"[]";let It=me.statementToCode(Q,"DO");It=me.addLoopTrap(It,Q),Q="";let qt=qe;return qe.match(/^\w+$/)||(qt=me.nameDB_.getDistinctName(De+"_list",i.NameType$$module$build$src$core$names.VARIABLE),Q+="var "+qt+" = "+qe+`;
`),qe=me.nameDB_.getDistinctName(De+"_index",i.NameType$$module$build$src$core$names.VARIABLE),It=me.INDENT+De+" = "+qt+"["+qe+`];
`+It,Q+("for (var "+qe+" in "+qt+`) {
`+It+`}
`)},he=function(Q,me){let De="";if(me.STATEMENT_PREFIX&&(De+=me.injectId(me.STATEMENT_PREFIX,Q)),me.STATEMENT_SUFFIX&&(De+=me.injectId(me.STATEMENT_SUFFIX,Q)),me.STATEMENT_PREFIX){const qe=Q.getSurroundLoop();qe&&!qe.suppressPrefixSuffix&&(De+=me.injectId(me.STATEMENT_PREFIX,qe))}switch(Q.getFieldValue("FLOW")){case"BREAK":return De+`break;
`;case"CONTINUE":return De+`continue;
`}throw Error("Unknown flow statement.")},ge=function(Q,me){return Q=Number(Q.getFieldValue("NUM")),[String(Q),0<=Q?Ce.ATOMIC:Ce.UNARY_NEGATION]},Ie=function(Q,me){var De={ADD:[" + ",Ce.ADDITION],MINUS:[" - ",Ce.SUBTRACTION],MULTIPLY:[" * ",Ce.MULTIPLICATION],DIVIDE:[" / ",Ce.DIVISION],POWER:[null,Ce.NONE]}[Q.getFieldValue("OP")];const qe=De[0];De=De[1];const It=me.valueToCode(Q,"A",De)||"0";return Q=me.valueToCode(Q,"B",De)||"0",qe?[It+qe+Q,De]:["Math.pow("+It+", "+Q+")",Ce.FUNCTION_CALL]},j=function(Q,me){const De=Q.getFieldValue("OP");let qe;if(De==="NEG")return Q=me.valueToCode(Q,"NUM",Ce.UNARY_NEGATION)||"0",Q[0]==="-"&&(Q=" "+Q),["-"+Q,Ce.UNARY_NEGATION];switch(Q=De==="SIN"||De==="COS"||De==="TAN"?me.valueToCode(Q,"NUM",Ce.DIVISION)||"0":me.valueToCode(Q,"NUM",Ce.NONE)||"0",De){case"ABS":qe="Math.abs("+Q+")";break;case"ROOT":qe="Math.sqrt("+Q+")";break;case"LN":qe="Math.log("+Q+")";break;case"EXP":qe="Math.exp("+Q+")";break;case"POW10":qe="Math.pow(10,"+Q+")";break;case"ROUND":qe="Math.round("+Q+")";break;case"ROUNDUP":qe="Math.ceil("+Q+")";break;case"ROUNDDOWN":qe="Math.floor("+Q+")";break;case"SIN":qe="Math.sin("+Q+" / 180 * Math.PI)";break;case"COS":qe="Math.cos("+Q+" / 180 * Math.PI)";break;case"TAN":qe="Math.tan("+Q+" / 180 * Math.PI)"}if(qe)return[qe,Ce.FUNCTION_CALL];switch(De){case"LOG10":qe="Math.log("+Q+") / Math.log(10)";break;case"ASIN":qe="Math.asin("+Q+") / Math.PI * 180";break;case"ACOS":qe="Math.acos("+Q+") / Math.PI * 180";break;case"ATAN":qe="Math.atan("+Q+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+De)}return[qe,Ce.DIVISION]},te=function(Q,me){return{PI:["Math.PI",Ce.MEMBER],E:["Math.E",Ce.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",Ce.DIVISION],SQRT2:["Math.SQRT2",Ce.MEMBER],SQRT1_2:["Math.SQRT1_2",Ce.MEMBER],INFINITY:["Infinity",Ce.ATOMIC]}[Q.getFieldValue("CONSTANT")]},q=function(Q,me){var De={EVEN:[" % 2 === 0",Ce.MODULUS,Ce.EQUALITY],ODD:[" % 2 === 1",Ce.MODULUS,Ce.EQUALITY],WHOLE:[" % 1 === 0",Ce.MODULUS,Ce.EQUALITY],POSITIVE:[" > 0",Ce.RELATIONAL,Ce.RELATIONAL],NEGATIVE:[" < 0",Ce.RELATIONAL,Ce.RELATIONAL],DIVISIBLE_BY:[null,Ce.MODULUS,Ce.EQUALITY],PRIME:[null,Ce.NONE,Ce.FUNCTION_CALL]};const qe=Q.getFieldValue("PROPERTY"),[It,qt,gn]=De[qe];return De=me.valueToCode(Q,"NUMBER_TO_CHECK",qt)||"0",qe==="PRIME"?Q=me.provideFunction_("mathIsPrime",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+De+")":qe==="DIVISIBLE_BY"?(Q=me.valueToCode(Q,"DIVISOR",Ce.MODULUS)||"0",Q=De+" % "+Q+" === 0"):Q=De+It,[Q,gn]},le=function(Q,me){const De=me.valueToCode(Q,"DELTA",Ce.ADDITION)||"0";return Q=me.getVariableName(Q.getFieldValue("VAR")),Q+" = (typeof "+Q+" === 'number' ? "+Q+" : 0) + "+De+`;
`},_e=function(Q,me){var De=Q.getFieldValue("OP");switch(De){case"SUM":Q=me.valueToCode(Q,"LIST",Ce.MEMBER)||"[]",Q+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":Q=me.valueToCode(Q,"LIST",Ce.NONE)||"[]",Q="Math.min.apply(null, "+Q+")";break;case"MAX":Q=me.valueToCode(Q,"LIST",Ce.NONE)||"[]",Q="Math.max.apply(null, "+Q+")";break;case"AVERAGE":De=me.provideFunction_("mathMean",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),Q=me.valueToCode(Q,"LIST",Ce.NONE)||"[]",Q=De+"("+Q+")";break;case"MEDIAN":De=me.provideFunction_("mathMedian",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),Q=me.valueToCode(Q,"LIST",Ce.NONE)||"[]",Q=De+"("+Q+")";break;case"MODE":De=me.provideFunction_("mathModes",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),Q=me.valueToCode(Q,"LIST",Ce.NONE)||"[]",Q=De+"("+Q+")";break;case"STD_DEV":De=me.provideFunction_("mathStandardDeviation",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`),Q=me.valueToCode(Q,"LIST",Ce.NONE)||"[]",Q=De+"("+Q+")";break;case"RANDOM":De=me.provideFunction_("mathRandomList",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),Q=me.valueToCode(Q,"LIST",Ce.NONE)||"[]",Q=De+"("+Q+")";break;default:throw Error("Unknown operator: "+De)}return[Q,Ce.FUNCTION_CALL]},Le=function(Q,me){const De=me.valueToCode(Q,"DIVIDEND",Ce.MODULUS)||"0";return Q=me.valueToCode(Q,"DIVISOR",Ce.MODULUS)||"0",[De+" % "+Q,Ce.MODULUS]},xe=function(Q,me){const De=me.valueToCode(Q,"VALUE",Ce.NONE)||"0",qe=me.valueToCode(Q,"LOW",Ce.NONE)||"0";return Q=me.valueToCode(Q,"HIGH",Ce.NONE)||"Infinity",["Math.min(Math.max("+De+", "+qe+"), "+Q+")",Ce.FUNCTION_CALL]},Ve=function(Q,me){const De=me.valueToCode(Q,"FROM",Ce.NONE)||"0";return Q=me.valueToCode(Q,"TO",Ce.NONE)||"0",[me.provideFunction_("mathRandomInt",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+De+", "+Q+")",Ce.FUNCTION_CALL]},Re=function(Q,me){return["Math.random()",Ce.FUNCTION_CALL]},Ze=function(Q,me){const De=me.valueToCode(Q,"X",Ce.NONE)||"0";return["Math.atan2("+(me.valueToCode(Q,"Y",Ce.NONE)||"0")+", "+De+") / Math.PI * 180",Ce.DIVISION]},et=function(Q,me){const De=me.getProcedureName(Q.getFieldValue("NAME"));var qe="";me.STATEMENT_PREFIX&&(qe+=me.injectId(me.STATEMENT_PREFIX,Q)),me.STATEMENT_SUFFIX&&(qe+=me.injectId(me.STATEMENT_SUFFIX,Q)),qe&&(qe=me.prefixLines(qe,me.INDENT));let It="";me.INFINITE_LOOP_TRAP&&(It=me.prefixLines(me.injectId(me.INFINITE_LOOP_TRAP,Q),me.INDENT));const qt=me.statementToCode(Q,"STACK");let gn=me.valueToCode(Q,"RETURN",Ce.NONE)||"",Ae="";qt&&gn&&(Ae=qe),gn&&(gn=me.INDENT+"return "+gn+`;
`);const at=[],bt=Q.getVars();for(let dt=0;dt<bt.length;dt++)at[dt]=me.getVariableName(bt[dt]);return qe="function "+De+"("+at.join(", ")+`) {
`+qe+It+qt+Ae+gn+"}",qe=me.scrub_(Q,qe),me.definitions_["%"+De]=qe,null},ct=function(Q,me){const De=me.getProcedureName(Q.getFieldValue("NAME")),qe=[],It=Q.getVars();for(let qt=0;qt<It.length;qt++)qe[qt]=me.valueToCode(Q,"ARG"+qt,Ce.NONE)||"null";return[De+"("+qe.join(", ")+")",Ce.FUNCTION_CALL]},rt=function(Q,me){return me.forBlock.procedures_callreturn(Q,me)[0]+`;
`},Ne=function(Q,me){let De="if ("+(me.valueToCode(Q,"CONDITION",Ce.NONE)||"false")+`) {
`;return me.STATEMENT_SUFFIX&&(De+=me.prefixLines(me.injectId(me.STATEMENT_SUFFIX,Q),me.INDENT)),Q.hasReturnValue_?(Q=me.valueToCode(Q,"VALUE",Ce.NONE)||"null",De+=me.INDENT+"return "+Q+`;
`):De+=me.INDENT+`return;
`,De+`}
`},we=function(Q,me){return[me.quote_(Q.getFieldValue("TEXT")),Ce.ATOMIC]},ze=function(Q,me){return Q=me.multiline_quote_(Q.getFieldValue("TEXT")),me=Q.indexOf("+")!==-1?Ce.ADDITION:Ce.ATOMIC,[Q,me]},it=function(Q,me){switch(Q.itemCount_){case 0:return["''",Ce.ATOMIC];case 1:return Q=me.valueToCode(Q,"ADD0",Ce.NONE)||"''",Ut(Q);case 2:var De=me.valueToCode(Q,"ADD0",Ce.NONE)||"''";return Q=me.valueToCode(Q,"ADD1",Ce.NONE)||"''",[Ut(De)[0]+" + "+Ut(Q)[0],Ce.ADDITION];default:De=Array(Q.itemCount_);for(let qe=0;qe<Q.itemCount_;qe++)De[qe]=me.valueToCode(Q,"ADD"+qe,Ce.NONE)||"''";return["["+De.join(",")+"].join('')",Ce.FUNCTION_CALL]}},nt=function(Q,me){const De=me.getVariableName(Q.getFieldValue("VAR"));return Q=me.valueToCode(Q,"TEXT",Ce.NONE)||"''",De+" += "+Ut(Q)[0]+`;
`},Mt=function(Q,me){return[(me.valueToCode(Q,"VALUE",Ce.MEMBER)||"''")+".length",Ce.MEMBER]},At=function(Q,me){return["!"+(me.valueToCode(Q,"VALUE",Ce.MEMBER)||"''")+".length",Ce.LOGICAL_NOT]},ht=function(Q,me){const De=Q.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",qe=me.valueToCode(Q,"FIND",Ce.NONE)||"''";return me=(me.valueToCode(Q,"VALUE",Ce.MEMBER)||"''")+"."+De+"("+qe+")",Q.workspace.options.oneBasedIndex?[me+" + 1",Ce.ADDITION]:[me,Ce.FUNCTION_CALL]},Et=function(Q,me){const De=Q.getFieldValue("WHERE")||"FROM_START",qe=me.valueToCode(Q,"VALUE",De==="RANDOM"?Ce.NONE:Ce.MEMBER)||"''";switch(De){case"FIRST":return[qe+".charAt(0)",Ce.FUNCTION_CALL];case"LAST":return[qe+".slice(-1)",Ce.FUNCTION_CALL];case"FROM_START":return Q=me.getAdjusted(Q,"AT"),[qe+".charAt("+Q+")",Ce.FUNCTION_CALL];case"FROM_END":return Q=me.getAdjusted(Q,"AT",1,!0),[qe+".slice("+Q+").charAt(0)",Ce.FUNCTION_CALL];case"RANDOM":return[me.provideFunction_("textRandomLetter",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+qe+")",Ce.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},wt=function(Q,me){var De={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const qe=Q.getFieldValue("WHERE1"),It=Q.getFieldValue("WHERE2");var qt=qe!=="FROM_END"&&qe!=="LAST"&&It!=="FROM_END"&&It!=="LAST",gn=me.valueToCode(Q,"STRING",qt?Ce.MEMBER:Ce.NONE)||"''";if(qe==="FIRST"&&It==="LAST")return[gn,Ce.NONE];if(gn.match(/^'?\w+'?$/)||qt){switch(qe){case"FROM_START":De=me.getAdjusted(Q,"AT1");break;case"FROM_END":De=me.getAdjusted(Q,"AT1",1,!1,Ce.SUBTRACTION),De=gn+".length - "+De;break;case"FIRST":De="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(It){case"FROM_START":me=me.getAdjusted(Q,"AT2",1);break;case"FROM_END":me=me.getAdjusted(Q,"AT2",0,!1,Ce.SUBTRACTION),me=gn+".length - "+me;break;case"LAST":me=gn+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}gn=gn+".slice("+De+", "+me+")"}else qt=me.getAdjusted(Q,"AT1"),Q=me.getAdjusted(Q,"AT2"),gn=me.provideFunction_("subsequence"+De[qe]+De[It],`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(sequence${qe==="FROM_END"||qe==="FROM_START"?", at1":""}${It==="FROM_END"||It==="FROM_START"?", at2":""}) {
  var start = ${Pt("sequence",qe,"at1")};
  var end = ${Pt("sequence",It,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+gn+(qe==="FROM_END"||qe==="FROM_START"?", "+qt:"")+(It==="FROM_END"||It==="FROM_START"?", "+Q:"")+")";return[gn,Ce.FUNCTION_CALL]},pt=function(Q,me){const De={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[Q.getFieldValue("CASE")];return Q=me.valueToCode(Q,"TEXT",De?Ce.MEMBER:Ce.NONE)||"''",[De?Q+De:me.provideFunction_("textToTitleCase",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+Q+")",Ce.FUNCTION_CALL]},be=function(Q,me){const De={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[Q.getFieldValue("MODE")];return[(me.valueToCode(Q,"TEXT",Ce.MEMBER)||"''")+De,Ce.FUNCTION_CALL]},Z=function(Q,me){return"window.alert("+(me.valueToCode(Q,"TEXT",Ce.NONE)||"''")+`);
`},ke=function(Q,me){return me="window.prompt("+(Q.getField("TEXT")?me.quote_(Q.getFieldValue("TEXT")):me.valueToCode(Q,"TEXT",Ce.NONE)||"''")+")",Q.getFieldValue("TYPE")==="NUMBER"&&(me="Number("+me+")"),[me,Ce.FUNCTION_CALL]},lt=function(Q,me){const De=me.valueToCode(Q,"TEXT",Ce.NONE)||"''";return Q=me.valueToCode(Q,"SUB",Ce.NONE)||"''",[me.provideFunction_("textCount",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+De+", "+Q+")",Ce.FUNCTION_CALL]},mt=function(Q,me){const De=me.valueToCode(Q,"TEXT",Ce.NONE)||"''",qe=me.valueToCode(Q,"FROM",Ce.NONE)||"''";return Q=me.valueToCode(Q,"TO",Ce.NONE)||"''",[me.provideFunction_("textReplace",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+De+", "+qe+", "+Q+")",Ce.FUNCTION_CALL]},xt=function(Q,me){return[(me.valueToCode(Q,"TEXT",Ce.MEMBER)||"''")+".split('').reverse().join('')",Ce.FUNCTION_CALL]},ut=function(Q,me){return[me.getVariableName(Q.getFieldValue("VAR")),Ce.ATOMIC]},He=function(Q,me){const De=me.valueToCode(Q,"VALUE",Ce.ASSIGNMENT)||"0";return me.getVariableName(Q.getFieldValue("VAR"))+" = "+De+`;
`},Ce;(function(Q){Q[Q.ATOMIC=0]="ATOMIC",Q[Q.NEW=1.1]="NEW",Q[Q.MEMBER=1.2]="MEMBER",Q[Q.FUNCTION_CALL=2]="FUNCTION_CALL",Q[Q.INCREMENT=3]="INCREMENT",Q[Q.DECREMENT=3]="DECREMENT",Q[Q.BITWISE_NOT=4.1]="BITWISE_NOT",Q[Q.UNARY_PLUS=4.2]="UNARY_PLUS",Q[Q.UNARY_NEGATION=4.3]="UNARY_NEGATION",Q[Q.LOGICAL_NOT=4.4]="LOGICAL_NOT",Q[Q.TYPEOF=4.5]="TYPEOF",Q[Q.VOID=4.6]="VOID",Q[Q.DELETE=4.7]="DELETE",Q[Q.AWAIT=4.8]="AWAIT",Q[Q.EXPONENTIATION=5]="EXPONENTIATION",Q[Q.MULTIPLICATION=5.1]="MULTIPLICATION",Q[Q.DIVISION=5.2]="DIVISION",Q[Q.MODULUS=5.3]="MODULUS",Q[Q.SUBTRACTION=6.1]="SUBTRACTION",Q[Q.ADDITION=6.2]="ADDITION",Q[Q.BITWISE_SHIFT=7]="BITWISE_SHIFT",Q[Q.RELATIONAL=8]="RELATIONAL",Q[Q.IN=8]="IN",Q[Q.INSTANCEOF=8]="INSTANCEOF",Q[Q.EQUALITY=9]="EQUALITY",Q[Q.BITWISE_AND=10]="BITWISE_AND",Q[Q.BITWISE_XOR=11]="BITWISE_XOR",Q[Q.BITWISE_OR=12]="BITWISE_OR",Q[Q.LOGICAL_AND=13]="LOGICAL_AND",Q[Q.LOGICAL_OR=14]="LOGICAL_OR",Q[Q.CONDITIONAL=15]="CONDITIONAL",Q[Q.ASSIGNMENT=16]="ASSIGNMENT",Q[Q.YIELD=17]="YIELD",Q[Q.COMMA=18]="COMMA",Q[Q.NONE=99]="NONE"})(Ce||(Ce={}));var X=class extends i.CodeGenerator$$module$build$src$core$generator{constructor(Q="JavaScript"){super(Q),this.ORDER_OVERRIDES=[[Ce.FUNCTION_CALL,Ce.MEMBER],[Ce.FUNCTION_CALL,Ce.FUNCTION_CALL],[Ce.MEMBER,Ce.MEMBER],[Ce.MEMBER,Ce.FUNCTION_CALL],[Ce.LOGICAL_NOT,Ce.LOGICAL_NOT],[Ce.MULTIPLICATION,Ce.MULTIPLICATION],[Ce.ADDITION,Ce.ADDITION],[Ce.LOGICAL_AND,Ce.LOGICAL_AND],[Ce.LOGICAL_OR,Ce.LOGICAL_OR]],this.isInitialized=!1;for(const me in Ce)Q=Ce[me],typeof Q!="string"&&(this["ORDER_"+me]=Q);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(Q){super.init(Q),this.nameDB_?this.nameDB_.reset():this.nameDB_=new i.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(Q.getVariableMap()),this.nameDB_.populateVariables(Q),this.nameDB_.populateProcedures(Q);const me=[];var De=i.allDeveloperVariables$$module$build$src$core$variables(Q);for(let qe=0;qe<De.length;qe++)me.push(this.nameDB_.getName(De[qe],i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(Q=i.allUsedVarModels$$module$build$src$core$variables(Q),De=0;De<Q.length;De++)me.push(this.nameDB_.getName(Q[De].getId(),i.NameType$$module$build$src$core$names.VARIABLE));me.length&&(this.definitions_.variables="var "+me.join(", ")+";"),this.isInitialized=!0}finish(Q){const me=Object.values(this.definitions_);return super.finish(Q),this.isInitialized=!1,this.nameDB_.reset(),me.join(`

`)+`


`+Q}scrubNakedValue(Q){return Q+`;
`}quote_(Q){return Q=Q.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+Q+"'"}multiline_quote_(Q){return Q.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(Q,me,De=!1){let qe="";if(!Q.outputConnection||!Q.outputConnection.targetConnection){var It=Q.getCommentText();It&&(It=i.wrap$$module$build$src$core$utils$string(It,this.COMMENT_WRAP-3),qe+=this.prefixLines(It+`
`,"// "));for(let qt=0;qt<Q.inputList.length;qt++)Q.inputList[qt].type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(It=Q.inputList[qt].connection.targetBlock())&&(It=this.allNestedComments(It))&&(qe+=this.prefixLines(It,"// "))}return Q=Q.nextConnection&&Q.nextConnection.targetBlock(),De=De?"":this.blockToCode(Q),qe+me+De}getAdjusted(Q,me,De=0,qe=!1,It=Ce.NONE){Q.workspace.options.oneBasedIndex&&De--;const qt=Q.workspace.options.oneBasedIndex?"1":"0";let gn=It;return 0<De?gn=Ce.ADDITION:0>De?gn=Ce.SUBTRACTION:qe&&(gn=Ce.UNARY_NEGATION),Q=this.valueToCode(Q,me,gn)||qt,De===0&&!qe?Q:i.isNumber$$module$build$src$core$utils$string(Q)?(Q=String(Number(Q)+De),qe&&(Q=String(-Number(Q))),Q):(0<De?Q=`${Q} + ${De}`:0>De&&(Q=`${Q} - ${-De}`),qe&&(Q=De?`-(${Q})`:`-${Q}`),Math.floor(It)>=Math.floor(gn)&&(Q=`(${Q})`),Q)}},J={};J.colour_blend=u,J.colour_picker=s,J.colour_random=o,J.colour_rgb=l;var oe=function(Q,me,De){return me==="FIRST"?"0":me==="FROM_END"?Q+".length - 1 - "+De:me==="LAST"?Q+".length - 1":De},$e={};$e.lists_create_empty=h,$e.lists_create_with=p,$e.lists_getIndex=w,$e.lists_getSublist=A,$e.lists_indexOf=E,$e.lists_isEmpty=v,$e.lists_length=_,$e.lists_repeat=m,$e.lists_reverse=D,$e.lists_setIndex=x,$e.lists_sort=O,$e.lists_split=k;var Ge={};Ge.controls_if=N,Ge.controls_ifelse=N,Ge.logic_boolean=U,Ge.logic_compare=F,Ge.logic_negate=V,Ge.logic_null=ee,Ge.logic_operation=z,Ge.logic_ternary=ne;var Bt={};Bt.controls_flow_statements=he,Bt.controls_for=fe,Bt.controls_forEach=ae,Bt.controls_repeat=ie,Bt.controls_repeat_ext=ie,Bt.controls_whileUntil=se;var Pe={};Pe.math_arithmetic=Ie,Pe.math_atan2=Ze,Pe.math_change=le,Pe.math_constant=te,Pe.math_constrain=xe,Pe.math_modulo=Le,Pe.math_number=ge,Pe.math_number_property=q,Pe.math_on_list=_e,Pe.math_random_float=Re,Pe.math_random_int=Ve,Pe.math_round=j,Pe.math_single=j,Pe.math_trig=j;var Wt={};Wt.procedures_callnoreturn=rt,Wt.procedures_callreturn=ct,Wt.procedures_defnoreturn=et,Wt.procedures_defreturn=et,Wt.procedures_ifreturn=Ne;var st=/^\s*'([^']|\\')*'\s*$/,Ut=function(Q){return st.test(Q)?[Q,Ce.ATOMIC]:["String("+Q+")",Ce.FUNCTION_CALL]},Pt=function(Q,me,De){return me==="FIRST"?"0":me==="FROM_END"?Q+".length - 1 - "+De:me==="LAST"?Q+".length - 1":De},Tn={};Tn.text=we,Tn.text_append=nt,Tn.text_changeCase=pt,Tn.text_charAt=Et,Tn.text_count=lt,Tn.text_getSubstring=wt,Tn.text_indexOf=ht,Tn.text_isEmpty=At,Tn.text_join=it,Tn.text_length=Mt,Tn.text_multiline=ze,Tn.text_print=Z,Tn.text_prompt=ke,Tn.text_prompt_ext=ke,Tn.text_replace=mt,Tn.text_reverse=xt,Tn.text_trim=be;var Mr={};Mr.variables_get=ut,Mr.variables_set=He;var nr={};nr.variables_get_dynamic=ut,nr.variables_set_dynamic=He;var ai=new X,ar=Object.assign({},J,$e,Ge,Bt,Pe,Wt,Tn,Mr,nr);for(const Q in ar)ai.forBlock[Q]=ar[Q];var Qn={};return Qn.JavascriptGenerator=X,Qn.Order=Ce,Qn.javascriptGenerator=ai,Qn.__namespace__=i,Qn})}(uk)),uk.exports}(function(r,e){(function(t,i){r.exports=i(PD(),CK())})(Ed,function(t,i){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return i})})(nW);var _1=nW.exports,T3;function MK(){return T3||(T3=1,function(r,e){(function(t,i){r.exports=i(PD(),SK(),xK(),_1)})(Ed,function(t,i,s,o){return t.setLocale(i),t})}(nk)),nk.exports}(function(r,e){(function(t,i){r.exports=i(MK())})(Ed,function(t){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})})(tW);var by=tW.exports,Tt=PD();/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AK={type:"add_text",message0:"Add text %1 with color %2",args0:[{type:"input_value",name:"TEXT",check:"String"},{type:"input_value",name:"COLOR",check:"Colour"}],previousStatement:null,nextStatement:null,colour:160,tooltip:"",helpUrl:""};Tt.Blocks.ChangeLED={init:function(){this.setColour("260"),this.appendValueInput("FIELD_ChangeLED").setCheck("Colour").appendField("Change the LED color to"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setOutput(!1),this.setTooltip("Changes Misty's LED to a specified color")}};Tt.Blocks.TransitionLED={init:function(){this.setColour("260"),this.appendValueInput("COLOR1").setCheck("Colour").appendField("Transition LED from"),this.appendValueInput("COLOR2").setCheck("Colour").appendField("to"),this.appendDummyInput().appendField("using the").appendField(new Tt.FieldDropdown([["Breathe","BREATHE"],["Blink","BLINK"],["Transition Once","TRANSITION_ONCE"]]),"TRANSITION_TYPE").appendField("transition for a duration of").appendField(new Tt.FieldNumber(100),"FIELD_TransitionTime_TimeMs").appendField("ms"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Transition LED between two colors with the specified transition type and time.")}};Tt.Blocks.DisplayImage={init:function(){this.setColour("260"),this.appendValueInput("FIELD_DisplayImage_Filename").setCheck("Face").appendField("Change face expression to: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Displays an image on Misty's screen, Alpha specifies transparency (0 is completely transparent, 1 is completely opaque) ***WARNING: MUST connect with ListFilesAvailable to select the image file to display***")}};Tt.Blocks.MoveHead={init:function(){this.setColour("260"),this.appendDummyInput().appendField("Move head").appendField(new Tt.FieldDropdown([["Up","U"],["Down","D"]]),"FIELD_MoveHead_Pitch"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves Misty's head Up or Down"),this.setHelpUrl("MoveHead")}};Tt.Blocks.MoveHead2={init:function(){this.setColour("260"),this.appendDummyInput().appendField("Move head").appendField("Pitch (-40 to 25):").appendField(new Tt.FieldNumber(0,-40,25,1),"FIELD_MoveHead_Pitch").appendField("Roll (-42 to 42):").appendField(new Tt.FieldNumber(0,-42,42,1),"FIELD_MoveHead_Roll").appendField("Yaw (-90 to 90):").appendField(new Tt.FieldNumber(0,-90,90,1),"FIELD_MoveHead_Yaw"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves Misty's head a specified amount of degrees with roll, pitch, and/or yaw"),this.setHelpUrl("MoveHead")}};Tt.Blocks.MoveArm={init:function(){this.setColour("260"),this.appendDummyInput().appendField("Move ").appendField(new Tt.FieldDropdown([["Right","Right"],["Left","Left"]]),"FIELD_MoveArm_Arm").appendField("arm to position").appendField(new Tt.FieldNumber(0,-90,90,1),"FIELD_MoveArm_Position").appendField("at a speed of (0 to 100)").appendField(new Tt.FieldNumber(50,0,100,1),"FIELD_MoveArm_Velocity"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves one of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed (between 0 and 100)"),this.setHelpUrl("MoveArm")}};Tt.Blocks.MoveArm2={init:function(){this.setColour("260"),this.appendDummyInput().appendField("Move both arms to position").appendField(new Tt.FieldNumber(0),"FIELD_MoveArm2_Position").appendField("at a speed of (0 to 100)").appendField(new Tt.FieldNumber(50,0,100,1),"FIELD_MoveArm2_Velocity"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed (between 0 and 100)"),this.setHelpUrl("MoveArm2")}};Tt.Blocks.MoveArms={init:function(){this.setColour("260"),this.appendDummyInput().appendField("Move left arm to position").appendField(new Tt.FieldNumber(0,-29,90,1),"FIELD_MoveArm_LeftPosition").appendField("at a speed of (0 to 100)").appendField(new Tt.FieldNumber(50,0,100,1),"FIELD_MoveArm_LeftVelocity").appendField("and move right arm to position").appendField(new Tt.FieldNumber(0,-29,90,1),"FIELD_MoveArm_RightPosition").appendField("at a speed of (0 to 100)").appendField(new Tt.FieldNumber(50,0,100,1),"FIELD_MoveArm_RightVelocity"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed (between 0 and 100)"),this.setHelpUrl("MoveArms")}};Tt.Blocks.MoveArms2={init:function(){var r=this.workspace.newBlock("math_number");r.setShadow(!0),r.initSvg(),r.render();var e=r.outputConnection,t=this.workspace.newBlock("math_number");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection,s=this.workspace.newBlock("math_number");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection,l=this.workspace.newBlock("math_number");l.setShadow(!0),l.initSvg(),l.render();var u=l.outputConnection;this.setColour("260"),this.appendValueInput("FIELD_MoveArm_LeftPosition").setCheck("Number").appendField("Move left arm to position");var h=this.getInput("FIELD_MoveArm_LeftPosition").connection;h.connect(e),this.appendValueInput("FIELD_MoveArm_LeftVelocity").setCheck("Number").appendField("at a speed of (0 to 100)");var m=this.getInput("FIELD_MoveArm_LeftVelocity").connection;m.connect(i),this.appendValueInput("FIELD_MoveArm_RightPosition").setCheck("Number").appendField("and move right arm to position");var p=this.getInput("FIELD_MoveArm_RightPosition").connection;p.connect(o),this.appendValueInput("FIELD_MoveArm_RightVelocity").setCheck("Number").appendField("at a speed of (0 to 100)");var m=this.getInput("FIELD_MoveArm_RightVelocity").connection;m.connect(u),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed"),this.setHelpUrl("MoveArms")}};Tt.Blocks.DriveTime={init:function(){this.setColour("260"),this.appendDummyInput().appendField("Move ").appendField(new Tt.FieldDropdown([["Forward","F"],["Backward","B"]]),"FIELD_DriveTime_Direction").appendField("at a speed of (0 to 100)").appendField(new Tt.FieldNumber(25,0,100,1),"FIELD_DriveTime_Velocity").appendField("for a duration of").appendField(new Tt.FieldNumber(1500,100,1e4,100),"FIELD_DriveTime_TimeMs").appendField("ms"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Drives Misty straight in a specified direction at a specified speed for a specified amount of time (1000ms = 1 second)"),this.setHelpUrl("DriveTime")}};Tt.Blocks.MoveHead3={init:function(){var r=this.workspace.newBlock("math_number");r.setShadow(!0),r.initSvg(),r.render();var e=r.outputConnection,t=this.workspace.newBlock("math_number");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection,s=this.workspace.newBlock("math_number");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection;this.setColour("260"),this.appendValueInput("FIELD_MoveHead_Pitch").setCheck("Number").appendField("Move head").appendField("Pitch (-40 to 25):");var l=this.getInput("FIELD_MoveHead_Pitch").connection;l.connect(e),this.appendValueInput("FIELD_MoveHead_Roll").setCheck("Number").appendField("Roll (-42 to 42):");var u=this.getInput("FIELD_MoveHead_Roll").connection;u.connect(i),this.appendValueInput("FIELD_MoveHead_Yaw").setCheck("Number").appendField("Yaw (-90 to 90):");var h=this.getInput("FIELD_MoveHead_Yaw").connection;h.connect(o),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves Misty's head a specified amount of degrees with roll, pitch, and/or yaw"),this.setHelpUrl("MoveHead")}};Tt.Blocks.DriveTime2={init:function(){var r=this.workspace.newBlock("math_number");r.setShadow(!0),r.initSvg(),r.render();var e=r.outputConnection,t=this.workspace.newBlock("math_number");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection,s=this.workspace.newBlock("math_number");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection;this.setColour("260"),this.appendValueInput("FIELD_DriveTime_Velocity").setCheck("Number").appendField("Move at a speed of (-100 to 100)");var l=this.getInput("FIELD_DriveTime_Velocity").connection;l.connect(e),this.appendValueInput("FIELD_DriveTime_Angular").setCheck("Number").appendField("with angular velocity of (-100 CW to 100 CCW)");var u=this.getInput("FIELD_DriveTime_Angular").connection;u.connect(i),this.appendValueInput("FIELD_DriveTime_TimeMs").setCheck("Number").appendField("for a duration of (ms)");var h=this.getInput("FIELD_DriveTime_TimeMs").connection;h.connect(o),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Drives Misty forward (positive speed) or backward (negative speed) with possible turning using angular velocity (0 for straight) for the specified duration (1000 ms = 1 second)"),this.setHelpUrl("DriveTime")}};Tt.Blocks.Turn={init:function(){this.setColour("260"),this.appendDummyInput().appendField("Turn").appendField(new Tt.FieldDropdown([["Left","L"],["Right","R"]]),"FIELD_Turn_Direction").appendField("for time of").appendField(new Tt.FieldNumber(4500),"FIELD_Turn_Duration").appendField("milliseconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turns Misty in the specified direction (1000ms = 1 second and 4500ms is approximately 90 degrees)"),this.setHelpUrl("Turn")}};Tt.Blocks.Turn2={init:function(){var r=this.workspace.newBlock("math_number");r.setShadow(!0),r.initSvg(),r.render();var e=r.outputConnection;this.setColour("260"),this.appendDummyInput().appendField("Turn").appendField(new Tt.FieldDropdown([["Left","L"],["Right","R"]]),"FIELD_Turn_Direction"),this.appendValueInput("FIELD_Turn_Duration").setCheck("Number").appendField("for time of");var t=this.getInput("FIELD_Turn_Duration").connection;t.connect(e),this.appendDummyInput().appendField("milliseconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turns Misty in the specified direction (1000ms = 1 second and 4500ms is approximately 90 degrees)"),this.setHelpUrl("Turn")}};Tt.Blocks.Test={init:function(){this.appendDummyInput().appendField("Test"),this.setColour(230),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}};Tt.Blocks.Speak={init:function(){this.setColour("260"),this.appendValueInput("FIELD_Speak_Text").setCheck("String").appendField("Speak: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Speak given input text")}};Tt.Blocks.SpeakDefault={init:function(){this.setColour("260"),this.appendDummyInput().appendField("Speak: ").appendField(new Tt.FieldDropdown([["Hi","Hi"],["Hello","Hello"],["How are you today?","How are you today?"],["Goodbye","Goodbye"]]),"FIELD_SpeakDefault_Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Speak given selected default text")}};Tt.Blocks.TurnOnFlashlight={init:function(){this.setColour("260"),this.appendDummyInput().appendField("Turn on flashlight "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turn on flashlight")}};Tt.Blocks.TurnOffFlashlight={init:function(){this.setColour("260"),this.appendDummyInput().appendField("Turn off flashlight "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turn off flashlight")}};Tt.Blocks.WaitForSeconds={init:function(){this.appendDummyInput().appendField("wait for"),this.appendDummyInput().setAlign(Tt.ALIGN_CENTRE).appendField(new Tt.FieldNumber(0,-1/0,1/0,.1),"NumSeconds"),this.appendDummyInput().appendField("Seconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(260),this.setTooltip(""),this.setHelpUrl("")}};Tt.Blocks.PlayAudio={init:function(){this.setColour("260"),this.appendValueInput("FIELD_PlayAudio_Filename").setCheck("Audio").appendField("Play audio: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};Tt.Blocks.DisplayText={init:function(){this.setColour("260"),this.appendDummyInput().appendField("Display Text: ").appendField(new Tt.FieldTextInput("default"),"FIELD_DisplayText_Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};Tt.Blocks.eyes_acceptance={init:function(){this.appendDummyInput().appendField("acceptance"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'acceptance'")}};Tt.Blocks.eyes_admiration={init:function(){this.appendDummyInput().appendField("admiration"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'admiration'")}};Tt.Blocks.eyes_amazement={init:function(){this.appendDummyInput().appendField("amazement"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'amazement'")}};Tt.Blocks.eyes_anger={init:function(){this.appendDummyInput().appendField("anger"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'anger'")}};Tt.Blocks.eyes_annoyed={init:function(){this.appendDummyInput().appendField("annoyed"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'annoyed'")}};Tt.Blocks.eyes_anticipation={init:function(){this.appendDummyInput().appendField("anticipation"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'anticipation'")}};Tt.Blocks.eyes_apprehension={init:function(){this.appendDummyInput().appendField("apprehension"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'apprehension'")}};Tt.Blocks.eyes_boredom={init:function(){this.appendDummyInput().appendField("boredom"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'boredom'")}};Tt.Blocks.eyes_default={init:function(){this.appendDummyInput().appendField("default"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'default'")}};Tt.Blocks.eyes_disgust={init:function(){this.appendDummyInput().appendField("disgust"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'disgust'")}};Tt.Blocks.eyes_distraction={init:function(){this.appendDummyInput().appendField("distraction"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'distraction'")}};Tt.Blocks.eyes_ecstasy_frame_1={init:function(){this.appendDummyInput().appendField("ecstasy 1"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'ecstasy 1'")}};Tt.Blocks.eyes_ecstasy_frame_2={init:function(){this.appendDummyInput().appendField("ecstasy 2"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'ecstasy 2'")}};Tt.Blocks.eyes_fear={init:function(){this.appendDummyInput().appendField("fear"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'fear'")}};Tt.Blocks.eyes_grief={init:function(){this.appendDummyInput().appendField("grief"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'grief'")}};Tt.Blocks.eyes_interest={init:function(){this.appendDummyInput().appendField("interest"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'interest'")}};Tt.Blocks.eyes_joy={init:function(){this.appendDummyInput().appendField("joy"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'joy'")}};Tt.Blocks.eyes_loathing={init:function(){this.appendDummyInput().appendField("loathing"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'loathing'")}};Tt.Blocks.eyes_pensiveness={init:function(){this.appendDummyInput().appendField("pensiveness"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'pensiveness'")}};Tt.Blocks.eyes_rage={init:function(){this.appendDummyInput().appendField("rage eyes"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'rage eyes'")}};Tt.Blocks.eyes_sad={init:function(){this.appendDummyInput().appendField("sad"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'sad'")}};Tt.Blocks.eyes_serenity={init:function(){this.appendDummyInput().appendField("serenity"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'serenity'")}};Tt.Blocks.eyes_surprise={init:function(){this.appendDummyInput().appendField("surprise"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'surprise'")}};Tt.Blocks.eyes_terror={init:function(){this.appendDummyInput().appendField("terror"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'terror'")}};Tt.Blocks.eyes_trust={init:function(){this.appendDummyInput().appendField("trust"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'trust'")}};Tt.Blocks.eyes_vigilance={init:function(){this.appendDummyInput().appendField("vigilance"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'vigilance'")}};Tt.Blocks.e_Sleeping={init:function(){this.appendDummyInput().appendField("sleeping"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'sleeping'")}};Tt.Blocks.e_SleepingZZZ={init:function(){this.appendDummyInput().appendField("sleeping ZZZ"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'sleeping ZZZ'")}};Tt.Blocks.e_Contempt={init:function(){this.appendDummyInput().appendField("contempt"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'contempt'")}};Tt.Blocks.e_ContentLeft={init:function(){this.appendDummyInput().appendField("content (left)"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'content (left)'")}};Tt.Blocks.e_ContentRight={init:function(){this.appendDummyInput().appendField("content (right)"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'content (right)'")}};Tt.Blocks.e_Disoriented={init:function(){this.appendDummyInput().appendField("disoriented"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'disoriented'")}};Tt.Blocks.e_EcstacyHilarious={init:function(){this.appendDummyInput().appendField("ecstacy hilarious"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'ecstacy hilarious'")}};Tt.Blocks.e_EcstacyStarryEyed={init:function(){this.appendDummyInput().appendField("ecstacy starry eyed"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'ecstacy starry eyed'")}};Tt.Blocks.e_JoyGoofy={init:function(){this.appendDummyInput().appendField("joy goofy"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'joy goofy'")}};Tt.Blocks.e_JoyGoofy2={init:function(){this.appendDummyInput().appendField("joy goofy 2"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'joy goofy 2'")}};Tt.Blocks.e_JoyGoofy3={init:function(){this.appendDummyInput().appendField("joy goofy 3"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'joy goofy 3'")}};Tt.Blocks.e_Love={init:function(){this.appendDummyInput().appendField("love"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'love'")}};Tt.Blocks.e_Rage={init:function(){this.appendDummyInput().appendField("rage"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'rage'")}};Tt.Blocks.e_Rage2={init:function(){this.appendDummyInput().appendField("rage 2"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'rage 2'")}};Tt.Blocks.e_Rage3={init:function(){this.appendDummyInput().appendField("rage 3"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'rage 3'")}};Tt.Blocks.e_Rage4={init:function(){this.appendDummyInput().appendField("rage 4"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'rage 4'")}};Tt.Blocks.e_RemorseShame={init:function(){this.appendDummyInput().appendField("remorse shame"),this.setOutput(!0,"Face"),this.setColour(240),this.setTooltip("Represents the facial expression 'remorse shame'")}};Tt.Blocks.s_Acceptance={init:function(){this.appendDummyInput().appendField("acceptance"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'acceptance'")}};Tt.Blocks.s_Amazement={init:function(){this.appendDummyInput().appendField("amazement"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'amazement'")}};Tt.Blocks.s_Amazement2={init:function(){this.appendDummyInput().appendField("amazement 2"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'amazement 2'")}};Tt.Blocks.s_Anger={init:function(){this.appendDummyInput().appendField("anger"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'anger'")}};Tt.Blocks.s_Anger2={init:function(){this.appendDummyInput().appendField("anger 2"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'anger 2'")}};Tt.Blocks.s_Anger3={init:function(){this.appendDummyInput().appendField("anger 3"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'anger 3'")}};Tt.Blocks.s_Anger4={init:function(){this.appendDummyInput().appendField("anger 4"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'anger 4'")}};Tt.Blocks.s_Annoyance={init:function(){this.appendDummyInput().appendField("annoyance"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'annoyance'")}};Tt.Blocks.s_Annoyance2={init:function(){this.appendDummyInput().appendField("annoyance 2"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'annoyance 2'")}};Tt.Blocks.s_Annoyance3={init:function(){this.appendDummyInput().appendField("annoyance 3"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'annoyance 3'")}};Tt.Blocks.s_Annoyance4={init:function(){this.appendDummyInput().appendField("annoyance 4"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'annoyance 4'")}};Tt.Blocks.s_Awe={init:function(){this.appendDummyInput().appendField("awe"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'awe'")}};Tt.Blocks.s_Awe2={init:function(){this.appendDummyInput().appendField("awe 2"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'awe 2'")}};Tt.Blocks.s_Awe3={init:function(){this.appendDummyInput().appendField("awe 3"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'awe 3'")}};Tt.Blocks.s_Boredom={init:function(){this.appendDummyInput().appendField("boredom"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'boredom'")}};Tt.Blocks.s_Disapproval={init:function(){this.appendDummyInput().appendField("disapproval"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'disapproval'")}};Tt.Blocks.s_Disgust={init:function(){this.appendDummyInput().appendField("disgust"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'disgust'")}};Tt.Blocks.s_Disgust2={init:function(){this.appendDummyInput().appendField("disgust 2"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'disgust 2'")}};Tt.Blocks.s_Disgust3={init:function(){this.appendDummyInput().appendField("disgust 3"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'disgust 3'")}};Tt.Blocks.s_DisorientedConfused={init:function(){this.appendDummyInput().appendField("disoriented confused"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'disoriented confused'")}};Tt.Blocks.s_DisorientedConfused2={init:function(){this.appendDummyInput().appendField("disoriented confused 2"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'disoriented confused 2'")}};Tt.Blocks.s_DisorientedConfused3={init:function(){this.appendDummyInput().appendField("disoriented confused 3"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'disoriented confused 3'")}};Tt.Blocks.s_DisorientedConfused4={init:function(){this.appendDummyInput().appendField("disoriented confused 4"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'disoriented confused 4'")}};Tt.Blocks.s_DisorientedConfused5={init:function(){this.appendDummyInput().appendField("disoriented confused 5"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'disoriented confused 5'")}};Tt.Blocks.s_DisorientedConfused6={init:function(){this.appendDummyInput().appendField("disoriented confused 6"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'disoriented confused 6'")}};Tt.Blocks.s_Distraction={init:function(){this.appendDummyInput().appendField("distraction"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'distraction'")}};Tt.Blocks.s_Ecstacy={init:function(){this.appendDummyInput().appendField("ecstacy"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'ecstacy'")}};Tt.Blocks.s_Ecstacy2={init:function(){this.appendDummyInput().appendField("ecstacy 2"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'ecstacy 2'")}};Tt.Blocks.s_Fear={init:function(){this.appendDummyInput().appendField("fear"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'fear'")}};Tt.Blocks.s_Grief={init:function(){this.appendDummyInput().appendField("grief"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'grief'")}};Tt.Blocks.s_Grief2={init:function(){this.appendDummyInput().appendField("grief 2"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'grief 2'")}};Tt.Blocks.s_Grief3={init:function(){this.appendDummyInput().appendField("grief 3"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'grief 3'")}};Tt.Blocks.s_Grief4={init:function(){this.appendDummyInput().appendField("grief 4"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'grief 4'")}};Tt.Blocks.s_Joy={init:function(){this.appendDummyInput().appendField("joy"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'joy'")}};Tt.Blocks.s_Joy2={init:function(){this.appendDummyInput().appendField("joy 2"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'joy 2'")}};Tt.Blocks.s_Joy3={init:function(){this.appendDummyInput().appendField("joy 3"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'joy 3'")}};Tt.Blocks.s_Joy4={init:function(){this.appendDummyInput().appendField("joy 4"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'joy 4'")}};Tt.Blocks.s_Loathing={init:function(){this.appendDummyInput().appendField("loathing"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'loathing'")}};Tt.Blocks.s_Love={init:function(){this.appendDummyInput().appendField("love"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'love'")}};Tt.Blocks.s_PhraseByeBye={init:function(){this.appendDummyInput().appendField("phrase: Bye Bye"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'phrase: Bye Bye'")}};Tt.Blocks.s_PhraseEvilAhHa={init:function(){this.appendDummyInput().appendField("phrase: Evil Ah Ha"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'phrase: Evil Ah Ha'")}};Tt.Blocks.s_PhraseHello={init:function(){this.appendDummyInput().appendField("phrase: Hello"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'phrase: Hello'")}};Tt.Blocks.s_PhraseNoNoNo={init:function(){this.appendDummyInput().appendField("phrase: No No No"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'phrase: No No No'")}};Tt.Blocks.s_PhraseOopsy={init:function(){this.appendDummyInput().appendField("phrase: Oopsy"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'phrase: Oopsy'")}};Tt.Blocks.s_PhraseOwOwOw={init:function(){this.appendDummyInput().appendField("phrase: Ow Ow Ow"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'phrase: Ow Ow Ow'")}};Tt.Blocks.s_PhraseOwwww={init:function(){this.appendDummyInput().appendField("phrase: Owwww"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'phrase: Owwww'")}};Tt.Blocks.s_PhraseUhOh={init:function(){this.appendDummyInput().appendField("phrase: Uh Oh"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'phrase: Uh Oh'")}};Tt.Blocks.s_Rage={init:function(){this.appendDummyInput().appendField("rage"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'rage'")}};Tt.Blocks.s_Sadness={init:function(){this.appendDummyInput().appendField("sadness"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'sadness'")}};Tt.Blocks.s_Sadness2={init:function(){this.appendDummyInput().appendField("sadness 2"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'sadness 2'")}};Tt.Blocks.s_Sadness3={init:function(){this.appendDummyInput().appendField("sadness 3"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'sadness 3'")}};Tt.Blocks.s_Sadness4={init:function(){this.appendDummyInput().appendField("sadness 4"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'sadness 4'")}};Tt.Blocks.s_Sadness5={init:function(){this.appendDummyInput().appendField("sadness 5"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'sadness 5'")}};Tt.Blocks.s_Sadness6={init:function(){this.appendDummyInput().appendField("sadness 6"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'sadness 6'")}};Tt.Blocks.s_Sadness7={init:function(){this.appendDummyInput().appendField("sadness 7"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'sadness 7'")}};Tt.Blocks.s_Sleepy={init:function(){this.appendDummyInput().appendField("sleepy"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'sleepy'")}};Tt.Blocks.s_Sleepy2={init:function(){this.appendDummyInput().appendField("sleepy 2"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'sleepy 2'")}};Tt.Blocks.s_Sleepy3={init:function(){this.appendDummyInput().appendField("sleepy 3"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'sleepy 3'")}};Tt.Blocks.s_Sleepy4={init:function(){this.appendDummyInput().appendField("sleepy 4"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'sleepy 4'")}};Tt.Blocks.s_SleepySnore={init:function(){this.appendDummyInput().appendField("sleepy snore"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'sleepy snore'")}};Tt.Blocks.s_SystemCameraShutter={init:function(){this.appendDummyInput().appendField("system camera shutter"),this.setOutput(!0,"Audio"),this.setColour(240),this.setTooltip("Represents the audio 'system camera shutter'")}};const IK=Tt.common.createBlockDefinitionsFromJsonArray([AK]);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KA=Object.create(null);KA.add_text=function(r,e){const t=e.valueToCode(r,"TEXT",_1.Order.NONE)||"''",i=e.valueToCode(r,"COLOR",_1.Order.ATOMIC)||"'#ffffff'";return`${e.provideFunction_("addText",`function ${e.FUNCTION_NAME_PLACEHOLDER_}(text, color) {

  // Add text to the output area.
  const outputDiv = document.getElementById('output');
  const textEl = document.createElement('p');
  textEl.innerText = text;
  textEl.style.color = color;
  outputDiv.appendChild(textEl);
}`)}(${t}, ${i});
`};KA.Start=function(r){return""};var RK={BASE_URL:"/gpu-programming/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const E3=r=>{let e;const t=new Set,i=(m,_)=>{const v=typeof m=="function"?m(e):m;if(!Object.is(v,e)){const E=e;e=_??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(w=>w(e,E))}},s=()=>e,h={setState:i,getState:s,getInitialState:()=>p,subscribe:m=>(t.add(m),()=>t.delete(m)),destroy:()=>{(RK?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},p=e=r(i,s,h);return h},kK=r=>r?E3(r):E3;var rW={exports:{}},iW={},sW={exports:{}},oW={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v1=de;function OK(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var LK=typeof Object.is=="function"?Object.is:OK,NK=v1.useState,DK=v1.useEffect,BK=v1.useLayoutEffect,PK=v1.useDebugValue;function FK(r,e){var t=e(),i=NK({inst:{value:t,getSnapshot:e}}),s=i[0].inst,o=i[1];return BK(function(){s.value=t,s.getSnapshot=e,ck(s)&&o({inst:s})},[r,t,e]),DK(function(){return ck(s)&&o({inst:s}),r(function(){ck(s)&&o({inst:s})})},[r]),PK(t),t}function ck(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!LK(r,t)}catch{return!0}}function UK(r,e){return e()}var zK=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?UK:FK;oW.useSyncExternalStore=v1.useSyncExternalStore!==void 0?v1.useSyncExternalStore:zK;sW.exports=oW;var HK=sW.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JA=de,GK=HK;function WK(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var VK=typeof Object.is=="function"?Object.is:WK,jK=GK.useSyncExternalStore,XK=JA.useRef,YK=JA.useEffect,KK=JA.useMemo,JK=JA.useDebugValue;iW.useSyncExternalStoreWithSelector=function(r,e,t,i,s){var o=XK(null);if(o.current===null){var l={hasValue:!1,value:null};o.current=l}else l=o.current;o=KK(function(){function h(E){if(!p){if(p=!0,m=E,E=i(E),s!==void 0&&l.hasValue){var w=l.value;if(s(w,E))return _=w}return _=E}if(w=_,VK(m,E))return w;var x=i(E);return s!==void 0&&s(w,x)?w:(m=E,_=x)}var p=!1,m,_,v=t===void 0?null:t;return[function(){return h(e())},v===null?void 0:function(){return h(v())}]},[e,t,i,s]);var u=jK(r,o[0],o[1]);return YK(function(){l.hasValue=!0,l.value=u},[u]),JK(u),u};rW.exports=iW;var QK=rW.exports;const qK=U1(QK);var aW={BASE_URL:"/gpu-programming/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:ZK}=vr,{useSyncExternalStoreWithSelector:eJ}=qK;let $3=!1;const tJ=r=>r;function nJ(r,e=tJ,t){(aW?"production":void 0)!=="production"&&t&&!$3&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),$3=!0);const i=eJ(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return ZK(i),i}const S3=r=>{(aW?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof r=="function"?kK(r):r,t=(i,s)=>nJ(e,i,s);return Object.assign(t,e),t},rJ=r=>r?S3(r):S3;var FD={},QA={};(function(r){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",t=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",i="["+e+"]["+t+"]*",s=new RegExp("^"+i+"$"),o=function(u,h){const p=[];let m=h.exec(u);for(;m;){const _=[];_.startIndex=h.lastIndex-m[0].length;const v=m.length;for(let E=0;E<v;E++)_.push(m[E]);p.push(_),m=h.exec(u)}return p},l=function(u){const h=s.exec(u);return!(h===null||typeof h>"u")};r.isExist=function(u){return typeof u<"u"},r.isEmptyObject=function(u){return Object.keys(u).length===0},r.merge=function(u,h,p){if(h){const m=Object.keys(h),_=m.length;for(let v=0;v<_;v++)p==="strict"?u[m[v]]=[h[m[v]]]:u[m[v]]=h[m[v]]}},r.getValue=function(u){return r.isExist(u)?u:""},r.isName=l,r.getAllMatches=o,r.nameRegexp=i})(QA);const UD=QA,iJ={allowBooleanAttributes:!1,unpairedTags:[]};FD.validate=function(r,e){e=Object.assign({},iJ,e);const t=[];let i=!1,s=!1;r[0]==="\uFEFF"&&(r=r.substr(1));for(let o=0;o<r.length;o++)if(r[o]==="<"&&r[o+1]==="?"){if(o+=2,o=x3(r,o),o.err)return o}else if(r[o]==="<"){let l=o;if(o++,r[o]==="!"){o=C3(r,o);continue}else{let u=!1;r[o]==="/"&&(u=!0,o++);let h="";for(;o<r.length&&r[o]!==">"&&r[o]!==" "&&r[o]!=="	"&&r[o]!==`
`&&r[o]!=="\r";o++)h+=r[o];if(h=h.trim(),h[h.length-1]==="/"&&(h=h.substring(0,h.length-1),o--),!dJ(h)){let _;return h.trim().length===0?_="Invalid space after '<'.":_="Tag '"+h+"' is an invalid name.",sc("InvalidTag",_,xp(r,o))}const p=aJ(r,o);if(p===!1)return sc("InvalidAttr","Attributes for '"+h+"' have open quote.",xp(r,o));let m=p.value;if(o=p.index,m[m.length-1]==="/"){const _=o-m.length;m=m.substring(0,m.length-1);const v=M3(m,e);if(v===!0)i=!0;else return sc(v.err.code,v.err.msg,xp(r,_+v.err.line))}else if(u)if(p.tagClosed){if(m.trim().length>0)return sc("InvalidTag","Closing tag '"+h+"' can't have attributes or invalid starting.",xp(r,l));{const _=t.pop();if(h!==_.tagName){let v=xp(r,_.tagStartPos);return sc("InvalidTag","Expected closing tag '"+_.tagName+"' (opened in line "+v.line+", col "+v.col+") instead of closing tag '"+h+"'.",xp(r,l))}t.length==0&&(s=!0)}}else return sc("InvalidTag","Closing tag '"+h+"' doesn't have proper closing.",xp(r,o));else{const _=M3(m,e);if(_!==!0)return sc(_.err.code,_.err.msg,xp(r,o-m.length+_.err.line));if(s===!0)return sc("InvalidXml","Multiple possible root nodes found.",xp(r,o));e.unpairedTags.indexOf(h)!==-1||t.push({tagName:h,tagStartPos:l}),i=!0}for(o++;o<r.length;o++)if(r[o]==="<")if(r[o+1]==="!"){o++,o=C3(r,o);continue}else if(r[o+1]==="?"){if(o=x3(r,++o),o.err)return o}else break;else if(r[o]==="&"){const _=cJ(r,o);if(_==-1)return sc("InvalidChar","char '&' is not expected.",xp(r,o));o=_}else if(s===!0&&!w3(r[o]))return sc("InvalidXml","Extra text at the end",xp(r,o));r[o]==="<"&&o--}}else{if(w3(r[o]))continue;return sc("InvalidChar","char '"+r[o]+"' is not expected.",xp(r,o))}if(i){if(t.length==1)return sc("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",xp(r,t[0].tagStartPos));if(t.length>0)return sc("InvalidXml","Invalid '"+JSON.stringify(t.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return sc("InvalidXml","Start tag expected.",1);return!0};function w3(r){return r===" "||r==="	"||r===`
`||r==="\r"}function x3(r,e){const t=e;for(;e<r.length;e++)if(r[e]=="?"||r[e]==" "){const i=r.substr(t,e-t);if(e>5&&i==="xml")return sc("InvalidXml","XML declaration allowed only at the start of the document.",xp(r,e));if(r[e]=="?"&&r[e+1]==">"){e++;break}else continue}return e}function C3(r,e){if(r.length>e+5&&r[e+1]==="-"&&r[e+2]==="-"){for(e+=3;e<r.length;e++)if(r[e]==="-"&&r[e+1]==="-"&&r[e+2]===">"){e+=2;break}}else if(r.length>e+8&&r[e+1]==="D"&&r[e+2]==="O"&&r[e+3]==="C"&&r[e+4]==="T"&&r[e+5]==="Y"&&r[e+6]==="P"&&r[e+7]==="E"){let t=1;for(e+=8;e<r.length;e++)if(r[e]==="<")t++;else if(r[e]===">"&&(t--,t===0))break}else if(r.length>e+9&&r[e+1]==="["&&r[e+2]==="C"&&r[e+3]==="D"&&r[e+4]==="A"&&r[e+5]==="T"&&r[e+6]==="A"&&r[e+7]==="["){for(e+=8;e<r.length;e++)if(r[e]==="]"&&r[e+1]==="]"&&r[e+2]===">"){e+=2;break}}return e}const sJ='"',oJ="'";function aJ(r,e){let t="",i="",s=!1;for(;e<r.length;e++){if(r[e]===sJ||r[e]===oJ)i===""?i=r[e]:i!==r[e]||(i="");else if(r[e]===">"&&i===""){s=!0;break}t+=r[e]}return i!==""?!1:{value:t,index:e,tagClosed:s}}const lJ=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function M3(r,e){const t=UD.getAllMatches(r,lJ),i={};for(let s=0;s<t.length;s++){if(t[s][1].length===0)return sc("InvalidAttr","Attribute '"+t[s][2]+"' has no space in starting.",qE(t[s]));if(t[s][3]!==void 0&&t[s][4]===void 0)return sc("InvalidAttr","Attribute '"+t[s][2]+"' is without value.",qE(t[s]));if(t[s][3]===void 0&&!e.allowBooleanAttributes)return sc("InvalidAttr","boolean attribute '"+t[s][2]+"' is not allowed.",qE(t[s]));const o=t[s][2];if(!hJ(o))return sc("InvalidAttr","Attribute '"+o+"' is an invalid name.",qE(t[s]));if(!i.hasOwnProperty(o))i[o]=1;else return sc("InvalidAttr","Attribute '"+o+"' is repeated.",qE(t[s]))}return!0}function uJ(r,e){let t=/\d/;for(r[e]==="x"&&(e++,t=/[\da-fA-F]/);e<r.length;e++){if(r[e]===";")return e;if(!r[e].match(t))break}return-1}function cJ(r,e){if(e++,r[e]===";")return-1;if(r[e]==="#")return e++,uJ(r,e);let t=0;for(;e<r.length;e++,t++)if(!(r[e].match(/\w/)&&t<20)){if(r[e]===";")break;return-1}return e}function sc(r,e,t){return{err:{code:r,msg:e,line:t.line||t,col:t.col}}}function hJ(r){return UD.isName(r)}function dJ(r){return UD.isName(r)}function xp(r,e){const t=r.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function qE(r){return r.startIndex+r[1].length}var zD={};const lW={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(r,e){return e},attributeValueProcessor:function(r,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(r,e,t){return r}},pJ=function(r){return Object.assign({},lW,r)};zD.buildOptions=pJ;zD.defaultOptions=lW;class fJ{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}var mJ=fJ;const gJ=QA;function _J(r,e){const t={};if(r[e+3]==="O"&&r[e+4]==="C"&&r[e+5]==="T"&&r[e+6]==="Y"&&r[e+7]==="P"&&r[e+8]==="E"){e=e+9;let i=1,s=!1,o=!1,l="";for(;e<r.length;e++)if(r[e]==="<"&&!o){if(s&&bJ(r,e))e+=7,[entityName,val,e]=vJ(r,e+1),val.indexOf("&")===-1&&(t[SJ(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(s&&TJ(r,e))e+=8;else if(s&&EJ(r,e))e+=8;else if(s&&$J(r,e))e+=9;else if(yJ)o=!0;else throw new Error("Invalid DOCTYPE");i++,l=""}else if(r[e]===">"){if(o?r[e-1]==="-"&&r[e-2]==="-"&&(o=!1,i--):i--,i===0)break}else r[e]==="["?s=!0:l+=r[e];if(i!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:e}}function vJ(r,e){let t="";for(;e<r.length&&r[e]!=="'"&&r[e]!=='"';e++)t+=r[e];if(t=t.trim(),t.indexOf(" ")!==-1)throw new Error("External entites are not supported");const i=r[e++];let s="";for(;e<r.length&&r[e]!==i;e++)s+=r[e];return[t,s,e]}function yJ(r,e){return r[e+1]==="!"&&r[e+2]==="-"&&r[e+3]==="-"}function bJ(r,e){return r[e+1]==="!"&&r[e+2]==="E"&&r[e+3]==="N"&&r[e+4]==="T"&&r[e+5]==="I"&&r[e+6]==="T"&&r[e+7]==="Y"}function TJ(r,e){return r[e+1]==="!"&&r[e+2]==="E"&&r[e+3]==="L"&&r[e+4]==="E"&&r[e+5]==="M"&&r[e+6]==="E"&&r[e+7]==="N"&&r[e+8]==="T"}function EJ(r,e){return r[e+1]==="!"&&r[e+2]==="A"&&r[e+3]==="T"&&r[e+4]==="T"&&r[e+5]==="L"&&r[e+6]==="I"&&r[e+7]==="S"&&r[e+8]==="T"}function $J(r,e){return r[e+1]==="!"&&r[e+2]==="N"&&r[e+3]==="O"&&r[e+4]==="T"&&r[e+5]==="A"&&r[e+6]==="T"&&r[e+7]==="I"&&r[e+8]==="O"&&r[e+9]==="N"}function SJ(r){if(gJ.isName(r))return r;throw new Error(`Invalid entity name ${r}`)}var wJ=_J;const xJ=/^[-+]?0x[a-fA-F0-9]+$/,CJ=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const MJ={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function AJ(r,e={}){if(e=Object.assign({},MJ,e),!r||typeof r!="string")return r;let t=r.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return r;if(e.hex&&xJ.test(t))return Number.parseInt(t,16);{const i=CJ.exec(t);if(i){const s=i[1],o=i[2];let l=IJ(i[3]);const u=i[4]||i[6];if(!e.leadingZeros&&o.length>0&&s&&t[2]!==".")return r;if(!e.leadingZeros&&o.length>0&&!s&&t[1]!==".")return r;{const h=Number(t),p=""+h;return p.search(/[eE]/)!==-1||u?e.eNotation?h:r:t.indexOf(".")!==-1?p==="0"&&l===""||p===l||s&&p==="-"+l?h:r:o?l===p||s+l===p?h:r:t===p||t===s+p?h:r}}else return r}}function IJ(r){return r&&r.indexOf(".")!==-1&&(r=r.replace(/0+$/,""),r==="."?r="0":r[0]==="."?r="0"+r:r[r.length-1]==="."&&(r=r.substr(0,r.length-1))),r}var RJ=AJ;const uW=QA,ZE=mJ,kJ=wJ,OJ=RJ;let LJ=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,i)=>String.fromCharCode(Number.parseInt(i,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,i)=>String.fromCharCode(Number.parseInt(i,16))}},this.addExternalEntities=NJ,this.parseXml=UJ,this.parseTextData=DJ,this.resolveNameSpace=BJ,this.buildAttributesMap=FJ,this.isItStopNode=WJ,this.replaceEntitiesValue=HJ,this.readStopNodeData=jJ,this.saveTextToParentTag=GJ,this.addChild=zJ}};function NJ(r){const e=Object.keys(r);for(let t=0;t<e.length;t++){const i=e[t];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:r[i]}}}function DJ(r,e,t,i,s,o,l){if(r!==void 0&&(this.options.trimValues&&!i&&(r=r.trim()),r.length>0)){l||(r=this.replaceEntitiesValue(r));const u=this.options.tagValueProcessor(e,r,t,s,o);return u==null?r:typeof u!=typeof r||u!==r?u:this.options.trimValues?gN(r,this.options.parseTagValue,this.options.numberParseOptions):r.trim()===r?gN(r,this.options.parseTagValue,this.options.numberParseOptions):r}}function BJ(r){if(this.options.removeNSPrefix){const e=r.split(":"),t=r.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(r=t+e[1])}return r}const PJ=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function FJ(r,e,t){if(!this.options.ignoreAttributes&&typeof r=="string"){const i=uW.getAllMatches(r,PJ),s=i.length,o={};for(let l=0;l<s;l++){const u=this.resolveNameSpace(i[l][1]);let h=i[l][4],p=this.options.attributeNamePrefix+u;if(u.length)if(this.options.transformAttributeName&&(p=this.options.transformAttributeName(p)),p==="__proto__"&&(p="#__proto__"),h!==void 0){this.options.trimValues&&(h=h.trim()),h=this.replaceEntitiesValue(h);const m=this.options.attributeValueProcessor(u,h,e);m==null?o[p]=h:typeof m!=typeof h||m!==h?o[p]=m:o[p]=gN(h,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[p]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){const l={};return l[this.options.attributesGroupName]=o,l}return o}}const UJ=function(r){r=r.replace(/\r\n?/g,`
`);const e=new ZE("!xml");let t=e,i="",s="";for(let o=0;o<r.length;o++)if(r[o]==="<")if(r[o+1]==="/"){const u=xy(r,">",o,"Closing Tag is not closed.");let h=r.substring(o+2,u).trim();if(this.options.removeNSPrefix){const _=h.indexOf(":");_!==-1&&(h=h.substr(_+1))}this.options.transformTagName&&(h=this.options.transformTagName(h)),t&&(i=this.saveTextToParentTag(i,t,s));const p=s.substring(s.lastIndexOf(".")+1);if(h&&this.options.unpairedTags.indexOf(h)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${h}>`);let m=0;p&&this.options.unpairedTags.indexOf(p)!==-1?(m=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):m=s.lastIndexOf("."),s=s.substring(0,m),t=this.tagsNodeStack.pop(),i="",o=u}else if(r[o+1]==="?"){let u=mN(r,o,!1,"?>");if(!u)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,t,s),!(this.options.ignoreDeclaration&&u.tagName==="?xml"||this.options.ignorePiTags)){const h=new ZE(u.tagName);h.add(this.options.textNodeName,""),u.tagName!==u.tagExp&&u.attrExpPresent&&(h[":@"]=this.buildAttributesMap(u.tagExp,s,u.tagName)),this.addChild(t,h,s)}o=u.closeIndex+1}else if(r.substr(o+1,3)==="!--"){const u=xy(r,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){const h=r.substring(o+4,u-2);i=this.saveTextToParentTag(i,t,s),t.add(this.options.commentPropName,[{[this.options.textNodeName]:h}])}o=u}else if(r.substr(o+1,2)==="!D"){const u=kJ(r,o);this.docTypeEntities=u.entities,o=u.i}else if(r.substr(o+1,2)==="!["){const u=xy(r,"]]>",o,"CDATA is not closed.")-2,h=r.substring(o+9,u);i=this.saveTextToParentTag(i,t,s);let p=this.parseTextData(h,t.tagname,s,!0,!1,!0,!0);p==null&&(p=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:h}]):t.add(this.options.textNodeName,p),o=u+2}else{let u=mN(r,o,this.options.removeNSPrefix),h=u.tagName;const p=u.rawTagName;let m=u.tagExp,_=u.attrExpPresent,v=u.closeIndex;this.options.transformTagName&&(h=this.options.transformTagName(h)),t&&i&&t.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,t,s,!1));const E=t;if(E&&this.options.unpairedTags.indexOf(E.tagname)!==-1&&(t=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),h!==e.tagname&&(s+=s?"."+h:h),this.isItStopNode(this.options.stopNodes,s,h)){let w="";if(m.length>0&&m.lastIndexOf("/")===m.length-1)o=u.closeIndex;else if(this.options.unpairedTags.indexOf(h)!==-1)o=u.closeIndex;else{const A=this.readStopNodeData(r,p,v+1);if(!A)throw new Error(`Unexpected end of ${p}`);o=A.i,w=A.tagContent}const x=new ZE(h);h!==m&&_&&(x[":@"]=this.buildAttributesMap(m,s,h)),w&&(w=this.parseTextData(w,h,s,!0,_,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),x.add(this.options.textNodeName,w),this.addChild(t,x,s)}else{if(m.length>0&&m.lastIndexOf("/")===m.length-1){h[h.length-1]==="/"?(h=h.substr(0,h.length-1),s=s.substr(0,s.length-1),m=h):m=m.substr(0,m.length-1),this.options.transformTagName&&(h=this.options.transformTagName(h));const w=new ZE(h);h!==m&&_&&(w[":@"]=this.buildAttributesMap(m,s,h)),this.addChild(t,w,s),s=s.substr(0,s.lastIndexOf("."))}else{const w=new ZE(h);this.tagsNodeStack.push(t),h!==m&&_&&(w[":@"]=this.buildAttributesMap(m,s,h)),this.addChild(t,w,s),t=w}i="",o=v}}else i+=r[o];return e.child};function zJ(r,e,t){const i=this.options.updateTag(e.tagname,t,e[":@"]);i===!1||(typeof i=="string"&&(e.tagname=i),r.addChild(e))}const HJ=function(r){if(this.options.processEntities){for(let e in this.docTypeEntities){const t=this.docTypeEntities[e];r=r.replace(t.regx,t.val)}for(let e in this.lastEntities){const t=this.lastEntities[e];r=r.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const t=this.htmlEntities[e];r=r.replace(t.regex,t.val)}r=r.replace(this.ampEntity.regex,this.ampEntity.val)}return r};function GJ(r,e,t,i){return r&&(i===void 0&&(i=Object.keys(e.child).length===0),r=this.parseTextData(r,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,i),r!==void 0&&r!==""&&e.add(this.options.textNodeName,r),r=""),r}function WJ(r,e,t){const i="*."+t;for(const s in r){const o=r[s];if(i===o||e===o)return!0}return!1}function VJ(r,e,t=">"){let i,s="";for(let o=e;o<r.length;o++){let l=r[o];if(i)l===i&&(i="");else if(l==='"'||l==="'")i=l;else if(l===t[0])if(t[1]){if(r[o+1]===t[1])return{data:s,index:o}}else return{data:s,index:o};else l==="	"&&(l=" ");s+=l}}function xy(r,e,t,i){const s=r.indexOf(e,t);if(s===-1)throw new Error(i);return s+e.length-1}function mN(r,e,t,i=">"){const s=VJ(r,e+1,i);if(!s)return;let o=s.data;const l=s.index,u=o.search(/\s/);let h=o,p=!0;u!==-1&&(h=o.substring(0,u),o=o.substring(u+1).trimStart());const m=h;if(t){const _=h.indexOf(":");_!==-1&&(h=h.substr(_+1),p=h!==s.data.substr(_+1))}return{tagName:h,tagExp:o,closeIndex:l,attrExpPresent:p,rawTagName:m}}function jJ(r,e,t){const i=t;let s=1;for(;t<r.length;t++)if(r[t]==="<")if(r[t+1]==="/"){const o=xy(r,">",t,`${e} is not closed`);if(r.substring(t+2,o).trim()===e&&(s--,s===0))return{tagContent:r.substring(i,t),i:o};t=o}else if(r[t+1]==="?")t=xy(r,"?>",t+1,"StopNode is not closed.");else if(r.substr(t+1,3)==="!--")t=xy(r,"-->",t+3,"StopNode is not closed.");else if(r.substr(t+1,2)==="![")t=xy(r,"]]>",t,"StopNode is not closed.")-2;else{const o=mN(r,t,">");o&&((o&&o.tagName)===e&&o.tagExp[o.tagExp.length-1]!=="/"&&s++,t=o.closeIndex)}}function gN(r,e,t){if(e&&typeof r=="string"){const i=r.trim();return i==="true"?!0:i==="false"?!1:OJ(r,t)}else return uW.isExist(r)?r:""}var XJ=LJ,cW={};function YJ(r,e){return hW(r,e)}function hW(r,e,t){let i;const s={};for(let o=0;o<r.length;o++){const l=r[o],u=KJ(l);let h="";if(t===void 0?h=u:h=t+"."+u,u===e.textNodeName)i===void 0?i=l[u]:i+=""+l[u];else{if(u===void 0)continue;if(l[u]){let p=hW(l[u],e,h);const m=QJ(p,e);l[":@"]?JJ(p,l[":@"],h,e):Object.keys(p).length===1&&p[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?p=p[e.textNodeName]:Object.keys(p).length===0&&(e.alwaysCreateTextNode?p[e.textNodeName]="":p=""),s[u]!==void 0&&s.hasOwnProperty(u)?(Array.isArray(s[u])||(s[u]=[s[u]]),s[u].push(p)):e.isArray(u,h,m)?s[u]=[p]:s[u]=p}}}return typeof i=="string"?i.length>0&&(s[e.textNodeName]=i):i!==void 0&&(s[e.textNodeName]=i),s}function KJ(r){const e=Object.keys(r);for(let t=0;t<e.length;t++){const i=e[t];if(i!==":@")return i}}function JJ(r,e,t,i){if(e){const s=Object.keys(e),o=s.length;for(let l=0;l<o;l++){const u=s[l];i.isArray(u,t+"."+u,!0,!0)?r[u]=[e[u]]:r[u]=e[u]}}}function QJ(r,e){const{textNodeName:t}=e,i=Object.keys(r).length;return!!(i===0||i===1&&(r[t]||typeof r[t]=="boolean"||r[t]===0))}cW.prettify=YJ;const{buildOptions:qJ}=zD,ZJ=XJ,{prettify:eQ}=cW,tQ=FD;let nQ=class{constructor(e){this.externalEntities={},this.options=qJ(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const o=tQ.validate(e,t);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}const i=new ZJ(this.options);i.addExternalEntities(this.externalEntities);const s=i.parseXml(e);return this.options.preserveOrder||s===void 0?s:eQ(s,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}};var rQ=nQ;const iQ=`
`;function sQ(r,e){let t="";return e.format&&e.indentBy.length>0&&(t=iQ),dW(r,e,"",t)}function dW(r,e,t,i){let s="",o=!1;for(let l=0;l<r.length;l++){const u=r[l],h=oQ(u);if(h===void 0)continue;let p="";if(t.length===0?p=h:p=`${t}.${h}`,h===e.textNodeName){let w=u[h];aQ(p,e)||(w=e.tagValueProcessor(h,w),w=pW(w,e)),o&&(s+=i),s+=w,o=!1;continue}else if(h===e.cdataPropName){o&&(s+=i),s+=`<![CDATA[${u[h][0][e.textNodeName]}]]>`,o=!1;continue}else if(h===e.commentPropName){s+=i+`<!--${u[h][0][e.textNodeName]}-->`,o=!0;continue}else if(h[0]==="?"){const w=A3(u[":@"],e),x=h==="?xml"?"":i;let A=u[h][0][e.textNodeName];A=A.length!==0?" "+A:"",s+=x+`<${h}${A}${w}?>`,o=!0;continue}let m=i;m!==""&&(m+=e.indentBy);const _=A3(u[":@"],e),v=i+`<${h}${_}`,E=dW(u[h],e,p,m);e.unpairedTags.indexOf(h)!==-1?e.suppressUnpairedNode?s+=v+">":s+=v+"/>":(!E||E.length===0)&&e.suppressEmptyNode?s+=v+"/>":E&&E.endsWith(">")?s+=v+`>${E}${i}</${h}>`:(s+=v+">",E&&i!==""&&(E.includes("/>")||E.includes("</"))?s+=i+e.indentBy+E+i:s+=E,s+=`</${h}>`),o=!0}return s}function oQ(r){const e=Object.keys(r);for(let t=0;t<e.length;t++){const i=e[t];if(r.hasOwnProperty(i)&&i!==":@")return i}}function A3(r,e){let t="";if(r&&!e.ignoreAttributes)for(let i in r){if(!r.hasOwnProperty(i))continue;let s=e.attributeValueProcessor(i,r[i]);s=pW(s,e),s===!0&&e.suppressBooleanAttributes?t+=` ${i.substr(e.attributeNamePrefix.length)}`:t+=` ${i.substr(e.attributeNamePrefix.length)}="${s}"`}return t}function aQ(r,e){r=r.substr(0,r.length-e.textNodeName.length-1);let t=r.substr(r.lastIndexOf(".")+1);for(let i in e.stopNodes)if(e.stopNodes[i]===r||e.stopNodes[i]==="*."+t)return!0;return!1}function pW(r,e){if(r&&r.length>0&&e.processEntities)for(let t=0;t<e.entities.length;t++){const i=e.entities[t];r=r.replace(i.regex,i.val)}return r}var lQ=sQ;const uQ=lQ,cQ={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(r,e){return e},attributeValueProcessor:function(r,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function bv(r){this.options=Object.assign({},cQ,r),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=pQ),this.processTextOrObjNode=hQ,this.options.format?(this.indentate=dQ,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}bv.prototype.build=function(r){return this.options.preserveOrder?uQ(r,this.options):(Array.isArray(r)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(r={[this.options.arrayNodeName]:r}),this.j2x(r,0).val)};bv.prototype.j2x=function(r,e){let t="",i="";for(let s in r)if(Object.prototype.hasOwnProperty.call(r,s))if(typeof r[s]>"u")this.isAttribute(s)&&(i+="");else if(r[s]===null)this.isAttribute(s)?i+="":s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(r[s]instanceof Date)i+=this.buildTextValNode(r[s],s,"",e);else if(typeof r[s]!="object"){const o=this.isAttribute(s);if(o)t+=this.buildAttrPairStr(o,""+r[s]);else if(s===this.options.textNodeName){let l=this.options.tagValueProcessor(s,""+r[s]);i+=this.replaceEntitiesValue(l)}else i+=this.buildTextValNode(r[s],s,"",e)}else if(Array.isArray(r[s])){const o=r[s].length;let l="";for(let u=0;u<o;u++){const h=r[s][u];typeof h>"u"||(h===null?s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar:typeof h=="object"?this.options.oneListGroup?l+=this.j2x(h,e+1).val:l+=this.processTextOrObjNode(h,s,e):l+=this.buildTextValNode(h,s,"",e))}this.options.oneListGroup&&(l=this.buildObjectNode(l,s,"",e)),i+=l}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const o=Object.keys(r[s]),l=o.length;for(let u=0;u<l;u++)t+=this.buildAttrPairStr(o[u],""+r[s][o[u]])}else i+=this.processTextOrObjNode(r[s],s,e);return{attrStr:t,val:i}};bv.prototype.buildAttrPairStr=function(r,e){return e=this.options.attributeValueProcessor(r,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+r:" "+r+'="'+e+'"'};function hQ(r,e,t){const i=this.j2x(r,t+1);return r[this.options.textNodeName]!==void 0&&Object.keys(r).length===1?this.buildTextValNode(r[this.options.textNodeName],e,i.attrStr,t):this.buildObjectNode(i.val,e,i.attrStr,t)}bv.prototype.buildObjectNode=function(r,e,t,i){if(r==="")return e[0]==="?"?this.indentate(i)+"<"+e+t+"?"+this.tagEndChar:this.indentate(i)+"<"+e+t+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",s=""),(t||t==="")&&r.indexOf("<")===-1?this.indentate(i)+"<"+e+t+o+">"+r+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(i)+`<!--${r}-->`+this.newLine:this.indentate(i)+"<"+e+t+o+this.tagEndChar+r+this.indentate(i)+s}};bv.prototype.closeTag=function(r){let e="";return this.options.unpairedTags.indexOf(r)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${r}`,e};bv.prototype.buildTextValNode=function(r,e,t,i){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${r}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(i)+`<!--${r}-->`+this.newLine;if(e[0]==="?")return this.indentate(i)+"<"+e+t+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,r);return s=this.replaceEntitiesValue(s),s===""?this.indentate(i)+"<"+e+t+this.closeTag(e)+this.tagEndChar:this.indentate(i)+"<"+e+t+">"+s+"</"+e+this.tagEndChar}};bv.prototype.replaceEntitiesValue=function(r){if(r&&r.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const t=this.options.entities[e];r=r.replace(t.regex,t.val)}return r};function dQ(r){return this.options.indentBy.repeat(r)}function pQ(r){return r.startsWith(this.options.attributeNamePrefix)&&r!==this.options.textNodeName?r.substr(this.attrPrefixLen):!1}var fQ=bv;const mQ=FD,gQ=rQ,_Q=fQ;var fW={XMLParser:gQ,XMLValidator:mQ,XMLBuilder:_Q};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const HD="162",aA=0,vQ=1,yQ=2,I3=1,R3=100,k3=204,O3=205,L3=3,bQ=0,N3="attached",TQ="detached",mW=300,wS=1e3,N$=1001,_N=1002,xS=1003,EQ=1004,$Q=1005,GD=1006,SQ=1007,WD=1008,gW=1009,wQ=1014,VD=1015,xQ=1020,jD=1023,hk=1026,D3=1027,CQ=1028,CS=2300,y1=2301,dk=2302,B3=2400,P3=2401,F3=2402,MQ=2500,AQ=0,_W=1,vN=2,IQ=0,vW="",z0="srgb",XD="srgb-linear",RQ="display-p3",yW="display-p3-linear",yN="linear",U3="srgb",z3="rec709",H3="p3",Wb=7680,G3=519,kQ=515,bN=35044,Cy=2e3,TN=2001;class qA{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const o=s.indexOf(t);o!==-1&&s.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let o=0,l=s.length;o<l;o++)s[o].call(this,e);e.target=null}}}const dd=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let W3=1234567;const Q$=Math.PI/180,MS=180/Math.PI;function sg(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(dd[r&255]+dd[r>>8&255]+dd[r>>16&255]+dd[r>>24&255]+"-"+dd[e&255]+dd[e>>8&255]+"-"+dd[e>>16&15|64]+dd[e>>24&255]+"-"+dd[t&63|128]+dd[t>>8&255]+"-"+dd[t>>16&255]+dd[t>>24&255]+dd[i&255]+dd[i>>8&255]+dd[i>>16&255]+dd[i>>24&255]).toLowerCase()}function bd(r,e,t){return Math.max(e,Math.min(t,r))}function YD(r,e){return(r%e+e)%e}function OQ(r,e,t,i,s){return i+(r-e)*(s-i)/(t-e)}function LQ(r,e,t){return r!==e?(t-r)/(e-r):0}function q$(r,e,t){return(1-t)*r+t*e}function NQ(r,e,t,i){return q$(r,e,1-Math.exp(-t*i))}function DQ(r,e=1){return e-Math.abs(YD(r,e*2)-e)}function BQ(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function PQ(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function FQ(r,e){return r+Math.floor(Math.random()*(e-r+1))}function UQ(r,e){return r+Math.random()*(e-r)}function zQ(r){return r*(.5-Math.random())}function HQ(r){r!==void 0&&(W3=r);let e=W3+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function GQ(r){return r*Q$}function WQ(r){return r*MS}function VQ(r){return(r&r-1)===0&&r!==0}function jQ(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function XQ(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function YQ(r,e,t,i,s){const o=Math.cos,l=Math.sin,u=o(t/2),h=l(t/2),p=o((e+i)/2),m=l((e+i)/2),_=o((e-i)/2),v=l((e-i)/2),E=o((i-e)/2),w=l((i-e)/2);switch(s){case"XYX":r.set(u*m,h*_,h*v,u*p);break;case"YZY":r.set(h*v,u*m,h*_,u*p);break;case"ZXZ":r.set(h*_,h*v,u*m,u*p);break;case"XZX":r.set(u*m,h*w,h*E,u*p);break;case"YXY":r.set(h*E,u*m,h*w,u*p);break;case"ZYZ":r.set(h*w,h*E,u*m,u*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function qm(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function ao(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const KQ={DEG2RAD:Q$,RAD2DEG:MS,generateUUID:sg,clamp:bd,euclideanModulo:YD,mapLinear:OQ,inverseLerp:LQ,lerp:q$,damp:NQ,pingpong:DQ,smoothstep:BQ,smootherstep:PQ,randInt:FQ,randFloat:UQ,randFloatSpread:zQ,seededRandom:HQ,degToRad:GQ,radToDeg:WQ,isPowerOfTwo:VQ,ceilPowerOfTwo:jQ,floorPowerOfTwo:XQ,setQuaternionFromProperEuler:YQ,normalize:ao,denormalize:qm};class Al{constructor(e=0,t=0){Al.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(bd(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*i-l*s+e.x,this.y=o*s+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Q_{constructor(e,t,i,s,o,l,u,h,p){Q_.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,o,l,u,h,p)}set(e,t,i,s,o,l,u,h,p){const m=this.elements;return m[0]=e,m[1]=s,m[2]=u,m[3]=t,m[4]=o,m[5]=h,m[6]=i,m[7]=l,m[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[3],h=i[6],p=i[1],m=i[4],_=i[7],v=i[2],E=i[5],w=i[8],x=s[0],A=s[3],O=s[6],k=s[1],D=s[4],N=s[7],F=s[2],z=s[5],V=s[8];return o[0]=l*x+u*k+h*F,o[3]=l*A+u*D+h*z,o[6]=l*O+u*N+h*V,o[1]=p*x+m*k+_*F,o[4]=p*A+m*D+_*z,o[7]=p*O+m*N+_*V,o[2]=v*x+E*k+w*F,o[5]=v*A+E*D+w*z,o[8]=v*O+E*N+w*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],p=e[7],m=e[8];return t*l*m-t*u*p-i*o*m+i*u*h+s*o*p-s*l*h}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],p=e[7],m=e[8],_=m*l-u*p,v=u*h-m*o,E=p*o-l*h,w=t*_+i*v+s*E;if(w===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/w;return e[0]=_*x,e[1]=(s*p-m*i)*x,e[2]=(u*i-s*l)*x,e[3]=v*x,e[4]=(m*t-s*h)*x,e[5]=(s*o-u*t)*x,e[6]=E*x,e[7]=(i*h-p*t)*x,e[8]=(l*t-i*o)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,o,l,u){const h=Math.cos(o),p=Math.sin(o);return this.set(i*h,i*p,-i*(h*l+p*u)+l+e,-s*p,s*h,-s*(-p*l+h*u)+u+t,0,0,1),this}scale(e,t){return this.premultiply(pk.makeScale(e,t)),this}rotate(e){return this.premultiply(pk.makeRotation(-e)),this}translate(e,t){return this.premultiply(pk.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const pk=new Q_;function JQ(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}function EN(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}const V3={};function bW(r){r in V3||(V3[r]=!0,console.warn(r))}const j3=new Q_().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),X3=new Q_().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),$x={[XD]:{transfer:yN,primaries:z3,toReference:r=>r,fromReference:r=>r},[z0]:{transfer:U3,primaries:z3,toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[yW]:{transfer:yN,primaries:H3,toReference:r=>r.applyMatrix3(X3),fromReference:r=>r.applyMatrix3(j3)},[RQ]:{transfer:U3,primaries:H3,toReference:r=>r.convertSRGBToLinear().applyMatrix3(X3),fromReference:r=>r.applyMatrix3(j3).convertLinearToSRGB()}},QQ=new Set([XD,yW]),zm={enabled:!0,_workingColorSpace:XD,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!QQ.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,t){if(this.enabled===!1||e===t||!e||!t)return r;const i=$x[e].toReference,s=$x[t].fromReference;return s(i(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return $x[r].primaries},getTransfer:function(r){return r===vW?yN:$x[r].transfer}};function s1(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function fk(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let Vb;class qQ{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Vb===void 0&&(Vb=EN("canvas")),Vb.width=e.width,Vb.height=e.height;const i=Vb.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Vb}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=EN("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),o=s.data;for(let l=0;l<o.length;l++)o[l]=s1(o[l]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(s1(t[i]/255)*255):t[i]=s1(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let ZQ=0;class eq{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ZQ++}),this.uuid=sg(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?o.push(mk(s[l].image)):o.push(mk(s[l]))}else o=mk(s);i.url=o}return t||(e.images[this.uuid]=i),i}}function mk(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?qQ.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let tq=0;class gf extends qA{constructor(e=gf.DEFAULT_IMAGE,t=gf.DEFAULT_MAPPING,i=N$,s=N$,o=GD,l=WD,u=jD,h=gW,p=gf.DEFAULT_ANISOTROPY,m=vW){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:tq++}),this.uuid=sg(),this.name="",this.source=new eq(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=p,this.format=u,this.internalFormat=null,this.type=h,this.offset=new Al(0,0),this.repeat=new Al(1,1),this.center=new Al(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Q_,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==mW)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case wS:e.x=e.x-Math.floor(e.x);break;case N$:e.x=e.x<0?0:1;break;case _N:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case wS:e.y=e.y-Math.floor(e.y);break;case N$:e.y=e.y<0?0:1;break;case _N:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}gf.DEFAULT_IMAGE=null;gf.DEFAULT_MAPPING=mW;gf.DEFAULT_ANISOTROPY=1;class lm{constructor(e=0,t=0,i=0,s=1){lm.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*s+l[12]*o,this.y=l[1]*t+l[5]*i+l[9]*s+l[13]*o,this.z=l[2]*t+l[6]*i+l[10]*s+l[14]*o,this.w=l[3]*t+l[7]*i+l[11]*s+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,o;const h=e.elements,p=h[0],m=h[4],_=h[8],v=h[1],E=h[5],w=h[9],x=h[2],A=h[6],O=h[10];if(Math.abs(m-v)<.01&&Math.abs(_-x)<.01&&Math.abs(w-A)<.01){if(Math.abs(m+v)<.1&&Math.abs(_+x)<.1&&Math.abs(w+A)<.1&&Math.abs(p+E+O-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(p+1)/2,N=(E+1)/2,F=(O+1)/2,z=(m+v)/4,V=(_+x)/4,U=(w+A)/4;return D>N&&D>F?D<.01?(i=0,s=.707106781,o=.707106781):(i=Math.sqrt(D),s=z/i,o=V/i):N>F?N<.01?(i=.707106781,s=0,o=.707106781):(s=Math.sqrt(N),i=z/s,o=U/s):F<.01?(i=.707106781,s=.707106781,o=0):(o=Math.sqrt(F),i=V/o,s=U/o),this.set(i,s,o,t),this}let k=Math.sqrt((A-w)*(A-w)+(_-x)*(_-x)+(v-m)*(v-m));return Math.abs(k)<.001&&(k=1),this.x=(A-w)/k,this.y=(_-x)/k,this.z=(v-m)/k,this.w=Math.acos((p+E+O-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ip{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,o,l,u){let h=i[s+0],p=i[s+1],m=i[s+2],_=i[s+3];const v=o[l+0],E=o[l+1],w=o[l+2],x=o[l+3];if(u===0){e[t+0]=h,e[t+1]=p,e[t+2]=m,e[t+3]=_;return}if(u===1){e[t+0]=v,e[t+1]=E,e[t+2]=w,e[t+3]=x;return}if(_!==x||h!==v||p!==E||m!==w){let A=1-u;const O=h*v+p*E+m*w+_*x,k=O>=0?1:-1,D=1-O*O;if(D>Number.EPSILON){const F=Math.sqrt(D),z=Math.atan2(F,O*k);A=Math.sin(A*z)/F,u=Math.sin(u*z)/F}const N=u*k;if(h=h*A+v*N,p=p*A+E*N,m=m*A+w*N,_=_*A+x*N,A===1-u){const F=1/Math.sqrt(h*h+p*p+m*m+_*_);h*=F,p*=F,m*=F,_*=F}}e[t]=h,e[t+1]=p,e[t+2]=m,e[t+3]=_}static multiplyQuaternionsFlat(e,t,i,s,o,l){const u=i[s],h=i[s+1],p=i[s+2],m=i[s+3],_=o[l],v=o[l+1],E=o[l+2],w=o[l+3];return e[t]=u*w+m*_+h*E-p*v,e[t+1]=h*w+m*v+p*_-u*E,e[t+2]=p*w+m*E+u*v-h*_,e[t+3]=m*w-u*_-h*v-p*E,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,o=e._z,l=e._order,u=Math.cos,h=Math.sin,p=u(i/2),m=u(s/2),_=u(o/2),v=h(i/2),E=h(s/2),w=h(o/2);switch(l){case"XYZ":this._x=v*m*_+p*E*w,this._y=p*E*_-v*m*w,this._z=p*m*w+v*E*_,this._w=p*m*_-v*E*w;break;case"YXZ":this._x=v*m*_+p*E*w,this._y=p*E*_-v*m*w,this._z=p*m*w-v*E*_,this._w=p*m*_+v*E*w;break;case"ZXY":this._x=v*m*_-p*E*w,this._y=p*E*_+v*m*w,this._z=p*m*w+v*E*_,this._w=p*m*_-v*E*w;break;case"ZYX":this._x=v*m*_-p*E*w,this._y=p*E*_+v*m*w,this._z=p*m*w-v*E*_,this._w=p*m*_+v*E*w;break;case"YZX":this._x=v*m*_+p*E*w,this._y=p*E*_+v*m*w,this._z=p*m*w-v*E*_,this._w=p*m*_-v*E*w;break;case"XZY":this._x=v*m*_-p*E*w,this._y=p*E*_-v*m*w,this._z=p*m*w+v*E*_,this._w=p*m*_+v*E*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],o=t[8],l=t[1],u=t[5],h=t[9],p=t[2],m=t[6],_=t[10],v=i+u+_;if(v>0){const E=.5/Math.sqrt(v+1);this._w=.25/E,this._x=(m-h)*E,this._y=(o-p)*E,this._z=(l-s)*E}else if(i>u&&i>_){const E=2*Math.sqrt(1+i-u-_);this._w=(m-h)/E,this._x=.25*E,this._y=(s+l)/E,this._z=(o+p)/E}else if(u>_){const E=2*Math.sqrt(1+u-i-_);this._w=(o-p)/E,this._x=(s+l)/E,this._y=.25*E,this._z=(h+m)/E}else{const E=2*Math.sqrt(1+_-i-u);this._w=(l-s)/E,this._x=(o+p)/E,this._y=(h+m)/E,this._z=.25*E}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(bd(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,o=e._z,l=e._w,u=t._x,h=t._y,p=t._z,m=t._w;return this._x=i*m+l*u+s*p-o*h,this._y=s*m+l*h+o*u-i*p,this._z=o*m+l*p+i*h-s*u,this._w=l*m-i*u-s*h-o*p,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,o=this._z,l=this._w;let u=l*e._w+i*e._x+s*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=i,this._y=s,this._z=o,this;const h=1-u*u;if(h<=Number.EPSILON){const E=1-t;return this._w=E*l+t*this._w,this._x=E*i+t*this._x,this._y=E*s+t*this._y,this._z=E*o+t*this._z,this.normalize(),this}const p=Math.sqrt(h),m=Math.atan2(p,u),_=Math.sin((1-t)*m)/p,v=Math.sin(t*m)/p;return this._w=l*_+this._w*v,this._x=i*_+this._x*v,this._y=s*_+this._y*v,this._z=o*_+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ct{constructor(e=0,t=0,i=0){Ct.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Y3.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Y3.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*s,this.y=o[1]*t+o[4]*i+o[7]*s,this.z=o[2]*t+o[5]*i+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=e.elements,l=1/(o[3]*t+o[7]*i+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*s+o[12])*l,this.y=(o[1]*t+o[5]*i+o[9]*s+o[13])*l,this.z=(o[2]*t+o[6]*i+o[10]*s+o[14])*l,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,o=e.x,l=e.y,u=e.z,h=e.w,p=2*(l*s-u*i),m=2*(u*t-o*s),_=2*(o*i-l*t);return this.x=t+h*p+l*_-u*m,this.y=i+h*m+u*p-o*_,this.z=s+h*_+o*m-l*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s,this.y=o[1]*t+o[5]*i+o[9]*s,this.z=o[2]*t+o[6]*i+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,o=e.z,l=t.x,u=t.y,h=t.z;return this.x=s*h-o*u,this.y=o*l-i*h,this.z=i*u-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return gk.copy(this).projectOnVector(e),this.sub(gk)}reflect(e){return this.sub(gk.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(bd(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const gk=new Ct,Y3=new Ip;class q_{constructor(e=new Ct(1/0,1/0,1/0),t=new Ct(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Hm.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Hm.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Hm.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const o=i.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let l=0,u=o.count;l<u;l++)e.isMesh===!0?e.getVertexPosition(l,Hm):Hm.fromBufferAttribute(o,l),Hm.applyMatrix4(e.matrixWorld),this.expandByPoint(Hm);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Sx.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Sx.copy(i.boundingBox)),Sx.applyMatrix4(e.matrixWorld),this.union(Sx)}const s=e.children;for(let o=0,l=s.length;o<l;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Hm),Hm.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(e$),wx.subVectors(this.max,e$),jb.subVectors(e.a,e$),Xb.subVectors(e.b,e$),Yb.subVectors(e.c,e$),E0.subVectors(Xb,jb),$0.subVectors(Yb,Xb),jv.subVectors(jb,Yb);let t=[0,-E0.z,E0.y,0,-$0.z,$0.y,0,-jv.z,jv.y,E0.z,0,-E0.x,$0.z,0,-$0.x,jv.z,0,-jv.x,-E0.y,E0.x,0,-$0.y,$0.x,0,-jv.y,jv.x,0];return!_k(t,jb,Xb,Yb,wx)||(t=[1,0,0,0,1,0,0,0,1],!_k(t,jb,Xb,Yb,wx))?!1:(xx.crossVectors(E0,$0),t=[xx.x,xx.y,xx.z],_k(t,jb,Xb,Yb,wx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Hm).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Hm).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(b_[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),b_[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),b_[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),b_[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),b_[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),b_[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),b_[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),b_[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(b_),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const b_=[new Ct,new Ct,new Ct,new Ct,new Ct,new Ct,new Ct,new Ct],Hm=new Ct,Sx=new q_,jb=new Ct,Xb=new Ct,Yb=new Ct,E0=new Ct,$0=new Ct,jv=new Ct,e$=new Ct,wx=new Ct,xx=new Ct,Xv=new Ct;function _k(r,e,t,i,s){for(let o=0,l=r.length-3;o<=l;o+=3){Xv.fromArray(r,o);const u=s.x*Math.abs(Xv.x)+s.y*Math.abs(Xv.y)+s.z*Math.abs(Xv.z),h=e.dot(Xv),p=t.dot(Xv),m=i.dot(Xv);if(Math.max(-Math.max(h,p,m),Math.min(h,p,m))>u)return!1}return!0}const nq=new q_,t$=new Ct,vk=new Ct;class Zg{constructor(e=new Ct,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):nq.setFromPoints(e).getCenter(i);let s=0;for(let o=0,l=e.length;o<l;o++)s=Math.max(s,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;t$.subVectors(e,this.center);const t=t$.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(t$,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(vk.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(t$.copy(e.center).add(vk)),this.expandByPoint(t$.copy(e.center).sub(vk))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const T_=new Ct,yk=new Ct,Cx=new Ct,S0=new Ct,bk=new Ct,Mx=new Ct,Tk=new Ct;class ZA{constructor(e=new Ct,t=new Ct(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,T_)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=T_.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(T_.copy(this.origin).addScaledVector(this.direction,t),T_.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){yk.copy(e).add(t).multiplyScalar(.5),Cx.copy(t).sub(e).normalize(),S0.copy(this.origin).sub(yk);const o=e.distanceTo(t)*.5,l=-this.direction.dot(Cx),u=S0.dot(this.direction),h=-S0.dot(Cx),p=S0.lengthSq(),m=Math.abs(1-l*l);let _,v,E,w;if(m>0)if(_=l*h-u,v=l*u-h,w=o*m,_>=0)if(v>=-w)if(v<=w){const x=1/m;_*=x,v*=x,E=_*(_+l*v+2*u)+v*(l*_+v+2*h)+p}else v=o,_=Math.max(0,-(l*v+u)),E=-_*_+v*(v+2*h)+p;else v=-o,_=Math.max(0,-(l*v+u)),E=-_*_+v*(v+2*h)+p;else v<=-w?(_=Math.max(0,-(-l*o+u)),v=_>0?-o:Math.min(Math.max(-o,-h),o),E=-_*_+v*(v+2*h)+p):v<=w?(_=0,v=Math.min(Math.max(-o,-h),o),E=v*(v+2*h)+p):(_=Math.max(0,-(l*o+u)),v=_>0?o:Math.min(Math.max(-o,-h),o),E=-_*_+v*(v+2*h)+p);else v=l>0?-o:o,_=Math.max(0,-(l*v+u)),E=-_*_+v*(v+2*h)+p;return i&&i.copy(this.origin).addScaledVector(this.direction,_),s&&s.copy(yk).addScaledVector(Cx,v),E}intersectSphere(e,t){T_.subVectors(e.center,this.origin);const i=T_.dot(this.direction),s=T_.dot(T_)-i*i,o=e.radius*e.radius;if(s>o)return null;const l=Math.sqrt(o-s),u=i-l,h=i+l;return h<0?null:u<0?this.at(h,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,o,l,u,h;const p=1/this.direction.x,m=1/this.direction.y,_=1/this.direction.z,v=this.origin;return p>=0?(i=(e.min.x-v.x)*p,s=(e.max.x-v.x)*p):(i=(e.max.x-v.x)*p,s=(e.min.x-v.x)*p),m>=0?(o=(e.min.y-v.y)*m,l=(e.max.y-v.y)*m):(o=(e.max.y-v.y)*m,l=(e.min.y-v.y)*m),i>l||o>s||((o>i||isNaN(i))&&(i=o),(l<s||isNaN(s))&&(s=l),_>=0?(u=(e.min.z-v.z)*_,h=(e.max.z-v.z)*_):(u=(e.max.z-v.z)*_,h=(e.min.z-v.z)*_),i>h||u>s)||((u>i||i!==i)&&(i=u),(h<s||s!==s)&&(s=h),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,T_)!==null}intersectTriangle(e,t,i,s,o){bk.subVectors(t,e),Mx.subVectors(i,e),Tk.crossVectors(bk,Mx);let l=this.direction.dot(Tk),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;S0.subVectors(this.origin,e);const h=u*this.direction.dot(Mx.crossVectors(S0,Mx));if(h<0)return null;const p=u*this.direction.dot(bk.cross(S0));if(p<0||h+p>l)return null;const m=-u*S0.dot(Tk);return m<0?null:this.at(m/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ki{constructor(e,t,i,s,o,l,u,h,p,m,_,v,E,w,x,A){Ki.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,o,l,u,h,p,m,_,v,E,w,x,A)}set(e,t,i,s,o,l,u,h,p,m,_,v,E,w,x,A){const O=this.elements;return O[0]=e,O[4]=t,O[8]=i,O[12]=s,O[1]=o,O[5]=l,O[9]=u,O[13]=h,O[2]=p,O[6]=m,O[10]=_,O[14]=v,O[3]=E,O[7]=w,O[11]=x,O[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ki().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/Kb.setFromMatrixColumn(e,0).length(),o=1/Kb.setFromMatrixColumn(e,1).length(),l=1/Kb.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*l,t[9]=i[9]*l,t[10]=i[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,o=e.z,l=Math.cos(i),u=Math.sin(i),h=Math.cos(s),p=Math.sin(s),m=Math.cos(o),_=Math.sin(o);if(e.order==="XYZ"){const v=l*m,E=l*_,w=u*m,x=u*_;t[0]=h*m,t[4]=-h*_,t[8]=p,t[1]=E+w*p,t[5]=v-x*p,t[9]=-u*h,t[2]=x-v*p,t[6]=w+E*p,t[10]=l*h}else if(e.order==="YXZ"){const v=h*m,E=h*_,w=p*m,x=p*_;t[0]=v+x*u,t[4]=w*u-E,t[8]=l*p,t[1]=l*_,t[5]=l*m,t[9]=-u,t[2]=E*u-w,t[6]=x+v*u,t[10]=l*h}else if(e.order==="ZXY"){const v=h*m,E=h*_,w=p*m,x=p*_;t[0]=v-x*u,t[4]=-l*_,t[8]=w+E*u,t[1]=E+w*u,t[5]=l*m,t[9]=x-v*u,t[2]=-l*p,t[6]=u,t[10]=l*h}else if(e.order==="ZYX"){const v=l*m,E=l*_,w=u*m,x=u*_;t[0]=h*m,t[4]=w*p-E,t[8]=v*p+x,t[1]=h*_,t[5]=x*p+v,t[9]=E*p-w,t[2]=-p,t[6]=u*h,t[10]=l*h}else if(e.order==="YZX"){const v=l*h,E=l*p,w=u*h,x=u*p;t[0]=h*m,t[4]=x-v*_,t[8]=w*_+E,t[1]=_,t[5]=l*m,t[9]=-u*m,t[2]=-p*m,t[6]=E*_+w,t[10]=v-x*_}else if(e.order==="XZY"){const v=l*h,E=l*p,w=u*h,x=u*p;t[0]=h*m,t[4]=-_,t[8]=p*m,t[1]=v*_+x,t[5]=l*m,t[9]=E*_-w,t[2]=w*_-E,t[6]=u*m,t[10]=x*_+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(rq,e,iq)}lookAt(e,t,i){const s=this.elements;return sf.subVectors(e,t),sf.lengthSq()===0&&(sf.z=1),sf.normalize(),w0.crossVectors(i,sf),w0.lengthSq()===0&&(Math.abs(i.z)===1?sf.x+=1e-4:sf.z+=1e-4,sf.normalize(),w0.crossVectors(i,sf)),w0.normalize(),Ax.crossVectors(sf,w0),s[0]=w0.x,s[4]=Ax.x,s[8]=sf.x,s[1]=w0.y,s[5]=Ax.y,s[9]=sf.y,s[2]=w0.z,s[6]=Ax.z,s[10]=sf.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[4],h=i[8],p=i[12],m=i[1],_=i[5],v=i[9],E=i[13],w=i[2],x=i[6],A=i[10],O=i[14],k=i[3],D=i[7],N=i[11],F=i[15],z=s[0],V=s[4],U=s[8],ee=s[12],ne=s[1],ie=s[5],se=s[9],fe=s[13],ae=s[2],he=s[6],ge=s[10],Ie=s[14],j=s[3],te=s[7],q=s[11],le=s[15];return o[0]=l*z+u*ne+h*ae+p*j,o[4]=l*V+u*ie+h*he+p*te,o[8]=l*U+u*se+h*ge+p*q,o[12]=l*ee+u*fe+h*Ie+p*le,o[1]=m*z+_*ne+v*ae+E*j,o[5]=m*V+_*ie+v*he+E*te,o[9]=m*U+_*se+v*ge+E*q,o[13]=m*ee+_*fe+v*Ie+E*le,o[2]=w*z+x*ne+A*ae+O*j,o[6]=w*V+x*ie+A*he+O*te,o[10]=w*U+x*se+A*ge+O*q,o[14]=w*ee+x*fe+A*Ie+O*le,o[3]=k*z+D*ne+N*ae+F*j,o[7]=k*V+D*ie+N*he+F*te,o[11]=k*U+D*se+N*ge+F*q,o[15]=k*ee+D*fe+N*Ie+F*le,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],o=e[12],l=e[1],u=e[5],h=e[9],p=e[13],m=e[2],_=e[6],v=e[10],E=e[14],w=e[3],x=e[7],A=e[11],O=e[15];return w*(+o*h*_-s*p*_-o*u*v+i*p*v+s*u*E-i*h*E)+x*(+t*h*E-t*p*v+o*l*v-s*l*E+s*p*m-o*h*m)+A*(+t*p*_-t*u*E-o*l*_+i*l*E+o*u*m-i*p*m)+O*(-s*u*m-t*h*_+t*u*v+s*l*_-i*l*v+i*h*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],p=e[7],m=e[8],_=e[9],v=e[10],E=e[11],w=e[12],x=e[13],A=e[14],O=e[15],k=_*A*p-x*v*p+x*h*E-u*A*E-_*h*O+u*v*O,D=w*v*p-m*A*p-w*h*E+l*A*E+m*h*O-l*v*O,N=m*x*p-w*_*p+w*u*E-l*x*E-m*u*O+l*_*O,F=w*_*h-m*x*h-w*u*v+l*x*v+m*u*A-l*_*A,z=t*k+i*D+s*N+o*F;if(z===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const V=1/z;return e[0]=k*V,e[1]=(x*v*o-_*A*o-x*s*E+i*A*E+_*s*O-i*v*O)*V,e[2]=(u*A*o-x*h*o+x*s*p-i*A*p-u*s*O+i*h*O)*V,e[3]=(_*h*o-u*v*o-_*s*p+i*v*p+u*s*E-i*h*E)*V,e[4]=D*V,e[5]=(m*A*o-w*v*o+w*s*E-t*A*E-m*s*O+t*v*O)*V,e[6]=(w*h*o-l*A*o-w*s*p+t*A*p+l*s*O-t*h*O)*V,e[7]=(l*v*o-m*h*o+m*s*p-t*v*p-l*s*E+t*h*E)*V,e[8]=N*V,e[9]=(w*_*o-m*x*o-w*i*E+t*x*E+m*i*O-t*_*O)*V,e[10]=(l*x*o-w*u*o+w*i*p-t*x*p-l*i*O+t*u*O)*V,e[11]=(m*u*o-l*_*o-m*i*p+t*_*p+l*i*E-t*u*E)*V,e[12]=F*V,e[13]=(m*x*s-w*_*s+w*i*v-t*x*v-m*i*A+t*_*A)*V,e[14]=(w*u*s-l*x*s-w*i*h+t*x*h+l*i*A-t*u*A)*V,e[15]=(l*_*s-m*u*s+m*i*h-t*_*h-l*i*v+t*u*v)*V,this}scale(e){const t=this.elements,i=e.x,s=e.y,o=e.z;return t[0]*=i,t[4]*=s,t[8]*=o,t[1]*=i,t[5]*=s,t[9]*=o,t[2]*=i,t[6]*=s,t[10]*=o,t[3]*=i,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),o=1-i,l=e.x,u=e.y,h=e.z,p=o*l,m=o*u;return this.set(p*l+i,p*u-s*h,p*h+s*u,0,p*u+s*h,m*u+i,m*h-s*l,0,p*h-s*u,m*h+s*l,o*h*h+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,o,l){return this.set(1,i,o,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,o=t._x,l=t._y,u=t._z,h=t._w,p=o+o,m=l+l,_=u+u,v=o*p,E=o*m,w=o*_,x=l*m,A=l*_,O=u*_,k=h*p,D=h*m,N=h*_,F=i.x,z=i.y,V=i.z;return s[0]=(1-(x+O))*F,s[1]=(E+N)*F,s[2]=(w-D)*F,s[3]=0,s[4]=(E-N)*z,s[5]=(1-(v+O))*z,s[6]=(A+k)*z,s[7]=0,s[8]=(w+D)*V,s[9]=(A-k)*V,s[10]=(1-(v+x))*V,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let o=Kb.set(s[0],s[1],s[2]).length();const l=Kb.set(s[4],s[5],s[6]).length(),u=Kb.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],Gm.copy(this);const p=1/o,m=1/l,_=1/u;return Gm.elements[0]*=p,Gm.elements[1]*=p,Gm.elements[2]*=p,Gm.elements[4]*=m,Gm.elements[5]*=m,Gm.elements[6]*=m,Gm.elements[8]*=_,Gm.elements[9]*=_,Gm.elements[10]*=_,t.setFromRotationMatrix(Gm),i.x=o,i.y=l,i.z=u,this}makePerspective(e,t,i,s,o,l,u=Cy){const h=this.elements,p=2*o/(t-e),m=2*o/(i-s),_=(t+e)/(t-e),v=(i+s)/(i-s);let E,w;if(u===Cy)E=-(l+o)/(l-o),w=-2*l*o/(l-o);else if(u===TN)E=-l/(l-o),w=-l*o/(l-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return h[0]=p,h[4]=0,h[8]=_,h[12]=0,h[1]=0,h[5]=m,h[9]=v,h[13]=0,h[2]=0,h[6]=0,h[10]=E,h[14]=w,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,i,s,o,l,u=Cy){const h=this.elements,p=1/(t-e),m=1/(i-s),_=1/(l-o),v=(t+e)*p,E=(i+s)*m;let w,x;if(u===Cy)w=(l+o)*_,x=-2*_;else if(u===TN)w=o*_,x=-1*_;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return h[0]=2*p,h[4]=0,h[8]=0,h[12]=-v,h[1]=0,h[5]=2*m,h[9]=0,h[13]=-E,h[2]=0,h[6]=0,h[10]=x,h[14]=-w,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Kb=new Ct,Gm=new Ki,rq=new Ct(0,0,0),iq=new Ct(1,1,1),w0=new Ct,Ax=new Ct,sf=new Ct,K3=new Ki,J3=new Ip;class lb{constructor(e=0,t=0,i=0,s=lb.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],h=s[1],p=s[5],m=s[9],_=s[2],v=s[6],E=s[10];switch(t){case"XYZ":this._y=Math.asin(bd(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,E),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(v,p),this._z=0);break;case"YXZ":this._x=Math.asin(-bd(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(u,E),this._z=Math.atan2(h,p)):(this._y=Math.atan2(-_,o),this._z=0);break;case"ZXY":this._x=Math.asin(bd(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-_,E),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-bd(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(v,E),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin(bd(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-m,p),this._y=Math.atan2(-_,o)):(this._x=0,this._y=Math.atan2(u,E));break;case"XZY":this._z=Math.asin(-bd(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(v,p),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-m,E),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return K3.makeRotationFromQuaternion(e),this.setFromRotationMatrix(K3,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return J3.setFromEuler(this),this.setFromQuaternion(J3,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}lb.DEFAULT_ORDER="XYZ";class fM{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let sq=0;const Q3=new Ct,Jb=new Ip,E_=new Ki,Ix=new Ct,n$=new Ct,oq=new Ct,aq=new Ip,q3=new Ct(1,0,0),Z3=new Ct(0,1,0),eU=new Ct(0,0,1),lq={type:"added"},uq={type:"removed"},Ek={type:"childadded",child:null},$k={type:"childremoved",child:null};class Bu extends qA{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:sq++}),this.uuid=sg(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bu.DEFAULT_UP.clone();const e=new Ct,t=new lb,i=new Ip,s=new Ct(1,1,1);function o(){i.setFromEuler(t,!1)}function l(){t.setFromQuaternion(i,void 0,!1)}t._onChange(o),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ki},normalMatrix:{value:new Q_}}),this.matrix=new Ki,this.matrixWorld=new Ki,this.matrixAutoUpdate=Bu.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Bu.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new fM,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Jb.setFromAxisAngle(e,t),this.quaternion.multiply(Jb),this}rotateOnWorldAxis(e,t){return Jb.setFromAxisAngle(e,t),this.quaternion.premultiply(Jb),this}rotateX(e){return this.rotateOnAxis(q3,e)}rotateY(e){return this.rotateOnAxis(Z3,e)}rotateZ(e){return this.rotateOnAxis(eU,e)}translateOnAxis(e,t){return Q3.copy(e).applyQuaternion(this.quaternion),this.position.add(Q3.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(q3,e)}translateY(e){return this.translateOnAxis(Z3,e)}translateZ(e){return this.translateOnAxis(eU,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(E_.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Ix.copy(e):Ix.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),n$.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?E_.lookAt(n$,Ix,this.up):E_.lookAt(Ix,n$,this.up),this.quaternion.setFromRotationMatrix(E_),s&&(E_.extractRotation(s.matrixWorld),Jb.setFromRotationMatrix(E_),this.quaternion.premultiply(Jb.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(lq),Ek.child=e,this.dispatchEvent(Ek),Ek.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(uq),$k.child=e,this.dispatchEvent($k),$k.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),E_.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),E_.multiply(e.parent.matrixWorld)),e.applyMatrix4(E_),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const l=this.children[i].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let o=0,l=s.length;o<l;o++)s[o].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(n$,e,oq),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(n$,aq,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++){const o=t[i];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let o=0,l=s.length;o<l;o++){const u=s[o];u.matrixWorldAutoUpdate===!0&&u.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(u=>({boxInitialized:u.boxInitialized,boxMin:u.box.min.toArray(),boxMax:u.box.max.toArray(),sphereInitialized:u.sphereInitialized,sphereRadius:u.sphere.radius,sphereCenter:u.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(u,h){return u[h.uuid]===void 0&&(u[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const h=u.shapes;if(Array.isArray(h))for(let p=0,m=h.length;p<m;p++){const _=h[p];o(e.shapes,_)}else o(e.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let h=0,p=this.material.length;h<p;h++)u.push(o(e.materials,this.material[h]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const h=this.animations[u];s.animations.push(o(e.animations,h))}}if(t){const u=l(e.geometries),h=l(e.materials),p=l(e.textures),m=l(e.images),_=l(e.shapes),v=l(e.skeletons),E=l(e.animations),w=l(e.nodes);u.length>0&&(i.geometries=u),h.length>0&&(i.materials=h),p.length>0&&(i.textures=p),m.length>0&&(i.images=m),_.length>0&&(i.shapes=_),v.length>0&&(i.skeletons=v),E.length>0&&(i.animations=E),w.length>0&&(i.nodes=w)}return i.object=s,i;function l(u){const h=[];for(const p in u){const m=u[p];delete m.metadata,h.push(m)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}Bu.DEFAULT_UP=new Ct(0,1,0);Bu.DEFAULT_MATRIX_AUTO_UPDATE=!0;Bu.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Wm=new Ct,$_=new Ct,Sk=new Ct,S_=new Ct,Qb=new Ct,qb=new Ct,tU=new Ct,wk=new Ct,xk=new Ct,Ck=new Ct;class Ug{constructor(e=new Ct,t=new Ct,i=new Ct){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Wm.subVectors(e,t),s.cross(Wm);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,i,s,o){Wm.subVectors(s,t),$_.subVectors(i,t),Sk.subVectors(e,t);const l=Wm.dot(Wm),u=Wm.dot($_),h=Wm.dot(Sk),p=$_.dot($_),m=$_.dot(Sk),_=l*p-u*u;if(_===0)return o.set(0,0,0),null;const v=1/_,E=(p*h-u*m)*v,w=(l*m-u*h)*v;return o.set(1-E-w,w,E)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,S_)===null?!1:S_.x>=0&&S_.y>=0&&S_.x+S_.y<=1}static getInterpolation(e,t,i,s,o,l,u,h){return this.getBarycoord(e,t,i,s,S_)===null?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(o,S_.x),h.addScaledVector(l,S_.y),h.addScaledVector(u,S_.z),h)}static isFrontFacing(e,t,i,s){return Wm.subVectors(i,t),$_.subVectors(e,t),Wm.cross($_).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Wm.subVectors(this.c,this.b),$_.subVectors(this.a,this.b),Wm.cross($_).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ug.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ug.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,o){return Ug.getInterpolation(e,this.a,this.b,this.c,t,i,s,o)}containsPoint(e){return Ug.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ug.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,o=this.c;let l,u;Qb.subVectors(s,i),qb.subVectors(o,i),wk.subVectors(e,i);const h=Qb.dot(wk),p=qb.dot(wk);if(h<=0&&p<=0)return t.copy(i);xk.subVectors(e,s);const m=Qb.dot(xk),_=qb.dot(xk);if(m>=0&&_<=m)return t.copy(s);const v=h*_-m*p;if(v<=0&&h>=0&&m<=0)return l=h/(h-m),t.copy(i).addScaledVector(Qb,l);Ck.subVectors(e,o);const E=Qb.dot(Ck),w=qb.dot(Ck);if(w>=0&&E<=w)return t.copy(o);const x=E*p-h*w;if(x<=0&&p>=0&&w<=0)return u=p/(p-w),t.copy(i).addScaledVector(qb,u);const A=m*w-E*_;if(A<=0&&_-m>=0&&E-w>=0)return tU.subVectors(o,s),u=(_-m)/(_-m+(E-w)),t.copy(s).addScaledVector(tU,u);const O=1/(A+x+v);return l=x*O,u=v*O,t.copy(i).addScaledVector(Qb,l).addScaledVector(qb,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const TW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},x0={h:0,s:0,l:0},Rx={h:0,s:0,l:0};function Mk(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class lc{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=z0){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,zm.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=zm.workingColorSpace){return this.r=e,this.g=t,this.b=i,zm.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=zm.workingColorSpace){if(e=YD(e,1),t=bd(t,0,1),i=bd(i,0,1),t===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,l=2*i-o;this.r=Mk(l,o,e+1/3),this.g=Mk(l,o,e),this.b=Mk(l,o,e-1/3)}return zm.toWorkingColorSpace(this,s),this}setStyle(e,t=z0){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(l===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=z0){const i=TW[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=s1(e.r),this.g=s1(e.g),this.b=s1(e.b),this}copyLinearToSRGB(e){return this.r=fk(e.r),this.g=fk(e.g),this.b=fk(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=z0){return zm.fromWorkingColorSpace(pd.copy(this),e),Math.round(bd(pd.r*255,0,255))*65536+Math.round(bd(pd.g*255,0,255))*256+Math.round(bd(pd.b*255,0,255))}getHexString(e=z0){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=zm.workingColorSpace){zm.fromWorkingColorSpace(pd.copy(this),t);const i=pd.r,s=pd.g,o=pd.b,l=Math.max(i,s,o),u=Math.min(i,s,o);let h,p;const m=(u+l)/2;if(u===l)h=0,p=0;else{const _=l-u;switch(p=m<=.5?_/(l+u):_/(2-l-u),l){case i:h=(s-o)/_+(s<o?6:0);break;case s:h=(o-i)/_+2;break;case o:h=(i-s)/_+4;break}h/=6}return e.h=h,e.s=p,e.l=m,e}getRGB(e,t=zm.workingColorSpace){return zm.fromWorkingColorSpace(pd.copy(this),t),e.r=pd.r,e.g=pd.g,e.b=pd.b,e}getStyle(e=z0){zm.fromWorkingColorSpace(pd.copy(this),e);const t=pd.r,i=pd.g,s=pd.b;return e!==z0?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(x0),this.setHSL(x0.h+e,x0.s+t,x0.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(x0),e.getHSL(Rx);const i=q$(x0.h,Rx.h,t),s=q$(x0.s,Rx.s,t),o=q$(x0.l,Rx.l,t);return this.setHSL(i,s,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*s,this.g=o[1]*t+o[4]*i+o[7]*s,this.b=o[2]*t+o[5]*i+o[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const pd=new lc;lc.NAMES=TW;let cq=0;class ov extends qA{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:cq++}),this.uuid=sg(),this.name="",this.type="Material",this.blending=I3,this.side=aA,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=k3,this.blendDst=O3,this.blendEquation=R3,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new lc(0,0,0),this.blendAlpha=0,this.depthFunc=L3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=G3,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Wb,this.stencilZFail=Wb,this.stencilZPass=Wb,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==I3&&(i.blending=this.blending),this.side!==aA&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==k3&&(i.blendSrc=this.blendSrc),this.blendDst!==O3&&(i.blendDst=this.blendDst),this.blendEquation!==R3&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==L3&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==G3&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Wb&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Wb&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Wb&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(o){const l=[];for(const u in o){const h=o[u];delete h.metadata,l.push(h)}return l}if(t){const o=s(e.textures),l=s(e.images);o.length>0&&(i.textures=o),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let o=0;o!==s;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class XT extends ov{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new lc(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new lb,this.combine=bQ,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const rc=new Ct,kx=new Al;class _f{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=bN,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=VD,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return bW("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)kx.fromBufferAttribute(this,t),kx.applyMatrix3(e),this.setXY(t,kx.x,kx.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)rc.fromBufferAttribute(this,t),rc.applyMatrix3(e),this.setXYZ(t,rc.x,rc.y,rc.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)rc.fromBufferAttribute(this,t),rc.applyMatrix4(e),this.setXYZ(t,rc.x,rc.y,rc.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)rc.fromBufferAttribute(this,t),rc.applyNormalMatrix(e),this.setXYZ(t,rc.x,rc.y,rc.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)rc.fromBufferAttribute(this,t),rc.transformDirection(e),this.setXYZ(t,rc.x,rc.y,rc.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=qm(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=ao(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=qm(t,this.array)),t}setX(e,t){return this.normalized&&(t=ao(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=qm(t,this.array)),t}setY(e,t){return this.normalized&&(t=ao(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=qm(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ao(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=qm(t,this.array)),t}setW(e,t){return this.normalized&&(t=ao(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=ao(t,this.array),i=ao(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=ao(t,this.array),i=ao(i,this.array),s=ao(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e*=this.itemSize,this.normalized&&(t=ao(t,this.array),i=ao(i,this.array),s=ao(s,this.array),o=ao(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==bN&&(e.usage=this.usage),e}}class hq extends _f{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class dq extends _f{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class KD extends _f{constructor(e,t,i){super(new Float32Array(e),t,i)}}let pq=0;const Jf=new Ki,Ak=new Bu,Zb=new Ct,of=new q_,r$=new q_,rh=new Ct;class Tv extends qA{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:pq++}),this.uuid=sg(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(JQ(e)?dq:hq)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new Q_().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Jf.makeRotationFromQuaternion(e),this.applyMatrix4(Jf),this}rotateX(e){return Jf.makeRotationX(e),this.applyMatrix4(Jf),this}rotateY(e){return Jf.makeRotationY(e),this.applyMatrix4(Jf),this}rotateZ(e){return Jf.makeRotationZ(e),this.applyMatrix4(Jf),this}translate(e,t,i){return Jf.makeTranslation(e,t,i),this.applyMatrix4(Jf),this}scale(e,t,i){return Jf.makeScale(e,t,i),this.applyMatrix4(Jf),this}lookAt(e){return Ak.lookAt(e),Ak.updateMatrix(),this.applyMatrix4(Ak.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Zb).negate(),this.translate(Zb.x,Zb.y,Zb.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new KD(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new q_);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Ct(-1/0,-1/0,-1/0),new Ct(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const o=t[i];of.setFromBufferAttribute(o),this.morphTargetsRelative?(rh.addVectors(this.boundingBox.min,of.min),this.boundingBox.expandByPoint(rh),rh.addVectors(this.boundingBox.max,of.max),this.boundingBox.expandByPoint(rh)):(this.boundingBox.expandByPoint(of.min),this.boundingBox.expandByPoint(of.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Zg);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Ct,1/0);return}if(e){const i=this.boundingSphere.center;if(of.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const u=t[o];r$.setFromBufferAttribute(u),this.morphTargetsRelative?(rh.addVectors(of.min,r$.min),of.expandByPoint(rh),rh.addVectors(of.max,r$.max),of.expandByPoint(rh)):(of.expandByPoint(r$.min),of.expandByPoint(r$.max))}of.getCenter(i);let s=0;for(let o=0,l=e.count;o<l;o++)rh.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(rh));if(t)for(let o=0,l=t.length;o<l;o++){const u=t[o],h=this.morphTargetsRelative;for(let p=0,m=u.count;p<m;p++)rh.fromBufferAttribute(u,p),h&&(Zb.fromBufferAttribute(e,p),rh.add(Zb)),s=Math.max(s,i.distanceToSquared(rh))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new _f(new Float32Array(4*i.count),4));const l=this.getAttribute("tangent"),u=[],h=[];for(let U=0;U<i.count;U++)u[U]=new Ct,h[U]=new Ct;const p=new Ct,m=new Ct,_=new Ct,v=new Al,E=new Al,w=new Al,x=new Ct,A=new Ct;function O(U,ee,ne){p.fromBufferAttribute(i,U),m.fromBufferAttribute(i,ee),_.fromBufferAttribute(i,ne),v.fromBufferAttribute(o,U),E.fromBufferAttribute(o,ee),w.fromBufferAttribute(o,ne),m.sub(p),_.sub(p),E.sub(v),w.sub(v);const ie=1/(E.x*w.y-w.x*E.y);isFinite(ie)&&(x.copy(m).multiplyScalar(w.y).addScaledVector(_,-E.y).multiplyScalar(ie),A.copy(_).multiplyScalar(E.x).addScaledVector(m,-w.x).multiplyScalar(ie),u[U].add(x),u[ee].add(x),u[ne].add(x),h[U].add(A),h[ee].add(A),h[ne].add(A))}let k=this.groups;k.length===0&&(k=[{start:0,count:e.count}]);for(let U=0,ee=k.length;U<ee;++U){const ne=k[U],ie=ne.start,se=ne.count;for(let fe=ie,ae=ie+se;fe<ae;fe+=3)O(e.getX(fe+0),e.getX(fe+1),e.getX(fe+2))}const D=new Ct,N=new Ct,F=new Ct,z=new Ct;function V(U){F.fromBufferAttribute(s,U),z.copy(F);const ee=u[U];D.copy(ee),D.sub(F.multiplyScalar(F.dot(ee))).normalize(),N.crossVectors(z,ee);const ie=N.dot(h[U])<0?-1:1;l.setXYZW(U,D.x,D.y,D.z,ie)}for(let U=0,ee=k.length;U<ee;++U){const ne=k[U],ie=ne.start,se=ne.count;for(let fe=ie,ae=ie+se;fe<ae;fe+=3)V(e.getX(fe+0)),V(e.getX(fe+1)),V(e.getX(fe+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new _f(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let v=0,E=i.count;v<E;v++)i.setXYZ(v,0,0,0);const s=new Ct,o=new Ct,l=new Ct,u=new Ct,h=new Ct,p=new Ct,m=new Ct,_=new Ct;if(e)for(let v=0,E=e.count;v<E;v+=3){const w=e.getX(v+0),x=e.getX(v+1),A=e.getX(v+2);s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,x),l.fromBufferAttribute(t,A),m.subVectors(l,o),_.subVectors(s,o),m.cross(_),u.fromBufferAttribute(i,w),h.fromBufferAttribute(i,x),p.fromBufferAttribute(i,A),u.add(m),h.add(m),p.add(m),i.setXYZ(w,u.x,u.y,u.z),i.setXYZ(x,h.x,h.y,h.z),i.setXYZ(A,p.x,p.y,p.z)}else for(let v=0,E=t.count;v<E;v+=3)s.fromBufferAttribute(t,v+0),o.fromBufferAttribute(t,v+1),l.fromBufferAttribute(t,v+2),m.subVectors(l,o),_.subVectors(s,o),m.cross(_),i.setXYZ(v+0,m.x,m.y,m.z),i.setXYZ(v+1,m.x,m.y,m.z),i.setXYZ(v+2,m.x,m.y,m.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)rh.fromBufferAttribute(e,t),rh.normalize(),e.setXYZ(t,rh.x,rh.y,rh.z)}toNonIndexed(){function e(u,h){const p=u.array,m=u.itemSize,_=u.normalized,v=new p.constructor(h.length*m);let E=0,w=0;for(let x=0,A=h.length;x<A;x++){u.isInterleavedBufferAttribute?E=h[x]*u.data.stride+u.offset:E=h[x]*m;for(let O=0;O<m;O++)v[w++]=p[E++]}return new _f(v,m,_)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Tv,i=this.index.array,s=this.attributes;for(const u in s){const h=s[u],p=e(h,i);t.setAttribute(u,p)}const o=this.morphAttributes;for(const u in o){const h=[],p=o[u];for(let m=0,_=p.length;m<_;m++){const v=p[m],E=e(v,i);h.push(E)}t.morphAttributes[u]=h}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,h=l.length;u<h;u++){const p=l[u];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const p in h)h[p]!==void 0&&(e[p]=h[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const h in i){const p=i[h];e.data.attributes[h]=p.toJSON(e.data)}const s={};let o=!1;for(const h in this.morphAttributes){const p=this.morphAttributes[h],m=[];for(let _=0,v=p.length;_<v;_++){const E=p[_];m.push(E.toJSON(e.data))}m.length>0&&(s[h]=m,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const p in s){const m=s[p];this.setAttribute(p,m.clone(t))}const o=e.morphAttributes;for(const p in o){const m=[],_=o[p];for(let v=0,E=_.length;v<E;v++)m.push(_[v].clone(t));this.morphAttributes[p]=m}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let p=0,m=l.length;p<m;p++){const _=l[p];this.addGroup(_.start,_.count,_.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const nU=new Ki,Yv=new ZA,Ox=new Zg,rU=new Ct,eT=new Ct,tT=new Ct,nT=new Ct,Ik=new Ct,Lx=new Ct,Nx=new Al,Dx=new Al,Bx=new Al,iU=new Ct,sU=new Ct,oU=new Ct,Px=new Ct,Fx=new Ct;class eI extends Bu{constructor(e=new Tv,t=new XT){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,o=i.morphAttributes.position,l=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const u=this.morphTargetInfluences;if(o&&u){Lx.set(0,0,0);for(let h=0,p=o.length;h<p;h++){const m=u[h],_=o[h];m!==0&&(Ik.fromBufferAttribute(_,e),l?Lx.addScaledVector(Ik,m):Lx.addScaledVector(Ik.sub(t),m))}t.add(Lx)}return t}raycast(e,t){const i=this.geometry,s=this.material,o=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Ox.copy(i.boundingSphere),Ox.applyMatrix4(o),Yv.copy(e.ray).recast(e.near),!(Ox.containsPoint(Yv.origin)===!1&&(Yv.intersectSphere(Ox,rU)===null||Yv.origin.distanceToSquared(rU)>(e.far-e.near)**2))&&(nU.copy(o).invert(),Yv.copy(e.ray).applyMatrix4(nU),!(i.boundingBox!==null&&Yv.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Yv)))}_computeIntersections(e,t,i){let s;const o=this.geometry,l=this.material,u=o.index,h=o.attributes.position,p=o.attributes.uv,m=o.attributes.uv1,_=o.attributes.normal,v=o.groups,E=o.drawRange;if(u!==null)if(Array.isArray(l))for(let w=0,x=v.length;w<x;w++){const A=v[w],O=l[A.materialIndex],k=Math.max(A.start,E.start),D=Math.min(u.count,Math.min(A.start+A.count,E.start+E.count));for(let N=k,F=D;N<F;N+=3){const z=u.getX(N),V=u.getX(N+1),U=u.getX(N+2);s=Ux(this,O,e,i,p,m,_,z,V,U),s&&(s.faceIndex=Math.floor(N/3),s.face.materialIndex=A.materialIndex,t.push(s))}}else{const w=Math.max(0,E.start),x=Math.min(u.count,E.start+E.count);for(let A=w,O=x;A<O;A+=3){const k=u.getX(A),D=u.getX(A+1),N=u.getX(A+2);s=Ux(this,l,e,i,p,m,_,k,D,N),s&&(s.faceIndex=Math.floor(A/3),t.push(s))}}else if(h!==void 0)if(Array.isArray(l))for(let w=0,x=v.length;w<x;w++){const A=v[w],O=l[A.materialIndex],k=Math.max(A.start,E.start),D=Math.min(h.count,Math.min(A.start+A.count,E.start+E.count));for(let N=k,F=D;N<F;N+=3){const z=N,V=N+1,U=N+2;s=Ux(this,O,e,i,p,m,_,z,V,U),s&&(s.faceIndex=Math.floor(N/3),s.face.materialIndex=A.materialIndex,t.push(s))}}else{const w=Math.max(0,E.start),x=Math.min(h.count,E.start+E.count);for(let A=w,O=x;A<O;A+=3){const k=A,D=A+1,N=A+2;s=Ux(this,l,e,i,p,m,_,k,D,N),s&&(s.faceIndex=Math.floor(A/3),t.push(s))}}}}function fq(r,e,t,i,s,o,l,u){let h;if(e.side===vQ?h=i.intersectTriangle(l,o,s,!0,u):h=i.intersectTriangle(s,o,l,e.side===aA,u),h===null)return null;Fx.copy(u),Fx.applyMatrix4(r.matrixWorld);const p=t.ray.origin.distanceTo(Fx);return p<t.near||p>t.far?null:{distance:p,point:Fx.clone(),object:r}}function Ux(r,e,t,i,s,o,l,u,h,p){r.getVertexPosition(u,eT),r.getVertexPosition(h,tT),r.getVertexPosition(p,nT);const m=fq(r,e,t,i,eT,tT,nT,Px);if(m){s&&(Nx.fromBufferAttribute(s,u),Dx.fromBufferAttribute(s,h),Bx.fromBufferAttribute(s,p),m.uv=Ug.getInterpolation(Px,eT,tT,nT,Nx,Dx,Bx,new Al)),o&&(Nx.fromBufferAttribute(o,u),Dx.fromBufferAttribute(o,h),Bx.fromBufferAttribute(o,p),m.uv1=Ug.getInterpolation(Px,eT,tT,nT,Nx,Dx,Bx,new Al)),l&&(iU.fromBufferAttribute(l,u),sU.fromBufferAttribute(l,h),oU.fromBufferAttribute(l,p),m.normal=Ug.getInterpolation(Px,eT,tT,nT,iU,sU,oU,new Ct),m.normal.dot(i.direction)>0&&m.normal.multiplyScalar(-1));const _={a:u,b:h,c:p,normal:new Ct,materialIndex:0};Ug.getNormal(eT,tT,nT,_.normal),m.face=_}return m}class EW extends Bu{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ki,this.projectionMatrix=new Ki,this.projectionMatrixInverse=new Ki,this.coordinateSystem=Cy}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const C0=new Ct,aU=new Al,lU=new Al;class JD extends EW{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=MS*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Q$*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return MS*2*Math.atan(Math.tan(Q$*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){C0.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(C0.x,C0.y).multiplyScalar(-e/C0.z),C0.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(C0.x,C0.y).multiplyScalar(-e/C0.z)}getViewSize(e,t){return this.getViewBounds(e,aU,lU),t.subVectors(lU,aU)}setViewOffset(e,t,i,s,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Q$*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,o=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const h=l.fullWidth,p=l.fullHeight;o+=l.offsetX*s/h,t-=l.offsetY*i/p,s*=l.width/h,i*=l.height/p}const u=this.filmOffset;u!==0&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Rk=new Ct,mq=new Ct,gq=new Q_;class rT{constructor(e=new Ct(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=Rk.subVectors(i,t).cross(mq.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Rk),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||gq.getNormalMatrix(e),s=this.coplanarPoint(Rk).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Kv=new Zg,zx=new Ct;class _q{constructor(e=new rT,t=new rT,i=new rT,s=new rT,o=new rT,l=new rT){this.planes=[e,t,i,s,o,l]}set(e,t,i,s,o,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(i),u[3].copy(s),u[4].copy(o),u[5].copy(l),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Cy){const i=this.planes,s=e.elements,o=s[0],l=s[1],u=s[2],h=s[3],p=s[4],m=s[5],_=s[6],v=s[7],E=s[8],w=s[9],x=s[10],A=s[11],O=s[12],k=s[13],D=s[14],N=s[15];if(i[0].setComponents(h-o,v-p,A-E,N-O).normalize(),i[1].setComponents(h+o,v+p,A+E,N+O).normalize(),i[2].setComponents(h+l,v+m,A+w,N+k).normalize(),i[3].setComponents(h-l,v-m,A-w,N-k).normalize(),i[4].setComponents(h-u,v-_,A-x,N-D).normalize(),t===Cy)i[5].setComponents(h+u,v+_,A+x,N+D).normalize();else if(t===TN)i[5].setComponents(u,_,x,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Kv.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Kv.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Kv)}intersectsSprite(e){return Kv.center.set(0,0,0),Kv.radius=.7071067811865476,Kv.applyMatrix4(e.matrixWorld),this.intersectsSphere(Kv)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(zx.x=s.normal.x>0?e.max.x:e.min.x,zx.y=s.normal.y>0?e.max.y:e.min.y,zx.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(zx)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class $W extends EW{constructor(e=-1,t=1,i=1,s=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=i-e,l=i+e,u=s+t,h=s-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=p*this.view.offsetX,l=o+p*this.view.width,u-=m*this.view.offsetY,h=u-m*this.view.height}this.projectionMatrix.makeOrthographic(o,l,u,h,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class vq extends gf{constructor(e,t,i,s,o,l,u,h,p,m){if(m=m!==void 0?m:hk,m!==hk&&m!==D3)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&m===hk&&(i=wQ),i===void 0&&m===D3&&(i=xQ),super(null,s,o,l,u,h,m,i,p),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:xS,this.minFilter=h!==void 0?h:xS,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const yq=new vq(1,1);yq.compareFunction=kQ;class kk extends Bu{constructor(){super(),this.isGroup=!0,this.type="Group"}}class bq{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=bN,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=sg()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return bW("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=sg()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=sg()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Hd=new Ct;class QD{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Hd.fromBufferAttribute(this,t),Hd.applyMatrix4(e),this.setXYZ(t,Hd.x,Hd.y,Hd.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Hd.fromBufferAttribute(this,t),Hd.applyNormalMatrix(e),this.setXYZ(t,Hd.x,Hd.y,Hd.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Hd.fromBufferAttribute(this,t),Hd.transformDirection(e),this.setXYZ(t,Hd.x,Hd.y,Hd.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=qm(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=ao(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=ao(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ao(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ao(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ao(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=qm(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=qm(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=qm(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=qm(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ao(t,this.array),i=ao(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ao(t,this.array),i=ao(i,this.array),s=ao(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=ao(t,this.array),i=ao(i,this.array),s=ao(s,this.array),o=ao(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return new _f(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new QD(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const uU=new Ct,cU=new lm,hU=new lm,Tq=new Ct,dU=new Ki,Hx=new Ct,Ok=new Zg,pU=new Ki,Lk=new ZA;class Eq extends eI{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=N3,this.bindMatrix=new Ki,this.bindMatrixInverse=new Ki,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new q_),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Hx),this.boundingBox.expandByPoint(Hx)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Zg),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Hx),this.boundingSphere.expandByPoint(Hx)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ok.copy(this.boundingSphere),Ok.applyMatrix4(s),e.ray.intersectsSphere(Ok)!==!1&&(pU.copy(s).invert(),Lk.copy(e.ray).applyMatrix4(pU),!(this.boundingBox!==null&&Lk.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Lk)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new lm,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===N3?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===TQ?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;cU.fromBufferAttribute(s.attributes.skinIndex,e),hU.fromBufferAttribute(s.attributes.skinWeight,e),uU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=hU.getComponent(o);if(l!==0){const u=cU.getComponent(o);dU.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),t.addScaledVector(Tq.copy(uU).applyMatrix4(dU),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class SW extends Bu{constructor(){super(),this.isBone=!0,this.type="Bone"}}class wW extends gf{constructor(e=null,t=1,i=1,s,o,l,u,h,p=xS,m=xS,_,v){super(null,l,u,h,p,m,s,o,_,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const fU=new Ki,$q=new Ki;class qD{constructor(e=[],t=[]){this.uuid=sg(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new Ki)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Ki;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const u=e[o]?e[o].matrixWorld:$q;fU.multiplyMatrices(u,t[o]),fU.toArray(i,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new qD(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new wW(t,e,e,jD,VD);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const o=e.bones[i];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new SW),this.bones.push(l),this.boneInverses.push(new Ki().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,o=t.length;s<o;s++){const l=t[s];e.bones.push(l.uuid);const u=i[s];e.boneInverses.push(u.toArray())}return e}}class mU extends _f{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const iT=new Ki,gU=new Ki,Gx=[],_U=new q_,Sq=new Ki,i$=new eI,s$=new Zg;class wq extends eI{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new mU(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,Sq)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new q_),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,iT),_U.copy(e.boundingBox).applyMatrix4(iT),this.boundingBox.union(_U)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Zg),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,iT),s$.copy(e.boundingSphere).applyMatrix4(iT),this.boundingSphere.union(s$)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,s=this.morphTexture.source.data.data,o=i.length+1,l=e*o+1;for(let u=0;u<i.length;u++)i[u]=s[l+u]}raycast(e,t){const i=this.matrixWorld,s=this.count;if(i$.geometry=this.geometry,i$.material=this.material,i$.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),s$.copy(this.boundingSphere),s$.applyMatrix4(i),e.ray.intersectsSphere(s$)!==!1))for(let o=0;o<s;o++){this.getMatrixAt(o,iT),gU.multiplyMatrices(i,iT),i$.matrixWorld=gU,i$.raycast(e,Gx);for(let l=0,u=Gx.length;l<u;l++){const h=Gx[l];h.instanceId=o,h.object=this,t.push(h)}Gx.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new mU(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new wW(new Float32Array(s*this.count),s,this.count,CQ,VD));const o=this.morphTexture.source.data.data;let l=0;for(let p=0;p<i.length;p++)l+=i[p];const u=this.geometry.morphTargetsRelative?1:1-l,h=s*e;o[h]=u,o.set(i,h+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class xW extends ov{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new lc(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const vU=new Ct,yU=new Ct,bU=new Ki,Nk=new ZA,Wx=new Zg;class ZD extends Bu{constructor(e=new Tv,t=new xW){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,o=t.count;s<o;s++)vU.fromBufferAttribute(t,s-1),yU.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=vU.distanceTo(yU);e.setAttribute("lineDistance",new KD(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Wx.copy(i.boundingSphere),Wx.applyMatrix4(s),Wx.radius+=o,e.ray.intersectsSphere(Wx)===!1)return;bU.copy(s).invert(),Nk.copy(e.ray).applyMatrix4(bU);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,p=new Ct,m=new Ct,_=new Ct,v=new Ct,E=this.isLineSegments?2:1,w=i.index,A=i.attributes.position;if(w!==null){const O=Math.max(0,l.start),k=Math.min(w.count,l.start+l.count);for(let D=O,N=k-1;D<N;D+=E){const F=w.getX(D),z=w.getX(D+1);if(p.fromBufferAttribute(A,F),m.fromBufferAttribute(A,z),Nk.distanceSqToSegment(p,m,v,_)>h)continue;v.applyMatrix4(this.matrixWorld);const U=e.ray.origin.distanceTo(v);U<e.near||U>e.far||t.push({distance:U,point:_.clone().applyMatrix4(this.matrixWorld),index:D,face:null,faceIndex:null,object:this})}}else{const O=Math.max(0,l.start),k=Math.min(A.count,l.start+l.count);for(let D=O,N=k-1;D<N;D+=E){if(p.fromBufferAttribute(A,D),m.fromBufferAttribute(A,D+1),Nk.distanceSqToSegment(p,m,v,_)>h)continue;v.applyMatrix4(this.matrixWorld);const z=e.ray.origin.distanceTo(v);z<e.near||z>e.far||t.push({distance:z,point:_.clone().applyMatrix4(this.matrixWorld),index:D,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}const TU=new Ct,EU=new Ct;class xq extends ZD{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,o=t.count;s<o;s+=2)TU.fromBufferAttribute(t,s),EU.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+TU.distanceTo(EU);e.setAttribute("lineDistance",new KD(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Cq extends ZD{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class CW extends ov{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new lc(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const $U=new Ki,$N=new ZA,Vx=new Zg,jx=new Ct;class Mq extends Bu{constructor(e=new Tv,t=new CW){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Vx.copy(i.boundingSphere),Vx.applyMatrix4(s),Vx.radius+=o,e.ray.intersectsSphere(Vx)===!1)return;$U.copy(s).invert(),$N.copy(e.ray).applyMatrix4($U);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,p=i.index,_=i.attributes.position;if(p!==null){const v=Math.max(0,l.start),E=Math.min(p.count,l.start+l.count);for(let w=v,x=E;w<x;w++){const A=p.getX(w);jx.fromBufferAttribute(_,A),SU(jx,A,h,s,e,t,this)}}else{const v=Math.max(0,l.start),E=Math.min(_.count,l.start+l.count);for(let w=v,x=E;w<x;w++)jx.fromBufferAttribute(_,w),SU(jx,w,h,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}function SU(r,e,t,i,s,o,l){const u=$N.distanceSqToPoint(r);if(u<t){const h=new Ct;$N.closestPointToPoint(r,h),h.applyMatrix4(i);const p=s.ray.origin.distanceTo(h);if(p<s.near||p>s.far)return;o.push({distance:p,distanceToRay:Math.sqrt(u),point:h,index:e,face:null,object:l})}}class eB extends ov{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new lc(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=IQ,this.normalScale=new Al(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new lb,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ev extends eB{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Al(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return bd(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new lc(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new lc(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new lc(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function Xx(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function Aq(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function Iq(r){function e(s,o){return r[s]-r[o]}const t=r.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function wU(r,e,t){const i=r.length,s=new r.constructor(i);for(let o=0,l=0;l!==i;++o){const u=t[o]*e;for(let h=0;h!==e;++h)s[l++]=r[u+h]}return s}function MW(r,e,t,i){let s=1,o=r[0];for(;o!==void 0&&o[i]===void 0;)o=r[s++];if(o===void 0)return;let l=o[i];if(l!==void 0)if(Array.isArray(l))do l=o[i],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=r[s++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[i],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=r[s++];while(o!==void 0);else do l=o[i],l!==void 0&&(e.push(o.time),t.push(l)),o=r[s++];while(o!==void 0)}class uw{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],o=t[i-1];e:{t:{let l;n:{r:if(!(e<s)){for(let u=i+2;;){if(s===void 0){if(e<o)break r;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(o=s,s=t[++i],e<s)break t}l=t.length;break n}if(!(e>=o)){const u=t[1];e<u&&(i=2,o=u);for(let h=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===h)break;if(s=o,o=t[--i-1],e>=o)break t}l=i,i=0;break n}break e}for(;i<l;){const u=i+l>>>1;e<t[u]?l=u:i=u+1}if(s=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,s)}return this.interpolate_(i,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s;for(let l=0;l!==s;++l)t[l]=i[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Rq extends uw{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:B3,endingEnd:B3}}intervalChanged_(e,t,i){const s=this.parameterPositions;let o=e-2,l=e+1,u=s[o],h=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case P3:o=e,u=2*t-i;break;case F3:o=s.length-2,u=t+s[o]-s[o+1];break;default:o=e,u=i}if(h===void 0)switch(this.getSettings_().endingEnd){case P3:l=e,h=2*i-t;break;case F3:l=1,h=i+s[1]-s[0];break;default:l=e-1,h=t}const p=(i-t)*.5,m=this.valueSize;this._weightPrev=p/(t-u),this._weightNext=p/(h-i),this._offsetPrev=o*m,this._offsetNext=l*m}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,p=h-u,m=this._offsetPrev,_=this._offsetNext,v=this._weightPrev,E=this._weightNext,w=(i-t)/(s-t),x=w*w,A=x*w,O=-v*A+2*v*x-v*w,k=(1+v)*A+(-1.5-2*v)*x+(-.5+v)*w+1,D=(-1-E)*A+(1.5+E)*x+.5*w,N=E*A-E*x;for(let F=0;F!==u;++F)o[F]=O*l[m+F]+k*l[p+F]+D*l[h+F]+N*l[_+F];return o}}class kq extends uw{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,p=h-u,m=(i-t)/(s-t),_=1-m;for(let v=0;v!==u;++v)o[v]=l[p+v]*_+l[h+v]*m;return o}}class Oq extends uw{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class e_{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Xx(t,this.TimeBufferType),this.values=Xx(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Xx(e.times,Array),values:Xx(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Oq(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new kq(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Rq(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case CS:t=this.InterpolantFactoryMethodDiscrete;break;case y1:t=this.InterpolantFactoryMethodLinear;break;case dk:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return CS;case this.InterpolantFactoryMethodLinear:return y1;case this.InterpolantFactoryMethodSmooth:return dk}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let o=0,l=s-1;for(;o!==s&&i[o]<e;)++o;for(;l!==-1&&i[l]>t;)--l;if(++l,o!==0||l!==s){o>=l&&(l=Math.max(l,1),o=l-1);const u=this.getValueSize();this.times=i.slice(o,l),this.values=this.values.slice(o*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==o;u++){const h=i[u];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,h),e=!1;break}if(l!==null&&l>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,h,l),e=!1;break}l=h}if(s!==void 0&&Aq(s))for(let u=0,h=s.length;u!==h;++u){const p=s[u];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===dk,o=e.length-1;let l=1;for(let u=1;u<o;++u){let h=!1;const p=e[u],m=e[u+1];if(p!==m&&(u!==1||p!==e[0]))if(s)h=!0;else{const _=u*i,v=_-i,E=_+i;for(let w=0;w!==i;++w){const x=t[_+w];if(x!==t[v+w]||x!==t[E+w]){h=!0;break}}}if(h){if(u!==l){e[l]=e[u];const _=u*i,v=l*i;for(let E=0;E!==i;++E)t[v+E]=t[_+E]}++l}}if(o>0){e[l]=e[o];for(let u=o*i,h=l*i,p=0;p!==i;++p)t[h+p]=t[u+p];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}e_.prototype.TimeBufferType=Float32Array;e_.prototype.ValueBufferType=Float32Array;e_.prototype.DefaultInterpolation=y1;class W1 extends e_{}W1.prototype.ValueTypeName="bool";W1.prototype.ValueBufferType=Array;W1.prototype.DefaultInterpolation=CS;W1.prototype.InterpolantFactoryMethodLinear=void 0;W1.prototype.InterpolantFactoryMethodSmooth=void 0;class AW extends e_{}AW.prototype.ValueTypeName="color";class AS extends e_{}AS.prototype.ValueTypeName="number";class Lq extends uw{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=(i-t)/(s-t);let p=e*u;for(let m=p+u;p!==m;p+=4)Ip.slerpFlat(o,0,l,p-u,l,p,h);return o}}class Zy extends e_{InterpolantFactoryMethodLinear(e){return new Lq(this.times,this.values,this.getValueSize(),e)}}Zy.prototype.ValueTypeName="quaternion";Zy.prototype.DefaultInterpolation=y1;Zy.prototype.InterpolantFactoryMethodSmooth=void 0;class V1 extends e_{}V1.prototype.ValueTypeName="string";V1.prototype.ValueBufferType=Array;V1.prototype.DefaultInterpolation=CS;V1.prototype.InterpolantFactoryMethodLinear=void 0;V1.prototype.InterpolantFactoryMethodSmooth=void 0;class IS extends e_{}IS.prototype.ValueTypeName="vector";class Nq{constructor(e,t=-1,i,s=MQ){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=sg(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let l=0,u=i.length;l!==u;++l)t.push(Bq(i[l]).scale(s));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=i.length;o!==l;++o)t.push(e_.toJSON(i[o]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const o=t.length,l=[];for(let u=0;u<o;u++){let h=[],p=[];h.push((u+o-1)%o,u,(u+1)%o),p.push(0,1,0);const m=Iq(h);h=wU(h,1,m),p=wU(p,1,m),!s&&h[0]===0&&(h.push(o),p.push(p[0])),l.push(new AS(".morphTargetInfluences["+t[u].name+"]",h,p).scale(1/i))}return new this(e,-1,l)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},o=/^([\w-]*?)([\d]+)$/;for(let u=0,h=e.length;u<h;u++){const p=e[u],m=p.name.match(o);if(m&&m.length>1){const _=m[1];let v=s[_];v||(s[_]=v=[]),v.push(p)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],t,i));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(_,v,E,w,x){if(E.length!==0){const A=[],O=[];MW(E,A,O,w),A.length!==0&&x.push(new _(v,A,O))}},s=[],o=e.name||"default",l=e.fps||30,u=e.blendMode;let h=e.length||-1;const p=e.hierarchy||[];for(let _=0;_<p.length;_++){const v=p[_].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const E={};let w;for(w=0;w<v.length;w++)if(v[w].morphTargets)for(let x=0;x<v[w].morphTargets.length;x++)E[v[w].morphTargets[x]]=-1;for(const x in E){const A=[],O=[];for(let k=0;k!==v[w].morphTargets.length;++k){const D=v[w];A.push(D.time),O.push(D.morphTarget===x?1:0)}s.push(new AS(".morphTargetInfluence["+x+"]",A,O))}h=E.length*l}else{const E=".bones["+t[_].name+"]";i(IS,E+".position",v,"pos",s),i(Zy,E+".quaternion",v,"rot",s),i(IS,E+".scale",v,"scl",s)}}return s.length===0?null:new this(o,h,s,u)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Dq(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return AS;case"vector":case"vector2":case"vector3":case"vector4":return IS;case"color":return AW;case"quaternion":return Zy;case"bool":case"boolean":return W1;case"string":return V1}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function Bq(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Dq(r.type);if(r.times===void 0){const t=[],i=[];MW(r.keys,t,i,"value"),r.times=t,r.values=i}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const K0={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class Pq{constructor(e,t,i){const s=this;let o=!1,l=0,u=0,h;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(m){u++,o===!1&&s.onStart!==void 0&&s.onStart(m,l,u),o=!0},this.itemEnd=function(m){l++,s.onProgress!==void 0&&s.onProgress(m,l,u),l===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(m){s.onError!==void 0&&s.onError(m)},this.resolveURL=function(m){return h?h(m):m},this.setURLModifier=function(m){return h=m,this},this.addHandler=function(m,_){return p.push(m,_),this},this.removeHandler=function(m){const _=p.indexOf(m);return _!==-1&&p.splice(_,2),this},this.getHandler=function(m){for(let _=0,v=p.length;_<v;_+=2){const E=p[_],w=p[_+1];if(E.global&&(E.lastIndex=0),E.test(m))return w}return null}}}const Fq=new Pq;class ub{constructor(e){this.manager=e!==void 0?e:Fq,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,o){i.load(e,s,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ub.DEFAULT_MATERIAL_NAME="__DEFAULT";const w_={};class Uq extends Error{constructor(e,t){super(e),this.response=t}}class lA extends ub{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=K0.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(w_[e]!==void 0){w_[e].push({onLoad:t,onProgress:i,onError:s});return}w_[e]=[],w_[e].push({onLoad:t,onProgress:i,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,h=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const m=w_[e],_=p.body.getReader(),v=p.headers.get("Content-Length")||p.headers.get("X-File-Size"),E=v?parseInt(v):0,w=E!==0;let x=0;const A=new ReadableStream({start(O){k();function k(){_.read().then(({done:D,value:N})=>{if(D)O.close();else{x+=N.byteLength;const F=new ProgressEvent("progress",{lengthComputable:w,loaded:x,total:E});for(let z=0,V=m.length;z<V;z++){const U=m[z];U.onProgress&&U.onProgress(F)}O.enqueue(N),k()}})}}});return new Response(A)}else throw new Uq(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(h){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(m=>new DOMParser().parseFromString(m,u));case"json":return p.json();default:if(u===void 0)return p.text();{const _=/charset="?([^;"\s]*)"?/i.exec(u),v=_&&_[1]?_[1].toLowerCase():void 0,E=new TextDecoder(v);return p.arrayBuffer().then(w=>E.decode(w))}}}).then(p=>{K0.add(e,p);const m=w_[e];delete w_[e];for(let _=0,v=m.length;_<v;_++){const E=m[_];E.onLoad&&E.onLoad(p)}}).catch(p=>{const m=w_[e];if(m===void 0)throw this.manager.itemError(e),p;delete w_[e];for(let _=0,v=m.length;_<v;_++){const E=m[_];E.onError&&E.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class zq extends ub{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=K0.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u=EN("img");function h(){m(),K0.add(e,this),t&&t(this),o.manager.itemEnd(e)}function p(_){m(),s&&s(_),o.manager.itemError(e),o.manager.itemEnd(e)}function m(){u.removeEventListener("load",h,!1),u.removeEventListener("error",p,!1)}return u.addEventListener("load",h,!1),u.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(e),u.src=e,u}}class Hq extends ub{constructor(e){super(e)}load(e,t,i,s){const o=new gf,l=new zq(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){o.image=u,o.needsUpdate=!0,t!==void 0&&t(o)},i,s),o}}class tB extends Bu{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new lc(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const Dk=new Ki,xU=new Ct,CU=new Ct;class nB{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Al(512,512),this.map=null,this.mapPass=null,this.matrix=new Ki,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new _q,this._frameExtents=new Al(1,1),this._viewportCount=1,this._viewports=[new lm(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;xU.setFromMatrixPosition(e.matrixWorld),t.position.copy(xU),CU.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(CU),t.updateMatrixWorld(),Dk.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Dk),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Dk)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Gq extends nB{constructor(){super(new JD(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=MS*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||s!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=s,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Wq extends tB{constructor(e,t,i=0,s=Math.PI/3,o=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Bu.DEFAULT_UP),this.updateMatrix(),this.target=new Bu,this.distance=i,this.angle=s,this.penumbra=o,this.decay=l,this.map=null,this.shadow=new Gq}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const MU=new Ki,o$=new Ct,Bk=new Ct;class Vq extends nB{constructor(){super(new JD(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Al(4,2),this._viewportCount=6,this._viewports=[new lm(2,1,1,1),new lm(0,1,1,1),new lm(3,1,1,1),new lm(1,1,1,1),new lm(3,0,1,1),new lm(1,0,1,1)],this._cubeDirections=[new Ct(1,0,0),new Ct(-1,0,0),new Ct(0,0,1),new Ct(0,0,-1),new Ct(0,1,0),new Ct(0,-1,0)],this._cubeUps=[new Ct(0,1,0),new Ct(0,1,0),new Ct(0,1,0),new Ct(0,1,0),new Ct(0,0,1),new Ct(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),o$.setFromMatrixPosition(e.matrixWorld),i.position.copy(o$),Bk.copy(i.position),Bk.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Bk),i.updateMatrixWorld(),s.makeTranslation(-o$.x,-o$.y,-o$.z),MU.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(MU)}}class jq extends tB{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new Vq}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Xq extends nB{constructor(){super(new $W(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Yq extends tB{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Bu.DEFAULT_UP),this.updateMatrix(),this.target=new Bu,this.shadow=new Xq}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Fy{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Kq extends ub{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=K0.get(e);if(l!==void 0){if(o.manager.itemStart(e),l.then){l.then(p=>{t&&t(p),o.manager.itemEnd(e)}).catch(p=>{s&&s(p)});return}return setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader;const h=fetch(e,u).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(p){return K0.add(e,p),t&&t(p),o.manager.itemEnd(e),p}).catch(function(p){s&&s(p),K0.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});K0.add(e,h),o.manager.itemStart(e)}}const rB="\\[\\]\\.:\\/",Jq=new RegExp("["+rB+"]","g"),iB="[^"+rB+"]",Qq="[^"+rB.replace("\\.","")+"]",qq=/((?:WC+[\/:])*)/.source.replace("WC",iB),Zq=/(WCOD+)?/.source.replace("WCOD",Qq),eZ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",iB),tZ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",iB),nZ=new RegExp("^"+qq+Zq+eZ+tZ+"$"),rZ=["material","materials","bones","map"];class iZ{constructor(e,t,i){const s=i||lo.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=i.length;s!==o;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class lo{constructor(e,t,i){this.path=t,this.parsedPath=i||lo.parseTrackName(t),this.node=lo.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new lo.Composite(e,t,i):new lo(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Jq,"")}static parseTrackName(e){const t=nZ.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=i.nodeName.substring(s+1);rZ.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===t||u.uuid===t)return u;const h=i(u.children);if(h)return h}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let o=t.propertyIndex;if(e||(e=lo.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let p=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===p){p=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(p!==void 0){if(e[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const l=e[s];if(l===void 0){const p=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(h=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}lo.Composite=iZ;lo.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};lo.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};lo.prototype.GetterByBindingType=[lo.prototype._getValue_direct,lo.prototype._getValue_array,lo.prototype._getValue_arrayElement,lo.prototype._getValue_toArray];lo.prototype.SetterByBindingTypeAndVersioning=[[lo.prototype._setValue_direct,lo.prototype._setValue_direct_setNeedsUpdate,lo.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[lo.prototype._setValue_array,lo.prototype._setValue_array_setNeedsUpdate,lo.prototype._setValue_array_setMatrixWorldNeedsUpdate],[lo.prototype._setValue_arrayElement,lo.prototype._setValue_arrayElement_setNeedsUpdate,lo.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[lo.prototype._setValue_fromArray,lo.prototype._setValue_fromArray_setNeedsUpdate,lo.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:HD}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=HD);const Pk=180/Math.PI,Fk=Math.PI,mM=.079,Uk=2*Math.PI*mM*180/1.5,sZ={sxyz:[0,0,0,0],sxyx:[0,0,1,0],sxzy:[0,1,0,0],sxzx:[0,1,1,0],syzx:[1,0,0,0],syzy:[1,0,1,0],syxz:[1,1,0,0],syxy:[1,1,1,0],szxy:[2,0,0,0],szxz:[2,0,1,0],szyx:[2,1,0,0],szyz:[2,1,1,0],rzyx:[0,0,0,1],rxyx:[0,0,1,1],ryzx:[0,1,0,1],rxzx:[0,1,1,1],rxzy:[1,0,0,1],ryzy:[1,0,1,1],rzxy:[1,1,0,1],ryxy:[1,1,1,1],ryxz:[2,0,0,1],rzxz:[2,0,1,1],rxyz:[2,1,0,1],rzyz:[2,1,1,1]},AU=[1,2,0,1];function Qf(r,e){return r.length<=0?null:i=>{const s=i>r[r.length-1]?i%r[r.length-1]:i;let o=0;for(let l=0;l<r.length&&r[l]<=s;l++)o=l;return e[o]}}const sB=(r,e="szxy")=>{let[t,i,s]=[...r],[o,l,u,h]=[...sZ[e.toLowerCase()]],p=o+1,m=AU[p+l-1]+1,_=AU[p-l]+1;if(h!==0){let V=[t,s];t=V[1],s=V[0]}l!==0&&(i=-1*i),t=t/2,i=i/2,s=s/2;let v=Math.cos(t),E=Math.sin(t),w=Math.cos(i),x=Math.sin(i),A=Math.cos(s),O=Math.sin(s),k=v*A,D=v*O,N=E*A,F=E*O,z=[null,null,null,null];return u!==0?(z[0]=w*(k-F),z[p]=w*(D+N),z[m]=x*(k+F),z[_]=x*(D-N)):(z[0]=w*k+x*F,z[p]=w*N-x*D,z[m]=w*F+x*k,z[_]=w*D-x*N),l!==0&&(z[m]*=-1),z},oZ=r=>({x:r.x*Pk,y:r.y*Pk,z:r.z*Pk}),zk=r=>{let e=oZ(new lb().setFromQuaternion(new Ip(r.x,r.y,r.z,r.w)));return{x:e.x,y:e.y,z:e.z}},IU=(r,e,t)=>{let i=Math.cos(r*.5),s=Math.cos(e*.5),o=Math.cos(t*.5),l=Math.sin(r*.5),u=Math.sin(e*.5),h=Math.sin(t*.5),p=new Ip;return p.w=o*i*s+h*l*u,p.x=o*l*s-h*i*u,p.y=o*i*u+h*l*s,p.z=h*i*s-o*l*u,p};function aZ(r,e){const t={ignoreAttributes:!1,attributeNamePrefix:"@_"},o=new fW.XMLParser(t).parse(r).robot.joint,l={};return(Array.isArray(o)?o:[o]).forEach(h=>{h["@_name"];const p=h.origin,m=h.parent["@_link"],_=h.child["@_link"],v=p["@_xyz"].split(" ").map(Number),E=p["@_rpy"].split(" ").map(Number),w=sB(E,"sxyz");l[_]={frame:m,position:{x:v[0],y:v[1],z:v[2]},rotation:{w:w[0],x:w[1],y:w[2],z:w[3]},scale:{x:1,y:1,z:1}}}),l.base_link={frame:"world",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},console.log(l),l}function lZ(r){const e={ignoreAttributes:!1,attributeNamePrefix:"@_",parseAttributeValue:!0},i=new fW.XMLParser(e).parse(r),s=i.robot.link,o=i.robot.material,l={},u={};return o&&(Array.isArray(o)?o:[o]).forEach(m=>{const _=m["@_name"],v=m.color["@_rgba"].split(" ").map(Number);u[_]={r:v[0],g:v[1],b:v[2],a:v[3]}}),(Array.isArray(s)?s:[s]).forEach(p=>{var w,x;const m=p["@_name"],_=p.visual;let v=null,E=null;if((w=_==null?void 0:_.geometry)!=null&&w.mesh&&(v=_.geometry.mesh["@_filename"],E=(x=_.geometry.mesh["@_scale"])==null?void 0:x.split(" ").map(Number)),m&&_&&v){if(_.material.color){let D=_.material.color["@_rgba"].split(" ").map(Number);D[0],D[1],D[2],D[3]}else _.material["@_name"]&&u[_.material["@_name"]]&&u[_.material["@_name"]];const A=_.origin["@_xyz"].split(" ").map(Number),O=_.origin["@_rpy"].split(" ").map(Number),k=sB(O,"sxyz");l[m]={shape:v,name:m,frame:m,position:{x:A[0],y:A[1],z:A[2]},rotation:{w:k[0],x:k[1],y:k[2],z:k[3]},color:{r:.7*255,g:.7*255,b:.7*255,a:1},scale:E?{x:E[0],y:E[1],z:E[2]}:{x:1,y:1,z:1},highlight:"false"}}}),l}class uZ{constructor(){this._previousTime=0,this._currentTime=0,this._delta=0,this._elapsed=0,this._timescale=1,this._useFixedDelta=!1,this._fixedDelta=16.67,this._usePageVisibilityAPI=typeof document<"u"&&document.hidden!==void 0,this._usePageVisibilityAPI===!0&&(this._pageVisibilityHandler=cZ.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}reset_elapsed(){return this._elapsed=0,this}disableFixedDelta(){return this._useFixedDelta=!1,this}dispose(){return this._usePageVisibilityAPI===!0&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}enableFixedDelta(){return this._useFixedDelta=!0,this}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getFixedDelta(){return this._fixedDelta/1e3}getTimescale(){return this._timescale}reset(){return this._currentTime=this._now(),this}setFixedDelta(e){return this._fixedDelta=e*1e3,this}setTimescale(e){return this._timescale=e,this}update(){return this._useFixedDelta===!0?this._delta=this._fixedDelta:(this._previousTime=this._currentTime,this._currentTime=this._now(),this._delta=this._currentTime-this._previousTime),this._delta*=this._timescale,this._elapsed+=this._delta,this}_now(){return(typeof performance>"u"?Date:performance).now()}}function cZ(){document.hidden===!1&&this.reset()}const hZ={Left:"LEFT_ARM_CONNECTOR_1",Right:"RIGHT_ARM_CONNECTOR_1",Head:"HEAD_1",Base:"base_link"},Gd=r=>hZ[r],Hk={camera_link:{frame:"HEAD_1",position:{x:null,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},imu_sensor_link:{frame:"base_link",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},MIDDLE_LEFT_WHEEL_1:{frame:"base_link",position:{x:-.006691,y:.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},REAR_LEFT_WHEEL_1:{frame:"base_link",position:{x:-.075191,y:.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},REAR_RIGHT_WHEEL_1:{frame:"base_link",position:{x:-.075191,y:-.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},MIDDLE_RIGHT_WHEEL_1:{frame:"base_link",position:{x:-.006691,y:-.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BODY_BASE_CONNECTOR_1:{frame:"base_link",position:{x:-.263414,y:-.061691,z:.210284},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_RIGHT_COVER_1:{frame:"base_link",position:{x:.062309,y:-.045,z:.074646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_LEFT_COVER_1:{frame:"base_link",position:{x:.062309,y:.045,z:.074646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_FRONT_GRILL_1:{frame:"base_link",position:{x:.039109,y:.043,z:.078796},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},Torso_1:{frame:"BODY_BASE_CONNECTOR_1",position:{x:.214514,y:.061691,z:-.095653},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},NECK_GLOBE_BASE_1:{frame:"Torso_1",position:{x:.014661,y:.0228,z:.084122},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_VENT_RIGHT_1:{frame:"HEAD_1",position:{x:.08973,y:-.057013,z:.04831},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_1:{frame:"NECK_GLOBE_BASE_1",position:{x:.015323,y:.001375,z:.238601},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},EYE_LENS_1:{frame:"HEAD_1",position:{x:.016845,y:.061941,z:.034753},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},FACE_1:{frame:"EYE_LENS_1",position:{x:.076086,y:.007237,z:-.003703},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},VISOR_GLASS_1:{frame:"HEAD_1",position:{x:.111798,y:-.024175,z:-.124256},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_VENT_LEFT_1:{frame:"HEAD_1",position:{x:-.042326,y:.038377,z:-.162881},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},LEFT_ARM_1:{frame:"LEFT_ARM_CONNECTOR_1",position:{x:-.013297,y:.005336,z:-.001514},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},RIGHT_ARM_1:{frame:"RIGHT_ARM_CONNECTOR_1",position:{x:-.014964,y:-.001971,z:-287e-6},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},Battery_1:{frame:"base_link",position:{x:-.321414,y:.065009,z:.175134},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},RIGHT_ARM_CONNECTOR_1:{frame:"Torso_1",position:{x:.044751,y:-.066216,z:.057987},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},LEFT_ARM_CONNECTOR_1:{frame:"Torso_1",position:{x:.044751,y:.066216,z:.057987},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},FRONT_LEFT_WHEEL_1:{frame:"base_link",position:{x:.060309,y:.060225,z:.036146},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},FRONT_RIGHT_WHEEL_1:{frame:"base_link",position:{x:.060309,y:-.060225,z:.036146},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BALANCE_WHEEL:{frame:"base_link",position:{x:-.075191,y:0,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},base_link:{frame:"world",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},dZ={base_link:{shape:"package://misty_description/meshes/base_link.stl",name:"base_link",frame:"base_link",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},MIDDLE_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/MIDDLE_LEFT_WHEEL_1.stl",name:"MIDDLE_LEFT_WHEEL_1",frame:"MIDDLE_LEFT_WHEEL_1",position:{x:.006691,y:-.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},REAR_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/REAR_LEFT_WHEEL_1.stl",name:"REAR_LEFT_WHEEL_1",frame:"REAR_LEFT_WHEEL_1",position:{x:.075191,y:-.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},REAR_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/REAR_RIGHT_WHEEL_1.stl",name:"REAR_RIGHT_WHEEL_1",frame:"REAR_RIGHT_WHEEL_1",position:{x:.075191,y:.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},MIDDLE_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/MIDDLE_RIGHT_WHEEL_1.stl",name:"MIDDLE_RIGHT_WHEEL_1",frame:"MIDDLE_RIGHT_WHEEL_1",position:{x:.006691,y:.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BODY_BASE_CONNECTOR_1:{shape:"package://misty_description/meshes/BODY_BASE_CONNECTOR_1.stl",name:"BODY_BASE_CONNECTOR_1",frame:"BODY_BASE_CONNECTOR_1",position:{x:.263414,y:.061691,z:-.210284},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_RIGHT_COVER_1:{shape:"package://misty_description/meshes/BASE_RIGHT_COVER_1.stl",name:"BASE_RIGHT_COVER_1",frame:"BASE_RIGHT_COVER_1",position:{x:-.062309,y:.045,z:-.074646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_LEFT_COVER_1:{shape:"package://misty_description/meshes/BASE_LEFT_COVER_1.stl",name:"BASE_LEFT_COVER_1",frame:"BASE_LEFT_COVER_1",position:{x:-.062309,y:-.045,z:-.074646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_FRONT_GRILL_1:{shape:"package://misty_description/meshes/BASE_FRONT_GRILL_1.stl",name:"BASE_FRONT_GRILL_1",frame:"BASE_FRONT_GRILL_1",position:{x:-.039109,y:-.043,z:-.078796},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Torso_1:{shape:"package://misty_description/meshes/Torso_1.stl",name:"Torso_1",frame:"Torso_1",position:{x:.0489,y:0,z:-.114631},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},NECK_GLOBE_BASE_1:{shape:"package://misty_description/meshes/NECK_GLOBE_BASE_1.stl",name:"NECK_GLOBE_BASE_1",frame:"NECK_GLOBE_BASE_1",position:{x:.034239,y:-.0228,z:-.198753},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_VENT_RIGHT_1:{shape:"package://misty_description/meshes/HEAD_VENT_RIGHT_1.stl",name:"HEAD_VENT_RIGHT_1",frame:"HEAD_VENT_RIGHT_1",position:{x:-.070814,y:.032838,z:-.485664},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_1:{shape:"package://misty_description/meshes/HEAD_1.stl",name:"HEAD_1",frame:"HEAD_1",position:{x:.018916,y:-.024175,z:-.437354},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},EYE_LENS_1:{shape:"package://misty_description/meshes/EYE_LENS_1.stl",name:"EYE_LENS_1",frame:"EYE_LENS_1",position:{x:.002071,y:-.086116,z:-.472107},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FACE_1:{shape:"package://misty_description/meshes/FACE_1.stl",name:"FACE_1",frame:"FACE_1",position:{x:-.074015,y:-.093353,z:-.468404},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},VISOR_GLASS_1:{shape:"package://misty_description/meshes/VISOR_GLASS_1.stl",name:"VISOR_GLASS_1",frame:"VISOR_GLASS_1",position:{x:-.092882,y:0,z:-.313098},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_VENT_LEFT_1:{shape:"package://misty_description/meshes/HEAD_VENT_LEFT_1.stl",name:"HEAD_VENT_LEFT_1",frame:"HEAD_VENT_LEFT_1",position:{x:.061242,y:-.062552,z:-.274473},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},LEFT_ARM_1:{shape:"package://misty_description/meshes/LEFT_ARM_1.stl",name:"LEFT_ARM_1",frame:"LEFT_ARM_1",position:{x:.017446,y:-.071552,z:-.171104},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},RIGHT_ARM_1:{shape:"package://misty_description/meshes/RIGHT_ARM_1.stl",name:"RIGHT_ARM_1",frame:"RIGHT_ARM_1",position:{x:.019113,y:.068187,z:-.172331},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Battery_1:{shape:"package://misty_description/meshes/Battery_1.stl",name:"Battery_1",frame:"Battery_1",position:{x:.321414,y:-.065009,z:-.175134},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},RIGHT_ARM_CONNECTOR_1:{shape:"package://misty_description/meshes/RIGHT_ARM_CONNECTOR_1.stl",name:"RIGHT_ARM_CONNECTOR_1",frame:"RIGHT_ARM_CONNECTOR_1",position:{x:.004149,y:.066216,z:-.172618},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},LEFT_ARM_CONNECTOR_1:{shape:"package://misty_description/meshes/LEFT_ARM_CONNECTOR_1.stl",name:"LEFT_ARM_CONNECTOR_1",frame:"LEFT_ARM_CONNECTOR_1",position:{x:.004149,y:-.066216,z:-.172618},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FRONT_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/FRONT_LEFT_WHEEL_1.stl",name:"FRONT_LEFT_WHEEL_1",frame:"FRONT_LEFT_WHEEL_1",position:{x:-.060309,y:-.060225,z:-.035146},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FRONT_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/FRONT_RIGHT_WHEEL_1.stl",name:"FRONT_RIGHT_WHEEL_1",frame:"FRONT_RIGHT_WHEEL_1",position:{x:-.060309,y:.060225,z:-.035146},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Reset_Button:{shape:"cube",frame:"gizmo",name:"Reset_Button",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},color:{r:255,g:0,b:0,a:1},scale:{x:1,y:1,z:1}}},Oc=rJ((r,e)=>({ip:"",blocks:{},Start:{},lines:{},hulls:{},texts:{},points:{},widgets:{},counter:0,clock:new uZ,tfs:{...Hk},startingTfs:JSON.parse(JSON.stringify(Hk)),endingTfs:JSON.parse(JSON.stringify(Hk)),items:{...dZ},loadFromURDF:t=>r({tfs:{...aZ(t)},items:{...lZ(t)}}),setIp:t=>r({ip:t}),addBlock:(t,i)=>r(s=>({blocks:{...s.blocks,[t]:i}})),removeBlock:t=>r(i=>({blocks:Object.keys(i.blocks).reduce((o,l)=>(t.includes(l)||(o[l]=i.blocks[l]),o),{})})),updateBlock:(t,i)=>r(s=>({blocks:{...s.blocks,[t]:i}})),getBlock:t=>e().blocks[t],addBlocktoStart:(t,i)=>r(s=>({Start:{...s.Start,[t]:i}})),removeBlockfromStart:t=>r(i=>({Start:Object.keys(i.Start).reduce((o,l)=>(l!==t&&(o[l]=i.Start[l]),o),{})})),getBlocksByType:t=>{const i=e().blocks;return Object.values(i).filter(s=>s.type===t)[0]},onPointerMissed:()=>console.log("Missed Click"),onPointerOver:()=>{},onPointerOut:()=>{},resetSim:()=>{const t=JSON.parse(JSON.stringify(e().startingTfs));r({tfs:{...t},endingTfs:{...t}})},animateHead:(t,i,s)=>{},animateBothArms:(t,i,s,o)=>{const l=JSON.parse(JSON.stringify(e().endingTfs));let u=JSON.parse(JSON.stringify(l[Gd("Left")])),h=JSON.parse(JSON.stringify(l[Gd("Left")])),p=JSON.parse(JSON.stringify(l[Gd("Right")])),m=JSON.parse(JSON.stringify(l[Gd("Right")])),_=zk(h.rotation),v=2*Fk*mM*Math.abs(_.y-t);const E=v/(i/100*Uk);let w=zk(h.rotation);v=2*Fk*mM*Math.abs(w.y-s);const x=v/(o/100*Uk);let A={x:0,y:t,z:0};const O=IU(A.x,A.y,A.z);A={x:0,y:s,z:0};const k=IU(A.x,A.y,A.z);let D=[0],N=[],F=[],z=[],V=[],U=[0],ee=[],ne=[],ie=[],se=[];if(h.rotation.w)N.push(h.rotation.w),F.push(h.rotation.x),z.push(h.rotation.y),V.push(h.rotation.z);else{const ge=JSON.parse(JSON.stringify(e().startingTfs)),Ie=JSON.parse(JSON.stringify(ge[Gd("Left")]));N.push(Ie.rotation.w),F.push(Ie.rotation.x),z.push(Ie.rotation.y),V.push(Ie.rotation.z)}if(m.rotation.w)ee.push(m.rotation.w),ne.push(m.rotation.x),ie.push(m.rotation.y),se.push(m.rotation.z);else{const ge=JSON.parse(JSON.stringify(e().startingTfs)),Ie=JSON.parse(JSON.stringify(ge[Gd("Right")]));ee.push(Ie.rotation.w),ne.push(Ie.rotation.x),ie.push(Ie.rotation.y),se.push(Ie.rotation.z)}const fe=600;for(let ge=10;ge<=fe;ge+=10){D.push(E*ge),U.push(x*ge);let Ie=new Ip(F[0],z[0],V[0],N[0]);Ie.slerp(O,ge/fe),N.push(Ie._w),F.push(Ie._x),z.push(Ie._y),V.push(Ie._z);let j=new Ip(ne[0],ie[0],se[0],ee[0]);j.slerp(k,ge/fe),ee.push(j._w),ne.push(j._x),ie.push(j._y),se.push(j._z)}D.push(1/0),U.push(1/0),N.push(O._w),F.push(O._x),z.push(O._y),V.push(O._z),ee.push(k._w),ne.push(k._x),ie.push(k._y),se.push(k._z),u.rotation.w=O._w,u.rotation.x=O._x,u.rotation.y=O._y,u.rotation.z=O._z,p.rotation.w=k._w,p.rotation.x=k._x,p.rotation.y=k._y,p.rotation.z=k._z,h.rotation.w=Qf(D,N),h.rotation.x=Qf(D,F),h.rotation.y=Qf(D,z),h.rotation.z=Qf(D,V),m.rotation.w=Qf(U,ee),m.rotation.x=Qf(U,ne),m.rotation.y=Qf(U,ie),m.rotation.z=Qf(U,se);let ae={};ae[Gd("Left")]={...h},ae[Gd("Right")]={...m};let he={};he[Gd("Left")]={...u},he[Gd("Right")]={...p},r({tfs:{...l,...ae},endingTfs:{...l,...he}})},animateArm:(t,i,s)=>{const o=JSON.parse(JSON.stringify(e().endingTfs));let l=JSON.parse(JSON.stringify(o[Gd(t)])),u=JSON.parse(JSON.stringify(o[Gd(t)]));console.log(JSON.stringify(l)),console.log(JSON.stringify(u));let h=zk(u.rotation);const m=2*Fk*mM*Math.abs(h.y-i)/(s/100*Uk);let _={x:0,y:0,z:i},v=sB([_.x,_.y,_.z]);const E=new Ip(v[1],v[2],v[3],v[0]);let w=[0],x=[],A=[],O=[],k=[];if(u.rotation.w)x.push(u.rotation.w),A.push(u.rotation.x),O.push(u.rotation.y),k.push(u.rotation.z);else{const z=JSON.parse(JSON.stringify(e().startingTfs)),V=JSON.parse(JSON.stringify(z[Gd(t)]));x.push(V.rotation.w),A.push(V.rotation.x),O.push(V.rotation.y),k.push(V.rotation.z)}const D=600;for(let z=10;z<=D;z+=10){w.push(m*z);let V=new Ip(A[0],O[0],k[0],x[0]);V.slerp(E,z/D),x.push(V._w),A.push(V._x),O.push(V._y),k.push(V._z)}w.push(1/0),x.push(E._w),A.push(E._x),O.push(E._y),k.push(E._z),l.rotation.w=E._w,l.rotation.x=E._x,l.rotation.y=E._y,l.rotation.z=E._z,u.rotation.w=Qf(w,x),u.rotation.x=Qf(w,A),u.rotation.y=Qf(w,O),u.rotation.z=Qf(w,k);let N={};N[Gd(t)]={...u};let F={};F[Gd(t)]={...l},r({tfs:{...o,...N},endingTfs:{...o,...F}})}}));let SN="";const Gk=r=>{SN=SN.concat(`
`,r)};function pZ(r,e){if(Object.is(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;if(r instanceof Map&&e instanceof Map){if(r.size!==e.size)return!1;for(const[i,s]of r)if(!Object.is(s,e.get(i)))return!1;return!0}if(r instanceof Set&&e instanceof Set){if(r.size!==e.size)return!1;for(const i of r)if(!e.has(i))return!1;return!0}const t=Object.keys(r);if(t.length!==Object.keys(e).length)return!1;for(const i of t)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(r[i],e[i]))return!1;return!0}const{useRef:fZ}=vr;function Zm(r){const e=fZ();return t=>{const i=r(t);return pZ(e.current,i)?e.current:e.current=i}}const mZ={black:"#000",white:"#fff"},RS=mZ,gZ={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},sT=gZ,_Z={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},oT=_Z,vZ={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},aT=vZ,yZ={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lT=yZ,bZ={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},uT=bZ,TZ={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},a$=TZ,EZ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},$Z=EZ;function eb(r){let e="https://mui.com/production-error/?code="+r;for(let t=1;t<arguments.length;t+=1)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+r+"; visit "+e+" for the full message."}const SZ=Object.freeze(Object.defineProperty({__proto__:null,default:eb},Symbol.toStringTag,{value:"Module"})),cw="$$material";function Qe(){return Qe=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Qe.apply(this,arguments)}const wZ=Object.freeze(Object.defineProperty({__proto__:null,default:Qe},Symbol.toStringTag,{value:"Module"}));function Cr(r,e){if(r==null)return{};var t={},i=Object.keys(r),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}function IW(r){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=r(t)),e[t]}}var xZ=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,CZ=IW(function(r){return xZ.test(r)||r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)<91});function MZ(r){if(r.sheet)return r.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===r)return document.styleSheets[e]}function AZ(r){var e=document.createElement("style");return e.setAttribute("data-emotion",r.key),r.nonce!==void 0&&e.setAttribute("nonce",r.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var IZ=function(){function r(t){var i=this;this._insertTag=function(s){var o;i.tags.length===0?i.insertionPoint?o=i.insertionPoint.nextSibling:i.prepend?o=i.container.firstChild:o=i.before:o=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(s,o),i.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=r.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(AZ(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var o=MZ(s);try{o.insertRule(i,o.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},r}(),md="-ms-",uA="-moz-",Ps="-webkit-",RW="comm",oB="rule",aB="decl",RZ="@import",kW="@keyframes",kZ="@layer",OZ=Math.abs,tI=String.fromCharCode,LZ=Object.assign;function NZ(r,e){return Dh(r,0)^45?(((e<<2^Dh(r,0))<<2^Dh(r,1))<<2^Dh(r,2))<<2^Dh(r,3):0}function OW(r){return r.trim()}function DZ(r,e){return(r=e.exec(r))?r[0]:r}function Fs(r,e,t){return r.replace(e,t)}function wN(r,e){return r.indexOf(e)}function Dh(r,e){return r.charCodeAt(e)|0}function kS(r,e,t){return r.slice(e,t)}function Bg(r){return r.length}function lB(r){return r.length}function Yx(r,e){return e.push(r),r}function BZ(r,e){return r.map(e).join("")}var nI=1,b1=1,LW=0,Dp=0,oc=0,j1="";function rI(r,e,t,i,s,o,l){return{value:r,root:e,parent:t,type:i,props:s,children:o,line:nI,column:b1,length:l,return:""}}function l$(r,e){return LZ(rI("",null,null,"",null,null,0),r,{length:-r.length},e)}function PZ(){return oc}function FZ(){return oc=Dp>0?Dh(j1,--Dp):0,b1--,oc===10&&(b1=1,nI--),oc}function vf(){return oc=Dp<LW?Dh(j1,Dp++):0,b1++,oc===10&&(b1=1,nI++),oc}function Vg(){return Dh(j1,Dp)}function gM(){return Dp}function hw(r,e){return kS(j1,r,e)}function OS(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function NW(r){return nI=b1=1,LW=Bg(j1=r),Dp=0,[]}function DW(r){return j1="",r}function _M(r){return OW(hw(Dp-1,xN(r===91?r+2:r===40?r+1:r)))}function UZ(r){for(;(oc=Vg())&&oc<33;)vf();return OS(r)>2||OS(oc)>3?"":" "}function zZ(r,e){for(;--e&&vf()&&!(oc<48||oc>102||oc>57&&oc<65||oc>70&&oc<97););return hw(r,gM()+(e<6&&Vg()==32&&vf()==32))}function xN(r){for(;vf();)switch(oc){case r:return Dp;case 34:case 39:r!==34&&r!==39&&xN(oc);break;case 40:r===41&&xN(r);break;case 92:vf();break}return Dp}function HZ(r,e){for(;vf()&&r+oc!==57;)if(r+oc===84&&Vg()===47)break;return"/*"+hw(e,Dp-1)+"*"+tI(r===47?r:vf())}function GZ(r){for(;!OS(Vg());)vf();return hw(r,Dp)}function WZ(r){return DW(vM("",null,null,null,[""],r=NW(r),0,[0],r))}function vM(r,e,t,i,s,o,l,u,h){for(var p=0,m=0,_=l,v=0,E=0,w=0,x=1,A=1,O=1,k=0,D="",N=s,F=o,z=i,V=D;A;)switch(w=k,k=vf()){case 40:if(w!=108&&Dh(V,_-1)==58){wN(V+=Fs(_M(k),"&","&\f"),"&\f")!=-1&&(O=-1);break}case 34:case 39:case 91:V+=_M(k);break;case 9:case 10:case 13:case 32:V+=UZ(w);break;case 92:V+=zZ(gM()-1,7);continue;case 47:switch(Vg()){case 42:case 47:Yx(VZ(HZ(vf(),gM()),e,t),h);break;default:V+="/"}break;case 123*x:u[p++]=Bg(V)*O;case 125*x:case 59:case 0:switch(k){case 0:case 125:A=0;case 59+m:O==-1&&(V=Fs(V,/\f/g,"")),E>0&&Bg(V)-_&&Yx(E>32?kU(V+";",i,t,_-1):kU(Fs(V," ","")+";",i,t,_-2),h);break;case 59:V+=";";default:if(Yx(z=RU(V,e,t,p,m,s,u,D,N=[],F=[],_),o),k===123)if(m===0)vM(V,e,z,z,N,o,_,u,F);else switch(v===99&&Dh(V,3)===110?100:v){case 100:case 108:case 109:case 115:vM(r,z,z,i&&Yx(RU(r,z,z,0,0,s,u,D,s,N=[],_),F),s,F,_,u,i?N:F);break;default:vM(V,z,z,z,[""],F,0,u,F)}}p=m=E=0,x=O=1,D=V="",_=l;break;case 58:_=1+Bg(V),E=w;default:if(x<1){if(k==123)--x;else if(k==125&&x++==0&&FZ()==125)continue}switch(V+=tI(k),k*x){case 38:O=m>0?1:(V+="\f",-1);break;case 44:u[p++]=(Bg(V)-1)*O,O=1;break;case 64:Vg()===45&&(V+=_M(vf())),v=Vg(),m=_=Bg(D=V+=GZ(gM())),k++;break;case 45:w===45&&Bg(V)==2&&(x=0)}}return o}function RU(r,e,t,i,s,o,l,u,h,p,m){for(var _=s-1,v=s===0?o:[""],E=lB(v),w=0,x=0,A=0;w<i;++w)for(var O=0,k=kS(r,_+1,_=OZ(x=l[w])),D=r;O<E;++O)(D=OW(x>0?v[O]+" "+k:Fs(k,/&\f/g,v[O])))&&(h[A++]=D);return rI(r,e,t,s===0?oB:u,h,p,m)}function VZ(r,e,t){return rI(r,e,t,RW,tI(PZ()),kS(r,2,-2),0)}function kU(r,e,t,i){return rI(r,e,t,aB,kS(r,0,i),kS(r,i+1,-1),i)}function o1(r,e){for(var t="",i=lB(r),s=0;s<i;s++)t+=e(r[s],s,r,e)||"";return t}function jZ(r,e,t,i){switch(r.type){case kZ:if(r.children.length)break;case RZ:case aB:return r.return=r.return||r.value;case RW:return"";case kW:return r.return=r.value+"{"+o1(r.children,i)+"}";case oB:r.value=r.props.join(",")}return Bg(t=o1(r.children,i))?r.return=r.value+"{"+t+"}":""}function XZ(r){var e=lB(r);return function(t,i,s,o){for(var l="",u=0;u<e;u++)l+=r[u](t,i,s,o)||"";return l}}function YZ(r){return function(e){e.root||(e=e.return)&&r(e)}}var KZ=function(e,t,i){for(var s=0,o=0;s=o,o=Vg(),s===38&&o===12&&(t[i]=1),!OS(o);)vf();return hw(e,Dp)},JZ=function(e,t){var i=-1,s=44;do switch(OS(s)){case 0:s===38&&Vg()===12&&(t[i]=1),e[i]+=KZ(Dp-1,t,i);break;case 2:e[i]+=_M(s);break;case 4:if(s===44){e[++i]=Vg()===58?"&\f":"",t[i]=e[i].length;break}default:e[i]+=tI(s)}while(s=vf());return e},QZ=function(e,t){return DW(JZ(NW(e),t))},OU=new WeakMap,qZ=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,i=e.parent,s=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!OU.get(i))&&!s){OU.set(e,!0);for(var o=[],l=QZ(t,o),u=i.props,h=0,p=0;h<l.length;h++)for(var m=0;m<u.length;m++,p++)e.props[p]=o[h]?l[h].replace(/&\f/g,u[m]):u[m]+" "+l[h]}}},ZZ=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function BW(r,e){switch(NZ(r,e)){case 5103:return Ps+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ps+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return Ps+r+uA+r+md+r+r;case 6828:case 4268:return Ps+r+md+r+r;case 6165:return Ps+r+md+"flex-"+r+r;case 5187:return Ps+r+Fs(r,/(\w+).+(:[^]+)/,Ps+"box-$1$2"+md+"flex-$1$2")+r;case 5443:return Ps+r+md+"flex-item-"+Fs(r,/flex-|-self/,"")+r;case 4675:return Ps+r+md+"flex-line-pack"+Fs(r,/align-content|flex-|-self/,"")+r;case 5548:return Ps+r+md+Fs(r,"shrink","negative")+r;case 5292:return Ps+r+md+Fs(r,"basis","preferred-size")+r;case 6060:return Ps+"box-"+Fs(r,"-grow","")+Ps+r+md+Fs(r,"grow","positive")+r;case 4554:return Ps+Fs(r,/([^-])(transform)/g,"$1"+Ps+"$2")+r;case 6187:return Fs(Fs(Fs(r,/(zoom-|grab)/,Ps+"$1"),/(image-set)/,Ps+"$1"),r,"")+r;case 5495:case 3959:return Fs(r,/(image-set\([^]*)/,Ps+"$1$`$1");case 4968:return Fs(Fs(r,/(.+:)(flex-)?(.*)/,Ps+"box-pack:$3"+md+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ps+r+r;case 4095:case 3583:case 4068:case 2532:return Fs(r,/(.+)-inline(.+)/,Ps+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Bg(r)-1-e>6)switch(Dh(r,e+1)){case 109:if(Dh(r,e+4)!==45)break;case 102:return Fs(r,/(.+:)(.+)-([^]+)/,"$1"+Ps+"$2-$3$1"+uA+(Dh(r,e+3)==108?"$3":"$2-$3"))+r;case 115:return~wN(r,"stretch")?BW(Fs(r,"stretch","fill-available"),e)+r:r}break;case 4949:if(Dh(r,e+1)!==115)break;case 6444:switch(Dh(r,Bg(r)-3-(~wN(r,"!important")&&10))){case 107:return Fs(r,":",":"+Ps)+r;case 101:return Fs(r,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ps+(Dh(r,14)===45?"inline-":"")+"box$3$1"+Ps+"$2$3$1"+md+"$2box$3")+r}break;case 5936:switch(Dh(r,e+11)){case 114:return Ps+r+md+Fs(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return Ps+r+md+Fs(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return Ps+r+md+Fs(r,/[svh]\w+-[tblr]{2}/,"lr")+r}return Ps+r+md+r+r}return r}var eee=function(e,t,i,s){if(e.length>-1&&!e.return)switch(e.type){case aB:e.return=BW(e.value,e.length);break;case kW:return o1([l$(e,{value:Fs(e.value,"@","@"+Ps)})],s);case oB:if(e.length)return BZ(e.props,function(o){switch(DZ(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return o1([l$(e,{props:[Fs(o,/:(read-\w+)/,":"+uA+"$1")]})],s);case"::placeholder":return o1([l$(e,{props:[Fs(o,/:(plac\w+)/,":"+Ps+"input-$1")]}),l$(e,{props:[Fs(o,/:(plac\w+)/,":"+uA+"$1")]}),l$(e,{props:[Fs(o,/:(plac\w+)/,md+"input-$1")]})],s)}return""})}},tee=[eee],PW=function(e){var t=e.key;if(t==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(x){var A=x.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var s=e.stylisPlugins||tee,o={},l,u=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(x){for(var A=x.getAttribute("data-emotion").split(" "),O=1;O<A.length;O++)o[A[O]]=!0;u.push(x)});var h,p=[qZ,ZZ];{var m,_=[jZ,YZ(function(x){m.insert(x)})],v=XZ(p.concat(s,_)),E=function(A){return o1(WZ(A),v)};h=function(A,O,k,D){m=k,E(A?A+"{"+O.styles+"}":O.styles),D&&(w.inserted[O.name]=!0)}}var w={key:t,sheet:new IZ({key:t,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:h};return w.sheet.hydrate(u),w},FW={exports:{}},co={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lh=typeof Symbol=="function"&&Symbol.for,uB=lh?Symbol.for("react.element"):60103,cB=lh?Symbol.for("react.portal"):60106,iI=lh?Symbol.for("react.fragment"):60107,sI=lh?Symbol.for("react.strict_mode"):60108,oI=lh?Symbol.for("react.profiler"):60114,aI=lh?Symbol.for("react.provider"):60109,lI=lh?Symbol.for("react.context"):60110,hB=lh?Symbol.for("react.async_mode"):60111,uI=lh?Symbol.for("react.concurrent_mode"):60111,cI=lh?Symbol.for("react.forward_ref"):60112,hI=lh?Symbol.for("react.suspense"):60113,nee=lh?Symbol.for("react.suspense_list"):60120,dI=lh?Symbol.for("react.memo"):60115,pI=lh?Symbol.for("react.lazy"):60116,ree=lh?Symbol.for("react.block"):60121,iee=lh?Symbol.for("react.fundamental"):60117,see=lh?Symbol.for("react.responder"):60118,oee=lh?Symbol.for("react.scope"):60119;function xf(r){if(typeof r=="object"&&r!==null){var e=r.$$typeof;switch(e){case uB:switch(r=r.type,r){case hB:case uI:case iI:case oI:case sI:case hI:return r;default:switch(r=r&&r.$$typeof,r){case lI:case cI:case pI:case dI:case aI:return r;default:return e}}case cB:return e}}}function UW(r){return xf(r)===uI}co.AsyncMode=hB;co.ConcurrentMode=uI;co.ContextConsumer=lI;co.ContextProvider=aI;co.Element=uB;co.ForwardRef=cI;co.Fragment=iI;co.Lazy=pI;co.Memo=dI;co.Portal=cB;co.Profiler=oI;co.StrictMode=sI;co.Suspense=hI;co.isAsyncMode=function(r){return UW(r)||xf(r)===hB};co.isConcurrentMode=UW;co.isContextConsumer=function(r){return xf(r)===lI};co.isContextProvider=function(r){return xf(r)===aI};co.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===uB};co.isForwardRef=function(r){return xf(r)===cI};co.isFragment=function(r){return xf(r)===iI};co.isLazy=function(r){return xf(r)===pI};co.isMemo=function(r){return xf(r)===dI};co.isPortal=function(r){return xf(r)===cB};co.isProfiler=function(r){return xf(r)===oI};co.isStrictMode=function(r){return xf(r)===sI};co.isSuspense=function(r){return xf(r)===hI};co.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===iI||r===uI||r===oI||r===sI||r===hI||r===nee||typeof r=="object"&&r!==null&&(r.$$typeof===pI||r.$$typeof===dI||r.$$typeof===aI||r.$$typeof===lI||r.$$typeof===cI||r.$$typeof===iee||r.$$typeof===see||r.$$typeof===oee||r.$$typeof===ree)};co.typeOf=xf;FW.exports=co;var aee=FW.exports,zW=aee,lee={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},uee={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},HW={};HW[zW.ForwardRef]=lee;HW[zW.Memo]=uee;var cee=!0;function hee(r,e,t){var i="";return t.split(" ").forEach(function(s){r[s]!==void 0?e.push(r[s]+";"):i+=s+" "}),i}var GW=function(e,t,i){var s=e.key+"-"+t.name;(i===!1||cee===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},WW=function(e,t,i){GW(e,t,i);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var o=t;do e.insert(t===o?"."+s:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function dee(r){for(var e=0,t,i=0,s=r.length;s>=4;++i,s-=4)t=r.charCodeAt(i)&255|(r.charCodeAt(++i)&255)<<8|(r.charCodeAt(++i)&255)<<16|(r.charCodeAt(++i)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(r.charCodeAt(i+2)&255)<<16;case 2:e^=(r.charCodeAt(i+1)&255)<<8;case 1:e^=r.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var pee={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},fee=/[A-Z]|^ms/g,mee=/_EMO_([^_]+?)_([^]*?)_EMO_/g,VW=function(e){return e.charCodeAt(1)===45},LU=function(e){return e!=null&&typeof e!="boolean"},Wk=IW(function(r){return VW(r)?r:r.replace(fee,"-$&").toLowerCase()}),NU=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(mee,function(i,s,o){return Pg={name:s,styles:o,next:Pg},s})}return pee[e]!==1&&!VW(e)&&typeof t=="number"&&t!==0?t+"px":t};function LS(r,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return Pg={name:t.name,styles:t.styles,next:Pg},t.name;if(t.styles!==void 0){var i=t.next;if(i!==void 0)for(;i!==void 0;)Pg={name:i.name,styles:i.styles,next:Pg},i=i.next;var s=t.styles+";";return s}return gee(r,e,t)}case"function":{if(r!==void 0){var o=Pg,l=t(r);return Pg=o,LS(r,e,l)}break}}if(e==null)return t;var u=e[t];return u!==void 0?u:t}function gee(r,e,t){var i="";if(Array.isArray(t))for(var s=0;s<t.length;s++)i+=LS(r,e,t[s])+";";else for(var o in t){var l=t[o];if(typeof l!="object")e!=null&&e[l]!==void 0?i+=o+"{"+e[l]+"}":LU(l)&&(i+=Wk(o)+":"+NU(o,l)+";");else if(Array.isArray(l)&&typeof l[0]=="string"&&(e==null||e[l[0]]===void 0))for(var u=0;u<l.length;u++)LU(l[u])&&(i+=Wk(o)+":"+NU(o,l[u])+";");else{var h=LS(r,e,l);switch(o){case"animation":case"animationName":{i+=Wk(o)+":"+h+";";break}default:i+=o+"{"+h+"}"}}}return i}var DU=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Pg,dB=function(e,t,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,o="";Pg=void 0;var l=e[0];l==null||l.raw===void 0?(s=!1,o+=LS(i,t,l)):o+=l[0];for(var u=1;u<e.length;u++)o+=LS(i,t,e[u]),s&&(o+=l[u]);DU.lastIndex=0;for(var h="",p;(p=DU.exec(o))!==null;)h+="-"+p[1];var m=dee(o)+h;return{name:m,styles:o,next:Pg}},_ee=function(e){return e()},jW=TL.useInsertionEffect?TL.useInsertionEffect:!1,vee=jW||_ee,BU=jW||de.useLayoutEffect,XW=de.createContext(typeof HTMLElement<"u"?PW({key:"css"}):null),yee=XW.Provider,YW=function(e){return de.forwardRef(function(t,i){var s=de.useContext(XW);return e(t,s,i)})},fI=de.createContext({}),bee=YW(function(r,e){var t=r.styles,i=dB([t],void 0,de.useContext(fI)),s=de.useRef();return BU(function(){var o=e.key+"-global",l=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),u=!1,h=document.querySelector('style[data-emotion="'+o+" "+i.name+'"]');return e.sheet.tags.length&&(l.before=e.sheet.tags[0]),h!==null&&(u=!0,h.setAttribute("data-emotion",o),l.hydrate([h])),s.current=[l,u],function(){l.flush()}},[e]),BU(function(){var o=s.current,l=o[0],u=o[1];if(u){o[1]=!1;return}if(i.next!==void 0&&WW(e,i.next,!0),l.tags.length){var h=l.tags[l.tags.length-1].nextElementSibling;l.before=h,l.flush()}e.insert("",i,l,!1)},[e,i.name]),null});function KW(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return dB(e)}var mI=function(){var e=KW.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Tee=CZ,Eee=function(e){return e!=="theme"},PU=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Tee:Eee},FU=function(e,t,i){var s;if(t){var o=t.shouldForwardProp;s=e.__emotion_forwardProp&&o?function(l){return e.__emotion_forwardProp(l)&&o(l)}:o}return typeof s!="function"&&i&&(s=e.__emotion_forwardProp),s},$ee=function(e){var t=e.cache,i=e.serialized,s=e.isStringTag;return GW(t,i,s),vee(function(){return WW(t,i,s)}),null},See=function r(e,t){var i=e.__emotion_real===e,s=i&&e.__emotion_base||e,o,l;t!==void 0&&(o=t.label,l=t.target);var u=FU(e,t,i),h=u||PU(s),p=!h("as");return function(){var m=arguments,_=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&_.push("label:"+o+";"),m[0]==null||m[0].raw===void 0)_.push.apply(_,m);else{_.push(m[0][0]);for(var v=m.length,E=1;E<v;E++)_.push(m[E],m[0][E])}var w=YW(function(x,A,O){var k=p&&x.as||s,D="",N=[],F=x;if(x.theme==null){F={};for(var z in x)F[z]=x[z];F.theme=de.useContext(fI)}typeof x.className=="string"?D=hee(A.registered,N,x.className):x.className!=null&&(D=x.className+" ");var V=dB(_.concat(N),A.registered,F);D+=A.key+"-"+V.name,l!==void 0&&(D+=" "+l);var U=p&&u===void 0?PU(k):h,ee={};for(var ne in x)p&&ne==="as"||U(ne)&&(ee[ne]=x[ne]);return ee.className=D,ee.ref=O,de.createElement(de.Fragment,null,de.createElement($ee,{cache:A,serialized:V,isStringTag:typeof k=="string"}),de.createElement(k,ee))});return w.displayName=o!==void 0?o:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",w.defaultProps=e.defaultProps,w.__emotion_real=w,w.__emotion_base=s,w.__emotion_styles=_,w.__emotion_forwardProp=u,Object.defineProperty(w,"toString",{value:function(){return"."+l}}),w.withComponent=function(x,A){return r(x,Qe({},t,A,{shouldForwardProp:FU(w,A,!0)})).apply(void 0,_)},w}},wee=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],CN=See.bind();wee.forEach(function(r){CN[r]=CN(r)});var JW={exports:{}},xee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Cee=xee,Mee=Cee;function QW(){}function qW(){}qW.resetWarningCache=QW;var Aee=function(){function r(i,s,o,l,u,h){if(h!==Mee){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function e(){return r}var t={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:qW,resetWarningCache:QW};return t.PropTypes=t,t};JW.exports=Aee();var Iee=JW.exports;const oi=U1(Iee);let MN;typeof document=="object"&&(MN=PW({key:"css",prepend:!0}));function Ree(r){const{injectFirst:e,children:t}=r;return e&&MN?Ft.jsx(yee,{value:MN,children:t}):t}function kee(r){return r==null||Object.keys(r).length===0}function ZW(r){const{styles:e,defaultTheme:t={}}=r,i=typeof e=="function"?s=>e(kee(s)?t:s):e;return Ft.jsx(bee,{styles:i})}function pB(r,e){return CN(r,e)}const eV=(r,e)=>{Array.isArray(r.__emotion_styles)&&(r.__emotion_styles=e(r.__emotion_styles))},Oee=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:ZW,StyledEngineProvider:Ree,ThemeContext:fI,css:KW,default:pB,internal_processStyles:eV,keyframes:mI},Symbol.toStringTag,{value:"Module"}));function N_(r){if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function tV(r){if(!N_(r))return r;const e={};return Object.keys(r).forEach(t=>{e[t]=tV(r[t])}),e}function yf(r,e,t={clone:!0}){const i=t.clone?Qe({},r):r;return N_(r)&&N_(e)&&Object.keys(e).forEach(s=>{s!=="__proto__"&&(N_(e[s])&&s in r&&N_(r[s])?i[s]=yf(r[s],e[s],t):t.clone?i[s]=N_(e[s])?tV(e[s]):e[s]:i[s]=e[s])}),i}const Lee=Object.freeze(Object.defineProperty({__proto__:null,default:yf,isPlainObject:N_},Symbol.toStringTag,{value:"Module"})),Nee=["values","unit","step"],Dee=r=>{const e=Object.keys(r).map(t=>({key:t,val:r[t]}))||[];return e.sort((t,i)=>t.val-i.val),e.reduce((t,i)=>Qe({},t,{[i.key]:i.val}),{})};function nV(r){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:i=5}=r,s=Cr(r,Nee),o=Dee(e),l=Object.keys(o);function u(v){return`@media (min-width:${typeof e[v]=="number"?e[v]:v}${t})`}function h(v){return`@media (max-width:${(typeof e[v]=="number"?e[v]:v)-i/100}${t})`}function p(v,E){const w=l.indexOf(E);return`@media (min-width:${typeof e[v]=="number"?e[v]:v}${t}) and (max-width:${(w!==-1&&typeof e[l[w]]=="number"?e[l[w]]:E)-i/100}${t})`}function m(v){return l.indexOf(v)+1<l.length?p(v,l[l.indexOf(v)+1]):u(v)}function _(v){const E=l.indexOf(v);return E===0?u(l[1]):E===l.length-1?h(l[E]):p(v,l[l.indexOf(v)+1]).replace("@media","@media not all and")}return Qe({keys:l,values:o,up:u,down:h,between:p,only:m,not:_,unit:t},s)}const Bee={borderRadius:4},Pee=Bee;function Z$(r,e){return e?yf(r,e,{clone:!1}):r}const fB={xs:0,sm:600,md:900,lg:1200,xl:1536},UU={keys:["xs","sm","md","lg","xl"],up:r=>`@media (min-width:${fB[r]}px)`};function Y_(r,e,t){const i=r.theme||{};if(Array.isArray(e)){const o=i.breakpoints||UU;return e.reduce((l,u,h)=>(l[o.up(o.keys[h])]=t(e[h]),l),{})}if(typeof e=="object"){const o=i.breakpoints||UU;return Object.keys(e).reduce((l,u)=>{if(Object.keys(o.values||fB).indexOf(u)!==-1){const h=o.up(u);l[h]=t(e[u],u)}else{const h=u;l[h]=e[h]}return l},{})}return t(e)}function Fee(r={}){var e;return((e=r.keys)==null?void 0:e.reduce((i,s)=>{const o=r.up(s);return i[o]={},i},{}))||{}}function Uee(r,e){return r.reduce((t,i)=>{const s=t[i];return(!s||Object.keys(s).length===0)&&delete t[i],t},e)}function Hr(r){if(typeof r!="string")throw new Error(eb(7));return r.charAt(0).toUpperCase()+r.slice(1)}const zee=Object.freeze(Object.defineProperty({__proto__:null,default:Hr},Symbol.toStringTag,{value:"Module"}));function gI(r,e,t=!0){if(!e||typeof e!="string")return null;if(r&&r.vars&&t){const i=`vars.${e}`.split(".").reduce((s,o)=>s&&s[o]?s[o]:null,r);if(i!=null)return i}return e.split(".").reduce((i,s)=>i&&i[s]!=null?i[s]:null,r)}function cA(r,e,t,i=t){let s;return typeof r=="function"?s=r(t):Array.isArray(r)?s=r[t]||i:s=gI(r,t)||i,e&&(s=e(s,i,r)),s}function Pu(r){const{prop:e,cssProperty:t=r.prop,themeKey:i,transform:s}=r,o=l=>{if(l[e]==null)return null;const u=l[e],h=l.theme,p=gI(h,i)||{};return Y_(l,u,_=>{let v=cA(p,s,_);return _===v&&typeof _=="string"&&(v=cA(p,s,`${e}${_==="default"?"":Hr(_)}`,_)),t===!1?v:{[t]:v}})};return o.propTypes={},o.filterProps=[e],o}function Hee(r){const e={};return t=>(e[t]===void 0&&(e[t]=r(t)),e[t])}const Gee={m:"margin",p:"padding"},Wee={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},zU={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Vee=Hee(r=>{if(r.length>2)if(zU[r])r=zU[r];else return[r];const[e,t]=r.split(""),i=Gee[e],s=Wee[t]||"";return Array.isArray(s)?s.map(o=>i+o):[i+s]}),mB=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],gB=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...mB,...gB];function dw(r,e,t,i){var s;const o=(s=gI(r,e,!1))!=null?s:t;return typeof o=="number"?l=>typeof l=="string"?l:o*l:Array.isArray(o)?l=>typeof l=="string"?l:o[l]:typeof o=="function"?o:()=>{}}function rV(r){return dw(r,"spacing",8)}function pw(r,e){if(typeof e=="string"||e==null)return e;const t=Math.abs(e),i=r(t);return e>=0?i:typeof i=="number"?-i:`-${i}`}function jee(r,e){return t=>r.reduce((i,s)=>(i[s]=pw(e,t),i),{})}function Xee(r,e,t,i){if(e.indexOf(t)===-1)return null;const s=Vee(t),o=jee(s,i),l=r[t];return Y_(r,l,o)}function iV(r,e){const t=rV(r.theme);return Object.keys(r).map(i=>Xee(r,e,i,t)).reduce(Z$,{})}function tu(r){return iV(r,mB)}tu.propTypes={};tu.filterProps=mB;function nu(r){return iV(r,gB)}nu.propTypes={};nu.filterProps=gB;function Yee(r=8){if(r.mui)return r;const e=rV({spacing:r}),t=(...i)=>(i.length===0?[1]:i).map(o=>{const l=e(o);return typeof l=="number"?`${l}px`:l}).join(" ");return t.mui=!0,t}function _I(...r){const e=r.reduce((i,s)=>(s.filterProps.forEach(o=>{i[o]=s}),i),{}),t=i=>Object.keys(i).reduce((s,o)=>e[o]?Z$(s,e[o](i)):s,{});return t.propTypes={},t.filterProps=r.reduce((i,s)=>i.concat(s.filterProps),[]),t}function um(r){return typeof r!="number"?r:`${r}px solid`}function gm(r,e){return Pu({prop:r,themeKey:"borders",transform:e})}const Kee=gm("border",um),Jee=gm("borderTop",um),Qee=gm("borderRight",um),qee=gm("borderBottom",um),Zee=gm("borderLeft",um),ete=gm("borderColor"),tte=gm("borderTopColor"),nte=gm("borderRightColor"),rte=gm("borderBottomColor"),ite=gm("borderLeftColor"),ste=gm("outline",um),ote=gm("outlineColor"),vI=r=>{if(r.borderRadius!==void 0&&r.borderRadius!==null){const e=dw(r.theme,"shape.borderRadius",4),t=i=>({borderRadius:pw(e,i)});return Y_(r,r.borderRadius,t)}return null};vI.propTypes={};vI.filterProps=["borderRadius"];_I(Kee,Jee,Qee,qee,Zee,ete,tte,nte,rte,ite,vI,ste,ote);const yI=r=>{if(r.gap!==void 0&&r.gap!==null){const e=dw(r.theme,"spacing",8),t=i=>({gap:pw(e,i)});return Y_(r,r.gap,t)}return null};yI.propTypes={};yI.filterProps=["gap"];const bI=r=>{if(r.columnGap!==void 0&&r.columnGap!==null){const e=dw(r.theme,"spacing",8),t=i=>({columnGap:pw(e,i)});return Y_(r,r.columnGap,t)}return null};bI.propTypes={};bI.filterProps=["columnGap"];const TI=r=>{if(r.rowGap!==void 0&&r.rowGap!==null){const e=dw(r.theme,"spacing",8),t=i=>({rowGap:pw(e,i)});return Y_(r,r.rowGap,t)}return null};TI.propTypes={};TI.filterProps=["rowGap"];const ate=Pu({prop:"gridColumn"}),lte=Pu({prop:"gridRow"}),ute=Pu({prop:"gridAutoFlow"}),cte=Pu({prop:"gridAutoColumns"}),hte=Pu({prop:"gridAutoRows"}),dte=Pu({prop:"gridTemplateColumns"}),pte=Pu({prop:"gridTemplateRows"}),fte=Pu({prop:"gridTemplateAreas"}),mte=Pu({prop:"gridArea"});_I(yI,bI,TI,ate,lte,ute,cte,hte,dte,pte,fte,mte);function a1(r,e){return e==="grey"?e:r}const gte=Pu({prop:"color",themeKey:"palette",transform:a1}),_te=Pu({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:a1}),vte=Pu({prop:"backgroundColor",themeKey:"palette",transform:a1});_I(gte,_te,vte);function hf(r){return r<=1&&r!==0?`${r*100}%`:r}const yte=Pu({prop:"width",transform:hf}),_B=r=>{if(r.maxWidth!==void 0&&r.maxWidth!==null){const e=t=>{var i,s;const o=((i=r.theme)==null||(i=i.breakpoints)==null||(i=i.values)==null?void 0:i[t])||fB[t];return o?((s=r.theme)==null||(s=s.breakpoints)==null?void 0:s.unit)!=="px"?{maxWidth:`${o}${r.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:hf(t)}};return Y_(r,r.maxWidth,e)}return null};_B.filterProps=["maxWidth"];const bte=Pu({prop:"minWidth",transform:hf}),Tte=Pu({prop:"height",transform:hf}),Ete=Pu({prop:"maxHeight",transform:hf}),$te=Pu({prop:"minHeight",transform:hf});Pu({prop:"size",cssProperty:"width",transform:hf});Pu({prop:"size",cssProperty:"height",transform:hf});const Ste=Pu({prop:"boxSizing"});_I(yte,_B,bte,Tte,Ete,$te,Ste);const wte={border:{themeKey:"borders",transform:um},borderTop:{themeKey:"borders",transform:um},borderRight:{themeKey:"borders",transform:um},borderBottom:{themeKey:"borders",transform:um},borderLeft:{themeKey:"borders",transform:um},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:um},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:vI},color:{themeKey:"palette",transform:a1},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:a1},backgroundColor:{themeKey:"palette",transform:a1},p:{style:nu},pt:{style:nu},pr:{style:nu},pb:{style:nu},pl:{style:nu},px:{style:nu},py:{style:nu},padding:{style:nu},paddingTop:{style:nu},paddingRight:{style:nu},paddingBottom:{style:nu},paddingLeft:{style:nu},paddingX:{style:nu},paddingY:{style:nu},paddingInline:{style:nu},paddingInlineStart:{style:nu},paddingInlineEnd:{style:nu},paddingBlock:{style:nu},paddingBlockStart:{style:nu},paddingBlockEnd:{style:nu},m:{style:tu},mt:{style:tu},mr:{style:tu},mb:{style:tu},ml:{style:tu},mx:{style:tu},my:{style:tu},margin:{style:tu},marginTop:{style:tu},marginRight:{style:tu},marginBottom:{style:tu},marginLeft:{style:tu},marginX:{style:tu},marginY:{style:tu},marginInline:{style:tu},marginInlineStart:{style:tu},marginInlineEnd:{style:tu},marginBlock:{style:tu},marginBlockStart:{style:tu},marginBlockEnd:{style:tu},displayPrint:{cssProperty:!1,transform:r=>({"@media print":{display:r}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:yI},rowGap:{style:TI},columnGap:{style:bI},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:hf},maxWidth:{style:_B},minWidth:{transform:hf},height:{transform:hf},maxHeight:{transform:hf},minHeight:{transform:hf},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},fw=wte;function xte(...r){const e=r.reduce((i,s)=>i.concat(Object.keys(s)),[]),t=new Set(e);return r.every(i=>t.size===Object.keys(i).length)}function Cte(r,e){return typeof r=="function"?r(e):r}function sV(){function r(t,i,s,o){const l={[t]:i,theme:s},u=o[t];if(!u)return{[t]:i};const{cssProperty:h=t,themeKey:p,transform:m,style:_}=u;if(i==null)return null;if(p==="typography"&&i==="inherit")return{[t]:i};const v=gI(s,p)||{};return _?_(l):Y_(l,i,w=>{let x=cA(v,m,w);return w===x&&typeof w=="string"&&(x=cA(v,m,`${t}${w==="default"?"":Hr(w)}`,w)),h===!1?x:{[h]:x}})}function e(t){var i;const{sx:s,theme:o={}}=t||{};if(!s)return null;const l=(i=o.unstable_sxConfig)!=null?i:fw;function u(h){let p=h;if(typeof h=="function")p=h(o);else if(typeof h!="object")return h;if(!p)return null;const m=Fee(o.breakpoints),_=Object.keys(m);let v=m;return Object.keys(p).forEach(E=>{const w=Cte(p[E],o);if(w!=null)if(typeof w=="object")if(l[E])v=Z$(v,r(E,w,o,l));else{const x=Y_({theme:o},w,A=>({[E]:A}));xte(x,w)?v[E]=e({sx:w,theme:o}):v=Z$(v,x)}else v=Z$(v,r(E,w,o,l))}),Uee(_,v)}return Array.isArray(s)?s.map(u):u(s)}return e}const oV=sV();oV.filterProps=["sx"];const mw=oV;function aV(r,e){const t=this;return t.vars&&typeof t.getColorSchemeSelector=="function"?{[t.getColorSchemeSelector(r).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:t.palette.mode===r?e:{}}const Mte=["breakpoints","palette","spacing","shape"];function gw(r={},...e){const{breakpoints:t={},palette:i={},spacing:s,shape:o={}}=r,l=Cr(r,Mte),u=nV(t),h=Yee(s);let p=yf({breakpoints:u,direction:"ltr",components:{},palette:Qe({mode:"light"},i),spacing:h,shape:Qe({},Pee,o)},l);return p.applyStyles=aV,p=e.reduce((m,_)=>yf(m,_),p),p.unstable_sxConfig=Qe({},fw,l==null?void 0:l.unstable_sxConfig),p.unstable_sx=function(_){return mw({sx:_,theme:this})},p}const Ate=Object.freeze(Object.defineProperty({__proto__:null,default:gw,private_createBreakpoints:nV,unstable_applyStyles:aV},Symbol.toStringTag,{value:"Module"}));function Ite(r){return Object.keys(r).length===0}function Rte(r=null){const e=de.useContext(fI);return!e||Ite(e)?r:e}const kte=gw();function EI(r=kte){return Rte(r)}function Ote({styles:r,themeId:e,defaultTheme:t={}}){const i=EI(t),s=typeof r=="function"?r(e&&i[e]||i):r;return Ft.jsx(ZW,{styles:s})}const Lte=["sx"],Nte=r=>{var e,t;const i={systemProps:{},otherProps:{}},s=(e=r==null||(t=r.theme)==null?void 0:t.unstable_sxConfig)!=null?e:fw;return Object.keys(r).forEach(o=>{s[o]?i.systemProps[o]=r[o]:i.otherProps[o]=r[o]}),i};function vB(r){const{sx:e}=r,t=Cr(r,Lte),{systemProps:i,otherProps:s}=Nte(t);let o;return Array.isArray(e)?o=[i,...e]:typeof e=="function"?o=(...l)=>{const u=e(...l);return N_(u)?Qe({},i,u):i}:o=Qe({},i,e),Qe({},s,{sx:o})}const Dte=Object.freeze(Object.defineProperty({__proto__:null,default:mw,extendSxProp:vB,unstable_createStyleFunctionSx:sV,unstable_defaultSxConfig:fw},Symbol.toStringTag,{value:"Module"})),HU=r=>r,Bte=()=>{let r=HU;return{configure(e){r=e},generate(e){return r(e)},reset(){r=HU}}},Pte=Bte(),yB=Pte;function lV(r){var e,t,i="";if(typeof r=="string"||typeof r=="number")i+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=lV(r[e]))&&(i&&(i+=" "),i+=t)}else for(t in r)r[t]&&(i&&(i+=" "),i+=t);return i}function Ni(){for(var r,e,t=0,i="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=lV(r))&&(i&&(i+=" "),i+=e);return i}const Fte=["className","component"];function Ute(r={}){const{themeId:e,defaultTheme:t,defaultClassName:i="MuiBox-root",generateClassName:s}=r,o=pB("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(mw);return de.forwardRef(function(h,p){const m=EI(t),_=vB(h),{className:v,component:E="div"}=_,w=Cr(_,Fte);return Ft.jsx(o,Qe({as:E,ref:p,className:Ni(v,s?s(i):i),theme:e&&m[e]||m},w))})}const zte={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function el(r,e,t="Mui"){const i=zte[e];return i?`${t}-${i}`:`${yB.generate(r)}-${e}`}function tl(r,e,t="Mui"){const i={};return e.forEach(s=>{i[s]=el(r,s,t)}),i}var uV={exports:{}},ho={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bB=Symbol.for("react.element"),TB=Symbol.for("react.portal"),$I=Symbol.for("react.fragment"),SI=Symbol.for("react.strict_mode"),wI=Symbol.for("react.profiler"),xI=Symbol.for("react.provider"),CI=Symbol.for("react.context"),Hte=Symbol.for("react.server_context"),MI=Symbol.for("react.forward_ref"),AI=Symbol.for("react.suspense"),II=Symbol.for("react.suspense_list"),RI=Symbol.for("react.memo"),kI=Symbol.for("react.lazy"),Gte=Symbol.for("react.offscreen"),cV;cV=Symbol.for("react.module.reference");function _m(r){if(typeof r=="object"&&r!==null){var e=r.$$typeof;switch(e){case bB:switch(r=r.type,r){case $I:case wI:case SI:case AI:case II:return r;default:switch(r=r&&r.$$typeof,r){case Hte:case CI:case MI:case kI:case RI:case xI:return r;default:return e}}case TB:return e}}}ho.ContextConsumer=CI;ho.ContextProvider=xI;ho.Element=bB;ho.ForwardRef=MI;ho.Fragment=$I;ho.Lazy=kI;ho.Memo=RI;ho.Portal=TB;ho.Profiler=wI;ho.StrictMode=SI;ho.Suspense=AI;ho.SuspenseList=II;ho.isAsyncMode=function(){return!1};ho.isConcurrentMode=function(){return!1};ho.isContextConsumer=function(r){return _m(r)===CI};ho.isContextProvider=function(r){return _m(r)===xI};ho.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===bB};ho.isForwardRef=function(r){return _m(r)===MI};ho.isFragment=function(r){return _m(r)===$I};ho.isLazy=function(r){return _m(r)===kI};ho.isMemo=function(r){return _m(r)===RI};ho.isPortal=function(r){return _m(r)===TB};ho.isProfiler=function(r){return _m(r)===wI};ho.isStrictMode=function(r){return _m(r)===SI};ho.isSuspense=function(r){return _m(r)===AI};ho.isSuspenseList=function(r){return _m(r)===II};ho.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===$I||r===wI||r===SI||r===AI||r===II||r===Gte||typeof r=="object"&&r!==null&&(r.$$typeof===kI||r.$$typeof===RI||r.$$typeof===xI||r.$$typeof===CI||r.$$typeof===MI||r.$$typeof===cV||r.getModuleId!==void 0)};ho.typeOf=_m;uV.exports=ho;var GU=uV.exports;const Wte=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function hV(r){const e=`${r}`.match(Wte);return e&&e[1]||""}function dV(r,e=""){return r.displayName||r.name||hV(r)||e}function WU(r,e,t){const i=dV(e);return r.displayName||(i!==""?`${t}(${i})`:t)}function Vte(r){if(r!=null){if(typeof r=="string")return r;if(typeof r=="function")return dV(r,"Component");if(typeof r=="object")switch(r.$$typeof){case GU.ForwardRef:return WU(r,r.render,"ForwardRef");case GU.Memo:return WU(r,r.type,"memo");default:return}}}const jte=Object.freeze(Object.defineProperty({__proto__:null,default:Vte,getFunctionName:hV},Symbol.toStringTag,{value:"Module"})),Xte=["ownerState"],Yte=["variants"],Kte=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Jte(r){return Object.keys(r).length===0}function Qte(r){return typeof r=="string"&&r.charCodeAt(0)>96}function Vk(r){return r!=="ownerState"&&r!=="theme"&&r!=="sx"&&r!=="as"}const qte=gw(),Zte=r=>r&&r.charAt(0).toLowerCase()+r.slice(1);function Kx({defaultTheme:r,theme:e,themeId:t}){return Jte(e)?r:e[t]||e}function ene(r){return r?(e,t)=>t[r]:null}function yM(r,e){let{ownerState:t}=e,i=Cr(e,Xte);const s=typeof r=="function"?r(Qe({ownerState:t},i)):r;if(Array.isArray(s))return s.flatMap(o=>yM(o,Qe({ownerState:t},i)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:o=[]}=s;let u=Cr(s,Yte);return o.forEach(h=>{let p=!0;typeof h.props=="function"?p=h.props(Qe({ownerState:t},i,t)):Object.keys(h.props).forEach(m=>{(t==null?void 0:t[m])!==h.props[m]&&i[m]!==h.props[m]&&(p=!1)}),p&&(Array.isArray(u)||(u=[u]),u.push(typeof h.style=="function"?h.style(Qe({ownerState:t},i,t)):h.style))}),u}return s}function tne(r={}){const{themeId:e,defaultTheme:t=qte,rootShouldForwardProp:i=Vk,slotShouldForwardProp:s=Vk}=r,o=l=>mw(Qe({},l,{theme:Kx(Qe({},l,{defaultTheme:t,themeId:e}))}));return o.__mui_systemSx=!0,(l,u={})=>{eV(l,F=>F.filter(z=>!(z!=null&&z.__mui_systemSx)));const{name:h,slot:p,skipVariantsResolver:m,skipSx:_,overridesResolver:v=ene(Zte(p))}=u,E=Cr(u,Kte),w=m!==void 0?m:p&&p!=="Root"&&p!=="root"||!1,x=_||!1;let A,O=Vk;p==="Root"||p==="root"?O=i:p?O=s:Qte(l)&&(O=void 0);const k=pB(l,Qe({shouldForwardProp:O,label:A},E)),D=F=>typeof F=="function"&&F.__emotion_real!==F||N_(F)?z=>yM(F,Qe({},z,{theme:Kx({theme:z.theme,defaultTheme:t,themeId:e})})):F,N=(F,...z)=>{let V=D(F);const U=z?z.map(D):[];h&&v&&U.push(ie=>{const se=Kx(Qe({},ie,{defaultTheme:t,themeId:e}));if(!se.components||!se.components[h]||!se.components[h].styleOverrides)return null;const fe=se.components[h].styleOverrides,ae={};return Object.entries(fe).forEach(([he,ge])=>{ae[he]=yM(ge,Qe({},ie,{theme:se}))}),v(ie,ae)}),h&&!w&&U.push(ie=>{var se;const fe=Kx(Qe({},ie,{defaultTheme:t,themeId:e})),ae=fe==null||(se=fe.components)==null||(se=se[h])==null?void 0:se.variants;return yM({variants:ae},Qe({},ie,{theme:fe}))}),x||U.push(o);const ee=U.length-z.length;if(Array.isArray(F)&&ee>0){const ie=new Array(ee).fill("");V=[...F,...ie],V.raw=[...F.raw,...ie]}const ne=k(V,...U);return l.muiName&&(ne.muiName=l.muiName),ne};return k.withConfig&&(N.withConfig=k.withConfig),N}}const nne=tne();function EB(r,e){const t=Qe({},e);return Object.keys(r).forEach(i=>{if(i.toString().match(/^(components|slots)$/))t[i]=Qe({},r[i],t[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const s=r[i]||{},o=e[i];t[i]={},!o||!Object.keys(o)?t[i]=s:!s||!Object.keys(s)?t[i]=o:(t[i]=Qe({},o),Object.keys(s).forEach(l=>{t[i][l]=EB(s[l],o[l])}))}else t[i]===void 0&&(t[i]=r[i])}),t}function rne(r){const{theme:e,name:t,props:i}=r;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?i:EB(e.components[t].defaultProps,i)}function pV({props:r,name:e,defaultTheme:t,themeId:i}){let s=EI(t);return i&&(s=s[i]||s),rne({theme:s,name:e,props:r})}const ine=typeof window<"u"?de.useLayoutEffect:de.useEffect,hv=ine;function sne(r,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(r,t))}const one=Object.freeze(Object.defineProperty({__proto__:null,default:sne},Symbol.toStringTag,{value:"Module"}));function AN(...r){return r.reduce((e,t)=>t==null?e:function(...s){e.apply(this,s),t.apply(this,s)},()=>{})}function $B(r,e=166){let t;function i(...s){const o=()=>{r.apply(this,s)};clearTimeout(t),t=setTimeout(o,e)}return i.clear=()=>{clearTimeout(t)},i}function ane(r,e){return()=>null}function bM(r,e){var t,i;return de.isValidElement(r)&&e.indexOf((t=r.type.muiName)!=null?t:(i=r.type)==null||(i=i._payload)==null||(i=i.value)==null?void 0:i.muiName)!==-1}function Np(r){return r&&r.ownerDocument||document}function dv(r){return Np(r).defaultView||window}function lne(r,e){return()=>null}function hA(r,e){typeof r=="function"?r(e):r&&(r.current=e)}let VU=0;function une(r){const[e,t]=de.useState(r),i=r||e;return de.useEffect(()=>{e==null&&(VU+=1,t(`mui-${VU}`))},[e]),i}const jU=TL.useId;function SB(r){if(jU!==void 0){const e=jU();return r??e}return une(r)}function cne(r,e,t,i,s){return null}function IN({controlled:r,default:e,name:t,state:i="value"}){const{current:s}=de.useRef(r!==void 0),[o,l]=de.useState(e),u=s?r:o,h=de.useCallback(p=>{s||l(p)},[]);return[u,h]}function My(r){const e=de.useRef(r);return hv(()=>{e.current=r}),de.useRef((...t)=>(0,e.current)(...t)).current}function ep(...r){return de.useMemo(()=>r.every(e=>e==null)?null:e=>{r.forEach(t=>{hA(t,e)})},r)}const XU={};function hne(r,e){const t=de.useRef(XU);return t.current===XU&&(t.current=r(e)),t}const dne=[];function pne(r){de.useEffect(r,dne)}class OI{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new OI}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function fV(){const r=hne(OI.create).current;return pne(r.disposeEffect),r}let LI=!0,RN=!1;const fne=new OI,mne={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function gne(r){const{type:e,tagName:t}=r;return!!(t==="INPUT"&&mne[e]&&!r.readOnly||t==="TEXTAREA"&&!r.readOnly||r.isContentEditable)}function _ne(r){r.metaKey||r.altKey||r.ctrlKey||(LI=!0)}function jk(){LI=!1}function vne(){this.visibilityState==="hidden"&&RN&&(LI=!0)}function yne(r){r.addEventListener("keydown",_ne,!0),r.addEventListener("mousedown",jk,!0),r.addEventListener("pointerdown",jk,!0),r.addEventListener("touchstart",jk,!0),r.addEventListener("visibilitychange",vne,!0)}function bne(r){const{target:e}=r;try{return e.matches(":focus-visible")}catch{}return LI||gne(e)}function mV(){const r=de.useCallback(s=>{s!=null&&yne(s.ownerDocument)},[]),e=de.useRef(!1);function t(){return e.current?(RN=!0,fne.start(100,()=>{RN=!1}),e.current=!1,!0):!1}function i(s){return bne(s)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:i,onBlur:t,ref:r}}function gV(r){const e=r.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function kl(r,e,t=void 0){const i={};return Object.keys(r).forEach(s=>{i[s]=r[s].reduce((o,l)=>{if(l){const u=e(l);u!==""&&o.push(u),t&&t[l]&&o.push(t[l])}return o},[]).join(" ")}),i}const Tne=de.createContext(),Ene=()=>{const r=de.useContext(Tne);return r??!1};function NS(r){"@babel/helpers - typeof";return NS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NS(r)}function $ne(r,e){if(NS(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e||"default");if(NS(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Sne(r){var e=$ne(r,"string");return NS(e)=="symbol"?e:e+""}const wne=["className","component","disableGutters","fixed","maxWidth","classes"],xne=gw(),Cne=nne("div",{name:"MuiContainer",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[`maxWidth${Hr(String(t.maxWidth))}`],t.fixed&&e.fixed,t.disableGutters&&e.disableGutters]}}),Mne=r=>pV({props:r,name:"MuiContainer",defaultTheme:xne}),Ane=(r,e)=>{const t=h=>el(e,h),{classes:i,fixed:s,disableGutters:o,maxWidth:l}=r,u={root:["root",l&&`maxWidth${Hr(String(l))}`,s&&"fixed",o&&"disableGutters"]};return kl(u,t,i)};function Ine(r={}){const{createStyledComponent:e=Cne,useThemeProps:t=Mne,componentName:i="MuiContainer"}=r,s=e(({theme:l,ownerState:u})=>Qe({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!u.disableGutters&&{paddingLeft:l.spacing(2),paddingRight:l.spacing(2),[l.breakpoints.up("sm")]:{paddingLeft:l.spacing(3),paddingRight:l.spacing(3)}}),({theme:l,ownerState:u})=>u.fixed&&Object.keys(l.breakpoints.values).reduce((h,p)=>{const m=p,_=l.breakpoints.values[m];return _!==0&&(h[l.breakpoints.up(m)]={maxWidth:`${_}${l.breakpoints.unit}`}),h},{}),({theme:l,ownerState:u})=>Qe({},u.maxWidth==="xs"&&{[l.breakpoints.up("xs")]:{maxWidth:Math.max(l.breakpoints.values.xs,444)}},u.maxWidth&&u.maxWidth!=="xs"&&{[l.breakpoints.up(u.maxWidth)]:{maxWidth:`${l.breakpoints.values[u.maxWidth]}${l.breakpoints.unit}`}}));return de.forwardRef(function(u,h){const p=t(u),{className:m,component:_="div",disableGutters:v=!1,fixed:E=!1,maxWidth:w="lg"}=p,x=Cr(p,wne),A=Qe({},p,{component:_,disableGutters:v,fixed:E,maxWidth:w}),O=Ane(A,i);return Ft.jsx(s,Qe({as:_,ownerState:A,className:Ni(O.root,m),ref:h},x))})}function Rne(r,e){return Qe({toolbar:{minHeight:56,[r.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[r.up("sm")]:{minHeight:64}}},e)}var Fu={},_V={exports:{}};(function(r){function e(t){return t&&t.__esModule?t:{default:t}}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(_V);var wB=_V.exports;const kne=qg(SZ),One=qg(one);var vV=wB;Object.defineProperty(Fu,"__esModule",{value:!0});var J0=Fu.alpha=EV;Fu.blend=jne;Fu.colorChannel=void 0;var Lne=Fu.darken=CB;Fu.decomposeColor=fm;Fu.emphasize=$V;var Nne=Fu.getContrastRatio=zne;Fu.getLuminance=dA;Fu.hexToRgb=yV;Fu.hslToRgb=TV;var Dne=Fu.lighten=MB;Fu.private_safeAlpha=Hne;Fu.private_safeColorChannel=void 0;Fu.private_safeDarken=Gne;Fu.private_safeEmphasize=Vne;Fu.private_safeLighten=Wne;Fu.recomposeColor=X1;Fu.rgbToHex=Une;var YU=vV(kne),Bne=vV(One);function xB(r,e=0,t=1){return(0,Bne.default)(r,e,t)}function yV(r){r=r.slice(1);const e=new RegExp(`.{1,${r.length>=6?2:1}}`,"g");let t=r.match(e);return t&&t[0].length===1&&(t=t.map(i=>i+i)),t?`rgb${t.length===4?"a":""}(${t.map((i,s)=>s<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function Pne(r){const e=r.toString(16);return e.length===1?`0${e}`:e}function fm(r){if(r.type)return r;if(r.charAt(0)==="#")return fm(yV(r));const e=r.indexOf("("),t=r.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(t)===-1)throw new Error((0,YU.default)(9,r));let i=r.substring(e+1,r.length-1),s;if(t==="color"){if(i=i.split(" "),s=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s)===-1)throw new Error((0,YU.default)(10,s))}else i=i.split(",");return i=i.map(o=>parseFloat(o)),{type:t,values:i,colorSpace:s}}const bV=r=>{const e=fm(r);return e.values.slice(0,3).map((t,i)=>e.type.indexOf("hsl")!==-1&&i!==0?`${t}%`:t).join(" ")};Fu.colorChannel=bV;const Fne=(r,e)=>{try{return bV(r)}catch{return r}};Fu.private_safeColorChannel=Fne;function X1(r){const{type:e,colorSpace:t}=r;let{values:i}=r;return e.indexOf("rgb")!==-1?i=i.map((s,o)=>o<3?parseInt(s,10):s):e.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),e.indexOf("color")!==-1?i=`${t} ${i.join(" ")}`:i=`${i.join(", ")}`,`${e}(${i})`}function Une(r){if(r.indexOf("#")===0)return r;const{values:e}=fm(r);return`#${e.map((t,i)=>Pne(i===3?Math.round(255*t):t)).join("")}`}function TV(r){r=fm(r);const{values:e}=r,t=e[0],i=e[1]/100,s=e[2]/100,o=i*Math.min(s,1-s),l=(p,m=(p+t/30)%12)=>s-o*Math.max(Math.min(m-3,9-m,1),-1);let u="rgb";const h=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return r.type==="hsla"&&(u+="a",h.push(e[3])),X1({type:u,values:h})}function dA(r){r=fm(r);let e=r.type==="hsl"||r.type==="hsla"?fm(TV(r)).values:r.values;return e=e.map(t=>(r.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function zne(r,e){const t=dA(r),i=dA(e);return(Math.max(t,i)+.05)/(Math.min(t,i)+.05)}function EV(r,e){return r=fm(r),e=xB(e),(r.type==="rgb"||r.type==="hsl")&&(r.type+="a"),r.type==="color"?r.values[3]=`/${e}`:r.values[3]=e,X1(r)}function Hne(r,e,t){try{return EV(r,e)}catch{return r}}function CB(r,e){if(r=fm(r),e=xB(e),r.type.indexOf("hsl")!==-1)r.values[2]*=1-e;else if(r.type.indexOf("rgb")!==-1||r.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)r.values[t]*=1-e;return X1(r)}function Gne(r,e,t){try{return CB(r,e)}catch{return r}}function MB(r,e){if(r=fm(r),e=xB(e),r.type.indexOf("hsl")!==-1)r.values[2]+=(100-r.values[2])*e;else if(r.type.indexOf("rgb")!==-1)for(let t=0;t<3;t+=1)r.values[t]+=(255-r.values[t])*e;else if(r.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)r.values[t]+=(1-r.values[t])*e;return X1(r)}function Wne(r,e,t){try{return MB(r,e)}catch{return r}}function $V(r,e=.15){return dA(r)>.5?CB(r,e):MB(r,e)}function Vne(r,e,t){try{return $V(r,e)}catch{return r}}function jne(r,e,t,i=1){const s=(h,p)=>Math.round((h**(1/i)*(1-t)+p**(1/i)*t)**i),o=fm(r),l=fm(e),u=[s(o.values[0],l.values[0]),s(o.values[1],l.values[1]),s(o.values[2],l.values[2])];return X1({type:"rgb",values:u})}const Xne=["mode","contrastThreshold","tonalOffset"],KU={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:RS.white,default:RS.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Xk={text:{primary:RS.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:RS.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function JU(r,e,t,i){const s=i.light||i,o=i.dark||i*1.5;r[e]||(r.hasOwnProperty(t)?r[e]=r[t]:e==="light"?r.light=Dne(r.main,s):e==="dark"&&(r.dark=Lne(r.main,o)))}function Yne(r="light"){return r==="dark"?{main:aT[200],light:aT[50],dark:aT[400]}:{main:aT[700],light:aT[400],dark:aT[800]}}function Kne(r="light"){return r==="dark"?{main:oT[200],light:oT[50],dark:oT[400]}:{main:oT[500],light:oT[300],dark:oT[700]}}function Jne(r="light"){return r==="dark"?{main:sT[500],light:sT[300],dark:sT[700]}:{main:sT[700],light:sT[400],dark:sT[800]}}function Qne(r="light"){return r==="dark"?{main:lT[400],light:lT[300],dark:lT[700]}:{main:lT[700],light:lT[500],dark:lT[900]}}function qne(r="light"){return r==="dark"?{main:uT[400],light:uT[300],dark:uT[700]}:{main:uT[800],light:uT[500],dark:uT[900]}}function Zne(r="light"){return r==="dark"?{main:a$[400],light:a$[300],dark:a$[700]}:{main:"#ed6c02",light:a$[500],dark:a$[900]}}function ere(r){const{mode:e="light",contrastThreshold:t=3,tonalOffset:i=.2}=r,s=Cr(r,Xne),o=r.primary||Yne(e),l=r.secondary||Kne(e),u=r.error||Jne(e),h=r.info||Qne(e),p=r.success||qne(e),m=r.warning||Zne(e);function _(x){return Nne(x,Xk.text.primary)>=t?Xk.text.primary:KU.text.primary}const v=({color:x,name:A,mainShade:O=500,lightShade:k=300,darkShade:D=700})=>{if(x=Qe({},x),!x.main&&x[O]&&(x.main=x[O]),!x.hasOwnProperty("main"))throw new Error(eb(11,A?` (${A})`:"",O));if(typeof x.main!="string")throw new Error(eb(12,A?` (${A})`:"",JSON.stringify(x.main)));return JU(x,"light",k,i),JU(x,"dark",D,i),x.contrastText||(x.contrastText=_(x.main)),x},E={dark:Xk,light:KU};return yf(Qe({common:Qe({},RS),mode:e,primary:v({color:o,name:"primary"}),secondary:v({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:u,name:"error"}),warning:v({color:m,name:"warning"}),info:v({color:h,name:"info"}),success:v({color:p,name:"success"}),grey:$Z,contrastThreshold:t,getContrastText:_,augmentColor:v,tonalOffset:i},E[e]),s)}const tre=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function nre(r){return Math.round(r*1e5)/1e5}const QU={textTransform:"uppercase"},qU='"Roboto", "Helvetica", "Arial", sans-serif';function rre(r,e){const t=typeof e=="function"?e(r):e,{fontFamily:i=qU,fontSize:s=14,fontWeightLight:o=300,fontWeightRegular:l=400,fontWeightMedium:u=500,fontWeightBold:h=700,htmlFontSize:p=16,allVariants:m,pxToRem:_}=t,v=Cr(t,tre),E=s/14,w=_||(O=>`${O/p*E}rem`),x=(O,k,D,N,F)=>Qe({fontFamily:i,fontWeight:O,fontSize:w(k),lineHeight:D},i===qU?{letterSpacing:`${nre(N/k)}em`}:{},F,m),A={h1:x(o,96,1.167,-1.5),h2:x(o,60,1.2,-.5),h3:x(l,48,1.167,0),h4:x(l,34,1.235,.25),h5:x(l,24,1.334,0),h6:x(u,20,1.6,.15),subtitle1:x(l,16,1.75,.15),subtitle2:x(u,14,1.57,.1),body1:x(l,16,1.5,.15),body2:x(l,14,1.43,.15),button:x(u,14,1.75,.4,QU),caption:x(l,12,1.66,.4),overline:x(l,12,2.66,1,QU),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return yf(Qe({htmlFontSize:p,pxToRem:w,fontFamily:i,fontSize:s,fontWeightLight:o,fontWeightRegular:l,fontWeightMedium:u,fontWeightBold:h},A),v,{clone:!1})}const ire=.2,sre=.14,ore=.12;function Ja(...r){return[`${r[0]}px ${r[1]}px ${r[2]}px ${r[3]}px rgba(0,0,0,${ire})`,`${r[4]}px ${r[5]}px ${r[6]}px ${r[7]}px rgba(0,0,0,${sre})`,`${r[8]}px ${r[9]}px ${r[10]}px ${r[11]}px rgba(0,0,0,${ore})`].join(",")}const are=["none",Ja(0,2,1,-1,0,1,1,0,0,1,3,0),Ja(0,3,1,-2,0,2,2,0,0,1,5,0),Ja(0,3,3,-2,0,3,4,0,0,1,8,0),Ja(0,2,4,-1,0,4,5,0,0,1,10,0),Ja(0,3,5,-1,0,5,8,0,0,1,14,0),Ja(0,3,5,-1,0,6,10,0,0,1,18,0),Ja(0,4,5,-2,0,7,10,1,0,2,16,1),Ja(0,5,5,-3,0,8,10,1,0,3,14,2),Ja(0,5,6,-3,0,9,12,1,0,3,16,2),Ja(0,6,6,-3,0,10,14,1,0,4,18,3),Ja(0,6,7,-4,0,11,15,1,0,4,20,3),Ja(0,7,8,-4,0,12,17,2,0,5,22,4),Ja(0,7,8,-4,0,13,19,2,0,5,24,4),Ja(0,7,9,-4,0,14,21,2,0,5,26,4),Ja(0,8,9,-5,0,15,22,2,0,6,28,5),Ja(0,8,10,-5,0,16,24,2,0,6,30,5),Ja(0,8,11,-5,0,17,26,2,0,6,32,5),Ja(0,9,11,-5,0,18,28,2,0,7,34,6),Ja(0,9,12,-6,0,19,29,2,0,7,36,6),Ja(0,10,13,-6,0,20,31,3,0,8,38,7),Ja(0,10,13,-6,0,21,33,3,0,8,40,7),Ja(0,10,14,-6,0,22,35,3,0,8,42,7),Ja(0,11,14,-7,0,23,36,3,0,9,44,8),Ja(0,11,15,-7,0,24,38,3,0,9,46,8)],lre=["duration","easing","delay"],ure={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},cre={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function ZU(r){return`${Math.round(r)}ms`}function hre(r){if(!r)return 0;const e=r/36;return Math.round((4+15*e**.25+e/5)*10)}function dre(r){const e=Qe({},ure,r.easing),t=Qe({},cre,r.duration);return Qe({getAutoHeightDuration:hre,create:(s=["all"],o={})=>{const{duration:l=t.standard,easing:u=e.easeInOut,delay:h=0}=o;return Cr(o,lre),(Array.isArray(s)?s:[s]).map(p=>`${p} ${typeof l=="string"?l:ZU(l)} ${u} ${typeof h=="string"?h:ZU(h)}`).join(",")}},r,{easing:e,duration:t})}const pre={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},fre=pre,mre=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function SV(r={},...e){const{mixins:t={},palette:i={},transitions:s={},typography:o={}}=r,l=Cr(r,mre);if(r.vars)throw new Error(eb(18));const u=ere(i),h=gw(r);let p=yf(h,{mixins:Rne(h.breakpoints,t),palette:u,shadows:are.slice(),typography:rre(u,o),transitions:dre(s),zIndex:Qe({},fre)});return p=yf(p,l),p=e.reduce((m,_)=>yf(m,_),p),p.unstable_sxConfig=Qe({},fw,l==null?void 0:l.unstable_sxConfig),p.unstable_sx=function(_){return mw({sx:_,theme:this})},p}const gre=SV(),NI=gre;function wV(){const r=EI(NI);return r[cw]||r}function Ol({props:r,name:e}){return pV({props:r,name:e,defaultTheme:NI,themeId:cw})}var _w={};const _re=qg(wZ);var Yk={exports:{}},ez;function vre(){return ez||(ez=1,function(r){function e(t,i){if(t==null)return{};var s={},o=Object.keys(t),l,u;for(u=0;u<o.length;u++)l=o[u],!(i.indexOf(l)>=0)&&(s[l]=t[l]);return s}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports}(Yk)),Yk.exports}const yre=qg(Oee),bre=qg(Lee),Tre=qg(zee),Ere=qg(jte),$re=qg(Ate),Sre=qg(Dte);var Y1=wB;Object.defineProperty(_w,"__esModule",{value:!0});var wre=_w.default=Pre;_w.shouldForwardProp=TM;_w.systemDefaultTheme=void 0;var nm=Y1(_re),kN=Y1(vre()),tz=kre(yre),xre=bre;Y1(Tre);Y1(Ere);var Cre=Y1($re),Mre=Y1(Sre);const Are=["ownerState"],Ire=["variants"],Rre=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function xV(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(xV=function(i){return i?t:e})(r)}function kre(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=xV(e);if(t&&t.has(r))return t.get(r);var i={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in r)if(o!=="default"&&Object.prototype.hasOwnProperty.call(r,o)){var l=s?Object.getOwnPropertyDescriptor(r,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=r[o]}return i.default=r,t&&t.set(r,i),i}function Ore(r){return Object.keys(r).length===0}function Lre(r){return typeof r=="string"&&r.charCodeAt(0)>96}function TM(r){return r!=="ownerState"&&r!=="theme"&&r!=="sx"&&r!=="as"}const Nre=_w.systemDefaultTheme=(0,Cre.default)(),Dre=r=>r&&r.charAt(0).toLowerCase()+r.slice(1);function Jx({defaultTheme:r,theme:e,themeId:t}){return Ore(e)?r:e[t]||e}function Bre(r){return r?(e,t)=>t[r]:null}function EM(r,e){let{ownerState:t}=e,i=(0,kN.default)(e,Are);const s=typeof r=="function"?r((0,nm.default)({ownerState:t},i)):r;if(Array.isArray(s))return s.flatMap(o=>EM(o,(0,nm.default)({ownerState:t},i)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:o=[]}=s;let u=(0,kN.default)(s,Ire);return o.forEach(h=>{let p=!0;typeof h.props=="function"?p=h.props((0,nm.default)({ownerState:t},i,t)):Object.keys(h.props).forEach(m=>{(t==null?void 0:t[m])!==h.props[m]&&i[m]!==h.props[m]&&(p=!1)}),p&&(Array.isArray(u)||(u=[u]),u.push(typeof h.style=="function"?h.style((0,nm.default)({ownerState:t},i,t)):h.style))}),u}return s}function Pre(r={}){const{themeId:e,defaultTheme:t=Nre,rootShouldForwardProp:i=TM,slotShouldForwardProp:s=TM}=r,o=l=>(0,Mre.default)((0,nm.default)({},l,{theme:Jx((0,nm.default)({},l,{defaultTheme:t,themeId:e}))}));return o.__mui_systemSx=!0,(l,u={})=>{(0,tz.internal_processStyles)(l,F=>F.filter(z=>!(z!=null&&z.__mui_systemSx)));const{name:h,slot:p,skipVariantsResolver:m,skipSx:_,overridesResolver:v=Bre(Dre(p))}=u,E=(0,kN.default)(u,Rre),w=m!==void 0?m:p&&p!=="Root"&&p!=="root"||!1,x=_||!1;let A,O=TM;p==="Root"||p==="root"?O=i:p?O=s:Lre(l)&&(O=void 0);const k=(0,tz.default)(l,(0,nm.default)({shouldForwardProp:O,label:A},E)),D=F=>typeof F=="function"&&F.__emotion_real!==F||(0,xre.isPlainObject)(F)?z=>EM(F,(0,nm.default)({},z,{theme:Jx({theme:z.theme,defaultTheme:t,themeId:e})})):F,N=(F,...z)=>{let V=D(F);const U=z?z.map(D):[];h&&v&&U.push(ie=>{const se=Jx((0,nm.default)({},ie,{defaultTheme:t,themeId:e}));if(!se.components||!se.components[h]||!se.components[h].styleOverrides)return null;const fe=se.components[h].styleOverrides,ae={};return Object.entries(fe).forEach(([he,ge])=>{ae[he]=EM(ge,(0,nm.default)({},ie,{theme:se}))}),v(ie,ae)}),h&&!w&&U.push(ie=>{var se;const fe=Jx((0,nm.default)({},ie,{defaultTheme:t,themeId:e})),ae=fe==null||(se=fe.components)==null||(se=se[h])==null?void 0:se.variants;return EM({variants:ae},(0,nm.default)({},ie,{theme:fe}))}),x||U.push(o);const ee=U.length-z.length;if(Array.isArray(F)&&ee>0){const ie=new Array(ee).fill("");V=[...F,...ie],V.raw=[...F.raw,...ie]}const ne=k(V,...U);return l.muiName&&(ne.muiName=l.muiName),ne};return k.withConfig&&(N.withConfig=k.withConfig),N}}function CV(r){return r!=="ownerState"&&r!=="theme"&&r!=="sx"&&r!=="as"}const Fre=r=>CV(r)&&r!=="classes",cg=Fre,Nr=wre({themeId:cw,defaultTheme:NI,rootShouldForwardProp:cg}),nz=r=>{let e;return r<1?e=5.11916*r**2:e=4.5*Math.log(r+1)+2,(e/100).toFixed(2)};function Ure(r){return el("MuiSvgIcon",r)}tl("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const zre=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Hre=r=>{const{color:e,fontSize:t,classes:i}=r,s={root:["root",e!=="inherit"&&`color${Hr(e)}`,`fontSize${Hr(t)}`]};return kl(s,Ure,i)},Gre=Nr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.color!=="inherit"&&e[`color${Hr(t.color)}`],e[`fontSize${Hr(t.fontSize)}`]]}})(({theme:r,ownerState:e})=>{var t,i,s,o,l,u,h,p,m,_,v,E,w;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(t=r.transitions)==null||(i=t.create)==null?void 0:i.call(t,"fill",{duration:(s=r.transitions)==null||(s=s.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((o=r.typography)==null||(l=o.pxToRem)==null?void 0:l.call(o,20))||"1.25rem",medium:((u=r.typography)==null||(h=u.pxToRem)==null?void 0:h.call(u,24))||"1.5rem",large:((p=r.typography)==null||(m=p.pxToRem)==null?void 0:m.call(p,35))||"2.1875rem"}[e.fontSize],color:(_=(v=(r.vars||r).palette)==null||(v=v[e.color])==null?void 0:v.main)!=null?_:{action:(E=(r.vars||r).palette)==null||(E=E.action)==null?void 0:E.active,disabled:(w=(r.vars||r).palette)==null||(w=w.action)==null?void 0:w.disabled,inherit:void 0}[e.color]}}),ON=de.forwardRef(function(e,t){const i=Ol({props:e,name:"MuiSvgIcon"}),{children:s,className:o,color:l="inherit",component:u="svg",fontSize:h="medium",htmlColor:p,inheritViewBox:m=!1,titleAccess:_,viewBox:v="0 0 24 24"}=i,E=Cr(i,zre),w=de.isValidElement(s)&&s.type==="svg",x=Qe({},i,{color:l,component:u,fontSize:h,instanceFontSize:e.fontSize,inheritViewBox:m,viewBox:v,hasSvgAsChild:w}),A={};m||(A.viewBox=v);const O=Hre(x);return Ft.jsxs(Gre,Qe({as:u,className:Ni(O.root,o),focusable:"false",color:p,"aria-hidden":_?void 0:!0,role:_?"img":void 0,ref:t},A,E,w&&s.props,{ownerState:x,children:[w?s.props.children:s,_?Ft.jsx("title",{children:_}):null]}))});ON.muiName="SvgIcon";function MV(r,e){function t(i,s){return Ft.jsx(ON,Qe({"data-testid":`${e}Icon`,ref:s},i,{children:r}))}return t.muiName=ON.muiName,de.memo(de.forwardRef(t))}const Wre={configure:r=>{yB.configure(r)}},Vre=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Hr,createChainedFunction:AN,createSvgIcon:MV,debounce:$B,deprecatedPropType:ane,isMuiElement:bM,ownerDocument:Np,ownerWindow:dv,requirePropFactory:lne,setRef:hA,unstable_ClassNameGenerator:Wre,unstable_useEnhancedEffect:hv,unstable_useId:SB,unsupportedProp:cne,useControlled:IN,useEventCallback:My,useForkRef:ep,useIsFocusVisible:mV},Symbol.toStringTag,{value:"Module"}));function LN(r,e){return LN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},LN(r,e)}function AB(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,LN(r,e)}const rz={disabled:!1},pA=vr.createContext(null);var jre=function(e){return e.scrollTop},D$="unmounted",py="exited",fy="entering",RT="entered",NN="exiting",Z_=function(r){AB(e,r);function e(i,s){var o;o=r.call(this,i,s)||this;var l=s,u=l&&!l.isMounting?i.enter:i.appear,h;return o.appearStatus=null,i.in?u?(h=py,o.appearStatus=fy):h=RT:i.unmountOnExit||i.mountOnEnter?h=D$:h=py,o.state={status:h},o.nextCallback=null,o}e.getDerivedStateFromProps=function(s,o){var l=s.in;return l&&o.status===D$?{status:py}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var o=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==fy&&l!==RT&&(o=fy):(l===fy||l===RT)&&(o=NN)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,o,l,u;return o=l=u=s,s!=null&&typeof s!="number"&&(o=s.exit,l=s.enter,u=s.appear!==void 0?s.appear:l),{exit:o,enter:l,appear:u}},t.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===fy){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:Ex.findDOMNode(this);l&&jre(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===py&&this.setState({status:D$})},t.performEnter=function(s){var o=this,l=this.props.enter,u=this.context?this.context.isMounting:s,h=this.props.nodeRef?[u]:[Ex.findDOMNode(this),u],p=h[0],m=h[1],_=this.getTimeouts(),v=u?_.appear:_.enter;if(!s&&!l||rz.disabled){this.safeSetState({status:RT},function(){o.props.onEntered(p)});return}this.props.onEnter(p,m),this.safeSetState({status:fy},function(){o.props.onEntering(p,m),o.onTransitionEnd(v,function(){o.safeSetState({status:RT},function(){o.props.onEntered(p,m)})})})},t.performExit=function(){var s=this,o=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:Ex.findDOMNode(this);if(!o||rz.disabled){this.safeSetState({status:py},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:NN},function(){s.props.onExiting(u),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:py},function(){s.props.onExited(u)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},t.setNextCallback=function(s){var o=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,o.nextCallback=null,s(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},t.onTransitionEnd=function(s,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:Ex.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],p=h[0],m=h[1];this.props.addEndListener(p,m)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===D$)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var u=Cr(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return vr.createElement(pA.Provider,{value:null},typeof l=="function"?l(s,u):vr.cloneElement(vr.Children.only(l),u))},e}(vr.Component);Z_.contextType=pA;Z_.propTypes={};function cT(){}Z_.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:cT,onEntering:cT,onEntered:cT,onExit:cT,onExiting:cT,onExited:cT};Z_.UNMOUNTED=D$;Z_.EXITED=py;Z_.ENTERING=fy;Z_.ENTERED=RT;Z_.EXITING=NN;const AV=Z_;function Xre(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function IB(r,e){var t=function(o){return e&&de.isValidElement(o)?e(o):o},i=Object.create(null);return r&&de.Children.map(r,function(s){return s}).forEach(function(s){i[s.key]=t(s)}),i}function Yre(r,e){r=r||{},e=e||{};function t(m){return m in e?e[m]:r[m]}var i=Object.create(null),s=[];for(var o in r)o in e?s.length&&(i[o]=s,s=[]):s.push(o);var l,u={};for(var h in e){if(i[h])for(l=0;l<i[h].length;l++){var p=i[h][l];u[i[h][l]]=t(p)}u[h]=t(h)}for(l=0;l<s.length;l++)u[s[l]]=t(s[l]);return u}function Ay(r,e,t){return t[e]!=null?t[e]:r.props[e]}function Kre(r,e){return IB(r.children,function(t){return de.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:Ay(t,"appear",r),enter:Ay(t,"enter",r),exit:Ay(t,"exit",r)})})}function Jre(r,e,t){var i=IB(r.children),s=Yre(e,i);return Object.keys(s).forEach(function(o){var l=s[o];if(de.isValidElement(l)){var u=o in e,h=o in i,p=e[o],m=de.isValidElement(p)&&!p.props.in;h&&(!u||m)?s[o]=de.cloneElement(l,{onExited:t.bind(null,l),in:!0,exit:Ay(l,"exit",r),enter:Ay(l,"enter",r)}):!h&&u&&!m?s[o]=de.cloneElement(l,{in:!1}):h&&u&&de.isValidElement(p)&&(s[o]=de.cloneElement(l,{onExited:t.bind(null,l),in:p.props.in,exit:Ay(l,"exit",r),enter:Ay(l,"enter",r)}))}}),s}var Qre=Object.values||function(r){return Object.keys(r).map(function(e){return r[e]})},qre={component:"div",childFactory:function(e){return e}},RB=function(r){AB(e,r);function e(i,s){var o;o=r.call(this,i,s)||this;var l=o.handleExited.bind(Xre(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,o){var l=o.children,u=o.handleExited,h=o.firstRender;return{children:h?Kre(s,u):Jre(s,l,u),firstRender:!1}},t.handleExited=function(s,o){var l=IB(this.props.children);s.key in l||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(u){var h=Qe({},u.children);return delete h[s.key],{children:h}}))},t.render=function(){var s=this.props,o=s.component,l=s.childFactory,u=Cr(s,["component","childFactory"]),h=this.state.contextValue,p=Qre(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,o===null?vr.createElement(pA.Provider,{value:h},p):vr.createElement(pA.Provider,{value:h},vr.createElement(o,u,p))},e}(vr.Component);RB.propTypes={};RB.defaultProps=qre;const Zre=RB,IV=r=>r.scrollTop;function fA(r,e){var t,i;const{timeout:s,easing:o,style:l={}}=r;return{duration:(t=l.transitionDuration)!=null?t:typeof s=="number"?s:s[e.mode]||0,easing:(i=l.transitionTimingFunction)!=null?i:typeof o=="object"?o[e.mode]:o,delay:l.transitionDelay}}function eie(r){return el("MuiPaper",r)}tl("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const tie=["className","component","elevation","square","variant"],nie=r=>{const{square:e,elevation:t,variant:i,classes:s}=r,o={root:["root",i,!e&&"rounded",i==="elevation"&&`elevation${t}`]};return kl(o,eie,s)},rie=Nr("div",{name:"MuiPaper",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(({theme:r,ownerState:e})=>{var t;return Qe({backgroundColor:(r.vars||r).palette.background.paper,color:(r.vars||r).palette.text.primary,transition:r.transitions.create("box-shadow")},!e.square&&{borderRadius:r.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(r.vars||r).palette.divider}`},e.variant==="elevation"&&Qe({boxShadow:(r.vars||r).shadows[e.elevation]},!r.vars&&r.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${J0("#fff",nz(e.elevation))}, ${J0("#fff",nz(e.elevation))})`},r.vars&&{backgroundImage:(t=r.vars.overlays)==null?void 0:t[e.elevation]}))}),iie=de.forwardRef(function(e,t){const i=Ol({props:e,name:"MuiPaper"}),{className:s,component:o="div",elevation:l=1,square:u=!1,variant:h="elevation"}=i,p=Cr(i,tie),m=Qe({},i,{component:o,elevation:l,square:u,variant:h}),_=nie(m);return Ft.jsx(rie,Qe({as:o,ownerState:m,className:Ni(_.root,s),ref:t},p))}),sie=iie;function mA(r){return typeof r=="string"}function oie(r,e,t){return r===void 0||mA(r)?e:Qe({},e,{ownerState:Qe({},e.ownerState,t)})}function RV(r,e=[]){if(r===void 0)return{};const t={};return Object.keys(r).filter(i=>i.match(/^on[A-Z]/)&&typeof r[i]=="function"&&!e.includes(i)).forEach(i=>{t[i]=r[i]}),t}function aie(r,e,t){return typeof r=="function"?r(e,t):r}function iz(r){if(r===void 0)return{};const e={};return Object.keys(r).filter(t=>!(t.match(/^on[A-Z]/)&&typeof r[t]=="function")).forEach(t=>{e[t]=r[t]}),e}function lie(r){const{getSlotProps:e,additionalProps:t,externalSlotProps:i,externalForwardedProps:s,className:o}=r;if(!e){const E=Ni(t==null?void 0:t.className,o,s==null?void 0:s.className,i==null?void 0:i.className),w=Qe({},t==null?void 0:t.style,s==null?void 0:s.style,i==null?void 0:i.style),x=Qe({},t,s,i);return E.length>0&&(x.className=E),Object.keys(w).length>0&&(x.style=w),{props:x,internalRef:void 0}}const l=RV(Qe({},s,i)),u=iz(i),h=iz(s),p=e(l),m=Ni(p==null?void 0:p.className,t==null?void 0:t.className,o,s==null?void 0:s.className,i==null?void 0:i.className),_=Qe({},p==null?void 0:p.style,t==null?void 0:t.style,s==null?void 0:s.style,i==null?void 0:i.style),v=Qe({},p,t,h,u);return m.length>0&&(v.className=m),Object.keys(_).length>0&&(v.style=_),{props:v,internalRef:p.ref}}const uie=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function T1(r){var e;const{elementType:t,externalSlotProps:i,ownerState:s,skipResolvingSlotProps:o=!1}=r,l=Cr(r,uie),u=o?{}:aie(i,s),{props:h,internalRef:p}=lie(Qe({},l,{externalSlotProps:u})),m=ep(p,u==null?void 0:u.ref,(e=r.additionalProps)==null?void 0:e.ref);return oie(t,Qe({},h,{ref:m}),s)}function cie(r){const{className:e,classes:t,pulsate:i=!1,rippleX:s,rippleY:o,rippleSize:l,in:u,onExited:h,timeout:p}=r,[m,_]=de.useState(!1),v=Ni(e,t.ripple,t.rippleVisible,i&&t.ripplePulsate),E={width:l,height:l,top:-(l/2)+o,left:-(l/2)+s},w=Ni(t.child,m&&t.childLeaving,i&&t.childPulsate);return!u&&!m&&_(!0),de.useEffect(()=>{if(!u&&h!=null){const x=setTimeout(h,p);return()=>{clearTimeout(x)}}},[h,u,p]),Ft.jsx("span",{className:v,style:E,children:Ft.jsx("span",{className:w})})}const im=tl("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),hie=["center","classes","className"];let DI=r=>r,sz,oz,az,lz;const DN=550,die=80,pie=mI(sz||(sz=DI`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),fie=mI(oz||(oz=DI`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),mie=mI(az||(az=DI`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),gie=Nr("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),_ie=Nr(cie,{name:"MuiTouchRipple",slot:"Ripple"})(lz||(lz=DI`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),im.rippleVisible,pie,DN,({theme:r})=>r.transitions.easing.easeInOut,im.ripplePulsate,({theme:r})=>r.transitions.duration.shorter,im.child,im.childLeaving,fie,DN,({theme:r})=>r.transitions.easing.easeInOut,im.childPulsate,mie,({theme:r})=>r.transitions.easing.easeInOut),vie=de.forwardRef(function(e,t){const i=Ol({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:o={},className:l}=i,u=Cr(i,hie),[h,p]=de.useState([]),m=de.useRef(0),_=de.useRef(null);de.useEffect(()=>{_.current&&(_.current(),_.current=null)},[h]);const v=de.useRef(!1),E=fV(),w=de.useRef(null),x=de.useRef(null),A=de.useCallback(N=>{const{pulsate:F,rippleX:z,rippleY:V,rippleSize:U,cb:ee}=N;p(ne=>[...ne,Ft.jsx(_ie,{classes:{ripple:Ni(o.ripple,im.ripple),rippleVisible:Ni(o.rippleVisible,im.rippleVisible),ripplePulsate:Ni(o.ripplePulsate,im.ripplePulsate),child:Ni(o.child,im.child),childLeaving:Ni(o.childLeaving,im.childLeaving),childPulsate:Ni(o.childPulsate,im.childPulsate)},timeout:DN,pulsate:F,rippleX:z,rippleY:V,rippleSize:U},m.current)]),m.current+=1,_.current=ee},[o]),O=de.useCallback((N={},F={},z=()=>{})=>{const{pulsate:V=!1,center:U=s||F.pulsate,fakeElement:ee=!1}=F;if((N==null?void 0:N.type)==="mousedown"&&v.current){v.current=!1;return}(N==null?void 0:N.type)==="touchstart"&&(v.current=!0);const ne=ee?null:x.current,ie=ne?ne.getBoundingClientRect():{width:0,height:0,left:0,top:0};let se,fe,ae;if(U||N===void 0||N.clientX===0&&N.clientY===0||!N.clientX&&!N.touches)se=Math.round(ie.width/2),fe=Math.round(ie.height/2);else{const{clientX:he,clientY:ge}=N.touches&&N.touches.length>0?N.touches[0]:N;se=Math.round(he-ie.left),fe=Math.round(ge-ie.top)}if(U)ae=Math.sqrt((2*ie.width**2+ie.height**2)/3),ae%2===0&&(ae+=1);else{const he=Math.max(Math.abs((ne?ne.clientWidth:0)-se),se)*2+2,ge=Math.max(Math.abs((ne?ne.clientHeight:0)-fe),fe)*2+2;ae=Math.sqrt(he**2+ge**2)}N!=null&&N.touches?w.current===null&&(w.current=()=>{A({pulsate:V,rippleX:se,rippleY:fe,rippleSize:ae,cb:z})},E.start(die,()=>{w.current&&(w.current(),w.current=null)})):A({pulsate:V,rippleX:se,rippleY:fe,rippleSize:ae,cb:z})},[s,A,E]),k=de.useCallback(()=>{O({},{pulsate:!0})},[O]),D=de.useCallback((N,F)=>{if(E.clear(),(N==null?void 0:N.type)==="touchend"&&w.current){w.current(),w.current=null,E.start(0,()=>{D(N,F)});return}w.current=null,p(z=>z.length>0?z.slice(1):z),_.current=F},[E]);return de.useImperativeHandle(t,()=>({pulsate:k,start:O,stop:D}),[k,O,D]),Ft.jsx(gie,Qe({className:Ni(im.root,o.root,l),ref:x},u,{children:Ft.jsx(Zre,{component:null,exit:!0,children:h})}))}),yie=vie;function bie(r){return el("MuiButtonBase",r)}const Tie=tl("MuiButtonBase",["root","disabled","focusVisible"]),Eie=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],$ie=r=>{const{disabled:e,focusVisible:t,focusVisibleClassName:i,classes:s}=r,l=kl({root:["root",e&&"disabled",t&&"focusVisible"]},bie,s);return t&&i&&(l.root+=` ${i}`),l},Sie=Nr("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(r,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Tie.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),wie=de.forwardRef(function(e,t){const i=Ol({props:e,name:"MuiButtonBase"}),{action:s,centerRipple:o=!1,children:l,className:u,component:h="button",disabled:p=!1,disableRipple:m=!1,disableTouchRipple:_=!1,focusRipple:v=!1,LinkComponent:E="a",onBlur:w,onClick:x,onContextMenu:A,onDragLeave:O,onFocus:k,onFocusVisible:D,onKeyDown:N,onKeyUp:F,onMouseDown:z,onMouseLeave:V,onMouseUp:U,onTouchEnd:ee,onTouchMove:ne,onTouchStart:ie,tabIndex:se=0,TouchRippleProps:fe,touchRippleRef:ae,type:he}=i,ge=Cr(i,Eie),Ie=de.useRef(null),j=de.useRef(null),te=ep(j,ae),{isFocusVisibleRef:q,onFocus:le,onBlur:_e,ref:Le}=mV(),[xe,Ve]=de.useState(!1);p&&xe&&Ve(!1),de.useImperativeHandle(s,()=>({focusVisible:()=>{Ve(!0),Ie.current.focus()}}),[]);const[Re,Ze]=de.useState(!1);de.useEffect(()=>{Ze(!0)},[]);const et=Re&&!m&&!p;de.useEffect(()=>{xe&&v&&!m&&Re&&j.current.pulsate()},[m,v,xe,Re]);function ct(He,Ce,X=_){return My(J=>(Ce&&Ce(J),!X&&j.current&&j.current[He](J),!0))}const rt=ct("start",z),Ne=ct("stop",A),we=ct("stop",O),ze=ct("stop",U),it=ct("stop",He=>{xe&&He.preventDefault(),V&&V(He)}),nt=ct("start",ie),Mt=ct("stop",ee),At=ct("stop",ne),ht=ct("stop",He=>{_e(He),q.current===!1&&Ve(!1),w&&w(He)},!1),Et=My(He=>{Ie.current||(Ie.current=He.currentTarget),le(He),q.current===!0&&(Ve(!0),D&&D(He)),k&&k(He)}),wt=()=>{const He=Ie.current;return h&&h!=="button"&&!(He.tagName==="A"&&He.href)},pt=de.useRef(!1),be=My(He=>{v&&!pt.current&&xe&&j.current&&He.key===" "&&(pt.current=!0,j.current.stop(He,()=>{j.current.start(He)})),He.target===He.currentTarget&&wt()&&He.key===" "&&He.preventDefault(),N&&N(He),He.target===He.currentTarget&&wt()&&He.key==="Enter"&&!p&&(He.preventDefault(),x&&x(He))}),Z=My(He=>{v&&He.key===" "&&j.current&&xe&&!He.defaultPrevented&&(pt.current=!1,j.current.stop(He,()=>{j.current.pulsate(He)})),F&&F(He),x&&He.target===He.currentTarget&&wt()&&He.key===" "&&!He.defaultPrevented&&x(He)});let ke=h;ke==="button"&&(ge.href||ge.to)&&(ke=E);const lt={};ke==="button"?(lt.type=he===void 0?"button":he,lt.disabled=p):(!ge.href&&!ge.to&&(lt.role="button"),p&&(lt["aria-disabled"]=p));const mt=ep(t,Le,Ie),xt=Qe({},i,{centerRipple:o,component:h,disabled:p,disableRipple:m,disableTouchRipple:_,focusRipple:v,tabIndex:se,focusVisible:xe}),ut=$ie(xt);return Ft.jsxs(Sie,Qe({as:ke,className:Ni(ut.root,u),ownerState:xt,onBlur:ht,onClick:x,onContextMenu:Ne,onFocus:Et,onKeyDown:be,onKeyUp:Z,onMouseDown:rt,onMouseLeave:it,onMouseUp:ze,onDragLeave:we,onTouchEnd:Mt,onTouchMove:At,onTouchStart:nt,ref:mt,tabIndex:p?-1:se,type:he},lt,ge,{children:[l,et?Ft.jsx(yie,Qe({ref:te,center:o},fe)):null]}))}),kV=wie;function xie(r){return el("MuiIconButton",r)}const Cie=tl("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Mie=["edge","children","className","color","disabled","disableFocusRipple","size"],Aie=r=>{const{classes:e,disabled:t,color:i,edge:s,size:o}=r,l={root:["root",t&&"disabled",i!=="default"&&`color${Hr(i)}`,s&&`edge${Hr(s)}`,`size${Hr(o)}`]};return kl(l,xie,e)},Iie=Nr(kV,{name:"MuiIconButton",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.color!=="default"&&e[`color${Hr(t.color)}`],t.edge&&e[`edge${Hr(t.edge)}`],e[`size${Hr(t.size)}`]]}})(({theme:r,ownerState:e})=>Qe({textAlign:"center",flex:"0 0 auto",fontSize:r.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(r.vars||r).palette.action.active,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.action.activeChannel} / ${r.vars.palette.action.hoverOpacity})`:J0(r.palette.action.active,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:r,ownerState:e})=>{var t;const i=(t=(r.vars||r).palette)==null?void 0:t[e.color];return Qe({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&Qe({color:i==null?void 0:i.main},!e.disableRipple&&{"&:hover":Qe({},i&&{backgroundColor:r.vars?`rgba(${i.mainChannel} / ${r.vars.palette.action.hoverOpacity})`:J0(i.main,r.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:r.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:r.typography.pxToRem(28)},{[`&.${Cie.disabled}`]:{backgroundColor:"transparent",color:(r.vars||r).palette.action.disabled}})}),Rie=de.forwardRef(function(e,t){const i=Ol({props:e,name:"MuiIconButton"}),{edge:s=!1,children:o,className:l,color:u="default",disabled:h=!1,disableFocusRipple:p=!1,size:m="medium"}=i,_=Cr(i,Mie),v=Qe({},i,{edge:s,color:u,disabled:h,disableFocusRipple:p,size:m}),E=Aie(v);return Ft.jsx(Iie,Qe({className:Ni(E.root,l),centerRipple:!0,focusRipple:!p,disabled:h,ref:t},_,{ownerState:v,children:o}))}),kie=Rie;function Oie(r){return el("MuiTypography",r)}tl("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Lie=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Nie=r=>{const{align:e,gutterBottom:t,noWrap:i,paragraph:s,variant:o,classes:l}=r,u={root:["root",o,r.align!=="inherit"&&`align${Hr(e)}`,t&&"gutterBottom",i&&"noWrap",s&&"paragraph"]};return kl(u,Oie,l)},Die=Nr("span",{name:"MuiTypography",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${Hr(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(({theme:r,ownerState:e})=>Qe({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&r.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),uz={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Bie={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Pie=r=>Bie[r]||r,Fie=de.forwardRef(function(e,t){const i=Ol({props:e,name:"MuiTypography"}),s=Pie(i.color),o=vB(Qe({},i,{color:s})),{align:l="inherit",className:u,component:h,gutterBottom:p=!1,noWrap:m=!1,paragraph:_=!1,variant:v="body1",variantMapping:E=uz}=o,w=Cr(o,Lie),x=Qe({},o,{align:l,color:s,className:u,component:h,gutterBottom:p,noWrap:m,paragraph:_,variant:v,variantMapping:E}),A=h||(_?"p":E[v]||uz[v])||"span",O=Nie(x);return Ft.jsx(Die,Qe({as:A,ref:t,ownerState:x,className:Ni(O.root,u)},w))}),Uie=Fie,zie=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Hie(r){const e=parseInt(r.getAttribute("tabindex")||"",10);return Number.isNaN(e)?r.contentEditable==="true"||(r.nodeName==="AUDIO"||r.nodeName==="VIDEO"||r.nodeName==="DETAILS")&&r.getAttribute("tabindex")===null?0:r.tabIndex:e}function Gie(r){if(r.tagName!=="INPUT"||r.type!=="radio"||!r.name)return!1;const e=i=>r.ownerDocument.querySelector(`input[type="radio"]${i}`);let t=e(`[name="${r.name}"]:checked`);return t||(t=e(`[name="${r.name}"]`)),t!==r}function Wie(r){return!(r.disabled||r.tagName==="INPUT"&&r.type==="hidden"||Gie(r))}function Vie(r){const e=[],t=[];return Array.from(r.querySelectorAll(zie)).forEach((i,s)=>{const o=Hie(i);o===-1||!Wie(i)||(o===0?e.push(i):t.push({documentOrder:s,tabIndex:o,node:i}))}),t.sort((i,s)=>i.tabIndex===s.tabIndex?i.documentOrder-s.documentOrder:i.tabIndex-s.tabIndex).map(i=>i.node).concat(e)}function jie(){return!0}function Xie(r){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:i=!1,disableRestoreFocus:s=!1,getTabbable:o=Vie,isEnabled:l=jie,open:u}=r,h=de.useRef(!1),p=de.useRef(null),m=de.useRef(null),_=de.useRef(null),v=de.useRef(null),E=de.useRef(!1),w=de.useRef(null),x=ep(e.ref,w),A=de.useRef(null);de.useEffect(()=>{!u||!w.current||(E.current=!t)},[t,u]),de.useEffect(()=>{if(!u||!w.current)return;const D=Np(w.current);return w.current.contains(D.activeElement)||(w.current.hasAttribute("tabIndex")||w.current.setAttribute("tabIndex","-1"),E.current&&w.current.focus()),()=>{s||(_.current&&_.current.focus&&(h.current=!0,_.current.focus()),_.current=null)}},[u]),de.useEffect(()=>{if(!u||!w.current)return;const D=Np(w.current),N=V=>{A.current=V,!(i||!l()||V.key!=="Tab")&&D.activeElement===w.current&&V.shiftKey&&(h.current=!0,m.current&&m.current.focus())},F=()=>{const V=w.current;if(V===null)return;if(!D.hasFocus()||!l()||h.current){h.current=!1;return}if(V.contains(D.activeElement)||i&&D.activeElement!==p.current&&D.activeElement!==m.current)return;if(D.activeElement!==v.current)v.current=null;else if(v.current!==null)return;if(!E.current)return;let U=[];if((D.activeElement===p.current||D.activeElement===m.current)&&(U=o(w.current)),U.length>0){var ee,ne;const ie=!!((ee=A.current)!=null&&ee.shiftKey&&((ne=A.current)==null?void 0:ne.key)==="Tab"),se=U[0],fe=U[U.length-1];typeof se!="string"&&typeof fe!="string"&&(ie?fe.focus():se.focus())}else V.focus()};D.addEventListener("focusin",F),D.addEventListener("keydown",N,!0);const z=setInterval(()=>{D.activeElement&&D.activeElement.tagName==="BODY"&&F()},50);return()=>{clearInterval(z),D.removeEventListener("focusin",F),D.removeEventListener("keydown",N,!0)}},[t,i,s,l,u,o]);const O=D=>{_.current===null&&(_.current=D.relatedTarget),E.current=!0,v.current=D.target;const N=e.props.onFocus;N&&N(D)},k=D=>{_.current===null&&(_.current=D.relatedTarget),E.current=!0};return Ft.jsxs(de.Fragment,{children:[Ft.jsx("div",{tabIndex:u?0:-1,onFocus:k,ref:p,"data-testid":"sentinelStart"}),de.cloneElement(e,{ref:x,onFocus:O}),Ft.jsx("div",{tabIndex:u?0:-1,onFocus:k,ref:m,"data-testid":"sentinelEnd"})]})}function Yie(r){return typeof r=="function"?r():r}const Kie=de.forwardRef(function(e,t){const{children:i,container:s,disablePortal:o=!1}=e,[l,u]=de.useState(null),h=ep(de.isValidElement(i)?i.ref:null,t);if(hv(()=>{o||u(Yie(s)||document.body)},[s,o]),hv(()=>{if(l&&!o)return hA(t,l),()=>{hA(t,null)}},[t,l,o]),o){if(de.isValidElement(i)){const p={ref:h};return de.cloneElement(i,p)}return Ft.jsx(de.Fragment,{children:i})}return Ft.jsx(de.Fragment,{children:l&&DD.createPortal(i,l)})});function Jie(r){const e=Np(r);return e.body===r?dv(r).innerWidth>e.documentElement.clientWidth:r.scrollHeight>r.clientHeight}function eS(r,e){e?r.setAttribute("aria-hidden","true"):r.removeAttribute("aria-hidden")}function cz(r){return parseInt(dv(r).getComputedStyle(r).paddingRight,10)||0}function Qie(r){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(r.tagName)!==-1,i=r.tagName==="INPUT"&&r.getAttribute("type")==="hidden";return t||i}function hz(r,e,t,i,s){const o=[e,t,...i];[].forEach.call(r.children,l=>{const u=o.indexOf(l)===-1,h=!Qie(l);u&&h&&eS(l,s)})}function Kk(r,e){let t=-1;return r.some((i,s)=>e(i)?(t=s,!0):!1),t}function qie(r,e){const t=[],i=r.container;if(!e.disableScrollLock){if(Jie(i)){const l=gV(Np(i));t.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${cz(i)+l}px`;const u=Np(i).querySelectorAll(".mui-fixed");[].forEach.call(u,h=>{t.push({value:h.style.paddingRight,property:"padding-right",el:h}),h.style.paddingRight=`${cz(h)+l}px`})}let o;if(i.parentNode instanceof DocumentFragment)o=Np(i).body;else{const l=i.parentElement,u=dv(i);o=(l==null?void 0:l.nodeName)==="HTML"&&u.getComputedStyle(l).overflowY==="scroll"?l:i}t.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{t.forEach(({value:o,el:l,property:u})=>{o?l.style.setProperty(u,o):l.style.removeProperty(u)})}}function Zie(r){const e=[];return[].forEach.call(r.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class ese{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let i=this.modals.indexOf(e);if(i!==-1)return i;i=this.modals.length,this.modals.push(e),e.modalRef&&eS(e.modalRef,!1);const s=Zie(t);hz(t,e.mount,e.modalRef,s,!0);const o=Kk(this.containers,l=>l.container===t);return o!==-1?(this.containers[o].modals.push(e),i):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:s}),i)}mount(e,t){const i=Kk(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[i];s.restore||(s.restore=qie(s,t))}remove(e,t=!0){const i=this.modals.indexOf(e);if(i===-1)return i;const s=Kk(this.containers,l=>l.modals.indexOf(e)!==-1),o=this.containers[s];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(i,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&eS(e.modalRef,t),hz(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(s,1);else{const l=o.modals[o.modals.length-1];l.modalRef&&eS(l.modalRef,!1)}return i}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function tse(r){return typeof r=="function"?r():r}function nse(r){return r?r.props.hasOwnProperty("in"):!1}const rse=new ese;function ise(r){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:i=!1,manager:s=rse,closeAfterTransition:o=!1,onTransitionEnter:l,onTransitionExited:u,children:h,onClose:p,open:m,rootRef:_}=r,v=de.useRef({}),E=de.useRef(null),w=de.useRef(null),x=ep(w,_),[A,O]=de.useState(!m),k=nse(h);let D=!0;(r["aria-hidden"]==="false"||r["aria-hidden"]===!1)&&(D=!1);const N=()=>Np(E.current),F=()=>(v.current.modalRef=w.current,v.current.mount=E.current,v.current),z=()=>{s.mount(F(),{disableScrollLock:i}),w.current&&(w.current.scrollTop=0)},V=My(()=>{const ge=tse(e)||N().body;s.add(F(),ge),w.current&&z()}),U=de.useCallback(()=>s.isTopModal(F()),[s]),ee=My(ge=>{E.current=ge,ge&&(m&&U()?z():w.current&&eS(w.current,D))}),ne=de.useCallback(()=>{s.remove(F(),D)},[D,s]);de.useEffect(()=>()=>{ne()},[ne]),de.useEffect(()=>{m?V():(!k||!o)&&ne()},[m,ne,k,o,V]);const ie=ge=>Ie=>{var j;(j=ge.onKeyDown)==null||j.call(ge,Ie),!(Ie.key!=="Escape"||Ie.which===229||!U())&&(t||(Ie.stopPropagation(),p&&p(Ie,"escapeKeyDown")))},se=ge=>Ie=>{var j;(j=ge.onClick)==null||j.call(ge,Ie),Ie.target===Ie.currentTarget&&p&&p(Ie,"backdropClick")};return{getRootProps:(ge={})=>{const Ie=RV(r);delete Ie.onTransitionEnter,delete Ie.onTransitionExited;const j=Qe({},Ie,ge);return Qe({role:"presentation"},j,{onKeyDown:ie(j),ref:x})},getBackdropProps:(ge={})=>{const Ie=ge;return Qe({"aria-hidden":!0},Ie,{onClick:se(Ie),open:m})},getTransitionProps:()=>{const ge=()=>{O(!1),l&&l()},Ie=()=>{O(!0),u&&u(),o&&ne()};return{onEnter:AN(ge,h==null?void 0:h.props.onEnter),onExited:AN(Ie,h==null?void 0:h.props.onExited)}},rootRef:x,portalRef:ee,isTopModal:U,exited:A,hasTransition:k}}const sse=["onChange","maxRows","minRows","style","value"];function Qx(r){return parseInt(r,10)||0}const ose={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function ase(r){return r==null||Object.keys(r).length===0||r.outerHeightStyle===0&&!r.overflowing}const lse=de.forwardRef(function(e,t){const{onChange:i,maxRows:s,minRows:o=1,style:l,value:u}=e,h=Cr(e,sse),{current:p}=de.useRef(u!=null),m=de.useRef(null),_=ep(t,m),v=de.useRef(null),E=de.useCallback(()=>{const A=m.current,k=dv(A).getComputedStyle(A);if(k.width==="0px")return{outerHeightStyle:0,overflowing:!1};const D=v.current;D.style.width=k.width,D.value=A.value||e.placeholder||"x",D.value.slice(-1)===`
`&&(D.value+=" ");const N=k.boxSizing,F=Qx(k.paddingBottom)+Qx(k.paddingTop),z=Qx(k.borderBottomWidth)+Qx(k.borderTopWidth),V=D.scrollHeight;D.value="x";const U=D.scrollHeight;let ee=V;o&&(ee=Math.max(Number(o)*U,ee)),s&&(ee=Math.min(Number(s)*U,ee)),ee=Math.max(ee,U);const ne=ee+(N==="border-box"?F+z:0),ie=Math.abs(ee-V)<=1;return{outerHeightStyle:ne,overflowing:ie}},[s,o,e.placeholder]),w=de.useCallback(()=>{const A=E();if(ase(A))return;const O=m.current;O.style.height=`${A.outerHeightStyle}px`,O.style.overflow=A.overflowing?"hidden":""},[E]);hv(()=>{const A=()=>{w()};let O;const k=$B(A),D=m.current,N=dv(D);N.addEventListener("resize",k);let F;return typeof ResizeObserver<"u"&&(F=new ResizeObserver(A),F.observe(D)),()=>{k.clear(),cancelAnimationFrame(O),N.removeEventListener("resize",k),F&&F.disconnect()}},[E,w]),hv(()=>{w()});const x=A=>{p||w(),i&&i(A)};return Ft.jsxs(de.Fragment,{children:[Ft.jsx("textarea",Qe({value:u,onChange:x,ref:_,rows:o,style:l},h)),Ft.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:v,tabIndex:-1,style:Qe({},ose.shadow,l,{paddingTop:0,paddingBottom:0})})]})});function K1({props:r,states:e,muiFormControl:t}){return e.reduce((i,s)=>(i[s]=r[s],t&&typeof r[s]>"u"&&(i[s]=t[s]),i),{})}const use=de.createContext(void 0),kB=use;function J1(){return de.useContext(kB)}function cse(r){return Ft.jsx(Ote,Qe({},r,{defaultTheme:NI,themeId:cw}))}function dz(r){return r!=null&&!(Array.isArray(r)&&r.length===0)}function gA(r,e=!1){return r&&(dz(r.value)&&r.value!==""||e&&dz(r.defaultValue)&&r.defaultValue!=="")}function hse(r){return r.startAdornment}function dse(r){return el("MuiInputBase",r)}const pse=tl("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),E1=pse,fse=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],BI=(r,e)=>{const{ownerState:t}=r;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${Hr(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},PI=(r,e)=>{const{ownerState:t}=r;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},mse=r=>{const{classes:e,color:t,disabled:i,error:s,endAdornment:o,focused:l,formControl:u,fullWidth:h,hiddenLabel:p,multiline:m,readOnly:_,size:v,startAdornment:E,type:w}=r,x={root:["root",`color${Hr(t)}`,i&&"disabled",s&&"error",h&&"fullWidth",l&&"focused",u&&"formControl",v&&v!=="medium"&&`size${Hr(v)}`,m&&"multiline",E&&"adornedStart",o&&"adornedEnd",p&&"hiddenLabel",_&&"readOnly"],input:["input",i&&"disabled",w==="search"&&"inputTypeSearch",m&&"inputMultiline",v==="small"&&"inputSizeSmall",p&&"inputHiddenLabel",E&&"inputAdornedStart",o&&"inputAdornedEnd",_&&"readOnly"]};return kl(x,dse,e)},FI=Nr("div",{name:"MuiInputBase",slot:"Root",overridesResolver:BI})(({theme:r,ownerState:e})=>Qe({},r.typography.body1,{color:(r.vars||r).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${E1.disabled}`]:{color:(r.vars||r).palette.text.disabled,cursor:"default"}},e.multiline&&Qe({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),UI=Nr("input",{name:"MuiInputBase",slot:"Input",overridesResolver:PI})(({theme:r,ownerState:e})=>{const t=r.palette.mode==="light",i=Qe({color:"currentColor"},r.vars?{opacity:r.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},{transition:r.transitions.create("opacity",{duration:r.transitions.duration.shorter})}),s={opacity:"0 !important"},o=r.vars?{opacity:r.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return Qe({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${E1.formControl} &`]:{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${E1.disabled}`]:{opacity:1,WebkitTextFillColor:(r.vars||r).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),gse=Ft.jsx(cse,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),_se=de.forwardRef(function(e,t){var i;const s=Ol({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:l,autoFocus:u,className:h,components:p={},componentsProps:m={},defaultValue:_,disabled:v,disableInjectingGlobalStyles:E,endAdornment:w,fullWidth:x=!1,id:A,inputComponent:O="input",inputProps:k={},inputRef:D,maxRows:N,minRows:F,multiline:z=!1,name:V,onBlur:U,onChange:ee,onClick:ne,onFocus:ie,onKeyDown:se,onKeyUp:fe,placeholder:ae,readOnly:he,renderSuffix:ge,rows:Ie,slotProps:j={},slots:te={},startAdornment:q,type:le="text",value:_e}=s,Le=Cr(s,fse),xe=k.value!=null?k.value:_e,{current:Ve}=de.useRef(xe!=null),Re=de.useRef(),Ze=de.useCallback(ut=>{},[]),et=ep(Re,D,k.ref,Ze),[ct,rt]=de.useState(!1),Ne=J1(),we=K1({props:s,muiFormControl:Ne,states:["color","disabled","error","hiddenLabel","size","required","filled"]});we.focused=Ne?Ne.focused:ct,de.useEffect(()=>{!Ne&&v&&ct&&(rt(!1),U&&U())},[Ne,v,ct,U]);const ze=Ne&&Ne.onFilled,it=Ne&&Ne.onEmpty,nt=de.useCallback(ut=>{gA(ut)?ze&&ze():it&&it()},[ze,it]);hv(()=>{Ve&&nt({value:xe})},[xe,nt,Ve]);const Mt=ut=>{if(we.disabled){ut.stopPropagation();return}ie&&ie(ut),k.onFocus&&k.onFocus(ut),Ne&&Ne.onFocus?Ne.onFocus(ut):rt(!0)},At=ut=>{U&&U(ut),k.onBlur&&k.onBlur(ut),Ne&&Ne.onBlur?Ne.onBlur(ut):rt(!1)},ht=(ut,...He)=>{if(!Ve){const Ce=ut.target||Re.current;if(Ce==null)throw new Error(eb(1));nt({value:Ce.value})}k.onChange&&k.onChange(ut,...He),ee&&ee(ut,...He)};de.useEffect(()=>{nt(Re.current)},[]);const Et=ut=>{Re.current&&ut.currentTarget===ut.target&&Re.current.focus(),ne&&ne(ut)};let wt=O,pt=k;z&&wt==="input"&&(Ie?pt=Qe({type:void 0,minRows:Ie,maxRows:Ie},pt):pt=Qe({type:void 0,maxRows:N,minRows:F},pt),wt=lse);const be=ut=>{nt(ut.animationName==="mui-auto-fill-cancel"?Re.current:{value:"x"})};de.useEffect(()=>{Ne&&Ne.setAdornedStart(!!q)},[Ne,q]);const Z=Qe({},s,{color:we.color||"primary",disabled:we.disabled,endAdornment:w,error:we.error,focused:we.focused,formControl:Ne,fullWidth:x,hiddenLabel:we.hiddenLabel,multiline:z,size:we.size,startAdornment:q,type:le}),ke=mse(Z),lt=te.root||p.Root||FI,mt=j.root||m.root||{},xt=te.input||p.Input||UI;return pt=Qe({},pt,(i=j.input)!=null?i:m.input),Ft.jsxs(de.Fragment,{children:[!E&&gse,Ft.jsxs(lt,Qe({},mt,!mA(lt)&&{ownerState:Qe({},Z,mt.ownerState)},{ref:t,onClick:Et},Le,{className:Ni(ke.root,mt.className,h,he&&"MuiInputBase-readOnly"),children:[q,Ft.jsx(kB.Provider,{value:null,children:Ft.jsx(xt,Qe({ownerState:Z,"aria-invalid":we.error,"aria-describedby":o,autoComplete:l,autoFocus:u,defaultValue:_,disabled:we.disabled,id:A,onAnimationStart:be,name:V,placeholder:ae,readOnly:he,required:we.required,rows:Ie,value:xe,onKeyDown:se,onKeyUp:fe,type:le},pt,!mA(xt)&&{as:wt,ownerState:Qe({},Z,pt.ownerState)},{ref:et,className:Ni(ke.input,pt.className,he&&"MuiInputBase-readOnly"),onBlur:At,onChange:ht,onFocus:Mt}))}),w,ge?ge(Qe({},we,{startAdornment:q})):null]}))]})}),OB=_se;function vse(r){return el("MuiInput",r)}const yse=Qe({},E1,tl("MuiInput",["root","underline","input"])),u$=yse;function bse(r){return el("MuiOutlinedInput",r)}const Tse=Qe({},E1,tl("MuiOutlinedInput",["root","notchedOutline","input"])),M0=Tse;function Ese(r){return el("MuiFilledInput",r)}const $se=Qe({},E1,tl("MuiFilledInput",["root","underline","input"])),Jv=$se,Sse=MV(Ft.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),wse=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],xse={entering:{opacity:1},entered:{opacity:1}},Cse=de.forwardRef(function(e,t){const i=wV(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:o,appear:l=!0,children:u,easing:h,in:p,onEnter:m,onEntered:_,onEntering:v,onExit:E,onExited:w,onExiting:x,style:A,timeout:O=s,TransitionComponent:k=AV}=e,D=Cr(e,wse),N=de.useRef(null),F=ep(N,u.ref,t),z=ae=>he=>{if(ae){const ge=N.current;he===void 0?ae(ge):ae(ge,he)}},V=z(v),U=z((ae,he)=>{IV(ae);const ge=fA({style:A,timeout:O,easing:h},{mode:"enter"});ae.style.webkitTransition=i.transitions.create("opacity",ge),ae.style.transition=i.transitions.create("opacity",ge),m&&m(ae,he)}),ee=z(_),ne=z(x),ie=z(ae=>{const he=fA({style:A,timeout:O,easing:h},{mode:"exit"});ae.style.webkitTransition=i.transitions.create("opacity",he),ae.style.transition=i.transitions.create("opacity",he),E&&E(ae)}),se=z(w),fe=ae=>{o&&o(N.current,ae)};return Ft.jsx(k,Qe({appear:l,in:p,nodeRef:N,onEnter:U,onEntered:ee,onEntering:V,onExit:ie,onExited:se,onExiting:ne,addEndListener:fe,timeout:O},D,{children:(ae,he)=>de.cloneElement(u,Qe({style:Qe({opacity:0,visibility:ae==="exited"&&!p?"hidden":void 0},xse[ae],A,u.props.style),ref:F},he))}))}),Mse=Cse;function Ase(r){return el("MuiBackdrop",r)}tl("MuiBackdrop",["root","invisible"]);const Ise=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Rse=r=>{const{classes:e,invisible:t}=r;return kl({root:["root",t&&"invisible"]},Ase,e)},kse=Nr("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.invisible&&e.invisible]}})(({ownerState:r})=>Qe({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},r.invisible&&{backgroundColor:"transparent"})),Ose=de.forwardRef(function(e,t){var i,s,o;const l=Ol({props:e,name:"MuiBackdrop"}),{children:u,className:h,component:p="div",components:m={},componentsProps:_={},invisible:v=!1,open:E,slotProps:w={},slots:x={},TransitionComponent:A=Mse,transitionDuration:O}=l,k=Cr(l,Ise),D=Qe({},l,{component:p,invisible:v}),N=Rse(D),F=(i=w.root)!=null?i:_.root;return Ft.jsx(A,Qe({in:E,timeout:O},k,{children:Ft.jsx(kse,Qe({"aria-hidden":!0},F,{as:(s=(o=x.root)!=null?o:m.Root)!=null?s:p,className:Ni(N.root,h,F==null?void 0:F.className),ownerState:Qe({},D,F==null?void 0:F.ownerState),classes:N,ref:t,children:u}))}))}),Lse=Ose,Nse=tl("MuiBox",["root"]),Dse=Nse,Bse=SV(),Pse=Ute({themeId:cw,defaultTheme:Bse,defaultClassName:Dse.root,generateClassName:yB.generate}),LB=Pse;function Fse(r){return el("MuiButton",r)}const Use=tl("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),qx=Use,zse=de.createContext({}),Hse=zse,Gse=de.createContext(void 0),Wse=Gse,Vse=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],jse=r=>{const{color:e,disableElevation:t,fullWidth:i,size:s,variant:o,classes:l}=r,u={root:["root",o,`${o}${Hr(e)}`,`size${Hr(s)}`,`${o}Size${Hr(s)}`,`color${Hr(e)}`,t&&"disableElevation",i&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${Hr(s)}`],endIcon:["icon","endIcon",`iconSize${Hr(s)}`]},h=kl(u,Fse,l);return Qe({},l,h)},OV=r=>Qe({},r.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},r.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},r.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),Xse=Nr(kV,{shouldForwardProp:r=>cg(r)||r==="classes",name:"MuiButton",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[t.variant],e[`${t.variant}${Hr(t.color)}`],e[`size${Hr(t.size)}`],e[`${t.variant}Size${Hr(t.size)}`],t.color==="inherit"&&e.colorInherit,t.disableElevation&&e.disableElevation,t.fullWidth&&e.fullWidth]}})(({theme:r,ownerState:e})=>{var t,i;const s=r.palette.mode==="light"?r.palette.grey[300]:r.palette.grey[800],o=r.palette.mode==="light"?r.palette.grey.A100:r.palette.grey[700];return Qe({},r.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(r.vars||r).shape.borderRadius,transition:r.transitions.create(["background-color","box-shadow","border-color","color"],{duration:r.transitions.duration.short}),"&:hover":Qe({textDecoration:"none",backgroundColor:r.vars?`rgba(${r.vars.palette.text.primaryChannel} / ${r.vars.palette.action.hoverOpacity})`:J0(r.palette.text.primary,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:r.vars?`rgba(${r.vars.palette[e.color].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:J0(r.palette[e.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(r.vars||r).palette[e.color].main}`,backgroundColor:r.vars?`rgba(${r.vars.palette[e.color].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:J0(r.palette[e.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:r.vars?r.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(r.vars||r).shadows[4],"@media (hover: none)":{boxShadow:(r.vars||r).shadows[2],backgroundColor:(r.vars||r).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(r.vars||r).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(r.vars||r).palette[e.color].main}}),"&:active":Qe({},e.variant==="contained"&&{boxShadow:(r.vars||r).shadows[8]}),[`&.${qx.focusVisible}`]:Qe({},e.variant==="contained"&&{boxShadow:(r.vars||r).shadows[6]}),[`&.${qx.disabled}`]:Qe({color:(r.vars||r).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(r.vars||r).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(r.vars||r).palette.action.disabled,boxShadow:(r.vars||r).shadows[0],backgroundColor:(r.vars||r).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(r.vars||r).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(r.vars||r).palette[e.color].main,border:r.vars?`1px solid rgba(${r.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${J0(r.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:r.vars?r.vars.palette.text.primary:(t=(i=r.palette).getContrastText)==null?void 0:t.call(i,r.palette.grey[300]),backgroundColor:r.vars?r.vars.palette.Button.inheritContainedBg:s,boxShadow:(r.vars||r).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(r.vars||r).palette[e.color].contrastText,backgroundColor:(r.vars||r).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:r.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:r.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:r.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:r.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:r.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:r.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:r})=>r.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${qx.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${qx.disabled}`]:{boxShadow:"none"}}),Yse=Nr("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.startIcon,e[`iconSize${Hr(t.size)}`]]}})(({ownerState:r})=>Qe({display:"inherit",marginRight:8,marginLeft:-4},r.size==="small"&&{marginLeft:-2},OV(r))),Kse=Nr("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.endIcon,e[`iconSize${Hr(t.size)}`]]}})(({ownerState:r})=>Qe({display:"inherit",marginRight:-4,marginLeft:8},r.size==="small"&&{marginRight:-2},OV(r))),Jse=de.forwardRef(function(e,t){const i=de.useContext(Hse),s=de.useContext(Wse),o=EB(i,e),l=Ol({props:o,name:"MuiButton"}),{children:u,color:h="primary",component:p="button",className:m,disabled:_=!1,disableElevation:v=!1,disableFocusRipple:E=!1,endIcon:w,focusVisibleClassName:x,fullWidth:A=!1,size:O="medium",startIcon:k,type:D,variant:N="text"}=l,F=Cr(l,Vse),z=Qe({},l,{color:h,component:p,disabled:_,disableElevation:v,disableFocusRipple:E,fullWidth:A,size:O,type:D,variant:N}),V=jse(z),U=k&&Ft.jsx(Yse,{className:V.startIcon,ownerState:z,children:k}),ee=w&&Ft.jsx(Kse,{className:V.endIcon,ownerState:z,children:w}),ne=s||"";return Ft.jsxs(Xse,Qe({ownerState:z,className:Ni(i.className,V.root,m,ne),component:p,disabled:_,focusRipple:!E,focusVisibleClassName:Ni(V.focusVisible,x),ref:t,type:D},F,{classes:V,children:[U,u,ee]}))}),Jk=Jse,Qse=Ine({createStyledComponent:Nr("div",{name:"MuiContainer",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[`maxWidth${Hr(String(t.maxWidth))}`],t.fixed&&e.fixed,t.disableGutters&&e.disableGutters]}}),useThemeProps:r=>Ol({props:r,name:"MuiContainer"})}),pz=Qse;function qse(r){return el("MuiModal",r)}tl("MuiModal",["root","hidden","backdrop"]);const Zse=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],eoe=r=>{const{open:e,exited:t,classes:i}=r;return kl({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},qse,i)},toe=Nr("div",{name:"MuiModal",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.open&&t.exited&&e.hidden]}})(({theme:r,ownerState:e})=>Qe({position:"fixed",zIndex:(r.vars||r).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),noe=Nr(Lse,{name:"MuiModal",slot:"Backdrop",overridesResolver:(r,e)=>e.backdrop})({zIndex:-1}),roe=de.forwardRef(function(e,t){var i,s,o,l,u,h;const p=Ol({name:"MuiModal",props:e}),{BackdropComponent:m=noe,BackdropProps:_,className:v,closeAfterTransition:E=!1,children:w,container:x,component:A,components:O={},componentsProps:k={},disableAutoFocus:D=!1,disableEnforceFocus:N=!1,disableEscapeKeyDown:F=!1,disablePortal:z=!1,disableRestoreFocus:V=!1,disableScrollLock:U=!1,hideBackdrop:ee=!1,keepMounted:ne=!1,onBackdropClick:ie,open:se,slotProps:fe,slots:ae}=p,he=Cr(p,Zse),ge=Qe({},p,{closeAfterTransition:E,disableAutoFocus:D,disableEnforceFocus:N,disableEscapeKeyDown:F,disablePortal:z,disableRestoreFocus:V,disableScrollLock:U,hideBackdrop:ee,keepMounted:ne}),{getRootProps:Ie,getBackdropProps:j,getTransitionProps:te,portalRef:q,isTopModal:le,exited:_e,hasTransition:Le}=ise(Qe({},ge,{rootRef:t})),xe=Qe({},ge,{exited:_e}),Ve=eoe(xe),Re={};if(w.props.tabIndex===void 0&&(Re.tabIndex="-1"),Le){const{onEnter:ze,onExited:it}=te();Re.onEnter=ze,Re.onExited=it}const Ze=(i=(s=ae==null?void 0:ae.root)!=null?s:O.Root)!=null?i:toe,et=(o=(l=ae==null?void 0:ae.backdrop)!=null?l:O.Backdrop)!=null?o:m,ct=(u=fe==null?void 0:fe.root)!=null?u:k.root,rt=(h=fe==null?void 0:fe.backdrop)!=null?h:k.backdrop,Ne=T1({elementType:Ze,externalSlotProps:ct,externalForwardedProps:he,getSlotProps:Ie,additionalProps:{ref:t,as:A},ownerState:xe,className:Ni(v,ct==null?void 0:ct.className,Ve==null?void 0:Ve.root,!xe.open&&xe.exited&&(Ve==null?void 0:Ve.hidden))}),we=T1({elementType:et,externalSlotProps:rt,additionalProps:_,getSlotProps:ze=>j(Qe({},ze,{onClick:it=>{ie&&ie(it),ze!=null&&ze.onClick&&ze.onClick(it)}})),className:Ni(rt==null?void 0:rt.className,_==null?void 0:_.className,Ve==null?void 0:Ve.backdrop),ownerState:xe});return!ne&&!se&&(!Le||_e)?null:Ft.jsx(Kie,{ref:q,container:x,disablePortal:z,children:Ft.jsxs(Ze,Qe({},Ne,{children:[!ee&&m?Ft.jsx(et,Qe({},we)):null,Ft.jsx(Xie,{disableEnforceFocus:N,disableAutoFocus:D,disableRestoreFocus:V,isEnabled:le,open:se,children:de.cloneElement(w,Re)})]}))})}),ioe=roe,soe=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],ooe=r=>{const{classes:e,disableUnderline:t}=r,s=kl({root:["root",!t&&"underline"],input:["input"]},Ese,e);return Qe({},e,s)},aoe=Nr(FI,{shouldForwardProp:r=>cg(r)||r==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[...BI(r,e),!t.disableUnderline&&e.underline]}})(({theme:r,ownerState:e})=>{var t;const i=r.palette.mode==="light",s=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",u=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return Qe({position:"relative",backgroundColor:r.vars?r.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(r.vars||r).shape.borderRadius,borderTopRightRadius:(r.vars||r).shape.borderRadius,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),"&:hover":{backgroundColor:r.vars?r.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:r.vars?r.vars.palette.FilledInput.bg:o}},[`&.${Jv.focused}`]:{backgroundColor:r.vars?r.vars.palette.FilledInput.bg:o},[`&.${Jv.disabled}`]:{backgroundColor:r.vars?r.vars.palette.FilledInput.disabledBg:u}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t=(r.vars||r).palette[e.color||"primary"])==null?void 0:t.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Jv.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Jv.error}`]:{"&::before, &::after":{borderBottomColor:(r.vars||r).palette.error.main}},"&::before":{borderBottom:`1px solid ${r.vars?`rgba(${r.vars.palette.common.onBackgroundChannel} / ${r.vars.opacity.inputUnderline})`:s}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Jv.disabled}, .${Jv.error}):before`]:{borderBottom:`1px solid ${(r.vars||r).palette.text.primary}`},[`&.${Jv.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&Qe({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),loe=Nr(UI,{name:"MuiFilledInput",slot:"Input",overridesResolver:PI})(({theme:r,ownerState:e})=>Qe({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!r.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:r.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:r.palette.mode==="light"?null:"#fff",caretColor:r.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},r.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[r.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),LV=de.forwardRef(function(e,t){var i,s,o,l;const u=Ol({props:e,name:"MuiFilledInput"}),{components:h={},componentsProps:p,fullWidth:m=!1,inputComponent:_="input",multiline:v=!1,slotProps:E,slots:w={},type:x="text"}=u,A=Cr(u,soe),O=Qe({},u,{fullWidth:m,inputComponent:_,multiline:v,type:x}),k=ooe(u),D={root:{ownerState:O},input:{ownerState:O}},N=E??p?yf(D,E??p):D,F=(i=(s=w.root)!=null?s:h.Root)!=null?i:aoe,z=(o=(l=w.input)!=null?l:h.Input)!=null?o:loe;return Ft.jsx(OB,Qe({slots:{root:F,input:z},componentsProps:N,fullWidth:m,inputComponent:_,multiline:v,ref:t,type:x},A,{classes:k}))});LV.muiName="Input";const NV=LV;function uoe(r){return el("MuiFormControl",r)}tl("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const coe=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],hoe=r=>{const{classes:e,margin:t,fullWidth:i}=r,s={root:["root",t!=="none"&&`margin${Hr(t)}`,i&&"fullWidth"]};return kl(s,uoe,e)},doe=Nr("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:r},e)=>Qe({},e.root,e[`margin${Hr(r.margin)}`],r.fullWidth&&e.fullWidth)})(({ownerState:r})=>Qe({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},r.margin==="normal"&&{marginTop:16,marginBottom:8},r.margin==="dense"&&{marginTop:8,marginBottom:4},r.fullWidth&&{width:"100%"})),poe=de.forwardRef(function(e,t){const i=Ol({props:e,name:"MuiFormControl"}),{children:s,className:o,color:l="primary",component:u="div",disabled:h=!1,error:p=!1,focused:m,fullWidth:_=!1,hiddenLabel:v=!1,margin:E="none",required:w=!1,size:x="medium",variant:A="outlined"}=i,O=Cr(i,coe),k=Qe({},i,{color:l,component:u,disabled:h,error:p,fullWidth:_,hiddenLabel:v,margin:E,required:w,size:x,variant:A}),D=hoe(k),[N,F]=de.useState(()=>{let fe=!1;return s&&de.Children.forEach(s,ae=>{if(!bM(ae,["Input","Select"]))return;const he=bM(ae,["Select"])?ae.props.input:ae;he&&hse(he.props)&&(fe=!0)}),fe}),[z,V]=de.useState(()=>{let fe=!1;return s&&de.Children.forEach(s,ae=>{bM(ae,["Input","Select"])&&(gA(ae.props,!0)||gA(ae.props.inputProps,!0))&&(fe=!0)}),fe}),[U,ee]=de.useState(!1);h&&U&&ee(!1);const ne=m!==void 0&&!h?m:U;let ie;const se=de.useMemo(()=>({adornedStart:N,setAdornedStart:F,color:l,disabled:h,error:p,filled:z,focused:ne,fullWidth:_,hiddenLabel:v,size:x,onBlur:()=>{ee(!1)},onEmpty:()=>{V(!1)},onFilled:()=>{V(!0)},onFocus:()=>{ee(!0)},registerEffect:ie,required:w,variant:A}),[N,l,h,p,z,ne,_,v,ie,w,x,A]);return Ft.jsx(kB.Provider,{value:se,children:Ft.jsx(doe,Qe({as:u,ownerState:k,className:Ni(D.root,o),ref:t},O,{children:s}))})}),foe=poe;function moe(r){return el("MuiFormHelperText",r)}const goe=tl("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),fz=goe;var mz;const _oe=["children","className","component","disabled","error","filled","focused","margin","required","variant"],voe=r=>{const{classes:e,contained:t,size:i,disabled:s,error:o,filled:l,focused:u,required:h}=r,p={root:["root",s&&"disabled",o&&"error",i&&`size${Hr(i)}`,t&&"contained",u&&"focused",l&&"filled",h&&"required"]};return kl(p,moe,e)},yoe=Nr("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,t.size&&e[`size${Hr(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(({theme:r,ownerState:e})=>Qe({color:(r.vars||r).palette.text.secondary},r.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${fz.disabled}`]:{color:(r.vars||r).palette.text.disabled},[`&.${fz.error}`]:{color:(r.vars||r).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),boe=de.forwardRef(function(e,t){const i=Ol({props:e,name:"MuiFormHelperText"}),{children:s,className:o,component:l="p"}=i,u=Cr(i,_oe),h=J1(),p=K1({props:i,muiFormControl:h,states:["variant","size","disabled","error","filled","focused","required"]}),m=Qe({},i,{component:l,contained:p.variant==="filled"||p.variant==="outlined",variant:p.variant,size:p.size,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required}),_=voe(m);return Ft.jsx(yoe,Qe({as:l,ownerState:m,className:Ni(_.root,o),ref:t},u,{children:s===" "?mz||(mz=Ft.jsx("span",{className:"notranslate",children:"​"})):s}))}),Toe=boe;function Eoe(r){return el("MuiFormLabel",r)}const $oe=tl("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),tS=$oe,Soe=["children","className","color","component","disabled","error","filled","focused","required"],woe=r=>{const{classes:e,color:t,focused:i,disabled:s,error:o,filled:l,required:u}=r,h={root:["root",`color${Hr(t)}`,s&&"disabled",o&&"error",l&&"filled",i&&"focused",u&&"required"],asterisk:["asterisk",o&&"error"]};return kl(h,Eoe,e)},xoe=Nr("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:r},e)=>Qe({},e.root,r.color==="secondary"&&e.colorSecondary,r.filled&&e.filled)})(({theme:r,ownerState:e})=>Qe({color:(r.vars||r).palette.text.secondary},r.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${tS.focused}`]:{color:(r.vars||r).palette[e.color].main},[`&.${tS.disabled}`]:{color:(r.vars||r).palette.text.disabled},[`&.${tS.error}`]:{color:(r.vars||r).palette.error.main}})),Coe=Nr("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(r,e)=>e.asterisk})(({theme:r})=>({[`&.${tS.error}`]:{color:(r.vars||r).palette.error.main}})),Moe=de.forwardRef(function(e,t){const i=Ol({props:e,name:"MuiFormLabel"}),{children:s,className:o,component:l="label"}=i,u=Cr(i,Soe),h=J1(),p=K1({props:i,muiFormControl:h,states:["color","required","focused","disabled","error","filled"]}),m=Qe({},i,{color:p.color||"primary",component:l,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required}),_=woe(m);return Ft.jsxs(xoe,Qe({as:l,ownerState:m,className:Ni(_.root,o),ref:t},u,{children:[s,p.required&&Ft.jsxs(Coe,{ownerState:m,"aria-hidden":!0,className:_.asterisk,children:[" ","*"]})]}))}),Aoe=Moe,Ioe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function BN(r){return`scale(${r}, ${r**2})`}const Roe={entering:{opacity:1,transform:BN(1)},entered:{opacity:1,transform:"none"}},Qk=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),DV=de.forwardRef(function(e,t){const{addEndListener:i,appear:s=!0,children:o,easing:l,in:u,onEnter:h,onEntered:p,onEntering:m,onExit:_,onExited:v,onExiting:E,style:w,timeout:x="auto",TransitionComponent:A=AV}=e,O=Cr(e,Ioe),k=fV(),D=de.useRef(),N=wV(),F=de.useRef(null),z=ep(F,o.ref,t),V=he=>ge=>{if(he){const Ie=F.current;ge===void 0?he(Ie):he(Ie,ge)}},U=V(m),ee=V((he,ge)=>{IV(he);const{duration:Ie,delay:j,easing:te}=fA({style:w,timeout:x,easing:l},{mode:"enter"});let q;x==="auto"?(q=N.transitions.getAutoHeightDuration(he.clientHeight),D.current=q):q=Ie,he.style.transition=[N.transitions.create("opacity",{duration:q,delay:j}),N.transitions.create("transform",{duration:Qk?q:q*.666,delay:j,easing:te})].join(","),h&&h(he,ge)}),ne=V(p),ie=V(E),se=V(he=>{const{duration:ge,delay:Ie,easing:j}=fA({style:w,timeout:x,easing:l},{mode:"exit"});let te;x==="auto"?(te=N.transitions.getAutoHeightDuration(he.clientHeight),D.current=te):te=ge,he.style.transition=[N.transitions.create("opacity",{duration:te,delay:Ie}),N.transitions.create("transform",{duration:Qk?te:te*.666,delay:Qk?Ie:Ie||te*.333,easing:j})].join(","),he.style.opacity=0,he.style.transform=BN(.75),_&&_(he)}),fe=V(v),ae=he=>{x==="auto"&&k.start(D.current||0,he),i&&i(F.current,he)};return Ft.jsx(A,Qe({appear:s,in:u,nodeRef:F,onEnter:ee,onEntered:ne,onEntering:U,onExit:se,onExited:fe,onExiting:ie,addEndListener:ae,timeout:x==="auto"?null:x},O,{children:(he,ge)=>de.cloneElement(o,Qe({style:Qe({opacity:0,transform:BN(.75),visibility:he==="exited"&&!u?"hidden":void 0},Roe[he],w,o.props.style),ref:z},ge))}))});DV.muiSupportAuto=!0;const koe=DV,Ooe=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Loe=r=>{const{classes:e,disableUnderline:t}=r,s=kl({root:["root",!t&&"underline"],input:["input"]},vse,e);return Qe({},e,s)},Noe=Nr(FI,{shouldForwardProp:r=>cg(r)||r==="classes",name:"MuiInput",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[...BI(r,e),!t.disableUnderline&&e.underline]}})(({theme:r,ownerState:e})=>{let i=r.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return r.vars&&(i=`rgba(${r.vars.palette.common.onBackgroundChannel} / ${r.vars.opacity.inputUnderline})`),Qe({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(r.vars||r).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${u$.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${u$.error}`]:{"&::before, &::after":{borderBottomColor:(r.vars||r).palette.error.main}},"&::before":{borderBottom:`1px solid ${i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:r.transitions.create("border-bottom-color",{duration:r.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${u$.disabled}, .${u$.error}):before`]:{borderBottom:`2px solid ${(r.vars||r).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${i}`}},[`&.${u$.disabled}:before`]:{borderBottomStyle:"dotted"}})}),Doe=Nr(UI,{name:"MuiInput",slot:"Input",overridesResolver:PI})({}),BV=de.forwardRef(function(e,t){var i,s,o,l;const u=Ol({props:e,name:"MuiInput"}),{disableUnderline:h,components:p={},componentsProps:m,fullWidth:_=!1,inputComponent:v="input",multiline:E=!1,slotProps:w,slots:x={},type:A="text"}=u,O=Cr(u,Ooe),k=Loe(u),N={root:{ownerState:{disableUnderline:h}}},F=w??m?yf(w??m,N):N,z=(i=(s=x.root)!=null?s:p.Root)!=null?i:Noe,V=(o=(l=x.input)!=null?l:p.Input)!=null?o:Doe;return Ft.jsx(OB,Qe({slots:{root:z,input:V},slotProps:F,fullWidth:_,inputComponent:v,multiline:E,ref:t,type:A},O,{classes:k}))});BV.muiName="Input";const PV=BV;function Boe(r){return el("MuiInputLabel",r)}tl("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Poe=["disableAnimation","margin","shrink","variant","className"],Foe=r=>{const{classes:e,formControl:t,size:i,shrink:s,disableAnimation:o,variant:l,required:u}=r,h={root:["root",t&&"formControl",!o&&"animated",s&&"shrink",i&&i!=="normal"&&`size${Hr(i)}`,l],asterisk:[u&&"asterisk"]},p=kl(h,Boe,e);return Qe({},e,p)},Uoe=Nr(Aoe,{shouldForwardProp:r=>cg(r)||r==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`& .${tS.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(({theme:r,ownerState:e})=>Qe({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:r.transitions.create(["color","transform","max-width"],{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut})},e.variant==="filled"&&Qe({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&Qe({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&Qe({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),zoe=de.forwardRef(function(e,t){const i=Ol({name:"MuiInputLabel",props:e}),{disableAnimation:s=!1,shrink:o,className:l}=i,u=Cr(i,Poe),h=J1();let p=o;typeof p>"u"&&h&&(p=h.filled||h.focused||h.adornedStart);const m=K1({props:i,muiFormControl:h,states:["size","variant","required","focused"]}),_=Qe({},i,{disableAnimation:s,formControl:h,shrink:p,size:m.size,variant:m.variant,required:m.required,focused:m.focused}),v=Foe(_);return Ft.jsx(Uoe,Qe({"data-shrink":p,ownerState:_,ref:t,className:Ni(v.root,l)},u,{classes:v}))}),Hoe=zoe,Goe=de.createContext({}),Woe=Goe;function Voe(r){return el("MuiList",r)}tl("MuiList",["root","padding","dense","subheader"]);const joe=["children","className","component","dense","disablePadding","subheader"],Xoe=r=>{const{classes:e,disablePadding:t,dense:i,subheader:s}=r;return kl({root:["root",!t&&"padding",i&&"dense",s&&"subheader"]},Voe,e)},Yoe=Nr("ul",{name:"MuiList",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})(({ownerState:r})=>Qe({listStyle:"none",margin:0,padding:0,position:"relative"},!r.disablePadding&&{paddingTop:8,paddingBottom:8},r.subheader&&{paddingTop:0})),Koe=de.forwardRef(function(e,t){const i=Ol({props:e,name:"MuiList"}),{children:s,className:o,component:l="ul",dense:u=!1,disablePadding:h=!1,subheader:p}=i,m=Cr(i,joe),_=de.useMemo(()=>({dense:u}),[u]),v=Qe({},i,{component:l,dense:u,disablePadding:h}),E=Xoe(v);return Ft.jsx(Woe.Provider,{value:_,children:Ft.jsxs(Yoe,Qe({as:l,className:Ni(E.root,o),ref:t,ownerState:v},m,{children:[p,s]}))})}),Joe=Koe,Qoe=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function qk(r,e,t){return r===e?r.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:r.firstChild}function gz(r,e,t){return r===e?t?r.firstChild:r.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:r.lastChild}function FV(r,e){if(e===void 0)return!0;let t=r.innerText;return t===void 0&&(t=r.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.indexOf(e.keys.join(""))===0}function c$(r,e,t,i,s,o){let l=!1,u=s(r,e,e?t:!1);for(;u;){if(u===r.firstChild){if(l)return!1;l=!0}const h=i?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!FV(u,o)||h)u=s(r,u,t);else return u.focus(),!0}return!1}const qoe=de.forwardRef(function(e,t){const{actions:i,autoFocus:s=!1,autoFocusItem:o=!1,children:l,className:u,disabledItemsFocusable:h=!1,disableListWrap:p=!1,onKeyDown:m,variant:_="selectedMenu"}=e,v=Cr(e,Qoe),E=de.useRef(null),w=de.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});hv(()=>{s&&E.current.focus()},[s]),de.useImperativeHandle(i,()=>({adjustStyleForScrollbar:(D,{direction:N})=>{const F=!E.current.style.width;if(D.clientHeight<E.current.clientHeight&&F){const z=`${gV(Np(D))}px`;E.current.style[N==="rtl"?"paddingLeft":"paddingRight"]=z,E.current.style.width=`calc(100% + ${z})`}return E.current}}),[]);const x=D=>{const N=E.current,F=D.key,z=Np(N).activeElement;if(F==="ArrowDown")D.preventDefault(),c$(N,z,p,h,qk);else if(F==="ArrowUp")D.preventDefault(),c$(N,z,p,h,gz);else if(F==="Home")D.preventDefault(),c$(N,null,p,h,qk);else if(F==="End")D.preventDefault(),c$(N,null,p,h,gz);else if(F.length===1){const V=w.current,U=F.toLowerCase(),ee=performance.now();V.keys.length>0&&(ee-V.lastTime>500?(V.keys=[],V.repeating=!0,V.previousKeyMatched=!0):V.repeating&&U!==V.keys[0]&&(V.repeating=!1)),V.lastTime=ee,V.keys.push(U);const ne=z&&!V.repeating&&FV(z,V);V.previousKeyMatched&&(ne||c$(N,z,!1,h,qk,V))?D.preventDefault():V.previousKeyMatched=!1}m&&m(D)},A=ep(E,t);let O=-1;de.Children.forEach(l,(D,N)=>{if(!de.isValidElement(D)){O===N&&(O+=1,O>=l.length&&(O=-1));return}D.props.disabled||(_==="selectedMenu"&&D.props.selected||O===-1)&&(O=N),O===N&&(D.props.disabled||D.props.muiSkipListHighlight||D.type.muiSkipListHighlight)&&(O+=1,O>=l.length&&(O=-1))});const k=de.Children.map(l,(D,N)=>{if(N===O){const F={};return o&&(F.autoFocus=!0),D.props.tabIndex===void 0&&_==="selectedMenu"&&(F.tabIndex=0),de.cloneElement(D,F)}return D});return Ft.jsx(Joe,Qe({role:"menu",ref:A,className:u,onKeyDown:x,tabIndex:s?0:-1},v,{children:k}))}),Zoe=qoe;function eae(r){return el("MuiPopover",r)}tl("MuiPopover",["root","paper"]);const tae=["onEntering"],nae=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],rae=["slotProps"];function _z(r,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=r.height/2:e==="bottom"&&(t=r.height),t}function vz(r,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=r.width/2:e==="right"&&(t=r.width),t}function yz(r){return[r.horizontal,r.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function Zk(r){return typeof r=="function"?r():r}const iae=r=>{const{classes:e}=r;return kl({root:["root"],paper:["paper"]},eae,e)},sae=Nr(ioe,{name:"MuiPopover",slot:"Root",overridesResolver:(r,e)=>e.root})({}),UV=Nr(sie,{name:"MuiPopover",slot:"Paper",overridesResolver:(r,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),oae=de.forwardRef(function(e,t){var i,s,o;const l=Ol({props:e,name:"MuiPopover"}),{action:u,anchorEl:h,anchorOrigin:p={vertical:"top",horizontal:"left"},anchorPosition:m,anchorReference:_="anchorEl",children:v,className:E,container:w,elevation:x=8,marginThreshold:A=16,open:O,PaperProps:k={},slots:D,slotProps:N,transformOrigin:F={vertical:"top",horizontal:"left"},TransitionComponent:z=koe,transitionDuration:V="auto",TransitionProps:{onEntering:U}={},disableScrollLock:ee=!1}=l,ne=Cr(l.TransitionProps,tae),ie=Cr(l,nae),se=(i=N==null?void 0:N.paper)!=null?i:k,fe=de.useRef(),ae=ep(fe,se.ref),he=Qe({},l,{anchorOrigin:p,anchorReference:_,elevation:x,marginThreshold:A,externalPaperSlotProps:se,transformOrigin:F,TransitionComponent:z,transitionDuration:V,TransitionProps:ne}),ge=iae(he),Ie=de.useCallback(()=>{if(_==="anchorPosition")return m;const ze=Zk(h),nt=(ze&&ze.nodeType===1?ze:Np(fe.current).body).getBoundingClientRect();return{top:nt.top+_z(nt,p.vertical),left:nt.left+vz(nt,p.horizontal)}},[h,p.horizontal,p.vertical,m,_]),j=de.useCallback(ze=>({vertical:_z(ze,F.vertical),horizontal:vz(ze,F.horizontal)}),[F.horizontal,F.vertical]),te=de.useCallback(ze=>{const it={width:ze.offsetWidth,height:ze.offsetHeight},nt=j(it);if(_==="none")return{top:null,left:null,transformOrigin:yz(nt)};const Mt=Ie();let At=Mt.top-nt.vertical,ht=Mt.left-nt.horizontal;const Et=At+it.height,wt=ht+it.width,pt=dv(Zk(h)),be=pt.innerHeight-A,Z=pt.innerWidth-A;if(A!==null&&At<A){const ke=At-A;At-=ke,nt.vertical+=ke}else if(A!==null&&Et>be){const ke=Et-be;At-=ke,nt.vertical+=ke}if(A!==null&&ht<A){const ke=ht-A;ht-=ke,nt.horizontal+=ke}else if(wt>Z){const ke=wt-Z;ht-=ke,nt.horizontal+=ke}return{top:`${Math.round(At)}px`,left:`${Math.round(ht)}px`,transformOrigin:yz(nt)}},[h,_,Ie,j,A]),[q,le]=de.useState(O),_e=de.useCallback(()=>{const ze=fe.current;if(!ze)return;const it=te(ze);it.top!==null&&(ze.style.top=it.top),it.left!==null&&(ze.style.left=it.left),ze.style.transformOrigin=it.transformOrigin,le(!0)},[te]);de.useEffect(()=>(ee&&window.addEventListener("scroll",_e),()=>window.removeEventListener("scroll",_e)),[h,ee,_e]);const Le=(ze,it)=>{U&&U(ze,it),_e()},xe=()=>{le(!1)};de.useEffect(()=>{O&&_e()}),de.useImperativeHandle(u,()=>O?{updatePosition:()=>{_e()}}:null,[O,_e]),de.useEffect(()=>{if(!O)return;const ze=$B(()=>{_e()}),it=dv(h);return it.addEventListener("resize",ze),()=>{ze.clear(),it.removeEventListener("resize",ze)}},[h,O,_e]);let Ve=V;V==="auto"&&!z.muiSupportAuto&&(Ve=void 0);const Re=w||(h?Np(Zk(h)).body:void 0),Ze=(s=D==null?void 0:D.root)!=null?s:sae,et=(o=D==null?void 0:D.paper)!=null?o:UV,ct=T1({elementType:et,externalSlotProps:Qe({},se,{style:q?se.style:Qe({},se.style,{opacity:0})}),additionalProps:{elevation:x,ref:ae},ownerState:he,className:Ni(ge.paper,se==null?void 0:se.className)}),rt=T1({elementType:Ze,externalSlotProps:(N==null?void 0:N.root)||{},externalForwardedProps:ie,additionalProps:{ref:t,slotProps:{backdrop:{invisible:!0}},container:Re,open:O},ownerState:he,className:Ni(ge.root,E)}),{slotProps:Ne}=rt,we=Cr(rt,rae);return Ft.jsx(Ze,Qe({},we,!mA(Ze)&&{slotProps:Ne,disableScrollLock:ee},{children:Ft.jsx(z,Qe({appear:!0,in:O,onEntering:Le,onExited:xe,timeout:Ve},ne,{children:Ft.jsx(et,Qe({},ct,{children:v}))}))}))}),aae=oae;function lae(r){return el("MuiMenu",r)}tl("MuiMenu",["root","paper","list"]);const uae=["onEntering"],cae=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],hae={vertical:"top",horizontal:"right"},dae={vertical:"top",horizontal:"left"},pae=r=>{const{classes:e}=r;return kl({root:["root"],paper:["paper"],list:["list"]},lae,e)},fae=Nr(aae,{shouldForwardProp:r=>cg(r)||r==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(r,e)=>e.root})({}),mae=Nr(UV,{name:"MuiMenu",slot:"Paper",overridesResolver:(r,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),gae=Nr(Zoe,{name:"MuiMenu",slot:"List",overridesResolver:(r,e)=>e.list})({outline:0}),_ae=de.forwardRef(function(e,t){var i,s;const o=Ol({props:e,name:"MuiMenu"}),{autoFocus:l=!0,children:u,className:h,disableAutoFocusItem:p=!1,MenuListProps:m={},onClose:_,open:v,PaperProps:E={},PopoverClasses:w,transitionDuration:x="auto",TransitionProps:{onEntering:A}={},variant:O="selectedMenu",slots:k={},slotProps:D={}}=o,N=Cr(o.TransitionProps,uae),F=Cr(o,cae),z=Ene(),V=Qe({},o,{autoFocus:l,disableAutoFocusItem:p,MenuListProps:m,onEntering:A,PaperProps:E,transitionDuration:x,TransitionProps:N,variant:O}),U=pae(V),ee=l&&!p&&v,ne=de.useRef(null),ie=(j,te)=>{ne.current&&ne.current.adjustStyleForScrollbar(j,{direction:z?"rtl":"ltr"}),A&&A(j,te)},se=j=>{j.key==="Tab"&&(j.preventDefault(),_&&_(j,"tabKeyDown"))};let fe=-1;de.Children.map(u,(j,te)=>{de.isValidElement(j)&&(j.props.disabled||(O==="selectedMenu"&&j.props.selected||fe===-1)&&(fe=te))});const ae=(i=k.paper)!=null?i:mae,he=(s=D.paper)!=null?s:E,ge=T1({elementType:k.root,externalSlotProps:D.root,ownerState:V,className:[U.root,h]}),Ie=T1({elementType:ae,externalSlotProps:he,ownerState:V,className:U.paper});return Ft.jsx(fae,Qe({onClose:_,anchorOrigin:{vertical:"bottom",horizontal:z?"right":"left"},transformOrigin:z?hae:dae,slots:{paper:ae,root:k.root},slotProps:{root:ge,paper:Ie},open:v,ref:t,transitionDuration:x,TransitionProps:Qe({onEntering:ie},N),ownerState:V},F,{classes:w,children:Ft.jsx(gae,Qe({onKeyDown:se,actions:ne,autoFocus:l&&(fe===-1||p),autoFocusItem:ee,variant:O},m,{className:Ni(U.list,m.className),children:u}))}))}),vae=_ae;function yae(r){return el("MuiNativeSelect",r)}const bae=tl("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),NB=bae,Tae=["className","disabled","error","IconComponent","inputRef","variant"],Eae=r=>{const{classes:e,variant:t,disabled:i,multiple:s,open:o,error:l}=r,u={select:["select",t,i&&"disabled",s&&"multiple",l&&"error"],icon:["icon",`icon${Hr(t)}`,o&&"iconOpen",i&&"disabled"]};return kl(u,yae,e)},zV=({ownerState:r,theme:e})=>Qe({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":Qe({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${NB.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},r.variant==="filled"&&{"&&&":{paddingRight:32}},r.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),$ae=Nr("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:cg,overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.select,e[t.variant],t.error&&e.error,{[`&.${NB.multiple}`]:e.multiple}]}})(zV),HV=({ownerState:r,theme:e})=>Qe({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${NB.disabled}`]:{color:(e.vars||e).palette.action.disabled}},r.open&&{transform:"rotate(180deg)"},r.variant==="filled"&&{right:7},r.variant==="outlined"&&{right:7}),Sae=Nr("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.icon,t.variant&&e[`icon${Hr(t.variant)}`],t.open&&e.iconOpen]}})(HV),wae=de.forwardRef(function(e,t){const{className:i,disabled:s,error:o,IconComponent:l,inputRef:u,variant:h="standard"}=e,p=Cr(e,Tae),m=Qe({},e,{disabled:s,variant:h,error:o}),_=Eae(m);return Ft.jsxs(de.Fragment,{children:[Ft.jsx($ae,Qe({ownerState:m,className:Ni(_.select,i),disabled:s,ref:u||t},p)),e.multiple?null:Ft.jsx(Sae,{as:l,ownerState:m,className:_.icon})]})}),xae=wae;var bz;const Cae=["children","classes","className","label","notched"],Mae=Nr("fieldset",{shouldForwardProp:cg})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Aae=Nr("legend",{shouldForwardProp:cg})(({ownerState:r,theme:e})=>Qe({float:"unset",width:"auto",overflow:"hidden"},!r.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},r.withLabel&&Qe({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},r.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function Iae(r){const{className:e,label:t,notched:i}=r,s=Cr(r,Cae),o=t!=null&&t!=="",l=Qe({},r,{notched:i,withLabel:o});return Ft.jsx(Mae,Qe({"aria-hidden":!0,className:e,ownerState:l},s,{children:Ft.jsx(Aae,{ownerState:l,children:o?Ft.jsx("span",{children:t}):bz||(bz=Ft.jsx("span",{className:"notranslate",children:"​"}))})}))}const Rae=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],kae=r=>{const{classes:e}=r,i=kl({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},bse,e);return Qe({},e,i)},Oae=Nr(FI,{shouldForwardProp:r=>cg(r)||r==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:BI})(({theme:r,ownerState:e})=>{const t=r.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return Qe({position:"relative",borderRadius:(r.vars||r).shape.borderRadius,[`&:hover .${M0.notchedOutline}`]:{borderColor:(r.vars||r).palette.text.primary},"@media (hover: none)":{[`&:hover .${M0.notchedOutline}`]:{borderColor:r.vars?`rgba(${r.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${M0.focused} .${M0.notchedOutline}`]:{borderColor:(r.vars||r).palette[e.color].main,borderWidth:2},[`&.${M0.error} .${M0.notchedOutline}`]:{borderColor:(r.vars||r).palette.error.main},[`&.${M0.disabled} .${M0.notchedOutline}`]:{borderColor:(r.vars||r).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&Qe({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),Lae=Nr(Iae,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(r,e)=>e.notchedOutline})(({theme:r})=>{const e=r.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:r.vars?`rgba(${r.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),Nae=Nr(UI,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:PI})(({theme:r,ownerState:e})=>Qe({padding:"16.5px 14px"},!r.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:r.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:r.palette.mode==="light"?null:"#fff",caretColor:r.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},r.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[r.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),GV=de.forwardRef(function(e,t){var i,s,o,l,u;const h=Ol({props:e,name:"MuiOutlinedInput"}),{components:p={},fullWidth:m=!1,inputComponent:_="input",label:v,multiline:E=!1,notched:w,slots:x={},type:A="text"}=h,O=Cr(h,Rae),k=kae(h),D=J1(),N=K1({props:h,muiFormControl:D,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),F=Qe({},h,{color:N.color||"primary",disabled:N.disabled,error:N.error,focused:N.focused,formControl:D,fullWidth:m,hiddenLabel:N.hiddenLabel,multiline:E,size:N.size,type:A}),z=(i=(s=x.root)!=null?s:p.Root)!=null?i:Oae,V=(o=(l=x.input)!=null?l:p.Input)!=null?o:Nae;return Ft.jsx(OB,Qe({slots:{root:z,input:V},renderSuffix:U=>Ft.jsx(Lae,{ownerState:F,className:k.notchedOutline,label:v!=null&&v!==""&&N.required?u||(u=Ft.jsxs(de.Fragment,{children:[v," ","*"]})):v,notched:typeof w<"u"?w:!!(U.startAdornment||U.filled||U.focused)}),fullWidth:m,inputComponent:_,multiline:E,ref:t,type:A},O,{classes:Qe({},k,{notchedOutline:null})}))});GV.muiName="Input";const WV=GV;function Dae(r){return el("MuiSelect",r)}const h$=tl("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var Tz;const Bae=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Pae=Nr("div",{name:"MuiSelect",slot:"Select",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[{[`&.${h$.select}`]:e.select},{[`&.${h$.select}`]:e[t.variant]},{[`&.${h$.error}`]:e.error},{[`&.${h$.multiple}`]:e.multiple}]}})(zV,{[`&.${h$.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Fae=Nr("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.icon,t.variant&&e[`icon${Hr(t.variant)}`],t.open&&e.iconOpen]}})(HV),Uae=Nr("input",{shouldForwardProp:r=>CV(r)&&r!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(r,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Ez(r,e){return typeof e=="object"&&e!==null?r===e:String(r)===String(e)}function zae(r){return r==null||typeof r=="string"&&!r.trim()}const Hae=r=>{const{classes:e,variant:t,disabled:i,multiple:s,open:o,error:l}=r,u={select:["select",t,i&&"disabled",s&&"multiple",l&&"error"],icon:["icon",`icon${Hr(t)}`,o&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return kl(u,Dae,e)},Gae=de.forwardRef(function(e,t){var i;const{"aria-describedby":s,"aria-label":o,autoFocus:l,autoWidth:u,children:h,className:p,defaultOpen:m,defaultValue:_,disabled:v,displayEmpty:E,error:w=!1,IconComponent:x,inputRef:A,labelId:O,MenuProps:k={},multiple:D,name:N,onBlur:F,onChange:z,onClose:V,onFocus:U,onOpen:ee,open:ne,readOnly:ie,renderValue:se,SelectDisplayProps:fe={},tabIndex:ae,value:he,variant:ge="standard"}=e,Ie=Cr(e,Bae),[j,te]=IN({controlled:he,default:_,name:"Select"}),[q,le]=IN({controlled:ne,default:m,name:"Select"}),_e=de.useRef(null),Le=de.useRef(null),[xe,Ve]=de.useState(null),{current:Re}=de.useRef(ne!=null),[Ze,et]=de.useState(),ct=ep(t,A),rt=de.useCallback(oe=>{Le.current=oe,oe&&Ve(oe)},[]),Ne=xe==null?void 0:xe.parentNode;de.useImperativeHandle(ct,()=>({focus:()=>{Le.current.focus()},node:_e.current,value:j}),[j]),de.useEffect(()=>{m&&q&&xe&&!Re&&(et(u?null:Ne.clientWidth),Le.current.focus())},[xe,u]),de.useEffect(()=>{l&&Le.current.focus()},[l]),de.useEffect(()=>{if(!O)return;const oe=Np(Le.current).getElementById(O);if(oe){const $e=()=>{getSelection().isCollapsed&&Le.current.focus()};return oe.addEventListener("click",$e),()=>{oe.removeEventListener("click",$e)}}},[O]);const we=(oe,$e)=>{oe?ee&&ee($e):V&&V($e),Re||(et(u?null:Ne.clientWidth),le(oe))},ze=oe=>{oe.button===0&&(oe.preventDefault(),Le.current.focus(),we(!0,oe))},it=oe=>{we(!1,oe)},nt=de.Children.toArray(h),Mt=oe=>{const $e=nt.find(Ge=>Ge.props.value===oe.target.value);$e!==void 0&&(te($e.props.value),z&&z(oe,$e))},At=oe=>$e=>{let Ge;if($e.currentTarget.hasAttribute("tabindex")){if(D){Ge=Array.isArray(j)?j.slice():[];const Bt=j.indexOf(oe.props.value);Bt===-1?Ge.push(oe.props.value):Ge.splice(Bt,1)}else Ge=oe.props.value;if(oe.props.onClick&&oe.props.onClick($e),j!==Ge&&(te(Ge),z)){const Bt=$e.nativeEvent||$e,Pe=new Bt.constructor(Bt.type,Bt);Object.defineProperty(Pe,"target",{writable:!0,value:{value:Ge,name:N}}),z(Pe,oe)}D||we(!1,$e)}},ht=oe=>{ie||[" ","ArrowUp","ArrowDown","Enter"].indexOf(oe.key)!==-1&&(oe.preventDefault(),we(!0,oe))},Et=xe!==null&&q,wt=oe=>{!Et&&F&&(Object.defineProperty(oe,"target",{writable:!0,value:{value:j,name:N}}),F(oe))};delete Ie["aria-invalid"];let pt,be;const Z=[];let ke=!1;(gA({value:j})||E)&&(se?pt=se(j):ke=!0);const lt=nt.map(oe=>{if(!de.isValidElement(oe))return null;let $e;if(D){if(!Array.isArray(j))throw new Error(eb(2));$e=j.some(Ge=>Ez(Ge,oe.props.value)),$e&&ke&&Z.push(oe.props.children)}else $e=Ez(j,oe.props.value),$e&&ke&&(be=oe.props.children);return de.cloneElement(oe,{"aria-selected":$e?"true":"false",onClick:At(oe),onKeyUp:Ge=>{Ge.key===" "&&Ge.preventDefault(),oe.props.onKeyUp&&oe.props.onKeyUp(Ge)},role:"option",selected:$e,value:void 0,"data-value":oe.props.value})});ke&&(D?Z.length===0?pt=null:pt=Z.reduce((oe,$e,Ge)=>(oe.push($e),Ge<Z.length-1&&oe.push(", "),oe),[]):pt=be);let mt=Ze;!u&&Re&&xe&&(mt=Ne.clientWidth);let xt;typeof ae<"u"?xt=ae:xt=v?null:0;const ut=fe.id||(N?`mui-component-select-${N}`:void 0),He=Qe({},e,{variant:ge,value:j,open:Et,error:w}),Ce=Hae(He),X=Qe({},k.PaperProps,(i=k.slotProps)==null?void 0:i.paper),J=SB();return Ft.jsxs(de.Fragment,{children:[Ft.jsx(Pae,Qe({ref:rt,tabIndex:xt,role:"combobox","aria-controls":J,"aria-disabled":v?"true":void 0,"aria-expanded":Et?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[O,ut].filter(Boolean).join(" ")||void 0,"aria-describedby":s,onKeyDown:ht,onMouseDown:v||ie?null:ze,onBlur:wt,onFocus:U},fe,{ownerState:He,className:Ni(fe.className,Ce.select,p),id:ut,children:zae(pt)?Tz||(Tz=Ft.jsx("span",{className:"notranslate",children:"​"})):pt})),Ft.jsx(Uae,Qe({"aria-invalid":w,value:Array.isArray(j)?j.join(","):j,name:N,ref:_e,"aria-hidden":!0,onChange:Mt,tabIndex:-1,disabled:v,className:Ce.nativeInput,autoFocus:l,ownerState:He},Ie)),Ft.jsx(Fae,{as:x,className:Ce.icon,ownerState:He}),Ft.jsx(vae,Qe({id:`menu-${N||""}`,anchorEl:Ne,open:Et,onClose:it,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},k,{MenuListProps:Qe({"aria-labelledby":O,role:"listbox","aria-multiselectable":D?"true":void 0,disableListWrap:!0,id:J},k.MenuListProps),slotProps:Qe({},k.slotProps,{paper:Qe({},X,{style:Qe({minWidth:mt},X!=null?X.style:null)})}),children:lt}))]})}),Wae=Gae,Vae=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],jae=["root"],Xae=r=>{const{classes:e}=r;return e},DB={name:"MuiSelect",overridesResolver:(r,e)=>e.root,shouldForwardProp:r=>cg(r)&&r!=="variant",slot:"Root"},Yae=Nr(PV,DB)(""),Kae=Nr(WV,DB)(""),Jae=Nr(NV,DB)(""),VV=de.forwardRef(function(e,t){const i=Ol({name:"MuiSelect",props:e}),{autoWidth:s=!1,children:o,classes:l={},className:u,defaultOpen:h=!1,displayEmpty:p=!1,IconComponent:m=Sse,id:_,input:v,inputProps:E,label:w,labelId:x,MenuProps:A,multiple:O=!1,native:k=!1,onClose:D,onOpen:N,open:F,renderValue:z,SelectDisplayProps:V,variant:U="outlined"}=i,ee=Cr(i,Vae),ne=k?xae:Wae,ie=J1(),se=K1({props:i,muiFormControl:ie,states:["variant","error"]}),fe=se.variant||U,ae=Qe({},i,{variant:fe,classes:l}),he=Xae(ae),ge=Cr(he,jae),Ie=v||{standard:Ft.jsx(Yae,{ownerState:ae}),outlined:Ft.jsx(Kae,{label:w,ownerState:ae}),filled:Ft.jsx(Jae,{ownerState:ae})}[fe],j=ep(t,Ie.ref);return Ft.jsx(de.Fragment,{children:de.cloneElement(Ie,Qe({inputComponent:ne,inputProps:Qe({children:o,error:se.error,IconComponent:m,variant:fe,type:void 0,multiple:O},k?{id:_}:{autoWidth:s,defaultOpen:h,displayEmpty:p,labelId:x,MenuProps:A,onClose:D,onOpen:N,open:F,renderValue:z,SelectDisplayProps:Qe({id:_},V)},E,{classes:E?yf(ge,E.classes):ge},v?v.props.inputProps:{})},(O&&k||p)&&fe==="outlined"?{notched:!0}:{},{ref:j,className:Ni(Ie.props.className,u,he.root)},!v&&{variant:fe},ee))})});VV.muiName="Select";const Qae=VV;function qae(r){return el("MuiTextField",r)}tl("MuiTextField",["root"]);const Zae=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],ele={standard:PV,filled:NV,outlined:WV},tle=r=>{const{classes:e}=r;return kl({root:["root"]},qae,e)},nle=Nr(foe,{name:"MuiTextField",slot:"Root",overridesResolver:(r,e)=>e.root})({}),rle=de.forwardRef(function(e,t){const i=Ol({props:e,name:"MuiTextField"}),{autoComplete:s,autoFocus:o=!1,children:l,className:u,color:h="primary",defaultValue:p,disabled:m=!1,error:_=!1,FormHelperTextProps:v,fullWidth:E=!1,helperText:w,id:x,InputLabelProps:A,inputProps:O,InputProps:k,inputRef:D,label:N,maxRows:F,minRows:z,multiline:V=!1,name:U,onBlur:ee,onChange:ne,onFocus:ie,placeholder:se,required:fe=!1,rows:ae,select:he=!1,SelectProps:ge,type:Ie,value:j,variant:te="outlined"}=i,q=Cr(i,Zae),le=Qe({},i,{autoFocus:o,color:h,disabled:m,error:_,fullWidth:E,multiline:V,required:fe,select:he,variant:te}),_e=tle(le),Le={};te==="outlined"&&(A&&typeof A.shrink<"u"&&(Le.notched=A.shrink),Le.label=N),he&&((!ge||!ge.native)&&(Le.id=void 0),Le["aria-describedby"]=void 0);const xe=SB(x),Ve=w&&xe?`${xe}-helper-text`:void 0,Re=N&&xe?`${xe}-label`:void 0,Ze=ele[te],et=Ft.jsx(Ze,Qe({"aria-describedby":Ve,autoComplete:s,autoFocus:o,defaultValue:p,fullWidth:E,multiline:V,name:U,rows:ae,maxRows:F,minRows:z,type:Ie,value:j,id:xe,inputRef:D,onBlur:ee,onChange:ne,onFocus:ie,placeholder:se,inputProps:O},Le,k));return Ft.jsxs(nle,Qe({className:Ni(_e.root,u),disabled:m,error:_,fullWidth:E,ref:t,required:fe,color:h,variant:te,ownerState:le},q,{children:[N!=null&&N!==""&&Ft.jsx(Hoe,Qe({htmlFor:xe,id:Re},A,{children:N})),he?Ft.jsx(Qae,Qe({"aria-describedby":Ve,id:xe,labelId:Re,value:j,input:et},ge,{children:l})):et,w&&Ft.jsx(Toe,Qe({id:Ve},v,{children:w}))]}))}),ile=rle;function sle(r){for(var e=new Date().getTime(),t=e;t<e+r;)t=new Date().getTime()}const jV=r=>{const e=Oc(Zm(w=>w.getBlock)),t=Oc(Zm(w=>w.animateArm)),i=Oc(Zm(w=>w.animateBothArms)),s=Oc(Zm(w=>w.animateHead)),o=Oc(Zm(w=>w.ip)),l=(w,x)=>{const A=e(w);let O=e(x);if(E(A,A.type))for(E(O,O.type);O.next;)O=e(O.next),E(O,O.type);else return},u=w=>w==="TRUE";function h(w,x){return w=Math.ceil(w),x=Math.floor(x),Math.floor(Math.random()*(x-w+1))+w}function p(w,x){o&&fetch(`http://${o}/api/${w}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}).then(A=>A.json()).then(A=>{console.log(`successfully send a post request, the response is: ${A}`)})}function m(w){w=w.replace(/^#/,"");var x=parseInt(w,16),A=x>>16&255,O=x>>8&255,k=x&255;return{red:A,green:O,blue:k}}function _(w){if(w==2||w==3)return!0;if(w<=1||w%2==0||w%3==0)return!1;for(let x=5;x*x<=w;x+=6)if(w%x==0||w%(x+2)==0)return!1;return!0}function v(w){return typeof w!="string"?w.shadow.fields.NUM:E(e(w))}const E=(w,x)=>{switch(!0){case x==="Test":console.log("test block runs");return;case x==="controls_if":if(!w.inputs||!w.inputs.IF0||!w.inputs.DO0){alert("err: controls_if not complete!");return}else l(w.inputs.IF0,w.inputs.DO0);break;case x==="logic_boolean":return u(w.fields.BOOL);case x==="logic_compare":if(!w.inputs||!w.inputs.A||!w.inputs.B){alert("err: logic_compare is not complete!");return}const le=w.fields.OP,_e=w.inputs.A,Le=w.inputs.B,xe=e(_e),Ve=e(Le);if(le==="EQ")return E(xe,xe.type)==E(Ve,Ve.type);if(le==="NEQ")return E(xe,xe.type)!==E(Ve,Ve.type);if(le==="LT")return E(xe,xe.type)<E(Ve,Ve.type);if(le==="LTE")return E(xe,xe.type)<=E(Ve,Ve.type);if(le==="GT")return E(xe,xe.type)>E(Ve,Ve.type);if(le==="GTE")return E(xe,xe.type)>=E(Ve,Ve.type);case x==="logic_operation":if(!w.inputs||!w.inputs.A||!w.inputs.B){alert("err: logic_operation is not complete!");return}const Re=w.fields.OP,Ze=w.inputs.A,et=w.inputs.B,ct=e(Ze),rt=e(et);return Re==="OR"?E(ct,ct.type)||E(rt,rt.type):E(ct,ct.type)&&E(rt,rt.type);case x==="logic_negate":if(!w.inputs){alert("err: logic_negate is not complete!");return}const Ne=e(w.inputs.BOOL);return!E(Ne,Ne.type);case x==="logic_boolean":return!w.fields.BOOL!=="FALSE";case x==="logic_null":return null;case x==="logic_ternary":if(!w.inputs||!w.inputs.IF||!w.inputs.THEN||!w.inputs.ELSE){alert("err: logic_ternary is not complete!");return}const we=w.inputs.IF,ze=w.inputs.THEN,it=w.inputs.ELSE,nt=e(we),Mt=e(ze),At=e(it);return E(nt,nt.type)?E(Mt,Mt.type):E(At,At.type);case x==="controls_repeat_ext":const Et=v(w.inputs.TIMES);if(!w.inputs.DO){alert("err: controls_repeat_ext is not complete!");return}let wt=e(w.inputs.DO);for(let Mr=0;Mr<Et;Mr++){console.log(Mr),E(wt,wt.type);let nr=wt;for(;nr.next;)nr=e(nr.next),E(nr,nr.type)}return;case x==="math_number":return w.fields.NUM;case x==="math_number_property":const pt=w.fields.PROPERTY,be=v(w.inputs.NUMBER_TO_CHECK);if(pt==="EVEN")return be%2===0;if(pt==="ODD")return be%2===1;if(pt==="PRIME")return _(be);if(pt==="WHOLE")return be%1===0;if(pt==="POSITIVE")return be>0;if(pt==="NEGATIVE")return be<0;if(pt==="DIVISIBLE_BY")if(!w.inputs||!w.inputs.DIVISOR){alert("err: DIVISOR is not filled!");return}else if(w.inputs.DIVISOR===0){alert("Note that divisor cannot be 0!");return}else return be%w.inputs.DIVISOR===0;return;case x==="math_random_int":const Z=v(w.inputs.FROM),ke=v(w.inputs.TO);return h(Z,ke);case x==="colour_picker":return m(w.fields.COLOUR);case x==="colour_random":let lt=h(0,255),mt=h(0,255),xt=h(0,255);return{red:lt,green:mt,blue:xt};case x==="colour_rgb":const ut=v(w.inputs.RED),He=v(w.inputs.GREEN),Ce=v(w.inputs.BLUE);return{red:ut,green:He,blue:Ce};case x==="colour_blend":const X=v(w.inputs.RATIO),J=m(w.inputs.COLOUR1.shadow.fields.COLOUR),oe=m(w.inputs.COLOUR2.shadow.fields.COLOUR),$e=J.r*X,Ge=J.g*X,Bt=J.b*X,Pe=oe.r,Wt=oe.g,st=oe.b,Ut=(Pe+$e)/(X+1),Pt=(Wt+Ge)/(X+1),Tn=(st+Bt)/(X+1);return{red:Ut,green:Pt,blue:Tn};case x==="ChangeLED":var j="led",A=w.fields.FIELD_ChangeLED,q=m(A);console.log(q),p(j,q);return;case x==="DisplayImage":var O=1,k=w.fields.FIELD_DisplayImage_Filename,j="images/display",q={FileName:k,Alpha:O};p(j,q);return;case x==="PlayAudio":var j="audio/play",k=w.fields.FIELD_PlayAudio_Filename,q={FileName:k};p(j,q);return;case x==="DisplayText":var j="text/display",te=w.fields.FIELD_DisplayText_Text,q={Text:te};p(j,q);return;case x==="TurnOnFlashlight":var j="flashlight",q={On:!0};p(j,q);return;case x==="TurnOffFlashlight":var j="flashlight",q={On:!1};p(j,q);return;case x==="WaitForSeconds":var ae=parseFloat(w.fields.NumSeconds);sle(ae*1e3);return;case x==="MoveArm":var D=w.fields.FIELD_MoveArm_Arm==="Right"?"Right":"Left",N=parseInt(w.fields.FIELD_MoveArm_Position),se=parseInt(w.fields.FIELD_MoveArm_Velocity),j="arms",q={Arm:D,Position:N,Velocity:se,Units:"Degrees"};t(D,N,se),p(j,q);return;case x==="MoveArm2":var N=parseInt(w.fields.FIELD_MoveArm2_Position),se=parseInt(w.fields.FIELD_MoveArm2_Velocity),j="arms",q={Arm:"both",Position:N,Velocity:se,Units:"Degrees"};i(N,se,N,se),p(j,q);return;case x==="MoveArms2":var F=v(w.inputs.FIELD_MoveArm_LeftPosition),z=v(w.inputs.FIELD_MoveArm_LeftVelocity),V=v(w.inputs.FIELD_MoveArm_RightPosition),U=v(w.inputs.FIELD_MoveArm_RightVelocity),q={LeftArmPosition:F,RightArmPosition:V,LeftArmVelocity:z,RightArmVelocity:U,Units:"Degrees"},j="arms/set";i(F,z,V,U),p(j,q);return;case x==="MoveHead":var ee=w.fields.FIELD_MoveHead_Pitch==="D"?5:-5,se=parseInt(w.fields.FIELD_MoveHead_Velocity),j="head",q={Pitch:ee,Yaw:0,Roll:0,Units:"degrees"};s(ne,ee,ie),p(j,q);return;case x==="MoveHead3":var ee,ne,ie,j="head";ee=v(w.inputs.FIELD_MoveHead_Pitch),ne=v(w.inputs.FIELD_MoveHead_Roll),ie=v(w.inputs.FIELD_MoveHead_Yaw);var q={Pitch:ee,Yaw:ie,Roll:ne,Units:"degrees"};s(ne,ee,ie),p(j,q);return;case x==="DriveTime":var fe=w.fields.FIELD_DriveTime_Direction,se=parseInt(w.fields.FIELD_DriveTime_Velocity),ae=parseInt(w.fields.FIELD_DriveTime_TimeMs),j="drive/time",ge=fe==="F"?se:-se,q={LinearVelocity:ge,AngularVelocity:0,TimeMs:ae};p(j,q);return;case x==="DriveTime2":var j="drive/time",ge=v(w.inputs.FIELD_DriveTime_Velocity),he=v(w.inputs.FIELD_DriveTime_Angular),ae=v(w.inputs.FIELD_DriveTime_TimeMs),q={LinearVelocity:ge,AngularVelocity:he,TimeMs:ae};p(j,q);return;case x=="Turn":var fe=w.fields.FIELD_Turn_Direction,ae=parseInt(w.fields.FIELD_Turn_Duration),he=100,ge=0,Ie=fe==="L"?90:-90,j="drive/time",q={LinearVelocity:ge,AngularVelocity:he,TimeMs:ae,Degree:Ie};p(j,q);return;case x=="Turn2":var fe=w.fields.FIELD_Turn_Direction,ae=parseInt(v(w.inputs.FIELD_Turn_Duration)),he=100,ge=0,Ie=fe==="L"?90:-90,q={LinearVelocity:ge,AngularVelocity:he,TimeMs:ae,Degree:Ie},j="drive/time";p(j,q);return;case x=="Speak":var j="tts/speak",te=w.fields.FIELD_Speak_Text,q={Text:`<speak>${te}</speak>`};p(j,q);return;default:return"No case match"}};return{compile:E}};function ole(r){const[e,t]=de.useState(""),i=Oc(Zm(v=>v.setIp));Oc(Zm(v=>v.ip));const s=Oc(Zm(v=>v.getBlock)),o=Oc(Zm(v=>v.getBlocksByType)),l=Oc(Zm(v=>v.clock)),{compile:u}=jV(),h=()=>{i(e),fetch(`http://${e}/api/battery`,{method:"GET"}).then(v=>{if(!v.ok)throw new Error(`Request failed with status ${v.status}`);return v.json()}).then(v=>{console.log(`Successfully sent a GET request, the response is: ${v}`),alert("Confirmed IP Address: "+e)}).catch(v=>{console.error("Error during fetch operation:",v.message),alert(`Error fetching data: ${v.message}`)}),Gk("Hit Confirm IP Address Button")},p={backgroundColor:"#333",color:"#FFFFFF",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},m=()=>{const v=o("Start");l.reset_elapsed();let E=v;console.log("runcode"),console.log("starting from the first block: "),console.log(v);let w=1;for(;E&&E.next;)w+=1,E=s(E.next),console.log(`compiling block number ${w}`),u(E,E.type);Gk("Click Run Code button")},_=()=>{currParam.next="",Gk("Click Stop Code button"),console.log(SN)};return Ft.jsxs(LB,{style:p,children:[Ft.jsx(pz,{children:Ft.jsx(Uie,{variant:"h5",children:"University of Wisconsin - Grandparents University Programming"})}),Ft.jsxs(pz,{style:{textAlign:"center",display:"flex",justifyContent:"right",alignItems:"center",width:"100%",marginTop:"5px",marginBottom:"5px",paddingRight:"0px"},children:[Ft.jsx(Jk,{style:{color:"#FFFFFF"},onClick:_,children:"Stop"}),Ft.jsx(ile,{id:"robotIpAddress",label:"IP",variant:"filled",style:{backgroundColor:"#FFFFFF50",borderRadius:"5px"},defaultValue:"",onChange:v=>t(v.target.value)}),Ft.jsx(Jk,{style:{color:"#FFFFFF"},onClick:h,children:"Confirm"}),Ft.jsx(Jk,{style:{color:"#FFFFFF"},onClick:m,id:"runButton",children:"Run"})]})]})}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XV="mainWorkspace",$z=function(r){var t;const e=Tt.serialization.workspaces.save(r);(t=window.localStorage)==null||t.setItem(XV,JSON.stringify(e))},ale=function(r){var t;const e=(t=window.localStorage)==null?void 0:t.getItem(XV);e&&(Tt.Events.disable(),Tt.serialization.workspaces.load(JSON.parse(e),r,!1),Tt.Events.enable())};/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lle={kind:"categoryToolbox",contents:[{kind:"category",name:"Logic",categorystyle:"logic_category",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"logic_null"},{kind:"block",type:"logic_ternary"}]},{kind:"category",name:"Loops",categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{shadow:{type:"math_number",fields:{NUM:10}}}}},{kind:"block",type:"Test"}]},{kind:"category",name:"Math",categorystyle:"math_category",contents:[{kind:"block",type:"math_number",fields:{NUM:123}},{kind:"block",type:"math_number_property",inputs:{NUMBER_TO_CHECK:{shadow:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"math_random_int",inputs:{FROM:{shadow:{type:"math_number",fields:{NUM:1}}},TO:{shadow:{type:"math_number",fields:{NUM:100}}}}}]},{kind:"category",name:"Text",categorystyle:"text_category",contents:[{kind:"block",type:"text"}]},{kind:"category",name:"Color",categorystyle:"colour_category",contents:[{kind:"block",type:"colour_picker"},{kind:"block",type:"colour_random"},{kind:"block",type:"colour_rgb",inputs:{RED:{shadow:{type:"math_number",fields:{NUM:100}}},GREEN:{shadow:{type:"math_number",fields:{NUM:50}}},BLUE:{shadow:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"colour_blend",inputs:{COLOUR1:{shadow:{type:"colour_picker",fields:{COLOUR:"#ff0000"}}},COLOUR2:{shadow:{type:"colour_picker",fields:{COLOUR:"#3333ff"}}},RATIO:{shadow:{type:"math_number",fields:{NUM:.5}}}}}]},{kind:"sep"},{kind:"category",name:"Variables",categorystyle:"variable_category",custom:"VARIABLE"},{kind:"category",name:"Functions",categorystyle:"procedure_category",custom:"PROCEDURE"},{kind:"category",name:"Misty",categorystyle:"list_category",contents:[{kind:"category",name:"Movement",categorystyle:"list_category",contents:[{kind:"block",type:"DriveTime"},{kind:"block",type:"DriveTime2"},{kind:"block",type:"Turn"},{kind:"block",type:"Turn2"},{kind:"block",type:"MoveHead"},{kind:"block",type:"MoveHead3"},{kind:"block",type:"MoveArm"},{kind:"block",type:"MoveArm2"},{kind:"block",type:"MoveArms2"}]},{kind:"category",name:"Speech",categorystyle:"list_category",contents:[{kind:"block",type:"Speak"},{kind:"block",type:"SpeakDefault"}]},{kind:"category",name:"Face",categorystyle:"list_category",contents:[{kind:"block",type:"eyes_acceptance"},{kind:"block",type:"eyes_admiration"},{kind:"block",type:"eyes_amazement"},{kind:"block",type:"eyes_anger"},{kind:"block",type:"eyes_annoyed"},{kind:"block",type:"eyes_anticipation"},{kind:"block",type:"eyes_apprehension"},{kind:"block",type:"eyes_boredom"},{kind:"block",type:"eyes_default"},{kind:"block",type:"eyes_disgust"},{kind:"block",type:"eyes_distraction"},{kind:"block",type:"eyes_ecstasy_frame_1"},{kind:"block",type:"eyes_ecstasy_frame_2"},{kind:"block",type:"eyes_fear"},{kind:"block",type:"eyes_grief"},{kind:"block",type:"eyes_interest"},{kind:"block",type:"eyes_joy"},{kind:"block",type:"eyes_loathing"},{kind:"block",type:"eyes_pensiveness"},{kind:"block",type:"eyes_rage"},{kind:"block",type:"eyes_sad"},{kind:"block",type:"eyes_serenity"},{kind:"block",type:"eyes_surprise"},{kind:"block",type:"eyes_terror"},{kind:"block",type:"eyes_trust"},{kind:"block",type:"eyes_vigilance"},{kind:"block",type:"e_Sleeping"},{kind:"block",type:"e_SleepingZZZ"},{kind:"block",type:"e_Contempt"},{kind:"block",type:"e_ContentLeft"},{kind:"block",type:"e_ContentRight"},{kind:"block",type:"e_Disoriented"},{kind:"block",type:"e_EcstacyHilarious"},{kind:"block",type:"e_EcstacyStarryEyed"},{kind:"block",type:"e_JoyGoofy"},{kind:"block",type:"e_JoyGoofy2"},{kind:"block",type:"e_JoyGoofy3"},{kind:"block",type:"e_Love"},{kind:"block",type:"e_Rage"},{kind:"block",type:"e_Rage2"},{kind:"block",type:"e_Rage3"},{kind:"block",type:"e_Rage4"},{kind:"block",type:"e_RemorseShame"}]},{kind:"category",name:"Audio",categorystyle:"list_category",contents:[{kind:"block",type:"s_Acceptance"},{kind:"block",type:"s_Amazement"},{kind:"block",type:"s_Amazement2"},{kind:"block",type:"s_Anger"},{kind:"block",type:"s_Anger2"},{kind:"block",type:"s_Anger3"},{kind:"block",type:"s_Anger4"},{kind:"block",type:"s_Annoyance"},{kind:"block",type:"s_Annoyance2"},{kind:"block",type:"s_Annoyance3"},{kind:"block",type:"s_Annoyance4"},{kind:"block",type:"s_Awe"},{kind:"block",type:"s_Awe2"},{kind:"block",type:"s_Awe3"},{kind:"block",type:"s_Boredom"},{kind:"block",type:"s_Disapproval"},{kind:"block",type:"s_Disgust"},{kind:"block",type:"s_Disgust2"},{kind:"block",type:"s_Disgust3"},{kind:"block",type:"s_DisorientedConfused"},{kind:"block",type:"s_DisorientedConfused2"},{kind:"block",type:"s_DisorientedConfused3"},{kind:"block",type:"s_DisorientedConfused4"},{kind:"block",type:"s_DisorientedConfused5"},{kind:"block",type:"s_DisorientedConfused6"},{kind:"block",type:"s_Distraction"},{kind:"block",type:"s_Ecstacy"},{kind:"block",type:"s_Ecstacy2"},{kind:"block",type:"s_Fear"},{kind:"block",type:"s_Grief"},{kind:"block",type:"s_Grief2"},{kind:"block",type:"s_Grief3"},{kind:"block",type:"s_Grief4"},{kind:"block",type:"s_Joy"},{kind:"block",type:"s_Joy2"},{kind:"block",type:"s_Joy3"},{kind:"block",type:"s_Joy4"},{kind:"block",type:"s_Loathing"},{kind:"block",type:"s_Love"},{kind:"block",type:"s_PhraseByeBye"},{kind:"block",type:"s_PhraseEvilAhHa"},{kind:"block",type:"s_PhraseHello"},{kind:"block",type:"s_PhraseNoNoNo"},{kind:"block",type:"s_PhraseOopsy"},{kind:"block",type:"s_PhraseOwOwOw"},{kind:"block",type:"s_PhraseOwwww"},{kind:"block",type:"s_PhraseUhOh"},{kind:"block",type:"s_Rage"},{kind:"block",type:"s_Sadness"},{kind:"block",type:"s_Sadness2"},{kind:"block",type:"s_Sadness3"},{kind:"block",type:"s_Sadness4"},{kind:"block",type:"s_Sadness5"},{kind:"block",type:"s_Sadness6"},{kind:"block",type:"s_Sadness7"},{kind:"block",type:"s_Sleepy"},{kind:"block",type:"s_Sleepy2"},{kind:"block",type:"s_Sleepy3"},{kind:"block",type:"s_Sleepy4"},{kind:"block",type:"s_SleepySnore"},{kind:"block",type:"s_SystemCameraShutter"}]},{kind:"block",type:"ChangeLED"},{kind:"block",type:"TransitionLED"},{kind:"block",type:"DisplayImage"},{kind:"block",type:"PlayAudio"},{kind:"block",type:"DisplayText"},{kind:"block",type:"TurnOnFlashlight"},{kind:"block",type:"TurnOffFlashlight"},{kind:"block",type:"WaitForSeconds"}]}]};by.Blocks.Start={init:function(){this.appendDummyInput().appendField("Program starts here"),this.setColour(345),this.setTooltip("This is the starting block"),this.setNextStatement(!0,null),this.setHelpUrl(""),this.setDeletable(!1)}};function ule(r){const e=Oc(u=>u.addBlock),t=Oc(u=>u.blocks),i=Oc(u=>u.removeBlock),s=Oc(u=>u.getBlock),o=Oc(u=>u.updateBlock);Oc(u=>u.getBlocksByType),Oc(u=>u.ip),jV();const l=(u,h)=>{u.push(h);let p=s(h);for(;p.next;)p=p.next,u.push(p)};return de.useEffect(()=>{console.log(t)},[t]),by.common.defineBlocks(t),Object.assign(_1.javascriptGenerator.forBlock,KA),de.useEffect(()=>{if(!document.querySelector(".blocklySvg")){var u=document.getElementById("pageContainer"),h=document.getElementById("blocklyDiv");const p=by.inject(h,{toolbox:lle});p.newBlock("Start").moveBy(50,50),$z(p),ale(p),_1.javascriptGenerator.addReservedWords("code"),new ResizeObserver(v=>{for(let E of v){let w=u,x=0,A=0;do x+=w.offsetLeft,A+=w.offsetTop,w=w.offsetParent;while(w);h.style.left=x+"px",h.style.top=A+"px",h.style.width=u.offsetWidth+"px",h.style.height=u.offsetHeight+"px",by.svgResize(p)}}).observe(u),p.addChangeListener(v=>{if(console.log(v),!v.isUiEvent){if(v.type===by.Events.BLOCK_DELETE){let E=v.blockId,w=[E],x=s(E).inputs;if(x)for(let[O,k]of Object.entries(x))typeof k!="string"?w.push(k.id):l(w,k);let A=s(v.blockId).next;A&&l(w,A),i(w)}if(v.type===by.Events.BLOCK_CHANGE){let E=v.blockId,w=s(E);w.fields[v.name]=v.newValue,o(E,w)}if(v.type==="create"){let E={id:v.json.id,type:v.json.type,prev:"",next:"",isShadow:!1};if(v.json.type==="Start"&&(v.json.id,E={id:v.json.id,type:v.json.type,next:""}),v.json.fields&&(E.fields=v.json.fields),v.json.inputs){E.inputs=v.json.inputs;for(let[w,x]of Object.entries(v.json.inputs))if(x.shadow){let A={id:x.shadow.id,type:x.shadow.type,fields:x.shadow.fields,isShadow:!0,initialParent:v.ids[0],initialInput:w};"shadows"in E||(E.shadows={}),E.shadows[w]=x.shadow.id,e(x.shadow.id,A)}}e(v.json.id,E)}if(v.type==="move"){if(p.getBlockById(v.blockId),v.reason&&v.reason.includes("connect")){let E=v.newParentId,w=s(v.newParentId);v.newInputName?("inputs"in w||(w.inputs={}),w.inputs[v.newInputName]=v.blockId,o(E,w)):(w.next=v.blockId,o(E,w),w=s(v.blockId),w.prev=E,o(v.blockId,w))}if(v.reason&&v.reason.includes("disconnect")){let E=v.oldParentId,w=s(v.oldParentId);if(!v.oldInputName)w.next="",o(E,w),w=s(v.blockId),w.prev="",o(v.blockId,w);else if(w.inputs[v.oldInputName]="",w.shadows&&w.shadows[v.oldInputName]){let x=w.shadows[v.oldInputName];w.inputs[v.oldInputName]=x}}}$z(p)}})}},[]),Ft.jsxs("div",{id:"pageContainer",style:{width:"100%",height:"100%"},children:[Ft.jsx("div",{id:"blocklyDiv",style:{width:"100%",height:"100%",minHeight:"480px",minWidth:"480px"}}),Ft.jsx("xml",{id:"toolbox",style:{display:"none"}})]})}function xl(r,e,t){return e=Sne(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function H_(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&i.push.apply(i,Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.forEach(function(s){xl(r,s,t[s])})}return r}class $s{static isBrowser(){return typeof window<"u"}static isOpera(){return $s.isBrowser()&&(!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0)}static isFirefox(){return $s.isBrowser()&&typeof InstallTrigger<"u"}static isSafari(){return $s.isBrowser()?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}static isIE(){return $s.isBrowser()&&!!document.documentMode}static isEdge(){return $s.isBrowser()&&!$s.isIE()&&!!window.StyleMedia}static isChrome(){return $s.isBrowser()&&!!window.chrome&&!!window.chrome.webstore}static isBlink(){return $s.isBrowser()&&($s.isChrome()||$s.isOpera())&&!!window.CSS}static getUserAgent(){return typeof navigator>"u"?"":navigator.userAgent}static isAndroid(){return $s.isBrowser()&&$s.getUserAgent().match(/Android/i)}static isBlackBerry(){return $s.isBrowser()&&$s.getUserAgent().match(/BlackBerry/i)}static isIOS(){return $s.isBrowser()&&$s.getUserAgent().match(/iPhone|iPad|iPod/i)}static isOpera(){return $s.isBrowser()&&$s.getUserAgent().match(/Opera Mini/i)}static isWindows(){return $s.isBrowser()&&$s.isWindowsDesktop()||$s.isWindowsMobile()}static isWindowsMobile(){return $s.isBrowser()&&$s.getUserAgent().match(/IEMobile/i)}static isWindowsDesktop(){return $s.isBrowser()&&$s.getUserAgent().match(/WPDesktop/i)}static isMobile(){return $s.isBrowser()&&($s.isWindowsMobile()||$s.isBlackBerry()||$s.isAndroid()||$s.isIOS())}}const zI=r=>Object.keys(r).reduce((e,t)=>t.substr(0,5)==="data-"?H_({},e,{[t]:r[t]}):e,{});class cf extends vr.Component{static isA(e){return e?e.type===vr.createElement(cf,null).type:!1}constructor(e){super(e),xl(this,"ref",vr.createRef()),xl(this,"onMouseMove",t=>{if(this.state.active){const i=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:i,event:t}),this.props.onResize&&this.props.onResize({component:this,domElement:i}),t.stopPropagation(),t.preventDefault()}}),xl(this,"onMouseDown",t=>{this.setState({active:!0}),!(this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this}))&&this.props.events.emit("startResize",{index:this.props.index,event:t})}),xl(this,"onMouseUp",t=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:t}))}),this.state={active:!1},this.document=e.document}componentDidMount(){this.document&&(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){this.document&&(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const e=[$s.isMobile()?"reflex-thin":"",...this.props.className.split(" "),this.state.active?"active":"","reflex-splitter"].join(" ").trim();return vr.createElement("div",Qe({},zI(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:e,id:this.props.id,ref:this.ref}),this.props.children)}}xl(cf,"propTypes",{children:oi.oneOfType([oi.arrayOf(oi.node),oi.node]),onStartResize:oi.func,onStopResize:oi.func,className:oi.string,propagate:oi.bool,onResize:oi.func,style:oi.object});xl(cf,"defaultProps",{document:typeof document<"u"?document:null,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});class cle{constructor(){this._events={}}on(e,t){return e.split(" ").forEach(i=>{this._events[i]=this._events[i]||[],this._events[i].push(t)}),this}off(e,t){if(e==null){this._events={};return}return e.split(" ").forEach(i=>{i in this._events&&(t?this._events[i].splice(this._events[i].indexOf(t),1):this._events[i]=[])}),this}emit(e){if(this._events[e]!==void 0)for(var t=this._events[e].slice(),i=0;i<t.length;++i){var s=t[i].apply(this,Array.prototype.slice.call(arguments,1));if(s!==void 0)return s}}}Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(r,e){if(this==null)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if(i===0)return!1;var s=e|0,o=Math.max(s>=0?s:i-Math.abs(s),0);function l(u,h){return u===h||typeof u=="number"&&typeof h=="number"&&isNaN(u)&&isNaN(h)}for(;o<i;){if(l(t[o],r))return!0;o++}return!1}});Math.sign||(Math.sign=function(r){return(r>0)-(r<0)||+r});class _A extends vr.Component{constructor(e){super(e),xl(this,"onWindowResize",()=>{this.setState({flexData:this.computeFlexData()})}),xl(this,"onStartResize",t=>{const i=t.event.changedTouches?t.event.changedTouches[0]:t.event;switch(this.props.orientation){case"horizontal":document.body.classList.add("reflex-row-resize"),this.previousPos=i.clientY;break;case"vertical":default:document.body.classList.add("reflex-col-resize"),this.previousPos=i.clientX;break}this.elements=[this.children[t.index-1],this.children[t.index+1]],this.emitElementsEvent(this.elements,"onStartResize")}),xl(this,"onResize",t=>{const i=t.event.changedTouches?t.event.changedTouches[0]:t.event,s=this.getOffset(i,t.domElement);switch(this.props.orientation){case"horizontal":this.previousPos=i.clientY;break;case"vertical":default:this.previousPos=i.clientX;break}if(s){const o=this.computeAvailableOffset(t.index,s);o&&(this.elements=this.dispatchOffset(t.index,o),this.adjustFlex(this.elements),this.setState({resizing:!0},()=>{this.emitElementsEvent(this.elements,"onResize")}))}}),xl(this,"onStopResize",t=>{document.body.classList.remove("reflex-row-resize"),document.body.classList.remove("reflex-col-resize");const i=this.elements?this.elements.map(o=>o.ref):[],s=this.children.filter(o=>!cf.isA(o)&&i.includes(o.ref));this.emitElementsEvent(s,"onStopResize"),this.setState({resizing:!1})}),xl(this,"onElementSize",t=>new Promise(i=>{try{const s=t.index,o=this.getSize(this.children[s]),l=t.size-o,u=t.direction,h=s+u,p=this.computeAvailableOffset(h,u*l);this.elements=null,p&&(this.elements=this.dispatchOffset(h,p),this.adjustFlex(this.elements)),this.setState(this.state,()=>{this.emitElementsEvent(this.elements,"onResize"),i()})}catch(s){console.log(s)}})),this.events=new cle,this.children=[],this.state={flexData:[]},this.ref=vr.createRef()}componentDidMount(){const e=this.computeFlexData(),{windowResizeAware:t}=this.props;t&&window.addEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:t,flexData:e}),this.events.on("element.size",this.onElementSize),this.events.on("startResize",this.onStartResize),this.events.on("stopResize",this.onStopResize),this.events.on("resize",this.onResize)}componentWillUnmount(){this.events.off(),window.removeEventListener("resize",this.onWindowResize)}getValidChildren(e=this.props){return this.toArray(e.children).filter(t=>!!t)}componentDidUpdate(e,t){const i=this.getValidChildren(this.props);if(i.length!==this.state.flexData.length||e.orientation!==this.props.orientation||this.flexHasChanged(e)){const s=this.computeFlexData(i,this.props);this.setState({flexData:s})}this.props.windowResizeAware!==this.state.windowResizeAware&&(this.props.windowResizeAware?window.addEventListener("resize",this.onWindowResize):window.removeEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:this.props.windowResizeAware}))}flexHasChanged(e){const t=this.getValidChildren(e).map(s=>s.props.flex||0);return!this.getValidChildren().map(s=>s.props.flex||0).every((s,o)=>s===t[o])}getSize(e){var t,i,s;const o=e==null||(t=e.ref)===null||t===void 0?void 0:t.current;switch(this.props.orientation){case"horizontal":return(i=o==null?void 0:o.offsetHeight)!==null&&i!==void 0?i:0;case"vertical":default:return(s=o==null?void 0:o.offsetWidth)!==null&&s!==void 0?s:0}}getOffset(e,t){const{top:i,bottom:s,left:o,right:l}=t.getBoundingClientRect();switch(this.props.orientation){case"horizontal":{const u=e.clientY-this.previousPos;if(u>0){if(e.clientY>=i)return u}else if(e.clientY<=s)return u;break}case"vertical":default:{const u=e.clientX-this.previousPos;if(u>0){if(e.clientX>o)return u}else if(e.clientX<l)return u}break}return 0}adjustFlex(e){const t=e.reduce((i,s)=>{const o=s.props.index,l=s.props.flex,u=this.state.flexData[o].flex;return i+(l-u)/e.length},0);e.forEach(i=>{this.state.flexData[i.props.index].flex+=t})}computeAvailableOffset(e,t){const i=this.computeAvailableStretch(e,t),s=this.computeAvailableShrink(e,t);return Math.min(i,s)*Math.sign(t)}checkPropagate(e,t){if(t>0){if(e<this.children.length-2){const i=this.children[e+2];return cf.isA(i)&&i.props.propagate}}else if(e>2){const i=this.children[e-2];return cf.isA(i)&&i.props.propagate}return!1}computeAvailableStretch(e,t){var i;const s=t<0?e+1:e-1,o=this.children[s],l=this.getSize(o),h=((i=o==null?void 0:o.props.maxSize)!==null&&i!==void 0?i:0)-l;if(h<Math.abs(t)&&this.checkPropagate(e,-1*t)){const p=Math.sign(t)*(Math.abs(t)-h);return h+this.computeAvailableStretch(t<0?e+2:e-2,p)}return Math.min(h,Math.abs(t))}computeAvailableShrink(e,t){var i;const s=t>0?e+1:e-1,o=this.children[s],l=this.getSize(o),u=Math.max((i=o==null?void 0:o.props.minSize)!==null&&i!==void 0?i:0,0),h=l-u;if(h<Math.abs(t)&&this.checkPropagate(e,t)){const p=Math.sign(t)*(Math.abs(t)-h);return h+this.computeAvailableShrink(t>0?e+2:e-2,p)}return Math.min(h,Math.abs(t))}computePixelFlex(e=this.props.orientation){if(!this.ref.current)return console.warn("Unable to locate ReflexContainer dom node"),0;switch(e){case"horizontal":return this.ref.current.offsetHeight===0?(console.warn("Found ReflexContainer with height=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetHeight;case"vertical":default:return this.ref.current.offsetWidth===0?(console.warn("Found ReflexContainer with width=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetWidth}}addOffset(e,t){const i=this.getSize(e),s=e.props.index,o=Math.max(i+t,0),l=this.state.flexData[s].flex,u=l>0?l*o/i:this.computePixelFlex()*o;this.state.flexData[s].flex=!isFinite(u)||isNaN(u)?0:u}dispatchStretch(e,t){const i=t<0?e+1:e-1;if(i<0||i>this.children.length-1)return[];const s=this.children[i],o=this.getSize(s),u=Math.min(s.props.maxSize,o+Math.abs(t))-o;if(this.addOffset(s,u),u<Math.abs(t)){const h=e-Math.sign(t)*2,p=Math.sign(t)*(Math.abs(t)-u);return[s,...this.dispatchStretch(h,p)]}return[s]}dispatchShrink(e,t){const i=t>0?e+1:e-1;if(i<0||i>this.children.length-1)return[];const s=this.children[i],o=this.getSize(s),u=Math.max(s.props.minSize,o-Math.abs(t))-o;if(this.addOffset(s,u),Math.abs(u)<Math.abs(t)){const h=e+Math.sign(t)*2,p=Math.sign(t)*(Math.abs(t)+u);return[s,...this.dispatchShrink(h,p)]}return[s]}dispatchOffset(e,t){return[...this.dispatchStretch(e,t),...this.dispatchShrink(e,t)]}emitElementsEvent(e,t){this.toArray(e).forEach(i=>{i.props[t]&&i.props[t]({domElement:i.ref.current,component:i})})}computeFlexData(e=this.getValidChildren(),t=this.props){const i=this.computePixelFlex(t.orientation),s=p=>p.reduce((m,_)=>!cf.isA(_)&&_.constrained?m-_.flex:m,1),o=p=>p.reduce((m,_)=>!cf.isA(_)&&!_.constrained?m+1:m,0),l=e.map(p=>{const m=p.props;return{maxFlex:(m.maxSize||Number.MAX_VALUE)*i,sizeFlex:(m.size||Number.MAX_VALUE)*i,minFlex:(m.minSize||1)*i,constrained:m.flex!==void 0,flex:m.flex||0,type:p.type}}),u=(p,m=0)=>{let _=!1;const v=o(p),E=s(p),w=p.map(x=>{if(cf.isA(x))return x;const A=x.constrained?x.flex:E/v,O=Math.min(x.sizeFlex,Math.min(x.maxFlex,Math.max(x.minFlex,A))),k=x.constrained||O!==A;return _=_||k,H_({},x,{flex:O,constrained:k})});return _&&m<this.props.maxRecDepth?u(w,m+1):w};return u(l).map(p=>({flex:cf.isA(p)?0:p.flex,ref:vr.createRef()}))}toArray(e){return e?Array.isArray(e)?e:[e]:[]}render(){const e=[this.state.resizing?"reflex-resizing":"",...this.props.className.split(" "),this.props.orientation,"reflex-container"].join(" ").trim();return this.children=vr.Children.map(this.getValidChildren(),(t,i)=>{if(i>this.state.flexData.length-1)return vr.createElement("div",null);const s=this.state.flexData[i],o=H_({},t.props,{maxSize:t.props.maxSize||Number.MAX_VALUE,orientation:this.props.orientation,minSize:t.props.minSize||1,events:this.events,flex:s.flex,ref:s.ref,index:i});return vr.cloneElement(t,o)}),vr.createElement("div",Qe({},zI(this.props),{style:this.props.style,className:e,ref:this.ref}),this.children)}}xl(_A,"propTypes",{windowResizeAware:oi.bool,orientation:oi.oneOf(["horizontal","vertical"]),maxRecDepth:oi.number,className:oi.string,style:oi.object});xl(_A,"defaultProps",{orientation:"horizontal",windowResizeAware:!1,maxRecDepth:100,className:"",style:{}});class Q1 extends vr.Component{static isA(e){return e?e.type===Q1:!1}constructor(e){super(e),xl(this,"ref",vr.createRef()),xl(this,"onMouseMove",t=>{if(this.state.active){const i=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:i,event:t}),this.props.onResize&&this.props.onResize({component:this,domElement:i}),t.stopPropagation(),t.preventDefault()}}),xl(this,"onMouseDown",t=>{this.setState({active:!0}),!(this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this}))&&this.props.events.emit("startResize",{index:this.props.index,event:t})}),xl(this,"onMouseUp",t=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:t}))}),this.state={active:!1},this.document=e.document}componentDidMount(){this.document&&(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){this.document&&(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const e=[...this.props.className.split(" "),this.state.active?"active":"","reflex-handle"].join(" ").trim();return vr.createElement("div",Qe({},zI(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:e,id:this.props.id,ref:this.ref}),this.props.children)}}xl(Q1,"propTypes",{children:oi.oneOfType([oi.arrayOf(oi.node),oi.node]),onStartResize:oi.func,onStopResize:oi.func,className:oi.string,propagate:oi.bool,onResize:oi.func,style:oi.object});xl(Q1,"defaultProps",{document:typeof document>"u"?null:document,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});var YV="Expected a function",Sz=NaN,hle="[object Symbol]",dle=/^\s+|\s+$/g,ple=/^[-+]0x[0-9a-f]+$/i,fle=/^0b[01]+$/i,mle=/^0o[0-7]+$/i,gle=parseInt,_le=typeof Ed=="object"&&Ed&&Ed.Object===Object&&Ed,vle=typeof self=="object"&&self&&self.Object===Object&&self,yle=_le||vle||Function("return this")(),ble=Object.prototype,Tle=ble.toString,Ele=Math.max,$le=Math.min,eO=function(){return yle.Date.now()};function Sle(r,e,t){var i,s,o,l,u,h,p=0,m=!1,_=!1,v=!0;if(typeof r!="function")throw new TypeError(YV);e=wz(e)||0,vA(t)&&(m=!!t.leading,_="maxWait"in t,o=_?Ele(wz(t.maxWait)||0,e):o,v="trailing"in t?!!t.trailing:v);function E(z){var V=i,U=s;return i=s=void 0,p=z,l=r.apply(U,V),l}function w(z){return p=z,u=setTimeout(O,e),m?E(z):l}function x(z){var V=z-h,U=z-p,ee=e-V;return _?$le(ee,o-U):ee}function A(z){var V=z-h,U=z-p;return h===void 0||V>=e||V<0||_&&U>=o}function O(){var z=eO();if(A(z))return k(z);u=setTimeout(O,x(z))}function k(z){return u=void 0,v&&i?E(z):(i=s=void 0,l)}function D(){u!==void 0&&clearTimeout(u),p=0,i=h=s=u=void 0}function N(){return u===void 0?l:k(eO())}function F(){var z=eO(),V=A(z);if(i=arguments,s=this,h=z,V){if(u===void 0)return w(h);if(_)return u=setTimeout(O,e),E(h)}return u===void 0&&(u=setTimeout(O,e)),l}return F.cancel=D,F.flush=N,F}function wle(r,e,t){var i=!0,s=!0;if(typeof r!="function")throw new TypeError(YV);return vA(t)&&(i="leading"in t?!!t.leading:i,s="trailing"in t?!!t.trailing:s),Sle(r,e,{leading:i,maxWait:e,trailing:s})}function vA(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function xle(r){return!!r&&typeof r=="object"}function Cle(r){return typeof r=="symbol"||xle(r)&&Tle.call(r)==hle}function wz(r){if(typeof r=="number")return r;if(Cle(r))return Sz;if(vA(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=vA(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(dle,"");var t=fle.test(r);return t||mle.test(r)?gle(r.slice(2),t?2:8):ple.test(r)?Sz:+r}var Mle=wle;const Ale=U1(Mle);var KV=function(){if(typeof Map<"u")return Map;function r(e,t){var i=-1;return e.some(function(s,o){return s[0]===t?(i=o,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var i=r(this.__entries__,t),s=this.__entries__[i];return s&&s[1]},e.prototype.set=function(t,i){var s=r(this.__entries__,t);~s?this.__entries__[s][1]=i:this.__entries__.push([t,i])},e.prototype.delete=function(t){var i=this.__entries__,s=r(i,t);~s&&i.splice(s,1)},e.prototype.has=function(t){return!!~r(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,i){i===void 0&&(i=null);for(var s=0,o=this.__entries__;s<o.length;s++){var l=o[s];t.call(i,l[1],l[0])}},e}()}(),PN=typeof window<"u"&&typeof document<"u"&&window.document===document,yA=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Ile=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(yA):function(r){return setTimeout(function(){return r(Date.now())},1e3/60)}}(),Rle=2;function kle(r,e){var t=!1,i=!1,s=0;function o(){t&&(t=!1,r()),i&&u()}function l(){Ile(o)}function u(){var h=Date.now();if(t){if(h-s<Rle)return;i=!0}else t=!0,i=!1,setTimeout(l,e);s=h}return u}var Ole=20,Lle=["top","right","bottom","left","width","height","size","weight"],Nle=typeof MutationObserver<"u",Dle=function(){function r(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=kle(this.refresh.bind(this),Ole)}return r.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},r.prototype.removeObserver=function(e){var t=this.observers_,i=t.indexOf(e);~i&&t.splice(i,1),!t.length&&this.connected_&&this.disconnect_()},r.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},r.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},r.prototype.connect_=function(){!PN||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Nle?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},r.prototype.disconnect_=function(){!PN||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},r.prototype.onTransitionEnd_=function(e){var t=e.propertyName,i=t===void 0?"":t,s=Lle.some(function(o){return!!~i.indexOf(o)});s&&this.refresh()},r.getInstance=function(){return this.instance_||(this.instance_=new r),this.instance_},r.instance_=null,r}(),JV=function(r,e){for(var t=0,i=Object.keys(e);t<i.length;t++){var s=i[t];Object.defineProperty(r,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return r},$1=function(r){var e=r&&r.ownerDocument&&r.ownerDocument.defaultView;return e||yA},QV=HI(0,0,0,0);function bA(r){return parseFloat(r)||0}function xz(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(i,s){var o=r["border-"+s+"-width"];return i+bA(o)},0)}function Ble(r){for(var e=["top","right","bottom","left"],t={},i=0,s=e;i<s.length;i++){var o=s[i],l=r["padding-"+o];t[o]=bA(l)}return t}function Ple(r){var e=r.getBBox();return HI(0,0,e.width,e.height)}function Fle(r){var e=r.clientWidth,t=r.clientHeight;if(!e&&!t)return QV;var i=$1(r).getComputedStyle(r),s=Ble(i),o=s.left+s.right,l=s.top+s.bottom,u=bA(i.width),h=bA(i.height);if(i.boxSizing==="border-box"&&(Math.round(u+o)!==e&&(u-=xz(i,"left","right")+o),Math.round(h+l)!==t&&(h-=xz(i,"top","bottom")+l)),!zle(r)){var p=Math.round(u+o)-e,m=Math.round(h+l)-t;Math.abs(p)!==1&&(u-=p),Math.abs(m)!==1&&(h-=m)}return HI(s.left,s.top,u,h)}var Ule=function(){return typeof SVGGraphicsElement<"u"?function(r){return r instanceof $1(r).SVGGraphicsElement}:function(r){return r instanceof $1(r).SVGElement&&typeof r.getBBox=="function"}}();function zle(r){return r===$1(r).document.documentElement}function Hle(r){return PN?Ule(r)?Ple(r):Fle(r):QV}function Gle(r){var e=r.x,t=r.y,i=r.width,s=r.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return JV(l,{x:e,y:t,width:i,height:s,top:t,right:e+i,bottom:s+t,left:e}),l}function HI(r,e,t,i){return{x:r,y:e,width:t,height:i}}var Wle=function(){function r(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=HI(0,0,0,0),this.target=e}return r.prototype.isActive=function(){var e=Hle(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},r.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},r}(),Vle=function(){function r(e,t){var i=Gle(t);JV(this,{target:e,contentRect:i})}return r}(),jle=function(){function r(e,t,i){if(this.activeObservations_=[],this.observations_=new KV,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}return r.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof $1(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Wle(e)),this.controller_.addObserver(this),this.controller_.refresh())}},r.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof $1(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},r.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},r.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},r.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(i){return new Vle(i.target,i.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},r.prototype.clearActive=function(){this.activeObservations_.splice(0)},r.prototype.hasActive=function(){return this.activeObservations_.length>0},r}(),qV=typeof WeakMap<"u"?new WeakMap:new KV,ZV=function(){function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=Dle.getInstance(),i=new jle(e,t,this);qV.set(this,i)}return r}();["observe","unobserve","disconnect"].forEach(function(r){ZV.prototype[r]=function(){var e;return(e=qV.get(this))[r].apply(e,arguments)}});var Xle=function(){return typeof yA.ResizeObserver<"u"?yA.ResizeObserver:ZV}(),Yle=["client","offset","scroll","bounds","margin"];function Cz(r){var e=[];return Yle.forEach(function(t){r[t]&&e.push(t)}),e}function Mz(r,e){var t={};if(e.indexOf("client")>-1&&(t.client={top:r.clientTop,left:r.clientLeft,width:r.clientWidth,height:r.clientHeight}),e.indexOf("offset")>-1&&(t.offset={top:r.offsetTop,left:r.offsetLeft,width:r.offsetWidth,height:r.offsetHeight}),e.indexOf("scroll")>-1&&(t.scroll={top:r.scrollTop,left:r.scrollLeft,width:r.scrollWidth,height:r.scrollHeight}),e.indexOf("bounds")>-1){var i=r.getBoundingClientRect();t.bounds={top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height}}if(e.indexOf("margin")>-1){var s=getComputedStyle(r);t.margin={top:s?parseInt(s.marginTop):0,right:s?parseInt(s.marginRight):0,bottom:s?parseInt(s.marginBottom):0,left:s?parseInt(s.marginLeft):0}}return t}function Kle(r){var e=r&&r.ownerDocument&&r.ownerDocument.defaultView;return e||window}function Jle(r){return function(e){var t,i;return i=t=function(s){AB(o,s);function o(){for(var u,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return u=s.call.apply(s,[this].concat(p))||this,u.state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},u._animationFrameID=null,u._resizeObserver=null,u._node=null,u._window=null,u.measure=function(_){var v=Mz(u._node,r||Cz(u.props));_&&(v.entry=_[0].contentRect),u._animationFrameID=u._window.requestAnimationFrame(function(){u._resizeObserver!==null&&(u.setState({contentRect:v}),typeof u.props.onResize=="function"&&u.props.onResize(v))})},u._handleRef=function(_){u._resizeObserver!==null&&u._node!==null&&u._resizeObserver.unobserve(u._node),u._node=_,u._window=Kle(u._node);var v=u.props.innerRef;v&&(typeof v=="function"?v(u._node):v.current=u._node),u._resizeObserver!==null&&u._node!==null&&u._resizeObserver.observe(u._node)},u}var l=o.prototype;return l.componentDidMount=function(){this._resizeObserver=this._window!==null&&this._window.ResizeObserver?new this._window.ResizeObserver(this.measure):new Xle(this.measure),this._node!==null&&(this._resizeObserver.observe(this._node),typeof this.props.onResize=="function"&&this.props.onResize(Mz(this._node,r||Cz(this.props))))},l.componentWillUnmount=function(){this._window!==null&&this._window.cancelAnimationFrame(this._animationFrameID),this._resizeObserver!==null&&(this._resizeObserver.disconnect(),this._resizeObserver=null)},l.render=function(){var h=this.props;h.innerRef,h.onResize;var p=Cr(h,["innerRef","onResize"]);return de.createElement(e,Qe({},p,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},o}(de.Component),t.propTypes={client:oi.bool,offset:oi.bool,scroll:oi.bool,bounds:oi.bool,margin:oi.bool,innerRef:oi.oneOfType([oi.object,oi.func]),onResize:oi.func},i}}var BB=Jle()(function(r){var e=r.measure,t=r.measureRef,i=r.contentRect,s=r.children;return s({measure:e,measureRef:t,contentRect:i})});BB.displayName="Measure";BB.propTypes.children=oi.func;const FN=r=>r?Array.isArray(r)?r:[r]:[];class Qle extends vr.Component{constructor(e){super(e),xl(this,"onResize",t=>{const{resizeHeight:i,resizeWidth:s}=this.props,{height:o,width:l}=t.bounds;this.setDimensions(H_({},i&&{height:o},s&&{width:l}))}),this.setDimensions=Ale(t=>{this.setState(t)},this.props.propagateDimensionsRate/1e3),this.state={height:"100%",width:"100%"}}renderChildren(){const{propagateDimensions:e}=this.props,t=FN(this.props.children).filter(i=>!!i);return vr.Children.map(t,i=>this.props.withHandle||Q1.isA(i)?vr.cloneElement(i,H_({dimensions:e&&this.state},i.props,{index:this.props.index-1,events:this.props.events})):e?vr.cloneElement(i,H_({},i.props,{dimensions:this.state})):i)}render(){return vr.createElement(BB,{bounds:!0,onResize:this.onResize},({measureRef:e})=>vr.createElement("div",{ref:e,className:"reflex-size-aware"},vr.createElement("div",{style:this.state},this.renderChildren())))}}class PB extends vr.Component{constructor(e){super(e),this.state={size:e.size}}static getDerivedStateFromProps(e,t){return e.size!==t.size?H_({},t,{size:e.size}):null}async componentDidUpdate(e,t,i){if(t.size!==this.state.size){const s=FN(this.props.direction);for(let o of s)await this.props.events.emit("element.size",{index:this.props.index,size:this.props.size,direction:o})}}renderChildren(){const e=FN(this.props.children).filter(t=>!!t);return vr.Children.map(e,t=>this.props.withHandle||Q1.isA(t)?vr.cloneElement(t,H_({},t.props,{index:this.props.index-1,events:this.props.events})):t)}render(){const e=[...this.props.className.split(" "),this.props.orientation,"reflex-element"].join(" ").trim(),t=H_({},this.props.style,{flexGrow:this.props.flex,flexShrink:1,flexBasis:"0%"});return vr.createElement("div",Qe({},zI(this.props),{ref:this.props.innerRef,className:e,style:t}),this.props.propagateDimensions?vr.createElement(Qle,this.props):this.renderChildren())}}xl(PB,"propTypes",{propagateDimensions:oi.bool,resizeHeight:oi.bool,resizeWidth:oi.bool,className:oi.string,size:oi.number});xl(PB,"defaultProps",{propagateDimensionsRate:100,propagateDimensions:!1,resizeHeight:!0,resizeWidth:!0,direction:[1],className:""});const Zx=vr.forwardRef((r,e)=>vr.createElement(PB,Qe({innerRef:e},r))),e8="/gpu-programming/assets/BASE_FRONT_GRILL_1-b5goAhwv.glb";var t8={exports:{}},cb={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */cb.ConcurrentRoot=1;cb.ContinuousEventPriority=4;cb.DefaultEventPriority=16;cb.DiscreteEventPriority=1;cb.IdleEventPriority=536870912;cb.LegacyRoot=0;t8.exports=cb;var B$=t8.exports,n8={exports:{}},tO={exports:{}},nO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Az;function qle(){return Az||(Az=1,function(r){function e(j,te){var q=j.length;j.push(te);e:for(;0<q;){var le=q-1>>>1,_e=j[le];if(0<s(_e,te))j[le]=te,j[q]=_e,q=le;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var te=j[0],q=j.pop();if(q!==te){j[0]=q;e:for(var le=0,_e=j.length,Le=_e>>>1;le<Le;){var xe=2*(le+1)-1,Ve=j[xe],Re=xe+1,Ze=j[Re];if(0>s(Ve,q))Re<_e&&0>s(Ze,Ve)?(j[le]=Ze,j[Re]=q,le=Re):(j[le]=Ve,j[xe]=q,le=xe);else if(Re<_e&&0>s(Ze,q))j[le]=Ze,j[Re]=q,le=Re;else break e}}return te}function s(j,te){var q=j.sortIndex-te.sortIndex;return q!==0?q:j.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();r.unstable_now=function(){return l.now()-u}}var h=[],p=[],m=1,_=null,v=3,E=!1,w=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(j){for(var te=t(p);te!==null;){if(te.callback===null)i(p);else if(te.startTime<=j)i(p),te.sortIndex=te.expirationTime,e(h,te);else break;te=t(p)}}function N(j){if(x=!1,D(j),!w)if(t(h)!==null)w=!0,ge(F);else{var te=t(p);te!==null&&Ie(N,te.startTime-j)}}function F(j,te){w=!1,x&&(x=!1,O(U),U=-1),E=!0;var q=v;try{for(D(te),_=t(h);_!==null&&(!(_.expirationTime>te)||j&&!ie());){var le=_.callback;if(typeof le=="function"){_.callback=null,v=_.priorityLevel;var _e=le(_.expirationTime<=te);te=r.unstable_now(),typeof _e=="function"?_.callback=_e:_===t(h)&&i(h),D(te)}else i(h);_=t(h)}if(_!==null)var Le=!0;else{var xe=t(p);xe!==null&&Ie(N,xe.startTime-te),Le=!1}return Le}finally{_=null,v=q,E=!1}}var z=!1,V=null,U=-1,ee=5,ne=-1;function ie(){return!(r.unstable_now()-ne<ee)}function se(){if(V!==null){var j=r.unstable_now();ne=j;var te=!0;try{te=V(!0,j)}finally{te?fe():(z=!1,V=null)}}else z=!1}var fe;if(typeof k=="function")fe=function(){k(se)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,he=ae.port2;ae.port1.onmessage=se,fe=function(){he.postMessage(null)}}else fe=function(){A(se,0)};function ge(j){V=j,z||(z=!0,fe())}function Ie(j,te){U=A(function(){j(r.unstable_now())},te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(j){j.callback=null},r.unstable_continueExecution=function(){w||E||(w=!0,ge(F))},r.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<j?Math.floor(1e3/j):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(j){switch(v){case 1:case 2:case 3:var te=3;break;default:te=v}var q=v;v=te;try{return j()}finally{v=q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(j,te){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var q=v;v=j;try{return te()}finally{v=q}},r.unstable_scheduleCallback=function(j,te,q){var le=r.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?le+q:le):q=le,j){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=q+_e,j={id:m++,callback:te,priorityLevel:j,startTime:q,expirationTime:_e,sortIndex:-1},q>le?(j.sortIndex=q,e(p,j),t(h)===null&&j===t(p)&&(x?(O(U),U=-1):x=!0,Ie(N,q-le))):(j.sortIndex=_e,e(h,j),w||E||(w=!0,ge(F))),j},r.unstable_shouldYield=ie,r.unstable_wrapCallback=function(j){var te=v;return function(){var q=v;v=te;try{return j.apply(this,arguments)}finally{v=q}}}}(nO)),nO}var Iz;function Zle(){return Iz||(Iz=1,tO.exports=qle()),tO.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eue=function(e){var t={},i=de,s=Zle(),o=Object.assign;function l(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,S=1;S<arguments.length;S++)f+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,h=Symbol.for("react.element"),p=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),w=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),N=Symbol.for("react.offscreen"),F=Symbol.iterator;function z(c){return c===null||typeof c!="object"?null:(c=F&&c[F]||c["@@iterator"],typeof c=="function"?c:null)}function V(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case m:return"Fragment";case p:return"Portal";case v:return"Profiler";case _:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case w:return(c.displayName||"Context")+".Consumer";case E:return(c._context.displayName||"Context")+".Provider";case x:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case k:return f=c.displayName||null,f!==null?f:V(c.type)||"Memo";case D:f=c._payload,c=c._init;try{return V(c(f))}catch{}}return null}function U(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(f);case 8:return f===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function ee(c){var f=c,S=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,f.flags&4098&&(S=f.return),c=f.return;while(c)}return f.tag===3?S:null}function ne(c){if(ee(c)!==c)throw Error(l(188))}function ie(c){var f=c.alternate;if(!f){if(f=ee(c),f===null)throw Error(l(188));return f!==c?null:c}for(var S=c,M=f;;){var L=S.return;if(L===null)break;var H=L.alternate;if(H===null){if(M=L.return,M!==null){S=M;continue}break}if(L.child===H.child){for(H=L.child;H;){if(H===S)return ne(L),c;if(H===M)return ne(L),f;H=H.sibling}throw Error(l(188))}if(S.return!==M.return)S=L,M=H;else{for(var re=!1,Se=L.child;Se;){if(Se===S){re=!0,S=L,M=H;break}if(Se===M){re=!0,M=L,S=H;break}Se=Se.sibling}if(!re){for(Se=H.child;Se;){if(Se===S){re=!0,S=H,M=L;break}if(Se===M){re=!0,M=H,S=L;break}Se=Se.sibling}if(!re)throw Error(l(189))}}if(S.alternate!==M)throw Error(l(190))}if(S.tag!==3)throw Error(l(188));return S.stateNode.current===S?c:f}function se(c){return c=ie(c),c!==null?fe(c):null}function fe(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=fe(c);if(f!==null)return f;c=c.sibling}return null}function ae(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var f=ae(c);if(f!==null)return f}c=c.sibling}return null}var he=Array.isArray,ge=e.getPublicInstance,Ie=e.getRootHostContext,j=e.getChildHostContext,te=e.prepareForCommit,q=e.resetAfterCommit,le=e.createInstance,_e=e.appendInitialChild,Le=e.finalizeInitialChildren,xe=e.prepareUpdate,Ve=e.shouldSetTextContent,Re=e.createTextInstance,Ze=e.scheduleTimeout,et=e.cancelTimeout,ct=e.noTimeout,rt=e.isPrimaryRenderer,Ne=e.supportsMutation,we=e.supportsPersistence,ze=e.supportsHydration,it=e.getInstanceFromNode,nt=e.preparePortalMount,Mt=e.getCurrentEventPriority,At=e.detachDeletedInstance,ht=e.supportsMicrotasks,Et=e.scheduleMicrotask,wt=e.supportsTestSelectors,pt=e.findFiberRoot,be=e.getBoundingRect,Z=e.getTextContent,ke=e.isHiddenSubtree,lt=e.matchAccessibilityRole,mt=e.setFocusIfFocusable,xt=e.setupIntersectionObserver,ut=e.appendChild,He=e.appendChildToContainer,Ce=e.commitTextUpdate,X=e.commitMount,J=e.commitUpdate,oe=e.insertBefore,$e=e.insertInContainerBefore,Ge=e.removeChild,Bt=e.removeChildFromContainer,Pe=e.resetTextContent,Wt=e.hideInstance,st=e.hideTextInstance,Ut=e.unhideInstance,Pt=e.unhideTextInstance,Tn=e.clearContainer,Mr=e.cloneInstance,nr=e.createContainerChildSet,ai=e.appendChildToContainerChildSet,ar=e.finalizeContainerChildren,Qn=e.replaceContainerChildren,Q=e.cloneHiddenInstance,me=e.cloneHiddenTextInstance,De=e.canHydrateInstance,qe=e.canHydrateTextInstance,It=e.canHydrateSuspenseInstance,qt=e.isSuspenseInstancePending,gn=e.isSuspenseInstanceFallback,Ae=e.registerSuspenseInstanceRetry,at=e.getNextHydratableSibling,bt=e.getFirstHydratableChild,dt=e.getFirstHydratableChildWithinContainer,Dt=e.getFirstHydratableChildWithinSuspenseInstance,xn=e.hydrateInstance,Bn=e.hydrateTextInstance,er=e.hydrateSuspenseInstance,mr=e.getNextHydratableInstanceAfterSuspenseInstance,Qr=e.commitHydratedContainer,yr=e.commitHydratedSuspenseInstance,wr=e.clearSuspenseBoundary,Gi=e.clearSuspenseBoundaryFromContainer,Fo=e.shouldDeleteUnhydratedTailInstances,wo=e.didNotMatchHydratedContainerTextInstance,nl=e.didNotMatchHydratedTextInstance,Yt;function lr(c){if(Yt===void 0)try{throw Error()}catch(S){var f=S.stack.trim().match(/\n( *(at )?)/);Yt=f&&f[1]||""}return`
`+Yt+c}var oa=!1;function Uo(c,f){if(!c||oa)return"";oa=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(gt){var M=gt}Reflect.construct(c,[],f)}else{try{f.call()}catch(gt){M=gt}c.call(f.prototype)}else{try{throw Error()}catch(gt){M=gt}c()}}catch(gt){if(gt&&M&&typeof gt.stack=="string"){for(var L=gt.stack.split(`
`),H=M.stack.split(`
`),re=L.length-1,Se=H.length-1;1<=re&&0<=Se&&L[re]!==H[Se];)Se--;for(;1<=re&&0<=Se;re--,Se--)if(L[re]!==H[Se]){if(re!==1||Se!==1)do if(re--,Se--,0>Se||L[re]!==H[Se]){var We=`
`+L[re].replace(" at new "," at ");return c.displayName&&We.includes("<anonymous>")&&(We=We.replace("<anonymous>",c.displayName)),We}while(1<=re&&0<=Se);break}}}finally{oa=!1,Error.prepareStackTrace=S}return(c=c?c.displayName||c.name:"")?lr(c):""}var hs=Object.prototype.hasOwnProperty,ds=[],li=-1;function ur(c){return{current:c}}function pn(c){0>li||(c.current=ds[li],ds[li]=null,li--)}function ir(c,f){li++,ds[li]=c.current,c.current=f}var Tr={},qn=ur(Tr),ui=ur(!1),Ji=Tr;function Gr(c,f){var S=c.type.contextTypes;if(!S)return Tr;var M=c.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===f)return M.__reactInternalMemoizedMaskedChildContext;var L={},H;for(H in S)L[H]=f[H];return M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=L),L}function Di(c){return c=c.childContextTypes,c!=null}function Ia(){pn(ui),pn(qn)}function rl(c,f,S){if(qn.current!==Tr)throw Error(l(168));ir(qn,f),ir(ui,S)}function cc(c,f,S){var M=c.stateNode;if(f=f.childContextTypes,typeof M.getChildContext!="function")return S;M=M.getChildContext();for(var L in M)if(!(L in f))throw Error(l(108,U(c)||"Unknown",L));return o({},S,M)}function Uu(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Tr,Ji=qn.current,ir(qn,c),ir(ui,ui.current),!0}function Cs(c,f,S){var M=c.stateNode;if(!M)throw Error(l(169));S?(c=cc(c,f,Ji),M.__reactInternalMemoizedMergedChildContext=c,pn(ui),pn(qn),ir(qn,c)):pn(ui),ir(ui,S)}var xo=Math.clz32?Math.clz32:uh,su=Math.log,Ll=Math.LN2;function uh(c){return c>>>=0,c===0?32:31-(su(c)/Ll|0)|0}var zo=64,Zn=4194304;function Bi(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Bc(c,f){var S=c.pendingLanes;if(S===0)return 0;var M=0,L=c.suspendedLanes,H=c.pingedLanes,re=S&268435455;if(re!==0){var Se=re&~L;Se!==0?M=Bi(Se):(H&=re,H!==0&&(M=Bi(H)))}else re=S&~L,re!==0?M=Bi(re):H!==0&&(M=Bi(H));if(M===0)return 0;if(f!==0&&f!==M&&!(f&L)&&(L=M&-M,H=f&-f,L>=H||L===16&&(H&4194240)!==0))return f;if(M&4&&(M|=S&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=M;0<f;)S=31-xo(f),L=1<<S,M|=c[S],f&=~L;return M}function ch(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hc(c,f){for(var S=c.suspendedLanes,M=c.pingedLanes,L=c.expirationTimes,H=c.pendingLanes;0<H;){var re=31-xo(H),Se=1<<re,We=L[re];We===-1?(!(Se&S)||Se&M)&&(L[re]=ch(Se,f)):We<=f&&(c.expiredLanes|=Se),H&=~Se}}function il(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function ou(c){for(var f=[],S=0;31>S;S++)f.push(c);return f}function sl(c,f,S){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-xo(f),c[f]=S}function ol(c,f){var S=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var M=c.eventTimes;for(c=c.expirationTimes;0<S;){var L=31-xo(S),H=1<<L;f[L]=0,M[L]=-1,c[L]=-1,S&=~H}}function Yn(c,f){var S=c.entangledLanes|=f;for(c=c.entanglements;S;){var M=31-xo(S),L=1<<M;L&f|c[M]&f&&(c[M]|=f),S&=~L}}var Kn=0;function al(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var Ra=s.unstable_scheduleCallback,aa=s.unstable_cancelCallback,Nl=s.unstable_shouldYield,bi=s.unstable_requestPaint,Pi=s.unstable_now,ll=s.unstable_ImmediatePriority,wd=s.unstable_UserBlockingPriority,Ms=s.unstable_NormalPriority,au=s.unstable_IdlePriority,Co=null,Dl=null;function Wr(c){if(Dl&&typeof Dl.onCommitFiberRoot=="function")try{Dl.onCommitFiberRoot(Co,c,void 0,(c.current.flags&128)===128)}catch{}}function cr(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var Wi=typeof Object.is=="function"?Object.is:cr,As=null,lu=!1,Bl=!1;function Pc(c){As===null?As=[c]:As.push(c)}function Ho(c){lu=!0,Pc(c)}function Go(){if(!Bl&&As!==null){Bl=!0;var c=0,f=Kn;try{var S=As;for(Kn=1;c<S.length;c++){var M=S[c];do M=M(!0);while(M!==null)}As=null,lu=!1}catch(L){throw As!==null&&(As=As.slice(c+1)),Ra(ll,Go),L}finally{Kn=f,Bl=!1}}return null}var uu=u.ReactCurrentBatchConfig;function Vr(c,f){if(Wi(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var S=Object.keys(c),M=Object.keys(f);if(S.length!==M.length)return!1;for(M=0;M<S.length;M++){var L=S[M];if(!hs.call(f,L)||!Wi(c[L],f[L]))return!1}return!0}function ps(c){switch(c.tag){case 5:return lr(c.type);case 16:return lr("Lazy");case 13:return lr("Suspense");case 19:return lr("SuspenseList");case 0:case 2:case 15:return c=Uo(c.type,!1),c;case 11:return c=Uo(c.type.render,!1),c;case 1:return c=Uo(c.type,!0),c;default:return""}}function Ci(c,f){if(c&&c.defaultProps){f=o({},f),c=c.defaultProps;for(var S in c)f[S]===void 0&&(f[S]=c[S]);return f}return f}var qr=ur(null),la=null,Fi=null,cu=null;function qs(){cu=Fi=la=null}function hu(c,f,S){rt?(ir(qr,f._currentValue),f._currentValue=S):(ir(qr,f._currentValue2),f._currentValue2=S)}function ka(c){var f=qr.current;pn(qr),rt?c._currentValue=f:c._currentValue2=f}function ci(c,f,S){for(;c!==null;){var M=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,M!==null&&(M.childLanes|=f)):M!==null&&(M.childLanes&f)!==f&&(M.childLanes|=f),c===S)break;c=c.return}}function Zr(c,f){la=c,cu=Fi=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&f&&(Yr=!0),c.firstContext=null)}function Un(c){var f=rt?c._currentValue:c._currentValue2;if(cu!==c)if(c={context:c,memoizedValue:f,next:null},Fi===null){if(la===null)throw Error(l(308));Fi=c,la.dependencies={lanes:0,firstContext:c}}else Fi=Fi.next=c;return f}var jr=null,Ti=!1;function Uh(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function du(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function fs(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function ul(c,f){var S=c.updateQueue;S!==null&&(S=S.shared,gr!==null&&c.mode&1&&!(On&2)?(c=S.interleaved,c===null?(f.next=f,jr===null?jr=[S]:jr.push(S)):(f.next=c.next,c.next=f),S.interleaved=f):(c=S.pending,c===null?f.next=f:(f.next=c.next,c.next=f),S.pending=f))}function zh(c,f,S){if(f=f.updateQueue,f!==null&&(f=f.shared,(S&4194240)!==0)){var M=f.lanes;M&=c.pendingLanes,S|=M,f.lanes=S,Yn(c,S)}}function hi(c,f){var S=c.updateQueue,M=c.alternate;if(M!==null&&(M=M.updateQueue,S===M)){var L=null,H=null;if(S=S.firstBaseUpdate,S!==null){do{var re={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};H===null?L=H=re:H=H.next=re,S=S.next}while(S!==null);H===null?L=H=f:H=H.next=f}else L=H=f;S={baseState:M.baseState,firstBaseUpdate:L,lastBaseUpdate:H,shared:M.shared,effects:M.effects},c.updateQueue=S;return}c=S.lastBaseUpdate,c===null?S.firstBaseUpdate=f:c.next=f,S.lastBaseUpdate=f}function pu(c,f,S,M){var L=c.updateQueue;Ti=!1;var H=L.firstBaseUpdate,re=L.lastBaseUpdate,Se=L.shared.pending;if(Se!==null){L.shared.pending=null;var We=Se,gt=We.next;We.next=null,re===null?H=gt:re.next=gt,re=We;var zt=c.alternate;zt!==null&&(zt=zt.updateQueue,Se=zt.lastBaseUpdate,Se!==re&&(Se===null?zt.firstBaseUpdate=gt:Se.next=gt,zt.lastBaseUpdate=We))}if(H!==null){var Zt=L.baseState;re=0,zt=gt=We=null,Se=H;do{var hn=Se.lane,an=Se.eventTime;if((M&hn)===hn){zt!==null&&(zt=zt.next={eventTime:an,lane:0,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null});e:{var nn=c,_r=Se;switch(hn=f,an=S,_r.tag){case 1:if(nn=_r.payload,typeof nn=="function"){Zt=nn.call(an,Zt,hn);break e}Zt=nn;break e;case 3:nn.flags=nn.flags&-65537|128;case 0:if(nn=_r.payload,hn=typeof nn=="function"?nn.call(an,Zt,hn):nn,hn==null)break e;Zt=o({},Zt,hn);break e;case 2:Ti=!0}}Se.callback!==null&&Se.lane!==0&&(c.flags|=64,hn=L.effects,hn===null?L.effects=[Se]:hn.push(Se))}else an={eventTime:an,lane:hn,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null},zt===null?(gt=zt=an,We=Zt):zt=zt.next=an,re|=hn;if(Se=Se.next,Se===null){if(Se=L.shared.pending,Se===null)break;hn=Se,Se=hn.next,hn.next=null,L.lastBaseUpdate=hn,L.shared.pending=null}}while(!0);if(zt===null&&(We=Zt),L.baseState=We,L.firstBaseUpdate=gt,L.lastBaseUpdate=zt,f=L.shared.interleaved,f!==null){L=f;do re|=L.lane,L=L.next;while(L!==f)}else H===null&&(L.shared.lanes=0);$u|=re,c.lanes=re,c.memoizedState=Zt}}function sp(c,f,S){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var M=c[f],L=M.callback;if(L!==null){if(M.callback=null,M=S,typeof L!="function")throw Error(l(191,L));L.call(M)}}}var op=new i.Component().refs;function hh(c,f,S,M){f=c.memoizedState,S=S(M,f),S=S==null?f:o({},f,S),c.memoizedState=S,c.lanes===0&&(c.updateQueue.baseState=S)}var ap={isMounted:function(c){return(c=c._reactInternals)?ee(c)===c:!1},enqueueSetState:function(c,f,S){c=c._reactInternals;var M=ji(),L=ys(c),H=fs(M,L);H.payload=f,S!=null&&(H.callback=S),ul(c,H),f=ea(c,L,M),f!==null&&zh(f,c,L)},enqueueReplaceState:function(c,f,S){c=c._reactInternals;var M=ji(),L=ys(c),H=fs(M,L);H.tag=1,H.payload=f,S!=null&&(H.callback=S),ul(c,H),f=ea(c,L,M),f!==null&&zh(f,c,L)},enqueueForceUpdate:function(c,f){c=c._reactInternals;var S=ji(),M=ys(c),L=fs(S,M);L.tag=2,f!=null&&(L.callback=f),ul(c,L),f=ea(c,M,S),f!==null&&zh(f,c,M)}};function Bp(c,f,S,M,L,H,re){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(M,H,re):f.prototype&&f.prototype.isPureReactComponent?!Vr(S,M)||!Vr(L,H):!0}function Rf(c,f,S){var M=!1,L=Tr,H=f.contextType;return typeof H=="object"&&H!==null?H=Un(H):(L=Di(f)?Ji:qn.current,M=f.contextTypes,H=(M=M!=null)?Gr(c,L):Tr),f=new f(S,H),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=ap,c.stateNode=f,f._reactInternals=c,M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=L,c.__reactInternalMemoizedMaskedChildContext=H),f}function lp(c,f,S,M){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(S,M),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(S,M),f.state!==c&&ap.enqueueReplaceState(f,f.state,null)}function zu(c,f,S,M){var L=c.stateNode;L.props=S,L.state=c.memoizedState,L.refs=op,Uh(c);var H=f.contextType;typeof H=="object"&&H!==null?L.context=Un(H):(H=Di(f)?Ji:qn.current,L.context=Gr(c,H)),L.state=c.memoizedState,H=f.getDerivedStateFromProps,typeof H=="function"&&(hh(c,f,H,S),L.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(f=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),f!==L.state&&ap.enqueueReplaceState(L,L.state,null),pu(c,S,L,M),L.state=c.memoizedState),typeof L.componentDidMount=="function"&&(c.flags|=4194308)}var Zs=[],fu=0,dh=null,ua=0,Ur=[],sr=0,Us=null,Wo=1,Mo="";function mu(c,f){Zs[fu++]=ua,Zs[fu++]=dh,dh=c,ua=f}function cl(c,f,S){Ur[sr++]=Wo,Ur[sr++]=Mo,Ur[sr++]=Us,Us=c;var M=Wo;c=Mo;var L=32-xo(M)-1;M&=~(1<<L),S+=1;var H=32-xo(f)+L;if(30<H){var re=L-L%5;H=(M&(1<<re)-1).toString(32),M>>=re,L-=re,Wo=1<<32-xo(f)+L|S<<L|M,Mo=H+c}else Wo=1<<H|S<<L|M,Mo=c}function Hh(c){c.return!==null&&(mu(c,1),cl(c,1,0))}function Ei(c){for(;c===dh;)dh=Zs[--fu],Zs[fu]=null,ua=Zs[--fu],Zs[fu]=null;for(;c===Us;)Us=Ur[--sr],Ur[sr]=null,Mo=Ur[--sr],Ur[sr]=null,Wo=Ur[--sr],Ur[sr]=null}var di=null,or=null,$i=!1,Vo=!1,Pl=null;function up(c,f){var S=Ns(5,null,null,0);S.elementType="DELETED",S.stateNode=f,S.return=c,f=c.deletions,f===null?(c.deletions=[S],c.flags|=16):f.push(S)}function cp(c,f){switch(c.tag){case 5:return f=De(f,c.type,c.pendingProps),f!==null?(c.stateNode=f,di=c,or=bt(f),!0):!1;case 6:return f=qe(f,c.pendingProps),f!==null?(c.stateNode=f,di=c,or=null,!0):!1;case 13:if(f=It(f),f!==null){var S=Us!==null?{id:Wo,overflow:Mo}:null;return c.memoizedState={dehydrated:f,treeContext:S,retryLane:1073741824},S=Ns(18,null,null,0),S.stateNode=f,S.return=c,c.child=S,di=c,or=null,!0}return!1;default:return!1}}function Gh(c){return(c.mode&1)!==0&&(c.flags&128)===0}function gu(c){if($i){var f=or;if(f){var S=f;if(!cp(c,f)){if(Gh(c))throw Error(l(418));f=at(S);var M=di;f&&cp(c,f)?up(M,S):(c.flags=c.flags&-4097|2,$i=!1,di=c)}}else{if(Gh(c))throw Error(l(418));c.flags=c.flags&-4097|2,$i=!1,di=c}}}function Hu(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;di=c}function dc(c){if(!ze||c!==di)return!1;if(!$i)return Hu(c),$i=!0,!1;if(c.tag!==3&&(c.tag!==5||Fo(c.type)&&!Ve(c.type,c.memoizedProps))){var f=or;if(f){if(Gh(c)){for(c=or;c;)c=at(c);throw Error(l(418))}for(;f;)up(c,f),f=at(f)}}if(Hu(c),c.tag===13){if(!ze)throw Error(l(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));or=mr(c)}else or=di?at(c.stateNode):null;return!0}function ph(){ze&&(or=di=null,Vo=$i=!1)}function pc(c){Pl===null?Pl=[c]:Pl.push(c)}function Fl(c,f,S){if(c=S.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(l(309));var M=S.stateNode}if(!M)throw Error(l(147,c));var L=M,H=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===H?f.ref:(f=function(re){var Se=L.refs;Se===op&&(Se=L.refs={}),re===null?delete Se[H]:Se[H]=re},f._stringRef=H,f)}if(typeof c!="string")throw Error(l(284));if(!S._owner)throw Error(l(290,c))}return c}function jo(c,f){throw c=Object.prototype.toString.call(f),Error(l(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function Gu(c){var f=c._init;return f(c._payload)}function fh(c){function f(Ee,Me){if(c){var Xe=Ee.deletions;Xe===null?(Ee.deletions=[Me],Ee.flags|=16):Xe.push(Me)}}function S(Ee,Me){if(!c)return null;for(;Me!==null;)f(Ee,Me),Me=Me.sibling;return null}function M(Ee,Me){for(Ee=new Map;Me!==null;)Me.key!==null?Ee.set(Me.key,Me):Ee.set(Me.index,Me),Me=Me.sibling;return Ee}function L(Ee,Me){return Ee=Ks(Ee,Me),Ee.index=0,Ee.sibling=null,Ee}function H(Ee,Me,Xe){return Ee.index=Xe,c?(Xe=Ee.alternate,Xe!==null?(Xe=Xe.index,Xe<Me?(Ee.flags|=2,Me):Xe):(Ee.flags|=2,Me)):(Ee.flags|=1048576,Me)}function re(Ee){return c&&Ee.alternate===null&&(Ee.flags|=2),Ee}function Se(Ee,Me,Xe,kt){return Me===null||Me.tag!==6?(Me=ts(Xe,Ee.mode,kt),Me.return=Ee,Me):(Me=L(Me,Xe),Me.return=Ee,Me)}function We(Ee,Me,Xe,kt){var Kt=Xe.type;return Kt===m?zt(Ee,Me,Xe.props.children,kt,Xe.key):Me!==null&&(Me.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===D&&Gu(Kt)===Me.type)?(kt=L(Me,Xe.props),kt.ref=Fl(Ee,Me,Xe),kt.return=Ee,kt):(kt=Ha(Xe.type,Xe.key,Xe.props,null,Ee.mode,kt),kt.ref=Fl(Ee,Me,Xe),kt.return=Ee,kt)}function gt(Ee,Me,Xe,kt){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==Xe.containerInfo||Me.stateNode.implementation!==Xe.implementation?(Me=yo(Xe,Ee.mode,kt),Me.return=Ee,Me):(Me=L(Me,Xe.children||[]),Me.return=Ee,Me)}function zt(Ee,Me,Xe,kt,Kt){return Me===null||Me.tag!==7?(Me=ya(Xe,Ee.mode,kt,Kt),Me.return=Ee,Me):(Me=L(Me,Xe),Me.return=Ee,Me)}function Zt(Ee,Me,Xe){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Me=ts(""+Me,Ee.mode,Xe),Me.return=Ee,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case h:return Xe=Ha(Me.type,Me.key,Me.props,null,Ee.mode,Xe),Xe.ref=Fl(Ee,null,Me),Xe.return=Ee,Xe;case p:return Me=yo(Me,Ee.mode,Xe),Me.return=Ee,Me;case D:var kt=Me._init;return Zt(Ee,kt(Me._payload),Xe)}if(he(Me)||z(Me))return Me=ya(Me,Ee.mode,Xe,null),Me.return=Ee,Me;jo(Ee,Me)}return null}function hn(Ee,Me,Xe,kt){var Kt=Me!==null?Me.key:null;if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return Kt!==null?null:Se(Ee,Me,""+Xe,kt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case h:return Xe.key===Kt?We(Ee,Me,Xe,kt):null;case p:return Xe.key===Kt?gt(Ee,Me,Xe,kt):null;case D:return Kt=Xe._init,hn(Ee,Me,Kt(Xe._payload),kt)}if(he(Xe)||z(Xe))return Kt!==null?null:zt(Ee,Me,Xe,kt,null);jo(Ee,Xe)}return null}function an(Ee,Me,Xe,kt,Kt){if(typeof kt=="string"&&kt!==""||typeof kt=="number")return Ee=Ee.get(Xe)||null,Se(Me,Ee,""+kt,Kt);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case h:return Ee=Ee.get(kt.key===null?Xe:kt.key)||null,We(Me,Ee,kt,Kt);case p:return Ee=Ee.get(kt.key===null?Xe:kt.key)||null,gt(Me,Ee,kt,Kt);case D:var ln=kt._init;return an(Ee,Me,Xe,ln(kt._payload),Kt)}if(he(kt)||z(kt))return Ee=Ee.get(Xe)||null,zt(Me,Ee,kt,Kt,null);jo(Me,kt)}return null}function nn(Ee,Me,Xe,kt){for(var Kt=null,ln=null,fn=Me,kn=Me=0,Wn=null;fn!==null&&kn<Xe.length;kn++){fn.index>kn?(Wn=fn,fn=null):Wn=fn.sibling;var hr=hn(Ee,fn,Xe[kn],kt);if(hr===null){fn===null&&(fn=Wn);break}c&&fn&&hr.alternate===null&&f(Ee,fn),Me=H(hr,Me,kn),ln===null?Kt=hr:ln.sibling=hr,ln=hr,fn=Wn}if(kn===Xe.length)return S(Ee,fn),$i&&mu(Ee,kn),Kt;if(fn===null){for(;kn<Xe.length;kn++)fn=Zt(Ee,Xe[kn],kt),fn!==null&&(Me=H(fn,Me,kn),ln===null?Kt=fn:ln.sibling=fn,ln=fn);return $i&&mu(Ee,kn),Kt}for(fn=M(Ee,fn);kn<Xe.length;kn++)Wn=an(fn,Ee,kn,Xe[kn],kt),Wn!==null&&(c&&Wn.alternate!==null&&fn.delete(Wn.key===null?kn:Wn.key),Me=H(Wn,Me,kn),ln===null?Kt=Wn:ln.sibling=Wn,ln=Wn);return c&&fn.forEach(function(Xl){return f(Ee,Xl)}),$i&&mu(Ee,kn),Kt}function _r(Ee,Me,Xe,kt){var Kt=z(Xe);if(typeof Kt!="function")throw Error(l(150));if(Xe=Kt.call(Xe),Xe==null)throw Error(l(151));for(var ln=Kt=null,fn=Me,kn=Me=0,Wn=null,hr=Xe.next();fn!==null&&!hr.done;kn++,hr=Xe.next()){fn.index>kn?(Wn=fn,fn=null):Wn=fn.sibling;var Xl=hn(Ee,fn,hr.value,kt);if(Xl===null){fn===null&&(fn=Wn);break}c&&fn&&Xl.alternate===null&&f(Ee,fn),Me=H(Xl,Me,kn),ln===null?Kt=Xl:ln.sibling=Xl,ln=Xl,fn=Wn}if(hr.done)return S(Ee,fn),$i&&mu(Ee,kn),Kt;if(fn===null){for(;!hr.done;kn++,hr=Xe.next())hr=Zt(Ee,hr.value,kt),hr!==null&&(Me=H(hr,Me,kn),ln===null?Kt=hr:ln.sibling=hr,ln=hr);return $i&&mu(Ee,kn),Kt}for(fn=M(Ee,fn);!hr.done;kn++,hr=Xe.next())hr=an(fn,Ee,kn,hr.value,kt),hr!==null&&(c&&hr.alternate!==null&&fn.delete(hr.key===null?kn:hr.key),Me=H(hr,Me,kn),ln===null?Kt=hr:ln.sibling=hr,ln=hr);return c&&fn.forEach(function(vm){return f(Ee,vm)}),$i&&mu(Ee,kn),Kt}function ft(Ee,Me,Xe,kt){if(typeof Xe=="object"&&Xe!==null&&Xe.type===m&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case h:e:{for(var Kt=Xe.key,ln=Me;ln!==null;){if(ln.key===Kt){if(Kt=Xe.type,Kt===m){if(ln.tag===7){S(Ee,ln.sibling),Me=L(ln,Xe.props.children),Me.return=Ee,Ee=Me;break e}}else if(ln.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===D&&Gu(Kt)===ln.type){S(Ee,ln.sibling),Me=L(ln,Xe.props),Me.ref=Fl(Ee,ln,Xe),Me.return=Ee,Ee=Me;break e}S(Ee,ln);break}else f(Ee,ln);ln=ln.sibling}Xe.type===m?(Me=ya(Xe.props.children,Ee.mode,kt,Xe.key),Me.return=Ee,Ee=Me):(kt=Ha(Xe.type,Xe.key,Xe.props,null,Ee.mode,kt),kt.ref=Fl(Ee,Me,Xe),kt.return=Ee,Ee=kt)}return re(Ee);case p:e:{for(ln=Xe.key;Me!==null;){if(Me.key===ln)if(Me.tag===4&&Me.stateNode.containerInfo===Xe.containerInfo&&Me.stateNode.implementation===Xe.implementation){S(Ee,Me.sibling),Me=L(Me,Xe.children||[]),Me.return=Ee,Ee=Me;break e}else{S(Ee,Me);break}else f(Ee,Me);Me=Me.sibling}Me=yo(Xe,Ee.mode,kt),Me.return=Ee,Ee=Me}return re(Ee);case D:return ln=Xe._init,ft(Ee,Me,ln(Xe._payload),kt)}if(he(Xe))return nn(Ee,Me,Xe,kt);if(z(Xe))return _r(Ee,Me,Xe,kt);jo(Ee,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"?(Xe=""+Xe,Me!==null&&Me.tag===6?(S(Ee,Me.sibling),Me=L(Me,Xe),Me.return=Ee,Ee=Me):(S(Ee,Me),Me=ts(Xe,Ee.mode,kt),Me.return=Ee,Ee=Me),re(Ee)):S(Ee,Me)}return ft}var fc=fh(!0),mc=fh(!1),ms={},Xr=ur(ms),hl=ur(ms),Xo=ur(ms);function dl(c){if(c===ms)throw Error(l(174));return c}function Ul(c,f){ir(Xo,f),ir(hl,c),ir(Xr,ms),c=Ie(f),pn(Xr),ir(Xr,c)}function Fc(){pn(Xr),pn(hl),pn(Xo)}function xd(c){var f=dl(Xo.current),S=dl(Xr.current);f=j(S,c.type,f),S!==f&&(ir(hl,c),ir(Xr,f))}function pi(c){hl.current===c&&(pn(Xr),pn(hl))}var je=ur(0);function Rt(c){for(var f=c;f!==null;){if(f.tag===13){var S=f.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||qt(S)||gn(S)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var yt=[];function mn(){for(var c=0;c<yt.length;c++){var f=yt[c];rt?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}yt.length=0}var Nn=u.ReactCurrentDispatcher,Jn=u.ReactCurrentBatchConfig,tr=0,An=null,xr=null,Is=null,gs=!1,po=!1,ca=0,Vi=0;function ss(){throw Error(l(321))}function gc(c,f){if(f===null)return!1;for(var S=0;S<f.length&&S<c.length;S++)if(!Wi(c[S],f[S]))return!1;return!0}function Lr(c,f,S,M,L,H){if(tr=H,An=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Nn.current=c===null||c.memoizedState===null?bh:Yh,c=S(M,L),po){H=0;do{if(po=!1,ca=0,25<=H)throw Error(l(301));H+=1,Is=xr=null,f.updateQueue=null,Nn.current=Vu,c=S(M,L)}while(po)}if(Nn.current=vc,f=xr!==null&&xr.next!==null,tr=0,Is=xr=An=null,gs=!1,f)throw Error(l(300));return c}function Ao(){var c=ca!==0;return ca=0,c}function Rs(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Is===null?An.memoizedState=Is=c:Is=Is.next=c,Is}function zs(){if(xr===null){var c=An.alternate;c=c!==null?c.memoizedState:null}else c=xr.next;var f=Is===null?An.memoizedState:Is.next;if(f!==null)Is=f,xr=c;else{if(c===null)throw Error(l(310));xr=c,c={memoizedState:xr.memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},Is===null?An.memoizedState=Is=c:Is=Is.next=c}return Is}function Yo(c,f){return typeof f=="function"?f(c):f}function mh(c){var f=zs(),S=f.queue;if(S===null)throw Error(l(311));S.lastRenderedReducer=c;var M=xr,L=M.baseQueue,H=S.pending;if(H!==null){if(L!==null){var re=L.next;L.next=H.next,H.next=re}M.baseQueue=L=H,S.pending=null}if(L!==null){H=L.next,M=M.baseState;var Se=re=null,We=null,gt=H;do{var zt=gt.lane;if((tr&zt)===zt)We!==null&&(We=We.next={lane:0,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null}),M=gt.hasEagerState?gt.eagerState:c(M,gt.action);else{var Zt={lane:zt,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null};We===null?(Se=We=Zt,re=M):We=We.next=Zt,An.lanes|=zt,$u|=zt}gt=gt.next}while(gt!==null&&gt!==H);We===null?re=M:We.next=Se,Wi(M,f.memoizedState)||(Yr=!0),f.memoizedState=M,f.baseState=re,f.baseQueue=We,S.lastRenderedState=M}if(c=S.interleaved,c!==null){L=c;do H=L.lane,An.lanes|=H,$u|=H,L=L.next;while(L!==c)}else L===null&&(S.lanes=0);return[f.memoizedState,S.dispatch]}function Uc(c){var f=zs(),S=f.queue;if(S===null)throw Error(l(311));S.lastRenderedReducer=c;var M=S.dispatch,L=S.pending,H=f.memoizedState;if(L!==null){S.pending=null;var re=L=L.next;do H=c(H,re.action),re=re.next;while(re!==L);Wi(H,f.memoizedState)||(Yr=!0),f.memoizedState=H,f.baseQueue===null&&(f.baseState=H),S.lastRenderedState=H}return[H,M]}function gh(){}function _u(c,f){var S=An,M=zs(),L=f(),H=!Wi(M.memoizedState,L);if(H&&(M.memoizedState=L,Yr=!0),M=M.queue,_h(pl.bind(null,S,M,c),[c]),M.getSnapshot!==f||H||Is!==null&&Is.memoizedState.tag&1){if(S.flags|=2048,zc(9,Vh.bind(null,S,M,L,f),void 0,null),gr===null)throw Error(l(349));tr&30||Wh(S,f,L)}return L}function Wh(c,f,S){c.flags|=16384,c={getSnapshot:f,value:S},f=An.updateQueue,f===null?(f={lastEffect:null,stores:null},An.updateQueue=f,f.stores=[c]):(S=f.stores,S===null?f.stores=[c]:S.push(c))}function Vh(c,f,S,M){f.value=S,f.getSnapshot=M,jh(f)&&ea(c,1,-1)}function pl(c,f,S){return S(function(){jh(f)&&ea(c,1,-1)})}function jh(c){var f=c.getSnapshot;c=c.value;try{var S=f();return!Wi(c,S)}catch{return!0}}function _c(c){var f=Rs();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yo,lastRenderedState:c},f.queue=c,c=c.dispatch=Ko.bind(null,An,c),[f.memoizedState,c]}function zc(c,f,S,M){return c={tag:c,create:f,destroy:S,deps:M,next:null},f=An.updateQueue,f===null?(f={lastEffect:null,stores:null},An.updateQueue=f,f.lastEffect=c.next=c):(S=f.lastEffect,S===null?f.lastEffect=c.next=c:(M=S.next,S.next=c,c.next=M,f.lastEffect=c)),c}function Cd(){return zs().memoizedState}function Oa(c,f,S,M){var L=Rs();An.flags|=c,L.memoizedState=zc(1|f,S,void 0,M===void 0?null:M)}function ha(c,f,S,M){var L=zs();M=M===void 0?null:M;var H=void 0;if(xr!==null){var re=xr.memoizedState;if(H=re.destroy,M!==null&&gc(M,re.deps)){L.memoizedState=zc(f,S,H,M);return}}An.flags|=c,L.memoizedState=zc(1|f,S,H,M)}function vu(c,f){return Oa(8390656,8,c,f)}function _h(c,f){return ha(2048,8,c,f)}function ei(c,f){return ha(4,2,c,f)}function Xh(c,f){return ha(4,4,c,f)}function Hc(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function Wu(c,f,S){return S=S!=null?S.concat([c]):null,ha(4,4,Hc.bind(null,f,c),S)}function vh(){}function Md(c,f){var S=zs();f=f===void 0?null:f;var M=S.memoizedState;return M!==null&&f!==null&&gc(f,M[1])?M[0]:(S.memoizedState=[c,f],c)}function fl(c,f){var S=zs();f=f===void 0?null:f;var M=S.memoizedState;return M!==null&&f!==null&&gc(f,M[1])?M[0]:(c=c(),S.memoizedState=[c,f],c)}function Ad(c,f){var S=Kn;Kn=S!==0&&4>S?S:4,c(!0);var M=Jn.transition;Jn.transition={};try{c(!1),f()}finally{Kn=S,Jn.transition=M}}function yh(){return zs().memoizedState}function eo(c,f,S){var M=ys(c);S={lane:M,action:S,hasEagerState:!1,eagerState:null,next:null},kf(c)?Pp(f,S):(ml(c,f,S),S=ji(),c=ea(c,M,S),c!==null&&gl(c,f,M))}function Ko(c,f,S){var M=ys(c),L={lane:M,action:S,hasEagerState:!1,eagerState:null,next:null};if(kf(c))Pp(f,L);else{ml(c,f,L);var H=c.alternate;if(c.lanes===0&&(H===null||H.lanes===0)&&(H=f.lastRenderedReducer,H!==null))try{var re=f.lastRenderedState,Se=H(re,S);if(L.hasEagerState=!0,L.eagerState=Se,Wi(Se,re))return}catch{}finally{}S=ji(),c=ea(c,M,S),c!==null&&gl(c,f,M)}}function kf(c){var f=c.alternate;return c===An||f!==null&&f===An}function Pp(c,f){po=gs=!0;var S=c.pending;S===null?f.next=f:(f.next=S.next,S.next=f),c.pending=f}function ml(c,f,S){gr!==null&&c.mode&1&&!(On&2)?(c=f.interleaved,c===null?(S.next=S,jr===null?jr=[f]:jr.push(f)):(S.next=c.next,c.next=S),f.interleaved=S):(c=f.pending,c===null?S.next=S:(S.next=c.next,c.next=S),f.pending=S)}function gl(c,f,S){if(S&4194240){var M=f.lanes;M&=c.pendingLanes,S|=M,f.lanes=S,Yn(c,S)}}var vc={readContext:Un,useCallback:ss,useContext:ss,useEffect:ss,useImperativeHandle:ss,useInsertionEffect:ss,useLayoutEffect:ss,useMemo:ss,useReducer:ss,useRef:ss,useState:ss,useDebugValue:ss,useDeferredValue:ss,useTransition:ss,useMutableSource:ss,useSyncExternalStore:ss,useId:ss,unstable_isNewReconciler:!1},bh={readContext:Un,useCallback:function(c,f){return Rs().memoizedState=[c,f===void 0?null:f],c},useContext:Un,useEffect:vu,useImperativeHandle:function(c,f,S){return S=S!=null?S.concat([c]):null,Oa(4194308,4,Hc.bind(null,f,c),S)},useLayoutEffect:function(c,f){return Oa(4194308,4,c,f)},useInsertionEffect:function(c,f){return Oa(4,2,c,f)},useMemo:function(c,f){var S=Rs();return f=f===void 0?null:f,c=c(),S.memoizedState=[c,f],c},useReducer:function(c,f,S){var M=Rs();return f=S!==void 0?S(f):f,M.memoizedState=M.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},M.queue=c,c=c.dispatch=eo.bind(null,An,c),[M.memoizedState,c]},useRef:function(c){var f=Rs();return c={current:c},f.memoizedState=c},useState:_c,useDebugValue:vh,useDeferredValue:function(c){var f=_c(c),S=f[0],M=f[1];return vu(function(){var L=Jn.transition;Jn.transition={};try{M(c)}finally{Jn.transition=L}},[c]),S},useTransition:function(){var c=_c(!1),f=c[0];return c=Ad.bind(null,c[1]),Rs().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,S){var M=An,L=Rs();if($i){if(S===void 0)throw Error(l(407));S=S()}else{if(S=f(),gr===null)throw Error(l(349));tr&30||Wh(M,f,S)}L.memoizedState=S;var H={value:S,getSnapshot:f};return L.queue=H,vu(pl.bind(null,M,H,c),[c]),M.flags|=2048,zc(9,Vh.bind(null,M,H,S,f),void 0,null),S},useId:function(){var c=Rs(),f=gr.identifierPrefix;if($i){var S=Mo,M=Wo;S=(M&~(1<<32-xo(M)-1)).toString(32)+S,f=":"+f+"R"+S,S=ca++,0<S&&(f+="H"+S.toString(32)),f+=":"}else S=Vi++,f=":"+f+"r"+S.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},Yh={readContext:Un,useCallback:Md,useContext:Un,useEffect:_h,useImperativeHandle:Wu,useInsertionEffect:ei,useLayoutEffect:Xh,useMemo:fl,useReducer:mh,useRef:Cd,useState:function(){return mh(Yo)},useDebugValue:vh,useDeferredValue:function(c){var f=mh(Yo),S=f[0],M=f[1];return _h(function(){var L=Jn.transition;Jn.transition={};try{M(c)}finally{Jn.transition=L}},[c]),S},useTransition:function(){var c=mh(Yo)[0],f=zs().memoizedState;return[c,f]},useMutableSource:gh,useSyncExternalStore:_u,useId:yh,unstable_isNewReconciler:!1},Vu={readContext:Un,useCallback:Md,useContext:Un,useEffect:_h,useImperativeHandle:Wu,useInsertionEffect:ei,useLayoutEffect:Xh,useMemo:fl,useReducer:Uc,useRef:Cd,useState:function(){return Uc(Yo)},useDebugValue:vh,useDeferredValue:function(c){var f=Uc(Yo),S=f[0],M=f[1];return _h(function(){var L=Jn.transition;Jn.transition={};try{M(c)}finally{Jn.transition=L}},[c]),S},useTransition:function(){var c=Uc(Yo)[0],f=zs().memoizedState;return[c,f]},useMutableSource:gh,useSyncExternalStore:_u,useId:yh,unstable_isNewReconciler:!1};function La(c,f){try{var S="",M=f;do S+=ps(M),M=M.return;while(M);var L=S}catch(H){L=`
Error generating stack: `+H.message+`
`+H.stack}return{value:c,source:f,stack:L}}function ju(c,f){try{console.error(f.value)}catch(S){setTimeout(function(){throw S})}}var Kh=typeof WeakMap=="function"?WeakMap:Map;function yc(c,f,S){S=fs(-1,S),S.tag=3,S.payload={element:null};var M=f.value;return S.callback=function(){xu||(xu=!0,js=M),ju(c,f)},S}function bc(c,f,S){S=fs(-1,S),S.tag=3;var M=c.type.getDerivedStateFromError;if(typeof M=="function"){var L=f.value;S.payload=function(){return M(L)},S.callback=function(){ju(c,f)}}var H=c.stateNode;return H!==null&&typeof H.componentDidCatch=="function"&&(S.callback=function(){ju(c,f),typeof M!="function"&&(go===null?go=new Set([this]):go.add(this));var re=f.stack;this.componentDidCatch(f.value,{componentStack:re!==null?re:""})}),S}function Xu(c,f,S){var M=c.pingCache;if(M===null){M=c.pingCache=new Kh;var L=new Set;M.set(f,L)}else L=M.get(f),L===void 0&&(L=new Set,M.set(f,L));L.has(S)||(L.add(S),c=Mu.bind(null,c,f,S),f.then(c,c))}function Id(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function Jo(c,f,S,M,L){return c.mode&1?(c.flags|=65536,c.lanes=L,c):(c===f?c.flags|=65536:(c.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(f=fs(-1,1),f.tag=2,ul(S,f))),S.lanes|=1),c)}function Er(c){c.flags|=4}function zl(c,f){if(c!==null&&c.child===f.child)return!0;if(f.flags&16)return!1;for(c=f.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var Qi,Qo,ve,Hs;if(Ne)Qi=function(c,f){for(var S=f.child;S!==null;){if(S.tag===5||S.tag===6)_e(c,S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===f)break;for(;S.sibling===null;){if(S.return===null||S.return===f)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},Qo=function(){},ve=function(c,f,S,M,L){if(c=c.memoizedProps,c!==M){var H=f.stateNode,re=dl(Xr.current);S=xe(H,S,c,M,L,re),(f.updateQueue=S)&&Er(f)}},Hs=function(c,f,S,M){S!==M&&Er(f)};else if(we){Qi=function(c,f,S,M){for(var L=f.child;L!==null;){if(L.tag===5){var H=L.stateNode;S&&M&&(H=Q(H,L.type,L.memoizedProps,L)),_e(c,H)}else if(L.tag===6)H=L.stateNode,S&&M&&(H=me(H,L.memoizedProps,L)),_e(c,H);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)H=L.child,H!==null&&(H.return=L),Qi(c,L,!0,!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===f)break;for(;L.sibling===null;){if(L.return===null||L.return===f)return;L=L.return}L.sibling.return=L.return,L=L.sibling}};var Na=function(c,f,S,M){for(var L=f.child;L!==null;){if(L.tag===5){var H=L.stateNode;S&&M&&(H=Q(H,L.type,L.memoizedProps,L)),ai(c,H)}else if(L.tag===6)H=L.stateNode,S&&M&&(H=me(H,L.memoizedProps,L)),ai(c,H);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)H=L.child,H!==null&&(H.return=L),Na(c,L,!0,!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===f)break;for(;L.sibling===null;){if(L.return===null||L.return===f)return;L=L.return}L.sibling.return=L.return,L=L.sibling}};Qo=function(c,f){var S=f.stateNode;if(!zl(c,f)){c=S.containerInfo;var M=nr(c);Na(M,f,!1,!1),S.pendingChildren=M,Er(f),ar(c,M)}},ve=function(c,f,S,M,L){var H=c.stateNode,re=c.memoizedProps;if((c=zl(c,f))&&re===M)f.stateNode=H;else{var Se=f.stateNode,We=dl(Xr.current),gt=null;re!==M&&(gt=xe(Se,S,re,M,L,We)),c&&gt===null?f.stateNode=H:(H=Mr(H,gt,S,re,M,f,c,Se),Le(H,S,M,L,We)&&Er(f),f.stateNode=H,c?Er(f):Qi(H,f,!1,!1))}},Hs=function(c,f,S,M){S!==M?(c=dl(Xo.current),S=dl(Xr.current),f.stateNode=Re(M,c,S,f),Er(f)):f.stateNode=c.stateNode}}else Qo=function(){},ve=function(){},Hs=function(){};function Br(c,f){if(!$i)switch(c.tailMode){case"hidden":f=c.tail;for(var S=null;f!==null;)f.alternate!==null&&(S=f),f=f.sibling;S===null?c.tail=null:S.sibling=null;break;case"collapsed":S=c.tail;for(var M=null;S!==null;)S.alternate!==null&&(M=S),S=S.sibling;M===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:M.sibling=null}}function zn(c){var f=c.alternate!==null&&c.alternate.child===c.child,S=0,M=0;if(f)for(var L=c.child;L!==null;)S|=L.lanes|L.childLanes,M|=L.subtreeFlags&14680064,M|=L.flags&14680064,L.return=c,L=L.sibling;else for(L=c.child;L!==null;)S|=L.lanes|L.childLanes,M|=L.subtreeFlags,M|=L.flags,L.return=c,L=L.sibling;return c.subtreeFlags|=M,c.childLanes=S,f}function Fp(c,f,S){var M=f.pendingProps;switch(Ei(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(f),null;case 1:return Di(f.type)&&Ia(),zn(f),null;case 3:return M=f.stateNode,Fc(),pn(ui),pn(qn),mn(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(c===null||c.child===null)&&(dc(f)?Er(f):c===null||c.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Pl!==null&&(ni(Pl),Pl=null))),Qo(c,f),zn(f),null;case 5:pi(f),S=dl(Xo.current);var L=f.type;if(c!==null&&f.stateNode!=null)ve(c,f,L,M,S),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!M){if(f.stateNode===null)throw Error(l(166));return zn(f),null}if(c=dl(Xr.current),dc(f)){if(!ze)throw Error(l(175));c=xn(f.stateNode,f.type,f.memoizedProps,S,c,f,!Vo),f.updateQueue=c,c!==null&&Er(f)}else{var H=le(L,M,S,c,f);Qi(H,f,!1,!1),f.stateNode=H,Le(H,L,M,S,c)&&Er(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return zn(f),null;case 6:if(c&&f.stateNode!=null)Hs(c,f,c.memoizedProps,M);else{if(typeof M!="string"&&f.stateNode===null)throw Error(l(166));if(c=dl(Xo.current),S=dl(Xr.current),dc(f)){if(!ze)throw Error(l(176));if(c=f.stateNode,M=f.memoizedProps,(S=Bn(c,M,f,!Vo))&&(L=di,L!==null))switch(H=(L.mode&1)!==0,L.tag){case 3:wo(L.stateNode.containerInfo,c,M,H);break;case 5:nl(L.type,L.memoizedProps,L.stateNode,c,M,H)}S&&Er(f)}else f.stateNode=Re(M,c,S,f)}return zn(f),null;case 13:if(pn(je),M=f.memoizedState,$i&&or!==null&&f.mode&1&&!(f.flags&128)){for(c=or;c;)c=at(c);return ph(),f.flags|=98560,f}if(M!==null&&M.dehydrated!==null){if(M=dc(f),c===null){if(!M)throw Error(l(318));if(!ze)throw Error(l(344));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));er(c,f)}else ph(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return zn(f),null}return Pl!==null&&(ni(Pl),Pl=null),f.flags&128?(f.lanes=S,f):(M=M!==null,S=!1,c===null?dc(f):S=c.memoizedState!==null,M&&!S&&(f.child.flags|=8192,f.mode&1&&(c===null||je.current&1?zi===0&&(zi=3):Yc())),f.updateQueue!==null&&(f.flags|=4),zn(f),null);case 4:return Fc(),Qo(c,f),c===null&&nt(f.stateNode.containerInfo),zn(f),null;case 10:return ka(f.type._context),zn(f),null;case 17:return Di(f.type)&&Ia(),zn(f),null;case 19:if(pn(je),L=f.memoizedState,L===null)return zn(f),null;if(M=(f.flags&128)!==0,H=L.rendering,H===null)if(M)Br(L,!1);else{if(zi!==0||c!==null&&c.flags&128)for(c=f.child;c!==null;){if(H=Rt(c),H!==null){for(f.flags|=128,Br(L,!1),c=H.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),f.subtreeFlags=0,c=S,M=f.child;M!==null;)S=M,L=c,S.flags&=14680066,H=S.alternate,H===null?(S.childLanes=0,S.lanes=L,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=H.childLanes,S.lanes=H.lanes,S.child=H.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=H.memoizedProps,S.memoizedState=H.memoizedState,S.updateQueue=H.updateQueue,S.type=H.type,L=H.dependencies,S.dependencies=L===null?null:{lanes:L.lanes,firstContext:L.firstContext}),M=M.sibling;return ir(je,je.current&1|2),f.child}c=c.sibling}L.tail!==null&&Pi()>_a&&(f.flags|=128,M=!0,Br(L,!1),f.lanes=4194304)}else{if(!M)if(c=Rt(H),c!==null){if(f.flags|=128,M=!0,c=c.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),Br(L,!0),L.tail===null&&L.tailMode==="hidden"&&!H.alternate&&!$i)return zn(f),null}else 2*Pi()-L.renderingStartTime>_a&&S!==1073741824&&(f.flags|=128,M=!0,Br(L,!1),f.lanes=4194304);L.isBackwards?(H.sibling=f.child,f.child=H):(c=L.last,c!==null?c.sibling=H:f.child=H,L.last=H)}return L.tail!==null?(f=L.tail,L.rendering=f,L.tail=f.sibling,L.renderingStartTime=Pi(),f.sibling=null,c=je.current,ir(je,M?c&1|2:c&1),f):(zn(f),null);case 22:case 23:return va(),M=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==M&&(f.flags|=8192),M&&f.mode&1?Vs&1073741824&&(zn(f),Ne&&f.subtreeFlags&6&&(f.flags|=8192)):zn(f),null;case 24:return null;case 25:return null}throw Error(l(156,f.tag))}var da=u.ReactCurrentOwner,Yr=!1;function fi(c,f,S,M){f.child=c===null?mc(f,null,S,M):fc(f,c.child,S,M)}function Si(c,f,S,M,L){S=S.render;var H=f.ref;return Zr(f,L),M=Lr(c,f,S,M,H,L),S=Ao(),c!==null&&!Yr?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~L,qi(c,f,L)):($i&&S&&Hh(f),f.flags|=1,fi(c,f,M,L),f.child)}function Mi(c,f,S,M,L){if(c===null){var H=S.type;return typeof H=="function"&&!Iu(H)&&H.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(f.tag=15,f.type=H,Tc(c,f,H,M,L)):(c=Ha(S.type,null,M,f,f.mode,L),c.ref=f.ref,c.return=f,f.child=c)}if(H=c.child,!(c.lanes&L)){var re=H.memoizedProps;if(S=S.compare,S=S!==null?S:Vr,S(re,M)&&c.ref===f.ref)return qi(c,f,L)}return f.flags|=1,c=Ks(H,M),c.ref=f.ref,c.return=f,f.child=c}function Tc(c,f,S,M,L){if(c!==null&&Vr(c.memoizedProps,M)&&c.ref===f.ref)if(Yr=!1,(c.lanes&L)!==0)c.flags&131072&&(Yr=!0);else return f.lanes=c.lanes,qi(c,f,L);return to(c,f,S,M,L)}function Io(c,f,S){var M=f.pendingProps,L=M.children,H=c!==null?c.memoizedState:null;if(M.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},ir(Ai,Vs),Vs|=S;else if(S&1073741824)f.memoizedState={baseLanes:0,cachePool:null},M=H!==null?H.baseLanes:S,ir(Ai,Vs),Vs|=M;else return c=H!==null?H.baseLanes|S:S,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null},f.updateQueue=null,ir(Ai,Vs),Vs|=c,null;else H!==null?(M=H.baseLanes|S,f.memoizedState=null):M=S,ir(Ai,Vs),Vs|=M;return fi(c,f,L,S),f.child}function Ro(c,f){var S=f.ref;(c===null&&S!==null||c!==null&&c.ref!==S)&&(f.flags|=512,f.flags|=2097152)}function to(c,f,S,M,L){var H=Di(S)?Ji:qn.current;return H=Gr(f,H),Zr(f,L),S=Lr(c,f,S,M,H,L),M=Ao(),c!==null&&!Yr?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~L,qi(c,f,L)):($i&&M&&Hh(f),f.flags|=1,fi(c,f,S,L),f.child)}function Ec(c,f,S,M,L){if(Di(S)){var H=!0;Uu(f)}else H=!1;if(Zr(f,L),f.stateNode===null)c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),Rf(f,S,M),zu(f,S,M,L),M=!0;else if(c===null){var re=f.stateNode,Se=f.memoizedProps;re.props=Se;var We=re.context,gt=S.contextType;typeof gt=="object"&&gt!==null?gt=Un(gt):(gt=Di(S)?Ji:qn.current,gt=Gr(f,gt));var zt=S.getDerivedStateFromProps,Zt=typeof zt=="function"||typeof re.getSnapshotBeforeUpdate=="function";Zt||typeof re.UNSAFE_componentWillReceiveProps!="function"&&typeof re.componentWillReceiveProps!="function"||(Se!==M||We!==gt)&&lp(f,re,M,gt),Ti=!1;var hn=f.memoizedState;re.state=hn,pu(f,M,re,L),We=f.memoizedState,Se!==M||hn!==We||ui.current||Ti?(typeof zt=="function"&&(hh(f,S,zt,M),We=f.memoizedState),(Se=Ti||Bp(f,S,Se,M,hn,We,gt))?(Zt||typeof re.UNSAFE_componentWillMount!="function"&&typeof re.componentWillMount!="function"||(typeof re.componentWillMount=="function"&&re.componentWillMount(),typeof re.UNSAFE_componentWillMount=="function"&&re.UNSAFE_componentWillMount()),typeof re.componentDidMount=="function"&&(f.flags|=4194308)):(typeof re.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=M,f.memoizedState=We),re.props=M,re.state=We,re.context=gt,M=Se):(typeof re.componentDidMount=="function"&&(f.flags|=4194308),M=!1)}else{re=f.stateNode,du(c,f),Se=f.memoizedProps,gt=f.type===f.elementType?Se:Ci(f.type,Se),re.props=gt,Zt=f.pendingProps,hn=re.context,We=S.contextType,typeof We=="object"&&We!==null?We=Un(We):(We=Di(S)?Ji:qn.current,We=Gr(f,We));var an=S.getDerivedStateFromProps;(zt=typeof an=="function"||typeof re.getSnapshotBeforeUpdate=="function")||typeof re.UNSAFE_componentWillReceiveProps!="function"&&typeof re.componentWillReceiveProps!="function"||(Se!==Zt||hn!==We)&&lp(f,re,M,We),Ti=!1,hn=f.memoizedState,re.state=hn,pu(f,M,re,L);var nn=f.memoizedState;Se!==Zt||hn!==nn||ui.current||Ti?(typeof an=="function"&&(hh(f,S,an,M),nn=f.memoizedState),(gt=Ti||Bp(f,S,gt,M,hn,nn,We)||!1)?(zt||typeof re.UNSAFE_componentWillUpdate!="function"&&typeof re.componentWillUpdate!="function"||(typeof re.componentWillUpdate=="function"&&re.componentWillUpdate(M,nn,We),typeof re.UNSAFE_componentWillUpdate=="function"&&re.UNSAFE_componentWillUpdate(M,nn,We)),typeof re.componentDidUpdate=="function"&&(f.flags|=4),typeof re.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof re.componentDidUpdate!="function"||Se===c.memoizedProps&&hn===c.memoizedState||(f.flags|=4),typeof re.getSnapshotBeforeUpdate!="function"||Se===c.memoizedProps&&hn===c.memoizedState||(f.flags|=1024),f.memoizedProps=M,f.memoizedState=nn),re.props=M,re.state=nn,re.context=We,M=gt):(typeof re.componentDidUpdate!="function"||Se===c.memoizedProps&&hn===c.memoizedState||(f.flags|=4),typeof re.getSnapshotBeforeUpdate!="function"||Se===c.memoizedProps&&hn===c.memoizedState||(f.flags|=1024),M=!1)}return fo(c,f,S,M,H,L)}function fo(c,f,S,M,L,H){Ro(c,f);var re=(f.flags&128)!==0;if(!M&&!re)return L&&Cs(f,S,!1),qi(c,f,H);M=f.stateNode,da.current=f;var Se=re&&typeof S.getDerivedStateFromError!="function"?null:M.render();return f.flags|=1,c!==null&&re?(f.child=fc(f,c.child,null,H),f.child=fc(f,null,Se,H)):fi(c,f,Se,H),f.memoizedState=M.state,L&&Cs(f,S,!0),f.child}function Rd(c){var f=c.stateNode;f.pendingContext?rl(c,f.pendingContext,f.pendingContext!==f.context):f.context&&rl(c,f.context,!1),Ul(c,f.containerInfo)}function kd(c,f,S,M,L){return ph(),pc(L),f.flags|=256,fi(c,f,S,M),f.child}var Th={dehydrated:null,treeContext:null,retryLane:0};function pa(c){return{baseLanes:c,cachePool:null}}function Cn(c,f,S){var M=f.pendingProps,L=je.current,H=!1,re=(f.flags&128)!==0,Se;if((Se=re)||(Se=c!==null&&c.memoizedState===null?!1:(L&2)!==0),Se?(H=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(L|=1),ir(je,L&1),c===null)return gu(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(f.mode&1?gn(c)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(L=M.children,c=M.fallback,H?(M=f.mode,H=f.child,L={mode:"hidden",children:L},!(M&1)&&H!==null?(H.childLanes=0,H.pendingProps=L):H=Vl(L,M,0,null),c=ya(c,M,S,null),H.return=f,c.return=f,H.sibling=c,f.child=H,f.child.memoizedState=pa(S),f.memoizedState=Th,c):os(f,L));if(L=c.memoizedState,L!==null){if(Se=L.dehydrated,Se!==null){if(re)return f.flags&256?(f.flags&=-257,_l(c,f,S,Error(l(422)))):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(H=M.fallback,L=f.mode,M=Vl({mode:"visible",children:M.children},L,0,null),H=ya(H,L,S,null),H.flags|=2,M.return=f,H.return=f,M.sibling=H,f.child=M,f.mode&1&&fc(f,c.child,null,S),f.child.memoizedState=pa(S),f.memoizedState=Th,H);if(!(f.mode&1))f=_l(c,f,S,null);else if(gn(Se))f=_l(c,f,S,Error(l(419)));else if(M=(S&c.childLanes)!==0,Yr||M){if(M=gr,M!==null){switch(S&-S){case 4:H=2;break;case 16:H=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:H=32;break;case 536870912:H=268435456;break;default:H=0}M=H&(M.suspendedLanes|S)?0:H,M!==0&&M!==L.retryLane&&(L.retryLane=M,ea(c,M,-1))}Yc(),f=_l(c,f,S,Error(l(421)))}else qt(Se)?(f.flags|=128,f.child=c.child,f=za.bind(null,c),Ae(Se,f),f=null):(S=L.treeContext,ze&&(or=Dt(Se),di=f,$i=!0,Pl=null,Vo=!1,S!==null&&(Ur[sr++]=Wo,Ur[sr++]=Mo,Ur[sr++]=Us,Wo=S.id,Mo=S.overflow,Us=f)),f=os(f,f.pendingProps.children),f.flags|=4096);return f}return H?(M=ti(c,f,M.children,M.fallback,S),H=f.child,L=c.child.memoizedState,H.memoizedState=L===null?pa(S):{baseLanes:L.baseLanes|S,cachePool:null},H.childLanes=c.childLanes&~S,f.memoizedState=Th,M):(S=_s(c,f,M.children,S),f.memoizedState=null,S)}return H?(M=ti(c,f,M.children,M.fallback,S),H=f.child,L=c.child.memoizedState,H.memoizedState=L===null?pa(S):{baseLanes:L.baseLanes|S,cachePool:null},H.childLanes=c.childLanes&~S,f.memoizedState=Th,M):(S=_s(c,f,M.children,S),f.memoizedState=null,S)}function os(c,f){return f=Vl({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function _s(c,f,S,M){var L=c.child;return c=L.sibling,S=Ks(L,{mode:"visible",children:S}),!(f.mode&1)&&(S.lanes=M),S.return=f,S.sibling=null,c!==null&&(M=f.deletions,M===null?(f.deletions=[c],f.flags|=16):M.push(c)),f.child=S}function ti(c,f,S,M,L){var H=f.mode;c=c.child;var re=c.sibling,Se={mode:"hidden",children:S};return!(H&1)&&f.child!==c?(S=f.child,S.childLanes=0,S.pendingProps=Se,f.deletions=null):(S=Ks(c,Se),S.subtreeFlags=c.subtreeFlags&14680064),re!==null?M=Ks(re,M):(M=ya(M,H,L,null),M.flags|=2),M.return=f,S.return=f,S.sibling=M,f.child=S,M}function _l(c,f,S,M){return M!==null&&pc(M),fc(f,c.child,null,S),c=os(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function vl(c,f,S){c.lanes|=f;var M=c.alternate;M!==null&&(M.lanes|=f),ci(c.return,f,S)}function cn(c,f,S,M,L){var H=c.memoizedState;H===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:M,tail:S,tailMode:L}:(H.isBackwards=f,H.rendering=null,H.renderingStartTime=0,H.last=M,H.tail=S,H.tailMode=L)}function Pr(c,f,S){var M=f.pendingProps,L=M.revealOrder,H=M.tail;if(fi(c,f,M.children,S),M=je.current,M&2)M=M&1|2,f.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&vl(c,S,f);else if(c.tag===19)vl(c,S,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}M&=1}if(ir(je,M),!(f.mode&1))f.memoizedState=null;else switch(L){case"forwards":for(S=f.child,L=null;S!==null;)c=S.alternate,c!==null&&Rt(c)===null&&(L=S),S=S.sibling;S=L,S===null?(L=f.child,f.child=null):(L=S.sibling,S.sibling=null),cn(f,!1,L,S,H);break;case"backwards":for(S=null,L=f.child,f.child=null;L!==null;){if(c=L.alternate,c!==null&&Rt(c)===null){f.child=L;break}c=L.sibling,L.sibling=S,S=L,L=c}cn(f,!0,S,null,H);break;case"together":cn(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function qi(c,f,S){if(c!==null&&(f.dependencies=c.dependencies),$u|=f.lanes,!(S&f.childLanes))return null;if(c!==null&&f.child!==c.child)throw Error(l(153));if(f.child!==null){for(c=f.child,S=Ks(c,c.pendingProps),f.child=S,S.return=f;c.sibling!==null;)c=c.sibling,S=S.sibling=Ks(c,c.pendingProps),S.return=f;S.sibling=null}return f.child}function Up(c,f,S){switch(f.tag){case 3:Rd(f),ph();break;case 5:xd(f);break;case 1:Di(f.type)&&Uu(f);break;case 4:Ul(f,f.stateNode.containerInfo);break;case 10:hu(f,f.type._context,f.memoizedProps.value);break;case 13:var M=f.memoizedState;if(M!==null)return M.dehydrated!==null?(ir(je,je.current&1),f.flags|=128,null):S&f.child.childLanes?Cn(c,f,S):(ir(je,je.current&1),c=qi(c,f,S),c!==null?c.sibling:null);ir(je,je.current&1);break;case 19:if(M=(S&f.childLanes)!==0,c.flags&128){if(M)return Pr(c,f,S);f.flags|=128}var L=f.memoizedState;if(L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),ir(je,je.current),M)break;return null;case 22:case 23:return f.lanes=0,Io(c,f,S)}return qi(c,f,S)}function Gc(c,f){switch(Ei(f),f.tag){case 1:return Di(f.type)&&Ia(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return Fc(),pn(ui),pn(qn),mn(),c=f.flags,c&65536&&!(c&128)?(f.flags=c&-65537|128,f):null;case 5:return pi(f),null;case 13:if(pn(je),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(l(340));ph()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return pn(je),null;case 4:return Fc(),null;case 10:return ka(f.type._context),null;case 22:case 23:return va(),null;case 24:return null;default:return null}}var ks=!1,ko=!1,dn=typeof WeakSet=="function"?WeakSet:Set,rn=null;function Da(c,f){var S=c.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(M){Ys(c,f,M)}else S.current=null}function Yu(c,f,S){try{S()}catch(M){Ys(c,f,M)}}var Of=!1;function yu(c,f){for(te(c.containerInfo),rn=f;rn!==null;)if(c=rn,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,rn=f;else for(;rn!==null;){c=rn;try{var S=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var M=S.memoizedProps,L=S.memoizedState,H=c.stateNode,re=H.getSnapshotBeforeUpdate(c.elementType===c.type?M:Ci(c.type,M),L);H.__reactInternalSnapshotBeforeUpdate=re}break;case 3:Ne&&Tn(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(Se){Ys(c,c.return,Se)}if(f=c.sibling,f!==null){f.return=c.return,rn=f;break}rn=c.return}return S=Of,Of=!1,S}function qo(c,f,S){var M=f.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var L=M=M.next;do{if((L.tag&c)===c){var H=L.destroy;L.destroy=void 0,H!==void 0&&Yu(f,S,H)}L=L.next}while(L!==M)}}function as(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var S=f=f.next;do{if((S.tag&c)===c){var M=S.create;S.destroy=M()}S=S.next}while(S!==f)}}function fa(c){var f=c.ref;if(f!==null){var S=c.stateNode;switch(c.tag){case 5:c=ge(S);break;default:c=S}typeof f=="function"?f(c):f.current=c}}function Ui(c,f,S){if(Dl&&typeof Dl.onCommitFiberUnmount=="function")try{Dl.onCommitFiberUnmount(Co,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(c=f.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var M=c=c.next;do{var L=M,H=L.destroy;L=L.tag,H!==void 0&&(L&2||L&4)&&Yu(f,S,H),M=M.next}while(M!==c)}break;case 1:if(Da(f,S),c=f.stateNode,typeof c.componentWillUnmount=="function")try{c.props=f.memoizedProps,c.state=f.memoizedState,c.componentWillUnmount()}catch(re){Ys(f,S,re)}break;case 5:Da(f,S);break;case 4:Ne?Jh(c,f,S):we&&we&&(f=f.stateNode.containerInfo,S=nr(f),Qn(f,S))}}function ma(c,f,S){for(var M=f;;)if(Ui(c,M,S),M.child===null||Ne&&M.tag===4){if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function bu(c){var f=c.alternate;f!==null&&(c.alternate=null,bu(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&At(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Od(c){return c.tag===5||c.tag===3||c.tag===4}function Ku(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Od(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Gs(c){if(Ne){e:{for(var f=c.return;f!==null;){if(Od(f))break e;f=f.return}throw Error(l(160))}var S=f;switch(S.tag){case 5:f=S.stateNode,S.flags&32&&(Pe(f),S.flags&=-33),S=Ku(c),Wc(c,S,f);break;case 3:case 4:f=S.stateNode.containerInfo,S=Ku(c),Ld(c,S,f);break;default:throw Error(l(161))}}}function Ld(c,f,S){var M=c.tag;if(M===5||M===6)c=c.stateNode,f?$e(S,c,f):He(S,c);else if(M!==4&&(c=c.child,c!==null))for(Ld(c,f,S),c=c.sibling;c!==null;)Ld(c,f,S),c=c.sibling}function Wc(c,f,S){var M=c.tag;if(M===5||M===6)c=c.stateNode,f?oe(S,c,f):ut(S,c);else if(M!==4&&(c=c.child,c!==null))for(Wc(c,f,S),c=c.sibling;c!==null;)Wc(c,f,S),c=c.sibling}function Jh(c,f,S){for(var M=f,L=!1,H,re;;){if(!L){L=M.return;e:for(;;){if(L===null)throw Error(l(160));switch(H=L.stateNode,L.tag){case 5:re=!1;break e;case 3:H=H.containerInfo,re=!0;break e;case 4:H=H.containerInfo,re=!0;break e}L=L.return}L=!0}if(M.tag===5||M.tag===6)ma(c,M,S),re?Bt(H,M.stateNode):Ge(H,M.stateNode);else if(M.tag===18)re?Gi(H,M.stateNode):wr(H,M.stateNode);else if(M.tag===4){if(M.child!==null){H=M.stateNode.containerInfo,re=!0,M.child.return=M,M=M.child;continue}}else if(Ui(c,M,S),M.child!==null){M.child.return=M,M=M.child;continue}if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return,M.tag===4&&(L=!1)}M.sibling.return=M.return,M=M.sibling}}function ga(c,f){if(Ne){switch(f.tag){case 0:case 11:case 14:case 15:qo(3,f,f.return),as(3,f),qo(5,f,f.return);return;case 1:return;case 5:var S=f.stateNode;if(S!=null){var M=f.memoizedProps;c=c!==null?c.memoizedProps:M;var L=f.type,H=f.updateQueue;f.updateQueue=null,H!==null&&J(S,H,L,c,M,f)}return;case 6:if(f.stateNode===null)throw Error(l(162));S=f.memoizedProps,Ce(f.stateNode,c!==null?c.memoizedProps:S,S);return;case 3:ze&&c!==null&&c.memoizedState.isDehydrated&&Qr(f.stateNode.containerInfo);return;case 12:return;case 13:yl(f);return;case 19:yl(f);return;case 17:return}throw Error(l(163))}switch(f.tag){case 0:case 11:case 14:case 15:qo(3,f,f.return),as(3,f),qo(5,f,f.return);return;case 12:return;case 13:yl(f);return;case 19:yl(f);return;case 3:ze&&c!==null&&c.memoizedState.isDehydrated&&Qr(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(we){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Qn(f.containerInfo,f.pendingChildren);break e}throw Error(l(163))}}function yl(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var S=c.stateNode;S===null&&(S=c.stateNode=new dn),f.forEach(function(M){var L=Au.bind(null,c,M);S.has(M)||(S.add(M),M.then(L,L))})}}function zp(c,f){for(rn=f;rn!==null;){f=rn;var S=f.deletions;if(S!==null)for(var M=0;M<S.length;M++){var L=S[M];try{var H=c;Ne?Jh(H,L,f):ma(H,L,f);var re=L.alternate;re!==null&&(re.return=null),L.return=null}catch(Kt){Ys(L,f,Kt)}}if(S=f.child,f.subtreeFlags&12854&&S!==null)S.return=f,rn=S;else for(;rn!==null;){f=rn;try{var Se=f.flags;if(Se&32&&Ne&&Pe(f.stateNode),Se&512){var We=f.alternate;if(We!==null){var gt=We.ref;gt!==null&&(typeof gt=="function"?gt(null):gt.current=null)}}if(Se&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var zt=f.alternate;(zt===null||zt.memoizedState===null)&&(qh=Pi())}break;case 22:var Zt=f.memoizedState!==null,hn=f.alternate,an=hn!==null&&hn.memoizedState!==null;if(S=f,Ne){e:if(M=S,L=Zt,H=null,Ne)for(var nn=M;;){if(nn.tag===5){if(H===null){H=nn;var _r=nn.stateNode;L?Wt(_r):Ut(nn.stateNode,nn.memoizedProps)}}else if(nn.tag===6){if(H===null){var ft=nn.stateNode;L?st(ft):Pt(ft,nn.memoizedProps)}}else if((nn.tag!==22&&nn.tag!==23||nn.memoizedState===null||nn===M)&&nn.child!==null){nn.child.return=nn,nn=nn.child;continue}if(nn===M)break;for(;nn.sibling===null;){if(nn.return===null||nn.return===M)break e;H===nn&&(H=null),nn=nn.return}H===nn&&(H=null),nn.sibling.return=nn.return,nn=nn.sibling}}if(Zt&&!an&&S.mode&1){rn=S;for(var Ee=S.child;Ee!==null;){for(S=rn=Ee;rn!==null;){M=rn;var Me=M.child;switch(M.tag){case 0:case 11:case 14:case 15:qo(4,M,M.return);break;case 1:Da(M,M.return);var Xe=M.stateNode;if(typeof Xe.componentWillUnmount=="function"){var kt=M.return;try{Xe.props=M.memoizedProps,Xe.state=M.memoizedState,Xe.componentWillUnmount()}catch(Kt){Ys(M,kt,Kt)}}break;case 5:Da(M,M.return);break;case 22:if(M.memoizedState!==null){$c(S);continue}}Me!==null?(Me.return=M,rn=Me):$c(S)}Ee=Ee.sibling}}}switch(Se&4102){case 2:Gs(f),f.flags&=-3;break;case 6:Gs(f),f.flags&=-3,ga(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,ga(f.alternate,f);break;case 4:ga(f.alternate,f)}}catch(Kt){Ys(f,f.return,Kt)}if(S=f.sibling,S!==null){S.return=f.return,rn=S;break}rn=f.return}}}function Hl(c,f,S){rn=c,Tu(c)}function Tu(c,f,S){for(var M=(c.mode&1)!==0;rn!==null;){var L=rn,H=L.child;if(L.tag===22&&M){var re=L.memoizedState!==null||ks;if(!re){var Se=L.alternate,We=Se!==null&&Se.memoizedState!==null||ko;Se=ks;var gt=ko;if(ks=re,(ko=We)&&!gt)for(rn=L;rn!==null;)re=rn,We=re.child,re.tag===22&&re.memoizedState!==null?ls(L):We!==null?(We.return=re,rn=We):ls(L);for(;H!==null;)rn=H,Tu(H),H=H.sibling;rn=L,ks=Se,ko=gt}Qh(c)}else L.subtreeFlags&8772&&H!==null?(H.return=L,rn=H):Qh(c)}}function Qh(c){for(;rn!==null;){var f=rn;if(f.flags&8772){var S=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:ko||as(5,f);break;case 1:var M=f.stateNode;if(f.flags&4&&!ko)if(S===null)M.componentDidMount();else{var L=f.elementType===f.type?S.memoizedProps:Ci(f.type,S.memoizedProps);M.componentDidUpdate(L,S.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var H=f.updateQueue;H!==null&&sp(f,H,M);break;case 3:var re=f.updateQueue;if(re!==null){if(S=null,f.child!==null)switch(f.child.tag){case 5:S=ge(f.child.stateNode);break;case 1:S=f.child.stateNode}sp(f,re,S)}break;case 5:var Se=f.stateNode;S===null&&f.flags&4&&X(Se,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(ze&&f.memoizedState===null){var We=f.alternate;if(We!==null){var gt=We.memoizedState;if(gt!==null){var zt=gt.dehydrated;zt!==null&&yr(zt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(l(163))}ko||f.flags&512&&fa(f)}catch(Zt){Ys(f,f.return,Zt)}}if(f===c){rn=null;break}if(S=f.sibling,S!==null){S.return=f.return,rn=S;break}rn=f.return}}function $c(c){for(;rn!==null;){var f=rn;if(f===c){rn=null;break}var S=f.sibling;if(S!==null){S.return=f.return,rn=S;break}rn=f.return}}function ls(c){for(;rn!==null;){var f=rn;try{switch(f.tag){case 0:case 11:case 15:var S=f.return;try{as(4,f)}catch(We){Ys(f,S,We)}break;case 1:var M=f.stateNode;if(typeof M.componentDidMount=="function"){var L=f.return;try{M.componentDidMount()}catch(We){Ys(f,L,We)}}var H=f.return;try{fa(f)}catch(We){Ys(f,H,We)}break;case 5:var re=f.return;try{fa(f)}catch(We){Ys(f,re,We)}}}catch(We){Ys(f,f.return,We)}if(f===c){rn=null;break}var Se=f.sibling;if(Se!==null){Se.return=f.return,rn=Se;break}rn=f.return}}var Eu=0,Ju=1,mo=2,Ba=3,vs=4;if(typeof Symbol=="function"&&Symbol.for){var no=Symbol.for;Eu=no("selector.component"),Ju=no("selector.has_pseudo_class"),mo=no("selector.role"),Ba=no("selector.test_id"),vs=no("selector.text")}function Vc(c){var f=it(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(l(364));return f}if(c=pt(c),c===null)throw Error(l(362));return c.stateNode.current}function Ws(c,f){switch(f.$$typeof){case Eu:if(c.type===f.value)return!0;break;case Ju:e:{f=f.value,c=[c,0];for(var S=0;S<c.length;){var M=c[S++],L=c[S++],H=f[L];if(M.tag!==5||!ke(M)){for(;H!=null&&Ws(M,H);)L++,H=f[L];if(L===f.length){f=!0;break e}else for(M=M.child;M!==null;)c.push(M,L),M=M.sibling}}f=!1}return f;case mo:if(c.tag===5&&lt(c.stateNode,f.value))return!0;break;case vs:if((c.tag===5||c.tag===6)&&(c=Z(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case Ba:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(l(365))}return!1}function Pa(c){switch(c.$$typeof){case Eu:return"<"+(V(c.value)||"Unknown")+">";case Ju:return":has("+(Pa(c)||"")+")";case mo:return'[role="'+c.value+'"]';case vs:return'"'+c.value+'"';case Ba:return'[data-testname="'+c.value+'"]';default:throw Error(l(365))}}function Qu(c,f){var S=[];c=[c,0];for(var M=0;M<c.length;){var L=c[M++],H=c[M++],re=f[H];if(L.tag!==5||!ke(L)){for(;re!=null&&Ws(L,re);)H++,re=f[H];if(H===f.length)S.push(L);else for(L=L.child;L!==null;)c.push(L,H),L=L.sibling}}return S}function hp(c,f){if(!wt)throw Error(l(363));c=Vc(c),c=Qu(c,f),f=[],c=Array.from(c);for(var S=0;S<c.length;){var M=c[S++];if(M.tag===5)ke(M)||f.push(M.stateNode);else for(M=M.child;M!==null;)c.push(M),M=M.sibling}return f}var jc=Math.ceil,Zo=u.ReactCurrentDispatcher,mi=u.ReactCurrentOwner,wn=u.ReactCurrentBatchConfig,On=0,gr=null,Ir=null,Fr=0,Vs=0,Ai=ur(0),zi=0,Gl=null,$u=0,qu=0,Su=0,Os=null,ro=null,qh=0,_a=1/0;function wu(){_a=Pi()+500}var xu=!1,js=null,go=null,Fa=!1,_o=null,Zu=0,Cu=0,Eh=null,Xc=-1,br=0;function ji(){return On&6?Pi():Xc!==-1?Xc:Xc=Pi()}function ys(c){return c.mode&1?On&2&&Fr!==0?Fr&-Fr:uu.transition!==null?(br===0&&(c=zo,zo<<=1,!(zo&4194240)&&(zo=64),br=c),br):(c=Kn,c!==0?c:Mt()):1}function ea(c,f,S){if(50<Cu)throw Cu=0,Eh=null,Error(l(185));var M=Ls(c,f);return M===null?null:(sl(M,f,S),(!(On&2)||M!==gr)&&(M===gr&&(!(On&2)&&(qu|=f),zi===4&&bl(M,Fr)),Gn(M,S),f===1&&On===0&&!(c.mode&1)&&(wu(),lu&&Go())),M)}function Ls(c,f){c.lanes|=f;var S=c.alternate;for(S!==null&&(S.lanes|=f),S=c,c=c.return;c!==null;)c.childLanes|=f,S=c.alternate,S!==null&&(S.childLanes|=f),S=c,c=c.return;return S.tag===3?S.stateNode:null}function Gn(c,f){var S=c.callbackNode;hc(c,f);var M=Bc(c,c===gr?Fr:0);if(M===0)S!==null&&aa(S),c.callbackNode=null,c.callbackPriority=0;else if(f=M&-M,c.callbackPriority!==f){if(S!=null&&aa(S),f===1)c.tag===0?Ho(Ua.bind(null,c)):Pc(Ua.bind(null,c)),ht?Et(function(){On===0&&Go()}):Ra(ll,Go),S=null;else{switch(al(M)){case 1:S=ll;break;case 4:S=wd;break;case 16:S=Ms;break;case 536870912:S=au;break;default:S=Ms}S=Zc(S,Sc.bind(null,c))}c.callbackPriority=f,c.callbackNode=S}}function Sc(c,f){if(Xc=-1,br=0,On&6)throw Error(l(327));var S=c.callbackNode;if(ec()&&c.callbackNode!==S)return null;var M=Bc(c,c===gr?Fr:0);if(M===0)return null;if(M&30||M&c.expiredLanes||f)f=es(c,M);else{f=M;var L=On;On|=2;var H=Zh();(gr!==c||Fr!==f)&&(wu(),Rr(c,f));do try{$h();break}catch(Se){wc(c,Se)}while(!0);qs(),Zo.current=H,On=L,Ir!==null?f=0:(gr=null,Fr=0,f=zi)}if(f!==0){if(f===2&&(L=il(c),L!==0&&(M=L,f=on(c,L))),f===1)throw S=Gl,Rr(c,0),bl(c,M),Gn(c,Pi()),S;if(f===6)bl(c,M);else{if(L=c.current.alternate,!(M&30)&&!Zi(L)&&(f=es(c,M),f===2&&(H=il(c),H!==0&&(M=H,f=on(c,H))),f===1))throw S=Gl,Rr(c,0),bl(c,M),Gn(c,Pi()),S;switch(c.finishedWork=L,c.finishedLanes=M,f){case 0:case 1:throw Error(l(345));case 2:Kc(c,ro);break;case 3:if(bl(c,M),(M&130023424)===M&&(f=qh+500-Pi(),10<f)){if(Bc(c,0)!==0)break;if(L=c.suspendedLanes,(L&M)!==M){ji(),c.pingedLanes|=c.suspendedLanes&L;break}c.timeoutHandle=Ze(Kc.bind(null,c,ro),f);break}Kc(c,ro);break;case 4:if(bl(c,M),(M&4194240)===M)break;for(f=c.eventTimes,L=-1;0<M;){var re=31-xo(M);H=1<<re,re=f[re],re>L&&(L=re),M&=~H}if(M=L,M=Pi()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*jc(M/1960))-M,10<M){c.timeoutHandle=Ze(Kc.bind(null,c,ro),M);break}Kc(c,ro);break;case 5:Kc(c,ro);break;default:throw Error(l(329))}}}return Gn(c,Pi()),c.callbackNode===S?Sc.bind(null,c):null}function on(c,f){var S=Os;return c.current.memoizedState.isDehydrated&&(Rr(c,f).flags|=256),c=es(c,f),c!==2&&(f=ro,ro=S,f!==null&&ni(f)),c}function ni(c){ro===null?ro=c:ro.push.apply(ro,c)}function Zi(c){for(var f=c;;){if(f.flags&16384){var S=f.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var M=0;M<S.length;M++){var L=S[M],H=L.getSnapshot;L=L.value;try{if(!Wi(H(),L))return!1}catch{return!1}}}if(S=f.child,f.subtreeFlags&16384&&S!==null)S.return=f,f=S;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function bl(c,f){for(f&=~Su,f&=~qu,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var S=31-xo(f),M=1<<S;c[S]=-1,f&=~M}}function Ua(c){if(On&6)throw Error(l(327));ec();var f=Bc(c,0);if(!(f&1))return Gn(c,Pi()),null;var S=es(c,f);if(c.tag!==0&&S===2){var M=il(c);M!==0&&(f=M,S=on(c,M))}if(S===1)throw S=Gl,Rr(c,0),bl(c,f),Gn(c,Pi()),S;if(S===6)throw Error(l(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,Kc(c,ro),Gn(c,Pi()),null}function Lt(c){_o!==null&&_o.tag===0&&!(On&6)&&ec();var f=On;On|=1;var S=wn.transition,M=Kn;try{if(wn.transition=null,Kn=1,c)return c()}finally{Kn=M,wn.transition=S,On=f,!(On&6)&&Go()}}function va(){Vs=Ai.current,pn(Ai)}function Rr(c,f){c.finishedWork=null,c.finishedLanes=0;var S=c.timeoutHandle;if(S!==ct&&(c.timeoutHandle=ct,et(S)),Ir!==null)for(S=Ir.return;S!==null;){var M=S;switch(Ei(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Ia();break;case 3:Fc(),pn(ui),pn(qn),mn();break;case 5:pi(M);break;case 4:Fc();break;case 13:pn(je);break;case 19:pn(je);break;case 10:ka(M.type._context);break;case 22:case 23:va()}S=S.return}if(gr=c,Ir=c=Ks(c.current,null),Fr=Vs=f,zi=0,Gl=null,Su=qu=$u=0,ro=Os=null,jr!==null){for(f=0;f<jr.length;f++)if(S=jr[f],M=S.interleaved,M!==null){S.interleaved=null;var L=M.next,H=S.pending;if(H!==null){var re=H.next;H.next=L,M.next=re}S.pending=M}jr=null}return c}function wc(c,f){do{var S=Ir;try{if(qs(),Nn.current=vc,gs){for(var M=An.memoizedState;M!==null;){var L=M.queue;L!==null&&(L.pending=null),M=M.next}gs=!1}if(tr=0,Is=xr=An=null,po=!1,ca=0,mi.current=null,S===null||S.return===null){zi=1,Gl=f,Ir=null;break}e:{var H=c,re=S.return,Se=S,We=f;if(f=Fr,Se.flags|=32768,We!==null&&typeof We=="object"&&typeof We.then=="function"){var gt=We,zt=Se,Zt=zt.tag;if(!(zt.mode&1)&&(Zt===0||Zt===11||Zt===15)){var hn=zt.alternate;hn?(zt.updateQueue=hn.updateQueue,zt.memoizedState=hn.memoizedState,zt.lanes=hn.lanes):(zt.updateQueue=null,zt.memoizedState=null)}var an=Id(re);if(an!==null){an.flags&=-257,Jo(an,re,Se,H,f),an.mode&1&&Xu(H,gt,f),f=an,We=gt;var nn=f.updateQueue;if(nn===null){var _r=new Set;_r.add(We),f.updateQueue=_r}else nn.add(We);break e}else{if(!(f&1)){Xu(H,gt,f),Yc();break e}We=Error(l(426))}}else if($i&&Se.mode&1){var ft=Id(re);if(ft!==null){!(ft.flags&65536)&&(ft.flags|=256),Jo(ft,re,Se,H,f),pc(We);break e}}H=We,zi!==4&&(zi=2),Os===null?Os=[H]:Os.push(H),We=La(We,Se),Se=re;do{switch(Se.tag){case 3:Se.flags|=65536,f&=-f,Se.lanes|=f;var Ee=yc(Se,We,f);hi(Se,Ee);break e;case 1:H=We;var Me=Se.type,Xe=Se.stateNode;if(!(Se.flags&128)&&(typeof Me.getDerivedStateFromError=="function"||Xe!==null&&typeof Xe.componentDidCatch=="function"&&(go===null||!go.has(Xe)))){Se.flags|=65536,f&=-f,Se.lanes|=f;var kt=bc(Se,H,f);hi(Se,kt);break e}}Se=Se.return}while(Se!==null)}Wl(S)}catch(Kt){f=Kt,Ir===S&&S!==null&&(Ir=S=S.return);continue}break}while(!0)}function Zh(){var c=Zo.current;return Zo.current=vc,c===null?vc:c}function Yc(){(zi===0||zi===3||zi===2)&&(zi=4),gr===null||!($u&268435455)&&!(qu&268435455)||bl(gr,Fr)}function es(c,f){var S=On;On|=2;var M=Zh();gr===c&&Fr===f||Rr(c,f);do try{bs();break}catch(L){wc(c,L)}while(!0);if(qs(),On=S,Zo.current=M,Ir!==null)throw Error(l(261));return gr=null,Fr=0,zi}function bs(){for(;Ir!==null;)Xs(Ir)}function $h(){for(;Ir!==null&&!Nl();)Xs(Ir)}function Xs(c){var f=qc(c.alternate,c,Vs);c.memoizedProps=c.pendingProps,f===null?Wl(c):Ir=f,mi.current=null}function Wl(c){var f=c;do{var S=f.alternate;if(c=f.return,f.flags&32768){if(S=Gc(S,f),S!==null){S.flags&=32767,Ir=S;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{zi=6,Ir=null;return}}else if(S=Fp(S,f,Vs),S!==null){Ir=S;return}if(f=f.sibling,f!==null){Ir=f;return}Ir=f=c}while(f!==null);zi===0&&(zi=5)}function Kc(c,f){var S=Kn,M=wn.transition;try{wn.transition=null,Kn=1,Jc(c,f,S)}finally{wn.transition=M,Kn=S}return null}function Jc(c,f,S){do ec();while(_o!==null);if(On&6)throw Error(l(327));var M=c.finishedWork,L=c.finishedLanes;if(M===null)return null;if(c.finishedWork=null,c.finishedLanes=0,M===c.current)throw Error(l(177));c.callbackNode=null,c.callbackPriority=0;var H=M.lanes|M.childLanes;if(ol(c,H),c===gr&&(Ir=gr=null,Fr=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||Fa||(Fa=!0,Zc(Ms,function(){return ec(),null})),H=(M.flags&15990)!==0,M.subtreeFlags&15990||H){H=wn.transition,wn.transition=null;var re=Kn;Kn=1;var Se=On;On|=4,mi.current=null,yu(c,M),zp(c,M),q(c.containerInfo),c.current=M,Hl(M),bi(),On=Se,Kn=re,wn.transition=H}else c.current=M;if(Fa&&(Fa=!1,_o=c,Zu=L),H=c.pendingLanes,H===0&&(go=null),Wr(M.stateNode),Gn(c,Pi()),f!==null)for(S=c.onRecoverableError,M=0;M<f.length;M++)S(f[M]);if(xu)throw xu=!1,c=js,js=null,c;return Zu&1&&c.tag!==0&&ec(),H=c.pendingLanes,H&1?c===Eh?Cu++:(Cu=0,Eh=c):Cu=0,Go(),null}function ec(){if(_o!==null){var c=al(Zu),f=wn.transition,S=Kn;try{if(wn.transition=null,Kn=16>c?16:c,_o===null)var M=!1;else{if(c=_o,_o=null,Zu=0,On&6)throw Error(l(331));var L=On;for(On|=4,rn=c.current;rn!==null;){var H=rn,re=H.child;if(rn.flags&16){var Se=H.deletions;if(Se!==null){for(var We=0;We<Se.length;We++){var gt=Se[We];for(rn=gt;rn!==null;){var zt=rn;switch(zt.tag){case 0:case 11:case 15:qo(8,zt,H)}var Zt=zt.child;if(Zt!==null)Zt.return=zt,rn=Zt;else for(;rn!==null;){zt=rn;var hn=zt.sibling,an=zt.return;if(bu(zt),zt===gt){rn=null;break}if(hn!==null){hn.return=an,rn=hn;break}rn=an}}}var nn=H.alternate;if(nn!==null){var _r=nn.child;if(_r!==null){nn.child=null;do{var ft=_r.sibling;_r.sibling=null,_r=ft}while(_r!==null)}}rn=H}}if(H.subtreeFlags&2064&&re!==null)re.return=H,rn=re;else e:for(;rn!==null;){if(H=rn,H.flags&2048)switch(H.tag){case 0:case 11:case 15:qo(9,H,H.return)}var Ee=H.sibling;if(Ee!==null){Ee.return=H.return,rn=Ee;break e}rn=H.return}}var Me=c.current;for(rn=Me;rn!==null;){re=rn;var Xe=re.child;if(re.subtreeFlags&2064&&Xe!==null)Xe.return=re,rn=Xe;else e:for(re=Me;rn!==null;){if(Se=rn,Se.flags&2048)try{switch(Se.tag){case 0:case 11:case 15:as(9,Se)}}catch(Kt){Ys(Se,Se.return,Kt)}if(Se===re){rn=null;break e}var kt=Se.sibling;if(kt!==null){kt.return=Se.return,rn=kt;break e}rn=Se.return}}if(On=L,Go(),Dl&&typeof Dl.onPostCommitFiberRoot=="function")try{Dl.onPostCommitFiberRoot(Co,c)}catch{}M=!0}return M}finally{Kn=S,wn.transition=f}}return!1}function vo(c,f,S){f=La(S,f),f=yc(c,f,1),ul(c,f),f=ji(),c=Ls(c,1),c!==null&&(sl(c,1,f),Gn(c,f))}function Ys(c,f,S){if(c.tag===3)vo(c,c,S);else for(;f!==null;){if(f.tag===3){vo(f,c,S);break}else if(f.tag===1){var M=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(go===null||!go.has(M))){c=La(S,c),c=bc(f,c,1),ul(f,c),c=ji(),f=Ls(f,1),f!==null&&(sl(f,1,c),Gn(f,c));break}}f=f.return}}function Mu(c,f,S){var M=c.pingCache;M!==null&&M.delete(f),f=ji(),c.pingedLanes|=c.suspendedLanes&S,gr===c&&(Fr&S)===S&&(zi===4||zi===3&&(Fr&130023424)===Fr&&500>Pi()-qh?Rr(c,0):Su|=S),Gn(c,f)}function Qc(c,f){f===0&&(c.mode&1?(f=Zn,Zn<<=1,!(Zn&130023424)&&(Zn=4194304)):f=1);var S=ji();c=Ls(c,f),c!==null&&(sl(c,f,S),Gn(c,S))}function za(c){var f=c.memoizedState,S=0;f!==null&&(S=f.retryLane),Qc(c,S)}function Au(c,f){var S=0;switch(c.tag){case 13:var M=c.stateNode,L=c.memoizedState;L!==null&&(S=L.retryLane);break;case 19:M=c.stateNode;break;default:throw Error(l(314))}M!==null&&M.delete(f),Qc(c,S)}var qc;qc=function(c,f,S){if(c!==null)if(c.memoizedProps!==f.pendingProps||ui.current)Yr=!0;else{if(!(c.lanes&S)&&!(f.flags&128))return Yr=!1,Up(c,f,S);Yr=!!(c.flags&131072)}else Yr=!1,$i&&f.flags&1048576&&cl(f,ua,f.index);switch(f.lanes=0,f.tag){case 2:var M=f.type;c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps;var L=Gr(f,qn.current);Zr(f,S),L=Lr(null,f,M,c,L,S);var H=Ao();return f.flags|=1,typeof L=="object"&&L!==null&&typeof L.render=="function"&&L.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Di(M)?(H=!0,Uu(f)):H=!1,f.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,Uh(f),L.updater=ap,f.stateNode=L,L._reactInternals=f,zu(f,M,c,S),f=fo(null,f,M,!0,H,S)):(f.tag=0,$i&&H&&Hh(f),fi(null,f,L,S),f=f.child),f;case 16:M=f.elementType;e:{switch(c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps,L=M._init,M=L(M._payload),f.type=M,L=f.tag=Tl(M),c=Ci(M,c),L){case 0:f=to(null,f,M,c,S);break e;case 1:f=Ec(null,f,M,c,S);break e;case 11:f=Si(null,f,M,c,S);break e;case 14:f=Mi(null,f,M,Ci(M.type,c),S);break e}throw Error(l(306,M,""))}return f;case 0:return M=f.type,L=f.pendingProps,L=f.elementType===M?L:Ci(M,L),to(c,f,M,L,S);case 1:return M=f.type,L=f.pendingProps,L=f.elementType===M?L:Ci(M,L),Ec(c,f,M,L,S);case 3:e:{if(Rd(f),c===null)throw Error(l(387));M=f.pendingProps,H=f.memoizedState,L=H.element,du(c,f),pu(f,M,null,S);var re=f.memoizedState;if(M=re.element,ze&&H.isDehydrated)if(H={element:M,isDehydrated:!1,cache:re.cache,transitions:re.transitions},f.updateQueue.baseState=H,f.memoizedState=H,f.flags&256){L=Error(l(423)),f=kd(c,f,M,S,L);break e}else if(M!==L){L=Error(l(424)),f=kd(c,f,M,S,L);break e}else for(ze&&(or=dt(f.stateNode.containerInfo),di=f,$i=!0,Pl=null,Vo=!1),S=mc(f,null,M,S),f.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(ph(),M===L){f=qi(c,f,S);break e}fi(c,f,M,S)}f=f.child}return f;case 5:return xd(f),c===null&&gu(f),M=f.type,L=f.pendingProps,H=c!==null?c.memoizedProps:null,re=L.children,Ve(M,L)?re=null:H!==null&&Ve(M,H)&&(f.flags|=32),Ro(c,f),fi(c,f,re,S),f.child;case 6:return c===null&&gu(f),null;case 13:return Cn(c,f,S);case 4:return Ul(f,f.stateNode.containerInfo),M=f.pendingProps,c===null?f.child=fc(f,null,M,S):fi(c,f,M,S),f.child;case 11:return M=f.type,L=f.pendingProps,L=f.elementType===M?L:Ci(M,L),Si(c,f,M,L,S);case 7:return fi(c,f,f.pendingProps,S),f.child;case 8:return fi(c,f,f.pendingProps.children,S),f.child;case 12:return fi(c,f,f.pendingProps.children,S),f.child;case 10:e:{if(M=f.type._context,L=f.pendingProps,H=f.memoizedProps,re=L.value,hu(f,M,re),H!==null)if(Wi(H.value,re)){if(H.children===L.children&&!ui.current){f=qi(c,f,S);break e}}else for(H=f.child,H!==null&&(H.return=f);H!==null;){var Se=H.dependencies;if(Se!==null){re=H.child;for(var We=Se.firstContext;We!==null;){if(We.context===M){if(H.tag===1){We=fs(-1,S&-S),We.tag=2;var gt=H.updateQueue;if(gt!==null){gt=gt.shared;var zt=gt.pending;zt===null?We.next=We:(We.next=zt.next,zt.next=We),gt.pending=We}}H.lanes|=S,We=H.alternate,We!==null&&(We.lanes|=S),ci(H.return,S,f),Se.lanes|=S;break}We=We.next}}else if(H.tag===10)re=H.type===f.type?null:H.child;else if(H.tag===18){if(re=H.return,re===null)throw Error(l(341));re.lanes|=S,Se=re.alternate,Se!==null&&(Se.lanes|=S),ci(re,S,f),re=H.sibling}else re=H.child;if(re!==null)re.return=H;else for(re=H;re!==null;){if(re===f){re=null;break}if(H=re.sibling,H!==null){H.return=re.return,re=H;break}re=re.return}H=re}fi(c,f,L.children,S),f=f.child}return f;case 9:return L=f.type,M=f.pendingProps.children,Zr(f,S),L=Un(L),M=M(L),f.flags|=1,fi(c,f,M,S),f.child;case 14:return M=f.type,L=Ci(M,f.pendingProps),L=Ci(M.type,L),Mi(c,f,M,L,S);case 15:return Tc(c,f,f.type,f.pendingProps,S);case 17:return M=f.type,L=f.pendingProps,L=f.elementType===M?L:Ci(M,L),c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,Di(M)?(c=!0,Uu(f)):c=!1,Zr(f,S),Rf(f,M,L),zu(f,M,L,S),fo(null,f,M,!0,c,S);case 19:return Pr(c,f,S);case 22:return Io(c,f,S)}throw Error(l(156,f.tag))};function Zc(c,f){return Ra(c,f)}function io(c,f,S,M){this.tag=c,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(c,f,S,M){return new io(c,f,S,M)}function Iu(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Tl(c){if(typeof c=="function")return Iu(c)?1:0;if(c!=null){if(c=c.$$typeof,c===x)return 11;if(c===k)return 14}return 2}function Ks(c,f){var S=c.alternate;return S===null?(S=Ns(c.tag,f,c.key,c.mode),S.elementType=c.elementType,S.type=c.type,S.stateNode=c.stateNode,S.alternate=c,c.alternate=S):(S.pendingProps=f,S.type=c.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=c.flags&14680064,S.childLanes=c.childLanes,S.lanes=c.lanes,S.child=c.child,S.memoizedProps=c.memoizedProps,S.memoizedState=c.memoizedState,S.updateQueue=c.updateQueue,f=c.dependencies,S.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},S.sibling=c.sibling,S.index=c.index,S.ref=c.ref,S}function Ha(c,f,S,M,L,H){var re=2;if(M=c,typeof c=="function")Iu(c)&&(re=1);else if(typeof c=="string")re=5;else e:switch(c){case m:return ya(S.children,L,H,f);case _:re=8,L|=8;break;case v:return c=Ns(12,S,f,L|2),c.elementType=v,c.lanes=H,c;case A:return c=Ns(13,S,f,L),c.elementType=A,c.lanes=H,c;case O:return c=Ns(19,S,f,L),c.elementType=O,c.lanes=H,c;case N:return Vl(S,L,H,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case E:re=10;break e;case w:re=9;break e;case x:re=11;break e;case k:re=14;break e;case D:re=16,M=null;break e}throw Error(l(130,c==null?c:typeof c,""))}return f=Ns(re,S,f,L),f.elementType=c,f.type=M,f.lanes=H,f}function ya(c,f,S,M){return c=Ns(7,c,M,f),c.lanes=S,c}function Vl(c,f,S,M){return c=Ns(22,c,M,f),c.elementType=N,c.lanes=S,c.stateNode={},c}function ts(c,f,S){return c=Ns(6,c,null,f),c.lanes=S,c}function yo(c,f,S){return f=Ns(4,c.children!==null?c.children:[],c.key,f),f.lanes=S,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function Sh(c,f,S,M,L){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ct,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ou(0),this.expirationTimes=ou(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ou(0),this.identifierPrefix=M,this.onRecoverableError=L,ze&&(this.mutableSourceEagerHydrationData=null)}function ed(c,f,S,M,L,H,re,Se,We){return c=new Sh(c,f,S,Se,We),f===1?(f=1,H===!0&&(f|=8)):f=0,H=Ns(3,null,null,f),c.current=H,H.stateNode=c,H.memoizedState={element:M,isDehydrated:S,cache:null,transitions:null},Uh(H),c}function Ga(c){if(!c)return Tr;c=c._reactInternals;e:{if(ee(c)!==c||c.tag!==1)throw Error(l(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Di(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(l(171))}if(c.tag===1){var S=c.type;if(Di(S))return cc(c,S,f)}return f}function jl(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(l(188)):(c=Object.keys(c).join(","),Error(l(268,c)));return c=se(f),c===null?null:c.stateNode}function td(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var S=c.retryLane;c.retryLane=S!==0&&S<f?S:f}}function xc(c,f){td(c,f),(c=c.alternate)&&td(c,f)}function Hp(c){return c=se(c),c===null?null:c.stateNode}function $(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var f=ji();ea(c,134217728,f),xc(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var f=ji(),S=ys(c);ea(c,S,f),xc(c,S)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var S=Bi(f.pendingLanes);S!==0&&(Yn(f,S|1),Gn(f,Pi()),!(On&6)&&(wu(),Go()))}break;case 13:var M=ji();Lt(function(){return ea(c,1,M)}),xc(c,1)}},t.batchedUpdates=function(c,f){var S=On;On|=1;try{return c(f)}finally{On=S,On===0&&(wu(),lu&&Go())}},t.createComponentSelector=function(c){return{$$typeof:Eu,value:c}},t.createContainer=function(c,f,S,M,L,H,re){return ed(c,f,!1,null,S,M,L,H,re)},t.createHasPseudoClassSelector=function(c){return{$$typeof:Ju,value:c}},t.createHydrationContainer=function(c,f,S,M,L,H,re,Se,We){return c=ed(S,M,!0,c,L,H,re,Se,We),c.context=Ga(null),S=c.current,M=ji(),L=ys(S),H=fs(M,L),H.callback=f??null,ul(S,H),c.current.lanes=L,sl(c,L,M),Gn(c,M),c},t.createPortal=function(c,f,S){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:M==null?null:""+M,children:c,containerInfo:f,implementation:S}},t.createRoleSelector=function(c){return{$$typeof:mo,value:c}},t.createTestNameSelector=function(c){return{$$typeof:Ba,value:c}},t.createTextSelector=function(c){return{$$typeof:vs,value:c}},t.deferredUpdates=function(c){var f=Kn,S=wn.transition;try{return wn.transition=null,Kn=16,c()}finally{Kn=f,wn.transition=S}},t.discreteUpdates=function(c,f,S,M,L){var H=Kn,re=wn.transition;try{return wn.transition=null,Kn=1,c(f,S,M,L)}finally{Kn=H,wn.transition=re,On===0&&wu()}},t.findAllNodes=hp,t.findBoundingRects=function(c,f){if(!wt)throw Error(l(363));f=hp(c,f),c=[];for(var S=0;S<f.length;S++)c.push(be(f[S]));for(f=c.length-1;0<f;f--){S=c[f];for(var M=S.x,L=M+S.width,H=S.y,re=H+S.height,Se=f-1;0<=Se;Se--)if(f!==Se){var We=c[Se],gt=We.x,zt=gt+We.width,Zt=We.y,hn=Zt+We.height;if(M>=gt&&H>=Zt&&L<=zt&&re<=hn){c.splice(f,1);break}else if(M!==gt||S.width!==We.width||hn<H||Zt>re){if(!(H!==Zt||S.height!==We.height||zt<M||gt>L)){gt>M&&(We.width+=gt-M,We.x=M),zt<L&&(We.width=L-gt),c.splice(f,1);break}}else{Zt>H&&(We.height+=Zt-H,We.y=H),hn<re&&(We.height=re-Zt),c.splice(f,1);break}}}return c},t.findHostInstance=jl,t.findHostInstanceWithNoPortals=function(c){return c=ie(c),c=c!==null?ae(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return jl(c)},t.flushControlled=function(c){var f=On;On|=1;var S=wn.transition,M=Kn;try{wn.transition=null,Kn=1,c()}finally{Kn=M,wn.transition=S,On=f,On===0&&(wu(),Go())}},t.flushPassiveEffects=ec,t.flushSync=Lt,t.focusWithin=function(c,f){if(!wt)throw Error(l(363));for(c=Vc(c),f=Qu(c,f),f=Array.from(f),c=0;c<f.length;){var S=f[c++];if(!ke(S)){if(S.tag===5&&mt(S.stateNode))return!0;for(S=S.child;S!==null;)f.push(S),S=S.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Kn},t.getFindAllNodesFailureDescription=function(c,f){if(!wt)throw Error(l(363));var S=0,M=[];c=[Vc(c),0];for(var L=0;L<c.length;){var H=c[L++],re=c[L++],Se=f[re];if((H.tag!==5||!ke(H))&&(Ws(H,Se)&&(M.push(Pa(Se)),re++,re>S&&(S=re)),re<f.length))for(H=H.child;H!==null;)c.push(H,re),H=H.sibling}if(S<f.length){for(c=[];S<f.length;S++)c.push(Pa(f[S]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return ge(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:Hp,findFiberByHostInstance:c.findFiberByHostInstance||$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{Co=f.inject(c),Dl=f}catch{}c=!!f.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,f,S,M){if(!wt)throw Error(l(363));c=hp(c,f);var L=xt(c,S,M).disconnect;return{disconnect:function(){L()}}},t.registerMutableSourceForHydration=function(c,f){var S=f._getVersion;S=S(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,S]:c.mutableSourceEagerHydrationData.push(f,S)},t.runWithPriority=function(c,f){var S=Kn;try{return Kn=c,f()}finally{Kn=S}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,f,S,M){var L=f.current,H=ji(),re=ys(L);return S=Ga(S),f.context===null?f.context=S:f.pendingContext=S,f=fs(H,re),f.payload={element:c},M=M===void 0?null:M,M!==null&&(f.callback=M),ul(L,f),c=ea(L,re,H),c!==null&&zh(c,L,re),re},t};n8.exports=eue;var tue=n8.exports;const nue=U1(tue);var r8={exports:{}},i8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(j,te){var q=j.length;j.push(te);e:for(;0<q;){var le=q-1>>>1,_e=j[le];if(0<s(_e,te))j[le]=te,j[q]=_e,q=le;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var te=j[0],q=j.pop();if(q!==te){j[0]=q;e:for(var le=0,_e=j.length,Le=_e>>>1;le<Le;){var xe=2*(le+1)-1,Ve=j[xe],Re=xe+1,Ze=j[Re];if(0>s(Ve,q))Re<_e&&0>s(Ze,Ve)?(j[le]=Ze,j[Re]=q,le=Re):(j[le]=Ve,j[xe]=q,le=xe);else if(Re<_e&&0>s(Ze,q))j[le]=Ze,j[Re]=q,le=Re;else break e}}return te}function s(j,te){var q=j.sortIndex-te.sortIndex;return q!==0?q:j.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();r.unstable_now=function(){return l.now()-u}}var h=[],p=[],m=1,_=null,v=3,E=!1,w=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(j){for(var te=t(p);te!==null;){if(te.callback===null)i(p);else if(te.startTime<=j)i(p),te.sortIndex=te.expirationTime,e(h,te);else break;te=t(p)}}function N(j){if(x=!1,D(j),!w)if(t(h)!==null)w=!0,ge(F);else{var te=t(p);te!==null&&Ie(N,te.startTime-j)}}function F(j,te){w=!1,x&&(x=!1,O(U),U=-1),E=!0;var q=v;try{for(D(te),_=t(h);_!==null&&(!(_.expirationTime>te)||j&&!ie());){var le=_.callback;if(typeof le=="function"){_.callback=null,v=_.priorityLevel;var _e=le(_.expirationTime<=te);te=r.unstable_now(),typeof _e=="function"?_.callback=_e:_===t(h)&&i(h),D(te)}else i(h);_=t(h)}if(_!==null)var Le=!0;else{var xe=t(p);xe!==null&&Ie(N,xe.startTime-te),Le=!1}return Le}finally{_=null,v=q,E=!1}}var z=!1,V=null,U=-1,ee=5,ne=-1;function ie(){return!(r.unstable_now()-ne<ee)}function se(){if(V!==null){var j=r.unstable_now();ne=j;var te=!0;try{te=V(!0,j)}finally{te?fe():(z=!1,V=null)}}else z=!1}var fe;if(typeof k=="function")fe=function(){k(se)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,he=ae.port2;ae.port1.onmessage=se,fe=function(){he.postMessage(null)}}else fe=function(){A(se,0)};function ge(j){V=j,z||(z=!0,fe())}function Ie(j,te){U=A(function(){j(r.unstable_now())},te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(j){j.callback=null},r.unstable_continueExecution=function(){w||E||(w=!0,ge(F))},r.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<j?Math.floor(1e3/j):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(j){switch(v){case 1:case 2:case 3:var te=3;break;default:te=v}var q=v;v=te;try{return j()}finally{v=q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(j,te){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var q=v;v=j;try{return te()}finally{v=q}},r.unstable_scheduleCallback=function(j,te,q){var le=r.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?le+q:le):q=le,j){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=q+_e,j={id:m++,callback:te,priorityLevel:j,startTime:q,expirationTime:_e,sortIndex:-1},q>le?(j.sortIndex=q,e(p,j),t(h)===null&&j===t(p)&&(x?(O(U),U=-1):x=!0,Ie(N,q-le))):(j.sortIndex=_e,e(h,j),w||E||(w=!0,ge(F))),j},r.unstable_shouldYield=ie,r.unstable_wrapCallback=function(j){var te=v;return function(){var q=v;v=te;try{return j.apply(this,arguments)}finally{v=q}}}})(i8);r8.exports=i8;var Rz=r8.exports;const rue=r=>typeof r=="object"&&typeof r.then=="function",Iy=[];function s8(r,e,t=(i,s)=>i===s){if(r===e)return!0;if(!r||!e)return!1;const i=r.length;if(e.length!==i)return!1;for(let s=0;s<i;s++)if(!t(r[s],e[s]))return!1;return!0}function o8(r,e=null,t=!1,i={}){e===null&&(e=[r]);for(const o of Iy)if(s8(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return i.lifespan&&i.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,i.lifespan)),o.response;if(!t)throw o.promise}const s={keys:e,equal:i.equal,remove:()=>{const o=Iy.indexOf(s);o!==-1&&Iy.splice(o,1)},promise:(rue(r)?r:r(...e)).then(o=>{s.response=o,i.lifespan&&i.lifespan>0&&(s.timeout=setTimeout(s.remove,i.lifespan))}).catch(o=>s.error=o)};if(Iy.push(s),!t)throw s.promise}const iue=(r,e,t)=>o8(r,e,!1,t),sue=(r,e,t)=>void o8(r,e,!0,t),oue=r=>{if(r===void 0||r.length===0)Iy.splice(0,Iy.length);else{const e=Iy.find(t=>s8(r,t.keys,t.equal));e&&e.remove()}},a8={};function aue(r,e){function t(m,{args:_=[],attach:v,...E},w){let x=`${m[0].toUpperCase()}${m.slice(1)}`,A;if(m==="primitive"){if(E.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const O=E.object;A=d$(O,{type:m,root:w,attach:v,primitive:!0})}else{const O=a8[x];if(!O)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(_))throw new Error("R3F: The args prop must be an array!");A=d$(new O(..._),{type:m,root:w,attach:v,memoizedProps:{args:_}})}return A.__r3f.attach===void 0&&(A instanceof Tv?A.__r3f.attach="geometry":A instanceof ov&&(A.__r3f.attach="material")),x!=="inject"&&sO(A,E),A}function i(m,_){let v=!1;if(_){var E,w;(E=_.__r3f)!=null&&E.attach?iO(m,_,_.__r3f.attach):_.isObject3D&&m.isObject3D&&(m.add(_),v=!0),v||(w=m.__r3f)==null||w.objects.push(_),_.__r3f||d$(_,{}),_.__r3f.parent=m,zN(_),kT(_)}}function s(m,_,v){let E=!1;if(_){var w,x;if((w=_.__r3f)!=null&&w.attach)iO(m,_,_.__r3f.attach);else if(_.isObject3D&&m.isObject3D){_.parent=m,_.dispatchEvent({type:"added"}),m.dispatchEvent({type:"childadded",child:_});const A=m.children.filter(k=>k!==_),O=A.indexOf(v);m.children=[...A.slice(0,O),_,...A.slice(O)],E=!0}E||(x=m.__r3f)==null||x.objects.push(_),_.__r3f||d$(_,{}),_.__r3f.parent=m,zN(_),kT(_)}}function o(m,_,v=!1){m&&[...m].forEach(E=>l(_,E,v))}function l(m,_,v){if(_){var E,w,x;if(_.__r3f&&(_.__r3f.parent=null),(E=m.__r3f)!=null&&E.objects&&(m.__r3f.objects=m.__r3f.objects.filter(N=>N!==_)),(w=_.__r3f)!=null&&w.attach)Dz(m,_,_.__r3f.attach);else if(_.isObject3D&&m.isObject3D){var A;m.remove(_),(A=_.__r3f)!=null&&A.root&&mue($M(_),_)}const k=(x=_.__r3f)==null?void 0:x.primitive,D=!k&&(v===void 0?_.dispose!==null:v);if(!k){var O;o((O=_.__r3f)==null?void 0:O.objects,_,D),o(_.children,_,D)}if(delete _.__r3f,D&&_.dispose&&_.type!=="Scene"){const N=()=>{try{_.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?Rz.unstable_scheduleCallback(Rz.unstable_IdlePriority,N):N()}kT(m)}}function u(m,_,v,E){var w;const x=(w=m.__r3f)==null?void 0:w.parent;if(!x)return;const A=t(_,v,m.__r3f.root);if(m.children){for(const O of m.children)O.__r3f&&i(A,O);m.children=m.children.filter(O=>!O.__r3f)}m.__r3f.objects.forEach(O=>i(A,O)),m.__r3f.objects=[],m.__r3f.autoRemovedBeforeAppend||l(x,m),A.parent&&(A.__r3f.autoRemovedBeforeAppend=!0),i(x,A),A.raycast&&A.__r3f.eventCount&&$M(A).getState().internal.interaction.push(A),[E,E.alternate].forEach(O=>{O!==null&&(O.stateNode=A,O.ref&&(typeof O.ref=="function"?O.ref(A):O.ref.current=A))})}const h=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:nue({createInstance:t,removeChild:l,appendChild:i,appendInitialChild:i,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(m,_)=>{if(!_)return;const v=m.getState().scene;v.__r3f&&(v.__r3f.root=m,i(v,_))},removeChildFromContainer:(m,_)=>{_&&l(m.getState().scene,_)},insertInContainerBefore:(m,_,v)=>{if(!_||!v)return;const E=m.getState().scene;E.__r3f&&s(E,_,v)},getRootHostContext:()=>null,getChildHostContext:m=>m,finalizeInitialChildren(m){var _;return!!((_=m==null?void 0:m.__r3f)!=null?_:{}).handlers},prepareUpdate(m,_,v,E){var w;if(((w=m==null?void 0:m.__r3f)!=null?w:{}).primitive&&E.object&&E.object!==m)return[!0];{const{args:A=[],children:O,...k}=E,{args:D=[],children:N,...F}=v;if(!Array.isArray(A))throw new Error("R3F: the args prop must be an array!");if(A.some((V,U)=>V!==D[U]))return[!0];const z=u8(m,k,F,!0);return z.changes.length?[!1,z]:null}},commitUpdate(m,[_,v],E,w,x,A){_?u(m,E,x,A):sO(m,v)},commitMount(m,_,v,E){var w;const x=(w=m.__r3f)!=null?w:{};m.raycast&&x.handlers&&x.eventCount&&$M(m).getState().internal.interaction.push(m)},getPublicInstance:m=>m,prepareForCommit:()=>null,preparePortalMount:m=>d$(m.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(m){var _;const{attach:v,parent:E}=(_=m.__r3f)!=null?_:{};v&&E&&Dz(E,m,v),m.isObject3D&&(m.visible=!1),kT(m)},unhideInstance(m,_){var v;const{attach:E,parent:w}=(v=m.__r3f)!=null?v:{};E&&w&&iO(w,m,E),(m.isObject3D&&_.visible==null||_.visible)&&(m.visible=!0),kT(m)},createTextInstance:h,hideTextInstance:h,unhideTextInstance:h,getCurrentEventPriority:()=>e?e():B$.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&jd.fun(performance.now)?performance.now:jd.fun(Date.now)?Date.now:()=>0,scheduleTimeout:jd.fun(setTimeout)?setTimeout:void 0,cancelTimeout:jd.fun(clearTimeout)?clearTimeout:void 0}),applyProps:sO}}var kz,Oz;const rO=r=>"colorSpace"in r||"outputColorSpace"in r,lue=()=>{var r;return(r=a8.ColorManagement)!=null?r:null};typeof window<"u"&&((kz=window.document)!=null&&kz.createElement||((Oz=window.navigator)==null?void 0:Oz.product)==="ReactNative")?de.useLayoutEffect:de.useEffect;class uue extends de.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}uue.getDerivedStateFromError=()=>({error:!0});const l8="__default",Lz=new Map,cue=r=>r&&!!r.memoized&&!!r.changes;function $M(r){let e=r.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const jd={obj:r=>r===Object(r)&&!jd.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(jd.str(r)||jd.num(r))return r===e;const o=jd.obj(r);if(o&&i==="reference")return r===e;const l=jd.arr(r);if(l&&t==="reference")return r===e;if((l||o)&&r===e)return!0;let u;for(u in r)if(!(u in e))return!1;if(o&&t==="shallow"&&i==="shallow"){for(u in s?e:r)if(!jd.equ(r[u],e[u],{strict:s,objects:"reference"}))return!1}else for(u in s?e:r)if(r[u]!==e[u])return!1;if(jd.und(u)){if(l&&r.length===0&&e.length===0||o&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function hue(r){const e={nodes:{},materials:{}};return r&&r.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function d$(r,e){const t=r;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},r}function UN(r,e){let t=r;if(e.includes("-")){const i=e.split("-"),s=i.pop();return t=i.reduce((o,l)=>o[l],r),{target:t,key:s}}else return{target:t,key:e}}const Nz=/-\d+$/;function iO(r,e,t){if(jd.str(t)){if(Nz.test(t)){const o=t.replace(Nz,""),{target:l,key:u}=UN(r,o);Array.isArray(l[u])||(l[u]=[])}const{target:i,key:s}=UN(r,t);e.__r3f.previousAttach=i[s],i[s]=e}else e.__r3f.previousAttach=t(r,e)}function Dz(r,e,t){var i,s;if(jd.str(t)){const{target:o,key:l}=UN(r,t),u=e.__r3f.previousAttach;u===void 0?delete o[l]:o[l]=u}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(r,e);(s=e.__r3f)==null||delete s.previousAttach}function u8(r,{children:e,key:t,ref:i,...s},{children:o,key:l,ref:u,...h}={},p=!1){var m;const _=(m=r==null?void 0:r.__r3f)!=null?m:{},v=Object.entries(s),E=[];if(p){const x=Object.keys(h);for(let A=0;A<x.length;A++)s.hasOwnProperty(x[A])||v.unshift([x[A],l8+"remove"])}v.forEach(([x,A])=>{var O;if((O=r.__r3f)!=null&&O.primitive&&x==="object"||jd.equ(A,h[x]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(x))return E.push([x,A,!0,[]]);let k=[];x.includes("-")&&(k=x.split("-")),E.push([x,A,!1,k]);for(const D in s){const N=s[D];D.startsWith(`${x}-`)&&E.push([D,N,!1,D.split("-")])}});const w={...s};return _.memoizedProps&&_.memoizedProps.args&&(w.args=_.memoizedProps.args),_.memoizedProps&&_.memoizedProps.attach&&(w.attach=_.memoizedProps.attach),{memoized:w,changes:E}}const due=typeof process<"u"&&!1;function sO(r,e){var t,i,s;const o=(t=r.__r3f)!=null?t:{},l=o.root,u=(i=l==null||l.getState==null?void 0:l.getState())!=null?i:{},{memoized:h,changes:p}=cue(e)?e:u8(r,e),m=o.eventCount;r.__r3f&&(r.__r3f.memoizedProps=h);for(let v=0;v<p.length;v++){let[E,w,x,A]=p[v];if(rO(r)){const N="srgb",F="srgb-linear";E==="encoding"?(E="colorSpace",w=w===3001?N:F):E==="outputEncoding"&&(E="outputColorSpace",w=w===3001?N:F)}let O=r,k=O[E];if(A.length&&(k=A.reduce((D,N)=>D[N],r),!(k&&k.set))){const[D,...N]=A.reverse();O=N.reverse().reduce((F,z)=>F[z],r),E=D}if(w===l8+"remove")if(O.constructor){let D=Lz.get(O.constructor);D||(D=new O.constructor,Lz.set(O.constructor,D)),w=D[E]}else w=0;if(x)w?o.handlers[E]=w:delete o.handlers[E],o.eventCount=Object.keys(o.handlers).length;else if(k&&k.set&&(k.copy||k instanceof fM)){if(Array.isArray(w))k.fromArray?k.fromArray(w):k.set(...w);else if(k.copy&&w&&w.constructor&&(due?k.constructor.name===w.constructor.name:k.constructor===w.constructor))k.copy(w);else if(w!==void 0){const D=k instanceof lc;!D&&k.setScalar?k.setScalar(w):k instanceof fM&&w instanceof fM?k.mask=w.mask:k.set(w),!lue()&&!u.linear&&D&&k.convertSRGBToLinear()}}else if(O[E]=w,O[E]instanceof gf&&O[E].format===jD&&O[E].type===gW){const D=O[E];rO(D)&&rO(u.gl)?D.colorSpace=u.gl.outputColorSpace:D.encoding=u.gl.outputEncoding}kT(r)}if(o.parent&&r.raycast&&m!==o.eventCount){const v=$M(r).getState().internal,E=v.interaction.indexOf(r);E>-1&&v.interaction.splice(E,1),o.eventCount&&v.interaction.push(r)}return!(p.length===1&&p[0][0]==="onUpdate")&&p.length&&(s=r.__r3f)!=null&&s.parent&&zN(r),r}function kT(r){var e,t;const i=(e=r.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function zN(r){r.onUpdate==null||r.onUpdate(r)}function pue(){var r;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return B$.DefaultEventPriority;switch((r=e.event)==null?void 0:r.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return B$.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return B$.ContinuousEventPriority;default:return B$.DefaultEventPriority}}function fue(r,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(r.delete(i),s.target.releasePointerCapture(i)))}function mue(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{fue(t.capturedMap,e,i,s)})}const Bz=new WeakMap;function c8(r,e){return function(t,...i){let s=Bz.get(t);return s||(s=new t,Bz.set(t,s)),r&&r(s),Promise.all(i.map(o=>new Promise((l,u)=>s.load(o,h=>{h.scene&&Object.assign(h,hue(h.scene)),l(h)},e,h=>u(new Error(`Could not load ${o}: ${h==null?void 0:h.message}`)))))).finally(()=>s.dispose==null?void 0:s.dispose())}}function vw(r,e,t,i){const s=Array.isArray(e)?e:[e],o=iue(c8(t,i),[r,...s],{equal:jd.equ});return Array.isArray(e)?o:o[0]}vw.preload=function(r,e,t){const i=Array.isArray(e)?e:[e];return sue(c8(t),[r,...i])};vw.clear=function(r,e){const t=Array.isArray(e)?e:[e];return oue([r,...t])};const gue=new Map,{reconciler:_ue,applyProps:Q1e}=aue(gue,pue);_ue.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:de.version});function Pz(r,e){if(e===AQ)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),r;if(e===vN||e===_W){let t=r.getIndex();if(t===null){const l=[],u=r.getAttribute("position");if(u!==void 0){for(let h=0;h<u.count;h++)l.push(h);r.setIndex(l),t=r.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),r}const i=t.count-2,s=[];if(t)if(e===vN)for(let l=1;l<=i;l++)s.push(t.getX(0)),s.push(t.getX(l)),s.push(t.getX(l+1));else for(let l=0;l<i;l++)l%2===0?(s.push(t.getX(l)),s.push(t.getX(l+1)),s.push(t.getX(l+2))):(s.push(t.getX(l+2)),s.push(t.getX(l+1)),s.push(t.getX(l)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=r.clone();return o.setIndex(s),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),r}const vue=parseInt(HD.replace(/\D+/g,""));class FB extends ub{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new $ue(t)}),this.register(function(t){return new Rue(t)}),this.register(function(t){return new kue(t)}),this.register(function(t){return new Oue(t)}),this.register(function(t){return new wue(t)}),this.register(function(t){return new xue(t)}),this.register(function(t){return new Cue(t)}),this.register(function(t){return new Mue(t)}),this.register(function(t){return new Eue(t)}),this.register(function(t){return new Aue(t)}),this.register(function(t){return new Sue(t)}),this.register(function(t){return new Iue(t)}),this.register(function(t){return new bue(t)}),this.register(function(t){return new Lue(t)}),this.register(function(t){return new Nue(t)})}load(e,t,i,s){const o=this;let l;this.resourcePath!==""?l=this.resourcePath:this.path!==""?l=this.path:l=Fy.extractUrlBase(e),this.manager.itemStart(e);const u=function(p){s?s(p):console.error(p),o.manager.itemError(e),o.manager.itemEnd(e)},h=new lA(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(p){try{o.parse(p,l,function(m){t(m),o.manager.itemEnd(e)},u)}catch(m){u(m)}},i,u)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let o;const l={},u={};if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Fy.decodeText(new Uint8Array(e.slice(0,4)))===h8){try{l[Yi.KHR_BINARY_GLTF]=new Due(e)}catch(m){s&&s(m);return}o=JSON.parse(l[Yi.KHR_BINARY_GLTF].content)}else o=JSON.parse(Fy.decodeText(new Uint8Array(e)));else o=e;if(o.asset===void 0||o.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new Kue(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const m=this.pluginCallbacks[p](h);u[m.name]=m,l[m.name]=!0}if(o.extensionsUsed)for(let p=0;p<o.extensionsUsed.length;++p){const m=o.extensionsUsed[p],_=o.extensionsRequired||[];switch(m){case Yi.KHR_MATERIALS_UNLIT:l[m]=new Tue;break;case Yi.KHR_DRACO_MESH_COMPRESSION:l[m]=new Bue(o,this.dracoLoader);break;case Yi.KHR_TEXTURE_TRANSFORM:l[m]=new Pue;break;case Yi.KHR_MESH_QUANTIZATION:l[m]=new Fue;break;default:_.indexOf(m)>=0&&u[m]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+m+'".')}}h.setExtensions(l),h.setPlugins(u),h.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,o){i.parse(e,t,s,o)})}}function yue(){let r={};return{get:function(e){return r[e]},add:function(e,t){r[e]=t},remove:function(e){delete r[e]},removeAll:function(){r={}}}}const Yi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class bue{constructor(e){this.parser=e,this.name=Yi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const o=t.json,h=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let p;const m=new lc(16777215);h.color!==void 0&&m.fromArray(h.color);const _=h.range!==void 0?h.range:0;switch(h.type){case"directional":p=new Yq(m),p.target.position.set(0,0,-1),p.add(p.target);break;case"point":p=new jq(m),p.distance=_;break;case"spot":p=new Wq(m),p.distance=_,h.spot=h.spot||{},h.spot.innerConeAngle=h.spot.innerConeAngle!==void 0?h.spot.innerConeAngle:0,h.spot.outerConeAngle=h.spot.outerConeAngle!==void 0?h.spot.outerConeAngle:Math.PI/4,p.angle=h.spot.outerConeAngle,p.penumbra=1-h.spot.innerConeAngle/h.spot.outerConeAngle,p.target.position.set(0,0,-1),p.add(p.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+h.type)}return p.position.set(0,0,0),p.decay=2,W0(p,h),h.intensity!==void 0&&(p.intensity=h.intensity),p.name=t.createUniqueName(h.name||"light_"+e),s=Promise.resolve(p),t.cache.add(i,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,o=i.json.nodes[e],u=(o.extensions&&o.extensions[this.name]||{}).light;return u===void 0?null:this._loadLight(u).then(function(h){return i._getNodeRef(t.cache,u,h)})}}class Tue{constructor(){this.name=Yi.KHR_MATERIALS_UNLIT}getMaterialType(){return XT}extendParams(e,t,i){const s=[];e.color=new lc(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const l=o.baseColorFactor;e.color.fromArray(l),e.opacity=l[3]}o.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",o.baseColorTexture,3001))}return Promise.all(s)}}class Eue{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}}class $ue{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ev}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];if(l.clearcoatFactor!==void 0&&(t.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){const u=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Al(u,u)}return Promise.all(o)}}class Sue{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ev}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.iridescenceFactor!==void 0&&(t.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(t.iridescenceIOR=l.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(o)}}class wue{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ev}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new lc(0,0,0),t.sheenRoughness=0,t.sheen=1;const l=s.extensions[this.name];return l.sheenColorFactor!==void 0&&t.sheenColor.fromArray(l.sheenColorFactor),l.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&o.push(i.assignTexture(t,"sheenColorMap",l.sheenColorTexture,3001)),l.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(o)}}class xue{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ev}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.transmissionFactor!==void 0&&(t.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&o.push(i.assignTexture(t,"transmissionMap",l.transmissionTexture)),Promise.all(o)}}class Cue{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ev}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];t.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&o.push(i.assignTexture(t,"thicknessMap",l.thicknessTexture)),t.attenuationDistance=l.attenuationDistance||1/0;const u=l.attenuationColor||[1,1,1];return t.attenuationColor=new lc(u[0],u[1],u[2]),Promise.all(o)}}class Mue{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ev}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class Aue{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ev}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];t.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&o.push(i.assignTexture(t,"specularIntensityMap",l.specularTexture));const u=l.specularColorFactor||[1,1,1];return t.specularColor=new lc(u[0],u[1],u[2]),l.specularColorTexture!==void 0&&o.push(i.assignTexture(t,"specularColorMap",l.specularColorTexture,3001)),Promise.all(o)}}class Iue{constructor(e){this.parser=e,this.name=Yi.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ev}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.anisotropyStrength!==void 0&&(t.anisotropy=l.anisotropyStrength),l.anisotropyRotation!==void 0&&(t.anisotropyRotation=l.anisotropyRotation),l.anisotropyTexture!==void 0&&o.push(i.assignTexture(t,"anisotropyMap",l.anisotropyTexture)),Promise.all(o)}}class Rue{constructor(e){this.parser=e,this.name=Yi.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const o=s.extensions[this.name],l=t.options.ktx2Loader;if(!l){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,l)}}class kue{constructor(e){this.parser=e,this.name=Yi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,o=s.textures[e];if(!o.extensions||!o.extensions[t])return null;const l=o.extensions[t],u=s.images[l.source];let h=i.textureLoader;if(u.uri){const p=i.options.manager.getHandler(u.uri);p!==null&&(h=p)}return this.detectSupport().then(function(p){if(p)return i.loadTextureImage(e,l.source,h);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Oue{constructor(e){this.parser=e,this.name=Yi.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,o=s.textures[e];if(!o.extensions||!o.extensions[t])return null;const l=o.extensions[t],u=s.images[l.source];let h=i.textureLoader;if(u.uri){const p=i.options.manager.getHandler(u.uri);p!==null&&(h=p)}return this.detectSupport().then(function(p){if(p)return i.loadTextureImage(e,l.source,h);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Lue{constructor(e){this.name=Yi.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],o=this.parser.getDependency("buffer",s.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(u){const h=s.byteOffset||0,p=s.byteLength||0,m=s.count,_=s.byteStride,v=new Uint8Array(u,h,p);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(m,_,v,s.mode,s.filter).then(function(E){return E.buffer}):l.ready.then(function(){const E=new ArrayBuffer(m*_);return l.decodeGltfBuffer(new Uint8Array(E),m,_,v,s.mode,s.filter),E})})}else return null}}class Nue{constructor(e){this.name=Yi.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=t.meshes[i.mesh];for(const p of s.primitives)if(p.mode!==tm.TRIANGLES&&p.mode!==tm.TRIANGLE_STRIP&&p.mode!==tm.TRIANGLE_FAN&&p.mode!==void 0)return null;const l=i.extensions[this.name].attributes,u=[],h={};for(const p in l)u.push(this.parser.getDependency("accessor",l[p]).then(m=>(h[p]=m,h[p])));return u.length<1?null:(u.push(this.parser.createNodeMesh(e)),Promise.all(u).then(p=>{const m=p.pop(),_=m.isGroup?m.children:[m],v=p[0].count,E=[];for(const w of _){const x=new Ki,A=new Ct,O=new Ip,k=new Ct(1,1,1),D=new wq(w.geometry,w.material,v);for(let N=0;N<v;N++)h.TRANSLATION&&A.fromBufferAttribute(h.TRANSLATION,N),h.ROTATION&&O.fromBufferAttribute(h.ROTATION,N),h.SCALE&&k.fromBufferAttribute(h.SCALE,N),D.setMatrixAt(N,x.compose(A,O,k));for(const N in h)N!=="TRANSLATION"&&N!=="ROTATION"&&N!=="SCALE"&&w.geometry.setAttribute(N,h[N]);Bu.prototype.copy.call(D,w),this.parser.assignFinalMaterial(D),E.push(D)}return m.isGroup?(m.clear(),m.add(...E),m):E[0]}))}}const h8="glTF",p$=12,Fz={JSON:1313821514,BIN:5130562};class Due{constructor(e){this.name=Yi.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,p$);if(this.header={magic:Fy.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==h8)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-p$,s=new DataView(e,p$);let o=0;for(;o<i;){const l=s.getUint32(o,!0);o+=4;const u=s.getUint32(o,!0);if(o+=4,u===Fz.JSON){const h=new Uint8Array(e,p$+o,l);this.content=Fy.decodeText(h)}else if(u===Fz.BIN){const h=p$+o;this.body=e.slice(h,h+l)}o+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Bue{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Yi.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,o=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,u={},h={},p={};for(const m in l){const _=HN[m]||m.toLowerCase();u[_]=l[m]}for(const m in e.attributes){const _=HN[m]||m.toLowerCase();if(l[m]!==void 0){const v=i.accessors[e.attributes[m]],E=l1[v.componentType];p[_]=E.name,h[_]=v.normalized===!0}}return t.getDependency("bufferView",o).then(function(m){return new Promise(function(_){s.decodeDracoFile(m,function(v){for(const E in v.attributes){const w=v.attributes[E],x=h[E];x!==void 0&&(w.normalized=x)}_(v)},u,p)})})}}class Pue{constructor(){this.name=Yi.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Fue{constructor(){this.name=Yi.KHR_MESH_QUANTIZATION}}class d8 extends uw{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s*3+s;for(let l=0;l!==s;l++)t[l]=i[o+l];return t}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=u*2,p=u*3,m=s-t,_=(i-t)/m,v=_*_,E=v*_,w=e*p,x=w-p,A=-2*E+3*v,O=E-v,k=1-A,D=O-v+_;for(let N=0;N!==u;N++){const F=l[x+N+u],z=l[x+N+h]*m,V=l[w+N+u],U=l[w+N]*m;o[N]=k*F+D*z+A*V+O*U}return o}}const Uue=new Ip;class zue extends d8{interpolate_(e,t,i,s){const o=super.interpolate_(e,t,i,s);return Uue.fromArray(o).normalize().toArray(o),o}}const tm={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},l1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Uz={9728:xS,9729:GD,9984:EQ,9985:SQ,9986:$Q,9987:WD},zz={33071:N$,33648:_N,10497:wS},oO={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},HN={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...vue>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},A0={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Hue={CUBICSPLINE:void 0,LINEAR:y1,STEP:CS},aO={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Gue(r){return r.DefaultMaterial===void 0&&(r.DefaultMaterial=new eB({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:aA})),r.DefaultMaterial}function Qv(r,e,t){for(const i in t.extensions)r[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function W0(r,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(r.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Wue(r,e,t){let i=!1,s=!1,o=!1;for(let p=0,m=e.length;p<m;p++){const _=e[p];if(_.POSITION!==void 0&&(i=!0),_.NORMAL!==void 0&&(s=!0),_.COLOR_0!==void 0&&(o=!0),i&&s&&o)break}if(!i&&!s&&!o)return Promise.resolve(r);const l=[],u=[],h=[];for(let p=0,m=e.length;p<m;p++){const _=e[p];if(i){const v=_.POSITION!==void 0?t.getDependency("accessor",_.POSITION):r.attributes.position;l.push(v)}if(s){const v=_.NORMAL!==void 0?t.getDependency("accessor",_.NORMAL):r.attributes.normal;u.push(v)}if(o){const v=_.COLOR_0!==void 0?t.getDependency("accessor",_.COLOR_0):r.attributes.color;h.push(v)}}return Promise.all([Promise.all(l),Promise.all(u),Promise.all(h)]).then(function(p){const m=p[0],_=p[1],v=p[2];return i&&(r.morphAttributes.position=m),s&&(r.morphAttributes.normal=_),o&&(r.morphAttributes.color=v),r.morphTargetsRelative=!0,r})}function Vue(r,e){if(r.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)r.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(r.morphTargetInfluences.length===t.length){r.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)r.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function jue(r){let e;const t=r.extensions&&r.extensions[Yi.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+lO(t.attributes):e=r.indices+":"+lO(r.attributes)+":"+r.mode,r.targets!==void 0)for(let i=0,s=r.targets.length;i<s;i++)e+=":"+lO(r.targets[i]);return e}function lO(r){let e="";const t=Object.keys(r).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+r[t[i]]+";";return e}function GN(r){switch(r){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Xue(r){return r.search(/\.jpe?g($|\?)/i)>0||r.search(/^data\:image\/jpeg/)===0?"image/jpeg":r.search(/\.webp($|\?)/i)>0||r.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Yue=new Ki;class Kue{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new yue,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,o=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||s&&o<98?this.textureLoader=new Hq(this.options.manager):this.textureLoader=new Kq(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new lA(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(l){const u={scene:l[0][s.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:s.asset,parser:i,userData:{}};Qv(o,u,s),W0(u,s),Promise.all(i._invokeAll(function(h){return h.afterRoot&&h.afterRoot(u)})).then(function(){e(u)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,o=t.length;s<o;s++){const l=t[s].joints;for(let u=0,h=l.length;u<h;u++)e[l[u]].isBone=!0}for(let s=0,o=e.length;s<o;s++){const l=e[s];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(i[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),o=(l,u)=>{const h=this.associations.get(l);h!=null&&this.associations.set(u,h);for(const[p,m]of l.children.entries())o(m,u.children[p])};return o(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const o=e(t[s]);o&&i.push(o)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":s=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(o,l){return i.getDependency(e,l)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Yi.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(o,l){i.load(Fy.resolveURL(t.uri,s.path),o,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,o=t.byteOffset||0;return i.slice(o,o+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const l=oO[s.type],u=l1[s.componentType],h=s.normalized===!0,p=new u(s.count*l);return Promise.resolve(new _f(p,l,h))}const o=[];return s.bufferView!==void 0?o.push(this.getDependency("bufferView",s.bufferView)):o.push(null),s.sparse!==void 0&&(o.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(o).then(function(l){const u=l[0],h=oO[s.type],p=l1[s.componentType],m=p.BYTES_PER_ELEMENT,_=m*h,v=s.byteOffset||0,E=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,w=s.normalized===!0;let x,A;if(E&&E!==_){const O=Math.floor(v/E),k="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+O+":"+s.count;let D=t.cache.get(k);D||(x=new p(u,O*E,s.count*E/m),D=new bq(x,E/m),t.cache.add(k,D)),A=new QD(D,h,v%E/m,w)}else u===null?x=new p(s.count*h):x=new p(u,v,s.count*h),A=new _f(x,h,w);if(s.sparse!==void 0){const O=oO.SCALAR,k=l1[s.sparse.indices.componentType],D=s.sparse.indices.byteOffset||0,N=s.sparse.values.byteOffset||0,F=new k(l[1],D,s.sparse.count*O),z=new p(l[2],N,s.sparse.count*h);u!==null&&(A=new _f(A.array.slice(),A.itemSize,A.normalized));for(let V=0,U=F.length;V<U;V++){const ee=F[V];if(A.setX(ee,z[V*h]),h>=2&&A.setY(ee,z[V*h+1]),h>=3&&A.setZ(ee,z[V*h+2]),h>=4&&A.setW(ee,z[V*h+3]),h>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return A})}loadTexture(e){const t=this.json,i=this.options,o=t.textures[e].source,l=t.images[o];let u=this.textureLoader;if(l.uri){const h=i.manager.getHandler(l.uri);h!==null&&(u=h)}return this.loadTextureImage(e,o,u)}loadTextureImage(e,t,i){const s=this,o=this.json,l=o.textures[e],u=o.images[t],h=(u.uri||u.bufferView)+":"+l.sampler;if(this.textureCache[h])return this.textureCache[h];const p=this.loadImageSource(t,i).then(function(m){m.flipY=!1,m.name=l.name||u.name||"",m.name===""&&typeof u.uri=="string"&&u.uri.startsWith("data:image/")===!1&&(m.name=u.uri);const v=(o.samplers||{})[l.sampler]||{};return m.magFilter=Uz[v.magFilter]||GD,m.minFilter=Uz[v.minFilter]||WD,m.wrapS=zz[v.wrapS]||wS,m.wrapT=zz[v.wrapT]||wS,s.associations.set(m,{textures:e}),m}).catch(function(){return null});return this.textureCache[h]=p,p}loadImageSource(e,t){const i=this,s=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(_=>_.clone());const l=s.images[e],u=self.URL||self.webkitURL;let h=l.uri||"",p=!1;if(l.bufferView!==void 0)h=i.getDependency("bufferView",l.bufferView).then(function(_){p=!0;const v=new Blob([_],{type:l.mimeType});return h=u.createObjectURL(v),h});else if(l.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(h).then(function(_){return new Promise(function(v,E){let w=v;t.isImageBitmapLoader===!0&&(w=function(x){const A=new gf(x);A.needsUpdate=!0,v(A)}),t.load(Fy.resolveURL(_,o.path),w,void 0,E)})}).then(function(_){return p===!0&&u.revokeObjectURL(h),_.userData.mimeType=l.mimeType||Xue(l.uri),_}).catch(function(_){throw console.error("THREE.GLTFLoader: Couldn't load texture",h),_});return this.sourceCache[e]=m,m}assignTexture(e,t,i,s){const o=this;return this.getDependency("texture",i.index).then(function(l){if(!l)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(l=l.clone(),l.channel=i.texCoord),o.extensions[Yi.KHR_TEXTURE_TRANSFORM]){const u=i.extensions!==void 0?i.extensions[Yi.KHR_TEXTURE_TRANSFORM]:void 0;if(u){const h=o.associations.get(l);l=o.extensions[Yi.KHR_TEXTURE_TRANSFORM].extendTexture(l,u),o.associations.set(l,h)}}return s!==void 0&&("colorSpace"in l?l.colorSpace=s===3001?"srgb":"srgb-linear":l.encoding=s),e[t]=l,l})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,l=t.attributes.normal===void 0;if(e.isPoints){const u="PointsMaterial:"+i.uuid;let h=this.cache.get(u);h||(h=new CW,ov.prototype.copy.call(h,i),h.color.copy(i.color),h.map=i.map,h.sizeAttenuation=!1,this.cache.add(u,h)),i=h}else if(e.isLine){const u="LineBasicMaterial:"+i.uuid;let h=this.cache.get(u);h||(h=new xW,ov.prototype.copy.call(h,i),h.color.copy(i.color),h.map=i.map,this.cache.add(u,h)),i=h}if(s||o||l){let u="ClonedMaterial:"+i.uuid+":";s&&(u+="derivative-tangents:"),o&&(u+="vertex-colors:"),l&&(u+="flat-shading:");let h=this.cache.get(u);h||(h=i.clone(),o&&(h.vertexColors=!0),l&&(h.flatShading=!0),s&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(u,h),this.associations.set(h,this.associations.get(i))),i=h}e.material=i}getMaterialType(){return eB}loadMaterial(e){const t=this,i=this.json,s=this.extensions,o=i.materials[e];let l;const u={},h=o.extensions||{},p=[];if(h[Yi.KHR_MATERIALS_UNLIT]){const _=s[Yi.KHR_MATERIALS_UNLIT];l=_.getMaterialType(),p.push(_.extendParams(u,o,t))}else{const _=o.pbrMetallicRoughness||{};if(u.color=new lc(1,1,1),u.opacity=1,Array.isArray(_.baseColorFactor)){const v=_.baseColorFactor;u.color.fromArray(v),u.opacity=v[3]}_.baseColorTexture!==void 0&&p.push(t.assignTexture(u,"map",_.baseColorTexture,3001)),u.metalness=_.metallicFactor!==void 0?_.metallicFactor:1,u.roughness=_.roughnessFactor!==void 0?_.roughnessFactor:1,_.metallicRoughnessTexture!==void 0&&(p.push(t.assignTexture(u,"metalnessMap",_.metallicRoughnessTexture)),p.push(t.assignTexture(u,"roughnessMap",_.metallicRoughnessTexture))),l=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(e)}),p.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(e,u)})))}o.doubleSided===!0&&(u.side=yQ);const m=o.alphaMode||aO.OPAQUE;if(m===aO.BLEND?(u.transparent=!0,u.depthWrite=!1):(u.transparent=!1,m===aO.MASK&&(u.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&l!==XT&&(p.push(t.assignTexture(u,"normalMap",o.normalTexture)),u.normalScale=new Al(1,1),o.normalTexture.scale!==void 0)){const _=o.normalTexture.scale;u.normalScale.set(_,_)}return o.occlusionTexture!==void 0&&l!==XT&&(p.push(t.assignTexture(u,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(u.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&l!==XT&&(u.emissive=new lc().fromArray(o.emissiveFactor)),o.emissiveTexture!==void 0&&l!==XT&&p.push(t.assignTexture(u,"emissiveMap",o.emissiveTexture,3001)),Promise.all(p).then(function(){const _=new l(u);return o.name&&(_.name=o.name),W0(_,o),t.associations.set(_,{materials:e}),o.extensions&&Qv(s,_,o),_})}createUniqueName(e){const t=lo.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function o(u){return i[Yi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(u,t).then(function(h){return Hz(h,u,t)})}const l=[];for(let u=0,h=e.length;u<h;u++){const p=e[u],m=jue(p),_=s[m];if(_)l.push(_.promise);else{let v;p.extensions&&p.extensions[Yi.KHR_DRACO_MESH_COMPRESSION]?v=o(p):v=Hz(new Tv,p,t),s[m]={primitive:p,promise:v},l.push(v)}}return Promise.all(l)}loadMesh(e){const t=this,i=this.json,s=this.extensions,o=i.meshes[e],l=o.primitives,u=[];for(let h=0,p=l.length;h<p;h++){const m=l[h].material===void 0?Gue(this.cache):this.getDependency("material",l[h].material);u.push(m)}return u.push(t.loadGeometries(l)),Promise.all(u).then(function(h){const p=h.slice(0,h.length-1),m=h[h.length-1],_=[];for(let E=0,w=m.length;E<w;E++){const x=m[E],A=l[E];let O;const k=p[E];if(A.mode===tm.TRIANGLES||A.mode===tm.TRIANGLE_STRIP||A.mode===tm.TRIANGLE_FAN||A.mode===void 0)O=o.isSkinnedMesh===!0?new Eq(x,k):new eI(x,k),O.isSkinnedMesh===!0&&O.normalizeSkinWeights(),A.mode===tm.TRIANGLE_STRIP?O.geometry=Pz(O.geometry,_W):A.mode===tm.TRIANGLE_FAN&&(O.geometry=Pz(O.geometry,vN));else if(A.mode===tm.LINES)O=new xq(x,k);else if(A.mode===tm.LINE_STRIP)O=new ZD(x,k);else if(A.mode===tm.LINE_LOOP)O=new Cq(x,k);else if(A.mode===tm.POINTS)O=new Mq(x,k);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);Object.keys(O.geometry.morphAttributes).length>0&&Vue(O,o),O.name=t.createUniqueName(o.name||"mesh_"+e),W0(O,o),A.extensions&&Qv(s,O,A),t.assignFinalMaterial(O),_.push(O)}for(let E=0,w=_.length;E<w;E++)t.associations.set(_[E],{meshes:e,primitives:E});if(_.length===1)return o.extensions&&Qv(s,_[0],o),_[0];const v=new kk;o.extensions&&Qv(s,v,o),t.associations.set(v,{meshes:e});for(let E=0,w=_.length;E<w;E++)v.add(_[E]);return v})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new JD(KQ.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new $W(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),W0(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,o=t.joints.length;s<o;s++)i.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const o=s.pop(),l=s,u=[],h=[];for(let p=0,m=l.length;p<m;p++){const _=l[p];if(_){u.push(_);const v=new Ki;o!==null&&v.fromArray(o.array,p*16),h.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[p])}return new qD(u,h)})}loadAnimation(e){const i=this.json.animations[e],s=i.name?i.name:"animation_"+e,o=[],l=[],u=[],h=[],p=[];for(let m=0,_=i.channels.length;m<_;m++){const v=i.channels[m],E=i.samplers[v.sampler],w=v.target,x=w.node,A=i.parameters!==void 0?i.parameters[E.input]:E.input,O=i.parameters!==void 0?i.parameters[E.output]:E.output;w.node!==void 0&&(o.push(this.getDependency("node",x)),l.push(this.getDependency("accessor",A)),u.push(this.getDependency("accessor",O)),h.push(E),p.push(w))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u),Promise.all(h),Promise.all(p)]).then(function(m){const _=m[0],v=m[1],E=m[2],w=m[3],x=m[4],A=[];for(let O=0,k=_.length;O<k;O++){const D=_[O],N=v[O],F=E[O],z=w[O],V=x[O];if(D===void 0)continue;D.updateMatrix();let U;switch(A0[V.path]){case A0.weights:U=AS;break;case A0.rotation:U=Zy;break;case A0.position:case A0.scale:default:U=IS;break}const ee=D.name?D.name:D.uuid,ne=z.interpolation!==void 0?Hue[z.interpolation]:y1,ie=[];A0[V.path]===A0.weights?D.traverse(function(fe){fe.morphTargetInfluences&&ie.push(fe.name?fe.name:fe.uuid)}):ie.push(ee);let se=F.array;if(F.normalized){const fe=GN(se.constructor),ae=new Float32Array(se.length);for(let he=0,ge=se.length;he<ge;he++)ae[he]=se[he]*fe;se=ae}for(let fe=0,ae=ie.length;fe<ae;fe++){const he=new U(ie[fe]+"."+A0[V.path],N.array,se,ne);z.interpolation==="CUBICSPLINE"&&(he.createInterpolant=function(Ie){const j=this instanceof Zy?zue:d8;return new j(this.times,this.values,this.getValueSize()/3,Ie)},he.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),A.push(he)}}return new Nq(s,void 0,A)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(o){const l=i._getNodeRef(i.meshCache,s.mesh,o);return s.weights!==void 0&&l.traverse(function(u){if(u.isMesh)for(let h=0,p=s.weights.length;h<p;h++)u.morphTargetInfluences[h]=s.weights[h]}),l})}loadNode(e){const t=this.json,i=this,s=t.nodes[e],o=i._loadNodeShallow(e),l=[],u=s.children||[];for(let p=0,m=u.length;p<m;p++)l.push(i.getDependency("node",u[p]));const h=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([o,Promise.all(l),h]).then(function(p){const m=p[0],_=p[1],v=p[2];v!==null&&m.traverse(function(E){E.isSkinnedMesh&&E.bind(v,Yue)});for(let E=0,w=_.length;E<w;E++)m.add(_[E]);return m})}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const o=t.nodes[e],l=o.name?s.createUniqueName(o.name):"",u=[],h=s._invokeOne(function(p){return p.createNodeMesh&&p.createNodeMesh(e)});return h&&u.push(h),o.camera!==void 0&&u.push(s.getDependency("camera",o.camera).then(function(p){return s._getNodeRef(s.cameraCache,o.camera,p)})),s._invokeAll(function(p){return p.createNodeAttachment&&p.createNodeAttachment(e)}).forEach(function(p){u.push(p)}),this.nodeCache[e]=Promise.all(u).then(function(p){let m;if(o.isBone===!0?m=new SW:p.length>1?m=new kk:p.length===1?m=p[0]:m=new Bu,m!==p[0])for(let _=0,v=p.length;_<v;_++)m.add(p[_]);if(o.name&&(m.userData.name=o.name,m.name=l),W0(m,o),o.extensions&&Qv(i,m,o),o.matrix!==void 0){const _=new Ki;_.fromArray(o.matrix),m.applyMatrix4(_)}else o.translation!==void 0&&m.position.fromArray(o.translation),o.rotation!==void 0&&m.quaternion.fromArray(o.rotation),o.scale!==void 0&&m.scale.fromArray(o.scale);return s.associations.has(m)||s.associations.set(m,{}),s.associations.get(m).nodes=e,m}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,o=new kk;i.name&&(o.name=s.createUniqueName(i.name)),W0(o,i),i.extensions&&Qv(t,o,i);const l=i.nodes||[],u=[];for(let h=0,p=l.length;h<p;h++)u.push(s.getDependency("node",l[h]));return Promise.all(u).then(function(h){for(let m=0,_=h.length;m<_;m++)o.add(h[m]);const p=m=>{const _=new Map;for(const[v,E]of s.associations)(v instanceof ov||v instanceof gf)&&_.set(v,E);return m.traverse(v=>{const E=s.associations.get(v);E!=null&&_.set(v,E)}),_};return s.associations=p(o),o})}}function Jue(r,e,t){const i=e.attributes,s=new q_;if(i.POSITION!==void 0){const u=t.json.accessors[i.POSITION],h=u.min,p=u.max;if(h!==void 0&&p!==void 0){if(s.set(new Ct(h[0],h[1],h[2]),new Ct(p[0],p[1],p[2])),u.normalized){const m=GN(l1[u.componentType]);s.min.multiplyScalar(m),s.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=e.targets;if(o!==void 0){const u=new Ct,h=new Ct;for(let p=0,m=o.length;p<m;p++){const _=o[p];if(_.POSITION!==void 0){const v=t.json.accessors[_.POSITION],E=v.min,w=v.max;if(E!==void 0&&w!==void 0){if(h.setX(Math.max(Math.abs(E[0]),Math.abs(w[0]))),h.setY(Math.max(Math.abs(E[1]),Math.abs(w[1]))),h.setZ(Math.max(Math.abs(E[2]),Math.abs(w[2]))),v.normalized){const x=GN(l1[v.componentType]);h.multiplyScalar(x)}u.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(u)}r.boundingBox=s;const l=new Zg;s.getCenter(l.center),l.radius=s.min.distanceTo(s.max)/2,r.boundingSphere=l}function Hz(r,e,t){const i=e.attributes,s=[];function o(l,u){return t.getDependency("accessor",l).then(function(h){r.setAttribute(u,h)})}for(const l in i){const u=HN[l]||l.toLowerCase();u in r.attributes||s.push(o(i[l],u))}if(e.indices!==void 0&&!r.index){const l=t.getDependency("accessor",e.indices).then(function(u){r.setIndex(u)});s.push(l)}return W0(r,e),Jue(r,e,t),Promise.all(s).then(function(){return e.targets!==void 0?Wue(r,e.targets,t):r})}const uO=new WeakMap;class Que extends ub{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,s){const o=new lA(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,l=>{const u={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(l,u).then(t).catch(s)},i,s)}decodeDracoFile(e,t,i,s){const o={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,o).then(t)}decodeGeometry(e,t){for(const h in t.attributeTypes){const p=t.attributeTypes[h];p.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[h]=p.name)}const i=JSON.stringify(t);if(uO.has(e)){const h=uO.get(e);if(h.key===i)return h.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const o=this.workerNextTaskID++,l=e.byteLength,u=this._getWorker(o,l).then(h=>(s=h,new Promise((p,m)=>{s._callbacks[o]={resolve:p,reject:m},s.postMessage({type:"decode",id:o,taskConfig:t,buffer:e},[e])}))).then(h=>this._createGeometry(h.geometry));return u.catch(()=>!0).then(()=>{s&&o&&this._releaseTask(s,o)}),uO.set(e,{key:i,promise:u}),u}_createGeometry(e){const t=new Tv;e.index&&t.setIndex(new _f(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const s=e.attributes[i],o=s.name,l=s.array,u=s.itemSize;t.setAttribute(o,new _f(l,u))}return t}_loadLibrary(e,t){const i=new lA(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((s,o)=>{i.load(e,s,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const s=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const o=que.toString(),l=["/* draco decoder */",s,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(o){const l=o.data;switch(l.type){case"decode":s._callbacks[l.id].resolve(l);break;case"error":s._callbacks[l.id].reject(l);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+l.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,o){return s._taskLoad>o._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function que(){let r,e;onmessage=function(l){const u=l.data;switch(u.type){case"init":r=u.decoderConfig,e=new Promise(function(m){r.onModuleLoaded=function(_){m({draco:_})},DracoDecoderModule(r)});break;case"decode":const h=u.buffer,p=u.taskConfig;e.then(m=>{const _=m.draco,v=new _.Decoder,E=new _.DecoderBuffer;E.Init(new Int8Array(h),h.byteLength);try{const w=t(_,v,E,p),x=w.attributes.map(A=>A.array.buffer);w.index&&x.push(w.index.array.buffer),self.postMessage({type:"decode",id:u.id,geometry:w},x)}catch(w){console.error(w),self.postMessage({type:"error",id:u.id,error:w.message})}finally{_.destroy(E),_.destroy(v)}});break}};function t(l,u,h,p){const m=p.attributeIDs,_=p.attributeTypes;let v,E;const w=u.GetEncodedGeometryType(h);if(w===l.TRIANGULAR_MESH)v=new l.Mesh,E=u.DecodeBufferToMesh(h,v);else if(w===l.POINT_CLOUD)v=new l.PointCloud,E=u.DecodeBufferToPointCloud(h,v);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!E.ok()||v.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+E.error_msg());const x={index:null,attributes:[]};for(const A in m){const O=self[_[A]];let k,D;if(p.useUniqueIDs)D=m[A],k=u.GetAttributeByUniqueId(v,D);else{if(D=u.GetAttributeId(v,l[m[A]]),D===-1)continue;k=u.GetAttribute(v,D)}x.attributes.push(s(l,u,v,A,O,k))}return w===l.TRIANGULAR_MESH&&(x.index=i(l,u,v)),l.destroy(v),x}function i(l,u,h){const m=h.num_faces()*3,_=m*4,v=l._malloc(_);u.GetTrianglesUInt32Array(h,_,v);const E=new Uint32Array(l.HEAPF32.buffer,v,m).slice();return l._free(v),{array:E,itemSize:1}}function s(l,u,h,p,m,_){const v=_.num_components(),w=h.num_points()*v,x=w*m.BYTES_PER_ELEMENT,A=o(l,m),O=l._malloc(x);u.GetAttributeDataArrayForAllPoints(h,_,A,x,O);const k=new m(l.HEAPF32.buffer,O,w).slice();return l._free(O),{name:p,array:k,itemSize:v}}function o(l,u){switch(u){case Float32Array:return l.DT_FLOAT32;case Int8Array:return l.DT_INT8;case Int16Array:return l.DT_INT16;case Int32Array:return l.DT_INT32;case Uint8Array:return l.DT_UINT8;case Uint16Array:return l.DT_UINT16;case Uint32Array:return l.DT_UINT32}}}let eC;const cO=()=>{if(eC)return eC;const r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=r;WebAssembly.validate(t)&&(s=e);let o;const l=WebAssembly.instantiate(u(s),{}).then(_=>{o=_.instance,o.exports.__wasm_call_ctors()});function u(_){const v=new Uint8Array(_.length);for(let w=0;w<_.length;++w){const x=_.charCodeAt(w);v[w]=x>96?x-71:x>64?x-65:x>47?x+4:x>46?63:62}let E=0;for(let w=0;w<_.length;++w)v[E++]=v[w]<60?i[v[w]]:(v[w]-60)*64+v[++w];return v.buffer.slice(0,E)}function h(_,v,E,w,x,A){const O=o.exports.sbrk,k=E+3&-4,D=O(k*w),N=O(x.length),F=new Uint8Array(o.exports.memory.buffer);F.set(x,N);const z=_(D,E,w,N,x.length);if(z===0&&A&&A(D,k,w),v.set(F.subarray(D,D+E*w)),O(D-O(0)),z!==0)throw new Error(`Malformed buffer data: ${z}`)}const p={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},m={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return eC={ready:l,supported:!0,decodeVertexBuffer(_,v,E,w,x){h(o.exports.meshopt_decodeVertexBuffer,_,v,E,w,o.exports[p[x]])},decodeIndexBuffer(_,v,E,w){h(o.exports.meshopt_decodeIndexBuffer,_,v,E,w)},decodeIndexSequence(_,v,E,w){h(o.exports.meshopt_decodeIndexSequence,_,v,E,w)},decodeGltfBuffer(_,v,E,w,x,A){h(o.exports[m[x]],_,v,E,w,o.exports[p[A]])}},eC};let tC=null,p8="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function f8(r,e,t){return i=>{t&&t(i),r&&(tC||(tC=new Que),tC.setDecoderPath(typeof r=="string"?r:p8),i.setDRACOLoader(tC)),e&&i.setMeshoptDecoder(typeof cO=="function"?cO():cO)}}function fr(r,e=!0,t=!0,i){return vw(FB,r,f8(e,t,i))}fr.preload=(r,e=!0,t=!0,i)=>vw.preload(FB,r,f8(e,t,i));fr.clear=r=>vw.clear(FB,r);fr.setDecoderPath=r=>{p8=r};function Zue(r){const{nodes:e}=fr(e8);return[{type:"raw",geometry:e.BASE_FRONT_GRILL_1.geometry,material:e.BASE_FRONT_GRILL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(e8);const m8="/gpu-programming/assets/BASE_LEFT_COVER_1-DGxtL-mQ.glb";function ece(r){const{nodes:e}=fr(m8);return[{type:"raw",geometry:e.BASE_LEFT_COVER_1.geometry,material:e.BASE_LEFT_COVER_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(m8);const g8="/gpu-programming/assets/base_link-CxNG3VaF.glb";function tce(r){const{nodes:e}=fr(g8);return[{type:"raw",geometry:e.base_link.geometry,material:e.base_link.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(g8);const _8="/gpu-programming/assets/BASE_RIGHT_COVER_1-hc0og1we.glb";function nce(r){const{nodes:e}=fr(_8);return[{type:"raw",geometry:e.BASE_RIGHT_COVER_1.geometry,material:e.BASE_RIGHT_COVER_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(_8);const v8="/gpu-programming/assets/Battery_1-CK31T6T2.glb";function rce(r){const{nodes:e}=fr(v8);return[{type:"raw",geometry:e.Battery_1.geometry,material:e.Battery_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(v8);const y8="/gpu-programming/assets/BODY_BASE_CONNECTOR_1-BGiepl-q.glb";function ice(r){const{nodes:e}=fr(y8);return[{type:"raw",geometry:e.BODY_BASE_CONNECTOR_1.geometry,material:e.BODY_BASE_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(y8);const sce="/gpu-programming/assets/DRIVE_TRACK_LEFT_1-BU9fqrup.glb";fr.preload(sce);const oce="/gpu-programming/assets/DRIVE_TRACK_RIGHT_1-inJUmdan.glb";fr.preload(oce);const b8="/gpu-programming/assets/EYE_LENS_1-dEqRsnM7.glb";function ace(r){const{nodes:e}=fr(b8);return[{type:"raw",geometry:e.EYE_LENS_1.geometry,material:e.EYE_LENS_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(b8);const T8="/gpu-programming/assets/FACE_1-m_5yRlpQ.glb";function lce(r){const{nodes:e}=fr(T8);return[{type:"raw",geometry:e.FACE_1.geometry,material:e.FACE_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(T8);const E8="/gpu-programming/assets/FRONT_LEFT_WHEEL_1-CbTd7ucE.glb";function uce(r){const{nodes:e}=fr(E8);return[{type:"raw",geometry:e.FRONT_LEFT_WHEEL_1.geometry,material:e.FRONT_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(E8);const $8="/gpu-programming/assets/FRONT_RIGHT_WHEEL_1-DndcS7IV.glb";function cce(r){const{nodes:e}=fr($8);return[{type:"raw",geometry:e.FRONT_RIGHT_WHEEL_1.geometry,material:e.FRONT_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload($8);const S8="/gpu-programming/assets/HEAD_1-BuuEOSCL.glb";function hce(r){const{nodes:e}=fr(S8);return[{type:"raw",geometry:e.HEAD_1.geometry,material:e.HEAD_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(S8);const w8="/gpu-programming/assets/HEAD_VENT_LEFT_1-DjAZtO3_.glb";function dce(r){const{nodes:e}=fr(w8);return[{type:"raw",geometry:e.HEAD_VENT_LEFT_1.geometry,material:e.HEAD_VENT_LEFT_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(w8);const x8="/gpu-programming/assets/HEAD_VENT_RIGHT_1-BfOCx_V8.glb";function pce(r){const{nodes:e}=fr(x8);return[{type:"raw",geometry:e.HEAD_VENT_RIGHT_1.geometry,material:e.HEAD_VENT_RIGHT_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(x8);const C8="/gpu-programming/assets/LEFT_ARM_1-B8yh6mwG.glb";function fce(r){const{nodes:e}=fr(C8);return[{type:"raw",geometry:e.LEFT_ARM_1.geometry,material:e.LEFT_ARM_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(C8);const M8="/gpu-programming/assets/LEFT_ARM_CONNECTOR_1-CXrHlUi5.glb";function mce(r){const{nodes:e}=fr(M8);return[{type:"raw",geometry:e.LEFT_ARM_CONNECTOR_1.geometry,material:e.LEFT_ARM_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(M8);const A8="/gpu-programming/assets/MIDDLE_LEFT_WHEEL_1-BAVTGYOT.glb";function gce(r){const{nodes:e}=fr(A8);return[{type:"raw",geometry:e.MIDDLE_LEFT_WHEEL_1.geometry,material:e.MIDDLE_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(A8);const I8="/gpu-programming/assets/MIDDLE_RIGHT_WHEEL_1-GMj8YSda.glb";function _ce(r){const{nodes:e}=fr(I8);return[{type:"raw",geometry:e.MIDDLE_RIGHT_WHEEL_1.geometry,material:e.MIDDLE_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(I8);const R8="/gpu-programming/assets/NECK_GLOBE_BASE_1-CpAA3cya.glb";function vce(r){const{nodes:e}=fr(R8);return[{type:"raw",geometry:e.NECK_GLOBE_BASE_1.geometry,material:e.NECK_GLOBE_BASE_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(R8);const k8="/gpu-programming/assets/REAR_LEFT_WHEEL_1-Ca-hbPaC.glb";function yce(r){const{nodes:e}=fr(k8);return[{type:"raw",geometry:e.REAR_LEFT_WHEEL_1.geometry,material:e.REAR_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(k8);const O8="/gpu-programming/assets/REAR_RIGHT_WHEEL_1-DLUpOsjA.glb";function bce(r){const{nodes:e}=fr(O8);return[{type:"raw",geometry:e.REAR_RIGHT_WHEEL_1.geometry,material:e.REAR_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(O8);const L8="/gpu-programming/assets/RIGHT_ARM_1-CsUyYnQa.glb";function Tce(r){const{nodes:e}=fr(L8);return[{type:"raw",geometry:e.RIGHT_ARM_1.geometry,material:e.RIGHT_ARM_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(L8);const N8="/gpu-programming/assets/RIGHT_ARM_CONNECTOR_1-Og6IFGgn.glb";function Ece(r){const{nodes:e}=fr(N8);return[{type:"raw",geometry:e.RIGHT_ARM_CONNECTOR_1.geometry,material:e.RIGHT_ARM_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(N8);const D8="/gpu-programming/assets/Torso_1-Dsttb7Xv.glb";function $ce(r){const{nodes:e}=fr(D8);return[{type:"raw",geometry:e.Torso_1.geometry,material:e.Torso_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(D8);const B8="/gpu-programming/assets/VISOR_GLASS_1-DUgs1YBX.glb";function Sce(r){const{nodes:e}=fr(B8);return[{type:"raw",geometry:e.VISOR_GLASS_1.geometry,material:e.VISOR_GLASS_1.material,scale:[1,1,1],rotation:[0,0,0]}]}fr.preload(B8);const wce={"package://misty_description/meshes/BASE_FRONT_GRILL_1.stl":Zue,"package://misty_description/meshes/BASE_LEFT_COVER_1.stl":ece,"package://misty_description/meshes/base_link.stl":tce,"package://misty_description/meshes/BASE_RIGHT_COVER_1.stl":nce,"package://misty_description/meshes/Battery_1.stl":rce,"package://misty_description/meshes/BODY_BASE_CONNECTOR_1.stl":ice,"package://misty_description/meshes/EYE_LENS_1.stl":ace,"package://misty_description/meshes/FACE_1.stl":lce,"package://misty_description/meshes/FRONT_LEFT_WHEEL_1.stl":uce,"package://misty_description/meshes/FRONT_RIGHT_WHEEL_1.stl":cce,"package://misty_description/meshes/HEAD_1.stl":hce,"package://misty_description/meshes/HEAD_VENT_LEFT_1.stl":dce,"package://misty_description/meshes/HEAD_VENT_RIGHT_1.stl":pce,"package://misty_description/meshes/LEFT_ARM_1.stl":fce,"package://misty_description/meshes/LEFT_ARM_CONNECTOR_1.stl":mce,"package://misty_description/meshes/MIDDLE_LEFT_WHEEL_1.stl":gce,"package://misty_description/meshes/MIDDLE_RIGHT_WHEEL_1.stl":_ce,"package://misty_description/meshes/NECK_GLOBE_BASE_1.stl":vce,"package://misty_description/meshes/REAR_LEFT_WHEEL_1.stl":yce,"package://misty_description/meshes/REAR_RIGHT_WHEEL_1.stl":bce,"package://misty_description/meshes/RIGHT_ARM_1.stl":Tce,"package://misty_description/meshes/RIGHT_ARM_CONNECTOR_1.stl":Ece,"package://misty_description/meshes/Torso_1.stl":$ce,"package://misty_description/meshes/VISOR_GLASS_1.stl":Sce};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const q1="143",my={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},gy={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},P8=0,WN=1,F8=2,xce=3,U8=0,GI=1,nS=2,Ry=3,Jg=0,Nc=1,Kd=2,z8=1,Cce=2,Zd=0,G_=1,TA=2,VN=3,jN=4,H8=5,Ty=100,G8=101,UB=102,XN=103,YN=104,W8=200,V8=201,j8=202,X8=203,WI=204,VI=205,Y8=206,K8=207,J8=208,Q8=209,q8=210,Z8=0,e9=1,t9=2,EA=3,n9=4,r9=5,i9=6,s9=7,yw=0,o9=1,a9=2,og=0,l9=1,u9=2,c9=3,zB=4,h9=5,jI=300,pv=301,fv=302,DS=303,BS=304,Z1=306,S1=1e3,Yd=1001,PS=1002,ia=1003,$A=1004,Mce=1004,SA=1005,Ace=1005,Po=1006,HB=1007,Ice=1007,hb=1008,Rce=1008,Fh=1009,d9=1010,p9=1011,GB=1012,f9=1013,U_=1014,Hg=1015,tb=1016,m9=1017,g9=1018,av=1020,_9=1021,v9=1022,Rp=1023,y9=1024,b9=1025,lv=1026,mv=1027,T9=1028,E9=1029,$9=1030,S9=1031,w9=1033,SM=33776,wM=33777,xM=33778,CM=33779,KN=35840,JN=35841,QN=35842,qN=35843,x9=36196,ZN=37492,e2=37496,t2=37808,n2=37809,r2=37810,i2=37811,s2=37812,o2=37813,a2=37814,l2=37815,u2=37816,c2=37817,h2=37818,d2=37819,p2=37820,f2=37821,m2=36492,C9=2200,M9=2201,A9=2202,FS=2300,US=2301,MM=2302,ky=2400,Oy=2401,zS=2402,XI=2500,WB=2501,kce=0,Oce=1,Lce=2,mm=3e3,yi=3001,$v=3200,w1=3201,db=0,I9=1,Nce="",Dg="srgb",Q0="srgb-linear",Dce=0,AM=7680,Bce=7681,Pce=7682,Fce=7683,Uce=34055,zce=34056,Hce=5386,Gce=512,Wce=513,Vce=514,jce=515,Xce=516,Yce=517,Kce=518,R9=519,HS=35044,Uy=35048,Jce=35040,Qce=35045,qce=35049,Zce=35041,ehe=35046,the=35050,nhe=35042,rhe="100",g2="300 es",wA=1035;class Cf{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const i=t.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const fd=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Gz=1234567;const zy=Math.PI/180,GS=180/Math.PI;function bf(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(fd[r&255]+fd[r>>8&255]+fd[r>>16&255]+fd[r>>24&255]+"-"+fd[e&255]+fd[e>>8&255]+"-"+fd[e>>16&15|64]+fd[e>>24&255]+"-"+fd[t&63|128]+fd[t>>8&255]+"-"+fd[t>>16&255]+fd[t>>24&255]+fd[i&255]+fd[i>>8&255]+fd[i>>16&255]+fd[i>>24&255]).toLowerCase()}function Du(r,e,t){return Math.max(e,Math.min(t,r))}function VB(r,e){return(r%e+e)%e}function ihe(r,e,t,i,s){return i+(r-e)*(s-i)/(t-e)}function she(r,e,t){return r!==e?(t-r)/(e-r):0}function rS(r,e,t){return(1-t)*r+t*e}function ohe(r,e,t,i){return rS(r,e,1-Math.exp(-t*i))}function ahe(r,e=1){return e-Math.abs(VB(r,e*2)-e)}function lhe(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function uhe(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function che(r,e){return r+Math.floor(Math.random()*(e-r+1))}function hhe(r,e){return r+Math.random()*(e-r)}function dhe(r){return r*(.5-Math.random())}function phe(r){r!==void 0&&(Gz=r);let e=Gz+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function fhe(r){return r*zy}function mhe(r){return r*GS}function _2(r){return(r&r-1)===0&&r!==0}function k9(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function xA(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function ghe(r,e,t,i,s){const o=Math.cos,l=Math.sin,u=o(t/2),h=l(t/2),p=o((e+i)/2),m=l((e+i)/2),_=o((e-i)/2),v=l((e-i)/2),E=o((i-e)/2),w=l((i-e)/2);switch(s){case"XYX":r.set(u*m,h*_,h*v,u*p);break;case"YZY":r.set(h*v,u*m,h*_,u*p);break;case"ZXZ":r.set(h*_,h*v,u*m,u*p);break;case"XZX":r.set(u*m,h*w,h*E,u*p);break;case"YXY":r.set(h*E,u*m,h*w,u*p);break;case"ZYZ":r.set(h*w,h*E,u*m,u*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function _he(r,e){switch(e.constructor){case Float32Array:return r;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function vhe(r,e){switch(e.constructor){case Float32Array:return r;case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}var O9=Object.freeze({__proto__:null,DEG2RAD:zy,RAD2DEG:GS,generateUUID:bf,clamp:Du,euclideanModulo:VB,mapLinear:ihe,inverseLerp:she,lerp:rS,damp:ohe,pingpong:ahe,smoothstep:lhe,smootherstep:uhe,randInt:che,randFloat:hhe,randFloatSpread:dhe,seededRandom:phe,degToRad:fhe,radToDeg:mhe,isPowerOfTwo:_2,ceilPowerOfTwo:k9,floorPowerOfTwo:xA,setQuaternionFromProperEuler:ghe,normalize:vhe,denormalize:_he});class Ot{constructor(e=0,t=0){Ot.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*i-l*s+e.x,this.y=o*s+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Jd{constructor(){Jd.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,s,o,l,u,h,p){const m=this.elements;return m[0]=e,m[1]=s,m[2]=u,m[3]=t,m[4]=o,m[5]=h,m[6]=i,m[7]=l,m[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[3],h=i[6],p=i[1],m=i[4],_=i[7],v=i[2],E=i[5],w=i[8],x=s[0],A=s[3],O=s[6],k=s[1],D=s[4],N=s[7],F=s[2],z=s[5],V=s[8];return o[0]=l*x+u*k+h*F,o[3]=l*A+u*D+h*z,o[6]=l*O+u*N+h*V,o[1]=p*x+m*k+_*F,o[4]=p*A+m*D+_*z,o[7]=p*O+m*N+_*V,o[2]=v*x+E*k+w*F,o[5]=v*A+E*D+w*z,o[8]=v*O+E*N+w*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],p=e[7],m=e[8];return t*l*m-t*u*p-i*o*m+i*u*h+s*o*p-s*l*h}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],p=e[7],m=e[8],_=m*l-u*p,v=u*h-m*o,E=p*o-l*h,w=t*_+i*v+s*E;if(w===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/w;return e[0]=_*x,e[1]=(s*p-m*i)*x,e[2]=(u*i-s*l)*x,e[3]=v*x,e[4]=(m*t-s*h)*x,e[5]=(s*o-u*t)*x,e[6]=E*x,e[7]=(i*h-p*t)*x,e[8]=(l*t-i*o)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,o,l,u){const h=Math.cos(o),p=Math.sin(o);return this.set(i*h,i*p,-i*(h*l+p*u)+l+e,-s*p,s*h,-s*(-p*l+h*u)+u+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),s=this.elements,o=s[0],l=s[3],u=s[6],h=s[1],p=s[4],m=s[7];return s[0]=t*o+i*h,s[3]=t*l+i*p,s[6]=t*u+i*m,s[1]=-i*o+t*h,s[4]=-i*l+t*p,s[7]=-i*u+t*m,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function L9(r){for(let e=r.length-1;e>=0;--e)if(r[e]>65535)return!0;return!1}const yhe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function YT(r,e){return new yhe[r](e)}function WS(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function Hy(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function IM(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}const hO={[Dg]:{[Q0]:Hy},[Q0]:{[Dg]:IM}},em={legacyMode:!0,get workingColorSpace(){return Q0},set workingColorSpace(r){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(r,e,t){if(this.legacyMode||e===t||!e||!t)return r;if(hO[e]&&hO[e][t]!==void 0){const i=hO[e][t];return r.r=i(r.r),r.g=i(r.g),r.b=i(r.b),r}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(r,e){return this.convert(r,this.workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this.workingColorSpace)}},N9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Rc={r:0,g:0,b:0},Vm={h:0,s:0,l:0},nC={h:0,s:0,l:0};function dO(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}function rC(r,e){return e.r=r.r,e.g=r.g,e.b=r.b,e}class _n{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Dg){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,em.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=Q0){return this.r=e,this.g=t,this.b=i,em.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=Q0){if(e=VB(e,1),t=Du(t,0,1),i=Du(i,0,1),t===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,l=2*i-o;this.r=dO(l,o,e+1/3),this.g=dO(l,o,e),this.b=dO(l,o,e-1/3)}return em.toWorkingColorSpace(this,s),this}setStyle(e,t=Dg){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,em.toWorkingColorSpace(this,t),i(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,em.toWorkingColorSpace(this,t),i(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u)){const h=parseFloat(o[1])/360,p=parseInt(o[2],10)/100,m=parseInt(o[3],10)/100;return i(o[4]),this.setHSL(h,p,m,t)}break}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(l===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,em.toWorkingColorSpace(this,t),this;if(l===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,em.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Dg){const i=N9[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Hy(e.r),this.g=Hy(e.g),this.b=Hy(e.b),this}copyLinearToSRGB(e){return this.r=IM(e.r),this.g=IM(e.g),this.b=IM(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Dg){return em.fromWorkingColorSpace(rC(this,Rc),e),Du(Rc.r*255,0,255)<<16^Du(Rc.g*255,0,255)<<8^Du(Rc.b*255,0,255)<<0}getHexString(e=Dg){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Q0){em.fromWorkingColorSpace(rC(this,Rc),t);const i=Rc.r,s=Rc.g,o=Rc.b,l=Math.max(i,s,o),u=Math.min(i,s,o);let h,p;const m=(u+l)/2;if(u===l)h=0,p=0;else{const _=l-u;switch(p=m<=.5?_/(l+u):_/(2-l-u),l){case i:h=(s-o)/_+(s<o?6:0);break;case s:h=(o-i)/_+2;break;case o:h=(i-s)/_+4;break}h/=6}return e.h=h,e.s=p,e.l=m,e}getRGB(e,t=Q0){return em.fromWorkingColorSpace(rC(this,Rc),t),e.r=Rc.r,e.g=Rc.g,e.b=Rc.b,e}getStyle(e=Dg){return em.fromWorkingColorSpace(rC(this,Rc),e),e!==Dg?`color(${e} ${Rc.r} ${Rc.g} ${Rc.b})`:`rgb(${Rc.r*255|0},${Rc.g*255|0},${Rc.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(Vm),Vm.h+=e,Vm.s+=t,Vm.l+=i,this.setHSL(Vm.h,Vm.s,Vm.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Vm),e.getHSL(nC);const i=rS(Vm.h,nC.h,t),s=rS(Vm.s,nC.s,t),o=rS(Vm.l,nC.l,t);return this.setHSL(i,s,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}_n.NAMES=N9;let hT;class jB{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{hT===void 0&&(hT=WS("canvas")),hT.width=e.width,hT.height=e.height;const i=hT.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=hT}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=WS("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),o=s.data;for(let l=0;l<o.length;l++)o[l]=Hy(o[l]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Hy(t[i]/255)*255):t[i]=Hy(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Ly{constructor(e=null){this.isSource=!0,this.uuid=bf(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?o.push(pO(s[l].image)):o.push(pO(s[l]))}else o=pO(s);i.url=o}return t||(e.images[this.uuid]=i),i}}function pO(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?jB.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let bhe=0;class Rl extends Cf{constructor(e=Rl.DEFAULT_IMAGE,t=Rl.DEFAULT_MAPPING,i=Yd,s=Yd,o=Po,l=hb,u=Rp,h=Fh,p=1,m=mm){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:bhe++}),this.uuid=bf(),this.name="",this.source=new Ly(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=p,this.format=u,this.internalFormat=null,this.type=h,this.offset=new Ot(0,0),this.repeat=new Ot(1,1),this.center=new Ot(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Jd,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=m,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==jI)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case S1:e.x=e.x-Math.floor(e.x);break;case Yd:e.x=e.x<0?0:1;break;case PS:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case S1:e.y=e.y-Math.floor(e.y);break;case Yd:e.y=e.y<0?0:1;break;case PS:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Rl.DEFAULT_IMAGE=null;Rl.DEFAULT_MAPPING=jI;class xi{constructor(e=0,t=0,i=0,s=1){xi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*s+l[12]*o,this.y=l[1]*t+l[5]*i+l[9]*s+l[13]*o,this.z=l[2]*t+l[6]*i+l[10]*s+l[14]*o,this.w=l[3]*t+l[7]*i+l[11]*s+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,o;const l=e.elements,u=l[0],h=l[4],p=l[8],m=l[1],_=l[5],v=l[9],E=l[2],w=l[6],x=l[10];if(Math.abs(h-m)<.01&&Math.abs(p-E)<.01&&Math.abs(v-w)<.01){if(Math.abs(h+m)<.1&&Math.abs(p+E)<.1&&Math.abs(v+w)<.1&&Math.abs(u+_+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const O=(u+1)/2,k=(_+1)/2,D=(x+1)/2,N=(h+m)/4,F=(p+E)/4,z=(v+w)/4;return O>k&&O>D?O<.01?(i=0,s=.707106781,o=.707106781):(i=Math.sqrt(O),s=N/i,o=F/i):k>D?k<.01?(i=.707106781,s=0,o=.707106781):(s=Math.sqrt(k),i=N/s,o=z/s):D<.01?(i=.707106781,s=.707106781,o=0):(o=Math.sqrt(D),i=F/o,s=z/o),this.set(i,s,o,t),this}let A=Math.sqrt((w-v)*(w-v)+(p-E)*(p-E)+(m-h)*(m-h));return Math.abs(A)<.001&&(A=1),this.x=(w-v)/A,this.y=(p-E)/A,this.z=(m-h)/A,this.w=Math.acos((u+_+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class iu extends Cf{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new xi(0,0,e,t),this.scissorTest=!1,this.viewport=new xi(0,0,e,t);const s={width:e,height:t,depth:1};this.texture=new Rl(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Po,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Ly(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class bw extends Rl{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=ia,this.minFilter=ia,this.wrapR=Yd,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class The extends iu{constructor(e,t,i){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new bw(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class YI extends Rl{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=ia,this.minFilter=ia,this.wrapR=Yd,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ehe extends iu{constructor(e,t,i){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new YI(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class $he extends iu{constructor(e,t,i,s={}){super(e,t,s),this.isWebGLMultipleRenderTargets=!0;const o=this.texture;this.texture=[];for(let l=0;l<i;l++)this.texture[l]=o.clone(),this.texture[l].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,o=this.texture.length;s<o;s++)this.texture[s].image.width=e,this.texture[s].image.height=t,this.texture[s].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Bo{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,o,l,u){let h=i[s+0],p=i[s+1],m=i[s+2],_=i[s+3];const v=o[l+0],E=o[l+1],w=o[l+2],x=o[l+3];if(u===0){e[t+0]=h,e[t+1]=p,e[t+2]=m,e[t+3]=_;return}if(u===1){e[t+0]=v,e[t+1]=E,e[t+2]=w,e[t+3]=x;return}if(_!==x||h!==v||p!==E||m!==w){let A=1-u;const O=h*v+p*E+m*w+_*x,k=O>=0?1:-1,D=1-O*O;if(D>Number.EPSILON){const F=Math.sqrt(D),z=Math.atan2(F,O*k);A=Math.sin(A*z)/F,u=Math.sin(u*z)/F}const N=u*k;if(h=h*A+v*N,p=p*A+E*N,m=m*A+w*N,_=_*A+x*N,A===1-u){const F=1/Math.sqrt(h*h+p*p+m*m+_*_);h*=F,p*=F,m*=F,_*=F}}e[t]=h,e[t+1]=p,e[t+2]=m,e[t+3]=_}static multiplyQuaternionsFlat(e,t,i,s,o,l){const u=i[s],h=i[s+1],p=i[s+2],m=i[s+3],_=o[l],v=o[l+1],E=o[l+2],w=o[l+3];return e[t]=u*w+m*_+h*E-p*v,e[t+1]=h*w+m*v+p*_-u*E,e[t+2]=p*w+m*E+u*v-h*_,e[t+3]=m*w-u*_-h*v-p*E,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,s=e._y,o=e._z,l=e._order,u=Math.cos,h=Math.sin,p=u(i/2),m=u(s/2),_=u(o/2),v=h(i/2),E=h(s/2),w=h(o/2);switch(l){case"XYZ":this._x=v*m*_+p*E*w,this._y=p*E*_-v*m*w,this._z=p*m*w+v*E*_,this._w=p*m*_-v*E*w;break;case"YXZ":this._x=v*m*_+p*E*w,this._y=p*E*_-v*m*w,this._z=p*m*w-v*E*_,this._w=p*m*_+v*E*w;break;case"ZXY":this._x=v*m*_-p*E*w,this._y=p*E*_+v*m*w,this._z=p*m*w+v*E*_,this._w=p*m*_-v*E*w;break;case"ZYX":this._x=v*m*_-p*E*w,this._y=p*E*_+v*m*w,this._z=p*m*w-v*E*_,this._w=p*m*_+v*E*w;break;case"YZX":this._x=v*m*_+p*E*w,this._y=p*E*_+v*m*w,this._z=p*m*w-v*E*_,this._w=p*m*_-v*E*w;break;case"XZY":this._x=v*m*_-p*E*w,this._y=p*E*_-v*m*w,this._z=p*m*w+v*E*_,this._w=p*m*_+v*E*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],o=t[8],l=t[1],u=t[5],h=t[9],p=t[2],m=t[6],_=t[10],v=i+u+_;if(v>0){const E=.5/Math.sqrt(v+1);this._w=.25/E,this._x=(m-h)*E,this._y=(o-p)*E,this._z=(l-s)*E}else if(i>u&&i>_){const E=2*Math.sqrt(1+i-u-_);this._w=(m-h)/E,this._x=.25*E,this._y=(s+l)/E,this._z=(o+p)/E}else if(u>_){const E=2*Math.sqrt(1+u-i-_);this._w=(o-p)/E,this._x=(s+l)/E,this._y=.25*E,this._z=(h+m)/E}else{const E=2*Math.sqrt(1+_-i-u);this._w=(l-s)/E,this._x=(o+p)/E,this._y=(h+m)/E,this._z=.25*E}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Du(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,o=e._z,l=e._w,u=t._x,h=t._y,p=t._z,m=t._w;return this._x=i*m+l*u+s*p-o*h,this._y=s*m+l*h+o*u-i*p,this._z=o*m+l*p+i*h-s*u,this._w=l*m-i*u-s*h-o*p,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,o=this._z,l=this._w;let u=l*e._w+i*e._x+s*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=i,this._y=s,this._z=o,this;const h=1-u*u;if(h<=Number.EPSILON){const E=1-t;return this._w=E*l+t*this._w,this._x=E*i+t*this._x,this._y=E*s+t*this._y,this._z=E*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const p=Math.sqrt(h),m=Math.atan2(p,u),_=Math.sin((1-t)*m)/p,v=Math.sin(t*m)/p;return this._w=l*_+this._w*v,this._x=i*_+this._x*v,this._y=s*_+this._y*v,this._z=o*_+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),s=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(s),i*Math.sin(o),i*Math.cos(o),t*Math.sin(s))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Te{constructor(e=0,t=0,i=0){Te.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Wz.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Wz.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*s,this.y=o[1]*t+o[4]*i+o[7]*s,this.z=o[2]*t+o[5]*i+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=e.elements,l=1/(o[3]*t+o[7]*i+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*s+o[12])*l,this.y=(o[1]*t+o[5]*i+o[9]*s+o[13])*l,this.z=(o[2]*t+o[6]*i+o[10]*s+o[14])*l,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,o=e.x,l=e.y,u=e.z,h=e.w,p=h*t+l*s-u*i,m=h*i+u*t-o*s,_=h*s+o*i-l*t,v=-o*t-l*i-u*s;return this.x=p*h+v*-o+m*-u-_*-l,this.y=m*h+v*-l+_*-o-p*-u,this.z=_*h+v*-u+p*-l-m*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s,this.y=o[1]*t+o[5]*i+o[9]*s,this.z=o[2]*t+o[6]*i+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,o=e.z,l=t.x,u=t.y,h=t.z;return this.x=s*h-o*u,this.y=o*l-i*h,this.z=i*u-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return fO.copy(this).projectOnVector(e),this.sub(fO)}reflect(e){return this.sub(fO.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Du(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const fO=new Te,Wz=new Bo;class hg{constructor(e=new Te(1/0,1/0,1/0),t=new Te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,s=1/0,o=-1/0,l=-1/0,u=-1/0;for(let h=0,p=e.length;h<p;h+=3){const m=e[h],_=e[h+1],v=e[h+2];m<t&&(t=m),_<i&&(i=_),v<s&&(s=v),m>o&&(o=m),_>l&&(l=_),v>u&&(u=v)}return this.min.set(t,i,s),this.max.set(o,l,u),this}setFromBufferAttribute(e){let t=1/0,i=1/0,s=1/0,o=-1/0,l=-1/0,u=-1/0;for(let h=0,p=e.count;h<p;h++){const m=e.getX(h),_=e.getY(h),v=e.getZ(h);m<t&&(t=m),_<i&&(i=_),v<s&&(s=v),m>o&&(o=m),_>l&&(l=_),v>u&&(u=v)}return this.min.set(t,i,s),this.max.set(o,l,u),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=qv.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const o=i.attributes.position;for(let l=0,u=o.count;l<u;l++)qv.fromBufferAttribute(o,l).applyMatrix4(e.matrixWorld),this.expandByPoint(qv)}else i.boundingBox===null&&i.computeBoundingBox(),mO.copy(i.boundingBox),mO.applyMatrix4(e.matrixWorld),this.union(mO);const s=e.children;for(let o=0,l=s.length;o<l;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,qv),qv.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(f$),iC.subVectors(this.max,f$),dT.subVectors(e.a,f$),pT.subVectors(e.b,f$),fT.subVectors(e.c,f$),I0.subVectors(pT,dT),R0.subVectors(fT,pT),Zv.subVectors(dT,fT);let t=[0,-I0.z,I0.y,0,-R0.z,R0.y,0,-Zv.z,Zv.y,I0.z,0,-I0.x,R0.z,0,-R0.x,Zv.z,0,-Zv.x,-I0.y,I0.x,0,-R0.y,R0.x,0,-Zv.y,Zv.x,0];return!gO(t,dT,pT,fT,iC)||(t=[1,0,0,0,1,0,0,0,1],!gO(t,dT,pT,fT,iC))?!1:(sC.crossVectors(I0,R0),t=[sC.x,sC.y,sC.z],gO(t,dT,pT,fT,iC))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return qv.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(qv).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(x_[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),x_[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),x_[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),x_[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),x_[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),x_[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),x_[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),x_[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(x_),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const x_=[new Te,new Te,new Te,new Te,new Te,new Te,new Te,new Te],qv=new Te,mO=new hg,dT=new Te,pT=new Te,fT=new Te,I0=new Te,R0=new Te,Zv=new Te,f$=new Te,iC=new Te,sC=new Te,ey=new Te;function gO(r,e,t,i,s){for(let o=0,l=r.length-3;o<=l;o+=3){ey.fromArray(r,o);const u=s.x*Math.abs(ey.x)+s.y*Math.abs(ey.y)+s.z*Math.abs(ey.z),h=e.dot(ey),p=t.dot(ey),m=i.dot(ey);if(Math.max(-Math.max(h,p,m),Math.min(h,p,m))>u)return!1}return!0}const She=new hg,Vz=new Te,oC=new Te,_O=new Te;class t_{constructor(e=new Te,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):She.setFromPoints(e).getCenter(i);let s=0;for(let o=0,l=e.length;o<l;o++)s=Math.max(s,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){_O.subVectors(e,this.center);const t=_O.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.add(_O.multiplyScalar(s/i)),this.radius+=s}return this}union(e){return this.center.equals(e.center)===!0?oC.set(0,0,1).multiplyScalar(e.radius):oC.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Vz.copy(e.center).add(oC)),this.expandByPoint(Vz.copy(e.center).sub(oC)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const C_=new Te,vO=new Te,aC=new Te,k0=new Te,yO=new Te,lC=new Te,bO=new Te;class Tw{constructor(e=new Te,t=new Te(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,C_)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=C_.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(C_.copy(this.direction).multiplyScalar(t).add(this.origin),C_.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){vO.copy(e).add(t).multiplyScalar(.5),aC.copy(t).sub(e).normalize(),k0.copy(this.origin).sub(vO);const o=e.distanceTo(t)*.5,l=-this.direction.dot(aC),u=k0.dot(this.direction),h=-k0.dot(aC),p=k0.lengthSq(),m=Math.abs(1-l*l);let _,v,E,w;if(m>0)if(_=l*h-u,v=l*u-h,w=o*m,_>=0)if(v>=-w)if(v<=w){const x=1/m;_*=x,v*=x,E=_*(_+l*v+2*u)+v*(l*_+v+2*h)+p}else v=o,_=Math.max(0,-(l*v+u)),E=-_*_+v*(v+2*h)+p;else v=-o,_=Math.max(0,-(l*v+u)),E=-_*_+v*(v+2*h)+p;else v<=-w?(_=Math.max(0,-(-l*o+u)),v=_>0?-o:Math.min(Math.max(-o,-h),o),E=-_*_+v*(v+2*h)+p):v<=w?(_=0,v=Math.min(Math.max(-o,-h),o),E=v*(v+2*h)+p):(_=Math.max(0,-(l*o+u)),v=_>0?o:Math.min(Math.max(-o,-h),o),E=-_*_+v*(v+2*h)+p);else v=l>0?-o:o,_=Math.max(0,-(l*v+u)),E=-_*_+v*(v+2*h)+p;return i&&i.copy(this.direction).multiplyScalar(_).add(this.origin),s&&s.copy(aC).multiplyScalar(v).add(vO),E}intersectSphere(e,t){C_.subVectors(e.center,this.origin);const i=C_.dot(this.direction),s=C_.dot(C_)-i*i,o=e.radius*e.radius;if(s>o)return null;const l=Math.sqrt(o-s),u=i-l,h=i+l;return u<0&&h<0?null:u<0?this.at(h,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,o,l,u,h;const p=1/this.direction.x,m=1/this.direction.y,_=1/this.direction.z,v=this.origin;return p>=0?(i=(e.min.x-v.x)*p,s=(e.max.x-v.x)*p):(i=(e.max.x-v.x)*p,s=(e.min.x-v.x)*p),m>=0?(o=(e.min.y-v.y)*m,l=(e.max.y-v.y)*m):(o=(e.max.y-v.y)*m,l=(e.min.y-v.y)*m),i>l||o>s||((o>i||i!==i)&&(i=o),(l<s||s!==s)&&(s=l),_>=0?(u=(e.min.z-v.z)*_,h=(e.max.z-v.z)*_):(u=(e.max.z-v.z)*_,h=(e.min.z-v.z)*_),i>h||u>s)||((u>i||i!==i)&&(i=u),(h<s||s!==s)&&(s=h),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,C_)!==null}intersectTriangle(e,t,i,s,o){yO.subVectors(t,e),lC.subVectors(i,e),bO.crossVectors(yO,lC);let l=this.direction.dot(bO),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;k0.subVectors(this.origin,e);const h=u*this.direction.dot(lC.crossVectors(k0,lC));if(h<0)return null;const p=u*this.direction.dot(yO.cross(k0));if(p<0||h+p>l)return null;const m=-u*k0.dot(bO);return m<0?null:this.at(m/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Sr{constructor(){Sr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,s,o,l,u,h,p,m,_,v,E,w,x,A){const O=this.elements;return O[0]=e,O[4]=t,O[8]=i,O[12]=s,O[1]=o,O[5]=l,O[9]=u,O[13]=h,O[2]=p,O[6]=m,O[10]=_,O[14]=v,O[3]=E,O[7]=w,O[11]=x,O[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Sr().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/mT.setFromMatrixColumn(e,0).length(),o=1/mT.setFromMatrixColumn(e,1).length(),l=1/mT.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*l,t[9]=i[9]*l,t[10]=i[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,o=e.z,l=Math.cos(i),u=Math.sin(i),h=Math.cos(s),p=Math.sin(s),m=Math.cos(o),_=Math.sin(o);if(e.order==="XYZ"){const v=l*m,E=l*_,w=u*m,x=u*_;t[0]=h*m,t[4]=-h*_,t[8]=p,t[1]=E+w*p,t[5]=v-x*p,t[9]=-u*h,t[2]=x-v*p,t[6]=w+E*p,t[10]=l*h}else if(e.order==="YXZ"){const v=h*m,E=h*_,w=p*m,x=p*_;t[0]=v+x*u,t[4]=w*u-E,t[8]=l*p,t[1]=l*_,t[5]=l*m,t[9]=-u,t[2]=E*u-w,t[6]=x+v*u,t[10]=l*h}else if(e.order==="ZXY"){const v=h*m,E=h*_,w=p*m,x=p*_;t[0]=v-x*u,t[4]=-l*_,t[8]=w+E*u,t[1]=E+w*u,t[5]=l*m,t[9]=x-v*u,t[2]=-l*p,t[6]=u,t[10]=l*h}else if(e.order==="ZYX"){const v=l*m,E=l*_,w=u*m,x=u*_;t[0]=h*m,t[4]=w*p-E,t[8]=v*p+x,t[1]=h*_,t[5]=x*p+v,t[9]=E*p-w,t[2]=-p,t[6]=u*h,t[10]=l*h}else if(e.order==="YZX"){const v=l*h,E=l*p,w=u*h,x=u*p;t[0]=h*m,t[4]=x-v*_,t[8]=w*_+E,t[1]=_,t[5]=l*m,t[9]=-u*m,t[2]=-p*m,t[6]=E*_+w,t[10]=v-x*_}else if(e.order==="XZY"){const v=l*h,E=l*p,w=u*h,x=u*p;t[0]=h*m,t[4]=-_,t[8]=p*m,t[1]=v*_+x,t[5]=l*m,t[9]=E*_-w,t[2]=w*_-E,t[6]=u*m,t[10]=x*_+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(whe,e,xhe)}lookAt(e,t,i){const s=this.elements;return af.subVectors(e,t),af.lengthSq()===0&&(af.z=1),af.normalize(),O0.crossVectors(i,af),O0.lengthSq()===0&&(Math.abs(i.z)===1?af.x+=1e-4:af.z+=1e-4,af.normalize(),O0.crossVectors(i,af)),O0.normalize(),uC.crossVectors(af,O0),s[0]=O0.x,s[4]=uC.x,s[8]=af.x,s[1]=O0.y,s[5]=uC.y,s[9]=af.y,s[2]=O0.z,s[6]=uC.z,s[10]=af.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[4],h=i[8],p=i[12],m=i[1],_=i[5],v=i[9],E=i[13],w=i[2],x=i[6],A=i[10],O=i[14],k=i[3],D=i[7],N=i[11],F=i[15],z=s[0],V=s[4],U=s[8],ee=s[12],ne=s[1],ie=s[5],se=s[9],fe=s[13],ae=s[2],he=s[6],ge=s[10],Ie=s[14],j=s[3],te=s[7],q=s[11],le=s[15];return o[0]=l*z+u*ne+h*ae+p*j,o[4]=l*V+u*ie+h*he+p*te,o[8]=l*U+u*se+h*ge+p*q,o[12]=l*ee+u*fe+h*Ie+p*le,o[1]=m*z+_*ne+v*ae+E*j,o[5]=m*V+_*ie+v*he+E*te,o[9]=m*U+_*se+v*ge+E*q,o[13]=m*ee+_*fe+v*Ie+E*le,o[2]=w*z+x*ne+A*ae+O*j,o[6]=w*V+x*ie+A*he+O*te,o[10]=w*U+x*se+A*ge+O*q,o[14]=w*ee+x*fe+A*Ie+O*le,o[3]=k*z+D*ne+N*ae+F*j,o[7]=k*V+D*ie+N*he+F*te,o[11]=k*U+D*se+N*ge+F*q,o[15]=k*ee+D*fe+N*Ie+F*le,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],o=e[12],l=e[1],u=e[5],h=e[9],p=e[13],m=e[2],_=e[6],v=e[10],E=e[14],w=e[3],x=e[7],A=e[11],O=e[15];return w*(+o*h*_-s*p*_-o*u*v+i*p*v+s*u*E-i*h*E)+x*(+t*h*E-t*p*v+o*l*v-s*l*E+s*p*m-o*h*m)+A*(+t*p*_-t*u*E-o*l*_+i*l*E+o*u*m-i*p*m)+O*(-s*u*m-t*h*_+t*u*v+s*l*_-i*l*v+i*h*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],p=e[7],m=e[8],_=e[9],v=e[10],E=e[11],w=e[12],x=e[13],A=e[14],O=e[15],k=_*A*p-x*v*p+x*h*E-u*A*E-_*h*O+u*v*O,D=w*v*p-m*A*p-w*h*E+l*A*E+m*h*O-l*v*O,N=m*x*p-w*_*p+w*u*E-l*x*E-m*u*O+l*_*O,F=w*_*h-m*x*h-w*u*v+l*x*v+m*u*A-l*_*A,z=t*k+i*D+s*N+o*F;if(z===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const V=1/z;return e[0]=k*V,e[1]=(x*v*o-_*A*o-x*s*E+i*A*E+_*s*O-i*v*O)*V,e[2]=(u*A*o-x*h*o+x*s*p-i*A*p-u*s*O+i*h*O)*V,e[3]=(_*h*o-u*v*o-_*s*p+i*v*p+u*s*E-i*h*E)*V,e[4]=D*V,e[5]=(m*A*o-w*v*o+w*s*E-t*A*E-m*s*O+t*v*O)*V,e[6]=(w*h*o-l*A*o-w*s*p+t*A*p+l*s*O-t*h*O)*V,e[7]=(l*v*o-m*h*o+m*s*p-t*v*p-l*s*E+t*h*E)*V,e[8]=N*V,e[9]=(w*_*o-m*x*o-w*i*E+t*x*E+m*i*O-t*_*O)*V,e[10]=(l*x*o-w*u*o+w*i*p-t*x*p-l*i*O+t*u*O)*V,e[11]=(m*u*o-l*_*o-m*i*p+t*_*p+l*i*E-t*u*E)*V,e[12]=F*V,e[13]=(m*x*s-w*_*s+w*i*v-t*x*v-m*i*A+t*_*A)*V,e[14]=(w*u*s-l*x*s-w*i*h+t*x*h+l*i*A-t*u*A)*V,e[15]=(l*_*s-m*u*s+m*i*h-t*_*h-l*i*v+t*u*v)*V,this}scale(e){const t=this.elements,i=e.x,s=e.y,o=e.z;return t[0]*=i,t[4]*=s,t[8]*=o,t[1]*=i,t[5]*=s,t[9]*=o,t[2]*=i,t[6]*=s,t[10]*=o,t[3]*=i,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),o=1-i,l=e.x,u=e.y,h=e.z,p=o*l,m=o*u;return this.set(p*l+i,p*u-s*h,p*h+s*u,0,p*u+s*h,m*u+i,m*h-s*l,0,p*h-s*u,m*h+s*l,o*h*h+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,o,l){return this.set(1,i,o,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,o=t._x,l=t._y,u=t._z,h=t._w,p=o+o,m=l+l,_=u+u,v=o*p,E=o*m,w=o*_,x=l*m,A=l*_,O=u*_,k=h*p,D=h*m,N=h*_,F=i.x,z=i.y,V=i.z;return s[0]=(1-(x+O))*F,s[1]=(E+N)*F,s[2]=(w-D)*F,s[3]=0,s[4]=(E-N)*z,s[5]=(1-(v+O))*z,s[6]=(A+k)*z,s[7]=0,s[8]=(w+D)*V,s[9]=(A-k)*V,s[10]=(1-(v+x))*V,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let o=mT.set(s[0],s[1],s[2]).length();const l=mT.set(s[4],s[5],s[6]).length(),u=mT.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],jm.copy(this);const h=1/o,p=1/l,m=1/u;return jm.elements[0]*=h,jm.elements[1]*=h,jm.elements[2]*=h,jm.elements[4]*=p,jm.elements[5]*=p,jm.elements[6]*=p,jm.elements[8]*=m,jm.elements[9]*=m,jm.elements[10]*=m,t.setFromRotationMatrix(jm),i.x=o,i.y=l,i.z=u,this}makePerspective(e,t,i,s,o,l){const u=this.elements,h=2*o/(t-e),p=2*o/(i-s),m=(t+e)/(t-e),_=(i+s)/(i-s),v=-(l+o)/(l-o),E=-2*l*o/(l-o);return u[0]=h,u[4]=0,u[8]=m,u[12]=0,u[1]=0,u[5]=p,u[9]=_,u[13]=0,u[2]=0,u[6]=0,u[10]=v,u[14]=E,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,i,s,o,l){const u=this.elements,h=1/(t-e),p=1/(i-s),m=1/(l-o),_=(t+e)*h,v=(i+s)*p,E=(l+o)*m;return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-_,u[1]=0,u[5]=2*p,u[9]=0,u[13]=-v,u[2]=0,u[6]=0,u[10]=-2*m,u[14]=-E,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const mT=new Te,jm=new Sr,whe=new Te(0,0,0),xhe=new Te(1,1,1),O0=new Te,uC=new Te,af=new Te,jz=new Sr,Xz=new Bo;class pb{constructor(e=0,t=0,i=0,s=pb.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],h=s[1],p=s[5],m=s[9],_=s[2],v=s[6],E=s[10];switch(t){case"XYZ":this._y=Math.asin(Du(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,E),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(v,p),this._z=0);break;case"YXZ":this._x=Math.asin(-Du(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(u,E),this._z=Math.atan2(h,p)):(this._y=Math.atan2(-_,o),this._z=0);break;case"ZXY":this._x=Math.asin(Du(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-_,E),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-Du(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(v,E),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin(Du(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-m,p),this._y=Math.atan2(-_,o)):(this._x=0,this._y=Math.atan2(u,E));break;case"XZY":this._z=Math.asin(-Du(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(v,p),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-m,E),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return jz.makeRotationFromQuaternion(e),this.setFromRotationMatrix(jz,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Xz.setFromEuler(this),this.setFromQuaternion(Xz,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}pb.DefaultOrder="XYZ";pb.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Gy{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Che=0;const Yz=new Te,gT=new Bo,M_=new Sr,cC=new Te,m$=new Te,Mhe=new Te,Ahe=new Bo,Kz=new Te(1,0,0),Jz=new Te(0,1,0),Qz=new Te(0,0,1),Ihe={type:"added"},qz={type:"removed"};class is extends Cf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Che++}),this.uuid=bf(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=is.DefaultUp.clone();const e=new Te,t=new pb,i=new Bo,s=new Te(1,1,1);function o(){i.setFromEuler(t,!1)}function l(){t.setFromQuaternion(i,void 0,!1)}t._onChange(o),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Sr},normalMatrix:{value:new Jd}}),this.matrix=new Sr,this.matrixWorld=new Sr,this.matrixAutoUpdate=is.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Gy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return gT.setFromAxisAngle(e,t),this.quaternion.multiply(gT),this}rotateOnWorldAxis(e,t){return gT.setFromAxisAngle(e,t),this.quaternion.premultiply(gT),this}rotateX(e){return this.rotateOnAxis(Kz,e)}rotateY(e){return this.rotateOnAxis(Jz,e)}rotateZ(e){return this.rotateOnAxis(Qz,e)}translateOnAxis(e,t){return Yz.copy(e).applyQuaternion(this.quaternion),this.position.add(Yz.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Kz,e)}translateY(e){return this.translateOnAxis(Jz,e)}translateZ(e){return this.translateOnAxis(Qz,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(M_.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?cC.copy(e):cC.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),m$.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?M_.lookAt(m$,cC,this.up):M_.lookAt(cC,m$,this.up),this.quaternion.setFromRotationMatrix(M_),s&&(M_.extractRotation(s.matrixWorld),gT.setFromRotationMatrix(M_),this.quaternion.premultiply(gT.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Ihe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(qz)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(qz)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),M_.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),M_.multiply(e.parent.matrixWorld)),e.applyMatrix4(M_),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(m$,e,Mhe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(m$,Ahe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let o=0,l=s.length;o<l;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON()));function o(u,h){return u[h.uuid]===void 0&&(u[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const h=u.shapes;if(Array.isArray(h))for(let p=0,m=h.length;p<m;p++){const _=h[p];o(e.shapes,_)}else o(e.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let h=0,p=this.material.length;h<p;h++)u.push(o(e.materials,this.material[h]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const h=this.animations[u];s.animations.push(o(e.animations,h))}}if(t){const u=l(e.geometries),h=l(e.materials),p=l(e.textures),m=l(e.images),_=l(e.shapes),v=l(e.skeletons),E=l(e.animations),w=l(e.nodes);u.length>0&&(i.geometries=u),h.length>0&&(i.materials=h),p.length>0&&(i.textures=p),m.length>0&&(i.images=m),_.length>0&&(i.shapes=_),v.length>0&&(i.skeletons=v),E.length>0&&(i.animations=E),w.length>0&&(i.nodes=w)}return i.object=s,i;function l(u){const h=[];for(const p in u){const m=u[p];delete m.metadata,h.push(m)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}is.DefaultUp=new Te(0,1,0);is.DefaultMatrixAutoUpdate=!0;const Xm=new Te,A_=new Te,TO=new Te,I_=new Te,_T=new Te,vT=new Te,Zz=new Te,EO=new Te,$O=new Te,SO=new Te;class df{constructor(e=new Te,t=new Te,i=new Te){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Xm.subVectors(e,t),s.cross(Xm);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,i,s,o){Xm.subVectors(s,t),A_.subVectors(i,t),TO.subVectors(e,t);const l=Xm.dot(Xm),u=Xm.dot(A_),h=Xm.dot(TO),p=A_.dot(A_),m=A_.dot(TO),_=l*p-u*u;if(_===0)return o.set(-2,-1,-1);const v=1/_,E=(p*h-u*m)*v,w=(l*m-u*h)*v;return o.set(1-E-w,w,E)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,I_),I_.x>=0&&I_.y>=0&&I_.x+I_.y<=1}static getUV(e,t,i,s,o,l,u,h){return this.getBarycoord(e,t,i,s,I_),h.set(0,0),h.addScaledVector(o,I_.x),h.addScaledVector(l,I_.y),h.addScaledVector(u,I_.z),h}static isFrontFacing(e,t,i,s){return Xm.subVectors(i,t),A_.subVectors(e,t),Xm.cross(A_).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Xm.subVectors(this.c,this.b),A_.subVectors(this.a,this.b),Xm.cross(A_).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return df.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return df.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,s,o){return df.getUV(e,this.a,this.b,this.c,t,i,s,o)}containsPoint(e){return df.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return df.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,o=this.c;let l,u;_T.subVectors(s,i),vT.subVectors(o,i),EO.subVectors(e,i);const h=_T.dot(EO),p=vT.dot(EO);if(h<=0&&p<=0)return t.copy(i);$O.subVectors(e,s);const m=_T.dot($O),_=vT.dot($O);if(m>=0&&_<=m)return t.copy(s);const v=h*_-m*p;if(v<=0&&h>=0&&m<=0)return l=h/(h-m),t.copy(i).addScaledVector(_T,l);SO.subVectors(e,o);const E=_T.dot(SO),w=vT.dot(SO);if(w>=0&&E<=w)return t.copy(o);const x=E*p-h*w;if(x<=0&&p>=0&&w<=0)return u=p/(p-w),t.copy(i).addScaledVector(vT,u);const A=m*w-E*_;if(A<=0&&_-m>=0&&E-w>=0)return Zz.subVectors(o,s),u=(_-m)/(_-m+(E-w)),t.copy(s).addScaledVector(Zz,u);const O=1/(A+x+v);return l=x*O,u=v*O,t.copy(i).addScaledVector(_T,l).addScaledVector(vT,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Rhe=0;class Dc extends Cf{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Rhe++}),this.uuid=bf(),this.name="",this.type="Material",this.blending=G_,this.side=Jg,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=WI,this.blendDst=VI,this.blendEquation=Ty,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=EA,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=R9,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=AM,this.stencilZFail=AM,this.stencilZPass=AM,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===z8;continue}const s=this[t];if(s===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==G_&&(i.blending=this.blending),this.side!==Jg&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function s(o){const l=[];for(const u in o){const h=o[u];delete h.metadata,l.push(h)}return l}if(t){const o=s(e.textures),l=s(e.images);o.length>0&&(i.textures=o),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let o=0;o!==s;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class dg extends Dc{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new _n(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=yw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ic=new Te,hC=new Ot;class xs{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=HS,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),l=new _n),t[i++]=l.r,t[i++]=l.g,t[i++]=l.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),l=new Ot),t[i++]=l.x,t[i++]=l.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),l=new Te),t[i++]=l.x,t[i++]=l.y,t[i++]=l.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),l=new xi),t[i++]=l.x,t[i++]=l.y,t[i++]=l.z,t[i++]=l.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)hC.fromBufferAttribute(this,t),hC.applyMatrix3(e),this.setXY(t,hC.x,hC.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)ic.fromBufferAttribute(this,t),ic.applyMatrix3(e),this.setXYZ(t,ic.x,ic.y,ic.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ic.fromBufferAttribute(this,t),ic.applyMatrix4(e),this.setXYZ(t,ic.x,ic.y,ic.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ic.fromBufferAttribute(this,t),ic.applyNormalMatrix(e),this.setXYZ(t,ic.x,ic.y,ic.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ic.fromBufferAttribute(this,t),ic.transformDirection(e),this.setXYZ(t,ic.x,ic.y,ic.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==HS&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class khe extends xs{constructor(e,t,i){super(new Int8Array(e),t,i)}}class Ohe extends xs{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class Lhe extends xs{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class Nhe extends xs{constructor(e,t,i){super(new Int16Array(e),t,i)}}class XB extends xs{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Dhe extends xs{constructor(e,t,i){super(new Int32Array(e),t,i)}}class YB extends xs{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Bhe extends xs{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}}class Pn extends xs{constructor(e,t,i){super(new Float32Array(e),t,i)}}class Phe extends xs{constructor(e,t,i){super(new Float64Array(e),t,i)}}let Fhe=0;const qf=new Sr,wO=new is,yT=new Te,lf=new hg,g$=new hg,ih=new Te;class Ar extends Cf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Fhe++}),this.uuid=bf(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(L9(e)?YB:XB)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new Jd().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return qf.makeRotationFromQuaternion(e),this.applyMatrix4(qf),this}rotateX(e){return qf.makeRotationX(e),this.applyMatrix4(qf),this}rotateY(e){return qf.makeRotationY(e),this.applyMatrix4(qf),this}rotateZ(e){return qf.makeRotationZ(e),this.applyMatrix4(qf),this}translate(e,t,i){return qf.makeTranslation(e,t,i),this.applyMatrix4(qf),this}scale(e,t,i){return qf.makeScale(e,t,i),this.applyMatrix4(qf),this}lookAt(e){return wO.lookAt(e),wO.updateMatrix(),this.applyMatrix4(wO.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(yT).negate(),this.translate(yT.x,yT.y,yT.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Pn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new hg);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Te(-1/0,-1/0,-1/0),new Te(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const o=t[i];lf.setFromBufferAttribute(o),this.morphTargetsRelative?(ih.addVectors(this.boundingBox.min,lf.min),this.boundingBox.expandByPoint(ih),ih.addVectors(this.boundingBox.max,lf.max),this.boundingBox.expandByPoint(ih)):(this.boundingBox.expandByPoint(lf.min),this.boundingBox.expandByPoint(lf.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new t_);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Te,1/0);return}if(e){const i=this.boundingSphere.center;if(lf.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const u=t[o];g$.setFromBufferAttribute(u),this.morphTargetsRelative?(ih.addVectors(lf.min,g$.min),lf.expandByPoint(ih),ih.addVectors(lf.max,g$.max),lf.expandByPoint(ih)):(lf.expandByPoint(g$.min),lf.expandByPoint(g$.max))}lf.getCenter(i);let s=0;for(let o=0,l=e.count;o<l;o++)ih.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(ih));if(t)for(let o=0,l=t.length;o<l;o++){const u=t[o],h=this.morphTargetsRelative;for(let p=0,m=u.count;p<m;p++)ih.fromBufferAttribute(u,p),h&&(yT.fromBufferAttribute(e,p),ih.add(yT)),s=Math.max(s,i.distanceToSquared(ih))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,s=t.position.array,o=t.normal.array,l=t.uv.array,u=s.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new xs(new Float32Array(4*u),4));const h=this.getAttribute("tangent").array,p=[],m=[];for(let ne=0;ne<u;ne++)p[ne]=new Te,m[ne]=new Te;const _=new Te,v=new Te,E=new Te,w=new Ot,x=new Ot,A=new Ot,O=new Te,k=new Te;function D(ne,ie,se){_.fromArray(s,ne*3),v.fromArray(s,ie*3),E.fromArray(s,se*3),w.fromArray(l,ne*2),x.fromArray(l,ie*2),A.fromArray(l,se*2),v.sub(_),E.sub(_),x.sub(w),A.sub(w);const fe=1/(x.x*A.y-A.x*x.y);!isFinite(fe)||(O.copy(v).multiplyScalar(A.y).addScaledVector(E,-x.y).multiplyScalar(fe),k.copy(E).multiplyScalar(x.x).addScaledVector(v,-A.x).multiplyScalar(fe),p[ne].add(O),p[ie].add(O),p[se].add(O),m[ne].add(k),m[ie].add(k),m[se].add(k))}let N=this.groups;N.length===0&&(N=[{start:0,count:i.length}]);for(let ne=0,ie=N.length;ne<ie;++ne){const se=N[ne],fe=se.start,ae=se.count;for(let he=fe,ge=fe+ae;he<ge;he+=3)D(i[he+0],i[he+1],i[he+2])}const F=new Te,z=new Te,V=new Te,U=new Te;function ee(ne){V.fromArray(o,ne*3),U.copy(V);const ie=p[ne];F.copy(ie),F.sub(V.multiplyScalar(V.dot(ie))).normalize(),z.crossVectors(U,ie);const se=z.dot(m[ne])<0?-1:1;h[ne*4]=F.x,h[ne*4+1]=F.y,h[ne*4+2]=F.z,h[ne*4+3]=se}for(let ne=0,ie=N.length;ne<ie;++ne){const se=N[ne],fe=se.start,ae=se.count;for(let he=fe,ge=fe+ae;he<ge;he+=3)ee(i[he+0]),ee(i[he+1]),ee(i[he+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new xs(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let v=0,E=i.count;v<E;v++)i.setXYZ(v,0,0,0);const s=new Te,o=new Te,l=new Te,u=new Te,h=new Te,p=new Te,m=new Te,_=new Te;if(e)for(let v=0,E=e.count;v<E;v+=3){const w=e.getX(v+0),x=e.getX(v+1),A=e.getX(v+2);s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,x),l.fromBufferAttribute(t,A),m.subVectors(l,o),_.subVectors(s,o),m.cross(_),u.fromBufferAttribute(i,w),h.fromBufferAttribute(i,x),p.fromBufferAttribute(i,A),u.add(m),h.add(m),p.add(m),i.setXYZ(w,u.x,u.y,u.z),i.setXYZ(x,h.x,h.y,h.z),i.setXYZ(A,p.x,p.y,p.z)}else for(let v=0,E=t.count;v<E;v+=3)s.fromBufferAttribute(t,v+0),o.fromBufferAttribute(t,v+1),l.fromBufferAttribute(t,v+2),m.subVectors(l,o),_.subVectors(s,o),m.cross(_),i.setXYZ(v+0,m.x,m.y,m.z),i.setXYZ(v+1,m.x,m.y,m.z),i.setXYZ(v+2,m.x,m.y,m.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const s in i){if(e.attributes[s]===void 0)continue;const o=i[s].array,l=e.attributes[s],u=l.array,h=l.itemSize*t,p=Math.min(u.length,o.length-h);for(let m=0,_=h;m<p;m++,_++)o[_]=u[m]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ih.fromBufferAttribute(e,t),ih.normalize(),e.setXYZ(t,ih.x,ih.y,ih.z)}toNonIndexed(){function e(u,h){const p=u.array,m=u.itemSize,_=u.normalized,v=new p.constructor(h.length*m);let E=0,w=0;for(let x=0,A=h.length;x<A;x++){u.isInterleavedBufferAttribute?E=h[x]*u.data.stride+u.offset:E=h[x]*m;for(let O=0;O<m;O++)v[w++]=p[E++]}return new xs(v,m,_)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ar,i=this.index.array,s=this.attributes;for(const u in s){const h=s[u],p=e(h,i);t.setAttribute(u,p)}const o=this.morphAttributes;for(const u in o){const h=[],p=o[u];for(let m=0,_=p.length;m<_;m++){const v=p[m],E=e(v,i);h.push(E)}t.morphAttributes[u]=h}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,h=l.length;u<h;u++){const p=l[u];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const p in h)h[p]!==void 0&&(e[p]=h[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const h in i){const p=i[h];e.data.attributes[h]=p.toJSON(e.data)}const s={};let o=!1;for(const h in this.morphAttributes){const p=this.morphAttributes[h],m=[];for(let _=0,v=p.length;_<v;_++){const E=p[_];m.push(E.toJSON(e.data))}m.length>0&&(s[h]=m,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const p in s){const m=s[p];this.setAttribute(p,m.clone(t))}const o=e.morphAttributes;for(const p in o){const m=[],_=o[p];for(let v=0,E=_.length;v<E;v++)m.push(_[v].clone(t));this.morphAttributes[p]=m}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let p=0,m=l.length;p<m;p++){const _=l[p];this.addGroup(_.start,_.count,_.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const eH=new Sr,bT=new Tw,xO=new t_,L0=new Te,N0=new Te,D0=new Te,CO=new Te,MO=new Te,AO=new Te,dC=new Te,pC=new Te,fC=new Te,mC=new Ot,gC=new Ot,_C=new Ot,IO=new Te,vC=new Te;class bn extends is{constructor(e=new Ar,t=new dg){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}raycast(e,t){const i=this.geometry,s=this.material,o=this.matrixWorld;if(s===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),xO.copy(i.boundingSphere),xO.applyMatrix4(o),e.ray.intersectsSphere(xO)===!1)||(eH.copy(o).invert(),bT.copy(e.ray).applyMatrix4(eH),i.boundingBox!==null&&bT.intersectsBox(i.boundingBox)===!1))return;let l;const u=i.index,h=i.attributes.position,p=i.morphAttributes.position,m=i.morphTargetsRelative,_=i.attributes.uv,v=i.attributes.uv2,E=i.groups,w=i.drawRange;if(u!==null)if(Array.isArray(s))for(let x=0,A=E.length;x<A;x++){const O=E[x],k=s[O.materialIndex],D=Math.max(O.start,w.start),N=Math.min(u.count,Math.min(O.start+O.count,w.start+w.count));for(let F=D,z=N;F<z;F+=3){const V=u.getX(F),U=u.getX(F+1),ee=u.getX(F+2);l=yC(this,k,e,bT,h,p,m,_,v,V,U,ee),l&&(l.faceIndex=Math.floor(F/3),l.face.materialIndex=O.materialIndex,t.push(l))}}else{const x=Math.max(0,w.start),A=Math.min(u.count,w.start+w.count);for(let O=x,k=A;O<k;O+=3){const D=u.getX(O),N=u.getX(O+1),F=u.getX(O+2);l=yC(this,s,e,bT,h,p,m,_,v,D,N,F),l&&(l.faceIndex=Math.floor(O/3),t.push(l))}}else if(h!==void 0)if(Array.isArray(s))for(let x=0,A=E.length;x<A;x++){const O=E[x],k=s[O.materialIndex],D=Math.max(O.start,w.start),N=Math.min(h.count,Math.min(O.start+O.count,w.start+w.count));for(let F=D,z=N;F<z;F+=3){const V=F,U=F+1,ee=F+2;l=yC(this,k,e,bT,h,p,m,_,v,V,U,ee),l&&(l.faceIndex=Math.floor(F/3),l.face.materialIndex=O.materialIndex,t.push(l))}}else{const x=Math.max(0,w.start),A=Math.min(h.count,w.start+w.count);for(let O=x,k=A;O<k;O+=3){const D=O,N=O+1,F=O+2;l=yC(this,s,e,bT,h,p,m,_,v,D,N,F),l&&(l.faceIndex=Math.floor(O/3),t.push(l))}}}}function Uhe(r,e,t,i,s,o,l,u){let h;if(e.side===Nc?h=i.intersectTriangle(l,o,s,!0,u):h=i.intersectTriangle(s,o,l,e.side!==Kd,u),h===null)return null;vC.copy(u),vC.applyMatrix4(r.matrixWorld);const p=t.ray.origin.distanceTo(vC);return p<t.near||p>t.far?null:{distance:p,point:vC.clone(),object:r}}function yC(r,e,t,i,s,o,l,u,h,p,m,_){L0.fromBufferAttribute(s,p),N0.fromBufferAttribute(s,m),D0.fromBufferAttribute(s,_);const v=r.morphTargetInfluences;if(o&&v){dC.set(0,0,0),pC.set(0,0,0),fC.set(0,0,0);for(let w=0,x=o.length;w<x;w++){const A=v[w],O=o[w];A!==0&&(CO.fromBufferAttribute(O,p),MO.fromBufferAttribute(O,m),AO.fromBufferAttribute(O,_),l?(dC.addScaledVector(CO,A),pC.addScaledVector(MO,A),fC.addScaledVector(AO,A)):(dC.addScaledVector(CO.sub(L0),A),pC.addScaledVector(MO.sub(N0),A),fC.addScaledVector(AO.sub(D0),A)))}L0.add(dC),N0.add(pC),D0.add(fC)}r.isSkinnedMesh&&(r.boneTransform(p,L0),r.boneTransform(m,N0),r.boneTransform(_,D0));const E=Uhe(r,e,t,i,L0,N0,D0,IO);if(E){u&&(mC.fromBufferAttribute(u,p),gC.fromBufferAttribute(u,m),_C.fromBufferAttribute(u,_),E.uv=df.getUV(IO,L0,N0,D0,mC,gC,_C,new Ot)),h&&(mC.fromBufferAttribute(h,p),gC.fromBufferAttribute(h,m),_C.fromBufferAttribute(h,_),E.uv2=df.getUV(IO,L0,N0,D0,mC,gC,_C,new Ot));const w={a:p,b:m,c:_,normal:new Te,materialIndex:0};df.getNormal(L0,N0,D0,w.normal),E.face=w}return E}class Ma extends Ar{constructor(e=1,t=1,i=1,s=1,o=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:o,depthSegments:l};const u=this;s=Math.floor(s),o=Math.floor(o),l=Math.floor(l);const h=[],p=[],m=[],_=[];let v=0,E=0;w("z","y","x",-1,-1,i,t,e,l,o,0),w("z","y","x",1,-1,i,t,-e,l,o,1),w("x","z","y",1,1,e,i,t,s,l,2),w("x","z","y",1,-1,e,i,-t,s,l,3),w("x","y","z",1,-1,e,t,i,s,o,4),w("x","y","z",-1,-1,e,t,-i,s,o,5),this.setIndex(h),this.setAttribute("position",new Pn(p,3)),this.setAttribute("normal",new Pn(m,3)),this.setAttribute("uv",new Pn(_,2));function w(x,A,O,k,D,N,F,z,V,U,ee){const ne=N/V,ie=F/U,se=N/2,fe=F/2,ae=z/2,he=V+1,ge=U+1;let Ie=0,j=0;const te=new Te;for(let q=0;q<ge;q++){const le=q*ie-fe;for(let _e=0;_e<he;_e++){const Le=_e*ne-se;te[x]=Le*k,te[A]=le*D,te[O]=ae,p.push(te.x,te.y,te.z),te[x]=0,te[A]=0,te[O]=z>0?1:-1,m.push(te.x,te.y,te.z),_.push(_e/V),_.push(1-q/U),Ie+=1}}for(let q=0;q<U;q++)for(let le=0;le<V;le++){const _e=v+le+he*q,Le=v+le+he*(q+1),xe=v+(le+1)+he*(q+1),Ve=v+(le+1)+he*q;h.push(_e,Le,Ve),h.push(Le,xe,Ve),j+=6}u.addGroup(E,j,ee),E+=j,v+=Ie}}static fromJSON(e){return new Ma(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function x1(r){const e={};for(const t in r){e[t]={};for(const i in r[t]){const s=r[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function gd(r){const e={};for(let t=0;t<r.length;t++){const i=x1(r[t]);for(const s in i)e[s]=i[s]}return e}function zhe(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}const Ew={clone:x1,merge:gd};var Hhe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ghe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ah extends Dc{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Hhe,this.fragmentShader=Ghe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=x1(e.uniforms),this.uniformsGroups=zhe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class eE extends is{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Sr,this.projectionMatrix=new Sr,this.projectionMatrixInverse=new Sr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class So extends eE{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=GS*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(zy*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return GS*2*Math.atan(Math.tan(zy*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,s,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(zy*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,o=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const h=l.fullWidth,p=l.fullHeight;o+=l.offsetX*s/h,t-=l.offsetY*i/p,s*=l.width/h,i*=l.height/p}const u=this.filmOffset;u!==0&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const TT=90,ET=1;class D9 extends is{constructor(e,t,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const s=new So(TT,ET,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Te(1,0,0)),this.add(s);const o=new So(TT,ET,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new Te(-1,0,0)),this.add(o);const l=new So(TT,ET,e,t);l.layers=this.layers,l.up.set(0,0,1),l.lookAt(new Te(0,1,0)),this.add(l);const u=new So(TT,ET,e,t);u.layers=this.layers,u.up.set(0,0,-1),u.lookAt(new Te(0,-1,0)),this.add(u);const h=new So(TT,ET,e,t);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new Te(0,0,1)),this.add(h);const p=new So(TT,ET,e,t);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new Te(0,0,-1)),this.add(p)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[s,o,l,u,h,p]=this.children,m=e.getRenderTarget(),_=e.toneMapping,v=e.xr.enabled;e.toneMapping=og,e.xr.enabled=!1;const E=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,s),e.setRenderTarget(i,1),e.render(t,o),e.setRenderTarget(i,2),e.render(t,l),e.setRenderTarget(i,3),e.render(t,u),e.setRenderTarget(i,4),e.render(t,h),i.texture.generateMipmaps=E,e.setRenderTarget(i,5),e.render(t,p),e.setRenderTarget(m),e.toneMapping=_,e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class $w extends Rl{constructor(e,t,i,s,o,l,u,h,p,m){e=e!==void 0?e:[],t=t!==void 0?t:pv,super(e,t,i,s,o,l,u,h,p,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class B9 extends iu{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new $w(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Po}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Ma(5,5,5),o=new ah({name:"CubemapFromEquirect",uniforms:x1(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Nc,blending:Zd});o.uniforms.tEquirect.value=t;const l=new bn(s,o),u=t.minFilter;return t.minFilter===hb&&(t.minFilter=Po),new D9(1,10,this).update(e,l),t.minFilter=u,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,i,s){const o=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,i,s);e.setRenderTarget(o)}}const RO=new Te,Whe=new Te,Vhe=new Jd;class L_{constructor(e=new Te(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=RO.subVectors(i,t).cross(Whe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(RO),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(i).multiplyScalar(o).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Vhe.getNormalMatrix(e),s=this.coplanarPoint(RO).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const $T=new t_,bC=new Te;class KI{constructor(e=new L_,t=new L_,i=new L_,s=new L_,o=new L_,l=new L_){this.planes=[e,t,i,s,o,l]}set(e,t,i,s,o,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(i),u[3].copy(s),u[4].copy(o),u[5].copy(l),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,s=i[0],o=i[1],l=i[2],u=i[3],h=i[4],p=i[5],m=i[6],_=i[7],v=i[8],E=i[9],w=i[10],x=i[11],A=i[12],O=i[13],k=i[14],D=i[15];return t[0].setComponents(u-s,_-h,x-v,D-A).normalize(),t[1].setComponents(u+s,_+h,x+v,D+A).normalize(),t[2].setComponents(u+o,_+p,x+E,D+O).normalize(),t[3].setComponents(u-o,_-p,x-E,D-O).normalize(),t[4].setComponents(u-l,_-m,x-w,D-k).normalize(),t[5].setComponents(u+l,_+m,x+w,D+k).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),$T.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere($T)}intersectsSprite(e){return $T.center.set(0,0,0),$T.radius=.7071067811865476,$T.applyMatrix4(e.matrixWorld),this.intersectsSphere($T)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(bC.x=s.normal.x>0?e.max.x:e.min.x,bC.y=s.normal.y>0?e.max.y:e.min.y,bC.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(bC)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function P9(){let r=null,e=!1,t=null,i=null;function s(o,l){t(o,l),i=r.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=r.requestAnimationFrame(s),e=!0)},stop:function(){r.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){r=o}}}function jhe(r,e){const t=e.isWebGL2,i=new WeakMap;function s(p,m){const _=p.array,v=p.usage,E=r.createBuffer();r.bindBuffer(m,E),r.bufferData(m,_,v),p.onUploadCallback();let w;if(_ instanceof Float32Array)w=5126;else if(_ instanceof Uint16Array)if(p.isFloat16BufferAttribute)if(t)w=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else w=5123;else if(_ instanceof Int16Array)w=5122;else if(_ instanceof Uint32Array)w=5125;else if(_ instanceof Int32Array)w=5124;else if(_ instanceof Int8Array)w=5120;else if(_ instanceof Uint8Array)w=5121;else if(_ instanceof Uint8ClampedArray)w=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+_);return{buffer:E,type:w,bytesPerElement:_.BYTES_PER_ELEMENT,version:p.version}}function o(p,m,_){const v=m.array,E=m.updateRange;r.bindBuffer(_,p),E.count===-1?r.bufferSubData(_,0,v):(t?r.bufferSubData(_,E.offset*v.BYTES_PER_ELEMENT,v,E.offset,E.count):r.bufferSubData(_,E.offset*v.BYTES_PER_ELEMENT,v.subarray(E.offset,E.offset+E.count)),E.count=-1)}function l(p){return p.isInterleavedBufferAttribute&&(p=p.data),i.get(p)}function u(p){p.isInterleavedBufferAttribute&&(p=p.data);const m=i.get(p);m&&(r.deleteBuffer(m.buffer),i.delete(p))}function h(p,m){if(p.isGLBufferAttribute){const v=i.get(p);(!v||v.version<p.version)&&i.set(p,{buffer:p.buffer,type:p.type,bytesPerElement:p.elementSize,version:p.version});return}p.isInterleavedBufferAttribute&&(p=p.data);const _=i.get(p);_===void 0?i.set(p,s(p,m)):_.version<p.version&&(o(_.buffer,p,m),_.version=p.version)}return{get:l,remove:u,update:h}}class lg extends Ar{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const o=e/2,l=t/2,u=Math.floor(i),h=Math.floor(s),p=u+1,m=h+1,_=e/u,v=t/h,E=[],w=[],x=[],A=[];for(let O=0;O<m;O++){const k=O*v-l;for(let D=0;D<p;D++){const N=D*_-o;w.push(N,-k,0),x.push(0,0,1),A.push(D/u),A.push(1-O/h)}}for(let O=0;O<h;O++)for(let k=0;k<u;k++){const D=k+p*O,N=k+p*(O+1),F=k+1+p*(O+1),z=k+1+p*O;E.push(D,N,z),E.push(N,F,z)}this.setIndex(E),this.setAttribute("position",new Pn(w,3)),this.setAttribute("normal",new Pn(x,3)),this.setAttribute("uv",new Pn(A,2))}static fromJSON(e){return new lg(e.width,e.height,e.widthSegments,e.heightSegments)}}var Xhe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Yhe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Khe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Jhe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Qhe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,qhe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Zhe="vec3 transformed = vec3( position );",ede=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,tde=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,nde=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,rde=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,ide=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,sde=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,ode=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ade=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,lde=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ude=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,cde=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,hde=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,dde=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,pde=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,fde=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,mde=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,gde=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,_de=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,vde=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,yde="gl_FragColor = linearToOutputTexel( gl_FragColor );",bde=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Tde=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Ede=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,$de=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Sde=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,wde=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,xde=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Cde=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Mde=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Ade=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Ide=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,Rde=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,kde=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Ode=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,Lde=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Nde=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Dde=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Bde=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Pde=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Fde=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Ude=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,zde=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Hde=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Gde=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Wde=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Vde=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,jde=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Xde=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Yde=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Kde=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Jde=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Qde=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,qde=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Zde=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,epe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,tpe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,npe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,rpe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,ipe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,spe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,ope=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ape=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,lpe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,upe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,cpe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,hpe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,dpe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,ppe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,fpe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,mpe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,gpe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,_pe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,vpe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ype=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,bpe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Tpe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Epe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,$pe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Spe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,wpe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,xpe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Cpe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Mpe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Ape=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Ipe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Rpe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,kpe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Ope=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Lpe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Npe=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,Dpe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Bpe=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Ppe=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Fpe=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Upe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,zpe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Hpe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Gpe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Wpe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Vpe=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,jpe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Xpe=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Ype=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Kpe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Jpe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Qpe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,qpe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Zpe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,efe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tfe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,nfe=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,rfe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ife=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sfe=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ofe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,afe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lfe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ufe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,cfe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hfe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dfe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,pfe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ffe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mfe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gfe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,_fe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vfe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yfe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,bfe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Tfe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,vi={alphamap_fragment:Xhe,alphamap_pars_fragment:Yhe,alphatest_fragment:Khe,alphatest_pars_fragment:Jhe,aomap_fragment:Qhe,aomap_pars_fragment:qhe,begin_vertex:Zhe,beginnormal_vertex:ede,bsdfs:tde,iridescence_fragment:nde,bumpmap_pars_fragment:rde,clipping_planes_fragment:ide,clipping_planes_pars_fragment:sde,clipping_planes_pars_vertex:ode,clipping_planes_vertex:ade,color_fragment:lde,color_pars_fragment:ude,color_pars_vertex:cde,color_vertex:hde,common:dde,cube_uv_reflection_fragment:pde,defaultnormal_vertex:fde,displacementmap_pars_vertex:mde,displacementmap_vertex:gde,emissivemap_fragment:_de,emissivemap_pars_fragment:vde,encodings_fragment:yde,encodings_pars_fragment:bde,envmap_fragment:Tde,envmap_common_pars_fragment:Ede,envmap_pars_fragment:$de,envmap_pars_vertex:Sde,envmap_physical_pars_fragment:Nde,envmap_vertex:wde,fog_vertex:xde,fog_pars_vertex:Cde,fog_fragment:Mde,fog_pars_fragment:Ade,gradientmap_pars_fragment:Ide,lightmap_fragment:Rde,lightmap_pars_fragment:kde,lights_lambert_vertex:Ode,lights_pars_begin:Lde,lights_toon_fragment:Dde,lights_toon_pars_fragment:Bde,lights_phong_fragment:Pde,lights_phong_pars_fragment:Fde,lights_physical_fragment:Ude,lights_physical_pars_fragment:zde,lights_fragment_begin:Hde,lights_fragment_maps:Gde,lights_fragment_end:Wde,logdepthbuf_fragment:Vde,logdepthbuf_pars_fragment:jde,logdepthbuf_pars_vertex:Xde,logdepthbuf_vertex:Yde,map_fragment:Kde,map_pars_fragment:Jde,map_particle_fragment:Qde,map_particle_pars_fragment:qde,metalnessmap_fragment:Zde,metalnessmap_pars_fragment:epe,morphcolor_vertex:tpe,morphnormal_vertex:npe,morphtarget_pars_vertex:rpe,morphtarget_vertex:ipe,normal_fragment_begin:spe,normal_fragment_maps:ope,normal_pars_fragment:ape,normal_pars_vertex:lpe,normal_vertex:upe,normalmap_pars_fragment:cpe,clearcoat_normal_fragment_begin:hpe,clearcoat_normal_fragment_maps:dpe,clearcoat_pars_fragment:ppe,iridescence_pars_fragment:fpe,output_fragment:mpe,packing:gpe,premultiplied_alpha_fragment:_pe,project_vertex:vpe,dithering_fragment:ype,dithering_pars_fragment:bpe,roughnessmap_fragment:Tpe,roughnessmap_pars_fragment:Epe,shadowmap_pars_fragment:$pe,shadowmap_pars_vertex:Spe,shadowmap_vertex:wpe,shadowmask_pars_fragment:xpe,skinbase_vertex:Cpe,skinning_pars_vertex:Mpe,skinning_vertex:Ape,skinnormal_vertex:Ipe,specularmap_fragment:Rpe,specularmap_pars_fragment:kpe,tonemapping_fragment:Ope,tonemapping_pars_fragment:Lpe,transmission_fragment:Npe,transmission_pars_fragment:Dpe,uv_pars_fragment:Bpe,uv_pars_vertex:Ppe,uv_vertex:Fpe,uv2_pars_fragment:Upe,uv2_pars_vertex:zpe,uv2_vertex:Hpe,worldpos_vertex:Gpe,background_vert:Wpe,background_frag:Vpe,cube_vert:jpe,cube_frag:Xpe,depth_vert:Ype,depth_frag:Kpe,distanceRGBA_vert:Jpe,distanceRGBA_frag:Qpe,equirect_vert:qpe,equirect_frag:Zpe,linedashed_vert:efe,linedashed_frag:tfe,meshbasic_vert:nfe,meshbasic_frag:rfe,meshlambert_vert:ife,meshlambert_frag:sfe,meshmatcap_vert:ofe,meshmatcap_frag:afe,meshnormal_vert:lfe,meshnormal_frag:ufe,meshphong_vert:cfe,meshphong_frag:hfe,meshphysical_vert:dfe,meshphysical_frag:pfe,meshtoon_vert:ffe,meshtoon_frag:mfe,points_vert:gfe,points_frag:_fe,shadow_vert:vfe,shadow_frag:yfe,sprite_vert:bfe,sprite_frag:Tfe},Sn={common:{diffuse:{value:new _n(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Jd},uv2Transform:{value:new Jd},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ot(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _n(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _n(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Jd}},sprite:{diffuse:{value:new _n(16777215)},opacity:{value:1},center:{value:new Ot(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Jd}}},Xd={basic:{uniforms:gd([Sn.common,Sn.specularmap,Sn.envmap,Sn.aomap,Sn.lightmap,Sn.fog]),vertexShader:vi.meshbasic_vert,fragmentShader:vi.meshbasic_frag},lambert:{uniforms:gd([Sn.common,Sn.specularmap,Sn.envmap,Sn.aomap,Sn.lightmap,Sn.emissivemap,Sn.fog,Sn.lights,{emissive:{value:new _n(0)}}]),vertexShader:vi.meshlambert_vert,fragmentShader:vi.meshlambert_frag},phong:{uniforms:gd([Sn.common,Sn.specularmap,Sn.envmap,Sn.aomap,Sn.lightmap,Sn.emissivemap,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.fog,Sn.lights,{emissive:{value:new _n(0)},specular:{value:new _n(1118481)},shininess:{value:30}}]),vertexShader:vi.meshphong_vert,fragmentShader:vi.meshphong_frag},standard:{uniforms:gd([Sn.common,Sn.envmap,Sn.aomap,Sn.lightmap,Sn.emissivemap,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.roughnessmap,Sn.metalnessmap,Sn.fog,Sn.lights,{emissive:{value:new _n(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:vi.meshphysical_vert,fragmentShader:vi.meshphysical_frag},toon:{uniforms:gd([Sn.common,Sn.aomap,Sn.lightmap,Sn.emissivemap,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.gradientmap,Sn.fog,Sn.lights,{emissive:{value:new _n(0)}}]),vertexShader:vi.meshtoon_vert,fragmentShader:vi.meshtoon_frag},matcap:{uniforms:gd([Sn.common,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.fog,{matcap:{value:null}}]),vertexShader:vi.meshmatcap_vert,fragmentShader:vi.meshmatcap_frag},points:{uniforms:gd([Sn.points,Sn.fog]),vertexShader:vi.points_vert,fragmentShader:vi.points_frag},dashed:{uniforms:gd([Sn.common,Sn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:vi.linedashed_vert,fragmentShader:vi.linedashed_frag},depth:{uniforms:gd([Sn.common,Sn.displacementmap]),vertexShader:vi.depth_vert,fragmentShader:vi.depth_frag},normal:{uniforms:gd([Sn.common,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,{opacity:{value:1}}]),vertexShader:vi.meshnormal_vert,fragmentShader:vi.meshnormal_frag},sprite:{uniforms:gd([Sn.sprite,Sn.fog]),vertexShader:vi.sprite_vert,fragmentShader:vi.sprite_frag},background:{uniforms:{uvTransform:{value:new Jd},t2D:{value:null}},vertexShader:vi.background_vert,fragmentShader:vi.background_frag},cube:{uniforms:gd([Sn.envmap,{opacity:{value:1}}]),vertexShader:vi.cube_vert,fragmentShader:vi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:vi.equirect_vert,fragmentShader:vi.equirect_frag},distanceRGBA:{uniforms:gd([Sn.common,Sn.displacementmap,{referencePosition:{value:new Te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:vi.distanceRGBA_vert,fragmentShader:vi.distanceRGBA_frag},shadow:{uniforms:gd([Sn.lights,Sn.fog,{color:{value:new _n(0)},opacity:{value:1}}]),vertexShader:vi.shadow_vert,fragmentShader:vi.shadow_frag}};Xd.physical={uniforms:gd([Xd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ot(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new _n(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ot},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new _n(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new _n(1,1,1)},specularColorMap:{value:null}}]),vertexShader:vi.meshphysical_vert,fragmentShader:vi.meshphysical_frag};function Efe(r,e,t,i,s,o){const l=new _n(0);let u=s===!0?0:1,h,p,m=null,_=0,v=null;function E(x,A){let O=!1,k=A.isScene===!0?A.background:null;k&&k.isTexture&&(k=e.get(k));const D=r.xr,N=D.getSession&&D.getSession();N&&N.environmentBlendMode==="additive"&&(k=null),k===null?w(l,u):k&&k.isColor&&(w(k,1),O=!0),(r.autoClear||O)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),k&&(k.isCubeTexture||k.mapping===Z1)?(p===void 0&&(p=new bn(new Ma(1,1,1),new ah({name:"BackgroundCubeMaterial",uniforms:x1(Xd.cube.uniforms),vertexShader:Xd.cube.vertexShader,fragmentShader:Xd.cube.fragmentShader,side:Nc,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(F,z,V){this.matrixWorld.copyPosition(V.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(p)),p.material.uniforms.envMap.value=k,p.material.uniforms.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,(m!==k||_!==k.version||v!==r.toneMapping)&&(p.material.needsUpdate=!0,m=k,_=k.version,v=r.toneMapping),p.layers.enableAll(),x.unshift(p,p.geometry,p.material,0,0,null)):k&&k.isTexture&&(h===void 0&&(h=new bn(new lg(2,2),new ah({name:"BackgroundMaterial",uniforms:x1(Xd.background.uniforms),vertexShader:Xd.background.vertexShader,fragmentShader:Xd.background.fragmentShader,side:Jg,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(h)),h.material.uniforms.t2D.value=k,k.matrixAutoUpdate===!0&&k.updateMatrix(),h.material.uniforms.uvTransform.value.copy(k.matrix),(m!==k||_!==k.version||v!==r.toneMapping)&&(h.material.needsUpdate=!0,m=k,_=k.version,v=r.toneMapping),h.layers.enableAll(),x.unshift(h,h.geometry,h.material,0,0,null))}function w(x,A){t.buffers.color.setClear(x.r,x.g,x.b,A,o)}return{getClearColor:function(){return l},setClearColor:function(x,A=1){l.set(x),u=A,w(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(x){u=x,w(l,u)},render:E}}function $fe(r,e,t,i){const s=r.getParameter(34921),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),l=i.isWebGL2||o!==null,u={},h=A(null);let p=h,m=!1;function _(ae,he,ge,Ie,j){let te=!1;if(l){const q=x(Ie,ge,he);p!==q&&(p=q,E(p.object)),te=O(ae,Ie,ge,j),te&&k(ae,Ie,ge,j)}else{const q=he.wireframe===!0;(p.geometry!==Ie.id||p.program!==ge.id||p.wireframe!==q)&&(p.geometry=Ie.id,p.program=ge.id,p.wireframe=q,te=!0)}j!==null&&t.update(j,34963),(te||m)&&(m=!1,U(ae,he,ge,Ie),j!==null&&r.bindBuffer(34963,t.get(j).buffer))}function v(){return i.isWebGL2?r.createVertexArray():o.createVertexArrayOES()}function E(ae){return i.isWebGL2?r.bindVertexArray(ae):o.bindVertexArrayOES(ae)}function w(ae){return i.isWebGL2?r.deleteVertexArray(ae):o.deleteVertexArrayOES(ae)}function x(ae,he,ge){const Ie=ge.wireframe===!0;let j=u[ae.id];j===void 0&&(j={},u[ae.id]=j);let te=j[he.id];te===void 0&&(te={},j[he.id]=te);let q=te[Ie];return q===void 0&&(q=A(v()),te[Ie]=q),q}function A(ae){const he=[],ge=[],Ie=[];for(let j=0;j<s;j++)he[j]=0,ge[j]=0,Ie[j]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:he,enabledAttributes:ge,attributeDivisors:Ie,object:ae,attributes:{},index:null}}function O(ae,he,ge,Ie){const j=p.attributes,te=he.attributes;let q=0;const le=ge.getAttributes();for(const _e in le)if(le[_e].location>=0){const Le=j[_e];let xe=te[_e];if(xe===void 0&&(_e==="instanceMatrix"&&ae.instanceMatrix&&(xe=ae.instanceMatrix),_e==="instanceColor"&&ae.instanceColor&&(xe=ae.instanceColor)),Le===void 0||Le.attribute!==xe||xe&&Le.data!==xe.data)return!0;q++}return p.attributesNum!==q||p.index!==Ie}function k(ae,he,ge,Ie){const j={},te=he.attributes;let q=0;const le=ge.getAttributes();for(const _e in le)if(le[_e].location>=0){let Le=te[_e];Le===void 0&&(_e==="instanceMatrix"&&ae.instanceMatrix&&(Le=ae.instanceMatrix),_e==="instanceColor"&&ae.instanceColor&&(Le=ae.instanceColor));const xe={};xe.attribute=Le,Le&&Le.data&&(xe.data=Le.data),j[_e]=xe,q++}p.attributes=j,p.attributesNum=q,p.index=Ie}function D(){const ae=p.newAttributes;for(let he=0,ge=ae.length;he<ge;he++)ae[he]=0}function N(ae){F(ae,0)}function F(ae,he){const ge=p.newAttributes,Ie=p.enabledAttributes,j=p.attributeDivisors;ge[ae]=1,Ie[ae]===0&&(r.enableVertexAttribArray(ae),Ie[ae]=1),j[ae]!==he&&((i.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ae,he),j[ae]=he)}function z(){const ae=p.newAttributes,he=p.enabledAttributes;for(let ge=0,Ie=he.length;ge<Ie;ge++)he[ge]!==ae[ge]&&(r.disableVertexAttribArray(ge),he[ge]=0)}function V(ae,he,ge,Ie,j,te){i.isWebGL2===!0&&(ge===5124||ge===5125)?r.vertexAttribIPointer(ae,he,ge,j,te):r.vertexAttribPointer(ae,he,ge,Ie,j,te)}function U(ae,he,ge,Ie){if(i.isWebGL2===!1&&(ae.isInstancedMesh||Ie.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;D();const j=Ie.attributes,te=ge.getAttributes(),q=he.defaultAttributeValues;for(const le in te){const _e=te[le];if(_e.location>=0){let Le=j[le];if(Le===void 0&&(le==="instanceMatrix"&&ae.instanceMatrix&&(Le=ae.instanceMatrix),le==="instanceColor"&&ae.instanceColor&&(Le=ae.instanceColor)),Le!==void 0){const xe=Le.normalized,Ve=Le.itemSize,Re=t.get(Le);if(Re===void 0)continue;const Ze=Re.buffer,et=Re.type,ct=Re.bytesPerElement;if(Le.isInterleavedBufferAttribute){const rt=Le.data,Ne=rt.stride,we=Le.offset;if(rt.isInstancedInterleavedBuffer){for(let ze=0;ze<_e.locationSize;ze++)F(_e.location+ze,rt.meshPerAttribute);ae.isInstancedMesh!==!0&&Ie._maxInstanceCount===void 0&&(Ie._maxInstanceCount=rt.meshPerAttribute*rt.count)}else for(let ze=0;ze<_e.locationSize;ze++)N(_e.location+ze);r.bindBuffer(34962,Ze);for(let ze=0;ze<_e.locationSize;ze++)V(_e.location+ze,Ve/_e.locationSize,et,xe,Ne*ct,(we+Ve/_e.locationSize*ze)*ct)}else{if(Le.isInstancedBufferAttribute){for(let rt=0;rt<_e.locationSize;rt++)F(_e.location+rt,Le.meshPerAttribute);ae.isInstancedMesh!==!0&&Ie._maxInstanceCount===void 0&&(Ie._maxInstanceCount=Le.meshPerAttribute*Le.count)}else for(let rt=0;rt<_e.locationSize;rt++)N(_e.location+rt);r.bindBuffer(34962,Ze);for(let rt=0;rt<_e.locationSize;rt++)V(_e.location+rt,Ve/_e.locationSize,et,xe,Ve*ct,Ve/_e.locationSize*rt*ct)}}else if(q!==void 0){const xe=q[le];if(xe!==void 0)switch(xe.length){case 2:r.vertexAttrib2fv(_e.location,xe);break;case 3:r.vertexAttrib3fv(_e.location,xe);break;case 4:r.vertexAttrib4fv(_e.location,xe);break;default:r.vertexAttrib1fv(_e.location,xe)}}}}z()}function ee(){se();for(const ae in u){const he=u[ae];for(const ge in he){const Ie=he[ge];for(const j in Ie)w(Ie[j].object),delete Ie[j];delete he[ge]}delete u[ae]}}function ne(ae){if(u[ae.id]===void 0)return;const he=u[ae.id];for(const ge in he){const Ie=he[ge];for(const j in Ie)w(Ie[j].object),delete Ie[j];delete he[ge]}delete u[ae.id]}function ie(ae){for(const he in u){const ge=u[he];if(ge[ae.id]===void 0)continue;const Ie=ge[ae.id];for(const j in Ie)w(Ie[j].object),delete Ie[j];delete ge[ae.id]}}function se(){fe(),m=!0,p!==h&&(p=h,E(p.object))}function fe(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:_,reset:se,resetDefaultState:fe,dispose:ee,releaseStatesOfGeometry:ne,releaseStatesOfProgram:ie,initAttributes:D,enableAttribute:N,disableUnusedAttributes:z}}function Sfe(r,e,t,i){const s=i.isWebGL2;let o;function l(p){o=p}function u(p,m){r.drawArrays(o,p,m),t.update(m,o,1)}function h(p,m,_){if(_===0)return;let v,E;if(s)v=r,E="drawArraysInstanced";else if(v=e.get("ANGLE_instanced_arrays"),E="drawArraysInstancedANGLE",v===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[E](o,p,m,_),t.update(m,o,_)}this.setMode=l,this.render=u,this.renderInstances=h}function wfe(r,e,t){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const V=e.get("EXT_texture_filter_anisotropic");i=r.getParameter(V.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(V){if(V==="highp"){if(r.getShaderPrecisionFormat(35633,36338).precision>0&&r.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";V="mediump"}return V==="mediump"&&r.getShaderPrecisionFormat(35633,36337).precision>0&&r.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const l=typeof WebGL2RenderingContext<"u"&&r instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&r instanceof WebGL2ComputeRenderingContext;let u=t.precision!==void 0?t.precision:"highp";const h=o(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const p=l||e.has("WEBGL_draw_buffers"),m=t.logarithmicDepthBuffer===!0,_=r.getParameter(34930),v=r.getParameter(35660),E=r.getParameter(3379),w=r.getParameter(34076),x=r.getParameter(34921),A=r.getParameter(36347),O=r.getParameter(36348),k=r.getParameter(36349),D=v>0,N=l||e.has("OES_texture_float"),F=D&&N,z=l?r.getParameter(36183):0;return{isWebGL2:l,drawBuffers:p,getMaxAnisotropy:s,getMaxPrecision:o,precision:u,logarithmicDepthBuffer:m,maxTextures:_,maxVertexTextures:v,maxTextureSize:E,maxCubemapSize:w,maxAttributes:x,maxVertexUniforms:A,maxVaryings:O,maxFragmentUniforms:k,vertexTextures:D,floatFragmentTextures:N,floatVertexTextures:F,maxSamples:z}}function xfe(r){const e=this;let t=null,i=0,s=!1,o=!1;const l=new L_,u=new Jd,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(_,v,E){const w=_.length!==0||v||i!==0||s;return s=v,t=m(_,E,0),i=_.length,w},this.beginShadows=function(){o=!0,m(null)},this.endShadows=function(){o=!1,p()},this.setState=function(_,v,E){const w=_.clippingPlanes,x=_.clipIntersection,A=_.clipShadows,O=r.get(_);if(!s||w===null||w.length===0||o&&!A)o?m(null):p();else{const k=o?0:i,D=k*4;let N=O.clippingState||null;h.value=N,N=m(w,v,D,E);for(let F=0;F!==D;++F)N[F]=t[F];O.clippingState=N,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=k}};function p(){h.value!==t&&(h.value=t,h.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function m(_,v,E,w){const x=_!==null?_.length:0;let A=null;if(x!==0){if(A=h.value,w!==!0||A===null){const O=E+x*4,k=v.matrixWorldInverse;u.getNormalMatrix(k),(A===null||A.length<O)&&(A=new Float32Array(O));for(let D=0,N=E;D!==x;++D,N+=4)l.copy(_[D]).applyMatrix4(k,u),l.normal.toArray(A,N),A[N+3]=l.constant}h.value=A,h.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,A}}function Cfe(r){let e=new WeakMap;function t(l,u){return u===DS?l.mapping=pv:u===BS&&(l.mapping=fv),l}function i(l){if(l&&l.isTexture&&l.isRenderTargetTexture===!1){const u=l.mapping;if(u===DS||u===BS)if(e.has(l)){const h=e.get(l).texture;return t(h,l.mapping)}else{const h=l.image;if(h&&h.height>0){const p=new B9(h.height/2);return p.fromEquirectangularTexture(r,l),e.set(l,p),l.addEventListener("dispose",s),t(p.texture,l.mapping)}else return null}}return l}function s(l){const u=l.target;u.removeEventListener("dispose",s);const h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}class jg extends eE{constructor(e=-1,t=1,i=1,s=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=i-e,l=i+e,u=s+t,h=s-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=p*this.view.offsetX,l=o+p*this.view.width,u-=m*this.view.offsetY,h=u-m*this.view.height}this.projectionMatrix.makeOrthographic(o,l,u,h,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const KT=4,tH=[.125,.215,.35,.446,.526,.582],Ey=20,kO=new jg,nH=new _n;let OO=null;const _y=(1+Math.sqrt(5))/2,ST=1/_y,rH=[new Te(1,1,1),new Te(-1,1,1),new Te(1,1,-1),new Te(-1,1,-1),new Te(0,_y,ST),new Te(0,_y,-ST),new Te(ST,0,_y),new Te(-ST,0,_y),new Te(_y,ST,0),new Te(-_y,ST,0)];class v2{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){OO=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,i,s,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=oH(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=sH(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(OO),e.scissorTest=!1,TC(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===pv||e.mapping===fv?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),OO=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Po,minFilter:Po,generateMipmaps:!1,type:tb,format:Rp,encoding:mm,depthBuffer:!1},s=iH(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=iH(e,t,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Mfe(o)),this._blurMaterial=Afe(o,e,t)}return s}_compileMaterial(e){const t=new bn(this._lodPlanes[0],e);this._renderer.compile(t,kO)}_sceneToCubeUV(e,t,i,s){const o=new So(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,p=h.autoClear,m=h.toneMapping;h.getClearColor(nH),h.toneMapping=og,h.autoClear=!1;const _=new dg({name:"PMREM.Background",side:Nc,depthWrite:!1,depthTest:!1}),v=new bn(new Ma,_);let E=!1;const w=e.background;w?w.isColor&&(_.color.copy(w),e.background=null,E=!0):(_.color.copy(nH),E=!0);for(let x=0;x<6;x++){const A=x%3;A===0?(o.up.set(0,l[x],0),o.lookAt(u[x],0,0)):A===1?(o.up.set(0,0,l[x]),o.lookAt(0,u[x],0)):(o.up.set(0,l[x],0),o.lookAt(0,0,u[x]));const O=this._cubeSize;TC(s,A*O,x>2?O:0,O,O),h.setRenderTarget(s),E&&h.render(v,o),h.render(e,o)}v.geometry.dispose(),v.material.dispose(),h.toneMapping=m,h.autoClear=p,e.background=w}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===pv||e.mapping===fv;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=oH()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=sH());const o=s?this._cubemapMaterial:this._equirectMaterial,l=new bn(this._lodPlanes[0],o),u=o.uniforms;u.envMap.value=e;const h=this._cubeSize;TC(t,0,0,3*h,2*h),i.setRenderTarget(t),i.render(l,kO)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=rH[(s-1)%rH.length];this._blur(e,s-1,s,o,l)}t.autoClear=i}_blur(e,t,i,s,o){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,i,s,"latitudinal",o),this._halfBlur(l,e,i,i,s,"longitudinal",o)}_halfBlur(e,t,i,s,o,l,u){const h=this._renderer,p=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,_=new bn(this._lodPlanes[s],p),v=p.uniforms,E=this._sizeLods[i]-1,w=isFinite(o)?Math.PI/(2*E):2*Math.PI/(2*Ey-1),x=o/w,A=isFinite(o)?1+Math.floor(m*x):Ey;A>Ey&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${Ey}`);const O=[];let k=0;for(let V=0;V<Ey;++V){const U=V/x,ee=Math.exp(-U*U/2);O.push(ee),V===0?k+=ee:V<A&&(k+=2*ee)}for(let V=0;V<O.length;V++)O[V]=O[V]/k;v.envMap.value=e.texture,v.samples.value=A,v.weights.value=O,v.latitudinal.value=l==="latitudinal",u&&(v.poleAxis.value=u);const{_lodMax:D}=this;v.dTheta.value=w,v.mipInt.value=D-i;const N=this._sizeLods[s],F=3*N*(s>D-KT?s-D+KT:0),z=4*(this._cubeSize-N);TC(t,F,z,3*N,2*N),h.setRenderTarget(t),h.render(_,kO)}}function Mfe(r){const e=[],t=[],i=[];let s=r;const o=r-KT+1+tH.length;for(let l=0;l<o;l++){const u=Math.pow(2,s);t.push(u);let h=1/u;l>r-KT?h=tH[l-r+KT-1]:l===0&&(h=0),i.push(h);const p=1/(u-2),m=-p,_=1+p,v=[m,m,_,m,_,_,m,m,_,_,m,_],E=6,w=6,x=3,A=2,O=1,k=new Float32Array(x*w*E),D=new Float32Array(A*w*E),N=new Float32Array(O*w*E);for(let z=0;z<E;z++){const V=z%3*2/3-1,U=z>2?0:-1,ee=[V,U,0,V+2/3,U,0,V+2/3,U+1,0,V,U,0,V+2/3,U+1,0,V,U+1,0];k.set(ee,x*w*z),D.set(v,A*w*z);const ne=[z,z,z,z,z,z];N.set(ne,O*w*z)}const F=new Ar;F.setAttribute("position",new xs(k,x)),F.setAttribute("uv",new xs(D,A)),F.setAttribute("faceIndex",new xs(N,O)),e.push(F),s>KT&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function iH(r,e,t){const i=new iu(r,e,t);return i.texture.mapping=Z1,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function TC(r,e,t,i,s){r.viewport.set(e,t,i,s),r.scissor.set(e,t,i,s)}function Afe(r,e,t){const i=new Float32Array(Ey),s=new Te(0,1,0);return new ah({name:"SphericalGaussianBlur",defines:{n:Ey,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:KB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Zd,depthTest:!1,depthWrite:!1})}function sH(){return new ah({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:KB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Zd,depthTest:!1,depthWrite:!1})}function oH(){return new ah({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:KB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Zd,depthTest:!1,depthWrite:!1})}function KB(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Ife(r){let e=new WeakMap,t=null;function i(u){if(u&&u.isTexture){const h=u.mapping,p=h===DS||h===BS,m=h===pv||h===fv;if(p||m)if(u.isRenderTargetTexture&&u.needsPMREMUpdate===!0){u.needsPMREMUpdate=!1;let _=e.get(u);return t===null&&(t=new v2(r)),_=p?t.fromEquirectangular(u,_):t.fromCubemap(u,_),e.set(u,_),_.texture}else{if(e.has(u))return e.get(u).texture;{const _=u.image;if(p&&_&&_.height>0||m&&_&&s(_)){t===null&&(t=new v2(r));const v=p?t.fromEquirectangular(u):t.fromCubemap(u);return e.set(u,v),u.addEventListener("dispose",o),v.texture}else return null}}}return u}function s(u){let h=0;const p=6;for(let m=0;m<p;m++)u[m]!==void 0&&h++;return h===p}function o(u){const h=u.target;h.removeEventListener("dispose",o);const p=e.get(h);p!==void 0&&(e.delete(h),p.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:l}}function Rfe(r){const e={};function t(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=r.getExtension(i)}return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const s=t(i);return s===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function kfe(r,e,t,i){const s={},o=new WeakMap;function l(_){const v=_.target;v.index!==null&&e.remove(v.index);for(const w in v.attributes)e.remove(v.attributes[w]);v.removeEventListener("dispose",l),delete s[v.id];const E=o.get(v);E&&(e.remove(E),o.delete(v)),i.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function u(_,v){return s[v.id]===!0||(v.addEventListener("dispose",l),s[v.id]=!0,t.memory.geometries++),v}function h(_){const v=_.attributes;for(const w in v)e.update(v[w],34962);const E=_.morphAttributes;for(const w in E){const x=E[w];for(let A=0,O=x.length;A<O;A++)e.update(x[A],34962)}}function p(_){const v=[],E=_.index,w=_.attributes.position;let x=0;if(E!==null){const k=E.array;x=E.version;for(let D=0,N=k.length;D<N;D+=3){const F=k[D+0],z=k[D+1],V=k[D+2];v.push(F,z,z,V,V,F)}}else{const k=w.array;x=w.version;for(let D=0,N=k.length/3-1;D<N;D+=3){const F=D+0,z=D+1,V=D+2;v.push(F,z,z,V,V,F)}}const A=new(L9(v)?YB:XB)(v,1);A.version=x;const O=o.get(_);O&&e.remove(O),o.set(_,A)}function m(_){const v=o.get(_);if(v){const E=_.index;E!==null&&v.version<E.version&&p(_)}else p(_);return o.get(_)}return{get:u,update:h,getWireframeAttribute:m}}function Ofe(r,e,t,i){const s=i.isWebGL2;let o;function l(v){o=v}let u,h;function p(v){u=v.type,h=v.bytesPerElement}function m(v,E){r.drawElements(o,E,u,v*h),t.update(E,o,1)}function _(v,E,w){if(w===0)return;let x,A;if(s)x=r,A="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),A="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[A](o,E,u,v*h,w),t.update(E,o,w)}this.setMode=l,this.setIndex=p,this.render=m,this.renderInstances=_}function Lfe(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,l,u){switch(t.calls++,l){case 4:t.triangles+=u*(o/3);break;case 1:t.lines+=u*(o/2);break;case 3:t.lines+=u*(o-1);break;case 2:t.lines+=u*o;break;case 0:t.points+=u*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function s(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function Nfe(r,e){return r[0]-e[0]}function Dfe(r,e){return Math.abs(e[1])-Math.abs(r[1])}function LO(r,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Uint8Array?t=255:i instanceof Uint16Array?t=65535:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),r.divideScalar(t)}function Bfe(r,e,t){const i={},s=new Float32Array(8),o=new WeakMap,l=new xi,u=[];for(let p=0;p<8;p++)u[p]=[p,0];function h(p,m,_,v){const E=p.morphTargetInfluences;if(e.isWebGL2===!0){const w=m.morphAttributes.position||m.morphAttributes.normal||m.morphAttributes.color,x=w!==void 0?w.length:0;let A=o.get(m);if(A===void 0||A.count!==x){let D=function(){ae.dispose(),o.delete(m),m.removeEventListener("dispose",D)};A!==void 0&&A.texture.dispose();const N=m.morphAttributes.position!==void 0,F=m.morphAttributes.normal!==void 0,z=m.morphAttributes.color!==void 0,V=m.morphAttributes.position||[],U=m.morphAttributes.normal||[],ee=m.morphAttributes.color||[];let ne=0;N===!0&&(ne=1),F===!0&&(ne=2),z===!0&&(ne=3);let ie=m.attributes.position.count*ne,se=1;ie>e.maxTextureSize&&(se=Math.ceil(ie/e.maxTextureSize),ie=e.maxTextureSize);const fe=new Float32Array(ie*se*4*x),ae=new bw(fe,ie,se,x);ae.type=Hg,ae.needsUpdate=!0;const he=ne*4;for(let ge=0;ge<x;ge++){const Ie=V[ge],j=U[ge],te=ee[ge],q=ie*se*4*ge;for(let le=0;le<Ie.count;le++){const _e=le*he;N===!0&&(l.fromBufferAttribute(Ie,le),Ie.normalized===!0&&LO(l,Ie),fe[q+_e+0]=l.x,fe[q+_e+1]=l.y,fe[q+_e+2]=l.z,fe[q+_e+3]=0),F===!0&&(l.fromBufferAttribute(j,le),j.normalized===!0&&LO(l,j),fe[q+_e+4]=l.x,fe[q+_e+5]=l.y,fe[q+_e+6]=l.z,fe[q+_e+7]=0),z===!0&&(l.fromBufferAttribute(te,le),te.normalized===!0&&LO(l,te),fe[q+_e+8]=l.x,fe[q+_e+9]=l.y,fe[q+_e+10]=l.z,fe[q+_e+11]=te.itemSize===4?l.w:1)}}A={count:x,texture:ae,size:new Ot(ie,se)},o.set(m,A),m.addEventListener("dispose",D)}let O=0;for(let D=0;D<E.length;D++)O+=E[D];const k=m.morphTargetsRelative?1:1-O;v.getUniforms().setValue(r,"morphTargetBaseInfluence",k),v.getUniforms().setValue(r,"morphTargetInfluences",E),v.getUniforms().setValue(r,"morphTargetsTexture",A.texture,t),v.getUniforms().setValue(r,"morphTargetsTextureSize",A.size)}else{const w=E===void 0?0:E.length;let x=i[m.id];if(x===void 0||x.length!==w){x=[];for(let N=0;N<w;N++)x[N]=[N,0];i[m.id]=x}for(let N=0;N<w;N++){const F=x[N];F[0]=N,F[1]=E[N]}x.sort(Dfe);for(let N=0;N<8;N++)N<w&&x[N][1]?(u[N][0]=x[N][0],u[N][1]=x[N][1]):(u[N][0]=Number.MAX_SAFE_INTEGER,u[N][1]=0);u.sort(Nfe);const A=m.morphAttributes.position,O=m.morphAttributes.normal;let k=0;for(let N=0;N<8;N++){const F=u[N],z=F[0],V=F[1];z!==Number.MAX_SAFE_INTEGER&&V?(A&&m.getAttribute("morphTarget"+N)!==A[z]&&m.setAttribute("morphTarget"+N,A[z]),O&&m.getAttribute("morphNormal"+N)!==O[z]&&m.setAttribute("morphNormal"+N,O[z]),s[N]=V,k+=V):(A&&m.hasAttribute("morphTarget"+N)===!0&&m.deleteAttribute("morphTarget"+N),O&&m.hasAttribute("morphNormal"+N)===!0&&m.deleteAttribute("morphNormal"+N),s[N]=0)}const D=m.morphTargetsRelative?1:1-k;v.getUniforms().setValue(r,"morphTargetBaseInfluence",D),v.getUniforms().setValue(r,"morphTargetInfluences",s)}}return{update:h}}function Pfe(r,e,t,i){let s=new WeakMap;function o(h){const p=i.render.frame,m=h.geometry,_=e.get(h,m);return s.get(_)!==p&&(e.update(_),s.set(_,p)),h.isInstancedMesh&&(h.hasEventListener("dispose",u)===!1&&h.addEventListener("dispose",u),t.update(h.instanceMatrix,34962),h.instanceColor!==null&&t.update(h.instanceColor,34962)),_}function l(){s=new WeakMap}function u(h){const p=h.target;p.removeEventListener("dispose",u),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:o,dispose:l}}const F9=new Rl,U9=new bw,z9=new YI,H9=new $w,aH=[],lH=[],uH=new Float32Array(16),cH=new Float32Array(9),hH=new Float32Array(4);function tE(r,e,t){const i=r[0];if(i<=0||i>0)return r;const s=e*t;let o=aH[s];if(o===void 0&&(o=new Float32Array(s),aH[s]=o),e!==0){i.toArray(o,0);for(let l=1,u=0;l!==e;++l)u+=t,r[l].toArray(o,u)}return o}function tp(r,e){if(r.length!==e.length)return!1;for(let t=0,i=r.length;t<i;t++)if(r[t]!==e[t])return!1;return!0}function np(r,e){for(let t=0,i=e.length;t<i;t++)r[t]=e[t]}function JI(r,e){let t=lH[e];t===void 0&&(t=new Int32Array(e),lH[e]=t);for(let i=0;i!==e;++i)t[i]=r.allocateTextureUnit();return t}function Ffe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function Ufe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(tp(t,e))return;r.uniform2fv(this.addr,e),np(t,e)}}function zfe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(tp(t,e))return;r.uniform3fv(this.addr,e),np(t,e)}}function Hfe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(tp(t,e))return;r.uniform4fv(this.addr,e),np(t,e)}}function Gfe(r,e){const t=this.cache,i=e.elements;if(i===void 0){if(tp(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),np(t,e)}else{if(tp(t,i))return;hH.set(i),r.uniformMatrix2fv(this.addr,!1,hH),np(t,i)}}function Wfe(r,e){const t=this.cache,i=e.elements;if(i===void 0){if(tp(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),np(t,e)}else{if(tp(t,i))return;cH.set(i),r.uniformMatrix3fv(this.addr,!1,cH),np(t,i)}}function Vfe(r,e){const t=this.cache,i=e.elements;if(i===void 0){if(tp(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),np(t,e)}else{if(tp(t,i))return;uH.set(i),r.uniformMatrix4fv(this.addr,!1,uH),np(t,i)}}function jfe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function Xfe(r,e){const t=this.cache;tp(t,e)||(r.uniform2iv(this.addr,e),np(t,e))}function Yfe(r,e){const t=this.cache;tp(t,e)||(r.uniform3iv(this.addr,e),np(t,e))}function Kfe(r,e){const t=this.cache;tp(t,e)||(r.uniform4iv(this.addr,e),np(t,e))}function Jfe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function Qfe(r,e){const t=this.cache;tp(t,e)||(r.uniform2uiv(this.addr,e),np(t,e))}function qfe(r,e){const t=this.cache;tp(t,e)||(r.uniform3uiv(this.addr,e),np(t,e))}function Zfe(r,e){const t=this.cache;tp(t,e)||(r.uniform4uiv(this.addr,e),np(t,e))}function eme(r,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),t.setTexture2D(e||F9,s)}function tme(r,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||z9,s)}function nme(r,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||H9,s)}function rme(r,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(r.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||U9,s)}function ime(r){switch(r){case 5126:return Ffe;case 35664:return Ufe;case 35665:return zfe;case 35666:return Hfe;case 35674:return Gfe;case 35675:return Wfe;case 35676:return Vfe;case 5124:case 35670:return jfe;case 35667:case 35671:return Xfe;case 35668:case 35672:return Yfe;case 35669:case 35673:return Kfe;case 5125:return Jfe;case 36294:return Qfe;case 36295:return qfe;case 36296:return Zfe;case 35678:case 36198:case 36298:case 36306:case 35682:return eme;case 35679:case 36299:case 36307:return tme;case 35680:case 36300:case 36308:case 36293:return nme;case 36289:case 36303:case 36311:case 36292:return rme}}function sme(r,e){r.uniform1fv(this.addr,e)}function ome(r,e){const t=tE(e,this.size,2);r.uniform2fv(this.addr,t)}function ame(r,e){const t=tE(e,this.size,3);r.uniform3fv(this.addr,t)}function lme(r,e){const t=tE(e,this.size,4);r.uniform4fv(this.addr,t)}function ume(r,e){const t=tE(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function cme(r,e){const t=tE(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function hme(r,e){const t=tE(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function dme(r,e){r.uniform1iv(this.addr,e)}function pme(r,e){r.uniform2iv(this.addr,e)}function fme(r,e){r.uniform3iv(this.addr,e)}function mme(r,e){r.uniform4iv(this.addr,e)}function gme(r,e){r.uniform1uiv(this.addr,e)}function _me(r,e){r.uniform2uiv(this.addr,e)}function vme(r,e){r.uniform3uiv(this.addr,e)}function yme(r,e){r.uniform4uiv(this.addr,e)}function bme(r,e,t){const i=e.length,s=JI(t,i);r.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTexture2D(e[o]||F9,s[o])}function Tme(r,e,t){const i=e.length,s=JI(t,i);r.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTexture3D(e[o]||z9,s[o])}function Eme(r,e,t){const i=e.length,s=JI(t,i);r.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTextureCube(e[o]||H9,s[o])}function $me(r,e,t){const i=e.length,s=JI(t,i);r.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||U9,s[o])}function Sme(r){switch(r){case 5126:return sme;case 35664:return ome;case 35665:return ame;case 35666:return lme;case 35674:return ume;case 35675:return cme;case 35676:return hme;case 5124:case 35670:return dme;case 35667:case 35671:return pme;case 35668:case 35672:return fme;case 35669:case 35673:return mme;case 5125:return gme;case 36294:return _me;case 36295:return vme;case 36296:return yme;case 35678:case 36198:case 36298:case 36306:case 35682:return bme;case 35679:case 36299:case 36307:return Tme;case 35680:case 36300:case 36308:case 36293:return Eme;case 36289:case 36303:case 36311:case 36292:return $me}}class wme{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=ime(t.type)}}class xme{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=Sme(t.type)}}class Cme{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let o=0,l=s.length;o!==l;++o){const u=s[o];u.setValue(e,t[u.id],i)}}}const NO=/(\w+)(\])?(\[|\.)?/g;function dH(r,e){r.seq.push(e),r.map[e.id]=e}function Mme(r,e,t){const i=r.name,s=i.length;for(NO.lastIndex=0;;){const o=NO.exec(i),l=NO.lastIndex;let u=o[1];const h=o[2]==="]",p=o[3];if(h&&(u=u|0),p===void 0||p==="["&&l+2===s){dH(t,p===void 0?new wme(u,r,e):new xme(u,r,e));break}else{let m=t.map[u];m===void 0&&(m=new Cme(u),dH(t,m)),t=m}}}class RM{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let s=0;s<i;++s){const o=e.getActiveUniform(t,s),l=e.getUniformLocation(t,o.name);Mme(o,l,this)}}setValue(e,t,i,s){const o=this.map[t];o!==void 0&&o.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let o=0,l=t.length;o!==l;++o){const u=t[o],h=i[u.id];h.needsUpdate!==!1&&u.setValue(e,h.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,o=e.length;s!==o;++s){const l=e[s];l.id in t&&i.push(l)}return i}}function pH(r,e,t){const i=r.createShader(e);return r.shaderSource(i,t),r.compileShader(i),i}let Ame=0;function Ime(r,e){const t=r.split(`
`),i=[],s=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let l=s;l<o;l++){const u=l+1;i.push(`${u===e?">":" "} ${u}: ${t[l]}`)}return i.join(`
`)}function Rme(r){switch(r){case mm:return["Linear","( value )"];case yi:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",r),["Linear","( value )"]}}function fH(r,e,t){const i=r.getShaderParameter(e,35713),s=r.getShaderInfoLog(e).trim();if(i&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const l=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+Ime(r.getShaderSource(e),l)}else return s}function kme(r,e){const t=Rme(e);return"vec4 "+r+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Ome(r,e){let t;switch(e){case l9:t="Linear";break;case u9:t="Reinhard";break;case c9:t="OptimizedCineon";break;case zB:t="ACESFilmic";break;case h9:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Lme(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(P$).join(`
`)}function Nme(r){const e=[];for(const t in r){const i=r[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Dme(r,e){const t={},i=r.getProgramParameter(e,35721);for(let s=0;s<i;s++){const o=r.getActiveAttrib(e,s),l=o.name;let u=1;o.type===35674&&(u=2),o.type===35675&&(u=3),o.type===35676&&(u=4),t[l]={type:o.type,location:r.getAttribLocation(e,l),locationSize:u}}return t}function P$(r){return r!==""}function mH(r,e){return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function gH(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Bme=/^[ \t]*#include +<([\w\d./]+)>/gm;function y2(r){return r.replace(Bme,Pme)}function Pme(r,e){const t=vi[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return y2(t)}const Fme=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Ume=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _H(r){return r.replace(Ume,G9).replace(Fme,zme)}function zme(r,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),G9(r,e,t,i)}function G9(r,e,t,i){let s="";for(let o=parseInt(e);o<parseInt(t);o++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return s}function vH(r){let e="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Hme(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===GI?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===nS?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Ry&&(e="SHADOWMAP_TYPE_VSM"),e}function Gme(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case pv:case fv:e="ENVMAP_TYPE_CUBE";break;case Z1:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Wme(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case fv:e="ENVMAP_MODE_REFRACTION";break}return e}function Vme(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case yw:e="ENVMAP_BLENDING_MULTIPLY";break;case o9:e="ENVMAP_BLENDING_MIX";break;case a9:e="ENVMAP_BLENDING_ADD";break}return e}function jme(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function Xme(r,e,t,i){const s=r.getContext(),o=t.defines;let l=t.vertexShader,u=t.fragmentShader;const h=Hme(t),p=Gme(t),m=Wme(t),_=Vme(t),v=jme(t),E=t.isWebGL2?"":Lme(t),w=Nme(o),x=s.createProgram();let A,O,k=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(A=[w].filter(P$).join(`
`),A.length>0&&(A+=`
`),O=[E,w].filter(P$).join(`
`),O.length>0&&(O+=`
`)):(A=[vH(t),"#define SHADER_NAME "+t.shaderName,w,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(P$).join(`
`),O=[E,vH(t),"#define SHADER_NAME "+t.shaderName,w,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+m:"",t.envMap?"#define "+_:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==og?"#define TONE_MAPPING":"",t.toneMapping!==og?vi.tonemapping_pars_fragment:"",t.toneMapping!==og?Ome("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",vi.encodings_pars_fragment,kme("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(P$).join(`
`)),l=y2(l),l=mH(l,t),l=gH(l,t),u=y2(u),u=mH(u,t),u=gH(u,t),l=_H(l),u=_H(u),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(k=`#version 300 es
`,A=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,O=["#define varying in",t.glslVersion===g2?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===g2?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+O);const D=k+A+l,N=k+O+u,F=pH(s,35633,D),z=pH(s,35632,N);if(s.attachShader(x,F),s.attachShader(x,z),t.index0AttributeName!==void 0?s.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(x,0,"position"),s.linkProgram(x),r.debug.checkShaderErrors){const ee=s.getProgramInfoLog(x).trim(),ne=s.getShaderInfoLog(F).trim(),ie=s.getShaderInfoLog(z).trim();let se=!0,fe=!0;if(s.getProgramParameter(x,35714)===!1){se=!1;const ae=fH(s,F,"vertex"),he=fH(s,z,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(x,35715)+`

Program Info Log: `+ee+`
`+ae+`
`+he)}else ee!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ee):(ne===""||ie==="")&&(fe=!1);fe&&(this.diagnostics={runnable:se,programLog:ee,vertexShader:{log:ne,prefix:A},fragmentShader:{log:ie,prefix:O}})}s.deleteShader(F),s.deleteShader(z);let V;this.getUniforms=function(){return V===void 0&&(V=new RM(s,x)),V};let U;return this.getAttributes=function(){return U===void 0&&(U=Dme(s,x)),U},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(x),this.program=void 0},this.name=t.shaderName,this.id=Ame++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=F,this.fragmentShader=z,this}let Yme=0;class Kme{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),o=this._getShaderStage(i),l=this._getShaderCacheForMaterial(e);return l.has(s)===!1&&(l.add(s),s.usedTimes++),l.has(o)===!1&&(l.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const i=new Jme(e);t.set(e,i)}return t.get(e)}}class Jme{constructor(e){this.id=Yme++,this.code=e,this.usedTimes=0}}function Qme(r,e,t,i,s,o,l){const u=new Gy,h=new Kme,p=[],m=s.isWebGL2,_=s.logarithmicDepthBuffer,v=s.vertexTextures;let E=s.precision;const w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(U,ee,ne,ie,se){const fe=ie.fog,ae=se.geometry,he=U.isMeshStandardMaterial?ie.environment:null,ge=(U.isMeshStandardMaterial?t:e).get(U.envMap||he),Ie=ge&&ge.mapping===Z1?ge.image.height:null,j=w[U.type];U.precision!==null&&(E=s.getMaxPrecision(U.precision),E!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",E,"instead."));const te=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,q=te!==void 0?te.length:0;let le=0;ae.morphAttributes.position!==void 0&&(le=1),ae.morphAttributes.normal!==void 0&&(le=2),ae.morphAttributes.color!==void 0&&(le=3);let _e,Le,xe,Ve;if(j){const rt=Xd[j];_e=rt.vertexShader,Le=rt.fragmentShader}else _e=U.vertexShader,Le=U.fragmentShader,h.update(U),xe=h.getVertexShaderID(U),Ve=h.getFragmentShaderID(U);const Re=r.getRenderTarget(),Ze=U.alphaTest>0,et=U.clearcoat>0,ct=U.iridescence>0;return{isWebGL2:m,shaderID:j,shaderName:U.type,vertexShader:_e,fragmentShader:Le,defines:U.defines,customVertexShaderID:xe,customFragmentShaderID:Ve,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:E,instancing:se.isInstancedMesh===!0,instancingColor:se.isInstancedMesh===!0&&se.instanceColor!==null,supportsVertexTextures:v,outputEncoding:Re===null?r.outputEncoding:Re.isXRRenderTarget===!0?Re.texture.encoding:mm,map:!!U.map,matcap:!!U.matcap,envMap:!!ge,envMapMode:ge&&ge.mapping,envMapCubeUVHeight:Ie,lightMap:!!U.lightMap,aoMap:!!U.aoMap,emissiveMap:!!U.emissiveMap,bumpMap:!!U.bumpMap,normalMap:!!U.normalMap,objectSpaceNormalMap:U.normalMapType===I9,tangentSpaceNormalMap:U.normalMapType===db,decodeVideoTexture:!!U.map&&U.map.isVideoTexture===!0&&U.map.encoding===yi,clearcoat:et,clearcoatMap:et&&!!U.clearcoatMap,clearcoatRoughnessMap:et&&!!U.clearcoatRoughnessMap,clearcoatNormalMap:et&&!!U.clearcoatNormalMap,iridescence:ct,iridescenceMap:ct&&!!U.iridescenceMap,iridescenceThicknessMap:ct&&!!U.iridescenceThicknessMap,displacementMap:!!U.displacementMap,roughnessMap:!!U.roughnessMap,metalnessMap:!!U.metalnessMap,specularMap:!!U.specularMap,specularIntensityMap:!!U.specularIntensityMap,specularColorMap:!!U.specularColorMap,opaque:U.transparent===!1&&U.blending===G_,alphaMap:!!U.alphaMap,alphaTest:Ze,gradientMap:!!U.gradientMap,sheen:U.sheen>0,sheenColorMap:!!U.sheenColorMap,sheenRoughnessMap:!!U.sheenRoughnessMap,transmission:U.transmission>0,transmissionMap:!!U.transmissionMap,thicknessMap:!!U.thicknessMap,combine:U.combine,vertexTangents:!!U.normalMap&&!!ae.attributes.tangent,vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,vertexUvs:!!U.map||!!U.bumpMap||!!U.normalMap||!!U.specularMap||!!U.alphaMap||!!U.emissiveMap||!!U.roughnessMap||!!U.metalnessMap||!!U.clearcoatMap||!!U.clearcoatRoughnessMap||!!U.clearcoatNormalMap||!!U.iridescenceMap||!!U.iridescenceThicknessMap||!!U.displacementMap||!!U.transmissionMap||!!U.thicknessMap||!!U.specularIntensityMap||!!U.specularColorMap||!!U.sheenColorMap||!!U.sheenRoughnessMap,uvsVertexOnly:!(U.map||U.bumpMap||U.normalMap||U.specularMap||U.alphaMap||U.emissiveMap||U.roughnessMap||U.metalnessMap||U.clearcoatNormalMap||U.iridescenceMap||U.iridescenceThicknessMap||U.transmission>0||U.transmissionMap||U.thicknessMap||U.specularIntensityMap||U.specularColorMap||U.sheen>0||U.sheenColorMap||U.sheenRoughnessMap)&&!!U.displacementMap,fog:!!fe,useFog:U.fog===!0,fogExp2:fe&&fe.isFogExp2,flatShading:!!U.flatShading,sizeAttenuation:U.sizeAttenuation,logarithmicDepthBuffer:_,skinning:se.isSkinnedMesh===!0,morphTargets:ae.morphAttributes.position!==void 0,morphNormals:ae.morphAttributes.normal!==void 0,morphColors:ae.morphAttributes.color!==void 0,morphTargetsCount:q,morphTextureStride:le,numDirLights:ee.directional.length,numPointLights:ee.point.length,numSpotLights:ee.spot.length,numRectAreaLights:ee.rectArea.length,numHemiLights:ee.hemi.length,numDirLightShadows:ee.directionalShadowMap.length,numPointLightShadows:ee.pointShadowMap.length,numSpotLightShadows:ee.spotShadowMap.length,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:U.dithering,shadowMapEnabled:r.shadowMap.enabled&&ne.length>0,shadowMapType:r.shadowMap.type,toneMapping:U.toneMapped?r.toneMapping:og,physicallyCorrectLights:r.physicallyCorrectLights,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===Kd,flipSided:U.side===Nc,useDepthPacking:!!U.depthPacking,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionDerivatives:U.extensions&&U.extensions.derivatives,extensionFragDepth:U.extensions&&U.extensions.fragDepth,extensionDrawBuffers:U.extensions&&U.extensions.drawBuffers,extensionShaderTextureLOD:U.extensions&&U.extensions.shaderTextureLOD,rendererExtensionFragDepth:m||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:m||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:m||i.has("EXT_shader_texture_lod"),customProgramCacheKey:U.customProgramCacheKey()}}function A(U){const ee=[];if(U.shaderID?ee.push(U.shaderID):(ee.push(U.customVertexShaderID),ee.push(U.customFragmentShaderID)),U.defines!==void 0)for(const ne in U.defines)ee.push(ne),ee.push(U.defines[ne]);return U.isRawShaderMaterial===!1&&(O(ee,U),k(ee,U),ee.push(r.outputEncoding)),ee.push(U.customProgramCacheKey),ee.join()}function O(U,ee){U.push(ee.precision),U.push(ee.outputEncoding),U.push(ee.envMapMode),U.push(ee.envMapCubeUVHeight),U.push(ee.combine),U.push(ee.vertexUvs),U.push(ee.fogExp2),U.push(ee.sizeAttenuation),U.push(ee.morphTargetsCount),U.push(ee.morphAttributeCount),U.push(ee.numDirLights),U.push(ee.numPointLights),U.push(ee.numSpotLights),U.push(ee.numHemiLights),U.push(ee.numRectAreaLights),U.push(ee.numDirLightShadows),U.push(ee.numPointLightShadows),U.push(ee.numSpotLightShadows),U.push(ee.shadowMapType),U.push(ee.toneMapping),U.push(ee.numClippingPlanes),U.push(ee.numClipIntersection),U.push(ee.depthPacking)}function k(U,ee){u.disableAll(),ee.isWebGL2&&u.enable(0),ee.supportsVertexTextures&&u.enable(1),ee.instancing&&u.enable(2),ee.instancingColor&&u.enable(3),ee.map&&u.enable(4),ee.matcap&&u.enable(5),ee.envMap&&u.enable(6),ee.lightMap&&u.enable(7),ee.aoMap&&u.enable(8),ee.emissiveMap&&u.enable(9),ee.bumpMap&&u.enable(10),ee.normalMap&&u.enable(11),ee.objectSpaceNormalMap&&u.enable(12),ee.tangentSpaceNormalMap&&u.enable(13),ee.clearcoat&&u.enable(14),ee.clearcoatMap&&u.enable(15),ee.clearcoatRoughnessMap&&u.enable(16),ee.clearcoatNormalMap&&u.enable(17),ee.iridescence&&u.enable(18),ee.iridescenceMap&&u.enable(19),ee.iridescenceThicknessMap&&u.enable(20),ee.displacementMap&&u.enable(21),ee.specularMap&&u.enable(22),ee.roughnessMap&&u.enable(23),ee.metalnessMap&&u.enable(24),ee.gradientMap&&u.enable(25),ee.alphaMap&&u.enable(26),ee.alphaTest&&u.enable(27),ee.vertexColors&&u.enable(28),ee.vertexAlphas&&u.enable(29),ee.vertexUvs&&u.enable(30),ee.vertexTangents&&u.enable(31),ee.uvsVertexOnly&&u.enable(32),ee.fog&&u.enable(33),U.push(u.mask),u.disableAll(),ee.useFog&&u.enable(0),ee.flatShading&&u.enable(1),ee.logarithmicDepthBuffer&&u.enable(2),ee.skinning&&u.enable(3),ee.morphTargets&&u.enable(4),ee.morphNormals&&u.enable(5),ee.morphColors&&u.enable(6),ee.premultipliedAlpha&&u.enable(7),ee.shadowMapEnabled&&u.enable(8),ee.physicallyCorrectLights&&u.enable(9),ee.doubleSided&&u.enable(10),ee.flipSided&&u.enable(11),ee.useDepthPacking&&u.enable(12),ee.dithering&&u.enable(13),ee.specularIntensityMap&&u.enable(14),ee.specularColorMap&&u.enable(15),ee.transmission&&u.enable(16),ee.transmissionMap&&u.enable(17),ee.thicknessMap&&u.enable(18),ee.sheen&&u.enable(19),ee.sheenColorMap&&u.enable(20),ee.sheenRoughnessMap&&u.enable(21),ee.decodeVideoTexture&&u.enable(22),ee.opaque&&u.enable(23),U.push(u.mask)}function D(U){const ee=w[U.type];let ne;if(ee){const ie=Xd[ee];ne=Ew.clone(ie.uniforms)}else ne=U.uniforms;return ne}function N(U,ee){let ne;for(let ie=0,se=p.length;ie<se;ie++){const fe=p[ie];if(fe.cacheKey===ee){ne=fe,++ne.usedTimes;break}}return ne===void 0&&(ne=new Xme(r,ee,U,o),p.push(ne)),ne}function F(U){if(--U.usedTimes===0){const ee=p.indexOf(U);p[ee]=p[p.length-1],p.pop(),U.destroy()}}function z(U){h.remove(U)}function V(){h.dispose()}return{getParameters:x,getProgramCacheKey:A,getUniforms:D,acquireProgram:N,releaseProgram:F,releaseShaderCache:z,programs:p,dispose:V}}function qme(){let r=new WeakMap;function e(o){let l=r.get(o);return l===void 0&&(l={},r.set(o,l)),l}function t(o){r.delete(o)}function i(o,l,u){r.get(o)[l]=u}function s(){r=new WeakMap}return{get:e,remove:t,update:i,dispose:s}}function Zme(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function yH(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function bH(){const r=[];let e=0;const t=[],i=[],s=[];function o(){e=0,t.length=0,i.length=0,s.length=0}function l(_,v,E,w,x,A){let O=r[e];return O===void 0?(O={id:_.id,object:_,geometry:v,material:E,groupOrder:w,renderOrder:_.renderOrder,z:x,group:A},r[e]=O):(O.id=_.id,O.object=_,O.geometry=v,O.material=E,O.groupOrder=w,O.renderOrder=_.renderOrder,O.z=x,O.group=A),e++,O}function u(_,v,E,w,x,A){const O=l(_,v,E,w,x,A);E.transmission>0?i.push(O):E.transparent===!0?s.push(O):t.push(O)}function h(_,v,E,w,x,A){const O=l(_,v,E,w,x,A);E.transmission>0?i.unshift(O):E.transparent===!0?s.unshift(O):t.unshift(O)}function p(_,v){t.length>1&&t.sort(_||Zme),i.length>1&&i.sort(v||yH),s.length>1&&s.sort(v||yH)}function m(){for(let _=e,v=r.length;_<v;_++){const E=r[_];if(E.id===null)break;E.id=null,E.object=null,E.geometry=null,E.material=null,E.group=null}}return{opaque:t,transmissive:i,transparent:s,init:o,push:u,unshift:h,finish:m,sort:p}}function ege(){let r=new WeakMap;function e(i,s){let o;return r.has(i)===!1?(o=new bH,r.set(i,[o])):s>=r.get(i).length?(o=new bH,r.get(i).push(o)):o=r.get(i)[s],o}function t(){r=new WeakMap}return{get:e,dispose:t}}function tge(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Te,color:new _n};break;case"SpotLight":t={position:new Te,direction:new Te,color:new _n,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Te,color:new _n,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Te,skyColor:new _n,groundColor:new _n};break;case"RectAreaLight":t={color:new _n,position:new Te,halfWidth:new Te,halfHeight:new Te};break}return r[e.id]=t,t}}}function nge(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ot};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ot};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ot,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let rge=0;function ige(r,e){return(e.castShadow?1:0)-(r.castShadow?1:0)}function sge(r,e){const t=new tge,i=nge(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let m=0;m<9;m++)s.probe.push(new Te);const o=new Te,l=new Sr,u=new Sr;function h(m,_){let v=0,E=0,w=0;for(let ee=0;ee<9;ee++)s.probe[ee].set(0,0,0);let x=0,A=0,O=0,k=0,D=0,N=0,F=0,z=0;m.sort(ige);const V=_!==!0?Math.PI:1;for(let ee=0,ne=m.length;ee<ne;ee++){const ie=m[ee],se=ie.color,fe=ie.intensity,ae=ie.distance,he=ie.shadow&&ie.shadow.map?ie.shadow.map.texture:null;if(ie.isAmbientLight)v+=se.r*fe*V,E+=se.g*fe*V,w+=se.b*fe*V;else if(ie.isLightProbe)for(let ge=0;ge<9;ge++)s.probe[ge].addScaledVector(ie.sh.coefficients[ge],fe);else if(ie.isDirectionalLight){const ge=t.get(ie);if(ge.color.copy(ie.color).multiplyScalar(ie.intensity*V),ie.castShadow){const Ie=ie.shadow,j=i.get(ie);j.shadowBias=Ie.bias,j.shadowNormalBias=Ie.normalBias,j.shadowRadius=Ie.radius,j.shadowMapSize=Ie.mapSize,s.directionalShadow[x]=j,s.directionalShadowMap[x]=he,s.directionalShadowMatrix[x]=ie.shadow.matrix,N++}s.directional[x]=ge,x++}else if(ie.isSpotLight){const ge=t.get(ie);if(ge.position.setFromMatrixPosition(ie.matrixWorld),ge.color.copy(se).multiplyScalar(fe*V),ge.distance=ae,ge.coneCos=Math.cos(ie.angle),ge.penumbraCos=Math.cos(ie.angle*(1-ie.penumbra)),ge.decay=ie.decay,ie.castShadow){const Ie=ie.shadow,j=i.get(ie);j.shadowBias=Ie.bias,j.shadowNormalBias=Ie.normalBias,j.shadowRadius=Ie.radius,j.shadowMapSize=Ie.mapSize,s.spotShadow[O]=j,s.spotShadowMap[O]=he,s.spotShadowMatrix[O]=ie.shadow.matrix,z++}s.spot[O]=ge,O++}else if(ie.isRectAreaLight){const ge=t.get(ie);ge.color.copy(se).multiplyScalar(fe),ge.halfWidth.set(ie.width*.5,0,0),ge.halfHeight.set(0,ie.height*.5,0),s.rectArea[k]=ge,k++}else if(ie.isPointLight){const ge=t.get(ie);if(ge.color.copy(ie.color).multiplyScalar(ie.intensity*V),ge.distance=ie.distance,ge.decay=ie.decay,ie.castShadow){const Ie=ie.shadow,j=i.get(ie);j.shadowBias=Ie.bias,j.shadowNormalBias=Ie.normalBias,j.shadowRadius=Ie.radius,j.shadowMapSize=Ie.mapSize,j.shadowCameraNear=Ie.camera.near,j.shadowCameraFar=Ie.camera.far,s.pointShadow[A]=j,s.pointShadowMap[A]=he,s.pointShadowMatrix[A]=ie.shadow.matrix,F++}s.point[A]=ge,A++}else if(ie.isHemisphereLight){const ge=t.get(ie);ge.skyColor.copy(ie.color).multiplyScalar(fe*V),ge.groundColor.copy(ie.groundColor).multiplyScalar(fe*V),s.hemi[D]=ge,D++}}k>0&&(e.isWebGL2||r.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=Sn.LTC_FLOAT_1,s.rectAreaLTC2=Sn.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(s.rectAreaLTC1=Sn.LTC_HALF_1,s.rectAreaLTC2=Sn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=v,s.ambient[1]=E,s.ambient[2]=w;const U=s.hash;(U.directionalLength!==x||U.pointLength!==A||U.spotLength!==O||U.rectAreaLength!==k||U.hemiLength!==D||U.numDirectionalShadows!==N||U.numPointShadows!==F||U.numSpotShadows!==z)&&(s.directional.length=x,s.spot.length=O,s.rectArea.length=k,s.point.length=A,s.hemi.length=D,s.directionalShadow.length=N,s.directionalShadowMap.length=N,s.pointShadow.length=F,s.pointShadowMap.length=F,s.spotShadow.length=z,s.spotShadowMap.length=z,s.directionalShadowMatrix.length=N,s.pointShadowMatrix.length=F,s.spotShadowMatrix.length=z,U.directionalLength=x,U.pointLength=A,U.spotLength=O,U.rectAreaLength=k,U.hemiLength=D,U.numDirectionalShadows=N,U.numPointShadows=F,U.numSpotShadows=z,s.version=rge++)}function p(m,_){let v=0,E=0,w=0,x=0,A=0;const O=_.matrixWorldInverse;for(let k=0,D=m.length;k<D;k++){const N=m[k];if(N.isDirectionalLight){const F=s.directional[v];F.direction.setFromMatrixPosition(N.matrixWorld),o.setFromMatrixPosition(N.target.matrixWorld),F.direction.sub(o),F.direction.transformDirection(O),v++}else if(N.isSpotLight){const F=s.spot[w];F.position.setFromMatrixPosition(N.matrixWorld),F.position.applyMatrix4(O),F.direction.setFromMatrixPosition(N.matrixWorld),o.setFromMatrixPosition(N.target.matrixWorld),F.direction.sub(o),F.direction.transformDirection(O),w++}else if(N.isRectAreaLight){const F=s.rectArea[x];F.position.setFromMatrixPosition(N.matrixWorld),F.position.applyMatrix4(O),u.identity(),l.copy(N.matrixWorld),l.premultiply(O),u.extractRotation(l),F.halfWidth.set(N.width*.5,0,0),F.halfHeight.set(0,N.height*.5,0),F.halfWidth.applyMatrix4(u),F.halfHeight.applyMatrix4(u),x++}else if(N.isPointLight){const F=s.point[E];F.position.setFromMatrixPosition(N.matrixWorld),F.position.applyMatrix4(O),E++}else if(N.isHemisphereLight){const F=s.hemi[A];F.direction.setFromMatrixPosition(N.matrixWorld),F.direction.transformDirection(O),A++}}}return{setup:h,setupView:p,state:s}}function TH(r,e){const t=new sge(r,e),i=[],s=[];function o(){i.length=0,s.length=0}function l(m){i.push(m)}function u(m){s.push(m)}function h(m){t.setup(i,m)}function p(m){t.setupView(i,m)}return{init:o,state:{lightsArray:i,shadowsArray:s,lights:t},setupLights:h,setupLightsView:p,pushLight:l,pushShadow:u}}function oge(r,e){let t=new WeakMap;function i(o,l=0){let u;return t.has(o)===!1?(u=new TH(r,e),t.set(o,[u])):l>=t.get(o).length?(u=new TH(r,e),t.get(o).push(u)):u=t.get(o)[l],u}function s(){t=new WeakMap}return{get:i,dispose:s}}class Sw extends Dc{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=$v,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class QI extends Dc{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Te,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const age=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,lge=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function uge(r,e,t){let i=new KI;const s=new Ot,o=new Ot,l=new xi,u=new Sw({depthPacking:w1}),h=new QI,p={},m=t.maxTextureSize,_={0:Nc,1:Jg,2:Kd},v=new ah({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ot},radius:{value:4}},vertexShader:age,fragmentShader:lge}),E=v.clone();E.defines.HORIZONTAL_PASS=1;const w=new Ar;w.setAttribute("position",new xs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new bn(w,v),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=GI,this.render=function(N,F,z){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||N.length===0)return;const V=r.getRenderTarget(),U=r.getActiveCubeFace(),ee=r.getActiveMipmapLevel(),ne=r.state;ne.setBlending(Zd),ne.buffers.color.setClear(1,1,1,1),ne.buffers.depth.setTest(!0),ne.setScissorTest(!1);for(let ie=0,se=N.length;ie<se;ie++){const fe=N[ie],ae=fe.shadow;if(ae===void 0){console.warn("THREE.WebGLShadowMap:",fe,"has no shadow.");continue}if(ae.autoUpdate===!1&&ae.needsUpdate===!1)continue;s.copy(ae.mapSize);const he=ae.getFrameExtents();if(s.multiply(he),o.copy(ae.mapSize),(s.x>m||s.y>m)&&(s.x>m&&(o.x=Math.floor(m/he.x),s.x=o.x*he.x,ae.mapSize.x=o.x),s.y>m&&(o.y=Math.floor(m/he.y),s.y=o.y*he.y,ae.mapSize.y=o.y)),ae.map===null){const Ie=this.type!==Ry?{minFilter:ia,magFilter:ia}:{};ae.map=new iu(s.x,s.y,Ie),ae.map.texture.name=fe.name+".shadowMap",ae.camera.updateProjectionMatrix()}r.setRenderTarget(ae.map),r.clear();const ge=ae.getViewportCount();for(let Ie=0;Ie<ge;Ie++){const j=ae.getViewport(Ie);l.set(o.x*j.x,o.y*j.y,o.x*j.z,o.y*j.w),ne.viewport(l),ae.updateMatrices(fe,Ie),i=ae.getFrustum(),D(F,z,ae.camera,fe,this.type)}ae.isPointLightShadow!==!0&&this.type===Ry&&O(ae,z),ae.needsUpdate=!1}A.needsUpdate=!1,r.setRenderTarget(V,U,ee)};function O(N,F){const z=e.update(x);v.defines.VSM_SAMPLES!==N.blurSamples&&(v.defines.VSM_SAMPLES=N.blurSamples,E.defines.VSM_SAMPLES=N.blurSamples,v.needsUpdate=!0,E.needsUpdate=!0),N.mapPass===null&&(N.mapPass=new iu(s.x,s.y)),v.uniforms.shadow_pass.value=N.map.texture,v.uniforms.resolution.value=N.mapSize,v.uniforms.radius.value=N.radius,r.setRenderTarget(N.mapPass),r.clear(),r.renderBufferDirect(F,null,z,v,x,null),E.uniforms.shadow_pass.value=N.mapPass.texture,E.uniforms.resolution.value=N.mapSize,E.uniforms.radius.value=N.radius,r.setRenderTarget(N.map),r.clear(),r.renderBufferDirect(F,null,z,E,x,null)}function k(N,F,z,V,U,ee){let ne=null;const ie=z.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(ie!==void 0?ne=ie:ne=z.isPointLight===!0?h:u,r.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0){const se=ne.uuid,fe=F.uuid;let ae=p[se];ae===void 0&&(ae={},p[se]=ae);let he=ae[fe];he===void 0&&(he=ne.clone(),ae[fe]=he),ne=he}return ne.visible=F.visible,ne.wireframe=F.wireframe,ee===Ry?ne.side=F.shadowSide!==null?F.shadowSide:F.side:ne.side=F.shadowSide!==null?F.shadowSide:_[F.side],ne.alphaMap=F.alphaMap,ne.alphaTest=F.alphaTest,ne.clipShadows=F.clipShadows,ne.clippingPlanes=F.clippingPlanes,ne.clipIntersection=F.clipIntersection,ne.displacementMap=F.displacementMap,ne.displacementScale=F.displacementScale,ne.displacementBias=F.displacementBias,ne.wireframeLinewidth=F.wireframeLinewidth,ne.linewidth=F.linewidth,z.isPointLight===!0&&ne.isMeshDistanceMaterial===!0&&(ne.referencePosition.setFromMatrixPosition(z.matrixWorld),ne.nearDistance=V,ne.farDistance=U),ne}function D(N,F,z,V,U){if(N.visible===!1)return;if(N.layers.test(F.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&U===Ry)&&(!N.frustumCulled||i.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,N.matrixWorld);const ne=e.update(N),ie=N.material;if(Array.isArray(ie)){const se=ne.groups;for(let fe=0,ae=se.length;fe<ae;fe++){const he=se[fe],ge=ie[he.materialIndex];if(ge&&ge.visible){const Ie=k(N,ge,V,z.near,z.far,U);r.renderBufferDirect(z,null,ne,Ie,N,he)}}}else if(ie.visible){const se=k(N,ie,V,z.near,z.far,U);r.renderBufferDirect(z,null,ne,se,N,null)}}const ee=N.children;for(let ne=0,ie=ee.length;ne<ie;ne++)D(ee[ne],F,z,V,U)}}function cge(r,e,t){const i=t.isWebGL2;function s(){let Pe=!1;const Wt=new xi;let st=null;const Ut=new xi(0,0,0,0);return{setMask:function(Pt){st!==Pt&&!Pe&&(r.colorMask(Pt,Pt,Pt,Pt),st=Pt)},setLocked:function(Pt){Pe=Pt},setClear:function(Pt,Tn,Mr,nr,ai){ai===!0&&(Pt*=nr,Tn*=nr,Mr*=nr),Wt.set(Pt,Tn,Mr,nr),Ut.equals(Wt)===!1&&(r.clearColor(Pt,Tn,Mr,nr),Ut.copy(Wt))},reset:function(){Pe=!1,st=null,Ut.set(-1,0,0,0)}}}function o(){let Pe=!1,Wt=null,st=null,Ut=null;return{setTest:function(Pt){Pt?Ze(2929):et(2929)},setMask:function(Pt){Wt!==Pt&&!Pe&&(r.depthMask(Pt),Wt=Pt)},setFunc:function(Pt){if(st!==Pt){if(Pt)switch(Pt){case Z8:r.depthFunc(512);break;case e9:r.depthFunc(519);break;case t9:r.depthFunc(513);break;case EA:r.depthFunc(515);break;case n9:r.depthFunc(514);break;case r9:r.depthFunc(518);break;case i9:r.depthFunc(516);break;case s9:r.depthFunc(517);break;default:r.depthFunc(515)}else r.depthFunc(515);st=Pt}},setLocked:function(Pt){Pe=Pt},setClear:function(Pt){Ut!==Pt&&(r.clearDepth(Pt),Ut=Pt)},reset:function(){Pe=!1,Wt=null,st=null,Ut=null}}}function l(){let Pe=!1,Wt=null,st=null,Ut=null,Pt=null,Tn=null,Mr=null,nr=null,ai=null;return{setTest:function(ar){Pe||(ar?Ze(2960):et(2960))},setMask:function(ar){Wt!==ar&&!Pe&&(r.stencilMask(ar),Wt=ar)},setFunc:function(ar,Qn,Q){(st!==ar||Ut!==Qn||Pt!==Q)&&(r.stencilFunc(ar,Qn,Q),st=ar,Ut=Qn,Pt=Q)},setOp:function(ar,Qn,Q){(Tn!==ar||Mr!==Qn||nr!==Q)&&(r.stencilOp(ar,Qn,Q),Tn=ar,Mr=Qn,nr=Q)},setLocked:function(ar){Pe=ar},setClear:function(ar){ai!==ar&&(r.clearStencil(ar),ai=ar)},reset:function(){Pe=!1,Wt=null,st=null,Ut=null,Pt=null,Tn=null,Mr=null,nr=null,ai=null}}}const u=new s,h=new o,p=new l,m=new WeakMap,_=new WeakMap;let v={},E={},w=new WeakMap,x=[],A=null,O=!1,k=null,D=null,N=null,F=null,z=null,V=null,U=null,ee=!1,ne=null,ie=null,se=null,fe=null,ae=null;const he=r.getParameter(35661);let ge=!1,Ie=0;const j=r.getParameter(7938);j.indexOf("WebGL")!==-1?(Ie=parseFloat(/^WebGL (\d)/.exec(j)[1]),ge=Ie>=1):j.indexOf("OpenGL ES")!==-1&&(Ie=parseFloat(/^OpenGL ES (\d)/.exec(j)[1]),ge=Ie>=2);let te=null,q={};const le=r.getParameter(3088),_e=r.getParameter(2978),Le=new xi().fromArray(le),xe=new xi().fromArray(_e);function Ve(Pe,Wt,st){const Ut=new Uint8Array(4),Pt=r.createTexture();r.bindTexture(Pe,Pt),r.texParameteri(Pe,10241,9728),r.texParameteri(Pe,10240,9728);for(let Tn=0;Tn<st;Tn++)r.texImage2D(Wt+Tn,0,6408,1,1,0,6408,5121,Ut);return Pt}const Re={};Re[3553]=Ve(3553,3553,1),Re[34067]=Ve(34067,34069,6),u.setClear(0,0,0,1),h.setClear(1),p.setClear(0),Ze(2929),h.setFunc(EA),Mt(!1),At(WN),Ze(2884),it(Zd);function Ze(Pe){v[Pe]!==!0&&(r.enable(Pe),v[Pe]=!0)}function et(Pe){v[Pe]!==!1&&(r.disable(Pe),v[Pe]=!1)}function ct(Pe,Wt){return E[Pe]!==Wt?(r.bindFramebuffer(Pe,Wt),E[Pe]=Wt,i&&(Pe===36009&&(E[36160]=Wt),Pe===36160&&(E[36009]=Wt)),!0):!1}function rt(Pe,Wt){let st=x,Ut=!1;if(Pe)if(st=w.get(Wt),st===void 0&&(st=[],w.set(Wt,st)),Pe.isWebGLMultipleRenderTargets){const Pt=Pe.texture;if(st.length!==Pt.length||st[0]!==36064){for(let Tn=0,Mr=Pt.length;Tn<Mr;Tn++)st[Tn]=36064+Tn;st.length=Pt.length,Ut=!0}}else st[0]!==36064&&(st[0]=36064,Ut=!0);else st[0]!==1029&&(st[0]=1029,Ut=!0);Ut&&(t.isWebGL2?r.drawBuffers(st):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(st))}function Ne(Pe){return A!==Pe?(r.useProgram(Pe),A=Pe,!0):!1}const we={[Ty]:32774,[G8]:32778,[UB]:32779};if(i)we[XN]=32775,we[YN]=32776;else{const Pe=e.get("EXT_blend_minmax");Pe!==null&&(we[XN]=Pe.MIN_EXT,we[YN]=Pe.MAX_EXT)}const ze={[W8]:0,[V8]:1,[j8]:768,[WI]:770,[q8]:776,[J8]:774,[Y8]:772,[X8]:769,[VI]:771,[Q8]:775,[K8]:773};function it(Pe,Wt,st,Ut,Pt,Tn,Mr,nr){if(Pe===Zd){O===!0&&(et(3042),O=!1);return}if(O===!1&&(Ze(3042),O=!0),Pe!==H8){if(Pe!==k||nr!==ee){if((D!==Ty||z!==Ty)&&(r.blendEquation(32774),D=Ty,z=Ty),nr)switch(Pe){case G_:r.blendFuncSeparate(1,771,1,771);break;case TA:r.blendFunc(1,1);break;case VN:r.blendFuncSeparate(0,769,0,1);break;case jN:r.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pe);break}else switch(Pe){case G_:r.blendFuncSeparate(770,771,1,771);break;case TA:r.blendFunc(770,1);break;case VN:r.blendFuncSeparate(0,769,0,1);break;case jN:r.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pe);break}N=null,F=null,V=null,U=null,k=Pe,ee=nr}return}Pt=Pt||Wt,Tn=Tn||st,Mr=Mr||Ut,(Wt!==D||Pt!==z)&&(r.blendEquationSeparate(we[Wt],we[Pt]),D=Wt,z=Pt),(st!==N||Ut!==F||Tn!==V||Mr!==U)&&(r.blendFuncSeparate(ze[st],ze[Ut],ze[Tn],ze[Mr]),N=st,F=Ut,V=Tn,U=Mr),k=Pe,ee=null}function nt(Pe,Wt){Pe.side===Kd?et(2884):Ze(2884);let st=Pe.side===Nc;Wt&&(st=!st),Mt(st),Pe.blending===G_&&Pe.transparent===!1?it(Zd):it(Pe.blending,Pe.blendEquation,Pe.blendSrc,Pe.blendDst,Pe.blendEquationAlpha,Pe.blendSrcAlpha,Pe.blendDstAlpha,Pe.premultipliedAlpha),h.setFunc(Pe.depthFunc),h.setTest(Pe.depthTest),h.setMask(Pe.depthWrite),u.setMask(Pe.colorWrite);const Ut=Pe.stencilWrite;p.setTest(Ut),Ut&&(p.setMask(Pe.stencilWriteMask),p.setFunc(Pe.stencilFunc,Pe.stencilRef,Pe.stencilFuncMask),p.setOp(Pe.stencilFail,Pe.stencilZFail,Pe.stencilZPass)),Et(Pe.polygonOffset,Pe.polygonOffsetFactor,Pe.polygonOffsetUnits),Pe.alphaToCoverage===!0?Ze(32926):et(32926)}function Mt(Pe){ne!==Pe&&(Pe?r.frontFace(2304):r.frontFace(2305),ne=Pe)}function At(Pe){Pe!==P8?(Ze(2884),Pe!==ie&&(Pe===WN?r.cullFace(1029):Pe===F8?r.cullFace(1028):r.cullFace(1032))):et(2884),ie=Pe}function ht(Pe){Pe!==se&&(ge&&r.lineWidth(Pe),se=Pe)}function Et(Pe,Wt,st){Pe?(Ze(32823),(fe!==Wt||ae!==st)&&(r.polygonOffset(Wt,st),fe=Wt,ae=st)):et(32823)}function wt(Pe){Pe?Ze(3089):et(3089)}function pt(Pe){Pe===void 0&&(Pe=33984+he-1),te!==Pe&&(r.activeTexture(Pe),te=Pe)}function be(Pe,Wt){te===null&&pt();let st=q[te];st===void 0&&(st={type:void 0,texture:void 0},q[te]=st),(st.type!==Pe||st.texture!==Wt)&&(r.bindTexture(Pe,Wt||Re[Pe]),st.type=Pe,st.texture=Wt)}function Z(){const Pe=q[te];Pe!==void 0&&Pe.type!==void 0&&(r.bindTexture(Pe.type,null),Pe.type=void 0,Pe.texture=void 0)}function ke(){try{r.compressedTexImage2D.apply(r,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function lt(){try{r.texSubImage2D.apply(r,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function mt(){try{r.texSubImage3D.apply(r,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function xt(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function ut(){try{r.texStorage2D.apply(r,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function He(){try{r.texStorage3D.apply(r,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function Ce(){try{r.texImage2D.apply(r,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function X(){try{r.texImage3D.apply(r,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function J(Pe){Le.equals(Pe)===!1&&(r.scissor(Pe.x,Pe.y,Pe.z,Pe.w),Le.copy(Pe))}function oe(Pe){xe.equals(Pe)===!1&&(r.viewport(Pe.x,Pe.y,Pe.z,Pe.w),xe.copy(Pe))}function $e(Pe,Wt){let st=_.get(Wt);st===void 0&&(st=new WeakMap,_.set(Wt,st));let Ut=st.get(Pe);Ut===void 0&&(Ut=r.getUniformBlockIndex(Wt,Pe.name),st.set(Pe,Ut))}function Ge(Pe,Wt){const st=_.get(Wt).get(Pe);m.get(Pe)!==st&&(r.uniformBlockBinding(Wt,st,Pe.__bindingPointIndex),m.set(Pe,st))}function Bt(){r.disable(3042),r.disable(2884),r.disable(2929),r.disable(32823),r.disable(3089),r.disable(2960),r.disable(32926),r.blendEquation(32774),r.blendFunc(1,0),r.blendFuncSeparate(1,0,1,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(513),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(519,0,4294967295),r.stencilOp(7680,7680,7680),r.clearStencil(0),r.cullFace(1029),r.frontFace(2305),r.polygonOffset(0,0),r.activeTexture(33984),r.bindFramebuffer(36160,null),i===!0&&(r.bindFramebuffer(36009,null),r.bindFramebuffer(36008,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),v={},te=null,q={},E={},w=new WeakMap,x=[],A=null,O=!1,k=null,D=null,N=null,F=null,z=null,V=null,U=null,ee=!1,ne=null,ie=null,se=null,fe=null,ae=null,Le.set(0,0,r.canvas.width,r.canvas.height),xe.set(0,0,r.canvas.width,r.canvas.height),u.reset(),h.reset(),p.reset()}return{buffers:{color:u,depth:h,stencil:p},enable:Ze,disable:et,bindFramebuffer:ct,drawBuffers:rt,useProgram:Ne,setBlending:it,setMaterial:nt,setFlipSided:Mt,setCullFace:At,setLineWidth:ht,setPolygonOffset:Et,setScissorTest:wt,activeTexture:pt,bindTexture:be,unbindTexture:Z,compressedTexImage2D:ke,texImage2D:Ce,texImage3D:X,updateUBOMapping:$e,uniformBlockBinding:Ge,texStorage2D:ut,texStorage3D:He,texSubImage2D:lt,texSubImage3D:mt,compressedTexSubImage2D:xt,scissor:J,viewport:oe,reset:Bt}}function hge(r,e,t,i,s,o,l){const u=s.isWebGL2,h=s.maxTextures,p=s.maxCubemapSize,m=s.maxTextureSize,_=s.maxSamples,v=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,E=/OculusBrowser/g.test(navigator.userAgent),w=new WeakMap;let x;const A=new WeakMap;let O=!1;try{O=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function k(be,Z){return O?new OffscreenCanvas(be,Z):WS("canvas")}function D(be,Z,ke,lt){let mt=1;if((be.width>lt||be.height>lt)&&(mt=lt/Math.max(be.width,be.height)),mt<1||Z===!0)if(typeof HTMLImageElement<"u"&&be instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&be instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&be instanceof ImageBitmap){const xt=Z?xA:Math.floor,ut=xt(mt*be.width),He=xt(mt*be.height);x===void 0&&(x=k(ut,He));const Ce=ke?k(ut,He):x;return Ce.width=ut,Ce.height=He,Ce.getContext("2d").drawImage(be,0,0,ut,He),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+be.width+"x"+be.height+") to ("+ut+"x"+He+")."),Ce}else return"data"in be&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+be.width+"x"+be.height+")."),be;return be}function N(be){return _2(be.width)&&_2(be.height)}function F(be){return u?!1:be.wrapS!==Yd||be.wrapT!==Yd||be.minFilter!==ia&&be.minFilter!==Po}function z(be,Z){return be.generateMipmaps&&Z&&be.minFilter!==ia&&be.minFilter!==Po}function V(be){r.generateMipmap(be)}function U(be,Z,ke,lt,mt=!1){if(u===!1)return Z;if(be!==null){if(r[be]!==void 0)return r[be];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+be+"'")}let xt=Z;return Z===6403&&(ke===5126&&(xt=33326),ke===5131&&(xt=33325),ke===5121&&(xt=33321)),Z===33319&&(ke===5126&&(xt=33328),ke===5131&&(xt=33327),ke===5121&&(xt=33323)),Z===6408&&(ke===5126&&(xt=34836),ke===5131&&(xt=34842),ke===5121&&(xt=lt===yi&&mt===!1?35907:32856),ke===32819&&(xt=32854),ke===32820&&(xt=32855)),(xt===33325||xt===33326||xt===33327||xt===33328||xt===34842||xt===34836)&&e.get("EXT_color_buffer_float"),xt}function ee(be,Z,ke){return z(be,ke)===!0||be.isFramebufferTexture&&be.minFilter!==ia&&be.minFilter!==Po?Math.log2(Math.max(Z.width,Z.height))+1:be.mipmaps!==void 0&&be.mipmaps.length>0?be.mipmaps.length:be.isCompressedTexture&&Array.isArray(be.image)?Z.mipmaps.length:1}function ne(be){return be===ia||be===$A||be===SA?9728:9729}function ie(be){const Z=be.target;Z.removeEventListener("dispose",ie),fe(Z),Z.isVideoTexture&&w.delete(Z)}function se(be){const Z=be.target;Z.removeEventListener("dispose",se),he(Z)}function fe(be){const Z=i.get(be);if(Z.__webglInit===void 0)return;const ke=be.source,lt=A.get(ke);if(lt){const mt=lt[Z.__cacheKey];mt.usedTimes--,mt.usedTimes===0&&ae(be),Object.keys(lt).length===0&&A.delete(ke)}i.remove(be)}function ae(be){const Z=i.get(be);r.deleteTexture(Z.__webglTexture);const ke=be.source,lt=A.get(ke);delete lt[Z.__cacheKey],l.memory.textures--}function he(be){const Z=be.texture,ke=i.get(be),lt=i.get(Z);if(lt.__webglTexture!==void 0&&(r.deleteTexture(lt.__webglTexture),l.memory.textures--),be.depthTexture&&be.depthTexture.dispose(),be.isWebGLCubeRenderTarget)for(let mt=0;mt<6;mt++)r.deleteFramebuffer(ke.__webglFramebuffer[mt]),ke.__webglDepthbuffer&&r.deleteRenderbuffer(ke.__webglDepthbuffer[mt]);else{if(r.deleteFramebuffer(ke.__webglFramebuffer),ke.__webglDepthbuffer&&r.deleteRenderbuffer(ke.__webglDepthbuffer),ke.__webglMultisampledFramebuffer&&r.deleteFramebuffer(ke.__webglMultisampledFramebuffer),ke.__webglColorRenderbuffer)for(let mt=0;mt<ke.__webglColorRenderbuffer.length;mt++)ke.__webglColorRenderbuffer[mt]&&r.deleteRenderbuffer(ke.__webglColorRenderbuffer[mt]);ke.__webglDepthRenderbuffer&&r.deleteRenderbuffer(ke.__webglDepthRenderbuffer)}if(be.isWebGLMultipleRenderTargets)for(let mt=0,xt=Z.length;mt<xt;mt++){const ut=i.get(Z[mt]);ut.__webglTexture&&(r.deleteTexture(ut.__webglTexture),l.memory.textures--),i.remove(Z[mt])}i.remove(Z),i.remove(be)}let ge=0;function Ie(){ge=0}function j(){const be=ge;return be>=h&&console.warn("THREE.WebGLTextures: Trying to use "+be+" texture units while this GPU supports only "+h),ge+=1,be}function te(be){const Z=[];return Z.push(be.wrapS),Z.push(be.wrapT),Z.push(be.magFilter),Z.push(be.minFilter),Z.push(be.anisotropy),Z.push(be.internalFormat),Z.push(be.format),Z.push(be.type),Z.push(be.generateMipmaps),Z.push(be.premultiplyAlpha),Z.push(be.flipY),Z.push(be.unpackAlignment),Z.push(be.encoding),Z.join()}function q(be,Z){const ke=i.get(be);if(be.isVideoTexture&&wt(be),be.isRenderTargetTexture===!1&&be.version>0&&ke.__version!==be.version){const lt=be.image;if(lt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(lt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{et(ke,be,Z);return}}t.activeTexture(33984+Z),t.bindTexture(3553,ke.__webglTexture)}function le(be,Z){const ke=i.get(be);if(be.version>0&&ke.__version!==be.version){et(ke,be,Z);return}t.activeTexture(33984+Z),t.bindTexture(35866,ke.__webglTexture)}function _e(be,Z){const ke=i.get(be);if(be.version>0&&ke.__version!==be.version){et(ke,be,Z);return}t.activeTexture(33984+Z),t.bindTexture(32879,ke.__webglTexture)}function Le(be,Z){const ke=i.get(be);if(be.version>0&&ke.__version!==be.version){ct(ke,be,Z);return}t.activeTexture(33984+Z),t.bindTexture(34067,ke.__webglTexture)}const xe={[S1]:10497,[Yd]:33071,[PS]:33648},Ve={[ia]:9728,[$A]:9984,[SA]:9986,[Po]:9729,[HB]:9985,[hb]:9987};function Re(be,Z,ke){if(ke?(r.texParameteri(be,10242,xe[Z.wrapS]),r.texParameteri(be,10243,xe[Z.wrapT]),(be===32879||be===35866)&&r.texParameteri(be,32882,xe[Z.wrapR]),r.texParameteri(be,10240,Ve[Z.magFilter]),r.texParameteri(be,10241,Ve[Z.minFilter])):(r.texParameteri(be,10242,33071),r.texParameteri(be,10243,33071),(be===32879||be===35866)&&r.texParameteri(be,32882,33071),(Z.wrapS!==Yd||Z.wrapT!==Yd)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(be,10240,ne(Z.magFilter)),r.texParameteri(be,10241,ne(Z.minFilter)),Z.minFilter!==ia&&Z.minFilter!==Po&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const lt=e.get("EXT_texture_filter_anisotropic");if(Z.type===Hg&&e.has("OES_texture_float_linear")===!1||u===!1&&Z.type===tb&&e.has("OES_texture_half_float_linear")===!1)return;(Z.anisotropy>1||i.get(Z).__currentAnisotropy)&&(r.texParameterf(be,lt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Z.anisotropy,s.getMaxAnisotropy())),i.get(Z).__currentAnisotropy=Z.anisotropy)}}function Ze(be,Z){let ke=!1;be.__webglInit===void 0&&(be.__webglInit=!0,Z.addEventListener("dispose",ie));const lt=Z.source;let mt=A.get(lt);mt===void 0&&(mt={},A.set(lt,mt));const xt=te(Z);if(xt!==be.__cacheKey){mt[xt]===void 0&&(mt[xt]={texture:r.createTexture(),usedTimes:0},l.memory.textures++,ke=!0),mt[xt].usedTimes++;const ut=mt[be.__cacheKey];ut!==void 0&&(mt[be.__cacheKey].usedTimes--,ut.usedTimes===0&&ae(Z)),be.__cacheKey=xt,be.__webglTexture=mt[xt].texture}return ke}function et(be,Z,ke){let lt=3553;Z.isDataArrayTexture&&(lt=35866),Z.isData3DTexture&&(lt=32879);const mt=Ze(be,Z),xt=Z.source;if(t.activeTexture(33984+ke),t.bindTexture(lt,be.__webglTexture),xt.version!==xt.__currentVersion||mt===!0){r.pixelStorei(37440,Z.flipY),r.pixelStorei(37441,Z.premultiplyAlpha),r.pixelStorei(3317,Z.unpackAlignment),r.pixelStorei(37443,0);const ut=F(Z)&&N(Z.image)===!1;let He=D(Z.image,ut,!1,m);He=pt(Z,He);const Ce=N(He)||u,X=o.convert(Z.format,Z.encoding);let J=o.convert(Z.type),oe=U(Z.internalFormat,X,J,Z.encoding,Z.isVideoTexture);Re(lt,Z,Ce);let $e;const Ge=Z.mipmaps,Bt=u&&Z.isVideoTexture!==!0,Pe=xt.__currentVersion===void 0||mt===!0,Wt=ee(Z,He,Ce);if(Z.isDepthTexture)oe=6402,u?Z.type===Hg?oe=36012:Z.type===U_?oe=33190:Z.type===av?oe=35056:oe=33189:Z.type===Hg&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Z.format===lv&&oe===6402&&Z.type!==GB&&Z.type!==U_&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Z.type=U_,J=o.convert(Z.type)),Z.format===mv&&oe===6402&&(oe=34041,Z.type!==av&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Z.type=av,J=o.convert(Z.type))),Pe&&(Bt?t.texStorage2D(3553,1,oe,He.width,He.height):t.texImage2D(3553,0,oe,He.width,He.height,0,X,J,null));else if(Z.isDataTexture)if(Ge.length>0&&Ce){Bt&&Pe&&t.texStorage2D(3553,Wt,oe,Ge[0].width,Ge[0].height);for(let st=0,Ut=Ge.length;st<Ut;st++)$e=Ge[st],Bt?t.texSubImage2D(3553,st,0,0,$e.width,$e.height,X,J,$e.data):t.texImage2D(3553,st,oe,$e.width,$e.height,0,X,J,$e.data);Z.generateMipmaps=!1}else Bt?(Pe&&t.texStorage2D(3553,Wt,oe,He.width,He.height),t.texSubImage2D(3553,0,0,0,He.width,He.height,X,J,He.data)):t.texImage2D(3553,0,oe,He.width,He.height,0,X,J,He.data);else if(Z.isCompressedTexture){Bt&&Pe&&t.texStorage2D(3553,Wt,oe,Ge[0].width,Ge[0].height);for(let st=0,Ut=Ge.length;st<Ut;st++)$e=Ge[st],Z.format!==Rp?X!==null?Bt?t.compressedTexSubImage2D(3553,st,0,0,$e.width,$e.height,X,$e.data):t.compressedTexImage2D(3553,st,oe,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Bt?t.texSubImage2D(3553,st,0,0,$e.width,$e.height,X,J,$e.data):t.texImage2D(3553,st,oe,$e.width,$e.height,0,X,J,$e.data)}else if(Z.isDataArrayTexture)Bt?(Pe&&t.texStorage3D(35866,Wt,oe,He.width,He.height,He.depth),t.texSubImage3D(35866,0,0,0,0,He.width,He.height,He.depth,X,J,He.data)):t.texImage3D(35866,0,oe,He.width,He.height,He.depth,0,X,J,He.data);else if(Z.isData3DTexture)Bt?(Pe&&t.texStorage3D(32879,Wt,oe,He.width,He.height,He.depth),t.texSubImage3D(32879,0,0,0,0,He.width,He.height,He.depth,X,J,He.data)):t.texImage3D(32879,0,oe,He.width,He.height,He.depth,0,X,J,He.data);else if(Z.isFramebufferTexture){if(Pe)if(Bt)t.texStorage2D(3553,Wt,oe,He.width,He.height);else{let st=He.width,Ut=He.height;for(let Pt=0;Pt<Wt;Pt++)t.texImage2D(3553,Pt,oe,st,Ut,0,X,J,null),st>>=1,Ut>>=1}}else if(Ge.length>0&&Ce){Bt&&Pe&&t.texStorage2D(3553,Wt,oe,Ge[0].width,Ge[0].height);for(let st=0,Ut=Ge.length;st<Ut;st++)$e=Ge[st],Bt?t.texSubImage2D(3553,st,0,0,X,J,$e):t.texImage2D(3553,st,oe,X,J,$e);Z.generateMipmaps=!1}else Bt?(Pe&&t.texStorage2D(3553,Wt,oe,He.width,He.height),t.texSubImage2D(3553,0,0,0,X,J,He)):t.texImage2D(3553,0,oe,X,J,He);z(Z,Ce)&&V(lt),xt.__currentVersion=xt.version,Z.onUpdate&&Z.onUpdate(Z)}be.__version=Z.version}function ct(be,Z,ke){if(Z.image.length!==6)return;const lt=Ze(be,Z),mt=Z.source;if(t.activeTexture(33984+ke),t.bindTexture(34067,be.__webglTexture),mt.version!==mt.__currentVersion||lt===!0){r.pixelStorei(37440,Z.flipY),r.pixelStorei(37441,Z.premultiplyAlpha),r.pixelStorei(3317,Z.unpackAlignment),r.pixelStorei(37443,0);const xt=Z.isCompressedTexture||Z.image[0].isCompressedTexture,ut=Z.image[0]&&Z.image[0].isDataTexture,He=[];for(let st=0;st<6;st++)!xt&&!ut?He[st]=D(Z.image[st],!1,!0,p):He[st]=ut?Z.image[st].image:Z.image[st],He[st]=pt(Z,He[st]);const Ce=He[0],X=N(Ce)||u,J=o.convert(Z.format,Z.encoding),oe=o.convert(Z.type),$e=U(Z.internalFormat,J,oe,Z.encoding),Ge=u&&Z.isVideoTexture!==!0,Bt=mt.__currentVersion===void 0||lt===!0;let Pe=ee(Z,Ce,X);Re(34067,Z,X);let Wt;if(xt){Ge&&Bt&&t.texStorage2D(34067,Pe,$e,Ce.width,Ce.height);for(let st=0;st<6;st++){Wt=He[st].mipmaps;for(let Ut=0;Ut<Wt.length;Ut++){const Pt=Wt[Ut];Z.format!==Rp?J!==null?Ge?t.compressedTexSubImage2D(34069+st,Ut,0,0,Pt.width,Pt.height,J,Pt.data):t.compressedTexImage2D(34069+st,Ut,$e,Pt.width,Pt.height,0,Pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ge?t.texSubImage2D(34069+st,Ut,0,0,Pt.width,Pt.height,J,oe,Pt.data):t.texImage2D(34069+st,Ut,$e,Pt.width,Pt.height,0,J,oe,Pt.data)}}}else{Wt=Z.mipmaps,Ge&&Bt&&(Wt.length>0&&Pe++,t.texStorage2D(34067,Pe,$e,He[0].width,He[0].height));for(let st=0;st<6;st++)if(ut){Ge?t.texSubImage2D(34069+st,0,0,0,He[st].width,He[st].height,J,oe,He[st].data):t.texImage2D(34069+st,0,$e,He[st].width,He[st].height,0,J,oe,He[st].data);for(let Ut=0;Ut<Wt.length;Ut++){const Pt=Wt[Ut].image[st].image;Ge?t.texSubImage2D(34069+st,Ut+1,0,0,Pt.width,Pt.height,J,oe,Pt.data):t.texImage2D(34069+st,Ut+1,$e,Pt.width,Pt.height,0,J,oe,Pt.data)}}else{Ge?t.texSubImage2D(34069+st,0,0,0,J,oe,He[st]):t.texImage2D(34069+st,0,$e,J,oe,He[st]);for(let Ut=0;Ut<Wt.length;Ut++){const Pt=Wt[Ut];Ge?t.texSubImage2D(34069+st,Ut+1,0,0,J,oe,Pt.image[st]):t.texImage2D(34069+st,Ut+1,$e,J,oe,Pt.image[st])}}}z(Z,X)&&V(34067),mt.__currentVersion=mt.version,Z.onUpdate&&Z.onUpdate(Z)}be.__version=Z.version}function rt(be,Z,ke,lt,mt){const xt=o.convert(ke.format,ke.encoding),ut=o.convert(ke.type),He=U(ke.internalFormat,xt,ut,ke.encoding);i.get(Z).__hasExternalTextures||(mt===32879||mt===35866?t.texImage3D(mt,0,He,Z.width,Z.height,Z.depth,0,xt,ut,null):t.texImage2D(mt,0,He,Z.width,Z.height,0,xt,ut,null)),t.bindFramebuffer(36160,be),Et(Z)?v.framebufferTexture2DMultisampleEXT(36160,lt,mt,i.get(ke).__webglTexture,0,ht(Z)):r.framebufferTexture2D(36160,lt,mt,i.get(ke).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ne(be,Z,ke){if(r.bindRenderbuffer(36161,be),Z.depthBuffer&&!Z.stencilBuffer){let lt=33189;if(ke||Et(Z)){const mt=Z.depthTexture;mt&&mt.isDepthTexture&&(mt.type===Hg?lt=36012:mt.type===U_&&(lt=33190));const xt=ht(Z);Et(Z)?v.renderbufferStorageMultisampleEXT(36161,xt,lt,Z.width,Z.height):r.renderbufferStorageMultisample(36161,xt,lt,Z.width,Z.height)}else r.renderbufferStorage(36161,lt,Z.width,Z.height);r.framebufferRenderbuffer(36160,36096,36161,be)}else if(Z.depthBuffer&&Z.stencilBuffer){const lt=ht(Z);ke&&Et(Z)===!1?r.renderbufferStorageMultisample(36161,lt,35056,Z.width,Z.height):Et(Z)?v.renderbufferStorageMultisampleEXT(36161,lt,35056,Z.width,Z.height):r.renderbufferStorage(36161,34041,Z.width,Z.height),r.framebufferRenderbuffer(36160,33306,36161,be)}else{const lt=Z.isWebGLMultipleRenderTargets===!0?Z.texture:[Z.texture];for(let mt=0;mt<lt.length;mt++){const xt=lt[mt],ut=o.convert(xt.format,xt.encoding),He=o.convert(xt.type),Ce=U(xt.internalFormat,ut,He,xt.encoding),X=ht(Z);ke&&Et(Z)===!1?r.renderbufferStorageMultisample(36161,X,Ce,Z.width,Z.height):Et(Z)?v.renderbufferStorageMultisampleEXT(36161,X,Ce,Z.width,Z.height):r.renderbufferStorage(36161,Ce,Z.width,Z.height)}}r.bindRenderbuffer(36161,null)}function we(be,Z){if(Z&&Z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,be),!(Z.depthTexture&&Z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(Z.depthTexture).__webglTexture||Z.depthTexture.image.width!==Z.width||Z.depthTexture.image.height!==Z.height)&&(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),q(Z.depthTexture,0);const ke=i.get(Z.depthTexture).__webglTexture,lt=ht(Z);if(Z.depthTexture.format===lv)Et(Z)?v.framebufferTexture2DMultisampleEXT(36160,36096,3553,ke,0,lt):r.framebufferTexture2D(36160,36096,3553,ke,0);else if(Z.depthTexture.format===mv)Et(Z)?v.framebufferTexture2DMultisampleEXT(36160,33306,3553,ke,0,lt):r.framebufferTexture2D(36160,33306,3553,ke,0);else throw new Error("Unknown depthTexture format")}function ze(be){const Z=i.get(be),ke=be.isWebGLCubeRenderTarget===!0;if(be.depthTexture&&!Z.__autoAllocateDepthBuffer){if(ke)throw new Error("target.depthTexture not supported in Cube render targets");we(Z.__webglFramebuffer,be)}else if(ke){Z.__webglDepthbuffer=[];for(let lt=0;lt<6;lt++)t.bindFramebuffer(36160,Z.__webglFramebuffer[lt]),Z.__webglDepthbuffer[lt]=r.createRenderbuffer(),Ne(Z.__webglDepthbuffer[lt],be,!1)}else t.bindFramebuffer(36160,Z.__webglFramebuffer),Z.__webglDepthbuffer=r.createRenderbuffer(),Ne(Z.__webglDepthbuffer,be,!1);t.bindFramebuffer(36160,null)}function it(be,Z,ke){const lt=i.get(be);Z!==void 0&&rt(lt.__webglFramebuffer,be,be.texture,36064,3553),ke!==void 0&&ze(be)}function nt(be){const Z=be.texture,ke=i.get(be),lt=i.get(Z);be.addEventListener("dispose",se),be.isWebGLMultipleRenderTargets!==!0&&(lt.__webglTexture===void 0&&(lt.__webglTexture=r.createTexture()),lt.__version=Z.version,l.memory.textures++);const mt=be.isWebGLCubeRenderTarget===!0,xt=be.isWebGLMultipleRenderTargets===!0,ut=N(be)||u;if(mt){ke.__webglFramebuffer=[];for(let He=0;He<6;He++)ke.__webglFramebuffer[He]=r.createFramebuffer()}else{if(ke.__webglFramebuffer=r.createFramebuffer(),xt)if(s.drawBuffers){const He=be.texture;for(let Ce=0,X=He.length;Ce<X;Ce++){const J=i.get(He[Ce]);J.__webglTexture===void 0&&(J.__webglTexture=r.createTexture(),l.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&be.samples>0&&Et(be)===!1){const He=xt?Z:[Z];ke.__webglMultisampledFramebuffer=r.createFramebuffer(),ke.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ke.__webglMultisampledFramebuffer);for(let Ce=0;Ce<He.length;Ce++){const X=He[Ce];ke.__webglColorRenderbuffer[Ce]=r.createRenderbuffer(),r.bindRenderbuffer(36161,ke.__webglColorRenderbuffer[Ce]);const J=o.convert(X.format,X.encoding),oe=o.convert(X.type),$e=U(X.internalFormat,J,oe,X.encoding),Ge=ht(be);r.renderbufferStorageMultisample(36161,Ge,$e,be.width,be.height),r.framebufferRenderbuffer(36160,36064+Ce,36161,ke.__webglColorRenderbuffer[Ce])}r.bindRenderbuffer(36161,null),be.depthBuffer&&(ke.__webglDepthRenderbuffer=r.createRenderbuffer(),Ne(ke.__webglDepthRenderbuffer,be,!0)),t.bindFramebuffer(36160,null)}}if(mt){t.bindTexture(34067,lt.__webglTexture),Re(34067,Z,ut);for(let He=0;He<6;He++)rt(ke.__webglFramebuffer[He],be,Z,36064,34069+He);z(Z,ut)&&V(34067),t.unbindTexture()}else if(xt){const He=be.texture;for(let Ce=0,X=He.length;Ce<X;Ce++){const J=He[Ce],oe=i.get(J);t.bindTexture(3553,oe.__webglTexture),Re(3553,J,ut),rt(ke.__webglFramebuffer,be,J,36064+Ce,3553),z(J,ut)&&V(3553)}t.unbindTexture()}else{let He=3553;(be.isWebGL3DRenderTarget||be.isWebGLArrayRenderTarget)&&(u?He=be.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(He,lt.__webglTexture),Re(He,Z,ut),rt(ke.__webglFramebuffer,be,Z,36064,He),z(Z,ut)&&V(He),t.unbindTexture()}be.depthBuffer&&ze(be)}function Mt(be){const Z=N(be)||u,ke=be.isWebGLMultipleRenderTargets===!0?be.texture:[be.texture];for(let lt=0,mt=ke.length;lt<mt;lt++){const xt=ke[lt];if(z(xt,Z)){const ut=be.isWebGLCubeRenderTarget?34067:3553,He=i.get(xt).__webglTexture;t.bindTexture(ut,He),V(ut),t.unbindTexture()}}}function At(be){if(u&&be.samples>0&&Et(be)===!1){const Z=be.isWebGLMultipleRenderTargets?be.texture:[be.texture],ke=be.width,lt=be.height;let mt=16384;const xt=[],ut=be.stencilBuffer?33306:36096,He=i.get(be),Ce=be.isWebGLMultipleRenderTargets===!0;if(Ce)for(let X=0;X<Z.length;X++)t.bindFramebuffer(36160,He.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+X,36161,null),t.bindFramebuffer(36160,He.__webglFramebuffer),r.framebufferTexture2D(36009,36064+X,3553,null,0);t.bindFramebuffer(36008,He.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,He.__webglFramebuffer);for(let X=0;X<Z.length;X++){xt.push(36064+X),be.depthBuffer&&xt.push(ut);const J=He.__ignoreDepthValues!==void 0?He.__ignoreDepthValues:!1;if(J===!1&&(be.depthBuffer&&(mt|=256),be.stencilBuffer&&(mt|=1024)),Ce&&r.framebufferRenderbuffer(36008,36064,36161,He.__webglColorRenderbuffer[X]),J===!0&&(r.invalidateFramebuffer(36008,[ut]),r.invalidateFramebuffer(36009,[ut])),Ce){const oe=i.get(Z[X]).__webglTexture;r.framebufferTexture2D(36009,36064,3553,oe,0)}r.blitFramebuffer(0,0,ke,lt,0,0,ke,lt,mt,9728),E&&r.invalidateFramebuffer(36008,xt)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Ce)for(let X=0;X<Z.length;X++){t.bindFramebuffer(36160,He.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064+X,36161,He.__webglColorRenderbuffer[X]);const J=i.get(Z[X]).__webglTexture;t.bindFramebuffer(36160,He.__webglFramebuffer),r.framebufferTexture2D(36009,36064+X,3553,J,0)}t.bindFramebuffer(36009,He.__webglMultisampledFramebuffer)}}function ht(be){return Math.min(_,be.samples)}function Et(be){const Z=i.get(be);return u&&be.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Z.__useRenderToTexture!==!1}function wt(be){const Z=l.render.frame;w.get(be)!==Z&&(w.set(be,Z),be.update())}function pt(be,Z){const ke=be.encoding,lt=be.format,mt=be.type;return be.isCompressedTexture===!0||be.isVideoTexture===!0||be.format===wA||ke!==mm&&(ke===yi?u===!1?e.has("EXT_sRGB")===!0&&lt===Rp?(be.format=wA,be.minFilter=Po,be.generateMipmaps=!1):Z=jB.sRGBToLinear(Z):(lt!==Rp||mt!==Fh)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ke)),Z}this.allocateTextureUnit=j,this.resetTextureUnits=Ie,this.setTexture2D=q,this.setTexture2DArray=le,this.setTexture3D=_e,this.setTextureCube=Le,this.rebindTextures=it,this.setupRenderTarget=nt,this.updateRenderTargetMipmap=Mt,this.updateMultisampleRenderTarget=At,this.setupDepthRenderbuffer=ze,this.setupFrameBufferTexture=rt,this.useMultisampledRTT=Et}function W9(r,e,t){const i=t.isWebGL2;function s(o,l=null){let u;if(o===Fh)return 5121;if(o===m9)return 32819;if(o===g9)return 32820;if(o===d9)return 5120;if(o===p9)return 5122;if(o===GB)return 5123;if(o===f9)return 5124;if(o===U_)return 5125;if(o===Hg)return 5126;if(o===tb)return i?5131:(u=e.get("OES_texture_half_float"),u!==null?u.HALF_FLOAT_OES:null);if(o===_9)return 6406;if(o===Rp)return 6408;if(o===y9)return 6409;if(o===b9)return 6410;if(o===lv)return 6402;if(o===mv)return 34041;if(o===T9)return 6403;if(o===v9)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(o===wA)return u=e.get("EXT_sRGB"),u!==null?u.SRGB_ALPHA_EXT:null;if(o===E9)return 36244;if(o===$9)return 33319;if(o===S9)return 33320;if(o===w9)return 36249;if(o===SM||o===wM||o===xM||o===CM)if(l===yi)if(u=e.get("WEBGL_compressed_texture_s3tc_srgb"),u!==null){if(o===SM)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===wM)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===xM)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===CM)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(u=e.get("WEBGL_compressed_texture_s3tc"),u!==null){if(o===SM)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===wM)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===xM)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===CM)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===KN||o===JN||o===QN||o===qN)if(u=e.get("WEBGL_compressed_texture_pvrtc"),u!==null){if(o===KN)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===JN)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===QN)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===qN)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===x9)return u=e.get("WEBGL_compressed_texture_etc1"),u!==null?u.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===ZN||o===e2)if(u=e.get("WEBGL_compressed_texture_etc"),u!==null){if(o===ZN)return l===yi?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(o===e2)return l===yi?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===t2||o===n2||o===r2||o===i2||o===s2||o===o2||o===a2||o===l2||o===u2||o===c2||o===h2||o===d2||o===p2||o===f2)if(u=e.get("WEBGL_compressed_texture_astc"),u!==null){if(o===t2)return l===yi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===n2)return l===yi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===r2)return l===yi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===i2)return l===yi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===s2)return l===yi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===o2)return l===yi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===a2)return l===yi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===l2)return l===yi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===u2)return l===yi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===c2)return l===yi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===h2)return l===yi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===d2)return l===yi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===p2)return l===yi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===f2)return l===yi?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===m2)if(u=e.get("EXT_texture_compression_bptc"),u!==null){if(o===m2)return l===yi?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return o===av?i?34042:(u=e.get("WEBGL_depth_texture"),u!==null?u.UNSIGNED_INT_24_8_WEBGL:null):r[o]!==void 0?r[o]:null}return{convert:s}}class V9 extends So{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class JT extends is{constructor(){super(),this.isGroup=!0,this.type="Group"}}const dge={type:"move"};class DO{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new JT,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new JT,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Te),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new JT,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Te),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,o=null,l=null;const u=this._targetRay,h=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){l=!0;for(const x of e.hand.values()){const A=t.getJointPose(x,i);if(p.joints[x.jointName]===void 0){const k=new JT;k.matrixAutoUpdate=!1,k.visible=!1,p.joints[x.jointName]=k,p.add(k)}const O=p.joints[x.jointName];A!==null&&(O.matrix.fromArray(A.transform.matrix),O.matrix.decompose(O.position,O.rotation,O.scale),O.jointRadius=A.radius),O.visible=A!==null}const m=p.joints["index-finger-tip"],_=p.joints["thumb-tip"],v=m.position.distanceTo(_.position),E=.02,w=.005;p.inputState.pinching&&v>E+w?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&v<=E-w&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),o!==null&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1));u!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&o!==null&&(s=o),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(dge)))}return u!==null&&(u.visible=s!==null),h!==null&&(h.visible=o!==null),p!==null&&(p.visible=l!==null),this}}class JB extends Rl{constructor(e,t,i,s,o,l,u,h,p,m){if(m=m!==void 0?m:lv,m!==lv&&m!==mv)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&m===lv&&(i=U_),i===void 0&&m===mv&&(i=av),super(null,s,o,l,u,h,m,i,p),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:ia,this.minFilter=h!==void 0?h:ia,this.flipY=!1,this.generateMipmaps=!1}}class pge extends Cf{constructor(e,t){super();const i=this;let s=null,o=1,l=null,u="local-floor",h=null,p=null,m=null,_=null,v=null,E=null;const w=t.getContextAttributes();let x=null,A=null;const O=[],k=[],D=new So;D.layers.enable(1),D.viewport=new xi;const N=new So;N.layers.enable(2),N.viewport=new xi;const F=[D,N],z=new V9;z.layers.enable(1),z.layers.enable(2);let V=null,U=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(te){let q=O[te];return q===void 0&&(q=new DO,O[te]=q),q.getTargetRaySpace()},this.getControllerGrip=function(te){let q=O[te];return q===void 0&&(q=new DO,O[te]=q),q.getGripSpace()},this.getHand=function(te){let q=O[te];return q===void 0&&(q=new DO,O[te]=q),q.getHandSpace()};function ee(te){const q=k.indexOf(te.inputSource);if(q===-1)return;const le=O[q];le!==void 0&&le.dispatchEvent({type:te.type,data:te.inputSource})}function ne(){s.removeEventListener("select",ee),s.removeEventListener("selectstart",ee),s.removeEventListener("selectend",ee),s.removeEventListener("squeeze",ee),s.removeEventListener("squeezestart",ee),s.removeEventListener("squeezeend",ee),s.removeEventListener("end",ne),s.removeEventListener("inputsourceschange",ie);for(let te=0;te<O.length;te++){const q=k[te];q!==null&&(k[te]=null,O[te].disconnect(q))}V=null,U=null,e.setRenderTarget(x),v=null,_=null,m=null,s=null,A=null,j.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(te){o=te,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(te){u=te,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||l},this.setReferenceSpace=function(te){h=te},this.getBaseLayer=function(){return _!==null?_:v},this.getBinding=function(){return m},this.getFrame=function(){return E},this.getSession=function(){return s},this.setSession=async function(te){if(s=te,s!==null){if(x=e.getRenderTarget(),s.addEventListener("select",ee),s.addEventListener("selectstart",ee),s.addEventListener("selectend",ee),s.addEventListener("squeeze",ee),s.addEventListener("squeezestart",ee),s.addEventListener("squeezeend",ee),s.addEventListener("end",ne),s.addEventListener("inputsourceschange",ie),w.xrCompatible!==!0&&await t.makeXRCompatible(),s.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const q={antialias:s.renderState.layers===void 0?w.antialias:!0,alpha:w.alpha,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:o};v=new XRWebGLLayer(s,t,q),s.updateRenderState({baseLayer:v}),A=new iu(v.framebufferWidth,v.framebufferHeight,{format:Rp,type:Fh,encoding:e.outputEncoding})}else{let q=null,le=null,_e=null;w.depth&&(_e=w.stencil?35056:33190,q=w.stencil?mv:lv,le=w.stencil?av:U_);const Le={colorFormat:32856,depthFormat:_e,scaleFactor:o};m=new XRWebGLBinding(s,t),_=m.createProjectionLayer(Le),s.updateRenderState({layers:[_]}),A=new iu(_.textureWidth,_.textureHeight,{format:Rp,type:Fh,depthTexture:new JB(_.textureWidth,_.textureHeight,le,void 0,void 0,void 0,void 0,void 0,void 0,q),stencilBuffer:w.stencil,encoding:e.outputEncoding,samples:w.antialias?4:0});const xe=e.properties.get(A);xe.__ignoreDepthValues=_.ignoreDepthValues}A.isXRRenderTarget=!0,this.setFoveation(1),h=null,l=await s.requestReferenceSpace(u),j.setContext(s),j.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function ie(te){for(let q=0;q<te.removed.length;q++){const le=te.removed[q],_e=k.indexOf(le);_e>=0&&(k[_e]=null,O[_e].dispatchEvent({type:"disconnected",data:le}))}for(let q=0;q<te.added.length;q++){const le=te.added[q];let _e=k.indexOf(le);if(_e===-1){for(let xe=0;xe<O.length;xe++)if(xe>=k.length){k.push(le),_e=xe;break}else if(k[xe]===null){k[xe]=le,_e=xe;break}if(_e===-1)break}const Le=O[_e];Le&&Le.dispatchEvent({type:"connected",data:le})}}const se=new Te,fe=new Te;function ae(te,q,le){se.setFromMatrixPosition(q.matrixWorld),fe.setFromMatrixPosition(le.matrixWorld);const _e=se.distanceTo(fe),Le=q.projectionMatrix.elements,xe=le.projectionMatrix.elements,Ve=Le[14]/(Le[10]-1),Re=Le[14]/(Le[10]+1),Ze=(Le[9]+1)/Le[5],et=(Le[9]-1)/Le[5],ct=(Le[8]-1)/Le[0],rt=(xe[8]+1)/xe[0],Ne=Ve*ct,we=Ve*rt,ze=_e/(-ct+rt),it=ze*-ct;q.matrixWorld.decompose(te.position,te.quaternion,te.scale),te.translateX(it),te.translateZ(ze),te.matrixWorld.compose(te.position,te.quaternion,te.scale),te.matrixWorldInverse.copy(te.matrixWorld).invert();const nt=Ve+ze,Mt=Re+ze,At=Ne-it,ht=we+(_e-it),Et=Ze*Re/Mt*nt,wt=et*Re/Mt*nt;te.projectionMatrix.makePerspective(At,ht,Et,wt,nt,Mt)}function he(te,q){q===null?te.matrixWorld.copy(te.matrix):te.matrixWorld.multiplyMatrices(q.matrixWorld,te.matrix),te.matrixWorldInverse.copy(te.matrixWorld).invert()}this.updateCamera=function(te){if(s===null)return;z.near=N.near=D.near=te.near,z.far=N.far=D.far=te.far,(V!==z.near||U!==z.far)&&(s.updateRenderState({depthNear:z.near,depthFar:z.far}),V=z.near,U=z.far);const q=te.parent,le=z.cameras;he(z,q);for(let Le=0;Le<le.length;Le++)he(le[Le],q);z.matrixWorld.decompose(z.position,z.quaternion,z.scale),te.position.copy(z.position),te.quaternion.copy(z.quaternion),te.scale.copy(z.scale),te.matrix.copy(z.matrix),te.matrixWorld.copy(z.matrixWorld);const _e=te.children;for(let Le=0,xe=_e.length;Le<xe;Le++)_e[Le].updateMatrixWorld(!0);le.length===2?ae(z,D,N):z.projectionMatrix.copy(D.projectionMatrix)},this.getCamera=function(){return z},this.getFoveation=function(){if(_!==null)return _.fixedFoveation;if(v!==null)return v.fixedFoveation},this.setFoveation=function(te){_!==null&&(_.fixedFoveation=te),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=te)};let ge=null;function Ie(te,q){if(p=q.getViewerPose(h||l),E=q,p!==null){const le=p.views;v!==null&&(e.setRenderTargetFramebuffer(A,v.framebuffer),e.setRenderTarget(A));let _e=!1;le.length!==z.cameras.length&&(z.cameras.length=0,_e=!0);for(let Le=0;Le<le.length;Le++){const xe=le[Le];let Ve=null;if(v!==null)Ve=v.getViewport(xe);else{const Ze=m.getViewSubImage(_,xe);Ve=Ze.viewport,Le===0&&(e.setRenderTargetTextures(A,Ze.colorTexture,_.ignoreDepthValues?void 0:Ze.depthStencilTexture),e.setRenderTarget(A))}let Re=F[Le];Re===void 0&&(Re=new So,Re.layers.enable(Le),Re.viewport=new xi,F[Le]=Re),Re.matrix.fromArray(xe.transform.matrix),Re.projectionMatrix.fromArray(xe.projectionMatrix),Re.viewport.set(Ve.x,Ve.y,Ve.width,Ve.height),Le===0&&z.matrix.copy(Re.matrix),_e===!0&&z.cameras.push(Re)}}for(let le=0;le<O.length;le++){const _e=k[le],Le=O[le];_e!==null&&Le!==void 0&&Le.update(_e,q,h||l)}ge&&ge(te,q),E=null}const j=new P9;j.setAnimationLoop(Ie),this.setAnimationLoop=function(te){ge=te},this.dispose=function(){}}}function fge(r,e){function t(x,A){x.fogColor.value.copy(A.color),A.isFog?(x.fogNear.value=A.near,x.fogFar.value=A.far):A.isFogExp2&&(x.fogDensity.value=A.density)}function i(x,A,O,k,D){A.isMeshBasicMaterial||A.isMeshLambertMaterial?s(x,A):A.isMeshToonMaterial?(s(x,A),m(x,A)):A.isMeshPhongMaterial?(s(x,A),p(x,A)):A.isMeshStandardMaterial?(s(x,A),_(x,A),A.isMeshPhysicalMaterial&&v(x,A,D)):A.isMeshMatcapMaterial?(s(x,A),E(x,A)):A.isMeshDepthMaterial?s(x,A):A.isMeshDistanceMaterial?(s(x,A),w(x,A)):A.isMeshNormalMaterial?s(x,A):A.isLineBasicMaterial?(o(x,A),A.isLineDashedMaterial&&l(x,A)):A.isPointsMaterial?u(x,A,O,k):A.isSpriteMaterial?h(x,A):A.isShadowMaterial?(x.color.value.copy(A.color),x.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function s(x,A){x.opacity.value=A.opacity,A.color&&x.diffuse.value.copy(A.color),A.emissive&&x.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(x.map.value=A.map),A.alphaMap&&(x.alphaMap.value=A.alphaMap),A.bumpMap&&(x.bumpMap.value=A.bumpMap,x.bumpScale.value=A.bumpScale,A.side===Nc&&(x.bumpScale.value*=-1)),A.displacementMap&&(x.displacementMap.value=A.displacementMap,x.displacementScale.value=A.displacementScale,x.displacementBias.value=A.displacementBias),A.emissiveMap&&(x.emissiveMap.value=A.emissiveMap),A.normalMap&&(x.normalMap.value=A.normalMap,x.normalScale.value.copy(A.normalScale),A.side===Nc&&x.normalScale.value.negate()),A.specularMap&&(x.specularMap.value=A.specularMap),A.alphaTest>0&&(x.alphaTest.value=A.alphaTest);const O=e.get(A).envMap;if(O&&(x.envMap.value=O,x.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=A.reflectivity,x.ior.value=A.ior,x.refractionRatio.value=A.refractionRatio),A.lightMap){x.lightMap.value=A.lightMap;const N=r.physicallyCorrectLights!==!0?Math.PI:1;x.lightMapIntensity.value=A.lightMapIntensity*N}A.aoMap&&(x.aoMap.value=A.aoMap,x.aoMapIntensity.value=A.aoMapIntensity);let k;A.map?k=A.map:A.specularMap?k=A.specularMap:A.displacementMap?k=A.displacementMap:A.normalMap?k=A.normalMap:A.bumpMap?k=A.bumpMap:A.roughnessMap?k=A.roughnessMap:A.metalnessMap?k=A.metalnessMap:A.alphaMap?k=A.alphaMap:A.emissiveMap?k=A.emissiveMap:A.clearcoatMap?k=A.clearcoatMap:A.clearcoatNormalMap?k=A.clearcoatNormalMap:A.clearcoatRoughnessMap?k=A.clearcoatRoughnessMap:A.iridescenceMap?k=A.iridescenceMap:A.iridescenceThicknessMap?k=A.iridescenceThicknessMap:A.specularIntensityMap?k=A.specularIntensityMap:A.specularColorMap?k=A.specularColorMap:A.transmissionMap?k=A.transmissionMap:A.thicknessMap?k=A.thicknessMap:A.sheenColorMap?k=A.sheenColorMap:A.sheenRoughnessMap&&(k=A.sheenRoughnessMap),k!==void 0&&(k.isWebGLRenderTarget&&(k=k.texture),k.matrixAutoUpdate===!0&&k.updateMatrix(),x.uvTransform.value.copy(k.matrix));let D;A.aoMap?D=A.aoMap:A.lightMap&&(D=A.lightMap),D!==void 0&&(D.isWebGLRenderTarget&&(D=D.texture),D.matrixAutoUpdate===!0&&D.updateMatrix(),x.uv2Transform.value.copy(D.matrix))}function o(x,A){x.diffuse.value.copy(A.color),x.opacity.value=A.opacity}function l(x,A){x.dashSize.value=A.dashSize,x.totalSize.value=A.dashSize+A.gapSize,x.scale.value=A.scale}function u(x,A,O,k){x.diffuse.value.copy(A.color),x.opacity.value=A.opacity,x.size.value=A.size*O,x.scale.value=k*.5,A.map&&(x.map.value=A.map),A.alphaMap&&(x.alphaMap.value=A.alphaMap),A.alphaTest>0&&(x.alphaTest.value=A.alphaTest);let D;A.map?D=A.map:A.alphaMap&&(D=A.alphaMap),D!==void 0&&(D.matrixAutoUpdate===!0&&D.updateMatrix(),x.uvTransform.value.copy(D.matrix))}function h(x,A){x.diffuse.value.copy(A.color),x.opacity.value=A.opacity,x.rotation.value=A.rotation,A.map&&(x.map.value=A.map),A.alphaMap&&(x.alphaMap.value=A.alphaMap),A.alphaTest>0&&(x.alphaTest.value=A.alphaTest);let O;A.map?O=A.map:A.alphaMap&&(O=A.alphaMap),O!==void 0&&(O.matrixAutoUpdate===!0&&O.updateMatrix(),x.uvTransform.value.copy(O.matrix))}function p(x,A){x.specular.value.copy(A.specular),x.shininess.value=Math.max(A.shininess,1e-4)}function m(x,A){A.gradientMap&&(x.gradientMap.value=A.gradientMap)}function _(x,A){x.roughness.value=A.roughness,x.metalness.value=A.metalness,A.roughnessMap&&(x.roughnessMap.value=A.roughnessMap),A.metalnessMap&&(x.metalnessMap.value=A.metalnessMap),e.get(A).envMap&&(x.envMapIntensity.value=A.envMapIntensity)}function v(x,A,O){x.ior.value=A.ior,A.sheen>0&&(x.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),x.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(x.sheenColorMap.value=A.sheenColorMap),A.sheenRoughnessMap&&(x.sheenRoughnessMap.value=A.sheenRoughnessMap)),A.clearcoat>0&&(x.clearcoat.value=A.clearcoat,x.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(x.clearcoatMap.value=A.clearcoatMap),A.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap),A.clearcoatNormalMap&&(x.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),x.clearcoatNormalMap.value=A.clearcoatNormalMap,A.side===Nc&&x.clearcoatNormalScale.value.negate())),A.iridescence>0&&(x.iridescence.value=A.iridescence,x.iridescenceIOR.value=A.iridescenceIOR,x.iridescenceThicknessMinimum.value=A.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=A.iridescenceThicknessRange[1],A.iridescenceMap&&(x.iridescenceMap.value=A.iridescenceMap),A.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=A.iridescenceThicknessMap)),A.transmission>0&&(x.transmission.value=A.transmission,x.transmissionSamplerMap.value=O.texture,x.transmissionSamplerSize.value.set(O.width,O.height),A.transmissionMap&&(x.transmissionMap.value=A.transmissionMap),x.thickness.value=A.thickness,A.thicknessMap&&(x.thicknessMap.value=A.thicknessMap),x.attenuationDistance.value=A.attenuationDistance,x.attenuationColor.value.copy(A.attenuationColor)),x.specularIntensity.value=A.specularIntensity,x.specularColor.value.copy(A.specularColor),A.specularIntensityMap&&(x.specularIntensityMap.value=A.specularIntensityMap),A.specularColorMap&&(x.specularColorMap.value=A.specularColorMap)}function E(x,A){A.matcap&&(x.matcap.value=A.matcap)}function w(x,A){x.referencePosition.value.copy(A.referencePosition),x.nearDistance.value=A.nearDistance,x.farDistance.value=A.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function mge(r,e,t,i){let s={},o={},l=[];const u=t.isWebGL2?r.getParameter(35375):0;function h(k,D){const N=D.program;i.uniformBlockBinding(k,N)}function p(k,D){let N=s[k.id];N===void 0&&(w(k),N=m(k),s[k.id]=N,k.addEventListener("dispose",A));const F=D.program;i.updateUBOMapping(k,F);const z=e.render.frame;o[k.id]!==z&&(v(k),o[k.id]=z)}function m(k){const D=_();k.__bindingPointIndex=D;const N=r.createBuffer(),F=k.__size,z=k.usage;return r.bindBuffer(35345,N),r.bufferData(35345,F,z),r.bindBuffer(35345,null),r.bindBufferBase(35345,D,N),N}function _(){for(let k=0;k<u;k++)if(l.indexOf(k)===-1)return l.push(k),k;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(k){const D=s[k.id],N=k.uniforms,F=k.__cache;r.bindBuffer(35345,D);for(let z=0,V=N.length;z<V;z++){const U=N[z];if(E(U,z,F)===!0){const ee=U.value,ne=U.__offset;typeof ee=="number"?(U.__data[0]=ee,r.bufferSubData(35345,ne,U.__data)):(U.value.isMatrix3?(U.__data[0]=U.value.elements[0],U.__data[1]=U.value.elements[1],U.__data[2]=U.value.elements[2],U.__data[3]=U.value.elements[0],U.__data[4]=U.value.elements[3],U.__data[5]=U.value.elements[4],U.__data[6]=U.value.elements[5],U.__data[7]=U.value.elements[0],U.__data[8]=U.value.elements[6],U.__data[9]=U.value.elements[7],U.__data[10]=U.value.elements[8],U.__data[11]=U.value.elements[0]):ee.toArray(U.__data),r.bufferSubData(35345,ne,U.__data))}}r.bindBuffer(35345,null)}function E(k,D,N){const F=k.value;if(N[D]===void 0)return typeof F=="number"?N[D]=F:N[D]=F.clone(),!0;if(typeof F=="number"){if(N[D]!==F)return N[D]=F,!0}else{const z=N[D];if(z.equals(F)===!1)return z.copy(F),!0}return!1}function w(k){const D=k.uniforms;let N=0;const F=16;let z=0;for(let V=0,U=D.length;V<U;V++){const ee=D[V],ne=x(ee);if(ee.__data=new Float32Array(ne.storage/Float32Array.BYTES_PER_ELEMENT),ee.__offset=N,V>0){z=N%F;const ie=F-z;z!==0&&ie-ne.boundary<0&&(N+=F-z,ee.__offset=N)}N+=ne.storage}return z=N%F,z>0&&(N+=F-z),k.__size=N,k.__cache={},this}function x(k){const D=k.value,N={boundary:0,storage:0};return typeof D=="number"?(N.boundary=4,N.storage=4):D.isVector2?(N.boundary=8,N.storage=8):D.isVector3||D.isColor?(N.boundary=16,N.storage=12):D.isVector4?(N.boundary=16,N.storage=16):D.isMatrix3?(N.boundary=48,N.storage=48):D.isMatrix4?(N.boundary=64,N.storage=64):D.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",D),N}function A(k){const D=k.target;D.removeEventListener("dispose",A);const N=l.indexOf(D.__bindingPointIndex);l.splice(N,1),r.deleteBuffer(s[D.id]),delete s[D.id],delete o[D.id]}function O(){for(const k in s)r.deleteBuffer(s[k]);l=[],s={},o={}}return{bind:h,update:p,dispose:O}}function gge(){const r=WS("canvas");return r.style.display="block",r}function QB(r={}){this.isWebGLRenderer=!0;const e=r.canvas!==void 0?r.canvas:gge(),t=r.context!==void 0?r.context:null,i=r.depth!==void 0?r.depth:!0,s=r.stencil!==void 0?r.stencil:!0,o=r.antialias!==void 0?r.antialias:!1,l=r.premultipliedAlpha!==void 0?r.premultipliedAlpha:!0,u=r.preserveDrawingBuffer!==void 0?r.preserveDrawingBuffer:!1,h=r.powerPreference!==void 0?r.powerPreference:"default",p=r.failIfMajorPerformanceCaveat!==void 0?r.failIfMajorPerformanceCaveat:!1;let m;t!==null?m=t.getContextAttributes().alpha:m=r.alpha!==void 0?r.alpha:!1;let _=null,v=null;const E=[],w=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=mm,this.physicallyCorrectLights=!1,this.toneMapping=og,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const x=this;let A=!1,O=0,k=0,D=null,N=-1,F=null;const z=new xi,V=new xi;let U=null,ee=e.width,ne=e.height,ie=1,se=null,fe=null;const ae=new xi(0,0,ee,ne),he=new xi(0,0,ee,ne);let ge=!1;const Ie=new KI;let j=!1,te=!1,q=null;const le=new Sr,_e=new Ot,Le=new Te,xe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ve(){return D===null?ie:1}let Re=t;function Ze(Ae,at){for(let bt=0;bt<Ae.length;bt++){const dt=Ae[bt],Dt=e.getContext(dt,at);if(Dt!==null)return Dt}return null}try{const Ae={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:p};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${q1}`),e.addEventListener("webglcontextlost",$e,!1),e.addEventListener("webglcontextrestored",Ge,!1),e.addEventListener("webglcontextcreationerror",Bt,!1),Re===null){const at=["webgl2","webgl","experimental-webgl"];if(x.isWebGL1Renderer===!0&&at.shift(),Re=Ze(at,Ae),Re===null)throw Ze(at)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Re.getShaderPrecisionFormat===void 0&&(Re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ae){throw console.error("THREE.WebGLRenderer: "+Ae.message),Ae}let et,ct,rt,Ne,we,ze,it,nt,Mt,At,ht,Et,wt,pt,be,Z,ke,lt,mt,xt,ut,He,Ce,X;function J(){et=new Rfe(Re),ct=new wfe(Re,et,r),et.init(ct),He=new W9(Re,et,ct),rt=new cge(Re,et,ct),Ne=new Lfe,we=new qme,ze=new hge(Re,et,rt,we,ct,He,Ne),it=new Cfe(x),nt=new Ife(x),Mt=new jhe(Re,ct),Ce=new $fe(Re,et,Mt,ct),At=new kfe(Re,Mt,Ne,Ce),ht=new Pfe(Re,At,Mt,Ne),mt=new Bfe(Re,ct,ze),Z=new xfe(we),Et=new Qme(x,it,nt,et,ct,Ce,Z),wt=new fge(x,we),pt=new ege,be=new oge(et,ct),lt=new Efe(x,it,rt,ht,m,l),ke=new uge(x,ht,ct),X=new mge(Re,Ne,ct,rt),xt=new Sfe(Re,et,Ne,ct),ut=new Ofe(Re,et,Ne,ct),Ne.programs=Et.programs,x.capabilities=ct,x.extensions=et,x.properties=we,x.renderLists=pt,x.shadowMap=ke,x.state=rt,x.info=Ne}J();const oe=new pge(x,Re);this.xr=oe,this.getContext=function(){return Re},this.getContextAttributes=function(){return Re.getContextAttributes()},this.forceContextLoss=function(){const Ae=et.get("WEBGL_lose_context");Ae&&Ae.loseContext()},this.forceContextRestore=function(){const Ae=et.get("WEBGL_lose_context");Ae&&Ae.restoreContext()},this.getPixelRatio=function(){return ie},this.setPixelRatio=function(Ae){Ae!==void 0&&(ie=Ae,this.setSize(ee,ne,!1))},this.getSize=function(Ae){return Ae.set(ee,ne)},this.setSize=function(Ae,at,bt){if(oe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ee=Ae,ne=at,e.width=Math.floor(Ae*ie),e.height=Math.floor(at*ie),bt!==!1&&(e.style.width=Ae+"px",e.style.height=at+"px"),this.setViewport(0,0,Ae,at)},this.getDrawingBufferSize=function(Ae){return Ae.set(ee*ie,ne*ie).floor()},this.setDrawingBufferSize=function(Ae,at,bt){ee=Ae,ne=at,ie=bt,e.width=Math.floor(Ae*bt),e.height=Math.floor(at*bt),this.setViewport(0,0,Ae,at)},this.getCurrentViewport=function(Ae){return Ae.copy(z)},this.getViewport=function(Ae){return Ae.copy(ae)},this.setViewport=function(Ae,at,bt,dt){Ae.isVector4?ae.set(Ae.x,Ae.y,Ae.z,Ae.w):ae.set(Ae,at,bt,dt),rt.viewport(z.copy(ae).multiplyScalar(ie).floor())},this.getScissor=function(Ae){return Ae.copy(he)},this.setScissor=function(Ae,at,bt,dt){Ae.isVector4?he.set(Ae.x,Ae.y,Ae.z,Ae.w):he.set(Ae,at,bt,dt),rt.scissor(V.copy(he).multiplyScalar(ie).floor())},this.getScissorTest=function(){return ge},this.setScissorTest=function(Ae){rt.setScissorTest(ge=Ae)},this.setOpaqueSort=function(Ae){se=Ae},this.setTransparentSort=function(Ae){fe=Ae},this.getClearColor=function(Ae){return Ae.copy(lt.getClearColor())},this.setClearColor=function(){lt.setClearColor.apply(lt,arguments)},this.getClearAlpha=function(){return lt.getClearAlpha()},this.setClearAlpha=function(){lt.setClearAlpha.apply(lt,arguments)},this.clear=function(Ae=!0,at=!0,bt=!0){let dt=0;Ae&&(dt|=16384),at&&(dt|=256),bt&&(dt|=1024),Re.clear(dt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",$e,!1),e.removeEventListener("webglcontextrestored",Ge,!1),e.removeEventListener("webglcontextcreationerror",Bt,!1),pt.dispose(),be.dispose(),we.dispose(),it.dispose(),nt.dispose(),ht.dispose(),Ce.dispose(),X.dispose(),Et.dispose(),oe.dispose(),oe.removeEventListener("sessionstart",Tn),oe.removeEventListener("sessionend",Mr),q&&(q.dispose(),q=null),nr.stop()};function $e(Ae){Ae.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function Ge(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const Ae=Ne.autoReset,at=ke.enabled,bt=ke.autoUpdate,dt=ke.needsUpdate,Dt=ke.type;J(),Ne.autoReset=Ae,ke.enabled=at,ke.autoUpdate=bt,ke.needsUpdate=dt,ke.type=Dt}function Bt(Ae){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ae.statusMessage)}function Pe(Ae){const at=Ae.target;at.removeEventListener("dispose",Pe),Wt(at)}function Wt(Ae){st(Ae),we.remove(Ae)}function st(Ae){const at=we.get(Ae).programs;at!==void 0&&(at.forEach(function(bt){Et.releaseProgram(bt)}),Ae.isShaderMaterial&&Et.releaseShaderCache(Ae))}this.renderBufferDirect=function(Ae,at,bt,dt,Dt,xn){at===null&&(at=xe);const Bn=Dt.isMesh&&Dt.matrixWorld.determinant()<0,er=It(Ae,at,bt,dt,Dt);rt.setMaterial(dt,Bn);let mr=bt.index;const Qr=bt.attributes.position;if(mr===null){if(Qr===void 0||Qr.count===0)return}else if(mr.count===0)return;let yr=1;dt.wireframe===!0&&(mr=At.getWireframeAttribute(bt),yr=2),Ce.setup(Dt,dt,er,bt,mr);let wr,Gi=xt;mr!==null&&(wr=Mt.get(mr),Gi=ut,Gi.setIndex(wr));const Fo=mr!==null?mr.count:Qr.count,wo=bt.drawRange.start*yr,nl=bt.drawRange.count*yr,Yt=xn!==null?xn.start*yr:0,lr=xn!==null?xn.count*yr:1/0,oa=Math.max(wo,Yt),Uo=Math.min(Fo,wo+nl,Yt+lr)-1,hs=Math.max(0,Uo-oa+1);if(hs!==0){if(Dt.isMesh)dt.wireframe===!0?(rt.setLineWidth(dt.wireframeLinewidth*Ve()),Gi.setMode(1)):Gi.setMode(4);else if(Dt.isLine){let ds=dt.linewidth;ds===void 0&&(ds=1),rt.setLineWidth(ds*Ve()),Dt.isLineSegments?Gi.setMode(1):Dt.isLineLoop?Gi.setMode(2):Gi.setMode(3)}else Dt.isPoints?Gi.setMode(0):Dt.isSprite&&Gi.setMode(4);if(Dt.isInstancedMesh)Gi.renderInstances(oa,hs,Dt.count);else if(bt.isInstancedBufferGeometry){const ds=Math.min(bt.instanceCount,bt._maxInstanceCount);Gi.renderInstances(oa,hs,ds)}else Gi.render(oa,hs)}},this.compile=function(Ae,at){v=be.get(Ae),v.init(),w.push(v),Ae.traverseVisible(function(bt){bt.isLight&&bt.layers.test(at.layers)&&(v.pushLight(bt),bt.castShadow&&v.pushShadow(bt))}),v.setupLights(x.physicallyCorrectLights),Ae.traverse(function(bt){const dt=bt.material;if(dt)if(Array.isArray(dt))for(let Dt=0;Dt<dt.length;Dt++){const xn=dt[Dt];De(xn,Ae,bt)}else De(dt,Ae,bt)}),w.pop(),v=null};let Ut=null;function Pt(Ae){Ut&&Ut(Ae)}function Tn(){nr.stop()}function Mr(){nr.start()}const nr=new P9;nr.setAnimationLoop(Pt),typeof self<"u"&&nr.setContext(self),this.setAnimationLoop=function(Ae){Ut=Ae,oe.setAnimationLoop(Ae),Ae===null?nr.stop():nr.start()},oe.addEventListener("sessionstart",Tn),oe.addEventListener("sessionend",Mr),this.render=function(Ae,at){if(at!==void 0&&at.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;Ae.autoUpdate===!0&&Ae.updateMatrixWorld(),at.parent===null&&at.updateMatrixWorld(),oe.enabled===!0&&oe.isPresenting===!0&&(oe.cameraAutoUpdate===!0&&oe.updateCamera(at),at=oe.getCamera()),Ae.isScene===!0&&Ae.onBeforeRender(x,Ae,at,D),v=be.get(Ae,w.length),v.init(),w.push(v),le.multiplyMatrices(at.projectionMatrix,at.matrixWorldInverse),Ie.setFromProjectionMatrix(le),te=this.localClippingEnabled,j=Z.init(this.clippingPlanes,te,at),_=pt.get(Ae,E.length),_.init(),E.push(_),ai(Ae,at,0,x.sortObjects),_.finish(),x.sortObjects===!0&&_.sort(se,fe),j===!0&&Z.beginShadows();const bt=v.state.shadowsArray;if(ke.render(bt,Ae,at),j===!0&&Z.endShadows(),this.info.autoReset===!0&&this.info.reset(),lt.render(_,Ae),v.setupLights(x.physicallyCorrectLights),at.isArrayCamera){const dt=at.cameras;for(let Dt=0,xn=dt.length;Dt<xn;Dt++){const Bn=dt[Dt];ar(_,Ae,Bn,Bn.viewport)}}else ar(_,Ae,at);D!==null&&(ze.updateMultisampleRenderTarget(D),ze.updateRenderTargetMipmap(D)),Ae.isScene===!0&&Ae.onAfterRender(x,Ae,at),Ce.resetDefaultState(),N=-1,F=null,w.pop(),w.length>0?v=w[w.length-1]:v=null,E.pop(),E.length>0?_=E[E.length-1]:_=null};function ai(Ae,at,bt,dt){if(Ae.visible===!1)return;if(Ae.layers.test(at.layers)){if(Ae.isGroup)bt=Ae.renderOrder;else if(Ae.isLOD)Ae.autoUpdate===!0&&Ae.update(at);else if(Ae.isLight)v.pushLight(Ae),Ae.castShadow&&v.pushShadow(Ae);else if(Ae.isSprite){if(!Ae.frustumCulled||Ie.intersectsSprite(Ae)){dt&&Le.setFromMatrixPosition(Ae.matrixWorld).applyMatrix4(le);const xn=ht.update(Ae),Bn=Ae.material;Bn.visible&&_.push(Ae,xn,Bn,bt,Le.z,null)}}else if((Ae.isMesh||Ae.isLine||Ae.isPoints)&&(Ae.isSkinnedMesh&&Ae.skeleton.frame!==Ne.render.frame&&(Ae.skeleton.update(),Ae.skeleton.frame=Ne.render.frame),!Ae.frustumCulled||Ie.intersectsObject(Ae))){dt&&Le.setFromMatrixPosition(Ae.matrixWorld).applyMatrix4(le);const xn=ht.update(Ae),Bn=Ae.material;if(Array.isArray(Bn)){const er=xn.groups;for(let mr=0,Qr=er.length;mr<Qr;mr++){const yr=er[mr],wr=Bn[yr.materialIndex];wr&&wr.visible&&_.push(Ae,xn,wr,bt,Le.z,yr)}}else Bn.visible&&_.push(Ae,xn,Bn,bt,Le.z,null)}}const Dt=Ae.children;for(let xn=0,Bn=Dt.length;xn<Bn;xn++)ai(Dt[xn],at,bt,dt)}function ar(Ae,at,bt,dt){const Dt=Ae.opaque,xn=Ae.transmissive,Bn=Ae.transparent;v.setupLightsView(bt),xn.length>0&&Qn(Dt,at,bt),dt&&rt.viewport(z.copy(dt)),Dt.length>0&&Q(Dt,at,bt),xn.length>0&&Q(xn,at,bt),Bn.length>0&&Q(Bn,at,bt),rt.buffers.depth.setTest(!0),rt.buffers.depth.setMask(!0),rt.buffers.color.setMask(!0),rt.setPolygonOffset(!1)}function Qn(Ae,at,bt){const dt=ct.isWebGL2;q===null&&(q=new iu(1,1,{generateMipmaps:!0,type:et.has("EXT_color_buffer_half_float")?tb:Fh,minFilter:hb,samples:dt&&o===!0?4:0})),x.getDrawingBufferSize(_e),dt?q.setSize(_e.x,_e.y):q.setSize(xA(_e.x),xA(_e.y));const Dt=x.getRenderTarget();x.setRenderTarget(q),x.clear();const xn=x.toneMapping;x.toneMapping=og,Q(Ae,at,bt),x.toneMapping=xn,ze.updateMultisampleRenderTarget(q),ze.updateRenderTargetMipmap(q),x.setRenderTarget(Dt)}function Q(Ae,at,bt){const dt=at.isScene===!0?at.overrideMaterial:null;for(let Dt=0,xn=Ae.length;Dt<xn;Dt++){const Bn=Ae[Dt],er=Bn.object,mr=Bn.geometry,Qr=dt===null?Bn.material:dt,yr=Bn.group;er.layers.test(bt.layers)&&me(er,at,bt,mr,Qr,yr)}}function me(Ae,at,bt,dt,Dt,xn){Ae.onBeforeRender(x,at,bt,dt,Dt,xn),Ae.modelViewMatrix.multiplyMatrices(bt.matrixWorldInverse,Ae.matrixWorld),Ae.normalMatrix.getNormalMatrix(Ae.modelViewMatrix),Dt.onBeforeRender(x,at,bt,dt,Ae,xn),Dt.transparent===!0&&Dt.side===Kd?(Dt.side=Nc,Dt.needsUpdate=!0,x.renderBufferDirect(bt,at,dt,Dt,Ae,xn),Dt.side=Jg,Dt.needsUpdate=!0,x.renderBufferDirect(bt,at,dt,Dt,Ae,xn),Dt.side=Kd):x.renderBufferDirect(bt,at,dt,Dt,Ae,xn),Ae.onAfterRender(x,at,bt,dt,Dt,xn)}function De(Ae,at,bt){at.isScene!==!0&&(at=xe);const dt=we.get(Ae),Dt=v.state.lights,xn=v.state.shadowsArray,Bn=Dt.state.version,er=Et.getParameters(Ae,Dt.state,xn,at,bt),mr=Et.getProgramCacheKey(er);let Qr=dt.programs;dt.environment=Ae.isMeshStandardMaterial?at.environment:null,dt.fog=at.fog,dt.envMap=(Ae.isMeshStandardMaterial?nt:it).get(Ae.envMap||dt.environment),Qr===void 0&&(Ae.addEventListener("dispose",Pe),Qr=new Map,dt.programs=Qr);let yr=Qr.get(mr);if(yr!==void 0){if(dt.currentProgram===yr&&dt.lightsStateVersion===Bn)return qe(Ae,er),yr}else er.uniforms=Et.getUniforms(Ae),Ae.onBuild(bt,er,x),Ae.onBeforeCompile(er,x),yr=Et.acquireProgram(er,mr),Qr.set(mr,yr),dt.uniforms=er.uniforms;const wr=dt.uniforms;(!Ae.isShaderMaterial&&!Ae.isRawShaderMaterial||Ae.clipping===!0)&&(wr.clippingPlanes=Z.uniform),qe(Ae,er),dt.needsLights=gn(Ae),dt.lightsStateVersion=Bn,dt.needsLights&&(wr.ambientLightColor.value=Dt.state.ambient,wr.lightProbe.value=Dt.state.probe,wr.directionalLights.value=Dt.state.directional,wr.directionalLightShadows.value=Dt.state.directionalShadow,wr.spotLights.value=Dt.state.spot,wr.spotLightShadows.value=Dt.state.spotShadow,wr.rectAreaLights.value=Dt.state.rectArea,wr.ltc_1.value=Dt.state.rectAreaLTC1,wr.ltc_2.value=Dt.state.rectAreaLTC2,wr.pointLights.value=Dt.state.point,wr.pointLightShadows.value=Dt.state.pointShadow,wr.hemisphereLights.value=Dt.state.hemi,wr.directionalShadowMap.value=Dt.state.directionalShadowMap,wr.directionalShadowMatrix.value=Dt.state.directionalShadowMatrix,wr.spotShadowMap.value=Dt.state.spotShadowMap,wr.spotShadowMatrix.value=Dt.state.spotShadowMatrix,wr.pointShadowMap.value=Dt.state.pointShadowMap,wr.pointShadowMatrix.value=Dt.state.pointShadowMatrix);const Gi=yr.getUniforms(),Fo=RM.seqWithValue(Gi.seq,wr);return dt.currentProgram=yr,dt.uniformsList=Fo,yr}function qe(Ae,at){const bt=we.get(Ae);bt.outputEncoding=at.outputEncoding,bt.instancing=at.instancing,bt.skinning=at.skinning,bt.morphTargets=at.morphTargets,bt.morphNormals=at.morphNormals,bt.morphColors=at.morphColors,bt.morphTargetsCount=at.morphTargetsCount,bt.numClippingPlanes=at.numClippingPlanes,bt.numIntersection=at.numClipIntersection,bt.vertexAlphas=at.vertexAlphas,bt.vertexTangents=at.vertexTangents,bt.toneMapping=at.toneMapping}function It(Ae,at,bt,dt,Dt){at.isScene!==!0&&(at=xe),ze.resetTextureUnits();const xn=at.fog,Bn=dt.isMeshStandardMaterial?at.environment:null,er=D===null?x.outputEncoding:D.isXRRenderTarget===!0?D.texture.encoding:mm,mr=(dt.isMeshStandardMaterial?nt:it).get(dt.envMap||Bn),Qr=dt.vertexColors===!0&&!!bt.attributes.color&&bt.attributes.color.itemSize===4,yr=!!dt.normalMap&&!!bt.attributes.tangent,wr=!!bt.morphAttributes.position,Gi=!!bt.morphAttributes.normal,Fo=!!bt.morphAttributes.color,wo=dt.toneMapped?x.toneMapping:og,nl=bt.morphAttributes.position||bt.morphAttributes.normal||bt.morphAttributes.color,Yt=nl!==void 0?nl.length:0,lr=we.get(dt),oa=v.state.lights;if(j===!0&&(te===!0||Ae!==F)){const qn=Ae===F&&dt.id===N;Z.setState(dt,Ae,qn)}let Uo=!1;dt.version===lr.__version?(lr.needsLights&&lr.lightsStateVersion!==oa.state.version||lr.outputEncoding!==er||Dt.isInstancedMesh&&lr.instancing===!1||!Dt.isInstancedMesh&&lr.instancing===!0||Dt.isSkinnedMesh&&lr.skinning===!1||!Dt.isSkinnedMesh&&lr.skinning===!0||lr.envMap!==mr||dt.fog===!0&&lr.fog!==xn||lr.numClippingPlanes!==void 0&&(lr.numClippingPlanes!==Z.numPlanes||lr.numIntersection!==Z.numIntersection)||lr.vertexAlphas!==Qr||lr.vertexTangents!==yr||lr.morphTargets!==wr||lr.morphNormals!==Gi||lr.morphColors!==Fo||lr.toneMapping!==wo||ct.isWebGL2===!0&&lr.morphTargetsCount!==Yt)&&(Uo=!0):(Uo=!0,lr.__version=dt.version);let hs=lr.currentProgram;Uo===!0&&(hs=De(dt,at,Dt));let ds=!1,li=!1,ur=!1;const pn=hs.getUniforms(),ir=lr.uniforms;if(rt.useProgram(hs.program)&&(ds=!0,li=!0,ur=!0),dt.id!==N&&(N=dt.id,li=!0),ds||F!==Ae){if(pn.setValue(Re,"projectionMatrix",Ae.projectionMatrix),ct.logarithmicDepthBuffer&&pn.setValue(Re,"logDepthBufFC",2/(Math.log(Ae.far+1)/Math.LN2)),F!==Ae&&(F=Ae,li=!0,ur=!0),dt.isShaderMaterial||dt.isMeshPhongMaterial||dt.isMeshToonMaterial||dt.isMeshStandardMaterial||dt.envMap){const qn=pn.map.cameraPosition;qn!==void 0&&qn.setValue(Re,Le.setFromMatrixPosition(Ae.matrixWorld))}(dt.isMeshPhongMaterial||dt.isMeshToonMaterial||dt.isMeshLambertMaterial||dt.isMeshBasicMaterial||dt.isMeshStandardMaterial||dt.isShaderMaterial)&&pn.setValue(Re,"isOrthographic",Ae.isOrthographicCamera===!0),(dt.isMeshPhongMaterial||dt.isMeshToonMaterial||dt.isMeshLambertMaterial||dt.isMeshBasicMaterial||dt.isMeshStandardMaterial||dt.isShaderMaterial||dt.isShadowMaterial||Dt.isSkinnedMesh)&&pn.setValue(Re,"viewMatrix",Ae.matrixWorldInverse)}if(Dt.isSkinnedMesh){pn.setOptional(Re,Dt,"bindMatrix"),pn.setOptional(Re,Dt,"bindMatrixInverse");const qn=Dt.skeleton;qn&&(ct.floatVertexTextures?(qn.boneTexture===null&&qn.computeBoneTexture(),pn.setValue(Re,"boneTexture",qn.boneTexture,ze),pn.setValue(Re,"boneTextureSize",qn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Tr=bt.morphAttributes;if((Tr.position!==void 0||Tr.normal!==void 0||Tr.color!==void 0&&ct.isWebGL2===!0)&&mt.update(Dt,bt,dt,hs),(li||lr.receiveShadow!==Dt.receiveShadow)&&(lr.receiveShadow=Dt.receiveShadow,pn.setValue(Re,"receiveShadow",Dt.receiveShadow)),li&&(pn.setValue(Re,"toneMappingExposure",x.toneMappingExposure),lr.needsLights&&qt(ir,ur),xn&&dt.fog===!0&&wt.refreshFogUniforms(ir,xn),wt.refreshMaterialUniforms(ir,dt,ie,ne,q),RM.upload(Re,lr.uniformsList,ir,ze)),dt.isShaderMaterial&&dt.uniformsNeedUpdate===!0&&(RM.upload(Re,lr.uniformsList,ir,ze),dt.uniformsNeedUpdate=!1),dt.isSpriteMaterial&&pn.setValue(Re,"center",Dt.center),pn.setValue(Re,"modelViewMatrix",Dt.modelViewMatrix),pn.setValue(Re,"normalMatrix",Dt.normalMatrix),pn.setValue(Re,"modelMatrix",Dt.matrixWorld),dt.isShaderMaterial||dt.isRawShaderMaterial){const qn=dt.uniformsGroups;for(let ui=0,Ji=qn.length;ui<Ji;ui++)if(ct.isWebGL2){const Gr=qn[ui];X.update(Gr,hs),X.bind(Gr,hs)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return hs}function qt(Ae,at){Ae.ambientLightColor.needsUpdate=at,Ae.lightProbe.needsUpdate=at,Ae.directionalLights.needsUpdate=at,Ae.directionalLightShadows.needsUpdate=at,Ae.pointLights.needsUpdate=at,Ae.pointLightShadows.needsUpdate=at,Ae.spotLights.needsUpdate=at,Ae.spotLightShadows.needsUpdate=at,Ae.rectAreaLights.needsUpdate=at,Ae.hemisphereLights.needsUpdate=at}function gn(Ae){return Ae.isMeshLambertMaterial||Ae.isMeshToonMaterial||Ae.isMeshPhongMaterial||Ae.isMeshStandardMaterial||Ae.isShadowMaterial||Ae.isShaderMaterial&&Ae.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(Ae,at,bt){we.get(Ae.texture).__webglTexture=at,we.get(Ae.depthTexture).__webglTexture=bt;const dt=we.get(Ae);dt.__hasExternalTextures=!0,dt.__hasExternalTextures&&(dt.__autoAllocateDepthBuffer=bt===void 0,dt.__autoAllocateDepthBuffer||et.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),dt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ae,at){const bt=we.get(Ae);bt.__webglFramebuffer=at,bt.__useDefaultFramebuffer=at===void 0},this.setRenderTarget=function(Ae,at=0,bt=0){D=Ae,O=at,k=bt;let dt=!0;if(Ae){const er=we.get(Ae);er.__useDefaultFramebuffer!==void 0?(rt.bindFramebuffer(36160,null),dt=!1):er.__webglFramebuffer===void 0?ze.setupRenderTarget(Ae):er.__hasExternalTextures&&ze.rebindTextures(Ae,we.get(Ae.texture).__webglTexture,we.get(Ae.depthTexture).__webglTexture)}let Dt=null,xn=!1,Bn=!1;if(Ae){const er=Ae.texture;(er.isData3DTexture||er.isDataArrayTexture)&&(Bn=!0);const mr=we.get(Ae).__webglFramebuffer;Ae.isWebGLCubeRenderTarget?(Dt=mr[at],xn=!0):ct.isWebGL2&&Ae.samples>0&&ze.useMultisampledRTT(Ae)===!1?Dt=we.get(Ae).__webglMultisampledFramebuffer:Dt=mr,z.copy(Ae.viewport),V.copy(Ae.scissor),U=Ae.scissorTest}else z.copy(ae).multiplyScalar(ie).floor(),V.copy(he).multiplyScalar(ie).floor(),U=ge;if(rt.bindFramebuffer(36160,Dt)&&ct.drawBuffers&&dt&&rt.drawBuffers(Ae,Dt),rt.viewport(z),rt.scissor(V),rt.setScissorTest(U),xn){const er=we.get(Ae.texture);Re.framebufferTexture2D(36160,36064,34069+at,er.__webglTexture,bt)}else if(Bn){const er=we.get(Ae.texture),mr=at||0;Re.framebufferTextureLayer(36160,36064,er.__webglTexture,bt||0,mr)}N=-1},this.readRenderTargetPixels=function(Ae,at,bt,dt,Dt,xn,Bn){if(!(Ae&&Ae.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let er=we.get(Ae).__webglFramebuffer;if(Ae.isWebGLCubeRenderTarget&&Bn!==void 0&&(er=er[Bn]),er){rt.bindFramebuffer(36160,er);try{const mr=Ae.texture,Qr=mr.format,yr=mr.type;if(Qr!==Rp&&He.convert(Qr)!==Re.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const wr=yr===tb&&(et.has("EXT_color_buffer_half_float")||ct.isWebGL2&&et.has("EXT_color_buffer_float"));if(yr!==Fh&&He.convert(yr)!==Re.getParameter(35738)&&!(yr===Hg&&(ct.isWebGL2||et.has("OES_texture_float")||et.has("WEBGL_color_buffer_float")))&&!wr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}at>=0&&at<=Ae.width-dt&&bt>=0&&bt<=Ae.height-Dt&&Re.readPixels(at,bt,dt,Dt,He.convert(Qr),He.convert(yr),xn)}finally{const mr=D!==null?we.get(D).__webglFramebuffer:null;rt.bindFramebuffer(36160,mr)}}},this.copyFramebufferToTexture=function(Ae,at,bt=0){const dt=Math.pow(2,-bt),Dt=Math.floor(at.image.width*dt),xn=Math.floor(at.image.height*dt);ze.setTexture2D(at,0),Re.copyTexSubImage2D(3553,bt,0,0,Ae.x,Ae.y,Dt,xn),rt.unbindTexture()},this.copyTextureToTexture=function(Ae,at,bt,dt=0){const Dt=at.image.width,xn=at.image.height,Bn=He.convert(bt.format),er=He.convert(bt.type);ze.setTexture2D(bt,0),Re.pixelStorei(37440,bt.flipY),Re.pixelStorei(37441,bt.premultiplyAlpha),Re.pixelStorei(3317,bt.unpackAlignment),at.isDataTexture?Re.texSubImage2D(3553,dt,Ae.x,Ae.y,Dt,xn,Bn,er,at.image.data):at.isCompressedTexture?Re.compressedTexSubImage2D(3553,dt,Ae.x,Ae.y,at.mipmaps[0].width,at.mipmaps[0].height,Bn,at.mipmaps[0].data):Re.texSubImage2D(3553,dt,Ae.x,Ae.y,Bn,er,at.image),dt===0&&bt.generateMipmaps&&Re.generateMipmap(3553),rt.unbindTexture()},this.copyTextureToTexture3D=function(Ae,at,bt,dt,Dt=0){if(x.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const xn=Ae.max.x-Ae.min.x+1,Bn=Ae.max.y-Ae.min.y+1,er=Ae.max.z-Ae.min.z+1,mr=He.convert(dt.format),Qr=He.convert(dt.type);let yr;if(dt.isData3DTexture)ze.setTexture3D(dt,0),yr=32879;else if(dt.isDataArrayTexture)ze.setTexture2DArray(dt,0),yr=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Re.pixelStorei(37440,dt.flipY),Re.pixelStorei(37441,dt.premultiplyAlpha),Re.pixelStorei(3317,dt.unpackAlignment);const wr=Re.getParameter(3314),Gi=Re.getParameter(32878),Fo=Re.getParameter(3316),wo=Re.getParameter(3315),nl=Re.getParameter(32877),Yt=bt.isCompressedTexture?bt.mipmaps[0]:bt.image;Re.pixelStorei(3314,Yt.width),Re.pixelStorei(32878,Yt.height),Re.pixelStorei(3316,Ae.min.x),Re.pixelStorei(3315,Ae.min.y),Re.pixelStorei(32877,Ae.min.z),bt.isDataTexture||bt.isData3DTexture?Re.texSubImage3D(yr,Dt,at.x,at.y,at.z,xn,Bn,er,mr,Qr,Yt.data):bt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Re.compressedTexSubImage3D(yr,Dt,at.x,at.y,at.z,xn,Bn,er,mr,Yt.data)):Re.texSubImage3D(yr,Dt,at.x,at.y,at.z,xn,Bn,er,mr,Qr,Yt),Re.pixelStorei(3314,wr),Re.pixelStorei(32878,Gi),Re.pixelStorei(3316,Fo),Re.pixelStorei(3315,wo),Re.pixelStorei(32877,nl),Dt===0&&dt.generateMipmaps&&Re.generateMipmap(yr),rt.unbindTexture()},this.initTexture=function(Ae){Ae.isCubeTexture?ze.setTextureCube(Ae,0):Ae.isData3DTexture?ze.setTexture3D(Ae,0):Ae.isDataArrayTexture?ze.setTexture2DArray(Ae,0):ze.setTexture2D(Ae,0),rt.unbindTexture()},this.resetState=function(){O=0,k=0,D=null,rt.reset(),Ce.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class j9 extends QB{}j9.prototype.isWebGL1Renderer=!0;class qI{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new _n(e),this.density=t}clone(){return new qI(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class ZI{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new _n(e),this.near=t,this.far=i}clone(){return new ZI(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class VS extends is{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}class eR{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=HS,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=bf()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=bf()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=bf()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Wd=new Te;class ff{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Wd.fromBufferAttribute(this,t),Wd.applyMatrix4(e),this.setXYZ(t,Wd.x,Wd.y,Wd.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Wd.fromBufferAttribute(this,t),Wd.applyNormalMatrix(e),this.setXYZ(t,Wd.x,Wd.y,Wd.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Wd.fromBufferAttribute(this,t),Wd.transformDirection(e),this.setXYZ(t,Wd.x,Wd.y,Wd.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return new xs(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ff(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class qB extends Dc{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new _n(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let wT;const _$=new Te,xT=new Te,CT=new Te,MT=new Ot,v$=new Ot,X9=new Sr,EC=new Te,y$=new Te,$C=new Te,EH=new Ot,BO=new Ot,$H=new Ot;class Y9 extends is{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",wT===void 0){wT=new Ar;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new eR(t,5);wT.setIndex([0,1,2,0,2,3]),wT.setAttribute("position",new ff(i,3,0,!1)),wT.setAttribute("uv",new ff(i,2,3,!1))}this.geometry=wT,this.material=e!==void 0?e:new qB,this.center=new Ot(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xT.setFromMatrixScale(this.matrixWorld),X9.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),CT.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&xT.multiplyScalar(-CT.z);const i=this.material.rotation;let s,o;i!==0&&(o=Math.cos(i),s=Math.sin(i));const l=this.center;SC(EC.set(-.5,-.5,0),CT,l,xT,s,o),SC(y$.set(.5,-.5,0),CT,l,xT,s,o),SC($C.set(.5,.5,0),CT,l,xT,s,o),EH.set(0,0),BO.set(1,0),$H.set(1,1);let u=e.ray.intersectTriangle(EC,y$,$C,!1,_$);if(u===null&&(SC(y$.set(-.5,.5,0),CT,l,xT,s,o),BO.set(0,1),u=e.ray.intersectTriangle(EC,$C,y$,!1,_$),u===null))return;const h=e.ray.origin.distanceTo(_$);h<e.near||h>e.far||t.push({distance:h,point:_$.clone(),uv:df.getUV(_$,EC,y$,$C,EH,BO,$H,new Ot),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function SC(r,e,t,i,s,o){MT.subVectors(r,t).addScalar(.5).multiply(i),s!==void 0?(v$.x=o*MT.x-s*MT.y,v$.y=s*MT.x+o*MT.y):v$.copy(MT),r.copy(e),r.x+=v$.x,r.y+=v$.y,r.applyMatrix4(X9)}const wC=new Te,SH=new Te;class K9 extends is{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,s=t.length;i<s;i++){const o=t[i];this.addLevel(o.object.clone(),o.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,s;for(i=1,s=t.length;i<s&&!(e<t[i].distance);i++);return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){wC.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(wC);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){wC.setFromMatrixPosition(e.matrixWorld),SH.setFromMatrixPosition(this.matrixWorld);const i=wC.distanceTo(SH)/e.zoom;t[0].object.visible=!0;let s,o;for(s=1,o=t.length;s<o&&i>=t[s].distance;s++)t[s-1].object.visible=!1,t[s].object.visible=!0;for(this._currentLevel=s-1;s<o;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let s=0,o=i.length;s<o;s++){const l=i[s];t.object.levels.push({object:l.object.uuid,distance:l.distance})}return t}}const wH=new Te,xH=new xi,CH=new xi,_ge=new Te,MH=new Sr;class J9 extends bn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Sr,this.bindMatrixInverse=new Sr}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new xi,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,s=this.geometry;xH.fromBufferAttribute(s.attributes.skinIndex,e),CH.fromBufferAttribute(s.attributes.skinWeight,e),wH.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=CH.getComponent(o);if(l!==0){const u=xH.getComponent(o);MH.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),t.addScaledVector(_ge.copy(wH).applyMatrix4(MH),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class ZB extends is{constructor(){super(),this.isBone=!0,this.type="Bone"}}class u1 extends Rl{constructor(e=null,t=1,i=1,s,o,l,u,h,p=ia,m=ia,_,v){super(null,l,u,h,p,m,s,o,_,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const AH=new Sr,vge=new Sr;class tR{constructor(e=[],t=[]){this.uuid=bf(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new Sr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Sr;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const u=e[o]?e[o].matrixWorld:vge;AH.multiplyMatrices(u,t[o]),AH.toArray(i,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new tR(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=k9(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new u1(t,e,e,Rp,Hg);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const o=e.bones[i];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new ZB),this.bones.push(l),this.boneInverses.push(new Sr().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,o=t.length;s<o;s++){const l=t[s];e.bones.push(l.uuid);const u=i[s];e.boneInverses.push(u.toArray())}return e}}class nb extends xs{constructor(e,t,i,s=1){typeof i=="number"&&(s=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const IH=new Sr,RH=new Sr,xC=[],b$=new bn;class Q9 extends bn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new nb(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,s=this.count;if(b$.geometry=this.geometry,b$.material=this.material,b$.material!==void 0)for(let o=0;o<s;o++){this.getMatrixAt(o,IH),RH.multiplyMatrices(i,IH),b$.matrixWorld=RH,b$.raycast(e,xC);for(let l=0,u=xC.length;l<u;l++){const h=xC[l];h.instanceId=o,h.object=this,t.push(h)}xC.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new nb(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Sd extends Dc{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new _n(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const kH=new Te,OH=new Te,LH=new Sr,PO=new Tw,CC=new t_;class vd extends is{constructor(e=new Ar,t=new Sd){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,o=t.count;s<o;s++)kH.fromBufferAttribute(t,s-1),OH.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=kH.distanceTo(OH);e.setAttribute("lineDistance",new Pn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),CC.copy(i.boundingSphere),CC.applyMatrix4(s),CC.radius+=o,e.ray.intersectsSphere(CC)===!1)return;LH.copy(s).invert(),PO.copy(e.ray).applyMatrix4(LH);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,p=new Te,m=new Te,_=new Te,v=new Te,E=this.isLineSegments?2:1,w=i.index,x=i.attributes.position;if(w!==null){const A=Math.max(0,l.start),O=Math.min(w.count,l.start+l.count);for(let k=A,D=O-1;k<D;k+=E){const N=w.getX(k),F=w.getX(k+1);if(p.fromBufferAttribute(x,N),m.fromBufferAttribute(x,F),PO.distanceSqToSegment(p,m,v,_)>h)continue;v.applyMatrix4(this.matrixWorld);const z=e.ray.origin.distanceTo(v);z<e.near||z>e.far||t.push({distance:z,point:_.clone().applyMatrix4(this.matrixWorld),index:k,face:null,faceIndex:null,object:this})}}else{const A=Math.max(0,l.start),O=Math.min(x.count,l.start+l.count);for(let k=A,D=O-1;k<D;k+=E){if(p.fromBufferAttribute(x,k),m.fromBufferAttribute(x,k+1),PO.distanceSqToSegment(p,m,v,_)>h)continue;v.applyMatrix4(this.matrixWorld);const N=e.ray.origin.distanceTo(v);N<e.near||N>e.far||t.push({distance:N,point:_.clone().applyMatrix4(this.matrixWorld),index:k,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const NH=new Te,DH=new Te;class n_ extends vd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,o=t.count;s<o;s+=2)NH.fromBufferAttribute(t,s),DH.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+NH.distanceTo(DH);e.setAttribute("lineDistance",new Pn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class q9 extends vd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class nR extends Dc{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new _n(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const BH=new Sr,b2=new Tw,MC=new t_,AC=new Te;class Z9 extends is{constructor(e=new Ar,t=new nR){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),MC.copy(i.boundingSphere),MC.applyMatrix4(s),MC.radius+=o,e.ray.intersectsSphere(MC)===!1)return;BH.copy(s).invert(),b2.copy(e.ray).applyMatrix4(BH);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,p=i.index,m=i.attributes.position;if(p!==null){const _=Math.max(0,l.start),v=Math.min(p.count,l.start+l.count);for(let E=_,w=v;E<w;E++){const x=p.getX(E);AC.fromBufferAttribute(m,x),PH(AC,x,h,s,e,t,this)}}else{const _=Math.max(0,l.start),v=Math.min(m.count,l.start+l.count);for(let E=_,w=v;E<w;E++)AC.fromBufferAttribute(m,E),PH(AC,E,h,s,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function PH(r,e,t,i,s,o,l){const u=b2.distanceSqToPoint(r);if(u<t){const h=new Te;b2.closestPointToPoint(r,h),h.applyMatrix4(i);const p=s.ray.origin.distanceTo(h);if(p<s.near||p>s.far)return;o.push({distance:p,distanceToRay:Math.sqrt(u),point:h,index:e,face:null,object:l})}}class yge extends Rl{constructor(e,t,i,s,o,l,u,h,p){super(e,t,i,s,o,l,u,h,p),this.isVideoTexture=!0,this.minFilter=l!==void 0?l:Po,this.magFilter=o!==void 0?o:Po,this.generateMipmaps=!1;const m=this;function _(){m.needsUpdate=!0,e.requestVideoFrameCallback(_)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(_)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class bge extends Rl{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=ia,this.minFilter=ia,this.generateMipmaps=!1,this.needsUpdate=!0}}class ej extends Rl{constructor(e,t,i,s,o,l,u,h,p,m,_,v){super(null,l,u,h,p,m,s,o,_,v),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Tge extends Rl{constructor(e,t,i,s,o,l,u,h,p){super(e,t,i,s,o,l,u,h,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class pg{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,s=this.getPoint(0),o=0;t.push(0);for(let l=1;l<=e;l++)i=this.getPoint(l/e),o+=i.distanceTo(s),t.push(o),s=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let s=0;const o=i.length;let l;t?l=t:l=e*i[o-1];let u=0,h=o-1,p;for(;u<=h;)if(s=Math.floor(u+(h-u)/2),p=i[s]-l,p<0)u=s+1;else if(p>0)h=s-1;else{h=s;break}if(s=h,i[s]===l)return s/(o-1);const m=i[s],_=i[s+1]-m,v=(l-m)/_;return(s+v)/(o-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),l=this.getPoint(s),u=t||(o.isVector2?new Ot:new Te);return u.copy(l).sub(o).normalize(),u}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new Te,s=[],o=[],l=[],u=new Te,h=new Sr;for(let E=0;E<=e;E++){const w=E/e;s[E]=this.getTangentAt(w,new Te)}o[0]=new Te,l[0]=new Te;let p=Number.MAX_VALUE;const m=Math.abs(s[0].x),_=Math.abs(s[0].y),v=Math.abs(s[0].z);m<=p&&(p=m,i.set(1,0,0)),_<=p&&(p=_,i.set(0,1,0)),v<=p&&i.set(0,0,1),u.crossVectors(s[0],i).normalize(),o[0].crossVectors(s[0],u),l[0].crossVectors(s[0],o[0]);for(let E=1;E<=e;E++){if(o[E]=o[E-1].clone(),l[E]=l[E-1].clone(),u.crossVectors(s[E-1],s[E]),u.length()>Number.EPSILON){u.normalize();const w=Math.acos(Du(s[E-1].dot(s[E]),-1,1));o[E].applyMatrix4(h.makeRotationAxis(u,w))}l[E].crossVectors(s[E],o[E])}if(t===!0){let E=Math.acos(Du(o[0].dot(o[e]),-1,1));E/=e,s[0].dot(u.crossVectors(o[0],o[e]))>0&&(E=-E);for(let w=1;w<=e;w++)o[w].applyMatrix4(h.makeRotationAxis(s[w],E*w)),l[w].crossVectors(s[w],o[w])}return{tangents:s,normals:o,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class rR extends pg{constructor(e=0,t=0,i=1,s=1,o=0,l=Math.PI*2,u=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=s,this.aStartAngle=o,this.aEndAngle=l,this.aClockwise=u,this.aRotation=h}getPoint(e,t){const i=t||new Ot,s=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const l=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=s;for(;o>s;)o-=s;o<Number.EPSILON&&(l?o=0:o=s),this.aClockwise===!0&&!l&&(o===s?o=-s:o=o-s);const u=this.aStartAngle+e*o;let h=this.aX+this.xRadius*Math.cos(u),p=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const m=Math.cos(this.aRotation),_=Math.sin(this.aRotation),v=h-this.aX,E=p-this.aY;h=v*m-E*_+this.aX,p=v*_+E*m+this.aY}return i.set(h,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class tj extends rR{constructor(e,t,i,s,o,l){super(e,t,i,i,s,o,l),this.isArcCurve=!0,this.type="ArcCurve"}}function eP(){let r=0,e=0,t=0,i=0;function s(o,l,u,h){r=o,e=u,t=-3*o+3*l-2*u-h,i=2*o-2*l+u+h}return{initCatmullRom:function(o,l,u,h,p){s(l,u,p*(u-o),p*(h-l))},initNonuniformCatmullRom:function(o,l,u,h,p,m,_){let v=(l-o)/p-(u-o)/(p+m)+(u-l)/m,E=(u-l)/m-(h-l)/(m+_)+(h-u)/_;v*=m,E*=m,s(l,u,v,E)},calc:function(o){const l=o*o,u=l*o;return r+e*o+t*l+i*u}}}const IC=new Te,FO=new eP,UO=new eP,zO=new eP;class nj extends pg{constructor(e=[],t=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=s}getPoint(e,t=new Te){const i=t,s=this.points,o=s.length,l=(o-(this.closed?0:1))*e;let u=Math.floor(l),h=l-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:h===0&&u===o-1&&(u=o-2,h=1);let p,m;this.closed||u>0?p=s[(u-1)%o]:(IC.subVectors(s[0],s[1]).add(s[0]),p=IC);const _=s[u%o],v=s[(u+1)%o];if(this.closed||u+2<o?m=s[(u+2)%o]:(IC.subVectors(s[o-1],s[o-2]).add(s[o-1]),m=IC),this.curveType==="centripetal"||this.curveType==="chordal"){const E=this.curveType==="chordal"?.5:.25;let w=Math.pow(p.distanceToSquared(_),E),x=Math.pow(_.distanceToSquared(v),E),A=Math.pow(v.distanceToSquared(m),E);x<1e-4&&(x=1),w<1e-4&&(w=x),A<1e-4&&(A=x),FO.initNonuniformCatmullRom(p.x,_.x,v.x,m.x,w,x,A),UO.initNonuniformCatmullRom(p.y,_.y,v.y,m.y,w,x,A),zO.initNonuniformCatmullRom(p.z,_.z,v.z,m.z,w,x,A)}else this.curveType==="catmullrom"&&(FO.initCatmullRom(p.x,_.x,v.x,m.x,this.tension),UO.initCatmullRom(p.y,_.y,v.y,m.y,this.tension),zO.initCatmullRom(p.z,_.z,v.z,m.z,this.tension));return i.set(FO.calc(h),UO.calc(h),zO.calc(h)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new Te().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function FH(r,e,t,i,s){const o=(i-e)*.5,l=(s-t)*.5,u=r*r,h=r*u;return(2*t-2*i+o+l)*h+(-3*t+3*i-2*o-l)*u+o*r+t}function Ege(r,e){const t=1-r;return t*t*e}function $ge(r,e){return 2*(1-r)*r*e}function Sge(r,e){return r*r*e}function iS(r,e,t,i){return Ege(r,e)+$ge(r,t)+Sge(r,i)}function wge(r,e){const t=1-r;return t*t*t*e}function xge(r,e){const t=1-r;return 3*t*t*r*e}function Cge(r,e){return 3*(1-r)*r*r*e}function Mge(r,e){return r*r*r*e}function sS(r,e,t,i,s){return wge(r,e)+xge(r,t)+Cge(r,i)+Mge(r,s)}class tP extends pg{constructor(e=new Ot,t=new Ot,i=new Ot,s=new Ot){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new Ot){const i=t,s=this.v0,o=this.v1,l=this.v2,u=this.v3;return i.set(sS(e,s.x,o.x,l.x,u.x),sS(e,s.y,o.y,l.y,u.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rj extends pg{constructor(e=new Te,t=new Te,i=new Te,s=new Te){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new Te){const i=t,s=this.v0,o=this.v1,l=this.v2,u=this.v3;return i.set(sS(e,s.x,o.x,l.x,u.x),sS(e,s.y,o.y,l.y,u.y),sS(e,s.z,o.z,l.z,u.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class iR extends pg{constructor(e=new Ot,t=new Ot){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ot){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new Ot;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ij extends pg{constructor(e=new Te,t=new Te){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Te){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class nP extends pg{constructor(e=new Ot,t=new Ot,i=new Ot){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ot){const i=t,s=this.v0,o=this.v1,l=this.v2;return i.set(iS(e,s.x,o.x,l.x),iS(e,s.y,o.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rP extends pg{constructor(e=new Te,t=new Te,i=new Te){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Te){const i=t,s=this.v0,o=this.v1,l=this.v2;return i.set(iS(e,s.x,o.x,l.x),iS(e,s.y,o.y,l.y),iS(e,s.z,o.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class iP extends pg{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ot){const i=t,s=this.points,o=(s.length-1)*e,l=Math.floor(o),u=o-l,h=s[l===0?l:l-1],p=s[l],m=s[l>s.length-2?s.length-1:l+1],_=s[l>s.length-3?s.length-1:l+2];return i.set(FH(u,h.x,p.x,m.x,_.x),FH(u,h.y,p.y,m.y,_.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new Ot().fromArray(s))}return this}}var sP=Object.freeze({__proto__:null,ArcCurve:tj,CatmullRomCurve3:nj,CubicBezierCurve:tP,CubicBezierCurve3:rj,EllipseCurve:rR,LineCurve:iR,LineCurve3:ij,QuadraticBezierCurve:nP,QuadraticBezierCurve3:rP,SplineCurve:iP});class sj extends pg{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new iR(t,e))}getPoint(e,t){const i=e*this.getLength(),s=this.getCurveLengths();let o=0;for(;o<s.length;){if(s[o]>=i){const l=s[o]-i,u=this.curves[o],h=u.getLength(),p=h===0?0:1-l/h;return u.getPointAt(p,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,s=this.curves.length;i<s;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let s=0,o=this.curves;s<o.length;s++){const l=o[s],u=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,h=l.getPoints(u);for(let p=0;p<h.length;p++){const m=h[p];i&&i.equals(m)||(t.push(m),i=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(new sP[s.type]().fromJSON(s))}return this}}class jS extends sj{constructor(e){super(),this.type="Path",this.currentPoint=new Ot,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new iR(this.currentPoint.clone(),new Ot(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,s){const o=new nP(this.currentPoint.clone(),new Ot(e,t),new Ot(i,s));return this.curves.push(o),this.currentPoint.set(i,s),this}bezierCurveTo(e,t,i,s,o,l){const u=new tP(this.currentPoint.clone(),new Ot(e,t),new Ot(i,s),new Ot(o,l));return this.curves.push(u),this.currentPoint.set(o,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new iP(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,s,o,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(e+u,t+h,i,s,o,l),this}absarc(e,t,i,s,o,l){return this.absellipse(e,t,i,i,s,o,l),this}ellipse(e,t,i,s,o,l,u,h){const p=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+p,t+m,i,s,o,l,u,h),this}absellipse(e,t,i,s,o,l,u,h){const p=new rR(e,t,i,s,o,l,u,h);if(this.curves.length>0){const _=p.getPoint(0);_.equals(this.currentPoint)||this.lineTo(_.x,_.y)}this.curves.push(p);const m=p.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class rb extends Ar{constructor(e=[new Ot(0,-.5),new Ot(.5,0),new Ot(0,.5)],t=12,i=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:s},t=Math.floor(t),s=Du(s,0,Math.PI*2);const o=[],l=[],u=[],h=[],p=[],m=1/t,_=new Te,v=new Ot,E=new Te,w=new Te,x=new Te;let A=0,O=0;for(let k=0;k<=e.length-1;k++)switch(k){case 0:A=e[k+1].x-e[k].x,O=e[k+1].y-e[k].y,E.x=O*1,E.y=-A,E.z=O*0,x.copy(E),E.normalize(),h.push(E.x,E.y,E.z);break;case e.length-1:h.push(x.x,x.y,x.z);break;default:A=e[k+1].x-e[k].x,O=e[k+1].y-e[k].y,E.x=O*1,E.y=-A,E.z=O*0,w.copy(E),E.x+=x.x,E.y+=x.y,E.z+=x.z,E.normalize(),h.push(E.x,E.y,E.z),x.copy(w)}for(let k=0;k<=t;k++){const D=i+k*m*s,N=Math.sin(D),F=Math.cos(D);for(let z=0;z<=e.length-1;z++){_.x=e[z].x*N,_.y=e[z].y,_.z=e[z].x*F,l.push(_.x,_.y,_.z),v.x=k/t,v.y=z/(e.length-1),u.push(v.x,v.y);const V=h[3*z+0]*N,U=h[3*z+1],ee=h[3*z+0]*F;p.push(V,U,ee)}}for(let k=0;k<t;k++)for(let D=0;D<e.length-1;D++){const N=D+k*e.length,F=N,z=N+e.length,V=N+e.length+1,U=N+1;o.push(F,z,U),o.push(V,U,z)}this.setIndex(o),this.setAttribute("position",new Pn(l,3)),this.setAttribute("uv",new Pn(u,2)),this.setAttribute("normal",new Pn(p,3))}static fromJSON(e){return new rb(e.points,e.segments,e.phiStart,e.phiLength)}}class C1 extends rb{constructor(e=1,t=1,i=4,s=8){const o=new jS;o.absarc(0,-t/2,e,Math.PI*1.5,0),o.absarc(0,t/2,e,0,Math.PI*.5),super(o.getPoints(i),s),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:s}}static fromJSON(e){return new C1(e.radius,e.length,e.capSegments,e.radialSegments)}}class M1 extends Ar{constructor(e=1,t=8,i=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:s},t=Math.max(3,t);const o=[],l=[],u=[],h=[],p=new Te,m=new Ot;l.push(0,0,0),u.push(0,0,1),h.push(.5,.5);for(let _=0,v=3;_<=t;_++,v+=3){const E=i+_/t*s;p.x=e*Math.cos(E),p.y=e*Math.sin(E),l.push(p.x,p.y,p.z),u.push(0,0,1),m.x=(l[v]/e+1)/2,m.y=(l[v+1]/e+1)/2,h.push(m.x,m.y)}for(let _=1;_<=t;_++)o.push(_,_+1,0);this.setIndex(o),this.setAttribute("position",new Pn(l,3)),this.setAttribute("normal",new Pn(u,3)),this.setAttribute("uv",new Pn(h,2))}static fromJSON(e){return new M1(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ra extends Ar{constructor(e=1,t=1,i=1,s=8,o=1,l=!1,u=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:s,heightSegments:o,openEnded:l,thetaStart:u,thetaLength:h};const p=this;s=Math.floor(s),o=Math.floor(o);const m=[],_=[],v=[],E=[];let w=0;const x=[],A=i/2;let O=0;k(),l===!1&&(e>0&&D(!0),t>0&&D(!1)),this.setIndex(m),this.setAttribute("position",new Pn(_,3)),this.setAttribute("normal",new Pn(v,3)),this.setAttribute("uv",new Pn(E,2));function k(){const N=new Te,F=new Te;let z=0;const V=(t-e)/i;for(let U=0;U<=o;U++){const ee=[],ne=U/o,ie=ne*(t-e)+e;for(let se=0;se<=s;se++){const fe=se/s,ae=fe*h+u,he=Math.sin(ae),ge=Math.cos(ae);F.x=ie*he,F.y=-ne*i+A,F.z=ie*ge,_.push(F.x,F.y,F.z),N.set(he,V,ge).normalize(),v.push(N.x,N.y,N.z),E.push(fe,1-ne),ee.push(w++)}x.push(ee)}for(let U=0;U<s;U++)for(let ee=0;ee<o;ee++){const ne=x[ee][U],ie=x[ee+1][U],se=x[ee+1][U+1],fe=x[ee][U+1];m.push(ne,ie,fe),m.push(ie,se,fe),z+=6}p.addGroup(O,z,0),O+=z}function D(N){const F=w,z=new Ot,V=new Te;let U=0;const ee=N===!0?e:t,ne=N===!0?1:-1;for(let se=1;se<=s;se++)_.push(0,A*ne,0),v.push(0,ne,0),E.push(.5,.5),w++;const ie=w;for(let se=0;se<=s;se++){const fe=se/s*h+u,ae=Math.cos(fe),he=Math.sin(fe);V.x=ee*he,V.y=A*ne,V.z=ee*ae,_.push(V.x,V.y,V.z),v.push(0,ne,0),z.x=ae*.5+.5,z.y=he*.5*ne+.5,E.push(z.x,z.y),w++}for(let se=0;se<s;se++){const fe=F+se,ae=ie+se;N===!0?m.push(ae,ae+1,fe):m.push(ae+1,ae,fe),U+=3}p.addGroup(O,U,N===!0?1:2),O+=U}}static fromJSON(e){return new ra(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class A1 extends ra{constructor(e=1,t=1,i=8,s=1,o=!1,l=0,u=Math.PI*2){super(0,e,t,i,s,o,l,u),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:u}}static fromJSON(e){return new A1(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Qg extends Ar{constructor(e=[],t=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:s};const o=[],l=[];u(s),p(i),m(),this.setAttribute("position",new Pn(o,3)),this.setAttribute("normal",new Pn(o.slice(),3)),this.setAttribute("uv",new Pn(l,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function u(k){const D=new Te,N=new Te,F=new Te;for(let z=0;z<t.length;z+=3)E(t[z+0],D),E(t[z+1],N),E(t[z+2],F),h(D,N,F,k)}function h(k,D,N,F){const z=F+1,V=[];for(let U=0;U<=z;U++){V[U]=[];const ee=k.clone().lerp(N,U/z),ne=D.clone().lerp(N,U/z),ie=z-U;for(let se=0;se<=ie;se++)se===0&&U===z?V[U][se]=ee:V[U][se]=ee.clone().lerp(ne,se/ie)}for(let U=0;U<z;U++)for(let ee=0;ee<2*(z-U)-1;ee++){const ne=Math.floor(ee/2);ee%2===0?(v(V[U][ne+1]),v(V[U+1][ne]),v(V[U][ne])):(v(V[U][ne+1]),v(V[U+1][ne+1]),v(V[U+1][ne]))}}function p(k){const D=new Te;for(let N=0;N<o.length;N+=3)D.x=o[N+0],D.y=o[N+1],D.z=o[N+2],D.normalize().multiplyScalar(k),o[N+0]=D.x,o[N+1]=D.y,o[N+2]=D.z}function m(){const k=new Te;for(let D=0;D<o.length;D+=3){k.x=o[D+0],k.y=o[D+1],k.z=o[D+2];const N=A(k)/2/Math.PI+.5,F=O(k)/Math.PI+.5;l.push(N,1-F)}w(),_()}function _(){for(let k=0;k<l.length;k+=6){const D=l[k+0],N=l[k+2],F=l[k+4],z=Math.max(D,N,F),V=Math.min(D,N,F);z>.9&&V<.1&&(D<.2&&(l[k+0]+=1),N<.2&&(l[k+2]+=1),F<.2&&(l[k+4]+=1))}}function v(k){o.push(k.x,k.y,k.z)}function E(k,D){const N=k*3;D.x=e[N+0],D.y=e[N+1],D.z=e[N+2]}function w(){const k=new Te,D=new Te,N=new Te,F=new Te,z=new Ot,V=new Ot,U=new Ot;for(let ee=0,ne=0;ee<o.length;ee+=9,ne+=6){k.set(o[ee+0],o[ee+1],o[ee+2]),D.set(o[ee+3],o[ee+4],o[ee+5]),N.set(o[ee+6],o[ee+7],o[ee+8]),z.set(l[ne+0],l[ne+1]),V.set(l[ne+2],l[ne+3]),U.set(l[ne+4],l[ne+5]),F.copy(k).add(D).add(N).divideScalar(3);const ie=A(F);x(z,ne+0,k,ie),x(V,ne+2,D,ie),x(U,ne+4,N,ie)}}function x(k,D,N,F){F<0&&k.x===1&&(l[D]=k.x-1),N.x===0&&N.z===0&&(l[D]=F/2/Math.PI+.5)}function A(k){return Math.atan2(k.z,-k.x)}function O(k){return Math.atan2(-k.y,Math.sqrt(k.x*k.x+k.z*k.z))}}static fromJSON(e){return new Qg(e.vertices,e.indices,e.radius,e.details)}}class I1 extends Qg{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=1/i,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new I1(e.radius,e.detail)}}const RC=new Te,kC=new Te,HO=new Te,OC=new df;class oj extends Ar{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(zy*t),o=e.getIndex(),l=e.getAttribute("position"),u=o?o.count:l.count,h=[0,0,0],p=["a","b","c"],m=new Array(3),_={},v=[];for(let E=0;E<u;E+=3){o?(h[0]=o.getX(E),h[1]=o.getX(E+1),h[2]=o.getX(E+2)):(h[0]=E,h[1]=E+1,h[2]=E+2);const{a:w,b:x,c:A}=OC;if(w.fromBufferAttribute(l,h[0]),x.fromBufferAttribute(l,h[1]),A.fromBufferAttribute(l,h[2]),OC.getNormal(HO),m[0]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,m[1]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,m[2]=`${Math.round(A.x*i)},${Math.round(A.y*i)},${Math.round(A.z*i)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let O=0;O<3;O++){const k=(O+1)%3,D=m[O],N=m[k],F=OC[p[O]],z=OC[p[k]],V=`${D}_${N}`,U=`${N}_${D}`;U in _&&_[U]?(HO.dot(_[U].normal)<=s&&(v.push(F.x,F.y,F.z),v.push(z.x,z.y,z.z)),_[U]=null):V in _||(_[V]={index0:h[O],index1:h[k],normal:HO.clone()})}}for(const E in _)if(_[E]){const{index0:w,index1:x}=_[E];RC.fromBufferAttribute(l,w),kC.fromBufferAttribute(l,x),v.push(RC.x,RC.y,RC.z),v.push(kC.x,kC.y,kC.z)}this.setAttribute("position",new Pn(v,3))}}}class Wy extends jS{constructor(e){super(e),this.uuid=bf(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,s=this.holes.length;i<s;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(new jS().fromJSON(s))}return this}}const Age={triangulate:function(r,e,t=2){const i=e&&e.length,s=i?e[0]*t:r.length;let o=aj(r,0,s,t,!0);const l=[];if(!o||o.next===o.prev)return l;let u,h,p,m,_,v,E;if(i&&(o=Lge(r,e,o,t)),r.length>80*t){u=p=r[0],h=m=r[1];for(let w=t;w<s;w+=t)_=r[w],v=r[w+1],_<u&&(u=_),v<h&&(h=v),_>p&&(p=_),v>m&&(m=v);E=Math.max(p-u,m-h),E=E!==0?1/E:0}return XS(o,l,t,u,h,E),l}};function aj(r,e,t,i,s){let o,l;if(s===Vge(r,e,t,i)>0)for(o=e;o<t;o+=i)l=UH(o,r[o],r[o+1],l);else for(o=t-i;o>=e;o-=i)l=UH(o,r[o],r[o+1],l);return l&&sR(l,l.next)&&(KS(l),l=l.next),l}function gv(r,e){if(!r)return r;e||(e=r);let t=r,i;do if(i=!1,!t.steiner&&(sR(t,t.next)||Cl(t.prev,t,t.next)===0)){if(KS(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function XS(r,e,t,i,s,o,l){if(!r)return;!l&&o&&Fge(r,i,s,o);let u=r,h,p;for(;r.prev!==r.next;){if(h=r.prev,p=r.next,o?Rge(r,i,s,o):Ige(r)){e.push(h.i/t),e.push(r.i/t),e.push(p.i/t),KS(r),r=p.next,u=p.next;continue}if(r=p,r===u){l?l===1?(r=kge(gv(r),e,t),XS(r,e,t,i,s,o,2)):l===2&&Oge(r,e,t,i,s,o):XS(gv(r),e,t,i,s,o,1);break}}}function Ige(r){const e=r.prev,t=r,i=r.next;if(Cl(e,t,i)>=0)return!1;let s=r.next.next;for(;s!==r.prev;){if(QT(e.x,e.y,t.x,t.y,i.x,i.y,s.x,s.y)&&Cl(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function Rge(r,e,t,i){const s=r.prev,o=r,l=r.next;if(Cl(s,o,l)>=0)return!1;const u=s.x<o.x?s.x<l.x?s.x:l.x:o.x<l.x?o.x:l.x,h=s.y<o.y?s.y<l.y?s.y:l.y:o.y<l.y?o.y:l.y,p=s.x>o.x?s.x>l.x?s.x:l.x:o.x>l.x?o.x:l.x,m=s.y>o.y?s.y>l.y?s.y:l.y:o.y>l.y?o.y:l.y,_=T2(u,h,e,t,i),v=T2(p,m,e,t,i);let E=r.prevZ,w=r.nextZ;for(;E&&E.z>=_&&w&&w.z<=v;){if(E!==r.prev&&E!==r.next&&QT(s.x,s.y,o.x,o.y,l.x,l.y,E.x,E.y)&&Cl(E.prev,E,E.next)>=0||(E=E.prevZ,w!==r.prev&&w!==r.next&&QT(s.x,s.y,o.x,o.y,l.x,l.y,w.x,w.y)&&Cl(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;E&&E.z>=_;){if(E!==r.prev&&E!==r.next&&QT(s.x,s.y,o.x,o.y,l.x,l.y,E.x,E.y)&&Cl(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;w&&w.z<=v;){if(w!==r.prev&&w!==r.next&&QT(s.x,s.y,o.x,o.y,l.x,l.y,w.x,w.y)&&Cl(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function kge(r,e,t){let i=r;do{const s=i.prev,o=i.next.next;!sR(s,o)&&lj(s,i,i.next,o)&&YS(s,o)&&YS(o,s)&&(e.push(s.i/t),e.push(i.i/t),e.push(o.i/t),KS(i),KS(i.next),i=r=o),i=i.next}while(i!==r);return gv(i)}function Oge(r,e,t,i,s,o){let l=r;do{let u=l.next.next;for(;u!==l.prev;){if(l.i!==u.i&&Hge(l,u)){let h=uj(l,u);l=gv(l,l.next),h=gv(h,h.next),XS(l,e,t,i,s,o),XS(h,e,t,i,s,o);return}u=u.next}l=l.next}while(l!==r)}function Lge(r,e,t,i){const s=[];let o,l,u,h,p;for(o=0,l=e.length;o<l;o++)u=e[o]*i,h=o<l-1?e[o+1]*i:r.length,p=aj(r,u,h,i,!1),p===p.next&&(p.steiner=!0),s.push(zge(p));for(s.sort(Nge),o=0;o<s.length;o++)Dge(s[o],t),t=gv(t,t.next);return t}function Nge(r,e){return r.x-e.x}function Dge(r,e){if(e=Bge(r,e),e){const t=uj(e,r);gv(e,e.next),gv(t,t.next)}}function Bge(r,e){let t=e;const i=r.x,s=r.y;let o=-1/0,l;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const v=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=i&&v>o){if(o=v,v===i){if(s===t.y)return t;if(s===t.next.y)return t.next}l=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!l)return null;if(i===o)return l;const u=l,h=l.x,p=l.y;let m=1/0,_;t=l;do i>=t.x&&t.x>=h&&i!==t.x&&QT(s<p?i:o,s,h,p,s<p?o:i,s,t.x,t.y)&&(_=Math.abs(s-t.y)/(i-t.x),YS(t,r)&&(_<m||_===m&&(t.x>l.x||t.x===l.x&&Pge(l,t)))&&(l=t,m=_)),t=t.next;while(t!==u);return l}function Pge(r,e){return Cl(r.prev,r,e.prev)<0&&Cl(e.next,r,r.next)<0}function Fge(r,e,t,i){let s=r;do s.z===null&&(s.z=T2(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==r);s.prevZ.nextZ=null,s.prevZ=null,Uge(s)}function Uge(r){let e,t,i,s,o,l,u,h,p=1;do{for(t=r,r=null,o=null,l=0;t;){for(l++,i=t,u=0,e=0;e<p&&(u++,i=i.nextZ,!!i);e++);for(h=p;u>0||h>0&&i;)u!==0&&(h===0||!i||t.z<=i.z)?(s=t,t=t.nextZ,u--):(s=i,i=i.nextZ,h--),o?o.nextZ=s:r=s,s.prevZ=o,o=s;t=i}o.nextZ=null,p*=2}while(l>1);return r}function T2(r,e,t,i,s){return r=32767*(r-t)*s,e=32767*(e-i)*s,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function zge(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function QT(r,e,t,i,s,o,l,u){return(s-l)*(e-u)-(r-l)*(o-u)>=0&&(r-l)*(i-u)-(t-l)*(e-u)>=0&&(t-l)*(o-u)-(s-l)*(i-u)>=0}function Hge(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!Gge(r,e)&&(YS(r,e)&&YS(e,r)&&Wge(r,e)&&(Cl(r.prev,r,e.prev)||Cl(r,e.prev,e))||sR(r,e)&&Cl(r.prev,r,r.next)>0&&Cl(e.prev,e,e.next)>0)}function Cl(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function sR(r,e){return r.x===e.x&&r.y===e.y}function lj(r,e,t,i){const s=NC(Cl(r,e,t)),o=NC(Cl(r,e,i)),l=NC(Cl(t,i,r)),u=NC(Cl(t,i,e));return!!(s!==o&&l!==u||s===0&&LC(r,t,e)||o===0&&LC(r,i,e)||l===0&&LC(t,r,i)||u===0&&LC(t,e,i))}function LC(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function NC(r){return r>0?1:r<0?-1:0}function Gge(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&lj(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function YS(r,e){return Cl(r.prev,r,r.next)<0?Cl(r,e,r.next)>=0&&Cl(r,r.prev,e)>=0:Cl(r,e,r.prev)<0||Cl(r,r.next,e)<0}function Wge(r,e){let t=r,i=!1;const s=(r.x+e.x)/2,o=(r.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&s<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==r);return i}function uj(r,e){const t=new E2(r.i,r.x,r.y),i=new E2(e.i,e.x,e.y),s=r.next,o=e.prev;return r.next=e,e.prev=r,t.next=s,s.prev=t,i.next=t,t.prev=i,o.next=i,i.prev=o,i}function UH(r,e,t,i){const s=new E2(r,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function KS(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function E2(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Vge(r,e,t,i){let s=0;for(let o=e,l=t-i;o<t;o+=i)s+=(r[l]-r[o])*(r[o+1]+r[l+1]),l=o;return s}class Xg{static area(e){const t=e.length;let i=0;for(let s=t-1,o=0;o<t;s=o++)i+=e[s].x*e[o].y-e[o].x*e[s].y;return i*.5}static isClockWise(e){return Xg.area(e)<0}static triangulateShape(e,t){const i=[],s=[],o=[];zH(e),HH(i,e);let l=e.length;t.forEach(zH);for(let h=0;h<t.length;h++)s.push(l),l+=t[h].length,HH(i,t[h]);const u=Age.triangulate(i,s);for(let h=0;h<u.length;h+=3)o.push(u.slice(h,h+3));return o}}function zH(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function HH(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class R1 extends Ar{constructor(e=new Wy([new Ot(.5,.5),new Ot(-.5,.5),new Ot(-.5,-.5),new Ot(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,s=[],o=[];for(let u=0,h=e.length;u<h;u++){const p=e[u];l(p)}this.setAttribute("position",new Pn(s,3)),this.setAttribute("uv",new Pn(o,2)),this.computeVertexNormals();function l(u){const h=[],p=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,_=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,E=t.bevelThickness!==void 0?t.bevelThickness:.2,w=t.bevelSize!==void 0?t.bevelSize:E-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,A=t.bevelSegments!==void 0?t.bevelSegments:3;const O=t.extrudePath,k=t.UVGenerator!==void 0?t.UVGenerator:jge;let D,N=!1,F,z,V,U;O&&(D=O.getSpacedPoints(m),N=!0,v=!1,F=O.computeFrenetFrames(m,!1),z=new Te,V=new Te,U=new Te),v||(A=0,E=0,w=0,x=0);const ee=u.extractPoints(p);let ne=ee.shape;const ie=ee.holes;if(!Xg.isClockWise(ne)){ne=ne.reverse();for(let Ne=0,we=ie.length;Ne<we;Ne++){const ze=ie[Ne];Xg.isClockWise(ze)&&(ie[Ne]=ze.reverse())}}const se=Xg.triangulateShape(ne,ie),fe=ne;for(let Ne=0,we=ie.length;Ne<we;Ne++){const ze=ie[Ne];ne=ne.concat(ze)}function ae(Ne,we,ze){return we||console.error("THREE.ExtrudeGeometry: vec does not exist"),we.clone().multiplyScalar(ze).add(Ne)}const he=ne.length,ge=se.length;function Ie(Ne,we,ze){let it,nt,Mt;const At=Ne.x-we.x,ht=Ne.y-we.y,Et=ze.x-Ne.x,wt=ze.y-Ne.y,pt=At*At+ht*ht,be=At*wt-ht*Et;if(Math.abs(be)>Number.EPSILON){const Z=Math.sqrt(pt),ke=Math.sqrt(Et*Et+wt*wt),lt=we.x-ht/Z,mt=we.y+At/Z,xt=ze.x-wt/ke,ut=ze.y+Et/ke,He=((xt-lt)*wt-(ut-mt)*Et)/(At*wt-ht*Et);it=lt+At*He-Ne.x,nt=mt+ht*He-Ne.y;const Ce=it*it+nt*nt;if(Ce<=2)return new Ot(it,nt);Mt=Math.sqrt(Ce/2)}else{let Z=!1;At>Number.EPSILON?Et>Number.EPSILON&&(Z=!0):At<-Number.EPSILON?Et<-Number.EPSILON&&(Z=!0):Math.sign(ht)===Math.sign(wt)&&(Z=!0),Z?(it=-ht,nt=At,Mt=Math.sqrt(pt)):(it=At,nt=ht,Mt=Math.sqrt(pt/2))}return new Ot(it/Mt,nt/Mt)}const j=[];for(let Ne=0,we=fe.length,ze=we-1,it=Ne+1;Ne<we;Ne++,ze++,it++)ze===we&&(ze=0),it===we&&(it=0),j[Ne]=Ie(fe[Ne],fe[ze],fe[it]);const te=[];let q,le=j.concat();for(let Ne=0,we=ie.length;Ne<we;Ne++){const ze=ie[Ne];q=[];for(let it=0,nt=ze.length,Mt=nt-1,At=it+1;it<nt;it++,Mt++,At++)Mt===nt&&(Mt=0),At===nt&&(At=0),q[it]=Ie(ze[it],ze[Mt],ze[At]);te.push(q),le=le.concat(q)}for(let Ne=0;Ne<A;Ne++){const we=Ne/A,ze=E*Math.cos(we*Math.PI/2),it=w*Math.sin(we*Math.PI/2)+x;for(let nt=0,Mt=fe.length;nt<Mt;nt++){const At=ae(fe[nt],j[nt],it);Re(At.x,At.y,-ze)}for(let nt=0,Mt=ie.length;nt<Mt;nt++){const At=ie[nt];q=te[nt];for(let ht=0,Et=At.length;ht<Et;ht++){const wt=ae(At[ht],q[ht],it);Re(wt.x,wt.y,-ze)}}}const _e=w+x;for(let Ne=0;Ne<he;Ne++){const we=v?ae(ne[Ne],le[Ne],_e):ne[Ne];N?(V.copy(F.normals[0]).multiplyScalar(we.x),z.copy(F.binormals[0]).multiplyScalar(we.y),U.copy(D[0]).add(V).add(z),Re(U.x,U.y,U.z)):Re(we.x,we.y,0)}for(let Ne=1;Ne<=m;Ne++)for(let we=0;we<he;we++){const ze=v?ae(ne[we],le[we],_e):ne[we];N?(V.copy(F.normals[Ne]).multiplyScalar(ze.x),z.copy(F.binormals[Ne]).multiplyScalar(ze.y),U.copy(D[Ne]).add(V).add(z),Re(U.x,U.y,U.z)):Re(ze.x,ze.y,_/m*Ne)}for(let Ne=A-1;Ne>=0;Ne--){const we=Ne/A,ze=E*Math.cos(we*Math.PI/2),it=w*Math.sin(we*Math.PI/2)+x;for(let nt=0,Mt=fe.length;nt<Mt;nt++){const At=ae(fe[nt],j[nt],it);Re(At.x,At.y,_+ze)}for(let nt=0,Mt=ie.length;nt<Mt;nt++){const At=ie[nt];q=te[nt];for(let ht=0,Et=At.length;ht<Et;ht++){const wt=ae(At[ht],q[ht],it);N?Re(wt.x,wt.y+D[m-1].y,D[m-1].x+ze):Re(wt.x,wt.y,_+ze)}}}Le(),xe();function Le(){const Ne=s.length/3;if(v){let we=0,ze=he*we;for(let it=0;it<ge;it++){const nt=se[it];Ze(nt[2]+ze,nt[1]+ze,nt[0]+ze)}we=m+A*2,ze=he*we;for(let it=0;it<ge;it++){const nt=se[it];Ze(nt[0]+ze,nt[1]+ze,nt[2]+ze)}}else{for(let we=0;we<ge;we++){const ze=se[we];Ze(ze[2],ze[1],ze[0])}for(let we=0;we<ge;we++){const ze=se[we];Ze(ze[0]+he*m,ze[1]+he*m,ze[2]+he*m)}}i.addGroup(Ne,s.length/3-Ne,0)}function xe(){const Ne=s.length/3;let we=0;Ve(fe,we),we+=fe.length;for(let ze=0,it=ie.length;ze<it;ze++){const nt=ie[ze];Ve(nt,we),we+=nt.length}i.addGroup(Ne,s.length/3-Ne,1)}function Ve(Ne,we){let ze=Ne.length;for(;--ze>=0;){const it=ze;let nt=ze-1;nt<0&&(nt=Ne.length-1);for(let Mt=0,At=m+A*2;Mt<At;Mt++){const ht=he*Mt,Et=he*(Mt+1),wt=we+it+ht,pt=we+nt+ht,be=we+nt+Et,Z=we+it+Et;et(wt,pt,be,Z)}}}function Re(Ne,we,ze){h.push(Ne),h.push(we),h.push(ze)}function Ze(Ne,we,ze){ct(Ne),ct(we),ct(ze);const it=s.length/3,nt=k.generateTopUV(i,s,it-3,it-2,it-1);rt(nt[0]),rt(nt[1]),rt(nt[2])}function et(Ne,we,ze,it){ct(Ne),ct(we),ct(it),ct(we),ct(ze),ct(it);const nt=s.length/3,Mt=k.generateSideWallUV(i,s,nt-6,nt-3,nt-2,nt-1);rt(Mt[0]),rt(Mt[1]),rt(Mt[3]),rt(Mt[1]),rt(Mt[2]),rt(Mt[3])}function ct(Ne){s.push(h[Ne*3+0]),s.push(h[Ne*3+1]),s.push(h[Ne*3+2])}function rt(Ne){o.push(Ne.x),o.push(Ne.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return Xge(t,i,e)}static fromJSON(e,t){const i=[];for(let o=0,l=e.shapes.length;o<l;o++){const u=t[e.shapes[o]];i.push(u)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new sP[s.type]().fromJSON(s)),new R1(i,e.options)}}const jge={generateTopUV:function(r,e,t,i,s){const o=e[t*3],l=e[t*3+1],u=e[i*3],h=e[i*3+1],p=e[s*3],m=e[s*3+1];return[new Ot(o,l),new Ot(u,h),new Ot(p,m)]},generateSideWallUV:function(r,e,t,i,s,o){const l=e[t*3],u=e[t*3+1],h=e[t*3+2],p=e[i*3],m=e[i*3+1],_=e[i*3+2],v=e[s*3],E=e[s*3+1],w=e[s*3+2],x=e[o*3],A=e[o*3+1],O=e[o*3+2];return Math.abs(u-m)<Math.abs(l-p)?[new Ot(l,1-h),new Ot(p,1-_),new Ot(v,1-w),new Ot(x,1-O)]:[new Ot(u,1-h),new Ot(m,1-_),new Ot(E,1-w),new Ot(A,1-O)]}};function Xge(r,e,t){if(t.shapes=[],Array.isArray(r))for(let i=0,s=r.length;i<s;i++){const o=r[i];t.shapes.push(o.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class k1 extends Qg{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new k1(e.radius,e.detail)}}class ng extends Qg{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ng(e.radius,e.detail)}}class O1 extends Ar{constructor(e=.5,t=1,i=8,s=1,o=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:s,thetaStart:o,thetaLength:l},i=Math.max(3,i),s=Math.max(1,s);const u=[],h=[],p=[],m=[];let _=e;const v=(t-e)/s,E=new Te,w=new Ot;for(let x=0;x<=s;x++){for(let A=0;A<=i;A++){const O=o+A/i*l;E.x=_*Math.cos(O),E.y=_*Math.sin(O),h.push(E.x,E.y,E.z),p.push(0,0,1),w.x=(E.x/t+1)/2,w.y=(E.y/t+1)/2,m.push(w.x,w.y)}_+=v}for(let x=0;x<s;x++){const A=x*(i+1);for(let O=0;O<i;O++){const k=O+A,D=k,N=k+i+1,F=k+i+2,z=k+1;u.push(D,N,z),u.push(N,F,z)}}this.setIndex(u),this.setAttribute("position",new Pn(h,3)),this.setAttribute("normal",new Pn(p,3)),this.setAttribute("uv",new Pn(m,2))}static fromJSON(e){return new O1(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class L1 extends Ar{constructor(e=new Wy([new Ot(0,.5),new Ot(-.5,-.5),new Ot(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],s=[],o=[],l=[];let u=0,h=0;if(Array.isArray(e)===!1)p(e);else for(let m=0;m<e.length;m++)p(e[m]),this.addGroup(u,h,m),u+=h,h=0;this.setIndex(i),this.setAttribute("position",new Pn(s,3)),this.setAttribute("normal",new Pn(o,3)),this.setAttribute("uv",new Pn(l,2));function p(m){const _=s.length/3,v=m.extractPoints(t);let E=v.shape;const w=v.holes;Xg.isClockWise(E)===!1&&(E=E.reverse());for(let A=0,O=w.length;A<O;A++){const k=w[A];Xg.isClockWise(k)===!0&&(w[A]=k.reverse())}const x=Xg.triangulateShape(E,w);for(let A=0,O=w.length;A<O;A++){const k=w[A];E=E.concat(k)}for(let A=0,O=E.length;A<O;A++){const k=E[A];s.push(k.x,k.y,0),o.push(0,0,1),l.push(k.x,k.y)}for(let A=0,O=x.length;A<O;A++){const k=x[A],D=k[0]+_,N=k[1]+_,F=k[2]+_;i.push(D,N,F),h+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Yge(t,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];i.push(l)}return new L1(i,e.curveSegments)}}function Yge(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,i=r.length;t<i;t++){const s=r[t];e.shapes.push(s.uuid)}else e.shapes.push(r.uuid);return e}class ug extends Ar{constructor(e=1,t=32,i=16,s=0,o=Math.PI*2,l=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:s,phiLength:o,thetaStart:l,thetaLength:u},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const h=Math.min(l+u,Math.PI);let p=0;const m=[],_=new Te,v=new Te,E=[],w=[],x=[],A=[];for(let O=0;O<=i;O++){const k=[],D=O/i;let N=0;O==0&&l==0?N=.5/t:O==i&&h==Math.PI&&(N=-.5/t);for(let F=0;F<=t;F++){const z=F/t;_.x=-e*Math.cos(s+z*o)*Math.sin(l+D*u),_.y=e*Math.cos(l+D*u),_.z=e*Math.sin(s+z*o)*Math.sin(l+D*u),w.push(_.x,_.y,_.z),v.copy(_).normalize(),x.push(v.x,v.y,v.z),A.push(z+N,1-D),k.push(p++)}m.push(k)}for(let O=0;O<i;O++)for(let k=0;k<t;k++){const D=m[O][k+1],N=m[O][k],F=m[O+1][k],z=m[O+1][k+1];(O!==0||l>0)&&E.push(D,N,z),(O!==i-1||h<Math.PI)&&E.push(N,F,z)}this.setIndex(E),this.setAttribute("position",new Pn(w,3)),this.setAttribute("normal",new Pn(x,3)),this.setAttribute("uv",new Pn(A,2))}static fromJSON(e){return new ug(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class N1 extends Qg{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new N1(e.radius,e.detail)}}class eg extends Ar{constructor(e=1,t=.4,i=8,s=6,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:s,arc:o},i=Math.floor(i),s=Math.floor(s);const l=[],u=[],h=[],p=[],m=new Te,_=new Te,v=new Te;for(let E=0;E<=i;E++)for(let w=0;w<=s;w++){const x=w/s*o,A=E/i*Math.PI*2;_.x=(e+t*Math.cos(A))*Math.cos(x),_.y=(e+t*Math.cos(A))*Math.sin(x),_.z=t*Math.sin(A),u.push(_.x,_.y,_.z),m.x=e*Math.cos(x),m.y=e*Math.sin(x),v.subVectors(_,m).normalize(),h.push(v.x,v.y,v.z),p.push(w/s),p.push(E/i)}for(let E=1;E<=i;E++)for(let w=1;w<=s;w++){const x=(s+1)*E+w-1,A=(s+1)*(E-1)+w-1,O=(s+1)*(E-1)+w,k=(s+1)*E+w;l.push(x,A,k),l.push(A,O,k)}this.setIndex(l),this.setAttribute("position",new Pn(u,3)),this.setAttribute("normal",new Pn(h,3)),this.setAttribute("uv",new Pn(p,2))}static fromJSON(e){return new eg(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class D1 extends Ar{constructor(e=1,t=.4,i=64,s=8,o=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:s,p:o,q:l},i=Math.floor(i),s=Math.floor(s);const u=[],h=[],p=[],m=[],_=new Te,v=new Te,E=new Te,w=new Te,x=new Te,A=new Te,O=new Te;for(let D=0;D<=i;++D){const N=D/i*o*Math.PI*2;k(N,o,l,e,E),k(N+.01,o,l,e,w),A.subVectors(w,E),O.addVectors(w,E),x.crossVectors(A,O),O.crossVectors(x,A),x.normalize(),O.normalize();for(let F=0;F<=s;++F){const z=F/s*Math.PI*2,V=-t*Math.cos(z),U=t*Math.sin(z);_.x=E.x+(V*O.x+U*x.x),_.y=E.y+(V*O.y+U*x.y),_.z=E.z+(V*O.z+U*x.z),h.push(_.x,_.y,_.z),v.subVectors(_,E).normalize(),p.push(v.x,v.y,v.z),m.push(D/i),m.push(F/s)}}for(let D=1;D<=i;D++)for(let N=1;N<=s;N++){const F=(s+1)*(D-1)+(N-1),z=(s+1)*D+(N-1),V=(s+1)*D+N,U=(s+1)*(D-1)+N;u.push(F,z,U),u.push(z,V,U)}this.setIndex(u),this.setAttribute("position",new Pn(h,3)),this.setAttribute("normal",new Pn(p,3)),this.setAttribute("uv",new Pn(m,2));function k(D,N,F,z,V){const U=Math.cos(D),ee=Math.sin(D),ne=F/N*D,ie=Math.cos(ne);V.x=z*(2+ie)*.5*U,V.y=z*(2+ie)*ee*.5,V.z=z*Math.sin(ne)*.5}}static fromJSON(e){return new D1(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class B1 extends Ar{constructor(e=new rP(new Te(-1,-1,0),new Te(-1,1,0),new Te(1,1,0)),t=64,i=1,s=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:s,closed:o};const l=e.computeFrenetFrames(t,o);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const u=new Te,h=new Te,p=new Ot;let m=new Te;const _=[],v=[],E=[],w=[];x(),this.setIndex(w),this.setAttribute("position",new Pn(_,3)),this.setAttribute("normal",new Pn(v,3)),this.setAttribute("uv",new Pn(E,2));function x(){for(let D=0;D<t;D++)A(D);A(o===!1?t:0),k(),O()}function A(D){m=e.getPointAt(D/t,m);const N=l.normals[D],F=l.binormals[D];for(let z=0;z<=s;z++){const V=z/s*Math.PI*2,U=Math.sin(V),ee=-Math.cos(V);h.x=ee*N.x+U*F.x,h.y=ee*N.y+U*F.y,h.z=ee*N.z+U*F.z,h.normalize(),v.push(h.x,h.y,h.z),u.x=m.x+i*h.x,u.y=m.y+i*h.y,u.z=m.z+i*h.z,_.push(u.x,u.y,u.z)}}function O(){for(let D=1;D<=t;D++)for(let N=1;N<=s;N++){const F=(s+1)*(D-1)+(N-1),z=(s+1)*D+(N-1),V=(s+1)*D+N,U=(s+1)*(D-1)+N;w.push(F,z,U),w.push(z,V,U)}}function k(){for(let D=0;D<=t;D++)for(let N=0;N<=s;N++)p.x=D/t,p.y=N/s,E.push(p.x,p.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new B1(new sP[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class oP extends Ar{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,s=new Te,o=new Te;if(e.index!==null){const l=e.attributes.position,u=e.index;let h=e.groups;h.length===0&&(h=[{start:0,count:u.count,materialIndex:0}]);for(let p=0,m=h.length;p<m;++p){const _=h[p],v=_.start,E=_.count;for(let w=v,x=v+E;w<x;w+=3)for(let A=0;A<3;A++){const O=u.getX(w+A),k=u.getX(w+(A+1)%3);s.fromBufferAttribute(l,O),o.fromBufferAttribute(l,k),GH(s,o,i)===!0&&(t.push(s.x,s.y,s.z),t.push(o.x,o.y,o.z))}}}else{const l=e.attributes.position;for(let u=0,h=l.count/3;u<h;u++)for(let p=0;p<3;p++){const m=3*u+p,_=3*u+(p+1)%3;s.fromBufferAttribute(l,m),o.fromBufferAttribute(l,_),GH(s,o,i)===!0&&(t.push(s.x,s.y,s.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new Pn(t,3))}}}function GH(r,e,t){const i=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(i)===!0||t.has(s)===!0?!1:(t.add(i),t.add(s),!0)}var WH=Object.freeze({__proto__:null,BoxGeometry:Ma,BoxBufferGeometry:Ma,CapsuleGeometry:C1,CapsuleBufferGeometry:C1,CircleGeometry:M1,CircleBufferGeometry:M1,ConeGeometry:A1,ConeBufferGeometry:A1,CylinderGeometry:ra,CylinderBufferGeometry:ra,DodecahedronGeometry:I1,DodecahedronBufferGeometry:I1,EdgesGeometry:oj,ExtrudeGeometry:R1,ExtrudeBufferGeometry:R1,IcosahedronGeometry:k1,IcosahedronBufferGeometry:k1,LatheGeometry:rb,LatheBufferGeometry:rb,OctahedronGeometry:ng,OctahedronBufferGeometry:ng,PlaneGeometry:lg,PlaneBufferGeometry:lg,PolyhedronGeometry:Qg,PolyhedronBufferGeometry:Qg,RingGeometry:O1,RingBufferGeometry:O1,ShapeGeometry:L1,ShapeBufferGeometry:L1,SphereGeometry:ug,SphereBufferGeometry:ug,TetrahedronGeometry:N1,TetrahedronBufferGeometry:N1,TorusGeometry:eg,TorusBufferGeometry:eg,TorusKnotGeometry:D1,TorusKnotBufferGeometry:D1,TubeGeometry:B1,TubeBufferGeometry:B1,WireframeGeometry:oP});class cj extends Dc{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new _n(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class hj extends ah{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class JS extends Dc{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _n(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=db,this.normalScale=new Ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dj extends JS{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ot(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Du(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new _n(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new _n(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new _n(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class pj extends Dc{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new _n(16777215),this.specular=new _n(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=db,this.normalScale=new Ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=yw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class fj extends Dc{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new _n(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=db,this.normalScale=new Ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class aP extends Dc{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=db,this.normalScale=new Ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class mj extends Dc{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new _n(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=yw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class gj extends Dc{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _n(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=db,this.normalScale=new Ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _j extends Sd{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function rm(r,e,t){return lP(r)?new r.constructor(r.subarray(e,t!==void 0?t:r.length)):r.slice(e,t)}function Ny(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function lP(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function vj(r){function e(s,o){return r[s]-r[o]}const t=r.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function $2(r,e,t){const i=r.length,s=new r.constructor(i);for(let o=0,l=0;l!==i;++o){const u=t[o]*e;for(let h=0;h!==e;++h)s[l++]=r[u+h]}return s}function uP(r,e,t,i){let s=1,o=r[0];for(;o!==void 0&&o[i]===void 0;)o=r[s++];if(o===void 0)return;let l=o[i];if(l!==void 0)if(Array.isArray(l))do l=o[i],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=r[s++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[i],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=r[s++];while(o!==void 0);else do l=o[i],l!==void 0&&(e.push(o.time),t.push(l)),o=r[s++];while(o!==void 0)}function Kge(r,e,t,i,s=30){const o=r.clone();o.name=e;const l=[];for(let h=0;h<o.tracks.length;++h){const p=o.tracks[h],m=p.getValueSize(),_=[],v=[];for(let E=0;E<p.times.length;++E){const w=p.times[E]*s;if(!(w<t||w>=i)){_.push(p.times[E]);for(let x=0;x<m;++x)v.push(p.values[E*m+x])}}_.length!==0&&(p.times=Ny(_,p.times.constructor),p.values=Ny(v,p.values.constructor),l.push(p))}o.tracks=l;let u=1/0;for(let h=0;h<o.tracks.length;++h)u>o.tracks[h].times[0]&&(u=o.tracks[h].times[0]);for(let h=0;h<o.tracks.length;++h)o.tracks[h].shift(-1*u);return o.resetDuration(),o}function Jge(r,e=0,t=r,i=30){i<=0&&(i=30);const s=t.tracks.length,o=e/i;for(let l=0;l<s;++l){const u=t.tracks[l],h=u.ValueTypeName;if(h==="bool"||h==="string")continue;const p=r.tracks.find(function(O){return O.name===u.name&&O.ValueTypeName===h});if(p===void 0)continue;let m=0;const _=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=_/3);let v=0;const E=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=E/3);const w=u.times.length-1;let x;if(o<=u.times[0]){const O=m,k=_-m;x=rm(u.values,O,k)}else if(o>=u.times[w]){const O=w*_+m,k=O+_-m;x=rm(u.values,O,k)}else{const O=u.createInterpolant(),k=m,D=_-m;O.evaluate(o),x=rm(O.resultBuffer,k,D)}h==="quaternion"&&new Bo().fromArray(x).normalize().conjugate().toArray(x);const A=p.times.length;for(let O=0;O<A;++O){const k=O*E+v;if(h==="quaternion")Bo.multiplyQuaternionsFlat(p.values,k,x,0,p.values,k);else{const D=E-v*2;for(let N=0;N<D;++N)p.values[k+N]-=x[N]}}}return r.blendMode=WB,r}var Qge=Object.freeze({__proto__:null,arraySlice:rm,convertArray:Ny,isTypedArray:lP,getKeyframeOrder:vj,sortedArray:$2,flattenJSON:uP,subclip:Kge,makeClipAdditive:Jge});class ww{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],o=t[i-1];e:{t:{let l;n:{r:if(!(e<s)){for(let u=i+2;;){if(s===void 0){if(e<o)break r;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(o=s,s=t[++i],e<s)break t}l=t.length;break n}if(!(e>=o)){const u=t[1];e<u&&(i=2,o=u);for(let h=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===h)break;if(s=o,o=t[--i-1],e>=o)break t}l=i,i=0;break n}break e}for(;i<l;){const u=i+l>>>1;e<t[u]?l=u:i=u+1}if(s=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,s)}return this.interpolate_(i,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s;for(let l=0;l!==s;++l)t[l]=i[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class yj extends ww{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ky,endingEnd:ky}}intervalChanged_(e,t,i){const s=this.parameterPositions;let o=e-2,l=e+1,u=s[o],h=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case Oy:o=e,u=2*t-i;break;case zS:o=s.length-2,u=t+s[o]-s[o+1];break;default:o=e,u=i}if(h===void 0)switch(this.getSettings_().endingEnd){case Oy:l=e,h=2*i-t;break;case zS:l=1,h=i+s[1]-s[0];break;default:l=e-1,h=t}const p=(i-t)*.5,m=this.valueSize;this._weightPrev=p/(t-u),this._weightNext=p/(h-i),this._offsetPrev=o*m,this._offsetNext=l*m}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,p=h-u,m=this._offsetPrev,_=this._offsetNext,v=this._weightPrev,E=this._weightNext,w=(i-t)/(s-t),x=w*w,A=x*w,O=-v*A+2*v*x-v*w,k=(1+v)*A+(-1.5-2*v)*x+(-.5+v)*w+1,D=(-1-E)*A+(1.5+E)*x+.5*w,N=E*A-E*x;for(let F=0;F!==u;++F)o[F]=O*l[m+F]+k*l[p+F]+D*l[h+F]+N*l[_+F];return o}}class cP extends ww{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,p=h-u,m=(i-t)/(s-t),_=1-m;for(let v=0;v!==u;++v)o[v]=l[p+v]*_+l[h+v]*m;return o}}class bj extends ww{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class fg{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ny(t,this.TimeBufferType),this.values=Ny(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Ny(e.times,Array),values:Ny(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new bj(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new cP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new yj(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case FS:t=this.InterpolantFactoryMethodDiscrete;break;case US:t=this.InterpolantFactoryMethodLinear;break;case MM:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return FS;case this.InterpolantFactoryMethodLinear:return US;case this.InterpolantFactoryMethodSmooth:return MM}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let o=0,l=s-1;for(;o!==s&&i[o]<e;)++o;for(;l!==-1&&i[l]>t;)--l;if(++l,o!==0||l!==s){o>=l&&(l=Math.max(l,1),o=l-1);const u=this.getValueSize();this.times=rm(i,o,l),this.values=rm(this.values,o*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==o;u++){const h=i[u];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,h),e=!1;break}if(l!==null&&l>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,h,l),e=!1;break}l=h}if(s!==void 0&&lP(s))for(let u=0,h=s.length;u!==h;++u){const p=s[u];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,p),e=!1;break}}return e}optimize(){const e=rm(this.times),t=rm(this.values),i=this.getValueSize(),s=this.getInterpolation()===MM,o=e.length-1;let l=1;for(let u=1;u<o;++u){let h=!1;const p=e[u],m=e[u+1];if(p!==m&&(u!==1||p!==e[0]))if(s)h=!0;else{const _=u*i,v=_-i,E=_+i;for(let w=0;w!==i;++w){const x=t[_+w];if(x!==t[v+w]||x!==t[E+w]){h=!0;break}}}if(h){if(u!==l){e[l]=e[u];const _=u*i,v=l*i;for(let E=0;E!==i;++E)t[v+E]=t[_+E]}++l}}if(o>0){e[l]=e[o];for(let u=o*i,h=l*i,p=0;p!==i;++p)t[h+p]=t[u+p];++l}return l!==e.length?(this.times=rm(e,0,l),this.values=rm(t,0,l*i)):(this.times=e,this.values=t),this}clone(){const e=rm(this.times,0),t=rm(this.values,0),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}fg.prototype.TimeBufferType=Float32Array;fg.prototype.ValueBufferType=Float32Array;fg.prototype.DefaultInterpolation=US;class fb extends fg{}fb.prototype.ValueTypeName="bool";fb.prototype.ValueBufferType=Array;fb.prototype.DefaultInterpolation=FS;fb.prototype.InterpolantFactoryMethodLinear=void 0;fb.prototype.InterpolantFactoryMethodSmooth=void 0;class hP extends fg{}hP.prototype.ValueTypeName="color";class QS extends fg{}QS.prototype.ValueTypeName="number";class Tj extends ww{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=(i-t)/(s-t);let p=e*u;for(let m=p+u;p!==m;p+=4)Bo.slerpFlat(o,0,l,p-u,l,p,h);return o}}class nE extends fg{InterpolantFactoryMethodLinear(e){return new Tj(this.times,this.values,this.getValueSize(),e)}}nE.prototype.ValueTypeName="quaternion";nE.prototype.DefaultInterpolation=US;nE.prototype.InterpolantFactoryMethodSmooth=void 0;class mb extends fg{}mb.prototype.ValueTypeName="string";mb.prototype.ValueBufferType=Array;mb.prototype.DefaultInterpolation=FS;mb.prototype.InterpolantFactoryMethodLinear=void 0;mb.prototype.InterpolantFactoryMethodSmooth=void 0;class qS extends fg{}qS.prototype.ValueTypeName="vector";class ZS{constructor(e,t=-1,i,s=XI){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=bf(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let l=0,u=i.length;l!==u;++l)t.push(Zge(i[l]).scale(s));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=i.length;o!==l;++o)t.push(fg.toJSON(i[o]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const o=t.length,l=[];for(let u=0;u<o;u++){let h=[],p=[];h.push((u+o-1)%o,u,(u+1)%o),p.push(0,1,0);const m=vj(h);h=$2(h,1,m),p=$2(p,1,m),!s&&h[0]===0&&(h.push(o),p.push(p[0])),l.push(new QS(".morphTargetInfluences["+t[u].name+"]",h,p).scale(1/i))}return new this(e,-1,l)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},o=/^([\w-]*?)([\d]+)$/;for(let u=0,h=e.length;u<h;u++){const p=e[u],m=p.name.match(o);if(m&&m.length>1){const _=m[1];let v=s[_];v||(s[_]=v=[]),v.push(p)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],t,i));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(m,_,v,E,w){if(v.length!==0){const x=[],A=[];uP(v,x,A,E),x.length!==0&&w.push(new m(_,x,A))}},s=[],o=e.name||"default",l=e.fps||30,u=e.blendMode;let h=e.length||-1;const p=e.hierarchy||[];for(let m=0;m<p.length;m++){const _=p[m].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const v={};let E;for(E=0;E<_.length;E++)if(_[E].morphTargets)for(let w=0;w<_[E].morphTargets.length;w++)v[_[E].morphTargets[w]]=-1;for(const w in v){const x=[],A=[];for(let O=0;O!==_[E].morphTargets.length;++O){const k=_[E];x.push(k.time),A.push(k.morphTarget===w?1:0)}s.push(new QS(".morphTargetInfluence["+w+"]",x,A))}h=v.length*l}else{const v=".bones["+t[m].name+"]";i(qS,v+".position",_,"pos",s),i(nE,v+".quaternion",_,"rot",s),i(qS,v+".scale",_,"scl",s)}}return s.length===0?null:new this(o,h,s,u)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function qge(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return QS;case"vector":case"vector2":case"vector3":case"vector4":return qS;case"color":return hP;case"quaternion":return nE;case"bool":case"boolean":return fb;case"string":return mb}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function Zge(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=qge(r.type);if(r.times===void 0){const t=[],i=[];uP(r.keys,t,i,"value"),r.times=t,r.values=i}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const ib={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class dP{constructor(e,t,i){const s=this;let o=!1,l=0,u=0,h;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(m){u++,o===!1&&s.onStart!==void 0&&s.onStart(m,l,u),o=!0},this.itemEnd=function(m){l++,s.onProgress!==void 0&&s.onProgress(m,l,u),l===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(m){s.onError!==void 0&&s.onError(m)},this.resolveURL=function(m){return h?h(m):m},this.setURLModifier=function(m){return h=m,this},this.addHandler=function(m,_){return p.push(m,_),this},this.removeHandler=function(m){const _=p.indexOf(m);return _!==-1&&p.splice(_,2),this},this.getHandler=function(m){for(let _=0,v=p.length;_<v;_+=2){const E=p[_],w=p[_+1];if(E.global&&(E.lastIndex=0),E.test(m))return w}return null}}}const Ej=new dP;class Mf{constructor(e){this.manager=e!==void 0?e:Ej,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,o){i.load(e,s,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const R_={};class e_e extends Error{constructor(e,t){super(e),this.response=t}}class K_ extends Mf{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=ib.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(R_[e]!==void 0){R_[e].push({onLoad:t,onProgress:i,onError:s});return}R_[e]=[],R_[e].push({onLoad:t,onProgress:i,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,h=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const m=R_[e],_=p.body.getReader(),v=p.headers.get("Content-Length"),E=v?parseInt(v):0,w=E!==0;let x=0;const A=new ReadableStream({start(O){k();function k(){_.read().then(({done:D,value:N})=>{if(D)O.close();else{x+=N.byteLength;const F=new ProgressEvent("progress",{lengthComputable:w,loaded:x,total:E});for(let z=0,V=m.length;z<V;z++){const U=m[z];U.onProgress&&U.onProgress(F)}O.enqueue(N),k()}})}}});return new Response(A)}else throw new e_e(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(h){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(m=>new DOMParser().parseFromString(m,u));case"json":return p.json();default:if(u===void 0)return p.text();{const m=/charset="?([^;"\s]*)"?/i.exec(u),_=m&&m[1]?m[1].toLowerCase():void 0,v=new TextDecoder(_);return p.arrayBuffer().then(E=>v.decode(E))}}}).then(p=>{ib.add(e,p);const m=R_[e];delete R_[e];for(let _=0,v=m.length;_<v;_++){const E=m[_];E.onLoad&&E.onLoad(p)}}).catch(p=>{const m=R_[e];if(m===void 0)throw this.manager.itemError(e),p;delete R_[e];for(let _=0,v=m.length;_<v;_++){const E=m[_];E.onError&&E.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class t_e extends Mf{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new K_(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},i,s)}parse(e){const t=[];for(let i=0;i<e.length;i++){const s=ZS.parse(e[i]);t.push(s)}return t}}class n_e extends Mf{constructor(e){super(e)}load(e,t,i,s){const o=this,l=[],u=new ej,h=new K_(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(o.withCredentials);let p=0;function m(_){h.load(e[_],function(v){const E=o.parse(v,!0);l[_]={width:E.width,height:E.height,format:E.format,mipmaps:E.mipmaps},p+=1,p===6&&(E.mipmapCount===1&&(u.minFilter=Po),u.image=l,u.format=E.format,u.needsUpdate=!0,t&&t(u))},i,s)}if(Array.isArray(e))for(let _=0,v=e.length;_<v;++_)m(_);else h.load(e,function(_){const v=o.parse(_,!0);if(v.isCubemap){const E=v.mipmaps.length/v.mipmapCount;for(let w=0;w<E;w++){l[w]={mipmaps:[]};for(let x=0;x<v.mipmapCount;x++)l[w].mipmaps.push(v.mipmaps[w*v.mipmapCount+x]),l[w].format=v.format,l[w].width=v.width,l[w].height=v.height}u.image=l}else u.image.width=v.width,u.image.height=v.height,u.mipmaps=v.mipmaps;v.mipmapCount===1&&(u.minFilter=Po),u.format=v.format,u.needsUpdate=!0,t&&t(u)},i,s);return u}}class ew extends Mf{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=ib.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u=WS("img");function h(){m(),ib.add(e,this),t&&t(this),o.manager.itemEnd(e)}function p(_){m(),s&&s(_),o.manager.itemError(e),o.manager.itemEnd(e)}function m(){u.removeEventListener("load",h,!1),u.removeEventListener("error",p,!1)}return u.addEventListener("load",h,!1),u.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(e),u.src=e,u}}class r_e extends Mf{constructor(e){super(e)}load(e,t,i,s){const o=new $w,l=new ew(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let u=0;function h(p){l.load(e[p],function(m){o.images[p]=m,u++,u===6&&(o.needsUpdate=!0,t&&t(o))},void 0,s)}for(let p=0;p<e.length;++p)h(p);return o}}class i_e extends Mf{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new u1,u=new K_(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(o.withCredentials),u.load(e,function(h){const p=o.parse(h);!p||(p.image!==void 0?l.image=p.image:p.data!==void 0&&(l.image.width=p.width,l.image.height=p.height,l.image.data=p.data),l.wrapS=p.wrapS!==void 0?p.wrapS:Yd,l.wrapT=p.wrapT!==void 0?p.wrapT:Yd,l.magFilter=p.magFilter!==void 0?p.magFilter:Po,l.minFilter=p.minFilter!==void 0?p.minFilter:Po,l.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.encoding!==void 0&&(l.encoding=p.encoding),p.flipY!==void 0&&(l.flipY=p.flipY),p.format!==void 0&&(l.format=p.format),p.type!==void 0&&(l.type=p.type),p.mipmaps!==void 0&&(l.mipmaps=p.mipmaps,l.minFilter=hb),p.mipmapCount===1&&(l.minFilter=Po),p.generateMipmaps!==void 0&&(l.generateMipmaps=p.generateMipmaps),l.needsUpdate=!0,t&&t(l,p))},i,s),l}}class s_e extends Mf{constructor(e){super(e)}load(e,t,i,s){const o=new Rl,l=new ew(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){o.image=u,o.needsUpdate=!0,t!==void 0&&t(o)},i,s),o}}class Sv extends is{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new _n(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class $j extends Sv{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(is.DefaultUp),this.updateMatrix(),this.groundColor=new _n(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const VH=new Sr,jH=new Te,XH=new Te;class pP{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ot(512,512),this.map=null,this.mapPass=null,this.matrix=new Sr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new KI,this._frameExtents=new Ot(1,1),this._viewportCount=1,this._viewports=[new xi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;jH.setFromMatrixPosition(e.matrixWorld),t.position.copy(jH),XH.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(XH),t.updateMatrixWorld(),VH.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(VH),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class o_e extends pP{constructor(){super(new So(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=GS*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||s!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=s,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Sj extends Sv{constructor(e,t,i=0,s=Math.PI/3,o=0,l=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(is.DefaultUp),this.updateMatrix(),this.target=new is,this.distance=i,this.angle=s,this.penumbra=o,this.decay=l,this.shadow=new o_e}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const YH=new Sr,T$=new Te,GO=new Te;class a_e extends pP{constructor(){super(new So(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ot(4,2),this._viewportCount=6,this._viewports=[new xi(2,1,1,1),new xi(0,1,1,1),new xi(3,1,1,1),new xi(1,1,1,1),new xi(3,0,1,1),new xi(1,0,1,1)],this._cubeDirections=[new Te(1,0,0),new Te(-1,0,0),new Te(0,0,1),new Te(0,0,-1),new Te(0,1,0),new Te(0,-1,0)],this._cubeUps=[new Te(0,1,0),new Te(0,1,0),new Te(0,1,0),new Te(0,1,0),new Te(0,0,1),new Te(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),T$.setFromMatrixPosition(e.matrixWorld),i.position.copy(T$),GO.copy(i.position),GO.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(GO),i.updateMatrixWorld(),s.makeTranslation(-T$.x,-T$.y,-T$.z),YH.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(YH)}}class wj extends Sv{constructor(e,t,i=0,s=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new a_e}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class l_e extends pP{constructor(){super(new jg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class xj extends Sv{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(is.DefaultUp),this.updateMatrix(),this.target=new is,this.shadow=new l_e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Cj extends Sv{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Mj extends Sv{constructor(e,t,i=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Aj{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Te)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,s=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*s),t.addScaledVector(l[2],.488603*o),t.addScaledVector(l[3],.488603*i),t.addScaledVector(l[4],1.092548*(i*s)),t.addScaledVector(l[5],1.092548*(s*o)),t.addScaledVector(l[6],.315392*(3*o*o-1)),t.addScaledVector(l[7],1.092548*(i*o)),t.addScaledVector(l[8],.546274*(i*i-s*s)),t}getIrradianceAt(e,t){const i=e.x,s=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*s),t.addScaledVector(l[2],2*.511664*o),t.addScaledVector(l[3],2*.511664*i),t.addScaledVector(l[4],2*.429043*i*s),t.addScaledVector(l[5],2*.429043*s*o),t.addScaledVector(l[6],.743125*o*o-.247708),t.addScaledVector(l[7],2*.429043*i*o),t.addScaledVector(l[8],.429043*(i*i-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const i=e.x,s=e.y,o=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*o,t[3]=.488603*i,t[4]=1.092548*i*s,t[5]=1.092548*s*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*i*o,t[8]=.546274*(i*i-s*s)}}class oR extends Sv{constructor(e=new Aj,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class aR extends Mf{constructor(e){super(e),this.textures={}}load(e,t,i,s){const o=this,l=new K_(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},i,s)}parse(e){const t=this.textures;function i(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}const s=aR.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new _n().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==1&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const l=e.uniforms[o];switch(s.uniforms[o]={},l.type){case"t":s.uniforms[o].value=i(l.value);break;case"c":s.uniforms[o].value=new _n().setHex(l.value);break;case"v2":s.uniforms[o].value=new Ot().fromArray(l.value);break;case"v3":s.uniforms[o].value=new Te().fromArray(l.value);break;case"v4":s.uniforms[o].value=new xi().fromArray(l.value);break;case"m3":s.uniforms[o].value=new Jd().fromArray(l.value);break;case"m4":s.uniforms[o].value=new Sr().fromArray(l.value);break;default:s.uniforms[o].value=l.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const o in e.extensions)s.extensions[o]=e.extensions[o];if(e.shading!==void 0&&(s.flatShading=e.shading===1),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=i(e.map)),e.matcap!==void 0&&(s.matcap=i(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),s.normalScale=new Ot().fromArray(o)}return e.displacementMap!==void 0&&(s.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Ot().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=i(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:cj,SpriteMaterial:qB,RawShaderMaterial:hj,ShaderMaterial:ah,PointsMaterial:nR,MeshPhysicalMaterial:dj,MeshStandardMaterial:JS,MeshPhongMaterial:pj,MeshToonMaterial:fj,MeshNormalMaterial:aP,MeshLambertMaterial:mj,MeshDepthMaterial:Sw,MeshDistanceMaterial:QI,MeshBasicMaterial:dg,MeshMatcapMaterial:gj,LineDashedMaterial:_j,LineBasicMaterial:Sd,Material:Dc};return new t[e]}}class S2{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class lR extends Ar{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Ij extends Mf{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new K_(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},i,s)}parse(e){const t={},i={};function s(v,E){if(t[E]!==void 0)return t[E];const w=v.interleavedBuffers[E],x=o(v,w.buffer),A=YT(w.type,x),O=new eR(A,w.stride);return O.uuid=w.uuid,t[E]=O,O}function o(v,E){if(i[E]!==void 0)return i[E];const w=v.arrayBuffers[E],x=new Uint32Array(w).buffer;return i[E]=x,x}const l=e.isInstancedBufferGeometry?new lR:new Ar,u=e.data.index;if(u!==void 0){const v=YT(u.type,u.array);l.setIndex(new xs(v,1))}const h=e.data.attributes;for(const v in h){const E=h[v];let w;if(E.isInterleavedBufferAttribute){const x=s(e.data,E.data);w=new ff(x,E.itemSize,E.offset,E.normalized)}else{const x=YT(E.type,E.array),A=E.isInstancedBufferAttribute?nb:xs;w=new A(x,E.itemSize,E.normalized)}E.name!==void 0&&(w.name=E.name),E.usage!==void 0&&w.setUsage(E.usage),E.updateRange!==void 0&&(w.updateRange.offset=E.updateRange.offset,w.updateRange.count=E.updateRange.count),l.setAttribute(v,w)}const p=e.data.morphAttributes;if(p)for(const v in p){const E=p[v],w=[];for(let x=0,A=E.length;x<A;x++){const O=E[x];let k;if(O.isInterleavedBufferAttribute){const D=s(e.data,O.data);k=new ff(D,O.itemSize,O.offset,O.normalized)}else{const D=YT(O.type,O.array);k=new xs(D,O.itemSize,O.normalized)}O.name!==void 0&&(k.name=O.name),w.push(k)}l.morphAttributes[v]=w}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let v=0,E=m.length;v!==E;++v){const w=m[v];l.addGroup(w.start,w.count,w.materialIndex)}const _=e.data.boundingSphere;if(_!==void 0){const v=new Te;_.center!==void 0&&v.fromArray(_.center),l.boundingSphere=new t_(v,_.radius)}return e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class u_e extends Mf{constructor(e){super(e)}load(e,t,i,s){const o=this,l=this.path===""?S2.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const u=new K_(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){let p=null;try{p=JSON.parse(h)}catch(_){s!==void 0&&s(_),console.error("THREE:ObjectLoader: Can't parse "+e+".",_.message);return}const m=p.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(p,t)},i,s)}async loadAsync(e,t){const i=this,s=this.path===""?S2.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new K_(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const l=await o.loadAsync(e,t),u=JSON.parse(l),h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(u)}parse(e,t){const i=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,s),l=this.parseImages(e.images,function(){t!==void 0&&t(p)}),u=this.parseTextures(e.textures,l),h=this.parseMaterials(e.materials,u),p=this.parseObject(e.object,o,h,u,i),m=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,m),t!==void 0){let _=!1;for(const v in l)if(l[v].data instanceof HTMLImageElement){_=!0;break}_===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,s,u,l,t),p=this.parseSkeletons(e.skeletons,h);return this.bindSkeletons(h,p),h}parseShapes(e){const t={};if(e!==void 0)for(let i=0,s=e.length;i<s;i++){const o=new Wy().fromJSON(e[i]);t[o.uuid]=o}return t}parseSkeletons(e,t){const i={},s={};if(t.traverse(function(o){o.isBone&&(s[o.uuid]=o)}),e!==void 0)for(let o=0,l=e.length;o<l;o++){const u=new tR().fromJSON(e[o],s);i[u.uuid]=u}return i}parseGeometries(e,t){const i={};if(e!==void 0){const s=new Ij;for(let o=0,l=e.length;o<l;o++){let u;const h=e[o];switch(h.type){case"BufferGeometry":case"InstancedBufferGeometry":u=s.parse(h);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:h.type in WH?u=WH[h.type].fromJSON(h,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${h.type}"`)}u.uuid=h.uuid,h.name!==void 0&&(u.name=h.name),u.isBufferGeometry===!0&&h.userData!==void 0&&(u.userData=h.userData),i[h.uuid]=u}}return i}parseMaterials(e,t){const i={},s={};if(e!==void 0){const o=new aR;o.setTextures(t);for(let l=0,u=e.length;l<u;l++){const h=e[l];if(h.type==="MultiMaterial"){const p=[];for(let m=0;m<h.materials.length;m++){const _=h.materials[m];i[_.uuid]===void 0&&(i[_.uuid]=o.parse(_)),p.push(i[_.uuid])}s[h.uuid]=p}else i[h.uuid]===void 0&&(i[h.uuid]=o.parse(h)),s[h.uuid]=i[h.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const s=e[i],o=ZS.parse(s);t[o.uuid]=o}return t}parseImages(e,t){const i=this,s={};let o;function l(h){return i.manager.itemStart(h),o.load(h,function(){i.manager.itemEnd(h)},void 0,function(){i.manager.itemError(h),i.manager.itemEnd(h)})}function u(h){if(typeof h=="string"){const p=h,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.resourcePath+p;return l(m)}else return h.data?{data:YT(h.type,h.data),width:h.width,height:h.height}:null}if(e!==void 0&&e.length>0){const h=new dP(t);o=new ew(h),o.setCrossOrigin(this.crossOrigin);for(let p=0,m=e.length;p<m;p++){const _=e[p],v=_.url;if(Array.isArray(v)){const E=[];for(let w=0,x=v.length;w<x;w++){const A=v[w],O=u(A);O!==null&&(O instanceof HTMLImageElement?E.push(O):E.push(new u1(O.data,O.width,O.height)))}s[_.uuid]=new Ly(E)}else{const E=u(_.url);s[_.uuid]=new Ly(E)}}}return s}async parseImagesAsync(e){const t=this,i={};let s;async function o(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:t.resourcePath+u;return await s.loadAsync(h)}else return l.data?{data:YT(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){s=new ew(this.manager),s.setCrossOrigin(this.crossOrigin);for(let l=0,u=e.length;l<u;l++){const h=e[l],p=h.url;if(Array.isArray(p)){const m=[];for(let _=0,v=p.length;_<v;_++){const E=p[_],w=await o(E);w!==null&&(w instanceof HTMLImageElement?m.push(w):m.push(new u1(w.data,w.width,w.height)))}i[h.uuid]=new Ly(m)}else{const m=await o(h.url);i[h.uuid]=new Ly(m)}}}return i}parseTextures(e,t){function i(o,l){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),l[o])}const s={};if(e!==void 0)for(let o=0,l=e.length;o<l;o++){const u=e[o];u.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),t[u.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",u.image);const h=t[u.image],p=h.data;let m;Array.isArray(p)?(m=new $w,p.length===6&&(m.needsUpdate=!0)):(p&&p.data?m=new u1:m=new Rl,p&&(m.needsUpdate=!0)),m.source=h,m.uuid=u.uuid,u.name!==void 0&&(m.name=u.name),u.mapping!==void 0&&(m.mapping=i(u.mapping,c_e)),u.offset!==void 0&&m.offset.fromArray(u.offset),u.repeat!==void 0&&m.repeat.fromArray(u.repeat),u.center!==void 0&&m.center.fromArray(u.center),u.rotation!==void 0&&(m.rotation=u.rotation),u.wrap!==void 0&&(m.wrapS=i(u.wrap[0],KH),m.wrapT=i(u.wrap[1],KH)),u.format!==void 0&&(m.format=u.format),u.type!==void 0&&(m.type=u.type),u.encoding!==void 0&&(m.encoding=u.encoding),u.minFilter!==void 0&&(m.minFilter=i(u.minFilter,JH)),u.magFilter!==void 0&&(m.magFilter=i(u.magFilter,JH)),u.anisotropy!==void 0&&(m.anisotropy=u.anisotropy),u.flipY!==void 0&&(m.flipY=u.flipY),u.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(m.unpackAlignment=u.unpackAlignment),u.userData!==void 0&&(m.userData=u.userData),s[u.uuid]=m}return s}parseObject(e,t,i,s,o){let l;function u(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function h(v){if(v!==void 0){if(Array.isArray(v)){const E=[];for(let w=0,x=v.length;w<x;w++){const A=v[w];i[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),E.push(i[A])}return E}return i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),i[v]}}function p(v){return s[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),s[v]}let m,_;switch(e.type){case"Scene":l=new VS,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new _n(e.background):l.background=p(e.background)),e.environment!==void 0&&(l.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new ZI(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new qI(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":l=new So(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new jg(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new Cj(e.color,e.intensity);break;case"DirectionalLight":l=new xj(e.color,e.intensity);break;case"PointLight":l=new wj(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new Mj(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new Sj(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":l=new $j(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new oR().fromJSON(e);break;case"SkinnedMesh":m=u(e.geometry),_=h(e.material),l=new J9(m,_),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":m=u(e.geometry),_=h(e.material),l=new bn(m,_);break;case"InstancedMesh":m=u(e.geometry),_=h(e.material);const v=e.count,E=e.instanceMatrix,w=e.instanceColor;l=new Q9(m,_,v),l.instanceMatrix=new nb(new Float32Array(E.array),16),w!==void 0&&(l.instanceColor=new nb(new Float32Array(w.array),w.itemSize));break;case"LOD":l=new K9;break;case"Line":l=new vd(u(e.geometry),h(e.material));break;case"LineLoop":l=new q9(u(e.geometry),h(e.material));break;case"LineSegments":l=new n_(u(e.geometry),h(e.material));break;case"PointCloud":case"Points":l=new Z9(u(e.geometry),h(e.material));break;case"Sprite":l=new Y9(h(e.material));break;case"Group":l=new JT;break;case"Bone":l=new ZB;break;default:l=new is}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let E=0;E<v.length;E++)l.add(this.parseObject(v[E],t,i,s,o))}if(e.animations!==void 0){const v=e.animations;for(let E=0;E<v.length;E++){const w=v[E];l.animations.push(o[w])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const v=e.levels;for(let E=0;E<v.length;E++){const w=v[E],x=l.getObjectByProperty("uuid",w.object);x!==void 0&&l.addLevel(x,w.distance)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const s=t[i.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(s,i.bindMatrix)}})}}const c_e={UVMapping:jI,CubeReflectionMapping:pv,CubeRefractionMapping:fv,EquirectangularReflectionMapping:DS,EquirectangularRefractionMapping:BS,CubeUVReflectionMapping:Z1},KH={RepeatWrapping:S1,ClampToEdgeWrapping:Yd,MirroredRepeatWrapping:PS},JH={NearestFilter:ia,NearestMipmapNearestFilter:$A,NearestMipmapLinearFilter:SA,LinearFilter:Po,LinearMipmapNearestFilter:HB,LinearMipmapLinearFilter:hb};class h_e extends Mf{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=ib.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader,fetch(e,u).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(h){ib.add(e,h),t&&t(h),o.manager.itemEnd(e)}).catch(function(h){s&&s(h),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}let DC;const fP={getContext:function(){return DC===void 0&&(DC=new(window.AudioContext||window.webkitAudioContext)),DC},setContext:function(r){DC=r}};class d_e extends Mf{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new K_(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{const h=u.slice(0);fP.getContext().decodeAudioData(h,function(p){t(p)})}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},i,s)}}class p_e extends oR{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const s=new _n().set(e),o=new _n().set(t),l=new Te(s.r,s.g,s.b),u=new Te(o.r,o.g,o.b),h=Math.sqrt(Math.PI),p=h*Math.sqrt(.75);this.sh.coefficients[0].copy(l).add(u).multiplyScalar(h),this.sh.coefficients[1].copy(l).sub(u).multiplyScalar(p)}}class f_e extends oR{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new _n().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const QH=new Sr,qH=new Sr,ty=new Sr;class m_e{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new So,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new So,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ty.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(zy*t.fov*.5)/t.zoom;let l,u;qH.elements[12]=-i,QH.elements[12]=i,l=-o*t.aspect+s,u=o*t.aspect+s,ty.elements[0]=2*t.near/(u-l),ty.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(ty),l=-o*t.aspect-s,u=o*t.aspect-s,ty.elements[0]=2*t.near/(u-l),ty.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(ty)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(qH),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(QH)}}class mP{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ZH(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=ZH();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function ZH(){return(typeof performance>"u"?Date:performance).now()}const ny=new Te,e4=new Bo,g_e=new Te,ry=new Te;class __e extends is{constructor(){super(),this.type="AudioListener",this.context=fP.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new mP}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ny,e4,g_e),ry.set(0,0,-1).applyQuaternion(e4),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ny.x,s),t.positionY.linearRampToValueAtTime(ny.y,s),t.positionZ.linearRampToValueAtTime(ny.z,s),t.forwardX.linearRampToValueAtTime(ry.x,s),t.forwardY.linearRampToValueAtTime(ry.y,s),t.forwardZ.linearRampToValueAtTime(ry.z,s),t.upX.linearRampToValueAtTime(i.x,s),t.upY.linearRampToValueAtTime(i.y,s),t.upZ.linearRampToValueAtTime(i.z,s)}else t.setPosition(ny.x,ny.y,ny.z),t.setOrientation(ry.x,ry.y,ry.z,i.x,i.y,i.z)}}class Rj extends is{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const iy=new Te,t4=new Bo,v_e=new Te,sy=new Te;class y_e extends Rj{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(iy,t4,v_e),sy.set(0,0,1).applyQuaternion(t4);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(iy.x,i),t.positionY.linearRampToValueAtTime(iy.y,i),t.positionZ.linearRampToValueAtTime(iy.z,i),t.orientationX.linearRampToValueAtTime(sy.x,i),t.orientationY.linearRampToValueAtTime(sy.y,i),t.orientationZ.linearRampToValueAtTime(sy.z,i)}else t.setPosition(iy.x,iy.y,iy.z),t.setOrientation(sy.x,sy.y,sy.z)}}class b_e{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class kj{constructor(e,t,i){this.binding=e,this.valueSize=i;let s,o,l;switch(t){case"quaternion":s=this._slerp,o=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":s=this._select,o=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:s=this._lerp,o=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=o,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,s=this.valueSize,o=e*s+s;let l=this.cumulativeWeight;if(l===0){for(let u=0;u!==s;++u)i[o+u]=i[u];l=t}else{l+=t;const u=t/l;this._mixBufferRegion(i,o,0,u,s)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,s=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,s=e*t+t,o=this.cumulativeWeight,l=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const h=t*this._origIndex;this._mixBufferRegion(i,s,h,1-o,t)}l>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*t,1,t);for(let h=t,p=t+t;h!==p;++h)if(i[h]!==i[h+t]){u.setValue(i,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,s=i*this._origIndex;e.getValue(t,s);for(let o=i,l=s;o!==l;++o)t[o]=t[s+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,s,o){if(s>=.5)for(let l=0;l!==o;++l)e[t+l]=e[i+l]}_slerp(e,t,i,s){Bo.slerpFlat(e,t,e,t,e,i,s)}_slerpAdditive(e,t,i,s,o){const l=this._workIndex*o;Bo.multiplyQuaternionsFlat(e,l,e,t,e,i),Bo.slerpFlat(e,t,e,t,e,l,s)}_lerp(e,t,i,s,o){const l=1-s;for(let u=0;u!==o;++u){const h=t+u;e[h]=e[h]*l+e[i+u]*s}}_lerpAdditive(e,t,i,s,o){for(let l=0;l!==o;++l){const u=t+l;e[u]=e[u]+e[i+l]*s}}}const gP="\\[\\]\\.:\\/",T_e=new RegExp("["+gP+"]","g"),_P="[^"+gP+"]",E_e="[^"+gP.replace("\\.","")+"]",$_e=/((?:WC+[\/:])*)/.source.replace("WC",_P),S_e=/(WCOD+)?/.source.replace("WCOD",E_e),w_e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_P),x_e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_P),C_e=new RegExp("^"+$_e+S_e+w_e+x_e+"$"),M_e=["material","materials","bones"];class A_e{constructor(e,t,i){const s=i||us.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=i.length;s!==o;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class us{constructor(e,t,i){this.path=t,this.parsedPath=i||us.parseTrackName(t),this.node=us.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new us.Composite(e,t,i):new us(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(T_e,"")}static parseTrackName(e){const t=C_e.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=i.nodeName.substring(s+1);M_e.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===t||u.uuid===t)return u;const h=i(u.children);if(h)return h}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let o=t.propertyIndex;if(e||(e=us.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let p=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===p){p=m;break}break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(p!==void 0){if(e[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const l=e[s];if(l===void 0){const p=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(h=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}us.Composite=A_e;us.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};us.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};us.prototype.GetterByBindingType=[us.prototype._getValue_direct,us.prototype._getValue_array,us.prototype._getValue_arrayElement,us.prototype._getValue_toArray];us.prototype.SetterByBindingTypeAndVersioning=[[us.prototype._setValue_direct,us.prototype._setValue_direct_setNeedsUpdate,us.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[us.prototype._setValue_array,us.prototype._setValue_array_setNeedsUpdate,us.prototype._setValue_array_setMatrixWorldNeedsUpdate],[us.prototype._setValue_arrayElement,us.prototype._setValue_arrayElement_setNeedsUpdate,us.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[us.prototype._setValue_fromArray,us.prototype._setValue_fromArray_setNeedsUpdate,us.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class I_e{constructor(){this.isAnimationObjectGroup=!0,this.uuid=bf(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,s=arguments.length;i!==s;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length;let u,h=e.length,p=this.nCachedObjects_;for(let m=0,_=arguments.length;m!==_;++m){const v=arguments[m],E=v.uuid;let w=t[E];if(w===void 0){w=h++,t[E]=w,e.push(v);for(let x=0,A=l;x!==A;++x)o[x].push(new us(v,i[x],s[x]))}else if(w<p){u=e[w];const x=--p,A=e[x];t[A.uuid]=w,e[w]=A,t[E]=x,e[x]=v;for(let O=0,k=l;O!==k;++O){const D=o[O],N=D[x];let F=D[w];D[w]=N,F===void 0&&(F=new us(v,i[O],s[O])),D[x]=F}}else e[w]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let o=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const h=arguments[l],p=h.uuid,m=t[p];if(m!==void 0&&m>=o){const _=o++,v=e[_];t[v.uuid]=m,e[m]=v,t[p]=_,e[_]=h;for(let E=0,w=s;E!==w;++E){const x=i[E],A=x[_],O=x[m];x[m]=A,x[_]=O}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let o=this.nCachedObjects_,l=e.length;for(let u=0,h=arguments.length;u!==h;++u){const p=arguments[u],m=p.uuid,_=t[m];if(_!==void 0)if(delete t[m],_<o){const v=--o,E=e[v],w=--l,x=e[w];t[E.uuid]=_,e[_]=E,t[x.uuid]=v,e[v]=x,e.pop();for(let A=0,O=s;A!==O;++A){const k=i[A],D=k[v],N=k[w];k[_]=D,k[v]=N,k.pop()}}else{const v=--l,E=e[v];v>0&&(t[E.uuid]=_),e[_]=E,e.pop();for(let w=0,x=s;w!==x;++w){const A=i[w];A[_]=A[v],A.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const i=this._bindingsIndicesByPath;let s=i[e];const o=this._bindings;if(s!==void 0)return o[s];const l=this._paths,u=this._parsedPaths,h=this._objects,p=h.length,m=this.nCachedObjects_,_=new Array(p);s=o.length,i[e]=s,l.push(e),u.push(t),o.push(_);for(let v=m,E=h.length;v!==E;++v){const w=h[v];_[v]=new us(w,e,t)}return _}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const s=this._paths,o=this._parsedPaths,l=this._bindings,u=l.length-1,h=l[u],p=e[u];t[p]=i,l[i]=h,l.pop(),o[i]=o[u],o.pop(),s[i]=s[u],s.pop()}}}class R_e{constructor(e,t,i=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=s;const o=t.tracks,l=o.length,u=new Array(l),h={endingStart:ky,endingEnd:ky};for(let p=0;p!==l;++p){const m=o[p].createInterpolant(null);u[p]=m,m.settings=h}this._interpolantSettings=h,this._interpolants=u,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=M9,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const s=this._clip.duration,o=e._clip.duration,l=o/s,u=s/o;e.warp(1,l,t),this.warp(u,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const s=this._mixer,o=s.time,l=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=s._lendControlInterpolant(),this._timeScaleInterpolant=u);const h=u.parameterPositions,p=u.sampleValues;return h[0]=o,h[1]=o+i,p[0]=e/l,p[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,s){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const h=(e-o)*i;if(h<0||i===0)return;this._startTime=null,t=i*h}t*=this._updateTimeScale(e);const l=this._updateTime(t),u=this._updateWeight(e);if(u>0){const h=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case WB:for(let m=0,_=h.length;m!==_;++m)h[m].evaluate(l),p[m].accumulateAdditive(u);break;case XI:default:for(let m=0,_=h.length;m!==_;++m)h[m].evaluate(l),p[m].accumulate(s,u)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;i!==null&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let s=this.time+e,o=this._loopCount;const l=i===A9;if(e===0)return o===-1?s:l&&(o&1)===1?t-s:s;if(i===C9){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),s>=t||s<0){const u=Math.floor(s/t);s-=t*u,o+=Math.abs(u);const h=this.repetitions-o;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(h===1){const p=e<0;this._setEndings(p,!p,l)}else this._setEndings(!1,!1,l);this._loopCount=o,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=s;if(l&&(o&1)===1)return t-s}return s}_setEndings(e,t,i){const s=this._interpolantSettings;i?(s.endingStart=Oy,s.endingEnd=Oy):(e?s.endingStart=this.zeroSlopeAtStart?Oy:ky:s.endingStart=zS,t?s.endingEnd=this.zeroSlopeAtEnd?Oy:ky:s.endingEnd=zS)}_scheduleFading(e,t,i){const s=this._mixer,o=s.time;let l=this._weightInterpolant;l===null&&(l=s._lendControlInterpolant(),this._weightInterpolant=l);const u=l.parameterPositions,h=l.sampleValues;return u[0]=o,h[0]=t,u[1]=o+e,h[1]=i,this}}const k_e=new Float32Array(1);class O_e extends Cf{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,s=e._clip.tracks,o=s.length,l=e._propertyBindings,u=e._interpolants,h=i.uuid,p=this._bindingsByRootAndName;let m=p[h];m===void 0&&(m={},p[h]=m);for(let _=0;_!==o;++_){const v=s[_],E=v.name;let w=m[E];if(w!==void 0)++w.referenceCount,l[_]=w;else{if(w=l[_],w!==void 0){w._cacheIndex===null&&(++w.referenceCount,this._addInactiveBinding(w,h,E));continue}const x=t&&t._propertyBindings[_].binding.parsedPath;w=new kj(us.create(i,E,x),v.ValueTypeName,v.getValueSize()),++w.referenceCount,this._addInactiveBinding(w,h,E),l[_]=w}u[_].resultBuffer=w.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,s=e._clip.uuid,o=this._actionsByClip[s];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,s,i)}const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const s=this._actions,o=this._actionsByClip;let l=o[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=l;else{const u=l.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=s.length,s.push(e),l.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],s=e._cacheIndex;i._cacheIndex=s,t[s]=i,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,l=this._actionsByClip,u=l[o],h=u.knownActions,p=h[h.length-1],m=e._byClipCacheIndex;p._byClipCacheIndex=m,h[m]=p,h.pop(),e._byClipCacheIndex=null;const _=u.actionByRoot,v=(e._localRoot||this._root).uuid;delete _[v],h.length===0&&delete l[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,s=this._nActiveActions++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,s=--this._nActiveActions,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_addInactiveBinding(e,t,i){const s=this._bindingsByRootAndName,o=this._bindings;let l=s[t];l===void 0&&(l={},s[t]=l),l[i]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,s=i.rootNode.uuid,o=i.path,l=this._bindingsByRootAndName,u=l[s],h=t[t.length-1],p=e._cacheIndex;h._cacheIndex=p,t[p]=h,t.pop(),delete u[o],Object.keys(u).length===0&&delete l[s]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,s=this._nActiveBindings++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,s=--this._nActiveBindings,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new cP(new Float32Array(2),new Float32Array(2),1,k_e),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,s=--this._nActiveControlInterpolants,o=t[s];e.__cacheIndex=s,t[s]=e,o.__cacheIndex=i,t[i]=o}clipAction(e,t,i){const s=t||this._root,o=s.uuid;let l=typeof e=="string"?ZS.findByName(s,e):e;const u=l!==null?l.uuid:e,h=this._actionsByClip[u];let p=null;if(i===void 0&&(l!==null?i=l.blendMode:i=XI),h!==void 0){const _=h.actionByRoot[o];if(_!==void 0&&_.blendMode===i)return _;p=h.knownActions[0],l===null&&(l=p._clip)}if(l===null)return null;const m=new R_e(this,l,t,i);return this._bindAction(m,p),this._addInactiveAction(m,u,o),m}existingAction(e,t){const i=t||this._root,s=i.uuid,o=typeof e=="string"?ZS.findByName(i,e):e,l=o?o.uuid:e,u=this._actionsByClip[l];return u!==void 0&&u.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,s=this.time+=e,o=Math.sign(e),l=this._accuIndex^=1;for(let p=0;p!==i;++p)t[p]._update(s,e,o,l);const u=this._bindings,h=this._nActiveBindings;for(let p=0;p!==h;++p)u[p].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,s=this._actionsByClip,o=s[i];if(o!==void 0){const l=o.knownActions;for(let u=0,h=l.length;u!==h;++u){const p=l[u];this._deactivateAction(p);const m=p._cacheIndex,_=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,_._cacheIndex=m,t[m]=_,t.pop(),this._removeInactiveBindingsForAction(p)}delete s[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const l in i){const u=i[l].actionByRoot,h=u[t];h!==void 0&&(this._deactivateAction(h),this._removeInactiveAction(h))}const s=this._bindingsByRootAndName,o=s[t];if(o!==void 0)for(const l in o){const u=o[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class rs{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new rs(this.value.clone===void 0?this.value:this.value.clone())}}let L_e=0;class N_e extends Cf{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:L_e++}),this.name="",this.usage=HS,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,s=t.length;i<s;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class CA extends eR{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class D_e{constructor(e,t,i,s,o){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=s,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class vP{constructor(e,t,i=0,s=1/0){this.ray=new Tw(e,t),this.near=i,this.far=s,this.camera=null,this.layers=new Gy,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return w2(e,this,i,t),i.sort(n4),i}intersectObjects(e,t=!0,i=[]){for(let s=0,o=e.length;s<o;s++)w2(e[s],this,i,t);return i.sort(n4),i}}function n4(r,e){return r.distance-e.distance}function w2(r,e,t,i){if(r.layers.test(e.layers)&&r.raycast(e,t),i===!0){const s=r.children;for(let o=0,l=s.length;o<l;o++)w2(s[o],e,t,!0)}}class x2{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Du(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class B_e{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const r4=new Ot;class P_e{constructor(e=new Ot(1/0,1/0),t=new Ot(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=r4.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return r4.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const i4=new Te,BC=new Te;class yP{constructor(e=new Te,t=new Te){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){i4.subVectors(e,this.start),BC.subVectors(this.end,this.start);const i=BC.dot(BC);let s=BC.dot(i4)/i;return t&&(s=Du(s,0,1)),s}closestPointToPoint(e,t,i){const s=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const s4=new Te;class F_e extends is{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const i=new Ar,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,u=1,h=32;l<h;l++,u++){const p=l/h*Math.PI*2,m=u/h*Math.PI*2;s.push(Math.cos(p),Math.sin(p),1,Math.cos(m),Math.sin(m),1)}i.setAttribute("position",new Pn(s,3));const o=new Sd({fog:!1,toneMapped:!1});this.cone=new n_(i,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),s4.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(s4),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const B0=new Te,PC=new Sr,WO=new Sr;class U_e extends n_{constructor(e){const t=Oj(e),i=new Ar,s=[],o=[],l=new _n(0,0,1),u=new _n(0,1,0);for(let p=0;p<t.length;p++){const m=t[p];m.parent&&m.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),o.push(l.r,l.g,l.b),o.push(u.r,u.g,u.b))}i.setAttribute("position",new Pn(s,3)),i.setAttribute("color",new Pn(o,3));const h=new Sd({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,h),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,s=i.getAttribute("position");WO.copy(this.root.matrixWorld).invert();for(let o=0,l=0;o<t.length;o++){const u=t[o];u.parent&&u.parent.isBone&&(PC.multiplyMatrices(WO,u.matrixWorld),B0.setFromMatrixPosition(PC),s.setXYZ(l,B0.x,B0.y,B0.z),PC.multiplyMatrices(WO,u.parent.matrixWorld),B0.setFromMatrixPosition(PC),s.setXYZ(l+1,B0.x,B0.y,B0.z),l+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function Oj(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,Oj(r.children[t]));return e}class z_e extends bn{constructor(e,t,i){const s=new ug(t,4,2),o=new dg({wireframe:!0,fog:!1,toneMapped:!1});super(s,o),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const H_e=new Te,o4=new _n,a4=new _n;class G_e extends is{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const s=new ng(t);s.rotateY(Math.PI*.5),this.material=new dg({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=s.getAttribute("position"),l=new Float32Array(o.count*3);s.setAttribute("color",new xs(l,3)),this.add(new bn(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");o4.copy(this.light.color),a4.copy(this.light.groundColor);for(let i=0,s=t.count;i<s;i++){const o=i<s/2?o4:a4;t.setXYZ(i,o.r,o.g,o.b)}t.needsUpdate=!0}e.lookAt(H_e.setFromMatrixPosition(this.light.matrixWorld).negate())}}class W_e extends n_{constructor(e=10,t=10,i=4473924,s=8947848){i=new _n(i),s=new _n(s);const o=t/2,l=e/t,u=e/2,h=[],p=[];for(let v=0,E=0,w=-u;v<=t;v++,w+=l){h.push(-u,0,w,u,0,w),h.push(w,0,-u,w,0,u);const x=v===o?i:s;x.toArray(p,E),E+=3,x.toArray(p,E),E+=3,x.toArray(p,E),E+=3,x.toArray(p,E),E+=3}const m=new Ar;m.setAttribute("position",new Pn(h,3)),m.setAttribute("color",new Pn(p,3));const _=new Sd({vertexColors:!0,toneMapped:!1});super(m,_),this.type="GridHelper"}}class V_e extends n_{constructor(e=10,t=16,i=8,s=64,o=4473924,l=8947848){o=new _n(o),l=new _n(l);const u=[],h=[];for(let _=0;_<=t;_++){const v=_/t*(Math.PI*2),E=Math.sin(v)*e,w=Math.cos(v)*e;u.push(0,0,0),u.push(E,0,w);const x=_&1?o:l;h.push(x.r,x.g,x.b),h.push(x.r,x.g,x.b)}for(let _=0;_<=i;_++){const v=_&1?o:l,E=e-e/i*_;for(let w=0;w<s;w++){let x=w/s*(Math.PI*2),A=Math.sin(x)*E,O=Math.cos(x)*E;u.push(A,0,O),h.push(v.r,v.g,v.b),x=(w+1)/s*(Math.PI*2),A=Math.sin(x)*E,O=Math.cos(x)*E,u.push(A,0,O),h.push(v.r,v.g,v.b)}}const p=new Ar;p.setAttribute("position",new Pn(u,3)),p.setAttribute("color",new Pn(h,3));const m=new Sd({vertexColors:!0,toneMapped:!1});super(p,m),this.type="PolarGridHelper"}}const l4=new Te,FC=new Te,u4=new Te;class j_e extends is{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,t===void 0&&(t=1);let s=new Ar;s.setAttribute("position",new Pn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new Sd({fog:!1,toneMapped:!1});this.lightPlane=new vd(s,o),this.add(this.lightPlane),s=new Ar,s.setAttribute("position",new Pn([0,0,0,0,0,1],3)),this.targetLine=new vd(s,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){l4.setFromMatrixPosition(this.light.matrixWorld),FC.setFromMatrixPosition(this.light.target.matrixWorld),u4.subVectors(FC,l4),this.lightPlane.lookAt(FC),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(FC),this.targetLine.scale.z=u4.length()}}const UC=new Te,eu=new eE;class X_e extends n_{constructor(e){const t=new Ar,i=new Sd({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],o=[],l={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(w,x){h(w),h(x)}function h(w){s.push(0,0,0),o.push(0,0,0),l[w]===void 0&&(l[w]=[]),l[w].push(s.length/3-1)}t.setAttribute("position",new Pn(s,3)),t.setAttribute("color",new Pn(o,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const p=new _n(16755200),m=new _n(16711680),_=new _n(43775),v=new _n(16777215),E=new _n(3355443);this.setColors(p,m,_,v,E)}setColors(e,t,i,s,o){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,s.r,s.g,s.b),l.setXYZ(39,s.r,s.g,s.b),l.setXYZ(40,o.r,o.g,o.b),l.setXYZ(41,o.r,o.g,o.b),l.setXYZ(42,o.r,o.g,o.b),l.setXYZ(43,o.r,o.g,o.b),l.setXYZ(44,o.r,o.g,o.b),l.setXYZ(45,o.r,o.g,o.b),l.setXYZ(46,o.r,o.g,o.b),l.setXYZ(47,o.r,o.g,o.b),l.setXYZ(48,o.r,o.g,o.b),l.setXYZ(49,o.r,o.g,o.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,s=1;eu.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Lu("c",t,e,eu,0,0,-1),Lu("t",t,e,eu,0,0,1),Lu("n1",t,e,eu,-i,-s,-1),Lu("n2",t,e,eu,i,-s,-1),Lu("n3",t,e,eu,-i,s,-1),Lu("n4",t,e,eu,i,s,-1),Lu("f1",t,e,eu,-i,-s,1),Lu("f2",t,e,eu,i,-s,1),Lu("f3",t,e,eu,-i,s,1),Lu("f4",t,e,eu,i,s,1),Lu("u1",t,e,eu,i*.7,s*1.1,-1),Lu("u2",t,e,eu,-i*.7,s*1.1,-1),Lu("u3",t,e,eu,0,s*2,-1),Lu("cf1",t,e,eu,-i,0,1),Lu("cf2",t,e,eu,i,0,1),Lu("cf3",t,e,eu,0,-s,1),Lu("cf4",t,e,eu,0,s,1),Lu("cn1",t,e,eu,-i,0,-1),Lu("cn2",t,e,eu,i,0,-1),Lu("cn3",t,e,eu,0,-s,-1),Lu("cn4",t,e,eu,0,s,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Lu(r,e,t,i,s,o,l){UC.set(s,o,l).unproject(i);const u=e[r];if(u!==void 0){const h=t.getAttribute("position");for(let p=0,m=u.length;p<m;p++)h.setXYZ(u[p],UC.x,UC.y,UC.z)}}const zC=new hg;class Y_e extends n_{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),o=new Ar;o.setIndex(new xs(i,1)),o.setAttribute("position",new xs(s,3)),super(o,new Sd({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&zC.setFromObject(this.object),zC.isEmpty())return;const t=zC.min,i=zC.max,s=this.geometry.attributes.position,o=s.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=t.x,o[4]=i.y,o[5]=i.z,o[6]=t.x,o[7]=t.y,o[8]=i.z,o[9]=i.x,o[10]=t.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=t.z,o[15]=t.x,o[16]=i.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=i.x,o[22]=t.y,o[23]=t.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}}class K_e extends n_{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Ar;o.setIndex(new xs(i,1)),o.setAttribute("position",new Pn(s,3)),super(o,new Sd({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class J_e extends vd{constructor(e,t=1,i=16776960){const s=i,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new Ar;l.setAttribute("position",new Pn(o,3)),l.computeBoundingSphere(),super(l,new Sd({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],h=new Ar;h.setAttribute("position",new Pn(u,3)),h.computeBoundingSphere(),this.add(new bn(h,new dg({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}}const c4=new Te;let HC,VO;class Q_e extends is{constructor(e=new Te(0,0,1),t=new Te(0,0,0),i=1,s=16776960,o=i*.2,l=o*.2){super(),this.type="ArrowHelper",HC===void 0&&(HC=new Ar,HC.setAttribute("position",new Pn([0,0,0,0,1,0],3)),VO=new ra(0,.5,1,5,1),VO.translate(0,-.5,0)),this.position.copy(t),this.line=new vd(HC,new Sd({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new bn(VO,new dg({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,o,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{c4.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(c4,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class q_e extends n_{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new Ar;s.setAttribute("position",new Pn(t,3)),s.setAttribute("color",new Pn(i,3));const o=new Sd({vertexColors:!0,toneMapped:!1});super(s,o),this.type="AxesHelper"}setColors(e,t,i){const s=new _n,o=this.geometry.attributes.color.array;return s.set(e),s.toArray(o,0),s.toArray(o,3),s.set(t),s.toArray(o,6),s.toArray(o,9),s.set(i),s.toArray(o,12),s.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Z_e{constructor(){this.type="ShapePath",this.color=new _n,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new jS,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,s){return this.currentPath.quadraticCurveTo(e,t,i,s),this}bezierCurveTo(e,t,i,s,o,l){return this.currentPath.bezierCurveTo(e,t,i,s,o,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function i(k){const D=[];for(let N=0,F=k.length;N<F;N++){const z=k[N],V=new Wy;V.curves=z.curves,D.push(V)}return D}function s(k,D){const N=D.length;let F=!1;for(let z=N-1,V=0;V<N;z=V++){let U=D[z],ee=D[V],ne=ee.x-U.x,ie=ee.y-U.y;if(Math.abs(ie)>Number.EPSILON){if(ie<0&&(U=D[V],ne=-ne,ee=D[z],ie=-ie),k.y<U.y||k.y>ee.y)continue;if(k.y===U.y){if(k.x===U.x)return!0}else{const se=ie*(k.x-U.x)-ne*(k.y-U.y);if(se===0)return!0;if(se<0)continue;F=!F}}else{if(k.y!==U.y)continue;if(ee.x<=k.x&&k.x<=U.x||U.x<=k.x&&k.x<=ee.x)return!0}}return F}const o=Xg.isClockWise,l=this.subPaths;if(l.length===0)return[];if(t===!0)return i(l);let u,h,p;const m=[];if(l.length===1)return h=l[0],p=new Wy,p.curves=h.curves,m.push(p),m;let _=!o(l[0].getPoints());_=e?!_:_;const v=[],E=[];let w=[],x=0,A;E[x]=void 0,w[x]=[];for(let k=0,D=l.length;k<D;k++)h=l[k],A=h.getPoints(),u=o(A),u=e?!u:u,u?(!_&&E[x]&&x++,E[x]={s:new Wy,p:A},E[x].s.curves=h.curves,_&&x++,w[x]=[]):w[x].push({h,p:A[0]});if(!E[0])return i(l);if(E.length>1){let k=!1,D=0;for(let N=0,F=E.length;N<F;N++)v[N]=[];for(let N=0,F=E.length;N<F;N++){const z=w[N];for(let V=0;V<z.length;V++){const U=z[V];let ee=!0;for(let ne=0;ne<E.length;ne++)s(U.p,E[ne].p)&&(N!==ne&&D++,ee?(ee=!1,v[ne].push(U)):k=!0);ee&&v[N].push(U)}}D>0&&k===!1&&(w=v)}let O;for(let k=0,D=E.length;k<D;k++){p=E[k].s,m.push(p),O=w[k];for(let N=0,F=O.length;N<F;N++)p.holes.push(O[N].h)}return m}}const D_=e0e();function e0e(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),i=new Uint32Array(512),s=new Uint32Array(512);for(let h=0;h<256;++h){const p=h-127;p<-27?(i[h]=0,i[h|256]=32768,s[h]=24,s[h|256]=24):p<-14?(i[h]=1024>>-p-14,i[h|256]=1024>>-p-14|32768,s[h]=-p-1,s[h|256]=-p-1):p<=15?(i[h]=p+15<<10,i[h|256]=p+15<<10|32768,s[h]=13,s[h|256]=13):p<128?(i[h]=31744,i[h|256]=64512,s[h]=24,s[h|256]=24):(i[h]=31744,i[h|256]=64512,s[h]=13,s[h|256]=13)}const o=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64);for(let h=1;h<1024;++h){let p=h<<13,m=0;for(;!(p&8388608);)p<<=1,m-=8388608;p&=-8388609,m+=947912704,o[h]=p|m}for(let h=1024;h<2048;++h)o[h]=939524096+(h-1024<<13);for(let h=1;h<31;++h)l[h]=h<<23;l[31]=1199570944,l[32]=2147483648;for(let h=33;h<63;++h)l[h]=2147483648+(h-32<<23);l[63]=3347054592;for(let h=1;h<64;++h)h!==32&&(u[h]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:s,mantissaTable:o,exponentTable:l,offsetTable:u}}function t0e(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=Du(r,-65504,65504),D_.floatView[0]=r;const e=D_.uint32View[0],t=e>>23&511;return D_.baseTable[t]+((e&8388607)>>D_.shiftTable[t])}function n0e(r){const e=r>>10;return D_.uint32View[0]=D_.mantissaTable[D_.offsetTable[e]+(r&1023)]+D_.exponentTable[e],D_.floatView[0]}var r0e=Object.freeze({__proto__:null,toHalfFloat:t0e,fromHalfFloat:n0e});class i0e extends Ar{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),super()}}class s0e extends Ar{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),super()}}function o0e(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function a0e(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function l0e(){console.error("THREE.ImmediateRenderObject has been removed.")}class u0e extends iu{constructor(e,t,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,i),this.samples=4}}class c0e extends bw{constructor(e,t,i,s){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,i,s)}}class h0e extends YI{constructor(e,t,i,s){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:q1}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=q1);const d0e=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:zB,AddEquation:Ty,AddOperation:a9,AdditiveAnimationBlendMode:WB,AdditiveBlending:TA,AlphaFormat:_9,AlwaysDepth:e9,AlwaysStencilFunc:R9,AmbientLight:Cj,AmbientLightProbe:f_e,AnimationClip:ZS,AnimationLoader:t_e,AnimationMixer:O_e,AnimationObjectGroup:I_e,AnimationUtils:Qge,ArcCurve:tj,ArrayCamera:V9,ArrowHelper:Q_e,Audio:Rj,AudioAnalyser:b_e,AudioContext:fP,AudioListener:__e,AudioLoader:d_e,AxesHelper:q_e,BackSide:Nc,BasicDepthPacking:$v,BasicShadowMap:U8,Bone:ZB,BooleanKeyframeTrack:fb,Box2:P_e,Box3:hg,Box3Helper:K_e,BoxBufferGeometry:Ma,BoxGeometry:Ma,BoxHelper:Y_e,BufferAttribute:xs,BufferGeometry:Ar,BufferGeometryLoader:Ij,ByteType:d9,Cache:ib,Camera:eE,CameraHelper:X_e,CanvasTexture:Tge,CapsuleBufferGeometry:C1,CapsuleGeometry:C1,CatmullRomCurve3:nj,CineonToneMapping:c9,CircleBufferGeometry:M1,CircleGeometry:M1,ClampToEdgeWrapping:Yd,Clock:mP,Color:_n,ColorKeyframeTrack:hP,ColorManagement:em,CompressedTexture:ej,CompressedTextureLoader:n_e,ConeBufferGeometry:A1,ConeGeometry:A1,CubeCamera:D9,CubeReflectionMapping:pv,CubeRefractionMapping:fv,CubeTexture:$w,CubeTextureLoader:r_e,CubeUVReflectionMapping:Z1,CubicBezierCurve:tP,CubicBezierCurve3:rj,CubicInterpolant:yj,CullFaceBack:WN,CullFaceFront:F8,CullFaceFrontBack:xce,CullFaceNone:P8,Curve:pg,CurvePath:sj,CustomBlending:H8,CustomToneMapping:h9,CylinderBufferGeometry:ra,CylinderGeometry:ra,Cylindrical:B_e,Data3DTexture:YI,DataArrayTexture:bw,DataTexture:u1,DataTexture2DArray:c0e,DataTexture3D:h0e,DataTextureLoader:i_e,DataUtils:r0e,DecrementStencilOp:Fce,DecrementWrapStencilOp:zce,DefaultLoadingManager:Ej,DepthFormat:lv,DepthStencilFormat:mv,DepthTexture:JB,DirectionalLight:xj,DirectionalLightHelper:j_e,DiscreteInterpolant:bj,DodecahedronBufferGeometry:I1,DodecahedronGeometry:I1,DoubleSide:Kd,DstAlphaFactor:Y8,DstColorFactor:J8,DynamicCopyUsage:the,DynamicDrawUsage:Uy,DynamicReadUsage:qce,EdgesGeometry:oj,EllipseCurve:rR,EqualDepth:n9,EqualStencilFunc:Vce,EquirectangularReflectionMapping:DS,EquirectangularRefractionMapping:BS,Euler:pb,EventDispatcher:Cf,ExtrudeBufferGeometry:R1,ExtrudeGeometry:R1,FileLoader:K_,FlatShading:z8,Float16BufferAttribute:Bhe,Float32BufferAttribute:Pn,Float64BufferAttribute:Phe,FloatType:Hg,Fog:ZI,FogExp2:qI,Font:a0e,FontLoader:o0e,FramebufferTexture:bge,FrontSide:Jg,Frustum:KI,GLBufferAttribute:D_e,GLSL1:rhe,GLSL3:g2,GreaterDepth:i9,GreaterEqualDepth:r9,GreaterEqualStencilFunc:Kce,GreaterStencilFunc:Xce,GridHelper:W_e,Group:JT,HalfFloatType:tb,HemisphereLight:$j,HemisphereLightHelper:G_e,HemisphereLightProbe:p_e,IcosahedronBufferGeometry:k1,IcosahedronGeometry:k1,ImageBitmapLoader:h_e,ImageLoader:ew,ImageUtils:jB,ImmediateRenderObject:l0e,IncrementStencilOp:Pce,IncrementWrapStencilOp:Uce,InstancedBufferAttribute:nb,InstancedBufferGeometry:lR,InstancedInterleavedBuffer:CA,InstancedMesh:Q9,Int16BufferAttribute:Nhe,Int32BufferAttribute:Dhe,Int8BufferAttribute:khe,IntType:f9,InterleavedBuffer:eR,InterleavedBufferAttribute:ff,Interpolant:ww,InterpolateDiscrete:FS,InterpolateLinear:US,InterpolateSmooth:MM,InvertStencilOp:Hce,KeepStencilOp:AM,KeyframeTrack:fg,LOD:K9,LatheBufferGeometry:rb,LatheGeometry:rb,Layers:Gy,LessDepth:t9,LessEqualDepth:EA,LessEqualStencilFunc:jce,LessStencilFunc:Wce,Light:Sv,LightProbe:oR,Line:vd,Line3:yP,LineBasicMaterial:Sd,LineCurve:iR,LineCurve3:ij,LineDashedMaterial:_j,LineLoop:q9,LineSegments:n_,LinearEncoding:mm,LinearFilter:Po,LinearInterpolant:cP,LinearMipMapLinearFilter:Rce,LinearMipMapNearestFilter:Ice,LinearMipmapLinearFilter:hb,LinearMipmapNearestFilter:HB,LinearSRGBColorSpace:Q0,LinearToneMapping:l9,Loader:Mf,LoaderUtils:S2,LoadingManager:dP,LoopOnce:C9,LoopPingPong:A9,LoopRepeat:M9,LuminanceAlphaFormat:b9,LuminanceFormat:y9,MOUSE:my,Material:Dc,MaterialLoader:aR,MathUtils:O9,Matrix3:Jd,Matrix4:Sr,MaxEquation:YN,Mesh:bn,MeshBasicMaterial:dg,MeshDepthMaterial:Sw,MeshDistanceMaterial:QI,MeshLambertMaterial:mj,MeshMatcapMaterial:gj,MeshNormalMaterial:aP,MeshPhongMaterial:pj,MeshPhysicalMaterial:dj,MeshStandardMaterial:JS,MeshToonMaterial:fj,MinEquation:XN,MirroredRepeatWrapping:PS,MixOperation:o9,MultiplyBlending:jN,MultiplyOperation:yw,NearestFilter:ia,NearestMipMapLinearFilter:Ace,NearestMipMapNearestFilter:Mce,NearestMipmapLinearFilter:SA,NearestMipmapNearestFilter:$A,NeverDepth:Z8,NeverStencilFunc:Gce,NoBlending:Zd,NoColorSpace:Nce,NoToneMapping:og,NormalAnimationBlendMode:XI,NormalBlending:G_,NotEqualDepth:s9,NotEqualStencilFunc:Yce,NumberKeyframeTrack:QS,Object3D:is,ObjectLoader:u_e,ObjectSpaceNormalMap:I9,OctahedronBufferGeometry:ng,OctahedronGeometry:ng,OneFactor:V8,OneMinusDstAlphaFactor:K8,OneMinusDstColorFactor:Q8,OneMinusSrcAlphaFactor:VI,OneMinusSrcColorFactor:X8,OrthographicCamera:jg,PCFShadowMap:GI,PCFSoftShadowMap:nS,PMREMGenerator:v2,ParametricGeometry:i0e,Path:jS,PerspectiveCamera:So,Plane:L_,PlaneBufferGeometry:lg,PlaneGeometry:lg,PlaneHelper:J_e,PointLight:wj,PointLightHelper:z_e,Points:Z9,PointsMaterial:nR,PolarGridHelper:V_e,PolyhedronBufferGeometry:Qg,PolyhedronGeometry:Qg,PositionalAudio:y_e,PropertyBinding:us,PropertyMixer:kj,QuadraticBezierCurve:nP,QuadraticBezierCurve3:rP,Quaternion:Bo,QuaternionKeyframeTrack:nE,QuaternionLinearInterpolant:Tj,REVISION:q1,RGBADepthPacking:w1,RGBAFormat:Rp,RGBAIntegerFormat:w9,RGBA_ASTC_10x10_Format:d2,RGBA_ASTC_10x5_Format:u2,RGBA_ASTC_10x6_Format:c2,RGBA_ASTC_10x8_Format:h2,RGBA_ASTC_12x10_Format:p2,RGBA_ASTC_12x12_Format:f2,RGBA_ASTC_4x4_Format:t2,RGBA_ASTC_5x4_Format:n2,RGBA_ASTC_5x5_Format:r2,RGBA_ASTC_6x5_Format:i2,RGBA_ASTC_6x6_Format:s2,RGBA_ASTC_8x5_Format:o2,RGBA_ASTC_8x6_Format:a2,RGBA_ASTC_8x8_Format:l2,RGBA_BPTC_Format:m2,RGBA_ETC2_EAC_Format:e2,RGBA_PVRTC_2BPPV1_Format:qN,RGBA_PVRTC_4BPPV1_Format:QN,RGBA_S3TC_DXT1_Format:wM,RGBA_S3TC_DXT3_Format:xM,RGBA_S3TC_DXT5_Format:CM,RGBFormat:v9,RGB_ETC1_Format:x9,RGB_ETC2_Format:ZN,RGB_PVRTC_2BPPV1_Format:JN,RGB_PVRTC_4BPPV1_Format:KN,RGB_S3TC_DXT1_Format:SM,RGFormat:$9,RGIntegerFormat:S9,RawShaderMaterial:hj,Ray:Tw,Raycaster:vP,RectAreaLight:Mj,RedFormat:T9,RedIntegerFormat:E9,ReinhardToneMapping:u9,RepeatWrapping:S1,ReplaceStencilOp:Bce,ReverseSubtractEquation:UB,RingBufferGeometry:O1,RingGeometry:O1,SRGBColorSpace:Dg,Scene:VS,ShaderChunk:vi,ShaderLib:Xd,ShaderMaterial:ah,ShadowMaterial:cj,Shape:Wy,ShapeBufferGeometry:L1,ShapeGeometry:L1,ShapePath:Z_e,ShapeUtils:Xg,ShortType:p9,Skeleton:tR,SkeletonHelper:U_e,SkinnedMesh:J9,SmoothShading:Cce,Source:Ly,Sphere:t_,SphereBufferGeometry:ug,SphereGeometry:ug,Spherical:x2,SphericalHarmonics3:Aj,SplineCurve:iP,SpotLight:Sj,SpotLightHelper:F_e,Sprite:Y9,SpriteMaterial:qB,SrcAlphaFactor:WI,SrcAlphaSaturateFactor:q8,SrcColorFactor:j8,StaticCopyUsage:ehe,StaticDrawUsage:HS,StaticReadUsage:Qce,StereoCamera:m_e,StreamCopyUsage:nhe,StreamDrawUsage:Jce,StreamReadUsage:Zce,StringKeyframeTrack:mb,SubtractEquation:G8,SubtractiveBlending:VN,TOUCH:gy,TangentSpaceNormalMap:db,TetrahedronBufferGeometry:N1,TetrahedronGeometry:N1,TextGeometry:s0e,Texture:Rl,TextureLoader:s_e,TorusBufferGeometry:eg,TorusGeometry:eg,TorusKnotBufferGeometry:D1,TorusKnotGeometry:D1,Triangle:df,TriangleFanDrawMode:Lce,TriangleStripDrawMode:Oce,TrianglesDrawMode:kce,TubeBufferGeometry:B1,TubeGeometry:B1,UVMapping:jI,Uint16BufferAttribute:XB,Uint32BufferAttribute:YB,Uint8BufferAttribute:Ohe,Uint8ClampedBufferAttribute:Lhe,Uniform:rs,UniformsGroup:N_e,UniformsLib:Sn,UniformsUtils:Ew,UnsignedByteType:Fh,UnsignedInt248Type:av,UnsignedIntType:U_,UnsignedShort4444Type:m9,UnsignedShort5551Type:g9,UnsignedShortType:GB,VSMShadowMap:Ry,Vector2:Ot,Vector3:Te,Vector4:xi,VectorKeyframeTrack:qS,VideoTexture:yge,WebGL1Renderer:j9,WebGL3DRenderTarget:Ehe,WebGLArrayRenderTarget:The,WebGLCubeRenderTarget:B9,WebGLMultipleRenderTargets:$he,WebGLMultisampleRenderTarget:u0e,WebGLRenderTarget:iu,WebGLRenderer:QB,WebGLUtils:W9,WireframeGeometry:oP,WrapAroundEnding:zS,ZeroCurvatureEnding:ky,ZeroFactor:W8,ZeroSlopeEnding:Oy,ZeroStencilOp:Dce,_SRGBAFormat:wA,sRGBEncoding:yi},Symbol.toStringTag,{value:"Module"}));var B_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lj(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Dy={exports:{}},oy={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h4;function p0e(){return h4||(h4=1,oy.ConcurrentRoot=1,oy.ContinuousEventPriority=4,oy.DefaultEventPriority=16,oy.DiscreteEventPriority=1,oy.IdleEventPriority=536870912,oy.LegacyRoot=0),oy}(function(r){r.exports=p0e()})(Dy);function f0e(r){let e;const t=new Set,i=(u,h)=>{const p=typeof u=="function"?u(e):u;if(p!==e){const m=e;e=h?p:Object.assign({},e,p),t.forEach(_=>_(e,m))}},s=()=>e,o=(u,h=s,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=h(e);function _(){const v=h(e);if(!p(m,v)){const E=m;u(m=v,E)}}return t.add(_),()=>t.delete(_)},l={setState:i,getState:s,subscribe:(u,h,p)=>h||p?o(u,h,p):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=r(i,s,l),l}const m0e=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),d4=m0e?de.useEffect:de.useLayoutEffect;function g0e(r){const e=typeof r=="function"?f0e(r):r,t=(i=e.getState,s=Object.is)=>{const[,o]=de.useReducer(A=>A+1,0),l=e.getState(),u=de.useRef(l),h=de.useRef(i),p=de.useRef(s),m=de.useRef(!1),_=de.useRef();_.current===void 0&&(_.current=i(l));let v,E=!1;(u.current!==l||h.current!==i||p.current!==s||m.current)&&(v=i(l),E=!s(_.current,v)),d4(()=>{E&&(_.current=v),u.current=l,h.current=i,p.current=s,m.current=!1});const w=de.useRef(l);d4(()=>{const A=()=>{try{const k=e.getState(),D=h.current(k);p.current(_.current,D)||(u.current=k,_.current=D,o())}catch{m.current=!0,o()}},O=e.subscribe(A);return e.getState()!==w.current&&A(),O},[]);const x=E?v:_.current;return de.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const s=i.length<=0;return{value:i.shift(),done:s}}}},t}var Nj={exports:{}},MA={exports:{}},p4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f4;function _0e(){return f4||(f4=1,function(r){function e(j,te){var q=j.length;j.push(te);e:for(;0<q;){var le=q-1>>>1,_e=j[le];if(0<s(_e,te))j[le]=te,j[q]=_e,q=le;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var te=j[0],q=j.pop();if(q!==te){j[0]=q;e:for(var le=0,_e=j.length,Le=_e>>>1;le<Le;){var xe=2*(le+1)-1,Ve=j[xe],Re=xe+1,Ze=j[Re];if(0>s(Ve,q))Re<_e&&0>s(Ze,Ve)?(j[le]=Ze,j[Re]=q,le=Re):(j[le]=Ve,j[xe]=q,le=xe);else if(Re<_e&&0>s(Ze,q))j[le]=Ze,j[Re]=q,le=Re;else break e}}return te}function s(j,te){var q=j.sortIndex-te.sortIndex;return q!==0?q:j.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();r.unstable_now=function(){return l.now()-u}}var h=[],p=[],m=1,_=null,v=3,E=!1,w=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(j){for(var te=t(p);te!==null;){if(te.callback===null)i(p);else if(te.startTime<=j)i(p),te.sortIndex=te.expirationTime,e(h,te);else break;te=t(p)}}function N(j){if(x=!1,D(j),!w)if(t(h)!==null)w=!0,ge(F);else{var te=t(p);te!==null&&Ie(N,te.startTime-j)}}function F(j,te){w=!1,x&&(x=!1,O(U),U=-1),E=!0;var q=v;try{for(D(te),_=t(h);_!==null&&(!(_.expirationTime>te)||j&&!ie());){var le=_.callback;if(typeof le=="function"){_.callback=null,v=_.priorityLevel;var _e=le(_.expirationTime<=te);te=r.unstable_now(),typeof _e=="function"?_.callback=_e:_===t(h)&&i(h),D(te)}else i(h);_=t(h)}if(_!==null)var Le=!0;else{var xe=t(p);xe!==null&&Ie(N,xe.startTime-te),Le=!1}return Le}finally{_=null,v=q,E=!1}}var z=!1,V=null,U=-1,ee=5,ne=-1;function ie(){return!(r.unstable_now()-ne<ee)}function se(){if(V!==null){var j=r.unstable_now();ne=j;var te=!0;try{te=V(!0,j)}finally{te?fe():(z=!1,V=null)}}else z=!1}var fe;if(typeof k=="function")fe=function(){k(se)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,he=ae.port2;ae.port1.onmessage=se,fe=function(){he.postMessage(null)}}else fe=function(){A(se,0)};function ge(j){V=j,z||(z=!0,fe())}function Ie(j,te){U=A(function(){j(r.unstable_now())},te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(j){j.callback=null},r.unstable_continueExecution=function(){w||E||(w=!0,ge(F))},r.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<j?Math.floor(1e3/j):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(j){switch(v){case 1:case 2:case 3:var te=3;break;default:te=v}var q=v;v=te;try{return j()}finally{v=q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(j,te){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var q=v;v=j;try{return te()}finally{v=q}},r.unstable_scheduleCallback=function(j,te,q){var le=r.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?le+q:le):q=le,j){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=q+_e,j={id:m++,callback:te,priorityLevel:j,startTime:q,expirationTime:_e,sortIndex:-1},q>le?(j.sortIndex=q,e(p,j),t(h)===null&&j===t(p)&&(x?(O(U),U=-1):x=!0,Ie(N,q-le))):(j.sortIndex=_e,e(h,j),w||E||(w=!0,ge(F))),j},r.unstable_shouldYield=ie,r.unstable_wrapCallback=function(j){var te=v;return function(){var q=v;v=te;try{return j.apply(this,arguments)}finally{v=q}}}}(p4)),p4}(function(r){r.exports=_0e()})(MA);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m4,g4;function v0e(){return g4||(g4=1,m4=function(r){var e={},t=vr,i=MA.exports,s=Object.assign;function o($){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+$,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+$+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),h=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),E=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),N=Symbol.iterator;function F($){return $===null||typeof $!="object"?null:($=N&&$[N]||$["@@iterator"],typeof $=="function"?$:null)}function z($){if($==null)return null;if(typeof $=="function")return $.displayName||$.name||null;if(typeof $=="string")return $;switch($){case p:return"Fragment";case h:return"Portal";case _:return"Profiler";case m:return"StrictMode";case x:return"Suspense";case A:return"SuspenseList"}if(typeof $=="object")switch($.$$typeof){case E:return($.displayName||"Context")+".Consumer";case v:return($._context.displayName||"Context")+".Provider";case w:var c=$.render;return $=$.displayName,$||($=c.displayName||c.name||"",$=$!==""?"ForwardRef("+$+")":"ForwardRef"),$;case O:return c=$.displayName||null,c!==null?c:z($.type)||"Memo";case k:c=$._payload,$=$._init;try{return z($(c))}catch{}}return null}function V($){var c=$.type;switch($.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return $=c.render,$=$.displayName||$.name||"",c.displayName||($!==""?"ForwardRef("+$+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(c);case 8:return c===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function U($){var c=$,f=$;if($.alternate)for(;c.return;)c=c.return;else{$=c;do c=$,c.flags&4098&&(f=c.return),$=c.return;while($)}return c.tag===3?f:null}function ee($){if(U($)!==$)throw Error(o(188))}function ne($){var c=$.alternate;if(!c){if(c=U($),c===null)throw Error(o(188));return c!==$?null:$}for(var f=$,S=c;;){var M=f.return;if(M===null)break;var L=M.alternate;if(L===null){if(S=M.return,S!==null){f=S;continue}break}if(M.child===L.child){for(L=M.child;L;){if(L===f)return ee(M),$;if(L===S)return ee(M),c;L=L.sibling}throw Error(o(188))}if(f.return!==S.return)f=M,S=L;else{for(var H=!1,re=M.child;re;){if(re===f){H=!0,f=M,S=L;break}if(re===S){H=!0,S=M,f=L;break}re=re.sibling}if(!H){for(re=L.child;re;){if(re===f){H=!0,f=L,S=M;break}if(re===S){H=!0,S=L,f=M;break}re=re.sibling}if(!H)throw Error(o(189))}}if(f.alternate!==S)throw Error(o(190))}if(f.tag!==3)throw Error(o(188));return f.stateNode.current===f?$:c}function ie($){return $=ne($),$!==null?se($):null}function se($){if($.tag===5||$.tag===6)return $;for($=$.child;$!==null;){var c=se($);if(c!==null)return c;$=$.sibling}return null}function fe($){if($.tag===5||$.tag===6)return $;for($=$.child;$!==null;){if($.tag!==4){var c=fe($);if(c!==null)return c}$=$.sibling}return null}var ae=Array.isArray,he=r.getPublicInstance,ge=r.getRootHostContext,Ie=r.getChildHostContext,j=r.prepareForCommit,te=r.resetAfterCommit,q=r.createInstance,le=r.appendInitialChild,_e=r.finalizeInitialChildren,Le=r.prepareUpdate,xe=r.shouldSetTextContent,Ve=r.createTextInstance,Re=r.scheduleTimeout,Ze=r.cancelTimeout,et=r.noTimeout,ct=r.isPrimaryRenderer,rt=r.supportsMutation,Ne=r.supportsPersistence,we=r.supportsHydration,ze=r.getInstanceFromNode,it=r.preparePortalMount,nt=r.getCurrentEventPriority,Mt=r.detachDeletedInstance,At=r.supportsMicrotasks,ht=r.scheduleMicrotask,Et=r.supportsTestSelectors,wt=r.findFiberRoot,pt=r.getBoundingRect,be=r.getTextContent,Z=r.isHiddenSubtree,ke=r.matchAccessibilityRole,lt=r.setFocusIfFocusable,mt=r.setupIntersectionObserver,xt=r.appendChild,ut=r.appendChildToContainer,He=r.commitTextUpdate,Ce=r.commitMount,X=r.commitUpdate,J=r.insertBefore,oe=r.insertInContainerBefore,$e=r.removeChild,Ge=r.removeChildFromContainer,Bt=r.resetTextContent,Pe=r.hideInstance,Wt=r.hideTextInstance,st=r.unhideInstance,Ut=r.unhideTextInstance,Pt=r.clearContainer,Tn=r.cloneInstance,Mr=r.createContainerChildSet,nr=r.appendChildToContainerChildSet,ai=r.finalizeContainerChildren,ar=r.replaceContainerChildren,Qn=r.cloneHiddenInstance,Q=r.cloneHiddenTextInstance,me=r.canHydrateInstance,De=r.canHydrateTextInstance,qe=r.canHydrateSuspenseInstance,It=r.isSuspenseInstancePending,qt=r.isSuspenseInstanceFallback,gn=r.registerSuspenseInstanceRetry,Ae=r.getNextHydratableSibling,at=r.getFirstHydratableChild,bt=r.getFirstHydratableChildWithinContainer,dt=r.getFirstHydratableChildWithinSuspenseInstance,Dt=r.hydrateInstance,xn=r.hydrateTextInstance,Bn=r.hydrateSuspenseInstance,er=r.getNextHydratableInstanceAfterSuspenseInstance,mr=r.commitHydratedContainer,Qr=r.commitHydratedSuspenseInstance,yr=r.clearSuspenseBoundary,wr=r.clearSuspenseBoundaryFromContainer,Gi=r.shouldDeleteUnhydratedTailInstances,Fo=r.didNotMatchHydratedContainerTextInstance,wo=r.didNotMatchHydratedTextInstance,nl;function Yt($){if(nl===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);nl=c&&c[1]||""}return`
`+nl+$}var lr=!1;function oa($,c){if(!$||lr)return"";lr=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(We){var S=We}Reflect.construct($,[],c)}else{try{c.call()}catch(We){S=We}$.call(c.prototype)}else{try{throw Error()}catch(We){S=We}$()}}catch(We){if(We&&S&&typeof We.stack=="string"){for(var M=We.stack.split(`
`),L=S.stack.split(`
`),H=M.length-1,re=L.length-1;1<=H&&0<=re&&M[H]!==L[re];)re--;for(;1<=H&&0<=re;H--,re--)if(M[H]!==L[re]){if(H!==1||re!==1)do if(H--,re--,0>re||M[H]!==L[re]){var Se=`
`+M[H].replace(" at new "," at ");return $.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",$.displayName)),Se}while(1<=H&&0<=re);break}}}finally{lr=!1,Error.prepareStackTrace=f}return($=$?$.displayName||$.name:"")?Yt($):""}var Uo=Object.prototype.hasOwnProperty,hs=[],ds=-1;function li($){return{current:$}}function ur($){0>ds||($.current=hs[ds],hs[ds]=null,ds--)}function pn($,c){ds++,hs[ds]=$.current,$.current=c}var ir={},Tr=li(ir),qn=li(!1),ui=ir;function Ji($,c){var f=$.type.contextTypes;if(!f)return ir;var S=$.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===c)return S.__reactInternalMemoizedMaskedChildContext;var M={},L;for(L in f)M[L]=c[L];return S&&($=$.stateNode,$.__reactInternalMemoizedUnmaskedChildContext=c,$.__reactInternalMemoizedMaskedChildContext=M),M}function Gr($){return $=$.childContextTypes,$!=null}function Di(){ur(qn),ur(Tr)}function Ia($,c,f){if(Tr.current!==ir)throw Error(o(168));pn(Tr,c),pn(qn,f)}function rl($,c,f){var S=$.stateNode;if(c=c.childContextTypes,typeof S.getChildContext!="function")return f;S=S.getChildContext();for(var M in S)if(!(M in c))throw Error(o(108,V($)||"Unknown",M));return s({},f,S)}function cc($){return $=($=$.stateNode)&&$.__reactInternalMemoizedMergedChildContext||ir,ui=Tr.current,pn(Tr,$),pn(qn,qn.current),!0}function Uu($,c,f){var S=$.stateNode;if(!S)throw Error(o(169));f?($=rl($,c,ui),S.__reactInternalMemoizedMergedChildContext=$,ur(qn),ur(Tr),pn(Tr,$)):ur(qn),pn(qn,f)}var Cs=Math.clz32?Math.clz32:Ll,xo=Math.log,su=Math.LN2;function Ll($){return $>>>=0,$===0?32:31-(xo($)/su|0)|0}var uh=64,zo=4194304;function Zn($){switch($&-$){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return $&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return $&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return $}}function Bi($,c){var f=$.pendingLanes;if(f===0)return 0;var S=0,M=$.suspendedLanes,L=$.pingedLanes,H=f&268435455;if(H!==0){var re=H&~M;re!==0?S=Zn(re):(L&=H,L!==0&&(S=Zn(L)))}else H=f&~M,H!==0?S=Zn(H):L!==0&&(S=Zn(L));if(S===0)return 0;if(c!==0&&c!==S&&!(c&M)&&(M=S&-S,L=c&-c,M>=L||M===16&&(L&4194240)!==0))return c;if(S&4&&(S|=f&16),c=$.entangledLanes,c!==0)for($=$.entanglements,c&=S;0<c;)f=31-Cs(c),M=1<<f,S|=$[f],c&=~M;return S}function Bc($,c){switch($){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ch($,c){for(var f=$.suspendedLanes,S=$.pingedLanes,M=$.expirationTimes,L=$.pendingLanes;0<L;){var H=31-Cs(L),re=1<<H,Se=M[H];Se===-1?(!(re&f)||re&S)&&(M[H]=Bc(re,c)):Se<=c&&($.expiredLanes|=re),L&=~re}}function hc($){return $=$.pendingLanes&-1073741825,$!==0?$:$&1073741824?1073741824:0}function il($){for(var c=[],f=0;31>f;f++)c.push($);return c}function ou($,c,f){$.pendingLanes|=c,c!==536870912&&($.suspendedLanes=0,$.pingedLanes=0),$=$.eventTimes,c=31-Cs(c),$[c]=f}function sl($,c){var f=$.pendingLanes&~c;$.pendingLanes=c,$.suspendedLanes=0,$.pingedLanes=0,$.expiredLanes&=c,$.mutableReadLanes&=c,$.entangledLanes&=c,c=$.entanglements;var S=$.eventTimes;for($=$.expirationTimes;0<f;){var M=31-Cs(f),L=1<<M;c[M]=0,S[M]=-1,$[M]=-1,f&=~L}}function ol($,c){var f=$.entangledLanes|=c;for($=$.entanglements;f;){var S=31-Cs(f),M=1<<S;M&c|$[S]&c&&($[S]|=c),f&=~M}}var Yn=0;function Kn($){return $&=-$,1<$?4<$?$&268435455?16:536870912:4:1}var al=i.unstable_scheduleCallback,Ra=i.unstable_cancelCallback,aa=i.unstable_shouldYield,Nl=i.unstable_requestPaint,bi=i.unstable_now,Pi=i.unstable_ImmediatePriority,ll=i.unstable_UserBlockingPriority,wd=i.unstable_NormalPriority,Ms=i.unstable_IdlePriority,au=null,Co=null;function Dl($){if(Co&&typeof Co.onCommitFiberRoot=="function")try{Co.onCommitFiberRoot(au,$,void 0,($.current.flags&128)===128)}catch{}}function Wr($,c){return $===c&&($!==0||1/$===1/c)||$!==$&&c!==c}var cr=typeof Object.is=="function"?Object.is:Wr,Wi=null,As=!1,lu=!1;function Bl($){Wi===null?Wi=[$]:Wi.push($)}function Pc($){As=!0,Bl($)}function Ho(){if(!lu&&Wi!==null){lu=!0;var $=0,c=Yn;try{var f=Wi;for(Yn=1;$<f.length;$++){var S=f[$];do S=S(!0);while(S!==null)}Wi=null,As=!1}catch(M){throw Wi!==null&&(Wi=Wi.slice($+1)),al(Pi,Ho),M}finally{Yn=c,lu=!1}}return null}var Go=l.ReactCurrentBatchConfig;function uu($,c){if(cr($,c))return!0;if(typeof $!="object"||$===null||typeof c!="object"||c===null)return!1;var f=Object.keys($),S=Object.keys(c);if(f.length!==S.length)return!1;for(S=0;S<f.length;S++){var M=f[S];if(!Uo.call(c,M)||!cr($[M],c[M]))return!1}return!0}function Vr($){switch($.tag){case 5:return Yt($.type);case 16:return Yt("Lazy");case 13:return Yt("Suspense");case 19:return Yt("SuspenseList");case 0:case 2:case 15:return $=oa($.type,!1),$;case 11:return $=oa($.type.render,!1),$;case 1:return $=oa($.type,!0),$;default:return""}}function ps($,c){if($&&$.defaultProps){c=s({},c),$=$.defaultProps;for(var f in $)c[f]===void 0&&(c[f]=$[f]);return c}return c}var Ci=li(null),qr=null,la=null,Fi=null;function cu(){Fi=la=qr=null}function qs($,c,f){ct?(pn(Ci,c._currentValue),c._currentValue=f):(pn(Ci,c._currentValue2),c._currentValue2=f)}function hu($){var c=Ci.current;ur(Ci),ct?$._currentValue=c:$._currentValue2=c}function ka($,c,f){for(;$!==null;){var S=$.alternate;if(($.childLanes&c)!==c?($.childLanes|=c,S!==null&&(S.childLanes|=c)):S!==null&&(S.childLanes&c)!==c&&(S.childLanes|=c),$===f)break;$=$.return}}function ci($,c){qr=$,Fi=la=null,$=$.dependencies,$!==null&&$.firstContext!==null&&($.lanes&c&&(da=!0),$.firstContext=null)}function Zr($){var c=ct?$._currentValue:$._currentValue2;if(Fi!==$)if($={context:$,memoizedValue:c,next:null},la===null){if(qr===null)throw Error(o(308));la=$,qr.dependencies={lanes:0,firstContext:$}}else la=la.next=$;return c}var Un=null,jr=!1;function Ti($){$.updateQueue={baseState:$.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uh($,c){$=$.updateQueue,c.updateQueue===$&&(c.updateQueue={baseState:$.baseState,firstBaseUpdate:$.firstBaseUpdate,lastBaseUpdate:$.lastBaseUpdate,shared:$.shared,effects:$.effects})}function du($,c){return{eventTime:$,lane:c,tag:0,payload:null,callback:null,next:null}}function fs($,c){var f=$.updateQueue;f!==null&&(f=f.shared,On!==null&&$.mode&1&&!(wn&2)?($=f.interleaved,$===null?(c.next=c,Un===null?Un=[f]:Un.push(f)):(c.next=$.next,$.next=c),f.interleaved=c):($=f.pending,$===null?c.next=c:(c.next=$.next,$.next=c),f.pending=c))}function ul($,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var S=c.lanes;S&=$.pendingLanes,f|=S,c.lanes=f,ol($,f)}}function zh($,c){var f=$.updateQueue,S=$.alternate;if(S!==null&&(S=S.updateQueue,f===S)){var M=null,L=null;if(f=f.firstBaseUpdate,f!==null){do{var H={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};L===null?M=L=H:L=L.next=H,f=f.next}while(f!==null);L===null?M=L=c:L=L.next=c}else M=L=c;f={baseState:S.baseState,firstBaseUpdate:M,lastBaseUpdate:L,shared:S.shared,effects:S.effects},$.updateQueue=f;return}$=f.lastBaseUpdate,$===null?f.firstBaseUpdate=c:$.next=c,f.lastBaseUpdate=c}function hi($,c,f,S){var M=$.updateQueue;jr=!1;var L=M.firstBaseUpdate,H=M.lastBaseUpdate,re=M.shared.pending;if(re!==null){M.shared.pending=null;var Se=re,We=Se.next;Se.next=null,H===null?L=We:H.next=We,H=Se;var gt=$.alternate;gt!==null&&(gt=gt.updateQueue,re=gt.lastBaseUpdate,re!==H&&(re===null?gt.firstBaseUpdate=We:re.next=We,gt.lastBaseUpdate=Se))}if(L!==null){var zt=M.baseState;H=0,gt=We=Se=null,re=L;do{var Zt=re.lane,hn=re.eventTime;if((S&Zt)===Zt){gt!==null&&(gt=gt.next={eventTime:hn,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var an=$,nn=re;switch(Zt=c,hn=f,nn.tag){case 1:if(an=nn.payload,typeof an=="function"){zt=an.call(hn,zt,Zt);break e}zt=an;break e;case 3:an.flags=an.flags&-65537|128;case 0:if(an=nn.payload,Zt=typeof an=="function"?an.call(hn,zt,Zt):an,Zt==null)break e;zt=s({},zt,Zt);break e;case 2:jr=!0}}re.callback!==null&&re.lane!==0&&($.flags|=64,Zt=M.effects,Zt===null?M.effects=[re]:Zt.push(re))}else hn={eventTime:hn,lane:Zt,tag:re.tag,payload:re.payload,callback:re.callback,next:null},gt===null?(We=gt=hn,Se=zt):gt=gt.next=hn,H|=Zt;if(re=re.next,re===null){if(re=M.shared.pending,re===null)break;Zt=re,re=Zt.next,Zt.next=null,M.lastBaseUpdate=Zt,M.shared.pending=null}}while(!0);if(gt===null&&(Se=zt),M.baseState=Se,M.firstBaseUpdate=We,M.lastBaseUpdate=gt,c=M.shared.interleaved,c!==null){M=c;do H|=M.lane,M=M.next;while(M!==c)}else L===null&&(M.shared.lanes=0);Gl|=H,$.lanes=H,$.memoizedState=zt}}function pu($,c,f){if($=c.effects,c.effects=null,$!==null)for(c=0;c<$.length;c++){var S=$[c],M=S.callback;if(M!==null){if(S.callback=null,S=f,typeof M!="function")throw Error(o(191,M));M.call(S)}}}var sp=new t.Component().refs;function op($,c,f,S){c=$.memoizedState,f=f(S,c),f=f==null?c:s({},c,f),$.memoizedState=f,$.lanes===0&&($.updateQueue.baseState=f)}var hh={isMounted:function($){return($=$._reactInternals)?U($)===$:!1},enqueueSetState:function($,c,f){$=$._reactInternals;var S=br(),M=ji($),L=du(S,M);L.payload=c,f!=null&&(L.callback=f),fs($,L),c=ys($,M,S),c!==null&&ul(c,$,M)},enqueueReplaceState:function($,c,f){$=$._reactInternals;var S=br(),M=ji($),L=du(S,M);L.tag=1,L.payload=c,f!=null&&(L.callback=f),fs($,L),c=ys($,M,S),c!==null&&ul(c,$,M)},enqueueForceUpdate:function($,c){$=$._reactInternals;var f=br(),S=ji($),M=du(f,S);M.tag=2,c!=null&&(M.callback=c),fs($,M),c=ys($,S,f),c!==null&&ul(c,$,S)}};function ap($,c,f,S,M,L,H){return $=$.stateNode,typeof $.shouldComponentUpdate=="function"?$.shouldComponentUpdate(S,L,H):c.prototype&&c.prototype.isPureReactComponent?!uu(f,S)||!uu(M,L):!0}function Bp($,c,f){var S=!1,M=ir,L=c.contextType;return typeof L=="object"&&L!==null?L=Zr(L):(M=Gr(c)?ui:Tr.current,S=c.contextTypes,L=(S=S!=null)?Ji($,M):ir),c=new c(f,L),$.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=hh,$.stateNode=c,c._reactInternals=$,S&&($=$.stateNode,$.__reactInternalMemoizedUnmaskedChildContext=M,$.__reactInternalMemoizedMaskedChildContext=L),c}function Rf($,c,f,S){$=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,S),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,S),c.state!==$&&hh.enqueueReplaceState(c,c.state,null)}function lp($,c,f,S){var M=$.stateNode;M.props=f,M.state=$.memoizedState,M.refs=sp,Ti($);var L=c.contextType;typeof L=="object"&&L!==null?M.context=Zr(L):(L=Gr(c)?ui:Tr.current,M.context=Ji($,L)),M.state=$.memoizedState,L=c.getDerivedStateFromProps,typeof L=="function"&&(op($,c,L,f),M.state=$.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(c=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),c!==M.state&&hh.enqueueReplaceState(M,M.state,null),hi($,f,M,S),M.state=$.memoizedState),typeof M.componentDidMount=="function"&&($.flags|=4194308)}var zu=[],Zs=0,fu=null,dh=0,ua=[],Ur=0,sr=null,Us=1,Wo="";function Mo($,c){zu[Zs++]=dh,zu[Zs++]=fu,fu=$,dh=c}function mu($,c,f){ua[Ur++]=Us,ua[Ur++]=Wo,ua[Ur++]=sr,sr=$;var S=Us;$=Wo;var M=32-Cs(S)-1;S&=~(1<<M),f+=1;var L=32-Cs(c)+M;if(30<L){var H=M-M%5;L=(S&(1<<H)-1).toString(32),S>>=H,M-=H,Us=1<<32-Cs(c)+M|f<<M|S,Wo=L+$}else Us=1<<L|f<<M|S,Wo=$}function cl($){$.return!==null&&(Mo($,1),mu($,1,0))}function Hh($){for(;$===fu;)fu=zu[--Zs],zu[Zs]=null,dh=zu[--Zs],zu[Zs]=null;for(;$===sr;)sr=ua[--Ur],ua[Ur]=null,Wo=ua[--Ur],ua[Ur]=null,Us=ua[--Ur],ua[Ur]=null}var Ei=null,di=null,or=!1,$i=!1,Vo=null;function Pl($,c){var f=io(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=$,c=$.deletions,c===null?($.deletions=[f],$.flags|=16):c.push(f)}function up($,c){switch($.tag){case 5:return c=me(c,$.type,$.pendingProps),c!==null?($.stateNode=c,Ei=$,di=at(c),!0):!1;case 6:return c=De(c,$.pendingProps),c!==null?($.stateNode=c,Ei=$,di=null,!0):!1;case 13:if(c=qe(c),c!==null){var f=sr!==null?{id:Us,overflow:Wo}:null;return $.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=io(18,null,null,0),f.stateNode=c,f.return=$,$.child=f,Ei=$,di=null,!0}return!1;default:return!1}}function cp($){return($.mode&1)!==0&&($.flags&128)===0}function Gh($){if(or){var c=di;if(c){var f=c;if(!up($,c)){if(cp($))throw Error(o(418));c=Ae(f);var S=Ei;c&&up($,c)?Pl(S,f):($.flags=$.flags&-4097|2,or=!1,Ei=$)}}else{if(cp($))throw Error(o(418));$.flags=$.flags&-4097|2,or=!1,Ei=$}}}function gu($){for($=$.return;$!==null&&$.tag!==5&&$.tag!==3&&$.tag!==13;)$=$.return;Ei=$}function Hu($){if(!we||$!==Ei)return!1;if(!or)return gu($),or=!0,!1;if($.tag!==3&&($.tag!==5||Gi($.type)&&!xe($.type,$.memoizedProps))){var c=di;if(c){if(cp($)){for($=di;$;)$=Ae($);throw Error(o(418))}for(;c;)Pl($,c),c=Ae(c)}}if(gu($),$.tag===13){if(!we)throw Error(o(316));if($=$.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(o(317));di=er($)}else di=Ei?Ae($.stateNode):null;return!0}function dc(){we&&(di=Ei=null,$i=or=!1)}function ph($){Vo===null?Vo=[$]:Vo.push($)}function pc($,c,f){if($=f.ref,$!==null&&typeof $!="function"&&typeof $!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(o(309));var S=f.stateNode}if(!S)throw Error(o(147,$));var M=S,L=""+$;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===L?c.ref:(c=function(H){var re=M.refs;re===sp&&(re=M.refs={}),H===null?delete re[L]:re[L]=H},c._stringRef=L,c)}if(typeof $!="string")throw Error(o(284));if(!f._owner)throw Error(o(290,$))}return $}function Fl($,c){throw $=Object.prototype.toString.call(c),Error(o(31,$==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":$))}function jo($){var c=$._init;return c($._payload)}function Gu($){function c(ft,Ee){if($){var Me=ft.deletions;Me===null?(ft.deletions=[Ee],ft.flags|=16):Me.push(Ee)}}function f(ft,Ee){if(!$)return null;for(;Ee!==null;)c(ft,Ee),Ee=Ee.sibling;return null}function S(ft,Ee){for(ft=new Map;Ee!==null;)Ee.key!==null?ft.set(Ee.key,Ee):ft.set(Ee.index,Ee),Ee=Ee.sibling;return ft}function M(ft,Ee){return ft=Tl(ft,Ee),ft.index=0,ft.sibling=null,ft}function L(ft,Ee,Me){return ft.index=Me,$?(Me=ft.alternate,Me!==null?(Me=Me.index,Me<Ee?(ft.flags|=2,Ee):Me):(ft.flags|=2,Ee)):(ft.flags|=1048576,Ee)}function H(ft){return $&&ft.alternate===null&&(ft.flags|=2),ft}function re(ft,Ee,Me,Xe){return Ee===null||Ee.tag!==6?(Ee=Vl(Me,ft.mode,Xe),Ee.return=ft,Ee):(Ee=M(Ee,Me),Ee.return=ft,Ee)}function Se(ft,Ee,Me,Xe){var kt=Me.type;return kt===p?gt(ft,Ee,Me.props.children,Xe,Me.key):Ee!==null&&(Ee.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===k&&jo(kt)===Ee.type)?(Xe=M(Ee,Me.props),Xe.ref=pc(ft,Ee,Me),Xe.return=ft,Xe):(Xe=Ks(Me.type,Me.key,Me.props,null,ft.mode,Xe),Xe.ref=pc(ft,Ee,Me),Xe.return=ft,Xe)}function We(ft,Ee,Me,Xe){return Ee===null||Ee.tag!==4||Ee.stateNode.containerInfo!==Me.containerInfo||Ee.stateNode.implementation!==Me.implementation?(Ee=ts(Me,ft.mode,Xe),Ee.return=ft,Ee):(Ee=M(Ee,Me.children||[]),Ee.return=ft,Ee)}function gt(ft,Ee,Me,Xe,kt){return Ee===null||Ee.tag!==7?(Ee=Ha(Me,ft.mode,Xe,kt),Ee.return=ft,Ee):(Ee=M(Ee,Me),Ee.return=ft,Ee)}function zt(ft,Ee,Me){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return Ee=Vl(""+Ee,ft.mode,Me),Ee.return=ft,Ee;if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case u:return Me=Ks(Ee.type,Ee.key,Ee.props,null,ft.mode,Me),Me.ref=pc(ft,null,Ee),Me.return=ft,Me;case h:return Ee=ts(Ee,ft.mode,Me),Ee.return=ft,Ee;case k:var Xe=Ee._init;return zt(ft,Xe(Ee._payload),Me)}if(ae(Ee)||F(Ee))return Ee=Ha(Ee,ft.mode,Me,null),Ee.return=ft,Ee;Fl(ft,Ee)}return null}function Zt(ft,Ee,Me,Xe){var kt=Ee!==null?Ee.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return kt!==null?null:re(ft,Ee,""+Me,Xe);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case u:return Me.key===kt?Se(ft,Ee,Me,Xe):null;case h:return Me.key===kt?We(ft,Ee,Me,Xe):null;case k:return kt=Me._init,Zt(ft,Ee,kt(Me._payload),Xe)}if(ae(Me)||F(Me))return kt!==null?null:gt(ft,Ee,Me,Xe,null);Fl(ft,Me)}return null}function hn(ft,Ee,Me,Xe,kt){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return ft=ft.get(Me)||null,re(Ee,ft,""+Xe,kt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case u:return ft=ft.get(Xe.key===null?Me:Xe.key)||null,Se(Ee,ft,Xe,kt);case h:return ft=ft.get(Xe.key===null?Me:Xe.key)||null,We(Ee,ft,Xe,kt);case k:var Kt=Xe._init;return hn(ft,Ee,Me,Kt(Xe._payload),kt)}if(ae(Xe)||F(Xe))return ft=ft.get(Me)||null,gt(Ee,ft,Xe,kt,null);Fl(Ee,Xe)}return null}function an(ft,Ee,Me,Xe){for(var kt=null,Kt=null,ln=Ee,fn=Ee=0,kn=null;ln!==null&&fn<Me.length;fn++){ln.index>fn?(kn=ln,ln=null):kn=ln.sibling;var Wn=Zt(ft,ln,Me[fn],Xe);if(Wn===null){ln===null&&(ln=kn);break}$&&ln&&Wn.alternate===null&&c(ft,ln),Ee=L(Wn,Ee,fn),Kt===null?kt=Wn:Kt.sibling=Wn,Kt=Wn,ln=kn}if(fn===Me.length)return f(ft,ln),or&&Mo(ft,fn),kt;if(ln===null){for(;fn<Me.length;fn++)ln=zt(ft,Me[fn],Xe),ln!==null&&(Ee=L(ln,Ee,fn),Kt===null?kt=ln:Kt.sibling=ln,Kt=ln);return or&&Mo(ft,fn),kt}for(ln=S(ft,ln);fn<Me.length;fn++)kn=hn(ln,ft,fn,Me[fn],Xe),kn!==null&&($&&kn.alternate!==null&&ln.delete(kn.key===null?fn:kn.key),Ee=L(kn,Ee,fn),Kt===null?kt=kn:Kt.sibling=kn,Kt=kn);return $&&ln.forEach(function(hr){return c(ft,hr)}),or&&Mo(ft,fn),kt}function nn(ft,Ee,Me,Xe){var kt=F(Me);if(typeof kt!="function")throw Error(o(150));if(Me=kt.call(Me),Me==null)throw Error(o(151));for(var Kt=kt=null,ln=Ee,fn=Ee=0,kn=null,Wn=Me.next();ln!==null&&!Wn.done;fn++,Wn=Me.next()){ln.index>fn?(kn=ln,ln=null):kn=ln.sibling;var hr=Zt(ft,ln,Wn.value,Xe);if(hr===null){ln===null&&(ln=kn);break}$&&ln&&hr.alternate===null&&c(ft,ln),Ee=L(hr,Ee,fn),Kt===null?kt=hr:Kt.sibling=hr,Kt=hr,ln=kn}if(Wn.done)return f(ft,ln),or&&Mo(ft,fn),kt;if(ln===null){for(;!Wn.done;fn++,Wn=Me.next())Wn=zt(ft,Wn.value,Xe),Wn!==null&&(Ee=L(Wn,Ee,fn),Kt===null?kt=Wn:Kt.sibling=Wn,Kt=Wn);return or&&Mo(ft,fn),kt}for(ln=S(ft,ln);!Wn.done;fn++,Wn=Me.next())Wn=hn(ln,ft,fn,Wn.value,Xe),Wn!==null&&($&&Wn.alternate!==null&&ln.delete(Wn.key===null?fn:Wn.key),Ee=L(Wn,Ee,fn),Kt===null?kt=Wn:Kt.sibling=Wn,Kt=Wn);return $&&ln.forEach(function(Xl){return c(ft,Xl)}),or&&Mo(ft,fn),kt}function _r(ft,Ee,Me,Xe){if(typeof Me=="object"&&Me!==null&&Me.type===p&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case u:e:{for(var kt=Me.key,Kt=Ee;Kt!==null;){if(Kt.key===kt){if(kt=Me.type,kt===p){if(Kt.tag===7){f(ft,Kt.sibling),Ee=M(Kt,Me.props.children),Ee.return=ft,ft=Ee;break e}}else if(Kt.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===k&&jo(kt)===Kt.type){f(ft,Kt.sibling),Ee=M(Kt,Me.props),Ee.ref=pc(ft,Kt,Me),Ee.return=ft,ft=Ee;break e}f(ft,Kt);break}else c(ft,Kt);Kt=Kt.sibling}Me.type===p?(Ee=Ha(Me.props.children,ft.mode,Xe,Me.key),Ee.return=ft,ft=Ee):(Xe=Ks(Me.type,Me.key,Me.props,null,ft.mode,Xe),Xe.ref=pc(ft,Ee,Me),Xe.return=ft,ft=Xe)}return H(ft);case h:e:{for(Kt=Me.key;Ee!==null;){if(Ee.key===Kt)if(Ee.tag===4&&Ee.stateNode.containerInfo===Me.containerInfo&&Ee.stateNode.implementation===Me.implementation){f(ft,Ee.sibling),Ee=M(Ee,Me.children||[]),Ee.return=ft,ft=Ee;break e}else{f(ft,Ee);break}else c(ft,Ee);Ee=Ee.sibling}Ee=ts(Me,ft.mode,Xe),Ee.return=ft,ft=Ee}return H(ft);case k:return Kt=Me._init,_r(ft,Ee,Kt(Me._payload),Xe)}if(ae(Me))return an(ft,Ee,Me,Xe);if(F(Me))return nn(ft,Ee,Me,Xe);Fl(ft,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,Ee!==null&&Ee.tag===6?(f(ft,Ee.sibling),Ee=M(Ee,Me),Ee.return=ft,ft=Ee):(f(ft,Ee),Ee=Vl(Me,ft.mode,Xe),Ee.return=ft,ft=Ee),H(ft)):f(ft,Ee)}return _r}var fh=Gu(!0),fc=Gu(!1),mc={},ms=li(mc),Xr=li(mc),hl=li(mc);function Xo($){if($===mc)throw Error(o(174));return $}function dl($,c){pn(hl,c),pn(Xr,$),pn(ms,mc),$=ge(c),ur(ms),pn(ms,$)}function Ul(){ur(ms),ur(Xr),ur(hl)}function Fc($){var c=Xo(hl.current),f=Xo(ms.current);c=Ie(f,$.type,c),f!==c&&(pn(Xr,$),pn(ms,c))}function xd($){Xr.current===$&&(ur(ms),ur(Xr))}var pi=li(0);function je($){for(var c=$;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||It(f)||qt(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===$)break;for(;c.sibling===null;){if(c.return===null||c.return===$)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Rt=[];function yt(){for(var $=0;$<Rt.length;$++){var c=Rt[$];ct?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}Rt.length=0}var mn=l.ReactCurrentDispatcher,Nn=l.ReactCurrentBatchConfig,Jn=0,tr=null,An=null,xr=null,Is=!1,gs=!1,po=0,ca=0;function Vi(){throw Error(o(321))}function ss($,c){if(c===null)return!1;for(var f=0;f<c.length&&f<$.length;f++)if(!cr($[f],c[f]))return!1;return!0}function gc($,c,f,S,M,L){if(Jn=L,tr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,mn.current=$===null||$.memoizedState===null?vc:bh,$=f(S,M),gs){L=0;do{if(gs=!1,po=0,25<=L)throw Error(o(301));L+=1,xr=An=null,c.updateQueue=null,mn.current=Yh,$=f(S,M)}while(gs)}if(mn.current=gl,c=An!==null&&An.next!==null,Jn=0,xr=An=tr=null,Is=!1,c)throw Error(o(300));return $}function Lr(){var $=po!==0;return po=0,$}function Ao(){var $={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xr===null?tr.memoizedState=xr=$:xr=xr.next=$,xr}function Rs(){if(An===null){var $=tr.alternate;$=$!==null?$.memoizedState:null}else $=An.next;var c=xr===null?tr.memoizedState:xr.next;if(c!==null)xr=c,An=$;else{if($===null)throw Error(o(310));An=$,$={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},xr===null?tr.memoizedState=xr=$:xr=xr.next=$}return xr}function zs($,c){return typeof c=="function"?c($):c}function Yo($){var c=Rs(),f=c.queue;if(f===null)throw Error(o(311));f.lastRenderedReducer=$;var S=An,M=S.baseQueue,L=f.pending;if(L!==null){if(M!==null){var H=M.next;M.next=L.next,L.next=H}S.baseQueue=M=L,f.pending=null}if(M!==null){L=M.next,S=S.baseState;var re=H=null,Se=null,We=L;do{var gt=We.lane;if((Jn&gt)===gt)Se!==null&&(Se=Se.next={lane:0,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),S=We.hasEagerState?We.eagerState:$(S,We.action);else{var zt={lane:gt,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null};Se===null?(re=Se=zt,H=S):Se=Se.next=zt,tr.lanes|=gt,Gl|=gt}We=We.next}while(We!==null&&We!==L);Se===null?H=S:Se.next=re,cr(S,c.memoizedState)||(da=!0),c.memoizedState=S,c.baseState=H,c.baseQueue=Se,f.lastRenderedState=S}if($=f.interleaved,$!==null){M=$;do L=M.lane,tr.lanes|=L,Gl|=L,M=M.next;while(M!==$)}else M===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function mh($){var c=Rs(),f=c.queue;if(f===null)throw Error(o(311));f.lastRenderedReducer=$;var S=f.dispatch,M=f.pending,L=c.memoizedState;if(M!==null){f.pending=null;var H=M=M.next;do L=$(L,H.action),H=H.next;while(H!==M);cr(L,c.memoizedState)||(da=!0),c.memoizedState=L,c.baseQueue===null&&(c.baseState=L),f.lastRenderedState=L}return[L,S]}function Uc(){}function gh($,c){var f=tr,S=Rs(),M=c(),L=!cr(S.memoizedState,M);if(L&&(S.memoizedState=M,da=!0),S=S.queue,vu(Vh.bind(null,f,S,$),[$]),S.getSnapshot!==c||L||xr!==null&&xr.memoizedState.tag&1){if(f.flags|=2048,_c(9,Wh.bind(null,f,S,M,c),void 0,null),On===null)throw Error(o(349));Jn&30||_u(f,c,M)}return M}function _u($,c,f){$.flags|=16384,$={getSnapshot:c,value:f},c=tr.updateQueue,c===null?(c={lastEffect:null,stores:null},tr.updateQueue=c,c.stores=[$]):(f=c.stores,f===null?c.stores=[$]:f.push($))}function Wh($,c,f,S){c.value=f,c.getSnapshot=S,pl(c)&&ys($,1,-1)}function Vh($,c,f){return f(function(){pl(c)&&ys($,1,-1)})}function pl($){var c=$.getSnapshot;$=$.value;try{var f=c();return!cr($,f)}catch{return!0}}function jh($){var c=Ao();return typeof $=="function"&&($=$()),c.memoizedState=c.baseState=$,$={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:$},c.queue=$,$=$.dispatch=eo.bind(null,tr,$),[c.memoizedState,$]}function _c($,c,f,S){return $={tag:$,create:c,destroy:f,deps:S,next:null},c=tr.updateQueue,c===null?(c={lastEffect:null,stores:null},tr.updateQueue=c,c.lastEffect=$.next=$):(f=c.lastEffect,f===null?c.lastEffect=$.next=$:(S=f.next,f.next=$,$.next=S,c.lastEffect=$)),$}function zc(){return Rs().memoizedState}function Cd($,c,f,S){var M=Ao();tr.flags|=$,M.memoizedState=_c(1|c,f,void 0,S===void 0?null:S)}function Oa($,c,f,S){var M=Rs();S=S===void 0?null:S;var L=void 0;if(An!==null){var H=An.memoizedState;if(L=H.destroy,S!==null&&ss(S,H.deps)){M.memoizedState=_c(c,f,L,S);return}}tr.flags|=$,M.memoizedState=_c(1|c,f,L,S)}function ha($,c){return Cd(8390656,8,$,c)}function vu($,c){return Oa(2048,8,$,c)}function _h($,c){return Oa(4,2,$,c)}function ei($,c){return Oa(4,4,$,c)}function Xh($,c){if(typeof c=="function")return $=$(),c($),function(){c(null)};if(c!=null)return $=$(),c.current=$,function(){c.current=null}}function Hc($,c,f){return f=f!=null?f.concat([$]):null,Oa(4,4,Xh.bind(null,c,$),f)}function Wu(){}function vh($,c){var f=Rs();c=c===void 0?null:c;var S=f.memoizedState;return S!==null&&c!==null&&ss(c,S[1])?S[0]:(f.memoizedState=[$,c],$)}function Md($,c){var f=Rs();c=c===void 0?null:c;var S=f.memoizedState;return S!==null&&c!==null&&ss(c,S[1])?S[0]:($=$(),f.memoizedState=[$,c],$)}function fl($,c){var f=Yn;Yn=f!==0&&4>f?f:4,$(!0);var S=Nn.transition;Nn.transition={};try{$(!1),c()}finally{Yn=f,Nn.transition=S}}function Ad(){return Rs().memoizedState}function yh($,c,f){var S=ji($);f={lane:S,action:f,hasEagerState:!1,eagerState:null,next:null},Ko($)?kf(c,f):(Pp($,c,f),f=br(),$=ys($,S,f),$!==null&&ml($,c,S))}function eo($,c,f){var S=ji($),M={lane:S,action:f,hasEagerState:!1,eagerState:null,next:null};if(Ko($))kf(c,M);else{Pp($,c,M);var L=$.alternate;if($.lanes===0&&(L===null||L.lanes===0)&&(L=c.lastRenderedReducer,L!==null))try{var H=c.lastRenderedState,re=L(H,f);if(M.hasEagerState=!0,M.eagerState=re,cr(re,H))return}catch{}finally{}f=br(),$=ys($,S,f),$!==null&&ml($,c,S)}}function Ko($){var c=$.alternate;return $===tr||c!==null&&c===tr}function kf($,c){gs=Is=!0;var f=$.pending;f===null?c.next=c:(c.next=f.next,f.next=c),$.pending=c}function Pp($,c,f){On!==null&&$.mode&1&&!(wn&2)?($=c.interleaved,$===null?(f.next=f,Un===null?Un=[c]:Un.push(c)):(f.next=$.next,$.next=f),c.interleaved=f):($=c.pending,$===null?f.next=f:(f.next=$.next,$.next=f),c.pending=f)}function ml($,c,f){if(f&4194240){var S=c.lanes;S&=$.pendingLanes,f|=S,c.lanes=f,ol($,f)}}var gl={readContext:Zr,useCallback:Vi,useContext:Vi,useEffect:Vi,useImperativeHandle:Vi,useInsertionEffect:Vi,useLayoutEffect:Vi,useMemo:Vi,useReducer:Vi,useRef:Vi,useState:Vi,useDebugValue:Vi,useDeferredValue:Vi,useTransition:Vi,useMutableSource:Vi,useSyncExternalStore:Vi,useId:Vi,unstable_isNewReconciler:!1},vc={readContext:Zr,useCallback:function($,c){return Ao().memoizedState=[$,c===void 0?null:c],$},useContext:Zr,useEffect:ha,useImperativeHandle:function($,c,f){return f=f!=null?f.concat([$]):null,Cd(4194308,4,Xh.bind(null,c,$),f)},useLayoutEffect:function($,c){return Cd(4194308,4,$,c)},useInsertionEffect:function($,c){return Cd(4,2,$,c)},useMemo:function($,c){var f=Ao();return c=c===void 0?null:c,$=$(),f.memoizedState=[$,c],$},useReducer:function($,c,f){var S=Ao();return c=f!==void 0?f(c):c,S.memoizedState=S.baseState=c,$={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$,lastRenderedState:c},S.queue=$,$=$.dispatch=yh.bind(null,tr,$),[S.memoizedState,$]},useRef:function($){var c=Ao();return $={current:$},c.memoizedState=$},useState:jh,useDebugValue:Wu,useDeferredValue:function($){var c=jh($),f=c[0],S=c[1];return ha(function(){var M=Nn.transition;Nn.transition={};try{S($)}finally{Nn.transition=M}},[$]),f},useTransition:function(){var $=jh(!1),c=$[0];return $=fl.bind(null,$[1]),Ao().memoizedState=$,[c,$]},useMutableSource:function(){},useSyncExternalStore:function($,c,f){var S=tr,M=Ao();if(or){if(f===void 0)throw Error(o(407));f=f()}else{if(f=c(),On===null)throw Error(o(349));Jn&30||_u(S,c,f)}M.memoizedState=f;var L={value:f,getSnapshot:c};return M.queue=L,ha(Vh.bind(null,S,L,$),[$]),S.flags|=2048,_c(9,Wh.bind(null,S,L,f,c),void 0,null),f},useId:function(){var $=Ao(),c=On.identifierPrefix;if(or){var f=Wo,S=Us;f=(S&~(1<<32-Cs(S)-1)).toString(32)+f,c=":"+c+"R"+f,f=po++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=ca++,c=":"+c+"r"+f.toString(32)+":";return $.memoizedState=c},unstable_isNewReconciler:!1},bh={readContext:Zr,useCallback:vh,useContext:Zr,useEffect:vu,useImperativeHandle:Hc,useInsertionEffect:_h,useLayoutEffect:ei,useMemo:Md,useReducer:Yo,useRef:zc,useState:function(){return Yo(zs)},useDebugValue:Wu,useDeferredValue:function($){var c=Yo(zs),f=c[0],S=c[1];return vu(function(){var M=Nn.transition;Nn.transition={};try{S($)}finally{Nn.transition=M}},[$]),f},useTransition:function(){var $=Yo(zs)[0],c=Rs().memoizedState;return[$,c]},useMutableSource:Uc,useSyncExternalStore:gh,useId:Ad,unstable_isNewReconciler:!1},Yh={readContext:Zr,useCallback:vh,useContext:Zr,useEffect:vu,useImperativeHandle:Hc,useInsertionEffect:_h,useLayoutEffect:ei,useMemo:Md,useReducer:mh,useRef:zc,useState:function(){return mh(zs)},useDebugValue:Wu,useDeferredValue:function($){var c=mh(zs),f=c[0],S=c[1];return vu(function(){var M=Nn.transition;Nn.transition={};try{S($)}finally{Nn.transition=M}},[$]),f},useTransition:function(){var $=mh(zs)[0],c=Rs().memoizedState;return[$,c]},useMutableSource:Uc,useSyncExternalStore:gh,useId:Ad,unstable_isNewReconciler:!1};function Vu($,c){try{var f="",S=c;do f+=Vr(S),S=S.return;while(S);var M=f}catch(L){M=`
Error generating stack: `+L.message+`
`+L.stack}return{value:$,source:c,stack:M}}function La($,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var ju=typeof WeakMap=="function"?WeakMap:Map;function Kh($,c,f){f=du(-1,f),f.tag=3,f.payload={element:null};var S=c.value;return f.callback=function(){wu||(wu=!0,xu=S),La($,c)},f}function yc($,c,f){f=du(-1,f),f.tag=3;var S=$.type.getDerivedStateFromError;if(typeof S=="function"){var M=c.value;f.payload=function(){return S(M)},f.callback=function(){La($,c)}}var L=$.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(f.callback=function(){La($,c),typeof S!="function"&&(js===null?js=new Set([this]):js.add(this));var H=c.stack;this.componentDidCatch(c.value,{componentStack:H!==null?H:""})}),f}function bc($,c,f){var S=$.pingCache;if(S===null){S=$.pingCache=new ju;var M=new Set;S.set(c,M)}else M=S.get(c),M===void 0&&(M=new Set,S.set(c,M));M.has(f)||(M.add(f),$=Ys.bind(null,$,c,f),c.then($,$))}function Xu($){do{var c;if((c=$.tag===13)&&(c=$.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return $;$=$.return}while($!==null);return null}function Id($,c,f,S,M){return $.mode&1?($.flags|=65536,$.lanes=M,$):($===c?$.flags|=65536:($.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=du(-1,1),c.tag=2,fs(f,c))),f.lanes|=1),$)}function Jo($){$.flags|=4}function Er($,c){if($!==null&&$.child===c.child)return!0;if(c.flags&16)return!1;for($=c.child;$!==null;){if($.flags&12854||$.subtreeFlags&12854)return!1;$=$.sibling}return!0}var zl,Qi,Qo,ve;if(rt)zl=function($,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)le($,f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Qi=function(){},Qo=function($,c,f,S,M){if($=$.memoizedProps,$!==S){var L=c.stateNode,H=Xo(ms.current);f=Le(L,f,$,S,M,H),(c.updateQueue=f)&&Jo(c)}},ve=function($,c,f,S){f!==S&&Jo(c)};else if(Ne){zl=function($,c,f,S){for(var M=c.child;M!==null;){if(M.tag===5){var L=M.stateNode;f&&S&&(L=Qn(L,M.type,M.memoizedProps,M)),le($,L)}else if(M.tag===6)L=M.stateNode,f&&S&&(L=Q(L,M.memoizedProps,M)),le($,L);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)L=M.child,L!==null&&(L.return=M),zl($,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===c)break;for(;M.sibling===null;){if(M.return===null||M.return===c)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};var Hs=function($,c,f,S){for(var M=c.child;M!==null;){if(M.tag===5){var L=M.stateNode;f&&S&&(L=Qn(L,M.type,M.memoizedProps,M)),nr($,L)}else if(M.tag===6)L=M.stateNode,f&&S&&(L=Q(L,M.memoizedProps,M)),nr($,L);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)L=M.child,L!==null&&(L.return=M),Hs($,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===c)break;for(;M.sibling===null;){if(M.return===null||M.return===c)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};Qi=function($,c){var f=c.stateNode;if(!Er($,c)){$=f.containerInfo;var S=Mr($);Hs(S,c,!1,!1),f.pendingChildren=S,Jo(c),ai($,S)}},Qo=function($,c,f,S,M){var L=$.stateNode,H=$.memoizedProps;if(($=Er($,c))&&H===S)c.stateNode=L;else{var re=c.stateNode,Se=Xo(ms.current),We=null;H!==S&&(We=Le(re,f,H,S,M,Se)),$&&We===null?c.stateNode=L:(L=Tn(L,We,f,H,S,c,$,re),_e(L,f,S,M,Se)&&Jo(c),c.stateNode=L,$?Jo(c):zl(L,c,!1,!1))}},ve=function($,c,f,S){f!==S?($=Xo(hl.current),f=Xo(ms.current),c.stateNode=Ve(S,$,f,c),Jo(c)):c.stateNode=$.stateNode}}else Qi=function(){},Qo=function(){},ve=function(){};function Na($,c){if(!or)switch($.tailMode){case"hidden":c=$.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?$.tail=null:f.sibling=null;break;case"collapsed":f=$.tail;for(var S=null;f!==null;)f.alternate!==null&&(S=f),f=f.sibling;S===null?c||$.tail===null?$.tail=null:$.tail.sibling=null:S.sibling=null}}function Br($){var c=$.alternate!==null&&$.alternate.child===$.child,f=0,S=0;if(c)for(var M=$.child;M!==null;)f|=M.lanes|M.childLanes,S|=M.subtreeFlags&14680064,S|=M.flags&14680064,M.return=$,M=M.sibling;else for(M=$.child;M!==null;)f|=M.lanes|M.childLanes,S|=M.subtreeFlags,S|=M.flags,M.return=$,M=M.sibling;return $.subtreeFlags|=S,$.childLanes=f,c}function zn($,c,f){var S=c.pendingProps;switch(Hh(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(c),null;case 1:return Gr(c.type)&&Di(),Br(c),null;case 3:return S=c.stateNode,Ul(),ur(qn),ur(Tr),yt(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),($===null||$.child===null)&&(Hu(c)?Jo(c):$===null||$.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,Vo!==null&&(on(Vo),Vo=null))),Qi($,c),Br(c),null;case 5:xd(c),f=Xo(hl.current);var M=c.type;if($!==null&&c.stateNode!=null)Qo($,c,M,S,f),$.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!S){if(c.stateNode===null)throw Error(o(166));return Br(c),null}if($=Xo(ms.current),Hu(c)){if(!we)throw Error(o(175));$=Dt(c.stateNode,c.type,c.memoizedProps,f,$,c,!$i),c.updateQueue=$,$!==null&&Jo(c)}else{var L=q(M,S,f,$,c);zl(L,c,!1,!1),c.stateNode=L,_e(L,M,S,f,$)&&Jo(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Br(c),null;case 6:if($&&c.stateNode!=null)ve($,c,$.memoizedProps,S);else{if(typeof S!="string"&&c.stateNode===null)throw Error(o(166));if($=Xo(hl.current),f=Xo(ms.current),Hu(c)){if(!we)throw Error(o(176));if($=c.stateNode,S=c.memoizedProps,(f=xn($,S,c,!$i))&&(M=Ei,M!==null))switch(L=(M.mode&1)!==0,M.tag){case 3:Fo(M.stateNode.containerInfo,$,S,L);break;case 5:wo(M.type,M.memoizedProps,M.stateNode,$,S,L)}f&&Jo(c)}else c.stateNode=Ve(S,$,f,c)}return Br(c),null;case 13:if(ur(pi),S=c.memoizedState,or&&di!==null&&(c.mode&1)!==0&&(c.flags&128)===0){for($=di;$;)$=Ae($);return dc(),c.flags|=98560,c}if(S!==null&&S.dehydrated!==null){if(S=Hu(c),$===null){if(!S)throw Error(o(318));if(!we)throw Error(o(344));if($=c.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(o(317));Bn($,c)}else dc(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;return Br(c),null}return Vo!==null&&(on(Vo),Vo=null),c.flags&128?(c.lanes=f,c):(S=S!==null,f=!1,$===null?Hu(c):f=$.memoizedState!==null,S&&!f&&(c.child.flags|=8192,c.mode&1&&($===null||pi.current&1?Ai===0&&(Ai=3):Zh())),c.updateQueue!==null&&(c.flags|=4),Br(c),null);case 4:return Ul(),Qi($,c),$===null&&it(c.stateNode.containerInfo),Br(c),null;case 10:return hu(c.type._context),Br(c),null;case 17:return Gr(c.type)&&Di(),Br(c),null;case 19:if(ur(pi),M=c.memoizedState,M===null)return Br(c),null;if(S=(c.flags&128)!==0,L=M.rendering,L===null)if(S)Na(M,!1);else{if(Ai!==0||$!==null&&$.flags&128)for($=c.child;$!==null;){if(L=je($),L!==null){for(c.flags|=128,Na(M,!1),$=L.updateQueue,$!==null&&(c.updateQueue=$,c.flags|=4),c.subtreeFlags=0,$=f,S=c.child;S!==null;)f=S,M=$,f.flags&=14680066,L=f.alternate,L===null?(f.childLanes=0,f.lanes=M,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=L.childLanes,f.lanes=L.lanes,f.child=L.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=L.memoizedProps,f.memoizedState=L.memoizedState,f.updateQueue=L.updateQueue,f.type=L.type,M=L.dependencies,f.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext}),S=S.sibling;return pn(pi,pi.current&1|2),c.child}$=$.sibling}M.tail!==null&&bi()>qh&&(c.flags|=128,S=!0,Na(M,!1),c.lanes=4194304)}else{if(!S)if($=je(L),$!==null){if(c.flags|=128,S=!0,$=$.updateQueue,$!==null&&(c.updateQueue=$,c.flags|=4),Na(M,!0),M.tail===null&&M.tailMode==="hidden"&&!L.alternate&&!or)return Br(c),null}else 2*bi()-M.renderingStartTime>qh&&f!==1073741824&&(c.flags|=128,S=!0,Na(M,!1),c.lanes=4194304);M.isBackwards?(L.sibling=c.child,c.child=L):($=M.last,$!==null?$.sibling=L:c.child=L,M.last=L)}return M.tail!==null?(c=M.tail,M.rendering=c,M.tail=c.sibling,M.renderingStartTime=bi(),c.sibling=null,$=pi.current,pn(pi,S?$&1|2:$&1),c):(Br(c),null);case 22:case 23:return Lt(),S=c.memoizedState!==null,$!==null&&$.memoizedState!==null!==S&&(c.flags|=8192),S&&c.mode&1?Fr&1073741824&&(Br(c),rt&&c.subtreeFlags&6&&(c.flags|=8192)):Br(c),null;case 24:return null;case 25:return null}throw Error(o(156,c.tag))}var Fp=l.ReactCurrentOwner,da=!1;function Yr($,c,f,S){c.child=$===null?fc(c,null,f,S):fh(c,$.child,f,S)}function fi($,c,f,S,M){f=f.render;var L=c.ref;return ci(c,M),S=gc($,c,f,S,L,M),f=Lr(),$!==null&&!da?(c.updateQueue=$.updateQueue,c.flags&=-2053,$.lanes&=~M,Pr($,c,M)):(or&&f&&cl(c),c.flags|=1,Yr($,c,S,M),c.child)}function Si($,c,f,S,M){if($===null){var L=f.type;return typeof L=="function"&&!Ns(L)&&L.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=L,Mi($,c,L,S,M)):($=Ks(f.type,null,S,c,c.mode,M),$.ref=c.ref,$.return=c,c.child=$)}if(L=$.child,($.lanes&M)===0){var H=L.memoizedProps;if(f=f.compare,f=f!==null?f:uu,f(H,S)&&$.ref===c.ref)return Pr($,c,M)}return c.flags|=1,$=Tl(L,S),$.ref=c.ref,$.return=c,c.child=$}function Mi($,c,f,S,M){if($!==null&&uu($.memoizedProps,S)&&$.ref===c.ref)if(da=!1,($.lanes&M)!==0)$.flags&131072&&(da=!0);else return c.lanes=$.lanes,Pr($,c,M);return Ro($,c,f,S,M)}function Tc($,c,f){var S=c.pendingProps,M=S.children,L=$!==null?$.memoizedState:null;if(S.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null},pn(Vs,Fr),Fr|=f;else if(f&1073741824)c.memoizedState={baseLanes:0,cachePool:null},S=L!==null?L.baseLanes:f,pn(Vs,Fr),Fr|=S;else return $=L!==null?L.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:$,cachePool:null},c.updateQueue=null,pn(Vs,Fr),Fr|=$,null;else L!==null?(S=L.baseLanes|f,c.memoizedState=null):S=f,pn(Vs,Fr),Fr|=S;return Yr($,c,M,f),c.child}function Io($,c){var f=c.ref;($===null&&f!==null||$!==null&&$.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function Ro($,c,f,S,M){var L=Gr(f)?ui:Tr.current;return L=Ji(c,L),ci(c,M),f=gc($,c,f,S,L,M),S=Lr(),$!==null&&!da?(c.updateQueue=$.updateQueue,c.flags&=-2053,$.lanes&=~M,Pr($,c,M)):(or&&S&&cl(c),c.flags|=1,Yr($,c,f,M),c.child)}function to($,c,f,S,M){if(Gr(f)){var L=!0;cc(c)}else L=!1;if(ci(c,M),c.stateNode===null)$!==null&&($.alternate=null,c.alternate=null,c.flags|=2),Bp(c,f,S),lp(c,f,S,M),S=!0;else if($===null){var H=c.stateNode,re=c.memoizedProps;H.props=re;var Se=H.context,We=f.contextType;typeof We=="object"&&We!==null?We=Zr(We):(We=Gr(f)?ui:Tr.current,We=Ji(c,We));var gt=f.getDerivedStateFromProps,zt=typeof gt=="function"||typeof H.getSnapshotBeforeUpdate=="function";zt||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(re!==S||Se!==We)&&Rf(c,H,S,We),jr=!1;var Zt=c.memoizedState;H.state=Zt,hi(c,S,H,M),Se=c.memoizedState,re!==S||Zt!==Se||qn.current||jr?(typeof gt=="function"&&(op(c,f,gt,S),Se=c.memoizedState),(re=jr||ap(c,f,re,S,Zt,Se,We))?(zt||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(c.flags|=4194308)):(typeof H.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=S,c.memoizedState=Se),H.props=S,H.state=Se,H.context=We,S=re):(typeof H.componentDidMount=="function"&&(c.flags|=4194308),S=!1)}else{H=c.stateNode,Uh($,c),re=c.memoizedProps,We=c.type===c.elementType?re:ps(c.type,re),H.props=We,zt=c.pendingProps,Zt=H.context,Se=f.contextType,typeof Se=="object"&&Se!==null?Se=Zr(Se):(Se=Gr(f)?ui:Tr.current,Se=Ji(c,Se));var hn=f.getDerivedStateFromProps;(gt=typeof hn=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(re!==zt||Zt!==Se)&&Rf(c,H,S,Se),jr=!1,Zt=c.memoizedState,H.state=Zt,hi(c,S,H,M);var an=c.memoizedState;re!==zt||Zt!==an||qn.current||jr?(typeof hn=="function"&&(op(c,f,hn,S),an=c.memoizedState),(We=jr||ap(c,f,We,S,Zt,an,Se)||!1)?(gt||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(S,an,Se),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(S,an,Se)),typeof H.componentDidUpdate=="function"&&(c.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof H.componentDidUpdate!="function"||re===$.memoizedProps&&Zt===$.memoizedState||(c.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||re===$.memoizedProps&&Zt===$.memoizedState||(c.flags|=1024),c.memoizedProps=S,c.memoizedState=an),H.props=S,H.state=an,H.context=Se,S=We):(typeof H.componentDidUpdate!="function"||re===$.memoizedProps&&Zt===$.memoizedState||(c.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||re===$.memoizedProps&&Zt===$.memoizedState||(c.flags|=1024),S=!1)}return Ec($,c,f,S,L,M)}function Ec($,c,f,S,M,L){Io($,c);var H=(c.flags&128)!==0;if(!S&&!H)return M&&Uu(c,f,!1),Pr($,c,L);S=c.stateNode,Fp.current=c;var re=H&&typeof f.getDerivedStateFromError!="function"?null:S.render();return c.flags|=1,$!==null&&H?(c.child=fh(c,$.child,null,L),c.child=fh(c,null,re,L)):Yr($,c,re,L),c.memoizedState=S.state,M&&Uu(c,f,!0),c.child}function fo($){var c=$.stateNode;c.pendingContext?Ia($,c.pendingContext,c.pendingContext!==c.context):c.context&&Ia($,c.context,!1),dl($,c.containerInfo)}function Rd($,c,f,S,M){return dc(),ph(M),c.flags|=256,Yr($,c,f,S),c.child}var kd={dehydrated:null,treeContext:null,retryLane:0};function Th($){return{baseLanes:$,cachePool:null}}function pa($,c,f){var S=c.pendingProps,M=pi.current,L=!1,H=(c.flags&128)!==0,re;if((re=H)||(re=$!==null&&$.memoizedState===null?!1:(M&2)!==0),re?(L=!0,c.flags&=-129):($===null||$.memoizedState!==null)&&(M|=1),pn(pi,M&1),$===null)return Gh(c),$=c.memoizedState,$!==null&&($=$.dehydrated,$!==null)?(c.mode&1?qt($)?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(M=S.children,$=S.fallback,L?(S=c.mode,L=c.child,M={mode:"hidden",children:M},!(S&1)&&L!==null?(L.childLanes=0,L.pendingProps=M):L=ya(M,S,0,null),$=Ha($,S,f,null),L.return=c,$.return=c,L.sibling=$,c.child=L,c.child.memoizedState=Th(f),c.memoizedState=kd,$):Cn(c,M));if(M=$.memoizedState,M!==null){if(re=M.dehydrated,re!==null){if(H)return c.flags&256?(c.flags&=-257,ti($,c,f,Error(o(422)))):c.memoizedState!==null?(c.child=$.child,c.flags|=128,null):(L=S.fallback,M=c.mode,S=ya({mode:"visible",children:S.children},M,0,null),L=Ha(L,M,f,null),L.flags|=2,S.return=c,L.return=c,S.sibling=L,c.child=S,c.mode&1&&fh(c,$.child,null,f),c.child.memoizedState=Th(f),c.memoizedState=kd,L);if(!(c.mode&1))c=ti($,c,f,null);else if(qt(re))c=ti($,c,f,Error(o(419)));else if(S=(f&$.childLanes)!==0,da||S){if(S=On,S!==null){switch(f&-f){case 4:L=2;break;case 16:L=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:L=32;break;case 536870912:L=268435456;break;default:L=0}S=L&(S.suspendedLanes|f)?0:L,S!==0&&S!==M.retryLane&&(M.retryLane=S,ys($,S,-1))}Zh(),c=ti($,c,f,Error(o(421)))}else It(re)?(c.flags|=128,c.child=$.child,c=Qc.bind(null,$),gn(re,c),c=null):(f=M.treeContext,we&&(di=dt(re),Ei=c,or=!0,Vo=null,$i=!1,f!==null&&(ua[Ur++]=Us,ua[Ur++]=Wo,ua[Ur++]=sr,Us=f.id,Wo=f.overflow,sr=c)),c=Cn(c,c.pendingProps.children),c.flags|=4096);return c}return L?(S=_s($,c,S.children,S.fallback,f),L=c.child,M=$.child.memoizedState,L.memoizedState=M===null?Th(f):{baseLanes:M.baseLanes|f,cachePool:null},L.childLanes=$.childLanes&~f,c.memoizedState=kd,S):(f=os($,c,S.children,f),c.memoizedState=null,f)}return L?(S=_s($,c,S.children,S.fallback,f),L=c.child,M=$.child.memoizedState,L.memoizedState=M===null?Th(f):{baseLanes:M.baseLanes|f,cachePool:null},L.childLanes=$.childLanes&~f,c.memoizedState=kd,S):(f=os($,c,S.children,f),c.memoizedState=null,f)}function Cn($,c){return c=ya({mode:"visible",children:c},$.mode,0,null),c.return=$,$.child=c}function os($,c,f,S){var M=$.child;return $=M.sibling,f=Tl(M,{mode:"visible",children:f}),!(c.mode&1)&&(f.lanes=S),f.return=c,f.sibling=null,$!==null&&(S=c.deletions,S===null?(c.deletions=[$],c.flags|=16):S.push($)),c.child=f}function _s($,c,f,S,M){var L=c.mode;$=$.child;var H=$.sibling,re={mode:"hidden",children:f};return!(L&1)&&c.child!==$?(f=c.child,f.childLanes=0,f.pendingProps=re,c.deletions=null):(f=Tl($,re),f.subtreeFlags=$.subtreeFlags&14680064),H!==null?S=Tl(H,S):(S=Ha(S,L,M,null),S.flags|=2),S.return=c,f.return=c,f.sibling=S,c.child=f,S}function ti($,c,f,S){return S!==null&&ph(S),fh(c,$.child,null,f),$=Cn(c,c.pendingProps.children),$.flags|=2,c.memoizedState=null,$}function _l($,c,f){$.lanes|=c;var S=$.alternate;S!==null&&(S.lanes|=c),ka($.return,c,f)}function vl($,c,f,S,M){var L=$.memoizedState;L===null?$.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:S,tail:f,tailMode:M}:(L.isBackwards=c,L.rendering=null,L.renderingStartTime=0,L.last=S,L.tail=f,L.tailMode=M)}function cn($,c,f){var S=c.pendingProps,M=S.revealOrder,L=S.tail;if(Yr($,c,S.children,f),S=pi.current,(S&2)!==0)S=S&1|2,c.flags|=128;else{if($!==null&&$.flags&128)e:for($=c.child;$!==null;){if($.tag===13)$.memoizedState!==null&&_l($,f,c);else if($.tag===19)_l($,f,c);else if($.child!==null){$.child.return=$,$=$.child;continue}if($===c)break e;for(;$.sibling===null;){if($.return===null||$.return===c)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}S&=1}if(pn(pi,S),(c.mode&1)===0)c.memoizedState=null;else switch(M){case"forwards":for(f=c.child,M=null;f!==null;)$=f.alternate,$!==null&&je($)===null&&(M=f),f=f.sibling;f=M,f===null?(M=c.child,c.child=null):(M=f.sibling,f.sibling=null),vl(c,!1,M,f,L);break;case"backwards":for(f=null,M=c.child,c.child=null;M!==null;){if($=M.alternate,$!==null&&je($)===null){c.child=M;break}$=M.sibling,M.sibling=f,f=M,M=$}vl(c,!0,f,null,L);break;case"together":vl(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Pr($,c,f){if($!==null&&(c.dependencies=$.dependencies),Gl|=c.lanes,(f&c.childLanes)===0)return null;if($!==null&&c.child!==$.child)throw Error(o(153));if(c.child!==null){for($=c.child,f=Tl($,$.pendingProps),c.child=f,f.return=c;$.sibling!==null;)$=$.sibling,f=f.sibling=Tl($,$.pendingProps),f.return=c;f.sibling=null}return c.child}function qi($,c,f){switch(c.tag){case 3:fo(c),dc();break;case 5:Fc(c);break;case 1:Gr(c.type)&&cc(c);break;case 4:dl(c,c.stateNode.containerInfo);break;case 10:qs(c,c.type._context,c.memoizedProps.value);break;case 13:var S=c.memoizedState;if(S!==null)return S.dehydrated!==null?(pn(pi,pi.current&1),c.flags|=128,null):f&c.child.childLanes?pa($,c,f):(pn(pi,pi.current&1),$=Pr($,c,f),$!==null?$.sibling:null);pn(pi,pi.current&1);break;case 19:if(S=(f&c.childLanes)!==0,($.flags&128)!==0){if(S)return cn($,c,f);c.flags|=128}var M=c.memoizedState;if(M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),pn(pi,pi.current),S)break;return null;case 22:case 23:return c.lanes=0,Tc($,c,f)}return Pr($,c,f)}function Up($,c){switch(Hh(c),c.tag){case 1:return Gr(c.type)&&Di(),$=c.flags,$&65536?(c.flags=$&-65537|128,c):null;case 3:return Ul(),ur(qn),ur(Tr),yt(),$=c.flags,$&65536&&!($&128)?(c.flags=$&-65537|128,c):null;case 5:return xd(c),null;case 13:if(ur(pi),$=c.memoizedState,$!==null&&$.dehydrated!==null){if(c.alternate===null)throw Error(o(340));dc()}return $=c.flags,$&65536?(c.flags=$&-65537|128,c):null;case 19:return ur(pi),null;case 4:return Ul(),null;case 10:return hu(c.type._context),null;case 22:case 23:return Lt(),null;case 24:return null;default:return null}}var Gc=!1,ks=!1,ko=typeof WeakSet=="function"?WeakSet:Set,dn=null;function rn($,c){var f=$.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(S){vo($,c,S)}else f.current=null}function Da($,c,f){try{f()}catch(S){vo($,c,S)}}var Yu=!1;function Of($,c){for(j($.containerInfo),dn=c;dn!==null;)if($=dn,c=$.child,($.subtreeFlags&1028)!==0&&c!==null)c.return=$,dn=c;else for(;dn!==null;){$=dn;try{var f=$.alternate;if($.flags&1024)switch($.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var S=f.memoizedProps,M=f.memoizedState,L=$.stateNode,H=L.getSnapshotBeforeUpdate($.elementType===$.type?S:ps($.type,S),M);L.__reactInternalSnapshotBeforeUpdate=H}break;case 3:rt&&Pt($.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(re){vo($,$.return,re)}if(c=$.sibling,c!==null){c.return=$.return,dn=c;break}dn=$.return}return f=Yu,Yu=!1,f}function yu($,c,f){var S=c.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var M=S=S.next;do{if((M.tag&$)===$){var L=M.destroy;M.destroy=void 0,L!==void 0&&Da(c,f,L)}M=M.next}while(M!==S)}}function qo($,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&$)===$){var S=f.create;f.destroy=S()}f=f.next}while(f!==c)}}function as($){var c=$.ref;if(c!==null){var f=$.stateNode;switch($.tag){case 5:$=he(f);break;default:$=f}typeof c=="function"?c($):c.current=$}}function fa($,c,f){if(Co&&typeof Co.onCommitFiberUnmount=="function")try{Co.onCommitFiberUnmount(au,c)}catch{}switch(c.tag){case 0:case 11:case 14:case 15:if($=c.updateQueue,$!==null&&($=$.lastEffect,$!==null)){var S=$=$.next;do{var M=S,L=M.destroy;M=M.tag,L!==void 0&&(M&2||M&4)&&Da(c,f,L),S=S.next}while(S!==$)}break;case 1:if(rn(c,f),$=c.stateNode,typeof $.componentWillUnmount=="function")try{$.props=c.memoizedProps,$.state=c.memoizedState,$.componentWillUnmount()}catch(H){vo(c,f,H)}break;case 5:rn(c,f);break;case 4:rt?Wc($,c,f):Ne&&Ne&&(c=c.stateNode.containerInfo,f=Mr(c),ar(c,f))}}function Ui($,c,f){for(var S=c;;)if(fa($,S,f),S.child===null||rt&&S.tag===4){if(S===c)break;for(;S.sibling===null;){if(S.return===null||S.return===c)return;S=S.return}S.sibling.return=S.return,S=S.sibling}else S.child.return=S,S=S.child}function ma($){var c=$.alternate;c!==null&&($.alternate=null,ma(c)),$.child=null,$.deletions=null,$.sibling=null,$.tag===5&&(c=$.stateNode,c!==null&&Mt(c)),$.stateNode=null,$.return=null,$.dependencies=null,$.memoizedProps=null,$.memoizedState=null,$.pendingProps=null,$.stateNode=null,$.updateQueue=null}function bu($){return $.tag===5||$.tag===3||$.tag===4}function Od($){e:for(;;){for(;$.sibling===null;){if($.return===null||bu($.return))return null;$=$.return}for($.sibling.return=$.return,$=$.sibling;$.tag!==5&&$.tag!==6&&$.tag!==18;){if($.flags&2||$.child===null||$.tag===4)continue e;$.child.return=$,$=$.child}if(!($.flags&2))return $.stateNode}}function Ku($){if(rt){e:{for(var c=$.return;c!==null;){if(bu(c))break e;c=c.return}throw Error(o(160))}var f=c;switch(f.tag){case 5:c=f.stateNode,f.flags&32&&(Bt(c),f.flags&=-33),f=Od($),Ld($,f,c);break;case 3:case 4:c=f.stateNode.containerInfo,f=Od($),Gs($,f,c);break;default:throw Error(o(161))}}}function Gs($,c,f){var S=$.tag;if(S===5||S===6)$=$.stateNode,c?oe(f,$,c):ut(f,$);else if(S!==4&&($=$.child,$!==null))for(Gs($,c,f),$=$.sibling;$!==null;)Gs($,c,f),$=$.sibling}function Ld($,c,f){var S=$.tag;if(S===5||S===6)$=$.stateNode,c?J(f,$,c):xt(f,$);else if(S!==4&&($=$.child,$!==null))for(Ld($,c,f),$=$.sibling;$!==null;)Ld($,c,f),$=$.sibling}function Wc($,c,f){for(var S=c,M=!1,L,H;;){if(!M){M=S.return;e:for(;;){if(M===null)throw Error(o(160));switch(L=M.stateNode,M.tag){case 5:H=!1;break e;case 3:L=L.containerInfo,H=!0;break e;case 4:L=L.containerInfo,H=!0;break e}M=M.return}M=!0}if(S.tag===5||S.tag===6)Ui($,S,f),H?Ge(L,S.stateNode):$e(L,S.stateNode);else if(S.tag===18)H?wr(L,S.stateNode):yr(L,S.stateNode);else if(S.tag===4){if(S.child!==null){L=S.stateNode.containerInfo,H=!0,S.child.return=S,S=S.child;continue}}else if(fa($,S,f),S.child!==null){S.child.return=S,S=S.child;continue}if(S===c)break;for(;S.sibling===null;){if(S.return===null||S.return===c)return;S=S.return,S.tag===4&&(M=!1)}S.sibling.return=S.return,S=S.sibling}}function Jh($,c){if(rt){switch(c.tag){case 0:case 11:case 14:case 15:yu(3,c,c.return),qo(3,c),yu(5,c,c.return);return;case 1:return;case 5:var f=c.stateNode;if(f!=null){var S=c.memoizedProps;$=$!==null?$.memoizedProps:S;var M=c.type,L=c.updateQueue;c.updateQueue=null,L!==null&&X(f,L,M,$,S,c)}return;case 6:if(c.stateNode===null)throw Error(o(162));f=c.memoizedProps,He(c.stateNode,$!==null?$.memoizedProps:f,f);return;case 3:we&&$!==null&&$.memoizedState.isDehydrated&&mr(c.stateNode.containerInfo);return;case 12:return;case 13:ga(c);return;case 19:ga(c);return;case 17:return}throw Error(o(163))}switch(c.tag){case 0:case 11:case 14:case 15:yu(3,c,c.return),qo(3,c),yu(5,c,c.return);return;case 12:return;case 13:ga(c);return;case 19:ga(c);return;case 3:we&&$!==null&&$.memoizedState.isDehydrated&&mr(c.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ne){switch(c.tag){case 1:case 5:case 6:break e;case 3:case 4:c=c.stateNode,ar(c.containerInfo,c.pendingChildren);break e}throw Error(o(163))}}function ga($){var c=$.updateQueue;if(c!==null){$.updateQueue=null;var f=$.stateNode;f===null&&(f=$.stateNode=new ko),c.forEach(function(S){var M=za.bind(null,$,S);f.has(S)||(f.add(S),S.then(M,M))})}}function yl($,c){for(dn=c;dn!==null;){c=dn;var f=c.deletions;if(f!==null)for(var S=0;S<f.length;S++){var M=f[S];try{var L=$;rt?Wc(L,M,c):Ui(L,M,c);var H=M.alternate;H!==null&&(H.return=null),M.return=null}catch(kt){vo(M,c,kt)}}if(f=c.child,(c.subtreeFlags&12854)!==0&&f!==null)f.return=c,dn=f;else for(;dn!==null;){c=dn;try{var re=c.flags;if(re&32&&rt&&Bt(c.stateNode),re&512){var Se=c.alternate;if(Se!==null){var We=Se.ref;We!==null&&(typeof We=="function"?We(null):We.current=null)}}if(re&8192)switch(c.tag){case 13:if(c.memoizedState!==null){var gt=c.alternate;(gt===null||gt.memoizedState===null)&&(ro=bi())}break;case 22:var zt=c.memoizedState!==null,Zt=c.alternate,hn=Zt!==null&&Zt.memoizedState!==null;if(f=c,rt){e:if(S=f,M=zt,L=null,rt)for(var an=S;;){if(an.tag===5){if(L===null){L=an;var nn=an.stateNode;M?Pe(nn):st(an.stateNode,an.memoizedProps)}}else if(an.tag===6){if(L===null){var _r=an.stateNode;M?Wt(_r):Ut(_r,an.memoizedProps)}}else if((an.tag!==22&&an.tag!==23||an.memoizedState===null||an===S)&&an.child!==null){an.child.return=an,an=an.child;continue}if(an===S)break;for(;an.sibling===null;){if(an.return===null||an.return===S)break e;L===an&&(L=null),an=an.return}L===an&&(L=null),an.sibling.return=an.return,an=an.sibling}}if(zt&&!hn&&f.mode&1){dn=f;for(var ft=f.child;ft!==null;){for(f=dn=ft;dn!==null;){S=dn;var Ee=S.child;switch(S.tag){case 0:case 11:case 14:case 15:yu(4,S,S.return);break;case 1:rn(S,S.return);var Me=S.stateNode;if(typeof Me.componentWillUnmount=="function"){var Xe=S.return;try{Me.props=S.memoizedProps,Me.state=S.memoizedState,Me.componentWillUnmount()}catch(kt){vo(S,Xe,kt)}}break;case 5:rn(S,S.return);break;case 22:if(S.memoizedState!==null){Qh(f);continue}}Ee!==null?(Ee.return=S,dn=Ee):Qh(f)}ft=ft.sibling}}}switch(re&4102){case 2:Ku(c),c.flags&=-3;break;case 6:Ku(c),c.flags&=-3,Jh(c.alternate,c);break;case 4096:c.flags&=-4097;break;case 4100:c.flags&=-4097,Jh(c.alternate,c);break;case 4:Jh(c.alternate,c)}}catch(kt){vo(c,c.return,kt)}if(f=c.sibling,f!==null){f.return=c.return,dn=f;break}dn=c.return}}}function zp($,c,f){dn=$,Hl($)}function Hl($,c,f){for(var S=($.mode&1)!==0;dn!==null;){var M=dn,L=M.child;if(M.tag===22&&S){var H=M.memoizedState!==null||Gc;if(!H){var re=M.alternate,Se=re!==null&&re.memoizedState!==null||ks;re=Gc;var We=ks;if(Gc=H,(ks=Se)&&!We)for(dn=M;dn!==null;)H=dn,Se=H.child,H.tag===22&&H.memoizedState!==null?$c(M):Se!==null?(Se.return=H,dn=Se):$c(M);for(;L!==null;)dn=L,Hl(L),L=L.sibling;dn=M,Gc=re,ks=We}Tu($)}else M.subtreeFlags&8772&&L!==null?(L.return=M,dn=L):Tu($)}}function Tu($){for(;dn!==null;){var c=dn;if(c.flags&8772){var f=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:ks||qo(5,c);break;case 1:var S=c.stateNode;if(c.flags&4&&!ks)if(f===null)S.componentDidMount();else{var M=c.elementType===c.type?f.memoizedProps:ps(c.type,f.memoizedProps);S.componentDidUpdate(M,f.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var L=c.updateQueue;L!==null&&pu(c,L,S);break;case 3:var H=c.updateQueue;if(H!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=he(c.child.stateNode);break;case 1:f=c.child.stateNode}pu(c,H,f)}break;case 5:var re=c.stateNode;f===null&&c.flags&4&&Ce(re,c.type,c.memoizedProps,c);break;case 6:break;case 4:break;case 12:break;case 13:if(we&&c.memoizedState===null){var Se=c.alternate;if(Se!==null){var We=Se.memoizedState;if(We!==null){var gt=We.dehydrated;gt!==null&&Qr(gt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}ks||c.flags&512&&as(c)}catch(zt){vo(c,c.return,zt)}}if(c===$){dn=null;break}if(f=c.sibling,f!==null){f.return=c.return,dn=f;break}dn=c.return}}function Qh($){for(;dn!==null;){var c=dn;if(c===$){dn=null;break}var f=c.sibling;if(f!==null){f.return=c.return,dn=f;break}dn=c.return}}function $c($){for(;dn!==null;){var c=dn;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{qo(4,c)}catch(Se){vo(c,f,Se)}break;case 1:var S=c.stateNode;if(typeof S.componentDidMount=="function"){var M=c.return;try{S.componentDidMount()}catch(Se){vo(c,M,Se)}}var L=c.return;try{as(c)}catch(Se){vo(c,L,Se)}break;case 5:var H=c.return;try{as(c)}catch(Se){vo(c,H,Se)}}}catch(Se){vo(c,c.return,Se)}if(c===$){dn=null;break}var re=c.sibling;if(re!==null){re.return=c.return,dn=re;break}dn=c.return}}var ls=0,Eu=1,Ju=2,mo=3,Ba=4;if(typeof Symbol=="function"&&Symbol.for){var vs=Symbol.for;ls=vs("selector.component"),Eu=vs("selector.has_pseudo_class"),Ju=vs("selector.role"),mo=vs("selector.test_id"),Ba=vs("selector.text")}function no($){var c=ze($);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(o(364));return c}if($=wt($),$===null)throw Error(o(362));return $.stateNode.current}function Vc($,c){switch(c.$$typeof){case ls:if($.type===c.value)return!0;break;case Eu:e:{c=c.value,$=[$,0];for(var f=0;f<$.length;){var S=$[f++],M=$[f++],L=c[M];if(S.tag!==5||!Z(S)){for(;L!=null&&Vc(S,L);)M++,L=c[M];if(M===c.length){c=!0;break e}else for(S=S.child;S!==null;)$.push(S,M),S=S.sibling}}c=!1}return c;case Ju:if($.tag===5&&ke($.stateNode,c.value))return!0;break;case Ba:if(($.tag===5||$.tag===6)&&($=be($),$!==null&&0<=$.indexOf(c.value)))return!0;break;case mo:if($.tag===5&&($=$.memoizedProps["data-testname"],typeof $=="string"&&$.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Ws($){switch($.$$typeof){case ls:return"<"+(z($.value)||"Unknown")+">";case Eu:return":has("+(Ws($)||"")+")";case Ju:return'[role="'+$.value+'"]';case Ba:return'"'+$.value+'"';case mo:return'[data-testname="'+$.value+'"]';default:throw Error(o(365))}}function Pa($,c){var f=[];$=[$,0];for(var S=0;S<$.length;){var M=$[S++],L=$[S++],H=c[L];if(M.tag!==5||!Z(M)){for(;H!=null&&Vc(M,H);)L++,H=c[L];if(L===c.length)f.push(M);else for(M=M.child;M!==null;)$.push(M,L),M=M.sibling}}return f}function Qu($,c){if(!Et)throw Error(o(363));$=no($),$=Pa($,c),c=[],$=Array.from($);for(var f=0;f<$.length;){var S=$[f++];if(S.tag===5)Z(S)||c.push(S.stateNode);else for(S=S.child;S!==null;)$.push(S),S=S.sibling}return c}var hp=Math.ceil,jc=l.ReactCurrentDispatcher,Zo=l.ReactCurrentOwner,mi=l.ReactCurrentBatchConfig,wn=0,On=null,gr=null,Ir=0,Fr=0,Vs=li(0),Ai=0,zi=null,Gl=0,$u=0,qu=0,Su=null,Os=null,ro=0,qh=1/0;function _a(){qh=bi()+500}var wu=!1,xu=null,js=null,go=!1,Fa=null,_o=0,Zu=0,Cu=null,Eh=-1,Xc=0;function br(){return wn&6?bi():Eh!==-1?Eh:Eh=bi()}function ji($){return $.mode&1?wn&2&&Ir!==0?Ir&-Ir:Go.transition!==null?(Xc===0&&($=uh,uh<<=1,!(uh&4194240)&&(uh=64),Xc=$),Xc):($=Yn,$!==0?$:nt()):1}function ys($,c,f){if(50<Zu)throw Zu=0,Cu=null,Error(o(185));var S=ea($,c);return S===null?null:(ou(S,c,f),(!(wn&2)||S!==On)&&(S===On&&(!(wn&2)&&($u|=c),Ai===4&&Zi(S,Ir)),Ls(S,f),c===1&&wn===0&&!($.mode&1)&&(_a(),As&&Ho())),S)}function ea($,c){$.lanes|=c;var f=$.alternate;for(f!==null&&(f.lanes|=c),f=$,$=$.return;$!==null;)$.childLanes|=c,f=$.alternate,f!==null&&(f.childLanes|=c),f=$,$=$.return;return f.tag===3?f.stateNode:null}function Ls($,c){var f=$.callbackNode;ch($,c);var S=Bi($,$===On?Ir:0);if(S===0)f!==null&&Ra(f),$.callbackNode=null,$.callbackPriority=0;else if(c=S&-S,$.callbackPriority!==c){if(f!=null&&Ra(f),c===1)$.tag===0?Pc(bl.bind(null,$)):Bl(bl.bind(null,$)),At?ht(function(){wn===0&&Ho()}):al(Pi,Ho),f=null;else{switch(Kn(S)){case 1:f=Pi;break;case 4:f=ll;break;case 16:f=wd;break;case 536870912:f=Ms;break;default:f=wd}f=qc(f,Gn.bind(null,$))}$.callbackPriority=c,$.callbackNode=f}}function Gn($,c){if(Eh=-1,Xc=0,(wn&6)!==0)throw Error(o(327));var f=$.callbackNode;if(Jc()&&$.callbackNode!==f)return null;var S=Bi($,$===On?Ir:0);if(S===0)return null;if(S&30||S&$.expiredLanes||c)c=Yc($,S);else{c=S;var M=wn;wn|=2;var L=wc();(On!==$||Ir!==c)&&(_a(),va($,c));do try{bs();break}catch(re){Rr($,re)}while(!0);cu(),jc.current=L,wn=M,gr!==null?c=0:(On=null,Ir=0,c=Ai)}if(c!==0){if(c===2&&(M=hc($),M!==0&&(S=M,c=Sc($,M))),c===1)throw f=zi,va($,0),Zi($,S),Ls($,bi()),f;if(c===6)Zi($,S);else{if(M=$.current.alternate,(S&30)===0&&!ni(M)&&(c=Yc($,S),c===2&&(L=hc($),L!==0&&(S=L,c=Sc($,L))),c===1))throw f=zi,va($,0),Zi($,S),Ls($,bi()),f;switch($.finishedWork=M,$.finishedLanes=S,c){case 0:case 1:throw Error(o(345));case 2:Wl($,Os);break;case 3:if(Zi($,S),(S&130023424)===S&&(c=ro+500-bi(),10<c)){if(Bi($,0)!==0)break;if(M=$.suspendedLanes,(M&S)!==S){br(),$.pingedLanes|=$.suspendedLanes&M;break}$.timeoutHandle=Re(Wl.bind(null,$,Os),c);break}Wl($,Os);break;case 4:if(Zi($,S),(S&4194240)===S)break;for(c=$.eventTimes,M=-1;0<S;){var H=31-Cs(S);L=1<<H,H=c[H],H>M&&(M=H),S&=~L}if(S=M,S=bi()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*hp(S/1960))-S,10<S){$.timeoutHandle=Re(Wl.bind(null,$,Os),S);break}Wl($,Os);break;case 5:Wl($,Os);break;default:throw Error(o(329))}}}return Ls($,bi()),$.callbackNode===f?Gn.bind(null,$):null}function Sc($,c){var f=Su;return $.current.memoizedState.isDehydrated&&(va($,c).flags|=256),$=Yc($,c),$!==2&&(c=Os,Os=f,c!==null&&on(c)),$}function on($){Os===null?Os=$:Os.push.apply(Os,$)}function ni($){for(var c=$;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var S=0;S<f.length;S++){var M=f[S],L=M.getSnapshot;M=M.value;try{if(!cr(L(),M))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===$)break;for(;c.sibling===null;){if(c.return===null||c.return===$)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Zi($,c){for(c&=~qu,c&=~$u,$.suspendedLanes|=c,$.pingedLanes&=~c,$=$.expirationTimes;0<c;){var f=31-Cs(c),S=1<<f;$[f]=-1,c&=~S}}function bl($){if(wn&6)throw Error(o(327));Jc();var c=Bi($,0);if(!(c&1))return Ls($,bi()),null;var f=Yc($,c);if($.tag!==0&&f===2){var S=hc($);S!==0&&(c=S,f=Sc($,S))}if(f===1)throw f=zi,va($,0),Zi($,c),Ls($,bi()),f;if(f===6)throw Error(o(345));return $.finishedWork=$.current.alternate,$.finishedLanes=c,Wl($,Os),Ls($,bi()),null}function Ua($){Fa!==null&&Fa.tag===0&&!(wn&6)&&Jc();var c=wn;wn|=1;var f=mi.transition,S=Yn;try{if(mi.transition=null,Yn=1,$)return $()}finally{Yn=S,mi.transition=f,wn=c,!(wn&6)&&Ho()}}function Lt(){Fr=Vs.current,ur(Vs)}function va($,c){$.finishedWork=null,$.finishedLanes=0;var f=$.timeoutHandle;if(f!==et&&($.timeoutHandle=et,Ze(f)),gr!==null)for(f=gr.return;f!==null;){var S=f;switch(Hh(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&Di();break;case 3:Ul(),ur(qn),ur(Tr),yt();break;case 5:xd(S);break;case 4:Ul();break;case 13:ur(pi);break;case 19:ur(pi);break;case 10:hu(S.type._context);break;case 22:case 23:Lt()}f=f.return}if(On=$,gr=$=Tl($.current,null),Ir=Fr=c,Ai=0,zi=null,qu=$u=Gl=0,Os=Su=null,Un!==null){for(c=0;c<Un.length;c++)if(f=Un[c],S=f.interleaved,S!==null){f.interleaved=null;var M=S.next,L=f.pending;if(L!==null){var H=L.next;L.next=M,S.next=H}f.pending=S}Un=null}return $}function Rr($,c){do{var f=gr;try{if(cu(),mn.current=gl,Is){for(var S=tr.memoizedState;S!==null;){var M=S.queue;M!==null&&(M.pending=null),S=S.next}Is=!1}if(Jn=0,xr=An=tr=null,gs=!1,po=0,Zo.current=null,f===null||f.return===null){Ai=1,zi=c,gr=null;break}e:{var L=$,H=f.return,re=f,Se=c;if(c=Ir,re.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var We=Se,gt=re,zt=gt.tag;if(!(gt.mode&1)&&(zt===0||zt===11||zt===15)){var Zt=gt.alternate;Zt?(gt.updateQueue=Zt.updateQueue,gt.memoizedState=Zt.memoizedState,gt.lanes=Zt.lanes):(gt.updateQueue=null,gt.memoizedState=null)}var hn=Xu(H);if(hn!==null){hn.flags&=-257,Id(hn,H,re,L,c),hn.mode&1&&bc(L,We,c),c=hn,Se=We;var an=c.updateQueue;if(an===null){var nn=new Set;nn.add(Se),c.updateQueue=nn}else an.add(Se);break e}else{if(!(c&1)){bc(L,We,c),Zh();break e}Se=Error(o(426))}}else if(or&&re.mode&1){var _r=Xu(H);if(_r!==null){!(_r.flags&65536)&&(_r.flags|=256),Id(_r,H,re,L,c),ph(Se);break e}}L=Se,Ai!==4&&(Ai=2),Su===null?Su=[L]:Su.push(L),Se=Vu(Se,re),re=H;do{switch(re.tag){case 3:re.flags|=65536,c&=-c,re.lanes|=c;var ft=Kh(re,Se,c);zh(re,ft);break e;case 1:L=Se;var Ee=re.type,Me=re.stateNode;if(!(re.flags&128)&&(typeof Ee.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(js===null||!js.has(Me)))){re.flags|=65536,c&=-c,re.lanes|=c;var Xe=yc(re,L,c);zh(re,Xe);break e}}re=re.return}while(re!==null)}Xs(f)}catch(kt){c=kt,gr===f&&f!==null&&(gr=f=f.return);continue}break}while(!0)}function wc(){var $=jc.current;return jc.current=gl,$===null?gl:$}function Zh(){(Ai===0||Ai===3||Ai===2)&&(Ai=4),On===null||!(Gl&268435455)&&!($u&268435455)||Zi(On,Ir)}function Yc($,c){var f=wn;wn|=2;var S=wc();On===$&&Ir===c||va($,c);do try{es();break}catch(M){Rr($,M)}while(!0);if(cu(),wn=f,jc.current=S,gr!==null)throw Error(o(261));return On=null,Ir=0,Ai}function es(){for(;gr!==null;)$h(gr)}function bs(){for(;gr!==null&&!aa();)$h(gr)}function $h($){var c=Au($.alternate,$,Fr);$.memoizedProps=$.pendingProps,c===null?Xs($):gr=c,Zo.current=null}function Xs($){var c=$;do{var f=c.alternate;if($=c.return,(c.flags&32768)===0){if(f=zn(f,c,Fr),f!==null){gr=f;return}}else{if(f=Up(f,c),f!==null){f.flags&=32767,gr=f;return}if($!==null)$.flags|=32768,$.subtreeFlags=0,$.deletions=null;else{Ai=6,gr=null;return}}if(c=c.sibling,c!==null){gr=c;return}gr=c=$}while(c!==null);Ai===0&&(Ai=5)}function Wl($,c){var f=Yn,S=mi.transition;try{mi.transition=null,Yn=1,Kc($,c,f)}finally{mi.transition=S,Yn=f}return null}function Kc($,c,f){do Jc();while(Fa!==null);if(wn&6)throw Error(o(327));var S=$.finishedWork,M=$.finishedLanes;if(S===null)return null;if($.finishedWork=null,$.finishedLanes=0,S===$.current)throw Error(o(177));$.callbackNode=null,$.callbackPriority=0;var L=S.lanes|S.childLanes;if(sl($,L),$===On&&(gr=On=null,Ir=0),!(S.subtreeFlags&2064)&&!(S.flags&2064)||go||(go=!0,qc(wd,function(){return Jc(),null})),L=(S.flags&15990)!==0,(S.subtreeFlags&15990)!==0||L){L=mi.transition,mi.transition=null;var H=Yn;Yn=1;var re=wn;wn|=4,Zo.current=null,Of($,S),yl($,S),te($.containerInfo),$.current=S,zp(S),Nl(),wn=re,Yn=H,mi.transition=L}else $.current=S;if(go&&(go=!1,Fa=$,_o=M),L=$.pendingLanes,L===0&&(js=null),Dl(S.stateNode),Ls($,bi()),c!==null)for(f=$.onRecoverableError,S=0;S<c.length;S++)f(c[S]);if(wu)throw wu=!1,$=xu,xu=null,$;return _o&1&&$.tag!==0&&Jc(),L=$.pendingLanes,L&1?$===Cu?Zu++:(Zu=0,Cu=$):Zu=0,Ho(),null}function Jc(){if(Fa!==null){var $=Kn(_o),c=mi.transition,f=Yn;try{if(mi.transition=null,Yn=16>$?16:$,Fa===null)var S=!1;else{if($=Fa,Fa=null,_o=0,(wn&6)!==0)throw Error(o(331));var M=wn;for(wn|=4,dn=$.current;dn!==null;){var L=dn,H=L.child;if(dn.flags&16){var re=L.deletions;if(re!==null){for(var Se=0;Se<re.length;Se++){var We=re[Se];for(dn=We;dn!==null;){var gt=dn;switch(gt.tag){case 0:case 11:case 15:yu(8,gt,L)}var zt=gt.child;if(zt!==null)zt.return=gt,dn=zt;else for(;dn!==null;){gt=dn;var Zt=gt.sibling,hn=gt.return;if(ma(gt),gt===We){dn=null;break}if(Zt!==null){Zt.return=hn,dn=Zt;break}dn=hn}}}var an=L.alternate;if(an!==null){var nn=an.child;if(nn!==null){an.child=null;do{var _r=nn.sibling;nn.sibling=null,nn=_r}while(nn!==null)}}dn=L}}if(L.subtreeFlags&2064&&H!==null)H.return=L,dn=H;else e:for(;dn!==null;){if(L=dn,(L.flags&2048)!==0)switch(L.tag){case 0:case 11:case 15:yu(9,L,L.return)}var ft=L.sibling;if(ft!==null){ft.return=L.return,dn=ft;break e}dn=L.return}}var Ee=$.current;for(dn=Ee;dn!==null;){H=dn;var Me=H.child;if(H.subtreeFlags&2064&&Me!==null)Me.return=H,dn=Me;else e:for(H=Ee;dn!==null;){if(re=dn,(re.flags&2048)!==0)try{switch(re.tag){case 0:case 11:case 15:qo(9,re)}}catch(kt){vo(re,re.return,kt)}if(re===H){dn=null;break e}var Xe=re.sibling;if(Xe!==null){Xe.return=re.return,dn=Xe;break e}dn=re.return}}if(wn=M,Ho(),Co&&typeof Co.onPostCommitFiberRoot=="function")try{Co.onPostCommitFiberRoot(au,$)}catch{}S=!0}return S}finally{Yn=f,mi.transition=c}}return!1}function ec($,c,f){c=Vu(f,c),c=Kh($,c,1),fs($,c),c=br(),$=ea($,1),$!==null&&(ou($,1,c),Ls($,c))}function vo($,c,f){if($.tag===3)ec($,$,f);else for(;c!==null;){if(c.tag===3){ec(c,$,f);break}else if(c.tag===1){var S=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(js===null||!js.has(S))){$=Vu(f,$),$=yc(c,$,1),fs(c,$),$=br(),c=ea(c,1),c!==null&&(ou(c,1,$),Ls(c,$));break}}c=c.return}}function Ys($,c,f){var S=$.pingCache;S!==null&&S.delete(c),c=br(),$.pingedLanes|=$.suspendedLanes&f,On===$&&(Ir&f)===f&&(Ai===4||Ai===3&&(Ir&130023424)===Ir&&500>bi()-ro?va($,0):qu|=f),Ls($,c)}function Mu($,c){c===0&&($.mode&1?(c=zo,zo<<=1,!(zo&130023424)&&(zo=4194304)):c=1);var f=br();$=ea($,c),$!==null&&(ou($,c,f),Ls($,f))}function Qc($){var c=$.memoizedState,f=0;c!==null&&(f=c.retryLane),Mu($,f)}function za($,c){var f=0;switch($.tag){case 13:var S=$.stateNode,M=$.memoizedState;M!==null&&(f=M.retryLane);break;case 19:S=$.stateNode;break;default:throw Error(o(314))}S!==null&&S.delete(c),Mu($,f)}var Au;Au=function($,c,f){if($!==null)if($.memoizedProps!==c.pendingProps||qn.current)da=!0;else{if(!($.lanes&f)&&!(c.flags&128))return da=!1,qi($,c,f);da=($.flags&131072)!==0}else da=!1,or&&c.flags&1048576&&mu(c,dh,c.index);switch(c.lanes=0,c.tag){case 2:var S=c.type;$!==null&&($.alternate=null,c.alternate=null,c.flags|=2),$=c.pendingProps;var M=Ji(c,Tr.current);ci(c,f),M=gc(null,c,S,$,M,f);var L=Lr();return c.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Gr(S)?(L=!0,cc(c)):L=!1,c.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,Ti(c),M.updater=hh,c.stateNode=M,M._reactInternals=c,lp(c,S,$,f),c=Ec(null,c,S,!0,L,f)):(c.tag=0,or&&L&&cl(c),Yr(null,c,M,f),c=c.child),c;case 16:S=c.elementType;e:{switch($!==null&&($.alternate=null,c.alternate=null,c.flags|=2),$=c.pendingProps,M=S._init,S=M(S._payload),c.type=S,M=c.tag=Iu(S),$=ps(S,$),M){case 0:c=Ro(null,c,S,$,f);break e;case 1:c=to(null,c,S,$,f);break e;case 11:c=fi(null,c,S,$,f);break e;case 14:c=Si(null,c,S,ps(S.type,$),f);break e}throw Error(o(306,S,""))}return c;case 0:return S=c.type,M=c.pendingProps,M=c.elementType===S?M:ps(S,M),Ro($,c,S,M,f);case 1:return S=c.type,M=c.pendingProps,M=c.elementType===S?M:ps(S,M),to($,c,S,M,f);case 3:e:{if(fo(c),$===null)throw Error(o(387));S=c.pendingProps,L=c.memoizedState,M=L.element,Uh($,c),hi(c,S,null,f);var H=c.memoizedState;if(S=H.element,we&&L.isDehydrated)if(L={element:S,isDehydrated:!1,cache:H.cache,transitions:H.transitions},c.updateQueue.baseState=L,c.memoizedState=L,c.flags&256){M=Error(o(423)),c=Rd($,c,S,f,M);break e}else if(S!==M){M=Error(o(424)),c=Rd($,c,S,f,M);break e}else for(we&&(di=bt(c.stateNode.containerInfo),Ei=c,or=!0,Vo=null,$i=!1),f=fc(c,null,S,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(dc(),S===M){c=Pr($,c,f);break e}Yr($,c,S,f)}c=c.child}return c;case 5:return Fc(c),$===null&&Gh(c),S=c.type,M=c.pendingProps,L=$!==null?$.memoizedProps:null,H=M.children,xe(S,M)?H=null:L!==null&&xe(S,L)&&(c.flags|=32),Io($,c),Yr($,c,H,f),c.child;case 6:return $===null&&Gh(c),null;case 13:return pa($,c,f);case 4:return dl(c,c.stateNode.containerInfo),S=c.pendingProps,$===null?c.child=fh(c,null,S,f):Yr($,c,S,f),c.child;case 11:return S=c.type,M=c.pendingProps,M=c.elementType===S?M:ps(S,M),fi($,c,S,M,f);case 7:return Yr($,c,c.pendingProps,f),c.child;case 8:return Yr($,c,c.pendingProps.children,f),c.child;case 12:return Yr($,c,c.pendingProps.children,f),c.child;case 10:e:{if(S=c.type._context,M=c.pendingProps,L=c.memoizedProps,H=M.value,qs(c,S,H),L!==null)if(cr(L.value,H)){if(L.children===M.children&&!qn.current){c=Pr($,c,f);break e}}else for(L=c.child,L!==null&&(L.return=c);L!==null;){var re=L.dependencies;if(re!==null){H=L.child;for(var Se=re.firstContext;Se!==null;){if(Se.context===S){if(L.tag===1){Se=du(-1,f&-f),Se.tag=2;var We=L.updateQueue;if(We!==null){We=We.shared;var gt=We.pending;gt===null?Se.next=Se:(Se.next=gt.next,gt.next=Se),We.pending=Se}}L.lanes|=f,Se=L.alternate,Se!==null&&(Se.lanes|=f),ka(L.return,f,c),re.lanes|=f;break}Se=Se.next}}else if(L.tag===10)H=L.type===c.type?null:L.child;else if(L.tag===18){if(H=L.return,H===null)throw Error(o(341));H.lanes|=f,re=H.alternate,re!==null&&(re.lanes|=f),ka(H,f,c),H=L.sibling}else H=L.child;if(H!==null)H.return=L;else for(H=L;H!==null;){if(H===c){H=null;break}if(L=H.sibling,L!==null){L.return=H.return,H=L;break}H=H.return}L=H}Yr($,c,M.children,f),c=c.child}return c;case 9:return M=c.type,S=c.pendingProps.children,ci(c,f),M=Zr(M),S=S(M),c.flags|=1,Yr($,c,S,f),c.child;case 14:return S=c.type,M=ps(S,c.pendingProps),M=ps(S.type,M),Si($,c,S,M,f);case 15:return Mi($,c,c.type,c.pendingProps,f);case 17:return S=c.type,M=c.pendingProps,M=c.elementType===S?M:ps(S,M),$!==null&&($.alternate=null,c.alternate=null,c.flags|=2),c.tag=1,Gr(S)?($=!0,cc(c)):$=!1,ci(c,f),Bp(c,S,M),lp(c,S,M,f),Ec(null,c,S,!0,$,f);case 19:return cn($,c,f);case 22:return Tc($,c,f)}throw Error(o(156,c.tag))};function qc($,c){return al($,c)}function Zc($,c,f,S){this.tag=$,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function io($,c,f,S){return new Zc($,c,f,S)}function Ns($){return $=$.prototype,!(!$||!$.isReactComponent)}function Iu($){if(typeof $=="function")return Ns($)?1:0;if($!=null){if($=$.$$typeof,$===w)return 11;if($===O)return 14}return 2}function Tl($,c){var f=$.alternate;return f===null?(f=io($.tag,c,$.key,$.mode),f.elementType=$.elementType,f.type=$.type,f.stateNode=$.stateNode,f.alternate=$,$.alternate=f):(f.pendingProps=c,f.type=$.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=$.flags&14680064,f.childLanes=$.childLanes,f.lanes=$.lanes,f.child=$.child,f.memoizedProps=$.memoizedProps,f.memoizedState=$.memoizedState,f.updateQueue=$.updateQueue,c=$.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=$.sibling,f.index=$.index,f.ref=$.ref,f}function Ks($,c,f,S,M,L){var H=2;if(S=$,typeof $=="function")Ns($)&&(H=1);else if(typeof $=="string")H=5;else e:switch($){case p:return Ha(f.children,M,L,c);case m:H=8,M|=8;break;case _:return $=io(12,f,c,M|2),$.elementType=_,$.lanes=L,$;case x:return $=io(13,f,c,M),$.elementType=x,$.lanes=L,$;case A:return $=io(19,f,c,M),$.elementType=A,$.lanes=L,$;case D:return ya(f,M,L,c);default:if(typeof $=="object"&&$!==null)switch($.$$typeof){case v:H=10;break e;case E:H=9;break e;case w:H=11;break e;case O:H=14;break e;case k:H=16,S=null;break e}throw Error(o(130,$==null?$:typeof $,""))}return c=io(H,f,c,M),c.elementType=$,c.type=S,c.lanes=L,c}function Ha($,c,f,S){return $=io(7,$,S,c),$.lanes=f,$}function ya($,c,f,S){return $=io(22,$,S,c),$.elementType=D,$.lanes=f,$.stateNode={},$}function Vl($,c,f){return $=io(6,$,null,c),$.lanes=f,$}function ts($,c,f){return c=io(4,$.children!==null?$.children:[],$.key,c),c.lanes=f,c.stateNode={containerInfo:$.containerInfo,pendingChildren:null,implementation:$.implementation},c}function yo($,c,f,S,M){this.tag=c,this.containerInfo=$,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=et,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=il(0),this.expirationTimes=il(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=il(0),this.identifierPrefix=S,this.onRecoverableError=M,we&&(this.mutableSourceEagerHydrationData=null)}function Sh($,c,f,S,M,L,H,re,Se){return $=new yo($,c,f,re,Se),c===1?(c=1,L===!0&&(c|=8)):c=0,L=io(3,null,null,c),$.current=L,L.stateNode=$,L.memoizedState={element:S,isDehydrated:f,cache:null,transitions:null},Ti(L),$}function ed($){if(!$)return ir;$=$._reactInternals;e:{if(U($)!==$||$.tag!==1)throw Error(o(170));var c=$;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Gr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(o(171))}if($.tag===1){var f=$.type;if(Gr(f))return rl($,f,c)}return c}function Ga($){var c=$._reactInternals;if(c===void 0)throw typeof $.render=="function"?Error(o(188)):($=Object.keys($).join(","),Error(o(268,$)));return $=ie(c),$===null?null:$.stateNode}function jl($,c){if($=$.memoizedState,$!==null&&$.dehydrated!==null){var f=$.retryLane;$.retryLane=f!==0&&f<c?f:c}}function td($,c){jl($,c),($=$.alternate)&&jl($,c)}function xc($){return $=ie($),$===null?null:$.stateNode}function Hp(){return null}return e.attemptContinuousHydration=function($){if($.tag===13){var c=br();ys($,134217728,c),td($,134217728)}},e.attemptHydrationAtCurrentPriority=function($){if($.tag===13){var c=br(),f=ji($);ys($,f,c),td($,f)}},e.attemptSynchronousHydration=function($){switch($.tag){case 3:var c=$.stateNode;if(c.current.memoizedState.isDehydrated){var f=Zn(c.pendingLanes);f!==0&&(ol(c,f|1),Ls(c,bi()),!(wn&6)&&(_a(),Ho()))}break;case 13:var S=br();Ua(function(){return ys($,1,S)}),td($,1)}},e.batchedUpdates=function($,c){var f=wn;wn|=1;try{return $(c)}finally{wn=f,wn===0&&(_a(),As&&Ho())}},e.createComponentSelector=function($){return{$$typeof:ls,value:$}},e.createContainer=function($,c,f,S,M,L,H){return Sh($,c,!1,null,f,S,M,L,H)},e.createHasPseudoClassSelector=function($){return{$$typeof:Eu,value:$}},e.createHydrationContainer=function($,c,f,S,M,L,H,re,Se){return $=Sh(f,S,!0,$,M,L,H,re,Se),$.context=ed(null),f=$.current,S=br(),M=ji(f),L=du(S,M),L.callback=c??null,fs(f,L),$.current.lanes=M,ou($,M,S),Ls($,S),$},e.createPortal=function($,c,f){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:S==null?null:""+S,children:$,containerInfo:c,implementation:f}},e.createRoleSelector=function($){return{$$typeof:Ju,value:$}},e.createTestNameSelector=function($){return{$$typeof:mo,value:$}},e.createTextSelector=function($){return{$$typeof:Ba,value:$}},e.deferredUpdates=function($){var c=Yn,f=mi.transition;try{return mi.transition=null,Yn=16,$()}finally{Yn=c,mi.transition=f}},e.discreteUpdates=function($,c,f,S,M){var L=Yn,H=mi.transition;try{return mi.transition=null,Yn=1,$(c,f,S,M)}finally{Yn=L,mi.transition=H,wn===0&&_a()}},e.findAllNodes=Qu,e.findBoundingRects=function($,c){if(!Et)throw Error(o(363));c=Qu($,c),$=[];for(var f=0;f<c.length;f++)$.push(pt(c[f]));for(c=$.length-1;0<c;c--){f=$[c];for(var S=f.x,M=S+f.width,L=f.y,H=L+f.height,re=c-1;0<=re;re--)if(c!==re){var Se=$[re],We=Se.x,gt=We+Se.width,zt=Se.y,Zt=zt+Se.height;if(S>=We&&L>=zt&&M<=gt&&H<=Zt){$.splice(c,1);break}else if(S!==We||f.width!==Se.width||Zt<L||zt>H){if(!(L!==zt||f.height!==Se.height||gt<S||We>M)){We>S&&(Se.width+=We-S,Se.x=S),gt<M&&(Se.width=M-We),$.splice(c,1);break}}else{zt>L&&(Se.height+=zt-L,Se.y=L),Zt<H&&(Se.height=H-zt),$.splice(c,1);break}}}return $},e.findHostInstance=Ga,e.findHostInstanceWithNoPortals=function($){return $=ne($),$=$!==null?fe($):null,$===null?null:$.stateNode},e.findHostInstanceWithWarning=function($){return Ga($)},e.flushControlled=function($){var c=wn;wn|=1;var f=mi.transition,S=Yn;try{mi.transition=null,Yn=1,$()}finally{Yn=S,mi.transition=f,wn=c,wn===0&&(_a(),Ho())}},e.flushPassiveEffects=Jc,e.flushSync=Ua,e.focusWithin=function($,c){if(!Et)throw Error(o(363));for($=no($),c=Pa($,c),c=Array.from(c),$=0;$<c.length;){var f=c[$++];if(!Z(f)){if(f.tag===5&&lt(f.stateNode))return!0;for(f=f.child;f!==null;)c.push(f),f=f.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Yn},e.getFindAllNodesFailureDescription=function($,c){if(!Et)throw Error(o(363));var f=0,S=[];$=[no($),0];for(var M=0;M<$.length;){var L=$[M++],H=$[M++],re=c[H];if((L.tag!==5||!Z(L))&&(Vc(L,re)&&(S.push(Ws(re)),H++,H>f&&(f=H)),H<c.length))for(L=L.child;L!==null;)$.push(L,H),L=L.sibling}if(f<c.length){for($=[];f<c.length;f++)$.push(Ws(c[f]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+$.join(" > ")}return null},e.getPublicRootInstance=function($){if($=$.current,!$.child)return null;switch($.child.tag){case 5:return he($.child.stateNode);default:return $.child.stateNode}},e.injectIntoDevTools=function($){if($={bundleType:$.bundleType,version:$.version,rendererPackageName:$.rendererPackageName,rendererConfig:$.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:xc,findFiberByHostInstance:$.findFiberByHostInstance||Hp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")$=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)$=!0;else{try{au=c.inject($),Co=c}catch{}$=!!c.checkDCE}}return $},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function($,c,f,S){if(!Et)throw Error(o(363));$=Qu($,c);var M=mt($,f,S).disconnect;return{disconnect:function(){M()}}},e.registerMutableSourceForHydration=function($,c){var f=c._getVersion;f=f(c._source),$.mutableSourceEagerHydrationData==null?$.mutableSourceEagerHydrationData=[c,f]:$.mutableSourceEagerHydrationData.push(c,f)},e.runWithPriority=function($,c){var f=Yn;try{return Yn=$,c()}finally{Yn=f}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function($,c,f,S){var M=c.current,L=br(),H=ji(M);return f=ed(f),c.context===null?c.context=f:c.pendingContext=f,c=du(L,H),c.payload={element:$},S=S===void 0?null:S,S!==null&&(c.callback=S),fs(M,c),$=ys(M,H,L),$!==null&&ul($,M,H),H},e}),m4}(function(r){r.exports=v0e()})(Nj);const y0e=Lj(Nj.exports);function b0e(r,e,t=(i,s)=>i===s){if(r===e)return!0;if(!r||!e)return!1;const i=r.length;if(e.length!==i)return!1;for(let s=0;s<i;s++)if(!t(r[s],e[s]))return!1;return!0}const GC=[];function T0e(r,e,t=!1,i={}){for(const o of GC)if(b0e(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return o.response;if(!t)throw o.promise}const s={keys:e,equal:i.equal,promise:r(...e).then(o=>s.response=o).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const o=GC.indexOf(s);o!==-1&&GC.splice(o,1)},i.lifespan)}).catch(o=>s.error=o)};if(GC.push(s),!t)throw s.promise}const E0e=(r,e,t)=>T0e(r,e,!1,t);var uR={exports:{}},E$={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _4;function $0e(){if(_4)return E$;_4=1;var r=vr,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,p){var m,_={},v=null,E=null;p!==void 0&&(v=""+p),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(E=h.ref);for(m in h)i.call(h,m)&&!o.hasOwnProperty(m)&&(_[m]=h[m]);if(u&&u.defaultProps)for(m in h=u.defaultProps,h)_[m]===void 0&&(_[m]=h[m]);return{$$typeof:e,type:u,key:v,ref:E,props:_,_owner:s.current}}return E$.Fragment=t,E$.jsx=l,E$.jsxs=l,E$}(function(r){r.exports=$0e()})(uR);const xw=uR.exports.Fragment,Xt=uR.exports.jsx,uc=uR.exports.jsxs,bP={},S0e=r=>void Object.assign(bP,r);function w0e(r,e){function t(p,{args:m=[],attach:_,...v},E){let w=`${p[0].toUpperCase()}${p.slice(1)}`,x;if(p==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const A=v.object;x=OT(A,{type:p,root:E,attach:_,primitive:!0})}else{const A=bP[w];if(!A)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");x=OT(new A(...m),{type:p,root:E,attach:_,memoizedProps:{args:m}})}return x.__r3f.attach===void 0&&(x instanceof Ar?x.__r3f.attach="geometry":x instanceof Dc&&(x.__r3f.attach="material")),w!=="inject"&&XO(x,v),x}function i(p,m){let _=!1;if(m){var v,E;(v=m.__r3f)!=null&&v.attach?jO(p,m,m.__r3f.attach):m.isObject3D&&p.isObject3D&&(p.add(m),_=!0),_||(E=p.__r3f)==null||E.objects.push(m),m.__r3f||OT(m,{}),m.__r3f.parent=p,M2(m),LT(m)}}function s(p,m,_){let v=!1;if(m){var E,w;if((E=m.__r3f)!=null&&E.attach)jO(p,m,m.__r3f.attach);else if(m.isObject3D&&p.isObject3D){m.parent=p,m.dispatchEvent({type:"added"});const x=p.children.filter(O=>O!==m),A=x.indexOf(_);p.children=[...x.slice(0,A),m,...x.slice(A)],v=!0}v||(w=p.__r3f)==null||w.objects.push(m),m.__r3f||OT(m,{}),m.__r3f.parent=p,M2(m),LT(m)}}function o(p,m,_=!1){p&&[...p].forEach(v=>l(m,v,_))}function l(p,m,_){if(m){var v,E,w;if(m.__r3f&&(m.__r3f.parent=null),(v=p.__r3f)!=null&&v.objects&&(p.__r3f.objects=p.__r3f.objects.filter(D=>D!==m)),(E=m.__r3f)!=null&&E.attach)E4(p,m,m.__r3f.attach);else if(m.isObject3D&&p.isObject3D){var x;p.remove(m),(x=m.__r3f)!=null&&x.root&&k0e(m.__r3f.root,m)}const O=(w=m.__r3f)==null?void 0:w.primitive,k=_===void 0?m.dispose!==null&&!O:_;if(!O){var A;o((A=m.__r3f)==null?void 0:A.objects,m,k),o(m.children,m,k)}m.__r3f&&(delete m.__r3f.root,delete m.__r3f.objects,delete m.__r3f.handlers,delete m.__r3f.memoizedProps,O||delete m.__r3f),k&&m.dispose&&m.type!=="Scene"&&MA.exports.unstable_scheduleCallback(MA.exports.unstable_IdlePriority,()=>{try{m.dispose()}catch{}}),LT(p)}}function u(p,m,_,v){var E;const w=(E=p.__r3f)==null?void 0:E.parent;if(!w)return;const x=t(m,_,p.__r3f.root);if(p.children){for(const A of p.children)A.__r3f&&i(x,A);p.children=p.children.filter(A=>!A.__r3f)}p.__r3f.objects.forEach(A=>i(x,A)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||l(w,p),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(w,x),x.raycast&&x.__r3f.eventCount&&x.__r3f.root.getState().internal.interaction.push(x),[v,v.alternate].forEach(A=>{A!==null&&(A.stateNode=x,A.ref&&(typeof A.ref=="function"?A.ref(x):A.ref.current=x))})}const h=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:y0e({createInstance:t,removeChild:l,appendChild:i,appendInitialChild:i,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,m)=>{if(!m)return;const _=p.getState().scene;!_.__r3f||(_.__r3f.root=p,i(_,m))},removeChildFromContainer:(p,m)=>{!m||l(p.getState().scene,m)},insertInContainerBefore:(p,m,_)=>{if(!m||!_)return;const v=p.getState().scene;!v.__r3f||s(v,m,_)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var m;return!!((m=p==null?void 0:p.__r3f)!=null?m:{}).handlers},prepareUpdate(p,m,_,v){if(p.__r3f.primitive&&v.object&&v.object!==p)return[!0];{const{args:E=[],children:w,...x}=v,{args:A=[],children:O,...k}=_;if(!Array.isArray(E))throw new Error("R3F: the args prop must be an array!");if(E.some((N,F)=>N!==A[F]))return[!0];const D=Hj(p,x,k,!0);return D.changes.length?[!1,D]:null}},commitUpdate(p,[m,_],v,E,w,x){m?u(p,v,w,x):XO(p,_)},commitMount(p,m,_,v){var E;const w=(E=p.__r3f)!=null?E:{};p.raycast&&w.handlers&&w.eventCount&&p.__r3f.root.getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>OT(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var m;const{attach:_,parent:v}=(m=p.__r3f)!=null?m:{};_&&v&&E4(v,p,_),p.isObject3D&&(p.visible=!1),LT(p)},unhideInstance(p,m){var _;const{attach:v,parent:E}=(_=p.__r3f)!=null?_:{};v&&E&&jO(E,p,v),(p.isObject3D&&m.visible==null||m.visible)&&(p.visible=!0),LT(p)},createTextInstance:h,hideTextInstance:h,unhideTextInstance:h,getCurrentEventPriority:()=>e?e():Dy.exports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&qa.fun(performance.now)?performance.now:qa.fun(Date.now)?Date.now:()=>0,scheduleTimeout:qa.fun(setTimeout)?setTimeout:void 0,cancelTimeout:qa.fun(clearTimeout)?clearTimeout:void 0}),applyProps:XO}}var v4,y4;const Dj=()=>{var r;return(r=bP.ColorManagement)!=null?r:null},Bj=r=>r&&r.isOrthographicCamera,x0e=r=>r&&r.hasOwnProperty("current"),Cw=typeof window<"u"&&((v4=window.document)!=null&&v4.createElement||((y4=window.navigator)==null?void 0:y4.product)==="ReactNative")?de.useLayoutEffect:de.useEffect;function Pj(r){const e=de.useRef(r);return Cw(()=>void(e.current=r),[r]),e}function C0e({set:r}){return Cw(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}class Fj extends de.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Fj.getDerivedStateFromError=()=>({error:!0});const Uj="__default",b4=new Map,M0e=r=>r&&!!r.memoized&&!!r.changes;function zj(r){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(r)?Math.min(Math.max(r[0],e),r[1]):r}const $$=r=>{var e;return(e=r.__r3f)==null?void 0:e.root.getState()},qa={obj:r=>r===Object(r)&&!qa.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(qa.str(r)||qa.num(r))return r===e;const o=qa.obj(r);if(o&&i==="reference")return r===e;const l=qa.arr(r);if(l&&t==="reference")return r===e;if((l||o)&&r===e)return!0;let u;for(u in r)if(!(u in e))return!1;if(o&&t==="shallow"&&i==="shallow"){for(u in s?e:r)if(!qa.equ(r[u],e[u],{strict:s,objects:"reference"}))return!1}else for(u in s?e:r)if(r[u]!==e[u])return!1;if(qa.und(u)){if(l&&r.length===0&&e.length===0||o&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function A0e(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(const e in r)e.dispose==null||e.dispose(),delete r[e]}function OT(r,e){const t=r;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),r}function C2(r,e){let t=r;if(e.includes("-")){const i=e.split("-"),s=i.pop();return t=i.reduce((o,l)=>o[l],r),{target:t,key:s}}else return{target:t,key:e}}const T4=/-\d+$/;function jO(r,e,t){if(qa.str(t)){if(T4.test(t)){const o=t.replace(T4,""),{target:l,key:u}=C2(r,o);Array.isArray(l[u])||(l[u]=[])}const{target:i,key:s}=C2(r,t);e.__r3f.previousAttach=i[s],i[s]=e}else e.__r3f.previousAttach=t(r,e)}function E4(r,e,t){var i,s;if(qa.str(t)){const{target:o,key:l}=C2(r,t),u=e.__r3f.previousAttach;u===void 0?delete o[l]:o[l]=u}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(r,e);(s=e.__r3f)==null||delete s.previousAttach}function Hj(r,{children:e,key:t,ref:i,...s},{children:o,key:l,ref:u,...h}={},p=!1){var m;const _=(m=r==null?void 0:r.__r3f)!=null?m:{},v=Object.entries(s),E=[];if(p){const x=Object.keys(h);for(let A=0;A<x.length;A++)s.hasOwnProperty(x[A])||v.unshift([x[A],Uj+"remove"])}v.forEach(([x,A])=>{var O;if((O=r.__r3f)!=null&&O.primitive&&x==="object"||qa.equ(A,h[x]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(x))return E.push([x,A,!0,[]]);let k=[];x.includes("-")&&(k=x.split("-")),E.push([x,A,!1,k]);for(const D in s){const N=s[D];D.startsWith(`${x}-`)&&E.push([D,N,!1,D.split("-")])}});const w={...s};return _.memoizedProps&&_.memoizedProps.args&&(w.args=_.memoizedProps.args),_.memoizedProps&&_.memoizedProps.attach&&(w.attach=_.memoizedProps.attach),{memoized:w,changes:E}}function XO(r,e){var t,i,s;const o=(t=r.__r3f)!=null?t:{},l=o.root,u=(i=l==null||l.getState==null?void 0:l.getState())!=null?i:{},{memoized:h,changes:p}=M0e(e)?e:Hj(r,e),m=o.eventCount;r.__r3f&&(r.__r3f.memoizedProps=h);for(let _=0;_<p.length;_++){let[v,E,w,x]=p[_],A=r,O=A[v];if(x.length&&(O=x.reduce((k,D)=>k[D],r),!(O&&O.set))){const[k,...D]=x.reverse();A=D.reverse().reduce((N,F)=>N[F],r),v=k}if(E===Uj+"remove")if(A.constructor){let k=b4.get(A.constructor);k||(k=new A.constructor,b4.set(A.constructor,k)),E=k[v]}else E=0;if(w)E?o.handlers[v]=E:delete o.handlers[v],o.eventCount=Object.keys(o.handlers).length;else if(O&&O.set&&(O.copy||O instanceof Gy)){if(Array.isArray(E))O.fromArray?O.fromArray(E):O.set(...E);else if(O.copy&&E&&E.constructor&&O.constructor===E.constructor)O.copy(E);else if(E!==void 0){const k=O instanceof _n;!k&&O.setScalar?O.setScalar(E):O instanceof Gy&&E instanceof Gy?O.mask=E.mask:O.set(E),!Dj()&&!u.linear&&k&&O.convertSRGBToLinear()}}else A[v]=E,!u.linear&&A[v]instanceof Rl&&A[v].format===Rp&&A[v].type===Fh&&(A[v].encoding=yi);LT(r)}if(o.parent&&u.internal&&r.raycast&&m!==o.eventCount){const _=u.internal.interaction.indexOf(r);_>-1&&u.internal.interaction.splice(_,1),o.eventCount&&u.internal.interaction.push(r)}return!(p.length===1&&p[0][0]==="onUpdate")&&p.length&&(s=r.__r3f)!=null&&s.parent&&M2(r),r}function LT(r){var e,t;const i=(e=r.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function M2(r){r.onUpdate==null||r.onUpdate(r)}function I0e(r,e){r.manual||(Bj(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix(),r.updateMatrixWorld())}function WC(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function R0e(){var r;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Dy.exports.DefaultEventPriority;switch((r=e.event)==null?void 0:r.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Dy.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Dy.exports.ContinuousEventPriority;default:return Dy.exports.DefaultEventPriority}}function Gj(r,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(r.delete(i),s.target.releasePointerCapture(i)))}function k0e(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{Gj(t.capturedMap,e,i,s)})}function O0e(r){function e(h){const{internal:p}=r.getState(),m=h.offsetX-p.initialClick[0],_=h.offsetY-p.initialClick[1];return Math.round(Math.sqrt(m*m+_*_))}function t(h){return h.filter(p=>["Move","Over","Enter","Out","Leave"].some(m=>{var _;return(_=p.__r3f)==null?void 0:_.handlers["onPointer"+m]}))}function i(h,p){const m=r.getState(),_=new Set,v=[],E=p?p(m.internal.interaction):m.internal.interaction;for(let O=0;O<E.length;O++){const k=$$(E[O]);k&&(k.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(h,m);function w(O){const k=$$(O);if(!k||!k.events.enabled||k.raycaster.camera===null)return[];if(k.raycaster.camera===void 0){var D;k.events.compute==null||k.events.compute(h,k,(D=k.previousRoot)==null?void 0:D.getState()),k.raycaster.camera===void 0&&(k.raycaster.camera=null)}return k.raycaster.camera?k.raycaster.intersectObject(O,!0):[]}let x=E.flatMap(w).sort((O,k)=>{const D=$$(O.object),N=$$(k.object);return!D||!N?O.distance-k.distance:N.events.priority-D.events.priority||O.distance-k.distance}).filter(O=>{const k=WC(O);return _.has(k)?!1:(_.add(k),!0)});m.events.filter&&(x=m.events.filter(x,m));for(const O of x){let k=O.object;for(;k;){var A;(A=k.__r3f)!=null&&A.eventCount&&v.push({...O,eventObject:k}),k=k.parent}}if("pointerId"in h&&m.internal.capturedMap.has(h.pointerId))for(let O of m.internal.capturedMap.get(h.pointerId).values())_.has(WC(O.intersection))||v.push(O.intersection);return v}function s(h,p,m,_){const v=r.getState();if(h.length){const E={stopped:!1};for(const w of h){const x=$$(w.object)||v,{raycaster:A,pointer:O,camera:k,internal:D}=x,N=new Te(O.x,O.y,0).unproject(k),F=ne=>{var ie,se;return(ie=(se=D.capturedMap.get(ne))==null?void 0:se.has(w.eventObject))!=null?ie:!1},z=ne=>{const ie={intersection:w,target:p.target};D.capturedMap.has(ne)?D.capturedMap.get(ne).set(w.eventObject,ie):D.capturedMap.set(ne,new Map([[w.eventObject,ie]])),p.target.setPointerCapture(ne)},V=ne=>{const ie=D.capturedMap.get(ne);ie&&Gj(D.capturedMap,w.eventObject,ie,ne)};let U={};for(let ne in p){let ie=p[ne];typeof ie!="function"&&(U[ne]=ie)}let ee={...w,...U,pointer:O,intersections:h,stopped:E.stopped,delta:m,unprojectedPoint:N,ray:A.ray,camera:k,stopPropagation(){const ne="pointerId"in p&&D.capturedMap.get(p.pointerId);if((!ne||ne.has(w.eventObject))&&(ee.stopped=E.stopped=!0,D.hovered.size&&Array.from(D.hovered.values()).find(ie=>ie.eventObject===w.eventObject))){const ie=h.slice(0,h.indexOf(w));o([...ie,w])}},target:{hasPointerCapture:F,setPointerCapture:z,releasePointerCapture:V},currentTarget:{hasPointerCapture:F,setPointerCapture:z,releasePointerCapture:V},nativeEvent:p};if(_(ee),E.stopped===!0)break}}return h}function o(h){const{internal:p}=r.getState();for(const m of p.hovered.values())if(!h.length||!h.find(_=>_.object===m.object&&_.index===m.index&&_.instanceId===m.instanceId)){const _=m.eventObject.__r3f,v=_==null?void 0:_.handlers;if(p.hovered.delete(WC(m)),_!=null&&_.eventCount){const E={...m,intersections:h};v.onPointerOut==null||v.onPointerOut(E),v.onPointerLeave==null||v.onPointerLeave(E)}}}function l(h,p){for(let m=0;m<p.length;m++){const _=p[m].__r3f;_==null||_.handlers.onPointerMissed==null||_.handlers.onPointerMissed(h)}}function u(h){switch(h){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return p=>{const{internal:m}=r.getState();"pointerId"in p&&m.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(p.pointerId)&&(m.capturedMap.delete(p.pointerId),o([]))})}}return function(p){const{onPointerMissed:m,internal:_}=r.getState();_.lastEvent.current=p;const v=h==="onPointerMove",E=h==="onClick"||h==="onContextMenu"||h==="onDoubleClick",w=i(p,v?t:void 0),x=E?e(p):0;h==="onPointerDown"&&(_.initialClick=[p.offsetX,p.offsetY],_.initialHits=w.map(O=>O.eventObject)),E&&!w.length&&x<=2&&(l(p,_.interaction),m&&m(p)),v&&o(w);function A(O){const k=O.eventObject,D=k.__r3f,N=D==null?void 0:D.handlers;if(D!=null&&D.eventCount)if(v){if(N.onPointerOver||N.onPointerEnter||N.onPointerOut||N.onPointerLeave){const F=WC(O),z=_.hovered.get(F);z?z.stopped&&O.stopPropagation():(_.hovered.set(F,O),N.onPointerOver==null||N.onPointerOver(O),N.onPointerEnter==null||N.onPointerEnter(O))}N.onPointerMove==null||N.onPointerMove(O)}else{const F=N[h];F?(!E||_.initialHits.includes(k))&&(l(p,_.interaction.filter(z=>!_.initialHits.includes(z))),F(O)):E&&_.initialHits.includes(k)&&l(p,_.interaction.filter(z=>!_.initialHits.includes(z)))}}s(w,p,x,A)}}return{handlePointer:u}}const Wj=r=>!!(r!=null&&r.render),Vj=de.createContext(null),L0e=(r,e)=>{const t=g0e((u,h)=>{const p=new Te,m=new Te,_=new Te;function v(A=h().camera,O=m,k=h().size){const{width:D,height:N,top:F,left:z}=k,V=D/N;O instanceof Te?_.copy(O):_.set(...O);const U=A.getWorldPosition(p).distanceTo(_);if(Bj(A))return{width:D/A.zoom,height:N/A.zoom,top:F,left:z,factor:1,distance:U,aspect:V};{const ee=A.fov*Math.PI/180,ne=2*Math.tan(ee/2)*U,ie=ne*(D/N);return{width:ie,height:ne,top:F,left:z,factor:D/ie,distance:U,aspect:V}}}let E;const w=A=>u(O=>({performance:{...O.performance,current:A}})),x=new Ot;return{set:u,get:h,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(A=1)=>r(h(),A),advance:(A,O)=>e(A,O,h()),legacy:!1,linear:!1,flat:!1,scene:OT(new VS),controls:null,clock:new mP,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const A=h();E&&clearTimeout(E),A.performance.current!==A.performance.min&&w(A.performance.min),E=setTimeout(()=>w(h().performance.max),A.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:A=>u(O=>({...O,events:{...O.events,...A}})),setSize:(A,O,k,D,N)=>{const F=h().camera,z={width:A,height:O,top:D||0,left:N||0,updateStyle:k};u(V=>({size:z,viewport:{...V.viewport,...v(F,m,z)}}))},setDpr:A=>u(O=>{const k=zj(A);return{viewport:{...O.viewport,dpr:k,initialDpr:O.viewport.initialDpr||k}}}),setFrameloop:(A="always")=>{const O=h().clock;O.stop(),O.elapsedTime=0,A!=="never"&&(O.start(),O.elapsedTime=0),u(()=>({frameloop:A}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:de.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(A,O,k)=>{const D=h().internal;return D.priority=D.priority+(O>0?1:0),D.subscribers.push({ref:A,priority:O,store:k}),D.subscribers=D.subscribers.sort((N,F)=>N.priority-F.priority),()=>{const N=h().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(O>0?1:0),N.subscribers=N.subscribers.filter(F=>F.ref!==A))}}}}}),i=t.getState();let s=i.size,o=i.viewport.dpr,l=i.camera;return t.subscribe(()=>{const{camera:u,size:h,viewport:p,gl:m,set:_}=t.getState();if(h!==s||p.dpr!==o){var v;s=h,o=p.dpr,I0e(u,h),m.setPixelRatio(p.dpr);const E=(v=h.updateStyle)!=null?v:typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(h.width,h.height,E)}u!==l&&(l=u,_(E=>({viewport:{...E.viewport,...E.viewport.getCurrentViewport(u)}})))}),t.subscribe(u=>r(u)),t};let VC,N0e=new Set,D0e=new Set,B0e=new Set;function YO(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function S$(r,e){switch(r){case"before":return YO(N0e,e);case"after":return YO(D0e,e);case"tail":return YO(B0e,e)}}let KO,JO;function QO(r,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof r=="number"&&(i=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),KO=e.internal.subscribers,VC=0;VC<KO.length;VC++)JO=KO[VC],JO.ref.current(JO.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function P0e(r){let e=!1,t,i,s;function o(h){i=requestAnimationFrame(o),e=!0,t=0,S$("before",h);for(const m of r.values()){var p;s=m.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((p=s.gl.xr)!=null&&p.isPresenting)&&(t+=QO(h,s))}if(S$("after",h),t===0)return S$("tail",h),e=!1,cancelAnimationFrame(i)}function l(h,p=1){var m;if(!h)return r.forEach(_=>l(_.store.getState()),p);(m=h.gl.xr)!=null&&m.isPresenting||!h.internal.active||h.frameloop==="never"||(h.internal.frames=Math.min(60,h.internal.frames+p),e||(e=!0,requestAnimationFrame(o)))}function u(h,p=!0,m,_){if(p&&S$("before",h),m)QO(h,m,_);else for(const v of r.values())QO(h,v.store.getState());p&&S$("after",h)}return{loop:o,invalidate:l,advance:u}}function jj(){const r=de.useContext(Vj);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Nh(r=t=>t,e){return jj()(r,e)}function Af(r,e=0){const t=jj(),i=t.getState().internal.subscribe,s=Pj(r);return Cw(()=>i(s,e,t),[e,i,t]),null}const P1=new Map,{invalidate:$4,advance:S4}=P0e(P1),{reconciler:AA,applyProps:jC}=w0e(P1,R0e),AT={objects:"shallow",strict:!1},F0e=(r,e)=>{const t=typeof r=="function"?r(e):r;return Wj(t)?t:new QB({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...r})};function U0e(r,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:t,height:i,top:s,left:o}=r.parentElement.getBoundingClientRect();return{width:t,height:i,top:s,left:o}}else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function z0e(r){const e=P1.get(r),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,o=i||L0e($4,S4),l=t||AA.createContainer(o,Dy.exports.ConcurrentRoot,null,!1,null,"",s,null);e||P1.set(r,{fiber:l,store:o});let u,h=!1,p;return{configure(m={}){let{gl:_,size:v,events:E,onCreated:w,shadows:x=!1,linear:A=!1,flat:O=!1,legacy:k=!1,orthographic:D=!1,frameloop:N="always",dpr:F=[1,2],performance:z,raycaster:V,camera:U,onPointerMissed:ee}=m,ne=o.getState(),ie=ne.gl;ne.gl||ne.set({gl:ie=F0e(_,r)});let se=ne.raycaster;se||ne.set({raycaster:se=new vP});const{params:fe,...ae}=V||{};if(qa.equ(ae,se,AT)||jC(se,{...ae}),qa.equ(fe,se.params,AT)||jC(se,{params:{...se.params,...fe}}),!ne.camera||ne.camera===p&&!qa.equ(p,U,AT)){p=U;const q=U instanceof eE,le=q?U:D?new jg(0,0,0,0,.1,1e3):new So(75,0,.1,1e3);q||(le.position.z=5,U&&jC(le,U),!ne.camera&&!(U!=null&&U.rotation)&&le.lookAt(0,0,0)),ne.set({camera:le})}if(!ne.xr){const q=(Le,xe)=>{const Ve=o.getState();Ve.frameloop!=="never"&&S4(Le,!0,Ve,xe)},le=()=>{const Le=o.getState();Le.gl.xr.enabled=Le.gl.xr.isPresenting,Le.gl.xr.setAnimationLoop(Le.gl.xr.isPresenting?q:null),Le.gl.xr.isPresenting||$4(Le)},_e={connect(){const Le=o.getState().gl;Le.xr.addEventListener("sessionstart",le),Le.xr.addEventListener("sessionend",le)},disconnect(){const Le=o.getState().gl;Le.xr.removeEventListener("sessionstart",le),Le.xr.removeEventListener("sessionend",le)}};ie.xr&&_e.connect(),ne.set({xr:_e})}if(ie.shadowMap){const q=ie.shadowMap.enabled,le=ie.shadowMap.type;if(ie.shadowMap.enabled=!!x,qa.boo(x))ie.shadowMap.type=nS;else if(qa.str(x)){var he;const _e={basic:U8,percentage:GI,soft:nS,variance:Ry};ie.shadowMap.type=(he=_e[x])!=null?he:nS}else qa.obj(x)&&Object.assign(ie.shadowMap,x);(q!==ie.shadowMap.enabled||le!==ie.shadowMap.type)&&(ie.shadowMap.needsUpdate=!0)}const ge=Dj();ge&&("enabled"in ge?ge.enabled=!k:"legacyMode"in ge&&(ge.legacyMode=k));const Ie=A?mm:yi,j=O?og:zB;ie.outputEncoding!==Ie&&(ie.outputEncoding=Ie),ie.toneMapping!==j&&(ie.toneMapping=j),ne.legacy!==k&&ne.set(()=>({legacy:k})),ne.linear!==A&&ne.set(()=>({linear:A})),ne.flat!==O&&ne.set(()=>({flat:O})),_&&!qa.fun(_)&&!Wj(_)&&!qa.equ(_,ie,AT)&&jC(ie,_),E&&!ne.events.handlers&&ne.set({events:E(o)});const te=U0e(r,v);return qa.equ(te,ne.size,AT)||ne.setSize(te.width,te.height,te.updateStyle,te.top,te.left),F&&ne.viewport.dpr!==zj(F)&&ne.setDpr(F),ne.frameloop!==N&&ne.setFrameloop(N),ne.onPointerMissed||ne.set({onPointerMissed:ee}),z&&!qa.equ(z,ne.performance,AT)&&ne.set(q=>({performance:{...q.performance,...z}})),u=w,h=!0,this},render(m){return h||this.configure(),AA.updateContainer(Xt(H0e,{store:o,children:m,onCreated:u,rootElement:r}),l,null,()=>{}),o},unmount(){Xj(r)}}}function H0e({store:r,children:e,onCreated:t,rootElement:i}){return Cw(()=>{const s=r.getState();s.set(o=>({internal:{...o.internal,active:!0}})),t&&t(s),r.getState().events.connected||s.events.connect==null||s.events.connect(i)},[]),de.createElement(Vj.Provider,{value:r},e)}function Xj(r,e){const t=P1.get(r),i=t==null?void 0:t.fiber;if(i){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),AA.updateContainer(null,i,null,()=>{s&&setTimeout(()=>{try{var o,l,u,h;s.events.disconnect==null||s.events.disconnect(),(o=s.gl)==null||(l=o.renderLists)==null||l.dispose==null||l.dispose(),(u=s.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(h=s.gl)!=null&&h.xr&&s.xr.disconnect(),A0e(s),P1.delete(r),e&&e(r)}catch{}},500)})}}AA.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:de.version});function A2(){return A2=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},A2.apply(this,arguments)}function I2(r,e,t){var i,s,o,l,u;e==null&&(e=100);function h(){var m=Date.now()-l;m<e&&m>=0?i=setTimeout(h,e-m):(i=null,t||(u=r.apply(o,s),o=s=null))}var p=function(){o=this,s=arguments,l=Date.now();var m=t&&!i;return i||(i=setTimeout(h,e)),m&&(u=r.apply(o,s),o=s=null),u};return p.clear=function(){i&&(clearTimeout(i),i=null)},p.flush=function(){i&&(u=r.apply(o,s),o=s=null,clearTimeout(i),i=null)},p}I2.debounce=I2;var w4=I2;function G0e(r){let{debounce:e,scroll:t,polyfill:i,offsetSize:s}=r===void 0?{debounce:0,scroll:!1,offsetSize:!1}:r;const o=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[l,u]=de.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),h=de.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l}),p=e?typeof e=="number"?e:e.scroll:null,m=e?typeof e=="number"?e:e.resize:null,_=de.useRef(!1);de.useEffect(()=>(_.current=!0,()=>void(_.current=!1)));const[v,E,w]=de.useMemo(()=>{const k=()=>{if(!h.current.element)return;const{left:D,top:N,width:F,height:z,bottom:V,right:U,x:ee,y:ne}=h.current.element.getBoundingClientRect(),ie={left:D,top:N,width:F,height:z,bottom:V,right:U,x:ee,y:ne};h.current.element instanceof HTMLElement&&s&&(ie.height=h.current.element.offsetHeight,ie.width=h.current.element.offsetWidth),Object.freeze(ie),_.current&&!X0e(h.current.lastBounds,ie)&&u(h.current.lastBounds=ie)};return[k,m?w4(k,m):k,p?w4(k,p):k]},[u,s,p,m]);function x(){h.current.scrollContainers&&(h.current.scrollContainers.forEach(k=>k.removeEventListener("scroll",w,!0)),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null)}function A(){!h.current.element||(h.current.resizeObserver=new o(w),h.current.resizeObserver.observe(h.current.element),t&&h.current.scrollContainers&&h.current.scrollContainers.forEach(k=>k.addEventListener("scroll",w,{capture:!0,passive:!0})))}const O=k=>{!k||k===h.current.element||(x(),h.current.element=k,h.current.scrollContainers=Yj(k),A())};return V0e(w,!!t),W0e(E),de.useEffect(()=>{x(),A()},[t,w,E]),de.useEffect(()=>x,[]),[O,l,v]}function W0e(r){de.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function V0e(r,e){de.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function Yj(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:i,overflowY:s}=window.getComputedStyle(r);return[t,i,s].some(o=>o==="auto"||o==="scroll")&&e.push(r),[...e,...Yj(r.parentElement)]}const j0e=["x","y","top","bottom","left","right","width","height"],X0e=(r,e)=>j0e.every(t=>r[t]===e[t]);var Y0e=Object.defineProperty,K0e=Object.defineProperties,J0e=Object.getOwnPropertyDescriptors,x4=Object.getOwnPropertySymbols,Q0e=Object.prototype.hasOwnProperty,q0e=Object.prototype.propertyIsEnumerable,C4=(r,e,t)=>e in r?Y0e(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,M4=(r,e)=>{for(var t in e||(e={}))Q0e.call(e,t)&&C4(r,t,e[t]);if(x4)for(var t of x4(e))q0e.call(e,t)&&C4(r,t,e[t]);return r},Z0e=(r,e)=>K0e(r,J0e(e)),A4;function Kj(r,e,t){if(!r)return;if(t(r)===!0)return r;let i=e?r.return:r.child;for(;i;){const s=Kj(i,e,t);if(s)return s;i=e?null:i.sibling}}function Jj(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const TP=Jj(de.createContext(null));class Qj extends de.Component{render(){return Xt(TP.Provider,{value:this._reactInternals,children:this.props.children})}}const{ReactCurrentOwner:I4,ReactCurrentDispatcher:R4}=(A4=de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)!=null?A4:{};function eve(){const r=de.useContext(TP),e=de.useId();return de.useMemo(()=>{var t;return(t=I4==null?void 0:I4.current)!=null?t:Kj(r,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[r,e])}function tve(){var r,e;const t=eve(),[i]=de.useState(()=>new Map);i.clear();let s=t;for(;s;){const o=(r=s.type)==null?void 0:r._context;o&&o!==TP&&!i.has(o)&&i.set(o,(e=R4==null?void 0:R4.current)==null?void 0:e.readContext(Jj(o))),s=s.return}return de.useMemo(()=>Array.from(i.keys()).reduce((o,l)=>u=>de.createElement(o,null,de.createElement(l.Provider,Z0e(M4({},u),{value:i.get(l)}))),o=>Xt(Qj,{...M4({},o)})),[i])}const qO={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function nve(r){const{handlePointer:e}=O0e(r);return{priority:1,enabled:!0,compute(t,i,s){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(qO).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:s}=r.getState();(t=s.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{var i;const{set:s,events:o}=r.getState();o.disconnect==null||o.disconnect(),s(l=>({events:{...l.events,connected:t}})),Object.entries((i=o.handlers)!=null?i:[]).forEach(([l,u])=>{const[h,p]=qO[l];t.addEventListener(h,u,{passive:p})})},disconnect:()=>{const{set:t,events:i}=r.getState();if(i.connected){var s;Object.entries((s=i.handlers)!=null?s:[]).forEach(([o,l])=>{if(i&&i.connected instanceof HTMLElement){const[u]=qO[o];i.connected.removeEventListener(u,l)}}),t(o=>({events:{...o.events,connected:void 0}}))}}}}const rve=de.forwardRef(function({children:r,fallback:e,resize:t,style:i,gl:s,events:o=nve,eventSource:l,eventPrefix:u,shadows:h,linear:p,flat:m,legacy:_,orthographic:v,frameloop:E,dpr:w,performance:x,raycaster:A,camera:O,onPointerMissed:k,onCreated:D,...N},F){de.useMemo(()=>S0e(d0e),[]);const z=tve(),[V,U]=G0e({scroll:!0,debounce:{scroll:50,resize:0},...t}),ee=de.useRef(null),ne=de.useRef(null);de.useImperativeHandle(F,()=>ee.current);const ie=Pj(k),[se,fe]=de.useState(!1),[ae,he]=de.useState(!1);if(se)throw se;if(ae)throw ae;const ge=de.useRef(null);return Cw(()=>{const Ie=ee.current;U.width>0&&U.height>0&&Ie&&(ge.current||(ge.current=z0e(Ie)),ge.current.configure({gl:s,events:o,shadows:h,linear:p,flat:m,legacy:_,orthographic:v,frameloop:E,dpr:w,performance:x,raycaster:A,camera:O,size:U,onPointerMissed:(...j)=>ie.current==null?void 0:ie.current(...j),onCreated:j=>{j.events.connect==null||j.events.connect(l?x0e(l)?l.current:l:ne.current),u&&j.setEvents({compute:(te,q)=>{const le=te[u+"X"],_e=te[u+"Y"];q.pointer.set(le/q.size.width*2-1,-(_e/q.size.height)*2+1),q.raycaster.setFromCamera(q.pointer,q.camera)}}),D==null||D(j)}}),ge.current.render(Xt(z,{children:Xt(Fj,{set:he,children:Xt(de.Suspense,{fallback:Xt(C0e,{set:fe}),children:r})})})))}),de.useEffect(()=>{const Ie=ee.current;if(Ie)return()=>Xj(Ie)},[]),Xt("div",{ref:ne,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:l?"none":"auto",...i},...N,children:Xt("div",{ref:V,style:{width:"100%",height:"100%"},children:Xt("canvas",{ref:ee,style:{display:"block"},children:e})})})}),ive=de.forwardRef(function(r,e){return Xt(Qj,{children:Xt(rve,{...r,ref:e})})});var qj={exports:{}},wp={},k4={exports:{}},O4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L4;function sve(){return L4||(L4=1,function(r){function e(j,te){var q=j.length;j.push(te);e:for(;0<q;){var le=q-1>>>1,_e=j[le];if(0<s(_e,te))j[le]=te,j[q]=_e,q=le;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var te=j[0],q=j.pop();if(q!==te){j[0]=q;e:for(var le=0,_e=j.length,Le=_e>>>1;le<Le;){var xe=2*(le+1)-1,Ve=j[xe],Re=xe+1,Ze=j[Re];if(0>s(Ve,q))Re<_e&&0>s(Ze,Ve)?(j[le]=Ze,j[Re]=q,le=Re):(j[le]=Ve,j[xe]=q,le=xe);else if(Re<_e&&0>s(Ze,q))j[le]=Ze,j[Re]=q,le=Re;else break e}}return te}function s(j,te){var q=j.sortIndex-te.sortIndex;return q!==0?q:j.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();r.unstable_now=function(){return l.now()-u}}var h=[],p=[],m=1,_=null,v=3,E=!1,w=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(j){for(var te=t(p);te!==null;){if(te.callback===null)i(p);else if(te.startTime<=j)i(p),te.sortIndex=te.expirationTime,e(h,te);else break;te=t(p)}}function N(j){if(x=!1,D(j),!w)if(t(h)!==null)w=!0,ge(F);else{var te=t(p);te!==null&&Ie(N,te.startTime-j)}}function F(j,te){w=!1,x&&(x=!1,O(U),U=-1),E=!0;var q=v;try{for(D(te),_=t(h);_!==null&&(!(_.expirationTime>te)||j&&!ie());){var le=_.callback;if(typeof le=="function"){_.callback=null,v=_.priorityLevel;var _e=le(_.expirationTime<=te);te=r.unstable_now(),typeof _e=="function"?_.callback=_e:_===t(h)&&i(h),D(te)}else i(h);_=t(h)}if(_!==null)var Le=!0;else{var xe=t(p);xe!==null&&Ie(N,xe.startTime-te),Le=!1}return Le}finally{_=null,v=q,E=!1}}var z=!1,V=null,U=-1,ee=5,ne=-1;function ie(){return!(r.unstable_now()-ne<ee)}function se(){if(V!==null){var j=r.unstable_now();ne=j;var te=!0;try{te=V(!0,j)}finally{te?fe():(z=!1,V=null)}}else z=!1}var fe;if(typeof k=="function")fe=function(){k(se)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,he=ae.port2;ae.port1.onmessage=se,fe=function(){he.postMessage(null)}}else fe=function(){A(se,0)};function ge(j){V=j,z||(z=!0,fe())}function Ie(j,te){U=A(function(){j(r.unstable_now())},te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(j){j.callback=null},r.unstable_continueExecution=function(){w||E||(w=!0,ge(F))},r.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<j?Math.floor(1e3/j):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(j){switch(v){case 1:case 2:case 3:var te=3;break;default:te=v}var q=v;v=te;try{return j()}finally{v=q}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(j,te){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var q=v;v=j;try{return te()}finally{v=q}},r.unstable_scheduleCallback=function(j,te,q){var le=r.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?le+q:le):q=le,j){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=q+_e,j={id:m++,callback:te,priorityLevel:j,startTime:q,expirationTime:_e,sortIndex:-1},q>le?(j.sortIndex=q,e(p,j),t(h)===null&&j===t(p)&&(x?(O(U),U=-1):x=!0,Ie(N,q-le))):(j.sortIndex=_e,e(h,j),w||E||(w=!0,ge(F))),j},r.unstable_shouldYield=ie,r.unstable_wrapCallback=function(j){var te=v;return function(){var q=v;v=te;try{return j.apply(this,arguments)}finally{v=q}}}}(O4)),O4}var N4;function ove(){return N4||(N4=1,function(r){r.exports=sve()}(k4)),k4.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D4;function ave(){if(D4)return wp;D4=1;var r=vr,e=ove();function t(g){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+g,I=1;I<arguments.length;I++)y+="&args[]="+encodeURIComponent(arguments[I]);return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function o(g,y){l(g,y),l(g+"Capture",y)}function l(g,y){for(s[g]=y,g=0;g<y.length;g++)i.add(y[g])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},_={};function v(g){return h.call(_,g)?!0:h.call(m,g)?!1:p.test(g)?_[g]=!0:(m[g]=!0,!1)}function E(g,y,I,B){if(I!==null&&I.type===0)return!1;switch(typeof y){case"function":case"symbol":return!0;case"boolean":return B?!1:I!==null?!I.acceptsBooleans:(g=g.toLowerCase().slice(0,5),g!=="data-"&&g!=="aria-");default:return!1}}function w(g,y,I,B){if(y===null||typeof y>"u"||E(g,y,I,B))return!0;if(B)return!1;if(I!==null)switch(I.type){case 3:return!y;case 4:return y===!1;case 5:return isNaN(y);case 6:return isNaN(y)||1>y}return!1}function x(g,y,I,B,W,K,pe){this.acceptsBooleans=y===2||y===3||y===4,this.attributeName=B,this.attributeNamespace=W,this.mustUseProperty=I,this.propertyName=g,this.type=y,this.sanitizeURL=K,this.removeEmptyString=pe}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(g){A[g]=new x(g,0,!1,g,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(g){var y=g[0];A[y]=new x(y,1,!1,g[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(g){A[g]=new x(g,2,!1,g.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(g){A[g]=new x(g,2,!1,g,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(g){A[g]=new x(g,3,!1,g.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(g){A[g]=new x(g,3,!0,g,null,!1,!1)}),["capture","download"].forEach(function(g){A[g]=new x(g,4,!1,g,null,!1,!1)}),["cols","rows","size","span"].forEach(function(g){A[g]=new x(g,6,!1,g,null,!1,!1)}),["rowSpan","start"].forEach(function(g){A[g]=new x(g,5,!1,g.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function k(g){return g[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(g){var y=g.replace(O,k);A[y]=new x(y,1,!1,g,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(g){var y=g.replace(O,k);A[y]=new x(y,1,!1,g,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(g){var y=g.replace(O,k);A[y]=new x(y,1,!1,g,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(g){A[g]=new x(g,1,!1,g.toLowerCase(),null,!1,!1)}),A.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(g){A[g]=new x(g,1,!1,g.toLowerCase(),null,!0,!0)});function D(g,y,I,B){var W=A.hasOwnProperty(y)?A[y]:null;(W!==null?W.type!==0:B||!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(w(y,I,W,B)&&(I=null),B||W===null?v(y)&&(I===null?g.removeAttribute(y):g.setAttribute(y,""+I)):W.mustUseProperty?g[W.propertyName]=I===null?W.type===3?!1:"":I:(y=W.attributeName,B=W.attributeNamespace,I===null?g.removeAttribute(y):(W=W.type,I=W===3||W===4&&I===!0?"":""+I,B?g.setAttributeNS(B,y,I):g.setAttribute(y,I))))}var N=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),z=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),ie=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),j=Symbol.iterator;function te(g){return g===null||typeof g!="object"?null:(g=j&&g[j]||g["@@iterator"],typeof g=="function"?g:null)}var q=Object.assign,le;function _e(g){if(le===void 0)try{throw Error()}catch(I){var y=I.stack.trim().match(/\n( *(at )?)/);le=y&&y[1]||""}return`
`+le+g}var Le=!1;function xe(g,y){if(!g||Le)return"";Le=!0;var I=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch($t){var B=$t}Reflect.construct(g,[],y)}else{try{y.call()}catch($t){B=$t}g.call(y.prototype)}else{try{throw Error()}catch($t){B=$t}g()}}catch($t){if($t&&B&&typeof $t.stack=="string"){for(var W=$t.stack.split(`
`),K=B.stack.split(`
`),pe=W.length-1,Fe=K.length-1;1<=pe&&0<=Fe&&W[pe]!==K[Fe];)Fe--;for(;1<=pe&&0<=Fe;pe--,Fe--)if(W[pe]!==K[Fe]){if(pe!==1||Fe!==1)do if(pe--,Fe--,0>Fe||W[pe]!==K[Fe]){var Ke=`
`+W[pe].replace(" at new "," at ");return g.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",g.displayName)),Ke}while(1<=pe&&0<=Fe);break}}}finally{Le=!1,Error.prepareStackTrace=I}return(g=g?g.displayName||g.name:"")?_e(g):""}function Ve(g){switch(g.tag){case 5:return _e(g.type);case 16:return _e("Lazy");case 13:return _e("Suspense");case 19:return _e("SuspenseList");case 0:case 2:case 15:return g=xe(g.type,!1),g;case 11:return g=xe(g.type.render,!1),g;case 1:return g=xe(g.type,!0),g;default:return""}}function Re(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case V:return"Fragment";case z:return"Portal";case ee:return"Profiler";case U:return"StrictMode";case fe:return"Suspense";case ae:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case ie:return(g.displayName||"Context")+".Consumer";case ne:return(g._context.displayName||"Context")+".Provider";case se:var y=g.render;return g=g.displayName,g||(g=y.displayName||y.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case he:return y=g.displayName||null,y!==null?y:Re(g.type)||"Memo";case ge:y=g._payload,g=g._init;try{return Re(g(y))}catch{}}return null}function Ze(g){var y=g.type;switch(g.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=y.render,g=g.displayName||g.name||"",y.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(y);case 8:return y===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function et(g){switch(typeof g){case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function ct(g){var y=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function rt(g){var y=ct(g)?"checked":"value",I=Object.getOwnPropertyDescriptor(g.constructor.prototype,y),B=""+g[y];if(!g.hasOwnProperty(y)&&typeof I<"u"&&typeof I.get=="function"&&typeof I.set=="function"){var W=I.get,K=I.set;return Object.defineProperty(g,y,{configurable:!0,get:function(){return W.call(this)},set:function(pe){B=""+pe,K.call(this,pe)}}),Object.defineProperty(g,y,{enumerable:I.enumerable}),{getValue:function(){return B},setValue:function(pe){B=""+pe},stopTracking:function(){g._valueTracker=null,delete g[y]}}}}function Ne(g){g._valueTracker||(g._valueTracker=rt(g))}function we(g){if(!g)return!1;var y=g._valueTracker;if(!y)return!0;var I=y.getValue(),B="";return g&&(B=ct(g)?g.checked?"true":"false":g.value),g=B,g!==I?(y.setValue(g),!0):!1}function ze(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}function it(g,y){var I=y.checked;return q({},y,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:I??g._wrapperState.initialChecked})}function nt(g,y){var I=y.defaultValue==null?"":y.defaultValue,B=y.checked!=null?y.checked:y.defaultChecked;I=et(y.value!=null?y.value:I),g._wrapperState={initialChecked:B,initialValue:I,controlled:y.type==="checkbox"||y.type==="radio"?y.checked!=null:y.value!=null}}function Mt(g,y){y=y.checked,y!=null&&D(g,"checked",y,!1)}function At(g,y){Mt(g,y);var I=et(y.value),B=y.type;if(I!=null)B==="number"?(I===0&&g.value===""||g.value!=I)&&(g.value=""+I):g.value!==""+I&&(g.value=""+I);else if(B==="submit"||B==="reset"){g.removeAttribute("value");return}y.hasOwnProperty("value")?Et(g,y.type,I):y.hasOwnProperty("defaultValue")&&Et(g,y.type,et(y.defaultValue)),y.checked==null&&y.defaultChecked!=null&&(g.defaultChecked=!!y.defaultChecked)}function ht(g,y,I){if(y.hasOwnProperty("value")||y.hasOwnProperty("defaultValue")){var B=y.type;if(!(B!=="submit"&&B!=="reset"||y.value!==void 0&&y.value!==null))return;y=""+g._wrapperState.initialValue,I||y===g.value||(g.value=y),g.defaultValue=y}I=g.name,I!==""&&(g.name=""),g.defaultChecked=!!g._wrapperState.initialChecked,I!==""&&(g.name=I)}function Et(g,y,I){(y!=="number"||ze(g.ownerDocument)!==g)&&(I==null?g.defaultValue=""+g._wrapperState.initialValue:g.defaultValue!==""+I&&(g.defaultValue=""+I))}var wt=Array.isArray;function pt(g,y,I,B){if(g=g.options,y){y={};for(var W=0;W<I.length;W++)y["$"+I[W]]=!0;for(I=0;I<g.length;I++)W=y.hasOwnProperty("$"+g[I].value),g[I].selected!==W&&(g[I].selected=W),W&&B&&(g[I].defaultSelected=!0)}else{for(I=""+et(I),y=null,W=0;W<g.length;W++){if(g[W].value===I){g[W].selected=!0,B&&(g[W].defaultSelected=!0);return}y!==null||g[W].disabled||(y=g[W])}y!==null&&(y.selected=!0)}}function be(g,y){if(y.dangerouslySetInnerHTML!=null)throw Error(t(91));return q({},y,{value:void 0,defaultValue:void 0,children:""+g._wrapperState.initialValue})}function Z(g,y){var I=y.value;if(I==null){if(I=y.children,y=y.defaultValue,I!=null){if(y!=null)throw Error(t(92));if(wt(I)){if(1<I.length)throw Error(t(93));I=I[0]}y=I}y==null&&(y=""),I=y}g._wrapperState={initialValue:et(I)}}function ke(g,y){var I=et(y.value),B=et(y.defaultValue);I!=null&&(I=""+I,I!==g.value&&(g.value=I),y.defaultValue==null&&g.defaultValue!==I&&(g.defaultValue=I)),B!=null&&(g.defaultValue=""+B)}function lt(g){var y=g.textContent;y===g._wrapperState.initialValue&&y!==""&&y!==null&&(g.value=y)}function mt(g){switch(g){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xt(g,y){return g==null||g==="http://www.w3.org/1999/xhtml"?mt(y):g==="http://www.w3.org/2000/svg"&&y==="foreignObject"?"http://www.w3.org/1999/xhtml":g}var ut,He=function(g){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(y,I,B,W){MSApp.execUnsafeLocalFunction(function(){return g(y,I,B,W)})}:g}(function(g,y){if(g.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in g)g.innerHTML=y;else{for(ut=ut||document.createElement("div"),ut.innerHTML="<svg>"+y.valueOf().toString()+"</svg>",y=ut.firstChild;g.firstChild;)g.removeChild(g.firstChild);for(;y.firstChild;)g.appendChild(y.firstChild)}});function Ce(g,y){if(y){var I=g.firstChild;if(I&&I===g.lastChild&&I.nodeType===3){I.nodeValue=y;return}}g.textContent=y}var X={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},J=["Webkit","ms","Moz","O"];Object.keys(X).forEach(function(g){J.forEach(function(y){y=y+g.charAt(0).toUpperCase()+g.substring(1),X[y]=X[g]})});function oe(g,y,I){return y==null||typeof y=="boolean"||y===""?"":I||typeof y!="number"||y===0||X.hasOwnProperty(g)&&X[g]?(""+y).trim():y+"px"}function $e(g,y){g=g.style;for(var I in y)if(y.hasOwnProperty(I)){var B=I.indexOf("--")===0,W=oe(I,y[I],B);I==="float"&&(I="cssFloat"),B?g.setProperty(I,W):g[I]=W}}var Ge=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bt(g,y){if(y){if(Ge[g]&&(y.children!=null||y.dangerouslySetInnerHTML!=null))throw Error(t(137,g));if(y.dangerouslySetInnerHTML!=null){if(y.children!=null)throw Error(t(60));if(typeof y.dangerouslySetInnerHTML!="object"||!("__html"in y.dangerouslySetInnerHTML))throw Error(t(61))}if(y.style!=null&&typeof y.style!="object")throw Error(t(62))}}function Pe(g,y){if(g.indexOf("-")===-1)return typeof y.is=="string";switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wt=null;function st(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var Ut=null,Pt=null,Tn=null;function Mr(g){if(g=Br(g)){if(typeof Ut!="function")throw Error(t(280));var y=g.stateNode;y&&(y=Fp(y),Ut(g.stateNode,g.type,y))}}function nr(g){Pt?Tn?Tn.push(g):Tn=[g]:Pt=g}function ai(){if(Pt){var g=Pt,y=Tn;if(Tn=Pt=null,Mr(g),y)for(g=0;g<y.length;g++)Mr(y[g])}}function ar(g,y){return g(y)}function Qn(){}var Q=!1;function me(g,y,I){if(Q)return g(y,I);Q=!0;try{return ar(g,y,I)}finally{Q=!1,(Pt!==null||Tn!==null)&&(Qn(),ai())}}function De(g,y){var I=g.stateNode;if(I===null)return null;var B=Fp(I);if(B===null)return null;I=B[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(B=!B.disabled)||(g=g.type,B=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!B;break e;default:g=!1}if(g)return null;if(I&&typeof I!="function")throw Error(t(231,y,typeof I));return I}var qe=!1;if(u)try{var It={};Object.defineProperty(It,"passive",{get:function(){qe=!0}}),window.addEventListener("test",It,It),window.removeEventListener("test",It,It)}catch{qe=!1}function qt(g,y,I,B,W,K,pe,Fe,Ke){var $t=Array.prototype.slice.call(arguments,3);try{y.apply(I,$t)}catch(jt){this.onError(jt)}}var gn=!1,Ae=null,at=!1,bt=null,dt={onError:function(g){gn=!0,Ae=g}};function Dt(g,y,I,B,W,K,pe,Fe,Ke){gn=!1,Ae=null,qt.apply(dt,arguments)}function xn(g,y,I,B,W,K,pe,Fe,Ke){if(Dt.apply(this,arguments),gn){if(gn){var $t=Ae;gn=!1,Ae=null}else throw Error(t(198));at||(at=!0,bt=$t)}}function Bn(g){var y=g,I=g;if(g.alternate)for(;y.return;)y=y.return;else{g=y;do y=g,y.flags&4098&&(I=y.return),g=y.return;while(g)}return y.tag===3?I:null}function er(g){if(g.tag===13){var y=g.memoizedState;if(y===null&&(g=g.alternate,g!==null&&(y=g.memoizedState)),y!==null)return y.dehydrated}return null}function mr(g){if(Bn(g)!==g)throw Error(t(188))}function Qr(g){var y=g.alternate;if(!y){if(y=Bn(g),y===null)throw Error(t(188));return y!==g?null:g}for(var I=g,B=y;;){var W=I.return;if(W===null)break;var K=W.alternate;if(K===null){if(B=W.return,B!==null){I=B;continue}break}if(W.child===K.child){for(K=W.child;K;){if(K===I)return mr(W),g;if(K===B)return mr(W),y;K=K.sibling}throw Error(t(188))}if(I.return!==B.return)I=W,B=K;else{for(var pe=!1,Fe=W.child;Fe;){if(Fe===I){pe=!0,I=W,B=K;break}if(Fe===B){pe=!0,B=W,I=K;break}Fe=Fe.sibling}if(!pe){for(Fe=K.child;Fe;){if(Fe===I){pe=!0,I=K,B=W;break}if(Fe===B){pe=!0,B=K,I=W;break}Fe=Fe.sibling}if(!pe)throw Error(t(189))}}if(I.alternate!==B)throw Error(t(190))}if(I.tag!==3)throw Error(t(188));return I.stateNode.current===I?g:y}function yr(g){return g=Qr(g),g!==null?wr(g):null}function wr(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var y=wr(g);if(y!==null)return y;g=g.sibling}return null}var Gi=e.unstable_scheduleCallback,Fo=e.unstable_cancelCallback,wo=e.unstable_shouldYield,nl=e.unstable_requestPaint,Yt=e.unstable_now,lr=e.unstable_getCurrentPriorityLevel,oa=e.unstable_ImmediatePriority,Uo=e.unstable_UserBlockingPriority,hs=e.unstable_NormalPriority,ds=e.unstable_LowPriority,li=e.unstable_IdlePriority,ur=null,pn=null;function ir(g){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(ur,g,void 0,(g.current.flags&128)===128)}catch{}}var Tr=Math.clz32?Math.clz32:Ji,qn=Math.log,ui=Math.LN2;function Ji(g){return g>>>=0,g===0?32:31-(qn(g)/ui|0)|0}var Gr=64,Di=4194304;function Ia(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function rl(g,y){var I=g.pendingLanes;if(I===0)return 0;var B=0,W=g.suspendedLanes,K=g.pingedLanes,pe=I&268435455;if(pe!==0){var Fe=pe&~W;Fe!==0?B=Ia(Fe):(K&=pe,K!==0&&(B=Ia(K)))}else pe=I&~W,pe!==0?B=Ia(pe):K!==0&&(B=Ia(K));if(B===0)return 0;if(y!==0&&y!==B&&!(y&W)&&(W=B&-B,K=y&-y,W>=K||W===16&&(K&4194240)!==0))return y;if(B&4&&(B|=I&16),y=g.entangledLanes,y!==0)for(g=g.entanglements,y&=B;0<y;)I=31-Tr(y),W=1<<I,B|=g[I],y&=~W;return B}function cc(g,y){switch(g){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uu(g,y){for(var I=g.suspendedLanes,B=g.pingedLanes,W=g.expirationTimes,K=g.pendingLanes;0<K;){var pe=31-Tr(K),Fe=1<<pe,Ke=W[pe];Ke===-1?(!(Fe&I)||Fe&B)&&(W[pe]=cc(Fe,y)):Ke<=y&&(g.expiredLanes|=Fe),K&=~Fe}}function Cs(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function xo(){var g=Gr;return Gr<<=1,!(Gr&4194240)&&(Gr=64),g}function su(g){for(var y=[],I=0;31>I;I++)y.push(g);return y}function Ll(g,y,I){g.pendingLanes|=y,y!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,y=31-Tr(y),g[y]=I}function uh(g,y){var I=g.pendingLanes&~y;g.pendingLanes=y,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=y,g.mutableReadLanes&=y,g.entangledLanes&=y,y=g.entanglements;var B=g.eventTimes;for(g=g.expirationTimes;0<I;){var W=31-Tr(I),K=1<<W;y[W]=0,B[W]=-1,g[W]=-1,I&=~K}}function zo(g,y){var I=g.entangledLanes|=y;for(g=g.entanglements;I;){var B=31-Tr(I),W=1<<B;W&y|g[B]&y&&(g[B]|=y),I&=~W}}var Zn=0;function Bi(g){return g&=-g,1<g?4<g?g&268435455?16:536870912:4:1}var Bc,ch,hc,il,ou,sl=!1,ol=[],Yn=null,Kn=null,al=null,Ra=new Map,aa=new Map,Nl=[],bi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pi(g,y){switch(g){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":al=null;break;case"pointerover":case"pointerout":Ra.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":aa.delete(y.pointerId)}}function ll(g,y,I,B,W,K){return g===null||g.nativeEvent!==K?(g={blockedOn:y,domEventName:I,eventSystemFlags:B,nativeEvent:K,targetContainers:[W]},y!==null&&(y=Br(y),y!==null&&ch(y)),g):(g.eventSystemFlags|=B,y=g.targetContainers,W!==null&&y.indexOf(W)===-1&&y.push(W),g)}function wd(g,y,I,B,W){switch(y){case"focusin":return Yn=ll(Yn,g,y,I,B,W),!0;case"dragenter":return Kn=ll(Kn,g,y,I,B,W),!0;case"mouseover":return al=ll(al,g,y,I,B,W),!0;case"pointerover":var K=W.pointerId;return Ra.set(K,ll(Ra.get(K)||null,g,y,I,B,W)),!0;case"gotpointercapture":return K=W.pointerId,aa.set(K,ll(aa.get(K)||null,g,y,I,B,W)),!0}return!1}function Ms(g){var y=Na(g.target);if(y!==null){var I=Bn(y);if(I!==null){if(y=I.tag,y===13){if(y=er(I),y!==null){g.blockedOn=y,ou(g.priority,function(){hc(I)});return}}else if(y===3&&I.stateNode.current.memoizedState.isDehydrated){g.blockedOn=I.tag===3?I.stateNode.containerInfo:null;return}}}g.blockedOn=null}function au(g){if(g.blockedOn!==null)return!1;for(var y=g.targetContainers;0<y.length;){var I=Go(g.domEventName,g.eventSystemFlags,y[0],g.nativeEvent);if(I===null){I=g.nativeEvent;var B=new I.constructor(I.type,I);Wt=B,I.target.dispatchEvent(B),Wt=null}else return y=Br(I),y!==null&&ch(y),g.blockedOn=I,!1;y.shift()}return!0}function Co(g,y,I){au(g)&&I.delete(y)}function Dl(){sl=!1,Yn!==null&&au(Yn)&&(Yn=null),Kn!==null&&au(Kn)&&(Kn=null),al!==null&&au(al)&&(al=null),Ra.forEach(Co),aa.forEach(Co)}function Wr(g,y){g.blockedOn===y&&(g.blockedOn=null,sl||(sl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Dl)))}function cr(g){function y(W){return Wr(W,g)}if(0<ol.length){Wr(ol[0],g);for(var I=1;I<ol.length;I++){var B=ol[I];B.blockedOn===g&&(B.blockedOn=null)}}for(Yn!==null&&Wr(Yn,g),Kn!==null&&Wr(Kn,g),al!==null&&Wr(al,g),Ra.forEach(y),aa.forEach(y),I=0;I<Nl.length;I++)B=Nl[I],B.blockedOn===g&&(B.blockedOn=null);for(;0<Nl.length&&(I=Nl[0],I.blockedOn===null);)Ms(I),I.blockedOn===null&&Nl.shift()}var Wi=N.ReactCurrentBatchConfig,As=!0;function lu(g,y,I,B){var W=Zn,K=Wi.transition;Wi.transition=null;try{Zn=1,Pc(g,y,I,B)}finally{Zn=W,Wi.transition=K}}function Bl(g,y,I,B){var W=Zn,K=Wi.transition;Wi.transition=null;try{Zn=4,Pc(g,y,I,B)}finally{Zn=W,Wi.transition=K}}function Pc(g,y,I,B){if(As){var W=Go(g,y,I,B);if(W===null)Md(g,y,B,Ho,I),Pi(g,B);else if(wd(W,g,y,I,B))B.stopPropagation();else if(Pi(g,B),y&4&&-1<bi.indexOf(g)){for(;W!==null;){var K=Br(W);if(K!==null&&Bc(K),K=Go(g,y,I,B),K===null&&Md(g,y,B,Ho,I),K===W)break;W=K}W!==null&&B.stopPropagation()}else Md(g,y,B,null,I)}}var Ho=null;function Go(g,y,I,B){if(Ho=null,g=st(B),g=Na(g),g!==null)if(y=Bn(g),y===null)g=null;else if(I=y.tag,I===13){if(g=er(y),g!==null)return g;g=null}else if(I===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;g=null}else y!==g&&(g=null);return Ho=g,null}function uu(g){switch(g){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lr()){case oa:return 1;case Uo:return 4;case hs:case ds:return 16;case li:return 536870912;default:return 16}default:return 16}}var Vr=null,ps=null,Ci=null;function qr(){if(Ci)return Ci;var g,y=ps,I=y.length,B,W="value"in Vr?Vr.value:Vr.textContent,K=W.length;for(g=0;g<I&&y[g]===W[g];g++);var pe=I-g;for(B=1;B<=pe&&y[I-B]===W[K-B];B++);return Ci=W.slice(g,1<B?1-B:void 0)}function la(g){var y=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&y===13&&(g=13)):g=y,g===10&&(g=13),32<=g||g===13?g:0}function Fi(){return!0}function cu(){return!1}function qs(g){function y(I,B,W,K,pe){this._reactName=I,this._targetInst=W,this.type=B,this.nativeEvent=K,this.target=pe,this.currentTarget=null;for(var Fe in g)g.hasOwnProperty(Fe)&&(I=g[Fe],this[Fe]=I?I(K):K[Fe]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?Fi:cu,this.isPropagationStopped=cu,this}return q(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var I=this.nativeEvent;I&&(I.preventDefault?I.preventDefault():typeof I.returnValue!="unknown"&&(I.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var I=this.nativeEvent;I&&(I.stopPropagation?I.stopPropagation():typeof I.cancelBubble!="unknown"&&(I.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),y}var hu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ka=qs(hu),ci=q({},hu,{view:0,detail:0}),Zr=qs(ci),Un,jr,Ti,Uh=q({},ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fu,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==Ti&&(Ti&&g.type==="mousemove"?(Un=g.screenX-Ti.screenX,jr=g.screenY-Ti.screenY):jr=Un=0,Ti=g),Un)},movementY:function(g){return"movementY"in g?g.movementY:jr}}),du=qs(Uh),fs=q({},Uh,{dataTransfer:0}),ul=qs(fs),zh=q({},ci,{relatedTarget:0}),hi=qs(zh),pu=q({},hu,{animationName:0,elapsedTime:0,pseudoElement:0}),sp=qs(pu),op=q({},hu,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),hh=qs(op),ap=q({},hu,{data:0}),Bp=qs(ap),Rf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zs(g){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(g):(g=zu[g])?!!y[g]:!1}function fu(){return Zs}var dh=q({},ci,{key:function(g){if(g.key){var y=Rf[g.key]||g.key;if(y!=="Unidentified")return y}return g.type==="keypress"?(g=la(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?lp[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fu,charCode:function(g){return g.type==="keypress"?la(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?la(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),ua=qs(dh),Ur=q({},Uh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sr=qs(Ur),Us=q({},ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fu}),Wo=qs(Us),Mo=q({},hu,{propertyName:0,elapsedTime:0,pseudoElement:0}),mu=qs(Mo),cl=q({},Uh,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),Hh=qs(cl),Ei=[9,13,27,32],di=u&&"CompositionEvent"in window,or=null;u&&"documentMode"in document&&(or=document.documentMode);var $i=u&&"TextEvent"in window&&!or,Vo=u&&(!di||or&&8<or&&11>=or),Pl=" ",up=!1;function cp(g,y){switch(g){case"keyup":return Ei.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gh(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var gu=!1;function Hu(g,y){switch(g){case"compositionend":return Gh(y);case"keypress":return y.which!==32?null:(up=!0,Pl);case"textInput":return g=y.data,g===Pl&&up?null:g;default:return null}}function dc(g,y){if(gu)return g==="compositionend"||!di&&cp(g,y)?(g=qr(),Ci=ps=Vr=null,gu=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return Vo&&y.locale!=="ko"?null:y.data;default:return null}}var ph={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pc(g){var y=g&&g.nodeName&&g.nodeName.toLowerCase();return y==="input"?!!ph[g.type]:y==="textarea"}function Fl(g,y,I,B){nr(B),y=Ad(y,"onChange"),0<y.length&&(I=new ka("onChange","change",null,I,B),g.push({event:I,listeners:y}))}var jo=null,Gu=null;function fh(g){_h(g,0)}function fc(g){var y=zn(g);if(we(y))return g}function mc(g,y){if(g==="change")return y}var ms=!1;if(u){var Xr;if(u){var hl="oninput"in document;if(!hl){var Xo=document.createElement("div");Xo.setAttribute("oninput","return;"),hl=typeof Xo.oninput=="function"}Xr=hl}else Xr=!1;ms=Xr&&(!document.documentMode||9<document.documentMode)}function dl(){jo&&(jo.detachEvent("onpropertychange",Ul),Gu=jo=null)}function Ul(g){if(g.propertyName==="value"&&fc(Gu)){var y=[];Fl(y,Gu,g,st(g)),me(fh,y)}}function Fc(g,y,I){g==="focusin"?(dl(),jo=y,Gu=I,jo.attachEvent("onpropertychange",Ul)):g==="focusout"&&dl()}function xd(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return fc(Gu)}function pi(g,y){if(g==="click")return fc(y)}function je(g,y){if(g==="input"||g==="change")return fc(y)}function Rt(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var yt=typeof Object.is=="function"?Object.is:Rt;function mn(g,y){if(yt(g,y))return!0;if(typeof g!="object"||g===null||typeof y!="object"||y===null)return!1;var I=Object.keys(g),B=Object.keys(y);if(I.length!==B.length)return!1;for(B=0;B<I.length;B++){var W=I[B];if(!h.call(y,W)||!yt(g[W],y[W]))return!1}return!0}function Nn(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function Jn(g,y){var I=Nn(g);g=0;for(var B;I;){if(I.nodeType===3){if(B=g+I.textContent.length,g<=y&&B>=y)return{node:I,offset:y-g};g=B}e:{for(;I;){if(I.nextSibling){I=I.nextSibling;break e}I=I.parentNode}I=void 0}I=Nn(I)}}function tr(g,y){return g&&y?g===y?!0:g&&g.nodeType===3?!1:y&&y.nodeType===3?tr(g,y.parentNode):"contains"in g?g.contains(y):g.compareDocumentPosition?!!(g.compareDocumentPosition(y)&16):!1:!1}function An(){for(var g=window,y=ze();y instanceof g.HTMLIFrameElement;){try{var I=typeof y.contentWindow.location.href=="string"}catch{I=!1}if(I)g=y.contentWindow;else break;y=ze(g.document)}return y}function xr(g){var y=g&&g.nodeName&&g.nodeName.toLowerCase();return y&&(y==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||y==="textarea"||g.contentEditable==="true")}function Is(g){var y=An(),I=g.focusedElem,B=g.selectionRange;if(y!==I&&I&&I.ownerDocument&&tr(I.ownerDocument.documentElement,I)){if(B!==null&&xr(I)){if(y=B.start,g=B.end,g===void 0&&(g=y),"selectionStart"in I)I.selectionStart=y,I.selectionEnd=Math.min(g,I.value.length);else if(g=(y=I.ownerDocument||document)&&y.defaultView||window,g.getSelection){g=g.getSelection();var W=I.textContent.length,K=Math.min(B.start,W);B=B.end===void 0?K:Math.min(B.end,W),!g.extend&&K>B&&(W=B,B=K,K=W),W=Jn(I,K);var pe=Jn(I,B);W&&pe&&(g.rangeCount!==1||g.anchorNode!==W.node||g.anchorOffset!==W.offset||g.focusNode!==pe.node||g.focusOffset!==pe.offset)&&(y=y.createRange(),y.setStart(W.node,W.offset),g.removeAllRanges(),K>B?(g.addRange(y),g.extend(pe.node,pe.offset)):(y.setEnd(pe.node,pe.offset),g.addRange(y)))}}for(y=[],g=I;g=g.parentNode;)g.nodeType===1&&y.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<y.length;I++)g=y[I],g.element.scrollLeft=g.left,g.element.scrollTop=g.top}}var gs=u&&"documentMode"in document&&11>=document.documentMode,po=null,ca=null,Vi=null,ss=!1;function gc(g,y,I){var B=I.window===I?I.document:I.nodeType===9?I:I.ownerDocument;ss||po==null||po!==ze(B)||(B=po,"selectionStart"in B&&xr(B)?B={start:B.selectionStart,end:B.selectionEnd}:(B=(B.ownerDocument&&B.ownerDocument.defaultView||window).getSelection(),B={anchorNode:B.anchorNode,anchorOffset:B.anchorOffset,focusNode:B.focusNode,focusOffset:B.focusOffset}),Vi&&mn(Vi,B)||(Vi=B,B=Ad(ca,"onSelect"),0<B.length&&(y=new ka("onSelect","select",null,y,I),g.push({event:y,listeners:B}),y.target=po)))}function Lr(g,y){var I={};return I[g.toLowerCase()]=y.toLowerCase(),I["Webkit"+g]="webkit"+y,I["Moz"+g]="moz"+y,I}var Ao={animationend:Lr("Animation","AnimationEnd"),animationiteration:Lr("Animation","AnimationIteration"),animationstart:Lr("Animation","AnimationStart"),transitionend:Lr("Transition","TransitionEnd")},Rs={},zs={};u&&(zs=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Yo(g){if(Rs[g])return Rs[g];if(!Ao[g])return g;var y=Ao[g],I;for(I in y)if(y.hasOwnProperty(I)&&I in zs)return Rs[g]=y[I];return g}var mh=Yo("animationend"),Uc=Yo("animationiteration"),gh=Yo("animationstart"),_u=Yo("transitionend"),Wh=new Map,Vh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pl(g,y){Wh.set(g,y),o(y,[g])}for(var jh=0;jh<Vh.length;jh++){var _c=Vh[jh],zc=_c.toLowerCase(),Cd=_c[0].toUpperCase()+_c.slice(1);pl(zc,"on"+Cd)}pl(mh,"onAnimationEnd"),pl(Uc,"onAnimationIteration"),pl(gh,"onAnimationStart"),pl("dblclick","onDoubleClick"),pl("focusin","onFocus"),pl("focusout","onBlur"),pl(_u,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ha=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oa));function vu(g,y,I){var B=g.type||"unknown-event";g.currentTarget=I,xn(B,y,void 0,g),g.currentTarget=null}function _h(g,y){y=(y&4)!==0;for(var I=0;I<g.length;I++){var B=g[I],W=B.event;B=B.listeners;e:{var K=void 0;if(y)for(var pe=B.length-1;0<=pe;pe--){var Fe=B[pe],Ke=Fe.instance,$t=Fe.currentTarget;if(Fe=Fe.listener,Ke!==K&&W.isPropagationStopped())break e;vu(W,Fe,$t),K=Ke}else for(pe=0;pe<B.length;pe++){if(Fe=B[pe],Ke=Fe.instance,$t=Fe.currentTarget,Fe=Fe.listener,Ke!==K&&W.isPropagationStopped())break e;vu(W,Fe,$t),K=Ke}}}if(at)throw g=bt,at=!1,bt=null,g}function ei(g,y){var I=y[Qo];I===void 0&&(I=y[Qo]=new Set);var B=g+"__bubble";I.has(B)||(vh(y,g,2,!1),I.add(B))}function Xh(g,y,I){var B=0;y&&(B|=4),vh(I,g,B,y)}var Hc="_reactListening"+Math.random().toString(36).slice(2);function Wu(g){if(!g[Hc]){g[Hc]=!0,i.forEach(function(I){I!=="selectionchange"&&(ha.has(I)||Xh(I,!1,g),Xh(I,!0,g))});var y=g.nodeType===9?g:g.ownerDocument;y===null||y[Hc]||(y[Hc]=!0,Xh("selectionchange",!1,y))}}function vh(g,y,I,B){switch(uu(y)){case 1:var W=lu;break;case 4:W=Bl;break;default:W=Pc}I=W.bind(null,y,I,g),W=void 0,!qe||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(W=!0),B?W!==void 0?g.addEventListener(y,I,{capture:!0,passive:W}):g.addEventListener(y,I,!0):W!==void 0?g.addEventListener(y,I,{passive:W}):g.addEventListener(y,I,!1)}function Md(g,y,I,B,W){var K=B;if(!(y&1)&&!(y&2)&&B!==null)e:for(;;){if(B===null)return;var pe=B.tag;if(pe===3||pe===4){var Fe=B.stateNode.containerInfo;if(Fe===W||Fe.nodeType===8&&Fe.parentNode===W)break;if(pe===4)for(pe=B.return;pe!==null;){var Ke=pe.tag;if((Ke===3||Ke===4)&&(Ke=pe.stateNode.containerInfo,Ke===W||Ke.nodeType===8&&Ke.parentNode===W))return;pe=pe.return}for(;Fe!==null;){if(pe=Na(Fe),pe===null)return;if(Ke=pe.tag,Ke===5||Ke===6){B=K=pe;continue e}Fe=Fe.parentNode}}B=B.return}me(function(){var $t=K,jt=st(I),en=[];e:{var Jt=Wh.get(g);if(Jt!==void 0){var vn=ka,In=g;switch(g){case"keypress":if(la(I)===0)break e;case"keydown":case"keyup":vn=ua;break;case"focusin":In="focus",vn=hi;break;case"focusout":In="blur",vn=hi;break;case"beforeblur":case"afterblur":vn=hi;break;case"click":if(I.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vn=du;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vn=ul;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vn=Wo;break;case mh:case Uc:case gh:vn=sp;break;case _u:vn=mu;break;case"scroll":vn=Zr;break;case"wheel":vn=Hh;break;case"copy":case"cut":case"paste":vn=hh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vn=sr}var Ln=(y&4)!==0,Js=!Ln&&g==="scroll",_t=Ln?Jt!==null?Jt+"Capture":null:Jt;Ln=[];for(var tt=$t,vt;tt!==null;){vt=tt;var sn=vt.stateNode;if(vt.tag===5&&sn!==null&&(vt=sn,_t!==null&&(sn=De(tt,_t),sn!=null&&Ln.push(fl(tt,sn,vt)))),Js)break;tt=tt.return}0<Ln.length&&(Jt=new vn(Jt,In,null,I,jt),en.push({event:Jt,listeners:Ln}))}}if(!(y&7)){e:{if(Jt=g==="mouseover"||g==="pointerover",vn=g==="mouseout"||g==="pointerout",Jt&&I!==Wt&&(In=I.relatedTarget||I.fromElement)&&(Na(In)||In[Qi]))break e;if((vn||Jt)&&(Jt=jt.window===jt?jt:(Jt=jt.ownerDocument)?Jt.defaultView||Jt.parentWindow:window,vn?(In=I.relatedTarget||I.toElement,vn=$t,In=In?Na(In):null,In!==null&&(Js=Bn(In),In!==Js||In.tag!==5&&In.tag!==6)&&(In=null)):(vn=null,In=$t),vn!==In)){if(Ln=du,sn="onMouseLeave",_t="onMouseEnter",tt="mouse",(g==="pointerout"||g==="pointerover")&&(Ln=sr,sn="onPointerLeave",_t="onPointerEnter",tt="pointer"),Js=vn==null?Jt:zn(vn),vt=In==null?Jt:zn(In),Jt=new Ln(sn,tt+"leave",vn,I,jt),Jt.target=Js,Jt.relatedTarget=vt,sn=null,Na(jt)===$t&&(Ln=new Ln(_t,tt+"enter",In,I,jt),Ln.target=vt,Ln.relatedTarget=Js,sn=Ln),Js=sn,vn&&In)t:{for(Ln=vn,_t=In,tt=0,vt=Ln;vt;vt=yh(vt))tt++;for(vt=0,sn=_t;sn;sn=yh(sn))vt++;for(;0<tt-vt;)Ln=yh(Ln),tt--;for(;0<vt-tt;)_t=yh(_t),vt--;for(;tt--;){if(Ln===_t||_t!==null&&Ln===_t.alternate)break t;Ln=yh(Ln),_t=yh(_t)}Ln=null}else Ln=null;vn!==null&&eo(en,Jt,vn,Ln,!1),In!==null&&Js!==null&&eo(en,Js,In,Ln,!0)}}e:{if(Jt=$t?zn($t):window,vn=Jt.nodeName&&Jt.nodeName.toLowerCase(),vn==="select"||vn==="input"&&Jt.type==="file")var Hn=mc;else if(pc(Jt))if(ms)Hn=je;else{Hn=xd;var Dn=Fc}else(vn=Jt.nodeName)&&vn.toLowerCase()==="input"&&(Jt.type==="checkbox"||Jt.type==="radio")&&(Hn=pi);if(Hn&&(Hn=Hn(g,$t))){Fl(en,Hn,I,jt);break e}Dn&&Dn(g,Jt,$t),g==="focusout"&&(Dn=Jt._wrapperState)&&Dn.controlled&&Jt.type==="number"&&Et(Jt,"number",Jt.value)}switch(Dn=$t?zn($t):window,g){case"focusin":(pc(Dn)||Dn.contentEditable==="true")&&(po=Dn,ca=$t,Vi=null);break;case"focusout":Vi=ca=po=null;break;case"mousedown":ss=!0;break;case"contextmenu":case"mouseup":case"dragend":ss=!1,gc(en,I,jt);break;case"selectionchange":if(gs)break;case"keydown":case"keyup":gc(en,I,jt)}var Vn;if(di)e:{switch(g){case"compositionstart":var dr="onCompositionStart";break e;case"compositionend":dr="onCompositionEnd";break e;case"compositionupdate":dr="onCompositionUpdate";break e}dr=void 0}else gu?cp(g,I)&&(dr="onCompositionEnd"):g==="keydown"&&I.keyCode===229&&(dr="onCompositionStart");dr&&(Vo&&I.locale!=="ko"&&(gu||dr!=="onCompositionStart"?dr==="onCompositionEnd"&&gu&&(Vn=qr()):(Vr=jt,ps="value"in Vr?Vr.value:Vr.textContent,gu=!0)),Dn=Ad($t,dr),0<Dn.length&&(dr=new Bp(dr,g,null,I,jt),en.push({event:dr,listeners:Dn}),Vn?dr.data=Vn:(Vn=Gh(I),Vn!==null&&(dr.data=Vn)))),(Vn=$i?Hu(g,I):dc(g,I))&&($t=Ad($t,"onBeforeInput"),0<$t.length&&(jt=new Bp("onBeforeInput","beforeinput",null,I,jt),en.push({event:jt,listeners:$t}),jt.data=Vn))}_h(en,y)})}function fl(g,y,I){return{instance:g,listener:y,currentTarget:I}}function Ad(g,y){for(var I=y+"Capture",B=[];g!==null;){var W=g,K=W.stateNode;W.tag===5&&K!==null&&(W=K,K=De(g,I),K!=null&&B.unshift(fl(g,K,W)),K=De(g,y),K!=null&&B.push(fl(g,K,W))),g=g.return}return B}function yh(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5);return g||null}function eo(g,y,I,B,W){for(var K=y._reactName,pe=[];I!==null&&I!==B;){var Fe=I,Ke=Fe.alternate,$t=Fe.stateNode;if(Ke!==null&&Ke===B)break;Fe.tag===5&&$t!==null&&(Fe=$t,W?(Ke=De(I,K),Ke!=null&&pe.unshift(fl(I,Ke,Fe))):W||(Ke=De(I,K),Ke!=null&&pe.push(fl(I,Ke,Fe)))),I=I.return}pe.length!==0&&g.push({event:y,listeners:pe})}var Ko=/\r\n?/g,kf=/\u0000|\uFFFD/g;function Pp(g){return(typeof g=="string"?g:""+g).replace(Ko,`
`).replace(kf,"")}function ml(g,y,I){if(y=Pp(y),Pp(g)!==y&&I)throw Error(t(425))}function gl(){}var vc=null,bh=null;function Yh(g,y){return g==="textarea"||g==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var Vu=typeof setTimeout=="function"?setTimeout:void 0,La=typeof clearTimeout=="function"?clearTimeout:void 0,ju=typeof Promise=="function"?Promise:void 0,Kh=typeof queueMicrotask=="function"?queueMicrotask:typeof ju<"u"?function(g){return ju.resolve(null).then(g).catch(yc)}:Vu;function yc(g){setTimeout(function(){throw g})}function bc(g,y){var I=y,B=0;do{var W=I.nextSibling;if(g.removeChild(I),W&&W.nodeType===8)if(I=W.data,I==="/$"){if(B===0){g.removeChild(W),cr(y);return}B--}else I!=="$"&&I!=="$?"&&I!=="$!"||B++;I=W}while(I);cr(y)}function Xu(g){for(;g!=null;g=g.nextSibling){var y=g.nodeType;if(y===1||y===3)break;if(y===8){if(y=g.data,y==="$"||y==="$!"||y==="$?")break;if(y==="/$")return null}}return g}function Id(g){g=g.previousSibling;for(var y=0;g;){if(g.nodeType===8){var I=g.data;if(I==="$"||I==="$!"||I==="$?"){if(y===0)return g;y--}else I==="/$"&&y++}g=g.previousSibling}return null}var Jo=Math.random().toString(36).slice(2),Er="__reactFiber$"+Jo,zl="__reactProps$"+Jo,Qi="__reactContainer$"+Jo,Qo="__reactEvents$"+Jo,ve="__reactListeners$"+Jo,Hs="__reactHandles$"+Jo;function Na(g){var y=g[Er];if(y)return y;for(var I=g.parentNode;I;){if(y=I[Qi]||I[Er]){if(I=y.alternate,y.child!==null||I!==null&&I.child!==null)for(g=Id(g);g!==null;){if(I=g[Er])return I;g=Id(g)}return y}g=I,I=g.parentNode}return null}function Br(g){return g=g[Er]||g[Qi],!g||g.tag!==5&&g.tag!==6&&g.tag!==13&&g.tag!==3?null:g}function zn(g){if(g.tag===5||g.tag===6)return g.stateNode;throw Error(t(33))}function Fp(g){return g[zl]||null}var da=[],Yr=-1;function fi(g){return{current:g}}function Si(g){0>Yr||(g.current=da[Yr],da[Yr]=null,Yr--)}function Mi(g,y){Yr++,da[Yr]=g.current,g.current=y}var Tc={},Io=fi(Tc),Ro=fi(!1),to=Tc;function Ec(g,y){var I=g.type.contextTypes;if(!I)return Tc;var B=g.stateNode;if(B&&B.__reactInternalMemoizedUnmaskedChildContext===y)return B.__reactInternalMemoizedMaskedChildContext;var W={},K;for(K in I)W[K]=y[K];return B&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=y,g.__reactInternalMemoizedMaskedChildContext=W),W}function fo(g){return g=g.childContextTypes,g!=null}function Rd(){Si(Ro),Si(Io)}function kd(g,y,I){if(Io.current!==Tc)throw Error(t(168));Mi(Io,y),Mi(Ro,I)}function Th(g,y,I){var B=g.stateNode;if(y=y.childContextTypes,typeof B.getChildContext!="function")return I;B=B.getChildContext();for(var W in B)if(!(W in y))throw Error(t(108,Ze(g)||"Unknown",W));return q({},I,B)}function pa(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||Tc,to=Io.current,Mi(Io,g),Mi(Ro,Ro.current),!0}function Cn(g,y,I){var B=g.stateNode;if(!B)throw Error(t(169));I?(g=Th(g,y,to),B.__reactInternalMemoizedMergedChildContext=g,Si(Ro),Si(Io),Mi(Io,g)):Si(Ro),Mi(Ro,I)}var os=null,_s=!1,ti=!1;function _l(g){os===null?os=[g]:os.push(g)}function vl(g){_s=!0,_l(g)}function cn(){if(!ti&&os!==null){ti=!0;var g=0,y=Zn;try{var I=os;for(Zn=1;g<I.length;g++){var B=I[g];do B=B(!0);while(B!==null)}os=null,_s=!1}catch(W){throw os!==null&&(os=os.slice(g+1)),Gi(oa,cn),W}finally{Zn=y,ti=!1}}return null}var Pr=[],qi=0,Up=null,Gc=0,ks=[],ko=0,dn=null,rn=1,Da="";function Yu(g,y){Pr[qi++]=Gc,Pr[qi++]=Up,Up=g,Gc=y}function Of(g,y,I){ks[ko++]=rn,ks[ko++]=Da,ks[ko++]=dn,dn=g;var B=rn;g=Da;var W=32-Tr(B)-1;B&=~(1<<W),I+=1;var K=32-Tr(y)+W;if(30<K){var pe=W-W%5;K=(B&(1<<pe)-1).toString(32),B>>=pe,W-=pe,rn=1<<32-Tr(y)+W|I<<W|B,Da=K+g}else rn=1<<K|I<<W|B,Da=g}function yu(g){g.return!==null&&(Yu(g,1),Of(g,1,0))}function qo(g){for(;g===Up;)Up=Pr[--qi],Pr[qi]=null,Gc=Pr[--qi],Pr[qi]=null;for(;g===dn;)dn=ks[--ko],ks[ko]=null,Da=ks[--ko],ks[ko]=null,rn=ks[--ko],ks[ko]=null}var as=null,fa=null,Ui=!1,ma=null;function bu(g,y){var I=Ou(5,null,null,0);I.elementType="DELETED",I.stateNode=y,I.return=g,y=g.deletions,y===null?(g.deletions=[I],g.flags|=16):y.push(I)}function Od(g,y){switch(g.tag){case 5:var I=g.type;return y=y.nodeType!==1||I.toLowerCase()!==y.nodeName.toLowerCase()?null:y,y!==null?(g.stateNode=y,as=g,fa=Xu(y.firstChild),!0):!1;case 6:return y=g.pendingProps===""||y.nodeType!==3?null:y,y!==null?(g.stateNode=y,as=g,fa=null,!0):!1;case 13:return y=y.nodeType!==8?null:y,y!==null?(I=dn!==null?{id:rn,overflow:Da}:null,g.memoizedState={dehydrated:y,treeContext:I,retryLane:1073741824},I=Ou(18,null,null,0),I.stateNode=y,I.return=g,g.child=I,as=g,fa=null,!0):!1;default:return!1}}function Ku(g){return(g.mode&1)!==0&&(g.flags&128)===0}function Gs(g){if(Ui){var y=fa;if(y){var I=y;if(!Od(g,y)){if(Ku(g))throw Error(t(418));y=Xu(I.nextSibling);var B=as;y&&Od(g,y)?bu(B,I):(g.flags=g.flags&-4097|2,Ui=!1,as=g)}}else{if(Ku(g))throw Error(t(418));g.flags=g.flags&-4097|2,Ui=!1,as=g}}}function Ld(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;as=g}function Wc(g){if(g!==as)return!1;if(!Ui)return Ld(g),Ui=!0,!1;var y;if((y=g.tag!==3)&&!(y=g.tag!==5)&&(y=g.type,y=y!=="head"&&y!=="body"&&!Yh(g.type,g.memoizedProps)),y&&(y=fa)){if(Ku(g))throw Jh(),Error(t(418));for(;y;)bu(g,y),y=Xu(y.nextSibling)}if(Ld(g),g.tag===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));e:{for(g=g.nextSibling,y=0;g;){if(g.nodeType===8){var I=g.data;if(I==="/$"){if(y===0){fa=Xu(g.nextSibling);break e}y--}else I!=="$"&&I!=="$!"&&I!=="$?"||y++}g=g.nextSibling}fa=null}}else fa=as?Xu(g.stateNode.nextSibling):null;return!0}function Jh(){for(var g=fa;g;)g=Xu(g.nextSibling)}function ga(){fa=as=null,Ui=!1}function yl(g){ma===null?ma=[g]:ma.push(g)}var zp=N.ReactCurrentBatchConfig;function Hl(g,y){if(g&&g.defaultProps){y=q({},y),g=g.defaultProps;for(var I in g)y[I]===void 0&&(y[I]=g[I]);return y}return y}var Tu=fi(null),Qh=null,$c=null,ls=null;function Eu(){ls=$c=Qh=null}function Ju(g){var y=Tu.current;Si(Tu),g._currentValue=y}function mo(g,y,I){for(;g!==null;){var B=g.alternate;if((g.childLanes&y)!==y?(g.childLanes|=y,B!==null&&(B.childLanes|=y)):B!==null&&(B.childLanes&y)!==y&&(B.childLanes|=y),g===I)break;g=g.return}}function Ba(g,y){Qh=g,ls=$c=null,g=g.dependencies,g!==null&&g.firstContext!==null&&(g.lanes&y&&(nn=!0),g.firstContext=null)}function vs(g){var y=g._currentValue;if(ls!==g)if(g={context:g,memoizedValue:y,next:null},$c===null){if(Qh===null)throw Error(t(308));$c=g,Qh.dependencies={lanes:0,firstContext:g}}else $c=$c.next=g;return y}var no=null;function Vc(g){no===null?no=[g]:no.push(g)}function Ws(g,y,I,B){var W=y.interleaved;return W===null?(I.next=I,Vc(y)):(I.next=W.next,W.next=I),y.interleaved=I,Pa(g,B)}function Pa(g,y){g.lanes|=y;var I=g.alternate;for(I!==null&&(I.lanes|=y),I=g,g=g.return;g!==null;)g.childLanes|=y,I=g.alternate,I!==null&&(I.childLanes|=y),I=g,g=g.return;return I.tag===3?I.stateNode:null}var Qu=!1;function hp(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jc(g,y){g=g.updateQueue,y.updateQueue===g&&(y.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function Zo(g,y){return{eventTime:g,lane:y,tag:0,payload:null,callback:null,next:null}}function mi(g,y,I){var B=g.updateQueue;if(B===null)return null;if(B=B.shared,(wi&2)!==0){var W=B.pending;return W===null?y.next=y:(y.next=W.next,W.next=y),B.pending=y,Pa(g,I)}return W=B.interleaved,W===null?(y.next=y,Vc(B)):(y.next=W.next,W.next=y),B.interleaved=y,Pa(g,I)}function wn(g,y,I){if(y=y.updateQueue,y!==null&&(y=y.shared,(I&4194240)!==0)){var B=y.lanes;B&=g.pendingLanes,I|=B,y.lanes=I,zo(g,I)}}function On(g,y){var I=g.updateQueue,B=g.alternate;if(B!==null&&(B=B.updateQueue,I===B)){var W=null,K=null;if(I=I.firstBaseUpdate,I!==null){do{var pe={eventTime:I.eventTime,lane:I.lane,tag:I.tag,payload:I.payload,callback:I.callback,next:null};K===null?W=K=pe:K=K.next=pe,I=I.next}while(I!==null);K===null?W=K=y:K=K.next=y}else W=K=y;I={baseState:B.baseState,firstBaseUpdate:W,lastBaseUpdate:K,shared:B.shared,effects:B.effects},g.updateQueue=I;return}g=I.lastBaseUpdate,g===null?I.firstBaseUpdate=y:g.next=y,I.lastBaseUpdate=y}function gr(g,y,I,B){var W=g.updateQueue;Qu=!1;var K=W.firstBaseUpdate,pe=W.lastBaseUpdate,Fe=W.shared.pending;if(Fe!==null){W.shared.pending=null;var Ke=Fe,$t=Ke.next;Ke.next=null,pe===null?K=$t:pe.next=$t,pe=Ke;var jt=g.alternate;jt!==null&&(jt=jt.updateQueue,Fe=jt.lastBaseUpdate,Fe!==pe&&(Fe===null?jt.firstBaseUpdate=$t:Fe.next=$t,jt.lastBaseUpdate=Ke))}if(K!==null){var en=W.baseState;pe=0,jt=$t=Ke=null,Fe=K;do{var Jt=Fe.lane,vn=Fe.eventTime;if((B&Jt)===Jt){jt!==null&&(jt=jt.next={eventTime:vn,lane:0,tag:Fe.tag,payload:Fe.payload,callback:Fe.callback,next:null});e:{var In=g,Ln=Fe;switch(Jt=y,vn=I,Ln.tag){case 1:if(In=Ln.payload,typeof In=="function"){en=In.call(vn,en,Jt);break e}en=In;break e;case 3:In.flags=In.flags&-65537|128;case 0:if(In=Ln.payload,Jt=typeof In=="function"?In.call(vn,en,Jt):In,Jt==null)break e;en=q({},en,Jt);break e;case 2:Qu=!0}}Fe.callback!==null&&Fe.lane!==0&&(g.flags|=64,Jt=W.effects,Jt===null?W.effects=[Fe]:Jt.push(Fe))}else vn={eventTime:vn,lane:Jt,tag:Fe.tag,payload:Fe.payload,callback:Fe.callback,next:null},jt===null?($t=jt=vn,Ke=en):jt=jt.next=vn,pe|=Jt;if(Fe=Fe.next,Fe===null){if(Fe=W.shared.pending,Fe===null)break;Jt=Fe,Fe=Jt.next,Jt.next=null,W.lastBaseUpdate=Jt,W.shared.pending=null}}while(!0);if(jt===null&&(Ke=en),W.baseState=Ke,W.firstBaseUpdate=$t,W.lastBaseUpdate=jt,y=W.shared.interleaved,y!==null){W=y;do pe|=W.lane,W=W.next;while(W!==y)}else K===null&&(W.shared.lanes=0);mp|=pe,g.lanes=pe,g.memoizedState=en}}function Ir(g,y,I){if(g=y.effects,y.effects=null,g!==null)for(y=0;y<g.length;y++){var B=g[y],W=B.callback;if(W!==null){if(B.callback=null,B=I,typeof W!="function")throw Error(t(191,W));W.call(B)}}}var Fr=new r.Component().refs;function Vs(g,y,I,B){y=g.memoizedState,I=I(B,y),I=I==null?y:q({},y,I),g.memoizedState=I,g.lanes===0&&(g.updateQueue.baseState=I)}var Ai={isMounted:function(g){return(g=g._reactInternals)?Bn(g)===g:!1},enqueueSetState:function(g,y,I){g=g._reactInternals;var B=nc(),W=Bd(g),K=Zo(B,W);K.payload=y,I!=null&&(K.callback=I),y=mi(g,K,W),y!==null&&(bo(y,g,W,B),wn(y,g,W))},enqueueReplaceState:function(g,y,I){g=g._reactInternals;var B=nc(),W=Bd(g),K=Zo(B,W);K.tag=1,K.payload=y,I!=null&&(K.callback=I),y=mi(g,K,W),y!==null&&(bo(y,g,W,B),wn(y,g,W))},enqueueForceUpdate:function(g,y){g=g._reactInternals;var I=nc(),B=Bd(g),W=Zo(I,B);W.tag=2,y!=null&&(W.callback=y),y=mi(g,W,B),y!==null&&(bo(y,g,B,I),wn(y,g,B))}};function zi(g,y,I,B,W,K,pe){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(B,K,pe):y.prototype&&y.prototype.isPureReactComponent?!mn(I,B)||!mn(W,K):!0}function Gl(g,y,I){var B=!1,W=Tc,K=y.contextType;return typeof K=="object"&&K!==null?K=vs(K):(W=fo(y)?to:Io.current,B=y.contextTypes,K=(B=B!=null)?Ec(g,W):Tc),y=new y(I,K),g.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Ai,g.stateNode=y,y._reactInternals=g,B&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=W,g.__reactInternalMemoizedMaskedChildContext=K),y}function $u(g,y,I,B){g=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(I,B),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(I,B),y.state!==g&&Ai.enqueueReplaceState(y,y.state,null)}function qu(g,y,I,B){var W=g.stateNode;W.props=I,W.state=g.memoizedState,W.refs=Fr,hp(g);var K=y.contextType;typeof K=="object"&&K!==null?W.context=vs(K):(K=fo(y)?to:Io.current,W.context=Ec(g,K)),W.state=g.memoizedState,K=y.getDerivedStateFromProps,typeof K=="function"&&(Vs(g,y,K,I),W.state=g.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof W.getSnapshotBeforeUpdate=="function"||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(y=W.state,typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount(),y!==W.state&&Ai.enqueueReplaceState(W,W.state,null),gr(g,I,W,B),W.state=g.memoizedState),typeof W.componentDidMount=="function"&&(g.flags|=4194308)}function Su(g,y,I){if(g=I.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(I._owner){if(I=I._owner,I){if(I.tag!==1)throw Error(t(309));var B=I.stateNode}if(!B)throw Error(t(147,g));var W=B,K=""+g;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===K?y.ref:(y=function(pe){var Fe=W.refs;Fe===Fr&&(Fe=W.refs={}),pe===null?delete Fe[K]:Fe[K]=pe},y._stringRef=K,y)}if(typeof g!="string")throw Error(t(284));if(!I._owner)throw Error(t(290,g))}return g}function Os(g,y){throw g=Object.prototype.toString.call(y),Error(t(31,g==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":g))}function ro(g){var y=g._init;return y(g._payload)}function qh(g){function y(_t,tt){if(g){var vt=_t.deletions;vt===null?(_t.deletions=[tt],_t.flags|=16):vt.push(tt)}}function I(_t,tt){if(!g)return null;for(;tt!==null;)y(_t,tt),tt=tt.sibling;return null}function B(_t,tt){for(_t=new Map;tt!==null;)tt.key!==null?_t.set(tt.key,tt):_t.set(tt.index,tt),tt=tt.sibling;return _t}function W(_t,tt){return _t=xh(_t,tt),_t.index=0,_t.sibling=null,_t}function K(_t,tt,vt){return _t.index=vt,g?(vt=_t.alternate,vt!==null?(vt=vt.index,vt<tt?(_t.flags|=2,tt):vt):(_t.flags|=2,tt)):(_t.flags|=1048576,tt)}function pe(_t){return g&&_t.alternate===null&&(_t.flags|=2),_t}function Fe(_t,tt,vt,sn){return tt===null||tt.tag!==6?(tt=Uf(vt,_t.mode,sn),tt.return=_t,tt):(tt=W(tt,vt),tt.return=_t,tt)}function Ke(_t,tt,vt,sn){var Hn=vt.type;return Hn===V?jt(_t,tt,vt.props.children,sn,vt.key):tt!==null&&(tt.elementType===Hn||typeof Hn=="object"&&Hn!==null&&Hn.$$typeof===ge&&ro(Hn)===tt.type)?(sn=W(tt,vt.props),sn.ref=Su(_t,tt,vt),sn.return=_t,sn):(sn=Im(vt.type,vt.key,vt.props,null,_t.mode,sn),sn.ref=Su(_t,tt,vt),sn.return=_t,sn)}function $t(_t,tt,vt,sn){return tt===null||tt.tag!==4||tt.stateNode.containerInfo!==vt.containerInfo||tt.stateNode.implementation!==vt.implementation?(tt=sd(vt,_t.mode,sn),tt.return=_t,tt):(tt=W(tt,vt.children||[]),tt.return=_t,tt)}function jt(_t,tt,vt,sn,Hn){return tt===null||tt.tag!==7?(tt=Kp(vt,_t.mode,sn,Hn),tt.return=_t,tt):(tt=W(tt,vt),tt.return=_t,tt)}function en(_t,tt,vt){if(typeof tt=="string"&&tt!==""||typeof tt=="number")return tt=Uf(""+tt,_t.mode,vt),tt.return=_t,tt;if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case F:return vt=Im(tt.type,tt.key,tt.props,null,_t.mode,vt),vt.ref=Su(_t,null,tt),vt.return=_t,vt;case z:return tt=sd(tt,_t.mode,vt),tt.return=_t,tt;case ge:var sn=tt._init;return en(_t,sn(tt._payload),vt)}if(wt(tt)||te(tt))return tt=Kp(tt,_t.mode,vt,null),tt.return=_t,tt;Os(_t,tt)}return null}function Jt(_t,tt,vt,sn){var Hn=tt!==null?tt.key:null;if(typeof vt=="string"&&vt!==""||typeof vt=="number")return Hn!==null?null:Fe(_t,tt,""+vt,sn);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case F:return vt.key===Hn?Ke(_t,tt,vt,sn):null;case z:return vt.key===Hn?$t(_t,tt,vt,sn):null;case ge:return Hn=vt._init,Jt(_t,tt,Hn(vt._payload),sn)}if(wt(vt)||te(vt))return Hn!==null?null:jt(_t,tt,vt,sn,null);Os(_t,vt)}return null}function vn(_t,tt,vt,sn,Hn){if(typeof sn=="string"&&sn!==""||typeof sn=="number")return _t=_t.get(vt)||null,Fe(tt,_t,""+sn,Hn);if(typeof sn=="object"&&sn!==null){switch(sn.$$typeof){case F:return _t=_t.get(sn.key===null?vt:sn.key)||null,Ke(tt,_t,sn,Hn);case z:return _t=_t.get(sn.key===null?vt:sn.key)||null,$t(tt,_t,sn,Hn);case ge:var Dn=sn._init;return vn(_t,tt,vt,Dn(sn._payload),Hn)}if(wt(sn)||te(sn))return _t=_t.get(vt)||null,jt(tt,_t,sn,Hn,null);Os(tt,sn)}return null}function In(_t,tt,vt,sn){for(var Hn=null,Dn=null,Vn=tt,dr=tt=0,Xa=null;Vn!==null&&dr<vt.length;dr++){Vn.index>dr?(Xa=Vn,Vn=null):Xa=Vn.sibling;var Ri=Jt(_t,Vn,vt[dr],sn);if(Ri===null){Vn===null&&(Vn=Xa);break}g&&Vn&&Ri.alternate===null&&y(_t,Vn),tt=K(Ri,tt,dr),Dn===null?Hn=Ri:Dn.sibling=Ri,Dn=Ri,Vn=Xa}if(dr===vt.length)return I(_t,Vn),Ui&&Yu(_t,dr),Hn;if(Vn===null){for(;dr<vt.length;dr++)Vn=en(_t,vt[dr],sn),Vn!==null&&(tt=K(Vn,tt,dr),Dn===null?Hn=Vn:Dn.sibling=Vn,Dn=Vn);return Ui&&Yu(_t,dr),Hn}for(Vn=B(_t,Vn);dr<vt.length;dr++)Xa=vn(Vn,_t,dr,vt[dr],sn),Xa!==null&&(g&&Xa.alternate!==null&&Vn.delete(Xa.key===null?dr:Xa.key),tt=K(Xa,tt,dr),Dn===null?Hn=Xa:Dn.sibling=Xa,Dn=Xa);return g&&Vn.forEach(function(ef){return y(_t,ef)}),Ui&&Yu(_t,dr),Hn}function Ln(_t,tt,vt,sn){var Hn=te(vt);if(typeof Hn!="function")throw Error(t(150));if(vt=Hn.call(vt),vt==null)throw Error(t(151));for(var Dn=Hn=null,Vn=tt,dr=tt=0,Xa=null,Ri=vt.next();Vn!==null&&!Ri.done;dr++,Ri=vt.next()){Vn.index>dr?(Xa=Vn,Vn=null):Xa=Vn.sibling;var ef=Jt(_t,Vn,Ri.value,sn);if(ef===null){Vn===null&&(Vn=Xa);break}g&&Vn&&ef.alternate===null&&y(_t,Vn),tt=K(ef,tt,dr),Dn===null?Hn=ef:Dn.sibling=ef,Dn=ef,Vn=Xa}if(Ri.done)return I(_t,Vn),Ui&&Yu(_t,dr),Hn;if(Vn===null){for(;!Ri.done;dr++,Ri=vt.next())Ri=en(_t,Ri.value,sn),Ri!==null&&(tt=K(Ri,tt,dr),Dn===null?Hn=Ri:Dn.sibling=Ri,Dn=Ri);return Ui&&Yu(_t,dr),Hn}for(Vn=B(_t,Vn);!Ri.done;dr++,Ri=vt.next())Ri=vn(Vn,_t,dr,Ri.value,sn),Ri!==null&&(g&&Ri.alternate!==null&&Vn.delete(Ri.key===null?dr:Ri.key),tt=K(Ri,tt,dr),Dn===null?Hn=Ri:Dn.sibling=Ri,Dn=Ri);return g&&Vn.forEach(function(h0){return y(_t,h0)}),Ui&&Yu(_t,dr),Hn}function Js(_t,tt,vt,sn){if(typeof vt=="object"&&vt!==null&&vt.type===V&&vt.key===null&&(vt=vt.props.children),typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case F:e:{for(var Hn=vt.key,Dn=tt;Dn!==null;){if(Dn.key===Hn){if(Hn=vt.type,Hn===V){if(Dn.tag===7){I(_t,Dn.sibling),tt=W(Dn,vt.props.children),tt.return=_t,_t=tt;break e}}else if(Dn.elementType===Hn||typeof Hn=="object"&&Hn!==null&&Hn.$$typeof===ge&&ro(Hn)===Dn.type){I(_t,Dn.sibling),tt=W(Dn,vt.props),tt.ref=Su(_t,Dn,vt),tt.return=_t,_t=tt;break e}I(_t,Dn);break}else y(_t,Dn);Dn=Dn.sibling}vt.type===V?(tt=Kp(vt.props.children,_t.mode,sn,vt.key),tt.return=_t,_t=tt):(sn=Im(vt.type,vt.key,vt.props,null,_t.mode,sn),sn.ref=Su(_t,tt,vt),sn.return=_t,_t=sn)}return pe(_t);case z:e:{for(Dn=vt.key;tt!==null;){if(tt.key===Dn)if(tt.tag===4&&tt.stateNode.containerInfo===vt.containerInfo&&tt.stateNode.implementation===vt.implementation){I(_t,tt.sibling),tt=W(tt,vt.children||[]),tt.return=_t,_t=tt;break e}else{I(_t,tt);break}else y(_t,tt);tt=tt.sibling}tt=sd(vt,_t.mode,sn),tt.return=_t,_t=tt}return pe(_t);case ge:return Dn=vt._init,Js(_t,tt,Dn(vt._payload),sn)}if(wt(vt))return In(_t,tt,vt,sn);if(te(vt))return Ln(_t,tt,vt,sn);Os(_t,vt)}return typeof vt=="string"&&vt!==""||typeof vt=="number"?(vt=""+vt,tt!==null&&tt.tag===6?(I(_t,tt.sibling),tt=W(tt,vt),tt.return=_t,_t=tt):(I(_t,tt),tt=Uf(vt,_t.mode,sn),tt.return=_t,_t=tt),pe(_t)):I(_t,tt)}return Js}var _a=qh(!0),wu=qh(!1),xu={},js=fi(xu),go=fi(xu),Fa=fi(xu);function _o(g){if(g===xu)throw Error(t(174));return g}function Zu(g,y){switch(Mi(Fa,y),Mi(go,g),Mi(js,xu),g=y.nodeType,g){case 9:case 11:y=(y=y.documentElement)?y.namespaceURI:xt(null,"");break;default:g=g===8?y.parentNode:y,y=g.namespaceURI||null,g=g.tagName,y=xt(y,g)}Si(js),Mi(js,y)}function Cu(){Si(js),Si(go),Si(Fa)}function Eh(g){_o(Fa.current);var y=_o(js.current),I=xt(y,g.type);y!==I&&(Mi(go,g),Mi(js,I))}function Xc(g){go.current===g&&(Si(js),Si(go))}var br=fi(0);function ji(g){for(var y=g;y!==null;){if(y.tag===13){var I=y.memoizedState;if(I!==null&&(I=I.dehydrated,I===null||I.data==="$?"||I.data==="$!"))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if(y.flags&128)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var ys=[];function ea(){for(var g=0;g<ys.length;g++)ys[g]._workInProgressVersionPrimary=null;ys.length=0}var Ls=N.ReactCurrentDispatcher,Gn=N.ReactCurrentBatchConfig,Sc=0,on=null,ni=null,Zi=null,bl=!1,Ua=!1,Lt=0,va=0;function Rr(){throw Error(t(321))}function wc(g,y){if(y===null)return!1;for(var I=0;I<y.length&&I<g.length;I++)if(!yt(g[I],y[I]))return!1;return!0}function Zh(g,y,I,B,W,K){if(Sc=K,on=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,Ls.current=g===null||g.memoizedState===null?f:S,g=I(B,W),Ua){K=0;do{if(Ua=!1,Lt=0,25<=K)throw Error(t(301));K+=1,Zi=ni=null,y.updateQueue=null,Ls.current=M,g=I(B,W)}while(Ua)}if(Ls.current=c,y=ni!==null&&ni.next!==null,Sc=0,Zi=ni=on=null,bl=!1,y)throw Error(t(300));return g}function Yc(){var g=Lt!==0;return Lt=0,g}function es(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zi===null?on.memoizedState=Zi=g:Zi=Zi.next=g,Zi}function bs(){if(ni===null){var g=on.alternate;g=g!==null?g.memoizedState:null}else g=ni.next;var y=Zi===null?on.memoizedState:Zi.next;if(y!==null)Zi=y,ni=g;else{if(g===null)throw Error(t(310));ni=g,g={memoizedState:ni.memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},Zi===null?on.memoizedState=Zi=g:Zi=Zi.next=g}return Zi}function $h(g,y){return typeof y=="function"?y(g):y}function Xs(g){var y=bs(),I=y.queue;if(I===null)throw Error(t(311));I.lastRenderedReducer=g;var B=ni,W=B.baseQueue,K=I.pending;if(K!==null){if(W!==null){var pe=W.next;W.next=K.next,K.next=pe}B.baseQueue=W=K,I.pending=null}if(W!==null){K=W.next,B=B.baseState;var Fe=pe=null,Ke=null,$t=K;do{var jt=$t.lane;if((Sc&jt)===jt)Ke!==null&&(Ke=Ke.next={lane:0,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null}),B=$t.hasEagerState?$t.eagerState:g(B,$t.action);else{var en={lane:jt,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null};Ke===null?(Fe=Ke=en,pe=B):Ke=Ke.next=en,on.lanes|=jt,mp|=jt}$t=$t.next}while($t!==null&&$t!==K);Ke===null?pe=B:Ke.next=Fe,yt(B,y.memoizedState)||(nn=!0),y.memoizedState=B,y.baseState=pe,y.baseQueue=Ke,I.lastRenderedState=B}if(g=I.interleaved,g!==null){W=g;do K=W.lane,on.lanes|=K,mp|=K,W=W.next;while(W!==g)}else W===null&&(I.lanes=0);return[y.memoizedState,I.dispatch]}function Wl(g){var y=bs(),I=y.queue;if(I===null)throw Error(t(311));I.lastRenderedReducer=g;var B=I.dispatch,W=I.pending,K=y.memoizedState;if(W!==null){I.pending=null;var pe=W=W.next;do K=g(K,pe.action),pe=pe.next;while(pe!==W);yt(K,y.memoizedState)||(nn=!0),y.memoizedState=K,y.baseQueue===null&&(y.baseState=K),I.lastRenderedState=K}return[K,B]}function Kc(){}function Jc(g,y){var I=on,B=bs(),W=y(),K=!yt(B.memoizedState,W);if(K&&(B.memoizedState=W,nn=!0),B=B.queue,Iu(Ys.bind(null,I,B,g),[g]),B.getSnapshot!==y||K||Zi!==null&&Zi.memoizedState.tag&1){if(I.flags|=2048,Au(9,vo.bind(null,I,B,W,y),void 0,null),El===null)throw Error(t(349));Sc&30||ec(I,y,W)}return W}function ec(g,y,I){g.flags|=16384,g={getSnapshot:y,value:I},y=on.updateQueue,y===null?(y={lastEffect:null,stores:null},on.updateQueue=y,y.stores=[g]):(I=y.stores,I===null?y.stores=[g]:I.push(g))}function vo(g,y,I,B){y.value=I,y.getSnapshot=B,Mu(y)&&Qc(g)}function Ys(g,y,I){return I(function(){Mu(y)&&Qc(g)})}function Mu(g){var y=g.getSnapshot;g=g.value;try{var I=y();return!yt(g,I)}catch{return!0}}function Qc(g){var y=Pa(g,1);y!==null&&bo(y,g,1,-1)}function za(g){var y=es();return typeof g=="function"&&(g=g()),y.memoizedState=y.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$h,lastRenderedState:g},y.queue=g,g=g.dispatch=td.bind(null,on,g),[y.memoizedState,g]}function Au(g,y,I,B){return g={tag:g,create:y,destroy:I,deps:B,next:null},y=on.updateQueue,y===null?(y={lastEffect:null,stores:null},on.updateQueue=y,y.lastEffect=g.next=g):(I=y.lastEffect,I===null?y.lastEffect=g.next=g:(B=I.next,I.next=g,g.next=B,y.lastEffect=g)),g}function qc(){return bs().memoizedState}function Zc(g,y,I,B){var W=es();on.flags|=g,W.memoizedState=Au(1|y,I,void 0,B===void 0?null:B)}function io(g,y,I,B){var W=bs();B=B===void 0?null:B;var K=void 0;if(ni!==null){var pe=ni.memoizedState;if(K=pe.destroy,B!==null&&wc(B,pe.deps)){W.memoizedState=Au(y,I,K,B);return}}on.flags|=g,W.memoizedState=Au(1|y,I,K,B)}function Ns(g,y){return Zc(8390656,8,g,y)}function Iu(g,y){return io(2048,8,g,y)}function Tl(g,y){return io(4,2,g,y)}function Ks(g,y){return io(4,4,g,y)}function Ha(g,y){if(typeof y=="function")return g=g(),y(g),function(){y(null)};if(y!=null)return g=g(),y.current=g,function(){y.current=null}}function ya(g,y,I){return I=I!=null?I.concat([g]):null,io(4,4,Ha.bind(null,y,g),I)}function Vl(){}function ts(g,y){var I=bs();y=y===void 0?null:y;var B=I.memoizedState;return B!==null&&y!==null&&wc(y,B[1])?B[0]:(I.memoizedState=[g,y],g)}function yo(g,y){var I=bs();y=y===void 0?null:y;var B=I.memoizedState;return B!==null&&y!==null&&wc(y,B[1])?B[0]:(g=g(),I.memoizedState=[g,y],g)}function Sh(g,y,I){return Sc&21?(yt(I,y)||(I=xo(),on.lanes|=I,mp|=I,g.baseState=!0),y):(g.baseState&&(g.baseState=!1,nn=!0),g.memoizedState=I)}function ed(g,y){var I=Zn;Zn=I!==0&&4>I?I:4,g(!0);var B=Gn.transition;Gn.transition={};try{g(!1),y()}finally{Zn=I,Gn.transition=B}}function Ga(){return bs().memoizedState}function jl(g,y,I){var B=Bd(g);if(I={lane:B,action:I,hasEagerState:!1,eagerState:null,next:null},xc(g))Hp(y,I);else if(I=Ws(g,y,I,B),I!==null){var W=nc();bo(I,g,B,W),$(I,y,B)}}function td(g,y,I){var B=Bd(g),W={lane:B,action:I,hasEagerState:!1,eagerState:null,next:null};if(xc(g))Hp(y,W);else{var K=g.alternate;if(g.lanes===0&&(K===null||K.lanes===0)&&(K=y.lastRenderedReducer,K!==null))try{var pe=y.lastRenderedState,Fe=K(pe,I);if(W.hasEagerState=!0,W.eagerState=Fe,yt(Fe,pe)){var Ke=y.interleaved;Ke===null?(W.next=W,Vc(y)):(W.next=Ke.next,Ke.next=W),y.interleaved=W;return}}catch{}finally{}I=Ws(g,y,W,B),I!==null&&(W=nc(),bo(I,g,B,W),$(I,y,B))}}function xc(g){var y=g.alternate;return g===on||y!==null&&y===on}function Hp(g,y){Ua=bl=!0;var I=g.pending;I===null?y.next=y:(y.next=I.next,I.next=y),g.pending=y}function $(g,y,I){if(I&4194240){var B=y.lanes;B&=g.pendingLanes,I|=B,y.lanes=I,zo(g,I)}}var c={readContext:vs,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useInsertionEffect:Rr,useLayoutEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useMutableSource:Rr,useSyncExternalStore:Rr,useId:Rr,unstable_isNewReconciler:!1},f={readContext:vs,useCallback:function(g,y){return es().memoizedState=[g,y===void 0?null:y],g},useContext:vs,useEffect:Ns,useImperativeHandle:function(g,y,I){return I=I!=null?I.concat([g]):null,Zc(4194308,4,Ha.bind(null,y,g),I)},useLayoutEffect:function(g,y){return Zc(4194308,4,g,y)},useInsertionEffect:function(g,y){return Zc(4,2,g,y)},useMemo:function(g,y){var I=es();return y=y===void 0?null:y,g=g(),I.memoizedState=[g,y],g},useReducer:function(g,y,I){var B=es();return y=I!==void 0?I(y):y,B.memoizedState=B.baseState=y,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:y},B.queue=g,g=g.dispatch=jl.bind(null,on,g),[B.memoizedState,g]},useRef:function(g){var y=es();return g={current:g},y.memoizedState=g},useState:za,useDebugValue:Vl,useDeferredValue:function(g){return es().memoizedState=g},useTransition:function(){var g=za(!1),y=g[0];return g=ed.bind(null,g[1]),es().memoizedState=g,[y,g]},useMutableSource:function(){},useSyncExternalStore:function(g,y,I){var B=on,W=es();if(Ui){if(I===void 0)throw Error(t(407));I=I()}else{if(I=y(),El===null)throw Error(t(349));Sc&30||ec(B,y,I)}W.memoizedState=I;var K={value:I,getSnapshot:y};return W.queue=K,Ns(Ys.bind(null,B,K,g),[g]),B.flags|=2048,Au(9,vo.bind(null,B,K,I,y),void 0,null),I},useId:function(){var g=es(),y=El.identifierPrefix;if(Ui){var I=Da,B=rn;I=(B&~(1<<32-Tr(B)-1)).toString(32)+I,y=":"+y+"R"+I,I=Lt++,0<I&&(y+="H"+I.toString(32)),y+=":"}else I=va++,y=":"+y+"r"+I.toString(32)+":";return g.memoizedState=y},unstable_isNewReconciler:!1},S={readContext:vs,useCallback:ts,useContext:vs,useEffect:Iu,useImperativeHandle:ya,useInsertionEffect:Tl,useLayoutEffect:Ks,useMemo:yo,useReducer:Xs,useRef:qc,useState:function(){return Xs($h)},useDebugValue:Vl,useDeferredValue:function(g){var y=bs();return Sh(y,ni.memoizedState,g)},useTransition:function(){var g=Xs($h)[0],y=bs().memoizedState;return[g,y]},useMutableSource:Kc,useSyncExternalStore:Jc,useId:Ga,unstable_isNewReconciler:!1},M={readContext:vs,useCallback:ts,useContext:vs,useEffect:Iu,useImperativeHandle:ya,useInsertionEffect:Tl,useLayoutEffect:Ks,useMemo:yo,useReducer:Wl,useRef:qc,useState:function(){return Wl($h)},useDebugValue:Vl,useDeferredValue:function(g){var y=bs();return ni===null?y.memoizedState=g:Sh(y,ni.memoizedState,g)},useTransition:function(){var g=Wl($h)[0],y=bs().memoizedState;return[g,y]},useMutableSource:Kc,useSyncExternalStore:Jc,useId:Ga,unstable_isNewReconciler:!1};function L(g,y){try{var I="",B=y;do I+=Ve(B),B=B.return;while(B);var W=I}catch(K){W=`
Error generating stack: `+K.message+`
`+K.stack}return{value:g,source:y,stack:W,digest:null}}function H(g,y,I){return{value:g,source:null,stack:I??null,digest:y??null}}function re(g,y){try{console.error(y.value)}catch(I){setTimeout(function(){throw I})}}var Se=typeof WeakMap=="function"?WeakMap:Map;function We(g,y,I){I=Zo(-1,I),I.tag=3,I.payload={element:null};var B=y.value;return I.callback=function(){yg||(yg=!0,bg=B),re(g,y)},I}function gt(g,y,I){I=Zo(-1,I),I.tag=3;var B=g.type.getDerivedStateFromError;if(typeof B=="function"){var W=y.value;I.payload=function(){return B(W)},I.callback=function(){re(g,y)}}var K=g.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(I.callback=function(){re(g,y),typeof B!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var pe=y.stack;this.componentDidCatch(y.value,{componentStack:pe!==null?pe:""})}),I}function zt(g,y,I){var B=g.pingCache;if(B===null){B=g.pingCache=new Se;var W=new Set;B.set(y,W)}else W=B.get(y),W===void 0&&(W=new Set,B.set(y,W));W.has(I)||(W.add(I),g=Rv.bind(null,g,y,I),y.then(g,g))}function Zt(g){do{var y;if((y=g.tag===13)&&(y=g.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return g;g=g.return}while(g!==null);return null}function hn(g,y,I,B,W){return g.mode&1?(g.flags|=65536,g.lanes=W,g):(g===y?g.flags|=65536:(g.flags|=128,I.flags|=131072,I.flags&=-52805,I.tag===1&&(I.alternate===null?I.tag=17:(y=Zo(-1,1),y.tag=2,mi(I,y,1))),I.lanes|=1),g)}var an=N.ReactCurrentOwner,nn=!1;function _r(g,y,I,B){y.child=g===null?wu(y,null,I,B):_a(y,g.child,I,B)}function ft(g,y,I,B,W){I=I.render;var K=y.ref;return Ba(y,W),B=Zh(g,y,I,B,K,W),I=Yc(),g!==null&&!nn?(y.updateQueue=g.updateQueue,y.flags&=-2053,g.lanes&=~W,rd(g,y,W)):(Ui&&I&&yu(y),y.flags|=1,_r(g,y,B,W),y.child)}function Ee(g,y,I,B,W){if(g===null){var K=I.type;return typeof K=="function"&&!a_(K)&&K.defaultProps===void 0&&I.compare===null&&I.defaultProps===void 0?(y.tag=15,y.type=K,Me(g,y,K,B,W)):(g=Im(I.type,null,B,y,y.mode,W),g.ref=y.ref,g.return=y,y.child=g)}if(K=g.child,(g.lanes&W)===0){var pe=K.memoizedProps;if(I=I.compare,I=I!==null?I:mn,I(pe,B)&&g.ref===y.ref)return rd(g,y,W)}return y.flags|=1,g=xh(K,B),g.ref=y.ref,g.return=y,y.child=g}function Me(g,y,I,B,W){if(g!==null){var K=g.memoizedProps;if(mn(K,B)&&g.ref===y.ref)if(nn=!1,y.pendingProps=B=K,(g.lanes&W)!==0)g.flags&131072&&(nn=!0);else return y.lanes=g.lanes,rd(g,y,W)}return Kt(g,y,I,B,W)}function Xe(g,y,I){var B=y.pendingProps,W=B.children,K=g!==null?g.memoizedState:null;if(B.mode==="hidden")if(!(y.mode&1))y.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mi(Df,$l),$l|=I;else{if(!(I&1073741824))return g=K!==null?K.baseLanes|I:I,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:g,cachePool:null,transitions:null},y.updateQueue=null,Mi(Df,$l),$l|=g,null;y.memoizedState={baseLanes:0,cachePool:null,transitions:null},B=K!==null?K.baseLanes:I,Mi(Df,$l),$l|=B}else K!==null?(B=K.baseLanes|I,y.memoizedState=null):B=I,Mi(Df,$l),$l|=B;return _r(g,y,W,I),y.child}function kt(g,y){var I=y.ref;(g===null&&I!==null||g!==null&&g.ref!==I)&&(y.flags|=512,y.flags|=2097152)}function Kt(g,y,I,B,W){var K=fo(I)?to:Io.current;return K=Ec(y,K),Ba(y,W),I=Zh(g,y,I,B,K,W),B=Yc(),g!==null&&!nn?(y.updateQueue=g.updateQueue,y.flags&=-2053,g.lanes&=~W,rd(g,y,W)):(Ui&&B&&yu(y),y.flags|=1,_r(g,y,I,W),y.child)}function ln(g,y,I,B,W){if(fo(I)){var K=!0;pa(y)}else K=!1;if(Ba(y,W),y.stateNode===null)Lf(g,y),Gl(y,I,B),qu(y,I,B,W),B=!0;else if(g===null){var pe=y.stateNode,Fe=y.memoizedProps;pe.props=Fe;var Ke=pe.context,$t=I.contextType;typeof $t=="object"&&$t!==null?$t=vs($t):($t=fo(I)?to:Io.current,$t=Ec(y,$t));var jt=I.getDerivedStateFromProps,en=typeof jt=="function"||typeof pe.getSnapshotBeforeUpdate=="function";en||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Fe!==B||Ke!==$t)&&$u(y,pe,B,$t),Qu=!1;var Jt=y.memoizedState;pe.state=Jt,gr(y,B,pe,W),Ke=y.memoizedState,Fe!==B||Jt!==Ke||Ro.current||Qu?(typeof jt=="function"&&(Vs(y,I,jt,B),Ke=y.memoizedState),(Fe=Qu||zi(y,I,Fe,B,Jt,Ke,$t))?(en||typeof pe.UNSAFE_componentWillMount!="function"&&typeof pe.componentWillMount!="function"||(typeof pe.componentWillMount=="function"&&pe.componentWillMount(),typeof pe.UNSAFE_componentWillMount=="function"&&pe.UNSAFE_componentWillMount()),typeof pe.componentDidMount=="function"&&(y.flags|=4194308)):(typeof pe.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=B,y.memoizedState=Ke),pe.props=B,pe.state=Ke,pe.context=$t,B=Fe):(typeof pe.componentDidMount=="function"&&(y.flags|=4194308),B=!1)}else{pe=y.stateNode,jc(g,y),Fe=y.memoizedProps,$t=y.type===y.elementType?Fe:Hl(y.type,Fe),pe.props=$t,en=y.pendingProps,Jt=pe.context,Ke=I.contextType,typeof Ke=="object"&&Ke!==null?Ke=vs(Ke):(Ke=fo(I)?to:Io.current,Ke=Ec(y,Ke));var vn=I.getDerivedStateFromProps;(jt=typeof vn=="function"||typeof pe.getSnapshotBeforeUpdate=="function")||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Fe!==en||Jt!==Ke)&&$u(y,pe,B,Ke),Qu=!1,Jt=y.memoizedState,pe.state=Jt,gr(y,B,pe,W);var In=y.memoizedState;Fe!==en||Jt!==In||Ro.current||Qu?(typeof vn=="function"&&(Vs(y,I,vn,B),In=y.memoizedState),($t=Qu||zi(y,I,$t,B,Jt,In,Ke)||!1)?(jt||typeof pe.UNSAFE_componentWillUpdate!="function"&&typeof pe.componentWillUpdate!="function"||(typeof pe.componentWillUpdate=="function"&&pe.componentWillUpdate(B,In,Ke),typeof pe.UNSAFE_componentWillUpdate=="function"&&pe.UNSAFE_componentWillUpdate(B,In,Ke)),typeof pe.componentDidUpdate=="function"&&(y.flags|=4),typeof pe.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof pe.componentDidUpdate!="function"||Fe===g.memoizedProps&&Jt===g.memoizedState||(y.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Fe===g.memoizedProps&&Jt===g.memoizedState||(y.flags|=1024),y.memoizedProps=B,y.memoizedState=In),pe.props=B,pe.state=In,pe.context=Ke,B=$t):(typeof pe.componentDidUpdate!="function"||Fe===g.memoizedProps&&Jt===g.memoizedState||(y.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Fe===g.memoizedProps&&Jt===g.memoizedState||(y.flags|=1024),B=!1)}return fn(g,y,I,B,K,W)}function fn(g,y,I,B,W,K){kt(g,y);var pe=(y.flags&128)!==0;if(!B&&!pe)return W&&Cn(y,I,!1),rd(g,y,K);B=y.stateNode,an.current=y;var Fe=pe&&typeof I.getDerivedStateFromError!="function"?null:B.render();return y.flags|=1,g!==null&&pe?(y.child=_a(y,g.child,null,K),y.child=_a(y,null,Fe,K)):_r(g,y,Fe,K),y.memoizedState=B.state,W&&Cn(y,I,!0),y.child}function kn(g){var y=g.stateNode;y.pendingContext?kd(g,y.pendingContext,y.pendingContext!==y.context):y.context&&kd(g,y.context,!1),Zu(g,y.containerInfo)}function Wn(g,y,I,B,W){return ga(),yl(W),y.flags|=256,_r(g,y,I,B),y.child}var hr={dehydrated:null,treeContext:null,retryLane:0};function Xl(g){return{baseLanes:g,cachePool:null,transitions:null}}function vm(g,y,I){var B=y.pendingProps,W=br.current,K=!1,pe=(y.flags&128)!==0,Fe;if((Fe=pe)||(Fe=g!==null&&g.memoizedState===null?!1:(W&2)!==0),Fe?(K=!0,y.flags&=-129):(g===null||g.memoizedState!==null)&&(W|=1),Mi(br,W&1),g===null)return Gs(y),g=y.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?(y.mode&1?g.data==="$!"?y.lanes=8:y.lanes=1073741824:y.lanes=1,null):(pe=B.children,g=B.fallback,K?(B=y.mode,K=y.child,pe={mode:"hidden",children:pe},!(B&1)&&K!==null?(K.childLanes=0,K.pendingProps=pe):K=Jp(pe,B,0,null),g=Kp(g,B,I,null),K.return=y,g.return=y,K.sibling=g,y.child=K,y.child.memoizedState=Xl(I),y.memoizedState=hr,g):Gp(y,pe));if(W=g.memoizedState,W!==null&&(Fe=W.dehydrated,Fe!==null))return nd(g,y,pe,B,Fe,W,I);if(K){K=B.fallback,pe=y.mode,W=g.child,Fe=W.sibling;var Ke={mode:"hidden",children:B.children};return!(pe&1)&&y.child!==W?(B=y.child,B.childLanes=0,B.pendingProps=Ke,y.deletions=null):(B=xh(W,Ke),B.subtreeFlags=W.subtreeFlags&14680064),Fe!==null?K=xh(Fe,K):(K=Kp(K,pe,I,null),K.flags|=2),K.return=y,B.return=y,B.sibling=K,y.child=B,B=K,K=y.child,pe=g.child.memoizedState,pe=pe===null?Xl(I):{baseLanes:pe.baseLanes|I,cachePool:null,transitions:pe.transitions},K.memoizedState=pe,K.childLanes=g.childLanes&~I,y.memoizedState=hr,B}return K=g.child,g=K.sibling,B=xh(K,{mode:"visible",children:B.children}),!(y.mode&1)&&(B.lanes=I),B.return=y,B.sibling=null,g!==null&&(I=y.deletions,I===null?(y.deletions=[g],y.flags|=16):I.push(g)),y.child=B,y.memoizedState=null,B}function Gp(g,y){return y=Jp({mode:"visible",children:y},g.mode,0,null),y.return=g,g.child=y}function jn(g,y,I,B){return B!==null&&yl(B),_a(y,g.child,null,I),g=Gp(y,y.pendingProps.children),g.flags|=2,y.memoizedState=null,g}function nd(g,y,I,B,W,K,pe){if(I)return y.flags&256?(y.flags&=-257,B=H(Error(t(422))),jn(g,y,pe,B)):y.memoizedState!==null?(y.child=g.child,y.flags|=128,null):(K=B.fallback,W=y.mode,B=Jp({mode:"visible",children:B.children},W,0,null),K=Kp(K,W,pe,null),K.flags|=2,B.return=y,K.return=y,B.sibling=K,y.child=B,y.mode&1&&_a(y,g.child,null,pe),y.child.memoizedState=Xl(pe),y.memoizedState=hr,K);if(!(y.mode&1))return jn(g,y,pe,null);if(W.data==="$!"){if(B=W.nextSibling&&W.nextSibling.dataset,B)var Fe=B.dgst;return B=Fe,K=Error(t(419)),B=H(K,B,void 0),jn(g,y,pe,B)}if(Fe=(pe&g.childLanes)!==0,nn||Fe){if(B=El,B!==null){switch(pe&-pe){case 4:W=2;break;case 16:W=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:W=32;break;case 536870912:W=268435456;break;default:W=0}W=W&(B.suspendedLanes|pe)?0:W,W!==0&&W!==K.retryLane&&(K.retryLane=W,Pa(g,W),bo(B,g,W,-1))}return Cm(),B=H(Error(t(421))),jn(g,y,pe,B)}return W.data==="$?"?(y.flags|=128,y.child=g.child,y=Am.bind(null,g),W._reactRetry=y,null):(g=K.treeContext,fa=Xu(W.nextSibling),as=y,Ui=!0,ma=null,g!==null&&(ks[ko++]=rn,ks[ko++]=Da,ks[ko++]=dn,rn=g.id,Da=g.overflow,dn=y),y=Gp(y,B.children),y.flags|=4096,y)}function r_(g,y,I){g.lanes|=y;var B=g.alternate;B!==null&&(B.lanes|=y),mo(g.return,y,I)}function Ru(g,y,I,B,W){var K=g.memoizedState;K===null?g.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:B,tail:I,tailMode:W}:(K.isBackwards=y,K.rendering=null,K.renderingStartTime=0,K.last=B,K.tail=I,K.tailMode=W)}function ba(g,y,I){var B=y.pendingProps,W=B.revealOrder,K=B.tail;if(_r(g,y,B.children,I),B=br.current,(B&2)!==0)B=B&1|2,y.flags|=128;else{if(g!==null&&g.flags&128)e:for(g=y.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&r_(g,I,y);else if(g.tag===19)r_(g,I,y);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===y)break e;for(;g.sibling===null;){if(g.return===null||g.return===y)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}B&=1}if(Mi(br,B),(y.mode&1)===0)y.memoizedState=null;else switch(W){case"forwards":for(I=y.child,W=null;I!==null;)g=I.alternate,g!==null&&ji(g)===null&&(W=I),I=I.sibling;I=W,I===null?(W=y.child,y.child=null):(W=I.sibling,I.sibling=null),Ru(y,!1,W,I,K);break;case"backwards":for(I=null,W=y.child,y.child=null;W!==null;){if(g=W.alternate,g!==null&&ji(g)===null){y.child=W;break}g=W.sibling,W.sibling=I,I=W,W=g}Ru(y,!0,I,null,K);break;case"together":Ru(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function Lf(g,y){!(y.mode&1)&&g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2)}function rd(g,y,I){if(g!==null&&(y.dependencies=g.dependencies),mp|=y.lanes,(I&y.childLanes)===0)return null;if(g!==null&&y.child!==g.child)throw Error(t(153));if(y.child!==null){for(g=y.child,I=xh(g,g.pendingProps),y.child=I,I.return=y;g.sibling!==null;)g=g.sibling,I=I.sibling=xh(g,g.pendingProps),I.return=y;I.sibling=null}return y.child}function Yl(g,y,I){switch(y.tag){case 3:kn(y),ga();break;case 5:Eh(y);break;case 1:fo(y.type)&&pa(y);break;case 4:Zu(y,y.stateNode.containerInfo);break;case 10:var B=y.type._context,W=y.memoizedProps.value;Mi(Tu,B._currentValue),B._currentValue=W;break;case 13:if(B=y.memoizedState,B!==null)return B.dehydrated!==null?(Mi(br,br.current&1),y.flags|=128,null):I&y.child.childLanes?vm(g,y,I):(Mi(br,br.current&1),g=rd(g,y,I),g!==null?g.sibling:null);Mi(br,br.current&1);break;case 19:if(B=(I&y.childLanes)!==0,(g.flags&128)!==0){if(B)return ba(g,y,I);y.flags|=128}if(W=y.memoizedState,W!==null&&(W.rendering=null,W.tail=null,W.lastEffect=null),Mi(br,br.current),B)break;return null;case 22:case 23:return y.lanes=0,Xe(g,y,I)}return rd(g,y,I)}var tn,e0,t0,mg;tn=function(g,y){for(var I=y.child;I!==null;){if(I.tag===5||I.tag===6)g.appendChild(I.stateNode);else if(I.tag!==4&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===y)break;for(;I.sibling===null;){if(I.return===null||I.return===y)return;I=I.return}I.sibling.return=I.return,I=I.sibling}},e0=function(){},t0=function(g,y,I,B){var W=g.memoizedProps;if(W!==B){g=y.stateNode,_o(js.current);var K=null;switch(I){case"input":W=it(g,W),B=it(g,B),K=[];break;case"select":W=q({},W,{value:void 0}),B=q({},B,{value:void 0}),K=[];break;case"textarea":W=be(g,W),B=be(g,B),K=[];break;default:typeof W.onClick!="function"&&typeof B.onClick=="function"&&(g.onclick=gl)}Bt(I,B);var pe;I=null;for($t in W)if(!B.hasOwnProperty($t)&&W.hasOwnProperty($t)&&W[$t]!=null)if($t==="style"){var Fe=W[$t];for(pe in Fe)Fe.hasOwnProperty(pe)&&(I||(I={}),I[pe]="")}else $t!=="dangerouslySetInnerHTML"&&$t!=="children"&&$t!=="suppressContentEditableWarning"&&$t!=="suppressHydrationWarning"&&$t!=="autoFocus"&&(s.hasOwnProperty($t)?K||(K=[]):(K=K||[]).push($t,null));for($t in B){var Ke=B[$t];if(Fe=W!=null?W[$t]:void 0,B.hasOwnProperty($t)&&Ke!==Fe&&(Ke!=null||Fe!=null))if($t==="style")if(Fe){for(pe in Fe)!Fe.hasOwnProperty(pe)||Ke&&Ke.hasOwnProperty(pe)||(I||(I={}),I[pe]="");for(pe in Ke)Ke.hasOwnProperty(pe)&&Fe[pe]!==Ke[pe]&&(I||(I={}),I[pe]=Ke[pe])}else I||(K||(K=[]),K.push($t,I)),I=Ke;else $t==="dangerouslySetInnerHTML"?(Ke=Ke?Ke.__html:void 0,Fe=Fe?Fe.__html:void 0,Ke!=null&&Fe!==Ke&&(K=K||[]).push($t,Ke)):$t==="children"?typeof Ke!="string"&&typeof Ke!="number"||(K=K||[]).push($t,""+Ke):$t!=="suppressContentEditableWarning"&&$t!=="suppressHydrationWarning"&&(s.hasOwnProperty($t)?(Ke!=null&&$t==="onScroll"&&ei("scroll",g),K||Fe===Ke||(K=[])):(K=K||[]).push($t,Ke))}I&&(K=K||[]).push("style",I);var $t=K;(y.updateQueue=$t)&&(y.flags|=4)}},mg=function(g,y,I,B){I!==B&&(y.flags|=4)};function Cc(g,y){if(!Ui)switch(g.tailMode){case"hidden":y=g.tail;for(var I=null;y!==null;)y.alternate!==null&&(I=y),y=y.sibling;I===null?g.tail=null:I.sibling=null;break;case"collapsed":I=g.tail;for(var B=null;I!==null;)I.alternate!==null&&(B=I),I=I.sibling;B===null?y||g.tail===null?g.tail=null:g.tail.sibling=null:B.sibling=null}}function Ts(g){var y=g.alternate!==null&&g.alternate.child===g.child,I=0,B=0;if(y)for(var W=g.child;W!==null;)I|=W.lanes|W.childLanes,B|=W.subtreeFlags&14680064,B|=W.flags&14680064,W.return=g,W=W.sibling;else for(W=g.child;W!==null;)I|=W.lanes|W.childLanes,B|=W.subtreeFlags,B|=W.flags,W.return=g,W=W.sibling;return g.subtreeFlags|=B,g.childLanes=I,y}function Wp(g,y,I){var B=y.pendingProps;switch(qo(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ts(y),null;case 1:return fo(y.type)&&Rd(),Ts(y),null;case 3:return B=y.stateNode,Cu(),Si(Ro),Si(Io),ea(),B.pendingContext&&(B.context=B.pendingContext,B.pendingContext=null),(g===null||g.child===null)&&(Wc(y)?y.flags|=4:g===null||g.memoizedState.isDehydrated&&!(y.flags&256)||(y.flags|=1024,ma!==null&&(i0(ma),ma=null))),e0(g,y),Ts(y),null;case 5:Xc(y);var W=_o(Fa.current);if(I=y.type,g!==null&&y.stateNode!=null)t0(g,y,I,B,W),g.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!B){if(y.stateNode===null)throw Error(t(166));return Ts(y),null}if(g=_o(js.current),Wc(y)){B=y.stateNode,I=y.type;var K=y.memoizedProps;switch(B[Er]=y,B[zl]=K,g=(y.mode&1)!==0,I){case"dialog":ei("cancel",B),ei("close",B);break;case"iframe":case"object":case"embed":ei("load",B);break;case"video":case"audio":for(W=0;W<Oa.length;W++)ei(Oa[W],B);break;case"source":ei("error",B);break;case"img":case"image":case"link":ei("error",B),ei("load",B);break;case"details":ei("toggle",B);break;case"input":nt(B,K),ei("invalid",B);break;case"select":B._wrapperState={wasMultiple:!!K.multiple},ei("invalid",B);break;case"textarea":Z(B,K),ei("invalid",B)}Bt(I,K),W=null;for(var pe in K)if(K.hasOwnProperty(pe)){var Fe=K[pe];pe==="children"?typeof Fe=="string"?B.textContent!==Fe&&(K.suppressHydrationWarning!==!0&&ml(B.textContent,Fe,g),W=["children",Fe]):typeof Fe=="number"&&B.textContent!==""+Fe&&(K.suppressHydrationWarning!==!0&&ml(B.textContent,Fe,g),W=["children",""+Fe]):s.hasOwnProperty(pe)&&Fe!=null&&pe==="onScroll"&&ei("scroll",B)}switch(I){case"input":Ne(B),ht(B,K,!0);break;case"textarea":Ne(B),lt(B);break;case"select":case"option":break;default:typeof K.onClick=="function"&&(B.onclick=gl)}B=W,y.updateQueue=B,B!==null&&(y.flags|=4)}else{pe=W.nodeType===9?W:W.ownerDocument,g==="http://www.w3.org/1999/xhtml"&&(g=mt(I)),g==="http://www.w3.org/1999/xhtml"?I==="script"?(g=pe.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild)):typeof B.is=="string"?g=pe.createElement(I,{is:B.is}):(g=pe.createElement(I),I==="select"&&(pe=g,B.multiple?pe.multiple=!0:B.size&&(pe.size=B.size))):g=pe.createElementNS(g,I),g[Er]=y,g[zl]=B,tn(g,y,!1,!1),y.stateNode=g;e:{switch(pe=Pe(I,B),I){case"dialog":ei("cancel",g),ei("close",g),W=B;break;case"iframe":case"object":case"embed":ei("load",g),W=B;break;case"video":case"audio":for(W=0;W<Oa.length;W++)ei(Oa[W],g);W=B;break;case"source":ei("error",g),W=B;break;case"img":case"image":case"link":ei("error",g),ei("load",g),W=B;break;case"details":ei("toggle",g),W=B;break;case"input":nt(g,B),W=it(g,B),ei("invalid",g);break;case"option":W=B;break;case"select":g._wrapperState={wasMultiple:!!B.multiple},W=q({},B,{value:void 0}),ei("invalid",g);break;case"textarea":Z(g,B),W=be(g,B),ei("invalid",g);break;default:W=B}Bt(I,W),Fe=W;for(K in Fe)if(Fe.hasOwnProperty(K)){var Ke=Fe[K];K==="style"?$e(g,Ke):K==="dangerouslySetInnerHTML"?(Ke=Ke?Ke.__html:void 0,Ke!=null&&He(g,Ke)):K==="children"?typeof Ke=="string"?(I!=="textarea"||Ke!=="")&&Ce(g,Ke):typeof Ke=="number"&&Ce(g,""+Ke):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(s.hasOwnProperty(K)?Ke!=null&&K==="onScroll"&&ei("scroll",g):Ke!=null&&D(g,K,Ke,pe))}switch(I){case"input":Ne(g),ht(g,B,!1);break;case"textarea":Ne(g),lt(g);break;case"option":B.value!=null&&g.setAttribute("value",""+et(B.value));break;case"select":g.multiple=!!B.multiple,K=B.value,K!=null?pt(g,!!B.multiple,K,!1):B.defaultValue!=null&&pt(g,!!B.multiple,B.defaultValue,!0);break;default:typeof W.onClick=="function"&&(g.onclick=gl)}switch(I){case"button":case"input":case"select":case"textarea":B=!!B.autoFocus;break e;case"img":B=!0;break e;default:B=!1}}B&&(y.flags|=4)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return Ts(y),null;case 6:if(g&&y.stateNode!=null)mg(g,y,g.memoizedProps,B);else{if(typeof B!="string"&&y.stateNode===null)throw Error(t(166));if(I=_o(Fa.current),_o(js.current),Wc(y)){if(B=y.stateNode,I=y.memoizedProps,B[Er]=y,(K=B.nodeValue!==I)&&(g=as,g!==null))switch(g.tag){case 3:ml(B.nodeValue,I,(g.mode&1)!==0);break;case 5:g.memoizedProps.suppressHydrationWarning!==!0&&ml(B.nodeValue,I,(g.mode&1)!==0)}K&&(y.flags|=4)}else B=(I.nodeType===9?I:I.ownerDocument).createTextNode(B),B[Er]=y,y.stateNode=B}return Ts(y),null;case 13:if(Si(br),B=y.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(Ui&&fa!==null&&y.mode&1&&!(y.flags&128))Jh(),ga(),y.flags|=98560,K=!1;else if(K=Wc(y),B!==null&&B.dehydrated!==null){if(g===null){if(!K)throw Error(t(318));if(K=y.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(t(317));K[Er]=y}else ga(),!(y.flags&128)&&(y.memoizedState=null),y.flags|=4;Ts(y),K=!1}else ma!==null&&(i0(ma),ma=null),K=!0;if(!K)return y.flags&65536?y:null}return y.flags&128?(y.lanes=I,y):(B=B!==null,B!==(g!==null&&g.memoizedState!==null)&&B&&(y.child.flags|=8192,y.mode&1&&(g===null||br.current&1?Wa===0&&(Wa=3):Cm())),y.updateQueue!==null&&(y.flags|=4),Ts(y),null);case 4:return Cu(),e0(g,y),g===null&&Wu(y.stateNode.containerInfo),Ts(y),null;case 10:return Ju(y.type._context),Ts(y),null;case 17:return fo(y.type)&&Rd(),Ts(y),null;case 19:if(Si(br),K=y.memoizedState,K===null)return Ts(y),null;if(B=(y.flags&128)!==0,pe=K.rendering,pe===null)if(B)Cc(K,!1);else{if(Wa!==0||g!==null&&g.flags&128)for(g=y.child;g!==null;){if(pe=ji(g),pe!==null){for(y.flags|=128,Cc(K,!1),B=pe.updateQueue,B!==null&&(y.updateQueue=B,y.flags|=4),y.subtreeFlags=0,B=I,I=y.child;I!==null;)K=I,g=B,K.flags&=14680066,pe=K.alternate,pe===null?(K.childLanes=0,K.lanes=g,K.child=null,K.subtreeFlags=0,K.memoizedProps=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null,K.stateNode=null):(K.childLanes=pe.childLanes,K.lanes=pe.lanes,K.child=pe.child,K.subtreeFlags=0,K.deletions=null,K.memoizedProps=pe.memoizedProps,K.memoizedState=pe.memoizedState,K.updateQueue=pe.updateQueue,K.type=pe.type,g=pe.dependencies,K.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),I=I.sibling;return Mi(br,br.current&1|2),y.child}g=g.sibling}K.tail!==null&&Yt()>Ac&&(y.flags|=128,B=!0,Cc(K,!1),y.lanes=4194304)}else{if(!B)if(g=ji(pe),g!==null){if(y.flags|=128,B=!0,I=g.updateQueue,I!==null&&(y.updateQueue=I,y.flags|=4),Cc(K,!0),K.tail===null&&K.tailMode==="hidden"&&!pe.alternate&&!Ui)return Ts(y),null}else 2*Yt()-K.renderingStartTime>Ac&&I!==1073741824&&(y.flags|=128,B=!0,Cc(K,!1),y.lanes=4194304);K.isBackwards?(pe.sibling=y.child,y.child=pe):(I=K.last,I!==null?I.sibling=pe:y.child=pe,K.last=pe)}return K.tail!==null?(y=K.tail,K.rendering=y,K.tail=y.sibling,K.renderingStartTime=Yt(),y.sibling=null,I=br.current,Mi(br,B?I&1|2:I&1),y):(Ts(y),null);case 22:case 23:return o0(),B=y.memoizedState!==null,g!==null&&g.memoizedState!==null!==B&&(y.flags|=8192),B&&y.mode&1?$l&1073741824&&(Ts(y),y.subtreeFlags&6&&(y.flags|=8192)):Ts(y),null;case 24:return null;case 25:return null}throw Error(t(156,y.tag))}function Nd(g,y){switch(qo(y),y.tag){case 1:return fo(y.type)&&Rd(),g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 3:return Cu(),Si(Ro),Si(Io),ea(),g=y.flags,g&65536&&!(g&128)?(y.flags=g&-65537|128,y):null;case 5:return Xc(y),null;case 13:if(Si(br),g=y.memoizedState,g!==null&&g.dehydrated!==null){if(y.alternate===null)throw Error(t(340));ga()}return g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 19:return Si(br),null;case 4:return Cu(),null;case 10:return Ju(y.type._context),null;case 22:case 23:return o0(),null;case 24:return null;default:return null}}var eh=!1,Ii=!1,Ta=typeof WeakSet=="function"?WeakSet:Set,Be=null;function gi(g,y){var I=g.ref;if(I!==null)if(typeof I=="function")try{I(null)}catch(B){To(g,y,B)}else I.current=null}function Es(g,y,I){try{I()}catch(B){To(g,y,B)}}var wv=!1;function id(g,y){if(vc=As,g=An(),xr(g)){if("selectionStart"in g)var I={start:g.selectionStart,end:g.selectionEnd};else e:{I=(I=g.ownerDocument)&&I.defaultView||window;var B=I.getSelection&&I.getSelection();if(B&&B.rangeCount!==0){I=B.anchorNode;var W=B.anchorOffset,K=B.focusNode;B=B.focusOffset;try{I.nodeType,K.nodeType}catch{I=null;break e}var pe=0,Fe=-1,Ke=-1,$t=0,jt=0,en=g,Jt=null;t:for(;;){for(var vn;en!==I||W!==0&&en.nodeType!==3||(Fe=pe+W),en!==K||B!==0&&en.nodeType!==3||(Ke=pe+B),en.nodeType===3&&(pe+=en.nodeValue.length),(vn=en.firstChild)!==null;)Jt=en,en=vn;for(;;){if(en===g)break t;if(Jt===I&&++$t===W&&(Fe=pe),Jt===K&&++jt===B&&(Ke=pe),(vn=en.nextSibling)!==null)break;en=Jt,Jt=en.parentNode}en=vn}I=Fe===-1||Ke===-1?null:{start:Fe,end:Ke}}else I=null}I=I||{start:0,end:0}}else I=null;for(bh={focusedElem:g,selectionRange:I},As=!1,Be=y;Be!==null;)if(y=Be,g=y.child,(y.subtreeFlags&1028)!==0&&g!==null)g.return=y,Be=g;else for(;Be!==null;){y=Be;try{var In=y.alternate;if(y.flags&1024)switch(y.tag){case 0:case 11:case 15:break;case 1:if(In!==null){var Ln=In.memoizedProps,Js=In.memoizedState,_t=y.stateNode,tt=_t.getSnapshotBeforeUpdate(y.elementType===y.type?Ln:Hl(y.type,Ln),Js);_t.__reactInternalSnapshotBeforeUpdate=tt}break;case 3:var vt=y.stateNode.containerInfo;vt.nodeType===1?vt.textContent="":vt.nodeType===9&&vt.documentElement&&vt.removeChild(vt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(sn){To(y,y.return,sn)}if(g=y.sibling,g!==null){g.return=y.return,Be=g;break}Be=y.return}return In=wv,wv=!1,In}function ym(g,y,I){var B=y.updateQueue;if(B=B!==null?B.lastEffect:null,B!==null){var W=B=B.next;do{if((W.tag&g)===g){var K=W.destroy;W.destroy=void 0,K!==void 0&&Es(y,I,K)}W=W.next}while(W!==B)}}function gg(g,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var I=y=y.next;do{if((I.tag&g)===g){var B=I.create;I.destroy=B()}I=I.next}while(I!==y)}}function xv(g){var y=g.ref;if(y!==null){var I=g.stateNode;switch(g.tag){case 5:g=I;break;default:g=I}typeof y=="function"?y(g):y.current=g}}function Nf(g){var y=g.alternate;y!==null&&(g.alternate=null,Nf(y)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(y=g.stateNode,y!==null&&(delete y[Er],delete y[zl],delete y[Qo],delete y[ve],delete y[Hs])),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function Oo(g){return g.tag===5||g.tag===3||g.tag===4}function i_(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||Oo(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function _g(g,y,I){var B=g.tag;if(B===5||B===6)g=g.stateNode,y?I.nodeType===8?I.parentNode.insertBefore(g,y):I.insertBefore(g,y):(I.nodeType===8?(y=I.parentNode,y.insertBefore(g,I)):(y=I,y.appendChild(g)),I=I._reactRootContainer,I!=null||y.onclick!==null||(y.onclick=gl));else if(B!==4&&(g=g.child,g!==null))for(_g(g,y,I),g=g.sibling;g!==null;)_g(g,y,I),g=g.sibling}function bm(g,y,I){var B=g.tag;if(B===5||B===6)g=g.stateNode,y?I.insertBefore(g,y):I.appendChild(g);else if(B!==4&&(g=g.child,g!==null))for(bm(g,y,I),g=g.sibling;g!==null;)bm(g,y,I),g=g.sibling}var Ea=null,ku=!1;function dp(g,y,I){for(I=I.child;I!==null;)vg(g,y,I),I=I.sibling}function vg(g,y,I){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(ur,I)}catch{}switch(I.tag){case 5:Ii||gi(I,y);case 6:var B=Ea,W=ku;Ea=null,dp(g,y,I),Ea=B,ku=W,Ea!==null&&(ku?(g=Ea,I=I.stateNode,g.nodeType===8?g.parentNode.removeChild(I):g.removeChild(I)):Ea.removeChild(I.stateNode));break;case 18:Ea!==null&&(ku?(g=Ea,I=I.stateNode,g.nodeType===8?bc(g.parentNode,I):g.nodeType===1&&bc(g,I),cr(g)):bc(Ea,I.stateNode));break;case 4:B=Ea,W=ku,Ea=I.stateNode.containerInfo,ku=!0,dp(g,y,I),Ea=B,ku=W;break;case 0:case 11:case 14:case 15:if(!Ii&&(B=I.updateQueue,B!==null&&(B=B.lastEffect,B!==null))){W=B=B.next;do{var K=W,pe=K.destroy;K=K.tag,pe!==void 0&&(K&2||K&4)&&Es(I,y,pe),W=W.next}while(W!==B)}dp(g,y,I);break;case 1:if(!Ii&&(gi(I,y),B=I.stateNode,typeof B.componentWillUnmount=="function"))try{B.props=I.memoizedProps,B.state=I.memoizedState,B.componentWillUnmount()}catch(Fe){To(I,y,Fe)}dp(g,y,I);break;case 21:dp(g,y,I);break;case 22:I.mode&1?(Ii=(B=Ii)||I.memoizedState!==null,dp(g,y,I),Ii=B):dp(g,y,I);break;default:dp(g,y,I)}}function Vp(g){var y=g.updateQueue;if(y!==null){g.updateQueue=null;var I=g.stateNode;I===null&&(I=g.stateNode=new Ta),y.forEach(function(B){var W=oE.bind(null,g,B);I.has(B)||(I.add(B),B.then(W,W))})}}function th(g,y){var I=y.deletions;if(I!==null)for(var B=0;B<I.length;B++){var W=I[B];try{var K=g,pe=y,Fe=pe;e:for(;Fe!==null;){switch(Fe.tag){case 5:Ea=Fe.stateNode,ku=!1;break e;case 3:Ea=Fe.stateNode.containerInfo,ku=!0;break e;case 4:Ea=Fe.stateNode.containerInfo,ku=!0;break e}Fe=Fe.return}if(Ea===null)throw Error(t(160));vg(K,pe,W),Ea=null,ku=!1;var Ke=W.alternate;Ke!==null&&(Ke.return=null),W.return=null}catch($t){To(W,y,$t)}}if(y.subtreeFlags&12854)for(y=y.child;y!==null;)n0(y,g),y=y.sibling}function n0(g,y){var I=g.alternate,B=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:if(th(y,g),Xn(g),B&4){try{ym(3,g,g.return),gg(3,g)}catch(Ln){To(g,g.return,Ln)}try{ym(5,g,g.return)}catch(Ln){To(g,g.return,Ln)}}break;case 1:th(y,g),Xn(g),B&512&&I!==null&&gi(I,I.return);break;case 5:if(th(y,g),Xn(g),B&512&&I!==null&&gi(I,I.return),g.flags&32){var W=g.stateNode;try{Ce(W,"")}catch(Ln){To(g,g.return,Ln)}}if(B&4&&(W=g.stateNode,W!=null)){var K=g.memoizedProps,pe=I!==null?I.memoizedProps:K,Fe=g.type,Ke=g.updateQueue;if(g.updateQueue=null,Ke!==null)try{Fe==="input"&&K.type==="radio"&&K.name!=null&&Mt(W,K),Pe(Fe,pe);var $t=Pe(Fe,K);for(pe=0;pe<Ke.length;pe+=2){var jt=Ke[pe],en=Ke[pe+1];jt==="style"?$e(W,en):jt==="dangerouslySetInnerHTML"?He(W,en):jt==="children"?Ce(W,en):D(W,jt,en,$t)}switch(Fe){case"input":At(W,K);break;case"textarea":ke(W,K);break;case"select":var Jt=W._wrapperState.wasMultiple;W._wrapperState.wasMultiple=!!K.multiple;var vn=K.value;vn!=null?pt(W,!!K.multiple,vn,!1):Jt!==!!K.multiple&&(K.defaultValue!=null?pt(W,!!K.multiple,K.defaultValue,!0):pt(W,!!K.multiple,K.multiple?[]:"",!1))}W[zl]=K}catch(Ln){To(g,g.return,Ln)}}break;case 6:if(th(y,g),Xn(g),B&4){if(g.stateNode===null)throw Error(t(162));W=g.stateNode,K=g.memoizedProps;try{W.nodeValue=K}catch(Ln){To(g,g.return,Ln)}}break;case 3:if(th(y,g),Xn(g),B&4&&I!==null&&I.memoizedState.isDehydrated)try{cr(y.containerInfo)}catch(Ln){To(g,g.return,Ln)}break;case 4:th(y,g),Xn(g);break;case 13:th(y,g),Xn(g),W=g.child,W.flags&8192&&(K=W.memoizedState!==null,W.stateNode.isHidden=K,!K||W.alternate!==null&&W.alternate.memoizedState!==null||(Va=Yt())),B&4&&Vp(g);break;case 22:if(jt=I!==null&&I.memoizedState!==null,g.mode&1?(Ii=($t=Ii)||jt,th(y,g),Ii=$t):th(y,g),Xn(g),B&8192){if($t=g.memoizedState!==null,(g.stateNode.isHidden=$t)&&!jt&&(g.mode&1)!==0)for(Be=g,jt=g.child;jt!==null;){for(en=Be=jt;Be!==null;){switch(Jt=Be,vn=Jt.child,Jt.tag){case 0:case 11:case 14:case 15:ym(4,Jt,Jt.return);break;case 1:gi(Jt,Jt.return);var In=Jt.stateNode;if(typeof In.componentWillUnmount=="function"){B=Jt,I=Jt.return;try{y=B,In.props=y.memoizedProps,In.state=y.memoizedState,In.componentWillUnmount()}catch(Ln){To(B,I,Ln)}}break;case 5:gi(Jt,Jt.return);break;case 22:if(Jt.memoizedState!==null){Tm(en);continue}}vn!==null?(vn.return=Jt,Be=vn):Tm(en)}jt=jt.sibling}e:for(jt=null,en=g;;){if(en.tag===5){if(jt===null){jt=en;try{W=en.stateNode,$t?(K=W.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none"):(Fe=en.stateNode,Ke=en.memoizedProps.style,pe=Ke!=null&&Ke.hasOwnProperty("display")?Ke.display:null,Fe.style.display=oe("display",pe))}catch(Ln){To(g,g.return,Ln)}}}else if(en.tag===6){if(jt===null)try{en.stateNode.nodeValue=$t?"":en.memoizedProps}catch(Ln){To(g,g.return,Ln)}}else if((en.tag!==22&&en.tag!==23||en.memoizedState===null||en===g)&&en.child!==null){en.child.return=en,en=en.child;continue}if(en===g)break e;for(;en.sibling===null;){if(en.return===null||en.return===g)break e;jt===en&&(jt=null),en=en.return}jt===en&&(jt=null),en.sibling.return=en.return,en=en.sibling}}break;case 19:th(y,g),Xn(g),B&4&&Vp(g);break;case 21:break;default:th(y,g),Xn(g)}}function Xn(g){var y=g.flags;if(y&2){try{e:{for(var I=g.return;I!==null;){if(Oo(I)){var B=I;break e}I=I.return}throw Error(t(160))}switch(B.tag){case 5:var W=B.stateNode;B.flags&32&&(Ce(W,""),B.flags&=-33);var K=i_(g);bm(g,K,W);break;case 3:case 4:var pe=B.stateNode.containerInfo,Fe=i_(g);_g(g,Fe,pe);break;default:throw Error(t(161))}}catch(Ke){To(g,g.return,Ke)}g.flags&=-3}y&4096&&(g.flags&=-4097)}function Cv(g,y,I){Be=g,Kl(g)}function Kl(g,y,I){for(var B=(g.mode&1)!==0;Be!==null;){var W=Be,K=W.child;if(W.tag===22&&B){var pe=W.memoizedState!==null||eh;if(!pe){var Fe=W.alternate,Ke=Fe!==null&&Fe.memoizedState!==null||Ii;Fe=eh;var $t=Ii;if(eh=pe,(Ii=Ke)&&!$t)for(Be=W;Be!==null;)pe=Be,Ke=pe.child,pe.tag===22&&pe.memoizedState!==null?pp(W):Ke!==null?(Ke.return=pe,Be=Ke):pp(W);for(;K!==null;)Be=K,Kl(K),K=K.sibling;Be=W,eh=Fe,Ii=$t}tc(g)}else W.subtreeFlags&8772&&K!==null?(K.return=W,Be=K):tc(g)}}function tc(g){for(;Be!==null;){var y=Be;if(y.flags&8772){var I=y.alternate;try{if(y.flags&8772)switch(y.tag){case 0:case 11:case 15:Ii||gg(5,y);break;case 1:var B=y.stateNode;if(y.flags&4&&!Ii)if(I===null)B.componentDidMount();else{var W=y.elementType===y.type?I.memoizedProps:Hl(y.type,I.memoizedProps);B.componentDidUpdate(W,I.memoizedState,B.__reactInternalSnapshotBeforeUpdate)}var K=y.updateQueue;K!==null&&Ir(y,K,B);break;case 3:var pe=y.updateQueue;if(pe!==null){if(I=null,y.child!==null)switch(y.child.tag){case 5:I=y.child.stateNode;break;case 1:I=y.child.stateNode}Ir(y,pe,I)}break;case 5:var Fe=y.stateNode;if(I===null&&y.flags&4){I=Fe;var Ke=y.memoizedProps;switch(y.type){case"button":case"input":case"select":case"textarea":Ke.autoFocus&&I.focus();break;case"img":Ke.src&&(I.src=Ke.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(y.memoizedState===null){var $t=y.alternate;if($t!==null){var jt=$t.memoizedState;if(jt!==null){var en=jt.dehydrated;en!==null&&cr(en)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ii||y.flags&512&&xv(y)}catch(Jt){To(y,y.return,Jt)}}if(y===g){Be=null;break}if(I=y.sibling,I!==null){I.return=y.return,Be=I;break}Be=y.return}}function Tm(g){for(;Be!==null;){var y=Be;if(y===g){Be=null;break}var I=y.sibling;if(I!==null){I.return=y.return,Be=I;break}Be=y.return}}function pp(g){for(;Be!==null;){var y=Be;try{switch(y.tag){case 0:case 11:case 15:var I=y.return;try{gg(4,y)}catch(Ke){To(y,I,Ke)}break;case 1:var B=y.stateNode;if(typeof B.componentDidMount=="function"){var W=y.return;try{B.componentDidMount()}catch(Ke){To(y,W,Ke)}}var K=y.return;try{xv(y)}catch(Ke){To(y,K,Ke)}break;case 5:var pe=y.return;try{xv(y)}catch(Ke){To(y,pe,Ke)}}}catch(Ke){To(y,y.return,Ke)}if(y===g){Be=null;break}var Fe=y.sibling;if(Fe!==null){Fe.return=y.return,Be=Fe;break}Be=y.return}}var Em=Math.ceil,Jl=N.ReactCurrentDispatcher,r0=N.ReactCurrentOwner,so=N.ReactCurrentBatchConfig,wi=0,El=null,$a=null,Ql=0,$l=0,Df=fi(0),Wa=0,fp=null,mp=0,jp=0,s_=0,$m=null,Mc=null,Va=0,Ac=1/0,Dd=null,yg=!1,bg=null,Ds=null,Sm=!1,Sl=null,ja=0,Bf=0,o_=null,gp=-1,Tg=0;function nc(){return wi&6?Yt():gp!==-1?gp:gp=Yt()}function Bd(g){return g.mode&1?wi&2&&Ql!==0?Ql&-Ql:zp.transition!==null?(Tg===0&&(Tg=xo()),Tg):(g=Zn,g!==0||(g=window.event,g=g===void 0?16:uu(g.type)),g):1}function bo(g,y,I,B){if(50<Bf)throw Bf=0,o_=null,Error(t(185));Ll(g,I,B),(!(wi&2)||g!==El)&&(g===El&&(!(wi&2)&&(jp|=I),Wa===4&&Xp(g,Ql)),Sa(g,B),I===1&&wi===0&&!(y.mode&1)&&(Ac=Yt()+500,_s&&cn()))}function Sa(g,y){var I=g.callbackNode;Uu(g,y);var B=rl(g,g===El?Ql:0);if(B===0)I!==null&&Fo(I),g.callbackNode=null,g.callbackPriority=0;else if(y=B&-B,g.callbackPriority!==y){if(I!=null&&Fo(I),y===1)g.tag===0?vl(Pf.bind(null,g)):_l(Pf.bind(null,g)),Kh(function(){!(wi&6)&&cn()}),I=null;else{switch(Bi(B)){case 1:I=oa;break;case 4:I=Uo;break;case 16:I=hs;break;case 536870912:I=li;break;default:I=hs}I=Ic(I,Mv.bind(null,g))}g.callbackPriority=y,g.callbackNode=I}}function Mv(g,y){if(gp=-1,Tg=0,(wi&6)!==0)throw Error(t(327));var I=g.callbackNode;if(wh()&&g.callbackNode!==I)return null;var B=rl(g,g===El?Ql:0);if(B===0)return null;if(B&30||B&g.expiredLanes||y)y=_p(g,B);else{y=B;var W=wi;wi|=2;var K=Av();(El!==g||Ql!==y)&&(Dd=null,Ac=Yt()+500,xm(g,y));do try{sE();break}catch(Fe){a0(g,Fe)}while(!0);Eu(),Jl.current=K,wi=W,$a!==null?y=0:(El=null,Ql=0,y=Wa)}if(y!==0){if(y===2&&(W=Cs(g),W!==0&&(B=W,y=wm(g,W))),y===1)throw I=fp,xm(g,0),Xp(g,B),Sa(g,Yt()),I;if(y===6)Xp(g,B);else{if(W=g.current.alternate,(B&30)===0&&!gb(W)&&(y=_p(g,B),y===2&&(K=Cs(g),K!==0&&(B=K,y=wm(g,K))),y===1))throw I=fp,xm(g,0),Xp(g,B),Sa(g,Yt()),I;switch(g.finishedWork=W,g.finishedLanes=B,y){case 0:case 1:throw Error(t(345));case 2:Yp(g,Mc,Dd);break;case 3:if(Xp(g,B),(B&130023424)===B&&(y=Va+500-Yt(),10<y)){if(rl(g,0)!==0)break;if(W=g.suspendedLanes,(W&B)!==B){nc(),g.pingedLanes|=g.suspendedLanes&W;break}g.timeoutHandle=Vu(Yp.bind(null,g,Mc,Dd),y);break}Yp(g,Mc,Dd);break;case 4:if(Xp(g,B),(B&4194240)===B)break;for(y=g.eventTimes,W=-1;0<B;){var pe=31-Tr(B);K=1<<pe,pe=y[pe],pe>W&&(W=pe),B&=~K}if(B=W,B=Yt()-B,B=(120>B?120:480>B?480:1080>B?1080:1920>B?1920:3e3>B?3e3:4320>B?4320:1960*Em(B/1960))-B,10<B){g.timeoutHandle=Vu(Yp.bind(null,g,Mc,Dd),B);break}Yp(g,Mc,Dd);break;case 5:Yp(g,Mc,Dd);break;default:throw Error(t(329))}}}return Sa(g,Yt()),g.callbackNode===I?Mv.bind(null,g):null}function wm(g,y){var I=$m;return g.current.memoizedState.isDehydrated&&(xm(g,y).flags|=256),g=_p(g,y),g!==2&&(y=Mc,Mc=I,y!==null&&i0(y)),g}function i0(g){Mc===null?Mc=g:Mc.push.apply(Mc,g)}function gb(g){for(var y=g;;){if(y.flags&16384){var I=y.updateQueue;if(I!==null&&(I=I.stores,I!==null))for(var B=0;B<I.length;B++){var W=I[B],K=W.getSnapshot;W=W.value;try{if(!yt(K(),W))return!1}catch{return!1}}}if(I=y.child,y.subtreeFlags&16384&&I!==null)I.return=y,y=I;else{if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function Xp(g,y){for(y&=~s_,y&=~jp,g.suspendedLanes|=y,g.pingedLanes&=~y,g=g.expirationTimes;0<y;){var I=31-Tr(y),B=1<<I;g[I]=-1,y&=~B}}function Pf(g){if(wi&6)throw Error(t(327));wh();var y=rl(g,0);if(!(y&1))return Sa(g,Yt()),null;var I=_p(g,y);if(g.tag!==0&&I===2){var B=Cs(g);B!==0&&(y=B,I=wm(g,B))}if(I===1)throw I=fp,xm(g,0),Xp(g,y),Sa(g,Yt()),I;if(I===6)throw Error(t(345));return g.finishedWork=g.current.alternate,g.finishedLanes=y,Yp(g,Mc,Dd),Sa(g,Yt()),null}function s0(g,y){var I=wi;wi|=1;try{return g(y)}finally{wi=I,wi===0&&(Ac=Yt()+500,_s&&cn())}}function Ff(g){Sl!==null&&Sl.tag===0&&!(wi&6)&&wh();var y=wi;wi|=1;var I=so.transition,B=Zn;try{if(so.transition=null,Zn=1,g)return g()}finally{Zn=B,so.transition=I,wi=y,!(wi&6)&&cn()}}function o0(){$l=Df.current,Si(Df)}function xm(g,y){g.finishedWork=null,g.finishedLanes=0;var I=g.timeoutHandle;if(I!==-1&&(g.timeoutHandle=-1,La(I)),$a!==null)for(I=$a.return;I!==null;){var B=I;switch(qo(B),B.tag){case 1:B=B.type.childContextTypes,B!=null&&Rd();break;case 3:Cu(),Si(Ro),Si(Io),ea();break;case 5:Xc(B);break;case 4:Cu();break;case 13:Si(br);break;case 19:Si(br);break;case 10:Ju(B.type._context);break;case 22:case 23:o0()}I=I.return}if(El=g,$a=g=xh(g.current,null),Ql=$l=y,Wa=0,fp=null,s_=jp=mp=0,Mc=$m=null,no!==null){for(y=0;y<no.length;y++)if(I=no[y],B=I.interleaved,B!==null){I.interleaved=null;var W=B.next,K=I.pending;if(K!==null){var pe=K.next;K.next=W,B.next=pe}I.pending=B}no=null}return g}function a0(g,y){do{var I=$a;try{if(Eu(),Ls.current=c,bl){for(var B=on.memoizedState;B!==null;){var W=B.queue;W!==null&&(W.pending=null),B=B.next}bl=!1}if(Sc=0,Zi=ni=on=null,Ua=!1,Lt=0,r0.current=null,I===null||I.return===null){Wa=1,fp=y,$a=null;break}e:{var K=g,pe=I.return,Fe=I,Ke=y;if(y=Ql,Fe.flags|=32768,Ke!==null&&typeof Ke=="object"&&typeof Ke.then=="function"){var $t=Ke,jt=Fe,en=jt.tag;if(!(jt.mode&1)&&(en===0||en===11||en===15)){var Jt=jt.alternate;Jt?(jt.updateQueue=Jt.updateQueue,jt.memoizedState=Jt.memoizedState,jt.lanes=Jt.lanes):(jt.updateQueue=null,jt.memoizedState=null)}var vn=Zt(pe);if(vn!==null){vn.flags&=-257,hn(vn,pe,Fe,K,y),vn.mode&1&&zt(K,$t,y),y=vn,Ke=$t;var In=y.updateQueue;if(In===null){var Ln=new Set;Ln.add(Ke),y.updateQueue=Ln}else In.add(Ke);break e}else{if(!(y&1)){zt(K,$t,y),Cm();break e}Ke=Error(t(426))}}else if(Ui&&Fe.mode&1){var Js=Zt(pe);if(Js!==null){!(Js.flags&65536)&&(Js.flags|=256),hn(Js,pe,Fe,K,y),yl(L(Ke,Fe));break e}}K=Ke=L(Ke,Fe),Wa!==4&&(Wa=2),$m===null?$m=[K]:$m.push(K),K=pe;do{switch(K.tag){case 3:K.flags|=65536,y&=-y,K.lanes|=y;var _t=We(K,Ke,y);On(K,_t);break e;case 1:Fe=Ke;var tt=K.type,vt=K.stateNode;if(!(K.flags&128)&&(typeof tt.getDerivedStateFromError=="function"||vt!==null&&typeof vt.componentDidCatch=="function"&&(Ds===null||!Ds.has(vt)))){K.flags|=65536,y&=-y,K.lanes|=y;var sn=gt(K,Fe,y);On(K,sn);break e}}K=K.return}while(K!==null)}u0(I)}catch(Hn){y=Hn,$a===I&&I!==null&&($a=I=I.return);continue}break}while(!0)}function Av(){var g=Jl.current;return Jl.current=c,g===null?c:g}function Cm(){(Wa===0||Wa===3||Wa===2)&&(Wa=4),El===null||!(mp&268435455)&&!(jp&268435455)||Xp(El,Ql)}function _p(g,y){var I=wi;wi|=2;var B=Av();(El!==g||Ql!==y)&&(Dd=null,xm(g,y));do try{Iv();break}catch(W){a0(g,W)}while(!0);if(Eu(),wi=I,Jl.current=B,$a!==null)throw Error(t(261));return El=null,Ql=0,Wa}function Iv(){for(;$a!==null;)l0($a)}function sE(){for(;$a!==null&&!wo();)l0($a)}function l0(g){var y=_b(g.alternate,g,$l);g.memoizedProps=g.pendingProps,y===null?u0(g):$a=y,r0.current=null}function u0(g){var y=g;do{var I=y.alternate;if(g=y.return,(y.flags&32768)===0){if(I=Wp(I,y,$l),I!==null){$a=I;return}}else{if(I=Nd(I,y),I!==null){I.flags&=32767,$a=I;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{Wa=6,$a=null;return}}if(y=y.sibling,y!==null){$a=y;return}$a=y=g}while(y!==null);Wa===0&&(Wa=5)}function Yp(g,y,I){var B=Zn,W=so.transition;try{so.transition=null,Zn=1,En(g,y,I,B)}finally{so.transition=W,Zn=B}return null}function En(g,y,I,B){do wh();while(Sl!==null);if(wi&6)throw Error(t(327));I=g.finishedWork;var W=g.finishedLanes;if(I===null)return null;if(g.finishedWork=null,g.finishedLanes=0,I===g.current)throw Error(t(177));g.callbackNode=null,g.callbackPriority=0;var K=I.lanes|I.childLanes;if(uh(g,K),g===El&&($a=El=null,Ql=0),!(I.subtreeFlags&2064)&&!(I.flags&2064)||Sm||(Sm=!0,Ic(hs,function(){return wh(),null})),K=(I.flags&15990)!==0,(I.subtreeFlags&15990)!==0||K){K=so.transition,so.transition=null;var pe=Zn;Zn=1;var Fe=wi;wi|=4,r0.current=null,id(g,I),n0(I,g),Is(bh),As=!!vc,bh=vc=null,g.current=I,Cv(I),nl(),wi=Fe,Zn=pe,so.transition=K}else g.current=I;if(Sm&&(Sm=!1,Sl=g,ja=W),K=g.pendingLanes,K===0&&(Ds=null),ir(I.stateNode),Sa(g,Yt()),y!==null)for(B=g.onRecoverableError,I=0;I<y.length;I++)W=y[I],B(W.value,{componentStack:W.stack,digest:W.digest});if(yg)throw yg=!1,g=bg,bg=null,g;return ja&1&&g.tag!==0&&wh(),K=g.pendingLanes,K&1?g===o_?Bf++:(Bf=0,o_=g):Bf=0,cn(),null}function wh(){if(Sl!==null){var g=Bi(ja),y=so.transition,I=Zn;try{if(so.transition=null,Zn=16>g?16:g,Sl===null)var B=!1;else{if(g=Sl,Sl=null,ja=0,(wi&6)!==0)throw Error(t(331));var W=wi;for(wi|=4,Be=g.current;Be!==null;){var K=Be,pe=K.child;if(Be.flags&16){var Fe=K.deletions;if(Fe!==null){for(var Ke=0;Ke<Fe.length;Ke++){var $t=Fe[Ke];for(Be=$t;Be!==null;){var jt=Be;switch(jt.tag){case 0:case 11:case 15:ym(8,jt,K)}var en=jt.child;if(en!==null)en.return=jt,Be=en;else for(;Be!==null;){jt=Be;var Jt=jt.sibling,vn=jt.return;if(Nf(jt),jt===$t){Be=null;break}if(Jt!==null){Jt.return=vn,Be=Jt;break}Be=vn}}}var In=K.alternate;if(In!==null){var Ln=In.child;if(Ln!==null){In.child=null;do{var Js=Ln.sibling;Ln.sibling=null,Ln=Js}while(Ln!==null)}}Be=K}}if(K.subtreeFlags&2064&&pe!==null)pe.return=K,Be=pe;else e:for(;Be!==null;){if(K=Be,(K.flags&2048)!==0)switch(K.tag){case 0:case 11:case 15:ym(9,K,K.return)}var _t=K.sibling;if(_t!==null){_t.return=K.return,Be=_t;break e}Be=K.return}}var tt=g.current;for(Be=tt;Be!==null;){pe=Be;var vt=pe.child;if(pe.subtreeFlags&2064&&vt!==null)vt.return=pe,Be=vt;else e:for(pe=tt;Be!==null;){if(Fe=Be,(Fe.flags&2048)!==0)try{switch(Fe.tag){case 0:case 11:case 15:gg(9,Fe)}}catch(Hn){To(Fe,Fe.return,Hn)}if(Fe===pe){Be=null;break e}var sn=Fe.sibling;if(sn!==null){sn.return=Fe.return,Be=sn;break e}Be=Fe.return}}if(wi=W,cn(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(ur,g)}catch{}B=!0}return B}finally{Zn=I,so.transition=y}}return!1}function Mm(g,y,I){y=L(I,y),y=We(g,y,1),g=mi(g,y,1),y=nc(),g!==null&&(Ll(g,1,y),Sa(g,y))}function To(g,y,I){if(g.tag===3)Mm(g,g,I);else for(;y!==null;){if(y.tag===3){Mm(y,g,I);break}else if(y.tag===1){var B=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof B.componentDidCatch=="function"&&(Ds===null||!Ds.has(B))){g=L(I,g),g=gt(y,g,1),y=mi(y,g,1),g=nc(),y!==null&&(Ll(y,1,g),Sa(y,g));break}}y=y.return}}function Rv(g,y,I){var B=g.pingCache;B!==null&&B.delete(y),y=nc(),g.pingedLanes|=g.suspendedLanes&I,El===g&&(Ql&I)===I&&(Wa===4||Wa===3&&(Ql&130023424)===Ql&&500>Yt()-Va?xm(g,0):s_|=I),Sa(g,y)}function c0(g,y){y===0&&(g.mode&1?(y=Di,Di<<=1,!(Di&130023424)&&(Di=4194304)):y=1);var I=nc();g=Pa(g,y),g!==null&&(Ll(g,y,I),Sa(g,I))}function Am(g){var y=g.memoizedState,I=0;y!==null&&(I=y.retryLane),c0(g,I)}function oE(g,y){var I=0;switch(g.tag){case 13:var B=g.stateNode,W=g.memoizedState;W!==null&&(I=W.retryLane);break;case 19:B=g.stateNode;break;default:throw Error(t(314))}B!==null&&B.delete(y),c0(g,I)}var _b;_b=function(g,y,I){if(g!==null)if(g.memoizedProps!==y.pendingProps||Ro.current)nn=!0;else{if(!(g.lanes&I)&&!(y.flags&128))return nn=!1,Yl(g,y,I);nn=(g.flags&131072)!==0}else nn=!1,Ui&&y.flags&1048576&&Of(y,Gc,y.index);switch(y.lanes=0,y.tag){case 2:var B=y.type;Lf(g,y),g=y.pendingProps;var W=Ec(y,Io.current);Ba(y,I),W=Zh(null,y,B,g,W,I);var K=Yc();return y.flags|=1,typeof W=="object"&&W!==null&&typeof W.render=="function"&&W.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,fo(B)?(K=!0,pa(y)):K=!1,y.memoizedState=W.state!==null&&W.state!==void 0?W.state:null,hp(y),W.updater=Ai,y.stateNode=W,W._reactInternals=y,qu(y,B,g,I),y=fn(null,y,B,!0,K,I)):(y.tag=0,Ui&&K&&yu(y),_r(null,y,W,I),y=y.child),y;case 16:B=y.elementType;e:{switch(Lf(g,y),g=y.pendingProps,W=B._init,B=W(B._payload),y.type=B,W=y.tag=Eg(B),g=Hl(B,g),W){case 0:y=Kt(null,y,B,g,I);break e;case 1:y=ln(null,y,B,g,I);break e;case 11:y=ft(null,y,B,g,I);break e;case 14:y=Ee(null,y,B,Hl(B.type,g),I);break e}throw Error(t(306,B,""))}return y;case 0:return B=y.type,W=y.pendingProps,W=y.elementType===B?W:Hl(B,W),Kt(g,y,B,W,I);case 1:return B=y.type,W=y.pendingProps,W=y.elementType===B?W:Hl(B,W),ln(g,y,B,W,I);case 3:e:{if(kn(y),g===null)throw Error(t(387));B=y.pendingProps,K=y.memoizedState,W=K.element,jc(g,y),gr(y,B,null,I);var pe=y.memoizedState;if(B=pe.element,K.isDehydrated)if(K={element:B,isDehydrated:!1,cache:pe.cache,pendingSuspenseBoundaries:pe.pendingSuspenseBoundaries,transitions:pe.transitions},y.updateQueue.baseState=K,y.memoizedState=K,y.flags&256){W=L(Error(t(423)),y),y=Wn(g,y,B,I,W);break e}else if(B!==W){W=L(Error(t(424)),y),y=Wn(g,y,B,I,W);break e}else for(fa=Xu(y.stateNode.containerInfo.firstChild),as=y,Ui=!0,ma=null,I=wu(y,null,B,I),y.child=I;I;)I.flags=I.flags&-3|4096,I=I.sibling;else{if(ga(),B===W){y=rd(g,y,I);break e}_r(g,y,B,I)}y=y.child}return y;case 5:return Eh(y),g===null&&Gs(y),B=y.type,W=y.pendingProps,K=g!==null?g.memoizedProps:null,pe=W.children,Yh(B,W)?pe=null:K!==null&&Yh(B,K)&&(y.flags|=32),kt(g,y),_r(g,y,pe,I),y.child;case 6:return g===null&&Gs(y),null;case 13:return vm(g,y,I);case 4:return Zu(y,y.stateNode.containerInfo),B=y.pendingProps,g===null?y.child=_a(y,null,B,I):_r(g,y,B,I),y.child;case 11:return B=y.type,W=y.pendingProps,W=y.elementType===B?W:Hl(B,W),ft(g,y,B,W,I);case 7:return _r(g,y,y.pendingProps,I),y.child;case 8:return _r(g,y,y.pendingProps.children,I),y.child;case 12:return _r(g,y,y.pendingProps.children,I),y.child;case 10:e:{if(B=y.type._context,W=y.pendingProps,K=y.memoizedProps,pe=W.value,Mi(Tu,B._currentValue),B._currentValue=pe,K!==null)if(yt(K.value,pe)){if(K.children===W.children&&!Ro.current){y=rd(g,y,I);break e}}else for(K=y.child,K!==null&&(K.return=y);K!==null;){var Fe=K.dependencies;if(Fe!==null){pe=K.child;for(var Ke=Fe.firstContext;Ke!==null;){if(Ke.context===B){if(K.tag===1){Ke=Zo(-1,I&-I),Ke.tag=2;var $t=K.updateQueue;if($t!==null){$t=$t.shared;var jt=$t.pending;jt===null?Ke.next=Ke:(Ke.next=jt.next,jt.next=Ke),$t.pending=Ke}}K.lanes|=I,Ke=K.alternate,Ke!==null&&(Ke.lanes|=I),mo(K.return,I,y),Fe.lanes|=I;break}Ke=Ke.next}}else if(K.tag===10)pe=K.type===y.type?null:K.child;else if(K.tag===18){if(pe=K.return,pe===null)throw Error(t(341));pe.lanes|=I,Fe=pe.alternate,Fe!==null&&(Fe.lanes|=I),mo(pe,I,y),pe=K.sibling}else pe=K.child;if(pe!==null)pe.return=K;else for(pe=K;pe!==null;){if(pe===y){pe=null;break}if(K=pe.sibling,K!==null){K.return=pe.return,pe=K;break}pe=pe.return}K=pe}_r(g,y,W.children,I),y=y.child}return y;case 9:return W=y.type,B=y.pendingProps.children,Ba(y,I),W=vs(W),B=B(W),y.flags|=1,_r(g,y,B,I),y.child;case 14:return B=y.type,W=Hl(B,y.pendingProps),W=Hl(B.type,W),Ee(g,y,B,W,I);case 15:return Me(g,y,y.type,y.pendingProps,I);case 17:return B=y.type,W=y.pendingProps,W=y.elementType===B?W:Hl(B,W),Lf(g,y),y.tag=1,fo(B)?(g=!0,pa(y)):g=!1,Ba(y,I),Gl(y,B,W),qu(y,B,W,I),fn(null,y,B,!0,g,I);case 19:return ba(g,y,I);case 22:return Xe(g,y,I)}throw Error(t(156,y.tag))};function Ic(g,y){return Gi(g,y)}function Bs(g,y,I,B){this.tag=g,this.key=I,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ou(g,y,I,B){return new Bs(g,y,I,B)}function a_(g){return g=g.prototype,!(!g||!g.isReactComponent)}function Eg(g){if(typeof g=="function")return a_(g)?1:0;if(g!=null){if(g=g.$$typeof,g===se)return 11;if(g===he)return 14}return 2}function xh(g,y){var I=g.alternate;return I===null?(I=Ou(g.tag,y,g.key,g.mode),I.elementType=g.elementType,I.type=g.type,I.stateNode=g.stateNode,I.alternate=g,g.alternate=I):(I.pendingProps=y,I.type=g.type,I.flags=0,I.subtreeFlags=0,I.deletions=null),I.flags=g.flags&14680064,I.childLanes=g.childLanes,I.lanes=g.lanes,I.child=g.child,I.memoizedProps=g.memoizedProps,I.memoizedState=g.memoizedState,I.updateQueue=g.updateQueue,y=g.dependencies,I.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},I.sibling=g.sibling,I.index=g.index,I.ref=g.ref,I}function Im(g,y,I,B,W,K){var pe=2;if(B=g,typeof g=="function")a_(g)&&(pe=1);else if(typeof g=="string")pe=5;else e:switch(g){case V:return Kp(I.children,W,K,y);case U:pe=8,W|=8;break;case ee:return g=Ou(12,I,y,W|2),g.elementType=ee,g.lanes=K,g;case fe:return g=Ou(13,I,y,W),g.elementType=fe,g.lanes=K,g;case ae:return g=Ou(19,I,y,W),g.elementType=ae,g.lanes=K,g;case Ie:return Jp(I,W,K,y);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case ne:pe=10;break e;case ie:pe=9;break e;case se:pe=11;break e;case he:pe=14;break e;case ge:pe=16,B=null;break e}throw Error(t(130,g==null?g:typeof g,""))}return y=Ou(pe,I,y,W),y.elementType=g,y.type=B,y.lanes=K,y}function Kp(g,y,I,B){return g=Ou(7,g,B,y),g.lanes=I,g}function Jp(g,y,I,B){return g=Ou(22,g,B,y),g.elementType=Ie,g.lanes=I,g.stateNode={isHidden:!1},g}function Uf(g,y,I){return g=Ou(6,g,null,y),g.lanes=I,g}function sd(g,y,I){return y=Ou(4,g.children!==null?g.children:[],g.key,y),y.lanes=I,y.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},y}function vp(g,y,I,B,W){this.tag=y,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=su(0),this.expirationTimes=su(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=su(0),this.identifierPrefix=B,this.onRecoverableError=W,this.mutableSourceEagerHydrationData=null}function $g(g,y,I,B,W,K,pe,Fe,Ke){return g=new vp(g,y,I,Fe,Ke),y===1?(y=1,K===!0&&(y|=8)):y=0,K=Ou(3,null,null,y),g.current=K,K.stateNode=g,K.memoizedState={element:B,isDehydrated:I,cache:null,transitions:null,pendingSuspenseBoundaries:null},hp(K),g}function vb(g,y,I){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:B==null?null:""+B,children:g,containerInfo:y,implementation:I}}function l_(g){if(!g)return Tc;g=g._reactInternals;e:{if(Bn(g)!==g||g.tag!==1)throw Error(t(170));var y=g;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(fo(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(t(171))}if(g.tag===1){var I=g.type;if(fo(I))return Th(g,I,y)}return y}function Pd(g,y,I,B,W,K,pe,Fe,Ke){return g=$g(I,B,!0,g,W,K,pe,Fe,Ke),g.context=l_(null),I=g.current,B=nc(),W=Bd(I),K=Zo(B,W),K.callback=y??null,mi(I,K,W),g.current.lanes=W,Ll(g,W,B),Sa(g,B),g}function Kr(g,y,I,B){var W=y.current,K=nc(),pe=Bd(W);return I=l_(I),y.context===null?y.context=I:y.pendingContext=I,y=Zo(K,pe),y.payload={element:g},B=B===void 0?null:B,B!==null&&(y.callback=B),g=mi(W,y,pe),g!==null&&(bo(g,W,pe,K),wn(g,W,pe)),pe}function Rm(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return g.child.stateNode;default:return g.child.stateNode}}function Sg(g,y){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var I=g.retryLane;g.retryLane=I!==0&&I<y?I:y}}function u_(g,y){Sg(g,y),(g=g.alternate)&&Sg(g,y)}function yb(){return null}var c_=typeof reportError=="function"?reportError:function(g){console.error(g)};function km(g){this._internalRoot=g}wg.prototype.render=km.prototype.render=function(g){var y=this._internalRoot;if(y===null)throw Error(t(409));Kr(g,y,null,null)},wg.prototype.unmount=km.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var y=g.containerInfo;Ff(function(){Kr(null,g,null,null)}),y[Qi]=null}};function wg(g){this._internalRoot=g}wg.prototype.unstable_scheduleHydration=function(g){if(g){var y=il();g={blockedOn:null,target:g,priority:y};for(var I=0;I<Nl.length&&y!==0&&y<Nl[I].priority;I++);Nl.splice(I,0,g),I===0&&Ms(g)}};function Qp(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function qp(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11&&(g.nodeType!==8||g.nodeValue!==" react-mount-point-unstable "))}function Om(){}function ri(g,y,I,B,W){if(W){if(typeof B=="function"){var K=B;B=function(){var $t=Rm(pe);K.call($t)}}var pe=Pd(y,B,g,0,null,!1,!1,"",Om);return g._reactRootContainer=pe,g[Qi]=pe.current,Wu(g.nodeType===8?g.parentNode:g),Ff(),pe}for(;W=g.lastChild;)g.removeChild(W);if(typeof B=="function"){var Fe=B;B=function(){var $t=Rm(Ke);Fe.call($t)}}var Ke=$g(g,0,!1,null,null,!1,!1,"",Om);return g._reactRootContainer=Ke,g[Qi]=Ke.current,Wu(g.nodeType===8?g.parentNode:g),Ff(function(){Kr(y,Ke,I,B)}),Ke}function Zp(g,y,I,B,W){var K=I._reactRootContainer;if(K){var pe=K;if(typeof W=="function"){var Fe=W;W=function(){var Ke=Rm(pe);Fe.call(Ke)}}Kr(y,pe,g,W)}else pe=ri(I,y,g,W,B);return Rm(pe)}Bc=function(g){switch(g.tag){case 3:var y=g.stateNode;if(y.current.memoizedState.isDehydrated){var I=Ia(y.pendingLanes);I!==0&&(zo(y,I|1),Sa(y,Yt()),!(wi&6)&&(Ac=Yt()+500,cn()))}break;case 13:Ff(function(){var B=Pa(g,1);if(B!==null){var W=nc();bo(B,g,1,W)}}),u_(g,1)}},ch=function(g){if(g.tag===13){var y=Pa(g,134217728);if(y!==null){var I=nc();bo(y,g,134217728,I)}u_(g,134217728)}},hc=function(g){if(g.tag===13){var y=Bd(g),I=Pa(g,y);if(I!==null){var B=nc();bo(I,g,y,B)}u_(g,y)}},il=function(){return Zn},ou=function(g,y){var I=Zn;try{return Zn=g,y()}finally{Zn=I}},Ut=function(g,y,I){switch(y){case"input":if(At(g,I),y=I.name,I.type==="radio"&&y!=null){for(I=g;I.parentNode;)I=I.parentNode;for(I=I.querySelectorAll("input[name="+JSON.stringify(""+y)+'][type="radio"]'),y=0;y<I.length;y++){var B=I[y];if(B!==g&&B.form===g.form){var W=Fp(B);if(!W)throw Error(t(90));we(B),At(B,W)}}}break;case"textarea":ke(g,I);break;case"select":y=I.value,y!=null&&pt(g,!!I.multiple,y,!1)}},ar=s0,Qn=Ff;var Lm={usingClientEntryPoint:!1,Events:[Br,zn,Fp,nr,ai,s0]},Nm={findFiberByHostInstance:Na,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},zf={bundleType:Nm.bundleType,version:Nm.version,rendererPackageName:Nm.rendererPackageName,rendererConfig:Nm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(g){return g=yr(g),g===null?null:g.stateNode},findFiberByHostInstance:Nm.findFiberByHostInstance||yb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var h_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!h_.isDisabled&&h_.supportsFiber)try{ur=h_.inject(zf),pn=h_}catch{}}return wp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lm,wp.createPortal=function(g,y){var I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qp(y))throw Error(t(200));return vb(g,y,null,I)},wp.createRoot=function(g,y){if(!Qp(g))throw Error(t(299));var I=!1,B="",W=c_;return y!=null&&(y.unstable_strictMode===!0&&(I=!0),y.identifierPrefix!==void 0&&(B=y.identifierPrefix),y.onRecoverableError!==void 0&&(W=y.onRecoverableError)),y=$g(g,1,!1,null,null,I,!1,B,W),g[Qi]=y.current,Wu(g.nodeType===8?g.parentNode:g),new km(y)},wp.findDOMNode=function(g){if(g==null)return null;if(g.nodeType===1)return g;var y=g._reactInternals;if(y===void 0)throw typeof g.render=="function"?Error(t(188)):(g=Object.keys(g).join(","),Error(t(268,g)));return g=yr(y),g=g===null?null:g.stateNode,g},wp.flushSync=function(g){return Ff(g)},wp.hydrate=function(g,y,I){if(!qp(y))throw Error(t(200));return Zp(null,g,y,!0,I)},wp.hydrateRoot=function(g,y,I){if(!Qp(g))throw Error(t(405));var B=I!=null&&I.hydratedSources||null,W=!1,K="",pe=c_;if(I!=null&&(I.unstable_strictMode===!0&&(W=!0),I.identifierPrefix!==void 0&&(K=I.identifierPrefix),I.onRecoverableError!==void 0&&(pe=I.onRecoverableError)),y=Pd(y,null,g,1,I??null,W,!1,K,pe),g[Qi]=y.current,Wu(g),B)for(g=0;g<B.length;g++)I=B[g],W=I._getVersion,W=W(I._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[I,W]:y.mutableSourceEagerHydrationData.push(I,W);return new wg(y)},wp.render=function(g,y,I){if(!qp(y))throw Error(t(200));return Zp(null,g,y,!1,I)},wp.unmountComponentAtNode=function(g){if(!qp(g))throw Error(t(40));return g._reactRootContainer?(Ff(function(){Zp(null,null,g,!1,function(){g._reactRootContainer=null,g[Qi]=null})}),!0):!1},wp.unstable_batchedUpdates=s0,wp.unstable_renderSubtreeIntoContainer=function(g,y,I,B){if(!qp(I))throw Error(t(200));if(g==null||g._reactInternals===void 0)throw Error(t(38));return Zp(g,y,I,!1,B)},wp.version="18.2.0-next-9e3b772b8-20220608",wp}(function(r){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),r.exports=ave()})(qj);var Zj,B4=qj.exports;Zj=B4.createRoot,B4.hydrateRoot;const Mw=new Te,EP=new Te,lve=new Te;function uve(r,e,t){const i=Mw.setFromMatrixPosition(r.matrixWorld);i.project(e);const s=t.width/2,o=t.height/2;return[i.x*s+s,-(i.y*o)+o]}function cve(r,e){const t=Mw.setFromMatrixPosition(r.matrixWorld),i=EP.setFromMatrixPosition(e.matrixWorld),s=t.sub(i),o=e.getWorldDirection(lve);return s.angleTo(o)>Math.PI/2}function hve(r,e,t,i){const s=Mw.setFromMatrixPosition(r.matrixWorld),o=s.clone();o.project(e),t.setFromCamera(o,e);const l=t.intersectObjects(i,!0);if(l.length){const u=l[0].distance;return s.distanceTo(t.ray.origin)<u}return!0}function dve(r,e){if(e instanceof jg)return e.zoom;if(e instanceof So){const t=Mw.setFromMatrixPosition(r.matrixWorld),i=EP.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,o=t.distanceTo(i);return 1/(2*Math.tan(s/2)*o)}else return 1}function pve(r,e,t){if(e instanceof So||e instanceof jg){const i=Mw.setFromMatrixPosition(r.matrixWorld),s=EP.setFromMatrixPosition(e.matrixWorld),o=i.distanceTo(s),l=(t[1]-t[0])/(e.far-e.near),u=t[1]-l*e.far;return Math.round(l*o+u)}}const R2=r=>Math.abs(r)<1e-10?0:r;function e7(r,e,t=""){let i="matrix3d(";for(let s=0;s!==16;s++)i+=R2(e[s]*r.elements[s])+(s!==15?",":")");return t+i}const fve=(r=>e=>e7(e,r))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),mve=(r=>(e,t)=>e7(e,r(t),"translate(-50%,-50%)"))(r=>[1/r,1/r,1/r,1,-1/r,-1/r,-1/r,-1,1/r,1/r,1/r,1,1,1,1,1]);function gve(r){return r&&typeof r=="object"&&"current"in r}const t7=de.forwardRef(({children:r,eps:e=.001,style:t,className:i,prepend:s,center:o,fullscreen:l,portal:u,distanceFactor:h,sprite:p=!1,transform:m=!1,occlude:_,onOcclude:v,castShadow:E,receiveShadow:w,material:x,geometry:A,zIndexRange:O=[16777271,0],calculatePosition:k=uve,as:D="div",wrapperClass:N,pointerEvents:F="auto",...z},V)=>{const{gl:U,camera:ee,scene:ne,size:ie,raycaster:se,events:fe,viewport:ae}=Nh(),[he]=de.useState(()=>document.createElement(D)),ge=de.useRef(),Ie=de.useRef(null),j=de.useRef(0),te=de.useRef([0,0]),q=de.useRef(null),le=de.useRef(null),_e=(u==null?void 0:u.current)||fe.connected||U.domElement.parentNode,Le=de.useRef(null),xe=de.useRef(!1),Ve=de.useMemo(()=>_&&_!=="blending"||Array.isArray(_)&&_.length&&gve(_[0]),[_]);de.useLayoutEffect(()=>{const rt=U.domElement;_&&_==="blending"?(rt.style.zIndex=`${Math.floor(O[0]/2)}`,rt.style.position="absolute",rt.style.pointerEvents="none"):(rt.style.zIndex=null,rt.style.position=null,rt.style.pointerEvents=null)},[_]),de.useLayoutEffect(()=>{if(Ie.current){const rt=ge.current=Zj(he);if(ne.updateMatrixWorld(),m)he.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Ne=k(Ie.current,ee,ie);he.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Ne[0]}px,${Ne[1]}px,0);transform-origin:0 0;`}return _e&&(s?_e.prepend(he):_e.appendChild(he)),()=>{_e&&_e.removeChild(he),rt.unmount()}}},[_e,m]),de.useLayoutEffect(()=>{N&&(he.className=N)},[N]);const Re=de.useMemo(()=>m?{position:"absolute",top:0,left:0,width:ie.width,height:ie.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...l&&{top:-ie.height/2,left:-ie.width/2,width:ie.width,height:ie.height},...t},[t,o,l,ie,m]),Ze=de.useMemo(()=>({position:"absolute",pointerEvents:F}),[F]);de.useLayoutEffect(()=>{if(xe.current=!1,m){var rt;(rt=ge.current)==null||rt.render(Xt("div",{ref:q,style:Re,children:Xt("div",{ref:le,style:Ze,children:Xt("div",{ref:V,className:i,style:t,children:r})})}))}else{var Ne;(Ne=ge.current)==null||Ne.render(Xt("div",{ref:V,style:Re,className:i,children:r}))}});const et=de.useRef(!0);Af(rt=>{if(Ie.current){ee.updateMatrixWorld(),Ie.current.updateWorldMatrix(!0,!1);const Ne=m?te.current:k(Ie.current,ee,ie);if(m||Math.abs(j.current-ee.zoom)>e||Math.abs(te.current[0]-Ne[0])>e||Math.abs(te.current[1]-Ne[1])>e){const we=cve(Ie.current,ee);let ze=!1;Ve&&(_!=="blending"?ze=[ne]:Array.isArray(_)&&(ze=_.map(At=>At.current)));const it=et.current;if(ze){const At=hve(Ie.current,ee,se,ze);et.current=At&&!we}else et.current=!we;it!==et.current&&(v?v(!et.current):he.style.display=et.current?"block":"none");const nt=Math.floor(O[0]/2),Mt=_?Ve?[O[0],nt]:[nt-1,0]:O;if(he.style.zIndex=`${pve(Ie.current,ee,Mt)}`,m){const[At,ht]=[ie.width/2,ie.height/2],Et=ee.projectionMatrix.elements[5]*ht,{isOrthographicCamera:wt,top:pt,left:be,bottom:Z,right:ke}=ee,lt=fve(ee.matrixWorldInverse),mt=wt?`scale(${Et})translate(${R2(-(ke+be)/2)}px,${R2((pt+Z)/2)}px)`:`translateZ(${Et}px)`;let xt=Ie.current.matrixWorld;p&&(xt=ee.matrixWorldInverse.clone().transpose().copyPosition(xt).scale(Ie.current.scale),xt.elements[3]=xt.elements[7]=xt.elements[11]=0,xt.elements[15]=1),he.style.width=ie.width+"px",he.style.height=ie.height+"px",he.style.perspective=wt?"":`${Et}px`,q.current&&le.current&&(q.current.style.transform=`${mt}${lt}translate(${At}px,${ht}px)`,le.current.style.transform=mve(xt,1/((h||10)/400)))}else{const At=h===void 0?1:dve(Ie.current,ee)*h;he.style.transform=`translate3d(${Ne[0]}px,${Ne[1]}px,0) scale(${At})`}te.current=Ne,j.current=ee.zoom}}if(!Ve&&Le.current&&!xe.current)if(m){if(q.current){const Ne=q.current.children[0];if(Ne!=null&&Ne.clientWidth&&Ne!=null&&Ne.clientHeight){const{isOrthographicCamera:we}=ee;if(we||A)z.scale&&(Array.isArray(z.scale)?z.scale instanceof Te?Le.current.scale.copy(z.scale.clone().divideScalar(1)):Le.current.scale.set(1/z.scale[0],1/z.scale[1],1/z.scale[2]):Le.current.scale.setScalar(1/z.scale));else{const ze=(h||10)/400,it=Ne.clientWidth*ze,nt=Ne.clientHeight*ze;Le.current.scale.set(it,nt,1)}xe.current=!0}}}else{const Ne=he.children[0];if(Ne!=null&&Ne.clientWidth&&Ne!=null&&Ne.clientHeight){const we=1/ae.factor,ze=Ne.clientWidth*we,it=Ne.clientHeight*we;Le.current.scale.set(ze,it,1),xe.current=!0}Le.current.lookAt(rt.camera.position)}});const ct=de.useMemo(()=>({vertexShader:m?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[m]);return Xt("group",{...z,ref:Ie,children:_&&!Ve&&uc("mesh",{castShadow:E,receiveShadow:w,ref:Le,children:[A||Xt("planeGeometry",{}),x||Xt("shaderMaterial",{side:Kd,vertexShader:ct.vertexShader,fragmentShader:ct.fragmentShader})]})})});function $P(r){return function(e){r.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}const kM=0,_ve=1,vve=new Te,P4=new yP,ZO=new L_,F4=new Te,XC=new df;class U4{constructor(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new z4,this.unassigned=new z4,this.vertices=[]}setFromPoints(e){if(e.length>=4){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.vertices.push(new yve(e[t]));this.compute()}return this}setFromObject(e){const t=[];return e.updateMatrixWorld(!0),e.traverse(function(i){const s=i.geometry;if(s!==void 0){if(s.isGeometry){console.error("THREE.ConvexHull no longer supports Geometry. Use THREE.BufferGeometry instead.");return}else if(s.isBufferGeometry){const o=s.attributes.position;if(o!==void 0)for(let l=0,u=o.count;l<u;l++){const h=new Te;h.fromBufferAttribute(o,l).applyMatrix4(i.matrixWorld),t.push(h)}}}}),this.setFromPoints(t)}containsPoint(e){const t=this.faces;for(let i=0,s=t.length;i<s;i++)if(t[i].distanceToPoint(e)>this.tolerance)return!1;return!0}intersectRay(e,t){const i=this.faces;let s=-1/0,o=1/0;for(let l=0,u=i.length;l<u;l++){const h=i[l],p=h.distanceToPoint(e.origin),m=h.normal.dot(e.direction);if(p>0&&m>=0)return null;const _=m!==0?-p/m:0;if(!(_<=0)&&(m>0?o=Math.min(_,o):s=Math.max(_,s),s>o))return null}return s!==-1/0?e.at(s,t):e.at(o,t),t}intersectsRay(e){return this.intersectRay(e,vve)!==null}makeEmpty(){return this.faces=[],this.vertices=[],this}addVertexToFace(e,t){return e.face=t,t.outside===null?this.assigned.append(e):this.assigned.insertBefore(t.outside,e),t.outside=e,this}removeVertexFromFace(e,t){return e===t.outside&&(e.next!==null&&e.next.face===t?t.outside=e.next:t.outside=null),this.assigned.remove(e),this}removeAllVerticesFromFace(e){if(e.outside!==null){const t=e.outside;let i=e.outside;for(;i.next!==null&&i.next.face===e;)i=i.next;return this.assigned.removeSubList(t,i),t.prev=i.next=null,e.outside=null,t}}deleteFaceVertices(e,t){const i=this.removeAllVerticesFromFace(e);if(i!==void 0)if(t===void 0)this.unassigned.appendChain(i);else{let s=i;do{const o=s.next;t.distanceToPoint(s.point)>this.tolerance?this.addVertexToFace(s,t):this.unassigned.append(s),s=o}while(s!==null)}return this}resolveUnassignedPoints(e){if(this.unassigned.isEmpty()===!1){let t=this.unassigned.first();do{const i=t.next;let s=this.tolerance,o=null;for(let l=0;l<e.length;l++){const u=e[l];if(u.mark===kM){const h=u.distanceToPoint(t.point);if(h>s&&(s=h,o=u),s>1e3*this.tolerance)break}}o!==null&&this.addVertexToFace(t,o),t=i}while(t!==null)}return this}computeExtremes(){const e=new Te,t=new Te,i=[],s=[];for(let o=0;o<3;o++)i[o]=s[o]=this.vertices[0];e.copy(this.vertices[0].point),t.copy(this.vertices[0].point);for(let o=0,l=this.vertices.length;o<l;o++){const u=this.vertices[o],h=u.point;for(let p=0;p<3;p++)h.getComponent(p)<e.getComponent(p)&&(e.setComponent(p,h.getComponent(p)),i[p]=u);for(let p=0;p<3;p++)h.getComponent(p)>t.getComponent(p)&&(t.setComponent(p,h.getComponent(p)),s[p]=u)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(e.x),Math.abs(t.x))+Math.max(Math.abs(e.y),Math.abs(t.y))+Math.max(Math.abs(e.z),Math.abs(t.z))),{min:i,max:s}}computeInitialHull(){const e=this.vertices,t=this.computeExtremes(),i=t.min,s=t.max;let o=0,l=0;for(let v=0;v<3;v++){const E=s[v].point.getComponent(v)-i[v].point.getComponent(v);E>o&&(o=E,l=v)}const u=i[l],h=s[l];let p,m;o=0,P4.set(u.point,h.point);for(let v=0,E=this.vertices.length;v<E;v++){const w=e[v];if(w!==u&&w!==h){P4.closestPointToPoint(w.point,!0,F4);const x=F4.distanceToSquared(w.point);x>o&&(o=x,p=w)}}o=-1,ZO.setFromCoplanarPoints(u.point,h.point,p.point);for(let v=0,E=this.vertices.length;v<E;v++){const w=e[v];if(w!==u&&w!==h&&w!==p){const x=Math.abs(ZO.distanceToPoint(w.point));x>o&&(o=x,m=w)}}const _=[];if(ZO.distanceToPoint(m.point)<0){_.push(Ym.create(u,h,p),Ym.create(m,h,u),Ym.create(m,p,h),Ym.create(m,u,p));for(let v=0;v<3;v++){const E=(v+1)%3;_[v+1].getEdge(2).setTwin(_[0].getEdge(E)),_[v+1].getEdge(1).setTwin(_[E+1].getEdge(0))}}else{_.push(Ym.create(u,p,h),Ym.create(m,u,h),Ym.create(m,h,p),Ym.create(m,p,u));for(let v=0;v<3;v++){const E=(v+1)%3;_[v+1].getEdge(2).setTwin(_[0].getEdge((3-v)%3)),_[v+1].getEdge(0).setTwin(_[E+1].getEdge(1))}}for(let v=0;v<4;v++)this.faces.push(_[v]);for(let v=0,E=e.length;v<E;v++){const w=e[v];if(w!==u&&w!==h&&w!==p&&w!==m){o=this.tolerance;let x=null;for(let A=0;A<4;A++){const O=this.faces[A].distanceToPoint(w.point);O>o&&(o=O,x=this.faces[A])}x!==null&&this.addVertexToFace(w,x)}}return this}reindexFaces(){const e=[];for(let t=0;t<this.faces.length;t++){const i=this.faces[t];i.mark===kM&&e.push(i)}return this.faces=e,this}nextVertexToAdd(){if(this.assigned.isEmpty()===!1){let e,t=0;const i=this.assigned.first().face;let s=i.outside;do{const o=i.distanceToPoint(s.point);o>t&&(t=o,e=s),s=s.next}while(s!==null&&s.face===i);return e}}computeHorizon(e,t,i,s){this.deleteFaceVertices(i),i.mark=_ve;let o;t===null?o=t=i.getEdge(0):o=t.next;do{const l=o.twin,u=l.face;u.mark===kM&&(u.distanceToPoint(e)>this.tolerance?this.computeHorizon(e,l,u,s):s.push(o)),o=o.next}while(o!==t);return this}addAdjoiningFace(e,t){const i=Ym.create(e,t.tail(),t.head());return this.faces.push(i),i.getEdge(-1).setTwin(t.twin),i.getEdge(0)}addNewFaces(e,t){this.newFaces=[];let i=null,s=null;for(let o=0;o<t.length;o++){const l=t[o],u=this.addAdjoiningFace(e,l);i===null?i=u:u.next.setTwin(s),this.newFaces.push(u.face),s=u}return i.next.setTwin(s),this}addVertexToHull(e){const t=[];return this.unassigned.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,t),this.addNewFaces(e,t),this.resolveUnassignedPoints(this.newFaces),this}cleanup(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}compute(){let e;for(this.computeInitialHull();(e=this.nextVertexToAdd())!==void 0;)this.addVertexToHull(e);return this.reindexFaces(),this.cleanup(),this}}class Ym{constructor(){this.normal=new Te,this.midpoint=new Te,this.area=0,this.constant=0,this.outside=null,this.mark=kM,this.edge=null}static create(e,t,i){const s=new Ym,o=new eL(e,s),l=new eL(t,s),u=new eL(i,s);return o.next=u.prev=l,l.next=o.prev=u,u.next=l.prev=o,s.edge=o,s.compute()}getEdge(e){let t=this.edge;for(;e>0;)t=t.next,e--;for(;e<0;)t=t.prev,e++;return t}compute(){const e=this.edge.tail(),t=this.edge.head(),i=this.edge.next.head();return XC.set(e.point,t.point,i.point),XC.getNormal(this.normal),XC.getMidpoint(this.midpoint),this.area=XC.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(e){return this.normal.dot(e)-this.constant}}class eL{constructor(e,t){this.vertex=e,this.prev=null,this.next=null,this.twin=null,this.face=t}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const e=this.head(),t=this.tail();return t!==null?t.point.distanceTo(e.point):-1}lengthSquared(){const e=this.head(),t=this.tail();return t!==null?t.point.distanceToSquared(e.point):-1}setTwin(e){return this.twin=e,e.twin=this,this}}class yve{constructor(e){this.point=e,this.prev=null,this.next=null,this.face=null}}class z4{constructor(){this.head=null,this.tail=null}first(){return this.head}last(){return this.tail}clear(){return this.head=this.tail=null,this}insertBefore(e,t){return t.prev=e.prev,t.next=e,t.prev===null?this.head=t:t.prev.next=t,e.prev=t,this}insertAfter(e,t){return t.prev=e,t.next=e.next,t.next===null?this.tail=t:t.next.prev=t,e.next=t,this}append(e){return this.head===null?this.head=e:this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e,this}appendChain(e){for(this.head===null?this.head=e:this.tail.next=e,e.prev=this.tail;e.next!==null;)e=e.next;return this.tail=e,this}remove(e){return e.prev===null?this.head=e.next:e.prev.next=e.next,e.next===null?this.tail=e.prev:e.next.prev=e.prev,this}removeSubList(e,t){return e.prev===null?this.head=t.next:e.prev.next=t.next,t.next===null?this.tail=e.prev:t.next.prev=e.prev,this}isEmpty(){return this.head===null}}class H4 extends Ar{constructor(e=[]){super();const t=[],i=[];U4===void 0&&console.error("THREE.ConvexGeometry: ConvexGeometry relies on ConvexHull");const s=new U4().setFromPoints(e).faces;for(let o=0;o<s.length;o++){const l=s[o];let u=l.edge;do{const h=u.head().point;t.push(h.x,h.y,h.z),i.push(l.normal.x,l.normal.y,l.normal.z),u=u.next}while(u!==l.edge)}this.setAttribute("position",new Pn(t,3)),this.setAttribute("normal",new Pn(i,3))}}function zr(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}const n7=(r,e)=>{const t=r[0].index!==null,i=new Set(Object.keys(r[0].attributes)),s=new Set(Object.keys(r[0].morphAttributes)),o={},l={},u=r[0].morphTargetsRelative,h=new Ar;let p=0;if(r.forEach((m,_)=>{let v=0;if(t!==(m.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let E in m.attributes){if(!i.has(E))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+'. All geometries must have compatible attributes; make sure "'+E+'" attribute exists among all geometries, or in none of them.'),null;o[E]===void 0&&(o[E]=[]),o[E].push(m.attributes[E]),v++}if(v!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+". Make sure all geometries have the same number of attributes."),null;if(u!==m.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let E in m.morphAttributes){if(!s.has(E))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+".  .morphAttributes must be consistent throughout all geometries."),null;l[E]===void 0&&(l[E]=[]),l[E].push(m.morphAttributes[E])}if(h.userData.mergedUserData=h.userData.mergedUserData||[],h.userData.mergedUserData.push(m.userData),e){let E;if(m.index)E=m.index.count;else if(m.attributes.position!==void 0)E=m.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+". The geometry must have either an index or a position attribute"),null;h.addGroup(p,E,_),p+=E}}),t){let m=0;const _=[];r.forEach(v=>{const E=v.index;for(let w=0;w<E.count;++w)_.push(E.getX(w)+m);m+=v.attributes.position.count}),h.setIndex(_)}for(let m in o){const _=G4(o[m]);if(!_)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+m+" attribute."),null;h.setAttribute(m,_)}for(let m in l){const _=l[m][0].length;if(_===0)break;h.morphAttributes=h.morphAttributes||{},h.morphAttributes[m]=[];for(let v=0;v<_;++v){const E=[];for(let x=0;x<l[m].length;++x)E.push(l[m][x][v]);const w=G4(E);if(!w)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+m+" morphAttribute."),null;h.morphAttributes[m].push(w)}}return h},G4=r=>{let e,t,i,s=0;if(r.forEach(o=>{if(e===void 0&&(e=o.array.constructor),e!==o.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=o.itemSize),t!==o.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=o.normalized),i!==o.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;s+=o.array.length}),e&&t){const o=new e(s);let l=0;return r.forEach(u=>{o.set(u.array,l),l+=u.array.length}),new xs(o,t,i)}},W4=(r,e)=>(r%e+e)%e;class bve extends Cf{constructor(e,t){super(),zr(this,"object",void 0),zr(this,"domElement",void 0),zr(this,"enabled",!0),zr(this,"target",new Te),zr(this,"minDistance",0),zr(this,"maxDistance",1/0),zr(this,"minZoom",0),zr(this,"maxZoom",1/0),zr(this,"minPolarAngle",0),zr(this,"maxPolarAngle",Math.PI),zr(this,"minAzimuthAngle",-1/0),zr(this,"maxAzimuthAngle",1/0),zr(this,"enableDamping",!1),zr(this,"dampingFactor",.05),zr(this,"enableZoom",!0),zr(this,"zoomSpeed",1),zr(this,"enableRotate",!0),zr(this,"rotateSpeed",1),zr(this,"enablePan",!0),zr(this,"panSpeed",1),zr(this,"screenSpacePanning",!0),zr(this,"keyPanSpeed",7),zr(this,"autoRotate",!1),zr(this,"autoRotateSpeed",2),zr(this,"reverseOrbit",!1),zr(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),zr(this,"mouseButtons",{LEFT:my.ROTATE,MIDDLE:my.DOLLY,RIGHT:my.PAN}),zr(this,"touches",{ONE:gy.ROTATE,TWO:gy.DOLLY_PAN}),zr(this,"target0",void 0),zr(this,"position0",void 0),zr(this,"zoom0",void 0),zr(this,"_domElementKeyEvents",null),zr(this,"getPolarAngle",void 0),zr(this,"getAzimuthalAngle",void 0),zr(this,"setPolarAngle",void 0),zr(this,"setAzimuthalAngle",void 0),zr(this,"getDistance",void 0),zr(this,"listenToKeyEvents",void 0),zr(this,"saveState",void 0),zr(this,"reset",void 0),zr(this,"update",void 0),zr(this,"connect",void 0),zr(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof So?this.object.zoom:1,this.getPolarAngle=()=>m.phi,this.getAzimuthalAngle=()=>m.theta,this.setPolarAngle=J=>{let oe=W4(J,2*Math.PI),$e=m.phi;$e<0&&($e+=2*Math.PI),oe<0&&(oe+=2*Math.PI);let Ge=Math.abs(oe-$e);2*Math.PI-Ge<Ge&&(oe<$e?oe+=2*Math.PI:$e+=2*Math.PI),_.phi=oe-$e,i.update()},this.setAzimuthalAngle=J=>{let oe=W4(J,2*Math.PI),$e=m.theta;$e<0&&($e+=2*Math.PI),oe<0&&(oe+=2*Math.PI);let Ge=Math.abs(oe-$e);2*Math.PI-Ge<Ge&&(oe<$e?oe+=2*Math.PI:$e+=2*Math.PI),_.theta=oe-$e,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=J=>{J.addEventListener("keydown",ke),this._domElementKeyEvents=J},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object instanceof So?i.object.zoom:1},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object instanceof So&&(i.object.zoom=i.zoom0,i.object.updateProjectionMatrix()),i.dispatchEvent(s),i.update(),h=u.NONE},this.update=(()=>{const J=new Te,oe=new Bo().setFromUnitVectors(e.up,new Te(0,1,0)),$e=oe.clone().invert(),Ge=new Te,Bt=new Bo,Pe=2*Math.PI;return function(){const Wt=i.object.position;J.copy(Wt).sub(i.target),J.applyQuaternion(oe),m.setFromVector3(J),i.autoRotate&&h===u.NONE&&se(ne()),i.enableDamping?(m.theta+=_.theta*i.dampingFactor,m.phi+=_.phi*i.dampingFactor):(m.theta+=_.theta,m.phi+=_.phi);let st=i.minAzimuthAngle,Ut=i.maxAzimuthAngle;return isFinite(st)&&isFinite(Ut)&&(st<-Math.PI?st+=Pe:st>Math.PI&&(st-=Pe),Ut<-Math.PI?Ut+=Pe:Ut>Math.PI&&(Ut-=Pe),st<=Ut?m.theta=Math.max(st,Math.min(Ut,m.theta)):m.theta=m.theta>(st+Ut)/2?Math.max(st,m.theta):Math.min(Ut,m.theta)),m.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=v,m.radius=Math.max(i.minDistance,Math.min(i.maxDistance,m.radius)),i.enableDamping===!0?i.target.addScaledVector(E,i.dampingFactor):i.target.add(E),J.setFromSpherical(m),J.applyQuaternion($e),Wt.copy(i.target).add(J),i.object.lookAt(i.target),i.enableDamping===!0?(_.theta*=1-i.dampingFactor,_.phi*=1-i.dampingFactor,E.multiplyScalar(1-i.dampingFactor)):(_.set(0,0,0),E.set(0,0,0)),v=1,w||Ge.distanceToSquared(i.object.position)>p||8*(1-Bt.dot(i.object.quaternion))>p?(i.dispatchEvent(s),Ge.copy(i.object.position),Bt.copy(i.object.quaternion),w=!1,!0):!1}})(),this.connect=J=>{J===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=J,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",xt),i.domElement.addEventListener("pointerdown",At),i.domElement.addEventListener("pointercancel",wt),i.domElement.addEventListener("wheel",Z)},this.dispose=()=>{var J,oe,$e,Ge,Bt,Pe;(J=i.domElement)===null||J===void 0||J.removeEventListener("contextmenu",xt),(oe=i.domElement)===null||oe===void 0||oe.removeEventListener("pointerdown",At),($e=i.domElement)===null||$e===void 0||$e.removeEventListener("pointercancel",wt),(Ge=i.domElement)===null||Ge===void 0||Ge.removeEventListener("wheel",Z),(Bt=i.domElement)===null||Bt===void 0||Bt.ownerDocument.removeEventListener("pointermove",ht),(Pe=i.domElement)===null||Pe===void 0||Pe.ownerDocument.removeEventListener("pointerup",Et),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ke)};const i=this,s={type:"change"},o={type:"start"},l={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=u.NONE;const p=1e-6,m=new x2,_=new x2;let v=1;const E=new Te;let w=!1;const x=new Ot,A=new Ot,O=new Ot,k=new Ot,D=new Ot,N=new Ot,F=new Ot,z=new Ot,V=new Ot,U=[],ee={};function ne(){return 2*Math.PI/60/60*i.autoRotateSpeed}function ie(){return Math.pow(.95,i.zoomSpeed)}function se(J){i.reverseOrbit?_.theta+=J:_.theta-=J}function fe(J){i.reverseOrbit?_.phi+=J:_.phi-=J}const ae=(()=>{const J=new Te;return function(oe,$e){J.setFromMatrixColumn($e,0),J.multiplyScalar(-oe),E.add(J)}})(),he=(()=>{const J=new Te;return function(oe,$e){i.screenSpacePanning===!0?J.setFromMatrixColumn($e,1):(J.setFromMatrixColumn($e,0),J.crossVectors(i.object.up,J)),J.multiplyScalar(oe),E.add(J)}})(),ge=(()=>{const J=new Te;return function(oe,$e){const Ge=i.domElement;if(Ge&&i.object instanceof So&&i.object.isPerspectiveCamera){const Bt=i.object.position;J.copy(Bt).sub(i.target);let Pe=J.length();Pe*=Math.tan(i.object.fov/2*Math.PI/180),ae(2*oe*Pe/Ge.clientHeight,i.object.matrix),he(2*$e*Pe/Ge.clientHeight,i.object.matrix)}else Ge&&i.object instanceof jg&&i.object.isOrthographicCamera?(ae(oe*(i.object.right-i.object.left)/i.object.zoom/Ge.clientWidth,i.object.matrix),he($e*(i.object.top-i.object.bottom)/i.object.zoom/Ge.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function Ie(J){i.object instanceof So&&i.object.isPerspectiveCamera?v/=J:i.object instanceof jg&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*J)),i.object.updateProjectionMatrix(),w=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function j(J){i.object instanceof So&&i.object.isPerspectiveCamera?v*=J:i.object instanceof jg&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/J)),i.object.updateProjectionMatrix(),w=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function te(J){x.set(J.clientX,J.clientY)}function q(J){F.set(J.clientX,J.clientY)}function le(J){k.set(J.clientX,J.clientY)}function _e(J){A.set(J.clientX,J.clientY),O.subVectors(A,x).multiplyScalar(i.rotateSpeed);const oe=i.domElement;oe&&(se(2*Math.PI*O.x/oe.clientHeight),fe(2*Math.PI*O.y/oe.clientHeight)),x.copy(A),i.update()}function Le(J){z.set(J.clientX,J.clientY),V.subVectors(z,F),V.y>0?Ie(ie()):V.y<0&&j(ie()),F.copy(z),i.update()}function xe(J){D.set(J.clientX,J.clientY),N.subVectors(D,k).multiplyScalar(i.panSpeed),ge(N.x,N.y),k.copy(D),i.update()}function Ve(J){J.deltaY<0?j(ie()):J.deltaY>0&&Ie(ie()),i.update()}function Re(J){let oe=!1;switch(J.code){case i.keys.UP:ge(0,i.keyPanSpeed),oe=!0;break;case i.keys.BOTTOM:ge(0,-i.keyPanSpeed),oe=!0;break;case i.keys.LEFT:ge(i.keyPanSpeed,0),oe=!0;break;case i.keys.RIGHT:ge(-i.keyPanSpeed,0),oe=!0;break}oe&&(J.preventDefault(),i.update())}function Ze(){if(U.length==1)x.set(U[0].pageX,U[0].pageY);else{const J=.5*(U[0].pageX+U[1].pageX),oe=.5*(U[0].pageY+U[1].pageY);x.set(J,oe)}}function et(){if(U.length==1)k.set(U[0].pageX,U[0].pageY);else{const J=.5*(U[0].pageX+U[1].pageX),oe=.5*(U[0].pageY+U[1].pageY);k.set(J,oe)}}function ct(){const J=U[0].pageX-U[1].pageX,oe=U[0].pageY-U[1].pageY,$e=Math.sqrt(J*J+oe*oe);F.set(0,$e)}function rt(){i.enableZoom&&ct(),i.enablePan&&et()}function Ne(){i.enableZoom&&ct(),i.enableRotate&&Ze()}function we(J){if(U.length==1)A.set(J.pageX,J.pageY);else{const $e=X(J),Ge=.5*(J.pageX+$e.x),Bt=.5*(J.pageY+$e.y);A.set(Ge,Bt)}O.subVectors(A,x).multiplyScalar(i.rotateSpeed);const oe=i.domElement;oe&&(se(2*Math.PI*O.x/oe.clientHeight),fe(2*Math.PI*O.y/oe.clientHeight)),x.copy(A)}function ze(J){if(U.length==1)D.set(J.pageX,J.pageY);else{const oe=X(J),$e=.5*(J.pageX+oe.x),Ge=.5*(J.pageY+oe.y);D.set($e,Ge)}N.subVectors(D,k).multiplyScalar(i.panSpeed),ge(N.x,N.y),k.copy(D)}function it(J){const oe=X(J),$e=J.pageX-oe.x,Ge=J.pageY-oe.y,Bt=Math.sqrt($e*$e+Ge*Ge);z.set(0,Bt),V.set(0,Math.pow(z.y/F.y,i.zoomSpeed)),Ie(V.y),F.copy(z)}function nt(J){i.enableZoom&&it(J),i.enablePan&&ze(J)}function Mt(J){i.enableZoom&&it(J),i.enableRotate&&we(J)}function At(J){if(i.enabled!==!1){if(U.length===0){var oe,$e;(oe=i.domElement)===null||oe===void 0||oe.ownerDocument.addEventListener("pointermove",ht),($e=i.domElement)===null||$e===void 0||$e.ownerDocument.addEventListener("pointerup",Et)}ut(J),J.pointerType==="touch"?lt(J):pt(J)}}function ht(J){i.enabled!==!1&&(J.pointerType==="touch"?mt(J):be(J))}function Et(J){if(He(J),U.length===0){var oe,$e,Ge;(oe=i.domElement)===null||oe===void 0||oe.releasePointerCapture(J.pointerId),($e=i.domElement)===null||$e===void 0||$e.ownerDocument.removeEventListener("pointermove",ht),(Ge=i.domElement)===null||Ge===void 0||Ge.ownerDocument.removeEventListener("pointerup",Et)}i.dispatchEvent(l),h=u.NONE}function wt(J){He(J)}function pt(J){let oe;switch(J.button){case 0:oe=i.mouseButtons.LEFT;break;case 1:oe=i.mouseButtons.MIDDLE;break;case 2:oe=i.mouseButtons.RIGHT;break;default:oe=-1}switch(oe){case my.DOLLY:if(i.enableZoom===!1)return;q(J),h=u.DOLLY;break;case my.ROTATE:if(J.ctrlKey||J.metaKey||J.shiftKey){if(i.enablePan===!1)return;le(J),h=u.PAN}else{if(i.enableRotate===!1)return;te(J),h=u.ROTATE}break;case my.PAN:if(J.ctrlKey||J.metaKey||J.shiftKey){if(i.enableRotate===!1)return;te(J),h=u.ROTATE}else{if(i.enablePan===!1)return;le(J),h=u.PAN}break;default:h=u.NONE}h!==u.NONE&&i.dispatchEvent(o)}function be(J){if(i.enabled!==!1)switch(h){case u.ROTATE:if(i.enableRotate===!1)return;_e(J);break;case u.DOLLY:if(i.enableZoom===!1)return;Le(J);break;case u.PAN:if(i.enablePan===!1)return;xe(J);break}}function Z(J){i.enabled===!1||i.enableZoom===!1||h!==u.NONE&&h!==u.ROTATE||(J.preventDefault(),i.dispatchEvent(o),Ve(J),i.dispatchEvent(l))}function ke(J){i.enabled===!1||i.enablePan===!1||Re(J)}function lt(J){switch(Ce(J),U.length){case 1:switch(i.touches.ONE){case gy.ROTATE:if(i.enableRotate===!1)return;Ze(),h=u.TOUCH_ROTATE;break;case gy.PAN:if(i.enablePan===!1)return;et(),h=u.TOUCH_PAN;break;default:h=u.NONE}break;case 2:switch(i.touches.TWO){case gy.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;rt(),h=u.TOUCH_DOLLY_PAN;break;case gy.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ne(),h=u.TOUCH_DOLLY_ROTATE;break;default:h=u.NONE}break;default:h=u.NONE}h!==u.NONE&&i.dispatchEvent(o)}function mt(J){switch(Ce(J),h){case u.TOUCH_ROTATE:if(i.enableRotate===!1)return;we(J),i.update();break;case u.TOUCH_PAN:if(i.enablePan===!1)return;ze(J),i.update();break;case u.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;nt(J),i.update();break;case u.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Mt(J),i.update();break;default:h=u.NONE}}function xt(J){i.enabled!==!1&&J.preventDefault()}function ut(J){U.push(J)}function He(J){delete ee[J.pointerId];for(let oe=0;oe<U.length;oe++)if(U[oe].pointerId==J.pointerId){U.splice(oe,1);return}}function Ce(J){let oe=ee[J.pointerId];oe===void 0&&(oe=new Ot,ee[J.pointerId]=oe),oe.set(J.pageX,J.pageY)}function X(J){const oe=J.pointerId===U[0].pointerId?U[1]:U[0];return ee[oe.pointerId]}t!==void 0&&this.connect(t),this.update()}}const w$=new Te;function Zf(r,e,t,i,s,o){const l=2*Math.PI*s/4,u=Math.max(o-2*s,0),h=Math.PI/4;w$.copy(e),w$[i]=0,w$.normalize();const p=.5*l/(l+u),m=1-w$.angleTo(r)/h;return Math.sign(w$[t])===1?m*p:u/(l+u)+p+p*(1-m)}class Tve extends Ma{constructor(e=1,t=1,i=1,s=2,o=.1){if(s=s*2+1,o=Math.min(e/2,t/2,i/2,o),super(1,1,1,s,s,s),s===1)return;const l=this.toNonIndexed();this.index=null,this.attributes.position=l.attributes.position,this.attributes.normal=l.attributes.normal,this.attributes.uv=l.attributes.uv;const u=new Te,h=new Te,p=new Te(e,t,i).divideScalar(2).subScalar(o),m=this.attributes.position.array,_=this.attributes.normal.array,v=this.attributes.uv.array,E=m.length/6,w=new Te,x=.5/s;for(let A=0,O=0;A<m.length;A+=3,O+=2)switch(u.fromArray(m,A),h.copy(u),h.x-=Math.sign(h.x)*x,h.y-=Math.sign(h.y)*x,h.z-=Math.sign(h.z)*x,h.normalize(),m[A+0]=p.x*Math.sign(u.x)+h.x*o,m[A+1]=p.y*Math.sign(u.y)+h.y*o,m[A+2]=p.z*Math.sign(u.z)+h.z*o,_[A+0]=h.x,_[A+1]=h.y,_[A+2]=h.z,Math.floor(A/E)){case 0:w.set(1,0,0),v[O+0]=Zf(w,h,"z","y",o,i),v[O+1]=1-Zf(w,h,"y","z",o,t);break;case 1:w.set(-1,0,0),v[O+0]=1-Zf(w,h,"z","y",o,i),v[O+1]=1-Zf(w,h,"y","z",o,t);break;case 2:w.set(0,1,0),v[O+0]=1-Zf(w,h,"x","z",o,e),v[O+1]=Zf(w,h,"z","x",o,i);break;case 3:w.set(0,-1,0),v[O+0]=1-Zf(w,h,"x","z",o,e),v[O+1]=1-Zf(w,h,"z","x",o,i);break;case 4:w.set(0,0,1),v[O+0]=1-Zf(w,h,"x","y",o,e),v[O+1]=1-Zf(w,h,"y","x",o,t);break;case 5:w.set(0,0,-1),v[O+0]=Zf(w,h,"x","y",o,e),v[O+1]=1-Zf(w,h,"y","x",o,t);break}}}const V4=new hg,YC=new Te;class SP extends lR{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new Pn(e,3)),this.setAttribute("uv",new Pn(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new CA(t,6,1);return this.setAttribute("instanceStart",new ff(i,3,0)),this.setAttribute("instanceEnd",new ff(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new CA(t,6,1);return this.setAttribute("instanceColorStart",new ff(i,3,0)),this.setAttribute("instanceColorEnd",new ff(i,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new oP(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new hg);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),V4.setFromBufferAttribute(t),this.boundingBox.union(V4))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new t_),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let s=0;for(let o=0,l=e.count;o<l;o++)YC.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(YC)),YC.fromBufferAttribute(t,o),s=Math.max(s,i.distanceToSquared(YC));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class r7 extends SP{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let s=0;s<t;s+=3)i[2*s]=e[s],i[2*s+1]=e[s+1],i[2*s+2]=e[s+2],i[2*s+3]=e[s+3],i[2*s+4]=e[s+4],i[2*s+5]=e[s+5];return super.setPositions(i),this}setColors(e){const t=e.length-3,i=new Float32Array(2*t);for(let s=0;s<t;s+=3)i[2*s]=e[s],i[2*s+1]=e[s+1],i[2*s+2]=e[s+2],i[2*s+3]=e[s+3],i[2*s+4]=e[s+4],i[2*s+5]=e[s+5];return super.setColors(i),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}Sn.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ot(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};Xd.line={uniforms:Ew.merge([Sn.common,Sn.fog,Sn.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class wP extends ah{constructor(e){super({type:"LineMaterial",uniforms:Ew.clone(Xd.line.uniforms),vertexShader:Xd.line.vertexShader,fragmentShader:Xd.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const j4=new Te,X4=new Te,Rh=new xi,kh=new xi,kg=new xi,tL=new Te,nL=new Sr,_d=new yP,Y4=new Te,KC=new hg,JC=new t_,Og=new xi;let zg,k2,i7,Vy;function K4(r,e,t){return Og.set(0,0,-e,1).applyMatrix4(r.projectionMatrix),Og.multiplyScalar(1/Og.w),Og.x=Vy/t.width,Og.y=Vy/t.height,Og.applyMatrix4(r.projectionMatrixInverse),Og.multiplyScalar(1/Og.w),Math.abs(Math.max(Og.x,Og.y))}function Eve(r,e){for(let t=0,i=k2.count;t<i;t++){_d.start.fromBufferAttribute(k2,t),_d.end.fromBufferAttribute(i7,t);const s=new Te,o=new Te;zg.distanceSqToSegment(_d.start,_d.end,o,s),o.distanceTo(s)<Vy*.5&&e.push({point:o,pointOnLine:s,distance:zg.origin.distanceTo(o),object:r,face:null,faceIndex:t,uv:null,uv2:null})}}function $ve(r,e,t){const i=e.projectionMatrix,s=r.material.resolution,o=r.matrixWorld,l=r.geometry,u=l.attributes.instanceStart,h=l.attributes.instanceEnd,p=-e.near;zg.at(1,kg),kg.w=1,kg.applyMatrix4(e.matrixWorldInverse),kg.applyMatrix4(i),kg.multiplyScalar(1/kg.w),kg.x*=s.x/2,kg.y*=s.y/2,kg.z=0,tL.copy(kg),nL.multiplyMatrices(e.matrixWorldInverse,o);for(let m=0,_=u.count;m<_;m++){if(Rh.fromBufferAttribute(u,m),kh.fromBufferAttribute(h,m),Rh.w=1,kh.w=1,Rh.applyMatrix4(nL),kh.applyMatrix4(nL),Rh.z>p&&kh.z>p)continue;if(Rh.z>p){const A=Rh.z-kh.z,O=(Rh.z-p)/A;Rh.lerp(kh,O)}else if(kh.z>p){const A=kh.z-Rh.z,O=(kh.z-p)/A;kh.lerp(Rh,O)}Rh.applyMatrix4(i),kh.applyMatrix4(i),Rh.multiplyScalar(1/Rh.w),kh.multiplyScalar(1/kh.w),Rh.x*=s.x/2,Rh.y*=s.y/2,kh.x*=s.x/2,kh.y*=s.y/2,_d.start.copy(Rh),_d.start.z=0,_d.end.copy(kh),_d.end.z=0;const v=_d.closestPointToPointParameter(tL,!0);_d.at(v,Y4);const E=O9.lerp(Rh.z,kh.z,v),w=E>=-1&&E<=1,x=tL.distanceTo(Y4)<Vy*.5;if(w&&x){_d.start.fromBufferAttribute(u,m),_d.end.fromBufferAttribute(h,m),_d.start.applyMatrix4(o),_d.end.applyMatrix4(o);const A=new Te,O=new Te;zg.distanceSqToSegment(_d.start,_d.end,O,A),t.push({point:O,pointOnLine:A,distance:zg.origin.distanceTo(O),object:r,face:null,faceIndex:m,uv:null,uv2:null})}}}class s7 extends bn{constructor(e=new SP,t=new wP({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,s=new Float32Array(2*t.count);for(let l=0,u=0,h=t.count;l<h;l++,u+=2)j4.fromBufferAttribute(t,l),X4.fromBufferAttribute(i,l),s[u]=u===0?0:s[u-1],s[u+1]=s[u]+j4.distanceTo(X4);const o=new CA(s,2,1);return e.setAttribute("instanceDistanceStart",new ff(o,1,0)),e.setAttribute("instanceDistanceEnd",new ff(o,1,1)),this}raycast(e,t){const i=this.material.worldUnits,s=e.camera;s===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const o=e.params.Line2!==void 0&&e.params.Line2.threshold||0;zg=e.ray;const l=this.matrixWorld,u=this.geometry,h=this.material;Vy=h.linewidth+o,k2=u.attributes.instanceStart,i7=u.attributes.instanceEnd,u.boundingSphere===null&&u.computeBoundingSphere(),JC.copy(u.boundingSphere).applyMatrix4(l);let p;if(i)p=Vy*.5;else{const _=Math.max(s.near,JC.distanceToPoint(zg.origin));p=K4(s,_,h.resolution)}if(JC.radius+=p,zg.intersectsSphere(JC)===!1)return;u.boundingBox===null&&u.computeBoundingBox(),KC.copy(u.boundingBox).applyMatrix4(l);let m;if(i)m=Vy*.5;else{const _=Math.max(s.near,KC.distanceToPoint(zg.origin));m=K4(s,_,h.resolution)}KC.expandByScalar(m),zg.intersectsBox(KC)!==!1&&(i?Eve(this,t):$ve(this,s,t))}}class Sve extends s7{constructor(e=new r7,t=new wP({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const wve=de.forwardRef(function({follow:r=!0,lockX:e=!1,lockY:t=!1,lockZ:i=!1,...s},o){const l=de.useRef();return Af(({camera:u})=>{if(!r||!l.current)return;const h=l.current.rotation.clone();u.getWorldQuaternion(l.current.quaternion),e&&(l.current.rotation.x=h.x),t&&(l.current.rotation.y=h.y),i&&(l.current.rotation.z=h.z)}),Xt("group",{ref:$P([l,o]),...s})}),xve=de.forwardRef(function({points:r,color:e="black",vertexColors:t,linewidth:i,lineWidth:s,segments:o,dashed:l,...u},h){const p=Nh(E=>E.size),m=de.useMemo(()=>o?new s7:new Sve,[o]),[_]=de.useState(()=>new wP),v=de.useMemo(()=>{const E=o?new SP:new r7,w=r.map(x=>{const A=Array.isArray(x);return x instanceof Te?[x.x,x.y,x.z]:x instanceof Ot?[x.x,x.y,0]:A&&x.length===3?[x[0],x[1],x[2]]:A&&x.length===2?[x[0],x[1],0]:x});if(E.setPositions(w.flat()),t){const x=t.map(A=>A instanceof _n?A.toArray():A);E.setColors(x.flat())}return E},[r,o,t]);return de.useLayoutEffect(()=>{m.computeLineDistances()},[r,m]),de.useLayoutEffect(()=>{l?_.defines.USE_DASH="":delete _.defines.USE_DASH,_.needsUpdate=!0},[l,_]),de.useEffect(()=>()=>v.dispose(),[v]),uc("primitive",{object:m,ref:h,...u,children:[Xt("primitive",{object:v,attach:"geometry"}),Xt("primitive",{object:_,attach:"material",color:e,vertexColors:!!t,resolution:[p.width,p.height],linewidth:i??s,dashed:l,...u})]})});function Cve(){var r=Object.create(null);function e(s,o){var l=s.id,u=s.name,h=s.dependencies;h===void 0&&(h=[]);var p=s.init;p===void 0&&(p=function(){});var m=s.getTransferables;if(m===void 0&&(m=null),!r[l])try{h=h.map(function(v){return v&&v.isWorkerModule&&(e(v,function(E){if(E instanceof Error)throw E}),v=r[v.id].value),v}),p=i("<"+u+">.init",p),m&&(m=i("<"+u+">.getTransferables",m));var _=null;typeof p=="function"?_=p.apply(void 0,h):console.error("worker module init function failed to rehydrate"),r[l]={id:l,value:_,getTransferables:m},o(_)}catch(v){v&&v.noLog||console.error(v),o(v)}}function t(s,o){var l,u=s.id,h=s.args;(!r[u]||typeof r[u].value!="function")&&o(new Error("Worker module "+u+": not found or its 'init' did not return a function"));try{var p=(l=r[u]).value.apply(l,h);p&&typeof p.then=="function"?p.then(m,function(_){return o(_ instanceof Error?_:new Error(""+_))}):m(p)}catch(_){o(_)}function m(_){try{var v=r[u].getTransferables&&r[u].getTransferables(_);(!v||!Array.isArray(v)||!v.length)&&(v=void 0),o(_,v)}catch(E){console.error(E),o(E)}}}function i(s,o){var l=void 0;self.troikaDefine=function(h){return l=h};var u=URL.createObjectURL(new Blob(["/** "+s.replace(/\*/g,"")+` **/

troikaDefine(
`+o+`
)`],{type:"application/javascript"}));try{importScripts(u)}catch(h){console.error(h)}return URL.revokeObjectURL(u),delete self.troikaDefine,l}self.addEventListener("message",function(s){var o=s.data,l=o.messageId,u=o.action,h=o.data;try{u==="registerModule"&&e(h,function(p){p instanceof Error?postMessage({messageId:l,success:!1,error:p.message}):postMessage({messageId:l,success:!0,result:{isCallable:typeof p=="function"}})}),u==="callModule"&&t(h,function(p,m){p instanceof Error?postMessage({messageId:l,success:!1,error:p.message}):postMessage({messageId:l,success:!0,result:p},m||void 0)})}catch(p){postMessage({messageId:l,success:!1,error:p.stack})}})}function Mve(r){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(s){if(typeof s=="function")return s.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=r.dependencies,i=r.init;t=Array.isArray(t)?t.map(function(o){return o&&o._getInitResult?o._getInitResult():o}):[];var s=Promise.all(t).then(function(o){return i.apply(null,o)});return e._getInitResult=function(){return s},s},e}var o7=function(){var r=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),r=!0}catch(t){typeof process<"u"&&!1||console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return o7=function(){return r},r},Ave=0,Ive=0,rL=!1,oS=Object.create(null),aS=Object.create(null),O2=Object.create(null);function Aw(r){if((!r||typeof r.init!="function")&&!rL)throw new Error("requires `options.init` function");var e=r.dependencies,t=r.init,i=r.getTransferables,s=r.workerId;if(!o7())return Mve(r);s==null&&(s="#default");var o="workerModule"+ ++Ave,l=r.name||o,u=null;e=e&&e.map(function(p){return typeof p=="function"&&!p.workerModuleData&&(rL=!0,p=Aw({workerId:s,name:"<"+l+"> function dependency: "+p.name,init:`function(){return (
`+OM(p)+`
)}`}),rL=!1),p&&p.workerModuleData&&(p=p.workerModuleData),p});function h(){for(var p=[],m=arguments.length;m--;)p[m]=arguments[m];if(!u){u=J4(s,"registerModule",h.workerModuleData);var _=function(){u=null,aS[s].delete(_)};(aS[s]||(aS[s]=new Set)).add(_)}return u.then(function(v){var E=v.isCallable;if(E)return J4(s,"callModule",{id:o,args:p});throw new Error("Worker module function was called but `init` did not return a callable function")})}return h.workerModuleData={isWorkerModule:!0,id:o,name:l,dependencies:e,init:OM(t),getTransferables:i&&OM(i)},h}function Rve(r){aS[r]&&aS[r].forEach(function(e){e()}),oS[r]&&(oS[r].terminate(),delete oS[r])}function OM(r){var e=r.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function kve(r){var e=oS[r];if(!e){var t=OM(Cve);e=oS[r]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+r.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var s=i.data,o=s.messageId,l=O2[o];if(!l)throw new Error("WorkerModule response with empty or unknown messageId");delete O2[o],l(s)}}return e}function J4(r,e,t){return new Promise(function(i,s){var o=++Ive;O2[o]=function(l){l.success?i(l.result):s(new Error("Error in worker "+e+" call: "+l.error))},kve(r).postMessage({messageId:o,action:e,data:t})})}function a7(){var r=function(e){function t(te,q,le,_e,Le,xe,Ve,Re){var Ze=1-Ve;Re.x=Ze*Ze*te+2*Ze*Ve*le+Ve*Ve*Le,Re.y=Ze*Ze*q+2*Ze*Ve*_e+Ve*Ve*xe}function i(te,q,le,_e,Le,xe,Ve,Re,Ze,et){var ct=1-Ze;et.x=ct*ct*ct*te+3*ct*ct*Ze*le+3*ct*Ze*Ze*Le+Ze*Ze*Ze*Ve,et.y=ct*ct*ct*q+3*ct*ct*Ze*_e+3*ct*Ze*Ze*xe+Ze*Ze*Ze*Re}function s(te,q){for(var le=/([MLQCZ])([^MLQCZ]*)/g,_e,Le,xe,Ve,Re;_e=le.exec(te);){var Ze=_e[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(et){return parseFloat(et)});switch(_e[1]){case"M":Ve=Le=Ze[0],Re=xe=Ze[1];break;case"L":(Ze[0]!==Ve||Ze[1]!==Re)&&q("L",Ve,Re,Ve=Ze[0],Re=Ze[1]);break;case"Q":{q("Q",Ve,Re,Ve=Ze[2],Re=Ze[3],Ze[0],Ze[1]);break}case"C":{q("C",Ve,Re,Ve=Ze[4],Re=Ze[5],Ze[0],Ze[1],Ze[2],Ze[3]);break}case"Z":(Ve!==Le||Re!==xe)&&q("L",Ve,Re,Le,xe);break}}}function o(te,q,le){le===void 0&&(le=16);var _e={x:0,y:0};s(te,function(Le,xe,Ve,Re,Ze,et,ct,rt,Ne){switch(Le){case"L":q(xe,Ve,Re,Ze);break;case"Q":{for(var we=xe,ze=Ve,it=1;it<le;it++)t(xe,Ve,et,ct,Re,Ze,it/(le-1),_e),q(we,ze,_e.x,_e.y),we=_e.x,ze=_e.y;break}case"C":{for(var nt=xe,Mt=Ve,At=1;At<le;At++)i(xe,Ve,et,ct,rt,Ne,Re,Ze,At/(le-1),_e),q(nt,Mt,_e.x,_e.y),nt=_e.x,Mt=_e.y;break}}})}var l="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",u="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",h=new WeakMap,p={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function m(te,q){var le=te.getContext?te.getContext("webgl",p):te,_e=h.get(le);if(!_e){let ct=function(nt){var Mt=xe[nt];if(!Mt&&(Mt=xe[nt]=le.getExtension(nt),!Mt))throw new Error(nt+" not supported");return Mt},rt=function(nt,Mt){var At=le.createShader(Mt);return le.shaderSource(At,nt),le.compileShader(At),At},Ne=function(nt,Mt,At,ht){if(!Ve[nt]){var Et={},wt={},pt=le.createProgram();le.attachShader(pt,rt(Mt,le.VERTEX_SHADER)),le.attachShader(pt,rt(At,le.FRAGMENT_SHADER)),le.linkProgram(pt),Ve[nt]={program:pt,transaction:function(be){le.useProgram(pt),be({setUniform:function(Z,ke){for(var lt=[],mt=arguments.length-2;mt-- >0;)lt[mt]=arguments[mt+2];var xt=wt[ke]||(wt[ke]=le.getUniformLocation(pt,ke));le["uniform"+Z].apply(le,[xt].concat(lt))},setAttribute:function(Z,ke,lt,mt,xt){var ut=Et[Z];ut||(ut=Et[Z]={buf:le.createBuffer(),loc:le.getAttribLocation(pt,Z),data:null}),le.bindBuffer(le.ARRAY_BUFFER,ut.buf),le.vertexAttribPointer(ut.loc,ke,le.FLOAT,!1,0,0),le.enableVertexAttribArray(ut.loc),Le?le.vertexAttribDivisor(ut.loc,mt):ct("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ut.loc,mt),xt!==ut.data&&(le.bufferData(le.ARRAY_BUFFER,xt,lt),ut.data=xt)}})}}}Ve[nt].transaction(ht)},we=function(nt,Mt){Ze++;try{le.activeTexture(le.TEXTURE0+Ze);var At=Re[nt];At||(At=Re[nt]=le.createTexture(),le.bindTexture(le.TEXTURE_2D,At),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,le.NEAREST),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,le.NEAREST)),le.bindTexture(le.TEXTURE_2D,At),Mt(At,Ze)}finally{Ze--}},ze=function(nt,Mt,At){var ht=le.createFramebuffer();et.push(ht),le.bindFramebuffer(le.FRAMEBUFFER,ht),le.activeTexture(le.TEXTURE0+Mt),le.bindTexture(le.TEXTURE_2D,nt),le.framebufferTexture2D(le.FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_2D,nt,0);try{At(ht)}finally{le.deleteFramebuffer(ht),le.bindFramebuffer(le.FRAMEBUFFER,et[--et.length-1]||null)}},it=function(){xe={},Ve={},Re={},Ze=-1,et.length=0};var Le=typeof WebGL2RenderingContext<"u"&&le instanceof WebGL2RenderingContext,xe={},Ve={},Re={},Ze=-1,et=[];le.canvas.addEventListener("webglcontextlost",function(nt){it(),nt.preventDefault()},!1),h.set(le,_e={gl:le,isWebGL2:Le,getExtension:ct,withProgram:Ne,withTexture:we,withTextureFramebuffer:ze,handleContextLoss:it})}q(_e)}function _(te,q,le,_e,Le,xe,Ve,Re){Ve===void 0&&(Ve=15),Re===void 0&&(Re=null),m(te,function(Ze){var et=Ze.gl,ct=Ze.withProgram,rt=Ze.withTexture;rt("copy",function(Ne,we){et.texImage2D(et.TEXTURE_2D,0,et.RGBA,Le,xe,0,et.RGBA,et.UNSIGNED_BYTE,q),ct("copy",l,u,function(ze){var it=ze.setUniform,nt=ze.setAttribute;nt("aUV",2,et.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),it("1i","image",we),et.bindFramebuffer(et.FRAMEBUFFER,Re||null),et.disable(et.BLEND),et.colorMask(Ve&8,Ve&4,Ve&2,Ve&1),et.viewport(le,_e,Le,xe),et.scissor(le,_e,Le,xe),et.drawArrays(et.TRIANGLES,0,3)})})})}function v(te,q,le){var _e=te.width,Le=te.height;m(te,function(xe){var Ve=xe.gl,Re=new Uint8Array(_e*Le*4);Ve.readPixels(0,0,_e,Le,Ve.RGBA,Ve.UNSIGNED_BYTE,Re),te.width=q,te.height=le,_(Ve,Re,0,0,_e,Le)})}var E=Object.freeze({__proto__:null,withWebGLContext:m,renderImageData:_,resizeWebGLCanvasWithoutClearing:v});function w(te,q,le,_e,Le,xe){xe===void 0&&(xe=1);var Ve=new Uint8Array(te*q),Re=_e[2]-_e[0],Ze=_e[3]-_e[1],et=[];o(le,function(nt,Mt,At,ht){et.push({x1:nt,y1:Mt,x2:At,y2:ht,minX:Math.min(nt,At),minY:Math.min(Mt,ht),maxX:Math.max(nt,At),maxY:Math.max(Mt,ht)})}),et.sort(function(nt,Mt){return nt.maxX-Mt.maxX});for(var ct=0;ct<te;ct++)for(var rt=0;rt<q;rt++){var Ne=ze(_e[0]+Re*(ct+.5)/te,_e[1]+Ze*(rt+.5)/q),we=Math.pow(1-Math.abs(Ne)/Le,xe)/2;Ne<0&&(we=1-we),we=Math.max(0,Math.min(255,Math.round(we*255))),Ve[rt*te+ct]=we}return Ve;function ze(nt,Mt){for(var At=1/0,ht=1/0,Et=et.length;Et--;){var wt=et[Et];if(wt.maxX+ht<=nt)break;if(nt+ht>wt.minX&&Mt-ht<wt.maxY&&Mt+ht>wt.minY){var pt=O(nt,Mt,wt.x1,wt.y1,wt.x2,wt.y2);pt<At&&(At=pt,ht=Math.sqrt(At))}}return it(nt,Mt)&&(ht=-ht),ht}function it(nt,Mt){for(var At=0,ht=et.length;ht--;){var Et=et[ht];if(Et.maxX<=nt)break;var wt=Et.y1>Mt!=Et.y2>Mt&&nt<(Et.x2-Et.x1)*(Mt-Et.y1)/(Et.y2-Et.y1)+Et.x1;wt&&(At+=Et.y1<Et.y2?1:-1)}return At!==0}}function x(te,q,le,_e,Le,xe,Ve,Re,Ze,et){xe===void 0&&(xe=1),Re===void 0&&(Re=0),Ze===void 0&&(Ze=0),et===void 0&&(et=0),A(te,q,le,_e,Le,xe,Ve,null,Re,Ze,et)}function A(te,q,le,_e,Le,xe,Ve,Re,Ze,et,ct){xe===void 0&&(xe=1),Ze===void 0&&(Ze=0),et===void 0&&(et=0),ct===void 0&&(ct=0);for(var rt=w(te,q,le,_e,Le,xe),Ne=new Uint8Array(rt.length*4),we=0;we<rt.length;we++)Ne[we*4+ct]=rt[we];_(Ve,Ne,Ze,et,te,q,1<<3-ct,Re)}function O(te,q,le,_e,Le,xe){var Ve=Le-le,Re=xe-_e,Ze=Ve*Ve+Re*Re,et=Ze?Math.max(0,Math.min(1,((te-le)*Ve+(q-_e)*Re)/Ze)):0,ct=te-(le+et*Ve),rt=q-(_e+et*Re);return ct*ct+rt*rt}var k=Object.freeze({__proto__:null,generate:w,generateIntoCanvas:x,generateIntoFramebuffer:A}),D="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",N="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",F="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",z=new Float32Array([0,0,2,0,0,2]),V=null,U=!1,ee={},ne=new WeakMap;function ie(te){if(!U&&!he(te))throw new Error("WebGL generation not supported")}function se(te,q,le,_e,Le,xe,Ve){if(xe===void 0&&(xe=1),Ve===void 0&&(Ve=null),!Ve&&(Ve=V,!Ve)){var Re=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!Re)throw new Error("OffscreenCanvas or DOM canvas not supported");Ve=V=Re.getContext("webgl",{depth:!1})}ie(Ve);var Ze=new Uint8Array(te*q*4);m(Ve,function(Ne){var we=Ne.gl,ze=Ne.withTexture,it=Ne.withTextureFramebuffer;ze("readable",function(nt,Mt){we.texImage2D(we.TEXTURE_2D,0,we.RGBA,te,q,0,we.RGBA,we.UNSIGNED_BYTE,null),it(nt,Mt,function(At){ae(te,q,le,_e,Le,xe,we,At,0,0,0),we.readPixels(0,0,te,q,we.RGBA,we.UNSIGNED_BYTE,Ze)})})});for(var et=new Uint8Array(te*q),ct=0,rt=0;ct<Ze.length;ct+=4)et[rt++]=Ze[ct];return et}function fe(te,q,le,_e,Le,xe,Ve,Re,Ze,et){xe===void 0&&(xe=1),Re===void 0&&(Re=0),Ze===void 0&&(Ze=0),et===void 0&&(et=0),ae(te,q,le,_e,Le,xe,Ve,null,Re,Ze,et)}function ae(te,q,le,_e,Le,xe,Ve,Re,Ze,et,ct){xe===void 0&&(xe=1),Ze===void 0&&(Ze=0),et===void 0&&(et=0),ct===void 0&&(ct=0),ie(Ve);var rt=[];o(le,function(Ne,we,ze,it){rt.push(Ne,we,ze,it)}),rt=new Float32Array(rt),m(Ve,function(Ne){var we=Ne.gl,ze=Ne.isWebGL2,it=Ne.getExtension,nt=Ne.withProgram,Mt=Ne.withTexture,At=Ne.withTextureFramebuffer,ht=Ne.handleContextLoss;if(Mt("rawDistances",function(Et,wt){(te!==Et._lastWidth||q!==Et._lastHeight)&&we.texImage2D(we.TEXTURE_2D,0,we.RGBA,Et._lastWidth=te,Et._lastHeight=q,0,we.RGBA,we.UNSIGNED_BYTE,null),nt("main",D,N,function(pt){var be=pt.setAttribute,Z=pt.setUniform,ke=!ze&&it("ANGLE_instanced_arrays"),lt=!ze&&it("EXT_blend_minmax");be("aUV",2,we.STATIC_DRAW,0,z),be("aLineSegment",4,we.DYNAMIC_DRAW,1,rt),Z.apply(void 0,["4f","uGlyphBounds"].concat(_e)),Z("1f","uMaxDistance",Le),Z("1f","uExponent",xe),At(Et,wt,function(mt){we.enable(we.BLEND),we.colorMask(!0,!0,!0,!0),we.viewport(0,0,te,q),we.scissor(0,0,te,q),we.blendFunc(we.ONE,we.ONE),we.blendEquationSeparate(we.FUNC_ADD,ze?we.MAX:lt.MAX_EXT),we.clear(we.COLOR_BUFFER_BIT),ze?we.drawArraysInstanced(we.TRIANGLES,0,3,rt.length/4):ke.drawArraysInstancedANGLE(we.TRIANGLES,0,3,rt.length/4)})}),nt("post",l,F,function(pt){pt.setAttribute("aUV",2,we.STATIC_DRAW,0,z),pt.setUniform("1i","tex",wt),we.bindFramebuffer(we.FRAMEBUFFER,Re),we.disable(we.BLEND),we.colorMask(ct===0,ct===1,ct===2,ct===3),we.viewport(Ze,et,te,q),we.scissor(Ze,et,te,q),we.drawArrays(we.TRIANGLES,0,3)})}),we.isContextLost())throw ht(),new Error("webgl context lost")})}function he(te){var q=!te||te===V?ee:te.canvas||te,le=ne.get(q);if(le===void 0){U=!0;var _e=null;try{var Le=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],xe=se(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,te);le=xe&&Le.length===xe.length&&xe.every(function(Ve,Re){return Ve===Le[Re]}),le||(_e="bad trial run results",console.info(Le,xe))}catch(Ve){le=!1,_e=Ve.message}_e&&console.warn("WebGL SDF generation not supported:",_e),U=!1,ne.set(q,le)}return le}var ge=Object.freeze({__proto__:null,generate:se,generateIntoCanvas:fe,generateIntoFramebuffer:ae,isSupported:he});function Ie(te,q,le,_e,Le,xe){Le===void 0&&(Le=Math.max(_e[2]-_e[0],_e[3]-_e[1])/2),xe===void 0&&(xe=1);try{return se.apply(ge,arguments)}catch(Ve){return console.info("WebGL SDF generation failed, falling back to JS",Ve),w.apply(k,arguments)}}function j(te,q,le,_e,Le,xe,Ve,Re,Ze,et){Le===void 0&&(Le=Math.max(_e[2]-_e[0],_e[3]-_e[1])/2),xe===void 0&&(xe=1),Re===void 0&&(Re=0),Ze===void 0&&(Ze=0),et===void 0&&(et=0);try{return fe.apply(ge,arguments)}catch(ct){return console.info("WebGL SDF generation failed, falling back to JS",ct),x.apply(k,arguments)}}return e.forEachPathCommand=s,e.generate=Ie,e.generateIntoCanvas=j,e.javascript=k,e.pathToLineSegments=o,e.webgl=ge,e.webglUtils=E,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return r}function Ove(){var r=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},s={};i.L=1,s[1]="L",Object.keys(t).forEach(function(ht,Et){i[ht]=1<<Et+1,s[i[ht]]=ht}),Object.freeze(i);var o=i.LRI|i.RLI|i.FSI,l=i.L|i.R|i.AL,u=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,h=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,p=i.S|i.WS|i.B|o|i.PDI|h,m=null;function _(){if(!m){m=new Map;var ht=function(wt){if(t.hasOwnProperty(wt)){var pt=0;t[wt].split(",").forEach(function(be){var Z=be.split("+"),ke=Z[0],lt=Z[1];ke=parseInt(ke,36),lt=lt?parseInt(lt,36):0,m.set(pt+=ke,i[wt]);for(var mt=0;mt<lt;mt++)m.set(++pt,i[wt])})}};for(var Et in t)ht(Et)}}function v(ht){return _(),m.get(ht.codePointAt(0))||i.L}function E(ht){return s[v(ht)]}var w={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function x(ht,Et){var wt=36,pt=0,be=new Map,Z=Et&&new Map,ke;return ht.split(",").forEach(function lt(mt){if(mt.indexOf("+")!==-1)for(var xt=+mt;xt--;)lt(ke);else{ke=mt;var ut=mt.split(">"),He=ut[0],Ce=ut[1];He=String.fromCodePoint(pt+=parseInt(He,wt)),Ce=String.fromCodePoint(pt+=parseInt(Ce,wt)),be.set(He,Ce),Et&&Z.set(Ce,He)}}),{map:be,reverseMap:Z}}var A,O,k;function D(){if(!A){var ht=x(w.pairs,!0),Et=ht.map,wt=ht.reverseMap;A=Et,O=wt,k=x(w.canonical,!1).map}}function N(ht){return D(),A.get(ht)||null}function F(ht){return D(),O.get(ht)||null}function z(ht){return D(),k.get(ht)||null}var V=i.L,U=i.R,ee=i.EN,ne=i.ES,ie=i.ET,se=i.AN,fe=i.CS,ae=i.B,he=i.S,ge=i.ON,Ie=i.BN,j=i.NSM,te=i.AL,q=i.LRO,le=i.RLO,_e=i.LRE,Le=i.RLE,xe=i.PDF,Ve=i.LRI,Re=i.RLI,Ze=i.FSI,et=i.PDI;function ct(ht,Et){for(var wt=125,pt=new Uint32Array(ht.length),be=0;be<ht.length;be++)pt[be]=v(ht[be]);var Z=new Map;function ke(ci,Zr){var Un=pt[ci];pt[ci]=Zr,Z.set(Un,Z.get(Un)-1),Un&u&&Z.set(u,Z.get(u)-1),Z.set(Zr,(Z.get(Zr)||0)+1),Zr&u&&Z.set(u,(Z.get(u)||0)+1)}for(var lt=new Uint8Array(ht.length),mt=new Map,xt=[],ut=null,He=0;He<ht.length;He++)ut||xt.push(ut={start:He,end:ht.length-1,level:Et==="rtl"?1:Et==="ltr"?0:qs(He,!1)}),pt[He]&ae&&(ut.end=He,ut=null);for(var Ce=Le|_e|le|q|o|et|xe|ae,X=function(ci){return ci+(ci&1?1:2)},J=function(ci){return ci+(ci&1?2:1)},oe=0;oe<xt.length;oe++){ut=xt[oe];var $e=[{_level:ut.level,_override:0,_isolate:0}],Ge=void 0,Bt=0,Pe=0,Wt=0;Z.clear();for(var st=ut.start;st<=ut.end;st++){var Ut=pt[st];if(Ge=$e[$e.length-1],Z.set(Ut,(Z.get(Ut)||0)+1),Ut&u&&Z.set(u,(Z.get(u)||0)+1),Ut&Ce)if(Ut&(Le|_e)){lt[st]=Ge._level;var Pt=(Ut===Le?J:X)(Ge._level);Pt<=wt&&!Bt&&!Pe?$e.push({_level:Pt,_override:0,_isolate:0}):Bt||Pe++}else if(Ut&(le|q)){lt[st]=Ge._level;var Tn=(Ut===le?J:X)(Ge._level);Tn<=wt&&!Bt&&!Pe?$e.push({_level:Tn,_override:Ut&le?U:V,_isolate:0}):Bt||Pe++}else if(Ut&o){Ut&Ze&&(Ut=qs(st+1,!0)===1?Re:Ve),lt[st]=Ge._level,Ge._override&&ke(st,Ge._override);var Mr=(Ut===Re?J:X)(Ge._level);Mr<=wt&&Bt===0&&Pe===0?(Wt++,$e.push({_level:Mr,_override:0,_isolate:1,_isolInitIndex:st})):Bt++}else if(Ut&et){if(Bt>0)Bt--;else if(Wt>0){for(Pe=0;!$e[$e.length-1]._isolate;)$e.pop();var nr=$e[$e.length-1]._isolInitIndex;nr!=null&&(mt.set(nr,st),mt.set(st,nr)),$e.pop(),Wt--}Ge=$e[$e.length-1],lt[st]=Ge._level,Ge._override&&ke(st,Ge._override)}else Ut&xe?(Bt===0&&(Pe>0?Pe--:!Ge._isolate&&$e.length>1&&($e.pop(),Ge=$e[$e.length-1])),lt[st]=Ge._level):Ut&ae&&(lt[st]=ut.level);else lt[st]=Ge._level,Ge._override&&Ut!==Ie&&ke(st,Ge._override)}for(var ai=[],ar=null,Qn=ut.start;Qn<=ut.end;Qn++){var Q=pt[Qn];if(!(Q&h)){var me=lt[Qn],De=Q&o,qe=Q===et;ar&&me===ar._level?(ar._end=Qn,ar._endsWithIsolInit=De):ai.push(ar={_start:Qn,_end:Qn,_level:me,_startsWithPDI:qe,_endsWithIsolInit:De})}}for(var It=[],qt=0;qt<ai.length;qt++){var gn=ai[qt];if(!gn._startsWithPDI||gn._startsWithPDI&&!mt.has(gn._start)){for(var Ae=[ar=gn],at=void 0;ar&&ar._endsWithIsolInit&&(at=mt.get(ar._end))!=null;)for(var bt=qt+1;bt<ai.length;bt++)if(ai[bt]._start===at){Ae.push(ar=ai[bt]);break}for(var dt=[],Dt=0;Dt<Ae.length;Dt++)for(var xn=Ae[Dt],Bn=xn._start;Bn<=xn._end;Bn++)dt.push(Bn);for(var er=lt[dt[0]],mr=ut.level,Qr=dt[0]-1;Qr>=0;Qr--)if(!(pt[Qr]&h)){mr=lt[Qr];break}var yr=dt[dt.length-1],wr=lt[yr],Gi=ut.level;if(!(pt[yr]&o)){for(var Fo=yr+1;Fo<=ut.end;Fo++)if(!(pt[Fo]&h)){Gi=lt[Fo];break}}It.push({_seqIndices:dt,_sosType:Math.max(mr,er)%2?U:V,_eosType:Math.max(Gi,wr)%2?U:V})}}for(var wo=0;wo<It.length;wo++){var nl=It[wo],Yt=nl._seqIndices,lr=nl._sosType,oa=nl._eosType;if(Z.get(j))for(var Uo=0;Uo<Yt.length;Uo++){var hs=Yt[Uo];if(pt[hs]&j){for(var ds=lr,li=Uo-1;li>=0;li--)if(!(pt[Yt[li]]&h)){ds=pt[Yt[li]];break}ke(hs,ds&(o|et)?ge:ds)}}if(Z.get(ee))for(var ur=0;ur<Yt.length;ur++){var pn=Yt[ur];if(pt[pn]&ee)for(var ir=ur-1;ir>=-1;ir--){var Tr=ir===-1?lr:pt[Yt[ir]];if(Tr&l){Tr===te&&ke(pn,se);break}}}if(Z.get(te))for(var qn=0;qn<Yt.length;qn++){var ui=Yt[qn];pt[ui]&te&&ke(ui,U)}if(Z.get(ne)||Z.get(fe))for(var Ji=1;Ji<Yt.length-1;Ji++){var Gr=Yt[Ji];if(pt[Gr]&(ne|fe)){for(var Di=0,Ia=0,rl=Ji-1;rl>=0&&(Di=pt[Yt[rl]],!!(Di&h));rl--);for(var cc=Ji+1;cc<Yt.length&&(Ia=pt[Yt[cc]],!!(Ia&h));cc++);Di===Ia&&(pt[Gr]===ne?Di===ee:Di&(ee|se))&&ke(Gr,Di)}}if(Z.get(ee))for(var Uu=0;Uu<Yt.length;Uu++){var Cs=Yt[Uu];if(pt[Cs]&ee){for(var xo=Uu-1;xo>=0&&pt[Yt[xo]]&(ie|h);xo--)ke(Yt[xo],ee);for(var su=Uu+1;su<Yt.length&&pt[Yt[su]]&(ie|h);su++)ke(Yt[su],ee)}}if(Z.get(ie)||Z.get(ne)||Z.get(fe))for(var Ll=0;Ll<Yt.length;Ll++){var uh=Yt[Ll];if(pt[uh]&(ie|ne|fe)){ke(uh,ge);for(var zo=Ll-1;zo>=0&&pt[Yt[zo]]&h;zo--)ke(Yt[zo],ge);for(var Zn=Ll+1;Zn<Yt.length&&pt[Yt[Zn]]&h;Zn++)ke(Yt[Zn],ge)}}if(Z.get(ee))for(var Bi=0,Bc=lr;Bi<Yt.length;Bi++){var ch=Yt[Bi],hc=pt[ch];hc&ee?Bc===V&&ke(ch,V):hc&l&&(Bc=hc)}if(Z.get(u)){var il=U|ee|se,ou=il|V,sl=[];{for(var ol=[],Yn=0;Yn<Yt.length;Yn++)if(pt[Yt[Yn]]&u){var Kn=ht[Yt[Yn]],al=void 0;if(N(Kn)!==null)if(ol.length<63)ol.push({char:Kn,seqIndex:Yn});else break;else if((al=F(Kn))!==null)for(var Ra=ol.length-1;Ra>=0;Ra--){var aa=ol[Ra].char;if(aa===al||aa===F(z(Kn))||N(z(aa))===Kn){sl.push([ol[Ra].seqIndex,Yn]),ol.length=Ra;break}}}sl.sort(function(ci,Zr){return ci[0]-Zr[0]})}for(var Nl=0;Nl<sl.length;Nl++){for(var bi=sl[Nl],Pi=bi[0],ll=bi[1],wd=!1,Ms=0,au=Pi+1;au<ll;au++){var Co=Yt[au];if(pt[Co]&ou){wd=!0;var Dl=pt[Co]&il?U:V;if(Dl===ka(Co)){Ms=Dl;break}}}if(wd&&!Ms){Ms=lr;for(var Wr=Pi-1;Wr>=0;Wr--){var cr=Yt[Wr];if(pt[cr]&ou){var Wi=pt[cr]&il?U:V;Wi!==ka(cr)?Ms=Wi:Ms=ka(cr);break}}}if(Ms){if(pt[Yt[Pi]]=pt[Yt[ll]]=Ms,Ms!==ka(Yt[Pi])){for(var As=Pi+1;As<Yt.length;As++)if(!(pt[Yt[As]]&h)){v(ht[Yt[As]])&j&&(pt[Yt[As]]=Ms);break}}if(Ms!==ka(Yt[ll])){for(var lu=ll+1;lu<Yt.length;lu++)if(!(pt[Yt[lu]]&h)){v(ht[Yt[lu]])&j&&(pt[Yt[lu]]=Ms);break}}}}for(var Bl=0;Bl<Yt.length;Bl++)if(pt[Yt[Bl]]&u){for(var Pc=Bl,Ho=Bl,Go=lr,uu=Bl-1;uu>=0;uu--)if(pt[Yt[uu]]&h)Pc=uu;else{Go=pt[Yt[uu]]&il?U:V;break}for(var Vr=oa,ps=Bl+1;ps<Yt.length;ps++)if(pt[Yt[ps]]&(u|h))Ho=ps;else{Vr=pt[Yt[ps]]&il?U:V;break}for(var Ci=Pc;Ci<=Ho;Ci++)pt[Yt[Ci]]=Go===Vr?Go:ka(Yt[Ci]);Bl=Ho}}}for(var qr=ut.start;qr<=ut.end;qr++){var la=lt[qr],Fi=pt[qr];if(la&1?Fi&(V|ee|se)&&lt[qr]++:Fi&U?lt[qr]++:Fi&(se|ee)&&(lt[qr]+=2),Fi&h&&(lt[qr]=qr===0?ut.level:lt[qr-1]),qr===ut.end||v(ht[qr])&(he|ae))for(var cu=qr;cu>=0&&v(ht[cu])&p;cu--)lt[cu]=ut.level}}return{levels:lt,paragraphs:xt};function qs(ci,Zr){for(var Un=ci;Un<ht.length;Un++){var jr=pt[Un];if(jr&(U|te))return 1;if(jr&(ae|V)||Zr&&jr===et)return 0;if(jr&o){var Ti=hu(Un);Un=Ti===-1?ht.length:Ti}}return 0}function hu(ci){for(var Zr=1,Un=ci+1;Un<ht.length;Un++){var jr=pt[Un];if(jr&ae)break;if(jr&et){if(--Zr===0)return Un}else jr&o&&Zr++}return-1}function ka(ci){return lt[ci]&1?U:V}}var rt="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Ne;function we(){if(!Ne){var ht=x(rt,!0),Et=ht.map,wt=ht.reverseMap;wt.forEach(function(pt,be){Et.set(be,pt)}),Ne=Et}}function ze(ht){return we(),Ne.get(ht)||null}function it(ht,Et,wt,pt){var be=ht.length;wt=Math.max(0,wt==null?0:+wt),pt=Math.min(be-1,pt==null?be-1:+pt);for(var Z=new Map,ke=wt;ke<=pt;ke++)if(Et[ke]&1){var lt=ze(ht[ke]);lt!==null&&Z.set(ke,lt)}return Z}function nt(ht,Et,wt,pt){var be=ht.length;wt=Math.max(0,wt==null?0:+wt),pt=Math.min(be-1,pt==null?be-1:+pt);var Z=[];return Et.paragraphs.forEach(function(ke){var lt=Math.max(wt,ke.start),mt=Math.min(pt,ke.end);if(lt<mt){for(var xt=Et.levels.slice(lt,mt+1),ut=mt;ut>=lt&&v(ht[ut])&p;ut--)xt[ut]=ke.level;for(var He=ke.level,Ce=1/0,X=0;X<xt.length;X++){var J=xt[X];J>He&&(He=J),J<Ce&&(Ce=J|1)}for(var oe=He;oe>=Ce;oe--)for(var $e=0;$e<xt.length;$e++)if(xt[$e]>=oe){for(var Ge=$e;$e+1<xt.length&&xt[$e+1]>=oe;)$e++;$e>Ge&&Z.push([Ge+wt,$e+wt])}}}),Z}function Mt(ht,Et,wt,pt){var be=At(ht,Et,wt,pt),Z=[].concat(ht);return be.forEach(function(ke,lt){Z[lt]=(Et.levels[ke]&1?ze(ht[ke]):null)||ht[ke]}),Z.join("")}function At(ht,Et,wt,pt){for(var be=nt(ht,Et,wt,pt),Z=[],ke=0;ke<ht.length;ke++)Z[ke]=ke;return be.forEach(function(lt){for(var mt=lt[0],xt=lt[1],ut=Z.slice(mt,xt+1),He=ut.length;He--;)Z[xt-He]=ut[He]}),Z}return e.closingToOpeningBracket=F,e.getBidiCharType=v,e.getBidiCharTypeName=E,e.getCanonicalBracket=z,e.getEmbeddingLevels=ct,e.getMirroredCharacter=ze,e.getMirroredCharactersMap=it,e.getReorderSegments=nt,e.getReorderedIndices=At,e.getReorderedString=Mt,e.openingToClosingBracket=N,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return r}const l7=/\bvoid\s+main\s*\(\s*\)\s*{/g;function L2(r){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,s){let o=vi[s];return o?L2(o):i}return r.replace(e,t)}const Oh=[];for(let r=0;r<256;r++)Oh[r]=(r<16?"0":"")+r.toString(16);function Lve(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Oh[r&255]+Oh[r>>8&255]+Oh[r>>16&255]+Oh[r>>24&255]+"-"+Oh[e&255]+Oh[e>>8&255]+"-"+Oh[e>>16&15|64]+Oh[e>>24&255]+"-"+Oh[t&63|128]+Oh[t>>8&255]+"-"+Oh[t>>16&255]+Oh[t>>24&255]+Oh[i&255]+Oh[i>>8&255]+Oh[i>>16&255]+Oh[i>>24&255]).toUpperCase()}const ay=Object.assign||function(){let r=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let s in i)i.hasOwnProperty(s)&&(r[s]=i[s])}return r},Nve=Date.now(),Q4=new WeakMap,q4=new Map;let Dve=1e10;function N2(r,e){const t=Uve(e);let i=Q4.get(r);if(i||Q4.set(r,i=Object.create(null)),i[t])return new i[t];const s=`_onBeforeCompile${t}`,o=function(p){r.onBeforeCompile.call(this,p);const m=this.customProgramCacheKey()+"|"+p.vertexShader+"|"+p.fragmentShader;let _=q4[m];if(!_){const v=Bve(p,e,t);_=q4[m]=v}p.vertexShader=_.vertexShader,p.fragmentShader=_.fragmentShader,ay(p.uniforms,this.uniforms),e.timeUniform&&(p.uniforms[e.timeUniform]={get value(){return Date.now()-Nve}}),this[s]&&this[s](p)},l=function(){return u(e.chained?r:r.clone())},u=function(p){const m=Object.create(p,h);return Object.defineProperty(m,"baseMaterial",{value:r}),Object.defineProperty(m,"id",{value:Dve++}),m.uuid=Lve(),m.uniforms=ay({},p.uniforms,e.uniforms),m.defines=ay({},p.defines,e.defines),m.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",m.extensions=ay({},p.extensions,e.extensions),m._listeners=void 0,m},h={constructor:{value:l},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return r.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return o},set(p){this[s]=p}},copy:{writable:!0,configurable:!0,value:function(p){return r.copy.call(this,p),!r.isShaderMaterial&&!r.isDerivedMaterial&&(ay(this.extensions,p.extensions),ay(this.defines,p.defines),ay(this.uniforms,Ew.clone(p.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const p=new r.constructor;return u(p).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let p=this._depthMaterial;return p||(p=this._depthMaterial=N2(r.isDerivedMaterial?r.getDepthMaterial():new Sw({depthPacking:w1}),e),p.defines.IS_DEPTH_MATERIAL="",p.uniforms=this.uniforms),p}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let p=this._distanceMaterial;return p||(p=this._distanceMaterial=N2(r.isDerivedMaterial?r.getDistanceMaterial():new QI,e),p.defines.IS_DISTANCE_MATERIAL="",p.uniforms=this.uniforms),p}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:p,_distanceMaterial:m}=this;p&&p.dispose(),m&&m.dispose(),r.dispose.call(this)}}};return i[t]=l,new l}function Bve({vertexShader:r,fragmentShader:e},t,i){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:l,vertexTransform:u,fragmentDefs:h,fragmentMainIntro:p,fragmentMainOutro:m,fragmentColorTransform:_,customRewriter:v,timeUniform:E}=t;if(s=s||"",o=o||"",l=l||"",h=h||"",p=p||"",m=m||"",(u||v)&&(r=L2(r)),(_||v)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=L2(e)),v){let w=v({vertexShader:r,fragmentShader:e});r=w.vertexShader,e=w.fragmentShader}if(_){let w=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,x=>(w.push(x),"")),m=`${_}
${w.join(`
`)}
${m}`}if(E){const w=`
uniform float ${E};
`;s=w+s,h=w+h}return u&&(r=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${r}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${u}
}
`,o=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${o}
`,r=r.replace(/\b(position|normal|uv)\b/g,(w,x,A,O)=>/\battribute\s+vec[23]\s+$/.test(O.substr(0,A))?x:`troika_${x}_${i}`)),r=Z4(r,i,s,o,l),e=Z4(e,i,h,p,m),{vertexShader:r,fragmentShader:e}}function Z4(r,e,t,i,s){return(i||s||t)&&(r=r.replace(l7,`
${t}
void troikaOrigMain${e}() {`),r+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${s}
}`),r}function Pve(r,e){return r==="uniforms"?void 0:typeof e=="function"?e.toString():e}let Fve=0;const eG=new Map;function Uve(r){const e=JSON.stringify(r,Pve);let t=eG.get(e);return t==null&&eG.set(e,t=++Fve),t}function zve(r,e,t){const{defaultFontURL:i}=t,s=Object.create(null),o=1/0,l=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,u="[^\\S\\u00A0]",h=new RegExp(`${u}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function p(k,D){function N(){const F=z=>{console.error(`Failure loading font ${k}${k===i?"":"; trying fallback"}`,z),k!==i&&(k=i,N())};try{const z=new XMLHttpRequest;z.open("get",k,!0),z.responseType="arraybuffer",z.onload=function(){if(z.status>=400)F(new Error(z.statusText));else if(z.status>0)try{const V=r(z.response);D(V)}catch(V){F(V)}},z.onerror=F,z.send()}catch(z){F(z)}}N()}function m(k,D){k||(k=i);let N=s[k];N?N.pending?N.pending.push(D):D(N):(s[k]={pending:[D]},p(k,F=>{let z=s[k].pending;s[k]=F,z.forEach(V=>V(F))}))}function _({text:k="",font:D=i,sdfGlyphSize:N=64,fontSize:F=1,letterSpacing:z=0,lineHeight:V="normal",maxWidth:U=o,direction:ee,textAlign:ne="left",textIndent:ie=0,whiteSpace:se="normal",overflowWrap:fe="normal",anchorX:ae=0,anchorY:he=0,includeCaretPositions:ge=!1,chunkedBoundsSize:Ie=8192,colorRanges:j=null},te,q=!1){const le=x(),_e={fontLoad:0,typesetting:0};k.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),k=k.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),F=+F,z=+z,U=+U,V=V||"normal",ie=+ie,m(D,Le=>{const xe=isFinite(U);let Ve=null,Re=null,Ze=null,et=null,ct=null,rt=null,Ne=null,we=0,ze=0,it=se!=="nowrap";const{ascender:nt,descender:Mt,unitsPerEm:At,lineGap:ht,capHeight:Et,xHeight:wt}=Le;_e.fontLoad=x()-le;const pt=x(),be=F/At;V==="normal"&&(V=(nt-Mt+ht)/At),V=V*F;const Z=(V-(nt-Mt)*be)/2,ke=-(nt*be+Z),lt=Math.min(V,(nt-Mt)*be),mt=(nt+Mt)/2*be-lt/2;let xt=ie,ut=new A;const He=[ut];Le.forEachGlyph(k,F,z,(J,oe,$e)=>{const Ge=k.charAt($e),Bt=J.advanceWidth*be,Pe=ut.count;let Wt;if("isEmpty"in J||(J.isWhitespace=!!Ge&&new RegExp(u).test(Ge),J.canBreakAfter=!!Ge&&h.test(Ge),J.isEmpty=J.xMin===J.xMax||J.yMin===J.yMax||l.test(Ge)),!J.isWhitespace&&!J.isEmpty&&ze++,it&&xe&&!J.isWhitespace&&oe+Bt+xt>U&&Pe){if(ut.glyphAt(Pe-1).glyphObj.canBreakAfter)Wt=new A,xt=-oe;else for(let Ut=Pe;Ut--;)if(Ut===0&&fe==="break-word"){Wt=new A,xt=-oe;break}else if(ut.glyphAt(Ut).glyphObj.canBreakAfter){Wt=ut.splitAt(Ut+1);const Pt=Wt.glyphAt(0).x;xt-=Pt;for(let Tn=Wt.count;Tn--;)Wt.glyphAt(Tn).x-=Pt;break}Wt&&(ut.isSoftWrapped=!0,ut=Wt,He.push(ut),we=U)}let st=ut.glyphAt(ut.count);st.glyphObj=J,st.x=oe+xt,st.width=Bt,st.charIndex=$e,Ge===`
`&&(ut=new A,He.push(ut),xt=-(oe+Bt+z*F)+ie)}),He.forEach(J=>{for(let oe=J.count;oe--;){let{glyphObj:$e,x:Ge,width:Bt}=J.glyphAt(oe);if(!$e.isWhitespace){J.width=Ge+Bt,J.width>we&&(we=J.width);return}}});let Ce=0,X=0;if(ae&&(typeof ae=="number"?Ce=-ae:typeof ae=="string"&&(Ce=-we*(ae==="left"?0:ae==="center"?.5:ae==="right"?1:E(ae)))),he){if(typeof he=="number")X=-he;else if(typeof he=="string"){let J=He.length*V;X=he==="top"?0:he==="top-baseline"?-ke:he==="top-cap"?-ke-Et*be:he==="top-ex"?-ke-wt*be:he==="middle"?J/2:he==="bottom"?J:he==="bottom-baseline"?J-Z+Mt*be:E(he)*J}}if(!q){const J=e.getEmbeddingLevels(k,ee);Ve=new Uint16Array(ze),Re=new Float32Array(ze*2),Ze={},rt=[o,o,-o,-o],Ne=[];let oe=ke;ge&&(ct=new Float32Array(k.length*3)),j&&(et=new Uint8Array(ze*3));let $e=0,Ge=-1,Bt=-1,Pe,Wt;if(He.forEach((st,Ut)=>{let{count:Pt,width:Tn}=st;if(Pt>0){let Mr=0;for(let me=Pt;me--&&st.glyphAt(me).glyphObj.isWhitespace;)Mr++;let nr=0,ai=0;if(ne==="center")nr=(we-Tn)/2;else if(ne==="right")nr=we-Tn;else if(ne==="justify"&&st.isSoftWrapped){let me=0;for(let De=Pt-Mr;De--;)st.glyphAt(De).glyphObj.isWhitespace&&me++;ai=(we-Tn)/me}if(ai||nr){let me=0;for(let De=0;De<Pt;De++){let qe=st.glyphAt(De);const It=qe.glyphObj;qe.x+=nr+me,ai!==0&&It.isWhitespace&&De<Pt-Mr&&(me+=ai,qe.width+=ai)}}const ar=e.getReorderSegments(k,J,st.glyphAt(0).charIndex,st.glyphAt(st.count-1).charIndex);for(let me=0;me<ar.length;me++){const[De,qe]=ar[me];let It=1/0,qt=-1/0;for(let gn=0;gn<Pt;gn++)if(st.glyphAt(gn).charIndex>=De){let Ae=gn,at=gn;for(;at<Pt;at++){let bt=st.glyphAt(at);if(bt.charIndex>qe)break;at<Pt-Mr&&(It=Math.min(It,bt.x),qt=Math.max(qt,bt.x+bt.width))}for(let bt=Ae;bt<at;bt++){const dt=st.glyphAt(bt);dt.x=qt-(dt.x+dt.width-It)}break}}let Qn;const Q=me=>Qn=me;for(let me=0;me<Pt;me++){let De=st.glyphAt(me);Qn=De.glyphObj;const qe=Qn.index,It=J.levels[De.charIndex]&1;if(It){const qt=e.getMirroredCharacter(k[De.charIndex]);qt&&Le.forEachGlyph(qt,0,0,Q)}if(ge){const{charIndex:qt}=De,gn=De.x+Ce,Ae=De.x+De.width+Ce;ct[qt*3]=It?Ae:gn,ct[qt*3+1]=It?gn:Ae,ct[qt*3+2]=oe+mt+X;const at=qt-Ge;at>1&&w(ct,Ge,at),Ge=qt}if(j){const{charIndex:qt}=De;for(;qt>Bt;)Bt++,j.hasOwnProperty(Bt)&&(Wt=j[Bt])}if(!Qn.isWhitespace&&!Qn.isEmpty){const qt=$e++;Ze[qe]||(Ze[qe]={path:Qn.path,pathBounds:[Qn.xMin,Qn.yMin,Qn.xMax,Qn.yMax]});const gn=De.x+Ce,Ae=oe+X;Re[qt*2]=gn,Re[qt*2+1]=Ae;const at=gn+Qn.xMin*be,bt=Ae+Qn.yMin*be,dt=gn+Qn.xMax*be,Dt=Ae+Qn.yMax*be;at<rt[0]&&(rt[0]=at),bt<rt[1]&&(rt[1]=bt),dt>rt[2]&&(rt[2]=dt),Dt>rt[3]&&(rt[3]=Dt),qt%Ie===0&&(Pe={start:qt,end:qt,rect:[o,o,-o,-o]},Ne.push(Pe)),Pe.end++;const xn=Pe.rect;if(at<xn[0]&&(xn[0]=at),bt<xn[1]&&(xn[1]=bt),dt>xn[2]&&(xn[2]=dt),Dt>xn[3]&&(xn[3]=Dt),Ve[qt]=qe,j){const Bn=qt*3;et[Bn]=Wt>>16&255,et[Bn+1]=Wt>>8&255,et[Bn+2]=Wt&255}}}}oe-=V}),ct){const st=k.length-Ge;st>1&&w(ct,Ge,st)}}_e.typesetting=x()-pt,te({glyphIds:Ve,glyphPositions:Re,glyphData:Ze,caretPositions:ct,caretHeight:lt,glyphColors:et,chunkedBounds:Ne,fontSize:F,unitsPerEm:At,ascender:nt*be,descender:Mt*be,capHeight:Et*be,xHeight:wt*be,lineHeight:V,topBaseline:ke,blockBounds:[Ce,X-He.length*V,Ce+we,X],visibleBounds:rt,timings:_e})})}function v(k,D){_(k,N=>{const[F,z,V,U]=N.blockBounds;D({width:V-F,height:U-z})},{metricsOnly:!0})}function E(k){let D=k.match(/^([\d.]+)%$/),N=D?parseFloat(D[1]):NaN;return isNaN(N)?0:N/100}function w(k,D,N){const F=k[D*3],z=k[D*3+1],V=k[D*3+2],U=(z-F)/N;for(let ee=0;ee<N;ee++){const ne=(D+ee)*3;k[ne]=F+U*ee,k[ne+1]=F+U*(ee+1),k[ne+2]=V}}function x(){return(self.performance||Date).now()}function A(){this.data=[]}const O=["glyphObj","x","width","charIndex"];return A.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/O.length)},glyphAt(k){let D=A.flyweight;return D.data=this.data,D.index=k,D},splitAt(k){let D=new A;return D.data=this.data.splice(k*O.length),D}},A.flyweight=O.reduce((k,D,N,F)=>(Object.defineProperty(k,D,{get(){return this.data[this.index*O.length+N]},set(z){this.data[this.index*O.length+N]=z}}),k),{data:null,index:0}),{typeset:_,measure:v,loadFont:m}}const jy=()=>(self.performance||Date).now(),cR=a7();let tG;function Hve(r,e,t,i,s,o,l,u,h,p,m=!0){return m?Wve(r,e,t,i,s,o,l,u,h,p).then(null,_=>(tG||(console.warn("WebGL SDF generation failed, falling back to JS",_),tG=!0),rG(r,e,t,i,s,o,l,u,h,p))):rG(r,e,t,i,s,o,l,u,h,p)}const LM=[],Gve=5;let D2=0;function u7(){const r=jy();for(;LM.length&&jy()-r<Gve;)LM.shift()();D2=LM.length?setTimeout(u7,0):0}const Wve=(...r)=>new Promise((e,t)=>{LM.push(()=>{const i=jy();try{cR.webgl.generateIntoCanvas(...r),e({timing:jy()-i})}catch(s){t(s)}}),D2||(D2=setTimeout(u7,0))}),Vve=4,jve=2e3,nG={};let Xve=0;function rG(r,e,t,i,s,o,l,u,h,p){const m="TroikaTextSDFGenerator_JS_"+Xve++%Vve;let _=nG[m];return _||(_=nG[m]={workerModule:Aw({name:m,workerId:m,dependencies:[a7,jy],init(v,E){const w=v().javascript.generate;return function(...x){const A=E();return{textureData:w(...x),timing:E()-A}}},getTransferables(v){return[v.textureData.buffer]}}),requests:0,idleTimer:null}),_.requests++,clearTimeout(_.idleTimer),_.workerModule(r,e,t,i,s,o).then(({textureData:v,timing:E})=>{const w=jy(),x=new Uint8Array(v.length*4);for(let A=0;A<v.length;A++)x[A*4+p]=v[A];return cR.webglUtils.renderImageData(l,x,u,h,r,e,1<<3-p),E+=jy()-w,--_.requests===0&&(_.idleTimer=setTimeout(()=>{Rve(m)},jve)),{timing:E}})}function Yve(r){r._warm||(cR.webgl.isSupported(r),r._warm=!0)}const Kve=cR.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Jve(){return typeof window>"u"&&(self.window=self),function(r){var e={parse:function(s){var o=e._bin,l=new Uint8Array(s);if(o.readASCII(l,0,4)=="ttcf"){var u=4;o.readUshort(l,u),u+=2,o.readUshort(l,u),u+=2;var h=o.readUint(l,u);u+=4;for(var p=[],m=0;m<h;m++){var _=o.readUint(l,u);u+=4,p.push(e._readFont(l,_))}return p}return[e._readFont(l,0)]},_readFont:function(s,o){var l=e._bin,u=o;l.readFixed(s,o),o+=4;var h=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2;for(var p=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],m={_data:s,_offset:u},_={},v=0;v<h;v++){var E=l.readASCII(s,o,4);o+=4,l.readUint(s,o),o+=4;var w=l.readUint(s,o);o+=4;var x=l.readUint(s,o);o+=4,_[E]={offset:w,length:x}}for(v=0;v<p.length;v++){var A=p[v];_[A]&&(m[A.trim()]=e[A.trim()].parse(s,_[A].offset,_[A].length,m))}return m},_tabOffset:function(s,o,l){for(var u=e._bin,h=u.readUshort(s,l+4),p=l+12,m=0;m<h;m++){var _=u.readASCII(s,p,4);p+=4,u.readUint(s,p),p+=4;var v=u.readUint(s,p);if(p+=4,u.readUint(s,p),p+=4,_==o)return v}return 0}};e._bin={readFixed:function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<8|s[o+3])/65540},readF2dot14:function(s,o){return e._bin.readShort(s,o)/16384},readInt:function(s,o){return e._bin._view(s).getInt32(o)},readInt8:function(s,o){return e._bin._view(s).getInt8(o)},readShort:function(s,o){return e._bin._view(s).getInt16(o)},readUshort:function(s,o){return e._bin._view(s).getUint16(o)},readUshorts:function(s,o,l){for(var u=[],h=0;h<l;h++)u.push(e._bin.readUshort(s,o+2*h));return u},readUint:function(s,o){return e._bin._view(s).getUint32(o)},readUint64:function(s,o){return 4294967296*e._bin.readUint(s,o)+e._bin.readUint(s,o+4)},readASCII:function(s,o,l){for(var u="",h=0;h<l;h++)u+=String.fromCharCode(s[o+h]);return u},readUnicode:function(s,o,l){for(var u="",h=0;h<l;h++){var p=s[o++]<<8|s[o++];u+=String.fromCharCode(p)}return u},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(s,o,l){var u=e._bin._tdec;return u&&o==0&&l==s.length?u.decode(s):e._bin.readASCII(s,o,l)},readBytes:function(s,o,l){for(var u=[],h=0;h<l;h++)u.push(s[o+h]);return u},readASCIIArray:function(s,o,l){for(var u=[],h=0;h<l;h++)u.push(String.fromCharCode(s[o+h]));return u},_view:function(s){return s._dataView||(s._dataView=s.buffer?new DataView(s.buffer,s.byteOffset,s.byteLength):new DataView(new Uint8Array(s).buffer))}},e._lctf={},e._lctf.parse=function(s,o,l,u,h){var p=e._bin,m={},_=o;p.readFixed(s,o),o+=4;var v=p.readUshort(s,o);o+=2;var E=p.readUshort(s,o);o+=2;var w=p.readUshort(s,o);return o+=2,m.scriptList=e._lctf.readScriptList(s,_+v),m.featureList=e._lctf.readFeatureList(s,_+E),m.lookupList=e._lctf.readLookupList(s,_+w,h),m},e._lctf.readLookupList=function(s,o,l){var u=e._bin,h=o,p=[],m=u.readUshort(s,o);o+=2;for(var _=0;_<m;_++){var v=u.readUshort(s,o);o+=2;var E=e._lctf.readLookupTable(s,h+v,l);p.push(E)}return p},e._lctf.readLookupTable=function(s,o,l){var u=e._bin,h=o,p={tabs:[]};p.ltype=u.readUshort(s,o),o+=2,p.flag=u.readUshort(s,o),o+=2;var m=u.readUshort(s,o);o+=2;for(var _=p.ltype,v=0;v<m;v++){var E=u.readUshort(s,o);o+=2;var w=l(s,_,h+E,p);p.tabs.push(w)}return p},e._lctf.numOfOnes=function(s){for(var o=0,l=0;l<32;l++)s>>>l&1&&o++;return o},e._lctf.readClassDef=function(s,o){var l=e._bin,u=[],h=l.readUshort(s,o);if(o+=2,h==1){var p=l.readUshort(s,o);o+=2;var m=l.readUshort(s,o);o+=2;for(var _=0;_<m;_++)u.push(p+_),u.push(p+_),u.push(l.readUshort(s,o)),o+=2}if(h==2){var v=l.readUshort(s,o);for(o+=2,_=0;_<v;_++)u.push(l.readUshort(s,o)),o+=2,u.push(l.readUshort(s,o)),o+=2,u.push(l.readUshort(s,o)),o+=2}return u},e._lctf.getInterval=function(s,o){for(var l=0;l<s.length;l+=3){var u=s[l],h=s[l+1];if(s[l+2],u<=o&&o<=h)return l}return-1},e._lctf.readCoverage=function(s,o){var l=e._bin,u={};u.fmt=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);return o+=2,u.fmt==1&&(u.tab=l.readUshorts(s,o,h)),u.fmt==2&&(u.tab=l.readUshorts(s,o,3*h)),u},e._lctf.coverageIndex=function(s,o){var l=s.tab;if(s.fmt==1)return l.indexOf(o);if(s.fmt==2){var u=e._lctf.getInterval(l,o);if(u!=-1)return l[u+2]+(o-l[u])}return-1},e._lctf.readFeatureList=function(s,o){var l=e._bin,u=o,h=[],p=l.readUshort(s,o);o+=2;for(var m=0;m<p;m++){var _=l.readASCII(s,o,4);o+=4;var v=l.readUshort(s,o);o+=2;var E=e._lctf.readFeatureTable(s,u+v);E.tag=_.trim(),h.push(E)}return h},e._lctf.readFeatureTable=function(s,o){var l=e._bin,u=o,h={},p=l.readUshort(s,o);o+=2,p>0&&(h.featureParams=u+p);var m=l.readUshort(s,o);o+=2,h.tab=[];for(var _=0;_<m;_++)h.tab.push(l.readUshort(s,o+2*_));return h},e._lctf.readScriptList=function(s,o){var l=e._bin,u=o,h={},p=l.readUshort(s,o);o+=2;for(var m=0;m<p;m++){var _=l.readASCII(s,o,4);o+=4;var v=l.readUshort(s,o);o+=2,h[_.trim()]=e._lctf.readScriptTable(s,u+v)}return h},e._lctf.readScriptTable=function(s,o){var l=e._bin,u=o,h={},p=l.readUshort(s,o);o+=2,h.default=e._lctf.readLangSysTable(s,u+p);var m=l.readUshort(s,o);o+=2;for(var _=0;_<m;_++){var v=l.readASCII(s,o,4);o+=4;var E=l.readUshort(s,o);o+=2,h[v.trim()]=e._lctf.readLangSysTable(s,u+E)}return h},e._lctf.readLangSysTable=function(s,o){var l=e._bin,u={};l.readUshort(s,o),o+=2,u.reqFeature=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);return o+=2,u.features=l.readUshorts(s,o,h),u},e.CFF={},e.CFF.parse=function(s,o,l){var u=e._bin;(s=new Uint8Array(s.buffer,o,l))[o=0],s[++o],s[++o],s[++o],o++;var h=[];o=e.CFF.readIndex(s,o,h);for(var p=[],m=0;m<h.length-1;m++)p.push(u.readASCII(s,o+h[m],h[m+1]-h[m]));o+=h[h.length-1];var _=[];o=e.CFF.readIndex(s,o,_);var v=[];for(m=0;m<_.length-1;m++)v.push(e.CFF.readDict(s,o+_[m],o+_[m+1]));o+=_[_.length-1];var E=v[0],w=[];o=e.CFF.readIndex(s,o,w);var x=[];for(m=0;m<w.length-1;m++)x.push(u.readASCII(s,o+w[m],w[m+1]-w[m]));if(o+=w[w.length-1],e.CFF.readSubrs(s,o,E),E.CharStrings){o=E.CharStrings,w=[],o=e.CFF.readIndex(s,o,w);var A=[];for(m=0;m<w.length-1;m++)A.push(u.readBytes(s,o+w[m],w[m+1]-w[m]));E.CharStrings=A}if(E.ROS){o=E.FDArray;var O=[];for(o=e.CFF.readIndex(s,o,O),E.FDArray=[],m=0;m<O.length-1;m++){var k=e.CFF.readDict(s,o+O[m],o+O[m+1]);e.CFF._readFDict(s,k,x),E.FDArray.push(k)}o+=O[O.length-1],o=E.FDSelect,E.FDSelect=[];var D=s[o];if(o++,D!=3)throw D;var N=u.readUshort(s,o);for(o+=2,m=0;m<N+1;m++)E.FDSelect.push(u.readUshort(s,o),s[o+2]),o+=3}return E.Encoding&&(E.Encoding=e.CFF.readEncoding(s,E.Encoding,E.CharStrings.length)),E.charset&&(E.charset=e.CFF.readCharset(s,E.charset,E.CharStrings.length)),e.CFF._readFDict(s,E,x),E},e.CFF._readFDict=function(s,o,l){var u;for(var h in o.Private&&(u=o.Private[1],o.Private=e.CFF.readDict(s,u,u+o.Private[0]),o.Private.Subrs&&e.CFF.readSubrs(s,u+o.Private.Subrs,o.Private)),o)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(h)!=-1&&(o[h]=l[o[h]-426+35])},e.CFF.readSubrs=function(s,o,l){var u=e._bin,h=[];o=e.CFF.readIndex(s,o,h);var p,m=h.length;p=m<1240?107:m<33900?1131:32768,l.Bias=p,l.Subrs=[];for(var _=0;_<h.length-1;_++)l.Subrs.push(u.readBytes(s,o+h[_],h[_+1]-h[_]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(s,o){for(var l=0;l<s.charset.length;l++)if(s.charset[l]==o)return l;return-1},e.CFF.glyphBySE=function(s,o){return o<0||o>255?-1:e.CFF.glyphByUnicode(s,e.CFF.tableSE[o])},e.CFF.readEncoding=function(s,o,l){e._bin;var u=[".notdef"],h=s[o];if(o++,h!=0)throw"error: unknown encoding format: "+h;var p=s[o];o++;for(var m=0;m<p;m++)u.push(s[o+m]);return u},e.CFF.readCharset=function(s,o,l){var u=e._bin,h=[".notdef"],p=s[o];if(o++,p==0)for(var m=0;m<l;m++){var _=u.readUshort(s,o);o+=2,h.push(_)}else{if(p!=1&&p!=2)throw"error: format: "+p;for(;h.length<l;){_=u.readUshort(s,o),o+=2;var v=0;for(p==1?(v=s[o],o++):(v=u.readUshort(s,o),o+=2),m=0;m<=v;m++)h.push(_),_++}}return h},e.CFF.readIndex=function(s,o,l){var u=e._bin,h=u.readUshort(s,o)+1,p=s[o+=2];if(o++,p==1)for(var m=0;m<h;m++)l.push(s[o+m]);else if(p==2)for(m=0;m<h;m++)l.push(u.readUshort(s,o+2*m));else if(p==3)for(m=0;m<h;m++)l.push(16777215&u.readUint(s,o+3*m-1));else if(h!=1)throw"unsupported offset size: "+p+", count: "+h;return(o+=h*p)-1},e.CFF.getCharString=function(s,o,l){var u=e._bin,h=s[o],p=s[o+1];s[o+2],s[o+3],s[o+4];var m=1,_=null,v=null;h<=20&&(_=h,m=1),h==12&&(_=100*h+p,m=2),21<=h&&h<=27&&(_=h,m=1),h==28&&(v=u.readShort(s,o+1),m=3),29<=h&&h<=31&&(_=h,m=1),32<=h&&h<=246&&(v=h-139,m=1),247<=h&&h<=250&&(v=256*(h-247)+p+108,m=2),251<=h&&h<=254&&(v=256*-(h-251)-p-108,m=2),h==255&&(v=u.readInt(s,o+1)/65535,m=5),l.val=v??"o"+_,l.size=m},e.CFF.readCharString=function(s,o,l){for(var u=o+l,h=e._bin,p=[];o<u;){var m=s[o],_=s[o+1];s[o+2],s[o+3],s[o+4];var v=1,E=null,w=null;m<=20&&(E=m,v=1),m==12&&(E=100*m+_,v=2),m!=19&&m!=20||(E=m,v=2),21<=m&&m<=27&&(E=m,v=1),m==28&&(w=h.readShort(s,o+1),v=3),29<=m&&m<=31&&(E=m,v=1),32<=m&&m<=246&&(w=m-139,v=1),247<=m&&m<=250&&(w=256*(m-247)+_+108,v=2),251<=m&&m<=254&&(w=256*-(m-251)-_-108,v=2),m==255&&(w=h.readInt(s,o+1)/65535,v=5),p.push(w??"o"+E),o+=v}return p},e.CFF.readDict=function(s,o,l){for(var u=e._bin,h={},p=[];o<l;){var m=s[o],_=s[o+1];s[o+2],s[o+3],s[o+4];var v=1,E=null,w=null;if(m==28&&(w=u.readShort(s,o+1),v=3),m==29&&(w=u.readInt(s,o+1),v=5),32<=m&&m<=246&&(w=m-139,v=1),247<=m&&m<=250&&(w=256*(m-247)+_+108,v=2),251<=m&&m<=254&&(w=256*-(m-251)-_-108,v=2),m==255)throw w=u.readInt(s,o+1)/65535,v=5,"unknown number";if(m==30){var x=[];for(v=1;;){var A=s[o+v];v++;var O=A>>4,k=15&A;if(O!=15&&x.push(O),k!=15&&x.push(k),k==15)break}for(var D="",N=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],F=0;F<x.length;F++)D+=N[x[F]];w=parseFloat(D)}m<=21&&(E=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][m],v=1,m==12&&(E=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][_],v=2)),E!=null?(h[E]=p.length==1?p[0]:p,p=[]):p.push(w),o+=v}return h},e.cmap={},e.cmap.parse=function(s,o,l){s=new Uint8Array(s.buffer,o,l),o=0;var u=e._bin,h={};u.readUshort(s,o),o+=2;var p=u.readUshort(s,o);o+=2;var m=[];h.tables=[];for(var _=0;_<p;_++){var v=u.readUshort(s,o);o+=2;var E=u.readUshort(s,o);o+=2;var w=u.readUint(s,o);o+=4;var x="p"+v+"e"+E,A=m.indexOf(w);if(A==-1){var O;A=h.tables.length,m.push(w);var k=u.readUshort(s,w);k==0?O=e.cmap.parse0(s,w):k==4?O=e.cmap.parse4(s,w):k==6?O=e.cmap.parse6(s,w):k==12?O=e.cmap.parse12(s,w):console.debug("unknown format: "+k,v,E,w),h.tables.push(O)}if(h[x]!=null)throw"multiple tables for one platform+encoding";h[x]=A}return h},e.cmap.parse0=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2,u.map=[];for(var p=0;p<h-6;p++)u.map.push(s[o+p]);return u},e.cmap.parse4=function(s,o){var l=e._bin,u=o,h={};h.format=l.readUshort(s,o),o+=2;var p=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2;var m=l.readUshort(s,o);o+=2;var _=m/2;h.searchRange=l.readUshort(s,o),o+=2,h.entrySelector=l.readUshort(s,o),o+=2,h.rangeShift=l.readUshort(s,o),o+=2,h.endCount=l.readUshorts(s,o,_),o+=2*_,o+=2,h.startCount=l.readUshorts(s,o,_),o+=2*_,h.idDelta=[];for(var v=0;v<_;v++)h.idDelta.push(l.readShort(s,o)),o+=2;for(h.idRangeOffset=l.readUshorts(s,o,_),o+=2*_,h.glyphIdArray=[];o<u+p;)h.glyphIdArray.push(l.readUshort(s,o)),o+=2;return h},e.cmap.parse6=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,u.firstCode=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2,u.glyphIdArray=[];for(var p=0;p<h;p++)u.glyphIdArray.push(l.readUshort(s,o)),o+=2;return u},e.cmap.parse12=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2,o+=2,l.readUint(s,o),o+=4,l.readUint(s,o),o+=4;var h=l.readUint(s,o);o+=4,u.groups=[];for(var p=0;p<h;p++){var m=o+12*p,_=l.readUint(s,m+0),v=l.readUint(s,m+4),E=l.readUint(s,m+8);u.groups.push([_,v,E])}return u},e.glyf={},e.glyf.parse=function(s,o,l,u){for(var h=[],p=0;p<u.maxp.numGlyphs;p++)h.push(null);return h},e.glyf._parseGlyf=function(s,o){var l=e._bin,u=s._data,h=e._tabOffset(u,"glyf",s._offset)+s.loca[o];if(s.loca[o]==s.loca[o+1])return null;var p={};if(p.noc=l.readShort(u,h),h+=2,p.xMin=l.readShort(u,h),h+=2,p.yMin=l.readShort(u,h),h+=2,p.xMax=l.readShort(u,h),h+=2,p.yMax=l.readShort(u,h),h+=2,p.xMin>=p.xMax||p.yMin>=p.yMax)return null;if(p.noc>0){p.endPts=[];for(var m=0;m<p.noc;m++)p.endPts.push(l.readUshort(u,h)),h+=2;var _=l.readUshort(u,h);if(h+=2,u.length-h<_)return null;p.instructions=l.readBytes(u,h,_),h+=_;var v=p.endPts[p.noc-1]+1;for(p.flags=[],m=0;m<v;m++){var E=u[h];if(h++,p.flags.push(E),(8&E)!=0){var w=u[h];h++;for(var x=0;x<w;x++)p.flags.push(E),m++}}for(p.xs=[],m=0;m<v;m++){var A=(2&p.flags[m])!=0,O=(16&p.flags[m])!=0;A?(p.xs.push(O?u[h]:-u[h]),h++):O?p.xs.push(0):(p.xs.push(l.readShort(u,h)),h+=2)}for(p.ys=[],m=0;m<v;m++)A=(4&p.flags[m])!=0,O=(32&p.flags[m])!=0,A?(p.ys.push(O?u[h]:-u[h]),h++):O?p.ys.push(0):(p.ys.push(l.readShort(u,h)),h+=2);var k=0,D=0;for(m=0;m<v;m++)k+=p.xs[m],D+=p.ys[m],p.xs[m]=k,p.ys[m]=D}else{var N;p.parts=[];do{N=l.readUshort(u,h),h+=2;var F={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(p.parts.push(F),F.glyphIndex=l.readUshort(u,h),h+=2,1&N){var z=l.readShort(u,h);h+=2;var V=l.readShort(u,h);h+=2}else z=l.readInt8(u,h),h++,V=l.readInt8(u,h),h++;2&N?(F.m.tx=z,F.m.ty=V):(F.p1=z,F.p2=V),8&N?(F.m.a=F.m.d=l.readF2dot14(u,h),h+=2):64&N?(F.m.a=l.readF2dot14(u,h),h+=2,F.m.d=l.readF2dot14(u,h),h+=2):128&N&&(F.m.a=l.readF2dot14(u,h),h+=2,F.m.b=l.readF2dot14(u,h),h+=2,F.m.c=l.readF2dot14(u,h),h+=2,F.m.d=l.readF2dot14(u,h),h+=2)}while(32&N);if(256&N){var U=l.readUshort(u,h);for(h+=2,p.instr=[],m=0;m<U;m++)p.instr.push(u[h]),h++}}return p},e.GPOS={},e.GPOS.parse=function(s,o,l,u){return e._lctf.parse(s,o,l,u,e.GPOS.subt)},e.GPOS.subt=function(s,o,l,u){var h=e._bin,p=l,m={};if(m.fmt=h.readUshort(s,l),l+=2,o==1||o==2||o==3||o==7||o==8&&m.fmt<=2){var _=h.readUshort(s,l);l+=2,m.coverage=e._lctf.readCoverage(s,_+p)}if(o==1&&m.fmt==1){var v=h.readUshort(s,l);l+=2;var E=e._lctf.numOfOnes(v);v!=0&&(m.pos=e.GPOS.readValueRecord(s,l,v))}else if(o==2&&m.fmt>=1&&m.fmt<=2){v=h.readUshort(s,l),l+=2;var w=h.readUshort(s,l);l+=2,E=e._lctf.numOfOnes(v);var x=e._lctf.numOfOnes(w);if(m.fmt==1){m.pairsets=[];var A=h.readUshort(s,l);l+=2;for(var O=0;O<A;O++){var k=p+h.readUshort(s,l);l+=2;var D=h.readUshort(s,k);k+=2;for(var N=[],F=0;F<D;F++){var z=h.readUshort(s,k);k+=2,v!=0&&(se=e.GPOS.readValueRecord(s,k,v),k+=2*E),w!=0&&(fe=e.GPOS.readValueRecord(s,k,w),k+=2*x),N.push({gid2:z,val1:se,val2:fe})}m.pairsets.push(N)}}if(m.fmt==2){var V=h.readUshort(s,l);l+=2;var U=h.readUshort(s,l);l+=2;var ee=h.readUshort(s,l);l+=2;var ne=h.readUshort(s,l);for(l+=2,m.classDef1=e._lctf.readClassDef(s,p+V),m.classDef2=e._lctf.readClassDef(s,p+U),m.matrix=[],O=0;O<ee;O++){var ie=[];for(F=0;F<ne;F++){var se=null,fe=null;v!=0&&(se=e.GPOS.readValueRecord(s,l,v),l+=2*E),w!=0&&(fe=e.GPOS.readValueRecord(s,l,w),l+=2*x),ie.push({val1:se,val2:fe})}m.matrix.push(ie)}}}else{if(o==9&&m.fmt==1){var ae=h.readUshort(s,l);l+=2;var he=h.readUint(s,l);if(l+=4,u.ltype==9)u.ltype=ae;else if(u.ltype!=ae)throw"invalid extension substitution";return e.GPOS.subt(s,u.ltype,p+he)}console.debug("unsupported GPOS table LookupType",o,"format",m.fmt)}return m},e.GPOS.readValueRecord=function(s,o,l){var u=e._bin,h=[];return h.push(1&l?u.readShort(s,o):0),o+=1&l?2:0,h.push(2&l?u.readShort(s,o):0),o+=2&l?2:0,h.push(4&l?u.readShort(s,o):0),o+=4&l?2:0,h.push(8&l?u.readShort(s,o):0),o+=8&l?2:0,h},e.GSUB={},e.GSUB.parse=function(s,o,l,u){return e._lctf.parse(s,o,l,u,e.GSUB.subt)},e.GSUB.subt=function(s,o,l,u){var h=e._bin,p=l,m={};if(m.fmt=h.readUshort(s,l),l+=2,o!=1&&o!=4&&o!=5&&o!=6)return null;if(o==1||o==4||o==5&&m.fmt<=2||o==6&&m.fmt<=2){var _=h.readUshort(s,l);l+=2,m.coverage=e._lctf.readCoverage(s,p+_)}if(o==1&&m.fmt>=1&&m.fmt<=2){if(m.fmt==1)m.delta=h.readShort(s,l),l+=2;else if(m.fmt==2){var v=h.readUshort(s,l);l+=2,m.newg=h.readUshorts(s,l,v),l+=2*m.newg.length}}else if(o==4){m.vals=[],v=h.readUshort(s,l),l+=2;for(var E=0;E<v;E++){var w=h.readUshort(s,l);l+=2,m.vals.push(e.GSUB.readLigatureSet(s,p+w))}}else if(o==5&&m.fmt==2){if(m.fmt==2){var x=h.readUshort(s,l);l+=2,m.cDef=e._lctf.readClassDef(s,p+x),m.scset=[];var A=h.readUshort(s,l);for(l+=2,E=0;E<A;E++){var O=h.readUshort(s,l);l+=2,m.scset.push(O==0?null:e.GSUB.readSubClassSet(s,p+O))}}}else if(o==6&&m.fmt==3){if(m.fmt==3){for(E=0;E<3;E++){v=h.readUshort(s,l),l+=2;for(var k=[],D=0;D<v;D++)k.push(e._lctf.readCoverage(s,p+h.readUshort(s,l+2*D)));l+=2*v,E==0&&(m.backCvg=k),E==1&&(m.inptCvg=k),E==2&&(m.ahedCvg=k)}v=h.readUshort(s,l),l+=2,m.lookupRec=e.GSUB.readSubstLookupRecords(s,l,v)}}else{if(o==7&&m.fmt==1){var N=h.readUshort(s,l);l+=2;var F=h.readUint(s,l);if(l+=4,u.ltype==9)u.ltype=N;else if(u.ltype!=N)throw"invalid extension substitution";return e.GSUB.subt(s,u.ltype,p+F)}console.debug("unsupported GSUB table LookupType",o,"format",m.fmt)}return m},e.GSUB.readSubClassSet=function(s,o){var l=e._bin.readUshort,u=o,h=[],p=l(s,o);o+=2;for(var m=0;m<p;m++){var _=l(s,o);o+=2,h.push(e.GSUB.readSubClassRule(s,u+_))}return h},e.GSUB.readSubClassRule=function(s,o){var l=e._bin.readUshort,u={},h=l(s,o),p=l(s,o+=2);o+=2,u.input=[];for(var m=0;m<h-1;m++)u.input.push(l(s,o)),o+=2;return u.substLookupRecords=e.GSUB.readSubstLookupRecords(s,o,p),u},e.GSUB.readSubstLookupRecords=function(s,o,l){for(var u=e._bin.readUshort,h=[],p=0;p<l;p++)h.push(u(s,o),u(s,o+2)),o+=4;return h},e.GSUB.readChainSubClassSet=function(s,o){var l=e._bin,u=o,h=[],p=l.readUshort(s,o);o+=2;for(var m=0;m<p;m++){var _=l.readUshort(s,o);o+=2,h.push(e.GSUB.readChainSubClassRule(s,u+_))}return h},e.GSUB.readChainSubClassRule=function(s,o){for(var l=e._bin,u={},h=["backtrack","input","lookahead"],p=0;p<h.length;p++){var m=l.readUshort(s,o);o+=2,p==1&&m--,u[h[p]]=l.readUshorts(s,o,m),o+=2*u[h[p]].length}return m=l.readUshort(s,o),o+=2,u.subst=l.readUshorts(s,o,2*m),o+=2*u.subst.length,u},e.GSUB.readLigatureSet=function(s,o){var l=e._bin,u=o,h=[],p=l.readUshort(s,o);o+=2;for(var m=0;m<p;m++){var _=l.readUshort(s,o);o+=2,h.push(e.GSUB.readLigature(s,u+_))}return h},e.GSUB.readLigature=function(s,o){var l=e._bin,u={chain:[]};u.nglyph=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2;for(var p=0;p<h-1;p++)u.chain.push(l.readUshort(s,o)),o+=2;return u},e.head={},e.head.parse=function(s,o,l){var u=e._bin,h={};return u.readFixed(s,o),o+=4,h.fontRevision=u.readFixed(s,o),o+=4,u.readUint(s,o),o+=4,u.readUint(s,o),o+=4,h.flags=u.readUshort(s,o),o+=2,h.unitsPerEm=u.readUshort(s,o),o+=2,h.created=u.readUint64(s,o),o+=8,h.modified=u.readUint64(s,o),o+=8,h.xMin=u.readShort(s,o),o+=2,h.yMin=u.readShort(s,o),o+=2,h.xMax=u.readShort(s,o),o+=2,h.yMax=u.readShort(s,o),o+=2,h.macStyle=u.readUshort(s,o),o+=2,h.lowestRecPPEM=u.readUshort(s,o),o+=2,h.fontDirectionHint=u.readShort(s,o),o+=2,h.indexToLocFormat=u.readShort(s,o),o+=2,h.glyphDataFormat=u.readShort(s,o),o+=2,h},e.hhea={},e.hhea.parse=function(s,o,l){var u=e._bin,h={};return u.readFixed(s,o),o+=4,h.ascender=u.readShort(s,o),o+=2,h.descender=u.readShort(s,o),o+=2,h.lineGap=u.readShort(s,o),o+=2,h.advanceWidthMax=u.readUshort(s,o),o+=2,h.minLeftSideBearing=u.readShort(s,o),o+=2,h.minRightSideBearing=u.readShort(s,o),o+=2,h.xMaxExtent=u.readShort(s,o),o+=2,h.caretSlopeRise=u.readShort(s,o),o+=2,h.caretSlopeRun=u.readShort(s,o),o+=2,h.caretOffset=u.readShort(s,o),o+=2,o+=8,h.metricDataFormat=u.readShort(s,o),o+=2,h.numberOfHMetrics=u.readUshort(s,o),o+=2,h},e.hmtx={},e.hmtx.parse=function(s,o,l,u){for(var h=e._bin,p={aWidth:[],lsBearing:[]},m=0,_=0,v=0;v<u.maxp.numGlyphs;v++)v<u.hhea.numberOfHMetrics&&(m=h.readUshort(s,o),o+=2,_=h.readShort(s,o),o+=2),p.aWidth.push(m),p.lsBearing.push(_);return p},e.kern={},e.kern.parse=function(s,o,l,u){var h=e._bin,p=h.readUshort(s,o);if(o+=2,p==1)return e.kern.parseV1(s,o-2,l,u);var m=h.readUshort(s,o);o+=2;for(var _={glyph1:[],rval:[]},v=0;v<m;v++){o+=2,l=h.readUshort(s,o),o+=2;var E=h.readUshort(s,o);o+=2;var w=E>>>8;if((w&=15)!=0)throw"unknown kern table format: "+w;o=e.kern.readFormat0(s,o,_)}return _},e.kern.parseV1=function(s,o,l,u){var h=e._bin;h.readFixed(s,o),o+=4;var p=h.readUint(s,o);o+=4;for(var m={glyph1:[],rval:[]},_=0;_<p;_++){h.readUint(s,o),o+=4;var v=h.readUshort(s,o);o+=2,h.readUshort(s,o),o+=2;var E=v>>>8;if((E&=15)!=0)throw"unknown kern table format: "+E;o=e.kern.readFormat0(s,o,m)}return m},e.kern.readFormat0=function(s,o,l){var u=e._bin,h=-1,p=u.readUshort(s,o);o+=2,u.readUshort(s,o),o+=2,u.readUshort(s,o),o+=2,u.readUshort(s,o),o+=2;for(var m=0;m<p;m++){var _=u.readUshort(s,o);o+=2;var v=u.readUshort(s,o);o+=2;var E=u.readShort(s,o);o+=2,_!=h&&(l.glyph1.push(_),l.rval.push({glyph2:[],vals:[]}));var w=l.rval[l.rval.length-1];w.glyph2.push(v),w.vals.push(E),h=_}return o},e.loca={},e.loca.parse=function(s,o,l,u){var h=e._bin,p=[],m=u.head.indexToLocFormat,_=u.maxp.numGlyphs+1;if(m==0)for(var v=0;v<_;v++)p.push(h.readUshort(s,o+(v<<1))<<1);if(m==1)for(v=0;v<_;v++)p.push(h.readUint(s,o+(v<<2)));return p},e.maxp={},e.maxp.parse=function(s,o,l){var u=e._bin,h={},p=u.readUint(s,o);return o+=4,h.numGlyphs=u.readUshort(s,o),o+=2,p==65536&&(h.maxPoints=u.readUshort(s,o),o+=2,h.maxContours=u.readUshort(s,o),o+=2,h.maxCompositePoints=u.readUshort(s,o),o+=2,h.maxCompositeContours=u.readUshort(s,o),o+=2,h.maxZones=u.readUshort(s,o),o+=2,h.maxTwilightPoints=u.readUshort(s,o),o+=2,h.maxStorage=u.readUshort(s,o),o+=2,h.maxFunctionDefs=u.readUshort(s,o),o+=2,h.maxInstructionDefs=u.readUshort(s,o),o+=2,h.maxStackElements=u.readUshort(s,o),o+=2,h.maxSizeOfInstructions=u.readUshort(s,o),o+=2,h.maxComponentElements=u.readUshort(s,o),o+=2,h.maxComponentDepth=u.readUshort(s,o),o+=2),h},e.name={},e.name.parse=function(s,o,l){var u=e._bin,h={};u.readUshort(s,o),o+=2;var p=u.readUshort(s,o);o+=2,u.readUshort(s,o);for(var m,_=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],v=o+=2,E=0;E<p;E++){var w=u.readUshort(s,o);o+=2;var x=u.readUshort(s,o);o+=2;var A=u.readUshort(s,o);o+=2;var O=u.readUshort(s,o);o+=2;var k=u.readUshort(s,o);o+=2;var D=u.readUshort(s,o);o+=2;var N,F=_[O],z=v+12*p+D;if(w==0)N=u.readUnicode(s,z,k/2);else if(w==3&&x==0)N=u.readUnicode(s,z,k/2);else if(x==0)N=u.readASCII(s,z,k);else if(x==1)N=u.readUnicode(s,z,k/2);else if(x==3)N=u.readUnicode(s,z,k/2);else{if(w!=1)throw"unknown encoding "+x+", platformID: "+w;N=u.readASCII(s,z,k),console.debug("reading unknown MAC encoding "+x+" as ASCII")}var V="p"+w+","+A.toString(16);h[V]==null&&(h[V]={}),h[V][F!==void 0?F:O]=N,h[V]._lang=A}for(var U in h)if(h[U].postScriptName!=null&&h[U]._lang==1033)return h[U];for(var U in h)if(h[U].postScriptName!=null&&h[U]._lang==0)return h[U];for(var U in h)if(h[U].postScriptName!=null&&h[U]._lang==3084)return h[U];for(var U in h)if(h[U].postScriptName!=null)return h[U];for(var U in h){m=U;break}return console.debug("returning name table with languageID "+h[m]._lang),h[m]},e["OS/2"]={},e["OS/2"].parse=function(s,o,l){var u=e._bin.readUshort(s,o);o+=2;var h={};if(u==0)e["OS/2"].version0(s,o,h);else if(u==1)e["OS/2"].version1(s,o,h);else if(u==2||u==3||u==4)e["OS/2"].version2(s,o,h);else{if(u!=5)throw"unknown OS/2 table version: "+u;e["OS/2"].version5(s,o,h)}return h},e["OS/2"].version0=function(s,o,l){var u=e._bin;return l.xAvgCharWidth=u.readShort(s,o),o+=2,l.usWeightClass=u.readUshort(s,o),o+=2,l.usWidthClass=u.readUshort(s,o),o+=2,l.fsType=u.readUshort(s,o),o+=2,l.ySubscriptXSize=u.readShort(s,o),o+=2,l.ySubscriptYSize=u.readShort(s,o),o+=2,l.ySubscriptXOffset=u.readShort(s,o),o+=2,l.ySubscriptYOffset=u.readShort(s,o),o+=2,l.ySuperscriptXSize=u.readShort(s,o),o+=2,l.ySuperscriptYSize=u.readShort(s,o),o+=2,l.ySuperscriptXOffset=u.readShort(s,o),o+=2,l.ySuperscriptYOffset=u.readShort(s,o),o+=2,l.yStrikeoutSize=u.readShort(s,o),o+=2,l.yStrikeoutPosition=u.readShort(s,o),o+=2,l.sFamilyClass=u.readShort(s,o),o+=2,l.panose=u.readBytes(s,o,10),o+=10,l.ulUnicodeRange1=u.readUint(s,o),o+=4,l.ulUnicodeRange2=u.readUint(s,o),o+=4,l.ulUnicodeRange3=u.readUint(s,o),o+=4,l.ulUnicodeRange4=u.readUint(s,o),o+=4,l.achVendID=[u.readInt8(s,o),u.readInt8(s,o+1),u.readInt8(s,o+2),u.readInt8(s,o+3)],o+=4,l.fsSelection=u.readUshort(s,o),o+=2,l.usFirstCharIndex=u.readUshort(s,o),o+=2,l.usLastCharIndex=u.readUshort(s,o),o+=2,l.sTypoAscender=u.readShort(s,o),o+=2,l.sTypoDescender=u.readShort(s,o),o+=2,l.sTypoLineGap=u.readShort(s,o),o+=2,l.usWinAscent=u.readUshort(s,o),o+=2,l.usWinDescent=u.readUshort(s,o),o+=2},e["OS/2"].version1=function(s,o,l){var u=e._bin;return o=e["OS/2"].version0(s,o,l),l.ulCodePageRange1=u.readUint(s,o),o+=4,l.ulCodePageRange2=u.readUint(s,o),o+=4},e["OS/2"].version2=function(s,o,l){var u=e._bin;return o=e["OS/2"].version1(s,o,l),l.sxHeight=u.readShort(s,o),o+=2,l.sCapHeight=u.readShort(s,o),o+=2,l.usDefault=u.readUshort(s,o),o+=2,l.usBreak=u.readUshort(s,o),o+=2,l.usMaxContext=u.readUshort(s,o),o+=2},e["OS/2"].version5=function(s,o,l){var u=e._bin;return o=e["OS/2"].version2(s,o,l),l.usLowerOpticalPointSize=u.readUshort(s,o),o+=2,l.usUpperOpticalPointSize=u.readUshort(s,o),o+=2},e.post={},e.post.parse=function(s,o,l){var u=e._bin,h={};return h.version=u.readFixed(s,o),o+=4,h.italicAngle=u.readFixed(s,o),o+=4,h.underlinePosition=u.readShort(s,o),o+=2,h.underlineThickness=u.readShort(s,o),o+=2,h},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(s,o){var l=s.cmap,u=-1;if(l.p0e4!=null?u=l.p0e4:l.p3e1!=null?u=l.p3e1:l.p1e0!=null?u=l.p1e0:l.p0e3!=null&&(u=l.p0e3),u==-1)throw"no familiar platform and encoding!";var h=l.tables[u];if(h.format==0)return o>=h.map.length?0:h.map[o];if(h.format==4){for(var p=-1,m=0;m<h.endCount.length;m++)if(o<=h.endCount[m]){p=m;break}return p==-1||h.startCount[p]>o?0:65535&(h.idRangeOffset[p]!=0?h.glyphIdArray[o-h.startCount[p]+(h.idRangeOffset[p]>>1)-(h.idRangeOffset.length-p)]:o+h.idDelta[p])}if(h.format==12){if(o>h.groups[h.groups.length-1][1])return 0;for(m=0;m<h.groups.length;m++){var _=h.groups[m];if(_[0]<=o&&o<=_[1])return _[2]+(o-_[0])}return 0}throw"unknown cmap table format "+h.format},e.U.glyphToPath=function(s,o){var l={cmds:[],crds:[]};if(s.SVG&&s.SVG.entries[o]){var u=s.SVG.entries[o];return u==null?l:(typeof u=="string"&&(u=e.SVG.toPath(u),s.SVG.entries[o]=u),u)}if(s.CFF){var h={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:s.CFF.Private?s.CFF.Private.defaultWidthX:0,open:!1},p=s.CFF,m=s.CFF.Private;if(p.ROS){for(var _=0;p.FDSelect[_+2]<=o;)_+=2;m=p.FDArray[p.FDSelect[_+1]].Private}e.U._drawCFF(s.CFF.CharStrings[o],h,p,m,l)}else s.glyf&&e.U._drawGlyf(o,s,l);return l},e.U._drawGlyf=function(s,o,l){var u=o.glyf[s];u==null&&(u=o.glyf[s]=e.glyf._parseGlyf(o,s)),u!=null&&(u.noc>-1?e.U._simpleGlyph(u,l):e.U._compoGlyph(u,o,l))},e.U._simpleGlyph=function(s,o){for(var l=0;l<s.noc;l++){for(var u=l==0?0:s.endPts[l-1]+1,h=s.endPts[l],p=u;p<=h;p++){var m=p==u?h:p-1,_=p==h?u:p+1,v=1&s.flags[p],E=1&s.flags[m],w=1&s.flags[_],x=s.xs[p],A=s.ys[p];if(p==u)if(v){if(!E){e.U.P.moveTo(o,x,A);continue}e.U.P.moveTo(o,s.xs[m],s.ys[m])}else E?e.U.P.moveTo(o,s.xs[m],s.ys[m]):e.U.P.moveTo(o,(s.xs[m]+x)/2,(s.ys[m]+A)/2);v?E&&e.U.P.lineTo(o,x,A):w?e.U.P.qcurveTo(o,x,A,s.xs[_],s.ys[_]):e.U.P.qcurveTo(o,x,A,(x+s.xs[_])/2,(A+s.ys[_])/2)}e.U.P.closePath(o)}},e.U._compoGlyph=function(s,o,l){for(var u=0;u<s.parts.length;u++){var h={cmds:[],crds:[]},p=s.parts[u];e.U._drawGlyf(p.glyphIndex,o,h);for(var m=p.m,_=0;_<h.crds.length;_+=2){var v=h.crds[_],E=h.crds[_+1];l.crds.push(v*m.a+E*m.b+m.tx),l.crds.push(v*m.c+E*m.d+m.ty)}for(_=0;_<h.cmds.length;_++)l.cmds.push(h.cmds[_])}},e.U._getGlyphClass=function(s,o){var l=e._lctf.getInterval(o,s);return l==-1?0:o[l+2]},e.U.getPairAdjustment=function(s,o,l){var u=!1;if(s.GPOS)for(var h=s.GPOS,p=h.lookupList,m=h.featureList,_=[],v=0;v<m.length;v++){var E=m[v];if(E.tag=="kern"){u=!0;for(var w=0;w<E.tab.length;w++)if(!_[E.tab[w]]){_[E.tab[w]]=!0;for(var x=p[E.tab[w]],A=0;A<x.tabs.length;A++)if(x.tabs[A]!=null){var O,k=x.tabs[A];if((!k.coverage||(O=e._lctf.coverageIndex(k.coverage,o))!=-1)&&x.ltype!=1&&x.ltype==2){var D=null;if(k.fmt==1){var N=k.pairsets[O];for(v=0;v<N.length;v++)N[v].gid2==l&&(D=N[v])}else if(k.fmt==2){var F=e.U._getGlyphClass(o,k.classDef1),z=e.U._getGlyphClass(l,k.classDef2);D=k.matrix[F][z]}if(D){var V=0;return D.val1&&D.val1[2]&&(V+=D.val1[2]),D.val2&&D.val2[0]&&(V+=D.val2[0]),V}}}}}}if(s.kern&&!u){var U=s.kern.glyph1.indexOf(o);if(U!=-1){var ee=s.kern.rval[U].glyph2.indexOf(l);if(ee!=-1)return s.kern.rval[U].vals[ee]}}return 0},e.U._applySubs=function(s,o,l,u){for(var h=s.length-o-1,p=0;p<l.tabs.length;p++)if(l.tabs[p]!=null){var m,_=l.tabs[p];if(!_.coverage||(m=e._lctf.coverageIndex(_.coverage,s[o]))!=-1){if(l.ltype==1)s[o],_.fmt==1?s[o]=s[o]+_.delta:s[o]=_.newg[m];else if(l.ltype==4)for(var v=_.vals[m],E=0;E<v.length;E++){var w=v[E],x=w.chain.length;if(!(x>h)){for(var A=!0,O=0,k=0;k<x;k++){for(;s[o+O+(1+k)]==-1;)O++;w.chain[k]!=s[o+O+(1+k)]&&(A=!1)}if(A){for(s[o]=w.nglyph,k=0;k<x+O;k++)s[o+k+1]=-1;break}}}else if(l.ltype==5&&_.fmt==2)for(var D=e._lctf.getInterval(_.cDef,s[o]),N=_.cDef[D+2],F=_.scset[N],z=0;z<F.length;z++){var V=F[z],U=V.input;if(!(U.length>h)){for(A=!0,k=0;k<U.length;k++){var ee=e._lctf.getInterval(_.cDef,s[o+1+k]);if(D==-1&&_.cDef[ee+2]!=U[k]){A=!1;break}}if(A){var ne=V.substLookupRecords;for(E=0;E<ne.length;E+=2)ne[E],ne[E+1]}}}else if(l.ltype==6&&_.fmt==3){if(!e.U._glsCovered(s,_.backCvg,o-_.backCvg.length)||!e.U._glsCovered(s,_.inptCvg,o)||!e.U._glsCovered(s,_.ahedCvg,o+_.inptCvg.length))continue;var ie=_.lookupRec;for(z=0;z<ie.length;z+=2){D=ie[z];var se=u[ie[z+1]];e.U._applySubs(s,o+D,se,u)}}}}},e.U._glsCovered=function(s,o,l){for(var u=0;u<o.length;u++)if(e._lctf.coverageIndex(o[u],s[l+u])==-1)return!1;return!0},e.U.glyphsToPath=function(s,o,l){for(var u={cmds:[],crds:[]},h=0,p=0;p<o.length;p++){var m=o[p];if(m!=-1){for(var _=p<o.length-1&&o[p+1]!=-1?o[p+1]:0,v=e.U.glyphToPath(s,m),E=0;E<v.crds.length;E+=2)u.crds.push(v.crds[E]+h),u.crds.push(v.crds[E+1]);for(l&&u.cmds.push(l),E=0;E<v.cmds.length;E++)u.cmds.push(v.cmds[E]);l&&u.cmds.push("X"),h+=s.hmtx.aWidth[m],p<o.length-1&&(h+=e.U.getPairAdjustment(s,m,_))}}return u},e.U.P={},e.U.P.moveTo=function(s,o,l){s.cmds.push("M"),s.crds.push(o,l)},e.U.P.lineTo=function(s,o,l){s.cmds.push("L"),s.crds.push(o,l)},e.U.P.curveTo=function(s,o,l,u,h,p,m){s.cmds.push("C"),s.crds.push(o,l,u,h,p,m)},e.U.P.qcurveTo=function(s,o,l,u,h){s.cmds.push("Q"),s.crds.push(o,l,u,h)},e.U.P.closePath=function(s){s.cmds.push("Z")},e.U._drawCFF=function(s,o,l,u,h){for(var p=o.stack,m=o.nStems,_=o.haveWidth,v=o.width,E=o.open,w=0,x=o.x,A=o.y,O=0,k=0,D=0,N=0,F=0,z=0,V=0,U=0,ee=0,ne=0,ie={val:0,size:0};w<s.length;){e.CFF.getCharString(s,w,ie);var se=ie.val;if(w+=ie.size,se=="o1"||se=="o18")p.length%2!=0&&!_&&(v=p.shift()+u.nominalWidthX),m+=p.length>>1,p.length=0,_=!0;else if(se=="o3"||se=="o23")p.length%2!=0&&!_&&(v=p.shift()+u.nominalWidthX),m+=p.length>>1,p.length=0,_=!0;else if(se=="o4")p.length>1&&!_&&(v=p.shift()+u.nominalWidthX,_=!0),E&&e.U.P.closePath(h),A+=p.pop(),e.U.P.moveTo(h,x,A),E=!0;else if(se=="o5")for(;p.length>0;)x+=p.shift(),A+=p.shift(),e.U.P.lineTo(h,x,A);else if(se=="o6"||se=="o7")for(var fe=p.length,ae=se=="o6",he=0;he<fe;he++){var ge=p.shift();ae?x+=ge:A+=ge,ae=!ae,e.U.P.lineTo(h,x,A)}else if(se=="o8"||se=="o24"){fe=p.length;for(var Ie=0;Ie+6<=fe;)O=x+p.shift(),k=A+p.shift(),D=O+p.shift(),N=k+p.shift(),x=D+p.shift(),A=N+p.shift(),e.U.P.curveTo(h,O,k,D,N,x,A),Ie+=6;se=="o24"&&(x+=p.shift(),A+=p.shift(),e.U.P.lineTo(h,x,A))}else{if(se=="o11")break;if(se=="o1234"||se=="o1235"||se=="o1236"||se=="o1237")se=="o1234"&&(k=A,D=(O=x+p.shift())+p.shift(),ne=N=k+p.shift(),z=N,U=A,x=(V=(F=(ee=D+p.shift())+p.shift())+p.shift())+p.shift(),e.U.P.curveTo(h,O,k,D,N,ee,ne),e.U.P.curveTo(h,F,z,V,U,x,A)),se=="o1235"&&(O=x+p.shift(),k=A+p.shift(),D=O+p.shift(),N=k+p.shift(),ee=D+p.shift(),ne=N+p.shift(),F=ee+p.shift(),z=ne+p.shift(),V=F+p.shift(),U=z+p.shift(),x=V+p.shift(),A=U+p.shift(),p.shift(),e.U.P.curveTo(h,O,k,D,N,ee,ne),e.U.P.curveTo(h,F,z,V,U,x,A)),se=="o1236"&&(O=x+p.shift(),k=A+p.shift(),D=O+p.shift(),ne=N=k+p.shift(),z=N,V=(F=(ee=D+p.shift())+p.shift())+p.shift(),U=z+p.shift(),x=V+p.shift(),e.U.P.curveTo(h,O,k,D,N,ee,ne),e.U.P.curveTo(h,F,z,V,U,x,A)),se=="o1237"&&(O=x+p.shift(),k=A+p.shift(),D=O+p.shift(),N=k+p.shift(),ee=D+p.shift(),ne=N+p.shift(),F=ee+p.shift(),z=ne+p.shift(),V=F+p.shift(),U=z+p.shift(),Math.abs(V-x)>Math.abs(U-A)?x=V+p.shift():A=U+p.shift(),e.U.P.curveTo(h,O,k,D,N,ee,ne),e.U.P.curveTo(h,F,z,V,U,x,A));else if(se=="o14"){if(p.length>0&&!_&&(v=p.shift()+l.nominalWidthX,_=!0),p.length==4){var j=p.shift(),te=p.shift(),q=p.shift(),le=p.shift(),_e=e.CFF.glyphBySE(l,q),Le=e.CFF.glyphBySE(l,le);e.U._drawCFF(l.CharStrings[_e],o,l,u,h),o.x=j,o.y=te,e.U._drawCFF(l.CharStrings[Le],o,l,u,h)}E&&(e.U.P.closePath(h),E=!1)}else if(se=="o19"||se=="o20")p.length%2!=0&&!_&&(v=p.shift()+u.nominalWidthX),m+=p.length>>1,p.length=0,_=!0,w+=m+7>>3;else if(se=="o21")p.length>2&&!_&&(v=p.shift()+u.nominalWidthX,_=!0),A+=p.pop(),x+=p.pop(),E&&e.U.P.closePath(h),e.U.P.moveTo(h,x,A),E=!0;else if(se=="o22")p.length>1&&!_&&(v=p.shift()+u.nominalWidthX,_=!0),x+=p.pop(),E&&e.U.P.closePath(h),e.U.P.moveTo(h,x,A),E=!0;else if(se=="o25"){for(;p.length>6;)x+=p.shift(),A+=p.shift(),e.U.P.lineTo(h,x,A);O=x+p.shift(),k=A+p.shift(),D=O+p.shift(),N=k+p.shift(),x=D+p.shift(),A=N+p.shift(),e.U.P.curveTo(h,O,k,D,N,x,A)}else if(se=="o26")for(p.length%2&&(x+=p.shift());p.length>0;)O=x,k=A+p.shift(),x=D=O+p.shift(),A=(N=k+p.shift())+p.shift(),e.U.P.curveTo(h,O,k,D,N,x,A);else if(se=="o27")for(p.length%2&&(A+=p.shift());p.length>0;)k=A,D=(O=x+p.shift())+p.shift(),N=k+p.shift(),x=D+p.shift(),A=N,e.U.P.curveTo(h,O,k,D,N,x,A);else if(se=="o10"||se=="o29"){var xe=se=="o10"?u:l;if(p.length==0)console.debug("error: empty stack");else{var Ve=p.pop(),Re=xe.Subrs[Ve+xe.Bias];o.x=x,o.y=A,o.nStems=m,o.haveWidth=_,o.width=v,o.open=E,e.U._drawCFF(Re,o,l,u,h),x=o.x,A=o.y,m=o.nStems,_=o.haveWidth,v=o.width,E=o.open}}else if(se=="o30"||se=="o31"){var Ze=p.length,et=(Ie=0,se=="o31");for(Ie+=Ze-(fe=-3&Ze);Ie<fe;)et?(k=A,D=(O=x+p.shift())+p.shift(),A=(N=k+p.shift())+p.shift(),fe-Ie==5?(x=D+p.shift(),Ie++):x=D,et=!1):(O=x,k=A+p.shift(),D=O+p.shift(),N=k+p.shift(),x=D+p.shift(),fe-Ie==5?(A=N+p.shift(),Ie++):A=N,et=!0),e.U.P.curveTo(h,O,k,D,N,x,A),Ie+=4}else{if((se+"").charAt(0)=="o")throw console.debug("Unknown operation: "+se,s),se;p.push(se)}}}o.x=x,o.y=A,o.nStems=m,o.haveWidth=_,o.width=v,o.open=E};var t=e,i={Typr:t};return r.Typr=t,r.default=i,Object.defineProperty(r,"__esModule",{value:!0}),r}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Qve(){return function(r){var e=Uint8Array,t=Uint16Array,i=Uint32Array,s=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(se,fe){for(var ae=new t(31),he=0;he<31;++he)ae[he]=fe+=1<<se[he-1];var ge=new i(ae[30]);for(he=1;he<30;++he)for(var Ie=ae[he];Ie<ae[he+1];++Ie)ge[Ie]=Ie-ae[he]<<5|he;return[ae,ge]},h=u(s,2),p=h[0],m=h[1];p[28]=258,m[258]=28;for(var _=u(o,0)[0],v=new t(32768),E=0;E<32768;++E){var w=(43690&E)>>>1|(21845&E)<<1;w=(61680&(w=(52428&w)>>>2|(13107&w)<<2))>>>4|(3855&w)<<4,v[E]=((65280&w)>>>8|(255&w)<<8)>>>1}var x=function(se,fe,ae){for(var he=se.length,ge=0,Ie=new t(fe);ge<he;++ge)++Ie[se[ge]-1];var j,te=new t(fe);for(ge=0;ge<fe;++ge)te[ge]=te[ge-1]+Ie[ge-1]<<1;if(ae){j=new t(1<<fe);var q=15-fe;for(ge=0;ge<he;++ge)if(se[ge])for(var le=ge<<4|se[ge],_e=fe-se[ge],Le=te[se[ge]-1]++<<_e,xe=Le|(1<<_e)-1;Le<=xe;++Le)j[v[Le]>>>q]=le}else for(j=new t(he),ge=0;ge<he;++ge)se[ge]&&(j[ge]=v[te[se[ge]-1]++]>>>15-se[ge]);return j},A=new e(288);for(E=0;E<144;++E)A[E]=8;for(E=144;E<256;++E)A[E]=9;for(E=256;E<280;++E)A[E]=7;for(E=280;E<288;++E)A[E]=8;var O=new e(32);for(E=0;E<32;++E)O[E]=5;var k=x(A,9,1),D=x(O,5,1),N=function(se){for(var fe=se[0],ae=1;ae<se.length;++ae)se[ae]>fe&&(fe=se[ae]);return fe},F=function(se,fe,ae){var he=fe/8|0;return(se[he]|se[he+1]<<8)>>(7&fe)&ae},z=function(se,fe){var ae=fe/8|0;return(se[ae]|se[ae+1]<<8|se[ae+2]<<16)>>(7&fe)},V=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],U=function(se,fe,ae){var he=new Error(fe||V[se]);if(he.code=se,Error.captureStackTrace&&Error.captureStackTrace(he,U),!ae)throw he;return he},ee=function(se,fe,ae){var he=se.length;if(!he||ae&&!ae.l&&he<5)return fe||new e(0);var ge=!fe||ae,Ie=!ae||ae.i;ae||(ae={}),fe||(fe=new e(3*he));var j,te=function(Ge){var Bt=fe.length;if(Ge>Bt){var Pe=new e(Math.max(2*Bt,Ge));Pe.set(fe),fe=Pe}},q=ae.f||0,le=ae.p||0,_e=ae.b||0,Le=ae.l,xe=ae.d,Ve=ae.m,Re=ae.n,Ze=8*he;do{if(!Le){ae.f=q=F(se,le,1);var et=F(se,le+1,3);if(le+=3,!et){var ct=se[(wt=((j=le)/8|0)+(7&j&&1)+4)-4]|se[wt-3]<<8,rt=wt+ct;if(rt>he){Ie&&U(0);break}ge&&te(_e+ct),fe.set(se.subarray(wt,rt),_e),ae.b=_e+=ct,ae.p=le=8*rt;continue}if(et==1)Le=k,xe=D,Ve=9,Re=5;else if(et==2){var Ne=F(se,le,31)+257,we=F(se,le+10,15)+4,ze=Ne+F(se,le+5,31)+1;le+=14;for(var it=new e(ze),nt=new e(19),Mt=0;Mt<we;++Mt)nt[l[Mt]]=F(se,le+3*Mt,7);le+=3*we;var At=N(nt),ht=(1<<At)-1,Et=x(nt,At,1);for(Mt=0;Mt<ze;){var wt,pt=Et[F(se,le,ht)];if(le+=15&pt,(wt=pt>>>4)<16)it[Mt++]=wt;else{var be=0,Z=0;for(wt==16?(Z=3+F(se,le,3),le+=2,be=it[Mt-1]):wt==17?(Z=3+F(se,le,7),le+=3):wt==18&&(Z=11+F(se,le,127),le+=7);Z--;)it[Mt++]=be}}var ke=it.subarray(0,Ne),lt=it.subarray(Ne);Ve=N(ke),Re=N(lt),Le=x(ke,Ve,1),xe=x(lt,Re,1)}else U(1);if(le>Ze){Ie&&U(0);break}}ge&&te(_e+131072);for(var mt=(1<<Ve)-1,xt=(1<<Re)-1,ut=le;;ut=le){var He=(be=Le[z(se,le)&mt])>>>4;if((le+=15&be)>Ze){Ie&&U(0);break}if(be||U(2),He<256)fe[_e++]=He;else{if(He==256){ut=le,Le=null;break}var Ce=He-254;if(He>264){var X=s[Mt=He-257];Ce=F(se,le,(1<<X)-1)+p[Mt],le+=X}var J=xe[z(se,le)&xt],oe=J>>>4;if(J||U(3),le+=15&J,lt=_[oe],oe>3&&(X=o[oe],lt+=z(se,le)&(1<<X)-1,le+=X),le>Ze){Ie&&U(0);break}ge&&te(_e+131072);for(var $e=_e+Ce;_e<$e;_e+=4)fe[_e]=fe[_e-lt],fe[_e+1]=fe[_e+1-lt],fe[_e+2]=fe[_e+2-lt],fe[_e+3]=fe[_e+3-lt];_e=$e}}ae.l=Le,ae.p=ut,ae.b=_e,Le&&(q=1,ae.m=Ve,ae.d=xe,ae.n=Re)}while(!q);return _e==fe.length?fe:function(Ge,Bt,Pe){(Bt==null||Bt<0)&&(Bt=0),(Pe==null||Pe>Ge.length)&&(Pe=Ge.length);var Wt=new(Ge instanceof t?t:Ge instanceof i?i:e)(Pe-Bt);return Wt.set(Ge.subarray(Bt,Pe)),Wt}(fe,0,_e)},ne=new e(0),ie=typeof TextDecoder<"u"&&new TextDecoder;try{ie.decode(ne,{stream:!0})}catch{}return r.convert_streams=function(se){var fe=new DataView(se),ae=0;function he(){var Ne=fe.getUint16(ae);return ae+=2,Ne}function ge(){var Ne=fe.getUint32(ae);return ae+=4,Ne}function Ie(Ne){ct.setUint16(rt,Ne),rt+=2}function j(Ne){ct.setUint32(rt,Ne),rt+=4}for(var te={signature:ge(),flavor:ge(),length:ge(),numTables:he(),reserved:he(),totalSfntSize:ge(),majorVersion:he(),minorVersion:he(),metaOffset:ge(),metaLength:ge(),metaOrigLength:ge(),privOffset:ge(),privLength:ge()},q=0;Math.pow(2,q)<=te.numTables;)q++;q--;for(var le=16*Math.pow(2,q),_e=16*te.numTables-le,Le=12,xe=[],Ve=0;Ve<te.numTables;Ve++)xe.push({tag:ge(),offset:ge(),compLength:ge(),origLength:ge(),origChecksum:ge()}),Le+=16;var Re,Ze=new Uint8Array(12+16*xe.length+xe.reduce(function(Ne,we){return Ne+we.origLength+4},0)),et=Ze.buffer,ct=new DataView(et),rt=0;return j(te.flavor),Ie(te.numTables),Ie(le),Ie(q),Ie(_e),xe.forEach(function(Ne){j(Ne.tag),j(Ne.origChecksum),j(Le),j(Ne.origLength),Ne.outOffset=Le,(Le+=Ne.origLength)%4!=0&&(Le+=4-Le%4)}),xe.forEach(function(Ne){var we,ze=se.slice(Ne.offset,Ne.offset+Ne.compLength);if(Ne.compLength!=Ne.origLength){var it=new Uint8Array(Ne.origLength);we=new Uint8Array(ze,2),ee(we,it)}else it=new Uint8Array(ze);Ze.set(it,Ne.outOffset);var nt=0;(Le=Ne.outOffset+Ne.origLength)%4!=0&&(nt=4-Le%4),Ze.set(new Uint8Array(nt).buffer,Ne.outOffset+Ne.origLength),Re=Le+nt}),et.slice(0,Re)},Object.defineProperty(r,"__esModule",{value:!0}),r}({}).convert_streams}function qve(r,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},s=1,o=2,l=4,u=8,h=16,p=32;let m;function _(F){if(!m){const z={R:o,L:s,D:l,C:h,U:p,T:u};m=new Map;for(let V in i){let U=0;i[V].split(",").forEach(ee=>{let[ne,ie]=ee.split("+");ne=parseInt(ne,36),ie=ie?parseInt(ie,36):0,m.set(U+=ne,z[V]);for(let se=ie;se--;)m.set(++U,z[V])})}}return m.get(F)||p}const v=1,E=2,w=3,x=4,A=[null,"isol","init","fina","medi"];function O(F){const z=new Uint8Array(F.length);let V=p,U=v,ee=-1;for(let ne=0;ne<F.length;ne++){const ie=F.codePointAt(ne);let se=_(ie)|0,fe=v;se&u||(V&(s|l|h)?se&(o|l|h)?(fe=w,(U===v||U===w)&&z[ee]++):se&(s|p)&&(U===E||U===x)&&z[ee]--:V&(o|p)&&(U===E||U===x)&&z[ee]--,U=z[ne]=fe,V=se,ee=ne,ie>65535&&ne++)}return z}function k(F,z){const V=[];for(let ee=0;ee<z.length;ee++){const ne=z.codePointAt(ee);ne>65535&&ee++,V.push(r.U.codeToGlyph(F,ne))}const U=F.GSUB;if(U){const{lookupList:ee,featureList:ne}=U;let ie;const se=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,fe=[];ne.forEach(ae=>{if(se.test(ae.tag))for(let he=0;he<ae.tab.length;he++){if(fe[ae.tab[he]])continue;fe[ae.tab[he]]=!0;const ge=ee[ae.tab[he]],Ie=/^(isol|init|fina|medi)$/.test(ae.tag);Ie&&!ie&&(ie=O(z));for(let j=0;j<V.length;j++)(!ie||!Ie||A[ie[j]]===ae.tag)&&r.U._applySubs(V,j,ge,ee)}})}return V}function D(...F){for(let z=0;z<F.length;z++)if(typeof F[z]=="number")return F[z]}function N(F){const z=Object.create(null),V=F["OS/2"],U=F.hhea,ee=F.head.unitsPerEm,ne=D(V&&V.sTypoAscender,U&&U.ascender,ee),ie={unitsPerEm:ee,ascender:ne,descender:D(V&&V.sTypoDescender,U&&U.descender,0),capHeight:D(V&&V.sCapHeight,ne),xHeight:D(V&&V.sxHeight,ne),lineGap:D(V&&V.sTypoLineGap,U&&U.lineGap),forEachGlyph(se,fe,ae,he){let ge=0;const Ie=1/ie.unitsPerEm*fe,j=k(F,se);let te=0,q=-1;return j.forEach((le,_e)=>{if(le!==-1){let Le=z[le];if(!Le){const{cmds:xe,crds:Ve}=r.U.glyphToPath(F,le);let Re="",Ze=0;for(let we=0,ze=xe.length;we<ze;we++){const it=t[xe[we]];Re+=xe[we];for(let nt=1;nt<=it;nt++)Re+=(nt>1?",":"")+Ve[Ze++]}let et,ct,rt,Ne;if(Ve.length){et=ct=1/0,rt=Ne=-1/0;for(let we=0,ze=Ve.length;we<ze;we+=2){let it=Ve[we],nt=Ve[we+1];it<et&&(et=it),nt<ct&&(ct=nt),it>rt&&(rt=it),nt>Ne&&(Ne=nt)}}else et=rt=ct=Ne=0;Le=z[le]={index:le,advanceWidth:F.hmtx.aWidth[le],xMin:et,yMin:ct,xMax:rt,yMax:Ne,path:Re,pathCommandCount:xe.length}}q!==-1&&(ge+=r.U.getPairAdjustment(F,q,le)*Ie),he.call(null,Le,ge,te),Le.advanceWidth&&(ge+=Le.advanceWidth*Ie),ae&&(ge+=ae*fe),q=le}te+=se.codePointAt(te)>65535?2:1}),ge}};return ie}return function(F){const z=new Uint8Array(F,0,4),V=r._bin.readASCII(z,0,4);if(V==="wOFF")F=e(F);else if(V==="wOF2")throw new Error("woff2 fonts not supported");return N(r.parse(F)[0])}}const Zve=Aw({name:"Typr Font Parser",dependencies:[Jve,Qve,qve],init(r,e,t){const i=r(),s=e();return t(i,s)}}),qT={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},eye=new _n;function IT(){return(self.performance||Date).now()}const iG=Object.create(null);function c7(r,e){r=rye({},r);const t=IT();if(r.font=iye(r.font||qT.defaultFontURL),r.text=""+r.text,r.sdfGlyphSize=r.sdfGlyphSize||qT.sdfGlyphSize,r.colorRanges!=null){let _={};for(let v in r.colorRanges)if(r.colorRanges.hasOwnProperty(v)){let E=r.colorRanges[v];typeof E!="number"&&(E=eye.set(E).getHex()),_[v]=E}r.colorRanges=_}Object.freeze(r);const{textureWidth:i,sdfExponent:s}=qT,{sdfGlyphSize:o}=r,l=i/o*4;let u=iG[o];if(!u){const _=document.createElement("canvas");_.width=i,_.height=o*256/l,u=iG[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:_,sdfTexture:new Rl(_,void 0,void 0,void 0,Po,Po),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,tye(u)}const{sdfTexture:h,sdfCanvas:p}=u;let m=u.glyphsByFont.get(r.font);m||u.glyphsByFont.set(r.font,m=new Map),oye(r).then(_=>{const{glyphIds:v,glyphPositions:E,fontSize:w,unitsPerEm:x,timings:A}=_,O=[],k=new Float32Array(v.length*4),D=w/x;let N=0,F=0;const z=IT();v.forEach((ie,se)=>{let fe=m.get(ie);if(!fe){const{path:Ie,pathBounds:j}=_.glyphData[ie],te=Math.max(j[2]-j[0],j[3]-j[1])/o*(qT.sdfMargin*o+.5),q=u.glyphCount++,le=[j[0]-te,j[1]-te,j[2]+te,j[3]+te];m.set(ie,fe={path:Ie,atlasIndex:q,sdfViewBox:le}),O.push(fe)}const{sdfViewBox:ae}=fe,he=E[F++],ge=E[F++];k[N++]=he+ae[0]*D,k[N++]=ge+ae[1]*D,k[N++]=he+ae[2]*D,k[N++]=ge+ae[3]*D,v[se]=fe.atlasIndex}),A.quads=(A.quads||0)+(IT()-z);const V=IT();A.sdf={};const U=p.height,ee=Math.ceil(u.glyphCount/l),ne=Math.pow(2,Math.ceil(Math.log2(ee*o)));ne>U&&(console.info(`Increasing SDF texture size ${U}->${ne}`),Kve(p,i,ne),h.dispose()),Promise.all(O.map(ie=>h7(ie,u,r.gpuAccelerateSDF).then(({timing:se})=>{A.sdf[ie.atlasIndex]=se}))).then(()=>{O.length&&!u.contextLost&&(d7(u),h.needsUpdate=!0),A.sdfTotal=IT()-V,A.total=IT()-t,e(Object.freeze({parameters:r,sdfTexture:h,sdfGlyphSize:o,sdfExponent:s,glyphBounds:k,glyphAtlasIndices:v,glyphColors:_.glyphColors,caretPositions:_.caretPositions,caretHeight:_.caretHeight,chunkedBounds:_.chunkedBounds,ascender:_.ascender,descender:_.descender,lineHeight:_.lineHeight,capHeight:_.capHeight,xHeight:_.xHeight,topBaseline:_.topBaseline,blockBounds:_.blockBounds,visibleBounds:_.visibleBounds,timings:_.timings}))})}),Promise.resolve().then(()=>{u.contextLost||Yve(p)})}function h7({path:r,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:s,contextLost:o},l){if(o)return Promise.resolve({timing:-1});const{textureWidth:u,sdfExponent:h}=qT,p=Math.max(t[2]-t[0],t[3]-t[1]),m=Math.floor(e/4),_=m%(u/i)*i,v=Math.floor(m/(u/i))*i,E=e%4;return Hve(i,i,r,t,p,h,s,_,v,E,l)}function tye(r){const e=r.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),r.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),r.contextLost=!1;const i=[];r.glyphsByFont.forEach(s=>{s.forEach(o=>{i.push(h7(o,r,!0))})}),Promise.all(i).then(()=>{d7(r),r.sdfTexture.needsUpdate=!0})})}function nye({font:r,characters:e,sdfGlyphSize:t},i){let s=Array.isArray(e)?e.join(`
`):""+e;c7({font:r,sdfGlyphSize:t,text:s},i)}function rye(r,e){for(let t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}let QC;function iye(r){return QC||(QC=typeof document>"u"?{}:document.createElement("a")),QC.href=r,QC.href}function d7(r){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=r,{width:i,height:s}=e,o=r.sdfCanvas.getContext("webgl");let l=t.image.data;(!l||l.length!==i*s*4)&&(l=new Uint8Array(i*s*4),t.image={width:i,height:s,data:l},t.flipY=!1,t.isDataTexture=!0),o.readPixels(0,0,i,s,o.RGBA,o.UNSIGNED_BYTE,l)}}const sye=Aw({name:"Typesetter",dependencies:[qT,Zve,zve,Ove],init(r,e,t,i){const{defaultFontURL:s}=r;return t(e,i(),{defaultFontURL:s})}}),oye=Aw({name:"Typesetter",dependencies:[sye],init(r){return function(e){return new Promise(t=>{r.typeset(e,t)})}},getTransferables(r){const e=[r.glyphPositions.buffer,r.glyphIds.buffer];return r.caretPositions&&e.push(r.caretPositions.buffer),r.glyphColors&&e.push(r.glyphColors.buffer),e}}),sG={};function aye(r){let e=sG[r];if(!e){const t=new lg(1,1,r,r),i=t.clone(),s=t.attributes,o=i.attributes,l=new Ar,u=s.uv.count;for(let h=0;h<u;h++)o.position.array[h*3]*=-1,o.normal.array[h*3+2]*=-1;["position","normal","uv"].forEach(h=>{l.setAttribute(h,new Pn([...s[h].array,...o[h].array],s[h].itemSize))}),l.setIndex([...t.index.array,...i.index.array.map(h=>h+u)]),l.translate(.5,.5,0),e=sG[r]=l}return e}const lye="aTroikaGlyphBounds",oG="aTroikaGlyphIndex",uye="aTroikaGlyphColor";class cye extends lR{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new t_,this.boundingBox=new hg}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===Nc?t/2:0,e===Kd?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=aye(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,s,o){iL(this,lye,e,4),iL(this,oG,t,1),iL(this,uye,o,3),this._blockBounds=i,this._chunkedBounds=s,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:s,floor:o,min:l,max:u,sin:h,cos:p}=Math,m=s/2,_=s*2,v=Math.abs(t),E=e[0]/v,w=e[2]/v,x=o((E+m)/_)!==o((w+m)/_)?-v:l(h(E)*v,h(w)*v),A=o((E-m)/_)!==o((w-m)/_)?v:u(h(E)*v,h(w)*v),O=o((E+s)/_)!==o((w+s)/_)?v*2:u(v-p(E)*v,v-p(w)*v);i.min.set(x,e[1],t<0?-O:0),i.max.set(A,e[3],t<0?0:O)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(oG).count,i=this._chunkedBounds;if(i)for(let s=i.length;s--;){t=i[s].end;let o=i[s].rect;if(o[1]<e.w&&o[3]>e.y&&o[0]<e.z&&o[2]>e.x)break}this.instanceCount=t}}function iL(r,e,t,i){const s=r.getAttribute(e);t?s&&s.array.length===t.length?(s.array.set(t),s.needsUpdate=!0):(r.setAttribute(e,new nb(t,i)),delete r._maxInstanceCount,r.dispose()):s&&r.deleteAttribute(e)}const hye=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,dye=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,pye=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,fye=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function mye(r){const e=N2(r,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ot},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new xi(0,0,0,0)},uTroikaClipRect:{value:new xi(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ot},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new _n},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Jd},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:hye,vertexTransform:dye,fragmentDefs:pye,fragmentColorTransform:fye,customRewriter({vertexShader:t,fragmentShader:i}){let s=/\buniform\s+vec3\s+diffuse\b/;return s.test(i)&&(i=i.replace(s,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),s.test(t)||(t=t.replace(l7,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const xP=new dg({color:16777215,side:Kd,transparent:!0}),aG=8421504,lG=new Sr,qC=new Te,sL=new Te,x$=[],gye=new Te,oL="+x+y";function uG(r){return Array.isArray(r)?r[0]:r}let p7=()=>{const r=new bn(new lg(1,1),xP);return p7=()=>r,r},f7=()=>{const r=new bn(new lg(1,1,32,1),xP);return f7=()=>r,r};const _ye={type:"syncstart"},vye={type:"synccomplete"},m7=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],yye=m7.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class g7 extends bn{constructor(){const e=new cye;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=aG,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=oL,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(_ye),c7({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(s=>s&&s())})),this.dispatchEvent(vye),e&&e()})))}onBeforeRender(e,t,i,s,o,l){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o),o._hadOwnSide=o.hasOwnProperty("side"),this.geometry.setSide(o._actualSide=o.side),o.side=Jg}onAfterRender(e,t,i,s,o,l){o._hadOwnSide?o.side=o._actualSide:delete o.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=xP.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=mye(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function s(){e.removeEventListener("dispose",s),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return uG(this.material).getDepthMaterial()}get customDistanceMaterial(){return uG(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,s=this.textRenderInfo;if(s){const{sdfTexture:u,blockBounds:h}=s;i.uTroikaSDFTexture.value=u,i.uTroikaSDFTextureSize.value.set(u.image.width,u.image.height),i.uTroikaSDFGlyphSize.value=s.sdfGlyphSize,i.uTroikaSDFExponent.value=s.sdfExponent,i.uTroikaTotalBounds.value.fromArray(h),i.uTroikaUseGlyphColors.value=!t&&!!s.glyphColors;let p=0,m=0,_=0,v,E,w,x=0,A=0;if(t){let{outlineWidth:k,outlineOffsetX:D,outlineOffsetY:N,outlineBlur:F,outlineOpacity:z}=this;p=this._parsePercent(k)||0,m=Math.max(0,this._parsePercent(F)||0),v=z,x=this._parsePercent(D)||0,A=this._parsePercent(N)||0}else _=Math.max(0,this._parsePercent(this.strokeWidth)||0),_&&(w=this.strokeColor,i.uTroikaStrokeColor.value.set(w??aG),E=this.strokeOpacity,E==null&&(E=1)),v=this.fillOpacity;i.uTroikaDistanceOffset.value=p,i.uTroikaPositionOffset.value.set(x,A),i.uTroikaBlurRadius.value=m,i.uTroikaStrokeWidth.value=_,i.uTroikaStrokeOpacity.value=E,i.uTroikaFillOpacity.value=v??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let O=this.clipRect;if(O&&Array.isArray(O)&&O.length===4)i.uTroikaClipRect.value.fromArray(O);else{const k=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(h[0]-k,h[1]-k,h[2]+k,h[3]+k)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const o=t?this.outlineColor||0:this.color;if(o==null)delete e.color;else{const u=e.hasOwnProperty("color")?e.color:e.color=new _n;(o!==u._input||typeof o=="object")&&u.set(u._input=o)}let l=this.orientation||oL;if(l!==e._orientation){let u=i.uTroikaOrient.value;l=l.replace(/[^-+xyz]/g,"");let h=l!==oL&&l.match(/^([-+])([xyz])([-+])([xyz])$/);if(h){let[,p,m,_,v]=h;qC.set(0,0,0)[m]=p==="-"?1:-1,sL.set(0,0,0)[v]=_==="-"?-1:1,lG.lookAt(gye,qC.cross(sL),sL),u.setFromMatrix4(lG)}else u.identity();e._orientation=l}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Ot){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new Ot){return qC.copy(e),this.localPositionToTextCoords(this.worldToLocal(qC),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:s}=this;if(i){const o=i.blockBounds,l=s?f7():p7(),u=l.geometry,{position:h,uv:p}=u.attributes;for(let m=0;m<p.count;m++){let _=o[0]+p.getX(m)*(o[2]-o[0]);const v=o[1]+p.getY(m)*(o[3]-o[1]);let E=0;s&&(E=s-Math.cos(_/s)*s,_=Math.sin(_/s)*s),h.setXYZ(m,_,v,E)}u.boundingSphere=this.geometry.boundingSphere,u.boundingBox=this.geometry.boundingBox,l.matrixWorld=this.matrixWorld,l.material.side=this.material.side,x$.length=0,l.raycast(e,x$);for(let m=0;m<x$.length;m++)x$[m].object=this,t.push(x$[m])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,yye.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}}m7.forEach(r=>{const e="_private_"+r;Object.defineProperty(g7.prototype,r,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const bye=de.forwardRef(({anchorX:r="center",anchorY:e="middle",font:t,fontSize:i=1,children:s,characters:o,onSync:l,...u},h)=>{const p=Nh(({invalidate:E})=>E),[m]=de.useState(()=>new g7),[_,v]=de.useMemo(()=>{const E=[];let w="";return de.Children.forEach(s,x=>{typeof x=="string"||typeof x=="number"?w+=x:E.push(x)}),[E,w]},[s]);return E0e(()=>new Promise(E=>nye({font:t,characters:o},E)),["troika-text",t,o]),de.useLayoutEffect(()=>void m.sync(()=>{p(),l&&l(m)})),de.useEffect(()=>()=>m.dispose(),[m]),Xt("primitive",{object:m,ref:h,font:t,text:v,anchorX:r,anchorY:e,fontSize:i,...u,children:_})});var Tye=1/0,Eye=9007199254740991,$ye="[object Arguments]",Sye="[object Function]",wye="[object GeneratorFunction]",xye="[object Symbol]",Cye=typeof B_=="object"&&B_&&B_.Object===Object&&B_,Mye=typeof self=="object"&&self&&self.Object===Object&&self,Aye=Cye||Mye||Function("return this")();function Iye(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}function Rye(r,e){for(var t=-1,i=r?r.length:0,s=Array(i);++t<i;)s[t]=e(r[t],t,r);return s}function kye(r,e){for(var t=-1,i=e.length,s=r.length;++t<i;)r[s+t]=e[t];return r}var CP=Object.prototype,Oye=CP.hasOwnProperty,MP=CP.toString,cG=Aye.Symbol,Lye=CP.propertyIsEnumerable,hG=cG?cG.isConcatSpreadable:void 0,dG=Math.max;function _7(r,e,t,i,s){var o=-1,l=r.length;for(t||(t=Pye),s||(s=[]);++o<l;){var u=r[o];e>0&&t(u)?e>1?_7(u,e-1,t,i,s):kye(s,u):i||(s[s.length]=u)}return s}function Nye(r,e){return r=Object(r),Dye(r,e,function(t,i){return i in r})}function Dye(r,e,t){for(var i=-1,s=e.length,o={};++i<s;){var l=e[i],u=r[l];t(u,l)&&(o[l]=u)}return o}function Bye(r,e){return e=dG(e===void 0?r.length-1:e,0),function(){for(var t=arguments,i=-1,s=dG(t.length-e,0),o=Array(s);++i<s;)o[i]=t[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=t[i];return l[e]=o,Iye(r,this,l)}}function Pye(r){return zye(r)||Uye(r)||!!(hG&&r&&r[hG])}function Fye(r){if(typeof r=="string"||Xye(r))return r;var e=r+"";return e=="0"&&1/r==-Tye?"-0":e}function Uye(r){return Gye(r)&&Oye.call(r,"callee")&&(!Lye.call(r,"callee")||MP.call(r)==$ye)}var zye=Array.isArray;function Hye(r){return r!=null&&Vye(r.length)&&!Wye(r)}function Gye(r){return v7(r)&&Hye(r)}function Wye(r){var e=jye(r)?MP.call(r):"";return e==Sye||e==wye}function Vye(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Eye}function jye(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function v7(r){return!!r&&typeof r=="object"}function Xye(r){return typeof r=="symbol"||v7(r)&&MP.call(r)==xye}var Yye=Bye(function(r,e){return r==null?{}:Nye(r,Rye(_7(e,1),Fye))}),aL=Yye;const Kye=de.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:i,enableDamping:s=!0,onChange:o,onStart:l,onEnd:u,...h},p)=>{const m=Nh(F=>F.invalidate),_=Nh(F=>F.camera),v=Nh(F=>F.gl),E=Nh(F=>F.events),w=Nh(F=>F.setEvents),x=Nh(F=>F.set),A=Nh(F=>F.get),O=Nh(F=>F.performance),k=e||_,D=i||E.connected||v.domElement,N=de.useMemo(()=>new bve(k),[k]);return Af(()=>{N.enabled&&N.update()},-1),de.useEffect(()=>(N.connect(D),()=>void N.dispose()),[D,t,N,m]),de.useEffect(()=>{const F=U=>{m(),t&&O.regress(),o&&o(U)},z=U=>{l&&l(U)},V=U=>{u&&u(U)};return N.addEventListener("change",F),N.addEventListener("start",z),N.addEventListener("end",V),()=>{N.removeEventListener("start",z),N.removeEventListener("end",V),N.removeEventListener("change",F)}},[o,l,u,N,m,w]),de.useEffect(()=>{if(r){const F=A().controls;return x({controls:N}),()=>x({controls:F})}},[r,N]),Xt("primitive",{ref:p,object:N,enableDamping:s,...h})});class Jye extends nR{constructor(e){super(e),this.onBeforeCompile=(t,i)=>{const{isWebGL2:s}=i.capabilities;t.fragmentShader=t.fragmentShader.replace("#include <output_fragment>",`
        ${s?"#include <output_fragment>":`#extension GL_OES_standard_derivatives : enable
#include <output_fragment>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <encodings_fragment>
      `)}}}const Qye=de.forwardRef((r,e)=>{const[t]=de.useState(()=>new Jye(null));return Xt("primitive",{...r,object:t,ref:e,attach:"material"})});function qye(r){const e=r+"Geometry";return de.forwardRef(({args:t,children:i,...s},o)=>uc("mesh",{ref:o,...s,children:[Xt(e,{attach:"geometry",args:t}),i]}))}const Zye=qye("circle");let ly,C$;const ebe=de.createContext(null),pG=new Sr,fG=new Te,tbe=de.forwardRef(({children:r,range:e,limit:t=1e3,...i},s)=>{const o=de.useRef(null),[l,u]=de.useState([]),[[h,p,m]]=de.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);de.useEffect(()=>{o.current.geometry.attributes.position.needsUpdate=!0}),Af(()=>{for(o.current.updateMatrix(),o.current.updateMatrixWorld(),pG.copy(o.current.matrixWorld).invert(),o.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,l.length),ly=0;ly<l.length;ly++)C$=l[ly].current,C$.getWorldPosition(fG).applyMatrix4(pG),fG.toArray(h,ly*3),o.current.geometry.attributes.position.needsUpdate=!0,C$.matrixWorldNeedsUpdate=!0,C$.color.toArray(p,ly*3),o.current.geometry.attributes.color.needsUpdate=!0,m.set([C$.size],ly),o.current.geometry.attributes.size.needsUpdate=!0});const _=de.useMemo(()=>({getParent:()=>o,subscribe:v=>(u(E=>[...E,v]),()=>u(E=>E.filter(w=>w.current!==v.current)))}),[]);return de.createElement("points",A2({userData:{instances:l},matrixAutoUpdate:!1,ref:$P([s,o]),raycast:()=>null},i),uc("bufferGeometry",{children:[Xt("bufferAttribute",{attach:"attributes-position",count:h.length/3,array:h,itemSize:3,usage:Uy}),Xt("bufferAttribute",{attach:"attributes-color",count:p.length/3,array:p,itemSize:3,usage:Uy}),Xt("bufferAttribute",{attach:"attributes-size",count:m.length,array:m,itemSize:1,usage:Uy})]}),de.createElement(ebe.Provider,{value:_},r))}),nbe=de.forwardRef(({children:r,positions:e,colors:t,sizes:i,stride:s=3,...o},l)=>{const u=de.useRef(null);return Af(()=>{const h=u.current.geometry.attributes;h.position.needsUpdate=!0,t&&(h.color.needsUpdate=!0),i&&(h.size.needsUpdate=!0)}),uc("points",{ref:$P([l,u]),...o,children:[uc("bufferGeometry",{children:[Xt("bufferAttribute",{attach:"attributes-position",count:e.length/s,array:e,itemSize:s,usage:Uy}),t&&Xt("bufferAttribute",{attach:"attributes-color",count:t.length/s,array:t,itemSize:3,usage:Uy}),i&&Xt("bufferAttribute",{attach:"attributes-size",count:i.length/s,array:i,itemSize:1,usage:Uy})]}),r]})}),rbe=de.forwardRef((r,e)=>r.positions instanceof Float32Array?Xt(nbe,{...r,ref:e}):Xt(tbe,{...r,ref:e})),mG=r=>{let e;const t=new Set,i=(l,u)=>{const h=typeof l=="function"?l(e):l;if(!Object.is(h,e)){const p=e;e=u??typeof h!="object"?h:Object.assign({},e,h),t.forEach(m=>m(e,p))}},s=()=>e,o={setState:i,getState:s,subscribe:l=>(t.add(l),()=>t.delete(l)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}};return e=r(i,s,o),o},ibe=r=>r?mG(r):mG;var y7={exports:{}},lL={},gG={exports:{}},uL={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _G;function sbe(){if(_G)return uL;_G=1;var r=vr;function e(_,v){return _===v&&(_!==0||1/_===1/v)||_!==_&&v!==v}var t=typeof Object.is=="function"?Object.is:e,i=r.useState,s=r.useEffect,o=r.useLayoutEffect,l=r.useDebugValue;function u(_,v){var E=v(),w=i({inst:{value:E,getSnapshot:v}}),x=w[0].inst,A=w[1];return o(function(){x.value=E,x.getSnapshot=v,h(x)&&A({inst:x})},[_,E,v]),s(function(){return h(x)&&A({inst:x}),_(function(){h(x)&&A({inst:x})})},[_]),l(E),E}function h(_){var v=_.getSnapshot;_=_.value;try{var E=v();return!t(_,E)}catch{return!0}}function p(_,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return uL.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:m,uL}var vG;function obe(){return vG||(vG=1,function(r){r.exports=sbe()}(gG)),gG.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yG;function abe(){if(yG)return lL;yG=1;var r=vr,e=obe();function t(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var i=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=r.useRef,l=r.useEffect,u=r.useMemo,h=r.useDebugValue;return lL.useSyncExternalStoreWithSelector=function(p,m,_,v,E){var w=o(null);if(w.current===null){var x={hasValue:!1,value:null};w.current=x}else x=w.current;w=u(function(){function O(z){if(!k){if(k=!0,D=z,z=v(z),E!==void 0&&x.hasValue){var V=x.value;if(E(V,z))return N=V}return N=z}if(V=N,i(D,z))return V;var U=v(z);return E!==void 0&&E(V,U)?V:(D=z,N=U)}var k=!1,D,N,F=_===void 0?null:_;return[function(){return O(m())},F===null?void 0:function(){return O(F())}]},[m,_,v,E]);var A=s(p,w[0],w[1]);return l(function(){x.hasValue=!0,x.value=A},[A]),h(A),A},lL}(function(r){r.exports=abe()})(y7);const lbe=Lj(y7.exports),{useSyncExternalStoreWithSelector:ube}=lbe;function b7(r,e=r.getState,t){const i=ube(r.subscribe,r.getState,r.getServerState||r.getState,e,t);return de.useDebugValue(i),i}const bG=r=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof r=="function"?ibe(r):r,t=(i,s)=>b7(e,i,s);return Object.assign(t,e),t},cbe=r=>r?bG(r):bG,hbe=r=>(e,t,i)=>{const s=i.subscribe;return i.subscribe=(o,l,u)=>{let h=o;if(l){const p=(u==null?void 0:u.equalityFn)||Object.is;let m=o(i.getState());h=_=>{const v=o(_);if(!p(m,v)){const E=m;l(m=v,E)}},u!=null&&u.fireImmediately&&l(m,m)}return s(h)},r(e,t,i)},dbe=hbe;function tg(r){for(var e=arguments.length,t=Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+r+(t.length?" "+t.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function F1(r){return!!r&&!!r[Ef]}function sb(r){return!!r&&(function(e){if(!e||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;var i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===bbe}(r)||Array.isArray(r)||!!r[MG]||!!r.constructor[MG]||AP(r)||IP(r))}function tw(r,e,t){t===void 0&&(t=!1),rE(r)===0?(t?Object.keys:NP)(r).forEach(function(i){t&&typeof i=="symbol"||e(i,r[i],r)}):r.forEach(function(i,s){return e(s,i,r)})}function rE(r){var e=r[Ef];return e?e.i>3?e.i-4:e.i:Array.isArray(r)?1:AP(r)?2:IP(r)?3:0}function B2(r,e){return rE(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function pbe(r,e){return rE(r)===2?r.get(e):r[e]}function T7(r,e,t){var i=rE(r);i===2?r.set(e,t):i===3?(r.delete(e),r.add(t)):r[e]=t}function fbe(r,e){return r===e?r!==0||1/r==1/e:r!=r&&e!=e}function AP(r){return vbe&&r instanceof Map}function IP(r){return ybe&&r instanceof Set}function vy(r){return r.o||r.t}function RP(r){if(Array.isArray(r))return Array.prototype.slice.call(r);var e=Tbe(r);delete e[Ef];for(var t=NP(e),i=0;i<t.length;i++){var s=t[i],o=e[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:r[s]})}return Object.create(Object.getPrototypeOf(r),e)}function kP(r,e){return e===void 0&&(e=!1),OP(r)||F1(r)||!sb(r)||(rE(r)>1&&(r.set=r.add=r.clear=r.delete=mbe),Object.freeze(r),e&&tw(r,function(t,i){return kP(i,!0)},!0)),r}function mbe(){tg(2)}function OP(r){return r==null||typeof r!="object"||Object.isFrozen(r)}function Yg(r){var e=Ebe[r];return e||tg(18,r),e}function TG(){return nw}function cL(r,e){e&&(Yg("Patches"),r.u=[],r.s=[],r.v=e)}function IA(r){P2(r),r.p.forEach(gbe),r.p=null}function P2(r){r===nw&&(nw=r.l)}function EG(r){return nw={p:[],l:nw,h:r,m:!0,_:0}}function gbe(r){var e=r[Ef];e.i===0||e.i===1?e.j():e.O=!0}function hL(r,e){e._=e.p.length;var t=e.p[0],i=r!==void 0&&r!==t;return e.h.g||Yg("ES5").S(e,r,i),i?(t[Ef].P&&(IA(e),tg(4)),sb(r)&&(r=RA(e,r),e.l||kA(e,r)),e.u&&Yg("Patches").M(t[Ef].t,r,e.u,e.s)):r=RA(e,t,[]),IA(e),e.u&&e.v(e.u,e.s),r!==E7?r:void 0}function RA(r,e,t){if(OP(e))return e;var i=e[Ef];if(!i)return tw(e,function(o,l){return $G(r,i,e,o,l,t)},!0),e;if(i.A!==r)return e;if(!i.P)return kA(r,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var s=i.i===4||i.i===5?i.o=RP(i.k):i.o;tw(i.i===3?new Set(s):s,function(o,l){return $G(r,i,s,o,l,t)}),kA(r,s,!1),t&&r.u&&Yg("Patches").R(i,t,r.u,r.s)}return i.o}function $G(r,e,t,i,s,o){if(F1(s)){var l=RA(r,s,o&&e&&e.i!==3&&!B2(e.D,i)?o.concat(i):void 0);if(T7(t,i,l),!F1(l))return;r.m=!1}if(sb(s)&&!OP(s)){if(!r.h.F&&r._<1)return;RA(r,s),e&&e.A.l||kA(r,s)}}function kA(r,e,t){t===void 0&&(t=!1),r.h.F&&r.m&&kP(e,t)}function dL(r,e){var t=r[Ef];return(t?vy(t):r)[e]}function SG(r,e){if(e in r)for(var t=Object.getPrototypeOf(r);t;){var i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Object.getPrototypeOf(t)}}function F2(r){r.P||(r.P=!0,r.l&&F2(r.l))}function pL(r){r.o||(r.o=RP(r.t))}function U2(r,e,t){var i=AP(e)?Yg("MapSet").N(e,t):IP(e)?Yg("MapSet").T(e,t):r.g?function(s,o){var l=Array.isArray(s),u={i:l?1:0,A:o?o.A:TG(),P:!1,I:!1,D:{},l:o,t:s,k:null,o:null,j:null,C:!1},h=u,p=z2;l&&(h=[u],p=F$);var m=Proxy.revocable(h,p),_=m.revoke,v=m.proxy;return u.k=v,u.j=_,v}(e,t):Yg("ES5").J(e,t);return(t?t.A:TG()).p.push(i),i}function _be(r){return F1(r)||tg(22,r),function e(t){if(!sb(t))return t;var i,s=t[Ef],o=rE(t);if(s){if(!s.P&&(s.i<4||!Yg("ES5").K(s)))return s.t;s.I=!0,i=wG(t,o),s.I=!1}else i=wG(t,o);return tw(i,function(l,u){s&&pbe(s.t,l)===u||T7(i,l,e(u))}),o===3?new Set(i):i}(r)}function wG(r,e){switch(e){case 2:return new Map(r);case 3:return Array.from(r)}return RP(r)}var xG,nw,LP=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",vbe=typeof Map<"u",ybe=typeof Set<"u",CG=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",E7=LP?Symbol.for("immer-nothing"):((xG={})["immer-nothing"]=!0,xG),MG=LP?Symbol.for("immer-draftable"):"__$immer_draftable",Ef=LP?Symbol.for("immer-state"):"__$immer_state",bbe=""+Object.prototype.constructor,NP=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames,Tbe=Object.getOwnPropertyDescriptors||function(r){var e={};return NP(r).forEach(function(t){e[t]=Object.getOwnPropertyDescriptor(r,t)}),e},Ebe={},z2={get:function(r,e){if(e===Ef)return r;var t=vy(r);if(!B2(t,e))return function(s,o,l){var u,h=SG(o,l);return h?"value"in h?h.value:(u=h.get)===null||u===void 0?void 0:u.call(s.k):void 0}(r,t,e);var i=t[e];return r.I||!sb(i)?i:i===dL(r.t,e)?(pL(r),r.o[e]=U2(r.A.h,i,r)):i},has:function(r,e){return e in vy(r)},ownKeys:function(r){return Reflect.ownKeys(vy(r))},set:function(r,e,t){var i=SG(vy(r),e);if(i!=null&&i.set)return i.set.call(r.k,t),!0;if(!r.P){var s=dL(vy(r),e),o=s==null?void 0:s[Ef];if(o&&o.t===t)return r.o[e]=t,r.D[e]=!1,!0;if(fbe(t,s)&&(t!==void 0||B2(r.t,e)))return!0;pL(r),F2(r)}return r.o[e]===t&&typeof t!="number"&&(t!==void 0||e in r.o)||(r.o[e]=t,r.D[e]=!0,!0)},deleteProperty:function(r,e){return dL(r.t,e)!==void 0||e in r.t?(r.D[e]=!1,pL(r),F2(r)):delete r.D[e],r.o&&delete r.o[e],!0},getOwnPropertyDescriptor:function(r,e){var t=vy(r),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:r.i!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty:function(){tg(11)},getPrototypeOf:function(r){return Object.getPrototypeOf(r.t)},setPrototypeOf:function(){tg(12)}},F$={};tw(z2,function(r,e){F$[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),F$.deleteProperty=function(r,e){return F$.set.call(this,r,e,void 0)},F$.set=function(r,e,t){return z2.set.call(this,r[0],e,t,r[0])};var $be=function(){function r(t){var i=this;this.g=CG,this.F=!0,this.produce=function(s,o,l){if(typeof s=="function"&&typeof o!="function"){var u=o;o=s;var h=i;return function(x){var A=this;x===void 0&&(x=u);for(var O=arguments.length,k=Array(O>1?O-1:0),D=1;D<O;D++)k[D-1]=arguments[D];return h.produce(x,function(N){var F;return(F=o).call.apply(F,[A,N].concat(k))})}}var p;if(typeof o!="function"&&tg(6),l!==void 0&&typeof l!="function"&&tg(7),sb(s)){var m=EG(i),_=U2(i,s,void 0),v=!0;try{p=o(_),v=!1}finally{v?IA(m):P2(m)}return typeof Promise<"u"&&p instanceof Promise?p.then(function(x){return cL(m,l),hL(x,m)},function(x){throw IA(m),x}):(cL(m,l),hL(p,m))}if(!s||typeof s!="object"){if((p=o(s))===void 0&&(p=s),p===E7&&(p=void 0),i.F&&kP(p,!0),l){var E=[],w=[];Yg("Patches").M(s,p,E,w),l(E,w)}return p}tg(21,s)},this.produceWithPatches=function(s,o){if(typeof s=="function")return function(p){for(var m=arguments.length,_=Array(m>1?m-1:0),v=1;v<m;v++)_[v-1]=arguments[v];return i.produceWithPatches(p,function(E){return s.apply(void 0,[E].concat(_))})};var l,u,h=i.produce(s,o,function(p,m){l=p,u=m});return typeof Promise<"u"&&h instanceof Promise?h.then(function(p){return[p,l,u]}):[h,l,u]},typeof(t==null?void 0:t.useProxies)=="boolean"&&this.setUseProxies(t.useProxies),typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var e=r.prototype;return e.createDraft=function(t){sb(t)||tg(8),F1(t)&&(t=_be(t));var i=EG(this),s=U2(this,t,void 0);return s[Ef].C=!0,P2(i),s},e.finishDraft=function(t,i){var s=t&&t[Ef],o=s.A;return cL(o,i),hL(void 0,o)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!CG&&tg(20),this.g=t},e.applyPatches=function(t,i){var s;for(s=i.length-1;s>=0;s--){var o=i[s];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}s>-1&&(i=i.slice(s+1));var l=Yg("Patches").$;return F1(t)?l(t,i):this.produce(t,function(u){return l(u,i)})},r}(),$f=new $be,Sbe=$f.produce;$f.produceWithPatches.bind($f);$f.setAutoFreeze.bind($f);$f.setUseProxies.bind($f);$f.applyPatches.bind($f);$f.createDraft.bind($f);$f.finishDraft.bind($f);const wbe=r=>(e,t,i)=>(i.setState=(s,o,...l)=>{const u=typeof s=="function"?Sbe(s):s;return e(u,o,...l)},r(i.setState,t,i)),xbe=wbe;class Cbe{constructor(){this._previousTime=0,this._currentTime=0,this._delta=0,this._elapsed=0,this._timescale=1,this._useFixedDelta=!1,this._fixedDelta=16.67,this._usePageVisibilityAPI=typeof document<"u"&&document.hidden!==void 0,this._usePageVisibilityAPI===!0&&(this._pageVisibilityHandler=Mbe.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disableFixedDelta(){return this._useFixedDelta=!1,this}dispose(){return this._usePageVisibilityAPI===!0&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}enableFixedDelta(){return this._useFixedDelta=!0,this}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getFixedDelta(){return this._fixedDelta/1e3}getTimescale(){return this._timescale}reset(){return this._currentTime=this._now(),this}setFixedDelta(e){return this._fixedDelta=e*1e3,this}setTimescale(e){return this._timescale=e,this}update(){return this._useFixedDelta===!0?this._delta=this._fixedDelta:(this._previousTime=this._currentTime,this._currentTime=this._now(),this._delta=this._currentTime-this._previousTime),this._delta*=this._timescale,this._elapsed+=this._delta,this}_now(){return(typeof performance>"u"?Date:performance).now()}}function Mbe(){document.hidden===!1&&this.reset()}var sm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(r,e){(function(){var t,i="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",p=500,m="__lodash_placeholder__",_=1,v=2,E=4,w=1,x=2,A=1,O=2,k=4,D=8,N=16,F=32,z=64,V=128,U=256,ee=512,ne=30,ie="...",se=800,fe=16,ae=1,he=2,ge=3,Ie=1/0,j=9007199254740991,te=17976931348623157e292,q=NaN,le=4294967295,_e=le-1,Le=le>>>1,xe=[["ary",V],["bind",A],["bindKey",O],["curry",D],["curryRight",N],["flip",ee],["partial",F],["partialRight",z],["rearg",U]],Ve="[object Arguments]",Re="[object Array]",Ze="[object AsyncFunction]",et="[object Boolean]",ct="[object Date]",rt="[object DOMException]",Ne="[object Error]",we="[object Function]",ze="[object GeneratorFunction]",it="[object Map]",nt="[object Number]",Mt="[object Null]",At="[object Object]",ht="[object Promise]",Et="[object Proxy]",wt="[object RegExp]",pt="[object Set]",be="[object String]",Z="[object Symbol]",ke="[object Undefined]",lt="[object WeakMap]",mt="[object WeakSet]",xt="[object ArrayBuffer]",ut="[object DataView]",He="[object Float32Array]",Ce="[object Float64Array]",X="[object Int8Array]",J="[object Int16Array]",oe="[object Int32Array]",$e="[object Uint8Array]",Ge="[object Uint8ClampedArray]",Bt="[object Uint16Array]",Pe="[object Uint32Array]",Wt=/\b__p \+= '';/g,st=/\b(__p \+=) '' \+/g,Ut=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pt=/&(?:amp|lt|gt|quot|#39);/g,Tn=/[&<>"']/g,Mr=RegExp(Pt.source),nr=RegExp(Tn.source),ai=/<%-([\s\S]+?)%>/g,ar=/<%([\s\S]+?)%>/g,Qn=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,me=/^\w*$/,De=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qe=/[\\^$.*+?()[\]{}|]/g,It=RegExp(qe.source),qt=/^\s+/,gn=/\s/,Ae=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,bt=/,? & /,dt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dt=/[()=,{}\[\]\/\s]/,xn=/\\(\\)?/g,Bn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,er=/\w*$/,mr=/^[-+]0x[0-9a-f]+$/i,Qr=/^0b[01]+$/i,yr=/^\[object .+?Constructor\]$/,wr=/^0o[0-7]+$/i,Gi=/^(?:0|[1-9]\d*)$/,Fo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wo=/($^)/,nl=/['\n\r\u2028\u2029\\]/g,Yt="\\ud800-\\udfff",lr="\\u0300-\\u036f",oa="\\ufe20-\\ufe2f",Uo="\\u20d0-\\u20ff",hs=lr+oa+Uo,ds="\\u2700-\\u27bf",li="a-z\\xdf-\\xf6\\xf8-\\xff",ur="\\xac\\xb1\\xd7\\xf7",pn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ir="\\u2000-\\u206f",Tr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qn="A-Z\\xc0-\\xd6\\xd8-\\xde",ui="\\ufe0e\\ufe0f",Ji=ur+pn+ir+Tr,Gr="['’]",Di="["+Yt+"]",Ia="["+Ji+"]",rl="["+hs+"]",cc="\\d+",Uu="["+ds+"]",Cs="["+li+"]",xo="[^"+Yt+Ji+cc+ds+li+qn+"]",su="\\ud83c[\\udffb-\\udfff]",Ll="(?:"+rl+"|"+su+")",uh="[^"+Yt+"]",zo="(?:\\ud83c[\\udde6-\\uddff]){2}",Zn="[\\ud800-\\udbff][\\udc00-\\udfff]",Bi="["+qn+"]",Bc="\\u200d",ch="(?:"+Cs+"|"+xo+")",hc="(?:"+Bi+"|"+xo+")",il="(?:"+Gr+"(?:d|ll|m|re|s|t|ve))?",ou="(?:"+Gr+"(?:D|LL|M|RE|S|T|VE))?",sl=Ll+"?",ol="["+ui+"]?",Yn="(?:"+Bc+"(?:"+[uh,zo,Zn].join("|")+")"+ol+sl+")*",Kn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",al="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ra=ol+sl+Yn,aa="(?:"+[Uu,zo,Zn].join("|")+")"+Ra,Nl="(?:"+[uh+rl+"?",rl,zo,Zn,Di].join("|")+")",bi=RegExp(Gr,"g"),Pi=RegExp(rl,"g"),ll=RegExp(su+"(?="+su+")|"+Nl+Ra,"g"),wd=RegExp([Bi+"?"+Cs+"+"+il+"(?="+[Ia,Bi,"$"].join("|")+")",hc+"+"+ou+"(?="+[Ia,Bi+ch,"$"].join("|")+")",Bi+"?"+ch+"+"+il,Bi+"+"+ou,al,Kn,cc,aa].join("|"),"g"),Ms=RegExp("["+Bc+Yt+hs+ui+"]"),au=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Co=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Dl=-1,Wr={};Wr[He]=Wr[Ce]=Wr[X]=Wr[J]=Wr[oe]=Wr[$e]=Wr[Ge]=Wr[Bt]=Wr[Pe]=!0,Wr[Ve]=Wr[Re]=Wr[xt]=Wr[et]=Wr[ut]=Wr[ct]=Wr[Ne]=Wr[we]=Wr[it]=Wr[nt]=Wr[At]=Wr[wt]=Wr[pt]=Wr[be]=Wr[lt]=!1;var cr={};cr[Ve]=cr[Re]=cr[xt]=cr[ut]=cr[et]=cr[ct]=cr[He]=cr[Ce]=cr[X]=cr[J]=cr[oe]=cr[it]=cr[nt]=cr[At]=cr[wt]=cr[pt]=cr[be]=cr[Z]=cr[$e]=cr[Ge]=cr[Bt]=cr[Pe]=!0,cr[Ne]=cr[we]=cr[lt]=!1;var Wi={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},As={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},lu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Bl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Pc=parseFloat,Ho=parseInt,Go=typeof B_=="object"&&B_&&B_.Object===Object&&B_,uu=typeof self=="object"&&self&&self.Object===Object&&self,Vr=Go||uu||Function("return this")(),ps=e&&!e.nodeType&&e,Ci=ps&&!0&&r&&!r.nodeType&&r,qr=Ci&&Ci.exports===ps,la=qr&&Go.process,Fi=function(){try{var je=Ci&&Ci.require&&Ci.require("util").types;return je||la&&la.binding&&la.binding("util")}catch{}}(),cu=Fi&&Fi.isArrayBuffer,qs=Fi&&Fi.isDate,hu=Fi&&Fi.isMap,ka=Fi&&Fi.isRegExp,ci=Fi&&Fi.isSet,Zr=Fi&&Fi.isTypedArray;function Un(je,Rt,yt){switch(yt.length){case 0:return je.call(Rt);case 1:return je.call(Rt,yt[0]);case 2:return je.call(Rt,yt[0],yt[1]);case 3:return je.call(Rt,yt[0],yt[1],yt[2])}return je.apply(Rt,yt)}function jr(je,Rt,yt,mn){for(var Nn=-1,Jn=je==null?0:je.length;++Nn<Jn;){var tr=je[Nn];Rt(mn,tr,yt(tr),je)}return mn}function Ti(je,Rt){for(var yt=-1,mn=je==null?0:je.length;++yt<mn&&Rt(je[yt],yt,je)!==!1;);return je}function Uh(je,Rt){for(var yt=je==null?0:je.length;yt--&&Rt(je[yt],yt,je)!==!1;);return je}function du(je,Rt){for(var yt=-1,mn=je==null?0:je.length;++yt<mn;)if(!Rt(je[yt],yt,je))return!1;return!0}function fs(je,Rt){for(var yt=-1,mn=je==null?0:je.length,Nn=0,Jn=[];++yt<mn;){var tr=je[yt];Rt(tr,yt,je)&&(Jn[Nn++]=tr)}return Jn}function ul(je,Rt){var yt=je==null?0:je.length;return!!yt&&Zs(je,Rt,0)>-1}function zh(je,Rt,yt){for(var mn=-1,Nn=je==null?0:je.length;++mn<Nn;)if(yt(Rt,je[mn]))return!0;return!1}function hi(je,Rt){for(var yt=-1,mn=je==null?0:je.length,Nn=Array(mn);++yt<mn;)Nn[yt]=Rt(je[yt],yt,je);return Nn}function pu(je,Rt){for(var yt=-1,mn=Rt.length,Nn=je.length;++yt<mn;)je[Nn+yt]=Rt[yt];return je}function sp(je,Rt,yt,mn){var Nn=-1,Jn=je==null?0:je.length;for(mn&&Jn&&(yt=je[++Nn]);++Nn<Jn;)yt=Rt(yt,je[Nn],Nn,je);return yt}function op(je,Rt,yt,mn){var Nn=je==null?0:je.length;for(mn&&Nn&&(yt=je[--Nn]);Nn--;)yt=Rt(yt,je[Nn],Nn,je);return yt}function hh(je,Rt){for(var yt=-1,mn=je==null?0:je.length;++yt<mn;)if(Rt(je[yt],yt,je))return!0;return!1}var ap=Ur("length");function Bp(je){return je.split("")}function Rf(je){return je.match(dt)||[]}function lp(je,Rt,yt){var mn;return yt(je,function(Nn,Jn,tr){if(Rt(Nn,Jn,tr))return mn=Jn,!1}),mn}function zu(je,Rt,yt,mn){for(var Nn=je.length,Jn=yt+(mn?1:-1);mn?Jn--:++Jn<Nn;)if(Rt(je[Jn],Jn,je))return Jn;return-1}function Zs(je,Rt,yt){return Rt===Rt?fc(je,Rt,yt):zu(je,dh,yt)}function fu(je,Rt,yt,mn){for(var Nn=yt-1,Jn=je.length;++Nn<Jn;)if(mn(je[Nn],Rt))return Nn;return-1}function dh(je){return je!==je}function ua(je,Rt){var yt=je==null?0:je.length;return yt?Mo(je,Rt)/yt:q}function Ur(je){return function(Rt){return Rt==null?t:Rt[je]}}function sr(je){return function(Rt){return je==null?t:je[Rt]}}function Us(je,Rt,yt,mn,Nn){return Nn(je,function(Jn,tr,An){yt=mn?(mn=!1,Jn):Rt(yt,Jn,tr,An)}),yt}function Wo(je,Rt){var yt=je.length;for(je.sort(Rt);yt--;)je[yt]=je[yt].value;return je}function Mo(je,Rt){for(var yt,mn=-1,Nn=je.length;++mn<Nn;){var Jn=Rt(je[mn]);Jn!==t&&(yt=yt===t?Jn:yt+Jn)}return yt}function mu(je,Rt){for(var yt=-1,mn=Array(je);++yt<je;)mn[yt]=Rt(yt);return mn}function cl(je,Rt){return hi(Rt,function(yt){return[yt,je[yt]]})}function Hh(je){return je&&je.slice(0,hl(je)+1).replace(qt,"")}function Ei(je){return function(Rt){return je(Rt)}}function di(je,Rt){return hi(Rt,function(yt){return je[yt]})}function or(je,Rt){return je.has(Rt)}function $i(je,Rt){for(var yt=-1,mn=je.length;++yt<mn&&Zs(Rt,je[yt],0)>-1;);return yt}function Vo(je,Rt){for(var yt=je.length;yt--&&Zs(Rt,je[yt],0)>-1;);return yt}function Pl(je,Rt){for(var yt=je.length,mn=0;yt--;)je[yt]===Rt&&++mn;return mn}var up=sr(Wi),cp=sr(As);function Gh(je){return"\\"+Bl[je]}function gu(je,Rt){return je==null?t:je[Rt]}function Hu(je){return Ms.test(je)}function dc(je){return au.test(je)}function ph(je){for(var Rt,yt=[];!(Rt=je.next()).done;)yt.push(Rt.value);return yt}function pc(je){var Rt=-1,yt=Array(je.size);return je.forEach(function(mn,Nn){yt[++Rt]=[Nn,mn]}),yt}function Fl(je,Rt){return function(yt){return je(Rt(yt))}}function jo(je,Rt){for(var yt=-1,mn=je.length,Nn=0,Jn=[];++yt<mn;){var tr=je[yt];(tr===Rt||tr===m)&&(je[yt]=m,Jn[Nn++]=yt)}return Jn}function Gu(je){var Rt=-1,yt=Array(je.size);return je.forEach(function(mn){yt[++Rt]=mn}),yt}function fh(je){var Rt=-1,yt=Array(je.size);return je.forEach(function(mn){yt[++Rt]=[mn,mn]}),yt}function fc(je,Rt,yt){for(var mn=yt-1,Nn=je.length;++mn<Nn;)if(je[mn]===Rt)return mn;return-1}function mc(je,Rt,yt){for(var mn=yt+1;mn--;)if(je[mn]===Rt)return mn;return mn}function ms(je){return Hu(je)?dl(je):ap(je)}function Xr(je){return Hu(je)?Ul(je):Bp(je)}function hl(je){for(var Rt=je.length;Rt--&&gn.test(je.charAt(Rt)););return Rt}var Xo=sr(lu);function dl(je){for(var Rt=ll.lastIndex=0;ll.test(je);)++Rt;return Rt}function Ul(je){return je.match(ll)||[]}function Fc(je){return je.match(wd)||[]}var xd=function je(Rt){Rt=Rt==null?Vr:pi.defaults(Vr.Object(),Rt,pi.pick(Vr,Co));var yt=Rt.Array,mn=Rt.Date,Nn=Rt.Error,Jn=Rt.Function,tr=Rt.Math,An=Rt.Object,xr=Rt.RegExp,Is=Rt.String,gs=Rt.TypeError,po=yt.prototype,ca=Jn.prototype,Vi=An.prototype,ss=Rt["__core-js_shared__"],gc=ca.toString,Lr=Vi.hasOwnProperty,Ao=0,Rs=function(){var T=/[^.]+$/.exec(ss&&ss.keys&&ss.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}(),zs=Vi.toString,Yo=gc.call(An),mh=Vr._,Uc=xr("^"+gc.call(Lr).replace(qe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gh=qr?Rt.Buffer:t,_u=Rt.Symbol,Wh=Rt.Uint8Array,Vh=gh?gh.allocUnsafe:t,pl=Fl(An.getPrototypeOf,An),jh=An.create,_c=Vi.propertyIsEnumerable,zc=po.splice,Cd=_u?_u.isConcatSpreadable:t,Oa=_u?_u.iterator:t,ha=_u?_u.toStringTag:t,vu=function(){try{var T=Ru(An,"defineProperty");return T({},"",{}),T}catch{}}(),_h=Rt.clearTimeout!==Vr.clearTimeout&&Rt.clearTimeout,ei=mn&&mn.now!==Vr.Date.now&&mn.now,Xh=Rt.setTimeout!==Vr.setTimeout&&Rt.setTimeout,Hc=tr.ceil,Wu=tr.floor,vh=An.getOwnPropertySymbols,Md=gh?gh.isBuffer:t,fl=Rt.isFinite,Ad=po.join,yh=Fl(An.keys,An),eo=tr.max,Ko=tr.min,kf=mn.now,Pp=Rt.parseInt,ml=tr.random,gl=po.reverse,vc=Ru(Rt,"DataView"),bh=Ru(Rt,"Map"),Yh=Ru(Rt,"Promise"),Vu=Ru(Rt,"Set"),La=Ru(Rt,"WeakMap"),ju=Ru(An,"create"),Kh=La&&new La,yc={},bc=tc(vc),Xu=tc(bh),Id=tc(Yh),Jo=tc(Vu),Er=tc(La),zl=_u?_u.prototype:t,Qi=zl?zl.valueOf:t,Qo=zl?zl.toString:t;function ve(T){if(Ya(T)&&!Dr(T)&&!(T instanceof zn)){if(T instanceof Br)return T;if(Lr.call(T,"__wrapped__"))return pp(T)}return new Br(T)}var Hs=function(){function T(){}return function(C){if(!wa(C))return{};if(jh)return jh(C);T.prototype=C;var P=new T;return T.prototype=t,P}}();function Na(){}function Br(T,C){this.__wrapped__=T,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=t}ve.templateSettings={escape:ai,evaluate:ar,interpolate:Qn,variable:"",imports:{_:ve}},ve.prototype=Na.prototype,ve.prototype.constructor=ve,Br.prototype=Hs(Na.prototype),Br.prototype.constructor=Br;function zn(T){this.__wrapped__=T,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=le,this.__views__=[]}function Fp(){var T=new zn(this.__wrapped__);return T.__actions__=ts(this.__actions__),T.__dir__=this.__dir__,T.__filtered__=this.__filtered__,T.__iteratees__=ts(this.__iteratees__),T.__takeCount__=this.__takeCount__,T.__views__=ts(this.__views__),T}function da(){if(this.__filtered__){var T=new zn(this);T.__dir__=-1,T.__filtered__=!0}else T=this.clone(),T.__dir__*=-1;return T}function Yr(){var T=this.__wrapped__.value(),C=this.__dir__,P=Dr(T),Y=C<0,ue=P?T.length:0,ye=tn(0,ue,this.__views__),Ue=ye.start,Ye=ye.end,ot=Ye-Ue,Ht=Y?Ye:Ue-1,Gt=this.__iteratees__,Qt=Gt.length,yn=0,Rn=Ko(ot,this.__takeCount__);if(!P||!Y&&ue==ot&&Rn==ot)return Kc(T,this.__actions__);var pr=[];e:for(;ot--&&yn<Rn;){Ht+=C;for(var Or=-1,rr=T[Ht];++Or<Qt;){var si=Gt[Or],_i=si.iteratee,ud=si.type,nh=_i(rr);if(ud==he)rr=nh;else if(!nh){if(ud==ae)continue e;break e}}pr[yn++]=rr}return pr}zn.prototype=Hs(Na.prototype),zn.prototype.constructor=zn;function fi(T){var C=-1,P=T==null?0:T.length;for(this.clear();++C<P;){var Y=T[C];this.set(Y[0],Y[1])}}function Si(){this.__data__=ju?ju(null):{},this.size=0}function Mi(T){var C=this.has(T)&&delete this.__data__[T];return this.size-=C?1:0,C}function Tc(T){var C=this.__data__;if(ju){var P=C[T];return P===h?t:P}return Lr.call(C,T)?C[T]:t}function Io(T){var C=this.__data__;return ju?C[T]!==t:Lr.call(C,T)}function Ro(T,C){var P=this.__data__;return this.size+=this.has(T)?0:1,P[T]=ju&&C===t?h:C,this}fi.prototype.clear=Si,fi.prototype.delete=Mi,fi.prototype.get=Tc,fi.prototype.has=Io,fi.prototype.set=Ro;function to(T){var C=-1,P=T==null?0:T.length;for(this.clear();++C<P;){var Y=T[C];this.set(Y[0],Y[1])}}function Ec(){this.__data__=[],this.size=0}function fo(T){var C=this.__data__,P=as(C,T);if(P<0)return!1;var Y=C.length-1;return P==Y?C.pop():zc.call(C,P,1),--this.size,!0}function Rd(T){var C=this.__data__,P=as(C,T);return P<0?t:C[P][1]}function kd(T){return as(this.__data__,T)>-1}function Th(T,C){var P=this.__data__,Y=as(P,T);return Y<0?(++this.size,P.push([T,C])):P[Y][1]=C,this}to.prototype.clear=Ec,to.prototype.delete=fo,to.prototype.get=Rd,to.prototype.has=kd,to.prototype.set=Th;function pa(T){var C=-1,P=T==null?0:T.length;for(this.clear();++C<P;){var Y=T[C];this.set(Y[0],Y[1])}}function Cn(){this.size=0,this.__data__={hash:new fi,map:new(bh||to),string:new fi}}function os(T){var C=nd(this,T).delete(T);return this.size-=C?1:0,C}function _s(T){return nd(this,T).get(T)}function ti(T){return nd(this,T).has(T)}function _l(T,C){var P=nd(this,T),Y=P.size;return P.set(T,C),this.size+=P.size==Y?0:1,this}pa.prototype.clear=Cn,pa.prototype.delete=os,pa.prototype.get=_s,pa.prototype.has=ti,pa.prototype.set=_l;function vl(T){var C=-1,P=T==null?0:T.length;for(this.__data__=new pa;++C<P;)this.add(T[C])}function cn(T){return this.__data__.set(T,h),this}function Pr(T){return this.__data__.has(T)}vl.prototype.add=vl.prototype.push=cn,vl.prototype.has=Pr;function qi(T){var C=this.__data__=new to(T);this.size=C.size}function Up(){this.__data__=new to,this.size=0}function Gc(T){var C=this.__data__,P=C.delete(T);return this.size=C.size,P}function ks(T){return this.__data__.get(T)}function ko(T){return this.__data__.has(T)}function dn(T,C){var P=this.__data__;if(P instanceof to){var Y=P.__data__;if(!bh||Y.length<s-1)return Y.push([T,C]),this.size=++P.size,this;P=this.__data__=new pa(Y)}return P.set(T,C),this.size=P.size,this}qi.prototype.clear=Up,qi.prototype.delete=Gc,qi.prototype.get=ks,qi.prototype.has=ko,qi.prototype.set=dn;function rn(T,C){var P=Dr(T),Y=!P&&p_(T),ue=!P&&!Y&&Hf(T),ye=!P&&!Y&&!ue&&xg(T),Ue=P||Y||ue||ye,Ye=Ue?mu(T.length,Is):[],ot=Ye.length;for(var Ht in T)(C||Lr.call(T,Ht))&&!(Ue&&(Ht=="length"||ue&&(Ht=="offset"||Ht=="parent")||ye&&(Ht=="buffer"||Ht=="byteLength"||Ht=="byteOffset")||eh(Ht,ot)))&&Ye.push(Ht);return Ye}function Da(T){var C=T.length;return C?T[ys(0,C-1)]:t}function Yu(T,C){return Xn(ts(T),Ku(C,0,T.length))}function Of(T){return Xn(ts(T))}function yu(T,C,P){(P!==t&&!Ch(T[C],P)||P===t&&!(C in T))&&bu(T,C,P)}function qo(T,C,P){var Y=T[C];(!(Lr.call(T,C)&&Ch(Y,P))||P===t&&!(C in T))&&bu(T,C,P)}function as(T,C){for(var P=T.length;P--;)if(Ch(T[P][0],C))return P;return-1}function fa(T,C,P,Y){return yl(T,function(ue,ye,Ue){C(Y,ue,P(ue),Ue)}),Y}function Ui(T,C){return T&&yo(C,na(C),T)}function ma(T,C){return T&&yo(C,xa(C),T)}function bu(T,C,P){C=="__proto__"&&vu?vu(T,C,{configurable:!0,enumerable:!0,value:P,writable:!0}):T[C]=P}function Od(T,C){for(var P=-1,Y=C.length,ue=yt(Y),ye=T==null;++P<Y;)ue[P]=ye?t:f_(T,C[P]);return ue}function Ku(T,C,P){return T===T&&(P!==t&&(T=T<=P?T:P),C!==t&&(T=T>=C?T:C)),T}function Gs(T,C,P,Y,ue,ye){var Ue,Ye=C&_,ot=C&v,Ht=C&E;if(P&&(Ue=ue?P(T,Y,ue,ye):P(T)),Ue!==t)return Ue;if(!wa(T))return T;var Gt=Dr(T);if(Gt){if(Ue=mg(T),!Ye)return ts(T,Ue)}else{var Qt=Yl(T),yn=Qt==we||Qt==ze;if(Hf(T))return qc(T,Ye);if(Qt==At||Qt==Ve||yn&&!ue){if(Ue=ot||yn?{}:Cc(T),!Ye)return ot?ed(T,ma(Ue,T)):Sh(T,Ui(Ue,T))}else{if(!cr[Qt])return ue?T:{};Ue=Ts(T,Qt,Ye)}}ye||(ye=new qi);var Rn=ye.get(T);if(Rn)return Rn;ye.set(T,Ue),wb(T)?T.forEach(function(rr){Ue.add(Gs(rr,C,P,rr,T,ye))}):od(T)&&T.forEach(function(rr,si){Ue.set(si,Gs(rr,C,P,si,T,ye))});var pr=Ht?ot?hr:Wn:ot?xa:na,Or=Gt?t:pr(T);return Ti(Or||T,function(rr,si){Or&&(si=rr,rr=T[si]),qo(Ue,si,Gs(rr,C,P,si,T,ye))}),Ue}function Ld(T){var C=na(T);return function(P){return Wc(P,T,C)}}function Wc(T,C,P){var Y=P.length;if(T==null)return!Y;for(T=An(T);Y--;){var ue=P[Y],ye=C[ue],Ue=T[ue];if(Ue===t&&!(ue in T)||!ye(Ue))return!1}return!0}function Jh(T,C,P){if(typeof T!="function")throw new gs(l);return vg(function(){T.apply(t,P)},C)}function ga(T,C,P,Y){var ue=-1,ye=ul,Ue=!0,Ye=T.length,ot=[],Ht=C.length;if(!Ye)return ot;P&&(C=hi(C,Ei(P))),Y?(ye=zh,Ue=!1):C.length>=s&&(ye=or,Ue=!1,C=new vl(C));e:for(;++ue<Ye;){var Gt=T[ue],Qt=P==null?Gt:P(Gt);if(Gt=Y||Gt!==0?Gt:0,Ue&&Qt===Qt){for(var yn=Ht;yn--;)if(C[yn]===Qt)continue e;ot.push(Gt)}else ye(C,Qt,Y)||ot.push(Gt)}return ot}var yl=td(mo),zp=td(Ba,!0);function Hl(T,C){var P=!0;return yl(T,function(Y,ue,ye){return P=!!C(Y,ue,ye),P}),P}function Tu(T,C,P){for(var Y=-1,ue=T.length;++Y<ue;){var ye=T[Y],Ue=C(ye);if(Ue!=null&&(Ye===t?Ue===Ue&&!ad(Ue):P(Ue,Ye)))var Ye=Ue,ot=ye}return ot}function Qh(T,C,P,Y){var ue=T.length;for(P=$r(P),P<0&&(P=-P>ue?0:ue+P),Y=Y===t||Y>ue?ue:$r(Y),Y<0&&(Y+=ue),Y=P>Y?0:Lv(Y);P<Y;)T[P++]=C;return T}function $c(T,C){var P=[];return yl(T,function(Y,ue,ye){C(Y,ue,ye)&&P.push(Y)}),P}function ls(T,C,P,Y,ue){var ye=-1,Ue=T.length;for(P||(P=Nd),ue||(ue=[]);++ye<Ue;){var Ye=T[ye];C>0&&P(Ye)?C>1?ls(Ye,C-1,P,Y,ue):pu(ue,Ye):Y||(ue[ue.length]=Ye)}return ue}var Eu=xc(),Ju=xc(!0);function mo(T,C){return T&&Eu(T,C,na)}function Ba(T,C){return T&&Ju(T,C,na)}function vs(T,C){return fs(C,function(P){return Gf(T[P])})}function no(T,C){C=Mu(C,T);for(var P=0,Y=C.length;T!=null&&P<Y;)T=T[Kl(C[P++])];return P&&P==Y?T:t}function Vc(T,C,P){var Y=C(T);return Dr(T)?Y:pu(Y,P(T))}function Ws(T){return T==null?T===t?ke:Mt:ha&&ha in An(T)?ba(T):i_(T)}function Pa(T,C){return T>C}function Qu(T,C){return T!=null&&Lr.call(T,C)}function hp(T,C){return T!=null&&C in An(T)}function jc(T,C,P){return T>=Ko(C,P)&&T<eo(C,P)}function Zo(T,C,P){for(var Y=P?zh:ul,ue=T[0].length,ye=T.length,Ue=ye,Ye=yt(ye),ot=1/0,Ht=[];Ue--;){var Gt=T[Ue];Ue&&C&&(Gt=hi(Gt,Ei(C))),ot=Ko(Gt.length,ot),Ye[Ue]=!P&&(C||ue>=120&&Gt.length>=120)?new vl(Ue&&Gt):t}Gt=T[0];var Qt=-1,yn=Ye[0];e:for(;++Qt<ue&&Ht.length<ot;){var Rn=Gt[Qt],pr=C?C(Rn):Rn;if(Rn=P||Rn!==0?Rn:0,!(yn?or(yn,pr):Y(Ht,pr,P))){for(Ue=ye;--Ue;){var Or=Ye[Ue];if(!(Or?or(Or,pr):Y(T[Ue],pr,P)))continue e}yn&&yn.push(pr),Ht.push(Rn)}}return Ht}function mi(T,C,P,Y){return mo(T,function(ue,ye,Ue){C(Y,P(ue),ye,Ue)}),Y}function wn(T,C,P){C=Mu(C,T),T=bm(T,C);var Y=T==null?T:T[Kl(Sl(C))];return Y==null?t:Un(Y,T,P)}function On(T){return Ya(T)&&Ws(T)==Ve}function gr(T){return Ya(T)&&Ws(T)==xt}function Ir(T){return Ya(T)&&Ws(T)==ct}function Fr(T,C,P,Y,ue){return T===C?!0:T==null||C==null||!Ya(T)&&!Ya(C)?T!==T&&C!==C:Vs(T,C,P,Y,Fr,ue)}function Vs(T,C,P,Y,ue,ye){var Ue=Dr(T),Ye=Dr(C),ot=Ue?Re:Yl(T),Ht=Ye?Re:Yl(C);ot=ot==Ve?At:ot,Ht=Ht==Ve?At:Ht;var Gt=ot==At,Qt=Ht==At,yn=ot==Ht;if(yn&&Hf(T)){if(!Hf(C))return!1;Ue=!0,Gt=!1}if(yn&&!Gt)return ye||(ye=new qi),Ue||xg(T)?Kt(T,C,P,Y,ue,ye):ln(T,C,ot,P,Y,ue,ye);if(!(P&w)){var Rn=Gt&&Lr.call(T,"__wrapped__"),pr=Qt&&Lr.call(C,"__wrapped__");if(Rn||pr){var Or=Rn?T.value():T,rr=pr?C.value():C;return ye||(ye=new qi),ue(Or,rr,P,Y,ye)}}return yn?(ye||(ye=new qi),fn(T,C,P,Y,ue,ye)):!1}function Ai(T){return Ya(T)&&Yl(T)==it}function zi(T,C,P,Y){var ue=P.length,ye=ue,Ue=!Y;if(T==null)return!ye;for(T=An(T);ue--;){var Ye=P[ue];if(Ue&&Ye[2]?Ye[1]!==T[Ye[0]]:!(Ye[0]in T))return!1}for(;++ue<ye;){Ye=P[ue];var ot=Ye[0],Ht=T[ot],Gt=Ye[1];if(Ue&&Ye[2]){if(Ht===t&&!(ot in T))return!1}else{var Qt=new qi;if(Y)var yn=Y(Ht,Gt,ot,T,C,Qt);if(!(yn===t?Fr(Gt,Ht,w|x,Y,Qt):yn))return!1}}return!0}function Gl(T){if(!wa(T)||Es(T))return!1;var C=Gf(T)?Uc:yr;return C.test(tc(T))}function $u(T){return Ya(T)&&Ws(T)==wt}function qu(T){return Ya(T)&&Yl(T)==pt}function Su(T){return Ya(T)&&Ud(T.length)&&!!Wr[Ws(T)]}function Os(T){return typeof T=="function"?T:T==null?Ih:typeof T=="object"?Dr(T)?js(T[0],T[1]):xu(T):Db(T)}function ro(T){if(!id(T))return yh(T);var C=[];for(var P in An(T))Lr.call(T,P)&&P!="constructor"&&C.push(P);return C}function qh(T){if(!wa(T))return Oo(T);var C=id(T),P=[];for(var Y in T)Y=="constructor"&&(C||!Lr.call(T,Y))||P.push(Y);return P}function _a(T,C){return T<C}function wu(T,C){var P=-1,Y=Lo(T)?yt(T.length):[];return yl(T,function(ue,ye,Ue){Y[++P]=C(ue,ye,Ue)}),Y}function xu(T){var C=r_(T);return C.length==1&&C[0][2]?gg(C[0][0],C[0][1]):function(P){return P===T||zi(P,T,C)}}function js(T,C){return Ta(T)&&ym(C)?gg(Kl(T),C):function(P){var Y=f_(P,T);return Y===t&&Y===C?m_(P,T):Fr(C,Y,w|x)}}function go(T,C,P,Y,ue){T!==C&&Eu(C,function(ye,Ue){if(ue||(ue=new qi),wa(ye))Fa(T,C,Ue,P,go,Y,ue);else{var Ye=Y?Y(ku(T,Ue),ye,Ue+"",T,C,ue):t;Ye===t&&(Ye=ye),yu(T,Ue,Ye)}},xa)}function Fa(T,C,P,Y,ue,ye,Ue){var Ye=ku(T,P),ot=ku(C,P),Ht=Ue.get(ot);if(Ht){yu(T,P,Ht);return}var Gt=ye?ye(Ye,ot,P+"",T,C,Ue):t,Qt=Gt===t;if(Qt){var yn=Dr(ot),Rn=!yn&&Hf(ot),pr=!yn&&!Rn&&xg(ot);Gt=ot,yn||Rn||pr?Dr(Ye)?Gt=Ye:oo(Ye)?Gt=ts(Ye):Rn?(Qt=!1,Gt=qc(ot,!0)):pr?(Qt=!1,Gt=Tl(ot,!0)):Gt=[]:kr(ot)||p_(ot)?(Gt=Ye,p_(Ye)?Gt=Nw(Ye):(!wa(Ye)||Gf(Ye))&&(Gt=Cc(ot))):Qt=!1}Qt&&(Ue.set(ot,Gt),ue(Gt,ot,Y,ye,Ue),Ue.delete(ot)),yu(T,P,Gt)}function _o(T,C){var P=T.length;if(P)return C+=C<0?P:0,eh(C,P)?T[C]:t}function Zu(T,C,P){C.length?C=hi(C,function(ye){return Dr(ye)?function(Ue){return no(Ue,ye.length===1?ye[0]:ye)}:ye}):C=[Ih];var Y=-1;C=hi(C,Ei(jn()));var ue=wu(T,function(ye,Ue,Ye){var ot=hi(C,function(Ht){return Ht(ye)});return{criteria:ot,index:++Y,value:ye}});return Wo(ue,function(ye,Ue){return Ha(ye,Ue,P)})}function Cu(T,C){return Eh(T,C,function(P,Y){return m_(T,Y)})}function Eh(T,C,P){for(var Y=-1,ue=C.length,ye={};++Y<ue;){var Ue=C[Y],Ye=no(T,Ue);P(Ye,Ue)&&ni(ye,Mu(Ue,T),Ye)}return ye}function Xc(T){return function(C){return no(C,T)}}function br(T,C,P,Y){var ue=Y?fu:Zs,ye=-1,Ue=C.length,Ye=T;for(T===C&&(C=ts(C)),P&&(Ye=hi(T,Ei(P)));++ye<Ue;)for(var ot=0,Ht=C[ye],Gt=P?P(Ht):Ht;(ot=ue(Ye,Gt,ot,Y))>-1;)Ye!==T&&zc.call(Ye,ot,1),zc.call(T,ot,1);return T}function ji(T,C){for(var P=T?C.length:0,Y=P-1;P--;){var ue=C[P];if(P==Y||ue!==ye){var ye=ue;eh(ue)?zc.call(T,ue,1):$h(T,ue)}}return T}function ys(T,C){return T+Wu(ml()*(C-T+1))}function ea(T,C,P,Y){for(var ue=-1,ye=eo(Hc((C-T)/(P||1)),0),Ue=yt(ye);ye--;)Ue[Y?ye:++ue]=T,T+=P;return Ue}function Ls(T,C){var P="";if(!T||C<1||C>j)return P;do C%2&&(P+=T),C=Wu(C/2),C&&(T+=T);while(C);return P}function Gn(T,C){return Vp(_g(T,C,Ih),T+"")}function Sc(T){return Da(__(T))}function on(T,C){var P=__(T);return Xn(P,Ku(C,0,P.length))}function ni(T,C,P,Y){if(!wa(T))return T;C=Mu(C,T);for(var ue=-1,ye=C.length,Ue=ye-1,Ye=T;Ye!=null&&++ue<ye;){var ot=Kl(C[ue]),Ht=P;if(ot==="__proto__"||ot==="constructor"||ot==="prototype")return T;if(ue!=Ue){var Gt=Ye[ot];Ht=Y?Y(Gt,ot,Ye):t,Ht===t&&(Ht=wa(Gt)?Gt:eh(C[ue+1])?[]:{})}qo(Ye,ot,Ht),Ye=Ye[ot]}return T}var Zi=Kh?function(T,C){return Kh.set(T,C),T}:Ih,bl=vu?function(T,C){return vu(T,"toString",{configurable:!0,enumerable:!1,value:CE(C),writable:!0})}:Ih;function Ua(T){return Xn(__(T))}function Lt(T,C,P){var Y=-1,ue=T.length;C<0&&(C=-C>ue?0:ue+C),P=P>ue?ue:P,P<0&&(P+=ue),ue=C>P?0:P-C>>>0,C>>>=0;for(var ye=yt(ue);++Y<ue;)ye[Y]=T[Y+C];return ye}function va(T,C){var P;return yl(T,function(Y,ue,ye){return P=C(Y,ue,ye),!P}),!!P}function Rr(T,C,P){var Y=0,ue=T==null?Y:T.length;if(typeof C=="number"&&C===C&&ue<=Le){for(;Y<ue;){var ye=Y+ue>>>1,Ue=T[ye];Ue!==null&&!ad(Ue)&&(P?Ue<=C:Ue<C)?Y=ye+1:ue=ye}return ue}return wc(T,C,Ih,P)}function wc(T,C,P,Y){var ue=0,ye=T==null?0:T.length;if(ye===0)return 0;C=P(C);for(var Ue=C!==C,Ye=C===null,ot=ad(C),Ht=C===t;ue<ye;){var Gt=Wu((ue+ye)/2),Qt=P(T[Gt]),yn=Qt!==t,Rn=Qt===null,pr=Qt===Qt,Or=ad(Qt);if(Ue)var rr=Y||pr;else Ht?rr=pr&&(Y||yn):Ye?rr=pr&&yn&&(Y||!Rn):ot?rr=pr&&yn&&!Rn&&(Y||!Or):Rn||Or?rr=!1:rr=Y?Qt<=C:Qt<C;rr?ue=Gt+1:ye=Gt}return Ko(ye,_e)}function Zh(T,C){for(var P=-1,Y=T.length,ue=0,ye=[];++P<Y;){var Ue=T[P],Ye=C?C(Ue):Ue;if(!P||!Ch(Ye,ot)){var ot=Ye;ye[ue++]=Ue===0?0:Ue}}return ye}function Yc(T){return typeof T=="number"?T:ad(T)?q:+T}function es(T){if(typeof T=="string")return T;if(Dr(T))return hi(T,es)+"";if(ad(T))return Qo?Qo.call(T):"";var C=T+"";return C=="0"&&1/T==-Ie?"-0":C}function bs(T,C,P){var Y=-1,ue=ul,ye=T.length,Ue=!0,Ye=[],ot=Ye;if(P)Ue=!1,ue=zh;else if(ye>=s){var Ht=C?null:_r(T);if(Ht)return Gu(Ht);Ue=!1,ue=or,ot=new vl}else ot=C?[]:Ye;e:for(;++Y<ye;){var Gt=T[Y],Qt=C?C(Gt):Gt;if(Gt=P||Gt!==0?Gt:0,Ue&&Qt===Qt){for(var yn=ot.length;yn--;)if(ot[yn]===Qt)continue e;C&&ot.push(Qt),Ye.push(Gt)}else ue(ot,Qt,P)||(ot!==Ye&&ot.push(Qt),Ye.push(Gt))}return Ye}function $h(T,C){return C=Mu(C,T),T=bm(T,C),T==null||delete T[Kl(Sl(C))]}function Xs(T,C,P,Y){return ni(T,C,P(no(T,C)),Y)}function Wl(T,C,P,Y){for(var ue=T.length,ye=Y?ue:-1;(Y?ye--:++ye<ue)&&C(T[ye],ye,T););return P?Lt(T,Y?0:ye,Y?ye+1:ue):Lt(T,Y?ye+1:0,Y?ue:ye)}function Kc(T,C){var P=T;return P instanceof zn&&(P=P.value()),sp(C,function(Y,ue){return ue.func.apply(ue.thisArg,pu([Y],ue.args))},P)}function Jc(T,C,P){var Y=T.length;if(Y<2)return Y?bs(T[0]):[];for(var ue=-1,ye=yt(Y);++ue<Y;)for(var Ue=T[ue],Ye=-1;++Ye<Y;)Ye!=ue&&(ye[ue]=ga(ye[ue]||Ue,T[Ye],C,P));return bs(ls(ye,1),C,P)}function ec(T,C,P){for(var Y=-1,ue=T.length,ye=C.length,Ue={};++Y<ue;){var Ye=Y<ye?C[Y]:t;P(Ue,T[Y],Ye)}return Ue}function vo(T){return oo(T)?T:[]}function Ys(T){return typeof T=="function"?T:Ih}function Mu(T,C){return Dr(T)?T:Ta(T,C)?[T]:Cv(Jr(T))}var Qc=Gn;function za(T,C,P){var Y=T.length;return P=P===t?Y:P,!C&&P>=Y?T:Lt(T,C,P)}var Au=_h||function(T){return Vr.clearTimeout(T)};function qc(T,C){if(C)return T.slice();var P=T.length,Y=Vh?Vh(P):new T.constructor(P);return T.copy(Y),Y}function Zc(T){var C=new T.constructor(T.byteLength);return new Wh(C).set(new Wh(T)),C}function io(T,C){var P=C?Zc(T.buffer):T.buffer;return new T.constructor(P,T.byteOffset,T.byteLength)}function Ns(T){var C=new T.constructor(T.source,er.exec(T));return C.lastIndex=T.lastIndex,C}function Iu(T){return Qi?An(Qi.call(T)):{}}function Tl(T,C){var P=C?Zc(T.buffer):T.buffer;return new T.constructor(P,T.byteOffset,T.length)}function Ks(T,C){if(T!==C){var P=T!==t,Y=T===null,ue=T===T,ye=ad(T),Ue=C!==t,Ye=C===null,ot=C===C,Ht=ad(C);if(!Ye&&!Ht&&!ye&&T>C||ye&&Ue&&ot&&!Ye&&!Ht||Y&&Ue&&ot||!P&&ot||!ue)return 1;if(!Y&&!ye&&!Ht&&T<C||Ht&&P&&ue&&!Y&&!ye||Ye&&P&&ue||!Ue&&ue||!ot)return-1}return 0}function Ha(T,C,P){for(var Y=-1,ue=T.criteria,ye=C.criteria,Ue=ue.length,Ye=P.length;++Y<Ue;){var ot=Ks(ue[Y],ye[Y]);if(ot){if(Y>=Ye)return ot;var Ht=P[Y];return ot*(Ht=="desc"?-1:1)}}return T.index-C.index}function ya(T,C,P,Y){for(var ue=-1,ye=T.length,Ue=P.length,Ye=-1,ot=C.length,Ht=eo(ye-Ue,0),Gt=yt(ot+Ht),Qt=!Y;++Ye<ot;)Gt[Ye]=C[Ye];for(;++ue<Ue;)(Qt||ue<ye)&&(Gt[P[ue]]=T[ue]);for(;Ht--;)Gt[Ye++]=T[ue++];return Gt}function Vl(T,C,P,Y){for(var ue=-1,ye=T.length,Ue=-1,Ye=P.length,ot=-1,Ht=C.length,Gt=eo(ye-Ye,0),Qt=yt(Gt+Ht),yn=!Y;++ue<Gt;)Qt[ue]=T[ue];for(var Rn=ue;++ot<Ht;)Qt[Rn+ot]=C[ot];for(;++Ue<Ye;)(yn||ue<ye)&&(Qt[Rn+P[Ue]]=T[ue++]);return Qt}function ts(T,C){var P=-1,Y=T.length;for(C||(C=yt(Y));++P<Y;)C[P]=T[P];return C}function yo(T,C,P,Y){var ue=!P;P||(P={});for(var ye=-1,Ue=C.length;++ye<Ue;){var Ye=C[ye],ot=Y?Y(P[Ye],T[Ye],Ye,P,T):t;ot===t&&(ot=T[Ye]),ue?bu(P,Ye,ot):qo(P,Ye,ot)}return P}function Sh(T,C){return yo(T,Lf(T),C)}function ed(T,C){return yo(T,rd(T),C)}function Ga(T,C){return function(P,Y){var ue=Dr(P)?jr:fa,ye=C?C():{};return ue(P,T,jn(Y,2),ye)}}function jl(T){return Gn(function(C,P){var Y=-1,ue=P.length,ye=ue>1?P[ue-1]:t,Ue=ue>2?P[2]:t;for(ye=T.length>3&&typeof ye=="function"?(ue--,ye):t,Ue&&Ii(P[0],P[1],Ue)&&(ye=ue<3?t:ye,ue=1),C=An(C);++Y<ue;){var Ye=P[Y];Ye&&T(C,Ye,Y,ye)}return C})}function td(T,C){return function(P,Y){if(P==null)return P;if(!Lo(P))return T(P,Y);for(var ue=P.length,ye=C?ue:-1,Ue=An(P);(C?ye--:++ye<ue)&&Y(Ue[ye],ye,Ue)!==!1;);return P}}function xc(T){return function(C,P,Y){for(var ue=-1,ye=An(C),Ue=Y(C),Ye=Ue.length;Ye--;){var ot=Ue[T?Ye:++ue];if(P(ye[ot],ot,ye)===!1)break}return C}}function Hp(T,C,P){var Y=C&A,ue=f(T);function ye(){var Ue=this&&this!==Vr&&this instanceof ye?ue:T;return Ue.apply(Y?P:this,arguments)}return ye}function $(T){return function(C){C=Jr(C);var P=Hu(C)?Xr(C):t,Y=P?P[0]:C.charAt(0),ue=P?za(P,1).join(""):C.slice(1);return Y[T]()+ue}}function c(T){return function(C){return sp(Kw(_E(C).replace(bi,"")),T,"")}}function f(T){return function(){var C=arguments;switch(C.length){case 0:return new T;case 1:return new T(C[0]);case 2:return new T(C[0],C[1]);case 3:return new T(C[0],C[1],C[2]);case 4:return new T(C[0],C[1],C[2],C[3]);case 5:return new T(C[0],C[1],C[2],C[3],C[4]);case 6:return new T(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new T(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var P=Hs(T.prototype),Y=T.apply(P,C);return wa(Y)?Y:P}}function S(T,C,P){var Y=f(T);function ue(){for(var ye=arguments.length,Ue=yt(ye),Ye=ye,ot=Gp(ue);Ye--;)Ue[Ye]=arguments[Ye];var Ht=ye<3&&Ue[0]!==ot&&Ue[ye-1]!==ot?[]:jo(Ue,ot);if(ye-=Ht.length,ye<P)return an(T,C,H,ue.placeholder,t,Ue,Ht,t,t,P-ye);var Gt=this&&this!==Vr&&this instanceof ue?Y:T;return Un(Gt,this,Ue)}return ue}function M(T){return function(C,P,Y){var ue=An(C);if(!Lo(C)){var ye=jn(P,3);C=na(C),P=function(Ye){return ye(ue[Ye],Ye,ue)}}var Ue=T(C,P,Y);return Ue>-1?ue[ye?C[Ue]:Ue]:t}}function L(T){return kn(function(C){var P=C.length,Y=P,ue=Br.prototype.thru;for(T&&C.reverse();Y--;){var ye=C[Y];if(typeof ye!="function")throw new gs(l);if(ue&&!Ue&&vm(ye)=="wrapper")var Ue=new Br([],!0)}for(Y=Ue?Y:P;++Y<P;){ye=C[Y];var Ye=vm(ye),ot=Ye=="wrapper"?Xl(ye):t;ot&&gi(ot[0])&&ot[1]==(V|D|F|U)&&!ot[4].length&&ot[9]==1?Ue=Ue[vm(ot[0])].apply(Ue,ot[3]):Ue=ye.length==1&&gi(ye)?Ue[Ye]():Ue.thru(ye)}return function(){var Ht=arguments,Gt=Ht[0];if(Ue&&Ht.length==1&&Dr(Gt))return Ue.plant(Gt).value();for(var Qt=0,yn=P?C[Qt].apply(this,Ht):Gt;++Qt<P;)yn=C[Qt].call(this,yn);return yn}})}function H(T,C,P,Y,ue,ye,Ue,Ye,ot,Ht){var Gt=C&V,Qt=C&A,yn=C&O,Rn=C&(D|N),pr=C&ee,Or=yn?t:f(T);function rr(){for(var si=arguments.length,_i=yt(si),ud=si;ud--;)_i[ud]=arguments[ud];if(Rn)var nh=Gp(rr),Zl=Pl(_i,nh);if(Y&&(_i=ya(_i,Y,ue,Rn)),ye&&(_i=Vl(_i,ye,Ue,Rn)),si-=Zl,Rn&&si<Ht){var Ka=jo(_i,nh);return an(T,C,H,rr.placeholder,P,_i,Ka,Ye,ot,Ht-si)}var $p=Qt?P:this,Kf=yn?$p[T]:T;return si=_i.length,Ye?_i=Ea(_i,Ye):pr&&si>1&&_i.reverse(),Gt&&ot<si&&(_i.length=ot),this&&this!==Vr&&this instanceof rr&&(Kf=Or||f(Kf)),Kf.apply($p,_i)}return rr}function re(T,C){return function(P,Y){return mi(P,T,C(Y),{})}}function Se(T,C){return function(P,Y){var ue;if(P===t&&Y===t)return C;if(P!==t&&(ue=P),Y!==t){if(ue===t)return Y;typeof P=="string"||typeof Y=="string"?(P=es(P),Y=es(Y)):(P=Yc(P),Y=Yc(Y)),ue=T(P,Y)}return ue}}function We(T){return kn(function(C){return C=hi(C,Ei(jn())),Gn(function(P){var Y=this;return T(C,function(ue){return Un(ue,Y,P)})})})}function gt(T,C){C=C===t?" ":es(C);var P=C.length;if(P<2)return P?Ls(C,T):C;var Y=Ls(C,Hc(T/ms(C)));return Hu(C)?za(Xr(Y),0,T).join(""):Y.slice(0,T)}function zt(T,C,P,Y){var ue=C&A,ye=f(T);function Ue(){for(var Ye=-1,ot=arguments.length,Ht=-1,Gt=Y.length,Qt=yt(Gt+ot),yn=this&&this!==Vr&&this instanceof Ue?ye:T;++Ht<Gt;)Qt[Ht]=Y[Ht];for(;ot--;)Qt[Ht++]=arguments[++Ye];return Un(yn,ue?P:this,Qt)}return Ue}function Zt(T){return function(C,P,Y){return Y&&typeof Y!="number"&&Ii(C,P,Y)&&(P=Y=t),C=Wf(C),P===t?(P=C,C=0):P=Wf(P),Y=Y===t?C<P?1:-1:Wf(Y),ea(C,P,Y,T)}}function hn(T){return function(C,P){return typeof C=="string"&&typeof P=="string"||(C=Eo(C),P=Eo(P)),T(C,P)}}function an(T,C,P,Y,ue,ye,Ue,Ye,ot,Ht){var Gt=C&D,Qt=Gt?Ue:t,yn=Gt?t:Ue,Rn=Gt?ye:t,pr=Gt?t:ye;C|=Gt?F:z,C&=~(Gt?z:F),C&k||(C&=~(A|O));var Or=[T,C,ue,Rn,Qt,pr,yn,Ye,ot,Ht],rr=P.apply(t,Or);return gi(T)&&dp(rr,Or),rr.placeholder=Y,th(rr,T,C)}function nn(T){var C=tr[T];return function(P,Y){if(P=Eo(P),Y=Y==null?0:Ko($r(Y),292),Y&&fl(P)){var ue=(Jr(P)+"e").split("e"),ye=C(ue[0]+"e"+(+ue[1]+Y));return ue=(Jr(ye)+"e").split("e"),+(ue[0]+"e"+(+ue[1]-Y))}return C(P)}}var _r=Vu&&1/Gu(new Vu([,-0]))[1]==Ie?function(T){return new Vu(T)}:Nb;function ft(T){return function(C){var P=Yl(C);return P==it?pc(C):P==pt?fh(C):cl(C,T(C))}}function Ee(T,C,P,Y,ue,ye,Ue,Ye){var ot=C&O;if(!ot&&typeof T!="function")throw new gs(l);var Ht=Y?Y.length:0;if(Ht||(C&=~(F|z),Y=ue=t),Ue=Ue===t?Ue:eo($r(Ue),0),Ye=Ye===t?Ye:$r(Ye),Ht-=ue?ue.length:0,C&z){var Gt=Y,Qt=ue;Y=ue=t}var yn=ot?t:Xl(T),Rn=[T,C,P,Y,ue,Gt,Qt,ye,Ue,Ye];if(yn&&Nf(Rn,yn),T=Rn[0],C=Rn[1],P=Rn[2],Y=Rn[3],ue=Rn[4],Ye=Rn[9]=Rn[9]===t?ot?0:T.length:eo(Rn[9]-Ht,0),!Ye&&C&(D|N)&&(C&=~(D|N)),!C||C==A)var pr=Hp(T,C,P);else C==D||C==N?pr=S(T,C,Ye):(C==F||C==(A|F))&&!ue.length?pr=zt(T,C,P,Y):pr=H.apply(t,Rn);var Or=yn?Zi:dp;return th(Or(pr,Rn),T,C)}function Me(T,C,P,Y){return T===t||Ch(T,Vi[P])&&!Lr.call(Y,P)?C:T}function Xe(T,C,P,Y,ue,ye){return wa(T)&&wa(C)&&(ye.set(C,T),go(T,C,t,Xe,ye),ye.delete(C)),T}function kt(T){return kr(T)?t:T}function Kt(T,C,P,Y,ue,ye){var Ue=P&w,Ye=T.length,ot=C.length;if(Ye!=ot&&!(Ue&&ot>Ye))return!1;var Ht=ye.get(T),Gt=ye.get(C);if(Ht&&Gt)return Ht==C&&Gt==T;var Qt=-1,yn=!0,Rn=P&x?new vl:t;for(ye.set(T,C),ye.set(C,T);++Qt<Ye;){var pr=T[Qt],Or=C[Qt];if(Y)var rr=Ue?Y(Or,pr,Qt,C,T,ye):Y(pr,Or,Qt,T,C,ye);if(rr!==t){if(rr)continue;yn=!1;break}if(Rn){if(!hh(C,function(si,_i){if(!or(Rn,_i)&&(pr===si||ue(pr,si,P,Y,ye)))return Rn.push(_i)})){yn=!1;break}}else if(!(pr===Or||ue(pr,Or,P,Y,ye))){yn=!1;break}}return ye.delete(T),ye.delete(C),yn}function ln(T,C,P,Y,ue,ye,Ue){switch(P){case ut:if(T.byteLength!=C.byteLength||T.byteOffset!=C.byteOffset)return!1;T=T.buffer,C=C.buffer;case xt:return!(T.byteLength!=C.byteLength||!ye(new Wh(T),new Wh(C)));case et:case ct:case nt:return Ch(+T,+C);case Ne:return T.name==C.name&&T.message==C.message;case wt:case be:return T==C+"";case it:var Ye=pc;case pt:var ot=Y&w;if(Ye||(Ye=Gu),T.size!=C.size&&!ot)return!1;var Ht=Ue.get(T);if(Ht)return Ht==C;Y|=x,Ue.set(T,C);var Gt=Kt(Ye(T),Ye(C),Y,ue,ye,Ue);return Ue.delete(T),Gt;case Z:if(Qi)return Qi.call(T)==Qi.call(C)}return!1}function fn(T,C,P,Y,ue,ye){var Ue=P&w,Ye=Wn(T),ot=Ye.length,Ht=Wn(C),Gt=Ht.length;if(ot!=Gt&&!Ue)return!1;for(var Qt=ot;Qt--;){var yn=Ye[Qt];if(!(Ue?yn in C:Lr.call(C,yn)))return!1}var Rn=ye.get(T),pr=ye.get(C);if(Rn&&pr)return Rn==C&&pr==T;var Or=!0;ye.set(T,C),ye.set(C,T);for(var rr=Ue;++Qt<ot;){yn=Ye[Qt];var si=T[yn],_i=C[yn];if(Y)var ud=Ue?Y(_i,si,yn,C,T,ye):Y(si,_i,yn,T,C,ye);if(!(ud===t?si===_i||ue(si,_i,P,Y,ye):ud)){Or=!1;break}rr||(rr=yn=="constructor")}if(Or&&!rr){var nh=T.constructor,Zl=C.constructor;nh!=Zl&&"constructor"in T&&"constructor"in C&&!(typeof nh=="function"&&nh instanceof nh&&typeof Zl=="function"&&Zl instanceof Zl)&&(Or=!1)}return ye.delete(T),ye.delete(C),Or}function kn(T){return Vp(_g(T,t,jp),T+"")}function Wn(T){return Vc(T,na,Lf)}function hr(T){return Vc(T,xa,rd)}var Xl=Kh?function(T){return Kh.get(T)}:Nb;function vm(T){for(var C=T.name+"",P=yc[C],Y=Lr.call(yc,C)?P.length:0;Y--;){var ue=P[Y],ye=ue.func;if(ye==null||ye==T)return ue.name}return C}function Gp(T){var C=Lr.call(ve,"placeholder")?ve:T;return C.placeholder}function jn(){var T=ve.iteratee||Oi;return T=T===Oi?Os:T,arguments.length?T(arguments[0],arguments[1]):T}function nd(T,C){var P=T.__data__;return Be(C)?P[typeof C=="string"?"string":"hash"]:P.map}function r_(T){for(var C=na(T),P=C.length;P--;){var Y=C[P],ue=T[Y];C[P]=[Y,ue,ym(ue)]}return C}function Ru(T,C){var P=gu(T,C);return Gl(P)?P:t}function ba(T){var C=Lr.call(T,ha),P=T[ha];try{T[ha]=t;var Y=!0}catch{}var ue=zs.call(T);return Y&&(C?T[ha]=P:delete T[ha]),ue}var Lf=vh?function(T){return T==null?[]:(T=An(T),fs(vh(T),function(C){return _c.call(T,C)}))}:Pb,rd=vh?function(T){for(var C=[];T;)pu(C,Lf(T)),T=pl(T);return C}:Pb,Yl=Ws;(vc&&Yl(new vc(new ArrayBuffer(1)))!=ut||bh&&Yl(new bh)!=it||Yh&&Yl(Yh.resolve())!=ht||Vu&&Yl(new Vu)!=pt||La&&Yl(new La)!=lt)&&(Yl=function(T){var C=Ws(T),P=C==At?T.constructor:t,Y=P?tc(P):"";if(Y)switch(Y){case bc:return ut;case Xu:return it;case Id:return ht;case Jo:return pt;case Er:return lt}return C});function tn(T,C,P){for(var Y=-1,ue=P.length;++Y<ue;){var ye=P[Y],Ue=ye.size;switch(ye.type){case"drop":T+=Ue;break;case"dropRight":C-=Ue;break;case"take":C=Ko(C,T+Ue);break;case"takeRight":T=eo(T,C-Ue);break}}return{start:T,end:C}}function e0(T){var C=T.match(at);return C?C[1].split(bt):[]}function t0(T,C,P){C=Mu(C,T);for(var Y=-1,ue=C.length,ye=!1;++Y<ue;){var Ue=Kl(C[Y]);if(!(ye=T!=null&&P(T,Ue)))break;T=T[Ue]}return ye||++Y!=ue?ye:(ue=T==null?0:T.length,!!ue&&Ud(ue)&&eh(Ue,ue)&&(Dr(T)||p_(T)))}function mg(T){var C=T.length,P=new T.constructor(C);return C&&typeof T[0]=="string"&&Lr.call(T,"index")&&(P.index=T.index,P.input=T.input),P}function Cc(T){return typeof T.constructor=="function"&&!id(T)?Hs(pl(T)):{}}function Ts(T,C,P){var Y=T.constructor;switch(C){case xt:return Zc(T);case et:case ct:return new Y(+T);case ut:return io(T,P);case He:case Ce:case X:case J:case oe:case $e:case Ge:case Bt:case Pe:return Tl(T,P);case it:return new Y;case nt:case be:return new Y(T);case wt:return Ns(T);case pt:return new Y;case Z:return Iu(T)}}function Wp(T,C){var P=C.length;if(!P)return T;var Y=P-1;return C[Y]=(P>1?"& ":"")+C[Y],C=C.join(P>2?", ":" "),T.replace(Ae,`{
/* [wrapped with `+C+`] */
`)}function Nd(T){return Dr(T)||p_(T)||!!(Cd&&T&&T[Cd])}function eh(T,C){var P=typeof T;return C=C??j,!!C&&(P=="number"||P!="symbol"&&Gi.test(T))&&T>-1&&T%1==0&&T<C}function Ii(T,C,P){if(!wa(P))return!1;var Y=typeof C;return(Y=="number"?Lo(P)&&eh(C,P.length):Y=="string"&&C in P)?Ch(P[C],T):!1}function Ta(T,C){if(Dr(T))return!1;var P=typeof T;return P=="number"||P=="symbol"||P=="boolean"||T==null||ad(T)?!0:me.test(T)||!Q.test(T)||C!=null&&T in An(C)}function Be(T){var C=typeof T;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?T!=="__proto__":T===null}function gi(T){var C=vm(T),P=ve[C];if(typeof P!="function"||!(C in zn.prototype))return!1;if(T===P)return!0;var Y=Xl(P);return!!Y&&T===Y[0]}function Es(T){return!!Rs&&Rs in T}var wv=ss?Gf:v_;function id(T){var C=T&&T.constructor,P=typeof C=="function"&&C.prototype||Vi;return T===P}function ym(T){return T===T&&!wa(T)}function gg(T,C){return function(P){return P==null?!1:P[T]===C&&(C!==t||T in An(P))}}function xv(T){var C=tt(T,function(Y){return P.size===p&&P.clear(),Y}),P=C.cache;return C}function Nf(T,C){var P=T[1],Y=C[1],ue=P|Y,ye=ue<(A|O|V),Ue=Y==V&&P==D||Y==V&&P==U&&T[7].length<=C[8]||Y==(V|U)&&C[7].length<=C[8]&&P==D;if(!(ye||Ue))return T;Y&A&&(T[2]=C[2],ue|=P&A?0:k);var Ye=C[3];if(Ye){var ot=T[3];T[3]=ot?ya(ot,Ye,C[4]):Ye,T[4]=ot?jo(T[3],m):C[4]}return Ye=C[5],Ye&&(ot=T[5],T[5]=ot?Vl(ot,Ye,C[6]):Ye,T[6]=ot?jo(T[5],m):C[6]),Ye=C[7],Ye&&(T[7]=Ye),Y&V&&(T[8]=T[8]==null?C[8]:Ko(T[8],C[8])),T[9]==null&&(T[9]=C[9]),T[0]=C[0],T[1]=ue,T}function Oo(T){var C=[];if(T!=null)for(var P in An(T))C.push(P);return C}function i_(T){return zs.call(T)}function _g(T,C,P){return C=eo(C===t?T.length-1:C,0),function(){for(var Y=arguments,ue=-1,ye=eo(Y.length-C,0),Ue=yt(ye);++ue<ye;)Ue[ue]=Y[C+ue];ue=-1;for(var Ye=yt(C+1);++ue<C;)Ye[ue]=Y[ue];return Ye[C]=P(Ue),Un(T,this,Ye)}}function bm(T,C){return C.length<2?T:no(T,Lt(C,0,-1))}function Ea(T,C){for(var P=T.length,Y=Ko(C.length,P),ue=ts(T);Y--;){var ye=C[Y];T[Y]=eh(ye,P)?ue[ye]:t}return T}function ku(T,C){if(!(C==="constructor"&&typeof T[C]=="function")&&C!="__proto__")return T[C]}var dp=n0(Zi),vg=Xh||function(T,C){return Vr.setTimeout(T,C)},Vp=n0(bl);function th(T,C,P){var Y=C+"";return Vp(T,Wp(Y,Tm(e0(Y),P)))}function n0(T){var C=0,P=0;return function(){var Y=kf(),ue=fe-(Y-P);if(P=Y,ue>0){if(++C>=se)return arguments[0]}else C=0;return T.apply(t,arguments)}}function Xn(T,C){var P=-1,Y=T.length,ue=Y-1;for(C=C===t?Y:C;++P<C;){var ye=ys(P,ue),Ue=T[ye];T[ye]=T[P],T[P]=Ue}return T.length=C,T}var Cv=xv(function(T){var C=[];return T.charCodeAt(0)===46&&C.push(""),T.replace(De,function(P,Y,ue,ye){C.push(ue?ye.replace(xn,"$1"):Y||P)}),C});function Kl(T){if(typeof T=="string"||ad(T))return T;var C=T+"";return C=="0"&&1/T==-Ie?"-0":C}function tc(T){if(T!=null){try{return gc.call(T)}catch{}try{return T+""}catch{}}return""}function Tm(T,C){return Ti(xe,function(P){var Y="_."+P[0];C&P[1]&&!ul(T,Y)&&T.push(Y)}),T.sort()}function pp(T){if(T instanceof zn)return T.clone();var C=new Br(T.__wrapped__,T.__chain__);return C.__actions__=ts(T.__actions__),C.__index__=T.__index__,C.__values__=T.__values__,C}function Em(T,C,P){(P?Ii(T,C,P):C===t)?C=1:C=eo($r(C),0);var Y=T==null?0:T.length;if(!Y||C<1)return[];for(var ue=0,ye=0,Ue=yt(Hc(Y/C));ue<Y;)Ue[ye++]=Lt(T,ue,ue+=C);return Ue}function Jl(T){for(var C=-1,P=T==null?0:T.length,Y=0,ue=[];++C<P;){var ye=T[C];ye&&(ue[Y++]=ye)}return ue}function r0(){var T=arguments.length;if(!T)return[];for(var C=yt(T-1),P=arguments[0],Y=T;Y--;)C[Y-1]=arguments[Y];return pu(Dr(P)?ts(P):[P],ls(C,1))}var so=Gn(function(T,C){return oo(T)?ga(T,ls(C,1,oo,!0)):[]}),wi=Gn(function(T,C){var P=Sl(C);return oo(P)&&(P=t),oo(T)?ga(T,ls(C,1,oo,!0),jn(P,2)):[]}),El=Gn(function(T,C){var P=Sl(C);return oo(P)&&(P=t),oo(T)?ga(T,ls(C,1,oo,!0),t,P):[]});function $a(T,C,P){var Y=T==null?0:T.length;return Y?(C=P||C===t?1:$r(C),Lt(T,C<0?0:C,Y)):[]}function Ql(T,C,P){var Y=T==null?0:T.length;return Y?(C=P||C===t?1:$r(C),C=Y-C,Lt(T,0,C<0?0:C)):[]}function $l(T,C){return T&&T.length?Wl(T,jn(C,3),!0,!0):[]}function Df(T,C){return T&&T.length?Wl(T,jn(C,3),!0):[]}function Wa(T,C,P,Y){var ue=T==null?0:T.length;return ue?(P&&typeof P!="number"&&Ii(T,C,P)&&(P=0,Y=ue),Qh(T,C,P,Y)):[]}function fp(T,C,P){var Y=T==null?0:T.length;if(!Y)return-1;var ue=P==null?0:$r(P);return ue<0&&(ue=eo(Y+ue,0)),zu(T,jn(C,3),ue)}function mp(T,C,P){var Y=T==null?0:T.length;if(!Y)return-1;var ue=Y-1;return P!==t&&(ue=$r(P),ue=P<0?eo(Y+ue,0):Ko(ue,Y-1)),zu(T,jn(C,3),ue,!0)}function jp(T){var C=T==null?0:T.length;return C?ls(T,1):[]}function s_(T){var C=T==null?0:T.length;return C?ls(T,Ie):[]}function $m(T,C){var P=T==null?0:T.length;return P?(C=C===t?1:$r(C),ls(T,C)):[]}function Mc(T){for(var C=-1,P=T==null?0:T.length,Y={};++C<P;){var ue=T[C];Y[ue[0]]=ue[1]}return Y}function Va(T){return T&&T.length?T[0]:t}function Ac(T,C,P){var Y=T==null?0:T.length;if(!Y)return-1;var ue=P==null?0:$r(P);return ue<0&&(ue=eo(Y+ue,0)),Zs(T,C,ue)}function Dd(T){var C=T==null?0:T.length;return C?Lt(T,0,-1):[]}var yg=Gn(function(T){var C=hi(T,vo);return C.length&&C[0]===T[0]?Zo(C):[]}),bg=Gn(function(T){var C=Sl(T),P=hi(T,vo);return C===Sl(P)?C=t:P.pop(),P.length&&P[0]===T[0]?Zo(P,jn(C,2)):[]}),Ds=Gn(function(T){var C=Sl(T),P=hi(T,vo);return C=typeof C=="function"?C:t,C&&P.pop(),P.length&&P[0]===T[0]?Zo(P,t,C):[]});function Sm(T,C){return T==null?"":Ad.call(T,C)}function Sl(T){var C=T==null?0:T.length;return C?T[C-1]:t}function ja(T,C,P){var Y=T==null?0:T.length;if(!Y)return-1;var ue=Y;return P!==t&&(ue=$r(P),ue=ue<0?eo(Y+ue,0):Ko(ue,Y-1)),C===C?mc(T,C,ue):zu(T,dh,ue,!0)}function Bf(T,C){return T&&T.length?_o(T,$r(C)):t}var o_=Gn(gp);function gp(T,C){return T&&T.length&&C&&C.length?br(T,C):T}function Tg(T,C,P){return T&&T.length&&C&&C.length?br(T,C,jn(P,2)):T}function nc(T,C,P){return T&&T.length&&C&&C.length?br(T,C,t,P):T}var Bd=kn(function(T,C){var P=T==null?0:T.length,Y=Od(T,C);return ji(T,hi(C,function(ue){return eh(ue,P)?+ue:ue}).sort(Ks)),Y});function bo(T,C){var P=[];if(!(T&&T.length))return P;var Y=-1,ue=[],ye=T.length;for(C=jn(C,3);++Y<ye;){var Ue=T[Y];C(Ue,Y,T)&&(P.push(Ue),ue.push(Y))}return ji(T,ue),P}function Sa(T){return T==null?T:gl.call(T)}function Mv(T,C,P){var Y=T==null?0:T.length;return Y?(P&&typeof P!="number"&&Ii(T,C,P)?(C=0,P=Y):(C=C==null?0:$r(C),P=P===t?Y:$r(P)),Lt(T,C,P)):[]}function wm(T,C){return Rr(T,C)}function i0(T,C,P){return wc(T,C,jn(P,2))}function gb(T,C){var P=T==null?0:T.length;if(P){var Y=Rr(T,C);if(Y<P&&Ch(T[Y],C))return Y}return-1}function Xp(T,C){return Rr(T,C,!0)}function Pf(T,C,P){return wc(T,C,jn(P,2),!0)}function s0(T,C){var P=T==null?0:T.length;if(P){var Y=Rr(T,C,!0)-1;if(Ch(T[Y],C))return Y}return-1}function Ff(T){return T&&T.length?Zh(T):[]}function o0(T,C){return T&&T.length?Zh(T,jn(C,2)):[]}function xm(T){var C=T==null?0:T.length;return C?Lt(T,1,C):[]}function a0(T,C,P){return T&&T.length?(C=P||C===t?1:$r(C),Lt(T,0,C<0?0:C)):[]}function Av(T,C,P){var Y=T==null?0:T.length;return Y?(C=P||C===t?1:$r(C),C=Y-C,Lt(T,C<0?0:C,Y)):[]}function Cm(T,C){return T&&T.length?Wl(T,jn(C,3),!1,!0):[]}function _p(T,C){return T&&T.length?Wl(T,jn(C,3)):[]}var Iv=Gn(function(T){return bs(ls(T,1,oo,!0))}),sE=Gn(function(T){var C=Sl(T);return oo(C)&&(C=t),bs(ls(T,1,oo,!0),jn(C,2))}),l0=Gn(function(T){var C=Sl(T);return C=typeof C=="function"?C:t,bs(ls(T,1,oo,!0),t,C)});function u0(T){return T&&T.length?bs(T):[]}function Yp(T,C){return T&&T.length?bs(T,jn(C,2)):[]}function En(T,C){return C=typeof C=="function"?C:t,T&&T.length?bs(T,t,C):[]}function wh(T){if(!(T&&T.length))return[];var C=0;return T=fs(T,function(P){if(oo(P))return C=eo(P.length,C),!0}),mu(C,function(P){return hi(T,Ur(P))})}function Mm(T,C){if(!(T&&T.length))return[];var P=wh(T);return C==null?P:hi(P,function(Y){return Un(C,t,Y)})}var To=Gn(function(T,C){return oo(T)?ga(T,C):[]}),Rv=Gn(function(T){return Jc(fs(T,oo))}),c0=Gn(function(T){var C=Sl(T);return oo(C)&&(C=t),Jc(fs(T,oo),jn(C,2))}),Am=Gn(function(T){var C=Sl(T);return C=typeof C=="function"?C:t,Jc(fs(T,oo),t,C)}),oE=Gn(wh);function _b(T,C){return ec(T||[],C||[],qo)}function Ic(T,C){return ec(T||[],C||[],ni)}var Bs=Gn(function(T){var C=T.length,P=C>1?T[C-1]:t;return P=typeof P=="function"?(T.pop(),P):t,Mm(T,P)});function Ou(T){var C=ve(T);return C.__chain__=!0,C}function a_(T,C){return C(T),T}function Eg(T,C){return C(T)}var xh=kn(function(T){var C=T.length,P=C?T[0]:0,Y=this.__wrapped__,ue=function(ye){return Od(ye,T)};return C>1||this.__actions__.length||!(Y instanceof zn)||!eh(P)?this.thru(ue):(Y=Y.slice(P,+P+(C?1:0)),Y.__actions__.push({func:Eg,args:[ue],thisArg:t}),new Br(Y,this.__chain__).thru(function(ye){return C&&!ye.length&&ye.push(t),ye}))});function Im(){return Ou(this)}function Kp(){return new Br(this.value(),this.__chain__)}function Jp(){this.__values__===t&&(this.__values__=cE(this.value()));var T=this.__index__>=this.__values__.length,C=T?t:this.__values__[this.__index__++];return{done:T,value:C}}function Uf(){return this}function sd(T){for(var C,P=this;P instanceof Na;){var Y=pp(P);Y.__index__=0,Y.__values__=t,C?ue.__wrapped__=Y:C=Y;var ue=Y;P=P.__wrapped__}return ue.__wrapped__=T,C}function vp(){var T=this.__wrapped__;if(T instanceof zn){var C=T;return this.__actions__.length&&(C=new zn(this)),C=C.reverse(),C.__actions__.push({func:Eg,args:[Sa],thisArg:t}),new Br(C,this.__chain__)}return this.thru(Sa)}function $g(){return Kc(this.__wrapped__,this.__actions__)}var vb=Ga(function(T,C,P){Lr.call(T,P)?++T[P]:bu(T,P,1)});function l_(T,C,P){var Y=Dr(T)?du:Hl;return P&&Ii(T,C,P)&&(C=t),Y(T,jn(C,3))}function Pd(T,C){var P=Dr(T)?fs:$c;return P(T,jn(C,3))}var Kr=M(fp),Rm=M(mp);function Sg(T,C){return ls(ri(T,C),1)}function u_(T,C){return ls(ri(T,C),Ie)}function yb(T,C,P){return P=P===t?1:$r(P),ls(ri(T,C),P)}function c_(T,C){var P=Dr(T)?Ti:yl;return P(T,jn(C,3))}function km(T,C){var P=Dr(T)?Uh:zp;return P(T,jn(C,3))}var wg=Ga(function(T,C,P){Lr.call(T,P)?T[P].push(C):bu(T,P,[C])});function Qp(T,C,P,Y){T=Lo(T)?T:__(T),P=P&&!Y?$r(P):0;var ue=T.length;return P<0&&(P=eo(ue+P,0)),p0(T)?P<=ue&&T.indexOf(C,P)>-1:!!ue&&Zs(T,C,P)>-1}var qp=Gn(function(T,C,P){var Y=-1,ue=typeof C=="function",ye=Lo(T)?yt(T.length):[];return yl(T,function(Ue){ye[++Y]=ue?Un(C,Ue,P):wn(Ue,C,P)}),ye}),Om=Ga(function(T,C,P){bu(T,P,C)});function ri(T,C){var P=Dr(T)?hi:wu;return P(T,jn(C,3))}function Zp(T,C,P,Y){return T==null?[]:(Dr(C)||(C=C==null?[]:[C]),P=Y?t:P,Dr(P)||(P=P==null?[]:[P]),Zu(T,C,P))}var Lm=Ga(function(T,C,P){T[P?0:1].push(C)},function(){return[[],[]]});function Nm(T,C,P){var Y=Dr(T)?sp:Us,ue=arguments.length<3;return Y(T,jn(C,4),P,ue,yl)}function zf(T,C,P){var Y=Dr(T)?op:Us,ue=arguments.length<3;return Y(T,jn(C,4),P,ue,zp)}function h_(T,C){var P=Dr(T)?fs:$c;return P(T,vt(jn(C,3)))}function g(T){var C=Dr(T)?Da:Sc;return C(T)}function y(T,C,P){(P?Ii(T,C,P):C===t)?C=1:C=$r(C);var Y=Dr(T)?Yu:on;return Y(T,C)}function I(T){var C=Dr(T)?Of:Ua;return C(T)}function B(T){if(T==null)return 0;if(Lo(T))return p0(T)?ms(T):T.length;var C=Yl(T);return C==it||C==pt?T.size:ro(T).length}function W(T,C,P){var Y=Dr(T)?hh:va;return P&&Ii(T,C,P)&&(C=t),Y(T,jn(C,3))}var K=Gn(function(T,C){if(T==null)return[];var P=C.length;return P>1&&Ii(T,C[0],C[1])?C=[]:P>2&&Ii(C[0],C[1],C[2])&&(C=[C[0]]),Zu(T,ls(C,1),[])}),pe=ei||function(){return Vr.Date.now()};function Fe(T,C){if(typeof C!="function")throw new gs(l);return T=$r(T),function(){if(--T<1)return C.apply(this,arguments)}}function Ke(T,C,P){return C=P?t:C,C=T&&C==null?T.length:C,Ee(T,V,t,t,t,t,C)}function $t(T,C){var P;if(typeof C!="function")throw new gs(l);return T=$r(T),function(){return--T>0&&(P=C.apply(this,arguments)),T<=1&&(C=t),P}}var jt=Gn(function(T,C,P){var Y=A;if(P.length){var ue=jo(P,Gp(jt));Y|=F}return Ee(T,Y,C,P,ue)}),en=Gn(function(T,C,P){var Y=A|O;if(P.length){var ue=jo(P,Gp(en));Y|=F}return Ee(C,Y,T,P,ue)});function Jt(T,C,P){C=P?t:C;var Y=Ee(T,D,t,t,t,t,t,C);return Y.placeholder=Jt.placeholder,Y}function vn(T,C,P){C=P?t:C;var Y=Ee(T,N,t,t,t,t,t,C);return Y.placeholder=vn.placeholder,Y}function In(T,C,P){var Y,ue,ye,Ue,Ye,ot,Ht=0,Gt=!1,Qt=!1,yn=!0;if(typeof T!="function")throw new gs(l);C=Eo(C)||0,wa(P)&&(Gt=!!P.leading,Qt="maxWait"in P,ye=Qt?eo(Eo(P.maxWait)||0,C):ye,yn="trailing"in P?!!P.trailing:yn);function Rn(Ka){var $p=Y,Kf=ue;return Y=ue=t,Ht=Ka,Ue=T.apply(Kf,$p),Ue}function pr(Ka){return Ht=Ka,Ye=vg(si,C),Gt?Rn(Ka):Ue}function Or(Ka){var $p=Ka-ot,Kf=Ka-Ht,zE=C-$p;return Qt?Ko(zE,ye-Kf):zE}function rr(Ka){var $p=Ka-ot,Kf=Ka-Ht;return ot===t||$p>=C||$p<0||Qt&&Kf>=ye}function si(){var Ka=pe();if(rr(Ka))return _i(Ka);Ye=vg(si,Or(Ka))}function _i(Ka){return Ye=t,yn&&Y?Rn(Ka):(Y=ue=t,Ue)}function ud(){Ye!==t&&Au(Ye),Ht=0,Y=ot=ue=Ye=t}function nh(){return Ye===t?Ue:_i(pe())}function Zl(){var Ka=pe(),$p=rr(Ka);if(Y=arguments,ue=this,ot=Ka,$p){if(Ye===t)return pr(ot);if(Qt)return Au(Ye),Ye=vg(si,C),Rn(ot)}return Ye===t&&(Ye=vg(si,C)),Ue}return Zl.cancel=ud,Zl.flush=nh,Zl}var Ln=Gn(function(T,C){return Jh(T,1,C)}),Js=Gn(function(T,C,P){return Jh(T,Eo(C)||0,P)});function _t(T){return Ee(T,ee)}function tt(T,C){if(typeof T!="function"||C!=null&&typeof C!="function")throw new gs(l);var P=function(){var Y=arguments,ue=C?C.apply(this,Y):Y[0],ye=P.cache;if(ye.has(ue))return ye.get(ue);var Ue=T.apply(this,Y);return P.cache=ye.set(ue,Ue)||ye,Ue};return P.cache=new(tt.Cache||pa),P}tt.Cache=pa;function vt(T){if(typeof T!="function")throw new gs(l);return function(){var C=arguments;switch(C.length){case 0:return!T.call(this);case 1:return!T.call(this,C[0]);case 2:return!T.call(this,C[0],C[1]);case 3:return!T.call(this,C[0],C[1],C[2])}return!T.apply(this,C)}}function sn(T){return $t(2,T)}var Hn=Qc(function(T,C){C=C.length==1&&Dr(C[0])?hi(C[0],Ei(jn())):hi(ls(C,1),Ei(jn()));var P=C.length;return Gn(function(Y){for(var ue=-1,ye=Ko(Y.length,P);++ue<ye;)Y[ue]=C[ue].call(this,Y[ue]);return Un(T,this,Y)})}),Dn=Gn(function(T,C){var P=jo(C,Gp(Dn));return Ee(T,F,t,C,P)}),Vn=Gn(function(T,C){var P=jo(C,Gp(Vn));return Ee(T,z,t,C,P)}),dr=kn(function(T,C){return Ee(T,U,t,t,t,C)});function Xa(T,C){if(typeof T!="function")throw new gs(l);return C=C===t?C:$r(C),Gn(T,C)}function Ri(T,C){if(typeof T!="function")throw new gs(l);return C=C==null?0:eo($r(C),0),Gn(function(P){var Y=P[C],ue=za(P,0,C);return Y&&pu(ue,Y),Un(T,this,ue)})}function ef(T,C,P){var Y=!0,ue=!0;if(typeof T!="function")throw new gs(l);return wa(P)&&(Y="leading"in P?!!P.leading:Y,ue="trailing"in P?!!P.trailing:ue),In(T,C,{leading:Y,maxWait:C,trailing:ue})}function h0(T){return Ke(T,1)}function ql(T,C){return Dn(Ys(C),T)}function Fd(){if(!arguments.length)return[];var T=arguments[0];return Dr(T)?T:[T]}function Iw(T){return Gs(T,E)}function pR(T,C){return C=typeof C=="function"?C:t,Gs(T,E,C)}function fR(T){return Gs(T,_|E)}function Dm(T,C){return C=typeof C=="function"?C:t,Gs(T,_|E,C)}function aE(T,C){return C==null||Wc(T,C,na(C))}function Ch(T,C){return T===C||T!==T&&C!==C}var Rw=hn(Pa),d_=hn(function(T,C){return T>=C}),p_=On(function(){return arguments}())?On:function(T){return Ya(T)&&Lr.call(T,"callee")&&!_c.call(T,"callee")},Dr=yt.isArray,bb=cu?Ei(cu):gr;function Lo(T){return T!=null&&Ud(T.length)&&!Gf(T)}function oo(T){return Ya(T)&&Lo(T)}function lE(T){return T===!0||T===!1||Ya(T)&&Ws(T)==et}var Hf=Md||v_,kw=qs?Ei(qs):Ir;function yp(T){return Ya(T)&&T.nodeType===1&&!kr(T)}function kv(T){if(T==null)return!0;if(Lo(T)&&(Dr(T)||typeof T=="string"||typeof T.splice=="function"||Hf(T)||xg(T)||p_(T)))return!T.length;var C=Yl(T);if(C==it||C==pt)return!T.size;if(id(T))return!ro(T).length;for(var P in T)if(Lr.call(T,P))return!1;return!0}function ii(T,C){return Fr(T,C)}function Qs(T,C,P){P=typeof P=="function"?P:t;var Y=P?P(T,C):t;return Y===t?Fr(T,C,t,P):!!Y}function Tb(T){if(!Ya(T))return!1;var C=Ws(T);return C==Ne||C==rt||typeof T.message=="string"&&typeof T.name=="string"&&!kr(T)}function Eb(T){return typeof T=="number"&&fl(T)}function Gf(T){if(!wa(T))return!1;var C=Ws(T);return C==we||C==ze||C==Ze||C==Et}function Ov(T){return typeof T=="number"&&T==$r(T)}function Ud(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=j}function wa(T){var C=typeof T;return T!=null&&(C=="object"||C=="function")}function Ya(T){return T!=null&&typeof T=="object"}var od=hu?Ei(hu):Ai;function Xi(T,C){return T===C||zi(T,C,r_(C))}function Bm(T,C,P){return P=typeof P=="function"?P:t,zi(T,C,r_(C),P)}function $b(T){return bp(T)&&T!=+T}function Sb(T){if(wv(T))throw new Nn(o);return Gl(T)}function d0(T){return T===null}function mR(T){return T==null}function bp(T){return typeof T=="number"||Ya(T)&&Ws(T)==nt}function kr(T){if(!Ya(T)||Ws(T)!=At)return!1;var C=pl(T);if(C===null)return!0;var P=Lr.call(C,"constructor")&&C.constructor;return typeof P=="function"&&P instanceof P&&gc.call(P)==Yo}var tf=ka?Ei(ka):$u;function ta(T){return Ov(T)&&T>=-j&&T<=j}var wb=ci?Ei(ci):qu;function p0(T){return typeof T=="string"||!Dr(T)&&Ya(T)&&Ws(T)==be}function ad(T){return typeof T=="symbol"||Ya(T)&&Ws(T)==Z}var xg=Zr?Ei(Zr):Su;function Ow(T){return T===t}function Lw(T){return Ya(T)&&Yl(T)==lt}function Mh(T){return Ya(T)&&Ws(T)==mt}var uE=hn(_a),nf=hn(function(T,C){return T<=C});function cE(T){if(!T)return[];if(Lo(T))return p0(T)?Xr(T):ts(T);if(Oa&&T[Oa])return ph(T[Oa]());var C=Yl(T),P=C==it?pc:C==pt?Gu:__;return P(T)}function Wf(T){if(!T)return T===0?T:0;if(T=Eo(T),T===Ie||T===-Ie){var C=T<0?-1:1;return C*te}return T===T?T:0}function $r(T){var C=Wf(T),P=C%1;return C===C?P?C-P:C:0}function Lv(T){return T?Ku($r(T),0,le):0}function Eo(T){if(typeof T=="number")return T;if(ad(T))return q;if(wa(T)){var C=typeof T.valueOf=="function"?T.valueOf():T;T=wa(C)?C+"":C}if(typeof T!="string")return T===0?T:+T;T=Hh(T);var P=Qr.test(T);return P||wr.test(T)?Ho(T.slice(2),P?2:8):mr.test(T)?q:+T}function Nw(T){return yo(T,xa(T))}function Je(T){return T?Ku($r(T),-j,j):T===0?T:0}function Jr(T){return T==null?"":es(T)}var Nv=jl(function(T,C){if(id(C)||Lo(C)){yo(C,na(C),T);return}for(var P in C)Lr.call(C,P)&&qo(T,P,C[P])}),xb=jl(function(T,C){yo(C,xa(C),T)}),Tp=jl(function(T,C,P,Y){yo(C,xa(C),T,Y)}),Cg=jl(function(T,C,P,Y){yo(C,na(C),T,Y)}),Cb=kn(Od);function f0(T,C){var P=Hs(T);return C==null?P:Ui(P,C)}var hE=Gn(function(T,C){T=An(T);var P=-1,Y=C.length,ue=Y>2?C[2]:t;for(ue&&Ii(C[0],C[1],ue)&&(Y=1);++P<Y;)for(var ye=C[P],Ue=xa(ye),Ye=-1,ot=Ue.length;++Ye<ot;){var Ht=Ue[Ye],Gt=T[Ht];(Gt===t||Ch(Gt,Vi[Ht])&&!Lr.call(T,Ht))&&(T[Ht]=ye[Ht])}return T}),Dw=Gn(function(T){return T.push(t,Xe),Un(ld,t,T)});function zd(T,C){return lp(T,jn(C,3),mo)}function dE(T,C){return lp(T,jn(C,3),Ba)}function Dv(T,C){return T==null?T:Eu(T,jn(C,3),xa)}function pE(T,C){return T==null?T:Ju(T,jn(C,3),xa)}function Bw(T,C){return T&&mo(T,jn(C,3))}function Pw(T,C){return T&&Ba(T,jn(C,3))}function Fw(T){return T==null?[]:vs(T,na(T))}function Uw(T){return T==null?[]:vs(T,xa(T))}function f_(T,C,P){var Y=T==null?t:no(T,C);return Y===t?P:Y}function fE(T,C){return T!=null&&t0(T,C,Qu)}function m_(T,C){return T!=null&&t0(T,C,hp)}var mE=re(function(T,C,P){C!=null&&typeof C.toString!="function"&&(C=zs.call(C)),T[C]=P},CE(Ih)),Bv=re(function(T,C,P){C!=null&&typeof C.toString!="function"&&(C=zs.call(C)),Lr.call(T,C)?T[C].push(P):T[C]=[P]},jn),Pv=Gn(wn);function na(T){return Lo(T)?rn(T):ro(T)}function xa(T){return Lo(T)?rn(T,!0):qh(T)}function zw(T,C){var P={};return C=jn(C,3),mo(T,function(Y,ue,ye){bu(P,C(Y,ue,ye),Y)}),P}function Vf(T,C){var P={};return C=jn(C,3),mo(T,function(Y,ue,ye){bu(P,ue,C(Y,ue,ye))}),P}var Pm=jl(function(T,C,P){go(T,C,P)}),ld=jl(function(T,C,P,Y){go(T,C,P,Y)}),Hw=kn(function(T,C){var P={};if(T==null)return P;var Y=!1;C=hi(C,function(ye){return ye=Mu(ye,T),Y||(Y=ye.length>1),ye}),yo(T,hr(T),P),Y&&(P=Gs(P,_|v|E,kt));for(var ue=C.length;ue--;)$h(P,C[ue]);return P});function m0(T,C){return Mb(T,vt(jn(C)))}var Vt=kn(function(T,C){return T==null?{}:Cu(T,C)});function Mb(T,C){if(T==null)return{};var P=hi(hr(T),function(Y){return[Y]});return C=jn(C),Eh(T,P,function(Y,ue){return C(Y,ue[0])})}function gR(T,C,P){C=Mu(C,T);var Y=-1,ue=C.length;for(ue||(ue=1,T=t);++Y<ue;){var ye=T==null?t:T[Kl(C[Y])];ye===t&&(Y=ue,ye=P),T=Gf(ye)?ye.call(T):ye}return T}function _R(T,C,P){return T==null?T:ni(T,C,P)}function vR(T,C,P,Y){return Y=typeof Y=="function"?Y:t,T==null?T:ni(T,C,P,Y)}var Ab=ft(na),Fv=ft(xa);function ki(T,C,P){var Y=Dr(T),ue=Y||Hf(T)||xg(T);if(C=jn(C,4),P==null){var ye=T&&T.constructor;ue?P=Y?new ye:[]:wa(T)?P=Gf(ye)?Hs(pl(T)):{}:P={}}return(ue?Ti:mo)(T,function(Ue,Ye,ot){return C(P,Ue,Ye,ot)}),P}function g_(T,C){return T==null?!0:$h(T,C)}function Ib(T,C,P){return T==null?T:Xs(T,C,Ys(P))}function yR(T,C,P,Y){return Y=typeof Y=="function"?Y:t,T==null?T:Xs(T,C,Ys(P),Y)}function __(T){return T==null?[]:di(T,na(T))}function Ep(T){return T==null?[]:di(T,xa(T))}function Uv(T,C,P){return P===t&&(P=C,C=t),P!==t&&(P=Eo(P),P=P===P?P:0),C!==t&&(C=Eo(C),C=C===C?C:0),Ku(Eo(T),C,P)}function ns(T,C,P){return C=Wf(C),P===t?(P=C,C=0):P=Wf(P),T=Eo(T),jc(T,C,P)}function Gw(T,C,P){if(P&&typeof P!="boolean"&&Ii(T,C,P)&&(C=P=t),P===t&&(typeof C=="boolean"?(P=C,C=t):typeof T=="boolean"&&(P=T,T=t)),T===t&&C===t?(T=0,C=1):(T=Wf(T),C===t?(C=T,T=0):C=Wf(C)),T>C){var Y=T;T=C,C=Y}if(P||T%1||C%1){var ue=ml();return Ko(T+ue*(C-T+Pc("1e-"+((ue+"").length-1))),C)}return ys(T,C)}var gE=c(function(T,C,P){return C=C.toLowerCase(),T+(P?Mg(C):C)});function Mg(T){return Ob(Jr(T).toLowerCase())}function _E(T){return T=Jr(T),T&&T.replace(Fo,up).replace(Pi,"")}function vE(T,C,P){T=Jr(T),C=es(C);var Y=T.length;P=P===t?Y:Ku($r(P),0,Y);var ue=P;return P-=C.length,P>=0&&T.slice(P,ue)==C}function yE(T){return T=Jr(T),T&&nr.test(T)?T.replace(Tn,cp):T}function bE(T){return T=Jr(T),T&&It.test(T)?T.replace(qe,"\\$&"):T}var zv=c(function(T,C,P){return T+(P?"-":"")+C.toLowerCase()}),bR=c(function(T,C,P){return T+(P?" ":"")+C.toLowerCase()}),Ww=$("toLowerCase");function TR(T,C,P){T=Jr(T),C=$r(C);var Y=C?ms(T):0;if(!C||Y>=C)return T;var ue=(C-Y)/2;return gt(Wu(ue),P)+T+gt(Hc(ue),P)}function ER(T,C,P){T=Jr(T),C=$r(C);var Y=C?ms(T):0;return C&&Y<C?T+gt(C-Y,P):T}function rf(T,C,P){T=Jr(T),C=$r(C);var Y=C?ms(T):0;return C&&Y<C?gt(C-Y,P)+T:T}function TE(T,C,P){return P||C==null?C=0:C&&(C=+C),Pp(Jr(T).replace(qt,""),C||0)}function EE(T,C,P){return(P?Ii(T,C,P):C===t)?C=1:C=$r(C),Ls(Jr(T),C)}function g0(){var T=arguments,C=Jr(T[0]);return T.length<3?C:C.replace(T[1],T[2])}var Vw=c(function(T,C,P){return T+(P?"_":"")+C.toLowerCase()});function $E(T,C,P){return P&&typeof P!="number"&&Ii(T,C,P)&&(C=P=t),P=P===t?le:P>>>0,P?(T=Jr(T),T&&(typeof C=="string"||C!=null&&!tf(C))&&(C=es(C),!C&&Hu(T))?za(Xr(T),0,P):T.split(C,P)):[]}var Hv=c(function(T,C,P){return T+(P?" ":"")+Ob(C)});function jw(T,C,P){return T=Jr(T),P=P==null?0:Ku($r(P),0,T.length),C=es(C),T.slice(P,P+C.length)==C}function SE(T,C,P){var Y=ve.templateSettings;P&&Ii(T,C,P)&&(C=t),T=Jr(T),C=Tp({},C,Y,Me);var ue=Tp({},C.imports,Y.imports,Me),ye=na(ue),Ue=di(ue,ye),Ye,ot,Ht=0,Gt=C.interpolate||wo,Qt="__p += '",yn=xr((C.escape||wo).source+"|"+Gt.source+"|"+(Gt===Qn?Bn:wo).source+"|"+(C.evaluate||wo).source+"|$","g"),Rn="//# sourceURL="+(Lr.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Dl+"]")+`
`;T.replace(yn,function(rr,si,_i,ud,nh,Zl){return _i||(_i=ud),Qt+=T.slice(Ht,Zl).replace(nl,Gh),si&&(Ye=!0,Qt+=`' +
__e(`+si+`) +
'`),nh&&(ot=!0,Qt+=`';
`+nh+`;
__p += '`),_i&&(Qt+=`' +
((__t = (`+_i+`)) == null ? '' : __t) +
'`),Ht=Zl+rr.length,rr}),Qt+=`';
`;var pr=Lr.call(C,"variable")&&C.variable;if(!pr)Qt=`with (obj) {
`+Qt+`
}
`;else if(Dt.test(pr))throw new Nn(u);Qt=(ot?Qt.replace(Wt,""):Qt).replace(st,"$1").replace(Ut,"$1;"),Qt="function("+(pr||"obj")+`) {
`+(pr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ye?", __e = _.escape":"")+(ot?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Qt+`return __p
}`;var Or=Gv(function(){return Jn(ye,Rn+"return "+Qt).apply(t,Ue)});if(Or.source=Qt,Tb(Or))throw Or;return Or}function Ah(T){return Jr(T).toLowerCase()}function jf(T){return Jr(T).toUpperCase()}function Xw(T,C,P){if(T=Jr(T),T&&(P||C===t))return Hh(T);if(!T||!(C=es(C)))return T;var Y=Xr(T),ue=Xr(C),ye=$i(Y,ue),Ue=Vo(Y,ue)+1;return za(Y,ye,Ue).join("")}function Rb(T,C,P){if(T=Jr(T),T&&(P||C===t))return T.slice(0,hl(T)+1);if(!T||!(C=es(C)))return T;var Y=Xr(T),ue=Vo(Y,Xr(C))+1;return za(Y,0,ue).join("")}function Yw(T,C,P){if(T=Jr(T),T&&(P||C===t))return T.replace(qt,"");if(!T||!(C=es(C)))return T;var Y=Xr(T),ue=$i(Y,Xr(C));return za(Y,ue).join("")}function _0(T,C){var P=ne,Y=ie;if(wa(C)){var ue="separator"in C?C.separator:ue;P="length"in C?$r(C.length):P,Y="omission"in C?es(C.omission):Y}T=Jr(T);var ye=T.length;if(Hu(T)){var Ue=Xr(T);ye=Ue.length}if(P>=ye)return T;var Ye=P-ms(Y);if(Ye<1)return Y;var ot=Ue?za(Ue,0,Ye).join(""):T.slice(0,Ye);if(ue===t)return ot+Y;if(Ue&&(Ye+=ot.length-Ye),tf(ue)){if(T.slice(Ye).search(ue)){var Ht,Gt=ot;for(ue.global||(ue=xr(ue.source,Jr(er.exec(ue))+"g")),ue.lastIndex=0;Ht=ue.exec(Gt);)var Qt=Ht.index;ot=ot.slice(0,Qt===t?Ye:Qt)}}else if(T.indexOf(es(ue),Ye)!=Ye){var yn=ot.lastIndexOf(ue);yn>-1&&(ot=ot.slice(0,yn))}return ot+Y}function kb(T){return T=Jr(T),T&&Mr.test(T)?T.replace(Pt,Xo):T}var v0=c(function(T,C,P){return T+(P?" ":"")+C.toUpperCase()}),Ob=$("toUpperCase");function Kw(T,C,P){return T=Jr(T),C=P?t:C,C===t?dc(T)?Fc(T):Rf(T):T.match(C)||[]}var Gv=Gn(function(T,C){try{return Un(T,t,C)}catch(P){return Tb(P)?P:new Nn(P)}}),wE=kn(function(T,C){return Ti(C,function(P){P=Kl(P),bu(T,P,jt(T[P],T))}),T});function xE(T){var C=T==null?0:T.length,P=jn();return T=C?hi(T,function(Y){if(typeof Y[1]!="function")throw new gs(l);return[P(Y[0]),Y[1]]}):[],Gn(function(Y){for(var ue=-1;++ue<C;){var ye=T[ue];if(Un(ye[0],this,Y))return Un(ye[1],this,Y)}})}function $R(T){return Ld(Gs(T,_))}function CE(T){return function(){return T}}function SR(T,C){return T==null||T!==T?C:T}var Jw=L(),wR=L(!0);function Ih(T){return T}function Oi(T){return Os(typeof T=="function"?T:Gs(T,_))}function Xf(T){return xu(Gs(T,_))}function Wv(T,C){return js(T,Gs(C,_))}var Lb=Gn(function(T,C){return function(P){return wn(P,T,C)}}),Yf=Gn(function(T,C){return function(P){return wn(T,P,C)}});function ME(T,C,P){var Y=na(C),ue=vs(C,Y);P==null&&!(wa(C)&&(ue.length||!Y.length))&&(P=C,C=T,T=this,ue=vs(C,na(C)));var ye=!(wa(P)&&"chain"in P)||!!P.chain,Ue=Gf(T);return Ti(ue,function(Ye){var ot=C[Ye];T[Ye]=ot,Ue&&(T.prototype[Ye]=function(){var Ht=this.__chain__;if(ye||Ht){var Gt=T(this.__wrapped__),Qt=Gt.__actions__=ts(this.__actions__);return Qt.push({func:ot,args:arguments,thisArg:T}),Gt.__chain__=Ht,Gt}return ot.apply(T,pu([this.value()],arguments))})}),T}function y0(){return Vr._===this&&(Vr._=mh),this}function Nb(){}function Qw(T){return T=$r(T),Gn(function(C){return _o(C,T)})}var AE=We(hi),xR=We(du),IE=We(hh);function Db(T){return Ta(T)?Ur(Kl(T)):Xc(T)}function qw(T){return function(C){return T==null?t:no(T,C)}}var RE=Zt(),Bb=Zt(!0);function Pb(){return[]}function v_(){return!1}function kE(){return{}}function OE(){return""}function LE(){return!0}function NE(T,C){if(T=$r(T),T<1||T>j)return[];var P=le,Y=Ko(T,le);C=jn(C),T-=le;for(var ue=mu(Y,C);++P<T;)C(P);return ue}function Ag(T){return Dr(T)?hi(T,Kl):ad(T)?[T]:ts(Cv(Jr(T)))}function DE(T){var C=++Ao;return Jr(T)+C}var BE=Se(function(T,C){return T+C},0),PE=nn("ceil"),FE=Se(function(T,C){return T/C},1),UE=nn("floor");function Mn(T){return T&&T.length?Tu(T,Ih,Pa):t}function Zw(T,C){return T&&T.length?Tu(T,jn(C,2),Pa):t}function ex(T){return ua(T,Ih)}function y_(T,C){return ua(T,jn(C,2))}function Vv(T){return T&&T.length?Tu(T,Ih,_a):t}function b0(T,C){return T&&T.length?Tu(T,jn(C,2),_a):t}var tx=Se(function(T,C){return T*C},1),Fb=nn("round"),nx=Se(function(T,C){return T-C},0);function rx(T){return T&&T.length?Mo(T,Ih):0}function ix(T,C){return T&&T.length?Mo(T,jn(C,2)):0}return ve.after=Fe,ve.ary=Ke,ve.assign=Nv,ve.assignIn=xb,ve.assignInWith=Tp,ve.assignWith=Cg,ve.at=Cb,ve.before=$t,ve.bind=jt,ve.bindAll=wE,ve.bindKey=en,ve.castArray=Fd,ve.chain=Ou,ve.chunk=Em,ve.compact=Jl,ve.concat=r0,ve.cond=xE,ve.conforms=$R,ve.constant=CE,ve.countBy=vb,ve.create=f0,ve.curry=Jt,ve.curryRight=vn,ve.debounce=In,ve.defaults=hE,ve.defaultsDeep=Dw,ve.defer=Ln,ve.delay=Js,ve.difference=so,ve.differenceBy=wi,ve.differenceWith=El,ve.drop=$a,ve.dropRight=Ql,ve.dropRightWhile=$l,ve.dropWhile=Df,ve.fill=Wa,ve.filter=Pd,ve.flatMap=Sg,ve.flatMapDeep=u_,ve.flatMapDepth=yb,ve.flatten=jp,ve.flattenDeep=s_,ve.flattenDepth=$m,ve.flip=_t,ve.flow=Jw,ve.flowRight=wR,ve.fromPairs=Mc,ve.functions=Fw,ve.functionsIn=Uw,ve.groupBy=wg,ve.initial=Dd,ve.intersection=yg,ve.intersectionBy=bg,ve.intersectionWith=Ds,ve.invert=mE,ve.invertBy=Bv,ve.invokeMap=qp,ve.iteratee=Oi,ve.keyBy=Om,ve.keys=na,ve.keysIn=xa,ve.map=ri,ve.mapKeys=zw,ve.mapValues=Vf,ve.matches=Xf,ve.matchesProperty=Wv,ve.memoize=tt,ve.merge=Pm,ve.mergeWith=ld,ve.method=Lb,ve.methodOf=Yf,ve.mixin=ME,ve.negate=vt,ve.nthArg=Qw,ve.omit=Hw,ve.omitBy=m0,ve.once=sn,ve.orderBy=Zp,ve.over=AE,ve.overArgs=Hn,ve.overEvery=xR,ve.overSome=IE,ve.partial=Dn,ve.partialRight=Vn,ve.partition=Lm,ve.pick=Vt,ve.pickBy=Mb,ve.property=Db,ve.propertyOf=qw,ve.pull=o_,ve.pullAll=gp,ve.pullAllBy=Tg,ve.pullAllWith=nc,ve.pullAt=Bd,ve.range=RE,ve.rangeRight=Bb,ve.rearg=dr,ve.reject=h_,ve.remove=bo,ve.rest=Xa,ve.reverse=Sa,ve.sampleSize=y,ve.set=_R,ve.setWith=vR,ve.shuffle=I,ve.slice=Mv,ve.sortBy=K,ve.sortedUniq=Ff,ve.sortedUniqBy=o0,ve.split=$E,ve.spread=Ri,ve.tail=xm,ve.take=a0,ve.takeRight=Av,ve.takeRightWhile=Cm,ve.takeWhile=_p,ve.tap=a_,ve.throttle=ef,ve.thru=Eg,ve.toArray=cE,ve.toPairs=Ab,ve.toPairsIn=Fv,ve.toPath=Ag,ve.toPlainObject=Nw,ve.transform=ki,ve.unary=h0,ve.union=Iv,ve.unionBy=sE,ve.unionWith=l0,ve.uniq=u0,ve.uniqBy=Yp,ve.uniqWith=En,ve.unset=g_,ve.unzip=wh,ve.unzipWith=Mm,ve.update=Ib,ve.updateWith=yR,ve.values=__,ve.valuesIn=Ep,ve.without=To,ve.words=Kw,ve.wrap=ql,ve.xor=Rv,ve.xorBy=c0,ve.xorWith=Am,ve.zip=oE,ve.zipObject=_b,ve.zipObjectDeep=Ic,ve.zipWith=Bs,ve.entries=Ab,ve.entriesIn=Fv,ve.extend=xb,ve.extendWith=Tp,ME(ve,ve),ve.add=BE,ve.attempt=Gv,ve.camelCase=gE,ve.capitalize=Mg,ve.ceil=PE,ve.clamp=Uv,ve.clone=Iw,ve.cloneDeep=fR,ve.cloneDeepWith=Dm,ve.cloneWith=pR,ve.conformsTo=aE,ve.deburr=_E,ve.defaultTo=SR,ve.divide=FE,ve.endsWith=vE,ve.eq=Ch,ve.escape=yE,ve.escapeRegExp=bE,ve.every=l_,ve.find=Kr,ve.findIndex=fp,ve.findKey=zd,ve.findLast=Rm,ve.findLastIndex=mp,ve.findLastKey=dE,ve.floor=UE,ve.forEach=c_,ve.forEachRight=km,ve.forIn=Dv,ve.forInRight=pE,ve.forOwn=Bw,ve.forOwnRight=Pw,ve.get=f_,ve.gt=Rw,ve.gte=d_,ve.has=fE,ve.hasIn=m_,ve.head=Va,ve.identity=Ih,ve.includes=Qp,ve.indexOf=Ac,ve.inRange=ns,ve.invoke=Pv,ve.isArguments=p_,ve.isArray=Dr,ve.isArrayBuffer=bb,ve.isArrayLike=Lo,ve.isArrayLikeObject=oo,ve.isBoolean=lE,ve.isBuffer=Hf,ve.isDate=kw,ve.isElement=yp,ve.isEmpty=kv,ve.isEqual=ii,ve.isEqualWith=Qs,ve.isError=Tb,ve.isFinite=Eb,ve.isFunction=Gf,ve.isInteger=Ov,ve.isLength=Ud,ve.isMap=od,ve.isMatch=Xi,ve.isMatchWith=Bm,ve.isNaN=$b,ve.isNative=Sb,ve.isNil=mR,ve.isNull=d0,ve.isNumber=bp,ve.isObject=wa,ve.isObjectLike=Ya,ve.isPlainObject=kr,ve.isRegExp=tf,ve.isSafeInteger=ta,ve.isSet=wb,ve.isString=p0,ve.isSymbol=ad,ve.isTypedArray=xg,ve.isUndefined=Ow,ve.isWeakMap=Lw,ve.isWeakSet=Mh,ve.join=Sm,ve.kebabCase=zv,ve.last=Sl,ve.lastIndexOf=ja,ve.lowerCase=bR,ve.lowerFirst=Ww,ve.lt=uE,ve.lte=nf,ve.max=Mn,ve.maxBy=Zw,ve.mean=ex,ve.meanBy=y_,ve.min=Vv,ve.minBy=b0,ve.stubArray=Pb,ve.stubFalse=v_,ve.stubObject=kE,ve.stubString=OE,ve.stubTrue=LE,ve.multiply=tx,ve.nth=Bf,ve.noConflict=y0,ve.noop=Nb,ve.now=pe,ve.pad=TR,ve.padEnd=ER,ve.padStart=rf,ve.parseInt=TE,ve.random=Gw,ve.reduce=Nm,ve.reduceRight=zf,ve.repeat=EE,ve.replace=g0,ve.result=gR,ve.round=Fb,ve.runInContext=je,ve.sample=g,ve.size=B,ve.snakeCase=Vw,ve.some=W,ve.sortedIndex=wm,ve.sortedIndexBy=i0,ve.sortedIndexOf=gb,ve.sortedLastIndex=Xp,ve.sortedLastIndexBy=Pf,ve.sortedLastIndexOf=s0,ve.startCase=Hv,ve.startsWith=jw,ve.subtract=nx,ve.sum=rx,ve.sumBy=ix,ve.template=SE,ve.times=NE,ve.toFinite=Wf,ve.toInteger=$r,ve.toLength=Lv,ve.toLower=Ah,ve.toNumber=Eo,ve.toSafeInteger=Je,ve.toString=Jr,ve.toUpper=jf,ve.trim=Xw,ve.trimEnd=Rb,ve.trimStart=Yw,ve.truncate=_0,ve.unescape=kb,ve.uniqueId=DE,ve.upperCase=v0,ve.upperFirst=Ob,ve.each=c_,ve.eachRight=km,ve.first=Va,ME(ve,function(){var T={};return mo(ve,function(C,P){Lr.call(ve.prototype,P)||(T[P]=C)}),T}(),{chain:!1}),ve.VERSION=i,Ti(["bind","bindKey","curry","curryRight","partial","partialRight"],function(T){ve[T].placeholder=ve}),Ti(["drop","take"],function(T,C){zn.prototype[T]=function(P){P=P===t?1:eo($r(P),0);var Y=this.__filtered__&&!C?new zn(this):this.clone();return Y.__filtered__?Y.__takeCount__=Ko(P,Y.__takeCount__):Y.__views__.push({size:Ko(P,le),type:T+(Y.__dir__<0?"Right":"")}),Y},zn.prototype[T+"Right"]=function(P){return this.reverse()[T](P).reverse()}}),Ti(["filter","map","takeWhile"],function(T,C){var P=C+1,Y=P==ae||P==ge;zn.prototype[T]=function(ue){var ye=this.clone();return ye.__iteratees__.push({iteratee:jn(ue,3),type:P}),ye.__filtered__=ye.__filtered__||Y,ye}}),Ti(["head","last"],function(T,C){var P="take"+(C?"Right":"");zn.prototype[T]=function(){return this[P](1).value()[0]}}),Ti(["initial","tail"],function(T,C){var P="drop"+(C?"":"Right");zn.prototype[T]=function(){return this.__filtered__?new zn(this):this[P](1)}}),zn.prototype.compact=function(){return this.filter(Ih)},zn.prototype.find=function(T){return this.filter(T).head()},zn.prototype.findLast=function(T){return this.reverse().find(T)},zn.prototype.invokeMap=Gn(function(T,C){return typeof T=="function"?new zn(this):this.map(function(P){return wn(P,T,C)})}),zn.prototype.reject=function(T){return this.filter(vt(jn(T)))},zn.prototype.slice=function(T,C){T=$r(T);var P=this;return P.__filtered__&&(T>0||C<0)?new zn(P):(T<0?P=P.takeRight(-T):T&&(P=P.drop(T)),C!==t&&(C=$r(C),P=C<0?P.dropRight(-C):P.take(C-T)),P)},zn.prototype.takeRightWhile=function(T){return this.reverse().takeWhile(T).reverse()},zn.prototype.toArray=function(){return this.take(le)},mo(zn.prototype,function(T,C){var P=/^(?:filter|find|map|reject)|While$/.test(C),Y=/^(?:head|last)$/.test(C),ue=ve[Y?"take"+(C=="last"?"Right":""):C],ye=Y||/^find/.test(C);!ue||(ve.prototype[C]=function(){var Ue=this.__wrapped__,Ye=Y?[1]:arguments,ot=Ue instanceof zn,Ht=Ye[0],Gt=ot||Dr(Ue),Qt=function(si){var _i=ue.apply(ve,pu([si],Ye));return Y&&yn?_i[0]:_i};Gt&&P&&typeof Ht=="function"&&Ht.length!=1&&(ot=Gt=!1);var yn=this.__chain__,Rn=!!this.__actions__.length,pr=ye&&!yn,Or=ot&&!Rn;if(!ye&&Gt){Ue=Or?Ue:new zn(this);var rr=T.apply(Ue,Ye);return rr.__actions__.push({func:Eg,args:[Qt],thisArg:t}),new Br(rr,yn)}return pr&&Or?T.apply(this,Ye):(rr=this.thru(Qt),pr?Y?rr.value()[0]:rr.value():rr)})}),Ti(["pop","push","shift","sort","splice","unshift"],function(T){var C=po[T],P=/^(?:push|sort|unshift)$/.test(T)?"tap":"thru",Y=/^(?:pop|shift)$/.test(T);ve.prototype[T]=function(){var ue=arguments;if(Y&&!this.__chain__){var ye=this.value();return C.apply(Dr(ye)?ye:[],ue)}return this[P](function(Ue){return C.apply(Dr(Ue)?Ue:[],ue)})}}),mo(zn.prototype,function(T,C){var P=ve[C];if(P){var Y=P.name+"";Lr.call(yc,Y)||(yc[Y]=[]),yc[Y].push({name:C,func:P})}}),yc[H(t,O).name]=[{name:"wrapper",func:t}],zn.prototype.clone=Fp,zn.prototype.reverse=da,zn.prototype.value=Yr,ve.prototype.at=xh,ve.prototype.chain=Im,ve.prototype.commit=Kp,ve.prototype.next=Jp,ve.prototype.plant=sd,ve.prototype.reverse=vp,ve.prototype.toJSON=ve.prototype.valueOf=ve.prototype.value=$g,ve.prototype.first=ve.prototype.head,Oa&&(ve.prototype[Oa]=Uf),ve},pi=xd();Ci?((Ci.exports=pi)._=pi,ps._=pi):Vr._=pi}).call(B_)})(sm,sm.exports);const Abe=sm.exports,Ibe=(r,e)=>({clock:new Cbe,items:{},tfs:{},hulls:{},lines:{},texts:{},points:{},widgets:{},onMove:(t,i,s,o)=>r(l=>{console.log(o),l[i][t].position={...o.position},l[i][t].rotation=o.quaternion,l[i][t].rotation.x=o.quaternion.x,l[i][t].rotation.y=o.quaternion.y,l[i][t].rotation.z=o.quaternion.z,l[i][t].rotation.w=o.quaternion.w,l[i][t].scale={...o.scale}}),onClick:(t,i,s,o)=>{i||console.log(`id: ${t} clicked!`,s),e().items[t]&&!i&&o.stopPropagation()},onPointerOver:(t,i,s)=>{},onPointerOut:(t,i,s)=>{},pause:()=>r(t=>{t.clock.setTimescale(0)}),play:t=>r(i=>{i.clock.setTimescale(t||1)}),reset:t=>r(i=>{console.log(`setting time to ${t}`),i.clock._elapsed=t?t*1e3:0}),clearItems:()=>r(t=>({items:{}})),clearLines:()=>r(t=>({lines:{}})),clearTfs:()=>r(t=>({tfs:{}})),clearHulls:()=>r(t=>({hulls:{}})),clearTexts:()=>r(t=>({texts:{}})),clearPoints:()=>r(t=>({points:{}})),setItems:t=>r(i=>({items:t})),setLines:t=>r(i=>({lines:t})),setTfs:t=>r(i=>({tfs:t})),setHulls:t=>r(i=>({hulls:t})),setTexts:t=>r(i=>({texts:t})),setPoints:t=>r(i=>({points:t})),removeItem:t=>r(i=>{delete i.items[t]}),removeLine:t=>r(i=>{delete i.lines[t]}),removeTf:t=>r(i=>{delete i.tfs[t]}),removeHull:t=>r(i=>{delete i.hulls[t]}),removeText:t=>r(i=>{delete i.texts[t]}),removePoint:t=>r(i=>{delete i.points[t]}),setItem:(t,i)=>r(s=>{s.items[t]=i}),setLine:(t,i)=>r(s=>{s.lines[t]=i}),setTf:(t,i)=>r(s=>{s.tfs[t]=i}),setHull:(t,i)=>r(s=>{s.hulls[t]=i}),setText:(t,i)=>r(s=>{s.texts[t]=i}),setPoint:(t,i)=>r(s=>{s.points[t]=i}),setProperty:(t,i)=>r(s=>{Abe.set(s,t,i)})}),Rbe=xbe(dbe(Ibe)),kbe=cbe(Rbe),$7=de.createContext(),ws=(r,e)=>{const t=de.useContext($7);return b7(t,r,e)},Obe=({store:r,children:e,debug:t=!1})=>(t&&console.log("SceneProvider regenerated"),Xt($7.Provider,{value:r||kbe,children:e})),Lbe=vr.forwardRef((r,e)=>Xt("ambientLight",{ref:e,...r}));vr.forwardRef((r,e)=>Xt("pointLight",{ref:e,...r}));const Nbe=vr.forwardRef((r,e)=>Xt("directionalLight",{ref:e,...r})),Kg=(r,e,t,i)=>{var s=new _n;return s.setRGB(r/255,e/255,t/255),i<=.99?new JS({color:s.getHex(),opacity:i+.1,transparent:!0,depthWrite:!0,blendSrc:WI,blendDst:VI,blendEquation:UB,blending:G_}):new JS({color:s.getHex(),opacity:i,blending:G_})},NM=sm.exports.memoize(r=>{var e=new _n(r),t=`
		varying vec3	vVertexWorldPosition;
		varying vec3	vVertexNormal;

		// varying vec4	vFragColor;

		void main(){
			vVertexNormal	= normalize(normalMatrix * normal);

			vVertexWorldPosition	= (modelMatrix * vec4(position, 1.0)).xyz;

			// set gl_Position
			gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1.0);
		}`,i=`
		uniform vec3	glowColor;
		uniform float	coeficient;
		uniform float	power;

		varying vec3	vVertexNormal;
		varying vec3	vVertexWorldPosition;

		// varying vec4	vFragColor;

		void main(){
			vec3 worldCameraToVertex= vVertexWorldPosition - cameraPosition;
			vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;
			viewCameraToVertex	= normalize(viewCameraToVertex);
			float intensity		= pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);
			gl_FragColor		= vec4(glowColor, intensity);
		}`,s=new ah({uniforms:{coeficient:{type:"f",value:1.2},power:{type:"f",value:4},glowColor:{type:"c",value:e}},vertexShader:t,fragmentShader:i,blending:TA,transparent:!0,depthWrite:!1,depthTest:!1});return s});function Dbe(r){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;r=r.replace(e,function(i,s,o,l){return s+s+o+o+l+l});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}const uy=new vP,Cp=new Te,P0=new Te,Qa=new Bo,AG={X:new Te(1,0,0),Y:new Te(0,1,0),Z:new Te(0,0,1)},fL={type:"change"},IG={type:"mouseDown"},RG={type:"mouseUp",mode:null},kG={type:"objectChange"};class Bbe extends is{constructor(e,t){super(),t===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const i=new Gbe;this._gizmo=i,this.add(i);const s=new Wbe;this._plane=s,this.add(s);const o=this;function l(k,D){let N=D;Object.defineProperty(o,k,{get:function(){return N!==void 0?N:D},set:function(F){N!==F&&(N=F,s[k]=F,i[k]=F,o.dispatchEvent({type:k+"-changed",value:F}),o.dispatchEvent(fL))}}),o[k]=D,s[k]=D,i[k]=D}l("camera",e),l("object",void 0),l("enabled",!0),l("axis",null),l("mode","translate"),l("translationSnap",null),l("rotationSnap",null),l("scaleSnap",null),l("space","world"),l("size",1),l("dragging",!1),l("showX",!0),l("showY",!0),l("showZ",!0);const u=new Te,h=new Te,p=new Bo,m=new Bo,_=new Te,v=new Bo,E=new Te,w=new Te,x=new Te,A=0,O=new Te;l("worldPosition",u),l("worldPositionStart",h),l("worldQuaternion",p),l("worldQuaternionStart",m),l("cameraPosition",_),l("cameraQuaternion",v),l("pointStart",E),l("pointEnd",w),l("rotationAxis",x),l("rotationAngle",A),l("eye",O),this._offset=new Te,this._startNorm=new Te,this._endNorm=new Te,this._cameraScale=new Te,this._parentPosition=new Te,this._parentQuaternion=new Bo,this._parentQuaternionInv=new Bo,this._parentScale=new Te,this._worldScaleStart=new Te,this._worldQuaternionInv=new Bo,this._worldScale=new Te,this._positionStart=new Te,this._quaternionStart=new Bo,this._scaleStart=new Te,this._getPointer=Pbe.bind(this),this._onPointerDown=Ube.bind(this),this._onPointerHover=Fbe.bind(this),this._onPointerMove=zbe.bind(this),this._onPointerUp=Hbe.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye):this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;uy.setFromCamera(e,this.camera);const t=mL(this._gizmo.picker[this.mode],uy);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e.button!==0)&&this.axis!==null){uy.setFromCamera(e,this.camera);const t=mL(this._plane,uy,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,IG.mode=this.mode,this.dispatchEvent(IG)}}pointerMove(e){const t=this.axis,i=this.mode,s=this.object;let o=this.space;if(i==="scale"?o="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(o="world"),s===void 0||t===null||this.dragging===!1||e.button!==-1)return;uy.setFromCamera(e,this.camera);const l=mL(this._plane,uy,!0);if(l){if(this.pointEnd.copy(l.point).sub(this.worldPositionStart),i==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),o==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),o==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),s.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(o==="local"&&(s.position.applyQuaternion(Qa.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.position.applyQuaternion(this._quaternionStart)),o==="world"&&(s.parent&&s.position.add(Cp.setFromMatrixPosition(s.parent.matrixWorld)),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.parent&&s.position.sub(Cp.setFromMatrixPosition(s.parent.matrixWorld))));else if(i==="scale"){if(t.search("XYZ")!==-1){let u=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(u*=-1),P0.set(u,u,u)}else Cp.copy(this.pointStart),P0.copy(this.pointEnd),Cp.applyQuaternion(this._worldQuaternionInv),P0.applyQuaternion(this._worldQuaternionInv),P0.divide(Cp),t.search("X")===-1&&(P0.x=1),t.search("Y")===-1&&(P0.y=1),t.search("Z")===-1&&(P0.z=1);s.scale.copy(this._scaleStart).multiply(P0),this.scaleSnap&&(t.search("X")!==-1&&(s.scale.x=Math.round(s.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(s.scale.y=Math.round(s.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(s.scale.z=Math.round(s.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(i==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const u=20/this.worldPosition.distanceTo(Cp.setFromMatrixPosition(this.camera.matrixWorld));t==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Cp.copy(this.rotationAxis).cross(this.eye))*u):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(AG[t]),Cp.copy(AG[t]),o==="local"&&Cp.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(Cp.cross(this.eye).normalize())*u),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),o==="local"&&t!=="E"&&t!=="XYZE"?(s.quaternion.copy(this._quaternionStart),s.quaternion.multiply(Qa.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),s.quaternion.copy(Qa.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),s.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(fL),this.dispatchEvent(kG)}}pointerUp(e){e.button===0&&(this.dragging&&this.axis!==null&&(RG.mode=this.mode,this.dispatchEvent(RG)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){!this.enabled||this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(fL),this.dispatchEvent(kG),this.pointStart.copy(this.pointEnd))}getRaycaster(){return uy}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function Pbe(r){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:r.button};{const e=this.domElement.getBoundingClientRect();return{x:(r.clientX-e.left)/e.width*2-1,y:-(r.clientY-e.top)/e.height*2+1,button:r.button}}}function Fbe(r){if(this.enabled)switch(r.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(r));break}}function Ube(r){!this.enabled||(document.pointerLockElement||this.domElement.setPointerCapture(r.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(r)),this.pointerDown(this._getPointer(r)))}function zbe(r){!this.enabled||this.pointerMove(this._getPointer(r))}function Hbe(r){!this.enabled||(this.domElement.releasePointerCapture(r.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(r)))}function mL(r,e,t){const i=e.intersectObject(r,!0);for(let s=0;s<i.length;s++)if(i[s].object.visible||t)return i[s];return!1}const ZC=new pb,Do=new Te(0,1,0),OG=new Te(0,0,0),LG=new Sr,eM=new Bo,DM=new Bo,Lg=new Te,NG=new Sr,U$=new Te(1,0,0),yy=new Te(0,1,0),z$=new Te(0,0,1),tM=new Te,M$=new Te,A$=new Te;class Gbe extends is{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new dg({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new Sd({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=e.clone();i.opacity=.15;const s=t.clone();s.opacity=.5;const o=e.clone();o.color.setHex(16711680);const l=e.clone();l.color.setHex(65280);const u=e.clone();u.color.setHex(255);const h=e.clone();h.color.setHex(16711680),h.opacity=.5;const p=e.clone();p.color.setHex(65280),p.opacity=.5;const m=e.clone();m.color.setHex(255),m.opacity=.5;const _=e.clone();_.opacity=.25;const v=e.clone();v.color.setHex(16776960),v.opacity=.25,e.clone().color.setHex(16776960);const E=e.clone();E.color.setHex(7895160);const w=new ra(0,.04,.1,12);w.translate(0,.05,0);const x=new Ma(.08,.08,.08);x.translate(0,.04,0);const A=new Ar;A.setAttribute("position",new Pn([0,0,0,1,0,0],3));const O=new ra(.0075,.0075,.5,3);O.translate(0,.25,0);function k(ae,he){const ge=new eg(ae,.0075,3,64,he*Math.PI*2);return ge.rotateY(Math.PI/2),ge.rotateX(Math.PI/2),ge}function D(){const ae=new Ar;return ae.setAttribute("position",new Pn([0,0,0,1,1,1],3)),ae}const N={X:[[new bn(w,o),[.5,0,0],[0,0,-Math.PI/2]],[new bn(w,o),[-.5,0,0],[0,0,Math.PI/2]],[new bn(O,o),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new bn(w,l),[0,.5,0]],[new bn(w,l),[0,-.5,0],[Math.PI,0,0]],[new bn(O,l)]],Z:[[new bn(w,u),[0,0,.5],[Math.PI/2,0,0]],[new bn(w,u),[0,0,-.5],[-Math.PI/2,0,0]],[new bn(O,u),null,[Math.PI/2,0,0]]],XYZ:[[new bn(new ng(.1,0),_.clone()),[0,0,0]]],XY:[[new bn(new Ma(.15,.15,.01),m.clone()),[.15,.15,0]]],YZ:[[new bn(new Ma(.15,.15,.01),h.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new bn(new Ma(.15,.15,.01),p.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},F={X:[[new bn(new ra(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new bn(new ra(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new bn(new ra(.2,0,.6,4),i),[0,.3,0]],[new bn(new ra(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new bn(new ra(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new bn(new ra(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new bn(new ng(.2,0),i)]],XY:[[new bn(new Ma(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new bn(new Ma(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new bn(new Ma(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},z={START:[[new bn(new ng(.01,2),s),null,null,null,"helper"]],END:[[new bn(new ng(.01,2),s),null,null,null,"helper"]],DELTA:[[new vd(D(),s),null,null,null,"helper"]],X:[[new vd(A,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new vd(A,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new vd(A,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},V={XYZE:[[new bn(k(.5,1),E),null,[0,Math.PI/2,0]]],X:[[new bn(k(.5,.5),o)]],Y:[[new bn(k(.5,.5),l),null,[0,0,-Math.PI/2]]],Z:[[new bn(k(.5,.5),u),null,[0,Math.PI/2,0]]],E:[[new bn(k(.75,1),v),null,[0,Math.PI/2,0]]]},U={AXIS:[[new vd(A,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},ee={XYZE:[[new bn(new ug(.25,10,8),i)]],X:[[new bn(new eg(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new bn(new eg(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new bn(new eg(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new bn(new eg(.75,.1,2,24),i)]]},ne={X:[[new bn(x,o),[.5,0,0],[0,0,-Math.PI/2]],[new bn(O,o),[0,0,0],[0,0,-Math.PI/2]],[new bn(x,o),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new bn(x,l),[0,.5,0]],[new bn(O,l)],[new bn(x,l),[0,-.5,0],[0,0,Math.PI]]],Z:[[new bn(x,u),[0,0,.5],[Math.PI/2,0,0]],[new bn(O,u),[0,0,0],[Math.PI/2,0,0]],[new bn(x,u),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new bn(new Ma(.15,.15,.01),m),[.15,.15,0]]],YZ:[[new bn(new Ma(.15,.15,.01),h),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new bn(new Ma(.15,.15,.01),p),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new bn(new Ma(.1,.1,.1),_.clone())]]},ie={X:[[new bn(new ra(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new bn(new ra(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new bn(new ra(.2,0,.6,4),i),[0,.3,0]],[new bn(new ra(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new bn(new ra(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new bn(new ra(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new bn(new Ma(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new bn(new Ma(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new bn(new Ma(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new bn(new Ma(.2,.2,.2),i),[0,0,0]]]},se={X:[[new vd(A,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new vd(A,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new vd(A,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function fe(ae){const he=new is;for(const ge in ae)for(let Ie=ae[ge].length;Ie--;){const j=ae[ge][Ie][0].clone(),te=ae[ge][Ie][1],q=ae[ge][Ie][2],le=ae[ge][Ie][3],_e=ae[ge][Ie][4];j.name=ge,j.tag=_e,te&&j.position.set(te[0],te[1],te[2]),q&&j.rotation.set(q[0],q[1],q[2]),le&&j.scale.set(le[0],le[1],le[2]),j.updateMatrix();const Le=j.geometry.clone();Le.applyMatrix4(j.matrix),j.geometry=Le,j.renderOrder=1/0,j.position.set(0,0,0),j.rotation.set(0,0,0),j.scale.set(1,1,1),he.add(j)}return he}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=fe(N)),this.add(this.gizmo.rotate=fe(V)),this.add(this.gizmo.scale=fe(ne)),this.add(this.picker.translate=fe(F)),this.add(this.picker.rotate=fe(ee)),this.add(this.picker.scale=fe(ie)),this.add(this.helper.translate=fe(z)),this.add(this.helper.rotate=fe(U)),this.add(this.helper.scale=fe(se)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:DM;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let i=[];i=i.concat(this.picker[this.mode].children),i=i.concat(this.gizmo[this.mode].children),i=i.concat(this.helper[this.mode].children);for(let s=0;s<i.length;s++){const o=i[s];o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition);let l;if(this.camera.isOrthographicCamera?l=(this.camera.top-this.camera.bottom)/this.camera.zoom:l=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),o.scale.set(1,1,1).multiplyScalar(l*this.size/4),o.tag==="helper"){o.visible=!1,o.name==="AXIS"?(o.position.copy(this.worldPositionStart),o.visible=!!this.axis,this.axis==="X"&&(Qa.setFromEuler(ZC.set(0,0,0)),o.quaternion.copy(t).multiply(Qa),Math.abs(Do.copy(U$).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Y"&&(Qa.setFromEuler(ZC.set(0,0,Math.PI/2)),o.quaternion.copy(t).multiply(Qa),Math.abs(Do.copy(yy).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Z"&&(Qa.setFromEuler(ZC.set(0,Math.PI/2,0)),o.quaternion.copy(t).multiply(Qa),Math.abs(Do.copy(z$).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="XYZE"&&(Qa.setFromEuler(ZC.set(0,Math.PI/2,0)),Do.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(LG.lookAt(OG,Do,yy)),o.quaternion.multiply(Qa),o.visible=this.dragging),this.axis==="E"&&(o.visible=!1)):o.name==="START"?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):o.name==="END"?(o.position.copy(this.worldPosition),o.visible=this.dragging):o.name==="DELTA"?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),Cp.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Cp.applyQuaternion(this.worldQuaternionStart.clone().invert()),o.scale.copy(Cp),o.visible=this.dragging):(o.quaternion.copy(t),this.dragging?o.position.copy(this.worldPositionStart):o.position.copy(this.worldPosition),this.axis&&(o.visible=this.axis.search(o.name)!==-1));continue}o.quaternion.copy(t),this.mode==="translate"||this.mode==="scale"?(o.name==="X"&&Math.abs(Do.copy(U$).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Y"&&Math.abs(Do.copy(yy).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Z"&&Math.abs(Do.copy(z$).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XY"&&Math.abs(Do.copy(z$).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="YZ"&&Math.abs(Do.copy(U$).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XZ"&&Math.abs(Do.copy(yy).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1)):this.mode==="rotate"&&(eM.copy(t),Do.copy(this.eye).applyQuaternion(Qa.copy(t).invert()),o.name.search("E")!==-1&&o.quaternion.setFromRotationMatrix(LG.lookAt(this.eye,OG,yy)),o.name==="X"&&(Qa.setFromAxisAngle(U$,Math.atan2(-Do.y,Do.z)),Qa.multiplyQuaternions(eM,Qa),o.quaternion.copy(Qa)),o.name==="Y"&&(Qa.setFromAxisAngle(yy,Math.atan2(Do.x,Do.z)),Qa.multiplyQuaternions(eM,Qa),o.quaternion.copy(Qa)),o.name==="Z"&&(Qa.setFromAxisAngle(z$,Math.atan2(Do.y,Do.x)),Qa.multiplyQuaternions(eM,Qa),o.quaternion.copy(Qa))),o.visible=o.visible&&(o.name.indexOf("X")===-1||this.showX),o.visible=o.visible&&(o.name.indexOf("Y")===-1||this.showY),o.visible=o.visible&&(o.name.indexOf("Z")===-1||this.showZ),o.visible=o.visible&&(o.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),o.material._color=o.material._color||o.material.color.clone(),o.material._opacity=o.material._opacity||o.material.opacity,o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled&&this.axis&&(o.name===this.axis||this.axis.split("").some(function(u){return o.name===u}))&&(o.material.color.setHex(16776960),o.material.opacity=1)}super.updateMatrixWorld(e)}}class Wbe extends bn{constructor(){super(new lg(1e5,1e5,2,2),new dg({visible:!1,wireframe:!0,side:Kd,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),tM.copy(U$).applyQuaternion(t==="local"?this.worldQuaternion:DM),M$.copy(yy).applyQuaternion(t==="local"?this.worldQuaternion:DM),A$.copy(z$).applyQuaternion(t==="local"?this.worldQuaternion:DM),Do.copy(M$),this.mode){case"translate":case"scale":switch(this.axis){case"X":Do.copy(this.eye).cross(tM),Lg.copy(tM).cross(Do);break;case"Y":Do.copy(this.eye).cross(M$),Lg.copy(M$).cross(Do);break;case"Z":Do.copy(this.eye).cross(A$),Lg.copy(A$).cross(Do);break;case"XY":Lg.copy(A$);break;case"YZ":Lg.copy(tM);break;case"XZ":Do.copy(A$),Lg.copy(M$);break;case"XYZ":case"E":Lg.set(0,0,0);break}break;case"rotate":default:Lg.set(0,0,0)}Lg.length()===0?this.quaternion.copy(this.cameraQuaternion):(NG.lookAt(Cp.set(0,0,0),Lg,Do),this.quaternion.setFromRotationMatrix(NG)),super.updateMatrixWorld(e)}}const gL=1,Vbe=r=>{let{x:e,y:t,z:i}=r===void 0?{}:r;return e=e===void 0?gL:e,t=t===void 0?gL:t,i=i===void 0?gL:i,new Tve(e,t,i,2,.05)},jbe=.5,Xbe=r=>{let{radius:e}=r===void 0?{}:r;return e=e===void 0?jbe:e,new ug(e,32,32)},S7=.5,w7=1,Ybe=r=>{let{radius:e,height:t}=r===void 0?{}:r;return e=e===void 0?S7:e,t=t===void 0?w7:t,new ra(e,e,t,32,1,!1)},Kbe=.4,Jbe=.05,Qbe=.2,qbe=.6,hR=r=>{let{length:e,radius:t}=r===void 0?{}:r;e=e===void 0?1:e,t=t===void 0?1:t;const i=Kbe*e,s=Qbe*.5*t,o=new ra(0,s,i,32,1),l=qbe*e,u=Jbe*.5*t,h=new ra(u,u,l,32,1);var p=new Sr;return p.setPosition(new Te(0,l*.5,0)),h.applyMatrix4(p),p.setPosition(new Te(0,l+i*.5,0)),o.applyMatrix4(p),n7([o,h])},Zbe=r=>{let{radius:e,height:t}=r===void 0?{}:r;e=e===void 0?S7:e,t=t===void 0?w7:t;const i=new ra(e,e,t,32,1,!0),s=new ug(e,32,32,Math.PI,Math.PI),o=new ug(e,32,32,Math.PI,Math.PI);var l=new Sr;l.makeRotationX(Math.PI/2),l.setPosition(0,t/2,0);var u=new Sr;return u.makeRotationX(-Math.PI/2),u.setPosition(0,-t/2,0),s.applyMatrix4(l),o.applyMatrix4(u),n7([i,s,o])},rw=(r,e,t)=>{if(r.current&&e){const i=typeof e.r=="function"?e.r(t)/255:e.r/255,s=typeof e.g=="function"?e.g(t)/255:e.g/255,o=typeof e.b=="function"?e.b(t)/255:e.b/255,l=typeof e.a=="function"?e.a(t):e.a;r.current.material.color.setRGB(i,s,o),r.current.material.opacity=l,r.current.material.transparent=l!==1}},eTe=r=>{let e=null;if(r.shape)r.shape==="cube"?e=Vbe(r.shapeParams):r.shape==="cylinder"?e=Ybe(r.shapeParams):r.shape==="sphere"?e=Xbe(r.shapeParams):r.shape==="capsule"?e=Zbe(r.shapeParams):r.shape==="arrow"&&(e=hR(r.shapeParams));else return[];return[{geometry:e,type:"part"}]};function iE(...r){const e=de.useRef();return de.useEffect(()=>{r.forEach(t=>{!t||(typeof t=="function"?t(e.current):t.current=e.current)})},[r]),e}function Td(r,e){if(Object.is(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;if(r instanceof Map&&e instanceof Map){if(r.size!==e.size)return!1;for(const[i,s]of r)if(!Object.is(s,e.get(i)))return!1;return!0}if(r instanceof Set&&e instanceof Set){if(r.size!==e.size)return!1;for(const i of r)if(!e.has(i))return!1;return!0}const t=Object.keys(r);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(r[t[i]],e[t[i]]))return!1;return!0}const tTe=de.forwardRef(({objectKey:r,displayTfs:e,position:t,rotation:i,scale:s,ghost:o,highlightColor:l,children:u},h)=>{const p=de.useRef(null),m=iE(h,p),_=ws(de.useCallback(w=>w.tfs[r],[r]),Td),v=ws(w=>w.clock);Af(de.useCallback(()=>{const w=v.getElapsed()*1e3;m.current&&(m.current.position.set(t?t.x:typeof _.position.x=="function"?_.position.x(w):_.position.x,t?t.y:typeof _.position.y=="function"?_.position.y(w):_.position.y,t?t.z:typeof _.position.z=="function"?_.position.z(w):_.position.z),m.current.quaternion.set(i?i.x:typeof _.rotation.x=="function"?_.rotation.x(w):_.rotation.x,i?i.y:typeof _.rotation.y=="function"?_.rotation.y(w):_.rotation.y,i?i.z:typeof _.rotation.z=="function"?_.rotation.z(w):_.rotation.z,i?i.w:typeof _.rotation.w=="function"?_.rotation.w(w):_.rotation.w),m.current.scale.set(s?s.x:_.scale?typeof _.scale.x=="function"?_.scale.x(w):_.scale.x:0,s?s.y:_.scale?typeof _.scale.y=="function"?_.scale.y(w):_.scale.y:0,s?s.z:_.scale?typeof _.scale.z=="function"?_.scale.z(w):_.scale.z:0))},[_,t,i,s,m,v]));const E=hR();return uc("group",{ref:m,dispose:null,up:[0,0,1],children:[e&&uc(xw,{children:[Xt("axesHelper",{size:1}),Xt("mesh",{geometry:E,material:o?NM(l):Kg(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},`${r}ArrowX`),Xt("mesh",{geometry:E,material:o?NM(l):Kg(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},`${r}ArrowY`),Xt("mesh",{geometry:E,material:o?NM(l):Kg(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},`${r}ArrowZ`)]}),u]})});function nTe({displayTfs:r,children:e}){const t=hR();return uc("group",{dispose:null,up:[0,0,1],children:[r&&uc(xw,{children:[Xt("axesHelper",{size:1}),Xt("mesh",{geometry:t,material:Kg(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},"$WorldArrowX"),Xt("mesh",{geometry:t,material:Kg(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},"$WorldArrowY"),Xt("mesh",{geometry:t,material:Kg(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},"$WorldArrowZ")]}),e]})}function rTe({displayTfs:r,children:e}){const t=hR();return uc("group",{dispose:null,up:[0,0,1],children:[r&&uc(xw,{children:[Xt("axesHelper",{size:1}),Xt("mesh",{geometry:t,material:Kg(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},"$WorldArrowX"),Xt("mesh",{geometry:t,material:Kg(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},"$WorldArrowY"),Xt("mesh",{geometry:t,material:Kg(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},"$WorldArrowZ")]}),e]})}/**
 * postprocessing v6.30.1 build Fri Feb 24 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rüschen
 * @license Zlib
 */var iTe="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}";function DG(r,e){let t="texel";if(r!==null){const i=Number.parseInt(q1);if(!(e&&i>=133&&i!==135&&r.format===Rp&&r.type===Fh&&r.encoding===yi))switch(r.encoding){case yi:t="sRGBToLinear(texel)";break;case mm:t="texel";break;default:throw new Error(`Unsupported encoding: ${r.encoding}`)}}return t}var Li={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},Xy={NONE:0,DEPTH:1,CONVOLUTION:2},Ss={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},DP={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},sTe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,oTe="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",aTe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],lTe=class extends ah{constructor(r=new xi){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new rs(null),texelSize:new rs(new xi),scale:new rs(1),kernel:new rs(0)},blending:Zd,depthWrite:!1,depthTest:!1,fragmentShader:sTe,vertexShader:oTe}),this.toneMapped=!1,this.setTexelSize(r.x,r.y),this.kernelSize=DP.MEDIUM}set inputBuffer(r){this.uniforms.inputBuffer.value=r}setInputBuffer(r){this.inputBuffer=r}get kernelSequence(){return aTe[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(r){this.uniforms.scale.value=r}getScale(){return this.uniforms.scale.value}setScale(r){this.uniforms.scale.value=r}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(r){this.uniforms.kernel.value=r}setKernel(r){this.kernel=r}setTexelSize(r,e){this.uniforms.texelSize.value.set(r,e,r*.5,e*.5)}setSize(r,e){const t=1/r,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},uTe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
#include <dithering_fragment>
}`,x7=class extends ah{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new rs(null),opacity:new rs(1)},blending:Zd,depthWrite:!1,depthTest:!1,fragmentShader:uTe,vertexShader:iTe}),this.toneMapped=!1}set inputBuffer(r){this.uniforms.inputBuffer.value=r}setInputBuffer(r){this.uniforms.inputBuffer.value=r}getOpacity(r){return this.uniforms.opacity.value}setOpacity(r){this.uniforms.opacity.value=r}},cTe=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,hTe=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,dTe=class extends ah{constructor(r=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new rs(null),cameraNear:new rs(.3),cameraFar:new rs(1e3)},blending:Zd,depthWrite:!1,depthTest:!1,fragmentShader:cTe,vertexShader:hTe}),this.toneMapped=!1,this.depthBuffer=r,this.depthPacking=w1,this.copyCameraSettings(e)}set depthBuffer(r){this.uniforms.depthBuffer.value=r}set depthPacking(r){this.defines.DEPTH_PACKING=r.toFixed(0),this.needsUpdate=!0}setDepthBuffer(r,e=w1){this.depthBuffer=r,this.depthPacking=e}adoptCameraSettings(r){this.copyCameraSettings(r)}copyCameraSettings(r){r&&(this.uniforms.cameraNear.value=r.near,this.uniforms.cameraFar.value=r.far,r instanceof So?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},pTe=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);
#else
vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));
#endif
gl_FragColor=vec4(n[index],d[index]);}`,fTe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",mTe=class extends ah{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new rs(null),normalBuffer:new rs(null),texelSize:new rs(new Ot)},blending:Zd,depthWrite:!1,depthTest:!1,fragmentShader:pTe,vertexShader:fTe}),this.toneMapped=!1}set depthBuffer(r){this.uniforms.depthBuffer.value=r}set depthPacking(r){this.defines.DEPTH_PACKING=r.toFixed(0),this.needsUpdate=!0}setDepthBuffer(r,e=$v){this.depthBuffer=r,this.depthPacking=e}set normalBuffer(r){this.uniforms.normalBuffer.value=r,r!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(r){this.normalBuffer=r}setTexelSize(r,e){this.uniforms.texelSize.value.set(r,e)}setSize(r,e){this.uniforms.texelSize.value.set(1/r,1/e)}},gTe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,_Te="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",vTe=class extends ah{constructor(r,e,t,i,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:q1.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new rs(null),depthBuffer:new rs(null),resolution:new rs(new Ot),texelSize:new rs(new Ot),cameraNear:new rs(.3),cameraFar:new rs(1e3),aspect:new rs(1),time:new rs(0)},blending:Zd,depthWrite:!1,depthTest:!1,dithering:s}),this.toneMapped=!1,r&&this.setShaderParts(r),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(r){this.uniforms.inputBuffer.value=r}setInputBuffer(r){this.uniforms.inputBuffer.value=r}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(r){this.uniforms.depthBuffer.value=r}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(r){this.defines.DEPTH_PACKING=r.toFixed(0),this.needsUpdate=!0}setDepthBuffer(r,e=$v){this.depthBuffer=r,this.depthPacking=e}setShaderData(r){this.setShaderParts(r.shaderParts),this.setDefines(r.defines),this.setUniforms(r.uniforms),this.setExtensions(r.extensions)}setShaderParts(r){var e,t,i,s,o;return this.fragmentShader=gTe.replace(Ss.FRAGMENT_HEAD,(e=r.get(Ss.FRAGMENT_HEAD))!=null?e:"").replace(Ss.FRAGMENT_MAIN_UV,(t=r.get(Ss.FRAGMENT_MAIN_UV))!=null?t:"").replace(Ss.FRAGMENT_MAIN_IMAGE,(i=r.get(Ss.FRAGMENT_MAIN_IMAGE))!=null?i:""),this.vertexShader=_Te.replace(Ss.VERTEX_HEAD,(s=r.get(Ss.VERTEX_HEAD))!=null?s:"").replace(Ss.VERTEX_MAIN_SUPPORT,(o=r.get(Ss.VERTEX_MAIN_SUPPORT))!=null?o:""),this.needsUpdate=!0,this}setDefines(r){for(const e of r.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(r){for(const e of r.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(r){this.extensions={};for(const e of r)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(r){this.encodeOutput!==r&&(r?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(r){return this.encodeOutput}setOutputEncodingEnabled(r){this.encodeOutput=r}get time(){return this.uniforms.time.value}set time(r){this.uniforms.time.value=r}setDeltaTime(r){this.uniforms.time.value+=r}adoptCameraSettings(r){this.copyCameraSettings(r)}copyCameraSettings(r){r&&(this.uniforms.cameraNear.value=r.near,this.uniforms.cameraFar.value=r.far,r instanceof So?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(r,e){const t=this.uniforms;t.resolution.value.set(r,e),t.texelSize.value.set(1/r,1/e),t.aspect.value=r/e}static get Section(){return Ss}},yTe="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",bTe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",TTe=class extends ah{constructor(r=new Ot){super({name:"OutlineMaterial",uniforms:{inputBuffer:new rs(null),texelSize:new rs(new Ot)},blending:Zd,depthWrite:!1,depthTest:!1,fragmentShader:yTe,vertexShader:bTe}),this.toneMapped=!1,this.uniforms.texelSize.value.set(r.x,r.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(r){this.uniforms.inputBuffer.value=r}setInputBuffer(r){this.uniforms.inputBuffer.value=r}setTexelSize(r,e){this.uniforms.texelSize.value.set(r,e)}setSize(r,e){this.uniforms.texelSize.value.set(1/r,1/e)}},ETe=new eE,F0=null;function $Te(){if(F0===null){const r=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);F0=new Ar,F0.setAttribute!==void 0?(F0.setAttribute("position",new xs(r,3)),F0.setAttribute("uv",new xs(e,2))):(F0.addAttribute("position",new xs(r,3)),F0.addAttribute("uv",new xs(e,2)))}return F0}var If=class{constructor(r="Pass",e=new VS,t=ETe){this.name=r,this.renderer=null,this.scene=e,this.camera=t,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(r){if(this.rtt===r){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!r}}set mainScene(r){}set mainCamera(r){}setRenderer(r){this.renderer=r}isEnabled(){return this.enabled}setEnabled(r){this.enabled=r}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(r){let e=this.screen;e!==null?e.material=r:(e=new bn($Te(),r),e.frustumCulled=!1,this.scene===null&&(this.scene=new VS),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(r){this.fullscreenMaterial=r}getDepthTexture(){return null}setDepthTexture(r,e=$v){}render(r,e,t,i,s){throw new Error("Render method not implemented!")}setSize(r,e){}initialize(r,e,t){}dispose(){for(const r of Object.keys(this)){const e=this[r];(e instanceof iu||e instanceof Dc||e instanceof Rl||e instanceof If)&&this[r].dispose()}}},STe=class extends If{constructor(r,e=!0){super("CopyPass"),this.fullscreenMaterial=new x7,this.needsSwap=!1,this.renderTarget=r,r===void 0&&(this.renderTarget=new iu(1,1,{minFilter:Po,magFilter:Po,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(r){this.autoResize=r}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(r){this.autoResize=r}render(r,e,t,i,s){this.fullscreenMaterial.inputBuffer=e.texture,r.setRenderTarget(this.renderToScreen?null:this.renderTarget),r.render(this.scene,this.camera)}setSize(r,e){this.autoResize&&this.renderTarget.setSize(r,e)}initialize(r,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==Fh?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":r.outputEncoding===yi&&(this.renderTarget.texture.encoding=yi))}},wTe=class extends If{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(r,e,t,i,s){const o=r.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},BG=new _n,BP=class extends If{constructor(r=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=r,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(r,e,t){this.color=r,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(r){this.overrideClearColor=r}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(r){this.overrideClearAlpha=r}render(r,e,t,i,s){const o=this.overrideClearColor,l=this.overrideClearAlpha,u=r.getClearAlpha(),h=o!==null,p=l>=0;h?(r.getClearColor(BG),r.setClearColor(o,p?l:u)):p&&r.setClearAlpha(l),r.setRenderTarget(this.renderToScreen?null:e),r.clear(this.color,this.depth,this.stencil),h?r.setClearColor(BG,u):p&&r.setClearAlpha(u)}},U0=-1,Qd=class extends Cf{constructor(r,e=U0,t=U0,i=1){super(),this.resizable=r,this.baseSize=new Ot(1,1),this.preferredSize=new Ot(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new Ot,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const r=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==U0?t.width=e.width:e.height!==U0?t.width=Math.round(e.height*(r.width/Math.max(r.height,1))):t.width=Math.round(r.width*i),e.height!==U0?t.height=e.height:e.width!==U0?t.height=Math.round(e.width/Math.max(r.width/Math.max(r.height,1),1)):t.height=Math.round(r.height*i)}get width(){return this.effectiveSize.width}set width(r){this.preferredWidth=r}get height(){return this.effectiveSize.height}set height(r){this.preferredHeight=r}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(r){this.s!==r&&(this.s=r,this.preferredSize.setScalar(U0),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(r){this.scale=r}get baseWidth(){return this.baseSize.width}set baseWidth(r){this.baseSize.width!==r&&(this.baseSize.width=r,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(r){this.baseWidth=r}get baseHeight(){return this.baseSize.height}set baseHeight(r){this.baseSize.height!==r&&(this.baseSize.height=r,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(r){this.baseHeight=r}setBaseSize(r,e){(this.baseSize.width!==r||this.baseSize.height!==e)&&(this.baseSize.set(r,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(r){this.preferredSize.width!==r&&(this.preferredSize.width=r,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(r){this.preferredWidth=r}get preferredHeight(){return this.preferredSize.height}set preferredHeight(r){this.preferredSize.height!==r&&(this.preferredSize.height=r,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(r){this.preferredHeight=r}setPreferredSize(r,e){(this.preferredSize.width!==r||this.preferredSize.height!==e)&&(this.preferredSize.set(r,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(r){this.s=r.scale,this.baseSize.set(r.baseWidth,r.baseHeight),this.preferredSize.set(r.preferredWidth,r.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return U0}},_L=!1,PG=class{constructor(r=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(r),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Kd:t=this.materialsFlatShadedDoubleSide;break;case Nc:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Kd:t=this.materialsDoubleSide;break;case Nc:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(r){if(this.disposeMaterials(),this.material=r,r!==null){const e=this.materials=[r.clone(),r.clone(),r.clone()];for(const t of e)t.uniforms=Object.assign({},r.uniforms),t.side=Jg;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},r.uniforms),i.side=Nc,i}),this.materialsDoubleSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},r.uniforms),i.side=Kd,i}),this.materialsFlatShaded=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},r.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},r.uniforms),i.flatShading=!0,i.side=Nc,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},r.uniforms),i.flatShading=!0,i.side=Kd,i})}}render(r,e,t){const i=r.shadowMap.enabled;if(r.shadowMap.enabled=!1,_L){const s=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),r.render(e,t);for(const o of s)o[0].material=o[1];this.meshCount!==s.size&&s.clear()}else{const s=e.overrideMaterial;e.overrideMaterial=this.material,r.render(e,t),e.overrideMaterial=s}r.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const r=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of r)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return _L}static set workaroundEnabled(r){_L=r}},dR=class extends If{constructor(r,e,t=null){super("RenderPass",r,e),this.needsSwap=!1,this.clearPass=new BP,this.overrideMaterialManager=t===null?null:new PG(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(r){this.scene=r}set mainCamera(r){this.camera=r}get renderToScreen(){return super.renderToScreen}set renderToScreen(r){super.renderToScreen=r,this.clearPass.renderToScreen=r}get overrideMaterial(){const r=this.overrideMaterialManager;return r!==null?r.material:null}set overrideMaterial(r){const e=this.overrideMaterialManager;r!==null?e!==null?e.setMaterial(r):this.overrideMaterialManager=new PG(r):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(r){this.overrideMaterial=r}get clear(){return this.clearPass.enabled}set clear(r){this.clearPass.enabled=r}getSelection(){return this.selection}setSelection(r){this.selection=r}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(r){this.ignoreBackground=r}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(r){this.skipShadowMapUpdate=r}getClearPass(){return this.clearPass}render(r,e,t,i,s){const o=this.scene,l=this.camera,u=this.selection,h=l.layers.mask,p=o.background,m=r.shadowMap.autoUpdate,_=this.renderToScreen?null:e;u!==null&&l.layers.set(u.getLayer()),this.skipShadowMapUpdate&&(r.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(r,e),r.setRenderTarget(_),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(r,o,l):r.render(o,l),l.layers.mask=h,o.background=p,r.shadowMap.autoUpdate=m}},xTe=class extends If{constructor(r,e,{renderTarget:t,resolutionScale:i=1,width:s=Qd.AUTO_SIZE,height:o=Qd.AUTO_SIZE,resolutionX:l=s,resolutionY:u=o}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new dR(r,e,new Sw({depthPacking:w1}));const h=this.renderPass;h.skipShadowMapUpdate=!0,h.ignoreBackground=!0;const p=h.getClearPass();p.overrideClearColor=new _n(16777215),p.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new iu(1,1,{minFilter:ia,magFilter:ia}),this.renderTarget.texture.name="DepthPass.Target");const m=this.resolution=new Qd(this,l,u,i);m.addEventListener("change",_=>this.setSize(m.baseWidth,m.baseHeight))}set mainScene(r){this.renderPass.mainScene=r}set mainCamera(r){this.renderPass.mainCamera=r}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(r){this.resolution.scale=r}render(r,e,t,i,s){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(r,o)}setSize(r,e){const t=this.resolution;t.setBaseSize(r,e),this.renderTarget.setSize(t.width,t.height)}},CTe=class extends If{constructor({normalBuffer:r=null,resolutionScale:e=.5,width:t=Qd.AUTO_SIZE,height:i=Qd.AUTO_SIZE,resolutionX:s=t,resolutionY:o=i}={}){super("DepthDownsamplingPass");const l=new mTe;l.normalBuffer=r,this.fullscreenMaterial=l,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new iu(1,1,{minFilter:ia,magFilter:ia,depthBuffer:!1,type:Hg}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const u=this.resolution=new Qd(this,s,o,e);u.addEventListener("change",h=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(r,e=$v){this.fullscreenMaterial.depthBuffer=r,this.fullscreenMaterial.depthPacking=e}render(r,e,t,i,s){r.setRenderTarget(this.renderToScreen?null:this.renderTarget),r.render(this.scene,this.camera)}setSize(r,e){const t=this.resolution;t.setBaseSize(r,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(r,e)}initialize(r,e,t){const i=r.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function FG(r,e,t){for(const i of e){const s="$1"+r+i.charAt(0).toUpperCase()+i.slice(1),o=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const l of t.entries())l[1]!==null&&t.set(l[0],l[1].replace(o,s))}}function MTe(r,e,t){var i,s,o,l,u;let h=e.getFragmentShader(),p=e.getVertexShader();const m=h!==void 0&&/mainImage/.test(h),_=h!==void 0&&/mainUv/.test(h);if(t.attributes|=e.getAttributes(),h===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(_&&t.attributes&Xy.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!m&&!_)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const v=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,E=t.shaderParts;let w=(i=E.get(Ss.FRAGMENT_HEAD))!=null?i:"",x=(s=E.get(Ss.FRAGMENT_MAIN_UV))!=null?s:"",A=(o=E.get(Ss.FRAGMENT_MAIN_IMAGE))!=null?o:"",O=(l=E.get(Ss.VERTEX_HEAD))!=null?l:"",k=(u=E.get(Ss.VERTEX_MAIN_SUPPORT))!=null?u:"";const D=new Set,N=new Set;if(_&&(x+=`	${r}MainUv(UV);
`,t.uvTransformation=!0),p!==null&&/mainSupport/.test(p)){const V=/mainSupport *\([\w\s]*?uv\s*?\)/.test(p);k+=`	${r}MainSupport(`,k+=V?`vUv);
`:`);
`;for(const U of p.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const ee of U[1].split(/\s*,\s*/))t.varyings.add(ee),D.add(ee),N.add(ee);for(const U of p.matchAll(v))N.add(U[1])}for(const V of h.matchAll(v))N.add(V[1]);for(const V of e.defines.keys())N.add(V.replace(/\([\w\s,]*\)/g,""));for(const V of e.uniforms.keys())N.add(V);N.delete("while"),N.delete("for"),N.delete("if"),e.uniforms.forEach((V,U)=>t.uniforms.set(r+U.charAt(0).toUpperCase()+U.slice(1),V)),e.defines.forEach((V,U)=>t.defines.set(r+U.charAt(0).toUpperCase()+U.slice(1),V));const F=new Map([["fragment",h],["vertex",p]]);FG(r,N,t.defines),FG(r,N,F),h=F.get("fragment"),p=F.get("vertex");const z=e.blendMode;if(t.blendModes.set(z.blendFunction,z),m){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(A+=e.inputColorSpace===yi?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==null?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const V=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;A+=`${r}MainImage(color0, UV, `,t.attributes&Xy.DEPTH&&V.test(h)&&(A+="depth, ",t.readDepth=!0),A+=`color1);
	`;const U=r+"BlendOpacity";t.uniforms.set(U,z.opacity),A+=`color0 = blend${z.blendFunction}(color0, color1, ${U});

	`,w+=`uniform float ${U};

`}if(w+=h+`
`,p!==null&&(O+=p+`
`),E.set(Ss.FRAGMENT_HEAD,w),E.set(Ss.FRAGMENT_MAIN_UV,x),E.set(Ss.FRAGMENT_MAIN_IMAGE,A),E.set(Ss.VERTEX_HEAD,O),E.set(Ss.VERTEX_MAIN_SUPPORT,k),e.extensions!==null)for(const V of e.extensions)t.extensions.add(V)}}var ATe=class extends If{constructor(r,...e){super("EffectPass"),this.fullscreenMaterial=new vTe(null,null,null,r),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(r){for(const e of this.effects)e.mainScene=r}set mainCamera(r){this.fullscreenMaterial.copyCameraSettings(r);for(const e of this.effects)e.mainCamera=r}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(r){this.fullscreenMaterial.encodeOutput=r}get dithering(){return this.fullscreenMaterial.dithering}set dithering(r){const e=this.fullscreenMaterial;e.dithering=r,e.needsUpdate=!0}setEffects(r){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=r.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const r=new BTe;let e=0;for(const l of this.effects)if(l.blendMode.blendFunction===Li.DST)r.attributes|=l.getAttributes()&Xy.DEPTH;else{if(r.attributes&l.getAttributes()&Xy.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${l.name})`);MTe("e"+e++,l,r)}let t=r.shaderParts.get(Ss.FRAGMENT_HEAD),i=r.shaderParts.get(Ss.FRAGMENT_MAIN_IMAGE),s=r.shaderParts.get(Ss.FRAGMENT_MAIN_UV);const o=/\bblend\b/g;for(const l of r.blendModes.values())t+=l.getShaderCode().replace(o,`blend${l.blendFunction}`)+`
`;r.attributes&Xy.DEPTH?(r.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,r.colorSpace===yi&&(i+=`color0 = sRGBToLinear(color0);
	`),r.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,r.defines.set("UV","transformedUv")):r.defines.set("UV","vUv"),r.shaderParts.set(Ss.FRAGMENT_HEAD,t),r.shaderParts.set(Ss.FRAGMENT_MAIN_IMAGE,i),r.shaderParts.set(Ss.FRAGMENT_MAIN_UV,s),r.shaderParts.forEach((l,u,h)=>h.set(u,l==null?void 0:l.trim().replace(/^#/,`
#`))),this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(r)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(r,e=$v){this.fullscreenMaterial.depthBuffer=r,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(r,e)}render(r,e,t,i,s){for(const o of this.effects)o.update(r,e,i);if(!this.skipRendering||this.renderToScreen){const o=this.fullscreenMaterial;o.inputBuffer=e.texture,o.time+=i*this.timeScale,r.setRenderTarget(this.renderToScreen?null:t),r.render(this.scene,this.camera)}}setSize(r,e){this.fullscreenMaterial.setSize(r,e);for(const t of this.effects)t.setSize(r,e)}initialize(r,e,t){this.renderer=r;for(const i of this.effects)i.initialize(r,e,t);this.updateMaterial(),t!==void 0&&t!==Fh&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const r of this.effects)r.removeEventListener("change",this.listener),r.dispose()}handleEvent(r){switch(r.type){case"change":this.recompile();break}}},ITe=class extends If{constructor({kernelSize:r=DP.MEDIUM,resolutionScale:e=.5,width:t=Qd.AUTO_SIZE,height:i=Qd.AUTO_SIZE,resolutionX:s=t,resolutionY:o=i}={}){super("KawaseBlurPass"),this.renderTargetA=new iu(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const l=this.resolution=new Qd(this,s,o,e);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight)),this._blurMaterial=new lTe,this._blurMaterial.kernelSize=r,this.copyMaterial=new x7}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(r){this._blurMaterial=r}get dithering(){return this.copyMaterial.dithering}set dithering(r){this.copyMaterial.dithering=r}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(r){this.blurMaterial.kernelSize=r}get width(){return this.resolution.width}set width(r){this.resolution.preferredWidth=r}get height(){return this.resolution.height}set height(r){this.resolution.preferredHeight=r}get scale(){return this.blurMaterial.scale}set scale(r){this.blurMaterial.scale=r}getScale(){return this.blurMaterial.scale}setScale(r){this.blurMaterial.scale=r}getKernelSize(){return this.kernelSize}setKernelSize(r){this.kernelSize=r}getResolutionScale(){return this.resolution.scale}setResolutionScale(r){this.resolution.scale=r}render(r,e,t,i,s){const o=this.scene,l=this.camera,u=this.renderTargetA,h=this.renderTargetB,p=this.blurMaterial,m=p.kernelSequence;let _=e;this.fullscreenMaterial=p;for(let v=0,E=m.length;v<E;++v){const w=v&1?h:u;p.kernel=m[v],p.inputBuffer=_.texture,r.setRenderTarget(w),r.render(o,l),_=w}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=_.texture,r.setRenderTarget(this.renderToScreen?null:t),r.render(o,l)}setSize(r,e){const t=this.resolution;t.setBaseSize(r,e);const i=t.width,s=t.height;this.renderTargetA.setSize(i,s),this.renderTargetB.setSize(i,s),this.blurMaterial.setSize(r,e)}initialize(r,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==Fh?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):r.outputEncoding===yi&&(this.renderTargetA.texture.encoding=yi,this.renderTargetB.texture.encoding=yi))}static get AUTO_SIZE(){return Qd.AUTO_SIZE}},RTe=class extends If{constructor(r,e){super("MaskPass",r,e),this.needsSwap=!1,this.clearPass=new BP(!1,!1,!0),this.inverse=!1}set mainScene(r){this.scene=r}set mainCamera(r){this.camera=r}get inverted(){return this.inverse}set inverted(r){this.inverse=r}get clear(){return this.clearPass.enabled}set clear(r){this.clearPass.enabled=r}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(r){this.inverted=r}render(r,e,t,i,s){const o=r.getContext(),l=r.state.buffers,u=this.scene,h=this.camera,p=this.clearPass,m=this.inverted?0:1,_=1-m;l.color.setMask(!1),l.depth.setMask(!1),l.color.setLocked(!0),l.depth.setLocked(!0),l.stencil.setTest(!0),l.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),l.stencil.setFunc(o.ALWAYS,m,4294967295),l.stencil.setClear(_),l.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?p.render(r,null):(p.render(r,e),p.render(r,t))),this.renderToScreen?(r.setRenderTarget(null),r.render(u,h)):(r.setRenderTarget(e),r.render(u,h),r.setRenderTarget(t),r.render(u,h)),l.color.setLocked(!1),l.depth.setLocked(!1),l.stencil.setLocked(!1),l.stencil.setFunc(o.EQUAL,1,4294967295),l.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),l.stencil.setLocked(!0)}},kTe=class extends If{constructor(r,e,{renderTarget:t,resolutionScale:i=1,width:s=Qd.AUTO_SIZE,height:o=Qd.AUTO_SIZE,resolutionX:l=s,resolutionY:u=o}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new dR(r,e,new aP);const h=this.renderPass;h.ignoreBackground=!0,h.skipShadowMapUpdate=!0;const p=h.getClearPass();p.overrideClearColor=new _n(7829503),p.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new iu(1,1,{minFilter:ia,magFilter:ia}),this.renderTarget.texture.name="NormalPass.Target");const m=this.resolution=new Qd(this,l,u,i);m.addEventListener("change",_=>this.setSize(m.baseWidth,m.baseHeight))}set mainScene(r){this.renderPass.mainScene=r}set mainCamera(r){this.renderPass.mainCamera=r}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(r){this.resolution.scale=r}render(r,e,t,i,s){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(r,o,o)}setSize(r,e){const t=this.resolution;t.setBaseSize(r,e),this.renderTarget.setSize(t.width,t.height)}},OTe=class extends If{constructor(r,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=r,this.input=e}setInput(r){this.input=r}render(r,e,t,i,s){const o=this.fullscreenMaterial.uniforms;e!==null&&o!==void 0&&o[this.input]!==void 0&&(o[this.input].value=e.texture),r.setRenderTarget(this.renderToScreen?null:t),r.render(this.scene,this.camera)}initialize(r,e,t){t!==void 0&&t!==Fh&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},vL=1/1e3,LTe=1e3,NTe=class{constructor(){this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(r){typeof document<"u"&&document.hidden!==void 0&&(r?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=r)}get delta(){return this._delta*vL}get fixedDelta(){return this._fixedDelta*vL}set fixedDelta(r){this._fixedDelta=r*LTe}get elapsed(){return this._elapsed*vL}update(r){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=r!==void 0?r:performance.now(),this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()}handleEvent(r){document.hidden||(this.currentTime=performance.now())}dispose(){this.autoReset=!1}},DTe=class{constructor(r=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new STe,this.depthTexture=null,this.passes=[],this.timer=new NTe,this.autoRenderToScreen=!0,this.setRenderer(r)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(r){const e=this.inputBuffer,t=this.multisampling;t>0&&r>0?(this.inputBuffer.samples=r,this.outputBuffer.samples=r,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==r&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,r),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(r){if(this.renderer=r,r!==null){const e=r.getSize(new Ot),t=r.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===Fh&&r.outputEncoding===yi&&(this.inputBuffer.texture.encoding=yi,this.outputBuffer.texture.encoding=yi,this.inputBuffer.dispose(),this.outputBuffer.dispose()),r.autoClear=!1,this.setSize(e.width,e.height);for(const s of this.passes)s.initialize(r,t,i)}}replaceRenderer(r,e=!0){const t=this.renderer,i=t.domElement.parentNode;return this.setRenderer(r),e&&i!==null&&(i.removeChild(t.domElement),i.appendChild(r.domElement)),t}createDepthTexture(){const r=this.depthTexture=new JB;return this.inputBuffer.depthTexture=r,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(r.format=mv,r.type=av):r.type=U_,r}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const r of this.passes)r.setDepthTexture(null)}}createBuffer(r,e,t,i){const s=this.renderer,o=s===null?new Ot:s.getDrawingBufferSize(new Ot),l={minFilter:Po,magFilter:Po,stencilBuffer:e,depthBuffer:r,type:t},u=new iu(o.width,o.height,l);return i>0&&(u.ignoreDepthForMultisampleCopy=!1,u.samples=i),t===Fh&&s!==null&&s.outputEncoding===yi&&(u.texture.encoding=yi),u.texture.name="EffectComposer.Buffer",u.texture.generateMipmaps=!1,u}setMainScene(r){for(const e of this.passes)e.mainScene=r}setMainCamera(r){for(const e of this.passes)e.mainCamera=r}addPass(r,e){const t=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new Ot),o=i.getContext().getContextAttributes().alpha,l=this.inputBuffer.texture.type;if(r.setRenderer(i),r.setSize(s.width,s.height),r.initialize(i,o,l),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),r.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,r):t.push(r),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),r.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const u=this.createDepthTexture();for(r of t)r.setDepthTexture(u)}else r.setDepthTexture(this.depthTexture)}removePass(r){const e=this.passes,t=e.indexOf(r);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const i=(s,o)=>s||o.needsDepthTexture;e.reduce(i,!1)||(r.getDepthTexture()===this.depthTexture&&r.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(r.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const r=this.passes;this.deleteDepthTexture(),r.length>0&&(this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!1),this.passes=[])}render(r){const e=this.renderer,t=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,o=!1,l,u,h;r===void 0&&(this.timer.update(),r=this.timer.delta);for(const p of this.passes)p.enabled&&(p.render(e,i,s,r,o),p.needsSwap&&(o&&(t.renderToScreen=p.renderToScreen,l=e.getContext(),u=e.state.buffers.stencil,u.setFunc(l.NOTEQUAL,1,4294967295),t.render(e,i,s,r,o),u.setFunc(l.EQUAL,1,4294967295)),h=i,i=s,s=h),p instanceof RTe?o=!0:p instanceof wTe&&(o=!1))}setSize(r,e,t){const i=this.renderer,s=i.getSize(new Ot);(r===void 0||e===void 0)&&(r=s.width,e=s.height),(s.width!==r||s.height!==e)&&i.setSize(r,e,t);const o=i.getDrawingBufferSize(new Ot);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const l of this.passes)l.setSize(o.width,o.height)}reset(){const r=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=r}dispose(){for(const r of this.passes)r.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},BTe=class{constructor(){this.shaderParts=new Map([[Ss.FRAGMENT_HEAD,null],[Ss.FRAGMENT_MAIN_UV,null],[Ss.FRAGMENT_MAIN_IMAGE,null],[Ss.VERTEX_HEAD,null],[Ss.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Xy.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=mm}},PTe=class extends Set{constructor(r,e=10){super(),this.l=e,this.exclusive=!1,r!==void 0&&this.set(r)}get layer(){return this.l}set layer(r){const e=this.l;for(const t of this)t.layers.disable(e),t.layers.enable(r);this.l=r}getLayer(){return this.layer}setLayer(r){this.layer=r}isExclusive(){return this.exclusive}setExclusive(r){this.exclusive=r}clear(){const r=this.layer;for(const e of this)e.layers.disable(r);return super.clear()}set(r){this.clear();for(const e of r)this.add(e);return this}indexOf(r){return this.has(r)?0:-1}add(r){return this.exclusive?r.layers.set(this.layer):r.layers.enable(this.layer),super.add(r)}delete(r){return this.has(r)&&r.layers.disable(this.layer),super.delete(r)}toggle(r){let e;return this.has(r)?(this.delete(r),e=!1):(this.add(r),e=!0),e}setVisible(r){for(const e of this)r?e.layers.enable(0):e.layers.disable(0);return this}},FTe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",UTe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",zTe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",HTe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",GTe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",WTe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",VTe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",jTe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",XTe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",YTe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",KTe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",JTe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",QTe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",qTe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",ZTe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",e1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",t1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",n1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",r1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",i1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",s1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",o1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",a1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",l1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",u1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",c1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",h1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",d1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",p1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",f1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",m1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",g1e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",_1e=new Map([[Li.ADD,FTe],[Li.ALPHA,UTe],[Li.AVERAGE,zTe],[Li.COLOR,HTe],[Li.COLOR_BURN,GTe],[Li.COLOR_DODGE,WTe],[Li.DARKEN,VTe],[Li.DIFFERENCE,jTe],[Li.DIVIDE,XTe],[Li.DST,null],[Li.EXCLUSION,YTe],[Li.HARD_LIGHT,KTe],[Li.HARD_MIX,JTe],[Li.HUE,QTe],[Li.INVERT,qTe],[Li.INVERT_RGB,ZTe],[Li.LIGHTEN,e1e],[Li.LINEAR_BURN,t1e],[Li.LINEAR_DODGE,n1e],[Li.LINEAR_LIGHT,r1e],[Li.LUMINOSITY,i1e],[Li.MULTIPLY,s1e],[Li.NEGATION,o1e],[Li.NORMAL,a1e],[Li.OVERLAY,l1e],[Li.PIN_LIGHT,u1e],[Li.REFLECT,c1e],[Li.SATURATION,h1e],[Li.SCREEN,d1e],[Li.SOFT_LIGHT,p1e],[Li.SRC,f1e],[Li.SUBTRACT,m1e],[Li.VIVID_LIGHT,g1e]]),v1e=class extends Cf{constructor(r,e=1){super(),this._blendFunction=r,this.opacity=new rs(e)}getOpacity(){return this.opacity.value}setOpacity(r){this.opacity.value=r}get blendFunction(){return this._blendFunction}set blendFunction(r){this._blendFunction=r,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(r){this.blendFunction=r}getShaderCode(){return _1e.get(this.blendFunction)}},y1e=class extends Cf{constructor(r,e,{attributes:t=Xy.NONE,blendFunction:i=Li.NORMAL,defines:s=new Map,uniforms:o=new Map,extensions:l=null,vertexShader:u=null}={}){super(),this.name=r,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=u,this.defines=s,this.uniforms=o,this.extensions=l,this.blendMode=new v1e(i),this.blendMode.addEventListener("change",h=>this.setChanged()),this._inputColorSpace=mm,this._outputColorSpace=null}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(r){this._inputColorSpace=r,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(r){this._outputColorSpace=r,this.setChanged()}set mainScene(r){}set mainCamera(r){}getName(){return this.name}setRenderer(r){this.renderer=r}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(r){this.attributes=r,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(r){this.fragmentShader=r,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(r){this.vertexShader=r,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(r,e=$v){}update(r,e,t){}setSize(r,e){}initialize(r,e,t){}dispose(){for(const r of Object.keys(this)){const e=this[r];(e instanceof iu||e instanceof Dc||e instanceof Rl||e instanceof If)&&this[r].dispose()}}};new Te;new Sr;new _n;var b1e=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texelToLinear(texture2D(patternTexture,vUvPattern));
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,T1e="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",E1e=class extends y1e{constructor(r,e,{blendFunction:t=Li.SCREEN,patternTexture:i=null,patternScale:s=1,edgeStrength:o=1,pulseSpeed:l=0,visibleEdgeColor:u=16777215,hiddenEdgeColor:h=2230538,kernelSize:p=DP.VERY_SMALL,blur:m=!1,xRay:_=!0,multisampling:v=0,resolutionScale:E=.5,width:w=Qd.AUTO_SIZE,height:x=Qd.AUTO_SIZE,resolutionX:A=w,resolutionY:O=x}={}){super("OutlineEffect",b1e,{uniforms:new Map([["maskTexture",new rs(null)],["edgeTexture",new rs(null)],["edgeStrength",new rs(o)],["visibleEdgeColor",new rs(new _n(u))],["hiddenEdgeColor",new rs(new _n(h))],["pulse",new rs(1)],["patternScale",new rs(s)],["patternTexture",new rs(null)]])}),this.blendMode.addEventListener("change",F=>{this.blendMode.getBlendFunction()===Li.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.setBlendFunction(t),this.patternTexture=i,this.xRay=_,this.scene=r,this.camera=e,this.renderTargetMask=new iu(1,1),this.renderTargetMask.samples=v,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new iu(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new BP,this.clearPass.overrideClearColor=new _n(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new xTe(r,e),this.maskPass=new dR(r,e,new dTe(this.depthPass.texture,e));const k=this.maskPass.clearPass;k.overrideClearColor=new _n(16777215),k.overrideClearAlpha=1,this.blurPass=new ITe({resolutionScale:E,resolutionX:A,resolutionY:O,kernelSize:p}),this.blurPass.enabled=m;const D=this.blurPass.resolution;D.addEventListener("change",F=>this.setSize(D.baseWidth,D.baseHeight)),this.outlinePass=new OTe(new TTe);const N=this.outlinePass.fullscreenMaterial;N.inputBuffer=this.renderTargetMask.texture,this.time=0,this.active=!1,this.selection=new PTe,this.selection.layer=10,this.pulseSpeed=l}set mainScene(r){this.scene=r,this.depthPass.mainScene=r,this.maskPass.mainScene=r}set mainCamera(r){this.camera=r,this.depthPass.mainCamera=r,this.maskPass.mainCamera=r,this.maskPass.overrideMaterial.copyCameraSettings(r)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(r){this.renderTargetMask.samples=r,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(r){this.uniforms.get("patternScale").value=r}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(r){this.uniforms.get("edgeStrength").value=r}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(r){this.uniforms.get("visibleEdgeColor").value=r}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(r){this.uniforms.get("hiddenEdgeColor").value=r}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(r){this.pulseSpeed=r}get width(){return this.resolution.width}set width(r){this.resolution.preferredWidth=r}get height(){return this.resolution.height}set height(r){this.resolution.preferredHeight=r}get selectionLayer(){return this.selection.layer}set selectionLayer(r){this.selection.layer=r}get dithering(){return this.blurPass.dithering}set dithering(r){this.blurPass.dithering=r}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(r){this.blurPass.kernelSize=r}get blur(){return this.blurPass.enabled}set blur(r){this.blurPass.enabled=r}get xRay(){return this.defines.has("X_RAY")}set xRay(r){this.xRay!==r&&(r?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(r){this.xRay=r}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(r){if(r!==null?(r.wrapS=r.wrapT=S1,this.defines.set("USE_PATTERN","1"),this.setVertexShader(T1e)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.renderer!==null){const e=DG(r,this.renderer.capabilities.isWebGL2);this.defines.set("texelToLinear(texel)",e)}this.uniforms.get("patternTexture").value=r,this.setChanged()}setPatternTexture(r){this.patternTexture=r}getResolutionScale(){return this.resolution.scale}setResolutionScale(r){this.resolution.scale=r}setSelection(r){return this.selection.set(r),this}clearSelection(){return this.selection.clear(),this}selectObject(r){return this.selection.add(r),this}deselectObject(r){return this.selection.delete(r),this}update(r,e,t){const i=this.scene,s=this.camera,o=this.selection,l=this.uniforms.get("pulse"),u=i.background,h=s.layers.mask;o.size>0?(i.background=null,l.value=1,this.pulseSpeed>0&&(l.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.active=!0,this.time+=t,o.setVisible(!1),this.depthPass.render(r),o.setVisible(!0),s.layers.set(o.layer),this.maskPass.render(r,this.renderTargetMask),s.layers.mask=h,i.background=u,this.outlinePass.render(r,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(r,this.renderTargetOutline,this.renderTargetOutline)):this.active&&(this.clearPass.render(r,this.renderTargetOutline),this.active=!1)}setSize(r,e){this.blurPass.setSize(r,e),this.renderTargetMask.setSize(r,e);const t=this.resolution;t.setBaseSize(r,e);const i=t.width,s=t.height;this.depthPass.setSize(i,s),this.renderTargetOutline.setSize(i,s),this.outlinePass.fullscreenMaterial.setSize(i,s)}initialize(r,e,t){const i=this.patternTexture,s=DG(i,r.capabilities.isWebGL2);this.defines.set("texelToLinear(texel)",s),this.blurPass.initialize(r,e,Fh),t!==void 0&&(this.depthPass.initialize(r,e,t),this.maskPass.initialize(r,e,t),this.outlinePass.initialize(r,e,t))}};new Te;new Te;let I$;function $1e(){if(I$!==void 0)return I$;try{var r;let e;const t=document.createElement("canvas");return I$=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((r=e.getExtension("WEBGL_lose_context"))===null||r===void 0||r.loseContext()),I$}catch{return I$=!1}}const S1e=r=>!!r.current,UG=r=>S1e(r)?r.current:r,C7=de.createContext(null),w1e=vr.memo(de.forwardRef((r,e)=>{let{children:t,camera:i,scene:s,resolutionScale:o,enabled:l=!0,renderPriority:u=1,autoClear:h=!0,depthBuffer:p,disableNormalPass:m,stencilBuffer:_,multisampling:v=8,frameBufferType:E=tb}=r;const{gl:w,scene:x,camera:A,size:O}=Nh();s=s||x,i=i||A;const[k,D,N]=de.useMemo(()=>{const V=$1e(),U=new DTe(w,{depthBuffer:p,stencilBuffer:_,multisampling:v>0&&V?v:0,frameBufferType:E});U.addPass(new dR(s,i));let ee=null,ne=null;return m||(ne=new kTe(s,i),ne.enabled=!1,U.addPass(ne),o!==void 0&&V&&(ee=new CTe({normalBuffer:ne.texture,resolutionScale:o}),ee.enabled=!1,U.addPass(ee))),[U,ne,ee]},[i,w,p,_,v,E,s,m,o]);de.useEffect(()=>k==null?void 0:k.setSize(O.width,O.height),[k,O]),Af((V,U)=>{l&&(w.autoClear=h,k.render(U))},l?u:0);const F=de.useRef(null);de.useLayoutEffect(()=>{let V;return F.current&&F.current.__r3f&&k&&(V=new ATe(i,...F.current.__r3f.objects),V.renderToScreen=!0,k.addPass(V),D&&(D.enabled=!0),N&&(N.enabled=!0)),()=>{V&&(k==null||k.removePass(V)),D&&(D.enabled=!1),N&&(N.enabled=!1)}},[k,t,i,D,N]);const z=de.useMemo(()=>({composer:k,normalPass:D,downSamplingPass:N,resolutionScale:o,camera:i,scene:s}),[k,D,N,o,i,s]);return de.useImperativeHandle(e,()=>k,[k]),Xt(C7.Provider,{value:z,children:Xt("group",{ref:F,children:t})})})),PP=de.createContext(null);function x1e(r){let{children:e,enabled:t=!0}=r;const[i,s]=de.useState([]),o=de.useMemo(()=>({selected:i,select:s,enabled:t}),[i,s,t]);return vr.createElement(PP.Provider,{value:o},e)}function M7(r){let{enabled:e=!1,children:t,...i}=r;const s=de.useRef(null),o=de.useContext(PP);return de.useEffect(()=>{if(o&&e){let l=!1;const u=[];if(s.current.traverse(h=>{h.type==="Mesh"&&u.push(h),o.selected.indexOf(h)===-1&&(l=!0)}),l)return o.select(h=>[...h,...u]),()=>{o.select(h=>h.filter(p=>!u.includes(p)))}}},[e,t]),Xt("group",{ref:s,...i,children:t})}const C1e=de.forwardRef(function(r,e){let{selection:t=[],selectionLayer:i=10,blendFunction:s,patternTexture:o,edgeStrength:l,pulseSpeed:u,visibleEdgeColor:h,hiddenEdgeColor:p,width:m,height:_,kernelSize:v,blur:E,xRay:w,...x}=r;const A=Nh(F=>F.invalidate),{scene:O,camera:k}=de.useContext(C7),D=de.useMemo(()=>new E1e(O,k,{blendFunction:s,patternTexture:o,edgeStrength:l,pulseSpeed:u,visibleEdgeColor:h,hiddenEdgeColor:p,width:m,height:_,kernelSize:v,blur:E,xRay:w,...x}),[s,E,k,l,_,p,v,o,u,O,h,m,w]),N=de.useContext(PP);return de.useEffect(()=>{if(!N&&t)return D.selection.set(Array.isArray(t)?t.map(UG):[UG(t)]),A(),()=>{D.selection.clear(),A()}},[D,t,N]),de.useEffect(()=>{D.selectionLayer=i,A()},[D,i]),de.useRef(),de.useEffect(()=>{if(N&&N.enabled){var F;if((F=N.selected)!=null&&F.length)return D.selection.set(N.selected),A(),()=>{D.selection.clear(),A()}}},[N]),Xt("primitive",{ref:e,object:D})}),M1e=["cube","cylinder","sphere","capsule","arrow"],A7=de.createContext(),A1e=r=>{const e=de.useContext(A7)[r.shape];return M1e.includes(r.shape)?eTe(r):e&&typeof e=="function"?e():(console.warn(`Shape not loaded: ${r.shape} (reading property 'shape' of item)`,r),[])},I1e=({meshes:r,children:e})=>Xt(A7.Provider,{value:r,children:e}),R1e=de.memo(de.forwardRef(({objectKey:r,highlightColor:e,position:t,rotation:i,scale:s,ghost:o},l)=>{const u=de.useRef(null),h=iE(l,u),p=ws(x=>x.onClick,Td),m=ws(x=>x.onPointerOver,Td),_=ws(x=>x.onPointerOut,Td),v=ws(x=>x.clock),E=ws(de.useCallback(x=>x.items[r],[r]),Td),w=A1e(E);return Af(de.useCallback(()=>{const x=v.getElapsed()*1e3;h.current&&(h.current.position.set(t?t.x:typeof E.position.x=="function"?E.position.x(x):E.position.x,t?t.y:typeof E.position.y=="function"?E.position.y(x):E.position.y,t?t.z:typeof E.position.z=="function"?E.position.z(x):E.position.z),h.current.quaternion.set(i?i.x:typeof E.rotation.x=="function"?E.rotation.x(x):E.rotation.x,i?i.y:typeof E.rotation.y=="function"?E.rotation.y(x):E.rotation.y,i?i.z:typeof E.rotation.z=="function"?E.rotation.z(x):E.rotation.z,i?i.w:typeof E.rotation.w=="function"?E.rotation.w(x):E.rotation.w),h.current.scale.set(s?s.x:typeof E.scale.x=="function"?E.scale.x(x):E.scale.x,s?s.y:typeof E.scale.y=="function"?E.scale.y(x):E.scale.y,s?s.z:typeof E.scale.z=="function"?E.scale.z(x):E.scale.z),h.current.visible=typeof E.hidden=="function"?!E.hidden(x):!E.hidden)},[E,t,i,s,h,v])),Xt(M7,{enabled:E.highlighted,children:uc("group",{ref:h,up:[0,0,1],children:[Xt("group",{up:[0,0,1],rotation:[Math.PI/2,0,0],onPointerDown:x=>{p(r,!h.current.visible,{local:{position:h.current.position,rotation:h.current.quaternion},world:{position:h.current.getWorldPosition(new Te),rotation:h.current.getWorldQuaternion(new Bo)}},x)},onPointerOver:x=>{m(r,!h.current.visible,x)},onPointerOut:x=>{_(r,!h.current.visible,x)},children:w.map((x,A)=>Xt(I7,{idx:A,groupOrPart:x,objectKey:r,ghost:o,highlightColor:e},A))}),E.showName&&Xt(t7,{distanceFactor:3,position:[0,0,.2],children:Xt("div",{style:{opacity:.75,borderRadius:2,backgroundColor:"lightgrey",padding:5,userSelect:"none"},children:E.name})})]})})})),k1e=de.memo(({part:r,objectKey:e,ghost:t,highlightColor:i})=>{const s=ws(de.useCallback(m=>m.items[e].wireframe,[e])),o=ws(de.useCallback(m=>m.items[e].color,[e])),l=o!==void 0,u=de.useRef(),h=de.useRef(),p=ws(m=>m.clock);return Af(de.useCallback(()=>{const m=p.getElapsed()*1e3;t||(rw(h,o,m),rw(u,o,m))},[t,u,h,p,o])),t?Xt("mesh",{ref:h,geometry:r.geometry,material:NM(i),scale:r.scale,castShadow:!1,receiveShadow:!1},"B"):l?uc("group",{up:[0,0,1],children:[Xt("mesh",{ref:h,geometry:r.geometry,scale:r.scale,castShadow:!1,receiveShadow:!1,children:Xt("meshLambertMaterial",{transparent:!0,wireframe:s,attach:"material",opacity:1,side:Nc})},"B"),Xt("mesh",{ref:u,geometry:r.geometry,scale:r.scale,castShadow:!1,receiveShadow:!1,children:Xt("meshLambertMaterial",{transparent:!0,attach:"material",wireframe:s,opacity:1,side:Jg})},"F")]}):Xt(xw,{children:Xt("mesh",{ref:u,geometry:r.geometry,material:r.material,scale:r.scale,castShadow:!0,receiveShadow:!0,wireframe:s},"I")})}),I7=de.memo(({idx:r,groupOrPart:e,ghost:t,objectKey:i,highlightColor:s})=>e.type==="group"?Xt("group",{up:[0,0,1],position:e.position,rotation:e.rotation,scale:e.scale,children:e.children.map((o,l)=>Xt(I7,{idx:l,groupOrPart:o,objectKey:i,ghost:t,highlightColor:s},l))},r):Xt(k1e,{part:e,objectKey:i,highlightColor:s,ghost:t},r)),O1e=de.forwardRef(({objectKey:r},e)=>{const t=de.useRef(null),i=iE(e,t),{vertices:s,width:o,hidden:l}=ws(de.useCallback(u=>({vertices:u.lines[r].vertices,width:u.lines[r].width,hidden:u.lines[r].hidden}),[r]),Td);return s.length<=1?null:Xt(xve,{ref:i,visible:!l,points:s.map(u=>[u.position.x,u.position.y,u.position.z]),color:"white",vertexColors:s.map(u=>[u.color.r/255,u.color.g/255,u.color.b/255]),lineWidth:o})}),L1e=de.forwardRef(({objectKey:r},e)=>{const t=de.useRef(null),i=iE(e,t),s=ws(w=>w.onClick,Td),o=ws(w=>w.onPointerOver,Td),l=ws(w=>w.onPointerOut,Td),u=ws(de.useCallback(w=>w.hulls[r],[r]),Td),h=ws(de.useCallback(w=>w.hulls[r].vertices,[r]),Td),p=ws(w=>w.clock),m=de.useRef(),_=de.useRef(),v=typeof h=="function"?h(0):h,E=new H4(v.map(w=>new Te(w.x,w.y,w.z)));return Af(de.useCallback(()=>{const w=p.getElapsed()*1e3;rw(_,u.color,w),rw(m,u.color,w);const x=typeof h=="function"?h(w):h;if(x!==v){const O=new H4(x.map(k=>new Te(k.x,k.y,k.z)));m.current.geometry=O,_.current.geometry=O}const A=typeof u.hidden=="function"?!u.hidden(w):!u.hidden;m.current.visible=A,_.current.visible=A},[m,_,v,u,p,h])),Xt(M7,{enabled:u.highlighted,children:uc("group",{ref:i,up:[0,0,1],children:[uc("group",{up:[0,0,1],onPointerDown:w=>{s(r,m.current.visible,w)},onPointerOver:w=>{o(r,m.current.visible,w)},onPointerOut:w=>{l(r,m.current.visible,w)},children:[Xt("mesh",{ref:_,geometry:E,castShadow:!1,receiveShadow:!1,children:Xt("meshLambertMaterial",{transparent:!0,wireframe:u.wireframe,attach:"material",side:Nc})},`${r}B`),Xt("mesh",{ref:m,geometry:E,castShadow:!1,receiveShadow:!1,children:Xt("meshLambertMaterial",{transparent:!0,attach:"material",wireframe:u.wireframe,side:Jg})},`${r}F`)]}),u.showName&&Xt(t7,{distanceFactor:2,position:[0,0,.5],children:Xt("div",{style:{opacity:.75,borderRadius:2,backgroundColor:"lightgrey"},className:"disable-text-selection",children:u.name})})]})})}),N1e=de.forwardRef(({objectKey:r},e)=>{const t=de.useRef(null),i=iE(e,t),s=de.useRef(),o=ws(u=>u.clock),l=ws(de.useCallback(u=>u.texts[r],[r]));return Af(de.useCallback(()=>{const u=o.getElapsed()*1e3;i.current&&(i.current.position.set(typeof l.position.x=="function"?l.position.x(u):l.position.x,typeof l.position.y=="function"?l.position.y(u):l.position.y,typeof l.position.z=="function"?l.position.z(u):l.position.z),i.current.visible=typeof l.hidden=="function"?!l.hidden(u):!l.hidden),s.current&&rw(s,l.color,u)},[l,i,o])),Xt("group",{ref:i,children:Xt(wve,{follow:!0,children:Xt(bye,{ref:s,depthOffset:2,scale:[.2,.2,.2],children:l.value})})})}),D1e=de.forwardRef(({objectKey:r},e)=>{const t=de.useRef(null),i=iE(e,t),s=ws(m=>m.clock),{points:o,scale:l,hidden:u}=ws(de.useCallback(m=>({points:m.points[r].points,scale:m.points[r].scale,hidden:m.points[r].hidden}),[r]),Td),[{positions:h,colors:p}]=de.useState(()=>({positions:new Float32Array(o.length*3),colors:new Float32Array(o.length*3)}));return Af(()=>{const m=s.getElapsed()*1e3;if(i.current)for(let _=0;_<o.length;_++){let v=_*3;h[v]=typeof o[_].position.x=="function"?o[_].position.x(m):o[_].position.x,h[v+1]=typeof o[_].position.y=="function"?o[_].position.y(m):o[_].position.y,h[v+2]=typeof o[_].position.z=="function"?o[_].position.z(m):o[_].position.z,p[v]=typeof o[_].color.r=="function"?o[_].color.r(m)/255:o[_].color.r/255,p[v+1]=typeof o[_].color.g=="function"?o[_].color.g(m)/255:o[_].color.g/255,p[v+2]=typeof o[_].color.b=="function"?o[_].color.b(m)/255:o[_].color.b/255}}),o.length<=1?null:Xt(rbe,{ref:i,hidden:u,positions:h,colors:p,children:Xt(Qye,{transparent:!0,vertexColors:!0,sizeAttenuation:!0,depthWrite:!0,size:l*.1})})}),FP=de.memo(({activeTf:r,displayTfs:e,allTfs:t,allItems:i,allLines:s,allHulls:o,allTexts:l,allPoints:u,highlightColor:h,ghosts:p,targetRef:m,targetId:_,targetSource:v,filterActive:E,tfFilter:w,customProps:x})=>{const A=r==="world"?nTe:r==="gizmo"?rTe:tTe,O=r===_?x:{},k=E?t.filter(N=>w.includes(N.key)):t,D=E&&r!==m;return uc(A,{objectKey:r,displayTfs:e,ref:_===r?m:null,...O,ghost:p,highlightColor:h,children:[k.filter(N=>N.frame===r||r==="world"&&!N.frame).map(N=>Xt(FP,{activeTf:N.key,displayTfs:e,allTfs:t,allItems:i,allLines:s,allHulls:o,allTexts:l,allPoints:u,highlightColor:h,ghosts:p,targetRef:m,targetSource:v,targetId:_,filterActive:D,tfFilter:w,customProps:x},N.key)),i.filter(N=>N.frame===r||r==="world"&&!N.frame).map(N=>{const F=N.key===_&&v==="items"?x:{};return!E||N.key===_||r===_?Xt(R1e,{objectKey:N.key,highlightColor:h,ghost:p,ref:N.key===_?m:null,...F},N.key):null}),s.filter(N=>N.frame===r||r==="world"&&!N.frame).map(N=>{const F=N.key===_&&v==="lines"?x:{};return!E||N.key===_||r===_?Xt(O1e,{objectKey:N.key,ref:N.lineKey===_?m:null,...F},N.key):null}),o.filter(N=>N.frame===r||r==="world"&&!N.frame).map(N=>{const F=N.key===_&&v==="hulls"?x:{};return!E||N.key===_||r===_?Xt(L1e,{objectKey:N.key,highlightColor:h,ghost:p,ref:N.key===_?m:null,...F},N.key):null}),l.filter(N=>N.frame===r||r==="world"&&!N.frame).map(N=>{const F=N.key===_&&v==="texts"?x:{};return!E||N.key===_||r===_?Xt(N1e,{objectKey:N.key,highlightColor:h,ref:N.key===_?m:null,...F},N.key):null}),u.filter(N=>N.frame===r||r==="world"&&!N.frame).map(N=>{const F=N.key===_&&v==="points"?x:{};return!E||N.key===_||r===_?Xt(D1e,{objectKey:N.key,highlightColor:h,ref:N.key===_?m:null,...F},N.key):null})]})}),B1e=["enabled","axis","translationSnap","rotationSnap","scaleSnap","space","size"],P1e=["displayTfs","allTfs","allItems","allLines","allHulls","allTexts","allPoints","highlightColor"],F1e=de.memo(({camera:r,objectInfo:e,highlightColor:t,translateSnap:i,rotateSnap:s,scaleSnap:o,onDragStart:l,onDragEnd:u,mode:h,...p})=>{const m=aL(p,B1e),_=aL(p,P1e),v=ws(de.useCallback(se=>{let fe=[];e.source==="tfs"&&fe.push(e.key);let ae=se[e.source][e.key].frame;for(;ae&&ae!=="world"&&ae!=="gizmo";){let he=se.tfs[ae];fe.push(ae),ae=he.frame}return fe},[e]),Td),E=de.useRef(),w=de.useRef(),x=ws(se=>aL(se[e.source][e.key],["position","rotation","scale"]),Td),A=Nh(({gl:se})=>se),O=Nh(({camera:se})=>se),k=Nh(({invalidate:se})=>se),D=r||O,[N]=de.useState(()=>new Bbe(D,A.domElement));N.translationSnap=i,N.rotationSnap=s,N.scaleSnap=o,h!=null&&h.includes("translate")?N.mode="translate":h!=null&&h.includes("rotate")?N.mode="rotate":h!=null&&h.includes("scale")&&(N.mode="scale"),h!=null&&h.includes("-x")?(N.showY=!1,N.showZ=!1):h!=null&&h.includes("-y")?(N.showX=!1,N.showZ=!1):h!=null&&h.includes("-z")&&(N.showX=!1,N.showY=!1);const[F,z]=de.useState(!1),[V,U]=de.useState(x),[ee,ne]=de.useState(!1);de.useEffect(()=>{console.log("refreshing transform"),U(x)},[x,ee]);const ie=ws(se=>se.onMove,Td);return de.useEffect(()=>{const se=fe=>{var ae,he,ge;const Ie=(ae=w==null?void 0:w.current)==null?void 0:ae.position,j=(he=w==null?void 0:w.current)==null?void 0:he.quaternion,te=(ge=w==null?void 0:w.current)==null?void 0:ge.scale;fe.value&&!F?(console.log("starting transform"),z(!0),U({position:Ie,rotation:j,scale:te}),l&&l()):!fe.value&&F&&(console.log("stopping transform"),z(!1),u&&u(),ie(e.key,e.source,{position:N.worldPosition,quaternion:N.worldQuaternion,scale:N._worldScale},{position:Ie?{x:Ie.x,y:Ie.y,z:Ie.z}:null,quaternion:j?{x:j.x,y:j.y,z:j.z,w:j.w}:null,scale:te?{x:te.x,y:te.y,z:te.z}:null}),ne(!ee))};return N&&N.addEventListener("dragging-changed",se),()=>{N.removeEventListener("dragging-changed",se)}},[x,F,e]),de.useEffect(()=>void(N==null?void 0:N.attach(w.current)),[w,N]),de.useEffect(()=>(N&&N.addEventListener("change",k),()=>{var se;return(se=N==null?void 0:N.removeEventListener)==null?void 0:se.call(N,"change",k)}),[N,k]),N?uc(xw,{children:[Xt("primitive",{ref:E,object:N,...m}),Xt(FP,{..._,activeTf:"world",tfFilter:v,ghosts:!0,targetRef:w,targetSource:e.source,targetId:e.key,filterActive:!0,customProps:{...V}})]}):null}),cy=(r,e)=>r.length!==e.length?!1:!r.some((t,i)=>!sm.exports.isEqual(e[i],t));function U1e({displayTfs:r=!1,displayGrid:e=!0,isPolar:t=!1,backgroundColor:i="#d0d0d0",planeColor:s="#a8a8a8",highlightColor:o="#00ffff",plane:l=0,translateSnap:u=0,rotateSnap:h=0,scaleSnap:p=0,debug:m=!1}){m&&console.log("content rerender");const _=Nh(ie=>ie.camera),v=ws(ie=>ie.clock,Td);Af(()=>{v.update()});const E=ws(ie=>sm.exports.sortBy(Object.entries(ie.tfs).map(([se,fe])=>({key:se,frame:fe.frame,transformMode:fe.transformMode,source:"tfs"})),se=>se.key),cy),w=ws(ie=>sm.exports.sortBy(Object.entries(ie.items).map(([se,fe])=>({key:se,frame:fe.frame,transformMode:fe.transformMode,source:"items"})),se=>se.key),cy),x=ws(ie=>sm.exports.sortBy(Object.entries(ie.lines).map(([se,fe])=>({key:se,frame:fe.frame,source:"lines"})),se=>se.key),cy),A=ws(ie=>sm.exports.sortBy(Object.entries(ie.hulls).map(([se,fe])=>({key:se,frame:fe.frame,source:"hulls"})),se=>se.key),cy),O=ws(ie=>sm.exports.sortBy(Object.entries(ie.texts).map(([se,fe])=>({key:se,frame:fe.frame,source:"texts"})),se=>se.key),cy),k=ws(ie=>sm.exports.sortBy(Object.entries(ie.points).map(([se,fe])=>({key:se,frame:fe.frame,source:"points"})),se=>se.key),cy),D=ws(ie=>sm.exports.sortBy(Object.entries(ie.widgets).map(([se,fe])=>({key:se,frame:fe.frame,source:"widgets"})),se=>se.key),cy),N=[...w,...E].filter(ie=>["translate","rotate","scale","translate-x","translate-y","translate-z","rotate-x","rotate-y","rotate-z","scale-x","scale-y","scale-z"].includes(ie.transformMode)),F=de.useRef(),z=de.useRef(),V=de.useRef(),U=de.useRef(),ee=Dbe(s),ne=[ee.r,ee.g,ee.b,.5];return uc(vr.Fragment,{children:[Xt(Kye,{ref:U,makeDefault:!0,camera:_}),Xt("pointLight",{ref:z,intensity:.5,position:[-1,-3,3],color:"#FFFAEE"}),Xt(Lbe,{ref:F,intensity:.7,color:"white"}),Xt(Nbe,{ref:V,castShadow:!0,position:[5,15,15],intensity:.6,color:"#FFFAEE"}),Xt("spotLight",{penumbra:1,position:[-1,-1,4],intensity:.3,castShadow:!0,color:"#FFFAEE"}),Xt("color",{attach:"background",args:[i]}),Xt("fogExp2",{attach:"fog",args:[i,.01]}),Xt(Zye,{receiveShadow:!0,scale:1e3,position:[0,0,l-.01],material:Kg(...ne)}),uc(x1e,{children:[Xt(w1e,{autoClear:!1,children:Xt(C1e,{visibleEdgeColor:o,hiddenEdgeColor:o,blur:!0,kernelSize:1,edgeStrength:50,pulseSpeed:.25,xRay:!0})}),Xt(FP,{activeTf:"world",displayTfs:r,allTfs:E,allItems:w,allLines:x,allHulls:A,allTexts:O,allPoints:k,allWidgets:D,highlightColor:o})]}),Xt("group",{position:[0,0,l],rotation:[Math.PI/2,0,0],up:[0,0,1],children:e&&(t?Xt("polarGridHelper",{args:[10,16,8,64,"white","gray"]}):Xt("gridHelper",{args:[20,20,"white","gray"]}))}),N.map(ie=>Xt(F1e,{objectInfo:ie,mode:ie.transformMode,displayTfs:r,allTfs:E,allItems:w,allLines:x,allHulls:A,allTexts:O,allPoints:k,allWidgets:D,translateSnap:u,rotateSnap:h,scaleSnap:p,highlightColor:o,onDragEnd:()=>{U.current&&(U.current.enabled=!0)},onDragStart:()=>{U.current&&(U.current.enabled=!1)}},`movableObjectTransform-${ie.key}`))]})}is.DefaultUp.set(0,0,1);function z1e({backgroundColor:r="#d0d0d0",store:e,fov:t=60,onPointerMissed:i=()=>{},meshLookup:s={},debug:o=!1,...l}){return o&&console.log("Scene rerender"),Xt(ive,{camera:{up:[0,0,1],fov:t,position:[0,-3,3]},shadows:!0,style:{background:r||"#d0d0d0"},onPointerMissed:i||(()=>{}),children:Xt(Obe,{store:e,debug:o,children:Xt(I1e,{meshes:s,children:Xt(de.Suspense,{children:Xt(U1e,{...l,backgroundColor:r,debug:o})})})})})}var UP={},yL={};const H1e=qg(Vre);var zG;function G1e(){return zG||(zG=1,function(r){"use client";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=H1e}(yL)),yL}var W1e=wB;Object.defineProperty(UP,"__esModule",{value:!0});var R7=UP.default=void 0,V1e=W1e(G1e()),j1e=Ft;R7=UP.default=(0,V1e.default)((0,j1e.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt");function X1e(r){const e=Oc(Zm(i=>i.resetSim)),t={displayTfs:!1,displayGrid:!0,isPolar:!1,backgroundColor:"#3a3a3a",planeColor:"#3a3a3a",highlightColor:"#ffffff",plane:0,fov:60,ar:!1,vr:!1};return Ft.jsxs(LB,{height:"100%",children:[Ft.jsx(z1e,{style:{overflow:"hidden"},store:Oc,meshLookup:wce,...t}),Ft.jsx(kie,{variant:"contained","aria-label":"restart",style:{position:"absolute",right:"0px",top:"0px",backgroundColor:"white",marginRight:"5px",marginTop:"5px"},onClick:e,children:Ft.jsx(R7,{})})]})}const bL=Nr("div")(({theme:r})=>({textAlign:"center",height:"100%"}));by.common.defineBlocks(IK);Object.assign(_1.javascriptGenerator.forBlock,KA);function Y1e(){return Ft.jsxs(LB,{height:"94vh",padding:0,children:[Ft.jsx(ole,{}),Ft.jsxs(_A,{orientation:"vertical",style:{height:"100%",width:"100vw"},children:[Ft.jsx(Zx,{flex:.7,children:Ft.jsx(bL,{style:{width:"100%",height:"100%",paddingLeft:"2px"},children:Ft.jsx(ule,{})})}),Ft.jsx(cf,{propagate:!0}),Ft.jsx(Zx,{flex:.3,children:Ft.jsxs(_A,{orientation:"horizontal",children:[Ft.jsx(Zx,{children:Ft.jsx(bL,{children:Ft.jsx(X1e,{})})}),Ft.jsx(cf,{propagate:!0}),Ft.jsx(Zx,{children:Ft.jsx(bL,{children:Ft.jsx("p",{children:"All the data goes here"})})})]})})]})]})}EL.createRoot(document.getElementById("root")).render(Ft.jsx(vr.StrictMode,{children:Ft.jsx(Y1e,{})}));
