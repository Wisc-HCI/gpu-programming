function sne(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Sv(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var d8={exports:{}},XR={},f8={exports:{}},Bs={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC=Symbol.for("react.element"),one=Symbol.for("react.portal"),ane=Symbol.for("react.fragment"),lne=Symbol.for("react.strict_mode"),une=Symbol.for("react.profiler"),cne=Symbol.for("react.provider"),hne=Symbol.for("react.context"),dne=Symbol.for("react.forward_ref"),fne=Symbol.for("react.suspense"),pne=Symbol.for("react.memo"),mne=Symbol.for("react.lazy"),Fz=Symbol.iterator;function gne(n){return n===null||typeof n!="object"?null:(n=Fz&&n[Fz]||n["@@iterator"],typeof n=="function"?n:null)}var p8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m8=Object.assign,g8={};function iE(n,e,t){this.props=n,this.context=e,this.refs=g8,this.updater=t||p8}iE.prototype.isReactComponent={};iE.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};iE.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function v8(){}v8.prototype=iE.prototype;function JB(n,e,t){this.props=n,this.context=e,this.refs=g8,this.updater=t||p8}var qB=JB.prototype=new v8;qB.constructor=JB;m8(qB,iE.prototype);qB.isPureReactComponent=!0;var zz=Array.isArray,_8=Object.prototype.hasOwnProperty,QB={current:null},y8={key:!0,ref:!0,__self:!0,__source:!0};function b8(n,e,t){var r,s={},o=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)_8.call(e,r)&&!y8.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=t;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];s.children=h}if(n&&n.defaultProps)for(r in u=n.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:mC,type:n,key:o,ref:l,props:s,_owner:QB.current}}function vne(n,e){return{$$typeof:mC,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function ZB(n){return typeof n=="object"&&n!==null&&n.$$typeof===mC}function _ne(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Uz=/\/+/g;function F2(n,e){return typeof n=="object"&&n!==null&&n.key!=null?_ne(""+n.key):e.toString(36)}function JA(n,e,t,r,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var l=!1;if(n===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case mC:case one:l=!0}}if(l)return l=n,s=s(l),n=r===""?"."+F2(l,0):r,zz(s)?(t="",n!=null&&(t=n.replace(Uz,"$&/")+"/"),JA(s,e,t,"",function(f){return f})):s!=null&&(ZB(s)&&(s=vne(s,t+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Uz,"$&/")+"/")+n)),e.push(s)),1;if(l=0,r=r===""?".":r+":",zz(n))for(var u=0;u<n.length;u++){o=n[u];var h=r+F2(o,u);l+=JA(o,e,t,h,s)}else if(h=gne(n),typeof h=="function")for(n=h.call(n),u=0;!(o=n.next()).done;)o=o.value,h=r+F2(o,u++),l+=JA(o,e,t,h,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function XC(n,e,t){if(n==null)return n;var r=[],s=0;return JA(n,r,"","",function(o){return e.call(t,o,s++)}),r}function yne(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Tp={current:null},qA={transition:null},bne={ReactCurrentDispatcher:Tp,ReactCurrentBatchConfig:qA,ReactCurrentOwner:QB};Bs.Children={map:XC,forEach:function(n,e,t){XC(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return XC(n,function(){e++}),e},toArray:function(n){return XC(n,function(e){return e})||[]},only:function(n){if(!ZB(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Bs.Component=iE;Bs.Fragment=ane;Bs.Profiler=une;Bs.PureComponent=JB;Bs.StrictMode=lne;Bs.Suspense=fne;Bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bne;Bs.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=m8({},n.props),s=n.key,o=n.ref,l=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=QB.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var u=n.type.defaultProps;for(h in e)_8.call(e,h)&&!y8.hasOwnProperty(h)&&(r[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)r.children=t;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];r.children=u}return{$$typeof:mC,type:n.type,key:s,ref:o,props:r,_owner:l}};Bs.createContext=function(n){return n={$$typeof:hne,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:cne,_context:n},n.Consumer=n};Bs.createElement=b8;Bs.createFactory=function(n){var e=b8.bind(null,n);return e.type=n,e};Bs.createRef=function(){return{current:null}};Bs.forwardRef=function(n){return{$$typeof:dne,render:n}};Bs.isValidElement=ZB;Bs.lazy=function(n){return{$$typeof:mne,_payload:{_status:-1,_result:n},_init:yne}};Bs.memo=function(n,e){return{$$typeof:pne,type:n,compare:e===void 0?null:e}};Bs.startTransition=function(n){var e=qA.transition;qA.transition={};try{n()}finally{qA.transition=e}};Bs.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Bs.useCallback=function(n,e){return Tp.current.useCallback(n,e)};Bs.useContext=function(n){return Tp.current.useContext(n)};Bs.useDebugValue=function(){};Bs.useDeferredValue=function(n){return Tp.current.useDeferredValue(n)};Bs.useEffect=function(n,e){return Tp.current.useEffect(n,e)};Bs.useId=function(){return Tp.current.useId()};Bs.useImperativeHandle=function(n,e,t){return Tp.current.useImperativeHandle(n,e,t)};Bs.useInsertionEffect=function(n,e){return Tp.current.useInsertionEffect(n,e)};Bs.useLayoutEffect=function(n,e){return Tp.current.useLayoutEffect(n,e)};Bs.useMemo=function(n,e){return Tp.current.useMemo(n,e)};Bs.useReducer=function(n,e,t){return Tp.current.useReducer(n,e,t)};Bs.useRef=function(n){return Tp.current.useRef(n)};Bs.useState=function(n){return Tp.current.useState(n)};Bs.useSyncExternalStore=function(n,e,t){return Tp.current.useSyncExternalStore(n,e,t)};Bs.useTransition=function(){return Tp.current.useTransition()};Bs.version="18.2.0";f8.exports=Bs;var de=f8.exports;const Tt=Jy(de),HN=sne({__proto__:null,default:Tt},[de]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tne=de,Sne=Symbol.for("react.element"),wne=Symbol.for("react.fragment"),Ene=Object.prototype.hasOwnProperty,xne=Tne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$ne={key:!0,ref:!0,__self:!0,__source:!0};function T8(n,e,t){var r,s={},o=null,l=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)Ene.call(e,r)&&!$ne.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Sne,type:n,key:o,ref:l,props:s,_owner:xne.current}}XR.Fragment=wne;XR.jsx=T8;XR.jsxs=T8;d8.exports=XR;var Ae=d8.exports,GN={},S8={exports:{}},Gm={},w8={exports:{}},E8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(K,ie){var se=K.length;K.push(ie);e:for(;0<se;){var fe=se-1>>>1,Se=K[fe];if(0<s(Se,ie))K[fe]=ie,K[se]=Se,se=fe;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ie=K[0],se=K.pop();if(se!==ie){K[0]=se;e:for(var fe=0,Se=K.length,Ue=Se>>>1;fe<Ue;){var ke=2*(fe+1)-1,qe=K[ke],we=ke+1,Ze=K[we];if(0>s(qe,se))we<Se&&0>s(Ze,qe)?(K[fe]=Ze,K[we]=se,fe=we):(K[fe]=qe,K[ke]=se,fe=ke);else if(we<Se&&0>s(Ze,se))K[fe]=Ze,K[we]=se,fe=we;else break e}}return ie}function s(K,ie){var se=K.sortIndex-ie.sortIndex;return se!==0?se:K.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],f=[],g=1,y=null,b=3,S=!1,C=!1,M=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(K){for(var ie=t(f);ie!==null;){if(ie.callback===null)r(f);else if(ie.startTime<=K)r(f),ie.sortIndex=ie.expirationTime,e(h,ie);else break;ie=t(f)}}function D(K){if(M=!1,P(K),!C)if(t(h)!==null)C=!0,ge(U);else{var ie=t(f);ie!==null&&$e(D,ie.startTime-K)}}function U(K,ie){C=!1,M&&(M=!1,k(z),z=-1),S=!0;var se=b;try{for(P(ie),y=t(h);y!==null&&(!(y.expirationTime>ie)||K&&!ue());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,b=y.priorityLevel;var Se=fe(y.expirationTime<=ie);ie=n.unstable_now(),typeof Se=="function"?y.callback=Se:y===t(h)&&r(h),P(ie)}else r(h);y=t(h)}if(y!==null)var Ue=!0;else{var ke=t(f);ke!==null&&$e(D,ke.startTime-ie),Ue=!1}return Ue}finally{y=null,b=se,S=!1}}var H=!1,V=null,z=-1,Z=5,oe=-1;function ue(){return!(n.unstable_now()-oe<Z)}function q(){if(V!==null){var K=n.unstable_now();oe=K;var ie=!0;try{ie=V(!0,K)}finally{ie?ae():(H=!1,V=null)}}else H=!1}var ae;if(typeof O=="function")ae=function(){O(q)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ce=le.port2;le.port1.onmessage=q,ae=function(){ce.postMessage(null)}}else ae=function(){A(q,0)};function ge(K){V=K,H||(H=!0,ae())}function $e(K,ie){z=A(function(){K(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_continueExecution=function(){C||S||(C=!0,ge(U))},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(K){switch(b){case 1:case 2:case 3:var ie=3;break;default:ie=b}var se=b;b=ie;try{return K()}finally{b=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(K,ie){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var se=b;b=K;try{return ie()}finally{b=se}},n.unstable_scheduleCallback=function(K,ie,se){var fe=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?fe+se:fe):se=fe,K){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=se+Se,K={id:g++,callback:ie,priorityLevel:K,startTime:se,expirationTime:Se,sortIndex:-1},se>fe?(K.sortIndex=se,e(f,K),t(h)===null&&K===t(f)&&(M?(k(z),z=-1):M=!0,$e(D,se-fe))):(K.sortIndex=Se,e(h,K),C||S||(C=!0,ge(U))),K},n.unstable_shouldYield=ue,n.unstable_wrapCallback=function(K){var ie=b;return function(){var se=b;b=ie;try{return K.apply(this,arguments)}finally{b=se}}}})(E8);w8.exports=E8;var Cne=w8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x8=de,zm=Cne;function Cn(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $8=new Set,l$={};function oT(n,e){ww(n,e),ww(n+"Capture",e)}function ww(n,e){for(l$[n]=e,n=0;n<e.length;n++)$8.add(e[n])}var b_=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),WN=Object.prototype.hasOwnProperty,Mne=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hz={},Gz={};function Ane(n){return WN.call(Gz,n)?!0:WN.call(Hz,n)?!1:Mne.test(n)?Gz[n]=!0:(Hz[n]=!0,!1)}function Ine(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Rne(n,e,t,r){if(e===null||typeof e>"u"||Ine(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Sp(n,e,t,r,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var of={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){of[n]=new Sp(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];of[e]=new Sp(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){of[n]=new Sp(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){of[n]=new Sp(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){of[n]=new Sp(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){of[n]=new Sp(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){of[n]=new Sp(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){of[n]=new Sp(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){of[n]=new Sp(n,5,!1,n.toLowerCase(),null,!1,!1)});var eF=/[\-:]([a-z])/g;function tF(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(eF,tF);of[e]=new Sp(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(eF,tF);of[e]=new Sp(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(eF,tF);of[e]=new Sp(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){of[n]=new Sp(n,1,!1,n.toLowerCase(),null,!1,!1)});of.xlinkHref=new Sp("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){of[n]=new Sp(n,1,!1,n.toLowerCase(),null,!0,!0)});function nF(n,e,t,r){var s=of.hasOwnProperty(e)?of[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Rne(e,t,s,r)&&(t=null),r||s===null?Ane(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var A_=x8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,KC=Symbol.for("react.element"),GS=Symbol.for("react.portal"),WS=Symbol.for("react.fragment"),rF=Symbol.for("react.strict_mode"),VN=Symbol.for("react.profiler"),C8=Symbol.for("react.provider"),M8=Symbol.for("react.context"),iF=Symbol.for("react.forward_ref"),jN=Symbol.for("react.suspense"),YN=Symbol.for("react.suspense_list"),sF=Symbol.for("react.memo"),by=Symbol.for("react.lazy"),A8=Symbol.for("react.offscreen"),Wz=Symbol.iterator;function FE(n){return n===null||typeof n!="object"?null:(n=Wz&&n[Wz]||n["@@iterator"],typeof n=="function"?n:null)}var hc=Object.assign,z2;function Cx(n){if(z2===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);z2=e&&e[1]||""}return`
`+z2+n}var U2=!1;function H2(n,e){if(!n||U2)return"";U2=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(n,[],e)}else{try{e.call()}catch(f){r=f}n.call(e.prototype)}else{try{throw Error()}catch(f){r=f}n()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var s=f.stack.split(`
`),o=r.stack.split(`
`),l=s.length-1,u=o.length-1;1<=l&&0<=u&&s[l]!==o[u];)u--;for(;1<=l&&0<=u;l--,u--)if(s[l]!==o[u]){if(l!==1||u!==1)do if(l--,u--,0>u||s[l]!==o[u]){var h=`
`+s[l].replace(" at new "," at ");return n.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",n.displayName)),h}while(1<=l&&0<=u);break}}}finally{U2=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Cx(n):""}function kne(n){switch(n.tag){case 5:return Cx(n.type);case 16:return Cx("Lazy");case 13:return Cx("Suspense");case 19:return Cx("SuspenseList");case 0:case 2:case 15:return n=H2(n.type,!1),n;case 11:return n=H2(n.type.render,!1),n;case 1:return n=H2(n.type,!0),n;default:return""}}function XN(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case WS:return"Fragment";case GS:return"Portal";case VN:return"Profiler";case rF:return"StrictMode";case jN:return"Suspense";case YN:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case M8:return(n.displayName||"Context")+".Consumer";case C8:return(n._context.displayName||"Context")+".Provider";case iF:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case sF:return e=n.displayName||null,e!==null?e:XN(n.type)||"Memo";case by:e=n._payload,n=n._init;try{return XN(n(e))}catch{}}return null}function One(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return XN(e);case 8:return e===rF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gy(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function I8(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Lne(n){var e=I8(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function JC(n){n._valueTracker||(n._valueTracker=Lne(n))}function R8(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=I8(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function BI(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function KN(n,e){var t=e.checked;return hc({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Vz(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Gy(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function k8(n,e){e=e.checked,e!=null&&nF(n,"checked",e,!1)}function JN(n,e){k8(n,e);var t=Gy(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?qN(n,e.type,t):e.hasOwnProperty("defaultValue")&&qN(n,e.type,Gy(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function jz(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function qN(n,e,t){(e!=="number"||BI(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Mx=Array.isArray;function cw(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Gy(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function QN(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Cn(91));return hc({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Yz(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Cn(92));if(Mx(t)){if(1<t.length)throw Error(Cn(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Gy(t)}}function O8(n,e){var t=Gy(e.value),r=Gy(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Xz(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function L8(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ZN(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?L8(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qC,N8=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(qC=qC||document.createElement("div"),qC.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qC.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function u$(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ux={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nne=["Webkit","ms","Moz","O"];Object.keys(Ux).forEach(function(n){Nne.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ux[e]=Ux[n]})});function D8(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ux.hasOwnProperty(n)&&Ux[n]?(""+e).trim():e+"px"}function P8(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=D8(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var Dne=hc({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eD(n,e){if(e){if(Dne[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Cn(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Cn(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Cn(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Cn(62))}}function tD(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nD=null;function oF(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var rD=null,hw=null,dw=null;function Kz(n){if(n=_C(n)){if(typeof rD!="function")throw Error(Cn(280));var e=n.stateNode;e&&(e=ZR(e),rD(n.stateNode,n.type,e))}}function B8(n){hw?dw?dw.push(n):dw=[n]:hw=n}function F8(){if(hw){var n=hw,e=dw;if(dw=hw=null,Kz(n),e)for(n=0;n<e.length;n++)Kz(e[n])}}function z8(n,e){return n(e)}function U8(){}var G2=!1;function H8(n,e,t){if(G2)return n(e,t);G2=!0;try{return z8(n,e,t)}finally{G2=!1,(hw!==null||dw!==null)&&(U8(),F8())}}function c$(n,e){var t=n.stateNode;if(t===null)return null;var r=ZR(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Cn(231,e,typeof t));return t}var iD=!1;if(b_)try{var zE={};Object.defineProperty(zE,"passive",{get:function(){iD=!0}}),window.addEventListener("test",zE,zE),window.removeEventListener("test",zE,zE)}catch{iD=!1}function Pne(n,e,t,r,s,o,l,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(t,f)}catch(g){this.onError(g)}}var Hx=!1,FI=null,zI=!1,sD=null,Bne={onError:function(n){Hx=!0,FI=n}};function Fne(n,e,t,r,s,o,l,u,h){Hx=!1,FI=null,Pne.apply(Bne,arguments)}function zne(n,e,t,r,s,o,l,u,h){if(Fne.apply(this,arguments),Hx){if(Hx){var f=FI;Hx=!1,FI=null}else throw Error(Cn(198));zI||(zI=!0,sD=f)}}function aT(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function G8(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Jz(n){if(aT(n)!==n)throw Error(Cn(188))}function Une(n){var e=n.alternate;if(!e){if(e=aT(n),e===null)throw Error(Cn(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===t)return Jz(s),n;if(o===r)return Jz(s),e;o=o.sibling}throw Error(Cn(188))}if(t.return!==r.return)t=s,r=o;else{for(var l=!1,u=s.child;u;){if(u===t){l=!0,t=s,r=o;break}if(u===r){l=!0,r=s,t=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===t){l=!0,t=o,r=s;break}if(u===r){l=!0,r=o,t=s;break}u=u.sibling}if(!l)throw Error(Cn(189))}}if(t.alternate!==r)throw Error(Cn(190))}if(t.tag!==3)throw Error(Cn(188));return t.stateNode.current===t?n:e}function W8(n){return n=Une(n),n!==null?V8(n):null}function V8(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=V8(n);if(e!==null)return e;n=n.sibling}return null}var j8=zm.unstable_scheduleCallback,qz=zm.unstable_cancelCallback,Hne=zm.unstable_shouldYield,Gne=zm.unstable_requestPaint,hh=zm.unstable_now,Wne=zm.unstable_getCurrentPriorityLevel,aF=zm.unstable_ImmediatePriority,Y8=zm.unstable_UserBlockingPriority,UI=zm.unstable_NormalPriority,Vne=zm.unstable_LowPriority,X8=zm.unstable_IdlePriority,KR=null,uv=null;function jne(n){if(uv&&typeof uv.onCommitFiberRoot=="function")try{uv.onCommitFiberRoot(KR,n,void 0,(n.current.flags&128)===128)}catch{}}var a0=Math.clz32?Math.clz32:Kne,Yne=Math.log,Xne=Math.LN2;function Kne(n){return n>>>=0,n===0?32:31-(Yne(n)/Xne|0)|0}var QC=64,ZC=4194304;function Ax(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function HI(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,o=n.pingedLanes,l=t&268435455;if(l!==0){var u=l&~s;u!==0?r=Ax(u):(o&=l,o!==0&&(r=Ax(o)))}else l=t&~s,l!==0?r=Ax(l):o!==0&&(r=Ax(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-a0(e),s=1<<t,r|=n[t],e&=~s;return r}function Jne(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qne(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var l=31-a0(o),u=1<<l,h=s[l];h===-1?(!(u&t)||u&r)&&(s[l]=Jne(u,e)):h<=e&&(n.expiredLanes|=u),o&=~u}}function oD(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function K8(){var n=QC;return QC<<=1,!(QC&4194240)&&(QC=64),n}function W2(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function gC(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-a0(e),n[e]=t}function Qne(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-a0(t),o=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~o}}function lF(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-a0(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var Ra=0;function J8(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var q8,uF,Q8,Z8,eV,aD=!1,eM=[],ky=null,Oy=null,Ly=null,h$=new Map,d$=new Map,Ey=[],Zne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qz(n,e){switch(n){case"focusin":case"focusout":ky=null;break;case"dragenter":case"dragleave":Oy=null;break;case"mouseover":case"mouseout":Ly=null;break;case"pointerover":case"pointerout":h$.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":d$.delete(e.pointerId)}}function UE(n,e,t,r,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=_C(e),e!==null&&uF(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function ere(n,e,t,r,s){switch(e){case"focusin":return ky=UE(ky,n,e,t,r,s),!0;case"dragenter":return Oy=UE(Oy,n,e,t,r,s),!0;case"mouseover":return Ly=UE(Ly,n,e,t,r,s),!0;case"pointerover":var o=s.pointerId;return h$.set(o,UE(h$.get(o)||null,n,e,t,r,s)),!0;case"gotpointercapture":return o=s.pointerId,d$.set(o,UE(d$.get(o)||null,n,e,t,r,s)),!0}return!1}function tV(n){var e=b1(n.target);if(e!==null){var t=aT(e);if(t!==null){if(e=t.tag,e===13){if(e=G8(t),e!==null){n.blockedOn=e,eV(n.priority,function(){Q8(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function QA(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=lD(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);nD=r,t.target.dispatchEvent(r),nD=null}else return e=_C(t),e!==null&&uF(e),n.blockedOn=t,!1;e.shift()}return!0}function Zz(n,e,t){QA(n)&&t.delete(e)}function tre(){aD=!1,ky!==null&&QA(ky)&&(ky=null),Oy!==null&&QA(Oy)&&(Oy=null),Ly!==null&&QA(Ly)&&(Ly=null),h$.forEach(Zz),d$.forEach(Zz)}function HE(n,e){n.blockedOn===e&&(n.blockedOn=null,aD||(aD=!0,zm.unstable_scheduleCallback(zm.unstable_NormalPriority,tre)))}function f$(n){function e(s){return HE(s,n)}if(0<eM.length){HE(eM[0],n);for(var t=1;t<eM.length;t++){var r=eM[t];r.blockedOn===n&&(r.blockedOn=null)}}for(ky!==null&&HE(ky,n),Oy!==null&&HE(Oy,n),Ly!==null&&HE(Ly,n),h$.forEach(e),d$.forEach(e),t=0;t<Ey.length;t++)r=Ey[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ey.length&&(t=Ey[0],t.blockedOn===null);)tV(t),t.blockedOn===null&&Ey.shift()}var fw=A_.ReactCurrentBatchConfig,GI=!0;function nre(n,e,t,r){var s=Ra,o=fw.transition;fw.transition=null;try{Ra=1,cF(n,e,t,r)}finally{Ra=s,fw.transition=o}}function rre(n,e,t,r){var s=Ra,o=fw.transition;fw.transition=null;try{Ra=4,cF(n,e,t,r)}finally{Ra=s,fw.transition=o}}function cF(n,e,t,r){if(GI){var s=lD(n,e,t,r);if(s===null)eO(n,e,r,WI,t),Qz(n,r);else if(ere(s,n,e,t,r))r.stopPropagation();else if(Qz(n,r),e&4&&-1<Zne.indexOf(n)){for(;s!==null;){var o=_C(s);if(o!==null&&q8(o),o=lD(n,e,t,r),o===null&&eO(n,e,r,WI,t),o===s)break;s=o}s!==null&&r.stopPropagation()}else eO(n,e,r,null,t)}}var WI=null;function lD(n,e,t,r){if(WI=null,n=oF(r),n=b1(n),n!==null)if(e=aT(n),e===null)n=null;else if(t=e.tag,t===13){if(n=G8(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return WI=n,null}function nV(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wne()){case aF:return 1;case Y8:return 4;case UI:case Vne:return 16;case X8:return 536870912;default:return 16}default:return 16}}var $y=null,hF=null,ZA=null;function rV(){if(ZA)return ZA;var n,e=hF,t=e.length,r,s="value"in $y?$y.value:$y.textContent,o=s.length;for(n=0;n<t&&e[n]===s[n];n++);var l=t-n;for(r=1;r<=l&&e[t-r]===s[o-r];r++);return ZA=s.slice(n,1<r?1-r:void 0)}function eI(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function tM(){return!0}function eU(){return!1}function Wm(n){function e(t,r,s,o,l){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var u in n)n.hasOwnProperty(u)&&(t=n[u],this[u]=t?t(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?tM:eU,this.isPropagationStopped=eU,this}return hc(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=tM)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=tM)},persist:function(){},isPersistent:tM}),e}var sE={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dF=Wm(sE),vC=hc({},sE,{view:0,detail:0}),ire=Wm(vC),V2,j2,GE,JR=hc({},vC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fF,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==GE&&(GE&&n.type==="mousemove"?(V2=n.screenX-GE.screenX,j2=n.screenY-GE.screenY):j2=V2=0,GE=n),V2)},movementY:function(n){return"movementY"in n?n.movementY:j2}}),tU=Wm(JR),sre=hc({},JR,{dataTransfer:0}),ore=Wm(sre),are=hc({},vC,{relatedTarget:0}),Y2=Wm(are),lre=hc({},sE,{animationName:0,elapsedTime:0,pseudoElement:0}),ure=Wm(lre),cre=hc({},sE,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),hre=Wm(cre),dre=hc({},sE,{data:0}),nU=Wm(dre),fre={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pre={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mre={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gre(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=mre[n])?!!e[n]:!1}function fF(){return gre}var vre=hc({},vC,{key:function(n){if(n.key){var e=fre[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=eI(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?pre[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fF,charCode:function(n){return n.type==="keypress"?eI(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?eI(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),_re=Wm(vre),yre=hc({},JR,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rU=Wm(yre),bre=hc({},vC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fF}),Tre=Wm(bre),Sre=hc({},sE,{propertyName:0,elapsedTime:0,pseudoElement:0}),wre=Wm(Sre),Ere=hc({},JR,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),xre=Wm(Ere),$re=[9,13,27,32],pF=b_&&"CompositionEvent"in window,Gx=null;b_&&"documentMode"in document&&(Gx=document.documentMode);var Cre=b_&&"TextEvent"in window&&!Gx,iV=b_&&(!pF||Gx&&8<Gx&&11>=Gx),iU=" ",sU=!1;function sV(n,e){switch(n){case"keyup":return $re.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oV(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var VS=!1;function Mre(n,e){switch(n){case"compositionend":return oV(e);case"keypress":return e.which!==32?null:(sU=!0,iU);case"textInput":return n=e.data,n===iU&&sU?null:n;default:return null}}function Are(n,e){if(VS)return n==="compositionend"||!pF&&sV(n,e)?(n=rV(),ZA=hF=$y=null,VS=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iV&&e.locale!=="ko"?null:e.data;default:return null}}var Ire={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oU(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Ire[n.type]:e==="textarea"}function aV(n,e,t,r){B8(r),e=VI(e,"onChange"),0<e.length&&(t=new dF("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Wx=null,p$=null;function Rre(n){_V(n,0)}function qR(n){var e=XS(n);if(R8(e))return n}function kre(n,e){if(n==="change")return e}var lV=!1;if(b_){var X2;if(b_){var K2="oninput"in document;if(!K2){var aU=document.createElement("div");aU.setAttribute("oninput","return;"),K2=typeof aU.oninput=="function"}X2=K2}else X2=!1;lV=X2&&(!document.documentMode||9<document.documentMode)}function lU(){Wx&&(Wx.detachEvent("onpropertychange",uV),p$=Wx=null)}function uV(n){if(n.propertyName==="value"&&qR(p$)){var e=[];aV(e,p$,n,oF(n)),H8(Rre,e)}}function Ore(n,e,t){n==="focusin"?(lU(),Wx=e,p$=t,Wx.attachEvent("onpropertychange",uV)):n==="focusout"&&lU()}function Lre(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return qR(p$)}function Nre(n,e){if(n==="click")return qR(e)}function Dre(n,e){if(n==="input"||n==="change")return qR(e)}function Pre(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var h0=typeof Object.is=="function"?Object.is:Pre;function m$(n,e){if(h0(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!WN.call(e,s)||!h0(n[s],e[s]))return!1}return!0}function uU(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function cU(n,e){var t=uU(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=uU(t)}}function cV(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?cV(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function hV(){for(var n=window,e=BI();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=BI(n.document)}return e}function mF(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Bre(n){var e=hV(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&cV(t.ownerDocument.documentElement,t)){if(r!==null&&mF(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!n.extend&&o>r&&(s=r,r=o,o=s),s=cU(t,o);var l=cU(t,r);s&&l&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==l.node||n.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>r?(n.addRange(e),n.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Fre=b_&&"documentMode"in document&&11>=document.documentMode,jS=null,uD=null,Vx=null,cD=!1;function hU(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;cD||jS==null||jS!==BI(r)||(r=jS,"selectionStart"in r&&mF(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vx&&m$(Vx,r)||(Vx=r,r=VI(uD,"onSelect"),0<r.length&&(e=new dF("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=jS)))}function nM(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var YS={animationend:nM("Animation","AnimationEnd"),animationiteration:nM("Animation","AnimationIteration"),animationstart:nM("Animation","AnimationStart"),transitionend:nM("Transition","TransitionEnd")},J2={},dV={};b_&&(dV=document.createElement("div").style,"AnimationEvent"in window||(delete YS.animationend.animation,delete YS.animationiteration.animation,delete YS.animationstart.animation),"TransitionEvent"in window||delete YS.transitionend.transition);function QR(n){if(J2[n])return J2[n];if(!YS[n])return n;var e=YS[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in dV)return J2[n]=e[t];return n}var fV=QR("animationend"),pV=QR("animationiteration"),mV=QR("animationstart"),gV=QR("transitionend"),vV=new Map,dU="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qy(n,e){vV.set(n,e),oT(e,[n])}for(var q2=0;q2<dU.length;q2++){var Q2=dU[q2],zre=Q2.toLowerCase(),Ure=Q2[0].toUpperCase()+Q2.slice(1);qy(zre,"on"+Ure)}qy(fV,"onAnimationEnd");qy(pV,"onAnimationIteration");qy(mV,"onAnimationStart");qy("dblclick","onDoubleClick");qy("focusin","onFocus");qy("focusout","onBlur");qy(gV,"onTransitionEnd");ww("onMouseEnter",["mouseout","mouseover"]);ww("onMouseLeave",["mouseout","mouseover"]);ww("onPointerEnter",["pointerout","pointerover"]);ww("onPointerLeave",["pointerout","pointerover"]);oT("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oT("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oT("onBeforeInput",["compositionend","keypress","textInput","paste"]);oT("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oT("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oT("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ix="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hre=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ix));function fU(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,zne(r,e,void 0,n),n.currentTarget=null}function _V(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var l=r.length-1;0<=l;l--){var u=r[l],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&s.isPropagationStopped())break e;fU(s,u,f),o=h}else for(l=0;l<r.length;l++){if(u=r[l],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&s.isPropagationStopped())break e;fU(s,u,f),o=h}}}if(zI)throw n=sD,zI=!1,sD=null,n}function pu(n,e){var t=e[mD];t===void 0&&(t=e[mD]=new Set);var r=n+"__bubble";t.has(r)||(yV(e,n,2,!1),t.add(r))}function Z2(n,e,t){var r=0;e&&(r|=4),yV(t,n,r,e)}var rM="_reactListening"+Math.random().toString(36).slice(2);function g$(n){if(!n[rM]){n[rM]=!0,$8.forEach(function(t){t!=="selectionchange"&&(Hre.has(t)||Z2(t,!1,n),Z2(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[rM]||(e[rM]=!0,Z2("selectionchange",!1,e))}}function yV(n,e,t,r){switch(nV(e)){case 1:var s=nre;break;case 4:s=rre;break;default:s=cF}t=s.bind(null,e,t,n),s=void 0,!iD||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function eO(n,e,t,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var h=l.tag;if((h===3||h===4)&&(h=l.stateNode.containerInfo,h===s||h.nodeType===8&&h.parentNode===s))return;l=l.return}for(;u!==null;){if(l=b1(u),l===null)return;if(h=l.tag,h===5||h===6){r=o=l;continue e}u=u.parentNode}}r=r.return}H8(function(){var f=o,g=oF(t),y=[];e:{var b=vV.get(n);if(b!==void 0){var S=dF,C=n;switch(n){case"keypress":if(eI(t)===0)break e;case"keydown":case"keyup":S=_re;break;case"focusin":C="focus",S=Y2;break;case"focusout":C="blur",S=Y2;break;case"beforeblur":case"afterblur":S=Y2;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=tU;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=ore;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Tre;break;case fV:case pV:case mV:S=ure;break;case gV:S=wre;break;case"scroll":S=ire;break;case"wheel":S=xre;break;case"copy":case"cut":case"paste":S=hre;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=rU}var M=(e&4)!==0,A=!M&&n==="scroll",k=M?b!==null?b+"Capture":null:b;M=[];for(var O=f,P;O!==null;){P=O;var D=P.stateNode;if(P.tag===5&&D!==null&&(P=D,k!==null&&(D=c$(O,k),D!=null&&M.push(v$(O,D,P)))),A)break;O=O.return}0<M.length&&(b=new S(b,C,null,t,g),y.push({event:b,listeners:M}))}}if(!(e&7)){e:{if(b=n==="mouseover"||n==="pointerover",S=n==="mouseout"||n==="pointerout",b&&t!==nD&&(C=t.relatedTarget||t.fromElement)&&(b1(C)||C[T_]))break e;if((S||b)&&(b=g.window===g?g:(b=g.ownerDocument)?b.defaultView||b.parentWindow:window,S?(C=t.relatedTarget||t.toElement,S=f,C=C?b1(C):null,C!==null&&(A=aT(C),C!==A||C.tag!==5&&C.tag!==6)&&(C=null)):(S=null,C=f),S!==C)){if(M=tU,D="onMouseLeave",k="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(M=rU,D="onPointerLeave",k="onPointerEnter",O="pointer"),A=S==null?b:XS(S),P=C==null?b:XS(C),b=new M(D,O+"leave",S,t,g),b.target=A,b.relatedTarget=P,D=null,b1(g)===f&&(M=new M(k,O+"enter",C,t,g),M.target=P,M.relatedTarget=A,D=M),A=D,S&&C)t:{for(M=S,k=C,O=0,P=M;P;P=XT(P))O++;for(P=0,D=k;D;D=XT(D))P++;for(;0<O-P;)M=XT(M),O--;for(;0<P-O;)k=XT(k),P--;for(;O--;){if(M===k||k!==null&&M===k.alternate)break t;M=XT(M),k=XT(k)}M=null}else M=null;S!==null&&pU(y,b,S,M,!1),C!==null&&A!==null&&pU(y,A,C,M,!0)}}e:{if(b=f?XS(f):window,S=b.nodeName&&b.nodeName.toLowerCase(),S==="select"||S==="input"&&b.type==="file")var U=kre;else if(oU(b))if(lV)U=Dre;else{U=Lre;var H=Ore}else(S=b.nodeName)&&S.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(U=Nre);if(U&&(U=U(n,f))){aV(y,U,t,g);break e}H&&H(n,b,f),n==="focusout"&&(H=b._wrapperState)&&H.controlled&&b.type==="number"&&qN(b,"number",b.value)}switch(H=f?XS(f):window,n){case"focusin":(oU(H)||H.contentEditable==="true")&&(jS=H,uD=f,Vx=null);break;case"focusout":Vx=uD=jS=null;break;case"mousedown":cD=!0;break;case"contextmenu":case"mouseup":case"dragend":cD=!1,hU(y,t,g);break;case"selectionchange":if(Fre)break;case"keydown":case"keyup":hU(y,t,g)}var V;if(pF)e:{switch(n){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else VS?sV(n,t)&&(z="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(z="onCompositionStart");z&&(iV&&t.locale!=="ko"&&(VS||z!=="onCompositionStart"?z==="onCompositionEnd"&&VS&&(V=rV()):($y=g,hF="value"in $y?$y.value:$y.textContent,VS=!0)),H=VI(f,z),0<H.length&&(z=new nU(z,n,null,t,g),y.push({event:z,listeners:H}),V?z.data=V:(V=oV(t),V!==null&&(z.data=V)))),(V=Cre?Mre(n,t):Are(n,t))&&(f=VI(f,"onBeforeInput"),0<f.length&&(g=new nU("onBeforeInput","beforeinput",null,t,g),y.push({event:g,listeners:f}),g.data=V))}_V(y,e)})}function v$(n,e,t){return{instance:n,listener:e,currentTarget:t}}function VI(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=c$(n,t),o!=null&&r.unshift(v$(n,o,s)),o=c$(n,e),o!=null&&r.push(v$(n,o,s))),n=n.return}return r}function XT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function pU(n,e,t,r,s){for(var o=e._reactName,l=[];t!==null&&t!==r;){var u=t,h=u.alternate,f=u.stateNode;if(h!==null&&h===r)break;u.tag===5&&f!==null&&(u=f,s?(h=c$(t,o),h!=null&&l.unshift(v$(t,h,u))):s||(h=c$(t,o),h!=null&&l.push(v$(t,h,u)))),t=t.return}l.length!==0&&n.push({event:e,listeners:l})}var Gre=/\r\n?/g,Wre=/\u0000|\uFFFD/g;function mU(n){return(typeof n=="string"?n:""+n).replace(Gre,`
`).replace(Wre,"")}function iM(n,e,t){if(e=mU(e),mU(n)!==e&&t)throw Error(Cn(425))}function jI(){}var hD=null,dD=null;function fD(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pD=typeof setTimeout=="function"?setTimeout:void 0,Vre=typeof clearTimeout=="function"?clearTimeout:void 0,gU=typeof Promise=="function"?Promise:void 0,jre=typeof queueMicrotask=="function"?queueMicrotask:typeof gU<"u"?function(n){return gU.resolve(null).then(n).catch(Yre)}:pD;function Yre(n){setTimeout(function(){throw n})}function tO(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),f$(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);f$(e)}function Ny(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function vU(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var oE=Math.random().toString(36).slice(2),nv="__reactFiber$"+oE,_$="__reactProps$"+oE,T_="__reactContainer$"+oE,mD="__reactEvents$"+oE,Xre="__reactListeners$"+oE,Kre="__reactHandles$"+oE;function b1(n){var e=n[nv];if(e)return e;for(var t=n.parentNode;t;){if(e=t[T_]||t[nv]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=vU(n);n!==null;){if(t=n[nv])return t;n=vU(n)}return e}n=t,t=n.parentNode}return null}function _C(n){return n=n[nv]||n[T_],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function XS(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Cn(33))}function ZR(n){return n[_$]||null}var gD=[],KS=-1;function Qy(n){return{current:n}}function gu(n){0>KS||(n.current=gD[KS],gD[KS]=null,KS--)}function Yl(n,e){KS++,gD[KS]=n.current,n.current=e}var Wy={},Pf=Qy(Wy),Kp=Qy(!1),Y1=Wy;function Ew(n,e){var t=n.type.contextTypes;if(!t)return Wy;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in t)s[o]=e[o];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Jp(n){return n=n.childContextTypes,n!=null}function YI(){gu(Kp),gu(Pf)}function _U(n,e,t){if(Pf.current!==Wy)throw Error(Cn(168));Yl(Pf,e),Yl(Kp,t)}function bV(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Cn(108,One(n)||"Unknown",s));return hc({},t,r)}function XI(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Wy,Y1=Pf.current,Yl(Pf,n),Yl(Kp,Kp.current),!0}function yU(n,e,t){var r=n.stateNode;if(!r)throw Error(Cn(169));t?(n=bV(n,e,Y1),r.__reactInternalMemoizedMergedChildContext=n,gu(Kp),gu(Pf),Yl(Pf,n)):gu(Kp),Yl(Kp,t)}var u_=null,ek=!1,nO=!1;function TV(n){u_===null?u_=[n]:u_.push(n)}function Jre(n){ek=!0,TV(n)}function Zy(){if(!nO&&u_!==null){nO=!0;var n=0,e=Ra;try{var t=u_;for(Ra=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}u_=null,ek=!1}catch(s){throw u_!==null&&(u_=u_.slice(n+1)),j8(aF,Zy),s}finally{Ra=e,nO=!1}}return null}var JS=[],qS=0,KI=null,JI=0,vg=[],_g=0,X1=null,p_=1,m_="";function l1(n,e){JS[qS++]=JI,JS[qS++]=KI,KI=n,JI=e}function SV(n,e,t){vg[_g++]=p_,vg[_g++]=m_,vg[_g++]=X1,X1=n;var r=p_;n=m_;var s=32-a0(r)-1;r&=~(1<<s),t+=1;var o=32-a0(e)+s;if(30<o){var l=s-s%5;o=(r&(1<<l)-1).toString(32),r>>=l,s-=l,p_=1<<32-a0(e)+s|t<<s|r,m_=o+n}else p_=1<<o|t<<s|r,m_=n}function gF(n){n.return!==null&&(l1(n,1),SV(n,1,0))}function vF(n){for(;n===KI;)KI=JS[--qS],JS[qS]=null,JI=JS[--qS],JS[qS]=null;for(;n===X1;)X1=vg[--_g],vg[_g]=null,m_=vg[--_g],vg[_g]=null,p_=vg[--_g],vg[_g]=null}var Lm=null,km=null,zu=!1,t0=null;function wV(n,e){var t=Tg(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function bU(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Lm=n,km=Ny(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Lm=n,km=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=X1!==null?{id:p_,overflow:m_}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Tg(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Lm=n,km=null,!0):!1;default:return!1}}function vD(n){return(n.mode&1)!==0&&(n.flags&128)===0}function _D(n){if(zu){var e=km;if(e){var t=e;if(!bU(n,e)){if(vD(n))throw Error(Cn(418));e=Ny(t.nextSibling);var r=Lm;e&&bU(n,e)?wV(r,t):(n.flags=n.flags&-4097|2,zu=!1,Lm=n)}}else{if(vD(n))throw Error(Cn(418));n.flags=n.flags&-4097|2,zu=!1,Lm=n}}}function TU(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Lm=n}function sM(n){if(n!==Lm)return!1;if(!zu)return TU(n),zu=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!fD(n.type,n.memoizedProps)),e&&(e=km)){if(vD(n))throw EV(),Error(Cn(418));for(;e;)wV(n,e),e=Ny(e.nextSibling)}if(TU(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Cn(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){km=Ny(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}km=null}}else km=Lm?Ny(n.stateNode.nextSibling):null;return!0}function EV(){for(var n=km;n;)n=Ny(n.nextSibling)}function xw(){km=Lm=null,zu=!1}function _F(n){t0===null?t0=[n]:t0.push(n)}var qre=A_.ReactCurrentBatchConfig;function Zg(n,e){if(n&&n.defaultProps){e=hc({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var qI=Qy(null),QI=null,QS=null,yF=null;function bF(){yF=QS=QI=null}function TF(n){var e=qI.current;gu(qI),n._currentValue=e}function yD(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function pw(n,e){QI=n,yF=QS=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Yp=!0),n.firstContext=null)}function xg(n){var e=n._currentValue;if(yF!==n)if(n={context:n,memoizedValue:e,next:null},QS===null){if(QI===null)throw Error(Cn(308));QS=n,QI.dependencies={lanes:0,firstContext:n}}else QS=QS.next=n;return e}var T1=null;function SF(n){T1===null?T1=[n]:T1.push(n)}function xV(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,SF(e)):(t.next=s.next,s.next=t),e.interleaved=t,S_(n,r)}function S_(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ty=!1;function wF(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $V(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function v_(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Dy(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Co&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,S_(n,t)}return s=r.interleaved,s===null?(e.next=e,SF(r)):(e.next=s.next,s.next=e),r.interleaved=e,S_(n,t)}function tI(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,lF(n,t)}}function SU(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?s=o=l:o=o.next=l,t=t.next}while(t!==null);o===null?s=o=e:o=o.next=e}else s=o=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function ZI(n,e,t,r){var s=n.updateQueue;Ty=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var h=u,f=h.next;h.next=null,l===null?o=f:l.next=f,l=h;var g=n.alternate;g!==null&&(g=g.updateQueue,u=g.lastBaseUpdate,u!==l&&(u===null?g.firstBaseUpdate=f:u.next=f,g.lastBaseUpdate=h))}if(o!==null){var y=s.baseState;l=0,g=f=h=null,u=o;do{var b=u.lane,S=u.eventTime;if((r&b)===b){g!==null&&(g=g.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var C=n,M=u;switch(b=e,S=t,M.tag){case 1:if(C=M.payload,typeof C=="function"){y=C.call(S,y,b);break e}y=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=M.payload,b=typeof C=="function"?C.call(S,y,b):C,b==null)break e;y=hc({},y,b);break e;case 2:Ty=!0}}u.callback!==null&&u.lane!==0&&(n.flags|=64,b=s.effects,b===null?s.effects=[u]:b.push(u))}else S={eventTime:S,lane:b,tag:u.tag,payload:u.payload,callback:u.callback,next:null},g===null?(f=g=S,h=y):g=g.next=S,l|=b;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;b=u,u=b.next,b.next=null,s.lastBaseUpdate=b,s.shared.pending=null}}while(!0);if(g===null&&(h=y),s.baseState=h,s.firstBaseUpdate=f,s.lastBaseUpdate=g,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);J1|=l,n.lanes=l,n.memoizedState=y}}function wU(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(Cn(191,s));s.call(r)}}}var CV=new x8.Component().refs;function bD(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:hc({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var tk={isMounted:function(n){return(n=n._reactInternals)?aT(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=fp(),s=By(n),o=v_(r,s);o.payload=e,t!=null&&(o.callback=t),e=Dy(n,o,s),e!==null&&(l0(e,n,s,r),tI(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=fp(),s=By(n),o=v_(r,s);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=Dy(n,o,s),e!==null&&(l0(e,n,s,r),tI(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=fp(),r=By(n),s=v_(t,r);s.tag=2,e!=null&&(s.callback=e),e=Dy(n,s,r),e!==null&&(l0(e,n,r,t),tI(e,n,r))}};function EU(n,e,t,r,s,o,l){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,o,l):e.prototype&&e.prototype.isPureReactComponent?!m$(t,r)||!m$(s,o):!0}function MV(n,e,t){var r=!1,s=Wy,o=e.contextType;return typeof o=="object"&&o!==null?o=xg(o):(s=Jp(e)?Y1:Pf.current,r=e.contextTypes,o=(r=r!=null)?Ew(n,s):Wy),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tk,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function xU(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&tk.enqueueReplaceState(e,e.state,null)}function TD(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs=CV,wF(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=xg(o):(o=Jp(e)?Y1:Pf.current,s.context=Ew(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(bD(n,e,o,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&tk.enqueueReplaceState(s,s.state,null),ZI(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function WE(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Cn(309));var r=t.stateNode}if(!r)throw Error(Cn(147,n));var s=r,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var u=s.refs;u===CV&&(u=s.refs={}),l===null?delete u[o]:u[o]=l},e._stringRef=o,e)}if(typeof n!="string")throw Error(Cn(284));if(!t._owner)throw Error(Cn(290,n))}return n}function oM(n,e){throw n=Object.prototype.toString.call(e),Error(Cn(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function $U(n){var e=n._init;return e(n._payload)}function AV(n){function e(k,O){if(n){var P=k.deletions;P===null?(k.deletions=[O],k.flags|=16):P.push(O)}}function t(k,O){if(!n)return null;for(;O!==null;)e(k,O),O=O.sibling;return null}function r(k,O){for(k=new Map;O!==null;)O.key!==null?k.set(O.key,O):k.set(O.index,O),O=O.sibling;return k}function s(k,O){return k=Fy(k,O),k.index=0,k.sibling=null,k}function o(k,O,P){return k.index=P,n?(P=k.alternate,P!==null?(P=P.index,P<O?(k.flags|=2,O):P):(k.flags|=2,O)):(k.flags|=1048576,O)}function l(k){return n&&k.alternate===null&&(k.flags|=2),k}function u(k,O,P,D){return O===null||O.tag!==6?(O=uO(P,k.mode,D),O.return=k,O):(O=s(O,P),O.return=k,O)}function h(k,O,P,D){var U=P.type;return U===WS?g(k,O,P.props.children,D,P.key):O!==null&&(O.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===by&&$U(U)===O.type)?(D=s(O,P.props),D.ref=WE(k,O,P),D.return=k,D):(D=aI(P.type,P.key,P.props,null,k.mode,D),D.ref=WE(k,O,P),D.return=k,D)}function f(k,O,P,D){return O===null||O.tag!==4||O.stateNode.containerInfo!==P.containerInfo||O.stateNode.implementation!==P.implementation?(O=cO(P,k.mode,D),O.return=k,O):(O=s(O,P.children||[]),O.return=k,O)}function g(k,O,P,D,U){return O===null||O.tag!==7?(O=L1(P,k.mode,D,U),O.return=k,O):(O=s(O,P),O.return=k,O)}function y(k,O,P){if(typeof O=="string"&&O!==""||typeof O=="number")return O=uO(""+O,k.mode,P),O.return=k,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case KC:return P=aI(O.type,O.key,O.props,null,k.mode,P),P.ref=WE(k,null,O),P.return=k,P;case GS:return O=cO(O,k.mode,P),O.return=k,O;case by:var D=O._init;return y(k,D(O._payload),P)}if(Mx(O)||FE(O))return O=L1(O,k.mode,P,null),O.return=k,O;oM(k,O)}return null}function b(k,O,P,D){var U=O!==null?O.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return U!==null?null:u(k,O,""+P,D);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case KC:return P.key===U?h(k,O,P,D):null;case GS:return P.key===U?f(k,O,P,D):null;case by:return U=P._init,b(k,O,U(P._payload),D)}if(Mx(P)||FE(P))return U!==null?null:g(k,O,P,D,null);oM(k,P)}return null}function S(k,O,P,D,U){if(typeof D=="string"&&D!==""||typeof D=="number")return k=k.get(P)||null,u(O,k,""+D,U);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case KC:return k=k.get(D.key===null?P:D.key)||null,h(O,k,D,U);case GS:return k=k.get(D.key===null?P:D.key)||null,f(O,k,D,U);case by:var H=D._init;return S(k,O,P,H(D._payload),U)}if(Mx(D)||FE(D))return k=k.get(P)||null,g(O,k,D,U,null);oM(O,D)}return null}function C(k,O,P,D){for(var U=null,H=null,V=O,z=O=0,Z=null;V!==null&&z<P.length;z++){V.index>z?(Z=V,V=null):Z=V.sibling;var oe=b(k,V,P[z],D);if(oe===null){V===null&&(V=Z);break}n&&V&&oe.alternate===null&&e(k,V),O=o(oe,O,z),H===null?U=oe:H.sibling=oe,H=oe,V=Z}if(z===P.length)return t(k,V),zu&&l1(k,z),U;if(V===null){for(;z<P.length;z++)V=y(k,P[z],D),V!==null&&(O=o(V,O,z),H===null?U=V:H.sibling=V,H=V);return zu&&l1(k,z),U}for(V=r(k,V);z<P.length;z++)Z=S(V,k,z,P[z],D),Z!==null&&(n&&Z.alternate!==null&&V.delete(Z.key===null?z:Z.key),O=o(Z,O,z),H===null?U=Z:H.sibling=Z,H=Z);return n&&V.forEach(function(ue){return e(k,ue)}),zu&&l1(k,z),U}function M(k,O,P,D){var U=FE(P);if(typeof U!="function")throw Error(Cn(150));if(P=U.call(P),P==null)throw Error(Cn(151));for(var H=U=null,V=O,z=O=0,Z=null,oe=P.next();V!==null&&!oe.done;z++,oe=P.next()){V.index>z?(Z=V,V=null):Z=V.sibling;var ue=b(k,V,oe.value,D);if(ue===null){V===null&&(V=Z);break}n&&V&&ue.alternate===null&&e(k,V),O=o(ue,O,z),H===null?U=ue:H.sibling=ue,H=ue,V=Z}if(oe.done)return t(k,V),zu&&l1(k,z),U;if(V===null){for(;!oe.done;z++,oe=P.next())oe=y(k,oe.value,D),oe!==null&&(O=o(oe,O,z),H===null?U=oe:H.sibling=oe,H=oe);return zu&&l1(k,z),U}for(V=r(k,V);!oe.done;z++,oe=P.next())oe=S(V,k,z,oe.value,D),oe!==null&&(n&&oe.alternate!==null&&V.delete(oe.key===null?z:oe.key),O=o(oe,O,z),H===null?U=oe:H.sibling=oe,H=oe);return n&&V.forEach(function(q){return e(k,q)}),zu&&l1(k,z),U}function A(k,O,P,D){if(typeof P=="object"&&P!==null&&P.type===WS&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case KC:e:{for(var U=P.key,H=O;H!==null;){if(H.key===U){if(U=P.type,U===WS){if(H.tag===7){t(k,H.sibling),O=s(H,P.props.children),O.return=k,k=O;break e}}else if(H.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===by&&$U(U)===H.type){t(k,H.sibling),O=s(H,P.props),O.ref=WE(k,H,P),O.return=k,k=O;break e}t(k,H);break}else e(k,H);H=H.sibling}P.type===WS?(O=L1(P.props.children,k.mode,D,P.key),O.return=k,k=O):(D=aI(P.type,P.key,P.props,null,k.mode,D),D.ref=WE(k,O,P),D.return=k,k=D)}return l(k);case GS:e:{for(H=P.key;O!==null;){if(O.key===H)if(O.tag===4&&O.stateNode.containerInfo===P.containerInfo&&O.stateNode.implementation===P.implementation){t(k,O.sibling),O=s(O,P.children||[]),O.return=k,k=O;break e}else{t(k,O);break}else e(k,O);O=O.sibling}O=cO(P,k.mode,D),O.return=k,k=O}return l(k);case by:return H=P._init,A(k,O,H(P._payload),D)}if(Mx(P))return C(k,O,P,D);if(FE(P))return M(k,O,P,D);oM(k,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,O!==null&&O.tag===6?(t(k,O.sibling),O=s(O,P),O.return=k,k=O):(t(k,O),O=uO(P,k.mode,D),O.return=k,k=O),l(k)):t(k,O)}return A}var $w=AV(!0),IV=AV(!1),yC={},cv=Qy(yC),y$=Qy(yC),b$=Qy(yC);function S1(n){if(n===yC)throw Error(Cn(174));return n}function EF(n,e){switch(Yl(b$,e),Yl(y$,n),Yl(cv,yC),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ZN(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=ZN(e,n)}gu(cv),Yl(cv,e)}function Cw(){gu(cv),gu(y$),gu(b$)}function RV(n){S1(b$.current);var e=S1(cv.current),t=ZN(e,n.type);e!==t&&(Yl(y$,n),Yl(cv,t))}function xF(n){y$.current===n&&(gu(cv),gu(y$))}var oc=Qy(0);function eR(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rO=[];function $F(){for(var n=0;n<rO.length;n++)rO[n]._workInProgressVersionPrimary=null;rO.length=0}var nI=A_.ReactCurrentDispatcher,iO=A_.ReactCurrentBatchConfig,K1=0,uc=null,ld=null,wd=null,tR=!1,jx=!1,T$=0,Qre=0;function wf(){throw Error(Cn(321))}function CF(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!h0(n[t],e[t]))return!1;return!0}function MF(n,e,t,r,s,o){if(K1=o,uc=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nI.current=n===null||n.memoizedState===null?nie:rie,n=t(r,s),jx){o=0;do{if(jx=!1,T$=0,25<=o)throw Error(Cn(301));o+=1,wd=ld=null,e.updateQueue=null,nI.current=iie,n=t(r,s)}while(jx)}if(nI.current=nR,e=ld!==null&&ld.next!==null,K1=0,wd=ld=uc=null,tR=!1,e)throw Error(Cn(300));return n}function AF(){var n=T$!==0;return T$=0,n}function q0(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wd===null?uc.memoizedState=wd=n:wd=wd.next=n,wd}function $g(){if(ld===null){var n=uc.alternate;n=n!==null?n.memoizedState:null}else n=ld.next;var e=wd===null?uc.memoizedState:wd.next;if(e!==null)wd=e,ld=n;else{if(n===null)throw Error(Cn(310));ld=n,n={memoizedState:ld.memoizedState,baseState:ld.baseState,baseQueue:ld.baseQueue,queue:ld.queue,next:null},wd===null?uc.memoizedState=wd=n:wd=wd.next=n}return wd}function S$(n,e){return typeof e=="function"?e(n):e}function sO(n){var e=$g(),t=e.queue;if(t===null)throw Error(Cn(311));t.lastRenderedReducer=n;var r=ld,s=r.baseQueue,o=t.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}r.baseQueue=s=o,t.pending=null}if(s!==null){o=s.next,r=r.baseState;var u=l=null,h=null,f=o;do{var g=f.lane;if((K1&g)===g)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:n(r,f.action);else{var y={lane:g,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=y,l=r):h=h.next=y,uc.lanes|=g,J1|=g}f=f.next}while(f!==null&&f!==o);h===null?l=r:h.next=u,h0(r,e.memoizedState)||(Yp=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=h,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do o=s.lane,uc.lanes|=o,J1|=o,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function oO(n){var e=$g(),t=e.queue;if(t===null)throw Error(Cn(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,o=e.memoizedState;if(s!==null){t.pending=null;var l=s=s.next;do o=n(o,l.action),l=l.next;while(l!==s);h0(o,e.memoizedState)||(Yp=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,r]}function kV(){}function OV(n,e){var t=uc,r=$g(),s=e(),o=!h0(r.memoizedState,s);if(o&&(r.memoizedState=s,Yp=!0),r=r.queue,IF(DV.bind(null,t,r,n),[n]),r.getSnapshot!==e||o||wd!==null&&wd.memoizedState.tag&1){if(t.flags|=2048,w$(9,NV.bind(null,t,r,s,e),void 0,null),Ed===null)throw Error(Cn(349));K1&30||LV(t,e,s)}return s}function LV(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=uc.updateQueue,e===null?(e={lastEffect:null,stores:null},uc.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function NV(n,e,t,r){e.value=t,e.getSnapshot=r,PV(e)&&BV(n)}function DV(n,e,t){return t(function(){PV(e)&&BV(n)})}function PV(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!h0(n,t)}catch{return!0}}function BV(n){var e=S_(n,1);e!==null&&l0(e,n,1,-1)}function CU(n){var e=q0();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:S$,lastRenderedState:n},e.queue=n,n=n.dispatch=tie.bind(null,uc,n),[e.memoizedState,n]}function w$(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=uc.updateQueue,e===null?(e={lastEffect:null,stores:null},uc.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function FV(){return $g().memoizedState}function rI(n,e,t,r){var s=q0();uc.flags|=n,s.memoizedState=w$(1|e,t,void 0,r===void 0?null:r)}function nk(n,e,t,r){var s=$g();r=r===void 0?null:r;var o=void 0;if(ld!==null){var l=ld.memoizedState;if(o=l.destroy,r!==null&&CF(r,l.deps)){s.memoizedState=w$(e,t,o,r);return}}uc.flags|=n,s.memoizedState=w$(1|e,t,o,r)}function MU(n,e){return rI(8390656,8,n,e)}function IF(n,e){return nk(2048,8,n,e)}function zV(n,e){return nk(4,2,n,e)}function UV(n,e){return nk(4,4,n,e)}function HV(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function GV(n,e,t){return t=t!=null?t.concat([n]):null,nk(4,4,HV.bind(null,e,n),t)}function RF(){}function WV(n,e){var t=$g();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&CF(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function VV(n,e){var t=$g();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&CF(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function jV(n,e,t){return K1&21?(h0(t,e)||(t=K8(),uc.lanes|=t,J1|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Yp=!0),n.memoizedState=t)}function Zre(n,e){var t=Ra;Ra=t!==0&&4>t?t:4,n(!0);var r=iO.transition;iO.transition={};try{n(!1),e()}finally{Ra=t,iO.transition=r}}function YV(){return $g().memoizedState}function eie(n,e,t){var r=By(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},XV(n))KV(e,t);else if(t=xV(n,e,t,r),t!==null){var s=fp();l0(t,n,r,s),JV(t,e,r)}}function tie(n,e,t){var r=By(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(XV(n))KV(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,u=o(l,t);if(s.hasEagerState=!0,s.eagerState=u,h0(u,l)){var h=e.interleaved;h===null?(s.next=s,SF(e)):(s.next=h.next,h.next=s),e.interleaved=s;return}}catch{}finally{}t=xV(n,e,s,r),t!==null&&(s=fp(),l0(t,n,r,s),JV(t,e,r))}}function XV(n){var e=n.alternate;return n===uc||e!==null&&e===uc}function KV(n,e){jx=tR=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function JV(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,lF(n,t)}}var nR={readContext:xg,useCallback:wf,useContext:wf,useEffect:wf,useImperativeHandle:wf,useInsertionEffect:wf,useLayoutEffect:wf,useMemo:wf,useReducer:wf,useRef:wf,useState:wf,useDebugValue:wf,useDeferredValue:wf,useTransition:wf,useMutableSource:wf,useSyncExternalStore:wf,useId:wf,unstable_isNewReconciler:!1},nie={readContext:xg,useCallback:function(n,e){return q0().memoizedState=[n,e===void 0?null:e],n},useContext:xg,useEffect:MU,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,rI(4194308,4,HV.bind(null,e,n),t)},useLayoutEffect:function(n,e){return rI(4194308,4,n,e)},useInsertionEffect:function(n,e){return rI(4,2,n,e)},useMemo:function(n,e){var t=q0();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=q0();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=eie.bind(null,uc,n),[r.memoizedState,n]},useRef:function(n){var e=q0();return n={current:n},e.memoizedState=n},useState:CU,useDebugValue:RF,useDeferredValue:function(n){return q0().memoizedState=n},useTransition:function(){var n=CU(!1),e=n[0];return n=Zre.bind(null,n[1]),q0().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=uc,s=q0();if(zu){if(t===void 0)throw Error(Cn(407));t=t()}else{if(t=e(),Ed===null)throw Error(Cn(349));K1&30||LV(r,e,t)}s.memoizedState=t;var o={value:t,getSnapshot:e};return s.queue=o,MU(DV.bind(null,r,o,n),[n]),r.flags|=2048,w$(9,NV.bind(null,r,o,t,e),void 0,null),t},useId:function(){var n=q0(),e=Ed.identifierPrefix;if(zu){var t=m_,r=p_;t=(r&~(1<<32-a0(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=T$++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Qre++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},rie={readContext:xg,useCallback:WV,useContext:xg,useEffect:IF,useImperativeHandle:GV,useInsertionEffect:zV,useLayoutEffect:UV,useMemo:VV,useReducer:sO,useRef:FV,useState:function(){return sO(S$)},useDebugValue:RF,useDeferredValue:function(n){var e=$g();return jV(e,ld.memoizedState,n)},useTransition:function(){var n=sO(S$)[0],e=$g().memoizedState;return[n,e]},useMutableSource:kV,useSyncExternalStore:OV,useId:YV,unstable_isNewReconciler:!1},iie={readContext:xg,useCallback:WV,useContext:xg,useEffect:IF,useImperativeHandle:GV,useInsertionEffect:zV,useLayoutEffect:UV,useMemo:VV,useReducer:oO,useRef:FV,useState:function(){return oO(S$)},useDebugValue:RF,useDeferredValue:function(n){var e=$g();return ld===null?e.memoizedState=n:jV(e,ld.memoizedState,n)},useTransition:function(){var n=oO(S$)[0],e=$g().memoizedState;return[n,e]},useMutableSource:kV,useSyncExternalStore:OV,useId:YV,unstable_isNewReconciler:!1};function Mw(n,e){try{var t="",r=e;do t+=kne(r),r=r.return;while(r);var s=t}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function aO(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function SD(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var sie=typeof WeakMap=="function"?WeakMap:Map;function qV(n,e,t){t=v_(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){iR||(iR=!0,kD=r),SD(n,e)},t}function QV(n,e,t){t=v_(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){SD(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){SD(n,e),typeof r!="function"&&(Py===null?Py=new Set([this]):Py.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),t}function AU(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new sie;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=yie.bind(null,n,e,t),e.then(n,n))}function IU(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function RU(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=v_(-1,1),e.tag=2,Dy(t,e,1))),t.lanes|=1),n)}var oie=A_.ReactCurrentOwner,Yp=!1;function sp(n,e,t,r){e.child=n===null?IV(e,null,t,r):$w(e,n.child,t,r)}function kU(n,e,t,r,s){t=t.render;var o=e.ref;return pw(e,s),r=MF(n,e,t,r,o,s),t=AF(),n!==null&&!Yp?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,w_(n,e,s)):(zu&&t&&gF(e),e.flags|=1,sp(n,e,r,s),e.child)}function OU(n,e,t,r,s){if(n===null){var o=t.type;return typeof o=="function"&&!FF(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,ZV(n,e,o,r,s)):(n=aI(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var l=o.memoizedProps;if(t=t.compare,t=t!==null?t:m$,t(l,r)&&n.ref===e.ref)return w_(n,e,s)}return e.flags|=1,n=Fy(o,r),n.ref=e.ref,n.return=e,e.child=n}function ZV(n,e,t,r,s){if(n!==null){var o=n.memoizedProps;if(m$(o,r)&&n.ref===e.ref)if(Yp=!1,e.pendingProps=r=o,(n.lanes&s)!==0)n.flags&131072&&(Yp=!0);else return e.lanes=n.lanes,w_(n,e,s)}return wD(n,e,t,r,s)}function ej(n,e,t){var r=e.pendingProps,s=r.children,o=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yl(ew,Am),Am|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Yl(ew,Am),Am|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:t,Yl(ew,Am),Am|=r}else o!==null?(r=o.baseLanes|t,e.memoizedState=null):r=t,Yl(ew,Am),Am|=r;return sp(n,e,s,t),e.child}function tj(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function wD(n,e,t,r,s){var o=Jp(t)?Y1:Pf.current;return o=Ew(e,o),pw(e,s),t=MF(n,e,t,r,o,s),r=AF(),n!==null&&!Yp?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,w_(n,e,s)):(zu&&r&&gF(e),e.flags|=1,sp(n,e,t,s),e.child)}function LU(n,e,t,r,s){if(Jp(t)){var o=!0;XI(e)}else o=!1;if(pw(e,s),e.stateNode===null)iI(n,e),MV(e,t,r),TD(e,t,r,s),r=!0;else if(n===null){var l=e.stateNode,u=e.memoizedProps;l.props=u;var h=l.context,f=t.contextType;typeof f=="object"&&f!==null?f=xg(f):(f=Jp(t)?Y1:Pf.current,f=Ew(e,f));var g=t.getDerivedStateFromProps,y=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==r||h!==f)&&xU(e,l,r,f),Ty=!1;var b=e.memoizedState;l.state=b,ZI(e,r,l,s),h=e.memoizedState,u!==r||b!==h||Kp.current||Ty?(typeof g=="function"&&(bD(e,t,g,r),h=e.memoizedState),(u=Ty||EU(e,t,u,r,b,h,f))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),l.props=r,l.state=h,l.context=f,r=u):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,$V(n,e),u=e.memoizedProps,f=e.type===e.elementType?u:Zg(e.type,u),l.props=f,y=e.pendingProps,b=l.context,h=t.contextType,typeof h=="object"&&h!==null?h=xg(h):(h=Jp(t)?Y1:Pf.current,h=Ew(e,h));var S=t.getDerivedStateFromProps;(g=typeof S=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==y||b!==h)&&xU(e,l,r,h),Ty=!1,b=e.memoizedState,l.state=b,ZI(e,r,l,s);var C=e.memoizedState;u!==y||b!==C||Kp.current||Ty?(typeof S=="function"&&(bD(e,t,S,r),C=e.memoizedState),(f=Ty||EU(e,t,f,r,b,C,h)||!1)?(g||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,C,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,C,h)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===n.memoizedProps&&b===n.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&b===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),l.props=r,l.state=C,l.context=h,r=f):(typeof l.componentDidUpdate!="function"||u===n.memoizedProps&&b===n.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&b===n.memoizedState||(e.flags|=1024),r=!1)}return ED(n,e,t,r,o,s)}function ED(n,e,t,r,s,o){tj(n,e);var l=(e.flags&128)!==0;if(!r&&!l)return s&&yU(e,t,!1),w_(n,e,o);r=e.stateNode,oie.current=e;var u=l&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&l?(e.child=$w(e,n.child,null,o),e.child=$w(e,null,u,o)):sp(n,e,u,o),e.memoizedState=r.state,s&&yU(e,t,!0),e.child}function nj(n){var e=n.stateNode;e.pendingContext?_U(n,e.pendingContext,e.pendingContext!==e.context):e.context&&_U(n,e.context,!1),EF(n,e.containerInfo)}function NU(n,e,t,r,s){return xw(),_F(s),e.flags|=256,sp(n,e,t,r),e.child}var xD={dehydrated:null,treeContext:null,retryLane:0};function $D(n){return{baseLanes:n,cachePool:null,transitions:null}}function rj(n,e,t){var r=e.pendingProps,s=oc.current,o=!1,l=(e.flags&128)!==0,u;if((u=l)||(u=n!==null&&n.memoizedState===null?!1:(s&2)!==0),u?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Yl(oc,s&1),n===null)return _D(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,n=r.fallback,o?(r=e.mode,o=e.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=sk(l,r,0,null),n=L1(n,r,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=$D(t),e.memoizedState=xD,n):kF(e,l));if(s=n.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return aie(n,e,l,r,u,s,t);if(o){o=r.fallback,l=e.mode,s=n.child,u=s.sibling;var h={mode:"hidden",children:r.children};return!(l&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=h,e.deletions=null):(r=Fy(s,h),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?o=Fy(u,o):(o=L1(o,l,t,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,l=n.child.memoizedState,l=l===null?$D(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=n.childLanes&~t,e.memoizedState=xD,r}return o=n.child,n=o.sibling,r=Fy(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function kF(n,e){return e=sk({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function aM(n,e,t,r){return r!==null&&_F(r),$w(e,n.child,null,t),n=kF(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function aie(n,e,t,r,s,o,l){if(t)return e.flags&256?(e.flags&=-257,r=aO(Error(Cn(422))),aM(n,e,l,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=sk({mode:"visible",children:r.children},s,0,null),o=L1(o,s,l,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&$w(e,n.child,null,l),e.child.memoizedState=$D(l),e.memoizedState=xD,o);if(!(e.mode&1))return aM(n,e,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(Cn(419)),r=aO(o,r,void 0),aM(n,e,l,r)}if(u=(l&n.childLanes)!==0,Yp||u){if(r=Ed,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,S_(n,s),l0(r,n,s,-1))}return BF(),r=aO(Error(Cn(421))),aM(n,e,l,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=bie.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,km=Ny(s.nextSibling),Lm=e,zu=!0,t0=null,n!==null&&(vg[_g++]=p_,vg[_g++]=m_,vg[_g++]=X1,p_=n.id,m_=n.overflow,X1=e),e=kF(e,r.children),e.flags|=4096,e)}function DU(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),yD(n.return,e,t)}function lO(n,e,t,r,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=s)}function ij(n,e,t){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(sp(n,e,r.children,t),r=oc.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&DU(n,t,e);else if(n.tag===19)DU(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Yl(oc,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&eR(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),lO(e,!1,s,t,o);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&eR(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}lO(e,!0,t,null,o);break;case"together":lO(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function iI(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function w_(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),J1|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Cn(153));if(e.child!==null){for(n=e.child,t=Fy(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Fy(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function lie(n,e,t){switch(e.tag){case 3:nj(e),xw();break;case 5:RV(e);break;case 1:Jp(e.type)&&XI(e);break;case 4:EF(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Yl(qI,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Yl(oc,oc.current&1),e.flags|=128,null):t&e.child.childLanes?rj(n,e,t):(Yl(oc,oc.current&1),n=w_(n,e,t),n!==null?n.sibling:null);Yl(oc,oc.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return ij(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Yl(oc,oc.current),r)break;return null;case 22:case 23:return e.lanes=0,ej(n,e,t)}return w_(n,e,t)}var sj,CD,oj,aj;sj=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};CD=function(){};oj=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,S1(cv.current);var o=null;switch(t){case"input":s=KN(n,s),r=KN(n,r),o=[];break;case"select":s=hc({},s,{value:void 0}),r=hc({},r,{value:void 0}),o=[];break;case"textarea":s=QN(n,s),r=QN(n,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=jI)}eD(t,r);var l;t=null;for(f in s)if(!r.hasOwnProperty(f)&&s.hasOwnProperty(f)&&s[f]!=null)if(f==="style"){var u=s[f];for(l in u)u.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l$.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var h=r[f];if(u=s!=null?s[f]:void 0,r.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(l in u)!u.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in h)h.hasOwnProperty(l)&&u[l]!==h[l]&&(t||(t={}),t[l]=h[l])}else t||(o||(o=[]),o.push(f,t)),t=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(l$.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&pu("scroll",n),o||u===h||(o=[])):(o=o||[]).push(f,h))}t&&(o=o||[]).push("style",t);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};aj=function(n,e,t,r){t!==r&&(e.flags|=4)};function VE(n,e){if(!zu)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Ef(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function uie(n,e,t){var r=e.pendingProps;switch(vF(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ef(e),null;case 1:return Jp(e.type)&&YI(),Ef(e),null;case 3:return r=e.stateNode,Cw(),gu(Kp),gu(Pf),$F(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(sM(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,t0!==null&&(ND(t0),t0=null))),CD(n,e),Ef(e),null;case 5:xF(e);var s=S1(b$.current);if(t=e.type,n!==null&&e.stateNode!=null)oj(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Cn(166));return Ef(e),null}if(n=S1(cv.current),sM(e)){r=e.stateNode,t=e.type;var o=e.memoizedProps;switch(r[nv]=e,r[_$]=o,n=(e.mode&1)!==0,t){case"dialog":pu("cancel",r),pu("close",r);break;case"iframe":case"object":case"embed":pu("load",r);break;case"video":case"audio":for(s=0;s<Ix.length;s++)pu(Ix[s],r);break;case"source":pu("error",r);break;case"img":case"image":case"link":pu("error",r),pu("load",r);break;case"details":pu("toggle",r);break;case"input":Vz(r,o),pu("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},pu("invalid",r);break;case"textarea":Yz(r,o),pu("invalid",r)}eD(t,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];l==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&iM(r.textContent,u,n),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&iM(r.textContent,u,n),s=["children",""+u]):l$.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&pu("scroll",r)}switch(t){case"input":JC(r),jz(r,o,!0);break;case"textarea":JC(r),Xz(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=jI)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=L8(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=l.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=l.createElement(t,{is:r.is}):(n=l.createElement(t),t==="select"&&(l=n,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):n=l.createElementNS(n,t),n[nv]=e,n[_$]=r,sj(n,e,!1,!1),e.stateNode=n;e:{switch(l=tD(t,r),t){case"dialog":pu("cancel",n),pu("close",n),s=r;break;case"iframe":case"object":case"embed":pu("load",n),s=r;break;case"video":case"audio":for(s=0;s<Ix.length;s++)pu(Ix[s],n);s=r;break;case"source":pu("error",n),s=r;break;case"img":case"image":case"link":pu("error",n),pu("load",n),s=r;break;case"details":pu("toggle",n),s=r;break;case"input":Vz(n,r),s=KN(n,r),pu("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=hc({},r,{value:void 0}),pu("invalid",n);break;case"textarea":Yz(n,r),s=QN(n,r),pu("invalid",n);break;default:s=r}eD(t,s),u=s;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?P8(n,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&N8(n,h)):o==="children"?typeof h=="string"?(t!=="textarea"||h!=="")&&u$(n,h):typeof h=="number"&&u$(n,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(l$.hasOwnProperty(o)?h!=null&&o==="onScroll"&&pu("scroll",n):h!=null&&nF(n,o,h,l))}switch(t){case"input":JC(n),jz(n,r,!1);break;case"textarea":JC(n),Xz(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Gy(r.value));break;case"select":n.multiple=!!r.multiple,o=r.value,o!=null?cw(n,!!r.multiple,o,!1):r.defaultValue!=null&&cw(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=jI)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ef(e),null;case 6:if(n&&e.stateNode!=null)aj(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Cn(166));if(t=S1(b$.current),S1(cv.current),sM(e)){if(r=e.stateNode,t=e.memoizedProps,r[nv]=e,(o=r.nodeValue!==t)&&(n=Lm,n!==null))switch(n.tag){case 3:iM(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&iM(r.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[nv]=e,e.stateNode=r}return Ef(e),null;case 13:if(gu(oc),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(zu&&km!==null&&e.mode&1&&!(e.flags&128))EV(),xw(),e.flags|=98560,o=!1;else if(o=sM(e),r!==null&&r.dehydrated!==null){if(n===null){if(!o)throw Error(Cn(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Cn(317));o[nv]=e}else xw(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ef(e),o=!1}else t0!==null&&(ND(t0),t0=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||oc.current&1?ud===0&&(ud=3):BF())),e.updateQueue!==null&&(e.flags|=4),Ef(e),null);case 4:return Cw(),CD(n,e),n===null&&g$(e.stateNode.containerInfo),Ef(e),null;case 10:return TF(e.type._context),Ef(e),null;case 17:return Jp(e.type)&&YI(),Ef(e),null;case 19:if(gu(oc),o=e.memoizedState,o===null)return Ef(e),null;if(r=(e.flags&128)!==0,l=o.rendering,l===null)if(r)VE(o,!1);else{if(ud!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(l=eR(n),l!==null){for(e.flags|=128,VE(o,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)o=t,n=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,n=l.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Yl(oc,oc.current&1|2),e.child}n=n.sibling}o.tail!==null&&hh()>Aw&&(e.flags|=128,r=!0,VE(o,!1),e.lanes=4194304)}else{if(!r)if(n=eR(l),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),VE(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!zu)return Ef(e),null}else 2*hh()-o.renderingStartTime>Aw&&t!==1073741824&&(e.flags|=128,r=!0,VE(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(t=o.last,t!==null?t.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=hh(),e.sibling=null,t=oc.current,Yl(oc,r?t&1|2:t&1),e):(Ef(e),null);case 22:case 23:return PF(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Am&1073741824&&(Ef(e),e.subtreeFlags&6&&(e.flags|=8192)):Ef(e),null;case 24:return null;case 25:return null}throw Error(Cn(156,e.tag))}function cie(n,e){switch(vF(e),e.tag){case 1:return Jp(e.type)&&YI(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Cw(),gu(Kp),gu(Pf),$F(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return xF(e),null;case 13:if(gu(oc),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Cn(340));xw()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return gu(oc),null;case 4:return Cw(),null;case 10:return TF(e.type._context),null;case 22:case 23:return PF(),null;case 24:return null;default:return null}}var lM=!1,Of=!1,hie=typeof WeakSet=="function"?WeakSet:Set,dr=null;function ZS(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Lc(n,e,r)}else t.current=null}function MD(n,e,t){try{t()}catch(r){Lc(n,e,r)}}var PU=!1;function die(n,e){if(hD=GI,n=hV(),mF(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var l=0,u=-1,h=-1,f=0,g=0,y=n,b=null;t:for(;;){for(var S;y!==t||s!==0&&y.nodeType!==3||(u=l+s),y!==o||r!==0&&y.nodeType!==3||(h=l+r),y.nodeType===3&&(l+=y.nodeValue.length),(S=y.firstChild)!==null;)b=y,y=S;for(;;){if(y===n)break t;if(b===t&&++f===s&&(u=l),b===o&&++g===r&&(h=l),(S=y.nextSibling)!==null)break;y=b,b=y.parentNode}y=S}t=u===-1||h===-1?null:{start:u,end:h}}else t=null}t=t||{start:0,end:0}}else t=null;for(dD={focusedElem:n,selectionRange:t},GI=!1,dr=e;dr!==null;)if(e=dr,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,dr=n;else for(;dr!==null;){e=dr;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var M=C.memoizedProps,A=C.memoizedState,k=e.stateNode,O=k.getSnapshotBeforeUpdate(e.elementType===e.type?M:Zg(e.type,M),A);k.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var P=e.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Cn(163))}}catch(D){Lc(e,e.return,D)}if(n=e.sibling,n!==null){n.return=e.return,dr=n;break}dr=e.return}return C=PU,PU=!1,C}function Yx(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&MD(e,t,o)}s=s.next}while(s!==r)}}function rk(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function AD(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function lj(n){var e=n.alternate;e!==null&&(n.alternate=null,lj(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[nv],delete e[_$],delete e[mD],delete e[Xre],delete e[Kre])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function uj(n){return n.tag===5||n.tag===3||n.tag===4}function BU(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||uj(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ID(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=jI));else if(r!==4&&(n=n.child,n!==null))for(ID(n,e,t),n=n.sibling;n!==null;)ID(n,e,t),n=n.sibling}function RD(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(RD(n,e,t),n=n.sibling;n!==null;)RD(n,e,t),n=n.sibling}var tf=null,e0=!1;function Q_(n,e,t){for(t=t.child;t!==null;)cj(n,e,t),t=t.sibling}function cj(n,e,t){if(uv&&typeof uv.onCommitFiberUnmount=="function")try{uv.onCommitFiberUnmount(KR,t)}catch{}switch(t.tag){case 5:Of||ZS(t,e);case 6:var r=tf,s=e0;tf=null,Q_(n,e,t),tf=r,e0=s,tf!==null&&(e0?(n=tf,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):tf.removeChild(t.stateNode));break;case 18:tf!==null&&(e0?(n=tf,t=t.stateNode,n.nodeType===8?tO(n.parentNode,t):n.nodeType===1&&tO(n,t),f$(n)):tO(tf,t.stateNode));break;case 4:r=tf,s=e0,tf=t.stateNode.containerInfo,e0=!0,Q_(n,e,t),tf=r,e0=s;break;case 0:case 11:case 14:case 15:if(!Of&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&MD(t,e,l),s=s.next}while(s!==r)}Q_(n,e,t);break;case 1:if(!Of&&(ZS(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(u){Lc(t,e,u)}Q_(n,e,t);break;case 21:Q_(n,e,t);break;case 22:t.mode&1?(Of=(r=Of)||t.memoizedState!==null,Q_(n,e,t),Of=r):Q_(n,e,t);break;default:Q_(n,e,t)}}function FU(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new hie),e.forEach(function(r){var s=Tie.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function Wg(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var o=n,l=e,u=l;e:for(;u!==null;){switch(u.tag){case 5:tf=u.stateNode,e0=!1;break e;case 3:tf=u.stateNode.containerInfo,e0=!0;break e;case 4:tf=u.stateNode.containerInfo,e0=!0;break e}u=u.return}if(tf===null)throw Error(Cn(160));cj(o,l,s),tf=null,e0=!1;var h=s.alternate;h!==null&&(h.return=null),s.return=null}catch(f){Lc(s,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hj(e,n),e=e.sibling}function hj(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Wg(e,n),j0(n),r&4){try{Yx(3,n,n.return),rk(3,n)}catch(M){Lc(n,n.return,M)}try{Yx(5,n,n.return)}catch(M){Lc(n,n.return,M)}}break;case 1:Wg(e,n),j0(n),r&512&&t!==null&&ZS(t,t.return);break;case 5:if(Wg(e,n),j0(n),r&512&&t!==null&&ZS(t,t.return),n.flags&32){var s=n.stateNode;try{u$(s,"")}catch(M){Lc(n,n.return,M)}}if(r&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,l=t!==null?t.memoizedProps:o,u=n.type,h=n.updateQueue;if(n.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&k8(s,o),tD(u,l);var f=tD(u,o);for(l=0;l<h.length;l+=2){var g=h[l],y=h[l+1];g==="style"?P8(s,y):g==="dangerouslySetInnerHTML"?N8(s,y):g==="children"?u$(s,y):nF(s,g,y,f)}switch(u){case"input":JN(s,o);break;case"textarea":O8(s,o);break;case"select":var b=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?cw(s,!!o.multiple,S,!1):b!==!!o.multiple&&(o.defaultValue!=null?cw(s,!!o.multiple,o.defaultValue,!0):cw(s,!!o.multiple,o.multiple?[]:"",!1))}s[_$]=o}catch(M){Lc(n,n.return,M)}}break;case 6:if(Wg(e,n),j0(n),r&4){if(n.stateNode===null)throw Error(Cn(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(M){Lc(n,n.return,M)}}break;case 3:if(Wg(e,n),j0(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{f$(e.containerInfo)}catch(M){Lc(n,n.return,M)}break;case 4:Wg(e,n),j0(n);break;case 13:Wg(e,n),j0(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(NF=hh())),r&4&&FU(n);break;case 22:if(g=t!==null&&t.memoizedState!==null,n.mode&1?(Of=(f=Of)||g,Wg(e,n),Of=f):Wg(e,n),j0(n),r&8192){if(f=n.memoizedState!==null,(n.stateNode.isHidden=f)&&!g&&n.mode&1)for(dr=n,g=n.child;g!==null;){for(y=dr=g;dr!==null;){switch(b=dr,S=b.child,b.tag){case 0:case 11:case 14:case 15:Yx(4,b,b.return);break;case 1:ZS(b,b.return);var C=b.stateNode;if(typeof C.componentWillUnmount=="function"){r=b,t=b.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(M){Lc(r,t,M)}}break;case 5:ZS(b,b.return);break;case 22:if(b.memoizedState!==null){UU(y);continue}}S!==null?(S.return=b,dr=S):UU(y)}g=g.sibling}e:for(g=null,y=n;;){if(y.tag===5){if(g===null){g=y;try{s=y.stateNode,f?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=y.stateNode,h=y.memoizedProps.style,l=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=D8("display",l))}catch(M){Lc(n,n.return,M)}}}else if(y.tag===6){if(g===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(M){Lc(n,n.return,M)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===n)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;g===y&&(g=null),y=y.return}g===y&&(g=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Wg(e,n),j0(n),r&4&&FU(n);break;case 21:break;default:Wg(e,n),j0(n)}}function j0(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(uj(t)){var r=t;break e}t=t.return}throw Error(Cn(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(u$(s,""),r.flags&=-33);var o=BU(n);RD(n,o,s);break;case 3:case 4:var l=r.stateNode.containerInfo,u=BU(n);ID(n,u,l);break;default:throw Error(Cn(161))}}catch(h){Lc(n,n.return,h)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function fie(n,e,t){dr=n,dj(n)}function dj(n,e,t){for(var r=(n.mode&1)!==0;dr!==null;){var s=dr,o=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||lM;if(!l){var u=s.alternate,h=u!==null&&u.memoizedState!==null||Of;u=lM;var f=Of;if(lM=l,(Of=h)&&!f)for(dr=s;dr!==null;)l=dr,h=l.child,l.tag===22&&l.memoizedState!==null?HU(s):h!==null?(h.return=l,dr=h):HU(s);for(;o!==null;)dr=o,dj(o),o=o.sibling;dr=s,lM=u,Of=f}zU(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,dr=o):zU(n)}}function zU(n){for(;dr!==null;){var e=dr;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Of||rk(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Of)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Zg(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&wU(e,o,r);break;case 3:var l=e.updateQueue;if(l!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}wU(e,l,t)}break;case 5:var u=e.stateNode;if(t===null&&e.flags&4){t=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&t.focus();break;case"img":h.src&&(t.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var g=f.memoizedState;if(g!==null){var y=g.dehydrated;y!==null&&f$(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Cn(163))}Of||e.flags&512&&AD(e)}catch(b){Lc(e,e.return,b)}}if(e===n){dr=null;break}if(t=e.sibling,t!==null){t.return=e.return,dr=t;break}dr=e.return}}function UU(n){for(;dr!==null;){var e=dr;if(e===n){dr=null;break}var t=e.sibling;if(t!==null){t.return=e.return,dr=t;break}dr=e.return}}function HU(n){for(;dr!==null;){var e=dr;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{rk(4,e)}catch(h){Lc(e,t,h)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(h){Lc(e,s,h)}}var o=e.return;try{AD(e)}catch(h){Lc(e,o,h)}break;case 5:var l=e.return;try{AD(e)}catch(h){Lc(e,l,h)}}}catch(h){Lc(e,e.return,h)}if(e===n){dr=null;break}var u=e.sibling;if(u!==null){u.return=e.return,dr=u;break}dr=e.return}}var pie=Math.ceil,rR=A_.ReactCurrentDispatcher,OF=A_.ReactCurrentOwner,wg=A_.ReactCurrentBatchConfig,Co=0,Ed=null,Dh=null,sf=0,Am=0,ew=Qy(0),ud=0,E$=null,J1=0,ik=0,LF=0,Xx=null,Vp=null,NF=0,Aw=1/0,l_=null,iR=!1,kD=null,Py=null,uM=!1,Cy=null,sR=0,Kx=0,OD=null,sI=-1,oI=0;function fp(){return Co&6?hh():sI!==-1?sI:sI=hh()}function By(n){return n.mode&1?Co&2&&sf!==0?sf&-sf:qre.transition!==null?(oI===0&&(oI=K8()),oI):(n=Ra,n!==0||(n=window.event,n=n===void 0?16:nV(n.type)),n):1}function l0(n,e,t,r){if(50<Kx)throw Kx=0,OD=null,Error(Cn(185));gC(n,t,r),(!(Co&2)||n!==Ed)&&(n===Ed&&(!(Co&2)&&(ik|=t),ud===4&&xy(n,sf)),qp(n,r),t===1&&Co===0&&!(e.mode&1)&&(Aw=hh()+500,ek&&Zy()))}function qp(n,e){var t=n.callbackNode;qne(n,e);var r=HI(n,n===Ed?sf:0);if(r===0)t!==null&&qz(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&qz(t),e===1)n.tag===0?Jre(GU.bind(null,n)):TV(GU.bind(null,n)),jre(function(){!(Co&6)&&Zy()}),t=null;else{switch(J8(r)){case 1:t=aF;break;case 4:t=Y8;break;case 16:t=UI;break;case 536870912:t=X8;break;default:t=UI}t=bj(t,fj.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function fj(n,e){if(sI=-1,oI=0,Co&6)throw Error(Cn(327));var t=n.callbackNode;if(mw()&&n.callbackNode!==t)return null;var r=HI(n,n===Ed?sf:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=oR(n,r);else{e=r;var s=Co;Co|=2;var o=mj();(Ed!==n||sf!==e)&&(l_=null,Aw=hh()+500,O1(n,e));do try{vie();break}catch(u){pj(n,u)}while(!0);bF(),rR.current=o,Co=s,Dh!==null?e=0:(Ed=null,sf=0,e=ud)}if(e!==0){if(e===2&&(s=oD(n),s!==0&&(r=s,e=LD(n,s))),e===1)throw t=E$,O1(n,0),xy(n,r),qp(n,hh()),t;if(e===6)xy(n,r);else{if(s=n.current.alternate,!(r&30)&&!mie(s)&&(e=oR(n,r),e===2&&(o=oD(n),o!==0&&(r=o,e=LD(n,o))),e===1))throw t=E$,O1(n,0),xy(n,r),qp(n,hh()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(Cn(345));case 2:u1(n,Vp,l_);break;case 3:if(xy(n,r),(r&130023424)===r&&(e=NF+500-hh(),10<e)){if(HI(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){fp(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=pD(u1.bind(null,n,Vp,l_),e);break}u1(n,Vp,l_);break;case 4:if(xy(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var l=31-a0(r);o=1<<l,l=e[l],l>s&&(s=l),r&=~o}if(r=s,r=hh()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pie(r/1960))-r,10<r){n.timeoutHandle=pD(u1.bind(null,n,Vp,l_),r);break}u1(n,Vp,l_);break;case 5:u1(n,Vp,l_);break;default:throw Error(Cn(329))}}}return qp(n,hh()),n.callbackNode===t?fj.bind(null,n):null}function LD(n,e){var t=Xx;return n.current.memoizedState.isDehydrated&&(O1(n,e).flags|=256),n=oR(n,e),n!==2&&(e=Vp,Vp=t,e!==null&&ND(e)),n}function ND(n){Vp===null?Vp=n:Vp.push.apply(Vp,n)}function mie(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],o=s.getSnapshot;s=s.value;try{if(!h0(o(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xy(n,e){for(e&=~LF,e&=~ik,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-a0(e),r=1<<t;n[t]=-1,e&=~r}}function GU(n){if(Co&6)throw Error(Cn(327));mw();var e=HI(n,0);if(!(e&1))return qp(n,hh()),null;var t=oR(n,e);if(n.tag!==0&&t===2){var r=oD(n);r!==0&&(e=r,t=LD(n,r))}if(t===1)throw t=E$,O1(n,0),xy(n,e),qp(n,hh()),t;if(t===6)throw Error(Cn(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,u1(n,Vp,l_),qp(n,hh()),null}function DF(n,e){var t=Co;Co|=1;try{return n(e)}finally{Co=t,Co===0&&(Aw=hh()+500,ek&&Zy())}}function q1(n){Cy!==null&&Cy.tag===0&&!(Co&6)&&mw();var e=Co;Co|=1;var t=wg.transition,r=Ra;try{if(wg.transition=null,Ra=1,n)return n()}finally{Ra=r,wg.transition=t,Co=e,!(Co&6)&&Zy()}}function PF(){Am=ew.current,gu(ew)}function O1(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Vre(t)),Dh!==null)for(t=Dh.return;t!==null;){var r=t;switch(vF(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&YI();break;case 3:Cw(),gu(Kp),gu(Pf),$F();break;case 5:xF(r);break;case 4:Cw();break;case 13:gu(oc);break;case 19:gu(oc);break;case 10:TF(r.type._context);break;case 22:case 23:PF()}t=t.return}if(Ed=n,Dh=n=Fy(n.current,null),sf=Am=e,ud=0,E$=null,LF=ik=J1=0,Vp=Xx=null,T1!==null){for(e=0;e<T1.length;e++)if(t=T1[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,o=t.pending;if(o!==null){var l=o.next;o.next=s,r.next=l}t.pending=r}T1=null}return n}function pj(n,e){do{var t=Dh;try{if(bF(),nI.current=nR,tR){for(var r=uc.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}tR=!1}if(K1=0,wd=ld=uc=null,jx=!1,T$=0,OF.current=null,t===null||t.return===null){ud=1,E$=e,Dh=null;break}e:{var o=n,l=t.return,u=t,h=e;if(e=sf,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,g=u,y=g.tag;if(!(g.mode&1)&&(y===0||y===11||y===15)){var b=g.alternate;b?(g.updateQueue=b.updateQueue,g.memoizedState=b.memoizedState,g.lanes=b.lanes):(g.updateQueue=null,g.memoizedState=null)}var S=IU(l);if(S!==null){S.flags&=-257,RU(S,l,u,o,e),S.mode&1&&AU(o,f,e),e=S,h=f;var C=e.updateQueue;if(C===null){var M=new Set;M.add(h),e.updateQueue=M}else C.add(h);break e}else{if(!(e&1)){AU(o,f,e),BF();break e}h=Error(Cn(426))}}else if(zu&&u.mode&1){var A=IU(l);if(A!==null){!(A.flags&65536)&&(A.flags|=256),RU(A,l,u,o,e),_F(Mw(h,u));break e}}o=h=Mw(h,u),ud!==4&&(ud=2),Xx===null?Xx=[o]:Xx.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var k=qV(o,h,e);SU(o,k);break e;case 1:u=h;var O=o.type,P=o.stateNode;if(!(o.flags&128)&&(typeof O.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Py===null||!Py.has(P)))){o.flags|=65536,e&=-e,o.lanes|=e;var D=QV(o,u,e);SU(o,D);break e}}o=o.return}while(o!==null)}vj(t)}catch(U){e=U,Dh===t&&t!==null&&(Dh=t=t.return);continue}break}while(!0)}function mj(){var n=rR.current;return rR.current=nR,n===null?nR:n}function BF(){(ud===0||ud===3||ud===2)&&(ud=4),Ed===null||!(J1&268435455)&&!(ik&268435455)||xy(Ed,sf)}function oR(n,e){var t=Co;Co|=2;var r=mj();(Ed!==n||sf!==e)&&(l_=null,O1(n,e));do try{gie();break}catch(s){pj(n,s)}while(!0);if(bF(),Co=t,rR.current=r,Dh!==null)throw Error(Cn(261));return Ed=null,sf=0,ud}function gie(){for(;Dh!==null;)gj(Dh)}function vie(){for(;Dh!==null&&!Hne();)gj(Dh)}function gj(n){var e=yj(n.alternate,n,Am);n.memoizedProps=n.pendingProps,e===null?vj(n):Dh=e,OF.current=null}function vj(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=cie(t,e),t!==null){t.flags&=32767,Dh=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ud=6,Dh=null;return}}else if(t=uie(t,e,Am),t!==null){Dh=t;return}if(e=e.sibling,e!==null){Dh=e;return}Dh=e=n}while(e!==null);ud===0&&(ud=5)}function u1(n,e,t){var r=Ra,s=wg.transition;try{wg.transition=null,Ra=1,_ie(n,e,t,r)}finally{wg.transition=s,Ra=r}return null}function _ie(n,e,t,r){do mw();while(Cy!==null);if(Co&6)throw Error(Cn(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Cn(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(Qne(n,o),n===Ed&&(Dh=Ed=null,sf=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||uM||(uM=!0,bj(UI,function(){return mw(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=wg.transition,wg.transition=null;var l=Ra;Ra=1;var u=Co;Co|=4,OF.current=null,die(n,t),hj(t,n),Bre(dD),GI=!!hD,dD=hD=null,n.current=t,fie(t),Gne(),Co=u,Ra=l,wg.transition=o}else n.current=t;if(uM&&(uM=!1,Cy=n,sR=s),o=n.pendingLanes,o===0&&(Py=null),jne(t.stateNode),qp(n,hh()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(iR)throw iR=!1,n=kD,kD=null,n;return sR&1&&n.tag!==0&&mw(),o=n.pendingLanes,o&1?n===OD?Kx++:(Kx=0,OD=n):Kx=0,Zy(),null}function mw(){if(Cy!==null){var n=J8(sR),e=wg.transition,t=Ra;try{if(wg.transition=null,Ra=16>n?16:n,Cy===null)var r=!1;else{if(n=Cy,Cy=null,sR=0,Co&6)throw Error(Cn(331));var s=Co;for(Co|=4,dr=n.current;dr!==null;){var o=dr,l=o.child;if(dr.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(dr=f;dr!==null;){var g=dr;switch(g.tag){case 0:case 11:case 15:Yx(8,g,o)}var y=g.child;if(y!==null)y.return=g,dr=y;else for(;dr!==null;){g=dr;var b=g.sibling,S=g.return;if(lj(g),g===f){dr=null;break}if(b!==null){b.return=S,dr=b;break}dr=S}}}var C=o.alternate;if(C!==null){var M=C.child;if(M!==null){C.child=null;do{var A=M.sibling;M.sibling=null,M=A}while(M!==null)}}dr=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,dr=l;else e:for(;dr!==null;){if(o=dr,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Yx(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,dr=k;break e}dr=o.return}}var O=n.current;for(dr=O;dr!==null;){l=dr;var P=l.child;if(l.subtreeFlags&2064&&P!==null)P.return=l,dr=P;else e:for(l=O;dr!==null;){if(u=dr,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:rk(9,u)}}catch(U){Lc(u,u.return,U)}if(u===l){dr=null;break e}var D=u.sibling;if(D!==null){D.return=u.return,dr=D;break e}dr=u.return}}if(Co=s,Zy(),uv&&typeof uv.onPostCommitFiberRoot=="function")try{uv.onPostCommitFiberRoot(KR,n)}catch{}r=!0}return r}finally{Ra=t,wg.transition=e}}return!1}function WU(n,e,t){e=Mw(t,e),e=qV(n,e,1),n=Dy(n,e,1),e=fp(),n!==null&&(gC(n,1,e),qp(n,e))}function Lc(n,e,t){if(n.tag===3)WU(n,n,t);else for(;e!==null;){if(e.tag===3){WU(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Py===null||!Py.has(r))){n=Mw(t,n),n=QV(e,n,1),e=Dy(e,n,1),n=fp(),e!==null&&(gC(e,1,n),qp(e,n));break}}e=e.return}}function yie(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=fp(),n.pingedLanes|=n.suspendedLanes&t,Ed===n&&(sf&t)===t&&(ud===4||ud===3&&(sf&130023424)===sf&&500>hh()-NF?O1(n,0):LF|=t),qp(n,e)}function _j(n,e){e===0&&(n.mode&1?(e=ZC,ZC<<=1,!(ZC&130023424)&&(ZC=4194304)):e=1);var t=fp();n=S_(n,e),n!==null&&(gC(n,e,t),qp(n,t))}function bie(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),_j(n,t)}function Tie(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Cn(314))}r!==null&&r.delete(e),_j(n,t)}var yj;yj=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Kp.current)Yp=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Yp=!1,lie(n,e,t);Yp=!!(n.flags&131072)}else Yp=!1,zu&&e.flags&1048576&&SV(e,JI,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;iI(n,e),n=e.pendingProps;var s=Ew(e,Pf.current);pw(e,t),s=MF(null,e,r,n,s,t);var o=AF();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jp(r)?(o=!0,XI(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wF(e),s.updater=tk,e.stateNode=s,s._reactInternals=e,TD(e,r,n,t),e=ED(null,e,r,!0,o,t)):(e.tag=0,zu&&o&&gF(e),sp(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(iI(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=wie(r),n=Zg(r,n),s){case 0:e=wD(null,e,r,n,t);break e;case 1:e=LU(null,e,r,n,t);break e;case 11:e=kU(null,e,r,n,t);break e;case 14:e=OU(null,e,r,Zg(r.type,n),t);break e}throw Error(Cn(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zg(r,s),wD(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zg(r,s),LU(n,e,r,s,t);case 3:e:{if(nj(e),n===null)throw Error(Cn(387));r=e.pendingProps,o=e.memoizedState,s=o.element,$V(n,e),ZI(e,r,null,t);var l=e.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Mw(Error(Cn(423)),e),e=NU(n,e,r,t,s);break e}else if(r!==s){s=Mw(Error(Cn(424)),e),e=NU(n,e,r,t,s);break e}else for(km=Ny(e.stateNode.containerInfo.firstChild),Lm=e,zu=!0,t0=null,t=IV(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(xw(),r===s){e=w_(n,e,t);break e}sp(n,e,r,t)}e=e.child}return e;case 5:return RV(e),n===null&&_D(e),r=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,l=s.children,fD(r,s)?l=null:o!==null&&fD(r,o)&&(e.flags|=32),tj(n,e),sp(n,e,l,t),e.child;case 6:return n===null&&_D(e),null;case 13:return rj(n,e,t);case 4:return EF(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=$w(e,null,r,t):sp(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zg(r,s),kU(n,e,r,s,t);case 7:return sp(n,e,e.pendingProps,t),e.child;case 8:return sp(n,e,e.pendingProps.children,t),e.child;case 12:return sp(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,Yl(qI,r._currentValue),r._currentValue=l,o!==null)if(h0(o.value,l)){if(o.children===s.children&&!Kp.current){e=w_(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){l=o.child;for(var h=u.firstContext;h!==null;){if(h.context===r){if(o.tag===1){h=v_(-1,t&-t),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var g=f.pending;g===null?h.next=h:(h.next=g.next,g.next=h),f.pending=h}}o.lanes|=t,h=o.alternate,h!==null&&(h.lanes|=t),yD(o.return,t,e),u.lanes|=t;break}h=h.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Cn(341));l.lanes|=t,u=l.alternate,u!==null&&(u.lanes|=t),yD(l,t,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}sp(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,pw(e,t),s=xg(s),r=r(s),e.flags|=1,sp(n,e,r,t),e.child;case 14:return r=e.type,s=Zg(r,e.pendingProps),s=Zg(r.type,s),OU(n,e,r,s,t);case 15:return ZV(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zg(r,s),iI(n,e),e.tag=1,Jp(r)?(n=!0,XI(e)):n=!1,pw(e,t),MV(e,r,s),TD(e,r,s,t),ED(null,e,r,!0,n,t);case 19:return ij(n,e,t);case 22:return ej(n,e,t)}throw Error(Cn(156,e.tag))};function bj(n,e){return j8(n,e)}function Sie(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tg(n,e,t,r){return new Sie(n,e,t,r)}function FF(n){return n=n.prototype,!(!n||!n.isReactComponent)}function wie(n){if(typeof n=="function")return FF(n)?1:0;if(n!=null){if(n=n.$$typeof,n===iF)return 11;if(n===sF)return 14}return 2}function Fy(n,e){var t=n.alternate;return t===null?(t=Tg(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function aI(n,e,t,r,s,o){var l=2;if(r=n,typeof n=="function")FF(n)&&(l=1);else if(typeof n=="string")l=5;else e:switch(n){case WS:return L1(t.children,s,o,e);case rF:l=8,s|=8;break;case VN:return n=Tg(12,t,e,s|2),n.elementType=VN,n.lanes=o,n;case jN:return n=Tg(13,t,e,s),n.elementType=jN,n.lanes=o,n;case YN:return n=Tg(19,t,e,s),n.elementType=YN,n.lanes=o,n;case A8:return sk(t,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case C8:l=10;break e;case M8:l=9;break e;case iF:l=11;break e;case sF:l=14;break e;case by:l=16,r=null;break e}throw Error(Cn(130,n==null?n:typeof n,""))}return e=Tg(l,t,e,s),e.elementType=n,e.type=r,e.lanes=o,e}function L1(n,e,t,r){return n=Tg(7,n,r,e),n.lanes=t,n}function sk(n,e,t,r){return n=Tg(22,n,r,e),n.elementType=A8,n.lanes=t,n.stateNode={isHidden:!1},n}function uO(n,e,t){return n=Tg(6,n,null,e),n.lanes=t,n}function cO(n,e,t){return e=Tg(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Eie(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=W2(0),this.expirationTimes=W2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=W2(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zF(n,e,t,r,s,o,l,u,h){return n=new Eie(n,e,t,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Tg(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},wF(o),n}function xie(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:GS,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function Tj(n){if(!n)return Wy;n=n._reactInternals;e:{if(aT(n)!==n||n.tag!==1)throw Error(Cn(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jp(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Cn(171))}if(n.tag===1){var t=n.type;if(Jp(t))return bV(n,t,e)}return e}function Sj(n,e,t,r,s,o,l,u,h){return n=zF(t,r,!0,n,s,o,l,u,h),n.context=Tj(null),t=n.current,r=fp(),s=By(t),o=v_(r,s),o.callback=e??null,Dy(t,o,s),n.current.lanes=s,gC(n,s,r),qp(n,r),n}function ok(n,e,t,r){var s=e.current,o=fp(),l=By(s);return t=Tj(t),e.context===null?e.context=t:e.pendingContext=t,e=v_(o,l),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Dy(s,e,l),n!==null&&(l0(n,s,l,o),tI(n,s,l)),l}function aR(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function VU(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function UF(n,e){VU(n,e),(n=n.alternate)&&VU(n,e)}function $ie(){return null}var wj=typeof reportError=="function"?reportError:function(n){console.error(n)};function HF(n){this._internalRoot=n}ak.prototype.render=HF.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Cn(409));ok(n,e,null,null)};ak.prototype.unmount=HF.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;q1(function(){ok(null,n,null,null)}),e[T_]=null}};function ak(n){this._internalRoot=n}ak.prototype.unstable_scheduleHydration=function(n){if(n){var e=Z8();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ey.length&&e!==0&&e<Ey[t].priority;t++);Ey.splice(t,0,n),t===0&&tV(n)}};function GF(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function lk(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function jU(){}function Cie(n,e,t,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var f=aR(l);o.call(f)}}var l=Sj(e,r,n,0,null,!1,!1,"",jU);return n._reactRootContainer=l,n[T_]=l.current,g$(n.nodeType===8?n.parentNode:n),q1(),l}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var f=aR(h);u.call(f)}}var h=zF(n,0,!1,null,null,!1,!1,"",jU);return n._reactRootContainer=h,n[T_]=h.current,g$(n.nodeType===8?n.parentNode:n),q1(function(){ok(e,h,t,r)}),h}function uk(n,e,t,r,s){var o=t._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var u=s;s=function(){var h=aR(l);u.call(h)}}ok(e,l,n,s)}else l=Cie(t,e,n,s,r);return aR(l)}q8=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Ax(e.pendingLanes);t!==0&&(lF(e,t|1),qp(e,hh()),!(Co&6)&&(Aw=hh()+500,Zy()))}break;case 13:q1(function(){var r=S_(n,1);if(r!==null){var s=fp();l0(r,n,1,s)}}),UF(n,1)}};uF=function(n){if(n.tag===13){var e=S_(n,134217728);if(e!==null){var t=fp();l0(e,n,134217728,t)}UF(n,134217728)}};Q8=function(n){if(n.tag===13){var e=By(n),t=S_(n,e);if(t!==null){var r=fp();l0(t,n,e,r)}UF(n,e)}};Z8=function(){return Ra};eV=function(n,e){var t=Ra;try{return Ra=n,e()}finally{Ra=t}};rD=function(n,e,t){switch(e){case"input":if(JN(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=ZR(r);if(!s)throw Error(Cn(90));R8(r),JN(r,s)}}}break;case"textarea":O8(n,t);break;case"select":e=t.value,e!=null&&cw(n,!!t.multiple,e,!1)}};z8=DF;U8=q1;var Mie={usingClientEntryPoint:!1,Events:[_C,XS,ZR,B8,F8,DF]},jE={findFiberByHostInstance:b1,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Aie={bundleType:jE.bundleType,version:jE.version,rendererPackageName:jE.rendererPackageName,rendererConfig:jE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A_.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=W8(n),n===null?null:n.stateNode},findFiberByHostInstance:jE.findFiberByHostInstance||$ie,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cM=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cM.isDisabled&&cM.supportsFiber)try{KR=cM.inject(Aie),uv=cM}catch{}}Gm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mie;Gm.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!GF(e))throw Error(Cn(200));return xie(n,e,null,t)};Gm.createRoot=function(n,e){if(!GF(n))throw Error(Cn(299));var t=!1,r="",s=wj;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=zF(n,1,!1,null,null,t,!1,r,s),n[T_]=e.current,g$(n.nodeType===8?n.parentNode:n),new HF(e)};Gm.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Cn(188)):(n=Object.keys(n).join(","),Error(Cn(268,n)));return n=W8(e),n=n===null?null:n.stateNode,n};Gm.flushSync=function(n){return q1(n)};Gm.hydrate=function(n,e,t){if(!lk(e))throw Error(Cn(200));return uk(null,n,e,!0,t)};Gm.hydrateRoot=function(n,e,t){if(!GF(n))throw Error(Cn(405));var r=t!=null&&t.hydratedSources||null,s=!1,o="",l=wj;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),e=Sj(e,null,n,1,t??null,s,!1,o,l),n[T_]=e.current,g$(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new ak(e)};Gm.render=function(n,e,t){if(!lk(e))throw Error(Cn(200));return uk(null,n,e,!1,t)};Gm.unmountComponentAtNode=function(n){if(!lk(n))throw Error(Cn(40));return n._reactRootContainer?(q1(function(){uk(null,null,n,!1,function(){n._reactRootContainer=null,n[T_]=null})}),!0):!1};Gm.unstable_batchedUpdates=DF;Gm.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!lk(t))throw Error(Cn(200));if(n==null||n._reactInternals===void 0)throw Error(Cn(38));return uk(n,e,t,!1,r)};Gm.version="18.2.0-next-9e3b772b8-20220608";function Ej(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ej)}catch(n){console.error(n)}}Ej(),S8.exports=Gm;var WF=S8.exports;const hM=Jy(WF);var YU=WF;GN.createRoot=YU.createRoot,GN.hydrateRoot=YU.hydrateRoot;var xj={exports:{}},hO={exports:{}},dO={exports:{}},fO={exports:{}},pO={exports:{}},XU;function VF(){return XU||(XU=1,function(n,e){(function(t,r){n.exports=r()})(jl,function(){var t={},r,s,o,l,u,h,f,g,y,b,S,C,M,A,k,O,P,D,U,H,V,z,Z,oe,ue,q,ae,le,ce,ge,$e,K,ie,se,fe,Se,Ue,ke,qe,we,Ze,et,ft,at,Ge,Ie,He,it,st,It,kt,vt,Mt,Ct,gt,Ee,re,Be,mt,yt,wt,Ke,Qe,Le,Q,te,me,Re,Fe,bt,ze,Pt,lt,Gt,Wt,bn,ar,cr,oi,Mr,_r,ne,Te,je,ct,Ht,nn,kn,De,_t,Ot,St,Xt,Wn,ir,br,Or,Ei,Lr,Ar,Ss,La,Mo,Xl,rn,Dr,tl,Na,zs,Us,Pi,Pr,In,Nr,jr,Sr,Bi,ws,fi,gs,nl,Da,fc,pc,qs,qo,Kl,vu,gh,Qo,Tr,$i,Pc,vh,Bc,xl,_u,$l,Cl,wr,Er,Jl,rl,il,yu,Qi,vs,sl,Cd,lo,Uu,ca,bu,lr,Gn,Es,uo,Hu,Tu,_h,Pa,ha,Gu,$r,Rs,bi,Ci,da,ti,Su,Ao,wu,ol,Fi,Mi,Vn,Ai,Jr,dd,Eu,ji,Ba,yh,pr,Zo,fd,lf,Fc,uf,Ff,wp,Md,ql,ks,Wu,bh,Fa,ci,Cr,co,za,Uo,Ql,Zl,Fh,Yr,Ii,xr,Yi,fa,xu,cf,hf,pd,Vu,al,zc,zh,ju,eu,Hs,tu,Uh,Uc,Hc,is,Hr,Ml,Ua,nu,$u,Th,Ad,pi,ye,Xe,Pe,Nt,sn,Rn,Jn,_n,Gr,ho,Ti,fo,ll,zi,_s,Cu,qn,pa,Qs,Gs,Ha,Hh,Sh,mc,ea,Gc,Gh,Ga,Wh,gc,Yu,md,ta,po,Al,Vh,Ui,gd,Xu,ru,Wc,Id,Il,Rd,jh,ni,Ri,Ep,zf,Rl,iu,Ku,Ju,wh,ul,na,kl,Vc,Ol,jc,vc,kd,Wa,Xr,cl,Zi,ma,X,xs,ga,Ir,mn,Uf,hl,ki,hi,es,ss,Yc,va,_a,os,Xc,ra,Od,Ld,Yh,Ws,Kn,Vs,Zs,Hi,su,Ho,$n,mi,gi,Hf,Eh,mo,ya,Mn,yn,dl,_c,xp,ou,Io,ys,fl,as,pl,Go,Xh,Va,Oi,Nd,Kc,Kh,Wo,Ro,df,Mu,Ll,vd,yc,qr,au,qu,ls,ja,$s,Cs,Jc,vi,Ya,bc,ff,xh,ia,Xi,Pn,nr,zr,ri,Zr,ko,us,ts,lu,Qu,Tc,Zu,eo,go,_d,ba,Au,Iu,vo,_o,Nl,Vo,ec,tc,$h,Ch,Br,bs,Os,Xa,js,fn,qc,En;r=function(i,a,p,w){if(!(i instanceof Ut)&&typeof i!="string"||`${i}`.trim()==="")throw Error('Invalid type "'+i+'". The type must be a non-empty string or a Blockly.registry.Type.');if(i=`${i}`.toLowerCase(),typeof a!="string"||a.trim()==="")throw Error('Invalid name "'+a+'". The name must be a non-empty string.');const L=a.toLowerCase();if(!p)throw Error("Can not register a null value");let j=_i[i],_e=uu[i];if(j||(j=_i[i]=Object.create(null),_e=uu[i]=Object.create(null)),s(i,p),!w&&j[L])throw Error('Name "'+L+'" with type "'+i+'" already registered.');j[L]=p,_e[L]=a},s=function(i,a){switch(i){case String(Ut.FIELD):if(typeof a.fromJson!="function")throw Error('Type "'+i+'" must have a fromJson function')}},o=function(i,a){i=`${i}`.toLowerCase(),a=a.toLowerCase();const p=_i[i];p&&p[a]?(delete _i[i][a],delete uu[i][a]):console.warn("Unable to unregister ["+a+"]["+i+"] from the registry.")},l=function(i,a,p){i=`${i}`.toLowerCase(),a=a.toLowerCase();const w=_i[i];if(!w||!w[a]){if(a="Unable to find ["+a+"]["+i+"] in the registry.",p)throw Error(a+" You must require or register a "+i+" plugin.");return console.warn(a),null}return w[a]},u=function(i,a){return i=`${i}`.toLowerCase(),a=a.toLowerCase(),(i=_i[i])?!!i[a]:!1},h=function(i,a,p){return l(i,a,p)},f=function(i,a,p){return l(i,a,p)},g=function(i,a,p){i=`${i}`.toLowerCase();var w=_i[i];if(!w){if(w=`Unable to find [${i}] in the registry.`,p)throw Error(`${w} You must require or register a ${i} plugin.`);return console.warn(w),null}if(!a)return w;i=uu[i],p=Object.create(null);for(const L of Object.keys(w))p[i[L]]=w[L];return p},y=function(i,a,p){return a=a.plugins[String(i)]||Dl,typeof a=="function"?a:h(i,a,p)},b=function(i){return nc[i]||null},S=function(){const i=[];for(const a in nc)i.push(nc[a]);return i},C=function(i){nc[i.id]=i},M=function(i){delete nc[i.id]},A=function(){return Jh},k=function(i){Jh=i},O=function(){return Qc},P=function(i){Qc=i},D=function(){return ai},U=function(i){ai=i},H=function(i){for(;i.options.parentWorkspace;)i=i.options.parentWorkspace;const a=i.getParentSvg(),p=i.getCachedParentSvgSize();var w=a.parentElement;if(w instanceof HTMLElement){var L=w.offsetWidth;w=w.offsetHeight,p.width!==L&&(a.setAttribute("width",L+"px"),i.setCachedParentSvgSize(L,null)),p.height!==w&&(a.setAttribute("height",w+"px"),i.setCachedParentSvgSize(null,w)),i.resize()}},V=function(i,a){const p=Object.create(null),w=i.getDescendants(!0);a&&(i=i.getNextBlock())&&(i=w.indexOf(i),w.splice(i,w.length-i));for(let L=0,j;j=w[L];L++)p[j.type]?p[j.type]++:p[j.type]=1;return p},z=function(i){return function(){this.jsonInit(i)}},Z=function(i){Zc.defineBlocksWithJsonArrayInternal(i)},oe=function(i){t.defineBlocks$$module$build$src$core$common(t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(i))},t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(i){const a={};for(let p=0;p<i.length;p++){const w=i[p];if(!w){console.warn(`Block definition #${p} in JSON array is ${w}. Skipping`);continue}const L=w.type;L?a[L]={init:z(w)}:console.warn(`Block definition #${p} in JSON array is missing a type attribute. Skipping.`)}return a},t.defineBlocks$$module$build$src$core$common=function(i){for(const a of Object.keys(i)){const p=i[a];a in Kr&&console.warn(`Block definiton "${a}" overwrites previous definition.`),Kr[a]=p}},ue=function(){return"blockly-"+(Sc++).toString(36)},q=function(){return eh.genUid()},ae=function(i){to=i},le=function(){return to},ce=function(i){Gf.fireInternal(i)},ge=function(i){if(se()){if(!Ec.length)try{requestAnimationFrame(()=>{setTimeout($e,0)})}catch{setTimeout($e,0)}Ec.push(i)}},$e=function(){var i=K(Ec,!0);Ec.length=0;for(let p=0,w;w=i[p];p++)if(w.workspaceId){var a=b(w.workspaceId);a&&a.fireChangeListener(w)}i=new Set(i.map(p=>p.workspaceId));for(const p of i){if(!p||(i=b(p),!i))continue;i=i.getUndoStack();let w;for(a=i.length;0<a;a--){const L=i[a-1];if(L.group==="")break;if(w===void 0)w=L.group;else if(L.group!==w)break}w&&a!=i.length-1&&(a=i.splice(a,i.length-a),a=K(a,!0),i.push(...a))}},K=function(i,a){i=i.slice(),a||i.reverse();const p=[],w=Object.create(null);for(let _e=0,We;We=i[_e];_e++)if(!We.isNull()){var L=[We.isUiEvent?wc:We.type,We.blockId,We.workspaceId].join(" "),j=w[L];const Jt=j?j.event:null;j?We.type===t.MOVE$$module$build$src$core$events$utils&&j.index===_e-1?(L=We,Jt.newParentId=L.newParentId,Jt.newInputName=L.newInputName,Jt.newCoordinate=L.newCoordinate,L.reason&&(Jt.reason?(L=new Set(L.reason.concat(Jt.reason)),Jt.reason=Array.from(L)):Jt.reason=L.reason),j.index=_e):We.type===t.CHANGE$$module$build$src$core$events$utils&&We.element===Jt.element&&We.name===Jt.name?Jt.newValue=We.newValue:We.type===ii?(j=We,Jt.viewTop=j.viewTop,Jt.viewLeft=j.viewLeft,Jt.scale=j.scale,Jt.oldScale=j.oldScale):(We.type!==ic||Jt.type!==So)&&(w[L]={event:We,index:_e},p.push(We)):(w[L]={event:We,index:_e},p.push(We))}i=p.filter(function(_e){return!_e.isNull()}),a||i.reverse();for(let _e=1,We;We=i[_e];_e++)We.type===t.CHANGE$$module$build$src$core$events$utils&&We.element==="mutation"&&i.unshift(i.splice(_e,1)[0]);return i},ie=function(){for(let i=0,a;a=Ec[i];i++)a.recordUndo=!1},t.disable$$module$build$src$core$events$utils=function(){sa++},t.enable$$module$build$src$core$events$utils=function(){sa--},se=function(){return sa===0},t.getGroup$$module$build$src$core$events$utils=function(){return Oo},t.setGroup$$module$build$src$core$events$utils=function(i){Gf.setGroupInternal(i)},fe=function(i){Oo=typeof i=="boolean"?i?q():"":i},Se=function(i){const a=[];i=i.getDescendants(!1);for(let p=0,w;w=i[p];p++)a[p]=w.id;return a},Ue=function(i,a){const p=ke(i.type);if(!p)throw Error("Unknown event type.");return p.fromJson(i,a)},ke=function(i){const a=h(Ut.EVENT,i);if(!a)throw Error(`Event type ${i} not found in registry.`);return a},qe=function(i){if((i.type===t.MOVE$$module$build$src$core$events$utils||i.type===t.CREATE$$module$build$src$core$events$utils)&&i.workspaceId){var a=b(i.workspaceId);if(!i.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(i=a.getBlockById(i.blockId)){const p=to;try{to=!1;const w=i.getParent();if(w&&w.isEnabled()){const L=i.getDescendants(!1);for(let j=0,_e;_e=L[j];j++)_e.setEnabled(!0)}else if((i.outputConnection||i.previousConnection)&&!a.isDragging())do i.setEnabled(!1),i=i.getNextBlock();while(i)}finally{to=p}}}},we=function(i,a){Ze(),tt=setTimeout(function(){a&&a.handleRightClick(i)},B)},Ze=function(){tt&&(clearTimeout(tt),tt=0)},et=function(){pe=null},ft=function(i){return!i.type.startsWith("pointer")||i instanceof PointerEvent&&Ge(i)},at=function(i){return`${i.pointerId}`},Ge=function(i){const a=at(i);return pe?pe===a:i.type==="pointerdown"?(pe=a,!0):!1},Ie=function(i,a,p,w,L){function j(We){(L||ft(We))&&(p?w.call(p,We):w(We))}const _e=[];if(a in Oe)for(let We=0;We<Oe[a].length;We++){const Jt=Oe[a][We];i.addEventListener(Jt,j,!1),_e.push([i,Jt,j])}else i.addEventListener(a,j,!1),_e.push([i,a,j]);return _e},He=function(i,a,p,w){function L(_e){p?w.call(p,_e):w(_e)}const j=[];if(a in Oe)for(let _e=0;_e<Oe[a].length;_e++){const We=Oe[a][_e];i.addEventListener(We,L,!1),j.push([i,We,L])}else i.addEventListener(a,L,!1),j.push([i,a,L]);return j},it=function(i){const a=i[i.length-1][2];for(;i.length;){const[p,w,L]=i.pop();p.removeEventListener(w,L,!1)}return a},st=function(i){if(i.target instanceof HTMLElement){if(i.target.isContentEditable||i.target.getAttribute("data-is-text-input")==="true")return!0;if(i.target instanceof HTMLInputElement)return i=i.target,i.type==="text"||i.type==="number"||i.type==="email"||i.type==="password"||i.type==="search"||i.type==="tel"||i.type==="url";if(i.target instanceof HTMLTextAreaElement)return!0}return!1},It=function(i){return i.ctrlKey&&Rr?!0:i.button===2},kt=function(i,a,p){const w=a.createSVGPoint();return w.x=i.clientX,w.y=i.clientY,p||(p=a.getScreenCTM().inverse()),w.matrixTransform(p)},vt=function(i){switch(i.deltaMode){default:return{x:i.deltaX,y:i.deltaY};case 1:return{x:i.deltaX*Ah,y:i.deltaY*Ah};case 2:return{x:i.deltaX*ln,y:i.deltaY*ln}}},Mt=function(i,a){return a=i.indexOf(a),a===-1?!1:(i.splice(a,1),!0)},Ct=function(i){if(mf)throw Error("CSS already injected");Zh+=`
`+i},gt=function(i,a){mf||(mf=!0,i&&(i=a.replace(/[\\/]$/,""),a=Zh.replace(/<<<PATH>>>/g,i),Zh="",i=document.createElement("style"),i.id="blockly-common-style",a=document.createTextNode(a),i.appendChild(a),document.head.insertBefore(i,document.head.firstChild)))},Ee=function(i,a,p,w){i=i+" was deprecated in "+a+" and will be deleted in "+p+".",w&&(i+=`
Use `+w+" instead."),_0.has(i)||(_0.add(i),console.warn(i))},re=function(i,a,p){i=document.createElementNS(qm,`${i}`);for(const w in a)i.setAttribute(w,`${a[w]}`);return p&&p.appendChild(i),i},Be=function(i,a){return a=a.split(" "),a.every(p=>i.classList.contains(p))?!1:(i.classList.add(...a),!0)},mt=function(i,a){i.classList.remove(...a.split(" "))},yt=function(i,a){return a=a.split(" "),a.every(p=>!i.classList.contains(p))?!1:(i.classList.remove(...a),!0)},wt=function(i,a){return i.classList.contains(a)},Ke=function(i){return i&&i.parentNode?i.parentNode.removeChild(i):null},Qe=function(i,a){const p=a.nextSibling;if(a=a.parentNode,!a)throw Error("Reference node has no parent.");p?a.insertBefore(i,p):a.appendChild(i)},Le=function(i,a){return Ee("Blockly.utils.dom.containsNode","version 10","version 11",'Use native "contains" DOM method'),i.contains(a)},Q=function(i,a){i.style.transform=a,i.style["-webkit-transform"]=a},te=function(){Ja++,Dd||(Dd=Object.create(null))},me=function(){Ja--,Ja||(Dd=null)},Re=function(i){const a=i.textContent+`
`+i.className.baseVal;let p;if(Dd&&(p=Dd[a]))return p;try{p=i.getComputedTextLength()}catch{return 8*i.textContent.length}return Dd&&(Dd[a]=p),p},Fe=function(i,a,p,w){return bt(i,a+"pt",p,w)},bt=function(i,a,p,w){const L=i.textContent;i=L+`
`+i.className.baseVal;var j;return Dd&&(j=Dd[i])||(Wr||(j=document.createElement("canvas"),j.className="blocklyComputeCanvas",document.body.appendChild(j),Wr=j.getContext("2d")),Wr.font=p+" "+a+" "+w,j=L?Wr.measureText(L).width:0,Dd&&(Dd[i]=j)),j},ze=function(i,a,p,w){const L=document.createElement("span");L.style.font=p+" "+a+" "+w,L.textContent=i,i=document.createElement("div"),i.style.width="1px",i.style.height="0",a=document.createElement("div"),a.style.display="flex",a.style.position="fixed",a.style.top="0",a.style.left="0",a.appendChild(L),a.appendChild(i),document.body.appendChild(a),p={height:0,baseline:0};try{a.style.alignItems="baseline",p.baseline=i.offsetTop-L.offsetTop,a.style.alignItems="flex-end",p.height=i.offsetTop-L.offsetTop}finally{document.body.removeChild(a)}return p},Pt=function(i){return Cv.getSizeInternal(i)},lt=function(i){if(Wt(i,"display")!=="none")return Gt(i);const a=i.style,p=a.display,w=a.visibility,L=a.position;a.visibility="hidden",a.position="absolute",a.display="inline";const j=i.offsetWidth;return i=i.offsetHeight,a.display=p,a.position=L,a.visibility=w,new ro(j,i)},Gt=function(i){return new ro(i.offsetWidth,i.offsetHeight)},Wt=function(i,a){return i=window.getComputedStyle(i),i[a]||i.getPropertyValue(a)},bn=function(i){const a=new vn(0,0);i=i.getBoundingClientRect();var p=document.documentElement;return p=new vn(window.pageXOffset||p.scrollLeft,window.pageYOffset||p.scrollTop),a.x=i.left+p.x,a.y=i.top+p.y,a},ar=function(){const i=document.body,a=document.documentElement;return new vn(i.scrollLeft||a.scrollLeft,i.scrollTop||a.scrollTop)},cr=function(i){const a=parseFloat(Wt(i,"borderLeftWidth")),p=parseFloat(Wt(i,"borderRightWidth")),w=parseFloat(Wt(i,"borderTopWidth"));return i=parseFloat(Wt(i,"borderBottomWidth")),new Li(w,i,a,p)},oi=function(i,a,p){i=Mr(i,a,p),a.scrollLeft=i.x,a.scrollTop=i.y},Mr=function(i,a,p){var w=bn(i),L=bn(a),j=cr(a);const _e=w.x-L.x-j.left;return w=w.y-L.y-j.top,L=Gt(i),i=a.clientWidth-L.width,L=a.clientHeight-L.height,j=a.scrollLeft,a=a.scrollTop,p?(j+=_e-i/2,a+=w-L/2):(j+=Math.min(_e,Math.max(_e-i,0)),a+=Math.min(w,Math.max(w-L,0))),new vn(j,a)},_r=function(i){const a=new vn(0,0);var p=i.x&&i.getAttribute("x");const w=i.y&&i.getAttribute("y");return p&&(a.x=parseInt(p)),w&&(a.y=parseInt(w)),(p=(p=i.getAttribute("transform"))&&p.match($p))&&(a.x+=Number(p[1]),p[3]&&(a.y+=Number(p[3]))),(i=i.getAttribute("style"))&&-1<i.indexOf("translate")&&(i=i.match(nm))&&(a.x+=Number(i[1]),i[3]&&(a.y+=Number(i[3]))),a},ne=function(i){let a=0,p=0;for(;i;){const w=_r(i);if(a+=w.x,p+=w.y,(" "+(i.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;i=i.parentNode}return new vn(a,p)},Te=function(){const i=ar();return new Li(i.y,document.documentElement.clientHeight+i.y,i.x,document.documentElement.clientWidth+i.x)},je=function(){const i=document.documentElement,a=window;return new vn(a.pageXOffset||i.scrollLeft,a.pageYOffset||i.scrollTop)},ct=function(i,a){var p=a.x;a=a.y;const w=i.getInjectionDiv().getBoundingClientRect();return p=new vn(p-w.left,a-w.top),a=i.getOriginOffsetInPixels(),vn.difference(p,a).scale(1/i.scale)},Ht=function(i,a){var p=a.scale(i.scale);a=p.x,p=p.y;const w=i.getInjectionDiv().getBoundingClientRect();return i=i.getOriginOffsetInPixels(),new vn(a+w.left+i.x,p+w.top+i.y)},nn=function(i){({document:Mp=Mp,DOMParser:_l=_l,XMLSerializer:hu=hu}=i),kg=new _l,rm=new hu},t.createElement$$module$build$src$core$utils$xml=function(i){return Mp.createElementNS(Pd,i)},t.createTextNode$$module$build$src$core$utils$xml=function(i){return Mp.createTextNode(i)},t.textToDom$$module$build$src$core$utils$xml=function(i){let a=kg.parseFromString(i,"text/xml");if(a&&a.documentElement&&!a.getElementsByTagName("parsererror").length)return a.documentElement;if((a=kg.parseFromString(i,"text/html"))&&a.body.firstChild&&a.body.firstChild.nodeName.toLowerCase()==="xml")return a.body.firstChild;throw Error(`DOMParser was unable to parse: ${i}`)},kn=function(i){return De(rm.serializeToString(i))},De=function(i){return i.replace(gf,a=>`&#${a.charCodeAt(0)};`)},_t=function(i){return i?((i instanceof Element||typeof i=="string")&&(i=Lr(i),i=br(i)),Ot(i),i):null},Ot=function(i){const a=i.kind;if(i=i.contents,a&&a!==Og&&a!==rh)throw Error("Invalid toolbox kind "+a+". Please supply either "+Og+" or "+rh);if(!i)throw Error("Toolbox must have a contents attribute.")},St=function(i){return i?i.contents?i.contents:Array.isArray(i)&&0<i.length&&!i[0].nodeType?i:Or(i):[]},Xt=function(i){return y0.hasCategoriesInternal(i)},Wn=function(i){if(!i)return!1;const a=i.kind;return a?a===rh:!!i.contents.filter(function(p){return p.kind.toUpperCase()==="CATEGORY"}).length},ir=function(i){return i&&i.contents?!!i.contents.filter(function(a){return a.kind.toUpperCase()==="CATEGORY"}).length:!1},br=function(i){const a={contents:Or(i)};return i instanceof Node&&Ei(i,a),a},Or=function(i){const a=[];let p=i.childNodes;p||(p=i);for(let w=0,L;L=p[w];w++){if(!L.tagName)continue;i={};const j=L.tagName.toUpperCase();i.kind=j,j==="BLOCK"?i.blockxml=L:L.childNodes&&0<L.childNodes.length&&(i.contents=Or(L)),Ei(L,i),a.push(i)}return a},Ei=function(i,a){for(let p=0;p<i.attributes.length;p++){const w=i.attributes[p];-1<w.nodeName.indexOf("css-")?(a.cssconfig=a.cssconfig||{},a.cssconfig[w.nodeName.replace("css-","")]=w.value):a[w.nodeName]=w.value}},Lr=function(i){let a=null;if(i)if(typeof i=="string"){if(a=t.textToDom$$module$build$src$core$utils$xml(i),a.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else i instanceof Element&&(a=i);return a},Ar=function(i,a,p,w,L,j){const _e=j.scrollbar&&j.scrollbar.canScrollVertically();return i.horizontal===im.LEFT?(p=L.absoluteMetrics.left+p,_e&&j.RTL&&(p+=xa.scrollbarThickness)):(p=L.absoluteMetrics.left+L.viewMetrics.width-a.width-p,_e&&!j.RTL&&(p-=xa.scrollbarThickness)),i.vertical===qa.TOP?i=L.absoluteMetrics.top+w:(i=L.absoluteMetrics.top+L.viewMetrics.height-a.height-w,j.scrollbar&&j.scrollbar.canScrollHorizontally()&&(i-=xa.scrollbarThickness)),new Li(i,i+a.height,p,p+a.width)},Ss=function(i,a){return{horizontal:a.toolboxMetrics.position===mr.LEFT||i.horizontalLayout&&!i.RTL?im.RIGHT:im.LEFT,vertical:a.toolboxMetrics.position===mr.BOTTOM?qa.TOP:qa.BOTTOM}},La=function(i,a,p,w){const L=i.left,j=i.right-i.left,_e=i.bottom-i.top;for(let We=0;We<w.length;We++){const Jt=w[We];i.intersects(Jt)&&(i=p===Fd.UP?Jt.top-_e-a:Jt.bottom+a,i=new Li(i,i+_e,L,L+j),We=-1)}return i},Mo=function(i,a){ns(i,a)},Xl=function(i){ns=i},rn=function(i,a){Ou.confirmInternal(i,a)},Dr=function(i,a){du(i,a)},tl=function(i){du=i},Na=function(i,a,p){yl(i,a,p)},zs=function(i){yl=i},Us=function(i){return i.getVariableModel!==void 0},Pi=function(i){return i.getProcedureDef!==void 0},Pr=function(i){return i.getProcedureCall!==void 0&&i.renameProcedure!==void 0},t.allUsedVarModels$$module$build$src$core$variables=function(i){i=i.getAllBlocks(!1);const a=new Set;for(let p=0;p<i.length;p++){const w=i[p].getVarModels();if(w)for(let L=0;L<w.length;L++){const j=w[L];j.getId()&&a.add(j)}}return Array.from(a.values())},t.allDeveloperVariables$$module$build$src$core$variables=function(i){i=i.getAllBlocks(!1);const a=new Set;for(let w=0,L;L=i[w];w++){var p=L.getDeveloperVariables;if(p){p=p();for(let j=0;j<p.length;j++)a.add(p[j])}}return Array.from(a.values())},In=function(i){let a=[];const p=document.createElement("button");return p.setAttribute("text","%{BKY_NEW_VARIABLE}"),p.setAttribute("callbackKey","CREATE_VARIABLE"),i.registerButtonCallback("CREATE_VARIABLE",function(w){ws(w.getTargetWorkspace())}),a.push(p),i=Nr(i),a=a.concat(i)},Nr=function(i){i=i.getVariablesOfType("");const a=[];if(0<i.length){var p=i[i.length-1];if(Kr.variables_set){var w=t.createElement$$module$build$src$core$utils$xml("block");w.setAttribute("type","variables_set"),w.setAttribute("gap",Kr.math_change?"8":"24"),w.appendChild(qs(p)),a.push(w)}if(Kr.math_change&&(w=t.createElement$$module$build$src$core$utils$xml("block"),w.setAttribute("type","math_change"),w.setAttribute("gap",Kr.variables_get?"20":"8"),w.appendChild(qs(p)),p=t.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),w.appendChild(p),a.push(w)),Kr.variables_get){i.sort(vf.compareByName);for(let L=0,j;j=i[L];L++)p=t.createElement$$module$build$src$core$utils$xml("block"),p.setAttribute("type","variables_get"),p.setAttribute("gap","8"),p.appendChild(qs(j)),a.push(p)}}return a},jr=function(i){return ih.generateUniqueNameInternal(i)},Sr=function(i){return Bi(om.charAt(0),i.getAllVariableNames())},Bi=function(i,a){if(!a.length)return i;const p=om;let w="",L=p.indexOf(i);for(;;){let j=!1;for(let _e=0;_e<a.length;_e++)if(a[_e].toLowerCase()===i){j=!0;break}if(!j)break;L++,L===p.length&&(L=0,w=`${Number(w)+1}`),i=p.charAt(L)+w}return i},ws=function(i,a,p){function w(j){fi(t.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,j,function(_e){if(_e){var We=nl(_e,i);if(We){if(We.type===L)var Jt=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",We.name);else Jt=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,Jt=Jt.replace("%1",We.name).replace("%2",We.type);Mo(Jt,function(){w(_e)})}else i.createVariable(_e,L),a&&a(_e)}else a&&a(null)})}const L=p||"";w("")},t.renameVariable$$module$build$src$core$variables=function(i,a,p){function w(L){const j=t.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",a.name);fi(j,L,function(_e){if(_e){var We=gs(_e,a.type,i),Jt=Da(a.name,_e,i);if(We||Jt){var jn="";We?jn=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",We.name).replace("%2",We.type):Jt&&(jn=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",_e).replace("%2",Jt)),Mo(jn,function(){w(_e)})}else i.renameVariableById(a.getId(),_e),p&&p(_e)}else p&&p(null)})}w("")},fi=function(i,a,p){Na(i,a,function(w){w&&(w=w.replace(/[\s\xa0]+/g," ").trim(),w===t.Msg$$module$build$src$core$msg.RENAME_VARIABLE||w===t.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(w=null),p(w)})},gs=function(i,a,p){p=p.getVariableMap().getAllVariables(),i=i.toLowerCase();for(let w=0,L;L=p[w];w++)if(L.name.toLowerCase()===i&&L.type!==a)return L;return null},nl=function(i,a){a=a.getVariableMap().getAllVariables(),i=i.toLowerCase();for(let p=0,w;w=a[p];p++)if(w.name.toLowerCase()===i)return w;return null},Da=function(i,a,p){return p.getProcedureMap().getProcedures().length?fc(i,a,p):pc(i,a,p)},fc=function(i,a,p){i=i.toLowerCase(),a=a.toLowerCase(),p=p.getProcedureMap().getProcedures();for(const L of p){var w=L.getParameters().filter(Us).map(j=>j.getVariableModel().name);if(w&&(p=w.some(j=>j.toLowerCase()===i),w=w.some(j=>j.toLowerCase()===a),p&&w))return L.getName()}return null},pc=function(i,a,p){i=i.toLowerCase(),a=a.toLowerCase(),p=p.getAllBlocks(!1);for(const L of p){if(!Pi(L))continue;p=L.getProcedureDef();var w=p[1];const j=w.some(_e=>_e.toLowerCase()===i);if(w=w.some(_e=>_e.toLowerCase()===a),j&&w)return p[0]}return null},qs=function(i){const a=t.createElement$$module$build$src$core$utils$xml("field");return a.setAttribute("name","VAR"),a.setAttribute("id",i.getId()),a.setAttribute("variabletype",i.type),i=t.createTextNode$$module$build$src$core$utils$xml(i.name),a.appendChild(i),a},t.getOrCreateVariablePackage$$module$build$src$core$variables=function(i,a,p,w){let L=t.getVariable$$module$build$src$core$variables(i,a,p,w);return L||(L=qo(i,a,p,w)),L},t.getVariable$$module$build$src$core$variables=function(i,a,p,w){const L=i.getPotentialVariableMap();let j=null;if(a&&(j=i.getVariableById(a),!j&&L&&(j=L.getVariableById(a)),j))return j;if(p){if(w===void 0)throw Error("Tried to look up a variable by name without a type");j=i.getVariable(p,w),!j&&L&&(j=L.getVariable(p,w))}return j},qo=function(i,a,p,w){const L=i.getPotentialVariableMap();return p||(p=jr(i.isFlyout?i.targetWorkspace:i)),L?L.createVariable(p,w,a):i.createVariable(p,w,a)},Kl=function(i,a){i=i.getAllVariables();const p=[];if(a.length!==i.length)for(let w=0;w<i.length;w++){const L=i[w];a.indexOf(L)===-1&&p.push(L)}return p},vu=function(i,a){r(Ut.PASTER,i,a)},gh=function(i){o(Ut.PASTER,i)},Qo=function(i){return vh(i),Pc()?(Bc(),Promise.resolve()):(Gd||(Gd=new Promise(a=>{eg=a,Cc=window.requestAnimationFrame(()=>{Bc(),a()})})),Gd)},Tr=function(){return Gd||Promise.resolve()},$i=function(i){i||window.cancelAnimationFrame(Cc),Bc(i),!i&&eg&&eg()},Pc=function(){return on},vh=function(i){Ng.add(i);const a=i.getParent();a?vh(a):Ip.add(i)},Bc=function(i){const a=i?new Set([i]):new Set([...Ip].map(L=>L.workspace)),p=[...Ip].filter(_u).filter(L=>a.has(L.workspace));for(var w of p)$l(w);for(const L of a)L.resizeContents();for(const L of p)w=L.getRelativeToSurfaceXY(),L.updateComponentLocations(w);for(const L of p)xl(L);i||(Gd=null)},xl=function(i){Ip.delete(i),Ng.delete(i);for(const a of i.getChildren(!1))xl(a)},_u=function(i){return!i.isDisposed()&&!i.getParent()},$l=function(i){if(Ng.has(i)){for(const a of i.getChildren(!1))$l(a);i.renderEfficiently()}},Cl=function(i,a){const p=t.createElement$$module$build$src$core$utils$xml("xml");var w=wr(t.allUsedVarModels$$module$build$src$core$variables(i));w.hasChildNodes()&&p.appendChild(w),w=i.getTopComments(!0);for(let L=0;L<w.length;L++)p.appendChild(w[L].toXmlWithXY(a));for(i=i.getTopBlocks(!0),w=0;w<i.length;w++)p.appendChild(Er(i[w],a));return p},wr=function(i){const a=t.createElement$$module$build$src$core$utils$xml("variables");for(let p=0;p<i.length;p++){const w=i[p],L=t.createElement$$module$build$src$core$utils$xml("variable");L.appendChild(t.createTextNode$$module$build$src$core$utils$xml(w.name)),w.type&&L.setAttribute("type",w.type),L.id=w.getId(),a.appendChild(L)}return a},Er=function(i,a){if(i.isInsertionMarker()&&(i=i.getChildren(!1)[0],!i))return new DocumentFragment;let p=0;if(i.workspace.RTL&&(p=i.workspace.getWidth()),a=il(i,a),Gu(a)){const w=i.getRelativeToSurfaceXY();a.setAttribute("x",String(Math.round(i.workspace.RTL?p-w.x:w.x))),a.setAttribute("y",String(Math.round(w.y)))}return a},Jl=function(i){if(i.isSerializable()){const a=t.createElement$$module$build$src$core$utils$xml("field");return a.setAttribute("name",i.name||""),i.toXml(a)}return null},rl=function(i,a){for(let p=0;p<i.inputList.length;p++){const w=i.inputList[p];for(let L=0;L<w.fieldRow.length;L++){const j=Jl(w.fieldRow[L]);j&&a.appendChild(j)}}},il=function(i,a){if(i.isInsertionMarker())return(a=i.getChildren(!1)[0])?il(a):new DocumentFragment;const p=t.createElement$$module$build$src$core$utils$xml(i.isShadow()?"shadow":"block");if(p.setAttribute("type",i.type),a||(p.id=i.id),i.mutationToDom){var w=i.mutationToDom();w&&(w.hasChildNodes()||w.hasAttributes())&&p.appendChild(w)}if(rl(i,p),w=i.getCommentText()){var L=i.getIcon(Yo.COMMENT),j=L.getBubbleSize();L=L.bubbleIsVisible();var _e=t.createElement$$module$build$src$core$utils$xml("comment");_e.appendChild(t.createTextNode$$module$build$src$core$utils$xml(w)),_e.setAttribute("pinned",`${L}`),_e.setAttribute("h",String(j.height)),_e.setAttribute("w",String(j.width)),p.appendChild(_e)}for(i.data&&(w=t.createElement$$module$build$src$core$utils$xml("data"),w.appendChild(t.createTextNode$$module$build$src$core$utils$xml(i.data)),p.appendChild(w)),w=0;w<i.inputList.length;w++){j=i.inputList[w];var We=void 0;if(L=!0,j.type!==t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&j.type!==t.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){_e=j.connection.targetBlock(),j.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE?We=t.createElement$$module$build$src$core$utils$xml("value"):j.type===t.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(We=t.createElement$$module$build$src$core$utils$xml("statement"));const jn=j.connection.getShadowDom();!jn||_e&&_e.isShadow()||We.appendChild(yu(jn,a)),_e&&(_e=il(_e,a),_e.nodeType===Wf.ELEMENT_NODE&&(We.appendChild(_e),L=!1)),We.setAttribute("name",j.name),L||p.appendChild(We)}}i.inputsInline!==void 0&&i.inputsInline!==i.inputsInlineDefault&&p.setAttribute("inline",String(i.inputsInline)),i.isCollapsed()&&p.setAttribute("collapsed","true"),i.isEnabled()||p.setAttribute("disabled","true"),i.isDeletable()||i.isShadow()||p.setAttribute("deletable","false"),i.isMovable()||i.isShadow()||p.setAttribute("movable","false"),i.isEditable()||p.setAttribute("editable","false"),We=i.getNextBlock();let Jt;return We&&(w=il(We,a),w.nodeType===Wf.ELEMENT_NODE&&(Jt=t.createElement$$module$build$src$core$utils$xml("next"),Jt.appendChild(w),p.appendChild(Jt))),i=i.nextConnection&&i.nextConnection.getShadowDom(),!i||We&&We.isShadow()||Jt.appendChild(yu(i,a)),p},yu=function(i,a){let p=i=i.cloneNode(!0),w;for(;p;)if(a&&p.nodeName==="shadow"&&p.removeAttribute("id"),p.firstChild)p=p.firstChild;else{for(;p&&!p.nextSibling;){w=p,p=p.parentNode;let L;w.nodeType===Wf.TEXT_NODE&&w.data.trim()===""&&((L=p)==null?void 0:L.firstChild)!==w&&Ke(w)}p&&(w=p,p=p.nextSibling,w.nodeType===Wf.TEXT_NODE&&w.data.trim()===""&&Ke(w))}return i},Qi=function(i){return kn(i).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},vs=function(i){i=Qi(i).split("<");let a="";for(let p=1;p<i.length;p++){const w=i[p];w[0]==="/"&&(a=a.substring(2)),i[p]=a+"<"+w,w[0]!=="/"&&w.slice(-2)!=="/>"&&(a+="  ")}return i=i.join(`
`),i=i.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),i.replace(/^\n/,"")},sl=function(i,a){return a.setResizesEnabled(!1),a.clear(),i=t.domToWorkspace$$module$build$src$core$xml(i,a),a.setResizesEnabled(!0),i},t.domToWorkspace$$module$build$src$core$xml=function(i,a){let p=0;a.RTL&&(p=a.getWidth());const w=[];te();const L=t.getGroup$$module$build$src$core$events$utils();L||t.setGroup$$module$build$src$core$events$utils(!0),a.setResizesEnabled&&a.setResizesEnabled(!1);let j=!0;try{for(let _e=0,We;We=i.childNodes[_e];_e++){const Jt=We.nodeName.toLowerCase(),jn=We;if(Jt==="block"||Jt==="shadow"&&!le()){const Tl=lo(jn,a);w.push(Tl.id);let Za;const Up=parseInt((Za=jn.getAttribute("x"))!=null?Za:"10",10);let jT;const YT=parseInt((jT=jn.getAttribute("y"))!=null?jT:"10",10);isNaN(Up)||isNaN(YT)||Tl.moveBy(a.RTL?p-Up:Up,YT,["create"]),j=!1}else{if(Jt==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(Jt==="comment")a.rendered?Ul.fromXmlRendered(jn,a,p):sh.fromXml(jn,a);else if(Jt==="variables"){if(j)Uu(jn,a);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");j=!1}}}}finally{t.setGroup$$module$build$src$core$events$utils(L),a.setResizesEnabled&&a.setResizesEnabled(!0),a.rendered&&$i(),me()}return ce(new(ke(Sa))(a)),w},Cd=function(i,a){if(!a.getBlocksBoundingBox)return t.domToWorkspace$$module$build$src$core$xml(i,a);var p=a.getBlocksBoundingBox();if(i=t.domToWorkspace$$module$build$src$core$xml(i,a),p&&p.top!==p.bottom){var w=p.bottom;p=a.RTL?p.right:p.left;var L=1/0;let j=-1/0,_e=1/0;for(let We=0;We<i.length;We++){const Jt=a.getBlockById(i[We]).getRelativeToSurfaceXY();Jt.y<_e&&(_e=Jt.y),Jt.x<L&&(L=Jt.x),Jt.x>j&&(j=Jt.x)}for(w=w-_e+10,p=a.RTL?p-j:p-L,L=0;L<i.length;L++)a.getBlockById(i[L]).moveBy(p,w,["create"])}return i},t.domToBlock$$module$build$src$core$xml=function(i,a){return i=lo(i,a),a.rendered&&$i(),i},lo=function(i,a){t.disable$$module$build$src$core$events$utils();var p=a.getAllVariables();let w;try{if(w=_h(i,a),a.rendered){const L=w,j=w.getDescendants(!1);L.setConnectionTracking(!1);for(let _e=j.length-1;0<=_e;_e--)j[_e].initSvg();for(let _e=j.length-1;0<=_e;_e--)j[_e].queueRender();setTimeout(function(){L.disposed||L.setConnectionTracking(!0)},1),a.resizeContents()}else{const L=w.getDescendants(!1);for(let j=L.length-1;0<=j;j--)L[j].initModel()}}finally{t.enable$$module$build$src$core$events$utils()}if(se()){for(i=Kl(a,p),a=0;a<i.length;a++)p=i[a],ce(new(ke(bo))(p));ce(new(ke(t.CREATE$$module$build$src$core$events$utils))(w))}return w},Uu=function(i,a){for(let w=0;w<i.children.length;w++){var p=i.children[w];const L=p.getAttribute("type"),j=p.getAttribute("id");if(p=p.textContent,!p)break;a.createVariable(p,L,j)}},ca=function(i){const a={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let p=0;p<i.children.length;p++){const w=i.children[p];if(w.nodeType!==Wf.TEXT_NODE)switch(w.nodeName.toLowerCase()){case"mutation":a.mutation.push(w);break;case"comment":a.comment.push(w);break;case"data":a.data.push(w);break;case"title":case"field":a.field.push(w);break;case"value":case"statement":a.input.push(w);break;case"next":a.next.push(w);break;default:console.warn("Ignoring unknown tag: "+w.nodeName)}}return a},bu=function(i,a){let p=!1;for(let w=0;w<i.length;w++){const L=i[w];a.domToMutation&&(a.domToMutation(L),a.initSvg&&(p=!0))}return p},lr=function(i,a){for(let w=0;w<i.length;w++){var p=i[w];const L=p.textContent,j=p.getAttribute("pinned")==="true";let _e;const We=parseInt((_e=p.getAttribute("w"))!=null?_e:"50",10);let Jt;p=parseInt((Jt=p.getAttribute("h"))!=null?Jt:"50",10),a.setCommentText(L);const jn=a.getIcon(Yo.COMMENT);isNaN(We)||isNaN(p)||jn.setBubbleSize(new ro(We,p)),jn.setBubbleVisible(j),setTimeout(()=>jn.setBubbleVisible(j),1)}},Gn=function(i,a){for(let p=0;p<i.length;p++)a.data=i[p].textContent},Es=function(i,a){for(let p=0;p<i.length;p++){const w=i[p],L=w.getAttribute("name");L?Pa(a,L,w):console.warn(`Ignoring unnamed field in block ${a.type}`)}},uo=function(i){let a=null,p=null;for(let w=0;w<i.childNodes.length;w++){const L=i.childNodes[w];Gu(L)&&(L.nodeName.toLowerCase()==="block"?a=L:L.nodeName.toLowerCase()==="shadow"&&(p=L))}return{childBlockElement:a,childShadowElement:p}},Hu=function(i,a,p,w){for(let j=0;j<i.length;j++){var L=i[j];const _e=L.getAttribute("name"),We=_e?p.getInput(_e):null;if(!We){console.warn("Ignoring non-existent input "+_e+" in block "+w);break}if(L=uo(L),L.childBlockElement){if(!We.connection)throw TypeError("Input connection does not exist.");_h(L.childBlockElement,a,We.connection,!1)}if(L.childShadowElement){let Jt;(Jt=We.connection)==null||Jt.setShadowDom(L.childShadowElement)}}},Tu=function(i,a,p){for(let w=0;w<i.length;w++){const L=uo(i[w]);if(L.childBlockElement){if(!p.nextConnection)throw TypeError("Next statement does not exist.");if(p.nextConnection.isConnected())throw TypeError("Next statement is already connected.");_h(L.childBlockElement,a,p.nextConnection,!0)}L.childShadowElement&&p.nextConnection&&p.nextConnection.setShadowDom(L.childShadowElement)}},_h=function(i,a,p,w){var L;const j=i.getAttribute("type");if(!j)throw TypeError("Block type unspecified: "+i.outerHTML);var _e=(L=i.getAttribute("id"))!=null?L:void 0;L=a.newBlock(j,_e),_e=ca(i);const We=bu(_e.mutation,L);if(lr(_e.comment,L),Gn(_e.data,L),p)if(w)if(L.previousConnection)p.connect(L.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(L.outputConnection)p.connect(L.outputConnection);else if(L.previousConnection)p.connect(L.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(Es(_e.field,L),Hu(_e.input,a,L,j),Tu(_e.next,a,L),We&&L.initSvg(),(a=i.getAttribute("inline"))&&L.setInputsInline(a==="true"),(a=i.getAttribute("disabled"))&&L.setEnabled(a!=="true"&&a!=="disabled"),(a=i.getAttribute("deletable"))&&L.setDeletable(a==="true"),(a=i.getAttribute("movable"))&&L.setMovable(a==="true"),(a=i.getAttribute("editable"))&&L.setEditable(a==="true"),(a=i.getAttribute("collapsed"))&&L.setCollapsed(a==="true"),i.nodeName.toLowerCase()==="shadow"){for(i=L.getChildren(!1),a=0;a<i.length;a++)if(!i[a].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");L.setShadow(!0)}return L},Pa=function(i,a,p){const w=i.getField(a);w?w.fromXml(p):console.warn("Ignoring non-existent field "+a+" in block "+i.type)},ha=function(i){for(let a=0;a<i.childNodes.length;a++){const p=i.childNodes[a];if(p.nodeName.toLowerCase()==="next"){i.removeChild(p);break}}},Gu=function(i){return i.nodeType===Wf.ELEMENT_NODE},$r=function(i){return i.saveState!==void 0&&i.loadState!==void 0},Rs=function(i,a){r(Ut.SERIALIZER,i,a)},bi=function(i){o(Ut.SERIALIZER,i)},Ci=function(i,{addCoordinates:a=!1,addInputBlocks:p=!0,addNextBlocks:w=!0,doFullSerialization:L=!0,saveIds:j=!0}={}){if(i.isInsertionMarker())return null;const _e={type:i.type,id:j?i.id:void 0};return a&&ti(i,_e),da(i,_e),Su(i,_e,L),Ao(i,_e,L),wu(i,_e,L),p&&ol(i,_e,L,j),w&&Fi(i,_e,L,j),_e},da=function(i,a){i.isCollapsed()&&(a.collapsed=!0),i.isEnabled()||(a.enabled=!1),i.isOwnDeletable()||(a.deletable=!1),i.isOwnMovable()||(a.movable=!1),i.isOwnEditable()||(a.editable=!1),i.inputsInline!==void 0&&i.inputsInline!==i.inputsInlineDefault&&(a.inline=i.inputsInline),i.data&&(a.data=i.data)},ti=function(i,a){const p=i.workspace;i=i.getRelativeToSurfaceXY(),a.x=Math.round(p.RTL?p.getWidth()-i.x:i.x),a.y=Math.round(i.y)},Su=function(i,a,p){i.saveExtraState?(i=i.saveExtraState(p),i!==null&&(a.extraState=i)):i.mutationToDom&&(i=i.mutationToDom(),i!==null&&(a.extraState=Qi(i).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},Ao=function(i,a,p){const w=Object.create(null);for(const L of i.getIcons())$r(L)&&(i=L.saveState(p))&&(w[L.getType().toString()]=i);Object.keys(w).length&&(a.icons=w)},wu=function(i,a,p){const w=Object.create(null);for(let L=0;L<i.inputList.length;L++){const j=i.inputList[L];for(let _e=0;_e<j.fieldRow.length;_e++){const We=j.fieldRow[_e];We.isSerializable()&&(w[We.name]=We.saveState(p))}}Object.keys(w).length&&(a.fields=w)},ol=function(i,a,p,w){const L=Object.create(null);for(let j=0;j<i.inputList.length;j++){const _e=i.inputList[j];if(!_e.connection)continue;const We=Mi(_e.connection,p,w);We&&(L[_e.name]=We)}Object.keys(L).length&&(a.inputs=L)},Fi=function(i,a,p,w){i.nextConnection&&(i=Mi(i.nextConnection,p,w))&&(a.next=i)},Mi=function(i,a,p){const w=i.getShadowState(!0);if(i=i.targetBlock(),!w&&!i)return null;const L=Object.create(null);return w&&(L.shadow=w),i&&!i.isShadow()&&(L.block=Ci(i,{doFullSerialization:a,saveIds:p})),L},Vn=function(i,a,{recordUndo:p=!1}={}){return i=Ai(i,a,{recordUndo:p}),a.rendered&&$i(),i},Ai=function(i,a,{parentConnection:p,isShadow:w=!1,recordUndo:L=!1}={}){const j=le();ae(L),(L=t.getGroup$$module$build$src$core$events$utils())||t.setGroup$$module$build$src$core$events$utils(!0),t.disable$$module$build$src$core$events$utils();let _e;try{_e=Jr(i,a,{parentConnection:p,isShadow:w})}finally{t.enable$$module$build$src$core$events$utils()}if(se()&&ce(new(ke(t.CREATE$$module$build$src$core$events$utils))(_e)),t.setGroup$$module$build$src$core$events$utils(L),ae(j),a.rendered){const We=_e;setTimeout(()=>{We.disposed||We.setConnectionTracking(!0)},1)}return _e},Jr=function(i,a,{parentConnection:p,isShadow:w=!1}={}){if(!i.type)throw new Av(i);const L=a.newBlock(i.type,i.id);return L.setShadow(w),dd(L,i),Eu(L,i),ji(L,i),Ba(p,L,i),yh(L,i),pr(L,i),Zo(L,i),fd(L,i),Fc(L,a.rendered),L},dd=function(i,a){let p=a.x===void 0?0:a.x;a=a.y===void 0?0:a.y;const w=i.workspace;p=w.RTL?w.getWidth()-p:p,i.moveBy(p,a)},Eu=function(i,a){a.collapsed&&i.setCollapsed(!0),a.deletable===!1&&i.setDeletable(!1),a.movable===!1&&i.setMovable(!1),a.editable===!1&&i.setEditable(!1),a.enabled===!1&&i.setEnabled(!1),a.inline!==void 0&&i.setInputsInline(a.inline),a.data!==void 0&&(i.data=a.data)},ji=function(i,a){a.extraState&&(i.loadExtraState?i.loadExtraState(a.extraState):i.domToMutation&&i.domToMutation(t.textToDom$$module$build$src$core$utils$xml(a.extraState)))},Ba=function(i,a,p){if(i){if(i.getSourceBlock().isShadow()&&!a.isShadow())throw new L_(p);if(i.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var w=a.outputConnection;if(!w)throw new lm("output",a,p)}else if(w=a.previousConnection,!w)throw new lm("previous",a,p);if(!i.connect(w)){const L=a.workspace.connectionChecker;throw new T0(L.getErrorMessage(L.canConnectWithReason(w,i,!1),w,i),i.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",a,p)}}},yh=function(i,a){if(a.icons){var p=Object.keys(a.icons);for(const L of p){p=a.icons[L];var w=i.getIcon(L);if(!w){if(w=h(Ut.ICON,L,!1),!w)throw new Vf(L,i,a);w=new w(i),i.addIcon(w)}$r(w)&&w.loadState(p)}}},pr=function(i,a){if(a.fields){var p=Object.keys(a.fields);for(let w=0;w<p.length;w++){const L=p[w],j=a.fields[L],_e=i.getField(L);_e?_e.loadState(j):console.warn(`Ignoring non-existant field ${L} in block ${i.type}`)}}},Zo=function(i,a){if(a.inputs){var p=Object.keys(a.inputs);for(let w=0;w<p.length;w++){const L=p[w],j=i.getInput(L);if(!j||!j.connection)throw new lm(L,i,a);lf(j.connection,a.inputs[L])}}},fd=function(i,a){if(a.next){if(!i.nextConnection)throw new lm("next",i,a);lf(i.nextConnection,a.next)}},lf=function(i,a){a.shadow&&i.setShadowState(a.shadow),a.block&&Jr(a.block,i.getSourceBlock().workspace,{parentConnection:i})},Fc=function(i,a){if(a){i.setConnectionTracking(!1),i.initSvg(),i.queueRender();for(const p of i.getIcons())p.onLocationChange(i.getRelativeToSurfaceXY())}else i.initModel()},uf=function(i){const a=i.workspace,p=t.config$$module$build$src$core$config.snapRadius,w=i.getRelativeToSurfaceXY(),L=new vn(0,0),j=a.getAllBlocks(!1).filter(_e=>_e.id!=i.id).map(_e=>_e.getRelativeToSurfaceXY());for(;Ff(vn.sum(w,L),j)||wp(i,L,p);)a.RTL?L.translate(-p,2*p):L.translate(p,2*p);i.moveTo(vn.sum(w,L))},Ff=function(i,a){return a.some(p=>1>=Math.abs(p.x-i.x)&&1>=Math.abs(p.y-i.y))},wp=function(i,a,p){return i.getConnections_(!1).some(w=>!!w.closest(p,a).connection)},Md=function(i){return Ee("Blockly.clipboard.copy","v11","v12","myCopyable.toCopyData()"),C0.copyInternal(i)},ql=function(i){const a=i.toCopyData();aa=a;let p;return kv=(p=i.workspace)!=null?p:null,a},ks=function(i,a,p){return i&&a?Wu(i,a,p):aa&&kv?Wu(aa,kv):null},Wu=function(i,a,p){let w;a=(w=a.getRootWorkspace())!=null?w:a;let L,j;return(j=(L=f(Ut.PASTER,i.paster,!1))==null?void 0:L.paste(i,a,p))!=null?j:null},bh=function(i){return Ee("Blockly.clipboard.duplicate","v11","v12","Blockly.clipboard.paste(myCopyable.toCopyData(), myWorkspace)"),C0.duplicateInternal(i)},Fa=function(i){const a=i.toCopyData();return a?ks(a,i.workspace):null},ci=function(i,a){i.setAttribute(N_,a)},Cr=function(i,a,p){Array.isArray(p)&&(p=p.join(" ")),i.setAttribute(ab+a,`${p}`)},co=function(){return bd},za=function(i){if(bd=i,i===null){let a;(a=document.querySelector("."+Xf))==null||a.remove()}},Uo=function(){document.querySelector("."+Xf)||(bd=document.createElement("div"),bd.className=Xf,(D()||document.body).appendChild(bd))},Ql=function(i,a,p){Zl(),ed=i,dm=p,(i=bd)&&(i.style.direction=a?"rtl":"ltr",i.style.display="block",a=A(),Kf=a.getRenderer().getClassName(),Lp=a.getTheme().getClassName(),Kf&&Be(i,Kf),Lp&&Be(i,Lp))},Zl=function(){if(Fh()){ed=null;var i=bd;i&&(i.style.display="none",i.style.left="",i.style.top="",dm&&dm(),dm=null,i.textContent="",Kf&&(yt(i,Kf),Kf=""),Lp&&(yt(i,Lp),Lp=""),A().markFocused())}},Fh=function(){return!!ed},Yr=function(i){ed===i&&Zl()},Ii=function(i,a,p){bd.style.left=i+"px",bd.style.top=a+"px",bd.style.height=p+"px"},xr=function(i,a,p,w){const L=fa(i,a,p);i=Yi(i,a,p,w),0>L?Ii(i,0,p.height+L):Ii(i,L,p.height)},Yi=function(i,a,p,w){return w?Math.min(Math.max(a.right-p.width,i.left),i.right-p.width):Math.max(Math.min(a.left,i.right-p.width),i.left)},fa=function(i,a,p){return a.bottom+p.height>=i.bottom?a.top-p.height:a.bottom},xu=function(i){return!(i==null||!i.repositionForWindowResize)},cf=function(){xu(ed)&&ed.repositionForWindowResize()||Zl()},hf=function(){return tg},pd=function(i){tg=i},Vu=function(i,a,p){if(Ql(D_,p,Hs),a.length){var w=al(a,p);Pg=w,zc(w,i,p),setTimeout(function(){w.focus()},1),tg=null}else eu()},al=function(i,a){const p=new Dg;p.setRole(ah.MENU);for(let w=0;w<i.length;w++){const L=i[w],j=new Yf(L.text);j.setRightToLeft(a),j.setRole(ah.MENUITEM),p.addChild(j),j.setEnabled(L.enabled),L.enabled&&j.onAction(function(){eu(),requestAnimationFrame(()=>{setTimeout(()=>{L.callback(L.scope)},0)})},{})}return p},zc=function(i,a,p){const w=Te();a=new Li(a.clientY+w.top,a.clientY+w.top,a.clientX+w.left,a.clientX+w.left),zh(i);const L=i.getSize();p&&(a.left+=L.width,a.right+=L.width,w.left+=L.width,w.right+=L.width),xr(w,a,L,p),i.focus()},zh=function(i){var a=co();if(!a)throw Error("Attempting to create a context menu when widget div is null");a=i.render(a),Be(a,"blocklyContextMenu"),Ie(a,"contextmenu",null,ju),i.focus()},ju=function(i){i.preventDefault(),i.stopPropagation()},eu=function(){Yr(D_),tg=null},Hs=function(){Pg&&(Pg.dispose(),Pg=null)},t.callbackFactory$$module$build$src$core$contextmenu=function(i,a){return()=>{t.disable$$module$build$src$core$events$utils();let p;try{p=a instanceof Element?lo(a,i.workspace):Ai(a,i.workspace);const w=i.getRelativeToSurfaceXY();w.x=i.RTL?w.x-t.config$$module$build$src$core$config.snapRadius:w.x+t.config$$module$build$src$core$config.snapRadius,w.y+=2*t.config$$module$build$src$core$config.snapRadius,p.moveBy(w.x,w.y)}finally{t.enable$$module$build$src$core$events$utils()}return se()&&!p.isShadow()&&ce(new(ke(t.CREATE$$module$build$src$core$events$utils))(p)),p.select(),p}},tu=function(i){return{text:t.Msg$$module$build$src$core$msg.REMOVE_COMMENT,enabled:!0,callback:function(){t.setGroup$$module$build$src$core$events$utils(!0),i.dispose(),t.setGroup$$module$build$src$core$events$utils(!1)}}},Uh=function(i){return{text:t.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){const a=i.toCopyData();a&&ks(a,i.workspace)}}},Uc=function(i,a){const p={enabled:!0};return p.text=t.Msg$$module$build$src$core$msg.ADD_COMMENT,p.callback=function(){const w=new Ul(i,t.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT,Ul.DEFAULT_SIZE,Ul.DEFAULT_SIZE);var L=i.getInjectionDiv().getBoundingClientRect();L=new vn(a.clientX-L.left,a.clientY-L.top);const j=i.getOriginOffsetInPixels();L=vn.difference(L,j),L.scale(1/i.scale),w.moveBy(L.x,L.y),i.rendered&&(w.initSvg(),w.render(),w.select())},p},Hc=function(i){return i*Math.PI/180},is=function(i){return 180*i/Math.PI},Hr=function(i,a,p){if(p<i){const w=p;p=i,i=w}return Math.max(i,Math.min(a,p))},Ml=function(){document.querySelector(".blocklyDropDownDiv")||(Si=document.createElement("div"),Si.className="blocklyDropDownDiv",(D()||document.body).appendChild(Si),Qf=document.createElement("div"),Qf.className="blocklyDropDownContent",Si.appendChild(Qf),mm=document.createElement("div"),mm.className="blocklyDropDownArrow",Si.appendChild(mm),Si.style.opacity="0",Si.style.transition="transform "+Np+"s, opacity "+Np+"s",Si.addEventListener("focusin",function(){Be(Si,"blocklyFocused")}),Si.addEventListener("focusout",function(){yt(Si,"blocklyFocused")}))},Ua=function(i){gm=i},nu=function(){return Dp},$u=function(){return Qf},Th=function(){Qf.textContent="",Qf.style.width=""},Ad=function(i,a){Si.style.backgroundColor=i,Si.style.borderColor=a},pi=function(i,a,p,w){return Nt(Xe(a),i,p,w)},ye=function(i,a,p){return Fg=!0,Nt(Pe(i),i,a,p)},Xe=function(i){var a=i.getSvgRoot();const p=i.workspace.scale,w=i.height*p;return i=i.width*p,a=bn(a),new Li(a.y,a.y+w,a.x,a.x+i)},Pe=function(i){return i=i.getScaledBBox(),new Li(i.top,i.bottom,i.left,i.right)},Nt=function(i,a,p,w){const L=i.left+(i.right-i.left)/2,j=i.bottom;i=i.top,w&&(i+=w),w=a.getSourceBlock();let _e=w.workspace;for(;_e.options.parentWorkspace;)_e=_e.options.parentWorkspace;return Ua(_e.getParentSvg().parentNode),sn(a,w.RTL,L,j,L,i,p)},sn=function(i,a,p,w,L,j,_e){return Dp=i,Jf=_e||null,Si.style.direction=a?"rtl":"ltr",i=A(),qf=i.getRenderer().getClassName(),pm=i.getTheme().getClassName(),qf&&Be(Si,qf),pm&&Be(Si,pm),zi(p,w,L,j)},Rn=function(i,a,p,w){return i=Gr(i,p.left,p.right,w.width),{initialX:i.divX,initialY:a,finalX:i.divX,finalY:a+rg,arrowX:i.arrowX,arrowY:-(ng/2+Bg),arrowAtTop:!0,arrowVisible:!0}},Jn=function(i,a,p,w){return i=Gr(i,p.left,p.right,w.width),{initialX:i.divX,initialY:a-w.height,finalX:i.divX,finalY:a-w.height-rg,arrowX:i.arrowX,arrowY:w.height-2*Bg-ng/2,arrowAtTop:!1,arrowVisible:!0}},_n=function(i,a,p){return i=Gr(i,a.left,a.right,p.width),{initialX:i.divX,initialY:0,finalX:i.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Gr=function(i,a,p,w){return a=Hr(a,i-w/2,p-w),i=i-ng/2-a,p=P_,i=Hr(p,i,w-p-ng),{arrowX:i,divX:a}},ho=function(){return!!Dp},Ti=function(i,a){return Dp===i?(a?ll():fo(),!0):!1},fo=function(){Si.style.transform="translate(0, 0)",Si.style.opacity="0",ig=setTimeout(function(){ll()},1e3*Np),Jf&&(Jf(),Jf=null)},ll=function(){ho()&&(ig&&clearTimeout(ig),Si.style.transform="",Si.style.left="",Si.style.top="",Si.style.opacity="0",Si.style.display="none",Si.style.backgroundColor="",Si.style.borderColor="",Jf&&(Jf(),Jf=null),Th(),Dp=null,qf&&(yt(Si,qf),qf=""),pm&&(yt(Si,pm),pm=""),A().markFocused())},zi=function(i,a,p,w){i=_.getPositionMetrics(i,a,p,w),i.arrowVisible?(mm.style.display="",mm.style.transform="translate("+i.arrowX+"px,"+i.arrowY+"px) rotate(45deg)",mm.setAttribute("class",i.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):mm.style.display="none",a=Math.floor(i.initialX),p=Math.floor(i.initialY),w=Math.floor(i.finalX);const L=Math.floor(i.finalY);return Si.style.left=a+"px",Si.style.top=p+"px",Si.style.display="block",Si.style.opacity="1",Si.style.transform="translate("+(w-a)+"px,"+(L-p)+"px)",!!i.arrowAtTop},_s=function(){if(Dp){var i=Dp.getSourceBlock();i=Fg?Pe(Dp):Xe(i);const a=i.left+(i.right-i.left)/2;zi(a,i.bottom,a,i.top)}else fo()},Cu=function(i){if(!(100<i.getDescendants(!1).length)){var a=i.workspace,p=i.getSvgRoot();a.getAudioManager().play("delete");var w=a.getSvgXY(p);p=p.cloneNode(!0),p.setAttribute("transform","translate("+w.x+","+w.y+")"),a.getParentSvg().appendChild(p),qn(p,{x:w.x,y:w.y,width:i.width,height:i.height},a.RTL,new Date,a.scale)}},qn=function(i,a,p,w,L){const j=(new Date().getTime()-w.getTime())/150;1<j?Ke(i):(i.setAttribute("transform","translate("+(a.x+(p?-1:1)*a.width*L/2*j)+","+(a.y+a.height*L*j)+") scale("+(1-j)*L+")"),setTimeout(qn,10,i,a,p,w,L))},pa=function(i){var a=i.workspace;const p=a.scale;if(a.getAudioManager().play("click"),!(1>p)){var w=a.getSvgXY(i.getSvgRoot());i.outputConnection?(w.x+=(i.RTL?3:-3)*p,w.y+=13*p):i.previousConnection&&(w.x+=(i.RTL?-23:23)*p,w.y+=3*p);var L=re(Ye.CIRCLE,{cx:w.x,cy:w.y,r:0,fill:"none",stroke:"#888","stroke-width":10},a.getParentSvg());i=re(Ye.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*p},L),a=re(Ye.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},L),i.beginElement(),a.beginElement(),setTimeout(()=>void Ke(L),150)}},Qs=function(i){if(Ha(),i.workspace.getAudioManager().play("disconnect"),!(1>i.workspace.scale)){var a=i.getHeightWidth().height;a=Math.atan(10/a)/Math.PI*180,i.RTL||(a*=-1),F=i,Gs(i,a,new Date)}},Gs=function(i,a,p){const w=(new Date().getTime()-p.getTime())/200;let L="";1>=w&&(L=`skewX(${Math.round(Math.sin(w*Math.PI*3)*(1-w)*a)})`,R=setTimeout(Gs,10,i,a,p)),i.getSvgRoot().setAttribute("transform",`${i.getTranslation()} ${L}`)},Ha=function(){F&&(R&&(clearTimeout(R),R=null),F.getSvgRoot().setAttribute("transform",F.getTranslation()),F=null)},Hh=function(i,a){return Ee("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),i.startsWith(a)},Sh=function(i){return i.length?i.reduce(function(a,p){return a.length<p.length?a:p}).length:0},mc=function(i,a){if(!i.length)return 0;if(i.length===1)return i[0].length;let p=0;a=a||Sh(i);let w;for(w=0;w<a;w++){for(var L=i[0][w],j=1;j<i.length;j++)if(L!==i[j][w])return p;L===" "&&(p=w+1)}for(L=1;L<i.length;L++)if((j=i[L][w])&&j!==" ")return p;return a},ea=function(i,a){if(!i.length)return 0;if(i.length===1)return i[0].length;let p=0;a=a||Sh(i);let w;for(w=0;w<a;w++){for(var L=i[0].substr(-w-1,1),j=1;j<i.length;j++)if(L!==i[j].substr(-w-1,1))return p;L===" "&&(p=w+1)}for(L=1;L<i.length;L++)if((j=i[L].charAt(i[L].length-w-1))&&j!==" ")return p;return a},t.wrap$$module$build$src$core$utils$string=function(i,a){i=i.split(`
`);for(let p=0;p<i.length;p++)i[p]=Gc(i[p],a);return i.join(`
`)},Gc=function(i,a){if(i.length<=a)return i;const p=i.trim().split(/\s+/);for(var w=0;w<p.length;w++)p[w].length>a&&(a=p[w].length);var L=-1/0;let j,_e=1;do{w=L,j=i,i=[],L=p.length/_e;let We=1;for(let Jt=0;Jt<p.length-1;Jt++)We<(Jt+1.5)/L?(We++,i[Jt]=!0):i[Jt]=!1;i=Ga(p,i,a),L=Gh(p,i,a),i=Wh(p,i),_e++}while(L>w);return j},Gh=function(i,a,p){const w=[0],L=[];for(var j=0;j<i.length;j++)w[w.length-1]+=i[j].length,a[j]===!0?(w.push(0),L.push(i[j].charAt(i[j].length-1))):a[j]===!1&&w[w.length-1]++;for(i=Math.max(...w),a=0,j=0;j<w.length;j++)a-=2*Math.pow(Math.abs(p-w[j]),1.5),a-=Math.pow(i-w[j],1.5),".?!".indexOf(L[j])!==-1?a+=p/3:",;)]}".indexOf(L[j])!==-1&&(a+=p/4);return 1<w.length&&w[w.length-1]<=w[w.length-2]&&(a+=.5),a},Ga=function(i,a,p){let w=Gh(i,a,p),L;for(let j=0;j<a.length-1;j++){if(a[j]===a[j+1])continue;const _e=[].concat(a);_e[j]=!_e[j],_e[j+1]=!_e[j+1];const We=Gh(i,_e,p);We>w&&(w=We,L=_e)}return L?Ga(i,L,p):a},Wh=function(i,a){const p=[];for(let w=0;w<i.length;w++)p.push(i[w]),a[w]!==void 0&&p.push(a[w]?`
`:" ");return p.join("")},t.isNumber$$module$build$src$core$utils$string=function(i){return/^\s*-?\d+(\.\d+)?\s*$/.test(i)},gc=function(i){Zn=i},Yu=function(){return Zn},md=function(){return sr},ta=function(){return Nu},po=function(i){if(i=Al(i)){for(i=i.tooltip;typeof i=="function";)i=i();if(typeof i!="string")throw Error("Tooltip function must return a string.");return i}return""},Al=function(i){for(;i&&i.tooltip;){if(typeof i.tooltip=="string"||typeof i.tooltip=="function")return i;i=i.tooltip}return null},Vh=function(){document.querySelector(".blocklyTooltipDiv")||(Nu=document.createElement("div"),Nu.className="blocklyTooltipDiv",(D()||document.body).appendChild(Nu))},Ui=function(i){i.mouseOverWrapper_=He(i,"pointerover",null,Xu),i.mouseOutWrapper_=He(i,"pointerout",null,ru),i.addEventListener("pointermove",Wc,!1)},gd=function(i){i&&(it(i.mouseOverWrapper_),it(i.mouseOutWrapper_),i.removeEventListener("pointermove",Wc))},Xu=function(i){Lo||(i=Al(i.currentTarget),rr!==i&&(Il(),gr=null,rr=i),clearTimeout(pt))},ru=function(i){Lo||(pt=setTimeout(function(){gr=rr=null,Il()},1),clearTimeout($t),$t=0)},Wc=function(i){if(rr&&rr.tooltip&&!Lo)if(sr){const a=wn-i.pageX;i=hr-i.pageY,Math.sqrt(a*a+i*i)>ds&&Il()}else gr!==rr&&(clearTimeout($t),wn=i.pageX,hr=i.pageY,$t=setTimeout(zf,Zf))},Id=function(){gr=rr=null,Il()},Il=function(){sr&&(sr=!1,Nu&&(Nu.style.display="none")),$t&&(clearTimeout($t),$t=0)},Rd=function(){Il(),Lo=!0},jh=function(){Lo=!1},ni=function(){Nu&&rr&&(typeof Zn=="function"?Zn(Nu,rr):Ri())},Ri=function(){var i=po(rr);i=t.wrap$$module$build$src$core$utils$string(i,At),i=i.split(`
`);for(let a=0;a<i.length;a++){const p=document.createElement("div");p.appendChild(document.createTextNode(i[a])),Nu.appendChild(p)}},Ep=function(i){const a=document.documentElement.clientWidth,p=document.documentElement.clientHeight;let w=wn;w=i?w-(Fr+Nu.offsetWidth):w+Fr;let L=hr+Hl;return L+Nu.offsetHeight>p+window.scrollY&&(L-=Nu.offsetHeight+2*Hl),i?w=Math.max(M0-window.scrollX,w):w+Nu.offsetWidth>a+window.scrollX-2*M0&&(w=a-Nu.offsetWidth-2*M0),{x:w,y:L}},zf=function(){if(!Lo&&(gr=rr,Nu)){Nu.textContent="",ni();var i=rr.RTL;Nu.style.direction=i?"rtl":"ltr",Nu.style.display="block",sr=!0;var{x:a,y:p}=Ep(i);Nu.style.left=a+"px",Nu.style.top=p+"px"}},Rl=function(i,a){for(const p in a)i[p]=a[p]!==null&&typeof a[p]=="object"?Rl(i[p]||Object.create(null),a[p]):a[p];return i},iu=function(i){return i.bubbleIsVisible!==void 0&&i.setBubbleVisible!==void 0},Ku=function(){return ub},Ju=function(i){ub=i},wh=function(){return lh},ul=function(i){lh=i},na=function(i){i=`${i}`.toLowerCase().trim();var a=bT[i];if(a||(a=i.substring(0,2)==="0x"?"#"+i.substring(2):i,a=a[0]==="#"?a:"#"+a,/^#[0-9a-f]{6}$/.test(a)))return a;if(/^#[0-9a-f]{3}$/.test(a))return["#",a[1],a[1],a[2],a[2],a[3],a[3]].join("");var p=i.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return p&&(i=Number(p[1]),a=Number(p[2]),p=Number(p[3]),0<=i&&256>i&&0<=a&&256>a&&0<=p&&256>p)?kl(i,a,p):null},kl=function(i,a,p){return a=i<<16|a<<8|p,16>i?"#"+(16777216|a).toString(16).substr(1):"#"+a.toString(16)},Vc=function(i){return i=na(i),i?(i=parseInt(i.substr(1),16),[i>>16,i>>8&255,i&255]):[0,0,0]},Ol=function(i,a,p){let w=0,L=0,j=0;if(a===0)j=L=w=p;else{const _e=Math.floor(i/60),We=i/60-_e;i=p*(1-a);const Jt=p*(1-a*We);switch(a=p*(1-a*(1-We)),_e){case 1:w=Jt,L=p,j=i;break;case 2:w=i,L=p,j=a;break;case 3:w=i,L=Jt,j=p;break;case 4:w=a,L=i,j=p;break;case 5:w=p,L=i,j=Jt;break;case 6:case 0:w=p,L=a,j=i}}return kl(Math.floor(w),Math.floor(L),Math.floor(j))},jc=function(i,a,p){return i=na(i),!i||(a=na(a),!a)?null:(i=Vc(i),a=Vc(a),kl(Math.round(a[0]+p*(i[0]-a[0])),Math.round(a[1]+p*(i[1]-a[1])),Math.round(a[2]+p*(i[2]-a[2]))))},vc=function(i){return Ol(i,ub,255*lh)},kd=function(i,a,p){const w=[];var L=i.split("");L.push("");var j=0;i=[];let _e=null;for(let jn=0;jn<L.length;jn++){var We=L[jn];if(j===0)if(We==="%")(j=i.join(""))&&w.push(j),i.length=0,j=1;else if(p&&We===`
`){const Tl=i.join("");Tl&&w.push(Tl),i.length=0,w.push(We)}else i.push(We);else if(j===1)We==="%"?(i.push(We),j=0):a&&"0"<=We&&"9">=We?(j=2,_e=We,(We=i.join(""))&&w.push(We),i.length=0):We==="{"?j=3:(i.push("%",We),j=0);else if(j===2)if("0"<=We&&"9">=We)_e+=We;else{var Jt=void 0;w.push(parseInt((Jt=_e)!=null?Jt:"",10)),jn--,j=0}else j===3&&(We===""?(i.splice(0,0,"%{"),jn--,j=0):We!=="}"?i.push(We):(j=i.join(""),/[A-Z]\w*/i.test(j)?(We=j.toUpperCase(),(We=We.startsWith("BKY_")?We.substring(4):null)&&We in t.Msg$$module$build$src$core$msg?(j=t.Msg$$module$build$src$core$msg[We],typeof j=="string"?Array.prototype.push.apply(w,kd(j,a,p)):a?w.push(`${j}`):w.push(j)):w.push("%{"+j+"}")):w.push("%{"+j+"}"),j=i.length=0))}for((a=i.join(""))&&w.push(a),Jt=[],i.length=0,L=0;L<w.length;L++)typeof w[L]!="string"||p&&w[L]===`
`?((a=i.join(""))&&Jt.push(a),i.length=0,Jt.push(w[L])):i.push(w[L]);return(a=i.join(""))&&Jt.push(a),i.length=0,Jt},Wa=function(i){return kd(i,!0,!0)},Xr=function(i){return typeof i!="string"?i:(i=kd(i,!1,!1),i.length?String(i[0]):"")},cl=function(i){let a=!0;const p=t.Msg$$module$build$src$core$msg,w=i.match(/%{BKY_[A-Z]\w*}/gi);if(w)for(let L=0;L<w.length;L++){const j=w[L].toUpperCase();p[j.slice(6,-1)]===void 0&&(console.warn("No message string for "+w[L]+" in "+i),a=!1)}return a},Zi=function(i){const a=typeof i=="string"?Xr(i):i;var p=Number(a);if(!isNaN(p)&&0<=p&&360>=p)return{hue:p,hex:Ol(p,Ku(),255*wh())};if(p=na(a))return{hue:null,hex:p};throw p='Invalid colour: "'+a+'"',i!==a&&(p+=' (from "'+i+'")'),Error(p)},ma=function(i){return i.getProcedureModel!==void 0&&i.doProcedureUpdate!==void 0&&i.isProcedureDef!==void 0},X=function(i){return i.startPublishing!==void 0&&i.stopPublishing!==void 0},xs=function(i,a){r(Ut.FIELD,i,a)},ga=function(i){o(Ut.FIELD,i)},t.fromJson$$module$build$src$core$field_registry=function(i){return Mc.fromJsonInternal(i)},Ir=function(i){const a=f(Ut.FIELD,i.type);if(a){if(typeof a.fromJson!="function")throw new TypeError("returned Field was not a IRegistrableField");return a.fromJson(i)}return console.warn("Blockly could not create a field of type "+i.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},mn=function(i){let a=!1;const p=i.map(([_e,We])=>typeof _e=="string"?[Xr(_e),We]:(a=!0,[_e.alt!==null?Object.assign({},_e,{alt:Xr(_e.alt)}):Object.assign({},_e),We]));if(a||2>i.length)return{options:p};var w=p.map(([_e])=>_e),L=Sh(w);i=mc(w,L);const j=ea(w,L);return!i&&!j||L<=i+j?{options:p}:(L=i?w[0].substring(0,i-1):void 0,w=j?w[0].substr(1-j):void 0,{options:Uf(p,i,j),prefix:L,suffix:w})},Uf=function(i,a,p){return i.map(([w,L])=>[w.substring(a,w.length-p),L])},hl=function(i){if(!Array.isArray(i))throw TypeError("FieldDropdown options must be an array.");if(!i.length)throw TypeError("FieldDropdown options must not be an empty array.");let a=!1;for(let p=0;p<i.length;p++){const w=i[p];Array.isArray(w)?typeof w[1]!="string"?(a=!0,console.error("Invalid option["+p+"]: Each FieldDropdown option id must be a string. Found "+w[1]+" in: ",w)):w[0]&&typeof w[0]!="string"&&typeof w[0].src!="string"&&(a=!0,console.error("Invalid option["+p+"]: Each FieldDropdown option must have a string label or image description. Found"+w[0]+" in: ",w)):(a=!0,console.error("Invalid option["+p+"]: Each FieldDropdown option must be an array. Found: ",w))}if(a)throw TypeError("Found invalid FieldDropdown options.")},t.register$$module$build$src$core$extensions=function(i,a){if(typeof i!="string"||i.trim()==="")throw Error('Error: Invalid extension name "'+i+'"');if(R0[i])throw Error('Error: Extension "'+i+'" is already registered.');if(typeof a!="function")throw Error('Error: Extension "'+i+'" must be a function');R0[i]=a},t.registerMixin$$module$build$src$core$extensions=function(i,a){if(!a||typeof a!="object")throw Error('Error: Mixin "'+i+'" must be a object');t.register$$module$build$src$core$extensions(i,function(){this.mixin(a)})},t.registerMutator$$module$build$src$core$extensions=function(i,a,p,w){const L='Error when registering mutator "'+i+'": ';Xc(L,a);const j=_a(a,L);if(p&&typeof p!="function")throw Error(L+'Extension "'+i+'" is not a function');t.register$$module$build$src$core$extensions(i,function(){j&&this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(w||[],this)),this.mixin(a),p&&p.apply(this)})},ki=function(i){hi(i)?delete R0[i]:console.warn('No extension mapping for name "'+i+'" found to unregister')},hi=function(i){return!!R0[i]},es=function(i,a,p){const w=R0[i];if(typeof w!="function")throw Error('Error: Extension "'+i+'" not found.');let L;if(p?ss(i,a):L=ra(a),w.apply(a),p)Xc('Error after applying mutator "'+i+'": ',a);else if(!Od(L,a))throw Error('Error when applying extension "'+i+'": mutation properties changed when applying a non-mutator extension.')},ss=function(i,a){if(ra(a).length)throw Error('Error: tried to apply mutation "'+i+'" to a block that already has mutator functions.  Block id: '+a.id)},Yc=function(i,a){return os(i.mutationToDom,i.domToMutation,a+" mutationToDom/domToMutation")},va=function(i,a){return os(i.saveExtraState,i.loadExtraState,a+" saveExtraState/loadExtraState")},_a=function(i,a){return os(i.compose,i.decompose,a+" compose/decompose")},os=function(i,a,p){if(i&&a){if(typeof i!="function"||typeof a!="function")throw Error(p+" must be a function");return!0}if(!i&&!a)return!1;throw Error(p+"Must have both or neither functions")},Xc=function(i,a){const p=Yc(a,i),w=va(a,i);if(!p&&!w)throw Error(i+"Mutations must contain either XML hooks, or JSON hooks, or both");_a(a,i)},ra=function(i){const a=[];return i.domToMutation!==void 0&&a.push(i.domToMutation),i.mutationToDom!==void 0&&a.push(i.mutationToDom),i.saveExtraState!==void 0&&a.push(i.saveExtraState),i.loadExtraState!==void 0&&a.push(i.loadExtraState),i.compose!==void 0&&a.push(i.compose),i.decompose!==void 0&&a.push(i.decompose),a},Od=function(i,a){if(a=ra(a),a.length!==i.length)return!1;for(let p=0;p<a.length;p++)if(i[p]!==a[p])return!1;return!0},Ld=function(i){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")i();else{const a=setInterval(function(){document.readyState==="complete"&&(clearInterval(a),i())},10)}},t.buildTooltipForDropdown$$module$build$src$core$extensions=function(i,a){const p=[];return function(){p.indexOf(this.type)===-1&&(Yh(this,i,a),p.push(this.type)),this.setTooltip((function(){const w=String(this.getFieldValue(i));return Xr(a[w])}).bind(this))}},Yh=function(i,a,p){var w=i.getField(a);if(w instanceof Ih&&!w.isOptionListDynamic()){w=w.getOptions();for(const[,L]of w)p[L]===void 0&&console.warn(`No tooltip mapping for value ${L} of field ${a} of block type ${i.type}.`)}},t.buildTooltipWithFieldText$$module$build$src$core$extensions=function(i,a){return function(){this.setTooltip((function(){const p=this.getField(a);return Xr(i).replace("%1",p?p.getText():"")}).bind(this))}},Ws=function(){const i=this.tooltip;this.setTooltip((function(){const a=this.getParent();return a&&a.getInputsInline()&&a.tooltip||i}).bind(this))},Kn=function(i,a){return" "+i+","+a+" "},Vs=function(i,a){return" "+i+a.join("")},Zs=function(i,a){return" M "+i+","+a+" "},Hi=function(i,a){return" m "+i+","+a+" "},su=function(i,a){return" l "+i+","+a+" "},Ho=function(i){return" l"+i.join("")},$n=function(i,a){return" "+i+" "+a+" "},mi=function(i,a,p,w){return i+" "+p+" "+p+" "+a+w},gi=function(i,a){r(Ut.ICON,i.toString(),a)},Hf=function(i){o(Ut.ICON,i)},Eh=function(i){const a=i.getProcedureMap().getProcedures().filter(w=>!w.getReturnTypes()).map(w=>[w.getName(),w.getParameters().map(L=>L.getName()),!1]);i.getBlocksByType("procedures_defnoreturn",!1).forEach(w=>{!ma(w)&&Pi(w)&&a.push(w.getProcedureDef())});const p=i.getProcedureMap().getProcedures().filter(w=>!!w.getReturnTypes()).map(w=>[w.getName(),w.getParameters().map(L=>L.getName()),!0]);return i.getBlocksByType("procedures_defreturn",!1).forEach(w=>{!ma(w)&&Pi(w)&&p.push(w.getProcedureDef())}),a.sort(mo),p.sort(mo),[a,p]},mo=function(i,a){return i[0].localeCompare(a[0],void 0,{sensitivity:"base"})},t.findLegalName$$module$build$src$core$procedures=function(i,a){if(a.isInFlyout)return i;for(i=i||t.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!ya(i,a.workspace,a);){const p=i.match(/^(.*?)(\d+)$/);i=p?p[1]+(parseInt(p[2])+1):i+"2"}return i},ya=function(i,a,p){return!Mn(i,a,p)},Mn=function(i,a,p){for(const w of a.getAllBlocks(!1))if(w!==p&&Pi(w)&&t.Names$$module$build$src$core$names.equals(w.getProcedureDef()[0],i))return!0;p=p&&ma(p)?p==null?void 0:p.getProcedureModel():void 0;for(const w of a.getProcedureMap().getProcedures())if(w!==p&&t.Names$$module$build$src$core$names.equals(w.getName(),i))return!0;return!1},t.rename$$module$build$src$core$procedures=function(i){var a=this.getSourceBlock();if(!a)throw new No;i=i.trim();const p=t.findLegalName$$module$build$src$core$procedures(i,a);ma(a)&&!a.isInsertionMarker()&&a.getProcedureModel().setName(p);const w=this.getValue();if(w!==i&&w!==p)for(i=a.workspace.getAllBlocks(!1),a=0;a<i.length;a++){const L=i[a];L.renameProcedure&&L.renameProcedure(w,p)}return p},yn=function(i){function a(j,_e){for(let Jt=0;Jt<j.length;Jt++){var We=j[Jt][0];const jn=j[Jt][1],Tl=t.createElement$$module$build$src$core$utils$xml("block");Tl.setAttribute("type",_e),Tl.setAttribute("gap","16");const Za=t.createElement$$module$build$src$core$utils$xml("mutation");for(Za.setAttribute("name",We),Tl.appendChild(Za),We=0;We<jn.length;We++){const Up=t.createElement$$module$build$src$core$utils$xml("arg");Up.setAttribute("name",jn[We]),Za.appendChild(Up)}p.push(Tl)}}const p=[];if(Kr.procedures_defnoreturn){var w=t.createElement$$module$build$src$core$utils$xml("block");w.setAttribute("type","procedures_defnoreturn"),w.setAttribute("gap","16");var L=t.createElement$$module$build$src$core$utils$xml("field");L.setAttribute("name","NAME"),L.appendChild(t.createTextNode$$module$build$src$core$utils$xml(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),w.appendChild(L),p.push(w)}return Kr.procedures_defreturn&&(w=t.createElement$$module$build$src$core$utils$xml("block"),w.setAttribute("type","procedures_defreturn"),w.setAttribute("gap","16"),L=t.createElement$$module$build$src$core$utils$xml("field"),L.setAttribute("name","NAME"),L.appendChild(t.createTextNode$$module$build$src$core$utils$xml(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),w.appendChild(L),p.push(w)),Kr.procedures_ifreturn&&(w=t.createElement$$module$build$src$core$utils$xml("block"),w.setAttribute("type","procedures_ifreturn"),w.setAttribute("gap","16"),p.push(w)),p.length&&p[p.length-1].setAttribute("gap","24"),i=Eh(i),a(i[0],"procedures_callnoreturn"),a(i[1],"procedures_callreturn"),p},dl=function(i){var a=[],p=i.getBlocksByType("procedures_mutatorarg",!1);for(let j=0,_e;_e=p[j];j++)a.push(_e.getFieldValue("NAME"));p=t.createElement$$module$build$src$core$utils$xml("xml");const w=t.createElement$$module$build$src$core$utils$xml("block");w.setAttribute("type","procedures_mutatorarg");const L=t.createElement$$module$build$src$core$utils$xml("field");L.setAttribute("name","NAME"),a=Bi(t.DEFAULT_ARG$$module$build$src$core$procedures,a),a=t.createTextNode$$module$build$src$core$utils$xml(a),L.appendChild(a),w.appendChild(L),p.appendChild(w),i.updateToolbox(p)},_c=function(i){if(i.type===So&&i.bubbleType==="mutator"&&i.isOpen&&i.blockId){i=b(i.workspaceId).getBlockById(i.blockId);var a=i.type;(a==="procedures_defnoreturn"||a==="procedures_defreturn")&&(i=i.getIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),dl(i),i.addChangeListener(xp))}},xp=function(i){(i.type===t.CREATE$$module$build$src$core$events$utils||i.type===t.DELETE$$module$build$src$core$events$utils||i.type===t.CHANGE$$module$build$src$core$events$utils||i.type===Mh)&&(i=b(i.workspaceId),dl(i))},ou=function(i,a){return a.getAllBlocks(!1).filter(p=>Io(p,i)||Pr(p)&&t.Names$$module$build$src$core$names.equals(p.getProcedureCall(),i))},Io=function(i,a){return ma(i)&&!i.isProcedureDef()&&i.getProcedureModel()&&t.Names$$module$build$src$core$names.equals(i.getProcedureModel().getName(),a)},t.mutateCallers$$module$build$src$core$procedures=function(i){const a=le();var p=i.getProcedureDef()[0];const w=i.mutationToDom(!0);i=ou(p,i.workspace);for(let j=0,_e;_e=i[j];j++){p=(p=_e.mutationToDom())&&kn(p),_e.domToMutation&&_e.domToMutation(w);var L=_e.mutationToDom();L=L&&kn(L),p!==L&&(ae(!1),ce(new(ke(t.CHANGE$$module$build$src$core$events$utils))(_e,"mutation",null,p,L)),ae(a))}},t.getDefinition$$module$build$src$core$procedures=function(i,a){for(const p of a.getAllBlocks(!1))if(ma(p)&&p.isProcedureDef()&&t.Names$$module$build$src$core$names.equals(p.getProcedureModel().getName(),i)||Pi(p)&&t.Names$$module$build$src$core$names.equals(p.getProcedureDef()[0],i))return p;return null},ys=function(i){return i.isDynamic},fl=function(i){return i.pathDown!==void 0&&i.pathUp!==void 0},as=function(i){return i.pathLeft!==void 0&&i.pathRight!==void 0},pl=function(i){let a=i.outputConnection;return(!a||i.previousConnection&&i.previousConnection.isConnected())&&(a=i.previousConnection),a},Go=function(i,a){if(!i||!a)throw Error("Cannot connect null connections.");i.targetConnection=a,a.targetConnection=i},Xh=function(i,a){let p=null;a=a.outputConnection;const w=a==null?void 0:a.getConnectionChecker();for(let L=0,j;j=i.inputList[L];L++){const _e=j.connection;let We;if(_e&&((We=w)!=null&&We.canConnect(a,_e,!1))){if(p)return null;p=_e}}return p},Va=function(i,a){let p;for(;p=Xh(i,a);)if(i=p.targetBlock(),!i||i.isShadow())return p;return null},Oi=function(i,a){r(Ut.RENDERER,i,a)},Nd=function(i){o(Ut.RENDERER,i)},Kc=function(i,a,p){return i=new(h(Ut.RENDERER,i))(i),i.init(a,p),i},Kh=function(i){ws(i.getTargetWorkspace(),void 0,"String")},Wo=function(i){ws(i.getTargetWorkspace(),void 0,"Number")},Ro=function(i){ws(i.getTargetWorkspace(),void 0,"Colour")},df=function(i){let a=[],p=document.createElement("button");return p.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),p.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),a.push(p),p=document.createElement("button"),p.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),p.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),a.push(p),p=document.createElement("button"),p.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),p.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),a.push(p),i.registerButtonCallback("CREATE_VARIABLE_STRING",Kh),i.registerButtonCallback("CREATE_VARIABLE_NUMBER",Wo),i.registerButtonCallback("CREATE_VARIABLE_COLOUR",Ro),i=Mu(i),a=a.concat(i)},Mu=function(i){i=i.getAllVariables();const a=[];if(0<i.length){if(Kr.variables_set_dynamic){var p=i[i.length-1];const w=t.createElement$$module$build$src$core$utils$xml("block");w.setAttribute("type","variables_set_dynamic"),w.setAttribute("gap","24"),w.appendChild(qs(p)),a.push(w)}if(Kr.variables_get_dynamic){i.sort(vf.compareByName);for(let w=0,L;L=i[w];w++)p=t.createElement$$module$build$src$core$utils$xml("block"),p.setAttribute("type","variables_get_dynamic"),p.setAttribute("gap","8"),p.appendChild(qs(L)),a.push(p)}}return a},Ll=function(i){return i.toCopyData!==void 0},vd=function(){qi.registry.register({name:Fp.ESCAPE,preconditionFn(i){return!i.options.readOnly},callback(i){return i.hideChaff(),!0},keyCodes:[Vr.ESC]})},yc=function(){qi.registry.register({name:Fp.DELETE,preconditionFn(i){const a=O();return!i.options.readOnly&&a!=null&&a.isDeletable()},callback(i,a){return a.preventDefault(),vm.inProgress()?!1:(O().checkAndDelete(),!0)},keyCodes:[Vr.DELETE,Vr.BACKSPACE]})},qr=function(){const i=qi.registry.createSerializedKey(Vr.C,[Vr.CTRL]),a=qi.registry.createSerializedKey(Vr.C,[Vr.ALT]),p=qi.registry.createSerializedKey(Vr.C,[Vr.META]);qi.registry.register({name:Fp.COPY,preconditionFn(w){const L=O();return!w.options.readOnly&&!vm.inProgress()&&L!=null&&L.isDeletable()&&L.isMovable()&&Ll(L)},callback(w,L){return L.preventDefault(),w.hideChaff(),L=O(),!L||!Ll(L)?!1:(jv=L.toCopyData(),X_=w,!!jv)},keyCodes:[i,a,p]})},au=function(){const i=qi.registry.createSerializedKey(Vr.X,[Vr.CTRL]),a=qi.registry.createSerializedKey(Vr.X,[Vr.ALT]),p=qi.registry.createSerializedKey(Vr.X,[Vr.META]);qi.registry.register({name:Fp.CUT,preconditionFn(w){const L=O();return!w.options.readOnly&&!vm.inProgress()&&L!=null&&L instanceof Bp&&L.isDeletable()&&L.isMovable()&&!L.workspace.isFlyout},callback(w){const L=O();return!L||!Ll(L)?!1:(jv=L.toCopyData(),X_=w,L.checkAndDelete(),!0)},keyCodes:[i,a,p]})},qu=function(){const i=qi.registry.createSerializedKey(Vr.V,[Vr.CTRL]),a=qi.registry.createSerializedKey(Vr.V,[Vr.ALT]),p=qi.registry.createSerializedKey(Vr.V,[Vr.META]);qi.registry.register({name:Fp.PASTE,preconditionFn(w){return!w.options.readOnly&&!vm.inProgress()},callback(){return jv&&X_?!!ks(jv,X_):!1},keyCodes:[i,a,p]})},ls=function(){const i=qi.registry.createSerializedKey(Vr.Z,[Vr.CTRL]),a=qi.registry.createSerializedKey(Vr.Z,[Vr.ALT]),p=qi.registry.createSerializedKey(Vr.Z,[Vr.META]);qi.registry.register({name:Fp.UNDO,preconditionFn(w){return!w.options.readOnly&&!vm.inProgress()},callback(w){return w.hideChaff(),w.undo(!1),!0},keyCodes:[i,a,p]})},ja=function(){const i=qi.registry.createSerializedKey(Vr.Z,[Vr.SHIFT,Vr.CTRL]),a=qi.registry.createSerializedKey(Vr.Z,[Vr.SHIFT,Vr.ALT]),p=qi.registry.createSerializedKey(Vr.Z,[Vr.SHIFT,Vr.META]),w=qi.registry.createSerializedKey(Vr.Y,[Vr.CTRL]);qi.registry.register({name:Fp.REDO,preconditionFn(L){return!vm.inProgress()&&!L.options.readOnly},callback(L){return L.hideChaff(),L.undo(!0),!0},keyCodes:[i,a,p,w]})},$s=function(){vd(),yc(),qr(),au(),qu(),ls(),ja()},Cs=function(i){const a={id:i.getId(),name:i.getName(),returnTypes:i.getReturnTypes()};return i.getParameters().length&&(a.parameters=i.getParameters().map(p=>Jc(p))),a},Jc=function(i){const a={id:i.getId(),name:i.getName()};return i.getTypes().length&&(a.types=i.getTypes()),a},vi=function(i,a,p,w){if(i=new i(w,p.name,p.id).setReturnTypes(p.returnTypes),!p.parameters)return i;for(const[L,j]of p.parameters.entries())i.insertParameter(Ya(a,j,w),L);return i},Ya=function(i,a,p){return i=new i(p,a.name,a.id),a.types&&i.setTypes(a.types),i},bc=function(i){const a=Object.create(null),p=g(Ut.SERIALIZER,!0);for(const w in p){let L;const j=(L=p[w])==null?void 0:L.save(i);j&&(a[w]=j)}return a},ff=function(i,a,{recordUndo:p=!1}={}){var w=g(Ut.SERIALIZER,!0);if(w){w=Object.entries(w).sort((j,_e)=>_e[1].priority-j[1].priority);var L=le();ae(p),(p=t.getGroup$$module$build$src$core$events$utils())||t.setGroup$$module$build$src$core$events$utils(!0),te(),a instanceof tp&&a.setResizesEnabled(!1);for(const[,j]of w.reverse()){let _e;(_e=j)==null||_e.clear(a)}for(let[j,_e]of w.reverse())if(i[j]){let We;(We=_e)==null||We.load(i[j],a)}a instanceof tp&&a.setResizesEnabled(!0),me(),ce(new(ke(Sa))(a)),t.setGroup$$module$build$src$core$events$utils(p),ae(L)}},xh=function(i,a,p){const w=p.getBoundingRectangle(),L=w.right-w.left,j=Hr(a.top,w.top,a.top+a.height-(w.bottom-w.top))-w.top;let _e=a.left;return a=a.left+a.width-L,i.RTL?_e=Math.min(a,_e):a=Math.max(_e,a),(i=Hr(_e,w.left,a)-w.left)||j?(p.moveBy(i,j,["inbounds"]),!0):!1},ia=function(i){return a=>{var p=i.getMetricsManager();if(p.hasFixedEdges()&&!i.isDragging()){var w;if(Qh.indexOf((w=a.type)!=null?w:"")!==-1){w=p.getScrollMetrics(!0);const L=Xi(i,a);L&&(p=t.getGroup$$module$build$src$core$events$utils()||!1,t.setGroup$$module$build$src$core$events$utils(a.group),xh(i,w,L)&&!a.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),t.setGroup$$module$build$src$core$events$utils(p))}else a.type===ii&&a.scale&&a.oldScale&&a.scale>a.oldScale&&Pn(i)}}},Xi=function(i,a){let p=null;switch(a.type){case t.CREATE$$module$build$src$core$events$utils:case t.MOVE$$module$build$src$core$events$utils:(p=i.getBlockById(a.blockId))&&(p=p.getRootBlock());break;case cs:case Ta:p=i.getCommentById(a.commentId)}return p},Pn=function(i){var a=i.getMetricsManager();if(a.hasFixedEdges()&&!i.isDragging()){a=a.getScrollMetrics(!0);var p=i.getTopBoundedElements();for(let w=0,L;L=p[w];w++)xh(i,a,L)}},nr=function(i,a){const p=[];for(const w of i.getIcons())(!iu(w)||w.bubbleIsVisible())&&(p.push({location:a,icon:w}),w.onLocationChange(a));for(const w of i.getChildren(!1))p.push(...nr(w,vn.sum(a,w.relativeCoords)));return p},zr=function(){Ni.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.UNDO},preconditionFn(i){return 0<i.workspace.getUndoStack().length?"enabled":"disabled"},callback(i){i.workspace.undo(!1)},scopeType:Ni.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},ri=function(){Ni.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.REDO},preconditionFn(i){return 0<i.workspace.getRedoStack().length?"enabled":"disabled"},callback(i){i.workspace.undo(!0)},scopeType:Ni.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Zr=function(){Ni.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(i){return i.workspace.isMovable()?1<i.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(i){i.workspace.cleanUp()},scopeType:Ni.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},ko=function(i,a){function p(j){L--,j.setCollapsed(i),L===0&&t.setGroup$$module$build$src$core$events$utils(!1)}let w=0,L=0;t.setGroup$$module$build$src$core$events$utils(!0);for(let j=0;j<a.length;j++){let _e=a[j];for(;_e;)L++,setTimeout(p.bind(null,_e),w),_e=_e.getNextBlock(),w+=10}},us=function(){Ni.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(i){if(i.workspace.options.collapse){i=i.workspace.getTopBlocks(!1);for(let a=0;a<i.length;a++){let p=i[a];for(;p;){if(!p.isCollapsed())return"enabled";p=p.getNextBlock()}}return"disabled"}return"hidden"},callback(i){ko(!0,i.workspace.getTopBlocks(!0))},scopeType:Ni.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},ts=function(){Ni.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(i){if(i.workspace.options.collapse){i=i.workspace.getTopBlocks(!1);for(let a=0;a<i.length;a++){let p=i[a];for(;p;){if(p.isCollapsed())return"enabled";p=p.getNextBlock()}}return"disabled"}return"hidden"},callback(i){ko(!1,i.workspace.getTopBlocks(!0))},scopeType:Ni.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},lu=function(i,a){if(i.isDeletable())Array.prototype.push.apply(a,i.getDescendants(!1));else{i=i.getChildren(!1);for(let p=0;p<i.length;p++)lu(i[p],a)}},Qu=function(i){const a=[];i=i.getTopBlocks(!0);for(let p=0;p<i.length;p++)lu(i[p],a);return a},Tc=function(i,a){a?t.setGroup$$module$build$src$core$events$utils(a):(t.setGroup$$module$build$src$core$events$utils(!0),a=t.getGroup$$module$build$src$core$events$utils());const p=i.shift();p&&(p.isDeadOrDying()?Tc(i,a):(p.dispose(!1,!0),setTimeout(Tc,10,i,a))),t.setGroup$$module$build$src$core$events$utils(!1)},Zu=function(){Ni.registry.register({displayText(i){return i.workspace?(i=Qu(i.workspace).length,i===1?t.Msg$$module$build$src$core$msg.DELETE_BLOCK:t.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${i}`)):""},preconditionFn(i){return i.workspace&&0<Qu(i.workspace).length?"enabled":"disabled"},callback(i){if(i.workspace){i.workspace.cancelCurrentGesture();var a=Qu(i.workspace);2>a.length?Tc(a):rn(t.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(a.length)),function(p){p&&Tc(a)})}},scopeType:Ni.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},eo=function(){zr(),ri(),Zr(),us(),ts(),Zu()},go=function(){Ni.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(i){return i=i.block,!i.isInFlyout&&i.isDeletable()&&i.isMovable()?i.isDuplicatable()?"enabled":"disabled":"hidden"},callback(i){if(i.block){var a=i.block.toCopyData();a&&ks(a,i.block.workspace)}},scopeType:Ni.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},_d=function(){Ni.registry.register({displayText(i){return i.block.hasIcon(nd.TYPE)?t.Msg$$module$build$src$core$msg.REMOVE_COMMENT:t.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(i){return i=i.block,!i.isInFlyout&&i.workspace.options.comments&&!i.isCollapsed()&&i.isEditable()?"enabled":"hidden"},callback(i){i=i.block,i.hasIcon(nd.TYPE)?i.setCommentText(null):i.setCommentText("")},scopeType:Ni.ScopeType.BLOCK,id:"blockComment",weight:2})},ba=function(){Ni.registry.register({displayText(i){return i.block.getInputsInline()?t.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:t.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(i){if(i=i.block,!i.isInFlyout&&i.isMovable()&&!i.isCollapsed()){for(let a=1;a<i.inputList.length;a++)if(!(i.inputList[a-1]instanceof J_||i.inputList[a]instanceof J_))return"enabled"}return"hidden"},callback(i){i.block.setInputsInline(!i.block.getInputsInline())},scopeType:Ni.ScopeType.BLOCK,id:"blockInline",weight:3})},Au=function(){Ni.registry.register({displayText(i){return i.block.isCollapsed()?t.Msg$$module$build$src$core$msg.EXPAND_BLOCK:t.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(i){return i=i.block,!i.isInFlyout&&i.isMovable()&&i.workspace.options.collapse?"enabled":"hidden"},callback(i){i.block.setCollapsed(!i.block.isCollapsed())},scopeType:Ni.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Iu=function(){Ni.registry.register({displayText(i){return i.block.isEnabled()?t.Msg$$module$build$src$core$msg.DISABLE_BLOCK:t.Msg$$module$build$src$core$msg.ENABLE_BLOCK},preconditionFn(i){return i=i.block,!i.isInFlyout&&i.workspace.options.disable&&i.isEditable()?i.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback(i){i=i.block;const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0),i.setEnabled(!i.isEnabled()),t.setGroup$$module$build$src$core$events$utils(a)},scopeType:Ni.ScopeType.BLOCK,id:"blockDisable",weight:5})},vo=function(){Ni.registry.register({displayText(i){var a=i.block;return i=a.getDescendants(!1).length,(a=a.getNextBlock())&&(i-=a.getDescendants(!1).length),i===1?t.Msg$$module$build$src$core$msg.DELETE_BLOCK:t.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${i}`)},preconditionFn(i){return!i.block.isInFlyout&&i.block.isDeletable()?"enabled":"hidden"},callback(i){i.block&&i.block.checkAndDelete()},scopeType:Ni.ScopeType.BLOCK,id:"blockDelete",weight:6})},_o=function(){Ni.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.HELP},preconditionFn(i){return i=i.block,(typeof i.helpUrl=="function"?i.helpUrl():i.helpUrl)?"enabled":"hidden"},callback(i){i.block.showHelp()},scopeType:Ni.ScopeType.BLOCK,id:"blockHelp",weight:7})},Nl=function(){go(),_d(),ba(),Au(),Iu(),vo(),_o()},Vo=function(){eo(),Nl()},ec=function(i,a){var p=null;p=typeof i=="string"?document.getElementById(i)||document.querySelector(i):i;let w;if(!document.contains(p)&&document!==((w=p)==null?void 0:w.ownerDocument))throw Error("Error: container is not in current document");i=new Gi(a||{}),a=document.createElement("div"),a.className="injectionDiv",a.tabIndex=0,Cr(a,xo.LABEL,t.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),p.appendChild(a),p=tc(a,i);const L=$h(a,p,i);return Ch(L),k(L),H(L),a.addEventListener("focusin",function(){k(L)}),L},tc=function(i,a){i.setAttribute("dir","LTR"),gt(a.hasCss,a.pathToMedia),i=re(Ye.SVG,{xmlns:qm,"xmlns:html":xc,"xmlns:xlink":no,version:"1.1",class:"blocklySvg",tabindex:"0"},i);const p=re(Ye.DEFS,{},i),w=String(Math.random()).substring(2);return a.gridPattern=lb.createDom(w,a.gridOptions,p),i},$h=function(i,a,p){p.parentWorkspace=null,p=new tp(p);const w=p.options;p.scale=w.zoomOptions.startScale,a.appendChild(p.createDom("blocklyMainBackground",i));var L=p.getRenderer().getClassName();return L&&Be(i,L),(L=p.getTheme().getClassName())&&Be(i,L),!w.hasCategories&&w.languageTree&&(i=p.addFlyout(Ye.SVG),Qe(i,a)),w.hasTrashcan&&p.addTrashcan(),w.zoomOptions&&w.zoomOptions.controls&&p.addZoomControls(),p.getThemeManager().subscribe(a,"workspaceBackgroundColour","background-color"),p.translate(0,0),p.addChangeListener(ia(p)),H(p),Uo(),Ml(),Vh(),p},Ch=function(i){const a=i.options;var p=i.getParentSvg();if(Ie(p.parentNode,"contextmenu",null,function(w){st(w)||w.preventDefault()}),p=Ie(window,"resize",null,function(){Il(),i.hideComponents(!0),_s(),cf(),H(i),Pn(i)}),i.setResizeHandlerWrapper(p),bs(),a.languageTree){p=i.getToolbox();const w=i.getFlyout(!0);p?p.init():w&&(w.init(i),w.show(a.languageTree),typeof w.scrollToStart=="function"&&w.scrollToStart())}a.hasTrashcan&&i.trashcan.init(),a.zoomOptions&&a.zoomOptions.controls&&i.zoomControls_.init(),a.moveOptions&&a.moveOptions.scrollbars?(i.scrollbar=new Ab(i,a.moveOptions.scrollbars===!0||!!a.moveOptions.scrollbars.horizontal,a.moveOptions.scrollbars===!0||!!a.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),i.scrollbar.resize()):i.setMetrics({x:.5,y:.5}),a.hasSounds&&Os(a.pathToMedia,i)},Br=function(i){const a=A();a&&!(st(i)||a.rendered&&!a.isVisible())&&qi.registry.onKeyDown(a,i)},bs=function(){io||(Ie(document,"scroll",null,function(){const i=S();for(let a=0,p;p=i[a];a++)p instanceof tp&&p.updateInverseScreenCTM()}),Ie(document,"keydown",null,Br),He(document,"touchend",null,Ze),He(document,"touchcancel",null,Ze),zn&&Ie(window,"orientationchange",document,function(){H(A())})),io=!0},Os=function(i,a){function p(){for(;L.length;){const j=L.pop();j&&it(j)}w.preload()}const w=a.getAudioManager();w.load([i+"click.mp3",i+"click.wav",i+"click.ogg"],"click"),w.load([i+"disconnect.wav",i+"disconnect.mp3",i+"disconnect.ogg"],"disconnect"),w.load([i+"delete.mp3",i+"delete.ogg",i+"delete.wav"],"delete");const L=[];L.push(Ie(document,"pointermove",null,p,!0)),L.push(Ie(document,"touchstart",null,p,!0))},Xa=function(i){return i.getType!==void 0&&i.initView!==void 0&&i.dispose!==void 0&&i.getWeight!==void 0&&i.getSize!==void 0&&i.applyColour!==void 0&&i.hideForInsertionMarker!==void 0&&i.updateEditable!==void 0&&i.updateCollapsed!==void 0&&i.isShownWhenCollapsed!==void 0&&i.setOffsetInBlock!==void 0&&i.onLocationChange!==void 0&&i.onClick!==void 0},js=function(i){return i.paste!==void 0},fn=function(i){return i.isSelectable()},qc=function(i){A().hideChaff(i)},En=En||{},En.scope={},En.ASSUME_ES5=!1,En.ASSUME_NO_NATIVE_MAP=!1,En.ASSUME_NO_NATIVE_SET=!1,En.SIMPLE_FROUND_POLYFILL=!1,En.ISOLATE_POLYFILLS=!1,En.FORCE_POLYFILL_PROMISE=!1,En.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,En.defineProperty=En.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(i,a,p){return i==Array.prototype||i==Object.prototype||(i[a]=p.value),i},En.getGlobal=function(i){i=[typeof globalThis=="object"&&globalThis,i,typeof window=="object"&&window,typeof self=="object"&&self,typeof jl=="object"&&jl];for(var a=0;a<i.length;++a){var p=i[a];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")},En.global=En.getGlobal(this),En.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",En.TRUST_ES6_POLYFILLS=!En.ISOLATE_POLYFILLS||En.IS_SYMBOL_NATIVE,En.polyfills={},En.propertyToPolyfillSymbol={},En.POLYFILL_PREFIX="$jscp$",En.polyfill=function(i,a,p,w){a&&(En.ISOLATE_POLYFILLS?En.polyfillIsolated(i,a,p,w):En.polyfillUnisolated(i,a,p,w))},En.polyfillUnisolated=function(i,a,p,w){for(p=En.global,i=i.split("."),w=0;w<i.length-1;w++){var L=i[w];if(!(L in p))return;p=p[L]}i=i[i.length-1],w=p[i],a=a(w),a!=w&&a!=null&&En.defineProperty(p,i,{configurable:!0,writable:!0,value:a})},En.polyfillIsolated=function(i,a,p,w){var L=i.split(".");i=L.length===1,w=L[0],w=!i&&w in En.polyfills?En.polyfills:En.global;for(var j=0;j<L.length-1;j++){var _e=L[j];if(!(_e in w))return;w=w[_e]}L=L[L.length-1],p=En.IS_SYMBOL_NATIVE&&p==="es6"?w[L]:null,a=a(p),a!=null&&(i?En.defineProperty(En.polyfills,L,{configurable:!0,writable:!0,value:a}):a!==p&&(En.propertyToPolyfillSymbol[L]===void 0&&(p=1e9*Math.random()>>>0,En.propertyToPolyfillSymbol[L]=En.IS_SYMBOL_NATIVE?En.global.Symbol(L):En.POLYFILL_PREFIX+p+"$"+L),En.defineProperty(w,En.propertyToPolyfillSymbol[L],{configurable:!0,writable:!0,value:a})))},En.polyfill("globalThis",function(i){return i||En.global},"es_2020","es3"),En.arrayIteratorImpl=function(i){var a=0;return function(){return a<i.length?{done:!1,value:i[a++]}:{done:!0}}},En.arrayIterator=function(i){return{next:En.arrayIteratorImpl(i)}},En.initSymbol=function(){},En.iteratorPrototype=function(i){return i={next:i},i[Symbol.iterator]=function(){return this},i},En.iteratorFromArray=function(i,a){i instanceof String&&(i+="");var p=0,w=!1,L={next:function(){if(!w&&p<i.length){var j=p++;return{value:a(j,i[j]),done:!1}}return w=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L},En.polyfill("Array.prototype.values",function(i){return i||function(){return En.iteratorFromArray(this,function(a,p){return p})}},"es8","es3"),En.polyfill("Array.prototype.flat",function(i){return i||function(a){a=a===void 0?1:a;var p=[];return Array.prototype.forEach.call(this,function(w){Array.isArray(w)&&0<a?(w=Array.prototype.flat.call(w,a-1),p.push.apply(p,w)):p.push(w)}),p}},"es9","es5"),En.owns=function(i,a){return Object.prototype.hasOwnProperty.call(i,a)},En.polyfill("Object.entries",function(i){return i||function(a){var p=[],w;for(w in a)En.owns(a,w)&&p.push([w,a[w]]);return p}},"es8","es3"),En.polyfill("Object.values",function(i){return i||function(a){var p=[],w;for(w in a)En.owns(a,w)&&p.push(a[w]);return p}},"es8","es3");var _i=Object.create(null),Ms={typeMap:_i},uu=Object.create(null),Dl="default",Ut=class{constructor(i){this.name=i}toString(){return this.name}};Ut.CONNECTION_CHECKER=new Ut("connectionChecker"),Ut.CONNECTION_PREVIEWER=new Ut("connectionPreviewer"),Ut.CURSOR=new Ut("cursor"),Ut.EVENT=new Ut("event"),Ut.FIELD=new Ut("field"),Ut.INPUT=new Ut("input"),Ut.RENDERER=new Ut("renderer"),Ut.TOOLBOX=new Ut("toolbox"),Ut.THEME=new Ut("theme"),Ut.TOOLBOX_ITEM=new Ut("toolboxItem"),Ut.FLYOUTS_VERTICAL_TOOLBOX=new Ut("flyoutsVerticalToolbox"),Ut.FLYOUTS_HORIZONTAL_TOOLBOX=new Ut("flyoutsHorizontalToolbox"),Ut.METRICS_MANAGER=new Ut("metricsManager"),Ut.BLOCK_DRAGGER=new Ut("blockDragger"),Ut.SERIALIZER=new Ut("serializer"),Ut.ICON=new Ut("icon"),Ut.PASTER=new Ut("paster");var ml={DEFAULT:Dl,TEST_ONLY:Ms};ml.Type=Ut,ml.getAllItems=g,ml.getClass=h,ml.getClassFromOptions=y,ml.getObject=f,ml.hasItem=u,ml.register=r,ml.unregister=o;var Kr=Object.create(null),nc=Object.create(null),Jh,Qc=null,ai,Ki=[],Zc={defineBlocksWithJsonArrayInternal:oe},yo={TEST_ONLY:Zc};yo.createBlockDefinitionsFromJsonArray=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,yo.defineBlocks=t.defineBlocks$$module$build$src$core$common,yo.defineBlocksWithJsonArray=Z,yo.draggingConnections=Ki,yo.getAllWorkspaces=S,yo.getBlockTypeCounts=V,yo.getMainWorkspace=A,yo.getParentContainer=D,yo.getSelected=O,yo.getWorkspaceById=b,yo.registerWorkspace=C,yo.setMainWorkspace=k,yo.setParentContainer=U,yo.setSelected=P,yo.svgResize=H,yo.unregisterWorkpace=M;var gl="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",eh={genUid:()=>{const i=gl.length,a=[];for(let p=0;20>p;p++)a[p]=gl.charAt(Math.random()*i);return a.join("")}},Sc=0,rc={TEST_ONLY:eh};rc.genUid=q,rc.getNextUniqueId=ue;var Oo,to,sa,Mh,bo,Ru,th,wc,jo,To,ic,Pl,So,Bl,Ka,cu,ii,cs,qh,yd,Ta,Sa,Qh,Ec,Gf,x;Oo="",to=!0,sa=0,t.CREATE$$module$build$src$core$events$utils="create",t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils="delete",t.DELETE$$module$build$src$core$events$utils,t.CHANGE$$module$build$src$core$events$utils="change",t.CHANGE$$module$build$src$core$events$utils,Mh="block_field_intermediate_change",t.MOVE$$module$build$src$core$events$utils="move",t.MOVE$$module$build$src$core$events$utils,bo="var_create",Ru="var_delete",th="var_rename",wc="ui",jo="drag",To="selected",ic="click",Pl="marker_move",So="bubble_open",Bl="trashcan_open",Ka="toolbox_item_select",cu="theme_change",ii="viewport_change",cs="comment_create",qh="comment_delete",yd="comment_change",Ta="comment_move",Sa="finished_loading",Qh=[t.CREATE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,cs,Ta],Ec=[],Gf={FIRE_QUEUE:Ec,fireNow:$e,fireInternal:ge,setGroupInternal:fe},x={BLOCK_CHANGE:t.CHANGE$$module$build$src$core$events$utils,BLOCK_CREATE:t.CREATE$$module$build$src$core$events$utils,BLOCK_DELETE:t.DELETE$$module$build$src$core$events$utils,BLOCK_DRAG:jo,BLOCK_FIELD_INTERMEDIATE_CHANGE:Mh,BLOCK_MOVE:t.MOVE$$module$build$src$core$events$utils,BUBBLE_OPEN:So,BUMP_EVENTS:Qh,CHANGE:t.CHANGE$$module$build$src$core$events$utils,CLICK:ic,COMMENT_CHANGE:yd,COMMENT_CREATE:cs,COMMENT_DELETE:qh,COMMENT_MOVE:Ta,CREATE:t.CREATE$$module$build$src$core$events$utils,DELETE:t.DELETE$$module$build$src$core$events$utils,FINISHED_LOADING:Sa,MARKER_MOVE:Pl,MOVE:t.MOVE$$module$build$src$core$events$utils,SELECTED:To,TEST_ONLY:Gf,THEME_CHANGE:cu,TOOLBOX_ITEM_SELECT:Ka,TRASHCAN_OPEN:Bl,UI:wc,VAR_CREATE:bo,VAR_DELETE:Ru,VAR_RENAME:th,VIEWPORT_CHANGE:ii},x.clearPendingUndo=ie,x.disable=t.disable$$module$build$src$core$events$utils,x.disableOrphans=qe,x.enable=t.enable$$module$build$src$core$events$utils,x.filter=K,x.fire=ce,x.fromJson=Ue,x.get=ke,x.getDescendantIds=Se,x.getGroup=t.getGroup$$module$build$src$core$events$utils,x.getRecordUndo=le,x.isEnabled=se,x.setGroup=t.setGroup$$module$build$src$core$events$utils,x.setRecordUndo=ae;var d=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=t.getGroup$$module$build$src$core$events$utils(),this.recordUndo=le()}toJson(){return{type:this.type,group:this.group}}static fromJson(i,a,p){return p.isBlank=!1,p.group=i.group||"",p.workspaceId=a.id,p}isNull(){return!1}run(i){}getEventWorkspace_(){let i;if(this.workspaceId&&(i=b(this.workspaceId)),!i)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return i}},v=class extends d{constructor(i){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof i>"u",this.workspaceId=i||""}},$=class extends v{constructor(i,a,p){a=i?i.workspace.id:a,a===null&&(a=void 0),super(a),this.type=ic,this.blockId=i?i.id:void 0,this.targetType=p}toJson(){const i=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return i.targetType=this.targetType,i.blockId=this.blockId,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new $),a.targetType=i.targetType,a.blockId=i.blockId,a}},I;(function(i){i.BLOCK="block",i.WORKSPACE="workspace",i.ZOOM_CONTROLS="zoom_controls"})(I||(I={})),r(Ut.EVENT,ic,$);var B=750,W="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),pe=null,Oe={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},tt=0,xt={TOUCH_ENABLED:W,TOUCH_MAP:Oe};xt.checkTouchIdentifier=Ge,xt.clearTouchIdentifier=et,xt.getTouchIdentifierFromEvent=at,xt.longStart=we,xt.longStop=Ze,xt.shouldHandleEvent=ft;var Zt,cn,Tn,Sn,gn,Ur,Et,Ce,Ne,ot;(function(i){function a(w){return p.indexOf(w.toUpperCase())!==-1}Zt=i;const p=Zt.toUpperCase();cn=a("JavaFX"),Tn=a("WebKit"),Sn=a("Gecko")&&!Tn,gn=a("Android"),i=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Ur=a("iPad")||a("Macintosh")&&0<i,Et=a("iPhone")&&!Ur,Ce=a("Macintosh"),Ne=Ur||gn&&!a("Mobile")||a("Silk"),ot=!Ne&&(Et||gn)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var jt=Zt,on=cn,xn=Sn,On=gn,zn=Ur,fr=Et,Rr=Ce,Fl=ot,pf={ANDROID:On,GECKO:xn,IPAD:zn,IPHONE:fr,JavaFx:on,MAC:Rr,MOBILE:Fl,raw:jt},Ah=40,ln=125,nh={};nh.bind=He,nh.conditionalBind=Ie,nh.getScrollDeltaPixels=vt,nh.isRightButton=It,nh.isTargetInput=st,nh.mouseToSvg=kt,nh.unbind=it;var tm={};tm.removeElem=Mt;var wa=class{constructor(i){this.name_=i}toString(){return this.name_}};wa.POSITIONABLE=new wa("positionable"),wa.DRAG_TARGET=new wa("drag_target"),wa.DELETE_AREA=new wa("delete_area"),wa.AUTOHIDEABLE=new wa("autohideable");var vl=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(i,a){const p=i.component.id;if(!a&&this.componentData.has(p)){var w;throw Error('Plugin "'+p+'" with capabilities "'+((w=this.componentData.get(p))==null?void 0:w.capabilities)+'" already added.')}for(this.componentData.set(p,i),a=[],w=0;w<i.capabilities.length;w++){const L=String(i.capabilities[w]).toLowerCase();if(a.push(L),this.capabilityToComponentIds.has(L)){let j;(j=this.capabilityToComponentIds.get(L))==null||j.push(p)}else this.capabilityToComponentIds.set(L,[p])}this.componentData.get(p).capabilities=a}removeComponent(i){const a=this.componentData.get(i);if(a){for(let p=0;p<a.capabilities.length;p++){const w=String(a.capabilities[p]).toLowerCase();Mt(this.capabilityToComponentIds.get(w),i)}this.componentData.delete(i)}}addCapability(i,a){if(!this.getComponent(i))throw Error('Cannot add capability, "'+a+'". Plugin "'+i+'" has not been added to the ComponentManager');if(this.hasCapability(i,a))console.warn('Plugin "'+i+'already has capability "'+a+'"');else{a=`${a}`.toLowerCase();var p;(p=this.componentData.get(i))==null||p.capabilities.push(a);var w;(w=this.capabilityToComponentIds.get(a))==null||w.push(i)}}removeCapability(i,a){if(!this.getComponent(i))throw Error('Cannot remove capability, "'+a+'". Plugin "'+i+'" has not been added to the ComponentManager');this.hasCapability(i,a)?(a=`${a}`.toLowerCase(),Mt(this.componentData.get(i).capabilities,a),Mt(this.capabilityToComponentIds.get(a),i)):console.warn('Plugin "'+i+`doesn't have capability "`+a+'" to remove')}hasCapability(i,a){return a=`${a}`.toLowerCase(),this.componentData.has(i)&&this.componentData.get(i).capabilities.indexOf(a)!==-1}getComponent(i){let a;return(a=this.componentData.get(i))==null?void 0:a.component}getComponents(i,a){if(i=`${i}`.toLowerCase(),i=this.capabilityToComponentIds.get(i),!i)return[];const p=[];if(a){const w=[];i.forEach(L=>{w.push(this.componentData.get(L))}),w.sort(function(L,j){return L.weight-j.weight}),w.forEach(function(L){p.push(L.component)})}else i.forEach(w=>{p.push(this.componentData.get(w).component)});return p}};vl.Capability=wa;var mf=!1,Zh=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyBlockDragSurface {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}
`,hs={};hs.inject=gt,hs.register=Ct;var vn=class{constructor(i,a){this.x=i,this.y=a}clone(){return new vn(this.x,this.y)}scale(i){return this.x*=i,this.y*=i,this}translate(i,a){return this.x+=i,this.y+=a,this}static equals(i,a){return i===a?!0:i&&a?i.x===a.x&&i.y===a.y:!1}static distance(i,a){const p=i.x-a.x;return i=i.y-a.y,Math.sqrt(p*p+i*i)}static magnitude(i){return Math.sqrt(i.x*i.x+i.y*i.y)}static difference(i,a){return new vn(i.x-a.x,i.y-a.y)}static sum(i,a){return new vn(i.x+a.x,i.y+a.y)}},_0=new Set,Rg={};Rg.warn=Ee;var qm="http://www.w3.org/2000/svg",xc="http://www.w3.org/1999/xhtml",no="http://www.w3.org/1999/xlink",Wf;(function(i){i[i.ELEMENT_NODE=1]="ELEMENT_NODE",i[i.TEXT_NODE=3]="TEXT_NODE",i[i.COMMENT_NODE=8]="COMMENT_NODE"})(Wf||(Wf={}));var Dd=null,Ja=0,Wr=null,Ea={HTML_NS:xc};Ea.NodeType=Wf,Ea.SVG_NS=qm,Ea.XLINK_NS=no,Ea.addClass=Be,Ea.containsNode=Le,Ea.createSvgElement=re,Ea.getFastTextWidth=Fe,Ea.getFastTextWidthWithSizeString=bt,Ea.getTextWidth=Re,Ea.hasClass=wt,Ea.insertAfter=Qe,Ea.measureFontMetrics=ze,Ea.removeClass=yt,Ea.removeClasses=mt,Ea.removeNode=Ke,Ea.setCssTransform=Q,Ea.startTextWidthCache=te,Ea.stopTextWidthCache=me;var Ye=class{constructor(i){this.tagName=i}toString(){return this.tagName}};Ye.ANIMATE=new Ye("animate"),Ye.CIRCLE=new Ye("circle"),Ye.CLIPPATH=new Ye("clipPath"),Ye.DEFS=new Ye("defs"),Ye.FECOMPOSITE=new Ye("feComposite"),Ye.FECOMPONENTTRANSFER=new Ye("feComponentTransfer"),Ye.FEFLOOD=new Ye("feFlood"),Ye.FEFUNCA=new Ye("feFuncA"),Ye.FEGAUSSIANBLUR=new Ye("feGaussianBlur"),Ye.FEPOINTLIGHT=new Ye("fePointLight"),Ye.FESPECULARLIGHTING=new Ye("feSpecularLighting"),Ye.FILTER=new Ye("filter"),Ye.FOREIGNOBJECT=new Ye("foreignObject"),Ye.G=new Ye("g"),Ye.IMAGE=new Ye("image"),Ye.LINE=new Ye("line"),Ye.PATH=new Ye("path"),Ye.PATTERN=new Ye("pattern"),Ye.POLYGON=new Ye("polygon"),Ye.RECT=new Ye("rect"),Ye.SVG=new Ye("svg"),Ye.TEXT=new Ye("text"),Ye.TSPAN=new Ye("tspan");var Li=class{constructor(i,a,p,w){this.top=i,this.bottom=a,this.left=p,this.right=w}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(i,a){return i>=this.left&&i<=this.right&&a>=this.top&&a<=this.bottom}intersects(i){return!(this.left>i.right||this.right<i.left||this.top>i.bottom||this.bottom<i.top)}},ro=class{constructor(i,a){this.width=i,this.height=a}static equals(i,a){return i===a?!0:i&&a?i.width===a.width&&i.height===a.height:!1}},Cv={getSizeInternal:lt},$c={TEST_ONLY:Cv};$c.getBorderBox=cr,$c.getComputedStyle=Wt,$c.getContainerOffsetToScrollInto=Mr,$c.getPageOffset=bn,$c.getSize=Pt,$c.getViewportPageOffset=ar,$c.scrollIntoContainerView=oi;var $p=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,nm=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,Mv={XY_REGEX:$p,XY_STYLE_REGEX:nm},Cp={TEST_ONLY:Mv};Cp.getDocumentScroll=je,Cp.getInjectionDivXY=ne,Cp.getRelativeXY=_r,Cp.getViewportBBox=Te,Cp.screenToWsCoordinates=ct,Cp.wsToScreenCoordinates=Ht;var xa=class{constructor(i,a,p,w,L){this.workspace=i,this.horizontal=a,this.oldHostMetrics=null,this.ratio=1,this.origin=new vn(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new vn(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=p||!1,this.margin=L!==void 0?L:xa.DEFAULT_SCROLLBAR_MARGIN,i="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),w&&(i+=" "+w),this.outerSvg=re(Ye.SVG,{class:i}),w=re(Ye.G,{},this.outerSvg),this.svgBackground=re(Ye.RECT,{class:"blocklyScrollbarBackground"},w),i=Math.floor((xa.scrollbarThickness-5)/2),this.svgHandle=re(Ye.RECT,{class:"blocklyScrollbarHandle",rx:i,ry:i},w),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),Qe(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),a?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Ie(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=Ie(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const i=xa.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(i)),this.outerSvg.setAttribute("height",String(i)),this.svgHandle.setAttribute("height",String(i-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(i)),this.outerSvg.setAttribute("width",String(i)),this.svgHandle.setAttribute("width",String(i-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),it(this.onMouseDownBarWrapper_),it(this.onMouseDownHandleWrapper_),Ke(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(i){return i=0>=i||isNaN(i)?0:Math.min(i,this.scrollbarLength)}setHandleLength(i){this.handleLength=i,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(i){return i=0>=i||isNaN(i)?0:Math.min(i,this.scrollbarLength-this.handleLength)}setHandlePosition(i){this.handlePosition=i,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(i){this.scrollbarLength=i,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(i,a){this.position.x=i,this.position.y=a,Q(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(i){!i&&(i=this.workspace.getMetrics(),!i)||this.oldHostMetrics&&xa.metricsAreEquivalent(i,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(i):this.resizeVertical(i),this.oldHostMetrics=i,this.updateMetrics())}requiresViewResize(i){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==i.viewWidth||this.oldHostMetrics.viewHeight!==i.viewHeight||this.oldHostMetrics.absoluteLeft!==i.absoluteLeft||this.oldHostMetrics.absoluteTop!==i.absoluteTop:!0}resizeHorizontal(i){this.requiresViewResize(i)?this.resizeViewHorizontal(i):this.resizeContentHorizontal(i)}resizeViewHorizontal(i){var a=i.viewWidth-2*this.margin;this.pair&&(a-=xa.scrollbarThickness),this.setScrollbarLength(Math.max(0,a)),a=i.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(a+=xa.scrollbarThickness),this.setPosition(a,i.absoluteTop+i.viewHeight-xa.scrollbarThickness-this.margin),this.resizeContentHorizontal(i)}resizeContentHorizontal(i){if(i.viewWidth>=i.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var a=this.scrollbarLength*i.viewWidth/i.scrollWidth;a=this.constrainHandleLength(a),this.setHandleLength(a),a=i.scrollWidth-i.viewWidth;var p=this.scrollbarLength-this.handleLength;i=(i.viewLeft-i.scrollLeft)/a*p,i=this.constrainHandlePosition(i),this.setHandlePosition(i),this.ratio=p/a}}resizeVertical(i){this.requiresViewResize(i)?this.resizeViewVertical(i):this.resizeContentVertical(i)}resizeViewVertical(i){let a=i.viewHeight-2*this.margin;this.pair&&(a-=xa.scrollbarThickness),this.setScrollbarLength(Math.max(0,a)),this.setPosition(this.workspace.RTL?i.absoluteLeft+this.margin:i.absoluteLeft+i.viewWidth-xa.scrollbarThickness-this.margin,i.absoluteTop+this.margin),this.resizeContentVertical(i)}resizeContentVertical(i){if(i.viewHeight>=i.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var a=this.scrollbarLength*i.viewHeight/i.scrollHeight;a=this.constrainHandleLength(a),this.setHandleLength(a),a=i.scrollHeight-i.viewHeight;var p=this.scrollbarLength-this.handleLength;i=(i.viewTop-i.scrollTop)/a*p,i=this.constrainHandlePosition(i),this.setHandlePosition(i),this.ratio=p/a}}isVisible(){return this.isHandleVisible}setContainerVisible(i){const a=i!==this.containerVisible;this.containerVisible=i,a&&this.updateDisplay_()}setVisible(i){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(i)}setVisibleInternal(i){const a=i!==this.isVisible();this.isHandleVisible=i,a&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(i){if(this.workspace.markFocused(),et(),this.cleanUp(),It(i))i.stopPropagation();else{var a=kt(i,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());a=this.horizontal?a.x:a.y;var p=ne(this.svgHandle);p=this.horizontal?p.x:p.y;var w=this.handlePosition,L=.95*this.handleLength;a<=p?w-=L:a>=p+this.handleLength&&(w+=L),this.setHandlePosition(this.constrainHandlePosition(w)),this.updateMetrics(),i.stopPropagation(),i.preventDefault()}}onMouseDownHandle(i){this.workspace.markFocused(),this.cleanUp(),It(i)?i.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?i.clientX:i.clientY,this.onMouseUpWrapper_=Ie(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=Ie(document,"pointermove",this,this.onMouseMoveHandle),i.stopPropagation(),i.preventDefault())}onMouseMoveHandle(i){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?i.clientX:i.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){et(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(it(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(it(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let i=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(i)&&(i=0),i}updateMetrics(){const i=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:i}):this.workspace.setMetrics({y:i})}set(i,a){this.setHandlePosition(this.constrainHandlePosition(i*this.ratio)),(a||a===void 0)&&this.updateMetrics()}setOrigin(i,a){this.origin=new vn(i,a)}static metricsAreEquivalent(i,a){return i.viewWidth===a.viewWidth&&i.viewHeight===a.viewHeight&&i.viewLeft===a.viewLeft&&i.viewTop===a.viewTop&&i.absoluteTop===a.absoluteTop&&i.absoluteLeft===a.absoluteLeft&&i.scrollWidth===a.scrollWidth&&i.scrollHeight===a.scrollHeight&&i.scrollLeft===a.scrollLeft&&i.scrollTop===a.scrollTop}};xa.scrollbarThickness=W?25:15,xa.DEFAULT_SCROLLBAR_MARGIN=.5;var kg={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},rm={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:Mp,DOMParser:_l,XMLSerializer:hu}=globalThis;_l&&(kg=new _l),hu&&(rm=new hu);var Pd="https://developers.google.com/blockly/xml",gf=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,Bd={NAME_SPACE:Pd};Bd.createElement=t.createElement$$module$build$src$core$utils$xml,Bd.createTextNode=t.createTextNode$$module$build$src$core$utils$xml,Bd.domToText=kn,Bd.injectDependencies=nn,Bd.textToDom=t.textToDom$$module$build$src$core$utils$xml;var rh="categoryToolbox",Og="flyoutToolbox",mr;(function(i){i[i.TOP=0]="TOP",i[i.BOTTOM=1]="BOTTOM",i[i.LEFT=2]="LEFT",i[i.RIGHT=3]="RIGHT"})(mr||(mr={}));var y0={hasCategoriesInternal:Wn},wo={};wo.Position=mr,wo.TEST_ONLY=y0,wo.convertFlyoutDefToJsonArray=St,wo.convertToolboxDefToJson=_t,wo.hasCategories=Xt,wo.isCategoryCollapsible=ir,wo.parseToolboxTree=Lr;var qa;(function(i){i[i.TOP=0]="TOP",i[i.BOTTOM=1]="BOTTOM"})(qa||(qa={}));var im;(function(i){i[i.LEFT=0]="LEFT",i[i.RIGHT=1]="RIGHT"})(im||(im={}));var Fd;(function(i){i[i.UP=0]="UP",i[i.DOWN=1]="DOWN"})(Fd||(Fd={}));var sm={};sm.bumpDirection=Fd,sm.bumpPositionRect=La,sm.getCornerOppositeToolbox=Ss,sm.getStartPositionRect=Ar,sm.horizontalPosition=im,sm.verticalPosition=qa;var ku={width:96,height:124,url:"sprites.png"},b0=class{constructor(i){this.workspace=i,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=re(Ye.G,{});const i=String(Math.random()).substring(2);return this.createZoomOutSvg(i),this.createZoomInSvg(i),this.workspace.isMovable()&&this.createZoomResetSvg(i),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[vl.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&Ke(this.svgGroup);for(const i of this.boundEvents)it(i);this.boundEvents.length=0}getBoundingRectangle(){let i=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(i+=this.LARGE_SPACING+this.HEIGHT),new Li(this.top,this.top+i,this.left,this.left+this.WIDTH)}position(i,a){if(this.initialized){var p=Ss(this.workspace,i),w=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(w+=this.LARGE_SPACING+this.HEIGHT),i=Ar(p,new ro(this.WIDTH,w),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,i,this.workspace),p=p.vertical,a=La(i,this.MARGIN_VERTICAL,p===qa.TOP?Fd.DOWN:Fd.UP,a),p===qa.TOP){var L=this.SMALL_SPACING+this.HEIGHT,j;(j=this.zoomInGroup)==null||j.setAttribute("transform","translate(0, "+L+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(L+this.LARGE_SPACING+this.HEIGHT)+")")}else{j=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let We;(We=this.zoomInGroup)==null||We.setAttribute("transform","translate(0, "+j+")"),j=j+this.SMALL_SPACING+this.HEIGHT,(L=this.zoomOutGroup)==null||L.setAttribute("transform","translate(0, "+j+")")}this.top=a.top,this.left=a.left;var _e;(_e=this.svgGroup)==null||_e.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(i){this.zoomOutGroup=re(Ye.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const a=re(Ye.CLIPPATH,{id:"blocklyZoomoutClipPath"+i},this.zoomOutGroup);re(Ye.RECT,{width:32,height:32},a),re(Ye.IMAGE,{width:ku.width,height:ku.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+i+")"},this.zoomOutGroup).setAttributeNS(no,"xlink:href",this.workspace.options.pathToMedia+ku.url),this.boundEvents.push(Ie(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(i){this.zoomInGroup=re(Ye.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const a=re(Ye.CLIPPATH,{id:"blocklyZoominClipPath"+i},this.zoomInGroup);re(Ye.RECT,{width:32,height:32},a),re(Ye.IMAGE,{width:ku.width,height:ku.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+i+")"},this.zoomInGroup).setAttributeNS(no,"xlink:href",this.workspace.options.pathToMedia+ku.url),this.boundEvents.push(Ie(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(i,a){this.workspace.markFocused(),this.workspace.zoomCenter(i),this.fireZoomEvent(),et(),a.stopPropagation(),a.preventDefault()}createZoomResetSvg(i){this.zoomResetGroup=re(Ye.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const a=re(Ye.CLIPPATH,{id:"blocklyZoomresetClipPath"+i},this.zoomResetGroup);re(Ye.RECT,{width:32,height:32},a),re(Ye.IMAGE,{width:ku.width,height:ku.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+i+")"},this.zoomResetGroup).setAttributeNS(no,"xlink:href",this.workspace.options.pathToMedia+ku.url),this.boundEvents.push(Ie(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(i){this.workspace.markFocused();const a=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(a),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),et(),i.stopPropagation(),i.preventDefault()}fireZoomEvent(){const i=new(ke(ic))(null,this.workspace.id,"zoom_controls");ce(i)}};Ct(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var Yo=class{constructor(i){this.name=i}toString(){return this.name}equals(i){return this.name===i.toString()}};Yo.MUTATOR=new Yo("mutator"),Yo.WARNING=new Yo("warning"),Yo.COMMENT=new Yo("comment"),function(i){i[i.VALUE=1]="VALUE",i[i.STATEMENT=3]="STATEMENT",i[i.DUMMY=5]="DUMMY",i[i.CUSTOM=6]="CUSTOM",i[i.END_ROW=7]="END_ROW"}(t.inputTypes$$module$build$src$core$inputs$input_types||(t.inputTypes$$module$build$src$core$inputs$input_types={})),t.inputTypes$$module$build$src$core$inputs$input_types;var ns=function(i,a){window.alert(i),a&&a()},du=function(i,a){a(window.confirm(i))},yl=function(i,a,p){p(window.prompt(i,a))},Ou={confirmInternal:Dr},fu={TEST_ONLY:Ou};fu.alert=Mo,fu.confirm=rn,fu.prompt=Na,fu.setAlert=Xl,fu.setConfirm=tl,fu.setPrompt=zs;var Ap,zl;t.Msg$$module$build$src$core$msg=Object.create(null),Ap=function(i){Object.keys(i).forEach(function(a){t.Msg$$module$build$src$core$msg[a]=i[a]})},zl={Msg:t.Msg$$module$build$src$core$msg,setLocale:Ap};var zd=class extends d{constructor(i){super(),this.isBlank=typeof i>"u",i&&(this.varId=i.getId(),this.workspaceId=i.workspace.id)}toJson(){const i=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return i.varId=this.varId,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new zd),a.varId=i.varId,a}},Ud=class extends zd{constructor(i){super(i),this.type=bo,i&&(this.varType=i.type,this.varName=i.name)}toJson(){const i=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return i.varType=this.varType,i.varName=this.varName,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Ud),a.varType=i.varType,a.varName=i.varName,a}run(i){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");i?a.createVariable(this.varName,this.varType,this.varId):a.deleteVariableById(this.varId)}};r(Ut.EVENT,bo,Ud);var vf=class{constructor(i,a,p,w){this.workspace=i,this.name=a,this.type=p||"",this.id_=w||q()}getId(){return this.id_}static compareByName(i,a){return i.name.localeCompare(a.name,void 0,{sensitivity:"base"})}},Lg="VARIABLE",om="ijkmnopqrstuvwxyzabcdefgh",ih={generateUniqueNameInternal:Sr},bl={CATEGORY_NAME:Lg,TEST_ONLY:ih,VAR_LETTER_OPTIONS:om};bl.allDeveloperVariables=t.allDeveloperVariables$$module$build$src$core$variables,bl.allUsedVarModels=t.allUsedVarModels$$module$build$src$core$variables,bl.createVariableButtonHandler=ws,bl.flyoutCategory=In,bl.flyoutCategoryBlocks=Nr,bl.generateUniqueName=jr,bl.generateUniqueNameFromOptions=Bi,bl.generateVariableFieldDom=qs,bl.getAddedVariables=Kl,bl.getOrCreateVariablePackage=t.getOrCreateVariablePackage$$module$build$src$core$variables,bl.getVariable=t.getVariable$$module$build$src$core$variables,bl.nameUsedWithAnyType=nl,bl.nameUsedWithConflictingParam=Da,bl.promptName=fi,bl.renameVariable=t.renameVariable$$module$build$src$core$variables;var sh=class{constructor(i,a,p,w,L){this.workspace=i,this.editable=this.movable=this.deletable=!0,this.disposed_=!1,this.isComment=!0,this.id=L&&!i.getCommentById(L)?L:q(),i.addTopComment(this),this.xy_=new vn(0,0),this.height_=p,this.width_=w,this.RTL=i.RTL,this.content_=a,sh.fireCreateEvent(this)}dispose(){this.disposed_||(se()&&ce(new(ke(qh))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(i){this.height_=i}getWidth(){return this.width_}setWidth(i){this.width_=i}getRelativeToSurfaceXY(){return new vn(this.xy_.x,this.xy_.y)}moveBy(i,a){const p=new(ke(Ta))(this);this.xy_.translate(i,a),p.recordNew(),ce(p)}isDeletable(){return this.deletable&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(i){this.deletable=i}isMovable(){return this.movable&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(i){this.movable=i}isEditable(){return this.editable&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(i){this.editable=i}getContent(){return this.content_}setContent(i){this.content_!==i&&(ce(new(ke(yd))(this,this.content_,i)),this.content_=i)}toXmlWithXY(i){return i=this.toXml(i),i.setAttribute("x",String(Math.round(this.xy_.x))),i.setAttribute("y",String(Math.round(this.xy_.y))),i.setAttribute("h",String(this.height_)),i.setAttribute("w",String(this.width_)),i}toXml(i){const a=t.createElement$$module$build$src$core$utils$xml("comment");return i||(a.id=this.id),a.textContent=this.getContent(),a}static fireCreateEvent(i){if(se()){const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0);try{ce(new(ke(cs))(i))}finally{t.setGroup$$module$build$src$core$events$utils(a)}}}static fromXml(i,a){var p=sh.parseAttributes(i);return a=new sh(a,p.content,p.h,p.w,p.id),p=i.getAttribute("x"),i=i.getAttribute("y"),p=p?parseInt(p,10):NaN,i=i?parseInt(i,10):NaN,isNaN(p)||isNaN(i)||a.moveBy(p,i),sh.fireCreateEvent(a),a}static parseAttributes(i){const a=i.getAttribute("h"),p=i.getAttribute("w"),w=i.getAttribute("x"),L=i.getAttribute("y"),j=i.getAttribute("id");if(!j)throw Error("No ID present in XML comment definition.");let _e;return{id:j,h:a?parseInt(a):100,w:p?parseInt(p):100,x:w?parseInt(w):NaN,y:L?parseInt(L):NaN,content:(_e=i.textContent)!=null?_e:""}}},Hd=class extends v{constructor(i,a,p){super(p),this.type=To,this.oldElementId=i??void 0,this.newElementId=a??void 0}toJson(){const i=super.toJson();return i.oldElementId=this.oldElementId,i.newElementId=this.newElementId,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Hd),a.oldElementId=i.oldElementId,a.newElementId=i.newElementId,a}};r(Ut.EVENT,To,Hd);var Qm={};Qm.register=vu,Qm.unregister=gh;var Zm=class{paste(i,a,p){const w=i.commentState;if(p)w.setAttribute("x",`${p.x}`),w.setAttribute("y",`${p.y}`);else{var L;p=parseInt((L=w.getAttribute("x"))!=null?L:"0")+50;let j;L=parseInt((j=w.getAttribute("y"))!=null?j:"0")+50,w.setAttribute("x",`${p}`),w.setAttribute("y",`${L}`)}return Ul.fromXmlRendered(i.commentState,a)}};Zm.TYPE="workspace-comment",vu(Zm.TYPE,new Zm);var Eo=8,am=3,Ls=2,Ul=class extends sh{constructor(i,a,p,w,L){super(i,a,p,w,L),this.onMouseMoveWrapper=this.onMouseUpWrapper=null,this.eventsInit=!1,this.deleteIconBorder=this.deleteGroup=this.resizeGroup=this.foreignObject=this.svgHandleTarget=this.svgRectTarget=this.textarea=null,this.rendered=this.autoLayout=this.focused=!1,this.svgGroup=re(Ye.G,{class:"blocklyComment"}),this.workspace=i,this.svgRect_=re(Ye.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:am,ry:am}),this.svgGroup.appendChild(this.svgRect_),this.render()}dispose(){this.disposed_||(O()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),se()&&ce(new(ke(qh))(this)),Ke(this.svgGroup),t.disable$$module$build$src$core$events$utils(),super.dispose(),t.enable$$module$build$src$core$events$utils())}initSvg(i){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit||(Ie(this.svgRectTarget,"pointerdown",this,this.pathMouseDown),Ie(this.svgHandleTarget,"pointerdown",this,this.pathMouseDown)),this.eventsInit=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!i&&this.textarea&&this.textarea.select()}pathMouseDown(i){const a=this.workspace.getGesture(i);a&&a.handleBubbleStart(i,this)}showContextMenu(i){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(O()!==this){var i=null;if(O()){i=O().id,t.disable$$module$build$src$core$events$utils();try{O().unselect()}finally{t.enable$$module$build$src$core$events$utils()}}i=new(ke(To))(i,this.id,this.workspace.id),ce(i),P(this),this.addSelect()}}unselect(){if(O()===this){var i=new(ke(To))(this.id,null,this.workspace.id);ce(i),P(null),this.removeSelect(),this.blurFocus()}}addSelect(){Be(this.svgGroup,"blocklySelected"),this.setFocus()}removeSelect(){Be(this.svgGroup,"blocklySelected"),this.blurFocus()}addFocus(){Be(this.svgGroup,"blocklyFocused")}removeFocus(){yt(this.svgGroup,"blocklyFocused")}getRelativeToSurfaceXY(){const i=this.workspace.getLayerManager();if(!i)throw Error("Cannot calculate position because the workspace has not been appended");let a=0,p=0,w=this.getSvgRoot();if(w)do{const L=_r(w);a+=L.x,p+=L.y,w=w.parentNode}while(w&&!i.hasLayer(w)&&w!==null);return this.xy_=new vn(a,p)}moveBy(i,a){const p=new(ke(Ta))(this),w=this.getRelativeToSurfaceXY();this.translate(w.x+i,w.y+a),this.xy_=new vn(w.x+i,w.y+a),p.recordNew(),ce(p),this.workspace.resizeContents()}translate(i,a){this.xy_=new vn(i,a),this.getSvgRoot().setAttribute("transform","translate("+i+","+a+")")}moveDuringDrag(i){i=`translate(${i.x}, ${i.y})`,this.getSvgRoot().setAttribute("transform",i)}moveTo(i,a){this.translate(i,a)}clearTransformAttributes(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var i=this.getRelativeToSurfaceXY();const a=this.getHeightWidth(),p=i.y,w=i.y+a.height;let L;return this.RTL?(L=i.x-a.width,i=i.x):(L=i.x,i=i.x+a.width),new Li(p,w,L,i)}updateMovable(){this.isMovable()?Be(this.svgGroup,"blocklyDraggable"):yt(this.svgGroup,"blocklyDraggable")}setMovable(i){super.setMovable(i),this.updateMovable()}setEditable(i){super.setEditable(i),this.textarea&&(this.textarea.readOnly=!i)}setDragging(i){i?Be(this.getSvgRoot(),"blocklyDragging"):yt(this.getSvgRoot(),"blocklyDragging")}getSvgRoot(){return this.svgGroup}getContent(){return this.textarea?this.textarea.value:this.content_}setContent(i){super.setContent(i),this.textarea&&(this.textarea.value=i)}setDeleteStyle(i){i?Be(this.svgGroup,"blocklyDraggingDelete"):yt(this.svgGroup,"blocklyDraggingDelete")}setAutoLayout(i){}toXmlWithXY(i){let a=0;this.workspace.RTL&&(a=this.workspace.getWidth()),i=this.toXml(i);const p=this.getRelativeToSurfaceXY();return i.setAttribute("x",String(Math.round(this.workspace.RTL?a-p.x:p.x))),i.setAttribute("y",String(Math.round(p.y))),i.setAttribute("h",String(this.getHeight())),i.setAttribute("w",String(this.getWidth())),i}toCopyData(){return{paster:Zm.TYPE,commentState:this.toXmlWithXY()}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered){var i=this.getHeightWidth(),a=this.createEditor();this.svgGroup.appendChild(a),this.svgHandleTarget=re(Ye.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup.appendChild(this.svgHandleTarget),this.svgRectTarget=re(Ye.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:am,ry:am}),this.svgGroup.appendChild(this.svgRectTarget),this.addResizeDom(),this.isDeletable()&&this.addDeleteDom(),this.setSize(i.width,i.height),this.textarea.value=this.content_,this.rendered=!0,this.resizeGroup&&Ie(this.resizeGroup,"pointerdown",this,this.resizeMouseDown),this.isDeletable()&&(Ie(this.deleteGroup,"pointerdown",this,this.deleteMouseDown),Ie(this.deleteGroup,"pointerout",this,this.deleteMouseOut),Ie(this.deleteGroup,"pointerup",this,this.deleteMouseUp))}}createEditor(){this.foreignObject=re(Ye.FOREIGNOBJECT,{x:0,y:Ul.TOP_OFFSET,class:"blocklyCommentForeignObject"});const i=document.createElementNS(xc,"body");i.setAttribute("xmlns",xc),i.className="blocklyMinimalBody";const a=document.createElementNS(xc,"textarea");return a.className="blocklyCommentTextarea",a.setAttribute("dir",this.RTL?"RTL":"LTR"),a.readOnly=!this.isEditable(),i.appendChild(a),this.textarea=a,this.foreignObject.appendChild(i),Ie(a,"wheel",this,function(p){p.stopPropagation()}),Ie(a,"change",this,function(p){this.setContent(a.value)}),this.foreignObject}addResizeDom(){this.resizeGroup=re(Ye.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup),re(Ye.POLYGON,{points:`0,${Eo} ${Eo},${Eo} ${Eo},0`},this.resizeGroup),re(Ye.LINE,{class:"blocklyResizeLine",x1:Eo/3,y1:Eo-1,x2:Eo-1,y2:Eo/3},this.resizeGroup),re(Ye.LINE,{class:"blocklyResizeLine",x1:2*Eo/3,y1:Eo-1,x2:Eo-1,y2:2*Eo/3},this.resizeGroup)}addDeleteDom(){this.deleteGroup=re(Ye.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup),this.deleteIconBorder=re(Ye.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup),re(Ye.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup),re(Ye.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup)}resizeMouseDown(i){this.unbindDragEvents(),It(i)||(this.workspace.startDrag(i,new vn(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper=Ie(document,"pointerup",this,this.resizeMouseUp),this.onMouseMoveWrapper=Ie(document,"pointermove",this,this.resizeMouseMove),this.workspace.hideChaff()),i.stopPropagation()}deleteMouseDown(i){this.deleteIconBorder&&Be(this.deleteIconBorder,"blocklyDeleteIconHighlighted"),i.stopPropagation()}deleteMouseOut(i){this.deleteIconBorder&&yt(this.deleteIconBorder,"blocklyDeleteIconHighlighted")}deleteMouseUp(i){this.dispose(),i.stopPropagation()}unbindDragEvents(){this.onMouseUpWrapper&&(it(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onMouseMoveWrapper&&(it(this.onMouseMoveWrapper),this.onMouseMoveWrapper=null)}resizeMouseUp(i){et(),this.unbindDragEvents()}resizeMouseMove(i){this.autoLayout=!1,i=this.workspace.moveDrag(i),this.setSize(this.RTL?-i.x:i.x,i.y)}resizeComment(){const i=this.getHeightWidth(),a=Ul.TOP_OFFSET,p=2*Ls;let w;(w=this.foreignObject)==null||w.setAttribute("width",String(i.width));let L;if((L=this.foreignObject)==null||L.setAttribute("height",String(i.height-a)),this.RTL){let j;(j=this.foreignObject)==null||j.setAttribute("x",String(-i.width))}this.textarea&&(this.textarea.style.width=i.width-p+"px",this.textarea.style.height=i.height-p-a+"px")}setSize(i,a){i=Math.max(i,45),a=Math.max(a,20+Ul.TOP_OFFSET),this.width_=i,this.height_=a,this.svgRect_.setAttribute("width",`${i}`),this.svgRect_.setAttribute("height",`${a}`);let p;(p=this.svgRectTarget)==null||p.setAttribute("width",`${i}`);let w;(w=this.svgRectTarget)==null||w.setAttribute("height",`${a}`);let L;(L=this.svgHandleTarget)==null||L.setAttribute("width",`${i}`);let j;if((j=this.svgHandleTarget)==null||j.setAttribute("height",String(Ul.TOP_OFFSET)),this.RTL){this.svgRect_.setAttribute("transform","scale(-1 1)");let _e;(_e=this.svgRectTarget)==null||_e.setAttribute("transform","scale(-1 1)")}if(this.resizeGroup)if(this.RTL){this.resizeGroup.setAttribute("transform","translate("+(-i+Eo)+","+(a-Eo)+") scale(-1 1)");let _e;(_e=this.deleteGroup)==null||_e.setAttribute("transform","translate("+(-i+Eo)+","+-Eo+") scale(-1 1)")}else{this.resizeGroup.setAttribute("transform","translate("+(i-Eo)+","+(a-Eo)+")");let _e;(_e=this.deleteGroup)==null||_e.setAttribute("transform","translate("+(i-Eo)+","+-Eo+")")}this.resizeComment()}setFocus(){this.focused=!0,setTimeout(()=>{this.disposed_||(this.textarea.focus(),this.addFocus(),this.svgRectTarget&&Be(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&Be(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused=!1,setTimeout(()=>{this.disposed_||(this.textarea.blur(),this.removeFocus(),this.svgRectTarget&&yt(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&yt(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered(i,a,p){t.disable$$module$build$src$core$events$utils();let w;try{const L=sh.parseAttributes(i);if(w=new Ul(a,L.content,L.h,L.w,L.id),a.rendered&&(w.initSvg(!0),w.render()),!isNaN(L.x)&&!isNaN(L.y))if(a.RTL){const j=p||a.getWidth();w.moveBy(j-L.x,L.y)}else w.moveBy(L.x,L.y)}finally{t.enable$$module$build$src$core$events$utils()}return sh.fireCreateEvent(w),w}};Ul.DEFAULT_SIZE=100,Ul.TOP_OFFSET=10,Ct(`
.blocklyCommentForeignObject {
  position: relative;
  z-index: 0;
}

.blocklyCommentRect {
  fill: #E7DE8E;
  stroke: #bcA903;
  stroke-width: 1px;
}

.blocklyCommentTarget {
  fill: transparent;
  stroke: #bcA903;
}

.blocklyCommentTargetFocused {
  fill: none;
}

.blocklyCommentHandleTarget {
  fill: none;
}

.blocklyCommentHandleTargetFocused {
  fill: transparent;
}

.blocklyFocused>.blocklyCommentRect {
  fill: #B9B272;
  stroke: #B9B272;
}

.blocklySelected>.blocklyCommentTarget {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCommentDeleteIcon {
  cursor: pointer;
  fill: #000;
  display: none;
}

.blocklySelected > .blocklyCommentDeleteIcon {
  display: block;
}

.blocklyDeleteIconShape {
  fill: #000;
  stroke: #000;
  stroke-width: 1px;
}

.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
  stroke: #fc3;
}
`);var Ip=new Set,Ng=new WeakSet,Gd=null,eg=null,Cc=0,Wd={};Wd.finishQueuedRenders=Tr,Wd.queueRender=Qo,Wd.triggerQueuedRenders=$i;var oa={};oa.appendDomToWorkspace=Cd,oa.blockToDom=il,oa.blockToDomWithXY=Er,oa.clearWorkspaceAndLoadFromXml=sl,oa.deleteNext=ha,oa.domToBlock=t.domToBlock$$module$build$src$core$xml,oa.domToBlockInternal=lo,oa.domToPrettyText=vs,oa.domToText=Qi,oa.domToVariables=Uu,oa.domToWorkspace=t.domToWorkspace$$module$build$src$core$xml,oa.variablesToDom=wr,oa.workspaceToDom=Cl;var $a=class extends Error{},Av=class extends $a{constructor(i){super("Expected to find a 'type' property, defining the block type"),this.state=i}},lm=class extends $a{constructor(i,a,p){super(`The block ${a.toDevString()} is missing a(n) ${i}
connection`),this.block=a,this.state=p}},T0=class extends $a{constructor(i,a,p,w){super(`The block ${p.toDevString()} could not connect its
${a} to its parent, because: ${i}`),this.childBlock=p,this.childState=w}},L_=class extends $a{constructor(i){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=i}},Vf=class extends $a{constructor(i,a,p){super(`Cannot add an icon of type '${i}' to the block ${a.toDevString()}, because there is no icon registered with type '${i}'. Make sure that all of your icons have been registered.`),this.block=a,this.state=p}},Rp={};Rp.BadConnectionCheck=T0,Rp.DeserializationError=$a,Rp.MissingBlockType=Av,Rp.MissingConnection=lm,Rp.RealChildOfShadow=L_,Rp.UnregisteredIcon=Vf;var S0=100,kp=75,w0=50,um={BLOCKS:w0,PROCEDURES:kp,VARIABLES:S0},E0={};E0.register=Rs,E0.unregister=bi;var Iv=class{constructor(){this.priority=w0}save(i){const a=[];for(const p of i.getTopBlocks(!1))(i=Ci(p,{addCoordinates:!0,doFullSerialization:!1}))&&a.push(i);return a.length?{languageVersion:0,blocks:a}:null}load(i,a){i=i.blocks;for(const p of i)Vn(p,a,{recordUndo:le()})}clear(i){for(const a of i.getTopBlocks(!1))a.dispose(!1)}};Rs("blocks",new Iv);var cm={};cm.BlockSerializer=Iv,cm.append=Vn,cm.appendInternal=Ai,cm.save=Ci;var _f=class extends d{constructor(i){super(),this.isBlank=!i,i&&(this.blockId=i.id,this.workspaceId=i.workspace.id)}toJson(){const i=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return i.blockId=this.blockId,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new _f),a.blockId=i.blockId,a}},Rv=class extends _f{constructor(i){super(i),this.type=t.CREATE$$module$build$src$core$events$utils,i&&(i.isShadow()&&(this.recordUndo=!1),this.xml=Er(i),this.ids=Se(i),this.json=Ci(i,{addCoordinates:!0}))}toJson(){const i=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return i.xml=Qi(this.xml),i.ids=this.ids,i.json=this.json,this.recordUndo||(i.recordUndo=this.recordUndo),i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Rv),a.xml=t.textToDom$$module$build$src$core$utils$xml(i.xml),a.ids=i.ids,a.json=i.json,i.recordUndo!==void 0&&(a.recordUndo=i.recordUndo),a}run(i){const a=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!ob(a,this.ids))if(i)Vn(this.json,a);else for(i=0;i<this.ids.length;i++){const p=this.ids[i],w=a.getBlockById(p);w?w.dispose(!1):p===this.blockId&&console.warn("Can't uncreate non-existent block: "+p)}}},ob=function(i,a){return a.map(p=>i.getBlockById(p)).filter(p=>p&&p.isShadow()).length===a.length};r(Ut.EVENT,t.CREATE$$module$build$src$core$events$utils,Rv);var x0=class extends v{constructor(i,a){super(a),this.type=cu,this.themeName=i}toJson(){const i=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return i.themeName=this.themeName,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new x0),a.themeName=i.themeName,a}};r(Ut.EVENT,cu,x0);var $0=class extends v{constructor(i,a,p,w,L){super(w),this.type=ii,this.viewTop=i,this.viewLeft=a,this.scale=p,this.oldScale=L}toJson(){const i=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return i.viewTop=this.viewTop,i.viewLeft=this.viewLeft,i.scale=this.scale,i.oldScale=this.oldScale,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new $0),a.viewTop=i.viewTop,a.viewLeft=i.viewLeft,a.scale=i.scale,a.oldScale=i.oldScale,a}};r(Ut.EVENT,ii,$0);var jf;jf=28,t.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:jf,connectingSnapRadius:jf,currentConnectionPreference:8,bumpDelay:250},t.config$$module$build$src$core$config;var Un;(function(i){i[i.INPUT_VALUE=1]="INPUT_VALUE",i[i.OUTPUT_VALUE=2]="OUTPUT_VALUE",i[i.NEXT_STATEMENT=3]="NEXT_STATEMENT",i[i.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(Un||(Un={}));var oh=class{constructor(i){this.connectionChecker=i,this.connections=[]}addConnection(i,a){a=this.calculateIndexForYPos(a),this.connections.splice(a,0,i)}findIndexOfConnection(i,a){if(!this.connections.length)return-1;const p=this.calculateIndexForYPos(a);if(p>=this.connections.length)return-1;a=i.y;let w=p;for(;0<=w&&this.connections[w].y===a;){if(this.connections[w]===i)return w;w--}for(w=p;w<this.connections.length&&this.connections[w].y===a;){if(this.connections[w]===i)return w;w++}return-1}calculateIndexForYPos(i){if(!this.connections.length)return 0;let a=0,p=this.connections.length;for(;a<p;){const w=Math.floor((a+p)/2);if(this.connections[w].y<i)a=w+1;else if(this.connections[w].y>i)p=w;else{a=w;break}}return a}removeConnection(i,a){if(i=this.findIndexOfConnection(i,a),i===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(i,1)}getNeighbours(i,a){function p(jn){const Tl=L-w[jn].x,Za=j-w[jn].y;return Math.sqrt(Tl*Tl+Za*Za)<=a&&Jt.push(w[jn]),Za<a}const w=this.connections,L=i.x,j=i.y;i=0;let _e=w.length-2,We=_e;for(;i<We;)w[We].y<j?i=We:_e=We,We=Math.floor((i+_e)/2);const Jt=[];if(_e=i=We,w.length){for(;0<=i&&p(i);)i--;do _e++;while(_e<w.length&&p(_e))}return Jt}isInYRange(i,a,p){return Math.abs(this.connections[i].y-a)<=p}searchForClosest(i,a,p){if(!this.connections.length)return{connection:null,radius:a};const w=i.y,L=i.x;i.x=L+p.x,i.y=w+p.y;var j=this.calculateIndexForYPos(i.y);p=null;let _e=a,We,Jt=j-1;for(;0<=Jt&&this.isInYRange(Jt,i.y,a);)We=this.connections[Jt],this.connectionChecker.canConnect(i,We,!0,_e)&&(p=We,_e=We.distanceFrom(i)),Jt--;for(;j<this.connections.length&&this.isInYRange(j,i.y,a);)We=this.connections[j],this.connectionChecker.canConnect(i,We,!0,_e)&&(p=We,_e=We.distanceFrom(i)),j++;return i.x=L,i.y=w,{connection:p,radius:_e}}static init(i){const a=[];return a[Un.INPUT_VALUE]=new oh(i),a[Un.OUTPUT_VALUE]=new oh(i),a[Un.NEXT_STATEMENT]=new oh(i),a[Un.PREVIOUS_STATEMENT]=new oh(i),a}},Op=class{paste(i,a,p){if(!a.isCapacityAvailable(i.typeCounts))return null;p&&(i.blockState.x=p.x,i.blockState.y=p.y),t.disable$$module$build$src$core$events$utils();let w;try{w=Vn(i.blockState,a),uf(w)}finally{t.enable$$module$build$src$core$events$utils()}return w&&(se()&&!w.isShadow()&&ce(new(ke(t.CREATE$$module$build$src$core$events$utils))(w)),w.select(),w)}};Op.TYPE="block",vu(Op.TYPE,new Op);var aa=null,kv=null,C0={duplicateInternal:Fa,copyInternal:ql},hm={};hm.BlockPaster=Op,hm.TEST_ONLY=C0,hm.copy=Md,hm.duplicate=bh,hm.paste=ks,hm.registry=Qm;var ab="aria-",N_="role",ah;(function(i){i.GRID="grid",i.GRIDCELL="gridcell",i.GROUP="group",i.LISTBOX="listbox",i.MENU="menu",i.MENUITEM="menuitem",i.MENUITEMCHECKBOX="menuitemcheckbox",i.OPTION="option",i.PRESENTATION="presentation",i.ROW="row",i.TREE="tree",i.TREEITEM="treeitem"})(ah||(ah={}));var xo;(function(i){i.ACTIVEDESCENDANT="activedescendant",i.COLCOUNT="colcount",i.DISABLED="disabled",i.EXPANDED="expanded",i.INVALID="invalid",i.LABEL="label",i.LABELLEDBY="labelledby",i.LEVEL="level",i.ORIENTATION="orientation",i.POSINSET="posinset",i.ROWCOUNT="rowcount",i.SELECTED="selected",i.SETSIZE="setsize",i.VALUEMAX="valuemax",i.VALUEMIN="valuemin"})(xo||(xo={}));var Lu={};Lu.Role=ah,Lu.State=xo,Lu.setRole=ci,Lu.setState=Cr;var Dg=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(i){this.menuItems.push(i)}render(i){const a=document.createElement("div");a.className="blocklyMenu goog-menu blocklyNonSelectable",a.tabIndex=0,this.roleName&&ci(a,this.roleName),this.element=a;for(let p=0,w;w=this.menuItems[p];p++)a.appendChild(w.createDom());return this.mouseOverHandler=Ie(a,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=Ie(a,"pointerup",this,this.handleClick,!0),this.mouseEnterHandler=Ie(a,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=Ie(a,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=Ie(a,"keydown",this,this.handleKeyEvent),i.appendChild(a),a}getElement(){return this.element}focus(){const i=this.getElement();i&&(i.focus({preventScroll:!0}),Be(i,"blocklyFocused"))}blur(){const i=this.getElement();i&&(i.blur(),yt(i,"blocklyFocused"))}setRole(i){this.roleName=i}dispose(){this.mouseOverHandler&&(it(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(it(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(it(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(it(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(it(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let i=0,a;a=this.menuItems[i];i++)a.dispose();this.element=null}getMenuItem(i){const a=this.getElement();for(;i&&i!==a;){if(i.classList.contains("blocklyMenuItem")){for(let p=0,w;w=this.menuItems[p];p++)if(w.getElement()===i)return w}i=i.parentElement}return null}setHighlighted(i){var a=this.highlightedItem;a&&(a.setHighlighted(!1),this.highlightedItem=null),i&&(i.setHighlighted(!0),this.highlightedItem=i,a=this.getElement(),oi(i.getElement(),a),Cr(a,xo.ACTIVEDESCENDANT,i.getId()))}highlightNext(){const i=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(i,1)}highlightPrevious(){const i=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>i?this.menuItems.length:i,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(i,a){i+=a;let p;for(;p=this.menuItems[i];){if(p.isEnabled()){this.setHighlighted(p);break}i+=a}}handleMouseOver(i){(i=this.getMenuItem(i.target))&&(i.isEnabled()?this.highlightedItem!==i&&this.setHighlighted(i):this.setHighlighted(null))}handleClick(i){const a=this.openingCoords;if(this.openingCoords=null,a&&typeof i.clientX=="number"){const p=new vn(i.clientX,i.clientY);if(1>vn.distance(a,p))return}(i=this.getMenuItem(i.target))&&i.performAction()}handleMouseEnter(i){this.focus()}handleMouseLeave(i){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(i){if(this.menuItems.length&&!(i.shiftKey||i.ctrlKey||i.metaKey||i.altKey)){var a=this.highlightedItem;switch(i.key){case"Enter":case" ":a&&a.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}i.preventDefault(),i.stopPropagation()}}getSize(){const i=this.getElement(),a=Pt(i);return a.height=i.scrollHeight,a}},Yf=class{constructor(i,a){this.content=i,this.opt_value=a,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const i=document.createElement("div");i.id=ue(),this.element=i,i.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const a=document.createElement("div");if(a.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var p=document.createElement("div");p.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",a.appendChild(p)}return p=this.content,typeof this.content=="string"&&(p=document.createTextNode(this.content)),a.appendChild(p),i.appendChild(a),this.roleName&&ci(i,this.roleName),Cr(i,xo.SELECTED,this.checkable&&this.checked||!1),Cr(i,xo.DISABLED,!this.enabled),i}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let i;return(i=this.opt_value)!=null?i:null}setRightToLeft(i){this.rightToLeft=i}setRole(i){this.roleName=i}setCheckable(i){this.checkable=i}setChecked(i){this.checked=i}setHighlighted(i){this.highlight=i;const a=this.getElement();a&&this.isEnabled()&&(i?(Be(a,"blocklyMenuItemHighlight"),Be(a,"goog-menuitem-highlight")):(yt(a,"blocklyMenuItemHighlight"),yt(a,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(i){this.enabled=i}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(i,a){this.actionHandler=i.bind(a)}},ed=null,dm=null,Xf="blocklyWidgetDiv",Kf="",Lp="",bd,yf={};yf.createDom=Uo,yf.getDiv=co,yf.hide=Zl,yf.hideIfOwner=Yr,yf.isVisible=Fh,yf.positionWithAnchor=xr,yf.repositionForWindowResize=cf,yf.show=Ql,yf.testOnly_setDiv=za;var tg=null,D_={},Pg=null,Vd={};Vd.callbackFactory=t.callbackFactory$$module$build$src$core$contextmenu,Vd.commentDeleteOption=tu,Vd.commentDuplicateOption=Uh,Vd.dispose=Hs,Vd.getCurrentBlock=hf,Vd.hide=eu,Vd.setCurrentBlock=pd,Vd.show=Vu,Vd.workspaceCommentOption=Uc;var Ni=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(i){if(this.registry_.has(i.id))throw Error('Menu item with ID "'+i.id+'" is already registered.');this.registry_.set(i.id,i)}unregister(i){if(!this.registry_.has(i))throw Error('Menu item with ID "'+i+'" not found.');this.registry_.delete(i)}getItem(i){let a;return(a=this.registry_.get(i))!=null?a:null}getContextMenuOptions(i,a){const p=[];for(const L of this.registry_.values())if(i===L.scopeType){var w=L.preconditionFn(a);w!=="hidden"&&(w={text:typeof L.displayText=="function"?L.displayText(a):L.displayText,enabled:w==="enabled",callback:L.callback,scope:a,weight:L.weight},p.push(w))}return p.sort(function(L,j){return L.weight-j.weight}),p}};(function(i){var a=i.ScopeType||(i.ScopeType={});a.BLOCK="block",a.WORKSPACE="workspace",i.registry=new i})(Ni||(Ni={})),Ni.ScopeType;var fm={};fm.clamp=Hr,fm.toDegrees=is,fm.toRadians=Hc;var ng=16,Bg=1,P_=12,rg=16,Np=.25,ig=null,Jf=null,qf="",pm="",Si,Qf,mm,gm=null,Dp=null,Fg=null,_={getBoundsInfo:function(){const i=bn(gm),a=Pt(gm);return{left:i.x,right:i.x+a.width,top:i.y,bottom:i.y+a.height,width:a.width,height:a.height}},getPositionMetrics:function(i,a,p,w){const L=_.getBoundsInfo(),j=Pt(Si);return a+j.height<L.bottom?Rn(i,a,L,j):w-j.height>L.top?Jn(p,w,L,j):a+j.height<document.documentElement.clientHeight?Rn(i,a,L,j):w-j.height>document.documentElement.clientTop?Jn(p,w,L,j):_n(i,L,j)}},T={ANIMATION_TIME:Np,ARROW_HORIZONTAL_PADDING:P_,ARROW_SIZE:ng,BORDER_SIZE:Bg,PADDING_Y:rg,TEST_ONLY:_};T.clearContent=Th,T.createDom=Ml,T.getContentDiv=$u,T.getOwner=nu,T.getPositionX=Gr,T.hide=fo,T.hideIfOwner=Ti,T.hideWithoutAnimation=ll,T.isVisible=ho,T.repositionForWindowResize=_s,T.setBoundsElement=Ua,T.setColour=Ad,T.show=sn,T.showPositionedByBlock=pi,T.showPositionedByField=ye;var R=null,F=null,Y={};Y.connectionUiEffect=pa,Y.disconnectUiEffect=Qs,Y.disconnectUiStop=Ha,Y.disposeUiEffect=Cu;var ee=50,be=100,Je=class{constructor(i,a){this.bubble=i,this.workspace=a,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY()}startBubbleDrag(){t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout&&this.bubble.setAutoLayout(!1);let i;(i=this.workspace.getLayerManager())==null||i.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(i,a){a=this.pixelsToWorkspaceUnits_(a),a=vn.sum(this.startXY_,a),this.bubble.moveDuringDrag(a),a=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(i),i=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),i!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==a&&(a&&a.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(i){return i&&this.workspace.getComponentManager().hasCapability(i.id,vl.Capability.DELETE_AREA)?i.wouldDelete(this.bubble,!1):!1}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(i,a){if(this.dragBubble(i,a),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?i=this.startXY_:(i=this.pixelsToWorkspaceUnits_(a),i=vn.sum(this.startXY_,i)),this.bubble.moveTo(i.x,i.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_)this.fireMoveEvent_(),this.bubble.dispose();else{if(this.bubble.setDragging){this.bubble.setDragging(!1);let p;(p=this.workspace.getLayerManager())==null||p.moveOffDragLayer(this.bubble,be)}this.fireMoveEvent_()}this.workspace.setResizesEnabled(!0),t.setGroup$$module$build$src$core$events$utils(!1)}fireMoveEvent_(){if(this.bubble instanceof Ul){const i=new(ke(Ta))(this.bubble);i.setOldCoordinate(this.startXY_),i.recordNew(),ce(i)}}pixelsToWorkspaceUnits_(i){return i=new vn(i.x/this.workspace.scale,i.y/this.workspace.scale),this.workspace.isMutator&&i.scale(1/this.workspace.options.parentWorkspace.scale),i}},ut=30,Dt=!0,en=[];en[Un.INPUT_VALUE]=Un.OUTPUT_VALUE,en[Un.OUTPUT_VALUE]=Un.INPUT_VALUE,en[Un.NEXT_STATEMENT]=Un.PREVIOUS_STATEMENT,en[Un.PREVIOUS_STATEMENT]=Un.NEXT_STATEMENT;var hn="RENAME_VARIABLE_ID",an="DELETE_VARIABLE_ID",Dn={};Dn.commonWordPrefix=mc,Dn.commonWordSuffix=ea,Dn.isNumber=t.isNumber$$module$build$src$core$utils$string,Dn.shortestStringLength=Sh,Dn.startsWith=Hh,Dn.wrap=t.wrap$$module$build$src$core$utils$string;var Zn=void 0,sr=!1,Lo=!1,At=50,pt=0,$t=0,wn=0,hr=0,rr=null,gr=null,Fr=0,Hl=10,ds=10,Zf=750,M0=5,Nu=null,jd={HOVER_MS:Zf,LIMIT:At,MARGINS:M0,OFFSET_X:Fr,OFFSET_Y:Hl,RADIUS_OK:ds};jd.bindMouseEvents=Ui,jd.block=Rd,jd.createDom=Vh,jd.dispose=Id,jd.getCustomTooltip=Yu,jd.getDiv=ta,jd.getTooltipOfObject=po,jd.hide=Il,jd.isVisible=md,jd.setCustomTooltip=gc,jd.unbindMouseEvents=gd,jd.unblock=jh;var _T=class{constructor(i){this.workspace=i,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new vn(i.scrollX,i.scrollY)}dispose(){this.workspace=null}startDrag(){O()&&O().unselect()}endDrag(i){this.drag(i)}drag(i){if(i=vn.sum(this.startScrollXY_,i),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(i.x,i.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(i.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,i.y);else throw new TypeError("Invalid state.")}},wE=5,EE=6,vm=class{constructor(i,a){this.creatorWorkspace=a,this.mouseDownXY=new vn(0,0),this.startWorkspace_=this.targetBlock=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.flyout=this.workspaceDragger=this.blockDragger=this.bubbleDragger=null,this.isMultiTouch_=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=i,this.currentDragDeltaXY=new vn(0,0),this.healStack=!Dt}dispose(){et(),jh(),this.creatorWorkspace.clearGesture();for(const i of this.boundEvents)it(i);this.boundEvents.length=0,this.blockDragger&&this.blockDragger.dispose(),this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(i){const a=new vn(i.clientX,i.clientY);this.updateDragDelta(a)&&(this.updateIsDragging(),Ze()),this.mostRecentEvent=i}updateDragDelta(i){return this.currentDragDeltaXY=vn.difference(i,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=vn.magnitude(this.currentDragDeltaXY)>(this.flyout?t.config$$module$build$src$core$config.flyoutDragRadius:t.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let i;if(!this.targetBlock||(i=this.flyout)==null||!i.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),this.targetBlock.select(),!0):!1}updateIsDraggingBubble(){return this.startBubble?(this.startDraggingBubble(),!0):!1}updateIsDraggingBlock(){if(!this.targetBlock)return!1;if(this.flyout){if(this.updateIsDraggingFromFlyout())return this.startDraggingBlock(),!0}else if(this.targetBlock.isMovable())return this.startDraggingBlock(),!0;return!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger=new _T(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(){if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.updateIsDraggingBubble()||this.updateIsDraggingBlock()||this.updateIsDraggingWorkspace()}startDraggingBlock(){this.blockDragger=new(y(Ut.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock,this.startWorkspace_),this.blockDragger.startDrag(this.currentDragDeltaXY,this.healStack),this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY)}startDraggingBubble(){if(!this.startBubble)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger=new Je(this.startBubble,this.startWorkspace_),this.bubbleDragger.startBubbleDrag(),this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY)}doStart(i){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,st(i)?this.cancel():(this.gestureHasStarted=!0,Ha(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=nu(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=i,Rd(),this.targetBlock&&this.targetBlock.select(),It(i)?this.handleRightClick(i):(i.type.toLowerCase()==="pointerdown"&&i.pointerType!=="mouse"&&we(i,this),this.mouseDownXY=new vn(i.clientX,i.clientY),this.healStack=i.altKey||i.ctrlKey||i.metaKey,this.bindMouseEvents(i),this.isEnding_||this.handleTouchStart(i)))}bindMouseEvents(i){this.boundEvents.push(Ie(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(Ie(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(Ie(document,"pointerup",null,this.handleUp.bind(this),!0)),i.preventDefault(),i.stopPropagation()}handleStart(i){this.isDragging()||(this.handleTouchStart(i),this.isMultiTouch()&&Ze())}handleMove(i){this.isDragging()&&ft(i)||!this.isMultiTouch()?(this.updateFromEvent(i),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.blockDragger?this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY):this.bubbleDragger&&this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY),i.preventDefault(),i.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(i),Ze())}handleUp(i){if(this.isDragging()||this.handleTouchEnd(i),!this.isMultiTouch()||this.isDragging()){if(!ft(i))return;if(this.updateFromEvent(i),Ze(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.bubbleDragger?this.bubbleDragger.endBubbleDrag(i,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(i,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()?this.doBubbleClick():this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(i)}i.preventDefault(),i.stopPropagation(),this.dispose()}handleTouchStart(i){var a=at(i);this.cachedPoints.set(a,this.getTouchPoint(i));var p=Array.from(this.cachedPoints.keys());p.length===2&&(a=this.cachedPoints.get(p[0]),p=this.cachedPoints.get(p[1]),this.startDistance=vn.distance(a,p),this.isMultiTouch_=!0,i.preventDefault())}handleTouchMove(i){const a=at(i);this.cachedPoints.set(a,this.getTouchPoint(i)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(i):this.handleMove(i)}handlePinch(i){var a=Array.from(this.cachedPoints.keys()),p=this.cachedPoints.get(a[0]);if(a=this.cachedPoints.get(a[1]),p=vn.distance(p,a)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(a=p-this.previousScale,a=0<a?a*wE:a*EE,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const w=this.startWorkspace_,L=kt(i,w.getParentSvg(),w.getInverseScreenCTM());w.zoom(L.x,L.y,a)}this.previousScale=p,i.preventDefault()}handleTouchEnd(i){i=at(i),this.cachedPoints.has(i)&&this.cachedPoints.delete(i),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(i){return this.startWorkspace_?new vn(i.pageX,i.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(Ze(),this.bubbleDragger?this.bubbleDragger.endBubbleDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(i){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(i)):this.startBubble?this.startBubble.showContextMenu(i):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(i)),i.preventDefault(),i.stopPropagation(),this.dispose()}handleWsStart(i,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(a),this.mostRecentEvent=i,this.doStart(i)}fireWorkspaceClick(i){ce(new(ke(ic))(null,i.id,"workspace"))}handleFlyoutStart(i,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(a),this.handleWsStart(i,a.getWorkspace())}handleBlockStart(i,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(a),this.mostRecentEvent=i}handleBubbleStart(i,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(a),this.mostRecentEvent=i}doBubbleClick(){this.startBubble instanceof Ul&&(this.startBubble.setFocus(),this.startBubble.select())}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock.isEnabled()&&(t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.flyout.createBlock(this.targetBlock).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const i=new(ke(ic))(this.startBlock,this.startWorkspace_.id,"block");ce(i)}this.bringBlockToFront(),t.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(i){i=this.creatorWorkspace,O()&&O().unselect(),this.fireWorkspaceClick(this.startWorkspace_||i)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(i){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=i)}setStartIcon(i){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=i)}setStartBubble(i){this.startBubble||(this.startBubble=i)}setStartBlock(i){this.startBlock||this.startBubble||(this.startBlock=i,i.isInFlyout&&i!==i.getRootBlock()?this.setTargetBlock(i.getRootBlock()):this.setTargetBlock(i))}setTargetBlock(i){i.isShadow()?this.setTargetBlock(i.getParent()):this.targetBlock=i}setStartWorkspace(i){this.startWorkspace_||(this.startWorkspace_=i)}setStartFlyout(i){this.flyout||(this.flyout=i)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const i=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&i}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}isDragging(){return!!this.workspaceDragger||!!this.blockDragger||!!this.bubbleDragger}hasStarted(){return this.gestureHasStarted}getInsertionMarkers(){return this.blockDragger?this.blockDragger.getInsertionMarkers():[]}getCurrentDragger(){let i,a;return(a=(i=this.blockDragger)!=null?i:this.workspaceDragger)!=null?a:this.bubbleDragger}static inProgress(){const i=S();for(let a=0,p;p=i[a];a++)if(p.currentGesture_)return!0;return!1}},lb=class{constructor(i,a){this.pattern=i,this.scale=1;let p;this.spacing=(p=a.spacing)!=null?p:0;let w;this.length=(w=a.length)!=null?w:1,this.line2=(this.line1=i.firstChild)&&this.line1.nextSibling;let L;this.snapToGrid=(L=a.snap)!=null?L:!1}setSpacing(i){this.spacing=i,this.update(this.scale)}setLength(i){this.length=i,this.update(this.scale)}setSnapToGrid(i){this.snapToGrid=i}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(i){this.scale=i;var a=this.spacing*i;this.pattern.setAttribute("width",`${a}`),this.pattern.setAttribute("height",`${a}`),a=Math.floor(this.spacing/2)+.5;let p=a-this.length/2,w=a+this.length/2;a*=i,p*=i,w*=i,this.setLineAttributes(this.line1,i,p,w,a,a),this.setLineAttributes(this.line2,i,a,a,p,w)}setLineAttributes(i,a,p,w,L,j){i&&(i.setAttribute("stroke-width",`${a}`),i.setAttribute("x1",`${p}`),i.setAttribute("y1",`${L}`),i.setAttribute("x2",`${w}`),i.setAttribute("y2",`${j}`))}moveTo(i,a){this.pattern.setAttribute("x",`${i}`),this.pattern.setAttribute("y",`${a}`)}static createDom(i,a,p){i=re(Ye.PATTERN,{id:"blocklyGridPattern"+i,patternUnits:"userSpaceOnUse"},p);let w,L;if(0<((w=a.length)!=null?w:1)&&0<((L=a.spacing)!=null?L:0)){re(Ye.LINE,{stroke:a.colour},i);let j;(j=a.length)!=null&&j&&re(Ye.LINE,{stroke:a.colour},i)}else re(Ye.LINE,{},i);return i}},Ca=class{constructor(i){this.workspace=i,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(i,a){this.markers.has(i)&&this.unregisterMarker(i),a.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,a)),this.setMarkerSvg(a.getDrawer().createDom()),this.markers.set(i,a)}unregisterMarker(i){const a=this.markers.get(i);if(a)a.dispose(),this.markers.delete(i);else throw Error("Marker with ID "+i+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor_}getMarker(i){return this.markers.get(i)||null}setCursor(i){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=i)&&(i=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(i),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(i){i?(this.workspace.getBlockCanvas().appendChild(i),this.cursorSvg_=i):this.cursorSvg_=null}setMarkerSvg(i){i?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(i,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(i)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const i=Object.keys(this.markers);for(let a=0,p;p=i[a];a++)this.unregisterMarker(p);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};Ca.LOCAL_MARKER="local_marker_1";var yT={};yT.deepMerge=Rl;var zg=class{constructor(i,a,p,w){this.name=i,this.startHats=!1,this.blockStyles=a||Object.create(null),this.categoryStyles=p||Object.create(null),this.componentStyles=w||Object.create(null),this.fontStyle=Object.create(null),r(Ut.THEME,i,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(i,a){this.blockStyles[i]=a}setCategoryStyle(i,a){this.categoryStyles[i]=a}getComponentStyle(i){if(i=this.componentStyles[i],!i)return null;if(typeof i=="string"){const a=this.getComponentStyle(i);if(a)return a}return`${i}`}setComponentStyle(i,a){this.componentStyles[i]=a}setFontStyle(i){this.fontStyle=i}setStartHats(i){this.startHats=i}static defineTheme(i,a){i=i.toLowerCase();const p=new zg(i);let w=a.base;if(w){if(typeof w=="string"){let L;w=(L=f(Ut.THEME,w))!=null?L:void 0}w instanceof zg&&(Rl(p,w),p.name=i)}return Rl(p.blockStyles,a.blockStyles),Rl(p.categoryStyles,a.categoryStyles),Rl(p.componentStyles,a.componentStyles),Rl(p.fontStyle,a.fontStyle),a.startHats!==null&&(p.startHats=a.startHats),p}},Yd={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},Ln={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},B_=new zg("classic",Yd,Ln),Gi=class{constructor(i){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let a=null,p=!1;var w=!1,L=!1,j=!1,_e=!1,We=!1;const Jt=!!i.readOnly;if(!Jt){var jn;a=_t((jn=i.toolbox)!=null?jn:null),p=Xt(a),w=i.trashcan,w=w===void 0?p:w,L=i.collapse,L=L===void 0?p:L,j=i.comments,j=j===void 0?p:j,_e=i.disable,_e=_e===void 0?p:_e,We=i.sounds,We=We===void 0?!0:We}jn=i.maxTrashcanContents,w?jn===void 0&&(jn=32):jn=0;const Tl=!!i.rtl;let Za=i.horizontalLayout;Za===void 0&&(Za=!1);var Up=i.toolboxPosition!=="end";Up=Za?Up?mr.TOP:mr.BOTTOM:Up===Tl?mr.RIGHT:mr.LEFT;let jT=i.css;jT===void 0&&(jT=!0);let YT="https://blockly-demo.appspot.com/static/media/";i.media?YT=i.media.endsWith("/")?i.media:i.media+"/":"path"in i&&(Ee("path","Nov 2014","Jul 2023","media"),YT=i.path+"media/");const Nz=i.oneBasedIndex,rne=i.renderer||"geras",ine=i.plugins||{};let B2=i.modalInputs;B2===void 0&&(B2=!0),this.RTL=Tl,this.oneBasedIndex=Nz===void 0?!0:Nz,this.collapse=L,this.comments=j,this.disable=_e,this.readOnly=Jt,this.maxBlocks=i.maxBlocks||1/0;let Dz;this.maxInstances=(Dz=i.maxInstances)!=null?Dz:null,this.modalInputs=B2,this.pathToMedia=YT,this.hasCategories=p,this.moveOptions=Gi.parseMoveOptions_(i,p),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=w,this.maxTrashcanContents=jn,this.hasSounds=We,this.hasCss=jT,this.horizontalLayout=Za,this.languageTree=a,this.gridOptions=Gi.parseGridOptions_(i),this.zoomOptions=Gi.parseZoomOptions_(i),this.toolboxPosition=Up,this.theme=Gi.parseThemeOptions_(i),this.renderer=rne;let Pz;this.rendererOverrides=(Pz=i.rendererOverrides)!=null?Pz:null;let Bz;this.parentWorkspace=(Bz=i.parentWorkspace)!=null?Bz:null,this.plugins=ine}static parseMoveOptions_(i,a){const p=i.move||{},w={};return p.scrollbars===void 0&&i.scrollbars===void 0?w.scrollbars=a:typeof p.scrollbars=="object"?(w.scrollbars={horizontal:!!p.scrollbars.horizontal,vertical:!!p.scrollbars.vertical},w.scrollbars.horizontal&&w.scrollbars.vertical?w.scrollbars=!0:w.scrollbars.horizontal||w.scrollbars.vertical||(w.scrollbars=!1)):w.scrollbars=!!p.scrollbars||!!i.scrollbars,w.wheel=w.scrollbars&&p.wheel!==void 0?!!p.wheel:typeof w.scrollbars=="object",w.drag=w.scrollbars?p.drag===void 0?!0:!!p.drag:!1,w}static parseZoomOptions_(i){i=i.zoom||{};const a={};return a.controls=i.controls===void 0?!1:!!i.controls,a.wheel=i.wheel===void 0?!1:!!i.wheel,a.startScale=i.startScale===void 0?1:Number(i.startScale),a.maxScale=i.maxScale===void 0?3:Number(i.maxScale),a.minScale=i.minScale===void 0?.3:Number(i.minScale),a.scaleSpeed=i.scaleSpeed===void 0?1.2:Number(i.scaleSpeed),a.pinch=i.pinch===void 0?a.wheel||a.controls:!!i.pinch,a}static parseGridOptions_(i){i=i.grid||{};const a={};return a.spacing=Number(i.spacing)||0,a.colour=i.colour||"#888",a.length=i.length===void 0?1:Number(i.length),a.snap=0<a.spacing&&!!i.snap,a}static parseThemeOptions_(i){return i=i.theme||B_,typeof i=="string"?f(Ut.THEME,i):i instanceof zg?i:zg.defineTheme(i.name||"builtin"+ue(),i)}},Qr=class extends _f{constructor(i,a,p,w,L){super(i),this.type=t.CHANGE$$module$build$src$core$events$utils,i&&(this.element=a,this.name=p||void 0,this.oldValue=w,this.newValue=L)}toJson(){const i=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return i.element=this.element,i.name=this.name,i.oldValue=this.oldValue,i.newValue=this.newValue,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Qr),a.element=i.element,a.name=i.name,a.oldValue=i.oldValue,a.newValue=i.newValue,a}isNull(){return this.oldValue===this.newValue}run(i){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(a=a.getBlockById(this.blockId),!a)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");var p=a.getIcon(Yo.MUTATOR);switch(p&&iu(p)&&p.bubbleIsVisible()&&p.setBubbleVisible(!1),i=i?this.newValue:this.oldValue,this.element){case"field":(a=a.getField(this.name))?a.setValue(i):console.warn("Can't set non-existent field: "+this.name);break;case"comment":a.setCommentText(i||null);break;case"collapsed":a.setCollapsed(!!i);break;case"disabled":a.setEnabled(!i);break;case"inline":a.setInputsInline(!!i);break;case"mutation":p=Qr.getExtraBlockState_(a),a.loadExtraState?a.loadExtraState(JSON.parse(i||"{}")):a.domToMutation&&a.domToMutation(t.textToDom$$module$build$src$core$utils$xml(i||"<mutation/>")),ce(new Qr(a,"mutation",null,p,i));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(i){return i.saveExtraState?(i=i.saveExtraState(!0))?JSON.stringify(i):"":i.mutationToDom&&(i=i.mutationToDom())?Qi(i):""}};r(Ut.EVENT,t.CHANGE$$module$build$src$core$events$utils,Qr);var ub=.45,lh=.65,bT={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},bf={};bf.blend=jc,bf.getHsvSaturation=Ku,bf.getHsvValue=wh,bf.hexToRgb=Vc,bf.hsvToHex=Ol,bf.hueToHex=vc,bf.names=bT,bf.parse=na,bf.rgbToHex=kl,bf.setHsvSaturation=Ju,bf.setHsvValue=ul;var Ov={};Ov.checkMessageReferences=cl,Ov.parseBlockColour=Zi,Ov.replaceMessageReferences=Xr,Ov.tokenizeInterpolation=Wa;var Wi=class{constructor(i,a,p){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new ro(0,0),i!==Wi.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(i),a&&this.setValidator(a))}configure_(i){i.tooltip&&this.setTooltip(Xr(i.tooltip))}setSourceBlock(i){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=i}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=re(Ye.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=re(Ye.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=re(Ye.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const i=this.getClickTarget_();if(!i)throw Error("A click target has not been set.");Ui(i),this.mouseDownWrapper_=Ie(i,"pointerdown",this,this.onMouseDown_)}fromXml(i){this.setValue(i.textContent)}toXml(i){return i.textContent=this.getValue(),i}saveState(i){return i=this.saveLegacyState(Wi),i!==null?i:this.getValue()}loadState(i){this.loadLegacyState(Wi,i)||this.setValue(i)}saveLegacyState(i){return i.prototype.saveState===this.saveState&&i.prototype.toXml!==this.toXml?(i=t.createElement$$module$build$src$core$utils$xml("field"),i.setAttribute("name",this.name||""),kn(this.toXml(i)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(i,a){return i.prototype.loadState===this.loadState&&i.prototype.fromXml!==this.fromXml?(this.fromXml(t.textToDom$$module$build$src$core$utils$xml(a)),!0):!1}dispose(){Ti(this),Yr(this);let i;(i=this.getSourceBlock())!=null&&i.isDeadOrDying()||Ke(this.fieldGroup_),this.disposed=!0}updateEditable(){const i=this.fieldGroup_,a=this.getSourceBlock();this.EDITABLE&&i&&a&&(this.enabled_&&a.isEditable()?(Be(i,"blocklyEditableText"),yt(i,"blocklyNonEditableText"),i.style.cursor=this.CURSOR):(Be(i,"blocklyNonEditableText"),yt(i,"blocklyEditableText"),i.style.cursor=""))}setEnabled(i){this.enabled_=i,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==Wi.prototype.showEditor_}isClickableInFlyout(i){return!i}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let i=!1;return this.name&&(this.SERIALIZABLE?i=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),i=!0)),i}isVisible(){return this.visible_}setVisible(i){if(this.visible_!==i){this.visible_=i;var a=this.fieldGroup_;a&&(a.style.display=i?"block":"none")}}setValidator(i){this.validator_=i}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(i){this.isClickable()&&this.showEditor_(i)}showEditor_(i){}repositionForWindowResize(){return!1}updateSize_(i){const a=this.getConstants();i=i!==void 0?i:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let p=2*i,w=a.FIELD_TEXT_HEIGHT,L=0;this.textElement_&&(L=Fe(this.textElement_,a.FIELD_TEXT_FONTSIZE,a.FIELD_TEXT_FONTWEIGHT,a.FIELD_TEXT_FONTFAMILY),p+=L),this.isFullBlockField()||(w=Math.max(w,a.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=w,this.size_.width=p,this.positionTextElement_(i,L),this.positionBorderRect_()}positionTextElement_(i,a){if(this.textElement_){var p=this.getConstants(),w=this.size_.height/2,L;this.textElement_.setAttribute("x",String((L=this.getSourceBlock())!=null&&L.RTL?this.size_.width-a-i:i)),this.textElement_.setAttribute("y",String(p.FIELD_TEXT_BASELINE_CENTER?w:w-p.FIELD_TEXT_HEIGHT/2+p.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new ro(0,0)}getScaledBBox(){let i;var a=this.getSourceBlock();if(!a)throw new No;if(this.isFullBlockField()){var p=this.sourceBlock_.getHeightWidth();const w=a.workspace.scale;i=this.getAbsoluteXY_(),a=(p.width+1)*w,p=(p.height+1)*w,xn?(i.x+=1.5*w,i.y+=1.5*w):(i.x-=.5*w,i.y-=.5*w)}else p=this.borderRect_.getBoundingClientRect(),i=bn(this.borderRect_),a=p.width,p=p.height;return new Li(i.y,i.y+p,i.x,i.x+a)}onLocationChange(i){}getDisplayText_(){let i=this.getText();return i?(i.length>this.maxDisplayLength&&(i=i.substring(0,this.maxDisplayLength-2)+""),i=i.replace(/\s/g,Wi.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(i+=""),i):Wi.NBSP}getText(){const i=this.getText_();return String(i!==null?i:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.queueRender(),this.sourceBlock_.bumpNeighbours())}setValue(i,a=!0){if(i!==null){var p=this.doClassValidation_(i);if(i=this.processValidation_(i,p),!(i instanceof Error)){var w;p=(w=this.getValidator())==null?void 0:w.call(this,i),w=this.processValidation_(i,p),w instanceof Error||(i=this.sourceBlock_,i&&i.disposed||(p=this.getValue(),p===w?this.doValueUpdate_(w):(this.doValueUpdate_(w),a&&i&&se()&&ce(new(ke(t.CHANGE$$module$build$src$core$events$utils))(i,"field",this.name||null,p,w)),this.isDirty_&&this.forceRerender())))}}}processValidation_(i,a){return a===null?(this.doValueInvalid_(i),this.isDirty_&&this.forceRerender(),Error()):a===void 0?i:a}getValue(){return this.value_}doClassValidation_(i){return i??null}doValueUpdate_(i){this.value_=i,this.isDirty_=!0}doValueInvalid_(i){}onMouseDown_(i){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(i=this.sourceBlock_.workspace.getGesture(i))&&i.setStartField(this)}setTooltip(i){i||i===""||(i=this.sourceBlock_);const a=this.getClickTarget_();a?a.tooltip=i:this.tooltip_=i}getTooltip(){const i=this.getClickTarget_();return po(i||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return bn(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let i=null;const a=this.getSourceBlock();if(!a)throw new No;const p=a.inputList;for(let w=0;w<a.inputList.length;w++){const L=p[w],j=L.fieldRow;for(let _e=0;_e<j.length;_e++)if(j[_e]===this){i=L;break}}return i}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(i){return!1}setCursorSvg(i){if(i){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(i),this.cursorSvg_=i}else this.cursorSvg_=null}setMarkerSvg(i){if(i){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(i),this.markerSvg_=i}else this.markerSvg_=null}updateMarkers_(){var i=this.getSourceBlock();if(!i)throw new No;i=i.workspace,i.keyboardAccessibilityMode&&this.cursorSvg_&&i.getCursor().draw(),i.keyboardAccessibilityMode&&this.markerSvg_&&i.getMarker(Ca.LOCAL_MARKER).draw()}};Wi.NBSP="",Wi.SKIP_SETUP=Symbol("SKIP_SETUP");var No=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}};t.Names$$module$build$src$core$names=class{constructor(i,a){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=a||"",this.reservedWords=new Set(i?i.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(i){this.variableMap=i}getNameForUserVariable(i){return this.variableMap?(i=this.variableMap.getVariableById(i))?i.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(i){i=t.allUsedVarModels$$module$build$src$core$variables(i);for(let a=0;a<i.length;a++)this.getName(i[a].getId(),t.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(i){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(i,a){let p=i;a===t.NameType$$module$build$src$core$names.VARIABLE&&(i=this.getNameForUserVariable(i))&&(p=i),i=p.toLowerCase();const w=a===t.NameType$$module$build$src$core$names.VARIABLE||a===t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(a)||this.db.set(a,new Map);const L=this.db.get(a);return L.has(i)?w+L.get(i):(a=this.getDistinctName(p,a),L.set(i,a.substr(w.length)),a)}getUserNames(i){let a;return(i=(a=this.db.get(i))==null?void 0:a.keys())?Array.from(i):[]}getDistinctName(i,a){i=this.safeName(i);let p=null,w,L;for(;this.dbReverse.has(i+((w=p)!=null?w:""))||this.reservedWords.has(i+((L=p)!=null?L:""));)p=p?p+1:2;let j;return i+=(j=p)!=null?j:"",this.dbReverse.add(i),(a===t.NameType$$module$build$src$core$names.VARIABLE||a===t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+i}safeName(i){return i?(i=encodeURI(i.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(i[0])!==-1&&(i="my_"+i)):i=t.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",i}static equals(i,a){return i.toLowerCase()===a.toLowerCase()}},function(i){i=i.NameType||(i.NameType={}),i.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",i.VARIABLE="VARIABLE",i.PROCEDURE="PROCEDURE"}(t.Names$$module$build$src$core$names||(t.Names$$module$build$src$core$names={})),t.NameType$$module$build$src$core$names=t.Names$$module$build$src$core$names.NameType,t.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,t.NameType$$module$build$src$core$names,t.Names$$module$build$src$core$names;var A0=class extends Map{constructor(){super()}set(i,a){return this.get(i)===a?this:(super.set(i,a),X(a)&&a.startPublishing(),this)}delete(i){const a=this.get(i);return i=super.delete(i),i&&(X(a)&&a.stopPublishing(),i)}clear(){if(this.size)for(const i of this.keys())this.delete(i)}add(i){return this.set(i.getId(),i)}getProcedures(){return[...this.values()]}},F_=class{constructor(i){this.sourceBlock=i,this.offsetInBlock=new vn(0,0),this.workspaceLocation=new vn(0,0),this.svgRoot=null,this.tooltip=i}getType(){throw Error("Icons must implement getType")}initView(i){if(!this.svgRoot){var a=this.sourceBlock;this.svgRoot=re(Ye.G,{class:"blocklyIconGroup"}),a.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),Ie(this.svgRoot,"pointerdown",this,i),this.svgRoot.tooltip=this,Ui(this.svgRoot)}}dispose(){gd(this.svgRoot),Ke(this.svgRoot)}getWeight(){return-1}getSize(){return new ro(0,0)}setTooltip(i){this.tooltip=i??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",iu(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(i){this.offsetInBlock=i,this.updateSvgRootOffset()}updateSvgRootOffset(){let i;(i=this.svgRoot)==null||i.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(i){this.workspaceLocation=vn.sum(i,this.offsetInBlock)}onClick(){}isClickableInFlyout(i){return!0}setVisible(i){Ee("setVisible","v10","v11","setBubbleVisible"),iu(this)&&this.setBubbleVisible(i)}},Mc={fromJsonInternal:Ir},I0={TEST_ONLY:Mc};I0.fromJson=t.fromJson$$module$build$src$core$field_registry,I0.register=xs,I0.unregister=ga;var Ih=class extends Wi{constructor(i,a,p){super(Wi.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,i!==Wi.SKIP_SETUP&&(Array.isArray(i)?(hl(i),i=mn(i),this.menuGenerator_=i.options,this.prefixField=i.prefix||null,this.suffixField=i.suffix||null):this.menuGenerator_=i,this.selectedOption=this.getOptions(!1)[0],p&&this.configure_(p),this.setValue(this.selectedOption[1]),a&&this.setValidator(a))}fromXml(i){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(i.textContent)}loadState(i){this.loadLegacyState(Ih,i)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(i))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=re(Ye.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&Be(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let i;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((i=this.getSourceBlock())!=null&&i.isShadow())}createTextArrow_(){this.arrow=re(Ye.TSPAN,{},this.textElement_);let i;this.arrow.appendChild(document.createTextNode((i=this.getSourceBlock())!=null&&i.RTL?Ih.ARROW_CHAR+" ":" "+Ih.ARROW_CHAR));let a;(a=this.getSourceBlock())!=null&&a.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=re(Ye.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(no,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(i){var a=this.getSourceBlock();if(!a)throw new No;this.dropdownCreate(),this.menu_.openingCoords=i&&typeof i.clientX=="number"?new vn(i.clientX,i.clientY):null,Th(),i=this.menu_.render($u()),Be(i,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(a=a.getColour(),Ad(a,this.sourceBlock_.style.colourTertiary)),ye(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&(this.menu_.setHighlighted(this.selectedMenuItem),oi(this.selectedMenuItem.getElement(),$u(),!0)),this.applyColour()}dropdownCreate(){const i=this.getSourceBlock();if(!i)throw new No;const a=new Dg;a.setRole(ah.LISTBOX),this.menu_=a;const p=this.getOptions(!1);this.selectedMenuItem=null;for(let L=0;L<p.length;L++){const[j,_e]=p[L];if(typeof j=="object"){var w=new Image(j.width,j.height);w.src=j.src,w.alt=j.alt||""}else w=j;w=new Yf(w,_e),w.setRole(ah.OPTION),w.setRightToLeft(i.RTL),w.setCheckable(!0),a.addChild(w),w.setChecked(_e===this.value_),_e===this.value_&&(this.selectedMenuItem=w),w.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(i){Ti(this,!0),this.onItemSelected_(this.menu_,i)}onItemSelected_(i,a){this.setValue(a.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(i){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:i&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),hl(this.generatedOptions),this.generatedOptions)}doClassValidation_(i){return this.getOptions(!0).some(a=>a[1]===i)?i:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+i),null)}doValueUpdate_(i){super.doValueUpdate_(i),i=this.getOptions(!0);for(let a=0,p;p=i[a];a++)p[1]===this.value_&&(this.selectedOption=p)}applyColour(){const i=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",i.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",i.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=i.colourSecondary:this.arrow.style.fill=i.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const i=this.selectedOption&&this.selectedOption[0];i&&typeof i=="object"?this.renderSelectedImage(i):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(i){const a=this.getSourceBlock();if(!a)throw new No;this.imageElement.style.display="",this.imageElement.setAttributeNS(no,"xlink:href",i.src),this.imageElement.setAttribute("height",String(i.height)),this.imageElement.setAttribute("width",String(i.width));const p=Number(i.height);i=Number(i.width);var w=!!this.borderRect_;const L=Math.max(w?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,p+di);w=w?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let j;j=this.svgArrow?this.positionSVGArrow(i+w,L/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Fe(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=i+j+2*w,this.size_.height=L;let _e=0;a.RTL?this.imageElement.setAttribute("x",`${w+j}`):(_e=i+j,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${w}`)),this.imageElement.setAttribute("y",String(L/2-p/2)),this.positionTextElement_(_e+w,i+j)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var i=this.getTextElement();Be(i,"blocklyDropdownText"),i.setAttribute("text-anchor","start");var a=!!this.borderRect_;i=Math.max(a?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const p=Fe(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);a=a?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let w=0;this.svgArrow&&(w=this.positionSVGArrow(p+a,i/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=p+w+2*a,this.size_.height=i,this.positionTextElement_(a,p)}positionSVGArrow(i,a){if(!this.svgArrow)return 0;const p=this.getSourceBlock();if(!p)throw new No;const w=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,L=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,j=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(p.RTL?w:i+L)+","+a+")"),j+L}getText_(){if(!this.selectedOption)return null;const i=this.selectedOption[0];return typeof i=="object"?i.alt:i}static fromJson(i){if(!i.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(i.options,void 0,i)}};Ih.CHECKMARK_OVERHANG=25,Ih.MAX_MENU_HEIGHT_VH=.45,Ih.ARROW_CHAR="";var si=5,di=2*si;xs("field_dropdown",Ih);var td,As=class{constructor(i,a,p){this.workspace=i,this.anchor=a,this.ownerRect=p,this.size=new ro(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.svgRoot=re(Ye.G,{},i.getBubbleCanvas()),i=re(Ye.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=re(Ye.PATH,{},i),this.background=re(Ye.RECT,{class:"blocklyDraggable",x:0,y:0,rx:td.BORDER_WIDTH,ry:td.BORDER_WIDTH},i),this.contentContainer=re(Ye.G,{},this.svgRoot),Ie(this.background,"pointerdown",this,this.onMouseDown)}dispose(){Ke(this.svgRoot),this.disposed=!0}setAnchorLocation(i,a=!1){this.anchor=i,a?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(i,a){this.relativeLeft=i,this.relativeTop=a,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(i,a=!1){i.width=Math.max(i.width,td.MIN_SIZE),i.height=Math.max(i.height,td.MIN_SIZE),this.size=i,this.background.setAttribute("width",`${i.width}`),this.background.setAttribute("height",`${i.height}`),a?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(i){this.colour=i,this.tail.setAttribute("fill",i),this.background.setAttribute("fill",i)}onMouseDown(i){let a;(a=this.workspace.getGesture(i))==null||a.handleBubbleStart(i,this)}positionRelativeToAnchor(){let i=this.anchor.x;i=this.workspace.RTL?i-(this.relativeLeft+this.size.width):i+this.relativeLeft,this.moveTo(i,this.relativeTop+this.anchor.y)}moveTo(i,a){this.svgRoot.setAttribute("transform",`translate(${i}, ${a})`)}positionByRect(i=new Li(0,0,0,0)){var a=this.workspace.getMetricsManager().getViewMetrics(!0),p=this.getOptimalRelativeLeft(a),w=this.getOptimalRelativeTop(a);const L={x:p,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},j={x:-this.size.width-30,y:w};w={x:i.getWidth(),y:w};var _e={x:p,y:i.getHeight()};p=i.getWidth()<i.getHeight()?w:_e,i=i.getWidth()<i.getHeight()?_e:w,w=this.getOverlap(L,a),_e=this.getOverlap(j,a);const We=this.getOverlap(p,a);a=this.getOverlap(i,a),a=Math.max(w,_e,We,a),w===a?(this.relativeLeft=L.x,this.relativeTop=L.y):_e===a?(this.relativeLeft=j.x,this.relativeTop=j.y):We===a?(this.relativeLeft=p.x,this.relativeTop=p.y):(this.relativeLeft=i.x,this.relativeTop=i.y),this.positionRelativeToAnchor()}getOverlap(i,a){var p=this.workspace.RTL?this.anchor.x-i.x-this.size.width:i.x+this.anchor.x;return i=i.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(p+this.size.width,a.left+a.width)-Math.max(p,a.left))*(Math.min(i+this.size.height,a.top+a.height)-Math.max(i,a.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(i){let a=-this.size.width/4;if(this.size.width>i.width)return a;if(i=this.getWorkspaceViewRect(i),this.workspace.RTL){var p=this.anchor.x-a;p-this.size.width<i.left?a=-(i.left-this.anchor.x+this.size.width):p>i.right&&(a=-(i.right-this.anchor.x))}else{p=a+this.anchor.x;const w=p+this.size.width;p<i.left?a=i.left-this.anchor.x:w>i.right&&(a=i.right-this.anchor.x-this.size.width)}return a}getOptimalRelativeTop(i){let a=-this.size.height/4;if(this.size.height>i.height)return a;const p=this.anchor.y+a,w=p+this.size.height;return i=this.getWorkspaceViewRect(i),p<i.top?a=i.top-this.anchor.y:w>i.bottom&&(a=i.bottom-this.anchor.y-this.size.height),a}getWorkspaceViewRect(i){const a=i.top;let p=i.top+i.height,w=i.left;return i=i.left+i.width,p-=this.getScrollbarThickness(),this.workspace.RTL?w-=this.getScrollbarThickness():i-=this.getScrollbarThickness(),new Li(a,p,w,i)}getScrollbarThickness(){return xa.scrollbarThickness/this.workspace.scale}renderTail(){const i=[];var a=this.size.width/2,p=this.size.height/2,w=-this.relativeLeft,L=-this.relativeTop;if(a===w&&p===L)i.push("M "+a+","+p);else{L-=p,w-=a,this.workspace.RTL&&(w*=-1);var j=Math.sqrt(L*L+w*w),_e=Math.acos(w/j);0>L&&(_e=2*Math.PI-_e);var We=_e+Math.PI/2;We>2*Math.PI&&(We-=2*Math.PI);var Jt=Math.sin(We);const Tl=Math.cos(We);let Za=(this.size.width+this.size.height)/td.TAIL_THICKNESS;Za=Math.min(Za,this.size.width,this.size.height)/4,We=1-td.ANCHOR_RADIUS/j,w=a+We*w,L=p+We*L,We=a+Za*Tl;const Up=p+Za*Jt;a-=Za*Tl,p-=Za*Jt,Jt=Hc(this.workspace.RTL?-td.TAIL_ANGLE:td.TAIL_ANGLE),Jt=_e+Jt,Jt>2*Math.PI&&(Jt-=2*Math.PI),_e=Math.sin(Jt)*j/td.TAIL_BEND,j=Math.cos(Jt)*j/td.TAIL_BEND,i.push("M"+We+","+Up),i.push("C"+(We+j)+","+(Up+_e)+" "+w+","+L+" "+w+","+L),i.push("C"+w+","+L+" "+(a+j)+","+(p+_e)+" "+a+","+p)}i.push("z");let jn;(jn=this.tail)==null||jn.setAttribute("d",i.join(" "))}bringToFront(){let i;const a=(i=this.svgRoot)==null?void 0:i.parentNode;return this.svgRoot&&(a==null?void 0:a.lastChild)!==this.svgRoot?(a==null||a.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new vn(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(i){this.moveTo(i.x,i.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-i.x-this.size.width:i.x-this.anchor.x,this.relativeTop=i.y-this.anchor.y,this.renderTail()}setDragging(i){}setDeleteStyle(i){}isDeletable(){return!1}showContextMenu(i){}};td=As,As.BORDER_WIDTH=6,As.DOUBLE_BORDER=2*td.BORDER_WIDTH,As.MIN_SIZE=td.DOUBLE_BORDER,As.TAIL_THICKNESS=1,As.TAIL_ANGLE=20,As.TAIL_BEND=4,As.ANCHOR_RADIUS=8;var _m=class extends As{constructor(i,a,p,w){super(a,p,w),this.workspace=a,this.anchor=p,this.ownerRect=w,this.autoLayout=!0,a=new Gi(i),this.validateWorkspaceOptions(a),this.svgDialog=re(Ye.SVG,{x:As.BORDER_WIDTH,y:As.BORDER_WIDTH},this.contentContainer),i.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new Gi(i)),this.miniWorkspace.internalIsMutator=!0,i=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(i),a.languageTree&&(i.insertBefore(this.miniWorkspace.addFlyout(Ye.G),this.miniWorkspace.getCanvas()),i=this.miniWorkspace.getFlyout(),i==null||i.init(this.miniWorkspace),i==null||i.show(a.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let L,j;(L=this.miniWorkspace.getFlyout())==null||(j=L.getWorkspace())==null||j.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(i){this.miniWorkspace.addChangeListener(i)}validateWorkspaceOptions(i){if(i.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(i.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(i.zoomOptions.controls||i.zoomOptions.wheel||i.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(i.moveOptions.scrollbars||i.moveOptions.wheel||i.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(i.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const i of this.miniWorkspace.getTopBlocks(!1)){const a=i.getRelativeToSurfaceXY();if(20>a.y&&i.moveBy(0,20-a.y),i.RTL){let p=-20;const w=this.miniWorkspace.getFlyout();w&&(p-=w.getWidth()),a.x>p&&i.moveBy(p-a.x,0)}else 20>a.x&&i.moveBy(20-a.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var i=this.getSize(),a=this.calculateWorkspaceSize();Math.abs(i.width-a.width)<_m.MINIMUM_VIEW_CHANGE&&Math.abs(i.height-a.height)<_m.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${a.width}px`),this.svgDialog.setAttribute("height",`${a.height}px`),this.miniWorkspace.setCachedParentSvgSize(a.width,a.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${a.width}, 0)`),this.setSize(new ro(a.width+As.DOUBLE_BORDER,a.height+As.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var i=this.miniWorkspace.getCanvas().getBBox();let a=i.width+_m.MARGIN;i=i.height+_m.MARGIN;const p=this.miniWorkspace.getFlyout();if(p){const w=p.getWorkspace().getMetricsManager().getScrollMetrics();i=Math.max(i,w.height+20),a+=p.getWidth()}return new ro(a,i)}updateBlockStyles(){for(var i of this.miniWorkspace.getAllBlocks(!1))i.setStyle(i.getStyleName());let a;if(i=(a=this.miniWorkspace.getFlyout())==null?void 0:a.getWorkspace())for(const p of i.getAllBlocks(!1))p.setStyle(p.getStyleName())}moveDuringDrag(i){super.moveDuringDrag(i),this.autoLayout=!1}moveTo(i,a){super.moveTo(i,a),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(i){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};_m.MINIMUM_VIEW_CHANGE=10,_m.MARGIN=3*As.DOUBLE_BORDER;var z_,U_;z_=17,U_=16,t.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends F_{constructor(i,a){super(a),this.flyoutBlockTypes=i,this.sourceBlock=a,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(i){this.svgRoot||(super.initView(i),re(Ye.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),re(Ye.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),re(Ye.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),Be(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let i;(i=this.miniWorkspaceBubble)==null||i.dispose()}getWeight(){return t.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new ro(z_,z_)}applyColour(){super.applyColour();let i;(i=this.miniWorkspaceBubble)==null||i.setColour(this.sourceBlock.style.colourPrimary);let a;(a=this.miniWorkspaceBubble)==null||a.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(i){super.onLocationChange(i);let a;(a=this.miniWorkspaceBubble)==null||a.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(i){if(this.bubbleIsVisible()!==i){if(i){this.miniWorkspaceBubble=new _m(this.getMiniWorkspaceConfig(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour(),this.createRootBlock(),this.addSaveConnectionsListener();let a;(a=this.miniWorkspaceBubble)==null||a.addWorkspaceChangeListener(this.createMiniWorkspaceChangeListener())}else{let a;(a=this.miniWorkspaceBubble)==null||a.dispose(),this.miniWorkspaceBubble=null,this.saveConnectionsListener&&this.sourceBlock.workspace.removeChangeListener(this.saveConnectionsListener),this.saveConnectionsListener=null}ce(new(ke(So))(this.sourceBlock,i,"mutator"))}}getMiniWorkspaceConfig(){let i;const a={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(i=this.sourceBlock.workspace.options.rendererOverrides)!=null?i:void 0};return this.flyoutBlockTypes.length&&(a.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(p=>({kind:"block",type:p}))}),a}getAnchorLocation(){const i=z_/2;return vn.sum(this.workspaceLocation,new vn(i,i))}getBubbleOwnerRect(){const i=this.sourceBlock.getSvgRoot().getBBox();return new Li(i.y,i.y+i.height,i.x,i.x+i.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var i of this.rootBlock.getDescendants(!1))i.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let a,p,w,L;i=(L=(a=this.miniWorkspaceBubble)==null||(p=a.getWorkspace())==null||(w=p.getFlyout())==null?void 0:w.getWidth())!=null?L:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(i+U_):U_,U_)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return i=>{t.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(i)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(i){return i.isUiEvent||i.type===t.CREATE$$module$build$src$core$events$utils||i.type===t.CHANGE$$module$build$src$core$events$utils&&i.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var i=t.getGroup$$module$build$src$core$events$utils();i||t.setGroup$$module$build$src$core$events$utils(!0);var a=Qr.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var p=Qr.getExtraBlockState_(this.sourceBlock);a!==p&&ce(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"mutation",null,a,p)),t.setGroup$$module$build$src$core$events$utils(i)}}getWorkspace(){let i;return(i=this.miniWorkspaceBubble)==null?void 0:i.getWorkspace()}static reconnect(i,a,p){return Ee("MutatorIcon.reconnect","v10","v11","connection.reconnect"),i?i.reconnect(a,p):!1}static findParentWs(i){return Ee("MutatorIcon.findParentWs","v10","v11","workspace.getRootWorkspace"),i.getRootWorkspace()}},t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=Yo.MUTATOR,t.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,t.MutatorIcon$$module$build$src$core$icons$mutator_icon;var R0=Object.create(null),xE={allExtensions:R0};t.register$$module$build$src$core$extensions("parent_tooltip_when_inline",Ws);var Xd={TEST_ONLY:xE};Xd.apply=es,Xd.buildTooltipForDropdown=t.buildTooltipForDropdown$$module$build$src$core$extensions,Xd.buildTooltipWithFieldText=t.buildTooltipWithFieldText$$module$build$src$core$extensions,Xd.isRegistered=hi,Xd.register=t.register$$module$build$src$core$extensions,Xd.registerMixin=t.registerMixin$$module$build$src$core$extensions,Xd.registerMutator=t.registerMutator$$module$build$src$core$extensions,Xd.runAfterPageLoad=Ld,Xd.unregister=ki;var Vr;(function(i){i[i.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",i[i.MAC_ENTER=3]="MAC_ENTER",i[i.BACKSPACE=8]="BACKSPACE",i[i.TAB=9]="TAB",i[i.NUM_CENTER=12]="NUM_CENTER",i[i.ENTER=13]="ENTER",i[i.SHIFT=16]="SHIFT",i[i.CTRL=17]="CTRL",i[i.ALT=18]="ALT",i[i.PAUSE=19]="PAUSE",i[i.CAPS_LOCK=20]="CAPS_LOCK",i[i.ESC=27]="ESC",i[i.SPACE=32]="SPACE",i[i.PAGE_UP=33]="PAGE_UP",i[i.PAGE_DOWN=34]="PAGE_DOWN",i[i.END=35]="END",i[i.HOME=36]="HOME",i[i.LEFT=37]="LEFT",i[i.UP=38]="UP",i[i.RIGHT=39]="RIGHT",i[i.DOWN=40]="DOWN",i[i.PLUS_SIGN=43]="PLUS_SIGN",i[i.PRINT_SCREEN=44]="PRINT_SCREEN",i[i.INSERT=45]="INSERT",i[i.DELETE=46]="DELETE",i[i.ZERO=48]="ZERO",i[i.ONE=49]="ONE",i[i.TWO=50]="TWO",i[i.THREE=51]="THREE",i[i.FOUR=52]="FOUR",i[i.FIVE=53]="FIVE",i[i.SIX=54]="SIX",i[i.SEVEN=55]="SEVEN",i[i.EIGHT=56]="EIGHT",i[i.NINE=57]="NINE",i[i.FF_SEMICOLON=59]="FF_SEMICOLON",i[i.FF_EQUALS=61]="FF_EQUALS",i[i.FF_DASH=173]="FF_DASH",i[i.FF_HASH=163]="FF_HASH",i[i.QUESTION_MARK=63]="QUESTION_MARK",i[i.AT_SIGN=64]="AT_SIGN",i[i.A=65]="A",i[i.B=66]="B",i[i.C=67]="C",i[i.D=68]="D",i[i.E=69]="E",i[i.F=70]="F",i[i.G=71]="G",i[i.H=72]="H",i[i.I=73]="I",i[i.J=74]="J",i[i.K=75]="K",i[i.L=76]="L",i[i.M=77]="M",i[i.N=78]="N",i[i.O=79]="O",i[i.P=80]="P",i[i.Q=81]="Q",i[i.R=82]="R",i[i.S=83]="S",i[i.T=84]="T",i[i.U=85]="U",i[i.V=86]="V",i[i.W=87]="W",i[i.X=88]="X",i[i.Y=89]="Y",i[i.Z=90]="Z",i[i.META=91]="META",i[i.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",i[i.CONTEXT_MENU=93]="CONTEXT_MENU",i[i.NUM_ZERO=96]="NUM_ZERO",i[i.NUM_ONE=97]="NUM_ONE",i[i.NUM_TWO=98]="NUM_TWO",i[i.NUM_THREE=99]="NUM_THREE",i[i.NUM_FOUR=100]="NUM_FOUR",i[i.NUM_FIVE=101]="NUM_FIVE",i[i.NUM_SIX=102]="NUM_SIX",i[i.NUM_SEVEN=103]="NUM_SEVEN",i[i.NUM_EIGHT=104]="NUM_EIGHT",i[i.NUM_NINE=105]="NUM_NINE",i[i.NUM_MULTIPLY=106]="NUM_MULTIPLY",i[i.NUM_PLUS=107]="NUM_PLUS",i[i.NUM_MINUS=109]="NUM_MINUS",i[i.NUM_PERIOD=110]="NUM_PERIOD",i[i.NUM_DIVISION=111]="NUM_DIVISION",i[i.F1=112]="F1",i[i.F2=113]="F2",i[i.F3=114]="F3",i[i.F4=115]="F4",i[i.F5=116]="F5",i[i.F6=117]="F6",i[i.F7=118]="F7",i[i.F8=119]="F8",i[i.F9=120]="F9",i[i.F10=121]="F10",i[i.F11=122]="F11",i[i.F12=123]="F12",i[i.NUMLOCK=144]="NUMLOCK",i[i.SCROLL_LOCK=145]="SCROLL_LOCK",i[i.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",i[i.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",i[i.SEMICOLON=186]="SEMICOLON",i[i.DASH=189]="DASH",i[i.EQUALS=187]="EQUALS",i[i.COMMA=188]="COMMA",i[i.PERIOD=190]="PERIOD",i[i.SLASH=191]="SLASH",i[i.APOSTROPHE=192]="APOSTROPHE",i[i.TILDE=192]="TILDE",i[i.SINGLE_QUOTE=222]="SINGLE_QUOTE",i[i.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",i[i.BACKSLASH=220]="BACKSLASH",i[i.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",i[i.WIN_KEY=224]="WIN_KEY",i[i.MAC_FF_META=224]="MAC_FF_META",i[i.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",i[i.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",i[i.WIN_IME=229]="WIN_IME",i[i.VK_NONAME=252]="VK_NONAME",i[i.PHANTOM=255]="PHANTOM"})(Vr||(Vr={}));var Kd={};Kd.arc=mi,Kd.curve=Vs,Kd.line=Ho,Kd.lineOnAxis=$n,Kd.lineTo=su,Kd.moveBy=Hi,Kd.moveTo=Zs,Kd.point=Kn;var Qa={};Qa.Coordinate=vn,Qa.KeyCodes=Vr,Qa.Rect=Li,Qa.Size=ro,Qa.Svg=Ye,Qa.aria=Lu,Qa.array=tm,Qa.browserEvents=nh,Qa.colour=bf,Qa.deprecation=Rg,Qa.dom=Ea,Qa.extensions=Xd,Qa.idGenerator=rc,Qa.math=fm,Qa.object=yT,Qa.parsing=Ov,Qa.string=Dn,Qa.style=$c,Qa.svgMath=Cp,Qa.svgPaths=Kd,Qa.toolbox=wo,Qa.userAgent=pf,Qa.xml=Bd;var Lv={};Lv.register=gi,Lv.unregister=Hf;var ym=class extends As{constructor(i,a,p,w){super(a,p,w),this.text=i,this.workspace=a,this.anchor=p,this.ownerRect=w,this.paragraph=this.stringToSvg(i,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(i){this.text=i,Ke(this.paragraph),this.paragraph=this.stringToSvg(i,this.contentContainer),this.updateBubbleSize()}stringToSvg(i,a){return a=this.createParagraph(a),i=this.createSpans(a,i),this.workspace.RTL&&this.rightAlignSpans(a.getBBox().width,i),a}createParagraph(i){return re(Ye.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:As.BORDER_WIDTH},i)}createSpans(i,a){return a.split(`
`).map(p=>{const w=re(Ye.TSPAN,{dy:"1em",x:As.BORDER_WIDTH},i);return p=document.createTextNode(p),w.appendChild(p),w})}rightAlignSpans(i,a){for(const p of a)p.setAttribute("text-anchor","end"),p.setAttribute("x",`${i+As.BORDER_WIDTH}`)}updateBubbleSize(){const i=this.paragraph.getBBox();this.setSize(new ro(i.width+2*As.BORDER_WIDTH,i.height+2*As.BORDER_WIDTH),!0)}},la=class extends As{constructor(i,a,p){super(i,a,p),this.workspace=i,this.anchor=a,this.ownerRect=p,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new ro(160+As.DOUBLE_BORDER,80+As.DOUBLE_BORDER),this.MIN_SIZE=new ro(45+As.DOUBLE_BORDER,20+As.DOUBLE_BORDER),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(i){this.text=i,this.textArea.value=i,this.onTextChange()}addTextChangeListener(i){this.textChangeListeners.push(i)}addSizeChangeListener(i){this.sizeChangeListeners.push(i)}createEditor(i){i=re(Ye.FOREIGNOBJECT,{x:As.BORDER_WIDTH,y:As.BORDER_WIDTH},i);const a=document.createElementNS(xc,"body");a.setAttribute("xmlns",xc),a.className="blocklyMinimalBody";const p=document.createElementNS(xc,"textarea");return p.className="blocklyCommentTextarea",p.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),a.appendChild(p),i.appendChild(a),this.bindTextAreaEvents(p),setTimeout(()=>{p.focus()},0),{inputRoot:i,textArea:p}}bindTextAreaEvents(i){Ie(i,"wheel",this,a=>{a.stopPropagation()}),Ie(i,"focus",this,this.onStartEdit,!0),Ie(i,"change",this,this.onTextChange)}createResizeHandle(i){i=re(Ye.G,{class:this.workspace.RTL?"blocklyResizeSW":"blocklyResizeSE"},i);const a=2*As.BORDER_WIDTH;return re(Ye.POLYGON,{points:`0,${a} ${a},${a} ${a},0`},i),re(Ye.LINE,{class:"blocklyResizeLine",x1:a/3,y1:a-1,x2:a-1,y2:a/3},i),re(Ye.LINE,{class:"blocklyResizeLine",x1:2*a/3,y1:a-1,x2:a-1,y2:2*a/3},i),Ie(i,"pointerdown",this,this.onResizePointerDown),i}setSize(i,a=!1){i.width=Math.max(i.width,this.MIN_SIZE.width),i.height=Math.max(i.height,this.MIN_SIZE.height);const p=i.width-As.DOUBLE_BORDER,w=i.height-As.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${p}`),this.inputRoot.setAttribute("height",`${w}`),this.textArea.style.width=`${p-4}px`,this.textArea.style.height=`${w-4}px`,this.workspace.RTL?this.resizeGroup.setAttribute("transform",`translate(${As.DOUBLE_BORDER}, ${w}) scale(-1 1)`):this.resizeGroup.setAttribute("transform",`translate(${p}, ${w})`),super.setSize(i,a),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(i){this.bringToFront(),It(i)||(this.workspace.startDrag(i,new vn(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=Ie(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=Ie(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),i.stopPropagation()}onResizePointerUp(i){et(),this.resizePointerUpListener&&(it(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(it(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(i){i=this.workspace.moveDrag(i),this.setSize(new ro(this.workspace.RTL?-i.x:i.x,i.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const i of this.textChangeListeners)i()}onSizeChange(){for(const i of this.sizeChangeListeners)i()}};Ct(`
.blocklyCommentTextarea {
  background-color: #fef49c;
  border: 0;
  display: block;
  margin: 0;
  outline: 0;
  padding: 3px;
  resize: none;
  text-overflow: hidden;
}
`);var Jd=17,TT=160,ST=80,nd=class extends F_{constructor(i){super(i),this.sourceBlock=i,this.textBubble=this.textInputBubble=null,this.text="",this.bubbleSize=new ro(TT,ST),this.bubbleVisiblity=!1}getType(){return nd.TYPE}initView(i){this.svgRoot||(super.initView(i),re(Ye.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),re(Ye.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),re(Ye.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),Be(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let i;(i=this.textInputBubble)==null||i.dispose();let a;(a=this.textBubble)==null||a.dispose()}getWeight(){return nd.WEIGHT}getSize(){return new ro(Jd,Jd)}applyColour(){super.applyColour();const i=this.sourceBlock.style.colourPrimary;let a;(a=this.textInputBubble)==null||a.setColour(i);let p;(p=this.textBubble)==null||p.setColour(i)}updateEditable(){super.updateEditable(),this.bubbleIsVisible()&&(this.setBubbleVisible(!1),this.setBubbleVisible(!0))}onLocationChange(i){super.onLocationChange(i),i=this.getAnchorLocation();let a;(a=this.textInputBubble)==null||a.setAnchorLocation(i);let p;(p=this.textBubble)==null||p.setAnchorLocation(i)}setText(i){const a=this.text;ce(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,a,i)),this.text=i;let p;(p=this.textInputBubble)==null||p.setText(this.text);let w;(w=this.textBubble)==null||w.setText(this.text)}getText(){return this.text}setBubbleSize(i){this.bubbleSize=i;let a;(a=this.textInputBubble)==null||a.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(i){let a;this.text=(a=i.text)!=null?a:"";let p,w;this.bubbleSize=new ro((p=i.width)!=null?p:TT,(w=i.height)!=null?w:ST);let L;this.bubbleVisiblity=(L=i.pinned)!=null?L:!1,setTimeout(()=>this.setBubbleVisible(this.bubbleVisiblity),1)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var i=this.textInputBubble.getText();this.text!==i&&(ce(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,this.text,i)),this.text=i)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(i){(!i||!this.textBubble&&!this.textInputBubble)&&(i||this.textBubble||this.textInputBubble)&&(this.bubbleVisiblity=i,this.sourceBlock.rendered&&!this.sourceBlock.isInFlyout&&(i?(this.sourceBlock.isEditable()?this.showEditableBubble():this.showNonEditableBubble(),this.applyColour()):this.hideBubble(),ce(new(ke(So))(this.sourceBlock,i,"comment"))))}showEditableBubble(){this.textInputBubble=new la(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.textInputBubble.addTextChangeListener(()=>this.onTextChange()),this.textInputBubble.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.textBubble=new ym(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect())}hideBubble(){let i;(i=this.textInputBubble)==null||i.dispose(),this.textInputBubble=null;let a;(a=this.textBubble)==null||a.dispose(),this.textBubble=null}getAnchorLocation(){const i=Jd/2;return vn.sum(this.workspaceLocation,new vn(i,i))}getBubbleOwnerRect(){const i=this.sourceBlock.getSvgRoot().getBBox();return new Li(i.y,i.y+i.height,i.x,i.x+i.width)}};nd.TYPE=Yo.COMMENT,nd.WEIGHT=3,gi(nd.TYPE,nd);var cb=17,ep=class extends F_{constructor(i){super(i),this.sourceBlock=i,this.textMap=new Map,this.textBubble=null}getType(){return ep.TYPE}initView(i){this.svgRoot||(super.initView(i),re(Ye.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),re(Ye.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),re(Ye.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),Be(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let i;(i=this.textBubble)==null||i.dispose()}getWeight(){return ep.WEIGHT}getSize(){return new ro(cb,cb)}applyColour(){super.applyColour();let i;(i=this.textBubble)==null||i.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(i){super.onLocationChange(i);let a;(a=this.textBubble)==null||a.setAnchorLocation(this.getAnchorLocation())}addMessage(i,a){if(this.textMap.get(a)===i)return this;i?this.textMap.set(a,i):this.textMap.delete(a);let p;return(p=this.textBubble)==null||p.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(i){if(this.bubbleIsVisible()!==i){if(i)this.textBubble=new ym(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour();else{let a;(a=this.textBubble)==null||a.dispose(),this.textBubble=null}ce(new(ke(So))(this.sourceBlock,i,"warning"))}}getAnchorLocation(){const i=cb/2;return vn.sum(this.workspaceLocation,new vn(i,i))}getBubbleOwnerRect(){const i=this.sourceBlock.getSvgRoot().getBBox();return new Li(i.y,i.y+i.height,i.x,i.x+i.width)}};ep.TYPE=Yo.WARNING,ep.WEIGHT=2;var H_=class extends Error{constructor(i){super(`Tried to append an icon of type ${i.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=i}},Ac={};Ac.DuplicateIconType=H_;var An={};An.CommentIcon=nd,An.Icon=F_,An.IconType=Yo,An.MutatorIcon=t.MutatorIcon$$module$build$src$core$icons$mutator_icon,An.WarningIcon=ep,An.exceptions=Ac,An.registry=Lv;var k0,Ji;k0="PROCEDURE",t.DEFAULT_ARG$$module$build$src$core$procedures="x",Ji={CATEGORY_NAME:k0,DEFAULT_ARG:t.DEFAULT_ARG$$module$build$src$core$procedures},Ji.ObservableProcedureMap=A0,Ji.allProcedures=Eh,Ji.findLegalName=t.findLegalName$$module$build$src$core$procedures,Ji.flyoutCategory=yn,Ji.getCallers=ou,Ji.getDefinition=t.getDefinition$$module$build$src$core$procedures,Ji.isNameUsed=Mn,Ji.isProcedureBlock=ma,Ji.mutateCallers=t.mutateCallers$$module$build$src$core$procedures,Ji.mutatorOpenListener=_c,Ji.rename=t.rename$$module$build$src$core$procedures;var hb=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(i){return Object.prototype.hasOwnProperty.call(this,i)||(this[i]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[i]}isField(i){return i.type&this.FIELD}isHat(i){return i.type&this.HAT}isIcon(i){return i.type&this.ICON}isSpacer(i){return i.type&this.SPACER}isInRowSpacer(i){return i.type&this.IN_ROW_SPACER}isInput(i){return i.type&this.INPUT}isExternalInput(i){return i.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(i){return i.type&this.INLINE_INPUT}isStatementInput(i){return i.type&this.STATEMENT_INPUT}isPreviousConnection(i){return i.type&this.PREVIOUS_CONNECTION}isNextConnection(i){return i.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(i){return i.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(i){return i.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(i){return i.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(i){return i.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(i){return i.type&this.RIGHT_SQUARE_CORNER}isCorner(i){return i.type&this.CORNER}isJaggedEdge(i){return i.type&this.JAGGED_EDGE}isRow(i){return i.type&this.ROW}isBetweenRowSpacer(i){return i.type&this.BETWEEN_ROW_SPACER}isTopRow(i){return i.type&this.TOP_ROW}isBottomRow(i){return i.type&this.BOTTOM_ROW}isTopOrBottomRow(i){return i.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(i){return i.type&this.INPUT_ROW}},ht=new hb,or=class{constructor(i){this.centerline=this.xPos=this.height=this.width=0,this.constants_=i,this.type=ht.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},Nv=class{constructor(i){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=i,this.type=ht.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let i=this.elements.length-1;0<=i;i--){const a=this.elements[i];if(ht.isInput(a))return a}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let i=0;i<this.elements.length;i++){const a=this.elements[i];if(ht.isSpacer(a))return a}return null}getLastSpacer(){for(let i=this.elements.length-1;0<=i;i--){const a=this.elements[i];if(ht.isSpacer(a))return a}return null}},Dv=class extends Nv{constructor(i){super(i),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=ht.BOTTOM_ROW}hasLeftSquareCorner(i){return!!i.outputConnection||!!i.getNextBlock()}hasRightSquareCorner(i){return!0}measure(){let i=0,a=0,p=0;for(let w=0;w<this.elements.length;w++){const L=this.elements[w];a+=L.width,ht.isSpacer(L)||(ht.isNextConnection(L)?p=Math.max(p,L.height):i=Math.max(i,L.height))}this.width=Math.max(this.minWidth,a),this.height=Math.max(this.minHeight,i)+p,this.descenderHeight=p,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},rd=class extends or{constructor(i,a){super(i),this.connectionModel=a,this.type|=ht.CONNECTION,this.shape=this.constants_.shapeFor(a),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=a.isHighlighted()}},sg=class extends rd{constructor(i,a){super(i,a.connection),this.input=a,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=ht.INPUT,this.align=a.align,(this.connectedBlock=a.connection&&a.connection.targetBlock()?a.connection.targetBlock():null)?(i=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=i.width,this.connectedBlockHeight=i.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},G_=class extends sg{constructor(i,a){super(i,a),this.height=0,this.type|=ht.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},O0=class extends or{constructor(i,a,p){super(i),this.field=a,this.parentInput=p,this.isEditable=a.EDITABLE,this.flipRtl=a.getFlipRtl(),this.type|=ht.FIELD,i=this.field.getSize(),this.height=i.height,this.width=i.width}},db=class extends or{constructor(i){super(i),this.type|=ht.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},wT=class extends or{constructor(i,a){super(i),this.icon=a,this.flipRtl=!1,this.isVisible=iu(a)&&a.bubbleIsVisible(),this.type|=ht.ICON,i=a.getSize(),this.height=i.height,this.width=i.width}},qd=class extends or{constructor(i,a){super(i),this.type=this.type|ht.SPACER|ht.IN_ROW_SPACER,this.width=a,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},fb=class extends sg{constructor(i,a){super(i,a),this.type|=ht.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},Pv=class extends sg{constructor(i,a){super(i,a),this.type|=ht.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},pb=class extends Nv{constructor(i){super(i),this.connectedBlockWidths=0,this.type|=ht.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let i=0;for(let a=0;a<this.elements.length;a++){const p=this.elements[a];this.width+=p.width,ht.isInput(p)&&p instanceof sg&&(ht.isStatementInput(p)&&p instanceof Pv?i+=p.connectedBlockWidth:ht.isExternalInput(p)&&p instanceof G_&&p.connectedBlockWidth!==0&&(i+=p.connectedBlockWidth-p.connectionWidth)),ht.isSpacer(p)||(this.height=Math.max(this.height,p.height))}this.connectedBlockWidths=i,this.widthWithConnectedBlocks=this.width+i}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},ET=class extends or{constructor(i){super(i),this.type|=ht.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},xT=class extends rd{constructor(i,a){super(i,a),this.type|=ht.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},$T=class extends rd{constructor(i,a){super(i,a),this.connectionOffsetX=0,this.type|=ht.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},CT=class extends rd{constructor(i,a){super(i,a),this.type|=ht.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},bm=class extends or{constructor(i,a){super(i),this.type=(a&&a!=="left"?ht.RIGHT_ROUND_CORNER:ht.LEFT_ROUND_CORNER)|ht.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},mb=class extends Nv{constructor(i,a,p){super(i),this.height=a,this.width=p,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|ht.SPACER|ht.BETWEEN_ROW_SPACER,this.elements=[new qd(this.constants_,p)]}measure(){}},Tm=class extends or{constructor(i,a){super(i),this.type=(a&&a!=="left"?ht.RIGHT_SQUARE_CORNER:ht.LEFT_SQUARE_CORNER)|ht.CORNER,this.width=this.height=this.constants_.NO_PADDING}},gb=class extends Nv{constructor(i){super(i),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=ht.TOP_ROW}hasLeftSquareCorner(i){const a=(i.hat?i.hat==="cap":this.constants_.ADD_START_HATS)&&!i.outputConnection&&!i.previousConnection,p=i.getPreviousBlock();return!!i.outputConnection||a||(p?p.getNextBlock()===i:!1)}hasRightSquareCorner(i){return!0}measure(){let i=0,a=0,p=0;for(let w=0;w<this.elements.length;w++){const L=this.elements[w];a+=L.width,ht.isSpacer(L)||(ht.isHat(L)&&L instanceof db?p=Math.max(p,L.ascenderHeight):i=Math.max(i,L.height))}this.width=Math.max(this.minWidth,a),this.height=Math.max(this.minHeight,i)+p,this.capline=this.ascenderHeight=p,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Bv=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=Hi(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(i){this.blockStyles=Object.create(null);const a=i.blockStyles;for(const p in a)this.blockStyles[p]=this.validatedBlockStyle_(a[p]);this.setDynamicProperties_(i)}setDynamicProperties_(i){this.setFontConstants_(i),this.setComponentConstants_(i),this.ADD_START_HATS=i.startHats!==void 0?i.startHats:this.ADD_START_HATS}setFontConstants_(i){i.fontStyle&&i.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=i.fontStyle.family),i.fontStyle&&i.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=i.fontStyle.weight),i.fontStyle&&i.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=i.fontStyle.size),i=ze("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=i.height,this.FIELD_TEXT_BASELINE=i.baseline}setComponentConstants_(i){this.CURSOR_COLOUR=i.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=i.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=i.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(i.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(i){const a="auto_"+i;return this.blockStyles[a]||(this.blockStyles[a]=this.createBlockStyle_(i)),{style:this.blockStyles[a],name:a}}getBlockStyle(i){return this.blockStyles[i||""]||(i&&i.indexOf("auto_")===0?this.getBlockStyleForColour(i.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(i){return this.validatedBlockStyle_({colourPrimary:i})}validatedBlockStyle_(i){const a={};return i&&Object.assign(a,i),i=Zi(a.colourPrimary||"#000"),a.colourPrimary=i.hex,a.colourSecondary=a.colourSecondary?Zi(a.colourSecondary).hex:this.generateSecondaryColour_(a.colourPrimary),a.colourTertiary=a.colourTertiary?Zi(a.colourTertiary).hex:this.generateTertiaryColour_(a.colourPrimary),a.hat=a.hat||"",a}generateSecondaryColour_(i){return jc("#fff",i,.6)||i}generateTertiaryColour_(i){return jc("#fff",i,.3)||i}dispose(){this.embossFilter&&Ke(this.embossFilter),this.disabledPattern&&Ke(this.disabledPattern),this.debugFilter&&Ke(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const i=this.JAGGED_TEETH_HEIGHT,a=this.JAGGED_TEETH_WIDTH,p=Ho([Kn(a,i/4),Kn(2*-a,i/2),Kn(a,i/4)]);return{height:i,width:a,path:p}}makeStartHat(){const i=this.START_HAT_HEIGHT,a=this.START_HAT_WIDTH,p=Vs("c",[Kn(30,-i),Kn(70,-i),Kn(a,0)]);return{height:i,width:a,path:p}}makePuzzleTab(){function i(j){j=j?-1:1;const _e=-j;var We=p/2;const Jt=We+2.5,jn=We+.5,Tl=Kn(-a,j*We);return We=Kn(a,j*We),Vs("c",[Kn(0,j*Jt),Kn(-a,_e*jn),Tl])+Vs("s",[Kn(a,2.5*_e),We])}const a=this.TAB_WIDTH,p=this.TAB_HEIGHT,w=i(!0),L=i(!1);return{type:this.SHAPES.PUZZLE,width:a,height:p,pathDown:L,pathUp:w}}makeNotch(){function i(_e){return Ho([Kn(_e*w,p),Kn(3*_e,0),Kn(_e*w,-p)])}const a=this.NOTCH_WIDTH,p=this.NOTCH_HEIGHT,w=(a-3)/2,L=i(1),j=i(-1);return{type:this.SHAPES.NOTCH,width:a,height:p,pathLeft:L,pathRight:j}}makeInsideCorners(){const i=this.CORNER_RADIUS,a=mi("a","0 0,0",i,Kn(-i,i)),p=mi("a","0 0,0",i,Kn(i,i));return{width:i,height:i,pathTop:a,pathBottom:p}}makeOutsideCorners(){const i=this.CORNER_RADIUS,a=Hi(0,i)+mi("a","0 0,1",i,Kn(i,-i)),p=mi("a","0 0,1",i,Kn(i,i)),w=mi("a","0 0,1",i,Kn(-i,-i)),L=mi("a","0 0,1",i,Kn(-i,i));return{topLeft:a,topRight:p,bottomRight:L,bottomLeft:w,rightHeight:i}}shapeFor(i){switch(i.type){case Un.INPUT_VALUE:case Un.OUTPUT_VALUE:return this.PUZZLE_TAB;case Un.PREVIOUS_STATEMENT:case Un.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(i,a,p){this.injectCSS_(a,p),this.defs=re(Ye.DEFS,{},i),i=re(Ye.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),re(Ye.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},i),a=re(Ye.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},i),re(Ye.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},a),re(Ye.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},i),re(Ye.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},i),this.embossFilterId=i.id,this.embossFilter=i,i=re(Ye.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),re(Ye.RECT,{width:10,height:10,fill:"#aaa"},i),re(Ye.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},i),this.disabledPatternId=i.id,this.disabledPattern=i,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const i=re(Ye.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),a=re(Ye.FECOMPONENTTRANSFER,{result:"outBlur"},i);re(Ye.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),re(Ye.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},i),re(Ye.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},i),this.debugFilterId=i.id,this.debugFilter=i}}injectCSS_(i,a){a=this.getCSS_(a),i="blockly-renderer-style-"+i,this.cssNode=document.getElementById(i);const p=a.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=p:(a=document.createElement("style"),a.id=i,i=document.createTextNode(p),a.appendChild(i),document.head.insertBefore(a,document.head.firstChild),this.cssNode=a)}getCSS_(i){return[`${i} .blocklyText, `,`${i} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${i} .blocklyText {`,"fill: #fff;","}",`${i} .blocklyNonEditableText>rect,`,`${i} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${i} .blocklyNonEditableText>text,`,`${i} .blocklyEditableText>text {`,"fill: #000;","}",`${i} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${i} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${i} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${i} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${i} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${i} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${i} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${i} .blocklyReplaceable .blocklyPathLight,`,`${i} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${i} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Fv=class{constructor(i,a){this.inlinePath_=this.outlinePath_="",this.block_=i,this.info_=a,this.topLeft_=i.getRelativeToSurfaceXY(),this.constants_=a.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}hideHiddenIcons_(){Ee("hideHiddenIcons_","v10","v11")}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}drawOutline_(){this.drawTop_();for(let i=1;i<this.info_.rows.length-1;i++){const a=this.info_.rows[i];a.hasJaggedEdge?this.drawJaggedEdge_(a):a.hasStatement?this.drawStatementInput_(a):a.hasExternalInput?this.drawValueInput_(a):this.drawRightSideRow_(a)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const i=this.info_.topRow,a=i.elements;this.positionPreviousConnection_(),this.outlinePath_+=Hi(i.xPos,this.info_.startY);for(let p=0,w;w=a[p];p++)ht.isLeftRoundedCorner(w)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:ht.isRightRoundedCorner(w)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:ht.isPreviousConnection(w)&&w instanceof rd?this.outlinePath_+=w.shape.pathLeft:ht.isHat(w)?this.outlinePath_+=this.constants_.START_HAT.path:ht.isSpacer(w)&&(this.outlinePath_+=$n("h",w.width));this.outlinePath_+=$n("v",i.height)}drawJaggedEdge_(i){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+$n("v",i.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(i){const a=i.getLastInput();this.positionExternalValueConnection_(i);const p=ys(a.shape)?a.shape.pathDown(a.height):a.shape.pathDown;this.outlinePath_+=$n("H",a.xPos+a.width)+p+$n("v",i.height-a.connectionHeight)}drawStatementInput_(i){var a=i.getLastInput();if(a){var p=a.xPos+a.notchOffset+a.shape.width;a=a.shape.pathRight+$n("h",-(a.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var w=i.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=$n("H",p)+a+$n("v",w)+this.constants_.INSIDE_CORNERS.pathBottom+$n("H",i.xPos+i.width),this.positionStatementInputConnection_(i)}}drawRightSideRow_(i){this.outlinePath_+=$n("V",i.yPos+i.height)}drawBottom_(){const i=this.info_.bottomRow,a=i.elements;this.positionNextConnection_();let p=0,w="";for(let L=a.length-1,j;j=a[L];L--)ht.isNextConnection(j)&&j instanceof rd?w+=j.shape.pathRight:ht.isLeftSquareCorner(j)?w+=$n("H",i.xPos):ht.isLeftRoundedCorner(j)?w+=this.constants_.OUTSIDE_CORNERS.bottomLeft:ht.isRightRoundedCorner(j)?(w+=this.constants_.OUTSIDE_CORNERS.bottomRight,p=this.constants_.OUTSIDE_CORNERS.rightHeight):ht.isSpacer(j)&&(w+=$n("h",-1*j.width));this.outlinePath_+=$n("V",i.baseline-p),this.outlinePath_+=w}drawLeft_(){var i=this.info_.outputConnection;if(this.positionOutputConnection_(),i){const a=i.connectionOffsetY+i.height;i=ys(i.shape)?i.shape.pathUp(i.height):i.shape.pathUp,this.outlinePath_+=$n("V",a)+i}this.outlinePath_+="z"}drawInternals_(){for(let i=0,a;a=this.info_.rows[i];i++)for(let p=0,w;w=a.elements[p];p++)ht.isInlineInput(w)?this.drawInlineInput_(w):(ht.isIcon(w)||ht.isField(w))&&this.layoutField_(w)}layoutField_(i){const a=i.centerline-i.height/2;let p=i.xPos;var w="";this.info_.RTL&&(p=-(p+i.width),i.flipRtl&&(p+=i.width,w="scale(-1 1)")),ht.isIcon(i)?(w=i.icon,w.setOffsetInBlock(new vn(p,a)),this.info_.isInsertionMarker&&w.hideForInsertionMarker()):(i=i.field.getSvgRoot(),i.setAttribute("transform","translate("+p+","+a+")"+w),this.info_.isInsertionMarker&&i.setAttribute("display","none"))}drawInlineInput_(i){const a=i.width,p=i.height,w=i.connectionOffsetY,L=i.connectionHeight+w;this.inlinePath_+=Zs(i.xPos+i.connectionWidth,i.centerline-p/2)+$n("v",w)+i.shape.pathDown+$n("v",p-L)+$n("h",a-i.connectionWidth)+$n("v",-p)+"z",this.positionInlineInputConnection_(i)}positionInlineInputConnection_(i){const a=i.centerline-i.height/2;if(i.connectionModel){let p=i.xPos+i.connectionWidth+i.connectionOffsetX;this.info_.RTL&&(p*=-1),i.connectionModel.setOffsetInBlock(p,a+i.connectionOffsetY)}}positionStatementInputConnection_(i){const a=i.getLastInput();if(a!=null&&a.connectionModel){let p=i.xPos+i.statementEdge+a.notchOffset;this.info_.RTL&&(p*=-1),a.connectionModel.setOffsetInBlock(p,i.yPos)}}positionExternalValueConnection_(i){const a=i.getLastInput();if(a&&a.connectionModel){let p=i.xPos+i.width;this.info_.RTL&&(p*=-1),a.connectionModel.setOffsetInBlock(p,i.yPos)}}positionPreviousConnection_(){const i=this.info_.topRow;if(i.connection){const a=i.xPos+i.notchOffset;i.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-a:a,0)}}positionNextConnection_(){const i=this.info_.bottomRow;if(i.connection){const a=i.connection,p=a.xPos;a.connectionModel.setOffsetInBlock(this.info_.RTL?-p:p,i.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const i=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-i:i,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const i of this.info_.rows)for(const a of i.elements)if(a instanceof rd)if(a.highlighted)this.drawConnectionHighlightPath(a);else{let p,w;(w=(p=this.block_.pathObject).removeConnectionHighlight)==null||w.call(p,a.connectionModel)}}drawConnectionHighlightPath(i){const a=i.connectionModel;i=a.type===Un.INPUT_VALUE||a.type===Un.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(i):this.getStatementConnectionHighlightPath(i);const p=a.getSourceBlock();let w,L;(L=(w=p.pathObject).addConnectionHighlight)==null||L.call(w,a,i,a.getOffsetInBlock(),p.RTL)}getExpressionConnectionHighlightPath(i){let a="";return ys(i.shape)?a=i.shape.pathDown(i.height):fl(i.shape)&&(a=i.shape.pathDown),i=this.constants_.TAB_OFFSET_FROM_TOP,Hi(0,-i)+$n("v",i)+a+$n("v",i)}getStatementConnectionHighlightPath(i){if(!as(i.shape))throw Error("Statement connections should have notch shapes");const a=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return Hi(-a,0)+$n("h",a)+i.shape.pathLeft+$n("h",a)}};(function(i){i[i.LEFT=-1]="LEFT",i[i.CENTRE=0]="CENTRE",i[i.RIGHT=1]="RIGHT"})(t.Align$$module$build$src$core$inputs$align||(t.Align$$module$build$src$core$inputs$align={})),t.Align$$module$build$src$core$inputs$align;var wi=class extends Wi{constructor(i,a,p){super(Wi.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,i!==Wi.SKIP_SETUP&&(p?this.configure_(p):this.class=a||null,this.setValue(i))}configure_(i){super.configure_(i),i.class&&(this.class=i.class)}initView(){this.createTextElement_(),this.class&&Be(this.getTextElement(),this.class)}doClassValidation_(i){return i==null?null:`${i}`}setClass(i){this.textElement_&&(this.class&&yt(this.textElement_,this.class),i&&Be(this.textElement_,i)),this.class=i}static fromJson(i){return new this(Xr(i.text),void 0,i)}};xs("field_label",wi),wi.prototype.DEFAULT_VALUE="";var rs=class{constructor(i,a){this.name=i,this.sourceBlock=a,this.fieldRow=[],this.align=t.Align$$module$build$src$core$inputs$input.LEFT,this.visible=!0,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(i,a){return this.insertFieldAt(this.fieldRow.length,i,a),this}insertFieldAt(i,a,p){if(0>i||i>this.fieldRow.length)throw Error("index "+i+" out of bounds.");return(a||a===""&&p)&&(typeof a=="string"&&(a=t.fromJson$$module$build$src$core$field_registry({type:"field_label",text:a})),a.setSourceBlock(this.sourceBlock),this.sourceBlock.rendered&&(a.init(),a.applyColour()),a.name=p,a.setVisible(this.isVisible()),a.prefixField&&(i=this.insertFieldAt(i,a.prefixField)),this.fieldRow.splice(i,0,a),i++,a.suffixField&&(i=this.insertFieldAt(i,a.suffixField)),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours())),i}removeField(i,a){for(let p=0,w;w=this.fieldRow[p];p++)if(w.name===i)return w.dispose(),this.fieldRow.splice(p,1),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours()),!0;if(a)return!1;throw Error('Field "'+i+'" not found.')}isVisible(){return this.visible}setVisible(i){let a=[];if(this.visible===i)return a;this.visible=i;for(let w=0,L;L=this.fieldRow[w];w++)L.setVisible(i);if(this.connection){var p=this.connection;i?a=p.startTrackingAll():p.stopTrackingAll(),(p=p.targetBlock())&&(p.getSvgRoot().style.display=i?"block":"none")}return a}markDirty(){for(let i=0,a;a=this.fieldRow[i];i++)a.markDirty()}setCheck(i){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(i),this}setAlign(i){return this.align=i,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(i){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(i),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let i=0;i<this.fieldRow.length;i++)this.fieldRow[i].init()}dispose(){for(let i=0,a;a=this.fieldRow[i];i++)a.dispose();this.connection&&this.connection.dispose()}makeConnection(i){return this.sourceBlock.makeConnection_(i)}},MT;(function(i){i=i.Align||(i.Align={}),i[i.LEFT=-1]="LEFT",i[i.CENTRE=0]="CENTRE",i[i.RIGHT=1]="RIGHT"})(rs||(rs={})),t.Align$$module$build$src$core$inputs$input=rs.Align,MT={Align:t.Align$$module$build$src$core$inputs$input},MT.Input=rs;var Pp=class extends rs{constructor(i,a){super(i,a),this.name=i,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},Sm=class extends rs{constructor(i,a){super(i,a),this.name=i,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},id=class extends rs{constructor(i,a){if(!i)throw Error("Statement inputs must have a non-empty name");super(i,a),this.name=i,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(Un.NEXT_STATEMENT)}},AT;t.ValueInput$$module$build$src$core$inputs$value_input=class extends rs{constructor(i,a){if(!i)throw Error("Value inputs must have a non-empty name");super(i,a),this.name=i,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(Un.INPUT_VALUE)}},AT={},AT.ValueInput=t.ValueInput$$module$build$src$core$inputs$value_input;var L0=class{constructor(i,a){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=i,this.block_=a,this.constants_=this.renderer_.getConstants(),this.outputConnection=a.outputConnection?new $T(this.constants_,a.outputConnection):null,this.isInline=a.getInputsInline()&&!a.isCollapsed(),this.isCollapsed=a.isCollapsed(),this.isInsertionMarker=a.isInsertionMarker(),this.RTL=a.RTL,this.topRow=new gb(this.constants_),this.bottomRow=new Dv(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let i=new pb(this.constants_);this.inputRows.push(i);var a=this.block_.getIcons();for(let p=0,w;w=a[p];p++){const L=new wT(this.constants_,w);this.isCollapsed&&!w.isShownWhenCollapsed()||i.elements.push(L)}a=void 0;for(let p=0,w;w=this.block_.inputList[p];p++)if(w.isVisible()){this.shouldStartNewRow_(w,a)&&(this.rows.push(i),i=new pb(this.constants_),this.inputRows.push(i));for(let L=0,j;j=w.fieldRow[L];L++)i.elements.push(new O0(this.constants_,j,w));this.addInput_(w,i),a=w}this.isCollapsed&&(i.hasJaggedEdge=!0,i.elements.push(new ET(this.constants_))),(i.elements.length||i.hasDummyInput)&&this.rows.push(i),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var i=!!this.block_.previousConnection;const a=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!i;let p=this.topRow.hasLeftSquareCorner(this.block_)?Tm:bm;this.topRow.elements.push(new p(this.constants_)),a?(i=new db(this.constants_),this.topRow.elements.push(i),this.topRow.capline=i.ascenderHeight):i&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new CT(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof id&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,p=this.topRow.hasRightSquareCorner(this.block_)?Tm:bm,this.topRow.elements.push(new p(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof id?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new Tm(this.constants_)):this.bottomRow.elements.push(new bm(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new xT(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new Tm(this.constants_,"right")):this.bottomRow.elements.push(new bm(this.constants_,"right"))}addInput_(i,a){this.isInline&&i instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new fb(this.constants_,i)),a.hasInlineInput=!0):i instanceof id?(a.elements.push(new Pv(this.constants_,i)),a.hasStatement=!0):i instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new G_(this.constants_,i)),a.hasExternalInput=!0):(i instanceof Pp||i instanceof Sm)&&(a.minHeight=Math.max(a.minHeight,i.getSourceBlock()&&i.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),a.hasDummyInput=!0),a.align===null&&(a.align=i.align)}shouldStartNewRow_(i,a){return a?a instanceof Sm||i instanceof id||a instanceof id?!0:i instanceof t.ValueInput$$module$build$src$core$inputs$value_input||i instanceof Pp||a instanceof t.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let i=0,a;a=this.rows[i];i++){const p=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new qd(this.constants_,this.getInRowSpacing_(null,p[0]))),p.length){for(let w=0;w<p.length-1;w++){a.elements.push(p[w]);const L=this.getInRowSpacing_(p[w],p[w+1]);a.elements.push(new qd(this.constants_,L))}a.elements.push(p[p.length-1]),a.endsWithElemSpacer()&&a.elements.push(new qd(this.constants_,this.getInRowSpacing_(p[p.length-1],null)))}}}getInRowSpacing_(i,a){if(!i&&a&&ht.isStatementInput(a))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(i&&ht.isInput(i)&&!a){if(ht.isExternalInput(i))return this.constants_.NO_PADDING;if(ht.isInlineInput(i))return this.constants_.LARGE_PADDING;if(ht.isStatementInput(i))return this.constants_.NO_PADDING}return i&&ht.isLeftSquareCorner(i)&&a&&(ht.isPreviousConnection(a)||ht.isNextConnection(a))?a.notchOffset:i&&ht.isLeftRoundedCorner(i)&&a&&(ht.isPreviousConnection(a)||ht.isNextConnection(a))?a.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let i=0,a=0,p=0;for(let L=0,j;j=this.rows[L];L++){if(j.measure(),a=Math.max(a,j.width),j.hasStatement){var w=j.getLastInput();let _e,We;w=j.width-((We=(_e=w)==null?void 0:_e.width)!=null?We:0),i=Math.max(i,w)}p=Math.max(p,j.widthWithConnectedBlocks)}this.statementEdge=i,this.width=a;for(let L=0,j;j=this.rows[L];L++)j.hasStatement&&(j.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(a,p),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let a=0,p;p=this.rows[a];a++)if(p.hasStatement)this.alignStatementRow_(p);else{var i=p.width;i=this.getDesiredRowWidth_(p)-i,0<i&&this.addAlignmentPadding_(p,i),ht.isTopOrBottomRow(p)&&(p.widthWithConnectedBlocks=p.width)}}getDesiredRowWidth_(i){return this.width-this.startX}addAlignmentPadding_(i,a){const p=i.getFirstSpacer(),w=i.getLastSpacer();if((i.hasExternalInput||i.hasStatement)&&(i.widthWithConnectedBlocks+=a),i.align===t.Align$$module$build$src$core$inputs$align.LEFT&&w)w.width+=a;else if(i.align===t.Align$$module$build$src$core$inputs$align.CENTRE&&p&&w)p.width+=a/2,w.width+=a/2;else if(i.align===t.Align$$module$build$src$core$inputs$align.RIGHT&&p)p.width+=a;else if(w)w.width+=a;else return;i.width+=a}alignStatementRow_(i){const a=i.getLastInput();if(a){var p=i.width-a.width,w=this.statementEdge;p=w-p,0<p&&this.addAlignmentPadding_(i,p),p=i.width,w=this.getDesiredRowWidth_(i),a.width+=w-p,a.height=Math.max(a.height,i.height),i.width+=w-p,i.widthWithConnectedBlocks=Math.max(i.width,this.statementEdge+i.connectedBlockWidths)}}addRowSpacing_(){const i=this.rows;this.rows=[];for(let a=0;a<i.length;a++)this.rows.push(i[a]),a!==i.length-1&&this.rows.push(this.makeSpacerRow_(i[a],i[a+1]))}makeSpacerRow_(i,a){var p=this.getSpacerRowHeight_(i,a);const w=this.getSpacerRowWidth_(i,a);return p=new mb(this.constants_,p,w),i.hasStatement&&(p.followsStatement=!0),a.hasStatement&&(p.precedesStatement=!0),p}getSpacerRowWidth_(i,a){return this.width-this.startX}getSpacerRowHeight_(i,a){return this.constants_.MEDIUM_PADDING}getElemCenterline_(i,a){return ht.isSpacer(a)?i.yPos+a.height/2:ht.isBottomRow(i)?(i=i.yPos+i.height-i.descenderHeight,ht.isNextConnection(a)?i+a.height/2:i-a.height/2):ht.isTopRow(i)?ht.isHat(a)?i.capline-a.height/2:i.capline+a.height/2:i.yPos+i.height/2}recordElemPositions_(i){let a=i.xPos;for(let p=0,w;w=i.elements[p];p++)ht.isSpacer(w)&&(w.height=i.height),w.xPos=a,w.centerline=this.getElemCenterline_(i,w),a+=w.width}finalize_(){let i=0,a=0;for(let p=0,w;w=this.rows[p];p++)w.yPos=a,w.xPos=this.startX,a+=w.height,i=Math.max(i,w.widthWithConnectedBlocks),this.recordElemPositions_(w);if(this.outputConnection&&this.block_.nextConnection){const p=this.block_.nextConnection.targetBlock();p&&(i=Math.max(i,p.getHeightWidth().width))}this.widthWithChildren=i+this.startX,this.height=a,this.startY=this.topRow.capline,this.bottomRow.baseline=a-this.bottomRow.descenderHeight}getMeasureableForConnection(i){let a;if(((a=this.outputConnection)==null?void 0:a.connectionModel)===i)return this.outputConnection;for(const p of this.rows)for(const w of p.elements)if(w instanceof rd&&w.connectionModel===i)return w;return null}},tn=class{constructor(i,a,p){if(this.wsCoordinate=null,!a)throw Error("Cannot create a node without a location.");this.type=i,this.isConnectionLocation=tn.isConnectionType(i),this.location=a,this.processParams(p||null)}processParams(i){i&&i.wsCoordinate&&(this.wsCoordinate=i.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var i=this.location.getParentInput();const a=i.getSourceBlock();for(i=a.inputList.indexOf(i),i+=1;i<a.inputList.length;i++){const p=a.inputList[i],w=p.fieldRow;for(let L=0;L<w.length;L++){const j=w[L];if(j.isClickable()||tn.NAVIGATE_ALL_FIELDS)return tn.createFieldNode(j)}if(p.connection)return tn.createInputNode(p)}return null}findNextForField(){var i=this.location,a=i.getParentInput();const p=i.getSourceBlock();if(!p)throw Error("The current AST location is not associated with a block");var w=p.inputList.indexOf(a);for(i=a.fieldRow.indexOf(i)+1;w<p.inputList.length;w++){a=p.inputList[w];const L=a.fieldRow;for(;i<L.length;){if(L[i].isClickable()||tn.NAVIGATE_ALL_FIELDS)return tn.createFieldNode(L[i]);i++}if(i=0,a.connection)return tn.createInputNode(a)}return null}findPrevForInput(){const i=this.location.getParentInput(),a=i.getSourceBlock();for(var p=a.inputList.indexOf(i);0<=p;p--){var w=a.inputList[p];if(w.connection&&w!==i)return tn.createInputNode(w);w=w.fieldRow;for(let L=w.length-1;0<=L;L--){const j=w[L];if(j.isClickable()||tn.NAVIGATE_ALL_FIELDS)return tn.createFieldNode(j)}}return null}findPrevForField(){var i=this.location;const a=i.getParentInput(),p=i.getSourceBlock();if(!p)throw Error("The current AST location is not associated with a block");var w=p.inputList.indexOf(a);for(i=a.fieldRow.indexOf(i)-1;0<=w;w--){var L=p.inputList[w];if(L.connection&&L!==a)return tn.createInputNode(L);for(L=L.fieldRow;-1<i;){if(L[i].isClickable()||tn.NAVIGATE_ALL_FIELDS)return tn.createFieldNode(L[i]);i--}0<=w-1&&(i=p.inputList[w-1].fieldRow.length-1)}return null}navigateBetweenStacks(i){var a=this.getLocation();if(a.getSourceBlock){var p=a.getSourceBlock();p&&(a=p)}if(!a||a.isDeadOrDying())return null;p=a.getRootBlock(),a=p.workspace.getTopBlocks(!0);for(let w=0;w<a.length;w++)if(p.id===a[w].id)return i=w+(i?1:-1),i===-1||i===a.length?null:tn.createStackNode(a[i]);throw Error("Couldn't find "+(i?"next":"previous")+" stack?!")}findTopASTNodeForBlock(i){const a=pl(i);return a?tn.createConnectionNode(a):tn.createBlockNode(i)}getOutAstNodeForBlock(i){if(!i)return null;i=i.getTopStackBlock();const a=pl(i);return a&&a.targetConnection&&a.targetConnection.getParentInput()?tn.createInputNode(a.targetConnection.getParentInput()):tn.createStackNode(i)}findFirstFieldOrInput(i){i=i.inputList;for(let a=0;a<i.length;a++){const p=i[a],w=p.fieldRow;for(let L=0;L<w.length;L++){const j=w[L];if(j.isClickable()||tn.NAVIGATE_ALL_FIELDS)return tn.createFieldNode(j)}if(p.connection)return tn.createInputNode(p)}return null}getSourceBlock(){return this.getType()===tn.types.BLOCK?this.getLocation():this.getType()===tn.types.STACK?this.getLocation():this.getType()===tn.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case tn.types.STACK:return this.navigateBetweenStacks(!0);case tn.types.OUTPUT:return tn.createBlockNode(this.location.getSourceBlock());case tn.types.FIELD:return this.findNextForField();case tn.types.INPUT:return this.findNextForInput();case tn.types.BLOCK:const i=this.location.nextConnection;if(!i)break;return tn.createConnectionNode(i);case tn.types.PREVIOUS:return tn.createBlockNode(this.location.getSourceBlock());case tn.types.NEXT:return tn.createConnectionNode(this.location.targetConnection)}return null}in(){switch(this.type){case tn.types.WORKSPACE:const i=this.location.getTopBlocks(!0);if(0<i.length)return tn.createStackNode(i[0]);break;case tn.types.STACK:return this.findTopASTNodeForBlock(this.location);case tn.types.BLOCK:return this.findFirstFieldOrInput(this.location);case tn.types.INPUT:return tn.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case tn.types.STACK:return this.navigateBetweenStacks(!1);case tn.types.FIELD:return this.findPrevForField();case tn.types.INPUT:return this.findPrevForInput();case tn.types.BLOCK:var i=pl(this.location);if(!i)break;return tn.createConnectionNode(i);case tn.types.PREVIOUS:if((i=this.location.targetConnection)&&!i.getParentInput())return tn.createConnectionNode(i);break;case tn.types.NEXT:return tn.createBlockNode(this.location.getSourceBlock())}return null}out(){switch(this.type){case tn.types.STACK:var i=this.location,a=i.getRelativeToSurfaceXY();return a=new vn(a.x,a.y+tn.DEFAULT_OFFSET_Y),tn.createWorkspaceNode(i.workspace,a);case tn.types.OUTPUT:return i=this.location,(a=i.targetConnection)?tn.createConnectionNode(a):tn.createStackNode(i.getSourceBlock());case tn.types.FIELD:if(i=this.location.getSourceBlock(),!i)throw Error("The current AST location is not associated with a block");return tn.createBlockNode(i);case tn.types.INPUT:return tn.createBlockNode(this.location.getSourceBlock());case tn.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case tn.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case tn.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(i){switch(i){case tn.types.PREVIOUS:case tn.types.NEXT:case tn.types.INPUT:case tn.types.OUTPUT:return!0}return!1}static createFieldNode(i){return i?new tn(tn.types.FIELD,i):null}static createConnectionNode(i){if(!i)return null;const a=i.type;return a===Un.INPUT_VALUE||a===Un.NEXT_STATEMENT&&i.getParentInput()?tn.createInputNode(i.getParentInput()):a===Un.NEXT_STATEMENT?new tn(tn.types.NEXT,i):a===Un.OUTPUT_VALUE?new tn(tn.types.OUTPUT,i):a===Un.PREVIOUS_STATEMENT?new tn(tn.types.PREVIOUS,i):null}static createInputNode(i){return i&&i.connection?new tn(tn.types.INPUT,i.connection):null}static createBlockNode(i){return i?new tn(tn.types.BLOCK,i):null}static createStackNode(i){return i?new tn(tn.types.STACK,i):null}static createWorkspaceNode(i,a){return a&&i?new tn(tn.types.WORKSPACE,i,{wsCoordinate:a}):null}static createTopNode(i){const a=pl(i);return a?tn.createConnectionNode(a):tn.createBlockNode(i)}};tn.NAVIGATE_ALL_FIELDS=!1,tn.DEFAULT_OFFSET_Y=-20,function(i){i=i.types||(i.types={}),i.FIELD="field",i.BLOCK="block",i.INPUT="input",i.OUTPUT="output",i.NEXT="next",i.PREVIOUS="previous",i.STACK="stack",i.WORKSPACE="workspace"}(tn||(tn={}));var zv=class extends v{constructor(i,a,p,w){let L=i?i.workspace.id:void 0;w&&w.getType()===tn.types.WORKSPACE&&(L=w.getLocation().id),super(L),this.type=Pl,this.blockId=i==null?void 0:i.id,this.oldNode=p||void 0,this.newNode=w,this.isCursor=a}toJson(){const i=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return i.isCursor=this.isCursor,i.blockId=this.blockId,i.oldNode=this.oldNode,i.newNode=this.newNode,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new zv),a.isCursor=i.isCursor,a.blockId=i.blockId,a.oldNode=i.oldNode,a.newNode=i.newNode,a}};r(Ut.EVENT,Pl,zv);var $E="blocklyCursor",CE="blocklyMarker",ME=.75,Uv=class{constructor(i,a,p){this.workspace=i,this.marker=p,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=a,i=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=p.colour||i}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const i=this.isCursor()?$E:CE;return this.svgGroup_=re(Ye.G,{class:i}),this.createDomInternal_(),this.svgGroup_}setParent_(i){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),i.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),i.setMarkerSvg(this.getSvgRoot())),this.parent=i}draw(i,a){if(a){this.constants_=this.workspace.getRenderer().getConstants();var p=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||p,this.applyColour_(a),this.showAtLocation_(a),this.fireMarkerEvent(i,a),i=this.currentMarkerSvg.childNodes[0],i!==void 0&&i.beginElement&&i.beginElement()}else this.hide()}showAtLocation_(i){const a=i.getLocation().type;i.getType()===tn.types.BLOCK?this.showWithBlock_(i):i.getType()===tn.types.OUTPUT?this.showWithOutput_(i):a===Un.INPUT_VALUE?this.showWithInput_(i):a===Un.NEXT_STATEMENT?this.showWithNext_(i):i.getType()===tn.types.PREVIOUS?this.showWithPrevious_(i):i.getType()===tn.types.FIELD?this.showWithField_(i):i.getType()===tn.types.WORKSPACE?this.showWithCoordinates_(i):i.getType()===tn.types.STACK&&this.showWithStack_(i)}showWithBlockPrevOutput(i){i=i.getSourceBlock();const a=i.width;var p=i.height,w=p*ME;const L=this.constants_.CURSOR_BLOCK_PADDING;i.previousConnection?(p=this.constants_.shapeFor(i.previousConnection),this.positionPrevious_(a,L,w,p)):i.outputConnection?(w=this.constants_.shapeFor(i.outputConnection),this.positionOutput_(a,p,w)):this.positionBlock_(a,L,w),this.setParent_(i),this.showCurrent_()}showWithBlock_(i){this.showWithBlockPrevOutput(i)}showWithPrevious_(i){this.showWithBlockPrevOutput(i)}showWithOutput_(i){this.showWithBlockPrevOutput(i)}showWithCoordinates_(i){var a=i.getWsCoordinate();i=a.x,a=a.y,this.workspace.RTL&&(i-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(i,a,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(i){i=i.getLocation();const a=i.getSize().width,p=i.getSize().height;this.positionRect_(0,0,a,p),this.setParent_(i),this.showCurrent_()}showWithInput_(i){i=i.getLocation();const a=i.getSourceBlock();this.positionInput_(i),this.setParent_(a),this.showCurrent_()}showWithNext_(i){var a=i.getLocation();i=a.getSourceBlock();let p=0;a=a.getOffsetInBlock().y;const w=i.getHeightWidth().width;this.workspace.RTL&&(p=-w),this.positionLine_(p,a,w),this.setParent_(i),this.showCurrent_()}showWithStack_(i){i=i.getLocation();var a=i.getHeightWidth();const p=a.width+this.constants_.CURSOR_STACK_PADDING;a=a.height+this.constants_.CURSOR_STACK_PADDING;const w=-this.constants_.CURSOR_STACK_PADDING/2,L=-this.constants_.CURSOR_STACK_PADDING/2;let j=w;this.workspace.RTL&&(j=-(p+w)),this.positionRect_(j,L,p,a),this.setParent_(i),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(i,a,p){if(i=Hi(-a,p)+$n("V",-a)+$n("H",i+2*a)+$n("V",p),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",i),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(i){const a=i.getOffsetInBlock().x,p=i.getOffsetInBlock().y;i=Zs(0,0)+this.constants_.shapeFor(i).pathDown,this.markerInput_.setAttribute("d",i),this.markerInput_.setAttribute("transform","translate("+a+","+p+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(i,a,p){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${i}`),this.markerSvgLine_.setAttribute("y",`${a}`),this.markerSvgLine_.setAttribute("width",`${p}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(i,a,p){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");i=Hi(i,0)+$n("h",-(i-p.width))+$n("v",this.constants_.TAB_OFFSET_FROM_TOP)+p.pathDown+$n("V",a)+$n("H",i),this.markerBlock_.setAttribute("d",i),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(i,a,p,w){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");i=Hi(-a,p)+$n("V",-a)+$n("H",this.constants_.NOTCH_OFFSET_LEFT)+w.pathLeft+$n("H",i+2*a)+$n("V",p),this.markerBlock_.setAttribute("d",i),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(i,a,p,w){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${i}`),this.markerSvgRect_.setAttribute("y",`${a}`),this.markerSvgRect_.setAttribute("width",`${p}`),this.markerSvgRect_.setAttribute("height",`${w}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(i){i.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(i,a){const p=a.getSourceBlock();i=new(ke(Pl))(p,this.isCursor(),i,a),ce(i)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=re(Ye.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=re(Ye.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=re(Ye.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=re(Ye.PATH,{transform:""},this.markerSvg_),this.markerBlock_=re(Ye.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const i=this.getBlinkProperties_();re(Ye.ANIMATE,i,this.markerSvgLine_),re(Ye.ANIMATE,i,this.markerInput_),re(Ye.ANIMATE,Object.assign({},i,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(i){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(i=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",i),this.markerInput_.firstElementChild.setAttribute("values",i),this.markerBlock_.firstElementChild.setAttribute("values",i))}dispose(){this.svgGroup_&&Ke(this.svgGroup_)}},N0=class{constructor(i,a,p){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=p,this.style=a,this.svgRoot=i,this.svgPath=re(Ye.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(i){this.svgPath.setAttribute("d",i)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(i){i?(this.svgRoot.appendChild(i),this.cursorSvg=i):this.cursorSvg=null}setMarkerSvg(i){i?(this.cursorSvg?this.svgRoot.insertBefore(i,this.cursorSvg):this.svgRoot.appendChild(i),this.markerSvg=i):this.markerSvg=null}applyColour(i){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(i.isShadow()),this.updateDisabled_(!i.isEnabled()||i.getInheritedDisabled())}setStyle(i){this.style=i}setClass_(i,a){i&&(a?Be(this.svgRoot,i):yt(this.svgRoot,i))}updateHighlighted(i){i?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(i){i&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(i){this.setClass_("blocklyDisabled",i),i&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(i){this.setClass_("blocklySelected",i)}updateDraggingDelete(i){this.setClass_("blocklyDraggingDelete",i)}updateInsertionMarker(i){this.setClass_("blocklyInsertionMarker",i)}updateMovable(i){this.setClass_("blocklyDraggable",i)}updateReplacementFade(i){this.setClass_("blocklyReplaceable",i)}updateShapeForInputHighlight(i,a){}addConnectionHighlight(i,a,p,w){if(this.connectionHighlights.has(i)){if(this.currentHighlightMatchesNew(i,a,p))return;this.removeConnectionHighlight(i)}a=re(Ye.PATH,{class:"blocklyHighlightedConnectionPath",d:a,transform:`translate(${p.x}, ${p.y})`+(w?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(i,a)}currentHighlightMatchesNew(i,a,p){let w;const L=(w=this.connectionHighlights.get(i))==null?void 0:w.getAttribute("d");return i=this.highlightOffsets.get(i),L===a&&vn.equals(i,p)}removeConnectionHighlight(i){const a=this.connectionHighlights.get(i);a&&(Ke(a),this.connectionHighlights.delete(i))}},fs=class{constructor(i,a){this.type=a,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=i}connect_(i){const a=Un.INPUT_VALUE,p=this.getSourceBlock();var w=i.getSourceBlock();i.isConnected()&&i.disconnectInternal(!1);let L;if(this.isConnected()){const _e=this.stashShadowState(),We=this.targetBlock();We.isShadow()?We.dispose(!1):(this.disconnectInternal(),L=We),this.applyShadowState(_e)}let j;se()&&(j=new(ke(t.MOVE$$module$build$src$core$events$utils))(w),j.setReason(["connect"])),Go(this,i),w.setParent(p),j&&(j.recordNew(),ce(j)),L&&(i=this.type===a?L.outputConnection:L.previousConnection)&&((w=fs.getConnectionForOrphanedConnection(w,i))?i.connect(w):i.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal();const i=this.targetBlock();i&&!i.isDeadOrDying()&&i.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===Un.INPUT_VALUE||this.type===Un.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(i){}connect(i){if(this.targetConnection===i)return!0;if(this.getConnectionChecker().canConnect(this,i,!1)){const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(i):i.connect_(this),t.setGroup$$module$build$src$core$events$utils(a)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(i=!0){const{parentConnection:a,childConnection:p}=this.getParentAndChildConnections();if(!a||!p)throw Error("Source connection not connected.");const w=t.getGroup$$module$build$src$core$events$utils();w||t.setGroup$$module$build$src$core$events$utils(!0);let L;se()&&(L=new(ke(t.MOVE$$module$build$src$core$events$utils))(p.getSourceBlock()),L.setReason(["disconnect"]));const j=this.targetConnection;j&&(j.targetConnection=null),this.targetConnection=null,i&&p.getSourceBlock().setParent(null),L&&(L.recordNew(),ce(L)),p.getSourceBlock().isShadow()||a.respawnShadow_(),t.setGroup$$module$build$src$core$events$utils(w)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(i,a){if(this.getSourceBlock().isDeadOrDying())return!1;var p;return a=(p=i.getInput(a))==null?void 0:p.connection,p=this.targetBlock(),p&&p!==i||!a||a.targetConnection===this?!1:(a.isConnected()&&a.disconnect(),a.connect(this),!0)}targetBlock(){if(this.isConnected()){let i,a;return(a=(i=this.targetConnection)==null?void 0:i.getSourceBlock())!=null?a:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(i){return i?(Array.isArray(i)||(i=[i]),this.check=i,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(i){this.setShadowStateInternal({shadowDom:i})}getShadowDom(i){return i&&this.targetBlock().isShadow()?il(this.targetBlock()):this.shadowDom}setShadowState(i){this.setShadowStateInternal({shadowState:i})}getShadowState(i){return i&&this.targetBlock()&&this.targetBlock().isShadow()?Ci(this.targetBlock()):this.shadowState}neighbours(i){return[]}getParentInput(){let i=null;const a=this.sourceBlock_.inputList;for(let p=0;p<a.length;p++)if(a[p].connection===this){i=a[p];break}return i}toString(){const i=this.sourceBlock_;if(!i)return"Orphan Connection";if(i.outputConnection===this)var a="Output Connection of ";else if(i.previousConnection===this)a="Previous Connection of ";else if(i.nextConnection===this)a="Next Connection of ";else{a=null;for(let p=0,w;w=i.inputList[p];p++)if(w.connection===this){a=w;break}if(a)a='Input "'+a.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return a+i.toDevString()}stashShadowState(){const i=this.getShadowDom(!0),a=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:i,shadowState:a}}applyShadowState({shadowDom:i,shadowState:a}){this.shadowDom=i,this.shadowState=a}setShadowStateInternal({shadowDom:i=null,shadowState:a=null}={}){this.shadowDom=i,this.shadowState=a,(i=this.targetBlock())?i.isShadow()?(i.dispose(!1),this.getSourceBlock().isDeadOrDying()||(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))):(i=this.createShadowBlock(!1),this.serializeShadow(i),i&&i.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))}createShadowBlock(i){var a=this.getSourceBlock();const p=this.getShadowState(),w=this.getShadowDom();if(a.isDeadOrDying()||!p&&!w)return null;if(p)return a=Ai(p,a.workspace,{parentConnection:i?this:void 0,isShadow:!0,recordUndo:!1});if(w){if(a=lo(w,a.workspace),i)if(this.type===Un.INPUT_VALUE){if(!a.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(a.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===Un.NEXT_STATEMENT){if(!a.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(a.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return a}return null}serializeShadow(i){i&&(this.shadowDom=il(i),this.shadowState=Ci(i))}static getConnectionForOrphanedConnection(i,a){if(a.type===Un.OUTPUT_VALUE)return Va(i,a.getSourceBlock());i=i.lastConnectionInStack(!0);const p=a.getConnectionChecker();return i&&p.canConnect(a,i,!1)?i:null}};fs.CAN_CONNECT=0,fs.REASON_SELF_CONNECTION=1,fs.REASON_WRONG_TYPE=2,fs.REASON_TARGET_NULL=3,fs.REASON_CHECKS_FAILED=4,fs.REASON_DIFFERENT_WORKSPACES=5,fs.REASON_SHADOW_PARENT=6,fs.REASON_DRAG_CHECKS_FAILED=7,fs.REASON_PREVIOUS_AND_OUTPUT=8;var Ug="_TEMP_COLLAPSED_INPUT",W_="_TEMP_COLLAPSED_FIELD",AE={COLLAPSED_FIELD_NAME:W_,COLLAPSED_INPUT_NAME:Ug},Tf="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Sf=class{constructor(i){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,P(i),this.topBlock=i,this.workspace=i.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){t.disable$$module$build$src$core$events$utils(),this.hidePreview(),t.enable$$module$build$src$core$events$utils();var{local:i,closest:a}=this.activeCandidate;if(i.connect(a),this.topBlock.rendered){const p=i.isSuperior()?a:i,w=this.topBlock.getRootBlock();Tr().then(()=>{pa(p.getSourceBlock()),setTimeout(()=>{w.bringToFront()},0)})}}}update(i,a){const p=this.getCandidate(i);((this.wouldDeleteBlock=this.shouldDelete(!!p,a))||this.shouldUpdatePreviews(p,i))&&(t.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(p),this.maybeShowPreview(p),t.enable$$module$build$src$core$events$utils())}createMarkerBlock(i){var a=i.type;t.disable$$module$build$src$core$events$utils();let p;try{if(p=this.workspace.newBlock(a),p.setInsertionMarker(!0),i.saveExtraState){var w=i.saveExtraState(!0);w&&p.loadExtraState&&p.loadExtraState(w)}else if(i.mutationToDom){const L=i.mutationToDom();L&&p.domToMutation&&p.domToMutation(L)}for(a=0;a<i.inputList.length;a++){const L=i.inputList[a];if(L.name===Ug)continue;const j=p.inputList[a];if(!j)throw Error(Tf.replace("%1","an input"));for(w=0;w<L.fieldRow.length;w++){const _e=L.fieldRow[w],We=j.fieldRow[w];if(!We)throw Error(Tf.replace("%1","a field"));We.setValue(_e.getValue())}}for(const L of p.getDescendants(!1))L.setInsertionMarker(!0);p.setCollapsed(i.isCollapsed()),p.setInputsInline(i.getInputsInline()),p.initSvg(),p.getSvgRoot().setAttribute("visibility","hidden")}finally{t.enable$$module$build$src$core$events$utils()}return p}initAvailableConnections(){const i=this.topBlock.getConnections_(!1),a=this.topBlock.lastConnectionInStack(!0);return a&&a!==this.topBlock.nextConnection&&(i.push(a),this.lastOnStack=a),i}shouldUpdatePreviews(i,a){if(!i)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:p,closest:w}=this.activeCandidate;if(w===i.closest&&p===i.local)return!1;const L=p.x+a.x-w.x;return a=p.y+a.y-w.y,i.radius<Math.sqrt(L*L+a*a)-t.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(i){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let a=this.getStartRadius(),p=null;for(let w=0;w<this.availableConnections.length;w++){const L=this.availableConnections[w],j=L.closest(a,i);j.connection&&(p={closest:j.connection,local:L,radius:j.radius},a=j.radius)}return p}getStartRadius(){return this.activeCandidate?t.config$$module$build$src$core$config.connectingSnapRadius:t.config$$module$build$src$core$config.snapRadius}shouldDelete(i,a){return a&&this.workspace.getComponentManager().hasCapability(a.id,vl.Capability.DELETE_AREA)?a.wouldDelete(this.topBlock,i):!1}maybeShowPreview(i){if(!this.wouldDeleteBlock&&i){var a=i.closest,p;a===((p=this.activeCandidate)==null?void 0:p.closest)||a.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=i,this.showPreview(this.activeCandidate))}}showPreview(i){const a=this.workspace.getRenderer();switch(a.getConnectionPreviewMethod(i.closest,i.local,this.topBlock)){case Sf.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(i);break;case Sf.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(i);break;case Sf.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(i)}a.shouldHighlightConnection(i.closest)&&i.closest.highlight()}maybeHidePreview(i){if(!i)this.hidePreview();else if(this.activeCandidate){const a=this.activeCandidate.local!==i.local;(this.activeCandidate.closest!==i.closest||a||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let i;const a=(i=this.activeCandidate)==null?void 0:i.closest;a&&a.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(a)&&a.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(i){const{local:a,closest:p}=i;let w=(i=this.lastOnStack&&a===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!w)throw Error("Cannot show the insertion marker because there is no insertion marker block");let L;try{L=w.getMatchingConnection(a.getSourceBlock(),a)}catch{if(i&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),w=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),w=this.firstMarker=this.createMarkerBlock(this.topBlock)),!w)throw Error("Cannot show the insertion marker because there is no insertion marker block");L=w.getMatchingConnection(a.getSourceBlock(),a)}if(!L)throw Error("Cannot show the insertion marker because there is no associated connection");if(L===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");w.queueRender(),$i(),L.connect(p);const j={x:p.x-L.x,y:p.y-L.y},_e=L.getOffsetInBlock().clone(),We=L;Tr().then(()=>{let Jt;(Jt=w)==null||Jt.positionNearConnection(We,j,_e);let jn;(jn=w)==null||jn.getSvgRoot().setAttribute("visibility","visible")}),this.markerConnection=L}hideInsertionMarker(){if(this.markerConnection){var i=this.markerConnection,a=i.getSourceBlock(),p=a.outputConnection,w;if((w=a.previousConnection)!=null&&w.targetConnection||p!=null&&p.targetConnection)a.unplug(!0);else{let L;(L=i.targetBlock())==null||L.unplug(!1)}if(i.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(i=a.getSvgRoot())&&i.setAttribute("visibility","hidden")}}showInsertionInputOutline(i){i=i.closest,this.highlightedBlock=i.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(i,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(i){if(this.fadedBlock=i.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const i=[];return this.firstMarker&&i.push(this.firstMarker),this.lastMarker&&i.push(this.lastMarker),i}disposeInsertionMarker(i){if(i){t.disable$$module$build$src$core$events$utils();try{i.dispose()}finally{t.enable$$module$build$src$core$events$utils()}}}};(function(i){i=i.PREVIEW_TYPE||(i.PREVIEW_TYPE={}),i[i.INSERTION_MARKER=0]="INSERTION_MARKER",i[i.INPUT_OUTLINE=1]="INPUT_OUTLINE",i[i.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(Sf||(Sf={})),Sf.PREVIEW_TYPE;var Hv=class{constructor(i){this.overrides=null,this.name=i}getClassName(){return this.name+"-renderer"}init(i,a){this.constants_=this.makeConstants_(),a&&(this.overrides=a,Object.assign(this.constants_,a)),this.constants_.setTheme(i),this.constants_.init()}createDom(i,a){this.constants_.createDom(i,this.name+"-"+a.name,"."+this.getClassName()+"."+a.getClassName())}refreshDom(i,a){const p=this.getConstants();p.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=p.randomIdentifier,this.constants_.setTheme(a),this.constants_.init(),this.createDom(i,a)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new Bv}makeRenderInfo_(i){return new L0(this,i)}makeDrawer_(i,a){return new Fv(i,a)}makeMarkerDrawer(i,a){return new Uv(i,this.getConstants(),a)}makePathObject(i,a){return new N0(i,a,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(i){return!0}orphanCanConnectAtEnd(i,a,p){return!!fs.getConnectionForOrphanedConnection(i,p===Un.OUTPUT_VALUE?a.outputConnection:a.previousConnection)}getConnectionPreviewMethod(i,a,p){return Ee("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),a.type===Un.OUTPUT_VALUE||a.type===Un.PREVIOUS_STATEMENT?!i.isConnected()||this.orphanCanConnectAtEnd(p,i.targetBlock(),a.type)?Sf.PREVIEW_TYPE.INSERTION_MARKER:Sf.PREVIEW_TYPE.REPLACEMENT_FADE:Sf.PREVIEW_TYPE.INSERTION_MARKER}render(i){const a=this.makeRenderInfo_(i);a.measure(),this.makeDrawer_(i,a).draw()}},Ns={};Ns.BottomRow=Dv,Ns.Connection=rd,Ns.ConstantProvider=Bv,Ns.Drawer=Fv,Ns.ExternalValueInput=G_,Ns.Field=O0,Ns.Hat=db,Ns.Icon=wT,Ns.InRowSpacer=qd,Ns.InlineInput=fb,Ns.InputConnection=sg,Ns.InputRow=pb,Ns.JaggedEdge=ET,Ns.MarkerSvg=Uv,Ns.Measurable=or,Ns.NextConnection=xT,Ns.OutputConnection=$T,Ns.PathObject=N0,Ns.PreviousConnection=CT,Ns.RenderInfo=L0,Ns.Renderer=Hv,Ns.RoundCorner=bm,Ns.Row=Nv,Ns.SpacerRow=mb,Ns.SquareCorner=Tm,Ns.StatementInput=Pv,Ns.TopRow=gb,Ns.Types=ht,Ns.init=Kc,Ns.register=Oi,Ns.unregister=Nd;var IT=class{constructor(i,a){this.workspace=i,this.theme=a,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(i){var a=this.theme;this.theme=i,(i=this.workspace.getInjectionDiv())&&(a&&(a=a.getClassName())&&yt(i,a),(a=this.theme.getClassName())&&Be(i,a));for(let p=0,w;w=this.subscribedWorkspaces_[p];p++)w.refreshTheme();for(const[p,w]of this.componentDB)for(const L of w){i=L.element,a=L.propertyName;const j=this.theme&&this.theme.getComponentStyle(p);i.style.setProperty(a,j||"")}for(const p of this.subscribedWorkspaces_)p.hideChaff()}subscribeWorkspace(i){this.subscribedWorkspaces_.push(i)}unsubscribeWorkspace(i){if(!Mt(this.subscribedWorkspaces_,i))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(i,a,p){this.componentDB.has(a)||this.componentDB.set(a,[]),this.componentDB.get(a).push({element:i,propertyName:p}),a=this.theme&&this.theme.getComponentStyle(a),i.style.setProperty(p,a||"")}unsubscribe(i){if(i)for(const[a,p]of this.componentDB){for(let w=p.length-1;0<=w;w--)p[w].element===i&&p.splice(w,1);p.length||this.componentDB.delete(a)}}dispose(){this.subscribedWorkspaces_.length=0,this.componentDB.clear()}},vb="VARIABLE_DYNAMIC",wm={CATEGORY_NAME:vb};wm.flyoutCategory=df,wm.flyoutCategoryBlocks=Mu,wm.onCreateVariableButtonClick_Colour=Ro,wm.onCreateVariableButtonClick_Number=Wo,wm.onCreateVariableButtonClick_String=Kh;var V_=class{canConnect(i,a,p,w){return this.canConnectWithReason(i,a,p,w)===fs.CAN_CONNECT}canConnectWithReason(i,a,p,w){const L=this.doSafetyChecks(i,a);return L!==fs.CAN_CONNECT?L:this.doTypeChecks(i,a)?p&&!this.doDragChecks(i,a,w||0)?fs.REASON_DRAG_CHECKS_FAILED:fs.CAN_CONNECT:fs.REASON_CHECKS_FAILED}getErrorMessage(i,a,p){switch(i){case fs.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case fs.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case fs.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case fs.REASON_TARGET_NULL:return"Target connection is null.";case fs.REASON_CHECKS_FAILED:return"Connection checks failed. "+(a+" expected "+a.getCheck()+", found "+p.getCheck());case fs.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case fs.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case fs.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(i,a){if(!i||!a)return fs.REASON_TARGET_NULL;let p,w,L;return i.isSuperior()?(p=i.getSourceBlock(),w=a.getSourceBlock(),L=a):(w=i.getSourceBlock(),p=a.getSourceBlock(),L=i,i=a),p===w?fs.REASON_SELF_CONNECTION:L.type!==en[i.type]?fs.REASON_WRONG_TYPE:p.workspace!==w.workspace?fs.REASON_DIFFERENT_WORKSPACES:p.isShadow()&&!w.isShadow()?fs.REASON_SHADOW_PARENT:L.type===Un.OUTPUT_VALUE&&w.previousConnection&&w.previousConnection.isConnected()||L.type===Un.PREVIOUS_STATEMENT&&w.outputConnection&&w.outputConnection.isConnected()?fs.REASON_PREVIOUS_AND_OUTPUT:fs.CAN_CONNECT}doTypeChecks(i,a){if(i=i.getCheck(),a=a.getCheck(),!i||!a)return!0;for(let p=0;p<i.length;p++)if(a.indexOf(i[p])!==-1)return!0;return!1}doDragChecks(i,a,p){if(i.distanceFrom(a)>p||a.getSourceBlock().isInsertionMarker())return!1;switch(a.type){case Un.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(i,a);case Un.OUTPUT_VALUE:if(a.isConnected()&&!a.targetBlock().isInsertionMarker()||i.isConnected())return!1;break;case Un.INPUT_VALUE:if(a.isConnected()&&!a.targetBlock().isMovable()&&!a.targetBlock().isShadow())return!1;break;case Un.NEXT_STATEMENT:if(a.isConnected()&&!i.getSourceBlock().nextConnection&&!a.targetBlock().isShadow()&&a.targetBlock().nextConnection||a.targetBlock()&&!a.targetBlock().isMovable()&&!a.targetBlock().isShadow())return!1;break;default:return!1}return Ki.indexOf(a)===-1}canConnectToPrevious_(i,a){return i.targetConnection||Ki.indexOf(a)!==-1?!1:a.targetConnection?(i=a.targetBlock(),i.isInsertionMarker()?!i.getPreviousBlock():!1):!0}};r(Ut.CONNECTION_CHECKER,Dl,V_);var _b=class extends zd{constructor(i){super(i),this.type=Ru,i&&(this.varType=i.type,this.varName=i.name)}toJson(){const i=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return i.varType=this.varType,i.varName=this.varName,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new _b),a.varType=i.varType,a.varName=i.varName,a}run(i){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");i?a.deleteVariableById(this.varId):a.createVariable(this.varName,this.varType,this.varId)}};r(Ut.EVENT,Ru,_b);var yb=class extends zd{constructor(i,a){super(i),this.type=th,i&&(this.oldName=i.name,this.newName=typeof a>"u"?"":a)}toJson(){const i=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return i.oldName=this.oldName,i.newName=this.newName,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new yb),a.oldName=i.oldName,a.newName=i.newName,a}run(i){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");i?a.renameVariableById(this.varId,this.newName):a.renameVariableById(this.varId,this.oldName)}};r(Ut.EVENT,th,yb);var bb=class{constructor(i){this.workspace=i,this.variableMap=new Map}clear(){for(const i of this.variableMap.values())for(;0<i.length;)this.deleteVariable(i[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(i,a){if(i.name!==a){var p=this.getVariable(a,i.type),w=this.workspace.getAllBlocks(!1),L=t.getGroup$$module$build$src$core$events$utils();L||t.setGroup$$module$build$src$core$events$utils(!0);try{p&&p.getId()!==i.getId()?this.renameVariableWithConflict_(i,a,p,w):this.renameVariableAndUses_(i,a,w)}finally{t.setGroup$$module$build$src$core$events$utils(L)}}}renameVariableById(i,a){const p=this.getVariableById(i);if(!p)throw Error("Tried to rename a variable that didn't exist. ID: "+i);this.renameVariable(p,a)}renameVariableAndUses_(i,a,p){for(ce(new(ke(th))(i,a)),i.name=a,a=0;a<p.length;a++)p[a].updateVarName(i)}renameVariableWithConflict_(i,a,p,w){const L=i.type;for(a!==p.name&&this.renameVariableAndUses_(p,a,w),a=0;a<w.length;a++)w[a].renameVarById(i.getId(),p.getId());ce(new(ke(Ru))(i)),Mt(this.variableMap.get(L),i)}createVariable(i,a,p){var w=this.getVariable(i,a);if(w){if(p&&w.getId()!==p)throw Error('Variable "'+i+'" is already in use and its id is "'+w.getId()+'" which conflicts with the passed in id, "'+p+'".');return w}if(p&&this.getVariableById(p))throw Error('Variable id, "'+p+'", is already in use.');return w=p||q(),a=a||"",w=new vf(this.workspace,i,a,w),i=this.variableMap.get(a)||[],i.push(w),this.variableMap.delete(a),this.variableMap.set(a,i),ce(new(ke(bo))(w)),w}deleteVariable(i){const a=i.getId(),p=this.variableMap.get(i.type);if(p){for(let w=0;w<p.length;w++)if(p[w].getId()===a){p.splice(w,1),ce(new(ke(Ru))(i)),p.length===0&&this.variableMap.delete(i.type);break}}}deleteVariableById(i){const a=this.getVariableById(i);if(a){var p=a.name;const w=this.getVariableUsesById(i);for(let L=0,j;j=w[L];L++)if(j.type==="procedures_defnoreturn"||j.type==="procedures_defreturn"){i=String(j.getFieldValue("NAME")),p=t.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",p).replace("%2",i),Mo(p);return}1<w.length?(p=t.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(w.length)).replace("%2",p),rn(p,L=>{L&&a&&this.deleteVariableInternal(a,w)})):this.deleteVariableInternal(a,w)}else console.warn("Can't delete non-existent variable: "+i)}deleteVariableInternal(i,a){const p=t.getGroup$$module$build$src$core$events$utils();p||t.setGroup$$module$build$src$core$events$utils(!0);try{for(let w=0;w<a.length;w++)a[w].dispose(!0);this.deleteVariable(i)}finally{t.setGroup$$module$build$src$core$events$utils(p)}}getVariable(i,a){if(a=this.variableMap.get(a||"")){for(let p=0,w;w=a[p];p++)if(t.Names$$module$build$src$core$names.equals(w.name,i))return w}return null}getVariableById(i){for(const a of this.variableMap.values())for(const p of a)if(p.getId()===i)return p;return null}getVariablesOfType(i){return(i=this.variableMap.get(i||""))?i.slice():[]}getVariableTypes(i){const a=new Set(this.variableMap.keys());if(i&&i.getPotentialVariableMap())for(const p of i.getPotentialVariableMap().variableMap.keys())a.add(p);return a.has("")||a.add(""),Array.from(a.values())}getAllVariables(){let i=[];for(const a of this.variableMap.values())i=i.concat(a);return i}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(i=>i.name)}getVariableUsesById(i){const a=[],p=this.workspace.getAllBlocks(!1);for(let w=0;w<p.length;w++){const L=p[w].getVarModels();if(L)for(let j=0;j<L.length;j++)L[j].getId()===i&&a.push(p[w])}return a}},Gv=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(i){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new A0,this.potentialVariableMap=null,this.id=q(),C(this),this.options=i||new Gi({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(y(Ut.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new bb(this)}dispose(){this.listeners.length=0,this.clear(),M(this)}sortObjects_(i,a){const p=Math.sin(Hc(Gv.SCAN_ANGLE))*(this.RTL?-1:1);return i=i.getRelativeToSurfaceXY(),a=a.getRelativeToSurfaceXY(),i.y+p*i.x-(a.y+p*a.x)}addTopBlock(i){this.topBlocks.push(i)}removeTopBlock(i){if(!Mt(this.topBlocks,i))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(i=!1){const a=[].concat(this.topBlocks);return i&&1<a.length&&a.sort(this.sortObjects_.bind(this)),a}addTypedBlock(i){this.typedBlocksDB.has(i.type)||this.typedBlocksDB.set(i.type,[]),this.typedBlocksDB.get(i.type).push(i)}removeTypedBlock(i){Mt(this.typedBlocksDB.get(i.type),i),this.typedBlocksDB.get(i.type).length||this.typedBlocksDB.delete(i.type)}getBlocksByType(i,a=!1){return this.typedBlocksDB.has(i)?(i=this.typedBlocksDB.get(i).slice(0),a&&i&&1<i.length&&i.sort(this.sortObjects_.bind(this)),i.filter(function(p){return!p.isInsertionMarker()})):[]}addTopComment(i){this.topComments.push(i),this.commentDB.has(i.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+i.id+'"'),this.commentDB.set(i.id,i)}removeTopComment(i){if(!Mt(this.topComments,i))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(i.id)}getTopComments(i=!1){const a=[].concat(this.topComments);return i&&1<a.length&&a.sort(this.sortObjects_.bind(this)),a}getAllBlocks(i=!1){if(i){var a=this.getTopBlocks(!0);i=[];for(let p=0;p<a.length;p++)i.push(...a[p].getDescendants(!0))}else for(i=this.getTopBlocks(!1),a=0;a<i.length;a++)i.push(...i[a].getChildren(!1));return i.filter(function(p){return!p.isInsertionMarker()})}clear(){this.isClearing=!0;try{const i=t.getGroup$$module$build$src$core$events$utils();for(i||t.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();t.setGroup$$module$build$src$core$events$utils(i),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(i,a){this.variableMap.renameVariableById(i,a)}createVariable(i,a,p){return this.variableMap.createVariable(i,a,p)}getVariableUsesById(i){return this.variableMap.getVariableUsesById(i)}deleteVariableById(i){this.variableMap.deleteVariableById(i)}getVariable(i,a){return this.variableMap.getVariable(i,a)}getVariableById(i){return this.variableMap.getVariableById(i)}getVariablesOfType(i){return this.variableMap.getVariablesOfType(i)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(i,a){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(i){return this.options.maxInstances?(this.options.maxInstances[i]!==void 0?this.options.maxInstances[i]:1/0)-this.getBlocksByType(i,!1).length:1/0}isCapacityAvailable(i){if(!this.hasBlockLimits())return!0;let a=0;for(const p in i){if(i[p]>this.remainingCapacityOfType(p))return!1;a+=i[p]}return!(a>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(i){var a=i?this.redoStack_:this.undoStack_,p=i?this.undoStack_:this.redoStack_;const w=a.pop();if(w){for(var L=[w];a.length&&w.group&&w.group===a[a.length-1].group;){const j=a.pop();j&&L.push(j)}for(a=0;a<L.length;a++)p.push(L[a]);L=K(L,i),ae(!1);try{for(p=0;p<L.length;p++)L[p].run(i)}finally{ae(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,ie()}addChangeListener(i){return this.listeners.push(i),i}removeChangeListener(i){Mt(this.listeners,i)}fireChangeListener(i){if(i.recordUndo)for(this.undoStack_.push(i),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let a=0;a<this.listeners.length;a++)(0,this.listeners[a])(i)}getBlockById(i){return this.blockDB.get(i)||null}setBlockById(i,a){this.blockDB.set(i,a)}removeBlockById(i){this.blockDB.delete(i)}getCommentById(i){let a;return(a=this.commentDB.get(i))!=null?a:null}allInputsFilled(i){const a=this.getTopBlocks(!1);for(let p=0;p<a.length;p++)if(!a[p].allInputsFilled(i))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new bb(this)}getVariableMap(){return this.variableMap}setVariableMap(i){this.variableMap=i}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let i=null;const a=this.options.parentWorkspace;return this.isFlyout?a&&a.options&&(i=a.options.parentWorkspace):a&&(i=a),i}static getById(i){return b(i)}static getAll(){return S()}};Gv.SCAN_ANGLE=3;var IE=100,RT=class{constructor(i){this.parentWorkspace=i,this.sounds=new Map,this.lastSound_=null,this.muted=!1}dispose(){this.sounds.clear()}load(i,a){if(i.length){try{var p=new globalThis.Audio}catch{return}for(let L=0;L<i.length;L++){const j=i[L],_e=j.match(/\.(\w+)$/);if(_e&&p.canPlayType("audio/"+_e[1])){var w=new globalThis.Audio(j);break}}w&&this.sounds.set(a,w)}}preload(){for(const i of this.sounds.values()){i.volume=.01;const a=i.play();if(a!==void 0?a.then(i.pause).catch(function(){}):i.pause(),zn||fr)break}}play(i,a){if(!this.muted){var p=this.sounds.get(i);p?(i=new Date,this.lastSound_!==null&&i.getTime()-this.lastSound_.getTime()<IE||(this.lastSound_=i,p=zn||On?p:p.cloneNode(),p.volume=a===void 0?1:a,p.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(i,a)}}setMuted(i){this.muted=i}getMuted(){return this.muted}},RE=class{constructor(i){this.workspace=i,this.layers=new Map,(i=i.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(i)),i=this.createLayer(ee),Be(i,"blocklyBlockCanvas"),i=this.createLayer(be),Be(i,"blocklyBubbleCanvas")}createDragLayer(i){const a=re(Ye.SVG,{class:"blocklyBlockDragSurface",xmlns:qm,"xmlns:html":xc,"xmlns:xlink":no,version:"1.1"});return i.append(a),re(Ye.G,{},a)}translateLayers(i,a){i=`translate(${i.x}, ${i.y}) scale(${a})`;let p;(p=this.dragLayer)==null||p.setAttribute("transform",i);for(const[,w]of this.layers)w.setAttribute("transform",i)}moveToDragLayer(i){let a;(a=this.dragLayer)==null||a.appendChild(i.getSvgRoot())}moveOffDragLayer(i,a){this.append(i,a)}append(i,a){this.layers.has(a)||this.createLayer(a);let p;(p=this.layers.get(a))==null||p.appendChild(i.getSvgRoot())}createLayer(i){const a=this.workspace.getSvgGroup(),p=re(Ye.G,{});let w=!1;const L=[...this.layers].sort((j,_e)=>j[0]-_e[0]);for(const[j,_e]of L)if(i<j){a.insertBefore(p,_e),w=!0;break}return w||a.appendChild(p),this.layers.set(i,p),p}hasLayer(i){return i===this.dragLayer||new Set(this.layers.values()).has(i)}getBlockLayer(){return this.layers.get(ee)}getBubbleLayer(){return this.layers.get(be)}},kE=20,tp=class extends Gv{constructor(i){super(i),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(y(Ut.METRICS_MANAGER,i,!0))(this),this.getMetrics=i.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=i.setMetrics||tp.setTopLevelWorkspaceMetrics_,this.componentManager=new vl,this.connectionDBList=oh.init(this.connectionChecker),this.audioManager=new RT(i.parentWorkspace),this.grid=this.options.gridPattern?new lb(this.options.gridPattern,i.gridOptions):null,this.markerManager=new Ca(this),bl&&In&&this.registerToolboxCategoryCallback(Lg,In),wm&&df&&this.registerToolboxCategoryCallback(vb,df),Ji&&yn&&(this.registerToolboxCategoryCallback(k0,yn),this.addChangeListener(_c)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new IT(this,this.options.theme||B_),this.themeManager_.subscribeWorkspace(this);let a;this.renderer=Kc(this.options.renderer||"geras",this.getTheme(),(a=this.options.rendererOverrides)!=null?a:void 0),this.cachedParentSvgSize=new ro(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(i){this.metricsManager=i,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(i){this.markerManager.setCursorSvg(i)}setMarkerSvg(i){this.markerManager.setMarkerSvg(i)}getMarker(i){return this.markerManager?this.markerManager.getMarker(i):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(i){i||(i=B_),this.themeManager_.setTheme(i)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(a){return!!a.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const i=new(ke(cu))(this.getTheme().name,this.id);ce(i)}updateBlockStyles_(i){for(let a=0,p;p=i[a];a++){const w=p.getStyleName();w&&p.setStyle(w)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const i=this.getParentSvg().getScreenCTM();i&&(this.inverseScreenCTM=i.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(i){let a=0,p=0,w=1;(this.getCanvas().contains(i)||this.getBubbleCanvas().contains(i))&&(w=this.scale);do{const L=_r(i);(i===this.getCanvas()||i===this.getBubbleCanvas())&&(w=1),a+=L.x*w,p+=L.y*w,i=i.parentNode}while(i&&i!==this.getParentSvg()&&i!==this.getInjectionDiv());return new vn(a,p)}getCachedParentSvgSize(){const i=this.cachedParentSvgSize;return new ro(i.width,i.height)}getOriginOffsetInPixels(){return ne(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let i=this.svgGroup_;for(;i;){if((" "+(i.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv=i;break}i=i.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(i){this.resizeHandlerWrapper=i}createDom(i,a){return this.injectionDiv||(this.injectionDiv=a??null),this.svgGroup_=re(Ye.G,{class:"blocklyWorkspace"}),i&&(this.svgBackground_=re(Ye.RECT,{height:"100%",width:"100%",class:i},this.svgGroup_),i==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new RE(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(Ie(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),Ie(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(y(Ut.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(i=y(Ut.CURSOR,this.options))&&this.markerManager.setCursor(new i),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&Ke(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const i=this.getParentSvg();i&&i.parentNode&&Ke(i.parentNode)}this.resizeHandlerWrapper&&(it(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=tp.newTrashcan(this);const i=this.trashcan.createDom();this.svgGroup_.insertBefore(i,this.getCanvas())}static newTrashcan(i){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new b0(this);const i=this.zoomControls_.createDom();this.svgGroup_.appendChild(i)}addFlyout(i){const a=new Gi({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return a.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(y(Ut.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(a):new(y(Ut.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(a),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(i)}getFlyout(i){return this.flyout||i?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const i=this.componentManager.getComponents(vl.Capability.POSITIONABLE,!0),a=this.getMetricsManager().getUiMetrics(),p=[];for(let w=0,L;L=i[w];w++){L.position(a,p);const j=L.getBoundingRectangle();j&&p.push(j)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const i=je();vn.equals(this.lastRecordedPageScroll,i)||(this.lastRecordedPageScroll=i,this.updateScreenCalculations_())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(i,a){const p=this.getParentSvg();i!=null&&(this.cachedParentSvgSize.width=i,p.setAttribute("data-cached-width",`${i}`)),a!=null&&(this.cachedParentSvgSize.height=a,p.setAttribute("data-cached-height",`${a}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let i=this.svgGroup_;for(;i;){if(i.tagName==="svg"){this.cachedParentSvg=i;break}i=i.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(se()){var i=this.scale,a=-this.scrollY,p=-this.scrollX;if(!(i===this.oldScale&&1>Math.abs(a-this.oldTop)&&1>Math.abs(p-this.oldLeft))){var w=new(ke(ii))(a,p,i,this.id,this.oldScale);this.oldScale=i,this.oldTop=a,this.oldLeft=p,ce(w)}}}translate(i,a){let p;(p=this.layerManager)==null||p.translateLayers(new vn(i,a),this.scale);let w;(w=this.grid)==null||w.moveTo(i,a),this.maybeFireViewportChangeEvent()}getWidth(){const i=this.getMetrics();return i?i.viewWidth/this.scale:0}setVisible(i){this.isVisible_=i,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(i),this.getFlyout()&&this.getFlyout().setContainerVisible(i),this.getParentSvg().style.display=i?"block":"none",this.toolbox_&&this.toolbox_.setVisible(i),i||this.hideChaff(!0))}render(){for(var i=this.getAllBlocks(!1),a=i.length-1;0<=a;a--)i[a].queueRender();if(this.currentGesture_)for(i=this.currentGesture_.getInsertionMarkers(),a=0;a<i.length;a++)i[a].queueRender();Tr().then(()=>void this.markerManager.updateMarkers())}highlightBlock(i,a){if(a===void 0){for(let p=0,w;w=this.highlightedBlocks[p];p++)w.setHighlighted(!1);this.highlightedBlocks.length=0}(i=i?this.getBlockById(i):null)&&((a=a===void 0||a)?this.highlightedBlocks.indexOf(i)===-1&&this.highlightedBlocks.push(i):Mt(this.highlightedBlocks,i),i.setHighlighted(a))}paste(i){if(Ee("Blockly.WorkspaceSvg.prototype.paste","v10","v11","Blockly.clipboard.paste"),!this.rendered||!i.type&&!i.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0);let p;try{p=i.type?this.pasteBlock_(null,i):i.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_(i):this.pasteBlock_(i,null)}finally{t.setGroup$$module$build$src$core$events$utils(a)}return p}pasteBlock_(i,a){t.disable$$module$build$src$core$events$utils();let p;try{let w=0,L=0;if(i){p=lo(i,this);let j;w=parseInt((j=i.getAttribute("x"))!=null?j:"0"),this.RTL&&(w=-w);let _e;L=parseInt((_e=i.getAttribute("y"))!=null?_e:"0")}else a&&(p=Vn(a,this),w=a.x||10,this.RTL&&(w=this.getWidth()-w),L=a.y||10);if(!isNaN(w)&&!isNaN(L)){let j;do{j=!1;const _e=this.getAllBlocks(!1);for(let We=0,Jt;Jt=_e[We];We++){const jn=Jt.getRelativeToSurfaceXY();if(1>=Math.abs(w-jn.x)&&1>=Math.abs(L-jn.y)){j=!0;break}}if(!j){const We=p.getConnections_(!1);for(let Jt=0,jn;jn=We[Jt];Jt++)if(jn.closest(t.config$$module$build$src$core$config.snapRadius,new vn(w,L)).connection){j=!0;break}}j&&(w=this.RTL?w-t.config$$module$build$src$core$config.snapRadius:w+t.config$$module$build$src$core$config.snapRadius,L+=2*t.config$$module$build$src$core$config.snapRadius)}while(j);p.moveTo(new vn(w,L))}}finally{t.enable$$module$build$src$core$events$utils()}return se()&&!p.isShadow()&&ce(new(ke(t.CREATE$$module$build$src$core$events$utils))(p)),p.select(),p}pasteWorkspaceComment_(i){t.disable$$module$build$src$core$events$utils();let a;try{a=Ul.fromXmlRendered(i,this);let p,w=parseInt((p=i.getAttribute("x"))!=null?p:"0"),L,j=parseInt((L=i.getAttribute("y"))!=null?L:"0");isNaN(w)||isNaN(j)||(this.RTL&&(w=-w),a.moveBy(w+50,j+50))}finally{t.enable$$module$build$src$core$events$utils()}return se()&&sh.fireCreateEvent(a),a.select(),a}refreshToolboxSelection(){const i=this.isFlyout?this.targetWorkspace:this;i&&!i.currentGesture_&&i.toolbox_&&i.toolbox_.getFlyout()&&i.toolbox_.refreshSelection()}renameVariableById(i,a){super.renameVariableById(i,a),this.refreshToolboxSelection()}deleteVariableById(i){super.deleteVariableById(i),this.refreshToolboxSelection()}createVariable(i,a,p){return i=super.createVariable(i,a,p),this.refreshToolboxSelection(),i}recordDragTargets(){const i=this.componentManager.getComponents(vl.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let a=0,p;p=i[a];a++){const w=p.getClientRect();w&&this.dragTargetAreas.push({component:p,clientRect:w})}}newBlock(i,a){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(i){for(let a=0,p;p=this.dragTargetAreas[a];a++)if(p.clientRect.contains(i.clientX,i.clientY))return p.component;return null}onMouseDown_(i){const a=this.getGesture(i);a&&a.handleWsStart(i,this)}startDrag(i,a){i=kt(i,this.getParentSvg(),this.getInverseScreenCTM()),i.x/=this.scale,i.y/=this.scale,this.dragDeltaXY=vn.difference(a,i)}moveDrag(i){return i=kt(i,this.getParentSvg(),this.getInverseScreenCTM()),i.x/=this.scale,i.y/=this.scale,vn.sum(this.dragDeltaXY,i)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const i=!!this.scrollbar;return this.isMovable()&&(!i||i&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const i=!!this.scrollbar;return this.isMovable()&&(!i||i&&this.scrollbar.canScrollVertically())}onMouseWheel_(i){if(vm.inProgress())i.preventDefault(),i.stopPropagation();else{var a=this.options.zoomOptions&&this.options.zoomOptions.wheel,p=this.options.moveOptions&&this.options.moveOptions.wheel;if(a||p){var w=vt(i);if(Rr)var L=i.metaKey;a&&(i.ctrlKey||L||!p)?(w=-w.y/50,a=kt(i,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(a.x,a.y,w)):(a=this.scrollX-w.x,p=this.scrollY-w.y,i.shiftKey&&!w.x&&(a=this.scrollX-w.y,p=this.scrollY),this.scroll(a,p)),i.preventDefault()}}}getBlocksBoundingBox(){const i=this.getTopBoundedElements();if(!i.length)return new Li(0,0,0,0);const a=i[0].getBoundingRectangle();for(let w=1;w<i.length;w++){var p=i[w];p.isInsertionMarker&&p.isInsertionMarker()||(p=p.getBoundingRectangle(),p.top<a.top&&(a.top=p.top),p.bottom>a.bottom&&(a.bottom=p.bottom),p.left<a.left&&(a.left=p.left),p.right>a.right&&(a.right=p.right))}return a}cleanUp(){this.setResizesEnabled(!1),t.setGroup$$module$build$src$core$events$utils(!0);const i=this.getTopBlocks(!0);let a=0;for(let p=0,w;w=i[p];p++){if(!w.isMovable())continue;const L=w.getRelativeToSurfaceXY();w.moveBy(-L.x,a-L.y,["cleanup"]),w.snapToGrid(),a=w.getRelativeToSurfaceXY().y+w.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}t.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(i){if(!this.options.readOnly&&!this.isFlyout){var a=Ni.registry.getContextMenuOptions(Ni.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(a,i),Vu(i,a,this.RTL)}}updateToolbox(i){if(i=_t(i)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Xt(i)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=i,this.toolbox_.render(i)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=i,this.flyout.show(i)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(k(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(i,a,p){p=Math.pow(this.options.zoomOptions.scaleSpeed,p);const w=this.scale*p;if(this.scale!==w){w>this.options.zoomOptions.maxScale?p=this.options.zoomOptions.maxScale/this.scale:w<this.options.zoomOptions.minScale&&(p=this.options.zoomOptions.minScale/this.scale);var L=this.getCanvas().getCTM(),j=this.getParentSvg().createSVGPoint();j.x=i,j.y=a,j=j.matrixTransform(L.inverse()),i=j.x,a=j.y,L=L.translate(i*(1-p),a*(1-p)).scale(p),this.scrollX=L.e,this.scrollY=L.f,this.setScale(w)}}zoomCenter(i){var a=this.getMetrics();let p;this.flyout?(p=a.svgWidth?a.svgWidth/2:0,a=a.svgHeight?a.svgHeight/2:0):(p=a.viewWidth/2+a.absoluteLeft,a=a.viewHeight/2+a.absoluteTop),this.zoom(p,a,i)}zoomToFit(){if(this.isMovable()){var i=this.getMetrics(),a=i.viewWidth;i=i.viewHeight;var p=this.getBlocksBoundingBox(),w=2*kE,L=p.right-p.left+w;if(p=p.bottom-p.top+w,L){this.flyout&&(this.horizontalLayout?(i+=this.flyout.getHeight(),p+=this.flyout.getHeight()/this.scale):(a+=this.flyout.getWidth(),L+=this.flyout.getWidth()/this.scale)),a/=L,i/=p,t.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(a,i)),this.scrollCenter()}finally{t.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){Be(this.getCanvas(),"blocklyCanvasTransitioning"),Be(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){yt(this.getCanvas(),"blocklyCanvasTransitioning"),yt(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var i=this.getMetrics(),a=(i.scrollWidth-i.viewWidth)/2,p=(i.scrollHeight-i.viewHeight)/2;a=-a-i.scrollLeft,p=-p-i.scrollTop,this.scroll(a,p)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(i,a){if(this.isMovable()){var p=i?this.getBlockById(i):null;if(p){i=p.getRelativeToSurfaceXY(),p=a?{height:p.height,width:p.width}:p.getHeightWidth();var w=this.scale;a=(i.x+(this.RTL?-1:1)*p.width/2)*w,i=(i.y+p.height/2)*w,p=this.getMetrics(),this.scroll(-(a-p.viewWidth/2),-(i-p.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(i){this.options.zoomOptions.maxScale&&i>this.options.zoomOptions.maxScale?i=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&i<this.options.zoomOptions.minScale&&(i=this.options.zoomOptions.minScale),this.scale=i,this.hideChaff(!1),(i=this.getFlyout(!1))&&i.isVisible()&&(i.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),i=this.getMetrics(),this.scrollX-=i.absoluteLeft,this.scrollY-=i.absoluteTop,i.viewLeft+=i.absoluteLeft,i.viewTop+=i.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(i):this.scrollbar.resizeContent(i))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(i,a){this.hideChaff(!0);const p=this.getMetrics();i=Math.min(i,-p.scrollLeft),a=Math.min(a,-p.scrollTop);const w=p.scrollTop+Math.max(0,p.scrollHeight-p.viewHeight);i=Math.max(i,-(p.scrollLeft+Math.max(0,p.scrollWidth-p.viewWidth))),a=Math.max(a,-w),this.scrollX=i,this.scrollY=a,this.scrollbar&&this.scrollbar.set(-(i+p.scrollLeft),-(a+p.scrollTop),!1),i+=p.absoluteLeft,a+=p.absoluteTop,this.translate(i,a)}getBlockById(i){return super.getBlockById(i)}getAllBlocks(i=!1){return super.getAllBlocks(i)}getTopBlocks(i=!1){return super.getTopBlocks(i)}addTopBlock(i){this.addTopBoundedElement(i),super.addTopBlock(i)}removeTopBlock(i){this.removeTopBoundedElement(i),super.removeTopBlock(i)}addTopComment(i){this.addTopBoundedElement(i),super.addTopComment(i)}removeTopComment(i){this.removeTopBoundedElement(i),super.removeTopComment(i)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(i){this.topBoundedElements.push(i)}removeTopBoundedElement(i){Mt(this.topBoundedElements,i)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(i){const a=!this.resizesEnabled&&i;this.resizesEnabled=i,a&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(i,a){if(typeof a!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(i,a)}getButtonCallback(i){let a;return(a=this.flyoutButtonCallbacks.get(i))!=null?a:null}removeButtonCallback(i){this.flyoutButtonCallbacks.delete(i)}registerToolboxCategoryCallback(i,a){if(typeof a!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(i,a)}getToolboxCategoryCallback(i){return this.toolboxCategoryCallbacks.get(i)||null}removeToolboxCategoryCallback(i){this.toolboxCategoryCallbacks.delete(i)}getGesture(i){const a=i.type==="pointerdown",p=this.currentGesture_;return p?a&&p.hasStarted()?(console.warn("Tried to start the same gesture twice."),p.cancel(),null):p:a?this.currentGesture_=new vm(i,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(i=!1){Il(),Zl(),ll(),this.hideComponents(i)}hideComponents(i=!1){this.getComponentManager().getComponents(vl.Capability.AUTOHIDEABLE,!0).forEach(a=>a.autoHide(i))}static setTopLevelWorkspaceMetrics_(i){const a=this.getMetrics();typeof i.x=="number"&&(this.scrollX=-(a.scrollLeft+(a.scrollWidth-a.viewWidth)*i.x)),typeof i.y=="number"&&(this.scrollY=-(a.scrollTop+(a.scrollHeight-a.viewHeight)*i.y)),this.translate(this.scrollX+a.absoluteLeft,this.scrollY+a.absoluteTop)}},Tb=class extends v{constructor(i,a){super(a),this.type=Bl,this.isOpen=i}toJson(){const i=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return i.isOpen=this.isOpen,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Tb),a.isOpen=i.isOpen,a}};r(Ut.EVENT,Bl,Tb);var Sb=class extends _f{constructor(i){if(super(i),this.type=t.DELETE$$module$build$src$core$events$utils,i){if(i.getParent())throw Error("Connected blocks cannot be deleted.");i.isShadow()&&(this.recordUndo=!1),this.oldXml=Er(i),this.ids=Se(i),this.wasShadow=i.isShadow(),this.oldJson=Ci(i,{addCoordinates:!0})}}toJson(){const i=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return i.oldXml=Qi(this.oldXml),i.ids=this.ids,i.wasShadow=this.wasShadow,i.oldJson=this.oldJson,this.recordUndo||(i.recordUndo=this.recordUndo),i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Sb),a.oldXml=t.textToDom$$module$build$src$core$utils$xml(i.oldXml),a.ids=i.ids,a.wasShadow=i.wasShadow||a.oldXml.tagName.toLowerCase()==="shadow",a.oldJson=i.oldJson,i.recordUndo!==void 0&&(a.recordUndo=i.recordUndo),a}run(i){const a=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(i)for(i=0;i<this.ids.length;i++){const p=this.ids[i],w=a.getBlockById(p);w?w.dispose(!1):p===this.blockId&&console.warn("Can't delete non-existent block: "+p)}else Vn(this.oldJson,a)}};r(Ut.EVENT,t.DELETE$$module$build$src$core$events$utils,Sb);var D0=class{constructor(i,a,p){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.isInsertionMarker_=this.disposing=!1,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=i,this.id=p&&!i.getBlockById(p)?p:q(),i.setBlockById(this.id,this),this.xy_=new vn(0,0),this.isInFlyout=i.isFlyout,this.isInMutator=i.isMutator,this.RTL=i.RTL,a){if(this.type=a,p=Kr[a],!p||typeof p!="object")throw TypeError("Invalid block definition for type: "+a);Object.assign(this,p)}i.addTopBlock(this),i.addTypedBlock(this),new.target===D0&&this.doInit_()}doInit_(){const i=t.getGroup$$module$build$src$core$events$utils();i||t.setGroup$$module$build$src$core$events$utils(!0);const a=le();try{typeof this.init=="function"&&(ae(!1),this.init(),ae(a)),se()&&ce(new(ke(t.CREATE$$module$build$src$core$events$utils))(this))}finally{t.setGroup$$module$build$src$core$events$utils(i),ae(a)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(i){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(i),se()&&ce(new(ke(t.DELETE$$module$build$src$core$events$utils))(this)),this.workspace.removeTopBlock(this),this.disposeInternal())}disposeInternal(){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0,typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(i=>i.disposeInternal()),this.inputList.forEach(i=>i.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(i=>i.dispose()),this.disposed=!0)}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(const i of this.inputList)for(const a of i.fieldRow)a.initModel&&a.initModel()}unplug(i){this.outputConnection&&this.unplugFromRow_(i),this.previousConnection&&this.unplugFromStack_(i)}unplugFromRow_(i){let a=null,p;(p=this.outputConnection)!=null&&p.isConnected()&&(a=this.outputConnection.targetConnection,this.outputConnection.disconnect()),a&&i&&(i=this.getOnlyValueConnection_())&&i.isConnected()&&!i.targetBlock().isShadow()&&(i=i.targetConnection,i==null||i.disconnect(),this.workspace.connectionChecker.canConnect(i,a,!1)?a.connect(i):i==null||i.onFailedConnect(a))}getOnlyValueConnection_(){let i=null;for(let a=0;a<this.inputList.length;a++){const p=this.inputList[a].connection;if(p&&p.type===Un.INPUT_VALUE&&p.targetConnection){if(i)return null;i=p}}return i}unplugFromStack_(i){let a=null;var p;if((p=this.previousConnection)!=null&&p.isConnected()&&(a=this.previousConnection.targetConnection,this.previousConnection.disconnect()),p=this.getNextBlock(),i&&p&&!p.isShadow()){let w,L;i=(L=(w=this.nextConnection)==null?void 0:w.targetConnection)!=null?L:null,i==null||i.disconnect(),a&&this.workspace.connectionChecker.canConnect(a,i,!1)&&a.connect(i)}}getConnections_(i){i=[],this.outputConnection&&i.push(this.outputConnection),this.previousConnection&&i.push(this.previousConnection),this.nextConnection&&i.push(this.nextConnection);for(let a=0,p;p=this.inputList[a];a++)p.connection&&i.push(p.connection);return i}lastConnectionInStack(i){let a=this.nextConnection;for(;a;){const p=a.targetBlock();if(!p||i&&p.isShadow())return a;a=p.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(i){for(let a=0,p;p=this.inputList[a];a++)if(p.connection&&p.connection.targetBlock()===i)return p;return null}getSurroundParent(){let i=this,a;do if(a=i,i=i.getParent(),!i)return null;while(i.getNextBlock()===a);return i}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let i,a=this;do i=a,a=i.parentBlock_;while(a);return i}getTopStackBlock(){let i=this,a;do a=i.getPreviousBlock();while(a&&a.getNextBlock()===i&&(i=a));return i}getChildren(i){if(!i)return this.childBlocks_;i=[];for(let p=0,w;w=this.inputList[p];p++)if(w.connection){var a=w.connection.targetBlock();a&&i.push(a)}return(a=this.getNextBlock())&&i.push(a),i}setParent(i){if(i!==this.parentBlock_){var a=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),p=!!a;if(p&&i&&a!==i)throw Error("Block connected to superior one that is not new parent.");if(!p&&i)throw Error("Block not connected to new parent.");if(p&&!i)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?Mt(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=i)?i.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(i){const a=[this],p=this.getChildren(i);for(let w,L=0;w=p[L];L++)a.push(...w.getDescendants(i));return a}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable_}setDeletable(i){this.deletable_=i}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable_}setMovable(i){this.movable_=i}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(V(this,!0)):!0}isShadow(){return this.isShadow_}setShadow(i){this.isShadow_=i}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(i){this.isInsertionMarker_=i}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable_}setEditable(i){this.editable_=i;for(let a=0,p;p=this.inputList[a];a++)for(let w=0,L;L=p.fieldRow[w];w++)L.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const i of this.inputList)if(i.connection||1<i.fieldRow.length)return!1;return!0}getMatchingConnection(i,a){const p=this.getConnections_(!0);if(i=i.getConnections_(!0),p.length!==i.length)throw Error("Connection lists did not match in length.");for(let w=0;w<i.length;w++)if(i[w]===a)return p[w];return null}setHelpUrl(i){this.helpUrl=i}setTooltip(i){this.tooltip=i}getTooltip(){return po(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(i){i=Zi(i),this.hue_=i.hue,this.colour_=i.hex}setStyle(i){this.styleName_=i}setOnChange(i){if(i&&typeof i!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=i,this.onchangeWrapper_=i.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(i){if(typeof i!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(i===void 0?"nothing":i+" of type "+typeof i)+" instead");for(let a=0,p;p=this.inputList[a];a++)for(let w=0,L;L=p.fieldRow[w];w++)if(L.name===i)return L;return null}getVars(){const i=[];for(let a=0,p;p=this.inputList[a];a++)for(let w=0,L;L=p.fieldRow[w];w++)L.referencesVariables()&&i.push(L.getValue());return i}getVarModels(){const i=[];for(let a=0,p;p=this.inputList[a];a++)for(let w=0,L;L=p.fieldRow[w];w++)if(L.referencesVariables()){const j=this.workspace.getVariableById(L.getValue());j&&i.push(j)}return i}updateVarName(i){for(let a=0,p;p=this.inputList[a];a++)for(let w=0,L;L=p.fieldRow[w];w++)L.referencesVariables()&&i.getId()===L.getValue()&&L.refreshVariableName()}renameVarById(i,a){for(let p=0,w;w=this.inputList[p];p++)for(let L=0,j;j=w.fieldRow[L];L++)j.referencesVariables()&&i===j.getValue()&&j.setValue(a)}getFieldValue(i){return(i=this.getField(i))?i.getValue():null}setFieldValue(i,a){const p=this.getField(a);if(!p)throw Error('Field "'+a+'" not found.');p.setValue(i)}setPreviousStatement(i,a){if(i)a===void 0&&(a=null),this.previousConnection||(this.previousConnection=this.makeConnection_(Un.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(a);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(i,a){if(i)a===void 0&&(a=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Un.NEXT_STATEMENT)),this.nextConnection.setCheck(a);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(i,a){if(i)a===void 0&&(a=null),this.outputConnection||(this.outputConnection=this.makeConnection_(Un.OUTPUT_VALUE)),this.outputConnection.setCheck(a);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(i){this.inputsInline!==i&&(ce(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this,"inline",null,this.inputsInline,i)),this.inputsInline=i)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var i=1;i<this.inputList.length;i++)if(this.inputList[i-1]instanceof Pp&&this.inputList[i]instanceof Pp)return!1;for(i=1;i<this.inputList.length;i++)if(this.inputList[i-1]instanceof t.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[i]instanceof Pp)return!0;for(i=0;i<this.inputList.length;i++)if(this.inputList[i]instanceof Sm)return!0;return!1}setOutputShape(i){this.outputShape_=i}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(i){if(this.isEnabled()!==i){const a=this.disabled;this.disabled=!i,ce(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this,"disabled",null,a,!i))}}getInheritedDisabled(){let i=this.getSurroundParent();for(;i;){if(i.disabled)return!0;i=i.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(i){this.collapsed_!==i&&(ce(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this,"collapsed",null,this.collapsed_,i)),this.collapsed_=i)}toString(i,a){a=this.toTokens(a);for(let w=2;w<a.length;w++)a[w-2]==="("&&a[w]===")"&&(a[w-2]=a[w-1],a.splice(w-1,2));let p="";return a=a.reduce((w,L)=>(w=w+(p==="("||L===")"?"":" ")+L,p=L[L.length-1],w),""),a=a.trim()||"???",i&&a.length>i&&(a=a.substring(0,i-3)+"..."),a}toTokens(i="?"){const a=[];for(const w of this.inputList)if(w.name!=Ug){for(const L of w.fieldRow)a.push(L.getText());if(w.connection){const L=w.connection.targetBlock();if(L){var p=w.connection;let j=p.getCheck();!j&&p.targetConnection&&(j=p.targetConnection.getCheck()),(p=!!j&&(j.indexOf("Boolean")!==-1||j.indexOf("Number")!==-1))&&a.push("("),a.push(...L.toTokens(i)),p&&a.push(")")}else a.push(i)}}return a}appendValueInput(i){return this.appendInput(new t.ValueInput$$module$build$src$core$inputs$value_input(i,this))}appendStatementInput(i){return this.statementInputCount++,this.appendInput(new id(i,this))}appendDummyInput(i=""){return this.appendInput(new Pp(i,this))}appendEndRowInput(i=""){return this.appendInput(new Sm(i,this))}appendInput(i){return this.inputList.push(i),i}appendInputFromRegistry(i,a){return(i=h(Ut.INPUT,i,!1))?this.appendInput(new i(a,this)):null}jsonInit(i){var a=i.type?'Block "'+i.type+'": ':"";if(i.output&&i.previousStatement)throw Error(a+"Must not have both an output and a previousStatement.");for(var p=0;i["args"+p];){if(i["message"+p]===void 0)throw Error(a+`args${p} must have a corresponding message (message${p}).`);p++}if(i.style&&i.style.hat&&(this.hat=i.style.hat,i.style=null),i.style&&i.colour)throw Error(a+"Must not have both a colour and a style.");for(i.style?this.jsonInitStyle_(i,a):this.jsonInitColour_(i,a),p=0;i["message"+p]!==void 0;)this.interpolate_(i["message"+p],i["args"+p]||[],i["implicitAlign"+p]||i["lastDummyAlign"+p],a),p++;if(i.inputsInline!==void 0&&(t.disable$$module$build$src$core$events$utils(),this.setInputsInline(i.inputsInline),t.enable$$module$build$src$core$events$utils()),i.output!==void 0&&this.setOutput(!0,i.output),i.outputShape!==void 0&&this.setOutputShape(i.outputShape),i.previousStatement!==void 0&&this.setPreviousStatement(!0,i.previousStatement),i.nextStatement!==void 0&&this.setNextStatement(!0,i.nextStatement),i.tooltip!==void 0&&(p=Xr(i.tooltip),this.setTooltip(p)),i.enableContextMenu!==void 0&&(this.contextMenu=!!i.enableContextMenu),i.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!i.suppressPrefixSuffix),i.helpUrl!==void 0&&(p=Xr(i.helpUrl),this.setHelpUrl(p)),typeof i.extensions=="string"&&(console.warn(a+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+i.type+"' block."),i.extensions=[i.extensions]),i.mutator!==void 0&&es(i.mutator,this,!0),i=i.extensions,Array.isArray(i))for(a=0;a<i.length;a++)es(i[a],this,!1)}jsonInitColour_(i,a){if("colour"in i)if(i.colour===void 0)console.warn(a+"Undefined colour value.");else{i=i.colour;try{this.setColour(i)}catch{console.warn(a+"Illegal colour value: ",i)}}}jsonInitStyle_(i,a){i=i.style;try{this.setStyle(i)}catch{console.warn(a+"Style does not exist: ",i)}}mixin(i,a){if(a!==void 0&&typeof a!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!a){a=[];for(const p in i)this[p]!==void 0&&a.push(p);if(a.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(a))}Object.assign(this,i)}interpolate_(i,a,p,w){i=Wa(i),this.validateTokens_(i,a.length),a=this.interpolateArguments_(i,a,p),p=[];for(let L=0,j;j=a[L];L++)if(this.isInputKeyword_(j.type)){if(i=this.inputFromJson_(j,w)){for(let _e=0,We;We=p[_e];_e++)i.appendField(We[0],We[1]);p.length=0}}else(i=this.fieldFromJson_(j))&&p.push([i,j.name])}validateTokens_(i,a){const p=[];let w=0;for(let L=0;L<i.length;L++){const j=i[L];if(typeof j=="number"){if(1>j||j>a)throw Error('Block "'+this.type+'": Message index %'+j+" out of range.");if(p[j])throw Error('Block "'+this.type+'": Message index %'+j+" duplicated.");p[j]=!0,w++}}if(w!==a)throw Error('Block "'+this.type+'": Message does not reference all '+a+" arg(s).")}interpolateArguments_(i,a,p){const w=[];for(let j=0;j<i.length;j++){var L=i[j];if(typeof L=="number"&&(L=a[L-1]),typeof L=="string"){if(L===`
`)L={type:"input_end_row"},p&&(L.align=p);else if(L=this.stringToFieldJson_(L),!L)continue}w.push(L)}return(i=w.length)&&!this.isInputKeyword_(w[i-1].type)&&(i={type:"input_dummy"},p&&(i.align=p),w.push(i)),w}fieldFromJson_(i){const a=t.fromJson$$module$build$src$core$field_registry(i);return!a&&i.alt?typeof i.alt=="string"?(i=this.stringToFieldJson_(i.alt))?this.fieldFromJson_(i):null:this.fieldFromJson_(i.alt):a}inputFromJson_(i,a){var p={LEFT:t.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:t.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:t.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:t.Align$$module$build$src$core$inputs$align.CENTRE};let w;switch(i.type){case"input_value":w=this.appendValueInput(i.name);break;case"input_statement":w=this.appendStatementInput(i.name);break;case"input_dummy":w=this.appendDummyInput(i.name);break;case"input_end_row":w=this.appendEndRowInput(i.name);break;default:w=this.appendInputFromRegistry(i.type,i.name)}return w?(i.check&&w.setCheck(i.check),i.align&&(p=p[i.align.toUpperCase()],p===void 0?console.warn(a+"Illegal align value: ",i.align):w.setAlign(p)),w):null}isInputKeyword_(i){return i==="input_value"||i==="input_statement"||i==="input_dummy"||i==="input_end_row"||u(Ut.INPUT,i)}stringToFieldJson_(i){return(i=i.trim())?{type:"field_label",text:i}:null}moveInputBefore(i,a){if(i!==a){var p=-1,w=a?-1:this.inputList.length;for(let L=0,j;j=this.inputList[L];L++)if(j.name===i){if(p=L,w!==-1)break}else if(a&&j.name===a&&(w=L,p!==-1))break;if(p===-1)throw Error('Named input "'+i+'" not found.');if(w===-1)throw Error('Reference input "'+a+'" not found.');this.moveNumberedInputBefore(p,w)}}moveNumberedInputBefore(i,a){if(i===a)throw Error("Can't move input to itself.");if(i>=this.inputList.length)throw RangeError("Input index "+i+" out of bounds.");if(a>this.inputList.length)throw RangeError("Reference input "+a+" out of bounds.");const p=this.inputList[i];this.inputList.splice(i,1),i<a&&a--,this.inputList.splice(a,0,p)}removeInput(i,a){for(let p=0,w;w=this.inputList[p];p++)if(w.name===i)return w instanceof id&&this.statementInputCount--,w.dispose(),this.inputList.splice(p,1),!0;if(a)return!1;throw Error("Input not found: "+i)}getInput(i){for(let a=0,p;p=this.inputList[a];a++)if(p.name===i)return p;return null}getInputTargetBlock(i){return(i=this.getInput(i))&&i.connection&&i.connection.targetBlock()}getCommentText(){let i,a;return(a=(i=this.getIcon(nd.TYPE))==null?void 0:i.getText())!=null?a:null}setCommentText(i){var a;let p;const w=(p=(a=this.getIcon(nd.TYPE))==null?void 0:a.getText())!=null?p:null;w!==i&&(i!==null?((a=this.getIcon(nd.TYPE))||(a=this.addIcon(new nd(this))),t.disable$$module$build$src$core$events$utils(),a.setText(i),t.enable$$module$build$src$core$events$utils()):this.removeIcon(nd.TYPE),ce(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this,"comment",null,w,i)))}setWarningText(i,a){}setMutator(i){}addIcon(i){if(this.hasIcon(i.getType()))throw new H_(i);return this.icons.push(i),this.icons.sort((a,p)=>a.getWeight()-p.getWeight()),i}removeIcon(i){if(!this.hasIcon(i))return!1;let a;return(a=this.getIcon(i))==null||a.dispose(),this.icons=this.icons.filter(p=>!p.getType().equals(i)),!0}hasIcon(i){return this.icons.some(a=>a.getType().equals(i))}getIcon(i){return i instanceof Yo?this.icons.find(a=>a.getType().equals(i)):this.icons.find(a=>a.getType().toString()===i)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy_}moveBy(i,a,p){if(this.parentBlock_)throw Error("Block has parent");const w=new(ke(t.MOVE$$module$build$src$core$events$utils))(this);p&&w.setReason(p),this.xy_.translate(i,a),w.recordNew(),ce(w)}makeConnection_(i){return new fs(this,i)}allInputsFilled(i){if(i===void 0&&(i=!0),!i&&this.isShadow())return!1;for(let p=0,w;w=this.inputList[p];p++)if(w.connection){var a=w.connection.targetBlock();if(!a||!a.allInputsFilled(i))return!1}return(a=this.getNextBlock())?a.allInputsFilled(i):!0}toDevString(){let i=this.type?'"'+this.type+'" block':"Block";return this.id&&(i+=' (id="'+this.id+'")'),i}};D0.COLLAPSED_INPUT_NAME=Ug,D0.COLLAPSED_FIELD_NAME=W_;var kT=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(i){this.drawer=i}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(i){const a=this.curNode;this.curNode=i,this.drawer&&this.drawer.draw(a,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},wb=class extends kT{constructor(){super(),this.type="cursor"}next(){var i=this.getCurNode();if(!i)return null;for(i=i.next();i&&i.next()&&(i.getType()===tn.types.NEXT||i.getType()===tn.types.BLOCK);)i=i.next();return i&&this.setCurNode(i),i}in(){var i=this.getCurNode();if(!i)return null;(i.getType()===tn.types.PREVIOUS||i.getType()===tn.types.OUTPUT)&&(i=i.next());let a,p;return(i=(p=(a=i)==null?void 0:a.in())!=null?p:null)&&this.setCurNode(i),i}prev(){var i=this.getCurNode();if(!i)return null;for(i=i.prev();i&&i.prev()&&(i.getType()===tn.types.NEXT||i.getType()===tn.types.BLOCK);)i=i.prev();return i&&this.setCurNode(i),i}out(){var i=this.getCurNode();return i?((i=i.out())&&i.getType()===tn.types.BLOCK&&(i=i.prev()||i),i&&this.setCurNode(i),i):null}};r(Ut.CURSOR,Dl,wb);var Wv=class extends wb{constructor(){super()}next(){var i=this.getCurNode();return i?((i=this.getNextNode_(i,this.validNode_))&&this.setCurNode(i),i):null}in(){return this.next()}prev(){var i=this.getCurNode();return i?((i=this.getPreviousNode_(i,this.validNode_))&&this.setCurNode(i),i):null}out(){return this.prev()}getNextNode_(i,a){if(!i)return null;const p=i.in()||i.next();return a(p)?p:p?this.getNextNode_(p,a):(i=this.findSiblingOrParent(i.out()),a(i)?i:i?this.getNextNode_(i,a):null)}getPreviousNode_(i,a){if(!i)return null;let p=i.prev();return p=p?this.getRightMostChild(p):i.out(),a(p)?p:p?this.getPreviousNode_(p,a):null}validNode_(i){let a=!1;return i=i&&i.getType(),(i===tn.types.OUTPUT||i===tn.types.INPUT||i===tn.types.FIELD||i===tn.types.NEXT||i===tn.types.PREVIOUS||i===tn.types.WORKSPACE)&&(a=!0),a}findSiblingOrParent(i){if(!i)return null;const a=i.next();return a||this.findSiblingOrParent(i.out())}getRightMostChild(i){if(!i.in())return i;for(i=i.in();i&&i.next();)i=i.next();return this.getRightMostChild(i)}};Wv.registrationName="basicCursor",r(Ut.CURSOR,Wv.registrationName,Wv);var OT=class extends Wv{validNode_(i){let a=!1;const p=i&&i.getType();return i&&(i=i.getLocation(),p===tn.types.FIELD&&i&&i.isTabNavigable()&&i.isClickable()&&(a=!0)),a}},Eb=10,sd=class extends fs{constructor(i,a){super(i,a),this.highlighted=!1,this.targetConnection=null,this.db=i.workspace.connectionDBList[a],this.dbOpposite=i.workspace.connectionDBList[en[a]],this.offsetInBlock=new vn(0,0),this.trackedState=sd.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===sd.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let i,a;(a=(i=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||a.call(i,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(i){const a=this.x-i.x;return i=this.y-i.y,Math.sqrt(a*a+i*i)}bumpAwayFrom(i){if(!this.sourceBlock_.workspace.isDragging()){var a=this.sourceBlock_.getRootBlock();if(!a.isInFlyout){var p=!1;if(!a.isMovable()){if(a=i.getSourceBlock().getRootBlock(),!a.isMovable())return;i=this,p=!0}var w=O()==a;w||a.addSelect();var L=i.x+t.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Eb)-this.x,j=i.y+t.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Eb)-this.y;p&&(j=-j),a.RTL&&(L=i.x-t.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*Eb)-this.x),a.moveBy(L,j,["bump"]),w||a.removeSelect()}}}moveTo(i,a){let p=!1;return this.trackedState===sd.TrackedState.WILL_TRACK?(this.db.addConnection(this,a),this.trackedState=sd.TrackedState.TRACKED,p=!0):this.trackedState===sd.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,a),p=!0),this.x=i,this.y=a,p}moveBy(i,a){return this.moveTo(this.x+i,this.y+a)}moveToOffset(i){return this.moveTo(i.x+this.offsetInBlock.x,i.y+this.offsetInBlock.y)}setOffsetInBlock(i,a){this.offsetInBlock.x=i,this.offsetInBlock.y=a}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var i=this.targetConnection;const a=this.targetBlock();i&&a&&(i=vn.difference(this.offsetInBlock,i.offsetInBlock),a.translate(i.x,i.y))}closest(i,a){return this.dbOpposite.searchForClosest(this,i,a)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(i){i&&this.trackedState===sd.TrackedState.TRACKED||!i&&this.trackedState===sd.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(i?(this.db.addConnection(this,this.y),this.trackedState=sd.TrackedState.TRACKED):(this.trackedState===sd.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=sd.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const i=this.targetBlock().getDescendants(!1);for(let a=0;a<i.length;a++){const p=i[a],w=p.getConnections_(!0);for(let L=0;L<w.length;L++)w[L].setTracking(!1);for(const L of p.getIcons())iu(L)&&L.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let i=[];if(this.type!==Un.INPUT_VALUE&&this.type!==Un.NEXT_STATEMENT)return i;const a=this.targetBlock();if(a){let p;a.isCollapsed()?(p=[],a.outputConnection&&p.push(a.outputConnection),a.nextConnection&&p.push(a.nextConnection),a.previousConnection&&p.push(a.previousConnection)):p=a.getConnections_(!0);for(let w=0;w<p.length;w++)i.push(...p[w].startTrackingAll());i.length||(i=[a])}return i}onFailedConnect(i){const a=this.getSourceBlock();if(le()){const p=t.getGroup$$module$build$src$core$events$utils();setTimeout((function(){a.isDisposed()||a.getParent()||(t.setGroup$$module$build$src$core$events$utils(p),this.bumpAwayFrom(i),t.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),t.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(i=!0){const{parentConnection:a,childConnection:p}=this.getParentAndChildConnections();if(a&&p){var w=a.getSourceBlock(),L=p.getSourceBlock();super.disconnectInternal(i),w.rendered&&w.queueRender(),L.rendered&&(L.updateDisabled(),L.queueRender(),L.getSvgRoot().style.display="block")}}respawnShadow_(){super.respawnShadow_();const i=this.targetBlock();i&&(i.initSvg(),i.queueRender())}neighbours(i){return this.dbOpposite.getNeighbours(this,i)}connect_(i){super.connect_(i);var a=this.getSourceBlock();i=i.getSourceBlock();const p=a.rendered,w=i.rendered;p&&a.updateDisabled(),w&&i.updateDisabled(),p&&w&&(this.type===Un.NEXT_STATEMENT||this.type===Un.PREVIOUS_STATEMENT?i.queueRender():a.queueRender()),(a=a.getInputWithBlock(i))&&(a=a.isVisible(),i.getSvgRoot().style.display=a?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}setCheck(i){return super.setCheck(i),this.sourceBlock_.rendered&&this.sourceBlock_.queueRender(),this}};(function(i){i=i.TrackedState||(i.TrackedState={}),i[i.WILL_TRACK=-1]="WILL_TRACK",i[i.UNTRACKED=0]="UNTRACKED",i[i.TRACKED=1]="TRACKED"})(sd||(sd={})),sd.TrackedState;var Bp=class extends D0{constructor(i,a,p){super(i,a,p),this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.visuallyDisabled=this.rendered=!1,this.translation="",this.bumpNeighboursPid=0,this.dragging=!1,this.relativeCoords=new vn(0,0),this.workspace=i,this.svgGroup_=re(Ye.G,{}),this.style=i.getRenderer().getConstants().getBlockStyle(null),this.pathObject=i.getRenderer().makePathObject(this.svgGroup_,this.style),i=this.pathObject.svgPath,i.tooltip=this,Ui(i),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let a=0,p;p=this.inputList[a];a++)p.init();for(var i of this.getIcons())i.initView(this.createIconPointerDownListener(i)),i.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),i=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!i||Ie(i,"pointerdown",this,this.onMouseDown_),this.eventsInit_=!0,i.parentNode||this.workspace.getCanvas().appendChild(i)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(O()!==this){var i=null;if(O()){i=O().id,t.disable$$module$build$src$core$events$utils();try{O().unselect()}finally{t.enable$$module$build$src$core$events$utils()}}i=new(ke(To))(i,this.id,this.workspace.id),ce(i),P(this),this.addSelect()}}unselect(){if(O()===this){var i=new(ke(To))(this.id,null,this.workspace.id);i.workspaceId=this.workspace.id,ce(i),P(null),this.removeSelect()}}setParent(i){const a=this.parentBlock_;if(i!==a){te(),super.setParent(i),me();var p=this.getSvgRoot();if(!this.workspace.isClearing&&p){var w=this.getRelativeToSurfaceXY();i?i.getSvgRoot().appendChild(p):a&&((i=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(p,i):this.workspace.getCanvas().appendChild(p),this.translate(w.x,w.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const i=this.workspace.getLayerManager();if(!i)throw Error("Cannot calculate position because the workspace has not been appended");let a=0,p=0,w=this.getSvgRoot();if(w)do{const L=_r(w);a+=L.x,p+=L.y,w=w.parentNode}while(w&&!i.hasLayer(w));return new vn(a,p)}moveBy(i,a,p){if(this.parentBlock_)throw Error("Block has parent");const w=se();let L=null;w&&(L=new(ke(t.MOVE$$module$build$src$core$events$utils))(this),p&&L.setReason(p)),i=new vn(i,a),a=this.getRelativeToSurfaceXY(),i=vn.sum(a,i),this.translate(i.x,i.y),this.updateComponentLocations(i),w&&L&&(L.recordNew(),ce(L)),this.workspace.resizeContents()}translate(i,a){this.translation=`translate(${i}, ${a})`,this.relativeCoords=new vn(i,a),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(i,a){const p=this.getRelativeToSurfaceXY();this.moveBy(i.x-p.x,i.y-p.y,a)}moveDuringDrag(i){this.translate(i.x,i.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(i)}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var i=this.workspace.getGrid();if(i&&i.shouldSnap()){var a=i.getSpacing(),p=a/2,w=this.getRelativeToSurfaceXY();i=Math.round(Math.round((w.x-p)/a)*a+p-w.x),a=Math.round(Math.round((w.y-p)/a)*a+p-w.y),(i||a)&&this.moveBy(i,a,["snap"])}}}getBoundingRectangle(){const i=this.getRelativeToSurfaceXY(),a=this.getHeightWidth();let p,w;return this.RTL?(p=i.x-a.width,w=i.x):(p=i.x,w=i.x+a.width),new Li(i.y,i.y+a.height,p,w)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let i=0,a;a=this.inputList[i];i++)a.markDirty()}setCollapsed(i){this.collapsed_!==i&&(super.setCollapsed(i),this.updateCollapsed_())}updateCollapsed_(){var i=this.isCollapsed();const a=Ug,p=W_;for(let L=0,j;j=this.inputList[L];L++)j.name!==a&&j.setVisible(!i);for(var w of this.getIcons())w.updateCollapsed();i?(i=this.toString(ut),(w=this.getField(p))?w.setValue(i):(this.getInput(a)||this.appendDummyInput(a)).appendField(new wi(i),p)):(this.updateDisabled(),this.removeInput(a))}tab(i,a){const p=new OT;p.setCurNode(tn.createFieldNode(i)),i=p.getCurNode(),a?p.next():p.prev(),(a=p.getCurNode())&&a!==i&&(a.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(a))}onMouseDown_(i){const a=this.workspace.getGesture(i);a&&a.handleBlockStart(i,this)}showHelp(){const i=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;i&&window.open(i)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const i=Ni.registry.getContextMenuOptions(Ni.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(i),i}showContextMenu(i){const a=this.generateContextMenu();a&&a.length&&(Vu(i,a,this.RTL),pd(this))}updateComponentLocations(i){if(this.rendered){this.dragging||this.updateConnectionLocations(i),this.updateIconLocations(i),this.updateFieldLocations(i);for(const a of this.getChildren(!1))a.updateComponentLocations(vn.sum(i,a.relativeCoords))}}updateConnectionLocations(i){for(const a of this.getConnections_(!1))a.moveToOffset(i)}updateIconLocations(i){for(const a of this.getIcons())a.onLocationChange(i)}updateFieldLocations(i){for(const a of this.inputList)for(const p of a.fieldRow)p.onLocationChange(i)}setDragging(i){(this.dragging=i)?(this.translation="",Ki.push(...this.getConnections_(!0)),Be(this.svgGroup_,"blocklyDragging")):(Ki.length=0,yt(this.svgGroup_,"blocklyDragging"));for(let a=0;a<this.childBlocks_.length;a++)this.childBlocks_[a].setDragging(i)}setMovable(i){super.setMovable(i),this.pathObject.updateMovable(i)}setEditable(i){super.setEditable(i),i=this.getIcons();for(let a=0;a<i.length;a++)i[a].updateEditable()}setShadow(i){super.setShadow(i),this.applyColour()}setInsertionMarker(i){this.isInsertionMarker_!==i&&(this.isInsertionMarker_=i)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(i,a){this.isDeadOrDying()||(Id(),eu(),a&&this.rendered&&(this.unplug(i),Cu(this)),super.dispose(!!i),Ke(this.svgGroup_))}disposeInternal(){this.isDeadOrDying()||(super.disposeInternal(),this.rendered=!1,O()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(i=>clearTimeout(i)),this.warningTextDb.clear(),this.getIcons().forEach(i=>i.dispose()))}checkAndDelete(){this.workspace.isFlyout||(t.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),t.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:Op.TYPE,blockState:Ci(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:V(this,!0)}}applyColour(){this.pathObject.applyColour(this);const i=this.getIcons();for(let a=0;a<i.length;a++)i[a].applyColour();for(let a=0,p;p=this.inputList[a];a++)for(let w=0,L;L=p.fieldRow[w];w++)L.applyColour()}updateDisabled(){const i=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===i){let a;(a=this.getNextBlock())==null||a.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=i;for(const a of this.getChildren(!1))a.updateDisabled()}}getCommentIcon(){Ee("getCommentIcon","v10","v11","getIcon");let i;return(i=this.getIcon(nd.TYPE))!=null?i:null}setWarningText(i,a=""){if(a)this.warningTextDb.has(a)&&(clearTimeout(this.warningTextDb.get(a)),this.warningTextDb.delete(a));else{for(var p of this.warningTextDb.values())clearTimeout(p);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(a,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(a),this.setWarningText(i,a))},100));else if(this.isInFlyout&&(i=null),p=this.getIcon(ep.TYPE),i){let w=this.getSurroundParent(),L=null;for(;w;)w.isCollapsed()&&(L=w),w=w.getSurroundParent();L&&L.setWarningText(t.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,Bp.COLLAPSED_WARNING_ID),p?p.addMessage(i,a):this.addIcon(new ep(this).addMessage(i,a))}else p&&(a?(p.addMessage("",a),p.getText()||this.removeIcon(ep.TYPE)):this.removeIcon(ep.TYPE))}setMutator(i){this.removeIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),i&&this.addIcon(i)}addIcon(i){return super.addIcon(i),i instanceof ep&&(this.warning=i),i instanceof t.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=i),this.rendered&&(i.initView(this.createIconPointerDownListener(i)),i.applyColour(),i.updateEditable(),this.queueRender(),$i(),this.bumpNeighbours()),i}createIconPointerDownListener(i){return a=>{this.isDeadOrDying()||(a=this.workspace.getGesture(a))&&a.setStartIcon(i)}}removeIcon(i){const a=super.removeIcon(i);return i.equals(ep.TYPE)&&(this.warning=null),i.equals(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.rendered&&(this.queueRender(),$i(),this.bumpNeighbours()),a}setEnabled(i){this.isEnabled()!==i&&(super.setEnabled(i),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(i){this.rendered&&this.pathObject.updateHighlighted(i)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(i){this.pathObject.updateDraggingDelete(i)}getColour(){return this.style.colourPrimary}setColour(i){super.setColour(i),i=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(i.style),this.style=i.style,this.styleName_=i.name,this.applyColour()}setStyle(i){const a=this.workspace.getRenderer().getConstants().getBlockStyle(i);if(this.styleName_=i,a)this.hat=a.hat,this.pathObject.setStyle(a),this.colour_=a.colourPrimary,this.style=a,this.applyColour();else throw Error("Invalid style name: "+i)}bringToFront(i=!1){let a=this;if(!a.isDeadOrDying())do{const p=a.getSvgRoot(),w=p.parentNode,L=w.childNodes;if(L[L.length-1]!==p&&w.appendChild(p),i)break;a=a.getParent()}while(a)}setPreviousStatement(i,a){super.setPreviousStatement(i,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setNextStatement(i,a){super.setNextStatement(i,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setOutput(i,a){super.setOutput(i,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setInputsInline(i){super.setInputsInline(i),this.rendered&&(this.queueRender(),this.bumpNeighbours())}removeInput(i,a){return i=super.removeInput(i,a),this.rendered&&(this.queueRender(),this.bumpNeighbours()),i}moveNumberedInputBefore(i,a){super.moveNumberedInputBefore(i,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}appendInput(i){return super.appendInput(i),this.rendered&&(this.queueRender(),this.bumpNeighbours()),i}setConnectionTracking(i){if(this.previousConnection&&this.previousConnection.setTracking(i),this.outputConnection&&this.outputConnection.setTracking(i),this.nextConnection){this.nextConnection.setTracking(i);var a=this.nextConnection.targetBlock();a&&a.setConnectionTracking(i)}if(!this.collapsed_)for(a=0;a<this.inputList.length;a++){var p=this.inputList[a].connection;p&&(p.setTracking(i),(p=p.targetBlock())&&p.setConnectionTracking(i))}}getConnections_(i){const a=[];if((i||this.rendered)&&(this.outputConnection&&a.push(this.outputConnection),this.previousConnection&&a.push(this.previousConnection),this.nextConnection&&a.push(this.nextConnection),i||!this.collapsed_))for(let p=0,w;w=this.inputList[p];p++)w.connection&&a.push(w.connection);return a}lastConnectionInStack(i){return super.lastConnectionInStack(i)}getMatchingConnection(i,a){return super.getMatchingConnection(i,a)}makeConnection_(i){return new sd(this,i)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){if(!this.bumpNeighboursPid){var i=t.getGroup$$module$build$src$core$events$utils();this.bumpNeighboursPid=setTimeout(()=>{const a=t.getGroup$$module$build$src$core$events$utils();t.setGroup$$module$build$src$core$events$utils(i),this.getRootBlock().bumpNeighboursInternal(),t.setGroup$$module$build$src$core$events$utils(a),this.bumpNeighboursPid=0},t.config$$module$build$src$core$config.bumpDelay)}}bumpNeighboursInternal(){const i=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||i.isInFlyout))for(const a of this.getConnections_(!1)){if(a.isSuperior()){let p;(p=a.targetBlock())==null||p.bumpNeighboursInternal()}for(const p of a.neighbours(t.config$$module$build$src$core$config.snapRadius))p.getSourceBlock().getRootBlock()!==i&&(a.isConnected()&&p.isConnected()||(a.isSuperior()?p.bumpAwayFrom(a):a.bumpAwayFrom(p)))}}scheduleSnapAndBump(){const i=t.getGroup$$module$build$src$core$events$utils();setTimeout(()=>{t.setGroup$$module$build$src$core$events$utils(i),this.snapToGrid(),t.setGroup$$module$build$src$core$events$utils(!1)},t.config$$module$build$src$core$config.bumpDelay/2),this.bumpNeighbours()}positionNearConnection(i,a,p){if(i.type===Un.NEXT_STATEMENT||i.type===Un.INPUT_VALUE){let w=a.x;a=a.y,w+=p.x-i.getOffsetInBlock().x,a+=p.y-i.getOffsetInBlock().y,this.moveBy(w,a)}}getChildren(i){return super.getChildren(i)}queueRender(){return Qo(this)}render(){this.queueRender(),$i()}renderEfficiently(){this.rendered=!0,te(),this.isCollapsed()&&this.updateCollapsed_(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),me(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const i of this.inputList){const a=i.connection;a&&a.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Ca.LOCAL_MARKER).draw();for(const i of this.inputList)for(const a of i.fieldRow)a.updateMarkers_()}setCursorSvg(i){this.pathObject.setCursorSvg(i)}setMarkerSvg(i){this.pathObject.setMarkerSvg(i)}getHeightWidth(){let i=this.height,a=this.width;var p=this.getNextBlock();if(p){p=p.getHeightWidth();const w=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;i+=p.height-w,a=Math.max(a,p.width)}return{height:i,width:a}}fadeForReplacement(i){this.pathObject.updateReplacementFade(i)}highlightShapeForInput(i,a){this.pathObject.updateShapeForInputHighlight(i,a)}};Bp.INLINE=-1,Bp.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var LT=class{constructor(){}onDragEnter(i){}onDragOver(i){}onDragExit(i){}onDrop(i){}getClientRect(){return null}shouldPreventMove(i){return!1}},j_=class extends LT{constructor(){super(),this.wouldDelete_=!1}wouldDelete(i,a){return i instanceof Bp?(i=!i.getParent()&&i.isDeletable(),this.updateWouldDelete_(i&&!a)):this.updateWouldDelete_(i.isDeletable()),this.wouldDelete_}updateWouldDelete_(i){this.wouldDelete_=i}},NT=class extends j_{constructor(i){super(),this.workspace=i,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(i=new Gi({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(i.toolboxPosition=this.workspace.toolboxPosition===mr.TOP?mr.BOTTOM:mr.TOP,this.flyout=new(y(Ut.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(i)):(i.toolboxPosition=this.workspace.toolboxPosition===mr.RIGHT?mr.LEFT:mr.RIGHT,this.flyout=new(y(Ut.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(i)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=re(Ye.G,{class:"blocklyTrash"});let i;const a=String(Math.random()).substring(2);i=re(Ye.CLIPPATH,{id:"blocklyTrashBodyClipPath"+a},this.svgGroup),re(Ye.RECT,{width:P0,height:Y_,y:B0},i);const p=re(Ye.IMAGE,{width:ku.width,x:-$b,height:ku.height,y:-Cb,"clip-path":"url(#blocklyTrashBodyClipPath"+a+")"},this.svgGroup);return p.setAttributeNS(no,"xlink:href",this.workspace.options.pathToMedia+ku.url),i=re(Ye.CLIPPATH,{id:"blocklyTrashLidClipPath"+a},this.svgGroup),re(Ye.RECT,{width:P0,height:B0},i),this.svgLid=re(Ye.IMAGE,{width:ku.width,x:-$b,height:ku.height,y:-Cb,"clip-path":"url(#blocklyTrashLidClipPath"+a+")"},this.svgGroup),this.svgLid.setAttributeNS(no,"xlink:href",this.workspace.options.pathToMedia+ku.url),He(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),He(this.svgGroup,"pointerup",this,this.click),He(p,"pointerover",this,this.mouseOver),He(p,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(Qe(this.flyout.createDom(Ye.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[vl.Capability.AUTOHIDEABLE,vl.Capability.DELETE_AREA,vl.Capability.DRAG_TARGET,vl.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&Ke(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var i=this.contents.map(function(p){return JSON.parse(p)}),a=this.workspace.getParentSvg().style;a.cursor="wait",setTimeout(()=>{let p;(p=this.flyout)==null||p.show(i),a.cursor="";let w;(w=this.workspace.scrollbar)==null||w.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var i;(i=this.flyout)==null||i.hide();var a;(a=this.workspace.scrollbar)==null||a.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(i){!i&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(i,a){if(this.initialized){var p=Ss(this.workspace,i);i=Ar(p,new ro(P0,Y_+B0),xb,F0,i,this.workspace),a=La(i,F0,p.vertical===qa.TOP?Fd.DOWN:Fd.UP,a),this.top=a.top,this.left=a.left;var w;(w=this.svgGroup)==null||w.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new Li(this.top,this.top+Y_+B0,this.left,this.left+P0)}getClientRect(){if(!this.svgGroup)return null;var i=this.svgGroup.getBoundingClientRect();const a=i.top+Cb-z0;return i=i.left+$b-z0,new Li(a,a+B0+Y_+2*z0,i,i+P0+2*z0)}onDragOver(i){this.setLidOpen(this.wouldDelete_)}onDragExit(i){this.setLidOpen(!1)}onDrop(i){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(i){this.isLidOpen!==i&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=i,this.animateLid())}animateLid(){const i=LE;var a=1/(i+1);this.lidOpen+=this.isLidOpen?a:-a,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*Do),a=DT+this.lidOpen*(NE-DT),this.svgGroup&&(this.svgGroup.style.opacity=`${a}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),Vv/i))}setLidAngle(i){const a=this.workspace.toolboxPosition===mr.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let p;(p=this.svgLid)==null||p.setAttribute("transform","rotate("+(a?-i:i)+","+(a?4:P0-4)+","+(B0-2)+")")}setMinOpenness(i){this.minOpenness=i,this.isLidOpen||this.setLidAngle(i*Do)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(i){i=new(ke(Bl))(i,this.workspace.id),ce(i)}blockMouseDownWhenOpenable(i){!this.contentsIsOpen()&&this.hasContents()&&i.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(i){if(!(0>=this.workspace.options.maxTrashcanContents||i.type!==t.DELETE$$module$build$src$core$events$utils||i.type!==t.DELETE$$module$build$src$core$events$utils||i.wasShadow)){if(!i.oldJson)throw Error("Encountered a delete event without proper oldJson");if(i=JSON.stringify(this.cleanBlockJson(i.oldJson)),this.contents.indexOf(i)===-1){for(this.contents.unshift(i);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(OE)}}}cleanBlockJson(i){function a(p){if(p){if(delete p.id,delete p.x,delete p.y,delete p.enabled,p.icons&&p.icons.comment){var w=p.icons.comment;delete w.height,delete w.width,delete w.pinned}w=p.inputs;for(var L in w){var j=w[L];const _e=j.block;j=j.shadow,_e&&a(_e),j&&a(j)}p.next&&(L=p.next,p=L.block,L=L.shadow,p&&a(p),L&&a(L))}}return i=JSON.parse(JSON.stringify(i)),a(i),Object.assign({},{kind:"BLOCK"},i)}},P0=47,Y_=44,B0=16,F0=20,xb=20,z0=10,$b=0,Cb=32,OE=.1,Vv=80,LE=4,DT=.4,NE=.8,Do=45,qi=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(i,a){if(this.shortcuts.get(i.name)&&!a)throw Error(`Shortcut named "${i.name}" already exists.`);if(this.shortcuts.set(i.name,i),(a=i.keyCodes)&&0<a.length)for(let p=0;p<a.length;p++)this.addKeyMapping(a[p],i.name,!!i.allowCollision)}unregister(i){return this.shortcuts.get(i)?(this.removeAllKeyMappings(i),this.shortcuts.delete(i),!0):(console.warn(`Keyboard shortcut named "${i}" not found.`),!1)}addKeyMapping(i,a,p){i=`${i}`;const w=this.keyMap.get(i);if(w&&!p)throw Error(`Shortcut named "${a}" collides with shortcuts "${w}"`);w&&p?w.unshift(a):this.keyMap.set(i,[a])}removeKeyMapping(i,a,p){const w=this.keyMap.get(i);if(!w)return p||console.warn(`No keyboard shortcut named "${a}" registered with key code "${i}"`),!1;const L=w.indexOf(a);return-1<L?(w.splice(L,1),w.length===0&&this.keyMap.delete(i),!0):(p||console.warn(`No keyboard shortcut named "${a}" registered with key code "${i}"`),!1)}removeAllKeyMappings(i){for(const a of this.keyMap.keys())this.removeKeyMapping(a,i,!0)}setKeyMap(i){this.keyMap.clear();for(const a in i)this.keyMap.set(a,i[a])}getKeyMap(){const i=Object.create(null);for(const[a,p]of this.keyMap)i[a]=p;return i}getRegistry(){const i=Object.create(null);for(const[a,p]of this.shortcuts)i[a]=p;return Rl(Object.create(null),i)}onKeyDown(i,a){var p=this.serializeKeyEvent_(a);if(p=this.getShortcutNamesByKeyCode(p),!p)return!1;for(let w=0,L;L=p[w];w++){const j=this.shortcuts.get(L);let _e,We;if((_e=j)==null||!_e.preconditionFn||(We=j)!=null&&We.preconditionFn(i)){let Jt,jn;if((Jt=j)!=null&&Jt.callback&&((jn=j)!=null&&jn.callback(i,a,j)))return!0}}return!1}getShortcutNamesByKeyCode(i){return this.keyMap.get(i)||[]}getKeyCodesByShortcutName(i){const a=[];for(const[p,w]of this.keyMap)-1<w.indexOf(i)&&a.push(p);return a}serializeKeyEvent_(i){let a="";for(const p in qi.modifierKeys)i.getModifierState(p)&&(a!==""&&(a+="+"),a+=p);return a!==""&&i.keyCode?a=a+"+"+i.keyCode:i.keyCode&&(a=String(i.keyCode)),a}checkModifiers_(i){for(let a=0,p;p=i[a];a++)if(!(p in qi.modifierKeys))throw Error(p+" is not a valid modifier key.")}createSerializedKey(i,a){let p="";if(a){this.checkModifiers_(a);for(const w in qi.modifierKeys)-1<a.indexOf(qi.modifierKeys[w])&&(p!==""&&(p+="+"),p+=w)}return p!==""&&i?p=p+"+"+i:i&&(p=`${i}`),p}};qi.registry=new qi,function(i){i=i.modifierKeys||(i.modifierKeys={}),i[i.Shift=16]="Shift",i[i.Control=17]="Control",i[i.Alt=18]="Alt",i[i.Meta=91]="Meta"}(qi||(qi={}));var Fp;(function(i){i.ESCAPE="escape",i.DELETE="delete",i.COPY="copy",i.CUT="cut",i.PASTE="paste",i.UNDO="undo",i.REDO="redo"})(Fp||(Fp={}));var jv=null,X_=null;$s();var zp={};zp.names=Fp,zp.registerCopy=qr,zp.registerCut=au,zp.registerDefaultShortcuts=$s,zp.registerDelete=yc,zp.registerEscape=vd,zp.registerPaste=qu,zp.registerRedo=ja,zp.registerUndo=ls;var Yv=class{constructor(i,a){this.procedureModelClass=i,this.parameterModelClass=a,this.priority=kp}save(i){return i=i.getProcedureMap().getProcedures().map(a=>Cs(a)),i.length?i:null}load(i,a){const p=a.getProcedureMap();for(const w of i)p.add(vi(this.procedureModelClass,this.parameterModelClass,w,a))}clear(i){i.getProcedureMap().clear()}},U0={};U0.ProcedureSerializer=Yv,U0.loadParameter=Ya,U0.loadProcedure=vi,U0.saveParameter=Jc,U0.saveProcedure=Cs;var H0=class{constructor(){this.priority=S0}save(i){const a=[];for(const p of i.getAllVariables())i={name:p.name,id:p.getId()},p.type&&(i.type=p.type),a.push(i);return a.length?a:null}load(i,a){for(const p of i)a.createVariable(p.name,p.type,p.id)}clear(i){i.getVariableMap().clear()}};Rs("variables",new H0);var PT={};PT.VariableSerializer=H0;var Mb={};Mb.load=ff,Mb.save=bc;var DE={blocks:cm,exceptions:Rp,priorities:um,procedures:U0,registry:E0,variables:PT,workspaces:Mb},Ab=class{constructor(i,a,p,w,L){this.workspace=i,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,a=a===void 0?!0:a,p=p===void 0?!0:p;const j=a&&p;a&&(this.hScroll=new xa(i,!0,j,w,L)),p&&(this.vScroll=new xa(i,!1,j,w,L)),j&&(this.corner_=re(Ye.RECT,{height:xa.scrollbarThickness,width:xa.scrollbarThickness,class:"blocklyScrollbarBackground"}),Qe(this.corner_,i.getBubbleCanvas()))}dispose(){Ke(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const i=this.workspace.getMetrics();if(i){var a=!1,p=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===i.viewWidth&&this.oldHostMetrics_.viewHeight===i.viewHeight&&this.oldHostMetrics_.absoluteTop===i.absoluteTop&&this.oldHostMetrics_.absoluteLeft===i.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===i.scrollWidth&&this.oldHostMetrics_.viewLeft===i.viewLeft&&this.oldHostMetrics_.scrollLeft===i.scrollLeft||(a=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===i.scrollHeight&&this.oldHostMetrics_.viewTop===i.viewTop&&this.oldHostMetrics_.scrollTop===i.scrollTop||(p=!0)):p=a=!0,a||p){try{t.disable$$module$build$src$core$events$utils(),this.hScroll&&a&&this.hScroll.resize(i),this.vScroll&&p&&this.vScroll.resize(i)}finally{t.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==i.viewWidth||this.oldHostMetrics_.absoluteLeft!==i.absoluteLeft){let w;(w=this.corner_)==null||w.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==i.viewHeight||this.oldHostMetrics_.absoluteTop!==i.absoluteTop){let w;(w=this.corner_)==null||w.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=i}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(i,a){this.hScroll&&this.hScroll.setOrigin(i,a),this.vScroll&&this.vScroll.setOrigin(i,a)}set(i,a,p){this.hScroll&&this.hScroll.set(i,!1),this.vScroll&&this.vScroll.set(a,!1),(p||p===void 0)&&(i={},this.hScroll&&(i.x=this.hScroll.getRatio_()),this.vScroll&&(i.y=this.vScroll.getRatio_()),this.workspace.setMetrics(i))}setX(i){this.hScroll&&this.hScroll.set(i,!0)}setY(i){this.vScroll&&this.vScroll.set(i,!0)}setContainerVisible(i){this.hScroll&&this.hScroll.setContainerVisible(i),this.vScroll&&this.vScroll.setContainerVisible(i)}isVisible(){let i=!1;return this.hScroll&&(i=this.hScroll.isVisible()),this.vScroll&&(i=i||this.vScroll.isVisible()),i}setVisible(i){this.hScroll&&this.hScroll.setVisibleInternal(i),this.vScroll&&this.vScroll.setVisibleInternal(i)}resizeContent(i){this.hScroll&&this.hScroll.resizeContentHorizontal(i),this.vScroll&&this.vScroll.resizeContentVertical(i)}resizeView(i){this.hScroll&&this.hScroll.resizeViewHorizontal(i),this.vScroll&&this.vScroll.resizeViewVertical(i)}},Xv=class{constructor(i){this.workspace_=i}getDimensionsPx_(i){let a=0,p=0;return i&&(a=i.getWidth(),p=i.getHeight()),new ro(a,p)}getFlyoutMetrics(i){return i=this.getDimensionsPx_(this.workspace_.getFlyout(i)),{width:i.width,height:i.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const i=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:i.width,height:i.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let i=0,a=0;const p=this.getToolboxMetrics(),w=this.getFlyoutMetrics(),L=!!this.workspace_.getToolbox();var j;const _e=!((j=this.workspace_.getFlyout())!=null&&j.autoClose);j=L?p.position:w.position;const We=j===mr.TOP;return j===mr.LEFT&&(L&&(i+=p.width),_e&&(i+=w.width)),We&&(L&&(a+=p.height),_e&&(a+=w.height)),{top:a,left:i}}getViewMetrics(i){i=i?this.workspace_.scale:1;const a=this.getSvgMetrics(),p=this.getToolboxMetrics(),w=this.getFlyoutMetrics(),L=!!this.workspace_.getToolbox();var j;const _e=!((j=this.workspace_.getFlyout())!=null&&j.autoClose);j=L?p.position:w.position;const We=j===mr.LEFT||j===mr.RIGHT;return(j===mr.TOP||j===mr.BOTTOM)&&(L&&(a.height-=p.height),_e&&(a.height-=w.height)),We&&(L&&(a.width-=p.width),_e&&(a.width-=w.width)),{height:a.height/i,width:a.width/i,top:-this.workspace_.scrollY/i,left:-this.workspace_.scrollX/i}}getContentMetrics(i){i=i?1:this.workspace_.scale;const a=this.workspace_.getBlocksBoundingBox();return{height:(a.bottom-a.top)*i,width:(a.right-a.left)*i,top:a.top*i,left:a.left*i}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(i){if(!this.hasFixedEdges())return{};const a=this.workspace_.isMovableHorizontally(),p=this.workspace_.isMovableVertically();i=i||this.getViewMetrics(!1);const w={};return p||(w.top=i.top,w.bottom=i.top+i.height),a||(w.left=i.left,w.right=i.left+i.width),w}getPaddedContent_(i,a){const p=a.top+a.height,w=a.left+a.width,L=i.width;i=i.height;const j=L/2,_e=i/2;return{top:Math.min(a.top-_e,p-i),bottom:Math.max(p+_e,a.top+i),left:Math.min(a.left-j,w-L),right:Math.max(w+j,a.left+L)}}getScrollMetrics(i,a,p){i=i?this.workspace_.scale:1,a=a||this.getViewMetrics(!1);var w=p||this.getContentMetrics();p=this.getComputedFixedEdges_(a),a=this.getPaddedContent_(a,w),w=p.top!==void 0?p.top:a.top;const L=p.left!==void 0?p.left:a.left;return{top:w/i,left:L/i,width:((p.right!==void 0?p.right:a.right)-L)/i,height:((p.bottom!==void 0?p.bottom:a.bottom)-w)/i}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const i=this.getToolboxMetrics(),a=this.getFlyoutMetrics(!0),p=this.getSvgMetrics(),w=this.getAbsoluteMetrics(),L=this.getViewMetrics(),j=this.getContentMetrics(),_e=this.getScrollMetrics(!1,L,j);return{contentHeight:j.height,contentWidth:j.width,contentTop:j.top,contentLeft:j.left,scrollHeight:_e.height,scrollWidth:_e.width,scrollTop:_e.top,scrollLeft:_e.left,viewHeight:L.height,viewWidth:L.width,viewTop:L.top,viewLeft:L.left,absoluteTop:w.top,absoluteLeft:w.left,svgHeight:p.height,svgWidth:p.width,toolboxWidth:i.width,toolboxHeight:i.height,toolboxPosition:i.position,flyoutWidth:a.width,flyoutHeight:a.height}}};r(Ut.METRICS_MANAGER,Dl,Xv);var BT=class extends d{constructor(i){super(),this.isBlank=!0,this.recordUndo=!1,this.type=Sa,this.isBlank=!!i,i&&(this.workspaceId=i.id)}};r(Ut.EVENT,Sa,BT);var Ib=class extends v{constructor(i,a,p){super(i?i.workspace.id:void 0),this.type=jo,i&&(this.blockId=i.id,this.isStart=a,this.blocks=p)}toJson(){const i=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return i.isStart=this.isStart,i.blockId=this.blockId,i.blocks=this.blocks,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Ib),a.isStart=i.isStart,a.blockId=i.blockId,a.blocks=i.blocks,a}};r(Ut.EVENT,jo,Ib);var K_={};K_.bumpIntoBounds=xh,K_.bumpIntoBoundsHandler=ia,K_.bumpTopObjectsIntoBounds=Pn;var G0=class{constructor(i,a){this.connectionCandidate=this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.dragIconData_=[],this.draggingBlock_=i,this.workspace_=a,this.connectionPreviewer=new(y(Ut.CONNECTION_PREVIEWER,this.workspace_.options))(i),this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=nr(i,this.startXY_)}dispose(){this.dragIconData_.length=0,this.connectionPreviewer.dispose()}startDrag(i,a){t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent_(),this.draggingBlock_.bringToFront(!0),te(),this.workspace_.setResizesEnabled(!1),Ha(),this.shouldDisconnect_(a)&&this.disconnectBlock_(a,i),this.draggingBlock_.setDragging(!0);let p;(p=this.workspace_.getLayerManager())==null||p.moveToDragLayer(this.draggingBlock_)}shouldDisconnect_(i){return!!(this.draggingBlock_.getParent()||i&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(i,a){this.draggingBlock_.unplug(i),i=this.pixelsToWorkspaceUnits_(a),i=vn.sum(this.startXY_,i),this.draggingBlock_.translate(i.x,i.y),Qs(this.draggingBlock_)}fireDragStartEvent_(){const i=new(ke(jo))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));ce(i)}drag(i,a){const p=this.draggingBlock_;this.moveBlock(p,a),this.updateDragTargets(i,p),this.wouldDeleteBlock_=this.wouldDeleteBlock(i,p,a),this.updateCursorDuringBlockDrag_(),this.updateConnectionPreview(p,a)}moveBlock(i,a){a=this.pixelsToWorkspaceUnits_(a),a=vn.sum(this.startXY_,a),i.moveDuringDrag(a)}updateDragTargets(i,a){if(i=this.workspace_.getDragTarget(i),this.dragTarget_!==i){let p;(p=this.dragTarget_)==null||p.onDragExit(a),i==null||i.onDragEnter(a)}i==null||i.onDragOver(a),this.dragTarget_=i}wouldDeleteBlock(i,a,p){return(i=this.workspace_.getDragTarget(i))&&this.workspace_.getComponentManager().hasCapability(i.id,vl.Capability.DELETE_AREA)?i.wouldDelete(a,!!this.getConnectionCandidate(a,p)):!1}updateConnectionPreview(i,a){a=this.pixelsToWorkspaceUnits_(a);const p=this.connectionCandidate,w=this.getConnectionCandidate(i,a);if(w){this.connectionCandidate=a=p&&this.currCandidateIsBetter(p,a,w)?p:w;var{local:L,neighbour:j}=a;L.type!==Un.OUTPUT_VALUE&&L.type!==Un.PREVIOUS_STATEMENT||!j.isConnected()||j.targetBlock().isInsertionMarker()||this.orphanCanConnectAtEnd(i,j.targetBlock(),L.type)?this.connectionPreviewer.previewConnection(L,j):this.connectionPreviewer.previewReplacement(L,j,j.targetBlock())}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(i,a,p){return!!fs.getConnectionForOrphanedConnection(i,p===Un.OUTPUT_VALUE?a.outputConnection:a.previousConnection)}currCandidateIsBetter(i,a,p){const{local:w,neighbour:L}=i;i=new vn(w.x,w.y);const j=new vn(L.x,L.y);return a=vn.distance(vn.sum(i,a),j),p.distance>a-t.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(i,a){i=this.getLocalConnections(i);let p=this.connectionCandidate?t.config$$module$build$src$core$config.connectingSnapRadius:t.config$$module$build$src$core$config.snapRadius,w=null;for(const L of i){const{connection:j,radius:_e}=L.closest(p,a);j&&(w={local:L,neighbour:j,distance:_e},p=_e)}return w}getLocalConnections(i){const a=i.getConnections_(!1),p=i.lastConnectionInStack(!0);return p&&p!==i.nextConnection&&a.push(p),a}endDrag(i,a){if(this.drag(i,a),this.fireDragEndEvent_(),me(),Ha(),this.connectionPreviewer.hidePreview(),i=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)||(i=this.getNewLocationAfterDrag_(a).delta),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),!this.maybeDeleteBlock_()){let p;(p=this.workspace_.getLayerManager())==null||p.moveOffDragLayer(this.draggingBlock_,ee),this.draggingBlock_.setDragging(!1),i?this.updateBlockAfterMove_():xh(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)}this.connectionPreviewer.dispose(),this.workspace_.setResizesEnabled(!0),t.setGroup$$module$build$src$core$events$utils(!1)}getNewLocationAfterDrag_(i){i=this.pixelsToWorkspaceUnits_(i);const a=vn.sum(this.startXY_,i);return{delta:i,newLocation:a}}maybeDeleteBlock_(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),Ki.length=0,!0):!1}updateBlockAfterMove_(){this.fireMoveEvent_(),this.connectionCandidate?this.applyConnections(this.connectionCandidate):this.draggingBlock_.queueRender(),this.draggingBlock_.scheduleSnapAndBump()}applyConnections(i){const{local:a,neighbour:p}=i;if(a.connect(p),this.draggingBlock_.rendered){const w=a.isSuperior()?p:a,L=this.draggingBlock_.getRootBlock();Tr().then(()=>{pa(w.getSourceBlock()),setTimeout(()=>{L.bringToFront()},0)})}}fireDragEndEvent_(){const i=new(ke(jo))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));ce(i)}updateToolboxStyle_(i){const a=this.workspace_.getToolbox();if(a){const p=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";i&&typeof a.removeStyle=="function"?a.removeStyle(p):i||typeof a.addStyle!="function"||a.addStyle(p)}}fireMoveEvent_(){if(!this.draggingBlock_.isDeadOrDying()){var i=new(ke(t.MOVE$$module$build$src$core$events$utils))(this.draggingBlock_);i.setReason(["drag"]),i.oldCoordinate=this.startXY_,i.recordNew(),ce(i)}}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(i){return i=new vn(i.x/this.workspace_.scale,i.y/this.workspace_.scale),this.workspace_.isMutator&&i.scale(1/this.workspace_.options.parentWorkspace.scale),i}dragIcons_(){Ee("Blockly.BlockDragger.prototype.dragIcons_","v10","v11")}getInsertionMarkers(){return this.workspace_.getAllBlocks().filter(i=>i.isInsertionMarker())}};r(Ut.BLOCK_DRAGGER,Dl,G0);var Em={};Em.Bubble=As,Em.MiniWorkspaceBubble=_m,Em.TextBubble=ym,Em.TextInputBubble=la;var Rb=class extends _f{constructor(i,a,p,w){super(i),this.type=Mh,this.recordUndo=!1,i&&(this.name=a,this.oldValue=p,this.newValue=w)}toJson(){const i=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return i.name=this.name,i.oldValue=this.oldValue,i.newValue=this.newValue,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Rb),a.name=i.name,a.oldValue=i.oldValue,a.newValue=i.newValue,a}isNull(){return this.oldValue===this.newValue}run(i){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(a=a.getBlockById(this.blockId),!a)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");i=i?this.newValue:this.oldValue,(a=a.getField(this.name))?a.setValue(i):console.warn("Can't set non-existent field: "+this.name)}};r(Ut.EVENT,Mh,Rb);var kb=class extends _f{constructor(i){super(i),this.type=t.MOVE$$module$build$src$core$events$utils,i&&(i.isShadow()&&(this.recordUndo=!1),i=this.currentLocation_(),this.oldParentId=i.parentId,this.oldInputName=i.inputName,this.oldCoordinate=i.coordinate)}toJson(){const i=super.toJson();return i.oldParentId=this.oldParentId,i.oldInputName=this.oldInputName,this.oldCoordinate&&(i.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),i.newParentId=this.newParentId,i.newInputName=this.newInputName,this.newCoordinate&&(i.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(i.reason=this.reason),this.recordUndo||(i.recordUndo=this.recordUndo),i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new kb),a.oldParentId=i.oldParentId,a.oldInputName=i.oldInputName,i.oldCoordinate&&(p=i.oldCoordinate.split(","),a.oldCoordinate=new vn(Number(p[0]),Number(p[1]))),a.newParentId=i.newParentId,a.newInputName=i.newInputName,i.newCoordinate&&(p=i.newCoordinate.split(","),a.newCoordinate=new vn(Number(p[0]),Number(p[1]))),i.reason!==void 0&&(a.reason=i.reason),i.recordUndo!==void 0&&(a.recordUndo=i.recordUndo),a}recordNew(){const i=this.currentLocation_();this.newParentId=i.parentId,this.newInputName=i.inputName,this.newCoordinate=i.coordinate}setReason(i){this.reason=i}currentLocation_(){var i=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var a=i.getBlockById(this.blockId);if(!a)throw Error("The block associated with the block move event could not be found");i={};const p=a.getParent();return p?(i.parentId=p.id,(a=p.getInputWithBlock(a))&&(i.inputName=a.name)):i.coordinate=a.getRelativeToSurfaceXY(),i}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&vn.equals(this.oldCoordinate,this.newCoordinate)}run(i){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var p=a.getBlockById(this.blockId);if(p){var w=i?this.newParentId:this.oldParentId,L=i?this.newInputName:this.oldInputName;if(i=i?this.newCoordinate:this.oldCoordinate,w){var j=a.getBlockById(w);if(!j){console.warn("Can't connect to non-existent block: "+w);return}}if(p.getParent()&&p.unplug(),i)L=p.getRelativeToSurfaceXY(),p.moveBy(i.x-L.x,i.y-L.y,this.reason);else{a=p.outputConnection,(!a||p.previousConnection&&p.previousConnection.isConnected())&&(a=p.previousConnection);let _e,We;p=(We=a)==null?void 0:We.type,L?(p=j.getInput(L))&&(_e=p.connection):p===Un.PREVIOUS_STATEMENT&&(_e=j.nextConnection),_e&&a?a.connect(_e):console.warn("Can't connect to non-existent input: "+L)}}else console.warn("Can't move non-existent block: "+this.blockId)}};r(Ut.EVENT,t.MOVE$$module$build$src$core$events$utils,kb);var Ob=class extends v{constructor(i,a,p){super(i?i.workspace.id:void 0),this.type=So,i&&(this.blockId=i.id,this.isOpen=a,this.bubbleType=p)}toJson(){const i=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return i.isOpen=this.isOpen,i.bubbleType=this.bubbleType,i.blockId=this.blockId||"",i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Ob),a.isOpen=i.isOpen,a.bubbleType=i.bubbleType,a.blockId=i.blockId,a}},Lb;(function(i){i.MUTATOR="mutator",i.COMMENT="comment",i.WARNING="warning"})(Lb||(Lb={})),r(Ut.EVENT,So,Ob);var og=class extends d{constructor(i){super(),this.isBlank=!i,i&&(this.commentId=i.id,this.workspaceId=i.workspace.id,this.group=t.getGroup$$module$build$src$core$events$utils(),this.recordUndo=le())}toJson(){const i=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return i.commentId=this.commentId,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new og),a.commentId=i.commentId,a}static CommentCreateDeleteHelper(i,a){var p=i.getEventWorkspace_();if(a){if(a=t.createElement$$module$build$src$core$utils$xml("xml"),!i.xml)throw Error("Ecountered a comment event without proper xml");a.appendChild(i.xml),t.domToWorkspace$$module$build$src$core$xml(a,p)}else{if(!i.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(p=p.getCommentById(i.commentId))?p.dispose():console.warn("Can't uncreate non-existent comment: "+i.commentId)}}},Nb=class extends og{constructor(i,a,p){super(i),this.type=yd,i&&(this.oldContents_=typeof a>"u"?"":a,this.newContents_=typeof p>"u"?"":p)}toJson(){const i=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return i.oldContents=this.oldContents_,i.newContents=this.newContents_,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Nb),a.oldContents_=i.oldContents,a.newContents_=i.newContents,a}isNull(){return this.oldContents_===this.newContents_}run(i){var a=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(a=a.getCommentById(this.commentId)){var p=i?this.newContents_:this.oldContents_;if(!p)throw Error(i?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");a.setContent(p)}else console.warn("Can't change non-existent comment: "+this.commentId)}};r(Ut.EVENT,yd,Nb);var Db=class extends og{constructor(i){super(i),this.type=cs,i&&(this.xml=i.toXmlWithXY())}toJson(){const i=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return i.xml=Qi(this.xml),i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Db),a.xml=t.textToDom$$module$build$src$core$utils$xml(i.xml),a}run(i){og.CommentCreateDeleteHelper(this,i)}};r(Ut.EVENT,cs,Db);var Pb=class extends og{constructor(i){super(i),this.type=qh,i&&(this.xml=i.toXmlWithXY())}run(i){og.CommentCreateDeleteHelper(this,!i)}toJson(){const i=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return i.xml=Qi(this.xml),i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Pb),a.xml=t.textToDom$$module$build$src$core$utils$xml(i.xml),a}};r(Ut.EVENT,qh,Pb);var Bb=class extends og{constructor(i){super(i),this.type=Ta,i&&(this.comment_=i,this.oldCoordinate_=i.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setOldCoordinate(i){this.oldCoordinate_=i}toJson(){const i=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return i.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,i.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Bb),p=i.oldCoordinate.split(","),a.oldCoordinate_=new vn(Number(p[0]),Number(p[1])),p=i.newCoordinate.split(","),a.newCoordinate_=new vn(Number(p[0]),Number(p[1])),a}isNull(){return vn.equals(this.oldCoordinate_,this.newCoordinate_)}run(i){var a=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(a=a.getCommentById(this.commentId)){if(i=i?this.newCoordinate_:this.oldCoordinate_,!i)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var p=a.getRelativeToSurfaceXY();a.moveBy(i.x-p.x,i.y-p.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};r(Ut.EVENT,Ta,Bb);var Fb=class extends v{constructor(i,a,p){super(p),this.type=Ka,this.oldItem=i??void 0,this.newItem=a??void 0}toJson(){const i=super.toJson();return i.oldItem=this.oldItem,i.newItem=this.newItem,i}static fromJson(i,a,p){return a=super.fromJson(i,a,p??new Fb),a.oldItem=i.oldItem,a.newItem=i.newItem,a}};r(Ut.EVENT,Ka,Fb),t.CHANGE$$module$build$src$core$events$utils,t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,t.CHANGE$$module$build$src$core$events$utils,t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,t.disable$$module$build$src$core$events$utils,t.enable$$module$build$src$core$events$utils,t.getGroup$$module$build$src$core$events$utils,t.setGroup$$module$build$src$core$events$utils;var Qn={};Qn.Abstract=d,Qn.BLOCK_CHANGE=t.CHANGE$$module$build$src$core$events$utils,Qn.BLOCK_CREATE=t.CREATE$$module$build$src$core$events$utils,Qn.BLOCK_DELETE=t.DELETE$$module$build$src$core$events$utils,Qn.BLOCK_DRAG=jo,Qn.BLOCK_FIELD_INTERMEDIATE_CHANGE=Mh,Qn.BLOCK_MOVE=t.MOVE$$module$build$src$core$events$utils,Qn.BUBBLE_OPEN=So,Qn.BUMP_EVENTS=Qh,Qn.BlockBase=_f,Qn.BlockChange=Qr,Qn.BlockCreate=Rv,Qn.BlockDelete=Sb,Qn.BlockDrag=Ib,Qn.BlockFieldIntermediateChange=Rb,Qn.BlockMove=kb,Qn.BubbleOpen=Ob,Qn.BubbleType=Lb,Qn.CHANGE=t.CHANGE$$module$build$src$core$events$utils,Qn.CLICK=ic,Qn.COMMENT_CHANGE=yd,Qn.COMMENT_CREATE=cs,Qn.COMMENT_DELETE=qh,Qn.COMMENT_MOVE=Ta,Qn.CREATE=t.CREATE$$module$build$src$core$events$utils,Qn.Click=$,Qn.ClickTarget=I,Qn.CommentBase=og,Qn.CommentChange=Nb,Qn.CommentCreate=Db,Qn.CommentDelete=Pb,Qn.CommentMove=Bb,Qn.DELETE=t.DELETE$$module$build$src$core$events$utils,Qn.FINISHED_LOADING=Sa,Qn.FinishedLoading=BT,Qn.MARKER_MOVE=Pl,Qn.MOVE=t.MOVE$$module$build$src$core$events$utils,Qn.MarkerMove=zv,Qn.SELECTED=To,Qn.Selected=Hd,Qn.THEME_CHANGE=cu,Qn.TOOLBOX_ITEM_SELECT=Ka,Qn.TRASHCAN_OPEN=Bl,Qn.ThemeChange=x0,Qn.ToolboxItemSelect=Fb,Qn.TrashcanOpen=Tb,Qn.UI=wc,Qn.UiBase=v,Qn.VAR_CREATE=bo,Qn.VAR_DELETE=Ru,Qn.VAR_RENAME=th,Qn.VIEWPORT_CHANGE=ii,Qn.VarBase=zd,Qn.VarCreate=Ud,Qn.VarDelete=_b,Qn.VarRename=yb,Qn.ViewportChange=$0,Qn.clearPendingUndo=ie,Qn.disable=t.disable$$module$build$src$core$events$utils,Qn.disableOrphans=qe,Qn.enable=t.enable$$module$build$src$core$events$utils,Qn.filter=K,Qn.fire=ce,Qn.fromJson=Ue,Qn.get=ke,Qn.getDescendantIds=Se,Qn.getGroup=t.getGroup$$module$build$src$core$events$utils,Qn.getRecordUndo=le,Qn.isEnabled=se,Qn.setGroup=t.setGroup$$module$build$src$core$events$utils,Qn.setRecordUndo=ae;var FT=class extends Bv{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(i){super.setFontConstants_(i),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(i){super.setDynamicProperties_(i),this.SELECTED_GLOW_COLOUR=i.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const a=Number(i.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=a&&!isNaN(a)?a:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=i.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(i=Number(i.getComponentStyle("replacementGlowSize")))&&!isNaN(i)?i:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&Ke(this.selectedGlowFilter),this.replacementGlowFilter&&Ke(this.replacementGlowFilter)}makeStartHat(){const i=this.START_HAT_HEIGHT,a=this.START_HAT_WIDTH,p=Vs("c",[Kn(25,-i),Kn(71,-i),Kn(a,0)]);return{height:i,width:a,path:p}}makeHexagonal(){function i(p,w,L){var j=p/2;return j=j>a?a:j,L=L?-1:1,p=(w?-1:1)*p/2,su(-L*j,p)+su(L*j,p)}const a=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(p){return p/=2,p>a?a:p},height(p){return p},connectionOffsetY(p){return p/2},connectionOffsetX(p){return-p},pathDown(p){return i(p,!1,!1)},pathUp(p){return i(p,!0,!1)},pathRightDown(p){return i(p,!1,!0)},pathRightUp(p){return i(p,!1,!0)}}}makeRounded(){function i(w,L,j){const _e=w>p?w-p:0;w=(w>p?p:w)/2;const We=j===L?"0":"1";return mi("a","0 0,"+We,w,Kn((j?1:-1)*w,(L?-1:1)*w))+$n("v",(L?-1:1)*_e)+mi("a","0 0,"+We,w,Kn((j?-1:1)*w,(L?-1:1)*w))}const a=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,p=2*a;return{type:this.SHAPES.ROUND,isDynamic:!0,width(w){return w/=2,w>a?a:w},height(w){return w},connectionOffsetY(w){return w/2},connectionOffsetX(w){return-w},pathDown(w){return i(w,!1,!1)},pathUp(w){return i(w,!0,!1)},pathRightDown(w){return i(w,!1,!0)},pathRightUp(w){return i(w,!1,!0)}}}makeSquared(){function i(p,w,L){p-=2*a;const j=L===w?"0":"1";return mi("a","0 0,"+j,a,Kn((L?1:-1)*a,(w?-1:1)*a))+$n("v",(w?-1:1)*p)+mi("a","0 0,"+j,a,Kn((L?-1:1)*a,(w?-1:1)*a))}const a=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(p){return a},height(p){return p},connectionOffsetY(p){return p/2},connectionOffsetX(p){return-p},pathDown(p){return i(p,!1,!1)},pathUp(p){return i(p,!0,!1)},pathRightDown(p){return i(p,!1,!0)},pathRightUp(p){return i(p,!1,!0)}}}shapeFor(i){let a=i.getCheck();switch(!a&&i.targetConnection&&(a=i.targetConnection.getCheck()),i.type){case Un.INPUT_VALUE:case Un.OUTPUT_VALUE:if(i=i.getSourceBlock().getOutputShape(),i!==null)switch(i){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return a&&a.indexOf("Boolean")!==-1?this.HEXAGONAL:a&&a.indexOf("Number")!==-1?this.ROUNDED:(a&&a.indexOf("String"),this.ROUNDED);case Un.PREVIOUS_STATEMENT:case Un.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function i(jn){return Vs("c",[Kn(jn*L/2,0),Kn(jn*L*3/4,_e/2),Kn(jn*L,_e)])+Ho([Kn(jn*L,j)])+Vs("c",[Kn(jn*L/4,_e/2),Kn(jn*L/2,_e),Kn(jn*L,_e)])+$n("h",jn*w)+Vs("c",[Kn(jn*L/2,0),Kn(jn*L*3/4,-(_e/2)),Kn(jn*L,-_e)])+Ho([Kn(jn*L,-j)])+Vs("c",[Kn(jn*L/4,-(_e/2)),Kn(jn*L/2,-_e),Kn(jn*L,-_e)])}const a=this.NOTCH_WIDTH,p=this.NOTCH_HEIGHT,w=a/3,L=w/3,j=p/2,_e=j/2,We=i(1),Jt=i(-1);return{type:this.SHAPES.NOTCH,width:a,height:p,pathLeft:We,pathRight:Jt}}makeInsideCorners(){const i=this.CORNER_RADIUS,a=mi("a","0 0,0",i,Kn(-i,i)),p=mi("a","0 0,1",i,Kn(-i,i)),w=mi("a","0 0,0",i,Kn(i,i)),L=mi("a","0 0,1",i,Kn(i,i));return{width:i,height:i,pathTop:a,pathBottom:w,rightWidth:i,rightHeight:i,pathTopRight:p,pathBottomRight:L}}generateSecondaryColour_(i){return jc("#000",i,.15)||i}generateTertiaryColour_(i){return jc("#000",i,.25)||i}createDom(i,a,p){super.createDom(i,a,p),i=re(Ye.DEFS,{},i),a=re(Ye.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},i),re(Ye.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},a),p=re(Ye.FECOMPONENTTRANSFER,{result:"outBlur"},a),re(Ye.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},p),re(Ye.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},a),re(Ye.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},a),this.selectedGlowFilterId=a.id,this.selectedGlowFilter=a,i=re(Ye.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},i),re(Ye.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},i),a=re(Ye.FECOMPONENTTRANSFER,{result:"outBlur"},i),re(Ye.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),re(Ye.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},i),re(Ye.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},i),re(Ye.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},i),this.replacementGlowFilterId=i.id,this.replacementGlowFilter=i}getCSS_(i){return[`${i} .blocklyText,`,`${i} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${i} .blocklyText {`,"fill: #fff;","}",`${i} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${i} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${i} .blocklyNonEditableText>text,`,`${i} .blocklyEditableText>text,`,`${i} .blocklyNonEditableText>g>text,`,`${i} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${i} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${i} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${i} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${i} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${i} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${i} .blocklyDropdownText {`,"fill: #fff !important;","}",`${i}.blocklyWidgetDiv .goog-menuitem,`,`${i}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${i}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${i} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${i} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${i} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},zT=class extends Fv{constructor(i,a){super(i,a)}draw(){const i=this.block_.pathObject;i.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),i.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&i.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(i.outputShapeType=this.info_.outputConnection.shape.type),i.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(i){if(!(0>=i.height)){if(ht.isSpacer(i)){const w=i.precedesStatement;var a=i.followsStatement;if(w||a){const L=this.constants_.INSIDE_CORNERS;var p=L.rightHeight;p=i.height-(w?p:0),a=a?L.pathBottomRight:"",i=0<p?$n("V",i.yPos+p):"",this.outlinePath_+=a+i+(w?L.pathTopRight:"");return}}this.outlinePath_+=$n("V",i.yPos+i.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const i=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=Hi(i.xPos,this.info_.startY),this.outlinePath_+=$n("h",i.width)}drawFlatBottom_(){const i=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=$n("V",i.baseline),this.outlinePath_+=$n("h",-i.width)}drawInlineInput_(i){this.positionInlineInputConnection_(i);const a=i.input.name;i.connectedBlock||this.info_.isInsertionMarker||(i=Zs(i.xPos+i.connectionWidth,i.centerline-i.height/2)+this.getInlineInputPath(i),this.block_.pathObject.setOutlinePath(a,i))}getInlineInputPath(i){const a=i.width-2*i.connectionWidth,p=i.height;return $n("h",a)+i.shape.pathRightDown(p)+$n("h",-a)+i.shape.pathUp(p)+"z"}drawStatementInput_(i){var a=i.getLastInput();const p=a.xPos+a.notchOffset+a.shape.width,w=this.constants_.INSIDE_CORNERS,L=a.shape.pathRight+$n("h",-(a.notchOffset-w.width))+w.pathTop,j=i.height-2*w.height;a=w.pathBottom+$n("h",a.notchOffset-w.width)+(a.connectedBottomNextConnection?"":a.shape.pathLeft),this.outlinePath_+=$n("H",p)+L+$n("v",j)+a+$n("H",i.xPos+i.width),this.positionStatementInputConnection_(i)}drawConnectionHighlightPath(i){const a=i.connectionModel;if(a.type===Un.NEXT_STATEMENT||a.type===Un.PREVIOUS_STATEMENT||a.type===Un.OUTPUT_VALUE&&!i.isDynamicShape)super.drawConnectionHighlightPath(i);else{i=a.type===Un.INPUT_VALUE?Zs(i.connectionWidth,-i.height/2)+this.getInlineInputPath(i):Zs(i.width,-i.height/2)+i.shape.pathDown(i.height);var p=a.getSourceBlock(),w,L;(L=(w=p.pathObject).addConnectionHighlight)==null||L.call(w,a,i,a.getOffsetInBlock(),p.RTL)}}},Hg=class extends Wi{constructor(i,a,p,w,L,j,_e){if(super(Wi.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",p=Number(Xr(p)),a=Number(Xr(a)),isNaN(p)||isNaN(a))throw Error("Height and width values of an image field must cast to numbers.");if(0>=p||0>=a)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new ro(a,p+Hg.Y_PADDING),this.imageHeight=p,typeof L=="function"&&(this.clickHandler=L),i!==Wi.SKIP_SETUP&&(_e?this.configure_(_e):(this.flipRtl=!!j,this.altText=Xr(w)||""),this.setValue(Xr(i)))}configure_(i){super.configure_(i),i.flipRtl&&(this.flipRtl=i.flipRtl),i.alt&&(this.altText=Xr(i.alt))}initView(){this.imageElement=re(Ye.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(no,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(i){return typeof i!="string"?null:i}doValueUpdate_(i){this.value_=i,this.imageElement&&this.imageElement.setAttributeNS(no,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(i){i!==this.altText&&(this.altText=i||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(i){this.clickHandler=i}getText_(){return this.altText}static fromJson(i){if(!i.src||!i.width||!i.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(i.src,i.width,i.height,void 0,void 0,void 0,i)}};Hg.Y_PADDING=1,xs("field_image",Hg),Hg.prototype.DEFAULT_VALUE="";var Kv=class extends Wi{constructor(i,a,p){super(Wi.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",i!==Wi.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(i),a&&this.setValidator(a))}configure_(i){super.configure_(i),i.spellcheck!==void 0&&(this.spellcheck_=i.spellcheck)}initView(){if(!this.getSourceBlock())throw new No;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const i=this.getSourceBlock();if(!i)throw new No;let a;return this.fullBlockClickTarget_=!((a=this.getConstants())==null||!a.FULL_BLOCK_FIELDS)&&i.isSimpleReporter()}doValueInvalid_(i){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,i=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&se()&&ce(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,i,this.value_)))}doValueUpdate_(i){this.isTextValid_=this.isDirty_=!0,this.value_=i}applyColour(){const i=this.getSourceBlock();if(!i)throw new No;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",i.style.colourTertiary)):(this.borderRect_.style.display="none",i.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let i;return(i=this.getConstants())!=null&&i.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var i=this.htmlInput_;this.isTextValid_?(yt(i,"blocklyInvalidInput"),Cr(i,xo.INVALID,!1)):(Be(i,"blocklyInvalidInput"),Cr(i,xo.INVALID,!0))}if(i=this.getSourceBlock(),!i)throw new No;this.getConstants().FULL_BLOCK_FIELDS&&i.applyColour()}setSpellcheck(i){i!==this.spellcheck_&&(this.spellcheck_=i,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(i,a=!1){this.workspace_=this.sourceBlock_.workspace,!a&&this.workspace_.options.modalInputs&&(Fl||On||zn)?this.showPromptEditor_():this.showInlineEditor_(a)}showPromptEditor_(){Na(t.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),i=>{i!==null&&this.setValue(this.getValueFromEditorText_(i)),this.onFinishEditing_(this.value_)})}showInlineEditor_(i){const a=this.getSourceBlock();if(!a)throw new No;Ql(this,a.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,i||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var i=this.getSourceBlock();if(!i)throw new No;t.setGroup$$module$build$src$core$events$utils(!0);const a=co();var p=this.getClickTarget_();if(!p)throw Error("A click target has not been set.");Be(p,"editing"),p=document.createElement("input"),p.className="blocklyHtmlInput",p.setAttribute("spellcheck",this.spellcheck_);const w=this.workspace_.getScale();var L=this.getConstants().FIELD_TEXT_FONTSIZE*w+"pt";return a.style.fontSize=L,p.style.fontSize=L,L=Kv.BORDERRADIUS*w+"px",this.isFullBlockField()&&(L=this.getScaledBBox(),L=(L.bottom-L.top)/2+"px",i=i.getParent()?i.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,p.style.border=1*w+"px solid "+i,a.style.borderRadius=L,a.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(a.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*w+"px")),p.style.borderRadius=L,a.appendChild(p),p.value=p.defaultValue=this.getEditorText_(this.value_),p.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(p),p}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&se()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(ce(new(ke(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),t.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var i=co().style;if(i.width="auto",i.height="auto",i.fontSize="",i.transition="",i.boxShadow="",this.htmlInput_=null,i=this.getClickTarget_(),!i)throw Error("A click target has not been set.");yt(i,"editing")}onFinishEditing_(i){}bindInputEvents_(i){this.onKeyDownWrapper_=Ie(i,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=Ie(i,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(it(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(it(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(i){i.key==="Enter"?(Zl(),ll()):i.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),Zl(),ll()):i.key==="Tab"&&(Zl(),ll(),this.sourceBlock_.tab(this,!i.shiftKey),i.preventDefault())}onHtmlInputChange_(i){i=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&se()&&this.value_!==i&&ce(new(ke(Mh))(this.sourceBlock_,this.name||null,i,this.value_))}setEditorValue_(i,a=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(i)),this.setValue(i,a)}resizeEditor_(){var i=this.getSourceBlock();if(!i)throw new No;const a=co(),p=this.getScaledBBox();a.style.width=p.right-p.left+"px",a.style.height=p.bottom-p.top+"px",i=new vn(i.RTL?p.right-a.offsetWidth:p.left,p.top),a.style.left=i.x+"px",a.style.top=i.y+"px"}repositionForWindowResize(){const i=this.getSourceBlock();return i instanceof Bp?(xh(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),i)||this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(i){return`${i}`}getValueFromEditorText_(i){return i}};Kv.BORDERRADIUS=4;var W0=class extends Kv{constructor(i,a,p){super(i,a,p)}doClassValidation_(i){return i===void 0?null:`${i}`}static fromJson(i){return new this(Xr(i.text),void 0,i)}};xs("field_input",W0),W0.prototype.DEFAULT_VALUE="";var UT=class extends Dv{constructor(i){super(i)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(i){return!!i.outputConnection}hasRightSquareCorner(i){return!!i.outputConnection&&!i.statementInputCount&&!i.nextConnection}},J_=class extends Pv{constructor(i,a){if(super(i,a),this.connectedBottomNextConnection=!1,this.connectedBlock){for(i=this.connectedBlock;a=i.getNextBlock();)i=a;i.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},HT=class extends or{constructor(i){super(i),this.width=this.height=0,this.type|=ht.getType("RIGHT_CONNECTION")}},GT=class extends gb{constructor(i){super(i)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(i){const a=(i.hat?i.hat==="cap":this.constants_.ADD_START_HATS)&&!i.outputConnection&&!i.previousConnection;return!!i.outputConnection||a}hasRightSquareCorner(i){return!!i.outputConnection&&!i.statementInputCount&&!i.nextConnection}},WT=class extends L0{constructor(i,a){super(i,a),this.isInline=!0,this.renderer_=i,this.constants_=this.renderer_.getConstants(),this.topRow=new GT(this.constants_),this.bottomRow=new UT(this.constants_),this.isMultiRow=!a.getInputsInline()||a.isCollapsed(),this.hasStatementInput=0<a.statementInputCount,this.rightSide=this.outputConnection?new HT(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(i,a){return a?a instanceof Sm||i instanceof id||a instanceof id?!0:i instanceof t.ValueInput$$module$build$src$core$inputs$value_input||i instanceof Pp||i instanceof Sm?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(i){return i.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(i)}getInRowSpacing_(i,a){return i&&a||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!i&&a&&ht.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:i&&ht.isLeftRoundedCorner(i)&&a&&(ht.isPreviousConnection(a)||ht.isNextConnection(a))?a.notchOffset-this.constants_.CORNER_RADIUS:i&&ht.isLeftSquareCorner(i)&&a&&ht.isHat(a)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(i,a){if(ht.isTopRow(i)&&ht.isBottomRow(a))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const p=ht.isInputRow(i)&&i.hasStatement,w=ht.isInputRow(a)&&a.hasStatement;return w||p?(i=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),w&&p?Math.max(i,this.constants_.DUMMY_INPUT_MIN_HEIGHT):i):ht.isTopRow(i)?i.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):ht.isBottomRow(a)?this.outputConnection?!a.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(i,a){const p=this.width-this.startX;return ht.isInputRow(i)&&i.hasStatement||ht.isInputRow(a)&&a.hasStatement?Math.max(p,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):p}getElemCenterline_(i,a){if(i.hasStatement&&!ht.isSpacer(a)&&!ht.isStatementInput(a))return i.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(ht.isInlineInput(a)&&a instanceof sg){const p=a.connectedBlock;if(p&&p.outputConnection&&p.nextConnection)return i.yPos+p.height/2}return super.getElemCenterline_(i,a)}addInput_(i,a){if((i instanceof Pp||i instanceof Sm)&&a.hasDummyInput&&a.align===t.Align$$module$build$src$core$inputs$align.LEFT&&i.align===t.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(a,i);else if(i instanceof id){a.elements.push(new J_(this.constants_,i)),a.hasStatement=!0,a.align===null&&(a.align=i.align);return}super.addInput_(i,a)}addAlignmentPadding_(i,a){if(this.rightAlignedDummyInputs.get(i)){let p;for(let w=0;w<i.elements.length;w++){const L=i.elements[w];if(ht.isSpacer(L)&&(p=L),ht.isField(L)&&L instanceof O0&&L.parentInput===this.rightAlignedDummyInputs.get(i))break}if(p){p.width+=a,i.width+=a;return}}super.addAlignmentPadding_(i,a)}adjustXPosition_(){const i=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let a=i;for(let L=2;L<this.rows.length-1;L+=2){var p=this.rows[L-1];const j=this.rows[L];var w=this.rows[L+1];if(p=L===2?!!this.topRow.hasPreviousConnection:!!p.followsStatement,w=L+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!w.precedesStatement,ht.isInputRow(j)&&j.hasStatement){j.measure();let _e,We;a=j.width-((We=(_e=j.getLastInput())==null?void 0:_e.width)!=null?We:0)+i}else if(p&&(L===2||w)&&ht.isInputRow(j)&&!j.hasStatement){w=j.xPos,p=null;for(let _e=0;_e<j.elements.length;_e++){const We=j.elements[_e];ht.isSpacer(We)&&(p=We),p&&(ht.isField(We)||ht.isInput(We))&&w<a&&!(ht.isField(We)&&We instanceof O0&&(We.field instanceof wi||We.field instanceof Hg))&&(p.width+=a-w),w+=We.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var i=this.outputConnection.shape;if("isDynamic"in i&&i.isDynamic){for(var a=0,p=0;p<this.rows.length;p++){const w=this.rows[p];w.yPos=a,a+=w.height}this.height=a,p=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,a=i.height(p),p=i.width(p),this.outputConnection.height=a,this.outputConnection.width=p,this.outputConnection.startX=p,this.outputConnection.connectionOffsetY=i.connectionOffsetY(a),this.outputConnection.connectionOffsetX=i.connectionOffsetX(p),i=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(i=p,this.rightSide.height=a,this.rightSide.width=i,this.rightSide.centerline=a/2,this.rightSide.xPos=this.width+i),this.startX=p,this.width+=p+i,this.widthWithChildren+=p+i}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var i=0,a=0;a<this.rows.length;a++){var p=this.rows[a];if(!ht.isInputRow(p))continue;i=p.elements[p.elements.length-2];let w=this.getNegativeSpacing_(p.elements[1]),L=this.getNegativeSpacing_(i);i=w+L;const j=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-i<j&&(i=this.width-j,w=i/2,L=i/2),p.elements.unshift(new qd(this.constants_,-w)),p.elements.push(new qd(this.constants_,-L))}if(i)for(this.width-=i,this.widthWithChildren-=i,this.rightSide.xPos-=i,a=0;a<this.rows.length;a++)p=this.rows[a],ht.isTopOrBottomRow(p)&&(p.elements[1].width-=i),p.width-=i,p.widthWithConnectedBlocks-=i}}getNegativeSpacing_(i){if(!i||!this.outputConnection)return 0;const a=this.outputConnection.width;var p=this.outputConnection.shape.type;const w=this.constants_;if(1<this.inputRows.length)switch(p){case w.SHAPES.ROUND:return p=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,p=this.height/2>p?p:this.height/2,a-p*(1-Math.sin(Math.acos((p-this.constants_.SMALL_PADDING)/p)));default:return 0}if(ht.isInlineInput(i)&&i instanceof sg){const L=i.connectedBlock;return i=L?L.pathObject.outputShapeType:i.shape.type,i==null||L&&L.outputConnection&&(L.statementInputCount||L.nextConnection)||p===w.SHAPES.HEXAGONAL&&p!==i?0:a-this.constants_.SHAPE_IN_SHAPE_PADDING[p][i]}return ht.isField(i)&&i instanceof O0?p===w.SHAPES.ROUND&&i.field instanceof W0?a-2.75*w.GRID_UNIT:a-this.constants_.SHAPE_IN_SHAPE_PADDING[p][0]:ht.isIcon(i)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let w=2;w<this.rows.length-1;w+=2){const L=this.rows[w-1],j=this.rows[w],_e=this.rows[w+1];var i=w===2,a=w+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!_e.precedesStatement;if(i?this.topRow.hasPreviousConnection:L.followsStatement){var p=j.elements[1];if(p=j.elements.length===3&&p instanceof O0&&(p.field instanceof wi||p.field instanceof Hg),!i&&p)L.height-=this.constants_.SMALL_PADDING,_e.height-=this.constants_.SMALL_PADDING,j.height-=this.constants_.MEDIUM_PADDING;else if(!i&&!a)L.height+=this.constants_.SMALL_PADDING;else if(a){for(i=!1,a=0;a<j.elements.length;a++)if(p=j.elements[a],p instanceof sg&&ht.isInlineInput(p)&&p.connectedBlock&&!p.connectedBlock.isShadow()&&40<=p.connectedBlock.getHeightWidth().height){i=!0;break}i&&(L.height-=this.constants_.SMALL_PADDING,_e.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},c=class extends Uv{constructor(i,a,p){super(i,a,p),this.markerCircle=null}showWithInputOutput(i){const a=i.getSourceBlock();i=i.getLocation().getOffsetInBlock(),this.positionCircle(i.x,i.y),this.setParent_(a),this.showCurrent_()}showWithOutput_(i){this.showWithInputOutput(i)}showWithInput_(i){this.showWithInputOutput(i)}showWithBlock_(i){i=i.getLocation();const a=i.getHeightWidth();this.positionRect_(0,0,a.width,a.height),this.setParent_(i),this.showCurrent_()}positionCircle(i,a){let p;(p=this.markerCircle)==null||p.setAttribute("cx",`${i}`);let w;(w=this.markerCircle)==null||w.setAttribute("cy",`${a}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=re(Ye.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const i=this.getBlinkProperties_();re(Ye.ANIMATE,i,this.markerCircle)}return this.markerSvg_}applyColour_(i){super.applyColour_(i);let a;(a=this.markerCircle)==null||a.setAttribute("fill",this.colour_);let p;if((p=this.markerCircle)==null||p.setAttribute("stroke",this.colour_),this.isCursor()){i=this.colour_+";transparent;transparent;";let w;(w=this.markerCircle)==null||w.firstElementChild.setAttribute("values",i)}}},m=class extends N0{constructor(i,a,p){super(i,a,p),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=p}setPath(i){super.setPath(i),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",i)}applyColour(i){super.applyColour(i);const a=i.getParent();i.isShadow()&&a&&this.svgPath.setAttribute("stroke",a.style.colourTertiary);for(const p of this.outlines.values())p.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const i of this.outlines.values())i.setAttribute("transform","scale(-1 1)")}updateSelected(i){this.setClass_("blocklySelected",i),i?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(i){this.setClass_("blocklyReplaceable",i),i?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(i,a){i=i.getParentInput().name,(i=this.getOutlinePath(i))&&(a?i.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):i.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const i of this.outlines.keys())this.remainingOutlines.add(i)}endDrawing(){if(this.remainingOutlines.size)for(const i of this.remainingOutlines)this.removeOutlinePath(i);this.remainingOutlines.clear()}setOutlinePath(i,a){i=this.getOutlinePath(i),i.setAttribute("d",a),i.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(i){return this.outlines.has(i)||this.outlines.set(i,re(Ye.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(i),this.outlines.get(i)}removeOutlinePath(i){let a,p;(a=this.outlines.get(i))==null||(p=a.parentNode)==null||p.removeChild(this.outlines.get(i)),this.outlines.delete(i)}},E=class extends Hv{constructor(i){super(i)}makeConstants_(){return new FT}makeRenderInfo_(i){return new WT(this,i)}makeDrawer_(i,a){return new zT(i,a)}makeMarkerDrawer(i,a){return new c(i,this.getConstants(),a)}makePathObject(i,a){return new m(i,a,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(i,a,p){return Ee("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),a.type===Un.OUTPUT_VALUE?i.isConnected()?Sf.PREVIEW_TYPE.REPLACEMENT_FADE:Sf.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(i,a,p)}};Oi("zelos",E);var N={};N.BottomRow=UT,N.ConstantProvider=FT,N.Drawer=zT,N.MarkerSvg=c,N.PathObject=m,N.RenderInfo=WT,N.Renderer=E,N.RightConnectionShape=HT,N.StatementInput=J_,N.TopRow=GT,Vo();var G={};G.registerCleanup=Zr,G.registerCollapse=us,G.registerCollapseExpandBlock=Au,G.registerComment=_d,G.registerDefaultOptions=Vo,G.registerDelete=vo,G.registerDeleteAll=Zu,G.registerDisable=Iu,G.registerDuplicate=go,G.registerExpand=ts,G.registerHelp=_o,G.registerInline=ba,G.registerRedo=ri,G.registerUndo=zr;var J=class extends Kv{constructor(i,a,p){super(Wi.SKIP_SETUP),this.clockwise=J.CLOCKWISE,this.offset=J.OFFSET,this.wrap=J.WRAP,this.round=J.ROUND,this.boundEvents=[],this.symbol_=this.gauge=this.line=null,i!==Wi.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(i),a&&this.setValidator(a))}configure_(i){switch(super.configure_(i),i.mode){case he.COMPASS:this.clockwise=!0,this.offset=90;break;case he.PROTRACTOR:this.clockwise=!1,this.offset=0}i.clockwise&&(this.clockwise=i.clockwise),i.offset&&(this.offset=i.offset),i.wrap&&(this.wrap=i.wrap),i.round&&(this.round=i.round)}initView(){super.initView(),this.symbol_=re(Ye.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph()}showEditor_(i){super.showEditor_(i,Fl||On||zn),i=this.dropdownCreate(),$u().appendChild(i),this.sourceBlock_ instanceof Bp&&Ad(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),ye(this,this.dropdownDispose.bind(this)),this.updateGraph()}dropdownCreate(){const i=re(Ye.SVG,{xmlns:qm,"xmlns:html":xc,"xmlns:xlink":no,version:"1.1",height:2*J.HALF+"px",width:2*J.HALF+"px"});i.style.touchAction="none";const a=re(Ye.CIRCLE,{cx:J.HALF,cy:J.HALF,r:J.RADIUS,class:"blocklyAngleCircle"},i);this.gauge=re(Ye.PATH,{class:"blocklyAngleGauge"},i),this.line=re(Ye.LINE,{x1:J.HALF,y1:J.HALF,class:"blocklyAngleLine"},i);for(let p=0;360>p;p+=15)re(Ye.LINE,{x1:J.HALF+J.RADIUS,y1:J.HALF,x2:J.HALF+J.RADIUS-(p%45===0?10:5),y2:J.HALF,class:"blocklyAngleMarks",transform:"rotate("+p+","+J.HALF+","+J.HALF+")"},i);return this.boundEvents.push(Ie(i,"click",this,this.hide)),this.boundEvents.push(Ie(a,"pointerdown",this,this.onMouseMove_,!0)),this.boundEvents.push(Ie(a,"pointermove",this,this.onMouseMove_,!0)),i}dropdownDispose(){for(const i of this.boundEvents)it(i);this.boundEvents.length=0,this.line=this.gauge=null}hide(){Ti(this),Zl()}onMouseMove_(i){var a=this.gauge.ownerSVGElement.getBoundingClientRect();const p=i.clientX-a.left-J.HALF;i=i.clientY-a.top-J.HALF,a=Math.atan(-i/p),isNaN(a)||(a=is(a),0>p?a+=180:0<i&&(a+=360),a=this.clockwise?this.offset+360-a:360-(this.offset-a),this.displayMouseOrKeyboardValue(a))}displayMouseOrKeyboardValue(i){if(this.round&&(i=Math.round(i/this.round)*this.round),i=this.wrapValue(i),i!==this.value_){const a=this.value_;this.setEditorValue_(i,!1),this.sourceBlock_&&se()&&this.value_!==a&&ce(new(ke(Mh))(this.sourceBlock_,this.name||null,a,this.value_))}}updateGraph(){if(this.gauge&&this.line){var i=Number(this.getText())+this.offset,a=Hc(i%360);i=["M ",J.HALF,",",J.HALF];var p=J.HALF,w=J.HALF;if(!isNaN(a)){const L=Number(this.clockwise),j=Hc(this.offset),_e=Math.cos(j)*J.RADIUS,We=Math.sin(j)*-J.RADIUS;L&&(a=2*j-a),p+=Math.cos(a)*J.RADIUS,w-=Math.sin(a)*J.RADIUS,a=Math.abs(Math.floor((a-j)/Math.PI)%2),L&&(a=1-a),i.push(" l ",_e,",",We," A ",J.RADIUS,",",J.RADIUS," 0 ",a," ",L," ",p,",",w," z")}this.gauge.setAttribute("d",i.join("")),this.line.setAttribute("x2",`${p}`),this.line.setAttribute("y2",`${w}`)}}onHtmlInputKeyDown_(i){super.onHtmlInputKeyDown_(i);var a=this.getSourceBlock();if(!a)throw new No;let p=0;switch(i.key){case"ArrowLeft":p=a.RTL?1:-1;break;case"ArrowRight":p=a.RTL?-1:1;break;case"ArrowDown":p=-1;break;case"ArrowUp":p=1}p&&(a=this.getValue(),this.displayMouseOrKeyboardValue(a+p*this.round),i.preventDefault(),i.stopPropagation())}doClassValidation_(i){return i=Number(i),isNaN(i)||!isFinite(i)?null:this.wrapValue(i)}wrapValue(i){return i%=360,0>i&&(i+=360),i>this.wrap&&(i-=360),i}static fromJson(i){return new this(i.angle,void 0,i)}};J.HALF=50,J.RADIUS=J.HALF-1,J.CLOCKWISE=!1,J.OFFSET=0,J.WRAP=360,J.ROUND=15,xs("field_angle",J),J.prototype.DEFAULT_VALUE=0,Ct(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: 0.8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: 0.8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`);var he;(function(i){i.COMPASS="compass",i.PROTRACTOR="protractor"})(he||(he={}));var ve=class extends Wi{constructor(i,a,p){super(Wi.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=ve.CHECK_CHAR,i!==Wi.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(i),a&&this.setValidator(a))}configure_(i){super.configure_(i),i.checkCharacter&&(this.checkChar=i.checkCharacter)}saveState(){const i=this.saveLegacyState(ve);return i!==null?i:this.getValueBoolean()}initView(){super.initView();const i=this.getTextElement();Be(i,"blocklyCheckbox"),i.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(i){this.checkChar=i||ve.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(i){return i===!0||i==="TRUE"?"TRUE":i===!1||i==="FALSE"?"FALSE":null}doValueUpdate_(i){this.value_=this.convertValueToBool_(i),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(i){return typeof i=="string"?i==="TRUE":!!i}static fromJson(i){return new this(i.checked,void 0,i)}};ve.CHECK_CHAR="",xs("field_checkbox",ve),ve.prototype.DEFAULT_VALUE=!1;var xe=class extends Wi{constructor(i,a,p){super(Wi.SKIP_SETUP),this.highlightedIndex=this.picker=null,this.boundEvents=[],this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles=this.colours=null,this.columns=0,i!==Wi.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(i),a&&this.setValidator(a))}configure_(i){super.configure_(i),i.colourOptions&&(this.colours=i.colourOptions),i.colourTitles&&(this.titles=i.colourTitles),i.columns&&(this.columns=i.columns)}initView(){this.size_=new ro(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1",this.getBorderRect().setAttribute("stroke","#fff"),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const i=this.getSourceBlock();if(!i)throw new No;const a=this.getConstants();return i.isSimpleReporter()&&!(a==null||!a.FIELD_COLOUR_FULL_BLOCK)}applyColour(){const i=this.getSourceBlock();if(!i)throw new No;if(this.fieldGroup_){var a=this.borderRect_;if(!a)throw Error("The border rect has not been initialized");this.isFullBlockField()?(a.style.display="none",i.pathObject.svgPath.setAttribute("fill",this.getValue()),i.pathObject.svgPath.setAttribute("stroke","#fff")):(a.style.display="block",a.style.fill=this.getValue())}}getSize(){let i;return(i=this.getConstants())!=null&&i.FIELD_COLOUR_FULL_BLOCK&&(this.render_(),this.isDirty_=!1),super.getSize()}render_(){super.render_();const i=this.getSourceBlock();if(!i)throw new No;i.applyColour()}updateSize_(i){var a=this.getConstants();this.isFullBlockField()?(i=2*(i??0),a=a.FIELD_TEXT_HEIGHT):(i=a.FIELD_COLOUR_DEFAULT_WIDTH,a=a.FIELD_COLOUR_DEFAULT_HEIGHT),this.size_.height=a,this.size_.width=i,this.positionBorderRect_()}doClassValidation_(i){return typeof i!="string"?null:na(i)}getText(){let i=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(i)&&(i="#"+i[1]+i[3]+i[5]),i}setColours(i,a){return this.colours=i,a&&(this.titles=a),this}setColumns(i){return this.columns=i,this}showEditor_(){this.dropdownCreate(),$u().appendChild(this.picker),ye(this,this.dropdownDispose.bind(this)),this.picker.focus({preventScroll:!0})}onClick(i){i=(i=i.target)&&i.getAttribute("data-colour"),i!==null&&(this.setValue(i),Ti(this))}onKeyDown(i){let a=!0;var p;switch(i.key){case"ArrowUp":this.moveHighlightBy(0,-1);break;case"ArrowDown":this.moveHighlightBy(0,1);break;case"ArrowLeft":this.moveHighlightBy(-1,0);break;case"ArrowRight":this.moveHighlightBy(1,0);break;case"Enter":(p=this.getHighlighted())&&(p=p.getAttribute("data-colour"),p!==null&&this.setValue(p)),ll();break;default:a=!1}a&&i.stopPropagation()}moveHighlightBy(i,a){if(this.highlightedIndex){var p=this.colours||xe.COLOURS,w=this.columns||xe.COLUMNS,L=this.highlightedIndex%w,j=Math.floor(this.highlightedIndex/w);L+=i,j+=a,0>i?0>L&&0<j?(L=w-1,j--):0>L&&(L=0):0<i?L>w-1&&j<Math.floor(p.length/w)-1?(L=0,j++):L>w-1&&L--:0>a?0>j&&(j=0):0<a&&j>Math.floor(p.length/w)-1&&(j=Math.floor(p.length/w)-1),this.setHighlightedCell(this.picker.childNodes[j].childNodes[L],j*w+L)}}onMouseMove(i){const a=(i=i.target)&&Number(i.getAttribute("data-index"));a!==null&&a!==this.highlightedIndex&&this.setHighlightedCell(i,a)}onMouseEnter(){let i;(i=this.picker)==null||i.focus({preventScroll:!0})}onMouseLeave(){var i;(i=this.picker)==null||i.blur(),(i=this.getHighlighted())&&yt(i,"blocklyColourHighlighted")}getHighlighted(){if(!this.highlightedIndex)return null;const i=this.columns||xe.COLUMNS,a=this.picker.childNodes[Math.floor(this.highlightedIndex/i)];return a?a.childNodes[this.highlightedIndex%i]:null}setHighlightedCell(i,a){const p=this.getHighlighted();p&&yt(p,"blocklyColourHighlighted"),Be(i,"blocklyColourHighlighted"),this.highlightedIndex=a,(i=i.getAttribute("id"))&&this.picker&&Cr(this.picker,xo.ACTIVEDESCENDANT,i)}dropdownCreate(){const i=this.columns||xe.COLUMNS,a=this.colours||xe.COLOURS,p=this.titles||xe.TITLES,w=this.getValue(),L=document.createElement("table");L.className="blocklyColourTable",L.tabIndex=0,L.dir="ltr",ci(L,ah.GRID),Cr(L,xo.EXPANDED,!0),Cr(L,xo.ROWCOUNT,Math.floor(a.length/i)),Cr(L,xo.COLCOUNT,i);let j;for(let _e=0;_e<a.length;_e++){_e%i===0&&(j=document.createElement("tr"),ci(j,ah.ROW),L.appendChild(j));const We=document.createElement("td");j.appendChild(We),We.setAttribute("data-colour",a[_e]),We.title=p[_e]||a[_e],We.id=ue(),We.setAttribute("data-index",`${_e}`),ci(We,ah.GRIDCELL),Cr(We,xo.LABEL,a[_e]),Cr(We,xo.SELECTED,a[_e]===w),We.style.backgroundColor=a[_e],a[_e]===w&&(We.className="blocklyColourSelected",this.highlightedIndex=_e)}this.boundEvents.push(Ie(L,"pointerdown",this,this.onClick,!0)),this.boundEvents.push(Ie(L,"pointermove",this,this.onMouseMove,!0)),this.boundEvents.push(Ie(L,"pointerenter",this,this.onMouseEnter,!0)),this.boundEvents.push(Ie(L,"pointerleave",this,this.onMouseLeave,!0)),this.boundEvents.push(Ie(L,"keydown",this,this.onKeyDown,!1)),this.picker=L}dropdownDispose(){for(const i of this.boundEvents)it(i);this.boundEvents.length=0,this.highlightedIndex=this.picker=null}static fromJson(i){return new this(i.colour,void 0,i)}};xe.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),xe.TITLES=[],xe.COLUMNS=7,xe.prototype.DEFAULT_VALUE=xe.COLOURS[0],xs("field_colour",xe),Ct(`
.blocklyColourTable {
  border-collapse: collapse;
  display: block;
  outline: none;
  padding: 1px;
}

.blocklyColourTable>tr>td {
  border: 0.5px solid #888;
  box-sizing: border-box;
  cursor: pointer;
  display: inline-block;
  height: 20px;
  padding: 0;
  width: 20px;
}

.blocklyColourTable>tr>td.blocklyColourHighlighted {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0, 0, 0, 0.3);
  position: relative;
}

.blocklyColourSelected, .blocklyColourSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}
`);var nt=class extends wi{constructor(i,a,p){super(String(i??""),a,p),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(i){return new this(Xr(i.text),void 0,i)}};xs("field_label_serializable",nt);var rt=class extends W0{constructor(i,a,p){super(Wi.SKIP_SETUP),this.textGroup=null,this.maxLines_=1/0,this.isOverflowedY_=!1,i!==Wi.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(i),a&&this.setValidator(a))}configure_(i){super.configure_(i),i.maxLines&&this.setMaxLines(i.maxLines)}toXml(i){return i.textContent=this.getValue().replace(/\n/g,"&#10;"),i}fromXml(i){this.setValue(i.textContent.replace(/&#10;/g,`
`))}saveState(){const i=this.saveLegacyState(rt);return i!==null?i:this.getValue()}loadState(i){this.loadLegacyState(Wi,i)||this.setValue(i)}initView(){this.createBorderRect_(),this.textGroup=re(Ye.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const i=this.getSourceBlock();if(!i)throw new No;let a=this.getText();if(!a)return Wi.NBSP;const p=a.split(`
`);a="";const w=this.isOverflowedY_?this.maxLines_:p.length;for(let L=0;L<w;L++){let j=p[L];j.length>this.maxDisplayLength?j=j.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&L===w-1&&(j=j.substring(0,j.length-3)+"..."),j=j.replace(/\s/g,Wi.NBSP),a+=j,L!==w-1&&(a+=`
`)}return i.RTL&&(a+=""),a}doValueUpdate_(i){super.doValueUpdate_(i),this.value_!==null&&(this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_)}render_(){var i=this.getSourceBlock();if(!i)throw new No;for(var a,p=this.textGroup;a=p.firstChild;)p.removeChild(a);a=this.getDisplayText_().split(`
`);let w=0;for(let L=0;L<a.length;L++){const j=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;re(Ye.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:w+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},p).appendChild(document.createTextNode(a[L])),w+=j}this.isBeingEdited_&&(p=this.htmlInput_,this.isOverflowedY_?Be(p,"blocklyHtmlTextAreaInputOverflowedY"):yt(p,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(i.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),i=this.htmlInput_,this.isTextValid_?(yt(i,"blocklyInvalidInput"),Cr(i,xo.INVALID,!1)):(Be(i,"blocklyInvalidInput"),Cr(i,xo.INVALID,!0)))}updateSize_(){var i=this.textGroup.childNodes;const a=this.getConstants().FIELD_TEXT_FONTSIZE,p=this.getConstants().FIELD_TEXT_FONTWEIGHT,w=this.getConstants().FIELD_TEXT_FONTFAMILY;let L=0,j=0;for(var _e=0;_e<i.length;_e++){var We=Fe(i[_e],a,p,w);We>L&&(L=We),j+=this.getConstants().FIELD_TEXT_HEIGHT+(0<_e?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(i=String(this.value_).split(`
`),_e=re(Ye.TEXT,{class:"blocklyText blocklyMultilineText"}),We=0;We<i.length;We++){i[We].length>this.maxDisplayLength&&(i[We]=i[We].substring(0,this.maxDisplayLength)),_e.textContent=i[We];const Jt=Fe(_e,a,p,w);Jt>L&&(L=Jt)}L+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(j+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,L+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",`${L}`),this.borderRect_.setAttribute("height",`${j}`)),this.size_.width=L,this.size_.height=j,this.positionBorderRect_()}showEditor_(i,a){super.showEditor_(i,a),this.forceRerender()}widgetCreate_(){const i=co(),a=this.workspace_.getScale(),p=document.createElement("textarea");p.className="blocklyHtmlInput blocklyHtmlTextAreaInput",p.setAttribute("spellcheck",String(this.spellcheck_));var w=this.getConstants().FIELD_TEXT_FONTSIZE*a+"pt";i.style.fontSize=w,p.style.fontSize=w,p.style.borderRadius=W0.BORDERRADIUS*a+"px",w=this.getConstants().FIELD_BORDER_RECT_X_PADDING*a;const L=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*a/2;return p.style.padding=L+"px "+w+"px "+L+"px "+w+"px",w=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,p.style.lineHeight=w*a+"px",i.appendChild(p),p.value=p.defaultValue=this.getEditorText_(this.value_),p.setAttribute("data-untyped-default-value",String(this.value_)),p.setAttribute("data-old-value",""),xn?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(p),p}setMaxLines(i){typeof i=="number"&&0<i&&i!==this.maxLines_&&(this.maxLines_=i,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(i){i.key!=="Enter"&&super.onHtmlInputKeyDown_(i)}static fromJson(i){return new this(Xr(i.text),void 0,i)}};xs("field_multilinetext",rt),Ct(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`);var dt=class extends Kv{constructor(i,a,p,w,L,j){super(Wi.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,i!==Wi.SKIP_SETUP&&(j?this.configure_(j):this.setConstraints(a,p,w),this.setValue(i),L&&this.setValidator(L))}configure_(i){super.configure_(i),this.setMinInternal(i.min),this.setMaxInternal(i.max),this.setPrecisionInternal(i.precision)}setConstraints(i,a,p){this.setMinInternal(i),this.setMaxInternal(a),this.setPrecisionInternal(p),this.setValue(this.getValue())}setMin(i){this.setMinInternal(i),this.setValue(this.getValue())}setMinInternal(i){i==null?this.min_=-1/0:(i=Number(i),isNaN(i)||(this.min_=i))}getMin(){return this.min_}setMax(i){this.setMaxInternal(i),this.setValue(this.getValue())}setMaxInternal(i){i==null?this.max_=1/0:(i=Number(i),isNaN(i)||(this.max_=i))}getMax(){return this.max_}setPrecision(i){this.setPrecisionInternal(i),this.setValue(this.getValue())}setPrecisionInternal(i){this.precision_=Number(i)||0;let a=String(this.precision_);a.indexOf("e")!==-1&&(a=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const p=a.indexOf(".");this.decimalPlaces=p===-1?i?0:null:a.length-p-1}getPrecision(){return this.precision_}doClassValidation_(i){return i===null||(i=`${i}`.replace(/O/gi,"0"),i=i.replace(/,/g,""),i=i.replace(/infinity/i,"Infinity"),i=Number(i||0),isNaN(i))?null:(i=Math.min(Math.max(i,this.min_),this.max_),this.precision_&&isFinite(i)&&(i=Math.round(i/this.precision_)*this.precision_),this.decimalPlaces!==null&&(i=Number(i.toFixed(this.decimalPlaces))),i)}widgetCreate_(){const i=super.widgetCreate_();return-1/0<this.min_&&(i.min=`${this.min_}`,Cr(i,xo.VALUEMIN,this.min_)),1/0>this.max_&&(i.max=`${this.max_}`,Cr(i,xo.VALUEMAX,this.max_)),i}static fromJson(i){return new this(i.value,void 0,void 0,void 0,void 0,i)}};xs("field_number",dt),dt.prototype.DEFAULT_VALUE=0;var Lt=class extends Ih{constructor(i,a,p,w,L){super(Wi.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=Lt.dropdownCreate,this.defaultVariableName=typeof i=="string"?i:"",this.size_=new ro(0,0),i!==Wi.SKIP_SETUP&&(L?this.configure_(L):this.setTypes(p,w),a&&this.setValidator(a))}configure_(i){super.configure_(i),this.setTypes(i.variableTypes,i.defaultType)}initModel(){var i=this.getSourceBlock();if(!i)throw new No;this.variable||(i=t.getOrCreateVariablePackage$$module$build$src$core$variables(i.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(i.getId()))}shouldAddBorderRect_(){const i=this.getSourceBlock();if(!i)throw new No;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||i.type!=="variables_get")}fromXml(i){var a=this.getSourceBlock();if(!a)throw new No;const p=i.getAttribute("id"),w=i.textContent,L=i.getAttribute("variabletype")||i.getAttribute("variableType")||"";if(a=t.getOrCreateVariablePackage$$module$build$src$core$variables(a.workspace,p,w,L),L!==null&&L!==a.type)throw Error("Serialized variable type with id '"+a.getId()+"' had type "+a.type+", and does not match variable field that references it: "+Qi(i)+".");this.setValue(a.getId())}toXml(i){return this.initModel(),i.id=this.variable.getId(),i.textContent=this.variable.name,this.variable.type&&i.setAttribute("variabletype",this.variable.type),i}saveState(i){var a=this.saveLegacyState(Lt);return a!==null||(this.initModel(),a={id:this.variable.getId()},i&&(a.name=this.variable.name,a.type=this.variable.type)),a}loadState(i){const a=this.getSourceBlock();if(!a)throw new No;this.loadLegacyState(Lt,i)||(i=t.getOrCreateVariablePackage$$module$build$src$core$variables(a.workspace,i.id||null,i.name,i.type||""),this.setValue(i.getId()))}setSourceBlock(i){if(i.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(i)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(i){if(i===null)return null;var a=this.getSourceBlock();if(!a)throw new No;return a=t.getVariable$$module$build$src$core$variables(a.workspace,i),a?(a=a.type,this.typeIsAllowed(a)?i:(console.warn("Variable type doesn't match this field!  Type was "+a),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+i),null)}doValueUpdate_(i){const a=this.getSourceBlock();if(!a)throw new No;this.variable=t.getVariable$$module$build$src$core$variables(a.workspace,i),super.doValueUpdate_(i)}typeIsAllowed(i){const a=this.getVariableTypes();if(!a)return!0;for(let p=0;p<a.length;p++)if(i===a[p])return!0;return!1}getVariableTypes(){var i=this.variableTypes;if(i===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(i=i||[""],i.length===0)throw i=this.getText(),Error("'variableTypes' of field variable "+i+" was an empty list");return i}setTypes(i=null,a=""){if(Array.isArray(i)){let p=!1;for(let w=0;w<i.length;w++)i[w]===a&&(p=!0);if(!p)throw Error("Invalid default type '"+a+"' in the definition of a FieldVariable")}else if(i!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=a,this.variableTypes=i}refreshVariableName(){this.forceRerender()}onItemSelected_(i,a){if(i=a.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(i===hn){t.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(i===an){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(i)}referencesVariables(){return!0}static fromJson(i){return new this(Xr(i.variable),void 0,void 0,void 0,i)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const i=this.getText();let a=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var p=this.getVariableTypes(),w=0;w<p.length;w++){const L=this.sourceBlock_.workspace.getVariablesOfType(p[w]);a=a.concat(L)}for(a.sort(vf.compareByName),p=[],w=0;w<a.length;w++)p[w]=[a[w].name,a[w].getId()];return p.push([t.Msg$$module$build$src$core$msg.RENAME_VARIABLE,hn]),t.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&p.push([t.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",i),an]),p}};xs("field_variable",Lt);var qt=class{constructor(i,a,p,w){this.workspace=i,this.targetWorkspace=a,this.isLabel_=w,this.onMouseUpWrapper=null,this.height=this.width=0,this.svgText=this.svgGroup=null,this.text=p.text,this.position=new vn(0,0),this.callbackKey=p.callbackKey||p.callbackkey,this.cssClass=p["web-class"]||null,this.info=p}createDom(){var i=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(i+=" "+this.cssClass),this.svgGroup=re(Ye.G,{class:i},this.workspace.getCanvas());let a;this.isLabel_||(a=re(Ye.RECT,{class:"blocklyFlyoutButtonShadow",rx:qt.BORDER_RADIUS,ry:qt.BORDER_RADIUS,x:1,y:1},this.svgGroup)),i=re(Ye.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:qt.BORDER_RADIUS,ry:qt.BORDER_RADIUS},this.svgGroup);const p=re(Ye.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var w=Xr(this.text);this.workspace.RTL&&(w+=""),p.textContent=w,this.isLabel_&&(this.svgText=p,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const L=Wt(p,"fontSize"),j=Wt(p,"fontWeight"),_e=Wt(p,"fontFamily");if(this.width=bt(p,L,j,_e),w=ze(w,L,j,_e),this.height=w.height,!this.isLabel_){this.width+=2*qt.TEXT_MARGIN_X,this.height+=2*qt.TEXT_MARGIN_Y;let We;(We=a)==null||We.setAttribute("width",String(this.width));let Jt;(Jt=a)==null||Jt.setAttribute("height",String(this.height))}return i.setAttribute("width",String(this.width)),i.setAttribute("height",String(this.height)),p.setAttribute("x",String(this.width/2)),p.setAttribute("y",String(this.height/2-w.height/2+w.baseline)),this.updateTransform(),this.onMouseUpWrapper=Ie(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(i,a){this.position.x=i,this.position.y=a,this.updateTransform()}isLabel(){return this.isLabel_}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper&&it(this.onMouseUpWrapper),this.svgGroup&&Ke(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}onMouseUp(i){(i=this.targetWorkspace.getGesture(i))&&i.cancel(),this.isLabel_&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isLabel_||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isLabel_||(i=this.targetWorkspace.getButtonCallback(this.callbackKey))&&i(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};qt.TEXT_MARGIN_X=5,qt.TEXT_MARGIN_Y=2,qt.BORDER_RADIUS=4,Ct(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var pn=class extends Xv{constructor(i,a){super(i),this.flyout_=a}getBoundingBox_(){let i;try{i=this.workspace_.getCanvas().getBBox()}catch{i={height:0,y:0,width:0,x:0}}return i}getContentMetrics(i){const a=this.getBoundingBox_();return i=i?1:this.workspace_.scale,{height:a.height*i,width:a.width*i,top:a.y*i,left:a.x*i}}getScrollMetrics(i,a,p){return a=p||this.getContentMetrics(),p=this.flyout_.MARGIN*this.workspace_.scale,i=i?this.workspace_.scale:1,{height:(a.height+2*p)/i,width:(a.width+a.left+p)/i,top:0,left:0}}},Nn;(function(i){i.BLOCK="block",i.BUTTON="button"})(Nn||(Nn={}));var dn=class extends j_{constructor(i){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,i.setMetrics=this.setMetrics_.bind(this),this.workspace_=new tp(i),this.workspace_.setMetricsManager(new pn(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=q(),this.RTL=!!i.RTL,this.toolboxPosition_=i.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(i){return this.svgGroup_=re(i,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=re(Ye.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(i){this.targetWorkspace=i,this.workspace_.targetWorkspace=i,this.workspace_.scrollbar=new Ab(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(Ie(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(Ie(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),i.getComponentManager().addComponent({component:this,weight:1,capabilities:[vl.Capability.AUTOHIDEABLE,vl.Capability.DELETE_AREA,vl.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const i of this.boundEvents)it(i);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&Ke(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(i){this.autoClose=i,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(i){!i&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}isVisible(){return this.isVisible_}setVisible(i){const a=i!==this.isVisible();this.isVisible_=i,a&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(i){const a=i!==this.containerVisible;this.containerVisible=i,a&&this.updateDisplay()}updateDisplay(){let i;i=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=i?"block":"none");let a;(a=this.workspace_.scrollbar)==null||a.setContainerVisible(i)}positionAt_(i,a,p,w){let L;(L=this.svgGroup_)==null||L.setAttribute("width",`${i}`);let j;(j=this.svgGroup_)==null||j.setAttribute("height",`${a}`),this.workspace_.setCachedParentSvgSize(i,a),this.svgGroup_&&Q(this.svgGroup_,"translate("+p+"px,"+w+"px)"),(i=this.workspace_.scrollbar)&&(i.setOrigin(p,w),i.resize(),i.hScroll&&i.hScroll.setPosition(i.hScroll.position.x,i.hScroll.position.y),i.vScroll&&i.vScroll.setPosition(i.vScroll.position.x,i.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const i of this.listeners)it(i);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(i){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof i=="string"&&(i=this.getDynamicCategoryContents(i)),this.setVisible(!0),i=St(i),i=this.createFlyoutInfo(i),$i(this.workspace_),this.layout_(i.contents,i.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(i){const a=[],p=[];this.permanentlyDisabled.length=0;const w=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const L of i){if("custom"in L){i=this.getDynamicCategoryContents(L.custom),i=St(i);const{contents:j,gaps:_e}=this.createFlyoutInfo(i);a.push(...j),p.push(..._e)}switch(L.kind.toUpperCase()){case"BLOCK":i=L;const j=this.createFlyoutBlock(i);a.push({type:Nn.BLOCK,block:j}),this.addBlockGap(i,p,w);break;case"SEP":this.addSeparatorGap(L,p,w);break;case"LABEL":i=this.createButton(L,!0),a.push({type:Nn.BUTTON,button:i}),p.push(w);break;case"BUTTON":i=this.createButton(L,!1),a.push({type:Nn.BUTTON,button:i}),p.push(w)}}return{contents:a,gaps:p}}getDynamicCategoryContents(i){if(i=this.workspace_.targetWorkspace.getToolboxCategoryCallback(i),typeof i!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return i(this.workspace_.targetWorkspace)}createButton(i,a){return new qt(this.workspace_,this.targetWorkspace,i,a)}createFlyoutBlock(i){let a;return i.blockxml?(i=typeof i.blockxml=="string"?t.textToDom$$module$build$src$core$utils$xml(i.blockxml):i.blockxml,(a=this.getRecycledBlock(i.getAttribute("type")))||(a=lo(i,this.workspace_))):(a=this.getRecycledBlock(i.type),a||(i.enabled===void 0&&(i.enabled=i.disabled!=="true"&&i.disabled!==!0),a=Ai(i,this.workspace_))),a.isEnabled()||this.permanentlyDisabled.push(a),a}getRecycledBlock(i){let a=-1;for(let p=0;p<this.recycledBlocks.length;p++)if(this.recycledBlocks[p].type===i){a=p;break}return a===-1?void 0:this.recycledBlocks.splice(a,1)[0]}addBlockGap(i,a,p){let w;i.gap?w=parseInt(String(i.gap)):i.blockxml&&(i=typeof i.blockxml=="string"?t.textToDom$$module$build$src$core$utils$xml(i.blockxml):i.blockxml,w=parseInt(i.getAttribute("gap"))),a.push(!w||isNaN(w)?p:w)}addSeparatorGap(i,a,p){i=parseInt(String(i.gap)),!isNaN(i)&&0<a.length?a[a.length-1]=i:a.push(p)}clearOldBlocks(){var i=this.workspace_.getTopBlocks(!1);for(let p=0,w;w=i[p];p++)this.blockIsRecyclable_(w)?this.recycleBlock(w):w.dispose(!1,!1);for(i=0;i<this.mats.length;i++){const p=this.mats[i];p&&(gd(p),Ke(p))}this.mats.length=0;for(let p=0,w;w=this.buttons_[p];p++)w.dispose();this.buttons_.length=0;let a;(a=this.workspace_.getPotentialVariableMap())==null||a.clear()}emptyRecycledBlocks(){for(let i=0;i<this.recycledBlocks.length;i++)this.recycledBlocks[i].dispose();this.recycledBlocks=[]}blockIsRecyclable_(i){return!1}recycleBlock(i){const a=i.getRelativeToSurfaceXY();i.moveBy(-a.x,-a.y),this.recycledBlocks.push(i)}addBlockListeners_(i,a,p){this.listeners.push(Ie(i,"pointerdown",null,this.blockMouseDown(a))),this.listeners.push(Ie(p,"pointerdown",null,this.blockMouseDown(a))),this.listeners.push(He(i,"pointerenter",a,()=>{this.targetWorkspace.isDragging()||a.addSelect()})),this.listeners.push(He(i,"pointerleave",a,()=>{this.targetWorkspace.isDragging()||a.removeSelect()})),this.listeners.push(He(p,"pointerenter",a,()=>{this.targetWorkspace.isDragging()||a.addSelect()})),this.listeners.push(He(p,"pointerleave",a,()=>{this.targetWorkspace.isDragging()||a.removeSelect()}))}blockMouseDown(i){return a=>{const p=this.targetWorkspace.getGesture(a);p&&(p.setStartBlock(i),p.handleFlyoutStart(a,this))}}onMouseDown(i){const a=this.targetWorkspace.getGesture(i);a&&a.handleFlyoutStart(i,this)}isBlockCreatable(i){return i.isEnabled()}createBlock(i){let a=null;t.disable$$module$build$src$core$events$utils();var p=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{a=this.placeNewBlock(i)}finally{t.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),i=Kl(this.targetWorkspace,p),se()){for(t.setGroup$$module$build$src$core$events$utils(!0),p=0;p<i.length;p++){const w=i[p];ce(new(ke(bo))(w))}ce(new(ke(t.CREATE$$module$build$src$core$events$utils))(a))}return this.autoClose?this.hide():this.filterForCapacity(),a}initFlyoutButton_(i,a,p){const w=i.createDom();i.moveTo(a,p),i.show(),this.listeners.push(Ie(w,"pointerdown",this,this.onMouseDown)),this.buttons_.push(i)}createRect_(i,a,p,w,L){return a=re(Ye.RECT,{"fill-opacity":0,x:a,y:p,height:w.height,width:w.width}),a.tooltip=i,Ui(a),this.workspace_.getCanvas().insertBefore(a,i.getSvgRoot()),this.rectMap_.set(i,a),this.mats[L]=a}moveRectToBlock_(i,a){const p=a.getHeightWidth();i.setAttribute("width",String(p.width)),i.setAttribute("height",String(p.height)),a=a.getRelativeToSurfaceXY(),i.setAttribute("y",String(a.y)),i.setAttribute("x",String(this.RTL?a.x-p.width:a.x))}filterForCapacity(){const i=this.workspace_.getTopBlocks(!1);for(let a=0,p;p=i[a];a++)if(this.permanentlyDisabled.indexOf(p)===-1){const w=this.targetWorkspace.isCapacityAvailable(V(p));for(;p;)p.setEnabled(w),p=p.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(i){var a=this.targetWorkspace;if(!i.getSvgRoot())throw Error("oldBlock is not rendered");const p=Ci(i);return a.setResizesEnabled(!1),a=Vn(p,a),this.positionNewBlock(i,a),a}positionNewBlock(i,a){const p=this.targetWorkspace;var w=p.getOriginOffsetInPixels(),L=this.workspace_.getOriginOffsetInPixels();i=i.getRelativeToSurfaceXY(),i.scale(this.workspace_.scale),L=vn.sum(L,i),w=vn.difference(L,w),w.scale(1/p.scale),a.moveTo(new vn(w.x,w.y))}};dn.FlyoutItemType=Nn;var Yn=class extends dn{constructor(i){super(i),this.horizontalLayout=!0}setMetrics_(i){if(this.isVisible()){var a=this.workspace_.getMetricsManager(),p=a.getScrollMetrics(),w=a.getViewMetrics();a=a.getAbsoluteMetrics(),typeof i.x=="number"&&(this.workspace_.scrollX=-(p.left+(p.width-w.width)*i.x)),this.workspace_.translate(this.workspace_.scrollX+a.left,this.workspace_.scrollY+a.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var i=this.targetWorkspace.getMetricsManager();const a=i.getAbsoluteMetrics(),p=i.getViewMetrics();i=i.getToolboxMetrics();const w=this.toolboxPosition_===mr.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?w?i.height:p.height-this.height_:w?0:p.height:w?0:p.height+a.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var i=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=i.width,this.setBackgroundPath(i.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),i=this.getX();var a=this.getY();this.positionAt_(this.width_,this.height_,i,a)}}setBackgroundPath(i,a){const p=this.toolboxPosition_===mr.TOP,w=["M 0,"+(p?0:this.CORNER_RADIUS)];p?(w.push("h",i+2*this.CORNER_RADIUS),w.push("v",a),w.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),w.push("h",-i),w.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(w.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),w.push("h",i),w.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),w.push("v",a),w.push("h",-i-2*this.CORNER_RADIUS)),w.push("z"),this.svgBackground_.setAttribute("d",w.join(" "))}scrollToStart(){let i;(i=this.workspace_.scrollbar)==null||i.setX(this.RTL?1/0:0)}wheel_(i){var a=vt(i);if(a=a.x||a.y){const p=this.workspace_.getMetricsManager(),w=p.getScrollMetrics();a=p.getViewMetrics().left-w.left+a;let L;(L=this.workspace_.scrollbar)==null||L.setX(a),Zl(),ll()}i.preventDefault(),i.stopPropagation()}layout_(i,a){this.workspace_.scale=this.targetWorkspace.scale;const p=this.MARGIN;let w=p+this.tabWidth_;this.RTL&&(i=i.reverse());for(let We=0,Jt;Jt=i[We];We++)if(Jt.type==="block"){var L=Jt.block,j=L.getDescendants(!1);for(let Tl=0,Za;Za=j[Tl];Tl++)Za.isInFlyout=!0;j=L.getSvgRoot();const jn=L.getHeightWidth();var _e=L.outputConnection?this.tabWidth_:0;_e=this.RTL?w+jn.width:w-_e,L.moveBy(_e,p),_e=this.createRect_(L,_e,p,jn,We),w+=jn.width+a[We],this.addBlockListeners_(j,L,_e)}else Jt.type==="button"&&(L=Jt.button,this.initFlyoutButton_(L,w,p),w+=L.width+a[We])}isDragTowardWorkspace(i){i=Math.atan2(i.y,i.x)/Math.PI*180;const a=this.dragAngleRange_;return i<90+a&&i>90-a||i>-90-a&&i<-90+a}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const i=this.svgGroup_.getBoundingClientRect(),a=i.top;return this.toolboxPosition_===mr.TOP?new Li(-1e9,a+i.height,-1e9,1e9):new Li(a,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let i=0;const a=this.workspace_.getTopBlocks(!1);for(let w=0,L;L=a[w];w++)i=Math.max(i,L.getHeightWidth().height);const p=this.buttons_;for(let w=0,L;L=p[w];w++)i=Math.max(i,L.height);if(i+=1.5*this.MARGIN,i*=this.workspace_.scale,i+=xa.scrollbarThickness,this.height_!==i){for(let w=0,L;L=a[w];w++)this.rectMap_.has(L)&&this.moveRectToBlock_(this.rectMap_.get(L),L);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==mr.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+i),this.height_=i,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};r(Ut.FLYOUTS_HORIZONTAL_TOOLBOX,Dl,Yn);var er=class extends dn{constructor(i){super(i)}setMetrics_(i){if(this.isVisible()){var a=this.workspace_.getMetricsManager(),p=a.getScrollMetrics(),w=a.getViewMetrics();a=a.getAbsoluteMetrics(),typeof i.y=="number"&&(this.workspace_.scrollY=-(p.top+(p.height-w.height)*i.y)),this.workspace_.translate(this.workspace_.scrollX+a.left,this.workspace_.scrollY+a.top)}}getX(){if(!this.isVisible())return 0;var i=this.targetWorkspace.getMetricsManager();const a=i.getAbsoluteMetrics(),p=i.getViewMetrics();return i=i.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===mr.LEFT?i.width:p.width-this.width_:this.toolboxPosition_===mr.LEFT?0:p.width:this.toolboxPosition_===mr.LEFT?0:p.width+a.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var i=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=i.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,i.height-2*this.CORNER_RADIUS),i=this.getX();var a=this.getY();this.positionAt_(this.width_,this.height_,i,a)}}setBackgroundPath(i,a){const p=this.toolboxPosition_===mr.RIGHT;var w=i+this.CORNER_RADIUS;w=["M "+(p?w:0)+",0"],w.push("h",p?-i:i),w.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,p?0:1,p?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),w.push("v",Math.max(0,a)),w.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,p?0:1,p?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),w.push("h",p?i:-i),w.push("z"),this.svgBackground_.setAttribute("d",w.join(" "))}scrollToStart(){let i;(i=this.workspace_.scrollbar)==null||i.setY(0)}wheel_(i){var a=vt(i);if(a.y){const p=this.workspace_.getMetricsManager(),w=p.getScrollMetrics();a=p.getViewMetrics().top-w.top+a.y;let L;(L=this.workspace_.scrollbar)==null||L.setY(a),Zl(),ll()}i.preventDefault(),i.stopPropagation()}layout_(i,a){this.workspace_.scale=this.targetWorkspace.scale;var p=this.MARGIN;const w=this.RTL?p:p+this.tabWidth_;for(let We=0,Jt;Jt=i[We];We++)if(Jt.type==="block"){var L=Jt.block,j=L.getDescendants(!1);for(let Tl=0,Za;Za=j[Tl];Tl++)Za.isInFlyout=!0;j=L.getSvgRoot();const jn=L.getHeightWidth();var _e=L.outputConnection?w-this.tabWidth_:w;L.moveBy(_e,p),_e=this.createRect_(L,this.RTL?_e-jn.width:_e,p,jn,We),this.addBlockListeners_(j,L,_e),p+=jn.height+a[We]}else Jt.type==="button"&&(L=Jt.button,this.initFlyoutButton_(L,w,p),p+=L.height+a[We])}isDragTowardWorkspace(i){i=Math.atan2(i.y,i.x)/Math.PI*180;const a=this.dragAngleRange_;return i<a&&i>-a||i<-180+a||i>180-a}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const i=this.svgGroup_.getBoundingClientRect(),a=i.left;return this.toolboxPosition_===mr.LEFT?new Li(-1e9,1e9,-1e9,a+i.width):new Li(-1e9,1e9,a,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let i=0;var a=this.workspace_.getTopBlocks(!1);for(let w=0,L;L=a[w];w++){var p=L.getHeightWidth().width;L.outputConnection&&(p-=this.tabWidth_),i=Math.max(i,p)}for(let w=0,L;L=this.buttons_[w];w++)i=Math.max(i,L.width);if(i+=1.5*this.MARGIN+this.tabWidth_,i*=this.workspace_.scale,i+=xa.scrollbarThickness,this.width_!==i){for(let w=0,L;L=a[w];w++){if(this.RTL){p=L.getRelativeToSurfaceXY().x;let j=i/this.workspace_.scale-this.MARGIN;L.outputConnection||(j-=this.tabWidth_),L.moveBy(j-p,0)}this.rectMap_.has(L)&&this.moveRectToBlock_(this.rectMap_.get(L),L)}if(this.RTL)for(let w=0,L;L=this.buttons_[w];w++)a=L.getPosition().y,L.moveTo(i/this.workspace_.scale-L.width-this.MARGIN-this.tabWidth_,a);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==mr.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+i,this.targetWorkspace.scrollY),this.width_=i,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};er.registryName="verticalFlyout",r(Ut.FLYOUTS_VERTICAL_TOOLBOX,Dl,er);var ua;t.CodeGenerator$$module$build$src$core$generator=class{constructor(i){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=i,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(i){i||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),i=A());var a=[];this.init(i),i=i.getTopBlocks(!0);for(let p=0,w;w=i[p];p++){let L=this.blockToCode(w);Array.isArray(L)&&(L=L[0]),L&&(w.outputConnection&&(L=this.scrubNakedValue(L),this.STATEMENT_PREFIX&&!w.suppressPrefixSuffix&&(L=this.injectId(this.STATEMENT_PREFIX,w)+L),this.STATEMENT_SUFFIX&&!w.suppressPrefixSuffix&&(L+=this.injectId(this.STATEMENT_SUFFIX,w))),a.push(L))}return a=a.join(`
`),a=this.finish(a),a=a.replace(/^\s+\n/,""),a=a.replace(/\n\s+$/,`
`),a=a.replace(/[ \t]+\n/g,`
`)}prefixLines(i,a){return a+i.replace(/(?!\n$)\n/g,`
`+a)}allNestedComments(i){const a=[];i=i.getDescendants(!0);for(let p=0;p<i.length;p++){const w=i[p].getCommentText();w&&a.push(w)}return a.length&&a.push(""),a.join(`
`)}blockToCode(i,a){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!i)return"";if(!i.isEnabled())return a?"":this.blockToCode(i.getNextBlock());if(i.isInsertionMarker())return a?"":this.blockToCode(i.getChildren(!1)[0]);var p=this.forBlock[i.type];if(!p&&this[i.type]&&(Ee("block generator functions on CodeGenerator objects","10.0","11.0","the .forBlock[blockType] dictionary"),p=this[i.type]),typeof p!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${i.type}".`);if(p=p.call(i,i,this),Array.isArray(p)){if(!i.outputConnection)throw TypeError("Expecting string from statement block: "+i.type);return[this.scrub_(i,p[0],a),p[1]]}if(typeof p=="string")return this.STATEMENT_PREFIX&&!i.suppressPrefixSuffix&&(p=this.injectId(this.STATEMENT_PREFIX,i)+p),this.STATEMENT_SUFFIX&&!i.suppressPrefixSuffix&&(p+=this.injectId(this.STATEMENT_SUFFIX,i)),this.scrub_(i,p,a);if(p===null)return"";throw SyntaxError("Invalid code generated: "+p)}valueToCode(i,a,p){if(isNaN(p))throw TypeError("Expecting valid order from block: "+i.type);var w=i.getInputTargetBlock(a);if(!w||(a=this.blockToCode(w),a===""))return"";if(!Array.isArray(a))throw TypeError(`Expecting tuple from value block: ${w.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(i=a[0],a=a[1],isNaN(a))throw TypeError("Expecting valid order from value block: "+w.type);if(!i)return"";w=!1;var L=Math.floor(p);const j=Math.floor(a);if(L<=j&&(L!==j||L!==0&&L!==99)){for(w=!0,L=0;L<this.ORDER_OVERRIDES.length;L++)if(this.ORDER_OVERRIDES[L][0]===p&&this.ORDER_OVERRIDES[L][1]===a){w=!1;break}}return w&&(i="("+i+")"),i}statementToCode(i,a){if(i=i.getInputTargetBlock(a),a=this.blockToCode(i),typeof a!="string")throw TypeError("Expecting code from statement block: "+(i&&i.type));return a&&(a=this.prefixLines(a,this.INDENT)),a}addLoopTrap(i,a){return this.INFINITE_LOOP_TRAP&&(i=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,a),this.INDENT)+i),this.STATEMENT_SUFFIX&&!a.suppressPrefixSuffix&&(i=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,a),this.INDENT)+i),this.STATEMENT_PREFIX&&!a.suppressPrefixSuffix&&(i+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,a),this.INDENT)),i}injectId(i,a){return a=a.id.replace(/\$/g,"$$$$"),i.replace(/%1/g,"'"+a+"'")}addReservedWords(i){this.RESERVED_WORDS_+=i+","}provideFunction_(i,a){if(!this.definitions_[i]){const p=this.nameDB_.getDistinctName(i,t.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[i]=p,Array.isArray(a)&&(a=a.join(`
`)),a=a.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,p);let w;for(;w!==a;)w=a,a=a.replace(/^(( {2})*) {2}/gm,"$1\0");a=a.replace(/\0/g,this.INDENT),this.definitions_[i]=a}return this.functionNames_[i]}getVariableName(i){return this.getName(i,t.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(i){return this.getName(i,t.NameType$$module$build$src$core$names.PROCEDURE)}getName(i,a){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(i,a)}init(i){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(i,a,p){return a}finish(i){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),i}scrubNakedValue(i){return i}},ua={},ua.CodeGenerator=t.CodeGenerator$$module$build$src$core$generator;var io=!1,Ds={};Ds.Align=t.Align$$module$build$src$core$inputs$align,Ds.DummyInput=Pp,Ds.EndRowInput=Sm,Ds.Input=rs,Ds.StatementInput=id,Ds.ValueInput=t.ValueInput$$module$build$src$core$inputs$value_input,Ds.inputTypes=t.inputTypes$$module$build$src$core$inputs$input_types;var yi="The insertion marker previewer tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Gl=class{constructor(i){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=i.workspace}previewReplacement(i,a,p){t.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=p,p.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(a)&&(a.highlight(),this.staticConn=a)}finally{t.enable$$module$build$src$core$events$utils()}}previewConnection(i,a){if(i!==this.draggedConn||a!==this.staticConn){t.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(i,a)&&(this.markerConn=this.previewMarker(i,a)),this.workspace.getRenderer().shouldHighlightConnection(a)&&a.highlight(),this.draggedConn=i,this.staticConn=a}finally{t.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(i,a){return a.type===Un.PREVIOUS_STATEMENT||a.type===Un.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof E)}previewMarker(i,a){const p=i.getSourceBlock(),w=this.createInsertionMarker(p),L=this.getMatchingConnection(p,w,i);if(!L)throw Error("Could not create insertion marker to preview connection");w.queueRender(),$i(),L.connect(a);const j={x:a.x-L.x,y:a.y-L.y},_e=L.getOffsetInBlock().clone();return Tr().then(()=>{w==null||w.positionNearConnection(L,j,_e),w==null||w.getSvgRoot().setAttribute("visibility","visible")}),L}createInsertionMarker(i){const a=this.workspace.newBlock(i.type);if(a.setInsertionMarker(!0),i.saveExtraState){var p=i.saveExtraState(!0);p&&a.loadExtraState&&a.loadExtraState(p)}else i.mutationToDom&&(p=i.mutationToDom())&&a.domToMutation&&a.domToMutation(p);for(p=0;p<i.inputList.length;p++){const w=i.inputList[p];if(w.name===Ug)continue;const L=a.inputList[p];if(!L)throw Error(yi.replace("%1","an input"));for(let j=0;j<w.fieldRow.length;j++){const _e=w.fieldRow[j],We=L.fieldRow[j];if(!We)throw Error(yi.replace("%1","a field"));We.setValue(_e.getValue())}}for(const w of a.getDescendants(!1))w.setInsertionMarker(!0);return a.setCollapsed(i.isCollapsed()),a.setInputsInline(i.getInputsInline()),a.initSvg(),a.getSvgRoot().setAttribute("visibility","hidden"),a}getMatchingConnection(i,a,p){if(i=i.getConnections_(!0),a=a.getConnections_(!0),i.length!==a.length)return null;for(let w=0;w<i.length;w++)if(i[w]===p)return a[w];return null}hidePreview(){t.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{t.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(i){const a=i.getSourceBlock(),p=a.outputConnection;let w;if((w=a.previousConnection)!=null&&w.targetConnection||p!=null&&p.targetConnection)a.unplug(!0);else{let L;(L=i.targetBlock())==null||L.unplug(!1)}a.dispose()}dispose(){this.hidePreview()}};r(Ut.CONNECTION_PREVIEWER,Dl,Gl);var Ic=class extends Bv{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(i){return super.getCSS_(i).concat([`${i} .blocklyInsertionMarker>.blocklyPathLight,`,`${i} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},q_=class{constructor(i){this.inlineSteps_=this.steps_="",this.info_=i,this.RTL_=this.info_.RTL,i=i.getRenderer(),this.constants_=i.getConstants(),this.highlightConstants_=i.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(i){this.steps_+=Hi(i.xPos,this.info_.startY);for(let a=0,p;p=i.elements[a];a++)ht.isLeftSquareCorner(p)?this.steps_+=this.highlightConstants_.START_POINT:ht.isLeftRoundedCorner(p)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):ht.isPreviousConnection(p)?this.steps_+=this.notchPaths_.pathLeft:ht.isHat(p)?this.steps_+=this.startPaths_.path(this.RTL_):ht.isSpacer(p)&&p.width!==0&&(this.steps_+=$n("H",p.xPos+p.width-this.highlightOffset));this.steps_+=$n("H",i.xPos+i.width-this.highlightOffset)}drawJaggedEdge_(i){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+$n("v",i.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(i){const a=i.getLastInput();if(this.RTL_){const p=i.height-a.connectionHeight;this.steps_+=Zs(a.xPos+a.width-this.highlightOffset,i.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+$n("v",p)}else this.steps_+=Zs(a.xPos+a.width,i.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(i){const a=i.getLastInput();if(a)if(this.RTL_){const p=i.height-2*this.insideCornerPaths_.height;this.steps_+=Zs(a.xPos,i.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+$n("v",p)+this.insideCornerPaths_.pathBottom(this.RTL_)+su(i.width-a.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Zs(a.xPos,i.yPos+i.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+su(i.width-a.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(i){const a=i.xPos+i.width-this.highlightOffset;i instanceof mb&&i.followsStatement&&(this.steps_+=$n("H",a)),this.RTL_&&(this.steps_+=$n("H",a),i.height>this.highlightOffset&&(this.steps_+=$n("V",i.yPos+i.height-this.highlightOffset)))}drawBottomRow(i){if(this.RTL_)this.steps_+=$n("V",i.baseline-this.highlightOffset);else{const a=this.info_.bottomRow.elements[0];ht.isLeftSquareCorner(a)?this.steps_+=Zs(i.xPos+this.highlightOffset,i.baseline-this.highlightOffset):ht.isLeftRoundedCorner(a)&&(this.steps_+=Zs(i.xPos,i.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var i=this.info_.outputConnection;i&&(i=i.connectionOffsetY+i.height,this.RTL_?this.steps_+=Zs(this.info_.startX,i):(this.steps_+=Zs(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=$n("V",i)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(i=this.info_.topRow,ht.isLeftRoundedCorner(i.elements[0])?this.steps_+=$n("V",this.outsideCornerPaths_.height):this.steps_+=$n("V",i.capline+this.highlightOffset))}drawInlineInput(i){const a=this.highlightOffset,p=i.xPos+i.connectionWidth;var w=i.centerline-i.height/2;const L=i.width-i.connectionWidth,j=w+a;this.RTL_?(w=i.connectionOffsetY-a,i=i.height-(i.connectionOffsetY+i.connectionHeight)+a,this.inlineSteps_+=Zs(p-a,j)+$n("v",w)+this.puzzleTabPaths_.pathDown(this.RTL_)+$n("v",i)+$n("h",L)):this.inlineSteps_+=Zs(i.xPos+i.width+a,j)+$n("v",i.height)+$n("h",-L)+Zs(p,w+i.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},Tz=class extends Fv{constructor(i,a){super(i,a),this.highlighter_=new q_(a)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const i=this.block_.pathObject;i.setPath(this.outlinePath_+`
`+this.inlinePath_),i.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&i.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(i){this.highlighter_.drawJaggedEdge_(i),super.drawJaggedEdge_(i)}drawValueInput_(i){this.highlighter_.drawValueInput(i),super.drawValueInput_(i)}drawStatementInput_(i){this.highlighter_.drawStatementInput(i),super.drawStatementInput_(i)}drawRightSideRow_(i){this.highlighter_.drawRightSideRow(i),this.outlinePath_+=$n("H",i.xPos+i.width)+$n("V",i.yPos+i.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(i){this.highlighter_.drawInlineInput(i),super.drawInlineInput_(i)}positionInlineInputConnection_(i){const a=i.centerline-i.height/2;if(i.connectionModel){let p=i.xPos+i.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(p*=-1),i.connectionModel.setOffsetInBlock(p,a+i.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(i){const a=i.getLastInput();if(a!=null&&a.connectionModel){let p=i.xPos+i.statementEdge+a.notchOffset;p=this.info_.RTL?-1*p:p+this.constants_.DARK_PATH_OFFSET,a.connectionModel.setOffsetInBlock(p,i.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(i){const a=i.getLastInput();if(a&&a.connectionModel){let p=i.xPos+i.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(p*=-1),a.connectionModel.setOffsetInBlock(p,i.yPos)}}positionNextConnection_(){const i=this.info_.bottomRow;if(i.connection){const a=i.connection,p=a.xPos;a.connectionModel.setOffsetInBlock((this.info_.RTL?-p:p)+this.constants_.DARK_PATH_OFFSET/2,i.baseline+this.constants_.DARK_PATH_OFFSET)}}},Sz=class{constructor(i){this.OFFSET=.5,this.constantProvider=i,this.START_POINT=Hi(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const i=this.constantProvider.CORNER_RADIUS,a=this.OFFSET,p=(1-Math.SQRT1_2)*(i+a)-a,w=Hi(p,p)+mi("a","0 0,0",i,Kn(-p-a,i-p)),L=mi("a","0 0,0",i+a,Kn(i+a,i+a)),j=Hi(p,-p)+mi("a","0 0,0",i+a,Kn(i-p,p+a));return{width:i+a,height:i,pathTop(_e){return _e?w:""},pathBottom(_e){return _e?L:j}}}makeOutsideCorner(){const i=this.constantProvider.CORNER_RADIUS,a=this.OFFSET,p=(1-Math.SQRT1_2)*(i-a)+a,w=Hi(p,p)+mi("a","0 0,1",i-a,Kn(i-p,-p+a)),L=Hi(a,i)+mi("a","0 0,1",i-a,Kn(i,-i+a)),j=-p,_e=Hi(p,j)+mi("a","0 0,1",i-a,Kn(-p+a,-j-i));return{height:i,topLeft(We){return We?w:L},bottomLeft(){return _e}}}makePuzzleTab(){const i=this.constantProvider.TAB_WIDTH,a=this.constantProvider.TAB_HEIGHT,p=Hi(-2,-a+3.4)+su(-.45*i,-2.1),w=$n("v",2.5)+Hi(.97*-i,2.5)+Vs("q",[Kn(.05*-i,10),Kn(.3*i,9.5)])+Hi(.67*i,-1.9)+$n("v",2.5),L=$n("v",-1.5)+Hi(-.92*i,-.5)+Vs("q",[Kn(-.19*i,-5.5),Kn(0,-11)])+Hi(.92*i,1),j=Hi(-5,a-.7)+su(.46*i,-2.1);return{width:i,height:a,pathUp(_e){return _e?p:L},pathDown(_e){return _e?w:j}}}makeNotch(){return{pathLeft:$n("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:su(5.1,2.6)+Hi(-10.2,6.8)+su(5.1,2.6),height:12,width:10.2}}makeStartHat(){const i=this.constantProvider.START_HAT.height,a=Hi(25,-8.7)+Vs("c",[Kn(29.7,-6.2),Kn(57.2,-.5),Kn(75,8.7)]),p=Vs("c",[Kn(17.8,-9.2),Kn(45.3,-14.9),Kn(75,-8.7)])+Zs(100.5,i+.5);return{path(w){return w?a:p}}}},wz=class extends fb{constructor(i,a){super(i,a),this.constants_=i,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},Ez=class extends Pv{constructor(i,a){super(i,a),this.constants_=i,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},xz=class extends L0{constructor(i,a){super(i,a),this.renderer_=i}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof id||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(i,a){this.isInline&&i instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new wz(this.constants_,i)),a.hasInlineInput=!0):i instanceof id?(a.elements.push(new Ez(this.constants_,i)),a.hasStatement=!0):i instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new G_(this.constants_,i)),a.hasExternalInput=!0):(i instanceof Pp||i instanceof Sm)&&(a.minHeight=Math.max(a.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),a.hasDummyInput=!0),this.isInline||a.align!==null||(a.align=i.align)}addElemSpacing_(){let i=!1;for(let p=0,w;w=this.rows[p];p++)w.hasExternalInput&&(i=!0);for(let p=0,w;w=this.rows[p];p++){var a=w.elements;if(w.elements=[],w.startsWithElemSpacer()&&w.elements.push(new qd(this.constants_,this.getInRowSpacing_(null,a[0]))),a.length){for(let L=0;L<a.length-1;L++){w.elements.push(a[L]);const j=this.getInRowSpacing_(a[L],a[L+1]);w.elements.push(new qd(this.constants_,j))}w.elements.push(a[a.length-1]),w.endsWithElemSpacer()&&(a=this.getInRowSpacing_(a[a.length-1],null),i&&w.hasDummyInput&&(a+=this.constants_.TAB_WIDTH),w.elements.push(new qd(this.constants_,a)))}}}getInRowSpacing_(i,a){if(!i)return a&&ht.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:a&&ht.isInlineInput(a)?this.constants_.MEDIUM_LARGE_PADDING:a&&ht.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!ht.isInput(i)&&(!a||ht.isStatementInput(a)))return ht.isField(i)&&i.isEditable?this.constants_.MEDIUM_PADDING:ht.isIcon(i)?2*this.constants_.LARGE_PADDING+1:ht.isHat(i)?this.constants_.NO_PADDING:ht.isPreviousOrNextConnection(i)?this.constants_.LARGE_PADDING:ht.isLeftRoundedCorner(i)?this.constants_.MIN_BLOCK_WIDTH:ht.isJaggedEdge(i)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(ht.isInput(i)&&!a){if(ht.isExternalInput(i))return this.constants_.NO_PADDING;if(ht.isInlineInput(i))return this.constants_.LARGE_PADDING;if(ht.isStatementInput(i))return this.constants_.NO_PADDING}if(!ht.isInput(i)&&a&&ht.isInput(a)){if(ht.isField(i)&&i.isEditable){if(ht.isInlineInput(a)||ht.isExternalInput(a))return this.constants_.SMALL_PADDING}else{if(ht.isInlineInput(a)||ht.isExternalInput(a))return this.constants_.MEDIUM_LARGE_PADDING;if(ht.isStatementInput(a))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(ht.isIcon(i)&&a&&!ht.isInput(a))return this.constants_.LARGE_PADDING;if(ht.isInlineInput(i)&&a&&ht.isField(a))return a.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(ht.isLeftSquareCorner(i)&&a){if(ht.isHat(a))return this.constants_.NO_PADDING;if(ht.isPreviousConnection(a))return a.notchOffset;if(ht.isNextConnection(a))return a.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(ht.isLeftRoundedCorner(i)&&a){if(ht.isPreviousConnection(a))return a.notchOffset-this.constants_.CORNER_RADIUS;if(ht.isNextConnection(a))return a.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return ht.isField(i)&&a&&ht.isField(a)&&i.isEditable===a.isEditable||a&&ht.isJaggedEdge(a)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(i,a){return ht.isTopRow(i)&&ht.isBottomRow(a)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:ht.isTopRow(i)||ht.isBottomRow(a)?this.constants_.NO_PADDING:i.hasExternalInput&&a.hasExternalInput?this.constants_.LARGE_PADDING:!i.hasStatement&&a.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:i.hasStatement&&a.hasStatement||!i.hasStatement&&a.hasDummyInput||i.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(i,a){if(ht.isSpacer(a))return i.yPos+a.height/2;if(ht.isBottomRow(i))return i=i.yPos+i.height-i.descenderHeight,ht.isNextConnection(a)?i+a.height/2:i-a.height/2;if(ht.isTopRow(i))return ht.isHat(a)?i.capline-a.height/2:i.capline+a.height/2;let p=i.yPos;return ht.isField(a)||ht.isIcon(a)?(p+=a.height/2,(i.hasInlineInput||i.hasStatement)&&a.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=i.height&&(p+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):p=ht.isInlineInput(a)?p+a.height/2:p+i.height/2,p}alignRowElements_(){if(this.isInline){var i=0,a=new WeakMap,p=null;for(let w=this.rows.length-1,L;L=this.rows[w];w--)a.set(L,i),ht.isInputRow(L)&&(L.hasStatement&&this.alignStatementRow_(L),p&&p.hasStatement&&L.width<p.width?a.set(L,p.width):i=L.hasStatement?L.width:Math.max(i,L.width),p=L);i=0;for(let w=0,L;L=this.rows[w];w++)L.hasStatement?i=this.getDesiredRowWidth_(L):ht.isSpacer(L)?L.width=Math.max(i,a.get(L)):(p=L.width,i=Math.max(i,a.get(L))-p,0<i&&this.addAlignmentPadding_(L,i),i=L.width)}else super.alignRowElements_()}getDesiredRowWidth_(i){return this.isInline&&i.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(i)}finalize_(){let i=0,a=0;for(let w=0,L;L=this.rows[w];w++){L.yPos=a,L.xPos=this.startX,a+=L.height,i=Math.max(i,L.widthWithConnectedBlocks);var p=a-this.topRow.ascenderHeight;L===this.bottomRow&&p<this.constants_.MIN_BLOCK_HEIGHT&&(p=this.constants_.MIN_BLOCK_HEIGHT-p,this.bottomRow.height+=p,a+=p),this.recordElemPositions_(L)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(p=this.block_.nextConnection.targetBlock())&&(i=Math.max(i,p.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=a-this.bottomRow.descenderHeight,this.widthWithChildren=i+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=a+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},$z=class extends N0{constructor(i,a,p){super(i,a,p),this.constants=p,this.colourDark="#000000",this.svgPathDark=re(Ye.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=re(Ye.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(i){this.svgPath.setAttribute("d",i),this.svgPathDark.setAttribute("d",i)}setHighlightPath(i){this.svgPathLight.setAttribute("d",i)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(i){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(i),this.svgPath.setAttribute("stroke","none")}setStyle(i){this.style=i,this.colourDark=jc("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(i){i?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(i){if(i){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(i){super.updateDisabled_(i),i&&this.svgPath.setAttribute("stroke","none")}},Cz=class extends Hv{constructor(i){super(i),this.highlightConstants=null}init(i,a){super.init(i,a),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(i,a){super.refreshDom(i,a),this.getHighlightConstants().init()}makeConstants_(){return new Ic}makeRenderInfo_(i){return new xz(this,i)}makeDrawer_(i,a){return new Tz(i,a)}makePathObject(i,a){return new $z(i,a,this.getConstants())}makeHighlightConstants_(){return new Sz(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};Oi("geras",Cz);var V0={};V0.ConstantProvider=Ic,V0.Drawer=Tz,V0.HighlightConstantProvider=Sz,V0.Highlighter=q_,V0.InlineInput=wz,V0.PathObject=$z,V0.RenderInfo=xz,V0.Renderer=Cz,V0.StatementInput=Ez;var Mz=class extends Bv{constructor(){super(),Ee("Blockly.minimalist.ConstantProvider","v10","v11","Blockly.blockRendering.ConstantProvider")}},Az=class extends Fv{constructor(i,a){super(i,a),Ee("Blockly.minimalist.Drawer","v10","v11","Blockly.blockRendering.Drawer")}},Iz=class extends L0{constructor(i,a){super(i,a),Ee("Blockly.minimalist.RenderInfo","v10","v11","Blockly.blockRendering.RenderInfo")}getRenderer(){return this.renderer_}},Rz=class extends Hv{constructor(i){super(i),Ee("Blockly.minimalist.Renderer","v10","v11","Blockly.blockRendering.Renderer")}makeConstants_(){return new Mz}makeRenderInfo_(i){return new Iz(this,i)}makeDrawer_(i,a){return new Az(i,a)}};Oi("minimalist",Rz);var PE={};PE.ConstantProvider=Mz,PE.Drawer=Az,PE.RenderInfo=Iz,PE.Renderer=Rz;var kz=class extends L0{constructor(i,a){super(i,a)}getRenderer(){return this.renderer_}addElemSpacing_(){let i=!1;for(var a=0;a<this.rows.length;a++)if(this.rows[a].hasExternalInput){i=!0;break}for(a=0;a<this.rows.length;a++){const w=this.rows[a];var p=w.elements;if(w.elements=[],w.startsWithElemSpacer()&&w.elements.push(new qd(this.constants_,this.getInRowSpacing_(null,p[0]))),p.length){for(let L=0;L<p.length-1;L++){w.elements.push(p[L]);const j=this.getInRowSpacing_(p[L],p[L+1]);w.elements.push(new qd(this.constants_,j))}w.elements.push(p[p.length-1]),w.endsWithElemSpacer()&&(p=this.getInRowSpacing_(p[p.length-1],null),i&&w.hasDummyInput&&(p+=this.constants_.TAB_WIDTH),w.elements.push(new qd(this.constants_,p)))}}}getInRowSpacing_(i,a){if(!i)return a&&ht.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:a&&ht.isInlineInput(a)?this.constants_.MEDIUM_LARGE_PADDING:a&&ht.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!ht.isInput(i)&&!a)return ht.isField(i)&&i.isEditable?this.constants_.MEDIUM_PADDING:ht.isIcon(i)?2*this.constants_.LARGE_PADDING+1:ht.isHat(i)?this.constants_.NO_PADDING:ht.isPreviousOrNextConnection(i)?this.constants_.LARGE_PADDING:ht.isLeftRoundedCorner(i)?this.constants_.MIN_BLOCK_WIDTH:ht.isJaggedEdge(i)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(ht.isInput(i)&&!a){if(ht.isExternalInput(i))return this.constants_.NO_PADDING;if(ht.isInlineInput(i))return this.constants_.LARGE_PADDING;if(ht.isStatementInput(i))return this.constants_.NO_PADDING}if(!ht.isInput(i)&&a&&ht.isInput(a)){if(ht.isField(i)&&i.isEditable){if(ht.isInlineInput(a)||ht.isExternalInput(a))return this.constants_.SMALL_PADDING}else{if(ht.isInlineInput(a)||ht.isExternalInput(a))return this.constants_.MEDIUM_LARGE_PADDING;if(ht.isStatementInput(a))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(ht.isIcon(i)&&a&&!ht.isInput(a))return this.constants_.LARGE_PADDING;if(ht.isInlineInput(i)&&a&&ht.isField(a))return a.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(ht.isLeftSquareCorner(i)&&a){if(ht.isHat(a))return this.constants_.NO_PADDING;if(ht.isPreviousConnection(a)||ht.isNextConnection(a))return a.notchOffset}return ht.isLeftRoundedCorner(i)&&a?a.notchOffset-this.constants_.CORNER_RADIUS:ht.isField(i)&&a&&ht.isField(a)&&i.isEditable===a.isEditable||a&&ht.isJaggedEdge(a)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(i,a){return ht.isTopRow(i)&&ht.isBottomRow(a)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:ht.isTopRow(i)||ht.isBottomRow(a)?this.constants_.NO_PADDING:i.hasExternalInput&&a.hasExternalInput?this.constants_.LARGE_PADDING:!i.hasStatement&&a.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:i.hasStatement&&a.hasStatement||i.hasDummyInput||a.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(i,a){if(ht.isSpacer(a))return i.yPos+a.height/2;if(ht.isBottomRow(i))return i=i.yPos+i.height-i.descenderHeight,ht.isNextConnection(a)?i+a.height/2:i-a.height/2;if(ht.isTopRow(i))return ht.isHat(a)?i.capline-a.height/2:i.capline+a.height/2;let p=i.yPos;return p=ht.isField(a)&&i.hasStatement?p+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+a.height/2):p+i.height/2}finalize_(){let i=0,a=0;for(var p=0;p<this.rows.length;p++){const L=this.rows[p];L.yPos=a,L.xPos=this.startX,a+=L.height,i=Math.max(i,L.widthWithConnectedBlocks);var w=a-this.topRow.ascenderHeight;L===this.bottomRow&&w<this.constants_.MIN_BLOCK_HEIGHT&&(w=this.constants_.MIN_BLOCK_HEIGHT-w,this.bottomRow.height+=w,a+=w),this.recordElemPositions_(L)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(p=this.block_.nextConnection.targetBlock())&&(i=Math.max(i,p.getHeightWidth().width)),this.bottomRow.baseline=a-this.bottomRow.descenderHeight,this.widthWithChildren=i+this.startX,this.height=a,this.startY=this.topRow.capline}},Oz=class extends Hv{constructor(i){super(i)}makeRenderInfo_(i){return new kz(this,i)}};Oi("thrasos",Oz);var D2={};D2.RenderInfo=kz,D2.Renderer=Oz;var Fte={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},zte={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},Ute=new zg("zelos",Fte,zte),Hte={Classic:B_,Zelos:Ute},P2=class{constructor(i,a,p){this.id_=i.toolboxitemid||ue(),this.level_=(this.parent_=p||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=i,this.parentToolbox_=a,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(i){}},Gg=class extends P2{constructor(i,a,p){super(i,a,p),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(i){if("custom"in i)this.flyoutItems_=i.custom;else if(i=i.contents)for(let a=0;a<i.length;a++){const p=i[a];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(p)}}parseCategoryDef_(i){this.name_="name"in i?Xr(i.name):"",this.colour_=this.getColour_(i),Object.assign(this.cssConfig_,i.cssconfig||i.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),ci(this.htmlDiv_,ah.TREEITEM),Cr(this.htmlDiv_,xo.SELECTED,!1),Cr(this.htmlDiv_,xo.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),ci(this.iconDom_,ah.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const i=this.labelDom_.getAttribute("id");return i&&Cr(this.htmlDiv_,xo.LABELLEDBY,i),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const i=document.createElement("div"),a=this.cssConfig_.container;return a&&Be(i,a),i}createRowContainer_(){const i=document.createElement("div");var a=this.cssConfig_.row;return a&&Be(i,a),a=`${Gg.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?i.style.paddingRight=a:i.style.paddingLeft=a,i}createRowContentsContainer_(){const i=document.createElement("div"),a=this.cssConfig_.rowcontentcontainer;return a&&Be(i,a),i}createIconDom_(){const i=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const a=this.cssConfig_.icon;a&&Be(i,a)}return i.style.display="inline-block",i}createLabelDom_(i){const a=document.createElement("span");return a.setAttribute("id",this.getId()+".label"),a.textContent=i,(i=this.cssConfig_.label)&&Be(a,i),a}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(i){i&&(i=Gg.borderWidth+"px solid "+(i||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=i:this.rowDiv_.style.borderLeft=i)}getColour_(i){const a=i.categorystyle||i.categoryStyle;if((i=i.colour)&&a)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(a)return this.getColourfromStyle_(a);if(i)return this.parseColour_(i)}return""}getColourfromStyle_(i){var a=this.workspace_.getTheme();if(i&&a){if((a=a.categoryStyles[i])&&a.colour)return this.parseColour_(a.colour);console.warn('Style "'+i+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(i){if(i=Xr(i),i==null||i==="")return"";var a=Number(i);return isNaN(a)?(a=na(i))?a:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+i),""):vc(a)}openIcon_(i){if(i){var a=this.cssConfig_.closedicon;a&&mt(i,a),(a=this.cssConfig_.openicon)&&Be(i,a)}}closeIcon_(i){if(i){var a=this.cssConfig_.openicon;a&&mt(i,a),(a=this.cssConfig_.closedicon)&&Be(i,a)}}setVisible_(i){this.htmlDiv_.style.display=i?"block":"none",this.isHidden_=!i,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let i=this;for(;i.getParent();)if(i=i.getParent(),!i.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(i){}setSelected(i){if(this.rowDiv_){var a=this.cssConfig_.selected;if(i){const p=this.parseColour_(Gg.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||p,a&&Be(this.rowDiv_,a)}else this.rowDiv_.style.backgroundColor="",a&&yt(this.rowDiv_,a);Cr(this.htmlDiv_,xo.SELECTED,i)}}setDisabled(i){this.isDisabled_=i,this.getDiv().setAttribute("disabled",`${i}`),i?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(i){this.flyoutItems_=[],this.toolboxItemDef_=typeof i=="string"?{kind:this.toolboxItemDef_.kind,custom:i,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:St(i),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){Ke(this.htmlDiv_)}};Gg.registrationName="category",Gg.nestedPadding=19,Gg.borderWidth=8,Gg.defaultBackgroundColour="#57e",Ct(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),r(Ut.TOOLBOX_ITEM,Gg.registrationName,Gg);var BE=class extends P2{constructor(i,a){super(i,a),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,i.cssconfig||i.cssConfig)}init(){this.createDom_()}createDom_(){const i=document.createElement("div"),a=this.cssConfig_.container;return a&&Be(i,a),this.htmlDiv_=i}getDiv(){return this.htmlDiv_}dispose(){Ke(this.htmlDiv_)}};BE.registrationName="sep",Ct(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),r(Ut.TOOLBOX_ITEM,BE.registrationName,BE);var VT=class extends Gg{constructor(i,a,p){super(i,a,p),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const i=super.makeDefaultCssConfig_();return i.contents="blocklyToolboxContents",i}parseContents_(i){if("custom"in i)this.flyoutItems_=i.custom;else{const a=i.contents;if(a){this.flyoutItems_=[],i=!0;for(let p=0;p<a.length;p++){const w=a[p];!u(Ut.TOOLBOX_ITEM,w.kind)||w.kind.toLowerCase()===BE.registrationName&&i?(this.flyoutItems_.push(w),i=!0):(this.createToolboxItem_(w),i=!1)}}}}createToolboxItem_(i){let a=i.kind;a.toUpperCase()==="CATEGORY"&&ir(i)&&(a=VT.registrationName),i=new(h(Ut.TOOLBOX_ITEM,a))(i,this.parentToolbox_,this),this.toolboxItems_.push(i)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const i=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(i),ci(this.subcategoriesDiv_,ah.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),Cr(this.htmlDiv_,xo.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const i=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const a=this.cssConfig_.icon;a&&Be(i,a),i.style.visibility="visible"}return i.style.display="inline-block",i}createSubCategoriesDom_(i){const a=document.createElement("div");a.style.display="none";var p=this.cssConfig_.contents;for(p&&Be(a,p),p=0;p<i.length;p++){const w=i[p];w.init();const L=w.getDiv();if(a.appendChild(L),w.getClickTarget){let j;(j=w.getClickTarget())==null||j.setAttribute("id",w.getId())}}return a}setExpanded(i){if(this.expanded_!==i){if(this.expanded_=i)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let a;(a=this.parentToolbox_.getFlyout())==null||a.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}Cr(this.htmlDiv_,xo.EXPANDED,i),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(i){this.htmlDiv_.style.display=i?"block":"none";const a=this.getChildToolboxItems();for(let p=0;p<a.length;p++)a[p].setVisible_(i);this.isHidden_=!i,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(i){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};VT.registrationName="collapsibleCategory",r(Ut.TOOLBOX_ITEM,VT.registrationName,VT);var Lz=class extends j_{constructor(i){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=i,this.toolboxDef_=i.options.languageTree||{contents:[]},this.horizontalLayout_=i.options.horizontalLayout,this.RTL=i.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=i.options.toolboxPosition}onShortcut(i){return!1}init(){var i=this.workspace_;const a=i.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),Qe(this.flyout_.createDom("svg"),a),this.setVisible(!0),this.flyout_.init(i),this.render(this.toolboxDef_),i=i.getThemeManager(),i.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),i.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[vl.Capability.AUTOHIDEABLE,vl.Capability.DELETE_AREA,vl.Capability.DRAG_TARGET]})}createDom_(i){i=i.getParentSvg();const a=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,ci(this.contentsDiv_,ah.TREE),a.appendChild(this.contentsDiv_),i.parentNode.insertBefore(a,i),this.attachEvents_(a,this.contentsDiv_),a}createContainer_(){const i=document.createElement("div");return i.setAttribute("layout",this.isHorizontal()?"h":"v"),Be(i,"blocklyToolboxDiv"),Be(i,"blocklyNonSelectable"),i.setAttribute("dir",this.RTL?"RTL":"LTR"),i}createContentsContainer_(){const i=document.createElement("div");return Be(i,"blocklyToolboxContents"),this.isHorizontal()&&(i.style.flexDirection="row"),i}attachEvents_(i,a){i=Ie(i,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(i),a=Ie(a,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(a)}onClick_(i){if(It(i)||i.target===this.HtmlDiv)A().hideChaff(!1);else{var a=i.target.getAttribute("id");a&&(a=this.getToolboxItemById(a),a.isSelectable()&&(this.setSelectedItem(a),a.onClick(i))),A().hideChaff(!0)}et()}onKeyDown_(i){let a=!1;switch(i.key){case"ArrowDown":a=this.selectNext_();break;case"ArrowUp":a=this.selectPrevious_();break;case"ArrowLeft":a=this.selectParent_();break;case"ArrowRight":a=this.selectChild_();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),a=!0);break;default:a=!1}!a&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(a=this.selectedItem_.onKeyDown(i)),a&&i.preventDefault()}createFlyout_(){const i=this.workspace_,a=new Gi({parentWorkspace:i,rtl:i.RTL,oneBasedIndex:i.options.oneBasedIndex,horizontalLayout:i.horizontalLayout,renderer:i.options.renderer,rendererOverrides:i.options.rendererOverrides,move:{scrollbars:!0}});return a.toolboxPosition=i.options.toolboxPosition,new(i.horizontalLayout?y(Ut.FLYOUTS_HORIZONTAL_TOOLBOX,i.options,!0):y(Ut.FLYOUTS_VERTICAL_TOOLBOX,i.options,!0))(a)}render(i){this.toolboxDef_=i;for(let a=0;a<this.contents_.length;a++){const p=this.contents_[a];p&&p.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(i.contents),this.position(),this.handleToolboxItemResize()}renderContents_(i){const a=document.createDocumentFragment();for(let p=0;p<i.length;p++)this.createToolboxItem_(i[p],a);this.contentsDiv_.appendChild(a)}createToolboxItem_(i,a){var p=i.kind;p.toUpperCase()==="CATEGORY"&&ir(i)&&(p=VT.registrationName),(p=h(Ut.TOOLBOX_ITEM,p.toLowerCase()))&&(i=new p(i,this),i.init(),this.addToolboxItem_(i),(p=i.getDiv())&&a.appendChild(p),i.getClickTarget()&&i.getClickTarget().setAttribute("id",i.getId()))}addToolboxItem_(i){if(this.contents_.push(i),this.contentMap_[i.getId()]=i,i.isCollapsible()){i=i.getChildToolboxItems();for(let a=0;a<i.length;a++)this.addToolboxItem_(i[a])}}getToolboxItems(){return this.contents_}addStyle(i){i&&this.HtmlDiv&&Be(this.HtmlDiv,i)}removeStyle(i){i&&this.HtmlDiv&&yt(this.HtmlDiv,i)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var i=this.HtmlDiv.getBoundingClientRect();const a=i.top,p=a+i.height,w=i.left;return i=w+i.width,this.toolboxPosition===mr.TOP?new Li(-1e7,p,-1e7,1e7):this.toolboxPosition===mr.BOTTOM?new Li(a,1e7,-1e7,1e7):this.toolboxPosition===mr.LEFT?new Li(-1e7,1e7,-1e7,i):new Li(-1e7,1e7,w,1e7)}wouldDelete(i,a){return i instanceof Bp?this.updateWouldDelete_(!i.getParent()&&i.isDeletable()):this.updateWouldDelete_(i.isDeletable()),this.wouldDelete_}onDragEnter(i){this.updateCursorDeleteStyle_(!0)}onDragExit(i){this.updateCursorDeleteStyle_(!1)}onDrop(i){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(i){i!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=i,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(i){const a=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";i?this.addStyle(a):this.removeStyle(a)}getToolboxItemById(i){return this.contentMap_[i]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const i=this.workspace_.getMetrics(),a=this.HtmlDiv;a&&(this.horizontalLayout_?(a.style.left="0",a.style.height="auto",a.style.width="100%",this.height_=a.offsetHeight,this.width_=i.viewWidth,this.toolboxPosition===mr.TOP?a.style.top="0":a.style.bottom="0"):(this.toolboxPosition===mr.RIGHT?a.style.right="0":a.style.left="0",a.style.height="100%",this.width_=a.offsetWidth,this.height_=i.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const i=this.workspace_,a=this.HtmlDiv.getBoundingClientRect();i.translate(this.toolboxPosition===mr.LEFT?i.scrollX+a.width:i.scrollX,this.toolboxPosition===mr.TOP?i.scrollY+a.height:i.scrollY),H(i)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let i=0;i<this.contents_.length;i++){const a=this.contents_[i];a.refreshTheme&&a.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(i){this.isVisible_!==i&&(this.HtmlDiv.style.display=i?"block":"none",this.isVisible_=i,this.workspace_.recordDragTargets())}autoHide(i){!i&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(i){const a=this.selectedItem_;!i&&!a||i&&!fn(i)||(this.shouldDeselectItem_(a,i)&&a!==null&&this.deselectItem_(a),this.shouldSelectItem_(a,i)&&i!==null&&this.selectItem_(a,i),this.updateFlyout_(a,i),this.fireSelectEvent_(a,i))}shouldDeselectItem_(i,a){return i!==null&&(!i.isCollapsible()||i!==a)}shouldSelectItem_(i,a){return a!==null&&a!==i}deselectItem_(i){this.selectedItem_=null,this.previouslySelectedItem_=i,i.setSelected(!1),Cr(this.contentsDiv_,xo.ACTIVEDESCENDANT,"")}selectItem_(i,a){this.selectedItem_=a,this.previouslySelectedItem_=i,a.setSelected(!0),Cr(this.contentsDiv_,xo.ACTIVEDESCENDANT,a.getId())}selectItemByPosition(i){-1<i&&i<this.contents_.length&&(i=this.contents_[i],i.isSelectable()&&this.setSelectedItem(i))}updateFlyout_(i,a){a&&(i!==a||a.isCollapsible())&&a.getContents().length?(this.flyout_.show(a.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(i,a){const p=i&&i.getName();let w=a&&a.getName();i===a&&(w=null),i=new(ke(Ka))(p,w,this.workspace_.id),ce(i)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const i=this.selectedItem_;return i.isExpanded()?this.selectNext_():i.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let i=this.contents_.indexOf(this.selectedItem_)+1;if(-1<i&&i<this.contents_.length){let a=this.contents_[i];for(;a&&!a.isSelectable();)a=this.contents_[++i];if(a&&a.isSelectable())return this.setSelectedItem(a),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let i=this.contents_.indexOf(this.selectedItem_)-1;if(-1<i&&i<this.contents_.length){let a=this.contents_[i];for(;a&&!a.isSelectable();)a=this.contents_[--i];if(a&&a.isSelectable())return this.setSelectedItem(a),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var i=0;i<this.contents_.length;i++)this.contents_[i].dispose();for(i=0;i<this.boundEvents_.length;i++)it(this.boundEvents_[i]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),Ke(this.HtmlDiv))}};Ct(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),r(Ut.TOOLBOX,Dl,Lz);var Gte="10.4.3",Wte=t.Align$$module$build$src$core$inputs$align.LEFT,Vte=t.Align$$module$build$src$core$inputs$align.CENTRE,jte=t.Align$$module$build$src$core$inputs$align.RIGHT,Yte=Un.INPUT_VALUE,Xte=Un.OUTPUT_VALUE,Kte=Un.NEXT_STATEMENT,Jte=Un.PREVIOUS_STATEMENT,qte=t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY,Qte=mr.TOP,Zte=mr.BOTTOM,ene=mr.LEFT,tne=mr.RIGHT;Gv.prototype.newBlock=function(i,a){return new D0(this,i,a)},tp.prototype.newBlock=function(i,a){return new Bp(this,i,a)},tp.newTrashcan=function(i){return new NT(i)},Ul.prototype.showContextMenu=function(i){if(!this.workspace.options.readOnly){var a=[];this.isDeletable()&&this.isMovable()&&(a.push(Uh(this)),a.push(tu(this))),Vu(i,a,this.RTL)}},_m.prototype.newWorkspaceSvg=function(i){return new tp(i)},t.Names$$module$build$src$core$names.prototype.populateProcedures=function(i){i=Eh(i),i=i[0].concat(i[1]);for(let a=0;a<i.length;a++)this.getName(i[a][0],t.Names$$module$build$src$core$names.NameType.PROCEDURE)};var nne=Un,Bt={ALIGN_CENTRE:Vte,ALIGN_LEFT:Wte,ALIGN_RIGHT:jte};return Bt.ASTNode=tn,Bt.BasicCursor=Wv,Bt.Block=D0,Bt.BlockDragger=G0,Bt.BlockSvg=Bp,Bt.Blocks=Kr,Bt.Bubble=As,Bt.BubbleDragger=Je,Bt.COLLAPSED_FIELD_NAME=W_,Bt.COLLAPSED_INPUT_NAME=Ug,Bt.COLLAPSE_CHARS=ut,Bt.CodeGenerator=t.CodeGenerator$$module$build$src$core$generator,Bt.CollapsibleToolboxCategory=VT,Bt.ComponentManager=vl,Bt.Connection=fs,Bt.ConnectionChecker=V_,Bt.ConnectionDB=oh,Bt.ConnectionType=Un,Bt.ContextMenu=Vd,Bt.ContextMenuItems=G,Bt.ContextMenuRegistry=Ni,Bt.Css=hs,Bt.Cursor=wb,Bt.DELETE_VARIABLE_ID=an,Bt.DRAG_STACK=Dt,Bt.DUMMY_INPUT=qte,Bt.DeleteArea=j_,Bt.DragTarget=LT,Bt.DropDownDiv=T,Bt.Events=Qn,Bt.Extensions=Xd,Bt.Field=Wi,Bt.FieldAngle=J,Bt.FieldCheckbox=ve,Bt.FieldColour=xe,Bt.FieldDropdown=Ih,Bt.FieldImage=Hg,Bt.FieldLabel=wi,Bt.FieldLabelSerializable=nt,Bt.FieldMultilineInput=rt,Bt.FieldNumber=dt,Bt.FieldTextInput=W0,Bt.FieldVariable=Lt,Bt.Flyout=dn,Bt.FlyoutButton=qt,Bt.FlyoutMetricsManager=pn,Bt.Generator=t.CodeGenerator$$module$build$src$core$generator,Bt.Gesture=vm,Bt.Grid=lb,Bt.HorizontalFlyout=Yn,Bt.INPUT_VALUE=Yte,Bt.Input=rs,Bt.InsertionMarkerManager=Sf,Bt.InsertionMarkerPreviewer=Gl,Bt.Marker=kT,Bt.MarkerManager=Ca,Bt.Menu=Dg,Bt.MenuItem=Yf,Bt.MetricsManager=Xv,Bt.Msg=t.Msg$$module$build$src$core$msg,Bt.NEXT_STATEMENT=Kte,Bt.Names=t.Names$$module$build$src$core$names,Bt.OPPOSITE_TYPE=en,Bt.OUTPUT_VALUE=Xte,Bt.Options=Gi,Bt.PREVIOUS_STATEMENT=Jte,Bt.PROCEDURE_CATEGORY_NAME=k0,Bt.Procedures=Ji,Bt.RENAME_VARIABLE_ID=hn,Bt.RenderedConnection=sd,Bt.Scrollbar=xa,Bt.ScrollbarPair=Ab,Bt.ShortcutItems=zp,Bt.ShortcutRegistry=qi,Bt.TOOLBOX_AT_BOTTOM=Zte,Bt.TOOLBOX_AT_LEFT=ene,Bt.TOOLBOX_AT_RIGHT=tne,Bt.TOOLBOX_AT_TOP=Qte,Bt.TabNavigateCursor=OT,Bt.Theme=zg,Bt.ThemeManager=IT,Bt.Themes=Hte,Bt.Toolbox=Lz,Bt.ToolboxCategory=Gg,Bt.ToolboxItem=P2,Bt.ToolboxSeparator=BE,Bt.Tooltip=jd,Bt.Touch=xt,Bt.Trashcan=NT,Bt.UnattachedFieldError=No,Bt.VARIABLE_CATEGORY_NAME=Lg,Bt.VARIABLE_DYNAMIC_CATEGORY_NAME=vb,Bt.VERSION=Gte,Bt.VariableMap=bb,Bt.VariableModel=vf,Bt.Variables=bl,Bt.VariablesDynamic=wm,Bt.VerticalFlyout=er,Bt.WidgetDiv=yf,Bt.Workspace=Gv,Bt.WorkspaceAudio=RT,Bt.WorkspaceComment=sh,Bt.WorkspaceCommentSvg=Ul,Bt.WorkspaceDragger=_T,Bt.WorkspaceSvg=tp,Bt.Xml=oa,Bt.ZoomControls=b0,Bt.blockAnimations=Y,Bt.blockRendering=Ns,Bt.browserEvents=nh,Bt.bubbles=Em,Bt.bumpObjects=K_,Bt.clipboard=hm,Bt.common=yo,Bt.config=t.config$$module$build$src$core$config,Bt.connectionTypes=nne,Bt.constants=AE,Bt.defineBlocksWithJsonArray=Z,Bt.dialog=fu,Bt.fieldRegistry=I0,Bt.geras=V0,Bt.getMainWorkspace=A,Bt.getSelected=O,Bt.hasBubble=iu,Bt.hideChaff=qc,Bt.icons=An,Bt.inject=ec,Bt.inputTypes=t.inputTypes$$module$build$src$core$inputs$input_types,Bt.inputs=Ds,Bt.isCopyable=Ll,Bt.isIcon=Xa,Bt.isObservable=X,Bt.isPaster=js,Bt.isSerializable=$r,Bt.isVariableBackedParameterModel=Us,Bt.minimalist=PE,Bt.procedures=Ji,Bt.registry=ml,Bt.renderManagement=Wd,Bt.serialization=DE,Bt.setLocale=Ap,Bt.setParentContainer=U,Bt.svgResize=H,Bt.thrasos=D2,Bt.uiPosition=sm,Bt.utils=Qa,Bt.zelos=N,Object.defineProperties(Bt,{HSV_SATURATION:{get:function(){return Ee("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.getHsvSaturation()"),Ku()},set:function(i){Ee("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.setHsvSaturation()"),Ju(i)}},HSV_VALUE:{get:function(){return Ee("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.getHsvValue()"),wh()},set:function(i){Ee("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.setHsvValue()"),ul(i)}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:zl}),Bt.__namespace__=t,Bt})}(pO)),pO.exports}var KU;function Iie(){return KU||(KU=1,function(n,e){(function(t,r){n.exports=r(VF())})(jl,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})}(fO)),fO.exports}var JU;function jF(){return JU||(JU=1,function(n,e){(function(t,r){n.exports=r(Iie())})(jl,function(t){return t})}(dO)),dO.exports}var mO={exports:{}},qU;function Rie(){return qU||(qU=1,function(n,e){(function(t,r){n.exports=r()})(jl,function(){var t=t||{Msg:Object.create(null)};return t.Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DIALOG_CANCEL="Cancel",t.Msg.DIALOG_OK="OK",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1  %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg})}(mO)),mO.exports}var gO={exports:{}},vO={exports:{}},QU;function kie(){return QU||(QU=1,function(n,e){(function(t,r){n.exports=r(VF())})(jl,function(t){var r=t.__namespace__,s=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),o={customContextMenu:function(Q){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(me={text:r.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:l(this)},Re=this.getField("VAR").getText(),Re={text:r.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",Re),enabled:!0,callback:u(this)},Q.unshift(me),Q.unshift(Re));else{if(this.type==="variables_get_dynamic")var te="variables_set_dynamic",me=r.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else te="variables_get_dynamic",me=r.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var Re=this.getField("VAR");te={type:te,fields:{VAR:Re.saveState(!0)}},Q.push({enabled:0<this.workspace.remainingCapacity(),text:me.replace("%1",Re.getText()),callback:r.callbackFactory$$module$build$src$core$contextmenu(this,te)})}},onchange:function(Q){Q=this.getFieldValue("VAR"),Q=r.getVariable$$module$build$src$core$variables(this.workspace,Q),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(Q.type):this.getInput("VALUE").connection.setCheck(Q.type)}},l=function(Q){return function(){const te=Q.workspace,me=Q.getField("VAR").getVariable();r.renameVariable$$module$build$src$core$variables(te,me)}},u=function(Q){return function(){const te=Q.workspace,me=Q.getField("VAR").getVariable();te.deleteVariableById(me.getId()),te.refreshToolboxSelection()}};r.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",o),r.defineBlocks$$module$build$src$core$common(s);var h={blocks:s},f=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),g={customContextMenu:function(Q){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(me={text:r.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:y(this)},Re=this.getField("VAR").getText(),Re={text:r.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",Re),enabled:!0,callback:b(this)},Q.unshift(me),Q.unshift(Re));else{if(this.type==="variables_get")var te="variables_set",me=r.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else te="variables_get",me=r.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var Re=this.getField("VAR");te={type:te,fields:{VAR:Re.saveState(!0)}},Q.push({enabled:0<this.workspace.remainingCapacity(),text:me.replace("%1",Re.getText()),callback:r.callbackFactory$$module$build$src$core$contextmenu(this,te)})}}},y=function(Q){return function(){const te=Q.workspace,me=Q.getField("VAR").getVariable();r.renameVariable$$module$build$src$core$variables(te,me)}},b=function(Q){return function(){const te=Q.workspace,me=Q.getField("VAR").getVariable();te.deleteVariableById(me.getId()),te.refreshToolboxSelection()}};r.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",g),r.defineBlocks$$module$build$src$core$common(f);var S={blocks:f},C=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:""},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),M={init:function(){this.WHERE_OPTIONS_1=[[r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");var te=this.getInput("AT1")instanceof r.ValueInput$$module$build$src$core$inputs$value_input;return Q.setAttribute("at1",`${te}`),te=this.getInput("AT2")instanceof r.ValueInput$$module$build$src$core$inputs$value_input,Q.setAttribute("at2",`${te}`),Q},domToMutation:function(Q){const te=Q.getAttribute("at1")==="true";Q=Q.getAttribute("at2")==="true",this.updateAt_(1,te),this.updateAt_(2,Q)},updateAt_:function(Q,te){this.removeInput("AT"+Q),this.removeInput("ORDINAL"+Q,!0),te?(this.appendValueInput("AT"+Q).setCheck("Number"),r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+Q).appendField(r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+Q),Q===2&&r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(r.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL));const me=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+Q]});me.setValidator(function(Re){const Fe=Re==="FROM_START"||Re==="FROM_END";if(Fe!==te){const bt=this.getSourceBlock();return bt.updateAt_(Q,Fe),bt.setFieldValue(Re,"WHERE"+Q),null}}),this.getInput("AT"+Q).appendField(me,"WHERE"+Q),Q===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}};C.text_getSubstring=M,C.text_changeCase={init:function(){const Q=[[r.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[r.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[r.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(r.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(r.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},C.text_trim={init:function(){const Q=[[r.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[r.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[r.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(r.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(r.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},C.text_print={init:function(){this.jsonInit({message0:r.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:r.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:r.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var A={updateType_:function(Q){this.outputConnection.setCheck(Q==="NUMBER"?"Number":"String")},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("type",this.getFieldValue("TYPE")),Q},domToMutation:function(Q){this.updateType_(Q.getAttribute("type"))}};C.text_prompt_ext=Object.assign({},A,{init:function(){var Q=[[r.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[r.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(r.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),Q=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),Q.setValidator(te=>{this.updateType_(te)}),this.appendValueInput("TEXT").appendField(Q,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?r.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:r.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});var k=Object.assign({},A,{init:function(){this.mixin(O);var Q=[[r.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[r.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(r.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),Q=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),Q.setValidator(te=>{this.updateType_(te)}),this.appendDummyInput().appendField(Q,"TYPE").appendField(this.newQuote_(!0)).appendField(r.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?r.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:r.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});C.text_prompt=k,C.text_count={init:function(){this.jsonInit({message0:r.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:r.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:r.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},C.text_replace={init:function(){this.jsonInit({message0:r.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:r.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:r.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},C.text_reverse={init:function(){this.jsonInit({message0:r.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:r.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:r.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var O={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(Q){for(let te=0,me;me=this.inputList[te];te++)for(let Re=0,Fe;Fe=me.fieldRow[Re];Re++)if(Q===Fe.name){me.insertFieldAt(Re,this.newQuote_(!0)),me.insertFieldAt(Re+2,this.newQuote_(!1));return}console.warn('field named "'+Q+'" not found in '+this.toDevString())},newQuote_:function(Q){return Q=this.RTL?!Q:Q,r.fromJson$$module$build$src$core$field_registry({type:"field_image",src:Q?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:Q?"":""})}},P=function(){this.mixin(O),this.quoteField_("TEXT")},D={itemCount_:0,mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("items",`${this.itemCount_}`),Q},domToMutation:function(Q){this.itemCount_=parseInt(Q.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(Q){this.itemCount_=Q.itemCount,this.updateShape_()},decompose:function(Q){const te=Q.newBlock("text_create_join_container");te.initSvg();let me=te.getInput("STACK").connection;for(let Re=0;Re<this.itemCount_;Re++){const Fe=Q.newBlock("text_create_join_item");Fe.initSvg(),me.connect(Fe.previousConnection),me=Fe.nextConnection}return te},compose:function(Q){var te=Q.getInputTargetBlock("STACK");for(Q=[];te;)te.isInsertionMarker()||Q.push(te.valueConnection_),te=te.getNextBlock();for(te=0;te<this.itemCount_;te++){const me=this.getInput("ADD"+te).connection.targetConnection;me&&Q.indexOf(me)===-1&&me.disconnect()}for(this.itemCount_=Q.length,this.updateShape_(),te=0;te<this.itemCount_;te++){let me;(me=Q[te])==null||me.reconnect(this,"ADD"+te)}},saveConnections:function(Q){Q=Q.getInputTargetBlock("STACK");let te=0;for(;Q;){if(Q.isInsertionMarker()){Q=Q.getNextBlock();continue}const me=this.getInput("ADD"+te);Q.valueConnection_=me&&me.connection.targetConnection,Q=Q.getNextBlock(),te++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var Q=0;Q<this.itemCount_;Q++)if(!this.getInput("ADD"+Q)){const te=this.appendValueInput("ADD"+Q).setAlign(r.Align$$module$build$src$core$inputs$align.RIGHT);Q===0&&te.appendField(r.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(Q=this.itemCount_;this.getInput("ADD"+Q);Q++)this.removeInput("ADD"+Q)}},U=function(){this.mixin(O),this.itemCount_=2,this.updateShape_(),this.setMutator(new r.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};r.register$$module$build$src$core$extensions("text_append_tooltip",r.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var H=function(){this.setTooltip(()=>r.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},V={isAt_:!1,mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("at",`${this.isAt_}`),Q},domToMutation:function(Q){Q=Q.getAttribute("at")!=="false",this.updateAt_(Q)},updateAt_:function(Q){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),Q&&(this.appendValueInput("AT").setCheck("Number"),r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),r.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(r.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=Q}},z=function(){this.getField("WHERE").setValidator(function(Q){Q=Q==="FROM_START"||Q==="FROM_END";const te=this.getSourceBlock();Q!==te.isAt_&&te.updateAt_(Q)}),this.updateAt_(!0),this.setTooltip(()=>{var Q=this.getFieldValue("WHERE");let te=r.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(Q==="FROM_START"||Q==="FROM_END")&&(Q=Q==="FROM_START"?r.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:r.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(te+="  "+Q.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),te})};r.register$$module$build$src$core$extensions("text_indexOf_tooltip",H),r.register$$module$build$src$core$extensions("text_quotes",P),r.registerMixin$$module$build$src$core$extensions("quote_image_mixin",O),r.registerMutator$$module$build$src$core$extensions("text_join_mutator",D,U),r.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",V,z),r.defineBlocks$$module$build$src$core$common(C);var Z={blocks:C},oe={},ue={setStatements_:function(Q){this.hasStatements_!==Q&&(Q?(this.appendStatementInput("STACK").appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=Q)},updateParams_:function(){let Q="";this.arguments_.length&&(Q=r.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),r.disable$$module$build$src$core$events$utils();try{this.setFieldValue(Q,"PARAMS")}finally{r.enable$$module$build$src$core$events$utils()}},mutationToDom:function(Q){const te=r.createElement$$module$build$src$core$utils$xml("mutation");Q&&te.setAttribute("name",this.getFieldValue("NAME"));for(let me=0;me<this.argumentVarModels_.length;me++){const Re=r.createElement$$module$build$src$core$utils$xml("arg"),Fe=this.argumentVarModels_[me];Re.setAttribute("name",Fe.name),Re.setAttribute("varid",Fe.getId()),Q&&this.paramIds_&&Re.setAttribute("paramId",this.paramIds_[me]),te.appendChild(Re)}return this.hasStatements_||te.setAttribute("statements","false"),te},domToMutation:function(Q){this.arguments_=[],this.argumentVarModels_=[];for(let me=0,Re;Re=Q.childNodes[me];me++)if(Re.nodeName.toLowerCase()==="arg"){var te=Re;const Fe=te.getAttribute("name");te=te.getAttribute("varid")||te.getAttribute("varId"),this.arguments_.push(Fe),te=r.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,te,Fe,""),te!==null?this.argumentVarModels_.push(te):console.log(`Failed to create a variable named "${Fe}", ignoring.`)}this.updateParams_(),r.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(Q.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const Q=Object.create(null);if(this.argumentVarModels_.length){Q.params=[];for(let te=0;te<this.argumentVarModels_.length;te++)Q.params.push({name:this.argumentVarModels_[te].name,id:this.argumentVarModels_[te].getId()})}return this.hasStatements_||(Q.hasStatements=!1),Q},loadExtraState:function(Q){if(this.arguments_=[],this.argumentVarModels_=[],Q.params)for(let me=0;me<Q.params.length;me++){var te=Q.params[me];te=r.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,te.id,te.name,""),this.arguments_.push(te.name),this.argumentVarModels_.push(te)}this.updateParams_(),r.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(Q.hasStatements!==!1)},decompose:function(Q){const te=r.createElement$$module$build$src$core$utils$xml("block");te.setAttribute("type","procedures_mutatorcontainer");var me=r.createElement$$module$build$src$core$utils$xml("statement");me.setAttribute("name","STACK"),te.appendChild(me);for(let Fe=0;Fe<this.arguments_.length;Fe++){const bt=r.createElement$$module$build$src$core$utils$xml("block");bt.setAttribute("type","procedures_mutatorarg");var Re=r.createElement$$module$build$src$core$utils$xml("field");Re.setAttribute("name","NAME");const ze=r.createTextNode$$module$build$src$core$utils$xml(this.arguments_[Fe]);Re.appendChild(ze),bt.appendChild(Re),Re=r.createElement$$module$build$src$core$utils$xml("next"),bt.appendChild(Re),me.appendChild(bt),me=Re}return Q=r.domToBlock$$module$build$src$core$xml(te,Q),this.type==="procedures_defreturn"?Q.setFieldValue(this.hasStatements_,"STATEMENTS"):Q.removeInput("STATEMENT_INPUT"),r.mutateCallers$$module$build$src$core$procedures(this),Q},compose:function(Q){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let te=Q.getInputTargetBlock("STACK");for(;te&&!te.isInsertionMarker();){var me=te.getFieldValue("NAME");this.arguments_.push(me),me=this.workspace.getVariable(me,""),this.argumentVarModels_.push(me),this.paramIds_.push(te.id),te=te.nextConnection&&te.nextConnection.targetBlock()}if(this.updateParams_(),r.mutateCallers$$module$build$src$core$procedures(this),Q=Q.getFieldValue("STATEMENTS"),Q!==null&&(Q=Q==="TRUE",this.hasStatements_!==Q))if(Q){this.setStatements_(!0);var Re;(Re=this.statementConnection_)==null||Re.reconnect(this,"STACK"),this.statementConnection_=null}else Re=this.getInput("STACK").connection,(this.statementConnection_=Re.targetConnection)&&(Re=Re.targetBlock(),Re.unplug(),Re.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(Q,te){var me=this.workspace.getVariableById(Q);if(me.type===""){me=me.name,te=this.workspace.getVariableById(te);var Re=!1;for(let Fe=0;Fe<this.argumentVarModels_.length;Fe++)this.argumentVarModels_[Fe].getId()===Q&&(this.arguments_[Fe]=te.name,this.argumentVarModels_[Fe]=te,Re=!0);Re&&(this.displayRenamedVar_(me,te.name),r.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(Q){const te=Q.name;let me=!1,Re;for(let Fe=0;Fe<this.argumentVarModels_.length;Fe++)this.argumentVarModels_[Fe].getId()===Q.getId()&&(Re=this.arguments_[Fe],this.arguments_[Fe]=te,me=!0);me&&(this.displayRenamedVar_(Re,te),r.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(Q,te){this.updateParams_();var me=this.getIcon(r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(me&&me.bubbleIsVisible()){me=me.getWorkspace().getAllBlocks(!1);for(let Re=0,Fe;Fe=me[Re];Re++)Fe.type==="procedures_mutatorarg"&&r.Names$$module$build$src$core$names.equals(Q,Fe.getFieldValue("NAME"))&&Fe.setFieldValue(te,"NAME")}},customContextMenu:function(Q){if(!this.isInFlyout){var te=this.getFieldValue("NAME"),me={type:this.callType_,extraState:{name:te,params:this.arguments_}};if(Q.push({enabled:!0,text:r.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",te),callback:r.callbackFactory$$module$build$src$core$contextmenu(this,me)}),!this.isCollapsed())for(te=0;te<this.argumentVarModels_.length;te++){me=this.argumentVarModels_[te];const Re={type:"variables_get",fields:{VAR:{name:me.name,id:me.getId(),type:me.type}}};Q.push({enabled:!0,text:r.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",me.name),callback:r.callbackFactory$$module$build$src$core$contextmenu(this,Re)})}}}};oe.procedures_defnoreturn=Object.assign({},ue,{init:function(){var Q=r.findLegalName$$module$build$src$core$procedures("",this);Q=r.fromJson$$module$build$src$core$field_registry({type:"field_input",text:Q}),Q.setValidator(r.rename$$module$build$src$core$procedures),Q.setSpellcheck(!1),this.appendDummyInput().appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(Q,"NAME").appendField("","PARAMS"),this.setMutator(new r.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),oe.procedures_defreturn=Object.assign({},ue,{init:function(){var Q=r.findLegalName$$module$build$src$core$procedures("",this);Q=r.fromJson$$module$build$src$core$field_registry({type:"field_input",text:Q}),Q.setValidator(r.rename$$module$build$src$core$procedures),Q.setSpellcheck(!1),this.appendDummyInput().appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(Q,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(r.Align$$module$build$src$core$inputs$input.RIGHT).appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new r.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var q={init:function(){this.appendDummyInput().appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(r.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(r.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};oe.procedures_mutatorcontainer=q;var ae={init:function(){const Q=r.fromJson$$module$build$src$core$field_registry({type:"field_input",text:r.DEFAULT_ARG$$module$build$src$core$procedures});Q.setValidator(this.validator_),Q.oldShowEditorFn_=Q.showEditor_,Q.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(Q,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(r.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,Q.onFinishEditing_=this.deleteIntermediateVars_,Q.createdVariables_=[],Q.onFinishEditing_("x")},validator_:function(Q){var te=this.getSourceBlock();const me=te.workspace.getRootWorkspace();if(Q=Q.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!Q)return null;const Re=(te.workspace.targetWorkspace||te.workspace).getAllBlocks(!1),Fe=Q.toLowerCase();for(let bt=0;bt<Re.length;bt++){if(Re[bt].id===this.getSourceBlock().id)continue;const ze=Re[bt].getFieldValue("NAME");if(ze&&ze.toLowerCase()===Fe)return null}return te.isInFlyout||((te=me.getVariable(Q,""))&&te.name!==Q&&me.renameVariableById(te.getId(),Q),te||(te=me.createVariable(Q,""))&&this.createdVariables_&&this.createdVariables_.push(te)),Q},deleteIntermediateVars_:function(Q){const te=this.getSourceBlock().workspace.getRootWorkspace();if(te)for(let me=0;me<this.createdVariables_.length;me++){const Re=this.createdVariables_[me];Re.name!==Q&&te.deleteVariableById(Re.getId())}}};oe.procedures_mutatorarg=ae;var le={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(Q,te){r.Names$$module$build$src$core$names.equals(Q,this.getProcedureCall())&&(this.setFieldValue(te,"NAME"),this.setTooltip((this.outputConnection?r.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:r.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",te)))},setProcedureParameters_:function(Q,te){var me=r.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((me=(me=me&&me.getIcon(r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&me.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),Q.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=te;else{if(te.length!==Q.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let Fe=0;Fe<this.arguments_.length;Fe++){var Re=this.getInput("ARG"+Fe);Re&&(Re=Re.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Fe]]=Re,me&&Re&&te.indexOf(this.quarkIds_[Fe])===-1&&(Re.disconnect(),Re.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(Q),this.argumentVarModels_=[],Q=0;Q<this.arguments_.length;Q++)me=r.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[Q],""),this.argumentVarModels_.push(me);if(this.updateShape_(),this.quarkIds_=te){for(te=0;te<this.arguments_.length;te++)if(Q=this.quarkIds_[te],Q in this.quarkConnections_){let Fe;(Fe=this.quarkConnections_[Q])!=null&&Fe.reconnect(this,"ARG"+te)||delete this.quarkConnections_[Q]}}}},updateShape_:function(){for(var Q=0;Q<this.arguments_.length;Q++){var te=this.getField("ARGNAME"+Q);if(te){r.disable$$module$build$src$core$events$utils();try{te.setValue(this.arguments_[Q])}finally{r.enable$$module$build$src$core$events$utils()}}else te=r.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[Q]}),this.appendValueInput("ARG"+Q).setAlign(r.Align$$module$build$src$core$inputs$input.RIGHT).appendField(te,"ARGNAME"+Q).init()}for(Q=this.arguments_.length;this.getInput("ARG"+Q);Q++)this.removeInput("ARG"+Q);(Q=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(Q.appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),Q.init()):this.getField("WITH")&&Q.removeField("WITH"))},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");Q.setAttribute("name",this.getProcedureCall());for(let te=0;te<this.arguments_.length;te++){const me=r.createElement$$module$build$src$core$utils$xml("arg");me.setAttribute("name",this.arguments_[te]),Q.appendChild(me)}return Q},domToMutation:function(Q){var te=Q.getAttribute("name");this.renameProcedure(this.getProcedureCall(),te),te=[];const me=[];for(let Re=0,Fe;Fe=Q.childNodes[Re];Re++)Fe.nodeName.toLowerCase()==="arg"&&(te.push(Fe.getAttribute("name")),me.push(Fe.getAttribute("paramId")));this.setProcedureParameters_(te,me)},saveExtraState:function(){const Q=Object.create(null);return Q.name=this.getProcedureCall(),this.arguments_.length&&(Q.params=this.arguments_),Q},loadExtraState:function(Q){if(this.renameProcedure(this.getProcedureCall(),Q.name),Q=Q.params){const te=[];te.length=Q.length,te.fill(null),this.setProcedureParameters_(Q,te)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(Q){if(this.workspace&&!this.workspace.isFlyout&&Q.recordUndo)if(Q.type===r.CREATE$$module$build$src$core$events$utils&&Q.ids.indexOf(this.id)!==-1){var te=this.getProcedureCall();if(te=r.getDefinition$$module$build$src$core$procedures(te,this.workspace),!te||te.type===this.defType_&&JSON.stringify(te.getVars())===JSON.stringify(this.arguments_)||(te=null),!te){r.setGroup$$module$build$src$core$events$utils(Q.group),Q=r.createElement$$module$build$src$core$utils$xml("xml"),te=r.createElement$$module$build$src$core$utils$xml("block"),te.setAttribute("type",this.defType_);var me=this.getRelativeToSurfaceXY(),Re=me.y+2*r.config$$module$build$src$core$config.snapRadius;te.setAttribute("x",`${me.x+r.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),te.setAttribute("y",`${Re}`),me=this.mutationToDom(),te.appendChild(me),me=r.createElement$$module$build$src$core$utils$xml("field"),me.setAttribute("name","NAME"),Re=this.getProcedureCall();const Fe=r.findLegalName$$module$build$src$core$procedures(Re,this);Re!==Fe&&this.renameProcedure(Re,Fe),me.appendChild(r.createTextNode$$module$build$src$core$utils$xml(Re)),te.appendChild(me),Q.appendChild(te),r.domToWorkspace$$module$build$src$core$xml(Q,this.workspace),r.setGroup$$module$build$src$core$events$utils(!1)}}else Q.type===r.DELETE$$module$build$src$core$events$utils?(te=this.getProcedureCall(),r.getDefinition$$module$build$src$core$procedures(te,this.workspace)||(r.setGroup$$module$build$src$core$events$utils(Q.group),this.dispose(!0),r.setGroup$$module$build$src$core$events$utils(!1))):Q.type===r.CHANGE$$module$build$src$core$events$utils&&Q.element==="disabled"&&(te=this.getProcedureCall(),(te=r.getDefinition$$module$build$src$core$procedures(te,this.workspace))&&te.id===Q.blockId&&((te=r.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),r.setGroup$$module$build$src$core$events$utils(Q.group),Q.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),r.setGroup$$module$build$src$core$events$utils(te)))},customContextMenu:function(Q){if(this.workspace.isMovable()){var te=this.getProcedureCall(),me=this.workspace;Q.push({enabled:!0,text:r.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const Re=r.getDefinition$$module$build$src$core$procedures(te,me);Re&&(me.centerOnBlock(Re.id),Re.select())}})}}};oe.procedures_callnoreturn=Object.assign({},le,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(r.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),oe.procedures_callreturn=Object.assign({},le,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(r.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"});var ce={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(r.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(r.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(r.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("value",String(Number(this.hasReturnValue_))),Q},domToMutation:function(Q){this.hasReturnValue_=Q.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(Q){if(!(this.workspace.isDragging&&this.workspace.isDragging()||Q.type!==r.MOVE$$module$build$src$core$events$utils)){var te=!1,me=this;do{if(this.FUNCTION_TYPES.indexOf(me.type)!==-1){te=!0;break}me=me.getSurroundParent()}while(me);te?(me.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):me.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(r.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(me=r.getGroup$$module$build$src$core$events$utils(),r.setGroup$$module$build$src$core$events$utils(Q.group),this.setEnabled(te),r.setGroup$$module$build$src$core$events$utils(me))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};oe.procedures_ifreturn=ce,r.defineBlocks$$module$build$src$core$common(oe);var ge={blocks:oe},$e=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),K={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};r.register$$module$build$src$core$extensions("math_op_tooltip",r.buildTooltipForDropdown$$module$build$src$core$extensions("OP",K));var ie={mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation"),te=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return Q.setAttribute("divisor_input",String(te)),Q},domToMutation:function(Q){Q=Q.getAttribute("divisor_input")==="true",this.updateShape_(Q)},updateShape_:function(Q){const te=this.getInput("DIVISOR");Q?te||this.appendValueInput("DIVISOR").setCheck("Number"):te&&this.removeInput("DIVISOR")}},se=function(){this.getField("PROPERTY").setValidator(function(Q){Q=Q==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(Q)})};r.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",ie,se),r.register$$module$build$src$core$extensions("math_change_tooltip",r.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var fe={updateType_:function(Q){Q==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("op",this.getFieldValue("OP")),Q},domToMutation:function(Q){if(Q=Q.getAttribute("op"),Q===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(Q)}},Se=function(){this.getField("OP").setValidator((function(Q){this.updateType_(Q)}).bind(this))};r.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",fe,Se),r.defineBlocks$$module$build$src$core$common($e);var Ue={blocks:$e},ke=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),qe={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};r.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",r.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",qe));var we={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};r.register$$module$build$src$core$extensions("controls_flow_tooltip",r.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",we));var Ze={customContextMenu:function(Q){if(!this.isInFlyout){var te=this.getField("VAR"),me=te.getVariable().name;this.isCollapsed()||me===null||(te={type:"variables_get",fields:{VAR:te.saveState(!0)}},Q.push({enabled:!0,text:r.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",me),callback:r.callbackFactory$$module$build$src$core$contextmenu(this,te)}))}}};r.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",Ze),r.register$$module$build$src$core$extensions("controls_for_tooltip",r.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),r.register$$module$build$src$core$extensions("controls_forEach_tooltip",r.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var et=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),ft={getSurroundLoop:function(){let Q=this;do{if(et.has(Q.type))return Q;Q=Q.getSurroundParent()}while(Q);return null},onchange:function(Q){var te=this.workspace;if(te.isDragging&&!te.isDragging()&&Q.type===r.MOVE$$module$build$src$core$events$utils&&(te=!!this.getSurroundLoop(),this.setWarningText(te?null:r.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout)){const me=r.getGroup$$module$build$src$core$events$utils();r.setGroup$$module$build$src$core$events$utils(Q.group),this.setEnabled(te),r.setGroup$$module$build$src$core$events$utils(me)}}};r.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",ft),r.defineBlocks$$module$build$src$core$common(ke);var at={blocks:ke,loopTypes:et},Ge=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),Ie={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};r.register$$module$build$src$core$extensions("logic_op_tooltip",r.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Ie));var He={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const Q=r.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&Q.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&Q.setAttribute("else","1"),Q},domToMutation:function(Q){this.elseifCount_=parseInt(Q.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(Q.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const Q=Object.create(null);return this.elseifCount_&&(Q.elseIfCount=this.elseifCount_),this.elseCount_&&(Q.hasElse=!0),Q},loadExtraState:function(Q){this.elseifCount_=Q.elseIfCount||0,this.elseCount_=Q.hasElse?1:0,this.updateShape_()},decompose:function(Q){const te=Q.newBlock("controls_if_if");te.initSvg();let me=te.nextConnection;for(let Re=1;Re<=this.elseifCount_;Re++){const Fe=Q.newBlock("controls_if_elseif");Fe.initSvg(),me.connect(Fe.previousConnection),me=Fe.nextConnection}return this.elseCount_&&(Q=Q.newBlock("controls_if_else"),Q.initSvg(),me.connect(Q.previousConnection)),te},compose:function(Q){Q=Q.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const te=[null],me=[null];let Re=null;for(;Q;){if(!Q.isInsertionMarker())switch(Q.type){case"controls_if_elseif":this.elseifCount_++,te.push(Q.valueConnection_),me.push(Q.statementConnection_);break;case"controls_if_else":this.elseCount_++,Re=Q.statementConnection_;break;default:throw TypeError("Unknown block type: "+Q.type)}Q=Q.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(te,me,Re)},saveConnections:function(Q){Q=Q.nextConnection.targetBlock();let te=1;for(;Q;){if(!Q.isInsertionMarker())switch(Q.type){case"controls_if_elseif":var me=this.getInput("IF"+te);const Re=this.getInput("DO"+te);Q.valueConnection_=me&&me.connection.targetConnection,Q.statementConnection_=Re&&Re.connection.targetConnection,te++;break;case"controls_if_else":me=this.getInput("ELSE"),Q.statementConnection_=me&&me.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+Q.type)}Q=Q.getNextBlock()}},rebuildShape_:function(){const Q=[null],te=[null];let me=null;this.getInput("ELSE")&&(me=this.getInput("ELSE").connection.targetConnection);for(let Re=1;this.getInput("IF"+Re);Re++){const Fe=this.getInput("IF"+Re),bt=this.getInput("DO"+Re);Q.push(Fe.connection.targetConnection),te.push(bt.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(Q,te,me)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var Q=1;this.getInput("IF"+Q);Q++)this.removeInput("IF"+Q),this.removeInput("DO"+Q);for(Q=1;Q<=this.elseifCount_;Q++)this.appendValueInput("IF"+Q).setCheck("Boolean").appendField(r.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+Q).appendField(r.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(r.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(Q,te,me){for(let Re=1;Re<=this.elseifCount_;Re++){let Fe;(Fe=Q[Re])==null||Fe.reconnect(this,"IF"+Re);let bt;(bt=te[Re])==null||bt.reconnect(this,"DO"+Re)}me==null||me.reconnect(this,"ELSE")}};r.registerMutator$$module$build$src$core$extensions("controls_if_mutator",He,null,["controls_if_elseif","controls_if_else"]);var it=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return r.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return r.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return r.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return r.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};r.register$$module$build$src$core$extensions("controls_if_tooltip",it);var st={onchange:function(Q){this.prevBlocks_||(this.prevBlocks_=[null,null]);var te=this.getInputTargetBlock("A");const me=this.getInputTargetBlock("B");te&&me&&!this.workspace.connectionChecker.doTypeChecks(te.outputConnection,me.outputConnection)&&(r.setGroup$$module$build$src$core$events$utils(Q.group),Q=this.prevBlocks_[0],Q!==te&&(te.unplug(),!Q||Q.isDisposed()||Q.isShadow()||this.getInput("A").connection.connect(Q.outputConnection)),te=this.prevBlocks_[1],te!==me&&(me.unplug(),!te||te.isDisposed()||te.isShadow()||this.getInput("B").connection.connect(te.outputConnection)),this.bumpNeighbours(),r.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},It=function(){this.mixin(st)};r.register$$module$build$src$core$extensions("logic_compare",It);var kt={prevParentConnection_:null,onchange:function(Q){const te=this.getInputTargetBlock("THEN"),me=this.getInputTargetBlock("ELSE"),Re=this.outputConnection.targetConnection;if((te||me)&&Re)for(let Fe=0;2>Fe;Fe++){const bt=Fe===1?te:me;bt&&!bt.workspace.connectionChecker.doTypeChecks(bt.outputConnection,Re)&&(r.setGroup$$module$build$src$core$events$utils(Q.group),Re===this.prevParentConnection_?(this.unplug(),Re.getSourceBlock().bumpNeighbours()):(bt.unplug(),bt.bumpNeighbours()),r.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=Re}};r.registerMixin$$module$build$src$core$extensions("logic_ternary",kt),r.defineBlocks$$module$build$src$core$common(Ge);var vt=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Mt={init:function(){this.setHelpUrl(r.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new r.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(r.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("items",String(this.itemCount_)),Q},domToMutation:function(Q){if(Q=Q.getAttribute("items"),!Q)throw new TypeError("element did not have items");this.itemCount_=parseInt(Q,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(Q){this.itemCount_=Q.itemCount,this.updateShape_()},decompose:function(Q){const te=Q.newBlock("lists_create_with_container");te.initSvg();let me=te.getInput("STACK").connection;for(let Re=0;Re<this.itemCount_;Re++){const Fe=Q.newBlock("lists_create_with_item");if(Fe.initSvg(),!Fe.previousConnection)throw Error("itemBlock has no previousConnection");me.connect(Fe.previousConnection),me=Fe.nextConnection}return te},compose:function(Q){var te=Q.getInputTargetBlock("STACK");for(Q=[];te;)te.isInsertionMarker()||Q.push(te.valueConnection_),te=te.getNextBlock();for(te=0;te<this.itemCount_;te++){const me=this.getInput("ADD"+te).connection.targetConnection;me&&Q.indexOf(me)===-1&&me.disconnect()}for(this.itemCount_=Q.length,this.updateShape_(),te=0;te<this.itemCount_;te++){let me;(me=Q[te])==null||me.reconnect(this,"ADD"+te)}},saveConnections:function(Q){Q=Q.getInputTargetBlock("STACK");let te=0;for(;Q;){if(Q.isInsertionMarker()){Q=Q.getNextBlock();continue}const me=this.getInput("ADD"+te);let Re;Q.valueConnection_=(Re=me)==null?void 0:Re.connection.targetConnection,Q=Q.getNextBlock(),te++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(r.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var Q=0;Q<this.itemCount_;Q++)if(!this.getInput("ADD"+Q)){const te=this.appendValueInput("ADD"+Q).setAlign(r.Align$$module$build$src$core$inputs$align.RIGHT);Q===0&&te.appendField(r.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(Q=this.itemCount_;this.getInput("ADD"+Q);Q++)this.removeInput("ADD"+Q)}};vt.lists_create_with=Mt;var Ct={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(r.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(r.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};vt.lists_create_with_container=Ct;var gt={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(r.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(r.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};vt.lists_create_with_item=gt;var Ee={init:function(){var Q=[[r.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[r.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(r.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(r.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),Q=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),!Q)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(Q,"END"),this.setInputsInline(!0),this.setTooltip(()=>r.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};vt.lists_indexOf=Ee;var re={init:function(){var Q=[[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),Q=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),Q.setValidator(function(te){te=te==="REMOVE",this.getSourceBlock().updateStatement_(te)}),this.appendValueInput("VALUE").setCheck("Array").appendField(r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(Q,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const te=this.getFieldValue("MODE"),me=this.getFieldValue("WHERE");let Re="";switch(te+" "+me){case"GET FROM_START":case"GET FROM_END":Re=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":Re=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":Re=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":Re=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":Re=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":Re=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":Re=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":Re=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":Re=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":Re=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":Re=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":Re=r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(me==="FROM_START"||me==="FROM_END")&&(Re+="  "+(me==="FROM_START"?r.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:r.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),Re})},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");Q.setAttribute("statement",String(!this.outputConnection));const te=this.getInput("AT")instanceof r.ValueInput$$module$build$src$core$inputs$value_input;return Q.setAttribute("at",String(te)),Q},domToMutation:function(Q){const te=Q.getAttribute("statement")==="true";this.updateStatement_(te),Q=Q.getAttribute("at")!=="false",this.updateAt_(Q)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(Q){Q.isStatement?this.updateStatement_(!0):typeof Q=="string"&&this.domToMutation(r.textToDom$$module$build$src$core$utils$xml(Q))},updateStatement_:function(Q){Q!==!this.outputConnection&&(this.unplug(!0,!0),Q?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(Q){this.removeInput("AT"),this.removeInput("ORDINAL",!0),Q?(this.appendValueInput("AT").setCheck("Number"),r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const te=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});te.setValidator(function(me){const Re=me==="FROM_START"||me==="FROM_END";if(Re!==Q){const Fe=this.getSourceBlock();return Fe.updateAt_(Re),Fe.setFieldValue(me,"WHERE"),null}}),this.getInput("AT").appendField(te,"WHERE"),r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};vt.lists_getIndex=re;var Be={init:function(){var Q=[[r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[r.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),Q=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:Q}),this.appendDummyInput().appendField(Q,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const te=this.getFieldValue("MODE"),me=this.getFieldValue("WHERE");let Re="";switch(te+" "+me){case"SET FROM_START":case"SET FROM_END":Re=r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":Re=r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":Re=r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":Re=r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":Re=r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":Re=r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":Re=r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":Re=r.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(me==="FROM_START"||me==="FROM_END")&&(Re+="  "+r.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),Re})},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation"),te=this.getInput("AT")instanceof r.ValueInput$$module$build$src$core$inputs$value_input;return Q.setAttribute("at",String(te)),Q},domToMutation:function(Q){Q=Q.getAttribute("at")!=="false",this.updateAt_(Q)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(Q){this.removeInput("AT"),this.removeInput("ORDINAL",!0),Q?(this.appendValueInput("AT").setCheck("Number"),r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const te=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});te.setValidator(function(me){const Re=me==="FROM_START"||me==="FROM_END";if(Re!==Q){const Fe=this.getSourceBlock();return Fe.updateAt_(Re),Fe.setFieldValue(me,"WHERE"),null}}),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(te,"WHERE")}};vt.lists_setIndex=Be;var mt={init:function(){this.WHERE_OPTIONS_1=[[r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");var te=this.getInput("AT1")instanceof r.ValueInput$$module$build$src$core$inputs$value_input;return Q.setAttribute("at1",String(te)),te=this.getInput("AT2")instanceof r.ValueInput$$module$build$src$core$inputs$value_input,Q.setAttribute("at2",String(te)),Q},domToMutation:function(Q){const te=Q.getAttribute("at1")==="true";Q=Q.getAttribute("at2")==="true",this.updateAt_(1,te),this.updateAt_(2,Q)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(Q,te){this.removeInput("AT"+Q),this.removeInput("ORDINAL"+Q,!0),te?(this.appendValueInput("AT"+Q).setCheck("Number"),r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+Q).appendField(r.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+Q);const me=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+Q]});me.setValidator(function(Re){const Fe=Re==="FROM_START"||Re==="FROM_END";if(Fe!==te){const bt=this.getSourceBlock();return bt.updateAt_(Q,Fe),bt.setFieldValue(Re,"WHERE"+Q),null}}),this.getInput("AT"+Q).appendField(me,"WHERE"+Q),Q===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),r.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};vt.lists_getSublist=mt,vt.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},vt.lists_split={init:function(){const Q=r.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[r.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[r.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!Q)throw Error("field_dropdown not found");Q.setValidator(te=>{this.updateType_(te)}),this.setHelpUrl(r.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(Q,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(r.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const te=this.getFieldValue("MODE");if(te==="SPLIT")return r.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(te==="JOIN")return r.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+te)})},updateType_:function(Q){if(this.getFieldValue("MODE")!==Q){const te=this.getInput("INPUT").connection;te.setShadowDom(null);const me=te.targetBlock();me&&(te.disconnect(),me.isShadow()?me.dispose(!1):this.bumpNeighbours())}Q==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const Q=r.createElement$$module$build$src$core$utils$xml("mutation");return Q.setAttribute("mode",this.getFieldValue("MODE")),Q},domToMutation:function(Q){this.updateType_(Q.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},r.defineBlocks$$module$build$src$core$common(vt);var yt={blocks:vt},wt=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]);r.defineBlocks$$module$build$src$core$common(wt);var Ke={blocks:wt},Qe=Object.assign({},wt,vt,Ge,ke,$e,oe,f,s),Le={blocks:Qe,colour:Ke,lists:yt,loops:at,math:Ue,procedures:ge,texts:Z,variables:S,variablesDynamic:h};return Le.__namespace__=r,Le})}(vO)),vO.exports}var ZU;function Oie(){return ZU||(ZU=1,function(n,e){(function(t,r){n.exports=r(kie())})(jl,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})}(gO)),gO.exports}var $j={exports:{}},_O={exports:{}},e5;function Lie(){return e5||(e5=1,function(n,e){(function(t,r){n.exports=r(VF())})(jl,function(t){var r=t.__namespace__,s=function(ne,Te){return[Te.quote_(ne.getFieldValue("COLOUR")),Le.ATOMIC]},o=function(ne,Te){return[Te.provideFunction_("colourRandom",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",Le.FUNCTION_CALL]},l=function(ne,Te){const je=Te.valueToCode(ne,"RED",Le.NONE)||0,ct=Te.valueToCode(ne,"GREEN",Le.NONE)||0;return ne=Te.valueToCode(ne,"BLUE",Le.NONE)||0,[Te.provideFunction_("colourRgb",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+je+", "+ct+", "+ne+")",Le.FUNCTION_CALL]},u=function(ne,Te){const je=Te.valueToCode(ne,"COLOUR1",Le.NONE)||"'#000000'",ct=Te.valueToCode(ne,"COLOUR2",Le.NONE)||"'#000000'";return ne=Te.valueToCode(ne,"RATIO",Le.NONE)||.5,[Te.provideFunction_("colourBlend",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+je+", "+ct+", "+ne+")",Le.FUNCTION_CALL]},h=function(ne,Te){return["[]",Le.ATOMIC]},f=function(ne,Te){const je=Array(ne.itemCount_);for(let ct=0;ct<ne.itemCount_;ct++)je[ct]=Te.valueToCode(ne,"ADD"+ct,Le.NONE)||"null";return["["+je.join(", ")+"]",Le.ATOMIC]},g=function(ne,Te){const je=Te.provideFunction_("listsRepeat",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),ct=Te.valueToCode(ne,"ITEM",Le.NONE)||"null";return ne=Te.valueToCode(ne,"NUM",Le.NONE)||"0",[je+"("+ct+", "+ne+")",Le.FUNCTION_CALL]},y=function(ne,Te){return[(Te.valueToCode(ne,"VALUE",Le.MEMBER)||"[]")+".length",Le.MEMBER]},b=function(ne,Te){return["!"+(Te.valueToCode(ne,"VALUE",Le.MEMBER)||"[]")+".length",Le.LOGICAL_NOT]},S=function(ne,Te){const je=ne.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",ct=Te.valueToCode(ne,"FIND",Le.NONE)||"''";return Te=(Te.valueToCode(ne,"VALUE",Le.MEMBER)||"[]")+"."+je+"("+ct+")",ne.workspace.options.oneBasedIndex?[Te+" + 1",Le.ADDITION]:[Te,Le.FUNCTION_CALL]},C=function(ne,Te){const je=ne.getFieldValue("MODE")||"GET",ct=ne.getFieldValue("WHERE")||"FROM_START";var Ht=Te.valueToCode(ne,"VALUE",ct==="RANDOM"?Le.NONE:Le.MEMBER)||"[]";switch(ct){case"FIRST":if(je==="GET")return[Ht+"[0]",Le.MEMBER];if(je==="GET_REMOVE")return[Ht+".shift()",Le.MEMBER];if(je==="REMOVE")return Ht+`.shift();
`;break;case"LAST":if(je==="GET")return[Ht+".slice(-1)[0]",Le.MEMBER];if(je==="GET_REMOVE")return[Ht+".pop()",Le.MEMBER];if(je==="REMOVE")return Ht+`.pop();
`;break;case"FROM_START":if(ne=Te.getAdjusted(ne,"AT"),je==="GET")return[Ht+"["+ne+"]",Le.MEMBER];if(je==="GET_REMOVE")return[Ht+".splice("+ne+", 1)[0]",Le.FUNCTION_CALL];if(je==="REMOVE")return Ht+".splice("+ne+`, 1);
`;break;case"FROM_END":if(ne=Te.getAdjusted(ne,"AT",1,!0),je==="GET")return[Ht+".slice("+ne+")[0]",Le.FUNCTION_CALL];if(je==="GET_REMOVE")return[Ht+".splice("+ne+", 1)[0]",Le.FUNCTION_CALL];if(je==="REMOVE")return Ht+".splice("+ne+", 1);";break;case"RANDOM":if(Ht=Te.provideFunction_("listsGetRandomItem",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+Ht+", "+(je!=="GET")+")",je==="GET"||je==="GET_REMOVE")return[Ht,Le.FUNCTION_CALL];if(je==="REMOVE")return Ht+`;
`}throw Error("Unhandled combination (lists_getIndex).")},M=function(ne,Te){function je(){if(ct.match(/^\w+$/))return"";const De=Te.nameDB_.getDistinctName("tmpList",r.NameType$$module$build$src$core$names.VARIABLE),_t="var "+De+" = "+ct+`;
`;return ct=De,_t}let ct=Te.valueToCode(ne,"LIST",Le.MEMBER)||"[]";const Ht=ne.getFieldValue("MODE")||"GET";var nn=ne.getFieldValue("WHERE")||"FROM_START";const kn=Te.valueToCode(ne,"TO",Le.ASSIGNMENT)||"null";switch(nn){case"FIRST":if(Ht==="SET")return ct+"[0] = "+kn+`;
`;if(Ht==="INSERT")return ct+".unshift("+kn+`);
`;break;case"LAST":if(Ht==="SET")return je()+(ct+"["+ct+".length - 1] = "+kn+`;
`);if(Ht==="INSERT")return ct+".push("+kn+`);
`;break;case"FROM_START":if(ne=Te.getAdjusted(ne,"AT"),Ht==="SET")return ct+"["+ne+"] = "+kn+`;
`;if(Ht==="INSERT")return ct+".splice("+ne+", 0, "+kn+`);
`;break;case"FROM_END":if(ne=Te.getAdjusted(ne,"AT",1,!1,Le.SUBTRACTION),nn=je(),Ht==="SET")return nn+(ct+"["+ct+".length - "+ne+"] = "+kn+`;
`);if(Ht==="INSERT")return nn+(ct+".splice("+ct+".length - "+ne+", 0, "+kn+`);
`);break;case"RANDOM":if(ne=je(),nn=Te.nameDB_.getDistinctName("tmpX",r.NameType$$module$build$src$core$names.VARIABLE),ne+="var "+nn+" = Math.floor(Math.random() * "+ct+`.length);
`,Ht==="SET")return ne+(ct+"["+nn+"] = "+kn+`;
`);if(Ht==="INSERT")return ne+(ct+".splice("+nn+", 0, "+kn+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},A=function(ne,Te){var je={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},ct=Te.valueToCode(ne,"LIST",Le.MEMBER)||"[]";const Ht=ne.getFieldValue("WHERE1"),nn=ne.getFieldValue("WHERE2");if(Ht==="FIRST"&&nn==="LAST")ct+=".slice(0)";else if(ct.match(/^\w+$/)||Ht!=="FROM_END"&&nn==="FROM_START"){switch(Ht){case"FROM_START":je=Te.getAdjusted(ne,"AT1");break;case"FROM_END":je=Te.getAdjusted(ne,"AT1",1,!1,Le.SUBTRACTION),je=ct+".length - "+je;break;case"FIRST":je="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(nn){case"FROM_START":Te=Te.getAdjusted(ne,"AT2",1);break;case"FROM_END":Te=Te.getAdjusted(ne,"AT2",0,!1,Le.SUBTRACTION),Te=ct+".length - "+Te;break;case"LAST":Te=ct+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}ct=ct+".slice("+je+", "+Te+")"}else{const kn=Te.getAdjusted(ne,"AT1");ne=Te.getAdjusted(ne,"AT2"),ct=Te.provideFunction_("subsequence"+je[Ht]+je[nn],`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(sequence${Ht==="FROM_END"||Ht==="FROM_START"?", at1":""}${nn==="FROM_END"||nn==="FROM_START"?", at2":""}) {
  var start = ${me("sequence",Ht,"at1")};
  var end = ${me("sequence",nn,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+ct+(Ht==="FROM_END"||Ht==="FROM_START"?", "+kn:"")+(nn==="FROM_END"||nn==="FROM_START"?", "+ne:"")+")"}return[ct,Le.FUNCTION_CALL]},k=function(ne,Te){const je=Te.valueToCode(ne,"LIST",Le.FUNCTION_CALL)||"[]",ct=ne.getFieldValue("DIRECTION")==="1"?1:-1;return ne=ne.getFieldValue("TYPE"),Te=Te.provideFunction_("listsGetSortCompare",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[je+".slice().sort("+Te+'("'+ne+'", '+ct+"))",Le.FUNCTION_CALL]},O=function(ne,Te){let je=Te.valueToCode(ne,"INPUT",Le.MEMBER);if(Te=Te.valueToCode(ne,"DELIM",Le.NONE)||"''",ne=ne.getFieldValue("MODE"),ne==="SPLIT")je||(je="''"),ne="split";else if(ne==="JOIN")je||(je="[]"),ne="join";else throw Error("Unknown mode: "+ne);return[je+"."+ne+"("+Te+")",Le.FUNCTION_CALL]},P=function(ne,Te){return[(Te.valueToCode(ne,"LIST",Le.FUNCTION_CALL)||"[]")+".slice().reverse()",Le.FUNCTION_CALL]},D=function(ne,Te){var je=0;let ct="";Te.STATEMENT_PREFIX&&(ct+=Te.injectId(Te.STATEMENT_PREFIX,ne));do{const Ht=Te.valueToCode(ne,"IF"+je,Le.NONE)||"false";let nn=Te.statementToCode(ne,"DO"+je);Te.STATEMENT_SUFFIX&&(nn=Te.prefixLines(Te.injectId(Te.STATEMENT_SUFFIX,ne),Te.INDENT)+nn),ct+=(0<je?" else ":"")+"if ("+Ht+`) {
`+nn+"}",je++}while(ne.getInput("IF"+je));return(ne.getInput("ELSE")||Te.STATEMENT_SUFFIX)&&(je=Te.statementToCode(ne,"ELSE"),Te.STATEMENT_SUFFIX&&(je=Te.prefixLines(Te.injectId(Te.STATEMENT_SUFFIX,ne),Te.INDENT)+je),ct+=` else {
`+je+"}"),ct+`
`},U=function(ne,Te){const je={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[ne.getFieldValue("OP")],ct=je==="=="||je==="!="?Le.EQUALITY:Le.RELATIONAL,Ht=Te.valueToCode(ne,"A",ct)||"0";return ne=Te.valueToCode(ne,"B",ct)||"0",[Ht+" "+je+" "+ne,ct]},H=function(ne,Te){const je=ne.getFieldValue("OP")==="AND"?"&&":"||",ct=je==="&&"?Le.LOGICAL_AND:Le.LOGICAL_OR;let Ht=Te.valueToCode(ne,"A",ct);return ne=Te.valueToCode(ne,"B",ct),Ht||ne?(Te=je==="&&"?"true":"false",Ht||(Ht=Te),ne||(ne=Te)):ne=Ht="false",[Ht+" "+je+" "+ne,ct]},V=function(ne,Te){const je=Le.LOGICAL_NOT;return["!"+(Te.valueToCode(ne,"BOOL",je)||"true"),je]},z=function(ne,Te){return[ne.getFieldValue("BOOL")==="TRUE"?"true":"false",Le.ATOMIC]},Z=function(ne,Te){return["null",Le.ATOMIC]},oe=function(ne,Te){const je=Te.valueToCode(ne,"IF",Le.CONDITIONAL)||"false",ct=Te.valueToCode(ne,"THEN",Le.CONDITIONAL)||"null";return ne=Te.valueToCode(ne,"ELSE",Le.CONDITIONAL)||"null",[je+" ? "+ct+" : "+ne,Le.CONDITIONAL]},ue=function(ne,Te){let je;je=ne.getField("TIMES")?String(Number(ne.getFieldValue("TIMES"))):Te.valueToCode(ne,"TIMES",Le.ASSIGNMENT)||"0";let ct=Te.statementToCode(ne,"DO");ct=Te.addLoopTrap(ct,ne),ne="";const Ht=Te.nameDB_.getDistinctName("count",r.NameType$$module$build$src$core$names.VARIABLE);let nn=je;return je.match(/^\w+$/)||r.isNumber$$module$build$src$core$utils$string(je)||(nn=Te.nameDB_.getDistinctName("repeat_end",r.NameType$$module$build$src$core$names.VARIABLE),ne+="var "+nn+" = "+je+`;
`),ne+("for (var "+Ht+" = 0; "+Ht+" < "+nn+"; "+Ht+`++) {
`+ct+`}
`)},q=function(ne,Te){const je=ne.getFieldValue("MODE")==="UNTIL";let ct=Te.valueToCode(ne,"BOOL",je?Le.LOGICAL_NOT:Le.NONE)||"false",Ht=Te.statementToCode(ne,"DO");return Ht=Te.addLoopTrap(Ht,ne),je&&(ct="!"+ct),"while ("+ct+`) {
`+Ht+`}
`},ae=function(ne,Te){var je=Te.getVariableName(ne.getFieldValue("VAR")),ct=Te.valueToCode(ne,"FROM",Le.ASSIGNMENT)||"0",Ht=Te.valueToCode(ne,"TO",Le.ASSIGNMENT)||"0";const nn=Te.valueToCode(ne,"BY",Le.ASSIGNMENT)||"1";let kn=Te.statementToCode(ne,"DO");if(kn=Te.addLoopTrap(kn,ne),r.isNumber$$module$build$src$core$utils$string(ct)&&r.isNumber$$module$build$src$core$utils$string(Ht)&&r.isNumber$$module$build$src$core$utils$string(nn))Te=Number(ct)<=Number(Ht),ne="for ("+je+" = "+ct+"; "+je+(Te?" <= ":" >= ")+Ht+"; "+je,je=Math.abs(Number(nn)),ne=je===1?ne+(Te?"++":"--"):ne+((Te?" += ":" -= ")+je),ne+=`) {
`+kn+`}
`;else{ne="";let De=ct;ct.match(/^\w+$/)||r.isNumber$$module$build$src$core$utils$string(ct)||(De=Te.nameDB_.getDistinctName(je+"_start",r.NameType$$module$build$src$core$names.VARIABLE),ne+="var "+De+" = "+ct+`;
`),ct=Ht,Ht.match(/^\w+$/)||r.isNumber$$module$build$src$core$utils$string(Ht)||(ct=Te.nameDB_.getDistinctName(je+"_end",r.NameType$$module$build$src$core$names.VARIABLE),ne+="var "+ct+" = "+Ht+`;
`),Ht=Te.nameDB_.getDistinctName(je+"_inc",r.NameType$$module$build$src$core$names.VARIABLE),ne+="var "+Ht+" = ",ne=r.isNumber$$module$build$src$core$utils$string(nn)?ne+(Math.abs(Number(nn))+`;
`):ne+("Math.abs("+nn+`);
`),ne+="if ("+De+" > "+ct+`) {
`,ne+=Te.INDENT+Ht+" = -"+Ht+`;
`,ne=ne+`}
for (`+(je+" = "+De+"; "+Ht+" >= 0 ? "+je+" <= "+ct+" : "+je+" >= "+ct+"; "+je+" += "+Ht+`) {
`+kn+`}
`)}return ne},le=function(ne,Te){const je=Te.getVariableName(ne.getFieldValue("VAR"));var ct=Te.valueToCode(ne,"LIST",Le.ASSIGNMENT)||"[]";let Ht=Te.statementToCode(ne,"DO");Ht=Te.addLoopTrap(Ht,ne),ne="";let nn=ct;return ct.match(/^\w+$/)||(nn=Te.nameDB_.getDistinctName(je+"_list",r.NameType$$module$build$src$core$names.VARIABLE),ne+="var "+nn+" = "+ct+`;
`),ct=Te.nameDB_.getDistinctName(je+"_index",r.NameType$$module$build$src$core$names.VARIABLE),Ht=Te.INDENT+je+" = "+nn+"["+ct+`];
`+Ht,ne+("for (var "+ct+" in "+nn+`) {
`+Ht+`}
`)},ce=function(ne,Te){let je="";if(Te.STATEMENT_PREFIX&&(je+=Te.injectId(Te.STATEMENT_PREFIX,ne)),Te.STATEMENT_SUFFIX&&(je+=Te.injectId(Te.STATEMENT_SUFFIX,ne)),Te.STATEMENT_PREFIX){const ct=ne.getSurroundLoop();ct&&!ct.suppressPrefixSuffix&&(je+=Te.injectId(Te.STATEMENT_PREFIX,ct))}switch(ne.getFieldValue("FLOW")){case"BREAK":return je+`break;
`;case"CONTINUE":return je+`continue;
`}throw Error("Unknown flow statement.")},ge=function(ne,Te){return ne=Number(ne.getFieldValue("NUM")),[String(ne),0<=ne?Le.ATOMIC:Le.UNARY_NEGATION]},$e=function(ne,Te){var je={ADD:[" + ",Le.ADDITION],MINUS:[" - ",Le.SUBTRACTION],MULTIPLY:[" * ",Le.MULTIPLICATION],DIVIDE:[" / ",Le.DIVISION],POWER:[null,Le.NONE]}[ne.getFieldValue("OP")];const ct=je[0];je=je[1];const Ht=Te.valueToCode(ne,"A",je)||"0";return ne=Te.valueToCode(ne,"B",je)||"0",ct?[Ht+ct+ne,je]:["Math.pow("+Ht+", "+ne+")",Le.FUNCTION_CALL]},K=function(ne,Te){const je=ne.getFieldValue("OP");let ct;if(je==="NEG")return ne=Te.valueToCode(ne,"NUM",Le.UNARY_NEGATION)||"0",ne[0]==="-"&&(ne=" "+ne),["-"+ne,Le.UNARY_NEGATION];switch(ne=je==="SIN"||je==="COS"||je==="TAN"?Te.valueToCode(ne,"NUM",Le.DIVISION)||"0":Te.valueToCode(ne,"NUM",Le.NONE)||"0",je){case"ABS":ct="Math.abs("+ne+")";break;case"ROOT":ct="Math.sqrt("+ne+")";break;case"LN":ct="Math.log("+ne+")";break;case"EXP":ct="Math.exp("+ne+")";break;case"POW10":ct="Math.pow(10,"+ne+")";break;case"ROUND":ct="Math.round("+ne+")";break;case"ROUNDUP":ct="Math.ceil("+ne+")";break;case"ROUNDDOWN":ct="Math.floor("+ne+")";break;case"SIN":ct="Math.sin("+ne+" / 180 * Math.PI)";break;case"COS":ct="Math.cos("+ne+" / 180 * Math.PI)";break;case"TAN":ct="Math.tan("+ne+" / 180 * Math.PI)"}if(ct)return[ct,Le.FUNCTION_CALL];switch(je){case"LOG10":ct="Math.log("+ne+") / Math.log(10)";break;case"ASIN":ct="Math.asin("+ne+") / Math.PI * 180";break;case"ACOS":ct="Math.acos("+ne+") / Math.PI * 180";break;case"ATAN":ct="Math.atan("+ne+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+je)}return[ct,Le.DIVISION]},ie=function(ne,Te){return{PI:["Math.PI",Le.MEMBER],E:["Math.E",Le.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",Le.DIVISION],SQRT2:["Math.SQRT2",Le.MEMBER],SQRT1_2:["Math.SQRT1_2",Le.MEMBER],INFINITY:["Infinity",Le.ATOMIC]}[ne.getFieldValue("CONSTANT")]},se=function(ne,Te){var je={EVEN:[" % 2 === 0",Le.MODULUS,Le.EQUALITY],ODD:[" % 2 === 1",Le.MODULUS,Le.EQUALITY],WHOLE:[" % 1 === 0",Le.MODULUS,Le.EQUALITY],POSITIVE:[" > 0",Le.RELATIONAL,Le.RELATIONAL],NEGATIVE:[" < 0",Le.RELATIONAL,Le.RELATIONAL],DIVISIBLE_BY:[null,Le.MODULUS,Le.EQUALITY],PRIME:[null,Le.NONE,Le.FUNCTION_CALL]};const ct=ne.getFieldValue("PROPERTY"),[Ht,nn,kn]=je[ct];return je=Te.valueToCode(ne,"NUMBER_TO_CHECK",nn)||"0",ct==="PRIME"?ne=Te.provideFunction_("mathIsPrime",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+je+")":ct==="DIVISIBLE_BY"?(ne=Te.valueToCode(ne,"DIVISOR",Le.MODULUS)||"0",ne=je+" % "+ne+" === 0"):ne=je+Ht,[ne,kn]},fe=function(ne,Te){const je=Te.valueToCode(ne,"DELTA",Le.ADDITION)||"0";return ne=Te.getVariableName(ne.getFieldValue("VAR")),ne+" = (typeof "+ne+" === 'number' ? "+ne+" : 0) + "+je+`;
`},Se=function(ne,Te){var je=ne.getFieldValue("OP");switch(je){case"SUM":ne=Te.valueToCode(ne,"LIST",Le.MEMBER)||"[]",ne+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":ne=Te.valueToCode(ne,"LIST",Le.NONE)||"[]",ne="Math.min.apply(null, "+ne+")";break;case"MAX":ne=Te.valueToCode(ne,"LIST",Le.NONE)||"[]",ne="Math.max.apply(null, "+ne+")";break;case"AVERAGE":je=Te.provideFunction_("mathMean",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),ne=Te.valueToCode(ne,"LIST",Le.NONE)||"[]",ne=je+"("+ne+")";break;case"MEDIAN":je=Te.provideFunction_("mathMedian",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),ne=Te.valueToCode(ne,"LIST",Le.NONE)||"[]",ne=je+"("+ne+")";break;case"MODE":je=Te.provideFunction_("mathModes",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),ne=Te.valueToCode(ne,"LIST",Le.NONE)||"[]",ne=je+"("+ne+")";break;case"STD_DEV":je=Te.provideFunction_("mathStandardDeviation",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`),ne=Te.valueToCode(ne,"LIST",Le.NONE)||"[]",ne=je+"("+ne+")";break;case"RANDOM":je=Te.provideFunction_("mathRandomList",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),ne=Te.valueToCode(ne,"LIST",Le.NONE)||"[]",ne=je+"("+ne+")";break;default:throw Error("Unknown operator: "+je)}return[ne,Le.FUNCTION_CALL]},Ue=function(ne,Te){const je=Te.valueToCode(ne,"DIVIDEND",Le.MODULUS)||"0";return ne=Te.valueToCode(ne,"DIVISOR",Le.MODULUS)||"0",[je+" % "+ne,Le.MODULUS]},ke=function(ne,Te){const je=Te.valueToCode(ne,"VALUE",Le.NONE)||"0",ct=Te.valueToCode(ne,"LOW",Le.NONE)||"0";return ne=Te.valueToCode(ne,"HIGH",Le.NONE)||"Infinity",["Math.min(Math.max("+je+", "+ct+"), "+ne+")",Le.FUNCTION_CALL]},qe=function(ne,Te){const je=Te.valueToCode(ne,"FROM",Le.NONE)||"0";return ne=Te.valueToCode(ne,"TO",Le.NONE)||"0",[Te.provideFunction_("mathRandomInt",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+je+", "+ne+")",Le.FUNCTION_CALL]},we=function(ne,Te){return["Math.random()",Le.FUNCTION_CALL]},Ze=function(ne,Te){const je=Te.valueToCode(ne,"X",Le.NONE)||"0";return["Math.atan2("+(Te.valueToCode(ne,"Y",Le.NONE)||"0")+", "+je+") / Math.PI * 180",Le.DIVISION]},et=function(ne,Te){const je=Te.getProcedureName(ne.getFieldValue("NAME"));var ct="";Te.STATEMENT_PREFIX&&(ct+=Te.injectId(Te.STATEMENT_PREFIX,ne)),Te.STATEMENT_SUFFIX&&(ct+=Te.injectId(Te.STATEMENT_SUFFIX,ne)),ct&&(ct=Te.prefixLines(ct,Te.INDENT));let Ht="";Te.INFINITE_LOOP_TRAP&&(Ht=Te.prefixLines(Te.injectId(Te.INFINITE_LOOP_TRAP,ne),Te.INDENT));const nn=Te.statementToCode(ne,"STACK");let kn=Te.valueToCode(ne,"RETURN",Le.NONE)||"",De="";nn&&kn&&(De=ct),kn&&(kn=Te.INDENT+"return "+kn+`;
`);const _t=[],Ot=ne.getVars();for(let St=0;St<Ot.length;St++)_t[St]=Te.getVariableName(Ot[St]);return ct="function "+je+"("+_t.join(", ")+`) {
`+ct+Ht+nn+De+kn+"}",ct=Te.scrub_(ne,ct),Te.definitions_["%"+je]=ct,null},ft=function(ne,Te){const je=Te.getProcedureName(ne.getFieldValue("NAME")),ct=[],Ht=ne.getVars();for(let nn=0;nn<Ht.length;nn++)ct[nn]=Te.valueToCode(ne,"ARG"+nn,Le.NONE)||"null";return[je+"("+ct.join(", ")+")",Le.FUNCTION_CALL]},at=function(ne,Te){return Te.forBlock.procedures_callreturn(ne,Te)[0]+`;
`},Ge=function(ne,Te){let je="if ("+(Te.valueToCode(ne,"CONDITION",Le.NONE)||"false")+`) {
`;return Te.STATEMENT_SUFFIX&&(je+=Te.prefixLines(Te.injectId(Te.STATEMENT_SUFFIX,ne),Te.INDENT)),ne.hasReturnValue_?(ne=Te.valueToCode(ne,"VALUE",Le.NONE)||"null",je+=Te.INDENT+"return "+ne+`;
`):je+=Te.INDENT+`return;
`,je+`}
`},Ie=function(ne,Te){return[Te.quote_(ne.getFieldValue("TEXT")),Le.ATOMIC]},He=function(ne,Te){return ne=Te.multiline_quote_(ne.getFieldValue("TEXT")),Te=ne.indexOf("+")!==-1?Le.ADDITION:Le.ATOMIC,[ne,Te]},it=function(ne,Te){switch(ne.itemCount_){case 0:return["''",Le.ATOMIC];case 1:return ne=Te.valueToCode(ne,"ADD0",Le.NONE)||"''",Gt(ne);case 2:var je=Te.valueToCode(ne,"ADD0",Le.NONE)||"''";return ne=Te.valueToCode(ne,"ADD1",Le.NONE)||"''",[Gt(je)[0]+" + "+Gt(ne)[0],Le.ADDITION];default:je=Array(ne.itemCount_);for(let ct=0;ct<ne.itemCount_;ct++)je[ct]=Te.valueToCode(ne,"ADD"+ct,Le.NONE)||"''";return["["+je.join(",")+"].join('')",Le.FUNCTION_CALL]}},st=function(ne,Te){const je=Te.getVariableName(ne.getFieldValue("VAR"));return ne=Te.valueToCode(ne,"TEXT",Le.NONE)||"''",je+" += "+Gt(ne)[0]+`;
`},It=function(ne,Te){return[(Te.valueToCode(ne,"VALUE",Le.MEMBER)||"''")+".length",Le.MEMBER]},kt=function(ne,Te){return["!"+(Te.valueToCode(ne,"VALUE",Le.MEMBER)||"''")+".length",Le.LOGICAL_NOT]},vt=function(ne,Te){const je=ne.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",ct=Te.valueToCode(ne,"FIND",Le.NONE)||"''";return Te=(Te.valueToCode(ne,"VALUE",Le.MEMBER)||"''")+"."+je+"("+ct+")",ne.workspace.options.oneBasedIndex?[Te+" + 1",Le.ADDITION]:[Te,Le.FUNCTION_CALL]},Mt=function(ne,Te){const je=ne.getFieldValue("WHERE")||"FROM_START",ct=Te.valueToCode(ne,"VALUE",je==="RANDOM"?Le.NONE:Le.MEMBER)||"''";switch(je){case"FIRST":return[ct+".charAt(0)",Le.FUNCTION_CALL];case"LAST":return[ct+".slice(-1)",Le.FUNCTION_CALL];case"FROM_START":return ne=Te.getAdjusted(ne,"AT"),[ct+".charAt("+ne+")",Le.FUNCTION_CALL];case"FROM_END":return ne=Te.getAdjusted(ne,"AT",1,!0),[ct+".slice("+ne+").charAt(0)",Le.FUNCTION_CALL];case"RANDOM":return[Te.provideFunction_("textRandomLetter",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+ct+")",Le.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},Ct=function(ne,Te){var je={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const ct=ne.getFieldValue("WHERE1"),Ht=ne.getFieldValue("WHERE2");var nn=ct!=="FROM_END"&&ct!=="LAST"&&Ht!=="FROM_END"&&Ht!=="LAST",kn=Te.valueToCode(ne,"STRING",nn?Le.MEMBER:Le.NONE)||"''";if(ct==="FIRST"&&Ht==="LAST")return[kn,Le.NONE];if(kn.match(/^'?\w+'?$/)||nn){switch(ct){case"FROM_START":je=Te.getAdjusted(ne,"AT1");break;case"FROM_END":je=Te.getAdjusted(ne,"AT1",1,!1,Le.SUBTRACTION),je=kn+".length - "+je;break;case"FIRST":je="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(Ht){case"FROM_START":Te=Te.getAdjusted(ne,"AT2",1);break;case"FROM_END":Te=Te.getAdjusted(ne,"AT2",0,!1,Le.SUBTRACTION),Te=kn+".length - "+Te;break;case"LAST":Te=kn+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}kn=kn+".slice("+je+", "+Te+")"}else nn=Te.getAdjusted(ne,"AT1"),ne=Te.getAdjusted(ne,"AT2"),kn=Te.provideFunction_("subsequence"+je[ct]+je[Ht],`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(sequence${ct==="FROM_END"||ct==="FROM_START"?", at1":""}${Ht==="FROM_END"||Ht==="FROM_START"?", at2":""}) {
  var start = ${Wt("sequence",ct,"at1")};
  var end = ${Wt("sequence",Ht,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+kn+(ct==="FROM_END"||ct==="FROM_START"?", "+nn:"")+(Ht==="FROM_END"||Ht==="FROM_START"?", "+ne:"")+")";return[kn,Le.FUNCTION_CALL]},gt=function(ne,Te){const je={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[ne.getFieldValue("CASE")];return ne=Te.valueToCode(ne,"TEXT",je?Le.MEMBER:Le.NONE)||"''",[je?ne+je:Te.provideFunction_("textToTitleCase",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+ne+")",Le.FUNCTION_CALL]},Ee=function(ne,Te){const je={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[ne.getFieldValue("MODE")];return[(Te.valueToCode(ne,"TEXT",Le.MEMBER)||"''")+je,Le.FUNCTION_CALL]},re=function(ne,Te){return"window.alert("+(Te.valueToCode(ne,"TEXT",Le.NONE)||"''")+`);
`},Be=function(ne,Te){return Te="window.prompt("+(ne.getField("TEXT")?Te.quote_(ne.getFieldValue("TEXT")):Te.valueToCode(ne,"TEXT",Le.NONE)||"''")+")",ne.getFieldValue("TYPE")==="NUMBER"&&(Te="Number("+Te+")"),[Te,Le.FUNCTION_CALL]},mt=function(ne,Te){const je=Te.valueToCode(ne,"TEXT",Le.NONE)||"''";return ne=Te.valueToCode(ne,"SUB",Le.NONE)||"''",[Te.provideFunction_("textCount",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+je+", "+ne+")",Le.FUNCTION_CALL]},yt=function(ne,Te){const je=Te.valueToCode(ne,"TEXT",Le.NONE)||"''",ct=Te.valueToCode(ne,"FROM",Le.NONE)||"''";return ne=Te.valueToCode(ne,"TO",Le.NONE)||"''",[Te.provideFunction_("textReplace",`
function ${Te.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+je+", "+ct+", "+ne+")",Le.FUNCTION_CALL]},wt=function(ne,Te){return[(Te.valueToCode(ne,"TEXT",Le.MEMBER)||"''")+".split('').reverse().join('')",Le.FUNCTION_CALL]},Ke=function(ne,Te){return[Te.getVariableName(ne.getFieldValue("VAR")),Le.ATOMIC]},Qe=function(ne,Te){const je=Te.valueToCode(ne,"VALUE",Le.ASSIGNMENT)||"0";return Te.getVariableName(ne.getFieldValue("VAR"))+" = "+je+`;
`},Le;(function(ne){ne[ne.ATOMIC=0]="ATOMIC",ne[ne.NEW=1.1]="NEW",ne[ne.MEMBER=1.2]="MEMBER",ne[ne.FUNCTION_CALL=2]="FUNCTION_CALL",ne[ne.INCREMENT=3]="INCREMENT",ne[ne.DECREMENT=3]="DECREMENT",ne[ne.BITWISE_NOT=4.1]="BITWISE_NOT",ne[ne.UNARY_PLUS=4.2]="UNARY_PLUS",ne[ne.UNARY_NEGATION=4.3]="UNARY_NEGATION",ne[ne.LOGICAL_NOT=4.4]="LOGICAL_NOT",ne[ne.TYPEOF=4.5]="TYPEOF",ne[ne.VOID=4.6]="VOID",ne[ne.DELETE=4.7]="DELETE",ne[ne.AWAIT=4.8]="AWAIT",ne[ne.EXPONENTIATION=5]="EXPONENTIATION",ne[ne.MULTIPLICATION=5.1]="MULTIPLICATION",ne[ne.DIVISION=5.2]="DIVISION",ne[ne.MODULUS=5.3]="MODULUS",ne[ne.SUBTRACTION=6.1]="SUBTRACTION",ne[ne.ADDITION=6.2]="ADDITION",ne[ne.BITWISE_SHIFT=7]="BITWISE_SHIFT",ne[ne.RELATIONAL=8]="RELATIONAL",ne[ne.IN=8]="IN",ne[ne.INSTANCEOF=8]="INSTANCEOF",ne[ne.EQUALITY=9]="EQUALITY",ne[ne.BITWISE_AND=10]="BITWISE_AND",ne[ne.BITWISE_XOR=11]="BITWISE_XOR",ne[ne.BITWISE_OR=12]="BITWISE_OR",ne[ne.LOGICAL_AND=13]="LOGICAL_AND",ne[ne.LOGICAL_OR=14]="LOGICAL_OR",ne[ne.CONDITIONAL=15]="CONDITIONAL",ne[ne.ASSIGNMENT=16]="ASSIGNMENT",ne[ne.YIELD=17]="YIELD",ne[ne.COMMA=18]="COMMA",ne[ne.NONE=99]="NONE"})(Le||(Le={}));var Q=class extends r.CodeGenerator$$module$build$src$core$generator{constructor(ne="JavaScript"){super(ne),this.ORDER_OVERRIDES=[[Le.FUNCTION_CALL,Le.MEMBER],[Le.FUNCTION_CALL,Le.FUNCTION_CALL],[Le.MEMBER,Le.MEMBER],[Le.MEMBER,Le.FUNCTION_CALL],[Le.LOGICAL_NOT,Le.LOGICAL_NOT],[Le.MULTIPLICATION,Le.MULTIPLICATION],[Le.ADDITION,Le.ADDITION],[Le.LOGICAL_AND,Le.LOGICAL_AND],[Le.LOGICAL_OR,Le.LOGICAL_OR]],this.isInitialized=!1;for(const Te in Le)ne=Le[Te],typeof ne!="string"&&(this["ORDER_"+Te]=ne);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(ne){super.init(ne),this.nameDB_?this.nameDB_.reset():this.nameDB_=new r.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(ne.getVariableMap()),this.nameDB_.populateVariables(ne),this.nameDB_.populateProcedures(ne);const Te=[];var je=r.allDeveloperVariables$$module$build$src$core$variables(ne);for(let ct=0;ct<je.length;ct++)Te.push(this.nameDB_.getName(je[ct],r.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(ne=r.allUsedVarModels$$module$build$src$core$variables(ne),je=0;je<ne.length;je++)Te.push(this.nameDB_.getName(ne[je].getId(),r.NameType$$module$build$src$core$names.VARIABLE));Te.length&&(this.definitions_.variables="var "+Te.join(", ")+";"),this.isInitialized=!0}finish(ne){const Te=Object.values(this.definitions_);return super.finish(ne),this.isInitialized=!1,this.nameDB_.reset(),Te.join(`

`)+`


`+ne}scrubNakedValue(ne){return ne+`;
`}quote_(ne){return ne=ne.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+ne+"'"}multiline_quote_(ne){return ne.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(ne,Te,je=!1){let ct="";if(!ne.outputConnection||!ne.outputConnection.targetConnection){var Ht=ne.getCommentText();Ht&&(Ht=r.wrap$$module$build$src$core$utils$string(Ht,this.COMMENT_WRAP-3),ct+=this.prefixLines(Ht+`
`,"// "));for(let nn=0;nn<ne.inputList.length;nn++)ne.inputList[nn].type===r.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(Ht=ne.inputList[nn].connection.targetBlock())&&(Ht=this.allNestedComments(Ht))&&(ct+=this.prefixLines(Ht,"// "))}return ne=ne.nextConnection&&ne.nextConnection.targetBlock(),je=je?"":this.blockToCode(ne),ct+Te+je}getAdjusted(ne,Te,je=0,ct=!1,Ht=Le.NONE){ne.workspace.options.oneBasedIndex&&je--;const nn=ne.workspace.options.oneBasedIndex?"1":"0";let kn=Ht;return 0<je?kn=Le.ADDITION:0>je?kn=Le.SUBTRACTION:ct&&(kn=Le.UNARY_NEGATION),ne=this.valueToCode(ne,Te,kn)||nn,je===0&&!ct?ne:r.isNumber$$module$build$src$core$utils$string(ne)?(ne=String(Number(ne)+je),ct&&(ne=String(-Number(ne))),ne):(0<je?ne=`${ne} + ${je}`:0>je&&(ne=`${ne} - ${-je}`),ct&&(ne=je?`-(${ne})`:`-${ne}`),Math.floor(Ht)>=Math.floor(kn)&&(ne=`(${ne})`),ne)}},te={};te.colour_blend=u,te.colour_picker=s,te.colour_random=o,te.colour_rgb=l;var me=function(ne,Te,je){return Te==="FIRST"?"0":Te==="FROM_END"?ne+".length - 1 - "+je:Te==="LAST"?ne+".length - 1":je},Re={};Re.lists_create_empty=h,Re.lists_create_with=f,Re.lists_getIndex=C,Re.lists_getSublist=A,Re.lists_indexOf=S,Re.lists_isEmpty=b,Re.lists_length=y,Re.lists_repeat=g,Re.lists_reverse=P,Re.lists_setIndex=M,Re.lists_sort=k,Re.lists_split=O;var Fe={};Fe.controls_if=D,Fe.controls_ifelse=D,Fe.logic_boolean=z,Fe.logic_compare=U,Fe.logic_negate=V,Fe.logic_null=Z,Fe.logic_operation=H,Fe.logic_ternary=oe;var bt={};bt.controls_flow_statements=ce,bt.controls_for=ae,bt.controls_forEach=le,bt.controls_repeat=ue,bt.controls_repeat_ext=ue,bt.controls_whileUntil=q;var ze={};ze.math_arithmetic=$e,ze.math_atan2=Ze,ze.math_change=fe,ze.math_constant=ie,ze.math_constrain=ke,ze.math_modulo=Ue,ze.math_number=ge,ze.math_number_property=se,ze.math_on_list=Se,ze.math_random_float=we,ze.math_random_int=qe,ze.math_round=K,ze.math_single=K,ze.math_trig=K;var Pt={};Pt.procedures_callnoreturn=at,Pt.procedures_callreturn=ft,Pt.procedures_defnoreturn=et,Pt.procedures_defreturn=et,Pt.procedures_ifreturn=Ge;var lt=/^\s*'([^']|\\')*'\s*$/,Gt=function(ne){return lt.test(ne)?[ne,Le.ATOMIC]:["String("+ne+")",Le.FUNCTION_CALL]},Wt=function(ne,Te,je){return Te==="FIRST"?"0":Te==="FROM_END"?ne+".length - 1 - "+je:Te==="LAST"?ne+".length - 1":je},bn={};bn.text=Ie,bn.text_append=st,bn.text_changeCase=gt,bn.text_charAt=Mt,bn.text_count=mt,bn.text_getSubstring=Ct,bn.text_indexOf=vt,bn.text_isEmpty=kt,bn.text_join=it,bn.text_length=It,bn.text_multiline=He,bn.text_print=re,bn.text_prompt=Be,bn.text_prompt_ext=Be,bn.text_replace=yt,bn.text_reverse=wt,bn.text_trim=Ee;var ar={};ar.variables_get=Ke,ar.variables_set=Qe;var cr={};cr.variables_get_dynamic=Ke,cr.variables_set_dynamic=Qe;var oi=new Q,Mr=Object.assign({},te,Re,Fe,bt,ze,Pt,bn,ar,cr);for(const ne in Mr)oi.forBlock[ne]=Mr[ne];var _r={};return _r.JavascriptGenerator=Q,_r.Order=Le,_r.javascriptGenerator=oi,_r.__namespace__=r,_r})}(_O)),_O.exports}(function(n,e){(function(t,r){n.exports=r(jF(),Lie())})(jl,function(t,r){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return r})})($j);var Iw=$j.exports,t5;function Nie(){return t5||(t5=1,function(n,e){(function(t,r){n.exports=r(jF(),Rie(),Oie(),Iw)})(jl,function(t,r,s,o){return t.setLocale(r),t})}(hO)),hO.exports}(function(n,e){(function(t,r){n.exports=r(Nie())})(jl,function(t){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})})(xj);var Sy=xj.exports,Rt=jF();const Die={colour:"#5f86b7"},Pie={colour:"#5f86b7"},Bie={colour:"#0b522e"},Fie={colour:"#0b522e"},zie={colour:"#c86949"},Uie={colour:"#50b166"},Hie={colour:"#802639"},Gie={colour:"#2dadb8"},Wie={colour:"#d20e4d"},Vie={colour:"#96a467"},Ft={trigger_category:Die,procedure_category:Pie,logic_category:Bie,loop_category:Fie,math_category:zie,movement_category:Uie,light_category:Hie,speech_category:Gie,face_category:Wie,audio_category:Vie};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vp extends Rt.FieldNumber{constructor(e,t,r,s,o,l,u,h){super(e,t,r,s,u,h),this.boundEvents=[],this.sliderInput=null,this.leftLabel=o,this.rightLabel=l}setLeftLabel(e){this.leftLabel=e}setRightLabel(e){this.rightLabel=e}setLabels(e,t){this.leftLabel=e,this.rightLabel=t}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,void 0,void 0,e)}showEditor_(e,t){super.showEditor_(e,!0);const r=this.dropdownCreate_();Rt.DropDownDiv.getContentDiv().appendChild(r);const s=this.getSourceBlock();if(s instanceof Rt.BlockSvg){const o=s.getColour()||"",l=s.getColourTertiary()||"";Rt.DropDownDiv.setColour(o,l)}Rt.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),t||r.firstChild.focus({preventScroll:!0})}render_(){super.render_(),this.updateSlider_()}static createLabelInContainer(e,t){const r=document.createElement("div"),s=document.createElement("span"),o=document.createElement("span");return r.classList.add("mathNumSliderLabel"),s.textContent=e,r.appendChild(s),r.appendChild(o),t.appendChild(r),o}dropdownCreate_(){const e=document.createElement("div");e.className="mathNumSliderContainer",this.leftLabel&&vp.createLabelInContainer(this.leftLabel,e);const t=document.createElement("input");return t.setAttribute("type","range"),t.setAttribute("min",`${this.min_}`),t.setAttribute("max",`${this.max_}`),t.setAttribute("step",`${this.precision_}`),t.setAttribute("value",`${this.getValue()}`),t.setAttribute("tabindex","0"),t.className="mathNumSlider",e.appendChild(t),this.rightLabel&&vp.createLabelInContainer(this.rightLabel,e),this.sliderInput=t,this.boundEvents.push(Rt.browserEvents.conditionalBind(t,"input",this,this.onSliderChange_)),e}dropdownDispose_(){for(const e of this.boundEvents)Rt.browserEvents.unbind(e);this.boundEvents.length=0,this.sliderInput=null}onSliderChange_(){var t;const e=this.value_;this.setEditorValue_((t=this.sliderInput)==null?void 0:t.value,!1),this.getSourceBlock()&&Rt.Events.fire(new(Rt.Events.get(Rt.Events.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_)),this.resizeEditor_()}updateSlider_(){this.sliderInput&&this.sliderInput.setAttribute("value",`${this.getValue()}`)}}Rt.fieldRegistry.register("math_num_slider",vp);Rt.Css.register(`
.mathNumSliderContainer {
  align-items: center;
  display: flex;
  height: 32px;
  justify-content: center;
  width: 150px;
}
.mathNumSliderLabel {
    color: white;
}
.mathNumSlider {
  -webkit-appearance: none;
  background: transparent; /* override white in chrome */
  margin: 4px;
  padding: 0;
  width: 100%;
}
.mathNumSlider:focus {
  outline: none;
}
/* Webkit */
.mathNumSlider::-webkit-slider-runnable-track {
  background: #ddd;
  border-radius: 5px;
  height: 10px;
}
.mathNumSlider::-webkit-slider-thumb {
  -webkit-appearance: none;
  background: #fff;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(255,255,255,.15);
  cursor: pointer;
  height: 24px;
  margin-top: -7px;
  width: 24px;
}
/* Firefox */
.mathNumSlider::-moz-range-track {
  background: #ddd;
  border-radius: 5px;
  height: 10px;
}
.mathNumSlider::-moz-range-thumb {
  background: #fff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(255,255,255,.15);
  cursor: pointer;
  height: 24px;
  width: 24px;
}
.mathNumSlider::-moz-focus-outer {
  /* override the focus border style */
  border: 0;
}
/* IE */
.mathNumSlider::-ms-track {
  /* IE wont let the thumb overflow the track, so fake it */
  background: transparent;
  border-color: transparent;
  border-width: 15px 0;
  /* remove default tick marks */
  color: transparent;
  height: 10px;
  width: 100%;
  margin: -4px 0;
}
.mathNumSlider::-ms-fill-lower  {
  background: #ddd;
  border-radius: 5px;
}
.mathNumSlider::-ms-fill-upper  {
  background: #ddd;
  border-radius: 5px;
}
.mathNumSlider::-ms-thumb {
  background: #fff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(255,255,255,.15);
  cursor: pointer;
  height: 24px;
  width: 24px;
}
`);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Vt=["controls_if","controls_repeat_ext","logic_compare","logic_operation","logic_negate","logic_boolean","logic_null","logic_ternary","math_number","math_number_property","math_random_int","colour_picker","colour_blend","colour_random","colour_rgb","text"];const jie={type:"add_text",message0:"Add text %1 with color %2",args0:[{type:"input_value",name:"TEXT",check:"String"},{type:"input_value",name:"COLOR",check:"Colour"}],previousStatement:null,nextStatement:null,colour:160,tooltip:"",helpUrl:""};let Cj="ChangeLED";Vt.push(Cj);Rt.Blocks[Cj]={init:function(){this.setColour(Ft.light_category.colour),this.appendValueInput("FIELD_ChangeLED").setCheck("Colour").appendField("Change the LED color to"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setOutput(!1),this.setTooltip("Changes Misty's LED to a specified color")}};let Mj="CustomIF";Vt.push(Mj);Rt.Blocks[Mj]={init:function(){this.setColour(Ft.logic_category.colour),this.appendValueInput("IF0").setCheck("Boolean").appendField("If"),this.appendStatementInput("DO0").appendField("Do"),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("If control block")}};let Aj="TransitionLED";Vt.push(Aj);Rt.Blocks[Aj]={init:function(){var n=this.workspace.newBlock("TimeSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection;this.setColour(Ft.light_category.colour),this.appendDummyInput("FIELD_TEXT_IGNORE").appendField("Transition LED"),this.appendValueInput("COLOR1").setCheck("Colour").appendField("Color 1"),this.appendValueInput("COLOR2").setCheck("Colour").appendField("Color 2"),this.appendDummyInput().appendField("Mode: ").appendField(new Rt.FieldDropdown([["Breathe","BREATHE"],["Blink","BLINK"],["Switch","TRANSITION_ONCE"]]),"TRANSITION_TYPE"),this.appendValueInput("FIELD_Duration").setCheck("Number").appendField("Duration (seconds): "),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Transition LED between two colors with the specified transition type and time.");var t=this.getInput("FIELD_Duration").connection;t.connect(e)}};let Ij="DisplayImage";Vt.push(Ij);Rt.Blocks[Ij]={init:function(){this.setColour(Ft.face_category.colour),this.appendValueInput("FIELD_DisplayImage_Filename").setCheck("Face").appendField("Change face expression to: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Displays an image on Misty's screen, Alpha specifies transparency (0 is completely transparent, 1 is completely opaque) ***WARNING: MUST connect with ListFilesAvailable to select the image file to display***")}};let Rj="DisplayAnimation";Vt.push(Rj);Rt.Blocks[Rj]={init:function(){this.setColour(Ft.misc_category.colour),this.appendValueInput("FIELD_DisplayAnimation_Filename").setCheck("Animation").appendField("Show this animation on Misty: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Runs a specified animation on Misty")}};let kj="MoveHead";Vt.push(kj);Rt.Blocks[kj]={init:function(){this.setColour(Ft.movement_category.colour),this.appendDummyInput().appendField("Move head").appendField(new Rt.FieldDropdown([["Up","U"],["Down","D"]]),"FIELD_MoveHead_Pitch"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves Misty's head Up or Down")}};let Oj="MoveArm";Vt.push(Oj);Rt.Blocks[Oj]={init:function(){this.setColour(Ft.movement_category.colour),this.appendDummyInput().appendField("Move ").appendField(new Rt.FieldDropdown([["Right","Right"],["Left","Left"]]),"FIELD_MoveArm_Arm").appendField("arm to position").appendField(new vp(45,-29,90,1,"Up","Down"),"FIELD_MoveArm_Position").appendField("at a speed of (0 to 100)").appendField(new vp(50,0,100,1,"Slow","Fast"),"FIELD_MoveArm_Velocity"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves one of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed (between 0 and 100)")}};let Lj="MoveArm2";Vt.push(Lj);Rt.Blocks[Lj]={init:function(){this.setColour(Ft.movement_category.colour),this.appendDummyInput().appendField("Move both arms to position").appendField(new vp(45,-29,90,1,"Up","Down"),"FIELD_MoveArm2_Position").appendField("at a speed of (0 to 100)").appendField(new vp(50,0,100,1,"Slow","Fast"),"FIELD_MoveArm2_Velocity"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed (between 0 and 100)")}};let Nj="BasicSlider";Vt.push(Nj);Rt.Blocks[Nj]={init:function(){this.setColour(Ft.math_category.colour),this.appendDummyInput().appendField("Slider Value: ").appendField(new vp(0,0,100,1,"Min","Max"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let Dj="ArmPositionSlider";Vt.push(Dj);Rt.Blocks[Dj]={init:function(){this.setColour(Ft.math_category.colour),this.appendDummyInput().appendField(new vp(45,-29,90,1,"Up","Down"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let Pj="SpeedSlider";Vt.push(Pj);Rt.Blocks[Pj]={init:function(){this.setColour(Ft.math_category.colour),this.appendDummyInput().appendField(new vp(1,1,100,1,"Slow","Fast"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let Bj="TimeSlider";Vt.push(Bj);Rt.Blocks[Bj]={init:function(){this.setColour(Ft.math_category.colour),this.appendDummyInput().appendField(new vp(1,1,60,1,"Short","Long"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let Fj="HeadPitchSlider";Vt.push(Fj);Rt.Blocks[Fj]={init:function(){this.setColour(Ft.math_category.colour),this.appendDummyInput().appendField(new vp(0,-40,25,1,"Up","Down"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let zj="HeadRollSlider";Vt.push(zj);Rt.Blocks[zj]={init:function(){this.setColour(Ft.math_category.colour),this.appendDummyInput().appendField(new vp(0,-40,40,1,"Right","Left"),"FIELD_slider_value"),this.setInputsInline(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,null)}};let Uj="HeadYawSlider";Vt.push(Uj);Rt.Blocks[Uj]={init:function(){this.setColour(Ft.math_category.colour),this.appendDummyInput().appendField(new vp(0,-81,81,1,"Right","Left"),"FIELD_slider_value"),this.setInputsInline(!1),this.setOutput(!0,null)}};let Hj="MoveArms2";Vt.push(Hj);Rt.Blocks[Hj]={init:function(){var n=this.workspace.newBlock("ArmPositionSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("SpeedSlider");t.setShadow(!0),t.initSvg(),t.render();var r=t.outputConnection,s=this.workspace.newBlock("ArmPositionSlider");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection,l=this.workspace.newBlock("SpeedSlider");l.setShadow(!0),l.initSvg(),l.render();var u=l.outputConnection;this.setColour(Ft.movement_category.colour),this.appendValueInput("FIELD_MoveArm_LeftPosition").setCheck("Number").appendField("Left Arm Position");var h=this.getInput("FIELD_MoveArm_LeftPosition").connection;h.connect(e),this.appendValueInput("FIELD_MoveArm_LeftVelocity").setCheck("Number").appendField("Left Arm Speed");var g=this.getInput("FIELD_MoveArm_LeftVelocity").connection;g.connect(r),this.appendValueInput("FIELD_MoveArm_RightPosition").setCheck("Number").appendField("Right Arm Position");var f=this.getInput("FIELD_MoveArm_RightPosition").connection;f.connect(o),this.appendValueInput("FIELD_MoveArm_RightVelocity").setCheck("Number").appendField("Right Arm Speed");var g=this.getInput("FIELD_MoveArm_RightVelocity").connection;g.connect(u),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed")}};let Gj="MoveArm3";Vt.push(Gj);Rt.Blocks[Gj]={init:function(){var n=this.workspace.newBlock("ArmPositionSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("SpeedSlider");t.setShadow(!0),t.initSvg(),t.render();var r=t.outputConnection;this.appendDummyInput().appendField("Move Arm: ").appendField(new Rt.FieldDropdown([["Right","Right"],["Left","Left"]]),"FIELD_MoveArm_Arm"),this.setColour(Ft.movement_category.colour),this.appendValueInput("FIELD_MoveArm_Position").setCheck("Number").appendField("Left Arm Position");var s=this.getInput("FIELD_MoveArm_Position").connection;s.connect(e),this.appendValueInput("FIELD_MoveArm_Velocity").setCheck("Number").appendField("Left Arm Speed");var o=this.getInput("FIELD_MoveArm_Velocity").connection;o.connect(r),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed")}};let Wj="DriveTime";Vt.push(Wj);Rt.Blocks[Wj]={init:function(){this.setColour(Ft.movement_category.colour),this.appendDummyInput().appendField("Move ").appendField(new Rt.FieldDropdown([["Forward","F"],["Backward","B"]]),"FIELD_DriveTime_Direction").appendField("at a speed of (0 to 100)").appendField(new Rt.FieldNumber(25,0,100,1),"FIELD_DriveTime_Velocity").appendField("for a duration of").appendField(new Rt.FieldNumber(1,0,60,1),"FIELD_DriveTime_TimeMs").appendField("secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Drives Misty straight in a specified direction at a specified speed for a specified amount of time (1000ms = 1 second)")}};let Vj="MoveHead3";Vt.push(Vj);Rt.Blocks[Vj]={init:function(){var n=this.workspace.newBlock("HeadPitchSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("HeadRollSlider");t.setShadow(!0),t.initSvg(),t.render();var r=t.outputConnection,s=this.workspace.newBlock("HeadYawSlider");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection,l=this.workspace.newBlock("TimeSlider");l.setShadow(!0),l.initSvg(),l.render();var u=l.outputConnection;this.setColour(Ft.movement_category.colour),this.appendDummyInput("FIELD_TEXT_IGNORE").appendField("Move head"),this.appendValueInput("FIELD_MoveHead_Pitch").setCheck("Number").appendField("Look Up/Down:");var h=this.getInput("FIELD_MoveHead_Pitch").connection;h.connect(e),this.appendValueInput("FIELD_MoveHead_Roll").setCheck("Number").appendField("Tilt Left/Right:");var f=this.getInput("FIELD_MoveHead_Roll").connection;f.connect(r),this.appendValueInput("FIELD_MoveHead_Yaw").setCheck("Number").appendField("Look Right/Left:");var g=this.getInput("FIELD_MoveHead_Yaw").connection;g.connect(o),this.appendValueInput("FIELD_MoveHead_Time").setCheck("Number").appendField("Time (seconds):");var y=this.getInput("FIELD_MoveHead_Time").connection;y.connect(u),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves Misty's head a specified amount of degrees with roll, pitch, and/or yaw")}};let jj="DriveTime2";Vt.push(jj);Rt.Blocks[jj]={init:function(){var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("math_number");t.setShadow(!0),t.initSvg(),t.render();var r=t.outputConnection,s=this.workspace.newBlock("math_number");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection;this.setColour(Ft.movement_category.colour),this.appendValueInput("FIELD_DriveTime_Velocity").setCheck("Number").appendField("Move at a speed of (-100 to 100)");var l=this.getInput("FIELD_DriveTime_Velocity").connection;l.connect(e),this.appendValueInput("FIELD_DriveTime_Angular").setCheck("Number").appendField("with angular velocity of (-100 CW to 100 CCW)");var u=this.getInput("FIELD_DriveTime_Angular").connection;u.connect(r),this.appendValueInput("FIELD_DriveTime_TimeMs").setCheck("Number").appendField("for a duration of secs");var h=this.getInput("FIELD_DriveTime_TimeMs").connection;h.connect(o),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Drives Misty forward (positive speed) or backward (negative speed) with possible turning using angular velocity (0 for straight) for the specified duration (1000 ms = 1 second)")}};let Yj="Turn";Vt.push(Yj);Rt.Blocks[Yj]={init:function(){this.setColour(Ft.movement_category.colour),this.appendDummyInput().appendField("Turn").appendField(new Rt.FieldDropdown([["Left","L"],["Right","R"]]),"FIELD_Turn_Direction").appendField("for time of").appendField(new Rt.FieldNumber(4500),"FIELD_Turn_Duration").appendField("milliseconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turns Misty in the specified direction (1000ms = 1 second and 4500ms is approximately 90 degrees)")}};let Xj="Turn2";Vt.push(Xj);Rt.Blocks[Xj]={init:function(){var n=this.workspace.newBlock("TimeSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection;this.setColour(Ft.movement_category.colour),this.appendDummyInput().appendField("Turn").appendField(new Rt.FieldDropdown([["Left","L"],["Right","R"]]),"FIELD_Turn_Direction"),this.appendValueInput("FIELD_Turn_Duration").setCheck("Number").appendField("for");var t=this.getInput("FIELD_Turn_Duration").connection;t.connect(e),this.appendDummyInput().appendField("seconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turns Misty in the specified direction (1000ms = 1 second and 4500ms is approximately 90 degrees)")}};let Kj="Speak";Vt.push(Kj);Rt.Blocks[Kj]={init:function(){this.setColour(Ft.speech_category.colour),this.appendValueInput("FIELD_Speak_Text").setCheck("String").appendField("Speak: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Speak given input text")}};let Jj="SpeakDefault";Vt.push(Jj);Rt.Blocks[Jj]={init:function(){this.setColour(Ft.speech_category.colour),this.appendDummyInput().appendField("Speak: ").appendField(new Rt.FieldDropdown([["Hi","Hi"],["Hello","Hello"],["How are you today?","How are you today?"],["Goodbye","Goodbye"]]),"FIELD_SpeakDefault_Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Speak given selected default text")}};let qj="TurnOnFlashlight";Vt.push(qj);Rt.Blocks[qj]={init:function(){this.setColour(Ft.light_category.colour),this.appendDummyInput().appendField("Turn on flashlight "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turn on flashlight")}};let Qj="TurnOffFlashlight";Vt.push(Qj);Rt.Blocks[Qj]={init:function(){this.setColour(Ft.light_category.colour),this.appendDummyInput().appendField("Turn off flashlight "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turn off flashlight")}};let Zj="WaitForSeconds";Vt.push(Zj);Rt.Blocks[Zj]={init:function(){var n=this.workspace.newBlock("TimeSlider");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection;this.appendDummyInput().appendField("Wait"),this.appendValueInput("FIELD_Duration").setCheck(Number).appendField("Duration (seconds): "),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(Ft.movement_category.colour),this.setTooltip("Delay the execution of the next block by some number of seconds");var t=this.getInput("FIELD_Duration").connection;t.connect(e)}};let e7="PlayAudio";Vt.push(e7);Rt.Blocks[e7]={init:function(){this.setColour(Ft.audio_category.colour),this.appendValueInput("FIELD_PlayAudio_Filename").setCheck("Audio").appendField("Play audio: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};let t7="SetVolume";Vt.push(t7);Rt.Blocks[t7]={init:function(){this.setColour(Ft.audio_category.colour);var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection;this.appendValueInput("FIELD_Volume").setCheck("Number").appendField("Set volume to (0-100): ");var t=this.getInput("FIELD_Volume").connection;t.connect(e),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Adjusts Misty's volume level for audio playback")}};let n7="DisplayText";Vt.push(n7);Rt.Blocks[n7]={init:function(){this.setColour(Ft.face_category.colour),this.appendDummyInput().appendField("Display Text: ").appendField(new Rt.FieldTextInput("default"),"FIELD_DisplayText_Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};let r7="ClearText";Vt.push(r7);Rt.Blocks[r7]={init:function(){this.setColour(Ft.face_category.colour),this.appendDummyInput().appendField("Clear Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};let i7="Start";Vt.push(i7);Rt.Blocks[i7]={init:function(){this.setStyle("hat_blocks"),this.appendDummyInput().appendField("Program starts here"),this.setColour(Ft.trigger_category.colour),this.setTooltip("This is the starting block"),this.setNextStatement(!0,null),this.setHelpUrl(""),this.setDeletable(!1)}};let s7="FrontLeftBumperPress";Vt.push(s7);Rt.Blocks[s7]={init:function(){this.setStyle("hat_blocks"),this.setColour(Ft.trigger_category.colour),this.appendDummyInput().appendField("Front Left Bumper Pressed"),this.setNextStatement(!0,null),this.setTooltip("")}};let o7="FrontRightBumperPress";Vt.push(o7);Rt.Blocks[o7]={init:function(){this.setStyle("hat_blocks"),this.setColour(Ft.trigger_category.colour),this.appendDummyInput().appendField("Front Right Bumper Pressed"),this.setNextStatement(!0,null),this.setTooltip("")}};let a7="RearLeftBumperPress";Vt.push(a7);Rt.Blocks[a7]={init:function(){this.setStyle("hat_blocks"),this.setColour(Ft.trigger_category.colour),this.appendDummyInput().appendField("Rear Left Bumper Pressed"),this.setNextStatement(!0,null),this.setTooltip("")}};let l7="RearRightBumperPress";Vt.push(l7);Rt.Blocks[l7]={init:function(){this.setStyle("hat_blocks"),this.setColour(Ft.trigger_category.colour),this.appendDummyInput().appendField("Right Rear Bumper Pressed"),this.setNextStatement(!0,null),this.setTooltip("")}};let u7="eyes_acceptance";Vt.push(u7);Rt.Blocks[u7]={init:function(){this.appendDummyInput().appendField("Expression: acceptance"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'acceptance'")}};let c7="eyes_admiration";Vt.push(c7);Rt.Blocks[c7]={init:function(){this.appendDummyInput().appendField("Expression: admiration"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'admiration'")}};let h7="eyes_amazement";Vt.push(h7);Rt.Blocks[h7]={init:function(){this.appendDummyInput().appendField("Expression: amazement"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'amazement'")}};let d7="eyes_anger";Vt.push(d7);Rt.Blocks[d7]={init:function(){this.appendDummyInput().appendField("Expression: anger"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'anger'")}};let f7="eyes_annoyed";Vt.push(f7);Rt.Blocks[f7]={init:function(){this.appendDummyInput().appendField("Expression: annoyed"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'annoyed'")}};let p7="eyes_anticipation";Vt.push(p7);Rt.Blocks[p7]={init:function(){this.appendDummyInput().appendField("Expression: anticipation"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'anticipation'")}};let m7="eyes_apprehension";Vt.push(m7);Rt.Blocks[m7]={init:function(){this.appendDummyInput().appendField("Expression: apprehension"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'apprehension'")}};let g7="eyes_boredom";Vt.push(g7);Rt.Blocks[g7]={init:function(){this.appendDummyInput().appendField("Expression: boredom"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'boredom'")}};let v7="eyes_default";Vt.push(v7);Rt.Blocks[v7]={init:function(){this.appendDummyInput().appendField("Expression: default"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'default'")}};let _7="eyes_disgust";Vt.push(_7);Rt.Blocks[_7]={init:function(){this.appendDummyInput().appendField("Expression: disgust"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'disgust'")}};let y7="eyes_distraction";Vt.push(y7);Rt.Blocks[y7]={init:function(){this.appendDummyInput().appendField("Expression: distraction"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'distraction'")}};let b7="eyes_ecstasy_frame_1";Vt.push(b7);Rt.Blocks[b7]={init:function(){this.appendDummyInput().appendField("Expression: ecstasy 1"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'ecstasy 1'")}};let T7="eyes_ecstasy_frame_2";Vt.push(T7);Rt.Blocks[T7]={init:function(){this.appendDummyInput().appendField("Expression: ecstasy 2"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'ecstasy 2'")}};let S7="eyes_fear";Vt.push(S7);Rt.Blocks[S7]={init:function(){this.appendDummyInput().appendField("Expression: fear"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'fear'")}};let w7="eyes_grief";Vt.push(w7);Rt.Blocks[w7]={init:function(){this.appendDummyInput().appendField("Expression: grief"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'grief'")}};let E7="eyes_interest";Vt.push(E7);Rt.Blocks[E7]={init:function(){this.appendDummyInput().appendField("Expression: interest"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'interest'")}};let x7="eyes_joy";Vt.push(x7);Rt.Blocks[x7]={init:function(){this.appendDummyInput().appendField("Expression: joy"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'joy'")}};let $7="eyes_loathing";Vt.push($7);Rt.Blocks[$7]={init:function(){this.appendDummyInput().appendField("Expression: loathing"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'loathing'")}};let C7="eyes_pensiveness";Vt.push(C7);Rt.Blocks[C7]={init:function(){this.appendDummyInput().appendField("Expression: pensiveness"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'pensiveness'")}};let M7="eyes_rage";Vt.push(M7);Rt.Blocks[M7]={init:function(){this.appendDummyInput().appendField("Expression: rage eyes"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'rage eyes'")}};let A7="eyes_sad";Vt.push(A7);Rt.Blocks[A7]={init:function(){this.appendDummyInput().appendField("Expression: sad"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'sad'")}};let I7="eyes_serenity";Vt.push(I7);Rt.Blocks[I7]={init:function(){this.appendDummyInput().appendField("Expression: serenity"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'serenity'")}};let R7="eyes_surprise";Vt.push(R7);Rt.Blocks[R7]={init:function(){this.appendDummyInput().appendField("Expression: surprise"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'surprise'")}};let k7="eyes_terror";Vt.push(k7);Rt.Blocks[k7]={init:function(){this.appendDummyInput().appendField("Expression: terror"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'terror'")}};let O7="eyes_trust";Vt.push(O7);Rt.Blocks[O7]={init:function(){this.appendDummyInput().appendField("Expression: trust"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'trust'")}};let L7="eyes_vigilance";Vt.push(L7);Rt.Blocks[L7]={init:function(){this.appendDummyInput().appendField("Expression: vigilance"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'vigilance'")}};let N7="e_Sleeping";Vt.push(N7);Rt.Blocks[N7]={init:function(){this.appendDummyInput().appendField("Expression: sleeping"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'sleeping'")}};let D7="e_SleepingZZZ";Vt.push(D7);Rt.Blocks[D7]={init:function(){this.appendDummyInput().appendField("Expression: sleeping ZZZ"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'sleeping ZZZ'")}};let P7="e_Contempt";Vt.push(P7);Rt.Blocks[P7]={init:function(){this.appendDummyInput().appendField("Expression: contempt"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'contempt'")}};let B7="e_ContentLeft";Vt.push(B7);Rt.Blocks[B7]={init:function(){this.appendDummyInput().appendField("Expression: content (left)"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'content (left)'")}};let F7="e_ContentRight";Vt.push(F7);Rt.Blocks[F7]={init:function(){this.appendDummyInput().appendField("Expression: content (right)"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'content (right)'")}};let z7="e_Disoriented";Vt.push(z7);Rt.Blocks[z7]={init:function(){this.appendDummyInput().appendField("Expression: disoriented"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'disoriented'")}};let U7="e_EcstacyHilarious";Vt.push(U7);Rt.Blocks[U7]={init:function(){this.appendDummyInput().appendField("Expression: ecstacy hilarious"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'ecstacy hilarious'")}};let H7="e_EcstacyStarryEyed";Vt.push(H7);Rt.Blocks[H7]={init:function(){this.appendDummyInput().appendField("Expression: ecstacy starry eyed"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'ecstacy starry eyed'")}};let G7="e_JoyGoofy";Vt.push(G7);Rt.Blocks[G7]={init:function(){this.appendDummyInput().appendField("Expression: joy goofy"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'joy goofy'")}};let W7="e_JoyGoofy2";Vt.push(W7);Rt.Blocks[W7]={init:function(){this.appendDummyInput().appendField("Expression: joy goofy 2"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'joy goofy 2'")}};let V7="e_JoyGoofy3";Vt.push(V7);Rt.Blocks[V7]={init:function(){this.appendDummyInput().appendField("Expression: joy goofy 3"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'joy goofy 3'")}};let j7="e_Love";Vt.push(j7);Rt.Blocks[j7]={init:function(){this.appendDummyInput().appendField("Expression: love"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'love'")}};let Y7="e_Rage";Vt.push(Y7);Rt.Blocks[Y7]={init:function(){this.appendDummyInput().appendField("Expression: rage"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'rage'")}};let X7="e_Rage2";Vt.push(X7);Rt.Blocks[X7]={init:function(){this.appendDummyInput().appendField("Expression: rage 2"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'rage 2'")}};let K7="e_Rage3";Vt.push(K7);Rt.Blocks[K7]={init:function(){this.appendDummyInput().appendField("Expression: rage 3"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'rage 3'")}};let J7="e_Rage4";Vt.push(J7);Rt.Blocks[J7]={init:function(){this.appendDummyInput().appendField("Expression: rage 4"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'rage 4'")}};let q7="e_RemorseShame";Vt.push(q7);Rt.Blocks[q7]={init:function(){this.appendDummyInput().appendField("Expression: remorse shame"),this.setOutput(!0,"Face"),this.setColour(Ft.face_category.colour),this.setTooltip("Represents the facial expression 'remorse shame'")}};Rt.Blocks["animation_sleepy.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Sleeping"),this.setOutput(!0,"Animation"),this.setColour(Ft.face_category.colour),this.setTooltip("Run the animation 'sleepy'")}};Rt.Blocks["animation_dancing.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Dancing"),this.setOutput(!0,"Animation"),this.setColour(Ft.face_category.colour),this.setTooltip("Run the animation 'dancing'")}};Rt.Blocks["animation_spooked.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Spooked"),this.setOutput(!0,"Animation"),this.setColour(Ft.face_category.colour),this.setTooltip("Run the animation 'spooked'")}};let Q7="s_Acceptance";Vt.push(Q7);Rt.Blocks[Q7]={init:function(){this.appendDummyInput().appendField("Sound: acceptance"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'acceptance'")}};let Z7="s_Amazement";Vt.push(Z7);Rt.Blocks[Z7]={init:function(){this.appendDummyInput().appendField("Sound: amazement"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'amazement'")}};let eY="s_Amazement2";Vt.push(eY);Rt.Blocks[eY]={init:function(){this.appendDummyInput().appendField("Sound: amazement 2"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'amazement 2'")}};let tY="s_Anger";Vt.push(tY);Rt.Blocks[tY]={init:function(){this.appendDummyInput().appendField("Sound: anger"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'anger'")}};let nY="s_Anger2";Vt.push(nY);Rt.Blocks[nY]={init:function(){this.appendDummyInput().appendField("Sound: anger 2"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'anger 2'")}};let rY="s_Anger3";Vt.push(rY);Rt.Blocks[rY]={init:function(){this.appendDummyInput().appendField("Sound: anger 3"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'anger 3'")}};let iY="s_Anger4";Vt.push(iY);Rt.Blocks[iY]={init:function(){this.appendDummyInput().appendField("Sound: anger 4"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'anger 4'")}};let sY="s_Annoyance";Vt.push(sY);Rt.Blocks[sY]={init:function(){this.appendDummyInput().appendField("Sound: annoyance"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'annoyance'")}};let oY="s_Annoyance2";Vt.push(oY);Rt.Blocks[oY]={init:function(){this.appendDummyInput().appendField("Sound: annoyance 2"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'annoyance 2'")}};let aY="s_Annoyance3";Vt.push(aY);Rt.Blocks[aY]={init:function(){this.appendDummyInput().appendField("Sound: annoyance 3"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'annoyance 3'")}};let lY="s_Annoyance4";Vt.push(lY);Rt.Blocks[lY]={init:function(){this.appendDummyInput().appendField("Sound: annoyance 4"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'annoyance 4'")}};let uY="s_Awe";Vt.push(uY);Rt.Blocks[uY]={init:function(){this.appendDummyInput().appendField("Sound: awe"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'awe'")}};let cY="s_Awe2";Vt.push(cY);Rt.Blocks[cY]={init:function(){this.appendDummyInput().appendField("Sound: awe 2"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'awe 2'")}};let hY="s_Awe3";Vt.push(hY);Rt.Blocks[hY]={init:function(){this.appendDummyInput().appendField("Sound: awe 3"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'awe 3'")}};let dY="s_Boredom";Vt.push(dY);Rt.Blocks[dY]={init:function(){this.appendDummyInput().appendField("Sound: boredom"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'boredom'")}};let fY="s_Disapproval";Vt.push(fY);Rt.Blocks[fY]={init:function(){this.appendDummyInput().appendField("Sound: disapproval"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'disapproval'")}};let pY="s_Disgust";Vt.push(pY);Rt.Blocks[pY]={init:function(){this.appendDummyInput().appendField("Sound: disgust"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'disgust'")}};let mY="s_Disgust2";Vt.push(mY);Rt.Blocks[mY]={init:function(){this.appendDummyInput().appendField("Sound: disgust 2"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'disgust 2'")}};let gY="s_Disgust3";Vt.push(gY);Rt.Blocks[gY]={init:function(){this.appendDummyInput().appendField("Sound: disgust 3"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'disgust 3'")}};let vY="s_DisorientedConfused";Vt.push(vY);Rt.Blocks[vY]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused'")}};let _Y="s_DisorientedConfused2";Vt.push(_Y);Rt.Blocks[_Y]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 2"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 2'")}};let yY="s_DisorientedConfused3";Vt.push(yY);Rt.Blocks[yY]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 3"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 3'")}};let bY="s_DisorientedConfused4";Vt.push(bY);Rt.Blocks[bY]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 4"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 4'")}};let TY="s_DisorientedConfused5";Vt.push(TY);Rt.Blocks[TY]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 5"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 5'")}};let SY="s_DisorientedConfused6";Vt.push(SY);Rt.Blocks[SY]={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 6"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'disoriented confused 6'")}};let wY="s_Distraction";Vt.push(wY);Rt.Blocks[wY]={init:function(){this.appendDummyInput().appendField("Sound: distraction"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'distraction'")}};let EY="s_Ecstacy";Vt.push(EY);Rt.Blocks[EY]={init:function(){this.appendDummyInput().appendField("Sound: ecstacy"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'ecstacy'")}};let xY="s_Ecstacy2";Vt.push(xY);Rt.Blocks[xY]={init:function(){this.appendDummyInput().appendField("Sound: ecstacy 2"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'ecstacy 2'")}};let $Y="s_Fear";Vt.push($Y);Rt.Blocks[$Y]={init:function(){this.appendDummyInput().appendField("Sound: fear"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'fear'")}};let CY="s_Grief";Vt.push(CY);Rt.Blocks[CY]={init:function(){this.appendDummyInput().appendField("Sound: grief"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'grief'")}};let MY="s_Grief2";Vt.push(MY);Rt.Blocks[MY]={init:function(){this.appendDummyInput().appendField("Sound: grief 2"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'grief 2'")}};let AY="s_Grief3";Vt.push(AY);Rt.Blocks[AY]={init:function(){this.appendDummyInput().appendField("Sound: grief 3"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'grief 3'")}};let IY="s_Grief4";Vt.push(IY);Rt.Blocks[IY]={init:function(){this.appendDummyInput().appendField("Sound: grief 4"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'grief 4'")}};let RY="s_Joy";Vt.push(RY);Rt.Blocks[RY]={init:function(){this.appendDummyInput().appendField("Sound: joy"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'joy'")}};let kY="s_Joy2";Vt.push(kY);Rt.Blocks[kY]={init:function(){this.appendDummyInput().appendField("Sound: joy 2"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'joy 2'")}};let OY="s_Joy3";Vt.push(OY);Rt.Blocks[OY]={init:function(){this.appendDummyInput().appendField("Sound: joy 3"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'joy 3'")}};let LY="s_Joy4";Vt.push(LY);Rt.Blocks[LY]={init:function(){this.appendDummyInput().appendField("Sound: joy 4"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'joy 4'")}};let NY="s_Loathing";Vt.push(NY);Rt.Blocks[NY]={init:function(){this.appendDummyInput().appendField("Sound: loathing"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'loathing'")}};let DY="s_Love";Vt.push(DY);Rt.Blocks[DY]={init:function(){this.appendDummyInput().appendField("Sound: love"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'love'")}};let PY="s_PhraseByeBye";Vt.push(PY);Rt.Blocks[PY]={init:function(){this.appendDummyInput().appendField("Sound: Bye Bye"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Bye Bye'")}};let BY="s_PhraseEvilAhHa";Vt.push(BY);Rt.Blocks[BY]={init:function(){this.appendDummyInput().appendField("Sound: Evil Ah Ha"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Evil Ah Ha'")}};let FY="s_PhraseHello";Vt.push(FY);Rt.Blocks[FY]={init:function(){this.appendDummyInput().appendField("Sound: Hello"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Hello'")}};let zY="s_PhraseNoNoNo";Vt.push(zY);Rt.Blocks[zY]={init:function(){this.appendDummyInput().appendField("Sound: No No No"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'phrase: No No No'")}};let UY="s_PhraseOopsy";Vt.push(UY);Rt.Blocks[UY]={init:function(){this.appendDummyInput().appendField("Sound: Oopsy"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Oopsy'")}};let HY="s_PhraseOwOwOw";Vt.push(HY);Rt.Blocks[HY]={init:function(){this.appendDummyInput().appendField("Sound: Ow Ow Ow"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Ow Ow Ow'")}};let GY="s_PhraseOwwww";Vt.push(GY);Rt.Blocks[GY]={init:function(){this.appendDummyInput().appendField("Sound: Owwww"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Owwww'")}};let WY="s_PhraseUhOh";Vt.push(WY);Rt.Blocks[WY]={init:function(){this.appendDummyInput().appendField("Sound: Uh Oh"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'phrase: Uh Oh'")}};let VY="s_Rage";Vt.push(VY);Rt.Blocks[VY]={init:function(){this.appendDummyInput().appendField("Sound: rage"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'rage'")}};let jY="s_Sadness";Vt.push(jY);Rt.Blocks[jY]={init:function(){this.appendDummyInput().appendField("Sound: sadness"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'sadness'")}};let YY="s_Sadness2";Vt.push(YY);Rt.Blocks[YY]={init:function(){this.appendDummyInput().appendField("Sound: sadness 2"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'sadness 2'")}};let XY="s_Sadness3";Vt.push(XY);Rt.Blocks[XY]={init:function(){this.appendDummyInput().appendField("Sound: sadness 3"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'sadness 3'")}};let KY="s_Sadness4";Vt.push(KY);Rt.Blocks[KY]={init:function(){this.appendDummyInput().appendField("Sound: sadness 4"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'sadness 4'")}};let JY="s_Sadness5";Vt.push(JY);Rt.Blocks[JY]={init:function(){this.appendDummyInput().appendField("Sound: sadness 5"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'sadness 5'")}};let qY="s_Sadness6";Vt.push(qY);Rt.Blocks[qY]={init:function(){this.appendDummyInput().appendField("Sound: sadness 6"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'sadness 6'")}};let QY="s_Sadness7";Vt.push(QY);Rt.Blocks[QY]={init:function(){this.appendDummyInput().appendField("Sound: sadness 7"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'sadness 7'")}};let ZY="s_Sleepy";Vt.push(ZY);Rt.Blocks[ZY]={init:function(){this.appendDummyInput().appendField("Sound: sleepy"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'sleepy'")}};let eX="s_Sleepy2";Vt.push(eX);Rt.Blocks[eX]={init:function(){this.appendDummyInput().appendField("Sound: sleepy 2"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'sleepy 2'")}};let tX="s_Sleepy3";Vt.push(tX);Rt.Blocks[tX]={init:function(){this.appendDummyInput().appendField("Sound: sleepy 3"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'sleepy 3'")}};let nX="s_Sleepy4";Vt.push(nX);Rt.Blocks[nX]={init:function(){this.appendDummyInput().appendField("Sound: sleepy 4"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'sleepy 4'")}};let rX="s_SleepySnore";Vt.push(rX);Rt.Blocks[rX]={init:function(){this.appendDummyInput().appendField("Sound: sleepy snore"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'sleepy snore'")}};let iX="s_SystemCameraShutter";Vt.push(iX);Rt.Blocks[iX]={init:function(){this.appendDummyInput().appendField("Sound: system camera shutter"),this.setOutput(!0,"Audio"),this.setColour(Ft.audio_category.colour),this.setTooltip("Represents the audio 'system camera shutter'")}};const Yie=Rt.common.createBlockDefinitionsFromJsonArray([jie]),Xie=Vt;/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ck=Object.create(null);ck.add_text=function(n,e){const t=e.valueToCode(n,"TEXT",Iw.Order.NONE)||"''",r=e.valueToCode(n,"COLOR",Iw.Order.ATOMIC)||"'#ffffff'";return`${e.provideFunction_("addText",`function ${e.FUNCTION_NAME_PLACEHOLDER_}(text, color) {

  // Add text to the output area.
  const outputDiv = document.getElementById('output');
  const textEl = document.createElement('p');
  textEl.innerText = text;
  textEl.style.color = color;
  outputDiv.appendChild(textEl);
}`)}(${t}, ${r});
`};ck.Start=function(n){return""};var Kie={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const n5=n=>{let e;const t=new Set,r=(g,y)=>{const b=typeof g=="function"?g(e):g;if(!Object.is(b,e)){const S=e;e=y??(typeof b!="object"||b===null)?b:Object.assign({},e,b),t.forEach(C=>C(e,S))}},s=()=>e,h={setState:r,getState:s,getInitialState:()=>f,subscribe:g=>(t.add(g),()=>t.delete(g)),destroy:()=>{(Kie?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},f=e=n(r,s,h);return h},Jie=n=>n?n5(n):n5;var sX={exports:{}},oX={},aX={exports:{}},lX={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw=de;function qie(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Qie=typeof Object.is=="function"?Object.is:qie,Zie=Rw.useState,ese=Rw.useEffect,tse=Rw.useLayoutEffect,nse=Rw.useDebugValue;function rse(n,e){var t=e(),r=Zie({inst:{value:t,getSnapshot:e}}),s=r[0].inst,o=r[1];return tse(function(){s.value=t,s.getSnapshot=e,yO(s)&&o({inst:s})},[n,t,e]),ese(function(){return yO(s)&&o({inst:s}),n(function(){yO(s)&&o({inst:s})})},[n]),nse(t),t}function yO(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Qie(n,t)}catch{return!0}}function ise(n,e){return e()}var sse=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ise:rse;lX.useSyncExternalStore=Rw.useSyncExternalStore!==void 0?Rw.useSyncExternalStore:sse;aX.exports=lX;var ose=aX.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hk=de,ase=ose;function lse(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var use=typeof Object.is=="function"?Object.is:lse,cse=ase.useSyncExternalStore,hse=hk.useRef,dse=hk.useEffect,fse=hk.useMemo,pse=hk.useDebugValue;oX.useSyncExternalStoreWithSelector=function(n,e,t,r,s){var o=hse(null);if(o.current===null){var l={hasValue:!1,value:null};o.current=l}else l=o.current;o=fse(function(){function h(S){if(!f){if(f=!0,g=S,S=r(S),s!==void 0&&l.hasValue){var C=l.value;if(s(C,S))return y=C}return y=S}if(C=y,use(g,S))return C;var M=r(S);return s!==void 0&&s(C,M)?C:(g=S,y=M)}var f=!1,g,y,b=t===void 0?null:t;return[function(){return h(e())},b===null?void 0:function(){return h(b())}]},[e,t,r,s]);var u=cse(n,o[0],o[1]);return dse(function(){l.hasValue=!0,l.value=u},[u]),pse(u),u};sX.exports=oX;var mse=sX.exports;const gse=Jy(mse);var uX={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:vse}=Tt,{useSyncExternalStoreWithSelector:_se}=gse;let r5=!1;const yse=n=>n;function bse(n,e=yse,t){(uX?"production":void 0)!=="production"&&t&&!r5&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),r5=!0);const r=_se(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return vse(r),r}const i5=n=>{(uX?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?Jie(n):n,t=(r,s)=>bse(e,r,s);return Object.assign(t,e),t},Tse=n=>n?i5(n):i5;var YF={},dk={};(function(n){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",t=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",r="["+e+"]["+t+"]*",s=new RegExp("^"+r+"$"),o=function(u,h){const f=[];let g=h.exec(u);for(;g;){const y=[];y.startIndex=h.lastIndex-g[0].length;const b=g.length;for(let S=0;S<b;S++)y.push(g[S]);f.push(y),g=h.exec(u)}return f},l=function(u){const h=s.exec(u);return!(h===null||typeof h>"u")};n.isExist=function(u){return typeof u<"u"},n.isEmptyObject=function(u){return Object.keys(u).length===0},n.merge=function(u,h,f){if(h){const g=Object.keys(h),y=g.length;for(let b=0;b<y;b++)f==="strict"?u[g[b]]=[h[g[b]]]:u[g[b]]=h[g[b]]}},n.getValue=function(u){return n.isExist(u)?u:""},n.isName=l,n.getAllMatches=o,n.nameRegexp=r})(dk);const XF=dk,Sse={allowBooleanAttributes:!1,unpairedTags:[]};YF.validate=function(n,e){e=Object.assign({},Sse,e);const t=[];let r=!1,s=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let o=0;o<n.length;o++)if(n[o]==="<"&&n[o+1]==="?"){if(o+=2,o=o5(n,o),o.err)return o}else if(n[o]==="<"){let l=o;if(o++,n[o]==="!"){o=a5(n,o);continue}else{let u=!1;n[o]==="/"&&(u=!0,o++);let h="";for(;o<n.length&&n[o]!==">"&&n[o]!==" "&&n[o]!=="	"&&n[o]!==`
`&&n[o]!=="\r";o++)h+=n[o];if(h=h.trim(),h[h.length-1]==="/"&&(h=h.substring(0,h.length-1),o--),!Ise(h)){let y;return h.trim().length===0?y="Invalid space after '<'.":y="Tag '"+h+"' is an invalid name.",Oh("InvalidTag",y,Gp(n,o))}const f=xse(n,o);if(f===!1)return Oh("InvalidAttr","Attributes for '"+h+"' have open quote.",Gp(n,o));let g=f.value;if(o=f.index,g[g.length-1]==="/"){const y=o-g.length;g=g.substring(0,g.length-1);const b=l5(g,e);if(b===!0)r=!0;else return Oh(b.err.code,b.err.msg,Gp(n,y+b.err.line))}else if(u)if(f.tagClosed){if(g.trim().length>0)return Oh("InvalidTag","Closing tag '"+h+"' can't have attributes or invalid starting.",Gp(n,l));{const y=t.pop();if(h!==y.tagName){let b=Gp(n,y.tagStartPos);return Oh("InvalidTag","Expected closing tag '"+y.tagName+"' (opened in line "+b.line+", col "+b.col+") instead of closing tag '"+h+"'.",Gp(n,l))}t.length==0&&(s=!0)}}else return Oh("InvalidTag","Closing tag '"+h+"' doesn't have proper closing.",Gp(n,o));else{const y=l5(g,e);if(y!==!0)return Oh(y.err.code,y.err.msg,Gp(n,o-g.length+y.err.line));if(s===!0)return Oh("InvalidXml","Multiple possible root nodes found.",Gp(n,o));e.unpairedTags.indexOf(h)!==-1||t.push({tagName:h,tagStartPos:l}),r=!0}for(o++;o<n.length;o++)if(n[o]==="<")if(n[o+1]==="!"){o++,o=a5(n,o);continue}else if(n[o+1]==="?"){if(o=o5(n,++o),o.err)return o}else break;else if(n[o]==="&"){const y=Mse(n,o);if(y==-1)return Oh("InvalidChar","char '&' is not expected.",Gp(n,o));o=y}else if(s===!0&&!s5(n[o]))return Oh("InvalidXml","Extra text at the end",Gp(n,o));n[o]==="<"&&o--}}else{if(s5(n[o]))continue;return Oh("InvalidChar","char '"+n[o]+"' is not expected.",Gp(n,o))}if(r){if(t.length==1)return Oh("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",Gp(n,t[0].tagStartPos));if(t.length>0)return Oh("InvalidXml","Invalid '"+JSON.stringify(t.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Oh("InvalidXml","Start tag expected.",1);return!0};function s5(n){return n===" "||n==="	"||n===`
`||n==="\r"}function o5(n,e){const t=e;for(;e<n.length;e++)if(n[e]=="?"||n[e]==" "){const r=n.substr(t,e-t);if(e>5&&r==="xml")return Oh("InvalidXml","XML declaration allowed only at the start of the document.",Gp(n,e));if(n[e]=="?"&&n[e+1]==">"){e++;break}else continue}return e}function a5(n,e){if(n.length>e+5&&n[e+1]==="-"&&n[e+2]==="-"){for(e+=3;e<n.length;e++)if(n[e]==="-"&&n[e+1]==="-"&&n[e+2]===">"){e+=2;break}}else if(n.length>e+8&&n[e+1]==="D"&&n[e+2]==="O"&&n[e+3]==="C"&&n[e+4]==="T"&&n[e+5]==="Y"&&n[e+6]==="P"&&n[e+7]==="E"){let t=1;for(e+=8;e<n.length;e++)if(n[e]==="<")t++;else if(n[e]===">"&&(t--,t===0))break}else if(n.length>e+9&&n[e+1]==="["&&n[e+2]==="C"&&n[e+3]==="D"&&n[e+4]==="A"&&n[e+5]==="T"&&n[e+6]==="A"&&n[e+7]==="["){for(e+=8;e<n.length;e++)if(n[e]==="]"&&n[e+1]==="]"&&n[e+2]===">"){e+=2;break}}return e}const wse='"',Ese="'";function xse(n,e){let t="",r="",s=!1;for(;e<n.length;e++){if(n[e]===wse||n[e]===Ese)r===""?r=n[e]:r!==n[e]||(r="");else if(n[e]===">"&&r===""){s=!0;break}t+=n[e]}return r!==""?!1:{value:t,index:e,tagClosed:s}}const $se=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function l5(n,e){const t=XF.getAllMatches(n,$se),r={};for(let s=0;s<t.length;s++){if(t[s][1].length===0)return Oh("InvalidAttr","Attribute '"+t[s][2]+"' has no space in starting.",YE(t[s]));if(t[s][3]!==void 0&&t[s][4]===void 0)return Oh("InvalidAttr","Attribute '"+t[s][2]+"' is without value.",YE(t[s]));if(t[s][3]===void 0&&!e.allowBooleanAttributes)return Oh("InvalidAttr","boolean attribute '"+t[s][2]+"' is not allowed.",YE(t[s]));const o=t[s][2];if(!Ase(o))return Oh("InvalidAttr","Attribute '"+o+"' is an invalid name.",YE(t[s]));if(!r.hasOwnProperty(o))r[o]=1;else return Oh("InvalidAttr","Attribute '"+o+"' is repeated.",YE(t[s]))}return!0}function Cse(n,e){let t=/\d/;for(n[e]==="x"&&(e++,t=/[\da-fA-F]/);e<n.length;e++){if(n[e]===";")return e;if(!n[e].match(t))break}return-1}function Mse(n,e){if(e++,n[e]===";")return-1;if(n[e]==="#")return e++,Cse(n,e);let t=0;for(;e<n.length;e++,t++)if(!(n[e].match(/\w/)&&t<20)){if(n[e]===";")break;return-1}return e}function Oh(n,e,t){return{err:{code:n,msg:e,line:t.line||t,col:t.col}}}function Ase(n){return XF.isName(n)}function Ise(n){return XF.isName(n)}function Gp(n,e){const t=n.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function YE(n){return n.startIndex+n[1].length}var KF={};const cX={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(n,e,t){return n}},Rse=function(n){return Object.assign({},cX,n)};KF.buildOptions=Rse;KF.defaultOptions=cX;class kse{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}var Ose=kse;const Lse=dk;function Nse(n,e){const t={};if(n[e+3]==="O"&&n[e+4]==="C"&&n[e+5]==="T"&&n[e+6]==="Y"&&n[e+7]==="P"&&n[e+8]==="E"){e=e+9;let r=1,s=!1,o=!1,l="";for(;e<n.length;e++)if(n[e]==="<"&&!o){if(s&&Bse(n,e))e+=7,[entityName,val,e]=Dse(n,e+1),val.indexOf("&")===-1&&(t[Hse(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(s&&Fse(n,e))e+=8;else if(s&&zse(n,e))e+=8;else if(s&&Use(n,e))e+=9;else if(Pse)o=!0;else throw new Error("Invalid DOCTYPE");r++,l=""}else if(n[e]===">"){if(o?n[e-1]==="-"&&n[e-2]==="-"&&(o=!1,r--):r--,r===0)break}else n[e]==="["?s=!0:l+=n[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:e}}function Dse(n,e){let t="";for(;e<n.length&&n[e]!=="'"&&n[e]!=='"';e++)t+=n[e];if(t=t.trim(),t.indexOf(" ")!==-1)throw new Error("External entites are not supported");const r=n[e++];let s="";for(;e<n.length&&n[e]!==r;e++)s+=n[e];return[t,s,e]}function Pse(n,e){return n[e+1]==="!"&&n[e+2]==="-"&&n[e+3]==="-"}function Bse(n,e){return n[e+1]==="!"&&n[e+2]==="E"&&n[e+3]==="N"&&n[e+4]==="T"&&n[e+5]==="I"&&n[e+6]==="T"&&n[e+7]==="Y"}function Fse(n,e){return n[e+1]==="!"&&n[e+2]==="E"&&n[e+3]==="L"&&n[e+4]==="E"&&n[e+5]==="M"&&n[e+6]==="E"&&n[e+7]==="N"&&n[e+8]==="T"}function zse(n,e){return n[e+1]==="!"&&n[e+2]==="A"&&n[e+3]==="T"&&n[e+4]==="T"&&n[e+5]==="L"&&n[e+6]==="I"&&n[e+7]==="S"&&n[e+8]==="T"}function Use(n,e){return n[e+1]==="!"&&n[e+2]==="N"&&n[e+3]==="O"&&n[e+4]==="T"&&n[e+5]==="A"&&n[e+6]==="T"&&n[e+7]==="I"&&n[e+8]==="O"&&n[e+9]==="N"}function Hse(n){if(Lse.isName(n))return n;throw new Error(`Invalid entity name ${n}`)}var Gse=Nse;const Wse=/^[-+]?0x[a-fA-F0-9]+$/,Vse=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const jse={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Yse(n,e={}){if(e=Object.assign({},jse,e),!n||typeof n!="string")return n;let t=n.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return n;if(e.hex&&Wse.test(t))return Number.parseInt(t,16);{const r=Vse.exec(t);if(r){const s=r[1],o=r[2];let l=Xse(r[3]);const u=r[4]||r[6];if(!e.leadingZeros&&o.length>0&&s&&t[2]!==".")return n;if(!e.leadingZeros&&o.length>0&&!s&&t[1]!==".")return n;{const h=Number(t),f=""+h;return f.search(/[eE]/)!==-1||u?e.eNotation?h:n:t.indexOf(".")!==-1?f==="0"&&l===""||f===l||s&&f==="-"+l?h:n:o?l===f||s+l===f?h:n:t===f||t===s+f?h:n}}else return n}}function Xse(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substr(0,n.length-1))),n}var Kse=Yse;const hX=dk,XE=Ose,Jse=Gse,qse=Kse;let Qse=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,r)=>String.fromCharCode(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,r)=>String.fromCharCode(Number.parseInt(r,16))}},this.addExternalEntities=Zse,this.parseXml=ioe,this.parseTextData=eoe,this.resolveNameSpace=toe,this.buildAttributesMap=roe,this.isItStopNode=loe,this.replaceEntitiesValue=ooe,this.readStopNodeData=coe,this.saveTextToParentTag=aoe,this.addChild=soe}};function Zse(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:n[r]}}}function eoe(n,e,t,r,s,o,l){if(n!==void 0&&(this.options.trimValues&&!r&&(n=n.trim()),n.length>0)){l||(n=this.replaceEntitiesValue(n));const u=this.options.tagValueProcessor(e,n,t,s,o);return u==null?n:typeof u!=typeof n||u!==n?u:this.options.trimValues?PD(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?PD(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function toe(n){if(this.options.removeNSPrefix){const e=n.split(":"),t=n.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(n=t+e[1])}return n}const noe=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function roe(n,e,t){if(!this.options.ignoreAttributes&&typeof n=="string"){const r=hX.getAllMatches(n,noe),s=r.length,o={};for(let l=0;l<s;l++){const u=this.resolveNameSpace(r[l][1]);let h=r[l][4],f=this.options.attributeNamePrefix+u;if(u.length)if(this.options.transformAttributeName&&(f=this.options.transformAttributeName(f)),f==="__proto__"&&(f="#__proto__"),h!==void 0){this.options.trimValues&&(h=h.trim()),h=this.replaceEntitiesValue(h);const g=this.options.attributeValueProcessor(u,h,e);g==null?o[f]=h:typeof g!=typeof h||g!==h?o[f]=g:o[f]=PD(h,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[f]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){const l={};return l[this.options.attributesGroupName]=o,l}return o}}const ioe=function(n){n=n.replace(/\r\n?/g,`
`);const e=new XE("!xml");let t=e,r="",s="";for(let o=0;o<n.length;o++)if(n[o]==="<")if(n[o+1]==="/"){const u=w1(n,">",o,"Closing Tag is not closed.");let h=n.substring(o+2,u).trim();if(this.options.removeNSPrefix){const y=h.indexOf(":");y!==-1&&(h=h.substr(y+1))}this.options.transformTagName&&(h=this.options.transformTagName(h)),t&&(r=this.saveTextToParentTag(r,t,s));const f=s.substring(s.lastIndexOf(".")+1);if(h&&this.options.unpairedTags.indexOf(h)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${h}>`);let g=0;f&&this.options.unpairedTags.indexOf(f)!==-1?(g=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):g=s.lastIndexOf("."),s=s.substring(0,g),t=this.tagsNodeStack.pop(),r="",o=u}else if(n[o+1]==="?"){let u=DD(n,o,!1,"?>");if(!u)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,t,s),!(this.options.ignoreDeclaration&&u.tagName==="?xml"||this.options.ignorePiTags)){const h=new XE(u.tagName);h.add(this.options.textNodeName,""),u.tagName!==u.tagExp&&u.attrExpPresent&&(h[":@"]=this.buildAttributesMap(u.tagExp,s,u.tagName)),this.addChild(t,h,s)}o=u.closeIndex+1}else if(n.substr(o+1,3)==="!--"){const u=w1(n,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){const h=n.substring(o+4,u-2);r=this.saveTextToParentTag(r,t,s),t.add(this.options.commentPropName,[{[this.options.textNodeName]:h}])}o=u}else if(n.substr(o+1,2)==="!D"){const u=Jse(n,o);this.docTypeEntities=u.entities,o=u.i}else if(n.substr(o+1,2)==="!["){const u=w1(n,"]]>",o,"CDATA is not closed.")-2,h=n.substring(o+9,u);r=this.saveTextToParentTag(r,t,s);let f=this.parseTextData(h,t.tagname,s,!0,!1,!0,!0);f==null&&(f=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:h}]):t.add(this.options.textNodeName,f),o=u+2}else{let u=DD(n,o,this.options.removeNSPrefix),h=u.tagName;const f=u.rawTagName;let g=u.tagExp,y=u.attrExpPresent,b=u.closeIndex;this.options.transformTagName&&(h=this.options.transformTagName(h)),t&&r&&t.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,t,s,!1));const S=t;if(S&&this.options.unpairedTags.indexOf(S.tagname)!==-1&&(t=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),h!==e.tagname&&(s+=s?"."+h:h),this.isItStopNode(this.options.stopNodes,s,h)){let C="";if(g.length>0&&g.lastIndexOf("/")===g.length-1)o=u.closeIndex;else if(this.options.unpairedTags.indexOf(h)!==-1)o=u.closeIndex;else{const A=this.readStopNodeData(n,f,b+1);if(!A)throw new Error(`Unexpected end of ${f}`);o=A.i,C=A.tagContent}const M=new XE(h);h!==g&&y&&(M[":@"]=this.buildAttributesMap(g,s,h)),C&&(C=this.parseTextData(C,h,s,!0,y,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),M.add(this.options.textNodeName,C),this.addChild(t,M,s)}else{if(g.length>0&&g.lastIndexOf("/")===g.length-1){h[h.length-1]==="/"?(h=h.substr(0,h.length-1),s=s.substr(0,s.length-1),g=h):g=g.substr(0,g.length-1),this.options.transformTagName&&(h=this.options.transformTagName(h));const C=new XE(h);h!==g&&y&&(C[":@"]=this.buildAttributesMap(g,s,h)),this.addChild(t,C,s),s=s.substr(0,s.lastIndexOf("."))}else{const C=new XE(h);this.tagsNodeStack.push(t),h!==g&&y&&(C[":@"]=this.buildAttributesMap(g,s,h)),this.addChild(t,C,s),t=C}r="",o=b}}else r+=n[o];return e.child};function soe(n,e,t){const r=this.options.updateTag(e.tagname,t,e[":@"]);r===!1||(typeof r=="string"&&(e.tagname=r),n.addChild(e))}const ooe=function(n){if(this.options.processEntities){for(let e in this.docTypeEntities){const t=this.docTypeEntities[e];n=n.replace(t.regx,t.val)}for(let e in this.lastEntities){const t=this.lastEntities[e];n=n.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const t=this.htmlEntities[e];n=n.replace(t.regex,t.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function aoe(n,e,t,r){return n&&(r===void 0&&(r=Object.keys(e.child).length===0),n=this.parseTextData(n,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),n!==void 0&&n!==""&&e.add(this.options.textNodeName,n),n=""),n}function loe(n,e,t){const r="*."+t;for(const s in n){const o=n[s];if(r===o||e===o)return!0}return!1}function uoe(n,e,t=">"){let r,s="";for(let o=e;o<n.length;o++){let l=n[o];if(r)l===r&&(r="");else if(l==='"'||l==="'")r=l;else if(l===t[0])if(t[1]){if(n[o+1]===t[1])return{data:s,index:o}}else return{data:s,index:o};else l==="	"&&(l=" ");s+=l}}function w1(n,e,t,r){const s=n.indexOf(e,t);if(s===-1)throw new Error(r);return s+e.length-1}function DD(n,e,t,r=">"){const s=uoe(n,e+1,r);if(!s)return;let o=s.data;const l=s.index,u=o.search(/\s/);let h=o,f=!0;u!==-1&&(h=o.substring(0,u),o=o.substring(u+1).trimStart());const g=h;if(t){const y=h.indexOf(":");y!==-1&&(h=h.substr(y+1),f=h!==s.data.substr(y+1))}return{tagName:h,tagExp:o,closeIndex:l,attrExpPresent:f,rawTagName:g}}function coe(n,e,t){const r=t;let s=1;for(;t<n.length;t++)if(n[t]==="<")if(n[t+1]==="/"){const o=w1(n,">",t,`${e} is not closed`);if(n.substring(t+2,o).trim()===e&&(s--,s===0))return{tagContent:n.substring(r,t),i:o};t=o}else if(n[t+1]==="?")t=w1(n,"?>",t+1,"StopNode is not closed.");else if(n.substr(t+1,3)==="!--")t=w1(n,"-->",t+3,"StopNode is not closed.");else if(n.substr(t+1,2)==="![")t=w1(n,"]]>",t,"StopNode is not closed.")-2;else{const o=DD(n,t,">");o&&((o&&o.tagName)===e&&o.tagExp[o.tagExp.length-1]!=="/"&&s++,t=o.closeIndex)}}function PD(n,e,t){if(e&&typeof n=="string"){const r=n.trim();return r==="true"?!0:r==="false"?!1:qse(n,t)}else return hX.isExist(n)?n:""}var hoe=Qse,dX={};function doe(n,e){return fX(n,e)}function fX(n,e,t){let r;const s={};for(let o=0;o<n.length;o++){const l=n[o],u=foe(l);let h="";if(t===void 0?h=u:h=t+"."+u,u===e.textNodeName)r===void 0?r=l[u]:r+=""+l[u];else{if(u===void 0)continue;if(l[u]){let f=fX(l[u],e,h);const g=moe(f,e);l[":@"]?poe(f,l[":@"],h,e):Object.keys(f).length===1&&f[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?f=f[e.textNodeName]:Object.keys(f).length===0&&(e.alwaysCreateTextNode?f[e.textNodeName]="":f=""),s[u]!==void 0&&s.hasOwnProperty(u)?(Array.isArray(s[u])||(s[u]=[s[u]]),s[u].push(f)):e.isArray(u,h,g)?s[u]=[f]:s[u]=f}}}return typeof r=="string"?r.length>0&&(s[e.textNodeName]=r):r!==void 0&&(s[e.textNodeName]=r),s}function foe(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];if(r!==":@")return r}}function poe(n,e,t,r){if(e){const s=Object.keys(e),o=s.length;for(let l=0;l<o;l++){const u=s[l];r.isArray(u,t+"."+u,!0,!0)?n[u]=[e[u]]:n[u]=e[u]}}}function moe(n,e){const{textNodeName:t}=e,r=Object.keys(n).length;return!!(r===0||r===1&&(n[t]||typeof n[t]=="boolean"||n[t]===0))}dX.prettify=doe;const{buildOptions:goe}=KF,voe=hoe,{prettify:_oe}=dX,yoe=YF;let boe=class{constructor(e){this.externalEntities={},this.options=goe(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const o=yoe.validate(e,t);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}const r=new voe(this.options);r.addExternalEntities(this.externalEntities);const s=r.parseXml(e);return this.options.preserveOrder||s===void 0?s:_oe(s,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}};var Toe=boe;const Soe=`
`;function woe(n,e){let t="";return e.format&&e.indentBy.length>0&&(t=Soe),pX(n,e,"",t)}function pX(n,e,t,r){let s="",o=!1;for(let l=0;l<n.length;l++){const u=n[l],h=Eoe(u);if(h===void 0)continue;let f="";if(t.length===0?f=h:f=`${t}.${h}`,h===e.textNodeName){let C=u[h];xoe(f,e)||(C=e.tagValueProcessor(h,C),C=mX(C,e)),o&&(s+=r),s+=C,o=!1;continue}else if(h===e.cdataPropName){o&&(s+=r),s+=`<![CDATA[${u[h][0][e.textNodeName]}]]>`,o=!1;continue}else if(h===e.commentPropName){s+=r+`<!--${u[h][0][e.textNodeName]}-->`,o=!0;continue}else if(h[0]==="?"){const C=u5(u[":@"],e),M=h==="?xml"?"":r;let A=u[h][0][e.textNodeName];A=A.length!==0?" "+A:"",s+=M+`<${h}${A}${C}?>`,o=!0;continue}let g=r;g!==""&&(g+=e.indentBy);const y=u5(u[":@"],e),b=r+`<${h}${y}`,S=pX(u[h],e,f,g);e.unpairedTags.indexOf(h)!==-1?e.suppressUnpairedNode?s+=b+">":s+=b+"/>":(!S||S.length===0)&&e.suppressEmptyNode?s+=b+"/>":S&&S.endsWith(">")?s+=b+`>${S}${r}</${h}>`:(s+=b+">",S&&r!==""&&(S.includes("/>")||S.includes("</"))?s+=r+e.indentBy+S+r:s+=S,s+=`</${h}>`),o=!0}return s}function Eoe(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const r=e[t];if(n.hasOwnProperty(r)&&r!==":@")return r}}function u5(n,e){let t="";if(n&&!e.ignoreAttributes)for(let r in n){if(!n.hasOwnProperty(r))continue;let s=e.attributeValueProcessor(r,n[r]);s=mX(s,e),s===!0&&e.suppressBooleanAttributes?t+=` ${r.substr(e.attributeNamePrefix.length)}`:t+=` ${r.substr(e.attributeNamePrefix.length)}="${s}"`}return t}function xoe(n,e){n=n.substr(0,n.length-e.textNodeName.length-1);let t=n.substr(n.lastIndexOf(".")+1);for(let r in e.stopNodes)if(e.stopNodes[r]===n||e.stopNodes[r]==="*."+t)return!0;return!1}function mX(n,e){if(n&&n.length>0&&e.processEntities)for(let t=0;t<e.entities.length;t++){const r=e.entities[t];n=n.replace(r.regex,r.val)}return n}var $oe=woe;const Coe=$oe,Moe={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function eb(n){this.options=Object.assign({},Moe,n),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Roe),this.processTextOrObjNode=Aoe,this.options.format?(this.indentate=Ioe,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}eb.prototype.build=function(n){return this.options.preserveOrder?Coe(n,this.options):(Array.isArray(n)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(n={[this.options.arrayNodeName]:n}),this.j2x(n,0).val)};eb.prototype.j2x=function(n,e){let t="",r="";for(let s in n)if(Object.prototype.hasOwnProperty.call(n,s))if(typeof n[s]>"u")this.isAttribute(s)&&(r+="");else if(n[s]===null)this.isAttribute(s)?r+="":s[0]==="?"?r+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:r+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(n[s]instanceof Date)r+=this.buildTextValNode(n[s],s,"",e);else if(typeof n[s]!="object"){const o=this.isAttribute(s);if(o)t+=this.buildAttrPairStr(o,""+n[s]);else if(s===this.options.textNodeName){let l=this.options.tagValueProcessor(s,""+n[s]);r+=this.replaceEntitiesValue(l)}else r+=this.buildTextValNode(n[s],s,"",e)}else if(Array.isArray(n[s])){const o=n[s].length;let l="";for(let u=0;u<o;u++){const h=n[s][u];typeof h>"u"||(h===null?s[0]==="?"?r+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:r+=this.indentate(e)+"<"+s+"/"+this.tagEndChar:typeof h=="object"?this.options.oneListGroup?l+=this.j2x(h,e+1).val:l+=this.processTextOrObjNode(h,s,e):l+=this.buildTextValNode(h,s,"",e))}this.options.oneListGroup&&(l=this.buildObjectNode(l,s,"",e)),r+=l}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const o=Object.keys(n[s]),l=o.length;for(let u=0;u<l;u++)t+=this.buildAttrPairStr(o[u],""+n[s][o[u]])}else r+=this.processTextOrObjNode(n[s],s,e);return{attrStr:t,val:r}};eb.prototype.buildAttrPairStr=function(n,e){return e=this.options.attributeValueProcessor(n,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+n:" "+n+'="'+e+'"'};function Aoe(n,e,t){const r=this.j2x(n,t+1);return n[this.options.textNodeName]!==void 0&&Object.keys(n).length===1?this.buildTextValNode(n[this.options.textNodeName],e,r.attrStr,t):this.buildObjectNode(r.val,e,r.attrStr,t)}eb.prototype.buildObjectNode=function(n,e,t,r){if(n==="")return e[0]==="?"?this.indentate(r)+"<"+e+t+"?"+this.tagEndChar:this.indentate(r)+"<"+e+t+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",s=""),(t||t==="")&&n.indexOf("<")===-1?this.indentate(r)+"<"+e+t+o+">"+n+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(r)+`<!--${n}-->`+this.newLine:this.indentate(r)+"<"+e+t+o+this.tagEndChar+n+this.indentate(r)+s}};eb.prototype.closeTag=function(n){let e="";return this.options.unpairedTags.indexOf(n)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${n}`,e};eb.prototype.buildTextValNode=function(n,e,t,r){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${n}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(r)+`<!--${n}-->`+this.newLine;if(e[0]==="?")return this.indentate(r)+"<"+e+t+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,n);return s=this.replaceEntitiesValue(s),s===""?this.indentate(r)+"<"+e+t+this.closeTag(e)+this.tagEndChar:this.indentate(r)+"<"+e+t+">"+s+"</"+e+this.tagEndChar}};eb.prototype.replaceEntitiesValue=function(n){if(n&&n.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const t=this.options.entities[e];n=n.replace(t.regex,t.val)}return n};function Ioe(n){return this.options.indentBy.repeat(n)}function Roe(n){return n.startsWith(this.options.attributeNamePrefix)&&n!==this.options.textNodeName?n.substr(this.attrPrefixLen):!1}var koe=eb;const Ooe=YF,Loe=Toe,Noe=koe;var gX={XMLParser:Loe,XMLValidator:Ooe,XMLBuilder:Noe};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const JF="162",lR=0,Doe=1,Poe=2,c5=1,h5=100,d5=204,f5=205,p5=3,Boe=0,m5="attached",Foe="detached",vX=300,x$=1e3,Rx=1001,BD=1002,$$=1003,zoe=1004,Uoe=1005,qF=1006,Hoe=1007,QF=1008,_X=1009,Goe=1014,ZF=1015,Woe=1020,e3=1023,bO=1026,g5=1027,Voe=1028,C$=2300,kw=2301,TO=2302,v5=2400,_5=2401,y5=2402,joe=2500,Yoe=0,yX=1,FD=2,Xoe=0,bX="",yy="srgb",t3="srgb-linear",Koe="display-p3",TX="display-p3-linear",zD="linear",b5="srgb",T5="rec709",S5="p3",KT=7680,w5=519,Joe=515,UD=35044,E1=2e3,HD=2001;class fk{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const o=s.indexOf(t);o!==-1&&s.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const s=r.slice(0);for(let o=0,l=s.length;o<l;o++)s[o].call(this,e);e.target=null}}}const xf=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let E5=1234567;const Jx=Math.PI/180,M$=180/Math.PI;function u0(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(xf[n&255]+xf[n>>8&255]+xf[n>>16&255]+xf[n>>24&255]+"-"+xf[e&255]+xf[e>>8&255]+"-"+xf[e>>16&15|64]+xf[e>>24&255]+"-"+xf[t&63|128]+xf[t>>8&255]+"-"+xf[t>>16&255]+xf[t>>24&255]+xf[r&255]+xf[r>>8&255]+xf[r>>16&255]+xf[r>>24&255]).toLowerCase()}function Lf(n,e,t){return Math.max(e,Math.min(t,n))}function n3(n,e){return(n%e+e)%e}function qoe(n,e,t,r,s){return r+(n-e)*(s-r)/(t-e)}function Qoe(n,e,t){return n!==e?(t-n)/(e-n):0}function qx(n,e,t){return(1-t)*n+t*e}function Zoe(n,e,t,r){return qx(n,e,1-Math.exp(-t*r))}function eae(n,e=1){return e-Math.abs(n3(n,e*2)-e)}function tae(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function nae(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function rae(n,e){return n+Math.floor(Math.random()*(e-n+1))}function iae(n,e){return n+Math.random()*(e-n)}function sae(n){return n*(.5-Math.random())}function oae(n){n!==void 0&&(E5=n);let e=E5+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function aae(n){return n*Jx}function lae(n){return n*M$}function uae(n){return(n&n-1)===0&&n!==0}function cae(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function hae(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function dae(n,e,t,r,s){const o=Math.cos,l=Math.sin,u=o(t/2),h=l(t/2),f=o((e+r)/2),g=l((e+r)/2),y=o((e-r)/2),b=l((e-r)/2),S=o((r-e)/2),C=l((r-e)/2);switch(s){case"XYX":n.set(u*g,h*y,h*b,u*f);break;case"YZY":n.set(h*b,u*g,h*y,u*f);break;case"ZXZ":n.set(h*y,h*b,u*g,u*f);break;case"XZX":n.set(u*g,h*C,h*S,u*f);break;case"YXY":n.set(h*S,u*g,h*C,u*f);break;case"ZYZ":n.set(h*C,h*S,u*g,u*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function n0(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Aa(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const fae={DEG2RAD:Jx,RAD2DEG:M$,generateUUID:u0,clamp:Lf,euclideanModulo:n3,mapLinear:qoe,inverseLerp:Qoe,lerp:qx,damp:Zoe,pingpong:eae,smoothstep:tae,smootherstep:nae,randInt:rae,randFloat:iae,randFloatSpread:sae,seededRandom:oae,degToRad:aae,radToDeg:lae,isPowerOfTwo:uae,ceilPowerOfTwo:cae,floorPowerOfTwo:hae,setQuaternionFromProperEuler:dae,normalize:Aa,denormalize:n0};class cc{constructor(e=0,t=0){cc.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6],this.y=s[1]*t+s[4]*r+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Lf(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),s=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*r-l*s+e.x,this.y=o*s+l*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class I_{constructor(e,t,r,s,o,l,u,h,f){I_.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,s,o,l,u,h,f)}set(e,t,r,s,o,l,u,h,f){const g=this.elements;return g[0]=e,g[1]=s,g[2]=u,g[3]=t,g[4]=o,g[5]=h,g[6]=r,g[7]=l,g[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,s=t.elements,o=this.elements,l=r[0],u=r[3],h=r[6],f=r[1],g=r[4],y=r[7],b=r[2],S=r[5],C=r[8],M=s[0],A=s[3],k=s[6],O=s[1],P=s[4],D=s[7],U=s[2],H=s[5],V=s[8];return o[0]=l*M+u*O+h*U,o[3]=l*A+u*P+h*H,o[6]=l*k+u*D+h*V,o[1]=f*M+g*O+y*U,o[4]=f*A+g*P+y*H,o[7]=f*k+g*D+y*V,o[2]=b*M+S*O+C*U,o[5]=b*A+S*P+C*H,o[8]=b*k+S*D+C*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],f=e[7],g=e[8];return t*l*g-t*u*f-r*o*g+r*u*h+s*o*f-s*l*h}invert(){const e=this.elements,t=e[0],r=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],f=e[7],g=e[8],y=g*l-u*f,b=u*h-g*o,S=f*o-l*h,C=t*y+r*b+s*S;if(C===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/C;return e[0]=y*M,e[1]=(s*f-g*r)*M,e[2]=(u*r-s*l)*M,e[3]=b*M,e[4]=(g*t-s*h)*M,e[5]=(s*o-u*t)*M,e[6]=S*M,e[7]=(r*h-f*t)*M,e[8]=(l*t-r*o)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,s,o,l,u){const h=Math.cos(o),f=Math.sin(o);return this.set(r*h,r*f,-r*(h*l+f*u)+l+e,-s*f,s*h,-s*(-f*l+h*u)+u+t,0,0,1),this}scale(e,t){return this.premultiply(SO.makeScale(e,t)),this}rotate(e){return this.premultiply(SO.makeRotation(-e)),this}translate(e,t){return this.premultiply(SO.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let s=0;s<9;s++)if(t[s]!==r[s])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const SO=new I_;function pae(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function GD(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const x5={};function SX(n){n in x5||(x5[n]=!0,console.warn(n))}const $5=new I_().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),C5=new I_().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),dM={[t3]:{transfer:zD,primaries:T5,toReference:n=>n,fromReference:n=>n},[yy]:{transfer:b5,primaries:T5,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[TX]:{transfer:zD,primaries:S5,toReference:n=>n.applyMatrix3(C5),fromReference:n=>n.applyMatrix3($5)},[Koe]:{transfer:b5,primaries:S5,toReference:n=>n.convertSRGBToLinear().applyMatrix3(C5),fromReference:n=>n.applyMatrix3($5).convertLinearToSRGB()}},mae=new Set([t3,TX]),Vg={enabled:!0,_workingColorSpace:t3,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!mae.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=dM[e].toReference,s=dM[t].fromReference;return s(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return dM[n].primaries},getTransfer:function(n){return n===bX?zD:dM[n].transfer}};function gw(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function wO(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let JT;class gae{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{JT===void 0&&(JT=GD("canvas")),JT.width=e.width,JT.height=e.height;const r=JT.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=JT}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=GD("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const s=r.getImageData(0,0,e.width,e.height),o=s.data;for(let l=0;l<o.length;l++)o[l]=gw(o[l]/255)*255;return r.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(gw(t[r]/255)*255):t[r]=gw(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let vae=0;class _ae{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:vae++}),this.uuid=u0(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?o.push(EO(s[l].image)):o.push(EO(s[l]))}else o=EO(s);r.url=o}return t||(e.images[this.uuid]=r),r}}function EO(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?gae.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let yae=0;class Nm extends fk{constructor(e=Nm.DEFAULT_IMAGE,t=Nm.DEFAULT_MAPPING,r=Rx,s=Rx,o=qF,l=QF,u=e3,h=_X,f=Nm.DEFAULT_ANISOTROPY,g=bX){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:yae++}),this.uuid=u0(),this.name="",this.source=new _ae(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=f,this.format=u,this.internalFormat=null,this.type=h,this.offset=new cc(0,0),this.repeat=new cc(1,1),this.center=new cc(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new I_,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=g,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==vX)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case x$:e.x=e.x-Math.floor(e.x);break;case Rx:e.x=e.x<0?0:1;break;case BD:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case x$:e.y=e.y-Math.floor(e.y);break;case Rx:e.y=e.y<0?0:1;break;case BD:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Nm.DEFAULT_IMAGE=null;Nm.DEFAULT_MAPPING=vX;Nm.DEFAULT_ANISOTROPY=1;class yg{constructor(e=0,t=0,r=0,s=1){yg.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,s){return this.x=e,this.y=t,this.z=r,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,s=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*r+l[8]*s+l[12]*o,this.y=l[1]*t+l[5]*r+l[9]*s+l[13]*o,this.z=l[2]*t+l[6]*r+l[10]*s+l[14]*o,this.w=l[3]*t+l[7]*r+l[11]*s+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,s,o;const h=e.elements,f=h[0],g=h[4],y=h[8],b=h[1],S=h[5],C=h[9],M=h[2],A=h[6],k=h[10];if(Math.abs(g-b)<.01&&Math.abs(y-M)<.01&&Math.abs(C-A)<.01){if(Math.abs(g+b)<.1&&Math.abs(y+M)<.1&&Math.abs(C+A)<.1&&Math.abs(f+S+k-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const P=(f+1)/2,D=(S+1)/2,U=(k+1)/2,H=(g+b)/4,V=(y+M)/4,z=(C+A)/4;return P>D&&P>U?P<.01?(r=0,s=.707106781,o=.707106781):(r=Math.sqrt(P),s=H/r,o=V/r):D>U?D<.01?(r=.707106781,s=0,o=.707106781):(s=Math.sqrt(D),r=H/s,o=z/s):U<.01?(r=.707106781,s=.707106781,o=0):(o=Math.sqrt(U),r=V/o,s=z/o),this.set(r,s,o,t),this}let O=Math.sqrt((A-C)*(A-C)+(y-M)*(y-M)+(b-g)*(b-g));return Math.abs(O)<.001&&(O=1),this.x=(A-C)/O,this.y=(y-M)/O,this.z=(b-g)/O,this.w=Math.acos((f+S+k-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Bu{constructor(e=0,t=0,r=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=s}static slerpFlat(e,t,r,s,o,l,u){let h=r[s+0],f=r[s+1],g=r[s+2],y=r[s+3];const b=o[l+0],S=o[l+1],C=o[l+2],M=o[l+3];if(u===0){e[t+0]=h,e[t+1]=f,e[t+2]=g,e[t+3]=y;return}if(u===1){e[t+0]=b,e[t+1]=S,e[t+2]=C,e[t+3]=M;return}if(y!==M||h!==b||f!==S||g!==C){let A=1-u;const k=h*b+f*S+g*C+y*M,O=k>=0?1:-1,P=1-k*k;if(P>Number.EPSILON){const U=Math.sqrt(P),H=Math.atan2(U,k*O);A=Math.sin(A*H)/U,u=Math.sin(u*H)/U}const D=u*O;if(h=h*A+b*D,f=f*A+S*D,g=g*A+C*D,y=y*A+M*D,A===1-u){const U=1/Math.sqrt(h*h+f*f+g*g+y*y);h*=U,f*=U,g*=U,y*=U}}e[t]=h,e[t+1]=f,e[t+2]=g,e[t+3]=y}static multiplyQuaternionsFlat(e,t,r,s,o,l){const u=r[s],h=r[s+1],f=r[s+2],g=r[s+3],y=o[l],b=o[l+1],S=o[l+2],C=o[l+3];return e[t]=u*C+g*y+h*S-f*b,e[t+1]=h*C+g*b+f*y-u*S,e[t+2]=f*C+g*S+u*b-h*y,e[t+3]=g*C-u*y-h*b-f*S,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,s){return this._x=e,this._y=t,this._z=r,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,s=e._y,o=e._z,l=e._order,u=Math.cos,h=Math.sin,f=u(r/2),g=u(s/2),y=u(o/2),b=h(r/2),S=h(s/2),C=h(o/2);switch(l){case"XYZ":this._x=b*g*y+f*S*C,this._y=f*S*y-b*g*C,this._z=f*g*C+b*S*y,this._w=f*g*y-b*S*C;break;case"YXZ":this._x=b*g*y+f*S*C,this._y=f*S*y-b*g*C,this._z=f*g*C-b*S*y,this._w=f*g*y+b*S*C;break;case"ZXY":this._x=b*g*y-f*S*C,this._y=f*S*y+b*g*C,this._z=f*g*C+b*S*y,this._w=f*g*y-b*S*C;break;case"ZYX":this._x=b*g*y-f*S*C,this._y=f*S*y+b*g*C,this._z=f*g*C-b*S*y,this._w=f*g*y+b*S*C;break;case"YZX":this._x=b*g*y+f*S*C,this._y=f*S*y+b*g*C,this._z=f*g*C-b*S*y,this._w=f*g*y-b*S*C;break;case"XZY":this._x=b*g*y-f*S*C,this._y=f*S*y-b*g*C,this._z=f*g*C+b*S*y,this._w=f*g*y+b*S*C;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,s=Math.sin(r);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],s=t[4],o=t[8],l=t[1],u=t[5],h=t[9],f=t[2],g=t[6],y=t[10],b=r+u+y;if(b>0){const S=.5/Math.sqrt(b+1);this._w=.25/S,this._x=(g-h)*S,this._y=(o-f)*S,this._z=(l-s)*S}else if(r>u&&r>y){const S=2*Math.sqrt(1+r-u-y);this._w=(g-h)/S,this._x=.25*S,this._y=(s+l)/S,this._z=(o+f)/S}else if(u>y){const S=2*Math.sqrt(1+u-r-y);this._w=(o-f)/S,this._x=(s+l)/S,this._y=.25*S,this._z=(h+g)/S}else{const S=2*Math.sqrt(1+y-r-u);this._w=(l-s)/S,this._x=(o+f)/S,this._y=(h+g)/S,this._z=.25*S}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Lf(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const s=Math.min(1,t/r);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,s=e._y,o=e._z,l=e._w,u=t._x,h=t._y,f=t._z,g=t._w;return this._x=r*g+l*u+s*f-o*h,this._y=s*g+l*h+o*u-r*f,this._z=o*g+l*f+r*h-s*u,this._w=l*g-r*u-s*h-o*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,s=this._y,o=this._z,l=this._w;let u=l*e._w+r*e._x+s*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=r,this._y=s,this._z=o,this;const h=1-u*u;if(h<=Number.EPSILON){const S=1-t;return this._w=S*l+t*this._w,this._x=S*r+t*this._x,this._y=S*s+t*this._y,this._z=S*o+t*this._z,this.normalize(),this}const f=Math.sqrt(h),g=Math.atan2(f,u),y=Math.sin((1-t)*g)/f,b=Math.sin(t*g)/f;return this._w=l*y+this._w*b,this._x=r*y+this._x*b,this._y=s*y+this._y*b,this._z=o*y+this._z*b,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),s=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(s*Math.sin(e),s*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class zt{constructor(e=0,t=0,r=0){zt.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(M5.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(M5.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6]*s,this.y=o[1]*t+o[4]*r+o[7]*s,this.z=o[2]*t+o[5]*r+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,s=this.z,o=e.elements,l=1/(o[3]*t+o[7]*r+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*r+o[8]*s+o[12])*l,this.y=(o[1]*t+o[5]*r+o[9]*s+o[13])*l,this.z=(o[2]*t+o[6]*r+o[10]*s+o[14])*l,this}applyQuaternion(e){const t=this.x,r=this.y,s=this.z,o=e.x,l=e.y,u=e.z,h=e.w,f=2*(l*s-u*r),g=2*(u*t-o*s),y=2*(o*r-l*t);return this.x=t+h*f+l*y-u*g,this.y=r+h*g+u*f-o*y,this.z=s+h*y+o*g-l*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*s,this.y=o[1]*t+o[5]*r+o[9]*s,this.z=o[2]*t+o[6]*r+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,s=e.y,o=e.z,l=t.x,u=t.y,h=t.z;return this.x=s*h-o*u,this.y=o*l-r*h,this.z=r*u-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return xO.copy(this).projectOnVector(e),this.sub(xO)}reflect(e){return this.sub(xO.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Lf(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,s=this.z-e.z;return t*t+r*r+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const s=Math.sin(t)*e;return this.x=s*Math.sin(r),this.y=Math.cos(t)*e,this.z=s*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const xO=new zt,M5=new Bu;class R_{constructor(e=new zt(1/0,1/0,1/0),t=new zt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(jg.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(jg.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=jg.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let l=0,u=o.count;l<u;l++)e.isMesh===!0?e.getVertexPosition(l,jg):jg.fromBufferAttribute(o,l),jg.applyMatrix4(e.matrixWorld),this.expandByPoint(jg);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),fM.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),fM.copy(r.boundingBox)),fM.applyMatrix4(e.matrixWorld),this.union(fM)}const s=e.children;for(let o=0,l=s.length;o<l;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,jg),jg.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(KE),pM.subVectors(this.max,KE),qT.subVectors(e.a,KE),QT.subVectors(e.b,KE),ZT.subVectors(e.c,KE),Z_.subVectors(QT,qT),ey.subVectors(ZT,QT),zb.subVectors(qT,ZT);let t=[0,-Z_.z,Z_.y,0,-ey.z,ey.y,0,-zb.z,zb.y,Z_.z,0,-Z_.x,ey.z,0,-ey.x,zb.z,0,-zb.x,-Z_.y,Z_.x,0,-ey.y,ey.x,0,-zb.y,zb.x,0];return!$O(t,qT,QT,ZT,pM)||(t=[1,0,0,0,1,0,0,0,1],!$O(t,qT,QT,ZT,pM))?!1:(mM.crossVectors(Z_,ey),t=[mM.x,mM.y,mM.z],$O(t,qT,QT,ZT,pM))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,jg).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(jg).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Jv[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Jv[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Jv[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Jv[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Jv[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Jv[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Jv[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Jv[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Jv),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Jv=[new zt,new zt,new zt,new zt,new zt,new zt,new zt,new zt],jg=new zt,fM=new R_,qT=new zt,QT=new zt,ZT=new zt,Z_=new zt,ey=new zt,zb=new zt,KE=new zt,pM=new zt,mM=new zt,Ub=new zt;function $O(n,e,t,r,s){for(let o=0,l=n.length-3;o<=l;o+=3){Ub.fromArray(n,o);const u=s.x*Math.abs(Ub.x)+s.y*Math.abs(Ub.y)+s.z*Math.abs(Ub.z),h=e.dot(Ub),f=t.dot(Ub),g=r.dot(Ub);if(Math.max(-Math.max(h,f,g),Math.min(h,f,g))>u)return!1}return!0}const bae=new R_,JE=new zt,CO=new zt;class wv{constructor(e=new zt,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):bae.setFromPoints(e).getCenter(r);let s=0;for(let o=0,l=e.length;o<l;o++)s=Math.max(s,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;JE.subVectors(e,this.center);const t=JE.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),s=(r-this.radius)*.5;this.center.addScaledVector(JE,s/r),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(CO.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(JE.copy(e.center).add(CO)),this.expandByPoint(JE.copy(e.center).sub(CO))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const qv=new zt,MO=new zt,gM=new zt,ty=new zt,AO=new zt,vM=new zt,IO=new zt;class pk{constructor(e=new zt,t=new zt(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,qv)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=qv.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(qv.copy(this.origin).addScaledVector(this.direction,t),qv.distanceToSquared(e))}distanceSqToSegment(e,t,r,s){MO.copy(e).add(t).multiplyScalar(.5),gM.copy(t).sub(e).normalize(),ty.copy(this.origin).sub(MO);const o=e.distanceTo(t)*.5,l=-this.direction.dot(gM),u=ty.dot(this.direction),h=-ty.dot(gM),f=ty.lengthSq(),g=Math.abs(1-l*l);let y,b,S,C;if(g>0)if(y=l*h-u,b=l*u-h,C=o*g,y>=0)if(b>=-C)if(b<=C){const M=1/g;y*=M,b*=M,S=y*(y+l*b+2*u)+b*(l*y+b+2*h)+f}else b=o,y=Math.max(0,-(l*b+u)),S=-y*y+b*(b+2*h)+f;else b=-o,y=Math.max(0,-(l*b+u)),S=-y*y+b*(b+2*h)+f;else b<=-C?(y=Math.max(0,-(-l*o+u)),b=y>0?-o:Math.min(Math.max(-o,-h),o),S=-y*y+b*(b+2*h)+f):b<=C?(y=0,b=Math.min(Math.max(-o,-h),o),S=b*(b+2*h)+f):(y=Math.max(0,-(l*o+u)),b=y>0?o:Math.min(Math.max(-o,-h),o),S=-y*y+b*(b+2*h)+f);else b=l>0?-o:o,y=Math.max(0,-(l*b+u)),S=-y*y+b*(b+2*h)+f;return r&&r.copy(this.origin).addScaledVector(this.direction,y),s&&s.copy(MO).addScaledVector(gM,b),S}intersectSphere(e,t){qv.subVectors(e.center,this.origin);const r=qv.dot(this.direction),s=qv.dot(qv)-r*r,o=e.radius*e.radius;if(s>o)return null;const l=Math.sqrt(o-s),u=r-l,h=r+l;return h<0?null:u<0?this.at(h,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,s,o,l,u,h;const f=1/this.direction.x,g=1/this.direction.y,y=1/this.direction.z,b=this.origin;return f>=0?(r=(e.min.x-b.x)*f,s=(e.max.x-b.x)*f):(r=(e.max.x-b.x)*f,s=(e.min.x-b.x)*f),g>=0?(o=(e.min.y-b.y)*g,l=(e.max.y-b.y)*g):(o=(e.max.y-b.y)*g,l=(e.min.y-b.y)*g),r>l||o>s||((o>r||isNaN(r))&&(r=o),(l<s||isNaN(s))&&(s=l),y>=0?(u=(e.min.z-b.z)*y,h=(e.max.z-b.z)*y):(u=(e.max.z-b.z)*y,h=(e.min.z-b.z)*y),r>h||u>s)||((u>r||r!==r)&&(r=u),(h<s||s!==s)&&(s=h),s<0)?null:this.at(r>=0?r:s,t)}intersectsBox(e){return this.intersectBox(e,qv)!==null}intersectTriangle(e,t,r,s,o){AO.subVectors(t,e),vM.subVectors(r,e),IO.crossVectors(AO,vM);let l=this.direction.dot(IO),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;ty.subVectors(this.origin,e);const h=u*this.direction.dot(vM.crossVectors(ty,vM));if(h<0)return null;const f=u*this.direction.dot(AO.cross(ty));if(f<0||h+f>l)return null;const g=-u*ty.dot(IO);return g<0?null:this.at(g/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Xs{constructor(e,t,r,s,o,l,u,h,f,g,y,b,S,C,M,A){Xs.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,s,o,l,u,h,f,g,y,b,S,C,M,A)}set(e,t,r,s,o,l,u,h,f,g,y,b,S,C,M,A){const k=this.elements;return k[0]=e,k[4]=t,k[8]=r,k[12]=s,k[1]=o,k[5]=l,k[9]=u,k[13]=h,k[2]=f,k[6]=g,k[10]=y,k[14]=b,k[3]=S,k[7]=C,k[11]=M,k[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Xs().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,s=1/eS.setFromMatrixColumn(e,0).length(),o=1/eS.setFromMatrixColumn(e,1).length(),l=1/eS.setFromMatrixColumn(e,2).length();return t[0]=r[0]*s,t[1]=r[1]*s,t[2]=r[2]*s,t[3]=0,t[4]=r[4]*o,t[5]=r[5]*o,t[6]=r[6]*o,t[7]=0,t[8]=r[8]*l,t[9]=r[9]*l,t[10]=r[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,s=e.y,o=e.z,l=Math.cos(r),u=Math.sin(r),h=Math.cos(s),f=Math.sin(s),g=Math.cos(o),y=Math.sin(o);if(e.order==="XYZ"){const b=l*g,S=l*y,C=u*g,M=u*y;t[0]=h*g,t[4]=-h*y,t[8]=f,t[1]=S+C*f,t[5]=b-M*f,t[9]=-u*h,t[2]=M-b*f,t[6]=C+S*f,t[10]=l*h}else if(e.order==="YXZ"){const b=h*g,S=h*y,C=f*g,M=f*y;t[0]=b+M*u,t[4]=C*u-S,t[8]=l*f,t[1]=l*y,t[5]=l*g,t[9]=-u,t[2]=S*u-C,t[6]=M+b*u,t[10]=l*h}else if(e.order==="ZXY"){const b=h*g,S=h*y,C=f*g,M=f*y;t[0]=b-M*u,t[4]=-l*y,t[8]=C+S*u,t[1]=S+C*u,t[5]=l*g,t[9]=M-b*u,t[2]=-l*f,t[6]=u,t[10]=l*h}else if(e.order==="ZYX"){const b=l*g,S=l*y,C=u*g,M=u*y;t[0]=h*g,t[4]=C*f-S,t[8]=b*f+M,t[1]=h*y,t[5]=M*f+b,t[9]=S*f-C,t[2]=-f,t[6]=u*h,t[10]=l*h}else if(e.order==="YZX"){const b=l*h,S=l*f,C=u*h,M=u*f;t[0]=h*g,t[4]=M-b*y,t[8]=C*y+S,t[1]=y,t[5]=l*g,t[9]=-u*g,t[2]=-f*g,t[6]=S*y+C,t[10]=b-M*y}else if(e.order==="XZY"){const b=l*h,S=l*f,C=u*h,M=u*f;t[0]=h*g,t[4]=-y,t[8]=f*g,t[1]=b*y+M,t[5]=l*g,t[9]=S*y-C,t[2]=C*y-S,t[6]=u*g,t[10]=M*y+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Tae,e,Sae)}lookAt(e,t,r){const s=this.elements;return xm.subVectors(e,t),xm.lengthSq()===0&&(xm.z=1),xm.normalize(),ny.crossVectors(r,xm),ny.lengthSq()===0&&(Math.abs(r.z)===1?xm.x+=1e-4:xm.z+=1e-4,xm.normalize(),ny.crossVectors(r,xm)),ny.normalize(),_M.crossVectors(xm,ny),s[0]=ny.x,s[4]=_M.x,s[8]=xm.x,s[1]=ny.y,s[5]=_M.y,s[9]=xm.y,s[2]=ny.z,s[6]=_M.z,s[10]=xm.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,s=t.elements,o=this.elements,l=r[0],u=r[4],h=r[8],f=r[12],g=r[1],y=r[5],b=r[9],S=r[13],C=r[2],M=r[6],A=r[10],k=r[14],O=r[3],P=r[7],D=r[11],U=r[15],H=s[0],V=s[4],z=s[8],Z=s[12],oe=s[1],ue=s[5],q=s[9],ae=s[13],le=s[2],ce=s[6],ge=s[10],$e=s[14],K=s[3],ie=s[7],se=s[11],fe=s[15];return o[0]=l*H+u*oe+h*le+f*K,o[4]=l*V+u*ue+h*ce+f*ie,o[8]=l*z+u*q+h*ge+f*se,o[12]=l*Z+u*ae+h*$e+f*fe,o[1]=g*H+y*oe+b*le+S*K,o[5]=g*V+y*ue+b*ce+S*ie,o[9]=g*z+y*q+b*ge+S*se,o[13]=g*Z+y*ae+b*$e+S*fe,o[2]=C*H+M*oe+A*le+k*K,o[6]=C*V+M*ue+A*ce+k*ie,o[10]=C*z+M*q+A*ge+k*se,o[14]=C*Z+M*ae+A*$e+k*fe,o[3]=O*H+P*oe+D*le+U*K,o[7]=O*V+P*ue+D*ce+U*ie,o[11]=O*z+P*q+D*ge+U*se,o[15]=O*Z+P*ae+D*$e+U*fe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],s=e[8],o=e[12],l=e[1],u=e[5],h=e[9],f=e[13],g=e[2],y=e[6],b=e[10],S=e[14],C=e[3],M=e[7],A=e[11],k=e[15];return C*(+o*h*y-s*f*y-o*u*b+r*f*b+s*u*S-r*h*S)+M*(+t*h*S-t*f*b+o*l*b-s*l*S+s*f*g-o*h*g)+A*(+t*f*y-t*u*S-o*l*y+r*l*S+o*u*g-r*f*g)+k*(-s*u*g-t*h*y+t*u*b+s*l*y-r*l*b+r*h*g)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],f=e[7],g=e[8],y=e[9],b=e[10],S=e[11],C=e[12],M=e[13],A=e[14],k=e[15],O=y*A*f-M*b*f+M*h*S-u*A*S-y*h*k+u*b*k,P=C*b*f-g*A*f-C*h*S+l*A*S+g*h*k-l*b*k,D=g*M*f-C*y*f+C*u*S-l*M*S-g*u*k+l*y*k,U=C*y*h-g*M*h-C*u*b+l*M*b+g*u*A-l*y*A,H=t*O+r*P+s*D+o*U;if(H===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const V=1/H;return e[0]=O*V,e[1]=(M*b*o-y*A*o-M*s*S+r*A*S+y*s*k-r*b*k)*V,e[2]=(u*A*o-M*h*o+M*s*f-r*A*f-u*s*k+r*h*k)*V,e[3]=(y*h*o-u*b*o-y*s*f+r*b*f+u*s*S-r*h*S)*V,e[4]=P*V,e[5]=(g*A*o-C*b*o+C*s*S-t*A*S-g*s*k+t*b*k)*V,e[6]=(C*h*o-l*A*o-C*s*f+t*A*f+l*s*k-t*h*k)*V,e[7]=(l*b*o-g*h*o+g*s*f-t*b*f-l*s*S+t*h*S)*V,e[8]=D*V,e[9]=(C*y*o-g*M*o-C*r*S+t*M*S+g*r*k-t*y*k)*V,e[10]=(l*M*o-C*u*o+C*r*f-t*M*f-l*r*k+t*u*k)*V,e[11]=(g*u*o-l*y*o-g*r*f+t*y*f+l*r*S-t*u*S)*V,e[12]=U*V,e[13]=(g*M*s-C*y*s+C*r*b-t*M*b-g*r*A+t*y*A)*V,e[14]=(C*u*s-l*M*s-C*r*h+t*M*h+l*r*A-t*u*A)*V,e[15]=(l*y*s-g*u*s+g*r*h-t*y*h-l*r*b+t*u*b)*V,this}scale(e){const t=this.elements,r=e.x,s=e.y,o=e.z;return t[0]*=r,t[4]*=s,t[8]*=o,t[1]*=r,t[5]*=s,t[9]*=o,t[2]*=r,t[6]*=s,t[10]*=o,t[3]*=r,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,s))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),s=Math.sin(t),o=1-r,l=e.x,u=e.y,h=e.z,f=o*l,g=o*u;return this.set(f*l+r,f*u-s*h,f*h+s*u,0,f*u+s*h,g*u+r,g*h-s*l,0,f*h-s*u,g*h+s*l,o*h*h+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,s,o,l){return this.set(1,r,o,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,r){const s=this.elements,o=t._x,l=t._y,u=t._z,h=t._w,f=o+o,g=l+l,y=u+u,b=o*f,S=o*g,C=o*y,M=l*g,A=l*y,k=u*y,O=h*f,P=h*g,D=h*y,U=r.x,H=r.y,V=r.z;return s[0]=(1-(M+k))*U,s[1]=(S+D)*U,s[2]=(C-P)*U,s[3]=0,s[4]=(S-D)*H,s[5]=(1-(b+k))*H,s[6]=(A+O)*H,s[7]=0,s[8]=(C+P)*V,s[9]=(A-O)*V,s[10]=(1-(b+M))*V,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,r){const s=this.elements;let o=eS.set(s[0],s[1],s[2]).length();const l=eS.set(s[4],s[5],s[6]).length(),u=eS.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],Yg.copy(this);const f=1/o,g=1/l,y=1/u;return Yg.elements[0]*=f,Yg.elements[1]*=f,Yg.elements[2]*=f,Yg.elements[4]*=g,Yg.elements[5]*=g,Yg.elements[6]*=g,Yg.elements[8]*=y,Yg.elements[9]*=y,Yg.elements[10]*=y,t.setFromRotationMatrix(Yg),r.x=o,r.y=l,r.z=u,this}makePerspective(e,t,r,s,o,l,u=E1){const h=this.elements,f=2*o/(t-e),g=2*o/(r-s),y=(t+e)/(t-e),b=(r+s)/(r-s);let S,C;if(u===E1)S=-(l+o)/(l-o),C=-2*l*o/(l-o);else if(u===HD)S=-l/(l-o),C=-l*o/(l-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return h[0]=f,h[4]=0,h[8]=y,h[12]=0,h[1]=0,h[5]=g,h[9]=b,h[13]=0,h[2]=0,h[6]=0,h[10]=S,h[14]=C,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,r,s,o,l,u=E1){const h=this.elements,f=1/(t-e),g=1/(r-s),y=1/(l-o),b=(t+e)*f,S=(r+s)*g;let C,M;if(u===E1)C=(l+o)*y,M=-2*y;else if(u===HD)C=o*y,M=-1*y;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return h[0]=2*f,h[4]=0,h[8]=0,h[12]=-b,h[1]=0,h[5]=2*g,h[9]=0,h[13]=-S,h[2]=0,h[6]=0,h[10]=M,h[14]=-C,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let s=0;s<16;s++)if(t[s]!==r[s])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const eS=new zt,Yg=new Xs,Tae=new zt(0,0,0),Sae=new zt(1,1,1),ny=new zt,_M=new zt,xm=new zt,A5=new Xs,I5=new Bu;class lT{constructor(e=0,t=0,r=0,s=lT.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,s=this._order){return this._x=e,this._y=t,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],h=s[1],f=s[5],g=s[9],y=s[2],b=s[6],S=s[10];switch(t){case"XYZ":this._y=Math.asin(Lf(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-g,S),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(b,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Lf(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(u,S),this._z=Math.atan2(h,f)):(this._y=Math.atan2(-y,o),this._z=0);break;case"ZXY":this._x=Math.asin(Lf(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(-y,S),this._z=Math.atan2(-l,f)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-Lf(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(b,S),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-l,f));break;case"YZX":this._z=Math.asin(Lf(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-g,f),this._y=Math.atan2(-y,o)):(this._x=0,this._y=Math.atan2(u,S));break;case"XZY":this._z=Math.asin(-Lf(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(b,f),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-g,S),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return A5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(A5,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return I5.setFromEuler(this),this.setFromQuaternion(I5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}lT.DEFAULT_ORDER="XYZ";class lI{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let wae=0;const R5=new zt,tS=new Bu,Qv=new Xs,yM=new zt,qE=new zt,Eae=new zt,xae=new Bu,k5=new zt(1,0,0),O5=new zt(0,1,0),L5=new zt(0,0,1),$ae={type:"added"},Cae={type:"removed"},RO={type:"childadded",child:null},kO={type:"childremoved",child:null};class fh extends fk{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:wae++}),this.uuid=u0(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=fh.DEFAULT_UP.clone();const e=new zt,t=new lT,r=new Bu,s=new zt(1,1,1);function o(){r.setFromEuler(t,!1)}function l(){t.setFromQuaternion(r,void 0,!1)}t._onChange(o),r._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Xs},normalMatrix:{value:new I_}}),this.matrix=new Xs,this.matrixWorld=new Xs,this.matrixAutoUpdate=fh.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=fh.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new lI,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return tS.setFromAxisAngle(e,t),this.quaternion.multiply(tS),this}rotateOnWorldAxis(e,t){return tS.setFromAxisAngle(e,t),this.quaternion.premultiply(tS),this}rotateX(e){return this.rotateOnAxis(k5,e)}rotateY(e){return this.rotateOnAxis(O5,e)}rotateZ(e){return this.rotateOnAxis(L5,e)}translateOnAxis(e,t){return R5.copy(e).applyQuaternion(this.quaternion),this.position.add(R5.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(k5,e)}translateY(e){return this.translateOnAxis(O5,e)}translateZ(e){return this.translateOnAxis(L5,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Qv.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?yM.copy(e):yM.set(e,t,r);const s=this.parent;this.updateWorldMatrix(!0,!1),qE.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Qv.lookAt(qE,yM,this.up):Qv.lookAt(yM,qE,this.up),this.quaternion.setFromRotationMatrix(Qv),s&&(Qv.extractRotation(s.matrixWorld),tS.setFromRotationMatrix(Qv),this.quaternion.premultiply(tS.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent($ae),RO.child=e,this.dispatchEvent(RO),RO.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Cae),kO.child=e,this.dispatchEvent(kO),kO.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Qv.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Qv.multiply(e.parent.matrixWorld)),e.applyMatrix4(Qv),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,s=this.children.length;r<s;r++){const l=this.children[r].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const s=this.children;for(let o=0,l=s.length;o<l;o++)s[o].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qE,e,Eae),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qE,xae,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,s=t.length;r<s;r++){const o=t[r];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let o=0,l=s.length;o<l;o++){const u=s[o];u.matrixWorldAutoUpdate===!0&&u.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(u=>({boxInitialized:u.boxInitialized,boxMin:u.box.min.toArray(),boxMax:u.box.max.toArray(),sphereInitialized:u.sphereInitialized,sphereRadius:u.sphere.radius,sphereCenter:u.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(u,h){return u[h.uuid]===void 0&&(u[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const h=u.shapes;if(Array.isArray(h))for(let f=0,g=h.length;f<g;f++){const y=h[f];o(e.shapes,y)}else o(e.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let h=0,f=this.material.length;h<f;h++)u.push(o(e.materials,this.material[h]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const h=this.animations[u];s.animations.push(o(e.animations,h))}}if(t){const u=l(e.geometries),h=l(e.materials),f=l(e.textures),g=l(e.images),y=l(e.shapes),b=l(e.skeletons),S=l(e.animations),C=l(e.nodes);u.length>0&&(r.geometries=u),h.length>0&&(r.materials=h),f.length>0&&(r.textures=f),g.length>0&&(r.images=g),y.length>0&&(r.shapes=y),b.length>0&&(r.skeletons=b),S.length>0&&(r.animations=S),C.length>0&&(r.nodes=C)}return r.object=s,r;function l(u){const h=[];for(const f in u){const g=u[f];delete g.metadata,h.push(g)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const s=e.children[r];this.add(s.clone())}return this}}fh.DEFAULT_UP=new zt(0,1,0);fh.DEFAULT_MATRIX_AUTO_UPDATE=!0;fh.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Xg=new zt,Zv=new zt,OO=new zt,e_=new zt,nS=new zt,rS=new zt,N5=new zt,LO=new zt,NO=new zt,DO=new zt;class rv{constructor(e=new zt,t=new zt,r=new zt){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,s){s.subVectors(r,t),Xg.subVectors(e,t),s.cross(Xg);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,r,s,o){Xg.subVectors(s,t),Zv.subVectors(r,t),OO.subVectors(e,t);const l=Xg.dot(Xg),u=Xg.dot(Zv),h=Xg.dot(OO),f=Zv.dot(Zv),g=Zv.dot(OO),y=l*f-u*u;if(y===0)return o.set(0,0,0),null;const b=1/y,S=(f*h-u*g)*b,C=(l*g-u*h)*b;return o.set(1-S-C,C,S)}static containsPoint(e,t,r,s){return this.getBarycoord(e,t,r,s,e_)===null?!1:e_.x>=0&&e_.y>=0&&e_.x+e_.y<=1}static getInterpolation(e,t,r,s,o,l,u,h){return this.getBarycoord(e,t,r,s,e_)===null?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(o,e_.x),h.addScaledVector(l,e_.y),h.addScaledVector(u,e_.z),h)}static isFrontFacing(e,t,r,s){return Xg.subVectors(r,t),Zv.subVectors(e,t),Xg.cross(Zv).dot(s)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,s){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,r,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Xg.subVectors(this.c,this.b),Zv.subVectors(this.a,this.b),Xg.cross(Zv).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return rv.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return rv.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,s,o){return rv.getInterpolation(e,this.a,this.b,this.c,t,r,s,o)}containsPoint(e){return rv.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return rv.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,s=this.b,o=this.c;let l,u;nS.subVectors(s,r),rS.subVectors(o,r),LO.subVectors(e,r);const h=nS.dot(LO),f=rS.dot(LO);if(h<=0&&f<=0)return t.copy(r);NO.subVectors(e,s);const g=nS.dot(NO),y=rS.dot(NO);if(g>=0&&y<=g)return t.copy(s);const b=h*y-g*f;if(b<=0&&h>=0&&g<=0)return l=h/(h-g),t.copy(r).addScaledVector(nS,l);DO.subVectors(e,o);const S=nS.dot(DO),C=rS.dot(DO);if(C>=0&&S<=C)return t.copy(o);const M=S*f-h*C;if(M<=0&&f>=0&&C<=0)return u=f/(f-C),t.copy(r).addScaledVector(rS,u);const A=g*C-S*y;if(A<=0&&y-g>=0&&S-C>=0)return N5.subVectors(o,s),u=(y-g)/(y-g+(S-C)),t.copy(s).addScaledVector(N5,u);const k=1/(A+M+b);return l=M*k,u=b*k,t.copy(r).addScaledVector(nS,l).addScaledVector(rS,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const wX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ry={h:0,s:0,l:0},bM={h:0,s:0,l:0};function PO(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Ph{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=yy){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Vg.toWorkingColorSpace(this,t),this}setRGB(e,t,r,s=Vg.workingColorSpace){return this.r=e,this.g=t,this.b=r,Vg.toWorkingColorSpace(this,s),this}setHSL(e,t,r,s=Vg.workingColorSpace){if(e=n3(e,1),t=Lf(t,0,1),r=Lf(r,0,1),t===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+t):r+t-r*t,l=2*r-o;this.r=PO(l,o,e+1/3),this.g=PO(l,o,e),this.b=PO(l,o,e-1/3)}return Vg.toWorkingColorSpace(this,s),this}setStyle(e,t=yy){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(l===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=yy){const r=wX[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=gw(e.r),this.g=gw(e.g),this.b=gw(e.b),this}copyLinearToSRGB(e){return this.r=wO(e.r),this.g=wO(e.g),this.b=wO(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=yy){return Vg.fromWorkingColorSpace($f.copy(this),e),Math.round(Lf($f.r*255,0,255))*65536+Math.round(Lf($f.g*255,0,255))*256+Math.round(Lf($f.b*255,0,255))}getHexString(e=yy){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Vg.workingColorSpace){Vg.fromWorkingColorSpace($f.copy(this),t);const r=$f.r,s=$f.g,o=$f.b,l=Math.max(r,s,o),u=Math.min(r,s,o);let h,f;const g=(u+l)/2;if(u===l)h=0,f=0;else{const y=l-u;switch(f=g<=.5?y/(l+u):y/(2-l-u),l){case r:h=(s-o)/y+(s<o?6:0);break;case s:h=(o-r)/y+2;break;case o:h=(r-s)/y+4;break}h/=6}return e.h=h,e.s=f,e.l=g,e}getRGB(e,t=Vg.workingColorSpace){return Vg.fromWorkingColorSpace($f.copy(this),t),e.r=$f.r,e.g=$f.g,e.b=$f.b,e}getStyle(e=yy){Vg.fromWorkingColorSpace($f.copy(this),e);const t=$f.r,r=$f.g,s=$f.b;return e!==yy?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(s*255)})`}offsetHSL(e,t,r){return this.getHSL(ry),this.setHSL(ry.h+e,ry.s+t,ry.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(ry),e.getHSL(bM);const r=qx(ry.h,bM.h,t),s=qx(ry.s,bM.s,t),o=qx(ry.l,bM.l,t);return this.setHSL(r,s,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,s=this.b,o=e.elements;return this.r=o[0]*t+o[3]*r+o[6]*s,this.g=o[1]*t+o[4]*r+o[7]*s,this.b=o[2]*t+o[5]*r+o[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const $f=new Ph;Ph.NAMES=wX;let Mae=0;class zy extends fk{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Mae++}),this.uuid=u0(),this.name="",this.type="Material",this.blending=c5,this.side=lR,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=d5,this.blendDst=f5,this.blendEquation=h5,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ph(0,0,0),this.blendAlpha=0,this.depthFunc=p5,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=w5,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KT,this.stencilZFail=KT,this.stencilZPass=KT,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(r):s&&s.isVector3&&r&&r.isVector3?s.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==c5&&(r.blending=this.blending),this.side!==lR&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==d5&&(r.blendSrc=this.blendSrc),this.blendDst!==f5&&(r.blendDst=this.blendDst),this.blendEquation!==h5&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==p5&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==w5&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KT&&(r.stencilFail=this.stencilFail),this.stencilZFail!==KT&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==KT&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function s(o){const l=[];for(const u in o){const h=o[u];delete h.metadata,l.push(h)}return l}if(t){const o=s(e.textures),l=s(e.images);o.length>0&&(r.textures=o),l.length>0&&(r.images=l)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const s=t.length;r=new Array(s);for(let o=0;o!==s;++o)r[o]=t[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class tw extends zy{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ph(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new lT,this.combine=Boe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Rh=new zt,TM=new cc;class Dm{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=UD,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ZF,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return SX("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[r+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)TM.fromBufferAttribute(this,t),TM.applyMatrix3(e),this.setXY(t,TM.x,TM.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Rh.fromBufferAttribute(this,t),Rh.applyMatrix3(e),this.setXYZ(t,Rh.x,Rh.y,Rh.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Rh.fromBufferAttribute(this,t),Rh.applyMatrix4(e),this.setXYZ(t,Rh.x,Rh.y,Rh.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Rh.fromBufferAttribute(this,t),Rh.applyNormalMatrix(e),this.setXYZ(t,Rh.x,Rh.y,Rh.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Rh.fromBufferAttribute(this,t),Rh.transformDirection(e),this.setXYZ(t,Rh.x,Rh.y,Rh.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=n0(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Aa(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=n0(t,this.array)),t}setX(e,t){return this.normalized&&(t=Aa(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=n0(t,this.array)),t}setY(e,t){return this.normalized&&(t=Aa(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=n0(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Aa(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=n0(t,this.array)),t}setW(e,t){return this.normalized&&(t=Aa(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Aa(t,this.array),r=Aa(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,s){return e*=this.itemSize,this.normalized&&(t=Aa(t,this.array),r=Aa(r,this.array),s=Aa(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=s,this}setXYZW(e,t,r,s,o){return e*=this.itemSize,this.normalized&&(t=Aa(t,this.array),r=Aa(r,this.array),s=Aa(s,this.array),o=Aa(o,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==UD&&(e.usage=this.usage),e}}class Aae extends Dm{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class Iae extends Dm{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class r3 extends Dm{constructor(e,t,r){super(new Float32Array(e),t,r)}}let Rae=0;const ag=new Xs,BO=new fh,iS=new zt,$m=new R_,QE=new R_,Td=new zt;class tb extends fk{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Rae++}),this.uuid=u0(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(pae(e)?Iae:Aae)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new I_().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ag.makeRotationFromQuaternion(e),this.applyMatrix4(ag),this}rotateX(e){return ag.makeRotationX(e),this.applyMatrix4(ag),this}rotateY(e){return ag.makeRotationY(e),this.applyMatrix4(ag),this}rotateZ(e){return ag.makeRotationZ(e),this.applyMatrix4(ag),this}translate(e,t,r){return ag.makeTranslation(e,t,r),this.applyMatrix4(ag),this}scale(e,t,r){return ag.makeScale(e,t,r),this.applyMatrix4(ag),this}lookAt(e){return BO.lookAt(e),BO.updateMatrix(),this.applyMatrix4(BO.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(iS).negate(),this.translate(iS.x,iS.y,iS.z),this}setFromPoints(e){const t=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new r3(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new R_);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new zt(-1/0,-1/0,-1/0),new zt(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,s=t.length;r<s;r++){const o=t[r];$m.setFromBufferAttribute(o),this.morphTargetsRelative?(Td.addVectors(this.boundingBox.min,$m.min),this.boundingBox.expandByPoint(Td),Td.addVectors(this.boundingBox.max,$m.max),this.boundingBox.expandByPoint(Td)):(this.boundingBox.expandByPoint($m.min),this.boundingBox.expandByPoint($m.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new wv);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new zt,1/0);return}if(e){const r=this.boundingSphere.center;if($m.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const u=t[o];QE.setFromBufferAttribute(u),this.morphTargetsRelative?(Td.addVectors($m.min,QE.min),$m.expandByPoint(Td),Td.addVectors($m.max,QE.max),$m.expandByPoint(Td)):($m.expandByPoint(QE.min),$m.expandByPoint(QE.max))}$m.getCenter(r);let s=0;for(let o=0,l=e.count;o<l;o++)Td.fromBufferAttribute(e,o),s=Math.max(s,r.distanceToSquared(Td));if(t)for(let o=0,l=t.length;o<l;o++){const u=t[o],h=this.morphTargetsRelative;for(let f=0,g=u.count;f<g;f++)Td.fromBufferAttribute(u,f),h&&(iS.fromBufferAttribute(e,f),Td.add(iS)),s=Math.max(s,r.distanceToSquared(Td))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,s=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Dm(new Float32Array(4*r.count),4));const l=this.getAttribute("tangent"),u=[],h=[];for(let z=0;z<r.count;z++)u[z]=new zt,h[z]=new zt;const f=new zt,g=new zt,y=new zt,b=new cc,S=new cc,C=new cc,M=new zt,A=new zt;function k(z,Z,oe){f.fromBufferAttribute(r,z),g.fromBufferAttribute(r,Z),y.fromBufferAttribute(r,oe),b.fromBufferAttribute(o,z),S.fromBufferAttribute(o,Z),C.fromBufferAttribute(o,oe),g.sub(f),y.sub(f),S.sub(b),C.sub(b);const ue=1/(S.x*C.y-C.x*S.y);isFinite(ue)&&(M.copy(g).multiplyScalar(C.y).addScaledVector(y,-S.y).multiplyScalar(ue),A.copy(y).multiplyScalar(S.x).addScaledVector(g,-C.x).multiplyScalar(ue),u[z].add(M),u[Z].add(M),u[oe].add(M),h[z].add(A),h[Z].add(A),h[oe].add(A))}let O=this.groups;O.length===0&&(O=[{start:0,count:e.count}]);for(let z=0,Z=O.length;z<Z;++z){const oe=O[z],ue=oe.start,q=oe.count;for(let ae=ue,le=ue+q;ae<le;ae+=3)k(e.getX(ae+0),e.getX(ae+1),e.getX(ae+2))}const P=new zt,D=new zt,U=new zt,H=new zt;function V(z){U.fromBufferAttribute(s,z),H.copy(U);const Z=u[z];P.copy(Z),P.sub(U.multiplyScalar(U.dot(Z))).normalize(),D.crossVectors(H,Z);const ue=D.dot(h[z])<0?-1:1;l.setXYZW(z,P.x,P.y,P.z,ue)}for(let z=0,Z=O.length;z<Z;++z){const oe=O[z],ue=oe.start,q=oe.count;for(let ae=ue,le=ue+q;ae<le;ae+=3)V(e.getX(ae+0)),V(e.getX(ae+1)),V(e.getX(ae+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Dm(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let b=0,S=r.count;b<S;b++)r.setXYZ(b,0,0,0);const s=new zt,o=new zt,l=new zt,u=new zt,h=new zt,f=new zt,g=new zt,y=new zt;if(e)for(let b=0,S=e.count;b<S;b+=3){const C=e.getX(b+0),M=e.getX(b+1),A=e.getX(b+2);s.fromBufferAttribute(t,C),o.fromBufferAttribute(t,M),l.fromBufferAttribute(t,A),g.subVectors(l,o),y.subVectors(s,o),g.cross(y),u.fromBufferAttribute(r,C),h.fromBufferAttribute(r,M),f.fromBufferAttribute(r,A),u.add(g),h.add(g),f.add(g),r.setXYZ(C,u.x,u.y,u.z),r.setXYZ(M,h.x,h.y,h.z),r.setXYZ(A,f.x,f.y,f.z)}else for(let b=0,S=t.count;b<S;b+=3)s.fromBufferAttribute(t,b+0),o.fromBufferAttribute(t,b+1),l.fromBufferAttribute(t,b+2),g.subVectors(l,o),y.subVectors(s,o),g.cross(y),r.setXYZ(b+0,g.x,g.y,g.z),r.setXYZ(b+1,g.x,g.y,g.z),r.setXYZ(b+2,g.x,g.y,g.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Td.fromBufferAttribute(e,t),Td.normalize(),e.setXYZ(t,Td.x,Td.y,Td.z)}toNonIndexed(){function e(u,h){const f=u.array,g=u.itemSize,y=u.normalized,b=new f.constructor(h.length*g);let S=0,C=0;for(let M=0,A=h.length;M<A;M++){u.isInterleavedBufferAttribute?S=h[M]*u.data.stride+u.offset:S=h[M]*g;for(let k=0;k<g;k++)b[C++]=f[S++]}return new Dm(b,g,y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new tb,r=this.index.array,s=this.attributes;for(const u in s){const h=s[u],f=e(h,r);t.setAttribute(u,f)}const o=this.morphAttributes;for(const u in o){const h=[],f=o[u];for(let g=0,y=f.length;g<y;g++){const b=f[g],S=e(b,r);h.push(S)}t.morphAttributes[u]=h}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,h=l.length;u<h;u++){const f=l[u];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const f in h)h[f]!==void 0&&(e[f]=h[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const h in r){const f=r[h];e.data.attributes[h]=f.toJSON(e.data)}const s={};let o=!1;for(const h in this.morphAttributes){const f=this.morphAttributes[h],g=[];for(let y=0,b=f.length;y<b;y++){const S=f[y];g.push(S.toJSON(e.data))}g.length>0&&(s[h]=g,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const s=e.attributes;for(const f in s){const g=s[f];this.setAttribute(f,g.clone(t))}const o=e.morphAttributes;for(const f in o){const g=[],y=o[f];for(let b=0,S=y.length;b<S;b++)g.push(y[b].clone(t));this.morphAttributes[f]=g}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let f=0,g=l.length;f<g;f++){const y=l[f];this.addGroup(y.start,y.count,y.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const D5=new Xs,Hb=new pk,SM=new wv,P5=new zt,sS=new zt,oS=new zt,aS=new zt,FO=new zt,wM=new zt,EM=new cc,xM=new cc,$M=new cc,B5=new zt,F5=new zt,z5=new zt,CM=new zt,MM=new zt;class mk extends fh{constructor(e=new tb,t=new tw){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const s=t[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}getVertexPosition(e,t){const r=this.geometry,s=r.attributes.position,o=r.morphAttributes.position,l=r.morphTargetsRelative;t.fromBufferAttribute(s,e);const u=this.morphTargetInfluences;if(o&&u){wM.set(0,0,0);for(let h=0,f=o.length;h<f;h++){const g=u[h],y=o[h];g!==0&&(FO.fromBufferAttribute(y,e),l?wM.addScaledVector(FO,g):wM.addScaledVector(FO.sub(t),g))}t.add(wM)}return t}raycast(e,t){const r=this.geometry,s=this.material,o=this.matrixWorld;s!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),SM.copy(r.boundingSphere),SM.applyMatrix4(o),Hb.copy(e.ray).recast(e.near),!(SM.containsPoint(Hb.origin)===!1&&(Hb.intersectSphere(SM,P5)===null||Hb.origin.distanceToSquared(P5)>(e.far-e.near)**2))&&(D5.copy(o).invert(),Hb.copy(e.ray).applyMatrix4(D5),!(r.boundingBox!==null&&Hb.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Hb)))}_computeIntersections(e,t,r){let s;const o=this.geometry,l=this.material,u=o.index,h=o.attributes.position,f=o.attributes.uv,g=o.attributes.uv1,y=o.attributes.normal,b=o.groups,S=o.drawRange;if(u!==null)if(Array.isArray(l))for(let C=0,M=b.length;C<M;C++){const A=b[C],k=l[A.materialIndex],O=Math.max(A.start,S.start),P=Math.min(u.count,Math.min(A.start+A.count,S.start+S.count));for(let D=O,U=P;D<U;D+=3){const H=u.getX(D),V=u.getX(D+1),z=u.getX(D+2);s=AM(this,k,e,r,f,g,y,H,V,z),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=A.materialIndex,t.push(s))}}else{const C=Math.max(0,S.start),M=Math.min(u.count,S.start+S.count);for(let A=C,k=M;A<k;A+=3){const O=u.getX(A),P=u.getX(A+1),D=u.getX(A+2);s=AM(this,l,e,r,f,g,y,O,P,D),s&&(s.faceIndex=Math.floor(A/3),t.push(s))}}else if(h!==void 0)if(Array.isArray(l))for(let C=0,M=b.length;C<M;C++){const A=b[C],k=l[A.materialIndex],O=Math.max(A.start,S.start),P=Math.min(h.count,Math.min(A.start+A.count,S.start+S.count));for(let D=O,U=P;D<U;D+=3){const H=D,V=D+1,z=D+2;s=AM(this,k,e,r,f,g,y,H,V,z),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=A.materialIndex,t.push(s))}}else{const C=Math.max(0,S.start),M=Math.min(h.count,S.start+S.count);for(let A=C,k=M;A<k;A+=3){const O=A,P=A+1,D=A+2;s=AM(this,l,e,r,f,g,y,O,P,D),s&&(s.faceIndex=Math.floor(A/3),t.push(s))}}}}function kae(n,e,t,r,s,o,l,u){let h;if(e.side===Doe?h=r.intersectTriangle(l,o,s,!0,u):h=r.intersectTriangle(s,o,l,e.side===lR,u),h===null)return null;MM.copy(u),MM.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(MM);return f<t.near||f>t.far?null:{distance:f,point:MM.clone(),object:n}}function AM(n,e,t,r,s,o,l,u,h,f){n.getVertexPosition(u,sS),n.getVertexPosition(h,oS),n.getVertexPosition(f,aS);const g=kae(n,e,t,r,sS,oS,aS,CM);if(g){s&&(EM.fromBufferAttribute(s,u),xM.fromBufferAttribute(s,h),$M.fromBufferAttribute(s,f),g.uv=rv.getInterpolation(CM,sS,oS,aS,EM,xM,$M,new cc)),o&&(EM.fromBufferAttribute(o,u),xM.fromBufferAttribute(o,h),$M.fromBufferAttribute(o,f),g.uv1=rv.getInterpolation(CM,sS,oS,aS,EM,xM,$M,new cc)),l&&(B5.fromBufferAttribute(l,u),F5.fromBufferAttribute(l,h),z5.fromBufferAttribute(l,f),g.normal=rv.getInterpolation(CM,sS,oS,aS,B5,F5,z5,new zt),g.normal.dot(r.direction)>0&&g.normal.multiplyScalar(-1));const y={a:u,b:h,c:f,normal:new zt,materialIndex:0};rv.getNormal(sS,oS,aS,y.normal),g.face=y}return g}class EX extends fh{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Xs,this.projectionMatrix=new Xs,this.projectionMatrixInverse=new Xs,this.coordinateSystem=E1}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const iy=new zt,U5=new cc,H5=new cc;class i3 extends EX{constructor(e=50,t=1,r=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=M$*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Jx*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return M$*2*Math.atan(Math.tan(Jx*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){iy.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(iy.x,iy.y).multiplyScalar(-e/iy.z),iy.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(iy.x,iy.y).multiplyScalar(-e/iy.z)}getViewSize(e,t){return this.getViewBounds(e,U5,H5),t.subVectors(H5,U5)}setViewOffset(e,t,r,s,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Jx*.5*this.fov)/this.zoom,r=2*t,s=this.aspect*r,o=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const h=l.fullWidth,f=l.fullHeight;o+=l.offsetX*s/h,t-=l.offsetY*r/f,s*=l.width/h,r*=l.height/f}const u=this.filmOffset;u!==0&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const zO=new zt,Oae=new zt,Lae=new I_;class lS{constructor(e=new zt(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,s){return this.normal.set(e,t,r),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const s=zO.subVectors(r,t).cross(Oae.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(zO),s=this.normal.dot(r);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Lae.getNormalMatrix(e),s=this.coplanarPoint(zO).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Gb=new wv,IM=new zt;class Nae{constructor(e=new lS,t=new lS,r=new lS,s=new lS,o=new lS,l=new lS){this.planes=[e,t,r,s,o,l]}set(e,t,r,s,o,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(r),u[3].copy(s),u[4].copy(o),u[5].copy(l),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=E1){const r=this.planes,s=e.elements,o=s[0],l=s[1],u=s[2],h=s[3],f=s[4],g=s[5],y=s[6],b=s[7],S=s[8],C=s[9],M=s[10],A=s[11],k=s[12],O=s[13],P=s[14],D=s[15];if(r[0].setComponents(h-o,b-f,A-S,D-k).normalize(),r[1].setComponents(h+o,b+f,A+S,D+k).normalize(),r[2].setComponents(h+l,b+g,A+C,D+O).normalize(),r[3].setComponents(h-l,b-g,A-C,D-O).normalize(),r[4].setComponents(h-u,b-y,A-M,D-P).normalize(),t===E1)r[5].setComponents(h+u,b+y,A+M,D+P).normalize();else if(t===HD)r[5].setComponents(u,y,M,P).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Gb.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Gb.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Gb)}intersectsSprite(e){return Gb.center.set(0,0,0),Gb.radius=.7071067811865476,Gb.applyMatrix4(e.matrixWorld),this.intersectsSphere(Gb)}intersectsSphere(e){const t=this.planes,r=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(r)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const s=t[r];if(IM.x=s.normal.x>0?e.max.x:e.min.x,IM.y=s.normal.y>0?e.max.y:e.min.y,IM.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(IM)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class xX extends EX{constructor(e=-1,t=1,r=1,s=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=s,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,s,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=r-e,l=r+e,u=s+t,h=s-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=f*this.view.offsetX,l=o+f*this.view.width,u-=g*this.view.offsetY,h=u-g*this.view.height}this.projectionMatrix.makeOrthographic(o,l,u,h,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class Dae extends Nm{constructor(e,t,r,s,o,l,u,h,f,g){if(g=g!==void 0?g:bO,g!==bO&&g!==g5)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&g===bO&&(r=Goe),r===void 0&&g===g5&&(r=Woe),super(null,s,o,l,u,h,g,r,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:$$,this.minFilter=h!==void 0?h:$$,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const Pae=new Dae(1,1);Pae.compareFunction=Joe;class UO extends fh{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Bae{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=UD,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=u0()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return SX("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[r+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=u0()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=u0()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const np=new zt;class s3{constructor(e,t,r,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)np.fromBufferAttribute(this,t),np.applyMatrix4(e),this.setXYZ(t,np.x,np.y,np.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)np.fromBufferAttribute(this,t),np.applyNormalMatrix(e),this.setXYZ(t,np.x,np.y,np.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)np.fromBufferAttribute(this,t),np.transformDirection(e),this.setXYZ(t,np.x,np.y,np.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=n0(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Aa(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=Aa(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Aa(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Aa(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Aa(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=n0(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=n0(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=n0(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=n0(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Aa(t,this.array),r=Aa(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Aa(t,this.array),r=Aa(r,this.array),s=Aa(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=s,this}setXYZW(e,t,r,s,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=Aa(t,this.array),r=Aa(r,this.array),s=Aa(s,this.array),o=Aa(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return new Dm(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new s3(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const G5=new zt,W5=new yg,V5=new yg,Fae=new zt,j5=new Xs,RM=new zt,HO=new wv,Y5=new Xs,GO=new pk;class zae extends mk{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=m5,this.bindMatrix=new Xs,this.bindMatrixInverse=new Xs,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new R_),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,RM),this.boundingBox.expandByPoint(RM)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new wv),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,RM),this.boundingSphere.expandByPoint(RM)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,s=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),HO.copy(this.boundingSphere),HO.applyMatrix4(s),e.ray.intersectsSphere(HO)!==!1&&(Y5.copy(s).invert(),GO.copy(e.ray).applyMatrix4(Y5),!(this.boundingBox!==null&&GO.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,GO)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new yg,t=this.geometry.attributes.skinWeight;for(let r=0,s=t.count;r<s;r++){e.fromBufferAttribute(t,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===m5?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Foe?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,s=this.geometry;W5.fromBufferAttribute(s.attributes.skinIndex,e),V5.fromBufferAttribute(s.attributes.skinWeight,e),G5.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=V5.getComponent(o);if(l!==0){const u=W5.getComponent(o);j5.multiplyMatrices(r.bones[u].matrixWorld,r.boneInverses[u]),t.addScaledVector(Fae.copy(G5).applyMatrix4(j5),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class $X extends fh{constructor(){super(),this.isBone=!0,this.type="Bone"}}class CX extends Nm{constructor(e=null,t=1,r=1,s,o,l,u,h,f=$$,g=$$,y,b){super(null,l,u,h,f,g,s,o,y,b),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const X5=new Xs,Uae=new Xs;class o3{constructor(e=[],t=[]){this.uuid=u0(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,s=this.bones.length;r<s;r++)this.boneInverses.push(new Xs)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Xs;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,s=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const u=e[o]?e[o].matrixWorld:Uae;X5.multiplyMatrices(u,t[o]),X5.toArray(r,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new o3(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new CX(t,e,e,e3,ZF);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,s=e.bones.length;r<s;r++){const o=e.bones[r];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new $X),this.bones.push(l),this.boneInverses.push(new Xs().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let s=0,o=t.length;s<o;s++){const l=t[s];e.bones.push(l.uuid);const u=r[s];e.boneInverses.push(u.toArray())}return e}}class K5 extends Dm{constructor(e,t,r,s=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const uS=new Xs,J5=new Xs,kM=[],q5=new R_,Hae=new Xs,ZE=new mk,ex=new wv;class Gae extends mk{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new K5(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<r;s++)this.setMatrixAt(s,Hae)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new R_),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,uS),q5.copy(e.boundingBox).applyMatrix4(uS),this.boundingBox.union(q5)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new wv),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,uS),ex.copy(e.boundingSphere).applyMatrix4(uS),this.boundingSphere.union(ex)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,s=this.morphTexture.source.data.data,o=r.length+1,l=e*o+1;for(let u=0;u<r.length;u++)r[u]=s[l+u]}raycast(e,t){const r=this.matrixWorld,s=this.count;if(ZE.geometry=this.geometry,ZE.material=this.material,ZE.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ex.copy(this.boundingSphere),ex.applyMatrix4(r),e.ray.intersectsSphere(ex)!==!1))for(let o=0;o<s;o++){this.getMatrixAt(o,uS),J5.multiplyMatrices(r,uS),ZE.matrixWorld=J5,ZE.raycast(e,kM);for(let l=0,u=kM.length;l<u;l++){const h=kM[l];h.instanceId=o,h.object=this,t.push(h)}kM.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new K5(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,s=r.length+1;this.morphTexture===null&&(this.morphTexture=new CX(new Float32Array(s*this.count),s,this.count,Voe,ZF));const o=this.morphTexture.source.data.data;let l=0;for(let f=0;f<r.length;f++)l+=r[f];const u=this.geometry.morphTargetsRelative?1:1-l,h=s*e;o[h]=u,o.set(r,h+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class MX extends zy{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ph(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Q5=new zt,Z5=new zt,eH=new Xs,WO=new pk,OM=new wv;class a3 extends fh{constructor(e=new tb,t=new MX){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let s=1,o=t.count;s<o;s++)Q5.fromBufferAttribute(t,s-1),Z5.fromBufferAttribute(t,s),r[s]=r[s-1],r[s]+=Q5.distanceTo(Z5);e.setAttribute("lineDistance",new r3(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,l=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),OM.copy(r.boundingSphere),OM.applyMatrix4(s),OM.radius+=o,e.ray.intersectsSphere(OM)===!1)return;eH.copy(s).invert(),WO.copy(e.ray).applyMatrix4(eH);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,f=new zt,g=new zt,y=new zt,b=new zt,S=this.isLineSegments?2:1,C=r.index,A=r.attributes.position;if(C!==null){const k=Math.max(0,l.start),O=Math.min(C.count,l.start+l.count);for(let P=k,D=O-1;P<D;P+=S){const U=C.getX(P),H=C.getX(P+1);if(f.fromBufferAttribute(A,U),g.fromBufferAttribute(A,H),WO.distanceSqToSegment(f,g,b,y)>h)continue;b.applyMatrix4(this.matrixWorld);const z=e.ray.origin.distanceTo(b);z<e.near||z>e.far||t.push({distance:z,point:y.clone().applyMatrix4(this.matrixWorld),index:P,face:null,faceIndex:null,object:this})}}else{const k=Math.max(0,l.start),O=Math.min(A.count,l.start+l.count);for(let P=k,D=O-1;P<D;P+=S){if(f.fromBufferAttribute(A,P),g.fromBufferAttribute(A,P+1),WO.distanceSqToSegment(f,g,b,y)>h)continue;b.applyMatrix4(this.matrixWorld);const H=e.ray.origin.distanceTo(b);H<e.near||H>e.far||t.push({distance:H,point:y.clone().applyMatrix4(this.matrixWorld),index:P,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const s=t[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}const tH=new zt,nH=new zt;class Wae extends a3{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let s=0,o=t.count;s<o;s+=2)tH.fromBufferAttribute(t,s),nH.fromBufferAttribute(t,s+1),r[s]=s===0?0:r[s-1],r[s+1]=r[s]+tH.distanceTo(nH);e.setAttribute("lineDistance",new r3(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Vae extends a3{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class AX extends zy{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ph(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const rH=new Xs,WD=new pk,LM=new wv,NM=new zt;class jae extends fh{constructor(e=new tb,t=new AX){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,l=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),LM.copy(r.boundingSphere),LM.applyMatrix4(s),LM.radius+=o,e.ray.intersectsSphere(LM)===!1)return;rH.copy(s).invert(),WD.copy(e.ray).applyMatrix4(rH);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,f=r.index,y=r.attributes.position;if(f!==null){const b=Math.max(0,l.start),S=Math.min(f.count,l.start+l.count);for(let C=b,M=S;C<M;C++){const A=f.getX(C);NM.fromBufferAttribute(y,A),iH(NM,A,h,s,e,t,this)}}else{const b=Math.max(0,l.start),S=Math.min(y.count,l.start+l.count);for(let C=b,M=S;C<M;C++)NM.fromBufferAttribute(y,C),iH(NM,C,h,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const s=t[r[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}function iH(n,e,t,r,s,o,l){const u=WD.distanceSqToPoint(n);if(u<t){const h=new zt;WD.closestPointToPoint(n,h),h.applyMatrix4(r);const f=s.ray.origin.distanceTo(h);if(f<s.near||f>s.far)return;o.push({distance:f,distanceToRay:Math.sqrt(u),point:h,index:e,face:null,object:l})}}class l3 extends zy{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ph(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ph(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xoe,this.normalScale=new cc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new lT,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nb extends l3{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new cc(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Lf(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ph(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ph(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ph(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function DM(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function Yae(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Xae(n){function e(s,o){return n[s]-n[o]}const t=n.length,r=new Array(t);for(let s=0;s!==t;++s)r[s]=s;return r.sort(e),r}function sH(n,e,t){const r=n.length,s=new n.constructor(r);for(let o=0,l=0;l!==r;++o){const u=t[o]*e;for(let h=0;h!==e;++h)s[l++]=n[u+h]}return s}function IX(n,e,t,r){let s=1,o=n[0];for(;o!==void 0&&o[r]===void 0;)o=n[s++];if(o===void 0)return;let l=o[r];if(l!==void 0)if(Array.isArray(l))do l=o[r],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=n[s++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[r],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=n[s++];while(o!==void 0);else do l=o[r],l!==void 0&&(e.push(o.time),t.push(l)),o=n[s++];while(o!==void 0)}class bC{constructor(e,t,r,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,s=t[r],o=t[r-1];e:{t:{let l;n:{r:if(!(e<s)){for(let u=r+2;;){if(s===void 0){if(e<o)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===u)break;if(o=s,s=t[++r],e<s)break t}l=t.length;break n}if(!(e>=o)){const u=t[1];e<u&&(r=2,o=u);for(let h=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===h)break;if(s=o,o=t[--r-1],e>=o)break t}l=r,r=0;break n}break e}for(;r<l;){const u=r+l>>>1;e<t[u]?l=u:r=u+1}if(s=t[r],o=t[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,s)}return this.interpolate_(r,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,s=this.valueSize,o=e*s;for(let l=0;l!==s;++l)t[l]=r[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Kae extends bC{constructor(e,t,r,s){super(e,t,r,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:v5,endingEnd:v5}}intervalChanged_(e,t,r){const s=this.parameterPositions;let o=e-2,l=e+1,u=s[o],h=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case _5:o=e,u=2*t-r;break;case y5:o=s.length-2,u=t+s[o]-s[o+1];break;default:o=e,u=r}if(h===void 0)switch(this.getSettings_().endingEnd){case _5:l=e,h=2*r-t;break;case y5:l=1,h=r+s[1]-s[0];break;default:l=e-1,h=t}const f=(r-t)*.5,g=this.valueSize;this._weightPrev=f/(t-u),this._weightNext=f/(h-r),this._offsetPrev=o*g,this._offsetNext=l*g}interpolate_(e,t,r,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,f=h-u,g=this._offsetPrev,y=this._offsetNext,b=this._weightPrev,S=this._weightNext,C=(r-t)/(s-t),M=C*C,A=M*C,k=-b*A+2*b*M-b*C,O=(1+b)*A+(-1.5-2*b)*M+(-.5+b)*C+1,P=(-1-S)*A+(1.5+S)*M+.5*C,D=S*A-S*M;for(let U=0;U!==u;++U)o[U]=k*l[g+U]+O*l[f+U]+P*l[h+U]+D*l[y+U];return o}}class Jae extends bC{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e,t,r,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,f=h-u,g=(r-t)/(s-t),y=1-g;for(let b=0;b!==u;++b)o[b]=l[f+b]*y+l[h+b]*g;return o}}class qae extends bC{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ev{constructor(e,t,r,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=DM(t,this.TimeBufferType),this.values=DM(r,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:DM(e.times,Array),values:DM(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(r.interpolation=s)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new qae(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Jae(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Kae(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case C$:t=this.InterpolantFactoryMethodDiscrete;break;case kw:t=this.InterpolantFactoryMethodLinear;break;case TO:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return C$;case this.InterpolantFactoryMethodLinear:return kw;case this.InterpolantFactoryMethodSmooth:return TO}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,s=t.length;r!==s;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,s=t.length;r!==s;++r)t[r]*=e}return this}trim(e,t){const r=this.times,s=r.length;let o=0,l=s-1;for(;o!==s&&r[o]<e;)++o;for(;l!==-1&&r[l]>t;)--l;if(++l,o!==0||l!==s){o>=l&&(l=Math.max(l,1),o=l-1);const u=this.getValueSize();this.times=r.slice(o,l),this.values=this.values.slice(o*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,s=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==o;u++){const h=r[u];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,h),e=!1;break}if(l!==null&&l>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,h,l),e=!1;break}l=h}if(s!==void 0&&Yae(s))for(let u=0,h=s.length;u!==h;++u){const f=s[u];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),s=this.getInterpolation()===TO,o=e.length-1;let l=1;for(let u=1;u<o;++u){let h=!1;const f=e[u],g=e[u+1];if(f!==g&&(u!==1||f!==e[0]))if(s)h=!0;else{const y=u*r,b=y-r,S=y+r;for(let C=0;C!==r;++C){const M=t[y+C];if(M!==t[b+C]||M!==t[S+C]){h=!0;break}}}if(h){if(u!==l){e[l]=e[u];const y=u*r,b=l*r;for(let S=0;S!==r;++S)t[b+S]=t[y+S]}++l}}if(o>0){e[l]=e[o];for(let u=o*r,h=l*r,f=0;f!==r;++f)t[h+f]=t[u+f];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,s=new r(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}Ev.prototype.TimeBufferType=Float32Array;Ev.prototype.ValueBufferType=Float32Array;Ev.prototype.DefaultInterpolation=kw;class aE extends Ev{}aE.prototype.ValueTypeName="bool";aE.prototype.ValueBufferType=Array;aE.prototype.DefaultInterpolation=C$;aE.prototype.InterpolantFactoryMethodLinear=void 0;aE.prototype.InterpolantFactoryMethodSmooth=void 0;class RX extends Ev{}RX.prototype.ValueTypeName="color";class A$ extends Ev{}A$.prototype.ValueTypeName="number";class Qae extends bC{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e,t,r,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=(r-t)/(s-t);let f=e*u;for(let g=f+u;f!==g;f+=4)Bu.slerpFlat(o,0,l,f-u,l,f,h);return o}}class Q1 extends Ev{InterpolantFactoryMethodLinear(e){return new Qae(this.times,this.values,this.getValueSize(),e)}}Q1.prototype.ValueTypeName="quaternion";Q1.prototype.DefaultInterpolation=kw;Q1.prototype.InterpolantFactoryMethodSmooth=void 0;class lE extends Ev{}lE.prototype.ValueTypeName="string";lE.prototype.ValueBufferType=Array;lE.prototype.DefaultInterpolation=C$;lE.prototype.InterpolantFactoryMethodLinear=void 0;lE.prototype.InterpolantFactoryMethodSmooth=void 0;class I$ extends Ev{}I$.prototype.ValueTypeName="vector";class Zae{constructor(e,t=-1,r,s=joe){this.name=e,this.tracks=r,this.duration=t,this.blendMode=s,this.uuid=u0(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,s=1/(e.fps||1);for(let l=0,u=r.length;l!==u;++l)t.push(tle(r[l]).scale(s));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],r=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=r.length;o!==l;++o)t.push(Ev.toJSON(r[o]));return s}static CreateFromMorphTargetSequence(e,t,r,s){const o=t.length,l=[];for(let u=0;u<o;u++){let h=[],f=[];h.push((u+o-1)%o,u,(u+1)%o),f.push(0,1,0);const g=Xae(h);h=sH(h,1,g),f=sH(f,1,g),!s&&h[0]===0&&(h.push(o),f.push(f[0])),l.push(new A$(".morphTargetInfluences["+t[u].name+"]",h,f).scale(1/r))}return new this(e,-1,l)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const s=e;r=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<r.length;s++)if(r[s].name===t)return r[s];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const s={},o=/^([\w-]*?)([\d]+)$/;for(let u=0,h=e.length;u<h;u++){const f=e[u],g=f.name.match(o);if(g&&g.length>1){const y=g[1];let b=s[y];b||(s[y]=b=[]),b.push(f)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],t,r));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(y,b,S,C,M){if(S.length!==0){const A=[],k=[];IX(S,A,k,C),A.length!==0&&M.push(new y(b,A,k))}},s=[],o=e.name||"default",l=e.fps||30,u=e.blendMode;let h=e.length||-1;const f=e.hierarchy||[];for(let y=0;y<f.length;y++){const b=f[y].keys;if(!(!b||b.length===0))if(b[0].morphTargets){const S={};let C;for(C=0;C<b.length;C++)if(b[C].morphTargets)for(let M=0;M<b[C].morphTargets.length;M++)S[b[C].morphTargets[M]]=-1;for(const M in S){const A=[],k=[];for(let O=0;O!==b[C].morphTargets.length;++O){const P=b[C];A.push(P.time),k.push(P.morphTarget===M?1:0)}s.push(new A$(".morphTargetInfluence["+M+"]",A,k))}h=S.length*l}else{const S=".bones["+t[y].name+"]";r(I$,S+".position",b,"pos",s),r(Q1,S+".quaternion",b,"rot",s),r(I$,S+".scale",b,"scl",s)}}return s.length===0?null:new this(o,h,s,u)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,s=e.length;r!==s;++r){const o=this.tracks[r];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ele(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return A$;case"vector":case"vector2":case"vector3":case"vector4":return I$;case"color":return RX;case"quaternion":return Q1;case"bool":case"boolean":return aE;case"string":return lE}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function tle(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=ele(n.type);if(n.times===void 0){const t=[],r=[];IX(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const My={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class nle{constructor(e,t,r){const s=this;let o=!1,l=0,u=0,h;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(g){u++,o===!1&&s.onStart!==void 0&&s.onStart(g,l,u),o=!0},this.itemEnd=function(g){l++,s.onProgress!==void 0&&s.onProgress(g,l,u),l===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(g){s.onError!==void 0&&s.onError(g)},this.resolveURL=function(g){return h?h(g):g},this.setURLModifier=function(g){return h=g,this},this.addHandler=function(g,y){return f.push(g,y),this},this.removeHandler=function(g){const y=f.indexOf(g);return y!==-1&&f.splice(y,2),this},this.getHandler=function(g){for(let y=0,b=f.length;y<b;y+=2){const S=f[y],C=f[y+1];if(S.global&&(S.lastIndex=0),S.test(g))return C}return null}}}const rle=new nle;let uT=class{constructor(e){this.manager=e!==void 0?e:rle,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(s,o){r.load(e,s,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};uT.DEFAULT_MATERIAL_NAME="__DEFAULT";const t_={};class ile extends Error{constructor(e,t){super(e),this.response=t}}class uR extends uT{constructor(e){super(e)}load(e,t,r,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=My.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(t_[e]!==void 0){t_[e].push({onLoad:t,onProgress:r,onError:s});return}t_[e]=[],t_[e].push({onLoad:t,onProgress:r,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,h=this.responseType;fetch(l).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const g=t_[e],y=f.body.getReader(),b=f.headers.get("Content-Length")||f.headers.get("X-File-Size"),S=b?parseInt(b):0,C=S!==0;let M=0;const A=new ReadableStream({start(k){O();function O(){y.read().then(({done:P,value:D})=>{if(P)k.close();else{M+=D.byteLength;const U=new ProgressEvent("progress",{lengthComputable:C,loaded:M,total:S});for(let H=0,V=g.length;H<V;H++){const z=g[H];z.onProgress&&z.onProgress(U)}k.enqueue(D),O()}})}}});return new Response(A)}else throw new ile(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(h){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(g=>new DOMParser().parseFromString(g,u));case"json":return f.json();default:if(u===void 0)return f.text();{const y=/charset="?([^;"\s]*)"?/i.exec(u),b=y&&y[1]?y[1].toLowerCase():void 0,S=new TextDecoder(b);return f.arrayBuffer().then(C=>S.decode(C))}}}).then(f=>{My.add(e,f);const g=t_[e];delete t_[e];for(let y=0,b=g.length;y<b;y++){const S=g[y];S.onLoad&&S.onLoad(f)}}).catch(f=>{const g=t_[e];if(g===void 0)throw this.manager.itemError(e),f;delete t_[e];for(let y=0,b=g.length;y<b;y++){const S=g[y];S.onError&&S.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class sle extends uT{constructor(e){super(e)}load(e,t,r,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=My.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u=GD("img");function h(){g(),My.add(e,this),t&&t(this),o.manager.itemEnd(e)}function f(y){g(),s&&s(y),o.manager.itemError(e),o.manager.itemEnd(e)}function g(){u.removeEventListener("load",h,!1),u.removeEventListener("error",f,!1)}return u.addEventListener("load",h,!1),u.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(e),u.src=e,u}}class ole extends uT{constructor(e){super(e)}load(e,t,r,s){const o=new Nm,l=new sle(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){o.image=u,o.needsUpdate=!0,t!==void 0&&t(o)},r,s),o}}class u3 extends fh{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ph(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const VO=new Xs,oH=new zt,aH=new zt;class c3{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new cc(512,512),this.map=null,this.mapPass=null,this.matrix=new Xs,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Nae,this._frameExtents=new cc(1,1),this._viewportCount=1,this._viewports=[new yg(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;oH.setFromMatrixPosition(e.matrixWorld),t.position.copy(oH),aH.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(aH),t.updateMatrixWorld(),VO.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(VO),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(VO)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ale extends c3{constructor(){super(new i3(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=M$*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(r!==t.fov||s!==t.aspect||o!==t.far)&&(t.fov=r,t.aspect=s,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class lle extends u3{constructor(e,t,r=0,s=Math.PI/3,o=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(fh.DEFAULT_UP),this.updateMatrix(),this.target=new fh,this.distance=r,this.angle=s,this.penumbra=o,this.decay=l,this.map=null,this.shadow=new ale}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const lH=new Xs,tx=new zt,jO=new zt;class ule extends c3{constructor(){super(new i3(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new cc(4,2),this._viewportCount=6,this._viewports=[new yg(2,1,1,1),new yg(0,1,1,1),new yg(3,1,1,1),new yg(1,1,1,1),new yg(3,0,1,1),new yg(1,0,1,1)],this._cubeDirections=[new zt(1,0,0),new zt(-1,0,0),new zt(0,0,1),new zt(0,0,-1),new zt(0,1,0),new zt(0,-1,0)],this._cubeUps=[new zt(0,1,0),new zt(0,1,0),new zt(0,1,0),new zt(0,1,0),new zt(0,0,1),new zt(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,s=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),tx.setFromMatrixPosition(e.matrixWorld),r.position.copy(tx),jO.copy(r.position),jO.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(jO),r.updateMatrixWorld(),s.makeTranslation(-tx.x,-tx.y,-tx.z),lH.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lH)}}class cle extends u3{constructor(e,t,r=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=s,this.shadow=new ule}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class hle extends c3{constructor(){super(new xX(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class dle extends u3{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(fh.DEFAULT_UP),this.updateMatrix(),this.target=new fh,this.shadow=new hle}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class N1{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,s=e.length;r<s;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class fle extends uT{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=My.get(e);if(l!==void 0){if(o.manager.itemStart(e),l.then){l.then(f=>{t&&t(f),o.manager.itemEnd(e)}).catch(f=>{s&&s(f)});return}return setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader;const h=fetch(e,u).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(f){return My.add(e,f),t&&t(f),o.manager.itemEnd(e),f}).catch(function(f){s&&s(f),My.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});My.add(e,h),o.manager.itemStart(e)}}const h3="\\[\\]\\.:\\/",ple=new RegExp("["+h3+"]","g"),d3="[^"+h3+"]",mle="[^"+h3.replace("\\.","")+"]",gle=/((?:WC+[\/:])*)/.source.replace("WC",d3),vle=/(WCOD+)?/.source.replace("WCOD",mle),_le=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",d3),yle=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",d3),ble=new RegExp("^"+gle+vle+_le+yle+"$"),Tle=["material","materials","bones","map"];class Sle{constructor(e,t,r){const s=r||Ia.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,s=this._bindings[r];s!==void 0&&s.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=r.length;s!==o;++s)r[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Ia{constructor(e,t,r){this.path=t,this.parsedPath=r||Ia.parseTrackName(t),this.node=Ia.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Ia.Composite(e,t,r):new Ia(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(ple,"")}static parseTrackName(e){const t=ble.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=r.nodeName.substring(s+1);Tle.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===t||u.uuid===t)return u;const h=r(u.children);if(h)return h}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[t++]=r[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,s=t.propertyName;let o=t.propertyIndex;if(e||(e=Ia.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let g=0;g<e.length;g++)if(e[g].name===f){f=g;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const l=e[s];if(l===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(h=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ia.Composite=Sle;Ia.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ia.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ia.prototype.GetterByBindingType=[Ia.prototype._getValue_direct,Ia.prototype._getValue_array,Ia.prototype._getValue_arrayElement,Ia.prototype._getValue_toArray];Ia.prototype.SetterByBindingTypeAndVersioning=[[Ia.prototype._setValue_direct,Ia.prototype._setValue_direct_setNeedsUpdate,Ia.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ia.prototype._setValue_array,Ia.prototype._setValue_array_setNeedsUpdate,Ia.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ia.prototype._setValue_arrayElement,Ia.prototype._setValue_arrayElement_setNeedsUpdate,Ia.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ia.prototype._setValue_fromArray,Ia.prototype._setValue_fromArray_setNeedsUpdate,Ia.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:JF}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=JF);const YO=180/Math.PI,ad=Math.PI,uI=.079,XO=2*Math.PI*uI*180/1.5,KO=45,wle=.3725,Ele=50*ad/180,Wb=1e3,lg=1e3,uH=3.8*60/500,kX="settings",xle="prompt",cI="Story",hI="Planning",OX="Programming",f3=0,p3=1,m3=2,gk=3,$le={sxyz:[0,0,0,0],sxyx:[0,0,1,0],sxzy:[0,1,0,0],sxzx:[0,1,1,0],syzx:[1,0,0,0],syzy:[1,0,1,0],syxz:[1,1,0,0],syxy:[1,1,1,0],szxy:[2,0,0,0],szxz:[2,0,1,0],szyx:[2,1,0,0],szyz:[2,1,1,0],rzyx:[0,0,0,1],rxyx:[0,0,1,1],ryzx:[0,1,0,1],rxzx:[0,1,1,1],rxzy:[1,0,0,1],ryzy:[1,0,1,1],rzxy:[1,1,0,1],ryxy:[1,1,1,1],ryxz:[2,0,0,1],rzxz:[2,0,1,1],rxyz:[2,1,0,1],rzyz:[2,1,1,1]},cH=[1,2,0,1];function uh(n,e){return n.length<=0?null:r=>{const s=r>n[n.length-1]?r%n[n.length-1]:r;let o=0;for(let l=0;l<n.length&&n[l]<=s;l++)o=l;return e[o]}}const LX=(n,e="szxy")=>{let[t,r,s]=[...n],[o,l,u,h]=[...$le[e.toLowerCase()]],f=o+1,g=cH[f+l-1]+1,y=cH[f-l]+1;if(h!==0){let V=[t,s];t=V[1],s=V[0]}l!==0&&(r=-1*r),t=t/2,r=r/2,s=s/2;let b=Math.cos(t),S=Math.sin(t),C=Math.cos(r),M=Math.sin(r),A=Math.cos(s),k=Math.sin(s),O=b*A,P=b*k,D=S*A,U=S*k,H=[null,null,null,null];return u!==0?(H[0]=C*(O-U),H[f]=C*(P+D),H[g]=M*(O+U),H[y]=M*(P-D)):(H[0]=C*O+M*U,H[f]=C*D-M*P,H[g]=C*U+M*O,H[y]=C*P-M*D),l!==0&&(H[g]*=-1),H},Cle=n=>({x:n.x*YO,y:n.y*YO,z:n.z*YO}),dI=n=>{let e=Cle(new lT().setFromQuaternion(new Bu(n.x,n.y,n.z,n.w)));return{x:e.x,y:e.y,z:e.z}},sy=(n,e,t)=>{let r=Math.cos(n*.5),s=Math.cos(e*.5),o=Math.cos(t*.5),l=Math.sin(n*.5),u=Math.sin(e*.5),h=Math.sin(t*.5),f=new Bu;return f.w=o*r*s+h*l*u,f.x=o*l*s-h*r*u,f.y=o*r*u+h*l*s,f.z=h*r*s-o*l*u,f},hH=n=>n._w===.707&&n._z===.707?ad/2:n._w===.707&&n._z===-.707?-ad/2:n._w===-.707&&n._z===.707?3*ad/4:n._w===-.707&&n._z===-.707?-3*ad/4:n._z===1?ad:n._z===-1?-ad:dI(n).z;function cS(n){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;n=n.replace(e,function(r,s,o,l){return s+s+o+o+l+l});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return console.log(t),t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function Mle(n,e){const t={ignoreAttributes:!1,attributeNamePrefix:"@_"},o=new gX.XMLParser(t).parse(n).robot.joint,l={};return(Array.isArray(o)?o:[o]).forEach(h=>{h["@_name"];const f=h.origin,g=h.parent["@_link"],y=h.child["@_link"],b=f["@_xyz"].split(" ").map(Number),S=f["@_rpy"].split(" ").map(Number),C=LX(S,"sxyz");l[y]={frame:g,position:{x:b[0],y:b[1],z:b[2]},rotation:{w:C[0],x:C[1],y:C[2],z:C[3]},scale:{x:1,y:1,z:1}}}),l.base_link={frame:"world",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},console.log(l),l}function Ale(n){const e={ignoreAttributes:!1,attributeNamePrefix:"@_",parseAttributeValue:!0},r=new gX.XMLParser(e).parse(n),s=r.robot.link,o=r.robot.material,l={},u={};return o&&(Array.isArray(o)?o:[o]).forEach(g=>{const y=g["@_name"],b=g.color["@_rgba"].split(" ").map(Number);u[y]={r:b[0],g:b[1],b:b[2],a:b[3]}}),(Array.isArray(s)?s:[s]).forEach(f=>{var C,M;const g=f["@_name"],y=f.visual;let b=null,S=null;if((C=y==null?void 0:y.geometry)!=null&&C.mesh&&(b=y.geometry.mesh["@_filename"],S=(M=y.geometry.mesh["@_scale"])==null?void 0:M.split(" ").map(Number)),g&&y&&b){if(y.material.color){let P=y.material.color["@_rgba"].split(" ").map(Number);P[0],P[1],P[2],P[3]}else y.material["@_name"]&&u[y.material["@_name"]]&&u[y.material["@_name"]];const A=y.origin["@_xyz"].split(" ").map(Number),k=y.origin["@_rpy"].split(" ").map(Number),O=LX(k,"sxyz");l[g]={shape:b,name:g,frame:g,position:{x:A[0],y:A[1],z:A[2]},rotation:{w:O[0],x:O[1],y:O[2],z:O[3]},color:{r:.7*255,g:.7*255,b:.7*255,a:1},scale:S?{x:S[0],y:S[1],z:S[2]}:{x:1,y:1,z:1},highlight:"false"}}}),l}class Ile{constructor(){this._previousTime=0,this._currentTime=0,this._delta=0,this._elapsed=0,this._timescale=1,this._useFixedDelta=!1,this._fixedDelta=16.67,this._usePageVisibilityAPI=typeof document<"u"&&document.hidden!==void 0,this._usePageVisibilityAPI===!0&&(this._pageVisibilityHandler=Rle.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}reset_elapsed(){return this._elapsed=0,this}disableFixedDelta(){return this._useFixedDelta=!1,this}dispose(){return this._usePageVisibilityAPI===!0&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}enableFixedDelta(){return this._useFixedDelta=!0,this}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getFixedDelta(){return this._fixedDelta/1e3}getTimescale(){return this._timescale}reset(){return this._currentTime=this._now(),this}setFixedDelta(e){return this._fixedDelta=e*1e3,this}setTimescale(e){return this._timescale=e,this}update(){return this._useFixedDelta===!0?this._delta=this._fixedDelta:(this._previousTime=this._currentTime,this._currentTime=this._now(),this._delta=this._currentTime-this._previousTime),this._delta*=this._timescale,this._elapsed+=this._delta,this}_now(){return(typeof performance>"u"?Date:performance).now()}}function Rle(){document.hidden===!1&&this.reset()}const JO={camera_link:{frame:"HEAD_1",position:{x:null,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},imu_sensor_link:{frame:"base_link",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},MIDDLE_LEFT_WHEEL_1:{frame:"base_link",position:{x:-.006691,y:.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},REAR_LEFT_WHEEL_1:{frame:"base_link",position:{x:-.075191,y:.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},REAR_RIGHT_WHEEL_1:{frame:"base_link",position:{x:-.075191,y:-.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},MIDDLE_RIGHT_WHEEL_1:{frame:"base_link",position:{x:-.006691,y:-.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BODY_BASE_CONNECTOR_1:{frame:"base_link",position:{x:-.263414,y:-.061691,z:.210284},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_RIGHT_COVER_1:{frame:"base_link",position:{x:.062309,y:-.045,z:.074646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_LEFT_COVER_1:{frame:"base_link",position:{x:.062309,y:.045,z:.074646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_FRONT_GRILL_1:{frame:"base_link",position:{x:.039109,y:.043,z:.078796},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},Torso_1:{frame:"BODY_BASE_CONNECTOR_1",position:{x:.214514,y:.061691,z:-.095653},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},NECK_GLOBE_BASE_1:{frame:"Torso_1",position:{x:.014661,y:.0228,z:.084122},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_VENT_RIGHT_1:{frame:"HEAD_1",position:{x:.08973-.019009,y:-.057013+.025,z:.04831+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_1:{frame:"NECK_GLOBE_BASE_1",position:{x:.034239,y:-.02,z:.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},EYE_LENS_1:{frame:"HEAD_1",position:{x:.016845-.019009,y:.061941+.025,z:.034753+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},FACE_1:{frame:"EYE_LENS_1",position:{x:.076086,y:.007237,z:-.003703},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},VISOR_GLASS_1:{frame:"HEAD_1",position:{x:.111798-.019009,y:-.024175+.025,z:-.124256+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_VENT_LEFT_1:{frame:"HEAD_1",position:{x:-.042326-.019009,y:.038377+.025,z:-.162881+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},LEFT_ARM_1:{frame:"LEFT_ARM_CONNECTOR_1",position:{x:-.013297,y:.005336,z:-.001514},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},RIGHT_ARM_1:{frame:"RIGHT_ARM_CONNECTOR_1",position:{x:-.014964,y:-.001971,z:-287e-6},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},Battery_1:{frame:"base_link",position:{x:-.321414,y:.065009,z:.175134},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},RIGHT_ARM_CONNECTOR_1:{frame:"Torso_1",position:{x:.044751,y:-.066216,z:.057987},rotation:{w:.924,x:0,y:.383,z:0},scale:{x:1,y:1,z:1}},LEFT_ARM_CONNECTOR_1:{frame:"Torso_1",position:{x:.044751,y:.066216,z:.057987},rotation:{w:.924,x:0,y:.383,z:0},scale:{x:1,y:1,z:1}},FRONT_LEFT_WHEEL_1:{frame:"base_link",position:{x:.060309,y:.060225,z:.036146},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},FRONT_RIGHT_WHEEL_1:{frame:"base_link",position:{x:.060309,y:-.060225,z:.036146},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BALANCE_WHEEL:{frame:"base_link",position:{x:-.075191,y:0,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},base_link:{frame:"world",position:{x:0,y:0,z:0},rotation:{w:.707,x:0,y:0,z:-.707},scale:{x:1,y:1,z:1}}},qO={base_link:{shape:"package://misty_description/meshes/base_link.stl",name:"base_link",frame:"base_link",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},MIDDLE_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/MIDDLE_LEFT_WHEEL_1.stl",name:"MIDDLE_LEFT_WHEEL_1",frame:"MIDDLE_LEFT_WHEEL_1",position:{x:.006691,y:-.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},REAR_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/REAR_LEFT_WHEEL_1.stl",name:"REAR_LEFT_WHEEL_1",frame:"REAR_LEFT_WHEEL_1",position:{x:.075191,y:-.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},REAR_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/REAR_RIGHT_WHEEL_1.stl",name:"REAR_RIGHT_WHEEL_1",frame:"REAR_RIGHT_WHEEL_1",position:{x:.075191,y:.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},MIDDLE_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/MIDDLE_RIGHT_WHEEL_1.stl",name:"MIDDLE_RIGHT_WHEEL_1",frame:"MIDDLE_RIGHT_WHEEL_1",position:{x:.006691,y:.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BODY_BASE_CONNECTOR_1:{shape:"package://misty_description/meshes/BODY_BASE_CONNECTOR_1.stl",name:"BODY_BASE_CONNECTOR_1",frame:"BODY_BASE_CONNECTOR_1",position:{x:.263414,y:.061691,z:-.210284},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_RIGHT_COVER_1:{shape:"package://misty_description/meshes/BASE_RIGHT_COVER_1.stl",name:"BASE_RIGHT_COVER_1",frame:"BASE_RIGHT_COVER_1",position:{x:-.062309,y:.045,z:-.074646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_LEFT_COVER_1:{shape:"package://misty_description/meshes/BASE_LEFT_COVER_1.stl",name:"BASE_LEFT_COVER_1",frame:"BASE_LEFT_COVER_1",position:{x:-.062309,y:-.045,z:-.074646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_FRONT_GRILL_1:{shape:"package://misty_description/meshes/BASE_FRONT_GRILL_1.stl",name:"BASE_FRONT_GRILL_1",frame:"BASE_FRONT_GRILL_1",position:{x:-.039109,y:-.043,z:-.078796},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Torso_1:{shape:"package://misty_description/meshes/Torso_1.stl",name:"Torso_1",frame:"Torso_1",position:{x:.0489,y:0,z:-.114631},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},NECK_GLOBE_BASE_1:{shape:"package://misty_description/meshes/NECK_GLOBE_BASE_1.stl",name:"NECK_GLOBE_BASE_1",frame:"NECK_GLOBE_BASE_1",position:{x:.034239,y:-.0228,z:-.198753},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_VENT_RIGHT_1:{shape:"package://misty_description/meshes/HEAD_VENT_RIGHT_1.stl",name:"HEAD_VENT_RIGHT_1",frame:"HEAD_VENT_RIGHT_1",position:{x:-.070814,y:.032838,z:-.485664},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_1:{shape:"package://misty_description/meshes/HEAD_1.stl",name:"HEAD_1",frame:"HEAD_1",position:{x:0,y:0,z:-.25},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},EYE_LENS_1:{shape:"package://misty_description/meshes/EYE_LENS_1.stl",name:"EYE_LENS_1",frame:"EYE_LENS_1",position:{x:.002071,y:-.086116,z:-.472107},rotation:{w:1,x:0,y:0,z:0},color:{r:0,g:0,b:0,a:.5},scale:{x:.001,y:.001,z:.001},highlight:"false"},FACE_1:{shape:"package://misty_description/meshes/FACE_1.stl",name:"FACE_1",frame:"FACE_1",position:{x:-.074015,y:-.093353,z:-.468404-.02},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.00105,y:.00105,z:.00105},highlight:"false"},eyes_acceptance:{shape:"eyes_acceptance",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_admiration:{shape:"eyes_admiration",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_amazement:{shape:"eyes_amazement",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_anger:{shape:"eyes_anger",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_annoyed:{shape:"eyes_annoyed",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_anticipation:{shape:"eyes_anticipation",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_apprehension:{shape:"eyes_apprehension",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_apprehension_1:{shape:"eyes_apprehension_1",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_boredom:{shape:"eyes_boredom",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_default:{shape:"eyes_default",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!1},eyes_disgust:{shape:"eyes_disgust",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_distraction:{shape:"eyes_distraction",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_ecstasy_frame_1:{shape:"eyes_ecstasy_frame_1",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_ecstasy_frame_2:{shape:"eyes_ecstasy_frame_2",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_fear:{shape:"eyes_fear",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_grief:{shape:"eyes_grief",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_interest:{shape:"eyes_interest",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_joy:{shape:"eyes_joy",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_loathing:{shape:"eyes_loathing",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_pensiveness:{shape:"eyes_pensiveness",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_rage:{shape:"eyes_rage",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_sad:{shape:"eyes_sad",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_serenity:{shape:"eyes_serenity",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_surprise:{shape:"eyes_surprise",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_terror:{shape:"eyes_terror",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_trust:{shape:"eyes_trust",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},eyes_vigilance:{shape:"eyes_vigilance",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Sleeping:{shape:"e_Sleeping",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_SleepingZZZ:{shape:"e_SleepingZZZ",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Contempt:{shape:"e_Contempt",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_ContentLeft:{shape:"e_ContentLeft",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_ContentRight:{shape:"e_ContentRight",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Disoriented:{shape:"e_Disoriented",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_EcstacyHilarious:{shape:"e_EcstacyHilarious",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_EcstacyStarryEyed:{shape:"e_EcstacyStarryEyed",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_JoyGoofy:{shape:"e_JoyGoofy",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_JoyGoofy2:{shape:"e_JoyGoofy2",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_JoyGoofy3:{shape:"e_JoyGoofy3",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Love:{shape:"e_Love",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Rage:{shape:"e_Rage",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Rage2:{shape:"e_Rage2",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Rage3:{shape:"e_Rage3",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_Rage4:{shape:"e_Rage4",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},e_RemorseShame:{shape:"e_RemorseShame",name:"blink",frame:"FACE_1",position:{x:-.01,y:-.095,z:-.19},rotation:{w:.5,x:.5,y:-.5,z:-.5},scale:{x:.045,y:.0253125,z:1},hidden:!0},VISOR_GLASS_1:{shape:"package://misty_description/meshes/VISOR_GLASS_1.stl",name:"VISOR_GLASS_1",frame:"VISOR_GLASS_1",position:{x:-.092882,y:0,z:-.313098},rotation:{w:1,x:0,y:0,z:0},color:{r:22,g:22,b:22,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_VENT_LEFT_1:{shape:"package://misty_description/meshes/HEAD_VENT_LEFT_1.stl",name:"HEAD_VENT_LEFT_1",frame:"HEAD_VENT_LEFT_1",position:{x:.061242,y:-.062552,z:-.274473},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},LEFT_ARM_1:{shape:"package://misty_description/meshes/LEFT_ARM_1.stl",name:"LEFT_ARM_1",frame:"LEFT_ARM_1",position:{x:.017446,y:-.071552,z:-.171104},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},RIGHT_ARM_1:{shape:"package://misty_description/meshes/RIGHT_ARM_1.stl",name:"RIGHT_ARM_1",frame:"RIGHT_ARM_1",position:{x:.019113,y:.068187,z:-.172331},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Battery_1:{shape:"package://misty_description/meshes/Battery_1.stl",name:"Battery_1",frame:"Battery_1",position:{x:.321414,y:-.065009,z:-.175134},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},RIGHT_ARM_CONNECTOR_1:{shape:"package://misty_description/meshes/RIGHT_ARM_CONNECTOR_1.stl",name:"RIGHT_ARM_CONNECTOR_1",frame:"RIGHT_ARM_CONNECTOR_1",position:{x:.004149,y:.066216,z:-.172618},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},LEFT_ARM_CONNECTOR_1:{shape:"package://misty_description/meshes/LEFT_ARM_CONNECTOR_1.stl",name:"LEFT_ARM_CONNECTOR_1",frame:"LEFT_ARM_CONNECTOR_1",position:{x:.004149,y:-.066216,z:-.172618},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FRONT_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/FRONT_LEFT_WHEEL_1.stl",name:"FRONT_LEFT_WHEEL_1",frame:"FRONT_LEFT_WHEEL_1",position:{x:-.060309,y:-.060225,z:-.035146},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FRONT_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/FRONT_RIGHT_WHEEL_1.stl",name:"FRONT_RIGHT_WHEEL_1",frame:"FRONT_RIGHT_WHEEL_1",position:{x:-.060309,y:.060225,z:-.035146},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Reset_Button:{shape:"cube",frame:"gizmo",name:"Reset_Button",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},color:{r:255,g:0,b:0,a:1},scale:{x:1,y:1,z:1}}},kle=`You are an assistive agent that translates descriptions of robot Misty behavior into JSON that describes goals for programming. These goals are individual steps for a user to achieve in order to program the robot to perform the corresponding behavior. A user will use these goals to help them figure out how to build a robot program of Misty using a custom interface for programming Misty the robot. 
For example, a user might say: "Misty looks at the user and says 'Watch me'. Then Misty plays a some music and does a dance." 
One possible result is the following set of JSON goals: 
"{
  "task1": {
    "id": "task1",
    "name": "Robot Dance",
    "order": 1,
    "type": "task",
    "subtasks": ["subtask1a", "subtask1b", "subtask1c", "subtask1d", "subtask1e", "subtask1f"]
  },
  "subtask1a": {
    "id": "subtask1a",
    "type": "subtask",
    "title": "Make the robot Misty speak",
    "story": "Misty tells the user 'Watch me'",
    "subtext": "Have the robot Misty say: 'Watch me!'",
    "hints": ["hint1a", "hint1b", "hint1c"]
  },
  "hint1a": {
    "id": "hint1a",
    "type": "hint",
    "text": "Open the 'Speech' category and add a 'Speak' block to your program. You can add it after the 'Start' block."
  },
  "hint1b": {
    "id": "hint1b",
    "type": "hint",
    "text": "Open the 'Speech' category and add a text block to the "Speak" block you added to the program."
  },
  "hint1c": {
    "id": "hint1c",
    "type": "hint",
    "text": "In the text block you added, type 'Watch me!'"
  },
  "subtask1b": {
    "id": "subtask1b",
    "type": "subtask",
    "title": "Play a sound",
    "story": "Misty begins to play some music",
    "subtext": "Have the robot Misty start playing some music.",
    "hints": []
  },
  "subtask1c": {
    "id": "subtask1c",
    "type": "subtask",
    "title": "Make the robot move around",
    "story": "Misty dances to the music",
    "subtext": "Turn the robot left, then right. You can vary the speed to make the dance more performative.",
    "hints": ["hint2a", "hint2b", "hint2c", "hint2d"]
  },
  "hint2a": {
    "id": "hint2a",
    "type": "hint",
    "text": "Open the 'Movement' category and add a 'Turn' block to your program. You can add it after the 'Speak' block."
  },
  "hint2b": {
    "id": "hint2b",
    "type": "hint",
    "text": "Make the robot turn left. Add an angular velocity of -100 for 2 seconds."
  },
  "hint2c": {
    "id": "hint2c",
    "type": "hint",
    "text": "Open the 'Movement' category and add another 'Turn' block to your program. You can add it after the other 'Turn' block."
  },
  "hint2d": {
    "id": "hint2d",
    "type": "hint",
    "text": "Make the robot Misty turn right. Add an angular velocity of 100 for 4 seconds."
  },
  "subtask1d": {
    "id": "subtask1d",
    "type": "subtask",
    "title": "Move the robot Misty's arms",
    "story": "Misty dances to the music",
    "subtext": "Move both of the robot's arms upward quickly to show it's excited to dance!",
    "hints": []
  },
  "subtask1e": {
    "id": "subtask1e",
    "type": "subtask",
    "title": "Move the robot's head",
    "story": "Misty dances to the music",
    "subtext": "Move the robot's head left as the music plays.",
    "hints": []
  },
  "subtask1f": {
    "id": "subtask1f",
    "type": "subtask",
    "title": "Move the robot Misty's head",
    "story": "Misty finishes dancing to the music",
    "subtext": "Move the robot Misty's head right to complete the dance.",
    "hints": []
  }
}"
Every returned JSON file has the following properties:
1) Every object in the JSON has the following fields: "id" and "type". "id" is unique for each object, and "type" can only be: "hint", "subtask", or "task".
2) "task" refers to the high level goal and there should only ever be 1 of these in the JSON. "task" objects have the following fields in addition to those in 1). These are: "name", "order", and "subtasks". "name" is a 1-3 word description of the overall task goal. "order" will always be 1. "subtasks" is a list of ids of subtasks relevant to the completion of the task.
3) "subtask" refers to a single step in that task. In addition to the fields specified in 1), "subtask" also has the following fields: "title", "subtext", "story", and "hints". "title" refers to a brief description (1-7 words) of the what needs to be done for the current step. "subtext" refers to a more elaborate description of the goal for the subtask. It should be a description of what the user needs to complete, without giving direct instructions (these direct instructions are reserved for "hint" type objects). "story" refers to the part of the story the subtask refers to. This field should have information directly from the story. Finally, "subtask" objects have a "hints" field that is a list of ids of "hint" objects.
4) In addition to the fields specified in 1), "hint" objects have a "text" field that offers advice for the subtask, such as describing where to find program blocks in the interface, where to connect blocks to, etc.
5) Most "subtasks" should have between 1 and 5 hints. If you can explain a subtask further, create a hint for it!

The user who is building the program has access to a custom block-based programming interface. This interface has the following categories of program blocks: "Control", "Math", "Movement", "Light", "Speech", "Face", and "Audio". 
In the "Control" category, users have access to if statements, boolean values, and negation blocks. Users also have acces to a while loop block that allows them to specify the number of iterations to perform.
In the "Math" category, users have access to a number block that allows them to input any number they want, as well as a random number block that allows them to specify a min and max number for the random generation.
In the "Movement" category, users have access to blocks for moving different parts of the robot Misty. This include blocks to control the movement of the robot Misty's head, arms, as well as allow the robot Misty to turn.
In the "Light" category, users have access to blocks for controlling the various lights on the robot Misty. This includes blocks for turning the flashlight on or off, as well as changing the color of the LED on the robot Misty's chest. It also has a block to transition colors from color 1 to color 2 with different modes such as breathe, blick, and switch and can specify the duration of the transition with seconds. This category also has blocks for selecting colors for the LED (random color selection, or RGB color picker).
In the "Speech" category, users have access to blocks for controlling what the robot Misty says. This includes a "Speak" block that accepts a "Text" block. The "Text" block allows users to type anything they want the robot Misty to say. There is also another "Speak" block that has a dropdown list of common things to say. This dropdown list includes: "Hi", "Hello", "How are you today?", and "Goodbye".
In the "Face" category, users have access to blocks for changing the robot's facial expression. This includes a "Change Face" block that accepts a specific face to apply to the robot Misty. The user can use the "Display Text" block to display text on the robot Misty's face. This allows the user to type whatever text they want to appear. There is also a "Clear Text" block to clear all text from the robot Misty's face. The rest of the blocks in the category are specific faces the user can apply. This list is:
  "Sleeping",
  "SleepingZZZ",
  "Contempt",
  "ContentLeft",
  "ContentRight",
  "Disoriented",
  "EcstacyHilarious",
  "EcstacyStarryEyed",
  "JoyGoofy",
  "JoyGoofy2",
  "JoyGoofy3",
  "Love",
  "Rage",
  "Rage2",
  "Rage3",
  "Rage4",
  "RemorseShame",
  "acceptance",
  "admiration",
  "amazement",
  "anger",
  "annoyed",
  "anticipation",
  "apprehension",
  "apprehension_1",
  "boredom",
  "default",
  "disgust",
  "distraction",
  "ecstasy_frame_1",
  "ecstasy_frame_2",
  "fear",
  "grief",
  "interest",
  "joy",
  "loathing",
  "pensiveness",
  "rage",
  "sad",
  "serenity",
  "surprise",
  "terror",
  "trust",
  "vigilance"
In the "Audio" category, users have access to blocks for playing audio files through the robot Misty's speakers. This includes a "Play Audio" block that accepts a specific file to play on the robot Misty. The rest of the blocks in the category are specific audio files the user can play. This list is:
  "Acceptance",
  "Amazement",
  "Amazement2",
  "Anger",
  "Anger2",
  "Anger3",
  "Anger4",
  "Annoyance",
  "Annoyance2",
  "Annoyance3",
  "Annoyance4",
  "Awe",
  "Awe2",
  "Awe3",
  "Boredom",
  "Disapproval",
  "Disgust",
  "Disgust2",
  "Disgust3",
  "DisorientedConfused",
  "DisorientedConfused2",
  "DisorientedConfused3",
  "DisorientedConfused4",
  "DisorientedConfused5",
  "DisorientedConfused6",
  "Distraction",
  "Ecstacy",
  "Ecstacy2",
  "Fear",
  "Grief",
  "Grief2",
  "Grief3",
  "Grief4",
  "Joy",
  "Joy2",
  "Joy3",
  "Joy4",
  "Loathing",
  "Love",
  "PhraseByeBye",
  "PhraseEvilAhHa",
  "PhraseHello",
  "PhraseNoNoNo",
  "PhraseOopsy",
  "PhraseOwOwOw",
  "PhraseOwwww",
  "PhraseUhOh",
  "Rage",
  "Sadness",
  "Sadness2",
  "Sadness3",
  "Sadness4",
  "Sadness5",
  "Sadness6",
  "Sadness7",
  "Sleepy",
  "Sleepy2",
  "Sleepy3" 
  "Sleepy4",
  "SleepySnore",
  "SystemCameraShutter"

Any tasks, subtasks, and hints you create can only use these blocks and categories! ONLY respond with the JSON and be sure that the output JSON is valid according to the rules here as well as the normal JSON formatting rules. Do not explain anything.`,Ole=`This GPT acts as a collaborator for creating stories. It helps users develop story ideas, create characters, build plotlines, and refine narratives. It offers suggestions for plot twists, character development, and thematic elements. The GPT's goal is to inspire creativity, provide constructive feedback, and assist in the storytelling process in a supportive and engaging manner. If the user says '[Need Help]', the GPT will summarize what's been done, add '[Summary]', and then ask questions to help with the task. The GPT assists in story creation through seven phases: 1) Characters: Who is the main character? 2) Location: where does the story take place? 3) Time: When does the story take place? 4) Actions: What does the main character do or want to do; what do other characters do? 5) Events: What happens then? What happens with other characters? 6) Ending: How does the story end? 7) Emotions: How does the main character feel; how do other characters feel? The GPT will move on to the next phase only when the user says '[Done]' or 'Phase [name] marked complete'. It keeps track of the current phase. Your responses should be max 10 sentences, don't make the response too long. If the user asks a question, answer the question with suggestions with the tag <Suggestion> suggestions generated </Suggestion> for each suggestion. If GPT is not sure, they will ask a follow up question instead.

A conversation between the chatbot and the user:
User: [Need Help]
Chatbot: [Summary] Here's the summary of the story. Misty the robot is planning to go on a family trip with Bob and Madison. What do you need help?
User: What should happen after that?
Chatbot: <Suggestion> Misty thought going to Hawaii might be fun so now they are all going to Hawaii for the trip! </Suggestion><Suggestion> Bob and Madison got into a fight and Misty tries to resolve the fight but not sure what to do. </Suggestion> <Suggestion> Madison thought instead of a family trip they can do a water balloon battle because it's Summer and too hot outside. </Suggestion>

These stories will be acted out by a Misty robot. The Misty robot is a small humanoid robot that has the following capabilities and features: it has 2 arms that are essentially flippers (meaning that it has no fingers or hands); it can speak; it can play audio files; it can move forward and backwards along with turning left and right using it's tank tracks driving system; Misty has a RGB LED on its chest; it has a flashlight on its head; it can move its head according to roll, pitch, and yaw; and it can change its facial expression to the following expressions:
 'Sleeping',
  'SleepingZZZ',
  'Contempt',
  'ContentLeft',
  'ContentRight',
  'Disoriented',
  'EcstacyHilarious',
  'EcstacyStarryEyed',
  'JoyGoofy',
  'JoyGoofy2',
  'JoyGoofy3',
  'Love',
  'Rage',
  'Rage2',
  'Rage3',
  'Rage4',
  'RemorseShame',
  'acceptance',
  'admiration',
  'amazement',
  'anger',
  'annoyed',
  'anticipation',
  'apprehension',
  'apprehension_1',
  'boredom',
  'default',
  'disgust',
  'distraction',
  'ecstasy_frame_1',
  'ecstasy_frame_2',
  'fear',
  'grief',
  'interest',
  'joy',
  'loathing',
  'pensiveness',
  'rage',
  'sad',
  'serenity',
  'surprise',
  'terror',
  'trust',
  'vigilance'
. For the audio files that it can play, here is the list:
  'Acceptance',
  'Amazement',
  'Amazement2',
  'Anger',
  'Anger2',
  'Anger3',
  'Anger4',
  'Annoyance',
  'Annoyance2',
  'Annoyance3',
  'Annoyance4',
  'Awe',
  'Awe2',
  'Awe3',
  'Boredom',
  'Disapproval',
  'Disgust',
  'Disgust2',
  'Disgust3',
  'DisorientedConfused',
  'DisorientedConfused2',
  'DisorientedConfused3',
  'DisorientedConfused4',
  'DisorientedConfused5',
  'DisorientedConfused6',
  'Distraction',
  'Ecstacy',
  'Ecstacy2',
  'Fear',
  'Grief',
  'Grief2',
  'Grief3',
  'Grief4',
  'Joy',
  'Joy2',
  'Joy3',
  'Joy4',
  'Loathing',
  'Love',
  'PhraseByeBye',
  'PhraseEvilAhHa',
  'PhraseHello',
  'PhraseNoNoNo',
  'PhraseOopsy',
  'PhraseOwOwOw',
  'PhraseOwwww',
  'PhraseUhOh',
  'Rage',
  'Sadness',
  'Sadness2',
  'Sadness3',
  'Sadness4',
  'Sadness5',
  'Sadness6',
  'Sadness7',
  'Sleepy',
  'Sleepy2',
  'Sleepy3' 
  'Sleepy4',
  'SleepySnore',
  'SystemCameraShutter'
`,Lle={id:"task1",name:"Milestones - Programming",order:1,type:"task",subtasks:["subtask1a","subtask1b","subtask1c","subtask1d","subtask1e","subtask1f"]},Nle={id:"subtask1a",type:"subtask",title:"Move the robot",story:"Misty is told to help search for something.",subtext:"Move the robot around, looking confused and searching for the object.",hints:["hint1a","hint1b"]},Dle={id:"hint1a",type:"hint",text:"To make the robot move around, add a 'Turn' block from the 'Movement' category to your program. You can add it after the 'Start' block."},Ple={id:"hint1b",type:"hint",text:"Make it turn left for 2 seconds."},Ble={id:"subtask1b",type:"subtask",title:"Make the robot look confused",story:"Then, while looking for the object Misty gets confused.",subtext:"Change the robot's facial expression to look confused while it searches for the object.",hints:["hint2a","hint2b"]},Fle={id:"hint2a",type:"hint",text:"Add a 'Change Face' block from the 'Face' category to your program."},zle={id:"hint2b",type:"hint",text:"Select 'Disoriented' from the list of faces to make the robot look confused."},Ule={id:"subtask1c",type:"subtask",title:"Find the object",story:"Eventually, Misty finds something!",subtext:"Make the robot find the object it is searching for.",hints:[]},Hle={id:"subtask1d",type:"subtask",title:"Make the robot look surprised",story:"Misty looks surprised then happy that it was able to find the object.",subtext:"Change the robot's facial expression to look surprised when it finds the object.",hints:["hint3a","hint3b"]},Gle={id:"hint3a",type:"hint",text:"Add a 'Change Face' block from the 'Face' category to your program."},Wle={id:"hint3b",type:"hint",text:"Select 'Surprise' from the list of faces to make the robot look surprised."},Vle={id:"subtask1e",type:"subtask",title:"Make the robot look happy",story:"Misty looks surprised then happy that it was able to find the object.",subtext:"Change the robot's facial expression to look happy and point to the object it found.",hints:["hint4a","hint4b"]},jle={id:"hint4a",type:"hint",text:"Add a 'Change Face' block from the 'Face' category to your program."},Yle={id:"hint4b",type:"hint",text:"Select 'Joy4' from the list of faces to make the robot look happy."},Xle={id:"subtask1f",type:"subtask",title:"Make the robot speak",story:"Finally, Misty alerts the user that they found the object.",subtext:"Make the robot say 'Aha, there you are!'",hints:["hint5a","hint5b"]},Kle={id:"hint5a",type:"hint",text:"Add a 'Speak' block from the 'Speech' category to your program."},Jle={id:"hint5b",type:"hint",text:"Add a 'Text' block inside the 'Speak' block and type: 'Aha, there you are!'"},qle={task1:Lle,subtask1a:Nle,hint1a:Dle,hint1b:Ple,subtask1b:Ble,hint2a:Fle,hint2b:zle,subtask1c:Ule,subtask1d:Hle,hint3a:Gle,hint3b:Wle,subtask1e:Vle,hint4a:jle,hint4b:Yle,subtask1f:Xle,hint5a:Kle,hint5b:Jle},Qle={id:"task1",name:"Milestones - Story Creation",order:1,type:"task",subtasks:["character","place","time","actions","events","ending","feeling"]},Zle={id:"character",type:"subtask",title:"Characters",subtext:"Who is the main character?",hints:["hint1a"]},eue={id:"hint1a",type:"help",text:"Help me"},tue={id:"place",type:"subtask",title:"Location",subtext:"Where does the story take place?",hints:["hint2a"]},nue={id:"hint2a",type:"help",text:"Help me"},rue={id:"location",type:"subtask",title:"Time",subtext:"When does the story take place?",hints:["hint4a"]},iue={id:"hint4a",type:"help",text:"Help me"},sue={id:"location",type:"subtask",title:"Actions",subtext:"What does the main character do or want to do; what do other characters do?",hints:["hint5a"]},oue={id:"hint5a",type:"help",text:"Help me"},aue={id:"location",type:"subtask",title:"Events",subtext:"What happens then? What happens with other characters?",hints:["hint6a"]},lue={id:"hint6a",type:"help",text:"Help me"},uue={id:"ending",type:"subtask",title:"Ending",subtext:"How does the story end?",hints:["hint7a"]},cue={id:"hint7a",type:"help",text:"Help me"},hue={id:"feeling",type:"subtask",title:"Emotions",subtext:"How does the main character feel; how do other characters feel?",hints:["hint8a"]},due={id:"hint2a",type:"help",text:"Help me"},fue={task1:Qle,character:Zle,hint1a:eue,place:tue,hint2a:nue,time:rue,hint4a:iue,actions:sue,hint5a:oue,events:aue,hint6a:lue,ending:uue,hint7a:cue,feeling:hue,hint8a:due},pue=`You are an assistive agent that translates descriptions of the robot Misty's behavior into JSON that corresponds to programming blocks that emulate said behavior. For example, a user might say: "Misty should say "Watch me", play a sound, and then do a dance." One possible result is the following,\`"{data: [
  {id: "block1", type: "Speak", FIELD_Speak_Text: "block2", nextStatement: "block3"}, 
  {id: "block2", type: "text", value: "Watch me"}, 
  {id: "block3", type: "PlayAudio", FIELD_PlayAudio_Filename: "block4", nextStatement: "block5"}, 
  {id: "block4", type: "audio", value: "s_Joy"},
  {id: "block5", type: "Turn2", FIELD_Turn_Direction: "Left", FIELD_DriveTime_TimeMs: "block6", nextStatement: "block7"},
  {id: "block6", type: "math_number", value: "2"},
  {id: "block7", type: "Turn2", FIELD_Turn_Direction: "Right", FIELD_DriveTime_TimeMs: "block8", nextStatement: "block9"},
  {id: "block8", type: "math_number", value: "4"},
  {id: "block9", type: "MoveArms2", FIELD_MoveArm_LeftPosition: "block10", FIELD_MoveArm_LeftVelocity: "block11", FIELD_MoveArm_RightPosition: "block12", FIELD_MoveArm_RightVelocity: "block13", nextStatement: "block14"},
  {id: "block10", type: "math_number", value: "-90"},
  {id: "block11", type: "math_number", value: "100"},
  {id: "block12", type: "math_number", value: "-90"},
  {id: "block13", type: "math_number", value: "100"},
  {id: "block14", type: "MoveHead3", FIELD_MoveHead_Pitch: "block15", FIELD_MoveHead_Roll: "block16", FIELD_MoveHead_Yaw: "block17", FIELD_MoveHead_Time: "\`"},
  {id: "block15", type: "math_number", value: "-10"},
  {id: "block16", type: "math_number", value: "10"},
  {id: "block17", type: "math_number", value: "-30"},
  {id: "block18", type: "math_number", value: "1"}
]}". 

Every json block has the following fields: [id, type]. id is a unique identifier. Each block must have a unique id. type defines what kind of block it is. There are a total of 14 blocks that you can use to create programs. These are: [MoveArms2, MoveHead3, DriveTime2, math_number, Speak, text, ChangeLED, Colour, DisplayImage, face, DisplayText, ClearText, PlayAudio, audio].
In addition to the "id" and "type" fields, math_number blocks have a field called "value" for a numeric value.
In addition to the "id" and "type" fields, text blocks have a field called "value" for a string value representing what is spoken or said by the robot Misty.
In addition to the "id" and "type" fields, face blocks have a field called "value" for which face to use. The list of available faces is [
  "e_Sleeping",
  "e_SleepingZZZ",
  "e_Contempt",
  "e_ContentLeft",
  "e_ContentRight",
  "e_Disoriented",
  "e_EcstacyHilarious",
  "e_EcstacyStarryEyed",
  "e_JoyGoofy",
  "e_JoyGoofy2",
  "e_JoyGoofy3",
  "e_Love",
  "e_Rage",
  "e_Rage2",
  "e_Rage3",
  "e_Rage4",
  "e_RemorseShame",
  "eyes_acceptance",
  "eyes_admiration",
  "eyes_amazement",
  "eyes_anger",
  "eyes_annoyed",
  "eyes_anticipation",
  "eyes_apprehension",
  "eyes_apprehension_1",
  "eyes_boredom",
  "eyes_default",
  "eyes_disgust",
  "eyes_distraction",
  "eyes_ecstasy_frame_1",
  "eyes_ecstasy_frame_2",
  "eyes_fear",
  "eyes_grief",
  "eyes_interest",
  "eyes_joy",
  "eyes_loathing",
  "eyes_pensiveness",
  "eyes_rage",
  "eyes_sad",
  "eyes_serenity",
  "eyes_surprise",
  "eyes_terror",
  "eyes_trust",
  "eyes_vigilance"
]. Do not create your own! You can only use faces from this list!
In addition to the "id" and "type" fields, audio blocks have a field called "value" for which audio to play. The list of available audio is [
  "s_Acceptance",
  "s_Amazement",
  "s_Amazement2",
  "s_Anger",
  "s_Anger2",
  "s_Anger3",
  "s_Anger4",
  "s_Annoyance",
  "s_Annoyance2",
  "s_Annoyance3",
  "s_Annoyance4",
  "s_Awe",
  "s_Awe2",
  "s_Awe3",
  "s_Boredom",
  "s_Disapproval",
  "s_Disgust",
  "s_Disgust2",
  "s_Disgust3",
  "s_DisorientedConfused",
  "s_DisorientedConfused2",
  "s_DisorientedConfused3",
  "s_DisorientedConfused4",
  "s_DisorientedConfused5",
  "s_DisorientedConfused6",
  "s_Distraction",
  "s_Ecstacy",
  "s_Ecstacy2",
  "s_Fear",
  "s_Grief",
  "s_Grief2",
  "s_Grief3",
  "s_Grief4",
  "s_Joy",
  "s_Joy2",
  "s_Joy3",
  "s_Joy4",
  "s_Loathing",
  "s_Love",
  "s_PhraseByeBye",
  "s_PhraseEvilAhHa",
  "s_PhraseHello",
  "s_PhraseNoNoNo",
  "s_PhraseOopsy",
  "s_PhraseOwOwOw",
  "s_PhraseOwwww",
  "s_PhraseUhOh",
  "s_Rage",
  "s_Sadness",
  "s_Sadness2",
  "s_Sadness3",
  "s_Sadness4",
  "s_Sadness5",
  "s_Sadness6",
  "s_Sadness7",
  "s_Sleepy",
  "s_Sleepy2",
  "s_Sleepy3" 
  "s_Sleepy4",
  "s_SleepySnore",
  "s_SystemCameraShutter"
]. Do not create your own! You can only use audio from this list!
In addition to the "id" and "type" fields, Colour blocks have a field named "value" for a hexadecimal color value.
ChangeLED blocks change the color of the LED on the robot Misty's chest. In addition to the "id" and "type" fields, ChangeLED blocks have a field named "FIELD_ChangeLED" that accepts the id of a Colour block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
Speak blocks allow the robot Misty to say something. In addition to the "id" and "type" fields, Speak blocks have a field named "FIELD_Speak_Text" that accepts the id of a text block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
DisplayImage blocks change the face of the robot Misty to a specified face. In addition to the "id" and "type" fields, DisplayImage blocks have a field called "FIELD_DisplayImage_Filename" that accepts the id of an face block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
PlayAudio blocks allow the robot Misty to play predefined audio files. In addition to the "id" and "type" fields, PlayAudio blocks have a field called "FIELD_PlayAudio_Filename" that accepts the id of an audio block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
DisplayText blocks display text on the robot Misty's screen. In addition to the "id" and "type" fields, DisplayText blocks have a field called "FIELD_DisplayText_Text" that accepts the id of an text block. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
ClearText blocks clear any text that is displayed on the robot Misty's screen. ClearText blocks only contain the "id" and "type" fields. It also can have an optional field called "nextStatement" field that points to the next block in the program to execute.
MoveArms2 blocks allow the robot Misty to move either or both its left and right arms. In addition to the "id" and "type" fields, MoveArms2 blocks have 4 other fields. These are: "FIELD_MoveArm_LeftPosition" for the id of the math_number block that determines the left arm's position (measured in degrees between -90 and 90, where -90 is straight up, and 90 is straight down), "FIELD_MoveArm_RightPosition" for the id of the math_number block for the right arm's position (measured in degrees between -90 and 90, where -90 is straight up, and 90 is straight down), "FIELD_MoveArm_LeftVelocity" for the id of the math_number block that determines the left arm's movement speed (measured between 1 and 100 where 1 is the slowest speed and 100 is the fastest), and "FIELD_MoveArm_RightVelocity" for the id of the math_number block that determines the right arm's movement speed (measured between 1 and 100 where 1 is the slowest speed and 100 is the fastest). It also can have an optional "nextStatement" field that points to the next block in the list to evaluate.
MoveHead3 blocks allow the robot Misty to move its head. In addition to the "id" and "type" fields, MoveHead3 blocks have 4 other fields. These are: "FIELD_MoveHead_Pitch" for the id of the math_number block that determines the pitch value of the robot Misty's head (measured in degrees between -40 and 25, where 25 is maximally looking down and -40 is maximally looking up), "FIELD_MoveHead_Roll" for the id of the math_number block that determines the roll value of the robot Misty's head (measured in degrees between -42 and 42, where -42 tilts the robot Misty's head furthest left and 42 tilts the robot Misty's head furthest right), "FIELD_MoveHead_Yaw" for the id of the math_number block that determines the yaw value of the robot Misty's head (measured in degrees between -90 and 90 where -90 is looking all the way to the left and 90 is looking all the way to the right), and "FIELD_MoveHead_Time" for the id of the math_number block that determines the time it takes to execute the motion (measured in seconds between 1 and 60). It also can have an optional "nextStatement" field that points to the next block in the list to evaluate.
Turn2 allow the robot Misty to turn about its environment to face objects. In addition to the "id" and "type" fields, Turn2 blocks have 3 other fields. These are: "FIELD_Turn_Direction" that is a string for "Left" or "Right" and "FIELD_Turn_Duration" for the id of the math_number block that determines the time it takes to execute the driving (measured in seconds between 1 and 60). It also can have an optional "nextStatement" field that points to the next block in the list to evaluate.

For the MoveArms2, MoveHead3, and DriveTime2 blocks, all json fields (except for "id" and "type") should contain ids to other blocks! This is very important. Do not put numeric values in these fields. Instead, create the appropriate block for that field and use its id instead.
Colour blocks can only exist if a ChangeLED block exists and uses it. face blocks can only exist if a DisplayImage block exists and uses it. audio blocks can only exist if a PlayAudio block exists and uses it. text blocks can only exist if a Speak or DisplayText block exists and uses it. math_number blocks can only exist if another block uses it (for example, such as DriveTime2, MoveArms2, or MoveHead3). Only create blocks based on the fields described above. Do not add extra fields to blocks unless its been specified to do so.
ONLY respond with the JSON and be sure that the output JSON is valid according to the rules here as well as the normal JSON formatting rules. Do not explain anything.`;var cR={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */cR.exports;(function(n,e){(function(){var t,r="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",f=500,g="__lodash_placeholder__",y=1,b=2,S=4,C=1,M=2,A=1,k=2,O=4,P=8,D=16,U=32,H=64,V=128,z=256,Z=512,oe=30,ue="...",q=800,ae=16,le=1,ce=2,ge=3,$e=1/0,K=9007199254740991,ie=17976931348623157e292,se=NaN,fe=4294967295,Se=fe-1,Ue=fe>>>1,ke=[["ary",V],["bind",A],["bindKey",k],["curry",P],["curryRight",D],["flip",Z],["partial",U],["partialRight",H],["rearg",z]],qe="[object Arguments]",we="[object Array]",Ze="[object AsyncFunction]",et="[object Boolean]",ft="[object Date]",at="[object DOMException]",Ge="[object Error]",Ie="[object Function]",He="[object GeneratorFunction]",it="[object Map]",st="[object Number]",It="[object Null]",kt="[object Object]",vt="[object Promise]",Mt="[object Proxy]",Ct="[object RegExp]",gt="[object Set]",Ee="[object String]",re="[object Symbol]",Be="[object Undefined]",mt="[object WeakMap]",yt="[object WeakSet]",wt="[object ArrayBuffer]",Ke="[object DataView]",Qe="[object Float32Array]",Le="[object Float64Array]",Q="[object Int8Array]",te="[object Int16Array]",me="[object Int32Array]",Re="[object Uint8Array]",Fe="[object Uint8ClampedArray]",bt="[object Uint16Array]",ze="[object Uint32Array]",Pt=/\b__p \+= '';/g,lt=/\b(__p \+=) '' \+/g,Gt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Wt=/&(?:amp|lt|gt|quot|#39);/g,bn=/[&<>"']/g,ar=RegExp(Wt.source),cr=RegExp(bn.source),oi=/<%-([\s\S]+?)%>/g,Mr=/<%([\s\S]+?)%>/g,_r=/<%=([\s\S]+?)%>/g,ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Te=/^\w*$/,je=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ct=/[\\^$.*+?()[\]{}|]/g,Ht=RegExp(ct.source),nn=/^\s+/,kn=/\s/,De=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_t=/\{\n\/\* \[wrapped with (.+)\] \*/,Ot=/,? & /,St=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Xt=/[()=,{}\[\]\/\s]/,Wn=/\\(\\)?/g,ir=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,br=/\w*$/,Or=/^[-+]0x[0-9a-f]+$/i,Ei=/^0b[01]+$/i,Lr=/^\[object .+?Constructor\]$/,Ar=/^0o[0-7]+$/i,Ss=/^(?:0|[1-9]\d*)$/,La=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mo=/($^)/,Xl=/['\n\r\u2028\u2029\\]/g,rn="\\ud800-\\udfff",Dr="\\u0300-\\u036f",tl="\\ufe20-\\ufe2f",Na="\\u20d0-\\u20ff",zs=Dr+tl+Na,Us="\\u2700-\\u27bf",Pi="a-z\\xdf-\\xf6\\xf8-\\xff",Pr="\\xac\\xb1\\xd7\\xf7",In="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Nr="\\u2000-\\u206f",jr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Sr="A-Z\\xc0-\\xd6\\xd8-\\xde",Bi="\\ufe0e\\ufe0f",ws=Pr+In+Nr+jr,fi="[']",gs="["+rn+"]",nl="["+ws+"]",Da="["+zs+"]",fc="\\d+",pc="["+Us+"]",qs="["+Pi+"]",qo="[^"+rn+ws+fc+Us+Pi+Sr+"]",Kl="\\ud83c[\\udffb-\\udfff]",vu="(?:"+Da+"|"+Kl+")",gh="[^"+rn+"]",Qo="(?:\\ud83c[\\udde6-\\uddff]){2}",Tr="[\\ud800-\\udbff][\\udc00-\\udfff]",$i="["+Sr+"]",Pc="\\u200d",vh="(?:"+qs+"|"+qo+")",Bc="(?:"+$i+"|"+qo+")",xl="(?:"+fi+"(?:d|ll|m|re|s|t|ve))?",_u="(?:"+fi+"(?:D|LL|M|RE|S|T|VE))?",$l=vu+"?",Cl="["+Bi+"]?",wr="(?:"+Pc+"(?:"+[gh,Qo,Tr].join("|")+")"+Cl+$l+")*",Er="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Jl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rl=Cl+$l+wr,il="(?:"+[pc,Qo,Tr].join("|")+")"+rl,yu="(?:"+[gh+Da+"?",Da,Qo,Tr,gs].join("|")+")",Qi=RegExp(fi,"g"),vs=RegExp(Da,"g"),sl=RegExp(Kl+"(?="+Kl+")|"+yu+rl,"g"),Cd=RegExp([$i+"?"+qs+"+"+xl+"(?="+[nl,$i,"$"].join("|")+")",Bc+"+"+_u+"(?="+[nl,$i+vh,"$"].join("|")+")",$i+"?"+vh+"+"+xl,$i+"+"+_u,Jl,Er,fc,il].join("|"),"g"),lo=RegExp("["+Pc+rn+zs+Bi+"]"),Uu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ca=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],bu=-1,lr={};lr[Qe]=lr[Le]=lr[Q]=lr[te]=lr[me]=lr[Re]=lr[Fe]=lr[bt]=lr[ze]=!0,lr[qe]=lr[we]=lr[wt]=lr[et]=lr[Ke]=lr[ft]=lr[Ge]=lr[Ie]=lr[it]=lr[st]=lr[kt]=lr[Ct]=lr[gt]=lr[Ee]=lr[mt]=!1;var Gn={};Gn[qe]=Gn[we]=Gn[wt]=Gn[Ke]=Gn[et]=Gn[ft]=Gn[Qe]=Gn[Le]=Gn[Q]=Gn[te]=Gn[me]=Gn[it]=Gn[st]=Gn[kt]=Gn[Ct]=Gn[gt]=Gn[Ee]=Gn[re]=Gn[Re]=Gn[Fe]=Gn[bt]=Gn[ze]=!0,Gn[Ge]=Gn[Ie]=Gn[mt]=!1;var Es={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},uo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Tu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_h=parseFloat,Pa=parseInt,ha=typeof jl=="object"&&jl&&jl.Object===Object&&jl,Gu=typeof self=="object"&&self&&self.Object===Object&&self,$r=ha||Gu||Function("return this")(),Rs=e&&!e.nodeType&&e,bi=Rs&&!0&&n&&!n.nodeType&&n,Ci=bi&&bi.exports===Rs,da=Ci&&ha.process,ti=function(){try{var ye=bi&&bi.require&&bi.require("util").types;return ye||da&&da.binding&&da.binding("util")}catch{}}(),Su=ti&&ti.isArrayBuffer,Ao=ti&&ti.isDate,wu=ti&&ti.isMap,ol=ti&&ti.isRegExp,Fi=ti&&ti.isSet,Mi=ti&&ti.isTypedArray;function Vn(ye,Xe,Pe){switch(Pe.length){case 0:return ye.call(Xe);case 1:return ye.call(Xe,Pe[0]);case 2:return ye.call(Xe,Pe[0],Pe[1]);case 3:return ye.call(Xe,Pe[0],Pe[1],Pe[2])}return ye.apply(Xe,Pe)}function Ai(ye,Xe,Pe,Nt){for(var sn=-1,Rn=ye==null?0:ye.length;++sn<Rn;){var Jn=ye[sn];Xe(Nt,Jn,Pe(Jn),ye)}return Nt}function Jr(ye,Xe){for(var Pe=-1,Nt=ye==null?0:ye.length;++Pe<Nt&&Xe(ye[Pe],Pe,ye)!==!1;);return ye}function dd(ye,Xe){for(var Pe=ye==null?0:ye.length;Pe--&&Xe(ye[Pe],Pe,ye)!==!1;);return ye}function Eu(ye,Xe){for(var Pe=-1,Nt=ye==null?0:ye.length;++Pe<Nt;)if(!Xe(ye[Pe],Pe,ye))return!1;return!0}function ji(ye,Xe){for(var Pe=-1,Nt=ye==null?0:ye.length,sn=0,Rn=[];++Pe<Nt;){var Jn=ye[Pe];Xe(Jn,Pe,ye)&&(Rn[sn++]=Jn)}return Rn}function Ba(ye,Xe){var Pe=ye==null?0:ye.length;return!!Pe&&ks(ye,Xe,0)>-1}function yh(ye,Xe,Pe){for(var Nt=-1,sn=ye==null?0:ye.length;++Nt<sn;)if(Pe(Xe,ye[Nt]))return!0;return!1}function pr(ye,Xe){for(var Pe=-1,Nt=ye==null?0:ye.length,sn=Array(Nt);++Pe<Nt;)sn[Pe]=Xe(ye[Pe],Pe,ye);return sn}function Zo(ye,Xe){for(var Pe=-1,Nt=Xe.length,sn=ye.length;++Pe<Nt;)ye[sn+Pe]=Xe[Pe];return ye}function fd(ye,Xe,Pe,Nt){var sn=-1,Rn=ye==null?0:ye.length;for(Nt&&Rn&&(Pe=ye[++sn]);++sn<Rn;)Pe=Xe(Pe,ye[sn],sn,ye);return Pe}function lf(ye,Xe,Pe,Nt){var sn=ye==null?0:ye.length;for(Nt&&sn&&(Pe=ye[--sn]);sn--;)Pe=Xe(Pe,ye[sn],sn,ye);return Pe}function Fc(ye,Xe){for(var Pe=-1,Nt=ye==null?0:ye.length;++Pe<Nt;)if(Xe(ye[Pe],Pe,ye))return!0;return!1}var uf=ci("length");function Ff(ye){return ye.split("")}function wp(ye){return ye.match(St)||[]}function Md(ye,Xe,Pe){var Nt;return Pe(ye,function(sn,Rn,Jn){if(Xe(sn,Rn,Jn))return Nt=Rn,!1}),Nt}function ql(ye,Xe,Pe,Nt){for(var sn=ye.length,Rn=Pe+(Nt?1:-1);Nt?Rn--:++Rn<sn;)if(Xe(ye[Rn],Rn,ye))return Rn;return-1}function ks(ye,Xe,Pe){return Xe===Xe?Uc(ye,Xe,Pe):ql(ye,bh,Pe)}function Wu(ye,Xe,Pe,Nt){for(var sn=Pe-1,Rn=ye.length;++sn<Rn;)if(Nt(ye[sn],Xe))return sn;return-1}function bh(ye){return ye!==ye}function Fa(ye,Xe){var Pe=ye==null?0:ye.length;return Pe?Uo(ye,Xe)/Pe:se}function ci(ye){return function(Xe){return Xe==null?t:Xe[ye]}}function Cr(ye){return function(Xe){return ye==null?t:ye[Xe]}}function co(ye,Xe,Pe,Nt,sn){return sn(ye,function(Rn,Jn,_n){Pe=Nt?(Nt=!1,Rn):Xe(Pe,Rn,Jn,_n)}),Pe}function za(ye,Xe){var Pe=ye.length;for(ye.sort(Xe);Pe--;)ye[Pe]=ye[Pe].value;return ye}function Uo(ye,Xe){for(var Pe,Nt=-1,sn=ye.length;++Nt<sn;){var Rn=Xe(ye[Nt]);Rn!==t&&(Pe=Pe===t?Rn:Pe+Rn)}return Pe}function Ql(ye,Xe){for(var Pe=-1,Nt=Array(ye);++Pe<ye;)Nt[Pe]=Xe(Pe);return Nt}function Zl(ye,Xe){return pr(Xe,function(Pe){return[Pe,ye[Pe]]})}function Fh(ye){return ye&&ye.slice(0,Ml(ye)+1).replace(nn,"")}function Yr(ye){return function(Xe){return ye(Xe)}}function Ii(ye,Xe){return pr(Xe,function(Pe){return ye[Pe]})}function xr(ye,Xe){return ye.has(Xe)}function Yi(ye,Xe){for(var Pe=-1,Nt=ye.length;++Pe<Nt&&ks(Xe,ye[Pe],0)>-1;);return Pe}function fa(ye,Xe){for(var Pe=ye.length;Pe--&&ks(Xe,ye[Pe],0)>-1;);return Pe}function xu(ye,Xe){for(var Pe=ye.length,Nt=0;Pe--;)ye[Pe]===Xe&&++Nt;return Nt}var cf=Cr(Es),hf=Cr(uo);function pd(ye){return"\\"+Tu[ye]}function Vu(ye,Xe){return ye==null?t:ye[Xe]}function al(ye){return lo.test(ye)}function zc(ye){return Uu.test(ye)}function zh(ye){for(var Xe,Pe=[];!(Xe=ye.next()).done;)Pe.push(Xe.value);return Pe}function ju(ye){var Xe=-1,Pe=Array(ye.size);return ye.forEach(function(Nt,sn){Pe[++Xe]=[sn,Nt]}),Pe}function eu(ye,Xe){return function(Pe){return ye(Xe(Pe))}}function Hs(ye,Xe){for(var Pe=-1,Nt=ye.length,sn=0,Rn=[];++Pe<Nt;){var Jn=ye[Pe];(Jn===Xe||Jn===g)&&(ye[Pe]=g,Rn[sn++]=Pe)}return Rn}function tu(ye){var Xe=-1,Pe=Array(ye.size);return ye.forEach(function(Nt){Pe[++Xe]=Nt}),Pe}function Uh(ye){var Xe=-1,Pe=Array(ye.size);return ye.forEach(function(Nt){Pe[++Xe]=[Nt,Nt]}),Pe}function Uc(ye,Xe,Pe){for(var Nt=Pe-1,sn=ye.length;++Nt<sn;)if(ye[Nt]===Xe)return Nt;return-1}function Hc(ye,Xe,Pe){for(var Nt=Pe+1;Nt--;)if(ye[Nt]===Xe)return Nt;return Nt}function is(ye){return al(ye)?nu(ye):uf(ye)}function Hr(ye){return al(ye)?$u(ye):Ff(ye)}function Ml(ye){for(var Xe=ye.length;Xe--&&kn.test(ye.charAt(Xe)););return Xe}var Ua=Cr(Hu);function nu(ye){for(var Xe=sl.lastIndex=0;sl.test(ye);)++Xe;return Xe}function $u(ye){return ye.match(sl)||[]}function Th(ye){return ye.match(Cd)||[]}var Ad=function ye(Xe){Xe=Xe==null?$r:pi.defaults($r.Object(),Xe,pi.pick($r,ca));var Pe=Xe.Array,Nt=Xe.Date,sn=Xe.Error,Rn=Xe.Function,Jn=Xe.Math,_n=Xe.Object,Gr=Xe.RegExp,ho=Xe.String,Ti=Xe.TypeError,fo=Pe.prototype,ll=Rn.prototype,zi=_n.prototype,_s=Xe["__core-js_shared__"],Cu=ll.toString,qn=zi.hasOwnProperty,pa=0,Qs=function(){var c=/[^.]+$/.exec(_s&&_s.keys&&_s.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Gs=zi.toString,Ha=Cu.call(_n),Hh=$r._,Sh=Gr("^"+Cu.call(qn).replace(ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mc=Ci?Xe.Buffer:t,ea=Xe.Symbol,Gc=Xe.Uint8Array,Gh=mc?mc.allocUnsafe:t,Ga=eu(_n.getPrototypeOf,_n),Wh=_n.create,gc=zi.propertyIsEnumerable,Yu=fo.splice,md=ea?ea.isConcatSpreadable:t,ta=ea?ea.iterator:t,po=ea?ea.toStringTag:t,Al=function(){try{var c=wa(_n,"defineProperty");return c({},"",{}),c}catch{}}(),Vh=Xe.clearTimeout!==$r.clearTimeout&&Xe.clearTimeout,Ui=Nt&&Nt.now!==$r.Date.now&&Nt.now,gd=Xe.setTimeout!==$r.setTimeout&&Xe.setTimeout,Xu=Jn.ceil,ru=Jn.floor,Wc=_n.getOwnPropertySymbols,Id=mc?mc.isBuffer:t,Il=Xe.isFinite,Rd=fo.join,jh=eu(_n.keys,_n),ni=Jn.max,Ri=Jn.min,Ep=Nt.now,zf=Xe.parseInt,Rl=Jn.random,iu=fo.reverse,Ku=wa(Xe,"DataView"),Ju=wa(Xe,"Map"),wh=wa(Xe,"Promise"),ul=wa(Xe,"Set"),na=wa(Xe,"WeakMap"),kl=wa(_n,"create"),Vc=na&&new na,Ol={},jc=qa(Ku),vc=qa(Ju),kd=qa(wh),Wa=qa(ul),Xr=qa(na),cl=ea?ea.prototype:t,Zi=cl?cl.valueOf:t,ma=cl?cl.toString:t;function X(c){if(di(c)&&!Ln(c)&&!(c instanceof mn)){if(c instanceof Ir)return c;if(qn.call(c,"__wrapped__"))return Fd(c)}return new Ir(c)}var xs=function(){function c(){}return function(m){if(!si(m))return{};if(Wh)return Wh(m);c.prototype=m;var E=new c;return c.prototype=t,E}}();function ga(){}function Ir(c,m){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=t}X.templateSettings={escape:oi,evaluate:Mr,interpolate:_r,variable:"",imports:{_:X}},X.prototype=ga.prototype,X.prototype.constructor=X,Ir.prototype=xs(ga.prototype),Ir.prototype.constructor=Ir;function mn(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=fe,this.__views__=[]}function Uf(){var c=new mn(this.__wrapped__);return c.__actions__=ii(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=ii(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=ii(this.__views__),c}function hl(){if(this.__filtered__){var c=new mn(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function ki(){var c=this.__wrapped__.value(),m=this.__dir__,E=Ln(c),N=m<0,G=E?c.length:0,J=vn(0,G,this.__views__),he=J.start,ve=J.end,xe=ve-he,nt=N?ve:he-1,rt=this.__iteratees__,dt=rt.length,Lt=0,qt=Ri(xe,this.__takeCount__);if(!E||!N&&G==xe&&qt==xe)return eh(c,this.__actions__);var pn=[];e:for(;xe--&&Lt<qt;){nt+=m;for(var Nn=-1,dn=c[nt];++Nn<dt;){var Yn=rt[Nn],er=Yn.iteratee,ua=Yn.type,io=er(dn);if(ua==ce)dn=io;else if(!io){if(ua==le)continue e;break e}}pn[Lt++]=dn}return pn}mn.prototype=xs(ga.prototype),mn.prototype.constructor=mn;function hi(c){var m=-1,E=c==null?0:c.length;for(this.clear();++m<E;){var N=c[m];this.set(N[0],N[1])}}function es(){this.__data__=kl?kl(null):{},this.size=0}function ss(c){var m=this.has(c)&&delete this.__data__[c];return this.size-=m?1:0,m}function Yc(c){var m=this.__data__;if(kl){var E=m[c];return E===h?t:E}return qn.call(m,c)?m[c]:t}function va(c){var m=this.__data__;return kl?m[c]!==t:qn.call(m,c)}function _a(c,m){var E=this.__data__;return this.size+=this.has(c)?0:1,E[c]=kl&&m===t?h:m,this}hi.prototype.clear=es,hi.prototype.delete=ss,hi.prototype.get=Yc,hi.prototype.has=va,hi.prototype.set=_a;function os(c){var m=-1,E=c==null?0:c.length;for(this.clear();++m<E;){var N=c[m];this.set(N[0],N[1])}}function Xc(){this.__data__=[],this.size=0}function ra(c){var m=this.__data__,E=ys(m,c);if(E<0)return!1;var N=m.length-1;return E==N?m.pop():Yu.call(m,E,1),--this.size,!0}function Od(c){var m=this.__data__,E=ys(m,c);return E<0?t:m[E][1]}function Ld(c){return ys(this.__data__,c)>-1}function Yh(c,m){var E=this.__data__,N=ys(E,c);return N<0?(++this.size,E.push([c,m])):E[N][1]=m,this}os.prototype.clear=Xc,os.prototype.delete=ra,os.prototype.get=Od,os.prototype.has=Ld,os.prototype.set=Yh;function Ws(c){var m=-1,E=c==null?0:c.length;for(this.clear();++m<E;){var N=c[m];this.set(N[0],N[1])}}function Kn(){this.size=0,this.__data__={hash:new hi,map:new(Ju||os),string:new hi}}function Vs(c){var m=nh(this,c).delete(c);return this.size-=m?1:0,m}function Zs(c){return nh(this,c).get(c)}function Hi(c){return nh(this,c).has(c)}function su(c,m){var E=nh(this,c),N=E.size;return E.set(c,m),this.size+=E.size==N?0:1,this}Ws.prototype.clear=Kn,Ws.prototype.delete=Vs,Ws.prototype.get=Zs,Ws.prototype.has=Hi,Ws.prototype.set=su;function Ho(c){var m=-1,E=c==null?0:c.length;for(this.__data__=new Ws;++m<E;)this.add(c[m])}function $n(c){return this.__data__.set(c,h),this}function mi(c){return this.__data__.has(c)}Ho.prototype.add=Ho.prototype.push=$n,Ho.prototype.has=mi;function gi(c){var m=this.__data__=new os(c);this.size=m.size}function Hf(){this.__data__=new os,this.size=0}function Eh(c){var m=this.__data__,E=m.delete(c);return this.size=m.size,E}function mo(c){return this.__data__.get(c)}function ya(c){return this.__data__.has(c)}function Mn(c,m){var E=this.__data__;if(E instanceof os){var N=E.__data__;if(!Ju||N.length<s-1)return N.push([c,m]),this.size=++E.size,this;E=this.__data__=new Ws(N)}return E.set(c,m),this.size=E.size,this}gi.prototype.clear=Hf,gi.prototype.delete=Eh,gi.prototype.get=mo,gi.prototype.has=ya,gi.prototype.set=Mn;function yn(c,m){var E=Ln(c),N=!E&&Yd(c),G=!E&&!N&&lh(c),J=!E&&!N&&!G&&Jd(c),he=E||N||G||J,ve=he?Ql(c.length,ho):[],xe=ve.length;for(var nt in c)(m||qn.call(c,nt))&&!(he&&(nt=="length"||G&&(nt=="offset"||nt=="parent")||J&&(nt=="buffer"||nt=="byteLength"||nt=="byteOffset")||Ja(nt,xe)))&&ve.push(nt);return ve}function dl(c){var m=c.length;return m?c[Os(0,m-1)]:t}function _c(c,m){return mr(ii(c),Va(m,0,c.length))}function xp(c){return mr(ii(c))}function ou(c,m,E){(E!==t&&!Ca(c[m],E)||E===t&&!(m in c))&&Go(c,m,E)}function Io(c,m,E){var N=c[m];(!(qn.call(c,m)&&Ca(N,E))||E===t&&!(m in c))&&Go(c,m,E)}function ys(c,m){for(var E=c.length;E--;)if(Ca(c[E][0],m))return E;return-1}function fl(c,m,E,N){return Ro(c,function(G,J,he){m(N,G,E(G),he)}),N}function as(c,m){return c&&cs(m,wi(m),c)}function pl(c,m){return c&&cs(m,rs(m),c)}function Go(c,m,E){m=="__proto__"&&Al?Al(c,m,{configurable:!0,enumerable:!0,value:E,writable:!0}):c[m]=E}function Xh(c,m){for(var E=-1,N=m.length,G=Pe(N),J=c==null;++E<N;)G[E]=J?t:bm(c,m[E]);return G}function Va(c,m,E){return c===c&&(E!==t&&(c=c<=E?c:E),m!==t&&(c=c>=m?c:m)),c}function Oi(c,m,E,N,G,J){var he,ve=m&y,xe=m&b,nt=m&S;if(E&&(he=G?E(c,N,G,J):E(c)),he!==t)return he;if(!si(c))return c;var rt=Ln(c);if(rt){if(he=qm(c),!ve)return ii(c,he)}else{var dt=hs(c),Lt=dt==Ie||dt==He;if(lh(c))return th(c,ve);if(dt==kt||dt==qe||Lt&&!G){if(he=xe||Lt?{}:xc(c),!ve)return xe?yd(c,pl(he,c)):qh(c,as(he,c))}else{if(!Gn[dt])return G?c:{};he=no(c,dt,ve)}}J||(J=new gi);var qt=J.get(c);if(qt)return qt;J.set(c,he),Lv(c)?c.forEach(function(dn){he.add(Oi(dn,m,E,dn,c,J))}):td(c)&&c.forEach(function(dn,Yn){he.set(Yn,Oi(dn,m,E,Yn,c,J))});var pn=nt?xe?Rr:fr:xe?rs:wi,Nn=rt?t:pn(c);return Jr(Nn||c,function(dn,Yn){Nn&&(Yn=dn,dn=c[Yn]),Io(he,Yn,Oi(dn,m,E,Yn,c,J))}),he}function Nd(c){var m=wi(c);return function(E){return Kc(E,c,m)}}function Kc(c,m,E){var N=E.length;if(c==null)return!N;for(c=_n(c);N--;){var G=E[N],J=m[G],he=c[G];if(he===t&&!(G in c)||!J(he))return!1}return!0}function Kh(c,m,E){if(typeof c!="function")throw new Ti(l);return gf(function(){c.apply(t,E)},m)}function Wo(c,m,E,N){var G=-1,J=Ba,he=!0,ve=c.length,xe=[],nt=m.length;if(!ve)return xe;E&&(m=pr(m,Yr(E))),N?(J=yh,he=!1):m.length>=s&&(J=xr,he=!1,m=new Ho(m));e:for(;++G<ve;){var rt=c[G],dt=E==null?rt:E(rt);if(rt=N||rt!==0?rt:0,he&&dt===dt){for(var Lt=nt;Lt--;)if(m[Lt]===dt)continue e;xe.push(rt)}else J(m,dt,N)||xe.push(rt)}return xe}var Ro=Qh(ls),df=Qh(ja,!0);function Mu(c,m){var E=!0;return Ro(c,function(N,G,J){return E=!!m(N,G,J),E}),E}function Ll(c,m,E){for(var N=-1,G=c.length;++N<G;){var J=c[N],he=m(J);if(he!=null&&(ve===t?he===he&&!la(he):E(he,ve)))var ve=he,xe=J}return xe}function vd(c,m,E,N){var G=c.length;for(E=An(E),E<0&&(E=-E>G?0:G+E),N=N===t||N>G?G:An(N),N<0&&(N+=G),N=E>N?0:k0(N);E<N;)c[E++]=m;return c}function yc(c,m){var E=[];return Ro(c,function(N,G,J){m(N,G,J)&&E.push(N)}),E}function qr(c,m,E,N,G){var J=-1,he=c.length;for(E||(E=Dd),G||(G=[]);++J<he;){var ve=c[J];m>0&&E(ve)?m>1?qr(ve,m-1,E,N,G):Zo(G,ve):N||(G[G.length]=ve)}return G}var au=Ec(),qu=Ec(!0);function ls(c,m){return c&&au(c,m,wi)}function ja(c,m){return c&&qu(c,m,wi)}function $s(c,m){return ji(m,function(E){return Mc(c[E])})}function Cs(c,m){m=sa(m,c);for(var E=0,N=m.length;c!=null&&E<N;)c=c[wo(m[E++])];return E&&E==N?c:t}function Jc(c,m,E){var N=m(c);return Ln(c)?N:Zo(N,E(c))}function vi(c){return c==null?c===t?Be:It:po&&po in _n(c)?vl(c):kg(c)}function Ya(c,m){return c>m}function bc(c,m){return c!=null&&qn.call(c,m)}function ff(c,m){return c!=null&&m in _n(c)}function xh(c,m,E){return c>=Ri(m,E)&&c<ni(m,E)}function ia(c,m,E){for(var N=E?yh:Ba,G=c[0].length,J=c.length,he=J,ve=Pe(J),xe=1/0,nt=[];he--;){var rt=c[he];he&&m&&(rt=pr(rt,Yr(m))),xe=Ri(rt.length,xe),ve[he]=!E&&(m||G>=120&&rt.length>=120)?new Ho(he&&rt):t}rt=c[0];var dt=-1,Lt=ve[0];e:for(;++dt<G&&nt.length<xe;){var qt=rt[dt],pn=m?m(qt):qt;if(qt=E||qt!==0?qt:0,!(Lt?xr(Lt,pn):N(nt,pn,E))){for(he=J;--he;){var Nn=ve[he];if(!(Nn?xr(Nn,pn):N(c[he],pn,E)))continue e}Lt&&Lt.push(pn),nt.push(qt)}}return nt}function Xi(c,m,E,N){return ls(c,function(G,J,he){m(N,E(G),J,he)}),N}function Pn(c,m,E){m=sa(m,c),c=Mp(c,m);var N=c==null?c:c[wo(Ls(m))];return N==null?t:Vn(N,c,E)}function nr(c){return di(c)&&vi(c)==qe}function zr(c){return di(c)&&vi(c)==wt}function ri(c){return di(c)&&vi(c)==ft}function Zr(c,m,E,N,G){return c===m?!0:c==null||m==null||!di(c)&&!di(m)?c!==c&&m!==m:ko(c,m,E,N,Zr,G)}function ko(c,m,E,N,G,J){var he=Ln(c),ve=Ln(m),xe=he?we:hs(c),nt=ve?we:hs(m);xe=xe==qe?kt:xe,nt=nt==qe?kt:nt;var rt=xe==kt,dt=nt==kt,Lt=xe==nt;if(Lt&&lh(c)){if(!lh(m))return!1;he=!0,rt=!1}if(Lt&&!rt)return J||(J=new gi),he||Jd(c)?on(c,m,E,N,G,J):xn(c,m,xe,E,N,G,J);if(!(E&C)){var qt=rt&&qn.call(c,"__wrapped__"),pn=dt&&qn.call(m,"__wrapped__");if(qt||pn){var Nn=qt?c.value():c,dn=pn?m.value():m;return J||(J=new gi),G(Nn,dn,E,N,J)}}return Lt?(J||(J=new gi),On(c,m,E,N,G,J)):!1}function us(c){return di(c)&&hs(c)==it}function ts(c,m,E,N){var G=E.length,J=G,he=!N;if(c==null)return!J;for(c=_n(c);G--;){var ve=E[G];if(he&&ve[2]?ve[1]!==c[ve[0]]:!(ve[0]in c))return!1}for(;++G<J;){ve=E[G];var xe=ve[0],nt=c[xe],rt=ve[1];if(he&&ve[2]){if(nt===t&&!(xe in c))return!1}else{var dt=new gi;if(N)var Lt=N(nt,rt,xe,c,m,dt);if(!(Lt===t?Zr(rt,nt,C|M,N,dt):Lt))return!1}}return!0}function lu(c){if(!si(c)||ro(c))return!1;var m=Mc(c)?Sh:Lr;return m.test(qa(c))}function Qu(c){return di(c)&&vi(c)==Ct}function Tc(c){return di(c)&&hs(c)==gt}function Zu(c){return di(c)&&Ih(c.length)&&!!lr[vi(c)]}function eo(c){return typeof c=="function"?c:c==null?Do:typeof c=="object"?Ln(c)?vo(c[0],c[1]):Iu(c):Xv(c)}function go(c){if(!$c(c))return jh(c);var m=[];for(var E in _n(c))qn.call(c,E)&&E!="constructor"&&m.push(E);return m}function _d(c){if(!si(c))return xa(c);var m=$c(c),E=[];for(var N in c)N=="constructor"&&(m||!qn.call(c,N))||E.push(N);return E}function ba(c,m){return c<m}function Au(c,m){var E=-1,N=Gi(c)?Pe(c.length):[];return Ro(c,function(G,J,he){N[++E]=m(G,J,he)}),N}function Iu(c){var m=tm(c);return m.length==1&&m[0][2]?nm(m[0][0],m[0][1]):function(E){return E===c||ts(E,c,m)}}function vo(c,m){return Ea(c)&&$p(m)?nm(wo(c),m):function(E){var N=bm(E,c);return N===t&&N===m?Tm(E,c):Zr(m,N,C|M)}}function _o(c,m,E,N,G){c!==m&&au(m,function(J,he){if(G||(G=new gi),si(J))Nl(c,m,he,E,_o,N,G);else{var ve=N?N(hu(c,he),J,he+"",c,m,G):t;ve===t&&(ve=J),ou(c,he,ve)}},rs)}function Nl(c,m,E,N,G,J,he){var ve=hu(c,E),xe=hu(m,E),nt=he.get(xe);if(nt){ou(c,E,nt);return}var rt=J?J(ve,xe,E+"",c,m,he):t,dt=rt===t;if(dt){var Lt=Ln(xe),qt=!Lt&&lh(xe),pn=!Lt&&!qt&&Jd(xe);rt=xe,Lt||qt||pn?Ln(ve)?rt=ve:Qr(ve)?rt=ii(ve):qt?(dt=!1,rt=th(xe,!0)):pn?(dt=!1,rt=Pl(xe,!0)):rt=[]:Vr(xe)||Yd(xe)?(rt=ve,Yd(ve)?rt=hb(ve):(!si(ve)||Mc(ve))&&(rt=xc(xe))):dt=!1}dt&&(he.set(xe,rt),G(rt,xe,N,J,he),he.delete(xe)),ou(c,E,rt)}function Vo(c,m){var E=c.length;if(E)return m+=m<0?E:0,Ja(m,E)?c[m]:t}function ec(c,m,E){m.length?m=pr(m,function(J){return Ln(J)?function(he){return Cs(he,J.length===1?J[0]:J)}:J}):m=[Do];var N=-1;m=pr(m,Yr(ln()));var G=Au(c,function(J,he,ve){var xe=pr(m,function(nt){return nt(J)});return{criteria:xe,index:++N,value:J}});return za(G,function(J,he){return Bl(J,he,E)})}function tc(c,m){return $h(c,m,function(E,N){return Tm(c,N)})}function $h(c,m,E){for(var N=-1,G=m.length,J={};++N<G;){var he=m[N],ve=Cs(c,he);E(ve,he)&&_i(J,sa(he,c),ve)}return J}function Ch(c){return function(m){return Cs(m,c)}}function Br(c,m,E,N){var G=N?Wu:ks,J=-1,he=m.length,ve=c;for(c===m&&(m=ii(m)),E&&(ve=pr(c,Yr(E)));++J<he;)for(var xe=0,nt=m[J],rt=E?E(nt):nt;(xe=G(ve,rt,xe,N))>-1;)ve!==c&&Yu.call(ve,xe,1),Yu.call(c,xe,1);return c}function bs(c,m){for(var E=c?m.length:0,N=E-1;E--;){var G=m[E];if(E==N||G!==J){var J=G;Ja(G)?Yu.call(c,G,1):Zc(c,G)}}return c}function Os(c,m){return c+ru(Rl()*(m-c+1))}function Xa(c,m,E,N){for(var G=-1,J=ni(Xu((m-c)/(E||1)),0),he=Pe(J);J--;)he[N?J:++G]=c,c+=E;return he}function js(c,m){var E="";if(!c||m<1||m>K)return E;do m%2&&(E+=c),m=ru(m/2),m&&(c+=c);while(m);return E}function fn(c,m){return Bd(rm(c,m,Do),c+"")}function qc(c){return dl(Tf(c))}function En(c,m){var E=Tf(c);return mr(E,Va(m,0,E.length))}function _i(c,m,E,N){if(!si(c))return c;m=sa(m,c);for(var G=-1,J=m.length,he=J-1,ve=c;ve!=null&&++G<J;){var xe=wo(m[G]),nt=E;if(xe==="__proto__"||xe==="constructor"||xe==="prototype")return c;if(G!=he){var rt=ve[xe];nt=N?N(rt,xe,ve):t,nt===t&&(nt=si(rt)?rt:Ja(m[G+1])?[]:{})}Io(ve,xe,nt),ve=ve[xe]}return c}var Ms=Vc?function(c,m){return Vc.set(c,m),c}:Do,uu=Al?function(c,m){return Al(c,"toString",{configurable:!0,enumerable:!1,value:Vv(m),writable:!0})}:Do;function Dl(c){return mr(Tf(c))}function Ut(c,m,E){var N=-1,G=c.length;m<0&&(m=-m>G?0:G+m),E=E>G?G:E,E<0&&(E+=G),G=m>E?0:E-m>>>0,m>>>=0;for(var J=Pe(G);++N<G;)J[N]=c[N+m];return J}function ml(c,m){var E;return Ro(c,function(N,G,J){return E=m(N,G,J),!E}),!!E}function Kr(c,m,E){var N=0,G=c==null?N:c.length;if(typeof m=="number"&&m===m&&G<=Ue){for(;N<G;){var J=N+G>>>1,he=c[J];he!==null&&!la(he)&&(E?he<=m:he<m)?N=J+1:G=J}return G}return nc(c,m,Do,E)}function nc(c,m,E,N){var G=0,J=c==null?0:c.length;if(J===0)return 0;m=E(m);for(var he=m!==m,ve=m===null,xe=la(m),nt=m===t;G<J;){var rt=ru((G+J)/2),dt=E(c[rt]),Lt=dt!==t,qt=dt===null,pn=dt===dt,Nn=la(dt);if(he)var dn=N||pn;else nt?dn=pn&&(N||Lt):ve?dn=pn&&Lt&&(N||!qt):xe?dn=pn&&Lt&&!qt&&(N||!Nn):qt||Nn?dn=!1:dn=N?dt<=m:dt<m;dn?G=rt+1:J=rt}return Ri(J,Se)}function Jh(c,m){for(var E=-1,N=c.length,G=0,J=[];++E<N;){var he=c[E],ve=m?m(he):he;if(!E||!Ca(ve,xe)){var xe=ve;J[G++]=he===0?0:he}}return J}function Qc(c){return typeof c=="number"?c:la(c)?se:+c}function ai(c){if(typeof c=="string")return c;if(Ln(c))return pr(c,ai)+"";if(la(c))return ma?ma.call(c):"";var m=c+"";return m=="0"&&1/c==-$e?"-0":m}function Ki(c,m,E){var N=-1,G=Ba,J=c.length,he=!0,ve=[],xe=ve;if(E)he=!1,G=yh;else if(J>=s){var nt=m?null:Ur(c);if(nt)return tu(nt);he=!1,G=xr,xe=new Ho}else xe=m?[]:ve;e:for(;++N<J;){var rt=c[N],dt=m?m(rt):rt;if(rt=E||rt!==0?rt:0,he&&dt===dt){for(var Lt=xe.length;Lt--;)if(xe[Lt]===dt)continue e;m&&xe.push(dt),ve.push(rt)}else G(xe,dt,E)||(xe!==ve&&xe.push(dt),ve.push(rt))}return ve}function Zc(c,m){return m=sa(m,c),c=Mp(c,m),c==null||delete c[wo(Ls(m))]}function yo(c,m,E,N){return _i(c,m,E(Cs(c,m)),N)}function gl(c,m,E,N){for(var G=c.length,J=N?G:-1;(N?J--:++J<G)&&m(c[J],J,c););return E?Ut(c,N?0:J,N?J+1:G):Ut(c,N?J+1:0,N?G:J)}function eh(c,m){var E=c;return E instanceof mn&&(E=E.value()),fd(m,function(N,G){return G.func.apply(G.thisArg,Zo([N],G.args))},E)}function Sc(c,m,E){var N=c.length;if(N<2)return N?Ki(c[0]):[];for(var G=-1,J=Pe(N);++G<N;)for(var he=c[G],ve=-1;++ve<N;)ve!=G&&(J[G]=Wo(J[G]||he,c[ve],m,E));return Ki(qr(J,1),m,E)}function rc(c,m,E){for(var N=-1,G=c.length,J=m.length,he={};++N<G;){var ve=N<J?m[N]:t;E(he,c[N],ve)}return he}function Oo(c){return Qr(c)?c:[]}function to(c){return typeof c=="function"?c:Do}function sa(c,m){return Ln(c)?c:Ea(c,m)?[c]:y0(or(c))}var Mh=fn;function bo(c,m,E){var N=c.length;return E=E===t?N:E,!m&&E>=N?c:Ut(c,m,E)}var Ru=Vh||function(c){return $r.clearTimeout(c)};function th(c,m){if(m)return c.slice();var E=c.length,N=Gh?Gh(E):new c.constructor(E);return c.copy(N),N}function wc(c){var m=new c.constructor(c.byteLength);return new Gc(m).set(new Gc(c)),m}function jo(c,m){var E=m?wc(c.buffer):c.buffer;return new c.constructor(E,c.byteOffset,c.byteLength)}function To(c){var m=new c.constructor(c.source,br.exec(c));return m.lastIndex=c.lastIndex,m}function ic(c){return Zi?_n(Zi.call(c)):{}}function Pl(c,m){var E=m?wc(c.buffer):c.buffer;return new c.constructor(E,c.byteOffset,c.length)}function So(c,m){if(c!==m){var E=c!==t,N=c===null,G=c===c,J=la(c),he=m!==t,ve=m===null,xe=m===m,nt=la(m);if(!ve&&!nt&&!J&&c>m||J&&he&&xe&&!ve&&!nt||N&&he&&xe||!E&&xe||!G)return 1;if(!N&&!J&&!nt&&c<m||nt&&E&&G&&!N&&!J||ve&&E&&G||!he&&G||!xe)return-1}return 0}function Bl(c,m,E){for(var N=-1,G=c.criteria,J=m.criteria,he=G.length,ve=E.length;++N<he;){var xe=So(G[N],J[N]);if(xe){if(N>=ve)return xe;var nt=E[N];return xe*(nt=="desc"?-1:1)}}return c.index-m.index}function Ka(c,m,E,N){for(var G=-1,J=c.length,he=E.length,ve=-1,xe=m.length,nt=ni(J-he,0),rt=Pe(xe+nt),dt=!N;++ve<xe;)rt[ve]=m[ve];for(;++G<he;)(dt||G<J)&&(rt[E[G]]=c[G]);for(;nt--;)rt[ve++]=c[G++];return rt}function cu(c,m,E,N){for(var G=-1,J=c.length,he=-1,ve=E.length,xe=-1,nt=m.length,rt=ni(J-ve,0),dt=Pe(rt+nt),Lt=!N;++G<rt;)dt[G]=c[G];for(var qt=G;++xe<nt;)dt[qt+xe]=m[xe];for(;++he<ve;)(Lt||G<J)&&(dt[qt+E[he]]=c[G++]);return dt}function ii(c,m){var E=-1,N=c.length;for(m||(m=Pe(N));++E<N;)m[E]=c[E];return m}function cs(c,m,E,N){var G=!E;E||(E={});for(var J=-1,he=m.length;++J<he;){var ve=m[J],xe=N?N(E[ve],c[ve],ve,E,c):t;xe===t&&(xe=c[ve]),G?Go(E,ve,xe):Io(E,ve,xe)}return E}function qh(c,m){return cs(c,mf(c),m)}function yd(c,m){return cs(c,Zh(c),m)}function Ta(c,m){return function(E,N){var G=Ln(E)?Ai:fl,J=m?m():{};return G(E,c,ln(N,2),J)}}function Sa(c){return fn(function(m,E){var N=-1,G=E.length,J=G>1?E[G-1]:t,he=G>2?E[2]:t;for(J=c.length>3&&typeof J=="function"?(G--,J):t,he&&Wr(E[0],E[1],he)&&(J=G<3?t:J,G=1),m=_n(m);++N<G;){var ve=E[N];ve&&c(m,ve,N,J)}return m})}function Qh(c,m){return function(E,N){if(E==null)return E;if(!Gi(E))return c(E,N);for(var G=E.length,J=m?G:-1,he=_n(E);(m?J--:++J<G)&&N(he[J],J,he)!==!1;);return E}}function Ec(c){return function(m,E,N){for(var G=-1,J=_n(m),he=N(m),ve=he.length;ve--;){var xe=he[c?ve:++G];if(E(J[xe],xe,J)===!1)break}return m}}function Gf(c,m,E){var N=m&A,G=v(c);function J(){var he=this&&this!==$r&&this instanceof J?G:c;return he.apply(N?E:this,arguments)}return J}function x(c){return function(m){m=or(m);var E=al(m)?Hr(m):t,N=E?E[0]:m.charAt(0),G=E?bo(E,1).join(""):m.slice(1);return N[c]()+G}}function d(c){return function(m){return fd(xb(V_(m).replace(Qi,"")),c,"")}}function v(c){return function(){var m=arguments;switch(m.length){case 0:return new c;case 1:return new c(m[0]);case 2:return new c(m[0],m[1]);case 3:return new c(m[0],m[1],m[2]);case 4:return new c(m[0],m[1],m[2],m[3]);case 5:return new c(m[0],m[1],m[2],m[3],m[4]);case 6:return new c(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new c(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var E=xs(c.prototype),N=c.apply(E,m);return si(N)?N:E}}function $(c,m,E){var N=v(c);function G(){for(var J=arguments.length,he=Pe(J),ve=J,xe=Ah(G);ve--;)he[ve]=arguments[ve];var nt=J<3&&he[0]!==xe&&he[J-1]!==xe?[]:Hs(he,xe);if(J-=nt.length,J<E)return Sn(c,m,W,G.placeholder,t,he,nt,t,t,E-J);var rt=this&&this!==$r&&this instanceof G?N:c;return Vn(rt,this,he)}return G}function I(c){return function(m,E,N){var G=_n(m);if(!Gi(m)){var J=ln(E,3);m=wi(m),E=function(ve){return J(G[ve],ve,G)}}var he=c(m,E,N);return he>-1?G[J?m[he]:he]:t}}function B(c){return zn(function(m){var E=m.length,N=E,G=Ir.prototype.thru;for(c&&m.reverse();N--;){var J=m[N];if(typeof J!="function")throw new Ti(l);if(G&&!he&&pf(J)=="wrapper")var he=new Ir([],!0)}for(N=he?N:E;++N<E;){J=m[N];var ve=pf(J),xe=ve=="wrapper"?Fl(J):t;xe&&Li(xe[0])&&xe[1]==(V|P|U|z)&&!xe[4].length&&xe[9]==1?he=he[pf(xe[0])].apply(he,xe[3]):he=J.length==1&&Li(J)?he[ve]():he.thru(J)}return function(){var nt=arguments,rt=nt[0];if(he&&nt.length==1&&Ln(rt))return he.plant(rt).value();for(var dt=0,Lt=E?m[dt].apply(this,nt):rt;++dt<E;)Lt=m[dt].call(this,Lt);return Lt}})}function W(c,m,E,N,G,J,he,ve,xe,nt){var rt=m&V,dt=m&A,Lt=m&k,qt=m&(P|D),pn=m&Z,Nn=Lt?t:v(c);function dn(){for(var Yn=arguments.length,er=Pe(Yn),ua=Yn;ua--;)er[ua]=arguments[ua];if(qt)var io=Ah(dn),Ds=xu(er,io);if(N&&(er=Ka(er,N,G,qt)),J&&(er=cu(er,J,he,qt)),Yn-=Ds,qt&&Yn<nt){var yi=Hs(er,io);return Sn(c,m,W,dn.placeholder,E,er,yi,ve,xe,nt-Yn)}var Gl=dt?E:this,Ic=Lt?Gl[c]:c;return Yn=er.length,ve?er=_l(er,ve):pn&&Yn>1&&er.reverse(),rt&&xe<Yn&&(er.length=xe),this&&this!==$r&&this instanceof dn&&(Ic=Nn||v(Ic)),Ic.apply(Gl,er)}return dn}function pe(c,m){return function(E,N){return Xi(E,c,m(N),{})}}function Oe(c,m){return function(E,N){var G;if(E===t&&N===t)return m;if(E!==t&&(G=E),N!==t){if(G===t)return N;typeof E=="string"||typeof N=="string"?(E=ai(E),N=ai(N)):(E=Qc(E),N=Qc(N)),G=c(E,N)}return G}}function tt(c){return zn(function(m){return m=pr(m,Yr(ln())),fn(function(E){var N=this;return c(m,function(G){return Vn(G,N,E)})})})}function xt(c,m){m=m===t?" ":ai(m);var E=m.length;if(E<2)return E?js(m,c):m;var N=js(m,Xu(c/is(m)));return al(m)?bo(Hr(N),0,c).join(""):N.slice(0,c)}function Zt(c,m,E,N){var G=m&A,J=v(c);function he(){for(var ve=-1,xe=arguments.length,nt=-1,rt=N.length,dt=Pe(rt+xe),Lt=this&&this!==$r&&this instanceof he?J:c;++nt<rt;)dt[nt]=N[nt];for(;xe--;)dt[nt++]=arguments[++ve];return Vn(Lt,G?E:this,dt)}return he}function cn(c){return function(m,E,N){return N&&typeof N!="number"&&Wr(m,E,N)&&(E=N=t),m=Ac(m),E===t?(E=m,m=0):E=Ac(E),N=N===t?m<E?1:-1:Ac(N),Xa(m,E,N,c)}}function Tn(c){return function(m,E){return typeof m=="string"&&typeof E=="string"||(m=Ji(m),E=Ji(E)),c(m,E)}}function Sn(c,m,E,N,G,J,he,ve,xe,nt){var rt=m&P,dt=rt?he:t,Lt=rt?t:he,qt=rt?J:t,pn=rt?t:J;m|=rt?U:H,m&=~(rt?H:U),m&O||(m&=~(A|k));var Nn=[c,m,G,qt,dt,pn,Lt,ve,xe,nt],dn=E.apply(t,Nn);return Li(c)&&Pd(dn,Nn),dn.placeholder=N,rh(dn,c,m)}function gn(c){var m=Jn[c];return function(E,N){if(E=Ji(E),N=N==null?0:Ri(An(N),292),N&&Il(E)){var G=(or(E)+"e").split("e"),J=m(G[0]+"e"+(+G[1]+N));return G=(or(J)+"e").split("e"),+(G[0]+"e"+(+G[1]-N))}return m(E)}}var Ur=ul&&1/tu(new ul([,-0]))[1]==$e?function(c){return new ul(c)}:H0;function Et(c){return function(m){var E=hs(m);return E==it?ju(m):E==gt?Uh(m):Zl(m,c(m))}}function Ce(c,m,E,N,G,J,he,ve){var xe=m&k;if(!xe&&typeof c!="function")throw new Ti(l);var nt=N?N.length:0;if(nt||(m&=~(U|H),N=G=t),he=he===t?he:ni(An(he),0),ve=ve===t?ve:An(ve),nt-=G?G.length:0,m&H){var rt=N,dt=G;N=G=t}var Lt=xe?t:Fl(c),qt=[c,m,E,N,G,rt,dt,J,he,ve];if(Lt&&Cp(qt,Lt),c=qt[0],m=qt[1],E=qt[2],N=qt[3],G=qt[4],ve=qt[9]=qt[9]===t?xe?0:c.length:ni(qt[9]-nt,0),!ve&&m&(P|D)&&(m&=~(P|D)),!m||m==A)var pn=Gf(c,m,E);else m==P||m==D?pn=$(c,m,ve):(m==U||m==(A|U))&&!G.length?pn=Zt(c,m,E,N):pn=W.apply(t,qt);var Nn=Lt?Ms:Pd;return rh(Nn(pn,qt),c,m)}function Ne(c,m,E,N){return c===t||Ca(c,zi[E])&&!qn.call(N,E)?m:c}function ot(c,m,E,N,G,J){return si(c)&&si(m)&&(J.set(m,c),_o(c,m,t,ot,J),J.delete(m)),c}function jt(c){return Vr(c)?t:c}function on(c,m,E,N,G,J){var he=E&C,ve=c.length,xe=m.length;if(ve!=xe&&!(he&&xe>ve))return!1;var nt=J.get(c),rt=J.get(m);if(nt&&rt)return nt==m&&rt==c;var dt=-1,Lt=!0,qt=E&M?new Ho:t;for(J.set(c,m),J.set(m,c);++dt<ve;){var pn=c[dt],Nn=m[dt];if(N)var dn=he?N(Nn,pn,dt,m,c,J):N(pn,Nn,dt,c,m,J);if(dn!==t){if(dn)continue;Lt=!1;break}if(qt){if(!Fc(m,function(Yn,er){if(!xr(qt,er)&&(pn===Yn||G(pn,Yn,E,N,J)))return qt.push(er)})){Lt=!1;break}}else if(!(pn===Nn||G(pn,Nn,E,N,J))){Lt=!1;break}}return J.delete(c),J.delete(m),Lt}function xn(c,m,E,N,G,J,he){switch(E){case Ke:if(c.byteLength!=m.byteLength||c.byteOffset!=m.byteOffset)return!1;c=c.buffer,m=m.buffer;case wt:return!(c.byteLength!=m.byteLength||!J(new Gc(c),new Gc(m)));case et:case ft:case st:return Ca(+c,+m);case Ge:return c.name==m.name&&c.message==m.message;case Ct:case Ee:return c==m+"";case it:var ve=ju;case gt:var xe=N&C;if(ve||(ve=tu),c.size!=m.size&&!xe)return!1;var nt=he.get(c);if(nt)return nt==m;N|=M,he.set(c,m);var rt=on(ve(c),ve(m),N,G,J,he);return he.delete(c),rt;case re:if(Zi)return Zi.call(c)==Zi.call(m)}return!1}function On(c,m,E,N,G,J){var he=E&C,ve=fr(c),xe=ve.length,nt=fr(m),rt=nt.length;if(xe!=rt&&!he)return!1;for(var dt=xe;dt--;){var Lt=ve[dt];if(!(he?Lt in m:qn.call(m,Lt)))return!1}var qt=J.get(c),pn=J.get(m);if(qt&&pn)return qt==m&&pn==c;var Nn=!0;J.set(c,m),J.set(m,c);for(var dn=he;++dt<xe;){Lt=ve[dt];var Yn=c[Lt],er=m[Lt];if(N)var ua=he?N(er,Yn,Lt,m,c,J):N(Yn,er,Lt,c,m,J);if(!(ua===t?Yn===er||G(Yn,er,E,N,J):ua)){Nn=!1;break}dn||(dn=Lt=="constructor")}if(Nn&&!dn){var io=c.constructor,Ds=m.constructor;io!=Ds&&"constructor"in c&&"constructor"in m&&!(typeof io=="function"&&io instanceof io&&typeof Ds=="function"&&Ds instanceof Ds)&&(Nn=!1)}return J.delete(c),J.delete(m),Nn}function zn(c){return Bd(rm(c,t,vf),c+"")}function fr(c){return Jc(c,wi,mf)}function Rr(c){return Jc(c,rs,Zh)}var Fl=Vc?function(c){return Vc.get(c)}:H0;function pf(c){for(var m=c.name+"",E=Ol[m],N=qn.call(Ol,m)?E.length:0;N--;){var G=E[N],J=G.func;if(J==null||J==c)return G.name}return m}function Ah(c){var m=qn.call(X,"placeholder")?X:c;return m.placeholder}function ln(){var c=X.iteratee||qi;return c=c===qi?eo:c,arguments.length?c(arguments[0],arguments[1]):c}function nh(c,m){var E=c.__data__;return Ye(m)?E[typeof m=="string"?"string":"hash"]:E.map}function tm(c){for(var m=wi(c),E=m.length;E--;){var N=m[E],G=c[N];m[E]=[N,G,$p(G)]}return m}function wa(c,m){var E=Vu(c,m);return lu(E)?E:t}function vl(c){var m=qn.call(c,po),E=c[po];try{c[po]=t;var N=!0}catch{}var G=Gs.call(c);return N&&(m?c[po]=E:delete c[po]),G}var mf=Wc?function(c){return c==null?[]:(c=_n(c),ji(Wc(c),function(m){return gc.call(c,m)}))}:G0,Zh=Wc?function(c){for(var m=[];c;)Zo(m,mf(c)),c=Ga(c);return m}:G0,hs=vi;(Ku&&hs(new Ku(new ArrayBuffer(1)))!=Ke||Ju&&hs(new Ju)!=it||wh&&hs(wh.resolve())!=vt||ul&&hs(new ul)!=gt||na&&hs(new na)!=mt)&&(hs=function(c){var m=vi(c),E=m==kt?c.constructor:t,N=E?qa(E):"";if(N)switch(N){case jc:return Ke;case vc:return it;case kd:return vt;case Wa:return gt;case Xr:return mt}return m});function vn(c,m,E){for(var N=-1,G=E.length;++N<G;){var J=E[N],he=J.size;switch(J.type){case"drop":c+=he;break;case"dropRight":m-=he;break;case"take":m=Ri(m,c+he);break;case"takeRight":c=ni(c,m-he);break}}return{start:c,end:m}}function _0(c){var m=c.match(_t);return m?m[1].split(Ot):[]}function Rg(c,m,E){m=sa(m,c);for(var N=-1,G=m.length,J=!1;++N<G;){var he=wo(m[N]);if(!(J=c!=null&&E(c,he)))break;c=c[he]}return J||++N!=G?J:(G=c==null?0:c.length,!!G&&Ih(G)&&Ja(he,G)&&(Ln(c)||Yd(c)))}function qm(c){var m=c.length,E=new c.constructor(m);return m&&typeof c[0]=="string"&&qn.call(c,"index")&&(E.index=c.index,E.input=c.input),E}function xc(c){return typeof c.constructor=="function"&&!$c(c)?xs(Ga(c)):{}}function no(c,m,E){var N=c.constructor;switch(m){case wt:return wc(c);case et:case ft:return new N(+c);case Ke:return jo(c,E);case Qe:case Le:case Q:case te:case me:case Re:case Fe:case bt:case ze:return Pl(c,E);case it:return new N;case st:case Ee:return new N(c);case Ct:return To(c);case gt:return new N;case re:return ic(c)}}function Wf(c,m){var E=m.length;if(!E)return c;var N=E-1;return m[N]=(E>1?"& ":"")+m[N],m=m.join(E>2?", ":" "),c.replace(De,`{
/* [wrapped with `+m+`] */
`)}function Dd(c){return Ln(c)||Yd(c)||!!(md&&c&&c[md])}function Ja(c,m){var E=typeof c;return m=m??K,!!m&&(E=="number"||E!="symbol"&&Ss.test(c))&&c>-1&&c%1==0&&c<m}function Wr(c,m,E){if(!si(E))return!1;var N=typeof m;return(N=="number"?Gi(E)&&Ja(m,E.length):N=="string"&&m in E)?Ca(E[m],c):!1}function Ea(c,m){if(Ln(c))return!1;var E=typeof c;return E=="number"||E=="symbol"||E=="boolean"||c==null||la(c)?!0:Te.test(c)||!ne.test(c)||m!=null&&c in _n(m)}function Ye(c){var m=typeof c;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?c!=="__proto__":c===null}function Li(c){var m=pf(c),E=X[m];if(typeof E!="function"||!(m in mn.prototype))return!1;if(c===E)return!0;var N=Fl(E);return!!N&&c===N[0]}function ro(c){return!!Qs&&Qs in c}var Cv=_s?Mc:Em;function $c(c){var m=c&&c.constructor,E=typeof m=="function"&&m.prototype||zi;return c===E}function $p(c){return c===c&&!si(c)}function nm(c,m){return function(E){return E==null?!1:E[c]===m&&(m!==t||c in _n(E))}}function Mv(c){var m=pt(c,function(N){return E.size===f&&E.clear(),N}),E=m.cache;return m}function Cp(c,m){var E=c[1],N=m[1],G=E|N,J=G<(A|k|V),he=N==V&&E==P||N==V&&E==z&&c[7].length<=m[8]||N==(V|z)&&m[7].length<=m[8]&&E==P;if(!(J||he))return c;N&A&&(c[2]=m[2],G|=E&A?0:O);var ve=m[3];if(ve){var xe=c[3];c[3]=xe?Ka(xe,ve,m[4]):ve,c[4]=xe?Hs(c[3],g):m[4]}return ve=m[5],ve&&(xe=c[5],c[5]=xe?cu(xe,ve,m[6]):ve,c[6]=xe?Hs(c[5],g):m[6]),ve=m[7],ve&&(c[7]=ve),N&V&&(c[8]=c[8]==null?m[8]:Ri(c[8],m[8])),c[9]==null&&(c[9]=m[9]),c[0]=m[0],c[1]=G,c}function xa(c){var m=[];if(c!=null)for(var E in _n(c))m.push(E);return m}function kg(c){return Gs.call(c)}function rm(c,m,E){return m=ni(m===t?c.length-1:m,0),function(){for(var N=arguments,G=-1,J=ni(N.length-m,0),he=Pe(J);++G<J;)he[G]=N[m+G];G=-1;for(var ve=Pe(m+1);++G<m;)ve[G]=N[G];return ve[m]=E(he),Vn(c,this,ve)}}function Mp(c,m){return m.length<2?c:Cs(c,Ut(m,0,-1))}function _l(c,m){for(var E=c.length,N=Ri(m.length,E),G=ii(c);N--;){var J=m[N];c[N]=Ja(J,E)?G[J]:t}return c}function hu(c,m){if(!(m==="constructor"&&typeof c[m]=="function")&&m!="__proto__")return c[m]}var Pd=Og(Ms),gf=gd||function(c,m){return $r.setTimeout(c,m)},Bd=Og(uu);function rh(c,m,E){var N=m+"";return Bd(c,Wf(N,im(_0(N),E)))}function Og(c){var m=0,E=0;return function(){var N=Ep(),G=ae-(N-E);if(E=N,G>0){if(++m>=q)return arguments[0]}else m=0;return c.apply(t,arguments)}}function mr(c,m){var E=-1,N=c.length,G=N-1;for(m=m===t?N:m;++E<m;){var J=Os(E,G),he=c[J];c[J]=c[E],c[E]=he}return c.length=m,c}var y0=Mv(function(c){var m=[];return c.charCodeAt(0)===46&&m.push(""),c.replace(je,function(E,N,G,J){m.push(G?J.replace(Wn,"$1"):N||E)}),m});function wo(c){if(typeof c=="string"||la(c))return c;var m=c+"";return m=="0"&&1/c==-$e?"-0":m}function qa(c){if(c!=null){try{return Cu.call(c)}catch{}try{return c+""}catch{}}return""}function im(c,m){return Jr(ke,function(E){var N="_."+E[0];m&E[1]&&!Ba(c,N)&&c.push(N)}),c.sort()}function Fd(c){if(c instanceof mn)return c.clone();var m=new Ir(c.__wrapped__,c.__chain__);return m.__actions__=ii(c.__actions__),m.__index__=c.__index__,m.__values__=c.__values__,m}function sm(c,m,E){(E?Wr(c,m,E):m===t)?m=1:m=ni(An(m),0);var N=c==null?0:c.length;if(!N||m<1)return[];for(var G=0,J=0,he=Pe(Xu(N/m));G<N;)he[J++]=Ut(c,G,G+=m);return he}function ku(c){for(var m=-1,E=c==null?0:c.length,N=0,G=[];++m<E;){var J=c[m];J&&(G[N++]=J)}return G}function b0(){var c=arguments.length;if(!c)return[];for(var m=Pe(c-1),E=arguments[0],N=c;N--;)m[N-1]=arguments[N];return Zo(Ln(E)?ii(E):[E],qr(m,1))}var Yo=fn(function(c,m){return Qr(c)?Wo(c,qr(m,1,Qr,!0)):[]}),ns=fn(function(c,m){var E=Ls(m);return Qr(E)&&(E=t),Qr(c)?Wo(c,qr(m,1,Qr,!0),ln(E,2)):[]}),du=fn(function(c,m){var E=Ls(m);return Qr(E)&&(E=t),Qr(c)?Wo(c,qr(m,1,Qr,!0),t,E):[]});function yl(c,m,E){var N=c==null?0:c.length;return N?(m=E||m===t?1:An(m),Ut(c,m<0?0:m,N)):[]}function Ou(c,m,E){var N=c==null?0:c.length;return N?(m=E||m===t?1:An(m),m=N-m,Ut(c,0,m<0?0:m)):[]}function fu(c,m){return c&&c.length?gl(c,ln(m,3),!0,!0):[]}function Ap(c,m){return c&&c.length?gl(c,ln(m,3),!0):[]}function zl(c,m,E,N){var G=c==null?0:c.length;return G?(E&&typeof E!="number"&&Wr(c,m,E)&&(E=0,N=G),vd(c,m,E,N)):[]}function zd(c,m,E){var N=c==null?0:c.length;if(!N)return-1;var G=E==null?0:An(E);return G<0&&(G=ni(N+G,0)),ql(c,ln(m,3),G)}function Ud(c,m,E){var N=c==null?0:c.length;if(!N)return-1;var G=N-1;return E!==t&&(G=An(E),G=E<0?ni(N+G,0):Ri(G,N-1)),ql(c,ln(m,3),G,!0)}function vf(c){var m=c==null?0:c.length;return m?qr(c,1):[]}function Lg(c){var m=c==null?0:c.length;return m?qr(c,$e):[]}function om(c,m){var E=c==null?0:c.length;return E?(m=m===t?1:An(m),qr(c,m)):[]}function ih(c){for(var m=-1,E=c==null?0:c.length,N={};++m<E;){var G=c[m];N[G[0]]=G[1]}return N}function bl(c){return c&&c.length?c[0]:t}function sh(c,m,E){var N=c==null?0:c.length;if(!N)return-1;var G=E==null?0:An(E);return G<0&&(G=ni(N+G,0)),ks(c,m,G)}function Hd(c){var m=c==null?0:c.length;return m?Ut(c,0,-1):[]}var Qm=fn(function(c){var m=pr(c,Oo);return m.length&&m[0]===c[0]?ia(m):[]}),Zm=fn(function(c){var m=Ls(c),E=pr(c,Oo);return m===Ls(E)?m=t:E.pop(),E.length&&E[0]===c[0]?ia(E,ln(m,2)):[]}),Eo=fn(function(c){var m=Ls(c),E=pr(c,Oo);return m=typeof m=="function"?m:t,m&&E.pop(),E.length&&E[0]===c[0]?ia(E,t,m):[]});function am(c,m){return c==null?"":Rd.call(c,m)}function Ls(c){var m=c==null?0:c.length;return m?c[m-1]:t}function Ul(c,m,E){var N=c==null?0:c.length;if(!N)return-1;var G=N;return E!==t&&(G=An(E),G=G<0?ni(N+G,0):Ri(G,N-1)),m===m?Hc(c,m,G):ql(c,bh,G,!0)}function Ip(c,m){return c&&c.length?Vo(c,An(m)):t}var Ng=fn(Gd);function Gd(c,m){return c&&c.length&&m&&m.length?Br(c,m):c}function eg(c,m,E){return c&&c.length&&m&&m.length?Br(c,m,ln(E,2)):c}function Cc(c,m,E){return c&&c.length&&m&&m.length?Br(c,m,t,E):c}var Wd=zn(function(c,m){var E=c==null?0:c.length,N=Xh(c,m);return bs(c,pr(m,function(G){return Ja(G,E)?+G:G}).sort(So)),N});function oa(c,m){var E=[];if(!(c&&c.length))return E;var N=-1,G=[],J=c.length;for(m=ln(m,3);++N<J;){var he=c[N];m(he,N,c)&&(E.push(he),G.push(N))}return bs(c,G),E}function $a(c){return c==null?c:iu.call(c)}function Av(c,m,E){var N=c==null?0:c.length;return N?(E&&typeof E!="number"&&Wr(c,m,E)?(m=0,E=N):(m=m==null?0:An(m),E=E===t?N:An(E)),Ut(c,m,E)):[]}function lm(c,m){return Kr(c,m)}function T0(c,m,E){return nc(c,m,ln(E,2))}function L_(c,m){var E=c==null?0:c.length;if(E){var N=Kr(c,m);if(N<E&&Ca(c[N],m))return N}return-1}function Vf(c,m){return Kr(c,m,!0)}function Rp(c,m,E){return nc(c,m,ln(E,2),!0)}function S0(c,m){var E=c==null?0:c.length;if(E){var N=Kr(c,m,!0)-1;if(Ca(c[N],m))return N}return-1}function kp(c){return c&&c.length?Jh(c):[]}function w0(c,m){return c&&c.length?Jh(c,ln(m,2)):[]}function um(c){var m=c==null?0:c.length;return m?Ut(c,1,m):[]}function E0(c,m,E){return c&&c.length?(m=E||m===t?1:An(m),Ut(c,0,m<0?0:m)):[]}function Iv(c,m,E){var N=c==null?0:c.length;return N?(m=E||m===t?1:An(m),m=N-m,Ut(c,m<0?0:m,N)):[]}function cm(c,m){return c&&c.length?gl(c,ln(m,3),!1,!0):[]}function _f(c,m){return c&&c.length?gl(c,ln(m,3)):[]}var Rv=fn(function(c){return Ki(qr(c,1,Qr,!0))}),ob=fn(function(c){var m=Ls(c);return Qr(m)&&(m=t),Ki(qr(c,1,Qr,!0),ln(m,2))}),x0=fn(function(c){var m=Ls(c);return m=typeof m=="function"?m:t,Ki(qr(c,1,Qr,!0),t,m)});function $0(c){return c&&c.length?Ki(c):[]}function jf(c,m){return c&&c.length?Ki(c,ln(m,2)):[]}function Un(c,m){return m=typeof m=="function"?m:t,c&&c.length?Ki(c,t,m):[]}function oh(c){if(!(c&&c.length))return[];var m=0;return c=ji(c,function(E){if(Qr(E))return m=ni(E.length,m),!0}),Ql(m,function(E){return pr(c,ci(E))})}function Op(c,m){if(!(c&&c.length))return[];var E=oh(c);return m==null?E:pr(E,function(N){return Vn(m,t,N)})}var aa=fn(function(c,m){return Qr(c)?Wo(c,m):[]}),kv=fn(function(c){return Sc(ji(c,Qr))}),C0=fn(function(c){var m=Ls(c);return Qr(m)&&(m=t),Sc(ji(c,Qr),ln(m,2))}),hm=fn(function(c){var m=Ls(c);return m=typeof m=="function"?m:t,Sc(ji(c,Qr),t,m)}),ab=fn(oh);function N_(c,m){return rc(c||[],m||[],Io)}function ah(c,m){return rc(c||[],m||[],_i)}var xo=fn(function(c){var m=c.length,E=m>1?c[m-1]:t;return E=typeof E=="function"?(c.pop(),E):t,Op(c,E)});function Lu(c){var m=X(c);return m.__chain__=!0,m}function Dg(c,m){return m(c),c}function Yf(c,m){return m(c)}var ed=zn(function(c){var m=c.length,E=m?c[0]:0,N=this.__wrapped__,G=function(J){return Xh(J,c)};return m>1||this.__actions__.length||!(N instanceof mn)||!Ja(E)?this.thru(G):(N=N.slice(E,+E+(m?1:0)),N.__actions__.push({func:Yf,args:[G],thisArg:t}),new Ir(N,this.__chain__).thru(function(J){return m&&!J.length&&J.push(t),J}))});function dm(){return Lu(this)}function Xf(){return new Ir(this.value(),this.__chain__)}function Kf(){this.__values__===t&&(this.__values__=H_(this.value()));var c=this.__index__>=this.__values__.length,m=c?t:this.__values__[this.__index__++];return{done:c,value:m}}function Lp(){return this}function bd(c){for(var m,E=this;E instanceof ga;){var N=Fd(E);N.__index__=0,N.__values__=t,m?G.__wrapped__=N:m=N;var G=N;E=E.__wrapped__}return G.__wrapped__=c,m}function yf(){var c=this.__wrapped__;if(c instanceof mn){var m=c;return this.__actions__.length&&(m=new mn(this)),m=m.reverse(),m.__actions__.push({func:Yf,args:[$a],thisArg:t}),new Ir(m,this.__chain__)}return this.thru($a)}function tg(){return eh(this.__wrapped__,this.__actions__)}var D_=Ta(function(c,m,E){qn.call(c,E)?++c[E]:Go(c,E,1)});function Pg(c,m,E){var N=Ln(c)?Eu:Mu;return E&&Wr(c,m,E)&&(m=t),N(c,ln(m,3))}function Vd(c,m){var E=Ln(c)?ji:yc;return E(c,ln(m,3))}var Ni=I(zd),fm=I(Ud);function ng(c,m){return qr(Si(c,m),1)}function Bg(c,m){return qr(Si(c,m),$e)}function P_(c,m,E){return E=E===t?1:An(E),qr(Si(c,m),E)}function rg(c,m){var E=Ln(c)?Jr:Ro;return E(c,ln(m,3))}function Np(c,m){var E=Ln(c)?dd:df;return E(c,ln(m,3))}var ig=Ta(function(c,m,E){qn.call(c,E)?c[E].push(m):Go(c,E,[m])});function Jf(c,m,E,N){c=Gi(c)?c:Tf(c),E=E&&!N?An(E):0;var G=c.length;return E<0&&(E=ni(G+E,0)),ym(c)?E<=G&&c.indexOf(m,E)>-1:!!G&&ks(c,m,E)>-1}var qf=fn(function(c,m,E){var N=-1,G=typeof m=="function",J=Gi(c)?Pe(c.length):[];return Ro(c,function(he){J[++N]=G?Vn(m,he,E):Pn(he,m,E)}),J}),pm=Ta(function(c,m,E){Go(c,E,m)});function Si(c,m){var E=Ln(c)?pr:Au;return E(c,ln(m,3))}function Qf(c,m,E,N){return c==null?[]:(Ln(m)||(m=m==null?[]:[m]),E=N?t:E,Ln(E)||(E=E==null?[]:[E]),ec(c,m,E))}var mm=Ta(function(c,m,E){c[E?0:1].push(m)},function(){return[[],[]]});function gm(c,m,E){var N=Ln(c)?fd:co,G=arguments.length<3;return N(c,ln(m,4),E,G,Ro)}function Dp(c,m,E){var N=Ln(c)?lf:co,G=arguments.length<3;return N(c,ln(m,4),E,G,df)}function Fg(c,m){var E=Ln(c)?ji:yc;return E(c,$t(ln(m,3)))}function _(c){var m=Ln(c)?dl:qc;return m(c)}function T(c,m,E){(E?Wr(c,m,E):m===t)?m=1:m=An(m);var N=Ln(c)?_c:En;return N(c,m)}function R(c){var m=Ln(c)?xp:Dl;return m(c)}function F(c){if(c==null)return 0;if(Gi(c))return ym(c)?is(c):c.length;var m=hs(c);return m==it||m==gt?c.size:go(c).length}function Y(c,m,E){var N=Ln(c)?Fc:ml;return E&&Wr(c,m,E)&&(m=t),N(c,ln(m,3))}var ee=fn(function(c,m){if(c==null)return[];var E=m.length;return E>1&&Wr(c,m[0],m[1])?m=[]:E>2&&Wr(m[0],m[1],m[2])&&(m=[m[0]]),ec(c,qr(m,1),[])}),be=Ui||function(){return $r.Date.now()};function Je(c,m){if(typeof m!="function")throw new Ti(l);return c=An(c),function(){if(--c<1)return m.apply(this,arguments)}}function ut(c,m,E){return m=E?t:m,m=c&&m==null?c.length:m,Ce(c,V,t,t,t,t,m)}function Dt(c,m){var E;if(typeof m!="function")throw new Ti(l);return c=An(c),function(){return--c>0&&(E=m.apply(this,arguments)),c<=1&&(m=t),E}}var en=fn(function(c,m,E){var N=A;if(E.length){var G=Hs(E,Ah(en));N|=U}return Ce(c,N,m,E,G)}),hn=fn(function(c,m,E){var N=A|k;if(E.length){var G=Hs(E,Ah(hn));N|=U}return Ce(m,N,c,E,G)});function an(c,m,E){m=E?t:m;var N=Ce(c,P,t,t,t,t,t,m);return N.placeholder=an.placeholder,N}function Dn(c,m,E){m=E?t:m;var N=Ce(c,D,t,t,t,t,t,m);return N.placeholder=Dn.placeholder,N}function Zn(c,m,E){var N,G,J,he,ve,xe,nt=0,rt=!1,dt=!1,Lt=!0;if(typeof c!="function")throw new Ti(l);m=Ji(m)||0,si(E)&&(rt=!!E.leading,dt="maxWait"in E,J=dt?ni(Ji(E.maxWait)||0,m):J,Lt="trailing"in E?!!E.trailing:Lt);function qt(yi){var Gl=N,Ic=G;return N=G=t,nt=yi,he=c.apply(Ic,Gl),he}function pn(yi){return nt=yi,ve=gf(Yn,m),rt?qt(yi):he}function Nn(yi){var Gl=yi-xe,Ic=yi-nt,q_=m-Gl;return dt?Ri(q_,J-Ic):q_}function dn(yi){var Gl=yi-xe,Ic=yi-nt;return xe===t||Gl>=m||Gl<0||dt&&Ic>=J}function Yn(){var yi=be();if(dn(yi))return er(yi);ve=gf(Yn,Nn(yi))}function er(yi){return ve=t,Lt&&N?qt(yi):(N=G=t,he)}function ua(){ve!==t&&Ru(ve),nt=0,N=xe=G=ve=t}function io(){return ve===t?he:er(be())}function Ds(){var yi=be(),Gl=dn(yi);if(N=arguments,G=this,xe=yi,Gl){if(ve===t)return pn(xe);if(dt)return Ru(ve),ve=gf(Yn,m),qt(xe)}return ve===t&&(ve=gf(Yn,m)),he}return Ds.cancel=ua,Ds.flush=io,Ds}var sr=fn(function(c,m){return Kh(c,1,m)}),Lo=fn(function(c,m,E){return Kh(c,Ji(m)||0,E)});function At(c){return Ce(c,Z)}function pt(c,m){if(typeof c!="function"||m!=null&&typeof m!="function")throw new Ti(l);var E=function(){var N=arguments,G=m?m.apply(this,N):N[0],J=E.cache;if(J.has(G))return J.get(G);var he=c.apply(this,N);return E.cache=J.set(G,he)||J,he};return E.cache=new(pt.Cache||Ws),E}pt.Cache=Ws;function $t(c){if(typeof c!="function")throw new Ti(l);return function(){var m=arguments;switch(m.length){case 0:return!c.call(this);case 1:return!c.call(this,m[0]);case 2:return!c.call(this,m[0],m[1]);case 3:return!c.call(this,m[0],m[1],m[2])}return!c.apply(this,m)}}function wn(c){return Dt(2,c)}var hr=Mh(function(c,m){m=m.length==1&&Ln(m[0])?pr(m[0],Yr(ln())):pr(qr(m,1),Yr(ln()));var E=m.length;return fn(function(N){for(var G=-1,J=Ri(N.length,E);++G<J;)N[G]=m[G].call(this,N[G]);return Vn(c,this,N)})}),rr=fn(function(c,m){var E=Hs(m,Ah(rr));return Ce(c,U,t,m,E)}),gr=fn(function(c,m){var E=Hs(m,Ah(gr));return Ce(c,H,t,m,E)}),Fr=zn(function(c,m){return Ce(c,z,t,t,t,m)});function Hl(c,m){if(typeof c!="function")throw new Ti(l);return m=m===t?m:An(m),fn(c,m)}function ds(c,m){if(typeof c!="function")throw new Ti(l);return m=m==null?0:ni(An(m),0),fn(function(E){var N=E[m],G=bo(E,0,m);return N&&Zo(G,N),Vn(c,this,G)})}function Zf(c,m,E){var N=!0,G=!0;if(typeof c!="function")throw new Ti(l);return si(E)&&(N="leading"in E?!!E.leading:N,G="trailing"in E?!!E.trailing:G),Zn(c,m,{leading:N,maxWait:m,trailing:G})}function M0(c){return ut(c,1)}function Nu(c,m){return rr(to(m),c)}function jd(){if(!arguments.length)return[];var c=arguments[0];return Ln(c)?c:[c]}function _T(c){return Oi(c,S)}function wE(c,m){return m=typeof m=="function"?m:t,Oi(c,S,m)}function EE(c){return Oi(c,y|S)}function vm(c,m){return m=typeof m=="function"?m:t,Oi(c,y|S,m)}function lb(c,m){return m==null||Kc(c,m,wi(m))}function Ca(c,m){return c===m||c!==c&&m!==m}var yT=Tn(Ya),zg=Tn(function(c,m){return c>=m}),Yd=nr(function(){return arguments}())?nr:function(c){return di(c)&&qn.call(c,"callee")&&!gc.call(c,"callee")},Ln=Pe.isArray,B_=Su?Yr(Su):zr;function Gi(c){return c!=null&&Ih(c.length)&&!Mc(c)}function Qr(c){return di(c)&&Gi(c)}function ub(c){return c===!0||c===!1||di(c)&&vi(c)==et}var lh=Id||Em,bT=Ao?Yr(Ao):ri;function bf(c){return di(c)&&c.nodeType===1&&!Vr(c)}function Ov(c){if(c==null)return!0;if(Gi(c)&&(Ln(c)||typeof c=="string"||typeof c.splice=="function"||lh(c)||Jd(c)||Yd(c)))return!c.length;var m=hs(c);if(m==it||m==gt)return!c.size;if($c(c))return!go(c).length;for(var E in c)if(qn.call(c,E))return!1;return!0}function Wi(c,m){return Zr(c,m)}function No(c,m,E){E=typeof E=="function"?E:t;var N=E?E(c,m):t;return N===t?Zr(c,m,t,E):!!N}function A0(c){if(!di(c))return!1;var m=vi(c);return m==Ge||m==at||typeof c.message=="string"&&typeof c.name=="string"&&!Vr(c)}function F_(c){return typeof c=="number"&&Il(c)}function Mc(c){if(!si(c))return!1;var m=vi(c);return m==Ie||m==He||m==Ze||m==Mt}function I0(c){return typeof c=="number"&&c==An(c)}function Ih(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=K}function si(c){var m=typeof c;return c!=null&&(m=="object"||m=="function")}function di(c){return c!=null&&typeof c=="object"}var td=wu?Yr(wu):us;function As(c,m){return c===m||ts(c,m,tm(m))}function _m(c,m,E){return E=typeof E=="function"?E:t,ts(c,m,tm(m),E)}function z_(c){return Xd(c)&&c!=+c}function U_(c){if(Cv(c))throw new sn(o);return lu(c)}function R0(c){return c===null}function xE(c){return c==null}function Xd(c){return typeof c=="number"||di(c)&&vi(c)==st}function Vr(c){if(!di(c)||vi(c)!=kt)return!1;var m=Ga(c);if(m===null)return!0;var E=qn.call(m,"constructor")&&m.constructor;return typeof E=="function"&&E instanceof E&&Cu.call(E)==Ha}var Kd=ol?Yr(ol):Qu;function Qa(c){return I0(c)&&c>=-K&&c<=K}var Lv=Fi?Yr(Fi):Tc;function ym(c){return typeof c=="string"||!Ln(c)&&di(c)&&vi(c)==Ee}function la(c){return typeof c=="symbol"||di(c)&&vi(c)==re}var Jd=Mi?Yr(Mi):Zu;function TT(c){return c===t}function ST(c){return di(c)&&hs(c)==mt}function nd(c){return di(c)&&vi(c)==yt}var cb=Tn(ba),ep=Tn(function(c,m){return c<=m});function H_(c){if(!c)return[];if(Gi(c))return ym(c)?Hr(c):ii(c);if(ta&&c[ta])return zh(c[ta]());var m=hs(c),E=m==it?ju:m==gt?tu:Tf;return E(c)}function Ac(c){if(!c)return c===0?c:0;if(c=Ji(c),c===$e||c===-$e){var m=c<0?-1:1;return m*ie}return c===c?c:0}function An(c){var m=Ac(c),E=m%1;return m===m?E?m-E:m:0}function k0(c){return c?Va(An(c),0,fe):0}function Ji(c){if(typeof c=="number")return c;if(la(c))return se;if(si(c)){var m=typeof c.valueOf=="function"?c.valueOf():c;c=si(m)?m+"":m}if(typeof c!="string")return c===0?c:+c;c=Fh(c);var E=Ei.test(c);return E||Ar.test(c)?Pa(c.slice(2),E?2:8):Or.test(c)?se:+c}function hb(c){return cs(c,rs(c))}function ht(c){return c?Va(An(c),-K,K):c===0?c:0}function or(c){return c==null?"":ai(c)}var Nv=Sa(function(c,m){if($c(m)||Gi(m)){cs(m,wi(m),c);return}for(var E in m)qn.call(m,E)&&Io(c,E,m[E])}),Dv=Sa(function(c,m){cs(m,rs(m),c)}),rd=Sa(function(c,m,E,N){cs(m,rs(m),c,N)}),sg=Sa(function(c,m,E,N){cs(m,wi(m),c,N)}),G_=zn(Xh);function O0(c,m){var E=xs(c);return m==null?E:as(E,m)}var db=fn(function(c,m){c=_n(c);var E=-1,N=m.length,G=N>2?m[2]:t;for(G&&Wr(m[0],m[1],G)&&(N=1);++E<N;)for(var J=m[E],he=rs(J),ve=-1,xe=he.length;++ve<xe;){var nt=he[ve],rt=c[nt];(rt===t||Ca(rt,zi[nt])&&!qn.call(c,nt))&&(c[nt]=J[nt])}return c}),wT=fn(function(c){return c.push(t,ot),Vn(id,t,c)});function qd(c,m){return Md(c,ln(m,3),ls)}function fb(c,m){return Md(c,ln(m,3),ja)}function Pv(c,m){return c==null?c:au(c,ln(m,3),rs)}function pb(c,m){return c==null?c:qu(c,ln(m,3),rs)}function ET(c,m){return c&&ls(c,ln(m,3))}function xT(c,m){return c&&ja(c,ln(m,3))}function $T(c){return c==null?[]:$s(c,wi(c))}function CT(c){return c==null?[]:$s(c,rs(c))}function bm(c,m,E){var N=c==null?t:Cs(c,m);return N===t?E:N}function mb(c,m){return c!=null&&Rg(c,m,bc)}function Tm(c,m){return c!=null&&Rg(c,m,ff)}var gb=pe(function(c,m,E){m!=null&&typeof m.toString!="function"&&(m=Gs.call(m)),c[m]=E},Vv(Do)),Bv=pe(function(c,m,E){m!=null&&typeof m.toString!="function"&&(m=Gs.call(m)),qn.call(c,m)?c[m].push(E):c[m]=[E]},ln),Fv=fn(Pn);function wi(c){return Gi(c)?yn(c):go(c)}function rs(c){return Gi(c)?yn(c,!0):_d(c)}function MT(c,m){var E={};return m=ln(m,3),ls(c,function(N,G,J){Go(E,m(N,G,J),N)}),E}function Pp(c,m){var E={};return m=ln(m,3),ls(c,function(N,G,J){Go(E,G,m(N,G,J))}),E}var Sm=Sa(function(c,m,E){_o(c,m,E)}),id=Sa(function(c,m,E,N){_o(c,m,E,N)}),AT=zn(function(c,m){var E={};if(c==null)return E;var N=!1;m=pr(m,function(J){return J=sa(J,c),N||(N=J.length>1),J}),cs(c,Rr(c),E),N&&(E=Oi(E,y|b|S,jt));for(var G=m.length;G--;)Zc(E,m[G]);return E});function L0(c,m){return zv(c,$t(ln(m)))}var tn=zn(function(c,m){return c==null?{}:tc(c,m)});function zv(c,m){if(c==null)return{};var E=pr(Rr(c),function(N){return[N]});return m=ln(m),$h(c,E,function(N,G){return m(N,G[0])})}function $E(c,m,E){m=sa(m,c);var N=-1,G=m.length;for(G||(G=1,c=t);++N<G;){var J=c==null?t:c[wo(m[N])];J===t&&(N=G,J=E),c=Mc(J)?J.call(c):J}return c}function CE(c,m,E){return c==null?c:_i(c,m,E)}function ME(c,m,E,N){return N=typeof N=="function"?N:t,c==null?c:_i(c,m,E,N)}var Uv=Et(wi),N0=Et(rs);function fs(c,m,E){var N=Ln(c),G=N||lh(c)||Jd(c);if(m=ln(m,4),E==null){var J=c&&c.constructor;G?E=N?new J:[]:si(c)?E=Mc(J)?xs(Ga(c)):{}:E={}}return(G?Jr:ls)(c,function(he,ve,xe){return m(E,he,ve,xe)}),E}function Ug(c,m){return c==null?!0:Zc(c,m)}function W_(c,m,E){return c==null?c:yo(c,m,to(E))}function AE(c,m,E,N){return N=typeof N=="function"?N:t,c==null?c:yo(c,m,to(E),N)}function Tf(c){return c==null?[]:Ii(c,wi(c))}function Sf(c){return c==null?[]:Ii(c,rs(c))}function Hv(c,m,E){return E===t&&(E=m,m=t),E!==t&&(E=Ji(E),E=E===E?E:0),m!==t&&(m=Ji(m),m=m===m?m:0),Va(Ji(c),m,E)}function Ns(c,m,E){return m=Ac(m),E===t?(E=m,m=0):E=Ac(E),c=Ji(c),xh(c,m,E)}function IT(c,m,E){if(E&&typeof E!="boolean"&&Wr(c,m,E)&&(m=E=t),E===t&&(typeof m=="boolean"?(E=m,m=t):typeof c=="boolean"&&(E=c,c=t)),c===t&&m===t?(c=0,m=1):(c=Ac(c),m===t?(m=c,c=0):m=Ac(m)),c>m){var N=c;c=m,m=N}if(E||c%1||m%1){var G=Rl();return Ri(c+G*(m-c+_h("1e-"+((G+"").length-1))),m)}return Os(c,m)}var vb=d(function(c,m,E){return m=m.toLowerCase(),c+(E?wm(m):m)});function wm(c){return F0(or(c).toLowerCase())}function V_(c){return c=or(c),c&&c.replace(La,cf).replace(vs,"")}function _b(c,m,E){c=or(c),m=ai(m);var N=c.length;E=E===t?N:Va(An(E),0,N);var G=E;return E-=m.length,E>=0&&c.slice(E,G)==m}function yb(c){return c=or(c),c&&cr.test(c)?c.replace(bn,hf):c}function bb(c){return c=or(c),c&&Ht.test(c)?c.replace(ct,"\\$&"):c}var Gv=d(function(c,m,E){return c+(E?"-":"")+m.toLowerCase()}),IE=d(function(c,m,E){return c+(E?" ":"")+m.toLowerCase()}),RT=x("toLowerCase");function RE(c,m,E){c=or(c),m=An(m);var N=m?is(c):0;if(!m||N>=m)return c;var G=(m-N)/2;return xt(ru(G),E)+c+xt(Xu(G),E)}function kE(c,m,E){c=or(c),m=An(m);var N=m?is(c):0;return m&&N<m?c+xt(m-N,E):c}function tp(c,m,E){c=or(c),m=An(m);var N=m?is(c):0;return m&&N<m?xt(m-N,E)+c:c}function Tb(c,m,E){return E||m==null?m=0:m&&(m=+m),zf(or(c).replace(nn,""),m||0)}function Sb(c,m,E){return(E?Wr(c,m,E):m===t)?m=1:m=An(m),js(or(c),m)}function D0(){var c=arguments,m=or(c[0]);return c.length<3?m:m.replace(c[1],c[2])}var kT=d(function(c,m,E){return c+(E?"_":"")+m.toLowerCase()});function wb(c,m,E){return E&&typeof E!="number"&&Wr(c,m,E)&&(m=E=t),E=E===t?fe:E>>>0,E?(c=or(c),c&&(typeof m=="string"||m!=null&&!Kd(m))&&(m=ai(m),!m&&al(c))?bo(Hr(c),0,E):c.split(m,E)):[]}var Wv=d(function(c,m,E){return c+(E?" ":"")+F0(m)});function OT(c,m,E){return c=or(c),E=E==null?0:Va(An(E),0,c.length),m=ai(m),c.slice(E,E+m.length)==m}function Eb(c,m,E){var N=X.templateSettings;E&&Wr(c,m,E)&&(m=t),c=or(c),m=rd({},m,N,Ne);var G=rd({},m.imports,N.imports,Ne),J=wi(G),he=Ii(G,J),ve,xe,nt=0,rt=m.interpolate||Mo,dt="__p += '",Lt=Gr((m.escape||Mo).source+"|"+rt.source+"|"+(rt===_r?ir:Mo).source+"|"+(m.evaluate||Mo).source+"|$","g"),qt="//# sourceURL="+(qn.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++bu+"]")+`
`;c.replace(Lt,function(dn,Yn,er,ua,io,Ds){return er||(er=ua),dt+=c.slice(nt,Ds).replace(Xl,pd),Yn&&(ve=!0,dt+=`' +
__e(`+Yn+`) +
'`),io&&(xe=!0,dt+=`';
`+io+`;
__p += '`),er&&(dt+=`' +
((__t = (`+er+`)) == null ? '' : __t) +
'`),nt=Ds+dn.length,dn}),dt+=`';
`;var pn=qn.call(m,"variable")&&m.variable;if(!pn)dt=`with (obj) {
`+dt+`
}
`;else if(Xt.test(pn))throw new sn(u);dt=(xe?dt.replace(Pt,""):dt).replace(lt,"$1").replace(Gt,"$1;"),dt="function("+(pn||"obj")+`) {
`+(pn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ve?", __e = _.escape":"")+(xe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+dt+`return __p
}`;var Nn=z0(function(){return Rn(J,qt+"return "+dt).apply(t,he)});if(Nn.source=dt,A0(Nn))throw Nn;return Nn}function sd(c){return or(c).toLowerCase()}function Bp(c){return or(c).toUpperCase()}function LT(c,m,E){if(c=or(c),c&&(E||m===t))return Fh(c);if(!c||!(m=ai(m)))return c;var N=Hr(c),G=Hr(m),J=Yi(N,G),he=fa(N,G)+1;return bo(N,J,he).join("")}function j_(c,m,E){if(c=or(c),c&&(E||m===t))return c.slice(0,Ml(c)+1);if(!c||!(m=ai(m)))return c;var N=Hr(c),G=fa(N,Hr(m))+1;return bo(N,0,G).join("")}function NT(c,m,E){if(c=or(c),c&&(E||m===t))return c.replace(nn,"");if(!c||!(m=ai(m)))return c;var N=Hr(c),G=Yi(N,Hr(m));return bo(N,G).join("")}function P0(c,m){var E=oe,N=ue;if(si(m)){var G="separator"in m?m.separator:G;E="length"in m?An(m.length):E,N="omission"in m?ai(m.omission):N}c=or(c);var J=c.length;if(al(c)){var he=Hr(c);J=he.length}if(E>=J)return c;var ve=E-is(N);if(ve<1)return N;var xe=he?bo(he,0,ve).join(""):c.slice(0,ve);if(G===t)return xe+N;if(he&&(ve+=xe.length-ve),Kd(G)){if(c.slice(ve).search(G)){var nt,rt=xe;for(G.global||(G=Gr(G.source,or(br.exec(G))+"g")),G.lastIndex=0;nt=G.exec(rt);)var dt=nt.index;xe=xe.slice(0,dt===t?ve:dt)}}else if(c.indexOf(ai(G),ve)!=ve){var Lt=xe.lastIndexOf(G);Lt>-1&&(xe=xe.slice(0,Lt))}return xe+N}function Y_(c){return c=or(c),c&&ar.test(c)?c.replace(Wt,Ua):c}var B0=d(function(c,m,E){return c+(E?" ":"")+m.toUpperCase()}),F0=x("toUpperCase");function xb(c,m,E){return c=or(c),m=E?t:m,m===t?zc(c)?Th(c):wp(c):c.match(m)||[]}var z0=fn(function(c,m){try{return Vn(c,t,m)}catch(E){return A0(E)?E:new sn(E)}}),$b=zn(function(c,m){return Jr(m,function(E){E=wo(E),Go(c,E,en(c[E],c))}),c});function Cb(c){var m=c==null?0:c.length,E=ln();return c=m?pr(c,function(N){if(typeof N[1]!="function")throw new Ti(l);return[E(N[0]),N[1]]}):[],fn(function(N){for(var G=-1;++G<m;){var J=c[G];if(Vn(J[0],this,N))return Vn(J[1],this,N)}})}function OE(c){return Nd(Oi(c,y))}function Vv(c){return function(){return c}}function LE(c,m){return c==null||c!==c?m:c}var DT=B(),NE=B(!0);function Do(c){return c}function qi(c){return eo(typeof c=="function"?c:Oi(c,y))}function Fp(c){return Iu(Oi(c,y))}function jv(c,m){return vo(c,Oi(m,y))}var X_=fn(function(c,m){return function(E){return Pn(E,c,m)}}),zp=fn(function(c,m){return function(E){return Pn(c,E,m)}});function Yv(c,m,E){var N=wi(m),G=$s(m,N);E==null&&!(si(m)&&(G.length||!N.length))&&(E=m,m=c,c=this,G=$s(m,wi(m)));var J=!(si(E)&&"chain"in E)||!!E.chain,he=Mc(c);return Jr(G,function(ve){var xe=m[ve];c[ve]=xe,he&&(c.prototype[ve]=function(){var nt=this.__chain__;if(J||nt){var rt=c(this.__wrapped__),dt=rt.__actions__=ii(this.__actions__);return dt.push({func:xe,args:arguments,thisArg:c}),rt.__chain__=nt,rt}return xe.apply(c,Zo([this.value()],arguments))})}),c}function U0(){return $r._===this&&($r._=Hh),this}function H0(){}function PT(c){return c=An(c),fn(function(m){return Vo(m,c)})}var Mb=tt(pr),DE=tt(Eu),Ab=tt(Fc);function Xv(c){return Ea(c)?ci(wo(c)):Ch(c)}function BT(c){return function(m){return c==null?t:Cs(c,m)}}var Ib=cn(),K_=cn(!0);function G0(){return[]}function Em(){return!1}function Rb(){return{}}function kb(){return""}function Ob(){return!0}function Lb(c,m){if(c=An(c),c<1||c>K)return[];var E=fe,N=Ri(c,fe);m=ln(m),c-=fe;for(var G=Ql(N,m);++E<c;)m(E);return G}function og(c){return Ln(c)?pr(c,wo):la(c)?[c]:ii(y0(or(c)))}function Nb(c){var m=++pa;return or(c)+m}var Db=Oe(function(c,m){return c+m},0),Pb=gn("ceil"),Bb=Oe(function(c,m){return c/m},1),Fb=gn("floor");function Qn(c){return c&&c.length?Ll(c,Do,Ya):t}function FT(c,m){return c&&c.length?Ll(c,ln(m,2),Ya):t}function zT(c){return Fa(c,Do)}function Hg(c,m){return Fa(c,ln(m,2))}function Kv(c){return c&&c.length?Ll(c,Do,ba):t}function W0(c,m){return c&&c.length?Ll(c,ln(m,2),ba):t}var UT=Oe(function(c,m){return c*m},1),J_=gn("round"),HT=Oe(function(c,m){return c-m},0);function GT(c){return c&&c.length?Uo(c,Do):0}function WT(c,m){return c&&c.length?Uo(c,ln(m,2)):0}return X.after=Je,X.ary=ut,X.assign=Nv,X.assignIn=Dv,X.assignInWith=rd,X.assignWith=sg,X.at=G_,X.before=Dt,X.bind=en,X.bindAll=$b,X.bindKey=hn,X.castArray=jd,X.chain=Lu,X.chunk=sm,X.compact=ku,X.concat=b0,X.cond=Cb,X.conforms=OE,X.constant=Vv,X.countBy=D_,X.create=O0,X.curry=an,X.curryRight=Dn,X.debounce=Zn,X.defaults=db,X.defaultsDeep=wT,X.defer=sr,X.delay=Lo,X.difference=Yo,X.differenceBy=ns,X.differenceWith=du,X.drop=yl,X.dropRight=Ou,X.dropRightWhile=fu,X.dropWhile=Ap,X.fill=zl,X.filter=Vd,X.flatMap=ng,X.flatMapDeep=Bg,X.flatMapDepth=P_,X.flatten=vf,X.flattenDeep=Lg,X.flattenDepth=om,X.flip=At,X.flow=DT,X.flowRight=NE,X.fromPairs=ih,X.functions=$T,X.functionsIn=CT,X.groupBy=ig,X.initial=Hd,X.intersection=Qm,X.intersectionBy=Zm,X.intersectionWith=Eo,X.invert=gb,X.invertBy=Bv,X.invokeMap=qf,X.iteratee=qi,X.keyBy=pm,X.keys=wi,X.keysIn=rs,X.map=Si,X.mapKeys=MT,X.mapValues=Pp,X.matches=Fp,X.matchesProperty=jv,X.memoize=pt,X.merge=Sm,X.mergeWith=id,X.method=X_,X.methodOf=zp,X.mixin=Yv,X.negate=$t,X.nthArg=PT,X.omit=AT,X.omitBy=L0,X.once=wn,X.orderBy=Qf,X.over=Mb,X.overArgs=hr,X.overEvery=DE,X.overSome=Ab,X.partial=rr,X.partialRight=gr,X.partition=mm,X.pick=tn,X.pickBy=zv,X.property=Xv,X.propertyOf=BT,X.pull=Ng,X.pullAll=Gd,X.pullAllBy=eg,X.pullAllWith=Cc,X.pullAt=Wd,X.range=Ib,X.rangeRight=K_,X.rearg=Fr,X.reject=Fg,X.remove=oa,X.rest=Hl,X.reverse=$a,X.sampleSize=T,X.set=CE,X.setWith=ME,X.shuffle=R,X.slice=Av,X.sortBy=ee,X.sortedUniq=kp,X.sortedUniqBy=w0,X.split=wb,X.spread=ds,X.tail=um,X.take=E0,X.takeRight=Iv,X.takeRightWhile=cm,X.takeWhile=_f,X.tap=Dg,X.throttle=Zf,X.thru=Yf,X.toArray=H_,X.toPairs=Uv,X.toPairsIn=N0,X.toPath=og,X.toPlainObject=hb,X.transform=fs,X.unary=M0,X.union=Rv,X.unionBy=ob,X.unionWith=x0,X.uniq=$0,X.uniqBy=jf,X.uniqWith=Un,X.unset=Ug,X.unzip=oh,X.unzipWith=Op,X.update=W_,X.updateWith=AE,X.values=Tf,X.valuesIn=Sf,X.without=aa,X.words=xb,X.wrap=Nu,X.xor=kv,X.xorBy=C0,X.xorWith=hm,X.zip=ab,X.zipObject=N_,X.zipObjectDeep=ah,X.zipWith=xo,X.entries=Uv,X.entriesIn=N0,X.extend=Dv,X.extendWith=rd,Yv(X,X),X.add=Db,X.attempt=z0,X.camelCase=vb,X.capitalize=wm,X.ceil=Pb,X.clamp=Hv,X.clone=_T,X.cloneDeep=EE,X.cloneDeepWith=vm,X.cloneWith=wE,X.conformsTo=lb,X.deburr=V_,X.defaultTo=LE,X.divide=Bb,X.endsWith=_b,X.eq=Ca,X.escape=yb,X.escapeRegExp=bb,X.every=Pg,X.find=Ni,X.findIndex=zd,X.findKey=qd,X.findLast=fm,X.findLastIndex=Ud,X.findLastKey=fb,X.floor=Fb,X.forEach=rg,X.forEachRight=Np,X.forIn=Pv,X.forInRight=pb,X.forOwn=ET,X.forOwnRight=xT,X.get=bm,X.gt=yT,X.gte=zg,X.has=mb,X.hasIn=Tm,X.head=bl,X.identity=Do,X.includes=Jf,X.indexOf=sh,X.inRange=Ns,X.invoke=Fv,X.isArguments=Yd,X.isArray=Ln,X.isArrayBuffer=B_,X.isArrayLike=Gi,X.isArrayLikeObject=Qr,X.isBoolean=ub,X.isBuffer=lh,X.isDate=bT,X.isElement=bf,X.isEmpty=Ov,X.isEqual=Wi,X.isEqualWith=No,X.isError=A0,X.isFinite=F_,X.isFunction=Mc,X.isInteger=I0,X.isLength=Ih,X.isMap=td,X.isMatch=As,X.isMatchWith=_m,X.isNaN=z_,X.isNative=U_,X.isNil=xE,X.isNull=R0,X.isNumber=Xd,X.isObject=si,X.isObjectLike=di,X.isPlainObject=Vr,X.isRegExp=Kd,X.isSafeInteger=Qa,X.isSet=Lv,X.isString=ym,X.isSymbol=la,X.isTypedArray=Jd,X.isUndefined=TT,X.isWeakMap=ST,X.isWeakSet=nd,X.join=am,X.kebabCase=Gv,X.last=Ls,X.lastIndexOf=Ul,X.lowerCase=IE,X.lowerFirst=RT,X.lt=cb,X.lte=ep,X.max=Qn,X.maxBy=FT,X.mean=zT,X.meanBy=Hg,X.min=Kv,X.minBy=W0,X.stubArray=G0,X.stubFalse=Em,X.stubObject=Rb,X.stubString=kb,X.stubTrue=Ob,X.multiply=UT,X.nth=Ip,X.noConflict=U0,X.noop=H0,X.now=be,X.pad=RE,X.padEnd=kE,X.padStart=tp,X.parseInt=Tb,X.random=IT,X.reduce=gm,X.reduceRight=Dp,X.repeat=Sb,X.replace=D0,X.result=$E,X.round=J_,X.runInContext=ye,X.sample=_,X.size=F,X.snakeCase=kT,X.some=Y,X.sortedIndex=lm,X.sortedIndexBy=T0,X.sortedIndexOf=L_,X.sortedLastIndex=Vf,X.sortedLastIndexBy=Rp,X.sortedLastIndexOf=S0,X.startCase=Wv,X.startsWith=OT,X.subtract=HT,X.sum=GT,X.sumBy=WT,X.template=Eb,X.times=Lb,X.toFinite=Ac,X.toInteger=An,X.toLength=k0,X.toLower=sd,X.toNumber=Ji,X.toSafeInteger=ht,X.toString=or,X.toUpper=Bp,X.trim=LT,X.trimEnd=j_,X.trimStart=NT,X.truncate=P0,X.unescape=Y_,X.uniqueId=Nb,X.upperCase=B0,X.upperFirst=F0,X.each=rg,X.eachRight=Np,X.first=bl,Yv(X,function(){var c={};return ls(X,function(m,E){qn.call(X.prototype,E)||(c[E]=m)}),c}(),{chain:!1}),X.VERSION=r,Jr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){X[c].placeholder=X}),Jr(["drop","take"],function(c,m){mn.prototype[c]=function(E){E=E===t?1:ni(An(E),0);var N=this.__filtered__&&!m?new mn(this):this.clone();return N.__filtered__?N.__takeCount__=Ri(E,N.__takeCount__):N.__views__.push({size:Ri(E,fe),type:c+(N.__dir__<0?"Right":"")}),N},mn.prototype[c+"Right"]=function(E){return this.reverse()[c](E).reverse()}}),Jr(["filter","map","takeWhile"],function(c,m){var E=m+1,N=E==le||E==ge;mn.prototype[c]=function(G){var J=this.clone();return J.__iteratees__.push({iteratee:ln(G,3),type:E}),J.__filtered__=J.__filtered__||N,J}}),Jr(["head","last"],function(c,m){var E="take"+(m?"Right":"");mn.prototype[c]=function(){return this[E](1).value()[0]}}),Jr(["initial","tail"],function(c,m){var E="drop"+(m?"":"Right");mn.prototype[c]=function(){return this.__filtered__?new mn(this):this[E](1)}}),mn.prototype.compact=function(){return this.filter(Do)},mn.prototype.find=function(c){return this.filter(c).head()},mn.prototype.findLast=function(c){return this.reverse().find(c)},mn.prototype.invokeMap=fn(function(c,m){return typeof c=="function"?new mn(this):this.map(function(E){return Pn(E,c,m)})}),mn.prototype.reject=function(c){return this.filter($t(ln(c)))},mn.prototype.slice=function(c,m){c=An(c);var E=this;return E.__filtered__&&(c>0||m<0)?new mn(E):(c<0?E=E.takeRight(-c):c&&(E=E.drop(c)),m!==t&&(m=An(m),E=m<0?E.dropRight(-m):E.take(m-c)),E)},mn.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},mn.prototype.toArray=function(){return this.take(fe)},ls(mn.prototype,function(c,m){var E=/^(?:filter|find|map|reject)|While$/.test(m),N=/^(?:head|last)$/.test(m),G=X[N?"take"+(m=="last"?"Right":""):m],J=N||/^find/.test(m);G&&(X.prototype[m]=function(){var he=this.__wrapped__,ve=N?[1]:arguments,xe=he instanceof mn,nt=ve[0],rt=xe||Ln(he),dt=function(Yn){var er=G.apply(X,Zo([Yn],ve));return N&&Lt?er[0]:er};rt&&E&&typeof nt=="function"&&nt.length!=1&&(xe=rt=!1);var Lt=this.__chain__,qt=!!this.__actions__.length,pn=J&&!Lt,Nn=xe&&!qt;if(!J&&rt){he=Nn?he:new mn(this);var dn=c.apply(he,ve);return dn.__actions__.push({func:Yf,args:[dt],thisArg:t}),new Ir(dn,Lt)}return pn&&Nn?c.apply(this,ve):(dn=this.thru(dt),pn?N?dn.value()[0]:dn.value():dn)})}),Jr(["pop","push","shift","sort","splice","unshift"],function(c){var m=fo[c],E=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",N=/^(?:pop|shift)$/.test(c);X.prototype[c]=function(){var G=arguments;if(N&&!this.__chain__){var J=this.value();return m.apply(Ln(J)?J:[],G)}return this[E](function(he){return m.apply(Ln(he)?he:[],G)})}}),ls(mn.prototype,function(c,m){var E=X[m];if(E){var N=E.name+"";qn.call(Ol,N)||(Ol[N]=[]),Ol[N].push({name:m,func:E})}}),Ol[W(t,k).name]=[{name:"wrapper",func:t}],mn.prototype.clone=Uf,mn.prototype.reverse=hl,mn.prototype.value=ki,X.prototype.at=ed,X.prototype.chain=dm,X.prototype.commit=Xf,X.prototype.next=Kf,X.prototype.plant=bd,X.prototype.reverse=yf,X.prototype.toJSON=X.prototype.valueOf=X.prototype.value=tg,X.prototype.first=X.prototype.head,ta&&(X.prototype[ta]=Lp),X},pi=Ad();bi?((bi.exports=pi)._=pi,Rs._=pi):$r._=pi}).call(jl)})(cR,cR.exports);var mue=cR.exports;const dH=(n,e,t,r)=>fetch(n+"/openai/deployments/"+e+"/chat/completions?api-version=2024-02-01",{method:"POST",headers:{"Content-Type":"application/json","api-key":t},body:JSON.stringify({messages:r})}),Bn=Tse((n,e)=>({ip:"",blocks:{},Start:{},lines:{},hulls:{},texts:{},points:{},widgets:{},counter:0,generatedPreviously:!1,screenToShow:f3,blocklyWorkspaceXML:{},highlightBlocks:{},storyCreationGoals:{...fue},chatMessageHistory:[{role:"user",content:Ole},{role:"system",content:"How can I help you today?"}],lightMode:!0,simOnly:!1,isConnected:!1,workerThread:null,blocklyWorkspace:null,llmEndpoint:"",llmAPIKey:"",llmDeployment:"",userPrompt:"",programGoals:{...qle},llmProcessing:!1,llmMode:!1,showGPTConsole:!1,fullScreenPanel:!0,displayLLMBlockPrompt:!1,mistyAudioList:[],mistyImageList:[],headerHeight:0,headerWidth:0,speechObject:{value:""},clock:new Ile,tfs:{...JO},startingTfs:JSON.parse(JSON.stringify(JO)),endingTfs:JSON.parse(JSON.stringify(JO)),items:{...qO},startingItems:JSON.parse(JSON.stringify(qO)),endingItems:JSON.parse(JSON.stringify(qO)),activeModal:null,updateScreen:t=>n(r=>({screenToShow:t})),setActiveModal:t=>n(r=>({activeModal:t})),closeModal:()=>n(t=>({activeModal:null})),setChatMessageHistory:t=>n(r=>({chatMessageHistory:t})),addMessageToHistory:t=>{let r=e(),s=r.chatMessageHistory;n({llmProcessing:!0,chatMessageHistory:[...s,{role:"user",content:t.replace("<br>","")}]}),s=e().chatMessageHistory;let o=r.llmEndpoint,l=r.llmDeployment,u=r.llmAPIKey;dH(o,l,u,s).then(h=>{if(!h.ok)throw new Error(`LLM Request failed with status ${h.status}`);return h.json()}).then(h=>{console.log(h);let f=h.choices[0].message.content;n({llmProcessing:!1,chatMessageHistory:[...s,{role:"system",content:f}]})}).catch(h=>{n({llmProcessing:!1}),alert(`Failed to connect to ChatGPT: ${h.message}`)})},toggleLLMMode:t=>n({llmMode:t}),setFullScreenPanel:t=>n({fullScreenPanel:t}),setShowGPTConsole:t=>n({showGPTConsole:t}),toggleLLMBlockPrompt:t=>n({displayLLMBlockPrompt:t}),toggleTheme:t=>n({lightMode:t}),getAllTasks:t=>t?e().storyCreationGoals:e().programGoals,getMainTasks:t=>{let r=t?e().storyCreationGoals:e().programGoals;return Object.keys(r).filter(s=>r[s].type==="task").sort((s,o)=>r[s].order-r[o].order).reduce((s,o)=>(s[o]=r[o],s),{})},getHighlightBlocks:()=>e().highlightBlocks,getBlocklyWorkspace:()=>e().blocklyWorkspace,setWorkerThread:t=>n({workerThread:t}),setBlocklyWorkspace:t=>n({blocklyWorkspace:t}),setAPIKey:t=>n({llmAPIKey:t}),setEndpoint:t=>n({llmEndpoint:t}),setDeployment:t=>n({llmDeployment:t}),setLLMSettings:t=>n({llmAPIKey:t.apikey,llmEndpoint:t.endpoint,llmDeployment:t.model}),setImageList:t=>n({mistyImageList:t}),setAudioList:t=>n({mistyAudioList:t}),setUserPrompt:t=>n({userPrompt:t}),setHighlightBlocks:t=>n({highlightBlocks:t}),setHeaderDimensions:(t,r)=>n({headerHeight:t,headerWidth:r}),generateProgramOutline:t=>{n({llmProcessing:!0,generatedPreviously:!0});let r=e(),s=r.userPrompt,o=r.llmEndpoint,l=r.llmDeployment,u=r.llmAPIKey,h=t?" Only use actionable goals for the Misty robot based on the rules specified.":"";dH(o,l,u,[{role:"system",content:kle},{role:"user",content:'Give me the output for the following user prompt: "'+s+'"'+h}]).then(f=>{if(!f.ok)throw new Error(`LLM Request failed with status ${f.status}`);return f.json()}).then(f=>{let g=f.choices[0].message.content,y=f.choices[0].message.content.indexOf("{"),b=f.choices[0].message.content.lastIndexOf("}")+1;g=g.length>0?g.slice(y,b):"{}",n({programGoals:JSON.parse(g),llmProcessing:!1,activeModal:null})}).catch(f=>{n({llmProcessing:!1}),alert(`Failed to connect to ChatGPT: ${f.message}`)})},generateProgram:()=>{n({llmProcessing:!0});let t=e(),r=t.userPrompt,s=t.llmEndpoint,o=t.llmDeployment,l=t.llmAPIKey;fetch(s+"/openai/deployments/"+o+"/chat/completions?api-version=2024-02-01",{method:"POST",headers:{"Content-Type":"application/json","api-key":l},body:JSON.stringify({messages:[{role:"system",content:pue},{role:"user",content:'Give me the output for the following user prompt: "'+r+'"'}]})}).then(u=>{if(!u.ok)throw new Error(`LLM Request failed with status ${u.status}`);return u.json()}).then(u=>{console.log(u);let h=u.choices[0].message.content;console.log(h),n({llmProcessing:!1,activeModal:null}),e().loadBlocks(JSON.parse(h),e().blocklyWorkspace)}).catch(u=>{n({llmProcessing:!1}),alert(`Failed to connect to ChatGPT: ${u.message}`)})},clearProgram:()=>n({blocks:{}}),clearProgramExceptStart:()=>n({blocks:mue.pickBy(e().blocks,t=>t.type==="Start")}),getBlockData:()=>{var u,h,f;let r=e().blocks,s={data:[]},o=Object.keys(r),l=o.length;for(let g=0;g<l;g++){let y={id:r[o[g]].id,type:r[o[g]].type};r[o[g]].next&&r[o[g]].next!==""&&(y.nextStatement=r[o[g]].next);let b=(u=r[o[g]])!=null&&u.inputs?Object.keys((h=r[o[g]])==null?void 0:h.inputs):[];for(let S=0;S<b.length;S++)y[b[S]]=(f=r[o[g]].inputs[b[S]])!=null&&f.shadow?r[o[g]].inputs[b[S]].shadow.id:r[o[g]].inputs[b[S]];if(["logic_boolean","math_number","colour_picker","text","MoveHead","MoveArm3","Turn2","SpeakDefault","math_number_property","logic_compare","logic_operation"].includes(y.type)){let S=Object.keys(r[o[g]].fields);y.value=r[o[g]].fields[S[0]]}["BasicSlider","ArmPositionSlider","SpeedSlider","TimeSlider","HeadPitchSlider","HeadRollSlider","HeadYawSlider"].includes(y.type)&&(y.value=r[o[g]].fields.FIELD_slider_value),s.data.push({...y})}return s},loadBlocks:(t,r)=>{var y,b;let s=r.getBlocksByType("Start");s.length>0?e().clearProgramExceptStart():e().clearProgram(),r.clear();let o=s.length>0?s[0]:null,l=[],u=[],h=[t.data[0].id],f=[];for(let S=0;S<t.data.length;S++){let C=t.data[S].type;if(["face","audio"].includes(C)&&(C=t.data[S].value),!Xie.includes(C)){f.push(t.data[S].id);continue}let M=Sy.serialization.blocks.append({type:C},r);M.type==="Start"&&(o=M),C==="logic_boolean"&&M.getField("BOOL").setValue(t.data[S].value),C==="math_number"&&M.getField("NUM").setValue(t.data[S].value),C==="colour_picker"&&M.getField("COLOUR").setValue(t.data[S].value),C==="text"&&M.getField("TEXT").setValue(t.data[S].value),C==="MoveHead"&&M.getField("FIELD_MoveHead_Pitch").setValue(t.data[S].value),C==="MoveArm3"&&M.getField("FIELD_MoveArm_Arm").setValue(t.data[S].value),C==="Turn2"&&M.getField("FIELD_Turn_Direction").setValue(t.data[S].value),C==="SpeakDefault"&&M.getField("FIELD_SpeakDefault_Text").setValue(t.data[S].value),C==="math_number_property"&&M.getField("PROPERTY").setValue(t.data[S].value),(C==="logic_compare"||C==="logic_operation")&&M.getField("OP").setValue(t.data[S].value),["BasicSlider","ArmPositionSlider","SpeedSlider","TimeSlider","HeadPitchSlider","HeadRollSlider","HeadYawSlider"].includes(C)&&M.getField("FIELD_slider_value").setValue(t.data[S].value),l.push(t.data[S].id),u.push(M.id),(y=t.data[S])!=null&&y.nextStatement&&h.push([t.data[S].id,(b=t.data[S])==null?void 0:b.nextStatement])}for(let S=0;S<t.data.length;S++){if(f.includes(t.data[S].id))continue;let C=r.getBlockById(u[l.indexOf(t.data[S].id)]);C&&Object.keys(t.data[S]).forEach(M=>{if(!(M==="id"||M==="value"||M==="type"||M==="nextStatement")){const A=r.getBlockById(u[l.indexOf(t.data[S][M])]);A&&C.getInput(M).connection.connect(A.outputConnection?A.outputConnection:A.previousConnection)}})}for(let S=1;S<h.length;S++){if(f.includes(h[S][1]))continue;let C=r.getBlockById(u[l.indexOf(h[S][1])]),M=r.getBlockById(u[l.indexOf(h[S][0])]);C&&(M==null||M.nextConnection.connect(C.previousConnection))}let g=r.getBlockById(u[l.indexOf(h[0])]);o.nextConnection.connect(g.previousConnection)},setIsConnected:t=>n({isConnected:t}),loadFromURDF:t=>n({tfs:{...Mle(t)},items:{...Ale(t)}}),setIp:t=>n({ip:t}),disconnect:()=>n({ip:"",isConnected:!1,mistyAudioList:[],mistyImageList:[]}),addBlock:(t,r)=>n(s=>({blocks:{...s.blocks,[t]:r}})),removeBlock:t=>{let r=e().blocks,s=e().getBlock,o=[t],l=[];for(;o.length>0;){let u=o[0];r[u],l.push(u);let h=s(u).inputs;if(h){let f=Object.values(h);for(let g=0;g<f.length;g++)o.push(f[g])}o.shift()}e().removeBlocks(l)},removeBlocks:t=>n(r=>({blocks:Object.keys(r.blocks).reduce((o,l)=>(t.includes(l)||(o[l]=r.blocks[l]),o),{})})),updateBlock:(t,r)=>n(s=>({blocks:{...s.blocks,[t]:r}})),getBlock:t=>e().blocks[t],getBlocks:()=>e().blocks,getItems:()=>e().items,getEndingItems:()=>e().endingItems,addBlocktoStart:(t,r)=>n(s=>({Start:{...s.Start,[t]:r}})),removeBlockfromStart:t=>n(r=>({Start:Object.keys(r.Start).reduce((o,l)=>(l!==t&&(o[l]=r.Start[l]),o),{})})),getBlocksByType:t=>{const r=e().blocks;return Object.values(r).filter(s=>s.type===t)[0]},getBlockType:t=>{var s;return((s=e().blocks[t])==null?void 0:s.type)||"Unknown block type"},setWorkspaceXml:t=>n({blocklyWorkspaceXML:t}),getWorkspaceXml:()=>e().blocklyWorkspaceXML,onPointerMissed:()=>console.log("Missed Click"),onPointerOver:()=>{},onPointerOut:()=>{},resetSim:()=>{const t=JSON.parse(JSON.stringify(e().startingTfs)),r=JSON.parse(JSON.stringify(e().startingItems));n({tfs:{...t},endingTfs:{...t},items:{...r},endingItems:{...r},speechObject:{value:""}})},toggleSimOnly:t=>{n({simOnly:t})},setAnimationFrames:(t,r,s,o,l)=>{n({tfs:{...t},endingTfs:{...r},items:{...s},endingItems:{...o},speechObject:{...l}})}}));let VD="";const Ma=n=>{const t=new Date().toLocaleString();VD=VD.concat(`
`,`[${t}] ${n}`)};function gue(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[r,s]of n)if(!Object.is(s,e.get(r)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const r of n)if(!e.has(r))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(const r of t)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(n[r],e[r]))return!1;return!0}const{useRef:vue}=Tt;function xi(n){const e=vue();return t=>{const r=n(t);return gue(e.current,r)?e.current:e.current=r}}const _ue={black:"#000",white:"#fff"},R$=_ue,yue={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},hS=yue,bue={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},dS=bue,Tue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},fS=Tue,Sue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},pS=Sue,wue={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},mS=wue,Eue={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},nx=Eue,xue={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},$ue=xue;function Z1(n){let e="https://mui.com/production-error/?code="+n;for(let t=1;t<arguments.length;t+=1)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+n+"; visit "+e+" for the full message."}const Cue=Object.freeze(Object.defineProperty({__proto__:null,default:Z1},Symbol.toStringTag,{value:"Module"})),TC="$$material";function Ve(){return Ve=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ve.apply(this,arguments)}const Mue=Object.freeze(Object.defineProperty({__proto__:null,default:Ve},Symbol.toStringTag,{value:"Module"}));function yr(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function NX(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var Aue=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Iue=NX(function(n){return Aue.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91});function Rue(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function kue(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Oue=function(){function n(t){var r=this;this._insertTag=function(s){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,o),r.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(kue(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var o=Rue(s);try{o.insertRule(r,o.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},n}(),Mf="-ms-",hR="-moz-",Xo="-webkit-",DX="comm",g3="rule",v3="decl",Lue="@import",PX="@keyframes",Nue="@layer",Due=Math.abs,vk=String.fromCharCode,Pue=Object.assign;function Bue(n,e){return rf(n,0)^45?(((e<<2^rf(n,0))<<2^rf(n,1))<<2^rf(n,2))<<2^rf(n,3):0}function BX(n){return n.trim()}function Fue(n,e){return(n=e.exec(n))?n[0]:n}function Ko(n,e,t){return n.replace(e,t)}function jD(n,e){return n.indexOf(e)}function rf(n,e){return n.charCodeAt(e)|0}function k$(n,e,t){return n.slice(e,t)}function Z0(n){return n.length}function _3(n){return n.length}function PM(n,e){return e.push(n),n}function zue(n,e){return n.map(e).join("")}var _k=1,Ow=1,FX=0,Zp=0,Nh=0,uE="";function yk(n,e,t,r,s,o,l){return{value:n,root:e,parent:t,type:r,props:s,children:o,line:_k,column:Ow,length:l,return:""}}function rx(n,e){return Pue(yk("",null,null,"",null,null,0),n,{length:-n.length},e)}function Uue(){return Nh}function Hue(){return Nh=Zp>0?rf(uE,--Zp):0,Ow--,Nh===10&&(Ow=1,_k--),Nh}function Pm(){return Nh=Zp<FX?rf(uE,Zp++):0,Ow++,Nh===10&&(Ow=1,_k++),Nh}function hv(){return rf(uE,Zp)}function fI(){return Zp}function SC(n,e){return k$(uE,n,e)}function O$(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function zX(n){return _k=Ow=1,FX=Z0(uE=n),Zp=0,[]}function UX(n){return uE="",n}function pI(n){return BX(SC(Zp-1,YD(n===91?n+2:n===40?n+1:n)))}function Gue(n){for(;(Nh=hv())&&Nh<33;)Pm();return O$(n)>2||O$(Nh)>3?"":" "}function Wue(n,e){for(;--e&&Pm()&&!(Nh<48||Nh>102||Nh>57&&Nh<65||Nh>70&&Nh<97););return SC(n,fI()+(e<6&&hv()==32&&Pm()==32))}function YD(n){for(;Pm();)switch(Nh){case n:return Zp;case 34:case 39:n!==34&&n!==39&&YD(Nh);break;case 40:n===41&&YD(n);break;case 92:Pm();break}return Zp}function Vue(n,e){for(;Pm()&&n+Nh!==57;)if(n+Nh===84&&hv()===47)break;return"/*"+SC(e,Zp-1)+"*"+vk(n===47?n:Pm())}function jue(n){for(;!O$(hv());)Pm();return SC(n,Zp)}function Yue(n){return UX(mI("",null,null,null,[""],n=zX(n),0,[0],n))}function mI(n,e,t,r,s,o,l,u,h){for(var f=0,g=0,y=l,b=0,S=0,C=0,M=1,A=1,k=1,O=0,P="",D=s,U=o,H=r,V=P;A;)switch(C=O,O=Pm()){case 40:if(C!=108&&rf(V,y-1)==58){jD(V+=Ko(pI(O),"&","&\f"),"&\f")!=-1&&(k=-1);break}case 34:case 39:case 91:V+=pI(O);break;case 9:case 10:case 13:case 32:V+=Gue(C);break;case 92:V+=Wue(fI()-1,7);continue;case 47:switch(hv()){case 42:case 47:PM(Xue(Vue(Pm(),fI()),e,t),h);break;default:V+="/"}break;case 123*M:u[f++]=Z0(V)*k;case 125*M:case 59:case 0:switch(O){case 0:case 125:A=0;case 59+g:k==-1&&(V=Ko(V,/\f/g,"")),S>0&&Z0(V)-y&&PM(S>32?pH(V+";",r,t,y-1):pH(Ko(V," ","")+";",r,t,y-2),h);break;case 59:V+=";";default:if(PM(H=fH(V,e,t,f,g,s,u,P,D=[],U=[],y),o),O===123)if(g===0)mI(V,e,H,H,D,o,y,u,U);else switch(b===99&&rf(V,3)===110?100:b){case 100:case 108:case 109:case 115:mI(n,H,H,r&&PM(fH(n,H,H,0,0,s,u,P,s,D=[],y),U),s,U,y,u,r?D:U);break;default:mI(V,H,H,H,[""],U,0,u,U)}}f=g=S=0,M=k=1,P=V="",y=l;break;case 58:y=1+Z0(V),S=C;default:if(M<1){if(O==123)--M;else if(O==125&&M++==0&&Hue()==125)continue}switch(V+=vk(O),O*M){case 38:k=g>0?1:(V+="\f",-1);break;case 44:u[f++]=(Z0(V)-1)*k,k=1;break;case 64:hv()===45&&(V+=pI(Pm())),b=hv(),g=y=Z0(P=V+=jue(fI())),O++;break;case 45:C===45&&Z0(V)==2&&(M=0)}}return o}function fH(n,e,t,r,s,o,l,u,h,f,g){for(var y=s-1,b=s===0?o:[""],S=_3(b),C=0,M=0,A=0;C<r;++C)for(var k=0,O=k$(n,y+1,y=Due(M=l[C])),P=n;k<S;++k)(P=BX(M>0?b[k]+" "+O:Ko(O,/&\f/g,b[k])))&&(h[A++]=P);return yk(n,e,t,s===0?g3:u,h,f,g)}function Xue(n,e,t){return yk(n,e,t,DX,vk(Uue()),k$(n,2,-2),0)}function pH(n,e,t,r){return yk(n,e,t,v3,k$(n,0,r),k$(n,r+1,-1),r)}function vw(n,e){for(var t="",r=_3(n),s=0;s<r;s++)t+=e(n[s],s,n,e)||"";return t}function Kue(n,e,t,r){switch(n.type){case Nue:if(n.children.length)break;case Lue:case v3:return n.return=n.return||n.value;case DX:return"";case PX:return n.return=n.value+"{"+vw(n.children,r)+"}";case g3:n.value=n.props.join(",")}return Z0(t=vw(n.children,r))?n.return=n.value+"{"+t+"}":""}function Jue(n){var e=_3(n);return function(t,r,s,o){for(var l="",u=0;u<e;u++)l+=n[u](t,r,s,o)||"";return l}}function que(n){return function(e){e.root||(e=e.return)&&n(e)}}var Que=function(e,t,r){for(var s=0,o=0;s=o,o=hv(),s===38&&o===12&&(t[r]=1),!O$(o);)Pm();return SC(e,Zp)},Zue=function(e,t){var r=-1,s=44;do switch(O$(s)){case 0:s===38&&hv()===12&&(t[r]=1),e[r]+=Que(Zp-1,t,r);break;case 2:e[r]+=pI(s);break;case 4:if(s===44){e[++r]=hv()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=vk(s)}while(s=Pm());return e},ece=function(e,t){return UX(Zue(zX(e),t))},mH=new WeakMap,tce=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!mH.get(r))&&!s){mH.set(e,!0);for(var o=[],l=ece(t,o),u=r.props,h=0,f=0;h<l.length;h++)for(var g=0;g<u.length;g++,f++)e.props[f]=o[h]?l[h].replace(/&\f/g,u[g]):u[g]+" "+l[h]}}},nce=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function HX(n,e){switch(Bue(n,e)){case 5103:return Xo+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Xo+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Xo+n+hR+n+Mf+n+n;case 6828:case 4268:return Xo+n+Mf+n+n;case 6165:return Xo+n+Mf+"flex-"+n+n;case 5187:return Xo+n+Ko(n,/(\w+).+(:[^]+)/,Xo+"box-$1$2"+Mf+"flex-$1$2")+n;case 5443:return Xo+n+Mf+"flex-item-"+Ko(n,/flex-|-self/,"")+n;case 4675:return Xo+n+Mf+"flex-line-pack"+Ko(n,/align-content|flex-|-self/,"")+n;case 5548:return Xo+n+Mf+Ko(n,"shrink","negative")+n;case 5292:return Xo+n+Mf+Ko(n,"basis","preferred-size")+n;case 6060:return Xo+"box-"+Ko(n,"-grow","")+Xo+n+Mf+Ko(n,"grow","positive")+n;case 4554:return Xo+Ko(n,/([^-])(transform)/g,"$1"+Xo+"$2")+n;case 6187:return Ko(Ko(Ko(n,/(zoom-|grab)/,Xo+"$1"),/(image-set)/,Xo+"$1"),n,"")+n;case 5495:case 3959:return Ko(n,/(image-set\([^]*)/,Xo+"$1$`$1");case 4968:return Ko(Ko(n,/(.+:)(flex-)?(.*)/,Xo+"box-pack:$3"+Mf+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Xo+n+n;case 4095:case 3583:case 4068:case 2532:return Ko(n,/(.+)-inline(.+)/,Xo+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Z0(n)-1-e>6)switch(rf(n,e+1)){case 109:if(rf(n,e+4)!==45)break;case 102:return Ko(n,/(.+:)(.+)-([^]+)/,"$1"+Xo+"$2-$3$1"+hR+(rf(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~jD(n,"stretch")?HX(Ko(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(rf(n,e+1)!==115)break;case 6444:switch(rf(n,Z0(n)-3-(~jD(n,"!important")&&10))){case 107:return Ko(n,":",":"+Xo)+n;case 101:return Ko(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Xo+(rf(n,14)===45?"inline-":"")+"box$3$1"+Xo+"$2$3$1"+Mf+"$2box$3")+n}break;case 5936:switch(rf(n,e+11)){case 114:return Xo+n+Mf+Ko(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Xo+n+Mf+Ko(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Xo+n+Mf+Ko(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Xo+n+Mf+n+n}return n}var rce=function(e,t,r,s){if(e.length>-1&&!e.return)switch(e.type){case v3:e.return=HX(e.value,e.length);break;case PX:return vw([rx(e,{value:Ko(e.value,"@","@"+Xo)})],s);case g3:if(e.length)return zue(e.props,function(o){switch(Fue(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return vw([rx(e,{props:[Ko(o,/:(read-\w+)/,":"+hR+"$1")]})],s);case"::placeholder":return vw([rx(e,{props:[Ko(o,/:(plac\w+)/,":"+Xo+"input-$1")]}),rx(e,{props:[Ko(o,/:(plac\w+)/,":"+hR+"$1")]}),rx(e,{props:[Ko(o,/:(plac\w+)/,Mf+"input-$1")]})],s)}return""})}},ice=[rce],GX=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(M){var A=M.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(M),M.setAttribute("data-s",""))})}var s=e.stylisPlugins||ice,o={},l,u=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(M){for(var A=M.getAttribute("data-emotion").split(" "),k=1;k<A.length;k++)o[A[k]]=!0;u.push(M)});var h,f=[tce,nce];{var g,y=[Kue,que(function(M){g.insert(M)})],b=Jue(f.concat(s,y)),S=function(A){return vw(Yue(A),b)};h=function(A,k,O,P){g=O,S(A?A+"{"+k.styles+"}":k.styles),P&&(C.inserted[k.name]=!0)}}var C={key:t,sheet:new Oue({key:t,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:h};return C.sheet.hydrate(u),C},WX={exports:{}},ka={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $d=typeof Symbol=="function"&&Symbol.for,y3=$d?Symbol.for("react.element"):60103,b3=$d?Symbol.for("react.portal"):60106,bk=$d?Symbol.for("react.fragment"):60107,Tk=$d?Symbol.for("react.strict_mode"):60108,Sk=$d?Symbol.for("react.profiler"):60114,wk=$d?Symbol.for("react.provider"):60109,Ek=$d?Symbol.for("react.context"):60110,T3=$d?Symbol.for("react.async_mode"):60111,xk=$d?Symbol.for("react.concurrent_mode"):60111,$k=$d?Symbol.for("react.forward_ref"):60112,Ck=$d?Symbol.for("react.suspense"):60113,sce=$d?Symbol.for("react.suspense_list"):60120,Mk=$d?Symbol.for("react.memo"):60115,Ak=$d?Symbol.for("react.lazy"):60116,oce=$d?Symbol.for("react.block"):60121,ace=$d?Symbol.for("react.fundamental"):60117,lce=$d?Symbol.for("react.responder"):60118,uce=$d?Symbol.for("react.scope"):60119;function Vm(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case y3:switch(n=n.type,n){case T3:case xk:case bk:case Sk:case Tk:case Ck:return n;default:switch(n=n&&n.$$typeof,n){case Ek:case $k:case Ak:case Mk:case wk:return n;default:return e}}case b3:return e}}}function VX(n){return Vm(n)===xk}ka.AsyncMode=T3;ka.ConcurrentMode=xk;ka.ContextConsumer=Ek;ka.ContextProvider=wk;ka.Element=y3;ka.ForwardRef=$k;ka.Fragment=bk;ka.Lazy=Ak;ka.Memo=Mk;ka.Portal=b3;ka.Profiler=Sk;ka.StrictMode=Tk;ka.Suspense=Ck;ka.isAsyncMode=function(n){return VX(n)||Vm(n)===T3};ka.isConcurrentMode=VX;ka.isContextConsumer=function(n){return Vm(n)===Ek};ka.isContextProvider=function(n){return Vm(n)===wk};ka.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===y3};ka.isForwardRef=function(n){return Vm(n)===$k};ka.isFragment=function(n){return Vm(n)===bk};ka.isLazy=function(n){return Vm(n)===Ak};ka.isMemo=function(n){return Vm(n)===Mk};ka.isPortal=function(n){return Vm(n)===b3};ka.isProfiler=function(n){return Vm(n)===Sk};ka.isStrictMode=function(n){return Vm(n)===Tk};ka.isSuspense=function(n){return Vm(n)===Ck};ka.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===bk||n===xk||n===Sk||n===Tk||n===Ck||n===sce||typeof n=="object"&&n!==null&&(n.$$typeof===Ak||n.$$typeof===Mk||n.$$typeof===wk||n.$$typeof===Ek||n.$$typeof===$k||n.$$typeof===ace||n.$$typeof===lce||n.$$typeof===uce||n.$$typeof===oce)};ka.typeOf=Vm;WX.exports=ka;var cce=WX.exports,jX=cce,hce={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},dce={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},YX={};YX[jX.ForwardRef]=hce;YX[jX.Memo]=dce;var fce=!0;function pce(n,e,t){var r="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):r+=s+" "}),r}var XX=function(e,t,r){var s=e.key+"-"+t.name;(r===!1||fce===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},KX=function(e,t,r){XX(e,t,r);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var o=t;do e.insert(t===o?"."+s:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function mce(n){for(var e=0,t,r=0,s=n.length;s>=4;++r,s-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var gce={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},vce=/[A-Z]|^ms/g,_ce=/_EMO_([^_]+?)_([^]*?)_EMO_/g,JX=function(e){return e.charCodeAt(1)===45},gH=function(e){return e!=null&&typeof e!="boolean"},QO=NX(function(n){return JX(n)?n:n.replace(vce,"-$&").toLowerCase()}),vH=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(_ce,function(r,s,o){return ev={name:s,styles:o,next:ev},s})}return gce[e]!==1&&!JX(e)&&typeof t=="number"&&t!==0?t+"px":t};function L$(n,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return ev={name:t.name,styles:t.styles,next:ev},t.name;if(t.styles!==void 0){var r=t.next;if(r!==void 0)for(;r!==void 0;)ev={name:r.name,styles:r.styles,next:ev},r=r.next;var s=t.styles+";";return s}return yce(n,e,t)}case"function":{if(n!==void 0){var o=ev,l=t(n);return ev=o,L$(n,e,l)}break}}if(e==null)return t;var u=e[t];return u!==void 0?u:t}function yce(n,e,t){var r="";if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=L$(n,e,t[s])+";";else for(var o in t){var l=t[o];if(typeof l!="object")e!=null&&e[l]!==void 0?r+=o+"{"+e[l]+"}":gH(l)&&(r+=QO(o)+":"+vH(o,l)+";");else if(Array.isArray(l)&&typeof l[0]=="string"&&(e==null||e[l[0]]===void 0))for(var u=0;u<l.length;u++)gH(l[u])&&(r+=QO(o)+":"+vH(o,l[u])+";");else{var h=L$(n,e,l);switch(o){case"animation":case"animationName":{r+=QO(o)+":"+h+";";break}default:r+=o+"{"+h+"}"}}}return r}var _H=/label:\s*([^\s;\n{]+)\s*(;|$)/g,ev,S3=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,o="";ev=void 0;var l=e[0];l==null||l.raw===void 0?(s=!1,o+=L$(r,t,l)):o+=l[0];for(var u=1;u<e.length;u++)o+=L$(r,t,e[u]),s&&(o+=l[u]);_H.lastIndex=0;for(var h="",f;(f=_H.exec(o))!==null;)h+="-"+f[1];var g=mce(o)+h;return{name:g,styles:o,next:ev}},bce=function(e){return e()},qX=HN.useInsertionEffect?HN.useInsertionEffect:!1,Tce=qX||bce,yH=qX||de.useLayoutEffect,QX=de.createContext(typeof HTMLElement<"u"?GX({key:"css"}):null),Sce=QX.Provider,ZX=function(e){return de.forwardRef(function(t,r){var s=de.useContext(QX);return e(t,s,r)})},Ik=de.createContext({}),wce=ZX(function(n,e){var t=n.styles,r=S3([t],void 0,de.useContext(Ik)),s=de.useRef();return yH(function(){var o=e.key+"-global",l=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),u=!1,h=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return e.sheet.tags.length&&(l.before=e.sheet.tags[0]),h!==null&&(u=!0,h.setAttribute("data-emotion",o),l.hydrate([h])),s.current=[l,u],function(){l.flush()}},[e]),yH(function(){var o=s.current,l=o[0],u=o[1];if(u){o[1]=!1;return}if(r.next!==void 0&&KX(e,r.next,!0),l.tags.length){var h=l.tags[l.tags.length-1].nextElementSibling;l.before=h,l.flush()}e.insert("",r,l,!1)},[e,r.name]),null});function eK(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return S3(e)}var Rk=function(){var e=eK.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Ece=Iue,xce=function(e){return e!=="theme"},bH=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Ece:xce},TH=function(e,t,r){var s;if(t){var o=t.shouldForwardProp;s=e.__emotion_forwardProp&&o?function(l){return e.__emotion_forwardProp(l)&&o(l)}:o}return typeof s!="function"&&r&&(s=e.__emotion_forwardProp),s},$ce=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return XX(t,r,s),Tce(function(){return KX(t,r,s)}),null},Cce=function n(e,t){var r=e.__emotion_real===e,s=r&&e.__emotion_base||e,o,l;t!==void 0&&(o=t.label,l=t.target);var u=TH(e,t,r),h=u||bH(s),f=!h("as");return function(){var g=arguments,y=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&y.push("label:"+o+";"),g[0]==null||g[0].raw===void 0)y.push.apply(y,g);else{y.push(g[0][0]);for(var b=g.length,S=1;S<b;S++)y.push(g[S],g[0][S])}var C=ZX(function(M,A,k){var O=f&&M.as||s,P="",D=[],U=M;if(M.theme==null){U={};for(var H in M)U[H]=M[H];U.theme=de.useContext(Ik)}typeof M.className=="string"?P=pce(A.registered,D,M.className):M.className!=null&&(P=M.className+" ");var V=S3(y.concat(D),A.registered,U);P+=A.key+"-"+V.name,l!==void 0&&(P+=" "+l);var z=f&&u===void 0?bH(O):h,Z={};for(var oe in M)f&&oe==="as"||z(oe)&&(Z[oe]=M[oe]);return Z.className=P,Z.ref=k,de.createElement(de.Fragment,null,de.createElement($ce,{cache:A,serialized:V,isStringTag:typeof O=="string"}),de.createElement(O,Z))});return C.displayName=o!==void 0?o:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",C.defaultProps=e.defaultProps,C.__emotion_real=C,C.__emotion_base=s,C.__emotion_styles=y,C.__emotion_forwardProp=u,Object.defineProperty(C,"toString",{value:function(){return"."+l}}),C.withComponent=function(M,A){return n(M,Ve({},t,A,{shouldForwardProp:TH(C,A,!0)})).apply(void 0,y)},C}},Mce=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],XD=Cce.bind();Mce.forEach(function(n){XD[n]=XD(n)});var tK={exports:{}},Ace="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ice=Ace,Rce=Ice;function nK(){}function rK(){}rK.resetWarningCache=nK;var kce=function(){function n(r,s,o,l,u,h){if(h!==Rce){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:rK,resetWarningCache:nK};return t.PropTypes=t,t};tK.exports=kce();var Oce=tK.exports;const Qt=Jy(Oce);let KD;typeof document=="object"&&(KD=GX({key:"css",prepend:!0}));function Lce(n){const{injectFirst:e,children:t}=n;return e&&KD?Ae.jsx(Sce,{value:KD,children:t}):t}function Nce(n){return n==null||Object.keys(n).length===0}function iK(n){const{styles:e,defaultTheme:t={}}=n,r=typeof e=="function"?s=>e(Nce(s)?t:s):e;return Ae.jsx(wce,{styles:r})}function w3(n,e){return XD(n,e)}const sK=(n,e)=>{Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))},Dce=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:iK,StyledEngineProvider:Lce,ThemeContext:Ik,css:eK,default:w3,internal_processStyles:sK,keyframes:Rk},Symbol.toStringTag,{value:"Module"}));function h_(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function oK(n){if(!h_(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=oK(n[t])}),e}function pp(n,e,t={clone:!0}){const r=t.clone?Ve({},n):n;return h_(n)&&h_(e)&&Object.keys(e).forEach(s=>{s!=="__proto__"&&(h_(e[s])&&s in n&&h_(n[s])?r[s]=pp(n[s],e[s],t):t.clone?r[s]=h_(e[s])?oK(e[s]):e[s]:r[s]=e[s])}),r}const Pce=Object.freeze(Object.defineProperty({__proto__:null,default:pp,isPlainObject:h_},Symbol.toStringTag,{value:"Module"})),Bce=["values","unit","step"],Fce=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,r)=>t.val-r.val),e.reduce((t,r)=>Ve({},t,{[r.key]:r.val}),{})};function aK(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5}=n,s=yr(n,Bce),o=Fce(e),l=Object.keys(o);function u(b){return`@media (min-width:${typeof e[b]=="number"?e[b]:b}${t})`}function h(b){return`@media (max-width:${(typeof e[b]=="number"?e[b]:b)-r/100}${t})`}function f(b,S){const C=l.indexOf(S);return`@media (min-width:${typeof e[b]=="number"?e[b]:b}${t}) and (max-width:${(C!==-1&&typeof e[l[C]]=="number"?e[l[C]]:S)-r/100}${t})`}function g(b){return l.indexOf(b)+1<l.length?f(b,l[l.indexOf(b)+1]):u(b)}function y(b){const S=l.indexOf(b);return S===0?u(l[1]):S===l.length-1?h(l[S]):f(b,l[l.indexOf(b)+1]).replace("@media","@media not all and")}return Ve({keys:l,values:o,up:u,down:h,between:f,only:g,not:y,unit:t},s)}const zce={borderRadius:4},Uce=zce;function Qx(n,e){return e?pp(n,e,{clone:!1}):n}const E3={xs:0,sm:600,md:900,lg:1200,xl:1536},SH={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${E3[n]}px)`};function em(n,e,t){const r=n.theme||{};if(Array.isArray(e)){const o=r.breakpoints||SH;return e.reduce((l,u,h)=>(l[o.up(o.keys[h])]=t(e[h]),l),{})}if(typeof e=="object"){const o=r.breakpoints||SH;return Object.keys(e).reduce((l,u)=>{if(Object.keys(o.values||E3).indexOf(u)!==-1){const h=o.up(u);l[h]=t(e[u],u)}else{const h=u;l[h]=e[h]}return l},{})}return t(e)}function lK(n={}){var e;return((e=n.keys)==null?void 0:e.reduce((r,s)=>{const o=n.up(s);return r[o]={},r},{}))||{}}function uK(n,e){return n.reduce((t,r)=>{const s=t[r];return(!s||Object.keys(s).length===0)&&delete t[r],t},e)}function Hce(n,...e){const t=lK(n),r=[t,...e].reduce((s,o)=>pp(s,o),{});return uK(Object.keys(t),r)}function Gce(n,e){if(typeof n!="object")return{};const t={},r=Object.keys(e);return Array.isArray(n)?r.forEach((s,o)=>{o<n.length&&(t[s]=!0)}):r.forEach(s=>{n[s]!=null&&(t[s]=!0)}),t}function D1({values:n,breakpoints:e,base:t}){const r=t||Gce(n,e),s=Object.keys(r);if(s.length===0)return n;let o;return s.reduce((l,u,h)=>(Array.isArray(n)?(l[u]=n[h]!=null?n[h]:n[o],o=h):typeof n=="object"?(l[u]=n[u]!=null?n[u]:n[o],o=u):l[u]=n,l),{})}function vr(n){if(typeof n!="string")throw new Error(Z1(7));return n.charAt(0).toUpperCase()+n.slice(1)}const Wce=Object.freeze(Object.defineProperty({__proto__:null,default:vr},Symbol.toStringTag,{value:"Module"}));function kk(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const r=`vars.${e}`.split(".").reduce((s,o)=>s&&s[o]?s[o]:null,n);if(r!=null)return r}return e.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,n)}function dR(n,e,t,r=t){let s;return typeof n=="function"?s=n(t):Array.isArray(n)?s=n[t]||r:s=kk(n,t)||r,e&&(s=e(s,r,n)),s}function ph(n){const{prop:e,cssProperty:t=n.prop,themeKey:r,transform:s}=n,o=l=>{if(l[e]==null)return null;const u=l[e],h=l.theme,f=kk(h,r)||{};return em(l,u,y=>{let b=dR(f,s,y);return y===b&&typeof y=="string"&&(b=dR(f,s,`${e}${y==="default"?"":vr(y)}`,y)),t===!1?b:{[t]:b}})};return o.propTypes={},o.filterProps=[e],o}function Vce(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const jce={m:"margin",p:"padding"},Yce={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},wH={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Xce=Vce(n=>{if(n.length>2)if(wH[n])n=wH[n];else return[n];const[e,t]=n.split(""),r=jce[e],s=Yce[t]||"";return Array.isArray(s)?s.map(o=>r+o):[r+s]}),x3=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],$3=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...x3,...$3];function wC(n,e,t,r){var s;const o=(s=kk(n,e,!1))!=null?s:t;return typeof o=="number"?l=>typeof l=="string"?l:o*l:Array.isArray(o)?l=>typeof l=="string"?l:o[l]:typeof o=="function"?o:()=>{}}function C3(n){return wC(n,"spacing",8)}function eT(n,e){if(typeof e=="string"||e==null)return e;const t=Math.abs(e),r=n(t);return e>=0?r:typeof r=="number"?-r:`-${r}`}function Kce(n,e){return t=>n.reduce((r,s)=>(r[s]=eT(e,t),r),{})}function Jce(n,e,t,r){if(e.indexOf(t)===-1)return null;const s=Xce(t),o=Kce(s,r),l=n[t];return em(n,l,o)}function cK(n,e){const t=C3(n.theme);return Object.keys(n).map(r=>Jce(n,e,r,t)).reduce(Qx,{})}function kc(n){return cK(n,x3)}kc.propTypes={};kc.filterProps=x3;function Oc(n){return cK(n,$3)}Oc.propTypes={};Oc.filterProps=$3;function qce(n=8){if(n.mui)return n;const e=C3({spacing:n}),t=(...r)=>(r.length===0?[1]:r).map(o=>{const l=e(o);return typeof l=="number"?`${l}px`:l}).join(" ");return t.mui=!0,t}function Ok(...n){const e=n.reduce((r,s)=>(s.filterProps.forEach(o=>{r[o]=s}),r),{}),t=r=>Object.keys(r).reduce((s,o)=>e[o]?Qx(s,e[o](r)):s,{});return t.propTypes={},t.filterProps=n.reduce((r,s)=>r.concat(s.filterProps),[]),t}function bg(n){return typeof n!="number"?n:`${n}px solid`}function Ag(n,e){return ph({prop:n,themeKey:"borders",transform:e})}const Qce=Ag("border",bg),Zce=Ag("borderTop",bg),ehe=Ag("borderRight",bg),the=Ag("borderBottom",bg),nhe=Ag("borderLeft",bg),rhe=Ag("borderColor"),ihe=Ag("borderTopColor"),she=Ag("borderRightColor"),ohe=Ag("borderBottomColor"),ahe=Ag("borderLeftColor"),lhe=Ag("outline",bg),uhe=Ag("outlineColor"),Lk=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=wC(n.theme,"shape.borderRadius",4),t=r=>({borderRadius:eT(e,r)});return em(n,n.borderRadius,t)}return null};Lk.propTypes={};Lk.filterProps=["borderRadius"];Ok(Qce,Zce,ehe,the,nhe,rhe,ihe,she,ohe,ahe,Lk,lhe,uhe);const Nk=n=>{if(n.gap!==void 0&&n.gap!==null){const e=wC(n.theme,"spacing",8),t=r=>({gap:eT(e,r)});return em(n,n.gap,t)}return null};Nk.propTypes={};Nk.filterProps=["gap"];const Dk=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=wC(n.theme,"spacing",8),t=r=>({columnGap:eT(e,r)});return em(n,n.columnGap,t)}return null};Dk.propTypes={};Dk.filterProps=["columnGap"];const Pk=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=wC(n.theme,"spacing",8),t=r=>({rowGap:eT(e,r)});return em(n,n.rowGap,t)}return null};Pk.propTypes={};Pk.filterProps=["rowGap"];const che=ph({prop:"gridColumn"}),hhe=ph({prop:"gridRow"}),dhe=ph({prop:"gridAutoFlow"}),fhe=ph({prop:"gridAutoColumns"}),phe=ph({prop:"gridAutoRows"}),mhe=ph({prop:"gridTemplateColumns"}),ghe=ph({prop:"gridTemplateRows"}),vhe=ph({prop:"gridTemplateAreas"}),_he=ph({prop:"gridArea"});Ok(Nk,Dk,Pk,che,hhe,dhe,fhe,phe,mhe,ghe,vhe,_he);function _w(n,e){return e==="grey"?e:n}const yhe=ph({prop:"color",themeKey:"palette",transform:_w}),bhe=ph({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:_w}),The=ph({prop:"backgroundColor",themeKey:"palette",transform:_w});Ok(yhe,bhe,The);function Im(n){return n<=1&&n!==0?`${n*100}%`:n}const She=ph({prop:"width",transform:Im}),M3=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var r,s;const o=((r=n.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[t])||E3[t];return o?((s=n.theme)==null||(s=s.breakpoints)==null?void 0:s.unit)!=="px"?{maxWidth:`${o}${n.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:Im(t)}};return em(n,n.maxWidth,e)}return null};M3.filterProps=["maxWidth"];const whe=ph({prop:"minWidth",transform:Im}),Ehe=ph({prop:"height",transform:Im}),xhe=ph({prop:"maxHeight",transform:Im}),$he=ph({prop:"minHeight",transform:Im});ph({prop:"size",cssProperty:"width",transform:Im});ph({prop:"size",cssProperty:"height",transform:Im});const Che=ph({prop:"boxSizing"});Ok(She,M3,whe,Ehe,xhe,$he,Che);const Mhe={border:{themeKey:"borders",transform:bg},borderTop:{themeKey:"borders",transform:bg},borderRight:{themeKey:"borders",transform:bg},borderBottom:{themeKey:"borders",transform:bg},borderLeft:{themeKey:"borders",transform:bg},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:bg},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Lk},color:{themeKey:"palette",transform:_w},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:_w},backgroundColor:{themeKey:"palette",transform:_w},p:{style:Oc},pt:{style:Oc},pr:{style:Oc},pb:{style:Oc},pl:{style:Oc},px:{style:Oc},py:{style:Oc},padding:{style:Oc},paddingTop:{style:Oc},paddingRight:{style:Oc},paddingBottom:{style:Oc},paddingLeft:{style:Oc},paddingX:{style:Oc},paddingY:{style:Oc},paddingInline:{style:Oc},paddingInlineStart:{style:Oc},paddingInlineEnd:{style:Oc},paddingBlock:{style:Oc},paddingBlockStart:{style:Oc},paddingBlockEnd:{style:Oc},m:{style:kc},mt:{style:kc},mr:{style:kc},mb:{style:kc},ml:{style:kc},mx:{style:kc},my:{style:kc},margin:{style:kc},marginTop:{style:kc},marginRight:{style:kc},marginBottom:{style:kc},marginLeft:{style:kc},marginX:{style:kc},marginY:{style:kc},marginInline:{style:kc},marginInlineStart:{style:kc},marginInlineEnd:{style:kc},marginBlock:{style:kc},marginBlockStart:{style:kc},marginBlockEnd:{style:kc},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Nk},rowGap:{style:Pk},columnGap:{style:Dk},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Im},maxWidth:{style:M3},minWidth:{transform:Im},height:{transform:Im},maxHeight:{transform:Im},minHeight:{transform:Im},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},EC=Mhe;function Ahe(...n){const e=n.reduce((r,s)=>r.concat(Object.keys(s)),[]),t=new Set(e);return n.every(r=>t.size===Object.keys(r).length)}function Ihe(n,e){return typeof n=="function"?n(e):n}function hK(){function n(t,r,s,o){const l={[t]:r,theme:s},u=o[t];if(!u)return{[t]:r};const{cssProperty:h=t,themeKey:f,transform:g,style:y}=u;if(r==null)return null;if(f==="typography"&&r==="inherit")return{[t]:r};const b=kk(s,f)||{};return y?y(l):em(l,r,C=>{let M=dR(b,g,C);return C===M&&typeof C=="string"&&(M=dR(b,g,`${t}${C==="default"?"":vr(C)}`,C)),h===!1?M:{[h]:M}})}function e(t){var r;const{sx:s,theme:o={}}=t||{};if(!s)return null;const l=(r=o.unstable_sxConfig)!=null?r:EC;function u(h){let f=h;if(typeof h=="function")f=h(o);else if(typeof h!="object")return h;if(!f)return null;const g=lK(o.breakpoints),y=Object.keys(g);let b=g;return Object.keys(f).forEach(S=>{const C=Ihe(f[S],o);if(C!=null)if(typeof C=="object")if(l[S])b=Qx(b,n(S,C,o,l));else{const M=em({theme:o},C,A=>({[S]:A}));Ahe(M,C)?b[S]=e({sx:C,theme:o}):b=Qx(b,M)}else b=Qx(b,n(S,C,o,l))}),uK(y,b)}return Array.isArray(s)?s.map(u):u(s)}return e}const dK=hK();dK.filterProps=["sx"];const xC=dK;function fK(n,e){const t=this;return t.vars&&typeof t.getColorSchemeSelector=="function"?{[t.getColorSchemeSelector(n).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:t.palette.mode===n?e:{}}const Rhe=["breakpoints","palette","spacing","shape"];function cE(n={},...e){const{breakpoints:t={},palette:r={},spacing:s,shape:o={}}=n,l=yr(n,Rhe),u=aK(t),h=qce(s);let f=pp({breakpoints:u,direction:"ltr",components:{},palette:Ve({mode:"light"},r),spacing:h,shape:Ve({},Uce,o)},l);return f.applyStyles=fK,f=e.reduce((g,y)=>pp(g,y),f),f.unstable_sxConfig=Ve({},EC,l==null?void 0:l.unstable_sxConfig),f.unstable_sx=function(y){return xC({sx:y,theme:this})},f}const khe=Object.freeze(Object.defineProperty({__proto__:null,default:cE,private_createBreakpoints:aK,unstable_applyStyles:fK},Symbol.toStringTag,{value:"Module"}));function Ohe(n){return Object.keys(n).length===0}function Lhe(n=null){const e=de.useContext(Ik);return!e||Ohe(e)?n:e}const Nhe=cE();function Bk(n=Nhe){return Lhe(n)}function Dhe({styles:n,themeId:e,defaultTheme:t={}}){const r=Bk(t),s=typeof n=="function"?n(e&&r[e]||r):n;return Ae.jsx(iK,{styles:s})}const Phe=["sx"],Bhe=n=>{var e,t;const r={systemProps:{},otherProps:{}},s=(e=n==null||(t=n.theme)==null?void 0:t.unstable_sxConfig)!=null?e:EC;return Object.keys(n).forEach(o=>{s[o]?r.systemProps[o]=n[o]:r.otherProps[o]=n[o]}),r};function $C(n){const{sx:e}=n,t=yr(n,Phe),{systemProps:r,otherProps:s}=Bhe(t);let o;return Array.isArray(e)?o=[r,...e]:typeof e=="function"?o=(...l)=>{const u=e(...l);return h_(u)?Ve({},r,u):r}:o=Ve({},r,e),Ve({},s,{sx:o})}const Fhe=Object.freeze(Object.defineProperty({__proto__:null,default:xC,extendSxProp:$C,unstable_createStyleFunctionSx:hK,unstable_defaultSxConfig:EC},Symbol.toStringTag,{value:"Module"})),EH=n=>n,zhe=()=>{let n=EH;return{configure(e){n=e},generate(e){return n(e)},reset(){n=EH}}},Uhe=zhe(),A3=Uhe;function pK(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=pK(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function kr(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=pK(n))&&(r&&(r+=" "),r+=e);return r}const Hhe=["className","component"];function Ghe(n={}){const{themeId:e,defaultTheme:t,defaultClassName:r="MuiBox-root",generateClassName:s}=n,o=w3("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(xC);return de.forwardRef(function(h,f){const g=Bk(t),y=$C(h),{className:b,component:S="div"}=y,C=yr(y,Hhe);return Ae.jsx(o,Ve({as:S,ref:f,className:kr(b,s?s(r):r),theme:e&&g[e]||g},C))})}const Whe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Fs(n,e,t="Mui"){const r=Whe[e];return r?`${t}-${r}`:`${A3.generate(n)}-${e}`}function Ks(n,e,t="Mui"){const r={};return e.forEach(s=>{r[s]=Fs(n,s,t)}),r}var mK={exports:{}},Oa={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I3=Symbol.for("react.element"),R3=Symbol.for("react.portal"),Fk=Symbol.for("react.fragment"),zk=Symbol.for("react.strict_mode"),Uk=Symbol.for("react.profiler"),Hk=Symbol.for("react.provider"),Gk=Symbol.for("react.context"),Vhe=Symbol.for("react.server_context"),Wk=Symbol.for("react.forward_ref"),Vk=Symbol.for("react.suspense"),jk=Symbol.for("react.suspense_list"),Yk=Symbol.for("react.memo"),Xk=Symbol.for("react.lazy"),jhe=Symbol.for("react.offscreen"),gK;gK=Symbol.for("react.module.reference");function Ig(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case I3:switch(n=n.type,n){case Fk:case Uk:case zk:case Vk:case jk:return n;default:switch(n=n&&n.$$typeof,n){case Vhe:case Gk:case Wk:case Xk:case Yk:case Hk:return n;default:return e}}case R3:return e}}}Oa.ContextConsumer=Gk;Oa.ContextProvider=Hk;Oa.Element=I3;Oa.ForwardRef=Wk;Oa.Fragment=Fk;Oa.Lazy=Xk;Oa.Memo=Yk;Oa.Portal=R3;Oa.Profiler=Uk;Oa.StrictMode=zk;Oa.Suspense=Vk;Oa.SuspenseList=jk;Oa.isAsyncMode=function(){return!1};Oa.isConcurrentMode=function(){return!1};Oa.isContextConsumer=function(n){return Ig(n)===Gk};Oa.isContextProvider=function(n){return Ig(n)===Hk};Oa.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===I3};Oa.isForwardRef=function(n){return Ig(n)===Wk};Oa.isFragment=function(n){return Ig(n)===Fk};Oa.isLazy=function(n){return Ig(n)===Xk};Oa.isMemo=function(n){return Ig(n)===Yk};Oa.isPortal=function(n){return Ig(n)===R3};Oa.isProfiler=function(n){return Ig(n)===Uk};Oa.isStrictMode=function(n){return Ig(n)===zk};Oa.isSuspense=function(n){return Ig(n)===Vk};Oa.isSuspenseList=function(n){return Ig(n)===jk};Oa.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===Fk||n===Uk||n===zk||n===Vk||n===jk||n===jhe||typeof n=="object"&&n!==null&&(n.$$typeof===Xk||n.$$typeof===Yk||n.$$typeof===Hk||n.$$typeof===Gk||n.$$typeof===Wk||n.$$typeof===gK||n.getModuleId!==void 0)};Oa.typeOf=Ig;mK.exports=Oa;var xH=mK.exports;const Yhe=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function vK(n){const e=`${n}`.match(Yhe);return e&&e[1]||""}function _K(n,e=""){return n.displayName||n.name||vK(n)||e}function $H(n,e,t){const r=_K(e);return n.displayName||(r!==""?`${t}(${r})`:t)}function Xhe(n){if(n!=null){if(typeof n=="string")return n;if(typeof n=="function")return _K(n,"Component");if(typeof n=="object")switch(n.$$typeof){case xH.ForwardRef:return $H(n,n.render,"ForwardRef");case xH.Memo:return $H(n,n.type,"memo");default:return}}}const Khe=Object.freeze(Object.defineProperty({__proto__:null,default:Xhe,getFunctionName:vK},Symbol.toStringTag,{value:"Module"})),Jhe=["ownerState"],qhe=["variants"],Qhe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Zhe(n){return Object.keys(n).length===0}function ede(n){return typeof n=="string"&&n.charCodeAt(0)>96}function ZO(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const tde=cE(),nde=n=>n&&n.charAt(0).toLowerCase()+n.slice(1);function BM({defaultTheme:n,theme:e,themeId:t}){return Zhe(e)?n:e[t]||e}function rde(n){return n?(e,t)=>t[n]:null}function gI(n,e){let{ownerState:t}=e,r=yr(e,Jhe);const s=typeof n=="function"?n(Ve({ownerState:t},r)):n;if(Array.isArray(s))return s.flatMap(o=>gI(o,Ve({ownerState:t},r)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:o=[]}=s;let u=yr(s,qhe);return o.forEach(h=>{let f=!0;typeof h.props=="function"?f=h.props(Ve({ownerState:t},r,t)):Object.keys(h.props).forEach(g=>{(t==null?void 0:t[g])!==h.props[g]&&r[g]!==h.props[g]&&(f=!1)}),f&&(Array.isArray(u)||(u=[u]),u.push(typeof h.style=="function"?h.style(Ve({ownerState:t},r,t)):h.style))}),u}return s}function ide(n={}){const{themeId:e,defaultTheme:t=tde,rootShouldForwardProp:r=ZO,slotShouldForwardProp:s=ZO}=n,o=l=>xC(Ve({},l,{theme:BM(Ve({},l,{defaultTheme:t,themeId:e}))}));return o.__mui_systemSx=!0,(l,u={})=>{sK(l,U=>U.filter(H=>!(H!=null&&H.__mui_systemSx)));const{name:h,slot:f,skipVariantsResolver:g,skipSx:y,overridesResolver:b=rde(nde(f))}=u,S=yr(u,Qhe),C=g!==void 0?g:f&&f!=="Root"&&f!=="root"||!1,M=y||!1;let A,k=ZO;f==="Root"||f==="root"?k=r:f?k=s:ede(l)&&(k=void 0);const O=w3(l,Ve({shouldForwardProp:k,label:A},S)),P=U=>typeof U=="function"&&U.__emotion_real!==U||h_(U)?H=>gI(U,Ve({},H,{theme:BM({theme:H.theme,defaultTheme:t,themeId:e})})):U,D=(U,...H)=>{let V=P(U);const z=H?H.map(P):[];h&&b&&z.push(ue=>{const q=BM(Ve({},ue,{defaultTheme:t,themeId:e}));if(!q.components||!q.components[h]||!q.components[h].styleOverrides)return null;const ae=q.components[h].styleOverrides,le={};return Object.entries(ae).forEach(([ce,ge])=>{le[ce]=gI(ge,Ve({},ue,{theme:q}))}),b(ue,le)}),h&&!C&&z.push(ue=>{var q;const ae=BM(Ve({},ue,{defaultTheme:t,themeId:e})),le=ae==null||(q=ae.components)==null||(q=q[h])==null?void 0:q.variants;return gI({variants:le},Ve({},ue,{theme:ae}))}),M||z.push(o);const Z=z.length-H.length;if(Array.isArray(U)&&Z>0){const ue=new Array(Z).fill("");V=[...U,...ue],V.raw=[...U.raw,...ue]}const oe=O(V,...z);return l.muiName&&(oe.muiName=l.muiName),oe};return O.withConfig&&(D.withConfig=O.withConfig),D}}const yK=ide();function k3(n,e){const t=Ve({},e);return Object.keys(n).forEach(r=>{if(r.toString().match(/^(components|slots)$/))t[r]=Ve({},n[r],t[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const s=n[r]||{},o=e[r];t[r]={},!o||!Object.keys(o)?t[r]=s:!s||!Object.keys(s)?t[r]=o:(t[r]=Ve({},o),Object.keys(s).forEach(l=>{t[r][l]=k3(s[l],o[l])}))}else t[r]===void 0&&(t[r]=n[r])}),t}function sde(n){const{theme:e,name:t,props:r}=n;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?r:k3(e.components[t].defaultProps,r)}function O3({props:n,name:e,defaultTheme:t,themeId:r}){let s=Bk(t);return r&&(s=s[r]||s),sde({theme:s,name:e,props:n})}const E_=typeof window<"u"?de.useLayoutEffect:de.useEffect;function ode(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}const ade=Object.freeze(Object.defineProperty({__proto__:null,default:ode},Symbol.toStringTag,{value:"Module"}));function JD(...n){return n.reduce((e,t)=>t==null?e:function(...s){e.apply(this,s),t.apply(this,s)},()=>{})}function CC(n,e=166){let t;function r(...s){const o=()=>{n.apply(this,s)};clearTimeout(t),t=setTimeout(o,e)}return r.clear=()=>{clearTimeout(t)},r}function lde(n,e){return()=>null}function vI(n,e){var t,r;return de.isValidElement(n)&&e.indexOf((t=n.type.muiName)!=null?t:(r=n.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function mp(n){return n&&n.ownerDocument||document}function gv(n){return mp(n).defaultView||window}function ude(n,e){return()=>null}function fR(n,e){typeof n=="function"?n(e):n&&(n.current=e)}let CH=0;function cde(n){const[e,t]=de.useState(n),r=n||e;return de.useEffect(()=>{e==null&&(CH+=1,t(`mui-${CH}`))},[e]),r}const MH=HN.useId;function Kk(n){if(MH!==void 0){const e=MH();return n??e}return cde(n)}function hde(n,e,t,r,s){return null}function pR({controlled:n,default:e,name:t,state:r="value"}){const{current:s}=de.useRef(n!==void 0),[o,l]=de.useState(e),u=s?n:o,h=de.useCallback(f=>{s||l(f)},[]);return[u,h]}function sv(n){const e=de.useRef(n);return E_(()=>{e.current=n}),de.useRef((...t)=>(0,e.current)(...t)).current}function _p(...n){return de.useMemo(()=>n.every(e=>e==null)?null:e=>{n.forEach(t=>{fR(t,e)})},n)}const AH={};function dde(n,e){const t=de.useRef(AH);return t.current===AH&&(t.current=n(e)),t}const fde=[];function pde(n){de.useEffect(n,fde)}class Jk{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new Jk}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function bK(){const n=dde(Jk.create).current;return pde(n.disposeEffect),n}let qk=!0,qD=!1;const mde=new Jk,gde={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function vde(n){const{type:e,tagName:t}=n;return!!(t==="INPUT"&&gde[e]&&!n.readOnly||t==="TEXTAREA"&&!n.readOnly||n.isContentEditable)}function _de(n){n.metaKey||n.altKey||n.ctrlKey||(qk=!0)}function eL(){qk=!1}function yde(){this.visibilityState==="hidden"&&qD&&(qk=!0)}function bde(n){n.addEventListener("keydown",_de,!0),n.addEventListener("mousedown",eL,!0),n.addEventListener("pointerdown",eL,!0),n.addEventListener("touchstart",eL,!0),n.addEventListener("visibilitychange",yde,!0)}function Tde(n){const{target:e}=n;try{return e.matches(":focus-visible")}catch{}return qk||vde(e)}function TK(){const n=de.useCallback(s=>{s!=null&&bde(s.ownerDocument)},[]),e=de.useRef(!1);function t(){return e.current?(qD=!0,mde.start(100,()=>{qD=!1}),e.current=!1,!0):!1}function r(s){return Tde(s)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:t,ref:n}}function SK(n){const e=n.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}let gS;function wK(){if(gS)return gS;const n=document.createElement("div"),e=document.createElement("div");return e.style.width="10px",e.style.height="1px",n.appendChild(e),n.dir="rtl",n.style.fontSize="14px",n.style.width="4px",n.style.height="1px",n.style.position="absolute",n.style.top="-1000px",n.style.overflow="scroll",document.body.appendChild(n),gS="reverse",n.scrollLeft>0?gS="default":(n.scrollLeft=1,n.scrollLeft===0&&(gS="negative")),document.body.removeChild(n),gS}function Sde(n,e){const t=n.scrollLeft;if(e!=="rtl")return t;switch(wK()){case"negative":return n.scrollWidth-n.clientWidth+t;case"reverse":return n.scrollWidth-n.clientWidth-t;default:return t}}function Js(n,e,t=void 0){const r={};return Object.keys(n).forEach(s=>{r[s]=n[s].reduce((o,l)=>{if(l){const u=e(l);u!==""&&o.push(u),t&&t[l]&&o.push(t[l])}return o},[]).join(" ")}),r}const wde=de.createContext(),L3=()=>{const n=de.useContext(wde);return n??!1};function N$(n){"@babel/helpers - typeof";return N$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N$(n)}function Ede(n,e){if(N$(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(N$(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function xde(n){var e=Ede(n,"string");return N$(e)=="symbol"?e:e+""}const $de=["className","component","disableGutters","fixed","maxWidth","classes"],Cde=cE(),Mde=yK("div",{name:"MuiContainer",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`maxWidth${vr(String(t.maxWidth))}`],t.fixed&&e.fixed,t.disableGutters&&e.disableGutters]}}),Ade=n=>O3({props:n,name:"MuiContainer",defaultTheme:Cde}),Ide=(n,e)=>{const t=h=>Fs(e,h),{classes:r,fixed:s,disableGutters:o,maxWidth:l}=n,u={root:["root",l&&`maxWidth${vr(String(l))}`,s&&"fixed",o&&"disableGutters"]};return Js(u,t,r)};function Rde(n={}){const{createStyledComponent:e=Mde,useThemeProps:t=Ade,componentName:r="MuiContainer"}=n,s=e(({theme:l,ownerState:u})=>Ve({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!u.disableGutters&&{paddingLeft:l.spacing(2),paddingRight:l.spacing(2),[l.breakpoints.up("sm")]:{paddingLeft:l.spacing(3),paddingRight:l.spacing(3)}}),({theme:l,ownerState:u})=>u.fixed&&Object.keys(l.breakpoints.values).reduce((h,f)=>{const g=f,y=l.breakpoints.values[g];return y!==0&&(h[l.breakpoints.up(g)]={maxWidth:`${y}${l.breakpoints.unit}`}),h},{}),({theme:l,ownerState:u})=>Ve({},u.maxWidth==="xs"&&{[l.breakpoints.up("xs")]:{maxWidth:Math.max(l.breakpoints.values.xs,444)}},u.maxWidth&&u.maxWidth!=="xs"&&{[l.breakpoints.up(u.maxWidth)]:{maxWidth:`${l.breakpoints.values[u.maxWidth]}${l.breakpoints.unit}`}}));return de.forwardRef(function(u,h){const f=t(u),{className:g,component:y="div",disableGutters:b=!1,fixed:S=!1,maxWidth:C="lg"}=f,M=yr(f,$de),A=Ve({},f,{component:y,disableGutters:b,fixed:S,maxWidth:C}),k=Ide(A,r);return Ae.jsx(s,Ve({as:y,ownerState:A,className:kr(k.root,g),ref:h},M))})}const kde=["component","direction","spacing","divider","children","className","useFlexGap"],Ode=cE(),Lde=yK("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root});function Nde(n){return O3({props:n,name:"MuiStack",defaultTheme:Ode})}function Dde(n,e){const t=de.Children.toArray(n).filter(Boolean);return t.reduce((r,s,o)=>(r.push(s),o<t.length-1&&r.push(de.cloneElement(e,{key:`separator-${o}`})),r),[])}const Pde=n=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[n],Bde=({ownerState:n,theme:e})=>{let t=Ve({display:"flex",flexDirection:"column"},em({theme:e},D1({values:n.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r})));if(n.spacing){const r=C3(e),s=Object.keys(e.breakpoints.values).reduce((h,f)=>((typeof n.spacing=="object"&&n.spacing[f]!=null||typeof n.direction=="object"&&n.direction[f]!=null)&&(h[f]=!0),h),{}),o=D1({values:n.direction,base:s}),l=D1({values:n.spacing,base:s});typeof o=="object"&&Object.keys(o).forEach((h,f,g)=>{if(!o[h]){const b=f>0?o[g[f-1]]:"column";o[h]=b}}),t=pp(t,em({theme:e},l,(h,f)=>n.useFlexGap?{gap:eT(r,h)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Pde(f?o[f]:n.direction)}`]:eT(r,h)}}))}return t=Hce(e.breakpoints,t),t};function Fde(n={}){const{createStyledComponent:e=Lde,useThemeProps:t=Nde,componentName:r="MuiStack"}=n,s=()=>Js({root:["root"]},h=>Fs(r,h),{}),o=e(Bde);return de.forwardRef(function(h,f){const g=t(h),y=$C(g),{component:b="div",direction:S="column",spacing:C=0,divider:M,children:A,className:k,useFlexGap:O=!1}=y,P=yr(y,kde),D={direction:S,spacing:C,useFlexGap:O},U=s();return Ae.jsx(o,Ve({as:b,ownerState:D,ref:f,className:kr(U.root,k)},P,{children:M?Dde(A,M):A}))})}function zde(n,e){return Ve({toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}}},e)}var mh={},EK={exports:{}};(function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(EK);var hE=EK.exports;const Ude=Sv(Cue),Hde=Sv(ade);var xK=hE;Object.defineProperty(mh,"__esModule",{value:!0});var Sg=mh.alpha=RK;mh.blend=Zde;mh.colorChannel=void 0;var $K=mh.darken=D3;mh.decomposeColor=Cg;mh.emphasize=kK;var Gde=mh.getContrastRatio=Xde;mh.getLuminance=mR;mh.hexToRgb=MK;mh.hslToRgb=IK;var CK=mh.lighten=P3;mh.private_safeAlpha=Kde;mh.private_safeColorChannel=void 0;mh.private_safeDarken=Jde;mh.private_safeEmphasize=Qde;mh.private_safeLighten=qde;mh.recomposeColor=dE;mh.rgbToHex=Yde;var IH=xK(Ude),Wde=xK(Hde);function N3(n,e=0,t=1){return(0,Wde.default)(n,e,t)}function MK(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(r=>r+r)),t?`rgb${t.length===4?"a":""}(${t.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Vde(n){const e=n.toString(16);return e.length===1?`0${e}`:e}function Cg(n){if(n.type)return n;if(n.charAt(0)==="#")return Cg(MK(n));const e=n.indexOf("("),t=n.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(t)===-1)throw new Error((0,IH.default)(9,n));let r=n.substring(e+1,n.length-1),s;if(t==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s)===-1)throw new Error((0,IH.default)(10,s))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:t,values:r,colorSpace:s}}const AK=n=>{const e=Cg(n);return e.values.slice(0,3).map((t,r)=>e.type.indexOf("hsl")!==-1&&r!==0?`${t}%`:t).join(" ")};mh.colorChannel=AK;const jde=(n,e)=>{try{return AK(n)}catch{return n}};mh.private_safeColorChannel=jde;function dE(n){const{type:e,colorSpace:t}=n;let{values:r}=n;return e.indexOf("rgb")!==-1?r=r.map((s,o)=>o<3?parseInt(s,10):s):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${t} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function Yde(n){if(n.indexOf("#")===0)return n;const{values:e}=Cg(n);return`#${e.map((t,r)=>Vde(r===3?Math.round(255*t):t)).join("")}`}function IK(n){n=Cg(n);const{values:e}=n,t=e[0],r=e[1]/100,s=e[2]/100,o=r*Math.min(s,1-s),l=(f,g=(f+t/30)%12)=>s-o*Math.max(Math.min(g-3,9-g,1),-1);let u="rgb";const h=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return n.type==="hsla"&&(u+="a",h.push(e[3])),dE({type:u,values:h})}function mR(n){n=Cg(n);let e=n.type==="hsl"||n.type==="hsla"?Cg(IK(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Xde(n,e){const t=mR(n),r=mR(e);return(Math.max(t,r)+.05)/(Math.min(t,r)+.05)}function RK(n,e){return n=Cg(n),e=N3(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,dE(n)}function Kde(n,e,t){try{return RK(n,e)}catch{return n}}function D3(n,e){if(n=Cg(n),e=N3(e),n.type.indexOf("hsl")!==-1)n.values[2]*=1-e;else if(n.type.indexOf("rgb")!==-1||n.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)n.values[t]*=1-e;return dE(n)}function Jde(n,e,t){try{return D3(n,e)}catch{return n}}function P3(n,e){if(n=Cg(n),e=N3(e),n.type.indexOf("hsl")!==-1)n.values[2]+=(100-n.values[2])*e;else if(n.type.indexOf("rgb")!==-1)for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return dE(n)}function qde(n,e,t){try{return P3(n,e)}catch{return n}}function kK(n,e=.15){return mR(n)>.5?D3(n,e):P3(n,e)}function Qde(n,e,t){try{return kK(n,e)}catch{return n}}function Zde(n,e,t,r=1){const s=(h,f)=>Math.round((h**(1/r)*(1-t)+f**(1/r)*t)**r),o=Cg(n),l=Cg(e),u=[s(o.values[0],l.values[0]),s(o.values[1],l.values[1]),s(o.values[2],l.values[2])];return dE({type:"rgb",values:u})}const efe=["mode","contrastThreshold","tonalOffset"],RH={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:R$.white,default:R$.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},tL={text:{primary:R$.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:R$.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function kH(n,e,t,r){const s=r.light||r,o=r.dark||r*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=CK(n.main,s):e==="dark"&&(n.dark=$K(n.main,o)))}function tfe(n="light"){return n==="dark"?{main:fS[200],light:fS[50],dark:fS[400]}:{main:fS[700],light:fS[400],dark:fS[800]}}function nfe(n="light"){return n==="dark"?{main:dS[200],light:dS[50],dark:dS[400]}:{main:dS[500],light:dS[300],dark:dS[700]}}function rfe(n="light"){return n==="dark"?{main:hS[500],light:hS[300],dark:hS[700]}:{main:hS[700],light:hS[400],dark:hS[800]}}function ife(n="light"){return n==="dark"?{main:pS[400],light:pS[300],dark:pS[700]}:{main:pS[700],light:pS[500],dark:pS[900]}}function sfe(n="light"){return n==="dark"?{main:mS[400],light:mS[300],dark:mS[700]}:{main:mS[800],light:mS[500],dark:mS[900]}}function ofe(n="light"){return n==="dark"?{main:nx[400],light:nx[300],dark:nx[700]}:{main:"#ed6c02",light:nx[500],dark:nx[900]}}function afe(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:r=.2}=n,s=yr(n,efe),o=n.primary||tfe(e),l=n.secondary||nfe(e),u=n.error||rfe(e),h=n.info||ife(e),f=n.success||sfe(e),g=n.warning||ofe(e);function y(M){return Gde(M,tL.text.primary)>=t?tL.text.primary:RH.text.primary}const b=({color:M,name:A,mainShade:k=500,lightShade:O=300,darkShade:P=700})=>{if(M=Ve({},M),!M.main&&M[k]&&(M.main=M[k]),!M.hasOwnProperty("main"))throw new Error(Z1(11,A?` (${A})`:"",k));if(typeof M.main!="string")throw new Error(Z1(12,A?` (${A})`:"",JSON.stringify(M.main)));return kH(M,"light",O,r),kH(M,"dark",P,r),M.contrastText||(M.contrastText=y(M.main)),M},S={dark:tL,light:RH};return pp(Ve({common:Ve({},R$),mode:e,primary:b({color:o,name:"primary"}),secondary:b({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:b({color:u,name:"error"}),warning:b({color:g,name:"warning"}),info:b({color:h,name:"info"}),success:b({color:f,name:"success"}),grey:$ue,contrastThreshold:t,getContrastText:y,augmentColor:b,tonalOffset:r},S[e]),s)}const lfe=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function ufe(n){return Math.round(n*1e5)/1e5}const OH={textTransform:"uppercase"},LH='"Roboto", "Helvetica", "Arial", sans-serif';function cfe(n,e){const t=typeof e=="function"?e(n):e,{fontFamily:r=LH,fontSize:s=14,fontWeightLight:o=300,fontWeightRegular:l=400,fontWeightMedium:u=500,fontWeightBold:h=700,htmlFontSize:f=16,allVariants:g,pxToRem:y}=t,b=yr(t,lfe),S=s/14,C=y||(k=>`${k/f*S}rem`),M=(k,O,P,D,U)=>Ve({fontFamily:r,fontWeight:k,fontSize:C(O),lineHeight:P},r===LH?{letterSpacing:`${ufe(D/O)}em`}:{},U,g),A={h1:M(o,96,1.167,-1.5),h2:M(o,60,1.2,-.5),h3:M(l,48,1.167,0),h4:M(l,34,1.235,.25),h5:M(l,24,1.334,0),h6:M(u,20,1.6,.15),subtitle1:M(l,16,1.75,.15),subtitle2:M(u,14,1.57,.1),body1:M(l,16,1.5,.15),body2:M(l,14,1.43,.15),button:M(u,14,1.75,.4,OH),caption:M(l,12,1.66,.4),overline:M(l,12,2.66,1,OH),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return pp(Ve({htmlFontSize:f,pxToRem:C,fontFamily:r,fontSize:s,fontWeightLight:o,fontWeightRegular:l,fontWeightMedium:u,fontWeightBold:h},A),b,{clone:!1})}const hfe=.2,dfe=.14,ffe=.12;function Du(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${hfe})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${dfe})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${ffe})`].join(",")}const pfe=["none",Du(0,2,1,-1,0,1,1,0,0,1,3,0),Du(0,3,1,-2,0,2,2,0,0,1,5,0),Du(0,3,3,-2,0,3,4,0,0,1,8,0),Du(0,2,4,-1,0,4,5,0,0,1,10,0),Du(0,3,5,-1,0,5,8,0,0,1,14,0),Du(0,3,5,-1,0,6,10,0,0,1,18,0),Du(0,4,5,-2,0,7,10,1,0,2,16,1),Du(0,5,5,-3,0,8,10,1,0,3,14,2),Du(0,5,6,-3,0,9,12,1,0,3,16,2),Du(0,6,6,-3,0,10,14,1,0,4,18,3),Du(0,6,7,-4,0,11,15,1,0,4,20,3),Du(0,7,8,-4,0,12,17,2,0,5,22,4),Du(0,7,8,-4,0,13,19,2,0,5,24,4),Du(0,7,9,-4,0,14,21,2,0,5,26,4),Du(0,8,9,-5,0,15,22,2,0,6,28,5),Du(0,8,10,-5,0,16,24,2,0,6,30,5),Du(0,8,11,-5,0,17,26,2,0,6,32,5),Du(0,9,11,-5,0,18,28,2,0,7,34,6),Du(0,9,12,-6,0,19,29,2,0,7,36,6),Du(0,10,13,-6,0,20,31,3,0,8,38,7),Du(0,10,13,-6,0,21,33,3,0,8,40,7),Du(0,10,14,-6,0,22,35,3,0,8,42,7),Du(0,11,14,-7,0,23,36,3,0,9,44,8),Du(0,11,15,-7,0,24,38,3,0,9,46,8)],mfe=["duration","easing","delay"],gfe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},vfe={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function NH(n){return`${Math.round(n)}ms`}function _fe(n){if(!n)return 0;const e=n/36;return Math.round((4+15*e**.25+e/5)*10)}function yfe(n){const e=Ve({},gfe,n.easing),t=Ve({},vfe,n.duration);return Ve({getAutoHeightDuration:_fe,create:(s=["all"],o={})=>{const{duration:l=t.standard,easing:u=e.easeInOut,delay:h=0}=o;return yr(o,mfe),(Array.isArray(s)?s:[s]).map(f=>`${f} ${typeof l=="string"?l:NH(l)} ${u} ${typeof h=="string"?h:NH(h)}`).join(",")}},n,{easing:e,duration:t})}const bfe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Tfe=bfe,Sfe=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function OK(n={},...e){const{mixins:t={},palette:r={},transitions:s={},typography:o={}}=n,l=yr(n,Sfe);if(n.vars)throw new Error(Z1(18));const u=afe(r),h=cE(n);let f=pp(h,{mixins:zde(h.breakpoints,t),palette:u,shadows:pfe.slice(),typography:cfe(u,o),transitions:yfe(s),zIndex:Ve({},Tfe)});return f=pp(f,l),f=e.reduce((g,y)=>pp(g,y),f),f.unstable_sxConfig=Ve({},EC,l==null?void 0:l.unstable_sxConfig),f.unstable_sx=function(y){return xC({sx:y,theme:this})},f}const wfe=OK(),Qk=wfe;function MC(){const n=Bk(Qk);return n[TC]||n}function ao({props:n,name:e}){return O3({props:n,name:e,defaultTheme:Qk,themeId:TC})}var AC={};const Efe=Sv(Mue);var nL={exports:{}},DH;function xfe(){return DH||(DH=1,function(n){function e(t,r){if(t==null)return{};var s={},o=Object.keys(t),l,u;for(u=0;u<o.length;u++)l=o[u],!(r.indexOf(l)>=0)&&(s[l]=t[l]);return s}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(nL)),nL.exports}const $fe=Sv(Dce),Cfe=Sv(Pce),Mfe=Sv(Wce),Afe=Sv(Khe),Ife=Sv(khe),Rfe=Sv(Fhe);var fE=hE;Object.defineProperty(AC,"__esModule",{value:!0});var kfe=AC.default=Vfe;AC.shouldForwardProp=_I;AC.systemDefaultTheme=void 0;var fg=fE(Efe),QD=fE(xfe()),PH=Ffe($fe),Ofe=Cfe;fE(Mfe);fE(Afe);var Lfe=fE(Ife),Nfe=fE(Rfe);const Dfe=["ownerState"],Pfe=["variants"],Bfe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function LK(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(LK=function(r){return r?t:e})(n)}function Ffe(n,e){if(!e&&n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=LK(e);if(t&&t.has(n))return t.get(n);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in n)if(o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)){var l=s?Object.getOwnPropertyDescriptor(n,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=n[o]}return r.default=n,t&&t.set(n,r),r}function zfe(n){return Object.keys(n).length===0}function Ufe(n){return typeof n=="string"&&n.charCodeAt(0)>96}function _I(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const Hfe=AC.systemDefaultTheme=(0,Lfe.default)(),Gfe=n=>n&&n.charAt(0).toLowerCase()+n.slice(1);function FM({defaultTheme:n,theme:e,themeId:t}){return zfe(e)?n:e[t]||e}function Wfe(n){return n?(e,t)=>t[n]:null}function yI(n,e){let{ownerState:t}=e,r=(0,QD.default)(e,Dfe);const s=typeof n=="function"?n((0,fg.default)({ownerState:t},r)):n;if(Array.isArray(s))return s.flatMap(o=>yI(o,(0,fg.default)({ownerState:t},r)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:o=[]}=s;let u=(0,QD.default)(s,Pfe);return o.forEach(h=>{let f=!0;typeof h.props=="function"?f=h.props((0,fg.default)({ownerState:t},r,t)):Object.keys(h.props).forEach(g=>{(t==null?void 0:t[g])!==h.props[g]&&r[g]!==h.props[g]&&(f=!1)}),f&&(Array.isArray(u)||(u=[u]),u.push(typeof h.style=="function"?h.style((0,fg.default)({ownerState:t},r,t)):h.style))}),u}return s}function Vfe(n={}){const{themeId:e,defaultTheme:t=Hfe,rootShouldForwardProp:r=_I,slotShouldForwardProp:s=_I}=n,o=l=>(0,Nfe.default)((0,fg.default)({},l,{theme:FM((0,fg.default)({},l,{defaultTheme:t,themeId:e}))}));return o.__mui_systemSx=!0,(l,u={})=>{(0,PH.internal_processStyles)(l,U=>U.filter(H=>!(H!=null&&H.__mui_systemSx)));const{name:h,slot:f,skipVariantsResolver:g,skipSx:y,overridesResolver:b=Wfe(Gfe(f))}=u,S=(0,QD.default)(u,Bfe),C=g!==void 0?g:f&&f!=="Root"&&f!=="root"||!1,M=y||!1;let A,k=_I;f==="Root"||f==="root"?k=r:f?k=s:Ufe(l)&&(k=void 0);const O=(0,PH.default)(l,(0,fg.default)({shouldForwardProp:k,label:A},S)),P=U=>typeof U=="function"&&U.__emotion_real!==U||(0,Ofe.isPlainObject)(U)?H=>yI(U,(0,fg.default)({},H,{theme:FM({theme:H.theme,defaultTheme:t,themeId:e})})):U,D=(U,...H)=>{let V=P(U);const z=H?H.map(P):[];h&&b&&z.push(ue=>{const q=FM((0,fg.default)({},ue,{defaultTheme:t,themeId:e}));if(!q.components||!q.components[h]||!q.components[h].styleOverrides)return null;const ae=q.components[h].styleOverrides,le={};return Object.entries(ae).forEach(([ce,ge])=>{le[ce]=yI(ge,(0,fg.default)({},ue,{theme:q}))}),b(ue,le)}),h&&!C&&z.push(ue=>{var q;const ae=FM((0,fg.default)({},ue,{defaultTheme:t,themeId:e})),le=ae==null||(q=ae.components)==null||(q=q[h])==null?void 0:q.variants;return yI({variants:le},(0,fg.default)({},ue,{theme:ae}))}),M||z.push(o);const Z=z.length-H.length;if(Array.isArray(U)&&Z>0){const ue=new Array(Z).fill("");V=[...U,...ue],V.raw=[...U.raw,...ue]}const oe=O(V,...z);return l.muiName&&(oe.muiName=l.muiName),oe};return O.withConfig&&(D.withConfig=O.withConfig),D}}function NK(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const jfe=n=>NK(n)&&n!=="classes",jm=jfe,tr=kfe({themeId:TC,defaultTheme:Qk,rootShouldForwardProp:jm}),BH=n=>{let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,(e/100).toFixed(2)};function Yfe(n){return Fs("MuiSvgIcon",n)}Ks("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Xfe=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Kfe=n=>{const{color:e,fontSize:t,classes:r}=n,s={root:["root",e!=="inherit"&&`color${vr(e)}`,`fontSize${vr(t)}`]};return Js(s,Yfe,r)},Jfe=tr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${vr(t.color)}`],e[`fontSize${vr(t.fontSize)}`]]}})(({theme:n,ownerState:e})=>{var t,r,s,o,l,u,h,f,g,y,b,S,C;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(t=n.transitions)==null||(r=t.create)==null?void 0:r.call(t,"fill",{duration:(s=n.transitions)==null||(s=s.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((o=n.typography)==null||(l=o.pxToRem)==null?void 0:l.call(o,20))||"1.25rem",medium:((u=n.typography)==null||(h=u.pxToRem)==null?void 0:h.call(u,24))||"1.5rem",large:((f=n.typography)==null||(g=f.pxToRem)==null?void 0:g.call(f,35))||"2.1875rem"}[e.fontSize],color:(y=(b=(n.vars||n).palette)==null||(b=b[e.color])==null?void 0:b.main)!=null?y:{action:(S=(n.vars||n).palette)==null||(S=S.action)==null?void 0:S.active,disabled:(C=(n.vars||n).palette)==null||(C=C.action)==null?void 0:C.disabled,inherit:void 0}[e.color]}}),ZD=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiSvgIcon"}),{children:s,className:o,color:l="inherit",component:u="svg",fontSize:h="medium",htmlColor:f,inheritViewBox:g=!1,titleAccess:y,viewBox:b="0 0 24 24"}=r,S=yr(r,Xfe),C=de.isValidElement(s)&&s.type==="svg",M=Ve({},r,{color:l,component:u,fontSize:h,instanceFontSize:e.fontSize,inheritViewBox:g,viewBox:b,hasSvgAsChild:C}),A={};g||(A.viewBox=b);const k=Kfe(M);return Ae.jsxs(Jfe,Ve({as:u,className:kr(k.root,o),focusable:"false",color:f,"aria-hidden":y?void 0:!0,role:y?"img":void 0,ref:t},A,S,C&&s.props,{ownerState:M,children:[C?s.props.children:s,y?Ae.jsx("title",{children:y}):null]}))});ZD.muiName="SvgIcon";function cT(n,e){function t(r,s){return Ae.jsx(ZD,Ve({"data-testid":`${e}Icon`,ref:s},r,{children:n}))}return t.muiName=ZD.muiName,de.memo(de.forwardRef(t))}const qfe={configure:n=>{A3.configure(n)}},Qfe=Object.freeze(Object.defineProperty({__proto__:null,capitalize:vr,createChainedFunction:JD,createSvgIcon:cT,debounce:CC,deprecatedPropType:lde,isMuiElement:vI,ownerDocument:mp,ownerWindow:gv,requirePropFactory:ude,setRef:fR,unstable_ClassNameGenerator:qfe,unstable_useEnhancedEffect:E_,unstable_useId:Kk,unsupportedProp:hde,useControlled:pR,useEventCallback:sv,useForkRef:_p,useIsFocusVisible:TK},Symbol.toStringTag,{value:"Module"}));function Zfe(n){return ao}function eP(n,e){return eP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},eP(n,e)}function B3(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,eP(n,e)}const FH={disabled:!1},gR=Tt.createContext(null);var epe=function(e){return e.scrollTop},kx="unmounted",c1="exited",h1="entering",BS="entered",tP="exiting",k_=function(n){B3(e,n);function e(r,s){var o;o=n.call(this,r,s)||this;var l=s,u=l&&!l.isMounting?r.enter:r.appear,h;return o.appearStatus=null,r.in?u?(h=c1,o.appearStatus=h1):h=BS:r.unmountOnExit||r.mountOnEnter?h=kx:h=c1,o.state={status:h},o.nextCallback=null,o}e.getDerivedStateFromProps=function(s,o){var l=s.in;return l&&o.status===kx?{status:c1}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var o=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==h1&&l!==BS&&(o=h1):(l===h1||l===BS)&&(o=tP)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,o,l,u;return o=l=u=s,s!=null&&typeof s!="number"&&(o=s.exit,l=s.enter,u=s.appear!==void 0?s.appear:l),{exit:o,enter:l,appear:u}},t.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===h1){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:hM.findDOMNode(this);l&&epe(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===c1&&this.setState({status:kx})},t.performEnter=function(s){var o=this,l=this.props.enter,u=this.context?this.context.isMounting:s,h=this.props.nodeRef?[u]:[hM.findDOMNode(this),u],f=h[0],g=h[1],y=this.getTimeouts(),b=u?y.appear:y.enter;if(!s&&!l||FH.disabled){this.safeSetState({status:BS},function(){o.props.onEntered(f)});return}this.props.onEnter(f,g),this.safeSetState({status:h1},function(){o.props.onEntering(f,g),o.onTransitionEnd(b,function(){o.safeSetState({status:BS},function(){o.props.onEntered(f,g)})})})},t.performExit=function(){var s=this,o=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:hM.findDOMNode(this);if(!o||FH.disabled){this.safeSetState({status:c1},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:tP},function(){s.props.onExiting(u),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:c1},function(){s.props.onExited(u)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},t.setNextCallback=function(s){var o=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,o.nextCallback=null,s(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},t.onTransitionEnd=function(s,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:hM.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],f=h[0],g=h[1];this.props.addEndListener(f,g)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===kx)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var u=yr(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Tt.createElement(gR.Provider,{value:null},typeof l=="function"?l(s,u):Tt.cloneElement(Tt.Children.only(l),u))},e}(Tt.Component);k_.contextType=gR;k_.propTypes={};function vS(){}k_.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:vS,onEntering:vS,onEntered:vS,onExit:vS,onExiting:vS,onExited:vS};k_.UNMOUNTED=kx;k_.EXITED=c1;k_.ENTERING=h1;k_.ENTERED=BS;k_.EXITING=tP;const DK=k_;function tpe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function F3(n,e){var t=function(o){return e&&de.isValidElement(o)?e(o):o},r=Object.create(null);return n&&de.Children.map(n,function(s){return s}).forEach(function(s){r[s.key]=t(s)}),r}function npe(n,e){n=n||{},e=e||{};function t(g){return g in e?e[g]:n[g]}var r=Object.create(null),s=[];for(var o in n)o in e?s.length&&(r[o]=s,s=[]):s.push(o);var l,u={};for(var h in e){if(r[h])for(l=0;l<r[h].length;l++){var f=r[h][l];u[r[h][l]]=t(f)}u[h]=t(h)}for(l=0;l<s.length;l++)u[s[l]]=t(s[l]);return u}function x1(n,e,t){return t[e]!=null?t[e]:n.props[e]}function rpe(n,e){return F3(n.children,function(t){return de.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:x1(t,"appear",n),enter:x1(t,"enter",n),exit:x1(t,"exit",n)})})}function ipe(n,e,t){var r=F3(n.children),s=npe(e,r);return Object.keys(s).forEach(function(o){var l=s[o];if(de.isValidElement(l)){var u=o in e,h=o in r,f=e[o],g=de.isValidElement(f)&&!f.props.in;h&&(!u||g)?s[o]=de.cloneElement(l,{onExited:t.bind(null,l),in:!0,exit:x1(l,"exit",n),enter:x1(l,"enter",n)}):!h&&u&&!g?s[o]=de.cloneElement(l,{in:!1}):h&&u&&de.isValidElement(f)&&(s[o]=de.cloneElement(l,{onExited:t.bind(null,l),in:f.props.in,exit:x1(l,"exit",n),enter:x1(l,"enter",n)}))}}),s}var spe=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},ope={component:"div",childFactory:function(e){return e}},z3=function(n){B3(e,n);function e(r,s){var o;o=n.call(this,r,s)||this;var l=o.handleExited.bind(tpe(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,o){var l=o.children,u=o.handleExited,h=o.firstRender;return{children:h?rpe(s,u):ipe(s,l,u),firstRender:!1}},t.handleExited=function(s,o){var l=F3(this.props.children);s.key in l||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(u){var h=Ve({},u.children);return delete h[s.key],{children:h}}))},t.render=function(){var s=this.props,o=s.component,l=s.childFactory,u=yr(s,["component","childFactory"]),h=this.state.contextValue,f=spe(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,o===null?Tt.createElement(gR.Provider,{value:h},f):Tt.createElement(gR.Provider,{value:h},Tt.createElement(o,u,f))},e}(Tt.Component);z3.propTypes={};z3.defaultProps=ope;const ape=z3,PK=n=>n.scrollTop;function vR(n,e){var t,r;const{timeout:s,easing:o,style:l={}}=n;return{duration:(t=l.transitionDuration)!=null?t:typeof s=="number"?s:s[e.mode]||0,easing:(r=l.transitionTimingFunction)!=null?r:typeof o=="object"?o[e.mode]:o,delay:l.transitionDelay}}function lpe(n){return Fs("MuiPaper",n)}Ks("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const upe=["className","component","elevation","square","variant"],cpe=n=>{const{square:e,elevation:t,variant:r,classes:s}=n,o={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${t}`]};return Js(o,lpe,s)},hpe=tr("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(({theme:n,ownerState:e})=>{var t;return Ve({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!e.square&&{borderRadius:n.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(n.vars||n).palette.divider}`},e.variant==="elevation"&&Ve({boxShadow:(n.vars||n).shadows[e.elevation]},!n.vars&&n.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Sg("#fff",BH(e.elevation))}, ${Sg("#fff",BH(e.elevation))})`},n.vars&&{backgroundImage:(t=n.vars.overlays)==null?void 0:t[e.elevation]}))}),dpe=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiPaper"}),{className:s,component:o="div",elevation:l=1,square:u=!1,variant:h="elevation"}=r,f=yr(r,upe),g=Ve({},r,{component:o,elevation:l,square:u,variant:h}),y=cpe(g);return Ae.jsx(hpe,Ve({as:o,ownerState:g,className:kr(y.root,s),ref:t},f))}),U3=dpe;function _R(n){return typeof n=="string"}function fpe(n,e,t){return n===void 0||_R(n)?e:Ve({},e,{ownerState:Ve({},e.ownerState,t)})}function BK(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(r=>r.match(/^on[A-Z]/)&&typeof n[r]=="function"&&!e.includes(r)).forEach(r=>{t[r]=n[r]}),t}function ppe(n,e,t){return typeof n=="function"?n(e,t):n}function zH(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function mpe(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:r,externalForwardedProps:s,className:o}=n;if(!e){const S=kr(t==null?void 0:t.className,o,s==null?void 0:s.className,r==null?void 0:r.className),C=Ve({},t==null?void 0:t.style,s==null?void 0:s.style,r==null?void 0:r.style),M=Ve({},t,s,r);return S.length>0&&(M.className=S),Object.keys(C).length>0&&(M.style=C),{props:M,internalRef:void 0}}const l=BK(Ve({},s,r)),u=zH(r),h=zH(s),f=e(l),g=kr(f==null?void 0:f.className,t==null?void 0:t.className,o,s==null?void 0:s.className,r==null?void 0:r.className),y=Ve({},f==null?void 0:f.style,t==null?void 0:t.style,s==null?void 0:s.style,r==null?void 0:r.style),b=Ve({},f,t,h,u);return g.length>0&&(b.className=g),Object.keys(y).length>0&&(b.style=y),{props:b,internalRef:f.ref}}const gpe=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function vv(n){var e;const{elementType:t,externalSlotProps:r,ownerState:s,skipResolvingSlotProps:o=!1}=n,l=yr(n,gpe),u=o?{}:ppe(r,s),{props:h,internalRef:f}=mpe(Ve({},l,{externalSlotProps:u})),g=_p(f,u==null?void 0:u.ref,(e=n.additionalProps)==null?void 0:e.ref);return fpe(t,Ve({},h,{ref:g}),s)}function vpe(n){const{className:e,classes:t,pulsate:r=!1,rippleX:s,rippleY:o,rippleSize:l,in:u,onExited:h,timeout:f}=n,[g,y]=de.useState(!1),b=kr(e,t.ripple,t.rippleVisible,r&&t.ripplePulsate),S={width:l,height:l,top:-(l/2)+o,left:-(l/2)+s},C=kr(t.child,g&&t.childLeaving,r&&t.childPulsate);return!u&&!g&&y(!0),de.useEffect(()=>{if(!u&&h!=null){const M=setTimeout(h,f);return()=>{clearTimeout(M)}}},[h,u,f]),Ae.jsx("span",{className:b,style:S,children:Ae.jsx("span",{className:C})})}const mg=Ks("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),_pe=["center","classes","className"];let Zk=n=>n,UH,HH,GH,WH;const nP=550,ype=80,bpe=Rk(UH||(UH=Zk`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Tpe=Rk(HH||(HH=Zk`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),Spe=Rk(GH||(GH=Zk`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),wpe=tr("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Epe=tr(vpe,{name:"MuiTouchRipple",slot:"Ripple"})(WH||(WH=Zk`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),mg.rippleVisible,bpe,nP,({theme:n})=>n.transitions.easing.easeInOut,mg.ripplePulsate,({theme:n})=>n.transitions.duration.shorter,mg.child,mg.childLeaving,Tpe,nP,({theme:n})=>n.transitions.easing.easeInOut,mg.childPulsate,Spe,({theme:n})=>n.transitions.easing.easeInOut),xpe=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:o={},className:l}=r,u=yr(r,_pe),[h,f]=de.useState([]),g=de.useRef(0),y=de.useRef(null);de.useEffect(()=>{y.current&&(y.current(),y.current=null)},[h]);const b=de.useRef(!1),S=bK(),C=de.useRef(null),M=de.useRef(null),A=de.useCallback(D=>{const{pulsate:U,rippleX:H,rippleY:V,rippleSize:z,cb:Z}=D;f(oe=>[...oe,Ae.jsx(Epe,{classes:{ripple:kr(o.ripple,mg.ripple),rippleVisible:kr(o.rippleVisible,mg.rippleVisible),ripplePulsate:kr(o.ripplePulsate,mg.ripplePulsate),child:kr(o.child,mg.child),childLeaving:kr(o.childLeaving,mg.childLeaving),childPulsate:kr(o.childPulsate,mg.childPulsate)},timeout:nP,pulsate:U,rippleX:H,rippleY:V,rippleSize:z},g.current)]),g.current+=1,y.current=Z},[o]),k=de.useCallback((D={},U={},H=()=>{})=>{const{pulsate:V=!1,center:z=s||U.pulsate,fakeElement:Z=!1}=U;if((D==null?void 0:D.type)==="mousedown"&&b.current){b.current=!1;return}(D==null?void 0:D.type)==="touchstart"&&(b.current=!0);const oe=Z?null:M.current,ue=oe?oe.getBoundingClientRect():{width:0,height:0,left:0,top:0};let q,ae,le;if(z||D===void 0||D.clientX===0&&D.clientY===0||!D.clientX&&!D.touches)q=Math.round(ue.width/2),ae=Math.round(ue.height/2);else{const{clientX:ce,clientY:ge}=D.touches&&D.touches.length>0?D.touches[0]:D;q=Math.round(ce-ue.left),ae=Math.round(ge-ue.top)}if(z)le=Math.sqrt((2*ue.width**2+ue.height**2)/3),le%2===0&&(le+=1);else{const ce=Math.max(Math.abs((oe?oe.clientWidth:0)-q),q)*2+2,ge=Math.max(Math.abs((oe?oe.clientHeight:0)-ae),ae)*2+2;le=Math.sqrt(ce**2+ge**2)}D!=null&&D.touches?C.current===null&&(C.current=()=>{A({pulsate:V,rippleX:q,rippleY:ae,rippleSize:le,cb:H})},S.start(ype,()=>{C.current&&(C.current(),C.current=null)})):A({pulsate:V,rippleX:q,rippleY:ae,rippleSize:le,cb:H})},[s,A,S]),O=de.useCallback(()=>{k({},{pulsate:!0})},[k]),P=de.useCallback((D,U)=>{if(S.clear(),(D==null?void 0:D.type)==="touchend"&&C.current){C.current(),C.current=null,S.start(0,()=>{P(D,U)});return}C.current=null,f(H=>H.length>0?H.slice(1):H),y.current=U},[S]);return de.useImperativeHandle(t,()=>({pulsate:O,start:k,stop:P}),[O,k,P]),Ae.jsx(wpe,Ve({className:kr(mg.root,o.root,l),ref:M},u,{children:Ae.jsx(ape,{component:null,exit:!0,children:h})}))}),$pe=xpe;function Cpe(n){return Fs("MuiButtonBase",n)}const Mpe=Ks("MuiButtonBase",["root","disabled","focusVisible"]),Ape=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Ipe=n=>{const{disabled:e,focusVisible:t,focusVisibleClassName:r,classes:s}=n,l=Js({root:["root",e&&"disabled",t&&"focusVisible"]},Cpe,s);return t&&r&&(l.root+=` ${r}`),l},Rpe=tr("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Mpe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),kpe=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiButtonBase"}),{action:s,centerRipple:o=!1,children:l,className:u,component:h="button",disabled:f=!1,disableRipple:g=!1,disableTouchRipple:y=!1,focusRipple:b=!1,LinkComponent:S="a",onBlur:C,onClick:M,onContextMenu:A,onDragLeave:k,onFocus:O,onFocusVisible:P,onKeyDown:D,onKeyUp:U,onMouseDown:H,onMouseLeave:V,onMouseUp:z,onTouchEnd:Z,onTouchMove:oe,onTouchStart:ue,tabIndex:q=0,TouchRippleProps:ae,touchRippleRef:le,type:ce}=r,ge=yr(r,Ape),$e=de.useRef(null),K=de.useRef(null),ie=_p(K,le),{isFocusVisibleRef:se,onFocus:fe,onBlur:Se,ref:Ue}=TK(),[ke,qe]=de.useState(!1);f&&ke&&qe(!1),de.useImperativeHandle(s,()=>({focusVisible:()=>{qe(!0),$e.current.focus()}}),[]);const[we,Ze]=de.useState(!1);de.useEffect(()=>{Ze(!0)},[]);const et=we&&!g&&!f;de.useEffect(()=>{ke&&b&&!g&&we&&K.current.pulsate()},[g,b,ke,we]);function ft(Qe,Le,Q=y){return sv(te=>(Le&&Le(te),!Q&&K.current&&K.current[Qe](te),!0))}const at=ft("start",H),Ge=ft("stop",A),Ie=ft("stop",k),He=ft("stop",z),it=ft("stop",Qe=>{ke&&Qe.preventDefault(),V&&V(Qe)}),st=ft("start",ue),It=ft("stop",Z),kt=ft("stop",oe),vt=ft("stop",Qe=>{Se(Qe),se.current===!1&&qe(!1),C&&C(Qe)},!1),Mt=sv(Qe=>{$e.current||($e.current=Qe.currentTarget),fe(Qe),se.current===!0&&(qe(!0),P&&P(Qe)),O&&O(Qe)}),Ct=()=>{const Qe=$e.current;return h&&h!=="button"&&!(Qe.tagName==="A"&&Qe.href)},gt=de.useRef(!1),Ee=sv(Qe=>{b&&!gt.current&&ke&&K.current&&Qe.key===" "&&(gt.current=!0,K.current.stop(Qe,()=>{K.current.start(Qe)})),Qe.target===Qe.currentTarget&&Ct()&&Qe.key===" "&&Qe.preventDefault(),D&&D(Qe),Qe.target===Qe.currentTarget&&Ct()&&Qe.key==="Enter"&&!f&&(Qe.preventDefault(),M&&M(Qe))}),re=sv(Qe=>{b&&Qe.key===" "&&K.current&&ke&&!Qe.defaultPrevented&&(gt.current=!1,K.current.stop(Qe,()=>{K.current.pulsate(Qe)})),U&&U(Qe),M&&Qe.target===Qe.currentTarget&&Ct()&&Qe.key===" "&&!Qe.defaultPrevented&&M(Qe)});let Be=h;Be==="button"&&(ge.href||ge.to)&&(Be=S);const mt={};Be==="button"?(mt.type=ce===void 0?"button":ce,mt.disabled=f):(!ge.href&&!ge.to&&(mt.role="button"),f&&(mt["aria-disabled"]=f));const yt=_p(t,Ue,$e),wt=Ve({},r,{centerRipple:o,component:h,disabled:f,disableRipple:g,disableTouchRipple:y,focusRipple:b,tabIndex:q,focusVisible:ke}),Ke=Ipe(wt);return Ae.jsxs(Rpe,Ve({as:Be,className:kr(Ke.root,u),ownerState:wt,onBlur:vt,onClick:M,onContextMenu:Ge,onFocus:Mt,onKeyDown:Ee,onKeyUp:re,onMouseDown:at,onMouseLeave:it,onMouseUp:He,onDragLeave:Ie,onTouchEnd:It,onTouchMove:kt,onTouchStart:st,ref:yt,tabIndex:f?-1:q,type:ce},mt,ge,{children:[l,et?Ae.jsx($pe,Ve({ref:ie,center:o},ae)):null]}))}),IC=kpe;function Ope(n){return Fs("MuiIconButton",n)}const Lpe=Ks("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Npe=["edge","children","className","color","disabled","disableFocusRipple","size"],Dpe=n=>{const{classes:e,disabled:t,color:r,edge:s,size:o}=n,l={root:["root",t&&"disabled",r!=="default"&&`color${vr(r)}`,s&&`edge${vr(s)}`,`size${vr(o)}`]};return Js(l,Ope,e)},Ppe=tr(IC,{name:"MuiIconButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="default"&&e[`color${vr(t.color)}`],t.edge&&e[`edge${vr(t.edge)}`],e[`size${vr(t.size)}`]]}})(({theme:n,ownerState:e})=>Ve({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Sg(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:n,ownerState:e})=>{var t;const r=(t=(n.vars||n).palette)==null?void 0:t[e.color];return Ve({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&Ve({color:r==null?void 0:r.main},!e.disableRipple&&{"&:hover":Ve({},r&&{backgroundColor:n.vars?`rgba(${r.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Sg(r.main,n.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:n.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:n.typography.pxToRem(28)},{[`&.${Lpe.disabled}`]:{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}})}),Bpe=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiIconButton"}),{edge:s=!1,children:o,className:l,color:u="default",disabled:h=!1,disableFocusRipple:f=!1,size:g="medium"}=r,y=yr(r,Npe),b=Ve({},r,{edge:s,color:u,disabled:h,disableFocusRipple:f,size:g}),S=Dpe(b);return Ae.jsx(Ppe,Ve({className:kr(S.root,l),centerRipple:!0,focusRipple:!f,disabled:h,ref:t},y,{ownerState:b,children:o}))}),bI=Bpe;function Fpe(n){return Fs("MuiTypography",n)}Ks("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const zpe=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Upe=n=>{const{align:e,gutterBottom:t,noWrap:r,paragraph:s,variant:o,classes:l}=n,u={root:["root",o,n.align!=="inherit"&&`align${vr(e)}`,t&&"gutterBottom",r&&"noWrap",s&&"paragraph"]};return Js(u,Fpe,l)},Hpe=tr("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${vr(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(({theme:n,ownerState:e})=>Ve({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&n.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),VH={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Gpe={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Wpe=n=>Gpe[n]||n,Vpe=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiTypography"}),s=Wpe(r.color),o=$C(Ve({},r,{color:s})),{align:l="inherit",className:u,component:h,gutterBottom:f=!1,noWrap:g=!1,paragraph:y=!1,variant:b="body1",variantMapping:S=VH}=o,C=yr(o,zpe),M=Ve({},o,{align:l,color:s,className:u,component:h,gutterBottom:f,noWrap:g,paragraph:y,variant:b,variantMapping:S}),A=h||(y?"p":S[b]||VH[b])||"span",k=Upe(M);return Ae.jsx(Hpe,Ve({as:A,ref:t,ownerState:M,className:kr(k.root,u)},C))}),Df=Vpe,jpe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Ype(n){const e=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(e)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:e}function Xpe(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const e=r=>n.ownerDocument.querySelector(`input[type="radio"]${r}`);let t=e(`[name="${n.name}"]:checked`);return t||(t=e(`[name="${n.name}"]`)),t!==n}function Kpe(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||Xpe(n))}function Jpe(n){const e=[],t=[];return Array.from(n.querySelectorAll(jpe)).forEach((r,s)=>{const o=Ype(r);o===-1||!Kpe(r)||(o===0?e.push(r):t.push({documentOrder:s,tabIndex:o,node:r}))}),t.sort((r,s)=>r.tabIndex===s.tabIndex?r.documentOrder-s.documentOrder:r.tabIndex-s.tabIndex).map(r=>r.node).concat(e)}function qpe(){return!0}function Qpe(n){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:r=!1,disableRestoreFocus:s=!1,getTabbable:o=Jpe,isEnabled:l=qpe,open:u}=n,h=de.useRef(!1),f=de.useRef(null),g=de.useRef(null),y=de.useRef(null),b=de.useRef(null),S=de.useRef(!1),C=de.useRef(null),M=_p(e.ref,C),A=de.useRef(null);de.useEffect(()=>{!u||!C.current||(S.current=!t)},[t,u]),de.useEffect(()=>{if(!u||!C.current)return;const P=mp(C.current);return C.current.contains(P.activeElement)||(C.current.hasAttribute("tabIndex")||C.current.setAttribute("tabIndex","-1"),S.current&&C.current.focus()),()=>{s||(y.current&&y.current.focus&&(h.current=!0,y.current.focus()),y.current=null)}},[u]),de.useEffect(()=>{if(!u||!C.current)return;const P=mp(C.current),D=V=>{A.current=V,!(r||!l()||V.key!=="Tab")&&P.activeElement===C.current&&V.shiftKey&&(h.current=!0,g.current&&g.current.focus())},U=()=>{const V=C.current;if(V===null)return;if(!P.hasFocus()||!l()||h.current){h.current=!1;return}if(V.contains(P.activeElement)||r&&P.activeElement!==f.current&&P.activeElement!==g.current)return;if(P.activeElement!==b.current)b.current=null;else if(b.current!==null)return;if(!S.current)return;let z=[];if((P.activeElement===f.current||P.activeElement===g.current)&&(z=o(C.current)),z.length>0){var Z,oe;const ue=!!((Z=A.current)!=null&&Z.shiftKey&&((oe=A.current)==null?void 0:oe.key)==="Tab"),q=z[0],ae=z[z.length-1];typeof q!="string"&&typeof ae!="string"&&(ue?ae.focus():q.focus())}else V.focus()};P.addEventListener("focusin",U),P.addEventListener("keydown",D,!0);const H=setInterval(()=>{P.activeElement&&P.activeElement.tagName==="BODY"&&U()},50);return()=>{clearInterval(H),P.removeEventListener("focusin",U),P.removeEventListener("keydown",D,!0)}},[t,r,s,l,u,o]);const k=P=>{y.current===null&&(y.current=P.relatedTarget),S.current=!0,b.current=P.target;const D=e.props.onFocus;D&&D(P)},O=P=>{y.current===null&&(y.current=P.relatedTarget),S.current=!0};return Ae.jsxs(de.Fragment,{children:[Ae.jsx("div",{tabIndex:u?0:-1,onFocus:O,ref:f,"data-testid":"sentinelStart"}),de.cloneElement(e,{ref:M,onFocus:k}),Ae.jsx("div",{tabIndex:u?0:-1,onFocus:O,ref:g,"data-testid":"sentinelEnd"})]})}function Zpe(n){return typeof n=="function"?n():n}const eme=de.forwardRef(function(e,t){const{children:r,container:s,disablePortal:o=!1}=e,[l,u]=de.useState(null),h=_p(de.isValidElement(r)?r.ref:null,t);if(E_(()=>{o||u(Zpe(s)||document.body)},[s,o]),E_(()=>{if(l&&!o)return fR(t,l),()=>{fR(t,null)}},[t,l,o]),o){if(de.isValidElement(r)){const f={ref:h};return de.cloneElement(r,f)}return Ae.jsx(de.Fragment,{children:r})}return Ae.jsx(de.Fragment,{children:l&&WF.createPortal(r,l)})});function tme(n){const e=mp(n);return e.body===n?gv(n).innerWidth>e.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function Zx(n,e){e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function jH(n){return parseInt(gv(n).getComputedStyle(n).paddingRight,10)||0}function nme(n){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(n.tagName)!==-1,r=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return t||r}function YH(n,e,t,r,s){const o=[e,t,...r];[].forEach.call(n.children,l=>{const u=o.indexOf(l)===-1,h=!nme(l);u&&h&&Zx(l,s)})}function rL(n,e){let t=-1;return n.some((r,s)=>e(r)?(t=s,!0):!1),t}function rme(n,e){const t=[],r=n.container;if(!e.disableScrollLock){if(tme(r)){const l=SK(mp(r));t.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${jH(r)+l}px`;const u=mp(r).querySelectorAll(".mui-fixed");[].forEach.call(u,h=>{t.push({value:h.style.paddingRight,property:"padding-right",el:h}),h.style.paddingRight=`${jH(h)+l}px`})}let o;if(r.parentNode instanceof DocumentFragment)o=mp(r).body;else{const l=r.parentElement,u=gv(r);o=(l==null?void 0:l.nodeName)==="HTML"&&u.getComputedStyle(l).overflowY==="scroll"?l:r}t.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{t.forEach(({value:o,el:l,property:u})=>{o?l.style.setProperty(u,o):l.style.removeProperty(u)})}}function ime(n){const e=[];return[].forEach.call(n.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class sme{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&Zx(e.modalRef,!1);const s=ime(t);YH(t,e.mount,e.modalRef,s,!0);const o=rL(this.containers,l=>l.container===t);return o!==-1?(this.containers[o].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:s}),r)}mount(e,t){const r=rL(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[r];s.restore||(s.restore=rme(s,t))}remove(e,t=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const s=rL(this.containers,l=>l.modals.indexOf(e)!==-1),o=this.containers[s];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(r,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&Zx(e.modalRef,t),YH(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(s,1);else{const l=o.modals[o.modals.length-1];l.modalRef&&Zx(l.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function ome(n){return typeof n=="function"?n():n}function ame(n){return n?n.props.hasOwnProperty("in"):!1}const lme=new sme;function ume(n){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:r=!1,manager:s=lme,closeAfterTransition:o=!1,onTransitionEnter:l,onTransitionExited:u,children:h,onClose:f,open:g,rootRef:y}=n,b=de.useRef({}),S=de.useRef(null),C=de.useRef(null),M=_p(C,y),[A,k]=de.useState(!g),O=ame(h);let P=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(P=!1);const D=()=>mp(S.current),U=()=>(b.current.modalRef=C.current,b.current.mount=S.current,b.current),H=()=>{s.mount(U(),{disableScrollLock:r}),C.current&&(C.current.scrollTop=0)},V=sv(()=>{const ge=ome(e)||D().body;s.add(U(),ge),C.current&&H()}),z=de.useCallback(()=>s.isTopModal(U()),[s]),Z=sv(ge=>{S.current=ge,ge&&(g&&z()?H():C.current&&Zx(C.current,P))}),oe=de.useCallback(()=>{s.remove(U(),P)},[P,s]);de.useEffect(()=>()=>{oe()},[oe]),de.useEffect(()=>{g?V():(!O||!o)&&oe()},[g,oe,O,o,V]);const ue=ge=>$e=>{var K;(K=ge.onKeyDown)==null||K.call(ge,$e),!($e.key!=="Escape"||$e.which===229||!z())&&(t||($e.stopPropagation(),f&&f($e,"escapeKeyDown")))},q=ge=>$e=>{var K;(K=ge.onClick)==null||K.call(ge,$e),$e.target===$e.currentTarget&&f&&f($e,"backdropClick")};return{getRootProps:(ge={})=>{const $e=BK(n);delete $e.onTransitionEnter,delete $e.onTransitionExited;const K=Ve({},$e,ge);return Ve({role:"presentation"},K,{onKeyDown:ue(K),ref:M})},getBackdropProps:(ge={})=>{const $e=ge;return Ve({"aria-hidden":!0},$e,{onClick:q($e),open:g})},getTransitionProps:()=>{const ge=()=>{k(!1),l&&l()},$e=()=>{k(!0),u&&u(),o&&oe()};return{onEnter:JD(ge,h==null?void 0:h.props.onEnter),onExited:JD($e,h==null?void 0:h.props.onExited)}},rootRef:M,portalRef:Z,isTopModal:z,exited:A,hasTransition:O}}const cme=["onChange","maxRows","minRows","style","value"];function zM(n){return parseInt(n,10)||0}const hme={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function dme(n){return n==null||Object.keys(n).length===0||n.outerHeightStyle===0&&!n.overflowing}const fme=de.forwardRef(function(e,t){const{onChange:r,maxRows:s,minRows:o=1,style:l,value:u}=e,h=yr(e,cme),{current:f}=de.useRef(u!=null),g=de.useRef(null),y=_p(t,g),b=de.useRef(null),S=de.useCallback(()=>{const A=g.current,O=gv(A).getComputedStyle(A);if(O.width==="0px")return{outerHeightStyle:0,overflowing:!1};const P=b.current;P.style.width=O.width,P.value=A.value||e.placeholder||"x",P.value.slice(-1)===`
`&&(P.value+=" ");const D=O.boxSizing,U=zM(O.paddingBottom)+zM(O.paddingTop),H=zM(O.borderBottomWidth)+zM(O.borderTopWidth),V=P.scrollHeight;P.value="x";const z=P.scrollHeight;let Z=V;o&&(Z=Math.max(Number(o)*z,Z)),s&&(Z=Math.min(Number(s)*z,Z)),Z=Math.max(Z,z);const oe=Z+(D==="border-box"?U+H:0),ue=Math.abs(Z-V)<=1;return{outerHeightStyle:oe,overflowing:ue}},[s,o,e.placeholder]),C=de.useCallback(()=>{const A=S();if(dme(A))return;const k=g.current;k.style.height=`${A.outerHeightStyle}px`,k.style.overflow=A.overflowing?"hidden":""},[S]);E_(()=>{const A=()=>{C()};let k;const O=CC(A),P=g.current,D=gv(P);D.addEventListener("resize",O);let U;return typeof ResizeObserver<"u"&&(U=new ResizeObserver(A),U.observe(P)),()=>{O.clear(),cancelAnimationFrame(k),D.removeEventListener("resize",O),U&&U.disconnect()}},[S,C]),E_(()=>{C()});const M=A=>{f||C(),r&&r(A)};return Ae.jsxs(de.Fragment,{children:[Ae.jsx("textarea",Ve({value:u,onChange:M,ref:y,rows:o,style:l},h)),Ae.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:b,tabIndex:-1,style:Ve({},hme.shadow,l,{paddingTop:0,paddingBottom:0})})]})});function rb({props:n,states:e,muiFormControl:t}){return e.reduce((r,s)=>(r[s]=n[s],t&&typeof n[s]>"u"&&(r[s]=t[s]),r),{})}const pme=de.createContext(void 0),H3=pme;function O_(){return de.useContext(H3)}function mme(n){return Ae.jsx(Dhe,Ve({},n,{defaultTheme:Qk,themeId:TC}))}function XH(n){return n!=null&&!(Array.isArray(n)&&n.length===0)}function yR(n,e=!1){return n&&(XH(n.value)&&n.value!==""||e&&XH(n.defaultValue)&&n.defaultValue!=="")}function gme(n){return n.startAdornment}function vme(n){return Fs("MuiInputBase",n)}const _me=Ks("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Lw=_me,yme=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],e2=(n,e)=>{const{ownerState:t}=n;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${vr(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},t2=(n,e)=>{const{ownerState:t}=n;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},bme=n=>{const{classes:e,color:t,disabled:r,error:s,endAdornment:o,focused:l,formControl:u,fullWidth:h,hiddenLabel:f,multiline:g,readOnly:y,size:b,startAdornment:S,type:C}=n,M={root:["root",`color${vr(t)}`,r&&"disabled",s&&"error",h&&"fullWidth",l&&"focused",u&&"formControl",b&&b!=="medium"&&`size${vr(b)}`,g&&"multiline",S&&"adornedStart",o&&"adornedEnd",f&&"hiddenLabel",y&&"readOnly"],input:["input",r&&"disabled",C==="search"&&"inputTypeSearch",g&&"inputMultiline",b==="small"&&"inputSizeSmall",f&&"inputHiddenLabel",S&&"inputAdornedStart",o&&"inputAdornedEnd",y&&"readOnly"]};return Js(M,vme,e)},n2=tr("div",{name:"MuiInputBase",slot:"Root",overridesResolver:e2})(({theme:n,ownerState:e})=>Ve({},n.typography.body1,{color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Lw.disabled}`]:{color:(n.vars||n).palette.text.disabled,cursor:"default"}},e.multiline&&Ve({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),r2=tr("input",{name:"MuiInputBase",slot:"Input",overridesResolver:t2})(({theme:n,ownerState:e})=>{const t=n.palette.mode==="light",r=Ve({color:"currentColor"},n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},{transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})}),s={opacity:"0 !important"},o=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return Ve({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Lw.formControl} &`]:{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${Lw.disabled}`]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),Tme=Ae.jsx(mme,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Sme=de.forwardRef(function(e,t){var r;const s=ao({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:l,autoFocus:u,className:h,components:f={},componentsProps:g={},defaultValue:y,disabled:b,disableInjectingGlobalStyles:S,endAdornment:C,fullWidth:M=!1,id:A,inputComponent:k="input",inputProps:O={},inputRef:P,maxRows:D,minRows:U,multiline:H=!1,name:V,onBlur:z,onChange:Z,onClick:oe,onFocus:ue,onKeyDown:q,onKeyUp:ae,placeholder:le,readOnly:ce,renderSuffix:ge,rows:$e,slotProps:K={},slots:ie={},startAdornment:se,type:fe="text",value:Se}=s,Ue=yr(s,yme),ke=O.value!=null?O.value:Se,{current:qe}=de.useRef(ke!=null),we=de.useRef(),Ze=de.useCallback(Ke=>{},[]),et=_p(we,P,O.ref,Ze),[ft,at]=de.useState(!1),Ge=O_(),Ie=rb({props:s,muiFormControl:Ge,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Ie.focused=Ge?Ge.focused:ft,de.useEffect(()=>{!Ge&&b&&ft&&(at(!1),z&&z())},[Ge,b,ft,z]);const He=Ge&&Ge.onFilled,it=Ge&&Ge.onEmpty,st=de.useCallback(Ke=>{yR(Ke)?He&&He():it&&it()},[He,it]);E_(()=>{qe&&st({value:ke})},[ke,st,qe]);const It=Ke=>{if(Ie.disabled){Ke.stopPropagation();return}ue&&ue(Ke),O.onFocus&&O.onFocus(Ke),Ge&&Ge.onFocus?Ge.onFocus(Ke):at(!0)},kt=Ke=>{z&&z(Ke),O.onBlur&&O.onBlur(Ke),Ge&&Ge.onBlur?Ge.onBlur(Ke):at(!1)},vt=(Ke,...Qe)=>{if(!qe){const Le=Ke.target||we.current;if(Le==null)throw new Error(Z1(1));st({value:Le.value})}O.onChange&&O.onChange(Ke,...Qe),Z&&Z(Ke,...Qe)};de.useEffect(()=>{st(we.current)},[]);const Mt=Ke=>{we.current&&Ke.currentTarget===Ke.target&&we.current.focus(),oe&&oe(Ke)};let Ct=k,gt=O;H&&Ct==="input"&&($e?gt=Ve({type:void 0,minRows:$e,maxRows:$e},gt):gt=Ve({type:void 0,maxRows:D,minRows:U},gt),Ct=fme);const Ee=Ke=>{st(Ke.animationName==="mui-auto-fill-cancel"?we.current:{value:"x"})};de.useEffect(()=>{Ge&&Ge.setAdornedStart(!!se)},[Ge,se]);const re=Ve({},s,{color:Ie.color||"primary",disabled:Ie.disabled,endAdornment:C,error:Ie.error,focused:Ie.focused,formControl:Ge,fullWidth:M,hiddenLabel:Ie.hiddenLabel,multiline:H,size:Ie.size,startAdornment:se,type:fe}),Be=bme(re),mt=ie.root||f.Root||n2,yt=K.root||g.root||{},wt=ie.input||f.Input||r2;return gt=Ve({},gt,(r=K.input)!=null?r:g.input),Ae.jsxs(de.Fragment,{children:[!S&&Tme,Ae.jsxs(mt,Ve({},yt,!_R(mt)&&{ownerState:Ve({},re,yt.ownerState)},{ref:t,onClick:Mt},Ue,{className:kr(Be.root,yt.className,h,ce&&"MuiInputBase-readOnly"),children:[se,Ae.jsx(H3.Provider,{value:null,children:Ae.jsx(wt,Ve({ownerState:re,"aria-invalid":Ie.error,"aria-describedby":o,autoComplete:l,autoFocus:u,defaultValue:y,disabled:Ie.disabled,id:A,onAnimationStart:Ee,name:V,placeholder:le,readOnly:ce,required:Ie.required,rows:$e,value:ke,onKeyDown:q,onKeyUp:ae,type:fe},gt,!_R(wt)&&{as:Ct,ownerState:Ve({},re,gt.ownerState)},{ref:et,className:kr(Be.input,gt.className,ce&&"MuiInputBase-readOnly"),onBlur:kt,onChange:vt,onFocus:It}))}),C,ge?ge(Ve({},Ie,{startAdornment:se})):null]}))]})}),G3=Sme;function wme(n){return Fs("MuiInput",n)}const Eme=Ve({},Lw,Ks("MuiInput",["root","underline","input"])),ix=Eme;function xme(n){return Fs("MuiOutlinedInput",n)}const $me=Ve({},Lw,Ks("MuiOutlinedInput",["root","notchedOutline","input"])),oy=$me;function Cme(n){return Fs("MuiFilledInput",n)}const Mme=Ve({},Lw,Ks("MuiFilledInput",["root","underline","input"])),Vb=Mme,Ame=cT(Ae.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Ime=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Rme={entering:{opacity:1},entered:{opacity:1}},kme=de.forwardRef(function(e,t){const r=MC(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:l=!0,children:u,easing:h,in:f,onEnter:g,onEntered:y,onEntering:b,onExit:S,onExited:C,onExiting:M,style:A,timeout:k=s,TransitionComponent:O=DK}=e,P=yr(e,Ime),D=de.useRef(null),U=_p(D,u.ref,t),H=le=>ce=>{if(le){const ge=D.current;ce===void 0?le(ge):le(ge,ce)}},V=H(b),z=H((le,ce)=>{PK(le);const ge=vR({style:A,timeout:k,easing:h},{mode:"enter"});le.style.webkitTransition=r.transitions.create("opacity",ge),le.style.transition=r.transitions.create("opacity",ge),g&&g(le,ce)}),Z=H(y),oe=H(M),ue=H(le=>{const ce=vR({style:A,timeout:k,easing:h},{mode:"exit"});le.style.webkitTransition=r.transitions.create("opacity",ce),le.style.transition=r.transitions.create("opacity",ce),S&&S(le)}),q=H(C),ae=le=>{o&&o(D.current,le)};return Ae.jsx(O,Ve({appear:l,in:f,nodeRef:D,onEnter:z,onEntered:Z,onEntering:V,onExit:ue,onExited:q,onExiting:oe,addEndListener:ae,timeout:k},P,{children:(le,ce)=>de.cloneElement(u,Ve({style:Ve({opacity:0,visibility:le==="exited"&&!f?"hidden":void 0},Rme[le],A,u.props.style),ref:U},ce))}))}),FK=kme;function Ome(n){return Fs("MuiBackdrop",n)}Ks("MuiBackdrop",["root","invisible"]);const Lme=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Nme=n=>{const{classes:e,invisible:t}=n;return Js({root:["root",t&&"invisible"]},Ome,e)},Dme=tr("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.invisible&&e.invisible]}})(({ownerState:n})=>Ve({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},n.invisible&&{backgroundColor:"transparent"})),Pme=de.forwardRef(function(e,t){var r,s,o;const l=ao({props:e,name:"MuiBackdrop"}),{children:u,className:h,component:f="div",components:g={},componentsProps:y={},invisible:b=!1,open:S,slotProps:C={},slots:M={},TransitionComponent:A=FK,transitionDuration:k}=l,O=yr(l,Lme),P=Ve({},l,{component:f,invisible:b}),D=Nme(P),U=(r=C.root)!=null?r:y.root;return Ae.jsx(A,Ve({in:S,timeout:k},O,{children:Ae.jsx(Dme,Ve({"aria-hidden":!0},U,{as:(s=(o=M.root)!=null?o:g.Root)!=null?s:f,className:kr(D.root,h,U==null?void 0:U.className),ownerState:Ve({},P,U==null?void 0:U.ownerState),classes:D,ref:t,children:u}))}))}),W3=Pme,Bme=Ks("MuiBox",["root"]),Fme=Bme,zme=OK(),Ume=Ghe({themeId:TC,defaultTheme:zme,defaultClassName:Fme.root,generateClassName:A3.generate}),s0=Ume;function Hme(n){return Fs("MuiButton",n)}const Gme=Ks("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),UM=Gme,Wme=de.createContext({}),Vme=Wme,jme=de.createContext(void 0),Yme=jme,Xme=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Kme=n=>{const{color:e,disableElevation:t,fullWidth:r,size:s,variant:o,classes:l}=n,u={root:["root",o,`${o}${vr(e)}`,`size${vr(s)}`,`${o}Size${vr(s)}`,`color${vr(e)}`,t&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${vr(s)}`],endIcon:["icon","endIcon",`iconSize${vr(s)}`]},h=Js(u,Hme,l);return Ve({},l,h)},zK=n=>Ve({},n.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},n.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},n.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),Jme=tr(IC,{shouldForwardProp:n=>jm(n)||n==="classes",name:"MuiButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`${t.variant}${vr(t.color)}`],e[`size${vr(t.size)}`],e[`${t.variant}Size${vr(t.size)}`],t.color==="inherit"&&e.colorInherit,t.disableElevation&&e.disableElevation,t.fullWidth&&e.fullWidth]}})(({theme:n,ownerState:e})=>{var t,r;const s=n.palette.mode==="light"?n.palette.grey[300]:n.palette.grey[800],o=n.palette.mode==="light"?n.palette.grey.A100:n.palette.grey[700];return Ve({},n.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":Ve({textDecoration:"none",backgroundColor:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / ${n.vars.palette.action.hoverOpacity})`:Sg(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:n.vars?`rgba(${n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Sg(n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(n.vars||n).palette[e.color].main}`,backgroundColor:n.vars?`rgba(${n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Sg(n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:n.vars?n.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(n.vars||n).shadows[4],"@media (hover: none)":{boxShadow:(n.vars||n).shadows[2],backgroundColor:(n.vars||n).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(n.vars||n).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(n.vars||n).palette[e.color].main}}),"&:active":Ve({},e.variant==="contained"&&{boxShadow:(n.vars||n).shadows[8]}),[`&.${UM.focusVisible}`]:Ve({},e.variant==="contained"&&{boxShadow:(n.vars||n).shadows[6]}),[`&.${UM.disabled}`]:Ve({color:(n.vars||n).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(n.vars||n).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(n.vars||n).palette.action.disabled,boxShadow:(n.vars||n).shadows[0],backgroundColor:(n.vars||n).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].main,border:n.vars?`1px solid rgba(${n.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${Sg(n.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:n.vars?n.vars.palette.text.primary:(t=(r=n.palette).getContrastText)==null?void 0:t.call(r,n.palette.grey[300]),backgroundColor:n.vars?n.vars.palette.Button.inheritContainedBg:s,boxShadow:(n.vars||n).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].contrastText,backgroundColor:(n.vars||n).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:n.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:n.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:n.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:n})=>n.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${UM.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${UM.disabled}`]:{boxShadow:"none"}}),qme=tr("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.startIcon,e[`iconSize${vr(t.size)}`]]}})(({ownerState:n})=>Ve({display:"inherit",marginRight:8,marginLeft:-4},n.size==="small"&&{marginLeft:-2},zK(n))),Qme=tr("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.endIcon,e[`iconSize${vr(t.size)}`]]}})(({ownerState:n})=>Ve({display:"inherit",marginRight:-4,marginLeft:8},n.size==="small"&&{marginRight:-2},zK(n))),Zme=de.forwardRef(function(e,t){const r=de.useContext(Vme),s=de.useContext(Yme),o=k3(r,e),l=ao({props:o,name:"MuiButton"}),{children:u,color:h="primary",component:f="button",className:g,disabled:y=!1,disableElevation:b=!1,disableFocusRipple:S=!1,endIcon:C,focusVisibleClassName:M,fullWidth:A=!1,size:k="medium",startIcon:O,type:P,variant:D="text"}=l,U=yr(l,Xme),H=Ve({},l,{color:h,component:f,disabled:y,disableElevation:b,disableFocusRipple:S,fullWidth:A,size:k,type:P,variant:D}),V=Kme(H),z=O&&Ae.jsx(qme,{className:V.startIcon,ownerState:H,children:O}),Z=C&&Ae.jsx(Qme,{className:V.endIcon,ownerState:H,children:C}),oe=s||"";return Ae.jsxs(Jme,Ve({ownerState:H,className:kr(r.className,V.root,g,oe),component:f,disabled:y,focusRipple:!S,focusVisibleClassName:kr(V.focusVisible,M),ref:t,type:P},U,{classes:V,children:[z,u,Z]}))}),ege=Zme;function tge(n){return Fs("PrivateSwitchBase",n)}Ks("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const nge=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],rge=n=>{const{classes:e,checked:t,disabled:r,edge:s}=n,o={root:["root",t&&"checked",r&&"disabled",s&&`edge${vr(s)}`],input:["input"]};return Js(o,tge,e)},ige=tr(IC)(({ownerState:n})=>Ve({padding:9,borderRadius:"50%"},n.edge==="start"&&{marginLeft:n.size==="small"?-3:-12},n.edge==="end"&&{marginRight:n.size==="small"?-3:-12})),sge=tr("input",{shouldForwardProp:jm})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),oge=de.forwardRef(function(e,t){const{autoFocus:r,checked:s,checkedIcon:o,className:l,defaultChecked:u,disabled:h,disableFocusRipple:f=!1,edge:g=!1,icon:y,id:b,inputProps:S,inputRef:C,name:M,onBlur:A,onChange:k,onFocus:O,readOnly:P,required:D=!1,tabIndex:U,type:H,value:V}=e,z=yr(e,nge),[Z,oe]=pR({controlled:s,default:!!u,name:"SwitchBase",state:"checked"}),ue=O_(),q=ie=>{O&&O(ie),ue&&ue.onFocus&&ue.onFocus(ie)},ae=ie=>{A&&A(ie),ue&&ue.onBlur&&ue.onBlur(ie)},le=ie=>{if(ie.nativeEvent.defaultPrevented)return;const se=ie.target.checked;oe(se),k&&k(ie,se)};let ce=h;ue&&typeof ce>"u"&&(ce=ue.disabled);const ge=H==="checkbox"||H==="radio",$e=Ve({},e,{checked:Z,disabled:ce,disableFocusRipple:f,edge:g}),K=rge($e);return Ae.jsxs(ige,Ve({component:"span",className:kr(K.root,l),centerRipple:!0,focusRipple:!f,disabled:ce,tabIndex:null,role:void 0,onFocus:q,onBlur:ae,ownerState:$e,ref:t},z,{children:[Ae.jsx(sge,Ve({autoFocus:r,checked:s,defaultChecked:u,className:K.input,disabled:ce,id:ge?b:void 0,name:M,onChange:le,readOnly:P,ref:C,required:D,ownerState:$e,tabIndex:U,type:H},H==="checkbox"&&V===void 0?{}:{value:V},S)),Z?o:y]}))}),UK=oge,age=cT(Ae.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),lge=cT(Ae.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),uge=cT(Ae.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function cge(n){return Fs("MuiCheckbox",n)}const hge=Ks("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),iL=hge,dge=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],fge=n=>{const{classes:e,indeterminate:t,color:r,size:s}=n,o={root:["root",t&&"indeterminate",`color${vr(r)}`,`size${vr(s)}`]},l=Js(o,cge,e);return Ve({},e,l)},pge=tr(UK,{shouldForwardProp:n=>jm(n)||n==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.indeterminate&&e.indeterminate,e[`size${vr(t.size)}`],t.color!=="default"&&e[`color${vr(t.color)}`]]}})(({theme:n,ownerState:e})=>Ve({color:(n.vars||n).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:n.vars?`rgba(${e.color==="default"?n.vars.palette.action.activeChannel:n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Sg(e.color==="default"?n.palette.action.active:n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${iL.checked}, &.${iL.indeterminate}`]:{color:(n.vars||n).palette[e.color].main},[`&.${iL.disabled}`]:{color:(n.vars||n).palette.action.disabled}})),mge=Ae.jsx(lge,{}),gge=Ae.jsx(age,{}),vge=Ae.jsx(uge,{}),_ge=de.forwardRef(function(e,t){var r,s;const o=ao({props:e,name:"MuiCheckbox"}),{checkedIcon:l=mge,color:u="primary",icon:h=gge,indeterminate:f=!1,indeterminateIcon:g=vge,inputProps:y,size:b="medium",className:S}=o,C=yr(o,dge),M=f?g:h,A=f?g:l,k=Ve({},o,{color:u,indeterminate:f,size:b}),O=fge(k);return Ae.jsx(pge,Ve({type:"checkbox",inputProps:Ve({"data-indeterminate":f},y),icon:de.cloneElement(M,{fontSize:(r=M.props.fontSize)!=null?r:b}),checkedIcon:de.cloneElement(A,{fontSize:(s=A.props.fontSize)!=null?s:b}),ownerState:k,ref:t,className:kr(O.root,S)},C,{classes:O}))}),yge=_ge,bge=Rde({createStyledComponent:tr("div",{name:"MuiContainer",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`maxWidth${vr(String(t.maxWidth))}`],t.fixed&&e.fixed,t.disableGutters&&e.disableGutters]}}),useThemeProps:n=>ao({props:n,name:"MuiContainer"})}),KH=bge;function Tge(n){return Fs("MuiModal",n)}Ks("MuiModal",["root","hidden","backdrop"]);const Sge=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],wge=n=>{const{open:e,exited:t,classes:r}=n;return Js({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},Tge,r)},Ege=tr("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.open&&t.exited&&e.hidden]}})(({theme:n,ownerState:e})=>Ve({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),xge=tr(W3,{name:"MuiModal",slot:"Backdrop",overridesResolver:(n,e)=>e.backdrop})({zIndex:-1}),$ge=de.forwardRef(function(e,t){var r,s,o,l,u,h;const f=ao({name:"MuiModal",props:e}),{BackdropComponent:g=xge,BackdropProps:y,className:b,closeAfterTransition:S=!1,children:C,container:M,component:A,components:k={},componentsProps:O={},disableAutoFocus:P=!1,disableEnforceFocus:D=!1,disableEscapeKeyDown:U=!1,disablePortal:H=!1,disableRestoreFocus:V=!1,disableScrollLock:z=!1,hideBackdrop:Z=!1,keepMounted:oe=!1,onBackdropClick:ue,open:q,slotProps:ae,slots:le}=f,ce=yr(f,Sge),ge=Ve({},f,{closeAfterTransition:S,disableAutoFocus:P,disableEnforceFocus:D,disableEscapeKeyDown:U,disablePortal:H,disableRestoreFocus:V,disableScrollLock:z,hideBackdrop:Z,keepMounted:oe}),{getRootProps:$e,getBackdropProps:K,getTransitionProps:ie,portalRef:se,isTopModal:fe,exited:Se,hasTransition:Ue}=ume(Ve({},ge,{rootRef:t})),ke=Ve({},ge,{exited:Se}),qe=wge(ke),we={};if(C.props.tabIndex===void 0&&(we.tabIndex="-1"),Ue){const{onEnter:He,onExited:it}=ie();we.onEnter=He,we.onExited=it}const Ze=(r=(s=le==null?void 0:le.root)!=null?s:k.Root)!=null?r:Ege,et=(o=(l=le==null?void 0:le.backdrop)!=null?l:k.Backdrop)!=null?o:g,ft=(u=ae==null?void 0:ae.root)!=null?u:O.root,at=(h=ae==null?void 0:ae.backdrop)!=null?h:O.backdrop,Ge=vv({elementType:Ze,externalSlotProps:ft,externalForwardedProps:ce,getSlotProps:$e,additionalProps:{ref:t,as:A},ownerState:ke,className:kr(b,ft==null?void 0:ft.className,qe==null?void 0:qe.root,!ke.open&&ke.exited&&(qe==null?void 0:qe.hidden))}),Ie=vv({elementType:et,externalSlotProps:at,additionalProps:y,getSlotProps:He=>K(Ve({},He,{onClick:it=>{ue&&ue(it),He!=null&&He.onClick&&He.onClick(it)}})),className:kr(at==null?void 0:at.className,y==null?void 0:y.className,qe==null?void 0:qe.backdrop),ownerState:ke});return!oe&&!q&&(!Ue||Se)?null:Ae.jsx(eme,{ref:se,container:M,disablePortal:H,children:Ae.jsxs(Ze,Ve({},Ge,{children:[!Z&&g?Ae.jsx(et,Ve({},Ie)):null,Ae.jsx(Qpe,{disableEnforceFocus:D,disableAutoFocus:P,disableRestoreFocus:V,isEnabled:fe,open:q,children:de.cloneElement(C,we)})]}))})}),HK=$ge;function Cge(n){return Fs("MuiDialog",n)}const Mge=Ks("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),sL=Mge,Age=de.createContext({}),Ige=Age,Rge=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],kge=tr(W3,{name:"MuiDialog",slot:"Backdrop",overrides:(n,e)=>e.backdrop})({zIndex:-1}),Oge=n=>{const{classes:e,scroll:t,maxWidth:r,fullWidth:s,fullScreen:o}=n,l={root:["root"],container:["container",`scroll${vr(t)}`],paper:["paper",`paperScroll${vr(t)}`,`paperWidth${vr(String(r))}`,s&&"paperFullWidth",o&&"paperFullScreen"]};return Js(l,Cge,e)},Lge=tr(HK,{name:"MuiDialog",slot:"Root",overridesResolver:(n,e)=>e.root})({"@media print":{position:"absolute !important"}}),Nge=tr("div",{name:"MuiDialog",slot:"Container",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.container,e[`scroll${vr(t.scroll)}`]]}})(({ownerState:n})=>Ve({height:"100%","@media print":{height:"auto"},outline:0},n.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},n.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),Dge=tr(U3,{name:"MuiDialog",slot:"Paper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.paper,e[`scrollPaper${vr(t.scroll)}`],e[`paperWidth${vr(String(t.maxWidth))}`],t.fullWidth&&e.paperFullWidth,t.fullScreen&&e.paperFullScreen]}})(({theme:n,ownerState:e})=>Ve({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:n.breakpoints.unit==="px"?Math.max(n.breakpoints.values.xs,444):`max(${n.breakpoints.values.xs}${n.breakpoints.unit}, 444px)`,[`&.${sL.paperScrollBody}`]:{[n.breakpoints.down(Math.max(n.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${n.breakpoints.values[e.maxWidth]}${n.breakpoints.unit}`,[`&.${sL.paperScrollBody}`]:{[n.breakpoints.down(n.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${sL.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Pge=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiDialog"}),s=MC(),o={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":u,BackdropComponent:h,BackdropProps:f,children:g,className:y,disableEscapeKeyDown:b=!1,fullScreen:S=!1,fullWidth:C=!1,maxWidth:M="sm",onBackdropClick:A,onClose:k,open:O,PaperComponent:P=U3,PaperProps:D={},scroll:U="paper",TransitionComponent:H=FK,transitionDuration:V=o,TransitionProps:z}=r,Z=yr(r,Rge),oe=Ve({},r,{disableEscapeKeyDown:b,fullScreen:S,fullWidth:C,maxWidth:M,scroll:U}),ue=Oge(oe),q=de.useRef(),ae=$e=>{q.current=$e.target===$e.currentTarget},le=$e=>{q.current&&(q.current=null,A&&A($e),k&&k($e,"backdropClick"))},ce=Kk(u),ge=de.useMemo(()=>({titleId:ce}),[ce]);return Ae.jsx(Lge,Ve({className:kr(ue.root,y),closeAfterTransition:!0,components:{Backdrop:kge},componentsProps:{backdrop:Ve({transitionDuration:V,as:h},f)},disableEscapeKeyDown:b,onClose:k,open:O,ref:t,onClick:le,ownerState:oe},Z,{children:Ae.jsx(H,Ve({appear:!0,in:O,timeout:V,role:"presentation"},z,{children:Ae.jsx(Nge,{className:kr(ue.container),onMouseDown:ae,ownerState:oe,children:Ae.jsx(Dge,Ve({as:P,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":ce},D,{className:kr(ue.paper,D.className),ownerState:oe,children:Ae.jsx(Ige.Provider,{value:ge,children:g})}))})}))}))}),GK=Pge;function Bge(n){return Fs("MuiDivider",n)}Ks("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const Fge=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],zge=n=>{const{absolute:e,children:t,classes:r,flexItem:s,light:o,orientation:l,textAlign:u,variant:h}=n;return Js({root:["root",e&&"absolute",h,o&&"light",l==="vertical"&&"vertical",s&&"flexItem",t&&"withChildren",t&&l==="vertical"&&"withChildrenVertical",u==="right"&&l!=="vertical"&&"textAlignRight",u==="left"&&l!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",l==="vertical"&&"wrapperVertical"]},Bge,r)},Uge=tr("div",{name:"MuiDivider",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.absolute&&e.absolute,e[t.variant],t.light&&e.light,t.orientation==="vertical"&&e.vertical,t.flexItem&&e.flexItem,t.children&&e.withChildren,t.children&&t.orientation==="vertical"&&e.withChildrenVertical,t.textAlign==="right"&&t.orientation!=="vertical"&&e.textAlignRight,t.textAlign==="left"&&t.orientation!=="vertical"&&e.textAlignLeft]}})(({theme:n,ownerState:e})=>Ve({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(n.vars||n).palette.divider,borderBottomWidth:"thin"},e.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},e.light&&{borderColor:n.vars?`rgba(${n.vars.palette.dividerChannel} / 0.08)`:Sg(n.palette.divider,.08)},e.variant==="inset"&&{marginLeft:72},e.variant==="middle"&&e.orientation==="horizontal"&&{marginLeft:n.spacing(2),marginRight:n.spacing(2)},e.variant==="middle"&&e.orientation==="vertical"&&{marginTop:n.spacing(1),marginBottom:n.spacing(1)},e.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},e.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:n})=>Ve({},n.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:n,ownerState:e})=>Ve({},e.children&&e.orientation!=="vertical"&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(n.vars||n).palette.divider}`}}),({theme:n,ownerState:e})=>Ve({},e.children&&e.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(n.vars||n).palette.divider}`}}),({ownerState:n})=>Ve({},n.textAlign==="right"&&n.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},n.textAlign==="left"&&n.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),Hge=tr("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.wrapper,t.orientation==="vertical"&&e.wrapperVertical]}})(({theme:n,ownerState:e})=>Ve({display:"inline-block",paddingLeft:`calc(${n.spacing(1)} * 1.2)`,paddingRight:`calc(${n.spacing(1)} * 1.2)`},e.orientation==="vertical"&&{paddingTop:`calc(${n.spacing(1)} * 1.2)`,paddingBottom:`calc(${n.spacing(1)} * 1.2)`})),WK=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiDivider"}),{absolute:s=!1,children:o,className:l,component:u=o?"div":"hr",flexItem:h=!1,light:f=!1,orientation:g="horizontal",role:y=u!=="hr"?"separator":void 0,textAlign:b="center",variant:S="fullWidth"}=r,C=yr(r,Fge),M=Ve({},r,{absolute:s,component:u,flexItem:h,light:f,orientation:g,role:y,textAlign:b,variant:S}),A=zge(M);return Ae.jsx(Uge,Ve({as:u,className:kr(A.root,l),role:y,ref:t,ownerState:M},C,{children:o?Ae.jsx(Hge,{className:A.wrapper,ownerState:M,children:o}):null}))});WK.muiSkipListHighlight=!0;const Gge=WK,Wge=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Vge=n=>{const{classes:e,disableUnderline:t}=n,s=Js({root:["root",!t&&"underline"],input:["input"]},Cme,e);return Ve({},e,s)},jge=tr(n2,{shouldForwardProp:n=>jm(n)||n==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...e2(n,e),!t.disableUnderline&&e.underline]}})(({theme:n,ownerState:e})=>{var t;const r=n.palette.mode==="light",s=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",u=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return Ve({position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o}},[`&.${Vb.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o},[`&.${Vb.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:u}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t=(n.vars||n).palette[e.color||"primary"])==null?void 0:t.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Vb.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Vb.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:s}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Vb.disabled}, .${Vb.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${Vb.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&Ve({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),Yge=tr(r2,{name:"MuiFilledInput",slot:"Input",overridesResolver:t2})(({theme:n,ownerState:e})=>Ve({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),VK=de.forwardRef(function(e,t){var r,s,o,l;const u=ao({props:e,name:"MuiFilledInput"}),{components:h={},componentsProps:f,fullWidth:g=!1,inputComponent:y="input",multiline:b=!1,slotProps:S,slots:C={},type:M="text"}=u,A=yr(u,Wge),k=Ve({},u,{fullWidth:g,inputComponent:y,multiline:b,type:M}),O=Vge(u),P={root:{ownerState:k},input:{ownerState:k}},D=S??f?pp(P,S??f):P,U=(r=(s=C.root)!=null?s:h.Root)!=null?r:jge,H=(o=(l=C.input)!=null?l:h.Input)!=null?o:Yge;return Ae.jsx(G3,Ve({slots:{root:U,input:H},componentsProps:D,fullWidth:g,inputComponent:y,multiline:b,ref:t,type:M},A,{classes:O}))});VK.muiName="Input";const jK=VK;function Xge(n){return Fs("MuiFormControl",n)}Ks("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Kge=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Jge=n=>{const{classes:e,margin:t,fullWidth:r}=n,s={root:["root",t!=="none"&&`margin${vr(t)}`,r&&"fullWidth"]};return Js(s,Xge,e)},qge=tr("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:n},e)=>Ve({},e.root,e[`margin${vr(n.margin)}`],n.fullWidth&&e.fullWidth)})(({ownerState:n})=>Ve({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},n.margin==="normal"&&{marginTop:16,marginBottom:8},n.margin==="dense"&&{marginTop:8,marginBottom:4},n.fullWidth&&{width:"100%"})),Qge=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiFormControl"}),{children:s,className:o,color:l="primary",component:u="div",disabled:h=!1,error:f=!1,focused:g,fullWidth:y=!1,hiddenLabel:b=!1,margin:S="none",required:C=!1,size:M="medium",variant:A="outlined"}=r,k=yr(r,Kge),O=Ve({},r,{color:l,component:u,disabled:h,error:f,fullWidth:y,hiddenLabel:b,margin:S,required:C,size:M,variant:A}),P=Jge(O),[D,U]=de.useState(()=>{let ae=!1;return s&&de.Children.forEach(s,le=>{if(!vI(le,["Input","Select"]))return;const ce=vI(le,["Select"])?le.props.input:le;ce&&gme(ce.props)&&(ae=!0)}),ae}),[H,V]=de.useState(()=>{let ae=!1;return s&&de.Children.forEach(s,le=>{vI(le,["Input","Select"])&&(yR(le.props,!0)||yR(le.props.inputProps,!0))&&(ae=!0)}),ae}),[z,Z]=de.useState(!1);h&&z&&Z(!1);const oe=g!==void 0&&!h?g:z;let ue;const q=de.useMemo(()=>({adornedStart:D,setAdornedStart:U,color:l,disabled:h,error:f,filled:H,focused:oe,fullWidth:y,hiddenLabel:b,size:M,onBlur:()=>{Z(!1)},onEmpty:()=>{V(!1)},onFilled:()=>{V(!0)},onFocus:()=>{Z(!0)},registerEffect:ue,required:C,variant:A}),[D,l,h,f,H,oe,y,b,ue,C,M,A]);return Ae.jsx(H3.Provider,{value:q,children:Ae.jsx(qge,Ve({as:u,ownerState:O,className:kr(P.root,o),ref:t},k,{children:s}))})}),Zge=Qge,e0e=Fde({createStyledComponent:tr("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root}),useThemeProps:n=>ao({props:n,name:"MuiStack"})}),Nw=e0e;function t0e(n){return Fs("MuiFormControlLabel",n)}const n0e=Ks("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Ox=n0e,r0e=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],i0e=n=>{const{classes:e,disabled:t,labelPlacement:r,error:s,required:o}=n,l={root:["root",t&&"disabled",`labelPlacement${vr(r)}`,s&&"error",o&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",s&&"error"]};return Js(l,t0e,e)},s0e=tr("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${Ox.label}`]:e.label},e.root,e[`labelPlacement${vr(t.labelPlacement)}`]]}})(({theme:n,ownerState:e})=>Ve({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Ox.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Ox.label}`]:{[`&.${Ox.disabled}`]:{color:(n.vars||n).palette.text.disabled}}})),o0e=tr("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(({theme:n})=>({[`&.${Ox.error}`]:{color:(n.vars||n).palette.error.main}})),a0e=de.forwardRef(function(e,t){var r,s;const o=ao({props:e,name:"MuiFormControlLabel"}),{className:l,componentsProps:u={},control:h,disabled:f,disableTypography:g,label:y,labelPlacement:b="end",required:S,slotProps:C={}}=o,M=yr(o,r0e),A=O_(),k=(r=f??h.props.disabled)!=null?r:A==null?void 0:A.disabled,O=S??h.props.required,P={disabled:k,required:O};["checked","name","onChange","value","inputRef"].forEach(Z=>{typeof h.props[Z]>"u"&&typeof o[Z]<"u"&&(P[Z]=o[Z])});const D=rb({props:o,muiFormControl:A,states:["error"]}),U=Ve({},o,{disabled:k,labelPlacement:b,required:O,error:D.error}),H=i0e(U),V=(s=C.typography)!=null?s:u.typography;let z=y;return z!=null&&z.type!==Df&&!g&&(z=Ae.jsx(Df,Ve({component:"span"},V,{className:kr(H.label,V==null?void 0:V.className),children:z}))),Ae.jsxs(s0e,Ve({className:kr(H.root,l),ownerState:U,ref:t},M,{children:[de.cloneElement(h,P),O?Ae.jsxs(Nw,{display:"block",children:[z,Ae.jsxs(o0e,{ownerState:U,"aria-hidden":!0,className:H.asterisk,children:["","*"]})]}):z]}))}),YK=a0e;function l0e(n){return Fs("MuiFormGroup",n)}Ks("MuiFormGroup",["root","row","error"]);const u0e=["className","row"],c0e=n=>{const{classes:e,row:t,error:r}=n;return Js({root:["root",t&&"row",r&&"error"]},l0e,e)},h0e=tr("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.row&&e.row]}})(({ownerState:n})=>Ve({display:"flex",flexDirection:"column",flexWrap:"wrap"},n.row&&{flexDirection:"row"})),d0e=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiFormGroup"}),{className:s,row:o=!1}=r,l=yr(r,u0e),u=O_(),h=rb({props:r,muiFormControl:u,states:["error"]}),f=Ve({},r,{row:o,error:h.error}),g=c0e(f);return Ae.jsx(h0e,Ve({className:kr(g.root,s),ownerState:f,ref:t},l))}),XK=d0e;function f0e(n){return Fs("MuiFormHelperText",n)}const p0e=Ks("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),JH=p0e;var qH;const m0e=["children","className","component","disabled","error","filled","focused","margin","required","variant"],g0e=n=>{const{classes:e,contained:t,size:r,disabled:s,error:o,filled:l,focused:u,required:h}=n,f={root:["root",s&&"disabled",o&&"error",r&&`size${vr(r)}`,t&&"contained",u&&"focused",l&&"filled",h&&"required"]};return Js(f,f0e,e)},v0e=tr("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.size&&e[`size${vr(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(({theme:n,ownerState:e})=>Ve({color:(n.vars||n).palette.text.secondary},n.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${JH.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${JH.error}`]:{color:(n.vars||n).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),_0e=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiFormHelperText"}),{children:s,className:o,component:l="p"}=r,u=yr(r,m0e),h=O_(),f=rb({props:r,muiFormControl:h,states:["variant","size","disabled","error","filled","focused","required"]}),g=Ve({},r,{component:l,contained:f.variant==="filled"||f.variant==="outlined",variant:f.variant,size:f.size,disabled:f.disabled,error:f.error,filled:f.filled,focused:f.focused,required:f.required}),y=g0e(g);return Ae.jsx(v0e,Ve({as:l,ownerState:g,className:kr(y.root,o),ref:t},u,{children:s===" "?qH||(qH=Ae.jsx("span",{className:"notranslate",children:""})):s}))}),y0e=_0e;function b0e(n){return Fs("MuiFormLabel",n)}const T0e=Ks("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),e$=T0e,S0e=["children","className","color","component","disabled","error","filled","focused","required"],w0e=n=>{const{classes:e,color:t,focused:r,disabled:s,error:o,filled:l,required:u}=n,h={root:["root",`color${vr(t)}`,s&&"disabled",o&&"error",l&&"filled",r&&"focused",u&&"required"],asterisk:["asterisk",o&&"error"]};return Js(h,b0e,e)},E0e=tr("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:n},e)=>Ve({},e.root,n.color==="secondary"&&e.colorSecondary,n.filled&&e.filled)})(({theme:n,ownerState:e})=>Ve({color:(n.vars||n).palette.text.secondary},n.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${e$.focused}`]:{color:(n.vars||n).palette[e.color].main},[`&.${e$.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${e$.error}`]:{color:(n.vars||n).palette.error.main}})),x0e=tr("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(({theme:n})=>({[`&.${e$.error}`]:{color:(n.vars||n).palette.error.main}})),$0e=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiFormLabel"}),{children:s,className:o,component:l="label"}=r,u=yr(r,S0e),h=O_(),f=rb({props:r,muiFormControl:h,states:["color","required","focused","disabled","error","filled"]}),g=Ve({},r,{color:f.color||"primary",component:l,disabled:f.disabled,error:f.error,filled:f.filled,focused:f.focused,required:f.required}),y=w0e(g);return Ae.jsxs(E0e,Ve({as:l,ownerState:g,className:kr(y.root,o),ref:t},u,{children:[s,f.required&&Ae.jsxs(x0e,{ownerState:g,"aria-hidden":!0,className:y.asterisk,children:["","*"]})]}))}),C0e=$0e,M0e=de.createContext(),QH=M0e;function A0e(n){return Fs("MuiGrid",n)}const I0e=[0,1,2,3,4,5,6,7,8,9,10],R0e=["column-reverse","column","row-reverse","row"],k0e=["nowrap","wrap-reverse","wrap"],sx=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],D$=Ks("MuiGrid",["root","container","item","zeroMinWidth",...I0e.map(n=>`spacing-xs-${n}`),...R0e.map(n=>`direction-xs-${n}`),...k0e.map(n=>`wrap-xs-${n}`),...sx.map(n=>`grid-xs-${n}`),...sx.map(n=>`grid-sm-${n}`),...sx.map(n=>`grid-md-${n}`),...sx.map(n=>`grid-lg-${n}`),...sx.map(n=>`grid-xl-${n}`)]),O0e=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function yw(n){const e=parseFloat(n);return`${e}${String(n).replace(String(e),"")||"px"}`}function L0e({theme:n,ownerState:e}){let t;return n.breakpoints.keys.reduce((r,s)=>{let o={};if(e[s]&&(t=e[s]),!t)return r;if(t===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(t==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const l=D1({values:e.columns,breakpoints:n.breakpoints.values}),u=typeof l=="object"?l[s]:l;if(u==null)return r;const h=`${Math.round(t/u*1e8)/1e6}%`;let f={};if(e.container&&e.item&&e.columnSpacing!==0){const g=n.spacing(e.columnSpacing);if(g!=="0px"){const y=`calc(${h} + ${yw(g)})`;f={flexBasis:y,maxWidth:y}}}o=Ve({flexBasis:h,flexGrow:0,maxWidth:h},f)}return n.breakpoints.values[s]===0?Object.assign(r,o):r[n.breakpoints.up(s)]=o,r},{})}function N0e({theme:n,ownerState:e}){const t=D1({values:e.direction,breakpoints:n.breakpoints.values});return em({theme:n},t,r=>{const s={flexDirection:r};return r.indexOf("column")===0&&(s[`& > .${D$.item}`]={maxWidth:"none"}),s})}function KK({breakpoints:n,values:e}){let t="";Object.keys(e).forEach(s=>{t===""&&e[s]!==0&&(t=s)});const r=Object.keys(n).sort((s,o)=>n[s]-n[o]);return r.slice(0,r.indexOf(t))}function D0e({theme:n,ownerState:e}){const{container:t,rowSpacing:r}=e;let s={};if(t&&r!==0){const o=D1({values:r,breakpoints:n.breakpoints.values});let l;typeof o=="object"&&(l=KK({breakpoints:n.breakpoints.values,values:o})),s=em({theme:n},o,(u,h)=>{var f;const g=n.spacing(u);return g!=="0px"?{marginTop:`-${yw(g)}`,[`& > .${D$.item}`]:{paddingTop:yw(g)}}:(f=l)!=null&&f.includes(h)?{}:{marginTop:0,[`& > .${D$.item}`]:{paddingTop:0}}})}return s}function P0e({theme:n,ownerState:e}){const{container:t,columnSpacing:r}=e;let s={};if(t&&r!==0){const o=D1({values:r,breakpoints:n.breakpoints.values});let l;typeof o=="object"&&(l=KK({breakpoints:n.breakpoints.values,values:o})),s=em({theme:n},o,(u,h)=>{var f;const g=n.spacing(u);return g!=="0px"?{width:`calc(100% + ${yw(g)})`,marginLeft:`-${yw(g)}`,[`& > .${D$.item}`]:{paddingLeft:yw(g)}}:(f=l)!=null&&f.includes(h)?{}:{width:"100%",marginLeft:0,[`& > .${D$.item}`]:{paddingLeft:0}}})}return s}function B0e(n,e,t={}){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[t[`spacing-xs-${String(n)}`]];const r=[];return e.forEach(s=>{const o=n[s];Number(o)>0&&r.push(t[`spacing-${s}-${String(o)}`])}),r}const F0e=tr("div",{name:"MuiGrid",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n,{container:r,direction:s,item:o,spacing:l,wrap:u,zeroMinWidth:h,breakpoints:f}=t;let g=[];r&&(g=B0e(l,f,e));const y=[];return f.forEach(b=>{const S=t[b];S&&y.push(e[`grid-${b}-${String(S)}`])}),[e.root,r&&e.container,o&&e.item,h&&e.zeroMinWidth,...g,s!=="row"&&e[`direction-xs-${String(s)}`],u!=="wrap"&&e[`wrap-xs-${String(u)}`],...y]}})(({ownerState:n})=>Ve({boxSizing:"border-box"},n.container&&{display:"flex",flexWrap:"wrap",width:"100%"},n.item&&{margin:0},n.zeroMinWidth&&{minWidth:0},n.wrap!=="wrap"&&{flexWrap:n.wrap}),N0e,D0e,P0e,L0e);function z0e(n,e){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[`spacing-xs-${String(n)}`];const t=[];return e.forEach(r=>{const s=n[r];if(Number(s)>0){const o=`spacing-${r}-${String(s)}`;t.push(o)}}),t}const U0e=n=>{const{classes:e,container:t,direction:r,item:s,spacing:o,wrap:l,zeroMinWidth:u,breakpoints:h}=n;let f=[];t&&(f=z0e(o,h));const g=[];h.forEach(b=>{const S=n[b];S&&g.push(`grid-${b}-${String(S)}`)});const y={root:["root",t&&"container",s&&"item",u&&"zeroMinWidth",...f,r!=="row"&&`direction-xs-${String(r)}`,l!=="wrap"&&`wrap-xs-${String(l)}`,...g]};return Js(y,A0e,e)},H0e=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiGrid"}),{breakpoints:s}=MC(),o=$C(r),{className:l,columns:u,columnSpacing:h,component:f="div",container:g=!1,direction:y="row",item:b=!1,rowSpacing:S,spacing:C=0,wrap:M="wrap",zeroMinWidth:A=!1}=o,k=yr(o,O0e),O=S||C,P=h||C,D=de.useContext(QH),U=g?u||12:D,H={},V=Ve({},k);s.keys.forEach(oe=>{k[oe]!=null&&(H[oe]=k[oe],delete V[oe])});const z=Ve({},o,{columns:U,container:g,direction:y,item:b,rowSpacing:O,columnSpacing:P,wrap:M,zeroMinWidth:A,spacing:C},H,{breakpoints:s.keys}),Z=U0e(z);return Ae.jsx(QH.Provider,{value:U,children:Ae.jsx(F0e,Ve({ownerState:z,className:kr(Z.root,l),as:f,ref:t},V))})}),Nc=H0e,G0e=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function rP(n){return`scale(${n}, ${n**2})`}const W0e={entering:{opacity:1,transform:rP(1)},entered:{opacity:1,transform:"none"}},oL=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),JK=de.forwardRef(function(e,t){const{addEndListener:r,appear:s=!0,children:o,easing:l,in:u,onEnter:h,onEntered:f,onEntering:g,onExit:y,onExited:b,onExiting:S,style:C,timeout:M="auto",TransitionComponent:A=DK}=e,k=yr(e,G0e),O=bK(),P=de.useRef(),D=MC(),U=de.useRef(null),H=_p(U,o.ref,t),V=ce=>ge=>{if(ce){const $e=U.current;ge===void 0?ce($e):ce($e,ge)}},z=V(g),Z=V((ce,ge)=>{PK(ce);const{duration:$e,delay:K,easing:ie}=vR({style:C,timeout:M,easing:l},{mode:"enter"});let se;M==="auto"?(se=D.transitions.getAutoHeightDuration(ce.clientHeight),P.current=se):se=$e,ce.style.transition=[D.transitions.create("opacity",{duration:se,delay:K}),D.transitions.create("transform",{duration:oL?se:se*.666,delay:K,easing:ie})].join(","),h&&h(ce,ge)}),oe=V(f),ue=V(S),q=V(ce=>{const{duration:ge,delay:$e,easing:K}=vR({style:C,timeout:M,easing:l},{mode:"exit"});let ie;M==="auto"?(ie=D.transitions.getAutoHeightDuration(ce.clientHeight),P.current=ie):ie=ge,ce.style.transition=[D.transitions.create("opacity",{duration:ie,delay:$e}),D.transitions.create("transform",{duration:oL?ie:ie*.666,delay:oL?$e:$e||ie*.333,easing:K})].join(","),ce.style.opacity=0,ce.style.transform=rP(.75),y&&y(ce)}),ae=V(b),le=ce=>{M==="auto"&&O.start(P.current||0,ce),r&&r(U.current,ce)};return Ae.jsx(A,Ve({appear:s,in:u,nodeRef:U,onEnter:Z,onEntered:oe,onEntering:z,onExit:q,onExited:ae,onExiting:ue,addEndListener:le,timeout:M==="auto"?null:M},k,{children:(ce,ge)=>de.cloneElement(o,Ve({style:Ve({opacity:0,transform:rP(.75),visibility:ce==="exited"&&!u?"hidden":void 0},W0e[ce],C,o.props.style),ref:H},ge))}))});JK.muiSupportAuto=!0;const V0e=JK,j0e=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Y0e=n=>{const{classes:e,disableUnderline:t}=n,s=Js({root:["root",!t&&"underline"],input:["input"]},wme,e);return Ve({},e,s)},X0e=tr(n2,{shouldForwardProp:n=>jm(n)||n==="classes",name:"MuiInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...e2(n,e),!t.disableUnderline&&e.underline]}})(({theme:n,ownerState:e})=>{let r=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(r=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),Ve({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ix.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ix.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ix.disabled}, .${ix.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${ix.disabled}:before`]:{borderBottomStyle:"dotted"}})}),K0e=tr(r2,{name:"MuiInput",slot:"Input",overridesResolver:t2})({}),qK=de.forwardRef(function(e,t){var r,s,o,l;const u=ao({props:e,name:"MuiInput"}),{disableUnderline:h,components:f={},componentsProps:g,fullWidth:y=!1,inputComponent:b="input",multiline:S=!1,slotProps:C,slots:M={},type:A="text"}=u,k=yr(u,j0e),O=Y0e(u),D={root:{ownerState:{disableUnderline:h}}},U=C??g?pp(C??g,D):D,H=(r=(s=M.root)!=null?s:f.Root)!=null?r:X0e,V=(o=(l=M.input)!=null?l:f.Input)!=null?o:K0e;return Ae.jsx(G3,Ve({slots:{root:H,input:V},slotProps:U,fullWidth:y,inputComponent:b,multiline:S,ref:t,type:A},k,{classes:O}))});qK.muiName="Input";const V3=qK;function J0e(n){return Fs("MuiInputLabel",n)}Ks("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const q0e=["disableAnimation","margin","shrink","variant","className"],Q0e=n=>{const{classes:e,formControl:t,size:r,shrink:s,disableAnimation:o,variant:l,required:u}=n,h={root:["root",t&&"formControl",!o&&"animated",s&&"shrink",r&&r!=="normal"&&`size${vr(r)}`,l],asterisk:[u&&"asterisk"]},f=Js(h,J0e,e);return Ve({},e,f)},Z0e=tr(C0e,{shouldForwardProp:n=>jm(n)||n==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${e$.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(({theme:n,ownerState:e})=>Ve({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:n.transitions.create(["color","transform","max-width"],{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut})},e.variant==="filled"&&Ve({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&Ve({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&Ve({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),eve=de.forwardRef(function(e,t){const r=ao({name:"MuiInputLabel",props:e}),{disableAnimation:s=!1,shrink:o,className:l}=r,u=yr(r,q0e),h=O_();let f=o;typeof f>"u"&&h&&(f=h.filled||h.focused||h.adornedStart);const g=rb({props:r,muiFormControl:h,states:["size","variant","required","focused"]}),y=Ve({},r,{disableAnimation:s,formControl:h,shrink:f,size:g.size,variant:g.variant,required:g.required,focused:g.focused}),b=Q0e(y);return Ae.jsx(Z0e,Ve({"data-shrink":f,ownerState:y,ref:t,className:kr(b.root,l)},u,{classes:b}))}),tve=eve,nve=de.createContext({}),rve=nve;function ive(n){return Fs("MuiList",n)}Ks("MuiList",["root","padding","dense","subheader"]);const sve=["children","className","component","dense","disablePadding","subheader"],ove=n=>{const{classes:e,disablePadding:t,dense:r,subheader:s}=n;return Js({root:["root",!t&&"padding",r&&"dense",s&&"subheader"]},ive,e)},ave=tr("ul",{name:"MuiList",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})(({ownerState:n})=>Ve({listStyle:"none",margin:0,padding:0,position:"relative"},!n.disablePadding&&{paddingTop:8,paddingBottom:8},n.subheader&&{paddingTop:0})),lve=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiList"}),{children:s,className:o,component:l="ul",dense:u=!1,disablePadding:h=!1,subheader:f}=r,g=yr(r,sve),y=de.useMemo(()=>({dense:u}),[u]),b=Ve({},r,{component:l,dense:u,disablePadding:h}),S=ove(b);return Ae.jsx(rve.Provider,{value:y,children:Ae.jsxs(ave,Ve({as:l,className:kr(S.root,o),ref:t,ownerState:b},g,{children:[f,s]}))})}),uve=lve,cve=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function aL(n,e,t){return n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:n.firstChild}function ZH(n,e,t){return n===e?t?n.firstChild:n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:n.lastChild}function QK(n,e){if(e===void 0)return!0;let t=n.innerText;return t===void 0&&(t=n.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.indexOf(e.keys.join(""))===0}function ox(n,e,t,r,s,o){let l=!1,u=s(n,e,e?t:!1);for(;u;){if(u===n.firstChild){if(l)return!1;l=!0}const h=r?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!QK(u,o)||h)u=s(n,u,t);else return u.focus(),!0}return!1}const hve=de.forwardRef(function(e,t){const{actions:r,autoFocus:s=!1,autoFocusItem:o=!1,children:l,className:u,disabledItemsFocusable:h=!1,disableListWrap:f=!1,onKeyDown:g,variant:y="selectedMenu"}=e,b=yr(e,cve),S=de.useRef(null),C=de.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});E_(()=>{s&&S.current.focus()},[s]),de.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(P,{direction:D})=>{const U=!S.current.style.width;if(P.clientHeight<S.current.clientHeight&&U){const H=`${SK(mp(P))}px`;S.current.style[D==="rtl"?"paddingLeft":"paddingRight"]=H,S.current.style.width=`calc(100% + ${H})`}return S.current}}),[]);const M=P=>{const D=S.current,U=P.key,H=mp(D).activeElement;if(U==="ArrowDown")P.preventDefault(),ox(D,H,f,h,aL);else if(U==="ArrowUp")P.preventDefault(),ox(D,H,f,h,ZH);else if(U==="Home")P.preventDefault(),ox(D,null,f,h,aL);else if(U==="End")P.preventDefault(),ox(D,null,f,h,ZH);else if(U.length===1){const V=C.current,z=U.toLowerCase(),Z=performance.now();V.keys.length>0&&(Z-V.lastTime>500?(V.keys=[],V.repeating=!0,V.previousKeyMatched=!0):V.repeating&&z!==V.keys[0]&&(V.repeating=!1)),V.lastTime=Z,V.keys.push(z);const oe=H&&!V.repeating&&QK(H,V);V.previousKeyMatched&&(oe||ox(D,H,!1,h,aL,V))?P.preventDefault():V.previousKeyMatched=!1}g&&g(P)},A=_p(S,t);let k=-1;de.Children.forEach(l,(P,D)=>{if(!de.isValidElement(P)){k===D&&(k+=1,k>=l.length&&(k=-1));return}P.props.disabled||(y==="selectedMenu"&&P.props.selected||k===-1)&&(k=D),k===D&&(P.props.disabled||P.props.muiSkipListHighlight||P.type.muiSkipListHighlight)&&(k+=1,k>=l.length&&(k=-1))});const O=de.Children.map(l,(P,D)=>{if(D===k){const U={};return o&&(U.autoFocus=!0),P.props.tabIndex===void 0&&y==="selectedMenu"&&(U.tabIndex=0),de.cloneElement(P,U)}return P});return Ae.jsx(uve,Ve({role:"menu",ref:A,className:u,onKeyDown:M,tabIndex:s?0:-1},b,{children:O}))}),dve=hve;function fve(n){return Fs("MuiPopover",n)}Ks("MuiPopover",["root","paper"]);const pve=["onEntering"],mve=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],gve=["slotProps"];function eG(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.height/2:e==="bottom"&&(t=n.height),t}function tG(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.width/2:e==="right"&&(t=n.width),t}function nG(n){return[n.horizontal,n.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function lL(n){return typeof n=="function"?n():n}const vve=n=>{const{classes:e}=n;return Js({root:["root"],paper:["paper"]},fve,e)},_ve=tr(HK,{name:"MuiPopover",slot:"Root",overridesResolver:(n,e)=>e.root})({}),ZK=tr(U3,{name:"MuiPopover",slot:"Paper",overridesResolver:(n,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),yve=de.forwardRef(function(e,t){var r,s,o;const l=ao({props:e,name:"MuiPopover"}),{action:u,anchorEl:h,anchorOrigin:f={vertical:"top",horizontal:"left"},anchorPosition:g,anchorReference:y="anchorEl",children:b,className:S,container:C,elevation:M=8,marginThreshold:A=16,open:k,PaperProps:O={},slots:P,slotProps:D,transformOrigin:U={vertical:"top",horizontal:"left"},TransitionComponent:H=V0e,transitionDuration:V="auto",TransitionProps:{onEntering:z}={},disableScrollLock:Z=!1}=l,oe=yr(l.TransitionProps,pve),ue=yr(l,mve),q=(r=D==null?void 0:D.paper)!=null?r:O,ae=de.useRef(),le=_p(ae,q.ref),ce=Ve({},l,{anchorOrigin:f,anchorReference:y,elevation:M,marginThreshold:A,externalPaperSlotProps:q,transformOrigin:U,TransitionComponent:H,transitionDuration:V,TransitionProps:oe}),ge=vve(ce),$e=de.useCallback(()=>{if(y==="anchorPosition")return g;const He=lL(h),st=(He&&He.nodeType===1?He:mp(ae.current).body).getBoundingClientRect();return{top:st.top+eG(st,f.vertical),left:st.left+tG(st,f.horizontal)}},[h,f.horizontal,f.vertical,g,y]),K=de.useCallback(He=>({vertical:eG(He,U.vertical),horizontal:tG(He,U.horizontal)}),[U.horizontal,U.vertical]),ie=de.useCallback(He=>{const it={width:He.offsetWidth,height:He.offsetHeight},st=K(it);if(y==="none")return{top:null,left:null,transformOrigin:nG(st)};const It=$e();let kt=It.top-st.vertical,vt=It.left-st.horizontal;const Mt=kt+it.height,Ct=vt+it.width,gt=gv(lL(h)),Ee=gt.innerHeight-A,re=gt.innerWidth-A;if(A!==null&&kt<A){const Be=kt-A;kt-=Be,st.vertical+=Be}else if(A!==null&&Mt>Ee){const Be=Mt-Ee;kt-=Be,st.vertical+=Be}if(A!==null&&vt<A){const Be=vt-A;vt-=Be,st.horizontal+=Be}else if(Ct>re){const Be=Ct-re;vt-=Be,st.horizontal+=Be}return{top:`${Math.round(kt)}px`,left:`${Math.round(vt)}px`,transformOrigin:nG(st)}},[h,y,$e,K,A]),[se,fe]=de.useState(k),Se=de.useCallback(()=>{const He=ae.current;if(!He)return;const it=ie(He);it.top!==null&&(He.style.top=it.top),it.left!==null&&(He.style.left=it.left),He.style.transformOrigin=it.transformOrigin,fe(!0)},[ie]);de.useEffect(()=>(Z&&window.addEventListener("scroll",Se),()=>window.removeEventListener("scroll",Se)),[h,Z,Se]);const Ue=(He,it)=>{z&&z(He,it),Se()},ke=()=>{fe(!1)};de.useEffect(()=>{k&&Se()}),de.useImperativeHandle(u,()=>k?{updatePosition:()=>{Se()}}:null,[k,Se]),de.useEffect(()=>{if(!k)return;const He=CC(()=>{Se()}),it=gv(h);return it.addEventListener("resize",He),()=>{He.clear(),it.removeEventListener("resize",He)}},[h,k,Se]);let qe=V;V==="auto"&&!H.muiSupportAuto&&(qe=void 0);const we=C||(h?mp(lL(h)).body:void 0),Ze=(s=P==null?void 0:P.root)!=null?s:_ve,et=(o=P==null?void 0:P.paper)!=null?o:ZK,ft=vv({elementType:et,externalSlotProps:Ve({},q,{style:se?q.style:Ve({},q.style,{opacity:0})}),additionalProps:{elevation:M,ref:le},ownerState:ce,className:kr(ge.paper,q==null?void 0:q.className)}),at=vv({elementType:Ze,externalSlotProps:(D==null?void 0:D.root)||{},externalForwardedProps:ue,additionalProps:{ref:t,slotProps:{backdrop:{invisible:!0}},container:we,open:k},ownerState:ce,className:kr(ge.root,S)}),{slotProps:Ge}=at,Ie=yr(at,gve);return Ae.jsx(Ze,Ve({},Ie,!_R(Ze)&&{slotProps:Ge,disableScrollLock:Z},{children:Ae.jsx(H,Ve({appear:!0,in:k,onEntering:Ue,onExited:ke,timeout:qe},oe,{children:Ae.jsx(et,Ve({},ft,{children:b}))}))}))}),bve=yve;function Tve(n){return Fs("MuiMenu",n)}Ks("MuiMenu",["root","paper","list"]);const Sve=["onEntering"],wve=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],Eve={vertical:"top",horizontal:"right"},xve={vertical:"top",horizontal:"left"},$ve=n=>{const{classes:e}=n;return Js({root:["root"],paper:["paper"],list:["list"]},Tve,e)},Cve=tr(bve,{shouldForwardProp:n=>jm(n)||n==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(n,e)=>e.root})({}),Mve=tr(ZK,{name:"MuiMenu",slot:"Paper",overridesResolver:(n,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Ave=tr(dve,{name:"MuiMenu",slot:"List",overridesResolver:(n,e)=>e.list})({outline:0}),Ive=de.forwardRef(function(e,t){var r,s;const o=ao({props:e,name:"MuiMenu"}),{autoFocus:l=!0,children:u,className:h,disableAutoFocusItem:f=!1,MenuListProps:g={},onClose:y,open:b,PaperProps:S={},PopoverClasses:C,transitionDuration:M="auto",TransitionProps:{onEntering:A}={},variant:k="selectedMenu",slots:O={},slotProps:P={}}=o,D=yr(o.TransitionProps,Sve),U=yr(o,wve),H=L3(),V=Ve({},o,{autoFocus:l,disableAutoFocusItem:f,MenuListProps:g,onEntering:A,PaperProps:S,transitionDuration:M,TransitionProps:D,variant:k}),z=$ve(V),Z=l&&!f&&b,oe=de.useRef(null),ue=(K,ie)=>{oe.current&&oe.current.adjustStyleForScrollbar(K,{direction:H?"rtl":"ltr"}),A&&A(K,ie)},q=K=>{K.key==="Tab"&&(K.preventDefault(),y&&y(K,"tabKeyDown"))};let ae=-1;de.Children.map(u,(K,ie)=>{de.isValidElement(K)&&(K.props.disabled||(k==="selectedMenu"&&K.props.selected||ae===-1)&&(ae=ie))});const le=(r=O.paper)!=null?r:Mve,ce=(s=P.paper)!=null?s:S,ge=vv({elementType:O.root,externalSlotProps:P.root,ownerState:V,className:[z.root,h]}),$e=vv({elementType:le,externalSlotProps:ce,ownerState:V,className:z.paper});return Ae.jsx(Cve,Ve({onClose:y,anchorOrigin:{vertical:"bottom",horizontal:H?"right":"left"},transformOrigin:H?Eve:xve,slots:{paper:le,root:O.root},slotProps:{root:ge,paper:$e},open:b,ref:t,transitionDuration:M,TransitionProps:Ve({onEntering:ue},D),ownerState:V},U,{classes:C,children:Ae.jsx(Ave,Ve({onKeyDown:q,actions:oe,autoFocus:l&&(ae===-1||f),autoFocusItem:Z,variant:k},g,{className:kr(z.list,g.className),children:u}))}))}),Rve=Ive;function kve(n){return Fs("MuiNativeSelect",n)}const Ove=Ks("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),j3=Ove,Lve=["className","disabled","error","IconComponent","inputRef","variant"],Nve=n=>{const{classes:e,variant:t,disabled:r,multiple:s,open:o,error:l}=n,u={select:["select",t,r&&"disabled",s&&"multiple",l&&"error"],icon:["icon",`icon${vr(t)}`,o&&"iconOpen",r&&"disabled"]};return Js(u,kve,e)},eJ=({ownerState:n,theme:e})=>Ve({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":Ve({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${j3.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},n.variant==="filled"&&{"&&&":{paddingRight:32}},n.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),Dve=tr("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:jm,overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.select,e[t.variant],t.error&&e.error,{[`&.${j3.multiple}`]:e.multiple}]}})(eJ),tJ=({ownerState:n,theme:e})=>Ve({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${j3.disabled}`]:{color:(e.vars||e).palette.action.disabled}},n.open&&{transform:"rotate(180deg)"},n.variant==="filled"&&{right:7},n.variant==="outlined"&&{right:7}),Pve=tr("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${vr(t.variant)}`],t.open&&e.iconOpen]}})(tJ),Bve=de.forwardRef(function(e,t){const{className:r,disabled:s,error:o,IconComponent:l,inputRef:u,variant:h="standard"}=e,f=yr(e,Lve),g=Ve({},e,{disabled:s,variant:h,error:o}),y=Nve(g);return Ae.jsxs(de.Fragment,{children:[Ae.jsx(Dve,Ve({ownerState:g,className:kr(y.select,r),disabled:s,ref:u||t},f)),e.multiple?null:Ae.jsx(Pve,{as:l,ownerState:g,className:y.icon})]})}),Fve=Bve;var rG;const zve=["children","classes","className","label","notched"],Uve=tr("fieldset",{shouldForwardProp:jm})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Hve=tr("legend",{shouldForwardProp:jm})(({ownerState:n,theme:e})=>Ve({float:"unset",width:"auto",overflow:"hidden"},!n.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},n.withLabel&&Ve({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},n.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function Gve(n){const{className:e,label:t,notched:r}=n,s=yr(n,zve),o=t!=null&&t!=="",l=Ve({},n,{notched:r,withLabel:o});return Ae.jsx(Uve,Ve({"aria-hidden":!0,className:e,ownerState:l},s,{children:Ae.jsx(Hve,{ownerState:l,children:o?Ae.jsx("span",{children:t}):rG||(rG=Ae.jsx("span",{className:"notranslate",children:""}))})}))}const Wve=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Vve=n=>{const{classes:e}=n,r=Js({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},xme,e);return Ve({},e,r)},jve=tr(n2,{shouldForwardProp:n=>jm(n)||n==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:e2})(({theme:n,ownerState:e})=>{const t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return Ve({position:"relative",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${oy.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${oy.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${oy.focused} .${oy.notchedOutline}`]:{borderColor:(n.vars||n).palette[e.color].main,borderWidth:2},[`&.${oy.error} .${oy.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},[`&.${oy.disabled} .${oy.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&Ve({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),Yve=tr(Gve,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(n,e)=>e.notchedOutline})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),Xve=tr(r2,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:t2})(({theme:n,ownerState:e})=>Ve({padding:"16.5px 14px"},!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),nJ=de.forwardRef(function(e,t){var r,s,o,l,u;const h=ao({props:e,name:"MuiOutlinedInput"}),{components:f={},fullWidth:g=!1,inputComponent:y="input",label:b,multiline:S=!1,notched:C,slots:M={},type:A="text"}=h,k=yr(h,Wve),O=Vve(h),P=O_(),D=rb({props:h,muiFormControl:P,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),U=Ve({},h,{color:D.color||"primary",disabled:D.disabled,error:D.error,focused:D.focused,formControl:P,fullWidth:g,hiddenLabel:D.hiddenLabel,multiline:S,size:D.size,type:A}),H=(r=(s=M.root)!=null?s:f.Root)!=null?r:jve,V=(o=(l=M.input)!=null?l:f.Input)!=null?o:Xve;return Ae.jsx(G3,Ve({slots:{root:H,input:V},renderSuffix:z=>Ae.jsx(Yve,{ownerState:U,className:O.notchedOutline,label:b!=null&&b!==""&&D.required?u||(u=Ae.jsxs(de.Fragment,{children:[b,"","*"]})):b,notched:typeof C<"u"?C:!!(z.startAdornment||z.filled||z.focused)}),fullWidth:g,inputComponent:y,multiline:S,ref:t,type:A},k,{classes:Ve({},O,{notchedOutline:null})}))});nJ.muiName="Input";const rJ=nJ;function Kve(n){return Fs("MuiSelect",n)}const ax=Ks("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var iG;const Jve=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],qve=tr("div",{name:"MuiSelect",slot:"Select",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`&.${ax.select}`]:e.select},{[`&.${ax.select}`]:e[t.variant]},{[`&.${ax.error}`]:e.error},{[`&.${ax.multiple}`]:e.multiple}]}})(eJ,{[`&.${ax.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Qve=tr("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${vr(t.variant)}`],t.open&&e.iconOpen]}})(tJ),Zve=tr("input",{shouldForwardProp:n=>NK(n)&&n!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(n,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function sG(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}function e_e(n){return n==null||typeof n=="string"&&!n.trim()}const t_e=n=>{const{classes:e,variant:t,disabled:r,multiple:s,open:o,error:l}=n,u={select:["select",t,r&&"disabled",s&&"multiple",l&&"error"],icon:["icon",`icon${vr(t)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Js(u,Kve,e)},n_e=de.forwardRef(function(e,t){var r;const{"aria-describedby":s,"aria-label":o,autoFocus:l,autoWidth:u,children:h,className:f,defaultOpen:g,defaultValue:y,disabled:b,displayEmpty:S,error:C=!1,IconComponent:M,inputRef:A,labelId:k,MenuProps:O={},multiple:P,name:D,onBlur:U,onChange:H,onClose:V,onFocus:z,onOpen:Z,open:oe,readOnly:ue,renderValue:q,SelectDisplayProps:ae={},tabIndex:le,value:ce,variant:ge="standard"}=e,$e=yr(e,Jve),[K,ie]=pR({controlled:ce,default:y,name:"Select"}),[se,fe]=pR({controlled:oe,default:g,name:"Select"}),Se=de.useRef(null),Ue=de.useRef(null),[ke,qe]=de.useState(null),{current:we}=de.useRef(oe!=null),[Ze,et]=de.useState(),ft=_p(t,A),at=de.useCallback(me=>{Ue.current=me,me&&qe(me)},[]),Ge=ke==null?void 0:ke.parentNode;de.useImperativeHandle(ft,()=>({focus:()=>{Ue.current.focus()},node:Se.current,value:K}),[K]),de.useEffect(()=>{g&&se&&ke&&!we&&(et(u?null:Ge.clientWidth),Ue.current.focus())},[ke,u]),de.useEffect(()=>{l&&Ue.current.focus()},[l]),de.useEffect(()=>{if(!k)return;const me=mp(Ue.current).getElementById(k);if(me){const Re=()=>{getSelection().isCollapsed&&Ue.current.focus()};return me.addEventListener("click",Re),()=>{me.removeEventListener("click",Re)}}},[k]);const Ie=(me,Re)=>{me?Z&&Z(Re):V&&V(Re),we||(et(u?null:Ge.clientWidth),fe(me))},He=me=>{me.button===0&&(me.preventDefault(),Ue.current.focus(),Ie(!0,me))},it=me=>{Ie(!1,me)},st=de.Children.toArray(h),It=me=>{const Re=st.find(Fe=>Fe.props.value===me.target.value);Re!==void 0&&(ie(Re.props.value),H&&H(me,Re))},kt=me=>Re=>{let Fe;if(Re.currentTarget.hasAttribute("tabindex")){if(P){Fe=Array.isArray(K)?K.slice():[];const bt=K.indexOf(me.props.value);bt===-1?Fe.push(me.props.value):Fe.splice(bt,1)}else Fe=me.props.value;if(me.props.onClick&&me.props.onClick(Re),K!==Fe&&(ie(Fe),H)){const bt=Re.nativeEvent||Re,ze=new bt.constructor(bt.type,bt);Object.defineProperty(ze,"target",{writable:!0,value:{value:Fe,name:D}}),H(ze,me)}P||Ie(!1,Re)}},vt=me=>{ue||[" ","ArrowUp","ArrowDown","Enter"].indexOf(me.key)!==-1&&(me.preventDefault(),Ie(!0,me))},Mt=ke!==null&&se,Ct=me=>{!Mt&&U&&(Object.defineProperty(me,"target",{writable:!0,value:{value:K,name:D}}),U(me))};delete $e["aria-invalid"];let gt,Ee;const re=[];let Be=!1;(yR({value:K})||S)&&(q?gt=q(K):Be=!0);const mt=st.map(me=>{if(!de.isValidElement(me))return null;let Re;if(P){if(!Array.isArray(K))throw new Error(Z1(2));Re=K.some(Fe=>sG(Fe,me.props.value)),Re&&Be&&re.push(me.props.children)}else Re=sG(K,me.props.value),Re&&Be&&(Ee=me.props.children);return de.cloneElement(me,{"aria-selected":Re?"true":"false",onClick:kt(me),onKeyUp:Fe=>{Fe.key===" "&&Fe.preventDefault(),me.props.onKeyUp&&me.props.onKeyUp(Fe)},role:"option",selected:Re,value:void 0,"data-value":me.props.value})});Be&&(P?re.length===0?gt=null:gt=re.reduce((me,Re,Fe)=>(me.push(Re),Fe<re.length-1&&me.push(", "),me),[]):gt=Ee);let yt=Ze;!u&&we&&ke&&(yt=Ge.clientWidth);let wt;typeof le<"u"?wt=le:wt=b?null:0;const Ke=ae.id||(D?`mui-component-select-${D}`:void 0),Qe=Ve({},e,{variant:ge,value:K,open:Mt,error:C}),Le=t_e(Qe),Q=Ve({},O.PaperProps,(r=O.slotProps)==null?void 0:r.paper),te=Kk();return Ae.jsxs(de.Fragment,{children:[Ae.jsx(qve,Ve({ref:at,tabIndex:wt,role:"combobox","aria-controls":te,"aria-disabled":b?"true":void 0,"aria-expanded":Mt?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[k,Ke].filter(Boolean).join(" ")||void 0,"aria-describedby":s,onKeyDown:vt,onMouseDown:b||ue?null:He,onBlur:Ct,onFocus:z},ae,{ownerState:Qe,className:kr(ae.className,Le.select,f),id:Ke,children:e_e(gt)?iG||(iG=Ae.jsx("span",{className:"notranslate",children:""})):gt})),Ae.jsx(Zve,Ve({"aria-invalid":C,value:Array.isArray(K)?K.join(","):K,name:D,ref:Se,"aria-hidden":!0,onChange:It,tabIndex:-1,disabled:b,className:Le.nativeInput,autoFocus:l,ownerState:Qe},$e)),Ae.jsx(Qve,{as:M,className:Le.icon,ownerState:Qe}),Ae.jsx(Rve,Ve({id:`menu-${D||""}`,anchorEl:Ge,open:Mt,onClose:it,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},O,{MenuListProps:Ve({"aria-labelledby":k,role:"listbox","aria-multiselectable":P?"true":void 0,disableListWrap:!0,id:te},O.MenuListProps),slotProps:Ve({},O.slotProps,{paper:Ve({},Q,{style:Ve({minWidth:yt},Q!=null?Q.style:null)})}),children:mt}))]})}),r_e=n_e,i_e=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],s_e=["root"],o_e=n=>{const{classes:e}=n;return e},Y3={name:"MuiSelect",overridesResolver:(n,e)=>e.root,shouldForwardProp:n=>jm(n)&&n!=="variant",slot:"Root"},a_e=tr(V3,Y3)(""),l_e=tr(rJ,Y3)(""),u_e=tr(jK,Y3)(""),iJ=de.forwardRef(function(e,t){const r=ao({name:"MuiSelect",props:e}),{autoWidth:s=!1,children:o,classes:l={},className:u,defaultOpen:h=!1,displayEmpty:f=!1,IconComponent:g=Ame,id:y,input:b,inputProps:S,label:C,labelId:M,MenuProps:A,multiple:k=!1,native:O=!1,onClose:P,onOpen:D,open:U,renderValue:H,SelectDisplayProps:V,variant:z="outlined"}=r,Z=yr(r,i_e),oe=O?Fve:r_e,ue=O_(),q=rb({props:r,muiFormControl:ue,states:["variant","error"]}),ae=q.variant||z,le=Ve({},r,{variant:ae,classes:l}),ce=o_e(le),ge=yr(ce,s_e),$e=b||{standard:Ae.jsx(a_e,{ownerState:le}),outlined:Ae.jsx(l_e,{label:C,ownerState:le}),filled:Ae.jsx(u_e,{ownerState:le})}[ae],K=_p(t,$e.ref);return Ae.jsx(de.Fragment,{children:de.cloneElement($e,Ve({inputComponent:oe,inputProps:Ve({children:o,error:q.error,IconComponent:g,variant:ae,type:void 0,multiple:k},O?{id:y}:{autoWidth:s,defaultOpen:h,displayEmpty:f,labelId:M,MenuProps:A,onClose:P,onOpen:D,open:U,renderValue:H,SelectDisplayProps:Ve({id:y},V)},S,{classes:S?pp(ge,S.classes):ge},b?b.props.inputProps:{})},(k&&O||f)&&ae==="outlined"?{notched:!0}:{},{ref:K,className:kr($e.props.className,u,ce.root)},!b&&{variant:ae},Z))})});iJ.muiName="Select";const c_e=iJ;function h_e(n){return Fs("MuiSwitch",n)}const ip=Ks("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),d_e=["className","color","edge","size","sx"],f_e=Zfe(),p_e=n=>{const{classes:e,edge:t,size:r,color:s,checked:o,disabled:l}=n,u={root:["root",t&&`edge${vr(t)}`,`size${vr(r)}`],switchBase:["switchBase",`color${vr(s)}`,o&&"checked",l&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},h=Js(u,h_e,e);return Ve({},e,h)},m_e=tr("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.edge&&e[`edge${vr(t.edge)}`],e[`size${vr(t.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${ip.thumb}`]:{width:16,height:16},[`& .${ip.switchBase}`]:{padding:4,[`&.${ip.checked}`]:{transform:"translateX(16px)"}}}}]}),g_e=tr(UK,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.switchBase,{[`& .${ip.input}`]:e.input},t.color!=="default"&&e[`color${vr(t.color)}`]]}})(({theme:n})=>({position:"absolute",top:0,left:0,zIndex:1,color:n.vars?n.vars.palette.Switch.defaultColor:`${n.palette.mode==="light"?n.palette.common.white:n.palette.grey[300]}`,transition:n.transitions.create(["left","transform"],{duration:n.transitions.duration.shortest}),[`&.${ip.checked}`]:{transform:"translateX(20px)"},[`&.${ip.disabled}`]:{color:n.vars?n.vars.palette.Switch.defaultDisabledColor:`${n.palette.mode==="light"?n.palette.grey[100]:n.palette.grey[600]}`},[`&.${ip.checked} + .${ip.track}`]:{opacity:.5},[`&.${ip.disabled} + .${ip.track}`]:{opacity:n.vars?n.vars.opacity.switchTrackDisabled:`${n.palette.mode==="light"?.12:.2}`},[`& .${ip.input}`]:{left:"-100%",width:"300%"}}),({theme:n})=>({"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Sg(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(n.palette).filter(([,e])=>e.main&&e.light).map(([e])=>({props:{color:e},style:{[`&.${ip.checked}`]:{color:(n.vars||n).palette[e].main,"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette[e].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Sg(n.palette[e].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ip.disabled}`]:{color:n.vars?n.vars.palette.Switch[`${e}DisabledColor`]:`${n.palette.mode==="light"?CK(n.palette[e].main,.62):$K(n.palette[e].main,.55)}`}},[`&.${ip.checked} + .${ip.track}`]:{backgroundColor:(n.vars||n).palette[e].main}}}))]})),v_e=tr("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(n,e)=>e.track})(({theme:n})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:n.transitions.create(["opacity","background-color"],{duration:n.transitions.duration.shortest}),backgroundColor:n.vars?n.vars.palette.common.onBackground:`${n.palette.mode==="light"?n.palette.common.black:n.palette.common.white}`,opacity:n.vars?n.vars.opacity.switchTrack:`${n.palette.mode==="light"?.38:.3}`})),__e=tr("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(n,e)=>e.thumb})(({theme:n})=>({boxShadow:(n.vars||n).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),y_e=de.forwardRef(function(e,t){const r=f_e({props:e,name:"MuiSwitch"}),{className:s,color:o="primary",edge:l=!1,size:u="medium",sx:h}=r,f=yr(r,d_e),g=Ve({},r,{color:o,edge:l,size:u}),y=p_e(g),b=Ae.jsx(__e,{className:y.thumb,ownerState:g});return Ae.jsxs(m_e,{className:kr(y.root,s),sx:h,ownerState:g,children:[Ae.jsx(g_e,Ve({type:"checkbox",icon:b,checkedIcon:b,ref:t,ownerState:g},f,{classes:Ve({},y,{root:y.switchBase})})),Ae.jsx(v_e,{className:y.track,ownerState:g})]})}),b_e=y_e;function T_e(n){return Fs("MuiTab",n)}const S_e=Ks("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),jb=S_e,w_e=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],E_e=n=>{const{classes:e,textColor:t,fullWidth:r,wrapped:s,icon:o,label:l,selected:u,disabled:h}=n,f={root:["root",o&&l&&"labelIcon",`textColor${vr(t)}`,r&&"fullWidth",s&&"wrapped",u&&"selected",h&&"disabled"],iconWrapper:["iconWrapper"]};return Js(f,T_e,e)},x_e=tr(IC,{name:"MuiTab",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.label&&t.icon&&e.labelIcon,e[`textColor${vr(t.textColor)}`],t.fullWidth&&e.fullWidth,t.wrapped&&e.wrapped]}})(({theme:n,ownerState:e})=>Ve({},n.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},e.label&&{flexDirection:e.iconPosition==="top"||e.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},e.icon&&e.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${jb.iconWrapper}`]:Ve({},e.iconPosition==="top"&&{marginBottom:6},e.iconPosition==="bottom"&&{marginTop:6},e.iconPosition==="start"&&{marginRight:n.spacing(1)},e.iconPosition==="end"&&{marginLeft:n.spacing(1)})},e.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${jb.selected}`]:{opacity:1},[`&.${jb.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity}},e.textColor==="primary"&&{color:(n.vars||n).palette.text.secondary,[`&.${jb.selected}`]:{color:(n.vars||n).palette.primary.main},[`&.${jb.disabled}`]:{color:(n.vars||n).palette.text.disabled}},e.textColor==="secondary"&&{color:(n.vars||n).palette.text.secondary,[`&.${jb.selected}`]:{color:(n.vars||n).palette.secondary.main},[`&.${jb.disabled}`]:{color:(n.vars||n).palette.text.disabled}},e.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},e.wrapped&&{fontSize:n.typography.pxToRem(12)})),$_e=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiTab"}),{className:s,disabled:o=!1,disableFocusRipple:l=!1,fullWidth:u,icon:h,iconPosition:f="top",indicator:g,label:y,onChange:b,onClick:S,onFocus:C,selected:M,selectionFollowsFocus:A,textColor:k="inherit",value:O,wrapped:P=!1}=r,D=yr(r,w_e),U=Ve({},r,{disabled:o,disableFocusRipple:l,selected:M,icon:!!h,iconPosition:f,label:!!y,fullWidth:u,textColor:k,wrapped:P}),H=E_e(U),V=h&&y&&de.isValidElement(h)?de.cloneElement(h,{className:kr(H.iconWrapper,h.props.className)}):h,z=oe=>{!M&&b&&b(oe,O),S&&S(oe)},Z=oe=>{A&&!M&&b&&b(oe,O),C&&C(oe)};return Ae.jsxs(x_e,Ve({focusRipple:!l,className:kr(H.root,s),ref:t,role:"tab","aria-selected":M,disabled:o,onClick:z,onFocus:Z,ownerState:U,tabIndex:M?0:-1},D,{children:[f==="top"||f==="start"?Ae.jsxs(de.Fragment,{children:[V,y]}):Ae.jsxs(de.Fragment,{children:[y,V]}),g]}))}),C_e=$_e,M_e=cT(Ae.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),A_e=cT(Ae.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function I_e(n){return(1+Math.sin(Math.PI*n-Math.PI/2))/2}function R_e(n,e,t,r={},s=()=>{}){const{ease:o=I_e,duration:l=300}=r;let u=null;const h=e[n];let f=!1;const g=()=>{f=!0},y=b=>{if(f){s(new Error("Animation cancelled"));return}u===null&&(u=b);const S=Math.min(1,(b-u)/l);if(e[n]=o(S)*(t-h)+h,S>=1){requestAnimationFrame(()=>{s(null)});return}requestAnimationFrame(y)};return h===t?(s(new Error("Element already at target position")),g):(requestAnimationFrame(y),g)}const k_e=["onChange"],O_e={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function L_e(n){const{onChange:e}=n,t=yr(n,k_e),r=de.useRef(),s=de.useRef(null),o=()=>{r.current=s.current.offsetHeight-s.current.clientHeight};return E_(()=>{const l=CC(()=>{const h=r.current;o(),h!==r.current&&e(r.current)}),u=gv(s.current);return u.addEventListener("resize",l),()=>{l.clear(),u.removeEventListener("resize",l)}},[e]),de.useEffect(()=>{o(),e(r.current)},[e]),Ae.jsx("div",Ve({style:O_e,ref:s},t))}function N_e(n){return Fs("MuiTabScrollButton",n)}const D_e=Ks("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),P_e=D_e,B_e=["className","slots","slotProps","direction","orientation","disabled"],F_e=n=>{const{classes:e,orientation:t,disabled:r}=n;return Js({root:["root",t,r&&"disabled"]},N_e,e)},z_e=tr(IC,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.orientation&&e[t.orientation]]}})(({ownerState:n})=>Ve({width:40,flexShrink:0,opacity:.8,[`&.${P_e.disabled}`]:{opacity:0}},n.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${n.isRtl?-90:90}deg)`}})),U_e=de.forwardRef(function(e,t){var r,s;const o=ao({props:e,name:"MuiTabScrollButton"}),{className:l,slots:u={},slotProps:h={},direction:f}=o,g=yr(o,B_e),y=L3(),b=Ve({isRtl:y},o),S=F_e(b),C=(r=u.StartScrollButtonIcon)!=null?r:M_e,M=(s=u.EndScrollButtonIcon)!=null?s:A_e,A=vv({elementType:C,externalSlotProps:h.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:b}),k=vv({elementType:M,externalSlotProps:h.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:b});return Ae.jsx(z_e,Ve({component:"div",className:kr(S.root,l),ref:t,role:null,ownerState:b,tabIndex:null},g,{children:f==="left"?Ae.jsx(C,Ve({},A)):Ae.jsx(M,Ve({},k))}))}),H_e=U_e;function G_e(n){return Fs("MuiTabs",n)}const W_e=Ks("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),uL=W_e,V_e=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],oG=(n,e)=>n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n.firstChild,aG=(n,e)=>n===e?n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n.lastChild,HM=(n,e,t)=>{let r=!1,s=t(n,e);for(;s;){if(s===n.firstChild){if(r)return;r=!0}const o=s.disabled||s.getAttribute("aria-disabled")==="true";if(!s.hasAttribute("tabindex")||o)s=t(n,s);else{s.focus();return}}},j_e=n=>{const{vertical:e,fixed:t,hideScrollbar:r,scrollableX:s,scrollableY:o,centered:l,scrollButtonsHideMobile:u,classes:h}=n;return Js({root:["root",e&&"vertical"],scroller:["scroller",t&&"fixed",r&&"hideScrollbar",s&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",e&&"flexContainerVertical",l&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",u&&"scrollButtonsHideMobile"],scrollableX:[s&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},G_e,h)},Y_e=tr("div",{name:"MuiTabs",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${uL.scrollButtons}`]:e.scrollButtons},{[`& .${uL.scrollButtons}`]:t.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,t.vertical&&e.vertical]}})(({ownerState:n,theme:e})=>Ve({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},n.vertical&&{flexDirection:"column"},n.scrollButtonsHideMobile&&{[`& .${uL.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}})),X_e=tr("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.scroller,t.fixed&&e.fixed,t.hideScrollbar&&e.hideScrollbar,t.scrollableX&&e.scrollableX,t.scrollableY&&e.scrollableY]}})(({ownerState:n})=>Ve({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},n.fixed&&{overflowX:"hidden",width:"100%"},n.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},n.scrollableX&&{overflowX:"auto",overflowY:"hidden"},n.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),K_e=tr("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.flexContainer,t.vertical&&e.flexContainerVertical,t.centered&&e.centered]}})(({ownerState:n})=>Ve({display:"flex"},n.vertical&&{flexDirection:"column"},n.centered&&{justifyContent:"center"})),J_e=tr("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(n,e)=>e.indicator})(({ownerState:n,theme:e})=>Ve({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create()},n.indicatorColor==="primary"&&{backgroundColor:(e.vars||e).palette.primary.main},n.indicatorColor==="secondary"&&{backgroundColor:(e.vars||e).palette.secondary.main},n.vertical&&{height:"100%",width:2,right:0})),q_e=tr(L_e)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),lG={},Q_e=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiTabs"}),s=MC(),o=L3(),{"aria-label":l,"aria-labelledby":u,action:h,centered:f=!1,children:g,className:y,component:b="div",allowScrollButtonsMobile:S=!1,indicatorColor:C="primary",onChange:M,orientation:A="horizontal",ScrollButtonComponent:k=H_e,scrollButtons:O="auto",selectionFollowsFocus:P,slots:D={},slotProps:U={},TabIndicatorProps:H={},TabScrollButtonProps:V={},textColor:z="primary",value:Z,variant:oe="standard",visibleScrollbar:ue=!1}=r,q=yr(r,V_e),ae=oe==="scrollable",le=A==="vertical",ce=le?"scrollTop":"scrollLeft",ge=le?"top":"left",$e=le?"bottom":"right",K=le?"clientHeight":"clientWidth",ie=le?"height":"width",se=Ve({},r,{component:b,allowScrollButtonsMobile:S,indicatorColor:C,orientation:A,vertical:le,scrollButtons:O,textColor:z,variant:oe,visibleScrollbar:ue,fixed:!ae,hideScrollbar:ae&&!ue,scrollableX:ae&&!le,scrollableY:ae&&le,centered:f&&!ae,scrollButtonsHideMobile:!S}),fe=j_e(se),Se=vv({elementType:D.StartScrollButtonIcon,externalSlotProps:U.startScrollButtonIcon,ownerState:se}),Ue=vv({elementType:D.EndScrollButtonIcon,externalSlotProps:U.endScrollButtonIcon,ownerState:se}),[ke,qe]=de.useState(!1),[we,Ze]=de.useState(lG),[et,ft]=de.useState(!1),[at,Ge]=de.useState(!1),[Ie,He]=de.useState(!1),[it,st]=de.useState({overflow:"hidden",scrollbarWidth:0}),It=new Map,kt=de.useRef(null),vt=de.useRef(null),Mt=()=>{const Fe=kt.current;let bt;if(Fe){const Pt=Fe.getBoundingClientRect();bt={clientWidth:Fe.clientWidth,scrollLeft:Fe.scrollLeft,scrollTop:Fe.scrollTop,scrollLeftNormalized:Sde(Fe,o?"rtl":"ltr"),scrollWidth:Fe.scrollWidth,top:Pt.top,bottom:Pt.bottom,left:Pt.left,right:Pt.right}}let ze;if(Fe&&Z!==!1){const Pt=vt.current.children;if(Pt.length>0){const lt=Pt[It.get(Z)];ze=lt?lt.getBoundingClientRect():null}}return{tabsMeta:bt,tabMeta:ze}},Ct=sv(()=>{const{tabsMeta:Fe,tabMeta:bt}=Mt();let ze=0,Pt;if(le)Pt="top",bt&&Fe&&(ze=bt.top-Fe.top+Fe.scrollTop);else if(Pt=o?"right":"left",bt&&Fe){const Gt=o?Fe.scrollLeftNormalized+Fe.clientWidth-Fe.scrollWidth:Fe.scrollLeft;ze=(o?-1:1)*(bt[Pt]-Fe[Pt]+Gt)}const lt={[Pt]:ze,[ie]:bt?bt[ie]:0};if(isNaN(we[Pt])||isNaN(we[ie]))Ze(lt);else{const Gt=Math.abs(we[Pt]-lt[Pt]),Wt=Math.abs(we[ie]-lt[ie]);(Gt>=1||Wt>=1)&&Ze(lt)}}),gt=(Fe,{animation:bt=!0}={})=>{bt?R_e(ce,kt.current,Fe,{duration:s.transitions.duration.standard}):kt.current[ce]=Fe},Ee=Fe=>{let bt=kt.current[ce];le?bt+=Fe:(bt+=Fe*(o?-1:1),bt*=o&&wK()==="reverse"?-1:1),gt(bt)},re=()=>{const Fe=kt.current[K];let bt=0;const ze=Array.from(vt.current.children);for(let Pt=0;Pt<ze.length;Pt+=1){const lt=ze[Pt];if(bt+lt[K]>Fe){Pt===0&&(bt=Fe);break}bt+=lt[K]}return bt},Be=()=>{Ee(-1*re())},mt=()=>{Ee(re())},yt=de.useCallback(Fe=>{st({overflow:null,scrollbarWidth:Fe})},[]),wt=()=>{const Fe={};Fe.scrollbarSizeListener=ae?Ae.jsx(q_e,{onChange:yt,className:kr(fe.scrollableX,fe.hideScrollbar)}):null;const ze=ae&&(O==="auto"&&(et||at)||O===!0);return Fe.scrollButtonStart=ze?Ae.jsx(k,Ve({slots:{StartScrollButtonIcon:D.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:Se},orientation:A,direction:o?"right":"left",onClick:Be,disabled:!et},V,{className:kr(fe.scrollButtons,V.className)})):null,Fe.scrollButtonEnd=ze?Ae.jsx(k,Ve({slots:{EndScrollButtonIcon:D.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:Ue},orientation:A,direction:o?"left":"right",onClick:mt,disabled:!at},V,{className:kr(fe.scrollButtons,V.className)})):null,Fe},Ke=sv(Fe=>{const{tabsMeta:bt,tabMeta:ze}=Mt();if(!(!ze||!bt)){if(ze[ge]<bt[ge]){const Pt=bt[ce]+(ze[ge]-bt[ge]);gt(Pt,{animation:Fe})}else if(ze[$e]>bt[$e]){const Pt=bt[ce]+(ze[$e]-bt[$e]);gt(Pt,{animation:Fe})}}}),Qe=sv(()=>{ae&&O!==!1&&He(!Ie)});de.useEffect(()=>{const Fe=CC(()=>{kt.current&&Ct()});let bt;const ze=Gt=>{Gt.forEach(Wt=>{Wt.removedNodes.forEach(bn=>{var ar;(ar=bt)==null||ar.unobserve(bn)}),Wt.addedNodes.forEach(bn=>{var ar;(ar=bt)==null||ar.observe(bn)})}),Fe(),Qe()},Pt=gv(kt.current);Pt.addEventListener("resize",Fe);let lt;return typeof ResizeObserver<"u"&&(bt=new ResizeObserver(Fe),Array.from(vt.current.children).forEach(Gt=>{bt.observe(Gt)})),typeof MutationObserver<"u"&&(lt=new MutationObserver(ze),lt.observe(vt.current,{childList:!0})),()=>{var Gt,Wt;Fe.clear(),Pt.removeEventListener("resize",Fe),(Gt=lt)==null||Gt.disconnect(),(Wt=bt)==null||Wt.disconnect()}},[Ct,Qe]),de.useEffect(()=>{const Fe=Array.from(vt.current.children),bt=Fe.length;if(typeof IntersectionObserver<"u"&&bt>0&&ae&&O!==!1){const ze=Fe[0],Pt=Fe[bt-1],lt={root:kt.current,threshold:.99},Gt=cr=>{ft(!cr[0].isIntersecting)},Wt=new IntersectionObserver(Gt,lt);Wt.observe(ze);const bn=cr=>{Ge(!cr[0].isIntersecting)},ar=new IntersectionObserver(bn,lt);return ar.observe(Pt),()=>{Wt.disconnect(),ar.disconnect()}}},[ae,O,Ie,g==null?void 0:g.length]),de.useEffect(()=>{qe(!0)},[]),de.useEffect(()=>{Ct()}),de.useEffect(()=>{Ke(lG!==we)},[Ke,we]),de.useImperativeHandle(h,()=>({updateIndicator:Ct,updateScrollButtons:Qe}),[Ct,Qe]);const Le=Ae.jsx(J_e,Ve({},H,{className:kr(fe.indicator,H.className),ownerState:se,style:Ve({},we,H.style)}));let Q=0;const te=de.Children.map(g,Fe=>{if(!de.isValidElement(Fe))return null;const bt=Fe.props.value===void 0?Q:Fe.props.value;It.set(bt,Q);const ze=bt===Z;return Q+=1,de.cloneElement(Fe,Ve({fullWidth:oe==="fullWidth",indicator:ze&&!ke&&Le,selected:ze,selectionFollowsFocus:P,onChange:M,textColor:z,value:bt},Q===1&&Z===!1&&!Fe.props.tabIndex?{tabIndex:0}:{}))}),me=Fe=>{const bt=vt.current,ze=mp(bt).activeElement;if(ze.getAttribute("role")!=="tab")return;let lt=A==="horizontal"?"ArrowLeft":"ArrowUp",Gt=A==="horizontal"?"ArrowRight":"ArrowDown";switch(A==="horizontal"&&o&&(lt="ArrowRight",Gt="ArrowLeft"),Fe.key){case lt:Fe.preventDefault(),HM(bt,ze,aG);break;case Gt:Fe.preventDefault(),HM(bt,ze,oG);break;case"Home":Fe.preventDefault(),HM(bt,null,oG);break;case"End":Fe.preventDefault(),HM(bt,null,aG);break}},Re=wt();return Ae.jsxs(Y_e,Ve({className:kr(fe.root,y),ownerState:se,ref:t,as:b},q,{children:[Re.scrollButtonStart,Re.scrollbarSizeListener,Ae.jsxs(X_e,{className:fe.scroller,ownerState:se,style:{overflow:it.overflow,[le?`margin${o?"Left":"Right"}`:"marginBottom"]:ue?void 0:-it.scrollbarWidth},ref:kt,children:[Ae.jsx(K_e,{"aria-label":l,"aria-labelledby":u,"aria-orientation":A==="vertical"?"vertical":null,className:fe.flexContainer,ownerState:se,onKeyDown:me,ref:vt,role:"tablist",children:te}),ke&&Le]}),Re.scrollButtonEnd]}))}),Z_e=Q_e;function eye(n){return Fs("MuiTextField",n)}Ks("MuiTextField",["root"]);const tye=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],nye={standard:V3,filled:jK,outlined:rJ},rye=n=>{const{classes:e}=n;return Js({root:["root"]},eye,e)},iye=tr(Zge,{name:"MuiTextField",slot:"Root",overridesResolver:(n,e)=>e.root})({}),sye=de.forwardRef(function(e,t){const r=ao({props:e,name:"MuiTextField"}),{autoComplete:s,autoFocus:o=!1,children:l,className:u,color:h="primary",defaultValue:f,disabled:g=!1,error:y=!1,FormHelperTextProps:b,fullWidth:S=!1,helperText:C,id:M,InputLabelProps:A,inputProps:k,InputProps:O,inputRef:P,label:D,maxRows:U,minRows:H,multiline:V=!1,name:z,onBlur:Z,onChange:oe,onFocus:ue,placeholder:q,required:ae=!1,rows:le,select:ce=!1,SelectProps:ge,type:$e,value:K,variant:ie="outlined"}=r,se=yr(r,tye),fe=Ve({},r,{autoFocus:o,color:h,disabled:g,error:y,fullWidth:S,multiline:V,required:ae,select:ce,variant:ie}),Se=rye(fe),Ue={};ie==="outlined"&&(A&&typeof A.shrink<"u"&&(Ue.notched=A.shrink),Ue.label=D),ce&&((!ge||!ge.native)&&(Ue.id=void 0),Ue["aria-describedby"]=void 0);const ke=Kk(M),qe=C&&ke?`${ke}-helper-text`:void 0,we=D&&ke?`${ke}-label`:void 0,Ze=nye[ie],et=Ae.jsx(Ze,Ve({"aria-describedby":qe,autoComplete:s,autoFocus:o,defaultValue:f,fullWidth:S,multiline:V,name:z,rows:le,maxRows:U,minRows:H,type:$e,value:K,id:ke,inputRef:P,onBlur:Z,onChange:oe,onFocus:ue,placeholder:q,inputProps:k},Ue,O));return Ae.jsxs(iye,Ve({className:kr(Se.root,u),disabled:g,error:y,fullWidth:S,ref:t,required:ae,color:h,variant:ie,ownerState:fe},se,{children:[D!=null&&D!==""&&Ae.jsx(tve,Ve({htmlFor:ke,id:we},A,{children:D})),ce?Ae.jsx(c_e,Ve({"aria-describedby":qe,id:ke,labelId:we,value:K,input:et},ge,{children:l})):et,C&&Ae.jsx(y0e,Ve({id:qe},b,{children:C}))]}))}),X3=sye,K3="/assets/misty-Q0vWeXcA.svg",oye="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20400%20400'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-54.8776,-69.2073)'%3e%3cg%20transform='matrix(1.02822,0,0,1.03479,-55.9535,52.2937)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,286.809,459.697)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'/%3e%3c/g%3e%3cg%20transform='matrix(0.440957,0.440957,-0.704461,0.704461,267.224,-50.5009)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.249775,0.249775,-0.614768,-0.614768,655.131,143.162)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20451.634,248.57%20429.001,248.57L121.05,248.57C98.417,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2098.417,215.247%20121.05,215.247L429.001,215.247C451.634,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(1.02822,0,0,1.03479,44.3939,-48.6949)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,171.204,575.302)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,453.376,402.183)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.249775,0.249775,-0.614768,-0.614768,274.402,521.42)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20451.634,248.57%20429.001,248.57L121.05,248.57C98.417,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2098.417,215.247%20121.05,215.247L429.001,215.247C451.634,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.440957,-0.440957,0.704461,-0.704461,241.43,564.525)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,395.716,343.809)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",aye="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20401%20400'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-53.2986,-56.7857)'%3e%3cg%20transform='matrix(0.992184,0,0,0.998302,0.416603,0.0964004)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,286.809,459.697)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'/%3e%3c/g%3e%3cg%20transform='matrix(0.440957,0.440957,-0.704461,0.704461,267.224,-50.5009)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.237219,0.237219,-0.614768,-0.614768,613.767,184.608)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20450.661,248.57%20426.831,248.57L123.22,248.57C99.39,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2099.39,215.247%20123.22,215.247L426.831,215.247C450.661,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(0.992184,0,0,0.998302,0.416603,0.0964004)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,171.204,575.302)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,453.376,402.183)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.237219,0.237219,-0.614768,-0.614768,311.603,484.301)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20450.661,248.57%20426.831,248.57L123.22,248.57C99.39,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2099.39,215.247%20123.22,215.247L426.831,215.247C450.661,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.440957,-0.440957,0.704461,-0.704461,241.43,564.525)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,395.716,343.809)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function Qp({icon:n,text:e,clickFunction:t,disabled:r,style:s,useCaps:o=!0}){let l=o?{}:{textTransform:"none"};return Ae.jsx(ege,{onClick:t,startIcon:n,disabled:r,classes:{disabled:"disabledDropShadowButton"},style:{margin:"5px",color:"black",backgroundColor:"#FAFAFA",borderRadius:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",...l,...s},children:e})}var J3={},cL={};const lye=Sv(Qfe);var uG;function i2(){return uG||(uG=1,function(n){"use client";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=lye}(cL)),cL}var uye=hE;Object.defineProperty(J3,"__esModule",{value:!0});var sJ=J3.default=void 0,cye=uye(i2()),hye=Ae;sJ=J3.default=(0,cye.default)((0,hye.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");const dye=tr(Z_e)({borderBottom:"1px solid #FAFAFA"}),hL=tr(n=>Ae.jsx(C_e,{...n}))(({theme:n})=>({marginRight:n.spacing(1),color:"#666",padding:"12px 30px",backgroundColor:"#E4E5F1",borderTopLeftRadius:"5px",borderTopRightRadius:"5px","&:hover":{color:"white",opacity:1},"&.Mui-selected":{height:"100%",width:"100%",color:"black",backgroundColor:"#FAFAFA",fontWeight:n.typography.fontWeightMedium}}));function fye(n){const[e,t]=de.useState(""),r=Bn(xi(A=>A.setIp)),s=Bn(xi(A=>A.setImageList)),o=Bn(xi(A=>A.setAudioList)),l=Bn(xi(A=>A.setIsConnected)),u=Bn(xi(A=>A.isConnected)),h=Bn(xi(A=>A.disconnect)),f=Bn(A=>A.setActiveModal),g=Bn(A=>A.setHeaderDimensions),y=Bn(xi(A=>A.screenToShow)),b=Bn(A=>A.updateScreen);function S(A){let k=A.target.textContent===cI?"Story":A.target.textContent===hI?"Planning":"Programming";Ma(`User clicked new tab: ${k}`),b(A.target.textContent===cI?p3:A.target.textContent===hI?m3:gk)}de.useEffect(()=>{const A=document.getElementById("website-header");new ResizeObserver(O=>{for(let P of O)g(A.offsetHeight,A.offsetWidth)}).observe(A)},[]);const C=()=>{r(e),fetch(`http://${e}/api/battery`,{method:"GET"}).then(A=>{if(!A.ok)throw new Error(`Request failed with status ${A.status}`);return A.json()}).then(A=>(console.log(`Successfully sent a GET request, the response is: ${A}`),l(!0),fetch(`http://${e}/api/audio/list`))).then(A=>{if(!A.ok)throw new Error(`Request failed with status ${A.status}`);return A.json()}).then(A=>(o(A.result),fetch(`http://${e}/api/images/list`))).then(A=>{if(!A.ok)throw new Error(`Request failed with status ${A.status}`);return A.json()}).then(A=>{s(A.result)}).catch(A=>{console.error("Error during fetch operation:",A.message),alert(`Error fetching data: ${A.message}`)}),Ma("Hit Confirm IP Address Button")},M={backgroundColor:"#585D92",color:"#FFFFFF",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",zIndex:101,position:"relative",paddingLeft:"20px",paddingTop:"5px",paddingBottom:"5px"};return Ae.jsxs(Nc,{id:"website-header",container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",style:M,children:[Ae.jsx(Nc,{item:!0,xs:12,sm:4,md:4,lg:3,xl:3,children:Ae.jsxs(Nw,{direction:"row",alignItems:"center",children:[Ae.jsx("img",{style:{maxHeight:"35px",paddingRight:"5px"},src:K3}),Ae.jsx(Df,{display:"inline",variant:"h5",children:"Robo-Blocks"})]})}),Ae.jsx(Nc,{item:!0,xs:12,sm:8,md:8,lg:9,xl:9,children:Ae.jsxs(Nc,{container:!0,direction:"row",justifyContent:"space-between",children:[Ae.jsx(Nc,{item:!0,xs:12,sm:12,md:12,lg:5,xl:5,style:{justifyContent:"right",display:"flex"},children:y!==f3&&Ae.jsxs(dye,{value:y-1,onChange:S,indicatorColor:"red",textColor:"black",variant:"fullWidth",style:{padding:"5px"},children:[Ae.jsx(hL,{label:cI}),Ae.jsx(hL,{label:hI}),Ae.jsx(hL,{label:OX})]})}),Ae.jsx(Nc,{item:!0,xs:12,sm:12,md:12,lg:7,xl:7,style:{justifyContent:"right",display:"flex"},children:Ae.jsxs(Nw,{direction:"row",alignItems:"center",children:[!u&&Ae.jsx("div",{style:{backgroundColor:"#FF7E7E",width:"45px",height:"45px",borderRadius:"25px",marginRight:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},children:Ae.jsx("img",{style:{height:"34px",position:"absolute",top:"5px",left:"5px"},src:aye})}),u&&Ae.jsx("div",{style:{backgroundColor:"#A0FF7E",width:"45px",height:"45px",borderRadius:"25px",marginRight:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},children:Ae.jsx("img",{style:{height:"34px",position:"absolute",top:"5px",left:"5px"},src:oye})}),Ae.jsx(X3,{id:"robotIpAddress",disabled:u,label:"IP",variant:"filled",style:{backgroundColor:"#FFFFFF50",borderRadius:"5px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",marginRight:"5px"},defaultValue:"",onChange:A=>t(A.target.value)}),!u&&Ae.jsx(Qp,{text:"Connect",clickFunction:C}),u&&Ae.jsx(Qp,{text:"Disconnect",clickFunction:h}),Ae.jsx(bI,{style:{margin:"5px",marginRight:"10px",color:"black",backgroundColor:"#FAFAFA",borderRadius:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},onClick:()=>{f(kX)},children:Ae.jsx(sJ,{})})]})})]})})]})}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pye={kind:"categoryToolbox",contents:[{kind:"category",name:"Control",categorystyle:"logic_category",contents:[{kind:"block",type:"CustomIF"},{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{shadow:{type:"math_number",fields:{NUM:10}}}}},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"logic_null"},{kind:"block",type:"logic_ternary"}]},{kind:"category",name:"Math",categorystyle:"math_category",contents:[{kind:"block",type:"math_number",fields:{NUM:123}},{kind:"block",type:"BasicSlider"},{kind:"block",type:"math_number_property",inputs:{NUMBER_TO_CHECK:{shadow:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"math_random_int",inputs:{FROM:{shadow:{type:"math_number",fields:{NUM:1}}},TO:{shadow:{type:"math_number",fields:{NUM:100}}}}}]},{kind:"category",name:"Movement",categorystyle:"movement_category",contents:[{kind:"block",type:"WaitForSeconds"},{kind:"block",type:"Turn2"},{kind:"block",type:"MoveHead"},{kind:"block",type:"MoveHead3"},{kind:"block",type:"MoveArms2"},{kind:"block",type:"MoveArm3"}]},{kind:"category",name:"Light",categorystyle:"light_category",contents:[{kind:"block",type:"ChangeLED"},{kind:"block",type:"TransitionLED"},{kind:"block",type:"colour_picker"},{kind:"block",type:"colour_random"},{kind:"block",type:"colour_rgb",inputs:{RED:{shadow:{type:"math_number",fields:{NUM:100}}},GREEN:{shadow:{type:"math_number",fields:{NUM:50}}},BLUE:{shadow:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"colour_blend",inputs:{COLOUR1:{shadow:{type:"colour_picker",fields:{COLOUR:"#ff0000"}}},COLOUR2:{shadow:{type:"colour_picker",fields:{COLOUR:"#3333ff"}}},RATIO:{shadow:{type:"math_number",fields:{NUM:.5}}}}},{kind:"block",type:"TurnOnFlashlight"},{kind:"block",type:"TurnOffFlashlight"}]},{kind:"category",name:"Speech",categorystyle:"speech_category",contents:[{kind:"block",type:"Speak"},{kind:"block",type:"SpeakDefault"},{kind:"block",type:"text"}]},{kind:"category",name:"Face",categorystyle:"face_category",contents:[{kind:"block",type:"DisplayText"},{kind:"block",type:"ClearText"},{kind:"block",type:"DisplayImage"},{kind:"block",type:"eyes_acceptance"},{kind:"block",type:"eyes_admiration"},{kind:"block",type:"eyes_amazement"},{kind:"block",type:"eyes_anger"},{kind:"block",type:"eyes_annoyed"},{kind:"block",type:"eyes_anticipation"},{kind:"block",type:"eyes_apprehension"},{kind:"block",type:"eyes_boredom"},{kind:"block",type:"eyes_default"},{kind:"block",type:"eyes_disgust"},{kind:"block",type:"eyes_distraction"},{kind:"block",type:"eyes_ecstasy_frame_1"},{kind:"block",type:"eyes_ecstasy_frame_2"},{kind:"block",type:"eyes_fear"},{kind:"block",type:"eyes_grief"},{kind:"block",type:"eyes_interest"},{kind:"block",type:"eyes_joy"},{kind:"block",type:"eyes_loathing"},{kind:"block",type:"eyes_pensiveness"},{kind:"block",type:"eyes_rage"},{kind:"block",type:"eyes_sad"},{kind:"block",type:"eyes_serenity"},{kind:"block",type:"eyes_surprise"},{kind:"block",type:"eyes_terror"},{kind:"block",type:"eyes_trust"},{kind:"block",type:"eyes_vigilance"},{kind:"block",type:"e_Sleeping"},{kind:"block",type:"e_SleepingZZZ"},{kind:"block",type:"e_Contempt"},{kind:"block",type:"e_ContentLeft"},{kind:"block",type:"e_ContentRight"},{kind:"block",type:"e_Disoriented"},{kind:"block",type:"e_EcstacyHilarious"},{kind:"block",type:"e_EcstacyStarryEyed"},{kind:"block",type:"e_JoyGoofy"},{kind:"block",type:"e_JoyGoofy2"},{kind:"block",type:"e_JoyGoofy3"},{kind:"block",type:"e_Love"},{kind:"block",type:"e_Rage"},{kind:"block",type:"e_Rage2"},{kind:"block",type:"e_Rage3"},{kind:"block",type:"e_Rage4"},{kind:"block",type:"e_RemorseShame"}]},{kind:"category",name:"Audio",categorystyle:"audio_category",contents:[{kind:"block",type:"SetVolume"},{kind:"block",type:"PlayAudio"},{kind:"block",type:"s_Acceptance"},{kind:"block",type:"s_Amazement"},{kind:"block",type:"s_Amazement2"},{kind:"block",type:"s_Anger"},{kind:"block",type:"s_Anger2"},{kind:"block",type:"s_Anger3"},{kind:"block",type:"s_Anger4"},{kind:"block",type:"s_Annoyance"},{kind:"block",type:"s_Annoyance2"},{kind:"block",type:"s_Annoyance3"},{kind:"block",type:"s_Annoyance4"},{kind:"block",type:"s_Awe"},{kind:"block",type:"s_Awe2"},{kind:"block",type:"s_Awe3"},{kind:"block",type:"s_Boredom"},{kind:"block",type:"s_Disapproval"},{kind:"block",type:"s_Disgust"},{kind:"block",type:"s_Disgust2"},{kind:"block",type:"s_Disgust3"},{kind:"block",type:"s_DisorientedConfused"},{kind:"block",type:"s_DisorientedConfused2"},{kind:"block",type:"s_DisorientedConfused3"},{kind:"block",type:"s_DisorientedConfused4"},{kind:"block",type:"s_DisorientedConfused5"},{kind:"block",type:"s_DisorientedConfused6"},{kind:"block",type:"s_Distraction"},{kind:"block",type:"s_Ecstacy"},{kind:"block",type:"s_Ecstacy2"},{kind:"block",type:"s_Fear"},{kind:"block",type:"s_Grief"},{kind:"block",type:"s_Grief2"},{kind:"block",type:"s_Grief3"},{kind:"block",type:"s_Grief4"},{kind:"block",type:"s_Joy"},{kind:"block",type:"s_Joy2"},{kind:"block",type:"s_Joy3"},{kind:"block",type:"s_Joy4"},{kind:"block",type:"s_Loathing"},{kind:"block",type:"s_Love"},{kind:"block",type:"s_PhraseByeBye"},{kind:"block",type:"s_PhraseEvilAhHa"},{kind:"block",type:"s_PhraseHello"},{kind:"block",type:"s_PhraseNoNoNo"},{kind:"block",type:"s_PhraseOopsy"},{kind:"block",type:"s_PhraseOwOwOw"},{kind:"block",type:"s_PhraseOwwww"},{kind:"block",type:"s_PhraseUhOh"},{kind:"block",type:"s_Rage"},{kind:"block",type:"s_Sadness"},{kind:"block",type:"s_Sadness2"},{kind:"block",type:"s_Sadness3"},{kind:"block",type:"s_Sadness4"},{kind:"block",type:"s_Sadness5"},{kind:"block",type:"s_Sadness6"},{kind:"block",type:"s_Sadness7"},{kind:"block",type:"s_Sleepy"},{kind:"block",type:"s_Sleepy2"},{kind:"block",type:"s_Sleepy3"},{kind:"block",type:"s_Sleepy4"},{kind:"block",type:"s_SleepySnore"},{kind:"block",type:"s_SystemCameraShutter"}]}]};function mye(n){return Ae.jsx(Nc,{container:!0,style:{position:"absolute",left:"20px",bottom:"20px",zIndex:"101",width:"70px"}})}function cG(){const{innerWidth:n,innerHeight:e}=window;return{width:n,height:e}}function q3(){const[n,e]=de.useState(cG());return de.useEffect(()=>{function t(){e(cG())}return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n}function gye({leftChildren:n,rightChildren:e}){return Ae.jsxs(Nc,{container:!0,direction:"row",justifyContent:"center",spacing:2,style:{padding:"20px 30px 0px 30px",height:"100%",width:"100%"},children:[Ae.jsx(Nc,{item:!0,xs:6,style:{overflowY:"scroll",height:"100%"},children:n}),Ae.jsx(Nc,{item:!0,xs:6,style:{overflowY:"scroll",height:"100%"},children:e})]})}function oJ({style:n,maxVH:e=0}){const t=Bn(xi(C=>C.userPrompt)),r=Bn(C=>C.setUserPrompt),s=Bn(C=>C.generateProgramOutline),o=Bn(C=>C.generateProgram),l=Bn(xi(C=>C.llmProcessing)),u=Bn(xi(C=>C.displayLLMBlockPrompt)),h=Bn(xi(C=>C.generatedPreviously)),{height:f,_:g}=q3();function y(C){var M=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return C*M/100}let b=e>0?y(e)/23:(f-190)/23;const S=C=>{r(C.target.value)};return Ae.jsxs("div",{style:{...n},children:[Ae.jsx(X3,{label:"What do you want the robot to do?",multiline:!0,disabled:l,fullWidth:!0,minRows:b,maxRows:b,onChange:S,value:t}),h&&Ae.jsx(Qp,{text:"Retry",clickFunction:()=>s(!0),disabled:l,style:{float:"left"}}),Ae.jsx(Qp,{text:"Generate Program Goals",clickFunction:()=>s(!1),disabled:l,style:{float:"right"}}),u&&Ae.jsx(Qp,{text:"Generate Block Program",clickFunction:o,disabled:l,style:{float:"right"}})]})}const vye=({title:n,story:e,subtext:t,hints:r,isPlanningScreen:s})=>{let o=Bn(S=>S.addMessageToHistory);const[l,u]=de.useState(null),[h,f]=de.useState(!1),g=()=>{u(null)},y=()=>{f(!h),s&&(h?(Ma(`Phase [${n}] marked not complete.`),o(`Phase [${n}] marked not complete.`)):(Ma(`Phase [${n}] marked complete.`),o(`Phase [${n}] marked complete.`)))},b=(S,C,M)=>{S&&l!==S&&Ma(`User clicked hint button: ${S.text} for title: ${C} and subtext: ${M}`),u(l===S?null:S)};return Ae.jsxs("div",{className:"subtask-card",children:[Ae.jsx("div",{className:"subtask-checkbox-container",children:Ae.jsx("input",{type:"checkbox",className:`subtask-checkbox ${h?"checked":""}`,onChange:y})}),Ae.jsxs("div",{className:"subtask-content",children:[Ae.jsx(Df,{variant:"h6",align:"left",sx:{marginBottom:"8px"},children:n}),!h&&Ae.jsxs(Df,{variant:"subtitle1",align:"left",sx:{color:"#666"},children:[Ae.jsx("strong",{children:"Story:"})," ",e]}),!h&&Ae.jsxs(Df,{variant:"subtitle1",align:"left",sx:{color:"#666"},children:[Ae.jsx("strong",{children:"Goal:"})," ",t]}),!h&&Ae.jsxs("div",{className:"hints-container",children:[!s&&r&&r.map((S,C)=>Ae.jsx(Qp,{text:`Hint ${C+1}`,clickFunction:()=>b(S,n,t)},C)),s&&r&&r.map((S,C)=>Ae.jsx(Qp,{text:S.text,clickFunction:()=>{Ma(`User clicked help button ${S.text}`),o("[Need Help]")}},C))]}),!h&&l&&Ae.jsxs("div",{className:"hint-expansion",children:[Ae.jsx("p",{children:l.text}),Ae.jsx("div",{className:"close-button-container",children:Ae.jsx("button",{className:"close-button",onClick:g,children:"Close"})})]})]})]},n)},_ye=({hasNextTask:n,onNextTask:e,allTasks:t,subtasks:r,isPlanningScreen:s})=>Ae.jsxs("div",{className:"task-tab-container",children:[r&&r.map(o=>Ae.jsx(vye,{title:o.title,story:o.story,subtext:o.subtext,hints:o.hints.map(l=>t[l]),isPlanningScreen:s},o.title)),n&&Ae.jsxs("div",{className:"completion-card",children:[Ae.jsx("p",{children:"All steps are complete."}),Ae.jsx("button",{className:"next-task-button",onClick:e,children:"Go To Next Task"})]})]}),Q3=({isPlanningScreen:n=!1})=>{var g,y;const[e,t]=de.useState(0),r=Bn(xi(b=>b.getAllTasks)),s=Bn(xi(b=>b.getMainTasks)),o=r(n),l=s(n),u=b=>{t(b)},h=()=>{e<Object.keys(l).length-1&&t(e+1),window.scrollTo({top:0,behavior:"smooth"})};let f=Object.keys(l);return Ae.jsxs("div",{children:[Ae.jsx("div",{className:"tabs-container",children:f.map((b,S)=>Ae.jsx("div",{className:`tab ${S===e?"active":""}`,onClick:()=>u(S),children:n?Ae.jsx(Df,{variant:"h6",children:"Milestones - Story"}):Ae.jsx(Df,{variant:"h6",children:"Milestones - Programmng"})},b))}),Ae.jsx("div",{className:"task-tab-container",children:Ae.jsx(_ye,{subtasks:(y=(g=l[f[e]])==null?void 0:g.subtasks)==null?void 0:y.map(b=>o[b]),allTasks:o,onNextTask:h,hasNextTask:e+1<f.length,isPlanningScreen:n},f[e])})]})};function yye(n){const e=Bn(o=>o.updateScreen),{height:t,_:r}=q3();let s=t-155;return Ae.jsx("div",{style:{zIndex:20,height:"100%"},children:Ae.jsx(gye,{leftChildren:Ae.jsx(oJ,{}),rightChildren:Ae.jsxs("div",{style:{width:"100%"},children:[Ae.jsx("div",{style:{height:s,overflowY:"scroll"},children:Ae.jsx(Q3,{})}),Ae.jsx("div",{style:{position:"absolute",right:20},children:Ae.jsx(Qp,{text:"Done",clickFunction:()=>e(gk),style:{backgroundColor:"#A0FF7E"}})})]})})})}function bye(n){const e=Bn(k=>k.addBlock),t=Bn(k=>k.blocks),r=Bn(k=>k.removeBlock),s=Bn(k=>k.getBlock),o=Bn(k=>k.updateBlock),l=Bn(k=>k.getBlockType),u=Bn(k=>k.setBlocklyWorkspace),h=Bn(k=>k.getBlocklyWorkspace),f=Bn(k=>k.loadBlocks),g=Bn(k=>k.blocklyWorkspace),y=Bn(k=>k.highlightBlocks);Bn(k=>k.setShowGPTConsole),Bn(k=>k.showGPTConsole);const b=Bn(k=>k.fullScreenPanel);Bn(k=>k.ip),Bn(k=>k.setFullScreenPanel);const{height:S,_:C}=q3(),M=(k,O)=>{Ma(O?k?`switch toolbox category from ${O} to ${k}`:`unselect toolbox category: ${O}`:`select toolbox category: ${k}`)};Sy.common.defineBlocks(t),Object.assign(Iw.javascriptGenerator.forBlock,ck),de.useEffect(()=>{var O,P,D;let k=null;if(!document.querySelector(".blocklySvg")){const U=document.getElementById("pageContainer"),H=document.getElementById("blocklyDiv");if(k=Sy.inject(H,{toolbox:pye,grid:{spacing:20,length:3,colour:"#ccc",snap:!0},theme:Sy.Theme.defineTheme("gpuTheme",{componentStyles:{toolboxBackgroundColour:"#E4E5F1",flyoutBackgroundColour:"#d2d3db"},categoryStyles:{...Ft},blockStyles:{logic_blocks:{colourPrimary:Ft.logic_category.colour},loop_blocks:{colourPrimary:Ft.loop_category.colour},math_blocks:{colourPrimary:Ft.math_category.colour},procedure_blocks:{colourPrimary:Ft.procedure_category.colour},text_blocks:{colourPrimary:Ft.speech_category.colour},colour_blocks:{colourPrimary:Ft.light_category.colour},hat_blocks:{hat:"cap"}}})}),!g&&k.getAllBlocks().filter(Z=>Z.type==="Start").length===0){const Z=k.newBlock("Start");Z.setDeletable(!1),Z.moveBy(50,50),Z.initSvg(),Z.render()}if(g){let z={data:[]},Z=Object.keys(t),oe=Z.length;for(let ue=0;ue<oe;ue++){let q={id:t[Z[ue]].id,type:t[Z[ue]].type};t[Z[ue]].next&&t[Z[ue]].next!==""&&(q.nextStatement=t[Z[ue]].next);let ae=(O=t[Z[ue]])!=null&&O.inputs?Object.keys((P=t[Z[ue]])==null?void 0:P.inputs):[];for(let le=0;le<ae.length;le++)q[ae[le]]=(D=t[Z[ue]].inputs[ae[le]])!=null&&D.shadow?t[Z[ue]].inputs[ae[le]].shadow.id:t[Z[ue]].inputs[ae[le]];q.type==="math_number"&&(q.value=t[Z[ue]].fields.NUM),q.type==="colour_picker"&&(q.value=t[Z[ue]].fields.COLOUR),q.type==="text"&&(q.value=t[Z[ue]].fields.TEXT),["BasicSlider","ArmPositionSlider","SpeedSlider","TimeSlider","HeadPitchSlider","HeadRollSlider","HeadYawSlider"].includes(q.type)&&(q.value=t[Z[ue]].fields.FIELD_slider_value),z.data.push({...q})}f(z,k)}u(k),Iw.javascriptGenerator.addReservedWords("code"),new ResizeObserver(z=>{for(let Z of z){let oe=U,ue=0,q=0;do ue+=oe.offsetLeft,q+=oe.offsetTop,oe=oe.offsetParent;while(oe);H.style.left=ue+"px",H.style.top=q+"px",H.style.width=U.offsetWidth+"px",H.style.height=U.offsetHeight+"px",Sy.svgResize(k),k.scrollbar.setVisible(!1)}}).observe(U),k.render(),u(k),k.addChangeListener(z=>{if(z.isUiEvent){if(z.type==="toolbox_item_select")M(z.newItem,z.oldItem);else if(z.type==="click"){if(z.targetType==="block"){const Z=l(z.blockId);Ma(`click on ${Z} block`)}z.targetType==="workspace"&&Ma("click on workspace")}else if(z.type==="selected"){if(z.oldElementId){const Z=l(z.oldElementId);Ma(`unselect and un-highlight ${Z} `)}if(z.newElementId){const Z=l(z.newElementId);Ma(`select and highlight ${Z} `)}}else if(z.type==="drag"){const Z=l(z.blockId);z.isStart?Ma(`drag block ${Z} start `):Ma(`drag block ${Z} end `)}return}if(z.type===Sy.Events.BLOCK_DELETE){let Z=z.blockId;r(Z),Ma(`block ${Z} and children are deleted`)}if(z.type===Sy.Events.BLOCK_CHANGE){const Z=l(z.blockId);let oe=z.blockId,ue=s(oe);ue.fields[z.name]=z.newValue,o(oe,ue),Ma(`field ${z.name} of ${Z} change from ${z.oldValue} to ${z.newValue} `)}if(z.type==="create"){let Z={id:z.json.id,type:z.json.type,prev:"",next:"",isShadow:!1};if(z.json.type==="Start"&&(z.json.id,Z={id:z.json.id,type:z.json.type,next:""}),z.json.fields&&(Z.fields=z.json.fields),z.json.inputs){Z.inputs=z.json.inputs;for(let[oe,ue]of Object.entries(z.json.inputs))if(ue.shadow){let q={id:ue.shadow.id,type:ue.shadow.type,fields:ue.shadow.fields,isShadow:!0,initialParent:z.ids[0],initialInput:oe};"shadows"in Z||(Z.shadows={}),Z.shadows[oe]=ue.shadow.id,e(ue.shadow.id,q),Ma(`create a instance of type ${q.type}`)}}e(z.json.id,Z),Ma(`create a instance of type ${Z.type}`)}if(z.type==="move"){const Z=l(z.blockId),oe=z.reason;if(oe&&(typeof oe!="string"&&oe[1]==="drag"||oe[0]==="drag")&&z.newCoordinate&&Ma(`drag ${Z} from coordinate: {x: ${z.oldCoordinate.x}, y: ${z.oldCoordinate.y}} to {x: ${z.newCoordinate.x},y: ${z.newCoordinate.y}}`),z.reason&&z.reason.includes("connect")){let ue=z.newParentId,q=s(z.newParentId);const ae=q.type,le=s(z.blockId);z.newInputName?("inputs"in q||(q.inputs={}),q.inputs[z.newInputName]=z.blockId,o(ue,q),Ma(`connect ${le.type}  as input of ${ae}`)):(q.next=z.blockId,o(ue,q),le.prev=ue,o(z.blockId,le),Ma(`Placed ${le.type} after ${ae}`))}if(z.reason&&z.reason.includes("disconnect")){let ue=z.oldParentId,q=s(z.oldParentId);const ae=q.type,le=s(z.blockId);if(!z.oldInputName)q.next="",o(ue,q),le.prev="",o(z.blockId,le),Ma(`disconnect ${ae} from ${q.type}`);else{if(q.inputs[z.oldInputName]="",q.shadows&&q.shadows[z.oldInputName]){let ce=q.shadows[z.oldInputName];q.inputs[z.oldInputName]=ce}o(ue,q),Ma(`remove ${ae} from input of ${q.type}`)}}}})}},[]),de.useEffect(()=>{console.log(y);let k=h();k&&y?A(k,y,"#FF0000"):console.log("Workspace or block ID not defined.")},[y]);function A(k,O,P,D=300,U=5){var H=k.getBlockById(O);if(H){var V=H.getSvgRoot();if(V){var z=V.querySelectorAll(".blocklyPath");if(z.length>0){let Z=z[0].style.fill,oe=0,ue=!1;const q=()=>{z.forEach(function(ae){ae.style.fill=ue?P:Z}),ue=!ue,oe++<U*2?setTimeout(q,D):z.forEach(function(ae){ae.style.fill=Z})};q()}}}}return Ae.jsxs("div",{style:{width:"100%",height:"100%"},children:[S>=460&&!b&&Ae.jsx(mye,{}),Ae.jsxs("div",{id:"pageContainer",style:{width:"100%",height:"100%"},children:[Ae.jsx("div",{id:"blocklyDiv",style:{width:"100%",height:"100%"}}),Ae.jsx("xml",{id:"toolbox",style:{display:"none"}})]})]})}const Tye="/assets/misty_loading_combined-BxYfE45A.gif";function ac(n,e,t){return e=xde(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function __(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&r.push.apply(r,Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.forEach(function(s){ac(n,s,t[s])})}return n}class Po{static isBrowser(){return typeof window<"u"}static isOpera(){return Po.isBrowser()&&(!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0)}static isFirefox(){return Po.isBrowser()&&typeof InstallTrigger<"u"}static isSafari(){return Po.isBrowser()?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}static isIE(){return Po.isBrowser()&&!!document.documentMode}static isEdge(){return Po.isBrowser()&&!Po.isIE()&&!!window.StyleMedia}static isChrome(){return Po.isBrowser()&&!!window.chrome&&!!window.chrome.webstore}static isBlink(){return Po.isBrowser()&&(Po.isChrome()||Po.isOpera())&&!!window.CSS}static getUserAgent(){return typeof navigator>"u"?"":navigator.userAgent}static isAndroid(){return Po.isBrowser()&&Po.getUserAgent().match(/Android/i)}static isBlackBerry(){return Po.isBrowser()&&Po.getUserAgent().match(/BlackBerry/i)}static isIOS(){return Po.isBrowser()&&Po.getUserAgent().match(/iPhone|iPad|iPod/i)}static isOpera(){return Po.isBrowser()&&Po.getUserAgent().match(/Opera Mini/i)}static isWindows(){return Po.isBrowser()&&Po.isWindowsDesktop()||Po.isWindowsMobile()}static isWindowsMobile(){return Po.isBrowser()&&Po.getUserAgent().match(/IEMobile/i)}static isWindowsDesktop(){return Po.isBrowser()&&Po.getUserAgent().match(/WPDesktop/i)}static isMobile(){return Po.isBrowser()&&(Po.isWindowsMobile()||Po.isBlackBerry()||Po.isAndroid()||Po.isIOS())}}const s2=n=>Object.keys(n).reduce((e,t)=>t.substr(0,5)==="data-"?__({},e,{[t]:n[t]}):e,{});class kf extends Tt.Component{static isA(e){return e?e.type===Tt.createElement(kf,null).type:!1}constructor(e){super(e),ac(this,"ref",Tt.createRef()),ac(this,"onMouseMove",t=>{if(this.state.active){const r=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:r,event:t}),this.props.onResize&&this.props.onResize({component:this,domElement:r}),t.stopPropagation(),t.preventDefault()}}),ac(this,"onMouseDown",t=>{this.setState({active:!0}),!(this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this}))&&this.props.events.emit("startResize",{index:this.props.index,event:t})}),ac(this,"onMouseUp",t=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:t}))}),this.state={active:!1},this.document=e.document}componentDidMount(){this.document&&(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){this.document&&(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const e=[Po.isMobile()?"reflex-thin":"",...this.props.className.split(" "),this.state.active?"active":"","reflex-splitter"].join(" ").trim();return Tt.createElement("div",Ve({},s2(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:e,id:this.props.id,ref:this.ref}),this.props.children)}}ac(kf,"propTypes",{children:Qt.oneOfType([Qt.arrayOf(Qt.node),Qt.node]),onStartResize:Qt.func,onStopResize:Qt.func,className:Qt.string,propagate:Qt.bool,onResize:Qt.func,style:Qt.object});ac(kf,"defaultProps",{document:typeof document<"u"?document:null,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});class Sye{constructor(){this._events={}}on(e,t){return e.split(" ").forEach(r=>{this._events[r]=this._events[r]||[],this._events[r].push(t)}),this}off(e,t){if(e==null){this._events={};return}return e.split(" ").forEach(r=>{r in this._events&&(t?this._events[r].splice(this._events[r].indexOf(t),1):this._events[r]=[])}),this}emit(e){if(this._events[e]!==void 0)for(var t=this._events[e].slice(),r=0;r<t.length;++r){var s=t[r].apply(this,Array.prototype.slice.call(arguments,1));if(s!==void 0)return s}}}Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(n,e){if(this==null)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if(r===0)return!1;var s=e|0,o=Math.max(s>=0?s:r-Math.abs(s),0);function l(u,h){return u===h||typeof u=="number"&&typeof h=="number"&&isNaN(u)&&isNaN(h)}for(;o<r;){if(l(t[o],n))return!0;o++}return!1}});Math.sign||(Math.sign=function(n){return(n>0)-(n<0)||+n});class P1 extends Tt.Component{constructor(e){super(e),ac(this,"onWindowResize",()=>{this.setState({flexData:this.computeFlexData()})}),ac(this,"onStartResize",t=>{const r=t.event.changedTouches?t.event.changedTouches[0]:t.event;switch(this.props.orientation){case"horizontal":document.body.classList.add("reflex-row-resize"),this.previousPos=r.clientY;break;case"vertical":default:document.body.classList.add("reflex-col-resize"),this.previousPos=r.clientX;break}this.elements=[this.children[t.index-1],this.children[t.index+1]],this.emitElementsEvent(this.elements,"onStartResize")}),ac(this,"onResize",t=>{const r=t.event.changedTouches?t.event.changedTouches[0]:t.event,s=this.getOffset(r,t.domElement);switch(this.props.orientation){case"horizontal":this.previousPos=r.clientY;break;case"vertical":default:this.previousPos=r.clientX;break}if(s){const o=this.computeAvailableOffset(t.index,s);o&&(this.elements=this.dispatchOffset(t.index,o),this.adjustFlex(this.elements),this.setState({resizing:!0},()=>{this.emitElementsEvent(this.elements,"onResize")}))}}),ac(this,"onStopResize",t=>{document.body.classList.remove("reflex-row-resize"),document.body.classList.remove("reflex-col-resize");const r=this.elements?this.elements.map(o=>o.ref):[],s=this.children.filter(o=>!kf.isA(o)&&r.includes(o.ref));this.emitElementsEvent(s,"onStopResize"),this.setState({resizing:!1})}),ac(this,"onElementSize",t=>new Promise(r=>{try{const s=t.index,o=this.getSize(this.children[s]),l=t.size-o,u=t.direction,h=s+u,f=this.computeAvailableOffset(h,u*l);this.elements=null,f&&(this.elements=this.dispatchOffset(h,f),this.adjustFlex(this.elements)),this.setState(this.state,()=>{this.emitElementsEvent(this.elements,"onResize"),r()})}catch(s){console.log(s)}})),this.events=new Sye,this.children=[],this.state={flexData:[]},this.ref=Tt.createRef()}componentDidMount(){const e=this.computeFlexData(),{windowResizeAware:t}=this.props;t&&window.addEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:t,flexData:e}),this.events.on("element.size",this.onElementSize),this.events.on("startResize",this.onStartResize),this.events.on("stopResize",this.onStopResize),this.events.on("resize",this.onResize)}componentWillUnmount(){this.events.off(),window.removeEventListener("resize",this.onWindowResize)}getValidChildren(e=this.props){return this.toArray(e.children).filter(t=>!!t)}componentDidUpdate(e,t){const r=this.getValidChildren(this.props);if(r.length!==this.state.flexData.length||e.orientation!==this.props.orientation||this.flexHasChanged(e)){const s=this.computeFlexData(r,this.props);this.setState({flexData:s})}this.props.windowResizeAware!==this.state.windowResizeAware&&(this.props.windowResizeAware?window.addEventListener("resize",this.onWindowResize):window.removeEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:this.props.windowResizeAware}))}flexHasChanged(e){const t=this.getValidChildren(e).map(s=>s.props.flex||0);return!this.getValidChildren().map(s=>s.props.flex||0).every((s,o)=>s===t[o])}getSize(e){var t,r,s;const o=e==null||(t=e.ref)===null||t===void 0?void 0:t.current;switch(this.props.orientation){case"horizontal":return(r=o==null?void 0:o.offsetHeight)!==null&&r!==void 0?r:0;case"vertical":default:return(s=o==null?void 0:o.offsetWidth)!==null&&s!==void 0?s:0}}getOffset(e,t){const{top:r,bottom:s,left:o,right:l}=t.getBoundingClientRect();switch(this.props.orientation){case"horizontal":{const u=e.clientY-this.previousPos;if(u>0){if(e.clientY>=r)return u}else if(e.clientY<=s)return u;break}case"vertical":default:{const u=e.clientX-this.previousPos;if(u>0){if(e.clientX>o)return u}else if(e.clientX<l)return u}break}return 0}adjustFlex(e){const t=e.reduce((r,s)=>{const o=s.props.index,l=s.props.flex,u=this.state.flexData[o].flex;return r+(l-u)/e.length},0);e.forEach(r=>{this.state.flexData[r.props.index].flex+=t})}computeAvailableOffset(e,t){const r=this.computeAvailableStretch(e,t),s=this.computeAvailableShrink(e,t);return Math.min(r,s)*Math.sign(t)}checkPropagate(e,t){if(t>0){if(e<this.children.length-2){const r=this.children[e+2];return kf.isA(r)&&r.props.propagate}}else if(e>2){const r=this.children[e-2];return kf.isA(r)&&r.props.propagate}return!1}computeAvailableStretch(e,t){var r;const s=t<0?e+1:e-1,o=this.children[s],l=this.getSize(o),h=((r=o==null?void 0:o.props.maxSize)!==null&&r!==void 0?r:0)-l;if(h<Math.abs(t)&&this.checkPropagate(e,-1*t)){const f=Math.sign(t)*(Math.abs(t)-h);return h+this.computeAvailableStretch(t<0?e+2:e-2,f)}return Math.min(h,Math.abs(t))}computeAvailableShrink(e,t){var r;const s=t>0?e+1:e-1,o=this.children[s],l=this.getSize(o),u=Math.max((r=o==null?void 0:o.props.minSize)!==null&&r!==void 0?r:0,0),h=l-u;if(h<Math.abs(t)&&this.checkPropagate(e,t)){const f=Math.sign(t)*(Math.abs(t)-h);return h+this.computeAvailableShrink(t>0?e+2:e-2,f)}return Math.min(h,Math.abs(t))}computePixelFlex(e=this.props.orientation){if(!this.ref.current)return console.warn("Unable to locate ReflexContainer dom node"),0;switch(e){case"horizontal":return this.ref.current.offsetHeight===0?(console.warn("Found ReflexContainer with height=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetHeight;case"vertical":default:return this.ref.current.offsetWidth===0?(console.warn("Found ReflexContainer with width=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetWidth}}addOffset(e,t){const r=this.getSize(e),s=e.props.index,o=Math.max(r+t,0),l=this.state.flexData[s].flex,u=l>0?l*o/r:this.computePixelFlex()*o;this.state.flexData[s].flex=!isFinite(u)||isNaN(u)?0:u}dispatchStretch(e,t){const r=t<0?e+1:e-1;if(r<0||r>this.children.length-1)return[];const s=this.children[r],o=this.getSize(s),u=Math.min(s.props.maxSize,o+Math.abs(t))-o;if(this.addOffset(s,u),u<Math.abs(t)){const h=e-Math.sign(t)*2,f=Math.sign(t)*(Math.abs(t)-u);return[s,...this.dispatchStretch(h,f)]}return[s]}dispatchShrink(e,t){const r=t>0?e+1:e-1;if(r<0||r>this.children.length-1)return[];const s=this.children[r],o=this.getSize(s),u=Math.max(s.props.minSize,o-Math.abs(t))-o;if(this.addOffset(s,u),Math.abs(u)<Math.abs(t)){const h=e+Math.sign(t)*2,f=Math.sign(t)*(Math.abs(t)+u);return[s,...this.dispatchShrink(h,f)]}return[s]}dispatchOffset(e,t){return[...this.dispatchStretch(e,t),...this.dispatchShrink(e,t)]}emitElementsEvent(e,t){this.toArray(e).forEach(r=>{r.props[t]&&r.props[t]({domElement:r.ref.current,component:r})})}computeFlexData(e=this.getValidChildren(),t=this.props){const r=this.computePixelFlex(t.orientation),s=f=>f.reduce((g,y)=>!kf.isA(y)&&y.constrained?g-y.flex:g,1),o=f=>f.reduce((g,y)=>!kf.isA(y)&&!y.constrained?g+1:g,0),l=e.map(f=>{const g=f.props;return{maxFlex:(g.maxSize||Number.MAX_VALUE)*r,sizeFlex:(g.size||Number.MAX_VALUE)*r,minFlex:(g.minSize||1)*r,constrained:g.flex!==void 0,flex:g.flex||0,type:f.type}}),u=(f,g=0)=>{let y=!1;const b=o(f),S=s(f),C=f.map(M=>{if(kf.isA(M))return M;const A=M.constrained?M.flex:S/b,k=Math.min(M.sizeFlex,Math.min(M.maxFlex,Math.max(M.minFlex,A))),O=M.constrained||k!==A;return y=y||O,__({},M,{flex:k,constrained:O})});return y&&g<this.props.maxRecDepth?u(C,g+1):C};return u(l).map(f=>({flex:kf.isA(f)?0:f.flex,ref:Tt.createRef()}))}toArray(e){return e?Array.isArray(e)?e:[e]:[]}render(){const e=[this.state.resizing?"reflex-resizing":"",...this.props.className.split(" "),this.props.orientation,"reflex-container"].join(" ").trim();return this.children=Tt.Children.map(this.getValidChildren(),(t,r)=>{if(r>this.state.flexData.length-1)return Tt.createElement("div",null);const s=this.state.flexData[r],o=__({},t.props,{maxSize:t.props.maxSize||Number.MAX_VALUE,orientation:this.props.orientation,minSize:t.props.minSize||1,events:this.events,flex:s.flex,ref:s.ref,index:r});return Tt.cloneElement(t,o)}),Tt.createElement("div",Ve({},s2(this.props),{style:this.props.style,className:e,ref:this.ref}),this.children)}}ac(P1,"propTypes",{windowResizeAware:Qt.bool,orientation:Qt.oneOf(["horizontal","vertical"]),maxRecDepth:Qt.number,className:Qt.string,style:Qt.object});ac(P1,"defaultProps",{orientation:"horizontal",windowResizeAware:!1,maxRecDepth:100,className:"",style:{}});class pE extends Tt.Component{static isA(e){return e?e.type===pE:!1}constructor(e){super(e),ac(this,"ref",Tt.createRef()),ac(this,"onMouseMove",t=>{if(this.state.active){const r=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:r,event:t}),this.props.onResize&&this.props.onResize({component:this,domElement:r}),t.stopPropagation(),t.preventDefault()}}),ac(this,"onMouseDown",t=>{this.setState({active:!0}),!(this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this}))&&this.props.events.emit("startResize",{index:this.props.index,event:t})}),ac(this,"onMouseUp",t=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:t}))}),this.state={active:!1},this.document=e.document}componentDidMount(){this.document&&(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){this.document&&(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const e=[...this.props.className.split(" "),this.state.active?"active":"","reflex-handle"].join(" ").trim();return Tt.createElement("div",Ve({},s2(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:e,id:this.props.id,ref:this.ref}),this.props.children)}}ac(pE,"propTypes",{children:Qt.oneOfType([Qt.arrayOf(Qt.node),Qt.node]),onStartResize:Qt.func,onStopResize:Qt.func,className:Qt.string,propagate:Qt.bool,onResize:Qt.func,style:Qt.object});ac(pE,"defaultProps",{document:typeof document>"u"?null:document,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});var aJ="Expected a function",hG=NaN,wye="[object Symbol]",Eye=/^\s+|\s+$/g,xye=/^[-+]0x[0-9a-f]+$/i,$ye=/^0b[01]+$/i,Cye=/^0o[0-7]+$/i,Mye=parseInt,Aye=typeof jl=="object"&&jl&&jl.Object===Object&&jl,Iye=typeof self=="object"&&self&&self.Object===Object&&self,Rye=Aye||Iye||Function("return this")(),kye=Object.prototype,Oye=kye.toString,Lye=Math.max,Nye=Math.min,dL=function(){return Rye.Date.now()};function Dye(n,e,t){var r,s,o,l,u,h,f=0,g=!1,y=!1,b=!0;if(typeof n!="function")throw new TypeError(aJ);e=dG(e)||0,bR(t)&&(g=!!t.leading,y="maxWait"in t,o=y?Lye(dG(t.maxWait)||0,e):o,b="trailing"in t?!!t.trailing:b);function S(H){var V=r,z=s;return r=s=void 0,f=H,l=n.apply(z,V),l}function C(H){return f=H,u=setTimeout(k,e),g?S(H):l}function M(H){var V=H-h,z=H-f,Z=e-V;return y?Nye(Z,o-z):Z}function A(H){var V=H-h,z=H-f;return h===void 0||V>=e||V<0||y&&z>=o}function k(){var H=dL();if(A(H))return O(H);u=setTimeout(k,M(H))}function O(H){return u=void 0,b&&r?S(H):(r=s=void 0,l)}function P(){u!==void 0&&clearTimeout(u),f=0,r=h=s=u=void 0}function D(){return u===void 0?l:O(dL())}function U(){var H=dL(),V=A(H);if(r=arguments,s=this,h=H,V){if(u===void 0)return C(h);if(y)return u=setTimeout(k,e),S(h)}return u===void 0&&(u=setTimeout(k,e)),l}return U.cancel=P,U.flush=D,U}function Pye(n,e,t){var r=!0,s=!0;if(typeof n!="function")throw new TypeError(aJ);return bR(t)&&(r="leading"in t?!!t.leading:r,s="trailing"in t?!!t.trailing:s),Dye(n,e,{leading:r,maxWait:e,trailing:s})}function bR(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function Bye(n){return!!n&&typeof n=="object"}function Fye(n){return typeof n=="symbol"||Bye(n)&&Oye.call(n)==wye}function dG(n){if(typeof n=="number")return n;if(Fye(n))return hG;if(bR(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=bR(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(Eye,"");var t=$ye.test(n);return t||Cye.test(n)?Mye(n.slice(2),t?2:8):xye.test(n)?hG:+n}var zye=Pye;const Uye=Jy(zye);var lJ=function(){if(typeof Map<"u")return Map;function n(e,t){var r=-1;return e.some(function(s,o){return s[0]===t?(r=o,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var r=n(this.__entries__,t),s=this.__entries__[r];return s&&s[1]},e.prototype.set=function(t,r){var s=n(this.__entries__,t);~s?this.__entries__[s][1]=r:this.__entries__.push([t,r])},e.prototype.delete=function(t){var r=this.__entries__,s=n(r,t);~s&&r.splice(s,1)},e.prototype.has=function(t){return!!~n(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,r){r===void 0&&(r=null);for(var s=0,o=this.__entries__;s<o.length;s++){var l=o[s];t.call(r,l[1],l[0])}},e}()}(),iP=typeof window<"u"&&typeof document<"u"&&window.document===document,TR=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Hye=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(TR):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),Gye=2;function Wye(n,e){var t=!1,r=!1,s=0;function o(){t&&(t=!1,n()),r&&u()}function l(){Hye(o)}function u(){var h=Date.now();if(t){if(h-s<Gye)return;r=!0}else t=!0,r=!1,setTimeout(l,e);s=h}return u}var Vye=20,jye=["top","right","bottom","left","width","height","size","weight"],Yye=typeof MutationObserver<"u",Xye=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Wye(this.refresh.bind(this),Vye)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!iP||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Yye?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!iP||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=t===void 0?"":t,s=jye.some(function(o){return!!~r.indexOf(o)});s&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),uJ=function(n,e){for(var t=0,r=Object.keys(e);t<r.length;t++){var s=r[t];Object.defineProperty(n,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return n},Dw=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||TR},cJ=o2(0,0,0,0);function SR(n){return parseFloat(n)||0}function fG(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(r,s){var o=n["border-"+s+"-width"];return r+SR(o)},0)}function Kye(n){for(var e=["top","right","bottom","left"],t={},r=0,s=e;r<s.length;r++){var o=s[r],l=n["padding-"+o];t[o]=SR(l)}return t}function Jye(n){var e=n.getBBox();return o2(0,0,e.width,e.height)}function qye(n){var e=n.clientWidth,t=n.clientHeight;if(!e&&!t)return cJ;var r=Dw(n).getComputedStyle(n),s=Kye(r),o=s.left+s.right,l=s.top+s.bottom,u=SR(r.width),h=SR(r.height);if(r.boxSizing==="border-box"&&(Math.round(u+o)!==e&&(u-=fG(r,"left","right")+o),Math.round(h+l)!==t&&(h-=fG(r,"top","bottom")+l)),!Zye(n)){var f=Math.round(u+o)-e,g=Math.round(h+l)-t;Math.abs(f)!==1&&(u-=f),Math.abs(g)!==1&&(h-=g)}return o2(s.left,s.top,u,h)}var Qye=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof Dw(n).SVGGraphicsElement}:function(n){return n instanceof Dw(n).SVGElement&&typeof n.getBBox=="function"}}();function Zye(n){return n===Dw(n).document.documentElement}function ebe(n){return iP?Qye(n)?Jye(n):qye(n):cJ}function tbe(n){var e=n.x,t=n.y,r=n.width,s=n.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return uJ(l,{x:e,y:t,width:r,height:s,top:t,right:e+r,bottom:s+t,left:e}),l}function o2(n,e,t,r){return{x:n,y:e,width:t,height:r}}var nbe=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=o2(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=ebe(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),rbe=function(){function n(e,t){var r=tbe(t);uJ(this,{target:e,contentRect:r})}return n}(),ibe=function(){function n(e,t,r){if(this.activeObservations_=[],this.observations_=new lJ,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Dw(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new nbe(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Dw(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(r){return new rbe(r.target,r.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),hJ=typeof WeakMap<"u"?new WeakMap:new lJ,dJ=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=Xye.getInstance(),r=new ibe(e,t,this);hJ.set(this,r)}return n}();["observe","unobserve","disconnect"].forEach(function(n){dJ.prototype[n]=function(){var e;return(e=hJ.get(this))[n].apply(e,arguments)}});var sbe=function(){return typeof TR.ResizeObserver<"u"?TR.ResizeObserver:dJ}(),obe=["client","offset","scroll","bounds","margin"];function pG(n){var e=[];return obe.forEach(function(t){n[t]&&e.push(t)}),e}function mG(n,e){var t={};if(e.indexOf("client")>-1&&(t.client={top:n.clientTop,left:n.clientLeft,width:n.clientWidth,height:n.clientHeight}),e.indexOf("offset")>-1&&(t.offset={top:n.offsetTop,left:n.offsetLeft,width:n.offsetWidth,height:n.offsetHeight}),e.indexOf("scroll")>-1&&(t.scroll={top:n.scrollTop,left:n.scrollLeft,width:n.scrollWidth,height:n.scrollHeight}),e.indexOf("bounds")>-1){var r=n.getBoundingClientRect();t.bounds={top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:r.width,height:r.height}}if(e.indexOf("margin")>-1){var s=getComputedStyle(n);t.margin={top:s?parseInt(s.marginTop):0,right:s?parseInt(s.marginRight):0,bottom:s?parseInt(s.marginBottom):0,left:s?parseInt(s.marginLeft):0}}return t}function abe(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||window}function lbe(n){return function(e){var t,r;return r=t=function(s){B3(o,s);function o(){for(var u,h=arguments.length,f=new Array(h),g=0;g<h;g++)f[g]=arguments[g];return u=s.call.apply(s,[this].concat(f))||this,u.state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},u._animationFrameID=null,u._resizeObserver=null,u._node=null,u._window=null,u.measure=function(y){var b=mG(u._node,n||pG(u.props));y&&(b.entry=y[0].contentRect),u._animationFrameID=u._window.requestAnimationFrame(function(){u._resizeObserver!==null&&(u.setState({contentRect:b}),typeof u.props.onResize=="function"&&u.props.onResize(b))})},u._handleRef=function(y){u._resizeObserver!==null&&u._node!==null&&u._resizeObserver.unobserve(u._node),u._node=y,u._window=abe(u._node);var b=u.props.innerRef;b&&(typeof b=="function"?b(u._node):b.current=u._node),u._resizeObserver!==null&&u._node!==null&&u._resizeObserver.observe(u._node)},u}var l=o.prototype;return l.componentDidMount=function(){this._resizeObserver=this._window!==null&&this._window.ResizeObserver?new this._window.ResizeObserver(this.measure):new sbe(this.measure),this._node!==null&&(this._resizeObserver.observe(this._node),typeof this.props.onResize=="function"&&this.props.onResize(mG(this._node,n||pG(this.props))))},l.componentWillUnmount=function(){this._window!==null&&this._window.cancelAnimationFrame(this._animationFrameID),this._resizeObserver!==null&&(this._resizeObserver.disconnect(),this._resizeObserver=null)},l.render=function(){var h=this.props;h.innerRef,h.onResize;var f=yr(h,["innerRef","onResize"]);return de.createElement(e,Ve({},f,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},o}(de.Component),t.propTypes={client:Qt.bool,offset:Qt.bool,scroll:Qt.bool,bounds:Qt.bool,margin:Qt.bool,innerRef:Qt.oneOfType([Qt.object,Qt.func]),onResize:Qt.func},r}}var Z3=lbe()(function(n){var e=n.measure,t=n.measureRef,r=n.contentRect,s=n.children;return s({measure:e,measureRef:t,contentRect:r})});Z3.displayName="Measure";Z3.propTypes.children=Qt.func;const sP=n=>n?Array.isArray(n)?n:[n]:[];class ube extends Tt.Component{constructor(e){super(e),ac(this,"onResize",t=>{const{resizeHeight:r,resizeWidth:s}=this.props,{height:o,width:l}=t.bounds;this.setDimensions(__({},r&&{height:o},s&&{width:l}))}),this.setDimensions=Uye(t=>{this.setState(t)},this.props.propagateDimensionsRate/1e3),this.state={height:"100%",width:"100%"}}renderChildren(){const{propagateDimensions:e}=this.props,t=sP(this.props.children).filter(r=>!!r);return Tt.Children.map(t,r=>this.props.withHandle||pE.isA(r)?Tt.cloneElement(r,__({dimensions:e&&this.state},r.props,{index:this.props.index-1,events:this.props.events})):e?Tt.cloneElement(r,__({},r.props,{dimensions:this.state})):r)}render(){return Tt.createElement(Z3,{bounds:!0,onResize:this.onResize},({measureRef:e})=>Tt.createElement("div",{ref:e,className:"reflex-size-aware"},Tt.createElement("div",{style:this.state},this.renderChildren())))}}class e4 extends Tt.Component{constructor(e){super(e),this.state={size:e.size}}static getDerivedStateFromProps(e,t){return e.size!==t.size?__({},t,{size:e.size}):null}async componentDidUpdate(e,t,r){if(t.size!==this.state.size){const s=sP(this.props.direction);for(let o of s)await this.props.events.emit("element.size",{index:this.props.index,size:this.props.size,direction:o})}}renderChildren(){const e=sP(this.props.children).filter(t=>!!t);return Tt.Children.map(e,t=>this.props.withHandle||pE.isA(t)?Tt.cloneElement(t,__({},t.props,{index:this.props.index-1,events:this.props.events})):t)}render(){const e=[...this.props.className.split(" "),this.props.orientation,"reflex-element"].join(" ").trim(),t=__({},this.props.style,{flexGrow:this.props.flex,flexShrink:1,flexBasis:"0%"});return Tt.createElement("div",Ve({},s2(this.props),{ref:this.props.innerRef,className:e,style:t}),this.props.propagateDimensions?Tt.createElement(ube,this.props):this.renderChildren())}}ac(e4,"propTypes",{propagateDimensions:Qt.bool,resizeHeight:Qt.bool,resizeWidth:Qt.bool,className:Qt.string,size:Qt.number});ac(e4,"defaultProps",{propagateDimensionsRate:100,propagateDimensions:!1,resizeHeight:!0,resizeWidth:!0,direction:[1],className:""});const tv=Tt.forwardRef((n,e)=>Tt.createElement(e4,Ve({innerRef:e},n))),fJ="/assets/BASE_FRONT_GRILL_1-b5goAhwv.glb";var pJ={exports:{}},hT={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */hT.ConcurrentRoot=1;hT.ContinuousEventPriority=4;hT.DefaultEventPriority=16;hT.DiscreteEventPriority=1;hT.IdleEventPriority=536870912;hT.LegacyRoot=0;pJ.exports=hT;var Lx=pJ.exports,mJ={exports:{}},fL={exports:{}},pL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gG;function cbe(){return gG||(gG=1,function(n){function e(K,ie){var se=K.length;K.push(ie);e:for(;0<se;){var fe=se-1>>>1,Se=K[fe];if(0<s(Se,ie))K[fe]=ie,K[se]=Se,se=fe;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ie=K[0],se=K.pop();if(se!==ie){K[0]=se;e:for(var fe=0,Se=K.length,Ue=Se>>>1;fe<Ue;){var ke=2*(fe+1)-1,qe=K[ke],we=ke+1,Ze=K[we];if(0>s(qe,se))we<Se&&0>s(Ze,qe)?(K[fe]=Ze,K[we]=se,fe=we):(K[fe]=qe,K[ke]=se,fe=ke);else if(we<Se&&0>s(Ze,se))K[fe]=Ze,K[we]=se,fe=we;else break e}}return ie}function s(K,ie){var se=K.sortIndex-ie.sortIndex;return se!==0?se:K.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],f=[],g=1,y=null,b=3,S=!1,C=!1,M=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(K){for(var ie=t(f);ie!==null;){if(ie.callback===null)r(f);else if(ie.startTime<=K)r(f),ie.sortIndex=ie.expirationTime,e(h,ie);else break;ie=t(f)}}function D(K){if(M=!1,P(K),!C)if(t(h)!==null)C=!0,ge(U);else{var ie=t(f);ie!==null&&$e(D,ie.startTime-K)}}function U(K,ie){C=!1,M&&(M=!1,k(z),z=-1),S=!0;var se=b;try{for(P(ie),y=t(h);y!==null&&(!(y.expirationTime>ie)||K&&!ue());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,b=y.priorityLevel;var Se=fe(y.expirationTime<=ie);ie=n.unstable_now(),typeof Se=="function"?y.callback=Se:y===t(h)&&r(h),P(ie)}else r(h);y=t(h)}if(y!==null)var Ue=!0;else{var ke=t(f);ke!==null&&$e(D,ke.startTime-ie),Ue=!1}return Ue}finally{y=null,b=se,S=!1}}var H=!1,V=null,z=-1,Z=5,oe=-1;function ue(){return!(n.unstable_now()-oe<Z)}function q(){if(V!==null){var K=n.unstable_now();oe=K;var ie=!0;try{ie=V(!0,K)}finally{ie?ae():(H=!1,V=null)}}else H=!1}var ae;if(typeof O=="function")ae=function(){O(q)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ce=le.port2;le.port1.onmessage=q,ae=function(){ce.postMessage(null)}}else ae=function(){A(q,0)};function ge(K){V=K,H||(H=!0,ae())}function $e(K,ie){z=A(function(){K(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_continueExecution=function(){C||S||(C=!0,ge(U))},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(K){switch(b){case 1:case 2:case 3:var ie=3;break;default:ie=b}var se=b;b=ie;try{return K()}finally{b=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(K,ie){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var se=b;b=K;try{return ie()}finally{b=se}},n.unstable_scheduleCallback=function(K,ie,se){var fe=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?fe+se:fe):se=fe,K){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=se+Se,K={id:g++,callback:ie,priorityLevel:K,startTime:se,expirationTime:Se,sortIndex:-1},se>fe?(K.sortIndex=se,e(f,K),t(h)===null&&K===t(f)&&(M?(k(z),z=-1):M=!0,$e(D,se-fe))):(K.sortIndex=Se,e(h,K),C||S||(C=!0,ge(U))),K},n.unstable_shouldYield=ue,n.unstable_wrapCallback=function(K){var ie=b;return function(){var se=b;b=ie;try{return K.apply(this,arguments)}finally{b=se}}}}(pL)),pL}var vG;function hbe(){return vG||(vG=1,fL.exports=cbe()),fL.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dbe=function(e){var t={},r=de,s=hbe(),o=Object.assign;function l(d){for(var v="https://reactjs.org/docs/error-decoder.html?invariant="+d,$=1;$<arguments.length;$++)v+="&args[]="+encodeURIComponent(arguments[$]);return"Minified React error #"+d+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,h=Symbol.for("react.element"),f=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),U=Symbol.iterator;function H(d){return d===null||typeof d!="object"?null:(d=U&&d[U]||d["@@iterator"],typeof d=="function"?d:null)}function V(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case g:return"Fragment";case f:return"Portal";case b:return"Profiler";case y:return"StrictMode";case A:return"Suspense";case k:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case C:return(d.displayName||"Context")+".Consumer";case S:return(d._context.displayName||"Context")+".Provider";case M:var v=d.render;return d=d.displayName,d||(d=v.displayName||v.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case O:return v=d.displayName||null,v!==null?v:V(d.type)||"Memo";case P:v=d._payload,d=d._init;try{return V(d(v))}catch{}}return null}function z(d){var v=d.type;switch(d.tag){case 24:return"Cache";case 9:return(v.displayName||"Context")+".Consumer";case 10:return(v._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=v.render,d=d.displayName||d.name||"",v.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return v;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(v);case 8:return v===y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v}return null}function Z(d){var v=d,$=d;if(d.alternate)for(;v.return;)v=v.return;else{d=v;do v=d,v.flags&4098&&($=v.return),d=v.return;while(d)}return v.tag===3?$:null}function oe(d){if(Z(d)!==d)throw Error(l(188))}function ue(d){var v=d.alternate;if(!v){if(v=Z(d),v===null)throw Error(l(188));return v!==d?null:d}for(var $=d,I=v;;){var B=$.return;if(B===null)break;var W=B.alternate;if(W===null){if(I=B.return,I!==null){$=I;continue}break}if(B.child===W.child){for(W=B.child;W;){if(W===$)return oe(B),d;if(W===I)return oe(B),v;W=W.sibling}throw Error(l(188))}if($.return!==I.return)$=B,I=W;else{for(var pe=!1,Oe=B.child;Oe;){if(Oe===$){pe=!0,$=B,I=W;break}if(Oe===I){pe=!0,I=B,$=W;break}Oe=Oe.sibling}if(!pe){for(Oe=W.child;Oe;){if(Oe===$){pe=!0,$=W,I=B;break}if(Oe===I){pe=!0,I=W,$=B;break}Oe=Oe.sibling}if(!pe)throw Error(l(189))}}if($.alternate!==I)throw Error(l(190))}if($.tag!==3)throw Error(l(188));return $.stateNode.current===$?d:v}function q(d){return d=ue(d),d!==null?ae(d):null}function ae(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var v=ae(d);if(v!==null)return v;d=d.sibling}return null}function le(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var v=le(d);if(v!==null)return v}d=d.sibling}return null}var ce=Array.isArray,ge=e.getPublicInstance,$e=e.getRootHostContext,K=e.getChildHostContext,ie=e.prepareForCommit,se=e.resetAfterCommit,fe=e.createInstance,Se=e.appendInitialChild,Ue=e.finalizeInitialChildren,ke=e.prepareUpdate,qe=e.shouldSetTextContent,we=e.createTextInstance,Ze=e.scheduleTimeout,et=e.cancelTimeout,ft=e.noTimeout,at=e.isPrimaryRenderer,Ge=e.supportsMutation,Ie=e.supportsPersistence,He=e.supportsHydration,it=e.getInstanceFromNode,st=e.preparePortalMount,It=e.getCurrentEventPriority,kt=e.detachDeletedInstance,vt=e.supportsMicrotasks,Mt=e.scheduleMicrotask,Ct=e.supportsTestSelectors,gt=e.findFiberRoot,Ee=e.getBoundingRect,re=e.getTextContent,Be=e.isHiddenSubtree,mt=e.matchAccessibilityRole,yt=e.setFocusIfFocusable,wt=e.setupIntersectionObserver,Ke=e.appendChild,Qe=e.appendChildToContainer,Le=e.commitTextUpdate,Q=e.commitMount,te=e.commitUpdate,me=e.insertBefore,Re=e.insertInContainerBefore,Fe=e.removeChild,bt=e.removeChildFromContainer,ze=e.resetTextContent,Pt=e.hideInstance,lt=e.hideTextInstance,Gt=e.unhideInstance,Wt=e.unhideTextInstance,bn=e.clearContainer,ar=e.cloneInstance,cr=e.createContainerChildSet,oi=e.appendChildToContainerChildSet,Mr=e.finalizeContainerChildren,_r=e.replaceContainerChildren,ne=e.cloneHiddenInstance,Te=e.cloneHiddenTextInstance,je=e.canHydrateInstance,ct=e.canHydrateTextInstance,Ht=e.canHydrateSuspenseInstance,nn=e.isSuspenseInstancePending,kn=e.isSuspenseInstanceFallback,De=e.registerSuspenseInstanceRetry,_t=e.getNextHydratableSibling,Ot=e.getFirstHydratableChild,St=e.getFirstHydratableChildWithinContainer,Xt=e.getFirstHydratableChildWithinSuspenseInstance,Wn=e.hydrateInstance,ir=e.hydrateTextInstance,br=e.hydrateSuspenseInstance,Or=e.getNextHydratableInstanceAfterSuspenseInstance,Ei=e.commitHydratedContainer,Lr=e.commitHydratedSuspenseInstance,Ar=e.clearSuspenseBoundary,Ss=e.clearSuspenseBoundaryFromContainer,La=e.shouldDeleteUnhydratedTailInstances,Mo=e.didNotMatchHydratedContainerTextInstance,Xl=e.didNotMatchHydratedTextInstance,rn;function Dr(d){if(rn===void 0)try{throw Error()}catch($){var v=$.stack.trim().match(/\n( *(at )?)/);rn=v&&v[1]||""}return`
`+rn+d}var tl=!1;function Na(d,v){if(!d||tl)return"";tl=!0;var $=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(v)if(v=function(){throw Error()},Object.defineProperty(v.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(v,[])}catch(xt){var I=xt}Reflect.construct(d,[],v)}else{try{v.call()}catch(xt){I=xt}d.call(v.prototype)}else{try{throw Error()}catch(xt){I=xt}d()}}catch(xt){if(xt&&I&&typeof xt.stack=="string"){for(var B=xt.stack.split(`
`),W=I.stack.split(`
`),pe=B.length-1,Oe=W.length-1;1<=pe&&0<=Oe&&B[pe]!==W[Oe];)Oe--;for(;1<=pe&&0<=Oe;pe--,Oe--)if(B[pe]!==W[Oe]){if(pe!==1||Oe!==1)do if(pe--,Oe--,0>Oe||B[pe]!==W[Oe]){var tt=`
`+B[pe].replace(" at new "," at ");return d.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",d.displayName)),tt}while(1<=pe&&0<=Oe);break}}}finally{tl=!1,Error.prepareStackTrace=$}return(d=d?d.displayName||d.name:"")?Dr(d):""}var zs=Object.prototype.hasOwnProperty,Us=[],Pi=-1;function Pr(d){return{current:d}}function In(d){0>Pi||(d.current=Us[Pi],Us[Pi]=null,Pi--)}function Nr(d,v){Pi++,Us[Pi]=d.current,d.current=v}var jr={},Sr=Pr(jr),Bi=Pr(!1),ws=jr;function fi(d,v){var $=d.type.contextTypes;if(!$)return jr;var I=d.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===v)return I.__reactInternalMemoizedMaskedChildContext;var B={},W;for(W in $)B[W]=v[W];return I&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=v,d.__reactInternalMemoizedMaskedChildContext=B),B}function gs(d){return d=d.childContextTypes,d!=null}function nl(){In(Bi),In(Sr)}function Da(d,v,$){if(Sr.current!==jr)throw Error(l(168));Nr(Sr,v),Nr(Bi,$)}function fc(d,v,$){var I=d.stateNode;if(v=v.childContextTypes,typeof I.getChildContext!="function")return $;I=I.getChildContext();for(var B in I)if(!(B in v))throw Error(l(108,z(d)||"Unknown",B));return o({},$,I)}function pc(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||jr,ws=Sr.current,Nr(Sr,d),Nr(Bi,Bi.current),!0}function qs(d,v,$){var I=d.stateNode;if(!I)throw Error(l(169));$?(d=fc(d,v,ws),I.__reactInternalMemoizedMergedChildContext=d,In(Bi),In(Sr),Nr(Sr,d)):In(Bi),Nr(Bi,$)}var qo=Math.clz32?Math.clz32:gh,Kl=Math.log,vu=Math.LN2;function gh(d){return d>>>=0,d===0?32:31-(Kl(d)/vu|0)|0}var Qo=64,Tr=4194304;function $i(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Pc(d,v){var $=d.pendingLanes;if($===0)return 0;var I=0,B=d.suspendedLanes,W=d.pingedLanes,pe=$&268435455;if(pe!==0){var Oe=pe&~B;Oe!==0?I=$i(Oe):(W&=pe,W!==0&&(I=$i(W)))}else pe=$&~B,pe!==0?I=$i(pe):W!==0&&(I=$i(W));if(I===0)return 0;if(v!==0&&v!==I&&!(v&B)&&(B=I&-I,W=v&-v,B>=W||B===16&&(W&4194240)!==0))return v;if(I&4&&(I|=$&16),v=d.entangledLanes,v!==0)for(d=d.entanglements,v&=I;0<v;)$=31-qo(v),B=1<<$,I|=d[$],v&=~B;return I}function vh(d,v){switch(d){case 1:case 2:case 4:return v+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bc(d,v){for(var $=d.suspendedLanes,I=d.pingedLanes,B=d.expirationTimes,W=d.pendingLanes;0<W;){var pe=31-qo(W),Oe=1<<pe,tt=B[pe];tt===-1?(!(Oe&$)||Oe&I)&&(B[pe]=vh(Oe,v)):tt<=v&&(d.expiredLanes|=Oe),W&=~Oe}}function xl(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function _u(d){for(var v=[],$=0;31>$;$++)v.push(d);return v}function $l(d,v,$){d.pendingLanes|=v,v!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,v=31-qo(v),d[v]=$}function Cl(d,v){var $=d.pendingLanes&~v;d.pendingLanes=v,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=v,d.mutableReadLanes&=v,d.entangledLanes&=v,v=d.entanglements;var I=d.eventTimes;for(d=d.expirationTimes;0<$;){var B=31-qo($),W=1<<B;v[B]=0,I[B]=-1,d[B]=-1,$&=~W}}function wr(d,v){var $=d.entangledLanes|=v;for(d=d.entanglements;$;){var I=31-qo($),B=1<<I;B&v|d[I]&v&&(d[I]|=v),$&=~B}}var Er=0;function Jl(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var rl=s.unstable_scheduleCallback,il=s.unstable_cancelCallback,yu=s.unstable_shouldYield,Qi=s.unstable_requestPaint,vs=s.unstable_now,sl=s.unstable_ImmediatePriority,Cd=s.unstable_UserBlockingPriority,lo=s.unstable_NormalPriority,Uu=s.unstable_IdlePriority,ca=null,bu=null;function lr(d){if(bu&&typeof bu.onCommitFiberRoot=="function")try{bu.onCommitFiberRoot(ca,d,void 0,(d.current.flags&128)===128)}catch{}}function Gn(d,v){return d===v&&(d!==0||1/d===1/v)||d!==d&&v!==v}var Es=typeof Object.is=="function"?Object.is:Gn,uo=null,Hu=!1,Tu=!1;function _h(d){uo===null?uo=[d]:uo.push(d)}function Pa(d){Hu=!0,_h(d)}function ha(){if(!Tu&&uo!==null){Tu=!0;var d=0,v=Er;try{var $=uo;for(Er=1;d<$.length;d++){var I=$[d];do I=I(!0);while(I!==null)}uo=null,Hu=!1}catch(B){throw uo!==null&&(uo=uo.slice(d+1)),rl(sl,ha),B}finally{Er=v,Tu=!1}}return null}var Gu=u.ReactCurrentBatchConfig;function $r(d,v){if(Es(d,v))return!0;if(typeof d!="object"||d===null||typeof v!="object"||v===null)return!1;var $=Object.keys(d),I=Object.keys(v);if($.length!==I.length)return!1;for(I=0;I<$.length;I++){var B=$[I];if(!zs.call(v,B)||!Es(d[B],v[B]))return!1}return!0}function Rs(d){switch(d.tag){case 5:return Dr(d.type);case 16:return Dr("Lazy");case 13:return Dr("Suspense");case 19:return Dr("SuspenseList");case 0:case 2:case 15:return d=Na(d.type,!1),d;case 11:return d=Na(d.type.render,!1),d;case 1:return d=Na(d.type,!0),d;default:return""}}function bi(d,v){if(d&&d.defaultProps){v=o({},v),d=d.defaultProps;for(var $ in d)v[$]===void 0&&(v[$]=d[$]);return v}return v}var Ci=Pr(null),da=null,ti=null,Su=null;function Ao(){Su=ti=da=null}function wu(d,v,$){at?(Nr(Ci,v._currentValue),v._currentValue=$):(Nr(Ci,v._currentValue2),v._currentValue2=$)}function ol(d){var v=Ci.current;In(Ci),at?d._currentValue=v:d._currentValue2=v}function Fi(d,v,$){for(;d!==null;){var I=d.alternate;if((d.childLanes&v)!==v?(d.childLanes|=v,I!==null&&(I.childLanes|=v)):I!==null&&(I.childLanes&v)!==v&&(I.childLanes|=v),d===$)break;d=d.return}}function Mi(d,v){da=d,Su=ti=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&v&&(ki=!0),d.firstContext=null)}function Vn(d){var v=at?d._currentValue:d._currentValue2;if(Su!==d)if(d={context:d,memoizedValue:v,next:null},ti===null){if(da===null)throw Error(l(308));ti=d,da.dependencies={lanes:0,firstContext:d}}else ti=ti.next=d;return v}var Ai=null,Jr=!1;function dd(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Eu(d,v){d=d.updateQueue,v.updateQueue===d&&(v.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function ji(d,v){return{eventTime:d,lane:v,tag:0,payload:null,callback:null,next:null}}function Ba(d,v){var $=d.updateQueue;$!==null&&($=$.shared,zr!==null&&d.mode&1&&!(nr&2)?(d=$.interleaved,d===null?(v.next=v,Ai===null?Ai=[$]:Ai.push($)):(v.next=d.next,d.next=v),$.interleaved=v):(d=$.pending,d===null?v.next=v:(v.next=d.next,d.next=v),$.pending=v))}function yh(d,v,$){if(v=v.updateQueue,v!==null&&(v=v.shared,($&4194240)!==0)){var I=v.lanes;I&=d.pendingLanes,$|=I,v.lanes=$,wr(d,$)}}function pr(d,v){var $=d.updateQueue,I=d.alternate;if(I!==null&&(I=I.updateQueue,$===I)){var B=null,W=null;if($=$.firstBaseUpdate,$!==null){do{var pe={eventTime:$.eventTime,lane:$.lane,tag:$.tag,payload:$.payload,callback:$.callback,next:null};W===null?B=W=pe:W=W.next=pe,$=$.next}while($!==null);W===null?B=W=v:W=W.next=v}else B=W=v;$={baseState:I.baseState,firstBaseUpdate:B,lastBaseUpdate:W,shared:I.shared,effects:I.effects},d.updateQueue=$;return}d=$.lastBaseUpdate,d===null?$.firstBaseUpdate=v:d.next=v,$.lastBaseUpdate=v}function Zo(d,v,$,I){var B=d.updateQueue;Jr=!1;var W=B.firstBaseUpdate,pe=B.lastBaseUpdate,Oe=B.shared.pending;if(Oe!==null){B.shared.pending=null;var tt=Oe,xt=tt.next;tt.next=null,pe===null?W=xt:pe.next=xt,pe=tt;var Zt=d.alternate;Zt!==null&&(Zt=Zt.updateQueue,Oe=Zt.lastBaseUpdate,Oe!==pe&&(Oe===null?Zt.firstBaseUpdate=xt:Oe.next=xt,Zt.lastBaseUpdate=tt))}if(W!==null){var cn=B.baseState;pe=0,Zt=xt=tt=null,Oe=W;do{var Tn=Oe.lane,Sn=Oe.eventTime;if((I&Tn)===Tn){Zt!==null&&(Zt=Zt.next={eventTime:Sn,lane:0,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null});e:{var gn=d,Ur=Oe;switch(Tn=v,Sn=$,Ur.tag){case 1:if(gn=Ur.payload,typeof gn=="function"){cn=gn.call(Sn,cn,Tn);break e}cn=gn;break e;case 3:gn.flags=gn.flags&-65537|128;case 0:if(gn=Ur.payload,Tn=typeof gn=="function"?gn.call(Sn,cn,Tn):gn,Tn==null)break e;cn=o({},cn,Tn);break e;case 2:Jr=!0}}Oe.callback!==null&&Oe.lane!==0&&(d.flags|=64,Tn=B.effects,Tn===null?B.effects=[Oe]:Tn.push(Oe))}else Sn={eventTime:Sn,lane:Tn,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null},Zt===null?(xt=Zt=Sn,tt=cn):Zt=Zt.next=Sn,pe|=Tn;if(Oe=Oe.next,Oe===null){if(Oe=B.shared.pending,Oe===null)break;Tn=Oe,Oe=Tn.next,Tn.next=null,B.lastBaseUpdate=Tn,B.shared.pending=null}}while(!0);if(Zt===null&&(tt=cn),B.baseState=tt,B.firstBaseUpdate=xt,B.lastBaseUpdate=Zt,v=B.shared.interleaved,v!==null){B=v;do pe|=B.lane,B=B.next;while(B!==v)}else W===null&&(B.shared.lanes=0);Qu|=pe,d.lanes=pe,d.memoizedState=cn}}function fd(d,v,$){if(d=v.effects,v.effects=null,d!==null)for(v=0;v<d.length;v++){var I=d[v],B=I.callback;if(B!==null){if(I.callback=null,I=$,typeof B!="function")throw Error(l(191,B));B.call(I)}}}var lf=new r.Component().refs;function Fc(d,v,$,I){v=d.memoizedState,$=$(I,v),$=$==null?v:o({},v,$),d.memoizedState=$,d.lanes===0&&(d.updateQueue.baseState=$)}var uf={isMounted:function(d){return(d=d._reactInternals)?Z(d)===d:!1},enqueueSetState:function(d,v,$){d=d._reactInternals;var I=bs(),B=Os(d),W=ji(I,B);W.payload=v,$!=null&&(W.callback=$),Ba(d,W),v=Xa(d,B,I),v!==null&&yh(v,d,B)},enqueueReplaceState:function(d,v,$){d=d._reactInternals;var I=bs(),B=Os(d),W=ji(I,B);W.tag=1,W.payload=v,$!=null&&(W.callback=$),Ba(d,W),v=Xa(d,B,I),v!==null&&yh(v,d,B)},enqueueForceUpdate:function(d,v){d=d._reactInternals;var $=bs(),I=Os(d),B=ji($,I);B.tag=2,v!=null&&(B.callback=v),Ba(d,B),v=Xa(d,I,$),v!==null&&yh(v,d,I)}};function Ff(d,v,$,I,B,W,pe){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(I,W,pe):v.prototype&&v.prototype.isPureReactComponent?!$r($,I)||!$r(B,W):!0}function wp(d,v,$){var I=!1,B=jr,W=v.contextType;return typeof W=="object"&&W!==null?W=Vn(W):(B=gs(v)?ws:Sr.current,I=v.contextTypes,W=(I=I!=null)?fi(d,B):jr),v=new v($,W),d.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=uf,d.stateNode=v,v._reactInternals=d,I&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=B,d.__reactInternalMemoizedMaskedChildContext=W),v}function Md(d,v,$,I){d=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps($,I),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps($,I),v.state!==d&&uf.enqueueReplaceState(v,v.state,null)}function ql(d,v,$,I){var B=d.stateNode;B.props=$,B.state=d.memoizedState,B.refs=lf,dd(d);var W=v.contextType;typeof W=="object"&&W!==null?B.context=Vn(W):(W=gs(v)?ws:Sr.current,B.context=fi(d,W)),B.state=d.memoizedState,W=v.getDerivedStateFromProps,typeof W=="function"&&(Fc(d,v,W,$),B.state=d.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(v=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),v!==B.state&&uf.enqueueReplaceState(B,B.state,null),Zo(d,$,B,I),B.state=d.memoizedState),typeof B.componentDidMount=="function"&&(d.flags|=4194308)}var ks=[],Wu=0,bh=null,Fa=0,ci=[],Cr=0,co=null,za=1,Uo="";function Ql(d,v){ks[Wu++]=Fa,ks[Wu++]=bh,bh=d,Fa=v}function Zl(d,v,$){ci[Cr++]=za,ci[Cr++]=Uo,ci[Cr++]=co,co=d;var I=za;d=Uo;var B=32-qo(I)-1;I&=~(1<<B),$+=1;var W=32-qo(v)+B;if(30<W){var pe=B-B%5;W=(I&(1<<pe)-1).toString(32),I>>=pe,B-=pe,za=1<<32-qo(v)+B|$<<B|I,Uo=W+d}else za=1<<W|$<<B|I,Uo=d}function Fh(d){d.return!==null&&(Ql(d,1),Zl(d,1,0))}function Yr(d){for(;d===bh;)bh=ks[--Wu],ks[Wu]=null,Fa=ks[--Wu],ks[Wu]=null;for(;d===co;)co=ci[--Cr],ci[Cr]=null,Uo=ci[--Cr],ci[Cr]=null,za=ci[--Cr],ci[Cr]=null}var Ii=null,xr=null,Yi=!1,fa=!1,xu=null;function cf(d,v){var $=To(5,null,null,0);$.elementType="DELETED",$.stateNode=v,$.return=d,v=d.deletions,v===null?(d.deletions=[$],d.flags|=16):v.push($)}function hf(d,v){switch(d.tag){case 5:return v=je(v,d.type,d.pendingProps),v!==null?(d.stateNode=v,Ii=d,xr=Ot(v),!0):!1;case 6:return v=ct(v,d.pendingProps),v!==null?(d.stateNode=v,Ii=d,xr=null,!0):!1;case 13:if(v=Ht(v),v!==null){var $=co!==null?{id:za,overflow:Uo}:null;return d.memoizedState={dehydrated:v,treeContext:$,retryLane:1073741824},$=To(18,null,null,0),$.stateNode=v,$.return=d,d.child=$,Ii=d,xr=null,!0}return!1;default:return!1}}function pd(d){return(d.mode&1)!==0&&(d.flags&128)===0}function Vu(d){if(Yi){var v=xr;if(v){var $=v;if(!hf(d,v)){if(pd(d))throw Error(l(418));v=_t($);var I=Ii;v&&hf(d,v)?cf(I,$):(d.flags=d.flags&-4097|2,Yi=!1,Ii=d)}}else{if(pd(d))throw Error(l(418));d.flags=d.flags&-4097|2,Yi=!1,Ii=d}}}function al(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Ii=d}function zc(d){if(!He||d!==Ii)return!1;if(!Yi)return al(d),Yi=!0,!1;if(d.tag!==3&&(d.tag!==5||La(d.type)&&!qe(d.type,d.memoizedProps))){var v=xr;if(v){if(pd(d)){for(d=xr;d;)d=_t(d);throw Error(l(418))}for(;v;)cf(d,v),v=_t(v)}}if(al(d),d.tag===13){if(!He)throw Error(l(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(l(317));xr=Or(d)}else xr=Ii?_t(d.stateNode):null;return!0}function zh(){He&&(xr=Ii=null,fa=Yi=!1)}function ju(d){xu===null?xu=[d]:xu.push(d)}function eu(d,v,$){if(d=$.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if($._owner){if($=$._owner,$){if($.tag!==1)throw Error(l(309));var I=$.stateNode}if(!I)throw Error(l(147,d));var B=I,W=""+d;return v!==null&&v.ref!==null&&typeof v.ref=="function"&&v.ref._stringRef===W?v.ref:(v=function(pe){var Oe=B.refs;Oe===lf&&(Oe=B.refs={}),pe===null?delete Oe[W]:Oe[W]=pe},v._stringRef=W,v)}if(typeof d!="string")throw Error(l(284));if(!$._owner)throw Error(l(290,d))}return d}function Hs(d,v){throw d=Object.prototype.toString.call(v),Error(l(31,d==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":d))}function tu(d){var v=d._init;return v(d._payload)}function Uh(d){function v(Ce,Ne){if(d){var ot=Ce.deletions;ot===null?(Ce.deletions=[Ne],Ce.flags|=16):ot.push(Ne)}}function $(Ce,Ne){if(!d)return null;for(;Ne!==null;)v(Ce,Ne),Ne=Ne.sibling;return null}function I(Ce,Ne){for(Ce=new Map;Ne!==null;)Ne.key!==null?Ce.set(Ne.key,Ne):Ce.set(Ne.index,Ne),Ne=Ne.sibling;return Ce}function B(Ce,Ne){return Ce=So(Ce,Ne),Ce.index=0,Ce.sibling=null,Ce}function W(Ce,Ne,ot){return Ce.index=ot,d?(ot=Ce.alternate,ot!==null?(ot=ot.index,ot<Ne?(Ce.flags|=2,Ne):ot):(Ce.flags|=2,Ne)):(Ce.flags|=1048576,Ne)}function pe(Ce){return d&&Ce.alternate===null&&(Ce.flags|=2),Ce}function Oe(Ce,Ne,ot,jt){return Ne===null||Ne.tag!==6?(Ne=ii(ot,Ce.mode,jt),Ne.return=Ce,Ne):(Ne=B(Ne,ot),Ne.return=Ce,Ne)}function tt(Ce,Ne,ot,jt){var on=ot.type;return on===g?Zt(Ce,Ne,ot.props.children,jt,ot.key):Ne!==null&&(Ne.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===P&&tu(on)===Ne.type)?(jt=B(Ne,ot.props),jt.ref=eu(Ce,Ne,ot),jt.return=Ce,jt):(jt=Bl(ot.type,ot.key,ot.props,null,Ce.mode,jt),jt.ref=eu(Ce,Ne,ot),jt.return=Ce,jt)}function xt(Ce,Ne,ot,jt){return Ne===null||Ne.tag!==4||Ne.stateNode.containerInfo!==ot.containerInfo||Ne.stateNode.implementation!==ot.implementation?(Ne=cs(ot,Ce.mode,jt),Ne.return=Ce,Ne):(Ne=B(Ne,ot.children||[]),Ne.return=Ce,Ne)}function Zt(Ce,Ne,ot,jt,on){return Ne===null||Ne.tag!==7?(Ne=Ka(ot,Ce.mode,jt,on),Ne.return=Ce,Ne):(Ne=B(Ne,ot),Ne.return=Ce,Ne)}function cn(Ce,Ne,ot){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return Ne=ii(""+Ne,Ce.mode,ot),Ne.return=Ce,Ne;if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case h:return ot=Bl(Ne.type,Ne.key,Ne.props,null,Ce.mode,ot),ot.ref=eu(Ce,null,Ne),ot.return=Ce,ot;case f:return Ne=cs(Ne,Ce.mode,ot),Ne.return=Ce,Ne;case P:var jt=Ne._init;return cn(Ce,jt(Ne._payload),ot)}if(ce(Ne)||H(Ne))return Ne=Ka(Ne,Ce.mode,ot,null),Ne.return=Ce,Ne;Hs(Ce,Ne)}return null}function Tn(Ce,Ne,ot,jt){var on=Ne!==null?Ne.key:null;if(typeof ot=="string"&&ot!==""||typeof ot=="number")return on!==null?null:Oe(Ce,Ne,""+ot,jt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case h:return ot.key===on?tt(Ce,Ne,ot,jt):null;case f:return ot.key===on?xt(Ce,Ne,ot,jt):null;case P:return on=ot._init,Tn(Ce,Ne,on(ot._payload),jt)}if(ce(ot)||H(ot))return on!==null?null:Zt(Ce,Ne,ot,jt,null);Hs(Ce,ot)}return null}function Sn(Ce,Ne,ot,jt,on){if(typeof jt=="string"&&jt!==""||typeof jt=="number")return Ce=Ce.get(ot)||null,Oe(Ne,Ce,""+jt,on);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case h:return Ce=Ce.get(jt.key===null?ot:jt.key)||null,tt(Ne,Ce,jt,on);case f:return Ce=Ce.get(jt.key===null?ot:jt.key)||null,xt(Ne,Ce,jt,on);case P:var xn=jt._init;return Sn(Ce,Ne,ot,xn(jt._payload),on)}if(ce(jt)||H(jt))return Ce=Ce.get(ot)||null,Zt(Ne,Ce,jt,on,null);Hs(Ne,jt)}return null}function gn(Ce,Ne,ot,jt){for(var on=null,xn=null,On=Ne,zn=Ne=0,fr=null;On!==null&&zn<ot.length;zn++){On.index>zn?(fr=On,On=null):fr=On.sibling;var Rr=Tn(Ce,On,ot[zn],jt);if(Rr===null){On===null&&(On=fr);break}d&&On&&Rr.alternate===null&&v(Ce,On),Ne=W(Rr,Ne,zn),xn===null?on=Rr:xn.sibling=Rr,xn=Rr,On=fr}if(zn===ot.length)return $(Ce,On),Yi&&Ql(Ce,zn),on;if(On===null){for(;zn<ot.length;zn++)On=cn(Ce,ot[zn],jt),On!==null&&(Ne=W(On,Ne,zn),xn===null?on=On:xn.sibling=On,xn=On);return Yi&&Ql(Ce,zn),on}for(On=I(Ce,On);zn<ot.length;zn++)fr=Sn(On,Ce,zn,ot[zn],jt),fr!==null&&(d&&fr.alternate!==null&&On.delete(fr.key===null?zn:fr.key),Ne=W(fr,Ne,zn),xn===null?on=fr:xn.sibling=fr,xn=fr);return d&&On.forEach(function(Fl){return v(Ce,Fl)}),Yi&&Ql(Ce,zn),on}function Ur(Ce,Ne,ot,jt){var on=H(ot);if(typeof on!="function")throw Error(l(150));if(ot=on.call(ot),ot==null)throw Error(l(151));for(var xn=on=null,On=Ne,zn=Ne=0,fr=null,Rr=ot.next();On!==null&&!Rr.done;zn++,Rr=ot.next()){On.index>zn?(fr=On,On=null):fr=On.sibling;var Fl=Tn(Ce,On,Rr.value,jt);if(Fl===null){On===null&&(On=fr);break}d&&On&&Fl.alternate===null&&v(Ce,On),Ne=W(Fl,Ne,zn),xn===null?on=Fl:xn.sibling=Fl,xn=Fl,On=fr}if(Rr.done)return $(Ce,On),Yi&&Ql(Ce,zn),on;if(On===null){for(;!Rr.done;zn++,Rr=ot.next())Rr=cn(Ce,Rr.value,jt),Rr!==null&&(Ne=W(Rr,Ne,zn),xn===null?on=Rr:xn.sibling=Rr,xn=Rr);return Yi&&Ql(Ce,zn),on}for(On=I(Ce,On);!Rr.done;zn++,Rr=ot.next())Rr=Sn(On,Ce,zn,Rr.value,jt),Rr!==null&&(d&&Rr.alternate!==null&&On.delete(Rr.key===null?zn:Rr.key),Ne=W(Rr,Ne,zn),xn===null?on=Rr:xn.sibling=Rr,xn=Rr);return d&&On.forEach(function(pf){return v(Ce,pf)}),Yi&&Ql(Ce,zn),on}function Et(Ce,Ne,ot,jt){if(typeof ot=="object"&&ot!==null&&ot.type===g&&ot.key===null&&(ot=ot.props.children),typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case h:e:{for(var on=ot.key,xn=Ne;xn!==null;){if(xn.key===on){if(on=ot.type,on===g){if(xn.tag===7){$(Ce,xn.sibling),Ne=B(xn,ot.props.children),Ne.return=Ce,Ce=Ne;break e}}else if(xn.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===P&&tu(on)===xn.type){$(Ce,xn.sibling),Ne=B(xn,ot.props),Ne.ref=eu(Ce,xn,ot),Ne.return=Ce,Ce=Ne;break e}$(Ce,xn);break}else v(Ce,xn);xn=xn.sibling}ot.type===g?(Ne=Ka(ot.props.children,Ce.mode,jt,ot.key),Ne.return=Ce,Ce=Ne):(jt=Bl(ot.type,ot.key,ot.props,null,Ce.mode,jt),jt.ref=eu(Ce,Ne,ot),jt.return=Ce,Ce=jt)}return pe(Ce);case f:e:{for(xn=ot.key;Ne!==null;){if(Ne.key===xn)if(Ne.tag===4&&Ne.stateNode.containerInfo===ot.containerInfo&&Ne.stateNode.implementation===ot.implementation){$(Ce,Ne.sibling),Ne=B(Ne,ot.children||[]),Ne.return=Ce,Ce=Ne;break e}else{$(Ce,Ne);break}else v(Ce,Ne);Ne=Ne.sibling}Ne=cs(ot,Ce.mode,jt),Ne.return=Ce,Ce=Ne}return pe(Ce);case P:return xn=ot._init,Et(Ce,Ne,xn(ot._payload),jt)}if(ce(ot))return gn(Ce,Ne,ot,jt);if(H(ot))return Ur(Ce,Ne,ot,jt);Hs(Ce,ot)}return typeof ot=="string"&&ot!==""||typeof ot=="number"?(ot=""+ot,Ne!==null&&Ne.tag===6?($(Ce,Ne.sibling),Ne=B(Ne,ot),Ne.return=Ce,Ce=Ne):($(Ce,Ne),Ne=ii(ot,Ce.mode,jt),Ne.return=Ce,Ce=Ne),pe(Ce)):$(Ce,Ne)}return Et}var Uc=Uh(!0),Hc=Uh(!1),is={},Hr=Pr(is),Ml=Pr(is),Ua=Pr(is);function nu(d){if(d===is)throw Error(l(174));return d}function $u(d,v){Nr(Ua,v),Nr(Ml,d),Nr(Hr,is),d=$e(v),In(Hr),Nr(Hr,d)}function Th(){In(Hr),In(Ml),In(Ua)}function Ad(d){var v=nu(Ua.current),$=nu(Hr.current);v=K($,d.type,v),$!==v&&(Nr(Ml,d),Nr(Hr,v))}function pi(d){Ml.current===d&&(In(Hr),In(Ml))}var ye=Pr(0);function Xe(d){for(var v=d;v!==null;){if(v.tag===13){var $=v.memoizedState;if($!==null&&($=$.dehydrated,$===null||nn($)||kn($)))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if(v.flags&128)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===d)break;for(;v.sibling===null;){if(v.return===null||v.return===d)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var Pe=[];function Nt(){for(var d=0;d<Pe.length;d++){var v=Pe[d];at?v._workInProgressVersionPrimary=null:v._workInProgressVersionSecondary=null}Pe.length=0}var sn=u.ReactCurrentDispatcher,Rn=u.ReactCurrentBatchConfig,Jn=0,_n=null,Gr=null,ho=null,Ti=!1,fo=!1,ll=0,zi=0;function _s(){throw Error(l(321))}function Cu(d,v){if(v===null)return!1;for(var $=0;$<v.length&&$<d.length;$++)if(!Es(d[$],v[$]))return!1;return!0}function qn(d,v,$,I,B,W){if(Jn=W,_n=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,sn.current=d===null||d.memoizedState===null?Ju:wh,d=$(I,B),fo){W=0;do{if(fo=!1,ll=0,25<=W)throw Error(l(301));W+=1,ho=Gr=null,v.updateQueue=null,sn.current=ul,d=$(I,B)}while(fo)}if(sn.current=Ku,v=Gr!==null&&Gr.next!==null,Jn=0,ho=Gr=_n=null,Ti=!1,v)throw Error(l(300));return d}function pa(){var d=ll!==0;return ll=0,d}function Qs(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ho===null?_n.memoizedState=ho=d:ho=ho.next=d,ho}function Gs(){if(Gr===null){var d=_n.alternate;d=d!==null?d.memoizedState:null}else d=Gr.next;var v=ho===null?_n.memoizedState:ho.next;if(v!==null)ho=v,Gr=d;else{if(d===null)throw Error(l(310));Gr=d,d={memoizedState:Gr.memoizedState,baseState:Gr.baseState,baseQueue:Gr.baseQueue,queue:Gr.queue,next:null},ho===null?_n.memoizedState=ho=d:ho=ho.next=d}return ho}function Ha(d,v){return typeof v=="function"?v(d):v}function Hh(d){var v=Gs(),$=v.queue;if($===null)throw Error(l(311));$.lastRenderedReducer=d;var I=Gr,B=I.baseQueue,W=$.pending;if(W!==null){if(B!==null){var pe=B.next;B.next=W.next,W.next=pe}I.baseQueue=B=W,$.pending=null}if(B!==null){W=B.next,I=I.baseState;var Oe=pe=null,tt=null,xt=W;do{var Zt=xt.lane;if((Jn&Zt)===Zt)tt!==null&&(tt=tt.next={lane:0,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null}),I=xt.hasEagerState?xt.eagerState:d(I,xt.action);else{var cn={lane:Zt,action:xt.action,hasEagerState:xt.hasEagerState,eagerState:xt.eagerState,next:null};tt===null?(Oe=tt=cn,pe=I):tt=tt.next=cn,_n.lanes|=Zt,Qu|=Zt}xt=xt.next}while(xt!==null&&xt!==W);tt===null?pe=I:tt.next=Oe,Es(I,v.memoizedState)||(ki=!0),v.memoizedState=I,v.baseState=pe,v.baseQueue=tt,$.lastRenderedState=I}if(d=$.interleaved,d!==null){B=d;do W=B.lane,_n.lanes|=W,Qu|=W,B=B.next;while(B!==d)}else B===null&&($.lanes=0);return[v.memoizedState,$.dispatch]}function Sh(d){var v=Gs(),$=v.queue;if($===null)throw Error(l(311));$.lastRenderedReducer=d;var I=$.dispatch,B=$.pending,W=v.memoizedState;if(B!==null){$.pending=null;var pe=B=B.next;do W=d(W,pe.action),pe=pe.next;while(pe!==B);Es(W,v.memoizedState)||(ki=!0),v.memoizedState=W,v.baseQueue===null&&(v.baseState=W),$.lastRenderedState=W}return[W,I]}function mc(){}function ea(d,v){var $=_n,I=Gs(),B=v(),W=!Es(I.memoizedState,B);if(W&&(I.memoizedState=B,ki=!0),I=I.queue,Vh(Ga.bind(null,$,I,d),[d]),I.getSnapshot!==v||W||ho!==null&&ho.memoizedState.tag&1){if($.flags|=2048,Yu(9,Gh.bind(null,$,I,B,v),void 0,null),zr===null)throw Error(l(349));Jn&30||Gc($,v,B)}return B}function Gc(d,v,$){d.flags|=16384,d={getSnapshot:v,value:$},v=_n.updateQueue,v===null?(v={lastEffect:null,stores:null},_n.updateQueue=v,v.stores=[d]):($=v.stores,$===null?v.stores=[d]:$.push(d))}function Gh(d,v,$,I){v.value=$,v.getSnapshot=I,Wh(v)&&Xa(d,1,-1)}function Ga(d,v,$){return $(function(){Wh(v)&&Xa(d,1,-1)})}function Wh(d){var v=d.getSnapshot;d=d.value;try{var $=v();return!Es(d,$)}catch{return!0}}function gc(d){var v=Qs();return typeof d=="function"&&(d=d()),v.memoizedState=v.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:d},v.queue=d,d=d.dispatch=Ri.bind(null,_n,d),[v.memoizedState,d]}function Yu(d,v,$,I){return d={tag:d,create:v,destroy:$,deps:I,next:null},v=_n.updateQueue,v===null?(v={lastEffect:null,stores:null},_n.updateQueue=v,v.lastEffect=d.next=d):($=v.lastEffect,$===null?v.lastEffect=d.next=d:(I=$.next,$.next=d,d.next=I,v.lastEffect=d)),d}function md(){return Gs().memoizedState}function ta(d,v,$,I){var B=Qs();_n.flags|=d,B.memoizedState=Yu(1|v,$,void 0,I===void 0?null:I)}function po(d,v,$,I){var B=Gs();I=I===void 0?null:I;var W=void 0;if(Gr!==null){var pe=Gr.memoizedState;if(W=pe.destroy,I!==null&&Cu(I,pe.deps)){B.memoizedState=Yu(v,$,W,I);return}}_n.flags|=d,B.memoizedState=Yu(1|v,$,W,I)}function Al(d,v){return ta(8390656,8,d,v)}function Vh(d,v){return po(2048,8,d,v)}function Ui(d,v){return po(4,2,d,v)}function gd(d,v){return po(4,4,d,v)}function Xu(d,v){if(typeof v=="function")return d=d(),v(d),function(){v(null)};if(v!=null)return d=d(),v.current=d,function(){v.current=null}}function ru(d,v,$){return $=$!=null?$.concat([d]):null,po(4,4,Xu.bind(null,v,d),$)}function Wc(){}function Id(d,v){var $=Gs();v=v===void 0?null:v;var I=$.memoizedState;return I!==null&&v!==null&&Cu(v,I[1])?I[0]:($.memoizedState=[d,v],d)}function Il(d,v){var $=Gs();v=v===void 0?null:v;var I=$.memoizedState;return I!==null&&v!==null&&Cu(v,I[1])?I[0]:(d=d(),$.memoizedState=[d,v],d)}function Rd(d,v){var $=Er;Er=$!==0&&4>$?$:4,d(!0);var I=Rn.transition;Rn.transition={};try{d(!1),v()}finally{Er=$,Rn.transition=I}}function jh(){return Gs().memoizedState}function ni(d,v,$){var I=Os(d);$={lane:I,action:$,hasEagerState:!1,eagerState:null,next:null},Ep(d)?zf(v,$):(Rl(d,v,$),$=bs(),d=Xa(d,I,$),d!==null&&iu(d,v,I))}function Ri(d,v,$){var I=Os(d),B={lane:I,action:$,hasEagerState:!1,eagerState:null,next:null};if(Ep(d))zf(v,B);else{Rl(d,v,B);var W=d.alternate;if(d.lanes===0&&(W===null||W.lanes===0)&&(W=v.lastRenderedReducer,W!==null))try{var pe=v.lastRenderedState,Oe=W(pe,$);if(B.hasEagerState=!0,B.eagerState=Oe,Es(Oe,pe))return}catch{}finally{}$=bs(),d=Xa(d,I,$),d!==null&&iu(d,v,I)}}function Ep(d){var v=d.alternate;return d===_n||v!==null&&v===_n}function zf(d,v){fo=Ti=!0;var $=d.pending;$===null?v.next=v:(v.next=$.next,$.next=v),d.pending=v}function Rl(d,v,$){zr!==null&&d.mode&1&&!(nr&2)?(d=v.interleaved,d===null?($.next=$,Ai===null?Ai=[v]:Ai.push(v)):($.next=d.next,d.next=$),v.interleaved=$):(d=v.pending,d===null?$.next=$:($.next=d.next,d.next=$),v.pending=$)}function iu(d,v,$){if($&4194240){var I=v.lanes;I&=d.pendingLanes,$|=I,v.lanes=$,wr(d,$)}}var Ku={readContext:Vn,useCallback:_s,useContext:_s,useEffect:_s,useImperativeHandle:_s,useInsertionEffect:_s,useLayoutEffect:_s,useMemo:_s,useReducer:_s,useRef:_s,useState:_s,useDebugValue:_s,useDeferredValue:_s,useTransition:_s,useMutableSource:_s,useSyncExternalStore:_s,useId:_s,unstable_isNewReconciler:!1},Ju={readContext:Vn,useCallback:function(d,v){return Qs().memoizedState=[d,v===void 0?null:v],d},useContext:Vn,useEffect:Al,useImperativeHandle:function(d,v,$){return $=$!=null?$.concat([d]):null,ta(4194308,4,Xu.bind(null,v,d),$)},useLayoutEffect:function(d,v){return ta(4194308,4,d,v)},useInsertionEffect:function(d,v){return ta(4,2,d,v)},useMemo:function(d,v){var $=Qs();return v=v===void 0?null:v,d=d(),$.memoizedState=[d,v],d},useReducer:function(d,v,$){var I=Qs();return v=$!==void 0?$(v):v,I.memoizedState=I.baseState=v,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:v},I.queue=d,d=d.dispatch=ni.bind(null,_n,d),[I.memoizedState,d]},useRef:function(d){var v=Qs();return d={current:d},v.memoizedState=d},useState:gc,useDebugValue:Wc,useDeferredValue:function(d){var v=gc(d),$=v[0],I=v[1];return Al(function(){var B=Rn.transition;Rn.transition={};try{I(d)}finally{Rn.transition=B}},[d]),$},useTransition:function(){var d=gc(!1),v=d[0];return d=Rd.bind(null,d[1]),Qs().memoizedState=d,[v,d]},useMutableSource:function(){},useSyncExternalStore:function(d,v,$){var I=_n,B=Qs();if(Yi){if($===void 0)throw Error(l(407));$=$()}else{if($=v(),zr===null)throw Error(l(349));Jn&30||Gc(I,v,$)}B.memoizedState=$;var W={value:$,getSnapshot:v};return B.queue=W,Al(Ga.bind(null,I,W,d),[d]),I.flags|=2048,Yu(9,Gh.bind(null,I,W,$,v),void 0,null),$},useId:function(){var d=Qs(),v=zr.identifierPrefix;if(Yi){var $=Uo,I=za;$=(I&~(1<<32-qo(I)-1)).toString(32)+$,v=":"+v+"R"+$,$=ll++,0<$&&(v+="H"+$.toString(32)),v+=":"}else $=zi++,v=":"+v+"r"+$.toString(32)+":";return d.memoizedState=v},unstable_isNewReconciler:!1},wh={readContext:Vn,useCallback:Id,useContext:Vn,useEffect:Vh,useImperativeHandle:ru,useInsertionEffect:Ui,useLayoutEffect:gd,useMemo:Il,useReducer:Hh,useRef:md,useState:function(){return Hh(Ha)},useDebugValue:Wc,useDeferredValue:function(d){var v=Hh(Ha),$=v[0],I=v[1];return Vh(function(){var B=Rn.transition;Rn.transition={};try{I(d)}finally{Rn.transition=B}},[d]),$},useTransition:function(){var d=Hh(Ha)[0],v=Gs().memoizedState;return[d,v]},useMutableSource:mc,useSyncExternalStore:ea,useId:jh,unstable_isNewReconciler:!1},ul={readContext:Vn,useCallback:Id,useContext:Vn,useEffect:Vh,useImperativeHandle:ru,useInsertionEffect:Ui,useLayoutEffect:gd,useMemo:Il,useReducer:Sh,useRef:md,useState:function(){return Sh(Ha)},useDebugValue:Wc,useDeferredValue:function(d){var v=Sh(Ha),$=v[0],I=v[1];return Vh(function(){var B=Rn.transition;Rn.transition={};try{I(d)}finally{Rn.transition=B}},[d]),$},useTransition:function(){var d=Sh(Ha)[0],v=Gs().memoizedState;return[d,v]},useMutableSource:mc,useSyncExternalStore:ea,useId:jh,unstable_isNewReconciler:!1};function na(d,v){try{var $="",I=v;do $+=Rs(I),I=I.return;while(I);var B=$}catch(W){B=`
Error generating stack: `+W.message+`
`+W.stack}return{value:d,source:v,stack:B}}function kl(d,v){try{console.error(v.value)}catch($){setTimeout(function(){throw $})}}var Vc=typeof WeakMap=="function"?WeakMap:Map;function Ol(d,v,$){$=ji(-1,$),$.tag=3,$.payload={element:null};var I=v.value;return $.callback=function(){Iu||(Iu=!0,vo=I),kl(d,v)},$}function jc(d,v,$){$=ji(-1,$),$.tag=3;var I=d.type.getDerivedStateFromError;if(typeof I=="function"){var B=v.value;$.payload=function(){return I(B)},$.callback=function(){kl(d,v)}}var W=d.stateNode;return W!==null&&typeof W.componentDidCatch=="function"&&($.callback=function(){kl(d,v),typeof I!="function"&&(_o===null?_o=new Set([this]):_o.add(this));var pe=v.stack;this.componentDidCatch(v.value,{componentStack:pe!==null?pe:""})}),$}function vc(d,v,$){var I=d.pingCache;if(I===null){I=d.pingCache=new Vc;var B=new Set;I.set(v,B)}else B=I.get(v),B===void 0&&(B=new Set,I.set(v,B));B.has($)||(B.add($),d=sa.bind(null,d,v,$),v.then(d,d))}function kd(d){do{var v;if((v=d.tag===13)&&(v=d.memoizedState,v=v!==null?v.dehydrated!==null:!0),v)return d;d=d.return}while(d!==null);return null}function Wa(d,v,$,I,B){return d.mode&1?(d.flags|=65536,d.lanes=B,d):(d===v?d.flags|=65536:(d.flags|=128,$.flags|=131072,$.flags&=-52805,$.tag===1&&($.alternate===null?$.tag=17:(v=ji(-1,1),v.tag=2,Ba($,v))),$.lanes|=1),d)}function Xr(d){d.flags|=4}function cl(d,v){if(d!==null&&d.child===v.child)return!0;if(v.flags&16)return!1;for(d=v.child;d!==null;){if(d.flags&12854||d.subtreeFlags&12854)return!1;d=d.sibling}return!0}var Zi,ma,X,xs;if(Ge)Zi=function(d,v){for(var $=v.child;$!==null;){if($.tag===5||$.tag===6)Se(d,$.stateNode);else if($.tag!==4&&$.child!==null){$.child.return=$,$=$.child;continue}if($===v)break;for(;$.sibling===null;){if($.return===null||$.return===v)return;$=$.return}$.sibling.return=$.return,$=$.sibling}},ma=function(){},X=function(d,v,$,I,B){if(d=d.memoizedProps,d!==I){var W=v.stateNode,pe=nu(Hr.current);$=ke(W,$,d,I,B,pe),(v.updateQueue=$)&&Xr(v)}},xs=function(d,v,$,I){$!==I&&Xr(v)};else if(Ie){Zi=function(d,v,$,I){for(var B=v.child;B!==null;){if(B.tag===5){var W=B.stateNode;$&&I&&(W=ne(W,B.type,B.memoizedProps,B)),Se(d,W)}else if(B.tag===6)W=B.stateNode,$&&I&&(W=Te(W,B.memoizedProps,B)),Se(d,W);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)W=B.child,W!==null&&(W.return=B),Zi(d,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===v)break;for(;B.sibling===null;){if(B.return===null||B.return===v)return;B=B.return}B.sibling.return=B.return,B=B.sibling}};var ga=function(d,v,$,I){for(var B=v.child;B!==null;){if(B.tag===5){var W=B.stateNode;$&&I&&(W=ne(W,B.type,B.memoizedProps,B)),oi(d,W)}else if(B.tag===6)W=B.stateNode,$&&I&&(W=Te(W,B.memoizedProps,B)),oi(d,W);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)W=B.child,W!==null&&(W.return=B),ga(d,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===v)break;for(;B.sibling===null;){if(B.return===null||B.return===v)return;B=B.return}B.sibling.return=B.return,B=B.sibling}};ma=function(d,v){var $=v.stateNode;if(!cl(d,v)){d=$.containerInfo;var I=cr(d);ga(I,v,!1,!1),$.pendingChildren=I,Xr(v),Mr(d,I)}},X=function(d,v,$,I,B){var W=d.stateNode,pe=d.memoizedProps;if((d=cl(d,v))&&pe===I)v.stateNode=W;else{var Oe=v.stateNode,tt=nu(Hr.current),xt=null;pe!==I&&(xt=ke(Oe,$,pe,I,B,tt)),d&&xt===null?v.stateNode=W:(W=ar(W,xt,$,pe,I,v,d,Oe),Ue(W,$,I,B,tt)&&Xr(v),v.stateNode=W,d?Xr(v):Zi(W,v,!1,!1))}},xs=function(d,v,$,I){$!==I?(d=nu(Ua.current),$=nu(Hr.current),v.stateNode=we(I,d,$,v),Xr(v)):v.stateNode=d.stateNode}}else ma=function(){},X=function(){},xs=function(){};function Ir(d,v){if(!Yi)switch(d.tailMode){case"hidden":v=d.tail;for(var $=null;v!==null;)v.alternate!==null&&($=v),v=v.sibling;$===null?d.tail=null:$.sibling=null;break;case"collapsed":$=d.tail;for(var I=null;$!==null;)$.alternate!==null&&(I=$),$=$.sibling;I===null?v||d.tail===null?d.tail=null:d.tail.sibling=null:I.sibling=null}}function mn(d){var v=d.alternate!==null&&d.alternate.child===d.child,$=0,I=0;if(v)for(var B=d.child;B!==null;)$|=B.lanes|B.childLanes,I|=B.subtreeFlags&14680064,I|=B.flags&14680064,B.return=d,B=B.sibling;else for(B=d.child;B!==null;)$|=B.lanes|B.childLanes,I|=B.subtreeFlags,I|=B.flags,B.return=d,B=B.sibling;return d.subtreeFlags|=I,d.childLanes=$,v}function Uf(d,v,$){var I=v.pendingProps;switch(Yr(v),v.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mn(v),null;case 1:return gs(v.type)&&nl(),mn(v),null;case 3:return I=v.stateNode,Th(),In(Bi),In(Sr),Nt(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(d===null||d.child===null)&&(zc(v)?Xr(v):d===null||d.memoizedState.isDehydrated&&!(v.flags&256)||(v.flags|=1024,xu!==null&&(_i(xu),xu=null))),ma(d,v),mn(v),null;case 5:pi(v),$=nu(Ua.current);var B=v.type;if(d!==null&&v.stateNode!=null)X(d,v,B,I,$),d.ref!==v.ref&&(v.flags|=512,v.flags|=2097152);else{if(!I){if(v.stateNode===null)throw Error(l(166));return mn(v),null}if(d=nu(Hr.current),zc(v)){if(!He)throw Error(l(175));d=Wn(v.stateNode,v.type,v.memoizedProps,$,d,v,!fa),v.updateQueue=d,d!==null&&Xr(v)}else{var W=fe(B,I,$,d,v);Zi(W,v,!1,!1),v.stateNode=W,Ue(W,B,I,$,d)&&Xr(v)}v.ref!==null&&(v.flags|=512,v.flags|=2097152)}return mn(v),null;case 6:if(d&&v.stateNode!=null)xs(d,v,d.memoizedProps,I);else{if(typeof I!="string"&&v.stateNode===null)throw Error(l(166));if(d=nu(Ua.current),$=nu(Hr.current),zc(v)){if(!He)throw Error(l(176));if(d=v.stateNode,I=v.memoizedProps,($=ir(d,I,v,!fa))&&(B=Ii,B!==null))switch(W=(B.mode&1)!==0,B.tag){case 3:Mo(B.stateNode.containerInfo,d,I,W);break;case 5:Xl(B.type,B.memoizedProps,B.stateNode,d,I,W)}$&&Xr(v)}else v.stateNode=we(I,d,$,v)}return mn(v),null;case 13:if(In(ye),I=v.memoizedState,Yi&&xr!==null&&v.mode&1&&!(v.flags&128)){for(d=xr;d;)d=_t(d);return zh(),v.flags|=98560,v}if(I!==null&&I.dehydrated!==null){if(I=zc(v),d===null){if(!I)throw Error(l(318));if(!He)throw Error(l(344));if(d=v.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(l(317));br(d,v)}else zh(),!(v.flags&128)&&(v.memoizedState=null),v.flags|=4;return mn(v),null}return xu!==null&&(_i(xu),xu=null),v.flags&128?(v.lanes=$,v):(I=I!==null,$=!1,d===null?zc(v):$=d.memoizedState!==null,I&&!$&&(v.child.flags|=8192,v.mode&1&&(d===null||ye.current&1?ts===0&&(ts=3):Qc())),v.updateQueue!==null&&(v.flags|=4),mn(v),null);case 4:return Th(),ma(d,v),d===null&&st(v.stateNode.containerInfo),mn(v),null;case 10:return ol(v.type._context),mn(v),null;case 17:return gs(v.type)&&nl(),mn(v),null;case 19:if(In(ye),B=v.memoizedState,B===null)return mn(v),null;if(I=(v.flags&128)!==0,W=B.rendering,W===null)if(I)Ir(B,!1);else{if(ts!==0||d!==null&&d.flags&128)for(d=v.child;d!==null;){if(W=Xe(d),W!==null){for(v.flags|=128,Ir(B,!1),d=W.updateQueue,d!==null&&(v.updateQueue=d,v.flags|=4),v.subtreeFlags=0,d=$,I=v.child;I!==null;)$=I,B=d,$.flags&=14680066,W=$.alternate,W===null?($.childLanes=0,$.lanes=B,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=W.childLanes,$.lanes=W.lanes,$.child=W.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=W.memoizedProps,$.memoizedState=W.memoizedState,$.updateQueue=W.updateQueue,$.type=W.type,B=W.dependencies,$.dependencies=B===null?null:{lanes:B.lanes,firstContext:B.firstContext}),I=I.sibling;return Nr(ye,ye.current&1|2),v.child}d=d.sibling}B.tail!==null&&vs()>ba&&(v.flags|=128,I=!0,Ir(B,!1),v.lanes=4194304)}else{if(!I)if(d=Xe(W),d!==null){if(v.flags|=128,I=!0,d=d.updateQueue,d!==null&&(v.updateQueue=d,v.flags|=4),Ir(B,!0),B.tail===null&&B.tailMode==="hidden"&&!W.alternate&&!Yi)return mn(v),null}else 2*vs()-B.renderingStartTime>ba&&$!==1073741824&&(v.flags|=128,I=!0,Ir(B,!1),v.lanes=4194304);B.isBackwards?(W.sibling=v.child,v.child=W):(d=B.last,d!==null?d.sibling=W:v.child=W,B.last=W)}return B.tail!==null?(v=B.tail,B.rendering=v,B.tail=v.sibling,B.renderingStartTime=vs(),v.sibling=null,d=ye.current,Nr(ye,I?d&1|2:d&1),v):(mn(v),null);case 22:case 23:return ml(),I=v.memoizedState!==null,d!==null&&d.memoizedState!==null!==I&&(v.flags|=8192),I&&v.mode&1?ko&1073741824&&(mn(v),Ge&&v.subtreeFlags&6&&(v.flags|=8192)):mn(v),null;case 24:return null;case 25:return null}throw Error(l(156,v.tag))}var hl=u.ReactCurrentOwner,ki=!1;function hi(d,v,$,I){v.child=d===null?Hc(v,null,$,I):Uc(v,d.child,$,I)}function es(d,v,$,I,B){$=$.render;var W=v.ref;return Mi(v,B),I=qn(d,v,$,I,W,B),$=pa(),d!==null&&!ki?(v.updateQueue=d.updateQueue,v.flags&=-2053,d.lanes&=~B,gi(d,v,B)):(Yi&&$&&Fh(v),v.flags|=1,hi(d,v,I,B),v.child)}function ss(d,v,$,I,B){if(d===null){var W=$.type;return typeof W=="function"&&!ic(W)&&W.defaultProps===void 0&&$.compare===null&&$.defaultProps===void 0?(v.tag=15,v.type=W,Yc(d,v,W,I,B)):(d=Bl($.type,null,I,v,v.mode,B),d.ref=v.ref,d.return=v,v.child=d)}if(W=d.child,!(d.lanes&B)){var pe=W.memoizedProps;if($=$.compare,$=$!==null?$:$r,$(pe,I)&&d.ref===v.ref)return gi(d,v,B)}return v.flags|=1,d=So(W,I),d.ref=v.ref,d.return=v,v.child=d}function Yc(d,v,$,I,B){if(d!==null&&$r(d.memoizedProps,I)&&d.ref===v.ref)if(ki=!1,(d.lanes&B)!==0)d.flags&131072&&(ki=!0);else return v.lanes=d.lanes,gi(d,v,B);return os(d,v,$,I,B)}function va(d,v,$){var I=v.pendingProps,B=I.children,W=d!==null?d.memoizedState:null;if(I.mode==="hidden")if(!(v.mode&1))v.memoizedState={baseLanes:0,cachePool:null},Nr(us,ko),ko|=$;else if($&1073741824)v.memoizedState={baseLanes:0,cachePool:null},I=W!==null?W.baseLanes:$,Nr(us,ko),ko|=I;else return d=W!==null?W.baseLanes|$:$,v.lanes=v.childLanes=1073741824,v.memoizedState={baseLanes:d,cachePool:null},v.updateQueue=null,Nr(us,ko),ko|=d,null;else W!==null?(I=W.baseLanes|$,v.memoizedState=null):I=$,Nr(us,ko),ko|=I;return hi(d,v,B,$),v.child}function _a(d,v){var $=v.ref;(d===null&&$!==null||d!==null&&d.ref!==$)&&(v.flags|=512,v.flags|=2097152)}function os(d,v,$,I,B){var W=gs($)?ws:Sr.current;return W=fi(v,W),Mi(v,B),$=qn(d,v,$,I,W,B),I=pa(),d!==null&&!ki?(v.updateQueue=d.updateQueue,v.flags&=-2053,d.lanes&=~B,gi(d,v,B)):(Yi&&I&&Fh(v),v.flags|=1,hi(d,v,$,B),v.child)}function Xc(d,v,$,I,B){if(gs($)){var W=!0;pc(v)}else W=!1;if(Mi(v,B),v.stateNode===null)d!==null&&(d.alternate=null,v.alternate=null,v.flags|=2),wp(v,$,I),ql(v,$,I,B),I=!0;else if(d===null){var pe=v.stateNode,Oe=v.memoizedProps;pe.props=Oe;var tt=pe.context,xt=$.contextType;typeof xt=="object"&&xt!==null?xt=Vn(xt):(xt=gs($)?ws:Sr.current,xt=fi(v,xt));var Zt=$.getDerivedStateFromProps,cn=typeof Zt=="function"||typeof pe.getSnapshotBeforeUpdate=="function";cn||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Oe!==I||tt!==xt)&&Md(v,pe,I,xt),Jr=!1;var Tn=v.memoizedState;pe.state=Tn,Zo(v,I,pe,B),tt=v.memoizedState,Oe!==I||Tn!==tt||Bi.current||Jr?(typeof Zt=="function"&&(Fc(v,$,Zt,I),tt=v.memoizedState),(Oe=Jr||Ff(v,$,Oe,I,Tn,tt,xt))?(cn||typeof pe.UNSAFE_componentWillMount!="function"&&typeof pe.componentWillMount!="function"||(typeof pe.componentWillMount=="function"&&pe.componentWillMount(),typeof pe.UNSAFE_componentWillMount=="function"&&pe.UNSAFE_componentWillMount()),typeof pe.componentDidMount=="function"&&(v.flags|=4194308)):(typeof pe.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=I,v.memoizedState=tt),pe.props=I,pe.state=tt,pe.context=xt,I=Oe):(typeof pe.componentDidMount=="function"&&(v.flags|=4194308),I=!1)}else{pe=v.stateNode,Eu(d,v),Oe=v.memoizedProps,xt=v.type===v.elementType?Oe:bi(v.type,Oe),pe.props=xt,cn=v.pendingProps,Tn=pe.context,tt=$.contextType,typeof tt=="object"&&tt!==null?tt=Vn(tt):(tt=gs($)?ws:Sr.current,tt=fi(v,tt));var Sn=$.getDerivedStateFromProps;(Zt=typeof Sn=="function"||typeof pe.getSnapshotBeforeUpdate=="function")||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Oe!==cn||Tn!==tt)&&Md(v,pe,I,tt),Jr=!1,Tn=v.memoizedState,pe.state=Tn,Zo(v,I,pe,B);var gn=v.memoizedState;Oe!==cn||Tn!==gn||Bi.current||Jr?(typeof Sn=="function"&&(Fc(v,$,Sn,I),gn=v.memoizedState),(xt=Jr||Ff(v,$,xt,I,Tn,gn,tt)||!1)?(Zt||typeof pe.UNSAFE_componentWillUpdate!="function"&&typeof pe.componentWillUpdate!="function"||(typeof pe.componentWillUpdate=="function"&&pe.componentWillUpdate(I,gn,tt),typeof pe.UNSAFE_componentWillUpdate=="function"&&pe.UNSAFE_componentWillUpdate(I,gn,tt)),typeof pe.componentDidUpdate=="function"&&(v.flags|=4),typeof pe.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof pe.componentDidUpdate!="function"||Oe===d.memoizedProps&&Tn===d.memoizedState||(v.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Oe===d.memoizedProps&&Tn===d.memoizedState||(v.flags|=1024),v.memoizedProps=I,v.memoizedState=gn),pe.props=I,pe.state=gn,pe.context=tt,I=xt):(typeof pe.componentDidUpdate!="function"||Oe===d.memoizedProps&&Tn===d.memoizedState||(v.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Oe===d.memoizedProps&&Tn===d.memoizedState||(v.flags|=1024),I=!1)}return ra(d,v,$,I,W,B)}function ra(d,v,$,I,B,W){_a(d,v);var pe=(v.flags&128)!==0;if(!I&&!pe)return B&&qs(v,$,!1),gi(d,v,W);I=v.stateNode,hl.current=v;var Oe=pe&&typeof $.getDerivedStateFromError!="function"?null:I.render();return v.flags|=1,d!==null&&pe?(v.child=Uc(v,d.child,null,W),v.child=Uc(v,null,Oe,W)):hi(d,v,Oe,W),v.memoizedState=I.state,B&&qs(v,$,!0),v.child}function Od(d){var v=d.stateNode;v.pendingContext?Da(d,v.pendingContext,v.pendingContext!==v.context):v.context&&Da(d,v.context,!1),$u(d,v.containerInfo)}function Ld(d,v,$,I,B){return zh(),ju(B),v.flags|=256,hi(d,v,$,I),v.child}var Yh={dehydrated:null,treeContext:null,retryLane:0};function Ws(d){return{baseLanes:d,cachePool:null}}function Kn(d,v,$){var I=v.pendingProps,B=ye.current,W=!1,pe=(v.flags&128)!==0,Oe;if((Oe=pe)||(Oe=d!==null&&d.memoizedState===null?!1:(B&2)!==0),Oe?(W=!0,v.flags&=-129):(d===null||d.memoizedState!==null)&&(B|=1),Nr(ye,B&1),d===null)return Vu(v),d=v.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(v.mode&1?kn(d)?v.lanes=8:v.lanes=1073741824:v.lanes=1,null):(B=I.children,d=I.fallback,W?(I=v.mode,W=v.child,B={mode:"hidden",children:B},!(I&1)&&W!==null?(W.childLanes=0,W.pendingProps=B):W=cu(B,I,0,null),d=Ka(d,I,$,null),W.return=v,d.return=v,W.sibling=d,v.child=W,v.child.memoizedState=Ws($),v.memoizedState=Yh,d):Vs(v,B));if(B=d.memoizedState,B!==null){if(Oe=B.dehydrated,Oe!==null){if(pe)return v.flags&256?(v.flags&=-257,su(d,v,$,Error(l(422)))):v.memoizedState!==null?(v.child=d.child,v.flags|=128,null):(W=I.fallback,B=v.mode,I=cu({mode:"visible",children:I.children},B,0,null),W=Ka(W,B,$,null),W.flags|=2,I.return=v,W.return=v,I.sibling=W,v.child=I,v.mode&1&&Uc(v,d.child,null,$),v.child.memoizedState=Ws($),v.memoizedState=Yh,W);if(!(v.mode&1))v=su(d,v,$,null);else if(kn(Oe))v=su(d,v,$,Error(l(419)));else if(I=($&d.childLanes)!==0,ki||I){if(I=zr,I!==null){switch($&-$){case 4:W=2;break;case 16:W=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:W=32;break;case 536870912:W=268435456;break;default:W=0}I=W&(I.suspendedLanes|$)?0:W,I!==0&&I!==B.retryLane&&(B.retryLane=I,Xa(d,I,-1))}Qc(),v=su(d,v,$,Error(l(421)))}else nn(Oe)?(v.flags|=128,v.child=d.child,v=bo.bind(null,d),De(Oe,v),v=null):($=B.treeContext,He&&(xr=Xt(Oe),Ii=v,Yi=!0,xu=null,fa=!1,$!==null&&(ci[Cr++]=za,ci[Cr++]=Uo,ci[Cr++]=co,za=$.id,Uo=$.overflow,co=v)),v=Vs(v,v.pendingProps.children),v.flags|=4096);return v}return W?(I=Hi(d,v,I.children,I.fallback,$),W=v.child,B=d.child.memoizedState,W.memoizedState=B===null?Ws($):{baseLanes:B.baseLanes|$,cachePool:null},W.childLanes=d.childLanes&~$,v.memoizedState=Yh,I):($=Zs(d,v,I.children,$),v.memoizedState=null,$)}return W?(I=Hi(d,v,I.children,I.fallback,$),W=v.child,B=d.child.memoizedState,W.memoizedState=B===null?Ws($):{baseLanes:B.baseLanes|$,cachePool:null},W.childLanes=d.childLanes&~$,v.memoizedState=Yh,I):($=Zs(d,v,I.children,$),v.memoizedState=null,$)}function Vs(d,v){return v=cu({mode:"visible",children:v},d.mode,0,null),v.return=d,d.child=v}function Zs(d,v,$,I){var B=d.child;return d=B.sibling,$=So(B,{mode:"visible",children:$}),!(v.mode&1)&&($.lanes=I),$.return=v,$.sibling=null,d!==null&&(I=v.deletions,I===null?(v.deletions=[d],v.flags|=16):I.push(d)),v.child=$}function Hi(d,v,$,I,B){var W=v.mode;d=d.child;var pe=d.sibling,Oe={mode:"hidden",children:$};return!(W&1)&&v.child!==d?($=v.child,$.childLanes=0,$.pendingProps=Oe,v.deletions=null):($=So(d,Oe),$.subtreeFlags=d.subtreeFlags&14680064),pe!==null?I=So(pe,I):(I=Ka(I,W,B,null),I.flags|=2),I.return=v,$.return=v,$.sibling=I,v.child=$,I}function su(d,v,$,I){return I!==null&&ju(I),Uc(v,d.child,null,$),d=Vs(v,v.pendingProps.children),d.flags|=2,v.memoizedState=null,d}function Ho(d,v,$){d.lanes|=v;var I=d.alternate;I!==null&&(I.lanes|=v),Fi(d.return,v,$)}function $n(d,v,$,I,B){var W=d.memoizedState;W===null?d.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:I,tail:$,tailMode:B}:(W.isBackwards=v,W.rendering=null,W.renderingStartTime=0,W.last=I,W.tail=$,W.tailMode=B)}function mi(d,v,$){var I=v.pendingProps,B=I.revealOrder,W=I.tail;if(hi(d,v,I.children,$),I=ye.current,I&2)I=I&1|2,v.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=v.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&Ho(d,$,v);else if(d.tag===19)Ho(d,$,v);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===v)break e;for(;d.sibling===null;){if(d.return===null||d.return===v)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}I&=1}if(Nr(ye,I),!(v.mode&1))v.memoizedState=null;else switch(B){case"forwards":for($=v.child,B=null;$!==null;)d=$.alternate,d!==null&&Xe(d)===null&&(B=$),$=$.sibling;$=B,$===null?(B=v.child,v.child=null):(B=$.sibling,$.sibling=null),$n(v,!1,B,$,W);break;case"backwards":for($=null,B=v.child,v.child=null;B!==null;){if(d=B.alternate,d!==null&&Xe(d)===null){v.child=B;break}d=B.sibling,B.sibling=$,$=B,B=d}$n(v,!0,$,null,W);break;case"together":$n(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function gi(d,v,$){if(d!==null&&(v.dependencies=d.dependencies),Qu|=v.lanes,!($&v.childLanes))return null;if(d!==null&&v.child!==d.child)throw Error(l(153));if(v.child!==null){for(d=v.child,$=So(d,d.pendingProps),v.child=$,$.return=v;d.sibling!==null;)d=d.sibling,$=$.sibling=So(d,d.pendingProps),$.return=v;$.sibling=null}return v.child}function Hf(d,v,$){switch(v.tag){case 3:Od(v),zh();break;case 5:Ad(v);break;case 1:gs(v.type)&&pc(v);break;case 4:$u(v,v.stateNode.containerInfo);break;case 10:wu(v,v.type._context,v.memoizedProps.value);break;case 13:var I=v.memoizedState;if(I!==null)return I.dehydrated!==null?(Nr(ye,ye.current&1),v.flags|=128,null):$&v.child.childLanes?Kn(d,v,$):(Nr(ye,ye.current&1),d=gi(d,v,$),d!==null?d.sibling:null);Nr(ye,ye.current&1);break;case 19:if(I=($&v.childLanes)!==0,d.flags&128){if(I)return mi(d,v,$);v.flags|=128}var B=v.memoizedState;if(B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),Nr(ye,ye.current),I)break;return null;case 22:case 23:return v.lanes=0,va(d,v,$)}return gi(d,v,$)}function Eh(d,v){switch(Yr(v),v.tag){case 1:return gs(v.type)&&nl(),d=v.flags,d&65536?(v.flags=d&-65537|128,v):null;case 3:return Th(),In(Bi),In(Sr),Nt(),d=v.flags,d&65536&&!(d&128)?(v.flags=d&-65537|128,v):null;case 5:return pi(v),null;case 13:if(In(ye),d=v.memoizedState,d!==null&&d.dehydrated!==null){if(v.alternate===null)throw Error(l(340));zh()}return d=v.flags,d&65536?(v.flags=d&-65537|128,v):null;case 19:return In(ye),null;case 4:return Th(),null;case 10:return ol(v.type._context),null;case 22:case 23:return ml(),null;case 24:return null;default:return null}}var mo=!1,ya=!1,Mn=typeof WeakSet=="function"?WeakSet:Set,yn=null;function dl(d,v){var $=d.ref;if($!==null)if(typeof $=="function")try{$(null)}catch(I){to(d,v,I)}else $.current=null}function _c(d,v,$){try{$()}catch(I){to(d,v,I)}}var xp=!1;function ou(d,v){for(ie(d.containerInfo),yn=v;yn!==null;)if(d=yn,v=d.child,(d.subtreeFlags&1028)!==0&&v!==null)v.return=d,yn=v;else for(;yn!==null;){d=yn;try{var $=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if($!==null){var I=$.memoizedProps,B=$.memoizedState,W=d.stateNode,pe=W.getSnapshotBeforeUpdate(d.elementType===d.type?I:bi(d.type,I),B);W.__reactInternalSnapshotBeforeUpdate=pe}break;case 3:Ge&&bn(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(Oe){to(d,d.return,Oe)}if(v=d.sibling,v!==null){v.return=d.return,yn=v;break}yn=d.return}return $=xp,xp=!1,$}function Io(d,v,$){var I=v.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var B=I=I.next;do{if((B.tag&d)===d){var W=B.destroy;B.destroy=void 0,W!==void 0&&_c(v,$,W)}B=B.next}while(B!==I)}}function ys(d,v){if(v=v.updateQueue,v=v!==null?v.lastEffect:null,v!==null){var $=v=v.next;do{if(($.tag&d)===d){var I=$.create;$.destroy=I()}$=$.next}while($!==v)}}function fl(d){var v=d.ref;if(v!==null){var $=d.stateNode;switch(d.tag){case 5:d=ge($);break;default:d=$}typeof v=="function"?v(d):v.current=d}}function as(d,v,$){if(bu&&typeof bu.onCommitFiberUnmount=="function")try{bu.onCommitFiberUnmount(ca,v)}catch{}switch(v.tag){case 0:case 11:case 14:case 15:if(d=v.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var I=d=d.next;do{var B=I,W=B.destroy;B=B.tag,W!==void 0&&(B&2||B&4)&&_c(v,$,W),I=I.next}while(I!==d)}break;case 1:if(dl(v,$),d=v.stateNode,typeof d.componentWillUnmount=="function")try{d.props=v.memoizedProps,d.state=v.memoizedState,d.componentWillUnmount()}catch(pe){to(v,$,pe)}break;case 5:dl(v,$);break;case 4:Ge?Kh(d,v,$):Ie&&Ie&&(v=v.stateNode.containerInfo,$=cr(v),_r(v,$))}}function pl(d,v,$){for(var I=v;;)if(as(d,I,$),I.child===null||Ge&&I.tag===4){if(I===v)break;for(;I.sibling===null;){if(I.return===null||I.return===v)return;I=I.return}I.sibling.return=I.return,I=I.sibling}else I.child.return=I,I=I.child}function Go(d){var v=d.alternate;v!==null&&(d.alternate=null,Go(v)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(v=d.stateNode,v!==null&&kt(v)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function Xh(d){return d.tag===5||d.tag===3||d.tag===4}function Va(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||Xh(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function Oi(d){if(Ge){e:{for(var v=d.return;v!==null;){if(Xh(v))break e;v=v.return}throw Error(l(160))}var $=v;switch($.tag){case 5:v=$.stateNode,$.flags&32&&(ze(v),$.flags&=-33),$=Va(d),Kc(d,$,v);break;case 3:case 4:v=$.stateNode.containerInfo,$=Va(d),Nd(d,$,v);break;default:throw Error(l(161))}}}function Nd(d,v,$){var I=d.tag;if(I===5||I===6)d=d.stateNode,v?Re($,d,v):Qe($,d);else if(I!==4&&(d=d.child,d!==null))for(Nd(d,v,$),d=d.sibling;d!==null;)Nd(d,v,$),d=d.sibling}function Kc(d,v,$){var I=d.tag;if(I===5||I===6)d=d.stateNode,v?me($,d,v):Ke($,d);else if(I!==4&&(d=d.child,d!==null))for(Kc(d,v,$),d=d.sibling;d!==null;)Kc(d,v,$),d=d.sibling}function Kh(d,v,$){for(var I=v,B=!1,W,pe;;){if(!B){B=I.return;e:for(;;){if(B===null)throw Error(l(160));switch(W=B.stateNode,B.tag){case 5:pe=!1;break e;case 3:W=W.containerInfo,pe=!0;break e;case 4:W=W.containerInfo,pe=!0;break e}B=B.return}B=!0}if(I.tag===5||I.tag===6)pl(d,I,$),pe?bt(W,I.stateNode):Fe(W,I.stateNode);else if(I.tag===18)pe?Ss(W,I.stateNode):Ar(W,I.stateNode);else if(I.tag===4){if(I.child!==null){W=I.stateNode.containerInfo,pe=!0,I.child.return=I,I=I.child;continue}}else if(as(d,I,$),I.child!==null){I.child.return=I,I=I.child;continue}if(I===v)break;for(;I.sibling===null;){if(I.return===null||I.return===v)return;I=I.return,I.tag===4&&(B=!1)}I.sibling.return=I.return,I=I.sibling}}function Wo(d,v){if(Ge){switch(v.tag){case 0:case 11:case 14:case 15:Io(3,v,v.return),ys(3,v),Io(5,v,v.return);return;case 1:return;case 5:var $=v.stateNode;if($!=null){var I=v.memoizedProps;d=d!==null?d.memoizedProps:I;var B=v.type,W=v.updateQueue;v.updateQueue=null,W!==null&&te($,W,B,d,I,v)}return;case 6:if(v.stateNode===null)throw Error(l(162));$=v.memoizedProps,Le(v.stateNode,d!==null?d.memoizedProps:$,$);return;case 3:He&&d!==null&&d.memoizedState.isDehydrated&&Ei(v.stateNode.containerInfo);return;case 12:return;case 13:Ro(v);return;case 19:Ro(v);return;case 17:return}throw Error(l(163))}switch(v.tag){case 0:case 11:case 14:case 15:Io(3,v,v.return),ys(3,v),Io(5,v,v.return);return;case 12:return;case 13:Ro(v);return;case 19:Ro(v);return;case 3:He&&d!==null&&d.memoizedState.isDehydrated&&Ei(v.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ie){switch(v.tag){case 1:case 5:case 6:break e;case 3:case 4:v=v.stateNode,_r(v.containerInfo,v.pendingChildren);break e}throw Error(l(163))}}function Ro(d){var v=d.updateQueue;if(v!==null){d.updateQueue=null;var $=d.stateNode;$===null&&($=d.stateNode=new Mn),v.forEach(function(I){var B=Ru.bind(null,d,I);$.has(I)||($.add(I),I.then(B,B))})}}function df(d,v){for(yn=v;yn!==null;){v=yn;var $=v.deletions;if($!==null)for(var I=0;I<$.length;I++){var B=$[I];try{var W=d;Ge?Kh(W,B,v):pl(W,B,v);var pe=B.alternate;pe!==null&&(pe.return=null),B.return=null}catch(on){to(B,v,on)}}if($=v.child,v.subtreeFlags&12854&&$!==null)$.return=v,yn=$;else for(;yn!==null;){v=yn;try{var Oe=v.flags;if(Oe&32&&Ge&&ze(v.stateNode),Oe&512){var tt=v.alternate;if(tt!==null){var xt=tt.ref;xt!==null&&(typeof xt=="function"?xt(null):xt.current=null)}}if(Oe&8192)switch(v.tag){case 13:if(v.memoizedState!==null){var Zt=v.alternate;(Zt===null||Zt.memoizedState===null)&&(_d=vs())}break;case 22:var cn=v.memoizedState!==null,Tn=v.alternate,Sn=Tn!==null&&Tn.memoizedState!==null;if($=v,Ge){e:if(I=$,B=cn,W=null,Ge)for(var gn=I;;){if(gn.tag===5){if(W===null){W=gn;var Ur=gn.stateNode;B?Pt(Ur):Gt(gn.stateNode,gn.memoizedProps)}}else if(gn.tag===6){if(W===null){var Et=gn.stateNode;B?lt(Et):Wt(Et,gn.memoizedProps)}}else if((gn.tag!==22&&gn.tag!==23||gn.memoizedState===null||gn===I)&&gn.child!==null){gn.child.return=gn,gn=gn.child;continue}if(gn===I)break;for(;gn.sibling===null;){if(gn.return===null||gn.return===I)break e;W===gn&&(W=null),gn=gn.return}W===gn&&(W=null),gn.sibling.return=gn.return,gn=gn.sibling}}if(cn&&!Sn&&$.mode&1){yn=$;for(var Ce=$.child;Ce!==null;){for($=yn=Ce;yn!==null;){I=yn;var Ne=I.child;switch(I.tag){case 0:case 11:case 14:case 15:Io(4,I,I.return);break;case 1:dl(I,I.return);var ot=I.stateNode;if(typeof ot.componentWillUnmount=="function"){var jt=I.return;try{ot.props=I.memoizedProps,ot.state=I.memoizedState,ot.componentWillUnmount()}catch(on){to(I,jt,on)}}break;case 5:dl(I,I.return);break;case 22:if(I.memoizedState!==null){yc($);continue}}Ne!==null?(Ne.return=I,yn=Ne):yc($)}Ce=Ce.sibling}}}switch(Oe&4102){case 2:Oi(v),v.flags&=-3;break;case 6:Oi(v),v.flags&=-3,Wo(v.alternate,v);break;case 4096:v.flags&=-4097;break;case 4100:v.flags&=-4097,Wo(v.alternate,v);break;case 4:Wo(v.alternate,v)}}catch(on){to(v,v.return,on)}if($=v.sibling,$!==null){$.return=v.return,yn=$;break}yn=v.return}}}function Mu(d,v,$){yn=d,Ll(d)}function Ll(d,v,$){for(var I=(d.mode&1)!==0;yn!==null;){var B=yn,W=B.child;if(B.tag===22&&I){var pe=B.memoizedState!==null||mo;if(!pe){var Oe=B.alternate,tt=Oe!==null&&Oe.memoizedState!==null||ya;Oe=mo;var xt=ya;if(mo=pe,(ya=tt)&&!xt)for(yn=B;yn!==null;)pe=yn,tt=pe.child,pe.tag===22&&pe.memoizedState!==null?qr(B):tt!==null?(tt.return=pe,yn=tt):qr(B);for(;W!==null;)yn=W,Ll(W),W=W.sibling;yn=B,mo=Oe,ya=xt}vd(d)}else B.subtreeFlags&8772&&W!==null?(W.return=B,yn=W):vd(d)}}function vd(d){for(;yn!==null;){var v=yn;if(v.flags&8772){var $=v.alternate;try{if(v.flags&8772)switch(v.tag){case 0:case 11:case 15:ya||ys(5,v);break;case 1:var I=v.stateNode;if(v.flags&4&&!ya)if($===null)I.componentDidMount();else{var B=v.elementType===v.type?$.memoizedProps:bi(v.type,$.memoizedProps);I.componentDidUpdate(B,$.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var W=v.updateQueue;W!==null&&fd(v,W,I);break;case 3:var pe=v.updateQueue;if(pe!==null){if($=null,v.child!==null)switch(v.child.tag){case 5:$=ge(v.child.stateNode);break;case 1:$=v.child.stateNode}fd(v,pe,$)}break;case 5:var Oe=v.stateNode;$===null&&v.flags&4&&Q(Oe,v.type,v.memoizedProps,v);break;case 6:break;case 4:break;case 12:break;case 13:if(He&&v.memoizedState===null){var tt=v.alternate;if(tt!==null){var xt=tt.memoizedState;if(xt!==null){var Zt=xt.dehydrated;Zt!==null&&Lr(Zt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(l(163))}ya||v.flags&512&&fl(v)}catch(cn){to(v,v.return,cn)}}if(v===d){yn=null;break}if($=v.sibling,$!==null){$.return=v.return,yn=$;break}yn=v.return}}function yc(d){for(;yn!==null;){var v=yn;if(v===d){yn=null;break}var $=v.sibling;if($!==null){$.return=v.return,yn=$;break}yn=v.return}}function qr(d){for(;yn!==null;){var v=yn;try{switch(v.tag){case 0:case 11:case 15:var $=v.return;try{ys(4,v)}catch(tt){to(v,$,tt)}break;case 1:var I=v.stateNode;if(typeof I.componentDidMount=="function"){var B=v.return;try{I.componentDidMount()}catch(tt){to(v,B,tt)}}var W=v.return;try{fl(v)}catch(tt){to(v,W,tt)}break;case 5:var pe=v.return;try{fl(v)}catch(tt){to(v,pe,tt)}}}catch(tt){to(v,v.return,tt)}if(v===d){yn=null;break}var Oe=v.sibling;if(Oe!==null){Oe.return=v.return,yn=Oe;break}yn=v.return}}var au=0,qu=1,ls=2,ja=3,$s=4;if(typeof Symbol=="function"&&Symbol.for){var Cs=Symbol.for;au=Cs("selector.component"),qu=Cs("selector.has_pseudo_class"),ls=Cs("selector.role"),ja=Cs("selector.test_id"),$s=Cs("selector.text")}function Jc(d){var v=it(d);if(v!=null){if(typeof v.memoizedProps["data-testname"]!="string")throw Error(l(364));return v}if(d=gt(d),d===null)throw Error(l(362));return d.stateNode.current}function vi(d,v){switch(v.$$typeof){case au:if(d.type===v.value)return!0;break;case qu:e:{v=v.value,d=[d,0];for(var $=0;$<d.length;){var I=d[$++],B=d[$++],W=v[B];if(I.tag!==5||!Be(I)){for(;W!=null&&vi(I,W);)B++,W=v[B];if(B===v.length){v=!0;break e}else for(I=I.child;I!==null;)d.push(I,B),I=I.sibling}}v=!1}return v;case ls:if(d.tag===5&&mt(d.stateNode,v.value))return!0;break;case $s:if((d.tag===5||d.tag===6)&&(d=re(d),d!==null&&0<=d.indexOf(v.value)))return!0;break;case ja:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===v.value.toLowerCase()))return!0;break;default:throw Error(l(365))}return!1}function Ya(d){switch(d.$$typeof){case au:return"<"+(V(d.value)||"Unknown")+">";case qu:return":has("+(Ya(d)||"")+")";case ls:return'[role="'+d.value+'"]';case $s:return'"'+d.value+'"';case ja:return'[data-testname="'+d.value+'"]';default:throw Error(l(365))}}function bc(d,v){var $=[];d=[d,0];for(var I=0;I<d.length;){var B=d[I++],W=d[I++],pe=v[W];if(B.tag!==5||!Be(B)){for(;pe!=null&&vi(B,pe);)W++,pe=v[W];if(W===v.length)$.push(B);else for(B=B.child;B!==null;)d.push(B,W),B=B.sibling}}return $}function ff(d,v){if(!Ct)throw Error(l(363));d=Jc(d),d=bc(d,v),v=[],d=Array.from(d);for(var $=0;$<d.length;){var I=d[$++];if(I.tag===5)Be(I)||v.push(I.stateNode);else for(I=I.child;I!==null;)d.push(I),I=I.sibling}return v}var xh=Math.ceil,ia=u.ReactCurrentDispatcher,Xi=u.ReactCurrentOwner,Pn=u.ReactCurrentBatchConfig,nr=0,zr=null,ri=null,Zr=0,ko=0,us=Pr(0),ts=0,lu=null,Qu=0,Tc=0,Zu=0,eo=null,go=null,_d=0,ba=1/0;function Au(){ba=vs()+500}var Iu=!1,vo=null,_o=null,Nl=!1,Vo=null,ec=0,tc=0,$h=null,Ch=-1,Br=0;function bs(){return nr&6?vs():Ch!==-1?Ch:Ch=vs()}function Os(d){return d.mode&1?nr&2&&Zr!==0?Zr&-Zr:Gu.transition!==null?(Br===0&&(d=Qo,Qo<<=1,!(Qo&4194240)&&(Qo=64),Br=d),Br):(d=Er,d!==0?d:It()):1}function Xa(d,v,$){if(50<tc)throw tc=0,$h=null,Error(l(185));var I=js(d,v);return I===null?null:($l(I,v,$),(!(nr&2)||I!==zr)&&(I===zr&&(!(nr&2)&&(Tc|=v),ts===4&&uu(I,Zr)),fn(I,$),v===1&&nr===0&&!(d.mode&1)&&(Au(),Hu&&ha())),I)}function js(d,v){d.lanes|=v;var $=d.alternate;for($!==null&&($.lanes|=v),$=d,d=d.return;d!==null;)d.childLanes|=v,$=d.alternate,$!==null&&($.childLanes|=v),$=d,d=d.return;return $.tag===3?$.stateNode:null}function fn(d,v){var $=d.callbackNode;Bc(d,v);var I=Pc(d,d===zr?Zr:0);if(I===0)$!==null&&il($),d.callbackNode=null,d.callbackPriority=0;else if(v=I&-I,d.callbackPriority!==v){if($!=null&&il($),v===1)d.tag===0?Pa(Dl.bind(null,d)):_h(Dl.bind(null,d)),vt?Mt(function(){nr===0&&ha()}):rl(sl,ha),$=null;else{switch(Jl(I)){case 1:$=sl;break;case 4:$=Cd;break;case 16:$=lo;break;case 536870912:$=Uu;break;default:$=lo}$=wc($,qc.bind(null,d))}d.callbackPriority=v,d.callbackNode=$}}function qc(d,v){if(Ch=-1,Br=0,nr&6)throw Error(l(327));var $=d.callbackNode;if(rc()&&d.callbackNode!==$)return null;var I=Pc(d,d===zr?Zr:0);if(I===0)return null;if(I&30||I&d.expiredLanes||v)v=ai(d,I);else{v=I;var B=nr;nr|=2;var W=Jh();(zr!==d||Zr!==v)&&(Au(),Kr(d,v));do try{Zc();break}catch(Oe){nc(d,Oe)}while(!0);Ao(),ia.current=W,nr=B,ri!==null?v=0:(zr=null,Zr=0,v=ts)}if(v!==0){if(v===2&&(B=xl(d),B!==0&&(I=B,v=En(d,B))),v===1)throw $=lu,Kr(d,0),uu(d,I),fn(d,vs()),$;if(v===6)uu(d,I);else{if(B=d.current.alternate,!(I&30)&&!Ms(B)&&(v=ai(d,I),v===2&&(W=xl(d),W!==0&&(I=W,v=En(d,W))),v===1))throw $=lu,Kr(d,0),uu(d,I),fn(d,vs()),$;switch(d.finishedWork=B,d.finishedLanes=I,v){case 0:case 1:throw Error(l(345));case 2:eh(d,go);break;case 3:if(uu(d,I),(I&130023424)===I&&(v=_d+500-vs(),10<v)){if(Pc(d,0)!==0)break;if(B=d.suspendedLanes,(B&I)!==I){bs(),d.pingedLanes|=d.suspendedLanes&B;break}d.timeoutHandle=Ze(eh.bind(null,d,go),v);break}eh(d,go);break;case 4:if(uu(d,I),(I&4194240)===I)break;for(v=d.eventTimes,B=-1;0<I;){var pe=31-qo(I);W=1<<pe,pe=v[pe],pe>B&&(B=pe),I&=~W}if(I=B,I=vs()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*xh(I/1960))-I,10<I){d.timeoutHandle=Ze(eh.bind(null,d,go),I);break}eh(d,go);break;case 5:eh(d,go);break;default:throw Error(l(329))}}}return fn(d,vs()),d.callbackNode===$?qc.bind(null,d):null}function En(d,v){var $=eo;return d.current.memoizedState.isDehydrated&&(Kr(d,v).flags|=256),d=ai(d,v),d!==2&&(v=go,go=$,v!==null&&_i(v)),d}function _i(d){go===null?go=d:go.push.apply(go,d)}function Ms(d){for(var v=d;;){if(v.flags&16384){var $=v.updateQueue;if($!==null&&($=$.stores,$!==null))for(var I=0;I<$.length;I++){var B=$[I],W=B.getSnapshot;B=B.value;try{if(!Es(W(),B))return!1}catch{return!1}}}if($=v.child,v.subtreeFlags&16384&&$!==null)$.return=v,v=$;else{if(v===d)break;for(;v.sibling===null;){if(v.return===null||v.return===d)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function uu(d,v){for(v&=~Zu,v&=~Tc,d.suspendedLanes|=v,d.pingedLanes&=~v,d=d.expirationTimes;0<v;){var $=31-qo(v),I=1<<$;d[$]=-1,v&=~I}}function Dl(d){if(nr&6)throw Error(l(327));rc();var v=Pc(d,0);if(!(v&1))return fn(d,vs()),null;var $=ai(d,v);if(d.tag!==0&&$===2){var I=xl(d);I!==0&&(v=I,$=En(d,I))}if($===1)throw $=lu,Kr(d,0),uu(d,v),fn(d,vs()),$;if($===6)throw Error(l(345));return d.finishedWork=d.current.alternate,d.finishedLanes=v,eh(d,go),fn(d,vs()),null}function Ut(d){Vo!==null&&Vo.tag===0&&!(nr&6)&&rc();var v=nr;nr|=1;var $=Pn.transition,I=Er;try{if(Pn.transition=null,Er=1,d)return d()}finally{Er=I,Pn.transition=$,nr=v,!(nr&6)&&ha()}}function ml(){ko=us.current,In(us)}function Kr(d,v){d.finishedWork=null,d.finishedLanes=0;var $=d.timeoutHandle;if($!==ft&&(d.timeoutHandle=ft,et($)),ri!==null)for($=ri.return;$!==null;){var I=$;switch(Yr(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&nl();break;case 3:Th(),In(Bi),In(Sr),Nt();break;case 5:pi(I);break;case 4:Th();break;case 13:In(ye);break;case 19:In(ye);break;case 10:ol(I.type._context);break;case 22:case 23:ml()}$=$.return}if(zr=d,ri=d=So(d.current,null),Zr=ko=v,ts=0,lu=null,Zu=Tc=Qu=0,go=eo=null,Ai!==null){for(v=0;v<Ai.length;v++)if($=Ai[v],I=$.interleaved,I!==null){$.interleaved=null;var B=I.next,W=$.pending;if(W!==null){var pe=W.next;W.next=B,I.next=pe}$.pending=I}Ai=null}return d}function nc(d,v){do{var $=ri;try{if(Ao(),sn.current=Ku,Ti){for(var I=_n.memoizedState;I!==null;){var B=I.queue;B!==null&&(B.pending=null),I=I.next}Ti=!1}if(Jn=0,ho=Gr=_n=null,fo=!1,ll=0,Xi.current=null,$===null||$.return===null){ts=1,lu=v,ri=null;break}e:{var W=d,pe=$.return,Oe=$,tt=v;if(v=Zr,Oe.flags|=32768,tt!==null&&typeof tt=="object"&&typeof tt.then=="function"){var xt=tt,Zt=Oe,cn=Zt.tag;if(!(Zt.mode&1)&&(cn===0||cn===11||cn===15)){var Tn=Zt.alternate;Tn?(Zt.updateQueue=Tn.updateQueue,Zt.memoizedState=Tn.memoizedState,Zt.lanes=Tn.lanes):(Zt.updateQueue=null,Zt.memoizedState=null)}var Sn=kd(pe);if(Sn!==null){Sn.flags&=-257,Wa(Sn,pe,Oe,W,v),Sn.mode&1&&vc(W,xt,v),v=Sn,tt=xt;var gn=v.updateQueue;if(gn===null){var Ur=new Set;Ur.add(tt),v.updateQueue=Ur}else gn.add(tt);break e}else{if(!(v&1)){vc(W,xt,v),Qc();break e}tt=Error(l(426))}}else if(Yi&&Oe.mode&1){var Et=kd(pe);if(Et!==null){!(Et.flags&65536)&&(Et.flags|=256),Wa(Et,pe,Oe,W,v),ju(tt);break e}}W=tt,ts!==4&&(ts=2),eo===null?eo=[W]:eo.push(W),tt=na(tt,Oe),Oe=pe;do{switch(Oe.tag){case 3:Oe.flags|=65536,v&=-v,Oe.lanes|=v;var Ce=Ol(Oe,tt,v);pr(Oe,Ce);break e;case 1:W=tt;var Ne=Oe.type,ot=Oe.stateNode;if(!(Oe.flags&128)&&(typeof Ne.getDerivedStateFromError=="function"||ot!==null&&typeof ot.componentDidCatch=="function"&&(_o===null||!_o.has(ot)))){Oe.flags|=65536,v&=-v,Oe.lanes|=v;var jt=jc(Oe,W,v);pr(Oe,jt);break e}}Oe=Oe.return}while(Oe!==null)}gl($)}catch(on){v=on,ri===$&&$!==null&&(ri=$=$.return);continue}break}while(!0)}function Jh(){var d=ia.current;return ia.current=Ku,d===null?Ku:d}function Qc(){(ts===0||ts===3||ts===2)&&(ts=4),zr===null||!(Qu&268435455)&&!(Tc&268435455)||uu(zr,Zr)}function ai(d,v){var $=nr;nr|=2;var I=Jh();zr===d&&Zr===v||Kr(d,v);do try{Ki();break}catch(B){nc(d,B)}while(!0);if(Ao(),nr=$,ia.current=I,ri!==null)throw Error(l(261));return zr=null,Zr=0,ts}function Ki(){for(;ri!==null;)yo(ri)}function Zc(){for(;ri!==null&&!yu();)yo(ri)}function yo(d){var v=th(d.alternate,d,ko);d.memoizedProps=d.pendingProps,v===null?gl(d):ri=v,Xi.current=null}function gl(d){var v=d;do{var $=v.alternate;if(d=v.return,v.flags&32768){if($=Eh($,v),$!==null){$.flags&=32767,ri=$;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{ts=6,ri=null;return}}else if($=Uf($,v,ko),$!==null){ri=$;return}if(v=v.sibling,v!==null){ri=v;return}ri=v=d}while(v!==null);ts===0&&(ts=5)}function eh(d,v){var $=Er,I=Pn.transition;try{Pn.transition=null,Er=1,Sc(d,v,$)}finally{Pn.transition=I,Er=$}return null}function Sc(d,v,$){do rc();while(Vo!==null);if(nr&6)throw Error(l(327));var I=d.finishedWork,B=d.finishedLanes;if(I===null)return null;if(d.finishedWork=null,d.finishedLanes=0,I===d.current)throw Error(l(177));d.callbackNode=null,d.callbackPriority=0;var W=I.lanes|I.childLanes;if(Cl(d,W),d===zr&&(ri=zr=null,Zr=0),!(I.subtreeFlags&2064)&&!(I.flags&2064)||Nl||(Nl=!0,wc(lo,function(){return rc(),null})),W=(I.flags&15990)!==0,I.subtreeFlags&15990||W){W=Pn.transition,Pn.transition=null;var pe=Er;Er=1;var Oe=nr;nr|=4,Xi.current=null,ou(d,I),df(d,I),se(d.containerInfo),d.current=I,Mu(I),Qi(),nr=Oe,Er=pe,Pn.transition=W}else d.current=I;if(Nl&&(Nl=!1,Vo=d,ec=B),W=d.pendingLanes,W===0&&(_o=null),lr(I.stateNode),fn(d,vs()),v!==null)for($=d.onRecoverableError,I=0;I<v.length;I++)$(v[I]);if(Iu)throw Iu=!1,d=vo,vo=null,d;return ec&1&&d.tag!==0&&rc(),W=d.pendingLanes,W&1?d===$h?tc++:(tc=0,$h=d):tc=0,ha(),null}function rc(){if(Vo!==null){var d=Jl(ec),v=Pn.transition,$=Er;try{if(Pn.transition=null,Er=16>d?16:d,Vo===null)var I=!1;else{if(d=Vo,Vo=null,ec=0,nr&6)throw Error(l(331));var B=nr;for(nr|=4,yn=d.current;yn!==null;){var W=yn,pe=W.child;if(yn.flags&16){var Oe=W.deletions;if(Oe!==null){for(var tt=0;tt<Oe.length;tt++){var xt=Oe[tt];for(yn=xt;yn!==null;){var Zt=yn;switch(Zt.tag){case 0:case 11:case 15:Io(8,Zt,W)}var cn=Zt.child;if(cn!==null)cn.return=Zt,yn=cn;else for(;yn!==null;){Zt=yn;var Tn=Zt.sibling,Sn=Zt.return;if(Go(Zt),Zt===xt){yn=null;break}if(Tn!==null){Tn.return=Sn,yn=Tn;break}yn=Sn}}}var gn=W.alternate;if(gn!==null){var Ur=gn.child;if(Ur!==null){gn.child=null;do{var Et=Ur.sibling;Ur.sibling=null,Ur=Et}while(Ur!==null)}}yn=W}}if(W.subtreeFlags&2064&&pe!==null)pe.return=W,yn=pe;else e:for(;yn!==null;){if(W=yn,W.flags&2048)switch(W.tag){case 0:case 11:case 15:Io(9,W,W.return)}var Ce=W.sibling;if(Ce!==null){Ce.return=W.return,yn=Ce;break e}yn=W.return}}var Ne=d.current;for(yn=Ne;yn!==null;){pe=yn;var ot=pe.child;if(pe.subtreeFlags&2064&&ot!==null)ot.return=pe,yn=ot;else e:for(pe=Ne;yn!==null;){if(Oe=yn,Oe.flags&2048)try{switch(Oe.tag){case 0:case 11:case 15:ys(9,Oe)}}catch(on){to(Oe,Oe.return,on)}if(Oe===pe){yn=null;break e}var jt=Oe.sibling;if(jt!==null){jt.return=Oe.return,yn=jt;break e}yn=Oe.return}}if(nr=B,ha(),bu&&typeof bu.onPostCommitFiberRoot=="function")try{bu.onPostCommitFiberRoot(ca,d)}catch{}I=!0}return I}finally{Er=$,Pn.transition=v}}return!1}function Oo(d,v,$){v=na($,v),v=Ol(d,v,1),Ba(d,v),v=bs(),d=js(d,1),d!==null&&($l(d,1,v),fn(d,v))}function to(d,v,$){if(d.tag===3)Oo(d,d,$);else for(;v!==null;){if(v.tag===3){Oo(v,d,$);break}else if(v.tag===1){var I=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(_o===null||!_o.has(I))){d=na($,d),d=jc(v,d,1),Ba(v,d),d=bs(),v=js(v,1),v!==null&&($l(v,1,d),fn(v,d));break}}v=v.return}}function sa(d,v,$){var I=d.pingCache;I!==null&&I.delete(v),v=bs(),d.pingedLanes|=d.suspendedLanes&$,zr===d&&(Zr&$)===$&&(ts===4||ts===3&&(Zr&130023424)===Zr&&500>vs()-_d?Kr(d,0):Zu|=$),fn(d,v)}function Mh(d,v){v===0&&(d.mode&1?(v=Tr,Tr<<=1,!(Tr&130023424)&&(Tr=4194304)):v=1);var $=bs();d=js(d,v),d!==null&&($l(d,v,$),fn(d,$))}function bo(d){var v=d.memoizedState,$=0;v!==null&&($=v.retryLane),Mh(d,$)}function Ru(d,v){var $=0;switch(d.tag){case 13:var I=d.stateNode,B=d.memoizedState;B!==null&&($=B.retryLane);break;case 19:I=d.stateNode;break;default:throw Error(l(314))}I!==null&&I.delete(v),Mh(d,$)}var th;th=function(d,v,$){if(d!==null)if(d.memoizedProps!==v.pendingProps||Bi.current)ki=!0;else{if(!(d.lanes&$)&&!(v.flags&128))return ki=!1,Hf(d,v,$);ki=!!(d.flags&131072)}else ki=!1,Yi&&v.flags&1048576&&Zl(v,Fa,v.index);switch(v.lanes=0,v.tag){case 2:var I=v.type;d!==null&&(d.alternate=null,v.alternate=null,v.flags|=2),d=v.pendingProps;var B=fi(v,Sr.current);Mi(v,$),B=qn(null,v,I,d,B,$);var W=pa();return v.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(v.tag=1,v.memoizedState=null,v.updateQueue=null,gs(I)?(W=!0,pc(v)):W=!1,v.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,dd(v),B.updater=uf,v.stateNode=B,B._reactInternals=v,ql(v,I,d,$),v=ra(null,v,I,!0,W,$)):(v.tag=0,Yi&&W&&Fh(v),hi(null,v,B,$),v=v.child),v;case 16:I=v.elementType;e:{switch(d!==null&&(d.alternate=null,v.alternate=null,v.flags|=2),d=v.pendingProps,B=I._init,I=B(I._payload),v.type=I,B=v.tag=Pl(I),d=bi(I,d),B){case 0:v=os(null,v,I,d,$);break e;case 1:v=Xc(null,v,I,d,$);break e;case 11:v=es(null,v,I,d,$);break e;case 14:v=ss(null,v,I,bi(I.type,d),$);break e}throw Error(l(306,I,""))}return v;case 0:return I=v.type,B=v.pendingProps,B=v.elementType===I?B:bi(I,B),os(d,v,I,B,$);case 1:return I=v.type,B=v.pendingProps,B=v.elementType===I?B:bi(I,B),Xc(d,v,I,B,$);case 3:e:{if(Od(v),d===null)throw Error(l(387));I=v.pendingProps,W=v.memoizedState,B=W.element,Eu(d,v),Zo(v,I,null,$);var pe=v.memoizedState;if(I=pe.element,He&&W.isDehydrated)if(W={element:I,isDehydrated:!1,cache:pe.cache,transitions:pe.transitions},v.updateQueue.baseState=W,v.memoizedState=W,v.flags&256){B=Error(l(423)),v=Ld(d,v,I,$,B);break e}else if(I!==B){B=Error(l(424)),v=Ld(d,v,I,$,B);break e}else for(He&&(xr=St(v.stateNode.containerInfo),Ii=v,Yi=!0,xu=null,fa=!1),$=Hc(v,null,I,$),v.child=$;$;)$.flags=$.flags&-3|4096,$=$.sibling;else{if(zh(),I===B){v=gi(d,v,$);break e}hi(d,v,I,$)}v=v.child}return v;case 5:return Ad(v),d===null&&Vu(v),I=v.type,B=v.pendingProps,W=d!==null?d.memoizedProps:null,pe=B.children,qe(I,B)?pe=null:W!==null&&qe(I,W)&&(v.flags|=32),_a(d,v),hi(d,v,pe,$),v.child;case 6:return d===null&&Vu(v),null;case 13:return Kn(d,v,$);case 4:return $u(v,v.stateNode.containerInfo),I=v.pendingProps,d===null?v.child=Uc(v,null,I,$):hi(d,v,I,$),v.child;case 11:return I=v.type,B=v.pendingProps,B=v.elementType===I?B:bi(I,B),es(d,v,I,B,$);case 7:return hi(d,v,v.pendingProps,$),v.child;case 8:return hi(d,v,v.pendingProps.children,$),v.child;case 12:return hi(d,v,v.pendingProps.children,$),v.child;case 10:e:{if(I=v.type._context,B=v.pendingProps,W=v.memoizedProps,pe=B.value,wu(v,I,pe),W!==null)if(Es(W.value,pe)){if(W.children===B.children&&!Bi.current){v=gi(d,v,$);break e}}else for(W=v.child,W!==null&&(W.return=v);W!==null;){var Oe=W.dependencies;if(Oe!==null){pe=W.child;for(var tt=Oe.firstContext;tt!==null;){if(tt.context===I){if(W.tag===1){tt=ji(-1,$&-$),tt.tag=2;var xt=W.updateQueue;if(xt!==null){xt=xt.shared;var Zt=xt.pending;Zt===null?tt.next=tt:(tt.next=Zt.next,Zt.next=tt),xt.pending=tt}}W.lanes|=$,tt=W.alternate,tt!==null&&(tt.lanes|=$),Fi(W.return,$,v),Oe.lanes|=$;break}tt=tt.next}}else if(W.tag===10)pe=W.type===v.type?null:W.child;else if(W.tag===18){if(pe=W.return,pe===null)throw Error(l(341));pe.lanes|=$,Oe=pe.alternate,Oe!==null&&(Oe.lanes|=$),Fi(pe,$,v),pe=W.sibling}else pe=W.child;if(pe!==null)pe.return=W;else for(pe=W;pe!==null;){if(pe===v){pe=null;break}if(W=pe.sibling,W!==null){W.return=pe.return,pe=W;break}pe=pe.return}W=pe}hi(d,v,B.children,$),v=v.child}return v;case 9:return B=v.type,I=v.pendingProps.children,Mi(v,$),B=Vn(B),I=I(B),v.flags|=1,hi(d,v,I,$),v.child;case 14:return I=v.type,B=bi(I,v.pendingProps),B=bi(I.type,B),ss(d,v,I,B,$);case 15:return Yc(d,v,v.type,v.pendingProps,$);case 17:return I=v.type,B=v.pendingProps,B=v.elementType===I?B:bi(I,B),d!==null&&(d.alternate=null,v.alternate=null,v.flags|=2),v.tag=1,gs(I)?(d=!0,pc(v)):d=!1,Mi(v,$),wp(v,I,B),ql(v,I,B,$),ra(null,v,I,!0,d,$);case 19:return mi(d,v,$);case 22:return va(d,v,$)}throw Error(l(156,v.tag))};function wc(d,v){return rl(d,v)}function jo(d,v,$,I){this.tag=d,this.key=$,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function To(d,v,$,I){return new jo(d,v,$,I)}function ic(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Pl(d){if(typeof d=="function")return ic(d)?1:0;if(d!=null){if(d=d.$$typeof,d===M)return 11;if(d===O)return 14}return 2}function So(d,v){var $=d.alternate;return $===null?($=To(d.tag,v,d.key,d.mode),$.elementType=d.elementType,$.type=d.type,$.stateNode=d.stateNode,$.alternate=d,d.alternate=$):($.pendingProps=v,$.type=d.type,$.flags=0,$.subtreeFlags=0,$.deletions=null),$.flags=d.flags&14680064,$.childLanes=d.childLanes,$.lanes=d.lanes,$.child=d.child,$.memoizedProps=d.memoizedProps,$.memoizedState=d.memoizedState,$.updateQueue=d.updateQueue,v=d.dependencies,$.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},$.sibling=d.sibling,$.index=d.index,$.ref=d.ref,$}function Bl(d,v,$,I,B,W){var pe=2;if(I=d,typeof d=="function")ic(d)&&(pe=1);else if(typeof d=="string")pe=5;else e:switch(d){case g:return Ka($.children,B,W,v);case y:pe=8,B|=8;break;case b:return d=To(12,$,v,B|2),d.elementType=b,d.lanes=W,d;case A:return d=To(13,$,v,B),d.elementType=A,d.lanes=W,d;case k:return d=To(19,$,v,B),d.elementType=k,d.lanes=W,d;case D:return cu($,B,W,v);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case S:pe=10;break e;case C:pe=9;break e;case M:pe=11;break e;case O:pe=14;break e;case P:pe=16,I=null;break e}throw Error(l(130,d==null?d:typeof d,""))}return v=To(pe,$,v,B),v.elementType=d,v.type=I,v.lanes=W,v}function Ka(d,v,$,I){return d=To(7,d,I,v),d.lanes=$,d}function cu(d,v,$,I){return d=To(22,d,I,v),d.elementType=D,d.lanes=$,d.stateNode={},d}function ii(d,v,$){return d=To(6,d,null,v),d.lanes=$,d}function cs(d,v,$){return v=To(4,d.children!==null?d.children:[],d.key,v),v.lanes=$,v.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},v}function qh(d,v,$,I,B){this.tag=v,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ft,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_u(0),this.expirationTimes=_u(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_u(0),this.identifierPrefix=I,this.onRecoverableError=B,He&&(this.mutableSourceEagerHydrationData=null)}function yd(d,v,$,I,B,W,pe,Oe,tt){return d=new qh(d,v,$,Oe,tt),v===1?(v=1,W===!0&&(v|=8)):v=0,W=To(3,null,null,v),d.current=W,W.stateNode=d,W.memoizedState={element:I,isDehydrated:$,cache:null,transitions:null},dd(W),d}function Ta(d){if(!d)return jr;d=d._reactInternals;e:{if(Z(d)!==d||d.tag!==1)throw Error(l(170));var v=d;do{switch(v.tag){case 3:v=v.stateNode.context;break e;case 1:if(gs(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break e}}v=v.return}while(v!==null);throw Error(l(171))}if(d.tag===1){var $=d.type;if(gs($))return fc(d,$,v)}return v}function Sa(d){var v=d._reactInternals;if(v===void 0)throw typeof d.render=="function"?Error(l(188)):(d=Object.keys(d).join(","),Error(l(268,d)));return d=q(v),d===null?null:d.stateNode}function Qh(d,v){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var $=d.retryLane;d.retryLane=$!==0&&$<v?$:v}}function Ec(d,v){Qh(d,v),(d=d.alternate)&&Qh(d,v)}function Gf(d){return d=q(d),d===null?null:d.stateNode}function x(){return null}return t.attemptContinuousHydration=function(d){if(d.tag===13){var v=bs();Xa(d,134217728,v),Ec(d,134217728)}},t.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var v=bs(),$=Os(d);Xa(d,$,v),Ec(d,$)}},t.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var v=d.stateNode;if(v.current.memoizedState.isDehydrated){var $=$i(v.pendingLanes);$!==0&&(wr(v,$|1),fn(v,vs()),!(nr&6)&&(Au(),ha()))}break;case 13:var I=bs();Ut(function(){return Xa(d,1,I)}),Ec(d,1)}},t.batchedUpdates=function(d,v){var $=nr;nr|=1;try{return d(v)}finally{nr=$,nr===0&&(Au(),Hu&&ha())}},t.createComponentSelector=function(d){return{$$typeof:au,value:d}},t.createContainer=function(d,v,$,I,B,W,pe){return yd(d,v,!1,null,$,I,B,W,pe)},t.createHasPseudoClassSelector=function(d){return{$$typeof:qu,value:d}},t.createHydrationContainer=function(d,v,$,I,B,W,pe,Oe,tt){return d=yd($,I,!0,d,B,W,pe,Oe,tt),d.context=Ta(null),$=d.current,I=bs(),B=Os($),W=ji(I,B),W.callback=v??null,Ba($,W),d.current.lanes=B,$l(d,B,I),fn(d,I),d},t.createPortal=function(d,v,$){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:I==null?null:""+I,children:d,containerInfo:v,implementation:$}},t.createRoleSelector=function(d){return{$$typeof:ls,value:d}},t.createTestNameSelector=function(d){return{$$typeof:ja,value:d}},t.createTextSelector=function(d){return{$$typeof:$s,value:d}},t.deferredUpdates=function(d){var v=Er,$=Pn.transition;try{return Pn.transition=null,Er=16,d()}finally{Er=v,Pn.transition=$}},t.discreteUpdates=function(d,v,$,I,B){var W=Er,pe=Pn.transition;try{return Pn.transition=null,Er=1,d(v,$,I,B)}finally{Er=W,Pn.transition=pe,nr===0&&Au()}},t.findAllNodes=ff,t.findBoundingRects=function(d,v){if(!Ct)throw Error(l(363));v=ff(d,v),d=[];for(var $=0;$<v.length;$++)d.push(Ee(v[$]));for(v=d.length-1;0<v;v--){$=d[v];for(var I=$.x,B=I+$.width,W=$.y,pe=W+$.height,Oe=v-1;0<=Oe;Oe--)if(v!==Oe){var tt=d[Oe],xt=tt.x,Zt=xt+tt.width,cn=tt.y,Tn=cn+tt.height;if(I>=xt&&W>=cn&&B<=Zt&&pe<=Tn){d.splice(v,1);break}else if(I!==xt||$.width!==tt.width||Tn<W||cn>pe){if(!(W!==cn||$.height!==tt.height||Zt<I||xt>B)){xt>I&&(tt.width+=xt-I,tt.x=I),Zt<B&&(tt.width=B-xt),d.splice(v,1);break}}else{cn>W&&(tt.height+=cn-W,tt.y=W),Tn<pe&&(tt.height=pe-cn),d.splice(v,1);break}}}return d},t.findHostInstance=Sa,t.findHostInstanceWithNoPortals=function(d){return d=ue(d),d=d!==null?le(d):null,d===null?null:d.stateNode},t.findHostInstanceWithWarning=function(d){return Sa(d)},t.flushControlled=function(d){var v=nr;nr|=1;var $=Pn.transition,I=Er;try{Pn.transition=null,Er=1,d()}finally{Er=I,Pn.transition=$,nr=v,nr===0&&(Au(),ha())}},t.flushPassiveEffects=rc,t.flushSync=Ut,t.focusWithin=function(d,v){if(!Ct)throw Error(l(363));for(d=Jc(d),v=bc(d,v),v=Array.from(v),d=0;d<v.length;){var $=v[d++];if(!Be($)){if($.tag===5&&yt($.stateNode))return!0;for($=$.child;$!==null;)v.push($),$=$.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Er},t.getFindAllNodesFailureDescription=function(d,v){if(!Ct)throw Error(l(363));var $=0,I=[];d=[Jc(d),0];for(var B=0;B<d.length;){var W=d[B++],pe=d[B++],Oe=v[pe];if((W.tag!==5||!Be(W))&&(vi(W,Oe)&&(I.push(Ya(Oe)),pe++,pe>$&&($=pe)),pe<v.length))for(W=W.child;W!==null;)d.push(W,pe),W=W.sibling}if($<v.length){for(d=[];$<v.length;$++)d.push(Ya(v[$]));return`findAllNodes was able to match part of the selector:
  `+(I.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},t.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return ge(d.child.stateNode);default:return d.child.stateNode}},t.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:Gf,findFiberByHostInstance:d.findFiberByHostInstance||x,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var v=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(v.isDisabled||!v.supportsFiber)d=!0;else{try{ca=v.inject(d),bu=v}catch{}d=!!v.checkDCE}}return d},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(d,v,$,I){if(!Ct)throw Error(l(363));d=ff(d,v);var B=wt(d,$,I).disconnect;return{disconnect:function(){B()}}},t.registerMutableSourceForHydration=function(d,v){var $=v._getVersion;$=$(v._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[v,$]:d.mutableSourceEagerHydrationData.push(v,$)},t.runWithPriority=function(d,v){var $=Er;try{return Er=d,v()}finally{Er=$}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(d,v,$,I){var B=v.current,W=bs(),pe=Os(B);return $=Ta($),v.context===null?v.context=$:v.pendingContext=$,v=ji(W,pe),v.payload={element:d},I=I===void 0?null:I,I!==null&&(v.callback=I),Ba(B,v),d=Xa(B,pe,W),d!==null&&yh(d,B,pe),pe},t};mJ.exports=dbe;var fbe=mJ.exports;const pbe=Jy(fbe);var gJ={exports:{}},vJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(K,ie){var se=K.length;K.push(ie);e:for(;0<se;){var fe=se-1>>>1,Se=K[fe];if(0<s(Se,ie))K[fe]=ie,K[se]=Se,se=fe;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ie=K[0],se=K.pop();if(se!==ie){K[0]=se;e:for(var fe=0,Se=K.length,Ue=Se>>>1;fe<Ue;){var ke=2*(fe+1)-1,qe=K[ke],we=ke+1,Ze=K[we];if(0>s(qe,se))we<Se&&0>s(Ze,qe)?(K[fe]=Ze,K[we]=se,fe=we):(K[fe]=qe,K[ke]=se,fe=ke);else if(we<Se&&0>s(Ze,se))K[fe]=Ze,K[we]=se,fe=we;else break e}}return ie}function s(K,ie){var se=K.sortIndex-ie.sortIndex;return se!==0?se:K.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],f=[],g=1,y=null,b=3,S=!1,C=!1,M=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(K){for(var ie=t(f);ie!==null;){if(ie.callback===null)r(f);else if(ie.startTime<=K)r(f),ie.sortIndex=ie.expirationTime,e(h,ie);else break;ie=t(f)}}function D(K){if(M=!1,P(K),!C)if(t(h)!==null)C=!0,ge(U);else{var ie=t(f);ie!==null&&$e(D,ie.startTime-K)}}function U(K,ie){C=!1,M&&(M=!1,k(z),z=-1),S=!0;var se=b;try{for(P(ie),y=t(h);y!==null&&(!(y.expirationTime>ie)||K&&!ue());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,b=y.priorityLevel;var Se=fe(y.expirationTime<=ie);ie=n.unstable_now(),typeof Se=="function"?y.callback=Se:y===t(h)&&r(h),P(ie)}else r(h);y=t(h)}if(y!==null)var Ue=!0;else{var ke=t(f);ke!==null&&$e(D,ke.startTime-ie),Ue=!1}return Ue}finally{y=null,b=se,S=!1}}var H=!1,V=null,z=-1,Z=5,oe=-1;function ue(){return!(n.unstable_now()-oe<Z)}function q(){if(V!==null){var K=n.unstable_now();oe=K;var ie=!0;try{ie=V(!0,K)}finally{ie?ae():(H=!1,V=null)}}else H=!1}var ae;if(typeof O=="function")ae=function(){O(q)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ce=le.port2;le.port1.onmessage=q,ae=function(){ce.postMessage(null)}}else ae=function(){A(q,0)};function ge(K){V=K,H||(H=!0,ae())}function $e(K,ie){z=A(function(){K(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_continueExecution=function(){C||S||(C=!0,ge(U))},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(K){switch(b){case 1:case 2:case 3:var ie=3;break;default:ie=b}var se=b;b=ie;try{return K()}finally{b=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(K,ie){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var se=b;b=K;try{return ie()}finally{b=se}},n.unstable_scheduleCallback=function(K,ie,se){var fe=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?fe+se:fe):se=fe,K){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=se+Se,K={id:g++,callback:ie,priorityLevel:K,startTime:se,expirationTime:Se,sortIndex:-1},se>fe?(K.sortIndex=se,e(f,K),t(h)===null&&K===t(f)&&(M?(k(z),z=-1):M=!0,$e(D,se-fe))):(K.sortIndex=Se,e(h,K),C||S||(C=!0,ge(U))),K},n.unstable_shouldYield=ue,n.unstable_wrapCallback=function(K){var ie=b;return function(){var se=b;b=ie;try{return K.apply(this,arguments)}finally{b=se}}}})(vJ);gJ.exports=vJ;var _G=gJ.exports;const mbe=n=>typeof n=="object"&&typeof n.then=="function",$1=[];function _J(n,e,t=(r,s)=>r===s){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let s=0;s<r;s++)if(!t(n[s],e[s]))return!1;return!0}function yJ(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const o of $1)if(_J(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return r.lifespan&&r.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,r.lifespan)),o.response;if(!t)throw o.promise}const s={keys:e,equal:r.equal,remove:()=>{const o=$1.indexOf(s);o!==-1&&$1.splice(o,1)},promise:(mbe(n)?n:n(...e)).then(o=>{s.response=o,r.lifespan&&r.lifespan>0&&(s.timeout=setTimeout(s.remove,r.lifespan))}).catch(o=>s.error=o)};if($1.push(s),!t)throw s.promise}const gbe=(n,e,t)=>yJ(n,e,!1,t),vbe=(n,e,t)=>void yJ(n,e,!0,t),_be=n=>{if(n===void 0||n.length===0)$1.splice(0,$1.length);else{const e=$1.find(t=>_J(n,t.keys,t.equal));e&&e.remove()}},bJ={};function ybe(n,e){function t(g,{args:y=[],attach:b,...S},C){let M=`${g[0].toUpperCase()}${g.slice(1)}`,A;if(g==="primitive"){if(S.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const k=S.object;A=lx(k,{type:g,root:C,attach:b,primitive:!0})}else{const k=bJ[M];if(!k)throw new Error(`R3F: ${M} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(y))throw new Error("R3F: The args prop must be an array!");A=lx(new k(...y),{type:g,root:C,attach:b,memoizedProps:{args:y}})}return A.__r3f.attach===void 0&&(A instanceof tb?A.__r3f.attach="geometry":A instanceof zy&&(A.__r3f.attach="material")),M!=="inject"&&vL(A,S),A}function r(g,y){let b=!1;if(y){var S,C;(S=y.__r3f)!=null&&S.attach?gL(g,y,y.__r3f.attach):y.isObject3D&&g.isObject3D&&(g.add(y),b=!0),b||(C=g.__r3f)==null||C.objects.push(y),y.__r3f||lx(y,{}),y.__r3f.parent=g,aP(y),FS(y)}}function s(g,y,b){let S=!1;if(y){var C,M;if((C=y.__r3f)!=null&&C.attach)gL(g,y,y.__r3f.attach);else if(y.isObject3D&&g.isObject3D){y.parent=g,y.dispatchEvent({type:"added"}),g.dispatchEvent({type:"childadded",child:y});const A=g.children.filter(O=>O!==y),k=A.indexOf(b);g.children=[...A.slice(0,k),y,...A.slice(k)],S=!0}S||(M=g.__r3f)==null||M.objects.push(y),y.__r3f||lx(y,{}),y.__r3f.parent=g,aP(y),FS(y)}}function o(g,y,b=!1){g&&[...g].forEach(S=>l(y,S,b))}function l(g,y,b){if(y){var S,C,M;if(y.__r3f&&(y.__r3f.parent=null),(S=g.__r3f)!=null&&S.objects&&(g.__r3f.objects=g.__r3f.objects.filter(D=>D!==y)),(C=y.__r3f)!=null&&C.attach)wG(g,y,y.__r3f.attach);else if(y.isObject3D&&g.isObject3D){var A;g.remove(y),(A=y.__r3f)!=null&&A.root&&Cbe(TI(y),y)}const O=(M=y.__r3f)==null?void 0:M.primitive,P=!O&&(b===void 0?y.dispose!==null:b);if(!O){var k;o((k=y.__r3f)==null?void 0:k.objects,y,P),o(y.children,y,P)}if(delete y.__r3f,P&&y.dispose&&y.type!=="Scene"){const D=()=>{try{y.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?_G.unstable_scheduleCallback(_G.unstable_IdlePriority,D):D()}FS(g)}}function u(g,y,b,S){var C;const M=(C=g.__r3f)==null?void 0:C.parent;if(!M)return;const A=t(y,b,g.__r3f.root);if(g.children){for(const k of g.children)k.__r3f&&r(A,k);g.children=g.children.filter(k=>!k.__r3f)}g.__r3f.objects.forEach(k=>r(A,k)),g.__r3f.objects=[],g.__r3f.autoRemovedBeforeAppend||l(M,g),A.parent&&(A.__r3f.autoRemovedBeforeAppend=!0),r(M,A),A.raycast&&A.__r3f.eventCount&&TI(A).getState().internal.interaction.push(A),[S,S.alternate].forEach(k=>{k!==null&&(k.stateNode=A,k.ref&&(typeof k.ref=="function"?k.ref(A):k.ref.current=A))})}const h=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:pbe({createInstance:t,removeChild:l,appendChild:r,appendInitialChild:r,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(g,y)=>{if(!y)return;const b=g.getState().scene;b.__r3f&&(b.__r3f.root=g,r(b,y))},removeChildFromContainer:(g,y)=>{y&&l(g.getState().scene,y)},insertInContainerBefore:(g,y,b)=>{if(!y||!b)return;const S=g.getState().scene;S.__r3f&&s(S,y,b)},getRootHostContext:()=>null,getChildHostContext:g=>g,finalizeInitialChildren(g){var y;return!!((y=g==null?void 0:g.__r3f)!=null?y:{}).handlers},prepareUpdate(g,y,b,S){var C;if(((C=g==null?void 0:g.__r3f)!=null?C:{}).primitive&&S.object&&S.object!==g)return[!0];{const{args:A=[],children:k,...O}=S,{args:P=[],children:D,...U}=b;if(!Array.isArray(A))throw new Error("R3F: the args prop must be an array!");if(A.some((V,z)=>V!==P[z]))return[!0];const H=SJ(g,O,U,!0);return H.changes.length?[!1,H]:null}},commitUpdate(g,[y,b],S,C,M,A){y?u(g,S,M,A):vL(g,b)},commitMount(g,y,b,S){var C;const M=(C=g.__r3f)!=null?C:{};g.raycast&&M.handlers&&M.eventCount&&TI(g).getState().internal.interaction.push(g)},getPublicInstance:g=>g,prepareForCommit:()=>null,preparePortalMount:g=>lx(g.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(g){var y;const{attach:b,parent:S}=(y=g.__r3f)!=null?y:{};b&&S&&wG(S,g,b),g.isObject3D&&(g.visible=!1),FS(g)},unhideInstance(g,y){var b;const{attach:S,parent:C}=(b=g.__r3f)!=null?b:{};S&&C&&gL(C,g,S),(g.isObject3D&&y.visible==null||y.visible)&&(g.visible=!0),FS(g)},createTextInstance:h,hideTextInstance:h,unhideTextInstance:h,getCurrentEventPriority:()=>e?e():Lx.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&op.fun(performance.now)?performance.now:op.fun(Date.now)?Date.now:()=>0,scheduleTimeout:op.fun(setTimeout)?setTimeout:void 0,cancelTimeout:op.fun(clearTimeout)?clearTimeout:void 0}),applyProps:vL}}var yG,bG;const mL=n=>"colorSpace"in n||"outputColorSpace"in n,bbe=()=>{var n;return(n=bJ.ColorManagement)!=null?n:null};typeof window<"u"&&((yG=window.document)!=null&&yG.createElement||((bG=window.navigator)==null?void 0:bG.product)==="ReactNative")?de.useLayoutEffect:de.useEffect;class Tbe extends de.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Tbe.getDerivedStateFromError=()=>({error:!0});const TJ="__default",TG=new Map,Sbe=n=>n&&!!n.memoized&&!!n.changes;function TI(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const op={obj:n=>n===Object(n)&&!op.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(op.str(n)||op.num(n))return n===e;const o=op.obj(n);if(o&&r==="reference")return n===e;const l=op.arr(n);if(l&&t==="reference")return n===e;if((l||o)&&n===e)return!0;let u;for(u in n)if(!(u in e))return!1;if(o&&t==="shallow"&&r==="shallow"){for(u in s?e:n)if(!op.equ(n[u],e[u],{strict:s,objects:"reference"}))return!1}else for(u in s?e:n)if(n[u]!==e[u])return!1;if(op.und(u)){if(l&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function wbe(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function lx(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function oP(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),s=r.pop();return t=r.reduce((o,l)=>o[l],n),{target:t,key:s}}else return{target:t,key:e}}const SG=/-\d+$/;function gL(n,e,t){if(op.str(t)){if(SG.test(t)){const o=t.replace(SG,""),{target:l,key:u}=oP(n,o);Array.isArray(l[u])||(l[u]=[])}const{target:r,key:s}=oP(n,t);e.__r3f.previousAttach=r[s],r[s]=e}else e.__r3f.previousAttach=t(n,e)}function wG(n,e,t){var r,s;if(op.str(t)){const{target:o,key:l}=oP(n,t),u=e.__r3f.previousAttach;u===void 0?delete o[l]:o[l]=u}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(s=e.__r3f)==null||delete s.previousAttach}function SJ(n,{children:e,key:t,ref:r,...s},{children:o,key:l,ref:u,...h}={},f=!1){var g;const y=(g=n==null?void 0:n.__r3f)!=null?g:{},b=Object.entries(s),S=[];if(f){const M=Object.keys(h);for(let A=0;A<M.length;A++)s.hasOwnProperty(M[A])||b.unshift([M[A],TJ+"remove"])}b.forEach(([M,A])=>{var k;if((k=n.__r3f)!=null&&k.primitive&&M==="object"||op.equ(A,h[M]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(M))return S.push([M,A,!0,[]]);let O=[];M.includes("-")&&(O=M.split("-")),S.push([M,A,!1,O]);for(const P in s){const D=s[P];P.startsWith(`${M}-`)&&S.push([P,D,!1,P.split("-")])}});const C={...s};return y.memoizedProps&&y.memoizedProps.args&&(C.args=y.memoizedProps.args),y.memoizedProps&&y.memoizedProps.attach&&(C.attach=y.memoizedProps.attach),{memoized:C,changes:S}}const Ebe=typeof process<"u"&&!1;function vL(n,e){var t,r,s;const o=(t=n.__r3f)!=null?t:{},l=o.root,u=(r=l==null||l.getState==null?void 0:l.getState())!=null?r:{},{memoized:h,changes:f}=Sbe(e)?e:SJ(n,e),g=o.eventCount;n.__r3f&&(n.__r3f.memoizedProps=h);for(let b=0;b<f.length;b++){let[S,C,M,A]=f[b];if(mL(n)){const D="srgb",U="srgb-linear";S==="encoding"?(S="colorSpace",C=C===3001?D:U):S==="outputEncoding"&&(S="outputColorSpace",C=C===3001?D:U)}let k=n,O=k[S];if(A.length&&(O=A.reduce((P,D)=>P[D],n),!(O&&O.set))){const[P,...D]=A.reverse();k=D.reverse().reduce((U,H)=>U[H],n),S=P}if(C===TJ+"remove")if(k.constructor){let P=TG.get(k.constructor);P||(P=new k.constructor,TG.set(k.constructor,P)),C=P[S]}else C=0;if(M)C?o.handlers[S]=C:delete o.handlers[S],o.eventCount=Object.keys(o.handlers).length;else if(O&&O.set&&(O.copy||O instanceof lI)){if(Array.isArray(C))O.fromArray?O.fromArray(C):O.set(...C);else if(O.copy&&C&&C.constructor&&(Ebe?O.constructor.name===C.constructor.name:O.constructor===C.constructor))O.copy(C);else if(C!==void 0){const P=O instanceof Ph;!P&&O.setScalar?O.setScalar(C):O instanceof lI&&C instanceof lI?O.mask=C.mask:O.set(C),!bbe()&&!u.linear&&P&&O.convertSRGBToLinear()}}else if(k[S]=C,k[S]instanceof Nm&&k[S].format===e3&&k[S].type===_X){const P=k[S];mL(P)&&mL(u.gl)?P.colorSpace=u.gl.outputColorSpace:P.encoding=u.gl.outputEncoding}FS(n)}if(o.parent&&n.raycast&&g!==o.eventCount){const b=TI(n).getState().internal,S=b.interaction.indexOf(n);S>-1&&b.interaction.splice(S,1),o.eventCount&&b.interaction.push(n)}return!(f.length===1&&f[0][0]==="onUpdate")&&f.length&&(s=n.__r3f)!=null&&s.parent&&aP(n),n}function FS(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function aP(n){n.onUpdate==null||n.onUpdate(n)}function xbe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Lx.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Lx.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Lx.ContinuousEventPriority;default:return Lx.DefaultEventPriority}}function $be(n,e,t,r){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(r),s.target.releasePointerCapture(r)))}function Cbe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,s)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((r,s)=>{$be(t.capturedMap,e,r,s)})}const EG=new WeakMap;function wJ(n,e){return function(t,...r){let s=EG.get(t);return s||(s=new t,EG.set(t,s)),n&&n(s),Promise.all(r.map(o=>new Promise((l,u)=>s.load(o,h=>{h.scene&&Object.assign(h,wbe(h.scene)),l(h)},e,h=>u(new Error(`Could not load ${o}: ${h==null?void 0:h.message}`)))))).finally(()=>s.dispose==null?void 0:s.dispose())}}function RC(n,e,t,r){const s=Array.isArray(e)?e:[e],o=gbe(wJ(t,r),[n,...s],{equal:op.equ});return Array.isArray(e)?o:o[0]}RC.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return vbe(wJ(t),[n,...r])};RC.clear=function(n,e){const t=Array.isArray(e)?e:[e];return _be([n,...t])};const Mbe=new Map,{reconciler:Abe,applyProps:bFe}=ybe(Mbe,xbe);Abe.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:de.version});function xG(n,e){if(e===Yoe)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===FD||e===yX){let t=n.getIndex();if(t===null){const l=[],u=n.getAttribute("position");if(u!==void 0){for(let h=0;h<u.count;h++)l.push(h);n.setIndex(l),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,s=[];if(t)if(e===FD)for(let l=1;l<=r;l++)s.push(t.getX(0)),s.push(t.getX(l)),s.push(t.getX(l+1));else for(let l=0;l<r;l++)l%2===0?(s.push(t.getX(l)),s.push(t.getX(l+1)),s.push(t.getX(l+2))):(s.push(t.getX(l+2)),s.push(t.getX(l+1)),s.push(t.getX(l)));s.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=n.clone();return o.setIndex(s),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const Ibe=parseInt(JF.replace(/\D+/g,""));class t4 extends uT{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Nbe(t)}),this.register(function(t){return new Gbe(t)}),this.register(function(t){return new Wbe(t)}),this.register(function(t){return new Vbe(t)}),this.register(function(t){return new Pbe(t)}),this.register(function(t){return new Bbe(t)}),this.register(function(t){return new Fbe(t)}),this.register(function(t){return new zbe(t)}),this.register(function(t){return new Lbe(t)}),this.register(function(t){return new Ube(t)}),this.register(function(t){return new Dbe(t)}),this.register(function(t){return new Hbe(t)}),this.register(function(t){return new kbe(t)}),this.register(function(t){return new jbe(t)}),this.register(function(t){return new Ybe(t)})}load(e,t,r,s){const o=this;let l;this.resourcePath!==""?l=this.resourcePath:this.path!==""?l=this.path:l=N1.extractUrlBase(e),this.manager.itemStart(e);const u=function(f){s?s(f):console.error(f),o.manager.itemError(e),o.manager.itemEnd(e)},h=new uR(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(f){try{o.parse(f,l,function(g){t(g),o.manager.itemEnd(e)},u)}catch(g){u(g)}},r,u)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,s){let o;const l={},u={};if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(N1.decodeText(new Uint8Array(e.slice(0,4)))===EJ){try{l[Ys.KHR_BINARY_GLTF]=new Xbe(e)}catch(g){s&&s(g);return}o=JSON.parse(l[Ys.KHR_BINARY_GLTF].content)}else o=JSON.parse(N1.decodeText(new Uint8Array(e)));else o=e;if(o.asset===void 0||o.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new a1e(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const g=this.pluginCallbacks[f](h);u[g.name]=g,l[g.name]=!0}if(o.extensionsUsed)for(let f=0;f<o.extensionsUsed.length;++f){const g=o.extensionsUsed[f],y=o.extensionsRequired||[];switch(g){case Ys.KHR_MATERIALS_UNLIT:l[g]=new Obe;break;case Ys.KHR_DRACO_MESH_COMPRESSION:l[g]=new Kbe(o,this.dracoLoader);break;case Ys.KHR_TEXTURE_TRANSFORM:l[g]=new Jbe;break;case Ys.KHR_MESH_QUANTIZATION:l[g]=new qbe;break;default:y.indexOf(g)>=0&&u[g]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}h.setExtensions(l),h.setPlugins(u),h.parse(r,s)}parseAsync(e,t){const r=this;return new Promise(function(s,o){r.parse(e,t,s,o)})}}function Rbe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ys={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class kbe{constructor(e){this.parser=e,this.name=Ys.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let s=t.cache.get(r);if(s)return s;const o=t.json,h=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let f;const g=new Ph(16777215);h.color!==void 0&&g.fromArray(h.color);const y=h.range!==void 0?h.range:0;switch(h.type){case"directional":f=new dle(g),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new cle(g),f.distance=y;break;case"spot":f=new lle(g),f.distance=y,h.spot=h.spot||{},h.spot.innerConeAngle=h.spot.innerConeAngle!==void 0?h.spot.innerConeAngle:0,h.spot.outerConeAngle=h.spot.outerConeAngle!==void 0?h.spot.outerConeAngle:Math.PI/4,f.angle=h.spot.outerConeAngle,f.penumbra=1-h.spot.innerConeAngle/h.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+h.type)}return f.position.set(0,0,0),f.decay=2,wy(f,h),h.intensity!==void 0&&(f.intensity=h.intensity),f.name=t.createUniqueName(h.name||"light_"+e),s=Promise.resolve(f),t.cache.add(r,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,o=r.json.nodes[e],u=(o.extensions&&o.extensions[this.name]||{}).light;return u===void 0?null:this._loadLight(u).then(function(h){return r._getNodeRef(t.cache,u,h)})}}class Obe{constructor(){this.name=Ys.KHR_MATERIALS_UNLIT}getMaterialType(){return tw}extendParams(e,t,r){const s=[];e.color=new Ph(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const l=o.baseColorFactor;e.color.fromArray(l),e.opacity=l[3]}o.baseColorTexture!==void 0&&s.push(r.assignTexture(e,"map",o.baseColorTexture,3001))}return Promise.all(s)}}class Lbe{constructor(e){this.parser=e,this.name=Ys.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}}class Nbe{constructor(e){this.parser=e,this.name=Ys.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:nb}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];if(l.clearcoatFactor!==void 0&&(t.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&o.push(r.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&o.push(r.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(o.push(r.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){const u=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new cc(u,u)}return Promise.all(o)}}class Dbe{constructor(e){this.parser=e,this.name=Ys.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:nb}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.iridescenceFactor!==void 0&&(t.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&o.push(r.assignTexture(t,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(t.iridescenceIOR=l.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&o.push(r.assignTexture(t,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(o)}}class Pbe{constructor(e){this.parser=e,this.name=Ys.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:nb}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new Ph(0,0,0),t.sheenRoughness=0,t.sheen=1;const l=s.extensions[this.name];return l.sheenColorFactor!==void 0&&t.sheenColor.fromArray(l.sheenColorFactor),l.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&o.push(r.assignTexture(t,"sheenColorMap",l.sheenColorTexture,3001)),l.sheenRoughnessTexture!==void 0&&o.push(r.assignTexture(t,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(o)}}class Bbe{constructor(e){this.parser=e,this.name=Ys.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:nb}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.transmissionFactor!==void 0&&(t.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&o.push(r.assignTexture(t,"transmissionMap",l.transmissionTexture)),Promise.all(o)}}class Fbe{constructor(e){this.parser=e,this.name=Ys.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:nb}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];t.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&o.push(r.assignTexture(t,"thicknessMap",l.thicknessTexture)),t.attenuationDistance=l.attenuationDistance||1/0;const u=l.attenuationColor||[1,1,1];return t.attenuationColor=new Ph(u[0],u[1],u[2]),Promise.all(o)}}class zbe{constructor(e){this.parser=e,this.name=Ys.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:nb}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class Ube{constructor(e){this.parser=e,this.name=Ys.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:nb}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];t.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&o.push(r.assignTexture(t,"specularIntensityMap",l.specularTexture));const u=l.specularColorFactor||[1,1,1];return t.specularColor=new Ph(u[0],u[1],u[2]),l.specularColorTexture!==void 0&&o.push(r.assignTexture(t,"specularColorMap",l.specularColorTexture,3001)),Promise.all(o)}}class Hbe{constructor(e){this.parser=e,this.name=Ys.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:nb}extendMaterialParams(e,t){const r=this.parser,s=r.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.anisotropyStrength!==void 0&&(t.anisotropy=l.anisotropyStrength),l.anisotropyRotation!==void 0&&(t.anisotropyRotation=l.anisotropyRotation),l.anisotropyTexture!==void 0&&o.push(r.assignTexture(t,"anisotropyMap",l.anisotropyTexture)),Promise.all(o)}}class Gbe{constructor(e){this.parser=e,this.name=Ys.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,s=r.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const o=s.extensions[this.name],l=t.options.ktx2Loader;if(!l){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,l)}}class Wbe{constructor(e){this.parser=e,this.name=Ys.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,s=r.json,o=s.textures[e];if(!o.extensions||!o.extensions[t])return null;const l=o.extensions[t],u=s.images[l.source];let h=r.textureLoader;if(u.uri){const f=r.options.manager.getHandler(u.uri);f!==null&&(h=f)}return this.detectSupport().then(function(f){if(f)return r.loadTextureImage(e,l.source,h);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Vbe{constructor(e){this.parser=e,this.name=Ys.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,s=r.json,o=s.textures[e];if(!o.extensions||!o.extensions[t])return null;const l=o.extensions[t],u=s.images[l.source];let h=r.textureLoader;if(u.uri){const f=r.options.manager.getHandler(u.uri);f!==null&&(h=f)}return this.detectSupport().then(function(f){if(f)return r.loadTextureImage(e,l.source,h);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class jbe{constructor(e){this.name=Ys.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const s=r.extensions[this.name],o=this.parser.getDependency("buffer",s.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(u){const h=s.byteOffset||0,f=s.byteLength||0,g=s.count,y=s.byteStride,b=new Uint8Array(u,h,f);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(g,y,b,s.mode,s.filter).then(function(S){return S.buffer}):l.ready.then(function(){const S=new ArrayBuffer(g*y);return l.decodeGltfBuffer(new Uint8Array(S),g,y,b,s.mode,s.filter),S})})}else return null}}class Ybe{constructor(e){this.name=Ys.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const s=t.meshes[r.mesh];for(const f of s.primitives)if(f.mode!==dg.TRIANGLES&&f.mode!==dg.TRIANGLE_STRIP&&f.mode!==dg.TRIANGLE_FAN&&f.mode!==void 0)return null;const l=r.extensions[this.name].attributes,u=[],h={};for(const f in l)u.push(this.parser.getDependency("accessor",l[f]).then(g=>(h[f]=g,h[f])));return u.length<1?null:(u.push(this.parser.createNodeMesh(e)),Promise.all(u).then(f=>{const g=f.pop(),y=g.isGroup?g.children:[g],b=f[0].count,S=[];for(const C of y){const M=new Xs,A=new zt,k=new Bu,O=new zt(1,1,1),P=new Gae(C.geometry,C.material,b);for(let D=0;D<b;D++)h.TRANSLATION&&A.fromBufferAttribute(h.TRANSLATION,D),h.ROTATION&&k.fromBufferAttribute(h.ROTATION,D),h.SCALE&&O.fromBufferAttribute(h.SCALE,D),P.setMatrixAt(D,M.compose(A,k,O));for(const D in h)D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&C.geometry.setAttribute(D,h[D]);fh.prototype.copy.call(P,C),this.parser.assignFinalMaterial(P),S.push(P)}return g.isGroup?(g.clear(),g.add(...S),g):S[0]}))}}const EJ="glTF",ux=12,$G={JSON:1313821514,BIN:5130562};class Xbe{constructor(e){this.name=Ys.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,ux);if(this.header={magic:N1.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==EJ)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-ux,s=new DataView(e,ux);let o=0;for(;o<r;){const l=s.getUint32(o,!0);o+=4;const u=s.getUint32(o,!0);if(o+=4,u===$G.JSON){const h=new Uint8Array(e,ux+o,l);this.content=N1.decodeText(h)}else if(u===$G.BIN){const h=ux+o;this.body=e.slice(h,h+l)}o+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Kbe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ys.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,s=this.dracoLoader,o=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,u={},h={},f={};for(const g in l){const y=lP[g]||g.toLowerCase();u[y]=l[g]}for(const g in e.attributes){const y=lP[g]||g.toLowerCase();if(l[g]!==void 0){const b=r.accessors[e.attributes[g]],S=bw[b.componentType];f[y]=S.name,h[y]=b.normalized===!0}}return t.getDependency("bufferView",o).then(function(g){return new Promise(function(y){s.decodeDracoFile(g,function(b){for(const S in b.attributes){const C=b.attributes[S],M=h[S];M!==void 0&&(C.normalized=M)}y(b)},u,f)})})}}class Jbe{constructor(){this.name=Ys.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class qbe{constructor(){this.name=Ys.KHR_MESH_QUANTIZATION}}class xJ extends bC{constructor(e,t,r,s){super(e,t,r,s)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,s=this.valueSize,o=e*s*3+s;for(let l=0;l!==s;l++)t[l]=r[o+l];return t}interpolate_(e,t,r,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=u*2,f=u*3,g=s-t,y=(r-t)/g,b=y*y,S=b*y,C=e*f,M=C-f,A=-2*S+3*b,k=S-b,O=1-A,P=k-b+y;for(let D=0;D!==u;D++){const U=l[M+D+u],H=l[M+D+h]*g,V=l[C+D+u],z=l[C+D]*g;o[D]=O*U+P*H+A*V+k*z}return o}}const Qbe=new Bu;class Zbe extends xJ{interpolate_(e,t,r,s){const o=super.interpolate_(e,t,r,s);return Qbe.fromArray(o).normalize().toArray(o),o}}const dg={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},bw={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},CG={9728:$$,9729:qF,9984:zoe,9985:Hoe,9986:Uoe,9987:QF},MG={33071:Rx,33648:BD,10497:x$},_L={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},lP={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Ibe>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ay={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},e1e={CUBICSPLINE:void 0,LINEAR:kw,STEP:C$},yL={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function t1e(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new l3({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:lR})),n.DefaultMaterial}function Yb(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function wy(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function n1e(n,e,t){let r=!1,s=!1,o=!1;for(let f=0,g=e.length;f<g;f++){const y=e[f];if(y.POSITION!==void 0&&(r=!0),y.NORMAL!==void 0&&(s=!0),y.COLOR_0!==void 0&&(o=!0),r&&s&&o)break}if(!r&&!s&&!o)return Promise.resolve(n);const l=[],u=[],h=[];for(let f=0,g=e.length;f<g;f++){const y=e[f];if(r){const b=y.POSITION!==void 0?t.getDependency("accessor",y.POSITION):n.attributes.position;l.push(b)}if(s){const b=y.NORMAL!==void 0?t.getDependency("accessor",y.NORMAL):n.attributes.normal;u.push(b)}if(o){const b=y.COLOR_0!==void 0?t.getDependency("accessor",y.COLOR_0):n.attributes.color;h.push(b)}}return Promise.all([Promise.all(l),Promise.all(u),Promise.all(h)]).then(function(f){const g=f[0],y=f[1],b=f[2];return r&&(n.morphAttributes.position=g),s&&(n.morphAttributes.normal=y),o&&(n.morphAttributes.color=b),n.morphTargetsRelative=!0,n})}function r1e(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,s=t.length;r<s;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function i1e(n){let e;const t=n.extensions&&n.extensions[Ys.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+bL(t.attributes):e=n.indices+":"+bL(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,s=n.targets.length;r<s;r++)e+=":"+bL(n.targets[r]);return e}function bL(n){let e="";const t=Object.keys(n).sort();for(let r=0,s=t.length;r<s;r++)e+=t[r]+":"+n[t[r]]+";";return e}function uP(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function s1e(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const o1e=new Xs;class a1e{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Rbe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,s=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,o=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||s&&o<98?this.textureLoader=new ole(this.options.manager):this.textureLoader=new fle(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new uR(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,s=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(l){const u={scene:l[0][s.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:s.asset,parser:r,userData:{}};Yb(o,u,s),wy(u,s),Promise.all(r._invokeAll(function(h){return h.afterRoot&&h.afterRoot(u)})).then(function(){e(u)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let s=0,o=t.length;s<o;s++){const l=t[s].joints;for(let u=0,h=l.length;u<h;u++)e[l[u]].isBone=!0}for(let s=0,o=e.length;s<o;s++){const l=e[s];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(r[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const s=r.clone(),o=(l,u)=>{const h=this.associations.get(l);h!=null&&this.associations.set(u,h);for(const[f,g]of l.children.entries())o(g,u.children[f])};return o(r,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const s=e(t[r]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let s=0;s<t.length;s++){const o=e(t[s]);o&&r.push(o)}return r}getDependency(e,t){const r=e+":"+t;let s=this.cache.get(r);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":s=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(r,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(o,l){return r.getDependency(e,l)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ys.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(o,l){r.load(N1.resolveURL(t.uri,s.path),o,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const s=t.byteLength||0,o=t.byteOffset||0;return r.slice(o,o+s)})}loadAccessor(e){const t=this,r=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const l=_L[s.type],u=bw[s.componentType],h=s.normalized===!0,f=new u(s.count*l);return Promise.resolve(new Dm(f,l,h))}const o=[];return s.bufferView!==void 0?o.push(this.getDependency("bufferView",s.bufferView)):o.push(null),s.sparse!==void 0&&(o.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(o).then(function(l){const u=l[0],h=_L[s.type],f=bw[s.componentType],g=f.BYTES_PER_ELEMENT,y=g*h,b=s.byteOffset||0,S=s.bufferView!==void 0?r.bufferViews[s.bufferView].byteStride:void 0,C=s.normalized===!0;let M,A;if(S&&S!==y){const k=Math.floor(b/S),O="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+k+":"+s.count;let P=t.cache.get(O);P||(M=new f(u,k*S,s.count*S/g),P=new Bae(M,S/g),t.cache.add(O,P)),A=new s3(P,h,b%S/g,C)}else u===null?M=new f(s.count*h):M=new f(u,b,s.count*h),A=new Dm(M,h,C);if(s.sparse!==void 0){const k=_L.SCALAR,O=bw[s.sparse.indices.componentType],P=s.sparse.indices.byteOffset||0,D=s.sparse.values.byteOffset||0,U=new O(l[1],P,s.sparse.count*k),H=new f(l[2],D,s.sparse.count*h);u!==null&&(A=new Dm(A.array.slice(),A.itemSize,A.normalized));for(let V=0,z=U.length;V<z;V++){const Z=U[V];if(A.setX(Z,H[V*h]),h>=2&&A.setY(Z,H[V*h+1]),h>=3&&A.setZ(Z,H[V*h+2]),h>=4&&A.setW(Z,H[V*h+3]),h>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return A})}loadTexture(e){const t=this.json,r=this.options,o=t.textures[e].source,l=t.images[o];let u=this.textureLoader;if(l.uri){const h=r.manager.getHandler(l.uri);h!==null&&(u=h)}return this.loadTextureImage(e,o,u)}loadTextureImage(e,t,r){const s=this,o=this.json,l=o.textures[e],u=o.images[t],h=(u.uri||u.bufferView)+":"+l.sampler;if(this.textureCache[h])return this.textureCache[h];const f=this.loadImageSource(t,r).then(function(g){g.flipY=!1,g.name=l.name||u.name||"",g.name===""&&typeof u.uri=="string"&&u.uri.startsWith("data:image/")===!1&&(g.name=u.uri);const b=(o.samplers||{})[l.sampler]||{};return g.magFilter=CG[b.magFilter]||qF,g.minFilter=CG[b.minFilter]||QF,g.wrapS=MG[b.wrapS]||x$,g.wrapT=MG[b.wrapT]||x$,s.associations.set(g,{textures:e}),g}).catch(function(){return null});return this.textureCache[h]=f,f}loadImageSource(e,t){const r=this,s=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(y=>y.clone());const l=s.images[e],u=self.URL||self.webkitURL;let h=l.uri||"",f=!1;if(l.bufferView!==void 0)h=r.getDependency("bufferView",l.bufferView).then(function(y){f=!0;const b=new Blob([y],{type:l.mimeType});return h=u.createObjectURL(b),h});else if(l.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const g=Promise.resolve(h).then(function(y){return new Promise(function(b,S){let C=b;t.isImageBitmapLoader===!0&&(C=function(M){const A=new Nm(M);A.needsUpdate=!0,b(A)}),t.load(N1.resolveURL(y,o.path),C,void 0,S)})}).then(function(y){return f===!0&&u.revokeObjectURL(h),y.userData.mimeType=l.mimeType||s1e(l.uri),y}).catch(function(y){throw console.error("THREE.GLTFLoader: Couldn't load texture",h),y});return this.sourceCache[e]=g,g}assignTexture(e,t,r,s){const o=this;return this.getDependency("texture",r.index).then(function(l){if(!l)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(l=l.clone(),l.channel=r.texCoord),o.extensions[Ys.KHR_TEXTURE_TRANSFORM]){const u=r.extensions!==void 0?r.extensions[Ys.KHR_TEXTURE_TRANSFORM]:void 0;if(u){const h=o.associations.get(l);l=o.extensions[Ys.KHR_TEXTURE_TRANSFORM].extendTexture(l,u),o.associations.set(l,h)}}return s!==void 0&&("colorSpace"in l?l.colorSpace=s===3001?"srgb":"srgb-linear":l.encoding=s),e[t]=l,l})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const s=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,l=t.attributes.normal===void 0;if(e.isPoints){const u="PointsMaterial:"+r.uuid;let h=this.cache.get(u);h||(h=new AX,zy.prototype.copy.call(h,r),h.color.copy(r.color),h.map=r.map,h.sizeAttenuation=!1,this.cache.add(u,h)),r=h}else if(e.isLine){const u="LineBasicMaterial:"+r.uuid;let h=this.cache.get(u);h||(h=new MX,zy.prototype.copy.call(h,r),h.color.copy(r.color),h.map=r.map,this.cache.add(u,h)),r=h}if(s||o||l){let u="ClonedMaterial:"+r.uuid+":";s&&(u+="derivative-tangents:"),o&&(u+="vertex-colors:"),l&&(u+="flat-shading:");let h=this.cache.get(u);h||(h=r.clone(),o&&(h.vertexColors=!0),l&&(h.flatShading=!0),s&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(u,h),this.associations.set(h,this.associations.get(r))),r=h}e.material=r}getMaterialType(){return l3}loadMaterial(e){const t=this,r=this.json,s=this.extensions,o=r.materials[e];let l;const u={},h=o.extensions||{},f=[];if(h[Ys.KHR_MATERIALS_UNLIT]){const y=s[Ys.KHR_MATERIALS_UNLIT];l=y.getMaterialType(),f.push(y.extendParams(u,o,t))}else{const y=o.pbrMetallicRoughness||{};if(u.color=new Ph(1,1,1),u.opacity=1,Array.isArray(y.baseColorFactor)){const b=y.baseColorFactor;u.color.fromArray(b),u.opacity=b[3]}y.baseColorTexture!==void 0&&f.push(t.assignTexture(u,"map",y.baseColorTexture,3001)),u.metalness=y.metallicFactor!==void 0?y.metallicFactor:1,u.roughness=y.roughnessFactor!==void 0?y.roughnessFactor:1,y.metallicRoughnessTexture!==void 0&&(f.push(t.assignTexture(u,"metalnessMap",y.metallicRoughnessTexture)),f.push(t.assignTexture(u,"roughnessMap",y.metallicRoughnessTexture))),l=this._invokeOne(function(b){return b.getMaterialType&&b.getMaterialType(e)}),f.push(Promise.all(this._invokeAll(function(b){return b.extendMaterialParams&&b.extendMaterialParams(e,u)})))}o.doubleSided===!0&&(u.side=Poe);const g=o.alphaMode||yL.OPAQUE;if(g===yL.BLEND?(u.transparent=!0,u.depthWrite=!1):(u.transparent=!1,g===yL.MASK&&(u.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&l!==tw&&(f.push(t.assignTexture(u,"normalMap",o.normalTexture)),u.normalScale=new cc(1,1),o.normalTexture.scale!==void 0)){const y=o.normalTexture.scale;u.normalScale.set(y,y)}return o.occlusionTexture!==void 0&&l!==tw&&(f.push(t.assignTexture(u,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(u.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&l!==tw&&(u.emissive=new Ph().fromArray(o.emissiveFactor)),o.emissiveTexture!==void 0&&l!==tw&&f.push(t.assignTexture(u,"emissiveMap",o.emissiveTexture,3001)),Promise.all(f).then(function(){const y=new l(u);return o.name&&(y.name=o.name),wy(y,o),t.associations.set(y,{materials:e}),o.extensions&&Yb(s,y,o),y})}createUniqueName(e){const t=Ia.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,s=this.primitiveCache;function o(u){return r[Ys.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(u,t).then(function(h){return AG(h,u,t)})}const l=[];for(let u=0,h=e.length;u<h;u++){const f=e[u],g=i1e(f),y=s[g];if(y)l.push(y.promise);else{let b;f.extensions&&f.extensions[Ys.KHR_DRACO_MESH_COMPRESSION]?b=o(f):b=AG(new tb,f,t),s[g]={primitive:f,promise:b},l.push(b)}}return Promise.all(l)}loadMesh(e){const t=this,r=this.json,s=this.extensions,o=r.meshes[e],l=o.primitives,u=[];for(let h=0,f=l.length;h<f;h++){const g=l[h].material===void 0?t1e(this.cache):this.getDependency("material",l[h].material);u.push(g)}return u.push(t.loadGeometries(l)),Promise.all(u).then(function(h){const f=h.slice(0,h.length-1),g=h[h.length-1],y=[];for(let S=0,C=g.length;S<C;S++){const M=g[S],A=l[S];let k;const O=f[S];if(A.mode===dg.TRIANGLES||A.mode===dg.TRIANGLE_STRIP||A.mode===dg.TRIANGLE_FAN||A.mode===void 0)k=o.isSkinnedMesh===!0?new zae(M,O):new mk(M,O),k.isSkinnedMesh===!0&&k.normalizeSkinWeights(),A.mode===dg.TRIANGLE_STRIP?k.geometry=xG(k.geometry,yX):A.mode===dg.TRIANGLE_FAN&&(k.geometry=xG(k.geometry,FD));else if(A.mode===dg.LINES)k=new Wae(M,O);else if(A.mode===dg.LINE_STRIP)k=new a3(M,O);else if(A.mode===dg.LINE_LOOP)k=new Vae(M,O);else if(A.mode===dg.POINTS)k=new jae(M,O);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);Object.keys(k.geometry.morphAttributes).length>0&&r1e(k,o),k.name=t.createUniqueName(o.name||"mesh_"+e),wy(k,o),A.extensions&&Yb(s,k,A),t.assignFinalMaterial(k),y.push(k)}for(let S=0,C=y.length;S<C;S++)t.associations.set(y[S],{meshes:e,primitives:S});if(y.length===1)return o.extensions&&Yb(s,y[0],o),y[0];const b=new UO;o.extensions&&Yb(s,b,o),t.associations.set(b,{meshes:e});for(let S=0,C=y.length;S<C;S++)b.add(y[S]);return b})}loadCamera(e){let t;const r=this.json.cameras[e],s=r[r.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new i3(fae.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):r.type==="orthographic"&&(t=new xX(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),wy(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let s=0,o=t.joints.length;s<o;s++)r.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(s){const o=s.pop(),l=s,u=[],h=[];for(let f=0,g=l.length;f<g;f++){const y=l[f];if(y){u.push(y);const b=new Xs;o!==null&&b.fromArray(o.array,f*16),h.push(b)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[f])}return new o3(u,h)})}loadAnimation(e){const r=this.json.animations[e],s=r.name?r.name:"animation_"+e,o=[],l=[],u=[],h=[],f=[];for(let g=0,y=r.channels.length;g<y;g++){const b=r.channels[g],S=r.samplers[b.sampler],C=b.target,M=C.node,A=r.parameters!==void 0?r.parameters[S.input]:S.input,k=r.parameters!==void 0?r.parameters[S.output]:S.output;C.node!==void 0&&(o.push(this.getDependency("node",M)),l.push(this.getDependency("accessor",A)),u.push(this.getDependency("accessor",k)),h.push(S),f.push(C))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u),Promise.all(h),Promise.all(f)]).then(function(g){const y=g[0],b=g[1],S=g[2],C=g[3],M=g[4],A=[];for(let k=0,O=y.length;k<O;k++){const P=y[k],D=b[k],U=S[k],H=C[k],V=M[k];if(P===void 0)continue;P.updateMatrix();let z;switch(ay[V.path]){case ay.weights:z=A$;break;case ay.rotation:z=Q1;break;case ay.position:case ay.scale:default:z=I$;break}const Z=P.name?P.name:P.uuid,oe=H.interpolation!==void 0?e1e[H.interpolation]:kw,ue=[];ay[V.path]===ay.weights?P.traverse(function(ae){ae.morphTargetInfluences&&ue.push(ae.name?ae.name:ae.uuid)}):ue.push(Z);let q=U.array;if(U.normalized){const ae=uP(q.constructor),le=new Float32Array(q.length);for(let ce=0,ge=q.length;ce<ge;ce++)le[ce]=q[ce]*ae;q=le}for(let ae=0,le=ue.length;ae<le;ae++){const ce=new z(ue[ae]+"."+ay[V.path],D.array,q,oe);H.interpolation==="CUBICSPLINE"&&(ce.createInterpolant=function($e){const K=this instanceof Q1?Zbe:xJ;return new K(this.times,this.values,this.getValueSize()/3,$e)},ce.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),A.push(ce)}}return new Zae(s,void 0,A)})}createNodeMesh(e){const t=this.json,r=this,s=t.nodes[e];return s.mesh===void 0?null:r.getDependency("mesh",s.mesh).then(function(o){const l=r._getNodeRef(r.meshCache,s.mesh,o);return s.weights!==void 0&&l.traverse(function(u){if(u.isMesh)for(let h=0,f=s.weights.length;h<f;h++)u.morphTargetInfluences[h]=s.weights[h]}),l})}loadNode(e){const t=this.json,r=this,s=t.nodes[e],o=r._loadNodeShallow(e),l=[],u=s.children||[];for(let f=0,g=u.length;f<g;f++)l.push(r.getDependency("node",u[f]));const h=s.skin===void 0?Promise.resolve(null):r.getDependency("skin",s.skin);return Promise.all([o,Promise.all(l),h]).then(function(f){const g=f[0],y=f[1],b=f[2];b!==null&&g.traverse(function(S){S.isSkinnedMesh&&S.bind(b,o1e)});for(let S=0,C=y.length;S<C;S++)g.add(y[S]);return g})}_loadNodeShallow(e){const t=this.json,r=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const o=t.nodes[e],l=o.name?s.createUniqueName(o.name):"",u=[],h=s._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(e)});return h&&u.push(h),o.camera!==void 0&&u.push(s.getDependency("camera",o.camera).then(function(f){return s._getNodeRef(s.cameraCache,o.camera,f)})),s._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(e)}).forEach(function(f){u.push(f)}),this.nodeCache[e]=Promise.all(u).then(function(f){let g;if(o.isBone===!0?g=new $X:f.length>1?g=new UO:f.length===1?g=f[0]:g=new fh,g!==f[0])for(let y=0,b=f.length;y<b;y++)g.add(f[y]);if(o.name&&(g.userData.name=o.name,g.name=l),wy(g,o),o.extensions&&Yb(r,g,o),o.matrix!==void 0){const y=new Xs;y.fromArray(o.matrix),g.applyMatrix4(y)}else o.translation!==void 0&&g.position.fromArray(o.translation),o.rotation!==void 0&&g.quaternion.fromArray(o.rotation),o.scale!==void 0&&g.scale.fromArray(o.scale);return s.associations.has(g)||s.associations.set(g,{}),s.associations.get(g).nodes=e,g}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],s=this,o=new UO;r.name&&(o.name=s.createUniqueName(r.name)),wy(o,r),r.extensions&&Yb(t,o,r);const l=r.nodes||[],u=[];for(let h=0,f=l.length;h<f;h++)u.push(s.getDependency("node",l[h]));return Promise.all(u).then(function(h){for(let g=0,y=h.length;g<y;g++)o.add(h[g]);const f=g=>{const y=new Map;for(const[b,S]of s.associations)(b instanceof zy||b instanceof Nm)&&y.set(b,S);return g.traverse(b=>{const S=s.associations.get(b);S!=null&&y.set(b,S)}),y};return s.associations=f(o),o})}}function l1e(n,e,t){const r=e.attributes,s=new R_;if(r.POSITION!==void 0){const u=t.json.accessors[r.POSITION],h=u.min,f=u.max;if(h!==void 0&&f!==void 0){if(s.set(new zt(h[0],h[1],h[2]),new zt(f[0],f[1],f[2])),u.normalized){const g=uP(bw[u.componentType]);s.min.multiplyScalar(g),s.max.multiplyScalar(g)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=e.targets;if(o!==void 0){const u=new zt,h=new zt;for(let f=0,g=o.length;f<g;f++){const y=o[f];if(y.POSITION!==void 0){const b=t.json.accessors[y.POSITION],S=b.min,C=b.max;if(S!==void 0&&C!==void 0){if(h.setX(Math.max(Math.abs(S[0]),Math.abs(C[0]))),h.setY(Math.max(Math.abs(S[1]),Math.abs(C[1]))),h.setZ(Math.max(Math.abs(S[2]),Math.abs(C[2]))),b.normalized){const M=uP(bw[b.componentType]);h.multiplyScalar(M)}u.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(u)}n.boundingBox=s;const l=new wv;s.getCenter(l.center),l.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=l}function AG(n,e,t){const r=e.attributes,s=[];function o(l,u){return t.getDependency("accessor",l).then(function(h){n.setAttribute(u,h)})}for(const l in r){const u=lP[l]||l.toLowerCase();u in n.attributes||s.push(o(r[l],u))}if(e.indices!==void 0&&!n.index){const l=t.getDependency("accessor",e.indices).then(function(u){n.setIndex(u)});s.push(l)}return wy(n,e),l1e(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?n1e(n,e.targets,t):n})}const TL=new WeakMap;class u1e extends uT{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,s){const o=new uR(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,l=>{const u={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(l,u).then(t).catch(s)},r,s)}decodeDracoFile(e,t,r,s){const o={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,o).then(t)}decodeGeometry(e,t){for(const h in t.attributeTypes){const f=t.attributeTypes[h];f.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[h]=f.name)}const r=JSON.stringify(t);if(TL.has(e)){const h=TL.get(e);if(h.key===r)return h.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const o=this.workerNextTaskID++,l=e.byteLength,u=this._getWorker(o,l).then(h=>(s=h,new Promise((f,g)=>{s._callbacks[o]={resolve:f,reject:g},s.postMessage({type:"decode",id:o,taskConfig:t,buffer:e},[e])}))).then(h=>this._createGeometry(h.geometry));return u.catch(()=>!0).then(()=>{s&&o&&this._releaseTask(s,o)}),TL.set(e,{key:r,promise:u}),u}_createGeometry(e){const t=new tb;e.index&&t.setIndex(new Dm(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const s=e.attributes[r],o=s.name,l=s.array,u=s.itemSize;t.setAttribute(o,new Dm(l,u))}return t}_loadLibrary(e,t){const r=new uR(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((s,o)=>{r.load(e,s,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const s=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const o=c1e.toString(),l=["/* draco decoder */",s,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(o){const l=o.data;switch(l.type){case"decode":s._callbacks[l.id].resolve(l);break;case"error":s._callbacks[l.id].reject(l);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+l.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,o){return s._taskLoad>o._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function c1e(){let n,e;onmessage=function(l){const u=l.data;switch(u.type){case"init":n=u.decoderConfig,e=new Promise(function(g){n.onModuleLoaded=function(y){g({draco:y})},DracoDecoderModule(n)});break;case"decode":const h=u.buffer,f=u.taskConfig;e.then(g=>{const y=g.draco,b=new y.Decoder,S=new y.DecoderBuffer;S.Init(new Int8Array(h),h.byteLength);try{const C=t(y,b,S,f),M=C.attributes.map(A=>A.array.buffer);C.index&&M.push(C.index.array.buffer),self.postMessage({type:"decode",id:u.id,geometry:C},M)}catch(C){console.error(C),self.postMessage({type:"error",id:u.id,error:C.message})}finally{y.destroy(S),y.destroy(b)}});break}};function t(l,u,h,f){const g=f.attributeIDs,y=f.attributeTypes;let b,S;const C=u.GetEncodedGeometryType(h);if(C===l.TRIANGULAR_MESH)b=new l.Mesh,S=u.DecodeBufferToMesh(h,b);else if(C===l.POINT_CLOUD)b=new l.PointCloud,S=u.DecodeBufferToPointCloud(h,b);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!S.ok()||b.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+S.error_msg());const M={index:null,attributes:[]};for(const A in g){const k=self[y[A]];let O,P;if(f.useUniqueIDs)P=g[A],O=u.GetAttributeByUniqueId(b,P);else{if(P=u.GetAttributeId(b,l[g[A]]),P===-1)continue;O=u.GetAttribute(b,P)}M.attributes.push(s(l,u,b,A,k,O))}return C===l.TRIANGULAR_MESH&&(M.index=r(l,u,b)),l.destroy(b),M}function r(l,u,h){const g=h.num_faces()*3,y=g*4,b=l._malloc(y);u.GetTrianglesUInt32Array(h,y,b);const S=new Uint32Array(l.HEAPF32.buffer,b,g).slice();return l._free(b),{array:S,itemSize:1}}function s(l,u,h,f,g,y){const b=y.num_components(),C=h.num_points()*b,M=C*g.BYTES_PER_ELEMENT,A=o(l,g),k=l._malloc(M);u.GetAttributeDataArrayForAllPoints(h,y,A,M,k);const O=new g(l.HEAPF32.buffer,k,C).slice();return l._free(k),{name:f,array:O,itemSize:b}}function o(l,u){switch(u){case Float32Array:return l.DT_FLOAT32;case Int8Array:return l.DT_INT8;case Int16Array:return l.DT_INT16;case Int32Array:return l.DT_INT32;case Uint8Array:return l.DT_UINT8;case Uint16Array:return l.DT_UINT16;case Uint32Array:return l.DT_UINT32}}}let GM;const SL=()=>{if(GM)return GM;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=n;WebAssembly.validate(t)&&(s=e);let o;const l=WebAssembly.instantiate(u(s),{}).then(y=>{o=y.instance,o.exports.__wasm_call_ctors()});function u(y){const b=new Uint8Array(y.length);for(let C=0;C<y.length;++C){const M=y.charCodeAt(C);b[C]=M>96?M-71:M>64?M-65:M>47?M+4:M>46?63:62}let S=0;for(let C=0;C<y.length;++C)b[S++]=b[C]<60?r[b[C]]:(b[C]-60)*64+b[++C];return b.buffer.slice(0,S)}function h(y,b,S,C,M,A){const k=o.exports.sbrk,O=S+3&-4,P=k(O*C),D=k(M.length),U=new Uint8Array(o.exports.memory.buffer);U.set(M,D);const H=y(P,S,C,D,M.length);if(H===0&&A&&A(P,O,C),b.set(U.subarray(P,P+S*C)),k(P-k(0)),H!==0)throw new Error(`Malformed buffer data: ${H}`)}const f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},g={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return GM={ready:l,supported:!0,decodeVertexBuffer(y,b,S,C,M){h(o.exports.meshopt_decodeVertexBuffer,y,b,S,C,o.exports[f[M]])},decodeIndexBuffer(y,b,S,C){h(o.exports.meshopt_decodeIndexBuffer,y,b,S,C)},decodeIndexSequence(y,b,S,C){h(o.exports.meshopt_decodeIndexSequence,y,b,S,C)},decodeGltfBuffer(y,b,S,C,M,A){h(o.exports[g[M]],y,b,S,C,o.exports[f[A]])}},GM};let WM=null,$J="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function CJ(n,e,t){return r=>{t&&t(r),n&&(WM||(WM=new u1e),WM.setDecoderPath(typeof n=="string"?n:$J),r.setDRACOLoader(WM)),e&&r.setMeshoptDecoder(typeof SL=="function"?SL():SL)}}function Yt(n,e=!0,t=!0,r){return RC(t4,n,CJ(e,t,r))}Yt.preload=(n,e=!0,t=!0,r)=>RC.preload(t4,n,CJ(e,t,r));Yt.clear=n=>RC.clear(t4,n);Yt.setDecoderPath=n=>{$J=n};function h1e(n){const{nodes:e}=Yt(fJ);return[{type:"raw",geometry:e.BASE_FRONT_GRILL_1.geometry,material:e.BASE_FRONT_GRILL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(fJ);const MJ="/assets/BASE_LEFT_COVER_1-DGxtL-mQ.glb";function d1e(n){const{nodes:e}=Yt(MJ);return[{type:"raw",geometry:e.BASE_LEFT_COVER_1.geometry,material:e.BASE_LEFT_COVER_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(MJ);const AJ="/assets/base_link-CxNG3VaF.glb";function f1e(n){const{nodes:e}=Yt(AJ);return[{type:"raw",geometry:e.base_link.geometry,material:e.base_link.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(AJ);const IJ="/assets/BASE_RIGHT_COVER_1-hc0og1we.glb";function p1e(n){const{nodes:e}=Yt(IJ);return[{type:"raw",geometry:e.BASE_RIGHT_COVER_1.geometry,material:e.BASE_RIGHT_COVER_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(IJ);const RJ="/assets/Battery_1-CK31T6T2.glb";function m1e(n){const{nodes:e}=Yt(RJ);return[{type:"raw",geometry:e.Battery_1.geometry,material:e.Battery_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(RJ);const kJ="/assets/BODY_BASE_CONNECTOR_1-BGiepl-q.glb";function g1e(n){const{nodes:e}=Yt(kJ);return[{type:"raw",geometry:e.BODY_BASE_CONNECTOR_1.geometry,material:e.BODY_BASE_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(kJ);const v1e="/assets/DRIVE_TRACK_LEFT_1-BU9fqrup.glb";Yt.preload(v1e);const _1e="/assets/DRIVE_TRACK_RIGHT_1-inJUmdan.glb";Yt.preload(_1e);const OJ="/assets/EYE_LENS_1-dEqRsnM7.glb";function y1e(n){const{nodes:e}=Yt(OJ);return[{type:"raw",geometry:e.EYE_LENS_1.geometry,material:e.EYE_LENS_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(OJ);const LJ="/assets/FACE_1-m_5yRlpQ.glb";function b1e(n){const{nodes:e}=Yt(LJ);return[{type:"raw",geometry:e.FACE_1.geometry,material:e.FACE_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(LJ);const NJ="/assets/FRONT_LEFT_WHEEL_1-CbTd7ucE.glb";function T1e(n){const{nodes:e}=Yt(NJ);return[{type:"raw",geometry:e.FRONT_LEFT_WHEEL_1.geometry,material:e.FRONT_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(NJ);const DJ="/assets/FRONT_RIGHT_WHEEL_1-DndcS7IV.glb";function S1e(n){const{nodes:e}=Yt(DJ);return[{type:"raw",geometry:e.FRONT_RIGHT_WHEEL_1.geometry,material:e.FRONT_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(DJ);const PJ="/assets/HEAD_1-BuuEOSCL.glb";function w1e(n){const{nodes:e}=Yt(PJ);return[{type:"raw",geometry:e.HEAD_1.geometry,material:e.HEAD_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(PJ);const BJ="/assets/HEAD_VENT_LEFT_1-DjAZtO3_.glb";function E1e(n){const{nodes:e}=Yt(BJ);return[{type:"raw",geometry:e.HEAD_VENT_LEFT_1.geometry,material:e.HEAD_VENT_LEFT_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(BJ);const FJ="/assets/HEAD_VENT_RIGHT_1-BfOCx_V8.glb";function x1e(n){const{nodes:e}=Yt(FJ);return[{type:"raw",geometry:e.HEAD_VENT_RIGHT_1.geometry,material:e.HEAD_VENT_RIGHT_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(FJ);const zJ="/assets/LEFT_ARM_1-B8yh6mwG.glb";function $1e(n){const{nodes:e}=Yt(zJ);return[{type:"raw",geometry:e.LEFT_ARM_1.geometry,material:e.LEFT_ARM_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(zJ);const UJ="/assets/LEFT_ARM_CONNECTOR_1-CXrHlUi5.glb";function C1e(n){const{nodes:e}=Yt(UJ);return[{type:"raw",geometry:e.LEFT_ARM_CONNECTOR_1.geometry,material:e.LEFT_ARM_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(UJ);const HJ="/assets/MIDDLE_LEFT_WHEEL_1-BAVTGYOT.glb";function M1e(n){const{nodes:e}=Yt(HJ);return[{type:"raw",geometry:e.MIDDLE_LEFT_WHEEL_1.geometry,material:e.MIDDLE_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(HJ);const GJ="/assets/MIDDLE_RIGHT_WHEEL_1-GMj8YSda.glb";function A1e(n){const{nodes:e}=Yt(GJ);return[{type:"raw",geometry:e.MIDDLE_RIGHT_WHEEL_1.geometry,material:e.MIDDLE_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(GJ);const WJ="/assets/NECK_GLOBE_BASE_1-CpAA3cya.glb";function I1e(n){const{nodes:e}=Yt(WJ);return[{type:"raw",geometry:e.NECK_GLOBE_BASE_1.geometry,material:e.NECK_GLOBE_BASE_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(WJ);const VJ="/assets/REAR_LEFT_WHEEL_1-Ca-hbPaC.glb";function R1e(n){const{nodes:e}=Yt(VJ);return[{type:"raw",geometry:e.REAR_LEFT_WHEEL_1.geometry,material:e.REAR_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(VJ);const jJ="/assets/REAR_RIGHT_WHEEL_1-DLUpOsjA.glb";function k1e(n){const{nodes:e}=Yt(jJ);return[{type:"raw",geometry:e.REAR_RIGHT_WHEEL_1.geometry,material:e.REAR_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(jJ);const YJ="/assets/RIGHT_ARM_1-CsUyYnQa.glb";function O1e(n){const{nodes:e}=Yt(YJ);return[{type:"raw",geometry:e.RIGHT_ARM_1.geometry,material:e.RIGHT_ARM_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(YJ);const XJ="/assets/RIGHT_ARM_CONNECTOR_1-Og6IFGgn.glb";function L1e(n){const{nodes:e}=Yt(XJ);return[{type:"raw",geometry:e.RIGHT_ARM_CONNECTOR_1.geometry,material:e.RIGHT_ARM_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(XJ);const KJ="/assets/Torso_1-Dsttb7Xv.glb";function N1e(n){const{nodes:e}=Yt(KJ);return[{type:"raw",geometry:e.Torso_1.geometry,material:e.Torso_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(KJ);const JJ="/assets/VISOR_GLASS_1-DUgs1YBX.glb";function D1e(n){const{nodes:e}=Yt(JJ);return[{type:"raw",geometry:e.VISOR_GLASS_1.geometry,material:e.VISOR_GLASS_1.material,scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(JJ);const qJ="/assets/eyes_acceptance-DjNbu5s_.glb";function P1e(n){const{nodes:e,materials:t}=Yt(qJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(qJ);const QJ="/assets/eyes_admiration-KaqH2ZpQ.glb";function B1e(n){const{nodes:e,materials:t}=Yt(QJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(QJ);const ZJ="/assets/eyes_amazement-DWEI8ZWl.glb";function F1e(n){const{nodes:e,materials:t}=Yt(ZJ);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(ZJ);const eq="/assets/eyes_anger-BE-ut2mR.glb";function z1e(n){const{nodes:e,materials:t}=Yt(eq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(eq);const tq="/assets/eyes_anticipation-b4B017F8.glb";function U1e(n){const{nodes:e,materials:t}=Yt(tq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(tq);const nq="/assets/eyes_annoyed-B_lb9L_O.glb";function H1e(n){const{nodes:e,materials:t}=Yt(nq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(nq);const rq="/assets/eyes_apprehension-DO3PTom6.glb";function G1e(n){const{nodes:e,materials:t}=Yt(rq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(rq);const iq="/assets/eyes_apprehension_1-KlPiBiR4.glb";function W1e(n){const{nodes:e,materials:t}=Yt(iq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(iq);const sq="/assets/eyes_boredom-C30alIvQ.glb";function V1e(n){const{nodes:e,materials:t}=Yt(sq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(sq);const oq="/assets/eyes_default-CiQ6MqPO.glb";function IG(n){const{nodes:e,materials:t}=Yt(oq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(oq);const aq="/assets/eyes_disgust-BPb8pu-1.glb";function j1e(n){const{nodes:e,materials:t}=Yt(aq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(aq);const lq="/assets/eyes_ecstacy_frame_1-CAg4aUVn.glb";function Y1e(n){const{nodes:e,materials:t}=Yt(lq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(lq);const uq="/assets/eyes_ecstacy_frame_2-BOv7MWj_.glb";function X1e(n){const{nodes:e,materials:t}=Yt(uq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(uq);const cq="/assets/eyes_fear-BL8fvSZL.glb";function K1e(n){const{nodes:e,materials:t}=Yt(cq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(cq);const hq="/assets/eyes_grief-cP7yoD10.glb";function J1e(n){const{nodes:e,materials:t}=Yt(hq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(hq);const dq="/assets/eyes_interest-TZH0NZC_.glb";function q1e(n){const{nodes:e,materials:t}=Yt(dq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(dq);const fq="/assets/eyes_joy-B6oifIYP.glb";function Q1e(n){const{nodes:e,materials:t}=Yt(fq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(fq);const pq="/assets/eyes_loathing-C8bUCbQG.glb";function Z1e(n){const{nodes:e,materials:t}=Yt(pq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(pq);const mq="/assets/eyes_pensiveness-rZoWlZ1k.glb";function eTe(n){const{nodes:e,materials:t}=Yt(mq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(mq);const gq="/assets/eyes_rage-BpM8Xr2x.glb";function tTe(n){const{nodes:e,materials:t}=Yt(gq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(gq);const vq="/assets/eyes_sad-Coo-r01z.glb";function nTe(n){const{nodes:e,materials:t}=Yt(vq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(vq);const _q="/assets/eyes_serenity-C07tnszo.glb";function rTe(n){const{nodes:e,materials:t}=Yt(_q);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(_q);const yq="/assets/eyes_surprise-eDHO2SUu.glb";function iTe(n){const{nodes:e,materials:t}=Yt(yq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(yq);const bq="/assets/eyes_terror-CHUlLq9_.glb";function sTe(n){const{nodes:e,materials:t}=Yt(bq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(bq);const Tq="/assets/eyes_trust-DX4X5mD0.glb";function oTe(n){const{nodes:e,materials:t}=Yt(Tq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(Tq);const Sq="/assets/eyes_vigilance-CGqg-60Y.glb";function aTe(n){const{nodes:e,materials:t}=Yt(Sq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(Sq);const wq="/assets/e_Sleeping-2563MAKh.glb";function lTe(n){const{nodes:e,materials:t}=Yt(wq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(wq);const Eq="/assets/e_SleepingZZZ-CGdMpHBj.glb";function uTe(n){const{nodes:e,materials:t}=Yt(Eq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(Eq);const xq="/assets/e_Contempt-Bmkm0Bdj.glb";function cTe(n){const{nodes:e,materials:t}=Yt(xq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(xq);const $q="/assets/e_ContentLeft-C4jtUFpf.glb";function hTe(n){const{nodes:e,materials:t}=Yt($q);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload($q);const Cq="/assets/e_ContentRight-BNMUpyf0.glb";function dTe(n){const{nodes:e,materials:t}=Yt(Cq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(Cq);const Mq="/assets/e_Disoriented-DCBMT2ea.glb";function fTe(n){const{nodes:e,materials:t}=Yt(Mq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(Mq);const Aq="/assets/e_EcstacyHilarious-Cl8xGsKE.glb";function pTe(n){const{nodes:e,materials:t}=Yt(Aq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(Aq);const Iq="/assets/e_EcstacyStarryEyed-DRKN_BY4.glb";function mTe(n){const{nodes:e,materials:t}=Yt(Iq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(Iq);const Rq="/assets/e_JoyGoofy-B110L9cn.glb";function gTe(n){const{nodes:e,materials:t}=Yt(Rq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(Rq);const kq="/assets/e_JoyGoofy2-BkM5jGNL.glb";function vTe(n){const{nodes:e,materials:t}=Yt(kq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(kq);const Oq="/assets/e_JoyGoofy3-BJy3tNhw.glb";function _Te(n){const{nodes:e,materials:t}=Yt(Oq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(Oq);const Lq="/assets/e_Love-BGY9OUZu.glb";function yTe(n){const{nodes:e,materials:t}=Yt(Lq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(Lq);const Nq="/assets/e_Rage-C3KmRLkq.glb";function bTe(n){const{nodes:e,materials:t}=Yt(Nq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(Nq);const Dq="/assets/e_Rage2-mVNSFSuR.glb";function TTe(n){const{nodes:e,materials:t}=Yt(Dq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(Dq);const Pq="/assets/e_Rage3-BfYM2b7r.glb";function STe(n){const{nodes:e,materials:t}=Yt(Pq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(Pq);const Bq="/assets/e_Rage4-oo9re96u.glb";function wTe(n){const{nodes:e,materials:t}=Yt(Bq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(Bq);const Fq="/assets/e_RemorseShame-BrJPOqTm.glb";function ETe(n){const{nodes:e,materials:t}=Yt(Fq);return[{type:"raw",geometry:e.Plane.geometry,material:t["Material.001"],scale:[1,1,1],rotation:[0,0,0]}]}Yt.preload(Fq);const xTe={"package://misty_description/meshes/BASE_FRONT_GRILL_1.stl":h1e,"package://misty_description/meshes/BASE_LEFT_COVER_1.stl":d1e,"package://misty_description/meshes/base_link.stl":f1e,"package://misty_description/meshes/BASE_RIGHT_COVER_1.stl":p1e,"package://misty_description/meshes/Battery_1.stl":m1e,"package://misty_description/meshes/BODY_BASE_CONNECTOR_1.stl":g1e,"package://misty_description/meshes/EYE_LENS_1.stl":y1e,"package://misty_description/meshes/FACE_1.stl":b1e,"package://misty_description/meshes/FRONT_LEFT_WHEEL_1.stl":T1e,"package://misty_description/meshes/FRONT_RIGHT_WHEEL_1.stl":S1e,"package://misty_description/meshes/HEAD_1.stl":w1e,"package://misty_description/meshes/HEAD_VENT_LEFT_1.stl":E1e,"package://misty_description/meshes/HEAD_VENT_RIGHT_1.stl":x1e,"package://misty_description/meshes/LEFT_ARM_1.stl":$1e,"package://misty_description/meshes/LEFT_ARM_CONNECTOR_1.stl":C1e,"package://misty_description/meshes/MIDDLE_LEFT_WHEEL_1.stl":M1e,"package://misty_description/meshes/MIDDLE_RIGHT_WHEEL_1.stl":A1e,"package://misty_description/meshes/NECK_GLOBE_BASE_1.stl":I1e,"package://misty_description/meshes/REAR_LEFT_WHEEL_1.stl":R1e,"package://misty_description/meshes/REAR_RIGHT_WHEEL_1.stl":k1e,"package://misty_description/meshes/RIGHT_ARM_1.stl":O1e,"package://misty_description/meshes/RIGHT_ARM_CONNECTOR_1.stl":L1e,"package://misty_description/meshes/Torso_1.stl":N1e,"package://misty_description/meshes/VISOR_GLASS_1.stl":D1e,e_Sleeping:lTe,e_SleepingZZZ:uTe,e_Contempt:cTe,e_ContentLeft:hTe,e_ContentRight:dTe,e_Disoriented:fTe,e_EcstacyHilarious:pTe,e_EcstacyStarryEyed:mTe,e_JoyGoofy:gTe,e_JoyGoofy2:vTe,e_JoyGoofy3:_Te,e_Love:yTe,e_Rage:bTe,e_Rage2:TTe,e_Rage3:STe,e_Rage4:wTe,e_RemorseShame:ETe,eyes_acceptance:P1e,eyes_admiration:B1e,eyes_amazement:F1e,eyes_anger:z1e,eyes_annoyed:H1e,eyes_anticipation:U1e,eyes_apprehension:G1e,eyes_apprehension_1:W1e,eyes_boredom:V1e,eyes_default:IG,eyes_disgust:j1e,eyes_distraction:IG,eyes_ecstasy_frame_1:Y1e,eyes_ecstasy_frame_2:X1e,eyes_fear:K1e,eyes_grief:J1e,eyes_interest:q1e,eyes_joy:Q1e,eyes_loathing:Z1e,eyes_pensiveness:eTe,eyes_rage:tTe,eyes_sad:nTe,eyes_serenity:rTe,eyes_surprise:iTe,eyes_terror:sTe,eyes_trust:oTe,eyes_vigilance:aTe};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const mE="143",d1={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},f1={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},zq=0,cP=1,Uq=2,$Te=3,Hq=0,a2=1,t$=2,C1=3,_v=0,cd=1,up=2,Gq=1,CTe=2,gp=0,y_=1,wR=2,hP=3,dP=4,Wq=5,_1=100,Vq=101,n4=102,fP=103,pP=104,jq=200,Yq=201,Xq=202,Kq=203,l2=204,u2=205,Jq=206,qq=207,Qq=208,Zq=209,eQ=210,tQ=0,nQ=1,rQ=2,ER=3,iQ=4,sQ=5,oQ=6,aQ=7,kC=0,lQ=1,uQ=2,c0=0,cQ=1,hQ=2,dQ=3,r4=4,fQ=5,c2=300,Vy=301,jy=302,P$=303,B$=304,gE=306,Pw=1e3,lp=1001,F$=1002,Vl=1003,xR=1004,MTe=1004,$R=1005,ATe=1005,El=1006,i4=1007,ITe=1007,dT=1008,RTe=1008,af=1009,pQ=1010,mQ=1011,s4=1012,gQ=1013,g_=1014,ov=1015,tT=1016,vQ=1017,_Q=1018,Uy=1020,yQ=1021,bQ=1022,Xp=1023,TQ=1024,SQ=1025,Hy=1026,Yy=1027,wQ=1028,EQ=1029,xQ=1030,$Q=1031,CQ=1033,SI=33776,wI=33777,EI=33778,xI=33779,mP=35840,gP=35841,vP=35842,_P=35843,MQ=36196,yP=37492,bP=37496,TP=37808,SP=37809,wP=37810,EP=37811,xP=37812,$P=37813,CP=37814,MP=37815,AP=37816,IP=37817,RP=37818,kP=37819,OP=37820,LP=37821,NP=36492,AQ=2200,IQ=2201,RQ=2202,z$=2300,U$=2301,$I=2302,M1=2400,A1=2401,H$=2402,h2=2500,o4=2501,kTe=0,OTe=1,LTe=2,Mg=3e3,ms=3001,ib=3200,Bw=3201,fT=0,kQ=1,NTe="",Q0="srgb",Ay="srgb-linear",DTe=0,CI=7680,PTe=7681,BTe=7682,FTe=7683,zTe=34055,UTe=34056,HTe=5386,GTe=512,WTe=513,VTe=514,jTe=515,YTe=516,XTe=517,KTe=518,OQ=519,G$=35044,B1=35048,JTe=35040,qTe=35045,QTe=35049,ZTe=35041,eSe=35046,tSe=35050,nSe=35042,rSe="100",DP="300 es",CR=1035;class Ym{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const r=t.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Cf=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let RG=1234567;const F1=Math.PI/180,W$=180/Math.PI;function Bm(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Cf[n&255]+Cf[n>>8&255]+Cf[n>>16&255]+Cf[n>>24&255]+"-"+Cf[e&255]+Cf[e>>8&255]+"-"+Cf[e>>16&15|64]+Cf[e>>24&255]+"-"+Cf[t&63|128]+Cf[t>>8&255]+"-"+Cf[t>>16&255]+Cf[t>>24&255]+Cf[r&255]+Cf[r>>8&255]+Cf[r>>16&255]+Cf[r>>24&255]).toLowerCase()}function dh(n,e,t){return Math.max(e,Math.min(t,n))}function a4(n,e){return(n%e+e)%e}function iSe(n,e,t,r,s){return r+(n-e)*(s-r)/(t-e)}function sSe(n,e,t){return n!==e?(t-n)/(e-n):0}function n$(n,e,t){return(1-t)*n+t*e}function oSe(n,e,t,r){return n$(n,e,1-Math.exp(-t*r))}function aSe(n,e=1){return e-Math.abs(a4(n,e*2)-e)}function lSe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function uSe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function cSe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function hSe(n,e){return n+Math.random()*(e-n)}function dSe(n){return n*(.5-Math.random())}function fSe(n){n!==void 0&&(RG=n);let e=RG+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function pSe(n){return n*F1}function mSe(n){return n*W$}function PP(n){return(n&n-1)===0&&n!==0}function LQ(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function MR(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function gSe(n,e,t,r,s){const o=Math.cos,l=Math.sin,u=o(t/2),h=l(t/2),f=o((e+r)/2),g=l((e+r)/2),y=o((e-r)/2),b=l((e-r)/2),S=o((r-e)/2),C=l((r-e)/2);switch(s){case"XYX":n.set(u*g,h*y,h*b,u*f);break;case"YZY":n.set(h*b,u*g,h*y,u*f);break;case"ZXZ":n.set(h*y,h*b,u*g,u*f);break;case"XZX":n.set(u*g,h*C,h*S,u*f);break;case"YXY":n.set(h*S,u*g,h*C,u*f);break;case"ZYZ":n.set(h*C,h*S,u*g,u*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function vSe(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function _Se(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var NQ=Object.freeze({__proto__:null,DEG2RAD:F1,RAD2DEG:W$,generateUUID:Bm,clamp:dh,euclideanModulo:a4,mapLinear:iSe,inverseLerp:sSe,lerp:n$,damp:oSe,pingpong:aSe,smoothstep:lSe,smootherstep:uSe,randInt:cSe,randFloat:hSe,randFloatSpread:dSe,seededRandom:fSe,degToRad:pSe,radToDeg:mSe,isPowerOfTwo:PP,ceilPowerOfTwo:LQ,floorPowerOfTwo:MR,setQuaternionFromProperEuler:gSe,normalize:_Se,denormalize:vSe});class Kt{constructor(e=0,t=0){Kt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6],this.y=s[1]*t+s[4]*r+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),s=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*r-l*s+e.x,this.y=o*s+l*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class cp{constructor(){cp.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,s,o,l,u,h,f){const g=this.elements;return g[0]=e,g[1]=s,g[2]=u,g[3]=t,g[4]=o,g[5]=h,g[6]=r,g[7]=l,g[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,s=t.elements,o=this.elements,l=r[0],u=r[3],h=r[6],f=r[1],g=r[4],y=r[7],b=r[2],S=r[5],C=r[8],M=s[0],A=s[3],k=s[6],O=s[1],P=s[4],D=s[7],U=s[2],H=s[5],V=s[8];return o[0]=l*M+u*O+h*U,o[3]=l*A+u*P+h*H,o[6]=l*k+u*D+h*V,o[1]=f*M+g*O+y*U,o[4]=f*A+g*P+y*H,o[7]=f*k+g*D+y*V,o[2]=b*M+S*O+C*U,o[5]=b*A+S*P+C*H,o[8]=b*k+S*D+C*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],f=e[7],g=e[8];return t*l*g-t*u*f-r*o*g+r*u*h+s*o*f-s*l*h}invert(){const e=this.elements,t=e[0],r=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],f=e[7],g=e[8],y=g*l-u*f,b=u*h-g*o,S=f*o-l*h,C=t*y+r*b+s*S;if(C===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/C;return e[0]=y*M,e[1]=(s*f-g*r)*M,e[2]=(u*r-s*l)*M,e[3]=b*M,e[4]=(g*t-s*h)*M,e[5]=(s*o-u*t)*M,e[6]=S*M,e[7]=(r*h-f*t)*M,e[8]=(l*t-r*o)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,s,o,l,u){const h=Math.cos(o),f=Math.sin(o);return this.set(r*h,r*f,-r*(h*l+f*u)+l+e,-s*f,s*h,-s*(-f*l+h*u)+u+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),s=this.elements,o=s[0],l=s[3],u=s[6],h=s[1],f=s[4],g=s[7];return s[0]=t*o+r*h,s[3]=t*l+r*f,s[6]=t*u+r*g,s[1]=-r*o+t*h,s[4]=-r*l+t*f,s[7]=-r*u+t*g,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let s=0;s<9;s++)if(t[s]!==r[s])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function DQ(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}const ySe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function nw(n,e){return new ySe[n](e)}function V$(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function z1(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function MI(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const wL={[Q0]:{[Ay]:z1},[Ay]:{[Q0]:MI}},hg={legacyMode:!0,get workingColorSpace(){return Ay},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(wL[e]&&wL[e][t]!==void 0){const r=wL[e][t];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},PQ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},od={r:0,g:0,b:0},Kg={h:0,s:0,l:0},VM={h:0,s:0,l:0};function EL(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function jM(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class Fn{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Q0){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,hg.toWorkingColorSpace(this,t),this}setRGB(e,t,r,s=Ay){return this.r=e,this.g=t,this.b=r,hg.toWorkingColorSpace(this,s),this}setHSL(e,t,r,s=Ay){if(e=a4(e,1),t=dh(t,0,1),r=dh(r,0,1),t===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+t):r+t-r*t,l=2*r-o;this.r=EL(l,o,e+1/3),this.g=EL(l,o,e),this.b=EL(l,o,e-1/3)}return hg.toWorkingColorSpace(this,s),this}setStyle(e,t=Q0){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,hg.toWorkingColorSpace(this,t),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,hg.toWorkingColorSpace(this,t),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u)){const h=parseFloat(o[1])/360,f=parseInt(o[2],10)/100,g=parseInt(o[3],10)/100;return r(o[4]),this.setHSL(h,f,g,t)}break}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(l===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,hg.toWorkingColorSpace(this,t),this;if(l===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,hg.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Q0){const r=PQ[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=z1(e.r),this.g=z1(e.g),this.b=z1(e.b),this}copyLinearToSRGB(e){return this.r=MI(e.r),this.g=MI(e.g),this.b=MI(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Q0){return hg.fromWorkingColorSpace(jM(this,od),e),dh(od.r*255,0,255)<<16^dh(od.g*255,0,255)<<8^dh(od.b*255,0,255)<<0}getHexString(e=Q0){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ay){hg.fromWorkingColorSpace(jM(this,od),t);const r=od.r,s=od.g,o=od.b,l=Math.max(r,s,o),u=Math.min(r,s,o);let h,f;const g=(u+l)/2;if(u===l)h=0,f=0;else{const y=l-u;switch(f=g<=.5?y/(l+u):y/(2-l-u),l){case r:h=(s-o)/y+(s<o?6:0);break;case s:h=(o-r)/y+2;break;case o:h=(r-s)/y+4;break}h/=6}return e.h=h,e.s=f,e.l=g,e}getRGB(e,t=Ay){return hg.fromWorkingColorSpace(jM(this,od),t),e.r=od.r,e.g=od.g,e.b=od.b,e}getStyle(e=Q0){return hg.fromWorkingColorSpace(jM(this,od),e),e!==Q0?`color(${e} ${od.r} ${od.g} ${od.b})`:`rgb(${od.r*255|0},${od.g*255|0},${od.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(Kg),Kg.h+=e,Kg.s+=t,Kg.l+=r,this.setHSL(Kg.h,Kg.s,Kg.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Kg),e.getHSL(VM);const r=n$(Kg.h,VM.h,t),s=n$(Kg.s,VM.s,t),o=n$(Kg.l,VM.l,t);return this.setHSL(r,s,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Fn.NAMES=PQ;let _S;class l4{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{_S===void 0&&(_S=V$("canvas")),_S.width=e.width,_S.height=e.height;const r=_S.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=_S}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=V$("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const s=r.getImageData(0,0,e.width,e.height),o=s.data;for(let l=0;l<o.length;l++)o[l]=z1(o[l]/255)*255;return r.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(z1(t[r]/255)*255):t[r]=z1(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class I1{constructor(e=null){this.isSource=!0,this.uuid=Bm(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?o.push(xL(s[l].image)):o.push(xL(s[l]))}else o=xL(s);r.url=o}return t||(e.images[this.uuid]=r),r}}function xL(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?l4.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let bSe=0;class dc extends Ym{constructor(e=dc.DEFAULT_IMAGE,t=dc.DEFAULT_MAPPING,r=lp,s=lp,o=El,l=dT,u=Xp,h=af,f=1,g=Mg){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:bSe++}),this.uuid=Bm(),this.name="",this.source=new I1(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=f,this.format=u,this.internalFormat=null,this.type=h,this.offset=new Kt(0,0),this.repeat=new Kt(1,1),this.center=new Kt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new cp,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=g,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==c2)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Pw:e.x=e.x-Math.floor(e.x);break;case lp:e.x=e.x<0?0:1;break;case F$:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Pw:e.y=e.y-Math.floor(e.y);break;case lp:e.y=e.y<0?0:1;break;case F$:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}dc.DEFAULT_IMAGE=null;dc.DEFAULT_MAPPING=c2;class Ts{constructor(e=0,t=0,r=0,s=1){Ts.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,s){return this.x=e,this.y=t,this.z=r,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,s=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*r+l[8]*s+l[12]*o,this.y=l[1]*t+l[5]*r+l[9]*s+l[13]*o,this.z=l[2]*t+l[6]*r+l[10]*s+l[14]*o,this.w=l[3]*t+l[7]*r+l[11]*s+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,s,o;const l=e.elements,u=l[0],h=l[4],f=l[8],g=l[1],y=l[5],b=l[9],S=l[2],C=l[6],M=l[10];if(Math.abs(h-g)<.01&&Math.abs(f-S)<.01&&Math.abs(b-C)<.01){if(Math.abs(h+g)<.1&&Math.abs(f+S)<.1&&Math.abs(b+C)<.1&&Math.abs(u+y+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const k=(u+1)/2,O=(y+1)/2,P=(M+1)/2,D=(h+g)/4,U=(f+S)/4,H=(b+C)/4;return k>O&&k>P?k<.01?(r=0,s=.707106781,o=.707106781):(r=Math.sqrt(k),s=D/r,o=U/r):O>P?O<.01?(r=.707106781,s=0,o=.707106781):(s=Math.sqrt(O),r=D/s,o=H/s):P<.01?(r=.707106781,s=.707106781,o=0):(o=Math.sqrt(P),r=U/o,s=H/o),this.set(r,s,o,t),this}let A=Math.sqrt((C-b)*(C-b)+(f-S)*(f-S)+(g-h)*(g-h));return Math.abs(A)<.001&&(A=1),this.x=(C-b)/A,this.y=(f-S)/A,this.z=(g-h)/A,this.w=Math.acos((u+y+M-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Dc extends Ym{constructor(e,t,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ts(0,0,e,t),this.scissorTest=!1,this.viewport=new Ts(0,0,e,t);const s={width:e,height:t,depth:1};this.texture=new dc(s,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:El,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new I1(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class OC extends dc{constructor(e=null,t=1,r=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:s},this.magFilter=Vl,this.minFilter=Vl,this.wrapR=lp,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class TSe extends Dc{constructor(e,t,r){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new OC(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class d2 extends dc{constructor(e=null,t=1,r=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:s},this.magFilter=Vl,this.minFilter=Vl,this.wrapR=lp,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class SSe extends Dc{constructor(e,t,r){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new d2(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class wSe extends Dc{constructor(e,t,r,s={}){super(e,t,s),this.isWebGLMultipleRenderTargets=!0;const o=this.texture;this.texture=[];for(let l=0;l<r;l++)this.texture[l]=o.clone(),this.texture[l].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let s=0,o=this.texture.length;s<o;s++)this.texture[s].image.width=e,this.texture[s].image.height=t,this.texture[s].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class wl{constructor(e=0,t=0,r=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=s}static slerpFlat(e,t,r,s,o,l,u){let h=r[s+0],f=r[s+1],g=r[s+2],y=r[s+3];const b=o[l+0],S=o[l+1],C=o[l+2],M=o[l+3];if(u===0){e[t+0]=h,e[t+1]=f,e[t+2]=g,e[t+3]=y;return}if(u===1){e[t+0]=b,e[t+1]=S,e[t+2]=C,e[t+3]=M;return}if(y!==M||h!==b||f!==S||g!==C){let A=1-u;const k=h*b+f*S+g*C+y*M,O=k>=0?1:-1,P=1-k*k;if(P>Number.EPSILON){const U=Math.sqrt(P),H=Math.atan2(U,k*O);A=Math.sin(A*H)/U,u=Math.sin(u*H)/U}const D=u*O;if(h=h*A+b*D,f=f*A+S*D,g=g*A+C*D,y=y*A+M*D,A===1-u){const U=1/Math.sqrt(h*h+f*f+g*g+y*y);h*=U,f*=U,g*=U,y*=U}}e[t]=h,e[t+1]=f,e[t+2]=g,e[t+3]=y}static multiplyQuaternionsFlat(e,t,r,s,o,l){const u=r[s],h=r[s+1],f=r[s+2],g=r[s+3],y=o[l],b=o[l+1],S=o[l+2],C=o[l+3];return e[t]=u*C+g*y+h*S-f*b,e[t+1]=h*C+g*b+f*y-u*S,e[t+2]=f*C+g*S+u*b-h*y,e[t+3]=g*C-u*y-h*b-f*S,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,s){return this._x=e,this._y=t,this._z=r,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,s=e._y,o=e._z,l=e._order,u=Math.cos,h=Math.sin,f=u(r/2),g=u(s/2),y=u(o/2),b=h(r/2),S=h(s/2),C=h(o/2);switch(l){case"XYZ":this._x=b*g*y+f*S*C,this._y=f*S*y-b*g*C,this._z=f*g*C+b*S*y,this._w=f*g*y-b*S*C;break;case"YXZ":this._x=b*g*y+f*S*C,this._y=f*S*y-b*g*C,this._z=f*g*C-b*S*y,this._w=f*g*y+b*S*C;break;case"ZXY":this._x=b*g*y-f*S*C,this._y=f*S*y+b*g*C,this._z=f*g*C+b*S*y,this._w=f*g*y-b*S*C;break;case"ZYX":this._x=b*g*y-f*S*C,this._y=f*S*y+b*g*C,this._z=f*g*C-b*S*y,this._w=f*g*y+b*S*C;break;case"YZX":this._x=b*g*y+f*S*C,this._y=f*S*y+b*g*C,this._z=f*g*C-b*S*y,this._w=f*g*y-b*S*C;break;case"XZY":this._x=b*g*y-f*S*C,this._y=f*S*y-b*g*C,this._z=f*g*C+b*S*y,this._w=f*g*y+b*S*C;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,s=Math.sin(r);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],s=t[4],o=t[8],l=t[1],u=t[5],h=t[9],f=t[2],g=t[6],y=t[10],b=r+u+y;if(b>0){const S=.5/Math.sqrt(b+1);this._w=.25/S,this._x=(g-h)*S,this._y=(o-f)*S,this._z=(l-s)*S}else if(r>u&&r>y){const S=2*Math.sqrt(1+r-u-y);this._w=(g-h)/S,this._x=.25*S,this._y=(s+l)/S,this._z=(o+f)/S}else if(u>y){const S=2*Math.sqrt(1+u-r-y);this._w=(o-f)/S,this._x=(s+l)/S,this._y=.25*S,this._z=(h+g)/S}else{const S=2*Math.sqrt(1+y-r-u);this._w=(l-s)/S,this._x=(o+f)/S,this._y=(h+g)/S,this._z=.25*S}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(dh(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const s=Math.min(1,t/r);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,s=e._y,o=e._z,l=e._w,u=t._x,h=t._y,f=t._z,g=t._w;return this._x=r*g+l*u+s*f-o*h,this._y=s*g+l*h+o*u-r*f,this._z=o*g+l*f+r*h-s*u,this._w=l*g-r*u-s*h-o*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,s=this._y,o=this._z,l=this._w;let u=l*e._w+r*e._x+s*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=r,this._y=s,this._z=o,this;const h=1-u*u;if(h<=Number.EPSILON){const S=1-t;return this._w=S*l+t*this._w,this._x=S*r+t*this._x,this._y=S*s+t*this._y,this._z=S*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(h),g=Math.atan2(f,u),y=Math.sin((1-t)*g)/f,b=Math.sin(t*g)/f;return this._w=l*y+this._w*b,this._x=r*y+this._x*b,this._y=s*y+this._y*b,this._z=o*y+this._z*b,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),s=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(s),r*Math.sin(o),r*Math.cos(o),t*Math.sin(s))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Me{constructor(e=0,t=0,r=0){Me.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(kG.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(kG.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6]*s,this.y=o[1]*t+o[4]*r+o[7]*s,this.z=o[2]*t+o[5]*r+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,s=this.z,o=e.elements,l=1/(o[3]*t+o[7]*r+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*r+o[8]*s+o[12])*l,this.y=(o[1]*t+o[5]*r+o[9]*s+o[13])*l,this.z=(o[2]*t+o[6]*r+o[10]*s+o[14])*l,this}applyQuaternion(e){const t=this.x,r=this.y,s=this.z,o=e.x,l=e.y,u=e.z,h=e.w,f=h*t+l*s-u*r,g=h*r+u*t-o*s,y=h*s+o*r-l*t,b=-o*t-l*r-u*s;return this.x=f*h+b*-o+g*-u-y*-l,this.y=g*h+b*-l+y*-o-f*-u,this.z=y*h+b*-u+f*-l-g*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*s,this.y=o[1]*t+o[5]*r+o[9]*s,this.z=o[2]*t+o[6]*r+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,s=e.y,o=e.z,l=t.x,u=t.y,h=t.z;return this.x=s*h-o*u,this.y=o*l-r*h,this.z=r*u-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return $L.copy(this).projectOnVector(e),this.sub($L)}reflect(e){return this.sub($L.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(dh(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,s=this.z-e.z;return t*t+r*r+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const s=Math.sin(t)*e;return this.x=s*Math.sin(r),this.y=Math.cos(t)*e,this.z=s*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const $L=new Me,kG=new wl;class p0{constructor(e=new Me(1/0,1/0,1/0),t=new Me(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,s=1/0,o=-1/0,l=-1/0,u=-1/0;for(let h=0,f=e.length;h<f;h+=3){const g=e[h],y=e[h+1],b=e[h+2];g<t&&(t=g),y<r&&(r=y),b<s&&(s=b),g>o&&(o=g),y>l&&(l=y),b>u&&(u=b)}return this.min.set(t,r,s),this.max.set(o,l,u),this}setFromBufferAttribute(e){let t=1/0,r=1/0,s=1/0,o=-1/0,l=-1/0,u=-1/0;for(let h=0,f=e.count;h<f;h++){const g=e.getX(h),y=e.getY(h),b=e.getZ(h);g<t&&(t=g),y<r&&(r=y),b<s&&(s=b),g>o&&(o=g),y>l&&(l=y),b>u&&(u=b)}return this.min.set(t,r,s),this.max.set(o,l,u),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Xb.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const o=r.attributes.position;for(let l=0,u=o.count;l<u;l++)Xb.fromBufferAttribute(o,l).applyMatrix4(e.matrixWorld),this.expandByPoint(Xb)}else r.boundingBox===null&&r.computeBoundingBox(),CL.copy(r.boundingBox),CL.applyMatrix4(e.matrixWorld),this.union(CL);const s=e.children;for(let o=0,l=s.length;o<l;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Xb),Xb.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(cx),YM.subVectors(this.max,cx),yS.subVectors(e.a,cx),bS.subVectors(e.b,cx),TS.subVectors(e.c,cx),ly.subVectors(bS,yS),uy.subVectors(TS,bS),Kb.subVectors(yS,TS);let t=[0,-ly.z,ly.y,0,-uy.z,uy.y,0,-Kb.z,Kb.y,ly.z,0,-ly.x,uy.z,0,-uy.x,Kb.z,0,-Kb.x,-ly.y,ly.x,0,-uy.y,uy.x,0,-Kb.y,Kb.x,0];return!ML(t,yS,bS,TS,YM)||(t=[1,0,0,0,1,0,0,0,1],!ML(t,yS,bS,TS,YM))?!1:(XM.crossVectors(ly,uy),t=[XM.x,XM.y,XM.z],ML(t,yS,bS,TS,YM))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Xb.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Xb).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(n_[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),n_[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),n_[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),n_[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),n_[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),n_[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),n_[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),n_[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(n_),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const n_=[new Me,new Me,new Me,new Me,new Me,new Me,new Me,new Me],Xb=new Me,CL=new p0,yS=new Me,bS=new Me,TS=new Me,ly=new Me,uy=new Me,Kb=new Me,cx=new Me,YM=new Me,XM=new Me,Jb=new Me;function ML(n,e,t,r,s){for(let o=0,l=n.length-3;o<=l;o+=3){Jb.fromArray(n,o);const u=s.x*Math.abs(Jb.x)+s.y*Math.abs(Jb.y)+s.z*Math.abs(Jb.z),h=e.dot(Jb),f=t.dot(Jb),g=r.dot(Jb);if(Math.max(-Math.max(h,f,g),Math.min(h,f,g))>u)return!1}return!0}const ESe=new p0,OG=new Me,KM=new Me,AL=new Me;class xv{constructor(e=new Me,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):ESe.setFromPoints(e).getCenter(r);let s=0;for(let o=0,l=e.length;o<l;o++)s=Math.max(s,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){AL.subVectors(e,this.center);const t=AL.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),s=(r-this.radius)*.5;this.center.add(AL.multiplyScalar(s/r)),this.radius+=s}return this}union(e){return this.center.equals(e.center)===!0?KM.set(0,0,1).multiplyScalar(e.radius):KM.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(OG.copy(e.center).add(KM)),this.expandByPoint(OG.copy(e.center).sub(KM)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const r_=new Me,IL=new Me,JM=new Me,cy=new Me,RL=new Me,qM=new Me,kL=new Me;class LC{constructor(e=new Me,t=new Me(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,r_)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=r_.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(r_.copy(this.direction).multiplyScalar(t).add(this.origin),r_.distanceToSquared(e))}distanceSqToSegment(e,t,r,s){IL.copy(e).add(t).multiplyScalar(.5),JM.copy(t).sub(e).normalize(),cy.copy(this.origin).sub(IL);const o=e.distanceTo(t)*.5,l=-this.direction.dot(JM),u=cy.dot(this.direction),h=-cy.dot(JM),f=cy.lengthSq(),g=Math.abs(1-l*l);let y,b,S,C;if(g>0)if(y=l*h-u,b=l*u-h,C=o*g,y>=0)if(b>=-C)if(b<=C){const M=1/g;y*=M,b*=M,S=y*(y+l*b+2*u)+b*(l*y+b+2*h)+f}else b=o,y=Math.max(0,-(l*b+u)),S=-y*y+b*(b+2*h)+f;else b=-o,y=Math.max(0,-(l*b+u)),S=-y*y+b*(b+2*h)+f;else b<=-C?(y=Math.max(0,-(-l*o+u)),b=y>0?-o:Math.min(Math.max(-o,-h),o),S=-y*y+b*(b+2*h)+f):b<=C?(y=0,b=Math.min(Math.max(-o,-h),o),S=b*(b+2*h)+f):(y=Math.max(0,-(l*o+u)),b=y>0?o:Math.min(Math.max(-o,-h),o),S=-y*y+b*(b+2*h)+f);else b=l>0?-o:o,y=Math.max(0,-(l*b+u)),S=-y*y+b*(b+2*h)+f;return r&&r.copy(this.direction).multiplyScalar(y).add(this.origin),s&&s.copy(JM).multiplyScalar(b).add(IL),S}intersectSphere(e,t){r_.subVectors(e.center,this.origin);const r=r_.dot(this.direction),s=r_.dot(r_)-r*r,o=e.radius*e.radius;if(s>o)return null;const l=Math.sqrt(o-s),u=r-l,h=r+l;return u<0&&h<0?null:u<0?this.at(h,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,s,o,l,u,h;const f=1/this.direction.x,g=1/this.direction.y,y=1/this.direction.z,b=this.origin;return f>=0?(r=(e.min.x-b.x)*f,s=(e.max.x-b.x)*f):(r=(e.max.x-b.x)*f,s=(e.min.x-b.x)*f),g>=0?(o=(e.min.y-b.y)*g,l=(e.max.y-b.y)*g):(o=(e.max.y-b.y)*g,l=(e.min.y-b.y)*g),r>l||o>s||((o>r||r!==r)&&(r=o),(l<s||s!==s)&&(s=l),y>=0?(u=(e.min.z-b.z)*y,h=(e.max.z-b.z)*y):(u=(e.max.z-b.z)*y,h=(e.min.z-b.z)*y),r>h||u>s)||((u>r||r!==r)&&(r=u),(h<s||s!==s)&&(s=h),s<0)?null:this.at(r>=0?r:s,t)}intersectsBox(e){return this.intersectBox(e,r_)!==null}intersectTriangle(e,t,r,s,o){RL.subVectors(t,e),qM.subVectors(r,e),kL.crossVectors(RL,qM);let l=this.direction.dot(kL),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;cy.subVectors(this.origin,e);const h=u*this.direction.dot(qM.crossVectors(cy,qM));if(h<0)return null;const f=u*this.direction.dot(RL.cross(cy));if(f<0||h+f>l)return null;const g=-u*cy.dot(kL);return g<0?null:this.at(g/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ei{constructor(){ei.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,s,o,l,u,h,f,g,y,b,S,C,M,A){const k=this.elements;return k[0]=e,k[4]=t,k[8]=r,k[12]=s,k[1]=o,k[5]=l,k[9]=u,k[13]=h,k[2]=f,k[6]=g,k[10]=y,k[14]=b,k[3]=S,k[7]=C,k[11]=M,k[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ei().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,s=1/SS.setFromMatrixColumn(e,0).length(),o=1/SS.setFromMatrixColumn(e,1).length(),l=1/SS.setFromMatrixColumn(e,2).length();return t[0]=r[0]*s,t[1]=r[1]*s,t[2]=r[2]*s,t[3]=0,t[4]=r[4]*o,t[5]=r[5]*o,t[6]=r[6]*o,t[7]=0,t[8]=r[8]*l,t[9]=r[9]*l,t[10]=r[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,s=e.y,o=e.z,l=Math.cos(r),u=Math.sin(r),h=Math.cos(s),f=Math.sin(s),g=Math.cos(o),y=Math.sin(o);if(e.order==="XYZ"){const b=l*g,S=l*y,C=u*g,M=u*y;t[0]=h*g,t[4]=-h*y,t[8]=f,t[1]=S+C*f,t[5]=b-M*f,t[9]=-u*h,t[2]=M-b*f,t[6]=C+S*f,t[10]=l*h}else if(e.order==="YXZ"){const b=h*g,S=h*y,C=f*g,M=f*y;t[0]=b+M*u,t[4]=C*u-S,t[8]=l*f,t[1]=l*y,t[5]=l*g,t[9]=-u,t[2]=S*u-C,t[6]=M+b*u,t[10]=l*h}else if(e.order==="ZXY"){const b=h*g,S=h*y,C=f*g,M=f*y;t[0]=b-M*u,t[4]=-l*y,t[8]=C+S*u,t[1]=S+C*u,t[5]=l*g,t[9]=M-b*u,t[2]=-l*f,t[6]=u,t[10]=l*h}else if(e.order==="ZYX"){const b=l*g,S=l*y,C=u*g,M=u*y;t[0]=h*g,t[4]=C*f-S,t[8]=b*f+M,t[1]=h*y,t[5]=M*f+b,t[9]=S*f-C,t[2]=-f,t[6]=u*h,t[10]=l*h}else if(e.order==="YZX"){const b=l*h,S=l*f,C=u*h,M=u*f;t[0]=h*g,t[4]=M-b*y,t[8]=C*y+S,t[1]=y,t[5]=l*g,t[9]=-u*g,t[2]=-f*g,t[6]=S*y+C,t[10]=b-M*y}else if(e.order==="XZY"){const b=l*h,S=l*f,C=u*h,M=u*f;t[0]=h*g,t[4]=-y,t[8]=f*g,t[1]=b*y+M,t[5]=l*g,t[9]=S*y-C,t[2]=C*y-S,t[6]=u*g,t[10]=M*y+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(xSe,e,$Se)}lookAt(e,t,r){const s=this.elements;return Cm.subVectors(e,t),Cm.lengthSq()===0&&(Cm.z=1),Cm.normalize(),hy.crossVectors(r,Cm),hy.lengthSq()===0&&(Math.abs(r.z)===1?Cm.x+=1e-4:Cm.z+=1e-4,Cm.normalize(),hy.crossVectors(r,Cm)),hy.normalize(),QM.crossVectors(Cm,hy),s[0]=hy.x,s[4]=QM.x,s[8]=Cm.x,s[1]=hy.y,s[5]=QM.y,s[9]=Cm.y,s[2]=hy.z,s[6]=QM.z,s[10]=Cm.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,s=t.elements,o=this.elements,l=r[0],u=r[4],h=r[8],f=r[12],g=r[1],y=r[5],b=r[9],S=r[13],C=r[2],M=r[6],A=r[10],k=r[14],O=r[3],P=r[7],D=r[11],U=r[15],H=s[0],V=s[4],z=s[8],Z=s[12],oe=s[1],ue=s[5],q=s[9],ae=s[13],le=s[2],ce=s[6],ge=s[10],$e=s[14],K=s[3],ie=s[7],se=s[11],fe=s[15];return o[0]=l*H+u*oe+h*le+f*K,o[4]=l*V+u*ue+h*ce+f*ie,o[8]=l*z+u*q+h*ge+f*se,o[12]=l*Z+u*ae+h*$e+f*fe,o[1]=g*H+y*oe+b*le+S*K,o[5]=g*V+y*ue+b*ce+S*ie,o[9]=g*z+y*q+b*ge+S*se,o[13]=g*Z+y*ae+b*$e+S*fe,o[2]=C*H+M*oe+A*le+k*K,o[6]=C*V+M*ue+A*ce+k*ie,o[10]=C*z+M*q+A*ge+k*se,o[14]=C*Z+M*ae+A*$e+k*fe,o[3]=O*H+P*oe+D*le+U*K,o[7]=O*V+P*ue+D*ce+U*ie,o[11]=O*z+P*q+D*ge+U*se,o[15]=O*Z+P*ae+D*$e+U*fe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],s=e[8],o=e[12],l=e[1],u=e[5],h=e[9],f=e[13],g=e[2],y=e[6],b=e[10],S=e[14],C=e[3],M=e[7],A=e[11],k=e[15];return C*(+o*h*y-s*f*y-o*u*b+r*f*b+s*u*S-r*h*S)+M*(+t*h*S-t*f*b+o*l*b-s*l*S+s*f*g-o*h*g)+A*(+t*f*y-t*u*S-o*l*y+r*l*S+o*u*g-r*f*g)+k*(-s*u*g-t*h*y+t*u*b+s*l*y-r*l*b+r*h*g)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],f=e[7],g=e[8],y=e[9],b=e[10],S=e[11],C=e[12],M=e[13],A=e[14],k=e[15],O=y*A*f-M*b*f+M*h*S-u*A*S-y*h*k+u*b*k,P=C*b*f-g*A*f-C*h*S+l*A*S+g*h*k-l*b*k,D=g*M*f-C*y*f+C*u*S-l*M*S-g*u*k+l*y*k,U=C*y*h-g*M*h-C*u*b+l*M*b+g*u*A-l*y*A,H=t*O+r*P+s*D+o*U;if(H===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const V=1/H;return e[0]=O*V,e[1]=(M*b*o-y*A*o-M*s*S+r*A*S+y*s*k-r*b*k)*V,e[2]=(u*A*o-M*h*o+M*s*f-r*A*f-u*s*k+r*h*k)*V,e[3]=(y*h*o-u*b*o-y*s*f+r*b*f+u*s*S-r*h*S)*V,e[4]=P*V,e[5]=(g*A*o-C*b*o+C*s*S-t*A*S-g*s*k+t*b*k)*V,e[6]=(C*h*o-l*A*o-C*s*f+t*A*f+l*s*k-t*h*k)*V,e[7]=(l*b*o-g*h*o+g*s*f-t*b*f-l*s*S+t*h*S)*V,e[8]=D*V,e[9]=(C*y*o-g*M*o-C*r*S+t*M*S+g*r*k-t*y*k)*V,e[10]=(l*M*o-C*u*o+C*r*f-t*M*f-l*r*k+t*u*k)*V,e[11]=(g*u*o-l*y*o-g*r*f+t*y*f+l*r*S-t*u*S)*V,e[12]=U*V,e[13]=(g*M*s-C*y*s+C*r*b-t*M*b-g*r*A+t*y*A)*V,e[14]=(C*u*s-l*M*s-C*r*h+t*M*h+l*r*A-t*u*A)*V,e[15]=(l*y*s-g*u*s+g*r*h-t*y*h-l*r*b+t*u*b)*V,this}scale(e){const t=this.elements,r=e.x,s=e.y,o=e.z;return t[0]*=r,t[4]*=s,t[8]*=o,t[1]*=r,t[5]*=s,t[9]*=o,t[2]*=r,t[6]*=s,t[10]*=o,t[3]*=r,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,s))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),s=Math.sin(t),o=1-r,l=e.x,u=e.y,h=e.z,f=o*l,g=o*u;return this.set(f*l+r,f*u-s*h,f*h+s*u,0,f*u+s*h,g*u+r,g*h-s*l,0,f*h-s*u,g*h+s*l,o*h*h+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,s,o,l){return this.set(1,r,o,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,r){const s=this.elements,o=t._x,l=t._y,u=t._z,h=t._w,f=o+o,g=l+l,y=u+u,b=o*f,S=o*g,C=o*y,M=l*g,A=l*y,k=u*y,O=h*f,P=h*g,D=h*y,U=r.x,H=r.y,V=r.z;return s[0]=(1-(M+k))*U,s[1]=(S+D)*U,s[2]=(C-P)*U,s[3]=0,s[4]=(S-D)*H,s[5]=(1-(b+k))*H,s[6]=(A+O)*H,s[7]=0,s[8]=(C+P)*V,s[9]=(A-O)*V,s[10]=(1-(b+M))*V,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,r){const s=this.elements;let o=SS.set(s[0],s[1],s[2]).length();const l=SS.set(s[4],s[5],s[6]).length(),u=SS.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],Jg.copy(this);const h=1/o,f=1/l,g=1/u;return Jg.elements[0]*=h,Jg.elements[1]*=h,Jg.elements[2]*=h,Jg.elements[4]*=f,Jg.elements[5]*=f,Jg.elements[6]*=f,Jg.elements[8]*=g,Jg.elements[9]*=g,Jg.elements[10]*=g,t.setFromRotationMatrix(Jg),r.x=o,r.y=l,r.z=u,this}makePerspective(e,t,r,s,o,l){const u=this.elements,h=2*o/(t-e),f=2*o/(r-s),g=(t+e)/(t-e),y=(r+s)/(r-s),b=-(l+o)/(l-o),S=-2*l*o/(l-o);return u[0]=h,u[4]=0,u[8]=g,u[12]=0,u[1]=0,u[5]=f,u[9]=y,u[13]=0,u[2]=0,u[6]=0,u[10]=b,u[14]=S,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,r,s,o,l){const u=this.elements,h=1/(t-e),f=1/(r-s),g=1/(l-o),y=(t+e)*h,b=(r+s)*f,S=(l+o)*g;return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-y,u[1]=0,u[5]=2*f,u[9]=0,u[13]=-b,u[2]=0,u[6]=0,u[10]=-2*g,u[14]=-S,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let s=0;s<16;s++)if(t[s]!==r[s])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const SS=new Me,Jg=new ei,xSe=new Me(0,0,0),$Se=new Me(1,1,1),hy=new Me,QM=new Me,Cm=new Me,LG=new ei,NG=new wl;class pT{constructor(e=0,t=0,r=0,s=pT.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,s=this._order){return this._x=e,this._y=t,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],h=s[1],f=s[5],g=s[9],y=s[2],b=s[6],S=s[10];switch(t){case"XYZ":this._y=Math.asin(dh(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-g,S),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(b,f),this._z=0);break;case"YXZ":this._x=Math.asin(-dh(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(u,S),this._z=Math.atan2(h,f)):(this._y=Math.atan2(-y,o),this._z=0);break;case"ZXY":this._x=Math.asin(dh(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(-y,S),this._z=Math.atan2(-l,f)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-dh(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(b,S),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-l,f));break;case"YZX":this._z=Math.asin(dh(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-g,f),this._y=Math.atan2(-y,o)):(this._x=0,this._y=Math.atan2(u,S));break;case"XZY":this._z=Math.asin(-dh(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(b,f),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-g,S),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return LG.makeRotationFromQuaternion(e),this.setFromRotationMatrix(LG,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return NG.setFromEuler(this),this.setFromQuaternion(NG,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}pT.DefaultOrder="XYZ";pT.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class U1{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let CSe=0;const DG=new Me,wS=new wl,i_=new ei,ZM=new Me,hx=new Me,MSe=new Me,ASe=new wl,PG=new Me(1,0,0),BG=new Me(0,1,0),FG=new Me(0,0,1),ISe={type:"added"},zG={type:"removed"};class oo extends Ym{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:CSe++}),this.uuid=Bm(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=oo.DefaultUp.clone();const e=new Me,t=new pT,r=new wl,s=new Me(1,1,1);function o(){r.setFromEuler(t,!1)}function l(){t.setFromQuaternion(r,void 0,!1)}t._onChange(o),r._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new ei},normalMatrix:{value:new cp}}),this.matrix=new ei,this.matrixWorld=new ei,this.matrixAutoUpdate=oo.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new U1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return wS.setFromAxisAngle(e,t),this.quaternion.multiply(wS),this}rotateOnWorldAxis(e,t){return wS.setFromAxisAngle(e,t),this.quaternion.premultiply(wS),this}rotateX(e){return this.rotateOnAxis(PG,e)}rotateY(e){return this.rotateOnAxis(BG,e)}rotateZ(e){return this.rotateOnAxis(FG,e)}translateOnAxis(e,t){return DG.copy(e).applyQuaternion(this.quaternion),this.position.add(DG.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(PG,e)}translateY(e){return this.translateOnAxis(BG,e)}translateZ(e){return this.translateOnAxis(FG,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(i_.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?ZM.copy(e):ZM.set(e,t,r);const s=this.parent;this.updateWorldMatrix(!0,!1),hx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?i_.lookAt(hx,ZM,this.up):i_.lookAt(ZM,hx,this.up),this.quaternion.setFromRotationMatrix(i_),s&&(i_.extractRotation(s.matrixWorld),wS.setFromRotationMatrix(i_),this.quaternion.premultiply(wS.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ISe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(zG)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(zG)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),i_.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),i_.multiply(e.parent.matrixWorld)),e.applyMatrix4(i_),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hx,e,MSe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hx,ASe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let o=0,l=s.length;o<l;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON()));function o(u,h){return u[h.uuid]===void 0&&(u[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const h=u.shapes;if(Array.isArray(h))for(let f=0,g=h.length;f<g;f++){const y=h[f];o(e.shapes,y)}else o(e.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let h=0,f=this.material.length;h<f;h++)u.push(o(e.materials,this.material[h]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const h=this.animations[u];s.animations.push(o(e.animations,h))}}if(t){const u=l(e.geometries),h=l(e.materials),f=l(e.textures),g=l(e.images),y=l(e.shapes),b=l(e.skeletons),S=l(e.animations),C=l(e.nodes);u.length>0&&(r.geometries=u),h.length>0&&(r.materials=h),f.length>0&&(r.textures=f),g.length>0&&(r.images=g),y.length>0&&(r.shapes=y),b.length>0&&(r.skeletons=b),S.length>0&&(r.animations=S),C.length>0&&(r.nodes=C)}return r.object=s,r;function l(u){const h=[];for(const f in u){const g=u[f];delete g.metadata,h.push(g)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const s=e.children[r];this.add(s.clone())}return this}}oo.DefaultUp=new Me(0,1,0);oo.DefaultMatrixAutoUpdate=!0;const qg=new Me,s_=new Me,OL=new Me,o_=new Me,ES=new Me,xS=new Me,UG=new Me,LL=new Me,NL=new Me,DL=new Me;class Rm{constructor(e=new Me,t=new Me,r=new Me){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,s){s.subVectors(r,t),qg.subVectors(e,t),s.cross(qg);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,r,s,o){qg.subVectors(s,t),s_.subVectors(r,t),OL.subVectors(e,t);const l=qg.dot(qg),u=qg.dot(s_),h=qg.dot(OL),f=s_.dot(s_),g=s_.dot(OL),y=l*f-u*u;if(y===0)return o.set(-2,-1,-1);const b=1/y,S=(f*h-u*g)*b,C=(l*g-u*h)*b;return o.set(1-S-C,C,S)}static containsPoint(e,t,r,s){return this.getBarycoord(e,t,r,s,o_),o_.x>=0&&o_.y>=0&&o_.x+o_.y<=1}static getUV(e,t,r,s,o,l,u,h){return this.getBarycoord(e,t,r,s,o_),h.set(0,0),h.addScaledVector(o,o_.x),h.addScaledVector(l,o_.y),h.addScaledVector(u,o_.z),h}static isFrontFacing(e,t,r,s){return qg.subVectors(r,t),s_.subVectors(e,t),qg.cross(s_).dot(s)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,s){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,r,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return qg.subVectors(this.c,this.b),s_.subVectors(this.a,this.b),qg.cross(s_).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Rm.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Rm.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,s,o){return Rm.getUV(e,this.a,this.b,this.c,t,r,s,o)}containsPoint(e){return Rm.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Rm.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,s=this.b,o=this.c;let l,u;ES.subVectors(s,r),xS.subVectors(o,r),LL.subVectors(e,r);const h=ES.dot(LL),f=xS.dot(LL);if(h<=0&&f<=0)return t.copy(r);NL.subVectors(e,s);const g=ES.dot(NL),y=xS.dot(NL);if(g>=0&&y<=g)return t.copy(s);const b=h*y-g*f;if(b<=0&&h>=0&&g<=0)return l=h/(h-g),t.copy(r).addScaledVector(ES,l);DL.subVectors(e,o);const S=ES.dot(DL),C=xS.dot(DL);if(C>=0&&S<=C)return t.copy(o);const M=S*f-h*C;if(M<=0&&f>=0&&C<=0)return u=f/(f-C),t.copy(r).addScaledVector(xS,u);const A=g*C-S*y;if(A<=0&&y-g>=0&&S-C>=0)return UG.subVectors(o,s),u=(y-g)/(y-g+(S-C)),t.copy(s).addScaledVector(UG,u);const k=1/(A+M+b);return l=M*k,u=b*k,t.copy(r).addScaledVector(ES,l).addScaledVector(xS,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let RSe=0;class hd extends Ym{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:RSe++}),this.uuid=Bm(),this.name="",this.type="Material",this.blending=y_,this.side=_v,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=l2,this.blendDst=u2,this.blendEquation=_1,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ER,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=OQ,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=CI,this.stencilZFail=CI,this.stencilZPass=CI,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===Gq;continue}const s=this[t];if(s===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}s&&s.isColor?s.set(r):s&&s.isVector3&&r&&r.isVector3?s.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==y_&&(r.blending=this.blending),this.side!==_v&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function s(o){const l=[];for(const u in o){const h=o[u];delete h.metadata,l.push(h)}return l}if(t){const o=s(e.textures),l=s(e.images);o.length>0&&(r.textures=o),l.length>0&&(r.images=l)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const s=t.length;r=new Array(s);for(let o=0;o!==s;++o)r[o]=t[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class m0 extends hd{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Fn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const kh=new Me,eA=new Kt;class zo{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=G$,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[r+s];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),l=new Fn),t[r++]=l.r,t[r++]=l.g,t[r++]=l.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),l=new Kt),t[r++]=l.x,t[r++]=l.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),l=new Me),t[r++]=l.x,t[r++]=l.y,t[r++]=l.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),l=new Ts),t[r++]=l.x,t[r++]=l.y,t[r++]=l.z,t[r++]=l.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)eA.fromBufferAttribute(this,t),eA.applyMatrix3(e),this.setXY(t,eA.x,eA.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)kh.fromBufferAttribute(this,t),kh.applyMatrix3(e),this.setXYZ(t,kh.x,kh.y,kh.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)kh.fromBufferAttribute(this,t),kh.applyMatrix4(e),this.setXYZ(t,kh.x,kh.y,kh.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)kh.fromBufferAttribute(this,t),kh.applyNormalMatrix(e),this.setXYZ(t,kh.x,kh.y,kh.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)kh.fromBufferAttribute(this,t),kh.transformDirection(e),this.setXYZ(t,kh.x,kh.y,kh.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=s,this}setXYZW(e,t,r,s,o){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==G$&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class kSe extends zo{constructor(e,t,r){super(new Int8Array(e),t,r)}}class OSe extends zo{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class LSe extends zo{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class NSe extends zo{constructor(e,t,r){super(new Int16Array(e),t,r)}}class u4 extends zo{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class DSe extends zo{constructor(e,t,r){super(new Int32Array(e),t,r)}}class c4 extends zo{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class PSe extends zo{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}}class ur extends zo{constructor(e,t,r){super(new Float32Array(e),t,r)}}class BSe extends zo{constructor(e,t,r){super(new Float64Array(e),t,r)}}let FSe=0;const ug=new ei,PL=new oo,$S=new Me,Mm=new p0,dx=new p0,Sd=new Me;class ui extends Ym{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:FSe++}),this.uuid=Bm(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(DQ(e)?c4:u4)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new cp().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ug.makeRotationFromQuaternion(e),this.applyMatrix4(ug),this}rotateX(e){return ug.makeRotationX(e),this.applyMatrix4(ug),this}rotateY(e){return ug.makeRotationY(e),this.applyMatrix4(ug),this}rotateZ(e){return ug.makeRotationZ(e),this.applyMatrix4(ug),this}translate(e,t,r){return ug.makeTranslation(e,t,r),this.applyMatrix4(ug),this}scale(e,t,r){return ug.makeScale(e,t,r),this.applyMatrix4(ug),this}lookAt(e){return PL.lookAt(e),PL.updateMatrix(),this.applyMatrix4(PL.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter($S).negate(),this.translate($S.x,$S.y,$S.z),this}setFromPoints(e){const t=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new ur(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new p0);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Me(-1/0,-1/0,-1/0),new Me(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,s=t.length;r<s;r++){const o=t[r];Mm.setFromBufferAttribute(o),this.morphTargetsRelative?(Sd.addVectors(this.boundingBox.min,Mm.min),this.boundingBox.expandByPoint(Sd),Sd.addVectors(this.boundingBox.max,Mm.max),this.boundingBox.expandByPoint(Sd)):(this.boundingBox.expandByPoint(Mm.min),this.boundingBox.expandByPoint(Mm.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xv);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Me,1/0);return}if(e){const r=this.boundingSphere.center;if(Mm.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const u=t[o];dx.setFromBufferAttribute(u),this.morphTargetsRelative?(Sd.addVectors(Mm.min,dx.min),Mm.expandByPoint(Sd),Sd.addVectors(Mm.max,dx.max),Mm.expandByPoint(Sd)):(Mm.expandByPoint(dx.min),Mm.expandByPoint(dx.max))}Mm.getCenter(r);let s=0;for(let o=0,l=e.count;o<l;o++)Sd.fromBufferAttribute(e,o),s=Math.max(s,r.distanceToSquared(Sd));if(t)for(let o=0,l=t.length;o<l;o++){const u=t[o],h=this.morphTargetsRelative;for(let f=0,g=u.count;f<g;f++)Sd.fromBufferAttribute(u,f),h&&($S.fromBufferAttribute(e,f),Sd.add($S)),s=Math.max(s,r.distanceToSquared(Sd))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,s=t.position.array,o=t.normal.array,l=t.uv.array,u=s.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new zo(new Float32Array(4*u),4));const h=this.getAttribute("tangent").array,f=[],g=[];for(let oe=0;oe<u;oe++)f[oe]=new Me,g[oe]=new Me;const y=new Me,b=new Me,S=new Me,C=new Kt,M=new Kt,A=new Kt,k=new Me,O=new Me;function P(oe,ue,q){y.fromArray(s,oe*3),b.fromArray(s,ue*3),S.fromArray(s,q*3),C.fromArray(l,oe*2),M.fromArray(l,ue*2),A.fromArray(l,q*2),b.sub(y),S.sub(y),M.sub(C),A.sub(C);const ae=1/(M.x*A.y-A.x*M.y);!isFinite(ae)||(k.copy(b).multiplyScalar(A.y).addScaledVector(S,-M.y).multiplyScalar(ae),O.copy(S).multiplyScalar(M.x).addScaledVector(b,-A.x).multiplyScalar(ae),f[oe].add(k),f[ue].add(k),f[q].add(k),g[oe].add(O),g[ue].add(O),g[q].add(O))}let D=this.groups;D.length===0&&(D=[{start:0,count:r.length}]);for(let oe=0,ue=D.length;oe<ue;++oe){const q=D[oe],ae=q.start,le=q.count;for(let ce=ae,ge=ae+le;ce<ge;ce+=3)P(r[ce+0],r[ce+1],r[ce+2])}const U=new Me,H=new Me,V=new Me,z=new Me;function Z(oe){V.fromArray(o,oe*3),z.copy(V);const ue=f[oe];U.copy(ue),U.sub(V.multiplyScalar(V.dot(ue))).normalize(),H.crossVectors(z,ue);const q=H.dot(g[oe])<0?-1:1;h[oe*4]=U.x,h[oe*4+1]=U.y,h[oe*4+2]=U.z,h[oe*4+3]=q}for(let oe=0,ue=D.length;oe<ue;++oe){const q=D[oe],ae=q.start,le=q.count;for(let ce=ae,ge=ae+le;ce<ge;ce+=3)Z(r[ce+0]),Z(r[ce+1]),Z(r[ce+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new zo(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let b=0,S=r.count;b<S;b++)r.setXYZ(b,0,0,0);const s=new Me,o=new Me,l=new Me,u=new Me,h=new Me,f=new Me,g=new Me,y=new Me;if(e)for(let b=0,S=e.count;b<S;b+=3){const C=e.getX(b+0),M=e.getX(b+1),A=e.getX(b+2);s.fromBufferAttribute(t,C),o.fromBufferAttribute(t,M),l.fromBufferAttribute(t,A),g.subVectors(l,o),y.subVectors(s,o),g.cross(y),u.fromBufferAttribute(r,C),h.fromBufferAttribute(r,M),f.fromBufferAttribute(r,A),u.add(g),h.add(g),f.add(g),r.setXYZ(C,u.x,u.y,u.z),r.setXYZ(M,h.x,h.y,h.z),r.setXYZ(A,f.x,f.y,f.z)}else for(let b=0,S=t.count;b<S;b+=3)s.fromBufferAttribute(t,b+0),o.fromBufferAttribute(t,b+1),l.fromBufferAttribute(t,b+2),g.subVectors(l,o),y.subVectors(s,o),g.cross(y),r.setXYZ(b+0,g.x,g.y,g.z),r.setXYZ(b+1,g.x,g.y,g.z),r.setXYZ(b+2,g.x,g.y,g.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const s in r){if(e.attributes[s]===void 0)continue;const o=r[s].array,l=e.attributes[s],u=l.array,h=l.itemSize*t,f=Math.min(u.length,o.length-h);for(let g=0,y=h;g<f;g++,y++)o[y]=u[g]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Sd.fromBufferAttribute(e,t),Sd.normalize(),e.setXYZ(t,Sd.x,Sd.y,Sd.z)}toNonIndexed(){function e(u,h){const f=u.array,g=u.itemSize,y=u.normalized,b=new f.constructor(h.length*g);let S=0,C=0;for(let M=0,A=h.length;M<A;M++){u.isInterleavedBufferAttribute?S=h[M]*u.data.stride+u.offset:S=h[M]*g;for(let k=0;k<g;k++)b[C++]=f[S++]}return new zo(b,g,y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ui,r=this.index.array,s=this.attributes;for(const u in s){const h=s[u],f=e(h,r);t.setAttribute(u,f)}const o=this.morphAttributes;for(const u in o){const h=[],f=o[u];for(let g=0,y=f.length;g<y;g++){const b=f[g],S=e(b,r);h.push(S)}t.morphAttributes[u]=h}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,h=l.length;u<h;u++){const f=l[u];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const f in h)h[f]!==void 0&&(e[f]=h[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const h in r){const f=r[h];e.data.attributes[h]=f.toJSON(e.data)}const s={};let o=!1;for(const h in this.morphAttributes){const f=this.morphAttributes[h],g=[];for(let y=0,b=f.length;y<b;y++){const S=f[y];g.push(S.toJSON(e.data))}g.length>0&&(s[h]=g,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const s=e.attributes;for(const f in s){const g=s[f];this.setAttribute(f,g.clone(t))}const o=e.morphAttributes;for(const f in o){const g=[],y=o[f];for(let b=0,S=y.length;b<S;b++)g.push(y[b].clone(t));this.morphAttributes[f]=g}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let f=0,g=l.length;f<g;f++){const y=l[f];this.addGroup(y.start,y.count,y.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const HG=new ei,CS=new LC,BL=new xv,dy=new Me,fy=new Me,py=new Me,FL=new Me,zL=new Me,UL=new Me,tA=new Me,nA=new Me,rA=new Me,iA=new Kt,sA=new Kt,oA=new Kt,HL=new Me,aA=new Me;class Hn extends oo{constructor(e=new ui,t=new m0){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}raycast(e,t){const r=this.geometry,s=this.material,o=this.matrixWorld;if(s===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),BL.copy(r.boundingSphere),BL.applyMatrix4(o),e.ray.intersectsSphere(BL)===!1)||(HG.copy(o).invert(),CS.copy(e.ray).applyMatrix4(HG),r.boundingBox!==null&&CS.intersectsBox(r.boundingBox)===!1))return;let l;const u=r.index,h=r.attributes.position,f=r.morphAttributes.position,g=r.morphTargetsRelative,y=r.attributes.uv,b=r.attributes.uv2,S=r.groups,C=r.drawRange;if(u!==null)if(Array.isArray(s))for(let M=0,A=S.length;M<A;M++){const k=S[M],O=s[k.materialIndex],P=Math.max(k.start,C.start),D=Math.min(u.count,Math.min(k.start+k.count,C.start+C.count));for(let U=P,H=D;U<H;U+=3){const V=u.getX(U),z=u.getX(U+1),Z=u.getX(U+2);l=lA(this,O,e,CS,h,f,g,y,b,V,z,Z),l&&(l.faceIndex=Math.floor(U/3),l.face.materialIndex=k.materialIndex,t.push(l))}}else{const M=Math.max(0,C.start),A=Math.min(u.count,C.start+C.count);for(let k=M,O=A;k<O;k+=3){const P=u.getX(k),D=u.getX(k+1),U=u.getX(k+2);l=lA(this,s,e,CS,h,f,g,y,b,P,D,U),l&&(l.faceIndex=Math.floor(k/3),t.push(l))}}else if(h!==void 0)if(Array.isArray(s))for(let M=0,A=S.length;M<A;M++){const k=S[M],O=s[k.materialIndex],P=Math.max(k.start,C.start),D=Math.min(h.count,Math.min(k.start+k.count,C.start+C.count));for(let U=P,H=D;U<H;U+=3){const V=U,z=U+1,Z=U+2;l=lA(this,O,e,CS,h,f,g,y,b,V,z,Z),l&&(l.faceIndex=Math.floor(U/3),l.face.materialIndex=k.materialIndex,t.push(l))}}else{const M=Math.max(0,C.start),A=Math.min(h.count,C.start+C.count);for(let k=M,O=A;k<O;k+=3){const P=k,D=k+1,U=k+2;l=lA(this,s,e,CS,h,f,g,y,b,P,D,U),l&&(l.faceIndex=Math.floor(k/3),t.push(l))}}}}function zSe(n,e,t,r,s,o,l,u){let h;if(e.side===cd?h=r.intersectTriangle(l,o,s,!0,u):h=r.intersectTriangle(s,o,l,e.side!==up,u),h===null)return null;aA.copy(u),aA.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(aA);return f<t.near||f>t.far?null:{distance:f,point:aA.clone(),object:n}}function lA(n,e,t,r,s,o,l,u,h,f,g,y){dy.fromBufferAttribute(s,f),fy.fromBufferAttribute(s,g),py.fromBufferAttribute(s,y);const b=n.morphTargetInfluences;if(o&&b){tA.set(0,0,0),nA.set(0,0,0),rA.set(0,0,0);for(let C=0,M=o.length;C<M;C++){const A=b[C],k=o[C];A!==0&&(FL.fromBufferAttribute(k,f),zL.fromBufferAttribute(k,g),UL.fromBufferAttribute(k,y),l?(tA.addScaledVector(FL,A),nA.addScaledVector(zL,A),rA.addScaledVector(UL,A)):(tA.addScaledVector(FL.sub(dy),A),nA.addScaledVector(zL.sub(fy),A),rA.addScaledVector(UL.sub(py),A)))}dy.add(tA),fy.add(nA),py.add(rA)}n.isSkinnedMesh&&(n.boneTransform(f,dy),n.boneTransform(g,fy),n.boneTransform(y,py));const S=zSe(n,e,t,r,dy,fy,py,HL);if(S){u&&(iA.fromBufferAttribute(u,f),sA.fromBufferAttribute(u,g),oA.fromBufferAttribute(u,y),S.uv=Rm.getUV(HL,dy,fy,py,iA,sA,oA,new Kt)),h&&(iA.fromBufferAttribute(h,f),sA.fromBufferAttribute(h,g),oA.fromBufferAttribute(h,y),S.uv2=Rm.getUV(HL,dy,fy,py,iA,sA,oA,new Kt));const C={a:f,b:g,c:y,normal:new Me,materialIndex:0};Rm.getNormal(dy,fy,py,C.normal),S.face=C}return S}class mu extends ui{constructor(e=1,t=1,r=1,s=1,o=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:s,heightSegments:o,depthSegments:l};const u=this;s=Math.floor(s),o=Math.floor(o),l=Math.floor(l);const h=[],f=[],g=[],y=[];let b=0,S=0;C("z","y","x",-1,-1,r,t,e,l,o,0),C("z","y","x",1,-1,r,t,-e,l,o,1),C("x","z","y",1,1,e,r,t,s,l,2),C("x","z","y",1,-1,e,r,-t,s,l,3),C("x","y","z",1,-1,e,t,r,s,o,4),C("x","y","z",-1,-1,e,t,-r,s,o,5),this.setIndex(h),this.setAttribute("position",new ur(f,3)),this.setAttribute("normal",new ur(g,3)),this.setAttribute("uv",new ur(y,2));function C(M,A,k,O,P,D,U,H,V,z,Z){const oe=D/V,ue=U/z,q=D/2,ae=U/2,le=H/2,ce=V+1,ge=z+1;let $e=0,K=0;const ie=new Me;for(let se=0;se<ge;se++){const fe=se*ue-ae;for(let Se=0;Se<ce;Se++){const Ue=Se*oe-q;ie[M]=Ue*O,ie[A]=fe*P,ie[k]=le,f.push(ie.x,ie.y,ie.z),ie[M]=0,ie[A]=0,ie[k]=H>0?1:-1,g.push(ie.x,ie.y,ie.z),y.push(Se/V),y.push(1-se/z),$e+=1}}for(let se=0;se<z;se++)for(let fe=0;fe<V;fe++){const Se=b+fe+ce*se,Ue=b+fe+ce*(se+1),ke=b+(fe+1)+ce*(se+1),qe=b+(fe+1)+ce*se;h.push(Se,Ue,qe),h.push(Ue,ke,qe),K+=6}u.addGroup(S,K,Z),S+=K,b+=$e}}static fromJSON(e){return new mu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Fw(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const s=n[t][r];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?e[t][r]=s.clone():Array.isArray(s)?e[t][r]=s.slice():e[t][r]=s}}return e}function Af(n){const e={};for(let t=0;t<n.length;t++){const r=Fw(n[t]);for(const s in r)e[s]=r[s]}return e}function USe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const NC={clone:Fw,merge:Af};var HSe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,GSe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class xd extends hd{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=HSe,this.fragmentShader=GSe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Fw(e.uniforms),this.uniformsGroups=USe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const s in this.extensions)this.extensions[s]===!0&&(r[s]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class vE extends oo{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ei,this.projectionMatrix=new ei,this.projectionMatrixInverse=new ei}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class el extends vE{constructor(e=50,t=1,r=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=W$*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(F1*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return W$*2*Math.atan(Math.tan(F1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,s,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(F1*.5*this.fov)/this.zoom,r=2*t,s=this.aspect*r,o=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const h=l.fullWidth,f=l.fullHeight;o+=l.offsetX*s/h,t-=l.offsetY*r/f,s*=l.width/h,r*=l.height/f}const u=this.filmOffset;u!==0&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const MS=90,AS=1;class BQ extends oo{constructor(e,t,r){if(super(),this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;const s=new el(MS,AS,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Me(1,0,0)),this.add(s);const o=new el(MS,AS,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new Me(-1,0,0)),this.add(o);const l=new el(MS,AS,e,t);l.layers=this.layers,l.up.set(0,0,1),l.lookAt(new Me(0,1,0)),this.add(l);const u=new el(MS,AS,e,t);u.layers=this.layers,u.up.set(0,0,-1),u.lookAt(new Me(0,-1,0)),this.add(u);const h=new el(MS,AS,e,t);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new Me(0,0,1)),this.add(h);const f=new el(MS,AS,e,t);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new Me(0,0,-1)),this.add(f)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[s,o,l,u,h,f]=this.children,g=e.getRenderTarget(),y=e.toneMapping,b=e.xr.enabled;e.toneMapping=c0,e.xr.enabled=!1;const S=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,s),e.setRenderTarget(r,1),e.render(t,o),e.setRenderTarget(r,2),e.render(t,l),e.setRenderTarget(r,3),e.render(t,u),e.setRenderTarget(r,4),e.render(t,h),r.texture.generateMipmaps=S,e.setRenderTarget(r,5),e.render(t,f),e.setRenderTarget(g),e.toneMapping=y,e.xr.enabled=b,r.texture.needsPMREMUpdate=!0}}class DC extends dc{constructor(e,t,r,s,o,l,u,h,f,g){e=e!==void 0?e:[],t=t!==void 0?t:Vy,super(e,t,r,s,o,l,u,h,f,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class FQ extends Dc{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},s=[r,r,r,r,r,r];this.texture=new DC(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:El}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new mu(5,5,5),o=new xd({name:"CubemapFromEquirect",uniforms:Fw(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:cd,blending:gp});o.uniforms.tEquirect.value=t;const l=new Hn(s,o),u=t.minFilter;return t.minFilter===dT&&(t.minFilter=El),new BQ(1,10,this).update(e,l),t.minFilter=u,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,r,s){const o=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,r,s);e.setRenderTarget(o)}}const GL=new Me,WSe=new Me,VSe=new cp;class c_{constructor(e=new Me(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,s){return this.normal.set(e,t,r),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const s=GL.subVectors(r,t).cross(WSe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(GL),s=this.normal.dot(r);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(r).multiplyScalar(o).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||VSe.getNormalMatrix(e),s=this.coplanarPoint(GL).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const IS=new xv,uA=new Me;class f2{constructor(e=new c_,t=new c_,r=new c_,s=new c_,o=new c_,l=new c_){this.planes=[e,t,r,s,o,l]}set(e,t,r,s,o,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(r),u[3].copy(s),u[4].copy(o),u[5].copy(l),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,s=r[0],o=r[1],l=r[2],u=r[3],h=r[4],f=r[5],g=r[6],y=r[7],b=r[8],S=r[9],C=r[10],M=r[11],A=r[12],k=r[13],O=r[14],P=r[15];return t[0].setComponents(u-s,y-h,M-b,P-A).normalize(),t[1].setComponents(u+s,y+h,M+b,P+A).normalize(),t[2].setComponents(u+o,y+f,M+S,P+k).normalize(),t[3].setComponents(u-o,y-f,M-S,P-k).normalize(),t[4].setComponents(u-l,y-g,M-C,P-O).normalize(),t[5].setComponents(u+l,y+g,M+C,P+O).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),IS.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(IS)}intersectsSprite(e){return IS.center.set(0,0,0),IS.radius=.7071067811865476,IS.applyMatrix4(e.matrixWorld),this.intersectsSphere(IS)}intersectsSphere(e){const t=this.planes,r=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(r)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const s=t[r];if(uA.x=s.normal.x>0?e.max.x:e.min.x,uA.y=s.normal.y>0?e.max.y:e.min.y,uA.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(uA)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function zQ(){let n=null,e=!1,t=null,r=null;function s(o,l){t(o,l),r=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function jSe(n,e){const t=e.isWebGL2,r=new WeakMap;function s(f,g){const y=f.array,b=f.usage,S=n.createBuffer();n.bindBuffer(g,S),n.bufferData(g,y,b),f.onUploadCallback();let C;if(y instanceof Float32Array)C=5126;else if(y instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(t)C=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else C=5123;else if(y instanceof Int16Array)C=5122;else if(y instanceof Uint32Array)C=5125;else if(y instanceof Int32Array)C=5124;else if(y instanceof Int8Array)C=5120;else if(y instanceof Uint8Array)C=5121;else if(y instanceof Uint8ClampedArray)C=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+y);return{buffer:S,type:C,bytesPerElement:y.BYTES_PER_ELEMENT,version:f.version}}function o(f,g,y){const b=g.array,S=g.updateRange;n.bindBuffer(y,f),S.count===-1?n.bufferSubData(y,0,b):(t?n.bufferSubData(y,S.offset*b.BYTES_PER_ELEMENT,b,S.offset,S.count):n.bufferSubData(y,S.offset*b.BYTES_PER_ELEMENT,b.subarray(S.offset,S.offset+S.count)),S.count=-1)}function l(f){return f.isInterleavedBufferAttribute&&(f=f.data),r.get(f)}function u(f){f.isInterleavedBufferAttribute&&(f=f.data);const g=r.get(f);g&&(n.deleteBuffer(g.buffer),r.delete(f))}function h(f,g){if(f.isGLBufferAttribute){const b=r.get(f);(!b||b.version<f.version)&&r.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const y=r.get(f);y===void 0?r.set(f,s(f,g)):y.version<f.version&&(o(y.buffer,f,g),y.version=f.version)}return{get:l,remove:u,update:h}}class d0 extends ui{constructor(e=1,t=1,r=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:s};const o=e/2,l=t/2,u=Math.floor(r),h=Math.floor(s),f=u+1,g=h+1,y=e/u,b=t/h,S=[],C=[],M=[],A=[];for(let k=0;k<g;k++){const O=k*b-l;for(let P=0;P<f;P++){const D=P*y-o;C.push(D,-O,0),M.push(0,0,1),A.push(P/u),A.push(1-k/h)}}for(let k=0;k<h;k++)for(let O=0;O<u;O++){const P=O+f*k,D=O+f*(k+1),U=O+1+f*(k+1),H=O+1+f*k;S.push(P,D,H),S.push(D,U,H)}this.setIndex(S),this.setAttribute("position",new ur(C,3)),this.setAttribute("normal",new ur(M,3)),this.setAttribute("uv",new ur(A,2))}static fromJSON(e){return new d0(e.width,e.height,e.widthSegments,e.heightSegments)}}var YSe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,XSe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,KSe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,JSe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,qSe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,QSe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,ZSe="vec3 transformed = vec3( position );",ewe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,twe=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,nwe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,rwe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,iwe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,swe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,owe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,awe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,lwe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,uwe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,cwe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,hwe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,dwe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,fwe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,pwe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,mwe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,gwe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,vwe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,_we=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,ywe="gl_FragColor = linearToOutputTexel( gl_FragColor );",bwe=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Twe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Swe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,wwe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Ewe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,xwe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,$we=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Cwe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Mwe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Awe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Iwe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,Rwe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,kwe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Owe=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,Lwe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Nwe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Dwe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Pwe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Bwe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Fwe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,zwe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Uwe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Hwe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Gwe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Wwe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Vwe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,jwe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ywe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Xwe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Kwe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Jwe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,qwe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Qwe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Zwe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,eEe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,tEe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,nEe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,rEe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,iEe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,sEe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,oEe=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,aEe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,lEe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,uEe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,cEe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,hEe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,dEe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,fEe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,pEe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,mEe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,gEe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,vEe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,_Ee=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,yEe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,bEe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,TEe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,SEe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,wEe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,EEe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,xEe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,$Ee=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,CEe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,MEe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,AEe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,IEe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,REe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,kEe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,OEe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,LEe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,NEe=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,DEe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,PEe=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,BEe=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,FEe=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,zEe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,UEe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,HEe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,GEe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const WEe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,VEe=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,jEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,YEe=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,XEe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,KEe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,JEe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,qEe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,QEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,ZEe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,exe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,txe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,nxe=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,rxe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ixe=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sxe=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oxe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,axe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lxe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,uxe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,cxe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hxe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dxe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fxe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pxe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mxe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gxe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,vxe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,_xe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yxe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,bxe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Txe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ps={alphamap_fragment:YSe,alphamap_pars_fragment:XSe,alphatest_fragment:KSe,alphatest_pars_fragment:JSe,aomap_fragment:qSe,aomap_pars_fragment:QSe,begin_vertex:ZSe,beginnormal_vertex:ewe,bsdfs:twe,iridescence_fragment:nwe,bumpmap_pars_fragment:rwe,clipping_planes_fragment:iwe,clipping_planes_pars_fragment:swe,clipping_planes_pars_vertex:owe,clipping_planes_vertex:awe,color_fragment:lwe,color_pars_fragment:uwe,color_pars_vertex:cwe,color_vertex:hwe,common:dwe,cube_uv_reflection_fragment:fwe,defaultnormal_vertex:pwe,displacementmap_pars_vertex:mwe,displacementmap_vertex:gwe,emissivemap_fragment:vwe,emissivemap_pars_fragment:_we,encodings_fragment:ywe,encodings_pars_fragment:bwe,envmap_fragment:Twe,envmap_common_pars_fragment:Swe,envmap_pars_fragment:wwe,envmap_pars_vertex:Ewe,envmap_physical_pars_fragment:Nwe,envmap_vertex:xwe,fog_vertex:$we,fog_pars_vertex:Cwe,fog_fragment:Mwe,fog_pars_fragment:Awe,gradientmap_pars_fragment:Iwe,lightmap_fragment:Rwe,lightmap_pars_fragment:kwe,lights_lambert_vertex:Owe,lights_pars_begin:Lwe,lights_toon_fragment:Dwe,lights_toon_pars_fragment:Pwe,lights_phong_fragment:Bwe,lights_phong_pars_fragment:Fwe,lights_physical_fragment:zwe,lights_physical_pars_fragment:Uwe,lights_fragment_begin:Hwe,lights_fragment_maps:Gwe,lights_fragment_end:Wwe,logdepthbuf_fragment:Vwe,logdepthbuf_pars_fragment:jwe,logdepthbuf_pars_vertex:Ywe,logdepthbuf_vertex:Xwe,map_fragment:Kwe,map_pars_fragment:Jwe,map_particle_fragment:qwe,map_particle_pars_fragment:Qwe,metalnessmap_fragment:Zwe,metalnessmap_pars_fragment:eEe,morphcolor_vertex:tEe,morphnormal_vertex:nEe,morphtarget_pars_vertex:rEe,morphtarget_vertex:iEe,normal_fragment_begin:sEe,normal_fragment_maps:oEe,normal_pars_fragment:aEe,normal_pars_vertex:lEe,normal_vertex:uEe,normalmap_pars_fragment:cEe,clearcoat_normal_fragment_begin:hEe,clearcoat_normal_fragment_maps:dEe,clearcoat_pars_fragment:fEe,iridescence_pars_fragment:pEe,output_fragment:mEe,packing:gEe,premultiplied_alpha_fragment:vEe,project_vertex:_Ee,dithering_fragment:yEe,dithering_pars_fragment:bEe,roughnessmap_fragment:TEe,roughnessmap_pars_fragment:SEe,shadowmap_pars_fragment:wEe,shadowmap_pars_vertex:EEe,shadowmap_vertex:xEe,shadowmask_pars_fragment:$Ee,skinbase_vertex:CEe,skinning_pars_vertex:MEe,skinning_vertex:AEe,skinnormal_vertex:IEe,specularmap_fragment:REe,specularmap_pars_fragment:kEe,tonemapping_fragment:OEe,tonemapping_pars_fragment:LEe,transmission_fragment:NEe,transmission_pars_fragment:DEe,uv_pars_fragment:PEe,uv_pars_vertex:BEe,uv_vertex:FEe,uv2_pars_fragment:zEe,uv2_pars_vertex:UEe,uv2_vertex:HEe,worldpos_vertex:GEe,background_vert:WEe,background_frag:VEe,cube_vert:jEe,cube_frag:YEe,depth_vert:XEe,depth_frag:KEe,distanceRGBA_vert:JEe,distanceRGBA_frag:qEe,equirect_vert:QEe,equirect_frag:ZEe,linedashed_vert:exe,linedashed_frag:txe,meshbasic_vert:nxe,meshbasic_frag:rxe,meshlambert_vert:ixe,meshlambert_frag:sxe,meshmatcap_vert:oxe,meshmatcap_frag:axe,meshnormal_vert:lxe,meshnormal_frag:uxe,meshphong_vert:cxe,meshphong_frag:hxe,meshphysical_vert:dxe,meshphysical_frag:fxe,meshtoon_vert:pxe,meshtoon_frag:mxe,points_vert:gxe,points_frag:vxe,shadow_vert:_xe,shadow_frag:yxe,sprite_vert:bxe,sprite_frag:Txe},Xn={common:{diffuse:{value:new Fn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new cp},uv2Transform:{value:new cp},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Kt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Fn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Fn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new cp}},sprite:{diffuse:{value:new Fn(16777215)},opacity:{value:1},center:{value:new Kt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new cp}}},ap={basic:{uniforms:Af([Xn.common,Xn.specularmap,Xn.envmap,Xn.aomap,Xn.lightmap,Xn.fog]),vertexShader:ps.meshbasic_vert,fragmentShader:ps.meshbasic_frag},lambert:{uniforms:Af([Xn.common,Xn.specularmap,Xn.envmap,Xn.aomap,Xn.lightmap,Xn.emissivemap,Xn.fog,Xn.lights,{emissive:{value:new Fn(0)}}]),vertexShader:ps.meshlambert_vert,fragmentShader:ps.meshlambert_frag},phong:{uniforms:Af([Xn.common,Xn.specularmap,Xn.envmap,Xn.aomap,Xn.lightmap,Xn.emissivemap,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.fog,Xn.lights,{emissive:{value:new Fn(0)},specular:{value:new Fn(1118481)},shininess:{value:30}}]),vertexShader:ps.meshphong_vert,fragmentShader:ps.meshphong_frag},standard:{uniforms:Af([Xn.common,Xn.envmap,Xn.aomap,Xn.lightmap,Xn.emissivemap,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.roughnessmap,Xn.metalnessmap,Xn.fog,Xn.lights,{emissive:{value:new Fn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ps.meshphysical_vert,fragmentShader:ps.meshphysical_frag},toon:{uniforms:Af([Xn.common,Xn.aomap,Xn.lightmap,Xn.emissivemap,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.gradientmap,Xn.fog,Xn.lights,{emissive:{value:new Fn(0)}}]),vertexShader:ps.meshtoon_vert,fragmentShader:ps.meshtoon_frag},matcap:{uniforms:Af([Xn.common,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.fog,{matcap:{value:null}}]),vertexShader:ps.meshmatcap_vert,fragmentShader:ps.meshmatcap_frag},points:{uniforms:Af([Xn.points,Xn.fog]),vertexShader:ps.points_vert,fragmentShader:ps.points_frag},dashed:{uniforms:Af([Xn.common,Xn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ps.linedashed_vert,fragmentShader:ps.linedashed_frag},depth:{uniforms:Af([Xn.common,Xn.displacementmap]),vertexShader:ps.depth_vert,fragmentShader:ps.depth_frag},normal:{uniforms:Af([Xn.common,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,{opacity:{value:1}}]),vertexShader:ps.meshnormal_vert,fragmentShader:ps.meshnormal_frag},sprite:{uniforms:Af([Xn.sprite,Xn.fog]),vertexShader:ps.sprite_vert,fragmentShader:ps.sprite_frag},background:{uniforms:{uvTransform:{value:new cp},t2D:{value:null}},vertexShader:ps.background_vert,fragmentShader:ps.background_frag},cube:{uniforms:Af([Xn.envmap,{opacity:{value:1}}]),vertexShader:ps.cube_vert,fragmentShader:ps.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ps.equirect_vert,fragmentShader:ps.equirect_frag},distanceRGBA:{uniforms:Af([Xn.common,Xn.displacementmap,{referencePosition:{value:new Me},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ps.distanceRGBA_vert,fragmentShader:ps.distanceRGBA_frag},shadow:{uniforms:Af([Xn.lights,Xn.fog,{color:{value:new Fn(0)},opacity:{value:1}}]),vertexShader:ps.shadow_vert,fragmentShader:ps.shadow_frag}};ap.physical={uniforms:Af([ap.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Kt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Fn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Kt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Fn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Fn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ps.meshphysical_vert,fragmentShader:ps.meshphysical_frag};function Sxe(n,e,t,r,s,o){const l=new Fn(0);let u=s===!0?0:1,h,f,g=null,y=0,b=null;function S(M,A){let k=!1,O=A.isScene===!0?A.background:null;O&&O.isTexture&&(O=e.get(O));const P=n.xr,D=P.getSession&&P.getSession();D&&D.environmentBlendMode==="additive"&&(O=null),O===null?C(l,u):O&&O.isColor&&(C(O,1),k=!0),(n.autoClear||k)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),O&&(O.isCubeTexture||O.mapping===gE)?(f===void 0&&(f=new Hn(new mu(1,1,1),new xd({name:"BackgroundCubeMaterial",uniforms:Fw(ap.cube.uniforms),vertexShader:ap.cube.vertexShader,fragmentShader:ap.cube.fragmentShader,side:cd,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(U,H,V){this.matrixWorld.copyPosition(V.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),f.material.uniforms.envMap.value=O,f.material.uniforms.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,(g!==O||y!==O.version||b!==n.toneMapping)&&(f.material.needsUpdate=!0,g=O,y=O.version,b=n.toneMapping),f.layers.enableAll(),M.unshift(f,f.geometry,f.material,0,0,null)):O&&O.isTexture&&(h===void 0&&(h=new Hn(new d0(2,2),new xd({name:"BackgroundMaterial",uniforms:Fw(ap.background.uniforms),vertexShader:ap.background.vertexShader,fragmentShader:ap.background.fragmentShader,side:_v,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=O,O.matrixAutoUpdate===!0&&O.updateMatrix(),h.material.uniforms.uvTransform.value.copy(O.matrix),(g!==O||y!==O.version||b!==n.toneMapping)&&(h.material.needsUpdate=!0,g=O,y=O.version,b=n.toneMapping),h.layers.enableAll(),M.unshift(h,h.geometry,h.material,0,0,null))}function C(M,A){t.buffers.color.setClear(M.r,M.g,M.b,A,o)}return{getClearColor:function(){return l},setClearColor:function(M,A=1){l.set(M),u=A,C(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(M){u=M,C(l,u)},render:S}}function wxe(n,e,t,r){const s=n.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),l=r.isWebGL2||o!==null,u={},h=A(null);let f=h,g=!1;function y(le,ce,ge,$e,K){let ie=!1;if(l){const se=M($e,ge,ce);f!==se&&(f=se,S(f.object)),ie=k(le,$e,ge,K),ie&&O(le,$e,ge,K)}else{const se=ce.wireframe===!0;(f.geometry!==$e.id||f.program!==ge.id||f.wireframe!==se)&&(f.geometry=$e.id,f.program=ge.id,f.wireframe=se,ie=!0)}K!==null&&t.update(K,34963),(ie||g)&&(g=!1,z(le,ce,ge,$e),K!==null&&n.bindBuffer(34963,t.get(K).buffer))}function b(){return r.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}function S(le){return r.isWebGL2?n.bindVertexArray(le):o.bindVertexArrayOES(le)}function C(le){return r.isWebGL2?n.deleteVertexArray(le):o.deleteVertexArrayOES(le)}function M(le,ce,ge){const $e=ge.wireframe===!0;let K=u[le.id];K===void 0&&(K={},u[le.id]=K);let ie=K[ce.id];ie===void 0&&(ie={},K[ce.id]=ie);let se=ie[$e];return se===void 0&&(se=A(b()),ie[$e]=se),se}function A(le){const ce=[],ge=[],$e=[];for(let K=0;K<s;K++)ce[K]=0,ge[K]=0,$e[K]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ce,enabledAttributes:ge,attributeDivisors:$e,object:le,attributes:{},index:null}}function k(le,ce,ge,$e){const K=f.attributes,ie=ce.attributes;let se=0;const fe=ge.getAttributes();for(const Se in fe)if(fe[Se].location>=0){const Ue=K[Se];let ke=ie[Se];if(ke===void 0&&(Se==="instanceMatrix"&&le.instanceMatrix&&(ke=le.instanceMatrix),Se==="instanceColor"&&le.instanceColor&&(ke=le.instanceColor)),Ue===void 0||Ue.attribute!==ke||ke&&Ue.data!==ke.data)return!0;se++}return f.attributesNum!==se||f.index!==$e}function O(le,ce,ge,$e){const K={},ie=ce.attributes;let se=0;const fe=ge.getAttributes();for(const Se in fe)if(fe[Se].location>=0){let Ue=ie[Se];Ue===void 0&&(Se==="instanceMatrix"&&le.instanceMatrix&&(Ue=le.instanceMatrix),Se==="instanceColor"&&le.instanceColor&&(Ue=le.instanceColor));const ke={};ke.attribute=Ue,Ue&&Ue.data&&(ke.data=Ue.data),K[Se]=ke,se++}f.attributes=K,f.attributesNum=se,f.index=$e}function P(){const le=f.newAttributes;for(let ce=0,ge=le.length;ce<ge;ce++)le[ce]=0}function D(le){U(le,0)}function U(le,ce){const ge=f.newAttributes,$e=f.enabledAttributes,K=f.attributeDivisors;ge[le]=1,$e[le]===0&&(n.enableVertexAttribArray(le),$e[le]=1),K[le]!==ce&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](le,ce),K[le]=ce)}function H(){const le=f.newAttributes,ce=f.enabledAttributes;for(let ge=0,$e=ce.length;ge<$e;ge++)ce[ge]!==le[ge]&&(n.disableVertexAttribArray(ge),ce[ge]=0)}function V(le,ce,ge,$e,K,ie){r.isWebGL2===!0&&(ge===5124||ge===5125)?n.vertexAttribIPointer(le,ce,ge,K,ie):n.vertexAttribPointer(le,ce,ge,$e,K,ie)}function z(le,ce,ge,$e){if(r.isWebGL2===!1&&(le.isInstancedMesh||$e.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;P();const K=$e.attributes,ie=ge.getAttributes(),se=ce.defaultAttributeValues;for(const fe in ie){const Se=ie[fe];if(Se.location>=0){let Ue=K[fe];if(Ue===void 0&&(fe==="instanceMatrix"&&le.instanceMatrix&&(Ue=le.instanceMatrix),fe==="instanceColor"&&le.instanceColor&&(Ue=le.instanceColor)),Ue!==void 0){const ke=Ue.normalized,qe=Ue.itemSize,we=t.get(Ue);if(we===void 0)continue;const Ze=we.buffer,et=we.type,ft=we.bytesPerElement;if(Ue.isInterleavedBufferAttribute){const at=Ue.data,Ge=at.stride,Ie=Ue.offset;if(at.isInstancedInterleavedBuffer){for(let He=0;He<Se.locationSize;He++)U(Se.location+He,at.meshPerAttribute);le.isInstancedMesh!==!0&&$e._maxInstanceCount===void 0&&($e._maxInstanceCount=at.meshPerAttribute*at.count)}else for(let He=0;He<Se.locationSize;He++)D(Se.location+He);n.bindBuffer(34962,Ze);for(let He=0;He<Se.locationSize;He++)V(Se.location+He,qe/Se.locationSize,et,ke,Ge*ft,(Ie+qe/Se.locationSize*He)*ft)}else{if(Ue.isInstancedBufferAttribute){for(let at=0;at<Se.locationSize;at++)U(Se.location+at,Ue.meshPerAttribute);le.isInstancedMesh!==!0&&$e._maxInstanceCount===void 0&&($e._maxInstanceCount=Ue.meshPerAttribute*Ue.count)}else for(let at=0;at<Se.locationSize;at++)D(Se.location+at);n.bindBuffer(34962,Ze);for(let at=0;at<Se.locationSize;at++)V(Se.location+at,qe/Se.locationSize,et,ke,qe*ft,qe/Se.locationSize*at*ft)}}else if(se!==void 0){const ke=se[fe];if(ke!==void 0)switch(ke.length){case 2:n.vertexAttrib2fv(Se.location,ke);break;case 3:n.vertexAttrib3fv(Se.location,ke);break;case 4:n.vertexAttrib4fv(Se.location,ke);break;default:n.vertexAttrib1fv(Se.location,ke)}}}}H()}function Z(){q();for(const le in u){const ce=u[le];for(const ge in ce){const $e=ce[ge];for(const K in $e)C($e[K].object),delete $e[K];delete ce[ge]}delete u[le]}}function oe(le){if(u[le.id]===void 0)return;const ce=u[le.id];for(const ge in ce){const $e=ce[ge];for(const K in $e)C($e[K].object),delete $e[K];delete ce[ge]}delete u[le.id]}function ue(le){for(const ce in u){const ge=u[ce];if(ge[le.id]===void 0)continue;const $e=ge[le.id];for(const K in $e)C($e[K].object),delete $e[K];delete ge[le.id]}}function q(){ae(),g=!0,f!==h&&(f=h,S(f.object))}function ae(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:y,reset:q,resetDefaultState:ae,dispose:Z,releaseStatesOfGeometry:oe,releaseStatesOfProgram:ue,initAttributes:P,enableAttribute:D,disableUnusedAttributes:H}}function Exe(n,e,t,r){const s=r.isWebGL2;let o;function l(f){o=f}function u(f,g){n.drawArrays(o,f,g),t.update(g,o,1)}function h(f,g,y){if(y===0)return;let b,S;if(s)b=n,S="drawArraysInstanced";else if(b=e.get("ANGLE_instanced_arrays"),S="drawArraysInstancedANGLE",b===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}b[S](o,f,g,y),t.update(g,o,y)}this.setMode=l,this.render=u,this.renderInstances=h}function xxe(n,e,t){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const V=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(V.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(V){if(V==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";V="mediump"}return V==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const l=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let u=t.precision!==void 0?t.precision:"highp";const h=o(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const f=l||e.has("WEBGL_draw_buffers"),g=t.logarithmicDepthBuffer===!0,y=n.getParameter(34930),b=n.getParameter(35660),S=n.getParameter(3379),C=n.getParameter(34076),M=n.getParameter(34921),A=n.getParameter(36347),k=n.getParameter(36348),O=n.getParameter(36349),P=b>0,D=l||e.has("OES_texture_float"),U=P&&D,H=l?n.getParameter(36183):0;return{isWebGL2:l,drawBuffers:f,getMaxAnisotropy:s,getMaxPrecision:o,precision:u,logarithmicDepthBuffer:g,maxTextures:y,maxVertexTextures:b,maxTextureSize:S,maxCubemapSize:C,maxAttributes:M,maxVertexUniforms:A,maxVaryings:k,maxFragmentUniforms:O,vertexTextures:P,floatFragmentTextures:D,floatVertexTextures:U,maxSamples:H}}function $xe(n){const e=this;let t=null,r=0,s=!1,o=!1;const l=new c_,u=new cp,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(y,b,S){const C=y.length!==0||b||r!==0||s;return s=b,t=g(y,S,0),r=y.length,C},this.beginShadows=function(){o=!0,g(null)},this.endShadows=function(){o=!1,f()},this.setState=function(y,b,S){const C=y.clippingPlanes,M=y.clipIntersection,A=y.clipShadows,k=n.get(y);if(!s||C===null||C.length===0||o&&!A)o?g(null):f();else{const O=o?0:r,P=O*4;let D=k.clippingState||null;h.value=D,D=g(C,b,P,S);for(let U=0;U!==P;++U)D[U]=t[U];k.clippingState=D,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=O}};function f(){h.value!==t&&(h.value=t,h.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function g(y,b,S,C){const M=y!==null?y.length:0;let A=null;if(M!==0){if(A=h.value,C!==!0||A===null){const k=S+M*4,O=b.matrixWorldInverse;u.getNormalMatrix(O),(A===null||A.length<k)&&(A=new Float32Array(k));for(let P=0,D=S;P!==M;++P,D+=4)l.copy(y[P]).applyMatrix4(O,u),l.normal.toArray(A,D),A[D+3]=l.constant}h.value=A,h.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,A}}function Cxe(n){let e=new WeakMap;function t(l,u){return u===P$?l.mapping=Vy:u===B$&&(l.mapping=jy),l}function r(l){if(l&&l.isTexture&&l.isRenderTargetTexture===!1){const u=l.mapping;if(u===P$||u===B$)if(e.has(l)){const h=e.get(l).texture;return t(h,l.mapping)}else{const h=l.image;if(h&&h.height>0){const f=new FQ(h.height/2);return f.fromEquirectangularTexture(n,l),e.set(l,f),l.addEventListener("dispose",s),t(f.texture,l.mapping)}else return null}}return l}function s(l){const u=l.target;u.removeEventListener("dispose",s);const h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class dv extends vE{constructor(e=-1,t=1,r=1,s=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=s,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,s,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=r-e,l=r+e,u=s+t,h=s-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=f*this.view.offsetX,l=o+f*this.view.width,u-=g*this.view.offsetY,h=u-g*this.view.height}this.projectionMatrix.makeOrthographic(o,l,u,h,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const rw=4,GG=[.125,.215,.35,.446,.526,.582],y1=20,WL=new dv,WG=new Fn;let VL=null;const p1=(1+Math.sqrt(5))/2,RS=1/p1,VG=[new Me(1,1,1),new Me(-1,1,1),new Me(1,1,-1),new Me(-1,1,-1),new Me(0,p1,RS),new Me(0,p1,-RS),new Me(RS,0,p1),new Me(-RS,0,p1),new Me(p1,RS,0),new Me(-p1,RS,0)];class BP{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,s=100){VL=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,s,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=XG(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=YG(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(VL),e.scissorTest=!1,cA(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Vy||e.mapping===jy?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),VL=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:El,minFilter:El,generateMipmaps:!1,type:tT,format:Xp,encoding:Mg,depthBuffer:!1},s=jG(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=jG(e,t,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Mxe(o)),this._blurMaterial=Axe(o,e,t)}return s}_compileMaterial(e){const t=new Hn(this._lodPlanes[0],e);this._renderer.compile(t,WL)}_sceneToCubeUV(e,t,r,s){const o=new el(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,f=h.autoClear,g=h.toneMapping;h.getClearColor(WG),h.toneMapping=c0,h.autoClear=!1;const y=new m0({name:"PMREM.Background",side:cd,depthWrite:!1,depthTest:!1}),b=new Hn(new mu,y);let S=!1;const C=e.background;C?C.isColor&&(y.color.copy(C),e.background=null,S=!0):(y.color.copy(WG),S=!0);for(let M=0;M<6;M++){const A=M%3;A===0?(o.up.set(0,l[M],0),o.lookAt(u[M],0,0)):A===1?(o.up.set(0,0,l[M]),o.lookAt(0,u[M],0)):(o.up.set(0,l[M],0),o.lookAt(0,0,u[M]));const k=this._cubeSize;cA(s,A*k,M>2?k:0,k,k),h.setRenderTarget(s),S&&h.render(b,o),h.render(e,o)}b.geometry.dispose(),b.material.dispose(),h.toneMapping=g,h.autoClear=f,e.background=C}_textureToCubeUV(e,t){const r=this._renderer,s=e.mapping===Vy||e.mapping===jy;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=XG()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=YG());const o=s?this._cubemapMaterial:this._equirectMaterial,l=new Hn(this._lodPlanes[0],o),u=o.uniforms;u.envMap.value=e;const h=this._cubeSize;cA(t,0,0,3*h,2*h),r.setRenderTarget(t),r.render(l,WL)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=VG[(s-1)%VG.length];this._blur(e,s-1,s,o,l)}t.autoClear=r}_blur(e,t,r,s,o){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,r,s,"latitudinal",o),this._halfBlur(l,e,r,r,s,"longitudinal",o)}_halfBlur(e,t,r,s,o,l,u){const h=this._renderer,f=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const g=3,y=new Hn(this._lodPlanes[s],f),b=f.uniforms,S=this._sizeLods[r]-1,C=isFinite(o)?Math.PI/(2*S):2*Math.PI/(2*y1-1),M=o/C,A=isFinite(o)?1+Math.floor(g*M):y1;A>y1&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${y1}`);const k=[];let O=0;for(let V=0;V<y1;++V){const z=V/M,Z=Math.exp(-z*z/2);k.push(Z),V===0?O+=Z:V<A&&(O+=2*Z)}for(let V=0;V<k.length;V++)k[V]=k[V]/O;b.envMap.value=e.texture,b.samples.value=A,b.weights.value=k,b.latitudinal.value=l==="latitudinal",u&&(b.poleAxis.value=u);const{_lodMax:P}=this;b.dTheta.value=C,b.mipInt.value=P-r;const D=this._sizeLods[s],U=3*D*(s>P-rw?s-P+rw:0),H=4*(this._cubeSize-D);cA(t,U,H,3*D,2*D),h.setRenderTarget(t),h.render(y,WL)}}function Mxe(n){const e=[],t=[],r=[];let s=n;const o=n-rw+1+GG.length;for(let l=0;l<o;l++){const u=Math.pow(2,s);t.push(u);let h=1/u;l>n-rw?h=GG[l-n+rw-1]:l===0&&(h=0),r.push(h);const f=1/(u-2),g=-f,y=1+f,b=[g,g,y,g,y,y,g,g,y,y,g,y],S=6,C=6,M=3,A=2,k=1,O=new Float32Array(M*C*S),P=new Float32Array(A*C*S),D=new Float32Array(k*C*S);for(let H=0;H<S;H++){const V=H%3*2/3-1,z=H>2?0:-1,Z=[V,z,0,V+2/3,z,0,V+2/3,z+1,0,V,z,0,V+2/3,z+1,0,V,z+1,0];O.set(Z,M*C*H),P.set(b,A*C*H);const oe=[H,H,H,H,H,H];D.set(oe,k*C*H)}const U=new ui;U.setAttribute("position",new zo(O,M)),U.setAttribute("uv",new zo(P,A)),U.setAttribute("faceIndex",new zo(D,k)),e.push(U),s>rw&&s--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function jG(n,e,t){const r=new Dc(n,e,t);return r.texture.mapping=gE,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function cA(n,e,t,r,s){n.viewport.set(e,t,r,s),n.scissor.set(e,t,r,s)}function Axe(n,e,t){const r=new Float32Array(y1),s=new Me(0,1,0);return new xd({name:"SphericalGaussianBlur",defines:{n:y1,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:h4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:gp,depthTest:!1,depthWrite:!1})}function YG(){return new xd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:h4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:gp,depthTest:!1,depthWrite:!1})}function XG(){return new xd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:h4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:gp,depthTest:!1,depthWrite:!1})}function h4(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Ixe(n){let e=new WeakMap,t=null;function r(u){if(u&&u.isTexture){const h=u.mapping,f=h===P$||h===B$,g=h===Vy||h===jy;if(f||g)if(u.isRenderTargetTexture&&u.needsPMREMUpdate===!0){u.needsPMREMUpdate=!1;let y=e.get(u);return t===null&&(t=new BP(n)),y=f?t.fromEquirectangular(u,y):t.fromCubemap(u,y),e.set(u,y),y.texture}else{if(e.has(u))return e.get(u).texture;{const y=u.image;if(f&&y&&y.height>0||g&&y&&s(y)){t===null&&(t=new BP(n));const b=f?t.fromEquirectangular(u):t.fromCubemap(u);return e.set(u,b),u.addEventListener("dispose",o),b.texture}else return null}}}return u}function s(u){let h=0;const f=6;for(let g=0;g<f;g++)u[g]!==void 0&&h++;return h===f}function o(u){const h=u.target;h.removeEventListener("dispose",o);const f=e.get(h);f!==void 0&&(e.delete(h),f.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:l}}function Rxe(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let s;switch(r){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(r)}return e[r]=s,s}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const s=t(r);return s===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),s}}}function kxe(n,e,t,r){const s={},o=new WeakMap;function l(y){const b=y.target;b.index!==null&&e.remove(b.index);for(const C in b.attributes)e.remove(b.attributes[C]);b.removeEventListener("dispose",l),delete s[b.id];const S=o.get(b);S&&(e.remove(S),o.delete(b)),r.releaseStatesOfGeometry(b),b.isInstancedBufferGeometry===!0&&delete b._maxInstanceCount,t.memory.geometries--}function u(y,b){return s[b.id]===!0||(b.addEventListener("dispose",l),s[b.id]=!0,t.memory.geometries++),b}function h(y){const b=y.attributes;for(const C in b)e.update(b[C],34962);const S=y.morphAttributes;for(const C in S){const M=S[C];for(let A=0,k=M.length;A<k;A++)e.update(M[A],34962)}}function f(y){const b=[],S=y.index,C=y.attributes.position;let M=0;if(S!==null){const O=S.array;M=S.version;for(let P=0,D=O.length;P<D;P+=3){const U=O[P+0],H=O[P+1],V=O[P+2];b.push(U,H,H,V,V,U)}}else{const O=C.array;M=C.version;for(let P=0,D=O.length/3-1;P<D;P+=3){const U=P+0,H=P+1,V=P+2;b.push(U,H,H,V,V,U)}}const A=new(DQ(b)?c4:u4)(b,1);A.version=M;const k=o.get(y);k&&e.remove(k),o.set(y,A)}function g(y){const b=o.get(y);if(b){const S=y.index;S!==null&&b.version<S.version&&f(y)}else f(y);return o.get(y)}return{get:u,update:h,getWireframeAttribute:g}}function Oxe(n,e,t,r){const s=r.isWebGL2;let o;function l(b){o=b}let u,h;function f(b){u=b.type,h=b.bytesPerElement}function g(b,S){n.drawElements(o,S,u,b*h),t.update(S,o,1)}function y(b,S,C){if(C===0)return;let M,A;if(s)M=n,A="drawElementsInstanced";else if(M=e.get("ANGLE_instanced_arrays"),A="drawElementsInstancedANGLE",M===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}M[A](o,S,u,b*h,C),t.update(S,o,C)}this.setMode=l,this.setIndex=f,this.render=g,this.renderInstances=y}function Lxe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,l,u){switch(t.calls++,l){case 4:t.triangles+=u*(o/3);break;case 1:t.lines+=u*(o/2);break;case 3:t.lines+=u*(o-1);break;case 2:t.lines+=u*o;break;case 0:t.points+=u*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function s(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:r}}function Nxe(n,e){return n[0]-e[0]}function Dxe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function jL(n,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Uint8Array?t=255:r instanceof Uint16Array?t=65535:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),n.divideScalar(t)}function Pxe(n,e,t){const r={},s=new Float32Array(8),o=new WeakMap,l=new Ts,u=[];for(let f=0;f<8;f++)u[f]=[f,0];function h(f,g,y,b){const S=f.morphTargetInfluences;if(e.isWebGL2===!0){const C=g.morphAttributes.position||g.morphAttributes.normal||g.morphAttributes.color,M=C!==void 0?C.length:0;let A=o.get(g);if(A===void 0||A.count!==M){let P=function(){le.dispose(),o.delete(g),g.removeEventListener("dispose",P)};A!==void 0&&A.texture.dispose();const D=g.morphAttributes.position!==void 0,U=g.morphAttributes.normal!==void 0,H=g.morphAttributes.color!==void 0,V=g.morphAttributes.position||[],z=g.morphAttributes.normal||[],Z=g.morphAttributes.color||[];let oe=0;D===!0&&(oe=1),U===!0&&(oe=2),H===!0&&(oe=3);let ue=g.attributes.position.count*oe,q=1;ue>e.maxTextureSize&&(q=Math.ceil(ue/e.maxTextureSize),ue=e.maxTextureSize);const ae=new Float32Array(ue*q*4*M),le=new OC(ae,ue,q,M);le.type=ov,le.needsUpdate=!0;const ce=oe*4;for(let ge=0;ge<M;ge++){const $e=V[ge],K=z[ge],ie=Z[ge],se=ue*q*4*ge;for(let fe=0;fe<$e.count;fe++){const Se=fe*ce;D===!0&&(l.fromBufferAttribute($e,fe),$e.normalized===!0&&jL(l,$e),ae[se+Se+0]=l.x,ae[se+Se+1]=l.y,ae[se+Se+2]=l.z,ae[se+Se+3]=0),U===!0&&(l.fromBufferAttribute(K,fe),K.normalized===!0&&jL(l,K),ae[se+Se+4]=l.x,ae[se+Se+5]=l.y,ae[se+Se+6]=l.z,ae[se+Se+7]=0),H===!0&&(l.fromBufferAttribute(ie,fe),ie.normalized===!0&&jL(l,ie),ae[se+Se+8]=l.x,ae[se+Se+9]=l.y,ae[se+Se+10]=l.z,ae[se+Se+11]=ie.itemSize===4?l.w:1)}}A={count:M,texture:le,size:new Kt(ue,q)},o.set(g,A),g.addEventListener("dispose",P)}let k=0;for(let P=0;P<S.length;P++)k+=S[P];const O=g.morphTargetsRelative?1:1-k;b.getUniforms().setValue(n,"morphTargetBaseInfluence",O),b.getUniforms().setValue(n,"morphTargetInfluences",S),b.getUniforms().setValue(n,"morphTargetsTexture",A.texture,t),b.getUniforms().setValue(n,"morphTargetsTextureSize",A.size)}else{const C=S===void 0?0:S.length;let M=r[g.id];if(M===void 0||M.length!==C){M=[];for(let D=0;D<C;D++)M[D]=[D,0];r[g.id]=M}for(let D=0;D<C;D++){const U=M[D];U[0]=D,U[1]=S[D]}M.sort(Dxe);for(let D=0;D<8;D++)D<C&&M[D][1]?(u[D][0]=M[D][0],u[D][1]=M[D][1]):(u[D][0]=Number.MAX_SAFE_INTEGER,u[D][1]=0);u.sort(Nxe);const A=g.morphAttributes.position,k=g.morphAttributes.normal;let O=0;for(let D=0;D<8;D++){const U=u[D],H=U[0],V=U[1];H!==Number.MAX_SAFE_INTEGER&&V?(A&&g.getAttribute("morphTarget"+D)!==A[H]&&g.setAttribute("morphTarget"+D,A[H]),k&&g.getAttribute("morphNormal"+D)!==k[H]&&g.setAttribute("morphNormal"+D,k[H]),s[D]=V,O+=V):(A&&g.hasAttribute("morphTarget"+D)===!0&&g.deleteAttribute("morphTarget"+D),k&&g.hasAttribute("morphNormal"+D)===!0&&g.deleteAttribute("morphNormal"+D),s[D]=0)}const P=g.morphTargetsRelative?1:1-O;b.getUniforms().setValue(n,"morphTargetBaseInfluence",P),b.getUniforms().setValue(n,"morphTargetInfluences",s)}}return{update:h}}function Bxe(n,e,t,r){let s=new WeakMap;function o(h){const f=r.render.frame,g=h.geometry,y=e.get(h,g);return s.get(y)!==f&&(e.update(y),s.set(y,f)),h.isInstancedMesh&&(h.hasEventListener("dispose",u)===!1&&h.addEventListener("dispose",u),t.update(h.instanceMatrix,34962),h.instanceColor!==null&&t.update(h.instanceColor,34962)),y}function l(){s=new WeakMap}function u(h){const f=h.target;f.removeEventListener("dispose",u),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:o,dispose:l}}const UQ=new dc,HQ=new OC,GQ=new d2,WQ=new DC,KG=[],JG=[],qG=new Float32Array(16),QG=new Float32Array(9),ZG=new Float32Array(4);function _E(n,e,t){const r=n[0];if(r<=0||r>0)return n;const s=e*t;let o=KG[s];if(o===void 0&&(o=new Float32Array(s),KG[s]=o),e!==0){r.toArray(o,0);for(let l=1,u=0;l!==e;++l)u+=t,n[l].toArray(o,u)}return o}function yp(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function bp(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function p2(n,e){let t=JG[e];t===void 0&&(t=new Int32Array(e),JG[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Fxe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function zxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(yp(t,e))return;n.uniform2fv(this.addr,e),bp(t,e)}}function Uxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(yp(t,e))return;n.uniform3fv(this.addr,e),bp(t,e)}}function Hxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(yp(t,e))return;n.uniform4fv(this.addr,e),bp(t,e)}}function Gxe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(yp(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),bp(t,e)}else{if(yp(t,r))return;ZG.set(r),n.uniformMatrix2fv(this.addr,!1,ZG),bp(t,r)}}function Wxe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(yp(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),bp(t,e)}else{if(yp(t,r))return;QG.set(r),n.uniformMatrix3fv(this.addr,!1,QG),bp(t,r)}}function Vxe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(yp(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),bp(t,e)}else{if(yp(t,r))return;qG.set(r),n.uniformMatrix4fv(this.addr,!1,qG),bp(t,r)}}function jxe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Yxe(n,e){const t=this.cache;yp(t,e)||(n.uniform2iv(this.addr,e),bp(t,e))}function Xxe(n,e){const t=this.cache;yp(t,e)||(n.uniform3iv(this.addr,e),bp(t,e))}function Kxe(n,e){const t=this.cache;yp(t,e)||(n.uniform4iv(this.addr,e),bp(t,e))}function Jxe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function qxe(n,e){const t=this.cache;yp(t,e)||(n.uniform2uiv(this.addr,e),bp(t,e))}function Qxe(n,e){const t=this.cache;yp(t,e)||(n.uniform3uiv(this.addr,e),bp(t,e))}function Zxe(n,e){const t=this.cache;yp(t,e)||(n.uniform4uiv(this.addr,e),bp(t,e))}function e$e(n,e,t){const r=this.cache,s=t.allocateTextureUnit();r[0]!==s&&(n.uniform1i(this.addr,s),r[0]=s),t.setTexture2D(e||UQ,s)}function t$e(n,e,t){const r=this.cache,s=t.allocateTextureUnit();r[0]!==s&&(n.uniform1i(this.addr,s),r[0]=s),t.setTexture3D(e||GQ,s)}function n$e(n,e,t){const r=this.cache,s=t.allocateTextureUnit();r[0]!==s&&(n.uniform1i(this.addr,s),r[0]=s),t.setTextureCube(e||WQ,s)}function r$e(n,e,t){const r=this.cache,s=t.allocateTextureUnit();r[0]!==s&&(n.uniform1i(this.addr,s),r[0]=s),t.setTexture2DArray(e||HQ,s)}function i$e(n){switch(n){case 5126:return Fxe;case 35664:return zxe;case 35665:return Uxe;case 35666:return Hxe;case 35674:return Gxe;case 35675:return Wxe;case 35676:return Vxe;case 5124:case 35670:return jxe;case 35667:case 35671:return Yxe;case 35668:case 35672:return Xxe;case 35669:case 35673:return Kxe;case 5125:return Jxe;case 36294:return qxe;case 36295:return Qxe;case 36296:return Zxe;case 35678:case 36198:case 36298:case 36306:case 35682:return e$e;case 35679:case 36299:case 36307:return t$e;case 35680:case 36300:case 36308:case 36293:return n$e;case 36289:case 36303:case 36311:case 36292:return r$e}}function s$e(n,e){n.uniform1fv(this.addr,e)}function o$e(n,e){const t=_E(e,this.size,2);n.uniform2fv(this.addr,t)}function a$e(n,e){const t=_E(e,this.size,3);n.uniform3fv(this.addr,t)}function l$e(n,e){const t=_E(e,this.size,4);n.uniform4fv(this.addr,t)}function u$e(n,e){const t=_E(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function c$e(n,e){const t=_E(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function h$e(n,e){const t=_E(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function d$e(n,e){n.uniform1iv(this.addr,e)}function f$e(n,e){n.uniform2iv(this.addr,e)}function p$e(n,e){n.uniform3iv(this.addr,e)}function m$e(n,e){n.uniform4iv(this.addr,e)}function g$e(n,e){n.uniform1uiv(this.addr,e)}function v$e(n,e){n.uniform2uiv(this.addr,e)}function _$e(n,e){n.uniform3uiv(this.addr,e)}function y$e(n,e){n.uniform4uiv(this.addr,e)}function b$e(n,e,t){const r=e.length,s=p2(t,r);n.uniform1iv(this.addr,s);for(let o=0;o!==r;++o)t.setTexture2D(e[o]||UQ,s[o])}function T$e(n,e,t){const r=e.length,s=p2(t,r);n.uniform1iv(this.addr,s);for(let o=0;o!==r;++o)t.setTexture3D(e[o]||GQ,s[o])}function S$e(n,e,t){const r=e.length,s=p2(t,r);n.uniform1iv(this.addr,s);for(let o=0;o!==r;++o)t.setTextureCube(e[o]||WQ,s[o])}function w$e(n,e,t){const r=e.length,s=p2(t,r);n.uniform1iv(this.addr,s);for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||HQ,s[o])}function E$e(n){switch(n){case 5126:return s$e;case 35664:return o$e;case 35665:return a$e;case 35666:return l$e;case 35674:return u$e;case 35675:return c$e;case 35676:return h$e;case 5124:case 35670:return d$e;case 35667:case 35671:return f$e;case 35668:case 35672:return p$e;case 35669:case 35673:return m$e;case 5125:return g$e;case 36294:return v$e;case 36295:return _$e;case 36296:return y$e;case 35678:case 36198:case 36298:case 36306:case 35682:return b$e;case 35679:case 36299:case 36307:return T$e;case 35680:case 36300:case 36308:case 36293:return S$e;case 36289:case 36303:case 36311:case 36292:return w$e}}class x$e{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=i$e(t.type)}}class $$e{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=E$e(t.type)}}class C$e{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const s=this.seq;for(let o=0,l=s.length;o!==l;++o){const u=s[o];u.setValue(e,t[u.id],r)}}}const YL=/(\w+)(\])?(\[|\.)?/g;function e6(n,e){n.seq.push(e),n.map[e.id]=e}function M$e(n,e,t){const r=n.name,s=r.length;for(YL.lastIndex=0;;){const o=YL.exec(r),l=YL.lastIndex;let u=o[1];const h=o[2]==="]",f=o[3];if(h&&(u=u|0),f===void 0||f==="["&&l+2===s){e6(t,f===void 0?new x$e(u,n,e):new $$e(u,n,e));break}else{let g=t.map[u];g===void 0&&(g=new C$e(u),e6(t,g)),t=g}}}class AI{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let s=0;s<r;++s){const o=e.getActiveUniform(t,s),l=e.getUniformLocation(t,o.name);M$e(o,l,this)}}setValue(e,t,r,s){const o=this.map[t];o!==void 0&&o.setValue(e,r,s)}setOptional(e,t,r){const s=t[r];s!==void 0&&this.setValue(e,r,s)}static upload(e,t,r,s){for(let o=0,l=t.length;o!==l;++o){const u=t[o],h=r[u.id];h.needsUpdate!==!1&&u.setValue(e,h.value,s)}}static seqWithValue(e,t){const r=[];for(let s=0,o=e.length;s!==o;++s){const l=e[s];l.id in t&&r.push(l)}return r}}function t6(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let A$e=0;function I$e(n,e){const t=n.split(`
`),r=[],s=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let l=s;l<o;l++){const u=l+1;r.push(`${u===e?">":" "} ${u}: ${t[l]}`)}return r.join(`
`)}function R$e(n){switch(n){case Mg:return["Linear","( value )"];case ms:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function n6(n,e,t){const r=n.getShaderParameter(e,35713),s=n.getShaderInfoLog(e).trim();if(r&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const l=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+I$e(n.getShaderSource(e),l)}else return s}function k$e(n,e){const t=R$e(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function O$e(n,e){let t;switch(e){case cQ:t="Linear";break;case hQ:t="Reinhard";break;case dQ:t="OptimizedCineon";break;case r4:t="ACESFilmic";break;case fQ:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function L$e(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Nx).join(`
`)}function N$e(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function D$e(n,e){const t={},r=n.getProgramParameter(e,35721);for(let s=0;s<r;s++){const o=n.getActiveAttrib(e,s),l=o.name;let u=1;o.type===35674&&(u=2),o.type===35675&&(u=3),o.type===35676&&(u=4),t[l]={type:o.type,location:n.getAttribLocation(e,l),locationSize:u}}return t}function Nx(n){return n!==""}function r6(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function i6(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const P$e=/^[ \t]*#include +<([\w\d./]+)>/gm;function FP(n){return n.replace(P$e,B$e)}function B$e(n,e){const t=ps[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return FP(t)}const F$e=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,z$e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function s6(n){return n.replace(z$e,VQ).replace(F$e,U$e)}function U$e(n,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),VQ(n,e,t,r)}function VQ(n,e,t,r){let s="";for(let o=parseInt(e);o<parseInt(t);o++)s+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return s}function o6(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function H$e(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===a2?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===t$?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===C1&&(e="SHADOWMAP_TYPE_VSM"),e}function G$e(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Vy:case jy:e="ENVMAP_TYPE_CUBE";break;case gE:e="ENVMAP_TYPE_CUBE_UV";break}return e}function W$e(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case jy:e="ENVMAP_MODE_REFRACTION";break}return e}function V$e(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case kC:e="ENVMAP_BLENDING_MULTIPLY";break;case lQ:e="ENVMAP_BLENDING_MIX";break;case uQ:e="ENVMAP_BLENDING_ADD";break}return e}function j$e(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Y$e(n,e,t,r){const s=n.getContext(),o=t.defines;let l=t.vertexShader,u=t.fragmentShader;const h=H$e(t),f=G$e(t),g=W$e(t),y=V$e(t),b=j$e(t),S=t.isWebGL2?"":L$e(t),C=N$e(o),M=s.createProgram();let A,k,O=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(A=[C].filter(Nx).join(`
`),A.length>0&&(A+=`
`),k=[S,C].filter(Nx).join(`
`),k.length>0&&(k+=`
`)):(A=[o6(t),"#define SHADER_NAME "+t.shaderName,C,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Nx).join(`
`),k=[S,o6(t),"#define SHADER_NAME "+t.shaderName,C,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+g:"",t.envMap?"#define "+y:"",b?"#define CUBEUV_TEXEL_WIDTH "+b.texelWidth:"",b?"#define CUBEUV_TEXEL_HEIGHT "+b.texelHeight:"",b?"#define CUBEUV_MAX_MIP "+b.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==c0?"#define TONE_MAPPING":"",t.toneMapping!==c0?ps.tonemapping_pars_fragment:"",t.toneMapping!==c0?O$e("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ps.encodings_pars_fragment,k$e("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Nx).join(`
`)),l=FP(l),l=r6(l,t),l=i6(l,t),u=FP(u),u=r6(u,t),u=i6(u,t),l=s6(l),u=s6(u),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(O=`#version 300 es
`,A=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,k=["#define varying in",t.glslVersion===DP?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===DP?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+k);const P=O+A+l,D=O+k+u,U=t6(s,35633,P),H=t6(s,35632,D);if(s.attachShader(M,U),s.attachShader(M,H),t.index0AttributeName!==void 0?s.bindAttribLocation(M,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(M,0,"position"),s.linkProgram(M),n.debug.checkShaderErrors){const Z=s.getProgramInfoLog(M).trim(),oe=s.getShaderInfoLog(U).trim(),ue=s.getShaderInfoLog(H).trim();let q=!0,ae=!0;if(s.getProgramParameter(M,35714)===!1){q=!1;const le=n6(s,U,"vertex"),ce=n6(s,H,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(M,35715)+`

Program Info Log: `+Z+`
`+le+`
`+ce)}else Z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Z):(oe===""||ue==="")&&(ae=!1);ae&&(this.diagnostics={runnable:q,programLog:Z,vertexShader:{log:oe,prefix:A},fragmentShader:{log:ue,prefix:k}})}s.deleteShader(U),s.deleteShader(H);let V;this.getUniforms=function(){return V===void 0&&(V=new AI(s,M)),V};let z;return this.getAttributes=function(){return z===void 0&&(z=D$e(s,M)),z},this.destroy=function(){r.releaseStatesOfProgram(this),s.deleteProgram(M),this.program=void 0},this.name=t.shaderName,this.id=A$e++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=U,this.fragmentShader=H,this}let X$e=0;class K$e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,s=this._getShaderStage(t),o=this._getShaderStage(r),l=this._getShaderCacheForMaterial(e);return l.has(s)===!1&&(l.add(s),s.usedTimes++),l.has(o)===!1&&(l.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const r=new J$e(e);t.set(e,r)}return t.get(e)}}class J$e{constructor(e){this.id=X$e++,this.code=e,this.usedTimes=0}}function q$e(n,e,t,r,s,o,l){const u=new U1,h=new K$e,f=[],g=s.isWebGL2,y=s.logarithmicDepthBuffer,b=s.vertexTextures;let S=s.precision;const C={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(z,Z,oe,ue,q){const ae=ue.fog,le=q.geometry,ce=z.isMeshStandardMaterial?ue.environment:null,ge=(z.isMeshStandardMaterial?t:e).get(z.envMap||ce),$e=ge&&ge.mapping===gE?ge.image.height:null,K=C[z.type];z.precision!==null&&(S=s.getMaxPrecision(z.precision),S!==z.precision&&console.warn("THREE.WebGLProgram.getParameters:",z.precision,"not supported, using",S,"instead."));const ie=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,se=ie!==void 0?ie.length:0;let fe=0;le.morphAttributes.position!==void 0&&(fe=1),le.morphAttributes.normal!==void 0&&(fe=2),le.morphAttributes.color!==void 0&&(fe=3);let Se,Ue,ke,qe;if(K){const at=ap[K];Se=at.vertexShader,Ue=at.fragmentShader}else Se=z.vertexShader,Ue=z.fragmentShader,h.update(z),ke=h.getVertexShaderID(z),qe=h.getFragmentShaderID(z);const we=n.getRenderTarget(),Ze=z.alphaTest>0,et=z.clearcoat>0,ft=z.iridescence>0;return{isWebGL2:g,shaderID:K,shaderName:z.type,vertexShader:Se,fragmentShader:Ue,defines:z.defines,customVertexShaderID:ke,customFragmentShaderID:qe,isRawShaderMaterial:z.isRawShaderMaterial===!0,glslVersion:z.glslVersion,precision:S,instancing:q.isInstancedMesh===!0,instancingColor:q.isInstancedMesh===!0&&q.instanceColor!==null,supportsVertexTextures:b,outputEncoding:we===null?n.outputEncoding:we.isXRRenderTarget===!0?we.texture.encoding:Mg,map:!!z.map,matcap:!!z.matcap,envMap:!!ge,envMapMode:ge&&ge.mapping,envMapCubeUVHeight:$e,lightMap:!!z.lightMap,aoMap:!!z.aoMap,emissiveMap:!!z.emissiveMap,bumpMap:!!z.bumpMap,normalMap:!!z.normalMap,objectSpaceNormalMap:z.normalMapType===kQ,tangentSpaceNormalMap:z.normalMapType===fT,decodeVideoTexture:!!z.map&&z.map.isVideoTexture===!0&&z.map.encoding===ms,clearcoat:et,clearcoatMap:et&&!!z.clearcoatMap,clearcoatRoughnessMap:et&&!!z.clearcoatRoughnessMap,clearcoatNormalMap:et&&!!z.clearcoatNormalMap,iridescence:ft,iridescenceMap:ft&&!!z.iridescenceMap,iridescenceThicknessMap:ft&&!!z.iridescenceThicknessMap,displacementMap:!!z.displacementMap,roughnessMap:!!z.roughnessMap,metalnessMap:!!z.metalnessMap,specularMap:!!z.specularMap,specularIntensityMap:!!z.specularIntensityMap,specularColorMap:!!z.specularColorMap,opaque:z.transparent===!1&&z.blending===y_,alphaMap:!!z.alphaMap,alphaTest:Ze,gradientMap:!!z.gradientMap,sheen:z.sheen>0,sheenColorMap:!!z.sheenColorMap,sheenRoughnessMap:!!z.sheenRoughnessMap,transmission:z.transmission>0,transmissionMap:!!z.transmissionMap,thicknessMap:!!z.thicknessMap,combine:z.combine,vertexTangents:!!z.normalMap&&!!le.attributes.tangent,vertexColors:z.vertexColors,vertexAlphas:z.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,vertexUvs:!!z.map||!!z.bumpMap||!!z.normalMap||!!z.specularMap||!!z.alphaMap||!!z.emissiveMap||!!z.roughnessMap||!!z.metalnessMap||!!z.clearcoatMap||!!z.clearcoatRoughnessMap||!!z.clearcoatNormalMap||!!z.iridescenceMap||!!z.iridescenceThicknessMap||!!z.displacementMap||!!z.transmissionMap||!!z.thicknessMap||!!z.specularIntensityMap||!!z.specularColorMap||!!z.sheenColorMap||!!z.sheenRoughnessMap,uvsVertexOnly:!(z.map||z.bumpMap||z.normalMap||z.specularMap||z.alphaMap||z.emissiveMap||z.roughnessMap||z.metalnessMap||z.clearcoatNormalMap||z.iridescenceMap||z.iridescenceThicknessMap||z.transmission>0||z.transmissionMap||z.thicknessMap||z.specularIntensityMap||z.specularColorMap||z.sheen>0||z.sheenColorMap||z.sheenRoughnessMap)&&!!z.displacementMap,fog:!!ae,useFog:z.fog===!0,fogExp2:ae&&ae.isFogExp2,flatShading:!!z.flatShading,sizeAttenuation:z.sizeAttenuation,logarithmicDepthBuffer:y,skinning:q.isSkinnedMesh===!0,morphTargets:le.morphAttributes.position!==void 0,morphNormals:le.morphAttributes.normal!==void 0,morphColors:le.morphAttributes.color!==void 0,morphTargetsCount:se,morphTextureStride:fe,numDirLights:Z.directional.length,numPointLights:Z.point.length,numSpotLights:Z.spot.length,numRectAreaLights:Z.rectArea.length,numHemiLights:Z.hemi.length,numDirLightShadows:Z.directionalShadowMap.length,numPointLightShadows:Z.pointShadowMap.length,numSpotLightShadows:Z.spotShadowMap.length,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:z.dithering,shadowMapEnabled:n.shadowMap.enabled&&oe.length>0,shadowMapType:n.shadowMap.type,toneMapping:z.toneMapped?n.toneMapping:c0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:z.premultipliedAlpha,doubleSided:z.side===up,flipSided:z.side===cd,useDepthPacking:!!z.depthPacking,depthPacking:z.depthPacking||0,index0AttributeName:z.index0AttributeName,extensionDerivatives:z.extensions&&z.extensions.derivatives,extensionFragDepth:z.extensions&&z.extensions.fragDepth,extensionDrawBuffers:z.extensions&&z.extensions.drawBuffers,extensionShaderTextureLOD:z.extensions&&z.extensions.shaderTextureLOD,rendererExtensionFragDepth:g||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:g||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:g||r.has("EXT_shader_texture_lod"),customProgramCacheKey:z.customProgramCacheKey()}}function A(z){const Z=[];if(z.shaderID?Z.push(z.shaderID):(Z.push(z.customVertexShaderID),Z.push(z.customFragmentShaderID)),z.defines!==void 0)for(const oe in z.defines)Z.push(oe),Z.push(z.defines[oe]);return z.isRawShaderMaterial===!1&&(k(Z,z),O(Z,z),Z.push(n.outputEncoding)),Z.push(z.customProgramCacheKey),Z.join()}function k(z,Z){z.push(Z.precision),z.push(Z.outputEncoding),z.push(Z.envMapMode),z.push(Z.envMapCubeUVHeight),z.push(Z.combine),z.push(Z.vertexUvs),z.push(Z.fogExp2),z.push(Z.sizeAttenuation),z.push(Z.morphTargetsCount),z.push(Z.morphAttributeCount),z.push(Z.numDirLights),z.push(Z.numPointLights),z.push(Z.numSpotLights),z.push(Z.numHemiLights),z.push(Z.numRectAreaLights),z.push(Z.numDirLightShadows),z.push(Z.numPointLightShadows),z.push(Z.numSpotLightShadows),z.push(Z.shadowMapType),z.push(Z.toneMapping),z.push(Z.numClippingPlanes),z.push(Z.numClipIntersection),z.push(Z.depthPacking)}function O(z,Z){u.disableAll(),Z.isWebGL2&&u.enable(0),Z.supportsVertexTextures&&u.enable(1),Z.instancing&&u.enable(2),Z.instancingColor&&u.enable(3),Z.map&&u.enable(4),Z.matcap&&u.enable(5),Z.envMap&&u.enable(6),Z.lightMap&&u.enable(7),Z.aoMap&&u.enable(8),Z.emissiveMap&&u.enable(9),Z.bumpMap&&u.enable(10),Z.normalMap&&u.enable(11),Z.objectSpaceNormalMap&&u.enable(12),Z.tangentSpaceNormalMap&&u.enable(13),Z.clearcoat&&u.enable(14),Z.clearcoatMap&&u.enable(15),Z.clearcoatRoughnessMap&&u.enable(16),Z.clearcoatNormalMap&&u.enable(17),Z.iridescence&&u.enable(18),Z.iridescenceMap&&u.enable(19),Z.iridescenceThicknessMap&&u.enable(20),Z.displacementMap&&u.enable(21),Z.specularMap&&u.enable(22),Z.roughnessMap&&u.enable(23),Z.metalnessMap&&u.enable(24),Z.gradientMap&&u.enable(25),Z.alphaMap&&u.enable(26),Z.alphaTest&&u.enable(27),Z.vertexColors&&u.enable(28),Z.vertexAlphas&&u.enable(29),Z.vertexUvs&&u.enable(30),Z.vertexTangents&&u.enable(31),Z.uvsVertexOnly&&u.enable(32),Z.fog&&u.enable(33),z.push(u.mask),u.disableAll(),Z.useFog&&u.enable(0),Z.flatShading&&u.enable(1),Z.logarithmicDepthBuffer&&u.enable(2),Z.skinning&&u.enable(3),Z.morphTargets&&u.enable(4),Z.morphNormals&&u.enable(5),Z.morphColors&&u.enable(6),Z.premultipliedAlpha&&u.enable(7),Z.shadowMapEnabled&&u.enable(8),Z.physicallyCorrectLights&&u.enable(9),Z.doubleSided&&u.enable(10),Z.flipSided&&u.enable(11),Z.useDepthPacking&&u.enable(12),Z.dithering&&u.enable(13),Z.specularIntensityMap&&u.enable(14),Z.specularColorMap&&u.enable(15),Z.transmission&&u.enable(16),Z.transmissionMap&&u.enable(17),Z.thicknessMap&&u.enable(18),Z.sheen&&u.enable(19),Z.sheenColorMap&&u.enable(20),Z.sheenRoughnessMap&&u.enable(21),Z.decodeVideoTexture&&u.enable(22),Z.opaque&&u.enable(23),z.push(u.mask)}function P(z){const Z=C[z.type];let oe;if(Z){const ue=ap[Z];oe=NC.clone(ue.uniforms)}else oe=z.uniforms;return oe}function D(z,Z){let oe;for(let ue=0,q=f.length;ue<q;ue++){const ae=f[ue];if(ae.cacheKey===Z){oe=ae,++oe.usedTimes;break}}return oe===void 0&&(oe=new Y$e(n,Z,z,o),f.push(oe)),oe}function U(z){if(--z.usedTimes===0){const Z=f.indexOf(z);f[Z]=f[f.length-1],f.pop(),z.destroy()}}function H(z){h.remove(z)}function V(){h.dispose()}return{getParameters:M,getProgramCacheKey:A,getUniforms:P,acquireProgram:D,releaseProgram:U,releaseShaderCache:H,programs:f,dispose:V}}function Q$e(){let n=new WeakMap;function e(o){let l=n.get(o);return l===void 0&&(l={},n.set(o,l)),l}function t(o){n.delete(o)}function r(o,l,u){n.get(o)[l]=u}function s(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:s}}function Z$e(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function a6(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function l6(){const n=[];let e=0;const t=[],r=[],s=[];function o(){e=0,t.length=0,r.length=0,s.length=0}function l(y,b,S,C,M,A){let k=n[e];return k===void 0?(k={id:y.id,object:y,geometry:b,material:S,groupOrder:C,renderOrder:y.renderOrder,z:M,group:A},n[e]=k):(k.id=y.id,k.object=y,k.geometry=b,k.material=S,k.groupOrder=C,k.renderOrder=y.renderOrder,k.z=M,k.group=A),e++,k}function u(y,b,S,C,M,A){const k=l(y,b,S,C,M,A);S.transmission>0?r.push(k):S.transparent===!0?s.push(k):t.push(k)}function h(y,b,S,C,M,A){const k=l(y,b,S,C,M,A);S.transmission>0?r.unshift(k):S.transparent===!0?s.unshift(k):t.unshift(k)}function f(y,b){t.length>1&&t.sort(y||Z$e),r.length>1&&r.sort(b||a6),s.length>1&&s.sort(b||a6)}function g(){for(let y=e,b=n.length;y<b;y++){const S=n[y];if(S.id===null)break;S.id=null,S.object=null,S.geometry=null,S.material=null,S.group=null}}return{opaque:t,transmissive:r,transparent:s,init:o,push:u,unshift:h,finish:g,sort:f}}function eCe(){let n=new WeakMap;function e(r,s){let o;return n.has(r)===!1?(o=new l6,n.set(r,[o])):s>=n.get(r).length?(o=new l6,n.get(r).push(o)):o=n.get(r)[s],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function tCe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Me,color:new Fn};break;case"SpotLight":t={position:new Me,direction:new Me,color:new Fn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Me,color:new Fn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Me,skyColor:new Fn,groundColor:new Fn};break;case"RectAreaLight":t={color:new Fn,position:new Me,halfWidth:new Me,halfHeight:new Me};break}return n[e.id]=t,t}}}function nCe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Kt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Kt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Kt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let rCe=0;function iCe(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function sCe(n,e){const t=new tCe,r=nCe(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let g=0;g<9;g++)s.probe.push(new Me);const o=new Me,l=new ei,u=new ei;function h(g,y){let b=0,S=0,C=0;for(let Z=0;Z<9;Z++)s.probe[Z].set(0,0,0);let M=0,A=0,k=0,O=0,P=0,D=0,U=0,H=0;g.sort(iCe);const V=y!==!0?Math.PI:1;for(let Z=0,oe=g.length;Z<oe;Z++){const ue=g[Z],q=ue.color,ae=ue.intensity,le=ue.distance,ce=ue.shadow&&ue.shadow.map?ue.shadow.map.texture:null;if(ue.isAmbientLight)b+=q.r*ae*V,S+=q.g*ae*V,C+=q.b*ae*V;else if(ue.isLightProbe)for(let ge=0;ge<9;ge++)s.probe[ge].addScaledVector(ue.sh.coefficients[ge],ae);else if(ue.isDirectionalLight){const ge=t.get(ue);if(ge.color.copy(ue.color).multiplyScalar(ue.intensity*V),ue.castShadow){const $e=ue.shadow,K=r.get(ue);K.shadowBias=$e.bias,K.shadowNormalBias=$e.normalBias,K.shadowRadius=$e.radius,K.shadowMapSize=$e.mapSize,s.directionalShadow[M]=K,s.directionalShadowMap[M]=ce,s.directionalShadowMatrix[M]=ue.shadow.matrix,D++}s.directional[M]=ge,M++}else if(ue.isSpotLight){const ge=t.get(ue);if(ge.position.setFromMatrixPosition(ue.matrixWorld),ge.color.copy(q).multiplyScalar(ae*V),ge.distance=le,ge.coneCos=Math.cos(ue.angle),ge.penumbraCos=Math.cos(ue.angle*(1-ue.penumbra)),ge.decay=ue.decay,ue.castShadow){const $e=ue.shadow,K=r.get(ue);K.shadowBias=$e.bias,K.shadowNormalBias=$e.normalBias,K.shadowRadius=$e.radius,K.shadowMapSize=$e.mapSize,s.spotShadow[k]=K,s.spotShadowMap[k]=ce,s.spotShadowMatrix[k]=ue.shadow.matrix,H++}s.spot[k]=ge,k++}else if(ue.isRectAreaLight){const ge=t.get(ue);ge.color.copy(q).multiplyScalar(ae),ge.halfWidth.set(ue.width*.5,0,0),ge.halfHeight.set(0,ue.height*.5,0),s.rectArea[O]=ge,O++}else if(ue.isPointLight){const ge=t.get(ue);if(ge.color.copy(ue.color).multiplyScalar(ue.intensity*V),ge.distance=ue.distance,ge.decay=ue.decay,ue.castShadow){const $e=ue.shadow,K=r.get(ue);K.shadowBias=$e.bias,K.shadowNormalBias=$e.normalBias,K.shadowRadius=$e.radius,K.shadowMapSize=$e.mapSize,K.shadowCameraNear=$e.camera.near,K.shadowCameraFar=$e.camera.far,s.pointShadow[A]=K,s.pointShadowMap[A]=ce,s.pointShadowMatrix[A]=ue.shadow.matrix,U++}s.point[A]=ge,A++}else if(ue.isHemisphereLight){const ge=t.get(ue);ge.skyColor.copy(ue.color).multiplyScalar(ae*V),ge.groundColor.copy(ue.groundColor).multiplyScalar(ae*V),s.hemi[P]=ge,P++}}O>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=Xn.LTC_FLOAT_1,s.rectAreaLTC2=Xn.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(s.rectAreaLTC1=Xn.LTC_HALF_1,s.rectAreaLTC2=Xn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=b,s.ambient[1]=S,s.ambient[2]=C;const z=s.hash;(z.directionalLength!==M||z.pointLength!==A||z.spotLength!==k||z.rectAreaLength!==O||z.hemiLength!==P||z.numDirectionalShadows!==D||z.numPointShadows!==U||z.numSpotShadows!==H)&&(s.directional.length=M,s.spot.length=k,s.rectArea.length=O,s.point.length=A,s.hemi.length=P,s.directionalShadow.length=D,s.directionalShadowMap.length=D,s.pointShadow.length=U,s.pointShadowMap.length=U,s.spotShadow.length=H,s.spotShadowMap.length=H,s.directionalShadowMatrix.length=D,s.pointShadowMatrix.length=U,s.spotShadowMatrix.length=H,z.directionalLength=M,z.pointLength=A,z.spotLength=k,z.rectAreaLength=O,z.hemiLength=P,z.numDirectionalShadows=D,z.numPointShadows=U,z.numSpotShadows=H,s.version=rCe++)}function f(g,y){let b=0,S=0,C=0,M=0,A=0;const k=y.matrixWorldInverse;for(let O=0,P=g.length;O<P;O++){const D=g[O];if(D.isDirectionalLight){const U=s.directional[b];U.direction.setFromMatrixPosition(D.matrixWorld),o.setFromMatrixPosition(D.target.matrixWorld),U.direction.sub(o),U.direction.transformDirection(k),b++}else if(D.isSpotLight){const U=s.spot[C];U.position.setFromMatrixPosition(D.matrixWorld),U.position.applyMatrix4(k),U.direction.setFromMatrixPosition(D.matrixWorld),o.setFromMatrixPosition(D.target.matrixWorld),U.direction.sub(o),U.direction.transformDirection(k),C++}else if(D.isRectAreaLight){const U=s.rectArea[M];U.position.setFromMatrixPosition(D.matrixWorld),U.position.applyMatrix4(k),u.identity(),l.copy(D.matrixWorld),l.premultiply(k),u.extractRotation(l),U.halfWidth.set(D.width*.5,0,0),U.halfHeight.set(0,D.height*.5,0),U.halfWidth.applyMatrix4(u),U.halfHeight.applyMatrix4(u),M++}else if(D.isPointLight){const U=s.point[S];U.position.setFromMatrixPosition(D.matrixWorld),U.position.applyMatrix4(k),S++}else if(D.isHemisphereLight){const U=s.hemi[A];U.direction.setFromMatrixPosition(D.matrixWorld),U.direction.transformDirection(k),A++}}}return{setup:h,setupView:f,state:s}}function u6(n,e){const t=new sCe(n,e),r=[],s=[];function o(){r.length=0,s.length=0}function l(g){r.push(g)}function u(g){s.push(g)}function h(g){t.setup(r,g)}function f(g){t.setupView(r,g)}return{init:o,state:{lightsArray:r,shadowsArray:s,lights:t},setupLights:h,setupLightsView:f,pushLight:l,pushShadow:u}}function oCe(n,e){let t=new WeakMap;function r(o,l=0){let u;return t.has(o)===!1?(u=new u6(n,e),t.set(o,[u])):l>=t.get(o).length?(u=new u6(n,e),t.get(o).push(u)):u=t.get(o)[l],u}function s(){t=new WeakMap}return{get:r,dispose:s}}class PC extends hd{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ib,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class m2 extends hd{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Me,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const aCe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,lCe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function uCe(n,e,t){let r=new f2;const s=new Kt,o=new Kt,l=new Ts,u=new PC({depthPacking:Bw}),h=new m2,f={},g=t.maxTextureSize,y={0:cd,1:_v,2:up},b=new xd({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Kt},radius:{value:4}},vertexShader:aCe,fragmentShader:lCe}),S=b.clone();S.defines.HORIZONTAL_PASS=1;const C=new ui;C.setAttribute("position",new zo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new Hn(C,b),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=a2,this.render=function(D,U,H){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||D.length===0)return;const V=n.getRenderTarget(),z=n.getActiveCubeFace(),Z=n.getActiveMipmapLevel(),oe=n.state;oe.setBlending(gp),oe.buffers.color.setClear(1,1,1,1),oe.buffers.depth.setTest(!0),oe.setScissorTest(!1);for(let ue=0,q=D.length;ue<q;ue++){const ae=D[ue],le=ae.shadow;if(le===void 0){console.warn("THREE.WebGLShadowMap:",ae,"has no shadow.");continue}if(le.autoUpdate===!1&&le.needsUpdate===!1)continue;s.copy(le.mapSize);const ce=le.getFrameExtents();if(s.multiply(ce),o.copy(le.mapSize),(s.x>g||s.y>g)&&(s.x>g&&(o.x=Math.floor(g/ce.x),s.x=o.x*ce.x,le.mapSize.x=o.x),s.y>g&&(o.y=Math.floor(g/ce.y),s.y=o.y*ce.y,le.mapSize.y=o.y)),le.map===null){const $e=this.type!==C1?{minFilter:Vl,magFilter:Vl}:{};le.map=new Dc(s.x,s.y,$e),le.map.texture.name=ae.name+".shadowMap",le.camera.updateProjectionMatrix()}n.setRenderTarget(le.map),n.clear();const ge=le.getViewportCount();for(let $e=0;$e<ge;$e++){const K=le.getViewport($e);l.set(o.x*K.x,o.y*K.y,o.x*K.z,o.y*K.w),oe.viewport(l),le.updateMatrices(ae,$e),r=le.getFrustum(),P(U,H,le.camera,ae,this.type)}le.isPointLightShadow!==!0&&this.type===C1&&k(le,H),le.needsUpdate=!1}A.needsUpdate=!1,n.setRenderTarget(V,z,Z)};function k(D,U){const H=e.update(M);b.defines.VSM_SAMPLES!==D.blurSamples&&(b.defines.VSM_SAMPLES=D.blurSamples,S.defines.VSM_SAMPLES=D.blurSamples,b.needsUpdate=!0,S.needsUpdate=!0),D.mapPass===null&&(D.mapPass=new Dc(s.x,s.y)),b.uniforms.shadow_pass.value=D.map.texture,b.uniforms.resolution.value=D.mapSize,b.uniforms.radius.value=D.radius,n.setRenderTarget(D.mapPass),n.clear(),n.renderBufferDirect(U,null,H,b,M,null),S.uniforms.shadow_pass.value=D.mapPass.texture,S.uniforms.resolution.value=D.mapSize,S.uniforms.radius.value=D.radius,n.setRenderTarget(D.map),n.clear(),n.renderBufferDirect(U,null,H,S,M,null)}function O(D,U,H,V,z,Z){let oe=null;const ue=H.isPointLight===!0?D.customDistanceMaterial:D.customDepthMaterial;if(ue!==void 0?oe=ue:oe=H.isPointLight===!0?h:u,n.localClippingEnabled&&U.clipShadows===!0&&Array.isArray(U.clippingPlanes)&&U.clippingPlanes.length!==0||U.displacementMap&&U.displacementScale!==0||U.alphaMap&&U.alphaTest>0){const q=oe.uuid,ae=U.uuid;let le=f[q];le===void 0&&(le={},f[q]=le);let ce=le[ae];ce===void 0&&(ce=oe.clone(),le[ae]=ce),oe=ce}return oe.visible=U.visible,oe.wireframe=U.wireframe,Z===C1?oe.side=U.shadowSide!==null?U.shadowSide:U.side:oe.side=U.shadowSide!==null?U.shadowSide:y[U.side],oe.alphaMap=U.alphaMap,oe.alphaTest=U.alphaTest,oe.clipShadows=U.clipShadows,oe.clippingPlanes=U.clippingPlanes,oe.clipIntersection=U.clipIntersection,oe.displacementMap=U.displacementMap,oe.displacementScale=U.displacementScale,oe.displacementBias=U.displacementBias,oe.wireframeLinewidth=U.wireframeLinewidth,oe.linewidth=U.linewidth,H.isPointLight===!0&&oe.isMeshDistanceMaterial===!0&&(oe.referencePosition.setFromMatrixPosition(H.matrixWorld),oe.nearDistance=V,oe.farDistance=z),oe}function P(D,U,H,V,z){if(D.visible===!1)return;if(D.layers.test(U.layers)&&(D.isMesh||D.isLine||D.isPoints)&&(D.castShadow||D.receiveShadow&&z===C1)&&(!D.frustumCulled||r.intersectsObject(D))){D.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,D.matrixWorld);const oe=e.update(D),ue=D.material;if(Array.isArray(ue)){const q=oe.groups;for(let ae=0,le=q.length;ae<le;ae++){const ce=q[ae],ge=ue[ce.materialIndex];if(ge&&ge.visible){const $e=O(D,ge,V,H.near,H.far,z);n.renderBufferDirect(H,null,oe,$e,D,ce)}}}else if(ue.visible){const q=O(D,ue,V,H.near,H.far,z);n.renderBufferDirect(H,null,oe,q,D,null)}}const Z=D.children;for(let oe=0,ue=Z.length;oe<ue;oe++)P(Z[oe],U,H,V,z)}}function cCe(n,e,t){const r=t.isWebGL2;function s(){let ze=!1;const Pt=new Ts;let lt=null;const Gt=new Ts(0,0,0,0);return{setMask:function(Wt){lt!==Wt&&!ze&&(n.colorMask(Wt,Wt,Wt,Wt),lt=Wt)},setLocked:function(Wt){ze=Wt},setClear:function(Wt,bn,ar,cr,oi){oi===!0&&(Wt*=cr,bn*=cr,ar*=cr),Pt.set(Wt,bn,ar,cr),Gt.equals(Pt)===!1&&(n.clearColor(Wt,bn,ar,cr),Gt.copy(Pt))},reset:function(){ze=!1,lt=null,Gt.set(-1,0,0,0)}}}function o(){let ze=!1,Pt=null,lt=null,Gt=null;return{setTest:function(Wt){Wt?Ze(2929):et(2929)},setMask:function(Wt){Pt!==Wt&&!ze&&(n.depthMask(Wt),Pt=Wt)},setFunc:function(Wt){if(lt!==Wt){if(Wt)switch(Wt){case tQ:n.depthFunc(512);break;case nQ:n.depthFunc(519);break;case rQ:n.depthFunc(513);break;case ER:n.depthFunc(515);break;case iQ:n.depthFunc(514);break;case sQ:n.depthFunc(518);break;case oQ:n.depthFunc(516);break;case aQ:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);lt=Wt}},setLocked:function(Wt){ze=Wt},setClear:function(Wt){Gt!==Wt&&(n.clearDepth(Wt),Gt=Wt)},reset:function(){ze=!1,Pt=null,lt=null,Gt=null}}}function l(){let ze=!1,Pt=null,lt=null,Gt=null,Wt=null,bn=null,ar=null,cr=null,oi=null;return{setTest:function(Mr){ze||(Mr?Ze(2960):et(2960))},setMask:function(Mr){Pt!==Mr&&!ze&&(n.stencilMask(Mr),Pt=Mr)},setFunc:function(Mr,_r,ne){(lt!==Mr||Gt!==_r||Wt!==ne)&&(n.stencilFunc(Mr,_r,ne),lt=Mr,Gt=_r,Wt=ne)},setOp:function(Mr,_r,ne){(bn!==Mr||ar!==_r||cr!==ne)&&(n.stencilOp(Mr,_r,ne),bn=Mr,ar=_r,cr=ne)},setLocked:function(Mr){ze=Mr},setClear:function(Mr){oi!==Mr&&(n.clearStencil(Mr),oi=Mr)},reset:function(){ze=!1,Pt=null,lt=null,Gt=null,Wt=null,bn=null,ar=null,cr=null,oi=null}}}const u=new s,h=new o,f=new l,g=new WeakMap,y=new WeakMap;let b={},S={},C=new WeakMap,M=[],A=null,k=!1,O=null,P=null,D=null,U=null,H=null,V=null,z=null,Z=!1,oe=null,ue=null,q=null,ae=null,le=null;const ce=n.getParameter(35661);let ge=!1,$e=0;const K=n.getParameter(7938);K.indexOf("WebGL")!==-1?($e=parseFloat(/^WebGL (\d)/.exec(K)[1]),ge=$e>=1):K.indexOf("OpenGL ES")!==-1&&($e=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),ge=$e>=2);let ie=null,se={};const fe=n.getParameter(3088),Se=n.getParameter(2978),Ue=new Ts().fromArray(fe),ke=new Ts().fromArray(Se);function qe(ze,Pt,lt){const Gt=new Uint8Array(4),Wt=n.createTexture();n.bindTexture(ze,Wt),n.texParameteri(ze,10241,9728),n.texParameteri(ze,10240,9728);for(let bn=0;bn<lt;bn++)n.texImage2D(Pt+bn,0,6408,1,1,0,6408,5121,Gt);return Wt}const we={};we[3553]=qe(3553,3553,1),we[34067]=qe(34067,34069,6),u.setClear(0,0,0,1),h.setClear(1),f.setClear(0),Ze(2929),h.setFunc(ER),It(!1),kt(cP),Ze(2884),it(gp);function Ze(ze){b[ze]!==!0&&(n.enable(ze),b[ze]=!0)}function et(ze){b[ze]!==!1&&(n.disable(ze),b[ze]=!1)}function ft(ze,Pt){return S[ze]!==Pt?(n.bindFramebuffer(ze,Pt),S[ze]=Pt,r&&(ze===36009&&(S[36160]=Pt),ze===36160&&(S[36009]=Pt)),!0):!1}function at(ze,Pt){let lt=M,Gt=!1;if(ze)if(lt=C.get(Pt),lt===void 0&&(lt=[],C.set(Pt,lt)),ze.isWebGLMultipleRenderTargets){const Wt=ze.texture;if(lt.length!==Wt.length||lt[0]!==36064){for(let bn=0,ar=Wt.length;bn<ar;bn++)lt[bn]=36064+bn;lt.length=Wt.length,Gt=!0}}else lt[0]!==36064&&(lt[0]=36064,Gt=!0);else lt[0]!==1029&&(lt[0]=1029,Gt=!0);Gt&&(t.isWebGL2?n.drawBuffers(lt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(lt))}function Ge(ze){return A!==ze?(n.useProgram(ze),A=ze,!0):!1}const Ie={[_1]:32774,[Vq]:32778,[n4]:32779};if(r)Ie[fP]=32775,Ie[pP]=32776;else{const ze=e.get("EXT_blend_minmax");ze!==null&&(Ie[fP]=ze.MIN_EXT,Ie[pP]=ze.MAX_EXT)}const He={[jq]:0,[Yq]:1,[Xq]:768,[l2]:770,[eQ]:776,[Qq]:774,[Jq]:772,[Kq]:769,[u2]:771,[Zq]:775,[qq]:773};function it(ze,Pt,lt,Gt,Wt,bn,ar,cr){if(ze===gp){k===!0&&(et(3042),k=!1);return}if(k===!1&&(Ze(3042),k=!0),ze!==Wq){if(ze!==O||cr!==Z){if((P!==_1||H!==_1)&&(n.blendEquation(32774),P=_1,H=_1),cr)switch(ze){case y_:n.blendFuncSeparate(1,771,1,771);break;case wR:n.blendFunc(1,1);break;case hP:n.blendFuncSeparate(0,769,0,1);break;case dP:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ze);break}else switch(ze){case y_:n.blendFuncSeparate(770,771,1,771);break;case wR:n.blendFunc(770,1);break;case hP:n.blendFuncSeparate(0,769,0,1);break;case dP:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ze);break}D=null,U=null,V=null,z=null,O=ze,Z=cr}return}Wt=Wt||Pt,bn=bn||lt,ar=ar||Gt,(Pt!==P||Wt!==H)&&(n.blendEquationSeparate(Ie[Pt],Ie[Wt]),P=Pt,H=Wt),(lt!==D||Gt!==U||bn!==V||ar!==z)&&(n.blendFuncSeparate(He[lt],He[Gt],He[bn],He[ar]),D=lt,U=Gt,V=bn,z=ar),O=ze,Z=null}function st(ze,Pt){ze.side===up?et(2884):Ze(2884);let lt=ze.side===cd;Pt&&(lt=!lt),It(lt),ze.blending===y_&&ze.transparent===!1?it(gp):it(ze.blending,ze.blendEquation,ze.blendSrc,ze.blendDst,ze.blendEquationAlpha,ze.blendSrcAlpha,ze.blendDstAlpha,ze.premultipliedAlpha),h.setFunc(ze.depthFunc),h.setTest(ze.depthTest),h.setMask(ze.depthWrite),u.setMask(ze.colorWrite);const Gt=ze.stencilWrite;f.setTest(Gt),Gt&&(f.setMask(ze.stencilWriteMask),f.setFunc(ze.stencilFunc,ze.stencilRef,ze.stencilFuncMask),f.setOp(ze.stencilFail,ze.stencilZFail,ze.stencilZPass)),Mt(ze.polygonOffset,ze.polygonOffsetFactor,ze.polygonOffsetUnits),ze.alphaToCoverage===!0?Ze(32926):et(32926)}function It(ze){oe!==ze&&(ze?n.frontFace(2304):n.frontFace(2305),oe=ze)}function kt(ze){ze!==zq?(Ze(2884),ze!==ue&&(ze===cP?n.cullFace(1029):ze===Uq?n.cullFace(1028):n.cullFace(1032))):et(2884),ue=ze}function vt(ze){ze!==q&&(ge&&n.lineWidth(ze),q=ze)}function Mt(ze,Pt,lt){ze?(Ze(32823),(ae!==Pt||le!==lt)&&(n.polygonOffset(Pt,lt),ae=Pt,le=lt)):et(32823)}function Ct(ze){ze?Ze(3089):et(3089)}function gt(ze){ze===void 0&&(ze=33984+ce-1),ie!==ze&&(n.activeTexture(ze),ie=ze)}function Ee(ze,Pt){ie===null&&gt();let lt=se[ie];lt===void 0&&(lt={type:void 0,texture:void 0},se[ie]=lt),(lt.type!==ze||lt.texture!==Pt)&&(n.bindTexture(ze,Pt||we[ze]),lt.type=ze,lt.texture=Pt)}function re(){const ze=se[ie];ze!==void 0&&ze.type!==void 0&&(n.bindTexture(ze.type,null),ze.type=void 0,ze.texture=void 0)}function Be(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function mt(){try{n.texSubImage2D.apply(n,arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function yt(){try{n.texSubImage3D.apply(n,arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function wt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function Ke(){try{n.texStorage2D.apply(n,arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function Qe(){try{n.texStorage3D.apply(n,arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function Le(){try{n.texImage2D.apply(n,arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function Q(){try{n.texImage3D.apply(n,arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function te(ze){Ue.equals(ze)===!1&&(n.scissor(ze.x,ze.y,ze.z,ze.w),Ue.copy(ze))}function me(ze){ke.equals(ze)===!1&&(n.viewport(ze.x,ze.y,ze.z,ze.w),ke.copy(ze))}function Re(ze,Pt){let lt=y.get(Pt);lt===void 0&&(lt=new WeakMap,y.set(Pt,lt));let Gt=lt.get(ze);Gt===void 0&&(Gt=n.getUniformBlockIndex(Pt,ze.name),lt.set(ze,Gt))}function Fe(ze,Pt){const lt=y.get(Pt).get(ze);g.get(ze)!==lt&&(n.uniformBlockBinding(Pt,lt,ze.__bindingPointIndex),g.set(ze,lt))}function bt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),b={},ie=null,se={},S={},C=new WeakMap,M=[],A=null,k=!1,O=null,P=null,D=null,U=null,H=null,V=null,z=null,Z=!1,oe=null,ue=null,q=null,ae=null,le=null,Ue.set(0,0,n.canvas.width,n.canvas.height),ke.set(0,0,n.canvas.width,n.canvas.height),u.reset(),h.reset(),f.reset()}return{buffers:{color:u,depth:h,stencil:f},enable:Ze,disable:et,bindFramebuffer:ft,drawBuffers:at,useProgram:Ge,setBlending:it,setMaterial:st,setFlipSided:It,setCullFace:kt,setLineWidth:vt,setPolygonOffset:Mt,setScissorTest:Ct,activeTexture:gt,bindTexture:Ee,unbindTexture:re,compressedTexImage2D:Be,texImage2D:Le,texImage3D:Q,updateUBOMapping:Re,uniformBlockBinding:Fe,texStorage2D:Ke,texStorage3D:Qe,texSubImage2D:mt,texSubImage3D:yt,compressedTexSubImage2D:wt,scissor:te,viewport:me,reset:bt}}function hCe(n,e,t,r,s,o,l){const u=s.isWebGL2,h=s.maxTextures,f=s.maxCubemapSize,g=s.maxTextureSize,y=s.maxSamples,b=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,S=/OculusBrowser/g.test(navigator.userAgent),C=new WeakMap;let M;const A=new WeakMap;let k=!1;try{k=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function O(Ee,re){return k?new OffscreenCanvas(Ee,re):V$("canvas")}function P(Ee,re,Be,mt){let yt=1;if((Ee.width>mt||Ee.height>mt)&&(yt=mt/Math.max(Ee.width,Ee.height)),yt<1||re===!0)if(typeof HTMLImageElement<"u"&&Ee instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ee instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ee instanceof ImageBitmap){const wt=re?MR:Math.floor,Ke=wt(yt*Ee.width),Qe=wt(yt*Ee.height);M===void 0&&(M=O(Ke,Qe));const Le=Be?O(Ke,Qe):M;return Le.width=Ke,Le.height=Qe,Le.getContext("2d").drawImage(Ee,0,0,Ke,Qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ee.width+"x"+Ee.height+") to ("+Ke+"x"+Qe+")."),Le}else return"data"in Ee&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ee.width+"x"+Ee.height+")."),Ee;return Ee}function D(Ee){return PP(Ee.width)&&PP(Ee.height)}function U(Ee){return u?!1:Ee.wrapS!==lp||Ee.wrapT!==lp||Ee.minFilter!==Vl&&Ee.minFilter!==El}function H(Ee,re){return Ee.generateMipmaps&&re&&Ee.minFilter!==Vl&&Ee.minFilter!==El}function V(Ee){n.generateMipmap(Ee)}function z(Ee,re,Be,mt,yt=!1){if(u===!1)return re;if(Ee!==null){if(n[Ee]!==void 0)return n[Ee];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ee+"'")}let wt=re;return re===6403&&(Be===5126&&(wt=33326),Be===5131&&(wt=33325),Be===5121&&(wt=33321)),re===33319&&(Be===5126&&(wt=33328),Be===5131&&(wt=33327),Be===5121&&(wt=33323)),re===6408&&(Be===5126&&(wt=34836),Be===5131&&(wt=34842),Be===5121&&(wt=mt===ms&&yt===!1?35907:32856),Be===32819&&(wt=32854),Be===32820&&(wt=32855)),(wt===33325||wt===33326||wt===33327||wt===33328||wt===34842||wt===34836)&&e.get("EXT_color_buffer_float"),wt}function Z(Ee,re,Be){return H(Ee,Be)===!0||Ee.isFramebufferTexture&&Ee.minFilter!==Vl&&Ee.minFilter!==El?Math.log2(Math.max(re.width,re.height))+1:Ee.mipmaps!==void 0&&Ee.mipmaps.length>0?Ee.mipmaps.length:Ee.isCompressedTexture&&Array.isArray(Ee.image)?re.mipmaps.length:1}function oe(Ee){return Ee===Vl||Ee===xR||Ee===$R?9728:9729}function ue(Ee){const re=Ee.target;re.removeEventListener("dispose",ue),ae(re),re.isVideoTexture&&C.delete(re)}function q(Ee){const re=Ee.target;re.removeEventListener("dispose",q),ce(re)}function ae(Ee){const re=r.get(Ee);if(re.__webglInit===void 0)return;const Be=Ee.source,mt=A.get(Be);if(mt){const yt=mt[re.__cacheKey];yt.usedTimes--,yt.usedTimes===0&&le(Ee),Object.keys(mt).length===0&&A.delete(Be)}r.remove(Ee)}function le(Ee){const re=r.get(Ee);n.deleteTexture(re.__webglTexture);const Be=Ee.source,mt=A.get(Be);delete mt[re.__cacheKey],l.memory.textures--}function ce(Ee){const re=Ee.texture,Be=r.get(Ee),mt=r.get(re);if(mt.__webglTexture!==void 0&&(n.deleteTexture(mt.__webglTexture),l.memory.textures--),Ee.depthTexture&&Ee.depthTexture.dispose(),Ee.isWebGLCubeRenderTarget)for(let yt=0;yt<6;yt++)n.deleteFramebuffer(Be.__webglFramebuffer[yt]),Be.__webglDepthbuffer&&n.deleteRenderbuffer(Be.__webglDepthbuffer[yt]);else{if(n.deleteFramebuffer(Be.__webglFramebuffer),Be.__webglDepthbuffer&&n.deleteRenderbuffer(Be.__webglDepthbuffer),Be.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Be.__webglMultisampledFramebuffer),Be.__webglColorRenderbuffer)for(let yt=0;yt<Be.__webglColorRenderbuffer.length;yt++)Be.__webglColorRenderbuffer[yt]&&n.deleteRenderbuffer(Be.__webglColorRenderbuffer[yt]);Be.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Be.__webglDepthRenderbuffer)}if(Ee.isWebGLMultipleRenderTargets)for(let yt=0,wt=re.length;yt<wt;yt++){const Ke=r.get(re[yt]);Ke.__webglTexture&&(n.deleteTexture(Ke.__webglTexture),l.memory.textures--),r.remove(re[yt])}r.remove(re),r.remove(Ee)}let ge=0;function $e(){ge=0}function K(){const Ee=ge;return Ee>=h&&console.warn("THREE.WebGLTextures: Trying to use "+Ee+" texture units while this GPU supports only "+h),ge+=1,Ee}function ie(Ee){const re=[];return re.push(Ee.wrapS),re.push(Ee.wrapT),re.push(Ee.magFilter),re.push(Ee.minFilter),re.push(Ee.anisotropy),re.push(Ee.internalFormat),re.push(Ee.format),re.push(Ee.type),re.push(Ee.generateMipmaps),re.push(Ee.premultiplyAlpha),re.push(Ee.flipY),re.push(Ee.unpackAlignment),re.push(Ee.encoding),re.join()}function se(Ee,re){const Be=r.get(Ee);if(Ee.isVideoTexture&&Ct(Ee),Ee.isRenderTargetTexture===!1&&Ee.version>0&&Be.__version!==Ee.version){const mt=Ee.image;if(mt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(mt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{et(Be,Ee,re);return}}t.activeTexture(33984+re),t.bindTexture(3553,Be.__webglTexture)}function fe(Ee,re){const Be=r.get(Ee);if(Ee.version>0&&Be.__version!==Ee.version){et(Be,Ee,re);return}t.activeTexture(33984+re),t.bindTexture(35866,Be.__webglTexture)}function Se(Ee,re){const Be=r.get(Ee);if(Ee.version>0&&Be.__version!==Ee.version){et(Be,Ee,re);return}t.activeTexture(33984+re),t.bindTexture(32879,Be.__webglTexture)}function Ue(Ee,re){const Be=r.get(Ee);if(Ee.version>0&&Be.__version!==Ee.version){ft(Be,Ee,re);return}t.activeTexture(33984+re),t.bindTexture(34067,Be.__webglTexture)}const ke={[Pw]:10497,[lp]:33071,[F$]:33648},qe={[Vl]:9728,[xR]:9984,[$R]:9986,[El]:9729,[i4]:9985,[dT]:9987};function we(Ee,re,Be){if(Be?(n.texParameteri(Ee,10242,ke[re.wrapS]),n.texParameteri(Ee,10243,ke[re.wrapT]),(Ee===32879||Ee===35866)&&n.texParameteri(Ee,32882,ke[re.wrapR]),n.texParameteri(Ee,10240,qe[re.magFilter]),n.texParameteri(Ee,10241,qe[re.minFilter])):(n.texParameteri(Ee,10242,33071),n.texParameteri(Ee,10243,33071),(Ee===32879||Ee===35866)&&n.texParameteri(Ee,32882,33071),(re.wrapS!==lp||re.wrapT!==lp)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(Ee,10240,oe(re.magFilter)),n.texParameteri(Ee,10241,oe(re.minFilter)),re.minFilter!==Vl&&re.minFilter!==El&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const mt=e.get("EXT_texture_filter_anisotropic");if(re.type===ov&&e.has("OES_texture_float_linear")===!1||u===!1&&re.type===tT&&e.has("OES_texture_half_float_linear")===!1)return;(re.anisotropy>1||r.get(re).__currentAnisotropy)&&(n.texParameterf(Ee,mt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(re.anisotropy,s.getMaxAnisotropy())),r.get(re).__currentAnisotropy=re.anisotropy)}}function Ze(Ee,re){let Be=!1;Ee.__webglInit===void 0&&(Ee.__webglInit=!0,re.addEventListener("dispose",ue));const mt=re.source;let yt=A.get(mt);yt===void 0&&(yt={},A.set(mt,yt));const wt=ie(re);if(wt!==Ee.__cacheKey){yt[wt]===void 0&&(yt[wt]={texture:n.createTexture(),usedTimes:0},l.memory.textures++,Be=!0),yt[wt].usedTimes++;const Ke=yt[Ee.__cacheKey];Ke!==void 0&&(yt[Ee.__cacheKey].usedTimes--,Ke.usedTimes===0&&le(re)),Ee.__cacheKey=wt,Ee.__webglTexture=yt[wt].texture}return Be}function et(Ee,re,Be){let mt=3553;re.isDataArrayTexture&&(mt=35866),re.isData3DTexture&&(mt=32879);const yt=Ze(Ee,re),wt=re.source;if(t.activeTexture(33984+Be),t.bindTexture(mt,Ee.__webglTexture),wt.version!==wt.__currentVersion||yt===!0){n.pixelStorei(37440,re.flipY),n.pixelStorei(37441,re.premultiplyAlpha),n.pixelStorei(3317,re.unpackAlignment),n.pixelStorei(37443,0);const Ke=U(re)&&D(re.image)===!1;let Qe=P(re.image,Ke,!1,g);Qe=gt(re,Qe);const Le=D(Qe)||u,Q=o.convert(re.format,re.encoding);let te=o.convert(re.type),me=z(re.internalFormat,Q,te,re.encoding,re.isVideoTexture);we(mt,re,Le);let Re;const Fe=re.mipmaps,bt=u&&re.isVideoTexture!==!0,ze=wt.__currentVersion===void 0||yt===!0,Pt=Z(re,Qe,Le);if(re.isDepthTexture)me=6402,u?re.type===ov?me=36012:re.type===g_?me=33190:re.type===Uy?me=35056:me=33189:re.type===ov&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),re.format===Hy&&me===6402&&re.type!==s4&&re.type!==g_&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),re.type=g_,te=o.convert(re.type)),re.format===Yy&&me===6402&&(me=34041,re.type!==Uy&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),re.type=Uy,te=o.convert(re.type))),ze&&(bt?t.texStorage2D(3553,1,me,Qe.width,Qe.height):t.texImage2D(3553,0,me,Qe.width,Qe.height,0,Q,te,null));else if(re.isDataTexture)if(Fe.length>0&&Le){bt&&ze&&t.texStorage2D(3553,Pt,me,Fe[0].width,Fe[0].height);for(let lt=0,Gt=Fe.length;lt<Gt;lt++)Re=Fe[lt],bt?t.texSubImage2D(3553,lt,0,0,Re.width,Re.height,Q,te,Re.data):t.texImage2D(3553,lt,me,Re.width,Re.height,0,Q,te,Re.data);re.generateMipmaps=!1}else bt?(ze&&t.texStorage2D(3553,Pt,me,Qe.width,Qe.height),t.texSubImage2D(3553,0,0,0,Qe.width,Qe.height,Q,te,Qe.data)):t.texImage2D(3553,0,me,Qe.width,Qe.height,0,Q,te,Qe.data);else if(re.isCompressedTexture){bt&&ze&&t.texStorage2D(3553,Pt,me,Fe[0].width,Fe[0].height);for(let lt=0,Gt=Fe.length;lt<Gt;lt++)Re=Fe[lt],re.format!==Xp?Q!==null?bt?t.compressedTexSubImage2D(3553,lt,0,0,Re.width,Re.height,Q,Re.data):t.compressedTexImage2D(3553,lt,me,Re.width,Re.height,0,Re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):bt?t.texSubImage2D(3553,lt,0,0,Re.width,Re.height,Q,te,Re.data):t.texImage2D(3553,lt,me,Re.width,Re.height,0,Q,te,Re.data)}else if(re.isDataArrayTexture)bt?(ze&&t.texStorage3D(35866,Pt,me,Qe.width,Qe.height,Qe.depth),t.texSubImage3D(35866,0,0,0,0,Qe.width,Qe.height,Qe.depth,Q,te,Qe.data)):t.texImage3D(35866,0,me,Qe.width,Qe.height,Qe.depth,0,Q,te,Qe.data);else if(re.isData3DTexture)bt?(ze&&t.texStorage3D(32879,Pt,me,Qe.width,Qe.height,Qe.depth),t.texSubImage3D(32879,0,0,0,0,Qe.width,Qe.height,Qe.depth,Q,te,Qe.data)):t.texImage3D(32879,0,me,Qe.width,Qe.height,Qe.depth,0,Q,te,Qe.data);else if(re.isFramebufferTexture){if(ze)if(bt)t.texStorage2D(3553,Pt,me,Qe.width,Qe.height);else{let lt=Qe.width,Gt=Qe.height;for(let Wt=0;Wt<Pt;Wt++)t.texImage2D(3553,Wt,me,lt,Gt,0,Q,te,null),lt>>=1,Gt>>=1}}else if(Fe.length>0&&Le){bt&&ze&&t.texStorage2D(3553,Pt,me,Fe[0].width,Fe[0].height);for(let lt=0,Gt=Fe.length;lt<Gt;lt++)Re=Fe[lt],bt?t.texSubImage2D(3553,lt,0,0,Q,te,Re):t.texImage2D(3553,lt,me,Q,te,Re);re.generateMipmaps=!1}else bt?(ze&&t.texStorage2D(3553,Pt,me,Qe.width,Qe.height),t.texSubImage2D(3553,0,0,0,Q,te,Qe)):t.texImage2D(3553,0,me,Q,te,Qe);H(re,Le)&&V(mt),wt.__currentVersion=wt.version,re.onUpdate&&re.onUpdate(re)}Ee.__version=re.version}function ft(Ee,re,Be){if(re.image.length!==6)return;const mt=Ze(Ee,re),yt=re.source;if(t.activeTexture(33984+Be),t.bindTexture(34067,Ee.__webglTexture),yt.version!==yt.__currentVersion||mt===!0){n.pixelStorei(37440,re.flipY),n.pixelStorei(37441,re.premultiplyAlpha),n.pixelStorei(3317,re.unpackAlignment),n.pixelStorei(37443,0);const wt=re.isCompressedTexture||re.image[0].isCompressedTexture,Ke=re.image[0]&&re.image[0].isDataTexture,Qe=[];for(let lt=0;lt<6;lt++)!wt&&!Ke?Qe[lt]=P(re.image[lt],!1,!0,f):Qe[lt]=Ke?re.image[lt].image:re.image[lt],Qe[lt]=gt(re,Qe[lt]);const Le=Qe[0],Q=D(Le)||u,te=o.convert(re.format,re.encoding),me=o.convert(re.type),Re=z(re.internalFormat,te,me,re.encoding),Fe=u&&re.isVideoTexture!==!0,bt=yt.__currentVersion===void 0||mt===!0;let ze=Z(re,Le,Q);we(34067,re,Q);let Pt;if(wt){Fe&&bt&&t.texStorage2D(34067,ze,Re,Le.width,Le.height);for(let lt=0;lt<6;lt++){Pt=Qe[lt].mipmaps;for(let Gt=0;Gt<Pt.length;Gt++){const Wt=Pt[Gt];re.format!==Xp?te!==null?Fe?t.compressedTexSubImage2D(34069+lt,Gt,0,0,Wt.width,Wt.height,te,Wt.data):t.compressedTexImage2D(34069+lt,Gt,Re,Wt.width,Wt.height,0,Wt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Fe?t.texSubImage2D(34069+lt,Gt,0,0,Wt.width,Wt.height,te,me,Wt.data):t.texImage2D(34069+lt,Gt,Re,Wt.width,Wt.height,0,te,me,Wt.data)}}}else{Pt=re.mipmaps,Fe&&bt&&(Pt.length>0&&ze++,t.texStorage2D(34067,ze,Re,Qe[0].width,Qe[0].height));for(let lt=0;lt<6;lt++)if(Ke){Fe?t.texSubImage2D(34069+lt,0,0,0,Qe[lt].width,Qe[lt].height,te,me,Qe[lt].data):t.texImage2D(34069+lt,0,Re,Qe[lt].width,Qe[lt].height,0,te,me,Qe[lt].data);for(let Gt=0;Gt<Pt.length;Gt++){const Wt=Pt[Gt].image[lt].image;Fe?t.texSubImage2D(34069+lt,Gt+1,0,0,Wt.width,Wt.height,te,me,Wt.data):t.texImage2D(34069+lt,Gt+1,Re,Wt.width,Wt.height,0,te,me,Wt.data)}}else{Fe?t.texSubImage2D(34069+lt,0,0,0,te,me,Qe[lt]):t.texImage2D(34069+lt,0,Re,te,me,Qe[lt]);for(let Gt=0;Gt<Pt.length;Gt++){const Wt=Pt[Gt];Fe?t.texSubImage2D(34069+lt,Gt+1,0,0,te,me,Wt.image[lt]):t.texImage2D(34069+lt,Gt+1,Re,te,me,Wt.image[lt])}}}H(re,Q)&&V(34067),yt.__currentVersion=yt.version,re.onUpdate&&re.onUpdate(re)}Ee.__version=re.version}function at(Ee,re,Be,mt,yt){const wt=o.convert(Be.format,Be.encoding),Ke=o.convert(Be.type),Qe=z(Be.internalFormat,wt,Ke,Be.encoding);r.get(re).__hasExternalTextures||(yt===32879||yt===35866?t.texImage3D(yt,0,Qe,re.width,re.height,re.depth,0,wt,Ke,null):t.texImage2D(yt,0,Qe,re.width,re.height,0,wt,Ke,null)),t.bindFramebuffer(36160,Ee),Mt(re)?b.framebufferTexture2DMultisampleEXT(36160,mt,yt,r.get(Be).__webglTexture,0,vt(re)):n.framebufferTexture2D(36160,mt,yt,r.get(Be).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ge(Ee,re,Be){if(n.bindRenderbuffer(36161,Ee),re.depthBuffer&&!re.stencilBuffer){let mt=33189;if(Be||Mt(re)){const yt=re.depthTexture;yt&&yt.isDepthTexture&&(yt.type===ov?mt=36012:yt.type===g_&&(mt=33190));const wt=vt(re);Mt(re)?b.renderbufferStorageMultisampleEXT(36161,wt,mt,re.width,re.height):n.renderbufferStorageMultisample(36161,wt,mt,re.width,re.height)}else n.renderbufferStorage(36161,mt,re.width,re.height);n.framebufferRenderbuffer(36160,36096,36161,Ee)}else if(re.depthBuffer&&re.stencilBuffer){const mt=vt(re);Be&&Mt(re)===!1?n.renderbufferStorageMultisample(36161,mt,35056,re.width,re.height):Mt(re)?b.renderbufferStorageMultisampleEXT(36161,mt,35056,re.width,re.height):n.renderbufferStorage(36161,34041,re.width,re.height),n.framebufferRenderbuffer(36160,33306,36161,Ee)}else{const mt=re.isWebGLMultipleRenderTargets===!0?re.texture:[re.texture];for(let yt=0;yt<mt.length;yt++){const wt=mt[yt],Ke=o.convert(wt.format,wt.encoding),Qe=o.convert(wt.type),Le=z(wt.internalFormat,Ke,Qe,wt.encoding),Q=vt(re);Be&&Mt(re)===!1?n.renderbufferStorageMultisample(36161,Q,Le,re.width,re.height):Mt(re)?b.renderbufferStorageMultisampleEXT(36161,Q,Le,re.width,re.height):n.renderbufferStorage(36161,Le,re.width,re.height)}}n.bindRenderbuffer(36161,null)}function Ie(Ee,re){if(re&&re.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,Ee),!(re.depthTexture&&re.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(re.depthTexture).__webglTexture||re.depthTexture.image.width!==re.width||re.depthTexture.image.height!==re.height)&&(re.depthTexture.image.width=re.width,re.depthTexture.image.height=re.height,re.depthTexture.needsUpdate=!0),se(re.depthTexture,0);const Be=r.get(re.depthTexture).__webglTexture,mt=vt(re);if(re.depthTexture.format===Hy)Mt(re)?b.framebufferTexture2DMultisampleEXT(36160,36096,3553,Be,0,mt):n.framebufferTexture2D(36160,36096,3553,Be,0);else if(re.depthTexture.format===Yy)Mt(re)?b.framebufferTexture2DMultisampleEXT(36160,33306,3553,Be,0,mt):n.framebufferTexture2D(36160,33306,3553,Be,0);else throw new Error("Unknown depthTexture format")}function He(Ee){const re=r.get(Ee),Be=Ee.isWebGLCubeRenderTarget===!0;if(Ee.depthTexture&&!re.__autoAllocateDepthBuffer){if(Be)throw new Error("target.depthTexture not supported in Cube render targets");Ie(re.__webglFramebuffer,Ee)}else if(Be){re.__webglDepthbuffer=[];for(let mt=0;mt<6;mt++)t.bindFramebuffer(36160,re.__webglFramebuffer[mt]),re.__webglDepthbuffer[mt]=n.createRenderbuffer(),Ge(re.__webglDepthbuffer[mt],Ee,!1)}else t.bindFramebuffer(36160,re.__webglFramebuffer),re.__webglDepthbuffer=n.createRenderbuffer(),Ge(re.__webglDepthbuffer,Ee,!1);t.bindFramebuffer(36160,null)}function it(Ee,re,Be){const mt=r.get(Ee);re!==void 0&&at(mt.__webglFramebuffer,Ee,Ee.texture,36064,3553),Be!==void 0&&He(Ee)}function st(Ee){const re=Ee.texture,Be=r.get(Ee),mt=r.get(re);Ee.addEventListener("dispose",q),Ee.isWebGLMultipleRenderTargets!==!0&&(mt.__webglTexture===void 0&&(mt.__webglTexture=n.createTexture()),mt.__version=re.version,l.memory.textures++);const yt=Ee.isWebGLCubeRenderTarget===!0,wt=Ee.isWebGLMultipleRenderTargets===!0,Ke=D(Ee)||u;if(yt){Be.__webglFramebuffer=[];for(let Qe=0;Qe<6;Qe++)Be.__webglFramebuffer[Qe]=n.createFramebuffer()}else{if(Be.__webglFramebuffer=n.createFramebuffer(),wt)if(s.drawBuffers){const Qe=Ee.texture;for(let Le=0,Q=Qe.length;Le<Q;Le++){const te=r.get(Qe[Le]);te.__webglTexture===void 0&&(te.__webglTexture=n.createTexture(),l.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&Ee.samples>0&&Mt(Ee)===!1){const Qe=wt?re:[re];Be.__webglMultisampledFramebuffer=n.createFramebuffer(),Be.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,Be.__webglMultisampledFramebuffer);for(let Le=0;Le<Qe.length;Le++){const Q=Qe[Le];Be.__webglColorRenderbuffer[Le]=n.createRenderbuffer(),n.bindRenderbuffer(36161,Be.__webglColorRenderbuffer[Le]);const te=o.convert(Q.format,Q.encoding),me=o.convert(Q.type),Re=z(Q.internalFormat,te,me,Q.encoding),Fe=vt(Ee);n.renderbufferStorageMultisample(36161,Fe,Re,Ee.width,Ee.height),n.framebufferRenderbuffer(36160,36064+Le,36161,Be.__webglColorRenderbuffer[Le])}n.bindRenderbuffer(36161,null),Ee.depthBuffer&&(Be.__webglDepthRenderbuffer=n.createRenderbuffer(),Ge(Be.__webglDepthRenderbuffer,Ee,!0)),t.bindFramebuffer(36160,null)}}if(yt){t.bindTexture(34067,mt.__webglTexture),we(34067,re,Ke);for(let Qe=0;Qe<6;Qe++)at(Be.__webglFramebuffer[Qe],Ee,re,36064,34069+Qe);H(re,Ke)&&V(34067),t.unbindTexture()}else if(wt){const Qe=Ee.texture;for(let Le=0,Q=Qe.length;Le<Q;Le++){const te=Qe[Le],me=r.get(te);t.bindTexture(3553,me.__webglTexture),we(3553,te,Ke),at(Be.__webglFramebuffer,Ee,te,36064+Le,3553),H(te,Ke)&&V(3553)}t.unbindTexture()}else{let Qe=3553;(Ee.isWebGL3DRenderTarget||Ee.isWebGLArrayRenderTarget)&&(u?Qe=Ee.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Qe,mt.__webglTexture),we(Qe,re,Ke),at(Be.__webglFramebuffer,Ee,re,36064,Qe),H(re,Ke)&&V(Qe),t.unbindTexture()}Ee.depthBuffer&&He(Ee)}function It(Ee){const re=D(Ee)||u,Be=Ee.isWebGLMultipleRenderTargets===!0?Ee.texture:[Ee.texture];for(let mt=0,yt=Be.length;mt<yt;mt++){const wt=Be[mt];if(H(wt,re)){const Ke=Ee.isWebGLCubeRenderTarget?34067:3553,Qe=r.get(wt).__webglTexture;t.bindTexture(Ke,Qe),V(Ke),t.unbindTexture()}}}function kt(Ee){if(u&&Ee.samples>0&&Mt(Ee)===!1){const re=Ee.isWebGLMultipleRenderTargets?Ee.texture:[Ee.texture],Be=Ee.width,mt=Ee.height;let yt=16384;const wt=[],Ke=Ee.stencilBuffer?33306:36096,Qe=r.get(Ee),Le=Ee.isWebGLMultipleRenderTargets===!0;if(Le)for(let Q=0;Q<re.length;Q++)t.bindFramebuffer(36160,Qe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Q,36161,null),t.bindFramebuffer(36160,Qe.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Q,3553,null,0);t.bindFramebuffer(36008,Qe.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Qe.__webglFramebuffer);for(let Q=0;Q<re.length;Q++){wt.push(36064+Q),Ee.depthBuffer&&wt.push(Ke);const te=Qe.__ignoreDepthValues!==void 0?Qe.__ignoreDepthValues:!1;if(te===!1&&(Ee.depthBuffer&&(yt|=256),Ee.stencilBuffer&&(yt|=1024)),Le&&n.framebufferRenderbuffer(36008,36064,36161,Qe.__webglColorRenderbuffer[Q]),te===!0&&(n.invalidateFramebuffer(36008,[Ke]),n.invalidateFramebuffer(36009,[Ke])),Le){const me=r.get(re[Q]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,me,0)}n.blitFramebuffer(0,0,Be,mt,0,0,Be,mt,yt,9728),S&&n.invalidateFramebuffer(36008,wt)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Le)for(let Q=0;Q<re.length;Q++){t.bindFramebuffer(36160,Qe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Q,36161,Qe.__webglColorRenderbuffer[Q]);const te=r.get(re[Q]).__webglTexture;t.bindFramebuffer(36160,Qe.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Q,3553,te,0)}t.bindFramebuffer(36009,Qe.__webglMultisampledFramebuffer)}}function vt(Ee){return Math.min(y,Ee.samples)}function Mt(Ee){const re=r.get(Ee);return u&&Ee.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&re.__useRenderToTexture!==!1}function Ct(Ee){const re=l.render.frame;C.get(Ee)!==re&&(C.set(Ee,re),Ee.update())}function gt(Ee,re){const Be=Ee.encoding,mt=Ee.format,yt=Ee.type;return Ee.isCompressedTexture===!0||Ee.isVideoTexture===!0||Ee.format===CR||Be!==Mg&&(Be===ms?u===!1?e.has("EXT_sRGB")===!0&&mt===Xp?(Ee.format=CR,Ee.minFilter=El,Ee.generateMipmaps=!1):re=l4.sRGBToLinear(re):(mt!==Xp||yt!==af)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Be)),re}this.allocateTextureUnit=K,this.resetTextureUnits=$e,this.setTexture2D=se,this.setTexture2DArray=fe,this.setTexture3D=Se,this.setTextureCube=Ue,this.rebindTextures=it,this.setupRenderTarget=st,this.updateRenderTargetMipmap=It,this.updateMultisampleRenderTarget=kt,this.setupDepthRenderbuffer=He,this.setupFrameBufferTexture=at,this.useMultisampledRTT=Mt}function jQ(n,e,t){const r=t.isWebGL2;function s(o,l=null){let u;if(o===af)return 5121;if(o===vQ)return 32819;if(o===_Q)return 32820;if(o===pQ)return 5120;if(o===mQ)return 5122;if(o===s4)return 5123;if(o===gQ)return 5124;if(o===g_)return 5125;if(o===ov)return 5126;if(o===tT)return r?5131:(u=e.get("OES_texture_half_float"),u!==null?u.HALF_FLOAT_OES:null);if(o===yQ)return 6406;if(o===Xp)return 6408;if(o===TQ)return 6409;if(o===SQ)return 6410;if(o===Hy)return 6402;if(o===Yy)return 34041;if(o===wQ)return 6403;if(o===bQ)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(o===CR)return u=e.get("EXT_sRGB"),u!==null?u.SRGB_ALPHA_EXT:null;if(o===EQ)return 36244;if(o===xQ)return 33319;if(o===$Q)return 33320;if(o===CQ)return 36249;if(o===SI||o===wI||o===EI||o===xI)if(l===ms)if(u=e.get("WEBGL_compressed_texture_s3tc_srgb"),u!==null){if(o===SI)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===wI)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===EI)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===xI)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(u=e.get("WEBGL_compressed_texture_s3tc"),u!==null){if(o===SI)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===wI)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===EI)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===xI)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===mP||o===gP||o===vP||o===_P)if(u=e.get("WEBGL_compressed_texture_pvrtc"),u!==null){if(o===mP)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===gP)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===vP)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===_P)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===MQ)return u=e.get("WEBGL_compressed_texture_etc1"),u!==null?u.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===yP||o===bP)if(u=e.get("WEBGL_compressed_texture_etc"),u!==null){if(o===yP)return l===ms?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(o===bP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===TP||o===SP||o===wP||o===EP||o===xP||o===$P||o===CP||o===MP||o===AP||o===IP||o===RP||o===kP||o===OP||o===LP)if(u=e.get("WEBGL_compressed_texture_astc"),u!==null){if(o===TP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===SP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===wP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===EP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===xP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===$P)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===CP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===MP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===AP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===IP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===RP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===kP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===OP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===LP)return l===ms?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===NP)if(u=e.get("EXT_texture_compression_bptc"),u!==null){if(o===NP)return l===ms?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return o===Uy?r?34042:(u=e.get("WEBGL_depth_texture"),u!==null?u.UNSIGNED_INT_24_8_WEBGL:null):n[o]!==void 0?n[o]:null}return{convert:s}}class YQ extends el{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class iw extends oo{constructor(){super(),this.isGroup=!0,this.type="Group"}}const dCe={type:"move"};class XL{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new iw,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new iw,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Me,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Me),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new iw,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Me,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Me),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let s=null,o=null,l=null;const u=this._targetRay,h=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){l=!0;for(const M of e.hand.values()){const A=t.getJointPose(M,r);if(f.joints[M.jointName]===void 0){const O=new iw;O.matrixAutoUpdate=!1,O.visible=!1,f.joints[M.jointName]=O,f.add(O)}const k=f.joints[M.jointName];A!==null&&(k.matrix.fromArray(A.transform.matrix),k.matrix.decompose(k.position,k.rotation,k.scale),k.jointRadius=A.radius),k.visible=A!==null}const g=f.joints["index-finger-tip"],y=f.joints["thumb-tip"],b=g.position.distanceTo(y.position),S=.02,C=.005;f.inputState.pinching&&b>S+C?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&b<=S-C&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,r),o!==null&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1));u!==null&&(s=t.getPose(e.targetRaySpace,r),s===null&&o!==null&&(s=o),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(dCe)))}return u!==null&&(u.visible=s!==null),h!==null&&(h.visible=o!==null),f!==null&&(f.visible=l!==null),this}}class d4 extends dc{constructor(e,t,r,s,o,l,u,h,f,g){if(g=g!==void 0?g:Hy,g!==Hy&&g!==Yy)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&g===Hy&&(r=g_),r===void 0&&g===Yy&&(r=Uy),super(null,s,o,l,u,h,g,r,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:Vl,this.minFilter=h!==void 0?h:Vl,this.flipY=!1,this.generateMipmaps=!1}}class fCe extends Ym{constructor(e,t){super();const r=this;let s=null,o=1,l=null,u="local-floor",h=null,f=null,g=null,y=null,b=null,S=null;const C=t.getContextAttributes();let M=null,A=null;const k=[],O=[],P=new el;P.layers.enable(1),P.viewport=new Ts;const D=new el;D.layers.enable(2),D.viewport=new Ts;const U=[P,D],H=new YQ;H.layers.enable(1),H.layers.enable(2);let V=null,z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let se=k[ie];return se===void 0&&(se=new XL,k[ie]=se),se.getTargetRaySpace()},this.getControllerGrip=function(ie){let se=k[ie];return se===void 0&&(se=new XL,k[ie]=se),se.getGripSpace()},this.getHand=function(ie){let se=k[ie];return se===void 0&&(se=new XL,k[ie]=se),se.getHandSpace()};function Z(ie){const se=O.indexOf(ie.inputSource);if(se===-1)return;const fe=k[se];fe!==void 0&&fe.dispatchEvent({type:ie.type,data:ie.inputSource})}function oe(){s.removeEventListener("select",Z),s.removeEventListener("selectstart",Z),s.removeEventListener("selectend",Z),s.removeEventListener("squeeze",Z),s.removeEventListener("squeezestart",Z),s.removeEventListener("squeezeend",Z),s.removeEventListener("end",oe),s.removeEventListener("inputsourceschange",ue);for(let ie=0;ie<k.length;ie++){const se=O[ie];se!==null&&(O[ie]=null,k[ie].disconnect(se))}V=null,z=null,e.setRenderTarget(M),b=null,y=null,g=null,s=null,A=null,K.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ie){o=ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ie){u=ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||l},this.setReferenceSpace=function(ie){h=ie},this.getBaseLayer=function(){return y!==null?y:b},this.getBinding=function(){return g},this.getFrame=function(){return S},this.getSession=function(){return s},this.setSession=async function(ie){if(s=ie,s!==null){if(M=e.getRenderTarget(),s.addEventListener("select",Z),s.addEventListener("selectstart",Z),s.addEventListener("selectend",Z),s.addEventListener("squeeze",Z),s.addEventListener("squeezestart",Z),s.addEventListener("squeezeend",Z),s.addEventListener("end",oe),s.addEventListener("inputsourceschange",ue),C.xrCompatible!==!0&&await t.makeXRCompatible(),s.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const se={antialias:s.renderState.layers===void 0?C.antialias:!0,alpha:C.alpha,depth:C.depth,stencil:C.stencil,framebufferScaleFactor:o};b=new XRWebGLLayer(s,t,se),s.updateRenderState({baseLayer:b}),A=new Dc(b.framebufferWidth,b.framebufferHeight,{format:Xp,type:af,encoding:e.outputEncoding})}else{let se=null,fe=null,Se=null;C.depth&&(Se=C.stencil?35056:33190,se=C.stencil?Yy:Hy,fe=C.stencil?Uy:g_);const Ue={colorFormat:32856,depthFormat:Se,scaleFactor:o};g=new XRWebGLBinding(s,t),y=g.createProjectionLayer(Ue),s.updateRenderState({layers:[y]}),A=new Dc(y.textureWidth,y.textureHeight,{format:Xp,type:af,depthTexture:new d4(y.textureWidth,y.textureHeight,fe,void 0,void 0,void 0,void 0,void 0,void 0,se),stencilBuffer:C.stencil,encoding:e.outputEncoding,samples:C.antialias?4:0});const ke=e.properties.get(A);ke.__ignoreDepthValues=y.ignoreDepthValues}A.isXRRenderTarget=!0,this.setFoveation(1),h=null,l=await s.requestReferenceSpace(u),K.setContext(s),K.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function ue(ie){for(let se=0;se<ie.removed.length;se++){const fe=ie.removed[se],Se=O.indexOf(fe);Se>=0&&(O[Se]=null,k[Se].dispatchEvent({type:"disconnected",data:fe}))}for(let se=0;se<ie.added.length;se++){const fe=ie.added[se];let Se=O.indexOf(fe);if(Se===-1){for(let ke=0;ke<k.length;ke++)if(ke>=O.length){O.push(fe),Se=ke;break}else if(O[ke]===null){O[ke]=fe,Se=ke;break}if(Se===-1)break}const Ue=k[Se];Ue&&Ue.dispatchEvent({type:"connected",data:fe})}}const q=new Me,ae=new Me;function le(ie,se,fe){q.setFromMatrixPosition(se.matrixWorld),ae.setFromMatrixPosition(fe.matrixWorld);const Se=q.distanceTo(ae),Ue=se.projectionMatrix.elements,ke=fe.projectionMatrix.elements,qe=Ue[14]/(Ue[10]-1),we=Ue[14]/(Ue[10]+1),Ze=(Ue[9]+1)/Ue[5],et=(Ue[9]-1)/Ue[5],ft=(Ue[8]-1)/Ue[0],at=(ke[8]+1)/ke[0],Ge=qe*ft,Ie=qe*at,He=Se/(-ft+at),it=He*-ft;se.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(it),ie.translateZ(He),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert();const st=qe+He,It=we+He,kt=Ge-it,vt=Ie+(Se-it),Mt=Ze*we/It*st,Ct=et*we/It*st;ie.projectionMatrix.makePerspective(kt,vt,Mt,Ct,st,It)}function ce(ie,se){se===null?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(se.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(s===null)return;H.near=D.near=P.near=ie.near,H.far=D.far=P.far=ie.far,(V!==H.near||z!==H.far)&&(s.updateRenderState({depthNear:H.near,depthFar:H.far}),V=H.near,z=H.far);const se=ie.parent,fe=H.cameras;ce(H,se);for(let Ue=0;Ue<fe.length;Ue++)ce(fe[Ue],se);H.matrixWorld.decompose(H.position,H.quaternion,H.scale),ie.position.copy(H.position),ie.quaternion.copy(H.quaternion),ie.scale.copy(H.scale),ie.matrix.copy(H.matrix),ie.matrixWorld.copy(H.matrixWorld);const Se=ie.children;for(let Ue=0,ke=Se.length;Ue<ke;Ue++)Se[Ue].updateMatrixWorld(!0);fe.length===2?le(H,P,D):H.projectionMatrix.copy(P.projectionMatrix)},this.getCamera=function(){return H},this.getFoveation=function(){if(y!==null)return y.fixedFoveation;if(b!==null)return b.fixedFoveation},this.setFoveation=function(ie){y!==null&&(y.fixedFoveation=ie),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=ie)};let ge=null;function $e(ie,se){if(f=se.getViewerPose(h||l),S=se,f!==null){const fe=f.views;b!==null&&(e.setRenderTargetFramebuffer(A,b.framebuffer),e.setRenderTarget(A));let Se=!1;fe.length!==H.cameras.length&&(H.cameras.length=0,Se=!0);for(let Ue=0;Ue<fe.length;Ue++){const ke=fe[Ue];let qe=null;if(b!==null)qe=b.getViewport(ke);else{const Ze=g.getViewSubImage(y,ke);qe=Ze.viewport,Ue===0&&(e.setRenderTargetTextures(A,Ze.colorTexture,y.ignoreDepthValues?void 0:Ze.depthStencilTexture),e.setRenderTarget(A))}let we=U[Ue];we===void 0&&(we=new el,we.layers.enable(Ue),we.viewport=new Ts,U[Ue]=we),we.matrix.fromArray(ke.transform.matrix),we.projectionMatrix.fromArray(ke.projectionMatrix),we.viewport.set(qe.x,qe.y,qe.width,qe.height),Ue===0&&H.matrix.copy(we.matrix),Se===!0&&H.cameras.push(we)}}for(let fe=0;fe<k.length;fe++){const Se=O[fe],Ue=k[fe];Se!==null&&Ue!==void 0&&Ue.update(Se,se,h||l)}ge&&ge(ie,se),S=null}const K=new zQ;K.setAnimationLoop($e),this.setAnimationLoop=function(ie){ge=ie},this.dispose=function(){}}}function pCe(n,e){function t(M,A){M.fogColor.value.copy(A.color),A.isFog?(M.fogNear.value=A.near,M.fogFar.value=A.far):A.isFogExp2&&(M.fogDensity.value=A.density)}function r(M,A,k,O,P){A.isMeshBasicMaterial||A.isMeshLambertMaterial?s(M,A):A.isMeshToonMaterial?(s(M,A),g(M,A)):A.isMeshPhongMaterial?(s(M,A),f(M,A)):A.isMeshStandardMaterial?(s(M,A),y(M,A),A.isMeshPhysicalMaterial&&b(M,A,P)):A.isMeshMatcapMaterial?(s(M,A),S(M,A)):A.isMeshDepthMaterial?s(M,A):A.isMeshDistanceMaterial?(s(M,A),C(M,A)):A.isMeshNormalMaterial?s(M,A):A.isLineBasicMaterial?(o(M,A),A.isLineDashedMaterial&&l(M,A)):A.isPointsMaterial?u(M,A,k,O):A.isSpriteMaterial?h(M,A):A.isShadowMaterial?(M.color.value.copy(A.color),M.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function s(M,A){M.opacity.value=A.opacity,A.color&&M.diffuse.value.copy(A.color),A.emissive&&M.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(M.map.value=A.map),A.alphaMap&&(M.alphaMap.value=A.alphaMap),A.bumpMap&&(M.bumpMap.value=A.bumpMap,M.bumpScale.value=A.bumpScale,A.side===cd&&(M.bumpScale.value*=-1)),A.displacementMap&&(M.displacementMap.value=A.displacementMap,M.displacementScale.value=A.displacementScale,M.displacementBias.value=A.displacementBias),A.emissiveMap&&(M.emissiveMap.value=A.emissiveMap),A.normalMap&&(M.normalMap.value=A.normalMap,M.normalScale.value.copy(A.normalScale),A.side===cd&&M.normalScale.value.negate()),A.specularMap&&(M.specularMap.value=A.specularMap),A.alphaTest>0&&(M.alphaTest.value=A.alphaTest);const k=e.get(A).envMap;if(k&&(M.envMap.value=k,M.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=A.reflectivity,M.ior.value=A.ior,M.refractionRatio.value=A.refractionRatio),A.lightMap){M.lightMap.value=A.lightMap;const D=n.physicallyCorrectLights!==!0?Math.PI:1;M.lightMapIntensity.value=A.lightMapIntensity*D}A.aoMap&&(M.aoMap.value=A.aoMap,M.aoMapIntensity.value=A.aoMapIntensity);let O;A.map?O=A.map:A.specularMap?O=A.specularMap:A.displacementMap?O=A.displacementMap:A.normalMap?O=A.normalMap:A.bumpMap?O=A.bumpMap:A.roughnessMap?O=A.roughnessMap:A.metalnessMap?O=A.metalnessMap:A.alphaMap?O=A.alphaMap:A.emissiveMap?O=A.emissiveMap:A.clearcoatMap?O=A.clearcoatMap:A.clearcoatNormalMap?O=A.clearcoatNormalMap:A.clearcoatRoughnessMap?O=A.clearcoatRoughnessMap:A.iridescenceMap?O=A.iridescenceMap:A.iridescenceThicknessMap?O=A.iridescenceThicknessMap:A.specularIntensityMap?O=A.specularIntensityMap:A.specularColorMap?O=A.specularColorMap:A.transmissionMap?O=A.transmissionMap:A.thicknessMap?O=A.thicknessMap:A.sheenColorMap?O=A.sheenColorMap:A.sheenRoughnessMap&&(O=A.sheenRoughnessMap),O!==void 0&&(O.isWebGLRenderTarget&&(O=O.texture),O.matrixAutoUpdate===!0&&O.updateMatrix(),M.uvTransform.value.copy(O.matrix));let P;A.aoMap?P=A.aoMap:A.lightMap&&(P=A.lightMap),P!==void 0&&(P.isWebGLRenderTarget&&(P=P.texture),P.matrixAutoUpdate===!0&&P.updateMatrix(),M.uv2Transform.value.copy(P.matrix))}function o(M,A){M.diffuse.value.copy(A.color),M.opacity.value=A.opacity}function l(M,A){M.dashSize.value=A.dashSize,M.totalSize.value=A.dashSize+A.gapSize,M.scale.value=A.scale}function u(M,A,k,O){M.diffuse.value.copy(A.color),M.opacity.value=A.opacity,M.size.value=A.size*k,M.scale.value=O*.5,A.map&&(M.map.value=A.map),A.alphaMap&&(M.alphaMap.value=A.alphaMap),A.alphaTest>0&&(M.alphaTest.value=A.alphaTest);let P;A.map?P=A.map:A.alphaMap&&(P=A.alphaMap),P!==void 0&&(P.matrixAutoUpdate===!0&&P.updateMatrix(),M.uvTransform.value.copy(P.matrix))}function h(M,A){M.diffuse.value.copy(A.color),M.opacity.value=A.opacity,M.rotation.value=A.rotation,A.map&&(M.map.value=A.map),A.alphaMap&&(M.alphaMap.value=A.alphaMap),A.alphaTest>0&&(M.alphaTest.value=A.alphaTest);let k;A.map?k=A.map:A.alphaMap&&(k=A.alphaMap),k!==void 0&&(k.matrixAutoUpdate===!0&&k.updateMatrix(),M.uvTransform.value.copy(k.matrix))}function f(M,A){M.specular.value.copy(A.specular),M.shininess.value=Math.max(A.shininess,1e-4)}function g(M,A){A.gradientMap&&(M.gradientMap.value=A.gradientMap)}function y(M,A){M.roughness.value=A.roughness,M.metalness.value=A.metalness,A.roughnessMap&&(M.roughnessMap.value=A.roughnessMap),A.metalnessMap&&(M.metalnessMap.value=A.metalnessMap),e.get(A).envMap&&(M.envMapIntensity.value=A.envMapIntensity)}function b(M,A,k){M.ior.value=A.ior,A.sheen>0&&(M.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),M.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(M.sheenColorMap.value=A.sheenColorMap),A.sheenRoughnessMap&&(M.sheenRoughnessMap.value=A.sheenRoughnessMap)),A.clearcoat>0&&(M.clearcoat.value=A.clearcoat,M.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(M.clearcoatMap.value=A.clearcoatMap),A.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap),A.clearcoatNormalMap&&(M.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),M.clearcoatNormalMap.value=A.clearcoatNormalMap,A.side===cd&&M.clearcoatNormalScale.value.negate())),A.iridescence>0&&(M.iridescence.value=A.iridescence,M.iridescenceIOR.value=A.iridescenceIOR,M.iridescenceThicknessMinimum.value=A.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=A.iridescenceThicknessRange[1],A.iridescenceMap&&(M.iridescenceMap.value=A.iridescenceMap),A.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=A.iridescenceThicknessMap)),A.transmission>0&&(M.transmission.value=A.transmission,M.transmissionSamplerMap.value=k.texture,M.transmissionSamplerSize.value.set(k.width,k.height),A.transmissionMap&&(M.transmissionMap.value=A.transmissionMap),M.thickness.value=A.thickness,A.thicknessMap&&(M.thicknessMap.value=A.thicknessMap),M.attenuationDistance.value=A.attenuationDistance,M.attenuationColor.value.copy(A.attenuationColor)),M.specularIntensity.value=A.specularIntensity,M.specularColor.value.copy(A.specularColor),A.specularIntensityMap&&(M.specularIntensityMap.value=A.specularIntensityMap),A.specularColorMap&&(M.specularColorMap.value=A.specularColorMap)}function S(M,A){A.matcap&&(M.matcap.value=A.matcap)}function C(M,A){M.referencePosition.value.copy(A.referencePosition),M.nearDistance.value=A.nearDistance,M.farDistance.value=A.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function mCe(n,e,t,r){let s={},o={},l=[];const u=t.isWebGL2?n.getParameter(35375):0;function h(O,P){const D=P.program;r.uniformBlockBinding(O,D)}function f(O,P){let D=s[O.id];D===void 0&&(C(O),D=g(O),s[O.id]=D,O.addEventListener("dispose",A));const U=P.program;r.updateUBOMapping(O,U);const H=e.render.frame;o[O.id]!==H&&(b(O),o[O.id]=H)}function g(O){const P=y();O.__bindingPointIndex=P;const D=n.createBuffer(),U=O.__size,H=O.usage;return n.bindBuffer(35345,D),n.bufferData(35345,U,H),n.bindBuffer(35345,null),n.bindBufferBase(35345,P,D),D}function y(){for(let O=0;O<u;O++)if(l.indexOf(O)===-1)return l.push(O),O;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function b(O){const P=s[O.id],D=O.uniforms,U=O.__cache;n.bindBuffer(35345,P);for(let H=0,V=D.length;H<V;H++){const z=D[H];if(S(z,H,U)===!0){const Z=z.value,oe=z.__offset;typeof Z=="number"?(z.__data[0]=Z,n.bufferSubData(35345,oe,z.__data)):(z.value.isMatrix3?(z.__data[0]=z.value.elements[0],z.__data[1]=z.value.elements[1],z.__data[2]=z.value.elements[2],z.__data[3]=z.value.elements[0],z.__data[4]=z.value.elements[3],z.__data[5]=z.value.elements[4],z.__data[6]=z.value.elements[5],z.__data[7]=z.value.elements[0],z.__data[8]=z.value.elements[6],z.__data[9]=z.value.elements[7],z.__data[10]=z.value.elements[8],z.__data[11]=z.value.elements[0]):Z.toArray(z.__data),n.bufferSubData(35345,oe,z.__data))}}n.bindBuffer(35345,null)}function S(O,P,D){const U=O.value;if(D[P]===void 0)return typeof U=="number"?D[P]=U:D[P]=U.clone(),!0;if(typeof U=="number"){if(D[P]!==U)return D[P]=U,!0}else{const H=D[P];if(H.equals(U)===!1)return H.copy(U),!0}return!1}function C(O){const P=O.uniforms;let D=0;const U=16;let H=0;for(let V=0,z=P.length;V<z;V++){const Z=P[V],oe=M(Z);if(Z.__data=new Float32Array(oe.storage/Float32Array.BYTES_PER_ELEMENT),Z.__offset=D,V>0){H=D%U;const ue=U-H;H!==0&&ue-oe.boundary<0&&(D+=U-H,Z.__offset=D)}D+=oe.storage}return H=D%U,H>0&&(D+=U-H),O.__size=D,O.__cache={},this}function M(O){const P=O.value,D={boundary:0,storage:0};return typeof P=="number"?(D.boundary=4,D.storage=4):P.isVector2?(D.boundary=8,D.storage=8):P.isVector3||P.isColor?(D.boundary=16,D.storage=12):P.isVector4?(D.boundary=16,D.storage=16):P.isMatrix3?(D.boundary=48,D.storage=48):P.isMatrix4?(D.boundary=64,D.storage=64):P.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",P),D}function A(O){const P=O.target;P.removeEventListener("dispose",A);const D=l.indexOf(P.__bindingPointIndex);l.splice(D,1),n.deleteBuffer(s[P.id]),delete s[P.id],delete o[P.id]}function k(){for(const O in s)n.deleteBuffer(s[O]);l=[],s={},o={}}return{bind:h,update:f,dispose:k}}function gCe(){const n=V$("canvas");return n.style.display="block",n}function f4(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:gCe(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,s=n.stencil!==void 0?n.stencil:!0,o=n.antialias!==void 0?n.antialias:!1,l=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,u=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,h=n.powerPreference!==void 0?n.powerPreference:"default",f=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let g;t!==null?g=t.getContextAttributes().alpha:g=n.alpha!==void 0?n.alpha:!1;let y=null,b=null;const S=[],C=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Mg,this.physicallyCorrectLights=!1,this.toneMapping=c0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const M=this;let A=!1,k=0,O=0,P=null,D=-1,U=null;const H=new Ts,V=new Ts;let z=null,Z=e.width,oe=e.height,ue=1,q=null,ae=null;const le=new Ts(0,0,Z,oe),ce=new Ts(0,0,Z,oe);let ge=!1;const $e=new f2;let K=!1,ie=!1,se=null;const fe=new ei,Se=new Kt,Ue=new Me,ke={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function qe(){return P===null?ue:1}let we=t;function Ze(De,_t){for(let Ot=0;Ot<De.length;Ot++){const St=De[Ot],Xt=e.getContext(St,_t);if(Xt!==null)return Xt}return null}try{const De={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${mE}`),e.addEventListener("webglcontextlost",Re,!1),e.addEventListener("webglcontextrestored",Fe,!1),e.addEventListener("webglcontextcreationerror",bt,!1),we===null){const _t=["webgl2","webgl","experimental-webgl"];if(M.isWebGL1Renderer===!0&&_t.shift(),we=Ze(_t,De),we===null)throw Ze(_t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}we.getShaderPrecisionFormat===void 0&&(we.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(De){throw console.error("THREE.WebGLRenderer: "+De.message),De}let et,ft,at,Ge,Ie,He,it,st,It,kt,vt,Mt,Ct,gt,Ee,re,Be,mt,yt,wt,Ke,Qe,Le,Q;function te(){et=new Rxe(we),ft=new xxe(we,et,n),et.init(ft),Qe=new jQ(we,et,ft),at=new cCe(we,et,ft),Ge=new Lxe,Ie=new Q$e,He=new hCe(we,et,at,Ie,ft,Qe,Ge),it=new Cxe(M),st=new Ixe(M),It=new jSe(we,ft),Le=new wxe(we,et,It,ft),kt=new kxe(we,It,Ge,Le),vt=new Bxe(we,kt,It,Ge),yt=new Pxe(we,ft,He),re=new $xe(Ie),Mt=new q$e(M,it,st,et,ft,Le,re),Ct=new pCe(M,Ie),gt=new eCe,Ee=new oCe(et,ft),mt=new Sxe(M,it,at,vt,g,l),Be=new uCe(M,vt,ft),Q=new mCe(we,Ge,ft,at),wt=new Exe(we,et,Ge,ft),Ke=new Oxe(we,et,Ge,ft),Ge.programs=Mt.programs,M.capabilities=ft,M.extensions=et,M.properties=Ie,M.renderLists=gt,M.shadowMap=Be,M.state=at,M.info=Ge}te();const me=new fCe(M,we);this.xr=me,this.getContext=function(){return we},this.getContextAttributes=function(){return we.getContextAttributes()},this.forceContextLoss=function(){const De=et.get("WEBGL_lose_context");De&&De.loseContext()},this.forceContextRestore=function(){const De=et.get("WEBGL_lose_context");De&&De.restoreContext()},this.getPixelRatio=function(){return ue},this.setPixelRatio=function(De){De!==void 0&&(ue=De,this.setSize(Z,oe,!1))},this.getSize=function(De){return De.set(Z,oe)},this.setSize=function(De,_t,Ot){if(me.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Z=De,oe=_t,e.width=Math.floor(De*ue),e.height=Math.floor(_t*ue),Ot!==!1&&(e.style.width=De+"px",e.style.height=_t+"px"),this.setViewport(0,0,De,_t)},this.getDrawingBufferSize=function(De){return De.set(Z*ue,oe*ue).floor()},this.setDrawingBufferSize=function(De,_t,Ot){Z=De,oe=_t,ue=Ot,e.width=Math.floor(De*Ot),e.height=Math.floor(_t*Ot),this.setViewport(0,0,De,_t)},this.getCurrentViewport=function(De){return De.copy(H)},this.getViewport=function(De){return De.copy(le)},this.setViewport=function(De,_t,Ot,St){De.isVector4?le.set(De.x,De.y,De.z,De.w):le.set(De,_t,Ot,St),at.viewport(H.copy(le).multiplyScalar(ue).floor())},this.getScissor=function(De){return De.copy(ce)},this.setScissor=function(De,_t,Ot,St){De.isVector4?ce.set(De.x,De.y,De.z,De.w):ce.set(De,_t,Ot,St),at.scissor(V.copy(ce).multiplyScalar(ue).floor())},this.getScissorTest=function(){return ge},this.setScissorTest=function(De){at.setScissorTest(ge=De)},this.setOpaqueSort=function(De){q=De},this.setTransparentSort=function(De){ae=De},this.getClearColor=function(De){return De.copy(mt.getClearColor())},this.setClearColor=function(){mt.setClearColor.apply(mt,arguments)},this.getClearAlpha=function(){return mt.getClearAlpha()},this.setClearAlpha=function(){mt.setClearAlpha.apply(mt,arguments)},this.clear=function(De=!0,_t=!0,Ot=!0){let St=0;De&&(St|=16384),_t&&(St|=256),Ot&&(St|=1024),we.clear(St)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Re,!1),e.removeEventListener("webglcontextrestored",Fe,!1),e.removeEventListener("webglcontextcreationerror",bt,!1),gt.dispose(),Ee.dispose(),Ie.dispose(),it.dispose(),st.dispose(),vt.dispose(),Le.dispose(),Q.dispose(),Mt.dispose(),me.dispose(),me.removeEventListener("sessionstart",bn),me.removeEventListener("sessionend",ar),se&&(se.dispose(),se=null),cr.stop()};function Re(De){De.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function Fe(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const De=Ge.autoReset,_t=Be.enabled,Ot=Be.autoUpdate,St=Be.needsUpdate,Xt=Be.type;te(),Ge.autoReset=De,Be.enabled=_t,Be.autoUpdate=Ot,Be.needsUpdate=St,Be.type=Xt}function bt(De){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",De.statusMessage)}function ze(De){const _t=De.target;_t.removeEventListener("dispose",ze),Pt(_t)}function Pt(De){lt(De),Ie.remove(De)}function lt(De){const _t=Ie.get(De).programs;_t!==void 0&&(_t.forEach(function(Ot){Mt.releaseProgram(Ot)}),De.isShaderMaterial&&Mt.releaseShaderCache(De))}this.renderBufferDirect=function(De,_t,Ot,St,Xt,Wn){_t===null&&(_t=ke);const ir=Xt.isMesh&&Xt.matrixWorld.determinant()<0,br=Ht(De,_t,Ot,St,Xt);at.setMaterial(St,ir);let Or=Ot.index;const Ei=Ot.attributes.position;if(Or===null){if(Ei===void 0||Ei.count===0)return}else if(Or.count===0)return;let Lr=1;St.wireframe===!0&&(Or=kt.getWireframeAttribute(Ot),Lr=2),Le.setup(Xt,St,br,Ot,Or);let Ar,Ss=wt;Or!==null&&(Ar=It.get(Or),Ss=Ke,Ss.setIndex(Ar));const La=Or!==null?Or.count:Ei.count,Mo=Ot.drawRange.start*Lr,Xl=Ot.drawRange.count*Lr,rn=Wn!==null?Wn.start*Lr:0,Dr=Wn!==null?Wn.count*Lr:1/0,tl=Math.max(Mo,rn),Na=Math.min(La,Mo+Xl,rn+Dr)-1,zs=Math.max(0,Na-tl+1);if(zs!==0){if(Xt.isMesh)St.wireframe===!0?(at.setLineWidth(St.wireframeLinewidth*qe()),Ss.setMode(1)):Ss.setMode(4);else if(Xt.isLine){let Us=St.linewidth;Us===void 0&&(Us=1),at.setLineWidth(Us*qe()),Xt.isLineSegments?Ss.setMode(1):Xt.isLineLoop?Ss.setMode(2):Ss.setMode(3)}else Xt.isPoints?Ss.setMode(0):Xt.isSprite&&Ss.setMode(4);if(Xt.isInstancedMesh)Ss.renderInstances(tl,zs,Xt.count);else if(Ot.isInstancedBufferGeometry){const Us=Math.min(Ot.instanceCount,Ot._maxInstanceCount);Ss.renderInstances(tl,zs,Us)}else Ss.render(tl,zs)}},this.compile=function(De,_t){b=Ee.get(De),b.init(),C.push(b),De.traverseVisible(function(Ot){Ot.isLight&&Ot.layers.test(_t.layers)&&(b.pushLight(Ot),Ot.castShadow&&b.pushShadow(Ot))}),b.setupLights(M.physicallyCorrectLights),De.traverse(function(Ot){const St=Ot.material;if(St)if(Array.isArray(St))for(let Xt=0;Xt<St.length;Xt++){const Wn=St[Xt];je(Wn,De,Ot)}else je(St,De,Ot)}),C.pop(),b=null};let Gt=null;function Wt(De){Gt&&Gt(De)}function bn(){cr.stop()}function ar(){cr.start()}const cr=new zQ;cr.setAnimationLoop(Wt),typeof self<"u"&&cr.setContext(self),this.setAnimationLoop=function(De){Gt=De,me.setAnimationLoop(De),De===null?cr.stop():cr.start()},me.addEventListener("sessionstart",bn),me.addEventListener("sessionend",ar),this.render=function(De,_t){if(_t!==void 0&&_t.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;De.autoUpdate===!0&&De.updateMatrixWorld(),_t.parent===null&&_t.updateMatrixWorld(),me.enabled===!0&&me.isPresenting===!0&&(me.cameraAutoUpdate===!0&&me.updateCamera(_t),_t=me.getCamera()),De.isScene===!0&&De.onBeforeRender(M,De,_t,P),b=Ee.get(De,C.length),b.init(),C.push(b),fe.multiplyMatrices(_t.projectionMatrix,_t.matrixWorldInverse),$e.setFromProjectionMatrix(fe),ie=this.localClippingEnabled,K=re.init(this.clippingPlanes,ie,_t),y=gt.get(De,S.length),y.init(),S.push(y),oi(De,_t,0,M.sortObjects),y.finish(),M.sortObjects===!0&&y.sort(q,ae),K===!0&&re.beginShadows();const Ot=b.state.shadowsArray;if(Be.render(Ot,De,_t),K===!0&&re.endShadows(),this.info.autoReset===!0&&this.info.reset(),mt.render(y,De),b.setupLights(M.physicallyCorrectLights),_t.isArrayCamera){const St=_t.cameras;for(let Xt=0,Wn=St.length;Xt<Wn;Xt++){const ir=St[Xt];Mr(y,De,ir,ir.viewport)}}else Mr(y,De,_t);P!==null&&(He.updateMultisampleRenderTarget(P),He.updateRenderTargetMipmap(P)),De.isScene===!0&&De.onAfterRender(M,De,_t),Le.resetDefaultState(),D=-1,U=null,C.pop(),C.length>0?b=C[C.length-1]:b=null,S.pop(),S.length>0?y=S[S.length-1]:y=null};function oi(De,_t,Ot,St){if(De.visible===!1)return;if(De.layers.test(_t.layers)){if(De.isGroup)Ot=De.renderOrder;else if(De.isLOD)De.autoUpdate===!0&&De.update(_t);else if(De.isLight)b.pushLight(De),De.castShadow&&b.pushShadow(De);else if(De.isSprite){if(!De.frustumCulled||$e.intersectsSprite(De)){St&&Ue.setFromMatrixPosition(De.matrixWorld).applyMatrix4(fe);const Wn=vt.update(De),ir=De.material;ir.visible&&y.push(De,Wn,ir,Ot,Ue.z,null)}}else if((De.isMesh||De.isLine||De.isPoints)&&(De.isSkinnedMesh&&De.skeleton.frame!==Ge.render.frame&&(De.skeleton.update(),De.skeleton.frame=Ge.render.frame),!De.frustumCulled||$e.intersectsObject(De))){St&&Ue.setFromMatrixPosition(De.matrixWorld).applyMatrix4(fe);const Wn=vt.update(De),ir=De.material;if(Array.isArray(ir)){const br=Wn.groups;for(let Or=0,Ei=br.length;Or<Ei;Or++){const Lr=br[Or],Ar=ir[Lr.materialIndex];Ar&&Ar.visible&&y.push(De,Wn,Ar,Ot,Ue.z,Lr)}}else ir.visible&&y.push(De,Wn,ir,Ot,Ue.z,null)}}const Xt=De.children;for(let Wn=0,ir=Xt.length;Wn<ir;Wn++)oi(Xt[Wn],_t,Ot,St)}function Mr(De,_t,Ot,St){const Xt=De.opaque,Wn=De.transmissive,ir=De.transparent;b.setupLightsView(Ot),Wn.length>0&&_r(Xt,_t,Ot),St&&at.viewport(H.copy(St)),Xt.length>0&&ne(Xt,_t,Ot),Wn.length>0&&ne(Wn,_t,Ot),ir.length>0&&ne(ir,_t,Ot),at.buffers.depth.setTest(!0),at.buffers.depth.setMask(!0),at.buffers.color.setMask(!0),at.setPolygonOffset(!1)}function _r(De,_t,Ot){const St=ft.isWebGL2;se===null&&(se=new Dc(1,1,{generateMipmaps:!0,type:et.has("EXT_color_buffer_half_float")?tT:af,minFilter:dT,samples:St&&o===!0?4:0})),M.getDrawingBufferSize(Se),St?se.setSize(Se.x,Se.y):se.setSize(MR(Se.x),MR(Se.y));const Xt=M.getRenderTarget();M.setRenderTarget(se),M.clear();const Wn=M.toneMapping;M.toneMapping=c0,ne(De,_t,Ot),M.toneMapping=Wn,He.updateMultisampleRenderTarget(se),He.updateRenderTargetMipmap(se),M.setRenderTarget(Xt)}function ne(De,_t,Ot){const St=_t.isScene===!0?_t.overrideMaterial:null;for(let Xt=0,Wn=De.length;Xt<Wn;Xt++){const ir=De[Xt],br=ir.object,Or=ir.geometry,Ei=St===null?ir.material:St,Lr=ir.group;br.layers.test(Ot.layers)&&Te(br,_t,Ot,Or,Ei,Lr)}}function Te(De,_t,Ot,St,Xt,Wn){De.onBeforeRender(M,_t,Ot,St,Xt,Wn),De.modelViewMatrix.multiplyMatrices(Ot.matrixWorldInverse,De.matrixWorld),De.normalMatrix.getNormalMatrix(De.modelViewMatrix),Xt.onBeforeRender(M,_t,Ot,St,De,Wn),Xt.transparent===!0&&Xt.side===up?(Xt.side=cd,Xt.needsUpdate=!0,M.renderBufferDirect(Ot,_t,St,Xt,De,Wn),Xt.side=_v,Xt.needsUpdate=!0,M.renderBufferDirect(Ot,_t,St,Xt,De,Wn),Xt.side=up):M.renderBufferDirect(Ot,_t,St,Xt,De,Wn),De.onAfterRender(M,_t,Ot,St,Xt,Wn)}function je(De,_t,Ot){_t.isScene!==!0&&(_t=ke);const St=Ie.get(De),Xt=b.state.lights,Wn=b.state.shadowsArray,ir=Xt.state.version,br=Mt.getParameters(De,Xt.state,Wn,_t,Ot),Or=Mt.getProgramCacheKey(br);let Ei=St.programs;St.environment=De.isMeshStandardMaterial?_t.environment:null,St.fog=_t.fog,St.envMap=(De.isMeshStandardMaterial?st:it).get(De.envMap||St.environment),Ei===void 0&&(De.addEventListener("dispose",ze),Ei=new Map,St.programs=Ei);let Lr=Ei.get(Or);if(Lr!==void 0){if(St.currentProgram===Lr&&St.lightsStateVersion===ir)return ct(De,br),Lr}else br.uniforms=Mt.getUniforms(De),De.onBuild(Ot,br,M),De.onBeforeCompile(br,M),Lr=Mt.acquireProgram(br,Or),Ei.set(Or,Lr),St.uniforms=br.uniforms;const Ar=St.uniforms;(!De.isShaderMaterial&&!De.isRawShaderMaterial||De.clipping===!0)&&(Ar.clippingPlanes=re.uniform),ct(De,br),St.needsLights=kn(De),St.lightsStateVersion=ir,St.needsLights&&(Ar.ambientLightColor.value=Xt.state.ambient,Ar.lightProbe.value=Xt.state.probe,Ar.directionalLights.value=Xt.state.directional,Ar.directionalLightShadows.value=Xt.state.directionalShadow,Ar.spotLights.value=Xt.state.spot,Ar.spotLightShadows.value=Xt.state.spotShadow,Ar.rectAreaLights.value=Xt.state.rectArea,Ar.ltc_1.value=Xt.state.rectAreaLTC1,Ar.ltc_2.value=Xt.state.rectAreaLTC2,Ar.pointLights.value=Xt.state.point,Ar.pointLightShadows.value=Xt.state.pointShadow,Ar.hemisphereLights.value=Xt.state.hemi,Ar.directionalShadowMap.value=Xt.state.directionalShadowMap,Ar.directionalShadowMatrix.value=Xt.state.directionalShadowMatrix,Ar.spotShadowMap.value=Xt.state.spotShadowMap,Ar.spotShadowMatrix.value=Xt.state.spotShadowMatrix,Ar.pointShadowMap.value=Xt.state.pointShadowMap,Ar.pointShadowMatrix.value=Xt.state.pointShadowMatrix);const Ss=Lr.getUniforms(),La=AI.seqWithValue(Ss.seq,Ar);return St.currentProgram=Lr,St.uniformsList=La,Lr}function ct(De,_t){const Ot=Ie.get(De);Ot.outputEncoding=_t.outputEncoding,Ot.instancing=_t.instancing,Ot.skinning=_t.skinning,Ot.morphTargets=_t.morphTargets,Ot.morphNormals=_t.morphNormals,Ot.morphColors=_t.morphColors,Ot.morphTargetsCount=_t.morphTargetsCount,Ot.numClippingPlanes=_t.numClippingPlanes,Ot.numIntersection=_t.numClipIntersection,Ot.vertexAlphas=_t.vertexAlphas,Ot.vertexTangents=_t.vertexTangents,Ot.toneMapping=_t.toneMapping}function Ht(De,_t,Ot,St,Xt){_t.isScene!==!0&&(_t=ke),He.resetTextureUnits();const Wn=_t.fog,ir=St.isMeshStandardMaterial?_t.environment:null,br=P===null?M.outputEncoding:P.isXRRenderTarget===!0?P.texture.encoding:Mg,Or=(St.isMeshStandardMaterial?st:it).get(St.envMap||ir),Ei=St.vertexColors===!0&&!!Ot.attributes.color&&Ot.attributes.color.itemSize===4,Lr=!!St.normalMap&&!!Ot.attributes.tangent,Ar=!!Ot.morphAttributes.position,Ss=!!Ot.morphAttributes.normal,La=!!Ot.morphAttributes.color,Mo=St.toneMapped?M.toneMapping:c0,Xl=Ot.morphAttributes.position||Ot.morphAttributes.normal||Ot.morphAttributes.color,rn=Xl!==void 0?Xl.length:0,Dr=Ie.get(St),tl=b.state.lights;if(K===!0&&(ie===!0||De!==U)){const Sr=De===U&&St.id===D;re.setState(St,De,Sr)}let Na=!1;St.version===Dr.__version?(Dr.needsLights&&Dr.lightsStateVersion!==tl.state.version||Dr.outputEncoding!==br||Xt.isInstancedMesh&&Dr.instancing===!1||!Xt.isInstancedMesh&&Dr.instancing===!0||Xt.isSkinnedMesh&&Dr.skinning===!1||!Xt.isSkinnedMesh&&Dr.skinning===!0||Dr.envMap!==Or||St.fog===!0&&Dr.fog!==Wn||Dr.numClippingPlanes!==void 0&&(Dr.numClippingPlanes!==re.numPlanes||Dr.numIntersection!==re.numIntersection)||Dr.vertexAlphas!==Ei||Dr.vertexTangents!==Lr||Dr.morphTargets!==Ar||Dr.morphNormals!==Ss||Dr.morphColors!==La||Dr.toneMapping!==Mo||ft.isWebGL2===!0&&Dr.morphTargetsCount!==rn)&&(Na=!0):(Na=!0,Dr.__version=St.version);let zs=Dr.currentProgram;Na===!0&&(zs=je(St,_t,Xt));let Us=!1,Pi=!1,Pr=!1;const In=zs.getUniforms(),Nr=Dr.uniforms;if(at.useProgram(zs.program)&&(Us=!0,Pi=!0,Pr=!0),St.id!==D&&(D=St.id,Pi=!0),Us||U!==De){if(In.setValue(we,"projectionMatrix",De.projectionMatrix),ft.logarithmicDepthBuffer&&In.setValue(we,"logDepthBufFC",2/(Math.log(De.far+1)/Math.LN2)),U!==De&&(U=De,Pi=!0,Pr=!0),St.isShaderMaterial||St.isMeshPhongMaterial||St.isMeshToonMaterial||St.isMeshStandardMaterial||St.envMap){const Sr=In.map.cameraPosition;Sr!==void 0&&Sr.setValue(we,Ue.setFromMatrixPosition(De.matrixWorld))}(St.isMeshPhongMaterial||St.isMeshToonMaterial||St.isMeshLambertMaterial||St.isMeshBasicMaterial||St.isMeshStandardMaterial||St.isShaderMaterial)&&In.setValue(we,"isOrthographic",De.isOrthographicCamera===!0),(St.isMeshPhongMaterial||St.isMeshToonMaterial||St.isMeshLambertMaterial||St.isMeshBasicMaterial||St.isMeshStandardMaterial||St.isShaderMaterial||St.isShadowMaterial||Xt.isSkinnedMesh)&&In.setValue(we,"viewMatrix",De.matrixWorldInverse)}if(Xt.isSkinnedMesh){In.setOptional(we,Xt,"bindMatrix"),In.setOptional(we,Xt,"bindMatrixInverse");const Sr=Xt.skeleton;Sr&&(ft.floatVertexTextures?(Sr.boneTexture===null&&Sr.computeBoneTexture(),In.setValue(we,"boneTexture",Sr.boneTexture,He),In.setValue(we,"boneTextureSize",Sr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const jr=Ot.morphAttributes;if((jr.position!==void 0||jr.normal!==void 0||jr.color!==void 0&&ft.isWebGL2===!0)&&yt.update(Xt,Ot,St,zs),(Pi||Dr.receiveShadow!==Xt.receiveShadow)&&(Dr.receiveShadow=Xt.receiveShadow,In.setValue(we,"receiveShadow",Xt.receiveShadow)),Pi&&(In.setValue(we,"toneMappingExposure",M.toneMappingExposure),Dr.needsLights&&nn(Nr,Pr),Wn&&St.fog===!0&&Ct.refreshFogUniforms(Nr,Wn),Ct.refreshMaterialUniforms(Nr,St,ue,oe,se),AI.upload(we,Dr.uniformsList,Nr,He)),St.isShaderMaterial&&St.uniformsNeedUpdate===!0&&(AI.upload(we,Dr.uniformsList,Nr,He),St.uniformsNeedUpdate=!1),St.isSpriteMaterial&&In.setValue(we,"center",Xt.center),In.setValue(we,"modelViewMatrix",Xt.modelViewMatrix),In.setValue(we,"normalMatrix",Xt.normalMatrix),In.setValue(we,"modelMatrix",Xt.matrixWorld),St.isShaderMaterial||St.isRawShaderMaterial){const Sr=St.uniformsGroups;for(let Bi=0,ws=Sr.length;Bi<ws;Bi++)if(ft.isWebGL2){const fi=Sr[Bi];Q.update(fi,zs),Q.bind(fi,zs)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return zs}function nn(De,_t){De.ambientLightColor.needsUpdate=_t,De.lightProbe.needsUpdate=_t,De.directionalLights.needsUpdate=_t,De.directionalLightShadows.needsUpdate=_t,De.pointLights.needsUpdate=_t,De.pointLightShadows.needsUpdate=_t,De.spotLights.needsUpdate=_t,De.spotLightShadows.needsUpdate=_t,De.rectAreaLights.needsUpdate=_t,De.hemisphereLights.needsUpdate=_t}function kn(De){return De.isMeshLambertMaterial||De.isMeshToonMaterial||De.isMeshPhongMaterial||De.isMeshStandardMaterial||De.isShadowMaterial||De.isShaderMaterial&&De.lights===!0}this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(De,_t,Ot){Ie.get(De.texture).__webglTexture=_t,Ie.get(De.depthTexture).__webglTexture=Ot;const St=Ie.get(De);St.__hasExternalTextures=!0,St.__hasExternalTextures&&(St.__autoAllocateDepthBuffer=Ot===void 0,St.__autoAllocateDepthBuffer||et.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),St.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(De,_t){const Ot=Ie.get(De);Ot.__webglFramebuffer=_t,Ot.__useDefaultFramebuffer=_t===void 0},this.setRenderTarget=function(De,_t=0,Ot=0){P=De,k=_t,O=Ot;let St=!0;if(De){const br=Ie.get(De);br.__useDefaultFramebuffer!==void 0?(at.bindFramebuffer(36160,null),St=!1):br.__webglFramebuffer===void 0?He.setupRenderTarget(De):br.__hasExternalTextures&&He.rebindTextures(De,Ie.get(De.texture).__webglTexture,Ie.get(De.depthTexture).__webglTexture)}let Xt=null,Wn=!1,ir=!1;if(De){const br=De.texture;(br.isData3DTexture||br.isDataArrayTexture)&&(ir=!0);const Or=Ie.get(De).__webglFramebuffer;De.isWebGLCubeRenderTarget?(Xt=Or[_t],Wn=!0):ft.isWebGL2&&De.samples>0&&He.useMultisampledRTT(De)===!1?Xt=Ie.get(De).__webglMultisampledFramebuffer:Xt=Or,H.copy(De.viewport),V.copy(De.scissor),z=De.scissorTest}else H.copy(le).multiplyScalar(ue).floor(),V.copy(ce).multiplyScalar(ue).floor(),z=ge;if(at.bindFramebuffer(36160,Xt)&&ft.drawBuffers&&St&&at.drawBuffers(De,Xt),at.viewport(H),at.scissor(V),at.setScissorTest(z),Wn){const br=Ie.get(De.texture);we.framebufferTexture2D(36160,36064,34069+_t,br.__webglTexture,Ot)}else if(ir){const br=Ie.get(De.texture),Or=_t||0;we.framebufferTextureLayer(36160,36064,br.__webglTexture,Ot||0,Or)}D=-1},this.readRenderTargetPixels=function(De,_t,Ot,St,Xt,Wn,ir){if(!(De&&De.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let br=Ie.get(De).__webglFramebuffer;if(De.isWebGLCubeRenderTarget&&ir!==void 0&&(br=br[ir]),br){at.bindFramebuffer(36160,br);try{const Or=De.texture,Ei=Or.format,Lr=Or.type;if(Ei!==Xp&&Qe.convert(Ei)!==we.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ar=Lr===tT&&(et.has("EXT_color_buffer_half_float")||ft.isWebGL2&&et.has("EXT_color_buffer_float"));if(Lr!==af&&Qe.convert(Lr)!==we.getParameter(35738)&&!(Lr===ov&&(ft.isWebGL2||et.has("OES_texture_float")||et.has("WEBGL_color_buffer_float")))&&!Ar){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}_t>=0&&_t<=De.width-St&&Ot>=0&&Ot<=De.height-Xt&&we.readPixels(_t,Ot,St,Xt,Qe.convert(Ei),Qe.convert(Lr),Wn)}finally{const Or=P!==null?Ie.get(P).__webglFramebuffer:null;at.bindFramebuffer(36160,Or)}}},this.copyFramebufferToTexture=function(De,_t,Ot=0){const St=Math.pow(2,-Ot),Xt=Math.floor(_t.image.width*St),Wn=Math.floor(_t.image.height*St);He.setTexture2D(_t,0),we.copyTexSubImage2D(3553,Ot,0,0,De.x,De.y,Xt,Wn),at.unbindTexture()},this.copyTextureToTexture=function(De,_t,Ot,St=0){const Xt=_t.image.width,Wn=_t.image.height,ir=Qe.convert(Ot.format),br=Qe.convert(Ot.type);He.setTexture2D(Ot,0),we.pixelStorei(37440,Ot.flipY),we.pixelStorei(37441,Ot.premultiplyAlpha),we.pixelStorei(3317,Ot.unpackAlignment),_t.isDataTexture?we.texSubImage2D(3553,St,De.x,De.y,Xt,Wn,ir,br,_t.image.data):_t.isCompressedTexture?we.compressedTexSubImage2D(3553,St,De.x,De.y,_t.mipmaps[0].width,_t.mipmaps[0].height,ir,_t.mipmaps[0].data):we.texSubImage2D(3553,St,De.x,De.y,ir,br,_t.image),St===0&&Ot.generateMipmaps&&we.generateMipmap(3553),at.unbindTexture()},this.copyTextureToTexture3D=function(De,_t,Ot,St,Xt=0){if(M.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Wn=De.max.x-De.min.x+1,ir=De.max.y-De.min.y+1,br=De.max.z-De.min.z+1,Or=Qe.convert(St.format),Ei=Qe.convert(St.type);let Lr;if(St.isData3DTexture)He.setTexture3D(St,0),Lr=32879;else if(St.isDataArrayTexture)He.setTexture2DArray(St,0),Lr=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}we.pixelStorei(37440,St.flipY),we.pixelStorei(37441,St.premultiplyAlpha),we.pixelStorei(3317,St.unpackAlignment);const Ar=we.getParameter(3314),Ss=we.getParameter(32878),La=we.getParameter(3316),Mo=we.getParameter(3315),Xl=we.getParameter(32877),rn=Ot.isCompressedTexture?Ot.mipmaps[0]:Ot.image;we.pixelStorei(3314,rn.width),we.pixelStorei(32878,rn.height),we.pixelStorei(3316,De.min.x),we.pixelStorei(3315,De.min.y),we.pixelStorei(32877,De.min.z),Ot.isDataTexture||Ot.isData3DTexture?we.texSubImage3D(Lr,Xt,_t.x,_t.y,_t.z,Wn,ir,br,Or,Ei,rn.data):Ot.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),we.compressedTexSubImage3D(Lr,Xt,_t.x,_t.y,_t.z,Wn,ir,br,Or,rn.data)):we.texSubImage3D(Lr,Xt,_t.x,_t.y,_t.z,Wn,ir,br,Or,Ei,rn),we.pixelStorei(3314,Ar),we.pixelStorei(32878,Ss),we.pixelStorei(3316,La),we.pixelStorei(3315,Mo),we.pixelStorei(32877,Xl),Xt===0&&St.generateMipmaps&&we.generateMipmap(Lr),at.unbindTexture()},this.initTexture=function(De){De.isCubeTexture?He.setTextureCube(De,0):De.isData3DTexture?He.setTexture3D(De,0):De.isDataArrayTexture?He.setTexture2DArray(De,0):He.setTexture2D(De,0),at.unbindTexture()},this.resetState=function(){k=0,O=0,P=null,at.reset(),Le.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class XQ extends f4{}XQ.prototype.isWebGL1Renderer=!0;class g2{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Fn(e),this.density=t}clone(){return new g2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class v2{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Fn(e),this.near=t,this.far=r}clone(){return new v2(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class j$ extends oo{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}class _2{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=G$,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Bm()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[r+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Bm()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Bm()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const rp=new Me;class Om{constructor(e,t,r,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=s===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)rp.fromBufferAttribute(this,t),rp.applyMatrix4(e),this.setXYZ(t,rp.x,rp.y,rp.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)rp.fromBufferAttribute(this,t),rp.applyNormalMatrix(e),this.setXYZ(t,rp.x,rp.y,rp.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)rp.fromBufferAttribute(this,t),rp.transformDirection(e),this.setXYZ(t,rp.x,rp.y,rp.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=s,this}setXYZW(e,t,r,s,o){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return new zo(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Om(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class p4 extends hd{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Fn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let kS;const fx=new Me,OS=new Me,LS=new Me,NS=new Kt,px=new Kt,KQ=new ei,hA=new Me,mx=new Me,dA=new Me,c6=new Kt,KL=new Kt,h6=new Kt;class JQ extends oo{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",kS===void 0){kS=new ui;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new _2(t,5);kS.setIndex([0,1,2,0,2,3]),kS.setAttribute("position",new Om(r,3,0,!1)),kS.setAttribute("uv",new Om(r,2,3,!1))}this.geometry=kS,this.material=e!==void 0?e:new p4,this.center=new Kt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),OS.setFromMatrixScale(this.matrixWorld),KQ.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),LS.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&OS.multiplyScalar(-LS.z);const r=this.material.rotation;let s,o;r!==0&&(o=Math.cos(r),s=Math.sin(r));const l=this.center;fA(hA.set(-.5,-.5,0),LS,l,OS,s,o),fA(mx.set(.5,-.5,0),LS,l,OS,s,o),fA(dA.set(.5,.5,0),LS,l,OS,s,o),c6.set(0,0),KL.set(1,0),h6.set(1,1);let u=e.ray.intersectTriangle(hA,mx,dA,!1,fx);if(u===null&&(fA(mx.set(-.5,.5,0),LS,l,OS,s,o),KL.set(0,1),u=e.ray.intersectTriangle(hA,dA,mx,!1,fx),u===null))return;const h=e.ray.origin.distanceTo(fx);h<e.near||h>e.far||t.push({distance:h,point:fx.clone(),uv:Rm.getUV(fx,hA,mx,dA,c6,KL,h6,new Kt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function fA(n,e,t,r,s,o){NS.subVectors(n,t).addScalar(.5).multiply(r),s!==void 0?(px.x=o*NS.x-s*NS.y,px.y=s*NS.x+o*NS.y):px.copy(NS),n.copy(e),n.x+=px.x,n.y+=px.y,n.applyMatrix4(KQ)}const pA=new Me,d6=new Me;class qQ extends oo{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,s=t.length;r<s;r++){const o=t[r];this.addLevel(o.object.clone(),o.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,s;for(r=1,s=t.length;r<s&&!(e<t[r].distance);r++);return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){pA.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(pA);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){pA.setFromMatrixPosition(e.matrixWorld),d6.setFromMatrixPosition(this.matrixWorld);const r=pA.distanceTo(d6)/e.zoom;t[0].object.visible=!0;let s,o;for(s=1,o=t.length;s<o&&r>=t[s].distance;s++)t[s-1].object.visible=!1,t[s].object.visible=!0;for(this._currentLevel=s-1;s<o;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let s=0,o=r.length;s<o;s++){const l=r[s];t.object.levels.push({object:l.object.uuid,distance:l.distance})}return t}}const f6=new Me,p6=new Ts,m6=new Ts,vCe=new Me,g6=new ei;class QQ extends Hn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ei,this.bindMatrixInverse=new ei}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ts,t=this.geometry.attributes.skinWeight;for(let r=0,s=t.count;r<s;r++){e.fromBufferAttribute(t,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,s=this.geometry;p6.fromBufferAttribute(s.attributes.skinIndex,e),m6.fromBufferAttribute(s.attributes.skinWeight,e),f6.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=m6.getComponent(o);if(l!==0){const u=p6.getComponent(o);g6.multiplyMatrices(r.bones[u].matrixWorld,r.boneInverses[u]),t.addScaledVector(vCe.copy(f6).applyMatrix4(g6),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class m4 extends oo{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Tw extends dc{constructor(e=null,t=1,r=1,s,o,l,u,h,f=Vl,g=Vl,y,b){super(null,l,u,h,f,g,s,o,y,b),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const v6=new ei,_Ce=new ei;class y2{constructor(e=[],t=[]){this.uuid=Bm(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,s=this.bones.length;r<s;r++)this.boneInverses.push(new ei)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new ei;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,s=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const u=e[o]?e[o].matrixWorld:_Ce;v6.multiplyMatrices(u,t[o]),v6.toArray(r,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new y2(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=LQ(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Tw(t,e,e,Xp,ov);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,s=e.bones.length;r<s;r++){const o=e.bones[r];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new m4),this.bones.push(l),this.boneInverses.push(new ei().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let s=0,o=t.length;s<o;s++){const l=t[s];e.bones.push(l.uuid);const u=r[s];e.boneInverses.push(u.toArray())}return e}}class nT extends zo{constructor(e,t,r,s=1){typeof r=="number"&&(s=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const _6=new ei,y6=new ei,mA=[],gx=new Hn;class ZQ extends Hn{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new nT(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,s=this.count;if(gx.geometry=this.geometry,gx.material=this.material,gx.material!==void 0)for(let o=0;o<s;o++){this.getMatrixAt(o,_6),y6.multiplyMatrices(r,_6),gx.matrixWorld=y6,gx.raycast(e,mA);for(let l=0,u=mA.length;l<u;l++){const h=mA[l];h.instanceId=o,h.object=this,t.push(h)}mA.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new nT(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Bf extends hd{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Fn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const b6=new Me,T6=new Me,S6=new ei,JL=new LC,gA=new xv;class Rf extends oo{constructor(e=new ui,t=new Bf){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let s=1,o=t.count;s<o;s++)b6.fromBufferAttribute(t,s-1),T6.fromBufferAttribute(t,s),r[s]=r[s-1],r[s]+=b6.distanceTo(T6);e.setAttribute("lineDistance",new ur(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,l=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),gA.copy(r.boundingSphere),gA.applyMatrix4(s),gA.radius+=o,e.ray.intersectsSphere(gA)===!1)return;S6.copy(s).invert(),JL.copy(e.ray).applyMatrix4(S6);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,f=new Me,g=new Me,y=new Me,b=new Me,S=this.isLineSegments?2:1,C=r.index,M=r.attributes.position;if(C!==null){const A=Math.max(0,l.start),k=Math.min(C.count,l.start+l.count);for(let O=A,P=k-1;O<P;O+=S){const D=C.getX(O),U=C.getX(O+1);if(f.fromBufferAttribute(M,D),g.fromBufferAttribute(M,U),JL.distanceSqToSegment(f,g,b,y)>h)continue;b.applyMatrix4(this.matrixWorld);const H=e.ray.origin.distanceTo(b);H<e.near||H>e.far||t.push({distance:H,point:y.clone().applyMatrix4(this.matrixWorld),index:O,face:null,faceIndex:null,object:this})}}else{const A=Math.max(0,l.start),k=Math.min(M.count,l.start+l.count);for(let O=A,P=k-1;O<P;O+=S){if(f.fromBufferAttribute(M,O),g.fromBufferAttribute(M,O+1),JL.distanceSqToSegment(f,g,b,y)>h)continue;b.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(b);D<e.near||D>e.far||t.push({distance:D,point:y.clone().applyMatrix4(this.matrixWorld),index:O,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const w6=new Me,E6=new Me;class $v extends Rf{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let s=0,o=t.count;s<o;s+=2)w6.fromBufferAttribute(t,s),E6.fromBufferAttribute(t,s+1),r[s]=s===0?0:r[s-1],r[s+1]=r[s]+w6.distanceTo(E6);e.setAttribute("lineDistance",new ur(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class eZ extends Rf{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class b2 extends hd{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Fn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const x6=new ei,zP=new LC,vA=new xv,_A=new Me;class tZ extends oo{constructor(e=new ui,t=new b2){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,l=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),vA.copy(r.boundingSphere),vA.applyMatrix4(s),vA.radius+=o,e.ray.intersectsSphere(vA)===!1)return;x6.copy(s).invert(),zP.copy(e.ray).applyMatrix4(x6);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,f=r.index,g=r.attributes.position;if(f!==null){const y=Math.max(0,l.start),b=Math.min(f.count,l.start+l.count);for(let S=y,C=b;S<C;S++){const M=f.getX(S);_A.fromBufferAttribute(g,M),$6(_A,M,h,s,e,t,this)}}else{const y=Math.max(0,l.start),b=Math.min(g.count,l.start+l.count);for(let S=y,C=b;S<C;S++)_A.fromBufferAttribute(g,S),$6(_A,S,h,s,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function $6(n,e,t,r,s,o,l){const u=zP.distanceSqToPoint(n);if(u<t){const h=new Me;zP.closestPointToPoint(n,h),h.applyMatrix4(r);const f=s.ray.origin.distanceTo(h);if(f<s.near||f>s.far)return;o.push({distance:f,distanceToRay:Math.sqrt(u),point:h,index:e,face:null,object:l})}}class yCe extends dc{constructor(e,t,r,s,o,l,u,h,f){super(e,t,r,s,o,l,u,h,f),this.isVideoTexture=!0,this.minFilter=l!==void 0?l:El,this.magFilter=o!==void 0?o:El,this.generateMipmaps=!1;const g=this;function y(){g.needsUpdate=!0,e.requestVideoFrameCallback(y)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(y)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class bCe extends dc{constructor(e,t,r){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=Vl,this.minFilter=Vl,this.generateMipmaps=!1,this.needsUpdate=!0}}class nZ extends dc{constructor(e,t,r,s,o,l,u,h,f,g,y,b){super(null,l,u,h,f,g,s,o,y,b),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class TCe extends dc{constructor(e,t,r,s,o,l,u,h,f){super(e,t,r,s,o,l,u,h,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class g0{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,s=this.getPoint(0),o=0;t.push(0);for(let l=1;l<=e;l++)r=this.getPoint(l/e),o+=r.distanceTo(s),t.push(o),s=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let s=0;const o=r.length;let l;t?l=t:l=e*r[o-1];let u=0,h=o-1,f;for(;u<=h;)if(s=Math.floor(u+(h-u)/2),f=r[s]-l,f<0)u=s+1;else if(f>0)h=s-1;else{h=s;break}if(s=h,r[s]===l)return s/(o-1);const g=r[s],y=r[s+1]-g,b=(l-g)/y;return(s+b)/(o-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),l=this.getPoint(s),u=t||(o.isVector2?new Kt:new Me);return u.copy(l).sub(o).normalize(),u}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new Me,s=[],o=[],l=[],u=new Me,h=new ei;for(let S=0;S<=e;S++){const C=S/e;s[S]=this.getTangentAt(C,new Me)}o[0]=new Me,l[0]=new Me;let f=Number.MAX_VALUE;const g=Math.abs(s[0].x),y=Math.abs(s[0].y),b=Math.abs(s[0].z);g<=f&&(f=g,r.set(1,0,0)),y<=f&&(f=y,r.set(0,1,0)),b<=f&&r.set(0,0,1),u.crossVectors(s[0],r).normalize(),o[0].crossVectors(s[0],u),l[0].crossVectors(s[0],o[0]);for(let S=1;S<=e;S++){if(o[S]=o[S-1].clone(),l[S]=l[S-1].clone(),u.crossVectors(s[S-1],s[S]),u.length()>Number.EPSILON){u.normalize();const C=Math.acos(dh(s[S-1].dot(s[S]),-1,1));o[S].applyMatrix4(h.makeRotationAxis(u,C))}l[S].crossVectors(s[S],o[S])}if(t===!0){let S=Math.acos(dh(o[0].dot(o[e]),-1,1));S/=e,s[0].dot(u.crossVectors(o[0],o[e]))>0&&(S=-S);for(let C=1;C<=e;C++)o[C].applyMatrix4(h.makeRotationAxis(s[C],S*C)),l[C].crossVectors(s[C],o[C])}return{tangents:s,normals:o,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class T2 extends g0{constructor(e=0,t=0,r=1,s=1,o=0,l=Math.PI*2,u=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=s,this.aStartAngle=o,this.aEndAngle=l,this.aClockwise=u,this.aRotation=h}getPoint(e,t){const r=t||new Kt,s=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const l=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=s;for(;o>s;)o-=s;o<Number.EPSILON&&(l?o=0:o=s),this.aClockwise===!0&&!l&&(o===s?o=-s:o=o-s);const u=this.aStartAngle+e*o;let h=this.aX+this.xRadius*Math.cos(u),f=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const g=Math.cos(this.aRotation),y=Math.sin(this.aRotation),b=h-this.aX,S=f-this.aY;h=b*g-S*y+this.aX,f=b*y+S*g+this.aY}return r.set(h,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class rZ extends T2{constructor(e,t,r,s,o,l){super(e,t,r,r,s,o,l),this.isArcCurve=!0,this.type="ArcCurve"}}function g4(){let n=0,e=0,t=0,r=0;function s(o,l,u,h){n=o,e=u,t=-3*o+3*l-2*u-h,r=2*o-2*l+u+h}return{initCatmullRom:function(o,l,u,h,f){s(l,u,f*(u-o),f*(h-l))},initNonuniformCatmullRom:function(o,l,u,h,f,g,y){let b=(l-o)/f-(u-o)/(f+g)+(u-l)/g,S=(u-l)/g-(h-l)/(g+y)+(h-u)/y;b*=g,S*=g,s(l,u,b,S)},calc:function(o){const l=o*o,u=l*o;return n+e*o+t*l+r*u}}}const yA=new Me,qL=new g4,QL=new g4,ZL=new g4;class iZ extends g0{constructor(e=[],t=!1,r="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=s}getPoint(e,t=new Me){const r=t,s=this.points,o=s.length,l=(o-(this.closed?0:1))*e;let u=Math.floor(l),h=l-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:h===0&&u===o-1&&(u=o-2,h=1);let f,g;this.closed||u>0?f=s[(u-1)%o]:(yA.subVectors(s[0],s[1]).add(s[0]),f=yA);const y=s[u%o],b=s[(u+1)%o];if(this.closed||u+2<o?g=s[(u+2)%o]:(yA.subVectors(s[o-1],s[o-2]).add(s[o-1]),g=yA),this.curveType==="centripetal"||this.curveType==="chordal"){const S=this.curveType==="chordal"?.5:.25;let C=Math.pow(f.distanceToSquared(y),S),M=Math.pow(y.distanceToSquared(b),S),A=Math.pow(b.distanceToSquared(g),S);M<1e-4&&(M=1),C<1e-4&&(C=M),A<1e-4&&(A=M),qL.initNonuniformCatmullRom(f.x,y.x,b.x,g.x,C,M,A),QL.initNonuniformCatmullRom(f.y,y.y,b.y,g.y,C,M,A),ZL.initNonuniformCatmullRom(f.z,y.z,b.z,g.z,C,M,A)}else this.curveType==="catmullrom"&&(qL.initCatmullRom(f.x,y.x,b.x,g.x,this.tension),QL.initCatmullRom(f.y,y.y,b.y,g.y,this.tension),ZL.initCatmullRom(f.z,y.z,b.z,g.z,this.tension));return r.set(qL.calc(h),QL.calc(h),ZL.calc(h)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const s=e.points[t];this.points.push(new Me().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function C6(n,e,t,r,s){const o=(r-e)*.5,l=(s-t)*.5,u=n*n,h=n*u;return(2*t-2*r+o+l)*h+(-3*t+3*r-2*o-l)*u+o*n+t}function SCe(n,e){const t=1-n;return t*t*e}function wCe(n,e){return 2*(1-n)*n*e}function ECe(n,e){return n*n*e}function r$(n,e,t,r){return SCe(n,e)+wCe(n,t)+ECe(n,r)}function xCe(n,e){const t=1-n;return t*t*t*e}function $Ce(n,e){const t=1-n;return 3*t*t*n*e}function CCe(n,e){return 3*(1-n)*n*n*e}function MCe(n,e){return n*n*n*e}function i$(n,e,t,r,s){return xCe(n,e)+$Ce(n,t)+CCe(n,r)+MCe(n,s)}class v4 extends g0{constructor(e=new Kt,t=new Kt,r=new Kt,s=new Kt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=s}getPoint(e,t=new Kt){const r=t,s=this.v0,o=this.v1,l=this.v2,u=this.v3;return r.set(i$(e,s.x,o.x,l.x,u.x),i$(e,s.y,o.y,l.y,u.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class sZ extends g0{constructor(e=new Me,t=new Me,r=new Me,s=new Me){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=s}getPoint(e,t=new Me){const r=t,s=this.v0,o=this.v1,l=this.v2,u=this.v3;return r.set(i$(e,s.x,o.x,l.x,u.x),i$(e,s.y,o.y,l.y,u.y),i$(e,s.z,o.z,l.z,u.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class S2 extends g0{constructor(e=new Kt,t=new Kt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Kt){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new Kt;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oZ extends g0{constructor(e=new Me,t=new Me){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Me){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class _4 extends g0{constructor(e=new Kt,t=new Kt,r=new Kt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Kt){const r=t,s=this.v0,o=this.v1,l=this.v2;return r.set(r$(e,s.x,o.x,l.x),r$(e,s.y,o.y,l.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class y4 extends g0{constructor(e=new Me,t=new Me,r=new Me){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Me){const r=t,s=this.v0,o=this.v1,l=this.v2;return r.set(r$(e,s.x,o.x,l.x),r$(e,s.y,o.y,l.y),r$(e,s.z,o.z,l.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class b4 extends g0{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Kt){const r=t,s=this.points,o=(s.length-1)*e,l=Math.floor(o),u=o-l,h=s[l===0?l:l-1],f=s[l],g=s[l>s.length-2?s.length-1:l+1],y=s[l>s.length-3?s.length-1:l+2];return r.set(C6(u,h.x,f.x,g.x,y.x),C6(u,h.y,f.y,g.y,y.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const s=e.points[t];this.points.push(new Kt().fromArray(s))}return this}}var T4=Object.freeze({__proto__:null,ArcCurve:rZ,CatmullRomCurve3:iZ,CubicBezierCurve:v4,CubicBezierCurve3:sZ,EllipseCurve:T2,LineCurve:S2,LineCurve3:oZ,QuadraticBezierCurve:_4,QuadraticBezierCurve3:y4,SplineCurve:b4});class aZ extends g0{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new S2(t,e))}getPoint(e,t){const r=e*this.getLength(),s=this.getCurveLengths();let o=0;for(;o<s.length;){if(s[o]>=r){const l=s[o]-r,u=this.curves[o],h=u.getLength(),f=h===0?0:1-l/h;return u.getPointAt(f,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,s=this.curves.length;r<s;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let s=0,o=this.curves;s<o.length;s++){const l=o[s],u=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,h=l.getPoints(u);for(let f=0;f<h.length;f++){const g=h[f];r&&r.equals(g)||(t.push(g),r=g)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const s=e.curves[t];this.curves.push(new T4[s.type]().fromJSON(s))}return this}}class Y$ extends aZ{constructor(e){super(),this.type="Path",this.currentPoint=new Kt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new S2(this.currentPoint.clone(),new Kt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,s){const o=new _4(this.currentPoint.clone(),new Kt(e,t),new Kt(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this}bezierCurveTo(e,t,r,s,o,l){const u=new v4(this.currentPoint.clone(),new Kt(e,t),new Kt(r,s),new Kt(o,l));return this.curves.push(u),this.currentPoint.set(o,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new b4(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,s,o,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(e+u,t+h,r,s,o,l),this}absarc(e,t,r,s,o,l){return this.absellipse(e,t,r,r,s,o,l),this}ellipse(e,t,r,s,o,l,u,h){const f=this.currentPoint.x,g=this.currentPoint.y;return this.absellipse(e+f,t+g,r,s,o,l,u,h),this}absellipse(e,t,r,s,o,l,u,h){const f=new T2(e,t,r,s,o,l,u,h);if(this.curves.length>0){const y=f.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(f);const g=f.getPoint(1);return this.currentPoint.copy(g),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class rT extends ui{constructor(e=[new Kt(0,-.5),new Kt(.5,0),new Kt(0,.5)],t=12,r=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:s},t=Math.floor(t),s=dh(s,0,Math.PI*2);const o=[],l=[],u=[],h=[],f=[],g=1/t,y=new Me,b=new Kt,S=new Me,C=new Me,M=new Me;let A=0,k=0;for(let O=0;O<=e.length-1;O++)switch(O){case 0:A=e[O+1].x-e[O].x,k=e[O+1].y-e[O].y,S.x=k*1,S.y=-A,S.z=k*0,M.copy(S),S.normalize(),h.push(S.x,S.y,S.z);break;case e.length-1:h.push(M.x,M.y,M.z);break;default:A=e[O+1].x-e[O].x,k=e[O+1].y-e[O].y,S.x=k*1,S.y=-A,S.z=k*0,C.copy(S),S.x+=M.x,S.y+=M.y,S.z+=M.z,S.normalize(),h.push(S.x,S.y,S.z),M.copy(C)}for(let O=0;O<=t;O++){const P=r+O*g*s,D=Math.sin(P),U=Math.cos(P);for(let H=0;H<=e.length-1;H++){y.x=e[H].x*D,y.y=e[H].y,y.z=e[H].x*U,l.push(y.x,y.y,y.z),b.x=O/t,b.y=H/(e.length-1),u.push(b.x,b.y);const V=h[3*H+0]*D,z=h[3*H+1],Z=h[3*H+0]*U;f.push(V,z,Z)}}for(let O=0;O<t;O++)for(let P=0;P<e.length-1;P++){const D=P+O*e.length,U=D,H=D+e.length,V=D+e.length+1,z=D+1;o.push(U,H,z),o.push(V,z,H)}this.setIndex(o),this.setAttribute("position",new ur(l,3)),this.setAttribute("uv",new ur(u,2)),this.setAttribute("normal",new ur(f,3))}static fromJSON(e){return new rT(e.points,e.segments,e.phiStart,e.phiLength)}}class zw extends rT{constructor(e=1,t=1,r=4,s=8){const o=new Y$;o.absarc(0,-t/2,e,Math.PI*1.5,0),o.absarc(0,t/2,e,0,Math.PI*.5),super(o.getPoints(r),s),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:s}}static fromJSON(e){return new zw(e.radius,e.length,e.capSegments,e.radialSegments)}}class Uw extends ui{constructor(e=1,t=8,r=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:s},t=Math.max(3,t);const o=[],l=[],u=[],h=[],f=new Me,g=new Kt;l.push(0,0,0),u.push(0,0,1),h.push(.5,.5);for(let y=0,b=3;y<=t;y++,b+=3){const S=r+y/t*s;f.x=e*Math.cos(S),f.y=e*Math.sin(S),l.push(f.x,f.y,f.z),u.push(0,0,1),g.x=(l[b]/e+1)/2,g.y=(l[b+1]/e+1)/2,h.push(g.x,g.y)}for(let y=1;y<=t;y++)o.push(y,y+1,0);this.setIndex(o),this.setAttribute("position",new ur(l,3)),this.setAttribute("normal",new ur(u,3)),this.setAttribute("uv",new ur(h,2))}static fromJSON(e){return new Uw(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Wl extends ui{constructor(e=1,t=1,r=1,s=8,o=1,l=!1,u=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:s,heightSegments:o,openEnded:l,thetaStart:u,thetaLength:h};const f=this;s=Math.floor(s),o=Math.floor(o);const g=[],y=[],b=[],S=[];let C=0;const M=[],A=r/2;let k=0;O(),l===!1&&(e>0&&P(!0),t>0&&P(!1)),this.setIndex(g),this.setAttribute("position",new ur(y,3)),this.setAttribute("normal",new ur(b,3)),this.setAttribute("uv",new ur(S,2));function O(){const D=new Me,U=new Me;let H=0;const V=(t-e)/r;for(let z=0;z<=o;z++){const Z=[],oe=z/o,ue=oe*(t-e)+e;for(let q=0;q<=s;q++){const ae=q/s,le=ae*h+u,ce=Math.sin(le),ge=Math.cos(le);U.x=ue*ce,U.y=-oe*r+A,U.z=ue*ge,y.push(U.x,U.y,U.z),D.set(ce,V,ge).normalize(),b.push(D.x,D.y,D.z),S.push(ae,1-oe),Z.push(C++)}M.push(Z)}for(let z=0;z<s;z++)for(let Z=0;Z<o;Z++){const oe=M[Z][z],ue=M[Z+1][z],q=M[Z+1][z+1],ae=M[Z][z+1];g.push(oe,ue,ae),g.push(ue,q,ae),H+=6}f.addGroup(k,H,0),k+=H}function P(D){const U=C,H=new Kt,V=new Me;let z=0;const Z=D===!0?e:t,oe=D===!0?1:-1;for(let q=1;q<=s;q++)y.push(0,A*oe,0),b.push(0,oe,0),S.push(.5,.5),C++;const ue=C;for(let q=0;q<=s;q++){const ae=q/s*h+u,le=Math.cos(ae),ce=Math.sin(ae);V.x=Z*ce,V.y=A*oe,V.z=Z*le,y.push(V.x,V.y,V.z),b.push(0,oe,0),H.x=le*.5+.5,H.y=ce*.5*oe+.5,S.push(H.x,H.y),C++}for(let q=0;q<s;q++){const ae=U+q,le=ue+q;D===!0?g.push(le,le+1,ae):g.push(le+1,le,ae),z+=3}f.addGroup(k,z,D===!0?1:2),k+=z}}static fromJSON(e){return new Wl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Hw extends Wl{constructor(e=1,t=1,r=8,s=1,o=!1,l=0,u=Math.PI*2){super(0,e,t,r,s,o,l,u),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:u}}static fromJSON(e){return new Hw(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class yv extends ui{constructor(e=[],t=[],r=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:s};const o=[],l=[];u(s),f(r),g(),this.setAttribute("position",new ur(o,3)),this.setAttribute("normal",new ur(o.slice(),3)),this.setAttribute("uv",new ur(l,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function u(O){const P=new Me,D=new Me,U=new Me;for(let H=0;H<t.length;H+=3)S(t[H+0],P),S(t[H+1],D),S(t[H+2],U),h(P,D,U,O)}function h(O,P,D,U){const H=U+1,V=[];for(let z=0;z<=H;z++){V[z]=[];const Z=O.clone().lerp(D,z/H),oe=P.clone().lerp(D,z/H),ue=H-z;for(let q=0;q<=ue;q++)q===0&&z===H?V[z][q]=Z:V[z][q]=Z.clone().lerp(oe,q/ue)}for(let z=0;z<H;z++)for(let Z=0;Z<2*(H-z)-1;Z++){const oe=Math.floor(Z/2);Z%2===0?(b(V[z][oe+1]),b(V[z+1][oe]),b(V[z][oe])):(b(V[z][oe+1]),b(V[z+1][oe+1]),b(V[z+1][oe]))}}function f(O){const P=new Me;for(let D=0;D<o.length;D+=3)P.x=o[D+0],P.y=o[D+1],P.z=o[D+2],P.normalize().multiplyScalar(O),o[D+0]=P.x,o[D+1]=P.y,o[D+2]=P.z}function g(){const O=new Me;for(let P=0;P<o.length;P+=3){O.x=o[P+0],O.y=o[P+1],O.z=o[P+2];const D=A(O)/2/Math.PI+.5,U=k(O)/Math.PI+.5;l.push(D,1-U)}C(),y()}function y(){for(let O=0;O<l.length;O+=6){const P=l[O+0],D=l[O+2],U=l[O+4],H=Math.max(P,D,U),V=Math.min(P,D,U);H>.9&&V<.1&&(P<.2&&(l[O+0]+=1),D<.2&&(l[O+2]+=1),U<.2&&(l[O+4]+=1))}}function b(O){o.push(O.x,O.y,O.z)}function S(O,P){const D=O*3;P.x=e[D+0],P.y=e[D+1],P.z=e[D+2]}function C(){const O=new Me,P=new Me,D=new Me,U=new Me,H=new Kt,V=new Kt,z=new Kt;for(let Z=0,oe=0;Z<o.length;Z+=9,oe+=6){O.set(o[Z+0],o[Z+1],o[Z+2]),P.set(o[Z+3],o[Z+4],o[Z+5]),D.set(o[Z+6],o[Z+7],o[Z+8]),H.set(l[oe+0],l[oe+1]),V.set(l[oe+2],l[oe+3]),z.set(l[oe+4],l[oe+5]),U.copy(O).add(P).add(D).divideScalar(3);const ue=A(U);M(H,oe+0,O,ue),M(V,oe+2,P,ue),M(z,oe+4,D,ue)}}function M(O,P,D,U){U<0&&O.x===1&&(l[P]=O.x-1),D.x===0&&D.z===0&&(l[P]=U/2/Math.PI+.5)}function A(O){return Math.atan2(O.z,-O.x)}function k(O){return Math.atan2(-O.y,Math.sqrt(O.x*O.x+O.z*O.z))}}static fromJSON(e){return new yv(e.vertices,e.indices,e.radius,e.details)}}class Gw extends yv{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,s=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-r,0,-s,r,0,s,-r,0,s,r,-s,-r,0,-s,r,0,s,-r,0,s,r,0,-r,0,-s,r,0,-s,-r,0,s,r,0,s],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Gw(e.radius,e.detail)}}const bA=new Me,TA=new Me,eN=new Me,SA=new Rm;class lZ extends ui{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(F1*t),o=e.getIndex(),l=e.getAttribute("position"),u=o?o.count:l.count,h=[0,0,0],f=["a","b","c"],g=new Array(3),y={},b=[];for(let S=0;S<u;S+=3){o?(h[0]=o.getX(S),h[1]=o.getX(S+1),h[2]=o.getX(S+2)):(h[0]=S,h[1]=S+1,h[2]=S+2);const{a:C,b:M,c:A}=SA;if(C.fromBufferAttribute(l,h[0]),M.fromBufferAttribute(l,h[1]),A.fromBufferAttribute(l,h[2]),SA.getNormal(eN),g[0]=`${Math.round(C.x*r)},${Math.round(C.y*r)},${Math.round(C.z*r)}`,g[1]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,g[2]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let k=0;k<3;k++){const O=(k+1)%3,P=g[k],D=g[O],U=SA[f[k]],H=SA[f[O]],V=`${P}_${D}`,z=`${D}_${P}`;z in y&&y[z]?(eN.dot(y[z].normal)<=s&&(b.push(U.x,U.y,U.z),b.push(H.x,H.y,H.z)),y[z]=null):V in y||(y[V]={index0:h[k],index1:h[O],normal:eN.clone()})}}for(const S in y)if(y[S]){const{index0:C,index1:M}=y[S];bA.fromBufferAttribute(l,C),TA.fromBufferAttribute(l,M),b.push(bA.x,bA.y,bA.z),b.push(TA.x,TA.y,TA.z)}this.setAttribute("position",new ur(b,3))}}}class H1 extends Y${constructor(e){super(e),this.uuid=Bm(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,s=this.holes.length;r<s;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const s=e.holes[t];this.holes.push(new Y$().fromJSON(s))}return this}}const ACe={triangulate:function(n,e,t=2){const r=e&&e.length,s=r?e[0]*t:n.length;let o=uZ(n,0,s,t,!0);const l=[];if(!o||o.next===o.prev)return l;let u,h,f,g,y,b,S;if(r&&(o=LCe(n,e,o,t)),n.length>80*t){u=f=n[0],h=g=n[1];for(let C=t;C<s;C+=t)y=n[C],b=n[C+1],y<u&&(u=y),b<h&&(h=b),y>f&&(f=y),b>g&&(g=b);S=Math.max(f-u,g-h),S=S!==0?1/S:0}return X$(o,l,t,u,h,S),l}};function uZ(n,e,t,r,s){let o,l;if(s===VCe(n,e,t,r)>0)for(o=e;o<t;o+=r)l=M6(o,n[o],n[o+1],l);else for(o=t-r;o>=e;o-=r)l=M6(o,n[o],n[o+1],l);return l&&w2(l,l.next)&&(J$(l),l=l.next),l}function Xy(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(w2(t,t.next)||lc(t.prev,t,t.next)===0)){if(J$(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function X$(n,e,t,r,s,o,l){if(!n)return;!l&&o&&FCe(n,r,s,o);let u=n,h,f;for(;n.prev!==n.next;){if(h=n.prev,f=n.next,o?RCe(n,r,s,o):ICe(n)){e.push(h.i/t),e.push(n.i/t),e.push(f.i/t),J$(n),n=f.next,u=f.next;continue}if(n=f,n===u){l?l===1?(n=kCe(Xy(n),e,t),X$(n,e,t,r,s,o,2)):l===2&&OCe(n,e,t,r,s,o):X$(Xy(n),e,t,r,s,o,1);break}}}function ICe(n){const e=n.prev,t=n,r=n.next;if(lc(e,t,r)>=0)return!1;let s=n.next.next;for(;s!==n.prev;){if(sw(e.x,e.y,t.x,t.y,r.x,r.y,s.x,s.y)&&lc(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function RCe(n,e,t,r){const s=n.prev,o=n,l=n.next;if(lc(s,o,l)>=0)return!1;const u=s.x<o.x?s.x<l.x?s.x:l.x:o.x<l.x?o.x:l.x,h=s.y<o.y?s.y<l.y?s.y:l.y:o.y<l.y?o.y:l.y,f=s.x>o.x?s.x>l.x?s.x:l.x:o.x>l.x?o.x:l.x,g=s.y>o.y?s.y>l.y?s.y:l.y:o.y>l.y?o.y:l.y,y=UP(u,h,e,t,r),b=UP(f,g,e,t,r);let S=n.prevZ,C=n.nextZ;for(;S&&S.z>=y&&C&&C.z<=b;){if(S!==n.prev&&S!==n.next&&sw(s.x,s.y,o.x,o.y,l.x,l.y,S.x,S.y)&&lc(S.prev,S,S.next)>=0||(S=S.prevZ,C!==n.prev&&C!==n.next&&sw(s.x,s.y,o.x,o.y,l.x,l.y,C.x,C.y)&&lc(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;S&&S.z>=y;){if(S!==n.prev&&S!==n.next&&sw(s.x,s.y,o.x,o.y,l.x,l.y,S.x,S.y)&&lc(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;C&&C.z<=b;){if(C!==n.prev&&C!==n.next&&sw(s.x,s.y,o.x,o.y,l.x,l.y,C.x,C.y)&&lc(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function kCe(n,e,t){let r=n;do{const s=r.prev,o=r.next.next;!w2(s,o)&&cZ(s,r,r.next,o)&&K$(s,o)&&K$(o,s)&&(e.push(s.i/t),e.push(r.i/t),e.push(o.i/t),J$(r),J$(r.next),r=n=o),r=r.next}while(r!==n);return Xy(r)}function OCe(n,e,t,r,s,o){let l=n;do{let u=l.next.next;for(;u!==l.prev;){if(l.i!==u.i&&HCe(l,u)){let h=hZ(l,u);l=Xy(l,l.next),h=Xy(h,h.next),X$(l,e,t,r,s,o),X$(h,e,t,r,s,o);return}u=u.next}l=l.next}while(l!==n)}function LCe(n,e,t,r){const s=[];let o,l,u,h,f;for(o=0,l=e.length;o<l;o++)u=e[o]*r,h=o<l-1?e[o+1]*r:n.length,f=uZ(n,u,h,r,!1),f===f.next&&(f.steiner=!0),s.push(UCe(f));for(s.sort(NCe),o=0;o<s.length;o++)DCe(s[o],t),t=Xy(t,t.next);return t}function NCe(n,e){return n.x-e.x}function DCe(n,e){if(e=PCe(n,e),e){const t=hZ(e,n);Xy(e,e.next),Xy(t,t.next)}}function PCe(n,e){let t=e;const r=n.x,s=n.y;let o=-1/0,l;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const b=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(b<=r&&b>o){if(o=b,b===r){if(s===t.y)return t;if(s===t.next.y)return t.next}l=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!l)return null;if(r===o)return l;const u=l,h=l.x,f=l.y;let g=1/0,y;t=l;do r>=t.x&&t.x>=h&&r!==t.x&&sw(s<f?r:o,s,h,f,s<f?o:r,s,t.x,t.y)&&(y=Math.abs(s-t.y)/(r-t.x),K$(t,n)&&(y<g||y===g&&(t.x>l.x||t.x===l.x&&BCe(l,t)))&&(l=t,g=y)),t=t.next;while(t!==u);return l}function BCe(n,e){return lc(n.prev,n,e.prev)<0&&lc(e.next,n,n.next)<0}function FCe(n,e,t,r){let s=n;do s.z===null&&(s.z=UP(s.x,s.y,e,t,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,zCe(s)}function zCe(n){let e,t,r,s,o,l,u,h,f=1;do{for(t=n,n=null,o=null,l=0;t;){for(l++,r=t,u=0,e=0;e<f&&(u++,r=r.nextZ,!!r);e++);for(h=f;u>0||h>0&&r;)u!==0&&(h===0||!r||t.z<=r.z)?(s=t,t=t.nextZ,u--):(s=r,r=r.nextZ,h--),o?o.nextZ=s:n=s,s.prevZ=o,o=s;t=r}o.nextZ=null,f*=2}while(l>1);return n}function UP(n,e,t,r,s){return n=32767*(n-t)*s,e=32767*(e-r)*s,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function UCe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function sw(n,e,t,r,s,o,l,u){return(s-l)*(e-u)-(n-l)*(o-u)>=0&&(n-l)*(r-u)-(t-l)*(e-u)>=0&&(t-l)*(o-u)-(s-l)*(r-u)>=0}function HCe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!GCe(n,e)&&(K$(n,e)&&K$(e,n)&&WCe(n,e)&&(lc(n.prev,n,e.prev)||lc(n,e.prev,e))||w2(n,e)&&lc(n.prev,n,n.next)>0&&lc(e.prev,e,e.next)>0)}function lc(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function w2(n,e){return n.x===e.x&&n.y===e.y}function cZ(n,e,t,r){const s=EA(lc(n,e,t)),o=EA(lc(n,e,r)),l=EA(lc(t,r,n)),u=EA(lc(t,r,e));return!!(s!==o&&l!==u||s===0&&wA(n,t,e)||o===0&&wA(n,r,e)||l===0&&wA(t,n,r)||u===0&&wA(t,e,r))}function wA(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function EA(n){return n>0?1:n<0?-1:0}function GCe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&cZ(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function K$(n,e){return lc(n.prev,n,n.next)<0?lc(n,e,n.next)>=0&&lc(n,n.prev,e)>=0:lc(n,e,n.prev)<0||lc(n,n.next,e)<0}function WCe(n,e){let t=n,r=!1;const s=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&s<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function hZ(n,e){const t=new HP(n.i,n.x,n.y),r=new HP(e.i,e.x,e.y),s=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,r.next=t,t.prev=r,o.next=r,r.prev=o,r}function M6(n,e,t,r){const s=new HP(n,e,t);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function J$(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function HP(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function VCe(n,e,t,r){let s=0;for(let o=e,l=t-r;o<t;o+=r)s+=(n[l]-n[o])*(n[o+1]+n[l+1]),l=o;return s}class fv{static area(e){const t=e.length;let r=0;for(let s=t-1,o=0;o<t;s=o++)r+=e[s].x*e[o].y-e[o].x*e[s].y;return r*.5}static isClockWise(e){return fv.area(e)<0}static triangulateShape(e,t){const r=[],s=[],o=[];A6(e),I6(r,e);let l=e.length;t.forEach(A6);for(let h=0;h<t.length;h++)s.push(l),l+=t[h].length,I6(r,t[h]);const u=ACe.triangulate(r,s);for(let h=0;h<u.length;h+=3)o.push(u.slice(h,h+3));return o}}function A6(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function I6(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Ww extends ui{constructor(e=new H1([new Kt(.5,.5),new Kt(-.5,.5),new Kt(-.5,-.5),new Kt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,s=[],o=[];for(let u=0,h=e.length;u<h;u++){const f=e[u];l(f)}this.setAttribute("position",new ur(s,3)),this.setAttribute("uv",new ur(o,2)),this.computeVertexNormals();function l(u){const h=[],f=t.curveSegments!==void 0?t.curveSegments:12,g=t.steps!==void 0?t.steps:1,y=t.depth!==void 0?t.depth:1;let b=t.bevelEnabled!==void 0?t.bevelEnabled:!0,S=t.bevelThickness!==void 0?t.bevelThickness:.2,C=t.bevelSize!==void 0?t.bevelSize:S-.1,M=t.bevelOffset!==void 0?t.bevelOffset:0,A=t.bevelSegments!==void 0?t.bevelSegments:3;const k=t.extrudePath,O=t.UVGenerator!==void 0?t.UVGenerator:jCe;let P,D=!1,U,H,V,z;k&&(P=k.getSpacedPoints(g),D=!0,b=!1,U=k.computeFrenetFrames(g,!1),H=new Me,V=new Me,z=new Me),b||(A=0,S=0,C=0,M=0);const Z=u.extractPoints(f);let oe=Z.shape;const ue=Z.holes;if(!fv.isClockWise(oe)){oe=oe.reverse();for(let Ge=0,Ie=ue.length;Ge<Ie;Ge++){const He=ue[Ge];fv.isClockWise(He)&&(ue[Ge]=He.reverse())}}const q=fv.triangulateShape(oe,ue),ae=oe;for(let Ge=0,Ie=ue.length;Ge<Ie;Ge++){const He=ue[Ge];oe=oe.concat(He)}function le(Ge,Ie,He){return Ie||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ie.clone().multiplyScalar(He).add(Ge)}const ce=oe.length,ge=q.length;function $e(Ge,Ie,He){let it,st,It;const kt=Ge.x-Ie.x,vt=Ge.y-Ie.y,Mt=He.x-Ge.x,Ct=He.y-Ge.y,gt=kt*kt+vt*vt,Ee=kt*Ct-vt*Mt;if(Math.abs(Ee)>Number.EPSILON){const re=Math.sqrt(gt),Be=Math.sqrt(Mt*Mt+Ct*Ct),mt=Ie.x-vt/re,yt=Ie.y+kt/re,wt=He.x-Ct/Be,Ke=He.y+Mt/Be,Qe=((wt-mt)*Ct-(Ke-yt)*Mt)/(kt*Ct-vt*Mt);it=mt+kt*Qe-Ge.x,st=yt+vt*Qe-Ge.y;const Le=it*it+st*st;if(Le<=2)return new Kt(it,st);It=Math.sqrt(Le/2)}else{let re=!1;kt>Number.EPSILON?Mt>Number.EPSILON&&(re=!0):kt<-Number.EPSILON?Mt<-Number.EPSILON&&(re=!0):Math.sign(vt)===Math.sign(Ct)&&(re=!0),re?(it=-vt,st=kt,It=Math.sqrt(gt)):(it=kt,st=vt,It=Math.sqrt(gt/2))}return new Kt(it/It,st/It)}const K=[];for(let Ge=0,Ie=ae.length,He=Ie-1,it=Ge+1;Ge<Ie;Ge++,He++,it++)He===Ie&&(He=0),it===Ie&&(it=0),K[Ge]=$e(ae[Ge],ae[He],ae[it]);const ie=[];let se,fe=K.concat();for(let Ge=0,Ie=ue.length;Ge<Ie;Ge++){const He=ue[Ge];se=[];for(let it=0,st=He.length,It=st-1,kt=it+1;it<st;it++,It++,kt++)It===st&&(It=0),kt===st&&(kt=0),se[it]=$e(He[it],He[It],He[kt]);ie.push(se),fe=fe.concat(se)}for(let Ge=0;Ge<A;Ge++){const Ie=Ge/A,He=S*Math.cos(Ie*Math.PI/2),it=C*Math.sin(Ie*Math.PI/2)+M;for(let st=0,It=ae.length;st<It;st++){const kt=le(ae[st],K[st],it);we(kt.x,kt.y,-He)}for(let st=0,It=ue.length;st<It;st++){const kt=ue[st];se=ie[st];for(let vt=0,Mt=kt.length;vt<Mt;vt++){const Ct=le(kt[vt],se[vt],it);we(Ct.x,Ct.y,-He)}}}const Se=C+M;for(let Ge=0;Ge<ce;Ge++){const Ie=b?le(oe[Ge],fe[Ge],Se):oe[Ge];D?(V.copy(U.normals[0]).multiplyScalar(Ie.x),H.copy(U.binormals[0]).multiplyScalar(Ie.y),z.copy(P[0]).add(V).add(H),we(z.x,z.y,z.z)):we(Ie.x,Ie.y,0)}for(let Ge=1;Ge<=g;Ge++)for(let Ie=0;Ie<ce;Ie++){const He=b?le(oe[Ie],fe[Ie],Se):oe[Ie];D?(V.copy(U.normals[Ge]).multiplyScalar(He.x),H.copy(U.binormals[Ge]).multiplyScalar(He.y),z.copy(P[Ge]).add(V).add(H),we(z.x,z.y,z.z)):we(He.x,He.y,y/g*Ge)}for(let Ge=A-1;Ge>=0;Ge--){const Ie=Ge/A,He=S*Math.cos(Ie*Math.PI/2),it=C*Math.sin(Ie*Math.PI/2)+M;for(let st=0,It=ae.length;st<It;st++){const kt=le(ae[st],K[st],it);we(kt.x,kt.y,y+He)}for(let st=0,It=ue.length;st<It;st++){const kt=ue[st];se=ie[st];for(let vt=0,Mt=kt.length;vt<Mt;vt++){const Ct=le(kt[vt],se[vt],it);D?we(Ct.x,Ct.y+P[g-1].y,P[g-1].x+He):we(Ct.x,Ct.y,y+He)}}}Ue(),ke();function Ue(){const Ge=s.length/3;if(b){let Ie=0,He=ce*Ie;for(let it=0;it<ge;it++){const st=q[it];Ze(st[2]+He,st[1]+He,st[0]+He)}Ie=g+A*2,He=ce*Ie;for(let it=0;it<ge;it++){const st=q[it];Ze(st[0]+He,st[1]+He,st[2]+He)}}else{for(let Ie=0;Ie<ge;Ie++){const He=q[Ie];Ze(He[2],He[1],He[0])}for(let Ie=0;Ie<ge;Ie++){const He=q[Ie];Ze(He[0]+ce*g,He[1]+ce*g,He[2]+ce*g)}}r.addGroup(Ge,s.length/3-Ge,0)}function ke(){const Ge=s.length/3;let Ie=0;qe(ae,Ie),Ie+=ae.length;for(let He=0,it=ue.length;He<it;He++){const st=ue[He];qe(st,Ie),Ie+=st.length}r.addGroup(Ge,s.length/3-Ge,1)}function qe(Ge,Ie){let He=Ge.length;for(;--He>=0;){const it=He;let st=He-1;st<0&&(st=Ge.length-1);for(let It=0,kt=g+A*2;It<kt;It++){const vt=ce*It,Mt=ce*(It+1),Ct=Ie+it+vt,gt=Ie+st+vt,Ee=Ie+st+Mt,re=Ie+it+Mt;et(Ct,gt,Ee,re)}}}function we(Ge,Ie,He){h.push(Ge),h.push(Ie),h.push(He)}function Ze(Ge,Ie,He){ft(Ge),ft(Ie),ft(He);const it=s.length/3,st=O.generateTopUV(r,s,it-3,it-2,it-1);at(st[0]),at(st[1]),at(st[2])}function et(Ge,Ie,He,it){ft(Ge),ft(Ie),ft(it),ft(Ie),ft(He),ft(it);const st=s.length/3,It=O.generateSideWallUV(r,s,st-6,st-3,st-2,st-1);at(It[0]),at(It[1]),at(It[3]),at(It[1]),at(It[2]),at(It[3])}function ft(Ge){s.push(h[Ge*3+0]),s.push(h[Ge*3+1]),s.push(h[Ge*3+2])}function at(Ge){o.push(Ge.x),o.push(Ge.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return YCe(t,r,e)}static fromJSON(e,t){const r=[];for(let o=0,l=e.shapes.length;o<l;o++){const u=t[e.shapes[o]];r.push(u)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new T4[s.type]().fromJSON(s)),new Ww(r,e.options)}}const jCe={generateTopUV:function(n,e,t,r,s){const o=e[t*3],l=e[t*3+1],u=e[r*3],h=e[r*3+1],f=e[s*3],g=e[s*3+1];return[new Kt(o,l),new Kt(u,h),new Kt(f,g)]},generateSideWallUV:function(n,e,t,r,s,o){const l=e[t*3],u=e[t*3+1],h=e[t*3+2],f=e[r*3],g=e[r*3+1],y=e[r*3+2],b=e[s*3],S=e[s*3+1],C=e[s*3+2],M=e[o*3],A=e[o*3+1],k=e[o*3+2];return Math.abs(u-g)<Math.abs(l-f)?[new Kt(l,1-h),new Kt(f,1-y),new Kt(b,1-C),new Kt(M,1-k)]:[new Kt(u,1-h),new Kt(g,1-y),new Kt(S,1-C),new Kt(A,1-k)]}};function YCe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,s=n.length;r<s;r++){const o=n[r];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Vw extends yv{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,s=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Vw(e.radius,e.detail)}}class o0 extends yv{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new o0(e.radius,e.detail)}}class jw extends ui{constructor(e=.5,t=1,r=8,s=1,o=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:s,thetaStart:o,thetaLength:l},r=Math.max(3,r),s=Math.max(1,s);const u=[],h=[],f=[],g=[];let y=e;const b=(t-e)/s,S=new Me,C=new Kt;for(let M=0;M<=s;M++){for(let A=0;A<=r;A++){const k=o+A/r*l;S.x=y*Math.cos(k),S.y=y*Math.sin(k),h.push(S.x,S.y,S.z),f.push(0,0,1),C.x=(S.x/t+1)/2,C.y=(S.y/t+1)/2,g.push(C.x,C.y)}y+=b}for(let M=0;M<s;M++){const A=M*(r+1);for(let k=0;k<r;k++){const O=k+A,P=O,D=O+r+1,U=O+r+2,H=O+1;u.push(P,D,H),u.push(D,U,H)}}this.setIndex(u),this.setAttribute("position",new ur(h,3)),this.setAttribute("normal",new ur(f,3)),this.setAttribute("uv",new ur(g,2))}static fromJSON(e){return new jw(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Yw extends ui{constructor(e=new H1([new Kt(0,.5),new Kt(-.5,-.5),new Kt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],s=[],o=[],l=[];let u=0,h=0;if(Array.isArray(e)===!1)f(e);else for(let g=0;g<e.length;g++)f(e[g]),this.addGroup(u,h,g),u+=h,h=0;this.setIndex(r),this.setAttribute("position",new ur(s,3)),this.setAttribute("normal",new ur(o,3)),this.setAttribute("uv",new ur(l,2));function f(g){const y=s.length/3,b=g.extractPoints(t);let S=b.shape;const C=b.holes;fv.isClockWise(S)===!1&&(S=S.reverse());for(let A=0,k=C.length;A<k;A++){const O=C[A];fv.isClockWise(O)===!0&&(C[A]=O.reverse())}const M=fv.triangulateShape(S,C);for(let A=0,k=C.length;A<k;A++){const O=C[A];S=S.concat(O)}for(let A=0,k=S.length;A<k;A++){const O=S[A];s.push(O.x,O.y,0),o.push(0,0,1),l.push(O.x,O.y)}for(let A=0,k=M.length;A<k;A++){const O=M[A],P=O[0]+y,D=O[1]+y,U=O[2]+y;r.push(P,D,U),h+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return XCe(t,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];r.push(l)}return new Yw(r,e.curveSegments)}}function XCe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const s=n[t];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return e}class f0 extends ui{constructor(e=1,t=32,r=16,s=0,o=Math.PI*2,l=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:s,phiLength:o,thetaStart:l,thetaLength:u},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const h=Math.min(l+u,Math.PI);let f=0;const g=[],y=new Me,b=new Me,S=[],C=[],M=[],A=[];for(let k=0;k<=r;k++){const O=[],P=k/r;let D=0;k==0&&l==0?D=.5/t:k==r&&h==Math.PI&&(D=-.5/t);for(let U=0;U<=t;U++){const H=U/t;y.x=-e*Math.cos(s+H*o)*Math.sin(l+P*u),y.y=e*Math.cos(l+P*u),y.z=e*Math.sin(s+H*o)*Math.sin(l+P*u),C.push(y.x,y.y,y.z),b.copy(y).normalize(),M.push(b.x,b.y,b.z),A.push(H+D,1-P),O.push(f++)}g.push(O)}for(let k=0;k<r;k++)for(let O=0;O<t;O++){const P=g[k][O+1],D=g[k][O],U=g[k+1][O],H=g[k+1][O+1];(k!==0||l>0)&&S.push(P,D,H),(k!==r-1||h<Math.PI)&&S.push(D,U,H)}this.setIndex(S),this.setAttribute("position",new ur(C,3)),this.setAttribute("normal",new ur(M,3)),this.setAttribute("uv",new ur(A,2))}static fromJSON(e){return new f0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Xw extends yv{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Xw(e.radius,e.detail)}}class r0 extends ui{constructor(e=1,t=.4,r=8,s=6,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:s,arc:o},r=Math.floor(r),s=Math.floor(s);const l=[],u=[],h=[],f=[],g=new Me,y=new Me,b=new Me;for(let S=0;S<=r;S++)for(let C=0;C<=s;C++){const M=C/s*o,A=S/r*Math.PI*2;y.x=(e+t*Math.cos(A))*Math.cos(M),y.y=(e+t*Math.cos(A))*Math.sin(M),y.z=t*Math.sin(A),u.push(y.x,y.y,y.z),g.x=e*Math.cos(M),g.y=e*Math.sin(M),b.subVectors(y,g).normalize(),h.push(b.x,b.y,b.z),f.push(C/s),f.push(S/r)}for(let S=1;S<=r;S++)for(let C=1;C<=s;C++){const M=(s+1)*S+C-1,A=(s+1)*(S-1)+C-1,k=(s+1)*(S-1)+C,O=(s+1)*S+C;l.push(M,A,O),l.push(A,k,O)}this.setIndex(l),this.setAttribute("position",new ur(u,3)),this.setAttribute("normal",new ur(h,3)),this.setAttribute("uv",new ur(f,2))}static fromJSON(e){return new r0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Kw extends ui{constructor(e=1,t=.4,r=64,s=8,o=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:s,p:o,q:l},r=Math.floor(r),s=Math.floor(s);const u=[],h=[],f=[],g=[],y=new Me,b=new Me,S=new Me,C=new Me,M=new Me,A=new Me,k=new Me;for(let P=0;P<=r;++P){const D=P/r*o*Math.PI*2;O(D,o,l,e,S),O(D+.01,o,l,e,C),A.subVectors(C,S),k.addVectors(C,S),M.crossVectors(A,k),k.crossVectors(M,A),M.normalize(),k.normalize();for(let U=0;U<=s;++U){const H=U/s*Math.PI*2,V=-t*Math.cos(H),z=t*Math.sin(H);y.x=S.x+(V*k.x+z*M.x),y.y=S.y+(V*k.y+z*M.y),y.z=S.z+(V*k.z+z*M.z),h.push(y.x,y.y,y.z),b.subVectors(y,S).normalize(),f.push(b.x,b.y,b.z),g.push(P/r),g.push(U/s)}}for(let P=1;P<=r;P++)for(let D=1;D<=s;D++){const U=(s+1)*(P-1)+(D-1),H=(s+1)*P+(D-1),V=(s+1)*P+D,z=(s+1)*(P-1)+D;u.push(U,H,z),u.push(H,V,z)}this.setIndex(u),this.setAttribute("position",new ur(h,3)),this.setAttribute("normal",new ur(f,3)),this.setAttribute("uv",new ur(g,2));function O(P,D,U,H,V){const z=Math.cos(P),Z=Math.sin(P),oe=U/D*P,ue=Math.cos(oe);V.x=H*(2+ue)*.5*z,V.y=H*(2+ue)*Z*.5,V.z=H*Math.sin(oe)*.5}}static fromJSON(e){return new Kw(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Jw extends ui{constructor(e=new y4(new Me(-1,-1,0),new Me(-1,1,0),new Me(1,1,0)),t=64,r=1,s=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:s,closed:o};const l=e.computeFrenetFrames(t,o);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const u=new Me,h=new Me,f=new Kt;let g=new Me;const y=[],b=[],S=[],C=[];M(),this.setIndex(C),this.setAttribute("position",new ur(y,3)),this.setAttribute("normal",new ur(b,3)),this.setAttribute("uv",new ur(S,2));function M(){for(let P=0;P<t;P++)A(P);A(o===!1?t:0),O(),k()}function A(P){g=e.getPointAt(P/t,g);const D=l.normals[P],U=l.binormals[P];for(let H=0;H<=s;H++){const V=H/s*Math.PI*2,z=Math.sin(V),Z=-Math.cos(V);h.x=Z*D.x+z*U.x,h.y=Z*D.y+z*U.y,h.z=Z*D.z+z*U.z,h.normalize(),b.push(h.x,h.y,h.z),u.x=g.x+r*h.x,u.y=g.y+r*h.y,u.z=g.z+r*h.z,y.push(u.x,u.y,u.z)}}function k(){for(let P=1;P<=t;P++)for(let D=1;D<=s;D++){const U=(s+1)*(P-1)+(D-1),H=(s+1)*P+(D-1),V=(s+1)*P+D,z=(s+1)*(P-1)+D;C.push(U,H,z),C.push(H,V,z)}}function O(){for(let P=0;P<=t;P++)for(let D=0;D<=s;D++)f.x=P/t,f.y=D/s,S.push(f.x,f.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Jw(new T4[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class S4 extends ui{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,s=new Me,o=new Me;if(e.index!==null){const l=e.attributes.position,u=e.index;let h=e.groups;h.length===0&&(h=[{start:0,count:u.count,materialIndex:0}]);for(let f=0,g=h.length;f<g;++f){const y=h[f],b=y.start,S=y.count;for(let C=b,M=b+S;C<M;C+=3)for(let A=0;A<3;A++){const k=u.getX(C+A),O=u.getX(C+(A+1)%3);s.fromBufferAttribute(l,k),o.fromBufferAttribute(l,O),R6(s,o,r)===!0&&(t.push(s.x,s.y,s.z),t.push(o.x,o.y,o.z))}}}else{const l=e.attributes.position;for(let u=0,h=l.count/3;u<h;u++)for(let f=0;f<3;f++){const g=3*u+f,y=3*u+(f+1)%3;s.fromBufferAttribute(l,g),o.fromBufferAttribute(l,y),R6(s,o,r)===!0&&(t.push(s.x,s.y,s.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new ur(t,3))}}}function R6(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(s)===!0?!1:(t.add(r),t.add(s),!0)}var k6=Object.freeze({__proto__:null,BoxGeometry:mu,BoxBufferGeometry:mu,CapsuleGeometry:zw,CapsuleBufferGeometry:zw,CircleGeometry:Uw,CircleBufferGeometry:Uw,ConeGeometry:Hw,ConeBufferGeometry:Hw,CylinderGeometry:Wl,CylinderBufferGeometry:Wl,DodecahedronGeometry:Gw,DodecahedronBufferGeometry:Gw,EdgesGeometry:lZ,ExtrudeGeometry:Ww,ExtrudeBufferGeometry:Ww,IcosahedronGeometry:Vw,IcosahedronBufferGeometry:Vw,LatheGeometry:rT,LatheBufferGeometry:rT,OctahedronGeometry:o0,OctahedronBufferGeometry:o0,PlaneGeometry:d0,PlaneBufferGeometry:d0,PolyhedronGeometry:yv,PolyhedronBufferGeometry:yv,RingGeometry:jw,RingBufferGeometry:jw,ShapeGeometry:Yw,ShapeBufferGeometry:Yw,SphereGeometry:f0,SphereBufferGeometry:f0,TetrahedronGeometry:Xw,TetrahedronBufferGeometry:Xw,TorusGeometry:r0,TorusBufferGeometry:r0,TorusKnotGeometry:Kw,TorusKnotBufferGeometry:Kw,TubeGeometry:Jw,TubeBufferGeometry:Jw,WireframeGeometry:S4});class dZ extends hd{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Fn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class fZ extends xd{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class q$ extends hd{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Fn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fT,this.normalScale=new Kt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pZ extends q${constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Kt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return dh(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Fn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Fn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Fn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class mZ extends hd{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Fn(16777215),this.specular=new Fn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fT,this.normalScale=new Kt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class gZ extends hd{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Fn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fT,this.normalScale=new Kt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class w4 extends hd{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fT,this.normalScale=new Kt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class vZ extends hd{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Fn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class _Z extends hd{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Fn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fT,this.normalScale=new Kt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yZ extends Bf{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function pg(n,e,t){return E4(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function R1(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function E4(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function bZ(n){function e(s,o){return n[s]-n[o]}const t=n.length,r=new Array(t);for(let s=0;s!==t;++s)r[s]=s;return r.sort(e),r}function GP(n,e,t){const r=n.length,s=new n.constructor(r);for(let o=0,l=0;l!==r;++o){const u=t[o]*e;for(let h=0;h!==e;++h)s[l++]=n[u+h]}return s}function x4(n,e,t,r){let s=1,o=n[0];for(;o!==void 0&&o[r]===void 0;)o=n[s++];if(o===void 0)return;let l=o[r];if(l!==void 0)if(Array.isArray(l))do l=o[r],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=n[s++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[r],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=n[s++];while(o!==void 0);else do l=o[r],l!==void 0&&(e.push(o.time),t.push(l)),o=n[s++];while(o!==void 0)}function KCe(n,e,t,r,s=30){const o=n.clone();o.name=e;const l=[];for(let h=0;h<o.tracks.length;++h){const f=o.tracks[h],g=f.getValueSize(),y=[],b=[];for(let S=0;S<f.times.length;++S){const C=f.times[S]*s;if(!(C<t||C>=r)){y.push(f.times[S]);for(let M=0;M<g;++M)b.push(f.values[S*g+M])}}y.length!==0&&(f.times=R1(y,f.times.constructor),f.values=R1(b,f.values.constructor),l.push(f))}o.tracks=l;let u=1/0;for(let h=0;h<o.tracks.length;++h)u>o.tracks[h].times[0]&&(u=o.tracks[h].times[0]);for(let h=0;h<o.tracks.length;++h)o.tracks[h].shift(-1*u);return o.resetDuration(),o}function JCe(n,e=0,t=n,r=30){r<=0&&(r=30);const s=t.tracks.length,o=e/r;for(let l=0;l<s;++l){const u=t.tracks[l],h=u.ValueTypeName;if(h==="bool"||h==="string")continue;const f=n.tracks.find(function(k){return k.name===u.name&&k.ValueTypeName===h});if(f===void 0)continue;let g=0;const y=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);let b=0;const S=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=S/3);const C=u.times.length-1;let M;if(o<=u.times[0]){const k=g,O=y-g;M=pg(u.values,k,O)}else if(o>=u.times[C]){const k=C*y+g,O=k+y-g;M=pg(u.values,k,O)}else{const k=u.createInterpolant(),O=g,P=y-g;k.evaluate(o),M=pg(k.resultBuffer,O,P)}h==="quaternion"&&new wl().fromArray(M).normalize().conjugate().toArray(M);const A=f.times.length;for(let k=0;k<A;++k){const O=k*S+b;if(h==="quaternion")wl.multiplyQuaternionsFlat(f.values,O,M,0,f.values,O);else{const P=S-b*2;for(let D=0;D<P;++D)f.values[O+D]-=M[D]}}}return n.blendMode=o4,n}var qCe=Object.freeze({__proto__:null,arraySlice:pg,convertArray:R1,isTypedArray:E4,getKeyframeOrder:bZ,sortedArray:GP,flattenJSON:x4,subclip:KCe,makeClipAdditive:JCe});class BC{constructor(e,t,r,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,s=t[r],o=t[r-1];e:{t:{let l;n:{r:if(!(e<s)){for(let u=r+2;;){if(s===void 0){if(e<o)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===u)break;if(o=s,s=t[++r],e<s)break t}l=t.length;break n}if(!(e>=o)){const u=t[1];e<u&&(r=2,o=u);for(let h=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===h)break;if(s=o,o=t[--r-1],e>=o)break t}l=r,r=0;break n}break e}for(;r<l;){const u=r+l>>>1;e<t[u]?l=u:r=u+1}if(s=t[r],o=t[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,s)}return this.interpolate_(r,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,s=this.valueSize,o=e*s;for(let l=0;l!==s;++l)t[l]=r[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class TZ extends BC{constructor(e,t,r,s){super(e,t,r,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:M1,endingEnd:M1}}intervalChanged_(e,t,r){const s=this.parameterPositions;let o=e-2,l=e+1,u=s[o],h=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case A1:o=e,u=2*t-r;break;case H$:o=s.length-2,u=t+s[o]-s[o+1];break;default:o=e,u=r}if(h===void 0)switch(this.getSettings_().endingEnd){case A1:l=e,h=2*r-t;break;case H$:l=1,h=r+s[1]-s[0];break;default:l=e-1,h=t}const f=(r-t)*.5,g=this.valueSize;this._weightPrev=f/(t-u),this._weightNext=f/(h-r),this._offsetPrev=o*g,this._offsetNext=l*g}interpolate_(e,t,r,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,f=h-u,g=this._offsetPrev,y=this._offsetNext,b=this._weightPrev,S=this._weightNext,C=(r-t)/(s-t),M=C*C,A=M*C,k=-b*A+2*b*M-b*C,O=(1+b)*A+(-1.5-2*b)*M+(-.5+b)*C+1,P=(-1-S)*A+(1.5+S)*M+.5*C,D=S*A-S*M;for(let U=0;U!==u;++U)o[U]=k*l[g+U]+O*l[f+U]+P*l[h+U]+D*l[y+U];return o}}class $4 extends BC{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e,t,r,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,f=h-u,g=(r-t)/(s-t),y=1-g;for(let b=0;b!==u;++b)o[b]=l[f+b]*y+l[h+b]*g;return o}}class SZ extends BC{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class v0{constructor(e,t,r,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=R1(t,this.TimeBufferType),this.values=R1(r,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:R1(e.times,Array),values:R1(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(r.interpolation=s)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new SZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new $4(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new TZ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case z$:t=this.InterpolantFactoryMethodDiscrete;break;case U$:t=this.InterpolantFactoryMethodLinear;break;case $I:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return z$;case this.InterpolantFactoryMethodLinear:return U$;case this.InterpolantFactoryMethodSmooth:return $I}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,s=t.length;r!==s;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,s=t.length;r!==s;++r)t[r]*=e}return this}trim(e,t){const r=this.times,s=r.length;let o=0,l=s-1;for(;o!==s&&r[o]<e;)++o;for(;l!==-1&&r[l]>t;)--l;if(++l,o!==0||l!==s){o>=l&&(l=Math.max(l,1),o=l-1);const u=this.getValueSize();this.times=pg(r,o,l),this.values=pg(this.values,o*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,s=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==o;u++){const h=r[u];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,h),e=!1;break}if(l!==null&&l>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,h,l),e=!1;break}l=h}if(s!==void 0&&E4(s))for(let u=0,h=s.length;u!==h;++u){const f=s[u];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,f),e=!1;break}}return e}optimize(){const e=pg(this.times),t=pg(this.values),r=this.getValueSize(),s=this.getInterpolation()===$I,o=e.length-1;let l=1;for(let u=1;u<o;++u){let h=!1;const f=e[u],g=e[u+1];if(f!==g&&(u!==1||f!==e[0]))if(s)h=!0;else{const y=u*r,b=y-r,S=y+r;for(let C=0;C!==r;++C){const M=t[y+C];if(M!==t[b+C]||M!==t[S+C]){h=!0;break}}}if(h){if(u!==l){e[l]=e[u];const y=u*r,b=l*r;for(let S=0;S!==r;++S)t[b+S]=t[y+S]}++l}}if(o>0){e[l]=e[o];for(let u=o*r,h=l*r,f=0;f!==r;++f)t[h+f]=t[u+f];++l}return l!==e.length?(this.times=pg(e,0,l),this.values=pg(t,0,l*r)):(this.times=e,this.values=t),this}clone(){const e=pg(this.times,0),t=pg(this.values,0),r=this.constructor,s=new r(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}v0.prototype.TimeBufferType=Float32Array;v0.prototype.ValueBufferType=Float32Array;v0.prototype.DefaultInterpolation=U$;class mT extends v0{}mT.prototype.ValueTypeName="bool";mT.prototype.ValueBufferType=Array;mT.prototype.DefaultInterpolation=z$;mT.prototype.InterpolantFactoryMethodLinear=void 0;mT.prototype.InterpolantFactoryMethodSmooth=void 0;class C4 extends v0{}C4.prototype.ValueTypeName="color";class Q$ extends v0{}Q$.prototype.ValueTypeName="number";class wZ extends BC{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e,t,r,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=(r-t)/(s-t);let f=e*u;for(let g=f+u;f!==g;f+=4)wl.slerpFlat(o,0,l,f-u,l,f,h);return o}}class yE extends v0{InterpolantFactoryMethodLinear(e){return new wZ(this.times,this.values,this.getValueSize(),e)}}yE.prototype.ValueTypeName="quaternion";yE.prototype.DefaultInterpolation=U$;yE.prototype.InterpolantFactoryMethodSmooth=void 0;class gT extends v0{}gT.prototype.ValueTypeName="string";gT.prototype.ValueBufferType=Array;gT.prototype.DefaultInterpolation=z$;gT.prototype.InterpolantFactoryMethodLinear=void 0;gT.prototype.InterpolantFactoryMethodSmooth=void 0;class Z$ extends v0{}Z$.prototype.ValueTypeName="vector";class eC{constructor(e,t=-1,r,s=h2){this.name=e,this.tracks=r,this.duration=t,this.blendMode=s,this.uuid=Bm(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,s=1/(e.fps||1);for(let l=0,u=r.length;l!==u;++l)t.push(ZCe(r[l]).scale(s));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],r=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=r.length;o!==l;++o)t.push(v0.toJSON(r[o]));return s}static CreateFromMorphTargetSequence(e,t,r,s){const o=t.length,l=[];for(let u=0;u<o;u++){let h=[],f=[];h.push((u+o-1)%o,u,(u+1)%o),f.push(0,1,0);const g=bZ(h);h=GP(h,1,g),f=GP(f,1,g),!s&&h[0]===0&&(h.push(o),f.push(f[0])),l.push(new Q$(".morphTargetInfluences["+t[u].name+"]",h,f).scale(1/r))}return new this(e,-1,l)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const s=e;r=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<r.length;s++)if(r[s].name===t)return r[s];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const s={},o=/^([\w-]*?)([\d]+)$/;for(let u=0,h=e.length;u<h;u++){const f=e[u],g=f.name.match(o);if(g&&g.length>1){const y=g[1];let b=s[y];b||(s[y]=b=[]),b.push(f)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],t,r));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(g,y,b,S,C){if(b.length!==0){const M=[],A=[];x4(b,M,A,S),M.length!==0&&C.push(new g(y,M,A))}},s=[],o=e.name||"default",l=e.fps||30,u=e.blendMode;let h=e.length||-1;const f=e.hierarchy||[];for(let g=0;g<f.length;g++){const y=f[g].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const b={};let S;for(S=0;S<y.length;S++)if(y[S].morphTargets)for(let C=0;C<y[S].morphTargets.length;C++)b[y[S].morphTargets[C]]=-1;for(const C in b){const M=[],A=[];for(let k=0;k!==y[S].morphTargets.length;++k){const O=y[S];M.push(O.time),A.push(O.morphTarget===C?1:0)}s.push(new Q$(".morphTargetInfluence["+C+"]",M,A))}h=b.length*l}else{const b=".bones["+t[g].name+"]";r(Z$,b+".position",y,"pos",s),r(yE,b+".quaternion",y,"rot",s),r(Z$,b+".scale",y,"scl",s)}}return s.length===0?null:new this(o,h,s,u)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,s=e.length;r!==s;++r){const o=this.tracks[r];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function QCe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Q$;case"vector":case"vector2":case"vector3":case"vector4":return Z$;case"color":return C4;case"quaternion":return yE;case"bool":case"boolean":return mT;case"string":return gT}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function ZCe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=QCe(n.type);if(n.times===void 0){const t=[],r=[];x4(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const iT={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class M4{constructor(e,t,r){const s=this;let o=!1,l=0,u=0,h;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(g){u++,o===!1&&s.onStart!==void 0&&s.onStart(g,l,u),o=!0},this.itemEnd=function(g){l++,s.onProgress!==void 0&&s.onProgress(g,l,u),l===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(g){s.onError!==void 0&&s.onError(g)},this.resolveURL=function(g){return h?h(g):g},this.setURLModifier=function(g){return h=g,this},this.addHandler=function(g,y){return f.push(g,y),this},this.removeHandler=function(g){const y=f.indexOf(g);return y!==-1&&f.splice(y,2),this},this.getHandler=function(g){for(let y=0,b=f.length;y<b;y+=2){const S=f[y],C=f[y+1];if(S.global&&(S.lastIndex=0),S.test(g))return C}return null}}}const EZ=new M4;class Xm{constructor(e){this.manager=e!==void 0?e:EZ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(s,o){r.load(e,s,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const a_={};class eMe extends Error{constructor(e,t){super(e),this.response=t}}class x_ extends Xm{constructor(e){super(e)}load(e,t,r,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=iT.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(a_[e]!==void 0){a_[e].push({onLoad:t,onProgress:r,onError:s});return}a_[e]=[],a_[e].push({onLoad:t,onProgress:r,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,h=this.responseType;fetch(l).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const g=a_[e],y=f.body.getReader(),b=f.headers.get("Content-Length"),S=b?parseInt(b):0,C=S!==0;let M=0;const A=new ReadableStream({start(k){O();function O(){y.read().then(({done:P,value:D})=>{if(P)k.close();else{M+=D.byteLength;const U=new ProgressEvent("progress",{lengthComputable:C,loaded:M,total:S});for(let H=0,V=g.length;H<V;H++){const z=g[H];z.onProgress&&z.onProgress(U)}k.enqueue(D),O()}})}}});return new Response(A)}else throw new eMe(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(h){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(g=>new DOMParser().parseFromString(g,u));case"json":return f.json();default:if(u===void 0)return f.text();{const g=/charset="?([^;"\s]*)"?/i.exec(u),y=g&&g[1]?g[1].toLowerCase():void 0,b=new TextDecoder(y);return f.arrayBuffer().then(S=>b.decode(S))}}}).then(f=>{iT.add(e,f);const g=a_[e];delete a_[e];for(let y=0,b=g.length;y<b;y++){const S=g[y];S.onLoad&&S.onLoad(f)}}).catch(f=>{const g=a_[e];if(g===void 0)throw this.manager.itemError(e),f;delete a_[e];for(let y=0,b=g.length;y<b;y++){const S=g[y];S.onError&&S.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class tMe extends Xm{constructor(e){super(e)}load(e,t,r,s){const o=this,l=new x_(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},r,s)}parse(e){const t=[];for(let r=0;r<e.length;r++){const s=eC.parse(e[r]);t.push(s)}return t}}class nMe extends Xm{constructor(e){super(e)}load(e,t,r,s){const o=this,l=[],u=new nZ,h=new x_(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(o.withCredentials);let f=0;function g(y){h.load(e[y],function(b){const S=o.parse(b,!0);l[y]={width:S.width,height:S.height,format:S.format,mipmaps:S.mipmaps},f+=1,f===6&&(S.mipmapCount===1&&(u.minFilter=El),u.image=l,u.format=S.format,u.needsUpdate=!0,t&&t(u))},r,s)}if(Array.isArray(e))for(let y=0,b=e.length;y<b;++y)g(y);else h.load(e,function(y){const b=o.parse(y,!0);if(b.isCubemap){const S=b.mipmaps.length/b.mipmapCount;for(let C=0;C<S;C++){l[C]={mipmaps:[]};for(let M=0;M<b.mipmapCount;M++)l[C].mipmaps.push(b.mipmaps[C*b.mipmapCount+M]),l[C].format=b.format,l[C].width=b.width,l[C].height=b.height}u.image=l}else u.image.width=b.width,u.image.height=b.height,u.mipmaps=b.mipmaps;b.mipmapCount===1&&(u.minFilter=El),u.format=b.format,u.needsUpdate=!0,t&&t(u)},r,s);return u}}class tC extends Xm{constructor(e){super(e)}load(e,t,r,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=iT.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u=V$("img");function h(){g(),iT.add(e,this),t&&t(this),o.manager.itemEnd(e)}function f(y){g(),s&&s(y),o.manager.itemError(e),o.manager.itemEnd(e)}function g(){u.removeEventListener("load",h,!1),u.removeEventListener("error",f,!1)}return u.addEventListener("load",h,!1),u.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(e),u.src=e,u}}class rMe extends Xm{constructor(e){super(e)}load(e,t,r,s){const o=new DC,l=new tC(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let u=0;function h(f){l.load(e[f],function(g){o.images[f]=g,u++,u===6&&(o.needsUpdate=!0,t&&t(o))},void 0,s)}for(let f=0;f<e.length;++f)h(f);return o}}class iMe extends Xm{constructor(e){super(e)}load(e,t,r,s){const o=this,l=new Tw,u=new x_(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(o.withCredentials),u.load(e,function(h){const f=o.parse(h);!f||(f.image!==void 0?l.image=f.image:f.data!==void 0&&(l.image.width=f.width,l.image.height=f.height,l.image.data=f.data),l.wrapS=f.wrapS!==void 0?f.wrapS:lp,l.wrapT=f.wrapT!==void 0?f.wrapT:lp,l.magFilter=f.magFilter!==void 0?f.magFilter:El,l.minFilter=f.minFilter!==void 0?f.minFilter:El,l.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.encoding!==void 0&&(l.encoding=f.encoding),f.flipY!==void 0&&(l.flipY=f.flipY),f.format!==void 0&&(l.format=f.format),f.type!==void 0&&(l.type=f.type),f.mipmaps!==void 0&&(l.mipmaps=f.mipmaps,l.minFilter=dT),f.mipmapCount===1&&(l.minFilter=El),f.generateMipmaps!==void 0&&(l.generateMipmaps=f.generateMipmaps),l.needsUpdate=!0,t&&t(l,f))},r,s),l}}class sMe extends Xm{constructor(e){super(e)}load(e,t,r,s){const o=new dc,l=new tC(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){o.image=u,o.needsUpdate=!0,t!==void 0&&t(o)},r,s),o}}class sb extends oo{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Fn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class xZ extends sb{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(oo.DefaultUp),this.updateMatrix(),this.groundColor=new Fn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const O6=new ei,L6=new Me,N6=new Me;class A4{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Kt(512,512),this.map=null,this.mapPass=null,this.matrix=new ei,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new f2,this._frameExtents=new Kt(1,1),this._viewportCount=1,this._viewports=[new Ts(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;L6.setFromMatrixPosition(e.matrixWorld),t.position.copy(L6),N6.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(N6),t.updateMatrixWorld(),O6.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(O6),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class oMe extends A4{constructor(){super(new el(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=W$*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(r!==t.fov||s!==t.aspect||o!==t.far)&&(t.fov=r,t.aspect=s,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class $Z extends sb{constructor(e,t,r=0,s=Math.PI/3,o=0,l=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(oo.DefaultUp),this.updateMatrix(),this.target=new oo,this.distance=r,this.angle=s,this.penumbra=o,this.decay=l,this.shadow=new oMe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const D6=new ei,vx=new Me,tN=new Me;class aMe extends A4{constructor(){super(new el(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Kt(4,2),this._viewportCount=6,this._viewports=[new Ts(2,1,1,1),new Ts(0,1,1,1),new Ts(3,1,1,1),new Ts(1,1,1,1),new Ts(3,0,1,1),new Ts(1,0,1,1)],this._cubeDirections=[new Me(1,0,0),new Me(-1,0,0),new Me(0,0,1),new Me(0,0,-1),new Me(0,1,0),new Me(0,-1,0)],this._cubeUps=[new Me(0,1,0),new Me(0,1,0),new Me(0,1,0),new Me(0,1,0),new Me(0,0,1),new Me(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,s=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),vx.setFromMatrixPosition(e.matrixWorld),r.position.copy(vx),tN.copy(r.position),tN.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(tN),r.updateMatrixWorld(),s.makeTranslation(-vx.x,-vx.y,-vx.z),D6.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(D6)}}class CZ extends sb{constructor(e,t,r=0,s=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=s,this.shadow=new aMe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class lMe extends A4{constructor(){super(new dv(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class MZ extends sb{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(oo.DefaultUp),this.updateMatrix(),this.target=new oo,this.shadow=new lMe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class AZ extends sb{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class IZ extends sb{constructor(e,t,r=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class RZ{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Me)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,s=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*s),t.addScaledVector(l[2],.488603*o),t.addScaledVector(l[3],.488603*r),t.addScaledVector(l[4],1.092548*(r*s)),t.addScaledVector(l[5],1.092548*(s*o)),t.addScaledVector(l[6],.315392*(3*o*o-1)),t.addScaledVector(l[7],1.092548*(r*o)),t.addScaledVector(l[8],.546274*(r*r-s*s)),t}getIrradianceAt(e,t){const r=e.x,s=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*s),t.addScaledVector(l[2],2*.511664*o),t.addScaledVector(l[3],2*.511664*r),t.addScaledVector(l[4],2*.429043*r*s),t.addScaledVector(l[5],2*.429043*s*o),t.addScaledVector(l[6],.743125*o*o-.247708),t.addScaledVector(l[7],2*.429043*r*o),t.addScaledVector(l[8],.429043*(r*r-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const r=e.x,s=e.y,o=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*o,t[3]=.488603*r,t[4]=1.092548*r*s,t[5]=1.092548*s*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*r*o,t[8]=.546274*(r*r-s*s)}}class E2 extends sb{constructor(e=new RZ,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class x2 extends Xm{constructor(e){super(e),this.textures={}}load(e,t,r,s){const o=this,l=new x_(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},r,s)}parse(e){const t=this.textures;function r(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}const s=x2.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new Fn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==1&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const l=e.uniforms[o];switch(s.uniforms[o]={},l.type){case"t":s.uniforms[o].value=r(l.value);break;case"c":s.uniforms[o].value=new Fn().setHex(l.value);break;case"v2":s.uniforms[o].value=new Kt().fromArray(l.value);break;case"v3":s.uniforms[o].value=new Me().fromArray(l.value);break;case"v4":s.uniforms[o].value=new Ts().fromArray(l.value);break;case"m3":s.uniforms[o].value=new cp().fromArray(l.value);break;case"m4":s.uniforms[o].value=new ei().fromArray(l.value);break;default:s.uniforms[o].value=l.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const o in e.extensions)s.extensions[o]=e.extensions[o];if(e.shading!==void 0&&(s.flatShading=e.shading===1),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=r(e.map)),e.matcap!==void 0&&(s.matcap=r(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),s.normalScale=new Kt().fromArray(o)}return e.displacementMap!==void 0&&(s.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Kt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=r(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:dZ,SpriteMaterial:p4,RawShaderMaterial:fZ,ShaderMaterial:xd,PointsMaterial:b2,MeshPhysicalMaterial:pZ,MeshStandardMaterial:q$,MeshPhongMaterial:mZ,MeshToonMaterial:gZ,MeshNormalMaterial:w4,MeshLambertMaterial:vZ,MeshDepthMaterial:PC,MeshDistanceMaterial:m2,MeshBasicMaterial:m0,MeshMatcapMaterial:_Z,LineDashedMaterial:yZ,LineBasicMaterial:Bf,Material:hd};return new t[e]}}class WP{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,s=e.length;r<s;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class $2 extends ui{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class kZ extends Xm{constructor(e){super(e)}load(e,t,r,s){const o=this,l=new x_(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},r,s)}parse(e){const t={},r={};function s(b,S){if(t[S]!==void 0)return t[S];const C=b.interleavedBuffers[S],M=o(b,C.buffer),A=nw(C.type,M),k=new _2(A,C.stride);return k.uuid=C.uuid,t[S]=k,k}function o(b,S){if(r[S]!==void 0)return r[S];const C=b.arrayBuffers[S],M=new Uint32Array(C).buffer;return r[S]=M,M}const l=e.isInstancedBufferGeometry?new $2:new ui,u=e.data.index;if(u!==void 0){const b=nw(u.type,u.array);l.setIndex(new zo(b,1))}const h=e.data.attributes;for(const b in h){const S=h[b];let C;if(S.isInterleavedBufferAttribute){const M=s(e.data,S.data);C=new Om(M,S.itemSize,S.offset,S.normalized)}else{const M=nw(S.type,S.array),A=S.isInstancedBufferAttribute?nT:zo;C=new A(M,S.itemSize,S.normalized)}S.name!==void 0&&(C.name=S.name),S.usage!==void 0&&C.setUsage(S.usage),S.updateRange!==void 0&&(C.updateRange.offset=S.updateRange.offset,C.updateRange.count=S.updateRange.count),l.setAttribute(b,C)}const f=e.data.morphAttributes;if(f)for(const b in f){const S=f[b],C=[];for(let M=0,A=S.length;M<A;M++){const k=S[M];let O;if(k.isInterleavedBufferAttribute){const P=s(e.data,k.data);O=new Om(P,k.itemSize,k.offset,k.normalized)}else{const P=nw(k.type,k.array);O=new zo(P,k.itemSize,k.normalized)}k.name!==void 0&&(O.name=k.name),C.push(O)}l.morphAttributes[b]=C}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let b=0,S=g.length;b!==S;++b){const C=g[b];l.addGroup(C.start,C.count,C.materialIndex)}const y=e.data.boundingSphere;if(y!==void 0){const b=new Me;y.center!==void 0&&b.fromArray(y.center),l.boundingSphere=new xv(b,y.radius)}return e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class uMe extends Xm{constructor(e){super(e)}load(e,t,r,s){const o=this,l=this.path===""?WP.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const u=new x_(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){let f=null;try{f=JSON.parse(h)}catch(y){s!==void 0&&s(y),console.error("THREE:ObjectLoader: Can't parse "+e+".",y.message);return}const g=f.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(f,t)},r,s)}async loadAsync(e,t){const r=this,s=this.path===""?WP.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new x_(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const l=await o.loadAsync(e,t),u=JSON.parse(l),h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(u)}parse(e,t){const r=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,s),l=this.parseImages(e.images,function(){t!==void 0&&t(f)}),u=this.parseTextures(e.textures,l),h=this.parseMaterials(e.materials,u),f=this.parseObject(e.object,o,h,u,r),g=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,g),t!==void 0){let y=!1;for(const b in l)if(l[b].data instanceof HTMLImageElement){y=!0;break}y===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,s,u,l,t),f=this.parseSkeletons(e.skeletons,h);return this.bindSkeletons(h,f),h}parseShapes(e){const t={};if(e!==void 0)for(let r=0,s=e.length;r<s;r++){const o=new H1().fromJSON(e[r]);t[o.uuid]=o}return t}parseSkeletons(e,t){const r={},s={};if(t.traverse(function(o){o.isBone&&(s[o.uuid]=o)}),e!==void 0)for(let o=0,l=e.length;o<l;o++){const u=new y2().fromJSON(e[o],s);r[u.uuid]=u}return r}parseGeometries(e,t){const r={};if(e!==void 0){const s=new kZ;for(let o=0,l=e.length;o<l;o++){let u;const h=e[o];switch(h.type){case"BufferGeometry":case"InstancedBufferGeometry":u=s.parse(h);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:h.type in k6?u=k6[h.type].fromJSON(h,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${h.type}"`)}u.uuid=h.uuid,h.name!==void 0&&(u.name=h.name),u.isBufferGeometry===!0&&h.userData!==void 0&&(u.userData=h.userData),r[h.uuid]=u}}return r}parseMaterials(e,t){const r={},s={};if(e!==void 0){const o=new x2;o.setTextures(t);for(let l=0,u=e.length;l<u;l++){const h=e[l];if(h.type==="MultiMaterial"){const f=[];for(let g=0;g<h.materials.length;g++){const y=h.materials[g];r[y.uuid]===void 0&&(r[y.uuid]=o.parse(y)),f.push(r[y.uuid])}s[h.uuid]=f}else r[h.uuid]===void 0&&(r[h.uuid]=o.parse(h)),s[h.uuid]=r[h.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const s=e[r],o=eC.parse(s);t[o.uuid]=o}return t}parseImages(e,t){const r=this,s={};let o;function l(h){return r.manager.itemStart(h),o.load(h,function(){r.manager.itemEnd(h)},void 0,function(){r.manager.itemError(h),r.manager.itemEnd(h)})}function u(h){if(typeof h=="string"){const f=h,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:r.resourcePath+f;return l(g)}else return h.data?{data:nw(h.type,h.data),width:h.width,height:h.height}:null}if(e!==void 0&&e.length>0){const h=new M4(t);o=new tC(h),o.setCrossOrigin(this.crossOrigin);for(let f=0,g=e.length;f<g;f++){const y=e[f],b=y.url;if(Array.isArray(b)){const S=[];for(let C=0,M=b.length;C<M;C++){const A=b[C],k=u(A);k!==null&&(k instanceof HTMLImageElement?S.push(k):S.push(new Tw(k.data,k.width,k.height)))}s[y.uuid]=new I1(S)}else{const S=u(y.url);s[y.uuid]=new I1(S)}}}return s}async parseImagesAsync(e){const t=this,r={};let s;async function o(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:t.resourcePath+u;return await s.loadAsync(h)}else return l.data?{data:nw(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){s=new tC(this.manager),s.setCrossOrigin(this.crossOrigin);for(let l=0,u=e.length;l<u;l++){const h=e[l],f=h.url;if(Array.isArray(f)){const g=[];for(let y=0,b=f.length;y<b;y++){const S=f[y],C=await o(S);C!==null&&(C instanceof HTMLImageElement?g.push(C):g.push(new Tw(C.data,C.width,C.height)))}r[h.uuid]=new I1(g)}else{const g=await o(h.url);r[h.uuid]=new I1(g)}}}return r}parseTextures(e,t){function r(o,l){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),l[o])}const s={};if(e!==void 0)for(let o=0,l=e.length;o<l;o++){const u=e[o];u.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),t[u.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",u.image);const h=t[u.image],f=h.data;let g;Array.isArray(f)?(g=new DC,f.length===6&&(g.needsUpdate=!0)):(f&&f.data?g=new Tw:g=new dc,f&&(g.needsUpdate=!0)),g.source=h,g.uuid=u.uuid,u.name!==void 0&&(g.name=u.name),u.mapping!==void 0&&(g.mapping=r(u.mapping,cMe)),u.offset!==void 0&&g.offset.fromArray(u.offset),u.repeat!==void 0&&g.repeat.fromArray(u.repeat),u.center!==void 0&&g.center.fromArray(u.center),u.rotation!==void 0&&(g.rotation=u.rotation),u.wrap!==void 0&&(g.wrapS=r(u.wrap[0],P6),g.wrapT=r(u.wrap[1],P6)),u.format!==void 0&&(g.format=u.format),u.type!==void 0&&(g.type=u.type),u.encoding!==void 0&&(g.encoding=u.encoding),u.minFilter!==void 0&&(g.minFilter=r(u.minFilter,B6)),u.magFilter!==void 0&&(g.magFilter=r(u.magFilter,B6)),u.anisotropy!==void 0&&(g.anisotropy=u.anisotropy),u.flipY!==void 0&&(g.flipY=u.flipY),u.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(g.unpackAlignment=u.unpackAlignment),u.userData!==void 0&&(g.userData=u.userData),s[u.uuid]=g}return s}parseObject(e,t,r,s,o){let l;function u(b){return t[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",b),t[b]}function h(b){if(b!==void 0){if(Array.isArray(b)){const S=[];for(let C=0,M=b.length;C<M;C++){const A=b[C];r[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),S.push(r[A])}return S}return r[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),r[b]}}function f(b){return s[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",b),s[b]}let g,y;switch(e.type){case"Scene":l=new j$,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new Fn(e.background):l.background=f(e.background)),e.environment!==void 0&&(l.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new v2(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new g2(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":l=new el(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new dv(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new AZ(e.color,e.intensity);break;case"DirectionalLight":l=new MZ(e.color,e.intensity);break;case"PointLight":l=new CZ(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new IZ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new $Z(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":l=new xZ(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new E2().fromJSON(e);break;case"SkinnedMesh":g=u(e.geometry),y=h(e.material),l=new QQ(g,y),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":g=u(e.geometry),y=h(e.material),l=new Hn(g,y);break;case"InstancedMesh":g=u(e.geometry),y=h(e.material);const b=e.count,S=e.instanceMatrix,C=e.instanceColor;l=new ZQ(g,y,b),l.instanceMatrix=new nT(new Float32Array(S.array),16),C!==void 0&&(l.instanceColor=new nT(new Float32Array(C.array),C.itemSize));break;case"LOD":l=new qQ;break;case"Line":l=new Rf(u(e.geometry),h(e.material));break;case"LineLoop":l=new eZ(u(e.geometry),h(e.material));break;case"LineSegments":l=new $v(u(e.geometry),h(e.material));break;case"PointCloud":case"Points":l=new tZ(u(e.geometry),h(e.material));break;case"Sprite":l=new JQ(h(e.material));break;case"Group":l=new iw;break;case"Bone":l=new m4;break;default:l=new oo}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const b=e.children;for(let S=0;S<b.length;S++)l.add(this.parseObject(b[S],t,r,s,o))}if(e.animations!==void 0){const b=e.animations;for(let S=0;S<b.length;S++){const C=b[S];l.animations.push(o[C])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const b=e.levels;for(let S=0;S<b.length;S++){const C=b[S],M=l.getObjectByProperty("uuid",C.object);M!==void 0&&l.addLevel(M,C.distance)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const s=t[r.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(s,r.bindMatrix)}})}}const cMe={UVMapping:c2,CubeReflectionMapping:Vy,CubeRefractionMapping:jy,EquirectangularReflectionMapping:P$,EquirectangularRefractionMapping:B$,CubeUVReflectionMapping:gE},P6={RepeatWrapping:Pw,ClampToEdgeWrapping:lp,MirroredRepeatWrapping:F$},B6={NearestFilter:Vl,NearestMipmapNearestFilter:xR,NearestMipmapLinearFilter:$R,LinearFilter:El,LinearMipmapNearestFilter:i4,LinearMipmapLinearFilter:dT};class hMe extends Xm{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=iT.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader,fetch(e,u).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(h){iT.add(e,h),t&&t(h),o.manager.itemEnd(e)}).catch(function(h){s&&s(h),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}let xA;const I4={getContext:function(){return xA===void 0&&(xA=new(window.AudioContext||window.webkitAudioContext)),xA},setContext:function(n){xA=n}};class dMe extends Xm{constructor(e){super(e)}load(e,t,r,s){const o=this,l=new x_(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{const h=u.slice(0);I4.getContext().decodeAudioData(h,function(f){t(f)})}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},r,s)}}class fMe extends E2{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const s=new Fn().set(e),o=new Fn().set(t),l=new Me(s.r,s.g,s.b),u=new Me(o.r,o.g,o.b),h=Math.sqrt(Math.PI),f=h*Math.sqrt(.75);this.sh.coefficients[0].copy(l).add(u).multiplyScalar(h),this.sh.coefficients[1].copy(l).sub(u).multiplyScalar(f)}}class pMe extends E2{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new Fn().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const F6=new ei,z6=new ei,qb=new ei;class mMe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new el,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new el,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,qb.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(F1*t.fov*.5)/t.zoom;let l,u;z6.elements[12]=-r,F6.elements[12]=r,l=-o*t.aspect+s,u=o*t.aspect+s,qb.elements[0]=2*t.near/(u-l),qb.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(qb),l=-o*t.aspect-s,u=o*t.aspect-s,qb.elements[0]=2*t.near/(u-l),qb.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(qb)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(z6),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(F6)}}class R4{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=U6(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=U6();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function U6(){return(typeof performance>"u"?Date:performance).now()}const Qb=new Me,H6=new wl,gMe=new Me,Zb=new Me;class vMe extends oo{constructor(){super(),this.type="AudioListener",this.context=I4.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new R4}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Qb,H6,gMe),Zb.set(0,0,-1).applyQuaternion(H6),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Qb.x,s),t.positionY.linearRampToValueAtTime(Qb.y,s),t.positionZ.linearRampToValueAtTime(Qb.z,s),t.forwardX.linearRampToValueAtTime(Zb.x,s),t.forwardY.linearRampToValueAtTime(Zb.y,s),t.forwardZ.linearRampToValueAtTime(Zb.z,s),t.upX.linearRampToValueAtTime(r.x,s),t.upY.linearRampToValueAtTime(r.y,s),t.upZ.linearRampToValueAtTime(r.z,s)}else t.setPosition(Qb.x,Qb.y,Qb.z),t.setOrientation(Zb.x,Zb.y,Zb.z,r.x,r.y,r.z)}}class OZ extends oo{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const e1=new Me,G6=new wl,_Me=new Me,t1=new Me;class yMe extends OZ{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(e1,G6,_Me),t1.set(0,0,1).applyQuaternion(G6);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(e1.x,r),t.positionY.linearRampToValueAtTime(e1.y,r),t.positionZ.linearRampToValueAtTime(e1.z,r),t.orientationX.linearRampToValueAtTime(t1.x,r),t.orientationY.linearRampToValueAtTime(t1.y,r),t.orientationZ.linearRampToValueAtTime(t1.z,r)}else t.setPosition(e1.x,e1.y,e1.z),t.setOrientation(t1.x,t1.y,t1.z)}}class bMe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class LZ{constructor(e,t,r){this.binding=e,this.valueSize=r;let s,o,l;switch(t){case"quaternion":s=this._slerp,o=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":s=this._select,o=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:s=this._lerp,o=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=o,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,s=this.valueSize,o=e*s+s;let l=this.cumulativeWeight;if(l===0){for(let u=0;u!==s;++u)r[o+u]=r[u];l=t}else{l+=t;const u=t/l;this._mixBufferRegion(r,o,0,u,s)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,s=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,s=e*t+t,o=this.cumulativeWeight,l=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const h=t*this._origIndex;this._mixBufferRegion(r,s,h,1-o,t)}l>0&&this._mixBufferRegionAdditive(r,s,this._addIndex*t,1,t);for(let h=t,f=t+t;h!==f;++h)if(r[h]!==r[h+t]){u.setValue(r,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,s=r*this._origIndex;e.getValue(t,s);for(let o=r,l=s;o!==l;++o)t[o]=t[s+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,s,o){if(s>=.5)for(let l=0;l!==o;++l)e[t+l]=e[r+l]}_slerp(e,t,r,s){wl.slerpFlat(e,t,e,t,e,r,s)}_slerpAdditive(e,t,r,s,o){const l=this._workIndex*o;wl.multiplyQuaternionsFlat(e,l,e,t,e,r),wl.slerpFlat(e,t,e,t,e,l,s)}_lerp(e,t,r,s,o){const l=1-s;for(let u=0;u!==o;++u){const h=t+u;e[h]=e[h]*l+e[r+u]*s}}_lerpAdditive(e,t,r,s,o){for(let l=0;l!==o;++l){const u=t+l;e[u]=e[u]+e[r+l]*s}}}const k4="\\[\\]\\.:\\/",TMe=new RegExp("["+k4+"]","g"),O4="[^"+k4+"]",SMe="[^"+k4.replace("\\.","")+"]",wMe=/((?:WC+[\/:])*)/.source.replace("WC",O4),EMe=/(WCOD+)?/.source.replace("WCOD",SMe),xMe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",O4),$Me=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",O4),CMe=new RegExp("^"+wMe+EMe+xMe+$Me+"$"),MMe=["material","materials","bones"];class AMe{constructor(e,t,r){const s=r||$o.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,s=this._bindings[r];s!==void 0&&s.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=r.length;s!==o;++s)r[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class $o{constructor(e,t,r){this.path=t,this.parsedPath=r||$o.parseTrackName(t),this.node=$o.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new $o.Composite(e,t,r):new $o(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(TMe,"")}static parseTrackName(e){const t=CMe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=r.nodeName.substring(s+1);MMe.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===t||u.uuid===t)return u;const h=r(u.children);if(h)return h}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[t++]=r[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,s=t.propertyName;let o=t.propertyIndex;if(e||(e=$o.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let f=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let g=0;g<e.length;g++)if(e[g].name===f){f=g;break}break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const l=e[s];if(l===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(h=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}$o.Composite=AMe;$o.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$o.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$o.prototype.GetterByBindingType=[$o.prototype._getValue_direct,$o.prototype._getValue_array,$o.prototype._getValue_arrayElement,$o.prototype._getValue_toArray];$o.prototype.SetterByBindingTypeAndVersioning=[[$o.prototype._setValue_direct,$o.prototype._setValue_direct_setNeedsUpdate,$o.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$o.prototype._setValue_array,$o.prototype._setValue_array_setNeedsUpdate,$o.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$o.prototype._setValue_arrayElement,$o.prototype._setValue_arrayElement_setNeedsUpdate,$o.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$o.prototype._setValue_fromArray,$o.prototype._setValue_fromArray_setNeedsUpdate,$o.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class IMe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Bm(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,s=arguments.length;r!==s;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length;let u,h=e.length,f=this.nCachedObjects_;for(let g=0,y=arguments.length;g!==y;++g){const b=arguments[g],S=b.uuid;let C=t[S];if(C===void 0){C=h++,t[S]=C,e.push(b);for(let M=0,A=l;M!==A;++M)o[M].push(new $o(b,r[M],s[M]))}else if(C<f){u=e[C];const M=--f,A=e[M];t[A.uuid]=C,e[C]=A,t[S]=M,e[M]=b;for(let k=0,O=l;k!==O;++k){const P=o[k],D=P[M];let U=P[C];P[C]=D,U===void 0&&(U=new $o(b,r[k],s[k])),P[M]=U}}else e[C]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,s=r.length;let o=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const h=arguments[l],f=h.uuid,g=t[f];if(g!==void 0&&g>=o){const y=o++,b=e[y];t[b.uuid]=g,e[g]=b,t[f]=y,e[y]=h;for(let S=0,C=s;S!==C;++S){const M=r[S],A=M[y],k=M[g];M[g]=A,M[y]=k}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,s=r.length;let o=this.nCachedObjects_,l=e.length;for(let u=0,h=arguments.length;u!==h;++u){const f=arguments[u],g=f.uuid,y=t[g];if(y!==void 0)if(delete t[g],y<o){const b=--o,S=e[b],C=--l,M=e[C];t[S.uuid]=y,e[y]=S,t[M.uuid]=b,e[b]=M,e.pop();for(let A=0,k=s;A!==k;++A){const O=r[A],P=O[b],D=O[C];O[y]=P,O[b]=D,O.pop()}}else{const b=--l,S=e[b];b>0&&(t[S.uuid]=y),e[y]=S,e.pop();for(let C=0,M=s;C!==M;++C){const A=r[C];A[y]=A[b],A.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const r=this._bindingsIndicesByPath;let s=r[e];const o=this._bindings;if(s!==void 0)return o[s];const l=this._paths,u=this._parsedPaths,h=this._objects,f=h.length,g=this.nCachedObjects_,y=new Array(f);s=o.length,r[e]=s,l.push(e),u.push(t),o.push(y);for(let b=g,S=h.length;b!==S;++b){const C=h[b];y[b]=new $o(C,e,t)}return y}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const s=this._paths,o=this._parsedPaths,l=this._bindings,u=l.length-1,h=l[u],f=e[u];t[f]=r,l[r]=h,l.pop(),o[r]=o[u],o.pop(),s[r]=s[u],s.pop()}}}class RMe{constructor(e,t,r=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=s;const o=t.tracks,l=o.length,u=new Array(l),h={endingStart:M1,endingEnd:M1};for(let f=0;f!==l;++f){const g=o[f].createInterpolant(null);u[f]=g,g.settings=h}this._interpolantSettings=h,this._interpolants=u,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=IQ,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const s=this._clip.duration,o=e._clip.duration,l=o/s,u=s/o;e.warp(1,l,t),this.warp(u,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const s=this._mixer,o=s.time,l=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=s._lendControlInterpolant(),this._timeScaleInterpolant=u);const h=u.parameterPositions,f=u.sampleValues;return h[0]=o,h[1]=o+r,f[0]=e/l,f[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,s){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const h=(e-o)*r;if(h<0||r===0)return;this._startTime=null,t=r*h}t*=this._updateTimeScale(e);const l=this._updateTime(t),u=this._updateWeight(e);if(u>0){const h=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case o4:for(let g=0,y=h.length;g!==y;++g)h[g].evaluate(l),f[g].accumulateAdditive(u);break;case h2:default:for(let g=0,y=h.length;g!==y;++g)h[g].evaluate(l),f[g].accumulate(s,u)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const s=r.evaluate(e)[0];t*=s,e>r.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;r!==null&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let s=this.time+e,o=this._loopCount;const l=r===RQ;if(e===0)return o===-1?s:l&&(o&1)===1?t-s:s;if(r===AQ){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),s>=t||s<0){const u=Math.floor(s/t);s-=t*u,o+=Math.abs(u);const h=this.repetitions-o;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(h===1){const f=e<0;this._setEndings(f,!f,l)}else this._setEndings(!1,!1,l);this._loopCount=o,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=s;if(l&&(o&1)===1)return t-s}return s}_setEndings(e,t,r){const s=this._interpolantSettings;r?(s.endingStart=A1,s.endingEnd=A1):(e?s.endingStart=this.zeroSlopeAtStart?A1:M1:s.endingStart=H$,t?s.endingEnd=this.zeroSlopeAtEnd?A1:M1:s.endingEnd=H$)}_scheduleFading(e,t,r){const s=this._mixer,o=s.time;let l=this._weightInterpolant;l===null&&(l=s._lendControlInterpolant(),this._weightInterpolant=l);const u=l.parameterPositions,h=l.sampleValues;return u[0]=o,h[0]=t,u[1]=o+e,h[1]=r,this}}const kMe=new Float32Array(1);class OMe extends Ym{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,s=e._clip.tracks,o=s.length,l=e._propertyBindings,u=e._interpolants,h=r.uuid,f=this._bindingsByRootAndName;let g=f[h];g===void 0&&(g={},f[h]=g);for(let y=0;y!==o;++y){const b=s[y],S=b.name;let C=g[S];if(C!==void 0)++C.referenceCount,l[y]=C;else{if(C=l[y],C!==void 0){C._cacheIndex===null&&(++C.referenceCount,this._addInactiveBinding(C,h,S));continue}const M=t&&t._propertyBindings[y].binding.parsedPath;C=new LZ($o.create(r,S,M),b.ValueTypeName,b.getValueSize()),++C.referenceCount,this._addInactiveBinding(C,h,S),l[y]=C}u[y].resultBuffer=C.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,s=e._clip.uuid,o=this._actionsByClip[s];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,s,r)}const t=e._propertyBindings;for(let r=0,s=t.length;r!==s;++r){const o=t[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,s=t.length;r!==s;++r){const o=t[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const s=this._actions,o=this._actionsByClip;let l=o[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=l;else{const u=l.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=s.length,s.push(e),l.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],s=e._cacheIndex;r._cacheIndex=s,t[s]=r,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,l=this._actionsByClip,u=l[o],h=u.knownActions,f=h[h.length-1],g=e._byClipCacheIndex;f._byClipCacheIndex=g,h[g]=f,h.pop(),e._byClipCacheIndex=null;const y=u.actionByRoot,b=(e._localRoot||this._root).uuid;delete y[b],h.length===0&&delete l[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,s=t.length;r!==s;++r){const o=t[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,s=this._nActiveActions++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=r,t[r]=o}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,s=--this._nActiveActions,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=r,t[r]=o}_addInactiveBinding(e,t,r){const s=this._bindingsByRootAndName,o=this._bindings;let l=s[t];l===void 0&&(l={},s[t]=l),l[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,s=r.rootNode.uuid,o=r.path,l=this._bindingsByRootAndName,u=l[s],h=t[t.length-1],f=e._cacheIndex;h._cacheIndex=f,t[f]=h,t.pop(),delete u[o],Object.keys(u).length===0&&delete l[s]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,s=this._nActiveBindings++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=r,t[r]=o}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,s=--this._nActiveBindings,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=r,t[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new $4(new Float32Array(2),new Float32Array(2),1,kMe),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,s=--this._nActiveControlInterpolants,o=t[s];e.__cacheIndex=s,t[s]=e,o.__cacheIndex=r,t[r]=o}clipAction(e,t,r){const s=t||this._root,o=s.uuid;let l=typeof e=="string"?eC.findByName(s,e):e;const u=l!==null?l.uuid:e,h=this._actionsByClip[u];let f=null;if(r===void 0&&(l!==null?r=l.blendMode:r=h2),h!==void 0){const y=h.actionByRoot[o];if(y!==void 0&&y.blendMode===r)return y;f=h.knownActions[0],l===null&&(l=f._clip)}if(l===null)return null;const g=new RMe(this,l,t,r);return this._bindAction(g,f),this._addInactiveAction(g,u,o),g}existingAction(e,t){const r=t||this._root,s=r.uuid,o=typeof e=="string"?eC.findByName(r,e):e,l=o?o.uuid:e,u=this._actionsByClip[l];return u!==void 0&&u.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,s=this.time+=e,o=Math.sign(e),l=this._accuIndex^=1;for(let f=0;f!==r;++f)t[f]._update(s,e,o,l);const u=this._bindings,h=this._nActiveBindings;for(let f=0;f!==h;++f)u[f].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,s=this._actionsByClip,o=s[r];if(o!==void 0){const l=o.knownActions;for(let u=0,h=l.length;u!==h;++u){const f=l[u];this._deactivateAction(f);const g=f._cacheIndex,y=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,y._cacheIndex=g,t[g]=y,t.pop(),this._removeInactiveBindingsForAction(f)}delete s[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const l in r){const u=r[l].actionByRoot,h=u[t];h!==void 0&&(this._deactivateAction(h),this._removeInactiveAction(h))}const s=this._bindingsByRootAndName,o=s[t];if(o!==void 0)for(const l in o){const u=o[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class so{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new so(this.value.clone===void 0?this.value:this.value.clone())}}let LMe=0;class NMe extends Ym{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:LMe++}),this.name="",this.usage=G$,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,s=t.length;r<s;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class AR extends _2{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class DMe{constructor(e,t,r,s,o){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=s,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class L4{constructor(e,t,r=0,s=1/0){this.ray=new LC(e,t),this.near=r,this.far=s,this.camera=null,this.layers=new U1,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return VP(e,this,r,t),r.sort(W6),r}intersectObjects(e,t=!0,r=[]){for(let s=0,o=e.length;s<o;s++)VP(e[s],this,r,t);return r.sort(W6),r}}function W6(n,e){return n.distance-e.distance}function VP(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const s=n.children;for(let o=0,l=s.length;o<l;o++)VP(s[o],e,t,!0)}}class jP{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(dh(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class PMe{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const V6=new Kt;class BMe{constructor(e=new Kt(1/0,1/0),t=new Kt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=V6.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return V6.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const j6=new Me,$A=new Me;class N4{constructor(e=new Me,t=new Me){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){j6.subVectors(e,this.start),$A.subVectors(this.end,this.start);const r=$A.dot($A);let s=$A.dot(j6)/r;return t&&(s=dh(s,0,1)),s}closestPointToPoint(e,t,r){const s=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Y6=new Me;class FMe extends oo{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const r=new ui,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,u=1,h=32;l<h;l++,u++){const f=l/h*Math.PI*2,g=u/h*Math.PI*2;s.push(Math.cos(f),Math.sin(f),1,Math.cos(g),Math.sin(g),1)}r.setAttribute("position",new ur(s,3));const o=new Bf({fog:!1,toneMapped:!1});this.cone=new $v(r,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Y6.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Y6),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const my=new Me,CA=new ei,nN=new ei;class zMe extends $v{constructor(e){const t=NZ(e),r=new ui,s=[],o=[],l=new Fn(0,0,1),u=new Fn(0,1,0);for(let f=0;f<t.length;f++){const g=t[f];g.parent&&g.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),o.push(l.r,l.g,l.b),o.push(u.r,u.g,u.b))}r.setAttribute("position",new ur(s,3)),r.setAttribute("color",new ur(o,3));const h=new Bf({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,h),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,s=r.getAttribute("position");nN.copy(this.root.matrixWorld).invert();for(let o=0,l=0;o<t.length;o++){const u=t[o];u.parent&&u.parent.isBone&&(CA.multiplyMatrices(nN,u.matrixWorld),my.setFromMatrixPosition(CA),s.setXYZ(l,my.x,my.y,my.z),CA.multiplyMatrices(nN,u.parent.matrixWorld),my.setFromMatrixPosition(CA),s.setXYZ(l+1,my.x,my.y,my.z),l+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function NZ(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,NZ(n.children[t]));return e}class UMe extends Hn{constructor(e,t,r){const s=new f0(t,4,2),o=new m0({wireframe:!0,fog:!1,toneMapped:!1});super(s,o),this.light=e,this.light.updateMatrixWorld(),this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const HMe=new Me,X6=new Fn,K6=new Fn;class GMe extends oo{constructor(e,t,r){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;const s=new o0(t);s.rotateY(Math.PI*.5),this.material=new m0({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=s.getAttribute("position"),l=new Float32Array(o.count*3);s.setAttribute("color",new zo(l,3)),this.add(new Hn(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");X6.copy(this.light.color),K6.copy(this.light.groundColor);for(let r=0,s=t.count;r<s;r++){const o=r<s/2?X6:K6;t.setXYZ(r,o.r,o.g,o.b)}t.needsUpdate=!0}e.lookAt(HMe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class WMe extends $v{constructor(e=10,t=10,r=4473924,s=8947848){r=new Fn(r),s=new Fn(s);const o=t/2,l=e/t,u=e/2,h=[],f=[];for(let b=0,S=0,C=-u;b<=t;b++,C+=l){h.push(-u,0,C,u,0,C),h.push(C,0,-u,C,0,u);const M=b===o?r:s;M.toArray(f,S),S+=3,M.toArray(f,S),S+=3,M.toArray(f,S),S+=3,M.toArray(f,S),S+=3}const g=new ui;g.setAttribute("position",new ur(h,3)),g.setAttribute("color",new ur(f,3));const y=new Bf({vertexColors:!0,toneMapped:!1});super(g,y),this.type="GridHelper"}}class VMe extends $v{constructor(e=10,t=16,r=8,s=64,o=4473924,l=8947848){o=new Fn(o),l=new Fn(l);const u=[],h=[];for(let y=0;y<=t;y++){const b=y/t*(Math.PI*2),S=Math.sin(b)*e,C=Math.cos(b)*e;u.push(0,0,0),u.push(S,0,C);const M=y&1?o:l;h.push(M.r,M.g,M.b),h.push(M.r,M.g,M.b)}for(let y=0;y<=r;y++){const b=y&1?o:l,S=e-e/r*y;for(let C=0;C<s;C++){let M=C/s*(Math.PI*2),A=Math.sin(M)*S,k=Math.cos(M)*S;u.push(A,0,k),h.push(b.r,b.g,b.b),M=(C+1)/s*(Math.PI*2),A=Math.sin(M)*S,k=Math.cos(M)*S,u.push(A,0,k),h.push(b.r,b.g,b.b)}}const f=new ui;f.setAttribute("position",new ur(u,3)),f.setAttribute("color",new ur(h,3));const g=new Bf({vertexColors:!0,toneMapped:!1});super(f,g),this.type="PolarGridHelper"}}const J6=new Me,MA=new Me,q6=new Me;class jMe extends oo{constructor(e,t,r){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,t===void 0&&(t=1);let s=new ui;s.setAttribute("position",new ur([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new Bf({fog:!1,toneMapped:!1});this.lightPlane=new Rf(s,o),this.add(this.lightPlane),s=new ui,s.setAttribute("position",new ur([0,0,0,0,0,1],3)),this.targetLine=new Rf(s,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){J6.setFromMatrixPosition(this.light.matrixWorld),MA.setFromMatrixPosition(this.light.target.matrixWorld),q6.subVectors(MA,J6),this.lightPlane.lookAt(MA),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(MA),this.targetLine.scale.z=q6.length()}}const AA=new Me,Rc=new vE;class YMe extends $v{constructor(e){const t=new ui,r=new Bf({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],o=[],l={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(C,M){h(C),h(M)}function h(C){s.push(0,0,0),o.push(0,0,0),l[C]===void 0&&(l[C]=[]),l[C].push(s.length/3-1)}t.setAttribute("position",new ur(s,3)),t.setAttribute("color",new ur(o,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const f=new Fn(16755200),g=new Fn(16711680),y=new Fn(43775),b=new Fn(16777215),S=new Fn(3355443);this.setColors(f,g,y,b,S)}setColors(e,t,r,s,o){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,r.r,r.g,r.b),l.setXYZ(33,r.r,r.g,r.b),l.setXYZ(34,r.r,r.g,r.b),l.setXYZ(35,r.r,r.g,r.b),l.setXYZ(36,r.r,r.g,r.b),l.setXYZ(37,r.r,r.g,r.b),l.setXYZ(38,s.r,s.g,s.b),l.setXYZ(39,s.r,s.g,s.b),l.setXYZ(40,o.r,o.g,o.b),l.setXYZ(41,o.r,o.g,o.b),l.setXYZ(42,o.r,o.g,o.b),l.setXYZ(43,o.r,o.g,o.b),l.setXYZ(44,o.r,o.g,o.b),l.setXYZ(45,o.r,o.g,o.b),l.setXYZ(46,o.r,o.g,o.b),l.setXYZ(47,o.r,o.g,o.b),l.setXYZ(48,o.r,o.g,o.b),l.setXYZ(49,o.r,o.g,o.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,s=1;Rc.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ch("c",t,e,Rc,0,0,-1),ch("t",t,e,Rc,0,0,1),ch("n1",t,e,Rc,-r,-s,-1),ch("n2",t,e,Rc,r,-s,-1),ch("n3",t,e,Rc,-r,s,-1),ch("n4",t,e,Rc,r,s,-1),ch("f1",t,e,Rc,-r,-s,1),ch("f2",t,e,Rc,r,-s,1),ch("f3",t,e,Rc,-r,s,1),ch("f4",t,e,Rc,r,s,1),ch("u1",t,e,Rc,r*.7,s*1.1,-1),ch("u2",t,e,Rc,-r*.7,s*1.1,-1),ch("u3",t,e,Rc,0,s*2,-1),ch("cf1",t,e,Rc,-r,0,1),ch("cf2",t,e,Rc,r,0,1),ch("cf3",t,e,Rc,0,-s,1),ch("cf4",t,e,Rc,0,s,1),ch("cn1",t,e,Rc,-r,0,-1),ch("cn2",t,e,Rc,r,0,-1),ch("cn3",t,e,Rc,0,-s,-1),ch("cn4",t,e,Rc,0,s,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ch(n,e,t,r,s,o,l){AA.set(s,o,l).unproject(r);const u=e[n];if(u!==void 0){const h=t.getAttribute("position");for(let f=0,g=u.length;f<g;f++)h.setXYZ(u[f],AA.x,AA.y,AA.z)}}const IA=new p0;class XMe extends $v{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),o=new ui;o.setIndex(new zo(r,1)),o.setAttribute("position",new zo(s,3)),super(o,new Bf({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&IA.setFromObject(this.object),IA.isEmpty())return;const t=IA.min,r=IA.max,s=this.geometry.attributes.position,o=s.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=t.x,o[4]=r.y,o[5]=r.z,o[6]=t.x,o[7]=t.y,o[8]=r.z,o[9]=r.x,o[10]=t.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=t.z,o[15]=t.x,o[16]=r.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=r.x,o[22]=t.y,o[23]=t.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}}class KMe extends $v{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new ui;o.setIndex(new zo(r,1)),o.setAttribute("position",new ur(s,3)),super(o,new Bf({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class JMe extends Rf{constructor(e,t=1,r=16776960){const s=r,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new ui;l.setAttribute("position",new ur(o,3)),l.computeBoundingSphere(),super(l,new Bf({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],h=new ui;h.setAttribute("position",new ur(u,3)),h.computeBoundingSphere(),this.add(new Hn(h,new m0({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}}const Q6=new Me;let RA,rN;class qMe extends oo{constructor(e=new Me(0,0,1),t=new Me(0,0,0),r=1,s=16776960,o=r*.2,l=o*.2){super(),this.type="ArrowHelper",RA===void 0&&(RA=new ui,RA.setAttribute("position",new ur([0,0,0,0,1,0],3)),rN=new Wl(0,.5,1,5,1),rN.translate(0,-.5,0)),this.position.copy(t),this.line=new Rf(RA,new Bf({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Hn(rN,new m0({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,o,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Q6.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Q6,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class QMe extends $v{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new ui;s.setAttribute("position",new ur(t,3)),s.setAttribute("color",new ur(r,3));const o=new Bf({vertexColors:!0,toneMapped:!1});super(s,o),this.type="AxesHelper"}setColors(e,t,r){const s=new Fn,o=this.geometry.attributes.color.array;return s.set(e),s.toArray(o,0),s.toArray(o,3),s.set(t),s.toArray(o,6),s.toArray(o,9),s.set(r),s.toArray(o,12),s.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ZMe{constructor(){this.type="ShapePath",this.color=new Fn,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Y$,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,s){return this.currentPath.quadraticCurveTo(e,t,r,s),this}bezierCurveTo(e,t,r,s,o,l){return this.currentPath.bezierCurveTo(e,t,r,s,o,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function r(O){const P=[];for(let D=0,U=O.length;D<U;D++){const H=O[D],V=new H1;V.curves=H.curves,P.push(V)}return P}function s(O,P){const D=P.length;let U=!1;for(let H=D-1,V=0;V<D;H=V++){let z=P[H],Z=P[V],oe=Z.x-z.x,ue=Z.y-z.y;if(Math.abs(ue)>Number.EPSILON){if(ue<0&&(z=P[V],oe=-oe,Z=P[H],ue=-ue),O.y<z.y||O.y>Z.y)continue;if(O.y===z.y){if(O.x===z.x)return!0}else{const q=ue*(O.x-z.x)-oe*(O.y-z.y);if(q===0)return!0;if(q<0)continue;U=!U}}else{if(O.y!==z.y)continue;if(Z.x<=O.x&&O.x<=z.x||z.x<=O.x&&O.x<=Z.x)return!0}}return U}const o=fv.isClockWise,l=this.subPaths;if(l.length===0)return[];if(t===!0)return r(l);let u,h,f;const g=[];if(l.length===1)return h=l[0],f=new H1,f.curves=h.curves,g.push(f),g;let y=!o(l[0].getPoints());y=e?!y:y;const b=[],S=[];let C=[],M=0,A;S[M]=void 0,C[M]=[];for(let O=0,P=l.length;O<P;O++)h=l[O],A=h.getPoints(),u=o(A),u=e?!u:u,u?(!y&&S[M]&&M++,S[M]={s:new H1,p:A},S[M].s.curves=h.curves,y&&M++,C[M]=[]):C[M].push({h,p:A[0]});if(!S[0])return r(l);if(S.length>1){let O=!1,P=0;for(let D=0,U=S.length;D<U;D++)b[D]=[];for(let D=0,U=S.length;D<U;D++){const H=C[D];for(let V=0;V<H.length;V++){const z=H[V];let Z=!0;for(let oe=0;oe<S.length;oe++)s(z.p,S[oe].p)&&(D!==oe&&P++,Z?(Z=!1,b[oe].push(z)):O=!0);Z&&b[D].push(z)}}P>0&&O===!1&&(C=b)}let k;for(let O=0,P=S.length;O<P;O++){f=S[O].s,g.push(f),k=C[O];for(let D=0,U=k.length;D<U;D++)f.holes.push(k[D].h)}return g}}const d_=eAe();function eAe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),s=new Uint32Array(512);for(let h=0;h<256;++h){const f=h-127;f<-27?(r[h]=0,r[h|256]=32768,s[h]=24,s[h|256]=24):f<-14?(r[h]=1024>>-f-14,r[h|256]=1024>>-f-14|32768,s[h]=-f-1,s[h|256]=-f-1):f<=15?(r[h]=f+15<<10,r[h|256]=f+15<<10|32768,s[h]=13,s[h|256]=13):f<128?(r[h]=31744,r[h|256]=64512,s[h]=24,s[h|256]=24):(r[h]=31744,r[h|256]=64512,s[h]=13,s[h|256]=13)}const o=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64);for(let h=1;h<1024;++h){let f=h<<13,g=0;for(;!(f&8388608);)f<<=1,g-=8388608;f&=-8388609,g+=947912704,o[h]=f|g}for(let h=1024;h<2048;++h)o[h]=939524096+(h-1024<<13);for(let h=1;h<31;++h)l[h]=h<<23;l[31]=1199570944,l[32]=2147483648;for(let h=33;h<63;++h)l[h]=2147483648+(h-32<<23);l[63]=3347054592;for(let h=1;h<64;++h)h!==32&&(u[h]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:s,mantissaTable:o,exponentTable:l,offsetTable:u}}function tAe(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=dh(n,-65504,65504),d_.floatView[0]=n;const e=d_.uint32View[0],t=e>>23&511;return d_.baseTable[t]+((e&8388607)>>d_.shiftTable[t])}function nAe(n){const e=n>>10;return d_.uint32View[0]=d_.mantissaTable[d_.offsetTable[e]+(n&1023)]+d_.exponentTable[e],d_.floatView[0]}var rAe=Object.freeze({__proto__:null,toHalfFloat:tAe,fromHalfFloat:nAe});class iAe extends ui{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),super()}}class sAe extends ui{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),super()}}function oAe(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function aAe(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function lAe(){console.error("THREE.ImmediateRenderObject has been removed.")}class uAe extends Dc{constructor(e,t,r){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,r),this.samples=4}}class cAe extends OC{constructor(e,t,r,s){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,r,s)}}class hAe extends d2{constructor(e,t,r,s){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:mE}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=mE);const dAe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:r4,AddEquation:_1,AddOperation:uQ,AdditiveAnimationBlendMode:o4,AdditiveBlending:wR,AlphaFormat:yQ,AlwaysDepth:nQ,AlwaysStencilFunc:OQ,AmbientLight:AZ,AmbientLightProbe:pMe,AnimationClip:eC,AnimationLoader:tMe,AnimationMixer:OMe,AnimationObjectGroup:IMe,AnimationUtils:qCe,ArcCurve:rZ,ArrayCamera:YQ,ArrowHelper:qMe,Audio:OZ,AudioAnalyser:bMe,AudioContext:I4,AudioListener:vMe,AudioLoader:dMe,AxesHelper:QMe,BackSide:cd,BasicDepthPacking:ib,BasicShadowMap:Hq,Bone:m4,BooleanKeyframeTrack:mT,Box2:BMe,Box3:p0,Box3Helper:KMe,BoxBufferGeometry:mu,BoxGeometry:mu,BoxHelper:XMe,BufferAttribute:zo,BufferGeometry:ui,BufferGeometryLoader:kZ,ByteType:pQ,Cache:iT,Camera:vE,CameraHelper:YMe,CanvasTexture:TCe,CapsuleBufferGeometry:zw,CapsuleGeometry:zw,CatmullRomCurve3:iZ,CineonToneMapping:dQ,CircleBufferGeometry:Uw,CircleGeometry:Uw,ClampToEdgeWrapping:lp,Clock:R4,Color:Fn,ColorKeyframeTrack:C4,ColorManagement:hg,CompressedTexture:nZ,CompressedTextureLoader:nMe,ConeBufferGeometry:Hw,ConeGeometry:Hw,CubeCamera:BQ,CubeReflectionMapping:Vy,CubeRefractionMapping:jy,CubeTexture:DC,CubeTextureLoader:rMe,CubeUVReflectionMapping:gE,CubicBezierCurve:v4,CubicBezierCurve3:sZ,CubicInterpolant:TZ,CullFaceBack:cP,CullFaceFront:Uq,CullFaceFrontBack:$Te,CullFaceNone:zq,Curve:g0,CurvePath:aZ,CustomBlending:Wq,CustomToneMapping:fQ,CylinderBufferGeometry:Wl,CylinderGeometry:Wl,Cylindrical:PMe,Data3DTexture:d2,DataArrayTexture:OC,DataTexture:Tw,DataTexture2DArray:cAe,DataTexture3D:hAe,DataTextureLoader:iMe,DataUtils:rAe,DecrementStencilOp:FTe,DecrementWrapStencilOp:UTe,DefaultLoadingManager:EZ,DepthFormat:Hy,DepthStencilFormat:Yy,DepthTexture:d4,DirectionalLight:MZ,DirectionalLightHelper:jMe,DiscreteInterpolant:SZ,DodecahedronBufferGeometry:Gw,DodecahedronGeometry:Gw,DoubleSide:up,DstAlphaFactor:Jq,DstColorFactor:Qq,DynamicCopyUsage:tSe,DynamicDrawUsage:B1,DynamicReadUsage:QTe,EdgesGeometry:lZ,EllipseCurve:T2,EqualDepth:iQ,EqualStencilFunc:VTe,EquirectangularReflectionMapping:P$,EquirectangularRefractionMapping:B$,Euler:pT,EventDispatcher:Ym,ExtrudeBufferGeometry:Ww,ExtrudeGeometry:Ww,FileLoader:x_,FlatShading:Gq,Float16BufferAttribute:PSe,Float32BufferAttribute:ur,Float64BufferAttribute:BSe,FloatType:ov,Fog:v2,FogExp2:g2,Font:aAe,FontLoader:oAe,FramebufferTexture:bCe,FrontSide:_v,Frustum:f2,GLBufferAttribute:DMe,GLSL1:rSe,GLSL3:DP,GreaterDepth:oQ,GreaterEqualDepth:sQ,GreaterEqualStencilFunc:KTe,GreaterStencilFunc:YTe,GridHelper:WMe,Group:iw,HalfFloatType:tT,HemisphereLight:xZ,HemisphereLightHelper:GMe,HemisphereLightProbe:fMe,IcosahedronBufferGeometry:Vw,IcosahedronGeometry:Vw,ImageBitmapLoader:hMe,ImageLoader:tC,ImageUtils:l4,ImmediateRenderObject:lAe,IncrementStencilOp:BTe,IncrementWrapStencilOp:zTe,InstancedBufferAttribute:nT,InstancedBufferGeometry:$2,InstancedInterleavedBuffer:AR,InstancedMesh:ZQ,Int16BufferAttribute:NSe,Int32BufferAttribute:DSe,Int8BufferAttribute:kSe,IntType:gQ,InterleavedBuffer:_2,InterleavedBufferAttribute:Om,Interpolant:BC,InterpolateDiscrete:z$,InterpolateLinear:U$,InterpolateSmooth:$I,InvertStencilOp:HTe,KeepStencilOp:CI,KeyframeTrack:v0,LOD:qQ,LatheBufferGeometry:rT,LatheGeometry:rT,Layers:U1,LessDepth:rQ,LessEqualDepth:ER,LessEqualStencilFunc:jTe,LessStencilFunc:WTe,Light:sb,LightProbe:E2,Line:Rf,Line3:N4,LineBasicMaterial:Bf,LineCurve:S2,LineCurve3:oZ,LineDashedMaterial:yZ,LineLoop:eZ,LineSegments:$v,LinearEncoding:Mg,LinearFilter:El,LinearInterpolant:$4,LinearMipMapLinearFilter:RTe,LinearMipMapNearestFilter:ITe,LinearMipmapLinearFilter:dT,LinearMipmapNearestFilter:i4,LinearSRGBColorSpace:Ay,LinearToneMapping:cQ,Loader:Xm,LoaderUtils:WP,LoadingManager:M4,LoopOnce:AQ,LoopPingPong:RQ,LoopRepeat:IQ,LuminanceAlphaFormat:SQ,LuminanceFormat:TQ,MOUSE:d1,Material:hd,MaterialLoader:x2,MathUtils:NQ,Matrix3:cp,Matrix4:ei,MaxEquation:pP,Mesh:Hn,MeshBasicMaterial:m0,MeshDepthMaterial:PC,MeshDistanceMaterial:m2,MeshLambertMaterial:vZ,MeshMatcapMaterial:_Z,MeshNormalMaterial:w4,MeshPhongMaterial:mZ,MeshPhysicalMaterial:pZ,MeshStandardMaterial:q$,MeshToonMaterial:gZ,MinEquation:fP,MirroredRepeatWrapping:F$,MixOperation:lQ,MultiplyBlending:dP,MultiplyOperation:kC,NearestFilter:Vl,NearestMipMapLinearFilter:ATe,NearestMipMapNearestFilter:MTe,NearestMipmapLinearFilter:$R,NearestMipmapNearestFilter:xR,NeverDepth:tQ,NeverStencilFunc:GTe,NoBlending:gp,NoColorSpace:NTe,NoToneMapping:c0,NormalAnimationBlendMode:h2,NormalBlending:y_,NotEqualDepth:aQ,NotEqualStencilFunc:XTe,NumberKeyframeTrack:Q$,Object3D:oo,ObjectLoader:uMe,ObjectSpaceNormalMap:kQ,OctahedronBufferGeometry:o0,OctahedronGeometry:o0,OneFactor:Yq,OneMinusDstAlphaFactor:qq,OneMinusDstColorFactor:Zq,OneMinusSrcAlphaFactor:u2,OneMinusSrcColorFactor:Kq,OrthographicCamera:dv,PCFShadowMap:a2,PCFSoftShadowMap:t$,PMREMGenerator:BP,ParametricGeometry:iAe,Path:Y$,PerspectiveCamera:el,Plane:c_,PlaneBufferGeometry:d0,PlaneGeometry:d0,PlaneHelper:JMe,PointLight:CZ,PointLightHelper:UMe,Points:tZ,PointsMaterial:b2,PolarGridHelper:VMe,PolyhedronBufferGeometry:yv,PolyhedronGeometry:yv,PositionalAudio:yMe,PropertyBinding:$o,PropertyMixer:LZ,QuadraticBezierCurve:_4,QuadraticBezierCurve3:y4,Quaternion:wl,QuaternionKeyframeTrack:yE,QuaternionLinearInterpolant:wZ,REVISION:mE,RGBADepthPacking:Bw,RGBAFormat:Xp,RGBAIntegerFormat:CQ,RGBA_ASTC_10x10_Format:kP,RGBA_ASTC_10x5_Format:AP,RGBA_ASTC_10x6_Format:IP,RGBA_ASTC_10x8_Format:RP,RGBA_ASTC_12x10_Format:OP,RGBA_ASTC_12x12_Format:LP,RGBA_ASTC_4x4_Format:TP,RGBA_ASTC_5x4_Format:SP,RGBA_ASTC_5x5_Format:wP,RGBA_ASTC_6x5_Format:EP,RGBA_ASTC_6x6_Format:xP,RGBA_ASTC_8x5_Format:$P,RGBA_ASTC_8x6_Format:CP,RGBA_ASTC_8x8_Format:MP,RGBA_BPTC_Format:NP,RGBA_ETC2_EAC_Format:bP,RGBA_PVRTC_2BPPV1_Format:_P,RGBA_PVRTC_4BPPV1_Format:vP,RGBA_S3TC_DXT1_Format:wI,RGBA_S3TC_DXT3_Format:EI,RGBA_S3TC_DXT5_Format:xI,RGBFormat:bQ,RGB_ETC1_Format:MQ,RGB_ETC2_Format:yP,RGB_PVRTC_2BPPV1_Format:gP,RGB_PVRTC_4BPPV1_Format:mP,RGB_S3TC_DXT1_Format:SI,RGFormat:xQ,RGIntegerFormat:$Q,RawShaderMaterial:fZ,Ray:LC,Raycaster:L4,RectAreaLight:IZ,RedFormat:wQ,RedIntegerFormat:EQ,ReinhardToneMapping:hQ,RepeatWrapping:Pw,ReplaceStencilOp:PTe,ReverseSubtractEquation:n4,RingBufferGeometry:jw,RingGeometry:jw,SRGBColorSpace:Q0,Scene:j$,ShaderChunk:ps,ShaderLib:ap,ShaderMaterial:xd,ShadowMaterial:dZ,Shape:H1,ShapeBufferGeometry:Yw,ShapeGeometry:Yw,ShapePath:ZMe,ShapeUtils:fv,ShortType:mQ,Skeleton:y2,SkeletonHelper:zMe,SkinnedMesh:QQ,SmoothShading:CTe,Source:I1,Sphere:xv,SphereBufferGeometry:f0,SphereGeometry:f0,Spherical:jP,SphericalHarmonics3:RZ,SplineCurve:b4,SpotLight:$Z,SpotLightHelper:FMe,Sprite:JQ,SpriteMaterial:p4,SrcAlphaFactor:l2,SrcAlphaSaturateFactor:eQ,SrcColorFactor:Xq,StaticCopyUsage:eSe,StaticDrawUsage:G$,StaticReadUsage:qTe,StereoCamera:mMe,StreamCopyUsage:nSe,StreamDrawUsage:JTe,StreamReadUsage:ZTe,StringKeyframeTrack:gT,SubtractEquation:Vq,SubtractiveBlending:hP,TOUCH:f1,TangentSpaceNormalMap:fT,TetrahedronBufferGeometry:Xw,TetrahedronGeometry:Xw,TextGeometry:sAe,Texture:dc,TextureLoader:sMe,TorusBufferGeometry:r0,TorusGeometry:r0,TorusKnotBufferGeometry:Kw,TorusKnotGeometry:Kw,Triangle:Rm,TriangleFanDrawMode:LTe,TriangleStripDrawMode:OTe,TrianglesDrawMode:kTe,TubeBufferGeometry:Jw,TubeGeometry:Jw,UVMapping:c2,Uint16BufferAttribute:u4,Uint32BufferAttribute:c4,Uint8BufferAttribute:OSe,Uint8ClampedBufferAttribute:LSe,Uniform:so,UniformsGroup:NMe,UniformsLib:Xn,UniformsUtils:NC,UnsignedByteType:af,UnsignedInt248Type:Uy,UnsignedIntType:g_,UnsignedShort4444Type:vQ,UnsignedShort5551Type:_Q,UnsignedShortType:s4,VSMShadowMap:C1,Vector2:Kt,Vector3:Me,Vector4:Ts,VectorKeyframeTrack:Z$,VideoTexture:yCe,WebGL1Renderer:XQ,WebGL3DRenderTarget:SSe,WebGLArrayRenderTarget:TSe,WebGLCubeRenderTarget:FQ,WebGLMultipleRenderTargets:wSe,WebGLMultisampleRenderTarget:uAe,WebGLRenderTarget:Dc,WebGLRenderer:f4,WebGLUtils:jQ,WireframeGeometry:S4,WrapAroundEnding:H$,ZeroCurvatureEnding:M1,ZeroFactor:jq,ZeroSlopeEnding:A1,ZeroStencilOp:DTe,_SRGBAFormat:CR,sRGBEncoding:ms},Symbol.toStringTag,{value:"Module"}));var f_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function DZ(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var k1={exports:{}},n1={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z6;function fAe(){return Z6||(Z6=1,n1.ConcurrentRoot=1,n1.ContinuousEventPriority=4,n1.DefaultEventPriority=16,n1.DiscreteEventPriority=1,n1.IdleEventPriority=536870912,n1.LegacyRoot=0),n1}(function(n){n.exports=fAe()})(k1);function pAe(n){let e;const t=new Set,r=(u,h)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const g=e;e=h?f:Object.assign({},e,f),t.forEach(y=>y(e,g))}},s=()=>e,o=(u,h=s,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=h(e);function y(){const b=h(e);if(!f(g,b)){const S=g;u(g=b,S)}}return t.add(y),()=>t.delete(y)},l={setState:r,getState:s,subscribe:(u,h,f)=>h||f?o(u,h,f):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,s,l),l}const mAe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),eW=mAe?de.useEffect:de.useLayoutEffect;function gAe(n){const e=typeof n=="function"?pAe(n):n,t=(r=e.getState,s=Object.is)=>{const[,o]=de.useReducer(A=>A+1,0),l=e.getState(),u=de.useRef(l),h=de.useRef(r),f=de.useRef(s),g=de.useRef(!1),y=de.useRef();y.current===void 0&&(y.current=r(l));let b,S=!1;(u.current!==l||h.current!==r||f.current!==s||g.current)&&(b=r(l),S=!s(y.current,b)),eW(()=>{S&&(y.current=b),u.current=l,h.current=r,f.current=s,g.current=!1});const C=de.useRef(l);eW(()=>{const A=()=>{try{const O=e.getState(),P=h.current(O);f.current(y.current,P)||(u.current=O,y.current=P,o())}catch{g.current=!0,o()}},k=e.subscribe(A);return e.getState()!==C.current&&A(),k},[]);const M=S?b:y.current;return de.useDebugValue(M),M};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const s=r.length<=0;return{value:r.shift(),done:s}}}},t}var PZ={exports:{}},IR={exports:{}},tW={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nW;function vAe(){return nW||(nW=1,function(n){function e(K,ie){var se=K.length;K.push(ie);e:for(;0<se;){var fe=se-1>>>1,Se=K[fe];if(0<s(Se,ie))K[fe]=ie,K[se]=Se,se=fe;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ie=K[0],se=K.pop();if(se!==ie){K[0]=se;e:for(var fe=0,Se=K.length,Ue=Se>>>1;fe<Ue;){var ke=2*(fe+1)-1,qe=K[ke],we=ke+1,Ze=K[we];if(0>s(qe,se))we<Se&&0>s(Ze,qe)?(K[fe]=Ze,K[we]=se,fe=we):(K[fe]=qe,K[ke]=se,fe=ke);else if(we<Se&&0>s(Ze,se))K[fe]=Ze,K[we]=se,fe=we;else break e}}return ie}function s(K,ie){var se=K.sortIndex-ie.sortIndex;return se!==0?se:K.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],f=[],g=1,y=null,b=3,S=!1,C=!1,M=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(K){for(var ie=t(f);ie!==null;){if(ie.callback===null)r(f);else if(ie.startTime<=K)r(f),ie.sortIndex=ie.expirationTime,e(h,ie);else break;ie=t(f)}}function D(K){if(M=!1,P(K),!C)if(t(h)!==null)C=!0,ge(U);else{var ie=t(f);ie!==null&&$e(D,ie.startTime-K)}}function U(K,ie){C=!1,M&&(M=!1,k(z),z=-1),S=!0;var se=b;try{for(P(ie),y=t(h);y!==null&&(!(y.expirationTime>ie)||K&&!ue());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,b=y.priorityLevel;var Se=fe(y.expirationTime<=ie);ie=n.unstable_now(),typeof Se=="function"?y.callback=Se:y===t(h)&&r(h),P(ie)}else r(h);y=t(h)}if(y!==null)var Ue=!0;else{var ke=t(f);ke!==null&&$e(D,ke.startTime-ie),Ue=!1}return Ue}finally{y=null,b=se,S=!1}}var H=!1,V=null,z=-1,Z=5,oe=-1;function ue(){return!(n.unstable_now()-oe<Z)}function q(){if(V!==null){var K=n.unstable_now();oe=K;var ie=!0;try{ie=V(!0,K)}finally{ie?ae():(H=!1,V=null)}}else H=!1}var ae;if(typeof O=="function")ae=function(){O(q)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ce=le.port2;le.port1.onmessage=q,ae=function(){ce.postMessage(null)}}else ae=function(){A(q,0)};function ge(K){V=K,H||(H=!0,ae())}function $e(K,ie){z=A(function(){K(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_continueExecution=function(){C||S||(C=!0,ge(U))},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(K){switch(b){case 1:case 2:case 3:var ie=3;break;default:ie=b}var se=b;b=ie;try{return K()}finally{b=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(K,ie){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var se=b;b=K;try{return ie()}finally{b=se}},n.unstable_scheduleCallback=function(K,ie,se){var fe=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?fe+se:fe):se=fe,K){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=se+Se,K={id:g++,callback:ie,priorityLevel:K,startTime:se,expirationTime:Se,sortIndex:-1},se>fe?(K.sortIndex=se,e(f,K),t(h)===null&&K===t(f)&&(M?(k(z),z=-1):M=!0,$e(D,se-fe))):(K.sortIndex=Se,e(h,K),C||S||(C=!0,ge(U))),K},n.unstable_shouldYield=ue,n.unstable_wrapCallback=function(K){var ie=b;return function(){var se=b;b=ie;try{return K.apply(this,arguments)}finally{b=se}}}}(tW)),tW}(function(n){n.exports=vAe()})(IR);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rW,iW;function _Ae(){return iW||(iW=1,rW=function(n){var e={},t=Tt,r=IR.exports,s=Object.assign;function o(x){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+x,v=1;v<arguments.length;v++)d+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+x+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),S=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),D=Symbol.iterator;function U(x){return x===null||typeof x!="object"?null:(x=D&&x[D]||x["@@iterator"],typeof x=="function"?x:null)}function H(x){if(x==null)return null;if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case f:return"Fragment";case h:return"Portal";case y:return"Profiler";case g:return"StrictMode";case M:return"Suspense";case A:return"SuspenseList"}if(typeof x=="object")switch(x.$$typeof){case S:return(x.displayName||"Context")+".Consumer";case b:return(x._context.displayName||"Context")+".Provider";case C:var d=x.render;return x=x.displayName,x||(x=d.displayName||d.name||"",x=x!==""?"ForwardRef("+x+")":"ForwardRef"),x;case k:return d=x.displayName||null,d!==null?d:H(x.type)||"Memo";case O:d=x._payload,x=x._init;try{return H(x(d))}catch{}}return null}function V(x){var d=x.type;switch(x.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return x=d.render,x=x.displayName||x.name||"",d.displayName||(x!==""?"ForwardRef("+x+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(d);case 8:return d===g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function z(x){var d=x,v=x;if(x.alternate)for(;d.return;)d=d.return;else{x=d;do d=x,d.flags&4098&&(v=d.return),x=d.return;while(x)}return d.tag===3?v:null}function Z(x){if(z(x)!==x)throw Error(o(188))}function oe(x){var d=x.alternate;if(!d){if(d=z(x),d===null)throw Error(o(188));return d!==x?null:x}for(var v=x,$=d;;){var I=v.return;if(I===null)break;var B=I.alternate;if(B===null){if($=I.return,$!==null){v=$;continue}break}if(I.child===B.child){for(B=I.child;B;){if(B===v)return Z(I),x;if(B===$)return Z(I),d;B=B.sibling}throw Error(o(188))}if(v.return!==$.return)v=I,$=B;else{for(var W=!1,pe=I.child;pe;){if(pe===v){W=!0,v=I,$=B;break}if(pe===$){W=!0,$=I,v=B;break}pe=pe.sibling}if(!W){for(pe=B.child;pe;){if(pe===v){W=!0,v=B,$=I;break}if(pe===$){W=!0,$=B,v=I;break}pe=pe.sibling}if(!W)throw Error(o(189))}}if(v.alternate!==$)throw Error(o(190))}if(v.tag!==3)throw Error(o(188));return v.stateNode.current===v?x:d}function ue(x){return x=oe(x),x!==null?q(x):null}function q(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){var d=q(x);if(d!==null)return d;x=x.sibling}return null}function ae(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){if(x.tag!==4){var d=ae(x);if(d!==null)return d}x=x.sibling}return null}var le=Array.isArray,ce=n.getPublicInstance,ge=n.getRootHostContext,$e=n.getChildHostContext,K=n.prepareForCommit,ie=n.resetAfterCommit,se=n.createInstance,fe=n.appendInitialChild,Se=n.finalizeInitialChildren,Ue=n.prepareUpdate,ke=n.shouldSetTextContent,qe=n.createTextInstance,we=n.scheduleTimeout,Ze=n.cancelTimeout,et=n.noTimeout,ft=n.isPrimaryRenderer,at=n.supportsMutation,Ge=n.supportsPersistence,Ie=n.supportsHydration,He=n.getInstanceFromNode,it=n.preparePortalMount,st=n.getCurrentEventPriority,It=n.detachDeletedInstance,kt=n.supportsMicrotasks,vt=n.scheduleMicrotask,Mt=n.supportsTestSelectors,Ct=n.findFiberRoot,gt=n.getBoundingRect,Ee=n.getTextContent,re=n.isHiddenSubtree,Be=n.matchAccessibilityRole,mt=n.setFocusIfFocusable,yt=n.setupIntersectionObserver,wt=n.appendChild,Ke=n.appendChildToContainer,Qe=n.commitTextUpdate,Le=n.commitMount,Q=n.commitUpdate,te=n.insertBefore,me=n.insertInContainerBefore,Re=n.removeChild,Fe=n.removeChildFromContainer,bt=n.resetTextContent,ze=n.hideInstance,Pt=n.hideTextInstance,lt=n.unhideInstance,Gt=n.unhideTextInstance,Wt=n.clearContainer,bn=n.cloneInstance,ar=n.createContainerChildSet,cr=n.appendChildToContainerChildSet,oi=n.finalizeContainerChildren,Mr=n.replaceContainerChildren,_r=n.cloneHiddenInstance,ne=n.cloneHiddenTextInstance,Te=n.canHydrateInstance,je=n.canHydrateTextInstance,ct=n.canHydrateSuspenseInstance,Ht=n.isSuspenseInstancePending,nn=n.isSuspenseInstanceFallback,kn=n.registerSuspenseInstanceRetry,De=n.getNextHydratableSibling,_t=n.getFirstHydratableChild,Ot=n.getFirstHydratableChildWithinContainer,St=n.getFirstHydratableChildWithinSuspenseInstance,Xt=n.hydrateInstance,Wn=n.hydrateTextInstance,ir=n.hydrateSuspenseInstance,br=n.getNextHydratableInstanceAfterSuspenseInstance,Or=n.commitHydratedContainer,Ei=n.commitHydratedSuspenseInstance,Lr=n.clearSuspenseBoundary,Ar=n.clearSuspenseBoundaryFromContainer,Ss=n.shouldDeleteUnhydratedTailInstances,La=n.didNotMatchHydratedContainerTextInstance,Mo=n.didNotMatchHydratedTextInstance,Xl;function rn(x){if(Xl===void 0)try{throw Error()}catch(v){var d=v.stack.trim().match(/\n( *(at )?)/);Xl=d&&d[1]||""}return`
`+Xl+x}var Dr=!1;function tl(x,d){if(!x||Dr)return"";Dr=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(tt){var $=tt}Reflect.construct(x,[],d)}else{try{d.call()}catch(tt){$=tt}x.call(d.prototype)}else{try{throw Error()}catch(tt){$=tt}x()}}catch(tt){if(tt&&$&&typeof tt.stack=="string"){for(var I=tt.stack.split(`
`),B=$.stack.split(`
`),W=I.length-1,pe=B.length-1;1<=W&&0<=pe&&I[W]!==B[pe];)pe--;for(;1<=W&&0<=pe;W--,pe--)if(I[W]!==B[pe]){if(W!==1||pe!==1)do if(W--,pe--,0>pe||I[W]!==B[pe]){var Oe=`
`+I[W].replace(" at new "," at ");return x.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",x.displayName)),Oe}while(1<=W&&0<=pe);break}}}finally{Dr=!1,Error.prepareStackTrace=v}return(x=x?x.displayName||x.name:"")?rn(x):""}var Na=Object.prototype.hasOwnProperty,zs=[],Us=-1;function Pi(x){return{current:x}}function Pr(x){0>Us||(x.current=zs[Us],zs[Us]=null,Us--)}function In(x,d){Us++,zs[Us]=x.current,x.current=d}var Nr={},jr=Pi(Nr),Sr=Pi(!1),Bi=Nr;function ws(x,d){var v=x.type.contextTypes;if(!v)return Nr;var $=x.stateNode;if($&&$.__reactInternalMemoizedUnmaskedChildContext===d)return $.__reactInternalMemoizedMaskedChildContext;var I={},B;for(B in v)I[B]=d[B];return $&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=d,x.__reactInternalMemoizedMaskedChildContext=I),I}function fi(x){return x=x.childContextTypes,x!=null}function gs(){Pr(Sr),Pr(jr)}function nl(x,d,v){if(jr.current!==Nr)throw Error(o(168));In(jr,d),In(Sr,v)}function Da(x,d,v){var $=x.stateNode;if(d=d.childContextTypes,typeof $.getChildContext!="function")return v;$=$.getChildContext();for(var I in $)if(!(I in d))throw Error(o(108,V(x)||"Unknown",I));return s({},v,$)}function fc(x){return x=(x=x.stateNode)&&x.__reactInternalMemoizedMergedChildContext||Nr,Bi=jr.current,In(jr,x),In(Sr,Sr.current),!0}function pc(x,d,v){var $=x.stateNode;if(!$)throw Error(o(169));v?(x=Da(x,d,Bi),$.__reactInternalMemoizedMergedChildContext=x,Pr(Sr),Pr(jr),In(jr,x)):Pr(Sr),In(Sr,v)}var qs=Math.clz32?Math.clz32:vu,qo=Math.log,Kl=Math.LN2;function vu(x){return x>>>=0,x===0?32:31-(qo(x)/Kl|0)|0}var gh=64,Qo=4194304;function Tr(x){switch(x&-x){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return x&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return x}}function $i(x,d){var v=x.pendingLanes;if(v===0)return 0;var $=0,I=x.suspendedLanes,B=x.pingedLanes,W=v&268435455;if(W!==0){var pe=W&~I;pe!==0?$=Tr(pe):(B&=W,B!==0&&($=Tr(B)))}else W=v&~I,W!==0?$=Tr(W):B!==0&&($=Tr(B));if($===0)return 0;if(d!==0&&d!==$&&!(d&I)&&(I=$&-$,B=d&-d,I>=B||I===16&&(B&4194240)!==0))return d;if($&4&&($|=v&16),d=x.entangledLanes,d!==0)for(x=x.entanglements,d&=$;0<d;)v=31-qs(d),I=1<<v,$|=x[v],d&=~I;return $}function Pc(x,d){switch(x){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vh(x,d){for(var v=x.suspendedLanes,$=x.pingedLanes,I=x.expirationTimes,B=x.pendingLanes;0<B;){var W=31-qs(B),pe=1<<W,Oe=I[W];Oe===-1?(!(pe&v)||pe&$)&&(I[W]=Pc(pe,d)):Oe<=d&&(x.expiredLanes|=pe),B&=~pe}}function Bc(x){return x=x.pendingLanes&-1073741825,x!==0?x:x&1073741824?1073741824:0}function xl(x){for(var d=[],v=0;31>v;v++)d.push(x);return d}function _u(x,d,v){x.pendingLanes|=d,d!==536870912&&(x.suspendedLanes=0,x.pingedLanes=0),x=x.eventTimes,d=31-qs(d),x[d]=v}function $l(x,d){var v=x.pendingLanes&~d;x.pendingLanes=d,x.suspendedLanes=0,x.pingedLanes=0,x.expiredLanes&=d,x.mutableReadLanes&=d,x.entangledLanes&=d,d=x.entanglements;var $=x.eventTimes;for(x=x.expirationTimes;0<v;){var I=31-qs(v),B=1<<I;d[I]=0,$[I]=-1,x[I]=-1,v&=~B}}function Cl(x,d){var v=x.entangledLanes|=d;for(x=x.entanglements;v;){var $=31-qs(v),I=1<<$;I&d|x[$]&d&&(x[$]|=d),v&=~I}}var wr=0;function Er(x){return x&=-x,1<x?4<x?x&268435455?16:536870912:4:1}var Jl=r.unstable_scheduleCallback,rl=r.unstable_cancelCallback,il=r.unstable_shouldYield,yu=r.unstable_requestPaint,Qi=r.unstable_now,vs=r.unstable_ImmediatePriority,sl=r.unstable_UserBlockingPriority,Cd=r.unstable_NormalPriority,lo=r.unstable_IdlePriority,Uu=null,ca=null;function bu(x){if(ca&&typeof ca.onCommitFiberRoot=="function")try{ca.onCommitFiberRoot(Uu,x,void 0,(x.current.flags&128)===128)}catch{}}function lr(x,d){return x===d&&(x!==0||1/x===1/d)||x!==x&&d!==d}var Gn=typeof Object.is=="function"?Object.is:lr,Es=null,uo=!1,Hu=!1;function Tu(x){Es===null?Es=[x]:Es.push(x)}function _h(x){uo=!0,Tu(x)}function Pa(){if(!Hu&&Es!==null){Hu=!0;var x=0,d=wr;try{var v=Es;for(wr=1;x<v.length;x++){var $=v[x];do $=$(!0);while($!==null)}Es=null,uo=!1}catch(I){throw Es!==null&&(Es=Es.slice(x+1)),Jl(vs,Pa),I}finally{wr=d,Hu=!1}}return null}var ha=l.ReactCurrentBatchConfig;function Gu(x,d){if(Gn(x,d))return!0;if(typeof x!="object"||x===null||typeof d!="object"||d===null)return!1;var v=Object.keys(x),$=Object.keys(d);if(v.length!==$.length)return!1;for($=0;$<v.length;$++){var I=v[$];if(!Na.call(d,I)||!Gn(x[I],d[I]))return!1}return!0}function $r(x){switch(x.tag){case 5:return rn(x.type);case 16:return rn("Lazy");case 13:return rn("Suspense");case 19:return rn("SuspenseList");case 0:case 2:case 15:return x=tl(x.type,!1),x;case 11:return x=tl(x.type.render,!1),x;case 1:return x=tl(x.type,!0),x;default:return""}}function Rs(x,d){if(x&&x.defaultProps){d=s({},d),x=x.defaultProps;for(var v in x)d[v]===void 0&&(d[v]=x[v]);return d}return d}var bi=Pi(null),Ci=null,da=null,ti=null;function Su(){ti=da=Ci=null}function Ao(x,d,v){ft?(In(bi,d._currentValue),d._currentValue=v):(In(bi,d._currentValue2),d._currentValue2=v)}function wu(x){var d=bi.current;Pr(bi),ft?x._currentValue=d:x._currentValue2=d}function ol(x,d,v){for(;x!==null;){var $=x.alternate;if((x.childLanes&d)!==d?(x.childLanes|=d,$!==null&&($.childLanes|=d)):$!==null&&($.childLanes&d)!==d&&($.childLanes|=d),x===v)break;x=x.return}}function Fi(x,d){Ci=x,ti=da=null,x=x.dependencies,x!==null&&x.firstContext!==null&&(x.lanes&d&&(hl=!0),x.firstContext=null)}function Mi(x){var d=ft?x._currentValue:x._currentValue2;if(ti!==x)if(x={context:x,memoizedValue:d,next:null},da===null){if(Ci===null)throw Error(o(308));da=x,Ci.dependencies={lanes:0,firstContext:x}}else da=da.next=x;return d}var Vn=null,Ai=!1;function Jr(x){x.updateQueue={baseState:x.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dd(x,d){x=x.updateQueue,d.updateQueue===x&&(d.updateQueue={baseState:x.baseState,firstBaseUpdate:x.firstBaseUpdate,lastBaseUpdate:x.lastBaseUpdate,shared:x.shared,effects:x.effects})}function Eu(x,d){return{eventTime:x,lane:d,tag:0,payload:null,callback:null,next:null}}function ji(x,d){var v=x.updateQueue;v!==null&&(v=v.shared,nr!==null&&x.mode&1&&!(Pn&2)?(x=v.interleaved,x===null?(d.next=d,Vn===null?Vn=[v]:Vn.push(v)):(d.next=x.next,x.next=d),v.interleaved=d):(x=v.pending,x===null?d.next=d:(d.next=x.next,x.next=d),v.pending=d))}function Ba(x,d,v){if(d=d.updateQueue,d!==null&&(d=d.shared,(v&4194240)!==0)){var $=d.lanes;$&=x.pendingLanes,v|=$,d.lanes=v,Cl(x,v)}}function yh(x,d){var v=x.updateQueue,$=x.alternate;if($!==null&&($=$.updateQueue,v===$)){var I=null,B=null;if(v=v.firstBaseUpdate,v!==null){do{var W={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};B===null?I=B=W:B=B.next=W,v=v.next}while(v!==null);B===null?I=B=d:B=B.next=d}else I=B=d;v={baseState:$.baseState,firstBaseUpdate:I,lastBaseUpdate:B,shared:$.shared,effects:$.effects},x.updateQueue=v;return}x=v.lastBaseUpdate,x===null?v.firstBaseUpdate=d:x.next=d,v.lastBaseUpdate=d}function pr(x,d,v,$){var I=x.updateQueue;Ai=!1;var B=I.firstBaseUpdate,W=I.lastBaseUpdate,pe=I.shared.pending;if(pe!==null){I.shared.pending=null;var Oe=pe,tt=Oe.next;Oe.next=null,W===null?B=tt:W.next=tt,W=Oe;var xt=x.alternate;xt!==null&&(xt=xt.updateQueue,pe=xt.lastBaseUpdate,pe!==W&&(pe===null?xt.firstBaseUpdate=tt:pe.next=tt,xt.lastBaseUpdate=Oe))}if(B!==null){var Zt=I.baseState;W=0,xt=tt=Oe=null,pe=B;do{var cn=pe.lane,Tn=pe.eventTime;if(($&cn)===cn){xt!==null&&(xt=xt.next={eventTime:Tn,lane:0,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null});e:{var Sn=x,gn=pe;switch(cn=d,Tn=v,gn.tag){case 1:if(Sn=gn.payload,typeof Sn=="function"){Zt=Sn.call(Tn,Zt,cn);break e}Zt=Sn;break e;case 3:Sn.flags=Sn.flags&-65537|128;case 0:if(Sn=gn.payload,cn=typeof Sn=="function"?Sn.call(Tn,Zt,cn):Sn,cn==null)break e;Zt=s({},Zt,cn);break e;case 2:Ai=!0}}pe.callback!==null&&pe.lane!==0&&(x.flags|=64,cn=I.effects,cn===null?I.effects=[pe]:cn.push(pe))}else Tn={eventTime:Tn,lane:cn,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},xt===null?(tt=xt=Tn,Oe=Zt):xt=xt.next=Tn,W|=cn;if(pe=pe.next,pe===null){if(pe=I.shared.pending,pe===null)break;cn=pe,pe=cn.next,cn.next=null,I.lastBaseUpdate=cn,I.shared.pending=null}}while(!0);if(xt===null&&(Oe=Zt),I.baseState=Oe,I.firstBaseUpdate=tt,I.lastBaseUpdate=xt,d=I.shared.interleaved,d!==null){I=d;do W|=I.lane,I=I.next;while(I!==d)}else B===null&&(I.shared.lanes=0);lu|=W,x.lanes=W,x.memoizedState=Zt}}function Zo(x,d,v){if(x=d.effects,d.effects=null,x!==null)for(d=0;d<x.length;d++){var $=x[d],I=$.callback;if(I!==null){if($.callback=null,$=v,typeof I!="function")throw Error(o(191,I));I.call($)}}}var fd=new t.Component().refs;function lf(x,d,v,$){d=x.memoizedState,v=v($,d),v=v==null?d:s({},d,v),x.memoizedState=v,x.lanes===0&&(x.updateQueue.baseState=v)}var Fc={isMounted:function(x){return(x=x._reactInternals)?z(x)===x:!1},enqueueSetState:function(x,d,v){x=x._reactInternals;var $=Br(),I=bs(x),B=Eu($,I);B.payload=d,v!=null&&(B.callback=v),ji(x,B),d=Os(x,I,$),d!==null&&Ba(d,x,I)},enqueueReplaceState:function(x,d,v){x=x._reactInternals;var $=Br(),I=bs(x),B=Eu($,I);B.tag=1,B.payload=d,v!=null&&(B.callback=v),ji(x,B),d=Os(x,I,$),d!==null&&Ba(d,x,I)},enqueueForceUpdate:function(x,d){x=x._reactInternals;var v=Br(),$=bs(x),I=Eu(v,$);I.tag=2,d!=null&&(I.callback=d),ji(x,I),d=Os(x,$,v),d!==null&&Ba(d,x,$)}};function uf(x,d,v,$,I,B,W){return x=x.stateNode,typeof x.shouldComponentUpdate=="function"?x.shouldComponentUpdate($,B,W):d.prototype&&d.prototype.isPureReactComponent?!Gu(v,$)||!Gu(I,B):!0}function Ff(x,d,v){var $=!1,I=Nr,B=d.contextType;return typeof B=="object"&&B!==null?B=Mi(B):(I=fi(d)?Bi:jr.current,$=d.contextTypes,B=($=$!=null)?ws(x,I):Nr),d=new d(v,B),x.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Fc,x.stateNode=d,d._reactInternals=x,$&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=I,x.__reactInternalMemoizedMaskedChildContext=B),d}function wp(x,d,v,$){x=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(v,$),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(v,$),d.state!==x&&Fc.enqueueReplaceState(d,d.state,null)}function Md(x,d,v,$){var I=x.stateNode;I.props=v,I.state=x.memoizedState,I.refs=fd,Jr(x);var B=d.contextType;typeof B=="object"&&B!==null?I.context=Mi(B):(B=fi(d)?Bi:jr.current,I.context=ws(x,B)),I.state=x.memoizedState,B=d.getDerivedStateFromProps,typeof B=="function"&&(lf(x,d,B,v),I.state=x.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(d=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),d!==I.state&&Fc.enqueueReplaceState(I,I.state,null),pr(x,v,I,$),I.state=x.memoizedState),typeof I.componentDidMount=="function"&&(x.flags|=4194308)}var ql=[],ks=0,Wu=null,bh=0,Fa=[],ci=0,Cr=null,co=1,za="";function Uo(x,d){ql[ks++]=bh,ql[ks++]=Wu,Wu=x,bh=d}function Ql(x,d,v){Fa[ci++]=co,Fa[ci++]=za,Fa[ci++]=Cr,Cr=x;var $=co;x=za;var I=32-qs($)-1;$&=~(1<<I),v+=1;var B=32-qs(d)+I;if(30<B){var W=I-I%5;B=($&(1<<W)-1).toString(32),$>>=W,I-=W,co=1<<32-qs(d)+I|v<<I|$,za=B+x}else co=1<<B|v<<I|$,za=x}function Zl(x){x.return!==null&&(Uo(x,1),Ql(x,1,0))}function Fh(x){for(;x===Wu;)Wu=ql[--ks],ql[ks]=null,bh=ql[--ks],ql[ks]=null;for(;x===Cr;)Cr=Fa[--ci],Fa[ci]=null,za=Fa[--ci],Fa[ci]=null,co=Fa[--ci],Fa[ci]=null}var Yr=null,Ii=null,xr=!1,Yi=!1,fa=null;function xu(x,d){var v=jo(5,null,null,0);v.elementType="DELETED",v.stateNode=d,v.return=x,d=x.deletions,d===null?(x.deletions=[v],x.flags|=16):d.push(v)}function cf(x,d){switch(x.tag){case 5:return d=Te(d,x.type,x.pendingProps),d!==null?(x.stateNode=d,Yr=x,Ii=_t(d),!0):!1;case 6:return d=je(d,x.pendingProps),d!==null?(x.stateNode=d,Yr=x,Ii=null,!0):!1;case 13:if(d=ct(d),d!==null){var v=Cr!==null?{id:co,overflow:za}:null;return x.memoizedState={dehydrated:d,treeContext:v,retryLane:1073741824},v=jo(18,null,null,0),v.stateNode=d,v.return=x,x.child=v,Yr=x,Ii=null,!0}return!1;default:return!1}}function hf(x){return(x.mode&1)!==0&&(x.flags&128)===0}function pd(x){if(xr){var d=Ii;if(d){var v=d;if(!cf(x,d)){if(hf(x))throw Error(o(418));d=De(v);var $=Yr;d&&cf(x,d)?xu($,v):(x.flags=x.flags&-4097|2,xr=!1,Yr=x)}}else{if(hf(x))throw Error(o(418));x.flags=x.flags&-4097|2,xr=!1,Yr=x}}}function Vu(x){for(x=x.return;x!==null&&x.tag!==5&&x.tag!==3&&x.tag!==13;)x=x.return;Yr=x}function al(x){if(!Ie||x!==Yr)return!1;if(!xr)return Vu(x),xr=!0,!1;if(x.tag!==3&&(x.tag!==5||Ss(x.type)&&!ke(x.type,x.memoizedProps))){var d=Ii;if(d){if(hf(x)){for(x=Ii;x;)x=De(x);throw Error(o(418))}for(;d;)xu(x,d),d=De(d)}}if(Vu(x),x.tag===13){if(!Ie)throw Error(o(316));if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));Ii=br(x)}else Ii=Yr?De(x.stateNode):null;return!0}function zc(){Ie&&(Ii=Yr=null,Yi=xr=!1)}function zh(x){fa===null?fa=[x]:fa.push(x)}function ju(x,d,v){if(x=v.ref,x!==null&&typeof x!="function"&&typeof x!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(o(309));var $=v.stateNode}if(!$)throw Error(o(147,x));var I=$,B=""+x;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===B?d.ref:(d=function(W){var pe=I.refs;pe===fd&&(pe=I.refs={}),W===null?delete pe[B]:pe[B]=W},d._stringRef=B,d)}if(typeof x!="string")throw Error(o(284));if(!v._owner)throw Error(o(290,x))}return x}function eu(x,d){throw x=Object.prototype.toString.call(d),Error(o(31,x==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":x))}function Hs(x){var d=x._init;return d(x._payload)}function tu(x){function d(Et,Ce){if(x){var Ne=Et.deletions;Ne===null?(Et.deletions=[Ce],Et.flags|=16):Ne.push(Ce)}}function v(Et,Ce){if(!x)return null;for(;Ce!==null;)d(Et,Ce),Ce=Ce.sibling;return null}function $(Et,Ce){for(Et=new Map;Ce!==null;)Ce.key!==null?Et.set(Ce.key,Ce):Et.set(Ce.index,Ce),Ce=Ce.sibling;return Et}function I(Et,Ce){return Et=Pl(Et,Ce),Et.index=0,Et.sibling=null,Et}function B(Et,Ce,Ne){return Et.index=Ne,x?(Ne=Et.alternate,Ne!==null?(Ne=Ne.index,Ne<Ce?(Et.flags|=2,Ce):Ne):(Et.flags|=2,Ce)):(Et.flags|=1048576,Ce)}function W(Et){return x&&Et.alternate===null&&(Et.flags|=2),Et}function pe(Et,Ce,Ne,ot){return Ce===null||Ce.tag!==6?(Ce=cu(Ne,Et.mode,ot),Ce.return=Et,Ce):(Ce=I(Ce,Ne),Ce.return=Et,Ce)}function Oe(Et,Ce,Ne,ot){var jt=Ne.type;return jt===f?xt(Et,Ce,Ne.props.children,ot,Ne.key):Ce!==null&&(Ce.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===O&&Hs(jt)===Ce.type)?(ot=I(Ce,Ne.props),ot.ref=ju(Et,Ce,Ne),ot.return=Et,ot):(ot=So(Ne.type,Ne.key,Ne.props,null,Et.mode,ot),ot.ref=ju(Et,Ce,Ne),ot.return=Et,ot)}function tt(Et,Ce,Ne,ot){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Ne.containerInfo||Ce.stateNode.implementation!==Ne.implementation?(Ce=ii(Ne,Et.mode,ot),Ce.return=Et,Ce):(Ce=I(Ce,Ne.children||[]),Ce.return=Et,Ce)}function xt(Et,Ce,Ne,ot,jt){return Ce===null||Ce.tag!==7?(Ce=Bl(Ne,Et.mode,ot,jt),Ce.return=Et,Ce):(Ce=I(Ce,Ne),Ce.return=Et,Ce)}function Zt(Et,Ce,Ne){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=cu(""+Ce,Et.mode,Ne),Ce.return=Et,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case u:return Ne=So(Ce.type,Ce.key,Ce.props,null,Et.mode,Ne),Ne.ref=ju(Et,null,Ce),Ne.return=Et,Ne;case h:return Ce=ii(Ce,Et.mode,Ne),Ce.return=Et,Ce;case O:var ot=Ce._init;return Zt(Et,ot(Ce._payload),Ne)}if(le(Ce)||U(Ce))return Ce=Bl(Ce,Et.mode,Ne,null),Ce.return=Et,Ce;eu(Et,Ce)}return null}function cn(Et,Ce,Ne,ot){var jt=Ce!==null?Ce.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return jt!==null?null:pe(Et,Ce,""+Ne,ot);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case u:return Ne.key===jt?Oe(Et,Ce,Ne,ot):null;case h:return Ne.key===jt?tt(Et,Ce,Ne,ot):null;case O:return jt=Ne._init,cn(Et,Ce,jt(Ne._payload),ot)}if(le(Ne)||U(Ne))return jt!==null?null:xt(Et,Ce,Ne,ot,null);eu(Et,Ne)}return null}function Tn(Et,Ce,Ne,ot,jt){if(typeof ot=="string"&&ot!==""||typeof ot=="number")return Et=Et.get(Ne)||null,pe(Ce,Et,""+ot,jt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case u:return Et=Et.get(ot.key===null?Ne:ot.key)||null,Oe(Ce,Et,ot,jt);case h:return Et=Et.get(ot.key===null?Ne:ot.key)||null,tt(Ce,Et,ot,jt);case O:var on=ot._init;return Tn(Et,Ce,Ne,on(ot._payload),jt)}if(le(ot)||U(ot))return Et=Et.get(Ne)||null,xt(Ce,Et,ot,jt,null);eu(Ce,ot)}return null}function Sn(Et,Ce,Ne,ot){for(var jt=null,on=null,xn=Ce,On=Ce=0,zn=null;xn!==null&&On<Ne.length;On++){xn.index>On?(zn=xn,xn=null):zn=xn.sibling;var fr=cn(Et,xn,Ne[On],ot);if(fr===null){xn===null&&(xn=zn);break}x&&xn&&fr.alternate===null&&d(Et,xn),Ce=B(fr,Ce,On),on===null?jt=fr:on.sibling=fr,on=fr,xn=zn}if(On===Ne.length)return v(Et,xn),xr&&Uo(Et,On),jt;if(xn===null){for(;On<Ne.length;On++)xn=Zt(Et,Ne[On],ot),xn!==null&&(Ce=B(xn,Ce,On),on===null?jt=xn:on.sibling=xn,on=xn);return xr&&Uo(Et,On),jt}for(xn=$(Et,xn);On<Ne.length;On++)zn=Tn(xn,Et,On,Ne[On],ot),zn!==null&&(x&&zn.alternate!==null&&xn.delete(zn.key===null?On:zn.key),Ce=B(zn,Ce,On),on===null?jt=zn:on.sibling=zn,on=zn);return x&&xn.forEach(function(Rr){return d(Et,Rr)}),xr&&Uo(Et,On),jt}function gn(Et,Ce,Ne,ot){var jt=U(Ne);if(typeof jt!="function")throw Error(o(150));if(Ne=jt.call(Ne),Ne==null)throw Error(o(151));for(var on=jt=null,xn=Ce,On=Ce=0,zn=null,fr=Ne.next();xn!==null&&!fr.done;On++,fr=Ne.next()){xn.index>On?(zn=xn,xn=null):zn=xn.sibling;var Rr=cn(Et,xn,fr.value,ot);if(Rr===null){xn===null&&(xn=zn);break}x&&xn&&Rr.alternate===null&&d(Et,xn),Ce=B(Rr,Ce,On),on===null?jt=Rr:on.sibling=Rr,on=Rr,xn=zn}if(fr.done)return v(Et,xn),xr&&Uo(Et,On),jt;if(xn===null){for(;!fr.done;On++,fr=Ne.next())fr=Zt(Et,fr.value,ot),fr!==null&&(Ce=B(fr,Ce,On),on===null?jt=fr:on.sibling=fr,on=fr);return xr&&Uo(Et,On),jt}for(xn=$(Et,xn);!fr.done;On++,fr=Ne.next())fr=Tn(xn,Et,On,fr.value,ot),fr!==null&&(x&&fr.alternate!==null&&xn.delete(fr.key===null?On:fr.key),Ce=B(fr,Ce,On),on===null?jt=fr:on.sibling=fr,on=fr);return x&&xn.forEach(function(Fl){return d(Et,Fl)}),xr&&Uo(Et,On),jt}function Ur(Et,Ce,Ne,ot){if(typeof Ne=="object"&&Ne!==null&&Ne.type===f&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case u:e:{for(var jt=Ne.key,on=Ce;on!==null;){if(on.key===jt){if(jt=Ne.type,jt===f){if(on.tag===7){v(Et,on.sibling),Ce=I(on,Ne.props.children),Ce.return=Et,Et=Ce;break e}}else if(on.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===O&&Hs(jt)===on.type){v(Et,on.sibling),Ce=I(on,Ne.props),Ce.ref=ju(Et,on,Ne),Ce.return=Et,Et=Ce;break e}v(Et,on);break}else d(Et,on);on=on.sibling}Ne.type===f?(Ce=Bl(Ne.props.children,Et.mode,ot,Ne.key),Ce.return=Et,Et=Ce):(ot=So(Ne.type,Ne.key,Ne.props,null,Et.mode,ot),ot.ref=ju(Et,Ce,Ne),ot.return=Et,Et=ot)}return W(Et);case h:e:{for(on=Ne.key;Ce!==null;){if(Ce.key===on)if(Ce.tag===4&&Ce.stateNode.containerInfo===Ne.containerInfo&&Ce.stateNode.implementation===Ne.implementation){v(Et,Ce.sibling),Ce=I(Ce,Ne.children||[]),Ce.return=Et,Et=Ce;break e}else{v(Et,Ce);break}else d(Et,Ce);Ce=Ce.sibling}Ce=ii(Ne,Et.mode,ot),Ce.return=Et,Et=Ce}return W(Et);case O:return on=Ne._init,Ur(Et,Ce,on(Ne._payload),ot)}if(le(Ne))return Sn(Et,Ce,Ne,ot);if(U(Ne))return gn(Et,Ce,Ne,ot);eu(Et,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"?(Ne=""+Ne,Ce!==null&&Ce.tag===6?(v(Et,Ce.sibling),Ce=I(Ce,Ne),Ce.return=Et,Et=Ce):(v(Et,Ce),Ce=cu(Ne,Et.mode,ot),Ce.return=Et,Et=Ce),W(Et)):v(Et,Ce)}return Ur}var Uh=tu(!0),Uc=tu(!1),Hc={},is=Pi(Hc),Hr=Pi(Hc),Ml=Pi(Hc);function Ua(x){if(x===Hc)throw Error(o(174));return x}function nu(x,d){In(Ml,d),In(Hr,x),In(is,Hc),x=ge(d),Pr(is),In(is,x)}function $u(){Pr(is),Pr(Hr),Pr(Ml)}function Th(x){var d=Ua(Ml.current),v=Ua(is.current);d=$e(v,x.type,d),v!==d&&(In(Hr,x),In(is,d))}function Ad(x){Hr.current===x&&(Pr(is),Pr(Hr))}var pi=Pi(0);function ye(x){for(var d=x;d!==null;){if(d.tag===13){var v=d.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||Ht(v)||nn(v)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===x)break;for(;d.sibling===null;){if(d.return===null||d.return===x)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Xe=[];function Pe(){for(var x=0;x<Xe.length;x++){var d=Xe[x];ft?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}Xe.length=0}var Nt=l.ReactCurrentDispatcher,sn=l.ReactCurrentBatchConfig,Rn=0,Jn=null,_n=null,Gr=null,ho=!1,Ti=!1,fo=0,ll=0;function zi(){throw Error(o(321))}function _s(x,d){if(d===null)return!1;for(var v=0;v<d.length&&v<x.length;v++)if(!Gn(x[v],d[v]))return!1;return!0}function Cu(x,d,v,$,I,B){if(Rn=B,Jn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Nt.current=x===null||x.memoizedState===null?Ku:Ju,x=v($,I),Ti){B=0;do{if(Ti=!1,fo=0,25<=B)throw Error(o(301));B+=1,Gr=_n=null,d.updateQueue=null,Nt.current=wh,x=v($,I)}while(Ti)}if(Nt.current=iu,d=_n!==null&&_n.next!==null,Rn=0,Gr=_n=Jn=null,ho=!1,d)throw Error(o(300));return x}function qn(){var x=fo!==0;return fo=0,x}function pa(){var x={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?Jn.memoizedState=Gr=x:Gr=Gr.next=x,Gr}function Qs(){if(_n===null){var x=Jn.alternate;x=x!==null?x.memoizedState:null}else x=_n.next;var d=Gr===null?Jn.memoizedState:Gr.next;if(d!==null)Gr=d,_n=x;else{if(x===null)throw Error(o(310));_n=x,x={memoizedState:_n.memoizedState,baseState:_n.baseState,baseQueue:_n.baseQueue,queue:_n.queue,next:null},Gr===null?Jn.memoizedState=Gr=x:Gr=Gr.next=x}return Gr}function Gs(x,d){return typeof d=="function"?d(x):d}function Ha(x){var d=Qs(),v=d.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=x;var $=_n,I=$.baseQueue,B=v.pending;if(B!==null){if(I!==null){var W=I.next;I.next=B.next,B.next=W}$.baseQueue=I=B,v.pending=null}if(I!==null){B=I.next,$=$.baseState;var pe=W=null,Oe=null,tt=B;do{var xt=tt.lane;if((Rn&xt)===xt)Oe!==null&&(Oe=Oe.next={lane:0,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),$=tt.hasEagerState?tt.eagerState:x($,tt.action);else{var Zt={lane:xt,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null};Oe===null?(pe=Oe=Zt,W=$):Oe=Oe.next=Zt,Jn.lanes|=xt,lu|=xt}tt=tt.next}while(tt!==null&&tt!==B);Oe===null?W=$:Oe.next=pe,Gn($,d.memoizedState)||(hl=!0),d.memoizedState=$,d.baseState=W,d.baseQueue=Oe,v.lastRenderedState=$}if(x=v.interleaved,x!==null){I=x;do B=I.lane,Jn.lanes|=B,lu|=B,I=I.next;while(I!==x)}else I===null&&(v.lanes=0);return[d.memoizedState,v.dispatch]}function Hh(x){var d=Qs(),v=d.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=x;var $=v.dispatch,I=v.pending,B=d.memoizedState;if(I!==null){v.pending=null;var W=I=I.next;do B=x(B,W.action),W=W.next;while(W!==I);Gn(B,d.memoizedState)||(hl=!0),d.memoizedState=B,d.baseQueue===null&&(d.baseState=B),v.lastRenderedState=B}return[B,$]}function Sh(){}function mc(x,d){var v=Jn,$=Qs(),I=d(),B=!Gn($.memoizedState,I);if(B&&($.memoizedState=I,hl=!0),$=$.queue,Al(Gh.bind(null,v,$,x),[x]),$.getSnapshot!==d||B||Gr!==null&&Gr.memoizedState.tag&1){if(v.flags|=2048,gc(9,Gc.bind(null,v,$,I,d),void 0,null),nr===null)throw Error(o(349));Rn&30||ea(v,d,I)}return I}function ea(x,d,v){x.flags|=16384,x={getSnapshot:d,value:v},d=Jn.updateQueue,d===null?(d={lastEffect:null,stores:null},Jn.updateQueue=d,d.stores=[x]):(v=d.stores,v===null?d.stores=[x]:v.push(x))}function Gc(x,d,v,$){d.value=v,d.getSnapshot=$,Ga(d)&&Os(x,1,-1)}function Gh(x,d,v){return v(function(){Ga(d)&&Os(x,1,-1)})}function Ga(x){var d=x.getSnapshot;x=x.value;try{var v=d();return!Gn(x,v)}catch{return!0}}function Wh(x){var d=pa();return typeof x=="function"&&(x=x()),d.memoizedState=d.baseState=x,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:x},d.queue=x,x=x.dispatch=ni.bind(null,Jn,x),[d.memoizedState,x]}function gc(x,d,v,$){return x={tag:x,create:d,destroy:v,deps:$,next:null},d=Jn.updateQueue,d===null?(d={lastEffect:null,stores:null},Jn.updateQueue=d,d.lastEffect=x.next=x):(v=d.lastEffect,v===null?d.lastEffect=x.next=x:($=v.next,v.next=x,x.next=$,d.lastEffect=x)),x}function Yu(){return Qs().memoizedState}function md(x,d,v,$){var I=pa();Jn.flags|=x,I.memoizedState=gc(1|d,v,void 0,$===void 0?null:$)}function ta(x,d,v,$){var I=Qs();$=$===void 0?null:$;var B=void 0;if(_n!==null){var W=_n.memoizedState;if(B=W.destroy,$!==null&&_s($,W.deps)){I.memoizedState=gc(d,v,B,$);return}}Jn.flags|=x,I.memoizedState=gc(1|d,v,B,$)}function po(x,d){return md(8390656,8,x,d)}function Al(x,d){return ta(2048,8,x,d)}function Vh(x,d){return ta(4,2,x,d)}function Ui(x,d){return ta(4,4,x,d)}function gd(x,d){if(typeof d=="function")return x=x(),d(x),function(){d(null)};if(d!=null)return x=x(),d.current=x,function(){d.current=null}}function Xu(x,d,v){return v=v!=null?v.concat([x]):null,ta(4,4,gd.bind(null,d,x),v)}function ru(){}function Wc(x,d){var v=Qs();d=d===void 0?null:d;var $=v.memoizedState;return $!==null&&d!==null&&_s(d,$[1])?$[0]:(v.memoizedState=[x,d],x)}function Id(x,d){var v=Qs();d=d===void 0?null:d;var $=v.memoizedState;return $!==null&&d!==null&&_s(d,$[1])?$[0]:(x=x(),v.memoizedState=[x,d],x)}function Il(x,d){var v=wr;wr=v!==0&&4>v?v:4,x(!0);var $=sn.transition;sn.transition={};try{x(!1),d()}finally{wr=v,sn.transition=$}}function Rd(){return Qs().memoizedState}function jh(x,d,v){var $=bs(x);v={lane:$,action:v,hasEagerState:!1,eagerState:null,next:null},Ri(x)?Ep(d,v):(zf(x,d,v),v=Br(),x=Os(x,$,v),x!==null&&Rl(x,d,$))}function ni(x,d,v){var $=bs(x),I={lane:$,action:v,hasEagerState:!1,eagerState:null,next:null};if(Ri(x))Ep(d,I);else{zf(x,d,I);var B=x.alternate;if(x.lanes===0&&(B===null||B.lanes===0)&&(B=d.lastRenderedReducer,B!==null))try{var W=d.lastRenderedState,pe=B(W,v);if(I.hasEagerState=!0,I.eagerState=pe,Gn(pe,W))return}catch{}finally{}v=Br(),x=Os(x,$,v),x!==null&&Rl(x,d,$)}}function Ri(x){var d=x.alternate;return x===Jn||d!==null&&d===Jn}function Ep(x,d){Ti=ho=!0;var v=x.pending;v===null?d.next=d:(d.next=v.next,v.next=d),x.pending=d}function zf(x,d,v){nr!==null&&x.mode&1&&!(Pn&2)?(x=d.interleaved,x===null?(v.next=v,Vn===null?Vn=[d]:Vn.push(d)):(v.next=x.next,x.next=v),d.interleaved=v):(x=d.pending,x===null?v.next=v:(v.next=x.next,x.next=v),d.pending=v)}function Rl(x,d,v){if(v&4194240){var $=d.lanes;$&=x.pendingLanes,v|=$,d.lanes=v,Cl(x,v)}}var iu={readContext:Mi,useCallback:zi,useContext:zi,useEffect:zi,useImperativeHandle:zi,useInsertionEffect:zi,useLayoutEffect:zi,useMemo:zi,useReducer:zi,useRef:zi,useState:zi,useDebugValue:zi,useDeferredValue:zi,useTransition:zi,useMutableSource:zi,useSyncExternalStore:zi,useId:zi,unstable_isNewReconciler:!1},Ku={readContext:Mi,useCallback:function(x,d){return pa().memoizedState=[x,d===void 0?null:d],x},useContext:Mi,useEffect:po,useImperativeHandle:function(x,d,v){return v=v!=null?v.concat([x]):null,md(4194308,4,gd.bind(null,d,x),v)},useLayoutEffect:function(x,d){return md(4194308,4,x,d)},useInsertionEffect:function(x,d){return md(4,2,x,d)},useMemo:function(x,d){var v=pa();return d=d===void 0?null:d,x=x(),v.memoizedState=[x,d],x},useReducer:function(x,d,v){var $=pa();return d=v!==void 0?v(d):d,$.memoizedState=$.baseState=d,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:d},$.queue=x,x=x.dispatch=jh.bind(null,Jn,x),[$.memoizedState,x]},useRef:function(x){var d=pa();return x={current:x},d.memoizedState=x},useState:Wh,useDebugValue:ru,useDeferredValue:function(x){var d=Wh(x),v=d[0],$=d[1];return po(function(){var I=sn.transition;sn.transition={};try{$(x)}finally{sn.transition=I}},[x]),v},useTransition:function(){var x=Wh(!1),d=x[0];return x=Il.bind(null,x[1]),pa().memoizedState=x,[d,x]},useMutableSource:function(){},useSyncExternalStore:function(x,d,v){var $=Jn,I=pa();if(xr){if(v===void 0)throw Error(o(407));v=v()}else{if(v=d(),nr===null)throw Error(o(349));Rn&30||ea($,d,v)}I.memoizedState=v;var B={value:v,getSnapshot:d};return I.queue=B,po(Gh.bind(null,$,B,x),[x]),$.flags|=2048,gc(9,Gc.bind(null,$,B,v,d),void 0,null),v},useId:function(){var x=pa(),d=nr.identifierPrefix;if(xr){var v=za,$=co;v=($&~(1<<32-qs($)-1)).toString(32)+v,d=":"+d+"R"+v,v=fo++,0<v&&(d+="H"+v.toString(32)),d+=":"}else v=ll++,d=":"+d+"r"+v.toString(32)+":";return x.memoizedState=d},unstable_isNewReconciler:!1},Ju={readContext:Mi,useCallback:Wc,useContext:Mi,useEffect:Al,useImperativeHandle:Xu,useInsertionEffect:Vh,useLayoutEffect:Ui,useMemo:Id,useReducer:Ha,useRef:Yu,useState:function(){return Ha(Gs)},useDebugValue:ru,useDeferredValue:function(x){var d=Ha(Gs),v=d[0],$=d[1];return Al(function(){var I=sn.transition;sn.transition={};try{$(x)}finally{sn.transition=I}},[x]),v},useTransition:function(){var x=Ha(Gs)[0],d=Qs().memoizedState;return[x,d]},useMutableSource:Sh,useSyncExternalStore:mc,useId:Rd,unstable_isNewReconciler:!1},wh={readContext:Mi,useCallback:Wc,useContext:Mi,useEffect:Al,useImperativeHandle:Xu,useInsertionEffect:Vh,useLayoutEffect:Ui,useMemo:Id,useReducer:Hh,useRef:Yu,useState:function(){return Hh(Gs)},useDebugValue:ru,useDeferredValue:function(x){var d=Hh(Gs),v=d[0],$=d[1];return Al(function(){var I=sn.transition;sn.transition={};try{$(x)}finally{sn.transition=I}},[x]),v},useTransition:function(){var x=Hh(Gs)[0],d=Qs().memoizedState;return[x,d]},useMutableSource:Sh,useSyncExternalStore:mc,useId:Rd,unstable_isNewReconciler:!1};function ul(x,d){try{var v="",$=d;do v+=$r($),$=$.return;while($);var I=v}catch(B){I=`
Error generating stack: `+B.message+`
`+B.stack}return{value:x,source:d,stack:I}}function na(x,d){try{console.error(d.value)}catch(v){setTimeout(function(){throw v})}}var kl=typeof WeakMap=="function"?WeakMap:Map;function Vc(x,d,v){v=Eu(-1,v),v.tag=3,v.payload={element:null};var $=d.value;return v.callback=function(){Au||(Au=!0,Iu=$),na(x,d)},v}function Ol(x,d,v){v=Eu(-1,v),v.tag=3;var $=x.type.getDerivedStateFromError;if(typeof $=="function"){var I=d.value;v.payload=function(){return $(I)},v.callback=function(){na(x,d)}}var B=x.stateNode;return B!==null&&typeof B.componentDidCatch=="function"&&(v.callback=function(){na(x,d),typeof $!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var W=d.stack;this.componentDidCatch(d.value,{componentStack:W!==null?W:""})}),v}function jc(x,d,v){var $=x.pingCache;if($===null){$=x.pingCache=new kl;var I=new Set;$.set(d,I)}else I=$.get(d),I===void 0&&(I=new Set,$.set(d,I));I.has(v)||(I.add(v),x=to.bind(null,x,d,v),d.then(x,x))}function vc(x){do{var d;if((d=x.tag===13)&&(d=x.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return x;x=x.return}while(x!==null);return null}function kd(x,d,v,$,I){return x.mode&1?(x.flags|=65536,x.lanes=I,x):(x===d?x.flags|=65536:(x.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(d=Eu(-1,1),d.tag=2,ji(v,d))),v.lanes|=1),x)}function Wa(x){x.flags|=4}function Xr(x,d){if(x!==null&&x.child===d.child)return!0;if(d.flags&16)return!1;for(x=d.child;x!==null;){if(x.flags&12854||x.subtreeFlags&12854)return!1;x=x.sibling}return!0}var cl,Zi,ma,X;if(at)cl=function(x,d){for(var v=d.child;v!==null;){if(v.tag===5||v.tag===6)fe(x,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===d)break;for(;v.sibling===null;){if(v.return===null||v.return===d)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Zi=function(){},ma=function(x,d,v,$,I){if(x=x.memoizedProps,x!==$){var B=d.stateNode,W=Ua(is.current);v=Ue(B,v,x,$,I,W),(d.updateQueue=v)&&Wa(d)}},X=function(x,d,v,$){v!==$&&Wa(d)};else if(Ge){cl=function(x,d,v,$){for(var I=d.child;I!==null;){if(I.tag===5){var B=I.stateNode;v&&$&&(B=_r(B,I.type,I.memoizedProps,I)),fe(x,B)}else if(I.tag===6)B=I.stateNode,v&&$&&(B=ne(B,I.memoizedProps,I)),fe(x,B);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)B=I.child,B!==null&&(B.return=I),cl(x,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===d)break;for(;I.sibling===null;){if(I.return===null||I.return===d)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};var xs=function(x,d,v,$){for(var I=d.child;I!==null;){if(I.tag===5){var B=I.stateNode;v&&$&&(B=_r(B,I.type,I.memoizedProps,I)),cr(x,B)}else if(I.tag===6)B=I.stateNode,v&&$&&(B=ne(B,I.memoizedProps,I)),cr(x,B);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)B=I.child,B!==null&&(B.return=I),xs(x,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===d)break;for(;I.sibling===null;){if(I.return===null||I.return===d)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};Zi=function(x,d){var v=d.stateNode;if(!Xr(x,d)){x=v.containerInfo;var $=ar(x);xs($,d,!1,!1),v.pendingChildren=$,Wa(d),oi(x,$)}},ma=function(x,d,v,$,I){var B=x.stateNode,W=x.memoizedProps;if((x=Xr(x,d))&&W===$)d.stateNode=B;else{var pe=d.stateNode,Oe=Ua(is.current),tt=null;W!==$&&(tt=Ue(pe,v,W,$,I,Oe)),x&&tt===null?d.stateNode=B:(B=bn(B,tt,v,W,$,d,x,pe),Se(B,v,$,I,Oe)&&Wa(d),d.stateNode=B,x?Wa(d):cl(B,d,!1,!1))}},X=function(x,d,v,$){v!==$?(x=Ua(Ml.current),v=Ua(is.current),d.stateNode=qe($,x,v,d),Wa(d)):d.stateNode=x.stateNode}}else Zi=function(){},ma=function(){},X=function(){};function ga(x,d){if(!xr)switch(x.tailMode){case"hidden":d=x.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?x.tail=null:v.sibling=null;break;case"collapsed":v=x.tail;for(var $=null;v!==null;)v.alternate!==null&&($=v),v=v.sibling;$===null?d||x.tail===null?x.tail=null:x.tail.sibling=null:$.sibling=null}}function Ir(x){var d=x.alternate!==null&&x.alternate.child===x.child,v=0,$=0;if(d)for(var I=x.child;I!==null;)v|=I.lanes|I.childLanes,$|=I.subtreeFlags&14680064,$|=I.flags&14680064,I.return=x,I=I.sibling;else for(I=x.child;I!==null;)v|=I.lanes|I.childLanes,$|=I.subtreeFlags,$|=I.flags,I.return=x,I=I.sibling;return x.subtreeFlags|=$,x.childLanes=v,d}function mn(x,d,v){var $=d.pendingProps;switch(Fh(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ir(d),null;case 1:return fi(d.type)&&gs(),Ir(d),null;case 3:return $=d.stateNode,$u(),Pr(Sr),Pr(jr),Pe(),$.pendingContext&&($.context=$.pendingContext,$.pendingContext=null),(x===null||x.child===null)&&(al(d)?Wa(d):x===null||x.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,fa!==null&&(En(fa),fa=null))),Zi(x,d),Ir(d),null;case 5:Ad(d),v=Ua(Ml.current);var I=d.type;if(x!==null&&d.stateNode!=null)ma(x,d,I,$,v),x.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!$){if(d.stateNode===null)throw Error(o(166));return Ir(d),null}if(x=Ua(is.current),al(d)){if(!Ie)throw Error(o(175));x=Xt(d.stateNode,d.type,d.memoizedProps,v,x,d,!Yi),d.updateQueue=x,x!==null&&Wa(d)}else{var B=se(I,$,v,x,d);cl(B,d,!1,!1),d.stateNode=B,Se(B,I,$,v,x)&&Wa(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Ir(d),null;case 6:if(x&&d.stateNode!=null)X(x,d,x.memoizedProps,$);else{if(typeof $!="string"&&d.stateNode===null)throw Error(o(166));if(x=Ua(Ml.current),v=Ua(is.current),al(d)){if(!Ie)throw Error(o(176));if(x=d.stateNode,$=d.memoizedProps,(v=Wn(x,$,d,!Yi))&&(I=Yr,I!==null))switch(B=(I.mode&1)!==0,I.tag){case 3:La(I.stateNode.containerInfo,x,$,B);break;case 5:Mo(I.type,I.memoizedProps,I.stateNode,x,$,B)}v&&Wa(d)}else d.stateNode=qe($,x,v,d)}return Ir(d),null;case 13:if(Pr(pi),$=d.memoizedState,xr&&Ii!==null&&(d.mode&1)!==0&&(d.flags&128)===0){for(x=Ii;x;)x=De(x);return zc(),d.flags|=98560,d}if($!==null&&$.dehydrated!==null){if($=al(d),x===null){if(!$)throw Error(o(318));if(!Ie)throw Error(o(344));if(x=d.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(o(317));ir(x,d)}else zc(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return Ir(d),null}return fa!==null&&(En(fa),fa=null),d.flags&128?(d.lanes=v,d):($=$!==null,v=!1,x===null?al(d):v=x.memoizedState!==null,$&&!v&&(d.child.flags|=8192,d.mode&1&&(x===null||pi.current&1?us===0&&(us=3):Jh())),d.updateQueue!==null&&(d.flags|=4),Ir(d),null);case 4:return $u(),Zi(x,d),x===null&&it(d.stateNode.containerInfo),Ir(d),null;case 10:return wu(d.type._context),Ir(d),null;case 17:return fi(d.type)&&gs(),Ir(d),null;case 19:if(Pr(pi),I=d.memoizedState,I===null)return Ir(d),null;if($=(d.flags&128)!==0,B=I.rendering,B===null)if($)ga(I,!1);else{if(us!==0||x!==null&&x.flags&128)for(x=d.child;x!==null;){if(B=ye(x),B!==null){for(d.flags|=128,ga(I,!1),x=B.updateQueue,x!==null&&(d.updateQueue=x,d.flags|=4),d.subtreeFlags=0,x=v,$=d.child;$!==null;)v=$,I=x,v.flags&=14680066,B=v.alternate,B===null?(v.childLanes=0,v.lanes=I,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=B.childLanes,v.lanes=B.lanes,v.child=B.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=B.memoizedProps,v.memoizedState=B.memoizedState,v.updateQueue=B.updateQueue,v.type=B.type,I=B.dependencies,v.dependencies=I===null?null:{lanes:I.lanes,firstContext:I.firstContext}),$=$.sibling;return In(pi,pi.current&1|2),d.child}x=x.sibling}I.tail!==null&&Qi()>_d&&(d.flags|=128,$=!0,ga(I,!1),d.lanes=4194304)}else{if(!$)if(x=ye(B),x!==null){if(d.flags|=128,$=!0,x=x.updateQueue,x!==null&&(d.updateQueue=x,d.flags|=4),ga(I,!0),I.tail===null&&I.tailMode==="hidden"&&!B.alternate&&!xr)return Ir(d),null}else 2*Qi()-I.renderingStartTime>_d&&v!==1073741824&&(d.flags|=128,$=!0,ga(I,!1),d.lanes=4194304);I.isBackwards?(B.sibling=d.child,d.child=B):(x=I.last,x!==null?x.sibling=B:d.child=B,I.last=B)}return I.tail!==null?(d=I.tail,I.rendering=d,I.tail=d.sibling,I.renderingStartTime=Qi(),d.sibling=null,x=pi.current,In(pi,$?x&1|2:x&1),d):(Ir(d),null);case 22:case 23:return Ut(),$=d.memoizedState!==null,x!==null&&x.memoizedState!==null!==$&&(d.flags|=8192),$&&d.mode&1?Zr&1073741824&&(Ir(d),at&&d.subtreeFlags&6&&(d.flags|=8192)):Ir(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}var Uf=l.ReactCurrentOwner,hl=!1;function ki(x,d,v,$){d.child=x===null?Uc(d,null,v,$):Uh(d,x.child,v,$)}function hi(x,d,v,$,I){v=v.render;var B=d.ref;return Fi(d,I),$=Cu(x,d,v,$,B,I),v=qn(),x!==null&&!hl?(d.updateQueue=x.updateQueue,d.flags&=-2053,x.lanes&=~I,mi(x,d,I)):(xr&&v&&Zl(d),d.flags|=1,ki(x,d,$,I),d.child)}function es(x,d,v,$,I){if(x===null){var B=v.type;return typeof B=="function"&&!To(B)&&B.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(d.tag=15,d.type=B,ss(x,d,B,$,I)):(x=So(v.type,null,$,d,d.mode,I),x.ref=d.ref,x.return=d,d.child=x)}if(B=x.child,(x.lanes&I)===0){var W=B.memoizedProps;if(v=v.compare,v=v!==null?v:Gu,v(W,$)&&x.ref===d.ref)return mi(x,d,I)}return d.flags|=1,x=Pl(B,$),x.ref=d.ref,x.return=d,d.child=x}function ss(x,d,v,$,I){if(x!==null&&Gu(x.memoizedProps,$)&&x.ref===d.ref)if(hl=!1,(x.lanes&I)!==0)x.flags&131072&&(hl=!0);else return d.lanes=x.lanes,mi(x,d,I);return _a(x,d,v,$,I)}function Yc(x,d,v){var $=d.pendingProps,I=$.children,B=x!==null?x.memoizedState:null;if($.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},In(ko,Zr),Zr|=v;else if(v&1073741824)d.memoizedState={baseLanes:0,cachePool:null},$=B!==null?B.baseLanes:v,In(ko,Zr),Zr|=$;else return x=B!==null?B.baseLanes|v:v,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:x,cachePool:null},d.updateQueue=null,In(ko,Zr),Zr|=x,null;else B!==null?($=B.baseLanes|v,d.memoizedState=null):$=v,In(ko,Zr),Zr|=$;return ki(x,d,I,v),d.child}function va(x,d){var v=d.ref;(x===null&&v!==null||x!==null&&x.ref!==v)&&(d.flags|=512,d.flags|=2097152)}function _a(x,d,v,$,I){var B=fi(v)?Bi:jr.current;return B=ws(d,B),Fi(d,I),v=Cu(x,d,v,$,B,I),$=qn(),x!==null&&!hl?(d.updateQueue=x.updateQueue,d.flags&=-2053,x.lanes&=~I,mi(x,d,I)):(xr&&$&&Zl(d),d.flags|=1,ki(x,d,v,I),d.child)}function os(x,d,v,$,I){if(fi(v)){var B=!0;fc(d)}else B=!1;if(Fi(d,I),d.stateNode===null)x!==null&&(x.alternate=null,d.alternate=null,d.flags|=2),Ff(d,v,$),Md(d,v,$,I),$=!0;else if(x===null){var W=d.stateNode,pe=d.memoizedProps;W.props=pe;var Oe=W.context,tt=v.contextType;typeof tt=="object"&&tt!==null?tt=Mi(tt):(tt=fi(v)?Bi:jr.current,tt=ws(d,tt));var xt=v.getDerivedStateFromProps,Zt=typeof xt=="function"||typeof W.getSnapshotBeforeUpdate=="function";Zt||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(pe!==$||Oe!==tt)&&wp(d,W,$,tt),Ai=!1;var cn=d.memoizedState;W.state=cn,pr(d,$,W,I),Oe=d.memoizedState,pe!==$||cn!==Oe||Sr.current||Ai?(typeof xt=="function"&&(lf(d,v,xt,$),Oe=d.memoizedState),(pe=Ai||uf(d,v,pe,$,cn,Oe,tt))?(Zt||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(d.flags|=4194308)):(typeof W.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=$,d.memoizedState=Oe),W.props=$,W.state=Oe,W.context=tt,$=pe):(typeof W.componentDidMount=="function"&&(d.flags|=4194308),$=!1)}else{W=d.stateNode,dd(x,d),pe=d.memoizedProps,tt=d.type===d.elementType?pe:Rs(d.type,pe),W.props=tt,Zt=d.pendingProps,cn=W.context,Oe=v.contextType,typeof Oe=="object"&&Oe!==null?Oe=Mi(Oe):(Oe=fi(v)?Bi:jr.current,Oe=ws(d,Oe));var Tn=v.getDerivedStateFromProps;(xt=typeof Tn=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(pe!==Zt||cn!==Oe)&&wp(d,W,$,Oe),Ai=!1,cn=d.memoizedState,W.state=cn,pr(d,$,W,I);var Sn=d.memoizedState;pe!==Zt||cn!==Sn||Sr.current||Ai?(typeof Tn=="function"&&(lf(d,v,Tn,$),Sn=d.memoizedState),(tt=Ai||uf(d,v,tt,$,cn,Sn,Oe)||!1)?(xt||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate($,Sn,Oe),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate($,Sn,Oe)),typeof W.componentDidUpdate=="function"&&(d.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof W.componentDidUpdate!="function"||pe===x.memoizedProps&&cn===x.memoizedState||(d.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||pe===x.memoizedProps&&cn===x.memoizedState||(d.flags|=1024),d.memoizedProps=$,d.memoizedState=Sn),W.props=$,W.state=Sn,W.context=Oe,$=tt):(typeof W.componentDidUpdate!="function"||pe===x.memoizedProps&&cn===x.memoizedState||(d.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||pe===x.memoizedProps&&cn===x.memoizedState||(d.flags|=1024),$=!1)}return Xc(x,d,v,$,B,I)}function Xc(x,d,v,$,I,B){va(x,d);var W=(d.flags&128)!==0;if(!$&&!W)return I&&pc(d,v,!1),mi(x,d,B);$=d.stateNode,Uf.current=d;var pe=W&&typeof v.getDerivedStateFromError!="function"?null:$.render();return d.flags|=1,x!==null&&W?(d.child=Uh(d,x.child,null,B),d.child=Uh(d,null,pe,B)):ki(x,d,pe,B),d.memoizedState=$.state,I&&pc(d,v,!0),d.child}function ra(x){var d=x.stateNode;d.pendingContext?nl(x,d.pendingContext,d.pendingContext!==d.context):d.context&&nl(x,d.context,!1),nu(x,d.containerInfo)}function Od(x,d,v,$,I){return zc(),zh(I),d.flags|=256,ki(x,d,v,$),d.child}var Ld={dehydrated:null,treeContext:null,retryLane:0};function Yh(x){return{baseLanes:x,cachePool:null}}function Ws(x,d,v){var $=d.pendingProps,I=pi.current,B=!1,W=(d.flags&128)!==0,pe;if((pe=W)||(pe=x!==null&&x.memoizedState===null?!1:(I&2)!==0),pe?(B=!0,d.flags&=-129):(x===null||x.memoizedState!==null)&&(I|=1),In(pi,I&1),x===null)return pd(d),x=d.memoizedState,x!==null&&(x=x.dehydrated,x!==null)?(d.mode&1?nn(x)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(I=$.children,x=$.fallback,B?($=d.mode,B=d.child,I={mode:"hidden",children:I},!($&1)&&B!==null?(B.childLanes=0,B.pendingProps=I):B=Ka(I,$,0,null),x=Bl(x,$,v,null),B.return=d,x.return=d,B.sibling=x,d.child=B,d.child.memoizedState=Yh(v),d.memoizedState=Ld,x):Kn(d,I));if(I=x.memoizedState,I!==null){if(pe=I.dehydrated,pe!==null){if(W)return d.flags&256?(d.flags&=-257,Hi(x,d,v,Error(o(422)))):d.memoizedState!==null?(d.child=x.child,d.flags|=128,null):(B=$.fallback,I=d.mode,$=Ka({mode:"visible",children:$.children},I,0,null),B=Bl(B,I,v,null),B.flags|=2,$.return=d,B.return=d,$.sibling=B,d.child=$,d.mode&1&&Uh(d,x.child,null,v),d.child.memoizedState=Yh(v),d.memoizedState=Ld,B);if(!(d.mode&1))d=Hi(x,d,v,null);else if(nn(pe))d=Hi(x,d,v,Error(o(419)));else if($=(v&x.childLanes)!==0,hl||$){if($=nr,$!==null){switch(v&-v){case 4:B=2;break;case 16:B=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:B=32;break;case 536870912:B=268435456;break;default:B=0}$=B&($.suspendedLanes|v)?0:B,$!==0&&$!==I.retryLane&&(I.retryLane=$,Os(x,$,-1))}Jh(),d=Hi(x,d,v,Error(o(421)))}else Ht(pe)?(d.flags|=128,d.child=x.child,d=Mh.bind(null,x),kn(pe,d),d=null):(v=I.treeContext,Ie&&(Ii=St(pe),Yr=d,xr=!0,fa=null,Yi=!1,v!==null&&(Fa[ci++]=co,Fa[ci++]=za,Fa[ci++]=Cr,co=v.id,za=v.overflow,Cr=d)),d=Kn(d,d.pendingProps.children),d.flags|=4096);return d}return B?($=Zs(x,d,$.children,$.fallback,v),B=d.child,I=x.child.memoizedState,B.memoizedState=I===null?Yh(v):{baseLanes:I.baseLanes|v,cachePool:null},B.childLanes=x.childLanes&~v,d.memoizedState=Ld,$):(v=Vs(x,d,$.children,v),d.memoizedState=null,v)}return B?($=Zs(x,d,$.children,$.fallback,v),B=d.child,I=x.child.memoizedState,B.memoizedState=I===null?Yh(v):{baseLanes:I.baseLanes|v,cachePool:null},B.childLanes=x.childLanes&~v,d.memoizedState=Ld,$):(v=Vs(x,d,$.children,v),d.memoizedState=null,v)}function Kn(x,d){return d=Ka({mode:"visible",children:d},x.mode,0,null),d.return=x,x.child=d}function Vs(x,d,v,$){var I=x.child;return x=I.sibling,v=Pl(I,{mode:"visible",children:v}),!(d.mode&1)&&(v.lanes=$),v.return=d,v.sibling=null,x!==null&&($=d.deletions,$===null?(d.deletions=[x],d.flags|=16):$.push(x)),d.child=v}function Zs(x,d,v,$,I){var B=d.mode;x=x.child;var W=x.sibling,pe={mode:"hidden",children:v};return!(B&1)&&d.child!==x?(v=d.child,v.childLanes=0,v.pendingProps=pe,d.deletions=null):(v=Pl(x,pe),v.subtreeFlags=x.subtreeFlags&14680064),W!==null?$=Pl(W,$):($=Bl($,B,I,null),$.flags|=2),$.return=d,v.return=d,v.sibling=$,d.child=v,$}function Hi(x,d,v,$){return $!==null&&zh($),Uh(d,x.child,null,v),x=Kn(d,d.pendingProps.children),x.flags|=2,d.memoizedState=null,x}function su(x,d,v){x.lanes|=d;var $=x.alternate;$!==null&&($.lanes|=d),ol(x.return,d,v)}function Ho(x,d,v,$,I){var B=x.memoizedState;B===null?x.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:$,tail:v,tailMode:I}:(B.isBackwards=d,B.rendering=null,B.renderingStartTime=0,B.last=$,B.tail=v,B.tailMode=I)}function $n(x,d,v){var $=d.pendingProps,I=$.revealOrder,B=$.tail;if(ki(x,d,$.children,v),$=pi.current,($&2)!==0)$=$&1|2,d.flags|=128;else{if(x!==null&&x.flags&128)e:for(x=d.child;x!==null;){if(x.tag===13)x.memoizedState!==null&&su(x,v,d);else if(x.tag===19)su(x,v,d);else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break e;for(;x.sibling===null;){if(x.return===null||x.return===d)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}$&=1}if(In(pi,$),(d.mode&1)===0)d.memoizedState=null;else switch(I){case"forwards":for(v=d.child,I=null;v!==null;)x=v.alternate,x!==null&&ye(x)===null&&(I=v),v=v.sibling;v=I,v===null?(I=d.child,d.child=null):(I=v.sibling,v.sibling=null),Ho(d,!1,I,v,B);break;case"backwards":for(v=null,I=d.child,d.child=null;I!==null;){if(x=I.alternate,x!==null&&ye(x)===null){d.child=I;break}x=I.sibling,I.sibling=v,v=I,I=x}Ho(d,!0,v,null,B);break;case"together":Ho(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function mi(x,d,v){if(x!==null&&(d.dependencies=x.dependencies),lu|=d.lanes,(v&d.childLanes)===0)return null;if(x!==null&&d.child!==x.child)throw Error(o(153));if(d.child!==null){for(x=d.child,v=Pl(x,x.pendingProps),d.child=v,v.return=d;x.sibling!==null;)x=x.sibling,v=v.sibling=Pl(x,x.pendingProps),v.return=d;v.sibling=null}return d.child}function gi(x,d,v){switch(d.tag){case 3:ra(d),zc();break;case 5:Th(d);break;case 1:fi(d.type)&&fc(d);break;case 4:nu(d,d.stateNode.containerInfo);break;case 10:Ao(d,d.type._context,d.memoizedProps.value);break;case 13:var $=d.memoizedState;if($!==null)return $.dehydrated!==null?(In(pi,pi.current&1),d.flags|=128,null):v&d.child.childLanes?Ws(x,d,v):(In(pi,pi.current&1),x=mi(x,d,v),x!==null?x.sibling:null);In(pi,pi.current&1);break;case 19:if($=(v&d.childLanes)!==0,(x.flags&128)!==0){if($)return $n(x,d,v);d.flags|=128}var I=d.memoizedState;if(I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),In(pi,pi.current),$)break;return null;case 22:case 23:return d.lanes=0,Yc(x,d,v)}return mi(x,d,v)}function Hf(x,d){switch(Fh(d),d.tag){case 1:return fi(d.type)&&gs(),x=d.flags,x&65536?(d.flags=x&-65537|128,d):null;case 3:return $u(),Pr(Sr),Pr(jr),Pe(),x=d.flags,x&65536&&!(x&128)?(d.flags=x&-65537|128,d):null;case 5:return Ad(d),null;case 13:if(Pr(pi),x=d.memoizedState,x!==null&&x.dehydrated!==null){if(d.alternate===null)throw Error(o(340));zc()}return x=d.flags,x&65536?(d.flags=x&-65537|128,d):null;case 19:return Pr(pi),null;case 4:return $u(),null;case 10:return wu(d.type._context),null;case 22:case 23:return Ut(),null;case 24:return null;default:return null}}var Eh=!1,mo=!1,ya=typeof WeakSet=="function"?WeakSet:Set,Mn=null;function yn(x,d){var v=x.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch($){Oo(x,d,$)}else v.current=null}function dl(x,d,v){try{v()}catch($){Oo(x,d,$)}}var _c=!1;function xp(x,d){for(K(x.containerInfo),Mn=d;Mn!==null;)if(x=Mn,d=x.child,(x.subtreeFlags&1028)!==0&&d!==null)d.return=x,Mn=d;else for(;Mn!==null;){x=Mn;try{var v=x.alternate;if(x.flags&1024)switch(x.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var $=v.memoizedProps,I=v.memoizedState,B=x.stateNode,W=B.getSnapshotBeforeUpdate(x.elementType===x.type?$:Rs(x.type,$),I);B.__reactInternalSnapshotBeforeUpdate=W}break;case 3:at&&Wt(x.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(pe){Oo(x,x.return,pe)}if(d=x.sibling,d!==null){d.return=x.return,Mn=d;break}Mn=x.return}return v=_c,_c=!1,v}function ou(x,d,v){var $=d.updateQueue;if($=$!==null?$.lastEffect:null,$!==null){var I=$=$.next;do{if((I.tag&x)===x){var B=I.destroy;I.destroy=void 0,B!==void 0&&dl(d,v,B)}I=I.next}while(I!==$)}}function Io(x,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var v=d=d.next;do{if((v.tag&x)===x){var $=v.create;v.destroy=$()}v=v.next}while(v!==d)}}function ys(x){var d=x.ref;if(d!==null){var v=x.stateNode;switch(x.tag){case 5:x=ce(v);break;default:x=v}typeof d=="function"?d(x):d.current=x}}function fl(x,d,v){if(ca&&typeof ca.onCommitFiberUnmount=="function")try{ca.onCommitFiberUnmount(Uu,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(x=d.updateQueue,x!==null&&(x=x.lastEffect,x!==null)){var $=x=x.next;do{var I=$,B=I.destroy;I=I.tag,B!==void 0&&(I&2||I&4)&&dl(d,v,B),$=$.next}while($!==x)}break;case 1:if(yn(d,v),x=d.stateNode,typeof x.componentWillUnmount=="function")try{x.props=d.memoizedProps,x.state=d.memoizedState,x.componentWillUnmount()}catch(W){Oo(d,v,W)}break;case 5:yn(d,v);break;case 4:at?Kc(x,d,v):Ge&&Ge&&(d=d.stateNode.containerInfo,v=ar(d),Mr(d,v))}}function as(x,d,v){for(var $=d;;)if(fl(x,$,v),$.child===null||at&&$.tag===4){if($===d)break;for(;$.sibling===null;){if($.return===null||$.return===d)return;$=$.return}$.sibling.return=$.return,$=$.sibling}else $.child.return=$,$=$.child}function pl(x){var d=x.alternate;d!==null&&(x.alternate=null,pl(d)),x.child=null,x.deletions=null,x.sibling=null,x.tag===5&&(d=x.stateNode,d!==null&&It(d)),x.stateNode=null,x.return=null,x.dependencies=null,x.memoizedProps=null,x.memoizedState=null,x.pendingProps=null,x.stateNode=null,x.updateQueue=null}function Go(x){return x.tag===5||x.tag===3||x.tag===4}function Xh(x){e:for(;;){for(;x.sibling===null;){if(x.return===null||Go(x.return))return null;x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.flags&2||x.child===null||x.tag===4)continue e;x.child.return=x,x=x.child}if(!(x.flags&2))return x.stateNode}}function Va(x){if(at){e:{for(var d=x.return;d!==null;){if(Go(d))break e;d=d.return}throw Error(o(160))}var v=d;switch(v.tag){case 5:d=v.stateNode,v.flags&32&&(bt(d),v.flags&=-33),v=Xh(x),Nd(x,v,d);break;case 3:case 4:d=v.stateNode.containerInfo,v=Xh(x),Oi(x,v,d);break;default:throw Error(o(161))}}}function Oi(x,d,v){var $=x.tag;if($===5||$===6)x=x.stateNode,d?me(v,x,d):Ke(v,x);else if($!==4&&(x=x.child,x!==null))for(Oi(x,d,v),x=x.sibling;x!==null;)Oi(x,d,v),x=x.sibling}function Nd(x,d,v){var $=x.tag;if($===5||$===6)x=x.stateNode,d?te(v,x,d):wt(v,x);else if($!==4&&(x=x.child,x!==null))for(Nd(x,d,v),x=x.sibling;x!==null;)Nd(x,d,v),x=x.sibling}function Kc(x,d,v){for(var $=d,I=!1,B,W;;){if(!I){I=$.return;e:for(;;){if(I===null)throw Error(o(160));switch(B=I.stateNode,I.tag){case 5:W=!1;break e;case 3:B=B.containerInfo,W=!0;break e;case 4:B=B.containerInfo,W=!0;break e}I=I.return}I=!0}if($.tag===5||$.tag===6)as(x,$,v),W?Fe(B,$.stateNode):Re(B,$.stateNode);else if($.tag===18)W?Ar(B,$.stateNode):Lr(B,$.stateNode);else if($.tag===4){if($.child!==null){B=$.stateNode.containerInfo,W=!0,$.child.return=$,$=$.child;continue}}else if(fl(x,$,v),$.child!==null){$.child.return=$,$=$.child;continue}if($===d)break;for(;$.sibling===null;){if($.return===null||$.return===d)return;$=$.return,$.tag===4&&(I=!1)}$.sibling.return=$.return,$=$.sibling}}function Kh(x,d){if(at){switch(d.tag){case 0:case 11:case 14:case 15:ou(3,d,d.return),Io(3,d),ou(5,d,d.return);return;case 1:return;case 5:var v=d.stateNode;if(v!=null){var $=d.memoizedProps;x=x!==null?x.memoizedProps:$;var I=d.type,B=d.updateQueue;d.updateQueue=null,B!==null&&Q(v,B,I,x,$,d)}return;case 6:if(d.stateNode===null)throw Error(o(162));v=d.memoizedProps,Qe(d.stateNode,x!==null?x.memoizedProps:v,v);return;case 3:Ie&&x!==null&&x.memoizedState.isDehydrated&&Or(d.stateNode.containerInfo);return;case 12:return;case 13:Wo(d);return;case 19:Wo(d);return;case 17:return}throw Error(o(163))}switch(d.tag){case 0:case 11:case 14:case 15:ou(3,d,d.return),Io(3,d),ou(5,d,d.return);return;case 12:return;case 13:Wo(d);return;case 19:Wo(d);return;case 3:Ie&&x!==null&&x.memoizedState.isDehydrated&&Or(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ge){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,Mr(d.containerInfo,d.pendingChildren);break e}throw Error(o(163))}}function Wo(x){var d=x.updateQueue;if(d!==null){x.updateQueue=null;var v=x.stateNode;v===null&&(v=x.stateNode=new ya),d.forEach(function($){var I=bo.bind(null,x,$);v.has($)||(v.add($),$.then(I,I))})}}function Ro(x,d){for(Mn=d;Mn!==null;){d=Mn;var v=d.deletions;if(v!==null)for(var $=0;$<v.length;$++){var I=v[$];try{var B=x;at?Kc(B,I,d):as(B,I,d);var W=I.alternate;W!==null&&(W.return=null),I.return=null}catch(jt){Oo(I,d,jt)}}if(v=d.child,(d.subtreeFlags&12854)!==0&&v!==null)v.return=d,Mn=v;else for(;Mn!==null;){d=Mn;try{var pe=d.flags;if(pe&32&&at&&bt(d.stateNode),pe&512){var Oe=d.alternate;if(Oe!==null){var tt=Oe.ref;tt!==null&&(typeof tt=="function"?tt(null):tt.current=null)}}if(pe&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var xt=d.alternate;(xt===null||xt.memoizedState===null)&&(go=Qi())}break;case 22:var Zt=d.memoizedState!==null,cn=d.alternate,Tn=cn!==null&&cn.memoizedState!==null;if(v=d,at){e:if($=v,I=Zt,B=null,at)for(var Sn=$;;){if(Sn.tag===5){if(B===null){B=Sn;var gn=Sn.stateNode;I?ze(gn):lt(Sn.stateNode,Sn.memoizedProps)}}else if(Sn.tag===6){if(B===null){var Ur=Sn.stateNode;I?Pt(Ur):Gt(Ur,Sn.memoizedProps)}}else if((Sn.tag!==22&&Sn.tag!==23||Sn.memoizedState===null||Sn===$)&&Sn.child!==null){Sn.child.return=Sn,Sn=Sn.child;continue}if(Sn===$)break;for(;Sn.sibling===null;){if(Sn.return===null||Sn.return===$)break e;B===Sn&&(B=null),Sn=Sn.return}B===Sn&&(B=null),Sn.sibling.return=Sn.return,Sn=Sn.sibling}}if(Zt&&!Tn&&v.mode&1){Mn=v;for(var Et=v.child;Et!==null;){for(v=Mn=Et;Mn!==null;){$=Mn;var Ce=$.child;switch($.tag){case 0:case 11:case 14:case 15:ou(4,$,$.return);break;case 1:yn($,$.return);var Ne=$.stateNode;if(typeof Ne.componentWillUnmount=="function"){var ot=$.return;try{Ne.props=$.memoizedProps,Ne.state=$.memoizedState,Ne.componentWillUnmount()}catch(jt){Oo($,ot,jt)}}break;case 5:yn($,$.return);break;case 22:if($.memoizedState!==null){vd(v);continue}}Ce!==null?(Ce.return=$,Mn=Ce):vd(v)}Et=Et.sibling}}}switch(pe&4102){case 2:Va(d),d.flags&=-3;break;case 6:Va(d),d.flags&=-3,Kh(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,Kh(d.alternate,d);break;case 4:Kh(d.alternate,d)}}catch(jt){Oo(d,d.return,jt)}if(v=d.sibling,v!==null){v.return=d.return,Mn=v;break}Mn=d.return}}}function df(x,d,v){Mn=x,Mu(x)}function Mu(x,d,v){for(var $=(x.mode&1)!==0;Mn!==null;){var I=Mn,B=I.child;if(I.tag===22&&$){var W=I.memoizedState!==null||Eh;if(!W){var pe=I.alternate,Oe=pe!==null&&pe.memoizedState!==null||mo;pe=Eh;var tt=mo;if(Eh=W,(mo=Oe)&&!tt)for(Mn=I;Mn!==null;)W=Mn,Oe=W.child,W.tag===22&&W.memoizedState!==null?yc(I):Oe!==null?(Oe.return=W,Mn=Oe):yc(I);for(;B!==null;)Mn=B,Mu(B),B=B.sibling;Mn=I,Eh=pe,mo=tt}Ll(x)}else I.subtreeFlags&8772&&B!==null?(B.return=I,Mn=B):Ll(x)}}function Ll(x){for(;Mn!==null;){var d=Mn;if(d.flags&8772){var v=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:mo||Io(5,d);break;case 1:var $=d.stateNode;if(d.flags&4&&!mo)if(v===null)$.componentDidMount();else{var I=d.elementType===d.type?v.memoizedProps:Rs(d.type,v.memoizedProps);$.componentDidUpdate(I,v.memoizedState,$.__reactInternalSnapshotBeforeUpdate)}var B=d.updateQueue;B!==null&&Zo(d,B,$);break;case 3:var W=d.updateQueue;if(W!==null){if(v=null,d.child!==null)switch(d.child.tag){case 5:v=ce(d.child.stateNode);break;case 1:v=d.child.stateNode}Zo(d,W,v)}break;case 5:var pe=d.stateNode;v===null&&d.flags&4&&Le(pe,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(Ie&&d.memoizedState===null){var Oe=d.alternate;if(Oe!==null){var tt=Oe.memoizedState;if(tt!==null){var xt=tt.dehydrated;xt!==null&&Ei(xt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}mo||d.flags&512&&ys(d)}catch(Zt){Oo(d,d.return,Zt)}}if(d===x){Mn=null;break}if(v=d.sibling,v!==null){v.return=d.return,Mn=v;break}Mn=d.return}}function vd(x){for(;Mn!==null;){var d=Mn;if(d===x){Mn=null;break}var v=d.sibling;if(v!==null){v.return=d.return,Mn=v;break}Mn=d.return}}function yc(x){for(;Mn!==null;){var d=Mn;try{switch(d.tag){case 0:case 11:case 15:var v=d.return;try{Io(4,d)}catch(Oe){Oo(d,v,Oe)}break;case 1:var $=d.stateNode;if(typeof $.componentDidMount=="function"){var I=d.return;try{$.componentDidMount()}catch(Oe){Oo(d,I,Oe)}}var B=d.return;try{ys(d)}catch(Oe){Oo(d,B,Oe)}break;case 5:var W=d.return;try{ys(d)}catch(Oe){Oo(d,W,Oe)}}}catch(Oe){Oo(d,d.return,Oe)}if(d===x){Mn=null;break}var pe=d.sibling;if(pe!==null){pe.return=d.return,Mn=pe;break}Mn=d.return}}var qr=0,au=1,qu=2,ls=3,ja=4;if(typeof Symbol=="function"&&Symbol.for){var $s=Symbol.for;qr=$s("selector.component"),au=$s("selector.has_pseudo_class"),qu=$s("selector.role"),ls=$s("selector.test_id"),ja=$s("selector.text")}function Cs(x){var d=He(x);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(x=Ct(x),x===null)throw Error(o(362));return x.stateNode.current}function Jc(x,d){switch(d.$$typeof){case qr:if(x.type===d.value)return!0;break;case au:e:{d=d.value,x=[x,0];for(var v=0;v<x.length;){var $=x[v++],I=x[v++],B=d[I];if($.tag!==5||!re($)){for(;B!=null&&Jc($,B);)I++,B=d[I];if(I===d.length){d=!0;break e}else for($=$.child;$!==null;)x.push($,I),$=$.sibling}}d=!1}return d;case qu:if(x.tag===5&&Be(x.stateNode,d.value))return!0;break;case ja:if((x.tag===5||x.tag===6)&&(x=Ee(x),x!==null&&0<=x.indexOf(d.value)))return!0;break;case ls:if(x.tag===5&&(x=x.memoizedProps["data-testname"],typeof x=="string"&&x.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function vi(x){switch(x.$$typeof){case qr:return"<"+(H(x.value)||"Unknown")+">";case au:return":has("+(vi(x)||"")+")";case qu:return'[role="'+x.value+'"]';case ja:return'"'+x.value+'"';case ls:return'[data-testname="'+x.value+'"]';default:throw Error(o(365))}}function Ya(x,d){var v=[];x=[x,0];for(var $=0;$<x.length;){var I=x[$++],B=x[$++],W=d[B];if(I.tag!==5||!re(I)){for(;W!=null&&Jc(I,W);)B++,W=d[B];if(B===d.length)v.push(I);else for(I=I.child;I!==null;)x.push(I,B),I=I.sibling}}return v}function bc(x,d){if(!Mt)throw Error(o(363));x=Cs(x),x=Ya(x,d),d=[],x=Array.from(x);for(var v=0;v<x.length;){var $=x[v++];if($.tag===5)re($)||d.push($.stateNode);else for($=$.child;$!==null;)x.push($),$=$.sibling}return d}var ff=Math.ceil,xh=l.ReactCurrentDispatcher,ia=l.ReactCurrentOwner,Xi=l.ReactCurrentBatchConfig,Pn=0,nr=null,zr=null,ri=0,Zr=0,ko=Pi(0),us=0,ts=null,lu=0,Qu=0,Tc=0,Zu=null,eo=null,go=0,_d=1/0;function ba(){_d=Qi()+500}var Au=!1,Iu=null,vo=null,_o=!1,Nl=null,Vo=0,ec=0,tc=null,$h=-1,Ch=0;function Br(){return Pn&6?Qi():$h!==-1?$h:$h=Qi()}function bs(x){return x.mode&1?Pn&2&&ri!==0?ri&-ri:ha.transition!==null?(Ch===0&&(x=gh,gh<<=1,!(gh&4194240)&&(gh=64),Ch=x),Ch):(x=wr,x!==0?x:st()):1}function Os(x,d,v){if(50<ec)throw ec=0,tc=null,Error(o(185));var $=Xa(x,d);return $===null?null:(_u($,d,v),(!(Pn&2)||$!==nr)&&($===nr&&(!(Pn&2)&&(Qu|=d),us===4&&Ms($,ri)),js($,v),d===1&&Pn===0&&!(x.mode&1)&&(ba(),uo&&Pa())),$)}function Xa(x,d){x.lanes|=d;var v=x.alternate;for(v!==null&&(v.lanes|=d),v=x,x=x.return;x!==null;)x.childLanes|=d,v=x.alternate,v!==null&&(v.childLanes|=d),v=x,x=x.return;return v.tag===3?v.stateNode:null}function js(x,d){var v=x.callbackNode;vh(x,d);var $=$i(x,x===nr?ri:0);if($===0)v!==null&&rl(v),x.callbackNode=null,x.callbackPriority=0;else if(d=$&-$,x.callbackPriority!==d){if(v!=null&&rl(v),d===1)x.tag===0?_h(uu.bind(null,x)):Tu(uu.bind(null,x)),kt?vt(function(){Pn===0&&Pa()}):Jl(vs,Pa),v=null;else{switch(Er($)){case 1:v=vs;break;case 4:v=sl;break;case 16:v=Cd;break;case 536870912:v=lo;break;default:v=Cd}v=th(v,fn.bind(null,x))}x.callbackPriority=d,x.callbackNode=v}}function fn(x,d){if($h=-1,Ch=0,(Pn&6)!==0)throw Error(o(327));var v=x.callbackNode;if(Sc()&&x.callbackNode!==v)return null;var $=$i(x,x===nr?ri:0);if($===0)return null;if($&30||$&x.expiredLanes||d)d=Qc(x,$);else{d=$;var I=Pn;Pn|=2;var B=nc();(nr!==x||ri!==d)&&(ba(),ml(x,d));do try{Ki();break}catch(pe){Kr(x,pe)}while(!0);Su(),xh.current=B,Pn=I,zr!==null?d=0:(nr=null,ri=0,d=us)}if(d!==0){if(d===2&&(I=Bc(x),I!==0&&($=I,d=qc(x,I))),d===1)throw v=ts,ml(x,0),Ms(x,$),js(x,Qi()),v;if(d===6)Ms(x,$);else{if(I=x.current.alternate,($&30)===0&&!_i(I)&&(d=Qc(x,$),d===2&&(B=Bc(x),B!==0&&($=B,d=qc(x,B))),d===1))throw v=ts,ml(x,0),Ms(x,$),js(x,Qi()),v;switch(x.finishedWork=I,x.finishedLanes=$,d){case 0:case 1:throw Error(o(345));case 2:gl(x,eo);break;case 3:if(Ms(x,$),($&130023424)===$&&(d=go+500-Qi(),10<d)){if($i(x,0)!==0)break;if(I=x.suspendedLanes,(I&$)!==$){Br(),x.pingedLanes|=x.suspendedLanes&I;break}x.timeoutHandle=we(gl.bind(null,x,eo),d);break}gl(x,eo);break;case 4:if(Ms(x,$),($&4194240)===$)break;for(d=x.eventTimes,I=-1;0<$;){var W=31-qs($);B=1<<W,W=d[W],W>I&&(I=W),$&=~B}if($=I,$=Qi()-$,$=(120>$?120:480>$?480:1080>$?1080:1920>$?1920:3e3>$?3e3:4320>$?4320:1960*ff($/1960))-$,10<$){x.timeoutHandle=we(gl.bind(null,x,eo),$);break}gl(x,eo);break;case 5:gl(x,eo);break;default:throw Error(o(329))}}}return js(x,Qi()),x.callbackNode===v?fn.bind(null,x):null}function qc(x,d){var v=Zu;return x.current.memoizedState.isDehydrated&&(ml(x,d).flags|=256),x=Qc(x,d),x!==2&&(d=eo,eo=v,d!==null&&En(d)),x}function En(x){eo===null?eo=x:eo.push.apply(eo,x)}function _i(x){for(var d=x;;){if(d.flags&16384){var v=d.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var $=0;$<v.length;$++){var I=v[$],B=I.getSnapshot;I=I.value;try{if(!Gn(B(),I))return!1}catch{return!1}}}if(v=d.child,d.subtreeFlags&16384&&v!==null)v.return=d,d=v;else{if(d===x)break;for(;d.sibling===null;){if(d.return===null||d.return===x)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Ms(x,d){for(d&=~Tc,d&=~Qu,x.suspendedLanes|=d,x.pingedLanes&=~d,x=x.expirationTimes;0<d;){var v=31-qs(d),$=1<<v;x[v]=-1,d&=~$}}function uu(x){if(Pn&6)throw Error(o(327));Sc();var d=$i(x,0);if(!(d&1))return js(x,Qi()),null;var v=Qc(x,d);if(x.tag!==0&&v===2){var $=Bc(x);$!==0&&(d=$,v=qc(x,$))}if(v===1)throw v=ts,ml(x,0),Ms(x,d),js(x,Qi()),v;if(v===6)throw Error(o(345));return x.finishedWork=x.current.alternate,x.finishedLanes=d,gl(x,eo),js(x,Qi()),null}function Dl(x){Nl!==null&&Nl.tag===0&&!(Pn&6)&&Sc();var d=Pn;Pn|=1;var v=Xi.transition,$=wr;try{if(Xi.transition=null,wr=1,x)return x()}finally{wr=$,Xi.transition=v,Pn=d,!(Pn&6)&&Pa()}}function Ut(){Zr=ko.current,Pr(ko)}function ml(x,d){x.finishedWork=null,x.finishedLanes=0;var v=x.timeoutHandle;if(v!==et&&(x.timeoutHandle=et,Ze(v)),zr!==null)for(v=zr.return;v!==null;){var $=v;switch(Fh($),$.tag){case 1:$=$.type.childContextTypes,$!=null&&gs();break;case 3:$u(),Pr(Sr),Pr(jr),Pe();break;case 5:Ad($);break;case 4:$u();break;case 13:Pr(pi);break;case 19:Pr(pi);break;case 10:wu($.type._context);break;case 22:case 23:Ut()}v=v.return}if(nr=x,zr=x=Pl(x.current,null),ri=Zr=d,us=0,ts=null,Tc=Qu=lu=0,eo=Zu=null,Vn!==null){for(d=0;d<Vn.length;d++)if(v=Vn[d],$=v.interleaved,$!==null){v.interleaved=null;var I=$.next,B=v.pending;if(B!==null){var W=B.next;B.next=I,$.next=W}v.pending=$}Vn=null}return x}function Kr(x,d){do{var v=zr;try{if(Su(),Nt.current=iu,ho){for(var $=Jn.memoizedState;$!==null;){var I=$.queue;I!==null&&(I.pending=null),$=$.next}ho=!1}if(Rn=0,Gr=_n=Jn=null,Ti=!1,fo=0,ia.current=null,v===null||v.return===null){us=1,ts=d,zr=null;break}e:{var B=x,W=v.return,pe=v,Oe=d;if(d=ri,pe.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var tt=Oe,xt=pe,Zt=xt.tag;if(!(xt.mode&1)&&(Zt===0||Zt===11||Zt===15)){var cn=xt.alternate;cn?(xt.updateQueue=cn.updateQueue,xt.memoizedState=cn.memoizedState,xt.lanes=cn.lanes):(xt.updateQueue=null,xt.memoizedState=null)}var Tn=vc(W);if(Tn!==null){Tn.flags&=-257,kd(Tn,W,pe,B,d),Tn.mode&1&&jc(B,tt,d),d=Tn,Oe=tt;var Sn=d.updateQueue;if(Sn===null){var gn=new Set;gn.add(Oe),d.updateQueue=gn}else Sn.add(Oe);break e}else{if(!(d&1)){jc(B,tt,d),Jh();break e}Oe=Error(o(426))}}else if(xr&&pe.mode&1){var Ur=vc(W);if(Ur!==null){!(Ur.flags&65536)&&(Ur.flags|=256),kd(Ur,W,pe,B,d),zh(Oe);break e}}B=Oe,us!==4&&(us=2),Zu===null?Zu=[B]:Zu.push(B),Oe=ul(Oe,pe),pe=W;do{switch(pe.tag){case 3:pe.flags|=65536,d&=-d,pe.lanes|=d;var Et=Vc(pe,Oe,d);yh(pe,Et);break e;case 1:B=Oe;var Ce=pe.type,Ne=pe.stateNode;if(!(pe.flags&128)&&(typeof Ce.getDerivedStateFromError=="function"||Ne!==null&&typeof Ne.componentDidCatch=="function"&&(vo===null||!vo.has(Ne)))){pe.flags|=65536,d&=-d,pe.lanes|=d;var ot=Ol(pe,B,d);yh(pe,ot);break e}}pe=pe.return}while(pe!==null)}yo(v)}catch(jt){d=jt,zr===v&&v!==null&&(zr=v=v.return);continue}break}while(!0)}function nc(){var x=xh.current;return xh.current=iu,x===null?iu:x}function Jh(){(us===0||us===3||us===2)&&(us=4),nr===null||!(lu&268435455)&&!(Qu&268435455)||Ms(nr,ri)}function Qc(x,d){var v=Pn;Pn|=2;var $=nc();nr===x&&ri===d||ml(x,d);do try{ai();break}catch(I){Kr(x,I)}while(!0);if(Su(),Pn=v,xh.current=$,zr!==null)throw Error(o(261));return nr=null,ri=0,us}function ai(){for(;zr!==null;)Zc(zr)}function Ki(){for(;zr!==null&&!il();)Zc(zr)}function Zc(x){var d=Ru(x.alternate,x,Zr);x.memoizedProps=x.pendingProps,d===null?yo(x):zr=d,ia.current=null}function yo(x){var d=x;do{var v=d.alternate;if(x=d.return,(d.flags&32768)===0){if(v=mn(v,d,Zr),v!==null){zr=v;return}}else{if(v=Hf(v,d),v!==null){v.flags&=32767,zr=v;return}if(x!==null)x.flags|=32768,x.subtreeFlags=0,x.deletions=null;else{us=6,zr=null;return}}if(d=d.sibling,d!==null){zr=d;return}zr=d=x}while(d!==null);us===0&&(us=5)}function gl(x,d){var v=wr,$=Xi.transition;try{Xi.transition=null,wr=1,eh(x,d,v)}finally{Xi.transition=$,wr=v}return null}function eh(x,d,v){do Sc();while(Nl!==null);if(Pn&6)throw Error(o(327));var $=x.finishedWork,I=x.finishedLanes;if($===null)return null;if(x.finishedWork=null,x.finishedLanes=0,$===x.current)throw Error(o(177));x.callbackNode=null,x.callbackPriority=0;var B=$.lanes|$.childLanes;if($l(x,B),x===nr&&(zr=nr=null,ri=0),!($.subtreeFlags&2064)&&!($.flags&2064)||_o||(_o=!0,th(Cd,function(){return Sc(),null})),B=($.flags&15990)!==0,($.subtreeFlags&15990)!==0||B){B=Xi.transition,Xi.transition=null;var W=wr;wr=1;var pe=Pn;Pn|=4,ia.current=null,xp(x,$),Ro(x,$),ie(x.containerInfo),x.current=$,df($),yu(),Pn=pe,wr=W,Xi.transition=B}else x.current=$;if(_o&&(_o=!1,Nl=x,Vo=I),B=x.pendingLanes,B===0&&(vo=null),bu($.stateNode),js(x,Qi()),d!==null)for(v=x.onRecoverableError,$=0;$<d.length;$++)v(d[$]);if(Au)throw Au=!1,x=Iu,Iu=null,x;return Vo&1&&x.tag!==0&&Sc(),B=x.pendingLanes,B&1?x===tc?ec++:(ec=0,tc=x):ec=0,Pa(),null}function Sc(){if(Nl!==null){var x=Er(Vo),d=Xi.transition,v=wr;try{if(Xi.transition=null,wr=16>x?16:x,Nl===null)var $=!1;else{if(x=Nl,Nl=null,Vo=0,(Pn&6)!==0)throw Error(o(331));var I=Pn;for(Pn|=4,Mn=x.current;Mn!==null;){var B=Mn,W=B.child;if(Mn.flags&16){var pe=B.deletions;if(pe!==null){for(var Oe=0;Oe<pe.length;Oe++){var tt=pe[Oe];for(Mn=tt;Mn!==null;){var xt=Mn;switch(xt.tag){case 0:case 11:case 15:ou(8,xt,B)}var Zt=xt.child;if(Zt!==null)Zt.return=xt,Mn=Zt;else for(;Mn!==null;){xt=Mn;var cn=xt.sibling,Tn=xt.return;if(pl(xt),xt===tt){Mn=null;break}if(cn!==null){cn.return=Tn,Mn=cn;break}Mn=Tn}}}var Sn=B.alternate;if(Sn!==null){var gn=Sn.child;if(gn!==null){Sn.child=null;do{var Ur=gn.sibling;gn.sibling=null,gn=Ur}while(gn!==null)}}Mn=B}}if(B.subtreeFlags&2064&&W!==null)W.return=B,Mn=W;else e:for(;Mn!==null;){if(B=Mn,(B.flags&2048)!==0)switch(B.tag){case 0:case 11:case 15:ou(9,B,B.return)}var Et=B.sibling;if(Et!==null){Et.return=B.return,Mn=Et;break e}Mn=B.return}}var Ce=x.current;for(Mn=Ce;Mn!==null;){W=Mn;var Ne=W.child;if(W.subtreeFlags&2064&&Ne!==null)Ne.return=W,Mn=Ne;else e:for(W=Ce;Mn!==null;){if(pe=Mn,(pe.flags&2048)!==0)try{switch(pe.tag){case 0:case 11:case 15:Io(9,pe)}}catch(jt){Oo(pe,pe.return,jt)}if(pe===W){Mn=null;break e}var ot=pe.sibling;if(ot!==null){ot.return=pe.return,Mn=ot;break e}Mn=pe.return}}if(Pn=I,Pa(),ca&&typeof ca.onPostCommitFiberRoot=="function")try{ca.onPostCommitFiberRoot(Uu,x)}catch{}$=!0}return $}finally{wr=v,Xi.transition=d}}return!1}function rc(x,d,v){d=ul(v,d),d=Vc(x,d,1),ji(x,d),d=Br(),x=Xa(x,1),x!==null&&(_u(x,1,d),js(x,d))}function Oo(x,d,v){if(x.tag===3)rc(x,x,v);else for(;d!==null;){if(d.tag===3){rc(d,x,v);break}else if(d.tag===1){var $=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof $.componentDidCatch=="function"&&(vo===null||!vo.has($))){x=ul(v,x),x=Ol(d,x,1),ji(d,x),x=Br(),d=Xa(d,1),d!==null&&(_u(d,1,x),js(d,x));break}}d=d.return}}function to(x,d,v){var $=x.pingCache;$!==null&&$.delete(d),d=Br(),x.pingedLanes|=x.suspendedLanes&v,nr===x&&(ri&v)===v&&(us===4||us===3&&(ri&130023424)===ri&&500>Qi()-go?ml(x,0):Tc|=v),js(x,d)}function sa(x,d){d===0&&(x.mode&1?(d=Qo,Qo<<=1,!(Qo&130023424)&&(Qo=4194304)):d=1);var v=Br();x=Xa(x,d),x!==null&&(_u(x,d,v),js(x,v))}function Mh(x){var d=x.memoizedState,v=0;d!==null&&(v=d.retryLane),sa(x,v)}function bo(x,d){var v=0;switch(x.tag){case 13:var $=x.stateNode,I=x.memoizedState;I!==null&&(v=I.retryLane);break;case 19:$=x.stateNode;break;default:throw Error(o(314))}$!==null&&$.delete(d),sa(x,v)}var Ru;Ru=function(x,d,v){if(x!==null)if(x.memoizedProps!==d.pendingProps||Sr.current)hl=!0;else{if(!(x.lanes&v)&&!(d.flags&128))return hl=!1,gi(x,d,v);hl=(x.flags&131072)!==0}else hl=!1,xr&&d.flags&1048576&&Ql(d,bh,d.index);switch(d.lanes=0,d.tag){case 2:var $=d.type;x!==null&&(x.alternate=null,d.alternate=null,d.flags|=2),x=d.pendingProps;var I=ws(d,jr.current);Fi(d,v),I=Cu(null,d,$,x,I,v);var B=qn();return d.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,fi($)?(B=!0,fc(d)):B=!1,d.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,Jr(d),I.updater=Fc,d.stateNode=I,I._reactInternals=d,Md(d,$,x,v),d=Xc(null,d,$,!0,B,v)):(d.tag=0,xr&&B&&Zl(d),ki(null,d,I,v),d=d.child),d;case 16:$=d.elementType;e:{switch(x!==null&&(x.alternate=null,d.alternate=null,d.flags|=2),x=d.pendingProps,I=$._init,$=I($._payload),d.type=$,I=d.tag=ic($),x=Rs($,x),I){case 0:d=_a(null,d,$,x,v);break e;case 1:d=os(null,d,$,x,v);break e;case 11:d=hi(null,d,$,x,v);break e;case 14:d=es(null,d,$,Rs($.type,x),v);break e}throw Error(o(306,$,""))}return d;case 0:return $=d.type,I=d.pendingProps,I=d.elementType===$?I:Rs($,I),_a(x,d,$,I,v);case 1:return $=d.type,I=d.pendingProps,I=d.elementType===$?I:Rs($,I),os(x,d,$,I,v);case 3:e:{if(ra(d),x===null)throw Error(o(387));$=d.pendingProps,B=d.memoizedState,I=B.element,dd(x,d),pr(d,$,null,v);var W=d.memoizedState;if($=W.element,Ie&&B.isDehydrated)if(B={element:$,isDehydrated:!1,cache:W.cache,transitions:W.transitions},d.updateQueue.baseState=B,d.memoizedState=B,d.flags&256){I=Error(o(423)),d=Od(x,d,$,v,I);break e}else if($!==I){I=Error(o(424)),d=Od(x,d,$,v,I);break e}else for(Ie&&(Ii=Ot(d.stateNode.containerInfo),Yr=d,xr=!0,fa=null,Yi=!1),v=Uc(d,null,$,v),d.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(zc(),$===I){d=mi(x,d,v);break e}ki(x,d,$,v)}d=d.child}return d;case 5:return Th(d),x===null&&pd(d),$=d.type,I=d.pendingProps,B=x!==null?x.memoizedProps:null,W=I.children,ke($,I)?W=null:B!==null&&ke($,B)&&(d.flags|=32),va(x,d),ki(x,d,W,v),d.child;case 6:return x===null&&pd(d),null;case 13:return Ws(x,d,v);case 4:return nu(d,d.stateNode.containerInfo),$=d.pendingProps,x===null?d.child=Uh(d,null,$,v):ki(x,d,$,v),d.child;case 11:return $=d.type,I=d.pendingProps,I=d.elementType===$?I:Rs($,I),hi(x,d,$,I,v);case 7:return ki(x,d,d.pendingProps,v),d.child;case 8:return ki(x,d,d.pendingProps.children,v),d.child;case 12:return ki(x,d,d.pendingProps.children,v),d.child;case 10:e:{if($=d.type._context,I=d.pendingProps,B=d.memoizedProps,W=I.value,Ao(d,$,W),B!==null)if(Gn(B.value,W)){if(B.children===I.children&&!Sr.current){d=mi(x,d,v);break e}}else for(B=d.child,B!==null&&(B.return=d);B!==null;){var pe=B.dependencies;if(pe!==null){W=B.child;for(var Oe=pe.firstContext;Oe!==null;){if(Oe.context===$){if(B.tag===1){Oe=Eu(-1,v&-v),Oe.tag=2;var tt=B.updateQueue;if(tt!==null){tt=tt.shared;var xt=tt.pending;xt===null?Oe.next=Oe:(Oe.next=xt.next,xt.next=Oe),tt.pending=Oe}}B.lanes|=v,Oe=B.alternate,Oe!==null&&(Oe.lanes|=v),ol(B.return,v,d),pe.lanes|=v;break}Oe=Oe.next}}else if(B.tag===10)W=B.type===d.type?null:B.child;else if(B.tag===18){if(W=B.return,W===null)throw Error(o(341));W.lanes|=v,pe=W.alternate,pe!==null&&(pe.lanes|=v),ol(W,v,d),W=B.sibling}else W=B.child;if(W!==null)W.return=B;else for(W=B;W!==null;){if(W===d){W=null;break}if(B=W.sibling,B!==null){B.return=W.return,W=B;break}W=W.return}B=W}ki(x,d,I.children,v),d=d.child}return d;case 9:return I=d.type,$=d.pendingProps.children,Fi(d,v),I=Mi(I),$=$(I),d.flags|=1,ki(x,d,$,v),d.child;case 14:return $=d.type,I=Rs($,d.pendingProps),I=Rs($.type,I),es(x,d,$,I,v);case 15:return ss(x,d,d.type,d.pendingProps,v);case 17:return $=d.type,I=d.pendingProps,I=d.elementType===$?I:Rs($,I),x!==null&&(x.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,fi($)?(x=!0,fc(d)):x=!1,Fi(d,v),Ff(d,$,I),Md(d,$,I,v),Xc(null,d,$,!0,x,v);case 19:return $n(x,d,v);case 22:return Yc(x,d,v)}throw Error(o(156,d.tag))};function th(x,d){return Jl(x,d)}function wc(x,d,v,$){this.tag=x,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=$,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jo(x,d,v,$){return new wc(x,d,v,$)}function To(x){return x=x.prototype,!(!x||!x.isReactComponent)}function ic(x){if(typeof x=="function")return To(x)?1:0;if(x!=null){if(x=x.$$typeof,x===C)return 11;if(x===k)return 14}return 2}function Pl(x,d){var v=x.alternate;return v===null?(v=jo(x.tag,d,x.key,x.mode),v.elementType=x.elementType,v.type=x.type,v.stateNode=x.stateNode,v.alternate=x,x.alternate=v):(v.pendingProps=d,v.type=x.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=x.flags&14680064,v.childLanes=x.childLanes,v.lanes=x.lanes,v.child=x.child,v.memoizedProps=x.memoizedProps,v.memoizedState=x.memoizedState,v.updateQueue=x.updateQueue,d=x.dependencies,v.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},v.sibling=x.sibling,v.index=x.index,v.ref=x.ref,v}function So(x,d,v,$,I,B){var W=2;if($=x,typeof x=="function")To(x)&&(W=1);else if(typeof x=="string")W=5;else e:switch(x){case f:return Bl(v.children,I,B,d);case g:W=8,I|=8;break;case y:return x=jo(12,v,d,I|2),x.elementType=y,x.lanes=B,x;case M:return x=jo(13,v,d,I),x.elementType=M,x.lanes=B,x;case A:return x=jo(19,v,d,I),x.elementType=A,x.lanes=B,x;case P:return Ka(v,I,B,d);default:if(typeof x=="object"&&x!==null)switch(x.$$typeof){case b:W=10;break e;case S:W=9;break e;case C:W=11;break e;case k:W=14;break e;case O:W=16,$=null;break e}throw Error(o(130,x==null?x:typeof x,""))}return d=jo(W,v,d,I),d.elementType=x,d.type=$,d.lanes=B,d}function Bl(x,d,v,$){return x=jo(7,x,$,d),x.lanes=v,x}function Ka(x,d,v,$){return x=jo(22,x,$,d),x.elementType=P,x.lanes=v,x.stateNode={},x}function cu(x,d,v){return x=jo(6,x,null,d),x.lanes=v,x}function ii(x,d,v){return d=jo(4,x.children!==null?x.children:[],x.key,d),d.lanes=v,d.stateNode={containerInfo:x.containerInfo,pendingChildren:null,implementation:x.implementation},d}function cs(x,d,v,$,I){this.tag=d,this.containerInfo=x,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=et,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xl(0),this.expirationTimes=xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xl(0),this.identifierPrefix=$,this.onRecoverableError=I,Ie&&(this.mutableSourceEagerHydrationData=null)}function qh(x,d,v,$,I,B,W,pe,Oe){return x=new cs(x,d,v,pe,Oe),d===1?(d=1,B===!0&&(d|=8)):d=0,B=jo(3,null,null,d),x.current=B,B.stateNode=x,B.memoizedState={element:$,isDehydrated:v,cache:null,transitions:null},Jr(B),x}function yd(x){if(!x)return Nr;x=x._reactInternals;e:{if(z(x)!==x||x.tag!==1)throw Error(o(170));var d=x;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(fi(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(x.tag===1){var v=x.type;if(fi(v))return Da(x,v,d)}return d}function Ta(x){var d=x._reactInternals;if(d===void 0)throw typeof x.render=="function"?Error(o(188)):(x=Object.keys(x).join(","),Error(o(268,x)));return x=ue(d),x===null?null:x.stateNode}function Sa(x,d){if(x=x.memoizedState,x!==null&&x.dehydrated!==null){var v=x.retryLane;x.retryLane=v!==0&&v<d?v:d}}function Qh(x,d){Sa(x,d),(x=x.alternate)&&Sa(x,d)}function Ec(x){return x=ue(x),x===null?null:x.stateNode}function Gf(){return null}return e.attemptContinuousHydration=function(x){if(x.tag===13){var d=Br();Os(x,134217728,d),Qh(x,134217728)}},e.attemptHydrationAtCurrentPriority=function(x){if(x.tag===13){var d=Br(),v=bs(x);Os(x,v,d),Qh(x,v)}},e.attemptSynchronousHydration=function(x){switch(x.tag){case 3:var d=x.stateNode;if(d.current.memoizedState.isDehydrated){var v=Tr(d.pendingLanes);v!==0&&(Cl(d,v|1),js(d,Qi()),!(Pn&6)&&(ba(),Pa()))}break;case 13:var $=Br();Dl(function(){return Os(x,1,$)}),Qh(x,1)}},e.batchedUpdates=function(x,d){var v=Pn;Pn|=1;try{return x(d)}finally{Pn=v,Pn===0&&(ba(),uo&&Pa())}},e.createComponentSelector=function(x){return{$$typeof:qr,value:x}},e.createContainer=function(x,d,v,$,I,B,W){return qh(x,d,!1,null,v,$,I,B,W)},e.createHasPseudoClassSelector=function(x){return{$$typeof:au,value:x}},e.createHydrationContainer=function(x,d,v,$,I,B,W,pe,Oe){return x=qh(v,$,!0,x,I,B,W,pe,Oe),x.context=yd(null),v=x.current,$=Br(),I=bs(v),B=Eu($,I),B.callback=d??null,ji(v,B),x.current.lanes=I,_u(x,I,$),js(x,$),x},e.createPortal=function(x,d,v){var $=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:$==null?null:""+$,children:x,containerInfo:d,implementation:v}},e.createRoleSelector=function(x){return{$$typeof:qu,value:x}},e.createTestNameSelector=function(x){return{$$typeof:ls,value:x}},e.createTextSelector=function(x){return{$$typeof:ja,value:x}},e.deferredUpdates=function(x){var d=wr,v=Xi.transition;try{return Xi.transition=null,wr=16,x()}finally{wr=d,Xi.transition=v}},e.discreteUpdates=function(x,d,v,$,I){var B=wr,W=Xi.transition;try{return Xi.transition=null,wr=1,x(d,v,$,I)}finally{wr=B,Xi.transition=W,Pn===0&&ba()}},e.findAllNodes=bc,e.findBoundingRects=function(x,d){if(!Mt)throw Error(o(363));d=bc(x,d),x=[];for(var v=0;v<d.length;v++)x.push(gt(d[v]));for(d=x.length-1;0<d;d--){v=x[d];for(var $=v.x,I=$+v.width,B=v.y,W=B+v.height,pe=d-1;0<=pe;pe--)if(d!==pe){var Oe=x[pe],tt=Oe.x,xt=tt+Oe.width,Zt=Oe.y,cn=Zt+Oe.height;if($>=tt&&B>=Zt&&I<=xt&&W<=cn){x.splice(d,1);break}else if($!==tt||v.width!==Oe.width||cn<B||Zt>W){if(!(B!==Zt||v.height!==Oe.height||xt<$||tt>I)){tt>$&&(Oe.width+=tt-$,Oe.x=$),xt<I&&(Oe.width=I-tt),x.splice(d,1);break}}else{Zt>B&&(Oe.height+=Zt-B,Oe.y=B),cn<W&&(Oe.height=W-Zt),x.splice(d,1);break}}}return x},e.findHostInstance=Ta,e.findHostInstanceWithNoPortals=function(x){return x=oe(x),x=x!==null?ae(x):null,x===null?null:x.stateNode},e.findHostInstanceWithWarning=function(x){return Ta(x)},e.flushControlled=function(x){var d=Pn;Pn|=1;var v=Xi.transition,$=wr;try{Xi.transition=null,wr=1,x()}finally{wr=$,Xi.transition=v,Pn=d,Pn===0&&(ba(),Pa())}},e.flushPassiveEffects=Sc,e.flushSync=Dl,e.focusWithin=function(x,d){if(!Mt)throw Error(o(363));for(x=Cs(x),d=Ya(x,d),d=Array.from(d),x=0;x<d.length;){var v=d[x++];if(!re(v)){if(v.tag===5&&mt(v.stateNode))return!0;for(v=v.child;v!==null;)d.push(v),v=v.sibling}}return!1},e.getCurrentUpdatePriority=function(){return wr},e.getFindAllNodesFailureDescription=function(x,d){if(!Mt)throw Error(o(363));var v=0,$=[];x=[Cs(x),0];for(var I=0;I<x.length;){var B=x[I++],W=x[I++],pe=d[W];if((B.tag!==5||!re(B))&&(Jc(B,pe)&&($.push(vi(pe)),W++,W>v&&(v=W)),W<d.length))for(B=B.child;B!==null;)x.push(B,W),B=B.sibling}if(v<d.length){for(x=[];v<d.length;v++)x.push(vi(d[v]));return`findAllNodes was able to match part of the selector:
  `+($.join(" > ")+`

No matching component was found for:
  `)+x.join(" > ")}return null},e.getPublicRootInstance=function(x){if(x=x.current,!x.child)return null;switch(x.child.tag){case 5:return ce(x.child.stateNode);default:return x.child.stateNode}},e.injectIntoDevTools=function(x){if(x={bundleType:x.bundleType,version:x.version,rendererPackageName:x.rendererPackageName,rendererConfig:x.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:Ec,findFiberByHostInstance:x.findFiberByHostInstance||Gf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")x=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)x=!0;else{try{Uu=d.inject(x),ca=d}catch{}x=!!d.checkDCE}}return x},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(x,d,v,$){if(!Mt)throw Error(o(363));x=bc(x,d);var I=yt(x,v,$).disconnect;return{disconnect:function(){I()}}},e.registerMutableSourceForHydration=function(x,d){var v=d._getVersion;v=v(d._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[d,v]:x.mutableSourceEagerHydrationData.push(d,v)},e.runWithPriority=function(x,d){var v=wr;try{return wr=x,d()}finally{wr=v}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(x,d,v,$){var I=d.current,B=Br(),W=bs(I);return v=yd(v),d.context===null?d.context=v:d.pendingContext=v,d=Eu(B,W),d.payload={element:x},$=$===void 0?null:$,$!==null&&(d.callback=$),ji(I,d),x=Os(I,W,B),x!==null&&Ba(x,I,W),W},e}),rW}(function(n){n.exports=_Ae()})(PZ);const yAe=DZ(PZ.exports);function bAe(n,e,t=(r,s)=>r===s){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let s=0;s<r;s++)if(!t(n[s],e[s]))return!1;return!0}const kA=[];function TAe(n,e,t=!1,r={}){for(const o of kA)if(bAe(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return o.response;if(!t)throw o.promise}const s={keys:e,equal:r.equal,promise:n(...e).then(o=>s.response=o).then(()=>{r.lifespan&&r.lifespan>0&&setTimeout(()=>{const o=kA.indexOf(s);o!==-1&&kA.splice(o,1)},r.lifespan)}).catch(o=>s.error=o)};if(kA.push(s),!t)throw s.promise}const SAe=(n,e,t)=>TAe(n,e,!1,t);var C2={exports:{}},_x={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sW;function wAe(){if(sW)return _x;sW=1;var n=Tt,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,f){var g,y={},b=null,S=null;f!==void 0&&(b=""+f),h.key!==void 0&&(b=""+h.key),h.ref!==void 0&&(S=h.ref);for(g in h)r.call(h,g)&&!o.hasOwnProperty(g)&&(y[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:u,key:b,ref:S,props:y,_owner:s.current}}return _x.Fragment=t,_x.jsx=l,_x.jsxs=l,_x}(function(n){n.exports=wAe()})(C2);const FC=C2.exports.Fragment,un=C2.exports.jsx,Bh=C2.exports.jsxs,D4={},EAe=n=>void Object.assign(D4,n);function xAe(n,e){function t(f,{args:g=[],attach:y,...b},S){let C=`${f[0].toUpperCase()}${f.slice(1)}`,M;if(f==="primitive"){if(b.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const A=b.object;M=zS(A,{type:f,root:S,attach:y,primitive:!0})}else{const A=D4[C];if(!A)throw new Error(`R3F: ${C} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(g))throw new Error("R3F: The args prop must be an array!");M=zS(new A(...g),{type:f,root:S,attach:y,memoizedProps:{args:g}})}return M.__r3f.attach===void 0&&(M instanceof ui?M.__r3f.attach="geometry":M instanceof hd&&(M.__r3f.attach="material")),C!=="inject"&&sN(M,b),M}function r(f,g){let y=!1;if(g){var b,S;(b=g.__r3f)!=null&&b.attach?iN(f,g,g.__r3f.attach):g.isObject3D&&f.isObject3D&&(f.add(g),y=!0),y||(S=f.__r3f)==null||S.objects.push(g),g.__r3f||zS(g,{}),g.__r3f.parent=f,XP(g),US(g)}}function s(f,g,y){let b=!1;if(g){var S,C;if((S=g.__r3f)!=null&&S.attach)iN(f,g,g.__r3f.attach);else if(g.isObject3D&&f.isObject3D){g.parent=f,g.dispatchEvent({type:"added"});const M=f.children.filter(k=>k!==g),A=M.indexOf(y);f.children=[...M.slice(0,A),g,...M.slice(A)],b=!0}b||(C=f.__r3f)==null||C.objects.push(g),g.__r3f||zS(g,{}),g.__r3f.parent=f,XP(g),US(g)}}function o(f,g,y=!1){f&&[...f].forEach(b=>l(g,b,y))}function l(f,g,y){if(g){var b,S,C;if(g.__r3f&&(g.__r3f.parent=null),(b=f.__r3f)!=null&&b.objects&&(f.__r3f.objects=f.__r3f.objects.filter(P=>P!==g)),(S=g.__r3f)!=null&&S.attach)cW(f,g,g.__r3f.attach);else if(g.isObject3D&&f.isObject3D){var M;f.remove(g),(M=g.__r3f)!=null&&M.root&&kAe(g.__r3f.root,g)}const k=(C=g.__r3f)==null?void 0:C.primitive,O=y===void 0?g.dispose!==null&&!k:y;if(!k){var A;o((A=g.__r3f)==null?void 0:A.objects,g,O),o(g.children,g,O)}g.__r3f&&(delete g.__r3f.root,delete g.__r3f.objects,delete g.__r3f.handlers,delete g.__r3f.memoizedProps,k||delete g.__r3f),O&&g.dispose&&g.type!=="Scene"&&IR.exports.unstable_scheduleCallback(IR.exports.unstable_IdlePriority,()=>{try{g.dispose()}catch{}}),US(f)}}function u(f,g,y,b){var S;const C=(S=f.__r3f)==null?void 0:S.parent;if(!C)return;const M=t(g,y,f.__r3f.root);if(f.children){for(const A of f.children)A.__r3f&&r(M,A);f.children=f.children.filter(A=>!A.__r3f)}f.__r3f.objects.forEach(A=>r(M,A)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||l(C,f),M.parent&&(M.__r3f.autoRemovedBeforeAppend=!0),r(C,M),M.raycast&&M.__r3f.eventCount&&M.__r3f.root.getState().internal.interaction.push(M),[b,b.alternate].forEach(A=>{A!==null&&(A.stateNode=M,A.ref&&(typeof A.ref=="function"?A.ref(M):A.ref.current=M))})}const h=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:yAe({createInstance:t,removeChild:l,appendChild:r,appendInitialChild:r,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,g)=>{if(!g)return;const y=f.getState().scene;!y.__r3f||(y.__r3f.root=f,r(y,g))},removeChildFromContainer:(f,g)=>{!g||l(f.getState().scene,g)},insertInContainerBefore:(f,g,y)=>{if(!g||!y)return;const b=f.getState().scene;!b.__r3f||s(b,g,y)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var g;return!!((g=f==null?void 0:f.__r3f)!=null?g:{}).handlers},prepareUpdate(f,g,y,b){if(f.__r3f.primitive&&b.object&&b.object!==f)return[!0];{const{args:S=[],children:C,...M}=b,{args:A=[],children:k,...O}=y;if(!Array.isArray(S))throw new Error("R3F: the args prop must be an array!");if(S.some((D,U)=>D!==A[U]))return[!0];const P=WZ(f,M,O,!0);return P.changes.length?[!1,P]:null}},commitUpdate(f,[g,y],b,S,C,M){g?u(f,b,C,M):sN(f,y)},commitMount(f,g,y,b){var S;const C=(S=f.__r3f)!=null?S:{};f.raycast&&C.handlers&&C.eventCount&&f.__r3f.root.getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>zS(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var g;const{attach:y,parent:b}=(g=f.__r3f)!=null?g:{};y&&b&&cW(b,f,y),f.isObject3D&&(f.visible=!1),US(f)},unhideInstance(f,g){var y;const{attach:b,parent:S}=(y=f.__r3f)!=null?y:{};b&&S&&iN(S,f,b),(f.isObject3D&&g.visible==null||g.visible)&&(f.visible=!0),US(f)},createTextInstance:h,hideTextInstance:h,unhideTextInstance:h,getCurrentEventPriority:()=>e?e():k1.exports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Fu.fun(performance.now)?performance.now:Fu.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Fu.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Fu.fun(clearTimeout)?clearTimeout:void 0}),applyProps:sN}}var oW,aW;const BZ=()=>{var n;return(n=D4.ColorManagement)!=null?n:null},FZ=n=>n&&n.isOrthographicCamera,$Ae=n=>n&&n.hasOwnProperty("current"),zC=typeof window<"u"&&((oW=window.document)!=null&&oW.createElement||((aW=window.navigator)==null?void 0:aW.product)==="ReactNative")?de.useLayoutEffect:de.useEffect;function zZ(n){const e=de.useRef(n);return zC(()=>void(e.current=n),[n]),e}function CAe({set:n}){return zC(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class UZ extends de.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}UZ.getDerivedStateFromError=()=>({error:!0});const HZ="__default",lW=new Map,MAe=n=>n&&!!n.memoized&&!!n.changes;function GZ(n){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}const yx=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Fu={obj:n=>n===Object(n)&&!Fu.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Fu.str(n)||Fu.num(n))return n===e;const o=Fu.obj(n);if(o&&r==="reference")return n===e;const l=Fu.arr(n);if(l&&t==="reference")return n===e;if((l||o)&&n===e)return!0;let u;for(u in n)if(!(u in e))return!1;if(o&&t==="shallow"&&r==="shallow"){for(u in s?e:n)if(!Fu.equ(n[u],e[u],{strict:s,objects:"reference"}))return!1}else for(u in s?e:n)if(n[u]!==e[u])return!1;if(Fu.und(u)){if(l&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function AAe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function zS(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function YP(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),s=r.pop();return t=r.reduce((o,l)=>o[l],n),{target:t,key:s}}else return{target:t,key:e}}const uW=/-\d+$/;function iN(n,e,t){if(Fu.str(t)){if(uW.test(t)){const o=t.replace(uW,""),{target:l,key:u}=YP(n,o);Array.isArray(l[u])||(l[u]=[])}const{target:r,key:s}=YP(n,t);e.__r3f.previousAttach=r[s],r[s]=e}else e.__r3f.previousAttach=t(n,e)}function cW(n,e,t){var r,s;if(Fu.str(t)){const{target:o,key:l}=YP(n,t),u=e.__r3f.previousAttach;u===void 0?delete o[l]:o[l]=u}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(s=e.__r3f)==null||delete s.previousAttach}function WZ(n,{children:e,key:t,ref:r,...s},{children:o,key:l,ref:u,...h}={},f=!1){var g;const y=(g=n==null?void 0:n.__r3f)!=null?g:{},b=Object.entries(s),S=[];if(f){const M=Object.keys(h);for(let A=0;A<M.length;A++)s.hasOwnProperty(M[A])||b.unshift([M[A],HZ+"remove"])}b.forEach(([M,A])=>{var k;if((k=n.__r3f)!=null&&k.primitive&&M==="object"||Fu.equ(A,h[M]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(M))return S.push([M,A,!0,[]]);let O=[];M.includes("-")&&(O=M.split("-")),S.push([M,A,!1,O]);for(const P in s){const D=s[P];P.startsWith(`${M}-`)&&S.push([P,D,!1,P.split("-")])}});const C={...s};return y.memoizedProps&&y.memoizedProps.args&&(C.args=y.memoizedProps.args),y.memoizedProps&&y.memoizedProps.attach&&(C.attach=y.memoizedProps.attach),{memoized:C,changes:S}}function sN(n,e){var t,r,s;const o=(t=n.__r3f)!=null?t:{},l=o.root,u=(r=l==null||l.getState==null?void 0:l.getState())!=null?r:{},{memoized:h,changes:f}=MAe(e)?e:WZ(n,e),g=o.eventCount;n.__r3f&&(n.__r3f.memoizedProps=h);for(let y=0;y<f.length;y++){let[b,S,C,M]=f[y],A=n,k=A[b];if(M.length&&(k=M.reduce((O,P)=>O[P],n),!(k&&k.set))){const[O,...P]=M.reverse();A=P.reverse().reduce((D,U)=>D[U],n),b=O}if(S===HZ+"remove")if(A.constructor){let O=lW.get(A.constructor);O||(O=new A.constructor,lW.set(A.constructor,O)),S=O[b]}else S=0;if(C)S?o.handlers[b]=S:delete o.handlers[b],o.eventCount=Object.keys(o.handlers).length;else if(k&&k.set&&(k.copy||k instanceof U1)){if(Array.isArray(S))k.fromArray?k.fromArray(S):k.set(...S);else if(k.copy&&S&&S.constructor&&k.constructor===S.constructor)k.copy(S);else if(S!==void 0){const O=k instanceof Fn;!O&&k.setScalar?k.setScalar(S):k instanceof U1&&S instanceof U1?k.mask=S.mask:k.set(S),!BZ()&&!u.linear&&O&&k.convertSRGBToLinear()}}else A[b]=S,!u.linear&&A[b]instanceof dc&&A[b].format===Xp&&A[b].type===af&&(A[b].encoding=ms);US(n)}if(o.parent&&u.internal&&n.raycast&&g!==o.eventCount){const y=u.internal.interaction.indexOf(n);y>-1&&u.internal.interaction.splice(y,1),o.eventCount&&u.internal.interaction.push(n)}return!(f.length===1&&f[0][0]==="onUpdate")&&f.length&&(s=n.__r3f)!=null&&s.parent&&XP(n),n}function US(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function XP(n){n.onUpdate==null||n.onUpdate(n)}function IAe(n,e){n.manual||(FZ(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function OA(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function RAe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return k1.exports.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return k1.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return k1.exports.ContinuousEventPriority;default:return k1.exports.DefaultEventPriority}}function VZ(n,e,t,r){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(r),s.target.releasePointerCapture(r)))}function kAe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,s)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((r,s)=>{VZ(t.capturedMap,e,r,s)})}function OAe(n){function e(h){const{internal:f}=n.getState(),g=h.offsetX-f.initialClick[0],y=h.offsetY-f.initialClick[1];return Math.round(Math.sqrt(g*g+y*y))}function t(h){return h.filter(f=>["Move","Over","Enter","Out","Leave"].some(g=>{var y;return(y=f.__r3f)==null?void 0:y.handlers["onPointer"+g]}))}function r(h,f){const g=n.getState(),y=new Set,b=[],S=f?f(g.internal.interaction):g.internal.interaction;for(let k=0;k<S.length;k++){const O=yx(S[k]);O&&(O.raycaster.camera=void 0)}g.previousRoot||g.events.compute==null||g.events.compute(h,g);function C(k){const O=yx(k);if(!O||!O.events.enabled||O.raycaster.camera===null)return[];if(O.raycaster.camera===void 0){var P;O.events.compute==null||O.events.compute(h,O,(P=O.previousRoot)==null?void 0:P.getState()),O.raycaster.camera===void 0&&(O.raycaster.camera=null)}return O.raycaster.camera?O.raycaster.intersectObject(k,!0):[]}let M=S.flatMap(C).sort((k,O)=>{const P=yx(k.object),D=yx(O.object);return!P||!D?k.distance-O.distance:D.events.priority-P.events.priority||k.distance-O.distance}).filter(k=>{const O=OA(k);return y.has(O)?!1:(y.add(O),!0)});g.events.filter&&(M=g.events.filter(M,g));for(const k of M){let O=k.object;for(;O;){var A;(A=O.__r3f)!=null&&A.eventCount&&b.push({...k,eventObject:O}),O=O.parent}}if("pointerId"in h&&g.internal.capturedMap.has(h.pointerId))for(let k of g.internal.capturedMap.get(h.pointerId).values())y.has(OA(k.intersection))||b.push(k.intersection);return b}function s(h,f,g,y){const b=n.getState();if(h.length){const S={stopped:!1};for(const C of h){const M=yx(C.object)||b,{raycaster:A,pointer:k,camera:O,internal:P}=M,D=new Me(k.x,k.y,0).unproject(O),U=oe=>{var ue,q;return(ue=(q=P.capturedMap.get(oe))==null?void 0:q.has(C.eventObject))!=null?ue:!1},H=oe=>{const ue={intersection:C,target:f.target};P.capturedMap.has(oe)?P.capturedMap.get(oe).set(C.eventObject,ue):P.capturedMap.set(oe,new Map([[C.eventObject,ue]])),f.target.setPointerCapture(oe)},V=oe=>{const ue=P.capturedMap.get(oe);ue&&VZ(P.capturedMap,C.eventObject,ue,oe)};let z={};for(let oe in f){let ue=f[oe];typeof ue!="function"&&(z[oe]=ue)}let Z={...C,...z,pointer:k,intersections:h,stopped:S.stopped,delta:g,unprojectedPoint:D,ray:A.ray,camera:O,stopPropagation(){const oe="pointerId"in f&&P.capturedMap.get(f.pointerId);if((!oe||oe.has(C.eventObject))&&(Z.stopped=S.stopped=!0,P.hovered.size&&Array.from(P.hovered.values()).find(ue=>ue.eventObject===C.eventObject))){const ue=h.slice(0,h.indexOf(C));o([...ue,C])}},target:{hasPointerCapture:U,setPointerCapture:H,releasePointerCapture:V},currentTarget:{hasPointerCapture:U,setPointerCapture:H,releasePointerCapture:V},nativeEvent:f};if(y(Z),S.stopped===!0)break}}return h}function o(h){const{internal:f}=n.getState();for(const g of f.hovered.values())if(!h.length||!h.find(y=>y.object===g.object&&y.index===g.index&&y.instanceId===g.instanceId)){const y=g.eventObject.__r3f,b=y==null?void 0:y.handlers;if(f.hovered.delete(OA(g)),y!=null&&y.eventCount){const S={...g,intersections:h};b.onPointerOut==null||b.onPointerOut(S),b.onPointerLeave==null||b.onPointerLeave(S)}}}function l(h,f){for(let g=0;g<f.length;g++){const y=f[g].__r3f;y==null||y.handlers.onPointerMissed==null||y.handlers.onPointerMissed(h)}}function u(h){switch(h){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return f=>{const{internal:g}=n.getState();"pointerId"in f&&g.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{g.capturedMap.has(f.pointerId)&&(g.capturedMap.delete(f.pointerId),o([]))})}}return function(f){const{onPointerMissed:g,internal:y}=n.getState();y.lastEvent.current=f;const b=h==="onPointerMove",S=h==="onClick"||h==="onContextMenu"||h==="onDoubleClick",C=r(f,b?t:void 0),M=S?e(f):0;h==="onPointerDown"&&(y.initialClick=[f.offsetX,f.offsetY],y.initialHits=C.map(k=>k.eventObject)),S&&!C.length&&M<=2&&(l(f,y.interaction),g&&g(f)),b&&o(C);function A(k){const O=k.eventObject,P=O.__r3f,D=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(b){if(D.onPointerOver||D.onPointerEnter||D.onPointerOut||D.onPointerLeave){const U=OA(k),H=y.hovered.get(U);H?H.stopped&&k.stopPropagation():(y.hovered.set(U,k),D.onPointerOver==null||D.onPointerOver(k),D.onPointerEnter==null||D.onPointerEnter(k))}D.onPointerMove==null||D.onPointerMove(k)}else{const U=D[h];U?(!S||y.initialHits.includes(O))&&(l(f,y.interaction.filter(H=>!y.initialHits.includes(H))),U(k)):S&&y.initialHits.includes(O)&&l(f,y.interaction.filter(H=>!y.initialHits.includes(H)))}}s(C,f,M,A)}}return{handlePointer:u}}const jZ=n=>!!(n!=null&&n.render),YZ=de.createContext(null),LAe=(n,e)=>{const t=gAe((u,h)=>{const f=new Me,g=new Me,y=new Me;function b(A=h().camera,k=g,O=h().size){const{width:P,height:D,top:U,left:H}=O,V=P/D;k instanceof Me?y.copy(k):y.set(...k);const z=A.getWorldPosition(f).distanceTo(y);if(FZ(A))return{width:P/A.zoom,height:D/A.zoom,top:U,left:H,factor:1,distance:z,aspect:V};{const Z=A.fov*Math.PI/180,oe=2*Math.tan(Z/2)*z,ue=oe*(P/D);return{width:ue,height:oe,top:U,left:H,factor:P/ue,distance:z,aspect:V}}}let S;const C=A=>u(k=>({performance:{...k.performance,current:A}})),M=new Kt;return{set:u,get:h,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(A=1)=>n(h(),A),advance:(A,k)=>e(A,k,h()),legacy:!1,linear:!1,flat:!1,scene:zS(new j$),controls:null,clock:new R4,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const A=h();S&&clearTimeout(S),A.performance.current!==A.performance.min&&C(A.performance.min),S=setTimeout(()=>C(h().performance.max),A.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:b},setEvents:A=>u(k=>({...k,events:{...k.events,...A}})),setSize:(A,k,O,P,D)=>{const U=h().camera,H={width:A,height:k,top:P||0,left:D||0,updateStyle:O};u(V=>({size:H,viewport:{...V.viewport,...b(U,g,H)}}))},setDpr:A=>u(k=>{const O=GZ(A);return{viewport:{...k.viewport,dpr:O,initialDpr:k.viewport.initialDpr||O}}}),setFrameloop:(A="always")=>{const k=h().clock;k.stop(),k.elapsedTime=0,A!=="never"&&(k.start(),k.elapsedTime=0),u(()=>({frameloop:A}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:de.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(A,k,O)=>{const P=h().internal;return P.priority=P.priority+(k>0?1:0),P.subscribers.push({ref:A,priority:k,store:O}),P.subscribers=P.subscribers.sort((D,U)=>D.priority-U.priority),()=>{const D=h().internal;D!=null&&D.subscribers&&(D.priority=D.priority-(k>0?1:0),D.subscribers=D.subscribers.filter(U=>U.ref!==A))}}}}}),r=t.getState();let s=r.size,o=r.viewport.dpr,l=r.camera;return t.subscribe(()=>{const{camera:u,size:h,viewport:f,gl:g,set:y}=t.getState();if(h!==s||f.dpr!==o){var b;s=h,o=f.dpr,IAe(u,h),g.setPixelRatio(f.dpr);const S=(b=h.updateStyle)!=null?b:typeof HTMLCanvasElement<"u"&&g.domElement instanceof HTMLCanvasElement;g.setSize(h.width,h.height,S)}u!==l&&(l=u,y(S=>({viewport:{...S.viewport,...S.viewport.getCurrentViewport(u)}})))}),t.subscribe(u=>n(u)),t};let LA,NAe=new Set,DAe=new Set,PAe=new Set;function oN(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function bx(n,e){switch(n){case"before":return oN(NAe,e);case"after":return oN(DAe,e);case"tail":return oN(PAe,e)}}let aN,lN;function uN(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),aN=e.internal.subscribers,LA=0;LA<aN.length;LA++)lN=aN[LA],lN.ref.current(lN.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function BAe(n){let e=!1,t,r,s;function o(h){r=requestAnimationFrame(o),e=!0,t=0,bx("before",h);for(const g of n.values()){var f;s=g.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((f=s.gl.xr)!=null&&f.isPresenting)&&(t+=uN(h,s))}if(bx("after",h),t===0)return bx("tail",h),e=!1,cancelAnimationFrame(r)}function l(h,f=1){var g;if(!h)return n.forEach(y=>l(y.store.getState()),f);(g=h.gl.xr)!=null&&g.isPresenting||!h.internal.active||h.frameloop==="never"||(h.internal.frames=Math.min(60,h.internal.frames+f),e||(e=!0,requestAnimationFrame(o)))}function u(h,f=!0,g,y){if(f&&bx("before",h),g)uN(h,g,y);else for(const b of n.values())uN(h,b.store.getState());f&&bx("after",h)}return{loop:o,invalidate:l,advance:u}}function XZ(){const n=de.useContext(YZ);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function nf(n=t=>t,e){return XZ()(n,e)}function Km(n,e=0){const t=XZ(),r=t.getState().internal.subscribe,s=zZ(n);return zC(()=>r(s,e,t),[e,r,t]),null}const qw=new Map,{invalidate:hW,advance:dW}=BAe(qw),{reconciler:RR,applyProps:NA}=xAe(qw,RAe),DS={objects:"shallow",strict:!1},FAe=(n,e)=>{const t=typeof n=="function"?n(e):n;return jZ(t)?t:new f4({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function zAe(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:t,height:r,top:s,left:o}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function UAe(n){const e=qw.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,o=r||LAe(hW,dW),l=t||RR.createContainer(o,k1.exports.ConcurrentRoot,null,!1,null,"",s,null);e||qw.set(n,{fiber:l,store:o});let u,h=!1,f;return{configure(g={}){let{gl:y,size:b,events:S,onCreated:C,shadows:M=!1,linear:A=!1,flat:k=!1,legacy:O=!1,orthographic:P=!1,frameloop:D="always",dpr:U=[1,2],performance:H,raycaster:V,camera:z,onPointerMissed:Z}=g,oe=o.getState(),ue=oe.gl;oe.gl||oe.set({gl:ue=FAe(y,n)});let q=oe.raycaster;q||oe.set({raycaster:q=new L4});const{params:ae,...le}=V||{};if(Fu.equ(le,q,DS)||NA(q,{...le}),Fu.equ(ae,q.params,DS)||NA(q,{params:{...q.params,...ae}}),!oe.camera||oe.camera===f&&!Fu.equ(f,z,DS)){f=z;const se=z instanceof vE,fe=se?z:P?new dv(0,0,0,0,.1,1e3):new el(75,0,.1,1e3);se||(fe.position.z=5,z&&NA(fe,z),!oe.camera&&!(z!=null&&z.rotation)&&fe.lookAt(0,0,0)),oe.set({camera:fe})}if(!oe.xr){const se=(Ue,ke)=>{const qe=o.getState();qe.frameloop!=="never"&&dW(Ue,!0,qe,ke)},fe=()=>{const Ue=o.getState();Ue.gl.xr.enabled=Ue.gl.xr.isPresenting,Ue.gl.xr.setAnimationLoop(Ue.gl.xr.isPresenting?se:null),Ue.gl.xr.isPresenting||hW(Ue)},Se={connect(){const Ue=o.getState().gl;Ue.xr.addEventListener("sessionstart",fe),Ue.xr.addEventListener("sessionend",fe)},disconnect(){const Ue=o.getState().gl;Ue.xr.removeEventListener("sessionstart",fe),Ue.xr.removeEventListener("sessionend",fe)}};ue.xr&&Se.connect(),oe.set({xr:Se})}if(ue.shadowMap){const se=ue.shadowMap.enabled,fe=ue.shadowMap.type;if(ue.shadowMap.enabled=!!M,Fu.boo(M))ue.shadowMap.type=t$;else if(Fu.str(M)){var ce;const Se={basic:Hq,percentage:a2,soft:t$,variance:C1};ue.shadowMap.type=(ce=Se[M])!=null?ce:t$}else Fu.obj(M)&&Object.assign(ue.shadowMap,M);(se!==ue.shadowMap.enabled||fe!==ue.shadowMap.type)&&(ue.shadowMap.needsUpdate=!0)}const ge=BZ();ge&&("enabled"in ge?ge.enabled=!O:"legacyMode"in ge&&(ge.legacyMode=O));const $e=A?Mg:ms,K=k?c0:r4;ue.outputEncoding!==$e&&(ue.outputEncoding=$e),ue.toneMapping!==K&&(ue.toneMapping=K),oe.legacy!==O&&oe.set(()=>({legacy:O})),oe.linear!==A&&oe.set(()=>({linear:A})),oe.flat!==k&&oe.set(()=>({flat:k})),y&&!Fu.fun(y)&&!jZ(y)&&!Fu.equ(y,ue,DS)&&NA(ue,y),S&&!oe.events.handlers&&oe.set({events:S(o)});const ie=zAe(n,b);return Fu.equ(ie,oe.size,DS)||oe.setSize(ie.width,ie.height,ie.updateStyle,ie.top,ie.left),U&&oe.viewport.dpr!==GZ(U)&&oe.setDpr(U),oe.frameloop!==D&&oe.setFrameloop(D),oe.onPointerMissed||oe.set({onPointerMissed:Z}),H&&!Fu.equ(H,oe.performance,DS)&&oe.set(se=>({performance:{...se.performance,...H}})),u=C,h=!0,this},render(g){return h||this.configure(),RR.updateContainer(un(HAe,{store:o,children:g,onCreated:u,rootElement:n}),l,null,()=>{}),o},unmount(){KZ(n)}}}function HAe({store:n,children:e,onCreated:t,rootElement:r}){return zC(()=>{const s=n.getState();s.set(o=>({internal:{...o.internal,active:!0}})),t&&t(s),n.getState().events.connected||s.events.connect==null||s.events.connect(r)},[]),de.createElement(YZ.Provider,{value:n},e)}function KZ(n,e){const t=qw.get(n),r=t==null?void 0:t.fiber;if(r){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),RR.updateContainer(null,r,null,()=>{s&&setTimeout(()=>{try{var o,l,u,h;s.events.disconnect==null||s.events.disconnect(),(o=s.gl)==null||(l=o.renderLists)==null||l.dispose==null||l.dispose(),(u=s.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(h=s.gl)!=null&&h.xr&&s.xr.disconnect(),AAe(s),qw.delete(n),e&&e(n)}catch{}},500)})}}RR.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:de.version});function KP(){return KP=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},KP.apply(this,arguments)}function JP(n,e,t){var r,s,o,l,u;e==null&&(e=100);function h(){var g=Date.now()-l;g<e&&g>=0?r=setTimeout(h,e-g):(r=null,t||(u=n.apply(o,s),o=s=null))}var f=function(){o=this,s=arguments,l=Date.now();var g=t&&!r;return r||(r=setTimeout(h,e)),g&&(u=n.apply(o,s),o=s=null),u};return f.clear=function(){r&&(clearTimeout(r),r=null)},f.flush=function(){r&&(u=n.apply(o,s),o=s=null,clearTimeout(r),r=null)},f}JP.debounce=JP;var fW=JP;function GAe(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:s}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const o=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[l,u]=de.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),h=de.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l}),f=e?typeof e=="number"?e:e.scroll:null,g=e?typeof e=="number"?e:e.resize:null,y=de.useRef(!1);de.useEffect(()=>(y.current=!0,()=>void(y.current=!1)));const[b,S,C]=de.useMemo(()=>{const O=()=>{if(!h.current.element)return;const{left:P,top:D,width:U,height:H,bottom:V,right:z,x:Z,y:oe}=h.current.element.getBoundingClientRect(),ue={left:P,top:D,width:U,height:H,bottom:V,right:z,x:Z,y:oe};h.current.element instanceof HTMLElement&&s&&(ue.height=h.current.element.offsetHeight,ue.width=h.current.element.offsetWidth),Object.freeze(ue),y.current&&!YAe(h.current.lastBounds,ue)&&u(h.current.lastBounds=ue)};return[O,g?fW(O,g):O,f?fW(O,f):O]},[u,s,f,g]);function M(){h.current.scrollContainers&&(h.current.scrollContainers.forEach(O=>O.removeEventListener("scroll",C,!0)),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null)}function A(){!h.current.element||(h.current.resizeObserver=new o(C),h.current.resizeObserver.observe(h.current.element),t&&h.current.scrollContainers&&h.current.scrollContainers.forEach(O=>O.addEventListener("scroll",C,{capture:!0,passive:!0})))}const k=O=>{!O||O===h.current.element||(M(),h.current.element=O,h.current.scrollContainers=JZ(O),A())};return VAe(C,!!t),WAe(S),de.useEffect(()=>{M(),A()},[t,C,S]),de.useEffect(()=>M,[]),[k,l,b]}function WAe(n){de.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function VAe(n,e){de.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function JZ(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:s}=window.getComputedStyle(n);return[t,r,s].some(o=>o==="auto"||o==="scroll")&&e.push(n),[...e,...JZ(n.parentElement)]}const jAe=["x","y","top","bottom","left","right","width","height"],YAe=(n,e)=>jAe.every(t=>n[t]===e[t]);var XAe=Object.defineProperty,KAe=Object.defineProperties,JAe=Object.getOwnPropertyDescriptors,pW=Object.getOwnPropertySymbols,qAe=Object.prototype.hasOwnProperty,QAe=Object.prototype.propertyIsEnumerable,mW=(n,e,t)=>e in n?XAe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gW=(n,e)=>{for(var t in e||(e={}))qAe.call(e,t)&&mW(n,t,e[t]);if(pW)for(var t of pW(e))QAe.call(e,t)&&mW(n,t,e[t]);return n},ZAe=(n,e)=>KAe(n,JAe(e)),vW;function qZ(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const s=qZ(r,e,t);if(s)return s;r=e?null:r.sibling}}function QZ(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const P4=QZ(de.createContext(null));class ZZ extends de.Component{render(){return un(P4.Provider,{value:this._reactInternals,children:this.props.children})}}const{ReactCurrentOwner:_W,ReactCurrentDispatcher:yW}=(vW=de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)!=null?vW:{};function eIe(){const n=de.useContext(P4),e=de.useId();return de.useMemo(()=>{var t;return(t=_W==null?void 0:_W.current)!=null?t:qZ(n,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[n,e])}function tIe(){var n,e;const t=eIe(),[r]=de.useState(()=>new Map);r.clear();let s=t;for(;s;){const o=(n=s.type)==null?void 0:n._context;o&&o!==P4&&!r.has(o)&&r.set(o,(e=yW==null?void 0:yW.current)==null?void 0:e.readContext(QZ(o))),s=s.return}return de.useMemo(()=>Array.from(r.keys()).reduce((o,l)=>u=>de.createElement(o,null,de.createElement(l.Provider,ZAe(gW({},u),{value:r.get(l)}))),o=>un(ZZ,{...gW({},o)})),[r])}const cN={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function nIe(n){const{handlePointer:e}=OAe(n);return{priority:1,enabled:!0,compute(t,r,s){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(cN).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:s}=n.getState();(t=s.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{var r;const{set:s,events:o}=n.getState();o.disconnect==null||o.disconnect(),s(l=>({events:{...l.events,connected:t}})),Object.entries((r=o.handlers)!=null?r:[]).forEach(([l,u])=>{const[h,f]=cN[l];t.addEventListener(h,u,{passive:f})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var s;Object.entries((s=r.handlers)!=null?s:[]).forEach(([o,l])=>{if(r&&r.connected instanceof HTMLElement){const[u]=cN[o];r.connected.removeEventListener(u,l)}}),t(o=>({events:{...o.events,connected:void 0}}))}}}}const rIe=de.forwardRef(function({children:n,fallback:e,resize:t,style:r,gl:s,events:o=nIe,eventSource:l,eventPrefix:u,shadows:h,linear:f,flat:g,legacy:y,orthographic:b,frameloop:S,dpr:C,performance:M,raycaster:A,camera:k,onPointerMissed:O,onCreated:P,...D},U){de.useMemo(()=>EAe(dAe),[]);const H=tIe(),[V,z]=GAe({scroll:!0,debounce:{scroll:50,resize:0},...t}),Z=de.useRef(null),oe=de.useRef(null);de.useImperativeHandle(U,()=>Z.current);const ue=zZ(O),[q,ae]=de.useState(!1),[le,ce]=de.useState(!1);if(q)throw q;if(le)throw le;const ge=de.useRef(null);return zC(()=>{const $e=Z.current;z.width>0&&z.height>0&&$e&&(ge.current||(ge.current=UAe($e)),ge.current.configure({gl:s,events:o,shadows:h,linear:f,flat:g,legacy:y,orthographic:b,frameloop:S,dpr:C,performance:M,raycaster:A,camera:k,size:z,onPointerMissed:(...K)=>ue.current==null?void 0:ue.current(...K),onCreated:K=>{K.events.connect==null||K.events.connect(l?$Ae(l)?l.current:l:oe.current),u&&K.setEvents({compute:(ie,se)=>{const fe=ie[u+"X"],Se=ie[u+"Y"];se.pointer.set(fe/se.size.width*2-1,-(Se/se.size.height)*2+1),se.raycaster.setFromCamera(se.pointer,se.camera)}}),P==null||P(K)}}),ge.current.render(un(H,{children:un(UZ,{set:ce,children:un(de.Suspense,{fallback:un(CAe,{set:ae}),children:n})})})))}),de.useEffect(()=>{const $e=Z.current;if($e)return()=>KZ($e)},[]),un("div",{ref:oe,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:l?"none":"auto",...r},...D,children:un("div",{ref:V,style:{width:"100%",height:"100%"},children:un("canvas",{ref:Z,style:{display:"block"},children:e})})})}),iIe=de.forwardRef(function(n,e){return un(ZZ,{children:un(rIe,{...n,ref:e})})});var eee={exports:{}},Hp={},bW={exports:{}},TW={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SW;function sIe(){return SW||(SW=1,function(n){function e(K,ie){var se=K.length;K.push(ie);e:for(;0<se;){var fe=se-1>>>1,Se=K[fe];if(0<s(Se,ie))K[fe]=ie,K[se]=Se,se=fe;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ie=K[0],se=K.pop();if(se!==ie){K[0]=se;e:for(var fe=0,Se=K.length,Ue=Se>>>1;fe<Ue;){var ke=2*(fe+1)-1,qe=K[ke],we=ke+1,Ze=K[we];if(0>s(qe,se))we<Se&&0>s(Ze,qe)?(K[fe]=Ze,K[we]=se,fe=we):(K[fe]=qe,K[ke]=se,fe=ke);else if(we<Se&&0>s(Ze,se))K[fe]=Ze,K[we]=se,fe=we;else break e}}return ie}function s(K,ie){var se=K.sortIndex-ie.sortIndex;return se!==0?se:K.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],f=[],g=1,y=null,b=3,S=!1,C=!1,M=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(K){for(var ie=t(f);ie!==null;){if(ie.callback===null)r(f);else if(ie.startTime<=K)r(f),ie.sortIndex=ie.expirationTime,e(h,ie);else break;ie=t(f)}}function D(K){if(M=!1,P(K),!C)if(t(h)!==null)C=!0,ge(U);else{var ie=t(f);ie!==null&&$e(D,ie.startTime-K)}}function U(K,ie){C=!1,M&&(M=!1,k(z),z=-1),S=!0;var se=b;try{for(P(ie),y=t(h);y!==null&&(!(y.expirationTime>ie)||K&&!ue());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,b=y.priorityLevel;var Se=fe(y.expirationTime<=ie);ie=n.unstable_now(),typeof Se=="function"?y.callback=Se:y===t(h)&&r(h),P(ie)}else r(h);y=t(h)}if(y!==null)var Ue=!0;else{var ke=t(f);ke!==null&&$e(D,ke.startTime-ie),Ue=!1}return Ue}finally{y=null,b=se,S=!1}}var H=!1,V=null,z=-1,Z=5,oe=-1;function ue(){return!(n.unstable_now()-oe<Z)}function q(){if(V!==null){var K=n.unstable_now();oe=K;var ie=!0;try{ie=V(!0,K)}finally{ie?ae():(H=!1,V=null)}}else H=!1}var ae;if(typeof O=="function")ae=function(){O(q)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ce=le.port2;le.port1.onmessage=q,ae=function(){ce.postMessage(null)}}else ae=function(){A(q,0)};function ge(K){V=K,H||(H=!0,ae())}function $e(K,ie){z=A(function(){K(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_continueExecution=function(){C||S||(C=!0,ge(U))},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(K){switch(b){case 1:case 2:case 3:var ie=3;break;default:ie=b}var se=b;b=ie;try{return K()}finally{b=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(K,ie){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var se=b;b=K;try{return ie()}finally{b=se}},n.unstable_scheduleCallback=function(K,ie,se){var fe=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?fe+se:fe):se=fe,K){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=se+Se,K={id:g++,callback:ie,priorityLevel:K,startTime:se,expirationTime:Se,sortIndex:-1},se>fe?(K.sortIndex=se,e(f,K),t(h)===null&&K===t(f)&&(M?(k(z),z=-1):M=!0,$e(D,se-fe))):(K.sortIndex=Se,e(h,K),C||S||(C=!0,ge(U))),K},n.unstable_shouldYield=ue,n.unstable_wrapCallback=function(K){var ie=b;return function(){var se=b;b=ie;try{return K.apply(this,arguments)}finally{b=se}}}}(TW)),TW}var wW;function oIe(){return wW||(wW=1,function(n){n.exports=sIe()}(bW)),bW.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EW;function aIe(){if(EW)return Hp;EW=1;var n=Tt,e=oIe();function t(_){for(var T="https://reactjs.org/docs/error-decoder.html?invariant="+_,R=1;R<arguments.length;R++)T+="&args[]="+encodeURIComponent(arguments[R]);return"Minified React error #"+_+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(_,T){l(_,T),l(_+"Capture",T)}function l(_,T){for(s[_]=T,_=0;_<T.length;_++)r.add(T[_])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function b(_){return h.call(y,_)?!0:h.call(g,_)?!1:f.test(_)?y[_]=!0:(g[_]=!0,!1)}function S(_,T,R,F){if(R!==null&&R.type===0)return!1;switch(typeof T){case"function":case"symbol":return!0;case"boolean":return F?!1:R!==null?!R.acceptsBooleans:(_=_.toLowerCase().slice(0,5),_!=="data-"&&_!=="aria-");default:return!1}}function C(_,T,R,F){if(T===null||typeof T>"u"||S(_,T,R,F))return!0;if(F)return!1;if(R!==null)switch(R.type){case 3:return!T;case 4:return T===!1;case 5:return isNaN(T);case 6:return isNaN(T)||1>T}return!1}function M(_,T,R,F,Y,ee,be){this.acceptsBooleans=T===2||T===3||T===4,this.attributeName=F,this.attributeNamespace=Y,this.mustUseProperty=R,this.propertyName=_,this.type=T,this.sanitizeURL=ee,this.removeEmptyString=be}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_){A[_]=new M(_,0,!1,_,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_){var T=_[0];A[T]=new M(T,1,!1,_[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(_){A[_]=new M(_,2,!1,_.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_){A[_]=new M(_,2,!1,_,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_){A[_]=new M(_,3,!1,_.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(_){A[_]=new M(_,3,!0,_,null,!1,!1)}),["capture","download"].forEach(function(_){A[_]=new M(_,4,!1,_,null,!1,!1)}),["cols","rows","size","span"].forEach(function(_){A[_]=new M(_,6,!1,_,null,!1,!1)}),["rowSpan","start"].forEach(function(_){A[_]=new M(_,5,!1,_.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function O(_){return _[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_){var T=_.replace(k,O);A[T]=new M(T,1,!1,_,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_){var T=_.replace(k,O);A[T]=new M(T,1,!1,_,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(_){var T=_.replace(k,O);A[T]=new M(T,1,!1,_,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(_){A[_]=new M(_,1,!1,_.toLowerCase(),null,!1,!1)}),A.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(_){A[_]=new M(_,1,!1,_.toLowerCase(),null,!0,!0)});function P(_,T,R,F){var Y=A.hasOwnProperty(T)?A[T]:null;(Y!==null?Y.type!==0:F||!(2<T.length)||T[0]!=="o"&&T[0]!=="O"||T[1]!=="n"&&T[1]!=="N")&&(C(T,R,Y,F)&&(R=null),F||Y===null?b(T)&&(R===null?_.removeAttribute(T):_.setAttribute(T,""+R)):Y.mustUseProperty?_[Y.propertyName]=R===null?Y.type===3?!1:"":R:(T=Y.attributeName,F=Y.attributeNamespace,R===null?_.removeAttribute(T):(Y=Y.type,R=Y===3||Y===4&&R===!0?"":""+R,F?_.setAttributeNS(F,T,R):_.setAttribute(T,R))))}var D=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),H=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),oe=Symbol.for("react.provider"),ue=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),$e=Symbol.for("react.offscreen"),K=Symbol.iterator;function ie(_){return _===null||typeof _!="object"?null:(_=K&&_[K]||_["@@iterator"],typeof _=="function"?_:null)}var se=Object.assign,fe;function Se(_){if(fe===void 0)try{throw Error()}catch(R){var T=R.stack.trim().match(/\n( *(at )?)/);fe=T&&T[1]||""}return`
`+fe+_}var Ue=!1;function ke(_,T){if(!_||Ue)return"";Ue=!0;var R=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(T)if(T=function(){throw Error()},Object.defineProperty(T.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(T,[])}catch(Dt){var F=Dt}Reflect.construct(_,[],T)}else{try{T.call()}catch(Dt){F=Dt}_.call(T.prototype)}else{try{throw Error()}catch(Dt){F=Dt}_()}}catch(Dt){if(Dt&&F&&typeof Dt.stack=="string"){for(var Y=Dt.stack.split(`
`),ee=F.stack.split(`
`),be=Y.length-1,Je=ee.length-1;1<=be&&0<=Je&&Y[be]!==ee[Je];)Je--;for(;1<=be&&0<=Je;be--,Je--)if(Y[be]!==ee[Je]){if(be!==1||Je!==1)do if(be--,Je--,0>Je||Y[be]!==ee[Je]){var ut=`
`+Y[be].replace(" at new "," at ");return _.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",_.displayName)),ut}while(1<=be&&0<=Je);break}}}finally{Ue=!1,Error.prepareStackTrace=R}return(_=_?_.displayName||_.name:"")?Se(_):""}function qe(_){switch(_.tag){case 5:return Se(_.type);case 16:return Se("Lazy");case 13:return Se("Suspense");case 19:return Se("SuspenseList");case 0:case 2:case 15:return _=ke(_.type,!1),_;case 11:return _=ke(_.type.render,!1),_;case 1:return _=ke(_.type,!0),_;default:return""}}function we(_){if(_==null)return null;if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case V:return"Fragment";case H:return"Portal";case Z:return"Profiler";case z:return"StrictMode";case ae:return"Suspense";case le:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case ue:return(_.displayName||"Context")+".Consumer";case oe:return(_._context.displayName||"Context")+".Provider";case q:var T=_.render;return _=_.displayName,_||(_=T.displayName||T.name||"",_=_!==""?"ForwardRef("+_+")":"ForwardRef"),_;case ce:return T=_.displayName||null,T!==null?T:we(_.type)||"Memo";case ge:T=_._payload,_=_._init;try{return we(_(T))}catch{}}return null}function Ze(_){var T=_.type;switch(_.tag){case 24:return"Cache";case 9:return(T.displayName||"Context")+".Consumer";case 10:return(T._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _=T.render,_=_.displayName||_.name||"",T.displayName||(_!==""?"ForwardRef("+_+")":"ForwardRef");case 7:return"Fragment";case 5:return T;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(T);case 8:return T===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof T=="function")return T.displayName||T.name||null;if(typeof T=="string")return T}return null}function et(_){switch(typeof _){case"boolean":case"number":case"string":case"undefined":return _;case"object":return _;default:return""}}function ft(_){var T=_.type;return(_=_.nodeName)&&_.toLowerCase()==="input"&&(T==="checkbox"||T==="radio")}function at(_){var T=ft(_)?"checked":"value",R=Object.getOwnPropertyDescriptor(_.constructor.prototype,T),F=""+_[T];if(!_.hasOwnProperty(T)&&typeof R<"u"&&typeof R.get=="function"&&typeof R.set=="function"){var Y=R.get,ee=R.set;return Object.defineProperty(_,T,{configurable:!0,get:function(){return Y.call(this)},set:function(be){F=""+be,ee.call(this,be)}}),Object.defineProperty(_,T,{enumerable:R.enumerable}),{getValue:function(){return F},setValue:function(be){F=""+be},stopTracking:function(){_._valueTracker=null,delete _[T]}}}}function Ge(_){_._valueTracker||(_._valueTracker=at(_))}function Ie(_){if(!_)return!1;var T=_._valueTracker;if(!T)return!0;var R=T.getValue(),F="";return _&&(F=ft(_)?_.checked?"true":"false":_.value),_=F,_!==R?(T.setValue(_),!0):!1}function He(_){if(_=_||(typeof document<"u"?document:void 0),typeof _>"u")return null;try{return _.activeElement||_.body}catch{return _.body}}function it(_,T){var R=T.checked;return se({},T,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:R??_._wrapperState.initialChecked})}function st(_,T){var R=T.defaultValue==null?"":T.defaultValue,F=T.checked!=null?T.checked:T.defaultChecked;R=et(T.value!=null?T.value:R),_._wrapperState={initialChecked:F,initialValue:R,controlled:T.type==="checkbox"||T.type==="radio"?T.checked!=null:T.value!=null}}function It(_,T){T=T.checked,T!=null&&P(_,"checked",T,!1)}function kt(_,T){It(_,T);var R=et(T.value),F=T.type;if(R!=null)F==="number"?(R===0&&_.value===""||_.value!=R)&&(_.value=""+R):_.value!==""+R&&(_.value=""+R);else if(F==="submit"||F==="reset"){_.removeAttribute("value");return}T.hasOwnProperty("value")?Mt(_,T.type,R):T.hasOwnProperty("defaultValue")&&Mt(_,T.type,et(T.defaultValue)),T.checked==null&&T.defaultChecked!=null&&(_.defaultChecked=!!T.defaultChecked)}function vt(_,T,R){if(T.hasOwnProperty("value")||T.hasOwnProperty("defaultValue")){var F=T.type;if(!(F!=="submit"&&F!=="reset"||T.value!==void 0&&T.value!==null))return;T=""+_._wrapperState.initialValue,R||T===_.value||(_.value=T),_.defaultValue=T}R=_.name,R!==""&&(_.name=""),_.defaultChecked=!!_._wrapperState.initialChecked,R!==""&&(_.name=R)}function Mt(_,T,R){(T!=="number"||He(_.ownerDocument)!==_)&&(R==null?_.defaultValue=""+_._wrapperState.initialValue:_.defaultValue!==""+R&&(_.defaultValue=""+R))}var Ct=Array.isArray;function gt(_,T,R,F){if(_=_.options,T){T={};for(var Y=0;Y<R.length;Y++)T["$"+R[Y]]=!0;for(R=0;R<_.length;R++)Y=T.hasOwnProperty("$"+_[R].value),_[R].selected!==Y&&(_[R].selected=Y),Y&&F&&(_[R].defaultSelected=!0)}else{for(R=""+et(R),T=null,Y=0;Y<_.length;Y++){if(_[Y].value===R){_[Y].selected=!0,F&&(_[Y].defaultSelected=!0);return}T!==null||_[Y].disabled||(T=_[Y])}T!==null&&(T.selected=!0)}}function Ee(_,T){if(T.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},T,{value:void 0,defaultValue:void 0,children:""+_._wrapperState.initialValue})}function re(_,T){var R=T.value;if(R==null){if(R=T.children,T=T.defaultValue,R!=null){if(T!=null)throw Error(t(92));if(Ct(R)){if(1<R.length)throw Error(t(93));R=R[0]}T=R}T==null&&(T=""),R=T}_._wrapperState={initialValue:et(R)}}function Be(_,T){var R=et(T.value),F=et(T.defaultValue);R!=null&&(R=""+R,R!==_.value&&(_.value=R),T.defaultValue==null&&_.defaultValue!==R&&(_.defaultValue=R)),F!=null&&(_.defaultValue=""+F)}function mt(_){var T=_.textContent;T===_._wrapperState.initialValue&&T!==""&&T!==null&&(_.value=T)}function yt(_){switch(_){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wt(_,T){return _==null||_==="http://www.w3.org/1999/xhtml"?yt(T):_==="http://www.w3.org/2000/svg"&&T==="foreignObject"?"http://www.w3.org/1999/xhtml":_}var Ke,Qe=function(_){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(T,R,F,Y){MSApp.execUnsafeLocalFunction(function(){return _(T,R,F,Y)})}:_}(function(_,T){if(_.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _)_.innerHTML=T;else{for(Ke=Ke||document.createElement("div"),Ke.innerHTML="<svg>"+T.valueOf().toString()+"</svg>",T=Ke.firstChild;_.firstChild;)_.removeChild(_.firstChild);for(;T.firstChild;)_.appendChild(T.firstChild)}});function Le(_,T){if(T){var R=_.firstChild;if(R&&R===_.lastChild&&R.nodeType===3){R.nodeValue=T;return}}_.textContent=T}var Q={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},te=["Webkit","ms","Moz","O"];Object.keys(Q).forEach(function(_){te.forEach(function(T){T=T+_.charAt(0).toUpperCase()+_.substring(1),Q[T]=Q[_]})});function me(_,T,R){return T==null||typeof T=="boolean"||T===""?"":R||typeof T!="number"||T===0||Q.hasOwnProperty(_)&&Q[_]?(""+T).trim():T+"px"}function Re(_,T){_=_.style;for(var R in T)if(T.hasOwnProperty(R)){var F=R.indexOf("--")===0,Y=me(R,T[R],F);R==="float"&&(R="cssFloat"),F?_.setProperty(R,Y):_[R]=Y}}var Fe=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bt(_,T){if(T){if(Fe[_]&&(T.children!=null||T.dangerouslySetInnerHTML!=null))throw Error(t(137,_));if(T.dangerouslySetInnerHTML!=null){if(T.children!=null)throw Error(t(60));if(typeof T.dangerouslySetInnerHTML!="object"||!("__html"in T.dangerouslySetInnerHTML))throw Error(t(61))}if(T.style!=null&&typeof T.style!="object")throw Error(t(62))}}function ze(_,T){if(_.indexOf("-")===-1)return typeof T.is=="string";switch(_){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pt=null;function lt(_){return _=_.target||_.srcElement||window,_.correspondingUseElement&&(_=_.correspondingUseElement),_.nodeType===3?_.parentNode:_}var Gt=null,Wt=null,bn=null;function ar(_){if(_=Ir(_)){if(typeof Gt!="function")throw Error(t(280));var T=_.stateNode;T&&(T=Uf(T),Gt(_.stateNode,_.type,T))}}function cr(_){Wt?bn?bn.push(_):bn=[_]:Wt=_}function oi(){if(Wt){var _=Wt,T=bn;if(bn=Wt=null,ar(_),T)for(_=0;_<T.length;_++)ar(T[_])}}function Mr(_,T){return _(T)}function _r(){}var ne=!1;function Te(_,T,R){if(ne)return _(T,R);ne=!0;try{return Mr(_,T,R)}finally{ne=!1,(Wt!==null||bn!==null)&&(_r(),oi())}}function je(_,T){var R=_.stateNode;if(R===null)return null;var F=Uf(R);if(F===null)return null;R=F[T];e:switch(T){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(_=_.type,F=!(_==="button"||_==="input"||_==="select"||_==="textarea")),_=!F;break e;default:_=!1}if(_)return null;if(R&&typeof R!="function")throw Error(t(231,T,typeof R));return R}var ct=!1;if(u)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){ct=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch{ct=!1}function nn(_,T,R,F,Y,ee,be,Je,ut){var Dt=Array.prototype.slice.call(arguments,3);try{T.apply(R,Dt)}catch(en){this.onError(en)}}var kn=!1,De=null,_t=!1,Ot=null,St={onError:function(_){kn=!0,De=_}};function Xt(_,T,R,F,Y,ee,be,Je,ut){kn=!1,De=null,nn.apply(St,arguments)}function Wn(_,T,R,F,Y,ee,be,Je,ut){if(Xt.apply(this,arguments),kn){if(kn){var Dt=De;kn=!1,De=null}else throw Error(t(198));_t||(_t=!0,Ot=Dt)}}function ir(_){var T=_,R=_;if(_.alternate)for(;T.return;)T=T.return;else{_=T;do T=_,T.flags&4098&&(R=T.return),_=T.return;while(_)}return T.tag===3?R:null}function br(_){if(_.tag===13){var T=_.memoizedState;if(T===null&&(_=_.alternate,_!==null&&(T=_.memoizedState)),T!==null)return T.dehydrated}return null}function Or(_){if(ir(_)!==_)throw Error(t(188))}function Ei(_){var T=_.alternate;if(!T){if(T=ir(_),T===null)throw Error(t(188));return T!==_?null:_}for(var R=_,F=T;;){var Y=R.return;if(Y===null)break;var ee=Y.alternate;if(ee===null){if(F=Y.return,F!==null){R=F;continue}break}if(Y.child===ee.child){for(ee=Y.child;ee;){if(ee===R)return Or(Y),_;if(ee===F)return Or(Y),T;ee=ee.sibling}throw Error(t(188))}if(R.return!==F.return)R=Y,F=ee;else{for(var be=!1,Je=Y.child;Je;){if(Je===R){be=!0,R=Y,F=ee;break}if(Je===F){be=!0,F=Y,R=ee;break}Je=Je.sibling}if(!be){for(Je=ee.child;Je;){if(Je===R){be=!0,R=ee,F=Y;break}if(Je===F){be=!0,F=ee,R=Y;break}Je=Je.sibling}if(!be)throw Error(t(189))}}if(R.alternate!==F)throw Error(t(190))}if(R.tag!==3)throw Error(t(188));return R.stateNode.current===R?_:T}function Lr(_){return _=Ei(_),_!==null?Ar(_):null}function Ar(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){var T=Ar(_);if(T!==null)return T;_=_.sibling}return null}var Ss=e.unstable_scheduleCallback,La=e.unstable_cancelCallback,Mo=e.unstable_shouldYield,Xl=e.unstable_requestPaint,rn=e.unstable_now,Dr=e.unstable_getCurrentPriorityLevel,tl=e.unstable_ImmediatePriority,Na=e.unstable_UserBlockingPriority,zs=e.unstable_NormalPriority,Us=e.unstable_LowPriority,Pi=e.unstable_IdlePriority,Pr=null,In=null;function Nr(_){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Pr,_,void 0,(_.current.flags&128)===128)}catch{}}var jr=Math.clz32?Math.clz32:ws,Sr=Math.log,Bi=Math.LN2;function ws(_){return _>>>=0,_===0?32:31-(Sr(_)/Bi|0)|0}var fi=64,gs=4194304;function nl(_){switch(_&-_){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _}}function Da(_,T){var R=_.pendingLanes;if(R===0)return 0;var F=0,Y=_.suspendedLanes,ee=_.pingedLanes,be=R&268435455;if(be!==0){var Je=be&~Y;Je!==0?F=nl(Je):(ee&=be,ee!==0&&(F=nl(ee)))}else be=R&~Y,be!==0?F=nl(be):ee!==0&&(F=nl(ee));if(F===0)return 0;if(T!==0&&T!==F&&!(T&Y)&&(Y=F&-F,ee=T&-T,Y>=ee||Y===16&&(ee&4194240)!==0))return T;if(F&4&&(F|=R&16),T=_.entangledLanes,T!==0)for(_=_.entanglements,T&=F;0<T;)R=31-jr(T),Y=1<<R,F|=_[R],T&=~Y;return F}function fc(_,T){switch(_){case 1:case 2:case 4:return T+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return T+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pc(_,T){for(var R=_.suspendedLanes,F=_.pingedLanes,Y=_.expirationTimes,ee=_.pendingLanes;0<ee;){var be=31-jr(ee),Je=1<<be,ut=Y[be];ut===-1?(!(Je&R)||Je&F)&&(Y[be]=fc(Je,T)):ut<=T&&(_.expiredLanes|=Je),ee&=~Je}}function qs(_){return _=_.pendingLanes&-1073741825,_!==0?_:_&1073741824?1073741824:0}function qo(){var _=fi;return fi<<=1,!(fi&4194240)&&(fi=64),_}function Kl(_){for(var T=[],R=0;31>R;R++)T.push(_);return T}function vu(_,T,R){_.pendingLanes|=T,T!==536870912&&(_.suspendedLanes=0,_.pingedLanes=0),_=_.eventTimes,T=31-jr(T),_[T]=R}function gh(_,T){var R=_.pendingLanes&~T;_.pendingLanes=T,_.suspendedLanes=0,_.pingedLanes=0,_.expiredLanes&=T,_.mutableReadLanes&=T,_.entangledLanes&=T,T=_.entanglements;var F=_.eventTimes;for(_=_.expirationTimes;0<R;){var Y=31-jr(R),ee=1<<Y;T[Y]=0,F[Y]=-1,_[Y]=-1,R&=~ee}}function Qo(_,T){var R=_.entangledLanes|=T;for(_=_.entanglements;R;){var F=31-jr(R),Y=1<<F;Y&T|_[F]&T&&(_[F]|=T),R&=~Y}}var Tr=0;function $i(_){return _&=-_,1<_?4<_?_&268435455?16:536870912:4:1}var Pc,vh,Bc,xl,_u,$l=!1,Cl=[],wr=null,Er=null,Jl=null,rl=new Map,il=new Map,yu=[],Qi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vs(_,T){switch(_){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Jl=null;break;case"pointerover":case"pointerout":rl.delete(T.pointerId);break;case"gotpointercapture":case"lostpointercapture":il.delete(T.pointerId)}}function sl(_,T,R,F,Y,ee){return _===null||_.nativeEvent!==ee?(_={blockedOn:T,domEventName:R,eventSystemFlags:F,nativeEvent:ee,targetContainers:[Y]},T!==null&&(T=Ir(T),T!==null&&vh(T)),_):(_.eventSystemFlags|=F,T=_.targetContainers,Y!==null&&T.indexOf(Y)===-1&&T.push(Y),_)}function Cd(_,T,R,F,Y){switch(T){case"focusin":return wr=sl(wr,_,T,R,F,Y),!0;case"dragenter":return Er=sl(Er,_,T,R,F,Y),!0;case"mouseover":return Jl=sl(Jl,_,T,R,F,Y),!0;case"pointerover":var ee=Y.pointerId;return rl.set(ee,sl(rl.get(ee)||null,_,T,R,F,Y)),!0;case"gotpointercapture":return ee=Y.pointerId,il.set(ee,sl(il.get(ee)||null,_,T,R,F,Y)),!0}return!1}function lo(_){var T=ga(_.target);if(T!==null){var R=ir(T);if(R!==null){if(T=R.tag,T===13){if(T=br(R),T!==null){_.blockedOn=T,_u(_.priority,function(){Bc(R)});return}}else if(T===3&&R.stateNode.current.memoizedState.isDehydrated){_.blockedOn=R.tag===3?R.stateNode.containerInfo:null;return}}}_.blockedOn=null}function Uu(_){if(_.blockedOn!==null)return!1;for(var T=_.targetContainers;0<T.length;){var R=ha(_.domEventName,_.eventSystemFlags,T[0],_.nativeEvent);if(R===null){R=_.nativeEvent;var F=new R.constructor(R.type,R);Pt=F,R.target.dispatchEvent(F),Pt=null}else return T=Ir(R),T!==null&&vh(T),_.blockedOn=R,!1;T.shift()}return!0}function ca(_,T,R){Uu(_)&&R.delete(T)}function bu(){$l=!1,wr!==null&&Uu(wr)&&(wr=null),Er!==null&&Uu(Er)&&(Er=null),Jl!==null&&Uu(Jl)&&(Jl=null),rl.forEach(ca),il.forEach(ca)}function lr(_,T){_.blockedOn===T&&(_.blockedOn=null,$l||($l=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bu)))}function Gn(_){function T(Y){return lr(Y,_)}if(0<Cl.length){lr(Cl[0],_);for(var R=1;R<Cl.length;R++){var F=Cl[R];F.blockedOn===_&&(F.blockedOn=null)}}for(wr!==null&&lr(wr,_),Er!==null&&lr(Er,_),Jl!==null&&lr(Jl,_),rl.forEach(T),il.forEach(T),R=0;R<yu.length;R++)F=yu[R],F.blockedOn===_&&(F.blockedOn=null);for(;0<yu.length&&(R=yu[0],R.blockedOn===null);)lo(R),R.blockedOn===null&&yu.shift()}var Es=D.ReactCurrentBatchConfig,uo=!0;function Hu(_,T,R,F){var Y=Tr,ee=Es.transition;Es.transition=null;try{Tr=1,_h(_,T,R,F)}finally{Tr=Y,Es.transition=ee}}function Tu(_,T,R,F){var Y=Tr,ee=Es.transition;Es.transition=null;try{Tr=4,_h(_,T,R,F)}finally{Tr=Y,Es.transition=ee}}function _h(_,T,R,F){if(uo){var Y=ha(_,T,R,F);if(Y===null)Id(_,T,F,Pa,R),vs(_,F);else if(Cd(Y,_,T,R,F))F.stopPropagation();else if(vs(_,F),T&4&&-1<Qi.indexOf(_)){for(;Y!==null;){var ee=Ir(Y);if(ee!==null&&Pc(ee),ee=ha(_,T,R,F),ee===null&&Id(_,T,F,Pa,R),ee===Y)break;Y=ee}Y!==null&&F.stopPropagation()}else Id(_,T,F,null,R)}}var Pa=null;function ha(_,T,R,F){if(Pa=null,_=lt(F),_=ga(_),_!==null)if(T=ir(_),T===null)_=null;else if(R=T.tag,R===13){if(_=br(T),_!==null)return _;_=null}else if(R===3){if(T.stateNode.current.memoizedState.isDehydrated)return T.tag===3?T.stateNode.containerInfo:null;_=null}else T!==_&&(_=null);return Pa=_,null}function Gu(_){switch(_){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dr()){case tl:return 1;case Na:return 4;case zs:case Us:return 16;case Pi:return 536870912;default:return 16}default:return 16}}var $r=null,Rs=null,bi=null;function Ci(){if(bi)return bi;var _,T=Rs,R=T.length,F,Y="value"in $r?$r.value:$r.textContent,ee=Y.length;for(_=0;_<R&&T[_]===Y[_];_++);var be=R-_;for(F=1;F<=be&&T[R-F]===Y[ee-F];F++);return bi=Y.slice(_,1<F?1-F:void 0)}function da(_){var T=_.keyCode;return"charCode"in _?(_=_.charCode,_===0&&T===13&&(_=13)):_=T,_===10&&(_=13),32<=_||_===13?_:0}function ti(){return!0}function Su(){return!1}function Ao(_){function T(R,F,Y,ee,be){this._reactName=R,this._targetInst=Y,this.type=F,this.nativeEvent=ee,this.target=be,this.currentTarget=null;for(var Je in _)_.hasOwnProperty(Je)&&(R=_[Je],this[Je]=R?R(ee):ee[Je]);return this.isDefaultPrevented=(ee.defaultPrevented!=null?ee.defaultPrevented:ee.returnValue===!1)?ti:Su,this.isPropagationStopped=Su,this}return se(T.prototype,{preventDefault:function(){this.defaultPrevented=!0;var R=this.nativeEvent;R&&(R.preventDefault?R.preventDefault():typeof R.returnValue!="unknown"&&(R.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var R=this.nativeEvent;R&&(R.stopPropagation?R.stopPropagation():typeof R.cancelBubble!="unknown"&&(R.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),T}var wu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_){return _.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ol=Ao(wu),Fi=se({},wu,{view:0,detail:0}),Mi=Ao(Fi),Vn,Ai,Jr,dd=se({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wu,button:0,buttons:0,relatedTarget:function(_){return _.relatedTarget===void 0?_.fromElement===_.srcElement?_.toElement:_.fromElement:_.relatedTarget},movementX:function(_){return"movementX"in _?_.movementX:(_!==Jr&&(Jr&&_.type==="mousemove"?(Vn=_.screenX-Jr.screenX,Ai=_.screenY-Jr.screenY):Ai=Vn=0,Jr=_),Vn)},movementY:function(_){return"movementY"in _?_.movementY:Ai}}),Eu=Ao(dd),ji=se({},dd,{dataTransfer:0}),Ba=Ao(ji),yh=se({},Fi,{relatedTarget:0}),pr=Ao(yh),Zo=se({},wu,{animationName:0,elapsedTime:0,pseudoElement:0}),fd=Ao(Zo),lf=se({},wu,{clipboardData:function(_){return"clipboardData"in _?_.clipboardData:window.clipboardData}}),Fc=Ao(lf),uf=se({},wu,{data:0}),Ff=Ao(uf),wp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Md={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ql={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ks(_){var T=this.nativeEvent;return T.getModifierState?T.getModifierState(_):(_=ql[_])?!!T[_]:!1}function Wu(){return ks}var bh=se({},Fi,{key:function(_){if(_.key){var T=wp[_.key]||_.key;if(T!=="Unidentified")return T}return _.type==="keypress"?(_=da(_),_===13?"Enter":String.fromCharCode(_)):_.type==="keydown"||_.type==="keyup"?Md[_.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wu,charCode:function(_){return _.type==="keypress"?da(_):0},keyCode:function(_){return _.type==="keydown"||_.type==="keyup"?_.keyCode:0},which:function(_){return _.type==="keypress"?da(_):_.type==="keydown"||_.type==="keyup"?_.keyCode:0}}),Fa=Ao(bh),ci=se({},dd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cr=Ao(ci),co=se({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wu}),za=Ao(co),Uo=se({},wu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ql=Ao(Uo),Zl=se({},dd,{deltaX:function(_){return"deltaX"in _?_.deltaX:"wheelDeltaX"in _?-_.wheelDeltaX:0},deltaY:function(_){return"deltaY"in _?_.deltaY:"wheelDeltaY"in _?-_.wheelDeltaY:"wheelDelta"in _?-_.wheelDelta:0},deltaZ:0,deltaMode:0}),Fh=Ao(Zl),Yr=[9,13,27,32],Ii=u&&"CompositionEvent"in window,xr=null;u&&"documentMode"in document&&(xr=document.documentMode);var Yi=u&&"TextEvent"in window&&!xr,fa=u&&(!Ii||xr&&8<xr&&11>=xr),xu=" ",cf=!1;function hf(_,T){switch(_){case"keyup":return Yr.indexOf(T.keyCode)!==-1;case"keydown":return T.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pd(_){return _=_.detail,typeof _=="object"&&"data"in _?_.data:null}var Vu=!1;function al(_,T){switch(_){case"compositionend":return pd(T);case"keypress":return T.which!==32?null:(cf=!0,xu);case"textInput":return _=T.data,_===xu&&cf?null:_;default:return null}}function zc(_,T){if(Vu)return _==="compositionend"||!Ii&&hf(_,T)?(_=Ci(),bi=Rs=$r=null,Vu=!1,_):null;switch(_){case"paste":return null;case"keypress":if(!(T.ctrlKey||T.altKey||T.metaKey)||T.ctrlKey&&T.altKey){if(T.char&&1<T.char.length)return T.char;if(T.which)return String.fromCharCode(T.which)}return null;case"compositionend":return fa&&T.locale!=="ko"?null:T.data;default:return null}}var zh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ju(_){var T=_&&_.nodeName&&_.nodeName.toLowerCase();return T==="input"?!!zh[_.type]:T==="textarea"}function eu(_,T,R,F){cr(F),T=Rd(T,"onChange"),0<T.length&&(R=new ol("onChange","change",null,R,F),_.push({event:R,listeners:T}))}var Hs=null,tu=null;function Uh(_){Vh(_,0)}function Uc(_){var T=mn(_);if(Ie(T))return _}function Hc(_,T){if(_==="change")return T}var is=!1;if(u){var Hr;if(u){var Ml="oninput"in document;if(!Ml){var Ua=document.createElement("div");Ua.setAttribute("oninput","return;"),Ml=typeof Ua.oninput=="function"}Hr=Ml}else Hr=!1;is=Hr&&(!document.documentMode||9<document.documentMode)}function nu(){Hs&&(Hs.detachEvent("onpropertychange",$u),tu=Hs=null)}function $u(_){if(_.propertyName==="value"&&Uc(tu)){var T=[];eu(T,tu,_,lt(_)),Te(Uh,T)}}function Th(_,T,R){_==="focusin"?(nu(),Hs=T,tu=R,Hs.attachEvent("onpropertychange",$u)):_==="focusout"&&nu()}function Ad(_){if(_==="selectionchange"||_==="keyup"||_==="keydown")return Uc(tu)}function pi(_,T){if(_==="click")return Uc(T)}function ye(_,T){if(_==="input"||_==="change")return Uc(T)}function Xe(_,T){return _===T&&(_!==0||1/_===1/T)||_!==_&&T!==T}var Pe=typeof Object.is=="function"?Object.is:Xe;function Nt(_,T){if(Pe(_,T))return!0;if(typeof _!="object"||_===null||typeof T!="object"||T===null)return!1;var R=Object.keys(_),F=Object.keys(T);if(R.length!==F.length)return!1;for(F=0;F<R.length;F++){var Y=R[F];if(!h.call(T,Y)||!Pe(_[Y],T[Y]))return!1}return!0}function sn(_){for(;_&&_.firstChild;)_=_.firstChild;return _}function Rn(_,T){var R=sn(_);_=0;for(var F;R;){if(R.nodeType===3){if(F=_+R.textContent.length,_<=T&&F>=T)return{node:R,offset:T-_};_=F}e:{for(;R;){if(R.nextSibling){R=R.nextSibling;break e}R=R.parentNode}R=void 0}R=sn(R)}}function Jn(_,T){return _&&T?_===T?!0:_&&_.nodeType===3?!1:T&&T.nodeType===3?Jn(_,T.parentNode):"contains"in _?_.contains(T):_.compareDocumentPosition?!!(_.compareDocumentPosition(T)&16):!1:!1}function _n(){for(var _=window,T=He();T instanceof _.HTMLIFrameElement;){try{var R=typeof T.contentWindow.location.href=="string"}catch{R=!1}if(R)_=T.contentWindow;else break;T=He(_.document)}return T}function Gr(_){var T=_&&_.nodeName&&_.nodeName.toLowerCase();return T&&(T==="input"&&(_.type==="text"||_.type==="search"||_.type==="tel"||_.type==="url"||_.type==="password")||T==="textarea"||_.contentEditable==="true")}function ho(_){var T=_n(),R=_.focusedElem,F=_.selectionRange;if(T!==R&&R&&R.ownerDocument&&Jn(R.ownerDocument.documentElement,R)){if(F!==null&&Gr(R)){if(T=F.start,_=F.end,_===void 0&&(_=T),"selectionStart"in R)R.selectionStart=T,R.selectionEnd=Math.min(_,R.value.length);else if(_=(T=R.ownerDocument||document)&&T.defaultView||window,_.getSelection){_=_.getSelection();var Y=R.textContent.length,ee=Math.min(F.start,Y);F=F.end===void 0?ee:Math.min(F.end,Y),!_.extend&&ee>F&&(Y=F,F=ee,ee=Y),Y=Rn(R,ee);var be=Rn(R,F);Y&&be&&(_.rangeCount!==1||_.anchorNode!==Y.node||_.anchorOffset!==Y.offset||_.focusNode!==be.node||_.focusOffset!==be.offset)&&(T=T.createRange(),T.setStart(Y.node,Y.offset),_.removeAllRanges(),ee>F?(_.addRange(T),_.extend(be.node,be.offset)):(T.setEnd(be.node,be.offset),_.addRange(T)))}}for(T=[],_=R;_=_.parentNode;)_.nodeType===1&&T.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<T.length;R++)_=T[R],_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}var Ti=u&&"documentMode"in document&&11>=document.documentMode,fo=null,ll=null,zi=null,_s=!1;function Cu(_,T,R){var F=R.window===R?R.document:R.nodeType===9?R:R.ownerDocument;_s||fo==null||fo!==He(F)||(F=fo,"selectionStart"in F&&Gr(F)?F={start:F.selectionStart,end:F.selectionEnd}:(F=(F.ownerDocument&&F.ownerDocument.defaultView||window).getSelection(),F={anchorNode:F.anchorNode,anchorOffset:F.anchorOffset,focusNode:F.focusNode,focusOffset:F.focusOffset}),zi&&Nt(zi,F)||(zi=F,F=Rd(ll,"onSelect"),0<F.length&&(T=new ol("onSelect","select",null,T,R),_.push({event:T,listeners:F}),T.target=fo)))}function qn(_,T){var R={};return R[_.toLowerCase()]=T.toLowerCase(),R["Webkit"+_]="webkit"+T,R["Moz"+_]="moz"+T,R}var pa={animationend:qn("Animation","AnimationEnd"),animationiteration:qn("Animation","AnimationIteration"),animationstart:qn("Animation","AnimationStart"),transitionend:qn("Transition","TransitionEnd")},Qs={},Gs={};u&&(Gs=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function Ha(_){if(Qs[_])return Qs[_];if(!pa[_])return _;var T=pa[_],R;for(R in T)if(T.hasOwnProperty(R)&&R in Gs)return Qs[_]=T[R];return _}var Hh=Ha("animationend"),Sh=Ha("animationiteration"),mc=Ha("animationstart"),ea=Ha("transitionend"),Gc=new Map,Gh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ga(_,T){Gc.set(_,T),o(T,[_])}for(var Wh=0;Wh<Gh.length;Wh++){var gc=Gh[Wh],Yu=gc.toLowerCase(),md=gc[0].toUpperCase()+gc.slice(1);Ga(Yu,"on"+md)}Ga(Hh,"onAnimationEnd"),Ga(Sh,"onAnimationIteration"),Ga(mc,"onAnimationStart"),Ga("dblclick","onDoubleClick"),Ga("focusin","onFocus"),Ga("focusout","onBlur"),Ga(ea,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),po=new Set("cancel close invalid load scroll toggle".split(" ").concat(ta));function Al(_,T,R){var F=_.type||"unknown-event";_.currentTarget=R,Wn(F,T,void 0,_),_.currentTarget=null}function Vh(_,T){T=(T&4)!==0;for(var R=0;R<_.length;R++){var F=_[R],Y=F.event;F=F.listeners;e:{var ee=void 0;if(T)for(var be=F.length-1;0<=be;be--){var Je=F[be],ut=Je.instance,Dt=Je.currentTarget;if(Je=Je.listener,ut!==ee&&Y.isPropagationStopped())break e;Al(Y,Je,Dt),ee=ut}else for(be=0;be<F.length;be++){if(Je=F[be],ut=Je.instance,Dt=Je.currentTarget,Je=Je.listener,ut!==ee&&Y.isPropagationStopped())break e;Al(Y,Je,Dt),ee=ut}}}if(_t)throw _=Ot,_t=!1,Ot=null,_}function Ui(_,T){var R=T[ma];R===void 0&&(R=T[ma]=new Set);var F=_+"__bubble";R.has(F)||(Wc(T,_,2,!1),R.add(F))}function gd(_,T,R){var F=0;T&&(F|=4),Wc(R,_,F,T)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function ru(_){if(!_[Xu]){_[Xu]=!0,r.forEach(function(R){R!=="selectionchange"&&(po.has(R)||gd(R,!1,_),gd(R,!0,_))});var T=_.nodeType===9?_:_.ownerDocument;T===null||T[Xu]||(T[Xu]=!0,gd("selectionchange",!1,T))}}function Wc(_,T,R,F){switch(Gu(T)){case 1:var Y=Hu;break;case 4:Y=Tu;break;default:Y=_h}R=Y.bind(null,T,R,_),Y=void 0,!ct||T!=="touchstart"&&T!=="touchmove"&&T!=="wheel"||(Y=!0),F?Y!==void 0?_.addEventListener(T,R,{capture:!0,passive:Y}):_.addEventListener(T,R,!0):Y!==void 0?_.addEventListener(T,R,{passive:Y}):_.addEventListener(T,R,!1)}function Id(_,T,R,F,Y){var ee=F;if(!(T&1)&&!(T&2)&&F!==null)e:for(;;){if(F===null)return;var be=F.tag;if(be===3||be===4){var Je=F.stateNode.containerInfo;if(Je===Y||Je.nodeType===8&&Je.parentNode===Y)break;if(be===4)for(be=F.return;be!==null;){var ut=be.tag;if((ut===3||ut===4)&&(ut=be.stateNode.containerInfo,ut===Y||ut.nodeType===8&&ut.parentNode===Y))return;be=be.return}for(;Je!==null;){if(be=ga(Je),be===null)return;if(ut=be.tag,ut===5||ut===6){F=ee=be;continue e}Je=Je.parentNode}}F=F.return}Te(function(){var Dt=ee,en=lt(R),hn=[];e:{var an=Gc.get(_);if(an!==void 0){var Dn=ol,Zn=_;switch(_){case"keypress":if(da(R)===0)break e;case"keydown":case"keyup":Dn=Fa;break;case"focusin":Zn="focus",Dn=pr;break;case"focusout":Zn="blur",Dn=pr;break;case"beforeblur":case"afterblur":Dn=pr;break;case"click":if(R.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Dn=Eu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Dn=Ba;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Dn=za;break;case Hh:case Sh:case mc:Dn=fd;break;case ea:Dn=Ql;break;case"scroll":Dn=Mi;break;case"wheel":Dn=Fh;break;case"copy":case"cut":case"paste":Dn=Fc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Dn=Cr}var sr=(T&4)!==0,Lo=!sr&&_==="scroll",At=sr?an!==null?an+"Capture":null:an;sr=[];for(var pt=Dt,$t;pt!==null;){$t=pt;var wn=$t.stateNode;if($t.tag===5&&wn!==null&&($t=wn,At!==null&&(wn=je(pt,At),wn!=null&&sr.push(Il(pt,wn,$t)))),Lo)break;pt=pt.return}0<sr.length&&(an=new Dn(an,Zn,null,R,en),hn.push({event:an,listeners:sr}))}}if(!(T&7)){e:{if(an=_==="mouseover"||_==="pointerover",Dn=_==="mouseout"||_==="pointerout",an&&R!==Pt&&(Zn=R.relatedTarget||R.fromElement)&&(ga(Zn)||Zn[Zi]))break e;if((Dn||an)&&(an=en.window===en?en:(an=en.ownerDocument)?an.defaultView||an.parentWindow:window,Dn?(Zn=R.relatedTarget||R.toElement,Dn=Dt,Zn=Zn?ga(Zn):null,Zn!==null&&(Lo=ir(Zn),Zn!==Lo||Zn.tag!==5&&Zn.tag!==6)&&(Zn=null)):(Dn=null,Zn=Dt),Dn!==Zn)){if(sr=Eu,wn="onMouseLeave",At="onMouseEnter",pt="mouse",(_==="pointerout"||_==="pointerover")&&(sr=Cr,wn="onPointerLeave",At="onPointerEnter",pt="pointer"),Lo=Dn==null?an:mn(Dn),$t=Zn==null?an:mn(Zn),an=new sr(wn,pt+"leave",Dn,R,en),an.target=Lo,an.relatedTarget=$t,wn=null,ga(en)===Dt&&(sr=new sr(At,pt+"enter",Zn,R,en),sr.target=$t,sr.relatedTarget=Lo,wn=sr),Lo=wn,Dn&&Zn)t:{for(sr=Dn,At=Zn,pt=0,$t=sr;$t;$t=jh($t))pt++;for($t=0,wn=At;wn;wn=jh(wn))$t++;for(;0<pt-$t;)sr=jh(sr),pt--;for(;0<$t-pt;)At=jh(At),$t--;for(;pt--;){if(sr===At||At!==null&&sr===At.alternate)break t;sr=jh(sr),At=jh(At)}sr=null}else sr=null;Dn!==null&&ni(hn,an,Dn,sr,!1),Zn!==null&&Lo!==null&&ni(hn,Lo,Zn,sr,!0)}}e:{if(an=Dt?mn(Dt):window,Dn=an.nodeName&&an.nodeName.toLowerCase(),Dn==="select"||Dn==="input"&&an.type==="file")var hr=Hc;else if(ju(an))if(is)hr=ye;else{hr=Ad;var rr=Th}else(Dn=an.nodeName)&&Dn.toLowerCase()==="input"&&(an.type==="checkbox"||an.type==="radio")&&(hr=pi);if(hr&&(hr=hr(_,Dt))){eu(hn,hr,R,en);break e}rr&&rr(_,an,Dt),_==="focusout"&&(rr=an._wrapperState)&&rr.controlled&&an.type==="number"&&Mt(an,"number",an.value)}switch(rr=Dt?mn(Dt):window,_){case"focusin":(ju(rr)||rr.contentEditable==="true")&&(fo=rr,ll=Dt,zi=null);break;case"focusout":zi=ll=fo=null;break;case"mousedown":_s=!0;break;case"contextmenu":case"mouseup":case"dragend":_s=!1,Cu(hn,R,en);break;case"selectionchange":if(Ti)break;case"keydown":case"keyup":Cu(hn,R,en)}var gr;if(Ii)e:{switch(_){case"compositionstart":var Fr="onCompositionStart";break e;case"compositionend":Fr="onCompositionEnd";break e;case"compositionupdate":Fr="onCompositionUpdate";break e}Fr=void 0}else Vu?hf(_,R)&&(Fr="onCompositionEnd"):_==="keydown"&&R.keyCode===229&&(Fr="onCompositionStart");Fr&&(fa&&R.locale!=="ko"&&(Vu||Fr!=="onCompositionStart"?Fr==="onCompositionEnd"&&Vu&&(gr=Ci()):($r=en,Rs="value"in $r?$r.value:$r.textContent,Vu=!0)),rr=Rd(Dt,Fr),0<rr.length&&(Fr=new Ff(Fr,_,null,R,en),hn.push({event:Fr,listeners:rr}),gr?Fr.data=gr:(gr=pd(R),gr!==null&&(Fr.data=gr)))),(gr=Yi?al(_,R):zc(_,R))&&(Dt=Rd(Dt,"onBeforeInput"),0<Dt.length&&(en=new Ff("onBeforeInput","beforeinput",null,R,en),hn.push({event:en,listeners:Dt}),en.data=gr))}Vh(hn,T)})}function Il(_,T,R){return{instance:_,listener:T,currentTarget:R}}function Rd(_,T){for(var R=T+"Capture",F=[];_!==null;){var Y=_,ee=Y.stateNode;Y.tag===5&&ee!==null&&(Y=ee,ee=je(_,R),ee!=null&&F.unshift(Il(_,ee,Y)),ee=je(_,T),ee!=null&&F.push(Il(_,ee,Y))),_=_.return}return F}function jh(_){if(_===null)return null;do _=_.return;while(_&&_.tag!==5);return _||null}function ni(_,T,R,F,Y){for(var ee=T._reactName,be=[];R!==null&&R!==F;){var Je=R,ut=Je.alternate,Dt=Je.stateNode;if(ut!==null&&ut===F)break;Je.tag===5&&Dt!==null&&(Je=Dt,Y?(ut=je(R,ee),ut!=null&&be.unshift(Il(R,ut,Je))):Y||(ut=je(R,ee),ut!=null&&be.push(Il(R,ut,Je)))),R=R.return}be.length!==0&&_.push({event:T,listeners:be})}var Ri=/\r\n?/g,Ep=/\u0000|\uFFFD/g;function zf(_){return(typeof _=="string"?_:""+_).replace(Ri,`
`).replace(Ep,"")}function Rl(_,T,R){if(T=zf(T),zf(_)!==T&&R)throw Error(t(425))}function iu(){}var Ku=null,Ju=null;function wh(_,T){return _==="textarea"||_==="noscript"||typeof T.children=="string"||typeof T.children=="number"||typeof T.dangerouslySetInnerHTML=="object"&&T.dangerouslySetInnerHTML!==null&&T.dangerouslySetInnerHTML.__html!=null}var ul=typeof setTimeout=="function"?setTimeout:void 0,na=typeof clearTimeout=="function"?clearTimeout:void 0,kl=typeof Promise=="function"?Promise:void 0,Vc=typeof queueMicrotask=="function"?queueMicrotask:typeof kl<"u"?function(_){return kl.resolve(null).then(_).catch(Ol)}:ul;function Ol(_){setTimeout(function(){throw _})}function jc(_,T){var R=T,F=0;do{var Y=R.nextSibling;if(_.removeChild(R),Y&&Y.nodeType===8)if(R=Y.data,R==="/$"){if(F===0){_.removeChild(Y),Gn(T);return}F--}else R!=="$"&&R!=="$?"&&R!=="$!"||F++;R=Y}while(R);Gn(T)}function vc(_){for(;_!=null;_=_.nextSibling){var T=_.nodeType;if(T===1||T===3)break;if(T===8){if(T=_.data,T==="$"||T==="$!"||T==="$?")break;if(T==="/$")return null}}return _}function kd(_){_=_.previousSibling;for(var T=0;_;){if(_.nodeType===8){var R=_.data;if(R==="$"||R==="$!"||R==="$?"){if(T===0)return _;T--}else R==="/$"&&T++}_=_.previousSibling}return null}var Wa=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Wa,cl="__reactProps$"+Wa,Zi="__reactContainer$"+Wa,ma="__reactEvents$"+Wa,X="__reactListeners$"+Wa,xs="__reactHandles$"+Wa;function ga(_){var T=_[Xr];if(T)return T;for(var R=_.parentNode;R;){if(T=R[Zi]||R[Xr]){if(R=T.alternate,T.child!==null||R!==null&&R.child!==null)for(_=kd(_);_!==null;){if(R=_[Xr])return R;_=kd(_)}return T}_=R,R=_.parentNode}return null}function Ir(_){return _=_[Xr]||_[Zi],!_||_.tag!==5&&_.tag!==6&&_.tag!==13&&_.tag!==3?null:_}function mn(_){if(_.tag===5||_.tag===6)return _.stateNode;throw Error(t(33))}function Uf(_){return _[cl]||null}var hl=[],ki=-1;function hi(_){return{current:_}}function es(_){0>ki||(_.current=hl[ki],hl[ki]=null,ki--)}function ss(_,T){ki++,hl[ki]=_.current,_.current=T}var Yc={},va=hi(Yc),_a=hi(!1),os=Yc;function Xc(_,T){var R=_.type.contextTypes;if(!R)return Yc;var F=_.stateNode;if(F&&F.__reactInternalMemoizedUnmaskedChildContext===T)return F.__reactInternalMemoizedMaskedChildContext;var Y={},ee;for(ee in R)Y[ee]=T[ee];return F&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=T,_.__reactInternalMemoizedMaskedChildContext=Y),Y}function ra(_){return _=_.childContextTypes,_!=null}function Od(){es(_a),es(va)}function Ld(_,T,R){if(va.current!==Yc)throw Error(t(168));ss(va,T),ss(_a,R)}function Yh(_,T,R){var F=_.stateNode;if(T=T.childContextTypes,typeof F.getChildContext!="function")return R;F=F.getChildContext();for(var Y in F)if(!(Y in T))throw Error(t(108,Ze(_)||"Unknown",Y));return se({},R,F)}function Ws(_){return _=(_=_.stateNode)&&_.__reactInternalMemoizedMergedChildContext||Yc,os=va.current,ss(va,_),ss(_a,_a.current),!0}function Kn(_,T,R){var F=_.stateNode;if(!F)throw Error(t(169));R?(_=Yh(_,T,os),F.__reactInternalMemoizedMergedChildContext=_,es(_a),es(va),ss(va,_)):es(_a),ss(_a,R)}var Vs=null,Zs=!1,Hi=!1;function su(_){Vs===null?Vs=[_]:Vs.push(_)}function Ho(_){Zs=!0,su(_)}function $n(){if(!Hi&&Vs!==null){Hi=!0;var _=0,T=Tr;try{var R=Vs;for(Tr=1;_<R.length;_++){var F=R[_];do F=F(!0);while(F!==null)}Vs=null,Zs=!1}catch(Y){throw Vs!==null&&(Vs=Vs.slice(_+1)),Ss(tl,$n),Y}finally{Tr=T,Hi=!1}}return null}var mi=[],gi=0,Hf=null,Eh=0,mo=[],ya=0,Mn=null,yn=1,dl="";function _c(_,T){mi[gi++]=Eh,mi[gi++]=Hf,Hf=_,Eh=T}function xp(_,T,R){mo[ya++]=yn,mo[ya++]=dl,mo[ya++]=Mn,Mn=_;var F=yn;_=dl;var Y=32-jr(F)-1;F&=~(1<<Y),R+=1;var ee=32-jr(T)+Y;if(30<ee){var be=Y-Y%5;ee=(F&(1<<be)-1).toString(32),F>>=be,Y-=be,yn=1<<32-jr(T)+Y|R<<Y|F,dl=ee+_}else yn=1<<ee|R<<Y|F,dl=_}function ou(_){_.return!==null&&(_c(_,1),xp(_,1,0))}function Io(_){for(;_===Hf;)Hf=mi[--gi],mi[gi]=null,Eh=mi[--gi],mi[gi]=null;for(;_===Mn;)Mn=mo[--ya],mo[ya]=null,dl=mo[--ya],mo[ya]=null,yn=mo[--ya],mo[ya]=null}var ys=null,fl=null,as=!1,pl=null;function Go(_,T){var R=Lu(5,null,null,0);R.elementType="DELETED",R.stateNode=T,R.return=_,T=_.deletions,T===null?(_.deletions=[R],_.flags|=16):T.push(R)}function Xh(_,T){switch(_.tag){case 5:var R=_.type;return T=T.nodeType!==1||R.toLowerCase()!==T.nodeName.toLowerCase()?null:T,T!==null?(_.stateNode=T,ys=_,fl=vc(T.firstChild),!0):!1;case 6:return T=_.pendingProps===""||T.nodeType!==3?null:T,T!==null?(_.stateNode=T,ys=_,fl=null,!0):!1;case 13:return T=T.nodeType!==8?null:T,T!==null?(R=Mn!==null?{id:yn,overflow:dl}:null,_.memoizedState={dehydrated:T,treeContext:R,retryLane:1073741824},R=Lu(18,null,null,0),R.stateNode=T,R.return=_,_.child=R,ys=_,fl=null,!0):!1;default:return!1}}function Va(_){return(_.mode&1)!==0&&(_.flags&128)===0}function Oi(_){if(as){var T=fl;if(T){var R=T;if(!Xh(_,T)){if(Va(_))throw Error(t(418));T=vc(R.nextSibling);var F=ys;T&&Xh(_,T)?Go(F,R):(_.flags=_.flags&-4097|2,as=!1,ys=_)}}else{if(Va(_))throw Error(t(418));_.flags=_.flags&-4097|2,as=!1,ys=_}}}function Nd(_){for(_=_.return;_!==null&&_.tag!==5&&_.tag!==3&&_.tag!==13;)_=_.return;ys=_}function Kc(_){if(_!==ys)return!1;if(!as)return Nd(_),as=!0,!1;var T;if((T=_.tag!==3)&&!(T=_.tag!==5)&&(T=_.type,T=T!=="head"&&T!=="body"&&!wh(_.type,_.memoizedProps)),T&&(T=fl)){if(Va(_))throw Kh(),Error(t(418));for(;T;)Go(_,T),T=vc(T.nextSibling)}if(Nd(_),_.tag===13){if(_=_.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));e:{for(_=_.nextSibling,T=0;_;){if(_.nodeType===8){var R=_.data;if(R==="/$"){if(T===0){fl=vc(_.nextSibling);break e}T--}else R!=="$"&&R!=="$!"&&R!=="$?"||T++}_=_.nextSibling}fl=null}}else fl=ys?vc(_.stateNode.nextSibling):null;return!0}function Kh(){for(var _=fl;_;)_=vc(_.nextSibling)}function Wo(){fl=ys=null,as=!1}function Ro(_){pl===null?pl=[_]:pl.push(_)}var df=D.ReactCurrentBatchConfig;function Mu(_,T){if(_&&_.defaultProps){T=se({},T),_=_.defaultProps;for(var R in _)T[R]===void 0&&(T[R]=_[R]);return T}return T}var Ll=hi(null),vd=null,yc=null,qr=null;function au(){qr=yc=vd=null}function qu(_){var T=Ll.current;es(Ll),_._currentValue=T}function ls(_,T,R){for(;_!==null;){var F=_.alternate;if((_.childLanes&T)!==T?(_.childLanes|=T,F!==null&&(F.childLanes|=T)):F!==null&&(F.childLanes&T)!==T&&(F.childLanes|=T),_===R)break;_=_.return}}function ja(_,T){vd=_,qr=yc=null,_=_.dependencies,_!==null&&_.firstContext!==null&&(_.lanes&T&&(gn=!0),_.firstContext=null)}function $s(_){var T=_._currentValue;if(qr!==_)if(_={context:_,memoizedValue:T,next:null},yc===null){if(vd===null)throw Error(t(308));yc=_,vd.dependencies={lanes:0,firstContext:_}}else yc=yc.next=_;return T}var Cs=null;function Jc(_){Cs===null?Cs=[_]:Cs.push(_)}function vi(_,T,R,F){var Y=T.interleaved;return Y===null?(R.next=R,Jc(T)):(R.next=Y.next,Y.next=R),T.interleaved=R,Ya(_,F)}function Ya(_,T){_.lanes|=T;var R=_.alternate;for(R!==null&&(R.lanes|=T),R=_,_=_.return;_!==null;)_.childLanes|=T,R=_.alternate,R!==null&&(R.childLanes|=T),R=_,_=_.return;return R.tag===3?R.stateNode:null}var bc=!1;function ff(_){_.updateQueue={baseState:_.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xh(_,T){_=_.updateQueue,T.updateQueue===_&&(T.updateQueue={baseState:_.baseState,firstBaseUpdate:_.firstBaseUpdate,lastBaseUpdate:_.lastBaseUpdate,shared:_.shared,effects:_.effects})}function ia(_,T){return{eventTime:_,lane:T,tag:0,payload:null,callback:null,next:null}}function Xi(_,T,R){var F=_.updateQueue;if(F===null)return null;if(F=F.shared,(ns&2)!==0){var Y=F.pending;return Y===null?T.next=T:(T.next=Y.next,Y.next=T),F.pending=T,Ya(_,R)}return Y=F.interleaved,Y===null?(T.next=T,Jc(F)):(T.next=Y.next,Y.next=T),F.interleaved=T,Ya(_,R)}function Pn(_,T,R){if(T=T.updateQueue,T!==null&&(T=T.shared,(R&4194240)!==0)){var F=T.lanes;F&=_.pendingLanes,R|=F,T.lanes=R,Qo(_,R)}}function nr(_,T){var R=_.updateQueue,F=_.alternate;if(F!==null&&(F=F.updateQueue,R===F)){var Y=null,ee=null;if(R=R.firstBaseUpdate,R!==null){do{var be={eventTime:R.eventTime,lane:R.lane,tag:R.tag,payload:R.payload,callback:R.callback,next:null};ee===null?Y=ee=be:ee=ee.next=be,R=R.next}while(R!==null);ee===null?Y=ee=T:ee=ee.next=T}else Y=ee=T;R={baseState:F.baseState,firstBaseUpdate:Y,lastBaseUpdate:ee,shared:F.shared,effects:F.effects},_.updateQueue=R;return}_=R.lastBaseUpdate,_===null?R.firstBaseUpdate=T:_.next=T,R.lastBaseUpdate=T}function zr(_,T,R,F){var Y=_.updateQueue;bc=!1;var ee=Y.firstBaseUpdate,be=Y.lastBaseUpdate,Je=Y.shared.pending;if(Je!==null){Y.shared.pending=null;var ut=Je,Dt=ut.next;ut.next=null,be===null?ee=Dt:be.next=Dt,be=ut;var en=_.alternate;en!==null&&(en=en.updateQueue,Je=en.lastBaseUpdate,Je!==be&&(Je===null?en.firstBaseUpdate=Dt:Je.next=Dt,en.lastBaseUpdate=ut))}if(ee!==null){var hn=Y.baseState;be=0,en=Dt=ut=null,Je=ee;do{var an=Je.lane,Dn=Je.eventTime;if((F&an)===an){en!==null&&(en=en.next={eventTime:Dn,lane:0,tag:Je.tag,payload:Je.payload,callback:Je.callback,next:null});e:{var Zn=_,sr=Je;switch(an=T,Dn=R,sr.tag){case 1:if(Zn=sr.payload,typeof Zn=="function"){hn=Zn.call(Dn,hn,an);break e}hn=Zn;break e;case 3:Zn.flags=Zn.flags&-65537|128;case 0:if(Zn=sr.payload,an=typeof Zn=="function"?Zn.call(Dn,hn,an):Zn,an==null)break e;hn=se({},hn,an);break e;case 2:bc=!0}}Je.callback!==null&&Je.lane!==0&&(_.flags|=64,an=Y.effects,an===null?Y.effects=[Je]:an.push(Je))}else Dn={eventTime:Dn,lane:an,tag:Je.tag,payload:Je.payload,callback:Je.callback,next:null},en===null?(Dt=en=Dn,ut=hn):en=en.next=Dn,be|=an;if(Je=Je.next,Je===null){if(Je=Y.shared.pending,Je===null)break;an=Je,Je=an.next,an.next=null,Y.lastBaseUpdate=an,Y.shared.pending=null}}while(!0);if(en===null&&(ut=hn),Y.baseState=ut,Y.firstBaseUpdate=Dt,Y.lastBaseUpdate=en,T=Y.shared.interleaved,T!==null){Y=T;do be|=Y.lane,Y=Y.next;while(Y!==T)}else ee===null&&(Y.shared.lanes=0);Ud|=be,_.lanes=be,_.memoizedState=hn}}function ri(_,T,R){if(_=T.effects,T.effects=null,_!==null)for(T=0;T<_.length;T++){var F=_[T],Y=F.callback;if(Y!==null){if(F.callback=null,F=R,typeof Y!="function")throw Error(t(191,Y));Y.call(F)}}}var Zr=new n.Component().refs;function ko(_,T,R,F){T=_.memoizedState,R=R(F,T),R=R==null?T:se({},T,R),_.memoizedState=R,_.lanes===0&&(_.updateQueue.baseState=R)}var us={isMounted:function(_){return(_=_._reactInternals)?ir(_)===_:!1},enqueueSetState:function(_,T,R){_=_._reactInternals;var F=Cc(),Y=Wd(_),ee=ia(F,Y);ee.payload=T,R!=null&&(ee.callback=R),T=Xi(_,ee,Y),T!==null&&(oa(T,_,Y,F),Pn(T,_,Y))},enqueueReplaceState:function(_,T,R){_=_._reactInternals;var F=Cc(),Y=Wd(_),ee=ia(F,Y);ee.tag=1,ee.payload=T,R!=null&&(ee.callback=R),T=Xi(_,ee,Y),T!==null&&(oa(T,_,Y,F),Pn(T,_,Y))},enqueueForceUpdate:function(_,T){_=_._reactInternals;var R=Cc(),F=Wd(_),Y=ia(R,F);Y.tag=2,T!=null&&(Y.callback=T),T=Xi(_,Y,F),T!==null&&(oa(T,_,F,R),Pn(T,_,F))}};function ts(_,T,R,F,Y,ee,be){return _=_.stateNode,typeof _.shouldComponentUpdate=="function"?_.shouldComponentUpdate(F,ee,be):T.prototype&&T.prototype.isPureReactComponent?!Nt(R,F)||!Nt(Y,ee):!0}function lu(_,T,R){var F=!1,Y=Yc,ee=T.contextType;return typeof ee=="object"&&ee!==null?ee=$s(ee):(Y=ra(T)?os:va.current,F=T.contextTypes,ee=(F=F!=null)?Xc(_,Y):Yc),T=new T(R,ee),_.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=us,_.stateNode=T,T._reactInternals=_,F&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=Y,_.__reactInternalMemoizedMaskedChildContext=ee),T}function Qu(_,T,R,F){_=T.state,typeof T.componentWillReceiveProps=="function"&&T.componentWillReceiveProps(R,F),typeof T.UNSAFE_componentWillReceiveProps=="function"&&T.UNSAFE_componentWillReceiveProps(R,F),T.state!==_&&us.enqueueReplaceState(T,T.state,null)}function Tc(_,T,R,F){var Y=_.stateNode;Y.props=R,Y.state=_.memoizedState,Y.refs=Zr,ff(_);var ee=T.contextType;typeof ee=="object"&&ee!==null?Y.context=$s(ee):(ee=ra(T)?os:va.current,Y.context=Xc(_,ee)),Y.state=_.memoizedState,ee=T.getDerivedStateFromProps,typeof ee=="function"&&(ko(_,T,ee,R),Y.state=_.memoizedState),typeof T.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(T=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),T!==Y.state&&us.enqueueReplaceState(Y,Y.state,null),zr(_,R,Y,F),Y.state=_.memoizedState),typeof Y.componentDidMount=="function"&&(_.flags|=4194308)}function Zu(_,T,R){if(_=R.ref,_!==null&&typeof _!="function"&&typeof _!="object"){if(R._owner){if(R=R._owner,R){if(R.tag!==1)throw Error(t(309));var F=R.stateNode}if(!F)throw Error(t(147,_));var Y=F,ee=""+_;return T!==null&&T.ref!==null&&typeof T.ref=="function"&&T.ref._stringRef===ee?T.ref:(T=function(be){var Je=Y.refs;Je===Zr&&(Je=Y.refs={}),be===null?delete Je[ee]:Je[ee]=be},T._stringRef=ee,T)}if(typeof _!="string")throw Error(t(284));if(!R._owner)throw Error(t(290,_))}return _}function eo(_,T){throw _=Object.prototype.toString.call(T),Error(t(31,_==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":_))}function go(_){var T=_._init;return T(_._payload)}function _d(_){function T(At,pt){if(_){var $t=At.deletions;$t===null?(At.deletions=[pt],At.flags|=16):$t.push(pt)}}function R(At,pt){if(!_)return null;for(;pt!==null;)T(At,pt),pt=pt.sibling;return null}function F(At,pt){for(At=new Map;pt!==null;)pt.key!==null?At.set(pt.key,pt):At.set(pt.index,pt),pt=pt.sibling;return At}function Y(At,pt){return At=ed(At,pt),At.index=0,At.sibling=null,At}function ee(At,pt,$t){return At.index=$t,_?($t=At.alternate,$t!==null?($t=$t.index,$t<pt?(At.flags|=2,pt):$t):(At.flags|=2,pt)):(At.flags|=1048576,pt)}function be(At){return _&&At.alternate===null&&(At.flags|=2),At}function Je(At,pt,$t,wn){return pt===null||pt.tag!==6?(pt=Lp($t,At.mode,wn),pt.return=At,pt):(pt=Y(pt,$t),pt.return=At,pt)}function ut(At,pt,$t,wn){var hr=$t.type;return hr===V?en(At,pt,$t.props.children,wn,$t.key):pt!==null&&(pt.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===ge&&go(hr)===pt.type)?(wn=Y(pt,$t.props),wn.ref=Zu(At,pt,$t),wn.return=At,wn):(wn=dm($t.type,$t.key,$t.props,null,At.mode,wn),wn.ref=Zu(At,pt,$t),wn.return=At,wn)}function Dt(At,pt,$t,wn){return pt===null||pt.tag!==4||pt.stateNode.containerInfo!==$t.containerInfo||pt.stateNode.implementation!==$t.implementation?(pt=bd($t,At.mode,wn),pt.return=At,pt):(pt=Y(pt,$t.children||[]),pt.return=At,pt)}function en(At,pt,$t,wn,hr){return pt===null||pt.tag!==7?(pt=Xf($t,At.mode,wn,hr),pt.return=At,pt):(pt=Y(pt,$t),pt.return=At,pt)}function hn(At,pt,$t){if(typeof pt=="string"&&pt!==""||typeof pt=="number")return pt=Lp(""+pt,At.mode,$t),pt.return=At,pt;if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case U:return $t=dm(pt.type,pt.key,pt.props,null,At.mode,$t),$t.ref=Zu(At,null,pt),$t.return=At,$t;case H:return pt=bd(pt,At.mode,$t),pt.return=At,pt;case ge:var wn=pt._init;return hn(At,wn(pt._payload),$t)}if(Ct(pt)||ie(pt))return pt=Xf(pt,At.mode,$t,null),pt.return=At,pt;eo(At,pt)}return null}function an(At,pt,$t,wn){var hr=pt!==null?pt.key:null;if(typeof $t=="string"&&$t!==""||typeof $t=="number")return hr!==null?null:Je(At,pt,""+$t,wn);if(typeof $t=="object"&&$t!==null){switch($t.$$typeof){case U:return $t.key===hr?ut(At,pt,$t,wn):null;case H:return $t.key===hr?Dt(At,pt,$t,wn):null;case ge:return hr=$t._init,an(At,pt,hr($t._payload),wn)}if(Ct($t)||ie($t))return hr!==null?null:en(At,pt,$t,wn,null);eo(At,$t)}return null}function Dn(At,pt,$t,wn,hr){if(typeof wn=="string"&&wn!==""||typeof wn=="number")return At=At.get($t)||null,Je(pt,At,""+wn,hr);if(typeof wn=="object"&&wn!==null){switch(wn.$$typeof){case U:return At=At.get(wn.key===null?$t:wn.key)||null,ut(pt,At,wn,hr);case H:return At=At.get(wn.key===null?$t:wn.key)||null,Dt(pt,At,wn,hr);case ge:var rr=wn._init;return Dn(At,pt,$t,rr(wn._payload),hr)}if(Ct(wn)||ie(wn))return At=At.get($t)||null,en(pt,At,wn,hr,null);eo(pt,wn)}return null}function Zn(At,pt,$t,wn){for(var hr=null,rr=null,gr=pt,Fr=pt=0,Hl=null;gr!==null&&Fr<$t.length;Fr++){gr.index>Fr?(Hl=gr,gr=null):Hl=gr.sibling;var ds=an(At,gr,$t[Fr],wn);if(ds===null){gr===null&&(gr=Hl);break}_&&gr&&ds.alternate===null&&T(At,gr),pt=ee(ds,pt,Fr),rr===null?hr=ds:rr.sibling=ds,rr=ds,gr=Hl}if(Fr===$t.length)return R(At,gr),as&&_c(At,Fr),hr;if(gr===null){for(;Fr<$t.length;Fr++)gr=hn(At,$t[Fr],wn),gr!==null&&(pt=ee(gr,pt,Fr),rr===null?hr=gr:rr.sibling=gr,rr=gr);return as&&_c(At,Fr),hr}for(gr=F(At,gr);Fr<$t.length;Fr++)Hl=Dn(gr,At,Fr,$t[Fr],wn),Hl!==null&&(_&&Hl.alternate!==null&&gr.delete(Hl.key===null?Fr:Hl.key),pt=ee(Hl,pt,Fr),rr===null?hr=Hl:rr.sibling=Hl,rr=Hl);return _&&gr.forEach(function(Zf){return T(At,Zf)}),as&&_c(At,Fr),hr}function sr(At,pt,$t,wn){var hr=ie($t);if(typeof hr!="function")throw Error(t(150));if($t=hr.call($t),$t==null)throw Error(t(151));for(var rr=hr=null,gr=pt,Fr=pt=0,Hl=null,ds=$t.next();gr!==null&&!ds.done;Fr++,ds=$t.next()){gr.index>Fr?(Hl=gr,gr=null):Hl=gr.sibling;var Zf=an(At,gr,ds.value,wn);if(Zf===null){gr===null&&(gr=Hl);break}_&&gr&&Zf.alternate===null&&T(At,gr),pt=ee(Zf,pt,Fr),rr===null?hr=Zf:rr.sibling=Zf,rr=Zf,gr=Hl}if(ds.done)return R(At,gr),as&&_c(At,Fr),hr;if(gr===null){for(;!ds.done;Fr++,ds=$t.next())ds=hn(At,ds.value,wn),ds!==null&&(pt=ee(ds,pt,Fr),rr===null?hr=ds:rr.sibling=ds,rr=ds);return as&&_c(At,Fr),hr}for(gr=F(At,gr);!ds.done;Fr++,ds=$t.next())ds=Dn(gr,At,Fr,ds.value,wn),ds!==null&&(_&&ds.alternate!==null&&gr.delete(ds.key===null?Fr:ds.key),pt=ee(ds,pt,Fr),rr===null?hr=ds:rr.sibling=ds,rr=ds);return _&&gr.forEach(function(M0){return T(At,M0)}),as&&_c(At,Fr),hr}function Lo(At,pt,$t,wn){if(typeof $t=="object"&&$t!==null&&$t.type===V&&$t.key===null&&($t=$t.props.children),typeof $t=="object"&&$t!==null){switch($t.$$typeof){case U:e:{for(var hr=$t.key,rr=pt;rr!==null;){if(rr.key===hr){if(hr=$t.type,hr===V){if(rr.tag===7){R(At,rr.sibling),pt=Y(rr,$t.props.children),pt.return=At,At=pt;break e}}else if(rr.elementType===hr||typeof hr=="object"&&hr!==null&&hr.$$typeof===ge&&go(hr)===rr.type){R(At,rr.sibling),pt=Y(rr,$t.props),pt.ref=Zu(At,rr,$t),pt.return=At,At=pt;break e}R(At,rr);break}else T(At,rr);rr=rr.sibling}$t.type===V?(pt=Xf($t.props.children,At.mode,wn,$t.key),pt.return=At,At=pt):(wn=dm($t.type,$t.key,$t.props,null,At.mode,wn),wn.ref=Zu(At,pt,$t),wn.return=At,At=wn)}return be(At);case H:e:{for(rr=$t.key;pt!==null;){if(pt.key===rr)if(pt.tag===4&&pt.stateNode.containerInfo===$t.containerInfo&&pt.stateNode.implementation===$t.implementation){R(At,pt.sibling),pt=Y(pt,$t.children||[]),pt.return=At,At=pt;break e}else{R(At,pt);break}else T(At,pt);pt=pt.sibling}pt=bd($t,At.mode,wn),pt.return=At,At=pt}return be(At);case ge:return rr=$t._init,Lo(At,pt,rr($t._payload),wn)}if(Ct($t))return Zn(At,pt,$t,wn);if(ie($t))return sr(At,pt,$t,wn);eo(At,$t)}return typeof $t=="string"&&$t!==""||typeof $t=="number"?($t=""+$t,pt!==null&&pt.tag===6?(R(At,pt.sibling),pt=Y(pt,$t),pt.return=At,At=pt):(R(At,pt),pt=Lp($t,At.mode,wn),pt.return=At,At=pt),be(At)):R(At,pt)}return Lo}var ba=_d(!0),Au=_d(!1),Iu={},vo=hi(Iu),_o=hi(Iu),Nl=hi(Iu);function Vo(_){if(_===Iu)throw Error(t(174));return _}function ec(_,T){switch(ss(Nl,T),ss(_o,_),ss(vo,Iu),_=T.nodeType,_){case 9:case 11:T=(T=T.documentElement)?T.namespaceURI:wt(null,"");break;default:_=_===8?T.parentNode:T,T=_.namespaceURI||null,_=_.tagName,T=wt(T,_)}es(vo),ss(vo,T)}function tc(){es(vo),es(_o),es(Nl)}function $h(_){Vo(Nl.current);var T=Vo(vo.current),R=wt(T,_.type);T!==R&&(ss(_o,_),ss(vo,R))}function Ch(_){_o.current===_&&(es(vo),es(_o))}var Br=hi(0);function bs(_){for(var T=_;T!==null;){if(T.tag===13){var R=T.memoizedState;if(R!==null&&(R=R.dehydrated,R===null||R.data==="$?"||R.data==="$!"))return T}else if(T.tag===19&&T.memoizedProps.revealOrder!==void 0){if(T.flags&128)return T}else if(T.child!==null){T.child.return=T,T=T.child;continue}if(T===_)break;for(;T.sibling===null;){if(T.return===null||T.return===_)return null;T=T.return}T.sibling.return=T.return,T=T.sibling}return null}var Os=[];function Xa(){for(var _=0;_<Os.length;_++)Os[_]._workInProgressVersionPrimary=null;Os.length=0}var js=D.ReactCurrentDispatcher,fn=D.ReactCurrentBatchConfig,qc=0,En=null,_i=null,Ms=null,uu=!1,Dl=!1,Ut=0,ml=0;function Kr(){throw Error(t(321))}function nc(_,T){if(T===null)return!1;for(var R=0;R<T.length&&R<_.length;R++)if(!Pe(_[R],T[R]))return!1;return!0}function Jh(_,T,R,F,Y,ee){if(qc=ee,En=T,T.memoizedState=null,T.updateQueue=null,T.lanes=0,js.current=_===null||_.memoizedState===null?v:$,_=R(F,Y),Dl){ee=0;do{if(Dl=!1,Ut=0,25<=ee)throw Error(t(301));ee+=1,Ms=_i=null,T.updateQueue=null,js.current=I,_=R(F,Y)}while(Dl)}if(js.current=d,T=_i!==null&&_i.next!==null,qc=0,Ms=_i=En=null,uu=!1,T)throw Error(t(300));return _}function Qc(){var _=Ut!==0;return Ut=0,_}function ai(){var _={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ms===null?En.memoizedState=Ms=_:Ms=Ms.next=_,Ms}function Ki(){if(_i===null){var _=En.alternate;_=_!==null?_.memoizedState:null}else _=_i.next;var T=Ms===null?En.memoizedState:Ms.next;if(T!==null)Ms=T,_i=_;else{if(_===null)throw Error(t(310));_i=_,_={memoizedState:_i.memoizedState,baseState:_i.baseState,baseQueue:_i.baseQueue,queue:_i.queue,next:null},Ms===null?En.memoizedState=Ms=_:Ms=Ms.next=_}return Ms}function Zc(_,T){return typeof T=="function"?T(_):T}function yo(_){var T=Ki(),R=T.queue;if(R===null)throw Error(t(311));R.lastRenderedReducer=_;var F=_i,Y=F.baseQueue,ee=R.pending;if(ee!==null){if(Y!==null){var be=Y.next;Y.next=ee.next,ee.next=be}F.baseQueue=Y=ee,R.pending=null}if(Y!==null){ee=Y.next,F=F.baseState;var Je=be=null,ut=null,Dt=ee;do{var en=Dt.lane;if((qc&en)===en)ut!==null&&(ut=ut.next={lane:0,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null}),F=Dt.hasEagerState?Dt.eagerState:_(F,Dt.action);else{var hn={lane:en,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null};ut===null?(Je=ut=hn,be=F):ut=ut.next=hn,En.lanes|=en,Ud|=en}Dt=Dt.next}while(Dt!==null&&Dt!==ee);ut===null?be=F:ut.next=Je,Pe(F,T.memoizedState)||(gn=!0),T.memoizedState=F,T.baseState=be,T.baseQueue=ut,R.lastRenderedState=F}if(_=R.interleaved,_!==null){Y=_;do ee=Y.lane,En.lanes|=ee,Ud|=ee,Y=Y.next;while(Y!==_)}else Y===null&&(R.lanes=0);return[T.memoizedState,R.dispatch]}function gl(_){var T=Ki(),R=T.queue;if(R===null)throw Error(t(311));R.lastRenderedReducer=_;var F=R.dispatch,Y=R.pending,ee=T.memoizedState;if(Y!==null){R.pending=null;var be=Y=Y.next;do ee=_(ee,be.action),be=be.next;while(be!==Y);Pe(ee,T.memoizedState)||(gn=!0),T.memoizedState=ee,T.baseQueue===null&&(T.baseState=ee),R.lastRenderedState=ee}return[ee,F]}function eh(){}function Sc(_,T){var R=En,F=Ki(),Y=T(),ee=!Pe(F.memoizedState,Y);if(ee&&(F.memoizedState=Y,gn=!0),F=F.queue,ic(to.bind(null,R,F,_),[_]),F.getSnapshot!==T||ee||Ms!==null&&Ms.memoizedState.tag&1){if(R.flags|=2048,Ru(9,Oo.bind(null,R,F,Y,T),void 0,null),du===null)throw Error(t(349));qc&30||rc(R,T,Y)}return Y}function rc(_,T,R){_.flags|=16384,_={getSnapshot:T,value:R},T=En.updateQueue,T===null?(T={lastEffect:null,stores:null},En.updateQueue=T,T.stores=[_]):(R=T.stores,R===null?T.stores=[_]:R.push(_))}function Oo(_,T,R,F){T.value=R,T.getSnapshot=F,sa(T)&&Mh(_)}function to(_,T,R){return R(function(){sa(T)&&Mh(_)})}function sa(_){var T=_.getSnapshot;_=_.value;try{var R=T();return!Pe(_,R)}catch{return!0}}function Mh(_){var T=Ya(_,1);T!==null&&oa(T,_,1,-1)}function bo(_){var T=ai();return typeof _=="function"&&(_=_()),T.memoizedState=T.baseState=_,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zc,lastRenderedState:_},T.queue=_,_=_.dispatch=Qh.bind(null,En,_),[T.memoizedState,_]}function Ru(_,T,R,F){return _={tag:_,create:T,destroy:R,deps:F,next:null},T=En.updateQueue,T===null?(T={lastEffect:null,stores:null},En.updateQueue=T,T.lastEffect=_.next=_):(R=T.lastEffect,R===null?T.lastEffect=_.next=_:(F=R.next,R.next=_,_.next=F,T.lastEffect=_)),_}function th(){return Ki().memoizedState}function wc(_,T,R,F){var Y=ai();En.flags|=_,Y.memoizedState=Ru(1|T,R,void 0,F===void 0?null:F)}function jo(_,T,R,F){var Y=Ki();F=F===void 0?null:F;var ee=void 0;if(_i!==null){var be=_i.memoizedState;if(ee=be.destroy,F!==null&&nc(F,be.deps)){Y.memoizedState=Ru(T,R,ee,F);return}}En.flags|=_,Y.memoizedState=Ru(1|T,R,ee,F)}function To(_,T){return wc(8390656,8,_,T)}function ic(_,T){return jo(2048,8,_,T)}function Pl(_,T){return jo(4,2,_,T)}function So(_,T){return jo(4,4,_,T)}function Bl(_,T){if(typeof T=="function")return _=_(),T(_),function(){T(null)};if(T!=null)return _=_(),T.current=_,function(){T.current=null}}function Ka(_,T,R){return R=R!=null?R.concat([_]):null,jo(4,4,Bl.bind(null,T,_),R)}function cu(){}function ii(_,T){var R=Ki();T=T===void 0?null:T;var F=R.memoizedState;return F!==null&&T!==null&&nc(T,F[1])?F[0]:(R.memoizedState=[_,T],_)}function cs(_,T){var R=Ki();T=T===void 0?null:T;var F=R.memoizedState;return F!==null&&T!==null&&nc(T,F[1])?F[0]:(_=_(),R.memoizedState=[_,T],_)}function qh(_,T,R){return qc&21?(Pe(R,T)||(R=qo(),En.lanes|=R,Ud|=R,_.baseState=!0),T):(_.baseState&&(_.baseState=!1,gn=!0),_.memoizedState=R)}function yd(_,T){var R=Tr;Tr=R!==0&&4>R?R:4,_(!0);var F=fn.transition;fn.transition={};try{_(!1),T()}finally{Tr=R,fn.transition=F}}function Ta(){return Ki().memoizedState}function Sa(_,T,R){var F=Wd(_);if(R={lane:F,action:R,hasEagerState:!1,eagerState:null,next:null},Ec(_))Gf(T,R);else if(R=vi(_,T,R,F),R!==null){var Y=Cc();oa(R,_,F,Y),x(R,T,F)}}function Qh(_,T,R){var F=Wd(_),Y={lane:F,action:R,hasEagerState:!1,eagerState:null,next:null};if(Ec(_))Gf(T,Y);else{var ee=_.alternate;if(_.lanes===0&&(ee===null||ee.lanes===0)&&(ee=T.lastRenderedReducer,ee!==null))try{var be=T.lastRenderedState,Je=ee(be,R);if(Y.hasEagerState=!0,Y.eagerState=Je,Pe(Je,be)){var ut=T.interleaved;ut===null?(Y.next=Y,Jc(T)):(Y.next=ut.next,ut.next=Y),T.interleaved=Y;return}}catch{}finally{}R=vi(_,T,Y,F),R!==null&&(Y=Cc(),oa(R,_,F,Y),x(R,T,F))}}function Ec(_){var T=_.alternate;return _===En||T!==null&&T===En}function Gf(_,T){Dl=uu=!0;var R=_.pending;R===null?T.next=T:(T.next=R.next,R.next=T),_.pending=T}function x(_,T,R){if(R&4194240){var F=T.lanes;F&=_.pendingLanes,R|=F,T.lanes=R,Qo(_,R)}}var d={readContext:$s,useCallback:Kr,useContext:Kr,useEffect:Kr,useImperativeHandle:Kr,useInsertionEffect:Kr,useLayoutEffect:Kr,useMemo:Kr,useReducer:Kr,useRef:Kr,useState:Kr,useDebugValue:Kr,useDeferredValue:Kr,useTransition:Kr,useMutableSource:Kr,useSyncExternalStore:Kr,useId:Kr,unstable_isNewReconciler:!1},v={readContext:$s,useCallback:function(_,T){return ai().memoizedState=[_,T===void 0?null:T],_},useContext:$s,useEffect:To,useImperativeHandle:function(_,T,R){return R=R!=null?R.concat([_]):null,wc(4194308,4,Bl.bind(null,T,_),R)},useLayoutEffect:function(_,T){return wc(4194308,4,_,T)},useInsertionEffect:function(_,T){return wc(4,2,_,T)},useMemo:function(_,T){var R=ai();return T=T===void 0?null:T,_=_(),R.memoizedState=[_,T],_},useReducer:function(_,T,R){var F=ai();return T=R!==void 0?R(T):T,F.memoizedState=F.baseState=T,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_,lastRenderedState:T},F.queue=_,_=_.dispatch=Sa.bind(null,En,_),[F.memoizedState,_]},useRef:function(_){var T=ai();return _={current:_},T.memoizedState=_},useState:bo,useDebugValue:cu,useDeferredValue:function(_){return ai().memoizedState=_},useTransition:function(){var _=bo(!1),T=_[0];return _=yd.bind(null,_[1]),ai().memoizedState=_,[T,_]},useMutableSource:function(){},useSyncExternalStore:function(_,T,R){var F=En,Y=ai();if(as){if(R===void 0)throw Error(t(407));R=R()}else{if(R=T(),du===null)throw Error(t(349));qc&30||rc(F,T,R)}Y.memoizedState=R;var ee={value:R,getSnapshot:T};return Y.queue=ee,To(to.bind(null,F,ee,_),[_]),F.flags|=2048,Ru(9,Oo.bind(null,F,ee,R,T),void 0,null),R},useId:function(){var _=ai(),T=du.identifierPrefix;if(as){var R=dl,F=yn;R=(F&~(1<<32-jr(F)-1)).toString(32)+R,T=":"+T+"R"+R,R=Ut++,0<R&&(T+="H"+R.toString(32)),T+=":"}else R=ml++,T=":"+T+"r"+R.toString(32)+":";return _.memoizedState=T},unstable_isNewReconciler:!1},$={readContext:$s,useCallback:ii,useContext:$s,useEffect:ic,useImperativeHandle:Ka,useInsertionEffect:Pl,useLayoutEffect:So,useMemo:cs,useReducer:yo,useRef:th,useState:function(){return yo(Zc)},useDebugValue:cu,useDeferredValue:function(_){var T=Ki();return qh(T,_i.memoizedState,_)},useTransition:function(){var _=yo(Zc)[0],T=Ki().memoizedState;return[_,T]},useMutableSource:eh,useSyncExternalStore:Sc,useId:Ta,unstable_isNewReconciler:!1},I={readContext:$s,useCallback:ii,useContext:$s,useEffect:ic,useImperativeHandle:Ka,useInsertionEffect:Pl,useLayoutEffect:So,useMemo:cs,useReducer:gl,useRef:th,useState:function(){return gl(Zc)},useDebugValue:cu,useDeferredValue:function(_){var T=Ki();return _i===null?T.memoizedState=_:qh(T,_i.memoizedState,_)},useTransition:function(){var _=gl(Zc)[0],T=Ki().memoizedState;return[_,T]},useMutableSource:eh,useSyncExternalStore:Sc,useId:Ta,unstable_isNewReconciler:!1};function B(_,T){try{var R="",F=T;do R+=qe(F),F=F.return;while(F);var Y=R}catch(ee){Y=`
Error generating stack: `+ee.message+`
`+ee.stack}return{value:_,source:T,stack:Y,digest:null}}function W(_,T,R){return{value:_,source:null,stack:R??null,digest:T??null}}function pe(_,T){try{console.error(T.value)}catch(R){setTimeout(function(){throw R})}}var Oe=typeof WeakMap=="function"?WeakMap:Map;function tt(_,T,R){R=ia(-1,R),R.tag=3,R.payload={element:null};var F=T.value;return R.callback=function(){Qm||(Qm=!0,Zm=F),pe(_,T)},R}function xt(_,T,R){R=ia(-1,R),R.tag=3;var F=_.type.getDerivedStateFromError;if(typeof F=="function"){var Y=T.value;R.payload=function(){return F(Y)},R.callback=function(){pe(_,T)}}var ee=_.stateNode;return ee!==null&&typeof ee.componentDidCatch=="function"&&(R.callback=function(){pe(_,T),typeof F!="function"&&(Eo===null?Eo=new Set([this]):Eo.add(this));var be=T.stack;this.componentDidCatch(T.value,{componentStack:be!==null?be:""})}),R}function Zt(_,T,R){var F=_.pingCache;if(F===null){F=_.pingCache=new Oe;var Y=new Set;F.set(T,Y)}else Y=F.get(T),Y===void 0&&(Y=new Set,F.set(T,Y));Y.has(R)||(Y.add(R),_=kv.bind(null,_,T,R),T.then(_,_))}function cn(_){do{var T;if((T=_.tag===13)&&(T=_.memoizedState,T=T!==null?T.dehydrated!==null:!0),T)return _;_=_.return}while(_!==null);return null}function Tn(_,T,R,F,Y){return _.mode&1?(_.flags|=65536,_.lanes=Y,_):(_===T?_.flags|=65536:(_.flags|=128,R.flags|=131072,R.flags&=-52805,R.tag===1&&(R.alternate===null?R.tag=17:(T=ia(-1,1),T.tag=2,Xi(R,T,1))),R.lanes|=1),_)}var Sn=D.ReactCurrentOwner,gn=!1;function Ur(_,T,R,F){T.child=_===null?Au(T,null,R,F):ba(T,_.child,R,F)}function Et(_,T,R,F,Y){R=R.render;var ee=T.ref;return ja(T,Y),F=Jh(_,T,R,F,ee,Y),R=Qc(),_!==null&&!gn?(T.updateQueue=_.updateQueue,T.flags&=-2053,_.lanes&=~Y,Zh(_,T,Y)):(as&&R&&ou(T),T.flags|=1,Ur(_,T,F,Y),T.child)}function Ce(_,T,R,F,Y){if(_===null){var ee=R.type;return typeof ee=="function"&&!Dg(ee)&&ee.defaultProps===void 0&&R.compare===null&&R.defaultProps===void 0?(T.tag=15,T.type=ee,Ne(_,T,ee,F,Y)):(_=dm(R.type,null,F,T,T.mode,Y),_.ref=T.ref,_.return=T,T.child=_)}if(ee=_.child,(_.lanes&Y)===0){var be=ee.memoizedProps;if(R=R.compare,R=R!==null?R:Nt,R(be,F)&&_.ref===T.ref)return Zh(_,T,Y)}return T.flags|=1,_=ed(ee,F),_.ref=T.ref,_.return=T,T.child=_}function Ne(_,T,R,F,Y){if(_!==null){var ee=_.memoizedProps;if(Nt(ee,F)&&_.ref===T.ref)if(gn=!1,T.pendingProps=F=ee,(_.lanes&Y)!==0)_.flags&131072&&(gn=!0);else return T.lanes=_.lanes,Zh(_,T,Y)}return on(_,T,R,F,Y)}function ot(_,T,R){var F=T.pendingProps,Y=F.children,ee=_!==null?_.memoizedState:null;if(F.mode==="hidden")if(!(T.mode&1))T.memoizedState={baseLanes:0,cachePool:null,transitions:null},ss(Ap,fu),fu|=R;else{if(!(R&1073741824))return _=ee!==null?ee.baseLanes|R:R,T.lanes=T.childLanes=1073741824,T.memoizedState={baseLanes:_,cachePool:null,transitions:null},T.updateQueue=null,ss(Ap,fu),fu|=_,null;T.memoizedState={baseLanes:0,cachePool:null,transitions:null},F=ee!==null?ee.baseLanes:R,ss(Ap,fu),fu|=F}else ee!==null?(F=ee.baseLanes|R,T.memoizedState=null):F=R,ss(Ap,fu),fu|=F;return Ur(_,T,Y,R),T.child}function jt(_,T){var R=T.ref;(_===null&&R!==null||_!==null&&_.ref!==R)&&(T.flags|=512,T.flags|=2097152)}function on(_,T,R,F,Y){var ee=ra(R)?os:va.current;return ee=Xc(T,ee),ja(T,Y),R=Jh(_,T,R,F,ee,Y),F=Qc(),_!==null&&!gn?(T.updateQueue=_.updateQueue,T.flags&=-2053,_.lanes&=~Y,Zh(_,T,Y)):(as&&F&&ou(T),T.flags|=1,Ur(_,T,R,Y),T.child)}function xn(_,T,R,F,Y){if(ra(R)){var ee=!0;Ws(T)}else ee=!1;if(ja(T,Y),T.stateNode===null)mf(_,T),lu(T,R,F),Tc(T,R,F,Y),F=!0;else if(_===null){var be=T.stateNode,Je=T.memoizedProps;be.props=Je;var ut=be.context,Dt=R.contextType;typeof Dt=="object"&&Dt!==null?Dt=$s(Dt):(Dt=ra(R)?os:va.current,Dt=Xc(T,Dt));var en=R.getDerivedStateFromProps,hn=typeof en=="function"||typeof be.getSnapshotBeforeUpdate=="function";hn||typeof be.UNSAFE_componentWillReceiveProps!="function"&&typeof be.componentWillReceiveProps!="function"||(Je!==F||ut!==Dt)&&Qu(T,be,F,Dt),bc=!1;var an=T.memoizedState;be.state=an,zr(T,F,be,Y),ut=T.memoizedState,Je!==F||an!==ut||_a.current||bc?(typeof en=="function"&&(ko(T,R,en,F),ut=T.memoizedState),(Je=bc||ts(T,R,Je,F,an,ut,Dt))?(hn||typeof be.UNSAFE_componentWillMount!="function"&&typeof be.componentWillMount!="function"||(typeof be.componentWillMount=="function"&&be.componentWillMount(),typeof be.UNSAFE_componentWillMount=="function"&&be.UNSAFE_componentWillMount()),typeof be.componentDidMount=="function"&&(T.flags|=4194308)):(typeof be.componentDidMount=="function"&&(T.flags|=4194308),T.memoizedProps=F,T.memoizedState=ut),be.props=F,be.state=ut,be.context=Dt,F=Je):(typeof be.componentDidMount=="function"&&(T.flags|=4194308),F=!1)}else{be=T.stateNode,xh(_,T),Je=T.memoizedProps,Dt=T.type===T.elementType?Je:Mu(T.type,Je),be.props=Dt,hn=T.pendingProps,an=be.context,ut=R.contextType,typeof ut=="object"&&ut!==null?ut=$s(ut):(ut=ra(R)?os:va.current,ut=Xc(T,ut));var Dn=R.getDerivedStateFromProps;(en=typeof Dn=="function"||typeof be.getSnapshotBeforeUpdate=="function")||typeof be.UNSAFE_componentWillReceiveProps!="function"&&typeof be.componentWillReceiveProps!="function"||(Je!==hn||an!==ut)&&Qu(T,be,F,ut),bc=!1,an=T.memoizedState,be.state=an,zr(T,F,be,Y);var Zn=T.memoizedState;Je!==hn||an!==Zn||_a.current||bc?(typeof Dn=="function"&&(ko(T,R,Dn,F),Zn=T.memoizedState),(Dt=bc||ts(T,R,Dt,F,an,Zn,ut)||!1)?(en||typeof be.UNSAFE_componentWillUpdate!="function"&&typeof be.componentWillUpdate!="function"||(typeof be.componentWillUpdate=="function"&&be.componentWillUpdate(F,Zn,ut),typeof be.UNSAFE_componentWillUpdate=="function"&&be.UNSAFE_componentWillUpdate(F,Zn,ut)),typeof be.componentDidUpdate=="function"&&(T.flags|=4),typeof be.getSnapshotBeforeUpdate=="function"&&(T.flags|=1024)):(typeof be.componentDidUpdate!="function"||Je===_.memoizedProps&&an===_.memoizedState||(T.flags|=4),typeof be.getSnapshotBeforeUpdate!="function"||Je===_.memoizedProps&&an===_.memoizedState||(T.flags|=1024),T.memoizedProps=F,T.memoizedState=Zn),be.props=F,be.state=Zn,be.context=ut,F=Dt):(typeof be.componentDidUpdate!="function"||Je===_.memoizedProps&&an===_.memoizedState||(T.flags|=4),typeof be.getSnapshotBeforeUpdate!="function"||Je===_.memoizedProps&&an===_.memoizedState||(T.flags|=1024),F=!1)}return On(_,T,R,F,ee,Y)}function On(_,T,R,F,Y,ee){jt(_,T);var be=(T.flags&128)!==0;if(!F&&!be)return Y&&Kn(T,R,!1),Zh(_,T,ee);F=T.stateNode,Sn.current=T;var Je=be&&typeof R.getDerivedStateFromError!="function"?null:F.render();return T.flags|=1,_!==null&&be?(T.child=ba(T,_.child,null,ee),T.child=ba(T,null,Je,ee)):Ur(_,T,Je,ee),T.memoizedState=F.state,Y&&Kn(T,R,!0),T.child}function zn(_){var T=_.stateNode;T.pendingContext?Ld(_,T.pendingContext,T.pendingContext!==T.context):T.context&&Ld(_,T.context,!1),ec(_,T.containerInfo)}function fr(_,T,R,F,Y){return Wo(),Ro(Y),T.flags|=256,Ur(_,T,R,F),T.child}var Rr={dehydrated:null,treeContext:null,retryLane:0};function Fl(_){return{baseLanes:_,cachePool:null,transitions:null}}function pf(_,T,R){var F=T.pendingProps,Y=Br.current,ee=!1,be=(T.flags&128)!==0,Je;if((Je=be)||(Je=_!==null&&_.memoizedState===null?!1:(Y&2)!==0),Je?(ee=!0,T.flags&=-129):(_===null||_.memoizedState!==null)&&(Y|=1),ss(Br,Y&1),_===null)return Oi(T),_=T.memoizedState,_!==null&&(_=_.dehydrated,_!==null)?(T.mode&1?_.data==="$!"?T.lanes=8:T.lanes=1073741824:T.lanes=1,null):(be=F.children,_=F.fallback,ee?(F=T.mode,ee=T.child,be={mode:"hidden",children:be},!(F&1)&&ee!==null?(ee.childLanes=0,ee.pendingProps=be):ee=Kf(be,F,0,null),_=Xf(_,F,R,null),ee.return=T,_.return=T,ee.sibling=_,T.child=ee,T.child.memoizedState=Fl(R),T.memoizedState=Rr,_):Ah(T,be));if(Y=_.memoizedState,Y!==null&&(Je=Y.dehydrated,Je!==null))return nh(_,T,be,F,Je,Y,R);if(ee){ee=F.fallback,be=T.mode,Y=_.child,Je=Y.sibling;var ut={mode:"hidden",children:F.children};return!(be&1)&&T.child!==Y?(F=T.child,F.childLanes=0,F.pendingProps=ut,T.deletions=null):(F=ed(Y,ut),F.subtreeFlags=Y.subtreeFlags&14680064),Je!==null?ee=ed(Je,ee):(ee=Xf(ee,be,R,null),ee.flags|=2),ee.return=T,F.return=T,F.sibling=ee,T.child=F,F=ee,ee=T.child,be=_.child.memoizedState,be=be===null?Fl(R):{baseLanes:be.baseLanes|R,cachePool:null,transitions:be.transitions},ee.memoizedState=be,ee.childLanes=_.childLanes&~R,T.memoizedState=Rr,F}return ee=_.child,_=ee.sibling,F=ed(ee,{mode:"visible",children:F.children}),!(T.mode&1)&&(F.lanes=R),F.return=T,F.sibling=null,_!==null&&(R=T.deletions,R===null?(T.deletions=[_],T.flags|=16):R.push(_)),T.child=F,T.memoizedState=null,F}function Ah(_,T){return T=Kf({mode:"visible",children:T},_.mode,0,null),T.return=_,_.child=T}function ln(_,T,R,F){return F!==null&&Ro(F),ba(T,_.child,null,R),_=Ah(T,T.pendingProps.children),_.flags|=2,T.memoizedState=null,_}function nh(_,T,R,F,Y,ee,be){if(R)return T.flags&256?(T.flags&=-257,F=W(Error(t(422))),ln(_,T,be,F)):T.memoizedState!==null?(T.child=_.child,T.flags|=128,null):(ee=F.fallback,Y=T.mode,F=Kf({mode:"visible",children:F.children},Y,0,null),ee=Xf(ee,Y,be,null),ee.flags|=2,F.return=T,ee.return=T,F.sibling=ee,T.child=F,T.mode&1&&ba(T,_.child,null,be),T.child.memoizedState=Fl(be),T.memoizedState=Rr,ee);if(!(T.mode&1))return ln(_,T,be,null);if(Y.data==="$!"){if(F=Y.nextSibling&&Y.nextSibling.dataset,F)var Je=F.dgst;return F=Je,ee=Error(t(419)),F=W(ee,F,void 0),ln(_,T,be,F)}if(Je=(be&_.childLanes)!==0,gn||Je){if(F=du,F!==null){switch(be&-be){case 4:Y=2;break;case 16:Y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Y=32;break;case 536870912:Y=268435456;break;default:Y=0}Y=Y&(F.suspendedLanes|be)?0:Y,Y!==0&&Y!==ee.retryLane&&(ee.retryLane=Y,Ya(_,Y),oa(F,_,Y,-1))}return cm(),F=W(Error(t(421))),ln(_,T,be,F)}return Y.data==="$?"?(T.flags|=128,T.child=_.child,T=hm.bind(null,_),Y._reactRetry=T,null):(_=ee.treeContext,fl=vc(Y.nextSibling),ys=T,as=!0,pl=null,_!==null&&(mo[ya++]=yn,mo[ya++]=dl,mo[ya++]=Mn,yn=_.id,dl=_.overflow,Mn=T),T=Ah(T,F.children),T.flags|=4096,T)}function tm(_,T,R){_.lanes|=T;var F=_.alternate;F!==null&&(F.lanes|=T),ls(_.return,T,R)}function wa(_,T,R,F,Y){var ee=_.memoizedState;ee===null?_.memoizedState={isBackwards:T,rendering:null,renderingStartTime:0,last:F,tail:R,tailMode:Y}:(ee.isBackwards=T,ee.rendering=null,ee.renderingStartTime=0,ee.last=F,ee.tail=R,ee.tailMode=Y)}function vl(_,T,R){var F=T.pendingProps,Y=F.revealOrder,ee=F.tail;if(Ur(_,T,F.children,R),F=Br.current,(F&2)!==0)F=F&1|2,T.flags|=128;else{if(_!==null&&_.flags&128)e:for(_=T.child;_!==null;){if(_.tag===13)_.memoizedState!==null&&tm(_,R,T);else if(_.tag===19)tm(_,R,T);else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===T)break e;for(;_.sibling===null;){if(_.return===null||_.return===T)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}F&=1}if(ss(Br,F),(T.mode&1)===0)T.memoizedState=null;else switch(Y){case"forwards":for(R=T.child,Y=null;R!==null;)_=R.alternate,_!==null&&bs(_)===null&&(Y=R),R=R.sibling;R=Y,R===null?(Y=T.child,T.child=null):(Y=R.sibling,R.sibling=null),wa(T,!1,Y,R,ee);break;case"backwards":for(R=null,Y=T.child,T.child=null;Y!==null;){if(_=Y.alternate,_!==null&&bs(_)===null){T.child=Y;break}_=Y.sibling,Y.sibling=R,R=Y,Y=_}wa(T,!0,R,null,ee);break;case"together":wa(T,!1,null,null,void 0);break;default:T.memoizedState=null}return T.child}function mf(_,T){!(T.mode&1)&&_!==null&&(_.alternate=null,T.alternate=null,T.flags|=2)}function Zh(_,T,R){if(_!==null&&(T.dependencies=_.dependencies),Ud|=T.lanes,(R&T.childLanes)===0)return null;if(_!==null&&T.child!==_.child)throw Error(t(153));if(T.child!==null){for(_=T.child,R=ed(_,_.pendingProps),T.child=R,R.return=T;_.sibling!==null;)_=_.sibling,R=R.sibling=ed(_,_.pendingProps),R.return=T;R.sibling=null}return T.child}function hs(_,T,R){switch(T.tag){case 3:zn(T),Wo();break;case 5:$h(T);break;case 1:ra(T.type)&&Ws(T);break;case 4:ec(T,T.stateNode.containerInfo);break;case 10:var F=T.type._context,Y=T.memoizedProps.value;ss(Ll,F._currentValue),F._currentValue=Y;break;case 13:if(F=T.memoizedState,F!==null)return F.dehydrated!==null?(ss(Br,Br.current&1),T.flags|=128,null):R&T.child.childLanes?pf(_,T,R):(ss(Br,Br.current&1),_=Zh(_,T,R),_!==null?_.sibling:null);ss(Br,Br.current&1);break;case 19:if(F=(R&T.childLanes)!==0,(_.flags&128)!==0){if(F)return vl(_,T,R);T.flags|=128}if(Y=T.memoizedState,Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),ss(Br,Br.current),F)break;return null;case 22:case 23:return T.lanes=0,ot(_,T,R)}return Zh(_,T,R)}var vn,_0,Rg,qm;vn=function(_,T){for(var R=T.child;R!==null;){if(R.tag===5||R.tag===6)_.appendChild(R.stateNode);else if(R.tag!==4&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===T)break;for(;R.sibling===null;){if(R.return===null||R.return===T)return;R=R.return}R.sibling.return=R.return,R=R.sibling}},_0=function(){},Rg=function(_,T,R,F){var Y=_.memoizedProps;if(Y!==F){_=T.stateNode,Vo(vo.current);var ee=null;switch(R){case"input":Y=it(_,Y),F=it(_,F),ee=[];break;case"select":Y=se({},Y,{value:void 0}),F=se({},F,{value:void 0}),ee=[];break;case"textarea":Y=Ee(_,Y),F=Ee(_,F),ee=[];break;default:typeof Y.onClick!="function"&&typeof F.onClick=="function"&&(_.onclick=iu)}bt(R,F);var be;R=null;for(Dt in Y)if(!F.hasOwnProperty(Dt)&&Y.hasOwnProperty(Dt)&&Y[Dt]!=null)if(Dt==="style"){var Je=Y[Dt];for(be in Je)Je.hasOwnProperty(be)&&(R||(R={}),R[be]="")}else Dt!=="dangerouslySetInnerHTML"&&Dt!=="children"&&Dt!=="suppressContentEditableWarning"&&Dt!=="suppressHydrationWarning"&&Dt!=="autoFocus"&&(s.hasOwnProperty(Dt)?ee||(ee=[]):(ee=ee||[]).push(Dt,null));for(Dt in F){var ut=F[Dt];if(Je=Y!=null?Y[Dt]:void 0,F.hasOwnProperty(Dt)&&ut!==Je&&(ut!=null||Je!=null))if(Dt==="style")if(Je){for(be in Je)!Je.hasOwnProperty(be)||ut&&ut.hasOwnProperty(be)||(R||(R={}),R[be]="");for(be in ut)ut.hasOwnProperty(be)&&Je[be]!==ut[be]&&(R||(R={}),R[be]=ut[be])}else R||(ee||(ee=[]),ee.push(Dt,R)),R=ut;else Dt==="dangerouslySetInnerHTML"?(ut=ut?ut.__html:void 0,Je=Je?Je.__html:void 0,ut!=null&&Je!==ut&&(ee=ee||[]).push(Dt,ut)):Dt==="children"?typeof ut!="string"&&typeof ut!="number"||(ee=ee||[]).push(Dt,""+ut):Dt!=="suppressContentEditableWarning"&&Dt!=="suppressHydrationWarning"&&(s.hasOwnProperty(Dt)?(ut!=null&&Dt==="onScroll"&&Ui("scroll",_),ee||Je===ut||(ee=[])):(ee=ee||[]).push(Dt,ut))}R&&(ee=ee||[]).push("style",R);var Dt=ee;(T.updateQueue=Dt)&&(T.flags|=4)}},qm=function(_,T,R,F){R!==F&&(T.flags|=4)};function xc(_,T){if(!as)switch(_.tailMode){case"hidden":T=_.tail;for(var R=null;T!==null;)T.alternate!==null&&(R=T),T=T.sibling;R===null?_.tail=null:R.sibling=null;break;case"collapsed":R=_.tail;for(var F=null;R!==null;)R.alternate!==null&&(F=R),R=R.sibling;F===null?T||_.tail===null?_.tail=null:_.tail.sibling=null:F.sibling=null}}function no(_){var T=_.alternate!==null&&_.alternate.child===_.child,R=0,F=0;if(T)for(var Y=_.child;Y!==null;)R|=Y.lanes|Y.childLanes,F|=Y.subtreeFlags&14680064,F|=Y.flags&14680064,Y.return=_,Y=Y.sibling;else for(Y=_.child;Y!==null;)R|=Y.lanes|Y.childLanes,F|=Y.subtreeFlags,F|=Y.flags,Y.return=_,Y=Y.sibling;return _.subtreeFlags|=F,_.childLanes=R,T}function Wf(_,T,R){var F=T.pendingProps;switch(Io(T),T.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return no(T),null;case 1:return ra(T.type)&&Od(),no(T),null;case 3:return F=T.stateNode,tc(),es(_a),es(va),Xa(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(_===null||_.child===null)&&(Kc(T)?T.flags|=4:_===null||_.memoizedState.isDehydrated&&!(T.flags&256)||(T.flags|=1024,pl!==null&&(T0(pl),pl=null))),_0(_,T),no(T),null;case 5:Ch(T);var Y=Vo(Nl.current);if(R=T.type,_!==null&&T.stateNode!=null)Rg(_,T,R,F,Y),_.ref!==T.ref&&(T.flags|=512,T.flags|=2097152);else{if(!F){if(T.stateNode===null)throw Error(t(166));return no(T),null}if(_=Vo(vo.current),Kc(T)){F=T.stateNode,R=T.type;var ee=T.memoizedProps;switch(F[Xr]=T,F[cl]=ee,_=(T.mode&1)!==0,R){case"dialog":Ui("cancel",F),Ui("close",F);break;case"iframe":case"object":case"embed":Ui("load",F);break;case"video":case"audio":for(Y=0;Y<ta.length;Y++)Ui(ta[Y],F);break;case"source":Ui("error",F);break;case"img":case"image":case"link":Ui("error",F),Ui("load",F);break;case"details":Ui("toggle",F);break;case"input":st(F,ee),Ui("invalid",F);break;case"select":F._wrapperState={wasMultiple:!!ee.multiple},Ui("invalid",F);break;case"textarea":re(F,ee),Ui("invalid",F)}bt(R,ee),Y=null;for(var be in ee)if(ee.hasOwnProperty(be)){var Je=ee[be];be==="children"?typeof Je=="string"?F.textContent!==Je&&(ee.suppressHydrationWarning!==!0&&Rl(F.textContent,Je,_),Y=["children",Je]):typeof Je=="number"&&F.textContent!==""+Je&&(ee.suppressHydrationWarning!==!0&&Rl(F.textContent,Je,_),Y=["children",""+Je]):s.hasOwnProperty(be)&&Je!=null&&be==="onScroll"&&Ui("scroll",F)}switch(R){case"input":Ge(F),vt(F,ee,!0);break;case"textarea":Ge(F),mt(F);break;case"select":case"option":break;default:typeof ee.onClick=="function"&&(F.onclick=iu)}F=Y,T.updateQueue=F,F!==null&&(T.flags|=4)}else{be=Y.nodeType===9?Y:Y.ownerDocument,_==="http://www.w3.org/1999/xhtml"&&(_=yt(R)),_==="http://www.w3.org/1999/xhtml"?R==="script"?(_=be.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild)):typeof F.is=="string"?_=be.createElement(R,{is:F.is}):(_=be.createElement(R),R==="select"&&(be=_,F.multiple?be.multiple=!0:F.size&&(be.size=F.size))):_=be.createElementNS(_,R),_[Xr]=T,_[cl]=F,vn(_,T,!1,!1),T.stateNode=_;e:{switch(be=ze(R,F),R){case"dialog":Ui("cancel",_),Ui("close",_),Y=F;break;case"iframe":case"object":case"embed":Ui("load",_),Y=F;break;case"video":case"audio":for(Y=0;Y<ta.length;Y++)Ui(ta[Y],_);Y=F;break;case"source":Ui("error",_),Y=F;break;case"img":case"image":case"link":Ui("error",_),Ui("load",_),Y=F;break;case"details":Ui("toggle",_),Y=F;break;case"input":st(_,F),Y=it(_,F),Ui("invalid",_);break;case"option":Y=F;break;case"select":_._wrapperState={wasMultiple:!!F.multiple},Y=se({},F,{value:void 0}),Ui("invalid",_);break;case"textarea":re(_,F),Y=Ee(_,F),Ui("invalid",_);break;default:Y=F}bt(R,Y),Je=Y;for(ee in Je)if(Je.hasOwnProperty(ee)){var ut=Je[ee];ee==="style"?Re(_,ut):ee==="dangerouslySetInnerHTML"?(ut=ut?ut.__html:void 0,ut!=null&&Qe(_,ut)):ee==="children"?typeof ut=="string"?(R!=="textarea"||ut!=="")&&Le(_,ut):typeof ut=="number"&&Le(_,""+ut):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(s.hasOwnProperty(ee)?ut!=null&&ee==="onScroll"&&Ui("scroll",_):ut!=null&&P(_,ee,ut,be))}switch(R){case"input":Ge(_),vt(_,F,!1);break;case"textarea":Ge(_),mt(_);break;case"option":F.value!=null&&_.setAttribute("value",""+et(F.value));break;case"select":_.multiple=!!F.multiple,ee=F.value,ee!=null?gt(_,!!F.multiple,ee,!1):F.defaultValue!=null&&gt(_,!!F.multiple,F.defaultValue,!0);break;default:typeof Y.onClick=="function"&&(_.onclick=iu)}switch(R){case"button":case"input":case"select":case"textarea":F=!!F.autoFocus;break e;case"img":F=!0;break e;default:F=!1}}F&&(T.flags|=4)}T.ref!==null&&(T.flags|=512,T.flags|=2097152)}return no(T),null;case 6:if(_&&T.stateNode!=null)qm(_,T,_.memoizedProps,F);else{if(typeof F!="string"&&T.stateNode===null)throw Error(t(166));if(R=Vo(Nl.current),Vo(vo.current),Kc(T)){if(F=T.stateNode,R=T.memoizedProps,F[Xr]=T,(ee=F.nodeValue!==R)&&(_=ys,_!==null))switch(_.tag){case 3:Rl(F.nodeValue,R,(_.mode&1)!==0);break;case 5:_.memoizedProps.suppressHydrationWarning!==!0&&Rl(F.nodeValue,R,(_.mode&1)!==0)}ee&&(T.flags|=4)}else F=(R.nodeType===9?R:R.ownerDocument).createTextNode(F),F[Xr]=T,T.stateNode=F}return no(T),null;case 13:if(es(Br),F=T.memoizedState,_===null||_.memoizedState!==null&&_.memoizedState.dehydrated!==null){if(as&&fl!==null&&T.mode&1&&!(T.flags&128))Kh(),Wo(),T.flags|=98560,ee=!1;else if(ee=Kc(T),F!==null&&F.dehydrated!==null){if(_===null){if(!ee)throw Error(t(318));if(ee=T.memoizedState,ee=ee!==null?ee.dehydrated:null,!ee)throw Error(t(317));ee[Xr]=T}else Wo(),!(T.flags&128)&&(T.memoizedState=null),T.flags|=4;no(T),ee=!1}else pl!==null&&(T0(pl),pl=null),ee=!0;if(!ee)return T.flags&65536?T:null}return T.flags&128?(T.lanes=R,T):(F=F!==null,F!==(_!==null&&_.memoizedState!==null)&&F&&(T.child.flags|=8192,T.mode&1&&(_===null||Br.current&1?zl===0&&(zl=3):cm())),T.updateQueue!==null&&(T.flags|=4),no(T),null);case 4:return tc(),_0(_,T),_===null&&ru(T.stateNode.containerInfo),no(T),null;case 10:return qu(T.type._context),no(T),null;case 17:return ra(T.type)&&Od(),no(T),null;case 19:if(es(Br),ee=T.memoizedState,ee===null)return no(T),null;if(F=(T.flags&128)!==0,be=ee.rendering,be===null)if(F)xc(ee,!1);else{if(zl!==0||_!==null&&_.flags&128)for(_=T.child;_!==null;){if(be=bs(_),be!==null){for(T.flags|=128,xc(ee,!1),F=be.updateQueue,F!==null&&(T.updateQueue=F,T.flags|=4),T.subtreeFlags=0,F=R,R=T.child;R!==null;)ee=R,_=F,ee.flags&=14680066,be=ee.alternate,be===null?(ee.childLanes=0,ee.lanes=_,ee.child=null,ee.subtreeFlags=0,ee.memoizedProps=null,ee.memoizedState=null,ee.updateQueue=null,ee.dependencies=null,ee.stateNode=null):(ee.childLanes=be.childLanes,ee.lanes=be.lanes,ee.child=be.child,ee.subtreeFlags=0,ee.deletions=null,ee.memoizedProps=be.memoizedProps,ee.memoizedState=be.memoizedState,ee.updateQueue=be.updateQueue,ee.type=be.type,_=be.dependencies,ee.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext}),R=R.sibling;return ss(Br,Br.current&1|2),T.child}_=_.sibling}ee.tail!==null&&rn()>sh&&(T.flags|=128,F=!0,xc(ee,!1),T.lanes=4194304)}else{if(!F)if(_=bs(be),_!==null){if(T.flags|=128,F=!0,R=_.updateQueue,R!==null&&(T.updateQueue=R,T.flags|=4),xc(ee,!0),ee.tail===null&&ee.tailMode==="hidden"&&!be.alternate&&!as)return no(T),null}else 2*rn()-ee.renderingStartTime>sh&&R!==1073741824&&(T.flags|=128,F=!0,xc(ee,!1),T.lanes=4194304);ee.isBackwards?(be.sibling=T.child,T.child=be):(R=ee.last,R!==null?R.sibling=be:T.child=be,ee.last=be)}return ee.tail!==null?(T=ee.tail,ee.rendering=T,ee.tail=T.sibling,ee.renderingStartTime=rn(),T.sibling=null,R=Br.current,ss(Br,F?R&1|2:R&1),T):(no(T),null);case 22:case 23:return w0(),F=T.memoizedState!==null,_!==null&&_.memoizedState!==null!==F&&(T.flags|=8192),F&&T.mode&1?fu&1073741824&&(no(T),T.subtreeFlags&6&&(T.flags|=8192)):no(T),null;case 24:return null;case 25:return null}throw Error(t(156,T.tag))}function Dd(_,T){switch(Io(T),T.tag){case 1:return ra(T.type)&&Od(),_=T.flags,_&65536?(T.flags=_&-65537|128,T):null;case 3:return tc(),es(_a),es(va),Xa(),_=T.flags,_&65536&&!(_&128)?(T.flags=_&-65537|128,T):null;case 5:return Ch(T),null;case 13:if(es(Br),_=T.memoizedState,_!==null&&_.dehydrated!==null){if(T.alternate===null)throw Error(t(340));Wo()}return _=T.flags,_&65536?(T.flags=_&-65537|128,T):null;case 19:return es(Br),null;case 4:return tc(),null;case 10:return qu(T.type._context),null;case 22:case 23:return w0(),null;case 24:return null;default:return null}}var Ja=!1,Wr=!1,Ea=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Li(_,T){var R=_.ref;if(R!==null)if(typeof R=="function")try{R(null)}catch(F){aa(_,T,F)}else R.current=null}function ro(_,T,R){try{R()}catch(F){aa(_,T,F)}}var Cv=!1;function $c(_,T){if(Ku=uo,_=_n(),Gr(_)){if("selectionStart"in _)var R={start:_.selectionStart,end:_.selectionEnd};else e:{R=(R=_.ownerDocument)&&R.defaultView||window;var F=R.getSelection&&R.getSelection();if(F&&F.rangeCount!==0){R=F.anchorNode;var Y=F.anchorOffset,ee=F.focusNode;F=F.focusOffset;try{R.nodeType,ee.nodeType}catch{R=null;break e}var be=0,Je=-1,ut=-1,Dt=0,en=0,hn=_,an=null;t:for(;;){for(var Dn;hn!==R||Y!==0&&hn.nodeType!==3||(Je=be+Y),hn!==ee||F!==0&&hn.nodeType!==3||(ut=be+F),hn.nodeType===3&&(be+=hn.nodeValue.length),(Dn=hn.firstChild)!==null;)an=hn,hn=Dn;for(;;){if(hn===_)break t;if(an===R&&++Dt===Y&&(Je=be),an===ee&&++en===F&&(ut=be),(Dn=hn.nextSibling)!==null)break;hn=an,an=hn.parentNode}hn=Dn}R=Je===-1||ut===-1?null:{start:Je,end:ut}}else R=null}R=R||{start:0,end:0}}else R=null;for(Ju={focusedElem:_,selectionRange:R},uo=!1,Ye=T;Ye!==null;)if(T=Ye,_=T.child,(T.subtreeFlags&1028)!==0&&_!==null)_.return=T,Ye=_;else for(;Ye!==null;){T=Ye;try{var Zn=T.alternate;if(T.flags&1024)switch(T.tag){case 0:case 11:case 15:break;case 1:if(Zn!==null){var sr=Zn.memoizedProps,Lo=Zn.memoizedState,At=T.stateNode,pt=At.getSnapshotBeforeUpdate(T.elementType===T.type?sr:Mu(T.type,sr),Lo);At.__reactInternalSnapshotBeforeUpdate=pt}break;case 3:var $t=T.stateNode.containerInfo;$t.nodeType===1?$t.textContent="":$t.nodeType===9&&$t.documentElement&&$t.removeChild($t.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(wn){aa(T,T.return,wn)}if(_=T.sibling,_!==null){_.return=T.return,Ye=_;break}Ye=T.return}return Zn=Cv,Cv=!1,Zn}function $p(_,T,R){var F=T.updateQueue;if(F=F!==null?F.lastEffect:null,F!==null){var Y=F=F.next;do{if((Y.tag&_)===_){var ee=Y.destroy;Y.destroy=void 0,ee!==void 0&&ro(T,R,ee)}Y=Y.next}while(Y!==F)}}function nm(_,T){if(T=T.updateQueue,T=T!==null?T.lastEffect:null,T!==null){var R=T=T.next;do{if((R.tag&_)===_){var F=R.create;R.destroy=F()}R=R.next}while(R!==T)}}function Mv(_){var T=_.ref;if(T!==null){var R=_.stateNode;switch(_.tag){case 5:_=R;break;default:_=R}typeof T=="function"?T(_):T.current=_}}function Cp(_){var T=_.alternate;T!==null&&(_.alternate=null,Cp(T)),_.child=null,_.deletions=null,_.sibling=null,_.tag===5&&(T=_.stateNode,T!==null&&(delete T[Xr],delete T[cl],delete T[ma],delete T[X],delete T[xs])),_.stateNode=null,_.return=null,_.dependencies=null,_.memoizedProps=null,_.memoizedState=null,_.pendingProps=null,_.stateNode=null,_.updateQueue=null}function xa(_){return _.tag===5||_.tag===3||_.tag===4}function kg(_){e:for(;;){for(;_.sibling===null;){if(_.return===null||xa(_.return))return null;_=_.return}for(_.sibling.return=_.return,_=_.sibling;_.tag!==5&&_.tag!==6&&_.tag!==18;){if(_.flags&2||_.child===null||_.tag===4)continue e;_.child.return=_,_=_.child}if(!(_.flags&2))return _.stateNode}}function rm(_,T,R){var F=_.tag;if(F===5||F===6)_=_.stateNode,T?R.nodeType===8?R.parentNode.insertBefore(_,T):R.insertBefore(_,T):(R.nodeType===8?(T=R.parentNode,T.insertBefore(_,R)):(T=R,T.appendChild(_)),R=R._reactRootContainer,R!=null||T.onclick!==null||(T.onclick=iu));else if(F!==4&&(_=_.child,_!==null))for(rm(_,T,R),_=_.sibling;_!==null;)rm(_,T,R),_=_.sibling}function Mp(_,T,R){var F=_.tag;if(F===5||F===6)_=_.stateNode,T?R.insertBefore(_,T):R.appendChild(_);else if(F!==4&&(_=_.child,_!==null))for(Mp(_,T,R),_=_.sibling;_!==null;)Mp(_,T,R),_=_.sibling}var _l=null,hu=!1;function Pd(_,T,R){for(R=R.child;R!==null;)gf(_,T,R),R=R.sibling}function gf(_,T,R){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Pr,R)}catch{}switch(R.tag){case 5:Wr||Li(R,T);case 6:var F=_l,Y=hu;_l=null,Pd(_,T,R),_l=F,hu=Y,_l!==null&&(hu?(_=_l,R=R.stateNode,_.nodeType===8?_.parentNode.removeChild(R):_.removeChild(R)):_l.removeChild(R.stateNode));break;case 18:_l!==null&&(hu?(_=_l,R=R.stateNode,_.nodeType===8?jc(_.parentNode,R):_.nodeType===1&&jc(_,R),Gn(_)):jc(_l,R.stateNode));break;case 4:F=_l,Y=hu,_l=R.stateNode.containerInfo,hu=!0,Pd(_,T,R),_l=F,hu=Y;break;case 0:case 11:case 14:case 15:if(!Wr&&(F=R.updateQueue,F!==null&&(F=F.lastEffect,F!==null))){Y=F=F.next;do{var ee=Y,be=ee.destroy;ee=ee.tag,be!==void 0&&(ee&2||ee&4)&&ro(R,T,be),Y=Y.next}while(Y!==F)}Pd(_,T,R);break;case 1:if(!Wr&&(Li(R,T),F=R.stateNode,typeof F.componentWillUnmount=="function"))try{F.props=R.memoizedProps,F.state=R.memoizedState,F.componentWillUnmount()}catch(Je){aa(R,T,Je)}Pd(_,T,R);break;case 21:Pd(_,T,R);break;case 22:R.mode&1?(Wr=(F=Wr)||R.memoizedState!==null,Pd(_,T,R),Wr=F):Pd(_,T,R);break;default:Pd(_,T,R)}}function Bd(_){var T=_.updateQueue;if(T!==null){_.updateQueue=null;var R=_.stateNode;R===null&&(R=_.stateNode=new Ea),T.forEach(function(F){var Y=ab.bind(null,_,F);R.has(F)||(R.add(F),F.then(Y,Y))})}}function rh(_,T){var R=T.deletions;if(R!==null)for(var F=0;F<R.length;F++){var Y=R[F];try{var ee=_,be=T,Je=be;e:for(;Je!==null;){switch(Je.tag){case 5:_l=Je.stateNode,hu=!1;break e;case 3:_l=Je.stateNode.containerInfo,hu=!0;break e;case 4:_l=Je.stateNode.containerInfo,hu=!0;break e}Je=Je.return}if(_l===null)throw Error(t(160));gf(ee,be,Y),_l=null,hu=!1;var ut=Y.alternate;ut!==null&&(ut.return=null),Y.return=null}catch(Dt){aa(Y,T,Dt)}}if(T.subtreeFlags&12854)for(T=T.child;T!==null;)Og(T,_),T=T.sibling}function Og(_,T){var R=_.alternate,F=_.flags;switch(_.tag){case 0:case 11:case 14:case 15:if(rh(T,_),mr(_),F&4){try{$p(3,_,_.return),nm(3,_)}catch(sr){aa(_,_.return,sr)}try{$p(5,_,_.return)}catch(sr){aa(_,_.return,sr)}}break;case 1:rh(T,_),mr(_),F&512&&R!==null&&Li(R,R.return);break;case 5:if(rh(T,_),mr(_),F&512&&R!==null&&Li(R,R.return),_.flags&32){var Y=_.stateNode;try{Le(Y,"")}catch(sr){aa(_,_.return,sr)}}if(F&4&&(Y=_.stateNode,Y!=null)){var ee=_.memoizedProps,be=R!==null?R.memoizedProps:ee,Je=_.type,ut=_.updateQueue;if(_.updateQueue=null,ut!==null)try{Je==="input"&&ee.type==="radio"&&ee.name!=null&&It(Y,ee),ze(Je,be);var Dt=ze(Je,ee);for(be=0;be<ut.length;be+=2){var en=ut[be],hn=ut[be+1];en==="style"?Re(Y,hn):en==="dangerouslySetInnerHTML"?Qe(Y,hn):en==="children"?Le(Y,hn):P(Y,en,hn,Dt)}switch(Je){case"input":kt(Y,ee);break;case"textarea":Be(Y,ee);break;case"select":var an=Y._wrapperState.wasMultiple;Y._wrapperState.wasMultiple=!!ee.multiple;var Dn=ee.value;Dn!=null?gt(Y,!!ee.multiple,Dn,!1):an!==!!ee.multiple&&(ee.defaultValue!=null?gt(Y,!!ee.multiple,ee.defaultValue,!0):gt(Y,!!ee.multiple,ee.multiple?[]:"",!1))}Y[cl]=ee}catch(sr){aa(_,_.return,sr)}}break;case 6:if(rh(T,_),mr(_),F&4){if(_.stateNode===null)throw Error(t(162));Y=_.stateNode,ee=_.memoizedProps;try{Y.nodeValue=ee}catch(sr){aa(_,_.return,sr)}}break;case 3:if(rh(T,_),mr(_),F&4&&R!==null&&R.memoizedState.isDehydrated)try{Gn(T.containerInfo)}catch(sr){aa(_,_.return,sr)}break;case 4:rh(T,_),mr(_);break;case 13:rh(T,_),mr(_),Y=_.child,Y.flags&8192&&(ee=Y.memoizedState!==null,Y.stateNode.isHidden=ee,!ee||Y.alternate!==null&&Y.alternate.memoizedState!==null||(bl=rn())),F&4&&Bd(_);break;case 22:if(en=R!==null&&R.memoizedState!==null,_.mode&1?(Wr=(Dt=Wr)||en,rh(T,_),Wr=Dt):rh(T,_),mr(_),F&8192){if(Dt=_.memoizedState!==null,(_.stateNode.isHidden=Dt)&&!en&&(_.mode&1)!==0)for(Ye=_,en=_.child;en!==null;){for(hn=Ye=en;Ye!==null;){switch(an=Ye,Dn=an.child,an.tag){case 0:case 11:case 14:case 15:$p(4,an,an.return);break;case 1:Li(an,an.return);var Zn=an.stateNode;if(typeof Zn.componentWillUnmount=="function"){F=an,R=an.return;try{T=F,Zn.props=T.memoizedProps,Zn.state=T.memoizedState,Zn.componentWillUnmount()}catch(sr){aa(F,R,sr)}}break;case 5:Li(an,an.return);break;case 22:if(an.memoizedState!==null){im(hn);continue}}Dn!==null?(Dn.return=an,Ye=Dn):im(hn)}en=en.sibling}e:for(en=null,hn=_;;){if(hn.tag===5){if(en===null){en=hn;try{Y=hn.stateNode,Dt?(ee=Y.style,typeof ee.setProperty=="function"?ee.setProperty("display","none","important"):ee.display="none"):(Je=hn.stateNode,ut=hn.memoizedProps.style,be=ut!=null&&ut.hasOwnProperty("display")?ut.display:null,Je.style.display=me("display",be))}catch(sr){aa(_,_.return,sr)}}}else if(hn.tag===6){if(en===null)try{hn.stateNode.nodeValue=Dt?"":hn.memoizedProps}catch(sr){aa(_,_.return,sr)}}else if((hn.tag!==22&&hn.tag!==23||hn.memoizedState===null||hn===_)&&hn.child!==null){hn.child.return=hn,hn=hn.child;continue}if(hn===_)break e;for(;hn.sibling===null;){if(hn.return===null||hn.return===_)break e;en===hn&&(en=null),hn=hn.return}en===hn&&(en=null),hn.sibling.return=hn.return,hn=hn.sibling}}break;case 19:rh(T,_),mr(_),F&4&&Bd(_);break;case 21:break;default:rh(T,_),mr(_)}}function mr(_){var T=_.flags;if(T&2){try{e:{for(var R=_.return;R!==null;){if(xa(R)){var F=R;break e}R=R.return}throw Error(t(160))}switch(F.tag){case 5:var Y=F.stateNode;F.flags&32&&(Le(Y,""),F.flags&=-33);var ee=kg(_);Mp(_,ee,Y);break;case 3:case 4:var be=F.stateNode.containerInfo,Je=kg(_);rm(_,Je,be);break;default:throw Error(t(161))}}catch(ut){aa(_,_.return,ut)}_.flags&=-3}T&4096&&(_.flags&=-4097)}function y0(_,T,R){Ye=_,wo(_)}function wo(_,T,R){for(var F=(_.mode&1)!==0;Ye!==null;){var Y=Ye,ee=Y.child;if(Y.tag===22&&F){var be=Y.memoizedState!==null||Ja;if(!be){var Je=Y.alternate,ut=Je!==null&&Je.memoizedState!==null||Wr;Je=Ja;var Dt=Wr;if(Ja=be,(Wr=ut)&&!Dt)for(Ye=Y;Ye!==null;)be=Ye,ut=be.child,be.tag===22&&be.memoizedState!==null?Fd(Y):ut!==null?(ut.return=be,Ye=ut):Fd(Y);for(;ee!==null;)Ye=ee,wo(ee),ee=ee.sibling;Ye=Y,Ja=Je,Wr=Dt}qa(_)}else Y.subtreeFlags&8772&&ee!==null?(ee.return=Y,Ye=ee):qa(_)}}function qa(_){for(;Ye!==null;){var T=Ye;if(T.flags&8772){var R=T.alternate;try{if(T.flags&8772)switch(T.tag){case 0:case 11:case 15:Wr||nm(5,T);break;case 1:var F=T.stateNode;if(T.flags&4&&!Wr)if(R===null)F.componentDidMount();else{var Y=T.elementType===T.type?R.memoizedProps:Mu(T.type,R.memoizedProps);F.componentDidUpdate(Y,R.memoizedState,F.__reactInternalSnapshotBeforeUpdate)}var ee=T.updateQueue;ee!==null&&ri(T,ee,F);break;case 3:var be=T.updateQueue;if(be!==null){if(R=null,T.child!==null)switch(T.child.tag){case 5:R=T.child.stateNode;break;case 1:R=T.child.stateNode}ri(T,be,R)}break;case 5:var Je=T.stateNode;if(R===null&&T.flags&4){R=Je;var ut=T.memoizedProps;switch(T.type){case"button":case"input":case"select":case"textarea":ut.autoFocus&&R.focus();break;case"img":ut.src&&(R.src=ut.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(T.memoizedState===null){var Dt=T.alternate;if(Dt!==null){var en=Dt.memoizedState;if(en!==null){var hn=en.dehydrated;hn!==null&&Gn(hn)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Wr||T.flags&512&&Mv(T)}catch(an){aa(T,T.return,an)}}if(T===_){Ye=null;break}if(R=T.sibling,R!==null){R.return=T.return,Ye=R;break}Ye=T.return}}function im(_){for(;Ye!==null;){var T=Ye;if(T===_){Ye=null;break}var R=T.sibling;if(R!==null){R.return=T.return,Ye=R;break}Ye=T.return}}function Fd(_){for(;Ye!==null;){var T=Ye;try{switch(T.tag){case 0:case 11:case 15:var R=T.return;try{nm(4,T)}catch(ut){aa(T,R,ut)}break;case 1:var F=T.stateNode;if(typeof F.componentDidMount=="function"){var Y=T.return;try{F.componentDidMount()}catch(ut){aa(T,Y,ut)}}var ee=T.return;try{Mv(T)}catch(ut){aa(T,ee,ut)}break;case 5:var be=T.return;try{Mv(T)}catch(ut){aa(T,be,ut)}}}catch(ut){aa(T,T.return,ut)}if(T===_){Ye=null;break}var Je=T.sibling;if(Je!==null){Je.return=T.return,Ye=Je;break}Ye=T.return}}var sm=Math.ceil,ku=D.ReactCurrentDispatcher,b0=D.ReactCurrentOwner,Yo=D.ReactCurrentBatchConfig,ns=0,du=null,yl=null,Ou=0,fu=0,Ap=hi(0),zl=0,zd=null,Ud=0,vf=0,Lg=0,om=null,ih=null,bl=0,sh=1/0,Hd=null,Qm=!1,Zm=null,Eo=null,am=!1,Ls=null,Ul=0,Ip=0,Ng=null,Gd=-1,eg=0;function Cc(){return ns&6?rn():Gd!==-1?Gd:Gd=rn()}function Wd(_){return _.mode&1?ns&2&&Ou!==0?Ou&-Ou:df.transition!==null?(eg===0&&(eg=qo()),eg):(_=Tr,_!==0||(_=window.event,_=_===void 0?16:Gu(_.type)),_):1}function oa(_,T,R,F){if(50<Ip)throw Ip=0,Ng=null,Error(t(185));vu(_,R,F),(!(ns&2)||_!==du)&&(_===du&&(!(ns&2)&&(vf|=R),zl===4&&Vf(_,Ou)),$a(_,F),R===1&&ns===0&&!(T.mode&1)&&(sh=rn()+500,Zs&&$n()))}function $a(_,T){var R=_.callbackNode;pc(_,T);var F=Da(_,_===du?Ou:0);if(F===0)R!==null&&La(R),_.callbackNode=null,_.callbackPriority=0;else if(T=F&-F,_.callbackPriority!==T){if(R!=null&&La(R),T===1)_.tag===0?Ho(Rp.bind(null,_)):su(Rp.bind(null,_)),Vc(function(){!(ns&6)&&$n()}),R=null;else{switch($i(F)){case 1:R=tl;break;case 4:R=Na;break;case 16:R=zs;break;case 536870912:R=Pi;break;default:R=zs}R=ah(R,Av.bind(null,_))}_.callbackPriority=T,_.callbackNode=R}}function Av(_,T){if(Gd=-1,eg=0,(ns&6)!==0)throw Error(t(327));var R=_.callbackNode;if(oh()&&_.callbackNode!==R)return null;var F=Da(_,_===du?Ou:0);if(F===0)return null;if(F&30||F&_.expiredLanes||T)T=_f(_,F);else{T=F;var Y=ns;ns|=2;var ee=Iv();(du!==_||Ou!==T)&&(Hd=null,sh=rn()+500,um(_,T));do try{ob();break}catch(Je){E0(_,Je)}while(!0);au(),ku.current=ee,ns=Y,yl!==null?T=0:(du=null,Ou=0,T=zl)}if(T!==0){if(T===2&&(Y=qs(_),Y!==0&&(F=Y,T=lm(_,Y))),T===1)throw R=zd,um(_,0),Vf(_,F),$a(_,rn()),R;if(T===6)Vf(_,F);else{if(Y=_.current.alternate,(F&30)===0&&!L_(Y)&&(T=_f(_,F),T===2&&(ee=qs(_),ee!==0&&(F=ee,T=lm(_,ee))),T===1))throw R=zd,um(_,0),Vf(_,F),$a(_,rn()),R;switch(_.finishedWork=Y,_.finishedLanes=F,T){case 0:case 1:throw Error(t(345));case 2:jf(_,ih,Hd);break;case 3:if(Vf(_,F),(F&130023424)===F&&(T=bl+500-rn(),10<T)){if(Da(_,0)!==0)break;if(Y=_.suspendedLanes,(Y&F)!==F){Cc(),_.pingedLanes|=_.suspendedLanes&Y;break}_.timeoutHandle=ul(jf.bind(null,_,ih,Hd),T);break}jf(_,ih,Hd);break;case 4:if(Vf(_,F),(F&4194240)===F)break;for(T=_.eventTimes,Y=-1;0<F;){var be=31-jr(F);ee=1<<be,be=T[be],be>Y&&(Y=be),F&=~ee}if(F=Y,F=rn()-F,F=(120>F?120:480>F?480:1080>F?1080:1920>F?1920:3e3>F?3e3:4320>F?4320:1960*sm(F/1960))-F,10<F){_.timeoutHandle=ul(jf.bind(null,_,ih,Hd),F);break}jf(_,ih,Hd);break;case 5:jf(_,ih,Hd);break;default:throw Error(t(329))}}}return $a(_,rn()),_.callbackNode===R?Av.bind(null,_):null}function lm(_,T){var R=om;return _.current.memoizedState.isDehydrated&&(um(_,T).flags|=256),_=_f(_,T),_!==2&&(T=ih,ih=R,T!==null&&T0(T)),_}function T0(_){ih===null?ih=_:ih.push.apply(ih,_)}function L_(_){for(var T=_;;){if(T.flags&16384){var R=T.updateQueue;if(R!==null&&(R=R.stores,R!==null))for(var F=0;F<R.length;F++){var Y=R[F],ee=Y.getSnapshot;Y=Y.value;try{if(!Pe(ee(),Y))return!1}catch{return!1}}}if(R=T.child,T.subtreeFlags&16384&&R!==null)R.return=T,T=R;else{if(T===_)break;for(;T.sibling===null;){if(T.return===null||T.return===_)return!0;T=T.return}T.sibling.return=T.return,T=T.sibling}}return!0}function Vf(_,T){for(T&=~Lg,T&=~vf,_.suspendedLanes|=T,_.pingedLanes&=~T,_=_.expirationTimes;0<T;){var R=31-jr(T),F=1<<R;_[R]=-1,T&=~F}}function Rp(_){if(ns&6)throw Error(t(327));oh();var T=Da(_,0);if(!(T&1))return $a(_,rn()),null;var R=_f(_,T);if(_.tag!==0&&R===2){var F=qs(_);F!==0&&(T=F,R=lm(_,F))}if(R===1)throw R=zd,um(_,0),Vf(_,T),$a(_,rn()),R;if(R===6)throw Error(t(345));return _.finishedWork=_.current.alternate,_.finishedLanes=T,jf(_,ih,Hd),$a(_,rn()),null}function S0(_,T){var R=ns;ns|=1;try{return _(T)}finally{ns=R,ns===0&&(sh=rn()+500,Zs&&$n())}}function kp(_){Ls!==null&&Ls.tag===0&&!(ns&6)&&oh();var T=ns;ns|=1;var R=Yo.transition,F=Tr;try{if(Yo.transition=null,Tr=1,_)return _()}finally{Tr=F,Yo.transition=R,ns=T,!(ns&6)&&$n()}}function w0(){fu=Ap.current,es(Ap)}function um(_,T){_.finishedWork=null,_.finishedLanes=0;var R=_.timeoutHandle;if(R!==-1&&(_.timeoutHandle=-1,na(R)),yl!==null)for(R=yl.return;R!==null;){var F=R;switch(Io(F),F.tag){case 1:F=F.type.childContextTypes,F!=null&&Od();break;case 3:tc(),es(_a),es(va),Xa();break;case 5:Ch(F);break;case 4:tc();break;case 13:es(Br);break;case 19:es(Br);break;case 10:qu(F.type._context);break;case 22:case 23:w0()}R=R.return}if(du=_,yl=_=ed(_.current,null),Ou=fu=T,zl=0,zd=null,Lg=vf=Ud=0,ih=om=null,Cs!==null){for(T=0;T<Cs.length;T++)if(R=Cs[T],F=R.interleaved,F!==null){R.interleaved=null;var Y=F.next,ee=R.pending;if(ee!==null){var be=ee.next;ee.next=Y,F.next=be}R.pending=F}Cs=null}return _}function E0(_,T){do{var R=yl;try{if(au(),js.current=d,uu){for(var F=En.memoizedState;F!==null;){var Y=F.queue;Y!==null&&(Y.pending=null),F=F.next}uu=!1}if(qc=0,Ms=_i=En=null,Dl=!1,Ut=0,b0.current=null,R===null||R.return===null){zl=1,zd=T,yl=null;break}e:{var ee=_,be=R.return,Je=R,ut=T;if(T=Ou,Je.flags|=32768,ut!==null&&typeof ut=="object"&&typeof ut.then=="function"){var Dt=ut,en=Je,hn=en.tag;if(!(en.mode&1)&&(hn===0||hn===11||hn===15)){var an=en.alternate;an?(en.updateQueue=an.updateQueue,en.memoizedState=an.memoizedState,en.lanes=an.lanes):(en.updateQueue=null,en.memoizedState=null)}var Dn=cn(be);if(Dn!==null){Dn.flags&=-257,Tn(Dn,be,Je,ee,T),Dn.mode&1&&Zt(ee,Dt,T),T=Dn,ut=Dt;var Zn=T.updateQueue;if(Zn===null){var sr=new Set;sr.add(ut),T.updateQueue=sr}else Zn.add(ut);break e}else{if(!(T&1)){Zt(ee,Dt,T),cm();break e}ut=Error(t(426))}}else if(as&&Je.mode&1){var Lo=cn(be);if(Lo!==null){!(Lo.flags&65536)&&(Lo.flags|=256),Tn(Lo,be,Je,ee,T),Ro(B(ut,Je));break e}}ee=ut=B(ut,Je),zl!==4&&(zl=2),om===null?om=[ee]:om.push(ee),ee=be;do{switch(ee.tag){case 3:ee.flags|=65536,T&=-T,ee.lanes|=T;var At=tt(ee,ut,T);nr(ee,At);break e;case 1:Je=ut;var pt=ee.type,$t=ee.stateNode;if(!(ee.flags&128)&&(typeof pt.getDerivedStateFromError=="function"||$t!==null&&typeof $t.componentDidCatch=="function"&&(Eo===null||!Eo.has($t)))){ee.flags|=65536,T&=-T,ee.lanes|=T;var wn=xt(ee,Je,T);nr(ee,wn);break e}}ee=ee.return}while(ee!==null)}$0(R)}catch(hr){T=hr,yl===R&&R!==null&&(yl=R=R.return);continue}break}while(!0)}function Iv(){var _=ku.current;return ku.current=d,_===null?d:_}function cm(){(zl===0||zl===3||zl===2)&&(zl=4),du===null||!(Ud&268435455)&&!(vf&268435455)||Vf(du,Ou)}function _f(_,T){var R=ns;ns|=2;var F=Iv();(du!==_||Ou!==T)&&(Hd=null,um(_,T));do try{Rv();break}catch(Y){E0(_,Y)}while(!0);if(au(),ns=R,ku.current=F,yl!==null)throw Error(t(261));return du=null,Ou=0,zl}function Rv(){for(;yl!==null;)x0(yl)}function ob(){for(;yl!==null&&!Mo();)x0(yl)}function x0(_){var T=N_(_.alternate,_,fu);_.memoizedProps=_.pendingProps,T===null?$0(_):yl=T,b0.current=null}function $0(_){var T=_;do{var R=T.alternate;if(_=T.return,(T.flags&32768)===0){if(R=Wf(R,T,fu),R!==null){yl=R;return}}else{if(R=Dd(R,T),R!==null){R.flags&=32767,yl=R;return}if(_!==null)_.flags|=32768,_.subtreeFlags=0,_.deletions=null;else{zl=6,yl=null;return}}if(T=T.sibling,T!==null){yl=T;return}yl=T=_}while(T!==null);zl===0&&(zl=5)}function jf(_,T,R){var F=Tr,Y=Yo.transition;try{Yo.transition=null,Tr=1,Un(_,T,R,F)}finally{Yo.transition=Y,Tr=F}return null}function Un(_,T,R,F){do oh();while(Ls!==null);if(ns&6)throw Error(t(327));R=_.finishedWork;var Y=_.finishedLanes;if(R===null)return null;if(_.finishedWork=null,_.finishedLanes=0,R===_.current)throw Error(t(177));_.callbackNode=null,_.callbackPriority=0;var ee=R.lanes|R.childLanes;if(gh(_,ee),_===du&&(yl=du=null,Ou=0),!(R.subtreeFlags&2064)&&!(R.flags&2064)||am||(am=!0,ah(zs,function(){return oh(),null})),ee=(R.flags&15990)!==0,(R.subtreeFlags&15990)!==0||ee){ee=Yo.transition,Yo.transition=null;var be=Tr;Tr=1;var Je=ns;ns|=4,b0.current=null,$c(_,R),Og(R,_),ho(Ju),uo=!!Ku,Ju=Ku=null,_.current=R,y0(R),Xl(),ns=Je,Tr=be,Yo.transition=ee}else _.current=R;if(am&&(am=!1,Ls=_,Ul=Y),ee=_.pendingLanes,ee===0&&(Eo=null),Nr(R.stateNode),$a(_,rn()),T!==null)for(F=_.onRecoverableError,R=0;R<T.length;R++)Y=T[R],F(Y.value,{componentStack:Y.stack,digest:Y.digest});if(Qm)throw Qm=!1,_=Zm,Zm=null,_;return Ul&1&&_.tag!==0&&oh(),ee=_.pendingLanes,ee&1?_===Ng?Ip++:(Ip=0,Ng=_):Ip=0,$n(),null}function oh(){if(Ls!==null){var _=$i(Ul),T=Yo.transition,R=Tr;try{if(Yo.transition=null,Tr=16>_?16:_,Ls===null)var F=!1;else{if(_=Ls,Ls=null,Ul=0,(ns&6)!==0)throw Error(t(331));var Y=ns;for(ns|=4,Ye=_.current;Ye!==null;){var ee=Ye,be=ee.child;if(Ye.flags&16){var Je=ee.deletions;if(Je!==null){for(var ut=0;ut<Je.length;ut++){var Dt=Je[ut];for(Ye=Dt;Ye!==null;){var en=Ye;switch(en.tag){case 0:case 11:case 15:$p(8,en,ee)}var hn=en.child;if(hn!==null)hn.return=en,Ye=hn;else for(;Ye!==null;){en=Ye;var an=en.sibling,Dn=en.return;if(Cp(en),en===Dt){Ye=null;break}if(an!==null){an.return=Dn,Ye=an;break}Ye=Dn}}}var Zn=ee.alternate;if(Zn!==null){var sr=Zn.child;if(sr!==null){Zn.child=null;do{var Lo=sr.sibling;sr.sibling=null,sr=Lo}while(sr!==null)}}Ye=ee}}if(ee.subtreeFlags&2064&&be!==null)be.return=ee,Ye=be;else e:for(;Ye!==null;){if(ee=Ye,(ee.flags&2048)!==0)switch(ee.tag){case 0:case 11:case 15:$p(9,ee,ee.return)}var At=ee.sibling;if(At!==null){At.return=ee.return,Ye=At;break e}Ye=ee.return}}var pt=_.current;for(Ye=pt;Ye!==null;){be=Ye;var $t=be.child;if(be.subtreeFlags&2064&&$t!==null)$t.return=be,Ye=$t;else e:for(be=pt;Ye!==null;){if(Je=Ye,(Je.flags&2048)!==0)try{switch(Je.tag){case 0:case 11:case 15:nm(9,Je)}}catch(hr){aa(Je,Je.return,hr)}if(Je===be){Ye=null;break e}var wn=Je.sibling;if(wn!==null){wn.return=Je.return,Ye=wn;break e}Ye=Je.return}}if(ns=Y,$n(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Pr,_)}catch{}F=!0}return F}finally{Tr=R,Yo.transition=T}}return!1}function Op(_,T,R){T=B(R,T),T=tt(_,T,1),_=Xi(_,T,1),T=Cc(),_!==null&&(vu(_,1,T),$a(_,T))}function aa(_,T,R){if(_.tag===3)Op(_,_,R);else for(;T!==null;){if(T.tag===3){Op(T,_,R);break}else if(T.tag===1){var F=T.stateNode;if(typeof T.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(Eo===null||!Eo.has(F))){_=B(R,_),_=xt(T,_,1),T=Xi(T,_,1),_=Cc(),T!==null&&(vu(T,1,_),$a(T,_));break}}T=T.return}}function kv(_,T,R){var F=_.pingCache;F!==null&&F.delete(T),T=Cc(),_.pingedLanes|=_.suspendedLanes&R,du===_&&(Ou&R)===R&&(zl===4||zl===3&&(Ou&130023424)===Ou&&500>rn()-bl?um(_,0):Lg|=R),$a(_,T)}function C0(_,T){T===0&&(_.mode&1?(T=gs,gs<<=1,!(gs&130023424)&&(gs=4194304)):T=1);var R=Cc();_=Ya(_,T),_!==null&&(vu(_,T,R),$a(_,R))}function hm(_){var T=_.memoizedState,R=0;T!==null&&(R=T.retryLane),C0(_,R)}function ab(_,T){var R=0;switch(_.tag){case 13:var F=_.stateNode,Y=_.memoizedState;Y!==null&&(R=Y.retryLane);break;case 19:F=_.stateNode;break;default:throw Error(t(314))}F!==null&&F.delete(T),C0(_,R)}var N_;N_=function(_,T,R){if(_!==null)if(_.memoizedProps!==T.pendingProps||_a.current)gn=!0;else{if(!(_.lanes&R)&&!(T.flags&128))return gn=!1,hs(_,T,R);gn=(_.flags&131072)!==0}else gn=!1,as&&T.flags&1048576&&xp(T,Eh,T.index);switch(T.lanes=0,T.tag){case 2:var F=T.type;mf(_,T),_=T.pendingProps;var Y=Xc(T,va.current);ja(T,R),Y=Jh(null,T,F,_,Y,R);var ee=Qc();return T.flags|=1,typeof Y=="object"&&Y!==null&&typeof Y.render=="function"&&Y.$$typeof===void 0?(T.tag=1,T.memoizedState=null,T.updateQueue=null,ra(F)?(ee=!0,Ws(T)):ee=!1,T.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,ff(T),Y.updater=us,T.stateNode=Y,Y._reactInternals=T,Tc(T,F,_,R),T=On(null,T,F,!0,ee,R)):(T.tag=0,as&&ee&&ou(T),Ur(null,T,Y,R),T=T.child),T;case 16:F=T.elementType;e:{switch(mf(_,T),_=T.pendingProps,Y=F._init,F=Y(F._payload),T.type=F,Y=T.tag=Yf(F),_=Mu(F,_),Y){case 0:T=on(null,T,F,_,R);break e;case 1:T=xn(null,T,F,_,R);break e;case 11:T=Et(null,T,F,_,R);break e;case 14:T=Ce(null,T,F,Mu(F.type,_),R);break e}throw Error(t(306,F,""))}return T;case 0:return F=T.type,Y=T.pendingProps,Y=T.elementType===F?Y:Mu(F,Y),on(_,T,F,Y,R);case 1:return F=T.type,Y=T.pendingProps,Y=T.elementType===F?Y:Mu(F,Y),xn(_,T,F,Y,R);case 3:e:{if(zn(T),_===null)throw Error(t(387));F=T.pendingProps,ee=T.memoizedState,Y=ee.element,xh(_,T),zr(T,F,null,R);var be=T.memoizedState;if(F=be.element,ee.isDehydrated)if(ee={element:F,isDehydrated:!1,cache:be.cache,pendingSuspenseBoundaries:be.pendingSuspenseBoundaries,transitions:be.transitions},T.updateQueue.baseState=ee,T.memoizedState=ee,T.flags&256){Y=B(Error(t(423)),T),T=fr(_,T,F,R,Y);break e}else if(F!==Y){Y=B(Error(t(424)),T),T=fr(_,T,F,R,Y);break e}else for(fl=vc(T.stateNode.containerInfo.firstChild),ys=T,as=!0,pl=null,R=Au(T,null,F,R),T.child=R;R;)R.flags=R.flags&-3|4096,R=R.sibling;else{if(Wo(),F===Y){T=Zh(_,T,R);break e}Ur(_,T,F,R)}T=T.child}return T;case 5:return $h(T),_===null&&Oi(T),F=T.type,Y=T.pendingProps,ee=_!==null?_.memoizedProps:null,be=Y.children,wh(F,Y)?be=null:ee!==null&&wh(F,ee)&&(T.flags|=32),jt(_,T),Ur(_,T,be,R),T.child;case 6:return _===null&&Oi(T),null;case 13:return pf(_,T,R);case 4:return ec(T,T.stateNode.containerInfo),F=T.pendingProps,_===null?T.child=ba(T,null,F,R):Ur(_,T,F,R),T.child;case 11:return F=T.type,Y=T.pendingProps,Y=T.elementType===F?Y:Mu(F,Y),Et(_,T,F,Y,R);case 7:return Ur(_,T,T.pendingProps,R),T.child;case 8:return Ur(_,T,T.pendingProps.children,R),T.child;case 12:return Ur(_,T,T.pendingProps.children,R),T.child;case 10:e:{if(F=T.type._context,Y=T.pendingProps,ee=T.memoizedProps,be=Y.value,ss(Ll,F._currentValue),F._currentValue=be,ee!==null)if(Pe(ee.value,be)){if(ee.children===Y.children&&!_a.current){T=Zh(_,T,R);break e}}else for(ee=T.child,ee!==null&&(ee.return=T);ee!==null;){var Je=ee.dependencies;if(Je!==null){be=ee.child;for(var ut=Je.firstContext;ut!==null;){if(ut.context===F){if(ee.tag===1){ut=ia(-1,R&-R),ut.tag=2;var Dt=ee.updateQueue;if(Dt!==null){Dt=Dt.shared;var en=Dt.pending;en===null?ut.next=ut:(ut.next=en.next,en.next=ut),Dt.pending=ut}}ee.lanes|=R,ut=ee.alternate,ut!==null&&(ut.lanes|=R),ls(ee.return,R,T),Je.lanes|=R;break}ut=ut.next}}else if(ee.tag===10)be=ee.type===T.type?null:ee.child;else if(ee.tag===18){if(be=ee.return,be===null)throw Error(t(341));be.lanes|=R,Je=be.alternate,Je!==null&&(Je.lanes|=R),ls(be,R,T),be=ee.sibling}else be=ee.child;if(be!==null)be.return=ee;else for(be=ee;be!==null;){if(be===T){be=null;break}if(ee=be.sibling,ee!==null){ee.return=be.return,be=ee;break}be=be.return}ee=be}Ur(_,T,Y.children,R),T=T.child}return T;case 9:return Y=T.type,F=T.pendingProps.children,ja(T,R),Y=$s(Y),F=F(Y),T.flags|=1,Ur(_,T,F,R),T.child;case 14:return F=T.type,Y=Mu(F,T.pendingProps),Y=Mu(F.type,Y),Ce(_,T,F,Y,R);case 15:return Ne(_,T,T.type,T.pendingProps,R);case 17:return F=T.type,Y=T.pendingProps,Y=T.elementType===F?Y:Mu(F,Y),mf(_,T),T.tag=1,ra(F)?(_=!0,Ws(T)):_=!1,ja(T,R),lu(T,F,Y),Tc(T,F,Y,R),On(null,T,F,!0,_,R);case 19:return vl(_,T,R);case 22:return ot(_,T,R)}throw Error(t(156,T.tag))};function ah(_,T){return Ss(_,T)}function xo(_,T,R,F){this.tag=_,this.key=R,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=T,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lu(_,T,R,F){return new xo(_,T,R,F)}function Dg(_){return _=_.prototype,!(!_||!_.isReactComponent)}function Yf(_){if(typeof _=="function")return Dg(_)?1:0;if(_!=null){if(_=_.$$typeof,_===q)return 11;if(_===ce)return 14}return 2}function ed(_,T){var R=_.alternate;return R===null?(R=Lu(_.tag,T,_.key,_.mode),R.elementType=_.elementType,R.type=_.type,R.stateNode=_.stateNode,R.alternate=_,_.alternate=R):(R.pendingProps=T,R.type=_.type,R.flags=0,R.subtreeFlags=0,R.deletions=null),R.flags=_.flags&14680064,R.childLanes=_.childLanes,R.lanes=_.lanes,R.child=_.child,R.memoizedProps=_.memoizedProps,R.memoizedState=_.memoizedState,R.updateQueue=_.updateQueue,T=_.dependencies,R.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext},R.sibling=_.sibling,R.index=_.index,R.ref=_.ref,R}function dm(_,T,R,F,Y,ee){var be=2;if(F=_,typeof _=="function")Dg(_)&&(be=1);else if(typeof _=="string")be=5;else e:switch(_){case V:return Xf(R.children,Y,ee,T);case z:be=8,Y|=8;break;case Z:return _=Lu(12,R,T,Y|2),_.elementType=Z,_.lanes=ee,_;case ae:return _=Lu(13,R,T,Y),_.elementType=ae,_.lanes=ee,_;case le:return _=Lu(19,R,T,Y),_.elementType=le,_.lanes=ee,_;case $e:return Kf(R,Y,ee,T);default:if(typeof _=="object"&&_!==null)switch(_.$$typeof){case oe:be=10;break e;case ue:be=9;break e;case q:be=11;break e;case ce:be=14;break e;case ge:be=16,F=null;break e}throw Error(t(130,_==null?_:typeof _,""))}return T=Lu(be,R,T,Y),T.elementType=_,T.type=F,T.lanes=ee,T}function Xf(_,T,R,F){return _=Lu(7,_,F,T),_.lanes=R,_}function Kf(_,T,R,F){return _=Lu(22,_,F,T),_.elementType=$e,_.lanes=R,_.stateNode={isHidden:!1},_}function Lp(_,T,R){return _=Lu(6,_,null,T),_.lanes=R,_}function bd(_,T,R){return T=Lu(4,_.children!==null?_.children:[],_.key,T),T.lanes=R,T.stateNode={containerInfo:_.containerInfo,pendingChildren:null,implementation:_.implementation},T}function yf(_,T,R,F,Y){this.tag=T,this.containerInfo=_,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kl(0),this.expirationTimes=Kl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kl(0),this.identifierPrefix=F,this.onRecoverableError=Y,this.mutableSourceEagerHydrationData=null}function tg(_,T,R,F,Y,ee,be,Je,ut){return _=new yf(_,T,R,Je,ut),T===1?(T=1,ee===!0&&(T|=8)):T=0,ee=Lu(3,null,null,T),_.current=ee,ee.stateNode=_,ee.memoizedState={element:F,isDehydrated:R,cache:null,transitions:null,pendingSuspenseBoundaries:null},ff(ee),_}function D_(_,T,R){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:F==null?null:""+F,children:_,containerInfo:T,implementation:R}}function Pg(_){if(!_)return Yc;_=_._reactInternals;e:{if(ir(_)!==_||_.tag!==1)throw Error(t(170));var T=_;do{switch(T.tag){case 3:T=T.stateNode.context;break e;case 1:if(ra(T.type)){T=T.stateNode.__reactInternalMemoizedMergedChildContext;break e}}T=T.return}while(T!==null);throw Error(t(171))}if(_.tag===1){var R=_.type;if(ra(R))return Yh(_,R,T)}return T}function Vd(_,T,R,F,Y,ee,be,Je,ut){return _=tg(R,F,!0,_,Y,ee,be,Je,ut),_.context=Pg(null),R=_.current,F=Cc(),Y=Wd(R),ee=ia(F,Y),ee.callback=T??null,Xi(R,ee,Y),_.current.lanes=Y,vu(_,Y,F),$a(_,F),_}function Ni(_,T,R,F){var Y=T.current,ee=Cc(),be=Wd(Y);return R=Pg(R),T.context===null?T.context=R:T.pendingContext=R,T=ia(ee,be),T.payload={element:_},F=F===void 0?null:F,F!==null&&(T.callback=F),_=Xi(Y,T,be),_!==null&&(oa(_,Y,be,ee),Pn(_,Y,be)),be}function fm(_){if(_=_.current,!_.child)return null;switch(_.child.tag){case 5:return _.child.stateNode;default:return _.child.stateNode}}function ng(_,T){if(_=_.memoizedState,_!==null&&_.dehydrated!==null){var R=_.retryLane;_.retryLane=R!==0&&R<T?R:T}}function Bg(_,T){ng(_,T),(_=_.alternate)&&ng(_,T)}function P_(){return null}var rg=typeof reportError=="function"?reportError:function(_){console.error(_)};function Np(_){this._internalRoot=_}ig.prototype.render=Np.prototype.render=function(_){var T=this._internalRoot;if(T===null)throw Error(t(409));Ni(_,T,null,null)},ig.prototype.unmount=Np.prototype.unmount=function(){var _=this._internalRoot;if(_!==null){this._internalRoot=null;var T=_.containerInfo;kp(function(){Ni(null,_,null,null)}),T[Zi]=null}};function ig(_){this._internalRoot=_}ig.prototype.unstable_scheduleHydration=function(_){if(_){var T=xl();_={blockedOn:null,target:_,priority:T};for(var R=0;R<yu.length&&T!==0&&T<yu[R].priority;R++);yu.splice(R,0,_),R===0&&lo(_)}};function Jf(_){return!(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)}function qf(_){return!(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11&&(_.nodeType!==8||_.nodeValue!==" react-mount-point-unstable "))}function pm(){}function Si(_,T,R,F,Y){if(Y){if(typeof F=="function"){var ee=F;F=function(){var Dt=fm(be);ee.call(Dt)}}var be=Vd(T,F,_,0,null,!1,!1,"",pm);return _._reactRootContainer=be,_[Zi]=be.current,ru(_.nodeType===8?_.parentNode:_),kp(),be}for(;Y=_.lastChild;)_.removeChild(Y);if(typeof F=="function"){var Je=F;F=function(){var Dt=fm(ut);Je.call(Dt)}}var ut=tg(_,0,!1,null,null,!1,!1,"",pm);return _._reactRootContainer=ut,_[Zi]=ut.current,ru(_.nodeType===8?_.parentNode:_),kp(function(){Ni(T,ut,R,F)}),ut}function Qf(_,T,R,F,Y){var ee=R._reactRootContainer;if(ee){var be=ee;if(typeof Y=="function"){var Je=Y;Y=function(){var ut=fm(be);Je.call(ut)}}Ni(T,be,_,Y)}else be=Si(R,T,_,Y,F);return fm(be)}Pc=function(_){switch(_.tag){case 3:var T=_.stateNode;if(T.current.memoizedState.isDehydrated){var R=nl(T.pendingLanes);R!==0&&(Qo(T,R|1),$a(T,rn()),!(ns&6)&&(sh=rn()+500,$n()))}break;case 13:kp(function(){var F=Ya(_,1);if(F!==null){var Y=Cc();oa(F,_,1,Y)}}),Bg(_,1)}},vh=function(_){if(_.tag===13){var T=Ya(_,134217728);if(T!==null){var R=Cc();oa(T,_,134217728,R)}Bg(_,134217728)}},Bc=function(_){if(_.tag===13){var T=Wd(_),R=Ya(_,T);if(R!==null){var F=Cc();oa(R,_,T,F)}Bg(_,T)}},xl=function(){return Tr},_u=function(_,T){var R=Tr;try{return Tr=_,T()}finally{Tr=R}},Gt=function(_,T,R){switch(T){case"input":if(kt(_,R),T=R.name,R.type==="radio"&&T!=null){for(R=_;R.parentNode;)R=R.parentNode;for(R=R.querySelectorAll("input[name="+JSON.stringify(""+T)+'][type="radio"]'),T=0;T<R.length;T++){var F=R[T];if(F!==_&&F.form===_.form){var Y=Uf(F);if(!Y)throw Error(t(90));Ie(F),kt(F,Y)}}}break;case"textarea":Be(_,R);break;case"select":T=R.value,T!=null&&gt(_,!!R.multiple,T,!1)}},Mr=S0,_r=kp;var mm={usingClientEntryPoint:!1,Events:[Ir,mn,Uf,cr,oi,S0]},gm={findFiberByHostInstance:ga,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Dp={bundleType:gm.bundleType,version:gm.version,rendererPackageName:gm.rendererPackageName,rendererConfig:gm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(_){return _=Lr(_),_===null?null:_.stateNode},findFiberByHostInstance:gm.findFiberByHostInstance||P_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fg.isDisabled&&Fg.supportsFiber)try{Pr=Fg.inject(Dp),In=Fg}catch{}}return Hp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mm,Hp.createPortal=function(_,T){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jf(T))throw Error(t(200));return D_(_,T,null,R)},Hp.createRoot=function(_,T){if(!Jf(_))throw Error(t(299));var R=!1,F="",Y=rg;return T!=null&&(T.unstable_strictMode===!0&&(R=!0),T.identifierPrefix!==void 0&&(F=T.identifierPrefix),T.onRecoverableError!==void 0&&(Y=T.onRecoverableError)),T=tg(_,1,!1,null,null,R,!1,F,Y),_[Zi]=T.current,ru(_.nodeType===8?_.parentNode:_),new Np(T)},Hp.findDOMNode=function(_){if(_==null)return null;if(_.nodeType===1)return _;var T=_._reactInternals;if(T===void 0)throw typeof _.render=="function"?Error(t(188)):(_=Object.keys(_).join(","),Error(t(268,_)));return _=Lr(T),_=_===null?null:_.stateNode,_},Hp.flushSync=function(_){return kp(_)},Hp.hydrate=function(_,T,R){if(!qf(T))throw Error(t(200));return Qf(null,_,T,!0,R)},Hp.hydrateRoot=function(_,T,R){if(!Jf(_))throw Error(t(405));var F=R!=null&&R.hydratedSources||null,Y=!1,ee="",be=rg;if(R!=null&&(R.unstable_strictMode===!0&&(Y=!0),R.identifierPrefix!==void 0&&(ee=R.identifierPrefix),R.onRecoverableError!==void 0&&(be=R.onRecoverableError)),T=Vd(T,null,_,1,R??null,Y,!1,ee,be),_[Zi]=T.current,ru(_),F)for(_=0;_<F.length;_++)R=F[_],Y=R._getVersion,Y=Y(R._source),T.mutableSourceEagerHydrationData==null?T.mutableSourceEagerHydrationData=[R,Y]:T.mutableSourceEagerHydrationData.push(R,Y);return new ig(T)},Hp.render=function(_,T,R){if(!qf(T))throw Error(t(200));return Qf(null,_,T,!1,R)},Hp.unmountComponentAtNode=function(_){if(!qf(_))throw Error(t(40));return _._reactRootContainer?(kp(function(){Qf(null,null,_,!1,function(){_._reactRootContainer=null,_[Zi]=null})}),!0):!1},Hp.unstable_batchedUpdates=S0,Hp.unstable_renderSubtreeIntoContainer=function(_,T,R,F){if(!qf(R))throw Error(t(200));if(_==null||_._reactInternals===void 0)throw Error(t(38));return Qf(_,T,R,!1,F)},Hp.version="18.2.0-next-9e3b772b8-20220608",Hp}(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=aIe()})(eee);var tee,xW=eee.exports;tee=xW.createRoot,xW.hydrateRoot;const UC=new Me,B4=new Me,lIe=new Me;function uIe(n,e,t){const r=UC.setFromMatrixPosition(n.matrixWorld);r.project(e);const s=t.width/2,o=t.height/2;return[r.x*s+s,-(r.y*o)+o]}function cIe(n,e){const t=UC.setFromMatrixPosition(n.matrixWorld),r=B4.setFromMatrixPosition(e.matrixWorld),s=t.sub(r),o=e.getWorldDirection(lIe);return s.angleTo(o)>Math.PI/2}function hIe(n,e,t,r){const s=UC.setFromMatrixPosition(n.matrixWorld),o=s.clone();o.project(e),t.setFromCamera(o,e);const l=t.intersectObjects(r,!0);if(l.length){const u=l[0].distance;return s.distanceTo(t.ray.origin)<u}return!0}function dIe(n,e){if(e instanceof dv)return e.zoom;if(e instanceof el){const t=UC.setFromMatrixPosition(n.matrixWorld),r=B4.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,o=t.distanceTo(r);return 1/(2*Math.tan(s/2)*o)}else return 1}function fIe(n,e,t){if(e instanceof el||e instanceof dv){const r=UC.setFromMatrixPosition(n.matrixWorld),s=B4.setFromMatrixPosition(e.matrixWorld),o=r.distanceTo(s),l=(t[1]-t[0])/(e.far-e.near),u=t[1]-l*e.far;return Math.round(l*o+u)}}const qP=n=>Math.abs(n)<1e-10?0:n;function nee(n,e,t=""){let r="matrix3d(";for(let s=0;s!==16;s++)r+=qP(e[s]*n.elements[s])+(s!==15?",":")");return t+r}const pIe=(n=>e=>nee(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),mIe=(n=>(e,t)=>nee(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function gIe(n){return n&&typeof n=="object"&&"current"in n}const ree=de.forwardRef(({children:n,eps:e=.001,style:t,className:r,prepend:s,center:o,fullscreen:l,portal:u,distanceFactor:h,sprite:f=!1,transform:g=!1,occlude:y,onOcclude:b,castShadow:S,receiveShadow:C,material:M,geometry:A,zIndexRange:k=[16777271,0],calculatePosition:O=uIe,as:P="div",wrapperClass:D,pointerEvents:U="auto",...H},V)=>{const{gl:z,camera:Z,scene:oe,size:ue,raycaster:q,events:ae,viewport:le}=nf(),[ce]=de.useState(()=>document.createElement(P)),ge=de.useRef(),$e=de.useRef(null),K=de.useRef(0),ie=de.useRef([0,0]),se=de.useRef(null),fe=de.useRef(null),Se=(u==null?void 0:u.current)||ae.connected||z.domElement.parentNode,Ue=de.useRef(null),ke=de.useRef(!1),qe=de.useMemo(()=>y&&y!=="blending"||Array.isArray(y)&&y.length&&gIe(y[0]),[y]);de.useLayoutEffect(()=>{const at=z.domElement;y&&y==="blending"?(at.style.zIndex=`${Math.floor(k[0]/2)}`,at.style.position="absolute",at.style.pointerEvents="none"):(at.style.zIndex=null,at.style.position=null,at.style.pointerEvents=null)},[y]),de.useLayoutEffect(()=>{if($e.current){const at=ge.current=tee(ce);if(oe.updateMatrixWorld(),g)ce.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Ge=O($e.current,Z,ue);ce.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Ge[0]}px,${Ge[1]}px,0);transform-origin:0 0;`}return Se&&(s?Se.prepend(ce):Se.appendChild(ce)),()=>{Se&&Se.removeChild(ce),at.unmount()}}},[Se,g]),de.useLayoutEffect(()=>{D&&(ce.className=D)},[D]);const we=de.useMemo(()=>g?{position:"absolute",top:0,left:0,width:ue.width,height:ue.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...l&&{top:-ue.height/2,left:-ue.width/2,width:ue.width,height:ue.height},...t},[t,o,l,ue,g]),Ze=de.useMemo(()=>({position:"absolute",pointerEvents:U}),[U]);de.useLayoutEffect(()=>{if(ke.current=!1,g){var at;(at=ge.current)==null||at.render(un("div",{ref:se,style:we,children:un("div",{ref:fe,style:Ze,children:un("div",{ref:V,className:r,style:t,children:n})})}))}else{var Ge;(Ge=ge.current)==null||Ge.render(un("div",{ref:V,style:we,className:r,children:n}))}});const et=de.useRef(!0);Km(at=>{if($e.current){Z.updateMatrixWorld(),$e.current.updateWorldMatrix(!0,!1);const Ge=g?ie.current:O($e.current,Z,ue);if(g||Math.abs(K.current-Z.zoom)>e||Math.abs(ie.current[0]-Ge[0])>e||Math.abs(ie.current[1]-Ge[1])>e){const Ie=cIe($e.current,Z);let He=!1;qe&&(y!=="blending"?He=[oe]:Array.isArray(y)&&(He=y.map(kt=>kt.current)));const it=et.current;if(He){const kt=hIe($e.current,Z,q,He);et.current=kt&&!Ie}else et.current=!Ie;it!==et.current&&(b?b(!et.current):ce.style.display=et.current?"block":"none");const st=Math.floor(k[0]/2),It=y?qe?[k[0],st]:[st-1,0]:k;if(ce.style.zIndex=`${fIe($e.current,Z,It)}`,g){const[kt,vt]=[ue.width/2,ue.height/2],Mt=Z.projectionMatrix.elements[5]*vt,{isOrthographicCamera:Ct,top:gt,left:Ee,bottom:re,right:Be}=Z,mt=pIe(Z.matrixWorldInverse),yt=Ct?`scale(${Mt})translate(${qP(-(Be+Ee)/2)}px,${qP((gt+re)/2)}px)`:`translateZ(${Mt}px)`;let wt=$e.current.matrixWorld;f&&(wt=Z.matrixWorldInverse.clone().transpose().copyPosition(wt).scale($e.current.scale),wt.elements[3]=wt.elements[7]=wt.elements[11]=0,wt.elements[15]=1),ce.style.width=ue.width+"px",ce.style.height=ue.height+"px",ce.style.perspective=Ct?"":`${Mt}px`,se.current&&fe.current&&(se.current.style.transform=`${yt}${mt}translate(${kt}px,${vt}px)`,fe.current.style.transform=mIe(wt,1/((h||10)/400)))}else{const kt=h===void 0?1:dIe($e.current,Z)*h;ce.style.transform=`translate3d(${Ge[0]}px,${Ge[1]}px,0) scale(${kt})`}ie.current=Ge,K.current=Z.zoom}}if(!qe&&Ue.current&&!ke.current)if(g){if(se.current){const Ge=se.current.children[0];if(Ge!=null&&Ge.clientWidth&&Ge!=null&&Ge.clientHeight){const{isOrthographicCamera:Ie}=Z;if(Ie||A)H.scale&&(Array.isArray(H.scale)?H.scale instanceof Me?Ue.current.scale.copy(H.scale.clone().divideScalar(1)):Ue.current.scale.set(1/H.scale[0],1/H.scale[1],1/H.scale[2]):Ue.current.scale.setScalar(1/H.scale));else{const He=(h||10)/400,it=Ge.clientWidth*He,st=Ge.clientHeight*He;Ue.current.scale.set(it,st,1)}ke.current=!0}}}else{const Ge=ce.children[0];if(Ge!=null&&Ge.clientWidth&&Ge!=null&&Ge.clientHeight){const Ie=1/le.factor,He=Ge.clientWidth*Ie,it=Ge.clientHeight*Ie;Ue.current.scale.set(He,it,1),ke.current=!0}Ue.current.lookAt(at.camera.position)}});const ft=de.useMemo(()=>({vertexShader:g?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[g]);return un("group",{...H,ref:$e,children:y&&!qe&&Bh("mesh",{castShadow:S,receiveShadow:C,ref:Ue,children:[A||un("planeGeometry",{}),M||un("shaderMaterial",{side:up,vertexShader:ft.vertexShader,fragmentShader:ft.fragmentShader})]})})});function F4(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}const II=0,vIe=1,_Ie=new Me,$W=new N4,hN=new c_,CW=new Me,DA=new Rm;class MW{constructor(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new AW,this.unassigned=new AW,this.vertices=[]}setFromPoints(e){if(e.length>=4){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.vertices.push(new yIe(e[t]));this.compute()}return this}setFromObject(e){const t=[];return e.updateMatrixWorld(!0),e.traverse(function(r){const s=r.geometry;if(s!==void 0){if(s.isGeometry){console.error("THREE.ConvexHull no longer supports Geometry. Use THREE.BufferGeometry instead.");return}else if(s.isBufferGeometry){const o=s.attributes.position;if(o!==void 0)for(let l=0,u=o.count;l<u;l++){const h=new Me;h.fromBufferAttribute(o,l).applyMatrix4(r.matrixWorld),t.push(h)}}}}),this.setFromPoints(t)}containsPoint(e){const t=this.faces;for(let r=0,s=t.length;r<s;r++)if(t[r].distanceToPoint(e)>this.tolerance)return!1;return!0}intersectRay(e,t){const r=this.faces;let s=-1/0,o=1/0;for(let l=0,u=r.length;l<u;l++){const h=r[l],f=h.distanceToPoint(e.origin),g=h.normal.dot(e.direction);if(f>0&&g>=0)return null;const y=g!==0?-f/g:0;if(!(y<=0)&&(g>0?o=Math.min(y,o):s=Math.max(y,s),s>o))return null}return s!==-1/0?e.at(s,t):e.at(o,t),t}intersectsRay(e){return this.intersectRay(e,_Ie)!==null}makeEmpty(){return this.faces=[],this.vertices=[],this}addVertexToFace(e,t){return e.face=t,t.outside===null?this.assigned.append(e):this.assigned.insertBefore(t.outside,e),t.outside=e,this}removeVertexFromFace(e,t){return e===t.outside&&(e.next!==null&&e.next.face===t?t.outside=e.next:t.outside=null),this.assigned.remove(e),this}removeAllVerticesFromFace(e){if(e.outside!==null){const t=e.outside;let r=e.outside;for(;r.next!==null&&r.next.face===e;)r=r.next;return this.assigned.removeSubList(t,r),t.prev=r.next=null,e.outside=null,t}}deleteFaceVertices(e,t){const r=this.removeAllVerticesFromFace(e);if(r!==void 0)if(t===void 0)this.unassigned.appendChain(r);else{let s=r;do{const o=s.next;t.distanceToPoint(s.point)>this.tolerance?this.addVertexToFace(s,t):this.unassigned.append(s),s=o}while(s!==null)}return this}resolveUnassignedPoints(e){if(this.unassigned.isEmpty()===!1){let t=this.unassigned.first();do{const r=t.next;let s=this.tolerance,o=null;for(let l=0;l<e.length;l++){const u=e[l];if(u.mark===II){const h=u.distanceToPoint(t.point);if(h>s&&(s=h,o=u),s>1e3*this.tolerance)break}}o!==null&&this.addVertexToFace(t,o),t=r}while(t!==null)}return this}computeExtremes(){const e=new Me,t=new Me,r=[],s=[];for(let o=0;o<3;o++)r[o]=s[o]=this.vertices[0];e.copy(this.vertices[0].point),t.copy(this.vertices[0].point);for(let o=0,l=this.vertices.length;o<l;o++){const u=this.vertices[o],h=u.point;for(let f=0;f<3;f++)h.getComponent(f)<e.getComponent(f)&&(e.setComponent(f,h.getComponent(f)),r[f]=u);for(let f=0;f<3;f++)h.getComponent(f)>t.getComponent(f)&&(t.setComponent(f,h.getComponent(f)),s[f]=u)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(e.x),Math.abs(t.x))+Math.max(Math.abs(e.y),Math.abs(t.y))+Math.max(Math.abs(e.z),Math.abs(t.z))),{min:r,max:s}}computeInitialHull(){const e=this.vertices,t=this.computeExtremes(),r=t.min,s=t.max;let o=0,l=0;for(let b=0;b<3;b++){const S=s[b].point.getComponent(b)-r[b].point.getComponent(b);S>o&&(o=S,l=b)}const u=r[l],h=s[l];let f,g;o=0,$W.set(u.point,h.point);for(let b=0,S=this.vertices.length;b<S;b++){const C=e[b];if(C!==u&&C!==h){$W.closestPointToPoint(C.point,!0,CW);const M=CW.distanceToSquared(C.point);M>o&&(o=M,f=C)}}o=-1,hN.setFromCoplanarPoints(u.point,h.point,f.point);for(let b=0,S=this.vertices.length;b<S;b++){const C=e[b];if(C!==u&&C!==h&&C!==f){const M=Math.abs(hN.distanceToPoint(C.point));M>o&&(o=M,g=C)}}const y=[];if(hN.distanceToPoint(g.point)<0){y.push(Qg.create(u,h,f),Qg.create(g,h,u),Qg.create(g,f,h),Qg.create(g,u,f));for(let b=0;b<3;b++){const S=(b+1)%3;y[b+1].getEdge(2).setTwin(y[0].getEdge(S)),y[b+1].getEdge(1).setTwin(y[S+1].getEdge(0))}}else{y.push(Qg.create(u,f,h),Qg.create(g,u,h),Qg.create(g,h,f),Qg.create(g,f,u));for(let b=0;b<3;b++){const S=(b+1)%3;y[b+1].getEdge(2).setTwin(y[0].getEdge((3-b)%3)),y[b+1].getEdge(0).setTwin(y[S+1].getEdge(1))}}for(let b=0;b<4;b++)this.faces.push(y[b]);for(let b=0,S=e.length;b<S;b++){const C=e[b];if(C!==u&&C!==h&&C!==f&&C!==g){o=this.tolerance;let M=null;for(let A=0;A<4;A++){const k=this.faces[A].distanceToPoint(C.point);k>o&&(o=k,M=this.faces[A])}M!==null&&this.addVertexToFace(C,M)}}return this}reindexFaces(){const e=[];for(let t=0;t<this.faces.length;t++){const r=this.faces[t];r.mark===II&&e.push(r)}return this.faces=e,this}nextVertexToAdd(){if(this.assigned.isEmpty()===!1){let e,t=0;const r=this.assigned.first().face;let s=r.outside;do{const o=r.distanceToPoint(s.point);o>t&&(t=o,e=s),s=s.next}while(s!==null&&s.face===r);return e}}computeHorizon(e,t,r,s){this.deleteFaceVertices(r),r.mark=vIe;let o;t===null?o=t=r.getEdge(0):o=t.next;do{const l=o.twin,u=l.face;u.mark===II&&(u.distanceToPoint(e)>this.tolerance?this.computeHorizon(e,l,u,s):s.push(o)),o=o.next}while(o!==t);return this}addAdjoiningFace(e,t){const r=Qg.create(e,t.tail(),t.head());return this.faces.push(r),r.getEdge(-1).setTwin(t.twin),r.getEdge(0)}addNewFaces(e,t){this.newFaces=[];let r=null,s=null;for(let o=0;o<t.length;o++){const l=t[o],u=this.addAdjoiningFace(e,l);r===null?r=u:u.next.setTwin(s),this.newFaces.push(u.face),s=u}return r.next.setTwin(s),this}addVertexToHull(e){const t=[];return this.unassigned.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,t),this.addNewFaces(e,t),this.resolveUnassignedPoints(this.newFaces),this}cleanup(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}compute(){let e;for(this.computeInitialHull();(e=this.nextVertexToAdd())!==void 0;)this.addVertexToHull(e);return this.reindexFaces(),this.cleanup(),this}}class Qg{constructor(){this.normal=new Me,this.midpoint=new Me,this.area=0,this.constant=0,this.outside=null,this.mark=II,this.edge=null}static create(e,t,r){const s=new Qg,o=new dN(e,s),l=new dN(t,s),u=new dN(r,s);return o.next=u.prev=l,l.next=o.prev=u,u.next=l.prev=o,s.edge=o,s.compute()}getEdge(e){let t=this.edge;for(;e>0;)t=t.next,e--;for(;e<0;)t=t.prev,e++;return t}compute(){const e=this.edge.tail(),t=this.edge.head(),r=this.edge.next.head();return DA.set(e.point,t.point,r.point),DA.getNormal(this.normal),DA.getMidpoint(this.midpoint),this.area=DA.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(e){return this.normal.dot(e)-this.constant}}class dN{constructor(e,t){this.vertex=e,this.prev=null,this.next=null,this.twin=null,this.face=t}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const e=this.head(),t=this.tail();return t!==null?t.point.distanceTo(e.point):-1}lengthSquared(){const e=this.head(),t=this.tail();return t!==null?t.point.distanceToSquared(e.point):-1}setTwin(e){return this.twin=e,e.twin=this,this}}class yIe{constructor(e){this.point=e,this.prev=null,this.next=null,this.face=null}}class AW{constructor(){this.head=null,this.tail=null}first(){return this.head}last(){return this.tail}clear(){return this.head=this.tail=null,this}insertBefore(e,t){return t.prev=e.prev,t.next=e,t.prev===null?this.head=t:t.prev.next=t,e.prev=t,this}insertAfter(e,t){return t.prev=e,t.next=e.next,t.next===null?this.tail=t:t.next.prev=t,e.next=t,this}append(e){return this.head===null?this.head=e:this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e,this}appendChain(e){for(this.head===null?this.head=e:this.tail.next=e,e.prev=this.tail;e.next!==null;)e=e.next;return this.tail=e,this}remove(e){return e.prev===null?this.head=e.next:e.prev.next=e.next,e.next===null?this.tail=e.prev:e.next.prev=e.prev,this}removeSubList(e,t){return e.prev===null?this.head=t.next:e.prev.next=t.next,t.next===null?this.tail=e.prev:t.next.prev=e.prev,this}isEmpty(){return this.head===null}}class IW extends ui{constructor(e=[]){super();const t=[],r=[];MW===void 0&&console.error("THREE.ConvexGeometry: ConvexGeometry relies on ConvexHull");const s=new MW().setFromPoints(e).faces;for(let o=0;o<s.length;o++){const l=s[o];let u=l.edge;do{const h=u.head().point;t.push(h.x,h.y,h.z),r.push(l.normal.x,l.normal.y,l.normal.z),u=u.next}while(u!==l.edge)}this.setAttribute("position",new ur(t,3)),this.setAttribute("normal",new ur(r,3))}}function Di(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const iee=(n,e)=>{const t=n[0].index!==null,r=new Set(Object.keys(n[0].attributes)),s=new Set(Object.keys(n[0].morphAttributes)),o={},l={},u=n[0].morphTargetsRelative,h=new ui;let f=0;if(n.forEach((g,y)=>{let b=0;if(t!==(g.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let S in g.attributes){if(!r.has(S))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+'. All geometries must have compatible attributes; make sure "'+S+'" attribute exists among all geometries, or in none of them.'),null;o[S]===void 0&&(o[S]=[]),o[S].push(g.attributes[S]),b++}if(b!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+". Make sure all geometries have the same number of attributes."),null;if(u!==g.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let S in g.morphAttributes){if(!s.has(S))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+".  .morphAttributes must be consistent throughout all geometries."),null;l[S]===void 0&&(l[S]=[]),l[S].push(g.morphAttributes[S])}if(h.userData.mergedUserData=h.userData.mergedUserData||[],h.userData.mergedUserData.push(g.userData),e){let S;if(g.index)S=g.index.count;else if(g.attributes.position!==void 0)S=g.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+y+". The geometry must have either an index or a position attribute"),null;h.addGroup(f,S,y),f+=S}}),t){let g=0;const y=[];n.forEach(b=>{const S=b.index;for(let C=0;C<S.count;++C)y.push(S.getX(C)+g);g+=b.attributes.position.count}),h.setIndex(y)}for(let g in o){const y=RW(o[g]);if(!y)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+g+" attribute."),null;h.setAttribute(g,y)}for(let g in l){const y=l[g][0].length;if(y===0)break;h.morphAttributes=h.morphAttributes||{},h.morphAttributes[g]=[];for(let b=0;b<y;++b){const S=[];for(let M=0;M<l[g].length;++M)S.push(l[g][M][b]);const C=RW(S);if(!C)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+g+" morphAttribute."),null;h.morphAttributes[g].push(C)}}return h},RW=n=>{let e,t,r,s=0;if(n.forEach(o=>{if(e===void 0&&(e=o.array.constructor),e!==o.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=o.itemSize),t!==o.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=o.normalized),r!==o.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;s+=o.array.length}),e&&t){const o=new e(s);let l=0;return n.forEach(u=>{o.set(u.array,l),l+=u.array.length}),new zo(o,t,r)}},kW=(n,e)=>(n%e+e)%e;class bIe extends Ym{constructor(e,t){super(),Di(this,"object",void 0),Di(this,"domElement",void 0),Di(this,"enabled",!0),Di(this,"target",new Me),Di(this,"minDistance",0),Di(this,"maxDistance",1/0),Di(this,"minZoom",0),Di(this,"maxZoom",1/0),Di(this,"minPolarAngle",0),Di(this,"maxPolarAngle",Math.PI),Di(this,"minAzimuthAngle",-1/0),Di(this,"maxAzimuthAngle",1/0),Di(this,"enableDamping",!1),Di(this,"dampingFactor",.05),Di(this,"enableZoom",!0),Di(this,"zoomSpeed",1),Di(this,"enableRotate",!0),Di(this,"rotateSpeed",1),Di(this,"enablePan",!0),Di(this,"panSpeed",1),Di(this,"screenSpacePanning",!0),Di(this,"keyPanSpeed",7),Di(this,"autoRotate",!1),Di(this,"autoRotateSpeed",2),Di(this,"reverseOrbit",!1),Di(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Di(this,"mouseButtons",{LEFT:d1.ROTATE,MIDDLE:d1.DOLLY,RIGHT:d1.PAN}),Di(this,"touches",{ONE:f1.ROTATE,TWO:f1.DOLLY_PAN}),Di(this,"target0",void 0),Di(this,"position0",void 0),Di(this,"zoom0",void 0),Di(this,"_domElementKeyEvents",null),Di(this,"getPolarAngle",void 0),Di(this,"getAzimuthalAngle",void 0),Di(this,"setPolarAngle",void 0),Di(this,"setAzimuthalAngle",void 0),Di(this,"getDistance",void 0),Di(this,"listenToKeyEvents",void 0),Di(this,"saveState",void 0),Di(this,"reset",void 0),Di(this,"update",void 0),Di(this,"connect",void 0),Di(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof el?this.object.zoom:1,this.getPolarAngle=()=>g.phi,this.getAzimuthalAngle=()=>g.theta,this.setPolarAngle=te=>{let me=kW(te,2*Math.PI),Re=g.phi;Re<0&&(Re+=2*Math.PI),me<0&&(me+=2*Math.PI);let Fe=Math.abs(me-Re);2*Math.PI-Fe<Fe&&(me<Re?me+=2*Math.PI:Re+=2*Math.PI),y.phi=me-Re,r.update()},this.setAzimuthalAngle=te=>{let me=kW(te,2*Math.PI),Re=g.theta;Re<0&&(Re+=2*Math.PI),me<0&&(me+=2*Math.PI);let Fe=Math.abs(me-Re);2*Math.PI-Fe<Fe&&(me<Re?me+=2*Math.PI:Re+=2*Math.PI),y.theta=me-Re,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=te=>{te.addEventListener("keydown",Be),this._domElementKeyEvents=te},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object instanceof el?r.object.zoom:1},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object instanceof el&&(r.object.zoom=r.zoom0,r.object.updateProjectionMatrix()),r.dispatchEvent(s),r.update(),h=u.NONE},this.update=(()=>{const te=new Me,me=new wl().setFromUnitVectors(e.up,new Me(0,1,0)),Re=me.clone().invert(),Fe=new Me,bt=new wl,ze=2*Math.PI;return function(){const Pt=r.object.position;te.copy(Pt).sub(r.target),te.applyQuaternion(me),g.setFromVector3(te),r.autoRotate&&h===u.NONE&&q(oe()),r.enableDamping?(g.theta+=y.theta*r.dampingFactor,g.phi+=y.phi*r.dampingFactor):(g.theta+=y.theta,g.phi+=y.phi);let lt=r.minAzimuthAngle,Gt=r.maxAzimuthAngle;return isFinite(lt)&&isFinite(Gt)&&(lt<-Math.PI?lt+=ze:lt>Math.PI&&(lt-=ze),Gt<-Math.PI?Gt+=ze:Gt>Math.PI&&(Gt-=ze),lt<=Gt?g.theta=Math.max(lt,Math.min(Gt,g.theta)):g.theta=g.theta>(lt+Gt)/2?Math.max(lt,g.theta):Math.min(Gt,g.theta)),g.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,g.phi)),g.makeSafe(),g.radius*=b,g.radius=Math.max(r.minDistance,Math.min(r.maxDistance,g.radius)),r.enableDamping===!0?r.target.addScaledVector(S,r.dampingFactor):r.target.add(S),te.setFromSpherical(g),te.applyQuaternion(Re),Pt.copy(r.target).add(te),r.object.lookAt(r.target),r.enableDamping===!0?(y.theta*=1-r.dampingFactor,y.phi*=1-r.dampingFactor,S.multiplyScalar(1-r.dampingFactor)):(y.set(0,0,0),S.set(0,0,0)),b=1,C||Fe.distanceToSquared(r.object.position)>f||8*(1-bt.dot(r.object.quaternion))>f?(r.dispatchEvent(s),Fe.copy(r.object.position),bt.copy(r.object.quaternion),C=!1,!0):!1}})(),this.connect=te=>{te===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=te,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",wt),r.domElement.addEventListener("pointerdown",kt),r.domElement.addEventListener("pointercancel",Ct),r.domElement.addEventListener("wheel",re)},this.dispose=()=>{var te,me,Re,Fe,bt,ze;(te=r.domElement)===null||te===void 0||te.removeEventListener("contextmenu",wt),(me=r.domElement)===null||me===void 0||me.removeEventListener("pointerdown",kt),(Re=r.domElement)===null||Re===void 0||Re.removeEventListener("pointercancel",Ct),(Fe=r.domElement)===null||Fe===void 0||Fe.removeEventListener("wheel",re),(bt=r.domElement)===null||bt===void 0||bt.ownerDocument.removeEventListener("pointermove",vt),(ze=r.domElement)===null||ze===void 0||ze.ownerDocument.removeEventListener("pointerup",Mt),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Be)};const r=this,s={type:"change"},o={type:"start"},l={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=u.NONE;const f=1e-6,g=new jP,y=new jP;let b=1;const S=new Me;let C=!1;const M=new Kt,A=new Kt,k=new Kt,O=new Kt,P=new Kt,D=new Kt,U=new Kt,H=new Kt,V=new Kt,z=[],Z={};function oe(){return 2*Math.PI/60/60*r.autoRotateSpeed}function ue(){return Math.pow(.95,r.zoomSpeed)}function q(te){r.reverseOrbit?y.theta+=te:y.theta-=te}function ae(te){r.reverseOrbit?y.phi+=te:y.phi-=te}const le=(()=>{const te=new Me;return function(me,Re){te.setFromMatrixColumn(Re,0),te.multiplyScalar(-me),S.add(te)}})(),ce=(()=>{const te=new Me;return function(me,Re){r.screenSpacePanning===!0?te.setFromMatrixColumn(Re,1):(te.setFromMatrixColumn(Re,0),te.crossVectors(r.object.up,te)),te.multiplyScalar(me),S.add(te)}})(),ge=(()=>{const te=new Me;return function(me,Re){const Fe=r.domElement;if(Fe&&r.object instanceof el&&r.object.isPerspectiveCamera){const bt=r.object.position;te.copy(bt).sub(r.target);let ze=te.length();ze*=Math.tan(r.object.fov/2*Math.PI/180),le(2*me*ze/Fe.clientHeight,r.object.matrix),ce(2*Re*ze/Fe.clientHeight,r.object.matrix)}else Fe&&r.object instanceof dv&&r.object.isOrthographicCamera?(le(me*(r.object.right-r.object.left)/r.object.zoom/Fe.clientWidth,r.object.matrix),ce(Re*(r.object.top-r.object.bottom)/r.object.zoom/Fe.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function $e(te){r.object instanceof el&&r.object.isPerspectiveCamera?b/=te:r.object instanceof dv&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*te)),r.object.updateProjectionMatrix(),C=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function K(te){r.object instanceof el&&r.object.isPerspectiveCamera?b*=te:r.object instanceof dv&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/te)),r.object.updateProjectionMatrix(),C=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ie(te){M.set(te.clientX,te.clientY)}function se(te){U.set(te.clientX,te.clientY)}function fe(te){O.set(te.clientX,te.clientY)}function Se(te){A.set(te.clientX,te.clientY),k.subVectors(A,M).multiplyScalar(r.rotateSpeed);const me=r.domElement;me&&(q(2*Math.PI*k.x/me.clientHeight),ae(2*Math.PI*k.y/me.clientHeight)),M.copy(A),r.update()}function Ue(te){H.set(te.clientX,te.clientY),V.subVectors(H,U),V.y>0?$e(ue()):V.y<0&&K(ue()),U.copy(H),r.update()}function ke(te){P.set(te.clientX,te.clientY),D.subVectors(P,O).multiplyScalar(r.panSpeed),ge(D.x,D.y),O.copy(P),r.update()}function qe(te){te.deltaY<0?K(ue()):te.deltaY>0&&$e(ue()),r.update()}function we(te){let me=!1;switch(te.code){case r.keys.UP:ge(0,r.keyPanSpeed),me=!0;break;case r.keys.BOTTOM:ge(0,-r.keyPanSpeed),me=!0;break;case r.keys.LEFT:ge(r.keyPanSpeed,0),me=!0;break;case r.keys.RIGHT:ge(-r.keyPanSpeed,0),me=!0;break}me&&(te.preventDefault(),r.update())}function Ze(){if(z.length==1)M.set(z[0].pageX,z[0].pageY);else{const te=.5*(z[0].pageX+z[1].pageX),me=.5*(z[0].pageY+z[1].pageY);M.set(te,me)}}function et(){if(z.length==1)O.set(z[0].pageX,z[0].pageY);else{const te=.5*(z[0].pageX+z[1].pageX),me=.5*(z[0].pageY+z[1].pageY);O.set(te,me)}}function ft(){const te=z[0].pageX-z[1].pageX,me=z[0].pageY-z[1].pageY,Re=Math.sqrt(te*te+me*me);U.set(0,Re)}function at(){r.enableZoom&&ft(),r.enablePan&&et()}function Ge(){r.enableZoom&&ft(),r.enableRotate&&Ze()}function Ie(te){if(z.length==1)A.set(te.pageX,te.pageY);else{const Re=Q(te),Fe=.5*(te.pageX+Re.x),bt=.5*(te.pageY+Re.y);A.set(Fe,bt)}k.subVectors(A,M).multiplyScalar(r.rotateSpeed);const me=r.domElement;me&&(q(2*Math.PI*k.x/me.clientHeight),ae(2*Math.PI*k.y/me.clientHeight)),M.copy(A)}function He(te){if(z.length==1)P.set(te.pageX,te.pageY);else{const me=Q(te),Re=.5*(te.pageX+me.x),Fe=.5*(te.pageY+me.y);P.set(Re,Fe)}D.subVectors(P,O).multiplyScalar(r.panSpeed),ge(D.x,D.y),O.copy(P)}function it(te){const me=Q(te),Re=te.pageX-me.x,Fe=te.pageY-me.y,bt=Math.sqrt(Re*Re+Fe*Fe);H.set(0,bt),V.set(0,Math.pow(H.y/U.y,r.zoomSpeed)),$e(V.y),U.copy(H)}function st(te){r.enableZoom&&it(te),r.enablePan&&He(te)}function It(te){r.enableZoom&&it(te),r.enableRotate&&Ie(te)}function kt(te){if(r.enabled!==!1){if(z.length===0){var me,Re;(me=r.domElement)===null||me===void 0||me.ownerDocument.addEventListener("pointermove",vt),(Re=r.domElement)===null||Re===void 0||Re.ownerDocument.addEventListener("pointerup",Mt)}Ke(te),te.pointerType==="touch"?mt(te):gt(te)}}function vt(te){r.enabled!==!1&&(te.pointerType==="touch"?yt(te):Ee(te))}function Mt(te){if(Qe(te),z.length===0){var me,Re,Fe;(me=r.domElement)===null||me===void 0||me.releasePointerCapture(te.pointerId),(Re=r.domElement)===null||Re===void 0||Re.ownerDocument.removeEventListener("pointermove",vt),(Fe=r.domElement)===null||Fe===void 0||Fe.ownerDocument.removeEventListener("pointerup",Mt)}r.dispatchEvent(l),h=u.NONE}function Ct(te){Qe(te)}function gt(te){let me;switch(te.button){case 0:me=r.mouseButtons.LEFT;break;case 1:me=r.mouseButtons.MIDDLE;break;case 2:me=r.mouseButtons.RIGHT;break;default:me=-1}switch(me){case d1.DOLLY:if(r.enableZoom===!1)return;se(te),h=u.DOLLY;break;case d1.ROTATE:if(te.ctrlKey||te.metaKey||te.shiftKey){if(r.enablePan===!1)return;fe(te),h=u.PAN}else{if(r.enableRotate===!1)return;ie(te),h=u.ROTATE}break;case d1.PAN:if(te.ctrlKey||te.metaKey||te.shiftKey){if(r.enableRotate===!1)return;ie(te),h=u.ROTATE}else{if(r.enablePan===!1)return;fe(te),h=u.PAN}break;default:h=u.NONE}h!==u.NONE&&r.dispatchEvent(o)}function Ee(te){if(r.enabled!==!1)switch(h){case u.ROTATE:if(r.enableRotate===!1)return;Se(te);break;case u.DOLLY:if(r.enableZoom===!1)return;Ue(te);break;case u.PAN:if(r.enablePan===!1)return;ke(te);break}}function re(te){r.enabled===!1||r.enableZoom===!1||h!==u.NONE&&h!==u.ROTATE||(te.preventDefault(),r.dispatchEvent(o),qe(te),r.dispatchEvent(l))}function Be(te){r.enabled===!1||r.enablePan===!1||we(te)}function mt(te){switch(Le(te),z.length){case 1:switch(r.touches.ONE){case f1.ROTATE:if(r.enableRotate===!1)return;Ze(),h=u.TOUCH_ROTATE;break;case f1.PAN:if(r.enablePan===!1)return;et(),h=u.TOUCH_PAN;break;default:h=u.NONE}break;case 2:switch(r.touches.TWO){case f1.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;at(),h=u.TOUCH_DOLLY_PAN;break;case f1.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ge(),h=u.TOUCH_DOLLY_ROTATE;break;default:h=u.NONE}break;default:h=u.NONE}h!==u.NONE&&r.dispatchEvent(o)}function yt(te){switch(Le(te),h){case u.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ie(te),r.update();break;case u.TOUCH_PAN:if(r.enablePan===!1)return;He(te),r.update();break;case u.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;st(te),r.update();break;case u.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;It(te),r.update();break;default:h=u.NONE}}function wt(te){r.enabled!==!1&&te.preventDefault()}function Ke(te){z.push(te)}function Qe(te){delete Z[te.pointerId];for(let me=0;me<z.length;me++)if(z[me].pointerId==te.pointerId){z.splice(me,1);return}}function Le(te){let me=Z[te.pointerId];me===void 0&&(me=new Kt,Z[te.pointerId]=me),me.set(te.pageX,te.pageY)}function Q(te){const me=te.pointerId===z[0].pointerId?z[1]:z[0];return Z[me.pointerId]}t!==void 0&&this.connect(t),this.update()}}const Tx=new Me;function cg(n,e,t,r,s,o){const l=2*Math.PI*s/4,u=Math.max(o-2*s,0),h=Math.PI/4;Tx.copy(e),Tx[r]=0,Tx.normalize();const f=.5*l/(l+u),g=1-Tx.angleTo(n)/h;return Math.sign(Tx[t])===1?g*f:u/(l+u)+f+f*(1-g)}class TIe extends mu{constructor(e=1,t=1,r=1,s=2,o=.1){if(s=s*2+1,o=Math.min(e/2,t/2,r/2,o),super(1,1,1,s,s,s),s===1)return;const l=this.toNonIndexed();this.index=null,this.attributes.position=l.attributes.position,this.attributes.normal=l.attributes.normal,this.attributes.uv=l.attributes.uv;const u=new Me,h=new Me,f=new Me(e,t,r).divideScalar(2).subScalar(o),g=this.attributes.position.array,y=this.attributes.normal.array,b=this.attributes.uv.array,S=g.length/6,C=new Me,M=.5/s;for(let A=0,k=0;A<g.length;A+=3,k+=2)switch(u.fromArray(g,A),h.copy(u),h.x-=Math.sign(h.x)*M,h.y-=Math.sign(h.y)*M,h.z-=Math.sign(h.z)*M,h.normalize(),g[A+0]=f.x*Math.sign(u.x)+h.x*o,g[A+1]=f.y*Math.sign(u.y)+h.y*o,g[A+2]=f.z*Math.sign(u.z)+h.z*o,y[A+0]=h.x,y[A+1]=h.y,y[A+2]=h.z,Math.floor(A/S)){case 0:C.set(1,0,0),b[k+0]=cg(C,h,"z","y",o,r),b[k+1]=1-cg(C,h,"y","z",o,t);break;case 1:C.set(-1,0,0),b[k+0]=1-cg(C,h,"z","y",o,r),b[k+1]=1-cg(C,h,"y","z",o,t);break;case 2:C.set(0,1,0),b[k+0]=1-cg(C,h,"x","z",o,e),b[k+1]=cg(C,h,"z","x",o,r);break;case 3:C.set(0,-1,0),b[k+0]=1-cg(C,h,"x","z",o,e),b[k+1]=1-cg(C,h,"z","x",o,r);break;case 4:C.set(0,0,1),b[k+0]=1-cg(C,h,"x","y",o,e),b[k+1]=1-cg(C,h,"y","x",o,t);break;case 5:C.set(0,0,-1),b[k+0]=cg(C,h,"x","y",o,e),b[k+1]=1-cg(C,h,"y","x",o,t);break}}}const OW=new p0,PA=new Me;class z4 extends $2{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],r=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(r),this.setAttribute("position",new ur(e,3)),this.setAttribute("uv",new ur(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,r=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),r.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const r=new AR(t,6,1);return this.setAttribute("instanceStart",new Om(r,3,0)),this.setAttribute("instanceEnd",new Om(r,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const r=new AR(t,6,1);return this.setAttribute("instanceColorStart",new Om(r,3,0)),this.setAttribute("instanceColorEnd",new Om(r,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new S4(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new p0);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),OW.setFromBufferAttribute(t),this.boundingBox.union(OW))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xv),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const r=this.boundingSphere.center;this.boundingBox.getCenter(r);let s=0;for(let o=0,l=e.count;o<l;o++)PA.fromBufferAttribute(e,o),s=Math.max(s,r.distanceToSquared(PA)),PA.fromBufferAttribute(t,o),s=Math.max(s,r.distanceToSquared(PA));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class see extends z4{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,r=new Float32Array(2*t);for(let s=0;s<t;s+=3)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5];return super.setPositions(r),this}setColors(e){const t=e.length-3,r=new Float32Array(2*t);for(let s=0;s<t;s+=3)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5];return super.setColors(r),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}Xn.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Kt(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};ap.line={uniforms:NC.merge([Xn.common,Xn.fog,Xn.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class U4 extends xd{constructor(e){super({type:"LineMaterial",uniforms:NC.clone(ap.line.uniforms),vertexShader:ap.line.vertexShader,fragmentShader:ap.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const LW=new Me,NW=new Me,Qd=new Ts,Zd=new Ts,Y0=new Ts,fN=new Me,pN=new ei,If=new N4,DW=new Me,BA=new p0,FA=new xv,X0=new Ts;let iv,QP,oee,G1;function PW(n,e,t){return X0.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),X0.multiplyScalar(1/X0.w),X0.x=G1/t.width,X0.y=G1/t.height,X0.applyMatrix4(n.projectionMatrixInverse),X0.multiplyScalar(1/X0.w),Math.abs(Math.max(X0.x,X0.y))}function SIe(n,e){for(let t=0,r=QP.count;t<r;t++){If.start.fromBufferAttribute(QP,t),If.end.fromBufferAttribute(oee,t);const s=new Me,o=new Me;iv.distanceSqToSegment(If.start,If.end,o,s),o.distanceTo(s)<G1*.5&&e.push({point:o,pointOnLine:s,distance:iv.origin.distanceTo(o),object:n,face:null,faceIndex:t,uv:null,uv2:null})}}function wIe(n,e,t){const r=e.projectionMatrix,s=n.material.resolution,o=n.matrixWorld,l=n.geometry,u=l.attributes.instanceStart,h=l.attributes.instanceEnd,f=-e.near;iv.at(1,Y0),Y0.w=1,Y0.applyMatrix4(e.matrixWorldInverse),Y0.applyMatrix4(r),Y0.multiplyScalar(1/Y0.w),Y0.x*=s.x/2,Y0.y*=s.y/2,Y0.z=0,fN.copy(Y0),pN.multiplyMatrices(e.matrixWorldInverse,o);for(let g=0,y=u.count;g<y;g++){if(Qd.fromBufferAttribute(u,g),Zd.fromBufferAttribute(h,g),Qd.w=1,Zd.w=1,Qd.applyMatrix4(pN),Zd.applyMatrix4(pN),Qd.z>f&&Zd.z>f)continue;if(Qd.z>f){const A=Qd.z-Zd.z,k=(Qd.z-f)/A;Qd.lerp(Zd,k)}else if(Zd.z>f){const A=Zd.z-Qd.z,k=(Zd.z-f)/A;Zd.lerp(Qd,k)}Qd.applyMatrix4(r),Zd.applyMatrix4(r),Qd.multiplyScalar(1/Qd.w),Zd.multiplyScalar(1/Zd.w),Qd.x*=s.x/2,Qd.y*=s.y/2,Zd.x*=s.x/2,Zd.y*=s.y/2,If.start.copy(Qd),If.start.z=0,If.end.copy(Zd),If.end.z=0;const b=If.closestPointToPointParameter(fN,!0);If.at(b,DW);const S=NQ.lerp(Qd.z,Zd.z,b),C=S>=-1&&S<=1,M=fN.distanceTo(DW)<G1*.5;if(C&&M){If.start.fromBufferAttribute(u,g),If.end.fromBufferAttribute(h,g),If.start.applyMatrix4(o),If.end.applyMatrix4(o);const A=new Me,k=new Me;iv.distanceSqToSegment(If.start,If.end,k,A),t.push({point:k,pointOnLine:A,distance:iv.origin.distanceTo(k),object:n,face:null,faceIndex:g,uv:null,uv2:null})}}}class aee extends Hn{constructor(e=new z4,t=new U4({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,r=e.attributes.instanceEnd,s=new Float32Array(2*t.count);for(let l=0,u=0,h=t.count;l<h;l++,u+=2)LW.fromBufferAttribute(t,l),NW.fromBufferAttribute(r,l),s[u]=u===0?0:s[u-1],s[u+1]=s[u]+LW.distanceTo(NW);const o=new AR(s,2,1);return e.setAttribute("instanceDistanceStart",new Om(o,1,0)),e.setAttribute("instanceDistanceEnd",new Om(o,1,1)),this}raycast(e,t){const r=this.material.worldUnits,s=e.camera;s===null&&!r&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const o=e.params.Line2!==void 0&&e.params.Line2.threshold||0;iv=e.ray;const l=this.matrixWorld,u=this.geometry,h=this.material;G1=h.linewidth+o,QP=u.attributes.instanceStart,oee=u.attributes.instanceEnd,u.boundingSphere===null&&u.computeBoundingSphere(),FA.copy(u.boundingSphere).applyMatrix4(l);let f;if(r)f=G1*.5;else{const y=Math.max(s.near,FA.distanceToPoint(iv.origin));f=PW(s,y,h.resolution)}if(FA.radius+=f,iv.intersectsSphere(FA)===!1)return;u.boundingBox===null&&u.computeBoundingBox(),BA.copy(u.boundingBox).applyMatrix4(l);let g;if(r)g=G1*.5;else{const y=Math.max(s.near,BA.distanceToPoint(iv.origin));g=PW(s,y,h.resolution)}BA.expandByScalar(g),iv.intersectsBox(BA)!==!1&&(r?SIe(this,t):wIe(this,s,t))}}class EIe extends aee{constructor(e=new see,t=new U4({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const xIe=de.forwardRef(function({follow:n=!0,lockX:e=!1,lockY:t=!1,lockZ:r=!1,...s},o){const l=de.useRef();return Km(({camera:u})=>{if(!n||!l.current)return;const h=l.current.rotation.clone();u.getWorldQuaternion(l.current.quaternion),e&&(l.current.rotation.x=h.x),t&&(l.current.rotation.y=h.y),r&&(l.current.rotation.z=h.z)}),un("group",{ref:F4([l,o]),...s})}),$Ie=de.forwardRef(function({points:n,color:e="black",vertexColors:t,linewidth:r,lineWidth:s,segments:o,dashed:l,...u},h){const f=nf(S=>S.size),g=de.useMemo(()=>o?new aee:new EIe,[o]),[y]=de.useState(()=>new U4),b=de.useMemo(()=>{const S=o?new z4:new see,C=n.map(M=>{const A=Array.isArray(M);return M instanceof Me?[M.x,M.y,M.z]:M instanceof Kt?[M.x,M.y,0]:A&&M.length===3?[M[0],M[1],M[2]]:A&&M.length===2?[M[0],M[1],0]:M});if(S.setPositions(C.flat()),t){const M=t.map(A=>A instanceof Fn?A.toArray():A);S.setColors(M.flat())}return S},[n,o,t]);return de.useLayoutEffect(()=>{g.computeLineDistances()},[n,g]),de.useLayoutEffect(()=>{l?y.defines.USE_DASH="":delete y.defines.USE_DASH,y.needsUpdate=!0},[l,y]),de.useEffect(()=>()=>b.dispose(),[b]),Bh("primitive",{object:g,ref:h,...u,children:[un("primitive",{object:b,attach:"geometry"}),un("primitive",{object:y,attach:"material",color:e,vertexColors:!!t,resolution:[f.width,f.height],linewidth:r??s,dashed:l,...u})]})});function CIe(){var n=Object.create(null);function e(s,o){var l=s.id,u=s.name,h=s.dependencies;h===void 0&&(h=[]);var f=s.init;f===void 0&&(f=function(){});var g=s.getTransferables;if(g===void 0&&(g=null),!n[l])try{h=h.map(function(b){return b&&b.isWorkerModule&&(e(b,function(S){if(S instanceof Error)throw S}),b=n[b.id].value),b}),f=r("<"+u+">.init",f),g&&(g=r("<"+u+">.getTransferables",g));var y=null;typeof f=="function"?y=f.apply(void 0,h):console.error("worker module init function failed to rehydrate"),n[l]={id:l,value:y,getTransferables:g},o(y)}catch(b){b&&b.noLog||console.error(b),o(b)}}function t(s,o){var l,u=s.id,h=s.args;(!n[u]||typeof n[u].value!="function")&&o(new Error("Worker module "+u+": not found or its 'init' did not return a function"));try{var f=(l=n[u]).value.apply(l,h);f&&typeof f.then=="function"?f.then(g,function(y){return o(y instanceof Error?y:new Error(""+y))}):g(f)}catch(y){o(y)}function g(y){try{var b=n[u].getTransferables&&n[u].getTransferables(y);(!b||!Array.isArray(b)||!b.length)&&(b=void 0),o(y,b)}catch(S){console.error(S),o(S)}}}function r(s,o){var l=void 0;self.troikaDefine=function(h){return l=h};var u=URL.createObjectURL(new Blob(["/** "+s.replace(/\*/g,"")+` **/

troikaDefine(
`+o+`
)`],{type:"application/javascript"}));try{importScripts(u)}catch(h){console.error(h)}return URL.revokeObjectURL(u),delete self.troikaDefine,l}self.addEventListener("message",function(s){var o=s.data,l=o.messageId,u=o.action,h=o.data;try{u==="registerModule"&&e(h,function(f){f instanceof Error?postMessage({messageId:l,success:!1,error:f.message}):postMessage({messageId:l,success:!0,result:{isCallable:typeof f=="function"}})}),u==="callModule"&&t(h,function(f,g){f instanceof Error?postMessage({messageId:l,success:!1,error:f.message}):postMessage({messageId:l,success:!0,result:f},g||void 0)})}catch(f){postMessage({messageId:l,success:!1,error:f.stack})}})}function MIe(n){var e=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return e._getInitResult().then(function(s){if(typeof s=="function")return s.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,r=n.init;t=Array.isArray(t)?t.map(function(o){return o&&o._getInitResult?o._getInitResult():o}):[];var s=Promise.all(t).then(function(o){return r.apply(null,o)});return e._getInitResult=function(){return s},s},e}var lee=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u"&&!1||console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return lee=function(){return n},n},AIe=0,IIe=0,mN=!1,s$=Object.create(null),o$=Object.create(null),ZP=Object.create(null);function HC(n){if((!n||typeof n.init!="function")&&!mN)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,r=n.getTransferables,s=n.workerId;if(!lee())return MIe(n);s==null&&(s="#default");var o="workerModule"+ ++AIe,l=n.name||o,u=null;e=e&&e.map(function(f){return typeof f=="function"&&!f.workerModuleData&&(mN=!0,f=HC({workerId:s,name:"<"+l+"> function dependency: "+f.name,init:`function(){return (
`+RI(f)+`
)}`}),mN=!1),f&&f.workerModuleData&&(f=f.workerModuleData),f});function h(){for(var f=[],g=arguments.length;g--;)f[g]=arguments[g];if(!u){u=BW(s,"registerModule",h.workerModuleData);var y=function(){u=null,o$[s].delete(y)};(o$[s]||(o$[s]=new Set)).add(y)}return u.then(function(b){var S=b.isCallable;if(S)return BW(s,"callModule",{id:o,args:f});throw new Error("Worker module function was called but `init` did not return a callable function")})}return h.workerModuleData={isWorkerModule:!0,id:o,name:l,dependencies:e,init:RI(t),getTransferables:r&&RI(r)},h}function RIe(n){o$[n]&&o$[n].forEach(function(e){e()}),s$[n]&&(s$[n].terminate(),delete s$[n])}function RI(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function kIe(n){var e=s$[n];if(!e){var t=RI(CIe);e=s$[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var s=r.data,o=s.messageId,l=ZP[o];if(!l)throw new Error("WorkerModule response with empty or unknown messageId");delete ZP[o],l(s)}}return e}function BW(n,e,t){return new Promise(function(r,s){var o=++IIe;ZP[o]=function(l){l.success?r(l.result):s(new Error("Error in worker "+e+" call: "+l.error))},kIe(n).postMessage({messageId:o,action:e,data:t})})}function uee(){var n=function(e){function t(ie,se,fe,Se,Ue,ke,qe,we){var Ze=1-qe;we.x=Ze*Ze*ie+2*Ze*qe*fe+qe*qe*Ue,we.y=Ze*Ze*se+2*Ze*qe*Se+qe*qe*ke}function r(ie,se,fe,Se,Ue,ke,qe,we,Ze,et){var ft=1-Ze;et.x=ft*ft*ft*ie+3*ft*ft*Ze*fe+3*ft*Ze*Ze*Ue+Ze*Ze*Ze*qe,et.y=ft*ft*ft*se+3*ft*ft*Ze*Se+3*ft*Ze*Ze*ke+Ze*Ze*Ze*we}function s(ie,se){for(var fe=/([MLQCZ])([^MLQCZ]*)/g,Se,Ue,ke,qe,we;Se=fe.exec(ie);){var Ze=Se[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(et){return parseFloat(et)});switch(Se[1]){case"M":qe=Ue=Ze[0],we=ke=Ze[1];break;case"L":(Ze[0]!==qe||Ze[1]!==we)&&se("L",qe,we,qe=Ze[0],we=Ze[1]);break;case"Q":{se("Q",qe,we,qe=Ze[2],we=Ze[3],Ze[0],Ze[1]);break}case"C":{se("C",qe,we,qe=Ze[4],we=Ze[5],Ze[0],Ze[1],Ze[2],Ze[3]);break}case"Z":(qe!==Ue||we!==ke)&&se("L",qe,we,Ue,ke);break}}}function o(ie,se,fe){fe===void 0&&(fe=16);var Se={x:0,y:0};s(ie,function(Ue,ke,qe,we,Ze,et,ft,at,Ge){switch(Ue){case"L":se(ke,qe,we,Ze);break;case"Q":{for(var Ie=ke,He=qe,it=1;it<fe;it++)t(ke,qe,et,ft,we,Ze,it/(fe-1),Se),se(Ie,He,Se.x,Se.y),Ie=Se.x,He=Se.y;break}case"C":{for(var st=ke,It=qe,kt=1;kt<fe;kt++)r(ke,qe,et,ft,at,Ge,we,Ze,kt/(fe-1),Se),se(st,It,Se.x,Se.y),st=Se.x,It=Se.y;break}}})}var l="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",u="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",h=new WeakMap,f={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function g(ie,se){var fe=ie.getContext?ie.getContext("webgl",f):ie,Se=h.get(fe);if(!Se){let ft=function(st){var It=ke[st];if(!It&&(It=ke[st]=fe.getExtension(st),!It))throw new Error(st+" not supported");return It},at=function(st,It){var kt=fe.createShader(It);return fe.shaderSource(kt,st),fe.compileShader(kt),kt},Ge=function(st,It,kt,vt){if(!qe[st]){var Mt={},Ct={},gt=fe.createProgram();fe.attachShader(gt,at(It,fe.VERTEX_SHADER)),fe.attachShader(gt,at(kt,fe.FRAGMENT_SHADER)),fe.linkProgram(gt),qe[st]={program:gt,transaction:function(Ee){fe.useProgram(gt),Ee({setUniform:function(re,Be){for(var mt=[],yt=arguments.length-2;yt-- >0;)mt[yt]=arguments[yt+2];var wt=Ct[Be]||(Ct[Be]=fe.getUniformLocation(gt,Be));fe["uniform"+re].apply(fe,[wt].concat(mt))},setAttribute:function(re,Be,mt,yt,wt){var Ke=Mt[re];Ke||(Ke=Mt[re]={buf:fe.createBuffer(),loc:fe.getAttribLocation(gt,re),data:null}),fe.bindBuffer(fe.ARRAY_BUFFER,Ke.buf),fe.vertexAttribPointer(Ke.loc,Be,fe.FLOAT,!1,0,0),fe.enableVertexAttribArray(Ke.loc),Ue?fe.vertexAttribDivisor(Ke.loc,yt):ft("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Ke.loc,yt),wt!==Ke.data&&(fe.bufferData(fe.ARRAY_BUFFER,wt,mt),Ke.data=wt)}})}}}qe[st].transaction(vt)},Ie=function(st,It){Ze++;try{fe.activeTexture(fe.TEXTURE0+Ze);var kt=we[st];kt||(kt=we[st]=fe.createTexture(),fe.bindTexture(fe.TEXTURE_2D,kt),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MIN_FILTER,fe.NEAREST),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MAG_FILTER,fe.NEAREST)),fe.bindTexture(fe.TEXTURE_2D,kt),It(kt,Ze)}finally{Ze--}},He=function(st,It,kt){var vt=fe.createFramebuffer();et.push(vt),fe.bindFramebuffer(fe.FRAMEBUFFER,vt),fe.activeTexture(fe.TEXTURE0+It),fe.bindTexture(fe.TEXTURE_2D,st),fe.framebufferTexture2D(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0,fe.TEXTURE_2D,st,0);try{kt(vt)}finally{fe.deleteFramebuffer(vt),fe.bindFramebuffer(fe.FRAMEBUFFER,et[--et.length-1]||null)}},it=function(){ke={},qe={},we={},Ze=-1,et.length=0};var Ue=typeof WebGL2RenderingContext<"u"&&fe instanceof WebGL2RenderingContext,ke={},qe={},we={},Ze=-1,et=[];fe.canvas.addEventListener("webglcontextlost",function(st){it(),st.preventDefault()},!1),h.set(fe,Se={gl:fe,isWebGL2:Ue,getExtension:ft,withProgram:Ge,withTexture:Ie,withTextureFramebuffer:He,handleContextLoss:it})}se(Se)}function y(ie,se,fe,Se,Ue,ke,qe,we){qe===void 0&&(qe=15),we===void 0&&(we=null),g(ie,function(Ze){var et=Ze.gl,ft=Ze.withProgram,at=Ze.withTexture;at("copy",function(Ge,Ie){et.texImage2D(et.TEXTURE_2D,0,et.RGBA,Ue,ke,0,et.RGBA,et.UNSIGNED_BYTE,se),ft("copy",l,u,function(He){var it=He.setUniform,st=He.setAttribute;st("aUV",2,et.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),it("1i","image",Ie),et.bindFramebuffer(et.FRAMEBUFFER,we||null),et.disable(et.BLEND),et.colorMask(qe&8,qe&4,qe&2,qe&1),et.viewport(fe,Se,Ue,ke),et.scissor(fe,Se,Ue,ke),et.drawArrays(et.TRIANGLES,0,3)})})})}function b(ie,se,fe){var Se=ie.width,Ue=ie.height;g(ie,function(ke){var qe=ke.gl,we=new Uint8Array(Se*Ue*4);qe.readPixels(0,0,Se,Ue,qe.RGBA,qe.UNSIGNED_BYTE,we),ie.width=se,ie.height=fe,y(qe,we,0,0,Se,Ue)})}var S=Object.freeze({__proto__:null,withWebGLContext:g,renderImageData:y,resizeWebGLCanvasWithoutClearing:b});function C(ie,se,fe,Se,Ue,ke){ke===void 0&&(ke=1);var qe=new Uint8Array(ie*se),we=Se[2]-Se[0],Ze=Se[3]-Se[1],et=[];o(fe,function(st,It,kt,vt){et.push({x1:st,y1:It,x2:kt,y2:vt,minX:Math.min(st,kt),minY:Math.min(It,vt),maxX:Math.max(st,kt),maxY:Math.max(It,vt)})}),et.sort(function(st,It){return st.maxX-It.maxX});for(var ft=0;ft<ie;ft++)for(var at=0;at<se;at++){var Ge=He(Se[0]+we*(ft+.5)/ie,Se[1]+Ze*(at+.5)/se),Ie=Math.pow(1-Math.abs(Ge)/Ue,ke)/2;Ge<0&&(Ie=1-Ie),Ie=Math.max(0,Math.min(255,Math.round(Ie*255))),qe[at*ie+ft]=Ie}return qe;function He(st,It){for(var kt=1/0,vt=1/0,Mt=et.length;Mt--;){var Ct=et[Mt];if(Ct.maxX+vt<=st)break;if(st+vt>Ct.minX&&It-vt<Ct.maxY&&It+vt>Ct.minY){var gt=k(st,It,Ct.x1,Ct.y1,Ct.x2,Ct.y2);gt<kt&&(kt=gt,vt=Math.sqrt(kt))}}return it(st,It)&&(vt=-vt),vt}function it(st,It){for(var kt=0,vt=et.length;vt--;){var Mt=et[vt];if(Mt.maxX<=st)break;var Ct=Mt.y1>It!=Mt.y2>It&&st<(Mt.x2-Mt.x1)*(It-Mt.y1)/(Mt.y2-Mt.y1)+Mt.x1;Ct&&(kt+=Mt.y1<Mt.y2?1:-1)}return kt!==0}}function M(ie,se,fe,Se,Ue,ke,qe,we,Ze,et){ke===void 0&&(ke=1),we===void 0&&(we=0),Ze===void 0&&(Ze=0),et===void 0&&(et=0),A(ie,se,fe,Se,Ue,ke,qe,null,we,Ze,et)}function A(ie,se,fe,Se,Ue,ke,qe,we,Ze,et,ft){ke===void 0&&(ke=1),Ze===void 0&&(Ze=0),et===void 0&&(et=0),ft===void 0&&(ft=0);for(var at=C(ie,se,fe,Se,Ue,ke),Ge=new Uint8Array(at.length*4),Ie=0;Ie<at.length;Ie++)Ge[Ie*4+ft]=at[Ie];y(qe,Ge,Ze,et,ie,se,1<<3-ft,we)}function k(ie,se,fe,Se,Ue,ke){var qe=Ue-fe,we=ke-Se,Ze=qe*qe+we*we,et=Ze?Math.max(0,Math.min(1,((ie-fe)*qe+(se-Se)*we)/Ze)):0,ft=ie-(fe+et*qe),at=se-(Se+et*we);return ft*ft+at*at}var O=Object.freeze({__proto__:null,generate:C,generateIntoCanvas:M,generateIntoFramebuffer:A}),P="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",D="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",U="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",H=new Float32Array([0,0,2,0,0,2]),V=null,z=!1,Z={},oe=new WeakMap;function ue(ie){if(!z&&!ce(ie))throw new Error("WebGL generation not supported")}function q(ie,se,fe,Se,Ue,ke,qe){if(ke===void 0&&(ke=1),qe===void 0&&(qe=null),!qe&&(qe=V,!qe)){var we=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!we)throw new Error("OffscreenCanvas or DOM canvas not supported");qe=V=we.getContext("webgl",{depth:!1})}ue(qe);var Ze=new Uint8Array(ie*se*4);g(qe,function(Ge){var Ie=Ge.gl,He=Ge.withTexture,it=Ge.withTextureFramebuffer;He("readable",function(st,It){Ie.texImage2D(Ie.TEXTURE_2D,0,Ie.RGBA,ie,se,0,Ie.RGBA,Ie.UNSIGNED_BYTE,null),it(st,It,function(kt){le(ie,se,fe,Se,Ue,ke,Ie,kt,0,0,0),Ie.readPixels(0,0,ie,se,Ie.RGBA,Ie.UNSIGNED_BYTE,Ze)})})});for(var et=new Uint8Array(ie*se),ft=0,at=0;ft<Ze.length;ft+=4)et[at++]=Ze[ft];return et}function ae(ie,se,fe,Se,Ue,ke,qe,we,Ze,et){ke===void 0&&(ke=1),we===void 0&&(we=0),Ze===void 0&&(Ze=0),et===void 0&&(et=0),le(ie,se,fe,Se,Ue,ke,qe,null,we,Ze,et)}function le(ie,se,fe,Se,Ue,ke,qe,we,Ze,et,ft){ke===void 0&&(ke=1),Ze===void 0&&(Ze=0),et===void 0&&(et=0),ft===void 0&&(ft=0),ue(qe);var at=[];o(fe,function(Ge,Ie,He,it){at.push(Ge,Ie,He,it)}),at=new Float32Array(at),g(qe,function(Ge){var Ie=Ge.gl,He=Ge.isWebGL2,it=Ge.getExtension,st=Ge.withProgram,It=Ge.withTexture,kt=Ge.withTextureFramebuffer,vt=Ge.handleContextLoss;if(It("rawDistances",function(Mt,Ct){(ie!==Mt._lastWidth||se!==Mt._lastHeight)&&Ie.texImage2D(Ie.TEXTURE_2D,0,Ie.RGBA,Mt._lastWidth=ie,Mt._lastHeight=se,0,Ie.RGBA,Ie.UNSIGNED_BYTE,null),st("main",P,D,function(gt){var Ee=gt.setAttribute,re=gt.setUniform,Be=!He&&it("ANGLE_instanced_arrays"),mt=!He&&it("EXT_blend_minmax");Ee("aUV",2,Ie.STATIC_DRAW,0,H),Ee("aLineSegment",4,Ie.DYNAMIC_DRAW,1,at),re.apply(void 0,["4f","uGlyphBounds"].concat(Se)),re("1f","uMaxDistance",Ue),re("1f","uExponent",ke),kt(Mt,Ct,function(yt){Ie.enable(Ie.BLEND),Ie.colorMask(!0,!0,!0,!0),Ie.viewport(0,0,ie,se),Ie.scissor(0,0,ie,se),Ie.blendFunc(Ie.ONE,Ie.ONE),Ie.blendEquationSeparate(Ie.FUNC_ADD,He?Ie.MAX:mt.MAX_EXT),Ie.clear(Ie.COLOR_BUFFER_BIT),He?Ie.drawArraysInstanced(Ie.TRIANGLES,0,3,at.length/4):Be.drawArraysInstancedANGLE(Ie.TRIANGLES,0,3,at.length/4)})}),st("post",l,U,function(gt){gt.setAttribute("aUV",2,Ie.STATIC_DRAW,0,H),gt.setUniform("1i","tex",Ct),Ie.bindFramebuffer(Ie.FRAMEBUFFER,we),Ie.disable(Ie.BLEND),Ie.colorMask(ft===0,ft===1,ft===2,ft===3),Ie.viewport(Ze,et,ie,se),Ie.scissor(Ze,et,ie,se),Ie.drawArrays(Ie.TRIANGLES,0,3)})}),Ie.isContextLost())throw vt(),new Error("webgl context lost")})}function ce(ie){var se=!ie||ie===V?Z:ie.canvas||ie,fe=oe.get(se);if(fe===void 0){z=!0;var Se=null;try{var Ue=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ke=q(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,ie);fe=ke&&Ue.length===ke.length&&ke.every(function(qe,we){return qe===Ue[we]}),fe||(Se="bad trial run results",console.info(Ue,ke))}catch(qe){fe=!1,Se=qe.message}Se&&console.warn("WebGL SDF generation not supported:",Se),z=!1,oe.set(se,fe)}return fe}var ge=Object.freeze({__proto__:null,generate:q,generateIntoCanvas:ae,generateIntoFramebuffer:le,isSupported:ce});function $e(ie,se,fe,Se,Ue,ke){Ue===void 0&&(Ue=Math.max(Se[2]-Se[0],Se[3]-Se[1])/2),ke===void 0&&(ke=1);try{return q.apply(ge,arguments)}catch(qe){return console.info("WebGL SDF generation failed, falling back to JS",qe),C.apply(O,arguments)}}function K(ie,se,fe,Se,Ue,ke,qe,we,Ze,et){Ue===void 0&&(Ue=Math.max(Se[2]-Se[0],Se[3]-Se[1])/2),ke===void 0&&(ke=1),we===void 0&&(we=0),Ze===void 0&&(Ze=0),et===void 0&&(et=0);try{return ae.apply(ge,arguments)}catch(ft){return console.info("WebGL SDF generation failed, falling back to JS",ft),M.apply(O,arguments)}}return e.forEachPathCommand=s,e.generate=$e,e.generateIntoCanvas=K,e.javascript=O,e.pathToLineSegments=o,e.webgl=ge,e.webglUtils=S,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function OIe(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},s={};r.L=1,s[1]="L",Object.keys(t).forEach(function(vt,Mt){r[vt]=1<<Mt+1,s[r[vt]]=vt}),Object.freeze(r);var o=r.LRI|r.RLI|r.FSI,l=r.L|r.R|r.AL,u=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,h=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,f=r.S|r.WS|r.B|o|r.PDI|h,g=null;function y(){if(!g){g=new Map;var vt=function(Ct){if(t.hasOwnProperty(Ct)){var gt=0;t[Ct].split(",").forEach(function(Ee){var re=Ee.split("+"),Be=re[0],mt=re[1];Be=parseInt(Be,36),mt=mt?parseInt(mt,36):0,g.set(gt+=Be,r[Ct]);for(var yt=0;yt<mt;yt++)g.set(++gt,r[Ct])})}};for(var Mt in t)vt(Mt)}}function b(vt){return y(),g.get(vt.codePointAt(0))||r.L}function S(vt){return s[b(vt)]}var C={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function M(vt,Mt){var Ct=36,gt=0,Ee=new Map,re=Mt&&new Map,Be;return vt.split(",").forEach(function mt(yt){if(yt.indexOf("+")!==-1)for(var wt=+yt;wt--;)mt(Be);else{Be=yt;var Ke=yt.split(">"),Qe=Ke[0],Le=Ke[1];Qe=String.fromCodePoint(gt+=parseInt(Qe,Ct)),Le=String.fromCodePoint(gt+=parseInt(Le,Ct)),Ee.set(Qe,Le),Mt&&re.set(Le,Qe)}}),{map:Ee,reverseMap:re}}var A,k,O;function P(){if(!A){var vt=M(C.pairs,!0),Mt=vt.map,Ct=vt.reverseMap;A=Mt,k=Ct,O=M(C.canonical,!1).map}}function D(vt){return P(),A.get(vt)||null}function U(vt){return P(),k.get(vt)||null}function H(vt){return P(),O.get(vt)||null}var V=r.L,z=r.R,Z=r.EN,oe=r.ES,ue=r.ET,q=r.AN,ae=r.CS,le=r.B,ce=r.S,ge=r.ON,$e=r.BN,K=r.NSM,ie=r.AL,se=r.LRO,fe=r.RLO,Se=r.LRE,Ue=r.RLE,ke=r.PDF,qe=r.LRI,we=r.RLI,Ze=r.FSI,et=r.PDI;function ft(vt,Mt){for(var Ct=125,gt=new Uint32Array(vt.length),Ee=0;Ee<vt.length;Ee++)gt[Ee]=b(vt[Ee]);var re=new Map;function Be(Fi,Mi){var Vn=gt[Fi];gt[Fi]=Mi,re.set(Vn,re.get(Vn)-1),Vn&u&&re.set(u,re.get(u)-1),re.set(Mi,(re.get(Mi)||0)+1),Mi&u&&re.set(u,(re.get(u)||0)+1)}for(var mt=new Uint8Array(vt.length),yt=new Map,wt=[],Ke=null,Qe=0;Qe<vt.length;Qe++)Ke||wt.push(Ke={start:Qe,end:vt.length-1,level:Mt==="rtl"?1:Mt==="ltr"?0:Ao(Qe,!1)}),gt[Qe]&le&&(Ke.end=Qe,Ke=null);for(var Le=Ue|Se|fe|se|o|et|ke|le,Q=function(Fi){return Fi+(Fi&1?1:2)},te=function(Fi){return Fi+(Fi&1?2:1)},me=0;me<wt.length;me++){Ke=wt[me];var Re=[{_level:Ke.level,_override:0,_isolate:0}],Fe=void 0,bt=0,ze=0,Pt=0;re.clear();for(var lt=Ke.start;lt<=Ke.end;lt++){var Gt=gt[lt];if(Fe=Re[Re.length-1],re.set(Gt,(re.get(Gt)||0)+1),Gt&u&&re.set(u,(re.get(u)||0)+1),Gt&Le)if(Gt&(Ue|Se)){mt[lt]=Fe._level;var Wt=(Gt===Ue?te:Q)(Fe._level);Wt<=Ct&&!bt&&!ze?Re.push({_level:Wt,_override:0,_isolate:0}):bt||ze++}else if(Gt&(fe|se)){mt[lt]=Fe._level;var bn=(Gt===fe?te:Q)(Fe._level);bn<=Ct&&!bt&&!ze?Re.push({_level:bn,_override:Gt&fe?z:V,_isolate:0}):bt||ze++}else if(Gt&o){Gt&Ze&&(Gt=Ao(lt+1,!0)===1?we:qe),mt[lt]=Fe._level,Fe._override&&Be(lt,Fe._override);var ar=(Gt===we?te:Q)(Fe._level);ar<=Ct&&bt===0&&ze===0?(Pt++,Re.push({_level:ar,_override:0,_isolate:1,_isolInitIndex:lt})):bt++}else if(Gt&et){if(bt>0)bt--;else if(Pt>0){for(ze=0;!Re[Re.length-1]._isolate;)Re.pop();var cr=Re[Re.length-1]._isolInitIndex;cr!=null&&(yt.set(cr,lt),yt.set(lt,cr)),Re.pop(),Pt--}Fe=Re[Re.length-1],mt[lt]=Fe._level,Fe._override&&Be(lt,Fe._override)}else Gt&ke?(bt===0&&(ze>0?ze--:!Fe._isolate&&Re.length>1&&(Re.pop(),Fe=Re[Re.length-1])),mt[lt]=Fe._level):Gt&le&&(mt[lt]=Ke.level);else mt[lt]=Fe._level,Fe._override&&Gt!==$e&&Be(lt,Fe._override)}for(var oi=[],Mr=null,_r=Ke.start;_r<=Ke.end;_r++){var ne=gt[_r];if(!(ne&h)){var Te=mt[_r],je=ne&o,ct=ne===et;Mr&&Te===Mr._level?(Mr._end=_r,Mr._endsWithIsolInit=je):oi.push(Mr={_start:_r,_end:_r,_level:Te,_startsWithPDI:ct,_endsWithIsolInit:je})}}for(var Ht=[],nn=0;nn<oi.length;nn++){var kn=oi[nn];if(!kn._startsWithPDI||kn._startsWithPDI&&!yt.has(kn._start)){for(var De=[Mr=kn],_t=void 0;Mr&&Mr._endsWithIsolInit&&(_t=yt.get(Mr._end))!=null;)for(var Ot=nn+1;Ot<oi.length;Ot++)if(oi[Ot]._start===_t){De.push(Mr=oi[Ot]);break}for(var St=[],Xt=0;Xt<De.length;Xt++)for(var Wn=De[Xt],ir=Wn._start;ir<=Wn._end;ir++)St.push(ir);for(var br=mt[St[0]],Or=Ke.level,Ei=St[0]-1;Ei>=0;Ei--)if(!(gt[Ei]&h)){Or=mt[Ei];break}var Lr=St[St.length-1],Ar=mt[Lr],Ss=Ke.level;if(!(gt[Lr]&o)){for(var La=Lr+1;La<=Ke.end;La++)if(!(gt[La]&h)){Ss=mt[La];break}}Ht.push({_seqIndices:St,_sosType:Math.max(Or,br)%2?z:V,_eosType:Math.max(Ss,Ar)%2?z:V})}}for(var Mo=0;Mo<Ht.length;Mo++){var Xl=Ht[Mo],rn=Xl._seqIndices,Dr=Xl._sosType,tl=Xl._eosType;if(re.get(K))for(var Na=0;Na<rn.length;Na++){var zs=rn[Na];if(gt[zs]&K){for(var Us=Dr,Pi=Na-1;Pi>=0;Pi--)if(!(gt[rn[Pi]]&h)){Us=gt[rn[Pi]];break}Be(zs,Us&(o|et)?ge:Us)}}if(re.get(Z))for(var Pr=0;Pr<rn.length;Pr++){var In=rn[Pr];if(gt[In]&Z)for(var Nr=Pr-1;Nr>=-1;Nr--){var jr=Nr===-1?Dr:gt[rn[Nr]];if(jr&l){jr===ie&&Be(In,q);break}}}if(re.get(ie))for(var Sr=0;Sr<rn.length;Sr++){var Bi=rn[Sr];gt[Bi]&ie&&Be(Bi,z)}if(re.get(oe)||re.get(ae))for(var ws=1;ws<rn.length-1;ws++){var fi=rn[ws];if(gt[fi]&(oe|ae)){for(var gs=0,nl=0,Da=ws-1;Da>=0&&(gs=gt[rn[Da]],!!(gs&h));Da--);for(var fc=ws+1;fc<rn.length&&(nl=gt[rn[fc]],!!(nl&h));fc++);gs===nl&&(gt[fi]===oe?gs===Z:gs&(Z|q))&&Be(fi,gs)}}if(re.get(Z))for(var pc=0;pc<rn.length;pc++){var qs=rn[pc];if(gt[qs]&Z){for(var qo=pc-1;qo>=0&&gt[rn[qo]]&(ue|h);qo--)Be(rn[qo],Z);for(var Kl=pc+1;Kl<rn.length&&gt[rn[Kl]]&(ue|h);Kl++)Be(rn[Kl],Z)}}if(re.get(ue)||re.get(oe)||re.get(ae))for(var vu=0;vu<rn.length;vu++){var gh=rn[vu];if(gt[gh]&(ue|oe|ae)){Be(gh,ge);for(var Qo=vu-1;Qo>=0&&gt[rn[Qo]]&h;Qo--)Be(rn[Qo],ge);for(var Tr=vu+1;Tr<rn.length&&gt[rn[Tr]]&h;Tr++)Be(rn[Tr],ge)}}if(re.get(Z))for(var $i=0,Pc=Dr;$i<rn.length;$i++){var vh=rn[$i],Bc=gt[vh];Bc&Z?Pc===V&&Be(vh,V):Bc&l&&(Pc=Bc)}if(re.get(u)){var xl=z|Z|q,_u=xl|V,$l=[];{for(var Cl=[],wr=0;wr<rn.length;wr++)if(gt[rn[wr]]&u){var Er=vt[rn[wr]],Jl=void 0;if(D(Er)!==null)if(Cl.length<63)Cl.push({char:Er,seqIndex:wr});else break;else if((Jl=U(Er))!==null)for(var rl=Cl.length-1;rl>=0;rl--){var il=Cl[rl].char;if(il===Jl||il===U(H(Er))||D(H(il))===Er){$l.push([Cl[rl].seqIndex,wr]),Cl.length=rl;break}}}$l.sort(function(Fi,Mi){return Fi[0]-Mi[0]})}for(var yu=0;yu<$l.length;yu++){for(var Qi=$l[yu],vs=Qi[0],sl=Qi[1],Cd=!1,lo=0,Uu=vs+1;Uu<sl;Uu++){var ca=rn[Uu];if(gt[ca]&_u){Cd=!0;var bu=gt[ca]&xl?z:V;if(bu===ol(ca)){lo=bu;break}}}if(Cd&&!lo){lo=Dr;for(var lr=vs-1;lr>=0;lr--){var Gn=rn[lr];if(gt[Gn]&_u){var Es=gt[Gn]&xl?z:V;Es!==ol(Gn)?lo=Es:lo=ol(Gn);break}}}if(lo){if(gt[rn[vs]]=gt[rn[sl]]=lo,lo!==ol(rn[vs])){for(var uo=vs+1;uo<rn.length;uo++)if(!(gt[rn[uo]]&h)){b(vt[rn[uo]])&K&&(gt[rn[uo]]=lo);break}}if(lo!==ol(rn[sl])){for(var Hu=sl+1;Hu<rn.length;Hu++)if(!(gt[rn[Hu]]&h)){b(vt[rn[Hu]])&K&&(gt[rn[Hu]]=lo);break}}}}for(var Tu=0;Tu<rn.length;Tu++)if(gt[rn[Tu]]&u){for(var _h=Tu,Pa=Tu,ha=Dr,Gu=Tu-1;Gu>=0;Gu--)if(gt[rn[Gu]]&h)_h=Gu;else{ha=gt[rn[Gu]]&xl?z:V;break}for(var $r=tl,Rs=Tu+1;Rs<rn.length;Rs++)if(gt[rn[Rs]]&(u|h))Pa=Rs;else{$r=gt[rn[Rs]]&xl?z:V;break}for(var bi=_h;bi<=Pa;bi++)gt[rn[bi]]=ha===$r?ha:ol(rn[bi]);Tu=Pa}}}for(var Ci=Ke.start;Ci<=Ke.end;Ci++){var da=mt[Ci],ti=gt[Ci];if(da&1?ti&(V|Z|q)&&mt[Ci]++:ti&z?mt[Ci]++:ti&(q|Z)&&(mt[Ci]+=2),ti&h&&(mt[Ci]=Ci===0?Ke.level:mt[Ci-1]),Ci===Ke.end||b(vt[Ci])&(ce|le))for(var Su=Ci;Su>=0&&b(vt[Su])&f;Su--)mt[Su]=Ke.level}}return{levels:mt,paragraphs:wt};function Ao(Fi,Mi){for(var Vn=Fi;Vn<vt.length;Vn++){var Ai=gt[Vn];if(Ai&(z|ie))return 1;if(Ai&(le|V)||Mi&&Ai===et)return 0;if(Ai&o){var Jr=wu(Vn);Vn=Jr===-1?vt.length:Jr}}return 0}function wu(Fi){for(var Mi=1,Vn=Fi+1;Vn<vt.length;Vn++){var Ai=gt[Vn];if(Ai&le)break;if(Ai&et){if(--Mi===0)return Vn}else Ai&o&&Mi++}return-1}function ol(Fi){return mt[Fi]&1?z:V}}var at="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Ge;function Ie(){if(!Ge){var vt=M(at,!0),Mt=vt.map,Ct=vt.reverseMap;Ct.forEach(function(gt,Ee){Mt.set(Ee,gt)}),Ge=Mt}}function He(vt){return Ie(),Ge.get(vt)||null}function it(vt,Mt,Ct,gt){var Ee=vt.length;Ct=Math.max(0,Ct==null?0:+Ct),gt=Math.min(Ee-1,gt==null?Ee-1:+gt);for(var re=new Map,Be=Ct;Be<=gt;Be++)if(Mt[Be]&1){var mt=He(vt[Be]);mt!==null&&re.set(Be,mt)}return re}function st(vt,Mt,Ct,gt){var Ee=vt.length;Ct=Math.max(0,Ct==null?0:+Ct),gt=Math.min(Ee-1,gt==null?Ee-1:+gt);var re=[];return Mt.paragraphs.forEach(function(Be){var mt=Math.max(Ct,Be.start),yt=Math.min(gt,Be.end);if(mt<yt){for(var wt=Mt.levels.slice(mt,yt+1),Ke=yt;Ke>=mt&&b(vt[Ke])&f;Ke--)wt[Ke]=Be.level;for(var Qe=Be.level,Le=1/0,Q=0;Q<wt.length;Q++){var te=wt[Q];te>Qe&&(Qe=te),te<Le&&(Le=te|1)}for(var me=Qe;me>=Le;me--)for(var Re=0;Re<wt.length;Re++)if(wt[Re]>=me){for(var Fe=Re;Re+1<wt.length&&wt[Re+1]>=me;)Re++;Re>Fe&&re.push([Fe+Ct,Re+Ct])}}}),re}function It(vt,Mt,Ct,gt){var Ee=kt(vt,Mt,Ct,gt),re=[].concat(vt);return Ee.forEach(function(Be,mt){re[mt]=(Mt.levels[Be]&1?He(vt[Be]):null)||vt[Be]}),re.join("")}function kt(vt,Mt,Ct,gt){for(var Ee=st(vt,Mt,Ct,gt),re=[],Be=0;Be<vt.length;Be++)re[Be]=Be;return Ee.forEach(function(mt){for(var yt=mt[0],wt=mt[1],Ke=re.slice(yt,wt+1),Qe=Ke.length;Qe--;)re[wt-Qe]=Ke[Qe]}),re}return e.closingToOpeningBracket=U,e.getBidiCharType=b,e.getBidiCharTypeName=S,e.getCanonicalBracket=H,e.getEmbeddingLevels=ft,e.getMirroredCharacter=He,e.getMirroredCharactersMap=it,e.getReorderSegments=st,e.getReorderedIndices=kt,e.getReorderedString=It,e.openingToClosingBracket=D,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const cee=/\bvoid\s+main\s*\(\s*\)\s*{/g;function eB(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(r,s){let o=ps[s];return o?eB(o):r}return n.replace(e,t)}const ef=[];for(let n=0;n<256;n++)ef[n]=(n<16?"0":"")+n.toString(16);function LIe(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ef[n&255]+ef[n>>8&255]+ef[n>>16&255]+ef[n>>24&255]+"-"+ef[e&255]+ef[e>>8&255]+"-"+ef[e>>16&15|64]+ef[e>>24&255]+"-"+ef[t&63|128]+ef[t>>8&255]+"-"+ef[t>>16&255]+ef[t>>24&255]+ef[r&255]+ef[r>>8&255]+ef[r>>16&255]+ef[r>>24&255]).toUpperCase()}const r1=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let r=arguments[e];if(r)for(let s in r)r.hasOwnProperty(s)&&(n[s]=r[s])}return n},NIe=Date.now(),FW=new WeakMap,zW=new Map;let DIe=1e10;function tB(n,e){const t=zIe(e);let r=FW.get(n);if(r||FW.set(n,r=Object.create(null)),r[t])return new r[t];const s=`_onBeforeCompile${t}`,o=function(f){n.onBeforeCompile.call(this,f);const g=this.customProgramCacheKey()+"|"+f.vertexShader+"|"+f.fragmentShader;let y=zW[g];if(!y){const b=PIe(f,e,t);y=zW[g]=b}f.vertexShader=y.vertexShader,f.fragmentShader=y.fragmentShader,r1(f.uniforms,this.uniforms),e.timeUniform&&(f.uniforms[e.timeUniform]={get value(){return Date.now()-NIe}}),this[s]&&this[s](f)},l=function(){return u(e.chained?n:n.clone())},u=function(f){const g=Object.create(f,h);return Object.defineProperty(g,"baseMaterial",{value:n}),Object.defineProperty(g,"id",{value:DIe++}),g.uuid=LIe(),g.uniforms=r1({},f.uniforms,e.uniforms),g.defines=r1({},f.defines,e.defines),g.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",g.extensions=r1({},f.extensions,e.extensions),g._listeners=void 0,g},h={constructor:{value:l},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return o},set(f){this[s]=f}},copy:{writable:!0,configurable:!0,value:function(f){return n.copy.call(this,f),!n.isShaderMaterial&&!n.isDerivedMaterial&&(r1(this.extensions,f.extensions),r1(this.defines,f.defines),r1(this.uniforms,NC.clone(f.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const f=new n.constructor;return u(f).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let f=this._depthMaterial;return f||(f=this._depthMaterial=tB(n.isDerivedMaterial?n.getDepthMaterial():new PC({depthPacking:Bw}),e),f.defines.IS_DEPTH_MATERIAL="",f.uniforms=this.uniforms),f}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let f=this._distanceMaterial;return f||(f=this._distanceMaterial=tB(n.isDerivedMaterial?n.getDistanceMaterial():new m2,e),f.defines.IS_DISTANCE_MATERIAL="",f.uniforms=this.uniforms),f}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:f,_distanceMaterial:g}=this;f&&f.dispose(),g&&g.dispose(),n.dispose.call(this)}}};return r[t]=l,new l}function PIe({vertexShader:n,fragmentShader:e},t,r){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:l,vertexTransform:u,fragmentDefs:h,fragmentMainIntro:f,fragmentMainOutro:g,fragmentColorTransform:y,customRewriter:b,timeUniform:S}=t;if(s=s||"",o=o||"",l=l||"",h=h||"",f=f||"",g=g||"",(u||b)&&(n=eB(n)),(y||b)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=eB(e)),b){let C=b({vertexShader:n,fragmentShader:e});n=C.vertexShader,e=C.fragmentShader}if(y){let C=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,M=>(C.push(M),"")),g=`${y}
${C.join(`
`)}
${g}`}if(S){const C=`
uniform float ${S};
`;s=C+s,h=C+h}return u&&(n=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${n}
`,s=`${s}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${u}
}
`,o=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${o}
`,n=n.replace(/\b(position|normal|uv)\b/g,(C,M,A,k)=>/\battribute\s+vec[23]\s+$/.test(k.substr(0,A))?M:`troika_${M}_${r}`)),n=UW(n,r,s,o,l),e=UW(e,r,h,f,g),{vertexShader:n,fragmentShader:e}}function UW(n,e,t,r,s){return(r||s||t)&&(n=n.replace(cee,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${s}
}`),n}function BIe(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let FIe=0;const HW=new Map;function zIe(n){const e=JSON.stringify(n,BIe);let t=HW.get(e);return t==null&&HW.set(e,t=++FIe),t}function UIe(n,e,t){const{defaultFontURL:r}=t,s=Object.create(null),o=1/0,l=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,u="[^\\S\\u00A0]",h=new RegExp(`${u}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function f(O,P){function D(){const U=H=>{console.error(`Failure loading font ${O}${O===r?"":"; trying fallback"}`,H),O!==r&&(O=r,D())};try{const H=new XMLHttpRequest;H.open("get",O,!0),H.responseType="arraybuffer",H.onload=function(){if(H.status>=400)U(new Error(H.statusText));else if(H.status>0)try{const V=n(H.response);P(V)}catch(V){U(V)}},H.onerror=U,H.send()}catch(H){U(H)}}D()}function g(O,P){O||(O=r);let D=s[O];D?D.pending?D.pending.push(P):P(D):(s[O]={pending:[P]},f(O,U=>{let H=s[O].pending;s[O]=U,H.forEach(V=>V(U))}))}function y({text:O="",font:P=r,sdfGlyphSize:D=64,fontSize:U=1,letterSpacing:H=0,lineHeight:V="normal",maxWidth:z=o,direction:Z,textAlign:oe="left",textIndent:ue=0,whiteSpace:q="normal",overflowWrap:ae="normal",anchorX:le=0,anchorY:ce=0,includeCaretPositions:ge=!1,chunkedBoundsSize:$e=8192,colorRanges:K=null},ie,se=!1){const fe=M(),Se={fontLoad:0,typesetting:0};O.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),O=O.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),U=+U,H=+H,z=+z,V=V||"normal",ue=+ue,g(P,Ue=>{const ke=isFinite(z);let qe=null,we=null,Ze=null,et=null,ft=null,at=null,Ge=null,Ie=0,He=0,it=q!=="nowrap";const{ascender:st,descender:It,unitsPerEm:kt,lineGap:vt,capHeight:Mt,xHeight:Ct}=Ue;Se.fontLoad=M()-fe;const gt=M(),Ee=U/kt;V==="normal"&&(V=(st-It+vt)/kt),V=V*U;const re=(V-(st-It)*Ee)/2,Be=-(st*Ee+re),mt=Math.min(V,(st-It)*Ee),yt=(st+It)/2*Ee-mt/2;let wt=ue,Ke=new A;const Qe=[Ke];Ue.forEachGlyph(O,U,H,(te,me,Re)=>{const Fe=O.charAt(Re),bt=te.advanceWidth*Ee,ze=Ke.count;let Pt;if("isEmpty"in te||(te.isWhitespace=!!Fe&&new RegExp(u).test(Fe),te.canBreakAfter=!!Fe&&h.test(Fe),te.isEmpty=te.xMin===te.xMax||te.yMin===te.yMax||l.test(Fe)),!te.isWhitespace&&!te.isEmpty&&He++,it&&ke&&!te.isWhitespace&&me+bt+wt>z&&ze){if(Ke.glyphAt(ze-1).glyphObj.canBreakAfter)Pt=new A,wt=-me;else for(let Gt=ze;Gt--;)if(Gt===0&&ae==="break-word"){Pt=new A,wt=-me;break}else if(Ke.glyphAt(Gt).glyphObj.canBreakAfter){Pt=Ke.splitAt(Gt+1);const Wt=Pt.glyphAt(0).x;wt-=Wt;for(let bn=Pt.count;bn--;)Pt.glyphAt(bn).x-=Wt;break}Pt&&(Ke.isSoftWrapped=!0,Ke=Pt,Qe.push(Ke),Ie=z)}let lt=Ke.glyphAt(Ke.count);lt.glyphObj=te,lt.x=me+wt,lt.width=bt,lt.charIndex=Re,Fe===`
`&&(Ke=new A,Qe.push(Ke),wt=-(me+bt+H*U)+ue)}),Qe.forEach(te=>{for(let me=te.count;me--;){let{glyphObj:Re,x:Fe,width:bt}=te.glyphAt(me);if(!Re.isWhitespace){te.width=Fe+bt,te.width>Ie&&(Ie=te.width);return}}});let Le=0,Q=0;if(le&&(typeof le=="number"?Le=-le:typeof le=="string"&&(Le=-Ie*(le==="left"?0:le==="center"?.5:le==="right"?1:S(le)))),ce){if(typeof ce=="number")Q=-ce;else if(typeof ce=="string"){let te=Qe.length*V;Q=ce==="top"?0:ce==="top-baseline"?-Be:ce==="top-cap"?-Be-Mt*Ee:ce==="top-ex"?-Be-Ct*Ee:ce==="middle"?te/2:ce==="bottom"?te:ce==="bottom-baseline"?te-re+It*Ee:S(ce)*te}}if(!se){const te=e.getEmbeddingLevels(O,Z);qe=new Uint16Array(He),we=new Float32Array(He*2),Ze={},at=[o,o,-o,-o],Ge=[];let me=Be;ge&&(ft=new Float32Array(O.length*3)),K&&(et=new Uint8Array(He*3));let Re=0,Fe=-1,bt=-1,ze,Pt;if(Qe.forEach((lt,Gt)=>{let{count:Wt,width:bn}=lt;if(Wt>0){let ar=0;for(let Te=Wt;Te--&&lt.glyphAt(Te).glyphObj.isWhitespace;)ar++;let cr=0,oi=0;if(oe==="center")cr=(Ie-bn)/2;else if(oe==="right")cr=Ie-bn;else if(oe==="justify"&&lt.isSoftWrapped){let Te=0;for(let je=Wt-ar;je--;)lt.glyphAt(je).glyphObj.isWhitespace&&Te++;oi=(Ie-bn)/Te}if(oi||cr){let Te=0;for(let je=0;je<Wt;je++){let ct=lt.glyphAt(je);const Ht=ct.glyphObj;ct.x+=cr+Te,oi!==0&&Ht.isWhitespace&&je<Wt-ar&&(Te+=oi,ct.width+=oi)}}const Mr=e.getReorderSegments(O,te,lt.glyphAt(0).charIndex,lt.glyphAt(lt.count-1).charIndex);for(let Te=0;Te<Mr.length;Te++){const[je,ct]=Mr[Te];let Ht=1/0,nn=-1/0;for(let kn=0;kn<Wt;kn++)if(lt.glyphAt(kn).charIndex>=je){let De=kn,_t=kn;for(;_t<Wt;_t++){let Ot=lt.glyphAt(_t);if(Ot.charIndex>ct)break;_t<Wt-ar&&(Ht=Math.min(Ht,Ot.x),nn=Math.max(nn,Ot.x+Ot.width))}for(let Ot=De;Ot<_t;Ot++){const St=lt.glyphAt(Ot);St.x=nn-(St.x+St.width-Ht)}break}}let _r;const ne=Te=>_r=Te;for(let Te=0;Te<Wt;Te++){let je=lt.glyphAt(Te);_r=je.glyphObj;const ct=_r.index,Ht=te.levels[je.charIndex]&1;if(Ht){const nn=e.getMirroredCharacter(O[je.charIndex]);nn&&Ue.forEachGlyph(nn,0,0,ne)}if(ge){const{charIndex:nn}=je,kn=je.x+Le,De=je.x+je.width+Le;ft[nn*3]=Ht?De:kn,ft[nn*3+1]=Ht?kn:De,ft[nn*3+2]=me+yt+Q;const _t=nn-Fe;_t>1&&C(ft,Fe,_t),Fe=nn}if(K){const{charIndex:nn}=je;for(;nn>bt;)bt++,K.hasOwnProperty(bt)&&(Pt=K[bt])}if(!_r.isWhitespace&&!_r.isEmpty){const nn=Re++;Ze[ct]||(Ze[ct]={path:_r.path,pathBounds:[_r.xMin,_r.yMin,_r.xMax,_r.yMax]});const kn=je.x+Le,De=me+Q;we[nn*2]=kn,we[nn*2+1]=De;const _t=kn+_r.xMin*Ee,Ot=De+_r.yMin*Ee,St=kn+_r.xMax*Ee,Xt=De+_r.yMax*Ee;_t<at[0]&&(at[0]=_t),Ot<at[1]&&(at[1]=Ot),St>at[2]&&(at[2]=St),Xt>at[3]&&(at[3]=Xt),nn%$e===0&&(ze={start:nn,end:nn,rect:[o,o,-o,-o]},Ge.push(ze)),ze.end++;const Wn=ze.rect;if(_t<Wn[0]&&(Wn[0]=_t),Ot<Wn[1]&&(Wn[1]=Ot),St>Wn[2]&&(Wn[2]=St),Xt>Wn[3]&&(Wn[3]=Xt),qe[nn]=ct,K){const ir=nn*3;et[ir]=Pt>>16&255,et[ir+1]=Pt>>8&255,et[ir+2]=Pt&255}}}}me-=V}),ft){const lt=O.length-Fe;lt>1&&C(ft,Fe,lt)}}Se.typesetting=M()-gt,ie({glyphIds:qe,glyphPositions:we,glyphData:Ze,caretPositions:ft,caretHeight:mt,glyphColors:et,chunkedBounds:Ge,fontSize:U,unitsPerEm:kt,ascender:st*Ee,descender:It*Ee,capHeight:Mt*Ee,xHeight:Ct*Ee,lineHeight:V,topBaseline:Be,blockBounds:[Le,Q-Qe.length*V,Le+Ie,Q],visibleBounds:at,timings:Se})})}function b(O,P){y(O,D=>{const[U,H,V,z]=D.blockBounds;P({width:V-U,height:z-H})},{metricsOnly:!0})}function S(O){let P=O.match(/^([\d.]+)%$/),D=P?parseFloat(P[1]):NaN;return isNaN(D)?0:D/100}function C(O,P,D){const U=O[P*3],H=O[P*3+1],V=O[P*3+2],z=(H-U)/D;for(let Z=0;Z<D;Z++){const oe=(P+Z)*3;O[oe]=U+z*Z,O[oe+1]=U+z*(Z+1),O[oe+2]=V}}function M(){return(self.performance||Date).now()}function A(){this.data=[]}const k=["glyphObj","x","width","charIndex"];return A.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/k.length)},glyphAt(O){let P=A.flyweight;return P.data=this.data,P.index=O,P},splitAt(O){let P=new A;return P.data=this.data.splice(O*k.length),P}},A.flyweight=k.reduce((O,P,D,U)=>(Object.defineProperty(O,P,{get(){return this.data[this.index*k.length+D]},set(H){this.data[this.index*k.length+D]=H}}),O),{data:null,index:0}),{typeset:y,measure:b,loadFont:g}}const W1=()=>(self.performance||Date).now(),M2=uee();let GW;function HIe(n,e,t,r,s,o,l,u,h,f,g=!0){return g?WIe(n,e,t,r,s,o,l,u,h,f).then(null,y=>(GW||(console.warn("WebGL SDF generation failed, falling back to JS",y),GW=!0),VW(n,e,t,r,s,o,l,u,h,f))):VW(n,e,t,r,s,o,l,u,h,f)}const kI=[],GIe=5;let nB=0;function hee(){const n=W1();for(;kI.length&&W1()-n<GIe;)kI.shift()();nB=kI.length?setTimeout(hee,0):0}const WIe=(...n)=>new Promise((e,t)=>{kI.push(()=>{const r=W1();try{M2.webgl.generateIntoCanvas(...n),e({timing:W1()-r})}catch(s){t(s)}}),nB||(nB=setTimeout(hee,0))}),VIe=4,jIe=2e3,WW={};let YIe=0;function VW(n,e,t,r,s,o,l,u,h,f){const g="TroikaTextSDFGenerator_JS_"+YIe++%VIe;let y=WW[g];return y||(y=WW[g]={workerModule:HC({name:g,workerId:g,dependencies:[uee,W1],init(b,S){const C=b().javascript.generate;return function(...M){const A=S();return{textureData:C(...M),timing:S()-A}}},getTransferables(b){return[b.textureData.buffer]}}),requests:0,idleTimer:null}),y.requests++,clearTimeout(y.idleTimer),y.workerModule(n,e,t,r,s,o).then(({textureData:b,timing:S})=>{const C=W1(),M=new Uint8Array(b.length*4);for(let A=0;A<b.length;A++)M[A*4+f]=b[A];return M2.webglUtils.renderImageData(l,M,u,h,n,e,1<<3-f),S+=W1()-C,--y.requests===0&&(y.idleTimer=setTimeout(()=>{RIe(g)},jIe)),{timing:S}})}function XIe(n){n._warm||(M2.webgl.isSupported(n),n._warm=!0)}const KIe=M2.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function JIe(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(s){var o=e._bin,l=new Uint8Array(s);if(o.readASCII(l,0,4)=="ttcf"){var u=4;o.readUshort(l,u),u+=2,o.readUshort(l,u),u+=2;var h=o.readUint(l,u);u+=4;for(var f=[],g=0;g<h;g++){var y=o.readUint(l,u);u+=4,f.push(e._readFont(l,y))}return f}return[e._readFont(l,0)]},_readFont:function(s,o){var l=e._bin,u=o;l.readFixed(s,o),o+=4;var h=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2;for(var f=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],g={_data:s,_offset:u},y={},b=0;b<h;b++){var S=l.readASCII(s,o,4);o+=4,l.readUint(s,o),o+=4;var C=l.readUint(s,o);o+=4;var M=l.readUint(s,o);o+=4,y[S]={offset:C,length:M}}for(b=0;b<f.length;b++){var A=f[b];y[A]&&(g[A.trim()]=e[A.trim()].parse(s,y[A].offset,y[A].length,g))}return g},_tabOffset:function(s,o,l){for(var u=e._bin,h=u.readUshort(s,l+4),f=l+12,g=0;g<h;g++){var y=u.readASCII(s,f,4);f+=4,u.readUint(s,f),f+=4;var b=u.readUint(s,f);if(f+=4,u.readUint(s,f),f+=4,y==o)return b}return 0}};e._bin={readFixed:function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<8|s[o+3])/65540},readF2dot14:function(s,o){return e._bin.readShort(s,o)/16384},readInt:function(s,o){return e._bin._view(s).getInt32(o)},readInt8:function(s,o){return e._bin._view(s).getInt8(o)},readShort:function(s,o){return e._bin._view(s).getInt16(o)},readUshort:function(s,o){return e._bin._view(s).getUint16(o)},readUshorts:function(s,o,l){for(var u=[],h=0;h<l;h++)u.push(e._bin.readUshort(s,o+2*h));return u},readUint:function(s,o){return e._bin._view(s).getUint32(o)},readUint64:function(s,o){return 4294967296*e._bin.readUint(s,o)+e._bin.readUint(s,o+4)},readASCII:function(s,o,l){for(var u="",h=0;h<l;h++)u+=String.fromCharCode(s[o+h]);return u},readUnicode:function(s,o,l){for(var u="",h=0;h<l;h++){var f=s[o++]<<8|s[o++];u+=String.fromCharCode(f)}return u},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(s,o,l){var u=e._bin._tdec;return u&&o==0&&l==s.length?u.decode(s):e._bin.readASCII(s,o,l)},readBytes:function(s,o,l){for(var u=[],h=0;h<l;h++)u.push(s[o+h]);return u},readASCIIArray:function(s,o,l){for(var u=[],h=0;h<l;h++)u.push(String.fromCharCode(s[o+h]));return u},_view:function(s){return s._dataView||(s._dataView=s.buffer?new DataView(s.buffer,s.byteOffset,s.byteLength):new DataView(new Uint8Array(s).buffer))}},e._lctf={},e._lctf.parse=function(s,o,l,u,h){var f=e._bin,g={},y=o;f.readFixed(s,o),o+=4;var b=f.readUshort(s,o);o+=2;var S=f.readUshort(s,o);o+=2;var C=f.readUshort(s,o);return o+=2,g.scriptList=e._lctf.readScriptList(s,y+b),g.featureList=e._lctf.readFeatureList(s,y+S),g.lookupList=e._lctf.readLookupList(s,y+C,h),g},e._lctf.readLookupList=function(s,o,l){var u=e._bin,h=o,f=[],g=u.readUshort(s,o);o+=2;for(var y=0;y<g;y++){var b=u.readUshort(s,o);o+=2;var S=e._lctf.readLookupTable(s,h+b,l);f.push(S)}return f},e._lctf.readLookupTable=function(s,o,l){var u=e._bin,h=o,f={tabs:[]};f.ltype=u.readUshort(s,o),o+=2,f.flag=u.readUshort(s,o),o+=2;var g=u.readUshort(s,o);o+=2;for(var y=f.ltype,b=0;b<g;b++){var S=u.readUshort(s,o);o+=2;var C=l(s,y,h+S,f);f.tabs.push(C)}return f},e._lctf.numOfOnes=function(s){for(var o=0,l=0;l<32;l++)s>>>l&1&&o++;return o},e._lctf.readClassDef=function(s,o){var l=e._bin,u=[],h=l.readUshort(s,o);if(o+=2,h==1){var f=l.readUshort(s,o);o+=2;var g=l.readUshort(s,o);o+=2;for(var y=0;y<g;y++)u.push(f+y),u.push(f+y),u.push(l.readUshort(s,o)),o+=2}if(h==2){var b=l.readUshort(s,o);for(o+=2,y=0;y<b;y++)u.push(l.readUshort(s,o)),o+=2,u.push(l.readUshort(s,o)),o+=2,u.push(l.readUshort(s,o)),o+=2}return u},e._lctf.getInterval=function(s,o){for(var l=0;l<s.length;l+=3){var u=s[l],h=s[l+1];if(s[l+2],u<=o&&o<=h)return l}return-1},e._lctf.readCoverage=function(s,o){var l=e._bin,u={};u.fmt=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);return o+=2,u.fmt==1&&(u.tab=l.readUshorts(s,o,h)),u.fmt==2&&(u.tab=l.readUshorts(s,o,3*h)),u},e._lctf.coverageIndex=function(s,o){var l=s.tab;if(s.fmt==1)return l.indexOf(o);if(s.fmt==2){var u=e._lctf.getInterval(l,o);if(u!=-1)return l[u+2]+(o-l[u])}return-1},e._lctf.readFeatureList=function(s,o){var l=e._bin,u=o,h=[],f=l.readUshort(s,o);o+=2;for(var g=0;g<f;g++){var y=l.readASCII(s,o,4);o+=4;var b=l.readUshort(s,o);o+=2;var S=e._lctf.readFeatureTable(s,u+b);S.tag=y.trim(),h.push(S)}return h},e._lctf.readFeatureTable=function(s,o){var l=e._bin,u=o,h={},f=l.readUshort(s,o);o+=2,f>0&&(h.featureParams=u+f);var g=l.readUshort(s,o);o+=2,h.tab=[];for(var y=0;y<g;y++)h.tab.push(l.readUshort(s,o+2*y));return h},e._lctf.readScriptList=function(s,o){var l=e._bin,u=o,h={},f=l.readUshort(s,o);o+=2;for(var g=0;g<f;g++){var y=l.readASCII(s,o,4);o+=4;var b=l.readUshort(s,o);o+=2,h[y.trim()]=e._lctf.readScriptTable(s,u+b)}return h},e._lctf.readScriptTable=function(s,o){var l=e._bin,u=o,h={},f=l.readUshort(s,o);o+=2,h.default=e._lctf.readLangSysTable(s,u+f);var g=l.readUshort(s,o);o+=2;for(var y=0;y<g;y++){var b=l.readASCII(s,o,4);o+=4;var S=l.readUshort(s,o);o+=2,h[b.trim()]=e._lctf.readLangSysTable(s,u+S)}return h},e._lctf.readLangSysTable=function(s,o){var l=e._bin,u={};l.readUshort(s,o),o+=2,u.reqFeature=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);return o+=2,u.features=l.readUshorts(s,o,h),u},e.CFF={},e.CFF.parse=function(s,o,l){var u=e._bin;(s=new Uint8Array(s.buffer,o,l))[o=0],s[++o],s[++o],s[++o],o++;var h=[];o=e.CFF.readIndex(s,o,h);for(var f=[],g=0;g<h.length-1;g++)f.push(u.readASCII(s,o+h[g],h[g+1]-h[g]));o+=h[h.length-1];var y=[];o=e.CFF.readIndex(s,o,y);var b=[];for(g=0;g<y.length-1;g++)b.push(e.CFF.readDict(s,o+y[g],o+y[g+1]));o+=y[y.length-1];var S=b[0],C=[];o=e.CFF.readIndex(s,o,C);var M=[];for(g=0;g<C.length-1;g++)M.push(u.readASCII(s,o+C[g],C[g+1]-C[g]));if(o+=C[C.length-1],e.CFF.readSubrs(s,o,S),S.CharStrings){o=S.CharStrings,C=[],o=e.CFF.readIndex(s,o,C);var A=[];for(g=0;g<C.length-1;g++)A.push(u.readBytes(s,o+C[g],C[g+1]-C[g]));S.CharStrings=A}if(S.ROS){o=S.FDArray;var k=[];for(o=e.CFF.readIndex(s,o,k),S.FDArray=[],g=0;g<k.length-1;g++){var O=e.CFF.readDict(s,o+k[g],o+k[g+1]);e.CFF._readFDict(s,O,M),S.FDArray.push(O)}o+=k[k.length-1],o=S.FDSelect,S.FDSelect=[];var P=s[o];if(o++,P!=3)throw P;var D=u.readUshort(s,o);for(o+=2,g=0;g<D+1;g++)S.FDSelect.push(u.readUshort(s,o),s[o+2]),o+=3}return S.Encoding&&(S.Encoding=e.CFF.readEncoding(s,S.Encoding,S.CharStrings.length)),S.charset&&(S.charset=e.CFF.readCharset(s,S.charset,S.CharStrings.length)),e.CFF._readFDict(s,S,M),S},e.CFF._readFDict=function(s,o,l){var u;for(var h in o.Private&&(u=o.Private[1],o.Private=e.CFF.readDict(s,u,u+o.Private[0]),o.Private.Subrs&&e.CFF.readSubrs(s,u+o.Private.Subrs,o.Private)),o)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(h)!=-1&&(o[h]=l[o[h]-426+35])},e.CFF.readSubrs=function(s,o,l){var u=e._bin,h=[];o=e.CFF.readIndex(s,o,h);var f,g=h.length;f=g<1240?107:g<33900?1131:32768,l.Bias=f,l.Subrs=[];for(var y=0;y<h.length-1;y++)l.Subrs.push(u.readBytes(s,o+h[y],h[y+1]-h[y]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(s,o){for(var l=0;l<s.charset.length;l++)if(s.charset[l]==o)return l;return-1},e.CFF.glyphBySE=function(s,o){return o<0||o>255?-1:e.CFF.glyphByUnicode(s,e.CFF.tableSE[o])},e.CFF.readEncoding=function(s,o,l){e._bin;var u=[".notdef"],h=s[o];if(o++,h!=0)throw"error: unknown encoding format: "+h;var f=s[o];o++;for(var g=0;g<f;g++)u.push(s[o+g]);return u},e.CFF.readCharset=function(s,o,l){var u=e._bin,h=[".notdef"],f=s[o];if(o++,f==0)for(var g=0;g<l;g++){var y=u.readUshort(s,o);o+=2,h.push(y)}else{if(f!=1&&f!=2)throw"error: format: "+f;for(;h.length<l;){y=u.readUshort(s,o),o+=2;var b=0;for(f==1?(b=s[o],o++):(b=u.readUshort(s,o),o+=2),g=0;g<=b;g++)h.push(y),y++}}return h},e.CFF.readIndex=function(s,o,l){var u=e._bin,h=u.readUshort(s,o)+1,f=s[o+=2];if(o++,f==1)for(var g=0;g<h;g++)l.push(s[o+g]);else if(f==2)for(g=0;g<h;g++)l.push(u.readUshort(s,o+2*g));else if(f==3)for(g=0;g<h;g++)l.push(16777215&u.readUint(s,o+3*g-1));else if(h!=1)throw"unsupported offset size: "+f+", count: "+h;return(o+=h*f)-1},e.CFF.getCharString=function(s,o,l){var u=e._bin,h=s[o],f=s[o+1];s[o+2],s[o+3],s[o+4];var g=1,y=null,b=null;h<=20&&(y=h,g=1),h==12&&(y=100*h+f,g=2),21<=h&&h<=27&&(y=h,g=1),h==28&&(b=u.readShort(s,o+1),g=3),29<=h&&h<=31&&(y=h,g=1),32<=h&&h<=246&&(b=h-139,g=1),247<=h&&h<=250&&(b=256*(h-247)+f+108,g=2),251<=h&&h<=254&&(b=256*-(h-251)-f-108,g=2),h==255&&(b=u.readInt(s,o+1)/65535,g=5),l.val=b??"o"+y,l.size=g},e.CFF.readCharString=function(s,o,l){for(var u=o+l,h=e._bin,f=[];o<u;){var g=s[o],y=s[o+1];s[o+2],s[o+3],s[o+4];var b=1,S=null,C=null;g<=20&&(S=g,b=1),g==12&&(S=100*g+y,b=2),g!=19&&g!=20||(S=g,b=2),21<=g&&g<=27&&(S=g,b=1),g==28&&(C=h.readShort(s,o+1),b=3),29<=g&&g<=31&&(S=g,b=1),32<=g&&g<=246&&(C=g-139,b=1),247<=g&&g<=250&&(C=256*(g-247)+y+108,b=2),251<=g&&g<=254&&(C=256*-(g-251)-y-108,b=2),g==255&&(C=h.readInt(s,o+1)/65535,b=5),f.push(C??"o"+S),o+=b}return f},e.CFF.readDict=function(s,o,l){for(var u=e._bin,h={},f=[];o<l;){var g=s[o],y=s[o+1];s[o+2],s[o+3],s[o+4];var b=1,S=null,C=null;if(g==28&&(C=u.readShort(s,o+1),b=3),g==29&&(C=u.readInt(s,o+1),b=5),32<=g&&g<=246&&(C=g-139,b=1),247<=g&&g<=250&&(C=256*(g-247)+y+108,b=2),251<=g&&g<=254&&(C=256*-(g-251)-y-108,b=2),g==255)throw C=u.readInt(s,o+1)/65535,b=5,"unknown number";if(g==30){var M=[];for(b=1;;){var A=s[o+b];b++;var k=A>>4,O=15&A;if(k!=15&&M.push(k),O!=15&&M.push(O),O==15)break}for(var P="",D=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],U=0;U<M.length;U++)P+=D[M[U]];C=parseFloat(P)}g<=21&&(S=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][g],b=1,g==12&&(S=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][y],b=2)),S!=null?(h[S]=f.length==1?f[0]:f,f=[]):f.push(C),o+=b}return h},e.cmap={},e.cmap.parse=function(s,o,l){s=new Uint8Array(s.buffer,o,l),o=0;var u=e._bin,h={};u.readUshort(s,o),o+=2;var f=u.readUshort(s,o);o+=2;var g=[];h.tables=[];for(var y=0;y<f;y++){var b=u.readUshort(s,o);o+=2;var S=u.readUshort(s,o);o+=2;var C=u.readUint(s,o);o+=4;var M="p"+b+"e"+S,A=g.indexOf(C);if(A==-1){var k;A=h.tables.length,g.push(C);var O=u.readUshort(s,C);O==0?k=e.cmap.parse0(s,C):O==4?k=e.cmap.parse4(s,C):O==6?k=e.cmap.parse6(s,C):O==12?k=e.cmap.parse12(s,C):console.debug("unknown format: "+O,b,S,C),h.tables.push(k)}if(h[M]!=null)throw"multiple tables for one platform+encoding";h[M]=A}return h},e.cmap.parse0=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2,u.map=[];for(var f=0;f<h-6;f++)u.map.push(s[o+f]);return u},e.cmap.parse4=function(s,o){var l=e._bin,u=o,h={};h.format=l.readUshort(s,o),o+=2;var f=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2;var g=l.readUshort(s,o);o+=2;var y=g/2;h.searchRange=l.readUshort(s,o),o+=2,h.entrySelector=l.readUshort(s,o),o+=2,h.rangeShift=l.readUshort(s,o),o+=2,h.endCount=l.readUshorts(s,o,y),o+=2*y,o+=2,h.startCount=l.readUshorts(s,o,y),o+=2*y,h.idDelta=[];for(var b=0;b<y;b++)h.idDelta.push(l.readShort(s,o)),o+=2;for(h.idRangeOffset=l.readUshorts(s,o,y),o+=2*y,h.glyphIdArray=[];o<u+f;)h.glyphIdArray.push(l.readUshort(s,o)),o+=2;return h},e.cmap.parse6=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,u.firstCode=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2,u.glyphIdArray=[];for(var f=0;f<h;f++)u.glyphIdArray.push(l.readUshort(s,o)),o+=2;return u},e.cmap.parse12=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2,o+=2,l.readUint(s,o),o+=4,l.readUint(s,o),o+=4;var h=l.readUint(s,o);o+=4,u.groups=[];for(var f=0;f<h;f++){var g=o+12*f,y=l.readUint(s,g+0),b=l.readUint(s,g+4),S=l.readUint(s,g+8);u.groups.push([y,b,S])}return u},e.glyf={},e.glyf.parse=function(s,o,l,u){for(var h=[],f=0;f<u.maxp.numGlyphs;f++)h.push(null);return h},e.glyf._parseGlyf=function(s,o){var l=e._bin,u=s._data,h=e._tabOffset(u,"glyf",s._offset)+s.loca[o];if(s.loca[o]==s.loca[o+1])return null;var f={};if(f.noc=l.readShort(u,h),h+=2,f.xMin=l.readShort(u,h),h+=2,f.yMin=l.readShort(u,h),h+=2,f.xMax=l.readShort(u,h),h+=2,f.yMax=l.readShort(u,h),h+=2,f.xMin>=f.xMax||f.yMin>=f.yMax)return null;if(f.noc>0){f.endPts=[];for(var g=0;g<f.noc;g++)f.endPts.push(l.readUshort(u,h)),h+=2;var y=l.readUshort(u,h);if(h+=2,u.length-h<y)return null;f.instructions=l.readBytes(u,h,y),h+=y;var b=f.endPts[f.noc-1]+1;for(f.flags=[],g=0;g<b;g++){var S=u[h];if(h++,f.flags.push(S),(8&S)!=0){var C=u[h];h++;for(var M=0;M<C;M++)f.flags.push(S),g++}}for(f.xs=[],g=0;g<b;g++){var A=(2&f.flags[g])!=0,k=(16&f.flags[g])!=0;A?(f.xs.push(k?u[h]:-u[h]),h++):k?f.xs.push(0):(f.xs.push(l.readShort(u,h)),h+=2)}for(f.ys=[],g=0;g<b;g++)A=(4&f.flags[g])!=0,k=(32&f.flags[g])!=0,A?(f.ys.push(k?u[h]:-u[h]),h++):k?f.ys.push(0):(f.ys.push(l.readShort(u,h)),h+=2);var O=0,P=0;for(g=0;g<b;g++)O+=f.xs[g],P+=f.ys[g],f.xs[g]=O,f.ys[g]=P}else{var D;f.parts=[];do{D=l.readUshort(u,h),h+=2;var U={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(f.parts.push(U),U.glyphIndex=l.readUshort(u,h),h+=2,1&D){var H=l.readShort(u,h);h+=2;var V=l.readShort(u,h);h+=2}else H=l.readInt8(u,h),h++,V=l.readInt8(u,h),h++;2&D?(U.m.tx=H,U.m.ty=V):(U.p1=H,U.p2=V),8&D?(U.m.a=U.m.d=l.readF2dot14(u,h),h+=2):64&D?(U.m.a=l.readF2dot14(u,h),h+=2,U.m.d=l.readF2dot14(u,h),h+=2):128&D&&(U.m.a=l.readF2dot14(u,h),h+=2,U.m.b=l.readF2dot14(u,h),h+=2,U.m.c=l.readF2dot14(u,h),h+=2,U.m.d=l.readF2dot14(u,h),h+=2)}while(32&D);if(256&D){var z=l.readUshort(u,h);for(h+=2,f.instr=[],g=0;g<z;g++)f.instr.push(u[h]),h++}}return f},e.GPOS={},e.GPOS.parse=function(s,o,l,u){return e._lctf.parse(s,o,l,u,e.GPOS.subt)},e.GPOS.subt=function(s,o,l,u){var h=e._bin,f=l,g={};if(g.fmt=h.readUshort(s,l),l+=2,o==1||o==2||o==3||o==7||o==8&&g.fmt<=2){var y=h.readUshort(s,l);l+=2,g.coverage=e._lctf.readCoverage(s,y+f)}if(o==1&&g.fmt==1){var b=h.readUshort(s,l);l+=2;var S=e._lctf.numOfOnes(b);b!=0&&(g.pos=e.GPOS.readValueRecord(s,l,b))}else if(o==2&&g.fmt>=1&&g.fmt<=2){b=h.readUshort(s,l),l+=2;var C=h.readUshort(s,l);l+=2,S=e._lctf.numOfOnes(b);var M=e._lctf.numOfOnes(C);if(g.fmt==1){g.pairsets=[];var A=h.readUshort(s,l);l+=2;for(var k=0;k<A;k++){var O=f+h.readUshort(s,l);l+=2;var P=h.readUshort(s,O);O+=2;for(var D=[],U=0;U<P;U++){var H=h.readUshort(s,O);O+=2,b!=0&&(q=e.GPOS.readValueRecord(s,O,b),O+=2*S),C!=0&&(ae=e.GPOS.readValueRecord(s,O,C),O+=2*M),D.push({gid2:H,val1:q,val2:ae})}g.pairsets.push(D)}}if(g.fmt==2){var V=h.readUshort(s,l);l+=2;var z=h.readUshort(s,l);l+=2;var Z=h.readUshort(s,l);l+=2;var oe=h.readUshort(s,l);for(l+=2,g.classDef1=e._lctf.readClassDef(s,f+V),g.classDef2=e._lctf.readClassDef(s,f+z),g.matrix=[],k=0;k<Z;k++){var ue=[];for(U=0;U<oe;U++){var q=null,ae=null;b!=0&&(q=e.GPOS.readValueRecord(s,l,b),l+=2*S),C!=0&&(ae=e.GPOS.readValueRecord(s,l,C),l+=2*M),ue.push({val1:q,val2:ae})}g.matrix.push(ue)}}}else{if(o==9&&g.fmt==1){var le=h.readUshort(s,l);l+=2;var ce=h.readUint(s,l);if(l+=4,u.ltype==9)u.ltype=le;else if(u.ltype!=le)throw"invalid extension substitution";return e.GPOS.subt(s,u.ltype,f+ce)}console.debug("unsupported GPOS table LookupType",o,"format",g.fmt)}return g},e.GPOS.readValueRecord=function(s,o,l){var u=e._bin,h=[];return h.push(1&l?u.readShort(s,o):0),o+=1&l?2:0,h.push(2&l?u.readShort(s,o):0),o+=2&l?2:0,h.push(4&l?u.readShort(s,o):0),o+=4&l?2:0,h.push(8&l?u.readShort(s,o):0),o+=8&l?2:0,h},e.GSUB={},e.GSUB.parse=function(s,o,l,u){return e._lctf.parse(s,o,l,u,e.GSUB.subt)},e.GSUB.subt=function(s,o,l,u){var h=e._bin,f=l,g={};if(g.fmt=h.readUshort(s,l),l+=2,o!=1&&o!=4&&o!=5&&o!=6)return null;if(o==1||o==4||o==5&&g.fmt<=2||o==6&&g.fmt<=2){var y=h.readUshort(s,l);l+=2,g.coverage=e._lctf.readCoverage(s,f+y)}if(o==1&&g.fmt>=1&&g.fmt<=2){if(g.fmt==1)g.delta=h.readShort(s,l),l+=2;else if(g.fmt==2){var b=h.readUshort(s,l);l+=2,g.newg=h.readUshorts(s,l,b),l+=2*g.newg.length}}else if(o==4){g.vals=[],b=h.readUshort(s,l),l+=2;for(var S=0;S<b;S++){var C=h.readUshort(s,l);l+=2,g.vals.push(e.GSUB.readLigatureSet(s,f+C))}}else if(o==5&&g.fmt==2){if(g.fmt==2){var M=h.readUshort(s,l);l+=2,g.cDef=e._lctf.readClassDef(s,f+M),g.scset=[];var A=h.readUshort(s,l);for(l+=2,S=0;S<A;S++){var k=h.readUshort(s,l);l+=2,g.scset.push(k==0?null:e.GSUB.readSubClassSet(s,f+k))}}}else if(o==6&&g.fmt==3){if(g.fmt==3){for(S=0;S<3;S++){b=h.readUshort(s,l),l+=2;for(var O=[],P=0;P<b;P++)O.push(e._lctf.readCoverage(s,f+h.readUshort(s,l+2*P)));l+=2*b,S==0&&(g.backCvg=O),S==1&&(g.inptCvg=O),S==2&&(g.ahedCvg=O)}b=h.readUshort(s,l),l+=2,g.lookupRec=e.GSUB.readSubstLookupRecords(s,l,b)}}else{if(o==7&&g.fmt==1){var D=h.readUshort(s,l);l+=2;var U=h.readUint(s,l);if(l+=4,u.ltype==9)u.ltype=D;else if(u.ltype!=D)throw"invalid extension substitution";return e.GSUB.subt(s,u.ltype,f+U)}console.debug("unsupported GSUB table LookupType",o,"format",g.fmt)}return g},e.GSUB.readSubClassSet=function(s,o){var l=e._bin.readUshort,u=o,h=[],f=l(s,o);o+=2;for(var g=0;g<f;g++){var y=l(s,o);o+=2,h.push(e.GSUB.readSubClassRule(s,u+y))}return h},e.GSUB.readSubClassRule=function(s,o){var l=e._bin.readUshort,u={},h=l(s,o),f=l(s,o+=2);o+=2,u.input=[];for(var g=0;g<h-1;g++)u.input.push(l(s,o)),o+=2;return u.substLookupRecords=e.GSUB.readSubstLookupRecords(s,o,f),u},e.GSUB.readSubstLookupRecords=function(s,o,l){for(var u=e._bin.readUshort,h=[],f=0;f<l;f++)h.push(u(s,o),u(s,o+2)),o+=4;return h},e.GSUB.readChainSubClassSet=function(s,o){var l=e._bin,u=o,h=[],f=l.readUshort(s,o);o+=2;for(var g=0;g<f;g++){var y=l.readUshort(s,o);o+=2,h.push(e.GSUB.readChainSubClassRule(s,u+y))}return h},e.GSUB.readChainSubClassRule=function(s,o){for(var l=e._bin,u={},h=["backtrack","input","lookahead"],f=0;f<h.length;f++){var g=l.readUshort(s,o);o+=2,f==1&&g--,u[h[f]]=l.readUshorts(s,o,g),o+=2*u[h[f]].length}return g=l.readUshort(s,o),o+=2,u.subst=l.readUshorts(s,o,2*g),o+=2*u.subst.length,u},e.GSUB.readLigatureSet=function(s,o){var l=e._bin,u=o,h=[],f=l.readUshort(s,o);o+=2;for(var g=0;g<f;g++){var y=l.readUshort(s,o);o+=2,h.push(e.GSUB.readLigature(s,u+y))}return h},e.GSUB.readLigature=function(s,o){var l=e._bin,u={chain:[]};u.nglyph=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2;for(var f=0;f<h-1;f++)u.chain.push(l.readUshort(s,o)),o+=2;return u},e.head={},e.head.parse=function(s,o,l){var u=e._bin,h={};return u.readFixed(s,o),o+=4,h.fontRevision=u.readFixed(s,o),o+=4,u.readUint(s,o),o+=4,u.readUint(s,o),o+=4,h.flags=u.readUshort(s,o),o+=2,h.unitsPerEm=u.readUshort(s,o),o+=2,h.created=u.readUint64(s,o),o+=8,h.modified=u.readUint64(s,o),o+=8,h.xMin=u.readShort(s,o),o+=2,h.yMin=u.readShort(s,o),o+=2,h.xMax=u.readShort(s,o),o+=2,h.yMax=u.readShort(s,o),o+=2,h.macStyle=u.readUshort(s,o),o+=2,h.lowestRecPPEM=u.readUshort(s,o),o+=2,h.fontDirectionHint=u.readShort(s,o),o+=2,h.indexToLocFormat=u.readShort(s,o),o+=2,h.glyphDataFormat=u.readShort(s,o),o+=2,h},e.hhea={},e.hhea.parse=function(s,o,l){var u=e._bin,h={};return u.readFixed(s,o),o+=4,h.ascender=u.readShort(s,o),o+=2,h.descender=u.readShort(s,o),o+=2,h.lineGap=u.readShort(s,o),o+=2,h.advanceWidthMax=u.readUshort(s,o),o+=2,h.minLeftSideBearing=u.readShort(s,o),o+=2,h.minRightSideBearing=u.readShort(s,o),o+=2,h.xMaxExtent=u.readShort(s,o),o+=2,h.caretSlopeRise=u.readShort(s,o),o+=2,h.caretSlopeRun=u.readShort(s,o),o+=2,h.caretOffset=u.readShort(s,o),o+=2,o+=8,h.metricDataFormat=u.readShort(s,o),o+=2,h.numberOfHMetrics=u.readUshort(s,o),o+=2,h},e.hmtx={},e.hmtx.parse=function(s,o,l,u){for(var h=e._bin,f={aWidth:[],lsBearing:[]},g=0,y=0,b=0;b<u.maxp.numGlyphs;b++)b<u.hhea.numberOfHMetrics&&(g=h.readUshort(s,o),o+=2,y=h.readShort(s,o),o+=2),f.aWidth.push(g),f.lsBearing.push(y);return f},e.kern={},e.kern.parse=function(s,o,l,u){var h=e._bin,f=h.readUshort(s,o);if(o+=2,f==1)return e.kern.parseV1(s,o-2,l,u);var g=h.readUshort(s,o);o+=2;for(var y={glyph1:[],rval:[]},b=0;b<g;b++){o+=2,l=h.readUshort(s,o),o+=2;var S=h.readUshort(s,o);o+=2;var C=S>>>8;if((C&=15)!=0)throw"unknown kern table format: "+C;o=e.kern.readFormat0(s,o,y)}return y},e.kern.parseV1=function(s,o,l,u){var h=e._bin;h.readFixed(s,o),o+=4;var f=h.readUint(s,o);o+=4;for(var g={glyph1:[],rval:[]},y=0;y<f;y++){h.readUint(s,o),o+=4;var b=h.readUshort(s,o);o+=2,h.readUshort(s,o),o+=2;var S=b>>>8;if((S&=15)!=0)throw"unknown kern table format: "+S;o=e.kern.readFormat0(s,o,g)}return g},e.kern.readFormat0=function(s,o,l){var u=e._bin,h=-1,f=u.readUshort(s,o);o+=2,u.readUshort(s,o),o+=2,u.readUshort(s,o),o+=2,u.readUshort(s,o),o+=2;for(var g=0;g<f;g++){var y=u.readUshort(s,o);o+=2;var b=u.readUshort(s,o);o+=2;var S=u.readShort(s,o);o+=2,y!=h&&(l.glyph1.push(y),l.rval.push({glyph2:[],vals:[]}));var C=l.rval[l.rval.length-1];C.glyph2.push(b),C.vals.push(S),h=y}return o},e.loca={},e.loca.parse=function(s,o,l,u){var h=e._bin,f=[],g=u.head.indexToLocFormat,y=u.maxp.numGlyphs+1;if(g==0)for(var b=0;b<y;b++)f.push(h.readUshort(s,o+(b<<1))<<1);if(g==1)for(b=0;b<y;b++)f.push(h.readUint(s,o+(b<<2)));return f},e.maxp={},e.maxp.parse=function(s,o,l){var u=e._bin,h={},f=u.readUint(s,o);return o+=4,h.numGlyphs=u.readUshort(s,o),o+=2,f==65536&&(h.maxPoints=u.readUshort(s,o),o+=2,h.maxContours=u.readUshort(s,o),o+=2,h.maxCompositePoints=u.readUshort(s,o),o+=2,h.maxCompositeContours=u.readUshort(s,o),o+=2,h.maxZones=u.readUshort(s,o),o+=2,h.maxTwilightPoints=u.readUshort(s,o),o+=2,h.maxStorage=u.readUshort(s,o),o+=2,h.maxFunctionDefs=u.readUshort(s,o),o+=2,h.maxInstructionDefs=u.readUshort(s,o),o+=2,h.maxStackElements=u.readUshort(s,o),o+=2,h.maxSizeOfInstructions=u.readUshort(s,o),o+=2,h.maxComponentElements=u.readUshort(s,o),o+=2,h.maxComponentDepth=u.readUshort(s,o),o+=2),h},e.name={},e.name.parse=function(s,o,l){var u=e._bin,h={};u.readUshort(s,o),o+=2;var f=u.readUshort(s,o);o+=2,u.readUshort(s,o);for(var g,y=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],b=o+=2,S=0;S<f;S++){var C=u.readUshort(s,o);o+=2;var M=u.readUshort(s,o);o+=2;var A=u.readUshort(s,o);o+=2;var k=u.readUshort(s,o);o+=2;var O=u.readUshort(s,o);o+=2;var P=u.readUshort(s,o);o+=2;var D,U=y[k],H=b+12*f+P;if(C==0)D=u.readUnicode(s,H,O/2);else if(C==3&&M==0)D=u.readUnicode(s,H,O/2);else if(M==0)D=u.readASCII(s,H,O);else if(M==1)D=u.readUnicode(s,H,O/2);else if(M==3)D=u.readUnicode(s,H,O/2);else{if(C!=1)throw"unknown encoding "+M+", platformID: "+C;D=u.readASCII(s,H,O),console.debug("reading unknown MAC encoding "+M+" as ASCII")}var V="p"+C+","+A.toString(16);h[V]==null&&(h[V]={}),h[V][U!==void 0?U:k]=D,h[V]._lang=A}for(var z in h)if(h[z].postScriptName!=null&&h[z]._lang==1033)return h[z];for(var z in h)if(h[z].postScriptName!=null&&h[z]._lang==0)return h[z];for(var z in h)if(h[z].postScriptName!=null&&h[z]._lang==3084)return h[z];for(var z in h)if(h[z].postScriptName!=null)return h[z];for(var z in h){g=z;break}return console.debug("returning name table with languageID "+h[g]._lang),h[g]},e["OS/2"]={},e["OS/2"].parse=function(s,o,l){var u=e._bin.readUshort(s,o);o+=2;var h={};if(u==0)e["OS/2"].version0(s,o,h);else if(u==1)e["OS/2"].version1(s,o,h);else if(u==2||u==3||u==4)e["OS/2"].version2(s,o,h);else{if(u!=5)throw"unknown OS/2 table version: "+u;e["OS/2"].version5(s,o,h)}return h},e["OS/2"].version0=function(s,o,l){var u=e._bin;return l.xAvgCharWidth=u.readShort(s,o),o+=2,l.usWeightClass=u.readUshort(s,o),o+=2,l.usWidthClass=u.readUshort(s,o),o+=2,l.fsType=u.readUshort(s,o),o+=2,l.ySubscriptXSize=u.readShort(s,o),o+=2,l.ySubscriptYSize=u.readShort(s,o),o+=2,l.ySubscriptXOffset=u.readShort(s,o),o+=2,l.ySubscriptYOffset=u.readShort(s,o),o+=2,l.ySuperscriptXSize=u.readShort(s,o),o+=2,l.ySuperscriptYSize=u.readShort(s,o),o+=2,l.ySuperscriptXOffset=u.readShort(s,o),o+=2,l.ySuperscriptYOffset=u.readShort(s,o),o+=2,l.yStrikeoutSize=u.readShort(s,o),o+=2,l.yStrikeoutPosition=u.readShort(s,o),o+=2,l.sFamilyClass=u.readShort(s,o),o+=2,l.panose=u.readBytes(s,o,10),o+=10,l.ulUnicodeRange1=u.readUint(s,o),o+=4,l.ulUnicodeRange2=u.readUint(s,o),o+=4,l.ulUnicodeRange3=u.readUint(s,o),o+=4,l.ulUnicodeRange4=u.readUint(s,o),o+=4,l.achVendID=[u.readInt8(s,o),u.readInt8(s,o+1),u.readInt8(s,o+2),u.readInt8(s,o+3)],o+=4,l.fsSelection=u.readUshort(s,o),o+=2,l.usFirstCharIndex=u.readUshort(s,o),o+=2,l.usLastCharIndex=u.readUshort(s,o),o+=2,l.sTypoAscender=u.readShort(s,o),o+=2,l.sTypoDescender=u.readShort(s,o),o+=2,l.sTypoLineGap=u.readShort(s,o),o+=2,l.usWinAscent=u.readUshort(s,o),o+=2,l.usWinDescent=u.readUshort(s,o),o+=2},e["OS/2"].version1=function(s,o,l){var u=e._bin;return o=e["OS/2"].version0(s,o,l),l.ulCodePageRange1=u.readUint(s,o),o+=4,l.ulCodePageRange2=u.readUint(s,o),o+=4},e["OS/2"].version2=function(s,o,l){var u=e._bin;return o=e["OS/2"].version1(s,o,l),l.sxHeight=u.readShort(s,o),o+=2,l.sCapHeight=u.readShort(s,o),o+=2,l.usDefault=u.readUshort(s,o),o+=2,l.usBreak=u.readUshort(s,o),o+=2,l.usMaxContext=u.readUshort(s,o),o+=2},e["OS/2"].version5=function(s,o,l){var u=e._bin;return o=e["OS/2"].version2(s,o,l),l.usLowerOpticalPointSize=u.readUshort(s,o),o+=2,l.usUpperOpticalPointSize=u.readUshort(s,o),o+=2},e.post={},e.post.parse=function(s,o,l){var u=e._bin,h={};return h.version=u.readFixed(s,o),o+=4,h.italicAngle=u.readFixed(s,o),o+=4,h.underlinePosition=u.readShort(s,o),o+=2,h.underlineThickness=u.readShort(s,o),o+=2,h},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(s,o){var l=s.cmap,u=-1;if(l.p0e4!=null?u=l.p0e4:l.p3e1!=null?u=l.p3e1:l.p1e0!=null?u=l.p1e0:l.p0e3!=null&&(u=l.p0e3),u==-1)throw"no familiar platform and encoding!";var h=l.tables[u];if(h.format==0)return o>=h.map.length?0:h.map[o];if(h.format==4){for(var f=-1,g=0;g<h.endCount.length;g++)if(o<=h.endCount[g]){f=g;break}return f==-1||h.startCount[f]>o?0:65535&(h.idRangeOffset[f]!=0?h.glyphIdArray[o-h.startCount[f]+(h.idRangeOffset[f]>>1)-(h.idRangeOffset.length-f)]:o+h.idDelta[f])}if(h.format==12){if(o>h.groups[h.groups.length-1][1])return 0;for(g=0;g<h.groups.length;g++){var y=h.groups[g];if(y[0]<=o&&o<=y[1])return y[2]+(o-y[0])}return 0}throw"unknown cmap table format "+h.format},e.U.glyphToPath=function(s,o){var l={cmds:[],crds:[]};if(s.SVG&&s.SVG.entries[o]){var u=s.SVG.entries[o];return u==null?l:(typeof u=="string"&&(u=e.SVG.toPath(u),s.SVG.entries[o]=u),u)}if(s.CFF){var h={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:s.CFF.Private?s.CFF.Private.defaultWidthX:0,open:!1},f=s.CFF,g=s.CFF.Private;if(f.ROS){for(var y=0;f.FDSelect[y+2]<=o;)y+=2;g=f.FDArray[f.FDSelect[y+1]].Private}e.U._drawCFF(s.CFF.CharStrings[o],h,f,g,l)}else s.glyf&&e.U._drawGlyf(o,s,l);return l},e.U._drawGlyf=function(s,o,l){var u=o.glyf[s];u==null&&(u=o.glyf[s]=e.glyf._parseGlyf(o,s)),u!=null&&(u.noc>-1?e.U._simpleGlyph(u,l):e.U._compoGlyph(u,o,l))},e.U._simpleGlyph=function(s,o){for(var l=0;l<s.noc;l++){for(var u=l==0?0:s.endPts[l-1]+1,h=s.endPts[l],f=u;f<=h;f++){var g=f==u?h:f-1,y=f==h?u:f+1,b=1&s.flags[f],S=1&s.flags[g],C=1&s.flags[y],M=s.xs[f],A=s.ys[f];if(f==u)if(b){if(!S){e.U.P.moveTo(o,M,A);continue}e.U.P.moveTo(o,s.xs[g],s.ys[g])}else S?e.U.P.moveTo(o,s.xs[g],s.ys[g]):e.U.P.moveTo(o,(s.xs[g]+M)/2,(s.ys[g]+A)/2);b?S&&e.U.P.lineTo(o,M,A):C?e.U.P.qcurveTo(o,M,A,s.xs[y],s.ys[y]):e.U.P.qcurveTo(o,M,A,(M+s.xs[y])/2,(A+s.ys[y])/2)}e.U.P.closePath(o)}},e.U._compoGlyph=function(s,o,l){for(var u=0;u<s.parts.length;u++){var h={cmds:[],crds:[]},f=s.parts[u];e.U._drawGlyf(f.glyphIndex,o,h);for(var g=f.m,y=0;y<h.crds.length;y+=2){var b=h.crds[y],S=h.crds[y+1];l.crds.push(b*g.a+S*g.b+g.tx),l.crds.push(b*g.c+S*g.d+g.ty)}for(y=0;y<h.cmds.length;y++)l.cmds.push(h.cmds[y])}},e.U._getGlyphClass=function(s,o){var l=e._lctf.getInterval(o,s);return l==-1?0:o[l+2]},e.U.getPairAdjustment=function(s,o,l){var u=!1;if(s.GPOS)for(var h=s.GPOS,f=h.lookupList,g=h.featureList,y=[],b=0;b<g.length;b++){var S=g[b];if(S.tag=="kern"){u=!0;for(var C=0;C<S.tab.length;C++)if(!y[S.tab[C]]){y[S.tab[C]]=!0;for(var M=f[S.tab[C]],A=0;A<M.tabs.length;A++)if(M.tabs[A]!=null){var k,O=M.tabs[A];if((!O.coverage||(k=e._lctf.coverageIndex(O.coverage,o))!=-1)&&M.ltype!=1&&M.ltype==2){var P=null;if(O.fmt==1){var D=O.pairsets[k];for(b=0;b<D.length;b++)D[b].gid2==l&&(P=D[b])}else if(O.fmt==2){var U=e.U._getGlyphClass(o,O.classDef1),H=e.U._getGlyphClass(l,O.classDef2);P=O.matrix[U][H]}if(P){var V=0;return P.val1&&P.val1[2]&&(V+=P.val1[2]),P.val2&&P.val2[0]&&(V+=P.val2[0]),V}}}}}}if(s.kern&&!u){var z=s.kern.glyph1.indexOf(o);if(z!=-1){var Z=s.kern.rval[z].glyph2.indexOf(l);if(Z!=-1)return s.kern.rval[z].vals[Z]}}return 0},e.U._applySubs=function(s,o,l,u){for(var h=s.length-o-1,f=0;f<l.tabs.length;f++)if(l.tabs[f]!=null){var g,y=l.tabs[f];if(!y.coverage||(g=e._lctf.coverageIndex(y.coverage,s[o]))!=-1){if(l.ltype==1)s[o],y.fmt==1?s[o]=s[o]+y.delta:s[o]=y.newg[g];else if(l.ltype==4)for(var b=y.vals[g],S=0;S<b.length;S++){var C=b[S],M=C.chain.length;if(!(M>h)){for(var A=!0,k=0,O=0;O<M;O++){for(;s[o+k+(1+O)]==-1;)k++;C.chain[O]!=s[o+k+(1+O)]&&(A=!1)}if(A){for(s[o]=C.nglyph,O=0;O<M+k;O++)s[o+O+1]=-1;break}}}else if(l.ltype==5&&y.fmt==2)for(var P=e._lctf.getInterval(y.cDef,s[o]),D=y.cDef[P+2],U=y.scset[D],H=0;H<U.length;H++){var V=U[H],z=V.input;if(!(z.length>h)){for(A=!0,O=0;O<z.length;O++){var Z=e._lctf.getInterval(y.cDef,s[o+1+O]);if(P==-1&&y.cDef[Z+2]!=z[O]){A=!1;break}}if(A){var oe=V.substLookupRecords;for(S=0;S<oe.length;S+=2)oe[S],oe[S+1]}}}else if(l.ltype==6&&y.fmt==3){if(!e.U._glsCovered(s,y.backCvg,o-y.backCvg.length)||!e.U._glsCovered(s,y.inptCvg,o)||!e.U._glsCovered(s,y.ahedCvg,o+y.inptCvg.length))continue;var ue=y.lookupRec;for(H=0;H<ue.length;H+=2){P=ue[H];var q=u[ue[H+1]];e.U._applySubs(s,o+P,q,u)}}}}},e.U._glsCovered=function(s,o,l){for(var u=0;u<o.length;u++)if(e._lctf.coverageIndex(o[u],s[l+u])==-1)return!1;return!0},e.U.glyphsToPath=function(s,o,l){for(var u={cmds:[],crds:[]},h=0,f=0;f<o.length;f++){var g=o[f];if(g!=-1){for(var y=f<o.length-1&&o[f+1]!=-1?o[f+1]:0,b=e.U.glyphToPath(s,g),S=0;S<b.crds.length;S+=2)u.crds.push(b.crds[S]+h),u.crds.push(b.crds[S+1]);for(l&&u.cmds.push(l),S=0;S<b.cmds.length;S++)u.cmds.push(b.cmds[S]);l&&u.cmds.push("X"),h+=s.hmtx.aWidth[g],f<o.length-1&&(h+=e.U.getPairAdjustment(s,g,y))}}return u},e.U.P={},e.U.P.moveTo=function(s,o,l){s.cmds.push("M"),s.crds.push(o,l)},e.U.P.lineTo=function(s,o,l){s.cmds.push("L"),s.crds.push(o,l)},e.U.P.curveTo=function(s,o,l,u,h,f,g){s.cmds.push("C"),s.crds.push(o,l,u,h,f,g)},e.U.P.qcurveTo=function(s,o,l,u,h){s.cmds.push("Q"),s.crds.push(o,l,u,h)},e.U.P.closePath=function(s){s.cmds.push("Z")},e.U._drawCFF=function(s,o,l,u,h){for(var f=o.stack,g=o.nStems,y=o.haveWidth,b=o.width,S=o.open,C=0,M=o.x,A=o.y,k=0,O=0,P=0,D=0,U=0,H=0,V=0,z=0,Z=0,oe=0,ue={val:0,size:0};C<s.length;){e.CFF.getCharString(s,C,ue);var q=ue.val;if(C+=ue.size,q=="o1"||q=="o18")f.length%2!=0&&!y&&(b=f.shift()+u.nominalWidthX),g+=f.length>>1,f.length=0,y=!0;else if(q=="o3"||q=="o23")f.length%2!=0&&!y&&(b=f.shift()+u.nominalWidthX),g+=f.length>>1,f.length=0,y=!0;else if(q=="o4")f.length>1&&!y&&(b=f.shift()+u.nominalWidthX,y=!0),S&&e.U.P.closePath(h),A+=f.pop(),e.U.P.moveTo(h,M,A),S=!0;else if(q=="o5")for(;f.length>0;)M+=f.shift(),A+=f.shift(),e.U.P.lineTo(h,M,A);else if(q=="o6"||q=="o7")for(var ae=f.length,le=q=="o6",ce=0;ce<ae;ce++){var ge=f.shift();le?M+=ge:A+=ge,le=!le,e.U.P.lineTo(h,M,A)}else if(q=="o8"||q=="o24"){ae=f.length;for(var $e=0;$e+6<=ae;)k=M+f.shift(),O=A+f.shift(),P=k+f.shift(),D=O+f.shift(),M=P+f.shift(),A=D+f.shift(),e.U.P.curveTo(h,k,O,P,D,M,A),$e+=6;q=="o24"&&(M+=f.shift(),A+=f.shift(),e.U.P.lineTo(h,M,A))}else{if(q=="o11")break;if(q=="o1234"||q=="o1235"||q=="o1236"||q=="o1237")q=="o1234"&&(O=A,P=(k=M+f.shift())+f.shift(),oe=D=O+f.shift(),H=D,z=A,M=(V=(U=(Z=P+f.shift())+f.shift())+f.shift())+f.shift(),e.U.P.curveTo(h,k,O,P,D,Z,oe),e.U.P.curveTo(h,U,H,V,z,M,A)),q=="o1235"&&(k=M+f.shift(),O=A+f.shift(),P=k+f.shift(),D=O+f.shift(),Z=P+f.shift(),oe=D+f.shift(),U=Z+f.shift(),H=oe+f.shift(),V=U+f.shift(),z=H+f.shift(),M=V+f.shift(),A=z+f.shift(),f.shift(),e.U.P.curveTo(h,k,O,P,D,Z,oe),e.U.P.curveTo(h,U,H,V,z,M,A)),q=="o1236"&&(k=M+f.shift(),O=A+f.shift(),P=k+f.shift(),oe=D=O+f.shift(),H=D,V=(U=(Z=P+f.shift())+f.shift())+f.shift(),z=H+f.shift(),M=V+f.shift(),e.U.P.curveTo(h,k,O,P,D,Z,oe),e.U.P.curveTo(h,U,H,V,z,M,A)),q=="o1237"&&(k=M+f.shift(),O=A+f.shift(),P=k+f.shift(),D=O+f.shift(),Z=P+f.shift(),oe=D+f.shift(),U=Z+f.shift(),H=oe+f.shift(),V=U+f.shift(),z=H+f.shift(),Math.abs(V-M)>Math.abs(z-A)?M=V+f.shift():A=z+f.shift(),e.U.P.curveTo(h,k,O,P,D,Z,oe),e.U.P.curveTo(h,U,H,V,z,M,A));else if(q=="o14"){if(f.length>0&&!y&&(b=f.shift()+l.nominalWidthX,y=!0),f.length==4){var K=f.shift(),ie=f.shift(),se=f.shift(),fe=f.shift(),Se=e.CFF.glyphBySE(l,se),Ue=e.CFF.glyphBySE(l,fe);e.U._drawCFF(l.CharStrings[Se],o,l,u,h),o.x=K,o.y=ie,e.U._drawCFF(l.CharStrings[Ue],o,l,u,h)}S&&(e.U.P.closePath(h),S=!1)}else if(q=="o19"||q=="o20")f.length%2!=0&&!y&&(b=f.shift()+u.nominalWidthX),g+=f.length>>1,f.length=0,y=!0,C+=g+7>>3;else if(q=="o21")f.length>2&&!y&&(b=f.shift()+u.nominalWidthX,y=!0),A+=f.pop(),M+=f.pop(),S&&e.U.P.closePath(h),e.U.P.moveTo(h,M,A),S=!0;else if(q=="o22")f.length>1&&!y&&(b=f.shift()+u.nominalWidthX,y=!0),M+=f.pop(),S&&e.U.P.closePath(h),e.U.P.moveTo(h,M,A),S=!0;else if(q=="o25"){for(;f.length>6;)M+=f.shift(),A+=f.shift(),e.U.P.lineTo(h,M,A);k=M+f.shift(),O=A+f.shift(),P=k+f.shift(),D=O+f.shift(),M=P+f.shift(),A=D+f.shift(),e.U.P.curveTo(h,k,O,P,D,M,A)}else if(q=="o26")for(f.length%2&&(M+=f.shift());f.length>0;)k=M,O=A+f.shift(),M=P=k+f.shift(),A=(D=O+f.shift())+f.shift(),e.U.P.curveTo(h,k,O,P,D,M,A);else if(q=="o27")for(f.length%2&&(A+=f.shift());f.length>0;)O=A,P=(k=M+f.shift())+f.shift(),D=O+f.shift(),M=P+f.shift(),A=D,e.U.P.curveTo(h,k,O,P,D,M,A);else if(q=="o10"||q=="o29"){var ke=q=="o10"?u:l;if(f.length==0)console.debug("error: empty stack");else{var qe=f.pop(),we=ke.Subrs[qe+ke.Bias];o.x=M,o.y=A,o.nStems=g,o.haveWidth=y,o.width=b,o.open=S,e.U._drawCFF(we,o,l,u,h),M=o.x,A=o.y,g=o.nStems,y=o.haveWidth,b=o.width,S=o.open}}else if(q=="o30"||q=="o31"){var Ze=f.length,et=($e=0,q=="o31");for($e+=Ze-(ae=-3&Ze);$e<ae;)et?(O=A,P=(k=M+f.shift())+f.shift(),A=(D=O+f.shift())+f.shift(),ae-$e==5?(M=P+f.shift(),$e++):M=P,et=!1):(k=M,O=A+f.shift(),P=k+f.shift(),D=O+f.shift(),M=P+f.shift(),ae-$e==5?(A=D+f.shift(),$e++):A=D,et=!0),e.U.P.curveTo(h,k,O,P,D,M,A),$e+=4}else{if((q+"").charAt(0)=="o")throw console.debug("Unknown operation: "+q,s),q;f.push(q)}}}o.x=M,o.y=A,o.nStems=g,o.haveWidth=y,o.width=b,o.open=S};var t=e,r={Typr:t};return n.Typr=t,n.default=r,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function qIe(){return function(n){var e=Uint8Array,t=Uint16Array,r=Uint32Array,s=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(q,ae){for(var le=new t(31),ce=0;ce<31;++ce)le[ce]=ae+=1<<q[ce-1];var ge=new r(le[30]);for(ce=1;ce<30;++ce)for(var $e=le[ce];$e<le[ce+1];++$e)ge[$e]=$e-le[ce]<<5|ce;return[le,ge]},h=u(s,2),f=h[0],g=h[1];f[28]=258,g[258]=28;for(var y=u(o,0)[0],b=new t(32768),S=0;S<32768;++S){var C=(43690&S)>>>1|(21845&S)<<1;C=(61680&(C=(52428&C)>>>2|(13107&C)<<2))>>>4|(3855&C)<<4,b[S]=((65280&C)>>>8|(255&C)<<8)>>>1}var M=function(q,ae,le){for(var ce=q.length,ge=0,$e=new t(ae);ge<ce;++ge)++$e[q[ge]-1];var K,ie=new t(ae);for(ge=0;ge<ae;++ge)ie[ge]=ie[ge-1]+$e[ge-1]<<1;if(le){K=new t(1<<ae);var se=15-ae;for(ge=0;ge<ce;++ge)if(q[ge])for(var fe=ge<<4|q[ge],Se=ae-q[ge],Ue=ie[q[ge]-1]++<<Se,ke=Ue|(1<<Se)-1;Ue<=ke;++Ue)K[b[Ue]>>>se]=fe}else for(K=new t(ce),ge=0;ge<ce;++ge)q[ge]&&(K[ge]=b[ie[q[ge]-1]++]>>>15-q[ge]);return K},A=new e(288);for(S=0;S<144;++S)A[S]=8;for(S=144;S<256;++S)A[S]=9;for(S=256;S<280;++S)A[S]=7;for(S=280;S<288;++S)A[S]=8;var k=new e(32);for(S=0;S<32;++S)k[S]=5;var O=M(A,9,1),P=M(k,5,1),D=function(q){for(var ae=q[0],le=1;le<q.length;++le)q[le]>ae&&(ae=q[le]);return ae},U=function(q,ae,le){var ce=ae/8|0;return(q[ce]|q[ce+1]<<8)>>(7&ae)&le},H=function(q,ae){var le=ae/8|0;return(q[le]|q[le+1]<<8|q[le+2]<<16)>>(7&ae)},V=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],z=function(q,ae,le){var ce=new Error(ae||V[q]);if(ce.code=q,Error.captureStackTrace&&Error.captureStackTrace(ce,z),!le)throw ce;return ce},Z=function(q,ae,le){var ce=q.length;if(!ce||le&&!le.l&&ce<5)return ae||new e(0);var ge=!ae||le,$e=!le||le.i;le||(le={}),ae||(ae=new e(3*ce));var K,ie=function(Fe){var bt=ae.length;if(Fe>bt){var ze=new e(Math.max(2*bt,Fe));ze.set(ae),ae=ze}},se=le.f||0,fe=le.p||0,Se=le.b||0,Ue=le.l,ke=le.d,qe=le.m,we=le.n,Ze=8*ce;do{if(!Ue){le.f=se=U(q,fe,1);var et=U(q,fe+1,3);if(fe+=3,!et){var ft=q[(Ct=((K=fe)/8|0)+(7&K&&1)+4)-4]|q[Ct-3]<<8,at=Ct+ft;if(at>ce){$e&&z(0);break}ge&&ie(Se+ft),ae.set(q.subarray(Ct,at),Se),le.b=Se+=ft,le.p=fe=8*at;continue}if(et==1)Ue=O,ke=P,qe=9,we=5;else if(et==2){var Ge=U(q,fe,31)+257,Ie=U(q,fe+10,15)+4,He=Ge+U(q,fe+5,31)+1;fe+=14;for(var it=new e(He),st=new e(19),It=0;It<Ie;++It)st[l[It]]=U(q,fe+3*It,7);fe+=3*Ie;var kt=D(st),vt=(1<<kt)-1,Mt=M(st,kt,1);for(It=0;It<He;){var Ct,gt=Mt[U(q,fe,vt)];if(fe+=15&gt,(Ct=gt>>>4)<16)it[It++]=Ct;else{var Ee=0,re=0;for(Ct==16?(re=3+U(q,fe,3),fe+=2,Ee=it[It-1]):Ct==17?(re=3+U(q,fe,7),fe+=3):Ct==18&&(re=11+U(q,fe,127),fe+=7);re--;)it[It++]=Ee}}var Be=it.subarray(0,Ge),mt=it.subarray(Ge);qe=D(Be),we=D(mt),Ue=M(Be,qe,1),ke=M(mt,we,1)}else z(1);if(fe>Ze){$e&&z(0);break}}ge&&ie(Se+131072);for(var yt=(1<<qe)-1,wt=(1<<we)-1,Ke=fe;;Ke=fe){var Qe=(Ee=Ue[H(q,fe)&yt])>>>4;if((fe+=15&Ee)>Ze){$e&&z(0);break}if(Ee||z(2),Qe<256)ae[Se++]=Qe;else{if(Qe==256){Ke=fe,Ue=null;break}var Le=Qe-254;if(Qe>264){var Q=s[It=Qe-257];Le=U(q,fe,(1<<Q)-1)+f[It],fe+=Q}var te=ke[H(q,fe)&wt],me=te>>>4;if(te||z(3),fe+=15&te,mt=y[me],me>3&&(Q=o[me],mt+=H(q,fe)&(1<<Q)-1,fe+=Q),fe>Ze){$e&&z(0);break}ge&&ie(Se+131072);for(var Re=Se+Le;Se<Re;Se+=4)ae[Se]=ae[Se-mt],ae[Se+1]=ae[Se+1-mt],ae[Se+2]=ae[Se+2-mt],ae[Se+3]=ae[Se+3-mt];Se=Re}}le.l=Ue,le.p=Ke,le.b=Se,Ue&&(se=1,le.m=qe,le.d=ke,le.n=we)}while(!se);return Se==ae.length?ae:function(Fe,bt,ze){(bt==null||bt<0)&&(bt=0),(ze==null||ze>Fe.length)&&(ze=Fe.length);var Pt=new(Fe instanceof t?t:Fe instanceof r?r:e)(ze-bt);return Pt.set(Fe.subarray(bt,ze)),Pt}(ae,0,Se)},oe=new e(0),ue=typeof TextDecoder<"u"&&new TextDecoder;try{ue.decode(oe,{stream:!0})}catch{}return n.convert_streams=function(q){var ae=new DataView(q),le=0;function ce(){var Ge=ae.getUint16(le);return le+=2,Ge}function ge(){var Ge=ae.getUint32(le);return le+=4,Ge}function $e(Ge){ft.setUint16(at,Ge),at+=2}function K(Ge){ft.setUint32(at,Ge),at+=4}for(var ie={signature:ge(),flavor:ge(),length:ge(),numTables:ce(),reserved:ce(),totalSfntSize:ge(),majorVersion:ce(),minorVersion:ce(),metaOffset:ge(),metaLength:ge(),metaOrigLength:ge(),privOffset:ge(),privLength:ge()},se=0;Math.pow(2,se)<=ie.numTables;)se++;se--;for(var fe=16*Math.pow(2,se),Se=16*ie.numTables-fe,Ue=12,ke=[],qe=0;qe<ie.numTables;qe++)ke.push({tag:ge(),offset:ge(),compLength:ge(),origLength:ge(),origChecksum:ge()}),Ue+=16;var we,Ze=new Uint8Array(12+16*ke.length+ke.reduce(function(Ge,Ie){return Ge+Ie.origLength+4},0)),et=Ze.buffer,ft=new DataView(et),at=0;return K(ie.flavor),$e(ie.numTables),$e(fe),$e(se),$e(Se),ke.forEach(function(Ge){K(Ge.tag),K(Ge.origChecksum),K(Ue),K(Ge.origLength),Ge.outOffset=Ue,(Ue+=Ge.origLength)%4!=0&&(Ue+=4-Ue%4)}),ke.forEach(function(Ge){var Ie,He=q.slice(Ge.offset,Ge.offset+Ge.compLength);if(Ge.compLength!=Ge.origLength){var it=new Uint8Array(Ge.origLength);Ie=new Uint8Array(He,2),Z(Ie,it)}else it=new Uint8Array(He);Ze.set(it,Ge.outOffset);var st=0;(Ue=Ge.outOffset+Ge.origLength)%4!=0&&(st=4-Ue%4),Ze.set(new Uint8Array(st).buffer,Ge.outOffset+Ge.origLength),we=Ue+st}),et.slice(0,we)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function QIe(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},s=1,o=2,l=4,u=8,h=16,f=32;let g;function y(U){if(!g){const H={R:o,L:s,D:l,C:h,U:f,T:u};g=new Map;for(let V in r){let z=0;r[V].split(",").forEach(Z=>{let[oe,ue]=Z.split("+");oe=parseInt(oe,36),ue=ue?parseInt(ue,36):0,g.set(z+=oe,H[V]);for(let q=ue;q--;)g.set(++z,H[V])})}}return g.get(U)||f}const b=1,S=2,C=3,M=4,A=[null,"isol","init","fina","medi"];function k(U){const H=new Uint8Array(U.length);let V=f,z=b,Z=-1;for(let oe=0;oe<U.length;oe++){const ue=U.codePointAt(oe);let q=y(ue)|0,ae=b;q&u||(V&(s|l|h)?q&(o|l|h)?(ae=C,(z===b||z===C)&&H[Z]++):q&(s|f)&&(z===S||z===M)&&H[Z]--:V&(o|f)&&(z===S||z===M)&&H[Z]--,z=H[oe]=ae,V=q,Z=oe,ue>65535&&oe++)}return H}function O(U,H){const V=[];for(let Z=0;Z<H.length;Z++){const oe=H.codePointAt(Z);oe>65535&&Z++,V.push(n.U.codeToGlyph(U,oe))}const z=U.GSUB;if(z){const{lookupList:Z,featureList:oe}=z;let ue;const q=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,ae=[];oe.forEach(le=>{if(q.test(le.tag))for(let ce=0;ce<le.tab.length;ce++){if(ae[le.tab[ce]])continue;ae[le.tab[ce]]=!0;const ge=Z[le.tab[ce]],$e=/^(isol|init|fina|medi)$/.test(le.tag);$e&&!ue&&(ue=k(H));for(let K=0;K<V.length;K++)(!ue||!$e||A[ue[K]]===le.tag)&&n.U._applySubs(V,K,ge,Z)}})}return V}function P(...U){for(let H=0;H<U.length;H++)if(typeof U[H]=="number")return U[H]}function D(U){const H=Object.create(null),V=U["OS/2"],z=U.hhea,Z=U.head.unitsPerEm,oe=P(V&&V.sTypoAscender,z&&z.ascender,Z),ue={unitsPerEm:Z,ascender:oe,descender:P(V&&V.sTypoDescender,z&&z.descender,0),capHeight:P(V&&V.sCapHeight,oe),xHeight:P(V&&V.sxHeight,oe),lineGap:P(V&&V.sTypoLineGap,z&&z.lineGap),forEachGlyph(q,ae,le,ce){let ge=0;const $e=1/ue.unitsPerEm*ae,K=O(U,q);let ie=0,se=-1;return K.forEach((fe,Se)=>{if(fe!==-1){let Ue=H[fe];if(!Ue){const{cmds:ke,crds:qe}=n.U.glyphToPath(U,fe);let we="",Ze=0;for(let Ie=0,He=ke.length;Ie<He;Ie++){const it=t[ke[Ie]];we+=ke[Ie];for(let st=1;st<=it;st++)we+=(st>1?",":"")+qe[Ze++]}let et,ft,at,Ge;if(qe.length){et=ft=1/0,at=Ge=-1/0;for(let Ie=0,He=qe.length;Ie<He;Ie+=2){let it=qe[Ie],st=qe[Ie+1];it<et&&(et=it),st<ft&&(ft=st),it>at&&(at=it),st>Ge&&(Ge=st)}}else et=at=ft=Ge=0;Ue=H[fe]={index:fe,advanceWidth:U.hmtx.aWidth[fe],xMin:et,yMin:ft,xMax:at,yMax:Ge,path:we,pathCommandCount:ke.length}}se!==-1&&(ge+=n.U.getPairAdjustment(U,se,fe)*$e),ce.call(null,Ue,ge,ie),Ue.advanceWidth&&(ge+=Ue.advanceWidth*$e),le&&(ge+=le*ae),se=fe}ie+=q.codePointAt(ie)>65535?2:1}),ge}};return ue}return function(U){const H=new Uint8Array(U,0,4),V=n._bin.readASCII(H,0,4);if(V==="wOFF")U=e(U);else if(V==="wOF2")throw new Error("woff2 fonts not supported");return D(n.parse(U)[0])}}const ZIe=HC({name:"Typr Font Parser",dependencies:[JIe,qIe,QIe],init(n,e,t){const r=n(),s=e();return t(r,s)}}),ow={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},eRe=new Fn;function PS(){return(self.performance||Date).now()}const jW=Object.create(null);function dee(n,e){n=rRe({},n);const t=PS();if(n.font=iRe(n.font||ow.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||ow.sdfGlyphSize,n.colorRanges!=null){let y={};for(let b in n.colorRanges)if(n.colorRanges.hasOwnProperty(b)){let S=n.colorRanges[b];typeof S!="number"&&(S=eRe.set(S).getHex()),y[b]=S}n.colorRanges=y}Object.freeze(n);const{textureWidth:r,sdfExponent:s}=ow,{sdfGlyphSize:o}=n,l=r/o*4;let u=jW[o];if(!u){const y=document.createElement("canvas");y.width=r,y.height=o*256/l,u=jW[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:y,sdfTexture:new dc(y,void 0,void 0,void 0,El,El),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,tRe(u)}const{sdfTexture:h,sdfCanvas:f}=u;let g=u.glyphsByFont.get(n.font);g||u.glyphsByFont.set(n.font,g=new Map),oRe(n).then(y=>{const{glyphIds:b,glyphPositions:S,fontSize:C,unitsPerEm:M,timings:A}=y,k=[],O=new Float32Array(b.length*4),P=C/M;let D=0,U=0;const H=PS();b.forEach((ue,q)=>{let ae=g.get(ue);if(!ae){const{path:$e,pathBounds:K}=y.glyphData[ue],ie=Math.max(K[2]-K[0],K[3]-K[1])/o*(ow.sdfMargin*o+.5),se=u.glyphCount++,fe=[K[0]-ie,K[1]-ie,K[2]+ie,K[3]+ie];g.set(ue,ae={path:$e,atlasIndex:se,sdfViewBox:fe}),k.push(ae)}const{sdfViewBox:le}=ae,ce=S[U++],ge=S[U++];O[D++]=ce+le[0]*P,O[D++]=ge+le[1]*P,O[D++]=ce+le[2]*P,O[D++]=ge+le[3]*P,b[q]=ae.atlasIndex}),A.quads=(A.quads||0)+(PS()-H);const V=PS();A.sdf={};const z=f.height,Z=Math.ceil(u.glyphCount/l),oe=Math.pow(2,Math.ceil(Math.log2(Z*o)));oe>z&&(console.info(`Increasing SDF texture size ${z}->${oe}`),KIe(f,r,oe),h.dispose()),Promise.all(k.map(ue=>fee(ue,u,n.gpuAccelerateSDF).then(({timing:q})=>{A.sdf[ue.atlasIndex]=q}))).then(()=>{k.length&&!u.contextLost&&(pee(u),h.needsUpdate=!0),A.sdfTotal=PS()-V,A.total=PS()-t,e(Object.freeze({parameters:n,sdfTexture:h,sdfGlyphSize:o,sdfExponent:s,glyphBounds:O,glyphAtlasIndices:b,glyphColors:y.glyphColors,caretPositions:y.caretPositions,caretHeight:y.caretHeight,chunkedBounds:y.chunkedBounds,ascender:y.ascender,descender:y.descender,lineHeight:y.lineHeight,capHeight:y.capHeight,xHeight:y.xHeight,topBaseline:y.topBaseline,blockBounds:y.blockBounds,visibleBounds:y.visibleBounds,timings:y.timings}))})}),Promise.resolve().then(()=>{u.contextLost||XIe(f)})}function fee({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:r,sdfCanvas:s,contextLost:o},l){if(o)return Promise.resolve({timing:-1});const{textureWidth:u,sdfExponent:h}=ow,f=Math.max(t[2]-t[0],t[3]-t[1]),g=Math.floor(e/4),y=g%(u/r)*r,b=Math.floor(g/(u/r))*r,S=e%4;return HIe(r,r,n,t,f,h,s,y,b,S,l)}function tRe(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const r=[];n.glyphsByFont.forEach(s=>{s.forEach(o=>{r.push(fee(o,n,!0))})}),Promise.all(r).then(()=>{pee(n),n.sdfTexture.needsUpdate=!0})})}function nRe({font:n,characters:e,sdfGlyphSize:t},r){let s=Array.isArray(e)?e.join(`
`):""+e;dee({font:n,sdfGlyphSize:t,text:s},r)}function rRe(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let zA;function iRe(n){return zA||(zA=typeof document>"u"?{}:document.createElement("a")),zA.href=n,zA.href}function pee(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:r,height:s}=e,o=n.sdfCanvas.getContext("webgl");let l=t.image.data;(!l||l.length!==r*s*4)&&(l=new Uint8Array(r*s*4),t.image={width:r,height:s,data:l},t.flipY=!1,t.isDataTexture=!0),o.readPixels(0,0,r,s,o.RGBA,o.UNSIGNED_BYTE,l)}}const sRe=HC({name:"Typesetter",dependencies:[ow,ZIe,UIe,OIe],init(n,e,t,r){const{defaultFontURL:s}=n;return t(e,r(),{defaultFontURL:s})}}),oRe=HC({name:"Typesetter",dependencies:[sRe],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),n.glyphColors&&e.push(n.glyphColors.buffer),e}}),YW={};function aRe(n){let e=YW[n];if(!e){const t=new d0(1,1,n,n),r=t.clone(),s=t.attributes,o=r.attributes,l=new ui,u=s.uv.count;for(let h=0;h<u;h++)o.position.array[h*3]*=-1,o.normal.array[h*3+2]*=-1;["position","normal","uv"].forEach(h=>{l.setAttribute(h,new ur([...s[h].array,...o[h].array],s[h].itemSize))}),l.setIndex([...t.index.array,...r.index.array.map(h=>h+u)]),l.translate(.5,.5,0),e=YW[n]=l}return e}const lRe="aTroikaGlyphBounds",XW="aTroikaGlyphIndex",uRe="aTroikaGlyphColor";class cRe extends $2{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new xv,this.boundingBox=new p0}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===cd?t/2:0,e===up?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=aRe(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=t.attributes[r].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,r,s,o){gN(this,lRe,e,4),gN(this,XW,t,1),gN(this,uRe,o,3),this._blockBounds=r,this._chunkedBounds=s,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:r}=this;if(t){const{PI:s,floor:o,min:l,max:u,sin:h,cos:f}=Math,g=s/2,y=s*2,b=Math.abs(t),S=e[0]/b,C=e[2]/b,M=o((S+g)/y)!==o((C+g)/y)?-b:l(h(S)*b,h(C)*b),A=o((S-g)/y)!==o((C-g)/y)?b:u(h(S)*b,h(C)*b),k=o((S+s)/y)!==o((C+s)/y)?b*2:u(b-f(S)*b,b-f(C)*b);r.min.set(M,e[1],t<0?-k:0),r.max.set(A,e[3],t<0?0:k)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(XW).count,r=this._chunkedBounds;if(r)for(let s=r.length;s--;){t=r[s].end;let o=r[s].rect;if(o[1]<e.w&&o[3]>e.y&&o[0]<e.z&&o[2]>e.x)break}this.instanceCount=t}}function gN(n,e,t,r){const s=n.getAttribute(e);t?s&&s.array.length===t.length?(s.array.set(t),s.needsUpdate=!0):(n.setAttribute(e,new nT(t,r)),delete n._maxInstanceCount,n.dispose()):s&&n.deleteAttribute(e)}const hRe=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,dRe=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,fRe=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,pRe=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function mRe(n){const e=tB(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Kt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Ts(0,0,0,0)},uTroikaClipRect:{value:new Ts(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Kt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Fn},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new cp},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:hRe,vertexTransform:dRe,fragmentDefs:fRe,fragmentColorTransform:pRe,customRewriter({vertexShader:t,fragmentShader:r}){let s=/\buniform\s+vec3\s+diffuse\b/;return s.test(r)&&(r=r.replace(s,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),s.test(t)||(t=t.replace(cee,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const H4=new m0({color:16777215,side:up,transparent:!0}),KW=8421504,JW=new ei,UA=new Me,vN=new Me,Sx=[],gRe=new Me,_N="+x+y";function qW(n){return Array.isArray(n)?n[0]:n}let mee=()=>{const n=new Hn(new d0(1,1),H4);return mee=()=>n,n},gee=()=>{const n=new Hn(new d0(1,1,32,1),H4);return gee=()=>n,n};const vRe={type:"syncstart"},_Re={type:"synccomplete"},vee=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],yRe=vee.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class _ee extends Hn{constructor(){const e=new cRe;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=KW,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=_N,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(vRe),dee({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(s=>s&&s())})),this.dispatchEvent(_Re),e&&e()})))}onBeforeRender(e,t,r,s,o,l){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o),o._hadOwnSide=o.hasOwnProperty("side"),this.geometry.setSide(o._actualSide=o.side),o.side=_v}onAfterRender(e,t,r,s,o,l){o._hadOwnSide?o.side=o._actualSide:delete o.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=H4.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=mRe(t),t.addEventListener("dispose",function r(){t.removeEventListener("dispose",r),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function s(){e.removeEventListener("dispose",s),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return qW(this.material).getDepthMaterial()}get customDistanceMaterial(){return qW(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,r=e.uniforms,s=this.textRenderInfo;if(s){const{sdfTexture:u,blockBounds:h}=s;r.uTroikaSDFTexture.value=u,r.uTroikaSDFTextureSize.value.set(u.image.width,u.image.height),r.uTroikaSDFGlyphSize.value=s.sdfGlyphSize,r.uTroikaSDFExponent.value=s.sdfExponent,r.uTroikaTotalBounds.value.fromArray(h),r.uTroikaUseGlyphColors.value=!t&&!!s.glyphColors;let f=0,g=0,y=0,b,S,C,M=0,A=0;if(t){let{outlineWidth:O,outlineOffsetX:P,outlineOffsetY:D,outlineBlur:U,outlineOpacity:H}=this;f=this._parsePercent(O)||0,g=Math.max(0,this._parsePercent(U)||0),b=H,M=this._parsePercent(P)||0,A=this._parsePercent(D)||0}else y=Math.max(0,this._parsePercent(this.strokeWidth)||0),y&&(C=this.strokeColor,r.uTroikaStrokeColor.value.set(C??KW),S=this.strokeOpacity,S==null&&(S=1)),b=this.fillOpacity;r.uTroikaDistanceOffset.value=f,r.uTroikaPositionOffset.value.set(M,A),r.uTroikaBlurRadius.value=g,r.uTroikaStrokeWidth.value=y,r.uTroikaStrokeOpacity.value=S,r.uTroikaFillOpacity.value=b??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let k=this.clipRect;if(k&&Array.isArray(k)&&k.length===4)r.uTroikaClipRect.value.fromArray(k);else{const O=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(h[0]-O,h[1]-O,h[2]+O,h[3]+O)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const o=t?this.outlineColor||0:this.color;if(o==null)delete e.color;else{const u=e.hasOwnProperty("color")?e.color:e.color=new Fn;(o!==u._input||typeof o=="object")&&u.set(u._input=o)}let l=this.orientation||_N;if(l!==e._orientation){let u=r.uTroikaOrient.value;l=l.replace(/[^-+xyz]/g,"");let h=l!==_N&&l.match(/^([-+])([xyz])([-+])([xyz])$/);if(h){let[,f,g,y,b]=h;UA.set(0,0,0)[g]=f==="-"?1:-1,vN.set(0,0,0)[b]=y==="-"?-1:1,JW.lookAt(gRe,UA.cross(vN),vN),u.setFromMatrix4(JW)}else u.identity();e._orientation=l}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),r=t?parseFloat(t[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Kt){t.copy(e);const r=this.curveRadius;return r&&(t.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),t}worldPositionToTextCoords(e,t=new Kt){return UA.copy(e),this.localPositionToTextCoords(this.worldToLocal(UA),t)}raycast(e,t){const{textRenderInfo:r,curveRadius:s}=this;if(r){const o=r.blockBounds,l=s?gee():mee(),u=l.geometry,{position:h,uv:f}=u.attributes;for(let g=0;g<f.count;g++){let y=o[0]+f.getX(g)*(o[2]-o[0]);const b=o[1]+f.getY(g)*(o[3]-o[1]);let S=0;s&&(S=s-Math.cos(y/s)*s,y=Math.sin(y/s)*s),h.setXYZ(g,y,b,S)}u.boundingSphere=this.geometry.boundingSphere,u.boundingBox=this.geometry.boundingBox,l.matrixWorld=this.matrixWorld,l.material.side=this.material.side,Sx.length=0,l.raycast(e,Sx);for(let g=0;g<Sx.length;g++)Sx[g].object=this,t.push(Sx[g])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,yRe.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}}vee.forEach(n=>{const e="_private_"+n;Object.defineProperty(_ee.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const bRe=de.forwardRef(({anchorX:n="center",anchorY:e="middle",font:t,fontSize:r=1,children:s,characters:o,onSync:l,...u},h)=>{const f=nf(({invalidate:S})=>S),[g]=de.useState(()=>new _ee),[y,b]=de.useMemo(()=>{const S=[];let C="";return de.Children.forEach(s,M=>{typeof M=="string"||typeof M=="number"?C+=M:S.push(M)}),[S,C]},[s]);return SAe(()=>new Promise(S=>nRe({font:t,characters:o},S)),["troika-text",t,o]),de.useLayoutEffect(()=>void g.sync(()=>{f(),l&&l(g)})),de.useEffect(()=>()=>g.dispose(),[g]),un("primitive",{object:g,ref:h,font:t,text:b,anchorX:n,anchorY:e,fontSize:r,...u,children:y})});var TRe=1/0,SRe=9007199254740991,wRe="[object Arguments]",ERe="[object Function]",xRe="[object GeneratorFunction]",$Re="[object Symbol]",CRe=typeof f_=="object"&&f_&&f_.Object===Object&&f_,MRe=typeof self=="object"&&self&&self.Object===Object&&self,ARe=CRe||MRe||Function("return this")();function IRe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function RRe(n,e){for(var t=-1,r=n?n.length:0,s=Array(r);++t<r;)s[t]=e(n[t],t,n);return s}function kRe(n,e){for(var t=-1,r=e.length,s=n.length;++t<r;)n[s+t]=e[t];return n}var G4=Object.prototype,ORe=G4.hasOwnProperty,W4=G4.toString,QW=ARe.Symbol,LRe=G4.propertyIsEnumerable,ZW=QW?QW.isConcatSpreadable:void 0,e9=Math.max;function yee(n,e,t,r,s){var o=-1,l=n.length;for(t||(t=BRe),s||(s=[]);++o<l;){var u=n[o];e>0&&t(u)?e>1?yee(u,e-1,t,r,s):kRe(s,u):r||(s[s.length]=u)}return s}function NRe(n,e){return n=Object(n),DRe(n,e,function(t,r){return r in n})}function DRe(n,e,t){for(var r=-1,s=e.length,o={};++r<s;){var l=e[r],u=n[l];t(u,l)&&(o[l]=u)}return o}function PRe(n,e){return e=e9(e===void 0?n.length-1:e,0),function(){for(var t=arguments,r=-1,s=e9(t.length-e,0),o=Array(s);++r<s;)o[r]=t[e+r];r=-1;for(var l=Array(e+1);++r<e;)l[r]=t[r];return l[e]=o,IRe(n,this,l)}}function BRe(n){return URe(n)||zRe(n)||!!(ZW&&n&&n[ZW])}function FRe(n){if(typeof n=="string"||YRe(n))return n;var e=n+"";return e=="0"&&1/n==-TRe?"-0":e}function zRe(n){return GRe(n)&&ORe.call(n,"callee")&&(!LRe.call(n,"callee")||W4.call(n)==wRe)}var URe=Array.isArray;function HRe(n){return n!=null&&VRe(n.length)&&!WRe(n)}function GRe(n){return bee(n)&&HRe(n)}function WRe(n){var e=jRe(n)?W4.call(n):"";return e==ERe||e==xRe}function VRe(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=SRe}function jRe(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function bee(n){return!!n&&typeof n=="object"}function YRe(n){return typeof n=="symbol"||bee(n)&&W4.call(n)==$Re}var XRe=PRe(function(n,e){return n==null?{}:NRe(n,RRe(yee(e,1),FRe))}),yN=XRe;const KRe=de.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:s=!0,onChange:o,onStart:l,onEnd:u,...h},f)=>{const g=nf(U=>U.invalidate),y=nf(U=>U.camera),b=nf(U=>U.gl),S=nf(U=>U.events),C=nf(U=>U.setEvents),M=nf(U=>U.set),A=nf(U=>U.get),k=nf(U=>U.performance),O=e||y,P=r||S.connected||b.domElement,D=de.useMemo(()=>new bIe(O),[O]);return Km(()=>{D.enabled&&D.update()},-1),de.useEffect(()=>(D.connect(P),()=>void D.dispose()),[P,t,D,g]),de.useEffect(()=>{const U=z=>{g(),t&&k.regress(),o&&o(z)},H=z=>{l&&l(z)},V=z=>{u&&u(z)};return D.addEventListener("change",U),D.addEventListener("start",H),D.addEventListener("end",V),()=>{D.removeEventListener("start",H),D.removeEventListener("end",V),D.removeEventListener("change",U)}},[o,l,u,D,g,C]),de.useEffect(()=>{if(n){const U=A().controls;return M({controls:D}),()=>M({controls:U})}},[n,D]),un("primitive",{ref:f,object:D,enableDamping:s,...h})});class JRe extends b2{constructor(e){super(e),this.onBeforeCompile=(t,r)=>{const{isWebGL2:s}=r.capabilities;t.fragmentShader=t.fragmentShader.replace("#include <output_fragment>",`
        ${s?"#include <output_fragment>":`#extension GL_OES_standard_derivatives : enable
#include <output_fragment>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <encodings_fragment>
      `)}}}const qRe=de.forwardRef((n,e)=>{const[t]=de.useState(()=>new JRe(null));return un("primitive",{...n,object:t,ref:e,attach:"material"})});function QRe(n){const e=n+"Geometry";return de.forwardRef(({args:t,children:r,...s},o)=>Bh("mesh",{ref:o,...s,children:[un(e,{attach:"geometry",args:t}),r]}))}const ZRe=QRe("circle");let i1,wx;const eke=de.createContext(null),t9=new ei,n9=new Me,tke=de.forwardRef(({children:n,range:e,limit:t=1e3,...r},s)=>{const o=de.useRef(null),[l,u]=de.useState([]),[[h,f,g]]=de.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);de.useEffect(()=>{o.current.geometry.attributes.position.needsUpdate=!0}),Km(()=>{for(o.current.updateMatrix(),o.current.updateMatrixWorld(),t9.copy(o.current.matrixWorld).invert(),o.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,l.length),i1=0;i1<l.length;i1++)wx=l[i1].current,wx.getWorldPosition(n9).applyMatrix4(t9),n9.toArray(h,i1*3),o.current.geometry.attributes.position.needsUpdate=!0,wx.matrixWorldNeedsUpdate=!0,wx.color.toArray(f,i1*3),o.current.geometry.attributes.color.needsUpdate=!0,g.set([wx.size],i1),o.current.geometry.attributes.size.needsUpdate=!0});const y=de.useMemo(()=>({getParent:()=>o,subscribe:b=>(u(S=>[...S,b]),()=>u(S=>S.filter(C=>C.current!==b.current)))}),[]);return de.createElement("points",KP({userData:{instances:l},matrixAutoUpdate:!1,ref:F4([s,o]),raycast:()=>null},r),Bh("bufferGeometry",{children:[un("bufferAttribute",{attach:"attributes-position",count:h.length/3,array:h,itemSize:3,usage:B1}),un("bufferAttribute",{attach:"attributes-color",count:f.length/3,array:f,itemSize:3,usage:B1}),un("bufferAttribute",{attach:"attributes-size",count:g.length,array:g,itemSize:1,usage:B1})]}),de.createElement(eke.Provider,{value:y},n))}),nke=de.forwardRef(({children:n,positions:e,colors:t,sizes:r,stride:s=3,...o},l)=>{const u=de.useRef(null);return Km(()=>{const h=u.current.geometry.attributes;h.position.needsUpdate=!0,t&&(h.color.needsUpdate=!0),r&&(h.size.needsUpdate=!0)}),Bh("points",{ref:F4([l,u]),...o,children:[Bh("bufferGeometry",{children:[un("bufferAttribute",{attach:"attributes-position",count:e.length/s,array:e,itemSize:s,usage:B1}),t&&un("bufferAttribute",{attach:"attributes-color",count:t.length/s,array:t,itemSize:3,usage:B1}),r&&un("bufferAttribute",{attach:"attributes-size",count:r.length/s,array:r,itemSize:1,usage:B1})]}),n]})}),rke=de.forwardRef((n,e)=>n.positions instanceof Float32Array?un(nke,{...n,ref:e}):un(tke,{...n,ref:e})),r9=n=>{let e;const t=new Set,r=(l,u)=>{const h=typeof l=="function"?l(e):l;if(!Object.is(h,e)){const f=e;e=u??typeof h!="object"?h:Object.assign({},e,h),t.forEach(g=>g(e,f))}},s=()=>e,o={setState:r,getState:s,subscribe:l=>(t.add(l),()=>t.delete(l)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}};return e=n(r,s,o),o},ike=n=>n?r9(n):r9;var Tee={exports:{}},bN={},i9={exports:{}},TN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s9;function ske(){if(s9)return TN;s9=1;var n=Tt;function e(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(y,b){var S=b(),C=r({inst:{value:S,getSnapshot:b}}),M=C[0].inst,A=C[1];return o(function(){M.value=S,M.getSnapshot=b,h(M)&&A({inst:M})},[y,S,b]),s(function(){return h(M)&&A({inst:M}),y(function(){h(M)&&A({inst:M})})},[y]),l(S),S}function h(y){var b=y.getSnapshot;y=y.value;try{var S=b();return!t(y,S)}catch{return!0}}function f(y,b){return b()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return TN.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,TN}var o9;function oke(){return o9||(o9=1,function(n){n.exports=ske()}(i9)),i9.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a9;function ake(){if(a9)return bN;a9=1;var n=Tt,e=oke();function t(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=n.useRef,l=n.useEffect,u=n.useMemo,h=n.useDebugValue;return bN.useSyncExternalStoreWithSelector=function(f,g,y,b,S){var C=o(null);if(C.current===null){var M={hasValue:!1,value:null};C.current=M}else M=C.current;C=u(function(){function k(H){if(!O){if(O=!0,P=H,H=b(H),S!==void 0&&M.hasValue){var V=M.value;if(S(V,H))return D=V}return D=H}if(V=D,r(P,H))return V;var z=b(H);return S!==void 0&&S(V,z)?V:(P=H,D=z)}var O=!1,P,D,U=y===void 0?null:y;return[function(){return k(g())},U===null?void 0:function(){return k(U())}]},[g,y,b,S]);var A=s(f,C[0],C[1]);return l(function(){M.hasValue=!0,M.value=A},[A]),h(A),A},bN}(function(n){n.exports=ake()})(Tee);const lke=DZ(Tee.exports),{useSyncExternalStoreWithSelector:uke}=lke;function See(n,e=n.getState,t){const r=uke(n.subscribe,n.getState,n.getServerState||n.getState,e,t);return de.useDebugValue(r),r}const l9=n=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?ike(n):n,t=(r,s)=>See(e,r,s);return Object.assign(t,e),t},cke=n=>n?l9(n):l9,hke=n=>(e,t,r)=>{const s=r.subscribe;return r.subscribe=(o,l,u)=>{let h=o;if(l){const f=(u==null?void 0:u.equalityFn)||Object.is;let g=o(r.getState());h=y=>{const b=o(y);if(!f(g,b)){const S=g;l(g=b,S)}},u!=null&&u.fireImmediately&&l(g,g)}return s(h)},n(e,t,r)},dke=hke;function i0(n){for(var e=arguments.length,t=Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+n+(t.length?" "+t.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Qw(n){return!!n&&!!n[Um]}function sT(n){return!!n&&(function(e){if(!e||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||typeof r=="function"&&Function.toString.call(r)===bke}(n)||Array.isArray(n)||!!n[g9]||!!n.constructor[g9]||V4(n)||j4(n))}function nC(n,e,t){t===void 0&&(t=!1),bE(n)===0?(t?Object.keys:q4)(n).forEach(function(r){t&&typeof r=="symbol"||e(r,n[r],n)}):n.forEach(function(r,s){return e(s,r,n)})}function bE(n){var e=n[Um];return e?e.i>3?e.i-4:e.i:Array.isArray(n)?1:V4(n)?2:j4(n)?3:0}function rB(n,e){return bE(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function fke(n,e){return bE(n)===2?n.get(e):n[e]}function wee(n,e,t){var r=bE(n);r===2?n.set(e,t):r===3?(n.delete(e),n.add(t)):n[e]=t}function pke(n,e){return n===e?n!==0||1/n==1/e:n!=n&&e!=e}function V4(n){return _ke&&n instanceof Map}function j4(n){return yke&&n instanceof Set}function m1(n){return n.o||n.t}function Y4(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var e=Tke(n);delete e[Um];for(var t=q4(e),r=0;r<t.length;r++){var s=t[r],o=e[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[s]})}return Object.create(Object.getPrototypeOf(n),e)}function X4(n,e){return e===void 0&&(e=!1),K4(n)||Qw(n)||!sT(n)||(bE(n)>1&&(n.set=n.add=n.clear=n.delete=mke),Object.freeze(n),e&&nC(n,function(t,r){return X4(r,!0)},!0)),n}function mke(){i0(2)}function K4(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function pv(n){var e=Ske[n];return e||i0(18,n),e}function u9(){return rC}function SN(n,e){e&&(pv("Patches"),n.u=[],n.s=[],n.v=e)}function kR(n){iB(n),n.p.forEach(gke),n.p=null}function iB(n){n===rC&&(rC=n.l)}function c9(n){return rC={p:[],l:rC,h:n,m:!0,_:0}}function gke(n){var e=n[Um];e.i===0||e.i===1?e.j():e.O=!0}function wN(n,e){e._=e.p.length;var t=e.p[0],r=n!==void 0&&n!==t;return e.h.g||pv("ES5").S(e,n,r),r?(t[Um].P&&(kR(e),i0(4)),sT(n)&&(n=OR(e,n),e.l||LR(e,n)),e.u&&pv("Patches").M(t[Um].t,n,e.u,e.s)):n=OR(e,t,[]),kR(e),e.u&&e.v(e.u,e.s),n!==Eee?n:void 0}function OR(n,e,t){if(K4(e))return e;var r=e[Um];if(!r)return nC(e,function(o,l){return h9(n,r,e,o,l,t)},!0),e;if(r.A!==n)return e;if(!r.P)return LR(n,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=Y4(r.k):r.o;nC(r.i===3?new Set(s):s,function(o,l){return h9(n,r,s,o,l,t)}),LR(n,s,!1),t&&n.u&&pv("Patches").R(r,t,n.u,n.s)}return r.o}function h9(n,e,t,r,s,o){if(Qw(s)){var l=OR(n,s,o&&e&&e.i!==3&&!rB(e.D,r)?o.concat(r):void 0);if(wee(t,r,l),!Qw(l))return;n.m=!1}if(sT(s)&&!K4(s)){if(!n.h.F&&n._<1)return;OR(n,s),e&&e.A.l||LR(n,s)}}function LR(n,e,t){t===void 0&&(t=!1),n.h.F&&n.m&&X4(e,t)}function EN(n,e){var t=n[Um];return(t?m1(t):n)[e]}function d9(n,e){if(e in n)for(var t=Object.getPrototypeOf(n);t;){var r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=Object.getPrototypeOf(t)}}function sB(n){n.P||(n.P=!0,n.l&&sB(n.l))}function xN(n){n.o||(n.o=Y4(n.t))}function oB(n,e,t){var r=V4(e)?pv("MapSet").N(e,t):j4(e)?pv("MapSet").T(e,t):n.g?function(s,o){var l=Array.isArray(s),u={i:l?1:0,A:o?o.A:u9(),P:!1,I:!1,D:{},l:o,t:s,k:null,o:null,j:null,C:!1},h=u,f=aB;l&&(h=[u],f=Dx);var g=Proxy.revocable(h,f),y=g.revoke,b=g.proxy;return u.k=b,u.j=y,b}(e,t):pv("ES5").J(e,t);return(t?t.A:u9()).p.push(r),r}function vke(n){return Qw(n)||i0(22,n),function e(t){if(!sT(t))return t;var r,s=t[Um],o=bE(t);if(s){if(!s.P&&(s.i<4||!pv("ES5").K(s)))return s.t;s.I=!0,r=f9(t,o),s.I=!1}else r=f9(t,o);return nC(r,function(l,u){s&&fke(s.t,l)===u||wee(r,l,e(u))}),o===3?new Set(r):r}(n)}function f9(n,e){switch(e){case 2:return new Map(n);case 3:return Array.from(n)}return Y4(n)}var p9,rC,J4=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",_ke=typeof Map<"u",yke=typeof Set<"u",m9=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Eee=J4?Symbol.for("immer-nothing"):((p9={})["immer-nothing"]=!0,p9),g9=J4?Symbol.for("immer-draftable"):"__$immer_draftable",Um=J4?Symbol.for("immer-state"):"__$immer_state",bke=""+Object.prototype.constructor,q4=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,Tke=Object.getOwnPropertyDescriptors||function(n){var e={};return q4(n).forEach(function(t){e[t]=Object.getOwnPropertyDescriptor(n,t)}),e},Ske={},aB={get:function(n,e){if(e===Um)return n;var t=m1(n);if(!rB(t,e))return function(s,o,l){var u,h=d9(o,l);return h?"value"in h?h.value:(u=h.get)===null||u===void 0?void 0:u.call(s.k):void 0}(n,t,e);var r=t[e];return n.I||!sT(r)?r:r===EN(n.t,e)?(xN(n),n.o[e]=oB(n.A.h,r,n)):r},has:function(n,e){return e in m1(n)},ownKeys:function(n){return Reflect.ownKeys(m1(n))},set:function(n,e,t){var r=d9(m1(n),e);if(r!=null&&r.set)return r.set.call(n.k,t),!0;if(!n.P){var s=EN(m1(n),e),o=s==null?void 0:s[Um];if(o&&o.t===t)return n.o[e]=t,n.D[e]=!1,!0;if(pke(t,s)&&(t!==void 0||rB(n.t,e)))return!0;xN(n),sB(n)}return n.o[e]===t&&typeof t!="number"&&(t!==void 0||e in n.o)||(n.o[e]=t,n.D[e]=!0,!0)},deleteProperty:function(n,e){return EN(n.t,e)!==void 0||e in n.t?(n.D[e]=!1,xN(n),sB(n)):delete n.D[e],n.o&&delete n.o[e],!0},getOwnPropertyDescriptor:function(n,e){var t=m1(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.i!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty:function(){i0(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){i0(12)}},Dx={};nC(aB,function(n,e){Dx[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Dx.deleteProperty=function(n,e){return Dx.set.call(this,n,e,void 0)},Dx.set=function(n,e,t){return aB.set.call(this,n[0],e,t,n[0])};var wke=function(){function n(t){var r=this;this.g=m9,this.F=!0,this.produce=function(s,o,l){if(typeof s=="function"&&typeof o!="function"){var u=o;o=s;var h=r;return function(M){var A=this;M===void 0&&(M=u);for(var k=arguments.length,O=Array(k>1?k-1:0),P=1;P<k;P++)O[P-1]=arguments[P];return h.produce(M,function(D){var U;return(U=o).call.apply(U,[A,D].concat(O))})}}var f;if(typeof o!="function"&&i0(6),l!==void 0&&typeof l!="function"&&i0(7),sT(s)){var g=c9(r),y=oB(r,s,void 0),b=!0;try{f=o(y),b=!1}finally{b?kR(g):iB(g)}return typeof Promise<"u"&&f instanceof Promise?f.then(function(M){return SN(g,l),wN(M,g)},function(M){throw kR(g),M}):(SN(g,l),wN(f,g))}if(!s||typeof s!="object"){if((f=o(s))===void 0&&(f=s),f===Eee&&(f=void 0),r.F&&X4(f,!0),l){var S=[],C=[];pv("Patches").M(s,f,S,C),l(S,C)}return f}i0(21,s)},this.produceWithPatches=function(s,o){if(typeof s=="function")return function(f){for(var g=arguments.length,y=Array(g>1?g-1:0),b=1;b<g;b++)y[b-1]=arguments[b];return r.produceWithPatches(f,function(S){return s.apply(void 0,[S].concat(y))})};var l,u,h=r.produce(s,o,function(f,g){l=f,u=g});return typeof Promise<"u"&&h instanceof Promise?h.then(function(f){return[f,l,u]}):[h,l,u]},typeof(t==null?void 0:t.useProxies)=="boolean"&&this.setUseProxies(t.useProxies),typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var e=n.prototype;return e.createDraft=function(t){sT(t)||i0(8),Qw(t)&&(t=vke(t));var r=c9(this),s=oB(this,t,void 0);return s[Um].C=!0,iB(r),s},e.finishDraft=function(t,r){var s=t&&t[Um],o=s.A;return SN(o,r),wN(void 0,o)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!m9&&i0(20),this.g=t},e.applyPatches=function(t,r){var s;for(s=r.length-1;s>=0;s--){var o=r[s];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}s>-1&&(r=r.slice(s+1));var l=pv("Patches").$;return Qw(t)?l(t,r):this.produce(t,function(u){return l(u,r)})},n}(),Hm=new wke,Eke=Hm.produce;Hm.produceWithPatches.bind(Hm);Hm.setAutoFreeze.bind(Hm);Hm.setUseProxies.bind(Hm);Hm.applyPatches.bind(Hm);Hm.createDraft.bind(Hm);Hm.finishDraft.bind(Hm);const xke=n=>(e,t,r)=>(r.setState=(s,o,...l)=>{const u=typeof s=="function"?Eke(s):s;return e(u,o,...l)},n(r.setState,t,r)),$ke=xke;class Cke{constructor(){this._previousTime=0,this._currentTime=0,this._delta=0,this._elapsed=0,this._timescale=1,this._useFixedDelta=!1,this._fixedDelta=16.67,this._usePageVisibilityAPI=typeof document<"u"&&document.hidden!==void 0,this._usePageVisibilityAPI===!0&&(this._pageVisibilityHandler=Mke.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disableFixedDelta(){return this._useFixedDelta=!1,this}dispose(){return this._usePageVisibilityAPI===!0&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}enableFixedDelta(){return this._useFixedDelta=!0,this}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getFixedDelta(){return this._fixedDelta/1e3}getTimescale(){return this._timescale}reset(){return this._currentTime=this._now(),this}setFixedDelta(e){return this._fixedDelta=e*1e3,this}setTimescale(e){return this._timescale=e,this}update(){return this._useFixedDelta===!0?this._delta=this._fixedDelta:(this._previousTime=this._currentTime,this._currentTime=this._now(),this._delta=this._currentTime-this._previousTime),this._delta*=this._timescale,this._elapsed+=this._delta,this}_now(){return(typeof performance>"u"?Date:performance).now()}}function Mke(){document.hidden===!1&&this.reset()}var gg={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,r="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",f=500,g="__lodash_placeholder__",y=1,b=2,S=4,C=1,M=2,A=1,k=2,O=4,P=8,D=16,U=32,H=64,V=128,z=256,Z=512,oe=30,ue="...",q=800,ae=16,le=1,ce=2,ge=3,$e=1/0,K=9007199254740991,ie=17976931348623157e292,se=NaN,fe=4294967295,Se=fe-1,Ue=fe>>>1,ke=[["ary",V],["bind",A],["bindKey",k],["curry",P],["curryRight",D],["flip",Z],["partial",U],["partialRight",H],["rearg",z]],qe="[object Arguments]",we="[object Array]",Ze="[object AsyncFunction]",et="[object Boolean]",ft="[object Date]",at="[object DOMException]",Ge="[object Error]",Ie="[object Function]",He="[object GeneratorFunction]",it="[object Map]",st="[object Number]",It="[object Null]",kt="[object Object]",vt="[object Promise]",Mt="[object Proxy]",Ct="[object RegExp]",gt="[object Set]",Ee="[object String]",re="[object Symbol]",Be="[object Undefined]",mt="[object WeakMap]",yt="[object WeakSet]",wt="[object ArrayBuffer]",Ke="[object DataView]",Qe="[object Float32Array]",Le="[object Float64Array]",Q="[object Int8Array]",te="[object Int16Array]",me="[object Int32Array]",Re="[object Uint8Array]",Fe="[object Uint8ClampedArray]",bt="[object Uint16Array]",ze="[object Uint32Array]",Pt=/\b__p \+= '';/g,lt=/\b(__p \+=) '' \+/g,Gt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Wt=/&(?:amp|lt|gt|quot|#39);/g,bn=/[&<>"']/g,ar=RegExp(Wt.source),cr=RegExp(bn.source),oi=/<%-([\s\S]+?)%>/g,Mr=/<%([\s\S]+?)%>/g,_r=/<%=([\s\S]+?)%>/g,ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Te=/^\w*$/,je=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ct=/[\\^$.*+?()[\]{}|]/g,Ht=RegExp(ct.source),nn=/^\s+/,kn=/\s/,De=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_t=/\{\n\/\* \[wrapped with (.+)\] \*/,Ot=/,? & /,St=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Xt=/[()=,{}\[\]\/\s]/,Wn=/\\(\\)?/g,ir=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,br=/\w*$/,Or=/^[-+]0x[0-9a-f]+$/i,Ei=/^0b[01]+$/i,Lr=/^\[object .+?Constructor\]$/,Ar=/^0o[0-7]+$/i,Ss=/^(?:0|[1-9]\d*)$/,La=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mo=/($^)/,Xl=/['\n\r\u2028\u2029\\]/g,rn="\\ud800-\\udfff",Dr="\\u0300-\\u036f",tl="\\ufe20-\\ufe2f",Na="\\u20d0-\\u20ff",zs=Dr+tl+Na,Us="\\u2700-\\u27bf",Pi="a-z\\xdf-\\xf6\\xf8-\\xff",Pr="\\xac\\xb1\\xd7\\xf7",In="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Nr="\\u2000-\\u206f",jr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Sr="A-Z\\xc0-\\xd6\\xd8-\\xde",Bi="\\ufe0e\\ufe0f",ws=Pr+In+Nr+jr,fi="[']",gs="["+rn+"]",nl="["+ws+"]",Da="["+zs+"]",fc="\\d+",pc="["+Us+"]",qs="["+Pi+"]",qo="[^"+rn+ws+fc+Us+Pi+Sr+"]",Kl="\\ud83c[\\udffb-\\udfff]",vu="(?:"+Da+"|"+Kl+")",gh="[^"+rn+"]",Qo="(?:\\ud83c[\\udde6-\\uddff]){2}",Tr="[\\ud800-\\udbff][\\udc00-\\udfff]",$i="["+Sr+"]",Pc="\\u200d",vh="(?:"+qs+"|"+qo+")",Bc="(?:"+$i+"|"+qo+")",xl="(?:"+fi+"(?:d|ll|m|re|s|t|ve))?",_u="(?:"+fi+"(?:D|LL|M|RE|S|T|VE))?",$l=vu+"?",Cl="["+Bi+"]?",wr="(?:"+Pc+"(?:"+[gh,Qo,Tr].join("|")+")"+Cl+$l+")*",Er="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Jl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rl=Cl+$l+wr,il="(?:"+[pc,Qo,Tr].join("|")+")"+rl,yu="(?:"+[gh+Da+"?",Da,Qo,Tr,gs].join("|")+")",Qi=RegExp(fi,"g"),vs=RegExp(Da,"g"),sl=RegExp(Kl+"(?="+Kl+")|"+yu+rl,"g"),Cd=RegExp([$i+"?"+qs+"+"+xl+"(?="+[nl,$i,"$"].join("|")+")",Bc+"+"+_u+"(?="+[nl,$i+vh,"$"].join("|")+")",$i+"?"+vh+"+"+xl,$i+"+"+_u,Jl,Er,fc,il].join("|"),"g"),lo=RegExp("["+Pc+rn+zs+Bi+"]"),Uu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ca=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],bu=-1,lr={};lr[Qe]=lr[Le]=lr[Q]=lr[te]=lr[me]=lr[Re]=lr[Fe]=lr[bt]=lr[ze]=!0,lr[qe]=lr[we]=lr[wt]=lr[et]=lr[Ke]=lr[ft]=lr[Ge]=lr[Ie]=lr[it]=lr[st]=lr[kt]=lr[Ct]=lr[gt]=lr[Ee]=lr[mt]=!1;var Gn={};Gn[qe]=Gn[we]=Gn[wt]=Gn[Ke]=Gn[et]=Gn[ft]=Gn[Qe]=Gn[Le]=Gn[Q]=Gn[te]=Gn[me]=Gn[it]=Gn[st]=Gn[kt]=Gn[Ct]=Gn[gt]=Gn[Ee]=Gn[re]=Gn[Re]=Gn[Fe]=Gn[bt]=Gn[ze]=!0,Gn[Ge]=Gn[Ie]=Gn[mt]=!1;var Es={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},uo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Tu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_h=parseFloat,Pa=parseInt,ha=typeof f_=="object"&&f_&&f_.Object===Object&&f_,Gu=typeof self=="object"&&self&&self.Object===Object&&self,$r=ha||Gu||Function("return this")(),Rs=e&&!e.nodeType&&e,bi=Rs&&!0&&n&&!n.nodeType&&n,Ci=bi&&bi.exports===Rs,da=Ci&&ha.process,ti=function(){try{var ye=bi&&bi.require&&bi.require("util").types;return ye||da&&da.binding&&da.binding("util")}catch{}}(),Su=ti&&ti.isArrayBuffer,Ao=ti&&ti.isDate,wu=ti&&ti.isMap,ol=ti&&ti.isRegExp,Fi=ti&&ti.isSet,Mi=ti&&ti.isTypedArray;function Vn(ye,Xe,Pe){switch(Pe.length){case 0:return ye.call(Xe);case 1:return ye.call(Xe,Pe[0]);case 2:return ye.call(Xe,Pe[0],Pe[1]);case 3:return ye.call(Xe,Pe[0],Pe[1],Pe[2])}return ye.apply(Xe,Pe)}function Ai(ye,Xe,Pe,Nt){for(var sn=-1,Rn=ye==null?0:ye.length;++sn<Rn;){var Jn=ye[sn];Xe(Nt,Jn,Pe(Jn),ye)}return Nt}function Jr(ye,Xe){for(var Pe=-1,Nt=ye==null?0:ye.length;++Pe<Nt&&Xe(ye[Pe],Pe,ye)!==!1;);return ye}function dd(ye,Xe){for(var Pe=ye==null?0:ye.length;Pe--&&Xe(ye[Pe],Pe,ye)!==!1;);return ye}function Eu(ye,Xe){for(var Pe=-1,Nt=ye==null?0:ye.length;++Pe<Nt;)if(!Xe(ye[Pe],Pe,ye))return!1;return!0}function ji(ye,Xe){for(var Pe=-1,Nt=ye==null?0:ye.length,sn=0,Rn=[];++Pe<Nt;){var Jn=ye[Pe];Xe(Jn,Pe,ye)&&(Rn[sn++]=Jn)}return Rn}function Ba(ye,Xe){var Pe=ye==null?0:ye.length;return!!Pe&&ks(ye,Xe,0)>-1}function yh(ye,Xe,Pe){for(var Nt=-1,sn=ye==null?0:ye.length;++Nt<sn;)if(Pe(Xe,ye[Nt]))return!0;return!1}function pr(ye,Xe){for(var Pe=-1,Nt=ye==null?0:ye.length,sn=Array(Nt);++Pe<Nt;)sn[Pe]=Xe(ye[Pe],Pe,ye);return sn}function Zo(ye,Xe){for(var Pe=-1,Nt=Xe.length,sn=ye.length;++Pe<Nt;)ye[sn+Pe]=Xe[Pe];return ye}function fd(ye,Xe,Pe,Nt){var sn=-1,Rn=ye==null?0:ye.length;for(Nt&&Rn&&(Pe=ye[++sn]);++sn<Rn;)Pe=Xe(Pe,ye[sn],sn,ye);return Pe}function lf(ye,Xe,Pe,Nt){var sn=ye==null?0:ye.length;for(Nt&&sn&&(Pe=ye[--sn]);sn--;)Pe=Xe(Pe,ye[sn],sn,ye);return Pe}function Fc(ye,Xe){for(var Pe=-1,Nt=ye==null?0:ye.length;++Pe<Nt;)if(Xe(ye[Pe],Pe,ye))return!0;return!1}var uf=ci("length");function Ff(ye){return ye.split("")}function wp(ye){return ye.match(St)||[]}function Md(ye,Xe,Pe){var Nt;return Pe(ye,function(sn,Rn,Jn){if(Xe(sn,Rn,Jn))return Nt=Rn,!1}),Nt}function ql(ye,Xe,Pe,Nt){for(var sn=ye.length,Rn=Pe+(Nt?1:-1);Nt?Rn--:++Rn<sn;)if(Xe(ye[Rn],Rn,ye))return Rn;return-1}function ks(ye,Xe,Pe){return Xe===Xe?Uc(ye,Xe,Pe):ql(ye,bh,Pe)}function Wu(ye,Xe,Pe,Nt){for(var sn=Pe-1,Rn=ye.length;++sn<Rn;)if(Nt(ye[sn],Xe))return sn;return-1}function bh(ye){return ye!==ye}function Fa(ye,Xe){var Pe=ye==null?0:ye.length;return Pe?Uo(ye,Xe)/Pe:se}function ci(ye){return function(Xe){return Xe==null?t:Xe[ye]}}function Cr(ye){return function(Xe){return ye==null?t:ye[Xe]}}function co(ye,Xe,Pe,Nt,sn){return sn(ye,function(Rn,Jn,_n){Pe=Nt?(Nt=!1,Rn):Xe(Pe,Rn,Jn,_n)}),Pe}function za(ye,Xe){var Pe=ye.length;for(ye.sort(Xe);Pe--;)ye[Pe]=ye[Pe].value;return ye}function Uo(ye,Xe){for(var Pe,Nt=-1,sn=ye.length;++Nt<sn;){var Rn=Xe(ye[Nt]);Rn!==t&&(Pe=Pe===t?Rn:Pe+Rn)}return Pe}function Ql(ye,Xe){for(var Pe=-1,Nt=Array(ye);++Pe<ye;)Nt[Pe]=Xe(Pe);return Nt}function Zl(ye,Xe){return pr(Xe,function(Pe){return[Pe,ye[Pe]]})}function Fh(ye){return ye&&ye.slice(0,Ml(ye)+1).replace(nn,"")}function Yr(ye){return function(Xe){return ye(Xe)}}function Ii(ye,Xe){return pr(Xe,function(Pe){return ye[Pe]})}function xr(ye,Xe){return ye.has(Xe)}function Yi(ye,Xe){for(var Pe=-1,Nt=ye.length;++Pe<Nt&&ks(Xe,ye[Pe],0)>-1;);return Pe}function fa(ye,Xe){for(var Pe=ye.length;Pe--&&ks(Xe,ye[Pe],0)>-1;);return Pe}function xu(ye,Xe){for(var Pe=ye.length,Nt=0;Pe--;)ye[Pe]===Xe&&++Nt;return Nt}var cf=Cr(Es),hf=Cr(uo);function pd(ye){return"\\"+Tu[ye]}function Vu(ye,Xe){return ye==null?t:ye[Xe]}function al(ye){return lo.test(ye)}function zc(ye){return Uu.test(ye)}function zh(ye){for(var Xe,Pe=[];!(Xe=ye.next()).done;)Pe.push(Xe.value);return Pe}function ju(ye){var Xe=-1,Pe=Array(ye.size);return ye.forEach(function(Nt,sn){Pe[++Xe]=[sn,Nt]}),Pe}function eu(ye,Xe){return function(Pe){return ye(Xe(Pe))}}function Hs(ye,Xe){for(var Pe=-1,Nt=ye.length,sn=0,Rn=[];++Pe<Nt;){var Jn=ye[Pe];(Jn===Xe||Jn===g)&&(ye[Pe]=g,Rn[sn++]=Pe)}return Rn}function tu(ye){var Xe=-1,Pe=Array(ye.size);return ye.forEach(function(Nt){Pe[++Xe]=Nt}),Pe}function Uh(ye){var Xe=-1,Pe=Array(ye.size);return ye.forEach(function(Nt){Pe[++Xe]=[Nt,Nt]}),Pe}function Uc(ye,Xe,Pe){for(var Nt=Pe-1,sn=ye.length;++Nt<sn;)if(ye[Nt]===Xe)return Nt;return-1}function Hc(ye,Xe,Pe){for(var Nt=Pe+1;Nt--;)if(ye[Nt]===Xe)return Nt;return Nt}function is(ye){return al(ye)?nu(ye):uf(ye)}function Hr(ye){return al(ye)?$u(ye):Ff(ye)}function Ml(ye){for(var Xe=ye.length;Xe--&&kn.test(ye.charAt(Xe)););return Xe}var Ua=Cr(Hu);function nu(ye){for(var Xe=sl.lastIndex=0;sl.test(ye);)++Xe;return Xe}function $u(ye){return ye.match(sl)||[]}function Th(ye){return ye.match(Cd)||[]}var Ad=function ye(Xe){Xe=Xe==null?$r:pi.defaults($r.Object(),Xe,pi.pick($r,ca));var Pe=Xe.Array,Nt=Xe.Date,sn=Xe.Error,Rn=Xe.Function,Jn=Xe.Math,_n=Xe.Object,Gr=Xe.RegExp,ho=Xe.String,Ti=Xe.TypeError,fo=Pe.prototype,ll=Rn.prototype,zi=_n.prototype,_s=Xe["__core-js_shared__"],Cu=ll.toString,qn=zi.hasOwnProperty,pa=0,Qs=function(){var c=/[^.]+$/.exec(_s&&_s.keys&&_s.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Gs=zi.toString,Ha=Cu.call(_n),Hh=$r._,Sh=Gr("^"+Cu.call(qn).replace(ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mc=Ci?Xe.Buffer:t,ea=Xe.Symbol,Gc=Xe.Uint8Array,Gh=mc?mc.allocUnsafe:t,Ga=eu(_n.getPrototypeOf,_n),Wh=_n.create,gc=zi.propertyIsEnumerable,Yu=fo.splice,md=ea?ea.isConcatSpreadable:t,ta=ea?ea.iterator:t,po=ea?ea.toStringTag:t,Al=function(){try{var c=wa(_n,"defineProperty");return c({},"",{}),c}catch{}}(),Vh=Xe.clearTimeout!==$r.clearTimeout&&Xe.clearTimeout,Ui=Nt&&Nt.now!==$r.Date.now&&Nt.now,gd=Xe.setTimeout!==$r.setTimeout&&Xe.setTimeout,Xu=Jn.ceil,ru=Jn.floor,Wc=_n.getOwnPropertySymbols,Id=mc?mc.isBuffer:t,Il=Xe.isFinite,Rd=fo.join,jh=eu(_n.keys,_n),ni=Jn.max,Ri=Jn.min,Ep=Nt.now,zf=Xe.parseInt,Rl=Jn.random,iu=fo.reverse,Ku=wa(Xe,"DataView"),Ju=wa(Xe,"Map"),wh=wa(Xe,"Promise"),ul=wa(Xe,"Set"),na=wa(Xe,"WeakMap"),kl=wa(_n,"create"),Vc=na&&new na,Ol={},jc=qa(Ku),vc=qa(Ju),kd=qa(wh),Wa=qa(ul),Xr=qa(na),cl=ea?ea.prototype:t,Zi=cl?cl.valueOf:t,ma=cl?cl.toString:t;function X(c){if(di(c)&&!Ln(c)&&!(c instanceof mn)){if(c instanceof Ir)return c;if(qn.call(c,"__wrapped__"))return Fd(c)}return new Ir(c)}var xs=function(){function c(){}return function(m){if(!si(m))return{};if(Wh)return Wh(m);c.prototype=m;var E=new c;return c.prototype=t,E}}();function ga(){}function Ir(c,m){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=t}X.templateSettings={escape:oi,evaluate:Mr,interpolate:_r,variable:"",imports:{_:X}},X.prototype=ga.prototype,X.prototype.constructor=X,Ir.prototype=xs(ga.prototype),Ir.prototype.constructor=Ir;function mn(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=fe,this.__views__=[]}function Uf(){var c=new mn(this.__wrapped__);return c.__actions__=ii(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=ii(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=ii(this.__views__),c}function hl(){if(this.__filtered__){var c=new mn(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function ki(){var c=this.__wrapped__.value(),m=this.__dir__,E=Ln(c),N=m<0,G=E?c.length:0,J=vn(0,G,this.__views__),he=J.start,ve=J.end,xe=ve-he,nt=N?ve:he-1,rt=this.__iteratees__,dt=rt.length,Lt=0,qt=Ri(xe,this.__takeCount__);if(!E||!N&&G==xe&&qt==xe)return eh(c,this.__actions__);var pn=[];e:for(;xe--&&Lt<qt;){nt+=m;for(var Nn=-1,dn=c[nt];++Nn<dt;){var Yn=rt[Nn],er=Yn.iteratee,ua=Yn.type,io=er(dn);if(ua==ce)dn=io;else if(!io){if(ua==le)continue e;break e}}pn[Lt++]=dn}return pn}mn.prototype=xs(ga.prototype),mn.prototype.constructor=mn;function hi(c){var m=-1,E=c==null?0:c.length;for(this.clear();++m<E;){var N=c[m];this.set(N[0],N[1])}}function es(){this.__data__=kl?kl(null):{},this.size=0}function ss(c){var m=this.has(c)&&delete this.__data__[c];return this.size-=m?1:0,m}function Yc(c){var m=this.__data__;if(kl){var E=m[c];return E===h?t:E}return qn.call(m,c)?m[c]:t}function va(c){var m=this.__data__;return kl?m[c]!==t:qn.call(m,c)}function _a(c,m){var E=this.__data__;return this.size+=this.has(c)?0:1,E[c]=kl&&m===t?h:m,this}hi.prototype.clear=es,hi.prototype.delete=ss,hi.prototype.get=Yc,hi.prototype.has=va,hi.prototype.set=_a;function os(c){var m=-1,E=c==null?0:c.length;for(this.clear();++m<E;){var N=c[m];this.set(N[0],N[1])}}function Xc(){this.__data__=[],this.size=0}function ra(c){var m=this.__data__,E=ys(m,c);if(E<0)return!1;var N=m.length-1;return E==N?m.pop():Yu.call(m,E,1),--this.size,!0}function Od(c){var m=this.__data__,E=ys(m,c);return E<0?t:m[E][1]}function Ld(c){return ys(this.__data__,c)>-1}function Yh(c,m){var E=this.__data__,N=ys(E,c);return N<0?(++this.size,E.push([c,m])):E[N][1]=m,this}os.prototype.clear=Xc,os.prototype.delete=ra,os.prototype.get=Od,os.prototype.has=Ld,os.prototype.set=Yh;function Ws(c){var m=-1,E=c==null?0:c.length;for(this.clear();++m<E;){var N=c[m];this.set(N[0],N[1])}}function Kn(){this.size=0,this.__data__={hash:new hi,map:new(Ju||os),string:new hi}}function Vs(c){var m=nh(this,c).delete(c);return this.size-=m?1:0,m}function Zs(c){return nh(this,c).get(c)}function Hi(c){return nh(this,c).has(c)}function su(c,m){var E=nh(this,c),N=E.size;return E.set(c,m),this.size+=E.size==N?0:1,this}Ws.prototype.clear=Kn,Ws.prototype.delete=Vs,Ws.prototype.get=Zs,Ws.prototype.has=Hi,Ws.prototype.set=su;function Ho(c){var m=-1,E=c==null?0:c.length;for(this.__data__=new Ws;++m<E;)this.add(c[m])}function $n(c){return this.__data__.set(c,h),this}function mi(c){return this.__data__.has(c)}Ho.prototype.add=Ho.prototype.push=$n,Ho.prototype.has=mi;function gi(c){var m=this.__data__=new os(c);this.size=m.size}function Hf(){this.__data__=new os,this.size=0}function Eh(c){var m=this.__data__,E=m.delete(c);return this.size=m.size,E}function mo(c){return this.__data__.get(c)}function ya(c){return this.__data__.has(c)}function Mn(c,m){var E=this.__data__;if(E instanceof os){var N=E.__data__;if(!Ju||N.length<s-1)return N.push([c,m]),this.size=++E.size,this;E=this.__data__=new Ws(N)}return E.set(c,m),this.size=E.size,this}gi.prototype.clear=Hf,gi.prototype.delete=Eh,gi.prototype.get=mo,gi.prototype.has=ya,gi.prototype.set=Mn;function yn(c,m){var E=Ln(c),N=!E&&Yd(c),G=!E&&!N&&lh(c),J=!E&&!N&&!G&&Jd(c),he=E||N||G||J,ve=he?Ql(c.length,ho):[],xe=ve.length;for(var nt in c)(m||qn.call(c,nt))&&!(he&&(nt=="length"||G&&(nt=="offset"||nt=="parent")||J&&(nt=="buffer"||nt=="byteLength"||nt=="byteOffset")||Ja(nt,xe)))&&ve.push(nt);return ve}function dl(c){var m=c.length;return m?c[Os(0,m-1)]:t}function _c(c,m){return mr(ii(c),Va(m,0,c.length))}function xp(c){return mr(ii(c))}function ou(c,m,E){(E!==t&&!Ca(c[m],E)||E===t&&!(m in c))&&Go(c,m,E)}function Io(c,m,E){var N=c[m];(!(qn.call(c,m)&&Ca(N,E))||E===t&&!(m in c))&&Go(c,m,E)}function ys(c,m){for(var E=c.length;E--;)if(Ca(c[E][0],m))return E;return-1}function fl(c,m,E,N){return Ro(c,function(G,J,he){m(N,G,E(G),he)}),N}function as(c,m){return c&&cs(m,wi(m),c)}function pl(c,m){return c&&cs(m,rs(m),c)}function Go(c,m,E){m=="__proto__"&&Al?Al(c,m,{configurable:!0,enumerable:!0,value:E,writable:!0}):c[m]=E}function Xh(c,m){for(var E=-1,N=m.length,G=Pe(N),J=c==null;++E<N;)G[E]=J?t:bm(c,m[E]);return G}function Va(c,m,E){return c===c&&(E!==t&&(c=c<=E?c:E),m!==t&&(c=c>=m?c:m)),c}function Oi(c,m,E,N,G,J){var he,ve=m&y,xe=m&b,nt=m&S;if(E&&(he=G?E(c,N,G,J):E(c)),he!==t)return he;if(!si(c))return c;var rt=Ln(c);if(rt){if(he=qm(c),!ve)return ii(c,he)}else{var dt=hs(c),Lt=dt==Ie||dt==He;if(lh(c))return th(c,ve);if(dt==kt||dt==qe||Lt&&!G){if(he=xe||Lt?{}:xc(c),!ve)return xe?yd(c,pl(he,c)):qh(c,as(he,c))}else{if(!Gn[dt])return G?c:{};he=no(c,dt,ve)}}J||(J=new gi);var qt=J.get(c);if(qt)return qt;J.set(c,he),Lv(c)?c.forEach(function(dn){he.add(Oi(dn,m,E,dn,c,J))}):td(c)&&c.forEach(function(dn,Yn){he.set(Yn,Oi(dn,m,E,Yn,c,J))});var pn=nt?xe?Rr:fr:xe?rs:wi,Nn=rt?t:pn(c);return Jr(Nn||c,function(dn,Yn){Nn&&(Yn=dn,dn=c[Yn]),Io(he,Yn,Oi(dn,m,E,Yn,c,J))}),he}function Nd(c){var m=wi(c);return function(E){return Kc(E,c,m)}}function Kc(c,m,E){var N=E.length;if(c==null)return!N;for(c=_n(c);N--;){var G=E[N],J=m[G],he=c[G];if(he===t&&!(G in c)||!J(he))return!1}return!0}function Kh(c,m,E){if(typeof c!="function")throw new Ti(l);return gf(function(){c.apply(t,E)},m)}function Wo(c,m,E,N){var G=-1,J=Ba,he=!0,ve=c.length,xe=[],nt=m.length;if(!ve)return xe;E&&(m=pr(m,Yr(E))),N?(J=yh,he=!1):m.length>=s&&(J=xr,he=!1,m=new Ho(m));e:for(;++G<ve;){var rt=c[G],dt=E==null?rt:E(rt);if(rt=N||rt!==0?rt:0,he&&dt===dt){for(var Lt=nt;Lt--;)if(m[Lt]===dt)continue e;xe.push(rt)}else J(m,dt,N)||xe.push(rt)}return xe}var Ro=Qh(ls),df=Qh(ja,!0);function Mu(c,m){var E=!0;return Ro(c,function(N,G,J){return E=!!m(N,G,J),E}),E}function Ll(c,m,E){for(var N=-1,G=c.length;++N<G;){var J=c[N],he=m(J);if(he!=null&&(ve===t?he===he&&!la(he):E(he,ve)))var ve=he,xe=J}return xe}function vd(c,m,E,N){var G=c.length;for(E=An(E),E<0&&(E=-E>G?0:G+E),N=N===t||N>G?G:An(N),N<0&&(N+=G),N=E>N?0:k0(N);E<N;)c[E++]=m;return c}function yc(c,m){var E=[];return Ro(c,function(N,G,J){m(N,G,J)&&E.push(N)}),E}function qr(c,m,E,N,G){var J=-1,he=c.length;for(E||(E=Dd),G||(G=[]);++J<he;){var ve=c[J];m>0&&E(ve)?m>1?qr(ve,m-1,E,N,G):Zo(G,ve):N||(G[G.length]=ve)}return G}var au=Ec(),qu=Ec(!0);function ls(c,m){return c&&au(c,m,wi)}function ja(c,m){return c&&qu(c,m,wi)}function $s(c,m){return ji(m,function(E){return Mc(c[E])})}function Cs(c,m){m=sa(m,c);for(var E=0,N=m.length;c!=null&&E<N;)c=c[wo(m[E++])];return E&&E==N?c:t}function Jc(c,m,E){var N=m(c);return Ln(c)?N:Zo(N,E(c))}function vi(c){return c==null?c===t?Be:It:po&&po in _n(c)?vl(c):kg(c)}function Ya(c,m){return c>m}function bc(c,m){return c!=null&&qn.call(c,m)}function ff(c,m){return c!=null&&m in _n(c)}function xh(c,m,E){return c>=Ri(m,E)&&c<ni(m,E)}function ia(c,m,E){for(var N=E?yh:Ba,G=c[0].length,J=c.length,he=J,ve=Pe(J),xe=1/0,nt=[];he--;){var rt=c[he];he&&m&&(rt=pr(rt,Yr(m))),xe=Ri(rt.length,xe),ve[he]=!E&&(m||G>=120&&rt.length>=120)?new Ho(he&&rt):t}rt=c[0];var dt=-1,Lt=ve[0];e:for(;++dt<G&&nt.length<xe;){var qt=rt[dt],pn=m?m(qt):qt;if(qt=E||qt!==0?qt:0,!(Lt?xr(Lt,pn):N(nt,pn,E))){for(he=J;--he;){var Nn=ve[he];if(!(Nn?xr(Nn,pn):N(c[he],pn,E)))continue e}Lt&&Lt.push(pn),nt.push(qt)}}return nt}function Xi(c,m,E,N){return ls(c,function(G,J,he){m(N,E(G),J,he)}),N}function Pn(c,m,E){m=sa(m,c),c=Mp(c,m);var N=c==null?c:c[wo(Ls(m))];return N==null?t:Vn(N,c,E)}function nr(c){return di(c)&&vi(c)==qe}function zr(c){return di(c)&&vi(c)==wt}function ri(c){return di(c)&&vi(c)==ft}function Zr(c,m,E,N,G){return c===m?!0:c==null||m==null||!di(c)&&!di(m)?c!==c&&m!==m:ko(c,m,E,N,Zr,G)}function ko(c,m,E,N,G,J){var he=Ln(c),ve=Ln(m),xe=he?we:hs(c),nt=ve?we:hs(m);xe=xe==qe?kt:xe,nt=nt==qe?kt:nt;var rt=xe==kt,dt=nt==kt,Lt=xe==nt;if(Lt&&lh(c)){if(!lh(m))return!1;he=!0,rt=!1}if(Lt&&!rt)return J||(J=new gi),he||Jd(c)?on(c,m,E,N,G,J):xn(c,m,xe,E,N,G,J);if(!(E&C)){var qt=rt&&qn.call(c,"__wrapped__"),pn=dt&&qn.call(m,"__wrapped__");if(qt||pn){var Nn=qt?c.value():c,dn=pn?m.value():m;return J||(J=new gi),G(Nn,dn,E,N,J)}}return Lt?(J||(J=new gi),On(c,m,E,N,G,J)):!1}function us(c){return di(c)&&hs(c)==it}function ts(c,m,E,N){var G=E.length,J=G,he=!N;if(c==null)return!J;for(c=_n(c);G--;){var ve=E[G];if(he&&ve[2]?ve[1]!==c[ve[0]]:!(ve[0]in c))return!1}for(;++G<J;){ve=E[G];var xe=ve[0],nt=c[xe],rt=ve[1];if(he&&ve[2]){if(nt===t&&!(xe in c))return!1}else{var dt=new gi;if(N)var Lt=N(nt,rt,xe,c,m,dt);if(!(Lt===t?Zr(rt,nt,C|M,N,dt):Lt))return!1}}return!0}function lu(c){if(!si(c)||ro(c))return!1;var m=Mc(c)?Sh:Lr;return m.test(qa(c))}function Qu(c){return di(c)&&vi(c)==Ct}function Tc(c){return di(c)&&hs(c)==gt}function Zu(c){return di(c)&&Ih(c.length)&&!!lr[vi(c)]}function eo(c){return typeof c=="function"?c:c==null?Do:typeof c=="object"?Ln(c)?vo(c[0],c[1]):Iu(c):Xv(c)}function go(c){if(!$c(c))return jh(c);var m=[];for(var E in _n(c))qn.call(c,E)&&E!="constructor"&&m.push(E);return m}function _d(c){if(!si(c))return xa(c);var m=$c(c),E=[];for(var N in c)N=="constructor"&&(m||!qn.call(c,N))||E.push(N);return E}function ba(c,m){return c<m}function Au(c,m){var E=-1,N=Gi(c)?Pe(c.length):[];return Ro(c,function(G,J,he){N[++E]=m(G,J,he)}),N}function Iu(c){var m=tm(c);return m.length==1&&m[0][2]?nm(m[0][0],m[0][1]):function(E){return E===c||ts(E,c,m)}}function vo(c,m){return Ea(c)&&$p(m)?nm(wo(c),m):function(E){var N=bm(E,c);return N===t&&N===m?Tm(E,c):Zr(m,N,C|M)}}function _o(c,m,E,N,G){c!==m&&au(m,function(J,he){if(G||(G=new gi),si(J))Nl(c,m,he,E,_o,N,G);else{var ve=N?N(hu(c,he),J,he+"",c,m,G):t;ve===t&&(ve=J),ou(c,he,ve)}},rs)}function Nl(c,m,E,N,G,J,he){var ve=hu(c,E),xe=hu(m,E),nt=he.get(xe);if(nt){ou(c,E,nt);return}var rt=J?J(ve,xe,E+"",c,m,he):t,dt=rt===t;if(dt){var Lt=Ln(xe),qt=!Lt&&lh(xe),pn=!Lt&&!qt&&Jd(xe);rt=xe,Lt||qt||pn?Ln(ve)?rt=ve:Qr(ve)?rt=ii(ve):qt?(dt=!1,rt=th(xe,!0)):pn?(dt=!1,rt=Pl(xe,!0)):rt=[]:Vr(xe)||Yd(xe)?(rt=ve,Yd(ve)?rt=hb(ve):(!si(ve)||Mc(ve))&&(rt=xc(xe))):dt=!1}dt&&(he.set(xe,rt),G(rt,xe,N,J,he),he.delete(xe)),ou(c,E,rt)}function Vo(c,m){var E=c.length;if(E)return m+=m<0?E:0,Ja(m,E)?c[m]:t}function ec(c,m,E){m.length?m=pr(m,function(J){return Ln(J)?function(he){return Cs(he,J.length===1?J[0]:J)}:J}):m=[Do];var N=-1;m=pr(m,Yr(ln()));var G=Au(c,function(J,he,ve){var xe=pr(m,function(nt){return nt(J)});return{criteria:xe,index:++N,value:J}});return za(G,function(J,he){return Bl(J,he,E)})}function tc(c,m){return $h(c,m,function(E,N){return Tm(c,N)})}function $h(c,m,E){for(var N=-1,G=m.length,J={};++N<G;){var he=m[N],ve=Cs(c,he);E(ve,he)&&_i(J,sa(he,c),ve)}return J}function Ch(c){return function(m){return Cs(m,c)}}function Br(c,m,E,N){var G=N?Wu:ks,J=-1,he=m.length,ve=c;for(c===m&&(m=ii(m)),E&&(ve=pr(c,Yr(E)));++J<he;)for(var xe=0,nt=m[J],rt=E?E(nt):nt;(xe=G(ve,rt,xe,N))>-1;)ve!==c&&Yu.call(ve,xe,1),Yu.call(c,xe,1);return c}function bs(c,m){for(var E=c?m.length:0,N=E-1;E--;){var G=m[E];if(E==N||G!==J){var J=G;Ja(G)?Yu.call(c,G,1):Zc(c,G)}}return c}function Os(c,m){return c+ru(Rl()*(m-c+1))}function Xa(c,m,E,N){for(var G=-1,J=ni(Xu((m-c)/(E||1)),0),he=Pe(J);J--;)he[N?J:++G]=c,c+=E;return he}function js(c,m){var E="";if(!c||m<1||m>K)return E;do m%2&&(E+=c),m=ru(m/2),m&&(c+=c);while(m);return E}function fn(c,m){return Bd(rm(c,m,Do),c+"")}function qc(c){return dl(Tf(c))}function En(c,m){var E=Tf(c);return mr(E,Va(m,0,E.length))}function _i(c,m,E,N){if(!si(c))return c;m=sa(m,c);for(var G=-1,J=m.length,he=J-1,ve=c;ve!=null&&++G<J;){var xe=wo(m[G]),nt=E;if(xe==="__proto__"||xe==="constructor"||xe==="prototype")return c;if(G!=he){var rt=ve[xe];nt=N?N(rt,xe,ve):t,nt===t&&(nt=si(rt)?rt:Ja(m[G+1])?[]:{})}Io(ve,xe,nt),ve=ve[xe]}return c}var Ms=Vc?function(c,m){return Vc.set(c,m),c}:Do,uu=Al?function(c,m){return Al(c,"toString",{configurable:!0,enumerable:!1,value:Vv(m),writable:!0})}:Do;function Dl(c){return mr(Tf(c))}function Ut(c,m,E){var N=-1,G=c.length;m<0&&(m=-m>G?0:G+m),E=E>G?G:E,E<0&&(E+=G),G=m>E?0:E-m>>>0,m>>>=0;for(var J=Pe(G);++N<G;)J[N]=c[N+m];return J}function ml(c,m){var E;return Ro(c,function(N,G,J){return E=m(N,G,J),!E}),!!E}function Kr(c,m,E){var N=0,G=c==null?N:c.length;if(typeof m=="number"&&m===m&&G<=Ue){for(;N<G;){var J=N+G>>>1,he=c[J];he!==null&&!la(he)&&(E?he<=m:he<m)?N=J+1:G=J}return G}return nc(c,m,Do,E)}function nc(c,m,E,N){var G=0,J=c==null?0:c.length;if(J===0)return 0;m=E(m);for(var he=m!==m,ve=m===null,xe=la(m),nt=m===t;G<J;){var rt=ru((G+J)/2),dt=E(c[rt]),Lt=dt!==t,qt=dt===null,pn=dt===dt,Nn=la(dt);if(he)var dn=N||pn;else nt?dn=pn&&(N||Lt):ve?dn=pn&&Lt&&(N||!qt):xe?dn=pn&&Lt&&!qt&&(N||!Nn):qt||Nn?dn=!1:dn=N?dt<=m:dt<m;dn?G=rt+1:J=rt}return Ri(J,Se)}function Jh(c,m){for(var E=-1,N=c.length,G=0,J=[];++E<N;){var he=c[E],ve=m?m(he):he;if(!E||!Ca(ve,xe)){var xe=ve;J[G++]=he===0?0:he}}return J}function Qc(c){return typeof c=="number"?c:la(c)?se:+c}function ai(c){if(typeof c=="string")return c;if(Ln(c))return pr(c,ai)+"";if(la(c))return ma?ma.call(c):"";var m=c+"";return m=="0"&&1/c==-$e?"-0":m}function Ki(c,m,E){var N=-1,G=Ba,J=c.length,he=!0,ve=[],xe=ve;if(E)he=!1,G=yh;else if(J>=s){var nt=m?null:Ur(c);if(nt)return tu(nt);he=!1,G=xr,xe=new Ho}else xe=m?[]:ve;e:for(;++N<J;){var rt=c[N],dt=m?m(rt):rt;if(rt=E||rt!==0?rt:0,he&&dt===dt){for(var Lt=xe.length;Lt--;)if(xe[Lt]===dt)continue e;m&&xe.push(dt),ve.push(rt)}else G(xe,dt,E)||(xe!==ve&&xe.push(dt),ve.push(rt))}return ve}function Zc(c,m){return m=sa(m,c),c=Mp(c,m),c==null||delete c[wo(Ls(m))]}function yo(c,m,E,N){return _i(c,m,E(Cs(c,m)),N)}function gl(c,m,E,N){for(var G=c.length,J=N?G:-1;(N?J--:++J<G)&&m(c[J],J,c););return E?Ut(c,N?0:J,N?J+1:G):Ut(c,N?J+1:0,N?G:J)}function eh(c,m){var E=c;return E instanceof mn&&(E=E.value()),fd(m,function(N,G){return G.func.apply(G.thisArg,Zo([N],G.args))},E)}function Sc(c,m,E){var N=c.length;if(N<2)return N?Ki(c[0]):[];for(var G=-1,J=Pe(N);++G<N;)for(var he=c[G],ve=-1;++ve<N;)ve!=G&&(J[G]=Wo(J[G]||he,c[ve],m,E));return Ki(qr(J,1),m,E)}function rc(c,m,E){for(var N=-1,G=c.length,J=m.length,he={};++N<G;){var ve=N<J?m[N]:t;E(he,c[N],ve)}return he}function Oo(c){return Qr(c)?c:[]}function to(c){return typeof c=="function"?c:Do}function sa(c,m){return Ln(c)?c:Ea(c,m)?[c]:y0(or(c))}var Mh=fn;function bo(c,m,E){var N=c.length;return E=E===t?N:E,!m&&E>=N?c:Ut(c,m,E)}var Ru=Vh||function(c){return $r.clearTimeout(c)};function th(c,m){if(m)return c.slice();var E=c.length,N=Gh?Gh(E):new c.constructor(E);return c.copy(N),N}function wc(c){var m=new c.constructor(c.byteLength);return new Gc(m).set(new Gc(c)),m}function jo(c,m){var E=m?wc(c.buffer):c.buffer;return new c.constructor(E,c.byteOffset,c.byteLength)}function To(c){var m=new c.constructor(c.source,br.exec(c));return m.lastIndex=c.lastIndex,m}function ic(c){return Zi?_n(Zi.call(c)):{}}function Pl(c,m){var E=m?wc(c.buffer):c.buffer;return new c.constructor(E,c.byteOffset,c.length)}function So(c,m){if(c!==m){var E=c!==t,N=c===null,G=c===c,J=la(c),he=m!==t,ve=m===null,xe=m===m,nt=la(m);if(!ve&&!nt&&!J&&c>m||J&&he&&xe&&!ve&&!nt||N&&he&&xe||!E&&xe||!G)return 1;if(!N&&!J&&!nt&&c<m||nt&&E&&G&&!N&&!J||ve&&E&&G||!he&&G||!xe)return-1}return 0}function Bl(c,m,E){for(var N=-1,G=c.criteria,J=m.criteria,he=G.length,ve=E.length;++N<he;){var xe=So(G[N],J[N]);if(xe){if(N>=ve)return xe;var nt=E[N];return xe*(nt=="desc"?-1:1)}}return c.index-m.index}function Ka(c,m,E,N){for(var G=-1,J=c.length,he=E.length,ve=-1,xe=m.length,nt=ni(J-he,0),rt=Pe(xe+nt),dt=!N;++ve<xe;)rt[ve]=m[ve];for(;++G<he;)(dt||G<J)&&(rt[E[G]]=c[G]);for(;nt--;)rt[ve++]=c[G++];return rt}function cu(c,m,E,N){for(var G=-1,J=c.length,he=-1,ve=E.length,xe=-1,nt=m.length,rt=ni(J-ve,0),dt=Pe(rt+nt),Lt=!N;++G<rt;)dt[G]=c[G];for(var qt=G;++xe<nt;)dt[qt+xe]=m[xe];for(;++he<ve;)(Lt||G<J)&&(dt[qt+E[he]]=c[G++]);return dt}function ii(c,m){var E=-1,N=c.length;for(m||(m=Pe(N));++E<N;)m[E]=c[E];return m}function cs(c,m,E,N){var G=!E;E||(E={});for(var J=-1,he=m.length;++J<he;){var ve=m[J],xe=N?N(E[ve],c[ve],ve,E,c):t;xe===t&&(xe=c[ve]),G?Go(E,ve,xe):Io(E,ve,xe)}return E}function qh(c,m){return cs(c,mf(c),m)}function yd(c,m){return cs(c,Zh(c),m)}function Ta(c,m){return function(E,N){var G=Ln(E)?Ai:fl,J=m?m():{};return G(E,c,ln(N,2),J)}}function Sa(c){return fn(function(m,E){var N=-1,G=E.length,J=G>1?E[G-1]:t,he=G>2?E[2]:t;for(J=c.length>3&&typeof J=="function"?(G--,J):t,he&&Wr(E[0],E[1],he)&&(J=G<3?t:J,G=1),m=_n(m);++N<G;){var ve=E[N];ve&&c(m,ve,N,J)}return m})}function Qh(c,m){return function(E,N){if(E==null)return E;if(!Gi(E))return c(E,N);for(var G=E.length,J=m?G:-1,he=_n(E);(m?J--:++J<G)&&N(he[J],J,he)!==!1;);return E}}function Ec(c){return function(m,E,N){for(var G=-1,J=_n(m),he=N(m),ve=he.length;ve--;){var xe=he[c?ve:++G];if(E(J[xe],xe,J)===!1)break}return m}}function Gf(c,m,E){var N=m&A,G=v(c);function J(){var he=this&&this!==$r&&this instanceof J?G:c;return he.apply(N?E:this,arguments)}return J}function x(c){return function(m){m=or(m);var E=al(m)?Hr(m):t,N=E?E[0]:m.charAt(0),G=E?bo(E,1).join(""):m.slice(1);return N[c]()+G}}function d(c){return function(m){return fd(xb(V_(m).replace(Qi,"")),c,"")}}function v(c){return function(){var m=arguments;switch(m.length){case 0:return new c;case 1:return new c(m[0]);case 2:return new c(m[0],m[1]);case 3:return new c(m[0],m[1],m[2]);case 4:return new c(m[0],m[1],m[2],m[3]);case 5:return new c(m[0],m[1],m[2],m[3],m[4]);case 6:return new c(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new c(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var E=xs(c.prototype),N=c.apply(E,m);return si(N)?N:E}}function $(c,m,E){var N=v(c);function G(){for(var J=arguments.length,he=Pe(J),ve=J,xe=Ah(G);ve--;)he[ve]=arguments[ve];var nt=J<3&&he[0]!==xe&&he[J-1]!==xe?[]:Hs(he,xe);if(J-=nt.length,J<E)return Sn(c,m,W,G.placeholder,t,he,nt,t,t,E-J);var rt=this&&this!==$r&&this instanceof G?N:c;return Vn(rt,this,he)}return G}function I(c){return function(m,E,N){var G=_n(m);if(!Gi(m)){var J=ln(E,3);m=wi(m),E=function(ve){return J(G[ve],ve,G)}}var he=c(m,E,N);return he>-1?G[J?m[he]:he]:t}}function B(c){return zn(function(m){var E=m.length,N=E,G=Ir.prototype.thru;for(c&&m.reverse();N--;){var J=m[N];if(typeof J!="function")throw new Ti(l);if(G&&!he&&pf(J)=="wrapper")var he=new Ir([],!0)}for(N=he?N:E;++N<E;){J=m[N];var ve=pf(J),xe=ve=="wrapper"?Fl(J):t;xe&&Li(xe[0])&&xe[1]==(V|P|U|z)&&!xe[4].length&&xe[9]==1?he=he[pf(xe[0])].apply(he,xe[3]):he=J.length==1&&Li(J)?he[ve]():he.thru(J)}return function(){var nt=arguments,rt=nt[0];if(he&&nt.length==1&&Ln(rt))return he.plant(rt).value();for(var dt=0,Lt=E?m[dt].apply(this,nt):rt;++dt<E;)Lt=m[dt].call(this,Lt);return Lt}})}function W(c,m,E,N,G,J,he,ve,xe,nt){var rt=m&V,dt=m&A,Lt=m&k,qt=m&(P|D),pn=m&Z,Nn=Lt?t:v(c);function dn(){for(var Yn=arguments.length,er=Pe(Yn),ua=Yn;ua--;)er[ua]=arguments[ua];if(qt)var io=Ah(dn),Ds=xu(er,io);if(N&&(er=Ka(er,N,G,qt)),J&&(er=cu(er,J,he,qt)),Yn-=Ds,qt&&Yn<nt){var yi=Hs(er,io);return Sn(c,m,W,dn.placeholder,E,er,yi,ve,xe,nt-Yn)}var Gl=dt?E:this,Ic=Lt?Gl[c]:c;return Yn=er.length,ve?er=_l(er,ve):pn&&Yn>1&&er.reverse(),rt&&xe<Yn&&(er.length=xe),this&&this!==$r&&this instanceof dn&&(Ic=Nn||v(Ic)),Ic.apply(Gl,er)}return dn}function pe(c,m){return function(E,N){return Xi(E,c,m(N),{})}}function Oe(c,m){return function(E,N){var G;if(E===t&&N===t)return m;if(E!==t&&(G=E),N!==t){if(G===t)return N;typeof E=="string"||typeof N=="string"?(E=ai(E),N=ai(N)):(E=Qc(E),N=Qc(N)),G=c(E,N)}return G}}function tt(c){return zn(function(m){return m=pr(m,Yr(ln())),fn(function(E){var N=this;return c(m,function(G){return Vn(G,N,E)})})})}function xt(c,m){m=m===t?" ":ai(m);var E=m.length;if(E<2)return E?js(m,c):m;var N=js(m,Xu(c/is(m)));return al(m)?bo(Hr(N),0,c).join(""):N.slice(0,c)}function Zt(c,m,E,N){var G=m&A,J=v(c);function he(){for(var ve=-1,xe=arguments.length,nt=-1,rt=N.length,dt=Pe(rt+xe),Lt=this&&this!==$r&&this instanceof he?J:c;++nt<rt;)dt[nt]=N[nt];for(;xe--;)dt[nt++]=arguments[++ve];return Vn(Lt,G?E:this,dt)}return he}function cn(c){return function(m,E,N){return N&&typeof N!="number"&&Wr(m,E,N)&&(E=N=t),m=Ac(m),E===t?(E=m,m=0):E=Ac(E),N=N===t?m<E?1:-1:Ac(N),Xa(m,E,N,c)}}function Tn(c){return function(m,E){return typeof m=="string"&&typeof E=="string"||(m=Ji(m),E=Ji(E)),c(m,E)}}function Sn(c,m,E,N,G,J,he,ve,xe,nt){var rt=m&P,dt=rt?he:t,Lt=rt?t:he,qt=rt?J:t,pn=rt?t:J;m|=rt?U:H,m&=~(rt?H:U),m&O||(m&=~(A|k));var Nn=[c,m,G,qt,dt,pn,Lt,ve,xe,nt],dn=E.apply(t,Nn);return Li(c)&&Pd(dn,Nn),dn.placeholder=N,rh(dn,c,m)}function gn(c){var m=Jn[c];return function(E,N){if(E=Ji(E),N=N==null?0:Ri(An(N),292),N&&Il(E)){var G=(or(E)+"e").split("e"),J=m(G[0]+"e"+(+G[1]+N));return G=(or(J)+"e").split("e"),+(G[0]+"e"+(+G[1]-N))}return m(E)}}var Ur=ul&&1/tu(new ul([,-0]))[1]==$e?function(c){return new ul(c)}:H0;function Et(c){return function(m){var E=hs(m);return E==it?ju(m):E==gt?Uh(m):Zl(m,c(m))}}function Ce(c,m,E,N,G,J,he,ve){var xe=m&k;if(!xe&&typeof c!="function")throw new Ti(l);var nt=N?N.length:0;if(nt||(m&=~(U|H),N=G=t),he=he===t?he:ni(An(he),0),ve=ve===t?ve:An(ve),nt-=G?G.length:0,m&H){var rt=N,dt=G;N=G=t}var Lt=xe?t:Fl(c),qt=[c,m,E,N,G,rt,dt,J,he,ve];if(Lt&&Cp(qt,Lt),c=qt[0],m=qt[1],E=qt[2],N=qt[3],G=qt[4],ve=qt[9]=qt[9]===t?xe?0:c.length:ni(qt[9]-nt,0),!ve&&m&(P|D)&&(m&=~(P|D)),!m||m==A)var pn=Gf(c,m,E);else m==P||m==D?pn=$(c,m,ve):(m==U||m==(A|U))&&!G.length?pn=Zt(c,m,E,N):pn=W.apply(t,qt);var Nn=Lt?Ms:Pd;return rh(Nn(pn,qt),c,m)}function Ne(c,m,E,N){return c===t||Ca(c,zi[E])&&!qn.call(N,E)?m:c}function ot(c,m,E,N,G,J){return si(c)&&si(m)&&(J.set(m,c),_o(c,m,t,ot,J),J.delete(m)),c}function jt(c){return Vr(c)?t:c}function on(c,m,E,N,G,J){var he=E&C,ve=c.length,xe=m.length;if(ve!=xe&&!(he&&xe>ve))return!1;var nt=J.get(c),rt=J.get(m);if(nt&&rt)return nt==m&&rt==c;var dt=-1,Lt=!0,qt=E&M?new Ho:t;for(J.set(c,m),J.set(m,c);++dt<ve;){var pn=c[dt],Nn=m[dt];if(N)var dn=he?N(Nn,pn,dt,m,c,J):N(pn,Nn,dt,c,m,J);if(dn!==t){if(dn)continue;Lt=!1;break}if(qt){if(!Fc(m,function(Yn,er){if(!xr(qt,er)&&(pn===Yn||G(pn,Yn,E,N,J)))return qt.push(er)})){Lt=!1;break}}else if(!(pn===Nn||G(pn,Nn,E,N,J))){Lt=!1;break}}return J.delete(c),J.delete(m),Lt}function xn(c,m,E,N,G,J,he){switch(E){case Ke:if(c.byteLength!=m.byteLength||c.byteOffset!=m.byteOffset)return!1;c=c.buffer,m=m.buffer;case wt:return!(c.byteLength!=m.byteLength||!J(new Gc(c),new Gc(m)));case et:case ft:case st:return Ca(+c,+m);case Ge:return c.name==m.name&&c.message==m.message;case Ct:case Ee:return c==m+"";case it:var ve=ju;case gt:var xe=N&C;if(ve||(ve=tu),c.size!=m.size&&!xe)return!1;var nt=he.get(c);if(nt)return nt==m;N|=M,he.set(c,m);var rt=on(ve(c),ve(m),N,G,J,he);return he.delete(c),rt;case re:if(Zi)return Zi.call(c)==Zi.call(m)}return!1}function On(c,m,E,N,G,J){var he=E&C,ve=fr(c),xe=ve.length,nt=fr(m),rt=nt.length;if(xe!=rt&&!he)return!1;for(var dt=xe;dt--;){var Lt=ve[dt];if(!(he?Lt in m:qn.call(m,Lt)))return!1}var qt=J.get(c),pn=J.get(m);if(qt&&pn)return qt==m&&pn==c;var Nn=!0;J.set(c,m),J.set(m,c);for(var dn=he;++dt<xe;){Lt=ve[dt];var Yn=c[Lt],er=m[Lt];if(N)var ua=he?N(er,Yn,Lt,m,c,J):N(Yn,er,Lt,c,m,J);if(!(ua===t?Yn===er||G(Yn,er,E,N,J):ua)){Nn=!1;break}dn||(dn=Lt=="constructor")}if(Nn&&!dn){var io=c.constructor,Ds=m.constructor;io!=Ds&&"constructor"in c&&"constructor"in m&&!(typeof io=="function"&&io instanceof io&&typeof Ds=="function"&&Ds instanceof Ds)&&(Nn=!1)}return J.delete(c),J.delete(m),Nn}function zn(c){return Bd(rm(c,t,vf),c+"")}function fr(c){return Jc(c,wi,mf)}function Rr(c){return Jc(c,rs,Zh)}var Fl=Vc?function(c){return Vc.get(c)}:H0;function pf(c){for(var m=c.name+"",E=Ol[m],N=qn.call(Ol,m)?E.length:0;N--;){var G=E[N],J=G.func;if(J==null||J==c)return G.name}return m}function Ah(c){var m=qn.call(X,"placeholder")?X:c;return m.placeholder}function ln(){var c=X.iteratee||qi;return c=c===qi?eo:c,arguments.length?c(arguments[0],arguments[1]):c}function nh(c,m){var E=c.__data__;return Ye(m)?E[typeof m=="string"?"string":"hash"]:E.map}function tm(c){for(var m=wi(c),E=m.length;E--;){var N=m[E],G=c[N];m[E]=[N,G,$p(G)]}return m}function wa(c,m){var E=Vu(c,m);return lu(E)?E:t}function vl(c){var m=qn.call(c,po),E=c[po];try{c[po]=t;var N=!0}catch{}var G=Gs.call(c);return N&&(m?c[po]=E:delete c[po]),G}var mf=Wc?function(c){return c==null?[]:(c=_n(c),ji(Wc(c),function(m){return gc.call(c,m)}))}:G0,Zh=Wc?function(c){for(var m=[];c;)Zo(m,mf(c)),c=Ga(c);return m}:G0,hs=vi;(Ku&&hs(new Ku(new ArrayBuffer(1)))!=Ke||Ju&&hs(new Ju)!=it||wh&&hs(wh.resolve())!=vt||ul&&hs(new ul)!=gt||na&&hs(new na)!=mt)&&(hs=function(c){var m=vi(c),E=m==kt?c.constructor:t,N=E?qa(E):"";if(N)switch(N){case jc:return Ke;case vc:return it;case kd:return vt;case Wa:return gt;case Xr:return mt}return m});function vn(c,m,E){for(var N=-1,G=E.length;++N<G;){var J=E[N],he=J.size;switch(J.type){case"drop":c+=he;break;case"dropRight":m-=he;break;case"take":m=Ri(m,c+he);break;case"takeRight":c=ni(c,m-he);break}}return{start:c,end:m}}function _0(c){var m=c.match(_t);return m?m[1].split(Ot):[]}function Rg(c,m,E){m=sa(m,c);for(var N=-1,G=m.length,J=!1;++N<G;){var he=wo(m[N]);if(!(J=c!=null&&E(c,he)))break;c=c[he]}return J||++N!=G?J:(G=c==null?0:c.length,!!G&&Ih(G)&&Ja(he,G)&&(Ln(c)||Yd(c)))}function qm(c){var m=c.length,E=new c.constructor(m);return m&&typeof c[0]=="string"&&qn.call(c,"index")&&(E.index=c.index,E.input=c.input),E}function xc(c){return typeof c.constructor=="function"&&!$c(c)?xs(Ga(c)):{}}function no(c,m,E){var N=c.constructor;switch(m){case wt:return wc(c);case et:case ft:return new N(+c);case Ke:return jo(c,E);case Qe:case Le:case Q:case te:case me:case Re:case Fe:case bt:case ze:return Pl(c,E);case it:return new N;case st:case Ee:return new N(c);case Ct:return To(c);case gt:return new N;case re:return ic(c)}}function Wf(c,m){var E=m.length;if(!E)return c;var N=E-1;return m[N]=(E>1?"& ":"")+m[N],m=m.join(E>2?", ":" "),c.replace(De,`{
/* [wrapped with `+m+`] */
`)}function Dd(c){return Ln(c)||Yd(c)||!!(md&&c&&c[md])}function Ja(c,m){var E=typeof c;return m=m??K,!!m&&(E=="number"||E!="symbol"&&Ss.test(c))&&c>-1&&c%1==0&&c<m}function Wr(c,m,E){if(!si(E))return!1;var N=typeof m;return(N=="number"?Gi(E)&&Ja(m,E.length):N=="string"&&m in E)?Ca(E[m],c):!1}function Ea(c,m){if(Ln(c))return!1;var E=typeof c;return E=="number"||E=="symbol"||E=="boolean"||c==null||la(c)?!0:Te.test(c)||!ne.test(c)||m!=null&&c in _n(m)}function Ye(c){var m=typeof c;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?c!=="__proto__":c===null}function Li(c){var m=pf(c),E=X[m];if(typeof E!="function"||!(m in mn.prototype))return!1;if(c===E)return!0;var N=Fl(E);return!!N&&c===N[0]}function ro(c){return!!Qs&&Qs in c}var Cv=_s?Mc:Em;function $c(c){var m=c&&c.constructor,E=typeof m=="function"&&m.prototype||zi;return c===E}function $p(c){return c===c&&!si(c)}function nm(c,m){return function(E){return E==null?!1:E[c]===m&&(m!==t||c in _n(E))}}function Mv(c){var m=pt(c,function(N){return E.size===f&&E.clear(),N}),E=m.cache;return m}function Cp(c,m){var E=c[1],N=m[1],G=E|N,J=G<(A|k|V),he=N==V&&E==P||N==V&&E==z&&c[7].length<=m[8]||N==(V|z)&&m[7].length<=m[8]&&E==P;if(!(J||he))return c;N&A&&(c[2]=m[2],G|=E&A?0:O);var ve=m[3];if(ve){var xe=c[3];c[3]=xe?Ka(xe,ve,m[4]):ve,c[4]=xe?Hs(c[3],g):m[4]}return ve=m[5],ve&&(xe=c[5],c[5]=xe?cu(xe,ve,m[6]):ve,c[6]=xe?Hs(c[5],g):m[6]),ve=m[7],ve&&(c[7]=ve),N&V&&(c[8]=c[8]==null?m[8]:Ri(c[8],m[8])),c[9]==null&&(c[9]=m[9]),c[0]=m[0],c[1]=G,c}function xa(c){var m=[];if(c!=null)for(var E in _n(c))m.push(E);return m}function kg(c){return Gs.call(c)}function rm(c,m,E){return m=ni(m===t?c.length-1:m,0),function(){for(var N=arguments,G=-1,J=ni(N.length-m,0),he=Pe(J);++G<J;)he[G]=N[m+G];G=-1;for(var ve=Pe(m+1);++G<m;)ve[G]=N[G];return ve[m]=E(he),Vn(c,this,ve)}}function Mp(c,m){return m.length<2?c:Cs(c,Ut(m,0,-1))}function _l(c,m){for(var E=c.length,N=Ri(m.length,E),G=ii(c);N--;){var J=m[N];c[N]=Ja(J,E)?G[J]:t}return c}function hu(c,m){if(!(m==="constructor"&&typeof c[m]=="function")&&m!="__proto__")return c[m]}var Pd=Og(Ms),gf=gd||function(c,m){return $r.setTimeout(c,m)},Bd=Og(uu);function rh(c,m,E){var N=m+"";return Bd(c,Wf(N,im(_0(N),E)))}function Og(c){var m=0,E=0;return function(){var N=Ep(),G=ae-(N-E);if(E=N,G>0){if(++m>=q)return arguments[0]}else m=0;return c.apply(t,arguments)}}function mr(c,m){var E=-1,N=c.length,G=N-1;for(m=m===t?N:m;++E<m;){var J=Os(E,G),he=c[J];c[J]=c[E],c[E]=he}return c.length=m,c}var y0=Mv(function(c){var m=[];return c.charCodeAt(0)===46&&m.push(""),c.replace(je,function(E,N,G,J){m.push(G?J.replace(Wn,"$1"):N||E)}),m});function wo(c){if(typeof c=="string"||la(c))return c;var m=c+"";return m=="0"&&1/c==-$e?"-0":m}function qa(c){if(c!=null){try{return Cu.call(c)}catch{}try{return c+""}catch{}}return""}function im(c,m){return Jr(ke,function(E){var N="_."+E[0];m&E[1]&&!Ba(c,N)&&c.push(N)}),c.sort()}function Fd(c){if(c instanceof mn)return c.clone();var m=new Ir(c.__wrapped__,c.__chain__);return m.__actions__=ii(c.__actions__),m.__index__=c.__index__,m.__values__=c.__values__,m}function sm(c,m,E){(E?Wr(c,m,E):m===t)?m=1:m=ni(An(m),0);var N=c==null?0:c.length;if(!N||m<1)return[];for(var G=0,J=0,he=Pe(Xu(N/m));G<N;)he[J++]=Ut(c,G,G+=m);return he}function ku(c){for(var m=-1,E=c==null?0:c.length,N=0,G=[];++m<E;){var J=c[m];J&&(G[N++]=J)}return G}function b0(){var c=arguments.length;if(!c)return[];for(var m=Pe(c-1),E=arguments[0],N=c;N--;)m[N-1]=arguments[N];return Zo(Ln(E)?ii(E):[E],qr(m,1))}var Yo=fn(function(c,m){return Qr(c)?Wo(c,qr(m,1,Qr,!0)):[]}),ns=fn(function(c,m){var E=Ls(m);return Qr(E)&&(E=t),Qr(c)?Wo(c,qr(m,1,Qr,!0),ln(E,2)):[]}),du=fn(function(c,m){var E=Ls(m);return Qr(E)&&(E=t),Qr(c)?Wo(c,qr(m,1,Qr,!0),t,E):[]});function yl(c,m,E){var N=c==null?0:c.length;return N?(m=E||m===t?1:An(m),Ut(c,m<0?0:m,N)):[]}function Ou(c,m,E){var N=c==null?0:c.length;return N?(m=E||m===t?1:An(m),m=N-m,Ut(c,0,m<0?0:m)):[]}function fu(c,m){return c&&c.length?gl(c,ln(m,3),!0,!0):[]}function Ap(c,m){return c&&c.length?gl(c,ln(m,3),!0):[]}function zl(c,m,E,N){var G=c==null?0:c.length;return G?(E&&typeof E!="number"&&Wr(c,m,E)&&(E=0,N=G),vd(c,m,E,N)):[]}function zd(c,m,E){var N=c==null?0:c.length;if(!N)return-1;var G=E==null?0:An(E);return G<0&&(G=ni(N+G,0)),ql(c,ln(m,3),G)}function Ud(c,m,E){var N=c==null?0:c.length;if(!N)return-1;var G=N-1;return E!==t&&(G=An(E),G=E<0?ni(N+G,0):Ri(G,N-1)),ql(c,ln(m,3),G,!0)}function vf(c){var m=c==null?0:c.length;return m?qr(c,1):[]}function Lg(c){var m=c==null?0:c.length;return m?qr(c,$e):[]}function om(c,m){var E=c==null?0:c.length;return E?(m=m===t?1:An(m),qr(c,m)):[]}function ih(c){for(var m=-1,E=c==null?0:c.length,N={};++m<E;){var G=c[m];N[G[0]]=G[1]}return N}function bl(c){return c&&c.length?c[0]:t}function sh(c,m,E){var N=c==null?0:c.length;if(!N)return-1;var G=E==null?0:An(E);return G<0&&(G=ni(N+G,0)),ks(c,m,G)}function Hd(c){var m=c==null?0:c.length;return m?Ut(c,0,-1):[]}var Qm=fn(function(c){var m=pr(c,Oo);return m.length&&m[0]===c[0]?ia(m):[]}),Zm=fn(function(c){var m=Ls(c),E=pr(c,Oo);return m===Ls(E)?m=t:E.pop(),E.length&&E[0]===c[0]?ia(E,ln(m,2)):[]}),Eo=fn(function(c){var m=Ls(c),E=pr(c,Oo);return m=typeof m=="function"?m:t,m&&E.pop(),E.length&&E[0]===c[0]?ia(E,t,m):[]});function am(c,m){return c==null?"":Rd.call(c,m)}function Ls(c){var m=c==null?0:c.length;return m?c[m-1]:t}function Ul(c,m,E){var N=c==null?0:c.length;if(!N)return-1;var G=N;return E!==t&&(G=An(E),G=G<0?ni(N+G,0):Ri(G,N-1)),m===m?Hc(c,m,G):ql(c,bh,G,!0)}function Ip(c,m){return c&&c.length?Vo(c,An(m)):t}var Ng=fn(Gd);function Gd(c,m){return c&&c.length&&m&&m.length?Br(c,m):c}function eg(c,m,E){return c&&c.length&&m&&m.length?Br(c,m,ln(E,2)):c}function Cc(c,m,E){return c&&c.length&&m&&m.length?Br(c,m,t,E):c}var Wd=zn(function(c,m){var E=c==null?0:c.length,N=Xh(c,m);return bs(c,pr(m,function(G){return Ja(G,E)?+G:G}).sort(So)),N});function oa(c,m){var E=[];if(!(c&&c.length))return E;var N=-1,G=[],J=c.length;for(m=ln(m,3);++N<J;){var he=c[N];m(he,N,c)&&(E.push(he),G.push(N))}return bs(c,G),E}function $a(c){return c==null?c:iu.call(c)}function Av(c,m,E){var N=c==null?0:c.length;return N?(E&&typeof E!="number"&&Wr(c,m,E)?(m=0,E=N):(m=m==null?0:An(m),E=E===t?N:An(E)),Ut(c,m,E)):[]}function lm(c,m){return Kr(c,m)}function T0(c,m,E){return nc(c,m,ln(E,2))}function L_(c,m){var E=c==null?0:c.length;if(E){var N=Kr(c,m);if(N<E&&Ca(c[N],m))return N}return-1}function Vf(c,m){return Kr(c,m,!0)}function Rp(c,m,E){return nc(c,m,ln(E,2),!0)}function S0(c,m){var E=c==null?0:c.length;if(E){var N=Kr(c,m,!0)-1;if(Ca(c[N],m))return N}return-1}function kp(c){return c&&c.length?Jh(c):[]}function w0(c,m){return c&&c.length?Jh(c,ln(m,2)):[]}function um(c){var m=c==null?0:c.length;return m?Ut(c,1,m):[]}function E0(c,m,E){return c&&c.length?(m=E||m===t?1:An(m),Ut(c,0,m<0?0:m)):[]}function Iv(c,m,E){var N=c==null?0:c.length;return N?(m=E||m===t?1:An(m),m=N-m,Ut(c,m<0?0:m,N)):[]}function cm(c,m){return c&&c.length?gl(c,ln(m,3),!1,!0):[]}function _f(c,m){return c&&c.length?gl(c,ln(m,3)):[]}var Rv=fn(function(c){return Ki(qr(c,1,Qr,!0))}),ob=fn(function(c){var m=Ls(c);return Qr(m)&&(m=t),Ki(qr(c,1,Qr,!0),ln(m,2))}),x0=fn(function(c){var m=Ls(c);return m=typeof m=="function"?m:t,Ki(qr(c,1,Qr,!0),t,m)});function $0(c){return c&&c.length?Ki(c):[]}function jf(c,m){return c&&c.length?Ki(c,ln(m,2)):[]}function Un(c,m){return m=typeof m=="function"?m:t,c&&c.length?Ki(c,t,m):[]}function oh(c){if(!(c&&c.length))return[];var m=0;return c=ji(c,function(E){if(Qr(E))return m=ni(E.length,m),!0}),Ql(m,function(E){return pr(c,ci(E))})}function Op(c,m){if(!(c&&c.length))return[];var E=oh(c);return m==null?E:pr(E,function(N){return Vn(m,t,N)})}var aa=fn(function(c,m){return Qr(c)?Wo(c,m):[]}),kv=fn(function(c){return Sc(ji(c,Qr))}),C0=fn(function(c){var m=Ls(c);return Qr(m)&&(m=t),Sc(ji(c,Qr),ln(m,2))}),hm=fn(function(c){var m=Ls(c);return m=typeof m=="function"?m:t,Sc(ji(c,Qr),t,m)}),ab=fn(oh);function N_(c,m){return rc(c||[],m||[],Io)}function ah(c,m){return rc(c||[],m||[],_i)}var xo=fn(function(c){var m=c.length,E=m>1?c[m-1]:t;return E=typeof E=="function"?(c.pop(),E):t,Op(c,E)});function Lu(c){var m=X(c);return m.__chain__=!0,m}function Dg(c,m){return m(c),c}function Yf(c,m){return m(c)}var ed=zn(function(c){var m=c.length,E=m?c[0]:0,N=this.__wrapped__,G=function(J){return Xh(J,c)};return m>1||this.__actions__.length||!(N instanceof mn)||!Ja(E)?this.thru(G):(N=N.slice(E,+E+(m?1:0)),N.__actions__.push({func:Yf,args:[G],thisArg:t}),new Ir(N,this.__chain__).thru(function(J){return m&&!J.length&&J.push(t),J}))});function dm(){return Lu(this)}function Xf(){return new Ir(this.value(),this.__chain__)}function Kf(){this.__values__===t&&(this.__values__=H_(this.value()));var c=this.__index__>=this.__values__.length,m=c?t:this.__values__[this.__index__++];return{done:c,value:m}}function Lp(){return this}function bd(c){for(var m,E=this;E instanceof ga;){var N=Fd(E);N.__index__=0,N.__values__=t,m?G.__wrapped__=N:m=N;var G=N;E=E.__wrapped__}return G.__wrapped__=c,m}function yf(){var c=this.__wrapped__;if(c instanceof mn){var m=c;return this.__actions__.length&&(m=new mn(this)),m=m.reverse(),m.__actions__.push({func:Yf,args:[$a],thisArg:t}),new Ir(m,this.__chain__)}return this.thru($a)}function tg(){return eh(this.__wrapped__,this.__actions__)}var D_=Ta(function(c,m,E){qn.call(c,E)?++c[E]:Go(c,E,1)});function Pg(c,m,E){var N=Ln(c)?Eu:Mu;return E&&Wr(c,m,E)&&(m=t),N(c,ln(m,3))}function Vd(c,m){var E=Ln(c)?ji:yc;return E(c,ln(m,3))}var Ni=I(zd),fm=I(Ud);function ng(c,m){return qr(Si(c,m),1)}function Bg(c,m){return qr(Si(c,m),$e)}function P_(c,m,E){return E=E===t?1:An(E),qr(Si(c,m),E)}function rg(c,m){var E=Ln(c)?Jr:Ro;return E(c,ln(m,3))}function Np(c,m){var E=Ln(c)?dd:df;return E(c,ln(m,3))}var ig=Ta(function(c,m,E){qn.call(c,E)?c[E].push(m):Go(c,E,[m])});function Jf(c,m,E,N){c=Gi(c)?c:Tf(c),E=E&&!N?An(E):0;var G=c.length;return E<0&&(E=ni(G+E,0)),ym(c)?E<=G&&c.indexOf(m,E)>-1:!!G&&ks(c,m,E)>-1}var qf=fn(function(c,m,E){var N=-1,G=typeof m=="function",J=Gi(c)?Pe(c.length):[];return Ro(c,function(he){J[++N]=G?Vn(m,he,E):Pn(he,m,E)}),J}),pm=Ta(function(c,m,E){Go(c,E,m)});function Si(c,m){var E=Ln(c)?pr:Au;return E(c,ln(m,3))}function Qf(c,m,E,N){return c==null?[]:(Ln(m)||(m=m==null?[]:[m]),E=N?t:E,Ln(E)||(E=E==null?[]:[E]),ec(c,m,E))}var mm=Ta(function(c,m,E){c[E?0:1].push(m)},function(){return[[],[]]});function gm(c,m,E){var N=Ln(c)?fd:co,G=arguments.length<3;return N(c,ln(m,4),E,G,Ro)}function Dp(c,m,E){var N=Ln(c)?lf:co,G=arguments.length<3;return N(c,ln(m,4),E,G,df)}function Fg(c,m){var E=Ln(c)?ji:yc;return E(c,$t(ln(m,3)))}function _(c){var m=Ln(c)?dl:qc;return m(c)}function T(c,m,E){(E?Wr(c,m,E):m===t)?m=1:m=An(m);var N=Ln(c)?_c:En;return N(c,m)}function R(c){var m=Ln(c)?xp:Dl;return m(c)}function F(c){if(c==null)return 0;if(Gi(c))return ym(c)?is(c):c.length;var m=hs(c);return m==it||m==gt?c.size:go(c).length}function Y(c,m,E){var N=Ln(c)?Fc:ml;return E&&Wr(c,m,E)&&(m=t),N(c,ln(m,3))}var ee=fn(function(c,m){if(c==null)return[];var E=m.length;return E>1&&Wr(c,m[0],m[1])?m=[]:E>2&&Wr(m[0],m[1],m[2])&&(m=[m[0]]),ec(c,qr(m,1),[])}),be=Ui||function(){return $r.Date.now()};function Je(c,m){if(typeof m!="function")throw new Ti(l);return c=An(c),function(){if(--c<1)return m.apply(this,arguments)}}function ut(c,m,E){return m=E?t:m,m=c&&m==null?c.length:m,Ce(c,V,t,t,t,t,m)}function Dt(c,m){var E;if(typeof m!="function")throw new Ti(l);return c=An(c),function(){return--c>0&&(E=m.apply(this,arguments)),c<=1&&(m=t),E}}var en=fn(function(c,m,E){var N=A;if(E.length){var G=Hs(E,Ah(en));N|=U}return Ce(c,N,m,E,G)}),hn=fn(function(c,m,E){var N=A|k;if(E.length){var G=Hs(E,Ah(hn));N|=U}return Ce(m,N,c,E,G)});function an(c,m,E){m=E?t:m;var N=Ce(c,P,t,t,t,t,t,m);return N.placeholder=an.placeholder,N}function Dn(c,m,E){m=E?t:m;var N=Ce(c,D,t,t,t,t,t,m);return N.placeholder=Dn.placeholder,N}function Zn(c,m,E){var N,G,J,he,ve,xe,nt=0,rt=!1,dt=!1,Lt=!0;if(typeof c!="function")throw new Ti(l);m=Ji(m)||0,si(E)&&(rt=!!E.leading,dt="maxWait"in E,J=dt?ni(Ji(E.maxWait)||0,m):J,Lt="trailing"in E?!!E.trailing:Lt);function qt(yi){var Gl=N,Ic=G;return N=G=t,nt=yi,he=c.apply(Ic,Gl),he}function pn(yi){return nt=yi,ve=gf(Yn,m),rt?qt(yi):he}function Nn(yi){var Gl=yi-xe,Ic=yi-nt,q_=m-Gl;return dt?Ri(q_,J-Ic):q_}function dn(yi){var Gl=yi-xe,Ic=yi-nt;return xe===t||Gl>=m||Gl<0||dt&&Ic>=J}function Yn(){var yi=be();if(dn(yi))return er(yi);ve=gf(Yn,Nn(yi))}function er(yi){return ve=t,Lt&&N?qt(yi):(N=G=t,he)}function ua(){ve!==t&&Ru(ve),nt=0,N=xe=G=ve=t}function io(){return ve===t?he:er(be())}function Ds(){var yi=be(),Gl=dn(yi);if(N=arguments,G=this,xe=yi,Gl){if(ve===t)return pn(xe);if(dt)return Ru(ve),ve=gf(Yn,m),qt(xe)}return ve===t&&(ve=gf(Yn,m)),he}return Ds.cancel=ua,Ds.flush=io,Ds}var sr=fn(function(c,m){return Kh(c,1,m)}),Lo=fn(function(c,m,E){return Kh(c,Ji(m)||0,E)});function At(c){return Ce(c,Z)}function pt(c,m){if(typeof c!="function"||m!=null&&typeof m!="function")throw new Ti(l);var E=function(){var N=arguments,G=m?m.apply(this,N):N[0],J=E.cache;if(J.has(G))return J.get(G);var he=c.apply(this,N);return E.cache=J.set(G,he)||J,he};return E.cache=new(pt.Cache||Ws),E}pt.Cache=Ws;function $t(c){if(typeof c!="function")throw new Ti(l);return function(){var m=arguments;switch(m.length){case 0:return!c.call(this);case 1:return!c.call(this,m[0]);case 2:return!c.call(this,m[0],m[1]);case 3:return!c.call(this,m[0],m[1],m[2])}return!c.apply(this,m)}}function wn(c){return Dt(2,c)}var hr=Mh(function(c,m){m=m.length==1&&Ln(m[0])?pr(m[0],Yr(ln())):pr(qr(m,1),Yr(ln()));var E=m.length;return fn(function(N){for(var G=-1,J=Ri(N.length,E);++G<J;)N[G]=m[G].call(this,N[G]);return Vn(c,this,N)})}),rr=fn(function(c,m){var E=Hs(m,Ah(rr));return Ce(c,U,t,m,E)}),gr=fn(function(c,m){var E=Hs(m,Ah(gr));return Ce(c,H,t,m,E)}),Fr=zn(function(c,m){return Ce(c,z,t,t,t,m)});function Hl(c,m){if(typeof c!="function")throw new Ti(l);return m=m===t?m:An(m),fn(c,m)}function ds(c,m){if(typeof c!="function")throw new Ti(l);return m=m==null?0:ni(An(m),0),fn(function(E){var N=E[m],G=bo(E,0,m);return N&&Zo(G,N),Vn(c,this,G)})}function Zf(c,m,E){var N=!0,G=!0;if(typeof c!="function")throw new Ti(l);return si(E)&&(N="leading"in E?!!E.leading:N,G="trailing"in E?!!E.trailing:G),Zn(c,m,{leading:N,maxWait:m,trailing:G})}function M0(c){return ut(c,1)}function Nu(c,m){return rr(to(m),c)}function jd(){if(!arguments.length)return[];var c=arguments[0];return Ln(c)?c:[c]}function _T(c){return Oi(c,S)}function wE(c,m){return m=typeof m=="function"?m:t,Oi(c,S,m)}function EE(c){return Oi(c,y|S)}function vm(c,m){return m=typeof m=="function"?m:t,Oi(c,y|S,m)}function lb(c,m){return m==null||Kc(c,m,wi(m))}function Ca(c,m){return c===m||c!==c&&m!==m}var yT=Tn(Ya),zg=Tn(function(c,m){return c>=m}),Yd=nr(function(){return arguments}())?nr:function(c){return di(c)&&qn.call(c,"callee")&&!gc.call(c,"callee")},Ln=Pe.isArray,B_=Su?Yr(Su):zr;function Gi(c){return c!=null&&Ih(c.length)&&!Mc(c)}function Qr(c){return di(c)&&Gi(c)}function ub(c){return c===!0||c===!1||di(c)&&vi(c)==et}var lh=Id||Em,bT=Ao?Yr(Ao):ri;function bf(c){return di(c)&&c.nodeType===1&&!Vr(c)}function Ov(c){if(c==null)return!0;if(Gi(c)&&(Ln(c)||typeof c=="string"||typeof c.splice=="function"||lh(c)||Jd(c)||Yd(c)))return!c.length;var m=hs(c);if(m==it||m==gt)return!c.size;if($c(c))return!go(c).length;for(var E in c)if(qn.call(c,E))return!1;return!0}function Wi(c,m){return Zr(c,m)}function No(c,m,E){E=typeof E=="function"?E:t;var N=E?E(c,m):t;return N===t?Zr(c,m,t,E):!!N}function A0(c){if(!di(c))return!1;var m=vi(c);return m==Ge||m==at||typeof c.message=="string"&&typeof c.name=="string"&&!Vr(c)}function F_(c){return typeof c=="number"&&Il(c)}function Mc(c){if(!si(c))return!1;var m=vi(c);return m==Ie||m==He||m==Ze||m==Mt}function I0(c){return typeof c=="number"&&c==An(c)}function Ih(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=K}function si(c){var m=typeof c;return c!=null&&(m=="object"||m=="function")}function di(c){return c!=null&&typeof c=="object"}var td=wu?Yr(wu):us;function As(c,m){return c===m||ts(c,m,tm(m))}function _m(c,m,E){return E=typeof E=="function"?E:t,ts(c,m,tm(m),E)}function z_(c){return Xd(c)&&c!=+c}function U_(c){if(Cv(c))throw new sn(o);return lu(c)}function R0(c){return c===null}function xE(c){return c==null}function Xd(c){return typeof c=="number"||di(c)&&vi(c)==st}function Vr(c){if(!di(c)||vi(c)!=kt)return!1;var m=Ga(c);if(m===null)return!0;var E=qn.call(m,"constructor")&&m.constructor;return typeof E=="function"&&E instanceof E&&Cu.call(E)==Ha}var Kd=ol?Yr(ol):Qu;function Qa(c){return I0(c)&&c>=-K&&c<=K}var Lv=Fi?Yr(Fi):Tc;function ym(c){return typeof c=="string"||!Ln(c)&&di(c)&&vi(c)==Ee}function la(c){return typeof c=="symbol"||di(c)&&vi(c)==re}var Jd=Mi?Yr(Mi):Zu;function TT(c){return c===t}function ST(c){return di(c)&&hs(c)==mt}function nd(c){return di(c)&&vi(c)==yt}var cb=Tn(ba),ep=Tn(function(c,m){return c<=m});function H_(c){if(!c)return[];if(Gi(c))return ym(c)?Hr(c):ii(c);if(ta&&c[ta])return zh(c[ta]());var m=hs(c),E=m==it?ju:m==gt?tu:Tf;return E(c)}function Ac(c){if(!c)return c===0?c:0;if(c=Ji(c),c===$e||c===-$e){var m=c<0?-1:1;return m*ie}return c===c?c:0}function An(c){var m=Ac(c),E=m%1;return m===m?E?m-E:m:0}function k0(c){return c?Va(An(c),0,fe):0}function Ji(c){if(typeof c=="number")return c;if(la(c))return se;if(si(c)){var m=typeof c.valueOf=="function"?c.valueOf():c;c=si(m)?m+"":m}if(typeof c!="string")return c===0?c:+c;c=Fh(c);var E=Ei.test(c);return E||Ar.test(c)?Pa(c.slice(2),E?2:8):Or.test(c)?se:+c}function hb(c){return cs(c,rs(c))}function ht(c){return c?Va(An(c),-K,K):c===0?c:0}function or(c){return c==null?"":ai(c)}var Nv=Sa(function(c,m){if($c(m)||Gi(m)){cs(m,wi(m),c);return}for(var E in m)qn.call(m,E)&&Io(c,E,m[E])}),Dv=Sa(function(c,m){cs(m,rs(m),c)}),rd=Sa(function(c,m,E,N){cs(m,rs(m),c,N)}),sg=Sa(function(c,m,E,N){cs(m,wi(m),c,N)}),G_=zn(Xh);function O0(c,m){var E=xs(c);return m==null?E:as(E,m)}var db=fn(function(c,m){c=_n(c);var E=-1,N=m.length,G=N>2?m[2]:t;for(G&&Wr(m[0],m[1],G)&&(N=1);++E<N;)for(var J=m[E],he=rs(J),ve=-1,xe=he.length;++ve<xe;){var nt=he[ve],rt=c[nt];(rt===t||Ca(rt,zi[nt])&&!qn.call(c,nt))&&(c[nt]=J[nt])}return c}),wT=fn(function(c){return c.push(t,ot),Vn(id,t,c)});function qd(c,m){return Md(c,ln(m,3),ls)}function fb(c,m){return Md(c,ln(m,3),ja)}function Pv(c,m){return c==null?c:au(c,ln(m,3),rs)}function pb(c,m){return c==null?c:qu(c,ln(m,3),rs)}function ET(c,m){return c&&ls(c,ln(m,3))}function xT(c,m){return c&&ja(c,ln(m,3))}function $T(c){return c==null?[]:$s(c,wi(c))}function CT(c){return c==null?[]:$s(c,rs(c))}function bm(c,m,E){var N=c==null?t:Cs(c,m);return N===t?E:N}function mb(c,m){return c!=null&&Rg(c,m,bc)}function Tm(c,m){return c!=null&&Rg(c,m,ff)}var gb=pe(function(c,m,E){m!=null&&typeof m.toString!="function"&&(m=Gs.call(m)),c[m]=E},Vv(Do)),Bv=pe(function(c,m,E){m!=null&&typeof m.toString!="function"&&(m=Gs.call(m)),qn.call(c,m)?c[m].push(E):c[m]=[E]},ln),Fv=fn(Pn);function wi(c){return Gi(c)?yn(c):go(c)}function rs(c){return Gi(c)?yn(c,!0):_d(c)}function MT(c,m){var E={};return m=ln(m,3),ls(c,function(N,G,J){Go(E,m(N,G,J),N)}),E}function Pp(c,m){var E={};return m=ln(m,3),ls(c,function(N,G,J){Go(E,G,m(N,G,J))}),E}var Sm=Sa(function(c,m,E){_o(c,m,E)}),id=Sa(function(c,m,E,N){_o(c,m,E,N)}),AT=zn(function(c,m){var E={};if(c==null)return E;var N=!1;m=pr(m,function(J){return J=sa(J,c),N||(N=J.length>1),J}),cs(c,Rr(c),E),N&&(E=Oi(E,y|b|S,jt));for(var G=m.length;G--;)Zc(E,m[G]);return E});function L0(c,m){return zv(c,$t(ln(m)))}var tn=zn(function(c,m){return c==null?{}:tc(c,m)});function zv(c,m){if(c==null)return{};var E=pr(Rr(c),function(N){return[N]});return m=ln(m),$h(c,E,function(N,G){return m(N,G[0])})}function $E(c,m,E){m=sa(m,c);var N=-1,G=m.length;for(G||(G=1,c=t);++N<G;){var J=c==null?t:c[wo(m[N])];J===t&&(N=G,J=E),c=Mc(J)?J.call(c):J}return c}function CE(c,m,E){return c==null?c:_i(c,m,E)}function ME(c,m,E,N){return N=typeof N=="function"?N:t,c==null?c:_i(c,m,E,N)}var Uv=Et(wi),N0=Et(rs);function fs(c,m,E){var N=Ln(c),G=N||lh(c)||Jd(c);if(m=ln(m,4),E==null){var J=c&&c.constructor;G?E=N?new J:[]:si(c)?E=Mc(J)?xs(Ga(c)):{}:E={}}return(G?Jr:ls)(c,function(he,ve,xe){return m(E,he,ve,xe)}),E}function Ug(c,m){return c==null?!0:Zc(c,m)}function W_(c,m,E){return c==null?c:yo(c,m,to(E))}function AE(c,m,E,N){return N=typeof N=="function"?N:t,c==null?c:yo(c,m,to(E),N)}function Tf(c){return c==null?[]:Ii(c,wi(c))}function Sf(c){return c==null?[]:Ii(c,rs(c))}function Hv(c,m,E){return E===t&&(E=m,m=t),E!==t&&(E=Ji(E),E=E===E?E:0),m!==t&&(m=Ji(m),m=m===m?m:0),Va(Ji(c),m,E)}function Ns(c,m,E){return m=Ac(m),E===t?(E=m,m=0):E=Ac(E),c=Ji(c),xh(c,m,E)}function IT(c,m,E){if(E&&typeof E!="boolean"&&Wr(c,m,E)&&(m=E=t),E===t&&(typeof m=="boolean"?(E=m,m=t):typeof c=="boolean"&&(E=c,c=t)),c===t&&m===t?(c=0,m=1):(c=Ac(c),m===t?(m=c,c=0):m=Ac(m)),c>m){var N=c;c=m,m=N}if(E||c%1||m%1){var G=Rl();return Ri(c+G*(m-c+_h("1e-"+((G+"").length-1))),m)}return Os(c,m)}var vb=d(function(c,m,E){return m=m.toLowerCase(),c+(E?wm(m):m)});function wm(c){return F0(or(c).toLowerCase())}function V_(c){return c=or(c),c&&c.replace(La,cf).replace(vs,"")}function _b(c,m,E){c=or(c),m=ai(m);var N=c.length;E=E===t?N:Va(An(E),0,N);var G=E;return E-=m.length,E>=0&&c.slice(E,G)==m}function yb(c){return c=or(c),c&&cr.test(c)?c.replace(bn,hf):c}function bb(c){return c=or(c),c&&Ht.test(c)?c.replace(ct,"\\$&"):c}var Gv=d(function(c,m,E){return c+(E?"-":"")+m.toLowerCase()}),IE=d(function(c,m,E){return c+(E?" ":"")+m.toLowerCase()}),RT=x("toLowerCase");function RE(c,m,E){c=or(c),m=An(m);var N=m?is(c):0;if(!m||N>=m)return c;var G=(m-N)/2;return xt(ru(G),E)+c+xt(Xu(G),E)}function kE(c,m,E){c=or(c),m=An(m);var N=m?is(c):0;return m&&N<m?c+xt(m-N,E):c}function tp(c,m,E){c=or(c),m=An(m);var N=m?is(c):0;return m&&N<m?xt(m-N,E)+c:c}function Tb(c,m,E){return E||m==null?m=0:m&&(m=+m),zf(or(c).replace(nn,""),m||0)}function Sb(c,m,E){return(E?Wr(c,m,E):m===t)?m=1:m=An(m),js(or(c),m)}function D0(){var c=arguments,m=or(c[0]);return c.length<3?m:m.replace(c[1],c[2])}var kT=d(function(c,m,E){return c+(E?"_":"")+m.toLowerCase()});function wb(c,m,E){return E&&typeof E!="number"&&Wr(c,m,E)&&(m=E=t),E=E===t?fe:E>>>0,E?(c=or(c),c&&(typeof m=="string"||m!=null&&!Kd(m))&&(m=ai(m),!m&&al(c))?bo(Hr(c),0,E):c.split(m,E)):[]}var Wv=d(function(c,m,E){return c+(E?" ":"")+F0(m)});function OT(c,m,E){return c=or(c),E=E==null?0:Va(An(E),0,c.length),m=ai(m),c.slice(E,E+m.length)==m}function Eb(c,m,E){var N=X.templateSettings;E&&Wr(c,m,E)&&(m=t),c=or(c),m=rd({},m,N,Ne);var G=rd({},m.imports,N.imports,Ne),J=wi(G),he=Ii(G,J),ve,xe,nt=0,rt=m.interpolate||Mo,dt="__p += '",Lt=Gr((m.escape||Mo).source+"|"+rt.source+"|"+(rt===_r?ir:Mo).source+"|"+(m.evaluate||Mo).source+"|$","g"),qt="//# sourceURL="+(qn.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++bu+"]")+`
`;c.replace(Lt,function(dn,Yn,er,ua,io,Ds){return er||(er=ua),dt+=c.slice(nt,Ds).replace(Xl,pd),Yn&&(ve=!0,dt+=`' +
__e(`+Yn+`) +
'`),io&&(xe=!0,dt+=`';
`+io+`;
__p += '`),er&&(dt+=`' +
((__t = (`+er+`)) == null ? '' : __t) +
'`),nt=Ds+dn.length,dn}),dt+=`';
`;var pn=qn.call(m,"variable")&&m.variable;if(!pn)dt=`with (obj) {
`+dt+`
}
`;else if(Xt.test(pn))throw new sn(u);dt=(xe?dt.replace(Pt,""):dt).replace(lt,"$1").replace(Gt,"$1;"),dt="function("+(pn||"obj")+`) {
`+(pn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ve?", __e = _.escape":"")+(xe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+dt+`return __p
}`;var Nn=z0(function(){return Rn(J,qt+"return "+dt).apply(t,he)});if(Nn.source=dt,A0(Nn))throw Nn;return Nn}function sd(c){return or(c).toLowerCase()}function Bp(c){return or(c).toUpperCase()}function LT(c,m,E){if(c=or(c),c&&(E||m===t))return Fh(c);if(!c||!(m=ai(m)))return c;var N=Hr(c),G=Hr(m),J=Yi(N,G),he=fa(N,G)+1;return bo(N,J,he).join("")}function j_(c,m,E){if(c=or(c),c&&(E||m===t))return c.slice(0,Ml(c)+1);if(!c||!(m=ai(m)))return c;var N=Hr(c),G=fa(N,Hr(m))+1;return bo(N,0,G).join("")}function NT(c,m,E){if(c=or(c),c&&(E||m===t))return c.replace(nn,"");if(!c||!(m=ai(m)))return c;var N=Hr(c),G=Yi(N,Hr(m));return bo(N,G).join("")}function P0(c,m){var E=oe,N=ue;if(si(m)){var G="separator"in m?m.separator:G;E="length"in m?An(m.length):E,N="omission"in m?ai(m.omission):N}c=or(c);var J=c.length;if(al(c)){var he=Hr(c);J=he.length}if(E>=J)return c;var ve=E-is(N);if(ve<1)return N;var xe=he?bo(he,0,ve).join(""):c.slice(0,ve);if(G===t)return xe+N;if(he&&(ve+=xe.length-ve),Kd(G)){if(c.slice(ve).search(G)){var nt,rt=xe;for(G.global||(G=Gr(G.source,or(br.exec(G))+"g")),G.lastIndex=0;nt=G.exec(rt);)var dt=nt.index;xe=xe.slice(0,dt===t?ve:dt)}}else if(c.indexOf(ai(G),ve)!=ve){var Lt=xe.lastIndexOf(G);Lt>-1&&(xe=xe.slice(0,Lt))}return xe+N}function Y_(c){return c=or(c),c&&ar.test(c)?c.replace(Wt,Ua):c}var B0=d(function(c,m,E){return c+(E?" ":"")+m.toUpperCase()}),F0=x("toUpperCase");function xb(c,m,E){return c=or(c),m=E?t:m,m===t?zc(c)?Th(c):wp(c):c.match(m)||[]}var z0=fn(function(c,m){try{return Vn(c,t,m)}catch(E){return A0(E)?E:new sn(E)}}),$b=zn(function(c,m){return Jr(m,function(E){E=wo(E),Go(c,E,en(c[E],c))}),c});function Cb(c){var m=c==null?0:c.length,E=ln();return c=m?pr(c,function(N){if(typeof N[1]!="function")throw new Ti(l);return[E(N[0]),N[1]]}):[],fn(function(N){for(var G=-1;++G<m;){var J=c[G];if(Vn(J[0],this,N))return Vn(J[1],this,N)}})}function OE(c){return Nd(Oi(c,y))}function Vv(c){return function(){return c}}function LE(c,m){return c==null||c!==c?m:c}var DT=B(),NE=B(!0);function Do(c){return c}function qi(c){return eo(typeof c=="function"?c:Oi(c,y))}function Fp(c){return Iu(Oi(c,y))}function jv(c,m){return vo(c,Oi(m,y))}var X_=fn(function(c,m){return function(E){return Pn(E,c,m)}}),zp=fn(function(c,m){return function(E){return Pn(c,E,m)}});function Yv(c,m,E){var N=wi(m),G=$s(m,N);E==null&&!(si(m)&&(G.length||!N.length))&&(E=m,m=c,c=this,G=$s(m,wi(m)));var J=!(si(E)&&"chain"in E)||!!E.chain,he=Mc(c);return Jr(G,function(ve){var xe=m[ve];c[ve]=xe,he&&(c.prototype[ve]=function(){var nt=this.__chain__;if(J||nt){var rt=c(this.__wrapped__),dt=rt.__actions__=ii(this.__actions__);return dt.push({func:xe,args:arguments,thisArg:c}),rt.__chain__=nt,rt}return xe.apply(c,Zo([this.value()],arguments))})}),c}function U0(){return $r._===this&&($r._=Hh),this}function H0(){}function PT(c){return c=An(c),fn(function(m){return Vo(m,c)})}var Mb=tt(pr),DE=tt(Eu),Ab=tt(Fc);function Xv(c){return Ea(c)?ci(wo(c)):Ch(c)}function BT(c){return function(m){return c==null?t:Cs(c,m)}}var Ib=cn(),K_=cn(!0);function G0(){return[]}function Em(){return!1}function Rb(){return{}}function kb(){return""}function Ob(){return!0}function Lb(c,m){if(c=An(c),c<1||c>K)return[];var E=fe,N=Ri(c,fe);m=ln(m),c-=fe;for(var G=Ql(N,m);++E<c;)m(E);return G}function og(c){return Ln(c)?pr(c,wo):la(c)?[c]:ii(y0(or(c)))}function Nb(c){var m=++pa;return or(c)+m}var Db=Oe(function(c,m){return c+m},0),Pb=gn("ceil"),Bb=Oe(function(c,m){return c/m},1),Fb=gn("floor");function Qn(c){return c&&c.length?Ll(c,Do,Ya):t}function FT(c,m){return c&&c.length?Ll(c,ln(m,2),Ya):t}function zT(c){return Fa(c,Do)}function Hg(c,m){return Fa(c,ln(m,2))}function Kv(c){return c&&c.length?Ll(c,Do,ba):t}function W0(c,m){return c&&c.length?Ll(c,ln(m,2),ba):t}var UT=Oe(function(c,m){return c*m},1),J_=gn("round"),HT=Oe(function(c,m){return c-m},0);function GT(c){return c&&c.length?Uo(c,Do):0}function WT(c,m){return c&&c.length?Uo(c,ln(m,2)):0}return X.after=Je,X.ary=ut,X.assign=Nv,X.assignIn=Dv,X.assignInWith=rd,X.assignWith=sg,X.at=G_,X.before=Dt,X.bind=en,X.bindAll=$b,X.bindKey=hn,X.castArray=jd,X.chain=Lu,X.chunk=sm,X.compact=ku,X.concat=b0,X.cond=Cb,X.conforms=OE,X.constant=Vv,X.countBy=D_,X.create=O0,X.curry=an,X.curryRight=Dn,X.debounce=Zn,X.defaults=db,X.defaultsDeep=wT,X.defer=sr,X.delay=Lo,X.difference=Yo,X.differenceBy=ns,X.differenceWith=du,X.drop=yl,X.dropRight=Ou,X.dropRightWhile=fu,X.dropWhile=Ap,X.fill=zl,X.filter=Vd,X.flatMap=ng,X.flatMapDeep=Bg,X.flatMapDepth=P_,X.flatten=vf,X.flattenDeep=Lg,X.flattenDepth=om,X.flip=At,X.flow=DT,X.flowRight=NE,X.fromPairs=ih,X.functions=$T,X.functionsIn=CT,X.groupBy=ig,X.initial=Hd,X.intersection=Qm,X.intersectionBy=Zm,X.intersectionWith=Eo,X.invert=gb,X.invertBy=Bv,X.invokeMap=qf,X.iteratee=qi,X.keyBy=pm,X.keys=wi,X.keysIn=rs,X.map=Si,X.mapKeys=MT,X.mapValues=Pp,X.matches=Fp,X.matchesProperty=jv,X.memoize=pt,X.merge=Sm,X.mergeWith=id,X.method=X_,X.methodOf=zp,X.mixin=Yv,X.negate=$t,X.nthArg=PT,X.omit=AT,X.omitBy=L0,X.once=wn,X.orderBy=Qf,X.over=Mb,X.overArgs=hr,X.overEvery=DE,X.overSome=Ab,X.partial=rr,X.partialRight=gr,X.partition=mm,X.pick=tn,X.pickBy=zv,X.property=Xv,X.propertyOf=BT,X.pull=Ng,X.pullAll=Gd,X.pullAllBy=eg,X.pullAllWith=Cc,X.pullAt=Wd,X.range=Ib,X.rangeRight=K_,X.rearg=Fr,X.reject=Fg,X.remove=oa,X.rest=Hl,X.reverse=$a,X.sampleSize=T,X.set=CE,X.setWith=ME,X.shuffle=R,X.slice=Av,X.sortBy=ee,X.sortedUniq=kp,X.sortedUniqBy=w0,X.split=wb,X.spread=ds,X.tail=um,X.take=E0,X.takeRight=Iv,X.takeRightWhile=cm,X.takeWhile=_f,X.tap=Dg,X.throttle=Zf,X.thru=Yf,X.toArray=H_,X.toPairs=Uv,X.toPairsIn=N0,X.toPath=og,X.toPlainObject=hb,X.transform=fs,X.unary=M0,X.union=Rv,X.unionBy=ob,X.unionWith=x0,X.uniq=$0,X.uniqBy=jf,X.uniqWith=Un,X.unset=Ug,X.unzip=oh,X.unzipWith=Op,X.update=W_,X.updateWith=AE,X.values=Tf,X.valuesIn=Sf,X.without=aa,X.words=xb,X.wrap=Nu,X.xor=kv,X.xorBy=C0,X.xorWith=hm,X.zip=ab,X.zipObject=N_,X.zipObjectDeep=ah,X.zipWith=xo,X.entries=Uv,X.entriesIn=N0,X.extend=Dv,X.extendWith=rd,Yv(X,X),X.add=Db,X.attempt=z0,X.camelCase=vb,X.capitalize=wm,X.ceil=Pb,X.clamp=Hv,X.clone=_T,X.cloneDeep=EE,X.cloneDeepWith=vm,X.cloneWith=wE,X.conformsTo=lb,X.deburr=V_,X.defaultTo=LE,X.divide=Bb,X.endsWith=_b,X.eq=Ca,X.escape=yb,X.escapeRegExp=bb,X.every=Pg,X.find=Ni,X.findIndex=zd,X.findKey=qd,X.findLast=fm,X.findLastIndex=Ud,X.findLastKey=fb,X.floor=Fb,X.forEach=rg,X.forEachRight=Np,X.forIn=Pv,X.forInRight=pb,X.forOwn=ET,X.forOwnRight=xT,X.get=bm,X.gt=yT,X.gte=zg,X.has=mb,X.hasIn=Tm,X.head=bl,X.identity=Do,X.includes=Jf,X.indexOf=sh,X.inRange=Ns,X.invoke=Fv,X.isArguments=Yd,X.isArray=Ln,X.isArrayBuffer=B_,X.isArrayLike=Gi,X.isArrayLikeObject=Qr,X.isBoolean=ub,X.isBuffer=lh,X.isDate=bT,X.isElement=bf,X.isEmpty=Ov,X.isEqual=Wi,X.isEqualWith=No,X.isError=A0,X.isFinite=F_,X.isFunction=Mc,X.isInteger=I0,X.isLength=Ih,X.isMap=td,X.isMatch=As,X.isMatchWith=_m,X.isNaN=z_,X.isNative=U_,X.isNil=xE,X.isNull=R0,X.isNumber=Xd,X.isObject=si,X.isObjectLike=di,X.isPlainObject=Vr,X.isRegExp=Kd,X.isSafeInteger=Qa,X.isSet=Lv,X.isString=ym,X.isSymbol=la,X.isTypedArray=Jd,X.isUndefined=TT,X.isWeakMap=ST,X.isWeakSet=nd,X.join=am,X.kebabCase=Gv,X.last=Ls,X.lastIndexOf=Ul,X.lowerCase=IE,X.lowerFirst=RT,X.lt=cb,X.lte=ep,X.max=Qn,X.maxBy=FT,X.mean=zT,X.meanBy=Hg,X.min=Kv,X.minBy=W0,X.stubArray=G0,X.stubFalse=Em,X.stubObject=Rb,X.stubString=kb,X.stubTrue=Ob,X.multiply=UT,X.nth=Ip,X.noConflict=U0,X.noop=H0,X.now=be,X.pad=RE,X.padEnd=kE,X.padStart=tp,X.parseInt=Tb,X.random=IT,X.reduce=gm,X.reduceRight=Dp,X.repeat=Sb,X.replace=D0,X.result=$E,X.round=J_,X.runInContext=ye,X.sample=_,X.size=F,X.snakeCase=kT,X.some=Y,X.sortedIndex=lm,X.sortedIndexBy=T0,X.sortedIndexOf=L_,X.sortedLastIndex=Vf,X.sortedLastIndexBy=Rp,X.sortedLastIndexOf=S0,X.startCase=Wv,X.startsWith=OT,X.subtract=HT,X.sum=GT,X.sumBy=WT,X.template=Eb,X.times=Lb,X.toFinite=Ac,X.toInteger=An,X.toLength=k0,X.toLower=sd,X.toNumber=Ji,X.toSafeInteger=ht,X.toString=or,X.toUpper=Bp,X.trim=LT,X.trimEnd=j_,X.trimStart=NT,X.truncate=P0,X.unescape=Y_,X.uniqueId=Nb,X.upperCase=B0,X.upperFirst=F0,X.each=rg,X.eachRight=Np,X.first=bl,Yv(X,function(){var c={};return ls(X,function(m,E){qn.call(X.prototype,E)||(c[E]=m)}),c}(),{chain:!1}),X.VERSION=r,Jr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){X[c].placeholder=X}),Jr(["drop","take"],function(c,m){mn.prototype[c]=function(E){E=E===t?1:ni(An(E),0);var N=this.__filtered__&&!m?new mn(this):this.clone();return N.__filtered__?N.__takeCount__=Ri(E,N.__takeCount__):N.__views__.push({size:Ri(E,fe),type:c+(N.__dir__<0?"Right":"")}),N},mn.prototype[c+"Right"]=function(E){return this.reverse()[c](E).reverse()}}),Jr(["filter","map","takeWhile"],function(c,m){var E=m+1,N=E==le||E==ge;mn.prototype[c]=function(G){var J=this.clone();return J.__iteratees__.push({iteratee:ln(G,3),type:E}),J.__filtered__=J.__filtered__||N,J}}),Jr(["head","last"],function(c,m){var E="take"+(m?"Right":"");mn.prototype[c]=function(){return this[E](1).value()[0]}}),Jr(["initial","tail"],function(c,m){var E="drop"+(m?"":"Right");mn.prototype[c]=function(){return this.__filtered__?new mn(this):this[E](1)}}),mn.prototype.compact=function(){return this.filter(Do)},mn.prototype.find=function(c){return this.filter(c).head()},mn.prototype.findLast=function(c){return this.reverse().find(c)},mn.prototype.invokeMap=fn(function(c,m){return typeof c=="function"?new mn(this):this.map(function(E){return Pn(E,c,m)})}),mn.prototype.reject=function(c){return this.filter($t(ln(c)))},mn.prototype.slice=function(c,m){c=An(c);var E=this;return E.__filtered__&&(c>0||m<0)?new mn(E):(c<0?E=E.takeRight(-c):c&&(E=E.drop(c)),m!==t&&(m=An(m),E=m<0?E.dropRight(-m):E.take(m-c)),E)},mn.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},mn.prototype.toArray=function(){return this.take(fe)},ls(mn.prototype,function(c,m){var E=/^(?:filter|find|map|reject)|While$/.test(m),N=/^(?:head|last)$/.test(m),G=X[N?"take"+(m=="last"?"Right":""):m],J=N||/^find/.test(m);!G||(X.prototype[m]=function(){var he=this.__wrapped__,ve=N?[1]:arguments,xe=he instanceof mn,nt=ve[0],rt=xe||Ln(he),dt=function(Yn){var er=G.apply(X,Zo([Yn],ve));return N&&Lt?er[0]:er};rt&&E&&typeof nt=="function"&&nt.length!=1&&(xe=rt=!1);var Lt=this.__chain__,qt=!!this.__actions__.length,pn=J&&!Lt,Nn=xe&&!qt;if(!J&&rt){he=Nn?he:new mn(this);var dn=c.apply(he,ve);return dn.__actions__.push({func:Yf,args:[dt],thisArg:t}),new Ir(dn,Lt)}return pn&&Nn?c.apply(this,ve):(dn=this.thru(dt),pn?N?dn.value()[0]:dn.value():dn)})}),Jr(["pop","push","shift","sort","splice","unshift"],function(c){var m=fo[c],E=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",N=/^(?:pop|shift)$/.test(c);X.prototype[c]=function(){var G=arguments;if(N&&!this.__chain__){var J=this.value();return m.apply(Ln(J)?J:[],G)}return this[E](function(he){return m.apply(Ln(he)?he:[],G)})}}),ls(mn.prototype,function(c,m){var E=X[m];if(E){var N=E.name+"";qn.call(Ol,N)||(Ol[N]=[]),Ol[N].push({name:m,func:E})}}),Ol[W(t,k).name]=[{name:"wrapper",func:t}],mn.prototype.clone=Uf,mn.prototype.reverse=hl,mn.prototype.value=ki,X.prototype.at=ed,X.prototype.chain=dm,X.prototype.commit=Xf,X.prototype.next=Kf,X.prototype.plant=bd,X.prototype.reverse=yf,X.prototype.toJSON=X.prototype.valueOf=X.prototype.value=tg,X.prototype.first=X.prototype.head,ta&&(X.prototype[ta]=Lp),X},pi=Ad();bi?((bi.exports=pi)._=pi,Rs._=pi):$r._=pi}).call(f_)})(gg,gg.exports);const Ake=gg.exports,Ike=(n,e)=>({clock:new Cke,items:{},tfs:{},hulls:{},lines:{},texts:{},points:{},widgets:{},onMove:(t,r,s,o)=>n(l=>{console.log(o),l[r][t].position={...o.position},l[r][t].rotation=o.quaternion,l[r][t].rotation.x=o.quaternion.x,l[r][t].rotation.y=o.quaternion.y,l[r][t].rotation.z=o.quaternion.z,l[r][t].rotation.w=o.quaternion.w,l[r][t].scale={...o.scale}}),onClick:(t,r,s,o)=>{r||console.log(`id: ${t} clicked!`,s),e().items[t]&&!r&&o.stopPropagation()},onPointerOver:(t,r,s)=>{},onPointerOut:(t,r,s)=>{},pause:()=>n(t=>{t.clock.setTimescale(0)}),play:t=>n(r=>{r.clock.setTimescale(t||1)}),reset:t=>n(r=>{console.log(`setting time to ${t}`),r.clock._elapsed=t?t*1e3:0}),clearItems:()=>n(t=>({items:{}})),clearLines:()=>n(t=>({lines:{}})),clearTfs:()=>n(t=>({tfs:{}})),clearHulls:()=>n(t=>({hulls:{}})),clearTexts:()=>n(t=>({texts:{}})),clearPoints:()=>n(t=>({points:{}})),setItems:t=>n(r=>({items:t})),setLines:t=>n(r=>({lines:t})),setTfs:t=>n(r=>({tfs:t})),setHulls:t=>n(r=>({hulls:t})),setTexts:t=>n(r=>({texts:t})),setPoints:t=>n(r=>({points:t})),removeItem:t=>n(r=>{delete r.items[t]}),removeLine:t=>n(r=>{delete r.lines[t]}),removeTf:t=>n(r=>{delete r.tfs[t]}),removeHull:t=>n(r=>{delete r.hulls[t]}),removeText:t=>n(r=>{delete r.texts[t]}),removePoint:t=>n(r=>{delete r.points[t]}),setItem:(t,r)=>n(s=>{s.items[t]=r}),setLine:(t,r)=>n(s=>{s.lines[t]=r}),setTf:(t,r)=>n(s=>{s.tfs[t]=r}),setHull:(t,r)=>n(s=>{s.hulls[t]=r}),setText:(t,r)=>n(s=>{s.texts[t]=r}),setPoint:(t,r)=>n(s=>{s.points[t]=r}),setProperty:(t,r)=>n(s=>{Ake.set(s,t,r)})}),Rke=$ke(dke(Ike)),kke=cke(Rke),xee=de.createContext(),Fo=(n,e)=>{const t=de.useContext(xee);return See(t,n,e)},Oke=({store:n,children:e,debug:t=!1})=>(t&&console.log("SceneProvider regenerated"),un(xee.Provider,{value:n||kke,children:e})),Lke=Tt.forwardRef((n,e)=>un("ambientLight",{ref:e,...n}));Tt.forwardRef((n,e)=>un("pointLight",{ref:e,...n}));const Nke=Tt.forwardRef((n,e)=>un("directionalLight",{ref:e,...n})),mv=(n,e,t,r)=>{var s=new Fn;return s.setRGB(n/255,e/255,t/255),r<=.99?new q$({color:s.getHex(),opacity:r+.1,transparent:!0,depthWrite:!0,blendSrc:l2,blendDst:u2,blendEquation:n4,blending:y_}):new q$({color:s.getHex(),opacity:r,blending:y_})},OI=gg.exports.memoize(n=>{var e=new Fn(n),t=`
		varying vec3	vVertexWorldPosition;
		varying vec3	vVertexNormal;

		// varying vec4	vFragColor;

		void main(){
			vVertexNormal	= normalize(normalMatrix * normal);

			vVertexWorldPosition	= (modelMatrix * vec4(position, 1.0)).xyz;

			// set gl_Position
			gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1.0);
		}`,r=`
		uniform vec3	glowColor;
		uniform float	coeficient;
		uniform float	power;

		varying vec3	vVertexNormal;
		varying vec3	vVertexWorldPosition;

		// varying vec4	vFragColor;

		void main(){
			vec3 worldCameraToVertex= vVertexWorldPosition - cameraPosition;
			vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;
			viewCameraToVertex	= normalize(viewCameraToVertex);
			float intensity		= pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);
			gl_FragColor		= vec4(glowColor, intensity);
		}`,s=new xd({uniforms:{coeficient:{type:"f",value:1.2},power:{type:"f",value:4},glowColor:{type:"c",value:e}},vertexShader:t,fragmentShader:r,blending:wR,transparent:!0,depthWrite:!1,depthTest:!1});return s});function Dke(n){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;n=n.replace(e,function(r,s,o,l){return s+s+o+o+l+l});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}const s1=new L4,Wp=new Me,gy=new Me,Pu=new wl,v9={X:new Me(1,0,0),Y:new Me(0,1,0),Z:new Me(0,0,1)},$N={type:"change"},_9={type:"mouseDown"},y9={type:"mouseUp",mode:null},b9={type:"objectChange"};class Pke extends oo{constructor(e,t){super(),t===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const r=new Gke;this._gizmo=r,this.add(r);const s=new Wke;this._plane=s,this.add(s);const o=this;function l(O,P){let D=P;Object.defineProperty(o,O,{get:function(){return D!==void 0?D:P},set:function(U){D!==U&&(D=U,s[O]=U,r[O]=U,o.dispatchEvent({type:O+"-changed",value:U}),o.dispatchEvent($N))}}),o[O]=P,s[O]=P,r[O]=P}l("camera",e),l("object",void 0),l("enabled",!0),l("axis",null),l("mode","translate"),l("translationSnap",null),l("rotationSnap",null),l("scaleSnap",null),l("space","world"),l("size",1),l("dragging",!1),l("showX",!0),l("showY",!0),l("showZ",!0);const u=new Me,h=new Me,f=new wl,g=new wl,y=new Me,b=new wl,S=new Me,C=new Me,M=new Me,A=0,k=new Me;l("worldPosition",u),l("worldPositionStart",h),l("worldQuaternion",f),l("worldQuaternionStart",g),l("cameraPosition",y),l("cameraQuaternion",b),l("pointStart",S),l("pointEnd",C),l("rotationAxis",M),l("rotationAngle",A),l("eye",k),this._offset=new Me,this._startNorm=new Me,this._endNorm=new Me,this._cameraScale=new Me,this._parentPosition=new Me,this._parentQuaternion=new wl,this._parentQuaternionInv=new wl,this._parentScale=new Me,this._worldScaleStart=new Me,this._worldQuaternionInv=new wl,this._worldScale=new Me,this._positionStart=new Me,this._quaternionStart=new wl,this._scaleStart=new Me,this._getPointer=Bke.bind(this),this._onPointerDown=zke.bind(this),this._onPointerHover=Fke.bind(this),this._onPointerMove=Uke.bind(this),this._onPointerUp=Hke.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye):this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;s1.setFromCamera(e,this.camera);const t=CN(this._gizmo.picker[this.mode],s1);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e.button!==0)&&this.axis!==null){s1.setFromCamera(e,this.camera);const t=CN(this._plane,s1,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,_9.mode=this.mode,this.dispatchEvent(_9)}}pointerMove(e){const t=this.axis,r=this.mode,s=this.object;let o=this.space;if(r==="scale"?o="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(o="world"),s===void 0||t===null||this.dragging===!1||e.button!==-1)return;s1.setFromCamera(e,this.camera);const l=CN(this._plane,s1,!0);if(l){if(this.pointEnd.copy(l.point).sub(this.worldPositionStart),r==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),o==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),o==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),s.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(o==="local"&&(s.position.applyQuaternion(Pu.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.position.applyQuaternion(this._quaternionStart)),o==="world"&&(s.parent&&s.position.add(Wp.setFromMatrixPosition(s.parent.matrixWorld)),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.parent&&s.position.sub(Wp.setFromMatrixPosition(s.parent.matrixWorld))));else if(r==="scale"){if(t.search("XYZ")!==-1){let u=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(u*=-1),gy.set(u,u,u)}else Wp.copy(this.pointStart),gy.copy(this.pointEnd),Wp.applyQuaternion(this._worldQuaternionInv),gy.applyQuaternion(this._worldQuaternionInv),gy.divide(Wp),t.search("X")===-1&&(gy.x=1),t.search("Y")===-1&&(gy.y=1),t.search("Z")===-1&&(gy.z=1);s.scale.copy(this._scaleStart).multiply(gy),this.scaleSnap&&(t.search("X")!==-1&&(s.scale.x=Math.round(s.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(s.scale.y=Math.round(s.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(s.scale.z=Math.round(s.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(r==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const u=20/this.worldPosition.distanceTo(Wp.setFromMatrixPosition(this.camera.matrixWorld));t==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Wp.copy(this.rotationAxis).cross(this.eye))*u):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(v9[t]),Wp.copy(v9[t]),o==="local"&&Wp.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(Wp.cross(this.eye).normalize())*u),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),o==="local"&&t!=="E"&&t!=="XYZE"?(s.quaternion.copy(this._quaternionStart),s.quaternion.multiply(Pu.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),s.quaternion.copy(Pu.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),s.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent($N),this.dispatchEvent(b9)}}pointerUp(e){e.button===0&&(this.dragging&&this.axis!==null&&(y9.mode=this.mode,this.dispatchEvent(y9)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){!this.enabled||this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent($N),this.dispatchEvent(b9),this.pointStart.copy(this.pointEnd))}getRaycaster(){return s1}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function Bke(n){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:n.button};{const e=this.domElement.getBoundingClientRect();return{x:(n.clientX-e.left)/e.width*2-1,y:-(n.clientY-e.top)/e.height*2+1,button:n.button}}}function Fke(n){if(this.enabled)switch(n.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(n));break}}function zke(n){!this.enabled||(document.pointerLockElement||this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(n)),this.pointerDown(this._getPointer(n)))}function Uke(n){!this.enabled||this.pointerMove(this._getPointer(n))}function Hke(n){!this.enabled||(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(n)))}function CN(n,e,t){const r=e.intersectObject(n,!0);for(let s=0;s<r.length;s++)if(r[s].object.visible||t)return r[s];return!1}const HA=new pT,Sl=new Me(0,1,0),T9=new Me(0,0,0),S9=new ei,GA=new wl,LI=new wl,K0=new Me,w9=new ei,Px=new Me(1,0,0),g1=new Me(0,1,0),Bx=new Me(0,0,1),WA=new Me,Ex=new Me,xx=new Me;class Gke extends oo{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new m0({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new Bf({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),r=e.clone();r.opacity=.15;const s=t.clone();s.opacity=.5;const o=e.clone();o.color.setHex(16711680);const l=e.clone();l.color.setHex(65280);const u=e.clone();u.color.setHex(255);const h=e.clone();h.color.setHex(16711680),h.opacity=.5;const f=e.clone();f.color.setHex(65280),f.opacity=.5;const g=e.clone();g.color.setHex(255),g.opacity=.5;const y=e.clone();y.opacity=.25;const b=e.clone();b.color.setHex(16776960),b.opacity=.25,e.clone().color.setHex(16776960);const S=e.clone();S.color.setHex(7895160);const C=new Wl(0,.04,.1,12);C.translate(0,.05,0);const M=new mu(.08,.08,.08);M.translate(0,.04,0);const A=new ui;A.setAttribute("position",new ur([0,0,0,1,0,0],3));const k=new Wl(.0075,.0075,.5,3);k.translate(0,.25,0);function O(le,ce){const ge=new r0(le,.0075,3,64,ce*Math.PI*2);return ge.rotateY(Math.PI/2),ge.rotateX(Math.PI/2),ge}function P(){const le=new ui;return le.setAttribute("position",new ur([0,0,0,1,1,1],3)),le}const D={X:[[new Hn(C,o),[.5,0,0],[0,0,-Math.PI/2]],[new Hn(C,o),[-.5,0,0],[0,0,Math.PI/2]],[new Hn(k,o),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new Hn(C,l),[0,.5,0]],[new Hn(C,l),[0,-.5,0],[Math.PI,0,0]],[new Hn(k,l)]],Z:[[new Hn(C,u),[0,0,.5],[Math.PI/2,0,0]],[new Hn(C,u),[0,0,-.5],[-Math.PI/2,0,0]],[new Hn(k,u),null,[Math.PI/2,0,0]]],XYZ:[[new Hn(new o0(.1,0),y.clone()),[0,0,0]]],XY:[[new Hn(new mu(.15,.15,.01),g.clone()),[.15,.15,0]]],YZ:[[new Hn(new mu(.15,.15,.01),h.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Hn(new mu(.15,.15,.01),f.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},U={X:[[new Hn(new Wl(.2,0,.6,4),r),[.3,0,0],[0,0,-Math.PI/2]],[new Hn(new Wl(.2,0,.6,4),r),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Hn(new Wl(.2,0,.6,4),r),[0,.3,0]],[new Hn(new Wl(.2,0,.6,4),r),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Hn(new Wl(.2,0,.6,4),r),[0,0,.3],[Math.PI/2,0,0]],[new Hn(new Wl(.2,0,.6,4),r),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new Hn(new o0(.2,0),r)]],XY:[[new Hn(new mu(.2,.2,.01),r),[.15,.15,0]]],YZ:[[new Hn(new mu(.2,.2,.01),r),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Hn(new mu(.2,.2,.01),r),[.15,0,.15],[-Math.PI/2,0,0]]]},H={START:[[new Hn(new o0(.01,2),s),null,null,null,"helper"]],END:[[new Hn(new o0(.01,2),s),null,null,null,"helper"]],DELTA:[[new Rf(P(),s),null,null,null,"helper"]],X:[[new Rf(A,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Rf(A,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Rf(A,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},V={XYZE:[[new Hn(O(.5,1),S),null,[0,Math.PI/2,0]]],X:[[new Hn(O(.5,.5),o)]],Y:[[new Hn(O(.5,.5),l),null,[0,0,-Math.PI/2]]],Z:[[new Hn(O(.5,.5),u),null,[0,Math.PI/2,0]]],E:[[new Hn(O(.75,1),b),null,[0,Math.PI/2,0]]]},z={AXIS:[[new Rf(A,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},Z={XYZE:[[new Hn(new f0(.25,10,8),r)]],X:[[new Hn(new r0(.5,.1,4,24),r),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Hn(new r0(.5,.1,4,24),r),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Hn(new r0(.5,.1,4,24),r),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Hn(new r0(.75,.1,2,24),r)]]},oe={X:[[new Hn(M,o),[.5,0,0],[0,0,-Math.PI/2]],[new Hn(k,o),[0,0,0],[0,0,-Math.PI/2]],[new Hn(M,o),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new Hn(M,l),[0,.5,0]],[new Hn(k,l)],[new Hn(M,l),[0,-.5,0],[0,0,Math.PI]]],Z:[[new Hn(M,u),[0,0,.5],[Math.PI/2,0,0]],[new Hn(k,u),[0,0,0],[Math.PI/2,0,0]],[new Hn(M,u),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new Hn(new mu(.15,.15,.01),g),[.15,.15,0]]],YZ:[[new Hn(new mu(.15,.15,.01),h),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Hn(new mu(.15,.15,.01),f),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Hn(new mu(.1,.1,.1),y.clone())]]},ue={X:[[new Hn(new Wl(.2,0,.6,4),r),[.3,0,0],[0,0,-Math.PI/2]],[new Hn(new Wl(.2,0,.6,4),r),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Hn(new Wl(.2,0,.6,4),r),[0,.3,0]],[new Hn(new Wl(.2,0,.6,4),r),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Hn(new Wl(.2,0,.6,4),r),[0,0,.3],[Math.PI/2,0,0]],[new Hn(new Wl(.2,0,.6,4),r),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new Hn(new mu(.2,.2,.01),r),[.15,.15,0]]],YZ:[[new Hn(new mu(.2,.2,.01),r),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Hn(new mu(.2,.2,.01),r),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Hn(new mu(.2,.2,.2),r),[0,0,0]]]},q={X:[[new Rf(A,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Rf(A,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Rf(A,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function ae(le){const ce=new oo;for(const ge in le)for(let $e=le[ge].length;$e--;){const K=le[ge][$e][0].clone(),ie=le[ge][$e][1],se=le[ge][$e][2],fe=le[ge][$e][3],Se=le[ge][$e][4];K.name=ge,K.tag=Se,ie&&K.position.set(ie[0],ie[1],ie[2]),se&&K.rotation.set(se[0],se[1],se[2]),fe&&K.scale.set(fe[0],fe[1],fe[2]),K.updateMatrix();const Ue=K.geometry.clone();Ue.applyMatrix4(K.matrix),K.geometry=Ue,K.renderOrder=1/0,K.position.set(0,0,0),K.rotation.set(0,0,0),K.scale.set(1,1,1),ce.add(K)}return ce}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=ae(D)),this.add(this.gizmo.rotate=ae(V)),this.add(this.gizmo.scale=ae(oe)),this.add(this.picker.translate=ae(U)),this.add(this.picker.rotate=ae(Z)),this.add(this.picker.scale=ae(ue)),this.add(this.helper.translate=ae(H)),this.add(this.helper.rotate=ae(z)),this.add(this.helper.scale=ae(q)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:LI;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let r=[];r=r.concat(this.picker[this.mode].children),r=r.concat(this.gizmo[this.mode].children),r=r.concat(this.helper[this.mode].children);for(let s=0;s<r.length;s++){const o=r[s];o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition);let l;if(this.camera.isOrthographicCamera?l=(this.camera.top-this.camera.bottom)/this.camera.zoom:l=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),o.scale.set(1,1,1).multiplyScalar(l*this.size/4),o.tag==="helper"){o.visible=!1,o.name==="AXIS"?(o.position.copy(this.worldPositionStart),o.visible=!!this.axis,this.axis==="X"&&(Pu.setFromEuler(HA.set(0,0,0)),o.quaternion.copy(t).multiply(Pu),Math.abs(Sl.copy(Px).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Y"&&(Pu.setFromEuler(HA.set(0,0,Math.PI/2)),o.quaternion.copy(t).multiply(Pu),Math.abs(Sl.copy(g1).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Z"&&(Pu.setFromEuler(HA.set(0,Math.PI/2,0)),o.quaternion.copy(t).multiply(Pu),Math.abs(Sl.copy(Bx).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="XYZE"&&(Pu.setFromEuler(HA.set(0,Math.PI/2,0)),Sl.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(S9.lookAt(T9,Sl,g1)),o.quaternion.multiply(Pu),o.visible=this.dragging),this.axis==="E"&&(o.visible=!1)):o.name==="START"?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):o.name==="END"?(o.position.copy(this.worldPosition),o.visible=this.dragging):o.name==="DELTA"?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),Wp.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Wp.applyQuaternion(this.worldQuaternionStart.clone().invert()),o.scale.copy(Wp),o.visible=this.dragging):(o.quaternion.copy(t),this.dragging?o.position.copy(this.worldPositionStart):o.position.copy(this.worldPosition),this.axis&&(o.visible=this.axis.search(o.name)!==-1));continue}o.quaternion.copy(t),this.mode==="translate"||this.mode==="scale"?(o.name==="X"&&Math.abs(Sl.copy(Px).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Y"&&Math.abs(Sl.copy(g1).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Z"&&Math.abs(Sl.copy(Bx).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XY"&&Math.abs(Sl.copy(Bx).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="YZ"&&Math.abs(Sl.copy(Px).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XZ"&&Math.abs(Sl.copy(g1).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1)):this.mode==="rotate"&&(GA.copy(t),Sl.copy(this.eye).applyQuaternion(Pu.copy(t).invert()),o.name.search("E")!==-1&&o.quaternion.setFromRotationMatrix(S9.lookAt(this.eye,T9,g1)),o.name==="X"&&(Pu.setFromAxisAngle(Px,Math.atan2(-Sl.y,Sl.z)),Pu.multiplyQuaternions(GA,Pu),o.quaternion.copy(Pu)),o.name==="Y"&&(Pu.setFromAxisAngle(g1,Math.atan2(Sl.x,Sl.z)),Pu.multiplyQuaternions(GA,Pu),o.quaternion.copy(Pu)),o.name==="Z"&&(Pu.setFromAxisAngle(Bx,Math.atan2(Sl.y,Sl.x)),Pu.multiplyQuaternions(GA,Pu),o.quaternion.copy(Pu))),o.visible=o.visible&&(o.name.indexOf("X")===-1||this.showX),o.visible=o.visible&&(o.name.indexOf("Y")===-1||this.showY),o.visible=o.visible&&(o.name.indexOf("Z")===-1||this.showZ),o.visible=o.visible&&(o.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),o.material._color=o.material._color||o.material.color.clone(),o.material._opacity=o.material._opacity||o.material.opacity,o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled&&this.axis&&(o.name===this.axis||this.axis.split("").some(function(u){return o.name===u}))&&(o.material.color.setHex(16776960),o.material.opacity=1)}super.updateMatrixWorld(e)}}class Wke extends Hn{constructor(){super(new d0(1e5,1e5,2,2),new m0({visible:!1,wireframe:!0,side:up,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),WA.copy(Px).applyQuaternion(t==="local"?this.worldQuaternion:LI),Ex.copy(g1).applyQuaternion(t==="local"?this.worldQuaternion:LI),xx.copy(Bx).applyQuaternion(t==="local"?this.worldQuaternion:LI),Sl.copy(Ex),this.mode){case"translate":case"scale":switch(this.axis){case"X":Sl.copy(this.eye).cross(WA),K0.copy(WA).cross(Sl);break;case"Y":Sl.copy(this.eye).cross(Ex),K0.copy(Ex).cross(Sl);break;case"Z":Sl.copy(this.eye).cross(xx),K0.copy(xx).cross(Sl);break;case"XY":K0.copy(xx);break;case"YZ":K0.copy(WA);break;case"XZ":Sl.copy(xx),K0.copy(Ex);break;case"XYZ":case"E":K0.set(0,0,0);break}break;case"rotate":default:K0.set(0,0,0)}K0.length()===0?this.quaternion.copy(this.cameraQuaternion):(w9.lookAt(Wp.set(0,0,0),K0,Sl),this.quaternion.setFromRotationMatrix(w9)),super.updateMatrixWorld(e)}}const MN=1,Vke=n=>{let{x:e,y:t,z:r}=n===void 0?{}:n;return e=e===void 0?MN:e,t=t===void 0?MN:t,r=r===void 0?MN:r,new TIe(e,t,r,2,.05)},jke=.5,Yke=n=>{let{radius:e}=n===void 0?{}:n;return e=e===void 0?jke:e,new f0(e,32,32)},$ee=.5,Cee=1,Xke=n=>{let{radius:e,height:t}=n===void 0?{}:n;return e=e===void 0?$ee:e,t=t===void 0?Cee:t,new Wl(e,e,t,32,1,!1)},Kke=.4,Jke=.05,qke=.2,Qke=.6,A2=n=>{let{length:e,radius:t}=n===void 0?{}:n;e=e===void 0?1:e,t=t===void 0?1:t;const r=Kke*e,s=qke*.5*t,o=new Wl(0,s,r,32,1),l=Qke*e,u=Jke*.5*t,h=new Wl(u,u,l,32,1);var f=new ei;return f.setPosition(new Me(0,l*.5,0)),h.applyMatrix4(f),f.setPosition(new Me(0,l+r*.5,0)),o.applyMatrix4(f),iee([o,h])},Zke=n=>{let{radius:e,height:t}=n===void 0?{}:n;e=e===void 0?$ee:e,t=t===void 0?Cee:t;const r=new Wl(e,e,t,32,1,!0),s=new f0(e,32,32,Math.PI,Math.PI),o=new f0(e,32,32,Math.PI,Math.PI);var l=new ei;l.makeRotationX(Math.PI/2),l.setPosition(0,t/2,0);var u=new ei;return u.makeRotationX(-Math.PI/2),u.setPosition(0,-t/2,0),s.applyMatrix4(l),o.applyMatrix4(u),iee([r,s,o])},iC=(n,e,t)=>{if(n.current&&e){const r=typeof e.r=="function"?e.r(t)/255:e.r/255,s=typeof e.g=="function"?e.g(t)/255:e.g/255,o=typeof e.b=="function"?e.b(t)/255:e.b/255,l=typeof e.a=="function"?e.a(t):e.a;n.current.material.color.setRGB(r,s,o),n.current.material.opacity=l,n.current.material.transparent=l!==1}},e2e=n=>{let e=null;if(n.shape)n.shape==="cube"?e=Vke(n.shapeParams):n.shape==="cylinder"?e=Xke(n.shapeParams):n.shape==="sphere"?e=Yke(n.shapeParams):n.shape==="capsule"?e=Zke(n.shapeParams):n.shape==="arrow"&&(e=A2(n.shapeParams));else return[];return[{geometry:e,type:"part"}]};function TE(...n){const e=de.useRef();return de.useEffect(()=>{n.forEach(t=>{!t||(typeof t=="function"?t(e.current):t.current=e.current)})},[n]),e}function Nf(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[r,s]of n)if(!Object.is(s,e.get(r)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const r of n)if(!e.has(r))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}const t2e=de.forwardRef(({objectKey:n,displayTfs:e,position:t,rotation:r,scale:s,ghost:o,highlightColor:l,children:u},h)=>{const f=de.useRef(null),g=TE(h,f),y=Fo(de.useCallback(C=>C.tfs[n],[n]),Nf),b=Fo(C=>C.clock);Km(de.useCallback(()=>{const C=b.getElapsed()*1e3;g.current&&(g.current.position.set(t?t.x:typeof y.position.x=="function"?y.position.x(C):y.position.x,t?t.y:typeof y.position.y=="function"?y.position.y(C):y.position.y,t?t.z:typeof y.position.z=="function"?y.position.z(C):y.position.z),g.current.quaternion.set(r?r.x:typeof y.rotation.x=="function"?y.rotation.x(C):y.rotation.x,r?r.y:typeof y.rotation.y=="function"?y.rotation.y(C):y.rotation.y,r?r.z:typeof y.rotation.z=="function"?y.rotation.z(C):y.rotation.z,r?r.w:typeof y.rotation.w=="function"?y.rotation.w(C):y.rotation.w),g.current.scale.set(s?s.x:y.scale?typeof y.scale.x=="function"?y.scale.x(C):y.scale.x:0,s?s.y:y.scale?typeof y.scale.y=="function"?y.scale.y(C):y.scale.y:0,s?s.z:y.scale?typeof y.scale.z=="function"?y.scale.z(C):y.scale.z:0))},[y,t,r,s,g,b]));const S=A2();return Bh("group",{ref:g,dispose:null,up:[0,0,1],children:[e&&Bh(FC,{children:[un("axesHelper",{size:1}),un("mesh",{geometry:S,material:o?OI(l):mv(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},`${n}ArrowX`),un("mesh",{geometry:S,material:o?OI(l):mv(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},`${n}ArrowY`),un("mesh",{geometry:S,material:o?OI(l):mv(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},`${n}ArrowZ`)]}),u]})});function n2e({displayTfs:n,children:e}){const t=A2();return Bh("group",{dispose:null,up:[0,0,1],children:[n&&Bh(FC,{children:[un("axesHelper",{size:1}),un("mesh",{geometry:t,material:mv(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},"$WorldArrowX"),un("mesh",{geometry:t,material:mv(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},"$WorldArrowY"),un("mesh",{geometry:t,material:mv(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},"$WorldArrowZ")]}),e]})}function r2e({displayTfs:n,children:e}){const t=A2();return Bh("group",{dispose:null,up:[0,0,1],children:[n&&Bh(FC,{children:[un("axesHelper",{size:1}),un("mesh",{geometry:t,material:mv(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},"$WorldArrowX"),un("mesh",{geometry:t,material:mv(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},"$WorldArrowY"),un("mesh",{geometry:t,material:mv(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},"$WorldArrowZ")]}),e]})}/**
 * postprocessing v6.30.1 build Fri Feb 24 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rschen
 * @license Zlib
 */var i2e="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}";function E9(n,e){let t="texel";if(n!==null){const r=Number.parseInt(mE);if(!(e&&r>=133&&r!==135&&n.format===Xp&&n.type===af&&n.encoding===ms))switch(n.encoding){case ms:t="sRGBToLinear(texel)";break;case Mg:t="texel";break;default:throw new Error(`Unsupported encoding: ${n.encoding}`)}}return t}var Is={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},V1={NONE:0,DEPTH:1,CONVOLUTION:2},Bo={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Q4={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},s2e=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,o2e="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",a2e=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],l2e=class extends xd{constructor(n=new Ts){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new so(null),texelSize:new so(new Ts),scale:new so(1),kernel:new so(0)},blending:gp,depthWrite:!1,depthTest:!1,fragmentShader:s2e,vertexShader:o2e}),this.toneMapped=!1,this.setTexelSize(n.x,n.y),this.kernelSize=Q4.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return a2e[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,r=1/e;this.uniforms.texelSize.value.set(t,r,t*.5,r*.5)}},u2e=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
#include <dithering_fragment>
}`,Mee=class extends xd{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new so(null),opacity:new so(1)},blending:gp,depthWrite:!1,depthTest:!1,fragmentShader:u2e,vertexShader:i2e}),this.toneMapped=!1}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},c2e=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,h2e=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,d2e=class extends xd{constructor(n=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new so(null),cameraNear:new so(.3),cameraFar:new so(1e3)},blending:gp,depthWrite:!1,depthTest:!1,fragmentShader:c2e,vertexShader:h2e}),this.toneMapped=!1,this.depthBuffer=n,this.depthPacking=Bw,this.copyCameraSettings(e)}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Bw){this.depthBuffer=n,this.depthPacking=e}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof el?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},f2e=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);
#else
vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));
#endif
gl_FragColor=vec4(n[index],d[index]);}`,p2e="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",m2e=class extends xd{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new so(null),normalBuffer:new so(null),texelSize:new so(new Kt)},blending:gp,depthWrite:!1,depthTest:!1,fragmentShader:f2e,vertexShader:p2e}),this.toneMapped=!1}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=ib){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},g2e=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,v2e="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",_2e=class extends xd{constructor(n,e,t,r,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:mE.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new so(null),depthBuffer:new so(null),resolution:new so(new Kt),texelSize:new so(new Kt),cameraNear:new so(.3),cameraFar:new so(1e3),aspect:new so(1),time:new so(0)},blending:gp,depthWrite:!1,depthTest:!1,dithering:s}),this.toneMapped=!1,n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(r)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=ib){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){var e,t,r,s,o;return this.fragmentShader=g2e.replace(Bo.FRAGMENT_HEAD,(e=n.get(Bo.FRAGMENT_HEAD))!=null?e:"").replace(Bo.FRAGMENT_MAIN_UV,(t=n.get(Bo.FRAGMENT_MAIN_UV))!=null?t:"").replace(Bo.FRAGMENT_MAIN_IMAGE,(r=n.get(Bo.FRAGMENT_MAIN_IMAGE))!=null?r:""),this.vertexShader=v2e.replace(Bo.VERTEX_HEAD,(s=n.get(Bo.VERTEX_HEAD))!=null?s:"").replace(Bo.VERTEX_MAIN_SUPPORT,(o=n.get(Bo.VERTEX_MAIN_SUPPORT))!=null?o:""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof el?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return Bo}},y2e="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",b2e="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",T2e=class extends xd{constructor(n=new Kt){super({name:"OutlineMaterial",uniforms:{inputBuffer:new so(null),texelSize:new so(new Kt)},blending:gp,depthWrite:!1,depthTest:!1,fragmentShader:y2e,vertexShader:b2e}),this.toneMapped=!1,this.uniforms.texelSize.value.set(n.x,n.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},S2e=new vE,vy=null;function w2e(){if(vy===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);vy=new ui,vy.setAttribute!==void 0?(vy.setAttribute("position",new zo(n,3)),vy.setAttribute("uv",new zo(e,2))):(vy.addAttribute("position",new zo(n,3)),vy.addAttribute("uv",new zo(e,2)))}return vy}var Jm=class{constructor(n="Pass",e=new j$,t=S2e){this.name=n,this.renderer=null,this.scene=e,this.camera=t,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(n){if(this.rtt===n){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!n}}set mainScene(n){}set mainCamera(n){}setRenderer(n){this.renderer=n}isEnabled(){return this.enabled}setEnabled(n){this.enabled=n}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(n){let e=this.screen;e!==null?e.material=n:(e=new Hn(w2e(),n),e.frustumCulled=!1,this.scene===null&&(this.scene=new j$),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(n){this.fullscreenMaterial=n}getDepthTexture(){return null}setDepthTexture(n,e=ib){}render(n,e,t,r,s){throw new Error("Render method not implemented!")}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Dc||e instanceof hd||e instanceof dc||e instanceof Jm)&&this[n].dispose()}}},E2e=class extends Jm{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new Mee,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new Dc(1,1,{minFilter:El,magFilter:El,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,r,s){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==af?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n.outputEncoding===ms&&(this.renderTarget.texture.encoding=ms))}},x2e=class extends Jm{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,r,s){const o=n.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},x9=new Fn,Z4=class extends Jm{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,r,s){const o=this.overrideClearColor,l=this.overrideClearAlpha,u=n.getClearAlpha(),h=o!==null,f=l>=0;h?(n.getClearColor(x9),n.setClearColor(o,f?l:u)):f&&n.setClearAlpha(l),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),h?n.setClearColor(x9,u):f&&n.setClearAlpha(u)}},_y=-1,hp=class extends Ym{constructor(n,e=_y,t=_y,r=1){super(),this.resizable=n,this.baseSize=new Kt(1,1),this.preferredSize=new Kt(e,t),this.target=this.preferredSize,this.s=r,this.effectiveSize=new Kt,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,r=this.scale;e.width!==_y?t.width=e.width:e.height!==_y?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*r),e.height!==_y?t.height=e.height:e.width!==_y?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*r)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(_y),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return _y}},AN=!1,$9=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case up:t=this.materialsFlatShadedDoubleSide;break;case cd:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case up:t=this.materialsDoubleSide;break;case cd:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[n.clone(),n.clone(),n.clone()];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=_v;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const r=t.clone();return r.uniforms=Object.assign({},n.uniforms),r.side=cd,r}),this.materialsDoubleSide=e.map(t=>{const r=t.clone();return r.uniforms=Object.assign({},n.uniforms),r.side=up,r}),this.materialsFlatShaded=e.map(t=>{const r=t.clone();return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=e.map(t=>{const r=t.clone();return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r.side=cd,r}),this.materialsFlatShadedDoubleSide=e.map(t=>{const r=t.clone();return r.uniforms=Object.assign({},n.uniforms),r.flatShading=!0,r.side=up,r})}}render(n,e,t){const r=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,AN){const s=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const o of s)o[0].material=o[1];this.meshCount!==s.size&&s.clear()}else{const s=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=s}n.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return AN}static set workaroundEnabled(n){AN=n}},I2=class extends Jm{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new Z4,this.overrideMaterialManager=t===null?null:new $9(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new $9(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,r,s){const o=this.scene,l=this.camera,u=this.selection,h=l.layers.mask,f=o.background,g=n.shadowMap.autoUpdate,y=this.renderToScreen?null:e;u!==null&&l.layers.set(u.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(y),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,o,l):n.render(o,l),l.layers.mask=h,o.background=f,n.shadowMap.autoUpdate=g}},$2e=class extends Jm{constructor(n,e,{renderTarget:t,resolutionScale:r=1,width:s=hp.AUTO_SIZE,height:o=hp.AUTO_SIZE,resolutionX:l=s,resolutionY:u=o}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new I2(n,e,new PC({depthPacking:Bw}));const h=this.renderPass;h.skipShadowMapUpdate=!0,h.ignoreBackground=!0;const f=h.getClearPass();f.overrideClearColor=new Fn(16777215),f.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Dc(1,1,{minFilter:Vl,magFilter:Vl}),this.renderTarget.texture.name="DepthPass.Target");const g=this.resolution=new hp(this,l,u,r);g.addEventListener("change",y=>this.setSize(g.baseWidth,g.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,s){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},C2e=class extends Jm{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=hp.AUTO_SIZE,height:r=hp.AUTO_SIZE,resolutionX:s=t,resolutionY:o=r}={}){super("DepthDownsamplingPass");const l=new m2e;l.normalBuffer=n,this.fullscreenMaterial=l,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Dc(1,1,{minFilter:Vl,magFilter:Vl,depthBuffer:!1,type:ov}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const u=this.resolution=new hp(this,s,o,e);u.addEventListener("change",h=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=ib){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,r,s){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const r=n.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function C9(n,e,t){for(const r of e){const s="$1"+n+r.charAt(0).toUpperCase()+r.slice(1),o=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const l of t.entries())l[1]!==null&&t.set(l[0],l[1].replace(o,s))}}function M2e(n,e,t){var r,s,o,l,u;let h=e.getFragmentShader(),f=e.getVertexShader();const g=h!==void 0&&/mainImage/.test(h),y=h!==void 0&&/mainUv/.test(h);if(t.attributes|=e.getAttributes(),h===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(y&&t.attributes&V1.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!g&&!y)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const b=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,S=t.shaderParts;let C=(r=S.get(Bo.FRAGMENT_HEAD))!=null?r:"",M=(s=S.get(Bo.FRAGMENT_MAIN_UV))!=null?s:"",A=(o=S.get(Bo.FRAGMENT_MAIN_IMAGE))!=null?o:"",k=(l=S.get(Bo.VERTEX_HEAD))!=null?l:"",O=(u=S.get(Bo.VERTEX_MAIN_SUPPORT))!=null?u:"";const P=new Set,D=new Set;if(y&&(M+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),f!==null&&/mainSupport/.test(f)){const V=/mainSupport *\([\w\s]*?uv\s*?\)/.test(f);O+=`	${n}MainSupport(`,O+=V?`vUv);
`:`);
`;for(const z of f.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const Z of z[1].split(/\s*,\s*/))t.varyings.add(Z),P.add(Z),D.add(Z);for(const z of f.matchAll(b))D.add(z[1])}for(const V of h.matchAll(b))D.add(V[1]);for(const V of e.defines.keys())D.add(V.replace(/\([\w\s,]*\)/g,""));for(const V of e.uniforms.keys())D.add(V);D.delete("while"),D.delete("for"),D.delete("if"),e.uniforms.forEach((V,z)=>t.uniforms.set(n+z.charAt(0).toUpperCase()+z.slice(1),V)),e.defines.forEach((V,z)=>t.defines.set(n+z.charAt(0).toUpperCase()+z.slice(1),V));const U=new Map([["fragment",h],["vertex",f]]);C9(n,D,t.defines),C9(n,D,U),h=U.get("fragment"),f=U.get("vertex");const H=e.blendMode;if(t.blendModes.set(H.blendFunction,H),g){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(A+=e.inputColorSpace===ms?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==null?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const V=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;A+=`${n}MainImage(color0, UV, `,t.attributes&V1.DEPTH&&V.test(h)&&(A+="depth, ",t.readDepth=!0),A+=`color1);
	`;const z=n+"BlendOpacity";t.uniforms.set(z,H.opacity),A+=`color0 = blend${H.blendFunction}(color0, color1, ${z});

	`,C+=`uniform float ${z};

`}if(C+=h+`
`,f!==null&&(k+=f+`
`),S.set(Bo.FRAGMENT_HEAD,C),S.set(Bo.FRAGMENT_MAIN_UV,M),S.set(Bo.FRAGMENT_MAIN_IMAGE,A),S.set(Bo.VERTEX_HEAD,k),S.set(Bo.VERTEX_MAIN_SUPPORT,O),e.extensions!==null)for(const V of e.extensions)t.extensions.add(V)}}var A2e=class extends Jm{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new _2e(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new P2e;let e=0;for(const l of this.effects)if(l.blendMode.blendFunction===Is.DST)n.attributes|=l.getAttributes()&V1.DEPTH;else{if(n.attributes&l.getAttributes()&V1.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${l.name})`);M2e("e"+e++,l,n)}let t=n.shaderParts.get(Bo.FRAGMENT_HEAD),r=n.shaderParts.get(Bo.FRAGMENT_MAIN_IMAGE),s=n.shaderParts.get(Bo.FRAGMENT_MAIN_UV);const o=/\bblend\b/g;for(const l of n.blendModes.values())t+=l.getShaderCode().replace(o,`blend${l.blendFunction}`)+`
`;n.attributes&V1.DEPTH?(n.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===ms&&(r+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(Bo.FRAGMENT_HEAD,t),n.shaderParts.set(Bo.FRAGMENT_MAIN_IMAGE,r),n.shaderParts.set(Bo.FRAGMENT_MAIN_UV,s),n.shaderParts.forEach((l,u,h)=>h.set(u,l==null?void 0:l.trim().replace(/^#/,`
#`))),this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=ib){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,r,s){for(const o of this.effects)o.update(n,e,r);if(!this.skipRendering||this.renderToScreen){const o=this.fullscreenMaterial;o.inputBuffer=e.texture,o.time+=r*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const r of this.effects)r.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==af&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},I2e=class extends Jm{constructor({kernelSize:n=Q4.MEDIUM,resolutionScale:e=.5,width:t=hp.AUTO_SIZE,height:r=hp.AUTO_SIZE,resolutionX:s=t,resolutionY:o=r}={}){super("KawaseBlurPass"),this.renderTargetA=new Dc(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const l=this.resolution=new hp(this,s,o,e);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight)),this._blurMaterial=new l2e,this._blurMaterial.kernelSize=n,this.copyMaterial=new Mee}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,s){const o=this.scene,l=this.camera,u=this.renderTargetA,h=this.renderTargetB,f=this.blurMaterial,g=f.kernelSequence;let y=e;this.fullscreenMaterial=f;for(let b=0,S=g.length;b<S;++b){const C=b&1?h:u;f.kernel=g[b],f.inputBuffer=y.texture,n.setRenderTarget(C),n.render(o,l),y=C}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=y.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(o,l)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const r=t.width,s=t.height;this.renderTargetA.setSize(r,s),this.renderTargetB.setSize(r,s),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==af?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n.outputEncoding===ms&&(this.renderTargetA.texture.encoding=ms,this.renderTargetB.texture.encoding=ms))}static get AUTO_SIZE(){return hp.AUTO_SIZE}},R2e=class extends Jm{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new Z4(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,r,s){const o=n.getContext(),l=n.state.buffers,u=this.scene,h=this.camera,f=this.clearPass,g=this.inverted?0:1,y=1-g;l.color.setMask(!1),l.depth.setMask(!1),l.color.setLocked(!0),l.depth.setLocked(!0),l.stencil.setTest(!0),l.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),l.stencil.setFunc(o.ALWAYS,g,4294967295),l.stencil.setClear(y),l.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?f.render(n,null):(f.render(n,e),f.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(u,h)):(n.setRenderTarget(e),n.render(u,h),n.setRenderTarget(t),n.render(u,h)),l.color.setLocked(!1),l.depth.setLocked(!1),l.stencil.setLocked(!1),l.stencil.setFunc(o.EQUAL,1,4294967295),l.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),l.stencil.setLocked(!0)}},k2e=class extends Jm{constructor(n,e,{renderTarget:t,resolutionScale:r=1,width:s=hp.AUTO_SIZE,height:o=hp.AUTO_SIZE,resolutionX:l=s,resolutionY:u=o}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new I2(n,e,new w4);const h=this.renderPass;h.ignoreBackground=!0,h.skipShadowMapUpdate=!0;const f=h.getClearPass();f.overrideClearColor=new Fn(7829503),f.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Dc(1,1,{minFilter:Vl,magFilter:Vl}),this.renderTarget.texture.name="NormalPass.Target");const g=this.resolution=new hp(this,l,u,r);g.addEventListener("change",y=>this.setSize(g.baseWidth,g.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,r,s){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,o,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},O2e=class extends Jm{constructor(n,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=n,this.input=e}setInput(n){this.input=n}render(n,e,t,r,s){const o=this.fullscreenMaterial.uniforms;e!==null&&o!==void 0&&o[this.input]!==void 0&&(o[this.input].value=e.texture),n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}initialize(n,e,t){t!==void 0&&t!==af&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},IN=1/1e3,L2e=1e3,N2e=class{constructor(){this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*IN}get fixedDelta(){return this._fixedDelta*IN}set fixedDelta(n){this._fixedDelta=n*L2e}get elapsed(){return this._elapsed*IN}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=n!==void 0?n:performance.now(),this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()}handleEvent(n){document.hidden||(this.currentTime=performance.now())}dispose(){this.autoReset=!1}},D2e=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:r=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,s,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new E2e,this.depthTexture=null,this.passes=[],this.timer=new N2e,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const e=n.getSize(new Kt),t=n.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===af&&n.outputEncoding===ms&&(this.inputBuffer.texture.encoding=ms,this.outputBuffer.texture.encoding=ms,this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(e.width,e.height);for(const s of this.passes)s.initialize(n,t,r)}}replaceRenderer(n,e=!0){const t=this.renderer,r=t.domElement.parentNode;return this.setRenderer(n),e&&r!==null&&(r.removeChild(t.domElement),r.appendChild(n.domElement)),t}createDepthTexture(){const n=this.depthTexture=new d4;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=Yy,n.type=Uy):n.type=g_,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,r){const s=this.renderer,o=s===null?new Kt:s.getDrawingBufferSize(new Kt),l={minFilter:El,magFilter:El,stencilBuffer:e,depthBuffer:n,type:t},u=new Dc(o.width,o.height,l);return r>0&&(u.ignoreDepthForMultisampleCopy=!1,u.samples=r),t===af&&s!==null&&s.outputEncoding===ms&&(u.texture.encoding=ms),u.texture.name="EffectComposer.Buffer",u.texture.generateMipmaps=!1,u}setMainScene(n){for(const e of this.passes)e.mainScene=n}setMainCamera(n){for(const e of this.passes)e.mainCamera=n}addPass(n,e){const t=this.passes,r=this.renderer,s=r.getDrawingBufferSize(new Kt),o=r.getContext().getContextAttributes().alpha,l=this.inputBuffer.texture.type;if(n.setRenderer(r),n.setSize(s.width,s.height),n.initialize(r,o,l),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const u=this.createDepthTexture();for(n of t)n.setDepthTexture(u)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const r=(s,o)=>s||o.needsDepthTexture;e.reduce(r,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let r=this.inputBuffer,s=this.outputBuffer,o=!1,l,u,h;n===void 0&&(this.timer.update(),n=this.timer.delta);for(const f of this.passes)f.enabled&&(f.render(e,r,s,n,o),f.needsSwap&&(o&&(t.renderToScreen=f.renderToScreen,l=e.getContext(),u=e.state.buffers.stencil,u.setFunc(l.NOTEQUAL,1,4294967295),t.render(e,r,s,n,o),u.setFunc(l.EQUAL,1,4294967295)),h=r,r=s,s=h),f instanceof R2e?o=!0:f instanceof x2e&&(o=!1))}setSize(n,e,t){const r=this.renderer,s=r.getSize(new Kt);(n===void 0||e===void 0)&&(n=s.width,e=s.height),(s.width!==n||s.height!==e)&&r.setSize(n,e,t);const o=r.getDrawingBufferSize(new Kt);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const l of this.passes)l.setSize(o.width,o.height)}reset(){const n=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=n}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},P2e=class{constructor(){this.shaderParts=new Map([[Bo.FRAGMENT_HEAD,null],[Bo.FRAGMENT_MAIN_UV,null],[Bo.FRAGMENT_MAIN_IMAGE,null],[Bo.VERTEX_HEAD,null],[Bo.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=V1.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Mg}},B2e=class extends Set{constructor(n,e=10){super(),this.l=e,this.exclusive=!1,n!==void 0&&this.set(n)}get layer(){return this.l}set layer(n){const e=this.l;for(const t of this)t.layers.disable(e),t.layers.enable(n);this.l=n}getLayer(){return this.layer}setLayer(n){this.layer=n}isExclusive(){return this.exclusive}setExclusive(n){this.exclusive=n}clear(){const n=this.layer;for(const e of this)e.layers.disable(n);return super.clear()}set(n){this.clear();for(const e of n)this.add(e);return this}indexOf(n){return this.has(n)?0:-1}add(n){return this.exclusive?n.layers.set(this.layer):n.layers.enable(this.layer),super.add(n)}delete(n){return this.has(n)&&n.layers.disable(this.layer),super.delete(n)}toggle(n){let e;return this.has(n)?(this.delete(n),e=!1):(this.add(n),e=!0),e}setVisible(n){for(const e of this)n?e.layers.enable(0):e.layers.disable(0);return this}},F2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",z2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",U2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",H2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",G2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",W2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",V2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",j2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",Y2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",X2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",K2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",J2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",q2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",Q2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",Z2e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",eOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",tOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",nOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",rOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",iOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",sOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",oOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",aOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",lOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",uOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",cOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",hOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",dOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",fOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",pOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",mOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",gOe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",vOe=new Map([[Is.ADD,F2e],[Is.ALPHA,z2e],[Is.AVERAGE,U2e],[Is.COLOR,H2e],[Is.COLOR_BURN,G2e],[Is.COLOR_DODGE,W2e],[Is.DARKEN,V2e],[Is.DIFFERENCE,j2e],[Is.DIVIDE,Y2e],[Is.DST,null],[Is.EXCLUSION,X2e],[Is.HARD_LIGHT,K2e],[Is.HARD_MIX,J2e],[Is.HUE,q2e],[Is.INVERT,Q2e],[Is.INVERT_RGB,Z2e],[Is.LIGHTEN,eOe],[Is.LINEAR_BURN,tOe],[Is.LINEAR_DODGE,nOe],[Is.LINEAR_LIGHT,rOe],[Is.LUMINOSITY,iOe],[Is.MULTIPLY,sOe],[Is.NEGATION,oOe],[Is.NORMAL,aOe],[Is.OVERLAY,lOe],[Is.PIN_LIGHT,uOe],[Is.REFLECT,cOe],[Is.SATURATION,hOe],[Is.SCREEN,dOe],[Is.SOFT_LIGHT,fOe],[Is.SRC,pOe],[Is.SUBTRACT,mOe],[Is.VIVID_LIGHT,gOe]]),_Oe=class extends Ym{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new so(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return vOe.get(this.blendFunction)}},yOe=class extends Ym{constructor(n,e,{attributes:t=V1.NONE,blendFunction:r=Is.NORMAL,defines:s=new Map,uniforms:o=new Map,extensions:l=null,vertexShader:u=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=u,this.defines=s,this.uniforms=o,this.extensions=l,this.blendMode=new _Oe(r),this.blendMode.addEventListener("change",h=>this.setChanged()),this._inputColorSpace=Mg,this._outputColorSpace=null}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=ib){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Dc||e instanceof hd||e instanceof dc||e instanceof Jm)&&this[n].dispose()}}};new Me;new ei;new Fn;var bOe=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texelToLinear(texture2D(patternTexture,vUvPattern));
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,TOe="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",SOe=class extends yOe{constructor(n,e,{blendFunction:t=Is.SCREEN,patternTexture:r=null,patternScale:s=1,edgeStrength:o=1,pulseSpeed:l=0,visibleEdgeColor:u=16777215,hiddenEdgeColor:h=2230538,kernelSize:f=Q4.VERY_SMALL,blur:g=!1,xRay:y=!0,multisampling:b=0,resolutionScale:S=.5,width:C=hp.AUTO_SIZE,height:M=hp.AUTO_SIZE,resolutionX:A=C,resolutionY:k=M}={}){super("OutlineEffect",bOe,{uniforms:new Map([["maskTexture",new so(null)],["edgeTexture",new so(null)],["edgeStrength",new so(o)],["visibleEdgeColor",new so(new Fn(u))],["hiddenEdgeColor",new so(new Fn(h))],["pulse",new so(1)],["patternScale",new so(s)],["patternTexture",new so(null)]])}),this.blendMode.addEventListener("change",U=>{this.blendMode.getBlendFunction()===Is.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.setBlendFunction(t),this.patternTexture=r,this.xRay=y,this.scene=n,this.camera=e,this.renderTargetMask=new Dc(1,1),this.renderTargetMask.samples=b,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new Dc(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new Z4,this.clearPass.overrideClearColor=new Fn(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new $2e(n,e),this.maskPass=new I2(n,e,new d2e(this.depthPass.texture,e));const O=this.maskPass.clearPass;O.overrideClearColor=new Fn(16777215),O.overrideClearAlpha=1,this.blurPass=new I2e({resolutionScale:S,resolutionX:A,resolutionY:k,kernelSize:f}),this.blurPass.enabled=g;const P=this.blurPass.resolution;P.addEventListener("change",U=>this.setSize(P.baseWidth,P.baseHeight)),this.outlinePass=new O2e(new T2e);const D=this.outlinePass.fullscreenMaterial;D.inputBuffer=this.renderTargetMask.texture,this.time=0,this.active=!1,this.selection=new B2e,this.selection.layer=10,this.pulseSpeed=l}set mainScene(n){this.scene=n,this.depthPass.mainScene=n,this.maskPass.mainScene=n}set mainCamera(n){this.camera=n,this.depthPass.mainCamera=n,this.maskPass.mainCamera=n,this.maskPass.overrideMaterial.copyCameraSettings(n)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(n){this.renderTargetMask.samples=n,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(n){this.uniforms.get("patternScale").value=n}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(n){this.uniforms.get("edgeStrength").value=n}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(n){this.uniforms.get("visibleEdgeColor").value=n}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(n){this.uniforms.get("hiddenEdgeColor").value=n}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(n){this.pulseSpeed=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get selectionLayer(){return this.selection.layer}set selectionLayer(n){this.selection.layer=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get blur(){return this.blurPass.enabled}set blur(n){this.blurPass.enabled=n}get xRay(){return this.defines.has("X_RAY")}set xRay(n){this.xRay!==n&&(n?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(n){this.xRay=n}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(n){if(n!==null?(n.wrapS=n.wrapT=Pw,this.defines.set("USE_PATTERN","1"),this.setVertexShader(TOe)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.renderer!==null){const e=E9(n,this.renderer.capabilities.isWebGL2);this.defines.set("texelToLinear(texel)",e)}this.uniforms.get("patternTexture").value=n,this.setChanged()}setPatternTexture(n){this.patternTexture=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}setSelection(n){return this.selection.set(n),this}clearSelection(){return this.selection.clear(),this}selectObject(n){return this.selection.add(n),this}deselectObject(n){return this.selection.delete(n),this}update(n,e,t){const r=this.scene,s=this.camera,o=this.selection,l=this.uniforms.get("pulse"),u=r.background,h=s.layers.mask;o.size>0?(r.background=null,l.value=1,this.pulseSpeed>0&&(l.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.active=!0,this.time+=t,o.setVisible(!1),this.depthPass.render(n),o.setVisible(!0),s.layers.set(o.layer),this.maskPass.render(n,this.renderTargetMask),s.layers.mask=h,r.background=u,this.outlinePass.render(n,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(n,this.renderTargetOutline,this.renderTargetOutline)):this.active&&(this.clearPass.render(n,this.renderTargetOutline),this.active=!1)}setSize(n,e){this.blurPass.setSize(n,e),this.renderTargetMask.setSize(n,e);const t=this.resolution;t.setBaseSize(n,e);const r=t.width,s=t.height;this.depthPass.setSize(r,s),this.renderTargetOutline.setSize(r,s),this.outlinePass.fullscreenMaterial.setSize(r,s)}initialize(n,e,t){const r=this.patternTexture,s=E9(r,n.capabilities.isWebGL2);this.defines.set("texelToLinear(texel)",s),this.blurPass.initialize(n,e,af),t!==void 0&&(this.depthPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.outlinePass.initialize(n,e,t))}};new Me;new Me;let $x;function wOe(){if($x!==void 0)return $x;try{var n;let e;const t=document.createElement("canvas");return $x=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))===null||n===void 0||n.loseContext()),$x}catch{return $x=!1}}const EOe=n=>!!n.current,M9=n=>EOe(n)?n.current:n,Aee=de.createContext(null),xOe=Tt.memo(de.forwardRef((n,e)=>{let{children:t,camera:r,scene:s,resolutionScale:o,enabled:l=!0,renderPriority:u=1,autoClear:h=!0,depthBuffer:f,disableNormalPass:g,stencilBuffer:y,multisampling:b=8,frameBufferType:S=tT}=n;const{gl:C,scene:M,camera:A,size:k}=nf();s=s||M,r=r||A;const[O,P,D]=de.useMemo(()=>{const V=wOe(),z=new D2e(C,{depthBuffer:f,stencilBuffer:y,multisampling:b>0&&V?b:0,frameBufferType:S});z.addPass(new I2(s,r));let Z=null,oe=null;return g||(oe=new k2e(s,r),oe.enabled=!1,z.addPass(oe),o!==void 0&&V&&(Z=new C2e({normalBuffer:oe.texture,resolutionScale:o}),Z.enabled=!1,z.addPass(Z))),[z,oe,Z]},[r,C,f,y,b,S,s,g,o]);de.useEffect(()=>O==null?void 0:O.setSize(k.width,k.height),[O,k]),Km((V,z)=>{l&&(C.autoClear=h,O.render(z))},l?u:0);const U=de.useRef(null);de.useLayoutEffect(()=>{let V;return U.current&&U.current.__r3f&&O&&(V=new A2e(r,...U.current.__r3f.objects),V.renderToScreen=!0,O.addPass(V),P&&(P.enabled=!0),D&&(D.enabled=!0)),()=>{V&&(O==null||O.removePass(V)),P&&(P.enabled=!1),D&&(D.enabled=!1)}},[O,t,r,P,D]);const H=de.useMemo(()=>({composer:O,normalPass:P,downSamplingPass:D,resolutionScale:o,camera:r,scene:s}),[O,P,D,o,r,s]);return de.useImperativeHandle(e,()=>O,[O]),un(Aee.Provider,{value:H,children:un("group",{ref:U,children:t})})})),ez=de.createContext(null);function $Oe(n){let{children:e,enabled:t=!0}=n;const[r,s]=de.useState([]),o=de.useMemo(()=>({selected:r,select:s,enabled:t}),[r,s,t]);return Tt.createElement(ez.Provider,{value:o},e)}function Iee(n){let{enabled:e=!1,children:t,...r}=n;const s=de.useRef(null),o=de.useContext(ez);return de.useEffect(()=>{if(o&&e){let l=!1;const u=[];if(s.current.traverse(h=>{h.type==="Mesh"&&u.push(h),o.selected.indexOf(h)===-1&&(l=!0)}),l)return o.select(h=>[...h,...u]),()=>{o.select(h=>h.filter(f=>!u.includes(f)))}}},[e,t]),un("group",{ref:s,...r,children:t})}const COe=de.forwardRef(function(n,e){let{selection:t=[],selectionLayer:r=10,blendFunction:s,patternTexture:o,edgeStrength:l,pulseSpeed:u,visibleEdgeColor:h,hiddenEdgeColor:f,width:g,height:y,kernelSize:b,blur:S,xRay:C,...M}=n;const A=nf(U=>U.invalidate),{scene:k,camera:O}=de.useContext(Aee),P=de.useMemo(()=>new SOe(k,O,{blendFunction:s,patternTexture:o,edgeStrength:l,pulseSpeed:u,visibleEdgeColor:h,hiddenEdgeColor:f,width:g,height:y,kernelSize:b,blur:S,xRay:C,...M}),[s,S,O,l,y,f,b,o,u,k,h,g,C]),D=de.useContext(ez);return de.useEffect(()=>{if(!D&&t)return P.selection.set(Array.isArray(t)?t.map(M9):[M9(t)]),A(),()=>{P.selection.clear(),A()}},[P,t,D]),de.useEffect(()=>{P.selectionLayer=r,A()},[P,r]),de.useRef(),de.useEffect(()=>{if(D&&D.enabled){var U;if((U=D.selected)!=null&&U.length)return P.selection.set(D.selected),A(),()=>{P.selection.clear(),A()}}},[D]),un("primitive",{ref:e,object:P})}),MOe=["cube","cylinder","sphere","capsule","arrow"],Ree=de.createContext(),AOe=n=>{const e=de.useContext(Ree)[n.shape];return MOe.includes(n.shape)?e2e(n):e&&typeof e=="function"?e():(console.warn(`Shape not loaded: ${n.shape} (reading property 'shape' of item)`,n),[])},IOe=({meshes:n,children:e})=>un(Ree.Provider,{value:n,children:e}),ROe=de.memo(de.forwardRef(({objectKey:n,highlightColor:e,position:t,rotation:r,scale:s,ghost:o},l)=>{const u=de.useRef(null),h=TE(l,u),f=Fo(M=>M.onClick,Nf),g=Fo(M=>M.onPointerOver,Nf),y=Fo(M=>M.onPointerOut,Nf),b=Fo(M=>M.clock),S=Fo(de.useCallback(M=>M.items[n],[n]),Nf),C=AOe(S);return Km(de.useCallback(()=>{const M=b.getElapsed()*1e3;h.current&&(h.current.position.set(t?t.x:typeof S.position.x=="function"?S.position.x(M):S.position.x,t?t.y:typeof S.position.y=="function"?S.position.y(M):S.position.y,t?t.z:typeof S.position.z=="function"?S.position.z(M):S.position.z),h.current.quaternion.set(r?r.x:typeof S.rotation.x=="function"?S.rotation.x(M):S.rotation.x,r?r.y:typeof S.rotation.y=="function"?S.rotation.y(M):S.rotation.y,r?r.z:typeof S.rotation.z=="function"?S.rotation.z(M):S.rotation.z,r?r.w:typeof S.rotation.w=="function"?S.rotation.w(M):S.rotation.w),h.current.scale.set(s?s.x:typeof S.scale.x=="function"?S.scale.x(M):S.scale.x,s?s.y:typeof S.scale.y=="function"?S.scale.y(M):S.scale.y,s?s.z:typeof S.scale.z=="function"?S.scale.z(M):S.scale.z),h.current.visible=typeof S.hidden=="function"?!S.hidden(M):!S.hidden)},[S,t,r,s,h,b])),un(Iee,{enabled:S.highlighted,children:Bh("group",{ref:h,up:[0,0,1],children:[un("group",{up:[0,0,1],rotation:[Math.PI/2,0,0],onPointerDown:M=>{f(n,!h.current.visible,{local:{position:h.current.position,rotation:h.current.quaternion},world:{position:h.current.getWorldPosition(new Me),rotation:h.current.getWorldQuaternion(new wl)}},M)},onPointerOver:M=>{g(n,!h.current.visible,M)},onPointerOut:M=>{y(n,!h.current.visible,M)},children:C.map((M,A)=>un(kee,{idx:A,groupOrPart:M,objectKey:n,ghost:o,highlightColor:e},A))}),S.showName&&un(ree,{distanceFactor:3,position:[0,0,.2],children:un("div",{style:{opacity:.75,borderRadius:2,backgroundColor:"lightgrey",padding:5,userSelect:"none"},children:S.name})})]})})})),kOe=de.memo(({part:n,objectKey:e,ghost:t,highlightColor:r})=>{const s=Fo(de.useCallback(g=>g.items[e].wireframe,[e])),o=Fo(de.useCallback(g=>g.items[e].color,[e])),l=o!==void 0,u=de.useRef(),h=de.useRef(),f=Fo(g=>g.clock);return Km(de.useCallback(()=>{const g=f.getElapsed()*1e3;t||(iC(h,o,g),iC(u,o,g))},[t,u,h,f,o])),t?un("mesh",{ref:h,geometry:n.geometry,material:OI(r),scale:n.scale,castShadow:!1,receiveShadow:!1},"B"):l?Bh("group",{up:[0,0,1],children:[un("mesh",{ref:h,geometry:n.geometry,scale:n.scale,castShadow:!1,receiveShadow:!1,children:un("meshLambertMaterial",{transparent:!0,wireframe:s,attach:"material",opacity:1,side:cd})},"B"),un("mesh",{ref:u,geometry:n.geometry,scale:n.scale,castShadow:!1,receiveShadow:!1,children:un("meshLambertMaterial",{transparent:!0,attach:"material",wireframe:s,opacity:1,side:_v})},"F")]}):un(FC,{children:un("mesh",{ref:u,geometry:n.geometry,material:n.material,scale:n.scale,castShadow:!0,receiveShadow:!0,wireframe:s},"I")})}),kee=de.memo(({idx:n,groupOrPart:e,ghost:t,objectKey:r,highlightColor:s})=>e.type==="group"?un("group",{up:[0,0,1],position:e.position,rotation:e.rotation,scale:e.scale,children:e.children.map((o,l)=>un(kee,{idx:l,groupOrPart:o,objectKey:r,ghost:t,highlightColor:s},l))},n):un(kOe,{part:e,objectKey:r,highlightColor:s,ghost:t},n)),OOe=de.forwardRef(({objectKey:n},e)=>{const t=de.useRef(null),r=TE(e,t),{vertices:s,width:o,hidden:l}=Fo(de.useCallback(u=>({vertices:u.lines[n].vertices,width:u.lines[n].width,hidden:u.lines[n].hidden}),[n]),Nf);return s.length<=1?null:un($Ie,{ref:r,visible:!l,points:s.map(u=>[u.position.x,u.position.y,u.position.z]),color:"white",vertexColors:s.map(u=>[u.color.r/255,u.color.g/255,u.color.b/255]),lineWidth:o})}),LOe=de.forwardRef(({objectKey:n},e)=>{const t=de.useRef(null),r=TE(e,t),s=Fo(C=>C.onClick,Nf),o=Fo(C=>C.onPointerOver,Nf),l=Fo(C=>C.onPointerOut,Nf),u=Fo(de.useCallback(C=>C.hulls[n],[n]),Nf),h=Fo(de.useCallback(C=>C.hulls[n].vertices,[n]),Nf),f=Fo(C=>C.clock),g=de.useRef(),y=de.useRef(),b=typeof h=="function"?h(0):h,S=new IW(b.map(C=>new Me(C.x,C.y,C.z)));return Km(de.useCallback(()=>{const C=f.getElapsed()*1e3;iC(y,u.color,C),iC(g,u.color,C);const M=typeof h=="function"?h(C):h;if(M!==b){const k=new IW(M.map(O=>new Me(O.x,O.y,O.z)));g.current.geometry=k,y.current.geometry=k}const A=typeof u.hidden=="function"?!u.hidden(C):!u.hidden;g.current.visible=A,y.current.visible=A},[g,y,b,u,f,h])),un(Iee,{enabled:u.highlighted,children:Bh("group",{ref:r,up:[0,0,1],children:[Bh("group",{up:[0,0,1],onPointerDown:C=>{s(n,g.current.visible,C)},onPointerOver:C=>{o(n,g.current.visible,C)},onPointerOut:C=>{l(n,g.current.visible,C)},children:[un("mesh",{ref:y,geometry:S,castShadow:!1,receiveShadow:!1,children:un("meshLambertMaterial",{transparent:!0,wireframe:u.wireframe,attach:"material",side:cd})},`${n}B`),un("mesh",{ref:g,geometry:S,castShadow:!1,receiveShadow:!1,children:un("meshLambertMaterial",{transparent:!0,attach:"material",wireframe:u.wireframe,side:_v})},`${n}F`)]}),u.showName&&un(ree,{distanceFactor:2,position:[0,0,.5],children:un("div",{style:{opacity:.75,borderRadius:2,backgroundColor:"lightgrey"},className:"disable-text-selection",children:u.name})})]})})}),NOe=de.forwardRef(({objectKey:n},e)=>{const t=de.useRef(null),r=TE(e,t),s=de.useRef(),o=Fo(u=>u.clock),l=Fo(de.useCallback(u=>u.texts[n],[n]));return Km(de.useCallback(()=>{const u=o.getElapsed()*1e3;r.current&&(r.current.position.set(typeof l.position.x=="function"?l.position.x(u):l.position.x,typeof l.position.y=="function"?l.position.y(u):l.position.y,typeof l.position.z=="function"?l.position.z(u):l.position.z),r.current.visible=typeof l.hidden=="function"?!l.hidden(u):!l.hidden),s.current&&iC(s,l.color,u)},[l,r,o])),un("group",{ref:r,children:un(xIe,{follow:!0,children:un(bRe,{ref:s,depthOffset:2,scale:[.2,.2,.2],children:l.value})})})}),DOe=de.forwardRef(({objectKey:n},e)=>{const t=de.useRef(null),r=TE(e,t),s=Fo(g=>g.clock),{points:o,scale:l,hidden:u}=Fo(de.useCallback(g=>({points:g.points[n].points,scale:g.points[n].scale,hidden:g.points[n].hidden}),[n]),Nf),[{positions:h,colors:f}]=de.useState(()=>({positions:new Float32Array(o.length*3),colors:new Float32Array(o.length*3)}));return Km(()=>{const g=s.getElapsed()*1e3;if(r.current)for(let y=0;y<o.length;y++){let b=y*3;h[b]=typeof o[y].position.x=="function"?o[y].position.x(g):o[y].position.x,h[b+1]=typeof o[y].position.y=="function"?o[y].position.y(g):o[y].position.y,h[b+2]=typeof o[y].position.z=="function"?o[y].position.z(g):o[y].position.z,f[b]=typeof o[y].color.r=="function"?o[y].color.r(g)/255:o[y].color.r/255,f[b+1]=typeof o[y].color.g=="function"?o[y].color.g(g)/255:o[y].color.g/255,f[b+2]=typeof o[y].color.b=="function"?o[y].color.b(g)/255:o[y].color.b/255}}),o.length<=1?null:un(rke,{ref:r,hidden:u,positions:h,colors:f,children:un(qRe,{transparent:!0,vertexColors:!0,sizeAttenuation:!0,depthWrite:!0,size:l*.1})})}),tz=de.memo(({activeTf:n,displayTfs:e,allTfs:t,allItems:r,allLines:s,allHulls:o,allTexts:l,allPoints:u,highlightColor:h,ghosts:f,targetRef:g,targetId:y,targetSource:b,filterActive:S,tfFilter:C,customProps:M})=>{const A=n==="world"?n2e:n==="gizmo"?r2e:t2e,k=n===y?M:{},O=S?t.filter(D=>C.includes(D.key)):t,P=S&&n!==g;return Bh(A,{objectKey:n,displayTfs:e,ref:y===n?g:null,...k,ghost:f,highlightColor:h,children:[O.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>un(tz,{activeTf:D.key,displayTfs:e,allTfs:t,allItems:r,allLines:s,allHulls:o,allTexts:l,allPoints:u,highlightColor:h,ghosts:f,targetRef:g,targetSource:b,targetId:y,filterActive:P,tfFilter:C,customProps:M},D.key)),r.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>{const U=D.key===y&&b==="items"?M:{};return!S||D.key===y||n===y?un(ROe,{objectKey:D.key,highlightColor:h,ghost:f,ref:D.key===y?g:null,...U},D.key):null}),s.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>{const U=D.key===y&&b==="lines"?M:{};return!S||D.key===y||n===y?un(OOe,{objectKey:D.key,ref:D.lineKey===y?g:null,...U},D.key):null}),o.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>{const U=D.key===y&&b==="hulls"?M:{};return!S||D.key===y||n===y?un(LOe,{objectKey:D.key,highlightColor:h,ghost:f,ref:D.key===y?g:null,...U},D.key):null}),l.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>{const U=D.key===y&&b==="texts"?M:{};return!S||D.key===y||n===y?un(NOe,{objectKey:D.key,highlightColor:h,ref:D.key===y?g:null,...U},D.key):null}),u.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>{const U=D.key===y&&b==="points"?M:{};return!S||D.key===y||n===y?un(DOe,{objectKey:D.key,highlightColor:h,ref:D.key===y?g:null,...U},D.key):null})]})}),POe=["enabled","axis","translationSnap","rotationSnap","scaleSnap","space","size"],BOe=["displayTfs","allTfs","allItems","allLines","allHulls","allTexts","allPoints","highlightColor"],FOe=de.memo(({camera:n,objectInfo:e,highlightColor:t,translateSnap:r,rotateSnap:s,scaleSnap:o,onDragStart:l,onDragEnd:u,mode:h,...f})=>{const g=yN(f,POe),y=yN(f,BOe),b=Fo(de.useCallback(q=>{let ae=[];e.source==="tfs"&&ae.push(e.key);let le=q[e.source][e.key].frame;for(;le&&le!=="world"&&le!=="gizmo";){let ce=q.tfs[le];ae.push(le),le=ce.frame}return ae},[e]),Nf),S=de.useRef(),C=de.useRef(),M=Fo(q=>yN(q[e.source][e.key],["position","rotation","scale"]),Nf),A=nf(({gl:q})=>q),k=nf(({camera:q})=>q),O=nf(({invalidate:q})=>q),P=n||k,[D]=de.useState(()=>new Pke(P,A.domElement));D.translationSnap=r,D.rotationSnap=s,D.scaleSnap=o,h!=null&&h.includes("translate")?D.mode="translate":h!=null&&h.includes("rotate")?D.mode="rotate":h!=null&&h.includes("scale")&&(D.mode="scale"),h!=null&&h.includes("-x")?(D.showY=!1,D.showZ=!1):h!=null&&h.includes("-y")?(D.showX=!1,D.showZ=!1):h!=null&&h.includes("-z")&&(D.showX=!1,D.showY=!1);const[U,H]=de.useState(!1),[V,z]=de.useState(M),[Z,oe]=de.useState(!1);de.useEffect(()=>{console.log("refreshing transform"),z(M)},[M,Z]);const ue=Fo(q=>q.onMove,Nf);return de.useEffect(()=>{const q=ae=>{var le,ce,ge;const $e=(le=C==null?void 0:C.current)==null?void 0:le.position,K=(ce=C==null?void 0:C.current)==null?void 0:ce.quaternion,ie=(ge=C==null?void 0:C.current)==null?void 0:ge.scale;ae.value&&!U?(console.log("starting transform"),H(!0),z({position:$e,rotation:K,scale:ie}),l&&l()):!ae.value&&U&&(console.log("stopping transform"),H(!1),u&&u(),ue(e.key,e.source,{position:D.worldPosition,quaternion:D.worldQuaternion,scale:D._worldScale},{position:$e?{x:$e.x,y:$e.y,z:$e.z}:null,quaternion:K?{x:K.x,y:K.y,z:K.z,w:K.w}:null,scale:ie?{x:ie.x,y:ie.y,z:ie.z}:null}),oe(!Z))};return D&&D.addEventListener("dragging-changed",q),()=>{D.removeEventListener("dragging-changed",q)}},[M,U,e]),de.useEffect(()=>void(D==null?void 0:D.attach(C.current)),[C,D]),de.useEffect(()=>(D&&D.addEventListener("change",O),()=>{var q;return(q=D==null?void 0:D.removeEventListener)==null?void 0:q.call(D,"change",O)}),[D,O]),D?Bh(FC,{children:[un("primitive",{ref:S,object:D,...g}),un(tz,{...y,activeTf:"world",tfFilter:b,ghosts:!0,targetRef:C,targetSource:e.source,targetId:e.key,filterActive:!0,customProps:{...V}})]}):null}),o1=(n,e)=>n.length!==e.length?!1:!n.some((t,r)=>!gg.exports.isEqual(e[r],t));function zOe({displayTfs:n=!1,displayGrid:e=!0,isPolar:t=!1,backgroundColor:r="#d0d0d0",planeColor:s="#a8a8a8",highlightColor:o="#00ffff",plane:l=0,translateSnap:u=0,rotateSnap:h=0,scaleSnap:f=0,debug:g=!1}){g&&console.log("content rerender");const y=nf(ue=>ue.camera),b=Fo(ue=>ue.clock,Nf);Km(()=>{b.update()});const S=Fo(ue=>gg.exports.sortBy(Object.entries(ue.tfs).map(([q,ae])=>({key:q,frame:ae.frame,transformMode:ae.transformMode,source:"tfs"})),q=>q.key),o1),C=Fo(ue=>gg.exports.sortBy(Object.entries(ue.items).map(([q,ae])=>({key:q,frame:ae.frame,transformMode:ae.transformMode,source:"items"})),q=>q.key),o1),M=Fo(ue=>gg.exports.sortBy(Object.entries(ue.lines).map(([q,ae])=>({key:q,frame:ae.frame,source:"lines"})),q=>q.key),o1),A=Fo(ue=>gg.exports.sortBy(Object.entries(ue.hulls).map(([q,ae])=>({key:q,frame:ae.frame,source:"hulls"})),q=>q.key),o1),k=Fo(ue=>gg.exports.sortBy(Object.entries(ue.texts).map(([q,ae])=>({key:q,frame:ae.frame,source:"texts"})),q=>q.key),o1),O=Fo(ue=>gg.exports.sortBy(Object.entries(ue.points).map(([q,ae])=>({key:q,frame:ae.frame,source:"points"})),q=>q.key),o1),P=Fo(ue=>gg.exports.sortBy(Object.entries(ue.widgets).map(([q,ae])=>({key:q,frame:ae.frame,source:"widgets"})),q=>q.key),o1),D=[...C,...S].filter(ue=>["translate","rotate","scale","translate-x","translate-y","translate-z","rotate-x","rotate-y","rotate-z","scale-x","scale-y","scale-z"].includes(ue.transformMode)),U=de.useRef(),H=de.useRef(),V=de.useRef(),z=de.useRef(),Z=Dke(s),oe=[Z.r,Z.g,Z.b,.5];return Bh(Tt.Fragment,{children:[un(KRe,{ref:z,makeDefault:!0,camera:y}),un("pointLight",{ref:H,intensity:.5,position:[-1,-3,3],color:"#FFFAEE"}),un(Lke,{ref:U,intensity:.7,color:"white"}),un(Nke,{ref:V,castShadow:!0,position:[5,15,15],intensity:.6,color:"#FFFAEE"}),un("spotLight",{penumbra:1,position:[-1,-1,4],intensity:.3,castShadow:!0,color:"#FFFAEE"}),un("color",{attach:"background",args:[r]}),un("fogExp2",{attach:"fog",args:[r,.01]}),un(ZRe,{receiveShadow:!0,scale:1e3,position:[0,0,l-.01],material:mv(...oe)}),Bh($Oe,{children:[un(xOe,{autoClear:!1,children:un(COe,{visibleEdgeColor:o,hiddenEdgeColor:o,blur:!0,kernelSize:1,edgeStrength:50,pulseSpeed:.25,xRay:!0})}),un(tz,{activeTf:"world",displayTfs:n,allTfs:S,allItems:C,allLines:M,allHulls:A,allTexts:k,allPoints:O,allWidgets:P,highlightColor:o})]}),un("group",{position:[0,0,l],rotation:[Math.PI/2,0,0],up:[0,0,1],children:e&&(t?un("polarGridHelper",{args:[10,16,8,64,"white","gray"]}):un("gridHelper",{args:[20,20,"white","gray"]}))}),D.map(ue=>un(FOe,{objectInfo:ue,mode:ue.transformMode,displayTfs:n,allTfs:S,allItems:C,allLines:M,allHulls:A,allTexts:k,allPoints:O,allWidgets:P,translateSnap:u,rotateSnap:h,scaleSnap:f,highlightColor:o,onDragEnd:()=>{z.current&&(z.current.enabled=!0)},onDragStart:()=>{z.current&&(z.current.enabled=!1)}},`movableObjectTransform-${ue.key}`))]})}oo.DefaultUp.set(0,0,1);function UOe({backgroundColor:n="#d0d0d0",store:e,fov:t=60,onPointerMissed:r=()=>{},meshLookup:s={},debug:o=!1,...l}){return o&&console.log("Scene rerender"),un(iIe,{camera:{up:[0,0,1],fov:t,position:[0,-3,3]},shadows:!0,style:{background:n||"#d0d0d0"},onPointerMissed:r||(()=>{}),children:un(Oke,{store:e,debug:o,children:un(IOe,{meshes:s,children:un(de.Suspense,{children:un(zOe,{...l,backgroundColor:n,debug:o})})})})})}var nz={},HOe=hE;Object.defineProperty(nz,"__esModule",{value:!0});var Oee=nz.default=void 0,GOe=HOe(i2()),WOe=Ae;Oee=nz.default=(0,GOe.default)((0,WOe.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt");var rz={},VOe=hE;Object.defineProperty(rz,"__esModule",{value:!0});var Lee=rz.default=void 0,jOe=VOe(i2()),YOe=Ae;Lee=rz.default=(0,jOe.default)((0,YOe.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");var iz={},XOe=hE;Object.defineProperty(iz,"__esModule",{value:!0});var Nee=iz.default=void 0,KOe=XOe(i2()),JOe=Ae;Nee=iz.default=(0,KOe.default)((0,JOe.jsx)("path",{d:"M6 6h12v12H6z"}),"Stop");const qOe="/assets/compile-worker-CjCt9Tta.js",QOe={Left:"LEFT_ARM_CONNECTOR_1",Right:"RIGHT_ARM_CONNECTOR_1",Head:"HEAD_1",Neck:"NECK_GLOBE_BASE_1",Base:"base_link"},Vi=n=>QOe[n],ZOe={s_Acceptance:"s_Acceptance.wav",s_Amazement:"s_Amazement.wav",s_Amazement2:"s_Amazement2.wav",s_Anger:"s_Anger.wav",s_Anger2:"s_Anger2.wav",s_Anger3:"s_Anger3.wav",s_Anger4:"s_Anger4.wav",s_Annoyance:"s_Annoyance.wav",s_Annoyance2:"s_Annoyance2.wav",s_Annoyance3:"s_Annoyance3.wav",s_Annoyance4:"s_Annoyance4.wav",s_Awe:"s_Awe.wav",s_Awe2:"s_Awe2.wav",s_Awe3:"s_Awe3.wav",s_Boredom:"s_Boredom.wav",s_Disapproval:"s_Disapproval.wav",s_Disgust:"s_Disgust.wav",s_Disgust2:"s_Disgust2.wav",s_Disgust3:"s_Disgust3.wav",s_DisorientedConfused:"s_DisorientedConfused.wav",s_DisorientedConfused2:"s_DisorientedConfused2.wav",s_DisorientedConfused3:"s_DisorientedConfused3.wav",s_DisorientedConfused4:"s_DisorientedConfused4.wav",s_DisorientedConfused5:"s_DisorientedConfused5.wav",s_DisorientedConfused6:"s_DisorientedConfused6.wav",s_Distraction:"s_Distraction.wav",s_Ecstacy:"s_Ecstacy.wav",s_Ecstacy2:"s_Ecstacy2.wav",s_Fear:"s_Fear.wav",s_Grief:"s_Grief.wav",s_Grief2:"s_Grief2.wav",s_Grief3:"s_Grief3.wav",s_Grief4:"s_Grief4.wav",s_Joy:"s_Joy.wav",s_Joy2:"s_Joy2.wav",s_Joy3:"s_Joy3.wav",s_Joy4:"s_Joy4.wav",s_Loathing:"s_Loathing.wav",s_Love:"s_Love.wav",s_PhraseByeBye:"s_PhraseByeBye.wav",s_PhraseEvilAhHa:"s_PhraseEvilAhHa.wav",s_PhraseHello:"s_PhraseHello.wav",s_PhraseNoNoNo:"s_PhraseNoNoNo.wav",s_PhraseOopsy:"s_PhraseOopsy.wav",s_PhraseOwOwOw:"s_PhraseOwOwOw.wav",s_PhraseOwwww:"s_PhraseOwwww.wav",s_PhraseUhOh:"s_PhraseUhOh.wav",s_Rage:"s_Rage.wav",s_Sadness:"s_Sadness.wav",s_Sadness2:"s_Sadness2.wav",s_Sadness3:"s_Sadness3.wav",s_Sadness4:"s_Sadness4.wav",s_Sadness5:"s_Sadness5.wav",s_Sadness6:"s_Sadness6.wav",s_Sadness7:"s_Sadness7.wav",s_Sleepy:"s_Sleepy.wav",s_Sleepy2:"s_Sleepy2.wav",s_Sleepy3:"s_Sleepy3.wav",s_Sleepy4:"s_Sleepy4.wav",s_SleepySnore:"s_SleepySnore.wav",s_SystemCameraShutter:"s_SystemCameraShutter.wav"},A9=n=>ZOe[n],J0={e_Sleeping:"e_Sleeping.jpg",e_SleepingZZZ:"e_SleepingZZZ.jpg",e_Contempt:"e_Contempt.jpg",e_ContentLeft:"e_ContentLeft.jpg",e_ContentRight:"e_ContentRight.jpg",e_Disoriented:"e_Disoriented.jpg",e_EcstacyHilarious:"e_EcstacyHilarious.jpg",e_EcstacyStarryEyed:"e_EcstacyStarryEyed.jpg",e_JoyGoofy:"e_JoyGoofy.jpg",e_JoyGoofy2:"e_JoyGoofy2.jpg",e_JoyGoofy3:"e_JoyGoofy3.jpg",e_Love:"e_Love.jpg",e_Rage:"e_Rage.jpg",e_Rage2:"e_Rage2.jpg",e_Rage3:"e_Rage3.jpg",e_Rage4:"e_Rage4.jpg",e_RemorseShame:"e_RemorseShame.jpg",eyes_acceptance:"eyes_acceptance.jpg",eyes_admiration:"eyes_admiration.jpg",eyes_amazement:"eyes_amazement.jpg",eyes_anger:"eyes_anger.jpg",eyes_annoyed:"eyes_annoyed.jpg",eyes_anticipation:"eyes_anticipation.png",eyes_apprehension:"eyes_apprehension.jpg",eyes_apprehension_1:"eyes_apprehension_1.jpg",eyes_boredom:"eyes_boredom.jpg",eyes_default:"eyes_default.jpg",eyes_disgust:"eyes_disgust.jpg",eyes_distraction:"eyes_distraction.gif",eyes_ecstasy_frame_1:"eyes_ecstasy_frame_1.jpg",eyes_ecstasy_frame_2:"eyes_ecstasy_frame_2.jpg",eyes_fear:"eyes_fear.jpg",eyes_grief:"eyes_grief.jpg",eyes_interest:"eyes_interest.jpg",eyes_joy:"eyes_joy.jpg",eyes_loathing:"eyes_loathing.jpg",eyes_pensiveness:"eyes_pensiveness.jpg",eyes_rage:"eyes_rage.jpg",eyes_sad:"eyes_sad.jpg",eyes_serenity:"eyes_serenity.jpg",eyes_surprise:"eyes_surprise.png",eyes_terror:"eyes_terror.jpg",eyes_trust:"eyes_trust.jpg",eyes_vigilance:"eyes_vigilance.jpg"},eLe=n=>J0[n],tLe=({blocks:n,tfs:e,items:t})=>{var ue;var r=e[Vi("Left")],s=e[Vi("Right")],o=e[Vi("Head")],l=e[Vi("Base")];let u={Left:{x:[r.rotation.x],y:[r.rotation.y],z:[r.rotation.z],w:[r.rotation.w]},Right:{x:[s.rotation.x],y:[s.rotation.y],z:[s.rotation.z],w:[s.rotation.w]},Head:{x:[o.rotation.x],y:[o.rotation.y],z:[o.rotation.z],w:[o.rotation.w]},Base:{position:{x:[l.position.x],y:[l.position.y],z:[l.position.z],angle:[0],distance:[0]},rotation:{x:[l.rotation.x],y:[l.rotation.y],z:[l.rotation.z],w:[l.rotation.w]}},Speech:[],Time:[0]},h=Object.keys(J0);for(let q=0;q<h.length;q++){let ae=h[q];u[ae]=[!!((ue=t[ae])!=null&&ue.hidden)]}const f=(q,ae,le)=>{if(q==="both")g(ae,le,ae,le);else if(le>0){var ce=q,ge=q==="Left"?"Right":"Left",$e={rotation:{x:u[ce].x[u[ce].x.length-1],y:u[ce].y[u[ce].y.length-1],z:u[ce].z[u[ce].z.length-1],w:u[ce].w[u[ce].w.length-1]}},K=dI($e.rotation),ie=2*ad*uI*Math.abs(K.y-ae),se=ie/(le/100*XO),fe={x:0,y:ae-KO,z:0},Se=1;if(fe.y<0&&K.y>0||fe.y>0&&K.y<0){let qe=(fe.y-K.y)/2,we=fe.y-qe;var Ue=sy(0,we*ad/180,0);u[ce].w.push(Ue._w),u[ce].x.push(Ue._x),u[ce].y.push(Ue._y),u[ce].z.push(Ue._z),u.Time.push(se/2),Se+=1}var ke=sy(fe.x,fe.y*ad/180,fe.z);u[ce].w.push(ke._w),u[ce].x.push(ke._x),u[ce].y.push(ke._y),u[ce].z.push(ke._z);for(let qe=0;qe<Se;qe++){let we=u[ge].w.length-1;u.Speech.push(""),u[ge].w.push(u[ge].w[we]),u[ge].x.push(u[ge].x[we]),u[ge].y.push(u[ge].y[we]),u[ge].z.push(u[ge].z[we]),u.Head.x.push(u.Head.x[we]),u.Head.y.push(u.Head.y[we]),u.Head.z.push(u.Head.z[we]),u.Head.w.push(u.Head.w[we]),u.Base.position.x.push(u.Base.position.x[we]),u.Base.position.y.push(u.Base.position.y[we]),u.Base.position.z.push(u.Base.position.z[we]),u.Base.position.distance.push(u.Base.position.distance[we]),u.Base.position.angle.push(u.Base.position.angle[we]),u.Base.rotation.w.push(u.Base.rotation.w[we]),u.Base.rotation.x.push(u.Base.rotation.x[we]),u.Base.rotation.y.push(u.Base.rotation.y[we]),u.Base.rotation.z.push(u.Base.rotation.z[we]);let Ze=Object.keys(J0);for(let et=0;et<Ze.length;et++){let ft=Ze[et];u[ft].push(u[ft][u[ft].length-1])}}Se>1?u.Time.push(se/2):u.Time.push(se)}},g=(q,ae,le,ce)=>{if(ae>0||ce>0){var ge={rotation:{x:u.Left.x[u.Left.x.length-1],y:u.Left.y[u.Left.y.length-1],z:u.Left.z[u.Left.z.length-1],w:u.Left.w[u.Left.w.length-1]}},$e={rotation:{x:u.Right.x[u.Right.x.length-1],y:u.Right.y[u.Right.y.length-1],z:u.Right.z[u.Right.z.length-1],w:u.Right.w[u.Right.w.length-1]}},K=dI(ge.rotation),ie=2*ad*uI*Math.abs(K.y-q),se=ie/(ae/100*XO),fe=dI($e.rotation),Se=2*ad*uI*Math.abs(fe.y-le),Ue=Se/(ce/100*XO),ke=ae===0?Ue:ce===0?se:Math.max(se,Ue),qe={x:0,y:q-KO,z:0},we=sy(qe.x,qe.y*ad/180,qe.z),Ze={x:0,y:le-KO,z:0},et=sy(Ze.x,Ze.y*ad/180,Ze.z);let Ge=1;if(qe.y<0&&K.y>0||qe.y>0&&K.y<0||Ze.y<0&&fe.y>0||Ze.y>0&&fe.y<0){let Ie=(qe.y-K.y)/2,He=(qe.y-K.y)/2,it=qe.y-Ie,st=Ze.y-He;var ft=sy(0,it*ad/180,0),at=sy(0,st*ad/180,0);ae>0?(u.Left.w.push(ft._w),u.Left.x.push(ft._x),u.Left.y.push(ft._y),u.Left.z.push(ft._z)):(u.Left.w.push(u.Left.w[u.Left.w.length-1]),u.Left.x.push(u.Left.x[u.Left.x.length-1]),u.Left.y.push(u.Left.y[u.Left.y.length-1]),u.Left.z.push(u.Left.z[u.Left.z.length-1])),ce>0?(u.Right.w.push(at._w),u.Right.x.push(at._x),u.Right.y.push(at._y),u.Right.z.push(at._z)):(u.Right.w.push(u.Right.w[u.Right.w.length-1]),u.Right.x.push(u.Right.x[u.Right.x.length-1]),u.Right.y.push(u.Right.y[u.Right.y.length-1]),u.Right.z.push(u.Right.z[u.Right.z.length-1])),u.Time.push(ke/2),Ge+=1}ae>0?(u.Left.w.push(we._w),u.Left.x.push(we._x),u.Left.y.push(we._y),u.Left.z.push(we._z)):(u.Left.w.push(u.Left.w[u.Left.w.length-1]),u.Left.x.push(u.Left.x[u.Left.x.length-1]),u.Left.y.push(u.Left.y[u.Left.y.length-1]),u.Left.z.push(u.Left.z[u.Left.z.length-1])),ce>0?(u.Right.w.push(et._w),u.Right.x.push(et._x),u.Right.y.push(et._y),u.Right.z.push(et._z)):(u.Right.w.push(u.Right.w[u.Right.w.length-1]),u.Right.x.push(u.Right.x[u.Right.x.length-1]),u.Right.y.push(u.Right.y[u.Right.y.length-1]),u.Right.z.push(u.Right.z[u.Right.z.length-1]));for(let Ie=0;Ie<Ge;Ie++){let He=u.Head.x.length-1;u.Speech.push(""),u.Head.x.push(u.Head.x[He]),u.Head.y.push(u.Head.y[He]),u.Head.z.push(u.Head.z[He]),u.Head.w.push(u.Head.w[He]),u.Base.position.x.push(u.Base.position.x[He]),u.Base.position.y.push(u.Base.position.y[He]),u.Base.position.z.push(u.Base.position.z[He]),u.Base.position.distance.push(u.Base.position.distance[He]),u.Base.position.angle.push(u.Base.position.angle[He]),u.Base.rotation.w.push(u.Base.rotation.w[He]),u.Base.rotation.x.push(u.Base.rotation.x[He]),u.Base.rotation.y.push(u.Base.rotation.y[He]),u.Base.rotation.z.push(u.Base.rotation.z[He]);let it=Object.keys(J0);for(let st=0;st<it.length;st++){let It=it[st];u[It].push(u[It][u[It].length-1])}}Ge>1?u.Time.push(ke/2):u.Time.push(ke)}},y=(q,ae,le,ce)=>{if(ce>0){var ge=sy(ae*ad/180,q*ad/180,le*ad/180);u.Head.w.push(ge._w),u.Head.x.push(ge._x),u.Head.y.push(ge._y),u.Head.z.push(ge._z);let $e=u.Left.w.length-1;u.Speech.push(""),u.Left.w.push(u.Left.w[$e]),u.Left.x.push(u.Left.x[$e]),u.Left.y.push(u.Left.y[$e]),u.Left.z.push(u.Left.z[$e]),u.Right.w.push(u.Right.w[$e]),u.Right.x.push(u.Right.x[$e]),u.Right.y.push(u.Right.y[$e]),u.Right.z.push(u.Right.z[$e]),u.Base.position.x.push(u.Base.position.x[$e]),u.Base.position.y.push(u.Base.position.y[$e]),u.Base.position.z.push(u.Base.position.z[$e]),u.Base.position.distance.push(u.Base.position.distance[$e]),u.Base.position.angle.push(u.Base.position.angle[$e]),u.Base.rotation.w.push(u.Base.rotation.w[$e]),u.Base.rotation.x.push(u.Base.rotation.x[$e]),u.Base.rotation.y.push(u.Base.rotation.y[$e]),u.Base.rotation.z.push(u.Base.rotation.z[$e]);let K=Object.keys(J0);for(let ie=0;ie<K.length;ie++){let se=K[ie];u[se].push(u[se][u[se].length-1])}u.Time.push(ce)}},b=(q,ae,le)=>{if(le>0){var ce={position:{x:u.Base.position.x[u.Base.position.x.length-1],y:u.Base.position.y[u.Base.position.y.length-1],z:u.Base.position.z[u.Base.position.z.length-1]},rotation:{x:u.Base.rotation.x[u.Base.rotation.x.length-1],y:u.Base.rotation.y[u.Base.rotation.y.length-1],z:u.Base.rotation.z[u.Base.rotation.z.length-1],w:u.Base.rotation.w[u.Base.rotation.w.length-1]}},ge=ae/100*Ele*le/lg,$e=q/100*wle*le/lg,K=new Bu(ce.rotation.x,ce.rotation.y,ce.rotation.z,ce.rotation.w),ie=hH(K);if(ge!==0){var se={x:0,y:0,z:ge};K=sy(se.x,se.y,se.z),K.multiply(new Bu(ce.rotation.x,ce.rotation.y,ce.rotation.z,ce.rotation.w))}let fe=ce.position.x,Se=ce.position.y,Ue=null;Ue=new zt(fe+Math.sin(ie-ge)*$e,Se-Math.cos(ie-ge)*$e,ce.position.z),u.Base.position.x.push(Ue.x),u.Base.position.y.push(Ue.y),u.Base.position.z.push(Ue.z),u.Base.position.angle.push(ge),u.Base.position.distance.push($e),u.Base.rotation.w.push(K._w),u.Base.rotation.x.push(K._x),u.Base.rotation.y.push(K._y),u.Base.rotation.z.push(K._z),u.Speech.push(""),u.Head.x.push(u.Head.x[u.Head.x.length-1]),u.Head.y.push(u.Head.y[u.Head.y.length-1]),u.Head.z.push(u.Head.z[u.Head.z.length-1]),u.Head.w.push(u.Head.w[u.Head.w.length-1]),u.Left.w.push(u.Left.w[u.Left.w.length-1]),u.Left.x.push(u.Left.x[u.Left.x.length-1]),u.Left.y.push(u.Left.y[u.Left.y.length-1]),u.Left.z.push(u.Left.z[u.Left.z.length-1]),u.Right.w.push(u.Right.w[u.Right.w.length-1]),u.Right.x.push(u.Right.x[u.Right.x.length-1]),u.Right.y.push(u.Right.y[u.Right.y.length-1]),u.Right.z.push(u.Right.z[u.Right.z.length-1]);let ke=Object.keys(J0);for(let qe=0;qe<ke.length;qe++){let we=ke[qe];u[we].push(u[we][u[we].length-1])}u.Time.push(le)}},S=(q,ae)=>{let le=Object.keys(J0);for(let ge=0;ge<le.length;ge++){let $e=le[ge];u[$e].push(q!==$e)}let ce=u.Head.x.length-1;u.Speech.push(""),u.Base.position.x.push(u.Base.position.x[ce]),u.Base.position.y.push(u.Base.position.y[ce]),u.Base.position.z.push(u.Base.position.z[ce]),u.Base.position.distance.push(u.Base.position.distance[ce]),u.Base.position.angle.push(u.Base.position.angle[ce]),u.Base.rotation.w.push(u.Base.rotation.w[ce]),u.Base.rotation.x.push(u.Base.rotation.x[ce]),u.Base.rotation.y.push(u.Base.rotation.y[ce]),u.Base.rotation.z.push(u.Base.rotation.z[ce]),u.Head.x.push(u.Head.x[ce]),u.Head.y.push(u.Head.y[ce]),u.Head.z.push(u.Head.z[ce]),u.Head.w.push(u.Head.w[ce]),u.Left.w.push(u.Left.w[ce]),u.Left.x.push(u.Left.x[ce]),u.Left.y.push(u.Left.y[ce]),u.Left.z.push(u.Left.z[ce]),u.Right.w.push(u.Right.w[ce]),u.Right.x.push(u.Right.x[ce]),u.Right.y.push(u.Right.y[ce]),u.Right.z.push(u.Right.z[ce]),u.Time.push(ae)},C=(q,ae)=>{let le=u.Head.x.length-1;u.Speech.push(q),u.Base.position.x.push(u.Base.position.x[le]),u.Base.position.y.push(u.Base.position.y[le]),u.Base.position.z.push(u.Base.position.z[le]),u.Base.position.distance.push(u.Base.position.distance[le]),u.Base.position.angle.push(u.Base.position.angle[le]),u.Base.rotation.w.push(u.Base.rotation.w[le]),u.Base.rotation.x.push(u.Base.rotation.x[le]),u.Base.rotation.y.push(u.Base.rotation.y[le]),u.Base.rotation.z.push(u.Base.rotation.z[le]),u.Head.x.push(u.Head.x[le]),u.Head.y.push(u.Head.y[le]),u.Head.z.push(u.Head.z[le]),u.Head.w.push(u.Head.w[le]),u.Left.w.push(u.Left.w[le]),u.Left.x.push(u.Left.x[le]),u.Left.y.push(u.Left.y[le]),u.Left.z.push(u.Left.z[le]),u.Right.w.push(u.Right.w[le]),u.Right.x.push(u.Right.x[le]),u.Right.y.push(u.Right.y[le]),u.Right.z.push(u.Right.z[le]);let ce=Object.keys(J0);for(let ge=0;ge<ce.length;ge++){let $e=ce[ge];u[$e].push(u[$e][le])}u.Time.push(ae)},M=q=>{let ae=u.Head.x.length-1;u.Speech.push(""),u.Base.position.x.push(u.Base.position.x[ae]),u.Base.position.y.push(u.Base.position.y[ae]),u.Base.position.z.push(u.Base.position.z[ae]),u.Base.position.distance.push(u.Base.position.distance[ae]),u.Base.position.angle.push(u.Base.position.angle[ae]),u.Base.rotation.w.push(u.Base.rotation.w[ae]),u.Base.rotation.x.push(u.Base.rotation.x[ae]),u.Base.rotation.y.push(u.Base.rotation.y[ae]),u.Base.rotation.z.push(u.Base.rotation.z[ae]),u.Head.x.push(u.Head.x[ae]),u.Head.y.push(u.Head.y[ae]),u.Head.z.push(u.Head.z[ae]),u.Head.w.push(u.Head.w[ae]),u.Left.w.push(u.Left.w[ae]),u.Left.x.push(u.Left.x[ae]),u.Left.y.push(u.Left.y[ae]),u.Left.z.push(u.Left.z[ae]),u.Right.w.push(u.Right.w[ae]),u.Right.x.push(u.Right.x[ae]),u.Right.y.push(u.Right.y[ae]),u.Right.z.push(u.Right.z[ae]);let le=Object.keys(J0);for(let ce=0;ce<le.length;ce++){let ge=le[ce];u[ge].push(u[ge][ae])}u.Time.push(q)},A=()=>{let q=JSON.parse(JSON.stringify(e)),ae=JSON.parse(JSON.stringify(e)),le=JSON.parse(JSON.stringify(t)),ce=JSON.parse(JSON.stringify(t)),ge=u.Time.length,$e=0,K=[],ie=[],se=[],fe=[],Se=[],Ue=[],ke=[],qe=[],we=[],Ze=[],et=[],ft=[],at=[],Ge=[],Ie=[],He=[],it=[],st=[],It=[],kt=[],vt=[],Mt=Object.keys(J0);for(let Ke=0;Ke<Mt.length;Ke++)vt.push([]);let Ct={};for(let Ke=1;Ke<ge;Ke++){let Qe=u.Time[Ke],Le=new Bu(u.Left.x[Ke],u.Left.y[Ke],u.Left.z[Ke],u.Left.w[Ke]),Q=new Bu(u.Right.x[Ke],u.Right.y[Ke],u.Right.z[Ke],u.Right.w[Ke]),te=new Bu(u.Head.x[Ke],u.Head.y[Ke],u.Head.z[Ke],u.Head.w[Ke]),me=new Bu(u.Base.rotation.x[Ke],u.Base.rotation.y[Ke],u.Base.rotation.z[Ke],u.Base.rotation.w[Ke]);new zt(u.Base.position.x[Ke],u.Base.position.y[Ke],u.Base.position.z[Ke]),Object.keys(Ct).length===0&&(Ct={x:u.Base.position.x[Ke-1],y:u.Base.position.y[Ke-1],z:u.Base.position.z[Ke-1]});let Re=u.Base.position.angle[Ke],Fe=u.Base.position.distance[Ke],bt=new zt(Ct.x,Ct.y,Ct.z);for(let ze=10;ze<Wb;ze+=10){K.push(Qe/lg*ze+$e);let Pt=Fe*ze/Wb,lt=Re*ze/Wb,Gt=new Bu(u.Left.x[Ke-1],u.Left.y[Ke-1],u.Left.z[Ke-1],u.Left.w[Ke-1]),Wt=new Bu(u.Right.x[Ke-1],u.Right.y[Ke-1],u.Right.z[Ke-1],u.Right.w[Ke-1]),bn=new Bu(u.Head.x[Ke-1],u.Head.y[Ke-1],u.Head.z[Ke-1],u.Head.w[Ke-1]),ar=new Bu(u.Base.rotation.x[Ke-1],u.Base.rotation.y[Ke-1],u.Base.rotation.z[Ke-1],u.Base.rotation.w[Ke-1]),cr=hH(ar);console.log(cr),bt=new zt(Ct.x+Pt*Math.cos(cr+lt),Ct.y+Pt*Math.sin(cr+lt),Ct.z),Gt.slerp(Le,ze/Wb),Wt.slerp(Q,ze/Wb),bn.slerp(te,ze/Wb),ar.slerp(me,ze/Wb),ie.push(Gt._w),se.push(Gt._x),fe.push(Gt._y),Se.push(Gt._z),Ue.push(Wt._w),ke.push(Wt._x),qe.push(Wt._y),we.push(Wt._z),Ze.push(bn._w),et.push(bn._x),ft.push(bn._y),at.push(bn._z),Ge.push(bt.x),Ie.push(bt.y),He.push(bt.z),it.push(ar._w),st.push(ar._x),It.push(ar._y),kt.push(ar._z);for(let oi=0;oi<Mt.length;oi++)vt[oi].push(u[Mt[oi]][Ke])}Ct={x:bt.x,y:bt.y,z:bt.z},$e+=Qe}let gt=new Bu(u.Left.x[ge-1],u.Left.y[ge-1],u.Left.z[ge-1],u.Left.w[ge-1]),Ee=new Bu(u.Right.x[ge-1],u.Right.y[ge-1],u.Right.z[ge-1],u.Right.w[ge-1]),re=new Bu(u.Head.x[ge-1],u.Head.y[ge-1],u.Head.z[ge-1],u.Head.w[ge-1]),Be=new Bu(u.Base.rotation.x[ge-1],u.Base.rotation.y[ge-1],u.Base.rotation.z[ge-1],u.Base.rotation.w[ge-1]),mt=new zt(Ct.x,Ct.y,Ct.z);K.push(1/0),ie.push(gt._w),se.push(gt._x),fe.push(gt._y),Se.push(gt._z),Ue.push(Ee._w),ke.push(Ee._x),qe.push(Ee._y),we.push(Ee._z),Ze.push(re._w),et.push(re._x),ft.push(re._y),at.push(re._z),Ge.push(mt.x),Ie.push(mt.y),He.push(mt.z),it.push(Be._w),st.push(Be._x),It.push(Be._y),kt.push(Be._z);for(let Ke=0;Ke<Mt.length;Ke++)vt[Ke].push(u[Mt[Ke]][ge-1]),le[Mt[Ke]].hidden=uh(K,vt[Ke]),ce[Mt[Ke]].hidden=u[Mt[Ke]][ge-1];q[Vi("Left")].rotation.w=uh(K,ie),q[Vi("Left")].rotation.x=uh(K,se),q[Vi("Left")].rotation.y=uh(K,fe),q[Vi("Left")].rotation.z=uh(K,Se),ae[Vi("Left")].rotation.w=gt._w,ae[Vi("Left")].rotation.x=gt._x,ae[Vi("Left")].rotation.y=gt._y,ae[Vi("Left")].rotation.z=gt._z;let yt={},wt=[];for(let Ke=0;Ke<u.Time.length;Ke++)wt.length===0?wt.push(u.Time[Ke]):wt.push(wt[Ke-1]+u.Time[Ke]);return wt[wt.length-1]=1/0,u.Speech.push(u.Speech[u.Speech.length-1]),yt.value=uh(wt,u.Speech),console.log(wt,u.Speech),q[Vi("Right")].rotation.w=uh(K,Ue),q[Vi("Right")].rotation.x=uh(K,ke),q[Vi("Right")].rotation.y=uh(K,qe),q[Vi("Right")].rotation.z=uh(K,we),ae[Vi("Right")].rotation.w=Ee._w,ae[Vi("Right")].rotation.x=Ee._x,ae[Vi("Right")].rotation.y=Ee._y,ae[Vi("Right")].rotation.z=Ee._z,q[Vi("Head")].rotation.w=uh(K,Ze),q[Vi("Head")].rotation.x=uh(K,et),q[Vi("Head")].rotation.y=uh(K,ft),q[Vi("Head")].rotation.z=uh(K,at),ae[Vi("Head")].rotation.w=re._w,ae[Vi("Head")].rotation.x=re._x,ae[Vi("Head")].rotation.y=re._y,ae[Vi("Head")].rotation.z=re._z,q[Vi("Base")].rotation.w=uh(K,it),q[Vi("Base")].rotation.x=uh(K,st),q[Vi("Base")].rotation.y=uh(K,It),q[Vi("Base")].rotation.z=uh(K,kt),q[Vi("Base")].position.x=uh(K,Ge),q[Vi("Base")].position.y=uh(K,Ie),q[Vi("Base")].position.z=uh(K,He),ae[Vi("Base")].rotation.w=Be._w,ae[Vi("Base")].rotation.x=Be._x,ae[Vi("Base")].rotation.y=Be._y,ae[Vi("Base")].rotation.z=Be._z,ae[Vi("Base")].position.x=mt.x,ae[Vi("Base")].position.y=mt.y,ae[Vi("Base")].position.z=mt.z,{newTfs:q,newEndingTfs:ae,newItems:le,newEndingItems:ce,speechObject:yt}},k=q=>Object.values(n).filter(ae=>ae.type===q)[0],O=q=>n[q],P=(q,ae)=>{const le=O(q);let ce=O(ae);if(z(le,le.type))for(z(ce,ce.type);ce.next;)ce=O(ce.next),z(ce,ce.type)},D=q=>q==="TRUE";function U(q,ae){return q=Math.ceil(q),ae=Math.floor(ae),Math.floor(Math.random()*(ae-q+1))+q}function H(q){if(q===2||q===3)return!0;if(q<=1||q%2===0||q%3===0)return!1;for(let ae=5;ae*ae<=q;ae+=6)if(q%ae===0||q%(ae+2)===0)return!1;return!0}function V(q){var ae;if(typeof q!="string"&&typeof q!="object")return q.shadow.fields.NUM;{let le=(ae=q==null?void 0:q.shadow)!=null&&ae.id?O(q.shadow.id):O(q);return z(le,le.type)}}const z=(q,ae)=>{var Ct,gt,Ee;switch(!0){case ae==="CustomIF":if(!q.inputs||!q.inputs.IF0||!q.inputs.DO0)throw new Error("err: controls_if not complete!");P(q.inputs.IF0,q.inputs.DO0);break;case ae==="logic_boolean":return D(q.fields.BOOL);case ae==="logic_compare":if(!q.inputs||!q.inputs.A||!q.inputs.B)throw new Error("err: logic_compare is not complete!");const re=q.fields.OP,Be=q.inputs.A,mt=q.inputs.B,yt=O(Be),wt=O(mt);if(re==="EQ")return z(yt,yt.type)==z(wt,wt.type);if(re==="NEQ")return z(yt,yt.type)!==z(wt,wt.type);if(re==="LT")return z(yt,yt.type)<z(wt,wt.type);if(re==="LTE")return z(yt,yt.type)<=z(wt,wt.type);if(re==="GT")return z(yt,yt.type)>z(wt,wt.type);if(re==="GTE")return z(yt,yt.type)>=z(wt,wt.type);case ae==="logic_operation":if(!q.inputs||!q.inputs.A||!q.inputs.B)throw new Error("err: logic_operation is not complete!");const Ke=q.fields.OP,Qe=q.inputs.A,Le=q.inputs.B,Q=O(Qe),te=O(Le);return Ke==="OR"?z(Q,Q.type)||z(te,te.type):z(Q,Q.type)&&z(te,te.type);case ae==="logic_negate":if(!q.inputs)throw new Error("err: logic_negate is not complete!");const me=O(q.inputs.BOOL);return!z(me,me.type);case ae==="logic_boolean":return!q.fields.BOOL!=="FALSE";case ae==="logic_null":return null;case ae==="logic_ternary":if(!q.inputs||!q.inputs.IF||!q.inputs.THEN||!q.inputs.ELSE)throw new Error("err: logic_ternary is not complete!");const Re=q.inputs.IF,Fe=q.inputs.THEN,bt=q.inputs.ELSE,ze=O(Re),Pt=O(Fe),lt=O(bt);return z(ze,ze.type)?z(Pt,Pt.type):z(lt,lt.type);case ae==="controls_repeat_ext":const Wt=V(q.inputs.TIMES);if(!q.inputs.DO)throw new Error("err: controls_repeat_ext is not complete!");let bn=O(q.inputs.DO);for(let Lr=0;Lr<Wt;Lr++){z(bn,bn.type);let Ar=bn;for(;Ar.next;)Ar=O(Ar.next),z(Ar,Ar.type)}return;case ae==="math_number":return q.fields.NUM;case ae=="BasicSlider":case ae=="ArmPositionSlider":case ae=="SpeedSlider":case ae=="TimeSlider":case ae=="HeadPitchSlider":case ae=="HeadRollSlider":case ae=="HeadYawSlider":return q.fields.FIELD_slider_value;case ae==="math_number_property":const ar=q.fields.PROPERTY,cr=V(q.inputs.NUMBER_TO_CHECK);if(ar==="EVEN")return cr%2===0;if(ar==="ODD")return cr%2===1;if(ar==="PRIME")return H(cr);if(ar==="WHOLE")return cr%1===0;if(ar==="POSITIVE")return cr>0;if(ar==="NEGATIVE")return cr<0;if(ar==="DIVISIBLE_BY"){if(!q.inputs||!q.inputs.DIVISOR)throw new Error("err: DIVISOR is not filled!");if(q.inputs.DIVISOR===0)throw new Error("Note that divisor cannot be 0!");return cr%q.inputs.DIVISOR===0}return;case ae==="math_random_int":const oi=V(q.inputs.FROM),Mr=V(q.inputs.TO);return U(oi,Mr);case ae==="colour_picker":return cS(q.fields.COLOUR);case ae==="colour_random":let _r=U(0,255),ne=U(0,255),Te=U(0,255);return{r:_r,g:ne,b:Te};case ae==="colour_rgb":const je=V(q.inputs.RED),ct=V(q.inputs.GREEN),Ht=V(q.inputs.BLUE);return{r:je,g:ct,b:Ht};case ae==="colour_blend":const nn=V(q.inputs.RATIO),kn=cS(q.inputs.COLOUR1.shadow.fields.COLOUR),De=cS(q.inputs.COLOUR2.shadow.fields.COLOUR),_t=kn.r*nn,Ot=kn.g*nn,St=kn.b*nn,Xt=De.r,Wn=De.g,ir=De.b,br=(Xt+_t)/(nn+1),Or=(Wn+Ot)/(nn+1),Ei=(ir+St)/(nn+1);return{r:br,g:Or,b:Ei};case ae==="ChangeLED":if(!q.inputs||!q.inputs.FIELD_ChangeLED)throw new Error("err: ChangeLED is not complete!");var le=O(q.inputs.FIELD_ChangeLED),ce=null;(Ct=le==null?void 0:le.fields)!=null&&Ct.COLOUR?ce=cS(le.fields.COLOUR):ce=z(le,le.type);var Ue={Red:ce.r,Green:ce.g,Blue:ce.b};return;case ae==="TransitionLED":if(!q.inputs||!q.inputs.COLOR1||!q.inputs.COLOR2)throw new Error("err: TransitionLED is not complete!");var ge=O(q.inputs.COLOR1),$e=O(q.inputs.COLOR2),K=null;(gt=ge==null?void 0:ge.fields)!=null&&gt.COLOUR?K=cS(ge.fields.COLOUR):K=z(ge,ge.type);var ie=null;(Ee=$e==null?void 0:$e.fields)!=null&&Ee.COLOUR?ie=cS($e.fields.COLOUR):ie=z($e,$e.type);var It=q.fields.FIELD_TransitionTime_TimeMs*lg,se=q.fields.TRANSITION_TYPE,Ue={Red:K.r,Green:K.g,Blue:K.b,Red2:ie.r,Green2:ie.g,Blue2:ie.b,TransitionType:se,TimeMS:It};return;case ae==="DisplayImage":if(!q.inputs||!q.inputs.FIELD_DisplayImage_Filename)throw new Error("err: DisplayImage is not complete!");var fe=O(q.inputs.FIELD_DisplayImage_Filename),Se=eLe(fe.type);S(fe.type,500);return;case ae==="PlayAudio":if(!q.inputs||!q.inputs.FIELD_PlayAudio_Filename)throw new Error("err: PlayAudio is not complete!");var fe=O(q.inputs.FIELD_PlayAudio_Filename),Se=A9(fe.type);return;case ae==="DisplayAnimation":if(!q.inputs||!q.inputs.FIELD_DisplayAnimation_Filename)throw new Error("err: DisplayAnimation is not complete!");var fe=O(q.inputs.FIELD_DisplayAnimation_Filename),Se=A9(fe.type),Ue={FileName:Se};readFile(Ue);return;case ae==="DisplayText":var Mt=q.fields.FIELD_DisplayText_Text;return;case ae==="TurnOnFlashlight":return;case ae==="TurnOffFlashlight":return;case ae==="WaitForSeconds":console.log(q),console.log("here");var It=V(q.inputs.FIELD_Duration)*lg;console.log(It),M(It);return;case ae==="MoveArm":var ke=q.fields.FIELD_MoveArm_Arm==="Right"?"Right":"Left",qe=V(q.fields.FIELD_MoveArm_Position),He=V(q.fields.FIELD_MoveArm_Velocity);f(ke,qe,He);return;case ae==="MoveArm2":var qe=V(q.fields.FIELD_MoveArm2_Position),He=V(q.fields.FIELD_MoveArm2_Velocity),ke="both";f(ke,qe,He);return;case ae==="MoveArm3":var ke=q.fields.FIELD_MoveArm_Arm==="Right"?"Right":"Left",qe=V(q.inputs.FIELD_MoveArm_Position),He=V(q.inputs.FIELD_MoveArm_Velocity);f(ke,qe,He);return;case ae==="MoveArms2":var we=V(q.inputs.FIELD_MoveArm_LeftPosition),Ze=V(q.inputs.FIELD_MoveArm_LeftVelocity),et=V(q.inputs.FIELD_MoveArm_RightPosition),ft=V(q.inputs.FIELD_MoveArm_RightVelocity);g(we,Ze,et,ft);return;case ae==="MoveHead":var at=q.fields.FIELD_MoveHead_Pitch==="D"?25:-40,It=2e3;y(at,0,0,It);return;case ae==="MoveHead3":var at,Ge,Ie;at=V(q.inputs.FIELD_MoveHead_Pitch),Ge=V(q.inputs.FIELD_MoveHead_Roll),Ie=V(q.inputs.FIELD_MoveHead_Yaw),It=V(q.inputs.FIELD_MoveHead_Time)*lg,y(at,Ge,Ie,It);return;case ae==="DriveTime":var st=q.fields.FIELD_DriveTime_Direction,He=parseInt(q.fields.FIELD_DriveTime_Velocity),It=parseInt(q.fields.FIELD_DriveTime_TimeMs)*lg,it=st==="F"?He:-He;b(it,0,It);return;case ae==="DriveTime2":var it=V(q.inputs.FIELD_DriveTime_Velocity),kt=V(q.inputs.FIELD_DriveTime_Angular),It=V(q.inputs.FIELD_DriveTime_TimeMs)*lg;b(it,kt,It);return;case ae==="Turn":var st=q.fields.FIELD_Turn_Direction,It=parseInt(q.fields.FIELD_Turn_Duration)*lg,kt=st==="L"?100:-100;b(0,kt,It);return;case ae==="Turn2":var st=q.fields.FIELD_Turn_Direction,It=parseInt(V(q.inputs.FIELD_Turn_Duration))*lg,kt=st==="L"?100:-100;b(0,kt,It);return;case ae=="Speak":var vt=O(q.inputs.FIELD_Speak_Text),Mt=vt.fields.TEXT;C(Mt,uH*Mt.split(" ").length*lg);return;case ae=="SpeakDefault":var Mt=q.fields.FIELD_SpeakDefault_Text;C(Mt,uH*Mt.split(" ").length*lg);return;default:return}};let oe=k("Start");for(;oe&&oe.next;)oe=O(oe.next),z(oe,oe.type);return A()};function nLe(n){const e=Bn(xi(H=>H.resetSim)),t=Bn(xi(H=>H.toggleSimOnly)),r=Bn(xi(H=>H.isConnected)),s=Bn(xi(H=>H.ip)),o=Bn(xi(H=>H.getBlocks)),l=Bn(xi(H=>H.getEndingItems)),u=Bn(xi(H=>H.clock)),h=Bn(xi(H=>H.mistyImageList)),f=Bn(xi(H=>H.mistyAudioList)),g=Bn(xi(H=>H.simOnly)),y=Bn(xi(H=>H.endingTfs)),b=Bn(xi(H=>H.setAnimationFrames)),S=Bn(xi(H=>H.setHighlightBlocks)),C=Bn(xi(H=>H.workerThread)),M=Bn(xi(H=>H.setWorkerThread)),A=Bn(xi(H=>H.llmMode));function k(H,V){s&&!g&&r&&fetch(`http://${s}/api/${H}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)})}const O=async()=>{Ma("Click Run Code button"),u.reset_elapsed(),C&&(C.terminate(),M(null));const H=`import ${JSON.stringify(new URL(qOe,import.meta.url))}`,V=new Blob([H],{type:"application/javascript"}),z=URL.createObjectURL(V);let Z=new Worker(z,{type:"module"});Z.onmessage=function(ce){console.log("Message received from worker "+ce.data),M(null)},Z.onerror=function(ce){console.log(ce);const $e=/id: (.+)/.exec(ce.message);if($e){S($e[1]),P();return}else console.log("ID not found in error message.");URL.revokeObjectURL(z)},Z.postMessage({blocks:o(),mistyAudioList:f,mistyImageList:h,tfs:y,ip:s,runOnRobot:!g}),M(Z);let{newTfs:oe,newEndingTfs:ue,newItems:q,newEndingItems:ae,speechObject:le}=tLe({blocks:o(),tfs:y,items:l()});b(oe,ue,q,ae,le)},P=()=>{C&&(C.terminate(),M(null),S(""),k("halt",{})),Ma("Click Stop Code button")},D=()=>{k("arms/set",{LeftArmPosition:90,RightArmPosition:90,LeftArmVelocity:100,RightArmVelocity:100,Units:"Degrees"}),k("head",{Pitch:0,Yaw:0,Roll:0,Duration:1,Units:"Degrees"}),k("images/display",{FileName:"e_DefaultContent.jpg",Alpha:1}),k("text/display",{Text:""}),k("led",{Red:100,Green:70,Blue:160}),e()};let U=A?{top:"10px"}:{bottom:"0px"};return Ae.jsxs(Nw,{style:{position:"absolute",padding:"0px",left:"10px",...U},children:[Ae.jsxs(KH,{style:{paddingLeft:"0px",paddingRight:"0px"},children:[!C&&Ae.jsx(bI,{variant:"contained","aria-label":"play",style:{backgroundColor:"#FAFAFA",marginBottom:"5px"},onClick:O,id:"runButton",children:Ae.jsx(Lee,{})}),C&&Ae.jsx(bI,{variant:"contained","aria-label":"play",style:{backgroundColor:"#FAFAFA",marginBottom:"5px"},onClick:P,id:"stopButton",children:Ae.jsx(Nee,{})}),Ae.jsx(bI,{variant:"contained","aria-label":"restart",style:{backgroundColor:"#FAFAFA",marginLeft:"5px",marginBottom:"5px"},onClick:D,children:Ae.jsx(Oee,{})})]}),r&&Ae.jsx(KH,{style:{backgroundColor:"#FAFAFA",borderRadius:"5px",marginBottom:"5px",paddingLeft:"10px",paddingRight:"0px"},children:Ae.jsx(XK,{children:Ae.jsx(YK,{control:Ae.jsx(yge,{onChange:H=>t(H.target.checked)}),label:"Sim only"})})})]})}var li="cs",Dee={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",l=0;l<arguments.length;l++){var u=arguments[l];u&&(o=s(o,r(u)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var u in o)e.call(o,u)&&o[u]&&(l=s(l,u));return l}function s(o,l){return l?o?o+" "+l:o+l:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(Dee);var rLe=Dee.exports;const Ps=Jy(rLe);var Pee=["available","unavailable","away","dnd","invisible","eager"],Bee=["xs","sm","md","lg","fluid"];function sC(n){"@babel/helpers - typeof";return sC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sC(n)}var iLe=["status","size","className","name","selected","children"];function lB(){return lB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lB.apply(this,arguments)}function I9(n,e,t){return e=sLe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sLe(n){var e=oLe(n,"string");return sC(e)=="symbol"?e:String(e)}function oLe(n,e){if(sC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(sC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function aLe(n,e){if(n==null)return{};var t=lLe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function lLe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Fee=function(e){var t=e.status,r=e.size,s=r===void 0?"md":r,o=e.className,l=e.name,u=e.selected,h=e.children,f=aLe(e,iLe),g="".concat(li,"-status"),y=Tt.createElement("div",{className:"".concat(g,"__bullet")}),b=l||h;return Tt.createElement("div",lB({},f,{"aria-selected":u===!0?"":null,className:Ps(g,"".concat(g,"--").concat(s),"".concat(g,"--").concat(t),I9({},"".concat(g,"--selected"),u),I9({},"".concat(g,"--named"),b),o)}),y,b&&Tt.createElement("div",{className:"".concat(g,"__name")},l||h))};function oC(n){"@babel/helpers - typeof";return oC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oC(n)}var uLe=["name","src","size","status","className","active","children"];function uB(){return uB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},uB.apply(this,arguments)}function cLe(n,e,t){return e=hLe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hLe(n){var e=dLe(n,"string");return oC(e)=="symbol"?e:String(e)}function dLe(n,e){if(oC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(oC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fLe(n,e){if(n==null)return{};var t=pLe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function pLe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function mLe(n,e){var t=n.name,r=t===void 0?"":t,s=n.src,o=s===void 0?"":s,l=n.size,u=l===void 0?"md":l,h=n.status,f=n.className,g=n.active,y=g===void 0?!1:g,b=n.children,S=fLe(n,uLe),C="".concat(li,"-avatar"),M=typeof u<"u"?" ".concat(C,"--").concat(u):"",A=de.useRef();return de.useImperativeHandle(e,function(){return{focus:function(){return A.current.focus()}}}),Tt.createElement("div",uB({ref:A},S,{className:Ps("".concat(C).concat(M),cLe({},"".concat(C,"--active"),y),f)}),b||Tt.createElement(Tt.Fragment,null,Tt.createElement("img",{src:o,alt:r}),typeof h=="string"&&Tt.createElement(Fee,{status:h,size:u})," "))}var GC=de.forwardRef(mLe);GC.displayName="Avatar";GC.propTypes={children:Qt.node,name:Qt.string,src:Qt.string,size:Qt.oneOf(Bee),status:Qt.oneOf(Pee),active:Qt.bool,className:Qt.string};function R9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function VA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?R9(Object(t),!0).forEach(function(r){gLe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):R9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function gLe(n,e,t){return e=vLe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vLe(n){var e=_Le(n,"string");return Ky(e)=="symbol"?e:String(e)}function _Le(n,e){if(Ky(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Ky(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ky(n){"@babel/helpers - typeof";return Ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ky(n)}var NI=function(){},yLe=function(e){return e==null||Array.isArray(e)&&e.length===0},WC=function(e,t){var r=[],s=t.map(function(o){return o.displayName||o.name});return Tt.Children.toArray(e).forEach(function(o){var l=t.indexOf(o.type);if(l!==-1)r[l]=o;else{var u,h,f,g=(u=o==null||(h=o.props)===null||h===void 0?void 0:h.as)!==null&&u!==void 0?u:o==null||(f=o.props)===null||f===void 0?void 0:f.is,y=Ky(g);if(y==="function"){var b=t.indexOf(g);b!==-1&&(r[b]=Tt.cloneElement(o,VA(VA({},o.props),{},{as:null})))}else if(y==="object"){var S=g.name||g.displayName,C=s.indexOf(S);C!==-1&&(r[C]=Tt.cloneElement(o,VA(VA({},o.props),{},{as:null})))}else if(y==="string"){var M=s.indexOf(g);M!==-1&&(r[M]=o)}}}),r},zee=function(e){if(typeof e=="string")return e;if("type"in e){var t=Ky(e.type);if(t==="function"||t==="object"){if("displayName"in e.type)return e.type.displayName;if("name"in e.type)return e.type.name}else if(t==="string")return e.type;return"undefined"}return"undefined"},Uee=function(e){return function(t,r,s){var o=e.map(function(g){return g.name||g.displayName}),l=Tt.Children.toArray(t[r]).find(function(g){if(typeof g=="string"&&g.trim().length===0)return!1;if(e.indexOf(g.type)===-1){var y,b,S=(g==null||(y=g.props)===null||y===void 0?void 0:y.as)||(g==null||(b=g.props)===null||b===void 0?void 0:b.is),C=Ky(S);if(C==="function")return e.indexOf(S)===-1;if(C==="object"){var M=S.name||S.displayName;return o.indexOf(M)===-1}else return C==="string"?o.indexOf(S)===-1:!0}});if(typeof l<"u"){var u=zee(l),h=e.map(function(g){return g.name||g.displayName}).join(", "),f='"'.concat(u,'" is not a valid child for ').concat(s,". Allowed types: ").concat(h);return new Error(f)}}},bLe=["children","size","className","max","activeIndex","hoverToFront"];function cB(){return cB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cB.apply(this,arguments)}function TLe(n,e){if(n==null)return{};var t=SLe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function SLe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Hee=function(e){var t=e.children,r=e.size,s=r===void 0?"md":r,o=e.className,l=e.max,u=e.activeIndex,h=e.hoverToFront,f=TLe(e,bLe),g="".concat(li,"-avatar-group"),y=typeof l=="number"&&Tt.Children.count(t)>l?Tt.Children.toArray(t).reverse().slice(0,l):Tt.Children.toArray(t).reverse(),b=typeof u=="number"?y.length-u-1:void 0;return Tt.createElement("div",cB({},f,{className:Ps(g,"".concat(g,"--").concat(s),o)}),y.map(function(S,C){var M=typeof b=="number"?{active:b===C}:{};return h===!0&&(M.className=Ps("".concat(li,"-avatar--active-on-hover"),S.props.className)),Tt.cloneElement(S,M)}))};Hee.displayName="AvatarGroup";var wLe=["children","className","icon","border","labelPosition"];function hB(){return hB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hB.apply(this,arguments)}function ELe(n,e){if(n==null)return{};var t=xLe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function xLe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var sz=function(e){var t=e.children,r=t===void 0?void 0:t,s=e.className,o=s===void 0?"":s,l=e.icon,u=l===void 0?void 0:l,h=e.border,f=h===void 0?!1:h,g=e.labelPosition,y=g===void 0?void 0:g,b=ELe(e,wLe),S="".concat(li,"-button"),C=typeof y<"u"?y:"right",M=Tt.Children.count(r)>0?"".concat(S,"--").concat(C):"",A=f===!0?"".concat(S,"--border"):"";return Tt.createElement("button",hB({},b,{className:Ps(S,M,A,o)}),C==="left"&&r,u,C==="right"&&r)};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */function a$(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a$=function(e){return typeof e}:a$=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a$(n)}function $Le(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function k9(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function CLe(n,e,t){return e&&k9(n.prototype,e),t&&k9(n,t),n}function MLe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),r.forEach(function(s){MLe(n,s,t[s])})}return n}function Gee(n,e){return ALe(n)||ILe(n,e)||RLe()}function ALe(n){if(Array.isArray(n))return n}function ILe(n,e){var t=[],r=!0,s=!1,o=void 0;try{for(var l=n[Symbol.iterator](),u;!(r=(u=l.next()).done)&&(t.push(u.value),!(e&&t.length===e));r=!0);}catch(h){s=!0,o=h}finally{try{!r&&l.return!=null&&l.return()}finally{if(s)throw o}}return t}function RLe(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var O9=function(){},oz={},Wee={},kLe=null,Vee={mark:O9,measure:O9};try{typeof window<"u"&&(oz=window),typeof document<"u"&&(Wee=document),typeof MutationObserver<"u"&&(kLe=MutationObserver),typeof performance<"u"&&(Vee=performance)}catch{}var OLe=oz.navigator||{},L9=OLe.userAgent,N9=L9===void 0?"":L9,R2=oz,dp=Wee,jA=Vee;R2.document;var az=!!dp.documentElement&&!!dp.head&&typeof dp.addEventListener=="function"&&typeof dp.createElement=="function";~N9.indexOf("MSIE")||~N9.indexOf("Trident/");var $_="___FONT_AWESOME___",jee="fa",Yee="svg-inline--fa",LLe="data-fa-i2svg";(function(){try{return!0}catch{return!1}})();var RN={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Xee=R2.FontAwesomeConfig||{};function NLe(n){var e=dp.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}function DLe(n){return n===""?!0:n==="false"?!1:n==="true"?!0:n}if(dp&&typeof dp.querySelector=="function"){var PLe=[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];PLe.forEach(function(n){var e=Gee(n,2),t=e[0],r=e[1],s=DLe(NLe(t));s!=null&&(Xee[r]=s)})}var BLe={familyPrefix:jee,replacementClass:Yee,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},dB=Jo({},BLe,Xee);dB.autoReplaceSvg||(dB.observeMutations=!1);var Fm=Jo({},dB);R2.FontAwesomeConfig=Fm;var C_=R2||{};C_[$_]||(C_[$_]={});C_[$_].styles||(C_[$_].styles={});C_[$_].hooks||(C_[$_].hooks={});C_[$_].shims||(C_[$_].shims=[]);var av=C_[$_],FLe=[],zLe=function n(){dp.removeEventListener("DOMContentLoaded",n),fB=1,FLe.map(function(e){return e()})},fB=!1;az&&(fB=(dp.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(dp.readyState),fB||dp.addEventListener("DOMContentLoaded",zLe));var lz="pending",Kee="settled",NR="fulfilled",DR="rejected",ULe=function(){},Jee=typeof global<"u"&&typeof global.process<"u"&&typeof global.process.emit=="function",HLe=typeof setImmediate>"u"?setTimeout:setImmediate,Fx=[],pB;function GLe(){for(var n=0;n<Fx.length;n++)Fx[n][0](Fx[n][1]);Fx=[],pB=!1}function PR(n,e){Fx.push([n,e]),pB||(pB=!0,HLe(GLe,0))}function WLe(n,e){function t(s){uz(e,s)}function r(s){aC(e,s)}try{n(t,r)}catch(s){r(s)}}function qee(n){var e=n.owner,t=e._state,r=e._data,s=n[t],o=n.then;if(typeof s=="function"){t=NR;try{r=s(r)}catch(l){aC(o,l)}}Qee(o,r)||(t===NR&&uz(o,r),t===DR&&aC(o,r))}function Qee(n,e){var t;try{if(n===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&(typeof e=="function"||a$(e)==="object")){var r=e.then;if(typeof r=="function")return r.call(e,function(s){t||(t=!0,e===s?Zee(n,s):uz(n,s))},function(s){t||(t=!0,aC(n,s))}),!0}}catch(s){return t||aC(n,s),!0}return!1}function uz(n,e){(n===e||!Qee(n,e))&&Zee(n,e)}function Zee(n,e){n._state===lz&&(n._state=Kee,n._data=e,PR(VLe,n))}function aC(n,e){n._state===lz&&(n._state=Kee,n._data=e,PR(jLe,n))}function ete(n){n._then=n._then.forEach(qee)}function VLe(n){n._state=NR,ete(n)}function jLe(n){n._state=DR,ete(n),!n._handled&&Jee&&global.process.emit("unhandledRejection",n._data,n)}function YLe(n){global.process.emit("rejectionHandled",n)}function Eg(n){if(typeof n!="function")throw new TypeError("Promise resolver "+n+" is not a function");if(!(this instanceof Eg))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],WLe(n,this)}Eg.prototype={constructor:Eg,_state:lz,_then:null,_data:void 0,_handled:!1,then:function(e,t){var r={owner:this,then:new this.constructor(ULe),fulfilled:e,rejected:t};return(t||e)&&!this._handled&&(this._handled=!0,this._state===DR&&Jee&&PR(YLe,this)),this._state===NR||this._state===DR?PR(qee,r):this._then.push(r),r.then},catch:function(e){return this.then(null,e)}};Eg.all=function(n){if(!Array.isArray(n))throw new TypeError("You must pass an array to Promise.all().");return new Eg(function(e,t){var r=[],s=0;function o(h){return s++,function(f){r[h]=f,--s||e(r)}}for(var l=0,u;l<n.length;l++)u=n[l],u&&typeof u.then=="function"?u.then(o(l),t):r[l]=u;s||e(r)})};Eg.race=function(n){if(!Array.isArray(n))throw new TypeError("You must pass an array to Promise.race().");return new Eg(function(e,t){for(var r=0,s;r<n.length;r++)s=n[r],s&&typeof s.then=="function"?s.then(e,t):e(s)})};Eg.resolve=function(n){return n&&a$(n)==="object"&&n.constructor===Eg?n:new Eg(function(e){e(n)})};Eg.reject=function(n){return new Eg(function(e,t){t(n)})};var aw={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function XLe(n){if(!(!n||!az)){var e=dp.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=dp.head.childNodes,r=null,s=t.length-1;s>-1;s--){var o=t[s],l=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(l)>-1&&(r=o)}return dp.head.insertBefore(e,r),n}}var KLe="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function BR(){for(var n=12,e="";n-- >0;)e+=KLe[Math.random()*62|0];return e}function tte(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function JLe(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(tte(n[t]),'" ')},"").trim()}function nte(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t],";")},"")}function rte(n){return n.size!==aw.size||n.x!==aw.x||n.y!==aw.y||n.rotate!==aw.rotate||n.flipX||n.flipY}function ite(n){var e=n.transform,t=n.containerWidth,r=n.iconWidth,s={transform:"translate(".concat(t/2," 256)")},o="translate(".concat(e.x*32,", ").concat(e.y*32,") "),l="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),u="rotate(".concat(e.rotate," 0 0)"),h={transform:"".concat(o," ").concat(l," ").concat(u)},f={transform:"translate(".concat(r/2*-1," -256)")};return{outer:s,inner:h,path:f}}var kN={x:0,y:0,width:"100%",height:"100%"};function D9(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}function qLe(n){return n.tag==="g"?n.children:[n]}function QLe(n){var e=n.children,t=n.attributes,r=n.main,s=n.mask,o=n.maskId,l=n.transform,u=r.width,h=r.icon,f=s.width,g=s.icon,y=ite({transform:l,containerWidth:f,iconWidth:u}),b={tag:"rect",attributes:Jo({},kN,{fill:"white"})},S=h.children?{children:h.children.map(D9)}:{},C={tag:"g",attributes:Jo({},y.inner),children:[D9(Jo({tag:h.tag,attributes:Jo({},h.attributes,y.path)},S))]},M={tag:"g",attributes:Jo({},y.outer),children:[C]},A="mask-".concat(o||BR()),k="clip-".concat(o||BR()),O={tag:"mask",attributes:Jo({},kN,{id:A,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[b,M]},P={tag:"defs",children:[{tag:"clipPath",attributes:{id:k},children:qLe(g)},O]};return e.push(P,{tag:"rect",attributes:Jo({fill:"currentColor","clip-path":"url(#".concat(k,")"),mask:"url(#".concat(A,")")},kN)}),{children:e,attributes:t}}function ZLe(n){var e=n.children,t=n.attributes,r=n.main,s=n.transform,o=n.styles,l=nte(o);if(l.length>0&&(t.style=l),rte(s)){var u=ite({transform:s,containerWidth:r.width,iconWidth:r.width});e.push({tag:"g",attributes:Jo({},u.outer),children:[{tag:"g",attributes:Jo({},u.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:Jo({},r.icon.attributes,u.path)}]}]})}else e.push(r.icon);return{children:e,attributes:t}}function eNe(n){var e=n.children,t=n.main,r=n.mask,s=n.attributes,o=n.styles,l=n.transform;if(rte(l)&&t.found&&!r.found){var u=t.width,h=t.height,f={x:u/h/2,y:.5};s.style=nte(Jo({},o,{"transform-origin":"".concat(f.x+l.x/16,"em ").concat(f.y+l.y/16,"em")}))}return[{tag:"svg",attributes:s,children:e}]}function tNe(n){var e=n.prefix,t=n.iconName,r=n.children,s=n.attributes,o=n.symbol,l=o===!0?"".concat(e,"-").concat(Fm.familyPrefix,"-").concat(t):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Jo({},s,{id:l}),children:r}]}]}function nNe(n){var e=n.icons,t=e.main,r=e.mask,s=n.prefix,o=n.iconName,l=n.transform,u=n.symbol,h=n.title,f=n.maskId,g=n.titleId,y=n.extra,b=n.watchable,S=b===void 0?!1:b,C=r.found?r:t,M=C.width,A=C.height,k=s==="fak",O=k?"":"fa-w-".concat(Math.ceil(M/A*16)),P=[Fm.replacementClass,o?"".concat(Fm.familyPrefix,"-").concat(o):"",O].filter(function(oe){return y.classes.indexOf(oe)===-1}).filter(function(oe){return oe!==""||!!oe}).concat(y.classes).join(" "),D={children:[],attributes:Jo({},y.attributes,{"data-prefix":s,"data-icon":o,class:P,role:y.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(M," ").concat(A)})},U=k&&!~y.classes.indexOf("fa-fw")?{width:"".concat(M/A*16*.0625,"em")}:{};S&&(D.attributes[LLe]=""),h&&D.children.push({tag:"title",attributes:{id:D.attributes["aria-labelledby"]||"title-".concat(g||BR())},children:[h]});var H=Jo({},D,{prefix:s,iconName:o,main:t,mask:r,maskId:f,transform:l,symbol:u,styles:Jo({},U,y.styles)}),V=r.found&&t.found?QLe(H):ZLe(H),z=V.children,Z=V.attributes;return H.children=z,H.attributes=Z,u?tNe(H):eNe(H)}var P9=function(){};Fm.measurePerformance&&jA&&jA.mark&&jA.measure;var rNe=function(e,t){return function(r,s,o,l){return e.call(t,r,s,o,l)}},ON=function(e,t,r,s){var o=Object.keys(e),l=o.length,u=s!==void 0?rNe(t,s):t,h,f,g;for(r===void 0?(h=1,g=e[o[0]]):(h=0,g=r);h<l;h++)f=o[h],g=u(g,e[f],f,e);return g};function ste(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=t.skipHooks,s=r===void 0?!1:r,o=Object.keys(e).reduce(function(l,u){var h=e[u],f=!!h.icon;return f?l[h.iconName]=h.icon:l[u]=h,l},{});typeof av.hooks.addPack=="function"&&!s?av.hooks.addPack(n,o):av.styles[n]=Jo({},av.styles[n]||{},o),n==="fas"&&ste("fa",e)}var B9=av.styles,iNe=av.shims,ote=function(){var e=function(s){return ON(B9,function(o,l,u){return o[u]=ON(l,s,{}),o},{})};e(function(r,s,o){return s[3]&&(r[s[3]]=o),r}),e(function(r,s,o){var l=s[2];return r[o]=o,l.forEach(function(u){r[u]=o}),r});var t="far"in B9;ON(iNe,function(r,s){var o=s[0],l=s[1],u=s[2];return l==="far"&&!t&&(l="fas"),r[o]={prefix:l,iconName:u},r},{})};ote();av.styles;function F9(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}function ate(n){var e=n.tag,t=n.attributes,r=t===void 0?{}:t,s=n.children,o=s===void 0?[]:s;return typeof n=="string"?tte(n):"<".concat(e," ").concat(JLe(r),">").concat(o.map(ate).join(""),"</").concat(e,">")}var sNe=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce(function(r,s){var o=s.toLowerCase().split("-"),l=o[0],u=o.slice(1).join("-");if(l&&u==="h")return r.flipX=!0,r;if(l&&u==="v")return r.flipY=!0,r;if(u=parseFloat(u),isNaN(u))return r;switch(l){case"grow":r.size=r.size+u;break;case"shrink":r.size=r.size-u;break;case"left":r.x=r.x-u;break;case"right":r.x=r.x+u;break;case"up":r.y=r.y-u;break;case"down":r.y=r.y+u;break;case"rotate":r.rotate=r.rotate+u;break}return r},t):t};function mB(n){this.name="MissingIcon",this.message=n||"Icon unavailable",this.stack=new Error().stack}mB.prototype=Object.create(Error.prototype);mB.prototype.constructor=mB;var k2={fill:"currentColor"},lte={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};Jo({},k2,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"});var cz=Jo({},lte,{attributeName:"opacity"});Jo({},k2,{cx:"256",cy:"364",r:"28"}),Jo({},lte,{attributeName:"r",values:"28;14;28;28;14;28;"}),Jo({},cz,{values:"1;0;1;1;0;1;"});Jo({},k2,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),Jo({},cz,{values:"1;0;0;0;0;1;"});Jo({},k2,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),Jo({},cz,{values:"0;0;1;1;0;0;"});av.styles;function z9(n){var e=n[0],t=n[1],r=n.slice(4),s=Gee(r,1),o=s[0],l=null;return Array.isArray(o)?l={tag:"g",attributes:{class:"".concat(Fm.familyPrefix,"-").concat(RN.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Fm.familyPrefix,"-").concat(RN.SECONDARY),fill:"currentColor",d:o[0]}},{tag:"path",attributes:{class:"".concat(Fm.familyPrefix,"-").concat(RN.PRIMARY),fill:"currentColor",d:o[1]}}]}:l={tag:"path",attributes:{fill:"currentColor",d:o}},{found:!0,width:e,height:t,icon:l}}av.styles;var oNe=`svg:not(:root).svg-inline--fa {
  overflow: visible;
}

.svg-inline--fa {
  display: inline-block;
  font-size: inherit;
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.225em;
}
.svg-inline--fa.fa-w-1 {
  width: 0.0625em;
}
.svg-inline--fa.fa-w-2 {
  width: 0.125em;
}
.svg-inline--fa.fa-w-3 {
  width: 0.1875em;
}
.svg-inline--fa.fa-w-4 {
  width: 0.25em;
}
.svg-inline--fa.fa-w-5 {
  width: 0.3125em;
}
.svg-inline--fa.fa-w-6 {
  width: 0.375em;
}
.svg-inline--fa.fa-w-7 {
  width: 0.4375em;
}
.svg-inline--fa.fa-w-8 {
  width: 0.5em;
}
.svg-inline--fa.fa-w-9 {
  width: 0.5625em;
}
.svg-inline--fa.fa-w-10 {
  width: 0.625em;
}
.svg-inline--fa.fa-w-11 {
  width: 0.6875em;
}
.svg-inline--fa.fa-w-12 {
  width: 0.75em;
}
.svg-inline--fa.fa-w-13 {
  width: 0.8125em;
}
.svg-inline--fa.fa-w-14 {
  width: 0.875em;
}
.svg-inline--fa.fa-w-15 {
  width: 0.9375em;
}
.svg-inline--fa.fa-w-16 {
  width: 1em;
}
.svg-inline--fa.fa-w-17 {
  width: 1.0625em;
}
.svg-inline--fa.fa-w-18 {
  width: 1.125em;
}
.svg-inline--fa.fa-w-19 {
  width: 1.1875em;
}
.svg-inline--fa.fa-w-20 {
  width: 1.25em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-border {
  height: 1.5em;
}
.svg-inline--fa.fa-li {
  width: 2em;
}
.svg-inline--fa.fa-fw {
  width: 1.25em;
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: #ff253a;
  border-radius: 1em;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  color: #fff;
  height: 1.5em;
  line-height: 1;
  max-width: 5em;
  min-width: 1.5em;
  overflow: hidden;
  padding: 0.25em;
  right: 0;
  text-overflow: ellipsis;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: 0;
  right: 0;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: 0;
  left: 0;
  right: auto;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  right: 0;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: 0;
  right: auto;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-lg {
  font-size: 1.3333333333em;
  line-height: 0.75em;
  vertical-align: -0.0667em;
}

.fa-xs {
  font-size: 0.75em;
}

.fa-sm {
  font-size: 0.875em;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: 2.5em;
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: -2em;
  position: absolute;
  text-align: center;
  width: 2em;
  line-height: inherit;
}

.fa-border {
  border: solid 0.08em #eee;
  border-radius: 0.1em;
  padding: 0.2em 0.25em 0.15em;
}

.fa-pull-left {
  float: left;
}

.fa-pull-right {
  float: right;
}

.fa.fa-pull-left,
.fas.fa-pull-left,
.far.fa-pull-left,
.fal.fa-pull-left,
.fab.fa-pull-left {
  margin-right: 0.3em;
}
.fa.fa-pull-right,
.fas.fa-pull-right,
.far.fa-pull-right,
.fal.fa-pull-right,
.fab.fa-pull-right {
  margin-left: 0.3em;
}

.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
          animation: fa-spin 2s infinite linear;
}

.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
          animation: fa-spin 1s infinite steps(8);
}

@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}

@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical,
:root .fa-flip-both {
  -webkit-filter: none;
          filter: none;
}

.fa-stack {
  display: inline-block;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: #fff;
}

.sr-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.sr-only-focusable:active, .sr-only-focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse {
  color: #fff;
}`;function aNe(){var n=jee,e=Yee,t=Fm.familyPrefix,r=Fm.replacementClass,s=oNe;if(t!==n||r!==e){var o=new RegExp("\\.".concat(n,"\\-"),"g"),l=new RegExp("\\--".concat(n,"\\-"),"g"),u=new RegExp("\\.".concat(e),"g");s=s.replace(o,".".concat(t,"-")).replace(l,"--".concat(t,"-")).replace(u,".".concat(r))}return s}var lNe=function(){function n(){$Le(this,n),this.definitions={}}return CLe(n,[{key:"add",value:function(){for(var t=this,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];var l=s.reduce(this._pullDefinitions,{});Object.keys(l).forEach(function(u){t.definitions[u]=Jo({},t.definitions[u]||{},l[u]),ste(u,l[u]),ote()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,r){var s=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(s).map(function(o){var l=s[o],u=l.prefix,h=l.iconName,f=l.icon;t[u]||(t[u]={}),t[u][h]=f}),t}}]),n}();function uNe(){Fm.autoAddCss&&!H9&&(XLe(aNe()),H9=!0)}function cNe(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(r){return ate(r)})}}),Object.defineProperty(n,"node",{get:function(){if(az){var r=dp.createElement("div");return r.innerHTML=n.html,r.children}}}),n}function U9(n){var e=n.prefix,t=e===void 0?"fa":e,r=n.iconName;if(r)return F9(dNe.definitions,t,r)||F9(av.styles,t,r)}function hNe(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:U9(e||{}),s=t.mask;return s&&(s=(s||{}).icon?s:U9(s||{})),n(r,Jo({},t,{mask:s}))}}var dNe=new lNe,H9=!1,gB={transform:function(e){return sNe(e)}},fNe=hNe(function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.transform,r=t===void 0?aw:t,s=e.symbol,o=s===void 0?!1:s,l=e.mask,u=l===void 0?null:l,h=e.maskId,f=h===void 0?null:h,g=e.title,y=g===void 0?null:g,b=e.titleId,S=b===void 0?null:b,C=e.classes,M=C===void 0?[]:C,A=e.attributes,k=A===void 0?{}:A,O=e.styles,P=O===void 0?{}:O;if(n){var D=n.prefix,U=n.iconName,H=n.icon;return cNe(Jo({type:"icon"},n),function(){return uNe(),Fm.autoA11y&&(y?k["aria-labelledby"]="".concat(Fm.replacementClass,"-title-").concat(S||BR()):(k["aria-hidden"]="true",k.focusable="false")),nNe({icons:{main:z9(H),mask:u?z9(u.icon):{found:!1,width:null,height:null,icon:{}}},prefix:D,iconName:U,transform:Jo({},aw,r),symbol:o,title:y,maskId:f,titleId:S,extra:{attributes:k,styles:P,classes:M}})})}});function G9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Iy(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?G9(Object(t),!0).forEach(function(r){lw(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):G9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function FR(n){"@babel/helpers - typeof";return FR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FR(n)}function lw(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pNe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function ute(n,e){if(n==null)return{};var t=pNe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function vB(n){return mNe(n)||gNe(n)||vNe(n)||_Ne()}function mNe(n){if(Array.isArray(n))return _B(n)}function gNe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function vNe(n,e){if(n){if(typeof n=="string")return _B(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _B(n,e)}}function _B(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function _Ne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yNe(n){var e,t=n.beat,r=n.fade,s=n.beatFade,o=n.bounce,l=n.shake,u=n.flash,h=n.spin,f=n.spinPulse,g=n.spinReverse,y=n.pulse,b=n.fixedWidth,S=n.inverse,C=n.border,M=n.listItem,A=n.flip,k=n.size,O=n.rotation,P=n.pull,D=(e={"fa-beat":t,"fa-fade":r,"fa-beat-fade":s,"fa-bounce":o,"fa-shake":l,"fa-flash":u,"fa-spin":h,"fa-spin-reverse":g,"fa-spin-pulse":f,"fa-pulse":y,"fa-fw":b,"fa-inverse":S,"fa-border":C,"fa-li":M,"fa-flip":A===!0,"fa-flip-horizontal":A==="horizontal"||A==="both","fa-flip-vertical":A==="vertical"||A==="both"},lw(e,"fa-".concat(k),typeof k<"u"&&k!==null),lw(e,"fa-rotate-".concat(O),typeof O<"u"&&O!==null&&O!==0),lw(e,"fa-pull-".concat(P),typeof P<"u"&&P!==null),lw(e,"fa-swap-opacity",n.swapOpacity),e);return Object.keys(D).map(function(U){return D[U]?U:null}).filter(function(U){return U})}function bNe(n){return n=n-0,n===n}function cte(n){return bNe(n)?n:(n=n.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),n.substr(0,1).toLowerCase()+n.substr(1))}var TNe=["style"];function SNe(n){return n.charAt(0).toUpperCase()+n.slice(1)}function wNe(n){return n.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var r=t.indexOf(":"),s=cte(t.slice(0,r)),o=t.slice(r+1).trim();return s.startsWith("webkit")?e[SNe(s)]=o:e[s]=o,e},{})}function hte(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(h){return hte(n,h)}),s=Object.keys(e.attributes||{}).reduce(function(h,f){var g=e.attributes[f];switch(f){case"class":h.attrs.className=g,delete e.attributes.class;break;case"style":h.attrs.style=wNe(g);break;default:f.indexOf("aria-")===0||f.indexOf("data-")===0?h.attrs[f.toLowerCase()]=g:h.attrs[cte(f)]=g}return h},{attrs:{}}),o=t.style,l=o===void 0?{}:o,u=ute(t,TNe);return s.attrs.style=Iy(Iy({},s.attrs.style),l),n.apply(void 0,[e.tag,Iy(Iy({},s.attrs),u)].concat(vB(r)))}var dte=!1;try{dte=!0}catch{}function ENe(){if(!dte&&console&&typeof console.error=="function"){var n;(n=console).error.apply(n,arguments)}}function W9(n){if(n&&FR(n)==="object"&&n.prefix&&n.iconName&&n.icon)return n;if(gB.icon)return gB.icon(n);if(n===null)return null;if(n&&FR(n)==="object"&&n.prefix&&n.iconName)return n;if(Array.isArray(n)&&n.length===2)return{prefix:n[0],iconName:n[1]};if(typeof n=="string")return{prefix:"fas",iconName:n}}function LN(n,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?lw({},n,e):{}}var xNe=["forwardedRef"];function bv(n){var e=n.forwardedRef,t=ute(n,xNe),r=t.icon,s=t.mask,o=t.symbol,l=t.className,u=t.title,h=t.titleId,f=t.maskId,g=W9(r),y=LN("classes",[].concat(vB(yNe(t)),vB(l.split(" ")))),b=LN("transform",typeof t.transform=="string"?gB.transform(t.transform):t.transform),S=LN("mask",W9(s)),C=fNe(g,Iy(Iy(Iy(Iy({},y),b),S),{},{symbol:o,title:u,titleId:h,maskId:f}));if(!C)return ENe("Could not find icon",g),null;var M=C.abstract,A={ref:e};return Object.keys(t).forEach(function(k){bv.defaultProps.hasOwnProperty(k)||(A[k]=t[k])}),$Ne(M[0],A)}bv.displayName="FontAwesomeIcon";bv.propTypes={beat:Qt.bool,border:Qt.bool,beatFade:Qt.bool,bounce:Qt.bool,className:Qt.string,fade:Qt.bool,flash:Qt.bool,mask:Qt.oneOfType([Qt.object,Qt.array,Qt.string]),maskId:Qt.string,fixedWidth:Qt.bool,inverse:Qt.bool,flip:Qt.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Qt.oneOfType([Qt.object,Qt.array,Qt.string]),listItem:Qt.bool,pull:Qt.oneOf(["right","left"]),pulse:Qt.bool,rotation:Qt.oneOf([0,90,180,270]),shake:Qt.bool,size:Qt.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Qt.bool,spinPulse:Qt.bool,spinReverse:Qt.bool,symbol:Qt.oneOfType([Qt.bool,Qt.string]),title:Qt.string,titleId:Qt.string,transform:Qt.oneOfType([Qt.string,Qt.object]),swapOpacity:Qt.bool};bv.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var $Ne=hte.bind(null,Tt.createElement),fte={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="arrow-up",r=448,s=512,o=[],l="f062",u="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z";n.definition={prefix:e,iconName:t,icon:[r,s,o,l,u]},n.faArrowUp=n.definition,n.prefix=e,n.iconName=t,n.width=r,n.height=s,n.ligatures=o,n.unicode=l,n.svgPathData=u})(fte);var pte={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="arrow-right",r=448,s=512,o=[],l="f061",u="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z";n.definition={prefix:e,iconName:t,icon:[r,s,o,l,u]},n.faArrowRight=n.definition,n.prefix=e,n.iconName=t,n.width=r,n.height=s,n.ligatures=o,n.unicode=l,n.svgPathData=u})(pte);var mte={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="arrow-down",r=448,s=512,o=[],l="f063",u="M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z";n.definition={prefix:e,iconName:t,icon:[r,s,o,l,u]},n.faArrowDown=n.definition,n.prefix=e,n.iconName=t,n.width=r,n.height=s,n.ligatures=o,n.unicode=l,n.svgPathData=u})(mte);var gte={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="arrow-left",r=448,s=512,o=[],l="f060",u="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z";n.definition={prefix:e,iconName:t,icon:[r,s,o,l,u]},n.faArrowLeft=n.definition,n.prefix=e,n.iconName=t,n.width=r,n.height=s,n.ligatures=o,n.unicode=l,n.svgPathData=u})(gte);var CNe=["className","direction","children"];function yB(){return yB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},yB.apply(this,arguments)}function MNe(n,e){if(n==null)return{};var t=ANe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ANe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var INe=function(e){var t=e.className,r=t===void 0?"":t,s=e.direction,o=s===void 0?"right":s,l=e.children,u=MNe(e,CNe),h="".concat(li,"-button--arrow"),f=function(){if(o==="up")return fte.faArrowUp;if(o==="right")return pte.faArrowRight;if(o==="down")return mte.faArrowDown;if(o==="left")return gte.faArrowLeft}();return Tt.createElement(sz,yB({},u,{className:Ps(h,r),icon:Tt.createElement(bv,{icon:f})}),l)},vte={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="ellipsis-v",r=192,s=512,o=[],l="f142",u="M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z";n.definition={prefix:e,iconName:t,icon:[r,s,o,l,u]},n.faEllipsisV=n.definition,n.prefix=e,n.iconName=t,n.width=r,n.height=s,n.ligatures=o,n.unicode=l,n.svgPathData=u})(vte);var _te={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="paper-plane",r=512,s=512,o=[],l="f1d8",u="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z";n.definition={prefix:e,iconName:t,icon:[r,s,o,l,u]},n.faPaperPlane=n.definition,n.prefix=e,n.iconName=t,n.width=r,n.height=s,n.ligatures=o,n.unicode=l,n.svgPathData=u})(_te);var RNe=["className","children"];function bB(){return bB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bB.apply(this,arguments)}function kNe(n,e){if(n==null)return{};var t=ONe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ONe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var LNe=function(e){var t=e.className,r=t===void 0?"":t,s=e.children,o=kNe(e,RNe),l="".concat(li,"-button--send");return Tt.createElement(sz,bB({},o,{className:Ps(l,r),icon:Tt.createElement(bv,{icon:_te.faPaperPlane})}),s)},yte={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="paperclip",r=448,s=512,o=[],l="f0c6",u="M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z";n.definition={prefix:e,iconName:t,icon:[r,s,o,l,u]},n.faPaperclip=n.definition,n.prefix=e,n.iconName=t,n.width=r,n.height=s,n.ligatures=o,n.unicode=l,n.svgPathData=u})(yte);var NNe=["className","children"];function TB(){return TB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},TB.apply(this,arguments)}function DNe(n,e){if(n==null)return{};var t=PNe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function PNe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var BNe=function(e){var t=e.className,r=t===void 0?"":t,s=e.children,o=DNe(e,NNe),l="".concat(li,"-button--attachment");return Tt.createElement(sz,TB({},o,{className:Ps(l,r),icon:Tt.createElement(bv,{icon:yte.faPaperclip})}),s)},FNe=["onClick","children","className"];function SB(){return SB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},SB.apply(this,arguments)}function zNe(n,e){if(n==null)return{};var t=UNe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function UNe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var hz=function(e){var t=e.onClick,r=t===void 0?function(){}:t,s=e.children,o=s===void 0?void 0:s,l=e.className,u=zNe(e,FNe),h="".concat(li,"-conversation-header__back");return Tt.createElement("div",SB({},u,{className:Ps(h,l)}),typeof o<"u"?o:Tt.createElement(INe,{direction:"left",onClick:r}))};hz.displayName="ConversationHeader.Back";var HNe=["children","className"];function wB(){return wB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wB.apply(this,arguments)}function GNe(n,e){if(n==null)return{};var t=WNe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function WNe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var dz=function(e){var t=e.children,r=t===void 0?void 0:t,s=e.className,o=GNe(e,HNe),l="".concat(li,"-conversation-header__actions");return Tt.createElement("section",wB({},o,{className:Ps(l,s)}),r)};dz.displayName="ConversationHeader.Actions";var VNe=["userName","info","children","className"];function EB(){return EB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},EB.apply(this,arguments)}function jNe(n,e){if(n==null)return{};var t=YNe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function YNe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var fz=function(e){var t=e.userName,r=t===void 0?"":t,s=e.info,o=s===void 0?"":s,l=e.children,u=l===void 0?void 0:l,h=e.className,f=jNe(e,VNe),g="".concat(li,"-conversation-header__content");return Tt.createElement("div",EB({},f,{className:Ps(g,h)}),typeof u<"u"?u:Tt.createElement(Tt.Fragment,null,Tt.createElement("div",{className:"".concat(li,"-conversation-header__user-name")},r),Tt.createElement("div",{className:"".concat(li,"-conversation-header__info")},o)))};fz.displayName="ConversationHeader.Content";var XNe=["children","className"];function xB(){return xB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xB.apply(this,arguments)}function KNe(n,e){return ZNe(n)||QNe(n,e)||qNe(n,e)||JNe()}function JNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qNe(n,e){if(n){if(typeof n=="string")return V9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return V9(n,e)}}function V9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function QNe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,o,l,u=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,s=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}function ZNe(n){if(Array.isArray(n))return n}function eDe(n,e){if(n==null)return{};var t=tDe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function tDe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var VC=function(e){var t=e.children,r=t===void 0?void 0:t,s=e.className,o=eDe(e,XNe),l="".concat(li,"-conversation-header"),u=WC(r,[hz,GC,Hee,fz,dz]),h=KNe(u,5),f=h[0],g=h[1],y=h[2],b=h[3],S=h[4];return Tt.createElement("div",xB({},o,{className:Ps(l,s)}),f,g&&Tt.createElement("div",{className:"".concat(l,"__avatar")},g),!g&&y&&Tt.createElement("div",{className:"".concat(l,"__avatar")},y),b,S)};VC.displayName="ConversationHeader";VC.Back=hz;VC.Actions=dz;VC.Content=fz;/*!
 * perfect-scrollbar v1.5.0
 * Copyright 2020 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function lv(n){return getComputedStyle(n)}function jp(n,e){for(var t in e){var r=e[t];typeof r=="number"&&(r=r+"px"),n.style[t]=r}return n}function YA(n){var e=document.createElement("div");return e.className=n,e}var j9=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function Ry(n,e){if(!j9)throw new Error("No element matching method supported");return j9.call(n,e)}function uw(n){n.remove?n.remove():n.parentNode&&n.parentNode.removeChild(n)}function Y9(n,e){return Array.prototype.filter.call(n.children,function(t){return Ry(t,e)})}var Lh={main:"ps",rtl:"ps__rtl",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},bte={x:null,y:null};function Tte(n,e){var t=n.element.classList,r=Lh.state.scrolling(e);t.contains(r)?clearTimeout(bte[e]):t.add(r)}function Ste(n,e){bte[e]=setTimeout(function(){return n.isAlive&&n.element.classList.remove(Lh.state.scrolling(e))},n.settings.scrollingThreshold)}function nDe(n,e){Tte(n,e),Ste(n,e)}var jC=function(e){this.element=e,this.handlers={}},wte={isEmpty:{configurable:!0}};jC.prototype.bind=function(e,t){typeof this.handlers[e]>"u"&&(this.handlers[e]=[]),this.handlers[e].push(t);var r=["touchstart","wheel","touchmove"];r.indexOf(e)!==-1?this.element.addEventListener(e,t,{passive:!1}):this.element.addEventListener(e,t,!1)};jC.prototype.unbind=function(e,t){var r=this;this.handlers[e]=this.handlers[e].filter(function(s){return t&&s!==t?!0:(r.element.removeEventListener(e,s,!1),!1)})};jC.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)};wte.isEmpty.get=function(){var n=this;return Object.keys(this.handlers).every(function(e){return n.handlers[e].length===0})};Object.defineProperties(jC.prototype,wte);var SE=function(){this.eventElements=[]};SE.prototype.eventElement=function(e){var t=this.eventElements.filter(function(r){return r.element===e})[0];return t||(t=new jC(e),this.eventElements.push(t)),t};SE.prototype.bind=function(e,t,r){this.eventElement(e).bind(t,r)};SE.prototype.unbind=function(e,t,r){var s=this.eventElement(e);s.unbind(t,r),s.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(s),1)};SE.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]};SE.prototype.once=function(e,t,r){var s=this.eventElement(e),o=function l(u){s.unbind(t,l),r(u)};s.bind(t,o)};function XA(n){if(typeof window.CustomEvent=="function")return new CustomEvent(n);var e=document.createEvent("CustomEvent");return e.initCustomEvent(n,!1,!1,void 0),e}function zR(n,e,t,r,s,o){r===void 0&&(r=!0),s===void 0&&(s=!1);var l;if(e==="top")l=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(e==="left")l=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");rDe(n,t,l,r,s,o)}function rDe(n,e,t,r,s,o){var l=t[0],u=t[1],h=t[2],f=t[3],g=t[4],y=t[5];r===void 0&&(r=!0),s===void 0&&(s=!1);var b=n.element;n.reach[f]=null;var S=o===!0?n[l]!==n[u]:!0;S&&b[h]<1&&(n.reach[f]="start"),S&&b[h]>n[l]-n[u]-1&&(n.reach[f]="end"),e&&(b.dispatchEvent(XA("ps-scroll-"+f)),e<0?b.dispatchEvent(XA("ps-scroll-"+g)):e>0&&b.dispatchEvent(XA("ps-scroll-"+y)),r&&nDe(n,f)),n.reach[f]&&(e||s)&&b.dispatchEvent(XA("ps-"+f+"-reach-"+n.reach[f]))}function sc(n){return parseInt(n,10)||0}function iDe(n){return Ry(n,"input,[contenteditable]")||Ry(n,"select,[contenteditable]")||Ry(n,"textarea,[contenteditable]")||Ry(n,"button,[contenteditable]")}function sDe(n){var e=lv(n);return sc(e.width)+sc(e.paddingLeft)+sc(e.paddingRight)+sc(e.borderLeftWidth)+sc(e.borderRightWidth)}var zx={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function M_(n){var e=n.element,t=Math.floor(e.scrollTop),r=e.getBoundingClientRect();n.containerWidth=Math.round(r.width),n.containerHeight=Math.round(r.height),n.contentWidth=e.scrollWidth,n.contentHeight=e.scrollHeight,e.contains(n.scrollbarXRail)||(Y9(e,Lh.element.rail("x")).forEach(function(s){return uw(s)}),e.appendChild(n.scrollbarXRail)),e.contains(n.scrollbarYRail)||(Y9(e,Lh.element.rail("y")).forEach(function(s){return uw(s)}),e.appendChild(n.scrollbarYRail)),!n.settings.suppressScrollX&&n.containerWidth+n.settings.scrollXMarginOffset<n.contentWidth?(n.scrollbarXActive=!0,n.railXWidth=n.containerWidth-n.railXMarginWidth,n.railXRatio=n.containerWidth/n.railXWidth,n.scrollbarXWidth=X9(n,sc(n.railXWidth*n.containerWidth/n.contentWidth)),n.scrollbarXLeft=sc((n.negativeScrollAdjustment+e.scrollLeft)*(n.railXWidth-n.scrollbarXWidth)/(n.contentWidth-n.containerWidth))):n.scrollbarXActive=!1,!n.settings.suppressScrollY&&n.containerHeight+n.settings.scrollYMarginOffset<n.contentHeight?(n.scrollbarYActive=!0,n.railYHeight=n.containerHeight-n.railYMarginHeight,n.railYRatio=n.containerHeight/n.railYHeight,n.scrollbarYHeight=X9(n,sc(n.railYHeight*n.containerHeight/n.contentHeight)),n.scrollbarYTop=sc(t*(n.railYHeight-n.scrollbarYHeight)/(n.contentHeight-n.containerHeight))):n.scrollbarYActive=!1,n.scrollbarXLeft>=n.railXWidth-n.scrollbarXWidth&&(n.scrollbarXLeft=n.railXWidth-n.scrollbarXWidth),n.scrollbarYTop>=n.railYHeight-n.scrollbarYHeight&&(n.scrollbarYTop=n.railYHeight-n.scrollbarYHeight),oDe(e,n),n.scrollbarXActive?e.classList.add(Lh.state.active("x")):(e.classList.remove(Lh.state.active("x")),n.scrollbarXWidth=0,n.scrollbarXLeft=0,e.scrollLeft=n.isRtl===!0?n.contentWidth:0),n.scrollbarYActive?e.classList.add(Lh.state.active("y")):(e.classList.remove(Lh.state.active("y")),n.scrollbarYHeight=0,n.scrollbarYTop=0,e.scrollTop=0)}function X9(n,e){return n.settings.minScrollbarLength&&(e=Math.max(e,n.settings.minScrollbarLength)),n.settings.maxScrollbarLength&&(e=Math.min(e,n.settings.maxScrollbarLength)),e}function oDe(n,e){var t={width:e.railXWidth},r=Math.floor(n.scrollTop);e.isRtl?t.left=e.negativeScrollAdjustment+n.scrollLeft+e.containerWidth-e.contentWidth:t.left=n.scrollLeft,e.isScrollbarXUsingBottom?t.bottom=e.scrollbarXBottom-r:t.top=e.scrollbarXTop+r,jp(e.scrollbarXRail,t);var s={top:r,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?s.right=e.contentWidth-(e.negativeScrollAdjustment+n.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:s.right=e.scrollbarYRight-n.scrollLeft:e.isRtl?s.left=e.negativeScrollAdjustment+n.scrollLeft+e.containerWidth*2-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:s.left=e.scrollbarYLeft+n.scrollLeft,jp(e.scrollbarYRail,s),jp(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),jp(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}function aDe(n){n.element,n.event.bind(n.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),n.event.bind(n.scrollbarYRail,"mousedown",function(e){var t=e.pageY-window.pageYOffset-n.scrollbarYRail.getBoundingClientRect().top,r=t>n.scrollbarYTop?1:-1;n.element.scrollTop+=r*n.containerHeight,M_(n),e.stopPropagation()}),n.event.bind(n.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),n.event.bind(n.scrollbarXRail,"mousedown",function(e){var t=e.pageX-window.pageXOffset-n.scrollbarXRail.getBoundingClientRect().left,r=t>n.scrollbarXLeft?1:-1;n.element.scrollLeft+=r*n.containerWidth,M_(n),e.stopPropagation()})}function lDe(n){K9(n,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),K9(n,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function K9(n,e){var t=e[0],r=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],f=e[7],g=e[8],y=n.element,b=null,S=null,C=null;function M(O){O.touches&&O.touches[0]&&(O[s]=O.touches[0].pageY),y[h]=b+C*(O[s]-S),Tte(n,f),M_(n),O.stopPropagation(),O.preventDefault()}function A(){Ste(n,f),n[g].classList.remove(Lh.state.clicking),n.event.unbind(n.ownerDocument,"mousemove",M)}function k(O,P){b=y[h],P&&O.touches&&(O[s]=O.touches[0].pageY),S=O[s],C=(n[r]-n[t])/(n[o]-n[u]),P?n.event.bind(n.ownerDocument,"touchmove",M):(n.event.bind(n.ownerDocument,"mousemove",M),n.event.once(n.ownerDocument,"mouseup",A),O.preventDefault()),n[g].classList.add(Lh.state.clicking),O.stopPropagation()}n.event.bind(n[l],"mousedown",function(O){k(O)}),n.event.bind(n[l],"touchstart",function(O){k(O,!0)})}function uDe(n){var e=n.element,t=function(){return Ry(e,":hover")},r=function(){return Ry(n.scrollbarX,":focus")||Ry(n.scrollbarY,":focus")};function s(o,l){var u=Math.floor(e.scrollTop);if(o===0){if(!n.scrollbarYActive)return!1;if(u===0&&l>0||u>=n.contentHeight-n.containerHeight&&l<0)return!n.settings.wheelPropagation}var h=e.scrollLeft;if(l===0){if(!n.scrollbarXActive)return!1;if(h===0&&o<0||h>=n.contentWidth-n.containerWidth&&o>0)return!n.settings.wheelPropagation}return!0}n.event.bind(n.ownerDocument,"keydown",function(o){if(!(o.isDefaultPrevented&&o.isDefaultPrevented()||o.defaultPrevented)&&!(!t()&&!r())){var l=document.activeElement?document.activeElement:n.ownerDocument.activeElement;if(l){if(l.tagName==="IFRAME")l=l.contentDocument.activeElement;else for(;l.shadowRoot;)l=l.shadowRoot.activeElement;if(iDe(l))return}var u=0,h=0;switch(o.which){case 37:o.metaKey?u=-n.contentWidth:o.altKey?u=-n.containerWidth:u=-30;break;case 38:o.metaKey?h=n.contentHeight:o.altKey?h=n.containerHeight:h=30;break;case 39:o.metaKey?u=n.contentWidth:o.altKey?u=n.containerWidth:u=30;break;case 40:o.metaKey?h=-n.contentHeight:o.altKey?h=-n.containerHeight:h=-30;break;case 32:o.shiftKey?h=n.containerHeight:h=-n.containerHeight;break;case 33:h=n.containerHeight;break;case 34:h=-n.containerHeight;break;case 36:h=n.contentHeight;break;case 35:h=-n.contentHeight;break;default:return}n.settings.suppressScrollX&&u!==0||n.settings.suppressScrollY&&h!==0||(e.scrollTop-=h,e.scrollLeft+=u,M_(n),s(u,h)&&o.preventDefault())}})}function cDe(n){var e=n.element;function t(l,u){var h=Math.floor(e.scrollTop),f=e.scrollTop===0,g=h+e.offsetHeight===e.scrollHeight,y=e.scrollLeft===0,b=e.scrollLeft+e.offsetWidth===e.scrollWidth,S;return Math.abs(u)>Math.abs(l)?S=f||g:S=y||b,S?!n.settings.wheelPropagation:!0}function r(l){var u=l.deltaX,h=-1*l.deltaY;return(typeof u>"u"||typeof h>"u")&&(u=-1*l.wheelDeltaX/6,h=l.wheelDeltaY/6),l.deltaMode&&l.deltaMode===1&&(u*=10,h*=10),u!==u&&h!==h&&(u=0,h=l.wheelDelta),l.shiftKey?[-h,-u]:[u,h]}function s(l,u,h){if(!zx.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(l))return!1;for(var f=l;f&&f!==e;){if(f.classList.contains(Lh.element.consuming))return!0;var g=lv(f);if(h&&g.overflowY.match(/(scroll|auto)/)){var y=f.scrollHeight-f.clientHeight;if(y>0&&(f.scrollTop>0&&h<0||f.scrollTop<y&&h>0))return!0}if(u&&g.overflowX.match(/(scroll|auto)/)){var b=f.scrollWidth-f.clientWidth;if(b>0&&(f.scrollLeft>0&&u<0||f.scrollLeft<b&&u>0))return!0}f=f.parentNode}return!1}function o(l){var u=r(l),h=u[0],f=u[1];if(!s(l.target,h,f)){var g=!1;n.settings.useBothWheelAxes?n.scrollbarYActive&&!n.scrollbarXActive?(f?e.scrollTop-=f*n.settings.wheelSpeed:e.scrollTop+=h*n.settings.wheelSpeed,g=!0):n.scrollbarXActive&&!n.scrollbarYActive&&(h?e.scrollLeft+=h*n.settings.wheelSpeed:e.scrollLeft-=f*n.settings.wheelSpeed,g=!0):(e.scrollTop-=f*n.settings.wheelSpeed,e.scrollLeft+=h*n.settings.wheelSpeed),M_(n),g=g||t(h,f),g&&!l.ctrlKey&&(l.stopPropagation(),l.preventDefault())}}typeof window.onwheel<"u"?n.event.bind(e,"wheel",o):typeof window.onmousewheel<"u"&&n.event.bind(e,"mousewheel",o)}function hDe(n){if(!zx.supportsTouch&&!zx.supportsIePointer)return;var e=n.element;function t(C,M){var A=Math.floor(e.scrollTop),k=Math.ceil(e.scrollLeft),O=Math.abs(C),P=Math.abs(M);if(!n.settings.wheelPropagation)return!0;if(P>O){if(n.settings.suppressScrollY)return!1;if(M>0)return A!==0;if(M<0)return A<n.contentHeight-n.containerHeight}else if(O>P){if(n.settings.suppressScrollX)return!1;if(C>0)return k!==0;if(M<0)return k<n.contentWidth-n.containerWidth}return!0}function r(C,M){e.scrollTop-=M,e.scrollLeft-=C,M_(n)}var s={},o=0,l={},u=null;function h(C){return C.targetTouches?C.targetTouches[0]:C}function f(C){return C.pointerType&&C.pointerType==="pen"&&C.buttons===0?!1:!!(C.targetTouches&&C.targetTouches.length===1||C.pointerType&&C.pointerType!=="mouse"&&C.pointerType!==C.MSPOINTER_TYPE_MOUSE)}function g(C){if(f(C)){var M=h(C);s.pageX=M.pageX,s.pageY=M.pageY,o=new Date().getTime(),u!==null&&clearInterval(u)}}function y(C,M,A){if(!e.contains(C))return!1;for(var k=C;k&&k!==e;){if(k.classList.contains(Lh.element.consuming))return!0;var O=lv(k);if(A&&O.overflowY.match(/(scroll|auto)/)){var P=k.scrollHeight-k.clientHeight;if(P>0&&(k.scrollTop>0&&A<0||k.scrollTop<P&&A>0))return!0}if(M&&O.overflowX.match(/(scroll|auto)/)){var D=k.scrollWidth-k.clientWidth;if(D>0&&(k.scrollLeft>0&&M<0||k.scrollLeft<D&&M>0))return!0}k=k.parentNode}return!1}function b(C){if(f(C)){var M=h(C),A={pageX:M.pageX,pageY:M.pageY},k=A.pageX-s.pageX,O=A.pageY-s.pageY;if(y(C.target,k,O))return;r(k,O),s=A;var P=new Date().getTime(),D=P-o;D>0&&(l.x=k/D,l.y=O/D,o=P),C.cancelable&&t(k,O)&&C.preventDefault()}}function S(){n.settings.swipeEasing&&(clearInterval(u),u=setInterval(function(){if(n.isInitialized){clearInterval(u);return}if(!l.x&&!l.y){clearInterval(u);return}if(Math.abs(l.x)<.01&&Math.abs(l.y)<.01){clearInterval(u);return}r(l.x*30,l.y*30),l.x*=.8,l.y*=.8},10))}zx.supportsTouch?(n.event.bind(e,"touchstart",g),n.event.bind(e,"touchmove",b),n.event.bind(e,"touchend",S)):zx.supportsIePointer&&(window.PointerEvent?(n.event.bind(e,"pointerdown",g),n.event.bind(e,"pointermove",b),n.event.bind(e,"pointerup",S)):window.MSPointerEvent&&(n.event.bind(e,"MSPointerDown",g),n.event.bind(e,"MSPointerMove",b),n.event.bind(e,"MSPointerUp",S)))}var dDe=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},fDe={"click-rail":aDe,"drag-thumb":lDe,keyboard:uDe,wheel:cDe,touch:hDe},YC=function(e,t){var r=this;if(t===void 0&&(t={}),typeof e=="string"&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=e,e.classList.add(Lh.main),this.settings=dDe();for(var s in t)this.settings[s]=t[s];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var o=function(){return e.classList.add(Lh.state.focus)},l=function(){return e.classList.remove(Lh.state.focus)};this.isRtl=lv(e).direction==="rtl",this.isRtl===!0&&e.classList.add(Lh.rtl),this.isNegativeScroll=function(){var f=e.scrollLeft,g=null;return e.scrollLeft=-1,g=e.scrollLeft<0,e.scrollLeft=f,g}(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new SE,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=YA(Lh.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=YA(Lh.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",o),this.event.bind(this.scrollbarX,"blur",l),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var u=lv(this.scrollbarXRail);this.scrollbarXBottom=parseInt(u.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=sc(u.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=sc(u.borderLeftWidth)+sc(u.borderRightWidth),jp(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=sc(u.marginLeft)+sc(u.marginRight),jp(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=YA(Lh.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=YA(Lh.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",o),this.event.bind(this.scrollbarY,"blur",l),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var h=lv(this.scrollbarYRail);this.scrollbarYRight=parseInt(h.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=sc(h.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?sDe(this.scrollbarY):null,this.railBorderYWidth=sc(h.borderTopWidth)+sc(h.borderBottomWidth),jp(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=sc(h.marginTop)+sc(h.marginBottom),jp(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(f){return fDe[f](r)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(f){return r.onScroll(f)}),M_(this)};YC.prototype.update=function(e){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,jp(this.scrollbarXRail,{display:"block"}),jp(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=sc(lv(this.scrollbarXRail).marginLeft)+sc(lv(this.scrollbarXRail).marginRight),this.railYMarginHeight=sc(lv(this.scrollbarYRail).marginTop)+sc(lv(this.scrollbarYRail).marginBottom),jp(this.scrollbarXRail,{display:"none"}),jp(this.scrollbarYRail,{display:"none"}),M_(this),zR(this,"top",0,!1,!0,e),zR(this,"left",0,!1,!0,e),jp(this.scrollbarXRail,{display:""}),jp(this.scrollbarYRail,{display:""}))};YC.prototype.onScroll=function(e){this.isAlive&&(M_(this),zR(this,"top",this.element.scrollTop-this.lastScrollTop),zR(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};YC.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),uw(this.scrollbarX),uw(this.scrollbarY),uw(this.scrollbarXRail),uw(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};YC.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};function Zw(n){"@babel/helpers - typeof";return Zw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zw(n)}var pDe=["className","style","option","options","containerRef","onScrollY","onScrollX","onScrollUp","onScrollDown","onScrollLeft","onScrollRight","onYReachStart","onYReachEnd","onXReachStart","onXReachEnd","component","onSync","children"];function $B(){return $B=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$B.apply(this,arguments)}function mDe(n,e){if(n==null)return{};var t=gDe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function gDe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function vDe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function J9(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,yDe(r.key),r)}}function _De(n,e,t){return e&&J9(n.prototype,e),t&&J9(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function yDe(n){var e=bDe(n,"string");return Zw(e)=="symbol"?e:String(e)}function bDe(n,e){if(Zw(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Zw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function TDe(n,e,t){return e=UR(e),SDe(n,Ete()?Reflect.construct(e,t||[],UR(n).constructor):e.apply(n,t))}function SDe(n,e){if(e&&(Zw(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xte(n)}function Ete(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ete=function(){return!!n})()}function UR(n){return UR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},UR(n)}function xte(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wDe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&CB(n,e)}function CB(n,e){return CB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},CB(n,e)}var DI={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};Object.freeze(DI);var $te=function(n){wDe(e,n);function e(t){var r;return vDe(this,e),r=TDe(this,e,[t]),r.handleRef=r.handleRef.bind(xte(r)),r._handlerByEvent={},r}return _De(e,[{key:"componentDidMount",value:function(){this.props.option&&console.warn('react-perfect-scrollbar: the "option" prop has been deprecated in favor of "options"'),this._ps=new YC(this._container,this.props.options||this.props.option),this._updateEventHook(),this._updateClassName()}},{key:"componentDidUpdate",value:function(r){this._updateEventHook(r),this.updateScroll(),r.className!==this.props.className&&this._updateClassName()}},{key:"componentWillUnmount",value:function(){var r=this;Object.keys(this._handlerByEvent).forEach(function(s){var o=r._handlerByEvent[s];o&&r._container.removeEventListener(s,o,!1)}),this._handlerByEvent={},this._ps.destroy(),this._ps=null}},{key:"_updateEventHook",value:function(){var r=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(DI).forEach(function(o){var l=r.props[DI[o]],u=s[DI[o]];if(l!==u){if(u){var h=r._handlerByEvent[o];r._container.removeEventListener(o,h,!1),r._handlerByEvent[o]=null}if(l){var f=function(){return l(r._container)};r._container.addEventListener(o,f,!1),r._handlerByEvent[o]=f}}})}},{key:"_updateClassName",value:function(){var r=this.props.className,s=this._container.className.split(" ").filter(function(o){return o.match(/^ps([-_].+|)$/)}).join(" ");this._container&&(this._container.className="scrollbar-container".concat(r?" ".concat(r):"").concat(s?" ".concat(s):""))}},{key:"updateScroll",value:function(){var r=this.props.onSync;typeof r=="function"?r(this._ps):this._ps.update()}},{key:"handleRef",value:function(r){var s,o;this._container=r,(s=(o=this.props).containerRef)===null||s===void 0||s.call(o,r)}},{key:"render",value:function(){var r=this.props;r.className;var s=r.style;r.option,r.options,r.containerRef,r.onScrollY,r.onScrollX,r.onScrollUp,r.onScrollDown,r.onScrollLeft,r.onScrollRight,r.onYReachStart,r.onYReachEnd,r.onXReachStart,r.onXReachEnd;var o=r.component;r.onSync;var l=r.children,u=mDe(r,pDe),h=typeof o>"u"?"div":o;return Tt.createElement(h,$B({style:s,ref:this.handleRef},u),l)}}]),e}(de.Component);function lC(n){"@babel/helpers - typeof";return lC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lC(n)}var EDe=["className","variant","children"];function MB(){return MB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},MB.apply(this,arguments)}function xDe(n,e,t){return e=$De(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $De(n){var e=CDe(n,"string");return lC(e)=="symbol"?e:String(e)}function CDe(n,e){if(lC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(lC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function MDe(n,e){if(n==null)return{};var t=ADe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ADe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var q9=function(e){var t=e.className,r=t===void 0?void 0:t,s=e.variant,o=s===void 0?"default":s,l=e.children,u=MDe(e,EDe),h="".concat(li,"-loader"),f=Tt.Children.count(l)>0?"".concat(h,"--content"):"";return Tt.createElement("div",MB({},u,{className:Ps(h,f,xDe({},"".concat(h,"--variant-").concat(o),o!=="default"),r),role:"status"}),l)};function uC(n){"@babel/helpers - typeof";return uC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uC(n)}var IDe=["className","children","blur","grayscale"];function AB(){return AB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},AB.apply(this,arguments)}function Q9(n,e,t){return e=RDe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RDe(n){var e=kDe(n,"string");return uC(e)=="symbol"?e:String(e)}function kDe(n,e){if(uC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(uC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ODe(n,e){if(n==null)return{};var t=LDe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function LDe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var NDe=function(e){var t=e.className,r=t===void 0?"":t,s=e.children,o=s===void 0?void 0:s,l=e.blur,u=l===void 0?!1:l,h=e.grayscale,f=h===void 0?!1:h,g=ODe(e,IDe),y="".concat(li,"-overlay"),b="".concat(y,"--blur"),S="".concat(y,"--grayscale");return Tt.createElement("div",AB({},g,{className:Ps(y,Q9({},b,u),Q9({},S,f),r)}),Tt.createElement("div",{className:"".concat(y,"__content")},o))},DDe=["sender","sentTime","children","className"];function IB(){return IB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},IB.apply(this,arguments)}function PDe(n,e){if(n==null)return{};var t=BDe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function BDe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var pz=function(e){var t=e.sender,r=t===void 0?"":t,s=e.sentTime,o=s===void 0?"":s,l=e.children,u=l===void 0?void 0:l,h=e.className,f=PDe(e,DDe),g="".concat(li,"-message__header");return Tt.createElement("div",IB({},f,{className:Ps(g,h)}),typeof u<"u"?u:Tt.createElement(Tt.Fragment,null,Tt.createElement("div",{className:"".concat(li,"-message__sender-name")},r),Tt.createElement("div",{className:"".concat(li,"-message__sent-time")},o)))};pz.displayName="Message.Header";var FDe=["sender","sentTime","children","className"];function RB(){return RB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},RB.apply(this,arguments)}function zDe(n,e){if(n==null)return{};var t=UDe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function UDe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var mz=function(e){var t=e.sender,r=t===void 0?"":t,s=e.sentTime,o=s===void 0?"":s,l=e.children,u=l===void 0?void 0:l,h=e.className,f=zDe(e,FDe),g="".concat(li,"-message__footer");return Tt.createElement("div",RB({},f,{className:Ps(g,h)}),typeof u<"u"?u:Tt.createElement(Tt.Fragment,null,Tt.createElement("div",{className:"".concat(li,"-message__sender-name")},r),Tt.createElement("div",{className:"".concat(li,"-message__sent-time")},o)))};mz.displayName="Message.Footer";var gz=function(e){var t=e.children,r=e.className,s="".concat(li,"-message__custom-content");return Tt.createElement("div",{className:Ps(s,r)},t)};gz.displayName="Message.CustomContent";var HR=function(e){var t=e.src,r=e.width,s=e.height,o=e.alt,l=e.className,u="".concat(li,"-message__image-content"),h={width:typeof r=="number"?"".concat(r,"px"):typeof r=="string"?r:void 0,height:typeof s=="number"?"".concat(s,"px"):typeof s=="string"?s:void 0};return Tt.createElement("div",{className:Ps(u,l)},Tt.createElement("img",{src:t,style:h,alt:o}))};HR.displayName="Message.ImageContent";var GR=function(e){var t=e.html,r=e.className,s="".concat(li,"-message__html-content"),o=function(){return{__html:t}};return Tt.createElement("div",{className:Ps(s,r),dangerouslySetInnerHTML:o()})};GR.displayName="Message.HtmlContent";var WR=function(e){var t=e.text,r=e.className,s=e.children,o="".concat(li,"-message__text-content"),l=s??t;return Tt.createElement("div",{className:Ps(o,r)},l)};WR.displayName="Message.TextContent";var HDe=["model","avatarSpacer","avatarPosition","type","payload","children","className"];function kB(){return kB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},kB.apply(this,arguments)}function Z9(n,e,t){return e=GDe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GDe(n){var e=WDe(n,"string");return eE(e)=="symbol"?e:String(e)}function WDe(n,e){if(eE(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(eE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function eE(n){"@babel/helpers - typeof";return eE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eE(n)}function VDe(n,e){return KDe(n)||XDe(n,e)||YDe(n,e)||jDe()}function jDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YDe(n,e){if(n){if(typeof n=="string")return e8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return e8(n,e)}}function e8(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function XDe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,o,l,u=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,s=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}function KDe(n){if(Array.isArray(n))return n}function JDe(n,e){if(n==null)return{};var t=qDe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function qDe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Tv=function(e){var t,r,s=e.model,o=s.message,l=o===void 0?"":o,u=s.sentTime,h=u===void 0?"":u,f=s.sender,g=f===void 0?"":f,y=s.direction,b=y===void 0?1:y,S=s.position,C=s.type,M=s.payload,A=e.avatarSpacer,k=A===void 0?!1:A,O=e.avatarPosition,P=O===void 0?void 0:O,D=e.type,U=D===void 0?"html":D,H=e.payload,V=e.children,z=e.className,Z=JDe(e,HDe),oe="".concat(li,"-message"),ue=WC(V,[GC,pz,mz,GR,WR,HR,gz]),q=VDe(ue,7),ae=q[0],le=q[1],ce=q[2],ge=q[3],$e=q[4],K=q[5],ie=q[6],se=function(){if(b===0||b==="incoming")return"".concat(oe,"--incoming");if(b===1||b==="outgoing")return"".concat(oe,"--outgoing")}(),fe=function(we){var Ze="".concat(oe,"--avatar-");if(we===0||we==="top-left"||we==="tl")return"".concat(Ze,"tl");if(we===1||we==="top-right"||we==="tr")return"".concat(Ze,"tr");if(we===2||we==="bottom-right"||we==="br")return"".concat(Ze,"br");if(we===3||we==="bottom-left"||we==="bl")return"".concat(Ze,"bl");if(we===4||we==="center-left"||we==="cl")return"".concat(Ze,"cl");if(we===5||we==="center-right"||we==="cr")return"".concat(Ze,"cr")}(P),Se=function(we){var Ze="".concat(li,"-message--");if(we==="single"||we===0)return"".concat(Ze,"single");if(we==="first"||we===1)return"".concat(Ze,"first");if(we==="normal"||we===2)return"";if(we==="last"||we===3)return"".concat(Ze,"last")}(S),Ue=function(){return(g==null?void 0:g.length)>0&&(h==null?void 0:h.length)>0?"".concat(g,": ").concat(h):(g==null?void 0:g.length)>0&&(typeof h>"u"||(h==null?void 0:h.length)===0)?g:null}(),ke=(t=(r=ge??$e)!==null&&r!==void 0?r:K)!==null&&t!==void 0?t:ie,qe=ke??function(){var we=C??U,Ze=M??l,et=Ze??H,ft=eE(et)==="object"?zee(et):"";if(we==="html"&&ft!=="Message.CustomContent")return Tt.createElement(GR,{html:et});if(we==="text")return Tt.createElement(WR,{text:et});if(we==="image")return Tt.createElement(HR,et);if(we==="custom"||ft==="Message.CustomContent")return et}();return Tt.createElement("section",kB({},Z,{"aria-label":Ue,className:Ps(oe,se,Z9({},"".concat(oe,"--avatar-spacer"),k),Se,fe,z)},Z9({},"data-".concat(li,"-message"),"")),typeof ae<"u"&&Tt.createElement("div",{className:"".concat(oe,"__avatar")},ae),Tt.createElement("div",{className:"".concat(oe,"__content-wrapper")},le,Tt.createElement("div",{className:"".concat(oe,"__content")},qe),ce))};Tv.Header=pz;Tv.HtmlContent=GR;Tv.TextContent=WR;Tv.ImageContent=HR;Tv.CustomContent=gz;Tv.Footer=mz;var QDe=["children","className"];function OB(){return OB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},OB.apply(this,arguments)}function ZDe(n,e){if(n==null)return{};var t=ePe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ePe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var vz=function(e){var t=e.children,r=t===void 0?void 0:t,s=e.className,o=ZDe(e,QDe),l="".concat(li,"-message-group__header");return Tt.createElement("div",OB({},o,{className:Ps(l,s)}),r)};vz.displayName="MessageGroup.Header";var tPe=["children","className"];function LB(){return LB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},LB.apply(this,arguments)}function nPe(n,e){if(n==null)return{};var t=rPe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function rPe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var _z=function(e){var t=e.children,r=t===void 0?void 0:t,s=e.className,o=nPe(e,tPe),l="".concat(li,"-message-group__footer");return Tt.createElement("div",LB({},o,{className:Ps(l,s)}),r)};_z.displayName="MessageGroup.Footer";var iPe=["children","className"];function NB(){return NB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NB.apply(this,arguments)}function sPe(n,e){if(n==null)return{};var t=oPe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function oPe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var yz=function(e){var t=e.children,r=t===void 0?void 0:t,s=e.className,o=sPe(e,iPe),l="".concat(li,"-message-group");return Tt.createElement("div",NB({},o,{className:Ps("".concat(l,"__messages"),s)}),r)};yz.displayName="MessageGroup.Messages";function cC(n){"@babel/helpers - typeof";return cC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cC(n)}var aPe=["direction","avatarPosition","sender","sentTime","children","className"];function DB(){return DB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},DB.apply(this,arguments)}function lPe(n,e,t){return e=uPe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uPe(n){var e=cPe(n,"string");return cC(e)=="symbol"?e:String(e)}function cPe(n,e){if(cC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(cC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function hPe(n,e){return mPe(n)||pPe(n,e)||fPe(n,e)||dPe()}function dPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fPe(n,e){if(n){if(typeof n=="string")return t8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return t8(n,e)}}function t8(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function pPe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,o,l,u=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,s=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}function mPe(n){if(Array.isArray(n))return n}function gPe(n,e){if(n==null)return{};var t=vPe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function vPe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var O2=function(e){var t=e.direction,r=t===void 0?"incoming":t,s=e.avatarPosition,o=s===void 0?void 0:s,l=e.sender,u=l===void 0?"":l,h=e.sentTime,f=h===void 0?"":h,g=e.children,y=e.className,b=gPe(e,aPe),S="".concat(li,"-message-group"),C=function(){if(r===0||r==="incoming")return"".concat(S,"--incoming");if(r===1||r==="outgoing")return"".concat(S,"--outgoing")}(),M=function(){var V="".concat(S,"--avatar-");if(typeof o=="string"&&(o==="tl"||o==="top-left"||o==="tr"||o==="top-right"||o==="bl"||o==="bottom-right"||o==="br"||o==="bottom-right"||o==="cl"||o==="center-left"||o==="cr"||o==="center-right"))return"".concat(V).concat(o)}(),A=WC(g,[GC,vz,_z,yz]),k=hPe(A,4),O=k[0],P=k[1],D=k[2],U=k[3],H=function(){return u.length>0&&f.length>0?"".concat(u,": ").concat(f):u.length>0&&f.length===0?u:null}();return Tt.createElement("section",DB({"aria-label":H},b,{className:Ps(S,C,M,y)},lPe({},"data-".concat(li,"-message-group"),"")),typeof O<"u"&&Tt.createElement("div",{className:"".concat(S,"__avatar")},O),Tt.createElement("div",{className:"".concat(S,"__content")},P,U,D))};O2.Header=vz;O2.Footer=_z;O2.Messages=yz;var _Pe=["content","as","children","className"];function PB(){return PB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},PB.apply(this,arguments)}function yPe(n,e){if(n==null)return{};var t=bPe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function bPe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var TPe=function(e){var t=e.content,r=t===void 0?void 0:t,s=e.as,o=s===void 0?"div":s,l=e.children,u=l===void 0?void 0:l,h=e.className,f=yPe(e,_Pe),g="".concat(li,"-message-separator"),y=function(){return typeof o=="string"&&o.length>0?o:"div"}();return Tt.createElement(y,PB({},f,{className:Ps(g,h)}),yLe(u)===!0?r:u)},SPe=["className","children"];function BB(){return BB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},BB.apply(this,arguments)}function wPe(n,e){if(n==null)return{};var t=EPe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function EPe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var L2=function(e){var t=e.className,r=e.children,s=wPe(e,SPe);return Tt.createElement("div",BB({},s,{className:t}),r)};L2.displayName="MessageList.Content";var xPe=["children","typingIndicator","loading","loadingMore","loadingMorePosition","onYReachStart","onYReachEnd","className","disableOnYReachWhenNoScroll","scrollBehavior","autoScrollToBottom","autoScrollToBottomOnMount"];function tE(n){"@babel/helpers - typeof";return tE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tE(n)}function hC(){return hC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hC.apply(this,arguments)}function $Pe(n,e){return IPe(n)||APe(n,e)||MPe(n,e)||CPe()}function CPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MPe(n,e){if(n){if(typeof n=="string")return n8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return n8(n,e)}}function n8(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function APe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,o,l,u=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,s=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}function IPe(n){if(Array.isArray(n))return n}function RPe(n,e){if(n==null)return{};var t=kPe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function kPe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function OPe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function r8(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Mte(r.key),r)}}function LPe(n,e,t){return e&&r8(n.prototype,e),t&&r8(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function NPe(n,e,t){return e=VR(e),DPe(n,Cte()?Reflect.construct(e,t||[],VR(n).constructor):e.apply(n,t))}function DPe(n,e){if(e&&(tE(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HS(n)}function Cte(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cte=function(){return!!n})()}function VR(n){return VR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},VR(n)}function HS(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function PPe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&FB(n,e)}function FB(n,e){return FB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},FB(n,e)}function a1(n,e,t){return e=Mte(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Mte(n){var e=BPe(n,"string");return tE(e)=="symbol"?e:String(e)}function BPe(n,e){if(tE(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(tE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var bz=function(n){PPe(e,n);function e(t){var r;return OPe(this,e),r=NPe(this,e,[t]),a1(HS(r),"handleResize",function(){r.containerRef.current.clientHeight<r.lastClientHeight&&r.scrollToEnd(r.props.scrollBehavior),r.scrollRef.current.updateScroll()}),a1(HS(r),"handleContainerResize",function(){r.resizeTicking===!1&&(window.requestAnimationFrame(function(){var s=r.containerRef.current;if(s){var o=s.clientHeight,l=o-r.lastClientHeight;l>=1?r.preventScrollTop===!1&&(s.scrollTop=Math.round(s.scrollTop)-l):s.scrollTop=s.scrollTop-l,r.lastClientHeight=s.clientHeight,r.scrollRef.current.updateScroll()}r.resizeTicking=!1}),r.resizeTicking=!0)}),a1(HS(r),"isSticked",function(){var s=r.containerRef.current;return s.scrollHeight===Math.round(s.scrollTop+s.clientHeight)}),a1(HS(r),"handleScroll",function(){r.scrollTicking===!1&&(window.requestAnimationFrame(function(){r.noScroll===!1?r.preventScrollTop=r.isSticked():r.noScroll=!1,r.scrollTicking=!1}),r.scrollTicking=!0)}),a1(HS(r),"getLastMessageOrGroup",function(){var s=r.containerRef.current.querySelector("[data-".concat(li,"-message-list]>[data-").concat(li,"-message]:last-of-type,[data-").concat(li,"-message-list]>[data-").concat(li,"-message-group]:last-of-type")),o=s==null?void 0:s.querySelector("[data-".concat(li,"-message]:last-of-type"));return{lastElement:s,lastMessageInGroup:o}}),r.scrollPointRef=Tt.createRef(),r.containerRef=Tt.createRef(),r.scrollRef=Tt.createRef(),r.lastClientHeight=0,r.preventScrollTop=!1,r.resizeObserver=void 0,r.scrollTicking=!1,r.resizeTicking=!1,r.noScroll=void 0,r}return LPe(e,[{key:"getSnapshotBeforeUpdate",value:function(){var r=this.containerRef.current,s=Math.round(r.scrollTop+r.clientHeight),o=r.scrollHeight===s||r.scrollHeight+1===s||r.scrollHeight-1===s;return{sticky:o,clientHeight:r.clientHeight,scrollHeight:r.scrollHeight,lastMessageOrGroup:this.getLastMessageOrGroup(),diff:r.scrollHeight-r.scrollTop}}},{key:"componentDidMount",value:function(){this.props.autoScrollToBottomOnMount===!0&&this.scrollToEnd(this.props.scrollBehavior),this.lastClientHeight=this.containerRef.current.clientHeight,window.addEventListener("resize",this.handleResize),typeof window.ResizeObserver=="function"&&(this.resizeObserver=new ResizeObserver(this.handleContainerResize),this.resizeObserver.observe(this.containerRef.current)),this.containerRef.current.addEventListener("scroll",this.handleScroll)}},{key:"componentDidUpdate",value:function(r,s,o){var l=this.props.autoScrollToBottom;if(typeof o<"u"){var u=this.containerRef.current,h=this.getLastMessageOrGroup(),f=h.lastElement,g=h.lastMessageInGroup;if(f===o.lastMessageOrGroup.lastElement&&(typeof g>"u"||g===o.lastMessageOrGroup.lastMessageInGroup)&&(u.scrollTop=u.scrollHeight-o.diff+(this.lastClientHeight-u.clientHeight)),o.sticky===!0)l===!0&&this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0;else if(o.clientHeight<this.lastClientHeight){var y=u.scrollTop+this.lastClientHeight;u.scrollHeight===y||u.scrollHeight+1===y||u.scrollHeight-1===y?l===!0&&(this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0):this.preventScrollTop=!1}else this.preventScrollTop=!1,f===o.lastMessageOrGroup.lastElement&&(typeof g>"u"||g===o.lastMessageOrGroup.lastMessageInGroup)&&u.scrollTop===0&&u.scrollHeight>o.scrollHeight&&(u.scrollTop=u.scrollHeight-o.scrollHeight);this.lastClientHeight=o.clientHeight}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),typeof this.resizeObserver<"u"&&this.resizeObserver.disconnect(),this.containerRef.current.removeEventListener("scroll",this.handleScroll)}},{key:"scrollToEnd",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollBehavior,s=this.containerRef.current,o=this.scrollPointRef.current,l=s.getBoundingClientRect(),u=o.getBoundingClientRect(),h=u.top+s.scrollTop-l.top;s.scrollBy?s.scrollBy({top:h,behavior:r}):s.scrollTop=h,this.lastClientHeight=s.clientHeight,this.noScroll=!0}},{key:"render",value:function(){var r=this,s=this.props,o=s.children,l=s.typingIndicator,u=s.loading,h=s.loadingMore,f=s.loadingMorePosition,g=s.onYReachStart,y=s.onYReachEnd,b=s.className,S=s.disableOnYReachWhenNoScroll;s.scrollBehavior,s.autoScrollToBottom,s.autoScrollToBottomOnMount;var C=RPe(s,xPe),M="".concat(li,"-message-list"),A=WC(o,[L2]),k=$Pe(A,1),O=k[0];return Tt.createElement("div",hC({},C,{className:Ps(M,b)}),h&&Tt.createElement("div",{className:Ps("".concat(M,"__loading-more"),a1({},"".concat(M,"__loading-more--bottom"),f==="bottom"))},Tt.createElement(q9,null)),u&&Tt.createElement(NDe,null,Tt.createElement(q9,null)),Tt.createElement($te,hC({onYReachStart:g,onYReachEnd:y,onSync:function(D){return D.update(S)},className:"".concat(M,"__scroll-wrapper"),ref:this.scrollRef,containerRef:function(D){return r.containerRef.current=D},options:{suppressScrollX:!0}},a1({},"data-".concat(li,"-message-list"),""),{style:{overscrollBehaviorY:"none",overflowAnchor:"auto",touchAction:"none"}}),O||o,Tt.createElement("div",{className:"".concat(M,"__scroll-to"),ref:this.scrollPointRef})),typeof l<"u"&&Tt.createElement("div",{className:"".concat(M,"__typing-indicator-container")},l))}}]),e}(Tt.Component);bz.displayName="MessageList";function FPe(n,e){var t=de.useRef(),r=function(o){return t.current.scrollToEnd(o)};return de.useImperativeHandle(e,function(){return{scrollToBottom:r}}),Tt.createElement(bz,hC({ref:t},n))}var vT=de.forwardRef(FPe);vT.propTypes={children:Uee([Tv,O2,TPe,L2]),typingIndicator:Qt.node,loading:Qt.bool,loadingMore:Qt.bool,loadingMorePosition:Qt.oneOf(["top","bottom"]),onYReachStart:Qt.func,onYReachEnd:Qt.func,disableOnYReachWhenNoScroll:Qt.bool,autoScrollToBottom:Qt.bool,autoScrollToBottomOnMount:Qt.bool,scrollBehavior:Qt.oneOf(["auto","smooth"]),className:Qt.string};vT.defaultProps={typingIndicator:void 0,loading:!1,loadingMore:!1,loadingMorePosition:"top",disableOnYReachWhenNoScroll:!1,autoScrollToBottom:!0,autoScrollToBottomOnMount:!0,scrollBehavior:"auto"};bz.defaultProps=vT.defaultProps;vT.Content=L2;function nE(n){"@babel/helpers - typeof";return nE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nE(n)}function zPe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function i8(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Ite(r.key),r)}}function UPe(n,e,t){return e&&i8(n.prototype,e),t&&i8(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function HPe(n,e,t){return e=jR(e),GPe(n,Ate()?Reflect.construct(e,t||[],jR(n).constructor):e.apply(n,t))}function GPe(n,e){if(e&&(nE(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v1(n)}function Ate(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ate=function(){return!!n})()}function jR(n){return jR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jR(n)}function v1(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function WPe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&zB(n,e)}function zB(n,e){return zB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},zB(n,e)}function NN(n,e,t){return e=Ite(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ite(n){var e=VPe(n,"string");return nE(e)=="symbol"?e:String(e)}function VPe(n,e){if(nE(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(nE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var jPe=function(e,t){var r=document.activeElement===e,s=document.createTextNode("");if(e.appendChild(s),s!==null&&s.nodeValue!==null&&(r||t)){var o=window.getSelection();if(o!==null){var l=document.createRange();l.setStart(s,s.nodeValue.length),l.collapse(!0),o.removeAllRanges(),o.addRange(l)}}},YPe=function(n){WPe(e,n);function e(t){var r;return zPe(this,e),r=HPe(this,e,[t]),NN(v1(r),"innerHTML",function(){var s=v1(r),o=s.props.value;return{__html:typeof o<"u"?o:""}}),NN(v1(r),"handleKeyPress",function(s){var o=v1(r),l=o.props.onKeyPress;l==null||l(s)}),NN(v1(r),"handleInput",function(s){var o=v1(r),l=o.props.onChange,u=s.target;l==null||l(u.innerHTML,u.textContent,u.innerText)}),r.msgRef=Tt.createRef(),r}return UPe(e,[{key:"focus",value:function(){typeof this.msgRef.current<"u"&&this.msgRef.current.focus()}},{key:"componentDidMount",value:function(){this.props.autoFocus===!0&&this.msgRef.current.focus()}},{key:"shouldComponentUpdate",value:function(r){var s=this.msgRef,o=this.props,l=o.placeholder,u=o.disabled,h=o.activateAfterChange;return typeof s.current>"u"||r.value!==s.current.innerHTML?!0:l!==r.placeholder||u!==r.disabled||h!==r.activateAfterChange}},{key:"componentDidUpdate",value:function(){var r=this.msgRef,s=this.props,o=s.value,l=s.activateAfterChange;o!==r.current.innerHTML&&(r.current.innerHTML=typeof o=="string"?o:""),jPe(r.current,l)}},{key:"render",value:function(){var r=this.msgRef,s=this.handleInput,o=this.handleKeyPress,l=this.innerHTML,u=this.props,h=u.placeholder,f=u.disabled,g=u.className,y=typeof h=="string"?h:"";return Tt.createElement("div",{ref:r,className:g,contentEditable:f===!1,disabled:f,"data-placeholder":y,onInput:s,onKeyPress:o,dangerouslySetInnerHTML:l()})}}]),e}(de.Component);function rE(n){"@babel/helpers - typeof";return rE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rE(n)}var XPe=["fancyScroll","children","forwardedRef"],KPe=["value","onSend","onChange","autoFocus","placeholder","fancyScroll","className","activateAfterChange","disabled","sendDisabled","sendOnReturnDisabled","attachDisabled","sendButton","attachButton","onAttachClick"];function JPe(n,e,t){return e=kte(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function UB(n,e){return eBe(n)||ZPe(n,e)||QPe(n,e)||qPe()}function qPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QPe(n,e){if(n){if(typeof n=="string")return s8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s8(n,e)}}function s8(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function ZPe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,o,l,u=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,s=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}function eBe(n){if(Array.isArray(n))return n}function Sw(){return Sw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Sw.apply(this,arguments)}function Rte(n,e){if(n==null)return{};var t=tBe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function tBe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function nBe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function o8(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,kte(r.key),r)}}function rBe(n,e,t){return e&&o8(n.prototype,e),t&&o8(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function kte(n){var e=iBe(n,"string");return rE(e)=="symbol"?e:String(e)}function iBe(n,e){if(rE(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(rE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function sBe(n,e,t){return e=YR(e),oBe(n,Ote()?Reflect.construct(e,t||[],YR(n).constructor):e.apply(n,t))}function oBe(n,e){if(e&&(rE(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aBe(n)}function aBe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ote(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ote=function(){return!!n})()}function YR(n){return YR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},YR(n)}function lBe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&HB(n,e)}function HB(n,e){return HB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},HB(n,e)}function uBe(){var n=function(e){lBe(t,e);function t(){return nBe(this,t),sBe(this,t,arguments)}return rBe(t,[{key:"render",value:function(){var s=this.props,o=s.fancyScroll,l=s.children,u=s.forwardedRef,h=Rte(s,XPe);return Tt.createElement(Tt.Fragment,null,o===!0&&Tt.createElement($te,Sw({ref:function(g){return u.current=g}},h,{options:{suppressScrollX:!0}}),l),o===!1&&Tt.createElement("div",Sw({ref:u},h),l))}}]),t}(de.Component);return Tt.forwardRef(function(e,t){return Tt.createElement(n,Sw({forwardedRef:t},e))})}var cBe=uBe(),a8=function(e,t){var r=typeof e<"u"?e:t,s=de.useState(r),o=UB(s,2),l=o[0],u=o[1],h=typeof e<"u"?e:l;return[h,function(f){u(f)}]};function hBe(n,e){var t=n.value,r=t===void 0?void 0:t,s=n.onSend,o=s===void 0?NI:s,l=n.onChange,u=l===void 0?NI:l,h=n.autoFocus,f=h===void 0?!1:h,g=n.placeholder,y=g===void 0?"":g,b=n.fancyScroll,S=b===void 0?!0:b,C=n.className,M=n.activateAfterChange,A=M===void 0?!1:M,k=n.disabled,O=k===void 0?!1:k,P=n.sendDisabled,D=n.sendOnReturnDisabled,U=D===void 0?!1:D,H=n.attachDisabled,V=H===void 0?!1:H,z=n.sendButton,Z=z===void 0?!0:z,oe=n.attachButton,ue=oe===void 0?!0:oe,q=n.onAttachClick,ae=q===void 0?NI:q,le=Rte(n,KPe),ce=de.useRef(),ge=de.useRef(),$e=a8(r,""),K=UB($e,2),ie=K[0],se=K[1],fe=a8(P,!0),Se=UB(fe,2),Ue=Se[0],ke=Se[1],qe=function(){typeof ge.current<"u"&&ge.current.focus()};de.useImperativeHandle(e,function(){return{focus:qe}}),de.useEffect(function(){f===!0&&qe()},[]),de.useEffect(function(){typeof ce.current.updateScroll=="function"&&ce.current.updateScroll()});var we=function(){var He=ge.current.msgRef.current;return[He.textContent,He.innerText,He.cloneNode(!0).childNodes]},Ze=function(){if(ie.length>0){r===void 0&&se(""),typeof P>"u"&&ke(!0);var He=we();o(ie,He[0],He[1],He[2])}},et=function(He){He.key==="Enter"&&He.shiftKey===!1&&U===!1&&(He.preventDefault(),Ze())},ft=function(He,it,st){se(He),typeof P>"u"&&ke(it.length===0),typeof ce.current.updateScroll=="function"&&ce.current.updateScroll();var It=we();u(He,it,st,It[2])},at="".concat(li,"-message-input"),Ge=typeof y=="string"?y:"";return Tt.createElement("div",Sw({},le,{className:Ps(at,JPe({},"".concat(at,"--disabled"),O),C)}),ue===!0&&Tt.createElement("div",{className:"".concat(at,"__tools")},Tt.createElement(BNe,{onClick:ae,disabled:O===!0||V===!0})),Tt.createElement("div",{className:"".concat(at,"__content-editor-wrapper")},Tt.createElement(cBe,{fancyScroll:S,ref:ce,className:"".concat(at,"__content-editor-container")},Tt.createElement(YPe,{ref:ge,className:"".concat(at,"__content-editor"),disabled:O,placeholder:Ge,onKeyPress:et,onChange:ft,activateAfterChange:A,value:ie}))),Z===!0&&Tt.createElement("div",{className:"".concat(at,"__tools")},Tt.createElement(LNe,{onClick:Ze,disabled:O===!0||Ue===!0})))}var N2=de.forwardRef(hBe);N2.displayName="MessageInput";N2.propTypes={value:Qt.string,placeholder:Qt.string,disabled:Qt.bool,sendOnReturnDisabled:Qt.bool,sendDisabled:Qt.bool,fancyScroll:Qt.bool,activateAfterChange:Qt.bool,autoFocus:Qt.bool,onChange:Qt.func,onSend:Qt.func,className:Qt.string,sendButton:Qt.bool,attachButton:Qt.bool,attachDisabled:Qt.bool,onAttachClick:Qt.func};var dBe=["className","children"];function GB(){return GB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},GB.apply(this,arguments)}function fBe(n,e){if(n==null)return{};var t=pBe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function pBe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Lte=function(e){var t=e.className,r=e.children,s=fBe(e,dBe),o="".concat(li,"-input-toolbox");return Tt.createElement("div",GB({},s,{className:Ps(o,t)}),r)};Lte.displayName="InputToolbox";var mBe=["children","className"];function WB(){return WB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},WB.apply(this,arguments)}function gBe(n,e){return bBe(n)||yBe(n,e)||_Be(n,e)||vBe()}function vBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Be(n,e){if(n){if(typeof n=="string")return l8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return l8(n,e)}}function l8(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function yBe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,o,l,u=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,s=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}function bBe(n){if(Array.isArray(n))return n}function TBe(n,e){if(n==null)return{};var t=SBe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function SBe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Nte=function(e){var t=e.children,r=t===void 0?void 0:t,s=e.className,o=TBe(e,mBe),l="".concat(li,"-chat-container"),u=WC(r,[VC,vT,N2,Lte]),h=gBe(u,4),f=h[0],g=h[1],y=h[2],b=h[3];return Tt.createElement("div",WB({},o,{className:Ps(l,s)}),f,g,y,b)},j1="".concat(li,"-conversation");function dC(n){"@babel/helpers - typeof";return dC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dC(n)}var wBe=["children","className","visible"];function VB(){return VB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},VB.apply(this,arguments)}function EBe(n,e,t){return e=xBe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xBe(n){var e=$Be(n,"string");return dC(e)=="symbol"?e:String(e)}function $Be(n,e){if(dC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(dC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function CBe(n,e){if(n==null)return{};var t=MBe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function MBe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var ABe=function(e){var t=e.children,r=e.className,s=e.visible,o=CBe(e,wBe);return Tt.createElement("div",VB({},o,{className:Ps("".concat(j1,"__operations"),EBe({},"".concat(j1,"__operations--visible"),s),r)}),Tt.Children.count(t)>0?t:Tt.createElement(bv,{icon:vte.faEllipsisV}))};ABe.displayName="Conversation.Operations";var IBe=["lastSenderName","info","name","children","className"];function jB(){return jB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jB.apply(this,arguments)}function YB(n){"@babel/helpers - typeof";return YB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YB(n)}function RBe(n,e){if(n==null)return{};var t=kBe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function kBe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var OBe=function(e){var t=e.name;return Tt.createElement(Tt.Fragment,null,Tt.createElement("div",{className:"".concat(j1,"__last-sender")},t),":")},LBe=function(e){var t=e.info;return Tt.createElement("div",{className:"".concat(j1,"__info-content")},t)},NBe=function(e){var t=e.lastSenderName,r=e.info,s=e.name,o=e.children,l=e.className,u=RBe(e,IBe),h=YB(t);return Tt.createElement("div",jB({},u,{className:Ps("".concat(j1,"__content"),l)}),Tt.Children.count(o)>0?o:Tt.createElement(Tt.Fragment,null,Tt.createElement("div",{className:"".concat(j1,"__name")},s),Tt.createElement("div",{className:"".concat(j1,"__info")},h!=="undefined"?Tt.createElement(Tt.Fragment,null,h==="string"?Tt.createElement(OBe,{name:t}):t," "):null,typeof r<"u"&&Tt.createElement(LBe,{info:r}))))};NBe.displayName="Conversation.Content";/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var DBe={prefix:"fas",iconName:"search",icon:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"]},PBe={prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]};function fC(n){"@babel/helpers - typeof";return fC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fC(n)}var BBe=["placeholder","value","onChange","onClearClick","className","disabled"];function XB(){return XB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},XB.apply(this,arguments)}function u8(n,e,t){return e=FBe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FBe(n){var e=zBe(n,"string");return fC(e)=="symbol"?e:String(e)}function zBe(n,e){if(fC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(fC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function c8(n,e){return WBe(n)||GBe(n,e)||HBe(n,e)||UBe()}function UBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HBe(n,e){if(n){if(typeof n=="string")return h8(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h8(n,e)}}function h8(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function GBe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,o,l,u=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,s=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(f)throw s}}return u}}function WBe(n){if(Array.isArray(n))return n}function VBe(n,e){if(n==null)return{};var t=jBe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function jBe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var YBe=function(e,t){return typeof t>"u"?de.useState(e):[t,function(){}]};function XBe(n,e){var t=n.placeholder,r=t===void 0?"":t,s=n.value,o=s===void 0?void 0:s,l=n.onChange,u=l===void 0?function(){}:l,h=n.onClearClick,f=h===void 0?function(){}:h,g=n.className,y=n.disabled,b=y===void 0?!1:y,S=VBe(n,BBe),C="".concat(li,"-search"),M=de.useMemo(function(){return typeof o<"u"},[]),A=YBe("",o),k=c8(A,2),O=k[0],P=k[1],D=de.useState(M?O.length>0:!1),U=c8(D,2),H=U[0],V=U[1];if(M!==typeof o<"u")throw"Search: Changing from controlled to uncontrolled component and vice versa is not allowed";var z=de.useRef(void 0),Z=function(){typeof z.current<"u"&&z.current.focus()};de.useImperativeHandle(e,function(){return{focus:Z}});var oe=function(ae){var le=ae.target.value;V(le.length>0),M===!1&&P(le),u(le)},ue=function(){M===!1&&P(""),V(!1),f()};return Tt.createElement("div",XB({},S,{className:Ps(C,u8({},"".concat(C,"--disabled"),b),g)}),Tt.createElement(bv,{icon:DBe,className:"".concat(C,"__search-icon")}),Tt.createElement("input",{ref:z,type:"text",className:"".concat(C,"__input"),placeholder:r,onChange:oe,disabled:b,value:O}),Tt.createElement(bv,{icon:PBe,className:Ps("".concat(C,"__clear-icon"),u8({},"".concat(C,"__clear-icon--active"),H)),onClick:ue}))}var Dte=de.forwardRef(XBe);Dte.displayName="Search";Dte.propTypes={placeholder:Qt.string,value:Qt.string,onChange:Qt.func,onClearClick:Qt.func,className:Qt.string,disabled:Qt.bool};function pC(n){"@babel/helpers - typeof";return pC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pC(n)}var KBe=["className","children","size","selected","onChange","itemsTabIndex"];function KB(){return KB=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},KB.apply(this,arguments)}function JBe(n,e,t){return e=qBe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qBe(n){var e=QBe(n,"string");return pC(e)=="symbol"?e:String(e)}function QBe(n,e){if(pC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(pC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ZBe(n,e){if(n==null)return{};var t=eFe(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function eFe(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function tFe(n,e){var t=n.className,r=n.children,s=n.size,o=n.selected,l=n.onChange,u=l===void 0?NI:l,h=n.itemsTabIndex,f=ZBe(n,KBe),g="".concat(li,"-status-list"),y=de.useRef();de.useImperativeHandle(e,function(){return{focus:function(C){var M=Array.from(y.current.querySelectorAll("li")),A=M.filter(function(k){return k.parentNode===y.current});typeof A[C]<"u"&&A[C].focus()}}});var b=h;return Tt.createElement("ul",KB({ref:y},f,{className:Ps(g,t,JBe({},"".concat(g,"--").concat(s),s))}),Tt.Children.map(r,function(S){var C={};o&&(C.selected=S.props.status===o),u&&(C.onClick=function(k){u(S.props.status),S.onClick&&S.onClick(k)});var M=function(O){u&&O.key==="Enter"&&O.shiftKey===!1&&O.altKey===!1&&u(S.props.status)},A=function(){if(typeof b=="number")return b>0?b++:b}();return Tt.createElement("li",{tabIndex:A,onKeyPress:M},Tt.cloneElement(S,C))}))}var Pte=de.forwardRef(tFe);Pte.displayName="StatusList";Pte.propTypes={children:Uee([Fee]),selected:Qt.oneOf(Pee),size:Qt.oneOf(Bee),itemsTabIndex:Qt.number,className:Qt.string,onChange:Qt.func};function nFe({}){const[n,e]=de.useState(""),[t,r]=de.useState(new Date);let s=Bn(l=>l.speechObject),o=Bn(xi(l=>l.clock));return de.useEffect(()=>{let l;return typeof s.value!="string"?l=setInterval(()=>{const u=o.getElapsed()*1e3;e(s.value(u)),r(new Date)},250):l=setInterval(()=>{o.getElapsed()*1e3,e(""),r(new Date)},250),()=>clearInterval(l)},[s]),Ae.jsx("div",{children:n!==""&&Ae.jsxs(Nw,{direction:"row",children:[Ae.jsx(Nte,{style:{backgroundColor:"transparent"},children:Ae.jsx(vT,{style:{backgroundColor:"transparent"},children:Ae.jsx(Tv,{className:"my-outgoing-message no-margin-message",model:{direction:"outgoing",message:n,position:"single"}})})}),Ae.jsx("img",{style:{width:"5vw",height:"5vh",alignSelf:"end",zIndex:101},src:K3})]})})}function rFe(n){const e={displayTfs:!1,displayGrid:!0,isPolar:!1,backgroundColor:"#3a3a3a",planeColor:"#3a3a3a",highlightColor:"#ffffff",plane:0,fov:60,ar:!1,vr:!1};return Ae.jsxs(s0,{height:"100%",children:[Ae.jsx(UOe,{style:{overflow:"hidden"},store:Bn,meshLookup:xTe,...e}),Ae.jsx(nLe,{}),Ae.jsx("div",{style:{position:"absolute",right:10,bottom:0,padding:"10px",maxWidth:"50%"},children:Ae.jsx(nFe,{})})]})}var Bte={exports:{}};(function(n,e){(function(t,r){r()})(jl,function(){function t(f,g){return typeof g>"u"?g={autoBom:!1}:typeof g!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),g={autoBom:!g}),g.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function r(f,g,y){var b=new XMLHttpRequest;b.open("GET",f),b.responseType="blob",b.onload=function(){h(b.response,g,y)},b.onerror=function(){console.error("could not download file")},b.send()}function s(f){var g=new XMLHttpRequest;g.open("HEAD",f,!1);try{g.send()}catch{}return 200<=g.status&&299>=g.status}function o(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(g)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof jl=="object"&&jl.global===jl?jl:void 0,u=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(f,g,y){var b=l.URL||l.webkitURL,S=document.createElement("a");g=g||f.name||"download",S.download=g,S.rel="noopener",typeof f=="string"?(S.href=f,S.origin===location.origin?o(S):s(S.href)?r(f,g,y):o(S,S.target="_blank")):(S.href=b.createObjectURL(f),setTimeout(function(){b.revokeObjectURL(S.href)},4e4),setTimeout(function(){o(S)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,y){if(g=g||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(t(f,y),g);else if(s(f))r(f,g,y);else{var b=document.createElement("a");b.href=f,b.target="_blank",setTimeout(function(){o(b)})}}:function(f,g,y,b){if(b=b||open("","_blank"),b&&(b.document.title=b.document.body.innerText="downloading..."),typeof f=="string")return r(f,g,y);var S=f.type==="application/octet-stream",C=/constructor/i.test(l.HTMLElement)||l.safari,M=/CriOS\/[\d]+/.test(navigator.userAgent);if((M||S&&C||u)&&typeof FileReader<"u"){var A=new FileReader;A.onloadend=function(){var P=A.result;P=M?P:P.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=P:location=P,b=null},A.readAsDataURL(f)}else{var k=l.URL||l.webkitURL,O=k.createObjectURL(f);b?b.location=O:location.href=O,b=null,setTimeout(function(){k.revokeObjectURL(O)},4e4)}});l.saveAs=h.saveAs=h,n.exports=h})})(Bte);var iFe=Bte.exports;const DN=Jy(iFe);function KA({title:n,children:e,style:t}){return Ae.jsx(s0,{style:{padding:"5px",paddingTop:"20px",...t},children:Ae.jsxs(s0,{style:{backgroundColor:"#E4E5F1",border:"3px #9394A5 solid",padding:"5px",borderRadius:"6px"},children:[Ae.jsx(s0,{style:{position:"relative",display:"float",top:"-18px",left:"10px"},children:Ae.jsx(s0,{children:Ae.jsx(Df,{display:"inline",style:{filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",backgroundColor:"#E4E5F1",padding:"3px",border:"3px #9394A5 solid",borderRadius:"6px"},children:n})})}),Ae.jsx(Nw,{children:de.Children.map(e,r=>Ae.jsx("div",{style:{padding:"3px",margin:"3px"},children:r}))})]})})}function PN({label:n,buttonText:e,clickFunction:t,style:r}){return Ae.jsxs(Nc,{container:!0,direction:"row",alignItems:"center",style:{...r},children:[Ae.jsx(Df,{display:"inline",style:{paddingRight:"10px",flex:"1"},children:n}),Ae.jsx(Qp,{text:e,clickFunction:t})]})}function BN({label:n,onChangeFunction:e,fieldType:t,textFieldInput:r,style:s}){return Ae.jsxs(Nc,{container:!0,direction:"row",alignItems:"center",style:{...s},children:[Ae.jsx(Df,{display:"inline",style:{paddingRight:"10px",flex:"1"},children:n}),Ae.jsx(X3,{value:r,type:t,onChange:e})]})}function FN({label:n,onChange:e,style:t}){return Ae.jsxs(Nc,{container:!0,direction:"row",alignItems:"center",style:{...t},children:[Ae.jsx(Df,{display:"inline",style:{paddingRight:"10px",flex:"1"},children:n}),Ae.jsx(V3,{type:"file",onChange:e,accept:".xml"})]})}const sFe=()=>{const n=Bn(U=>U.closeModal),e=Bn(U=>U.setEndpoint),t=Bn(U=>U.setAPIKey),r=Bn(U=>U.setDeployment),s=Bn(xi(U=>U.llmDeployment)),o=Bn(xi(U=>U.llmAPIKey)),l=Bn(xi(U=>U.llmEndpoint)),u=Bn(xi(U=>U.setLLMSettings));Bn(U=>U.blocklyWorkspace);const h=Bn(U=>U.toggleLLMBlockPrompt),f=Bn(xi(U=>U.displayLLMBlockPrompt)),g=Bn(xi(U=>U.chatMessageHistory)),y=Bn(xi(U=>U.setChatMessageHistory)),b=Bn(xi(U=>U.getBlockData)),S=Bn(xi(U=>U.loadBlocks)),C=Bn(U=>U.getBlocklyWorkspace),M=()=>{var U=new Blob([VD],{type:"text/plain;charset=utf-8"});DN.saveAs(U,"activity_log.txt")},A=()=>{console.log(g);var U=new Blob([JSON.stringify(g)],{type:"text/plain;charset=utf-8"});DN.saveAs(U,"chat_log.txt")},k=()=>{var U=new Blob([JSON.stringify(b())],{type:"text/plain;charset=utf-8"});DN.saveAs(U,"program.json")},O=U=>{const H=new FileReader;H.onload=function(){const V=H.result;y(JSON.parse(V))},H.readAsText(U.target.files[0])},P=U=>{const H=new FileReader;H.onload=function(){const V=H.result;S(JSON.parse(V),C())},H.readAsText(U.target.files[0])},D=U=>{const H=new FileReader;H.onload=function(){const V=H.result;u(JSON.parse(V))},H.readAsText(U.target.files[0])};return Ae.jsxs(s0,{sx:{backgroundColor:"#585D92",padding:"5px",margin:"0",borderRadius:"10px",maxHeight:"70vh",overflowY:"scroll"},children:[Ae.jsxs(KA,{title:"LLM Settings",children:[Ae.jsx(BN,{onChangeFunction:U=>e(U.target.value),label:"Server Endpoint",fieldType:"password",textFieldInput:l}),Ae.jsx(BN,{onChangeFunction:U=>t(U.target.value),label:"API Key",fieldType:"password",textFieldInput:o}),Ae.jsx(BN,{onChangeFunction:U=>r(U.target.value),label:"Deployment Model",fieldType:"password",textFieldInput:s}),Ae.jsx(FN,{onChange:D,label:"Upload LLM Settings"})]}),Ae.jsxs(KA,{title:"Downloads",children:[Ae.jsx(PN,{clickFunction:M,label:"Download Activity Log",buttonText:"Download"}),Ae.jsx(PN,{clickFunction:k,label:"Download Program",buttonText:"Download"}),Ae.jsx(PN,{clickFunction:A,label:"Download Chat Log",buttonText:"Download"})]}),Ae.jsxs(KA,{title:"Upload",children:[Ae.jsx(FN,{onChange:P,label:"Upload Program"}),Ae.jsx(FN,{onChange:O,label:"Upload Chat Logs"})]}),Ae.jsx(KA,{title:"Toggles",children:Ae.jsx(XK,{style:{justifyContent:"left"},children:Ae.jsx(YK,{style:{justifyContent:"left"},control:Ae.jsx(b_e,{defaultChecked:f,onChange:U=>h(U.target.checked)}),label:"Enable LLM Block Prompt",labelPlacement:"start"})})}),Ae.jsx(Qp,{clickFunction:n,text:"Close",style:{float:"right"}})]})},oFe=()=>{const n=Bn(t=>t.setActiveModal),e=Bn(t=>t.activeModal);return Ae.jsx(GK,{open:e===kX,onClose:(t,r)=>{r==="backdropClick"&&n("")},children:e&&Ae.jsx(sFe,{})})},aFe=()=>Ae.jsx(s0,{sx:{backgroundColor:"#585D92",padding:"15px",margin:"0",borderRadius:"10px",maxHeight:"70vh",overflowY:"scroll"},children:Ae.jsx(oJ,{style:{backgroundColor:"#FAFAFA",borderRadius:"5px"},maxVH:50})}),lFe=()=>{const n=Bn(t=>t.setActiveModal),e=Bn(t=>t.activeModal);return Ae.jsx(GK,{open:e===xle,onClose:(t,r)=>{r==="backdropClick"&&n("")},children:e&&Ae.jsx(aFe,{})})};function uFe(n){return Ae.jsx(Df,{variant:"subtitle1",children:'Use the chatbox below to create a story about the Misty robot! Add characters to the story, describe where it takes place, and what happens in it. Use the Milestones panel on the right to figure out what to add to the story. Use the Robot Features panel in the bottom right to understand what the Misty robot is capable of doing. Your story should consist of actions Misty can actually perform. If you get stuck at any point, you can click the "Help Me" button(s) in the Milestones panel on the right. Most importantly, have fun!'})}const PI=n=>n.includes("[Need Help]")?"Please help me.":n.includes("[Done]")?"Next phase.":n.replaceAll("<Suggestion>","").replaceAll("</Suggestion>","").replace("[Summary]","Summary: "),cFe=n=>{let e=[],t=n.split("<Suggestion>"),r=PI(t.shift()).trim();return t.forEach(s=>{if(s.includes("</Suggestion>")){let o=s.split("</Suggestion>");e.push(o[0].trim()),o[1].length>0&&(r=r.concat(" ",PI(o[1]).trim()))}else r=r.concat(" ",PI(s.trim()))}),[r,e]};function hFe(n){let e=Bn(xi(o=>o.chatMessageHistory)),t=Bn(xi(o=>o.addMessageToHistory)),r=e.length,s=cFe(e[r-1].content);return Ae.jsxs(Nte,{style:{height:"100%"},children:[Ae.jsxs(vT,{children:[e.map((o,l)=>{if(l!=0)return l<r-1?Ae.jsx(Tv,{className:o.role==="user"?"my-outgoing-message":"my-incoming-message",model:{direction:o.role==="user"?"outgoing":"incoming",message:PI(o.content),position:"single"}},l):Ae.jsx(Tv,{className:o.role==="user"?"my-outgoing-message":"my-incoming-message",model:{direction:o.role==="user"?"outgoing":"incoming",message:s[0],position:"single"}},l)}),s[1].length>0&&Ae.jsx("div",{style:{paddingTop:"5px",paddingBottom:"5px"},children:s[1].map((o,l)=>Ae.jsx(Qp,{text:o,useCaps:!1,clickFunction:()=>t(o)},l))})]}),Ae.jsx(N2,{placeholder:"Type message here",attachButton:!1,onSend:t})]})}function dFe({header:n,content:e,style:t}){return Ae.jsxs(s0,{style:t,children:[Ae.jsx(Df,{variant:"h6",children:n}),Ae.jsx(Gge,{variant:"middle"}),e.map(r=>Ae.jsx(Df,{variant:"subtitle1",children:r}))]})}function zN({text:n,style:e}){return Ae.jsx(s0,{style:{display:"flex",backgroundColor:"#585D92",height:"30px",alignContent:"center",paddingTop:"15px"},children:Ae.jsx(s0,{style:{backgroundColor:"white",color:"black",padding:"3px 15px",alignSelf:"flex-end",marginRight:"5px",marginLeft:"10px",marginTop:"10px",position:"relative",borderTopLeftRadius:"5px",borderTopRightRadius:"5px",...e},children:Ae.jsx(Df,{variant:"h6",children:n})})})}const fFe=tr("div")(({theme:n})=>({textAlign:"center",height:"100%"}));function pFe(n){return Ae.jsxs(P1,{orientation:"vertical",style:{height:"100%",width:"100vw"},children:[Ae.jsx(tv,{flex:.65,children:Ae.jsxs(P1,{orientation:"horizontal",children:[Ae.jsx(tv,{flex:.3,children:Ae.jsxs("div",{style:{display:"flex",flexFlow:"column",height:"100%"},children:[Ae.jsx("div",{style:{flex:"0 1 auto"},children:Ae.jsx(zN,{text:"Task Description"})}),Ae.jsx("div",{style:{flex:"1 1 auto",padding:"10px",alignItems:"center",alignContent:"center"},children:Ae.jsx(uFe,{})})]})}),Ae.jsx(kf,{propagate:!0}),Ae.jsx(tv,{flex:.7,children:Ae.jsxs("div",{style:{display:"flex",flexFlow:"column",height:"100%"},children:[Ae.jsx("div",{style:{flex:"0 1 auto"},children:Ae.jsx(zN,{text:"Chat"})}),Ae.jsx("div",{style:{flex:"1 1 auto",paddingTop:"5px"},children:Ae.jsx(hFe,{})})]})})]})}),Ae.jsx(kf,{propagate:!0}),Ae.jsx(tv,{flex:.35,children:Ae.jsxs(P1,{orientation:"horizontal",children:[Ae.jsx(tv,{children:Ae.jsx(fFe,{children:Ae.jsx(Q3,{isPlanningScreen:!0})})}),Ae.jsx(kf,{propagate:!0}),Ae.jsx(tv,{children:Ae.jsxs("div",{style:{display:"flex",flexFlow:"column",height:"100%"},children:[Ae.jsx("div",{style:{flex:"0 1 auto"},children:Ae.jsx(zN,{text:"Robot Features"})}),Ae.jsx("div",{style:{flex:"1 1 auto",paddingTop:"5px",textAlign:"center"},children:Ae.jsxs(Nc,{container:!0,style:{height:"100%"},children:[Ae.jsx(Nc,{item:!0,xs:6,alignItems:"center",children:Ae.jsx("img",{style:{alignContent:"center",width:"80%",height:"80%"},src:K3})}),Ae.jsx(Nc,{item:!0,xs:6,children:Ae.jsx(dFe,{header:"Misty Robot",content:["Move Misty's arms and head!","Change the color of the LED on its chest.","Turn the flashlist on its head on.","Change Misty's experessions, play audio files, or have it speak!","Move Misty around by turning left and right."],style:{paddingRight:"10px"}})})]})})]})})]})})]})}function mFe(n){const e=Bn(t=>t.updateScreen);return Ae.jsxs(Nc,{container:!0,direction:"row",justifyContent:"center",spacing:2,style:{height:"100%",textAlign:"center",alignContent:"center",backgroundColor:"#E4E5F1",marginTop:0},children:[Ae.jsx(Nc,{item:!0,xs:1}),Ae.jsx(Nc,{item:!0,xs:3,children:Ae.jsx(Qp,{text:cI,clickFunction:()=>{Ma("User clicked new tab: Story"),e(p3)},style:{padding:"50px"}})}),Ae.jsx(Nc,{item:!0,xs:3,children:Ae.jsx(Qp,{text:hI,clickFunction:()=>{Ma("User clicked new tab: Planning"),e(m3)},style:{padding:"50px"}})}),Ae.jsx(Nc,{item:!0,xs:3,children:Ae.jsx(Qp,{text:OX,clickFunction:()=>{Ma("User clicked new tab: Programming"),e(gk)},style:{padding:"50px"}})}),Ae.jsx(Nc,{item:!0,xs:1})]})}const UN=tr("div")(({theme:n})=>({textAlign:"center",height:"100%"}));Sy.common.defineBlocks(Yie);Object.assign(Iw.javascriptGenerator.forBlock,ck);function gFe(){const n=Bn(xi(s=>s.llmMode)),e=Bn(xi(s=>s.llmProcessing)),t=Bn(xi(s=>s.headerHeight)),r=Bn(s=>s.screenToShow);return Ae.jsxs(s0,{width:"100vw",height:`calc(100vh - ${t}px)`,padding:0,children:[Ae.jsx(fye,{}),r===f3&&Ae.jsx(mFe,{}),r===p3&&Ae.jsx(pFe,{}),r===m3&&Ae.jsx(yye,{style:{width:"100vw"}}),r===gk&&Ae.jsxs(P1,{orientation:"vertical",style:{height:"100%",width:"100vw"},children:[Ae.jsx(tv,{flex:.55,children:Ae.jsx(UN,{style:{width:"100%",height:"100%"},children:Ae.jsx(bye,{})})}),Ae.jsx(kf,{propagate:!0}),Ae.jsx(tv,{flex:.45,children:Ae.jsxs(P1,{orientation:"horizontal",children:[Ae.jsx(tv,{children:Ae.jsx(UN,{children:!n&&Ae.jsx(rFe,{})})}),Ae.jsx(kf,{propagate:!0}),Ae.jsx(tv,{children:Ae.jsx(UN,{children:!n&&Ae.jsx(Q3,{})})})]})})]}),Ae.jsx(W3,{style:{color:"#fff",zIndex:1500},open:e,children:Ae.jsx("img",{src:Tye,style:{width:"10%"}})}),Ae.jsx(oFe,{}),Ae.jsx(lFe,{})]})}GN.createRoot(document.getElementById("root")).render(Ae.jsx(Tt.StrictMode,{children:Ae.jsx(gFe,{})}));
